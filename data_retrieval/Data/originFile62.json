{"items":[{"tags":["java","tomcat","jboss","weblogic"],"comments":[{"owner":{"account_id":318397,"reputation":203588,"user_id":635608,"display_name":"Mat"},"score":1,"creation_date":1385919109,"post_id":20315022,"comment_id":30315321,"body_markdown":"`/dev/./urandom` and `/dev/urandom` are the same path, there&#39;s no difference.","body":"<code>&#47;dev&#47;.&#47;urandom</code> and <code>&#47;dev&#47;urandom</code> are the same path, there&#39;s no difference."},{"owner":{"account_id":143796,"reputation":5916,"user_id":352403,"accept_rate":71,"display_name":"souser"},"score":2,"creation_date":1385919805,"post_id":20315022,"comment_id":30315497,"body_markdown":"There should not be, but apparently there is","body":"There should not be, but apparently there is"},{"owner":{"account_id":318397,"reputation":203588,"user_id":635608,"display_name":"Mat"},"score":1,"creation_date":1385919983,"post_id":20315022,"comment_id":30315548,"body_markdown":"hum. weird. http://stackoverflow.com/a/2325109/635608","body":"hum. weird. <a href=\"http://stackoverflow.com/a/2325109/635608\">stackoverflow.com/a/2325109/635608</a>"},{"owner":{"account_id":143796,"reputation":5916,"user_id":352403,"accept_rate":71,"display_name":"souser"},"score":0,"creation_date":1385920046,"post_id":20315022,"comment_id":30315564,"body_markdown":"Yup, just arrived at the same conclusion ! Bug 6202721 explains it.","body":"Yup, just arrived at the same conclusion ! Bug 6202721 explains it."}],"answers":[{"tags":[],"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1699910220,"creation_date":1385920039,"answer_id":20315239,"question_id":20315022,"body_markdown":"This is actually a hack introduced into the JVM back in 1.3 or 1.4 days.\r\n\r\n- [JDK-4705093 : Use /dev/urandom rather than /dev/random if it exists.][1]\r\n- [JDK-6202721 : SHA1PRNG reads from /dev/random even if /dev/urandom selected][2] \r\n\r\nThe basic issue is that in the native JVM code they hardcoded `/dev/urandom` to actually use `/dev/random` to attempt to ensure sufficient entropy.  Since `/dev/urandom` is supposed to be guaranteed not to block, this has the unintended consequence of blocking if not enough entropy is available.\r\n\r\nThe hardcoding looks specifically for the string `/dev/urandom`, so providing something that resolves to the same thing but doesn&#39;t match that causes the desired behavior.  If you code `/dev/./urandom` you bypass the hardcoded aliasing and get to the intended `urandom` entropy source.\r\n\r\n[1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=4705093\r\n[2]: https://bugs.java.com/bugdatabase/view_bug?bug_id=6202721","title":"java slow : entropy related issue","body":"<p>This is actually a hack introduced into the JVM back in 1.3 or 1.4 days.</p>\n<ul>\n<li><a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4705093\" rel=\"nofollow noreferrer\">JDK-4705093 : Use /dev/urandom rather than /dev/random if it exists.</a></li>\n<li><a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=6202721\" rel=\"nofollow noreferrer\">JDK-6202721 : SHA1PRNG reads from /dev/random even if /dev/urandom selected</a></li>\n</ul>\n<p>The basic issue is that in the native JVM code they hardcoded <code>/dev/urandom</code> to actually use <code>/dev/random</code> to attempt to ensure sufficient entropy.  Since <code>/dev/urandom</code> is supposed to be guaranteed not to block, this has the unintended consequence of blocking if not enough entropy is available.</p>\n<p>The hardcoding looks specifically for the string <code>/dev/urandom</code>, so providing something that resolves to the same thing but doesn't match that causes the desired behavior.  If you code <code>/dev/./urandom</code> you bypass the hardcoded aliasing and get to the intended <code>urandom</code> entropy source.</p>\n"},{"tags":[],"owner":{"account_id":3048069,"reputation":2704,"user_id":2583229,"accept_rate":29,"display_name":"revau.lt"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1623237589,"creation_date":1426627332,"answer_id":29109963,"question_id":20315022,"body_markdown":"Using /dev/urandom (non blocking) is fine for most cases. Personally I would make sure to have some HW random number generator configured to be positive to have enough entropy (see below). \r\n\r\nIf you have to use /dev/random (blocking) and you cannot block then you should make sure to always have enough entropy. A solution to this is to configure a HW random number generator.\r\n\r\nAssuming your on Linux you can check the available entropy with:\r\n\r\n`cat /proc/sys/kernel/random/entropy_avail`\r\n\r\nIf you are on a machine that has a hw random number generator you most probably want to install rngd. You can check if your cpu has one by issuing the command:\r\n\r\n`cat /proc/cpuinfo`\r\n\r\nLook for flags called *rand*. You can also check if the file /dev/hwrng is present. You might have/want to load the corresponding module: \r\n\r\n` ls /lib/modules/*/kernel/drivers/char/hw_random `\r\n\r\nFor me this is:\r\n\r\n`sudo modprobe tpm-rng`\r\n\r\nTo make it permanent:\r\n\r\n`echo tpm-rng | sudo tee -a /etc/modules`\r\n\r\nIf you happen to be on Ubuntu/Debian just install the package rng-tools.\r\n\r\n`sudo aptitude install rng-tools`\r\n\r\nIf you check your entropy before and after installing rng-tools you should see a significant increase.\r\n\r\nThe following command should show you available entropy sources:\r\n\r\n`sudo rngd -f -r /dev/hwrng -v`\r\n\r\nNote that if you need better security you want to mix multiple entropy sources. Not sure rng-tools supports this.","title":"java slow : entropy related issue","body":"<p>Using /dev/urandom (non blocking) is fine for most cases. Personally I would make sure to have some HW random number generator configured to be positive to have enough entropy (see below).</p>\n<p>If you have to use /dev/random (blocking) and you cannot block then you should make sure to always have enough entropy. A solution to this is to configure a HW random number generator.</p>\n<p>Assuming your on Linux you can check the available entropy with:</p>\n<p><code>cat /proc/sys/kernel/random/entropy_avail</code></p>\n<p>If you are on a machine that has a hw random number generator you most probably want to install rngd. You can check if your cpu has one by issuing the command:</p>\n<p><code>cat /proc/cpuinfo</code></p>\n<p>Look for flags called <em>rand</em>. You can also check if the file /dev/hwrng is present. You might have/want to load the corresponding module:</p>\n<p><code>ls /lib/modules/*/kernel/drivers/char/hw_random</code></p>\n<p>For me this is:</p>\n<p><code>sudo modprobe tpm-rng</code></p>\n<p>To make it permanent:</p>\n<p><code>echo tpm-rng | sudo tee -a /etc/modules</code></p>\n<p>If you happen to be on Ubuntu/Debian just install the package rng-tools.</p>\n<p><code>sudo aptitude install rng-tools</code></p>\n<p>If you check your entropy before and after installing rng-tools you should see a significant increase.</p>\n<p>The following command should show you available entropy sources:</p>\n<p><code>sudo rngd -f -r /dev/hwrng -v</code></p>\n<p>Note that if you need better security you want to mix multiple entropy sources. Not sure rng-tools supports this.</p>\n"}],"owner":{"account_id":143796,"reputation":5916,"user_id":352403,"accept_rate":71,"display_name":"souser"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2703,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":20315239,"answer_count":2,"score":6,"last_activity_date":1699910220,"creation_date":1385918860,"question_id":20315022,"body_markdown":"I am running into an issue where java is slow when used over SSL. The solution is to add &lt;pre&gt;-Djava.security.egd=file:/dev/./urandom&lt;/pre&gt; to java at the command line. Since I have multiple JVM&#39;s, I dont want to modify every single JVM to contain this string and hence would like to add it to the file &lt;pre&gt;$JAVA_HOME/jre/lib/security/java.security&lt;/pre&gt;\r\n\r\nNow, the java.security file already contains &lt;pre&gt;securerandom.source=file:/dev/urandom&lt;/pre&gt;\r\n\r\nTwo questions on this :\r\n\r\n1. Why and how is &quot;/dev/urandom&quot; different from &quot;/dev/./urandom&quot;. Why doesnt java accept &quot;/dev/urandom&quot;\r\n2. For the JVM&#39;s that I have running, how can I tell whether they are using the correct urandmon device (vs random)","title":"java slow : entropy related issue","body":"<p>I am running into an issue where java is slow when used over SSL. The solution is to add <pre>-Djava.security.egd=file:/dev/./urandom</pre> to java at the command line. Since I have multiple JVM's, I dont want to modify every single JVM to contain this string and hence would like to add it to the file <pre>$JAVA_HOME/jre/lib/security/java.security</pre></p>\n\n<p>Now, the java.security file already contains <pre>securerandom.source=file:/dev/urandom</pre></p>\n\n<p>Two questions on this :</p>\n\n<ol>\n<li>Why and how is \"/dev/urandom\" different from \"/dev/./urandom\". Why doesnt java accept \"/dev/urandom\"</li>\n<li>For the JVM's that I have running, how can I tell whether they are using the correct urandmon device (vs random)</li>\n</ol>\n"},{"tags":["javascript","java","amazon-web-services","amazon-ec2","amazon-elastic-beanstalk"],"comments":[{"owner":{"account_id":100740,"reputation":73207,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":1,"creation_date":1699911481,"post_id":77476931,"comment_id":136588024,"body_markdown":"It seems very unlikely that a `Request method &#39;POST&#39; not supported` response is caused by firewalls, security groups, or network routes. I would imagine that your client&#39;s HTTP POST request made it to the endpoint and was rejected, because the application at that endpoint doesn&#39;t support POST.","body":"It seems very unlikely that a <code>Request method &#39;POST&#39; not supported</code> response is caused by firewalls, security groups, or network routes. I would imagine that your client&#39;s HTTP POST request made it to the endpoint and was rejected, because the application at that endpoint doesn&#39;t support POST."},{"owner":{"account_id":29494496,"reputation":1,"user_id":22602863,"display_name":"Fahd Mirza"},"score":0,"creation_date":1699915329,"post_id":77476931,"comment_id":136588567,"body_markdown":"Hi Jaromd,  thanks for insight by any chance can you give me some instructions on how to fix it? or how to see ?","body":"Hi Jaromd,  thanks for insight by any chance can you give me some instructions on how to fix it? or how to see ?"},{"owner":{"account_id":100740,"reputation":73207,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1699915788,"post_id":77476931,"comment_id":136588637,"body_markdown":"First ensure that the URL you&#39;re posting to is actually correct. Then use logging (e.g. at your load balancer or on your web servers) or network capture to determine which EC2 instance the POST request is actually hitting. Then diagnose it locally on that instance (check any proxy config that might block/deny POST requests, check the code deployed, test GET and POST requests to it locally).","body":"First ensure that the URL you&#39;re posting to is actually correct. Then use logging (e.g. at your load balancer or on your web servers) or network capture to determine which EC2 instance the POST request is actually hitting. Then diagnose it locally on that instance (check any proxy config that might block/deny POST requests, check the code deployed, test GET and POST requests to it locally)."}],"owner":{"account_id":29494496,"reputation":1,"user_id":22602863,"display_name":"Fahd Mirza"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1699910124,"creation_date":1699910124,"question_id":77476931,"body_markdown":"Hello guys i am having a issue while sending data the error is &quot;request method &#39;post&#39; not supported. I have uploaded a image of the error \r\n\r\nThis is only happnening in one of our testing envr, i have done a couple of troubleshooting steps but any insight into this will be helpful \r\n1-Copied the sg group from A -&gt; B\r\n2-Went to Elastic Beanstalk found A elastci beanstak and copied the listeners to B elastic beanstalk \r\n3-Checked Nginx on A instance and it was the same for B instance\r\n  -&quot;cat /etc/nginx/conf.d/elasticbeanstalk/00_application.conf&quot; \r\n4-Checked Tomcat it is the same for A instance -&gt;B instance \r\n- went into the conf file and looked for web.xml/ \r\n- checked the servlet maping they both looked the same from A instance -&gt; B instance      \r\n5- made sure that port 80, 22 and 443 were allowed on the inbound and the source 0.0.0.0/0\r\n\r\ni can rebuild the elastic beanstalk but i want to see if there is any ideas before i do that \r\n\r\n[enter image description here](https://i.stack.imgur.com/UhDP4.png) \r\n\r\nIf i wanted to check the connection why its timing out would i ssh into the ec2 and then run the command ping (the other ip address of the ec2?)\r\n\r\nThank you \r\n\r\n1-Copied the sg group from A -&gt; B\r\n2-Went to Elastic Beanstalk found A elastci beanstak and copied the listeners to B elastic beanstalk \r\n3-Checked Nginx on A instance and it was the same for B instance\r\n  -&quot;cat /etc/nginx/conf.d/elasticbeanstalk/00_application.conf&quot; \r\n4-Checked Tomcat it is the same for A instance -&gt;B instance \r\n- went into the conf file and looked for web.xml/ \r\n- checked the servlet maping they both looked the same from A instance -&gt; B instance      \r\n5- made sure that port 80, 22 and 443 were allowed on the inbound and the source 0.0.0.0/0\r\n\r\ni can rebuild the elastic beanstalk but i want to see if there is any ideas before i do that \r\n\r\n[enter image description here](https://i.stack.imgur.com/UhDP4.png) \r\n\r\nIf i wanted to check the connection why its timing out would i ssh into the ec2 and then run the command ping (the other ip address of the ec2?)\r\n\r\nThank you ","title":"Request method &#39;POST&#39; not supported in ec2","body":"<p>Hello guys i am having a issue while sending data the error is &quot;request method 'post' not supported. I have uploaded a image of the error</p>\n<p>This is only happnening in one of our testing envr, i have done a couple of troubleshooting steps but any insight into this will be helpful\n1-Copied the sg group from A -&gt; B\n2-Went to Elastic Beanstalk found A elastci beanstak and copied the listeners to B elastic beanstalk\n3-Checked Nginx on A instance and it was the same for B instance\n-&quot;cat /etc/nginx/conf.d/elasticbeanstalk/00_application.conf&quot;\n4-Checked Tomcat it is the same for A instance -&gt;B instance</p>\n<ul>\n<li>went into the conf file and looked for web.xml/</li>\n<li>checked the servlet maping they both looked the same from A instance -&gt; B instance<br />\n5- made sure that port 80, 22 and 443 were allowed on the inbound and the source 0.0.0.0/0</li>\n</ul>\n<p>i can rebuild the elastic beanstalk but i want to see if there is any ideas before i do that</p>\n<p><a href=\"https://i.stack.imgur.com/UhDP4.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>If i wanted to check the connection why its timing out would i ssh into the ec2 and then run the command ping (the other ip address of the ec2?)</p>\n<p>Thank you</p>\n<p>1-Copied the sg group from A -&gt; B\n2-Went to Elastic Beanstalk found A elastci beanstak and copied the listeners to B elastic beanstalk\n3-Checked Nginx on A instance and it was the same for B instance\n-&quot;cat /etc/nginx/conf.d/elasticbeanstalk/00_application.conf&quot;\n4-Checked Tomcat it is the same for A instance -&gt;B instance</p>\n<ul>\n<li>went into the conf file and looked for web.xml/</li>\n<li>checked the servlet maping they both looked the same from A instance -&gt; B instance<br />\n5- made sure that port 80, 22 and 443 were allowed on the inbound and the source 0.0.0.0/0</li>\n</ul>\n<p>i can rebuild the elastic beanstalk but i want to see if there is any ideas before i do that</p>\n<p><a href=\"https://i.stack.imgur.com/UhDP4.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>If i wanted to check the connection why its timing out would i ssh into the ec2 and then run the command ping (the other ip address of the ec2?)</p>\n<p>Thank you</p>\n"},{"tags":["java","intellij-idea","regex-group","assertion"],"comments":[{"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"score":0,"creation_date":1699911104,"post_id":77476820,"comment_id":136587972,"body_markdown":"`assertTrue(yt.getUrl().contains(&quot;t=&quot;));` seems simpler...","body":"<code>assertTrue(yt.getUrl().contains(&quot;t=&quot;));</code> seems simpler..."}],"answers":[{"tags":[],"owner":{"account_id":7098080,"reputation":930,"user_id":5430811,"accept_rate":83,"display_name":"Semaphor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699909790,"creation_date":1699909790,"answer_id":77476897,"question_id":77476820,"body_markdown":" You need to accept any characters multiple times before and after `t=`, the following should work:\r\n\r\n    @Test\r\n    void hasCurrentProgress()\r\n    {\r\n        YTVideo yt = new YTVideo();\r\n        yt.setUrl(&quot;https://www.youtube.com/watch?v=U6Z8FkjGEb4&amp;t=2s&quot;);\r\n        assertTrue(yt.getUrl().matches(&quot;.*(t=).*&quot;));\r\n    }","title":"Why am I receiving an AssertionFailedError when using matches() in assertTrue()?","body":"<p>You need to accept any characters multiple times before and after <code>t=</code>, the following should work:</p>\n<pre><code>@Test\nvoid hasCurrentProgress()\n{\n    YTVideo yt = new YTVideo();\n    yt.setUrl(&quot;https://www.youtube.com/watch?v=U6Z8FkjGEb4&amp;t=2s&quot;);\n    assertTrue(yt.getUrl().matches(&quot;.*(t=).*&quot;));\n}\n</code></pre>\n"}],"owner":{"account_id":29895201,"reputation":1,"user_id":22910317,"display_name":"floppalover"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699909790,"creation_date":1699908956,"question_id":77476820,"body_markdown":"    @Test\r\n    void hasCurrentProgress()\r\n    {\r\n        YTVideo yt = new YTVideo();\r\n        yt.setUrl(&quot;https://www.youtube.com/watch?v=U6Z8FkjGEb4&amp;t=2s&quot;);\r\n        assertTrue(yt.getUrl().matches(&quot;(t=)&quot;));\r\n    }\r\n\r\nI am trying to detect if there is a &quot;t=&quot; anywhere in the url but the test case returns false even if the given url does contain a &quot;t=&quot; and works in the &quot;Check RegExp&quot; feature on IntelliJ. Does anybody have a fix for this but still using RegEx?","title":"Why am I receiving an AssertionFailedError when using matches() in assertTrue()?","body":"<pre><code>@Test\nvoid hasCurrentProgress()\n{\n    YTVideo yt = new YTVideo();\n    yt.setUrl(&quot;https://www.youtube.com/watch?v=U6Z8FkjGEb4&amp;t=2s&quot;);\n    assertTrue(yt.getUrl().matches(&quot;(t=)&quot;));\n}\n</code></pre>\n<p>I am trying to detect if there is a &quot;t=&quot; anywhere in the url but the test case returns false even if the given url does contain a &quot;t=&quot; and works in the &quot;Check RegExp&quot; feature on IntelliJ. Does anybody have a fix for this but still using RegEx?</p>\n"},{"tags":["java","android","c++","android-ndk","java-native-interface"],"comments":[{"owner":{"account_id":27742476,"reputation":1,"user_id":21178662,"display_name":"Daniil Solodkov"},"score":0,"creation_date":1698501959,"post_id":77379401,"comment_id":136415351,"body_markdown":"I displayed /proc/%d/maps and saw that there are a lot of different processes there, but I don’t need it, then where should I look for it?(","body":"I displayed /proc/%d/maps and saw that there are a lot of different processes there, but I don’t need it, then where should I look for it?("},{"owner":{"account_id":27742476,"reputation":1,"user_id":21178662,"display_name":"Daniil Solodkov"},"score":0,"creation_date":1698725820,"post_id":77379401,"comment_id":136438600,"body_markdown":"This bug makes me cry","body":"This bug makes me cry"},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1699907993,"post_id":77379401,"comment_id":136587488,"body_markdown":"The required JNI version is latter than your JVM’s.","body":"The required JNI version is latter than your JVM’s."}],"owner":{"account_id":27742476,"reputation":1,"user_id":21178662,"display_name":"Daniil Solodkov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699908859,"creation_date":1698495391,"question_id":77379401,"body_markdown":"I&#39;m trying to create a launcher for SAMP Android. Everything was going well until the integration of SAMP itself ([build69](https://github.com/Hobr/SA-MP-Android/tree/master)). libsamp.so cannot find the address of the neighboring libGTASA.so library.\r\n\r\nInitializing all libraries (Java)\r\n\r\n```\r\nstatic {\r\n        vmVersion = null;\r\n        System.out.println(&quot;**** Loading SO&#39;s&quot;);\r\n        try\r\n        {\r\n            vmVersion = System.getProperty(&quot;java.vm.version&quot;);\r\n            System.out.println(&quot;vmVersion &quot; + vmVersion);\r\n            System.out.println(&quot;**** Loading libImmEmulatorJ.so&quot;);\r\n            System.loadLibrary(&quot;ImmEmulatorJ&quot;);\r\n        } catch (ExceptionInInitializerError | UnsatisfiedLinkError e) {\r\n        }\r\n        System.out.println(&quot;**** Loading libGTASA.so&quot;);\r\n        System.loadLibrary(&quot;GTASA&quot;);\r\n        System.out.println(&quot;**** Loading libsamp.so&quot;);\r\n        System.loadLibrary(&quot;samp&quot;);\r\n    }\r\n```\r\n\r\n\r\nFinding a library in libsamp.so (C++ JNI)\r\n\r\n\r\n```\r\njint JNI_OnLoad(JavaVM *vm, void *reserved)\r\n{\r\n  Log(&quot;SAMP library loaded! Build time: &quot; __DATE__ &quot; &quot; __TIME__);\r\n\r\n  g_libGTASA = FindLibrary(&quot;libGTASA.so&quot;);\r\n  if(g_libGTASA == 0)\r\n  {\r\n    Log(&quot;ERROR: libGTASA.so address not found!&quot;);\r\n    return 0;\r\n  }\r\n\r\n  Log(&quot;libGTASA.so image base address: 0x%X&quot;, g_libGTASA);\r\n\r\n  srand(time(0));\r\n\r\n  InitHookStuff();\r\n  InitRenderWareFunctions();\r\n  InstallSpecialHooks();\r\n\r\n  pthread_t thread;\r\n  pthread_create(&amp;thread, 0, Init, 0);\r\n\r\n  struct sigaction act;\r\n  act.sa_sigaction = handler;\r\n  sigemptyset(&amp;act.sa_mask);\r\n  act.sa_flags = SA_SIGINFO;\r\n  sigaction(SIGSEGV, &amp;act, 0);\r\n\r\n  return JNI_VERSION_1_4;\r\n}\r\n```\r\n\r\nFindLibrary:\r\n\r\n```\r\nuintptr_t FindLibrary(const char* library)\r\n{\r\n    char filename[0xFF] = {0},\r\n    buffer[2048] = {0};\r\n    FILE *fp = 0;\r\n    uintptr_t address = 0;\r\n\r\n    sprintf( filename, &quot;/proc/%d/maps&quot;, getpid() );\r\n\r\n    fp = fopen( filename, &quot;rt&quot; );\r\n    if(fp == 0)\r\n    {\r\n        Log(&quot;ERROR: can&#39;t open file %s&quot;, filename);\r\n        goto done;\r\n    }\r\n\r\n    while(fgets(buffer, sizeof(buffer), fp))\r\n    {\r\n        if( strstr( buffer, library ) )\r\n        {\r\n            address = (uintptr_t)strtoul( buffer, 0, 16 );\r\n            break;\r\n        }\r\n    }\r\n\r\n    done:\r\n\r\n    if(fp)\r\n      fclose(fp);\r\n\r\n    return address;\r\n}\r\n```\r\n\r\n\r\nApplication log:\r\n\r\n\r\n```\r\n2023-10-28 14:57:32.800 29054-29054 System.out              com.kalinovka.game                   I  **** Loading SO&#39;s\r\n2023-10-28 14:57:32.800 29054-29054 System.out              com.kalinovka.game                   I  vmVersion 2.1.0\r\n2023-10-28 14:57:32.800 29054-29054 System.out              com.kalinovka.game                   I  **** Loading libImmEmulatorJ.so\r\n2023-10-28 14:57:32.804 29054-29054 System.out              com.kalinovka.game                   I  **** Loading libGTASA.so\r\n2023-10-28 14:57:32.813 29054-29054 NVEvent                 com.kalinovka.game                   D  JNI_OnLoad called\r\n2023-10-28 14:57:32.813 29054-29054 NVEvent                 com.kalinovka.game                   D  RegisterNatives 12\r\n2023-10-28 14:57:32.813 29054-29054 System.out              com.kalinovka.game                   I  **** Loading libsamp.so\r\n2023-10-28 14:57:32.815 29054-29054 AXL                     com.kalinovka.game                   I  SAMP library loaded! Build time: Oct 28 2023 14:47:20\r\n2023-10-28 14:57:32.819 29054-29054 AXL                     com.kalinovka.game                   I  ERROR: libGTASA.so address not found!\r\n2023-10-28 14:57:32.820 29054-29054 AndroidRuntime          com.kalinovka.game                   D  Shutting down VM\r\n2023-10-28 14:57:32.823 29054-29054 AndroidRuntime          com.kalinovka.game                   E  FATAL EXCEPTION: main\r\n                                                                                                    Process: com.kalinovka.game, PID: 29054\r\n                                                                                                    java.lang.UnsatisfiedLinkError: Bad JNI version returned from JNI_OnLoad in &quot;/data/app/~~AIt22YvJlsdkRyH_N_WAEw==/com.kalinovka.game-G93aBwDihlPGnVBadiHFkQ==/base.apk!/lib/armeabi-v7a/libsamp.so&quot;: 0\r\n                                                                                                    \tat java.lang.Runtime.loadLibrary0(Runtime.java:1082)\r\n                                                                                                    \tat java.lang.Runtime.loadLibrary0(Runtime.java:1003)\r\n                                                                                                    \tat java.lang.System.loadLibrary(System.java:1661)\r\n                                                                                                    \tat com.kalinovka.game.core.GTASA.&lt;clinit&gt;(GTASA.java:28)\r\n                                                                                                    \tat java.lang.Class.newInstance(Native Method)\r\n                                                                                                    \tat android.app.AppComponentFactory.instantiateActivity(AppComponentFactory.java:95)\r\n                                                                                                    \tat androidx.core.app.CoreComponentFactory.instantiateActivity(CoreComponentFactory.java:45)\r\n                                                                                                    \tat android.app.Instrumentation.newActivity(Instrumentation.java:1287)\r\n                                                                                                    \tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3701)\r\n                                                                                                    \tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3977)\r\n                                                                                                    \tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:109)\r\n                                                                                                    \tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n                                                                                                    \tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n                                                                                                    \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2374)\r\n                                                                                                    \tat android.os.Handler.dispatchMessage(Handler.java:106)\r\n                                                                                                    \tat android.os.Looper.loopOnce(Looper.java:233)\r\n                                                                                                    \tat android.os.Looper.loop(Looper.java:344)\r\n                                                                                                    \tat android.app.ActivityThread.main(ActivityThread.java:8249)\r\n                                                                                                    \tat java.lang.reflect.Method.invoke(Native Method)\r\n                                                                                                    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:589)\r\n                                                                                                    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1071)\r\n2023-10-28 14:57:32.894 29054-29054 Process                 com.kalinovka.game                   I  Sending signal. PID: 29054 SIG: 9\r\n```\r\nError: Invalid JNI version returned from JNI_OnLoad - since libsamp.so sent 0, you can ignore this\r\n\r\n\r\nI removed all references to libsamp.so and the application works, GTASA itself is initialized by the id, this means that libGTASA.so is loaded and working.\r\n\r\nI changed the library name in FindLibrary, it also returned zero. Indicates that there is a problem with access due to the Android API level.\r\n\r\nI found the same problem on a Russian-language site, but there was no solution, but the question indicated that this error only occurs on Android API 30+","title":"Why does FindLibrary return 0?","body":"<p>I'm trying to create a launcher for SAMP Android. Everything was going well until the integration of SAMP itself (<a href=\"https://github.com/Hobr/SA-MP-Android/tree/master\" rel=\"nofollow noreferrer\">build69</a>). libsamp.so cannot find the address of the neighboring libGTASA.so library.</p>\n<p>Initializing all libraries (Java)</p>\n<pre><code>static {\n        vmVersion = null;\n        System.out.println(&quot;**** Loading SO's&quot;);\n        try\n        {\n            vmVersion = System.getProperty(&quot;java.vm.version&quot;);\n            System.out.println(&quot;vmVersion &quot; + vmVersion);\n            System.out.println(&quot;**** Loading libImmEmulatorJ.so&quot;);\n            System.loadLibrary(&quot;ImmEmulatorJ&quot;);\n        } catch (ExceptionInInitializerError | UnsatisfiedLinkError e) {\n        }\n        System.out.println(&quot;**** Loading libGTASA.so&quot;);\n        System.loadLibrary(&quot;GTASA&quot;);\n        System.out.println(&quot;**** Loading libsamp.so&quot;);\n        System.loadLibrary(&quot;samp&quot;);\n    }\n</code></pre>\n<p>Finding a library in libsamp.so (C++ JNI)</p>\n<pre><code>jint JNI_OnLoad(JavaVM *vm, void *reserved)\n{\n  Log(&quot;SAMP library loaded! Build time: &quot; __DATE__ &quot; &quot; __TIME__);\n\n  g_libGTASA = FindLibrary(&quot;libGTASA.so&quot;);\n  if(g_libGTASA == 0)\n  {\n    Log(&quot;ERROR: libGTASA.so address not found!&quot;);\n    return 0;\n  }\n\n  Log(&quot;libGTASA.so image base address: 0x%X&quot;, g_libGTASA);\n\n  srand(time(0));\n\n  InitHookStuff();\n  InitRenderWareFunctions();\n  InstallSpecialHooks();\n\n  pthread_t thread;\n  pthread_create(&amp;thread, 0, Init, 0);\n\n  struct sigaction act;\n  act.sa_sigaction = handler;\n  sigemptyset(&amp;act.sa_mask);\n  act.sa_flags = SA_SIGINFO;\n  sigaction(SIGSEGV, &amp;act, 0);\n\n  return JNI_VERSION_1_4;\n}\n</code></pre>\n<p>FindLibrary:</p>\n<pre><code>uintptr_t FindLibrary(const char* library)\n{\n    char filename[0xFF] = {0},\n    buffer[2048] = {0};\n    FILE *fp = 0;\n    uintptr_t address = 0;\n\n    sprintf( filename, &quot;/proc/%d/maps&quot;, getpid() );\n\n    fp = fopen( filename, &quot;rt&quot; );\n    if(fp == 0)\n    {\n        Log(&quot;ERROR: can't open file %s&quot;, filename);\n        goto done;\n    }\n\n    while(fgets(buffer, sizeof(buffer), fp))\n    {\n        if( strstr( buffer, library ) )\n        {\n            address = (uintptr_t)strtoul( buffer, 0, 16 );\n            break;\n        }\n    }\n\n    done:\n\n    if(fp)\n      fclose(fp);\n\n    return address;\n}\n</code></pre>\n<p>Application log:</p>\n<pre><code>2023-10-28 14:57:32.800 29054-29054 System.out              com.kalinovka.game                   I  **** Loading SO's\n2023-10-28 14:57:32.800 29054-29054 System.out              com.kalinovka.game                   I  vmVersion 2.1.0\n2023-10-28 14:57:32.800 29054-29054 System.out              com.kalinovka.game                   I  **** Loading libImmEmulatorJ.so\n2023-10-28 14:57:32.804 29054-29054 System.out              com.kalinovka.game                   I  **** Loading libGTASA.so\n2023-10-28 14:57:32.813 29054-29054 NVEvent                 com.kalinovka.game                   D  JNI_OnLoad called\n2023-10-28 14:57:32.813 29054-29054 NVEvent                 com.kalinovka.game                   D  RegisterNatives 12\n2023-10-28 14:57:32.813 29054-29054 System.out              com.kalinovka.game                   I  **** Loading libsamp.so\n2023-10-28 14:57:32.815 29054-29054 AXL                     com.kalinovka.game                   I  SAMP library loaded! Build time: Oct 28 2023 14:47:20\n2023-10-28 14:57:32.819 29054-29054 AXL                     com.kalinovka.game                   I  ERROR: libGTASA.so address not found!\n2023-10-28 14:57:32.820 29054-29054 AndroidRuntime          com.kalinovka.game                   D  Shutting down VM\n2023-10-28 14:57:32.823 29054-29054 AndroidRuntime          com.kalinovka.game                   E  FATAL EXCEPTION: main\n                                                                                                    Process: com.kalinovka.game, PID: 29054\n                                                                                                    java.lang.UnsatisfiedLinkError: Bad JNI version returned from JNI_OnLoad in &quot;/data/app/~~AIt22YvJlsdkRyH_N_WAEw==/com.kalinovka.game-G93aBwDihlPGnVBadiHFkQ==/base.apk!/lib/armeabi-v7a/libsamp.so&quot;: 0\n                                                                                                        at java.lang.Runtime.loadLibrary0(Runtime.java:1082)\n                                                                                                        at java.lang.Runtime.loadLibrary0(Runtime.java:1003)\n                                                                                                        at java.lang.System.loadLibrary(System.java:1661)\n                                                                                                        at com.kalinovka.game.core.GTASA.&lt;clinit&gt;(GTASA.java:28)\n                                                                                                        at java.lang.Class.newInstance(Native Method)\n                                                                                                        at android.app.AppComponentFactory.instantiateActivity(AppComponentFactory.java:95)\n                                                                                                        at androidx.core.app.CoreComponentFactory.instantiateActivity(CoreComponentFactory.java:45)\n                                                                                                        at android.app.Instrumentation.newActivity(Instrumentation.java:1287)\n                                                                                                        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3701)\n                                                                                                        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3977)\n                                                                                                        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:109)\n                                                                                                        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n                                                                                                        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n                                                                                                        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2374)\n                                                                                                        at android.os.Handler.dispatchMessage(Handler.java:106)\n                                                                                                        at android.os.Looper.loopOnce(Looper.java:233)\n                                                                                                        at android.os.Looper.loop(Looper.java:344)\n                                                                                                        at android.app.ActivityThread.main(ActivityThread.java:8249)\n                                                                                                        at java.lang.reflect.Method.invoke(Native Method)\n                                                                                                        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:589)\n                                                                                                        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1071)\n2023-10-28 14:57:32.894 29054-29054 Process                 com.kalinovka.game                   I  Sending signal. PID: 29054 SIG: 9\n</code></pre>\n<p>Error: Invalid JNI version returned from JNI_OnLoad - since libsamp.so sent 0, you can ignore this</p>\n<p>I removed all references to libsamp.so and the application works, GTASA itself is initialized by the id, this means that libGTASA.so is loaded and working.</p>\n<p>I changed the library name in FindLibrary, it also returned zero. Indicates that there is a problem with access due to the Android API level.</p>\n<p>I found the same problem on a Russian-language site, but there was no solution, but the question indicated that this error only occurs on Android API 30+</p>\n"},{"tags":["java","spring","spring-mvc","spring-security"],"answers":[{"tags":[],"owner":{"account_id":14226667,"reputation":523,"user_id":10277150,"display_name":"gurkan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1699908734,"creation_date":1699908734,"answer_id":77476795,"question_id":76601152,"body_markdown":"I searched a lot and finally found the solution. Just add this piece of code:\r\n\r\n```\r\n   .formLogin(AbstractAuthenticationFilterConfigurer::permitAll)\r\n","title":"Spring Security 6 Form Login does not create a login controller","body":"<p>I searched a lot and finally found the solution. Just add this piece of code:</p>\n<pre><code>   .formLogin(AbstractAuthenticationFilterConfigurer::permitAll)\n</code></pre>\n"}],"owner":{"account_id":5364882,"reputation":621,"user_id":4275167,"accept_rate":22,"display_name":"JCvanDamme"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":579,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699908734,"creation_date":1688340789,"question_id":76601152,"body_markdown":"I am trying integrate the default spring security 6 form login as described in https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html#page-title with my Spring 6 MVC (not boot!)\r\n\r\nI expect that there would be a `GET /login` controller for the login page and a `POST /login` controller for a login form action. The `GET` controller should return a login form with `action=&quot;/login&quot;` and `mehod=&quot;post&quot;`. \r\n\r\nNeither controller gets created. A browser `GET /login` returns \r\n\r\n    HTTP ERROR 404 Not Found\r\n    URI:\t/login\r\n    STATUS:\t404\r\n    MESSAGE:\tNot Found\r\n    SERVLET:\tSpring Dispatcher Servlet\r\n\r\n\r\nI also tried a configuration with custom login page with a form that `POST`s the credentials to `/login` but the server returns \r\n\r\n    HTTP ERROR 405 Method &#39;POST&#39; is not supported.\r\n    URI:\t/login\r\n    STATUS:\t405\r\n    MESSAGE:\tMethod &#39;POST&#39; is not supported.\r\n    SERVLET:\tSpring Dispatcher Servlet\r\n\r\n**SpringSecurityConfig.java**\r\n\r\n    package com.myapp.config;\r\n\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.config.Customizer;\r\n    import org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;\r\n    import org.springframework.security.config.annotation.web.configurers.LogoutConfigurer;\r\n    import org.springframework.security.web.SecurityFilterChain;\r\n    \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableMethodSecurity(securedEnabled = true, jsr250Enabled = true)\r\n    public class SecurityConfig {\r\n        @Bean\r\n        public SecurityFilterChain filterChain(final HttpSecurity http) throws Exception {\r\n            return http\r\n                    .csrf(AbstractHttpConfigurer::disable)\r\n                    .authorizeHttpRequests(requests -&gt; requests\r\n                            .requestMatchers(&quot;/secured&quot;)\r\n                            .hasAnyRole(&quot;USER&quot;)\r\n                            .anyRequest()\r\n                            .authenticated()\r\n                    )\r\n                    .formLogin(Customizer.withDefaults())\r\n                    // Replacing Customizer.withDefaults() with form -&gt; form.loginPage(&#39;/login&#39;).permitAll() \r\n                    // doesn&#39;t work either \r\n                    .build();\r\n        }\r\n    }","title":"Spring Security 6 Form Login does not create a login controller","body":"<p>I am trying integrate the default spring security 6 form login as described in <a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html#page-title\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html#page-title</a> with my Spring 6 MVC (not boot!)</p>\n<p>I expect that there would be a <code>GET /login</code> controller for the login page and a <code>POST /login</code> controller for a login form action. The <code>GET</code> controller should return a login form with <code>action=&quot;/login&quot;</code> and <code>mehod=&quot;post&quot;</code>.</p>\n<p>Neither controller gets created. A browser <code>GET /login</code> returns</p>\n<pre><code>HTTP ERROR 404 Not Found\nURI:    /login\nSTATUS: 404\nMESSAGE:    Not Found\nSERVLET:    Spring Dispatcher Servlet\n</code></pre>\n<p>I also tried a configuration with custom login page with a form that <code>POST</code>s the credentials to <code>/login</code> but the server returns</p>\n<pre><code>HTTP ERROR 405 Method 'POST' is not supported.\nURI:    /login\nSTATUS: 405\nMESSAGE:    Method 'POST' is not supported.\nSERVLET:    Spring Dispatcher Servlet\n</code></pre>\n<p><strong>SpringSecurityConfig.java</strong></p>\n<pre><code>package com.myapp.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.Customizer;\nimport org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;\nimport org.springframework.security.config.annotation.web.configurers.LogoutConfigurer;\nimport org.springframework.security.web.SecurityFilterChain;\n\n@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity(securedEnabled = true, jsr250Enabled = true)\npublic class SecurityConfig {\n    @Bean\n    public SecurityFilterChain filterChain(final HttpSecurity http) throws Exception {\n        return http\n                .csrf(AbstractHttpConfigurer::disable)\n                .authorizeHttpRequests(requests -&gt; requests\n                        .requestMatchers(&quot;/secured&quot;)\n                        .hasAnyRole(&quot;USER&quot;)\n                        .anyRequest()\n                        .authenticated()\n                )\n                .formLogin(Customizer.withDefaults())\n                // Replacing Customizer.withDefaults() with form -&gt; form.loginPage('/login').permitAll() \n                // doesn't work either \n                .build();\n    }\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","amazon-sqs","localstack","aws-java-sdk-2.x"],"answers":[{"tags":[],"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683901426,"creation_date":1683900680,"answer_id":76237159,"question_id":76233213,"body_markdown":" I recommended that you get it running in a Java Console app before trying to get it to work with localstack. Make sure your [AWS SDK for Java V2][1] logic works.\r\n\r\nTo create a SQS Client object, use: \r\n\r\n     SqsClient sqsClient = SqsClient.builder()\r\n                .region(Region.US_WEST_2)\r\n                .credentialsProvider(ProfileCredentialsProvider.create())\r\n                .build();\r\n\r\nTry getting this SQS example working in a Java JDE like IntelliJ and make sure you can run it. \r\n\r\nThe Github location where you will find the POM is here. \r\n\r\nhttps://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2/example_code/sqs\r\n\r\nFull example to try:\r\n\r\n    package com.example.sqs;\r\n    \r\n    // snippet-start:[sqs.java2.sqs_example.import]\r\n    import software.amazon.awssdk.auth.credentials.ProfileCredentialsProvider;\r\n    import software.amazon.awssdk.regions.Region;\r\n    import software.amazon.awssdk.services.sqs.SqsClient;\r\n    import software.amazon.awssdk.services.sqs.model.ChangeMessageVisibilityRequest;\r\n    import software.amazon.awssdk.services.sqs.model.CreateQueueRequest;\r\n    import software.amazon.awssdk.services.sqs.model.DeleteMessageRequest;\r\n    import software.amazon.awssdk.services.sqs.model.GetQueueUrlRequest;\r\n    import software.amazon.awssdk.services.sqs.model.GetQueueUrlResponse;\r\n    import software.amazon.awssdk.services.sqs.model.ListQueuesRequest;\r\n    import software.amazon.awssdk.services.sqs.model.ListQueuesResponse;\r\n    import software.amazon.awssdk.services.sqs.model.Message;\r\n    import software.amazon.awssdk.services.sqs.model.ReceiveMessageRequest;\r\n    import software.amazon.awssdk.services.sqs.model.SendMessageBatchRequest;\r\n    import software.amazon.awssdk.services.sqs.model.SendMessageBatchRequestEntry;\r\n    import software.amazon.awssdk.services.sqs.model.SendMessageRequest;\r\n    import software.amazon.awssdk.services.sqs.model.SqsException;\r\n    \r\n    import java.util.List;\r\n    // snippet-end:[sqs.java2.sqs_example.import]\r\n    \r\n    \r\n    /**\r\n     * Before running this Java V2 code example, set up your development environment, including your credentials.\r\n     *\r\n     * For more information, see the following documentation topic:\r\n     *\r\n     * https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/get-started.html\r\n     */\r\n    public class SQSExample {\r\n    \r\n        public static void main(String[] args) {\r\n            String queueName = &quot;queue&quot; + System.currentTimeMillis();\r\n            SqsClient sqsClient = SqsClient.builder()\r\n                .region(Region.US_WEST_2)\r\n                .credentialsProvider(ProfileCredentialsProvider.create())\r\n                .build();\r\n    \r\n            // Perform various tasks on the Amazon SQS queue\r\n            String queueUrl= createQueue(sqsClient, queueName );\r\n            listQueues(sqsClient);\r\n            listQueuesFilter(sqsClient, queueUrl);\r\n            List&lt;Message&gt; messages = receiveMessages(sqsClient, queueUrl);\r\n            sendBatchMessages(sqsClient, queueUrl);\r\n            changeMessages(sqsClient, queueUrl, messages);\r\n            deleteMessages(sqsClient, queueUrl, messages) ;\r\n            sqsClient.close();\r\n        }\r\n    \r\n        // snippet-start:[sqs.java2.sqs_example.main]\r\n        public static String createQueue(SqsClient sqsClient,String queueName ) {\r\n    \r\n            try {\r\n                System.out.println(&quot;\\nCreate Queue&quot;);\r\n                // snippet-start:[sqs.java2.sqs_example.create_queue]\r\n    \r\n                CreateQueueRequest createQueueRequest = CreateQueueRequest.builder()\r\n                    .queueName(queueName)\r\n                    .build();\r\n    \r\n                sqsClient.createQueue(createQueueRequest);\r\n                // snippet-end:[sqs.java2.sqs_example.create_queue]\r\n    \r\n                System.out.println(&quot;\\nGet queue url&quot;);\r\n    \r\n                // snippet-start:[sqs.java2.sqs_example.get_queue]\r\n                GetQueueUrlResponse getQueueUrlResponse = sqsClient.getQueueUrl(GetQueueUrlRequest.builder().queueName(queueName).build());\r\n                return getQueueUrlResponse.queueUrl();\r\n    \r\n            } catch (SqsException e) {\r\n                System.err.println(e.awsErrorDetails().errorMessage());\r\n                System.exit(1);\r\n            }\r\n            return &quot;&quot;;\r\n            // snippet-end:[sqs.java2.sqs_example.get_queue]\r\n        }\r\n    \r\n        public static void listQueues(SqsClient sqsClient) {\r\n    \r\n            System.out.println(&quot;\\nList Queues&quot;);\r\n            // snippet-start:[sqs.java2.sqs_example.list_queues]\r\n            String prefix = &quot;que&quot;;\r\n    \r\n            try {\r\n                ListQueuesRequest listQueuesRequest = ListQueuesRequest.builder().queueNamePrefix(prefix).build();\r\n                ListQueuesResponse listQueuesResponse = sqsClient.listQueues(listQueuesRequest);\r\n                for (String url : listQueuesResponse.queueUrls()) {\r\n                    System.out.println(url);\r\n                }\r\n    \r\n            } catch (SqsException e) {\r\n                System.err.println(e.awsErrorDetails().errorMessage());\r\n                System.exit(1);\r\n            }\r\n            // snippet-end:[sqs.java2.sqs_example.list_queues]\r\n        }\r\n    \r\n        public static void listQueuesFilter(SqsClient sqsClient, String queueUrl ) {\r\n            // List queues with filters\r\n            String namePrefix = &quot;queue&quot;;\r\n            ListQueuesRequest filterListRequest = ListQueuesRequest.builder()\r\n                .queueNamePrefix(namePrefix)\r\n                .build();\r\n    \r\n            ListQueuesResponse listQueuesFilteredResponse = sqsClient.listQueues(filterListRequest);\r\n            System.out.println(&quot;Queue URLs with prefix: &quot; + namePrefix);\r\n            for (String url : listQueuesFilteredResponse.queueUrls()) {\r\n                System.out.println(url);\r\n            }\r\n    \r\n            System.out.println(&quot;\\nSend message&quot;);\r\n            try {\r\n                // snippet-start:[sqs.java2.sqs_example.send_message]\r\n                sqsClient.sendMessage(SendMessageRequest.builder()\r\n                    .queueUrl(queueUrl)\r\n                    .messageBody(&quot;Hello world!&quot;)\r\n                    .delaySeconds(10)\r\n                    .build());\r\n                // snippet-end:[sqs.java2.sqs_example.send_message]\r\n    \r\n            } catch (SqsException e) {\r\n                System.err.println(e.awsErrorDetails().errorMessage());\r\n                System.exit(1);\r\n            }\r\n        }\r\n    \r\n        public static void sendBatchMessages(SqsClient sqsClient, String queueUrl) {\r\n    \r\n            System.out.println(&quot;\\nSend multiple messages&quot;);\r\n            try {\r\n                // snippet-start:[sqs.java2.sqs_example.send__multiple_messages]\r\n                SendMessageBatchRequest sendMessageBatchRequest = SendMessageBatchRequest.builder()\r\n                    .queueUrl(queueUrl)\r\n                    .entries(SendMessageBatchRequestEntry.builder().id(&quot;id1&quot;).messageBody(&quot;Hello from msg 1&quot;).build(),\r\n                            SendMessageBatchRequestEntry.builder().id(&quot;id2&quot;).messageBody(&quot;msg 2&quot;).delaySeconds(10).build())\r\n                    .build();\r\n                sqsClient.sendMessageBatch(sendMessageBatchRequest);\r\n                // snippet-end:[sqs.java2.sqs_example.send__multiple_messages]\r\n    \r\n            } catch (SqsException e) {\r\n                System.err.println(e.awsErrorDetails().errorMessage());\r\n                System.exit(1);\r\n            }\r\n        }\r\n    \r\n        public static List&lt;Message&gt; receiveMessages(SqsClient sqsClient, String queueUrl) {\r\n    \r\n            System.out.println(&quot;\\nReceive messages&quot;);\r\n            try {\r\n                // snippet-start:[sqs.java2.sqs_example.retrieve_messages]\r\n                ReceiveMessageRequest receiveMessageRequest = ReceiveMessageRequest.builder()\r\n                    .queueUrl(queueUrl)\r\n                    .maxNumberOfMessages(5)\r\n                    .build();\r\n                return sqsClient.receiveMessage(receiveMessageRequest).messages();\r\n    \r\n            } catch (SqsException e) {\r\n                System.err.println(e.awsErrorDetails().errorMessage());\r\n                System.exit(1);\r\n            }\r\n            return null;\r\n            // snippet-end:[sqs.java2.sqs_example.retrieve_messages]\r\n        }\r\n    \r\n        public static void changeMessages(SqsClient sqsClient, String queueUrl, List&lt;Message&gt; messages) {\r\n    \r\n            System.out.println(&quot;\\nChange Message Visibility&quot;);\r\n            try {\r\n    \r\n                for (Message message : messages) {\r\n                    ChangeMessageVisibilityRequest req = ChangeMessageVisibilityRequest.builder()\r\n                        .queueUrl(queueUrl)\r\n                        .receiptHandle(message.receiptHandle())\r\n                        .visibilityTimeout(100)\r\n                        .build();\r\n                    sqsClient.changeMessageVisibility(req);\r\n                }\r\n    \r\n            } catch (SqsException e) {\r\n                System.err.println(e.awsErrorDetails().errorMessage());\r\n                System.exit(1);\r\n            }\r\n        }\r\n    \r\n        public static void deleteMessages(SqsClient sqsClient, String queueUrl, List&lt;Message&gt; messages) {\r\n            System.out.println(&quot;\\nDelete Messages&quot;);\r\n            // snippet-start:[sqs.java2.sqs_example.delete_message]\r\n    \r\n            try {\r\n                for (Message message : messages) {\r\n                    DeleteMessageRequest deleteMessageRequest = DeleteMessageRequest.builder()\r\n                        .queueUrl(queueUrl)\r\n                        .receiptHandle(message.receiptHandle())\r\n                        .build();\r\n                    sqsClient.deleteMessage(deleteMessageRequest);\r\n                }\r\n                // snippet-end:[sqs.java2.sqs_example.delete_message]\r\n    \r\n            } catch (SqsException e) {\r\n                System.err.println(e.awsErrorDetails().errorMessage());\r\n                System.exit(1);\r\n            }\r\n       }\r\n       // snippet-end:[sqs.java2.sqs_example.main]\r\n    }\r\n     \r\nI just ran this example and it worked perfectly.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html\r\n  [2]: https://i.stack.imgur.com/lf31D.png","title":"How do I use localstack with the aws java sdk?","body":"<p>I recommended that you get it running in a Java Console app before trying to get it to work with localstack. Make sure your <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html\" rel=\"nofollow noreferrer\">AWS SDK for Java V2</a> logic works.</p>\n<p>To create a SQS Client object, use:</p>\n<pre><code> SqsClient sqsClient = SqsClient.builder()\n            .region(Region.US_WEST_2)\n            .credentialsProvider(ProfileCredentialsProvider.create())\n            .build();\n</code></pre>\n<p>Try getting this SQS example working in a Java JDE like IntelliJ and make sure you can run it.</p>\n<p>The Github location where you will find the POM is here.</p>\n<p><a href=\"https://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2/example_code/sqs\" rel=\"nofollow noreferrer\">https://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2/example_code/sqs</a></p>\n<p>Full example to try:</p>\n<pre><code>package com.example.sqs;\n\n// snippet-start:[sqs.java2.sqs_example.import]\nimport software.amazon.awssdk.auth.credentials.ProfileCredentialsProvider;\nimport software.amazon.awssdk.regions.Region;\nimport software.amazon.awssdk.services.sqs.SqsClient;\nimport software.amazon.awssdk.services.sqs.model.ChangeMessageVisibilityRequest;\nimport software.amazon.awssdk.services.sqs.model.CreateQueueRequest;\nimport software.amazon.awssdk.services.sqs.model.DeleteMessageRequest;\nimport software.amazon.awssdk.services.sqs.model.GetQueueUrlRequest;\nimport software.amazon.awssdk.services.sqs.model.GetQueueUrlResponse;\nimport software.amazon.awssdk.services.sqs.model.ListQueuesRequest;\nimport software.amazon.awssdk.services.sqs.model.ListQueuesResponse;\nimport software.amazon.awssdk.services.sqs.model.Message;\nimport software.amazon.awssdk.services.sqs.model.ReceiveMessageRequest;\nimport software.amazon.awssdk.services.sqs.model.SendMessageBatchRequest;\nimport software.amazon.awssdk.services.sqs.model.SendMessageBatchRequestEntry;\nimport software.amazon.awssdk.services.sqs.model.SendMessageRequest;\nimport software.amazon.awssdk.services.sqs.model.SqsException;\n\nimport java.util.List;\n// snippet-end:[sqs.java2.sqs_example.import]\n\n\n/**\n * Before running this Java V2 code example, set up your development environment, including your credentials.\n *\n * For more information, see the following documentation topic:\n *\n * https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/get-started.html\n */\npublic class SQSExample {\n\n    public static void main(String[] args) {\n        String queueName = &quot;queue&quot; + System.currentTimeMillis();\n        SqsClient sqsClient = SqsClient.builder()\n            .region(Region.US_WEST_2)\n            .credentialsProvider(ProfileCredentialsProvider.create())\n            .build();\n\n        // Perform various tasks on the Amazon SQS queue\n        String queueUrl= createQueue(sqsClient, queueName );\n        listQueues(sqsClient);\n        listQueuesFilter(sqsClient, queueUrl);\n        List&lt;Message&gt; messages = receiveMessages(sqsClient, queueUrl);\n        sendBatchMessages(sqsClient, queueUrl);\n        changeMessages(sqsClient, queueUrl, messages);\n        deleteMessages(sqsClient, queueUrl, messages) ;\n        sqsClient.close();\n    }\n\n    // snippet-start:[sqs.java2.sqs_example.main]\n    public static String createQueue(SqsClient sqsClient,String queueName ) {\n\n        try {\n            System.out.println(&quot;\\nCreate Queue&quot;);\n            // snippet-start:[sqs.java2.sqs_example.create_queue]\n\n            CreateQueueRequest createQueueRequest = CreateQueueRequest.builder()\n                .queueName(queueName)\n                .build();\n\n            sqsClient.createQueue(createQueueRequest);\n            // snippet-end:[sqs.java2.sqs_example.create_queue]\n\n            System.out.println(&quot;\\nGet queue url&quot;);\n\n            // snippet-start:[sqs.java2.sqs_example.get_queue]\n            GetQueueUrlResponse getQueueUrlResponse = sqsClient.getQueueUrl(GetQueueUrlRequest.builder().queueName(queueName).build());\n            return getQueueUrlResponse.queueUrl();\n\n        } catch (SqsException e) {\n            System.err.println(e.awsErrorDetails().errorMessage());\n            System.exit(1);\n        }\n        return &quot;&quot;;\n        // snippet-end:[sqs.java2.sqs_example.get_queue]\n    }\n\n    public static void listQueues(SqsClient sqsClient) {\n\n        System.out.println(&quot;\\nList Queues&quot;);\n        // snippet-start:[sqs.java2.sqs_example.list_queues]\n        String prefix = &quot;que&quot;;\n\n        try {\n            ListQueuesRequest listQueuesRequest = ListQueuesRequest.builder().queueNamePrefix(prefix).build();\n            ListQueuesResponse listQueuesResponse = sqsClient.listQueues(listQueuesRequest);\n            for (String url : listQueuesResponse.queueUrls()) {\n                System.out.println(url);\n            }\n\n        } catch (SqsException e) {\n            System.err.println(e.awsErrorDetails().errorMessage());\n            System.exit(1);\n        }\n        // snippet-end:[sqs.java2.sqs_example.list_queues]\n    }\n\n    public static void listQueuesFilter(SqsClient sqsClient, String queueUrl ) {\n        // List queues with filters\n        String namePrefix = &quot;queue&quot;;\n        ListQueuesRequest filterListRequest = ListQueuesRequest.builder()\n            .queueNamePrefix(namePrefix)\n            .build();\n\n        ListQueuesResponse listQueuesFilteredResponse = sqsClient.listQueues(filterListRequest);\n        System.out.println(&quot;Queue URLs with prefix: &quot; + namePrefix);\n        for (String url : listQueuesFilteredResponse.queueUrls()) {\n            System.out.println(url);\n        }\n\n        System.out.println(&quot;\\nSend message&quot;);\n        try {\n            // snippet-start:[sqs.java2.sqs_example.send_message]\n            sqsClient.sendMessage(SendMessageRequest.builder()\n                .queueUrl(queueUrl)\n                .messageBody(&quot;Hello world!&quot;)\n                .delaySeconds(10)\n                .build());\n            // snippet-end:[sqs.java2.sqs_example.send_message]\n\n        } catch (SqsException e) {\n            System.err.println(e.awsErrorDetails().errorMessage());\n            System.exit(1);\n        }\n    }\n\n    public static void sendBatchMessages(SqsClient sqsClient, String queueUrl) {\n\n        System.out.println(&quot;\\nSend multiple messages&quot;);\n        try {\n            // snippet-start:[sqs.java2.sqs_example.send__multiple_messages]\n            SendMessageBatchRequest sendMessageBatchRequest = SendMessageBatchRequest.builder()\n                .queueUrl(queueUrl)\n                .entries(SendMessageBatchRequestEntry.builder().id(&quot;id1&quot;).messageBody(&quot;Hello from msg 1&quot;).build(),\n                        SendMessageBatchRequestEntry.builder().id(&quot;id2&quot;).messageBody(&quot;msg 2&quot;).delaySeconds(10).build())\n                .build();\n            sqsClient.sendMessageBatch(sendMessageBatchRequest);\n            // snippet-end:[sqs.java2.sqs_example.send__multiple_messages]\n\n        } catch (SqsException e) {\n            System.err.println(e.awsErrorDetails().errorMessage());\n            System.exit(1);\n        }\n    }\n\n    public static List&lt;Message&gt; receiveMessages(SqsClient sqsClient, String queueUrl) {\n\n        System.out.println(&quot;\\nReceive messages&quot;);\n        try {\n            // snippet-start:[sqs.java2.sqs_example.retrieve_messages]\n            ReceiveMessageRequest receiveMessageRequest = ReceiveMessageRequest.builder()\n                .queueUrl(queueUrl)\n                .maxNumberOfMessages(5)\n                .build();\n            return sqsClient.receiveMessage(receiveMessageRequest).messages();\n\n        } catch (SqsException e) {\n            System.err.println(e.awsErrorDetails().errorMessage());\n            System.exit(1);\n        }\n        return null;\n        // snippet-end:[sqs.java2.sqs_example.retrieve_messages]\n    }\n\n    public static void changeMessages(SqsClient sqsClient, String queueUrl, List&lt;Message&gt; messages) {\n\n        System.out.println(&quot;\\nChange Message Visibility&quot;);\n        try {\n\n            for (Message message : messages) {\n                ChangeMessageVisibilityRequest req = ChangeMessageVisibilityRequest.builder()\n                    .queueUrl(queueUrl)\n                    .receiptHandle(message.receiptHandle())\n                    .visibilityTimeout(100)\n                    .build();\n                sqsClient.changeMessageVisibility(req);\n            }\n\n        } catch (SqsException e) {\n            System.err.println(e.awsErrorDetails().errorMessage());\n            System.exit(1);\n        }\n    }\n\n    public static void deleteMessages(SqsClient sqsClient, String queueUrl, List&lt;Message&gt; messages) {\n        System.out.println(&quot;\\nDelete Messages&quot;);\n        // snippet-start:[sqs.java2.sqs_example.delete_message]\n\n        try {\n            for (Message message : messages) {\n                DeleteMessageRequest deleteMessageRequest = DeleteMessageRequest.builder()\n                    .queueUrl(queueUrl)\n                    .receiptHandle(message.receiptHandle())\n                    .build();\n                sqsClient.deleteMessage(deleteMessageRequest);\n            }\n            // snippet-end:[sqs.java2.sqs_example.delete_message]\n\n        } catch (SqsException e) {\n            System.err.println(e.awsErrorDetails().errorMessage());\n            System.exit(1);\n        }\n   }\n   // snippet-end:[sqs.java2.sqs_example.main]\n}\n \n</code></pre>\n<p>I just ran this example and it worked perfectly.</p>\n<p><a href=\"https://i.stack.imgur.com/lf31D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lf31D.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":25345675,"reputation":33,"user_id":19589355,"display_name":"Glauber Dantas"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1699908726,"creation_date":1699908726,"answer_id":77476794,"question_id":76233213,"body_markdown":"I had the same issue. The problem is that from AWS SDK version 2.20.60 onward they started supporting only the new AWS&#39;s API version (JSON-based), which is not emulated yet by Localstack.\r\n\r\nDowngrade your AWS SDK version to 2.20.59 and it is likely to work.\r\n\r\nPlease take a look: https://github.com/aws/aws-sdk-java-v2/issues/3972\r\n\r\nThey state that 2.20.61 has reverted that behavior and in fact using 2.20.99 worked for me... but beware that 2.21.* has implemented back supporting only the newer API version.","title":"How do I use localstack with the aws java sdk?","body":"<p>I had the same issue. The problem is that from AWS SDK version 2.20.60 onward they started supporting only the new AWS's API version (JSON-based), which is not emulated yet by Localstack.</p>\n<p>Downgrade your AWS SDK version to 2.20.59 and it is likely to work.</p>\n<p>Please take a look: <a href=\"https://github.com/aws/aws-sdk-java-v2/issues/3972\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-sdk-java-v2/issues/3972</a></p>\n<p>They state that 2.20.61 has reverted that behavior and in fact using 2.20.99 worked for me... but beware that 2.21.* has implemented back supporting only the newer API version.</p>\n"}],"owner":{"account_id":24111,"reputation":1133,"user_id":61104,"accept_rate":85,"display_name":"Kevin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1844,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699908726,"creation_date":1683867056,"question_id":76233213,"body_markdown":"I&#39;m attempting to use localstack for development with SQS. \r\n* Aws client v2.20.60\r\n* localstack v2.0.2. \r\n\r\nI&#39;m following this [blog post](https://nickolasfisher.com/blog/How-to-Send-SQS-Messages-to-Localstack-with-the-AWS-Java-SDK-20), but no matter what I try, I always get the error:\r\n\r\n&gt; exception while calling sqs with unknown operation: Operation detection failed. Missing Action in request for query-protocol service ServiceModel(sqs).\r\n\r\nThis is how I created the SqsClient:\r\n```java\r\n    SqsClientBuilder builder = SqsClient.builder();\r\n    builder.credentialsProvider(StaticCredentialsProvider.create(AwsBasicCredentials.create(&quot;test&quot;, &quot;test&quot;)));\r\n    builder.endpointOverride(new URI(&quot;http://localhost:4566&quot;));\r\n    builder.region(Region.of(&quot;us-west-2&quot;));\r\n    return builder.build();\r\n```\r\n\r\nAnd then any of the Sqs operations, for example creating a queue:\r\n```java\r\n    sqsClient.createQueue(CreateQueueRequest.builder()\r\n        .queueName(&quot;test2&quot;)\r\n        .build());\r\n```\r\n\r\nLogs:\r\n```\r\nsoftware.amazon.awssdk.request           : Retrying Request: DefaultSdkHttpFullRequest(httpMethod=POST, protocol=http, host=localhost, port=4566, encodedPath=/, headers=[amz-sdk-invocation-id, Content-Length, Content-Type, User-Agent, X-Amz-Target], queryParameters=[])\r\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;POST / HTTP/1.1[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;Host: localhost:4566[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;amz-sdk-invocation-id: 3f223a7a-773b-d41f-388a-b222efb26e25[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;amz-sdk-request: attempt=4; max=4[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;Authorization: AWS4-HMAC-SHA256 Credential=test/20230512/us-west-2/sqs/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date;x-amz-target, Signature=4cd498092415018e24f7fb37c3b86ad77f10154f3cc5dc2627f3e7bf2aa7b7f8[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;Content-Type: application/x-amz-json-1.0[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;User-Agent: aws-sdk-java/2.20.60 Linux/6.3.1 OpenJDK_64-Bit_Server_VM/17.0.3+7-nixos Java/17.0.3 vendor/N_A io/sync http/Apache cfg/retry-mode/legacy[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;X-Amz-Date: 20230512T043918Z[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;X-Amz-Target: AmazonSQS.CreateQueue[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;Content-Length: 21[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;Connection: Keep-Alive[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;{&quot;QueueName&quot;:&quot;test2&quot;}&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;HTTP/1.1 500 [\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;Content-Type: text/xml[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;Content-Length: 407[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;Access-Control-Allow-Origin: *[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;Access-Control-Allow-Methods: HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;Access-Control-Allow-Headers: authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;Access-Control-Expose-Headers: etag,x-amz-version-id[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;date: Fri, 12 May 2023 04:39:18 GMT[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;server: hypercorn-h11[\\r][\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;[\\r][\\n]&quot;\r\nsoftware.amazon.awssdk.request           : Received failed response: 500, Request ID: not available, Extended Request ID: not available\r\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;[\\n]&quot;\r\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;&lt;ErrorResponse xmlns=&quot;http://queue.amazonaws.com/doc/2012-11-05/&quot;&gt;&lt;Error&gt;&lt;Code&gt;InternalError&lt;/Code&gt;&lt;Message&gt;exception while calling sqs with unknown operation: Operation detection failed. Missing Action in request for query-protocol service ServiceModel(sqs).&lt;/Message&gt;&lt;/Error&gt;&lt;RequestId&gt;5J3R58QQJ04NODX9NQYFLEZM110VTGAFIQ0W894F7HXWVNAZCK3U&lt;/RequestId&gt;&lt;/ErrorResponse&gt;&quot;\r\no.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: software.amazon.awssdk.services.sqs.model.SqsException: Service returned HTTP status code 500 (Service: Sqs, Status Code: 500, Request ID: null)] with root cause\r\n\r\nsoftware.amazon.awssdk.services.sqs.model.SqsException: Service returned HTTP status code 500 (Service: Sqs, Status Code: 500, Request ID: null)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleErrorResponse(CombinedResponseHandler.java:125)\r\n\tat ...\r\norg.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n```","title":"How do I use localstack with the aws java sdk?","body":"<p>I'm attempting to use localstack for development with SQS.</p>\n<ul>\n<li>Aws client v2.20.60</li>\n<li>localstack v2.0.2.</li>\n</ul>\n<p>I'm following this <a href=\"https://nickolasfisher.com/blog/How-to-Send-SQS-Messages-to-Localstack-with-the-AWS-Java-SDK-20\" rel=\"nofollow noreferrer\">blog post</a>, but no matter what I try, I always get the error:</p>\n<blockquote>\n<p>exception while calling sqs with unknown operation: Operation detection failed. Missing Action in request for query-protocol service ServiceModel(sqs).</p>\n</blockquote>\n<p>This is how I created the SqsClient:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    SqsClientBuilder builder = SqsClient.builder();\n    builder.credentialsProvider(StaticCredentialsProvider.create(AwsBasicCredentials.create(&quot;test&quot;, &quot;test&quot;)));\n    builder.endpointOverride(new URI(&quot;http://localhost:4566&quot;));\n    builder.region(Region.of(&quot;us-west-2&quot;));\n    return builder.build();\n</code></pre>\n<p>And then any of the Sqs operations, for example creating a queue:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    sqsClient.createQueue(CreateQueueRequest.builder()\n        .queueName(&quot;test2&quot;)\n        .build());\n</code></pre>\n<p>Logs:</p>\n<pre><code>software.amazon.awssdk.request           : Retrying Request: DefaultSdkHttpFullRequest(httpMethod=POST, protocol=http, host=localhost, port=4566, encodedPath=/, headers=[amz-sdk-invocation-id, Content-Length, Content-Type, User-Agent, X-Amz-Target], queryParameters=[])\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;POST / HTTP/1.1[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;Host: localhost:4566[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;amz-sdk-invocation-id: 3f223a7a-773b-d41f-388a-b222efb26e25[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;amz-sdk-request: attempt=4; max=4[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;Authorization: AWS4-HMAC-SHA256 Credential=test/20230512/us-west-2/sqs/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date;x-amz-target, Signature=4cd498092415018e24f7fb37c3b86ad77f10154f3cc5dc2627f3e7bf2aa7b7f8[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;Content-Type: application/x-amz-json-1.0[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;User-Agent: aws-sdk-java/2.20.60 Linux/6.3.1 OpenJDK_64-Bit_Server_VM/17.0.3+7-nixos Java/17.0.3 vendor/N_A io/sync http/Apache cfg/retry-mode/legacy[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;X-Amz-Date: 20230512T043918Z[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;X-Amz-Target: AmazonSQS.CreateQueue[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;Content-Length: 21[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;Connection: Keep-Alive[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &gt;&gt; &quot;{&quot;QueueName&quot;:&quot;test2&quot;}&quot;\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;HTTP/1.1 500 [\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;Content-Type: text/xml[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;Content-Length: 407[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;Access-Control-Allow-Origin: *[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;Access-Control-Allow-Methods: HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;Access-Control-Allow-Headers: authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;Access-Control-Expose-Headers: etag,x-amz-version-id[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;date: Fri, 12 May 2023 04:39:18 GMT[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;server: hypercorn-h11[\\r][\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;[\\r][\\n]&quot;\nsoftware.amazon.awssdk.request           : Received failed response: 500, Request ID: not available, Extended Request ID: not available\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;&lt;?xml version='1.0' encoding='utf-8'?&gt;[\\n]&quot;\norg.apache.http.wire                     : http-outgoing-3 &lt;&lt; &quot;&lt;ErrorResponse xmlns=&quot;http://queue.amazonaws.com/doc/2012-11-05/&quot;&gt;&lt;Error&gt;&lt;Code&gt;InternalError&lt;/Code&gt;&lt;Message&gt;exception while calling sqs with unknown operation: Operation detection failed. Missing Action in request for query-protocol service ServiceModel(sqs).&lt;/Message&gt;&lt;/Error&gt;&lt;RequestId&gt;5J3R58QQJ04NODX9NQYFLEZM110VTGAFIQ0W894F7HXWVNAZCK3U&lt;/RequestId&gt;&lt;/ErrorResponse&gt;&quot;\no.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: software.amazon.awssdk.services.sqs.model.SqsException: Service returned HTTP status code 500 (Service: Sqs, Status Code: 500, Request ID: null)] with root cause\n\nsoftware.amazon.awssdk.services.sqs.model.SqsException: Service returned HTTP status code 500 (Service: Sqs, Status Code: 500, Request ID: null)\n    at software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleErrorResponse(CombinedResponseHandler.java:125)\n    at ...\norg.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n</code></pre>\n"},{"tags":["java","spring","spring-kafka","kafka-consumer-api"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699908317,"creation_date":1699908317,"answer_id":77476760,"question_id":77458215,"body_markdown":"You need to ensure that the exponential back off never exceeds the `max.poll.interval.ms`; otherwise a rebalance will be forced.\r\n\r\nThis was true, even with the old stateful retry mechanism; before that was added, the aggregate of the delays could not exceed the interval.\r\n\r\nNow (with either mechanism), only the max delay must be less than the interval.","title":"Spring kafka infinite retries without retryabletopic annotation","body":"<p>You need to ensure that the exponential back off never exceeds the <code>max.poll.interval.ms</code>; otherwise a rebalance will be forced.</p>\n<p>This was true, even with the old stateful retry mechanism; before that was added, the aggregate of the delays could not exceed the interval.</p>\n<p>Now (with either mechanism), only the max delay must be less than the interval.</p>\n"}],"owner":{"account_id":2615962,"reputation":872,"user_id":2265001,"accept_rate":47,"display_name":"Charu Jain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699908317,"creation_date":1699599967,"question_id":77458215,"body_markdown":"We are using spring Kafka 3.x and using DefaultErrorHandler. \r\nIn this handler, we check if the exception is retriable then do retries till Integer.maxValue else put a message in DLT. \r\nWhole idea is to do infinite retries for certain exceptions and DLT for few. \r\nFor infinite retries, we have used exponential back off. \r\nAt some point, exponential back off will exceed the max poll timeout. \r\nI want to understand how it is going to behave when it exceeds the max poll interval.\r\n\r\nAs per my understanding, this is a stateful retry as STCEH is deprecated in spring Kafka 3.x&quot;\r\n\r\nCan someone please guide me.","title":"Spring kafka infinite retries without retryabletopic annotation","body":"<p>We are using spring Kafka 3.x and using DefaultErrorHandler.\nIn this handler, we check if the exception is retriable then do retries till Integer.maxValue else put a message in DLT.\nWhole idea is to do infinite retries for certain exceptions and DLT for few.\nFor infinite retries, we have used exponential back off.\nAt some point, exponential back off will exceed the max poll timeout.\nI want to understand how it is going to behave when it exceeds the max poll interval.</p>\n<p>As per my understanding, this is a stateful retry as STCEH is deprecated in spring Kafka 3.x&quot;</p>\n<p>Can someone please guide me.</p>\n"},{"tags":["java","android-studio","gradle"],"comments":[{"owner":{"account_id":25996340,"reputation":41,"user_id":19707654,"display_name":"Pp1"},"score":0,"creation_date":1699908213,"post_id":77476743,"comment_id":136587517,"body_markdown":"Gradle 7.5.1 and Android studio giraffe","body":"Gradle 7.5.1 and Android studio giraffe"},{"owner":{"account_id":10265133,"reputation":81,"user_id":7575336,"display_name":"Francisco"},"score":0,"creation_date":1699912072,"post_id":77476743,"comment_id":136588107,"body_markdown":"Are you calling System.loadLibrary() in your Java/Kotlin code? What error does it give you?","body":"Are you calling System.loadLibrary() in your Java/Kotlin code? What error does it give you?"},{"owner":{"account_id":25996340,"reputation":41,"user_id":19707654,"display_name":"Pp1"},"score":0,"creation_date":1699946016,"post_id":77476743,"comment_id":136591162,"body_markdown":"Yes i am, it gives me","body":"Yes i am, it gives me"},{"owner":{"account_id":25996340,"reputation":41,"user_id":19707654,"display_name":"Pp1"},"score":0,"creation_date":1699946135,"post_id":77476743,"comment_id":136591178,"body_markdown":"path to my libs and this error: libMyLibs.so: libm.so: ELF load command address/offset not page-aligned, and then at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n\tat java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\n\tat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:232)\n\tat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:174)\n\tat java.base/jdk.internal.loader.NativeLibraries.findFromPaths(NativeLibraries.java:315)","body":"path to my libs and this error: libMyLibs.so: libm.so: ELF load command address/offset not page-aligned, and then at java.base/jdk.internal.loader.NativeLibraries.load(Native Method) \tat java.base/jdk.internal.loader.NativeLibraries$NativeLibraryI&zwnj;&#8203;mpl.open(NativeLibra&zwnj;&#8203;ries.java:388) \tat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(Na&zwnj;&#8203;tiveLibraries.java:2&zwnj;&#8203;32) \tat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(Na&zwnj;&#8203;tiveLibraries.java:1&zwnj;&#8203;74) \tat java.base/jdk.internal.loader.NativeLibraries.findFromPaths(&zwnj;&#8203;NativeLibraries.java&zwnj;&#8203;:315)"},{"owner":{"account_id":25996340,"reputation":41,"user_id":19707654,"display_name":"Pp1"},"score":0,"creation_date":1699946939,"post_id":77476743,"comment_id":136591276,"body_markdown":"when i do file on libm.so it gives me: libm.so: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), static-pie linked, BuildID[md5/uuid]=b1c409b8a8fe08c2c2e7b290733c0f1b, with debug_info, not stripped","body":"when i do file on libm.so it gives me: libm.so: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), static-pie linked, BuildID[md5/uuid]=b1c409b8a8fe08c2c2e7b290733c0f1b, with debug_info, not stripped"}],"owner":{"account_id":25996340,"reputation":41,"user_id":19707654,"display_name":"Pp1"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699908152,"creation_date":1699908152,"question_id":77476743,"body_markdown":"```\r\nplugins {\r\n    id(&quot;com.android.library&quot;) version &quot;7.2.2&quot;\r\n    kotlin(&quot;android&quot;) version &quot;1.5.21&quot;\r\n\r\n}\r\n\r\ndependencies {\r\n    testImplementation(&quot;junit:junit:4.13.2&quot;)\r\n    testImplementation(&quot;org.junit.vintage:junit-vintage-engine:5.10.0&quot;)\r\n    implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib:1.6.21&quot;)\r\n    implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.6.21&quot;)\r\n}\r\n\r\n@Suppress(&quot;UnstableApiUsage&quot;)\r\nandroid {\r\n    namespace = &quot;com.aptiv.acf.testinterfaces&quot;\r\n    compileSdk = 31\r\n    ndkVersion = &quot;21.4.7075529&quot;\r\n\r\n\r\n    defaultConfig {\r\n        minSdk = 28\r\n        targetSdk = 31\r\n\r\n        externalNativeBuild {\r\n            cmake {\r\n                targets += &quot;MyLibs1_jni&quot;\r\n                targets += &quot;MyLibs2_jni&quot;\r\n                targets += &quot;MyLibs3_jni&quot;\r\n            }\r\n        }\r\n    }\r\n\r\n    externalNativeBuild {\r\n        cmake {\r\n            path = project.file(&quot;cmakelists/gradle/CMakeLists.txt&quot;)\r\n            version = &quot;3.19.0+&quot;\r\n        }\r\n    }\r\n    packagingOptions {\r\n        resources.excludes.add(&quot;META-INF/*&quot;)\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nWhen i serached in stackOverFlow people was saying about this code, but i cant even use it:\r\n\r\n```\r\nsourceSets.main\r\n{\r\n   jni.srcDirs = [] // ndk-build.cmd needs to be invoked from command line\r\n   jniLibs.srcDirs &#39;/src/main/libs&#39;\r\n}\r\n```\r\nMy libs are in the same package like this **build.gradle** in folder libs(*so files) i need help with that, if anyone have any idea i will appreciate that, thanks","title":"Anyone know why i can&#39;t load my native libraries?","body":"<pre><code>plugins {\n    id(&quot;com.android.library&quot;) version &quot;7.2.2&quot;\n    kotlin(&quot;android&quot;) version &quot;1.5.21&quot;\n\n}\n\ndependencies {\n    testImplementation(&quot;junit:junit:4.13.2&quot;)\n    testImplementation(&quot;org.junit.vintage:junit-vintage-engine:5.10.0&quot;)\n    implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib:1.6.21&quot;)\n    implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.6.21&quot;)\n}\n\n@Suppress(&quot;UnstableApiUsage&quot;)\nandroid {\n    namespace = &quot;com.aptiv.acf.testinterfaces&quot;\n    compileSdk = 31\n    ndkVersion = &quot;21.4.7075529&quot;\n\n\n    defaultConfig {\n        minSdk = 28\n        targetSdk = 31\n\n        externalNativeBuild {\n            cmake {\n                targets += &quot;MyLibs1_jni&quot;\n                targets += &quot;MyLibs2_jni&quot;\n                targets += &quot;MyLibs3_jni&quot;\n            }\n        }\n    }\n\n    externalNativeBuild {\n        cmake {\n            path = project.file(&quot;cmakelists/gradle/CMakeLists.txt&quot;)\n            version = &quot;3.19.0+&quot;\n        }\n    }\n    packagingOptions {\n        resources.excludes.add(&quot;META-INF/*&quot;)\n    }\n}\n\n\n</code></pre>\n<p>When i serached in stackOverFlow people was saying about this code, but i cant even use it:</p>\n<pre><code>sourceSets.main\n{\n   jni.srcDirs = [] // ndk-build.cmd needs to be invoked from command line\n   jniLibs.srcDirs '/src/main/libs'\n}\n</code></pre>\n<p>My libs are in the same package like this <strong>build.gradle</strong> in folder libs(*so files) i need help with that, if anyone have any idea i will appreciate that, thanks</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","aws-lambda","aws-cdk"],"comments":[{"owner":{"account_id":3509196,"reputation":16473,"user_id":2933977,"display_name":"stdunbar"},"score":0,"creation_date":1582577722,"post_id":60282173,"comment_id":106818530,"body_markdown":"Do you have to use the CDK?","body":"Do you have to use the CDK?"},{"owner":{"account_id":9734936,"reputation":296,"user_id":7218496,"accept_rate":40,"display_name":"Bibek Khadka"},"score":0,"creation_date":1582612355,"post_id":60282173,"comment_id":106827250,"body_markdown":"You could get the bucket from the Stack.","body":"You could get the bucket from the Stack."},{"owner":{"account_id":2429098,"reputation":3301,"user_id":2120421,"accept_rate":100,"display_name":"thoroc"},"score":0,"creation_date":1582881988,"post_id":60282173,"comment_id":106937192,"body_markdown":"Not the solution you are looking for, but as a work around you could have the s3Bucket+Trigger created as an infrastructure project. Make sure that you have your lambda created beforehand, though.","body":"Not the solution you are looking for, but as a work around you could have the s3Bucket+Trigger created as an infrastructure project. Make sure that you have your lambda created beforehand, though."}],"answers":[{"tags":[],"owner":{"account_id":1434396,"reputation":28043,"user_id":1356107,"accept_rate":79,"display_name":"Tschallacka"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1582536943,"creation_date":1582536943,"answer_id":60372990,"question_id":60282173,"body_markdown":"From the git issue tracker https://github.com/aws/aws-cdk/issues/2004#issuecomment-479923251\n\n&gt; Due to current limitations with CloudFormation and the way we implemented bucket notifications in the CDK, it is impossible to add bucket notifications on an imported bucket. This is why the event source uses s3.Bucket instead of s3.IBucket.\n&gt;\n&gt; You could use onPutObject:\n\n    const bucket = s3.Bucket.import(this, &#39;B&#39;, {\n      bucketName: &#39;my-bucket&#39;\n    });\n    \n    const fn = new lambda.Function(this, &#39;F&#39;, {\n      code: lambda.Code.inline(&#39;boom&#39;),\n      runtime: lambda.Runtime.NodeJS810,\n      handler: &#39;index.handler&#39;\n    });\n    \n    bucket.onPutObject(&#39;put-object&#39;, fn);\n\nBut reading further on, this doesn&#39;t seem to work anymore either. \n\nIt seems the answer currently is: \n\nIt&#39;s impossible to set up.","title":"Lookup S3 Bucket and add a trigger to invoke a lambda","body":"<p>From the git issue tracker <a href=\"https://github.com/aws/aws-cdk/issues/2004#issuecomment-479923251\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-cdk/issues/2004#issuecomment-479923251</a></p>\n<blockquote>\n<p>Due to current limitations with CloudFormation and the way we implemented bucket notifications in the CDK, it is impossible to add bucket notifications on an imported bucket. This is why the event source uses s3.Bucket instead of s3.IBucket.</p>\n<p>You could use onPutObject:</p>\n</blockquote>\n<pre><code>const bucket = s3.Bucket.import(this, 'B', {\n  bucketName: 'my-bucket'\n});\n\nconst fn = new lambda.Function(this, 'F', {\n  code: lambda.Code.inline('boom'),\n  runtime: lambda.Runtime.NodeJS810,\n  handler: 'index.handler'\n});\n\nbucket.onPutObject('put-object', fn);\n</code></pre>\n<p>But reading further on, this doesn't seem to work anymore either.</p>\n<p>It seems the answer currently is:</p>\n<p>It's impossible to set up.</p>\n"},{"tags":[],"owner":{"account_id":1399470,"reputation":6117,"user_id":1328513,"accept_rate":53,"display_name":"Zhenya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699908152,"creation_date":1699908152,"answer_id":77476744,"question_id":60282173,"body_markdown":"It looks like it should be possible to set it up like this now:\r\n\r\n```\r\nconst lambdaDestination = new s3n.LambdaDestination(fn);\r\nbucket.addEventNotification(s3.EventType.OBJECT_CREATED, lambdaDestination);\r\n```\r\n\r\nhttps://github.com/aws/aws-cdk/pull/15158","title":"Lookup S3 Bucket and add a trigger to invoke a lambda","body":"<p>It looks like it should be possible to set it up like this now:</p>\n<pre><code>const lambdaDestination = new s3n.LambdaDestination(fn);\nbucket.addEventNotification(s3.EventType.OBJECT_CREATED, lambdaDestination);\n</code></pre>\n<p><a href=\"https://github.com/aws/aws-cdk/pull/15158\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-cdk/pull/15158</a></p>\n"}],"owner":{"account_id":8703068,"reputation":492,"user_id":6513366,"display_name":"Overflow 404"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4344,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1699908152,"creation_date":1582033053,"question_id":60282173,"body_markdown":"I&#39;m using the new AWS CDK(Cloud Development Toolkit) to build the infrastructure on AWS in Java.\r\n\r\n**What I have to do:** lookup an s3 bucket and add a trigger that invokes a lambda function.\r\n\r\n**What I have done:** \r\n\r\n - Looked up s3 bucket:\r\n\r\n        IBucket bucket = Bucket.fromBucketName(scope, bucketId, bucketName);\r\n\r\n - Add a new event source to the existing lambda:\r\n\r\n        IEventSource eventSource = getObjectCreationEvent();\r\n        lambda.addEventSource(eventSource);\r\n\r\n - Where `getObjectCreationEvent()` is:\r\n\r\n        private S3EventSource getObjectCreationEvent() {\r\n            return new S3EventSource(bucket, new S3EventSourceProps() {\r\n                @Override\r\n                public List&lt;EventType&gt; getEvents() {\r\n                    return Collections.singletonList(EventType.OBJECT_CREATED);\r\n                }\r\n            });\r\n        }\r\n\r\n**What is the problem:** \r\n\r\nThe type of `bucket` parameter in the `S3EventSource` constructor is `Bucket` but every lookup method (e.g. the `Bucket.fromBucketName()`) returns an `IBucket` and not a `Bucket`, so there is a signature mismatch. If I cast `IBucket` to `Bucket` I have a `ClassCastException`.","title":"Lookup S3 Bucket and add a trigger to invoke a lambda","body":"<p>I'm using the new AWS CDK(Cloud Development Toolkit) to build the infrastructure on AWS in Java.</p>\n\n<p><strong>What I have to do:</strong> lookup an s3 bucket and add a trigger that invokes a lambda function.</p>\n\n<p><strong>What I have done:</strong> </p>\n\n<ul>\n<li><p>Looked up s3 bucket:</p>\n\n<pre><code>IBucket bucket = Bucket.fromBucketName(scope, bucketId, bucketName);\n</code></pre></li>\n<li><p>Add a new event source to the existing lambda:</p>\n\n<pre><code>IEventSource eventSource = getObjectCreationEvent();\nlambda.addEventSource(eventSource);\n</code></pre></li>\n<li><p>Where <code>getObjectCreationEvent()</code> is:</p>\n\n<pre><code>private S3EventSource getObjectCreationEvent() {\n    return new S3EventSource(bucket, new S3EventSourceProps() {\n        @Override\n        public List&lt;EventType&gt; getEvents() {\n            return Collections.singletonList(EventType.OBJECT_CREATED);\n        }\n    });\n}\n</code></pre></li>\n</ul>\n\n<p><strong>What is the problem:</strong> </p>\n\n<p>The type of <code>bucket</code> parameter in the <code>S3EventSource</code> constructor is <code>Bucket</code> but every lookup method (e.g. the <code>Bucket.fromBucketName()</code>) returns an <code>IBucket</code> and not a <code>Bucket</code>, so there is a signature mismatch. If I cast <code>IBucket</code> to <code>Bucket</code> I have a <code>ClassCastException</code>.</p>\n"},{"tags":["java","spring","kotlin","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699907634,"creation_date":1699907634,"answer_id":77476695,"question_id":77445201,"body_markdown":"Yes, in fact the `KafkaProducer` javadocs recommend using a single producer.\r\n\r\nHowever, manual flushing will cause all to block; it is best to let the producer internals manage batching to avoid such problems.","title":"Spring controller and kafka tempalte threading model - can kafkatemplate use multiple threads to send messages?","body":"<p>Yes, in fact the <code>KafkaProducer</code> javadocs recommend using a single producer.</p>\n<p>However, manual flushing will cause all to block; it is best to let the producer internals manage batching to avoid such problems.</p>\n"}],"owner":{"account_id":1301815,"reputation":31761,"user_id":1251549,"accept_rate":29,"display_name":"Cherry"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1699907634,"creation_date":1699443372,"question_id":77445201,"body_markdown":"Here is an example of putting a web request to Kafka using spring controller:\r\n\r\n\r\n    @RestController\r\n    class KafkaProducerController(val kafkaTemplate: KafkaTemplate&lt;String, String&gt;) {\r\n        @PutMapping(&quot;/track&quot;)\r\n        fun sendTopicCallback(@RequestBody body: String): CompletableFuture&lt;ResponseEntity&lt;String&gt;&gt; {\r\n            return kafkaTemplate.send(&quot;mytopic&quot;, body.toString())\r\n                .thenApply { ResponseEntity.ok(it.toString()) }\r\n        }\r\n    }\r\n\r\nThe question is - how threads are used in this example?\r\n\r\nAs I understand spring will pin up one Thread per HTTP request. And each of these threads will put HTTP body to the Kafka template. And after some time (or message amount?) &quot;somebody&quot; (e.g. another thread) will flush messages to the Kafka topic as batch. But what is there are too many requests and threads that put messages? Can I setup multiple threads for batch messages sending? ","title":"Spring controller and kafka tempalte threading model - can kafkatemplate use multiple threads to send messages?","body":"<p>Here is an example of putting a web request to Kafka using spring controller:</p>\n<pre><code>@RestController\nclass KafkaProducerController(val kafkaTemplate: KafkaTemplate&lt;String, String&gt;) {\n    @PutMapping(&quot;/track&quot;)\n    fun sendTopicCallback(@RequestBody body: String): CompletableFuture&lt;ResponseEntity&lt;String&gt;&gt; {\n        return kafkaTemplate.send(&quot;mytopic&quot;, body.toString())\n            .thenApply { ResponseEntity.ok(it.toString()) }\n    }\n}\n</code></pre>\n<p>The question is - how threads are used in this example?</p>\n<p>As I understand spring will pin up one Thread per HTTP request. And each of these threads will put HTTP body to the Kafka template. And after some time (or message amount?) &quot;somebody&quot; (e.g. another thread) will flush messages to the Kafka topic as batch. But what is there are too many requests and threads that put messages? Can I setup multiple threads for batch messages sending?</p>\n"},{"tags":["java","oracle","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":3631143,"reputation":55353,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1478512995,"post_id":40462110,"comment_id":68169533,"body_markdown":"Maybe you can use an `associative array`.","body":"Maybe you can use an <code>associative array</code>."}],"answers":[{"tags":[],"owner":{"account_id":69219,"reputation":5330,"user_id":201557,"display_name":"Thierry"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1478512325,"creation_date":1478512325,"answer_id":40462188,"question_id":40462110,"body_markdown":"You can split this operation in 2 steps :\r\n\r\n 1. Insert your list of IDs in a table (a temporary table for example)\r\n 2. Change your in statement with lot of values into a in statement with a subselect on this new (temporary) table.\r\n","title":"spring-data-jpa: ORA-01795: maximum number of expressions in a list is 1000","body":"<p>You can split this operation in 2 steps :</p>\n\n<ol>\n<li>Insert your list of IDs in a table (a temporary table for example)</li>\n<li>Change your in statement with lot of values into a in statement with a subselect on this new (temporary) table.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":255080,"reputation":15519,"user_id":534877,"accept_rate":65,"display_name":"Robert Niestroj"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1699906952,"creation_date":1478513476,"answer_id":40462567,"question_id":40462110,"body_markdown":"You can partition your list of clientIDs into list of 999 elements and make multiple calls to the DB. You can use [Apache Commons ListUtils to do the partitioning][1]: \r\n\r\n\r\n      List&lt;TransactRepViewModel&gt; result = new ArrayList&lt;TransactRepViewModel&gt;();\r\n      final List&lt;List&lt;String&gt;&gt; partitions = ListUtils.partition(clientIdList, 999);\r\n      for (List&lt;String&gt; partition : partitions) {\r\n         result.addAll(yourRepo.findByClientIdList(partition, startDate, endDate);)\r\n      }\r\n\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/ListUtils.html#partition-java.util.List-int-","title":"spring-data-jpa: ORA-01795: maximum number of expressions in a list is 1000","body":"<p>You can partition your list of clientIDs into list of 999 elements and make multiple calls to the DB. You can use <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/ListUtils.html#partition-java.util.List-int-\" rel=\"nofollow noreferrer\">Apache Commons ListUtils to do the partitioning</a>:</p>\n<pre><code>  List&lt;TransactRepViewModel&gt; result = new ArrayList&lt;TransactRepViewModel&gt;();\n  final List&lt;List&lt;String&gt;&gt; partitions = ListUtils.partition(clientIdList, 999);\n  for (List&lt;String&gt; partition : partitions) {\n     result.addAll(yourRepo.findByClientIdList(partition, startDate, endDate);)\n  }\n</code></pre>\n"}],"owner":{"account_id":4547683,"reputation":3756,"user_id":3693726,"accept_rate":92,"display_name":"Deniss M."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10270,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":40462567,"answer_count":2,"score":13,"last_activity_date":1699906952,"creation_date":1478512057,"question_id":40462110,"body_markdown":"I&#39;m using Spring Data JPA. I want to get the transactions of client.id&#39;s from a `List&lt;String&gt; clientIdList`. The problem is that I am passing a very big list and I get back an ORA-01795 error.\r\n\r\n    @Query(value = &quot;SELECT TransactRepViewModel FROM TransactRepViewModel a WHERE a.clientId IN (?1) AND a.clDate BETWEEN ?2 and ?3&quot;, nativeQuery = true)\r\n    \tList&lt;TransactRepViewModel&gt; findByClientIdList(List&lt;String&gt; clientIdList, Date startDate, Date endDate) throws DataAccessException;\r\n\r\nMy client list comes from another table from another database via oracle and I cannot think of a way to solve this problem...\r\n\r\nEdit: the list is dynamic, so it can return different amounts of id&#39;s. I also cannot create any additional tables in those databases. I have no such priviledges. ","title":"spring-data-jpa: ORA-01795: maximum number of expressions in a list is 1000","body":"<p>I'm using Spring Data JPA. I want to get the transactions of client.id's from a <code>List&lt;String&gt; clientIdList</code>. The problem is that I am passing a very big list and I get back an ORA-01795 error.</p>\n\n<pre><code>@Query(value = \"SELECT TransactRepViewModel FROM TransactRepViewModel a WHERE a.clientId IN (?1) AND a.clDate BETWEEN ?2 and ?3\", nativeQuery = true)\n    List&lt;TransactRepViewModel&gt; findByClientIdList(List&lt;String&gt; clientIdList, Date startDate, Date endDate) throws DataAccessException;\n</code></pre>\n\n<p>My client list comes from another table from another database via oracle and I cannot think of a way to solve this problem...</p>\n\n<p>Edit: the list is dynamic, so it can return different amounts of id's. I also cannot create any additional tables in those databases. I have no such priviledges. </p>\n"},{"tags":["java","augmented-reality","arcore"],"comments":[{"owner":{"account_id":2874005,"reputation":1406,"user_id":2466646,"accept_rate":88,"display_name":"Dima Maligin"},"score":2,"creation_date":1699906183,"post_id":77476246,"comment_id":136587205,"body_markdown":"It is unclear what exactly is it you are trying to achieve. What would be the reason for running 2 different versions at the same time? In general if you have them importd in the same scope they will conflict. Please describe the issue a bit better with some examples so we can better understand it and try to help you.","body":"It is unclear what exactly is it you are trying to achieve. What would be the reason for running 2 different versions at the same time? In general if you have them importd in the same scope they will conflict. Please describe the issue a bit better with some examples so we can better understand it and try to help you."}],"owner":{"account_id":27982836,"reputation":1,"user_id":21370280,"display_name":"Nuno Gomes"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1699906708,"creation_date":1699902160,"question_id":77476246,"body_markdown":"I am doing an AR project on android studio and am using an github fork as a library. The problem is &quot;jetified-filament-android-1.17.1-runtime&quot; from (com.google.ar.sceneform:filament-android:1.17.1) and &quot;jetified-filament-android-1.4.5-runtime&quot; from (com.google.android.filament:filament-android:1.4.5) are different dependencies but have some classes equal between them. For example both possess the class Camera but only one of them possesses some X class that the github fork above needs. An example of the error is as follows: \r\n\r\n`Duplicate class com.google.android.filament.AndroidPlatform found in modules jetified-filament-android-1.17.1-runtime (com.google.ar.sceneform:filament-android:1.17.1) and jetified-filament-android-1.4.5-runtime (com.google.android.filament:filament-android:1.4.5)`\r\n\r\n`Duplicate class com.google.android.filament.Asserts found in modules jetified-filament-android-1.17.1-runtime (com.google.ar.sceneform:filament-android:1.17.1) and jetified-filament-android-1.4.5-runtime (com.google.android.filament:filament-android:1.4.5)`\r\n\r\n\r\nI tried changing all to version 1.4.5 but that didn&#39;t work, the 1.17.1 version still compiled somehow and i tried the other way around leaving imports not working anymore","title":"Two modules clashing (Duplicate Class) but i need both","body":"<p>I am doing an AR project on android studio and am using an github fork as a library. The problem is &quot;jetified-filament-android-1.17.1-runtime&quot; from (com.google.ar.sceneform:filament-android:1.17.1) and &quot;jetified-filament-android-1.4.5-runtime&quot; from (com.google.android.filament:filament-android:1.4.5) are different dependencies but have some classes equal between them. For example both possess the class Camera but only one of them possesses some X class that the github fork above needs. An example of the error is as follows:</p>\n<p><code>Duplicate class com.google.android.filament.AndroidPlatform found in modules jetified-filament-android-1.17.1-runtime (com.google.ar.sceneform:filament-android:1.17.1) and jetified-filament-android-1.4.5-runtime (com.google.android.filament:filament-android:1.4.5)</code></p>\n<p><code>Duplicate class com.google.android.filament.Asserts found in modules jetified-filament-android-1.17.1-runtime (com.google.ar.sceneform:filament-android:1.17.1) and jetified-filament-android-1.4.5-runtime (com.google.android.filament:filament-android:1.4.5)</code></p>\n<p>I tried changing all to version 1.4.5 but that didn't work, the 1.17.1 version still compiled somehow and i tried the other way around leaving imports not working anymore</p>\n"},{"tags":["java","spring","spring-boot","soap","jax-ws"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1671097867,"post_id":74809522,"comment_id":132026033,"body_markdown":"You don&#39;t as it has been removed inline with the other older remoting technologies. You probably need to switch to another way of registering/creating those proxies, like Apache CXF or write an implementation with Spring Web Services.","body":"You don&#39;t as it has been removed inline with the other older remoting technologies. You probably need to switch to another way of registering/creating those proxies, like Apache CXF or write an implementation with Spring Web Services."},{"owner":{"account_id":171189,"reputation":38099,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"score":0,"creation_date":1671099262,"post_id":74809522,"comment_id":132026557,"body_markdown":"Maybe this should be an answer?","body":"Maybe this should be an answer?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1671099708,"post_id":74809522,"comment_id":132026720,"body_markdown":"I was gathering some additional resources (like the ticket and commit) to reference to. But an answer has been written.","body":"I was gathering some additional resources (like the ticket and commit) to reference to. But an answer has been written."}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1671099685,"creation_date":1671099685,"answer_id":74810010,"question_id":74809522,"body_markdown":"This class, as many others, has been removed in Spring Framework 6 (which is used by Spring Boot 3). It has been documented by [this Github ticket][1] and this [commit][2]. The old style remoting support (due to vulnerabilities and better options available) has been removed from the core library. \r\n\r\nFor the JAX-WS part you probably want to use something like [Apache CXF][3] in the current day and age, which would allow for a dynamic proxy. Another option is to implement the client yourself using [Spring Web Services][4]\r\n\r\n[1]: https://github.com/spring-projects/spring-framework/issues/27422\r\n[2]: https://github.com/spring-projects/spring-framework/commit/5822f1bf85b94fd15f9829914b065b1c61910c7d\r\n[3]: https://cxf.apache.org\r\n[4]: https://spring.io/projects/spring-ws","title":"Using JaxWsPortProxyFactoryBean, or an equivalent, in Spring Boot 3?","body":"<p>This class, as many others, has been removed in Spring Framework 6 (which is used by Spring Boot 3). It has been documented by <a href=\"https://github.com/spring-projects/spring-framework/issues/27422\" rel=\"nofollow noreferrer\">this Github ticket</a> and this <a href=\"https://github.com/spring-projects/spring-framework/commit/5822f1bf85b94fd15f9829914b065b1c61910c7d\" rel=\"nofollow noreferrer\">commit</a>. The old style remoting support (due to vulnerabilities and better options available) has been removed from the core library.</p>\n<p>For the JAX-WS part you probably want to use something like <a href=\"https://cxf.apache.org\" rel=\"nofollow noreferrer\">Apache CXF</a> in the current day and age, which would allow for a dynamic proxy. Another option is to implement the client yourself using <a href=\"https://spring.io/projects/spring-ws\" rel=\"nofollow noreferrer\">Spring Web Services</a></p>\n"},{"tags":[],"owner":{"account_id":385998,"reputation":3034,"user_id":743507,"accept_rate":93,"display_name":"dschulten"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699906281,"creation_date":1699743309,"answer_id":77467146,"question_id":74809522,"body_markdown":"Jakarta JAXWS-RI is also an option: You generate MyService and MyPort using the jaxws-maven-plugin. Then you set it up using Spring, assuming you have written a MyConfigProperties class to access application.properties.\r\n\r\nIn a MyConfig class which sets up the beans and takes the MyConfigProperties, also adding SSL support for good measure:\r\n\r\n    @Configuration\r\n    public class MyConfig {\r\n\r\n      public MyConfig(MyConfigProperties myConfigProperties) {\r\n        this.myConfigProperties = myConfigProperties;\r\n      }\r\n\r\n      @Bean\r\n      public MyService myService() {\r\n        try {\r\n            URL wsdlLocation = this.getClass().getResource(&quot;/META-INF/wsdl/my.wsdl&quot;);\r\n            return new MyService(wsdlLocation); // may pass features here\r\n        } catch (Exception e) {\r\n            throw(new IllegalStateException(e);\r\n        }\r\n      }\r\n\r\n      @Bean\r\n      public KeyStoreFactoryBean keyStore() {\r\n          KeyStoreFactoryBean keyStoreFactoryBean = new KeyStoreFactoryBean();\r\n          Resource location = new ClassPathResource(myConfigProperties.getKeystoreLocation());\r\n          keyStoreFactoryBean.setLocation(location);\r\n          keyStoreFactoryBean.setPassword(myConfigProperties.getKeystorePassword());\r\n          return keyStoreFactoryBean;\r\n      }\r\n  \r\n      @Bean\r\n      public KeyStoreFactoryBean trustStore() {\r\n          KeyStoreFactoryBean keyStoreFactoryBean = new KeyStoreFactoryBean();\r\n          Resource location = new ClassPathResource(myConfigProperties.getTruststoreLocation());\r\n          keyStoreFactoryBean.setLocation(location);\r\n          keyStoreFactoryBean.setPassword(myConfigProperties.getTruststorePassword());\r\n          return keyStoreFactoryBean;\r\n      }\r\n\r\n      @Bean\r\n      public TrustManagersFactoryBean trustManagers(KeyStore trustStore) {\r\n          TrustManagersFactoryBean trustManagersFactoryBean = new TrustManagersFactoryBean();\r\n          trustManagersFactoryBean.setKeyStore(trustStore);\r\n          return trustManagersFactoryBean;\r\n      }\r\n  \r\n      @Bean\r\n      public KeyManagersFactoryBean keyManagers(KeyStore keyStore) {\r\n          KeyManagersFactoryBean keyManagersFactoryBean = new KeyManagersFactoryBean();\r\n          keyManagersFactoryBean.setKeyStore(keyStore);\r\n          keyManagersFactoryBean.setPassword(props.getKeystorePassword());\r\n          return keyManagersFactoryBean;\r\n      }\r\n  \r\n      @Bean\r\n      public SSLSocketFactory sslSocketFactory(TrustManager[] trustManagers, KeyManager[] keyManagers) throws Exception {\r\n          SSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\r\n          sslContext.init(keyManagers, trustManagers, new SecureRandom());\r\n          return sslContext.getSocketFactory();\r\n      }\r\n    }\r\n\r\nIn your client implementation:\r\n\r\n    @Component\r\n    public class MyClient {\r\n\r\n      public MyClient(MyService myService, MyConfigProperties props,\r\n          SSLSocketFactory sslSocketFactory) {\r\n        this.myPort = myService.getMyPort();\r\n        this.props = props;\r\n        this.sslSocketFactory = sslSocketFactory;\r\n      }\r\n    \r\n      public MyResult callEndpoint() {    \r\n        BindingProvider bindingProvider = (BindingProvider) msgBoxPort;\r\n        Map&lt;String, Object&gt; requestContext = bindingProvider.getRequestContext();\r\n        requestContext.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, props.getWebserviceUri());\r\n        requestContext.put(JAXWSProperties.SSL_SOCKET_FACTORY, sslSocketFactory);\r\n        return myPort.callEndpoint();\r\n      }\r\n    }\r\n\r\nFor the code generation you might be interested in https://stackoverflow.com/a/77465064/743507, I just recently went through the hassle to build a SOAP client for a rather complex WSDL, where I had to download a lot of schema files and needed a catalog to point the jaxws-maven-plugin to the downloaded stuff. This is generally a good idea, because you don&#39;t want your client to fail during startup if the target service is not available (or doesn&#39;t publish its WSDL properly).","title":"Using JaxWsPortProxyFactoryBean, or an equivalent, in Spring Boot 3?","body":"<p>Jakarta JAXWS-RI is also an option: You generate MyService and MyPort using the jaxws-maven-plugin. Then you set it up using Spring, assuming you have written a MyConfigProperties class to access application.properties.</p>\n<p>In a MyConfig class which sets up the beans and takes the MyConfigProperties, also adding SSL support for good measure:</p>\n<pre><code>@Configuration\npublic class MyConfig {\n\n  public MyConfig(MyConfigProperties myConfigProperties) {\n    this.myConfigProperties = myConfigProperties;\n  }\n\n  @Bean\n  public MyService myService() {\n    try {\n        URL wsdlLocation = this.getClass().getResource(&quot;/META-INF/wsdl/my.wsdl&quot;);\n        return new MyService(wsdlLocation); // may pass features here\n    } catch (Exception e) {\n        throw(new IllegalStateException(e);\n    }\n  }\n\n  @Bean\n  public KeyStoreFactoryBean keyStore() {\n      KeyStoreFactoryBean keyStoreFactoryBean = new KeyStoreFactoryBean();\n      Resource location = new ClassPathResource(myConfigProperties.getKeystoreLocation());\n      keyStoreFactoryBean.setLocation(location);\n      keyStoreFactoryBean.setPassword(myConfigProperties.getKeystorePassword());\n      return keyStoreFactoryBean;\n  }\n\n  @Bean\n  public KeyStoreFactoryBean trustStore() {\n      KeyStoreFactoryBean keyStoreFactoryBean = new KeyStoreFactoryBean();\n      Resource location = new ClassPathResource(myConfigProperties.getTruststoreLocation());\n      keyStoreFactoryBean.setLocation(location);\n      keyStoreFactoryBean.setPassword(myConfigProperties.getTruststorePassword());\n      return keyStoreFactoryBean;\n  }\n\n  @Bean\n  public TrustManagersFactoryBean trustManagers(KeyStore trustStore) {\n      TrustManagersFactoryBean trustManagersFactoryBean = new TrustManagersFactoryBean();\n      trustManagersFactoryBean.setKeyStore(trustStore);\n      return trustManagersFactoryBean;\n  }\n\n  @Bean\n  public KeyManagersFactoryBean keyManagers(KeyStore keyStore) {\n      KeyManagersFactoryBean keyManagersFactoryBean = new KeyManagersFactoryBean();\n      keyManagersFactoryBean.setKeyStore(keyStore);\n      keyManagersFactoryBean.setPassword(props.getKeystorePassword());\n      return keyManagersFactoryBean;\n  }\n\n  @Bean\n  public SSLSocketFactory sslSocketFactory(TrustManager[] trustManagers, KeyManager[] keyManagers) throws Exception {\n      SSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\n      sslContext.init(keyManagers, trustManagers, new SecureRandom());\n      return sslContext.getSocketFactory();\n  }\n}\n</code></pre>\n<p>In your client implementation:</p>\n<pre><code>@Component\npublic class MyClient {\n\n  public MyClient(MyService myService, MyConfigProperties props,\n      SSLSocketFactory sslSocketFactory) {\n    this.myPort = myService.getMyPort();\n    this.props = props;\n    this.sslSocketFactory = sslSocketFactory;\n  }\n\n  public MyResult callEndpoint() {    \n    BindingProvider bindingProvider = (BindingProvider) msgBoxPort;\n    Map&lt;String, Object&gt; requestContext = bindingProvider.getRequestContext();\n    requestContext.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, props.getWebserviceUri());\n    requestContext.put(JAXWSProperties.SSL_SOCKET_FACTORY, sslSocketFactory);\n    return myPort.callEndpoint();\n  }\n}\n</code></pre>\n<p>For the code generation you might be interested in <a href=\"https://stackoverflow.com/a/77465064/743507\">https://stackoverflow.com/a/77465064/743507</a>, I just recently went through the hassle to build a SOAP client for a rather complex WSDL, where I had to download a lot of schema files and needed a catalog to point the jaxws-maven-plugin to the downloaded stuff. This is generally a good idea, because you don't want your client to fail during startup if the target service is not available (or doesn't publish its WSDL properly).</p>\n"}],"owner":{"account_id":171189,"reputation":38099,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2305,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74810010,"answer_count":2,"score":1,"last_activity_date":1699906281,"creation_date":1671097281,"question_id":74809522,"body_markdown":"I&#39;m trying to upgrade a project that makes use of `org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean` in Spring Boot 2.7.5 to Spring Boot 3. Here&#39;s the declaration of my bean:\r\n\r\n```java\r\n@Bean\r\npublic JaxWsPortProxyFactoryBean myJaxWsClient() {\r\n    JaxWsPortProxyFactoryBean jaxWsPortProxyFactoryBean = new JaxWsPortProxyFactoryBean();\r\n    jaxWsPortProxyFactoryBean.setJaxWsService(new My_Service());\r\n    jaxWsPortProxyFactoryBean.setWsdlDocumentUrl(Thread.currentThread().getContextClassLoader().getResource(&quot;META-INF/my.wsdl&quot;));\r\n    jaxWsPortProxyFactoryBean.setNamespaceUri(&quot;urn:net:something&quot;);\r\n    jaxWsPortProxyFactoryBean.setServiceName(&quot;MyService&quot;);\r\n    jaxWsPortProxyFactoryBean.setServiceInterface(My.class);\r\n    jaxWsPortProxyFactoryBean.setEndpointAddress(&quot;http://someuri:7979/myservice&quot;);\r\n    jaxWsPortProxyFactoryBean.setUsername(&quot;username&quot;);\r\n    jaxWsPortProxyFactoryBean.setPassword(&quot;password&quot;);\r\n    return jaxWsPortProxyFactoryBean;\r\n}\r\n```\r\n\r\nHowever, `org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean` doesn&#39;t seem to be available in Spring Boot 3, or it has moved to another library. \r\n\r\nMy question is: How do I use `JaxWsPortProxyFactoryBean` in Spring Boot 3, or how do I migrate to a more modern alternative (if available)? ","title":"Using JaxWsPortProxyFactoryBean, or an equivalent, in Spring Boot 3?","body":"<p>I'm trying to upgrade a project that makes use of <code>org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean</code> in Spring Boot 2.7.5 to Spring Boot 3. Here's the declaration of my bean:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic JaxWsPortProxyFactoryBean myJaxWsClient() {\n    JaxWsPortProxyFactoryBean jaxWsPortProxyFactoryBean = new JaxWsPortProxyFactoryBean();\n    jaxWsPortProxyFactoryBean.setJaxWsService(new My_Service());\n    jaxWsPortProxyFactoryBean.setWsdlDocumentUrl(Thread.currentThread().getContextClassLoader().getResource(&quot;META-INF/my.wsdl&quot;));\n    jaxWsPortProxyFactoryBean.setNamespaceUri(&quot;urn:net:something&quot;);\n    jaxWsPortProxyFactoryBean.setServiceName(&quot;MyService&quot;);\n    jaxWsPortProxyFactoryBean.setServiceInterface(My.class);\n    jaxWsPortProxyFactoryBean.setEndpointAddress(&quot;http://someuri:7979/myservice&quot;);\n    jaxWsPortProxyFactoryBean.setUsername(&quot;username&quot;);\n    jaxWsPortProxyFactoryBean.setPassword(&quot;password&quot;);\n    return jaxWsPortProxyFactoryBean;\n}\n</code></pre>\n<p>However, <code>org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean</code> doesn't seem to be available in Spring Boot 3, or it has moved to another library.</p>\n<p>My question is: How do I use <code>JaxWsPortProxyFactoryBean</code> in Spring Boot 3, or how do I migrate to a more modern alternative (if available)?</p>\n"},{"tags":["java","regex","string"],"comments":[{"owner":{"account_id":465573,"reputation":192684,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":3,"creation_date":1699906401,"post_id":77476560,"comment_id":136587244,"body_markdown":"Your benchmarking technique is _extremely_ suspect.  That said, manual string matching will generally be faster than regex.","body":"Your benchmarking technique is <i>extremely</i> suspect.  That said, manual string matching will generally be faster than regex."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1699911496,"post_id":77476560,"comment_id":136588026,"body_markdown":"Your pattern is using no less than 4 greedy quantifiers (&quot;.*&quot;) which means there will be a lot of backtracking involved. Change your regex to `String pattern = &quot;powershell.*? -enc.*?d3JpdGUtaG9zdC.*?persist.*?txt&quot;;` and the second test (with the precompiled pattern) is almost as fast as the manual match.","body":"Your pattern is using no less than 4 greedy quantifiers (&quot;.*&quot;) which means there will be a lot of backtracking involved. Change your regex to <code>String pattern = &quot;powershell.*? -enc.*?d3JpdGUtaG9zdC.*?persist.*?txt&quot;;</code> and the second test (with the precompiled pattern) is almost as fast as the manual match."},{"owner":{"account_id":85850,"reputation":8741,"user_id":239101,"accept_rate":57,"display_name":"David Soroko"},"score":0,"creation_date":1699912279,"post_id":77476560,"comment_id":136588137,"body_markdown":"tryStringMatchManual will return true on input for which tryRegexMatch will return false. You may want to fix that so at least you have apples to apples comparison.","body":"tryStringMatchManual will return true on input for which tryRegexMatch will return false. You may want to fix that so at least you have apples to apples comparison."},{"owner":{"account_id":1410679,"reputation":3385,"user_id":1337338,"accept_rate":38,"display_name":"voidMainReturn"},"score":0,"creation_date":1699913797,"post_id":77476560,"comment_id":136588350,"body_markdown":"@DavidSoroko : can you give an example on where it would do that ? Just strictly matching based on * as the regex character. No other characters like . or ?","body":"@DavidSoroko : can you give an example on where it would do that ? Just strictly matching based on * as the regex character. No other characters like . or ?"},{"owner":{"account_id":85850,"reputation":8741,"user_id":239101,"accept_rate":57,"display_name":"David Soroko"},"score":1,"creation_date":1699945451,"post_id":77476560,"comment_id":136591091,"body_markdown":"Your `tryStringMatchManual` returns false on the input as is. Once you fix that, consider prepending &quot;-enc &quot; to your `input`","body":"Your <code>tryStringMatchManual</code> returns false on the input as is. Once you fix that, consider prepending &quot;-enc &quot; to your <code>input</code>"}],"owner":{"account_id":1410679,"reputation":3385,"user_id":1337338,"accept_rate":38,"display_name":"voidMainReturn"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1699906455,"answer_count":0,"score":-1,"last_activity_date":1699906069,"creation_date":1699905932,"question_id":77476560,"body_markdown":"I&#39;m running experiments on timing the regex matching in java. I&#39;m surprised that even with the pattern.compile, the regex matching is slower than a manually written matching code.\r\n&lt;br&gt;Here&#39;s my example :\r\n\r\n    public static void main(String[] args) {\r\n        String input = &quot;powershell.exe -enc d3JpdGUtaG9zdCAiaGVsbG8gd29ybGQi &gt;&gt; persist.txt&quot;;\r\n        String pattern = &quot;powershell.* -enc.*d3JpdGUtaG9zdC.*persist.*txt&quot;;\r\n        int runs = 1000;\r\n    \r\n        boolean rtn;\r\n        long startTime = System.nanoTime();\r\n        for (int i = 0; i &lt; runs; i++) {\r\n          rtn = tryStringMatch(pattern, input);\r\n          //      System.out.println(&quot;Output : &quot;+rtn);\r\n        }\r\n        long endTime = System.nanoTime();\r\n    \r\n        long totalTimeNanos = (endTime - startTime);\r\n        System.out.println(\r\n            &quot;stringMatch total time : &quot;\r\n                + totalTimeNanos\r\n                + &quot;, avg time : &quot;\r\n                + (double) totalTimeNanos / runs);\r\n    \r\n    \r\n        Pattern pat = Pattern.compile(pattern);\r\n        startTime = System.nanoTime();\r\n        for (int i = 0; i &lt; runs; i++) {\r\n          rtn = tryRegexMatch(pat, input);\r\n          //      System.out.println(&quot;Output : &quot;+rtn);\r\n        }\r\n        endTime = System.nanoTime();\r\n        totalTimeNanos = (endTime - startTime);\r\n        System.out.println(\r\n            &quot;RegexMatch total time : &quot;\r\n                + totalTimeNanos\r\n                + &quot;, avg time : &quot;\r\n                + (double) totalTimeNanos / runs);\r\n    \r\n    \r\n        pattern = &quot;powershell* -enc *d3JpdGUtaG9zdC *persist*txt&quot;;\r\n        String[] tokens = pattern.split(&quot;\\\\*&quot;);\r\n        startTime = System.nanoTime();\r\n        for (int i = 0; i &lt; runs; i++) {\r\n          rtn = tryStringMatchManual(tokens, input);\r\n          //      System.out.println(&quot;Output : &quot;+rtn);\r\n        }\r\n        endTime = System.nanoTime();\r\n        totalTimeNanos = (endTime - startTime);\r\n        System.out.println(\r\n            &quot;stringMatchManual total time : &quot;\r\n                + totalTimeNanos\r\n                + &quot;, avg time : &quot;\r\n                + (double) totalTimeNanos / runs);\r\n      }\r\n    \r\n      public static boolean tryStringMatch(String pattern, String input) {\r\n        return input.matches(pattern);\r\n      }\r\n    \r\n      public static boolean tryRegexMatch(Pattern pat, String input) {\r\n        Matcher matcher = pat.matcher(input);\r\n        return matcher.matches();\r\n      }\r\n    \r\n      public static boolean tryStringMatchManual(String[] tokens, String input) {\r\n    \r\n        int start = 0;\r\n        for (int i = 0; i &lt; tokens.length; i++) {\r\n          start = input.indexOf(tokens[i], start);\r\n          if (start == -1) return false;\r\n        }\r\n        return true;\r\n      }\r\n&lt;br&gt;My question is, is manual string matching always going to be faster ? The only downside of it is that it&#39;s just matching on &quot;*&quot; character and not very extensible for other regex characters.\r\n\r\n&lt;br&gt;Edit : Results are below\r\n\r\n    stringMatch total time : 24679189, avg time : 24679.189\r\n    RegexMatch total time : 15145583, avg time : 15145.583\r\n    stringMatchManual total time : 1046044, avg time : 1046.044","title":"java regex matcher slow","body":"<p>I'm running experiments on timing the regex matching in java. I'm surprised that even with the pattern.compile, the regex matching is slower than a manually written matching code.\n<br>Here's my example :</p>\n<pre><code>public static void main(String[] args) {\n    String input = &quot;powershell.exe -enc d3JpdGUtaG9zdCAiaGVsbG8gd29ybGQi &gt;&gt; persist.txt&quot;;\n    String pattern = &quot;powershell.* -enc.*d3JpdGUtaG9zdC.*persist.*txt&quot;;\n    int runs = 1000;\n\n    boolean rtn;\n    long startTime = System.nanoTime();\n    for (int i = 0; i &lt; runs; i++) {\n      rtn = tryStringMatch(pattern, input);\n      //      System.out.println(&quot;Output : &quot;+rtn);\n    }\n    long endTime = System.nanoTime();\n\n    long totalTimeNanos = (endTime - startTime);\n    System.out.println(\n        &quot;stringMatch total time : &quot;\n            + totalTimeNanos\n            + &quot;, avg time : &quot;\n            + (double) totalTimeNanos / runs);\n\n\n    Pattern pat = Pattern.compile(pattern);\n    startTime = System.nanoTime();\n    for (int i = 0; i &lt; runs; i++) {\n      rtn = tryRegexMatch(pat, input);\n      //      System.out.println(&quot;Output : &quot;+rtn);\n    }\n    endTime = System.nanoTime();\n    totalTimeNanos = (endTime - startTime);\n    System.out.println(\n        &quot;RegexMatch total time : &quot;\n            + totalTimeNanos\n            + &quot;, avg time : &quot;\n            + (double) totalTimeNanos / runs);\n\n\n    pattern = &quot;powershell* -enc *d3JpdGUtaG9zdC *persist*txt&quot;;\n    String[] tokens = pattern.split(&quot;\\\\*&quot;);\n    startTime = System.nanoTime();\n    for (int i = 0; i &lt; runs; i++) {\n      rtn = tryStringMatchManual(tokens, input);\n      //      System.out.println(&quot;Output : &quot;+rtn);\n    }\n    endTime = System.nanoTime();\n    totalTimeNanos = (endTime - startTime);\n    System.out.println(\n        &quot;stringMatchManual total time : &quot;\n            + totalTimeNanos\n            + &quot;, avg time : &quot;\n            + (double) totalTimeNanos / runs);\n  }\n\n  public static boolean tryStringMatch(String pattern, String input) {\n    return input.matches(pattern);\n  }\n\n  public static boolean tryRegexMatch(Pattern pat, String input) {\n    Matcher matcher = pat.matcher(input);\n    return matcher.matches();\n  }\n\n  public static boolean tryStringMatchManual(String[] tokens, String input) {\n\n    int start = 0;\n    for (int i = 0; i &lt; tokens.length; i++) {\n      start = input.indexOf(tokens[i], start);\n      if (start == -1) return false;\n    }\n    return true;\n  }\n</code></pre>\n<p><br>My question is, is manual string matching always going to be faster ? The only downside of it is that it's just matching on &quot;*&quot; character and not very extensible for other regex characters.</p>\n<p><br>Edit : Results are below</p>\n<pre><code>stringMatch total time : 24679189, avg time : 24679.189\nRegexMatch total time : 15145583, avg time : 15145.583\nstringMatchManual total time : 1046044, avg time : 1046.044\n</code></pre>\n"},{"tags":["java","websocket","apache-flink","flink-streaming"],"comments":[{"owner":{"account_id":2274094,"reputation":40354,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1699916552,"post_id":77475496,"comment_id":136588714,"body_markdown":"If I recall correctly, a socketTextStream expects a line of text terminated with a carriage return.","body":"If I recall correctly, a socketTextStream expects a line of text terminated with a carriage return."},{"owner":{"account_id":21886042,"reputation":1703,"user_id":16173669,"display_name":"Martijn Visser"},"score":0,"creation_date":1699957377,"post_id":77475496,"comment_id":136592924,"body_markdown":"Using Websockets implies that you&#39;re OK with no resilience (since there&#39;s no durable storage for whatever comes from the websocket). Do keep that in mind","body":"Using Websockets implies that you&#39;re OK with no resilience (since there&#39;s no durable storage for whatever comes from the websocket). Do keep that in mind"}],"owner":{"account_id":29893547,"reputation":1,"user_id":22909097,"display_name":"zouzou bou sleiman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699905005,"creation_date":1699894186,"question_id":77475496,"body_markdown":"i have built a nodejs backend that would send websockets to the frontend, i want to setup apache flink in the middle whereby it takes the websockets as stream and just listens until some condition applies on the data being sent, then it would send an alert.\r\nnow i&#39;m not really sure if its feasible to set websockets as datastream, if not is there any alternatives to it?\r\n\r\ni have tried this \r\n```\r\nStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\r\n\r\nDataStream&lt;Tuple2&lt;String, Integer&gt;&gt; dataStream = env\r\n    .socketTextStream(&quot;localhost&quot;, 3000)\r\n    .flatMap(new Splitter())\r\n    .keyBy(value -&gt; value.f0)\r\n    .window(TumblingProcessingTimeWindows.of(Time.seconds(5))\r\n    .sum(1);\r\n\r\ndataStream.print();\r\n```\r\nbut it didn&#39;t work although my websocket server is up and running","title":"How to setup Websockets as datastream for apache flink","body":"<p>i have built a nodejs backend that would send websockets to the frontend, i want to setup apache flink in the middle whereby it takes the websockets as stream and just listens until some condition applies on the data being sent, then it would send an alert.\nnow i'm not really sure if its feasible to set websockets as datastream, if not is there any alternatives to it?</p>\n<p>i have tried this</p>\n<pre><code>StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n\nDataStream&lt;Tuple2&lt;String, Integer&gt;&gt; dataStream = env\n    .socketTextStream(&quot;localhost&quot;, 3000)\n    .flatMap(new Splitter())\n    .keyBy(value -&gt; value.f0)\n    .window(TumblingProcessingTimeWindows.of(Time.seconds(5))\n    .sum(1);\n\ndataStream.print();\n</code></pre>\n<p>but it didn't work although my websocket server is up and running</p>\n"},{"tags":["java","instanceof","jep"],"comments":[{"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"score":0,"creation_date":1699903408,"post_id":77476278,"comment_id":136586753,"body_markdown":"&quot;S against a pattern of type T, where S is a subtype of T&quot;, `Number` is not a subtype of `Integer`.","body":"&quot;S against a pattern of type T, where S is a subtype of T&quot;, <code>Number</code> is not a subtype of <code>Integer</code>."},{"owner":{"account_id":3314090,"reputation":832,"user_id":2786832,"display_name":"zeugor"},"score":0,"creation_date":1699904283,"post_id":77476278,"comment_id":136586872,"body_markdown":"I got confuse by &quot;pattern instanceof expression&quot;. I think this text in JEP is wrong, it should be &#39;&quot;expression instanceof pattern&quot;, right?","body":"I got confuse by &quot;pattern instanceof expression&quot;. I think this text in JEP is wrong, it should be &#39;&quot;expression instanceof pattern&quot;, right?"},{"owner":{"account_id":3314090,"reputation":832,"user_id":2786832,"display_name":"zeugor"},"score":0,"creation_date":1699904315,"post_id":77476278,"comment_id":136586879,"body_markdown":"I have just updated code in my question, the new code still compiles. It should not compile as it is pointless, but it runs.","body":"I have just updated code in my question, the new code still compiles. It should not compile as it is pointless, but it runs."},{"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"score":0,"creation_date":1699904681,"post_id":77476278,"comment_id":136586946,"body_markdown":"Which java version are you using? This JEP was delivered in JDK 14 as preview feature. And finalized in JDK 16.","body":"Which java version are you using? This JEP was delivered in JDK 14 as preview feature. And finalized in JDK 16."},{"owner":{"account_id":3314090,"reputation":832,"user_id":2786832,"display_name":"zeugor"},"score":0,"creation_date":1699905328,"post_id":77476278,"comment_id":136587054,"body_markdown":"Java 17 version","body":"Java 17 version"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":4,"creation_date":1699905385,"post_id":77476278,"comment_id":136587061,"body_markdown":"Why should it not compile? There is no pattern matching involved; that is just the old `instanceof`, also called [*type comparison operator*](https://docs.oracle.com/javase/specs/jls/se21/html/jls-15.html#jls-15.20.1)","body":"Why should it not compile? There is no pattern matching involved; that is just the old <code>instanceof</code>, also called <a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-15.html#jls-15.20.1\" rel=\"nofollow noreferrer\"><i>type comparison operator</i></a>"},{"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"score":1,"creation_date":1699905495,"post_id":77476278,"comment_id":136587085,"body_markdown":"Try writing `n instanceof Number num`","body":"Try writing <code>n instanceof Number num</code>"},{"owner":{"account_id":3314090,"reputation":832,"user_id":2786832,"display_name":"zeugor"},"score":0,"creation_date":1699905542,"post_id":77476278,"comment_id":136587096,"body_markdown":"ok, I see what happens: if (n instanceof Number) compiles, but if (n instanceof Number x) does not compile.","body":"ok, I see what happens: if (n instanceof Number) compiles, but if (n instanceof Number x) does not compile."},{"owner":{"account_id":3314090,"reputation":832,"user_id":2786832,"display_name":"zeugor"},"score":0,"creation_date":1699905581,"post_id":77476278,"comment_id":136587103,"body_markdown":"it does not compile cos the JEP pointed out: &quot;This instanceof expression will always succeed and is then pointless.&quot;","body":"it does not compile cos the JEP pointed out: &quot;This instanceof expression will always succeed and is then pointless.&quot;"},{"owner":{"account_id":3314090,"reputation":832,"user_id":2786832,"display_name":"zeugor"},"score":0,"creation_date":1699905868,"post_id":77476278,"comment_id":136587150,"body_markdown":"sorry, i was missing the pattern local variable, but the fact the it does not compile for pattern-matching instanceof but it compiles for type instanceof. That behavior looks confusing. Prob it should stay like this due to support old code.","body":"sorry, i was missing the pattern local variable, but the fact the it does not compile for pattern-matching instanceof but it compiles for type instanceof. That behavior looks confusing. Prob it should stay like this due to support old code."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1699905920,"post_id":77476278,"comment_id":136587160,"body_markdown":"please also be aware that JEP means &quot;JDK Enhancement **Proposal**&quot; - the JLS (Java Language Specification) should be the last word - and it does not mention an error for that code (well, at least I did not find it)","body":"please also be aware that JEP means &quot;JDK Enhancement <b>Proposal</b>&quot; - the JLS (Java Language Specification) should be the last word - and it does not mention an error for that code (well, at least I did not find it)"},{"owner":{"account_id":3314090,"reputation":832,"user_id":2786832,"display_name":"zeugor"},"score":0,"creation_date":1699906469,"post_id":77476278,"comment_id":136587254,"body_markdown":"how can I know this JEP is included in JLS 17? JEP 394 was included in JDK 16 release. As it is listed in https://www.oracle.com/java/technologies/javase/16all-relnotes.html . Can I deduce every JEP in JDK 16 is included in JDK 17?","body":"how can I know this JEP is included in JLS 17? JEP 394 was included in JDK 16 release. As it is listed in <a href=\"https://www.oracle.com/java/technologies/javase/16all-relnotes.html\" rel=\"nofollow noreferrer\">oracle.com/java/technologies/javase/16all-relnotes.html</a> . Can I deduce every JEP in JDK 16 is included in JDK 17?"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1699906602,"post_id":77476278,"comment_id":136587275,"body_markdown":"from the header: &quot;*Status\tClosed / Delivered*&quot; and &quot;*Release\t16*&quot; - well, if release notes of 17 does not mention it being removed or changed, it must be there (but just my opinion/my logic)","body":"from the header: &quot;<i>Status\tClosed / Delivered</i>&quot; and &quot;<i>Release\t16</i>&quot; - well, if release notes of 17 does not mention it being removed or changed, it must be there (but just my opinion/my logic)"},{"owner":{"account_id":3314090,"reputation":832,"user_id":2786832,"display_name":"zeugor"},"score":0,"creation_date":1699906812,"post_id":77476278,"comment_id":136587311,"body_markdown":"@user85421 in Java 17 throw an error &quot;expression type Integer is a subtype of pattern type Number&quot;, check here https://editor.javadevjournal.com/java-17-compiler.html","body":"@user85421 in Java 17 throw an error &quot;expression type Integer is a subtype of pattern type Number&quot;, check here <a href=\"https://editor.javadevjournal.com/java-17-compiler.html\" rel=\"nofollow noreferrer\">editor.javadevjournal.com/java-17-compiler.html</a>"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":2,"creation_date":1699907082,"post_id":77476278,"comment_id":136587356,"body_markdown":"I see, according JLS: &quot;**If the type of the RelationalExpression is a subtype of the type of the Pattern, then a compile-time error occurs**&quot;, that was removed in Java 21","body":"I see, according JLS: &quot;<b>If the type of the RelationalExpression is a subtype of the type of the Pattern, then a compile-time error occurs</b>&quot;, that was removed in Java 21"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":2,"creation_date":1699907769,"post_id":77476278,"comment_id":136587454,"body_markdown":"I could imagine it was  changed as part of JEP 440 (Record Patterns) [or even JEP441 (PM for switch)] - kind of because a record is s subtype of itself, but that must be allowed for Pattern Matching with records to work","body":"I could imagine it was  changed as part of JEP 440 (Record Patterns) [or even JEP441 (PM for switch)] - kind of because a record is s subtype of itself, but that must be allowed for Pattern Matching with records to work"},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1702030417,"post_id":77476278,"comment_id":136850349,"body_markdown":"@user85421 I wouldn’t say “must be allowed” but it would reduce the usefulness of pattern matching if decomposing required the expression to have a strict supertype of the record type. We would end up inserting pointless widening type casts, just to be able to decompose a record.","body":"@user85421 I wouldn’t say “must be allowed” but it would reduce the usefulness of pattern matching if decomposing required the expression to have a strict supertype of the record type. We would end up inserting pointless widening type casts, just to be able to decompose a record."}],"owner":{"account_id":3314090,"reputation":832,"user_id":2786832,"display_name":"zeugor"},"comment_count":17,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699904094,"creation_date":1699902535,"question_id":77476278,"body_markdown":"Reading this JDK Enhancement Proposal for Pattern Matching for instanceof:\r\n\r\nhttps://openjdk.org/jeps/394\r\n\r\n&gt; Make it a compile-time error for a pattern instanceof expression to\r\n&gt; compare an expression of type S against a pattern of type T, where S\r\n&gt; is a subtype of T. (This instanceof expression will always succeed and\r\n&gt; is then pointless. The opposite case, where a pattern match will\r\n&gt; always fail, is already a compile-time error.)\r\n\r\nThen as Integer is a subtype of Number, I would expect a compile-time error for this code, but it works:\r\n\r\n    Integer n = 1;\r\n    if (n instanceof Number) {\r\n    \tSystem.out.println(&quot;hi&quot;);\r\n    }\r\n\r\nI would expect the compile-time error because as the JEP pointed this code is pointless, alsways succeed.","title":"Pattern Matching for instanceof - compile-time error for a [type] instanceof [subtype]","body":"<p>Reading this JDK Enhancement Proposal for Pattern Matching for instanceof:</p>\n<p><a href=\"https://openjdk.org/jeps/394\" rel=\"nofollow noreferrer\">https://openjdk.org/jeps/394</a></p>\n<blockquote>\n<p>Make it a compile-time error for a pattern instanceof expression to\ncompare an expression of type S against a pattern of type T, where S\nis a subtype of T. (This instanceof expression will always succeed and\nis then pointless. The opposite case, where a pattern match will\nalways fail, is already a compile-time error.)</p>\n</blockquote>\n<p>Then as Integer is a subtype of Number, I would expect a compile-time error for this code, but it works:</p>\n<pre><code>Integer n = 1;\nif (n instanceof Number) {\n    System.out.println(&quot;hi&quot;);\n}\n</code></pre>\n<p>I would expect the compile-time error because as the JEP pointed this code is pointless, alsways succeed.</p>\n"},{"tags":["java","android","java-time"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1699903491,"post_id":77475688,"comment_id":136586761,"body_markdown":"Reference, _[StackOverflow – Android get current Locale, not default](https://stackoverflow.com/a/14389640/17758716)_.","body":"Reference, <i><a href=\"https://stackoverflow.com/a/14389640/17758716\">StackOverflow – Android get current Locale, not default</a></i>."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699903669,"creation_date":1699903669,"answer_id":77476377,"question_id":77475688,"body_markdown":"As you have seen, `DateTimeFormatter.ofLocalized…` does not honor the user’s own localization-detail settings such as 12/24-hour clock.\r\n\r\n## *CLDR*\r\n\r\nInstead, that class draws upon a specific set of localization rules.\r\n\r\nIn older Java, a limited set of localization rules was bundled. In contrast, modern Java bundles the elaborately detailed localization rules published by the [Unicode Consortium][1], [*Common Locale Data Repository (CLDR)*][2]. At first the CLDR was of secondary use in Java. In Java9+, the CLDR is the [default source of localization][3] rules. \r\n\r\nI do not know what Android uses as its source of localization rules. \r\n\r\n### Affecting output\r\n\r\nI can understand wanting to alter localized output. For example, many of the localized formats use a two-digit year which I have found causes all kinds of confusion in business. I would like to override that one aspect of  localized formatters, to always use four-digit years. \r\n\r\nOne way to affect the localized output would be specifying a sub-culture. The CLDR defines many of these. \r\n\r\nPerhaps you could start with a `DateTimeFormatter` produced by `DateTimeFormatter.ofLocalized…`. Then use `DateTimeFormatterBuilder` to override aspects. This is mere speculation; I’ve not tried that. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Unicode_Consortium\r\n  [2]: https://en.wikipedia.org/wiki/Common_Locale_Data_Repository\r\n  [3]: https://openjdk.org/jeps/252","title":"How do I format date/time using Android device locale?","body":"<p>As you have seen, <code>DateTimeFormatter.ofLocalized…</code> does not honor the user’s own localization-detail settings such as 12/24-hour clock.</p>\n<h2><em>CLDR</em></h2>\n<p>Instead, that class draws upon a specific set of localization rules.</p>\n<p>In older Java, a limited set of localization rules was bundled. In contrast, modern Java bundles the elaborately detailed localization rules published by the <a href=\"https://en.wikipedia.org/wiki/Unicode_Consortium\" rel=\"nofollow noreferrer\">Unicode Consortium</a>, <a href=\"https://en.wikipedia.org/wiki/Common_Locale_Data_Repository\" rel=\"nofollow noreferrer\"><em>Common Locale Data Repository (CLDR)</em></a>. At first the CLDR was of secondary use in Java. In Java9+, the CLDR is the <a href=\"https://openjdk.org/jeps/252\" rel=\"nofollow noreferrer\">default source of localization</a> rules.</p>\n<p>I do not know what Android uses as its source of localization rules.</p>\n<h3>Affecting output</h3>\n<p>I can understand wanting to alter localized output. For example, many of the localized formats use a two-digit year which I have found causes all kinds of confusion in business. I would like to override that one aspect of  localized formatters, to always use four-digit years.</p>\n<p>One way to affect the localized output would be specifying a sub-culture. The CLDR defines many of these.</p>\n<p>Perhaps you could start with a <code>DateTimeFormatter</code> produced by <code>DateTimeFormatter.ofLocalized…</code>. Then use <code>DateTimeFormatterBuilder</code> to override aspects. This is mere speculation; I’ve not tried that.</p>\n"}],"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1699903669,"creation_date":1699896023,"question_id":77475688,"body_markdown":"I am using the `java.time` package in Android, and I want to format a `ZonedDateTime` according to the user&#39;s device settings. I tried my default `DateTimeFormatter.ofLocalizedDateTime/ofLocalizedTime`, but these always use a fixed format regardless of the device&#39;s setting (e.g., always using 12-hour format even if the handset is set to 24-hour).\r\n\r\nHow do I get a `java.time.format.DateTimeFormatter` that respects the user&#39;s device preferences?\r\n\r\nThere are lots of questions on SO about formatting localized dates on Android, but all of the answers either refer to the legacy `Date` API or disregard the device&#39;s settings.","title":"How do I format date/time using Android device locale?","body":"<p>I am using the <code>java.time</code> package in Android, and I want to format a <code>ZonedDateTime</code> according to the user's device settings. I tried my default <code>DateTimeFormatter.ofLocalizedDateTime/ofLocalizedTime</code>, but these always use a fixed format regardless of the device's setting (e.g., always using 12-hour format even if the handset is set to 24-hour).</p>\n<p>How do I get a <code>java.time.format.DateTimeFormatter</code> that respects the user's device preferences?</p>\n<p>There are lots of questions on SO about formatting localized dates on Android, but all of the answers either refer to the legacy <code>Date</code> API or disregard the device's settings.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":2,"creation_date":1699894832,"post_id":77475552,"comment_id":136585408,"body_markdown":"You should include sample data both matching and non matching.","body":"You should include sample data both matching and non matching."},{"owner":{"account_id":9197152,"reputation":1142,"user_id":6835509,"display_name":"Vasanth Subramanian"},"score":0,"creation_date":1699894987,"post_id":77475552,"comment_id":136585446,"body_markdown":"can you try this and let me know whether this worked for all test cases you mentioned  `^\\d{14}(?:-[a-zA-Z0-9]+_\\d+_\\d+)?$`","body":"can you try this and let me know whether this worked for all test cases you mentioned  <code>^\\d{14}(?:-[a-zA-Z0-9]+_\\d+_\\d+)?$</code>"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1699895652,"post_id":77475552,"comment_id":136585592,"body_markdown":"For starters your pattern has `-` where your examples have `_`, and your &quot;number&quot; group allows letters (?) but your examples don&#39;t have letters there. Also, please remove all the group names - it&#39;s hard enough to read regex without them.","body":"For starters your pattern has <code>-</code> where your examples have <code>_</code>, and your &quot;number&quot; group allows letters (?) but your examples don&#39;t have letters there. Also, please remove all the group names - it&#39;s hard enough to read regex without them."}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699896572,"creation_date":1699896222,"answer_id":77475706,"question_id":77475552,"body_markdown":"Your examples have an underscore `_` after the first part, but your regex has a hyphen `-`, so I&#39;ve corrected that error by assuming your examples are correct.\r\n\r\nThe main problems with your regex are:\r\n 1. you made all the subparts of the optional part optional - they shouldn&#39;t be optional. The *whole* optional part should be there or not.\r\n 2. the separator (the underscore/hyphen) must be part of the optional group. The way you&#39;ve coded it makes it *required* after the first part, whether or not the final optional group is present.\r\n\r\nTry this:\r\n\r\n    ^(\\d{4})(\\d{3})([A-Z0-9]{3})(\\d{4})(_([A-Z0-9]+)_(\\d+)_(\\d+))?$\r\n\r\nSee [live demo][1].\r\n\r\nI&#39;ve removed all the group names for readability.\r\n\r\nI also added `^` and `$` because I don&#39;t know how you&#39;re using it. If you&#39;re using `String#matches()`, you can remove those.\r\n\r\n  [1]: https://rubular.com/r/wZvrAVfPdcycK2","title":"Java regex pattern mathes not valid optional part","body":"<p>Your examples have an underscore <code>_</code> after the first part, but your regex has a hyphen <code>-</code>, so I've corrected that error by assuming your examples are correct.</p>\n<p>The main problems with your regex are:</p>\n<ol>\n<li>you made all the subparts of the optional part optional - they shouldn't be optional. The <em>whole</em> optional part should be there or not.</li>\n<li>the separator (the underscore/hyphen) must be part of the optional group. The way you've coded it makes it <em>required</em> after the first part, whether or not the final optional group is present.</li>\n</ol>\n<p>Try this:</p>\n<pre><code>^(\\d{4})(\\d{3})([A-Z0-9]{3})(\\d{4})(_([A-Z0-9]+)_(\\d+)_(\\d+))?$\n</code></pre>\n<p>See <a href=\"https://rubular.com/r/wZvrAVfPdcycK2\" rel=\"nofollow noreferrer\">live demo</a>.</p>\n<p>I've removed all the group names for readability.</p>\n<p>I also added <code>^</code> and <code>$</code> because I don't know how you're using it. If you're using <code>String#matches()</code>, you can remove those.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699903046,"creation_date":1699899339,"answer_id":77475994,"question_id":77475552,"body_markdown":"&gt; _&quot;... i have changed it to following, to made ```&lt;lastPart&gt;``` optional ...\\\r\n&gt;\\\r\n&gt; ... what is weird ```12321324143432142352546534636534343243525425``` is matching.&quot;_\r\n\r\nTechnically, the pattern should include _word-boundaries_, or some _static value_ to anchor to.\r\n\r\n&gt; _&quot;... How to make my regex pattern validate 14 digits string as a first part and if something presented after, it should looks like ```-{numbers/letters}_{numbers}_{numbers}``` ...&quot;_\r\n\r\nHere is an example, with the _group names_ omitted.&amp;nbsp; I&#39;ve included the full pattern, at the end of this text.\r\n\r\n```none\r\n\\b(\\d{4})(\\d{3})([A-Z\\d]{3})(\\d{4})(?:-([A-Z\\d]+)(?:_(\\d+)(?:_(\\d+))?)?)?(?: |$)\r\n```\r\n\r\nAnd, here is an example application.\r\n\r\n```java\r\nString r = &quot;\\\\b(?&lt;part1&gt;(?&lt;year&gt;\\\\d{4})(?&lt;day&gt;\\\\d{3})(?&lt;number&gt;[A-Z\\\\d]{3})(?&lt;sequence&gt;\\\\d{4}))(?:-(?&lt;lastPart&gt;(?&lt;letter&gt;[A-Z\\\\d]+)(?:_(?&lt;num1&gt;\\\\d+)(?:_(?&lt;num2&gt;\\\\d+))?)?))?(?: |$)&quot;;\r\nString s = &quot;12233255555555 valid\\n&quot;\r\n         + &quot;12233255555555- invalid\\n&quot;\r\n         + &quot;12233255555555-A valid\\n&quot;\r\n         + &quot;12233255555555-A_ invalid\\n&quot;\r\n         + &quot;12233255555555-A_1 valid\\n&quot;\r\n         + &quot;12233255555555-A_1_ invalid\\n&quot;\r\n         + &quot;12233255555555-A_1_1 valid\\n&quot;\r\n         + &quot;12233255555555-A__1 invalid\\n&quot;\r\n         + &quot;12233255555555-A__ invalid&quot;;\r\nPattern p = Pattern.compile(r);\r\nMatcher m = p.matcher(s);\r\nint i = 0;\r\nwhile (m.find()) {\r\n    System.out.println(&quot;match &quot; + ++i);\r\n    for (String k : m.namedGroups().keySet())\r\n        System.out.printf(&quot;  %s = &#39;%s&#39;%n&quot;, k, m.group(k));\r\n    System.out.println();\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nmatch 1\r\n  year = &#39;1223&#39;\r\n  lastPart = &#39;null&#39;\r\n  number = &#39;555&#39;\r\n  letter = &#39;null&#39;\r\n  day = &#39;325&#39;\r\n  num1 = &#39;null&#39;\r\n  part1 = &#39;12233255555555&#39;\r\n  sequence = &#39;5555&#39;\r\n  num2 = &#39;null&#39;\r\n\r\nmatch 2\r\n  year = &#39;1223&#39;\r\n  lastPart = &#39;A&#39;\r\n  number = &#39;555&#39;\r\n  letter = &#39;A&#39;\r\n  day = &#39;325&#39;\r\n  num1 = &#39;null&#39;\r\n  part1 = &#39;12233255555555&#39;\r\n  sequence = &#39;5555&#39;\r\n  num2 = &#39;null&#39;\r\n\r\nmatch 3\r\n  year = &#39;1223&#39;\r\n  lastPart = &#39;A_1&#39;\r\n  number = &#39;555&#39;\r\n  letter = &#39;A&#39;\r\n  day = &#39;325&#39;\r\n  num1 = &#39;1&#39;\r\n  part1 = &#39;12233255555555&#39;\r\n  sequence = &#39;5555&#39;\r\n  num2 = &#39;null&#39;\r\n\r\nmatch 4\r\n  year = &#39;1223&#39;\r\n  lastPart = &#39;A_1_1&#39;\r\n  number = &#39;555&#39;\r\n  letter = &#39;A&#39;\r\n  day = &#39;325&#39;\r\n  num1 = &#39;1&#39;\r\n  part1 = &#39;12233255555555&#39;\r\n  sequence = &#39;5555&#39;\r\n  num2 = &#39;1&#39;\r\n```\r\n\r\nHere is the complete pattern.\r\n\r\n```none\r\n\\b(?&lt;part1&gt;(?&lt;year&gt;\\d{4})(?&lt;day&gt;\\d{3})(?&lt;number&gt;[A-Z\\d]{3})(?&lt;sequence&gt;\\d{4}))(?:-(?&lt;lastPart&gt;(?&lt;letter&gt;[A-Z\\d]+)(?:_(?&lt;num1&gt;\\d+)(?:_(?&lt;num2&gt;\\d+))?)?))?(?: |$)\r\n```\r\n\r\n","title":"Java regex pattern mathes not valid optional part","body":"<blockquote>\n<p><em>&quot;... i have changed it to following, to made <code>&lt;lastPart&gt;</code> optional ...<br />\n<br />\n... what is weird <code>12321324143432142352546534636534343243525425</code> is matching.&quot;</em></p>\n</blockquote>\n<p>Technically, the pattern should include <em>word-boundaries</em>, or some <em>static value</em> to anchor to.</p>\n<blockquote>\n<p><em>&quot;... How to make my regex pattern validate 14 digits string as a first part and if something presented after, it should looks like <code>-{numbers/letters}_{numbers}_{numbers}</code> ...&quot;</em></p>\n</blockquote>\n<p>Here is an example, with the <em>group names</em> omitted.  I've included the full pattern, at the end of this text.</p>\n<pre class=\"lang-none prettyprint-override\"><code>\\b(\\d{4})(\\d{3})([A-Z\\d]{3})(\\d{4})(?:-([A-Z\\d]+)(?:_(\\d+)(?:_(\\d+))?)?)?(?: |$)\n</code></pre>\n<p>And, here is an example application.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String r = &quot;\\\\b(?&lt;part1&gt;(?&lt;year&gt;\\\\d{4})(?&lt;day&gt;\\\\d{3})(?&lt;number&gt;[A-Z\\\\d]{3})(?&lt;sequence&gt;\\\\d{4}))(?:-(?&lt;lastPart&gt;(?&lt;letter&gt;[A-Z\\\\d]+)(?:_(?&lt;num1&gt;\\\\d+)(?:_(?&lt;num2&gt;\\\\d+))?)?))?(?: |$)&quot;;\nString s = &quot;12233255555555 valid\\n&quot;\n         + &quot;12233255555555- invalid\\n&quot;\n         + &quot;12233255555555-A valid\\n&quot;\n         + &quot;12233255555555-A_ invalid\\n&quot;\n         + &quot;12233255555555-A_1 valid\\n&quot;\n         + &quot;12233255555555-A_1_ invalid\\n&quot;\n         + &quot;12233255555555-A_1_1 valid\\n&quot;\n         + &quot;12233255555555-A__1 invalid\\n&quot;\n         + &quot;12233255555555-A__ invalid&quot;;\nPattern p = Pattern.compile(r);\nMatcher m = p.matcher(s);\nint i = 0;\nwhile (m.find()) {\n    System.out.println(&quot;match &quot; + ++i);\n    for (String k : m.namedGroups().keySet())\n        System.out.printf(&quot;  %s = '%s'%n&quot;, k, m.group(k));\n    System.out.println();\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>match 1\n  year = '1223'\n  lastPart = 'null'\n  number = '555'\n  letter = 'null'\n  day = '325'\n  num1 = 'null'\n  part1 = '12233255555555'\n  sequence = '5555'\n  num2 = 'null'\n\nmatch 2\n  year = '1223'\n  lastPart = 'A'\n  number = '555'\n  letter = 'A'\n  day = '325'\n  num1 = 'null'\n  part1 = '12233255555555'\n  sequence = '5555'\n  num2 = 'null'\n\nmatch 3\n  year = '1223'\n  lastPart = 'A_1'\n  number = '555'\n  letter = 'A'\n  day = '325'\n  num1 = '1'\n  part1 = '12233255555555'\n  sequence = '5555'\n  num2 = 'null'\n\nmatch 4\n  year = '1223'\n  lastPart = 'A_1_1'\n  number = '555'\n  letter = 'A'\n  day = '325'\n  num1 = '1'\n  part1 = '12233255555555'\n  sequence = '5555'\n  num2 = '1'\n</code></pre>\n<p>Here is the complete pattern.</p>\n<pre class=\"lang-none prettyprint-override\"><code>\\b(?&lt;part1&gt;(?&lt;year&gt;\\d{4})(?&lt;day&gt;\\d{3})(?&lt;number&gt;[A-Z\\d]{3})(?&lt;sequence&gt;\\d{4}))(?:-(?&lt;lastPart&gt;(?&lt;letter&gt;[A-Z\\d]+)(?:_(?&lt;num1&gt;\\d+)(?:_(?&lt;num2&gt;\\d+))?)?))?(?: |$)\n</code></pre>\n"}],"owner":{"account_id":15192407,"reputation":163,"user_id":10979419,"display_name":"Ivan Karotki"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":77475994,"answer_count":2,"score":-3,"last_activity_date":1699903046,"creation_date":1699894667,"question_id":77475552,"body_markdown":"I have following regex pattern in code:\r\n```\r\n&quot;(?&lt;part1&gt;(?&lt;year&gt;\\\\d{4})(?&lt;day&gt;\\\\d{3})(?&lt;number&gt;[A-Z0-9]{3})(?&lt;sequence&gt;\\\\d{4}))-(?&lt;lastPart&gt;(?&lt;letter&gt;[A-Z0-9]+)_?(?&lt;num1&gt;\\\\d+)?_?(?&lt;num2&gt;\\\\d+)?)&quot;\r\n```\r\nand i have changed it to following, to made ```&lt;lastPart&gt;``` optional:\r\n```\r\n&quot;(?&lt;part1&gt;(?&lt;year&gt;\\d{4})(?&lt;day&gt;\\d{3})(?&lt;number&gt;[A-Z0-9]{3})(?&lt;sequence&gt;\\d{4}))-?(?&lt;lastPart&gt;(?&lt;letter&gt;[A-Z0-9]+)_?(?&lt;num1&gt;\\d+)?_?(?&lt;num2&gt;\\d+)?)?&quot;\r\n```\r\n\r\ni&#39;m updating it because 14 digits string is valid too, but running tests i have found that invalid strings \r\n```\r\n20221239990001_AB\r\n20221239990001_ABC#$%\r\n20221239990001_+AB&gt;&lt;\r\n20221239990001_-*AB___\r\n20221239990001_AB12232434\r\n```\r\nare valid too and it is wrong.\r\nHow to make my regex pattern validate 14 digits string as a first part and if something presented after, it should looks like ```-{numbers/letters}_{numbers}_{numbers}```\r\nThanks.\r\nEdit1:\r\n\r\nnot matching:\r\n```\r\n2022123999000\r\n202212399900\r\n2022123999\r\n```\r\nbut what is weird ```12321324143432142352546534636534343243525425``` is matching.\r\n\r\nEdit2:\r\nOptional part contains optional subparts\r\nso:\r\n```\r\n12233255555555 valid\r\n12233255555555- invalid\r\n12233255555555-A valid\r\n12233255555555-A_ invalid\r\n12233255555555-A_1 valid\r\n12233255555555-A_1_ invalid\r\n12233255555555-A_1_1 valid\r\n12233255555555-A__1 invalid\r\n12233255555555-A__ invalid\r\n```","title":"Java regex pattern mathes not valid optional part","body":"<p>I have following regex pattern in code:</p>\n<pre><code>&quot;(?&lt;part1&gt;(?&lt;year&gt;\\\\d{4})(?&lt;day&gt;\\\\d{3})(?&lt;number&gt;[A-Z0-9]{3})(?&lt;sequence&gt;\\\\d{4}))-(?&lt;lastPart&gt;(?&lt;letter&gt;[A-Z0-9]+)_?(?&lt;num1&gt;\\\\d+)?_?(?&lt;num2&gt;\\\\d+)?)&quot;\n</code></pre>\n<p>and i have changed it to following, to made <code>&lt;lastPart&gt;</code> optional:</p>\n<pre><code>&quot;(?&lt;part1&gt;(?&lt;year&gt;\\d{4})(?&lt;day&gt;\\d{3})(?&lt;number&gt;[A-Z0-9]{3})(?&lt;sequence&gt;\\d{4}))-?(?&lt;lastPart&gt;(?&lt;letter&gt;[A-Z0-9]+)_?(?&lt;num1&gt;\\d+)?_?(?&lt;num2&gt;\\d+)?)?&quot;\n</code></pre>\n<p>i'm updating it because 14 digits string is valid too, but running tests i have found that invalid strings</p>\n<pre><code>20221239990001_AB\n20221239990001_ABC#$%\n20221239990001_+AB&gt;&lt;\n20221239990001_-*AB___\n20221239990001_AB12232434\n</code></pre>\n<p>are valid too and it is wrong.\nHow to make my regex pattern validate 14 digits string as a first part and if something presented after, it should looks like <code>-{numbers/letters}_{numbers}_{numbers}</code>\nThanks.\nEdit1:</p>\n<p>not matching:</p>\n<pre><code>2022123999000\n202212399900\n2022123999\n</code></pre>\n<p>but what is weird <code>12321324143432142352546534636534343243525425</code> is matching.</p>\n<p>Edit2:\nOptional part contains optional subparts\nso:</p>\n<pre><code>12233255555555 valid\n12233255555555- invalid\n12233255555555-A valid\n12233255555555-A_ invalid\n12233255555555-A_1 valid\n12233255555555-A_1_ invalid\n12233255555555-A_1_1 valid\n12233255555555-A__1 invalid\n12233255555555-A__ invalid\n</code></pre>\n"},{"tags":["java","integer","hex","unsigned-integer"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1337586662,"post_id":10681312,"comment_id":13861328,"body_markdown":"An error?  Wonder what that might be.","body":"An error?  Wonder what that might be."}],"answers":[{"tags":[],"owner":{"account_id":279943,"reputation":202411,"user_id":575376,"accept_rate":82,"display_name":"juergen d"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1356640991,"creation_date":1337586760,"answer_id":10681354,"question_id":10681312,"body_markdown":"`ffffffde` is bigger than integer max value\r\n\r\n&gt;[Java int is 32 bit][1] signed type ranges from –2,147,483,648 to 2,147,483,647.\r\n\r\n    ffffffde = 4,294,967,262 \r\n\r\n##Edit\r\n\r\n\r\nYou used `Integer.toHexString(int_val)` to turn a int into a hex string. From the doc of that method:\r\n\r\n&gt;Returns a string representation of the integer argument as an **unsigned** integer in base 16. \r\n\r\nBut `int` is a **signed** type. \r\n\r\n**USE**\r\n\r\n    int value = new BigInteger(&quot;ffffffde&quot;, 16).intValue();\r\n\r\nto get it back as a negative value.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html","title":"Converting a negative number created by toHexString back to an int in Java","body":"<p><code>ffffffde</code> is bigger than integer max value</p>\n\n<blockquote>\n  <p><a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"noreferrer\">Java int is 32 bit</a> signed type ranges from –2,147,483,648 to 2,147,483,647.</p>\n</blockquote>\n\n<pre><code>ffffffde = 4,294,967,262 \n</code></pre>\n\n<h2>Edit</h2>\n\n<p>You used <code>Integer.toHexString(int_val)</code> to turn a int into a hex string. From the doc of that method:</p>\n\n<blockquote>\n  <p>Returns a string representation of the integer argument as an <strong>unsigned</strong> integer in base 16. </p>\n</blockquote>\n\n<p>But <code>int</code> is a <strong>signed</strong> type. </p>\n\n<p><strong>USE</strong></p>\n\n<pre><code>int value = new BigInteger(\"ffffffde\", 16).intValue();\n</code></pre>\n\n<p>to get it back as a negative value.</p>\n"},{"tags":[],"owner":{"account_id":42822,"reputation":4610,"user_id":124891,"accept_rate":91,"display_name":"Umesh Aawte"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1337586976,"creation_date":1337586976,"answer_id":10681393,"question_id":10681312,"body_markdown":"If you are getting error like this,\r\n\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NumberFormatException: For input string: &quot;ffffffde&quot;\r\n    \tat java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)\r\n    \tat java.lang.Integer.parseInt(Integer.java:461)\r\n    \tat com.TestStatic.main(TestStatic.java:22)\r\n\r\nThen there is problem with value you are passing that is **ffffffde** . This is not a valid hex value for parsing to int. \r\n\r\nPlease try this \r\n\r\n    int x = Integer.parseInt(&quot;ffffde&quot;,16);\r\n    \t\tSystem.out.println(x);\r\n\r\nIt should work.\r\n\r\nFor hex values more than that you have to pars to **Long**\r\n\r\n\t\r\n\r\n    Long x = Long.parseLong(&quot;ffffffde&quot;,16);\r\n    \t\tSystem.out.println(x);\r\n\r\nAnd this also should work","title":"Converting a negative number created by toHexString back to an int in Java","body":"<p>If you are getting error like this,</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NumberFormatException: For input string: \"ffffffde\"\n    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)\n    at java.lang.Integer.parseInt(Integer.java:461)\n    at com.TestStatic.main(TestStatic.java:22)\n</code></pre>\n\n<p>Then there is problem with value you are passing that is <strong>ffffffde</strong> . This is not a valid hex value for parsing to int. </p>\n\n<p>Please try this </p>\n\n<pre><code>int x = Integer.parseInt(\"ffffde\",16);\n        System.out.println(x);\n</code></pre>\n\n<p>It should work.</p>\n\n<p>For hex values more than that you have to pars to <strong>Long</strong></p>\n\n<pre><code>Long x = Long.parseLong(\"ffffffde\",16);\n        System.out.println(x);\n</code></pre>\n\n<p>And this also should work</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699902540,"creation_date":1699902540,"answer_id":77476281,"question_id":10681312,"body_markdown":"Using the [`Integer.parseUnsignedInt`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html#parseUnsignedInt(java.lang.String,int)) method introduced in Java 8 instead of `Integer.parseInt` will result in the desired behavior.\r\n\r\n```lang-java\r\nint x = color(Integer.parseUnsignedInt(&quot;ffffffde&quot;, 16));\r\n```\r\n\r\nThe issue is that `Integer.toHexString` returns an unsigned integer in base 16, but `Integer.parseInt` parses the value as a signed integer.  Since `ffffffde` as a signed integer is greater than `Integer.MAX_VALUE`, the observed `NumberFormatException` is thrown.\r\n\r\nThe `Integer.toHexString` [Javadocs](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html#toHexString(int)) indicates that `parseUnsignedInt` can be used to convert the `String` back to an `int`:\r\n\r\n&gt; The value of the argument can be recovered from the returned string `s` by calling [`Integer.parseUnsignedInt(s, 16)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html#parseUnsignedInt(java.lang.String,int)).","title":"Converting a negative number created by toHexString back to an int in Java","body":"<p>Using the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html#parseUnsignedInt(java.lang.String,int)\" rel=\"nofollow noreferrer\"><code>Integer.parseUnsignedInt</code></a> method introduced in Java 8 instead of <code>Integer.parseInt</code> will result in the desired behavior.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int x = color(Integer.parseUnsignedInt(&quot;ffffffde&quot;, 16));\n</code></pre>\n<p>The issue is that <code>Integer.toHexString</code> returns an unsigned integer in base 16, but <code>Integer.parseInt</code> parses the value as a signed integer.  Since <code>ffffffde</code> as a signed integer is greater than <code>Integer.MAX_VALUE</code>, the observed <code>NumberFormatException</code> is thrown.</p>\n<p>The <code>Integer.toHexString</code> <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html#toHexString(int)\" rel=\"nofollow noreferrer\">Javadocs</a> indicates that <code>parseUnsignedInt</code> can be used to convert the <code>String</code> back to an <code>int</code>:</p>\n<blockquote>\n<p>The value of the argument can be recovered from the returned string <code>s</code> by calling <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html#parseUnsignedInt(java.lang.String,int)\" rel=\"nofollow noreferrer\"><code>Integer.parseUnsignedInt(s, 16)</code></a>.</p>\n</blockquote>\n"}],"owner":{"account_id":1325276,"reputation":369,"user_id":1270235,"accept_rate":45,"display_name":"user1270235"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10115,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"accepted_answer_id":10681354,"answer_count":3,"score":2,"last_activity_date":1699902933,"creation_date":1337586553,"question_id":10681312,"body_markdown":"I am getting an error because of the following line of code:\r\n\r\n```lang-java\r\nint x = color(Integer.parseInt(&quot;ffffffde&quot;,16));\r\n```\r\n\r\nThe value &quot;ffffffde&quot; is being created by the following code:\r\n\r\n```lang-java\r\nInteger.toHexString(int_val);\r\n```\r\n\r\nError:\r\n\r\n```lang-none\r\nException in thread &quot;Animation Thread&quot; java.lang.NumberFormatException: For input string: &quot;ffffffde&quot;\r\n\tat java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.lang.Integer.parseInt(Unknown Source)\r\n```\r\n\r\nI think it might be because it is a negative value.\r\n\r\nAny ideas why or how or how to fix it?\r\n\r\n---\r\n\r\nEdit:\r\n\r\nTurns out it is a known bug [JDK-4215269](https://bugs.java.com/bugdatabase/view_bug?bug_id=4215269) in versions of Java prior to 8.\r\n\r\nAlthough you can convert integers to hex strings, you cannot convert them back if they are negative numbers!","title":"Converting a negative number created by toHexString back to an int in Java","body":"<p>I am getting an error because of the following line of code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int x = color(Integer.parseInt(&quot;ffffffde&quot;,16));\n</code></pre>\n<p>The value &quot;ffffffde&quot; is being created by the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Integer.toHexString(int_val);\n</code></pre>\n<p>Error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;Animation Thread&quot; java.lang.NumberFormatException: For input string: &quot;ffffffde&quot;\n    at java.lang.NumberFormatException.forInputString(Unknown Source)\n    at java.lang.Integer.parseInt(Unknown Source)\n</code></pre>\n<p>I think it might be because it is a negative value.</p>\n<p>Any ideas why or how or how to fix it?</p>\n<hr />\n<p>Edit:</p>\n<p>Turns out it is a known bug <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4215269\" rel=\"nofollow noreferrer\">JDK-4215269</a> in versions of Java prior to 8.</p>\n<p>Although you can convert integers to hex strings, you cannot convert them back if they are negative numbers!</p>\n"},{"tags":["java","downcast"],"comments":[{"owner":{"account_id":15278830,"reputation":1642,"user_id":11023821,"display_name":"Ralf Ulrich"},"score":0,"creation_date":1699902541,"post_id":77476256,"comment_id":136586636,"body_markdown":"Why is this a downcast? I don&#39;t think it is. Maybe &#39;a&#39;+300 or just 300?","body":"Why is this a downcast? I don&#39;t think it is. Maybe &#39;a&#39;+300 or just 300?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1699902616,"post_id":77476256,"comment_id":136586650,"body_markdown":"It&#39;s a down cast because the type is implicitly `int` by default.","body":"It&#39;s a down cast because the type is implicitly <code>int</code> by default."},{"owner":{"account_id":1713052,"reputation":5733,"user_id":1818935,"accept_rate":91,"display_name":"Evan Aad"},"score":0,"creation_date":1699902703,"post_id":77476256,"comment_id":136586661,"body_markdown":"@S&#246;ren Yes, it does. Thanks.","body":"@S&#246;ren Yes, it does. Thanks."},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1699907906,"post_id":77476256,"comment_id":136587473,"body_markdown":"Only in initializations.","body":"Only in initializations."}],"owner":{"account_id":1713052,"reputation":5733,"user_id":1818935,"accept_rate":91,"display_name":"Evan Aad"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1699902743,"answer_count":0,"score":0,"last_activity_date":1699902685,"creation_date":1699902240,"question_id":77476256,"body_markdown":"I thought implicit downcasting is forbidden in Java. However, the following implicit downcast works: the program compiles and runs error-free.\r\n\r\n    char c = &#39;a&#39; + 1;\r\n\r\nWhy? What implicit downcasts are allowed in java?","title":"Implicit downcasts in Java (int to char)","body":"<p>I thought implicit downcasting is forbidden in Java. However, the following implicit downcast works: the program compiles and runs error-free.</p>\n<pre><code>char c = 'a' + 1;\n</code></pre>\n<p>Why? What implicit downcasts are allowed in java?</p>\n"},{"tags":["java","spring-boot","spring-data-redis","spring-cache"],"comments":[{"owner":{"account_id":3620043,"reputation":2295,"user_id":3019024,"accept_rate":97,"display_name":"WildDev"},"score":0,"creation_date":1698880126,"post_id":77399702,"comment_id":136462282,"body_markdown":"The problem is the value of the `date` key is the `CustomerDetail` and not a list of them, ensure the `fetchByDate()` method has correct signature","body":"The problem is the value of the <code>date</code> key is the <code>CustomerDetail</code> and not a list of them, ensure the <code>fetchByDate()</code> method has correct signature"},{"owner":{"account_id":14331277,"reputation":71,"user_id":10351954,"display_name":"J. Doe"},"score":0,"creation_date":1698897413,"post_id":77399702,"comment_id":136463610,"body_markdown":"@WildDev On given date, there could be multiple customers created. We need list of customers created on given date. Can&#39;t I cache the list? and then update the same ? If no then what&#39;s the use of caching.","body":"@WildDev On given date, there could be multiple customers created. We need list of customers created on given date. Can&#39;t I cache the list? and then update the same ? If no then what&#39;s the use of caching."},{"owner":{"account_id":3620043,"reputation":2295,"user_id":3019024,"accept_rate":97,"display_name":"WildDev"},"score":0,"creation_date":1698908918,"post_id":77399702,"comment_id":136464602,"body_markdown":"To store a list you need either iterate over it and persist each the element individually or save the entire list instance by a key. In your example the `fetchByDate()` is trying to put the `List` instance to the regular customer cache. Since it&#39;s different datatype, it might not work as expected","body":"To store a list you need either iterate over it and persist each the element individually or save the entire list instance by a key. In your example the <code>fetchByDate()</code> is trying to put the <code>List</code> instance to the regular customer cache. Since it&#39;s different datatype, it might not work as expected"}],"answers":[{"tags":[],"owner":{"account_id":4133097,"reputation":7506,"user_id":3390417,"display_name":"John Blum"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1699902205,"creation_date":1699902205,"answer_id":77476253,"question_id":77399702,"body_markdown":"As @WildDev explained in his comment above, the return types of the value to cache must match for a given key when using a specifically &quot;named&quot; cache.\r\n\r\nIn your examples, this would equate to:\r\n\r\n```java\r\n@Service\r\nclass CacheableCustomerServiceExample {\r\n\r\n    @Cacheable(cacheNames=&quot;customerDetails&quot;)\r\n    List&lt;CustomerDetail&gt; fetchByDate(String date) {\r\n        // ...\r\n    }\r\n\r\n    @CachePut(cacheNames=&quot;customerDetails&quot;, key=&quot;#date&quot;)\r\n    List&lt;CustomerDetail&gt; updateCustomer(String date, CustomerDetail customer) {\r\n        // ...\r\n    }\r\n\r\n}\r\n```\r\n\r\nRemember, your &quot;*customerDetails*&quot; cache will have the following entry after the `fetchByDate(..)` service method is called:\r\n\r\n```txt\r\nKEY  | VALUE\r\n------------\r\ndate | List&lt;CustomerDetail&gt;\r\n```\r\n\r\nThis means you need logic in your `updateCustomer(..)` service method to update the `List` of `CustomerDetail` objects returned by the update method to subsequently update the cache entry for the &quot;date&quot; key.\r\n\r\n&gt; WARNING: Keep in mind, you cannot simply call the `fetchByDate(..)` service method from inside the service proxy, as this won&#39;t invoke Spring&#39;s caching AOP logic, for reasons explained in the [documentation][1].\r\n\r\nArguably, if any `CustomerDetail` entry in the `List` is updated then the cache entry should be invalidated. Therefore, your `updateCustomer(..)` method would rather be:\r\n\r\n```java\r\n@CacheEvict(cacheNames=&quot;customerDetails&quot;, key=&quot;#date&quot;)\r\nCustomerDetail updateCustomer(String date, CustomerDetail customer) {\r\n    // ...\r\n}\r\n```\r\n\r\nIn this case, the service method return types don&#39;t need to match.\r\n\r\nYes, this will remove the cached `List` entirely, but the next time the particular date is requested on fetch (i.e. `fetchByDate(..)`), then the `List` can be lazily reloaded/cached.\r\n\r\nThis approach might come at the expense of more latency, but consume less memory.\r\n\r\nAlso, you need to consider how frequently individual `CustomerDetail` objects stored in the cache `List` are updated, in addition to the &quot;concurrency&quot; of the updates. You may possibly run into race conditions with your current arrangement, without some form of synchronization (for [example][2]), especially, if your `List` of `CustomerDetail` objects are large in size and the concurrency and frequency of updates are high. This in itself defeats the purpose of caching.\r\n\r\nOther things to consider is if some other application is updating the backend data source outside of this application using caching. There are many things to think about, technically.\r\n\r\n&gt; TIP: You typically only want to cache non-highly transactional data (non-frequently changing data) that is computationally expense to create or expensive to retrieve (e.g. network bound data, such as calling some Web service, like a REST API), but referred to often.\r\n\r\nPersonally, I&#39;d prefer to cache individual objects and not collections of those objects. However, if you are caching a collection, then I&#39;d argue to 1) keep the `List` of things related and 2) small.\r\n\r\nThere are several ways to handle what you want to do in your case, but I present 1 way here.\r\n\r\n&gt; WARNING: This approach is not necessarily the best way, and it depends on the use case, requirements and SLAs for your application.\r\n\r\nSee the example [test][3] I wrote for this post.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/reference/6.1/core/aop/proxying.html#aop-understanding-aop-proxies\r\n  [2]: https://docs.spring.io/spring-framework/reference/6.1/integration/cache/annotations.html#cache-annotations-cacheable-synchronized\r\n  [3]: https://github.com/jxblum/stackoverflow-questions-answers/blob/cached-collection/spring-cache/src/test/java/io/stackoverflow/questions/spring/cache/CachingCollectionOfObjectsIntegrationTests.java#L75-L105","title":"Unable to update already cached list using @CachePut","body":"<p>As @WildDev explained in his comment above, the return types of the value to cache must match for a given key when using a specifically &quot;named&quot; cache.</p>\n<p>In your examples, this would equate to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\nclass CacheableCustomerServiceExample {\n\n    @Cacheable(cacheNames=&quot;customerDetails&quot;)\n    List&lt;CustomerDetail&gt; fetchByDate(String date) {\n        // ...\n    }\n\n    @CachePut(cacheNames=&quot;customerDetails&quot;, key=&quot;#date&quot;)\n    List&lt;CustomerDetail&gt; updateCustomer(String date, CustomerDetail customer) {\n        // ...\n    }\n\n}\n</code></pre>\n<p>Remember, your &quot;<em>customerDetails</em>&quot; cache will have the following entry after the <code>fetchByDate(..)</code> service method is called:</p>\n<pre><code>KEY  | VALUE\n------------\ndate | List&lt;CustomerDetail&gt;\n</code></pre>\n<p>This means you need logic in your <code>updateCustomer(..)</code> service method to update the <code>List</code> of <code>CustomerDetail</code> objects returned by the update method to subsequently update the cache entry for the &quot;date&quot; key.</p>\n<blockquote>\n<p>WARNING: Keep in mind, you cannot simply call the <code>fetchByDate(..)</code> service method from inside the service proxy, as this won't invoke Spring's caching AOP logic, for reasons explained in the <a href=\"https://docs.spring.io/spring-framework/reference/6.1/core/aop/proxying.html#aop-understanding-aop-proxies\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n</blockquote>\n<p>Arguably, if any <code>CustomerDetail</code> entry in the <code>List</code> is updated then the cache entry should be invalidated. Therefore, your <code>updateCustomer(..)</code> method would rather be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@CacheEvict(cacheNames=&quot;customerDetails&quot;, key=&quot;#date&quot;)\nCustomerDetail updateCustomer(String date, CustomerDetail customer) {\n    // ...\n}\n</code></pre>\n<p>In this case, the service method return types don't need to match.</p>\n<p>Yes, this will remove the cached <code>List</code> entirely, but the next time the particular date is requested on fetch (i.e. <code>fetchByDate(..)</code>), then the <code>List</code> can be lazily reloaded/cached.</p>\n<p>This approach might come at the expense of more latency, but consume less memory.</p>\n<p>Also, you need to consider how frequently individual <code>CustomerDetail</code> objects stored in the cache <code>List</code> are updated, in addition to the &quot;concurrency&quot; of the updates. You may possibly run into race conditions with your current arrangement, without some form of synchronization (for <a href=\"https://docs.spring.io/spring-framework/reference/6.1/integration/cache/annotations.html#cache-annotations-cacheable-synchronized\" rel=\"nofollow noreferrer\">example</a>), especially, if your <code>List</code> of <code>CustomerDetail</code> objects are large in size and the concurrency and frequency of updates are high. This in itself defeats the purpose of caching.</p>\n<p>Other things to consider is if some other application is updating the backend data source outside of this application using caching. There are many things to think about, technically.</p>\n<blockquote>\n<p>TIP: You typically only want to cache non-highly transactional data (non-frequently changing data) that is computationally expense to create or expensive to retrieve (e.g. network bound data, such as calling some Web service, like a REST API), but referred to often.</p>\n</blockquote>\n<p>Personally, I'd prefer to cache individual objects and not collections of those objects. However, if you are caching a collection, then I'd argue to 1) keep the <code>List</code> of things related and 2) small.</p>\n<p>There are several ways to handle what you want to do in your case, but I present 1 way here.</p>\n<blockquote>\n<p>WARNING: This approach is not necessarily the best way, and it depends on the use case, requirements and SLAs for your application.</p>\n</blockquote>\n<p>See the example <a href=\"https://github.com/jxblum/stackoverflow-questions-answers/blob/cached-collection/spring-cache/src/test/java/io/stackoverflow/questions/spring/cache/CachingCollectionOfObjectsIntegrationTests.java#L75-L105\" rel=\"nofollow noreferrer\">test</a> I wrote for this post.</p>\n"}],"owner":{"account_id":14331277,"reputation":71,"user_id":10351954,"display_name":"J. Doe"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77476253,"answer_count":1,"score":0,"last_activity_date":1699902244,"creation_date":1698797776,"question_id":77399702,"body_markdown":"I am using `redis cache` in `spring boot` application. Requirement is - We need data list on certain date filter. So to achieve that I used `cacheable` annotation.\r\n\r\nNow when I run it for first time, it fetches records from db. When run multiple times it returns data stored in `cache`. Perfect! till here it is running fine.\r\n\r\nThen I make an entry in `db` using my `jpa repository`, with `CachePut` annotation.\r\n\r\nNow, assuming that I will again get the cache data with updated entry, I make a request to my `GET` api which I tried above. But to my surprise it fails to execute. Forget about the latest entry, this time it didn&#39;t even show earlier cached data list also.\r\n\r\n    \t@Cacheable(cacheNames = &quot;custDetails&quot;, key=&quot;#newApplicationDate&quot;)\r\n    \t@Override\r\n    \tpublic List&lt;FetchResponse&gt; fetchAll2(String newApplicationDate) {\r\n            //some code to return list\r\n        }\r\n\r\n\r\n    @CachePut(cacheNames = &quot;custDetails&quot;, key=&quot;#strDate&quot;)\r\n    @Override\r\n    public CustomerDetail updateCustomer(CustomerDetail customerDetail,String strDate) {\r\n    \tCustomerDetail customerDetail2 =  custRepository.saveAndFlush(customerDetail);\r\n    \treturn customerDetail2;\r\n    }\r\n\r\nI crossed check using print statements, both `newApplicationDate` and `strDate` date values are same.\r\n\r\nIn `redis client` I checked `keys *` it showed something like:\r\n\r\n    1) &quot;custDetails:\\xac\\xed\\x00\\x05t\\x00\\n2023-11-01&quot;\r\n\r\nand in spring boot console I am getting following error:\r\n\r\n    java.lang.ClassCastException: com.myapp.model.CustomerDetail cannot be cast to java.util.List\r\n    \tat com.myapp.service.MyServiceImpl$$EnhancerBySpringCGLIB$$347be321.fetchAll2(&lt;generated&gt;) ~[classes/:na]\r\n\r\nHow can I update the existing `cached` list using `cachePut` annotation?\r\n\r\n=========================================\r\n\r\nI also tried below code i.e. calling a same return type method again, this time I put the `cachePut` annotation now in this new method:\r\n\r\n    @Override\r\n    public CustomerDetail updateCustomer(CustomerDetail customerDetail,String strDate) {\r\n    \t// TODO Auto-generated method stub\r\n    \tSystem.out.println(&quot;!!!!!  &quot;+strDate+&quot;   !!!!!&quot;);\r\n    \tCustomerDetail customerDetail2 =  custRepository.saveAndFlush(customerDetail);\r\n    \tif(customerDetail2!=null) {\r\n    \t\trefreshCache(strDate);\r\n    \t}\r\n    \treturn customerDetail2;\r\n    }\r\n    @CachePut(cacheNames = &quot;custDetails&quot;, key=&quot;#strDate&quot;)\t\r\n    public List&lt;FetchResponse&gt; refreshCache(String strDate){\r\n    \treturn ekycService.fetchAll2(strDate);\r\n    }\r\n\r\nBut no success..\r\n\r\n=================UPDATE================\r\n\r\nNow I have put both `Cacheable` and `CachePut` in same service class. \r\n\r\n    @Cacheable(value = &quot;custDetails&quot;, key = &quot;#date&quot;)\r\n    \t@Override\r\n    \tpublic List&lt;CustomerDetail&gt; fetchByDate(String date) {\r\n    \r\n    \t\treturn custRepository.findByCreateDatess(date);\r\n    \t\t\r\n    \t}\r\n\r\n    @CachePut(value = &quot;custDetails&quot;, key=&quot;#strDate&quot;)\t\r\n    \t@Override\r\n    \tpublic CustomerDetail updateCustomer(CustomerDetail customerDetail,String strDate) {\r\n    \t\tCustomerDetail customerDetail2 =  custRepository.saveAndFlush(customerDetail);\r\n    \t\treturn customerDetail2;\r\n    \t}\r\n\r\n\r\nAgain same issue. When I try adding `CustomerDetail` to the `List&lt;CustomerDetail&gt;` , then onwards I am not getting List&lt;CustomerDetail&gt;. I am getting below error instead when trying to get `List&lt;CustomerDetail&gt;`:\r\n\r\n    java.lang.ClassCastException: com.myapp.model.CustomerDetail cannot be cast to java.util.List\r\n\r\nIf caching can not sync with its own existing list, then why on earth it is so talked about concept!","title":"Unable to update already cached list using @CachePut","body":"<p>I am using <code>redis cache</code> in <code>spring boot</code> application. Requirement is - We need data list on certain date filter. So to achieve that I used <code>cacheable</code> annotation.</p>\n<p>Now when I run it for first time, it fetches records from db. When run multiple times it returns data stored in <code>cache</code>. Perfect! till here it is running fine.</p>\n<p>Then I make an entry in <code>db</code> using my <code>jpa repository</code>, with <code>CachePut</code> annotation.</p>\n<p>Now, assuming that I will again get the cache data with updated entry, I make a request to my <code>GET</code> api which I tried above. But to my surprise it fails to execute. Forget about the latest entry, this time it didn't even show earlier cached data list also.</p>\n<pre><code>    @Cacheable(cacheNames = &quot;custDetails&quot;, key=&quot;#newApplicationDate&quot;)\n    @Override\n    public List&lt;FetchResponse&gt; fetchAll2(String newApplicationDate) {\n        //some code to return list\n    }\n\n\n@CachePut(cacheNames = &quot;custDetails&quot;, key=&quot;#strDate&quot;)\n@Override\npublic CustomerDetail updateCustomer(CustomerDetail customerDetail,String strDate) {\n    CustomerDetail customerDetail2 =  custRepository.saveAndFlush(customerDetail);\n    return customerDetail2;\n}\n</code></pre>\n<p>I crossed check using print statements, both <code>newApplicationDate</code> and <code>strDate</code> date values are same.</p>\n<p>In <code>redis client</code> I checked <code>keys *</code> it showed something like:</p>\n<pre><code>1) &quot;custDetails:\\xac\\xed\\x00\\x05t\\x00\\n2023-11-01&quot;\n</code></pre>\n<p>and in spring boot console I am getting following error:</p>\n<pre><code>java.lang.ClassCastException: com.myapp.model.CustomerDetail cannot be cast to java.util.List\n    at com.myapp.service.MyServiceImpl$$EnhancerBySpringCGLIB$$347be321.fetchAll2(&lt;generated&gt;) ~[classes/:na]\n</code></pre>\n<p>How can I update the existing <code>cached</code> list using <code>cachePut</code> annotation?</p>\n<p>=========================================</p>\n<p>I also tried below code i.e. calling a same return type method again, this time I put the <code>cachePut</code> annotation now in this new method:</p>\n<pre><code>@Override\npublic CustomerDetail updateCustomer(CustomerDetail customerDetail,String strDate) {\n    // TODO Auto-generated method stub\n    System.out.println(&quot;!!!!!  &quot;+strDate+&quot;   !!!!!&quot;);\n    CustomerDetail customerDetail2 =  custRepository.saveAndFlush(customerDetail);\n    if(customerDetail2!=null) {\n        refreshCache(strDate);\n    }\n    return customerDetail2;\n}\n@CachePut(cacheNames = &quot;custDetails&quot;, key=&quot;#strDate&quot;)   \npublic List&lt;FetchResponse&gt; refreshCache(String strDate){\n    return ekycService.fetchAll2(strDate);\n}\n</code></pre>\n<p>But no success..</p>\n<p>=================UPDATE================</p>\n<p>Now I have put both <code>Cacheable</code> and <code>CachePut</code> in same service class.</p>\n<pre><code>@Cacheable(value = &quot;custDetails&quot;, key = &quot;#date&quot;)\n    @Override\n    public List&lt;CustomerDetail&gt; fetchByDate(String date) {\n\n        return custRepository.findByCreateDatess(date);\n        \n    }\n\n@CachePut(value = &quot;custDetails&quot;, key=&quot;#strDate&quot;)    \n    @Override\n    public CustomerDetail updateCustomer(CustomerDetail customerDetail,String strDate) {\n        CustomerDetail customerDetail2 =  custRepository.saveAndFlush(customerDetail);\n        return customerDetail2;\n    }\n</code></pre>\n<p>Again same issue. When I try adding <code>CustomerDetail</code> to the <code>List&lt;CustomerDetail&gt;</code> , then onwards I am not getting List. I am getting below error instead when trying to get <code>List&lt;CustomerDetail&gt;</code>:</p>\n<pre><code>java.lang.ClassCastException: com.myapp.model.CustomerDetail cannot be cast to java.util.List\n</code></pre>\n<p>If caching can not sync with its own existing list, then why on earth it is so talked about concept!</p>\n"},{"tags":["java","swing","fonts","java-font"],"comments":[{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1699877861,"post_id":77473785,"comment_id":136582014,"body_markdown":"Please check the answers in [this related question](https://stackoverflow.com/q/7461132/), including how to check if the font of interest exists on that computer and how to install it if it doesn&#39;t.","body":"Please check the answers in <a href=\"https://stackoverflow.com/q/7461132/\">this related question</a>, including how to check if the font of interest exists on that computer and how to install it if it doesn&#39;t."},{"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"score":0,"creation_date":1699878620,"post_id":77473785,"comment_id":136582152,"body_markdown":"@HovercraftFullOfEels i see this font installed on Windows locally and able to select gyphs through the Character Map","body":"@HovercraftFullOfEels i see this font installed on Windows locally and able to select gyphs through the Character Map"},{"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"score":0,"creation_date":1699879627,"post_id":77473785,"comment_id":136582332,"body_markdown":"@HovercraftFullOfEels this font is here. May be the issue that is doesn&#39;t have Font.PLAIN or specific size or what else?","body":"@HovercraftFullOfEels this font is here. May be the issue that is doesn&#39;t have Font.PLAIN or specific size or what else?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1699900391,"post_id":77473785,"comment_id":136586343,"body_markdown":"The Windows Character Map is lying in order to be “helpful” (ironically, it is doing the opposite).  The characters are not at ASCII codepoints at all.  Wingdings and Webdings generally place their characters in the Unicode Private Use Area starting at U+F020.  Add 0xf000 to each character to get its true position in the font.  For example, instead of `&quot;^&quot;`, use `String.format(&quot;%c&quot;, &#39;^&#39; + 0xf000)`.  Instead of `&quot;&#201;&quot;`, use `String.format(&quot;%c&quot;, &#39;&#201;&#39; + 0xf000)`.","body":"The Windows Character Map is lying in order to be “helpful” (ironically, it is doing the opposite).  The characters are not at ASCII codepoints at all.  Wingdings and Webdings generally place their characters in the Unicode Private Use Area starting at U+F020.  Add 0xf000 to each character to get its true position in the font.  For example, instead of <code>&quot;^&quot;</code>, use <code>String.format(&quot;%c&quot;, &#39;^&#39; + 0xf000)</code>.  Instead of <code>&quot;&#201;&quot;</code>, use <code>String.format(&quot;%c&quot;, &#39;&#201;&#39; + 0xf000)</code>."},{"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"score":0,"creation_date":1699901281,"post_id":77473785,"comment_id":136586463,"body_markdown":"@VGR this was really helpfull!! Please post your answer as the official one!","body":"@VGR this was really helpfull!! Please post your answer as the official one!"}],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699902096,"creation_date":1699902096,"answer_id":77476240,"question_id":77473785,"body_markdown":"The Windows Character Map is lying in order to be “helpful.”  (Ironically, it is doing the opposite.)\r\n\r\nThe characters are not at ASCII codepoints at all.  Wingdings and Webdings generally place their characters in the [Unicode Private Use Area](https://www.unicode.org/faq/private_use.html) starting at U+F020.  Add 0xf000 to each character to get its true position in the font.\r\n\r\nFor example, instead of `&quot;^&quot;`, use `String.format(&quot;%c&quot;, &#39;^&#39; + 0xf000)`.  Instead of `&quot;&#201;&quot;`, use `String.format(&quot;%c&quot;, &#39;&#201;&#39; + 0xf000)`.\r\n\r\nOf course, one can also write `&quot;\\uf05e&quot;` and `&quot;\\uf0c9&quot;`. I find using String.format and adding 0xf000 a little easier to understand and maintain.\r\n","title":"Displaying WebDings font in Java swing isn&#39;t working, shown glyphs are empty","body":"<p>The Windows Character Map is lying in order to be “helpful.”  (Ironically, it is doing the opposite.)</p>\n<p>The characters are not at ASCII codepoints at all.  Wingdings and Webdings generally place their characters in the <a href=\"https://www.unicode.org/faq/private_use.html\" rel=\"nofollow noreferrer\">Unicode Private Use Area</a> starting at U+F020.  Add 0xf000 to each character to get its true position in the font.</p>\n<p>For example, instead of <code>&quot;^&quot;</code>, use <code>String.format(&quot;%c&quot;, '^' + 0xf000)</code>.  Instead of <code>&quot;É&quot;</code>, use <code>String.format(&quot;%c&quot;, 'É' + 0xf000)</code>.</p>\n<p>Of course, one can also write <code>&quot;\\uf05e&quot;</code> and <code>&quot;\\uf0c9&quot;</code>. I find using String.format and adding 0xf000 a little easier to understand and maintain.</p>\n"}],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77476240,"answer_count":1,"score":0,"last_activity_date":1699902096,"creation_date":1699877334,"question_id":77473785,"body_markdown":"The code is:\r\n\r\n    package ssl;\r\n    \r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    \r\n    public class WebDingsPhontGlyph extends JFrame {\r\n    \r\n        public WebDingsPhontGlyph() {\r\n            setTitle(&quot;WebDings Phone Glyph&quot;);\r\n            setSize(200, 200);\r\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \r\n            JPanel panel = new JPanel() {\r\n                @Override\r\n                protected void paintComponent(Graphics g) {\r\n                    super.paintComponent(g);\r\n                    Graphics2D g2d = (Graphics2D) g;\r\n                    g2d.setFont(new Font(&quot;Webdings&quot;, Font.PLAIN, 50));\r\n                    g2d.setColor(Color.BLUE);\r\n                    g2d.drawString(&quot;^&quot;, 50, 100); // Phone glyph\r\n                    g2d.drawString(&quot;&#201;&quot;, 100, 100); // Messaging glyph\r\n                }\r\n            };\r\n    \r\n            add(panel);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            SwingUtilities.invokeLater(() -&gt; {\r\n                WebDingsPhontGlyph webDingsPhoneGlyph = new WebDingsPhontGlyph();\r\n                webDingsPhoneGlyph.setVisible(true);\r\n            });\r\n        }\r\n    }\r\n\r\nand the JPanel view is, despite of I expect specific WebDings glyphs.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIf I use another font name, that definitely doesn&#39;t exits, like \r\n\r\n    g2d.setFont(new Font(&quot;webdings33&quot;, Font.PLAIN, 50));\r\n\r\nit uses Arial font and shows the glyps.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI have Webdings installed:\r\n\r\n    String [] fonts = ge.getAvailableFontFamilyNames();\r\n                    for (String fontname: fonts) {\r\n                        System.out.println(fontname);\r\n                    }\r\n\r\noutputs among others\r\n\r\n    Trebuchet MS\r\n    TypoUpright BT\r\n    Verdana\r\n    Webdings\r\n    Wingdings\r\n    Wingdings 2\r\n    Wingdings 3\r\n    Yu Gothic\r\n\r\nUPD.\r\n\r\nI&#39;m trying to test the metadata:\r\n\r\n     Font webdingsFont = new Font(&quot;WebDings&quot;, Font.PLAIN, 12);\r\n                    System.out.println(webdingsFont.isBold());\r\n                    System.out.println(webdingsFont.isItalic());\r\n                    System.out.println(webdingsFont.isTransformed());\r\n                    System.out.println(webdingsFont.isPlain());\r\n                    System.out.println(webdingsFont.getNumGlyphs());\r\n                    System.out.println(webdingsFont.getStyle());\r\n                    System.out.println(webdingsFont.getFamily());\r\n    \r\n                    for (int i = 0; i &lt; 65536; i++) {\r\n                        if (webdingsFont.canDisplay((char) i)) {\r\n    //                        g2d.drawString(Character.toString((char) i), 50, i*12); // Display the glyph at a specific position\r\n                            System.out.println(i+&quot; &quot;+Character.toString((char) i));\r\n                        }\r\n                    }\r\n\r\nand I&#39;m getting the ouptut not of the `Webdings`, but `Wingdings` font!\r\n\r\n\r\nfalse\r\nfalse\r\nfalse\r\ntrue\r\n227\r\n0\r\nWebdings\r\n9 \t\r\n10 \r\n\r\n13 \r\n8204 ‌\r\n8205 ‍\r\n61472 \r\n61473 \r\n61474 \r\n61475 \r\n\r\nand if I try to load a real Wingdings, I get exactly the same output and visible behavior. So, it looks like Wingdings is installed as a Webdings at least in my windows version.\r\n\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nP5gw.png\r\n  [2]: https://i.stack.imgur.com/KRAu4.png\r\n  [3]: https://i.stack.imgur.com/TXRKf.png","title":"Displaying WebDings font in Java swing isn&#39;t working, shown glyphs are empty","body":"<p>The code is:</p>\n<pre><code>package ssl;\n\nimport javax.swing.*;\nimport java.awt.*;\n\npublic class WebDingsPhontGlyph extends JFrame {\n\n    public WebDingsPhontGlyph() {\n        setTitle(&quot;WebDings Phone Glyph&quot;);\n        setSize(200, 200);\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        JPanel panel = new JPanel() {\n            @Override\n            protected void paintComponent(Graphics g) {\n                super.paintComponent(g);\n                Graphics2D g2d = (Graphics2D) g;\n                g2d.setFont(new Font(&quot;Webdings&quot;, Font.PLAIN, 50));\n                g2d.setColor(Color.BLUE);\n                g2d.drawString(&quot;^&quot;, 50, 100); // Phone glyph\n                g2d.drawString(&quot;É&quot;, 100, 100); // Messaging glyph\n            }\n        };\n\n        add(panel);\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; {\n            WebDingsPhontGlyph webDingsPhoneGlyph = new WebDingsPhontGlyph();\n            webDingsPhoneGlyph.setVisible(true);\n        });\n    }\n}\n</code></pre>\n<p>and the JPanel view is, despite of I expect specific WebDings glyphs.</p>\n<p><a href=\"https://i.stack.imgur.com/nP5gw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nP5gw.png\" alt=\"enter image description here\" /></a></p>\n<p>If I use another font name, that definitely doesn't exits, like</p>\n<pre><code>g2d.setFont(new Font(&quot;webdings33&quot;, Font.PLAIN, 50));\n</code></pre>\n<p>it uses Arial font and shows the glyps.</p>\n<p><a href=\"https://i.stack.imgur.com/KRAu4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KRAu4.png\" alt=\"enter image description here\" /></a></p>\n<p>I have Webdings installed:</p>\n<pre><code>String [] fonts = ge.getAvailableFontFamilyNames();\n                for (String fontname: fonts) {\n                    System.out.println(fontname);\n                }\n</code></pre>\n<p>outputs among others</p>\n<pre><code>Trebuchet MS\nTypoUpright BT\nVerdana\nWebdings\nWingdings\nWingdings 2\nWingdings 3\nYu Gothic\n</code></pre>\n<p>UPD.</p>\n<p>I'm trying to test the metadata:</p>\n<pre><code> Font webdingsFont = new Font(&quot;WebDings&quot;, Font.PLAIN, 12);\n                System.out.println(webdingsFont.isBold());\n                System.out.println(webdingsFont.isItalic());\n                System.out.println(webdingsFont.isTransformed());\n                System.out.println(webdingsFont.isPlain());\n                System.out.println(webdingsFont.getNumGlyphs());\n                System.out.println(webdingsFont.getStyle());\n                System.out.println(webdingsFont.getFamily());\n\n                for (int i = 0; i &lt; 65536; i++) {\n                    if (webdingsFont.canDisplay((char) i)) {\n//                        g2d.drawString(Character.toString((char) i), 50, i*12); // Display the glyph at a specific position\n                        System.out.println(i+&quot; &quot;+Character.toString((char) i));\n                    }\n                }\n</code></pre>\n<p>and I'm getting the ouptut not of the <code>Webdings</code>, but <code>Wingdings</code> font!</p>\n<p>false\nfalse\nfalse\ntrue\n227\n0\nWebdings\n9<br />\n10</p>\n<p>13\n8204 ‌\n8205 ‍\n61472 \n61473 \n61474 \n61475 </p>\n<p>and if I try to load a real Wingdings, I get exactly the same output and visible behavior. So, it looks like Wingdings is installed as a Webdings at least in my windows version.</p>\n<p><a href=\"https://i.stack.imgur.com/TXRKf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TXRKf.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","eclipse","runtime"],"comments":[{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1699898365,"post_id":77475862,"comment_id":136586032,"body_markdown":"I cannot reproduce any delay when running your code with the input provided. If the timeout is from some automated judging program, it is possible that you diverged from the expected output format somewhere. How are you running the program?","body":"I cannot reproduce any delay when running your code with the input provided. If the timeout is from some automated judging program, it is possible that you diverged from the expected output format somewhere. How are you running the program?"},{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":0,"creation_date":1699898372,"post_id":77475862,"comment_id":136586035,"body_markdown":"If you make sure there is a line break after the last word, it behaves as expected. I suspect you copy it and paste it without one.","body":"If you make sure there is a line break after the last word, it behaves as expected. I suspect you copy it and paste it without one."},{"owner":{"account_id":21448499,"reputation":1,"user_id":22403821,"display_name":"Pronay Sarker"},"score":0,"creation_date":1699899251,"post_id":77475862,"comment_id":136586161,"body_markdown":"@Sam Thank you Sam... It worked this time. But would you mind explaining why it happened?","body":"@Sam Thank you Sam... It worked this time. But would you mind explaining why it happened?"},{"owner":{"account_id":21448499,"reputation":1,"user_id":22403821,"display_name":"Pronay Sarker"},"score":0,"creation_date":1699899386,"post_id":77475862,"comment_id":136586187,"body_markdown":"@teapot418 thank you for taking the time to reply. I just copy-pasted code forces input this time and it worked. But I dont know why it failed at first","body":"@teapot418 thank you for taking the time to reply. I just copy-pasted code forces input this time and it worked. But I dont know why it failed at first"},{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":0,"creation_date":1699911104,"post_id":77475862,"comment_id":136587971,"body_markdown":"At the end of a line there is a line feed character (and a carriage return character if Windows). When you select some text you might or might not include that character. When you copy more than one line, you can&#39;t miss it, except for the last line. In this case you missed the one on the last line. This missed character is the signal for the scanner class to process the line.","body":"At the end of a line there is a line feed character (and a carriage return character if Windows). When you select some text you might or might not include that character. When you copy more than one line, you can&#39;t miss it, except for the last line. In this case you missed the one on the last line. This missed character is the signal for the scanner class to process the line."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699902009,"creation_date":1699902009,"answer_id":77476229,"question_id":77475862,"body_markdown":"&gt; _&quot;... The job of my program is, if the word count is more than 10, then it would paste the first word, number of words between them + and the last word ...&quot;_\r\n\r\nAs reference, these are typically called _characters_, or _chars_.\r\n\r\nHere is an example.\\\r\nNote, you can skip the _nextLine_ advance, and just use the _[next](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Scanner.html#next())_ method.\r\n\r\n```java\r\nScanner in = new Scanner(System.in);\r\nString s;\r\nint n = in.nextInt(), sn;\r\nwhile (n-- &gt; 0)\r\n    if ((sn = (s = in.next()).length()) &gt; 10)\r\n        System.out.printf(&quot;%s%s%s%n&quot;, s.charAt(0), sn - 2, s.charAt(sn - 1));\r\n    else System.out.println(s);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n4\r\nword\r\nword\r\nlocalization\r\nl10n\r\ninternationalization\r\ni18n\r\npneumonoultramicroscopicsilicovolcanoconiosis\r\np43s\r\n```","title":"Java - (My 4th test case taking too long to give output)","body":"<blockquote>\n<p><em>&quot;... The job of my program is, if the word count is more than 10, then it would paste the first word, number of words between them + and the last word ...&quot;</em></p>\n</blockquote>\n<p>As reference, these are typically called <em>characters</em>, or <em>chars</em>.</p>\n<p>Here is an example.<br />\nNote, you can skip the <em>nextLine</em> advance, and just use the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Scanner.html#next()\" rel=\"nofollow noreferrer\">next</a></em> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner in = new Scanner(System.in);\nString s;\nint n = in.nextInt(), sn;\nwhile (n-- &gt; 0)\n    if ((sn = (s = in.next()).length()) &gt; 10)\n        System.out.printf(&quot;%s%s%s%n&quot;, s.charAt(0), sn - 2, s.charAt(sn - 1));\n    else System.out.println(s);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>4\nword\nword\nlocalization\nl10n\ninternationalization\ni18n\npneumonoultramicroscopicsilicovolcanoconiosis\np43s\n</code></pre>\n"}],"owner":{"account_id":21448499,"reputation":1,"user_id":22403821,"display_name":"Pronay Sarker"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1699902009,"creation_date":1699897947,"question_id":77475862,"body_markdown":"I am having some trouble with my java program. The job of my program is, if the word count is more than 10, then it would paste the first word, number of words between them + and the last word\r\n\r\nAnd if the word count is less than 10, then it is just going to paste the word.\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n    public static void main(String pkt[]) {\r\n        Scanner sc = new Scanner(System.in);\r\n        int loopnumber= sc.nextInt();\r\n        sc.nextLine(); \r\n\r\n        while (loopnumber&gt;0){\r\n\r\n            String word = sc.nextLine();\r\n\r\n            int length = word.length(); //to count String length\r\n            int n= length-2; // wordcount between them\r\n\r\n            if(length&gt;10){ //will print first and last later of the string and the number-count between them\r\n                System.out.println(word.charAt(0)+ &quot;&quot; + n + &quot;&quot; +word.charAt(length-1));\r\n            }\r\n            else {\r\n                System.out.println(word);\r\n            }\r\n            loopnumber--;\r\n        }\r\n    }\r\n}\r\n```\r\nWhen I input\r\n```\r\n4\r\nword\r\nlocalization\r\ninternationalization\r\npneumonoultramicroscopicsilicovolcanoconiosis\r\n```\r\nthe first three case just runs fine. As for the last one, which is `pneumonoultramicroscopicsilicovolcanoconiosis`, my program is taking too long to respond for this one. About more than 30 seconds...\r\n\r\nBut when I just input \r\n```\r\n1\r\npneumonoultramicroscopicsilicovolcanoconiosis\r\n``` \r\nthen my program runs just fine. It gives an instant output. Although both the test cases (`pneumonoultramicroscopicsilicovolcanoconiosis`) are the same. \r\n\r\n","title":"Java - (My 4th test case taking too long to give output)","body":"<p>I am having some trouble with my java program. The job of my program is, if the word count is more than 10, then it would paste the first word, number of words between them + and the last word</p>\n<p>And if the word count is less than 10, then it is just going to paste the word.</p>\n<pre><code>import java.util.Scanner;\n\npublic class Main {\n    public static void main(String pkt[]) {\n        Scanner sc = new Scanner(System.in);\n        int loopnumber= sc.nextInt();\n        sc.nextLine(); \n\n        while (loopnumber&gt;0){\n\n            String word = sc.nextLine();\n\n            int length = word.length(); //to count String length\n            int n= length-2; // wordcount between them\n\n            if(length&gt;10){ //will print first and last later of the string and the number-count between them\n                System.out.println(word.charAt(0)+ &quot;&quot; + n + &quot;&quot; +word.charAt(length-1));\n            }\n            else {\n                System.out.println(word);\n            }\n            loopnumber--;\n        }\n    }\n}\n</code></pre>\n<p>When I input</p>\n<pre><code>4\nword\nlocalization\ninternationalization\npneumonoultramicroscopicsilicovolcanoconiosis\n</code></pre>\n<p>the first three case just runs fine. As for the last one, which is <code>pneumonoultramicroscopicsilicovolcanoconiosis</code>, my program is taking too long to respond for this one. About more than 30 seconds...</p>\n<p>But when I just input</p>\n<pre><code>1\npneumonoultramicroscopicsilicovolcanoconiosis\n</code></pre>\n<p>then my program runs just fine. It gives an instant output. Although both the test cases (<code>pneumonoultramicroscopicsilicovolcanoconiosis</code>) are the same.</p>\n"},{"tags":["java","ump"],"owner":{"account_id":23530806,"reputation":1,"user_id":17576493,"display_name":"Albert AH"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699901969,"creation_date":1699901498,"question_id":77476182,"body_markdown":"I have an app in production on the Google Play console and it is giving some users errors since I implemented the com.google.android.ump:user-messaging-platform:2.1.0 library.  The “Mobile Ads SDK team” tells me the following:\r\n\r\n“To resolve this issue, update dependencies to a version built using a JDK version that matches the JDK version used to build the application. For example, if we build an application using JDK 13, the dependencies should be built using JDK 13”\r\n\r\n1.-Where do I find the JDK version in which the &quot;com.google.android.ump:user-messaging-platform:2.1.0&quot; dependency was compiled?\r\n\r\n2.- How do I find a version of &quot;com.google.android.:2.1.0&quot; with the jdk compatible with that of my app?\r\nI&#39;m using Android studio 4.0.0.\r\n The error it shows me in the google play console is the following:\r\nExcepci&#243;n java.lang.VerifyError:\r\n   at java.lang.Class.newInstance\r\n   at android.app.AppComponentFactory.instantiateActivity (AppComponentFactory.java:95)\r\n   ....\r\n\r\nThanks for help me\r\n\r\nI have this configuration in the app project.\r\n[app configuration](https://i.stack.imgur.com/jCtB7.png)\r\n[app configuration](https://i.stack.imgur.com/90vIf.png)","title":"user-messaging-platform error on play console","body":"<p>I have an app in production on the Google Play console and it is giving some users errors since I implemented the com.google.android.ump:user-messaging-platform:2.1.0 library.  The “Mobile Ads SDK team” tells me the following:</p>\n<p>“To resolve this issue, update dependencies to a version built using a JDK version that matches the JDK version used to build the application. For example, if we build an application using JDK 13, the dependencies should be built using JDK 13”</p>\n<p>1.-Where do I find the JDK version in which the &quot;com.google.android.ump:user-messaging-platform:2.1.0&quot; dependency was compiled?</p>\n<p>2.- How do I find a version of &quot;com.google.android.:2.1.0&quot; with the jdk compatible with that of my app?\nI'm using Android studio 4.0.0.\nThe error it shows me in the google play console is the following:\nExcepción java.lang.VerifyError:\nat java.lang.Class.newInstance\nat android.app.AppComponentFactory.instantiateActivity (AppComponentFactory.java:95)\n....</p>\n<p>Thanks for help me</p>\n<p>I have this configuration in the app project.\n<a href=\"https://i.stack.imgur.com/jCtB7.png\" rel=\"nofollow noreferrer\">app configuration</a>\n<a href=\"https://i.stack.imgur.com/90vIf.png\" rel=\"nofollow noreferrer\">app configuration</a></p>\n"},{"tags":["java","spring","spring-boot","log4j","logback"],"owner":{"account_id":2664143,"reputation":955,"user_id":2303101,"accept_rate":84,"display_name":"Programmer1994"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699901325,"creation_date":1699901325,"question_id":77476165,"body_markdown":"In log4j you can set the property &quot;follow=true&quot; on a logger to make sure the logs are send to a new version of e.g. System.out.\r\n\r\nIs there an alternative when using logback?\r\n\r\nI&#39;m trying to follow the javadoc of OutputCaptureExtension.java \r\n\r\n    To reliably capture output from Log4j2, set the follow attribute \r\n    of the console appender to true:\r\n      &lt;Appenders&gt;\r\n          &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot; follow=&quot;true&quot;&gt;\r\n              ...\r\n          &lt;/Console&gt;\r\n       &lt;/Appenders&gt;\r\n  ","title":"Follow=true alternative for logback logger","body":"<p>In log4j you can set the property &quot;follow=true&quot; on a logger to make sure the logs are send to a new version of e.g. System.out.</p>\n<p>Is there an alternative when using logback?</p>\n<p>I'm trying to follow the javadoc of OutputCaptureExtension.java</p>\n<pre><code>To reliably capture output from Log4j2, set the follow attribute \nof the console appender to true:\n  &lt;Appenders&gt;\n      &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot; follow=&quot;true&quot;&gt;\n          ...\n      &lt;/Console&gt;\n   &lt;/Appenders&gt;\n</code></pre>\n"},{"tags":["java","coding-style"],"comments":[{"owner":{"display_name":"user177800"},"score":1,"creation_date":1435776100,"post_id":31169167,"comment_id":50346194,"body_markdown":"`Java` is not `C` so any comparisons are moot, this is like asking why strawberries have their seeds on the outside when all other fruit have them on the inside. equivalency fallacy; Java syntax looks like C so it should be exactly like C which is false.","body":"<code>Java</code> is not <code>C</code> so any comparisons are moot, this is like asking why strawberries have their seeds on the outside when all other fruit have them on the inside. equivalency fallacy; Java syntax looks like C so it should be exactly like C which is false."},{"owner":{"account_id":97977,"reputation":3621,"user_id":265487,"display_name":"Droj"},"score":7,"creation_date":1435776345,"post_id":31169167,"comment_id":50346344,"body_markdown":"...except that in this case a _person_ made the decision, which implies there was some reason for it. Just curious if there is a reason, or if it was completely arbitrary because &quot;Java is not C&quot;.","body":"...except that in this case a <i>person</i> made the decision, which implies there was some reason for it. Just curious if there is a reason, or if it was completely arbitrary because &quot;Java is not C&quot;."},{"owner":{"account_id":6115978,"reputation":2219,"user_id":4771017,"accept_rate":75,"display_name":"CubeJockey"},"score":1,"creation_date":1435776392,"post_id":31169167,"comment_id":50346365,"body_markdown":"The conversation should just end following &quot;_Java coding conventions say to._&quot; unfortunately that&#39;s all there is to it.","body":"The conversation should just end following &quot;<i>Java coding conventions say to.</i>&quot; unfortunately that&#39;s all there is to it."},{"owner":{"account_id":5152070,"reputation":1918,"user_id":4126391,"accept_rate":75,"display_name":"childofsoong"},"score":0,"creation_date":1435776505,"post_id":31169167,"comment_id":50346421,"body_markdown":"Well, it&#39;s valid to talk about C in respect to the fact that Java&#39;s syntax is HEAVILY based on C&#39;s, but, yes, it will just come down to asking whoever wrote the coding conventions, or trying to find some documentation of their rationale from when the decision was made.","body":"Well, it&#39;s valid to talk about C in respect to the fact that Java&#39;s syntax is HEAVILY based on C&#39;s, but, yes, it will just come down to asking whoever wrote the coding conventions, or trying to find some documentation of their rationale from when the decision was made."},{"owner":{"account_id":196355,"reputation":9114,"user_id":439751,"accept_rate":75,"display_name":"James"},"score":0,"creation_date":1435777667,"post_id":31169167,"comment_id":50347149,"body_markdown":"It is probably becuase someone learned to code with an IDE that auto formatted the code in that way. Then they got used to it.","body":"It is probably becuase someone learned to code with an IDE that auto formatted the code in that way. Then they got used to it."},{"owner":{"account_id":1431154,"reputation":8400,"user_id":1353549,"accept_rate":73,"display_name":"akim"},"score":0,"creation_date":1611923511,"post_id":31169167,"comment_id":116612218,"body_markdown":"The assertion &quot;It&#39;s the same syntax as casts in C, which never have a space after them&quot; is plain wrong.  C/C++ don&#39;t care about spaces, just as Java.  There is nothing wrong with spaces with casts, and actually, for instance, the GNU Coding Standards ask for that space.  Besides &quot;except that in this case a person made the decision&quot; does not make sense either: even the syntax of the language comes from people who made decisions.","body":"The assertion &quot;It&#39;s the same syntax as casts in C, which never have a space after them&quot; is plain wrong.  C/C++ don&#39;t care about spaces, just as Java.  There is nothing wrong with spaces with casts, and actually, for instance, the GNU Coding Standards ask for that space.  Besides &quot;except that in this case a person made the decision&quot; does not make sense either: even the syntax of the language comes from people who made decisions."}],"answers":[{"tags":[],"owner":{"account_id":1573687,"reputation":7830,"user_id":4945535,"accept_rate":62,"display_name":"user140547"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1435777375,"creation_date":1435777375,"answer_id":31169578,"question_id":31169167,"body_markdown":"Well in [Java Language Specification &quot;Expressions&quot;][1] cast expressions do not belong to &quot;15.15 Unary Operators&quot;, but have an own subtitle &quot;15.16 Cast Expressions&quot;. It is primarly not refered to as cast *operator*, but cast *expression* and the spec says that &quot;the parentheses and the type they contain *are sometimes called* the cast operator.&quot;\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.16","title":"Java coding conventions: what is the rationale for a space after a cast?","body":"<p>Well in <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.16\" rel=\"nofollow\">Java Language Specification \"Expressions\"</a> cast expressions do not belong to \"15.15 Unary Operators\", but have an own subtitle \"15.16 Cast Expressions\". It is primarly not refered to as cast <em>operator</em>, but cast <em>expression</em> and the spec says that \"the parentheses and the type they contain <em>are sometimes called</em> the cast operator.\"</p>\n"},{"tags":[],"owner":{"account_id":5174533,"reputation":12742,"user_id":4142130,"display_name":"Hoopje"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1435782462,"creation_date":1435782462,"answer_id":31171033,"question_id":31169167,"body_markdown":"The document you link to was written in 1997 and makes the impression of being a document about C coding conventions (for some project or company), translated to Java in a haste. Many of the constructs which are &quot;not recommended&quot; according to the document are actually forbidden by the Java syntax.\r\n\r\nThere are a few coding conventions which are ubiquitous in Java programs, in particular with respect to the naming of classes and interfaces (`CamelCaseNouns`), methods (`useCamelCaseVerbs`), variables (`camelCaseNouns`) and constants (`CAPITALS`). But other than that, most projects define their own conventions on where to place parentheses and spaces, how much indenting to use, how many empty lines to put between methods, etc. Be consistent within a project, but otherwise use conventions that you (and the other people working on the project) feel most confortable with. If other people do not like your conventions, they can use any of the numerous formatting tools to transform code to their own taste automatically.","title":"Java coding conventions: what is the rationale for a space after a cast?","body":"<p>The document you link to was written in 1997 and makes the impression of being a document about C coding conventions (for some project or company), translated to Java in a haste. Many of the constructs which are \"not recommended\" according to the document are actually forbidden by the Java syntax.</p>\n\n<p>There are a few coding conventions which are ubiquitous in Java programs, in particular with respect to the naming of classes and interfaces (<code>CamelCaseNouns</code>), methods (<code>useCamelCaseVerbs</code>), variables (<code>camelCaseNouns</code>) and constants (<code>CAPITALS</code>). But other than that, most projects define their own conventions on where to place parentheses and spaces, how much indenting to use, how many empty lines to put between methods, etc. Be consistent within a project, but otherwise use conventions that you (and the other people working on the project) feel most confortable with. If other people do not like your conventions, they can use any of the numerous formatting tools to transform code to their own taste automatically.</p>\n"},{"tags":[],"owner":{"account_id":310660,"reputation":461,"user_id":623763,"display_name":"nmatt"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1699901185,"creation_date":1592823316,"answer_id":62512830,"question_id":31169167,"body_markdown":"My personal rationale:\r\n\r\n1. In the context of method-call expressions, the argument list binds stronger than a cast, therefore it makes sense to write\r\n    \r\n    ```\r\n    (foo) method(bar)\r\n    ```\r\n    \r\n    instead of\r\n\r\n    ```\r\n    (foo)method(bar)\r\n    ```\r\n    given the syntactical similarity of both sides.\r\n\r\n2) There are other contexts where not having a space would arguably look weird:\r\n\r\n    ```&lt;!-- language: lang-none --&gt;\r\n    (int)-(a * b)\r\n    ```\r\n\r\n    This is actually more relevant in C, where due to typedefs you    may not be able to tell immediately whether the left-hand side is a cast.\r\n\r\n3) Casts first and foremost operate on the type of the expression, and on the value only as a side effect of the type conversion, if at all. In that sense casts operate on a higher level than regular unary operators. It therefore seems appropriate to indicate that fact by visually setting them off from the expression they operate on.\r\n","title":"Java coding conventions: what is the rationale for a space after a cast?","body":"<p>My personal rationale:</p>\n<ol>\n<li><p>In the context of method-call expressions, the argument list binds stronger than a cast, therefore it makes sense to write</p>\n<pre><code>(foo) method(bar)\n</code></pre>\n<p>instead of</p>\n<pre><code>(foo)method(bar)\n</code></pre>\n<p>given the syntactical similarity of both sides.</p>\n</li>\n</ol>\n<ol start=\"2\">\n<li><p>There are other contexts where not having a space would arguably look weird:</p>\n<pre><code>(int)-(a * b)\n</code></pre>\n<p>This is actually more relevant in C, where due to typedefs you    may not be able to tell immediately whether the left-hand side is a cast.</p>\n</li>\n<li><p>Casts first and foremost operate on the type of the expression, and on the value only as a side effect of the type conversion, if at all. In that sense casts operate on a higher level than regular unary operators. It therefore seems appropriate to indicate that fact by visually setting them off from the expression they operate on.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":97977,"reputation":3621,"user_id":265487,"display_name":"Droj"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4953,"favorite_count":0,"down_vote_count":2,"up_vote_count":13,"answer_count":3,"score":11,"last_activity_date":1699901185,"creation_date":1435775998,"question_id":31169167,"body_markdown":"I am just wondering if anyone is aware of the _**rationale**_ behind this particular item in the standard Java coding conventions. The [Java coding conventions][1] say to put a space after a cast, like this:\r\n\r\n    Object myObj = (Object) someThing;\r\n                           ^\r\nIt&#39;s the same syntax as casts in C, which never have a space after them:\r\n\r\n    Object myObj = (Object)someThing;\r\n                           ^\r\n\r\nI thought that this was because the cast is a unary operator. Putting a space there would be like doing this:\r\n\r\n    int x = ++ y;\r\n    while (0 &lt; ++ x) { ... }\r\n\r\n...which is not something you usually see:\r\n\r\n    int x = ++y;\r\n    while (0 &lt; ++x) { ... }\r\n\r\n\r\nThis seems to be unique to Java, so if anyone has any insight, I&#39;d love to hear it.\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/codeconventions-150003.pdf","title":"Java coding conventions: what is the rationale for a space after a cast?","body":"<p>I am just wondering if anyone is aware of the <em><strong>rationale</strong></em> behind this particular item in the standard Java coding conventions. The <a href=\"http://www.oracle.com/technetwork/java/codeconventions-150003.pdf\" rel=\"noreferrer\">Java coding conventions</a> say to put a space after a cast, like this:</p>\n\n<pre><code>Object myObj = (Object) someThing;\n                       ^\n</code></pre>\n\n<p>It's the same syntax as casts in C, which never have a space after them:</p>\n\n<pre><code>Object myObj = (Object)someThing;\n                       ^\n</code></pre>\n\n<p>I thought that this was because the cast is a unary operator. Putting a space there would be like doing this:</p>\n\n<pre><code>int x = ++ y;\nwhile (0 &lt; ++ x) { ... }\n</code></pre>\n\n<p>...which is not something you usually see:</p>\n\n<pre><code>int x = ++y;\nwhile (0 &lt; ++x) { ... }\n</code></pre>\n\n<p>This seems to be unique to Java, so if anyone has any insight, I'd love to hear it.</p>\n"},{"tags":["java","garbage-collection","monitoring","memory-management"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1345058438,"post_id":1058991,"comment_id":15964346,"body_markdown":"monitor with jvisualvm - gives better statistics.","body":"monitor with jvisualvm - gives better statistics."}],"answers":[{"tags":[],"owner":{"account_id":41696,"reputation":4770,"user_id":121275,"accept_rate":50,"display_name":"amischiefr"},"down_vote_count":3,"up_vote_count":73,"is_accepted":true,"score":70,"last_activity_date":1586858703,"creation_date":1246290395,"answer_id":1059022,"question_id":1058991,"body_markdown":"If you want to really look at what is going on in the VM memory you should use a good tool like [VisualVM][1].  This is Free Software and it&#39;s a great way to see what is going on.\r\n\r\nNothing is really &quot;wrong&quot; with explicit `gc()` calls. However, remember that when you call `gc()` you are &quot;suggesting&quot; that the garbage collector run. There is no guarantee that it will run at the exact time you run that command.  \r\n\r\n  [1]: https://visualvm.github.io/","title":"How to monitor Java memory usage?","body":"<p>If you want to really look at what is going on in the VM memory you should use a good tool like <a href=\"https://visualvm.github.io/\" rel=\"noreferrer\">VisualVM</a>.  This is Free Software and it's a great way to see what is going on.</p>\n\n<p>Nothing is really \"wrong\" with explicit <code>gc()</code> calls. However, remember that when you call <code>gc()</code> you are \"suggesting\" that the garbage collector run. There is no guarantee that it will run at the exact time you run that command.  </p>\n"},{"tags":[],"owner":{"account_id":28947,"reputation":90759,"user_id":77779,"accept_rate":89,"display_name":"Yishai"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1246290478,"creation_date":1246290478,"answer_id":1059027,"question_id":1058991,"body_markdown":"I would say that the consultant is right in the theory, and you are right in practice. As the [saying goes][1]:\r\n\r\n&gt; In theory, theory and practice are the same. In practice, they are not.\r\n\r\nThe Java spec says that System.gc suggests to call garbage collection. In practice, it just spawns a thread and runs right away on the Sun JVM.\r\n\r\nAlthough in theory you could be messing up some finely tuned JVM implementation of garbage collection, unless you are writing generic code intended to be deployed on any JVM out there, don&#39;t worry about it. If it works for you, do it.\r\n\r\n\r\n  [1]: http://www.quoteworld.org/quotes/1305","title":"How to monitor Java memory usage?","body":"<p>I would say that the consultant is right in the theory, and you are right in practice. As the <a href=\"http://www.quoteworld.org/quotes/1305\" rel=\"noreferrer\">saying goes</a>:</p>\n\n<blockquote>\n  <p>In theory, theory and practice are the same. In practice, they are not.</p>\n</blockquote>\n\n<p>The Java spec says that System.gc suggests to call garbage collection. In practice, it just spawns a thread and runs right away on the Sun JVM.</p>\n\n<p>Although in theory you could be messing up some finely tuned JVM implementation of garbage collection, unless you are writing generic code intended to be deployed on any JVM out there, don't worry about it. If it works for you, do it.</p>\n"},{"tags":[],"owner":{"account_id":24810,"reputation":44144,"user_id":63309,"accept_rate":70,"display_name":"Tom"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1699900914,"creation_date":1246290483,"answer_id":1059028,"question_id":1058991,"body_markdown":"## JMX &amp; JConsole\r\n\r\nHave you tried JMX?\r\n\r\n[*Using JConsole to Monitor Applications*][1] by Mandy Chung, 2004\r\n\r\n\r\n[![alt text][2]][2]  \r\n&lt;sub&gt;(source: [sun.com](http://java.sun.com/developer/technicalArticles/J2SE/jconsole/HeapMemory.jpg))&lt;/sub&gt;  \r\n\r\n\r\n  [1]: https://www.oracle.com/technical-resources/articles/java/jconsole.html\r\n  [2]: https://i.stack.imgur.com/g3xHb.jpg","title":"How to monitor Java memory usage?","body":"<h2>JMX &amp; JConsole</h2>\n<p>Have you tried JMX?</p>\n<p><a href=\"https://www.oracle.com/technical-resources/articles/java/jconsole.html\" rel=\"nofollow noreferrer\"><em>Using JConsole to Monitor Applications</em></a> by Mandy Chung, 2004</p>\n<p><a href=\"https://i.stack.imgur.com/g3xHb.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g3xHb.jpg\" alt=\"alt text\" /></a><br />\n<sub>(source: <a href=\"http://java.sun.com/developer/technicalArticles/J2SE/jconsole/HeapMemory.jpg\" rel=\"nofollow noreferrer\">sun.com</a>)</sub></p>\n"},{"tags":[],"owner":{"account_id":18182,"reputation":33673,"user_id":41423,"accept_rate":100,"display_name":"Nick Holt"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1618494377,"creation_date":1246290902,"answer_id":1059071,"question_id":1058991,"body_markdown":"Take a look at the JVM args: [http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp#DebuggingOptions][1]\r\n\r\n&gt; XX:-PrintGC \tPrint messages at garbage collection. Manageable.\r\n&gt; \r\n&gt; -XX:-PrintGCDetails \tPrint more details at garbage collection.\r\n&gt; Manageable. (Introduced in 1.4.0.)\r\n&gt; \r\n&gt; -XX:-PrintGCTimeStamps \tPrint timestamps at garbage collection.\r\n&gt; Manageable (Introduced in 1.4.0.)\r\n&gt; \r\n&gt; -XX:-PrintTenuringDistribution \tPrint tenuring age information.\r\n\r\n\r\nWhile you&#39;re not going to upset the JVM with explicit calls to `System.gc()` they may not have the effect you are expecting.  To really understand what&#39;s going on with the memory in a JVM with read anything and everything the Brian Goetz writes.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp#DebuggingOptions","title":"How to monitor Java memory usage?","body":"<p>Take a look at the JVM args: <a href=\"http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp#DebuggingOptions\" rel=\"nofollow noreferrer\">http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp#DebuggingOptions</a></p>\n<blockquote>\n<p>XX:-PrintGC   Print messages at garbage collection. Manageable.</p>\n<p>-XX:-PrintGCDetails   Print more details at garbage collection.\nManageable. (Introduced in 1.4.0.)</p>\n<p>-XX:-PrintGCTimeStamps    Print timestamps at garbage collection.\nManageable (Introduced in 1.4.0.)</p>\n<p>-XX:-PrintTenuringDistribution    Print tenuring age information.</p>\n</blockquote>\n<p>While you're not going to upset the JVM with explicit calls to <code>System.gc()</code> they may not have the effect you are expecting.  To really understand what's going on with the memory in a JVM with read anything and everything the Brian Goetz writes.</p>\n"},{"tags":[],"owner":{"account_id":44453,"reputation":41,"user_id":130525,"display_name":"Zoukaye"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1246291049,"creation_date":1246291049,"answer_id":1059082,"question_id":1058991,"body_markdown":"If you use java 1.5, you can look at ManagementFactory.getMemoryMXBean() which give you\r\nnumbers on all kinds of memory. heap and non-heap, perm-gen.\r\n\r\nA good example can be found there\r\nhttp://www.freshblurbs.com/explaining-java-lang-outofmemoryerror-permgen-space\r\n\r\n","title":"How to monitor Java memory usage?","body":"<p>If you use java 1.5, you can look at ManagementFactory.getMemoryMXBean() which give you\nnumbers on all kinds of memory. heap and non-heap, perm-gen.</p>\n\n<p>A good example can be found there\n<a href=\"http://www.freshblurbs.com/explaining-java-lang-outofmemoryerror-permgen-space\" rel=\"nofollow noreferrer\">http://www.freshblurbs.com/explaining-java-lang-outofmemoryerror-permgen-space</a></p>\n"},{"tags":[],"owner":{"account_id":5022,"reputation":13852,"user_id":7867,"accept_rate":70,"display_name":"Mr. Shiny and New 安宇"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1455640067,"creation_date":1246291182,"answer_id":1059092,"question_id":1058991,"body_markdown":"There are tools that let you monitor the VM&#39;s memory usage.  The [VM can expose memory statistics using JMX][1].  You can also [print GC statistics][2] to see how the memory is performing over time.  \r\n\r\nInvoking System.gc() can harm the GC&#39;s performance because objects will be prematurely moved from the new to old generations, and weak references will be cleared prematurely.  This can result in decreased memory efficiency, longer GC times, and decreased cache hits (for caches that use weak refs).  I agree with your consultant: System.gc() is bad.  I&#39;d go as far as to [disable it][3] using the command line switch.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/6/docs/technotes/guides/management/jconsole.html\r\n  [2]: http://java.sun.com/docs/hotspot/gc5.0/gc_tuning_5.html\r\n  [3]: http://java.sun.com/docs/hotspot/gc5.0/gc_tuning_5.html#1.1.Other%20Considerations|outline","title":"How to monitor Java memory usage?","body":"<p>There are tools that let you monitor the VM's memory usage.  The <a href=\"https://docs.oracle.com/javase/6/docs/technotes/guides/management/jconsole.html\" rel=\"noreferrer\">VM can expose memory statistics using JMX</a>.  You can also <a href=\"http://java.sun.com/docs/hotspot/gc5.0/gc_tuning_5.html\" rel=\"noreferrer\">print GC statistics</a> to see how the memory is performing over time.  </p>\n\n<p>Invoking System.gc() can harm the GC's performance because objects will be prematurely moved from the new to old generations, and weak references will be cleared prematurely.  This can result in decreased memory efficiency, longer GC times, and decreased cache hits (for caches that use weak refs).  I agree with your consultant: System.gc() is bad.  I'd go as far as to <a href=\"http://java.sun.com/docs/hotspot/gc5.0/gc_tuning_5.html#1.1.Other%20Considerations|outline\" rel=\"noreferrer\">disable it</a> using the command line switch.</p>\n"},{"tags":[],"owner":{"account_id":10340,"reputation":55904,"user_id":19479,"accept_rate":69,"display_name":"Steve B."},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1246291817,"creation_date":1246291403,"answer_id":1059109,"question_id":1058991,"body_markdown":"Explicitly running System.gc() on a production system is a terrible idea. If the memory gets to any size at all, the entire system can freeze while a full GC is running. On a multi-gigabyte-sized server, this can easily be very noticeable, depending on how the jvm is configured, and how much headroom it has, etc etc - I&#39;ve seen pauses of more than 30 seconds. \r\n\r\nAnother issue is that by explicitly calling GC you&#39;re not actually monitoring how the JVM is running the GC, you&#39;re actually altering it - depending on how you&#39;ve configured the JVM, it&#39;s  going to garbage collect when appropriate, and usually incrementally (It doesn&#39;t just run a full GC when it runs out of memory). What you&#39;ll be printing out will be nothing like what the JVM will do on it&#39;s own - for one thing you&#39;ll probably see fewer automatic / incremental GC&#39;s as you&#39;ll be clearing the memory manually. \r\n\r\nAs Nick Holt&#39;s post points out, options to print GC activity already exist as JVM flags.\r\n\r\nYou could have a thread that just prints out free and available at reasonable intervals, this will show you actual mem useage.","title":"How to monitor Java memory usage?","body":"<p>Explicitly running System.gc() on a production system is a terrible idea. If the memory gets to any size at all, the entire system can freeze while a full GC is running. On a multi-gigabyte-sized server, this can easily be very noticeable, depending on how the jvm is configured, and how much headroom it has, etc etc - I've seen pauses of more than 30 seconds. </p>\n\n<p>Another issue is that by explicitly calling GC you're not actually monitoring how the JVM is running the GC, you're actually altering it - depending on how you've configured the JVM, it's  going to garbage collect when appropriate, and usually incrementally (It doesn't just run a full GC when it runs out of memory). What you'll be printing out will be nothing like what the JVM will do on it's own - for one thing you'll probably see fewer automatic / incremental GC's as you'll be clearing the memory manually. </p>\n\n<p>As Nick Holt's post points out, options to print GC activity already exist as JVM flags.</p>\n\n<p>You could have a thread that just prints out free and available at reasonable intervals, this will show you actual mem useage.</p>\n"},{"tags":[],"owner":{"account_id":36479,"reputation":329,"user_id":104072,"display_name":"Aakash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1246302894,"creation_date":1246302894,"answer_id":1059973,"question_id":1058991,"body_markdown":"As has been suggested, try VisualVM to get a basic view.\r\n\r\nYou can also use Eclipse MAT, to do a more detailed memory analysis.\r\n\r\nIt&#39;s ok to do a System.gc() as long as you dont depend on it, for the correctness of your program.","title":"How to monitor Java memory usage?","body":"<p>As has been suggested, try VisualVM to get a basic view.</p>\n\n<p>You can also use Eclipse MAT, to do a more detailed memory analysis.</p>\n\n<p>It's ok to do a System.gc() as long as you dont depend on it, for the correctness of your program.</p>\n"},{"tags":[],"owner":{"account_id":38490,"reputation":8552,"user_id":110478,"accept_rate":63,"display_name":"Pablojim"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1246305685,"creation_date":1246305685,"answer_id":1060197,"question_id":1058991,"body_markdown":"If you like a nice way to do this from the command line use jstat:\r\n\r\n[http://java.sun.com/j2se/1.5.0/docs/tooldocs/share/jstat.html][1]\r\n\r\nIt gives raw information at configurable intervals which is very useful for logging and graphing purposes.\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/tooldocs/share/jstat.html","title":"How to monitor Java memory usage?","body":"<p>If you like a nice way to do this from the command line use jstat:</p>\n\n<p><a href=\"http://java.sun.com/j2se/1.5.0/docs/tooldocs/share/jstat.html\" rel=\"noreferrer\">http://java.sun.com/j2se/1.5.0/docs/tooldocs/share/jstat.html</a></p>\n\n<p>It gives raw information at configurable intervals which is very useful for logging and graphing purposes.</p>\n"},{"tags":[],"owner":{"account_id":44479,"reputation":2046,"user_id":130598,"accept_rate":100,"display_name":"bgw"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1246313043,"creation_date":1246313043,"answer_id":1060809,"question_id":1058991,"body_markdown":"The problem with system.gc, is that the JVM already automatically allocates time to the garbage collector based on memory usage.\r\n\r\nHowever, if you are, for instance, working in a very memory limited condition, like a mobile device, System.gc allows you to manually allocate more time towards this garbage collection, but at the cost of cpu time (but, as you said, you aren&#39;t that concerned about performance issues of gc).\r\n\r\nBest practice would *probably* be to only use it where you might be doing large amounts of deallocation (like flushing a large array).\r\n\r\nAll considered, since you are simply concerned about memory usage, feel free to call gc, or, better yet, see if it makes much of a memory difference in your case, and then decide.","title":"How to monitor Java memory usage?","body":"<p>The problem with system.gc, is that the JVM already automatically allocates time to the garbage collector based on memory usage.</p>\n\n<p>However, if you are, for instance, working in a very memory limited condition, like a mobile device, System.gc allows you to manually allocate more time towards this garbage collection, but at the cost of cpu time (but, as you said, you aren't that concerned about performance issues of gc).</p>\n\n<p>Best practice would <em>probably</em> be to only use it where you might be doing large amounts of deallocation (like flushing a large array).</p>\n\n<p>All considered, since you are simply concerned about memory usage, feel free to call gc, or, better yet, see if it makes much of a memory difference in your case, and then decide.</p>\n"},{"tags":[],"owner":{"account_id":52375,"reputation":6473,"user_id":156522,"accept_rate":83,"display_name":"vsingh"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1286400430,"creation_date":1286400430,"answer_id":3877030,"question_id":1058991,"body_markdown":"Peek into what is happening inside tomcat through Visual VM.\r\nhttp://www.skill-guru.com/blog/2010/10/05/increasing-permgen-size-in-your-server/\r\n![alt text][1]\r\n\r\n\r\n![alt text][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/rlf5g.png","title":"How to monitor Java memory usage?","body":"<p>Peek into what is happening inside tomcat through Visual VM.\n<a href=\"http://www.skill-guru.com/blog/2010/10/05/increasing-permgen-size-in-your-server/\" rel=\"noreferrer\">http://www.skill-guru.com/blog/2010/10/05/increasing-permgen-size-in-your-server/</a>\n<img src=\"https://i.stack.imgur.com/rlf5g.png\" alt=\"alt text\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/rlf5g.png\" alt=\"alt text\"></p>\n"},{"tags":[],"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1345058093,"creation_date":1345058093,"answer_id":11975683,"question_id":1058991,"body_markdown":"If you use the JMX provided history of GC runs you can use the same before/after numbers, you just dont have to force a GC. \r\n\r\nYou just need to keep in mind that those GC runs (typically one for old and one for new generation) are not on regular intervalls, so you need to extract the starttime as well for plotting (or you plot against a sequence number, for most practical purposes that would be enough for plotting). \r\n\r\nFor example on Oracle HotSpot VM with ParNewGC, there is a JMX MBean called `java.lang:type=GarbageCollector,name=PS Scavenge`, it has a attribute LastGCInfo, it returns a CompositeData of the last YG scavenger run. It is recorded with `duration`, absolute `startTime` and `memoryUsageBefore` and `memoryUsageAfter`.\r\n\r\nJust use a timer to read that attribute. Whenever a new startTime shows up you know that it describes a new GC event, you extract the memory information and keep polling for the next update. (Not sure if a `AttributeChangeNotification` somehow can be used.)\r\n\r\nTip: in your timer you might measure the distance to the last GC run, and if that is too long for the resulution of your plotting, you could invoke System.gc() conditionally. But I would not do that in a OLTP instance.\r\n","title":"How to monitor Java memory usage?","body":"<p>If you use the JMX provided history of GC runs you can use the same before/after numbers, you just dont have to force a GC. </p>\n\n<p>You just need to keep in mind that those GC runs (typically one for old and one for new generation) are not on regular intervalls, so you need to extract the starttime as well for plotting (or you plot against a sequence number, for most practical purposes that would be enough for plotting). </p>\n\n<p>For example on Oracle HotSpot VM with ParNewGC, there is a JMX MBean called <code>java.lang:type=GarbageCollector,name=PS Scavenge</code>, it has a attribute LastGCInfo, it returns a CompositeData of the last YG scavenger run. It is recorded with <code>duration</code>, absolute <code>startTime</code> and <code>memoryUsageBefore</code> and <code>memoryUsageAfter</code>.</p>\n\n<p>Just use a timer to read that attribute. Whenever a new startTime shows up you know that it describes a new GC event, you extract the memory information and keep polling for the next update. (Not sure if a <code>AttributeChangeNotification</code> somehow can be used.)</p>\n\n<p>Tip: in your timer you might measure the distance to the last GC run, and if that is too long for the resulution of your plotting, you could invoke System.gc() conditionally. But I would not do that in a OLTP instance.</p>\n"},{"tags":[],"owner":{"account_id":1141212,"reputation":5844,"user_id":1125055,"accept_rate":50,"display_name":"Felix"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1406732510,"creation_date":1404412176,"answer_id":24560933,"question_id":1058991,"body_markdown":"You can take a look at [stagemonitor][2]. It is a open source java (web) application performance monitor. It captures response time metrics, JVM metrics, request details (including a call stack captured by the request profiler) and more. The overhead is very low.\r\n\r\nOptionally, you can use the great timeseries database graphite with it to store a long history of datapoints that you can look at with fancy dashboards.\r\n\r\nExample:\r\n![JVM Memory Dashboard][1]\r\n\r\nTake a look at the [project website][2] to see screenshots, feature descriptions and documentation.\r\n\r\nNote: I am the developer of stagemonitor\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/WFzDk.png\r\n  [2]: http://www.stagemonitor.org/","title":"How to monitor Java memory usage?","body":"<p>You can take a look at <a href=\"http://www.stagemonitor.org/\">stagemonitor</a>. It is a open source java (web) application performance monitor. It captures response time metrics, JVM metrics, request details (including a call stack captured by the request profiler) and more. The overhead is very low.</p>\n\n<p>Optionally, you can use the great timeseries database graphite with it to store a long history of datapoints that you can look at with fancy dashboards.</p>\n\n<p>Example:\n<img src=\"https://i.stack.imgur.com/WFzDk.png\" alt=\"JVM Memory Dashboard\"></p>\n\n<p>Take a look at the <a href=\"http://www.stagemonitor.org/\">project website</a> to see screenshots, feature descriptions and documentation.</p>\n\n<p>Note: I am the developer of stagemonitor</p>\n"},{"tags":[],"owner":{"account_id":9282226,"reputation":11,"user_id":6893133,"display_name":"norber_san"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1591780445,"creation_date":1591780445,"answer_id":62299895,"question_id":1058991,"body_markdown":"About System.gc()… I just read in Oracle&#39;s documentation the following sentence [here](https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/considerations.html#sthref63)\r\n\r\n&gt; The performance effect of explicit garbage collections can be measured by disabling them using the flag -XX:+DisableExplicitGC, which causes the VM to ignore calls to System.gc().\r\n\r\nIf your VM vendor and version supports that flag you can run your code with and without it and compare Performance.\r\n\r\nAlso note the previous quoted sentence is preceded by this one:\r\n\r\n&gt; This can force a major collection to be done when it may not be necessary (for example, when a minor collection would suffice), and so in general should be avoided. \r\n\r\n\r\n\r\n\r\n\r\n ","title":"How to monitor Java memory usage?","body":"<p>About System.gc()… I just read in Oracle's documentation the following sentence <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/considerations.html#sthref63\" rel=\"nofollow noreferrer\">here</a></p>\n\n<blockquote>\n  <p>The performance effect of explicit garbage collections can be measured by disabling them using the flag -XX:+DisableExplicitGC, which causes the VM to ignore calls to System.gc().</p>\n</blockquote>\n\n<p>If your VM vendor and version supports that flag you can run your code with and without it and compare Performance.</p>\n\n<p>Also note the previous quoted sentence is preceded by this one:</p>\n\n<blockquote>\n  <p>This can force a major collection to be done when it may not be necessary (for example, when a minor collection would suffice), and so in general should be avoided. </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2888020,"reputation":538,"user_id":2477423,"display_name":"tdaget"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1606928162,"creation_date":1606928162,"answer_id":65112619,"question_id":1058991,"body_markdown":"[JavaMelody][1] might be a solution for your need.\r\n\r\nDeveloped for Java EE applications, this tool measure and build report about the real operation of your applications on any environments. It&#39;s free and open-source and easy to integrate into applications with some history, no database nor profiling, really lightweight.\r\n\r\n\r\n  [1]: https://github.com/javamelody/javamelody","title":"How to monitor Java memory usage?","body":"<p><a href=\"https://github.com/javamelody/javamelody\" rel=\"nofollow noreferrer\">JavaMelody</a> might be a solution for your need.</p>\n<p>Developed for Java EE applications, this tool measure and build report about the real operation of your applications on any environments. It's free and open-source and easy to integrate into applications with some history, no database nor profiling, really lightweight.</p>\n"}],"owner":{"account_id":23734,"reputation":20692,"user_id":59704,"accept_rate":92,"display_name":"Oleg Pavliv"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":228096,"favorite_count":0,"down_vote_count":0,"up_vote_count":79,"accepted_answer_id":1059022,"answer_count":15,"score":79,"last_activity_date":1699900914,"creation_date":1246290079,"question_id":1058991,"body_markdown":"We have a j2ee application running on Jboss and we want to monitor its memory usage. Currently we use the following code \r\n   \r\n        System.gc();\r\n        Runtime rt = Runtime.getRuntime();\r\n        long usedMB = (rt.totalMemory() - rt.freeMemory()) / 1024 / 1024;\r\n        logger.information(this, &quot;memory usage&quot; + usedMB);\r\n\r\n\r\nThis code works fine. That means it shows memory curve which corresponds to reality. When we create a big xml file from a DB a curve goes up, after the extraction is finished it goes down.  \r\n\r\n![alt text][1]\r\n\r\nA consultant told us that calling gc() explicitly is wrong, &quot;let jvm decide when to run gc&quot;. Basically his arguments were the same as [disscussed here][2]. \r\nBut I still don&#39;t understand:\r\n\r\n - how can I have my memory usage curve?\r\n - what is wrong with the explicit gc()? I don&#39;t care about small performance issues which can happen with explicit gc() and which I would estimate in 1-3%. What I need is memory and thread monitor which helps me in analysis of our system on customer site.\r\n\r\n\r\n  [1]: https://i6.photobucket.com/albums/y231/oleg_pavliv/hc.jpg\r\n  [2]: https://stackoverflow.com/questions/66540/system-gc-in-java","title":"How to monitor Java memory usage?","body":"<p>We have a j2ee application running on Jboss and we want to monitor its memory usage. Currently we use the following code </p>\n\n<pre><code>    System.gc();\n    Runtime rt = Runtime.getRuntime();\n    long usedMB = (rt.totalMemory() - rt.freeMemory()) / 1024 / 1024;\n    logger.information(this, \"memory usage\" + usedMB);\n</code></pre>\n\n<p>This code works fine. That means it shows memory curve which corresponds to reality. When we create a big xml file from a DB a curve goes up, after the extraction is finished it goes down.  </p>\n\n<p><img src=\"https://i6.photobucket.com/albums/y231/oleg_pavliv/hc.jpg\" alt=\"alt text\"></p>\n\n<p>A consultant told us that calling gc() explicitly is wrong, \"let jvm decide when to run gc\". Basically his arguments were the same as <a href=\"https://stackoverflow.com/questions/66540/system-gc-in-java\">disscussed here</a>. \nBut I still don't understand:</p>\n\n<ul>\n<li>how can I have my memory usage curve?</li>\n<li>what is wrong with the explicit gc()? I don't care about small performance issues which can happen with explicit gc() and which I would estimate in 1-3%. What I need is memory and thread monitor which helps me in analysis of our system on customer site.</li>\n</ul>\n"},{"tags":["java","json","jackson-databind","objectmapper"],"answers":[{"tags":[],"owner":{"account_id":9894605,"reputation":445,"user_id":7326551,"accept_rate":75,"display_name":"Skod"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699900556,"creation_date":1699900556,"answer_id":77476107,"question_id":77475756,"body_markdown":"One way I guess is to use a custom deserializer and do a simple type check:\r\n\r\n```\r\npublic class CustomDeserializer extends StdDeserializer&lt;String&gt; {\r\n\r\n  protected CustomDeserializer() {\r\n    this(null);\r\n  }\r\n\r\n  protected CustomDeserializer(Class&lt;?&gt; vc) {\r\n    super(vc);\r\n  }\r\n\r\n  @Override\r\n  public String deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JacksonException {\r\n    if (p.currentToken() != JsonToken.VALUE_STRING) {\r\n      throw new InvalidFormatException(p, &quot;Expected String type&quot;, p.getValueAsString(), String.class);\r\n    }\r\n    return p.getValueAsString();\r\n  }\r\n}\r\n```\r\n\r\nAnd then use that deserializer in the fields you&#39;d like to check:\r\n```\r\npublic class Data {\r\n  @JsonDeserialize(using = CustomDeserializer.class)\r\n  String id;\r\n}\r\n```","title":"Check type of Json property&#39;s value on converting to Java class","body":"<p>One way I guess is to use a custom deserializer and do a simple type check:</p>\n<pre><code>public class CustomDeserializer extends StdDeserializer&lt;String&gt; {\n\n  protected CustomDeserializer() {\n    this(null);\n  }\n\n  protected CustomDeserializer(Class&lt;?&gt; vc) {\n    super(vc);\n  }\n\n  @Override\n  public String deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JacksonException {\n    if (p.currentToken() != JsonToken.VALUE_STRING) {\n      throw new InvalidFormatException(p, &quot;Expected String type&quot;, p.getValueAsString(), String.class);\n    }\n    return p.getValueAsString();\n  }\n}\n</code></pre>\n<p>And then use that deserializer in the fields you'd like to check:</p>\n<pre><code>public class Data {\n  @JsonDeserialize(using = CustomDeserializer.class)\n  String id;\n}\n</code></pre>\n"}],"owner":{"account_id":29882935,"reputation":1,"user_id":22901268,"display_name":"prince"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699900556,"creation_date":1699896739,"question_id":77475756,"body_markdown":"Let&#39;s say I have the following Json data, here I have the id of type integer, and in Java class the type of id is String.\r\n\r\n\r\n```\r\n{\r\n  &quot;id&quot;: 1,\r\n  &quot;name&quot;: &quot;user1&quot;\r\n}\r\n```\r\n\r\n\r\n```\r\n@lombok.Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\nclass Data {\r\n    String id;\r\n    String name;\r\n}\r\n```\r\n\r\nI want to convert the Json to the that class while strictly checking if the Json property&#39;s value is of same type as the class field.\r\n\r\n\r\n\r\n```\r\nString json = &quot;{\\&quot;id\\&quot;:1,\\&quot;name\\&quot;:\\&quot;user1\\&quot;}&quot;;\r\nObjectMapper objectMapper = new ObjectMapper(new JsonFactory());\r\n\r\nData data = objectMapper.readValue(json, Data.class);\r\nSystem.out.println(data);\r\n```\r\n\r\n`Data(id=1, name=user1)`\r\n\r\nI want that here the conversion shouldn&#39;t happen but it gets converted.","title":"Check type of Json property&#39;s value on converting to Java class","body":"<p>Let's say I have the following Json data, here I have the id of type integer, and in Java class the type of id is String.</p>\n<pre><code>{\n  &quot;id&quot;: 1,\n  &quot;name&quot;: &quot;user1&quot;\n}\n</code></pre>\n<pre><code>@lombok.Data\n@AllArgsConstructor\n@NoArgsConstructor\nclass Data {\n    String id;\n    String name;\n}\n</code></pre>\n<p>I want to convert the Json to the that class while strictly checking if the Json property's value is of same type as the class field.</p>\n<pre><code>String json = &quot;{\\&quot;id\\&quot;:1,\\&quot;name\\&quot;:\\&quot;user1\\&quot;}&quot;;\nObjectMapper objectMapper = new ObjectMapper(new JsonFactory());\n\nData data = objectMapper.readValue(json, Data.class);\nSystem.out.println(data);\n</code></pre>\n<p><code>Data(id=1, name=user1)</code></p>\n<p>I want that here the conversion shouldn't happen but it gets converted.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1699891407,"post_id":77475154,"comment_id":136584719,"body_markdown":"https://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html take a look","body":"<a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency/&hellip;</a> take a look"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1699895497,"post_id":77475154,"comment_id":136585550,"body_markdown":"You presumably mean Perl, not &quot;Pearl.&quot;","body":"You presumably mean Perl, not &quot;Pearl.&quot;"}],"owner":{"account_id":27708141,"reputation":1,"user_id":21151362,"display_name":"JCASTRO13"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1699890891,"answer_count":0,"score":-3,"last_activity_date":1699900222,"creation_date":1699890772,"question_id":77475154,"body_markdown":"I have the following code for the class server of a project in java\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.InputStreamReader;\r\nimport java.io.PrintWriter;\r\nimport java.net.ServerSocket;\r\nimport java.net.Socket;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n\r\npublic class Server {\r\n\t\r\n\tprivate static List&lt;User&gt; userList = new ArrayList&lt;&gt;();\r\n\tprivate static Users userController = new Users();\r\n\tprivate static User user = new User();  \r\n\tprivate static List&lt;Product&gt; productList = new ArrayList&lt;&gt;();\r\n\tprivate static Products productsController = new Products();\r\n\tprivate static int userIdCounter = 1;\r\n    private static int productIdCounter = 1;\r\n\t\r\n    \r\n    public static void main(String[] args) {\r\n\t\ttry {\r\n\t\t\t ServerSocket serverSocket = new ServerSocket(8080);\r\n\t\t\t \r\n\t\t\t while(true) {\r\n                System.out.println(&quot;Servidor activo, esperando mensaje.&quot;);\r\n\t\t\t\tSocket clientSocket = serverSocket.accept();\r\n                 \r\n\t\t\t\tBufferedReader in = new BufferedReader(\r\n\t\t\t\t\tnew InputStreamReader(clientSocket.getInputStream()));\r\n\t\t\t\tPrintWriter out =\r\n\t\t\t\t\tnew PrintWriter(clientSocket.getOutputStream(), true);\r\n\t\t\t \r\n\t\t\t\tString line;\r\n\t                while ((line = in.readLine()) != null) {\r\n\t                    System.out.println(&quot;Recibido en server: &quot; + line);\r\n\t                    out.println(line);\r\n\t                 // Analizar el comando utilizando un switch\r\n\t                    String[] commandParts = line.split(&quot; &quot;);\r\n\t                    String command = commandParts[0].toLowerCase();\r\n\t                    switch(command){\r\n\t                    case &quot;login&quot;:\r\n\t                    \t// Implementa la l&#243;gica para el comando login\r\n\t                    \t userController.login( commandParts[1], commandParts[2]);\r\n                            break;\r\n                        case &quot;logout&quot;:\r\n                        \t clientSocket.close();\r\n            \t\t\t\t System.out.println(&quot;El cliente se ha desconectado.&quot;);\r\n            \t\t\t\t System.out.println(&quot;Ahora se desconectar&#225; el servidor.&quot;);\r\n            \t\t\t\t serverSocket.close();\r\n                            break;\r\n                            //que tengo que hacer en user user para comprobar el user \r\n                        case &quot;adduser&quot;:\r\n\t\t\t\t\t\t  userController.addUser(  user ,commandParts[1], commandParts[2], commandParts[3], commandParts[4], \r\n\t                    \tcommandParts[5], commandParts[6]);    \r\n                            break;\r\n                        case &quot;updateuser&quot;:\r\n                            // Implementa la l&#243;gica para el comando updateUser\r\n\t\t\t\t\t\t\tuserController.updateUser(user, commandParts[1], commandParts[2], commandParts[3], commandParts[4], commandParts[5], commandParts[6]);\r\n                            break;\r\n                        case &quot;removeuser&quot;:\r\n                            userController.removeUser(user, commandParts[1]);\r\n                            break;\r\n                        case &quot;listusers&quot;:\r\n                        \tout.println(&quot;Lista de ususarios: &quot; + userList);\r\n                            break;\r\n                            //aqui tambien el adminUser\r\n\t                    case &quot;addproduct&quot;:Product product =  productsController.addProduct(user,commandParts[1], commandParts[2], commandParts[3], commandParts[4],Boolean.parseBoolean(commandParts[5]));\r\n                        \tproduct.setId(productIdCounter++);\r\n\t\t\t\t\t\t\tproductList.add(product);\r\n\t\t\t\t\t\t\tout.println(&quot;Producto agregado: &quot; + product.getName());\r\n\t\t\t\t\t\tbreak;\r\n\t                    case &quot;updateproduct&quot;:\r\n\t\t\t\t\t\tint id = Integer.parseInt(commandParts[1]);\r\n\t\t\t\t\t\tProduct productt = productsController.updateProduct(user, id, commandParts[2], commandParts[3], commandParts[4], commandParts[5],Boolean.parseBoolean(commandParts[6]));\r\n\t\t\t\t\t\tout.println(&quot;Producto se ha actualizado: &quot; + productt.getName());\r\n\t\t\t\t\t\tbreak;\r\n\t                    \r\n\t                    case &quot;removeproduct&quot;:\r\n\t\t\t\t\t\tint id1 = Integer.parseInt(commandParts[1]);\r\n\t\t\t\t\t\t\t\tproductsController.removeProduct(user,\r\n\t                    \t\tid1, commandParts[2], commandParts[3], commandParts[4],commandParts[5] ,\r\n\t                    \t\tBoolean.parseBoolean(commandParts[6]));\r\n                        case &quot;listproducts&quot;:\r\n                        \tout.println(&quot;Lista de productos: &quot; + productList);\r\n                            break;\r\n                        \r\n                       \r\n\t\t\t\t\t\tcase &quot;help&quot;:\r\n\t\t\t\t\t\t\tif(user.getStatus().equalsIgnoreCase(&quot;admin&quot;))\r\n\t\t\t\t\t\t\tSystem.out.println(&quot;Los comandos disponibles son: \\n-login\\n-logout \\n-addUser\\n-updateUser\\n-removeUser\\n-listUsers\\n-addProduct\\n-updateProduct\\n-removeProduct\\n-removeProduct\\nlistProducts&quot;);\r\n\t\t\t\t\t\t\telse \r\n\t\t\t\t\t\t\tSystem.out.println(&quot;Los comandos disponibles son: \\n-login\\n-logout\\nlistProducts&quot;);\r\n\t\t\t\t\t\t\tbreak;\r\n                        \r\n\t\t\t\t\t\tdefault:\r\n                            out.println(&quot;Comando no reconocido: &quot; + command+&quot; use help para obtener la lista de comandos&quot;);\r\n                    \r\n\t\t\t\t\t\t\t\r\n\t                    \t\r\n\t                    }\r\n\t                }\r\n\r\n\t\t\t\t\r\n\t\t\t }\r\n\t\t} catch (Exception e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t\r\n\r\n\t}\r\n    private static Product parseProduct(String productString) {\r\n      \r\n        String[] parts = productString.split(&quot;,&quot;);\r\n        int id = Integer.parseInt(parts[0]);\r\n        String name = parts[1];\r\n        String description = parts[2];\r\n        String tags = parts[3];\r\n        String picture = parts[4];\r\n        boolean deprecated = Boolean.parseBoolean(parts[5]);\r\n        return new Product(id, name, description, tags, picture, deprecated);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n```\r\nbut I want to make it multiuser and I  know I can use the class thread in java but I actually dont know how to because I have only used threads in Perl, I think I also have to do the authentication but that is another step that I will fix later because I think it will be easier. I would like some advices and ideas thanks\r\n\r\n","title":"How to make a miltiuser server ideas in Java","body":"<p>I have the following code for the class server of a project in java</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.util.ArrayList;\nimport java.util.List;\n\n\npublic class Server {\n    \n    private static List&lt;User&gt; userList = new ArrayList&lt;&gt;();\n    private static Users userController = new Users();\n    private static User user = new User();  \n    private static List&lt;Product&gt; productList = new ArrayList&lt;&gt;();\n    private static Products productsController = new Products();\n    private static int userIdCounter = 1;\n    private static int productIdCounter = 1;\n    \n    \n    public static void main(String[] args) {\n        try {\n             ServerSocket serverSocket = new ServerSocket(8080);\n             \n             while(true) {\n                System.out.println(&quot;Servidor activo, esperando mensaje.&quot;);\n                Socket clientSocket = serverSocket.accept();\n                 \n                BufferedReader in = new BufferedReader(\n                    new InputStreamReader(clientSocket.getInputStream()));\n                PrintWriter out =\n                    new PrintWriter(clientSocket.getOutputStream(), true);\n             \n                String line;\n                    while ((line = in.readLine()) != null) {\n                        System.out.println(&quot;Recibido en server: &quot; + line);\n                        out.println(line);\n                     // Analizar el comando utilizando un switch\n                        String[] commandParts = line.split(&quot; &quot;);\n                        String command = commandParts[0].toLowerCase();\n                        switch(command){\n                        case &quot;login&quot;:\n                            // Implementa la lógica para el comando login\n                             userController.login( commandParts[1], commandParts[2]);\n                            break;\n                        case &quot;logout&quot;:\n                             clientSocket.close();\n                             System.out.println(&quot;El cliente se ha desconectado.&quot;);\n                             System.out.println(&quot;Ahora se desconectará el servidor.&quot;);\n                             serverSocket.close();\n                            break;\n                            //que tengo que hacer en user user para comprobar el user \n                        case &quot;adduser&quot;:\n                          userController.addUser(  user ,commandParts[1], commandParts[2], commandParts[3], commandParts[4], \n                            commandParts[5], commandParts[6]);    \n                            break;\n                        case &quot;updateuser&quot;:\n                            // Implementa la lógica para el comando updateUser\n                            userController.updateUser(user, commandParts[1], commandParts[2], commandParts[3], commandParts[4], commandParts[5], commandParts[6]);\n                            break;\n                        case &quot;removeuser&quot;:\n                            userController.removeUser(user, commandParts[1]);\n                            break;\n                        case &quot;listusers&quot;:\n                            out.println(&quot;Lista de ususarios: &quot; + userList);\n                            break;\n                            //aqui tambien el adminUser\n                        case &quot;addproduct&quot;:Product product =  productsController.addProduct(user,commandParts[1], commandParts[2], commandParts[3], commandParts[4],Boolean.parseBoolean(commandParts[5]));\n                            product.setId(productIdCounter++);\n                            productList.add(product);\n                            out.println(&quot;Producto agregado: &quot; + product.getName());\n                        break;\n                        case &quot;updateproduct&quot;:\n                        int id = Integer.parseInt(commandParts[1]);\n                        Product productt = productsController.updateProduct(user, id, commandParts[2], commandParts[3], commandParts[4], commandParts[5],Boolean.parseBoolean(commandParts[6]));\n                        out.println(&quot;Producto se ha actualizado: &quot; + productt.getName());\n                        break;\n                        \n                        case &quot;removeproduct&quot;:\n                        int id1 = Integer.parseInt(commandParts[1]);\n                                productsController.removeProduct(user,\n                                id1, commandParts[2], commandParts[3], commandParts[4],commandParts[5] ,\n                                Boolean.parseBoolean(commandParts[6]));\n                        case &quot;listproducts&quot;:\n                            out.println(&quot;Lista de productos: &quot; + productList);\n                            break;\n                        \n                       \n                        case &quot;help&quot;:\n                            if(user.getStatus().equalsIgnoreCase(&quot;admin&quot;))\n                            System.out.println(&quot;Los comandos disponibles son: \\n-login\\n-logout \\n-addUser\\n-updateUser\\n-removeUser\\n-listUsers\\n-addProduct\\n-updateProduct\\n-removeProduct\\n-removeProduct\\nlistProducts&quot;);\n                            else \n                            System.out.println(&quot;Los comandos disponibles son: \\n-login\\n-logout\\nlistProducts&quot;);\n                            break;\n                        \n                        default:\n                            out.println(&quot;Comando no reconocido: &quot; + command+&quot; use help para obtener la lista de comandos&quot;);\n                    \n                            \n                            \n                        }\n                    }\n\n                \n             }\n        } catch (Exception e) {\n                e.printStackTrace();\n            }\n        \n\n    }\n    private static Product parseProduct(String productString) {\n      \n        String[] parts = productString.split(&quot;,&quot;);\n        int id = Integer.parseInt(parts[0]);\n        String name = parts[1];\n        String description = parts[2];\n        String tags = parts[3];\n        String picture = parts[4];\n        boolean deprecated = Boolean.parseBoolean(parts[5]);\n        return new Product(id, name, description, tags, picture, deprecated);\n    }\n\n\n\n\n\n\n}\n</code></pre>\n<p>but I want to make it multiuser and I  know I can use the class thread in java but I actually dont know how to because I have only used threads in Perl, I think I also have to do the authentication but that is another step that I will fix later because I think it will be easier. I would like some advices and ideas thanks</p>\n"},{"tags":["java","string"],"answers":[{"tags":[],"owner":{"account_id":261048,"reputation":25820,"user_id":544983,"accept_rate":67,"display_name":"Juvanis"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1390557294,"creation_date":1390557294,"answer_id":21329517,"question_id":21329475,"body_markdown":"    String.format(&quot;%1$s FOO %1$s %1$s&quot;, &quot;test&quot;);","title":"Can Stringformatter reuse arguments?","body":"<pre><code>String.format(\"%1$s FOO %1$s %1$s\", \"test\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1417953,"reputation":45783,"user_id":1343161,"accept_rate":100,"display_name":"Keppil"},"down_vote_count":0,"up_vote_count":63,"is_accepted":true,"score":63,"last_activity_date":1390557367,"creation_date":1390557367,"answer_id":21329549,"question_id":21329475,"body_markdown":"Yes, you can use the `$` specifier for this. The number preceding the `$` indicates the argument number, starting from 1:  \r\n\r\n    String.format(&quot;%1$s FOO %1$s %1$s&quot;, &quot;test&quot;)","title":"Can Stringformatter reuse arguments?","body":"<p>Yes, you can use the <code>$</code> specifier for this. The number preceding the <code>$</code> indicates the argument number, starting from 1:  </p>\n\n<pre><code>String.format(\"%1$s FOO %1$s %1$s\", \"test\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6105182,"reputation":4880,"user_id":4763083,"display_name":"jonahe"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1460103424,"creation_date":1460103424,"answer_id":36494751,"question_id":21329475,"body_markdown":"Just as a complement to Keppils answer:\r\nWhen you&#39;ve started numbering one of your arguments, you have to number them all, or else the result will not be as expected.\r\n\r\n\r\n    String.format(&quot;Hello %1$s! What a %2$s %1$s!&quot;, &quot;world&quot;, &quot;wonderful&quot;);\r\n    // &quot;Hello world! What a wonderful world!&quot;\r\n\r\nwould work. While \r\n\r\n    String.format(&quot;Hello %1$s! What a %s %1$s!&quot;, &quot;world&quot;, &quot;wonderful&quot;);\r\n    // &quot;Hello world! What a world world!&quot;\r\n\r\nwould not work. (But does not throw any errors, so this might go unnoticed.)","title":"Can Stringformatter reuse arguments?","body":"<p>Just as a complement to Keppils answer:\nWhen you've started numbering one of your arguments, you have to number them all, or else the result will not be as expected.</p>\n\n<pre><code>String.format(\"Hello %1$s! What a %2$s %1$s!\", \"world\", \"wonderful\");\n// \"Hello world! What a wonderful world!\"\n</code></pre>\n\n<p>would work. While </p>\n\n<pre><code>String.format(\"Hello %1$s! What a %s %1$s!\", \"world\", \"wonderful\");\n// \"Hello world! What a world world!\"\n</code></pre>\n\n<p>would not work. (But does not throw any errors, so this might go unnoticed.)</p>\n"},{"tags":[],"owner":{"account_id":11024588,"reputation":181,"user_id":8097865,"display_name":"Linkman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1632290540,"creation_date":1573641362,"answer_id":58835201,"question_id":21329475,"body_markdown":"    String.format(&quot;%s FOO %&lt;s %&lt;s&quot;, &quot;test&quot;)\r\n\r\nRelative indexing is used when the format specifier contains a &#39;&lt;&#39; (&#39;\\u003c&#39;) flag which causes the argument for the previous format specifier to be re-used. If there is no previous argument, then a MissingFormatArgumentException is thrown.\r\n```java\r\nformatter.format(&quot;%s %s %&lt;s %&lt;s&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;)\r\n // -&gt; &quot;a b b b&quot;\r\n // &quot;c&quot; and &quot;d&quot; are ignored because they are not referenced\r\n```\r\n\r\nSource (search for &#39;Argument Index&#39;): https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Formatter.html ","title":"Can Stringformatter reuse arguments?","body":"<pre><code>String.format(&quot;%s FOO %&lt;s %&lt;s&quot;, &quot;test&quot;)\n</code></pre>\n<p>Relative indexing is used when the format specifier contains a '&lt;' ('\\u003c') flag which causes the argument for the previous format specifier to be re-used. If there is no previous argument, then a MissingFormatArgumentException is thrown.</p>\n<pre class=\"lang-java prettyprint-override\"><code>formatter.format(&quot;%s %s %&lt;s %&lt;s&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;)\n // -&gt; &quot;a b b b&quot;\n // &quot;c&quot; and &quot;d&quot; are ignored because they are not referenced\n</code></pre>\n<p>Source (search for 'Argument Index'): <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Formatter.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Formatter.html</a></p>\n"},{"tags":[],"owner":{"account_id":1759831,"reputation":1,"user_id":1607248,"display_name":"Damien Biggs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699899347,"creation_date":1699899347,"answer_id":77475995,"question_id":21329475,"body_markdown":"Note, if using numbered variables, either number all variables or DON&#39;T start using the numbered notation until after all variables are used.\r\n\r\ne.g.\r\n`String.format(%s and %s and %1$s is four, &quot;one , &quot;two&quot;);`\r\n\r\nresults in &quot;one and two and one is four&quot;\r\n\r\nBUT\r\n`String.format(%1$s and %s and %1$s is four, &quot;one , &quot;two&quot;);`\r\n\r\nresults in &quot;one and one and one is four&quot;\r\n\r\nNumbering the variables seems to cut off further reading in of variables.","title":"Can Stringformatter reuse arguments?","body":"<p>Note, if using numbered variables, either number all variables or DON'T start using the numbered notation until after all variables are used.</p>\n<p>e.g.\n<code>String.format(%s and %s and %1$s is four, &quot;one , &quot;two&quot;);</code></p>\n<p>results in &quot;one and two and one is four&quot;</p>\n<p>BUT\n<code>String.format(%1$s and %s and %1$s is four, &quot;one , &quot;two&quot;);</code></p>\n<p>results in &quot;one and one and one is four&quot;</p>\n<p>Numbering the variables seems to cut off further reading in of variables.</p>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8233,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":21329549,"answer_count":5,"score":36,"last_activity_date":1699899347,"creation_date":1390557176,"question_id":21329475,"body_markdown":"I&#39;m using `String.format` to create a formatted string with arguments. Is it somehow possible to tell the formatter to reuse an argument multiple times?\r\n\r\n    String.format(%s FOO %s %s, &quot;test&quot;); //desired output: &quot;test FOO test test&quot;","title":"Can Stringformatter reuse arguments?","body":"<p>I'm using <code>String.format</code> to create a formatted string with arguments. Is it somehow possible to tell the formatter to reuse an argument multiple times?</p>\n\n<pre><code>String.format(%s FOO %s %s, \"test\"); //desired output: \"test FOO test test\"\n</code></pre>\n"},{"tags":["java","postgresql","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":29642231,"reputation":1,"user_id":22718110,"display_name":"Esteban Sifuentes Samaniego"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699898756,"creation_date":1699898756,"answer_id":77475941,"question_id":77475617,"body_markdown":"Instead of the &#39;DAO concept&#39; you can try creating a JPA entity and repository.\r\n\r\nUsing Spring Data JPA you can create an Order class and annotate it accordingly:\r\n\r\n    @Entity\r\n    public class Order {\r\n        private Date orderDate;\r\n        private String orderStatus;\r\n        /* Constructors, getters, and setters */\r\n    }\r\n\r\nThen in your html form tag, you reference your entity with **th:object**, and each field with **th:field**\r\n\r\n    &lt;form action=&quot;#&quot; th:action=&quot;@{/addOrder}&quot; th:object=&quot;${order}&quot; method=&quot;POST&quot;&gt;\r\n        &lt;input type=&quot;text&quot; th:field=&quot;*{orderStatus}&quot;&gt; \r\n        &lt;!-- other fields --&gt;\r\n    &lt;/form&gt;\r\n\r\nThat way each field is set automatically. So in your controller you just have to pass it to the corresponding method.\r\n\r\n\r\n    @PostMapping(&quot;/addOrder&quot;)\r\n    public String addOrder(Order order) {\r\n        orderRepository.save(order);\r\n        return &quot;user/orders&quot;;\r\n    }\r\n\r\nIn this case, I&#39;m assuming you create a repository using **JpaRepository**. You can try that also instead of the way you are doing it right now. JPA automatically creates basic CRUD operations for you.\r\n\r\nYou just have to create an interface that extends JpaRepository like this:\r\n\r\n    @Repository\r\n    public interface OrderRepository extends JpaRepository&lt;Order, Long&gt;{}\r\n\r\nAnd in order to call it from your Controller you just @Autowire it:\r\n\r\n    @Autowired\r\n    private OrderRepository orderRepository;\r\n\r\n","title":"How to correctly make a Post request in Spring-MVC?","body":"<p>Instead of the 'DAO concept' you can try creating a JPA entity and repository.</p>\n<p>Using Spring Data JPA you can create an Order class and annotate it accordingly:</p>\n<pre><code>@Entity\npublic class Order {\n    private Date orderDate;\n    private String orderStatus;\n    /* Constructors, getters, and setters */\n}\n</code></pre>\n<p>Then in your html form tag, you reference your entity with <strong>th:object</strong>, and each field with <strong>th:field</strong></p>\n<pre><code>&lt;form action=&quot;#&quot; th:action=&quot;@{/addOrder}&quot; th:object=&quot;${order}&quot; method=&quot;POST&quot;&gt;\n    &lt;input type=&quot;text&quot; th:field=&quot;*{orderStatus}&quot;&gt; \n    &lt;!-- other fields --&gt;\n&lt;/form&gt;\n</code></pre>\n<p>That way each field is set automatically. So in your controller you just have to pass it to the corresponding method.</p>\n<pre><code>@PostMapping(&quot;/addOrder&quot;)\npublic String addOrder(Order order) {\n    orderRepository.save(order);\n    return &quot;user/orders&quot;;\n}\n</code></pre>\n<p>In this case, I'm assuming you create a repository using <strong>JpaRepository</strong>. You can try that also instead of the way you are doing it right now. JPA automatically creates basic CRUD operations for you.</p>\n<p>You just have to create an interface that extends JpaRepository like this:</p>\n<pre><code>@Repository\npublic interface OrderRepository extends JpaRepository&lt;Order, Long&gt;{}\n</code></pre>\n<p>And in order to call it from your Controller you just @Autowire it:</p>\n<pre><code>@Autowired\nprivate OrderRepository orderRepository;\n</code></pre>\n"}],"owner":{"account_id":26101286,"reputation":75,"user_id":19796675,"display_name":"JohnEdwards-8"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699898756,"creation_date":1699895290,"question_id":77475617,"body_markdown":"I have a view of a page with user orders, a controller, a model and a class for accessing the database using the DAO concept. However, when I try to &quot;add an order&quot; my `PostMapping` request is not processed correctly. What am I doing wrong?\r\n\r\n**orders.html**\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot; lang=&quot;en&quot;&gt;\r\n    \r\n    &lt;head&gt;\r\n        &lt;meta charset=&quot;ISO-8859-1&quot;&gt;\r\n        &lt;title&gt;My Orders&lt;/title&gt;\r\n        &lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot; integrity=&quot;sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC&quot; crossorigin=&quot;anonymous&quot;&gt;\r\n    &lt;/head&gt;\r\n    \r\n    &lt;body&gt;\r\n        &lt;div th:include=&quot;frags/headerUser&quot;&gt;&lt;/div&gt;\r\n    \r\n        &lt;div class=&quot;container mt-5&quot;&gt;\r\n            &lt;h2&gt;User Orders&lt;/h2&gt;\r\n        \r\n            &lt;table class=&quot;table table-bordered&quot;&gt;\r\n                &lt;thead&gt;\r\n                &lt;tr&gt;\r\n                    &lt;th&gt;Date&lt;/th&gt;\r\n                    &lt;th&gt;Status&lt;/th&gt;\r\n                &lt;/tr&gt;\r\n                &lt;/thead&gt;\r\n                &lt;tbody&gt;\r\n                &lt;tr th:each=&quot;order : ${ordersList}&quot;&gt;\r\n                    &lt;td th:text=&quot;${order.date}&quot;&gt;&lt;/td&gt;\r\n                    &lt;td th:text=&quot;${order.status}&quot;&gt;&lt;/td&gt;\r\n                &lt;/tr&gt;\r\n                &lt;/tbody&gt;\r\n            &lt;/table&gt;\r\n    \r\n            &lt;button type=&quot;button&quot; class=&quot;btn btn-primary&quot; data-toggle=&quot;modal&quot; data-target=&quot;#addOrderModal&quot;&gt;\r\n                Add new order\r\n            &lt;/button&gt;\r\n    \r\n            &lt;div class=&quot;modal&quot; id=&quot;addOrderModal&quot;&gt;\r\n                &lt;div class=&quot;modal-dialog&quot;&gt;\r\n                    &lt;div class=&quot;modal-content&quot;&gt;\r\n    \r\n                        &lt;div class=&quot;modal-header&quot;&gt;\r\n                            &lt;h4 class=&quot;modal-title&quot;&gt;New order&lt;/h4&gt;\r\n                            &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary close&quot; data-dismiss=&quot;modal&quot;&gt;&amp;times;&lt;/button&gt;\r\n                        &lt;/div&gt;\r\n    \r\n                        &lt;div class=&quot;modal-body&quot;&gt;\r\n                            &lt;form th:action=&quot;@{/addOrder}&quot; method=&quot;post&quot;&gt;\r\n                                &lt;!-- My form --&gt;\r\n                            &lt;/form&gt;\r\n                        &lt;/div&gt;\r\n                    &lt;/div&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n    \r\n    &lt;/body&gt;\r\n    \r\n    &lt;/html&gt;\r\n\r\n**order.java**\r\n\r\n    //imports\r\n    public class Order {\r\n    \tprivate int id;\r\n        private Date date;\r\n        private String status;\r\n        \r\n        //get- and set- funcs\r\n    \r\n    }\r\n\r\n**jdbcOrderDAO.java**\r\n\r\n    //imports\r\n    @Repository\r\n    public class JdbcOrderDAO implements OrderDAO {\r\n    \r\n        private final JdbcTemplate jdbcTemplate;\r\n    \r\n        @Autowired\r\n        public JdbcOrderDAO(JdbcTemplate jdbcTemplate) {\r\n            this.jdbcTemplate = jdbcTemplate;\r\n        }\r\n    \r\n        @Override\r\n        public void addOrder(Order order) {\r\n            String sql = &quot;INSERT INTO indent (indent_date, indent_status) VALUES (?, ?)&quot;;\r\n            jdbcTemplate.update(sql, order.getDate(), order.getStatus());\r\n        }\r\n        //...\r\n    }\r\n\r\n**controllerUser.java**\r\n\r\n    //imports\r\n    @Controller\r\n    public class ControllerUser {\r\n    \tprivate final JdbcOrderDAO oDAO;\r\n    \r\n        public ControllerUser(JdbcOrderDAO oDAO) {\r\n            this.oDAO = oDAO;\r\n        }\r\n    \r\n        //GetMappings\r\n        \r\n        @PostMapping(&quot;/addOrder&quot;)\r\n        public String addOrder(@RequestParam(&quot;orderDate&quot;) Date orderDate,\r\n                               @RequestParam(&quot;orderStatus&quot;) String orderStatus) {\r\n    \r\n            Order order = new Order();\r\n            order.setDate(orderDate);\r\n            order.setStatus(orderStatus);\r\n            oDAO.addOrder(order);\r\n            \r\n            return &quot;user/orders&quot;;\r\n        }\r\n    }\r\n\r\n**databaseConfig.java**\r\n\r\n    //imports\r\n    @Configuration\r\n    public class DatabaseConfig {\r\n    \r\n        @Value(&quot;${spring.datasource.url}&quot;)\r\n        private String databaseUrl;\r\n    \r\n        @Value(&quot;${spring.datasource.username}&quot;)\r\n        private String databaseUsername;\r\n    \r\n        @Value(&quot;${spring.datasource.password}&quot;)\r\n        private String databasePassword;\r\n    \r\n        @Bean\r\n        public DataSource dataSource() {\r\n            DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n            dataSource.setDriverClassName(&quot;org.postgresql.Driver&quot;);\r\n            dataSource.setUrl(databaseUrl);\r\n            dataSource.setUsername(databaseUsername);\r\n            dataSource.setPassword(databasePassword);\r\n            return dataSource;\r\n        }\r\n        \r\n        @Bean\r\n        public JdbcTemplate jdbcTemplate(DataSource dataSource) {\r\n            return new JdbcTemplate(dataSource);\r\n        }\r\n    }\r\n\r\n","title":"How to correctly make a Post request in Spring-MVC?","body":"<p>I have a view of a page with user orders, a controller, a model and a class for accessing the database using the DAO concept. However, when I try to &quot;add an order&quot; my <code>PostMapping</code> request is not processed correctly. What am I doing wrong?</p>\n<p><strong>orders.html</strong></p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot; lang=&quot;en&quot;&gt;\n\n&lt;head&gt;\n    &lt;meta charset=&quot;ISO-8859-1&quot;&gt;\n    &lt;title&gt;My Orders&lt;/title&gt;\n    &lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot; integrity=&quot;sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC&quot; crossorigin=&quot;anonymous&quot;&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;div th:include=&quot;frags/headerUser&quot;&gt;&lt;/div&gt;\n\n    &lt;div class=&quot;container mt-5&quot;&gt;\n        &lt;h2&gt;User Orders&lt;/h2&gt;\n    \n        &lt;table class=&quot;table table-bordered&quot;&gt;\n            &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;Date&lt;/th&gt;\n                &lt;th&gt;Status&lt;/th&gt;\n            &lt;/tr&gt;\n            &lt;/thead&gt;\n            &lt;tbody&gt;\n            &lt;tr th:each=&quot;order : ${ordersList}&quot;&gt;\n                &lt;td th:text=&quot;${order.date}&quot;&gt;&lt;/td&gt;\n                &lt;td th:text=&quot;${order.status}&quot;&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;/tbody&gt;\n        &lt;/table&gt;\n\n        &lt;button type=&quot;button&quot; class=&quot;btn btn-primary&quot; data-toggle=&quot;modal&quot; data-target=&quot;#addOrderModal&quot;&gt;\n            Add new order\n        &lt;/button&gt;\n\n        &lt;div class=&quot;modal&quot; id=&quot;addOrderModal&quot;&gt;\n            &lt;div class=&quot;modal-dialog&quot;&gt;\n                &lt;div class=&quot;modal-content&quot;&gt;\n\n                    &lt;div class=&quot;modal-header&quot;&gt;\n                        &lt;h4 class=&quot;modal-title&quot;&gt;New order&lt;/h4&gt;\n                        &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary close&quot; data-dismiss=&quot;modal&quot;&gt;&amp;times;&lt;/button&gt;\n                    &lt;/div&gt;\n\n                    &lt;div class=&quot;modal-body&quot;&gt;\n                        &lt;form th:action=&quot;@{/addOrder}&quot; method=&quot;post&quot;&gt;\n                            &lt;!-- My form --&gt;\n                        &lt;/form&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n<p><strong>order.java</strong></p>\n<pre><code>//imports\npublic class Order {\n    private int id;\n    private Date date;\n    private String status;\n    \n    //get- and set- funcs\n\n}\n</code></pre>\n<p><strong>jdbcOrderDAO.java</strong></p>\n<pre><code>//imports\n@Repository\npublic class JdbcOrderDAO implements OrderDAO {\n\n    private final JdbcTemplate jdbcTemplate;\n\n    @Autowired\n    public JdbcOrderDAO(JdbcTemplate jdbcTemplate) {\n        this.jdbcTemplate = jdbcTemplate;\n    }\n\n    @Override\n    public void addOrder(Order order) {\n        String sql = &quot;INSERT INTO indent (indent_date, indent_status) VALUES (?, ?)&quot;;\n        jdbcTemplate.update(sql, order.getDate(), order.getStatus());\n    }\n    //...\n}\n</code></pre>\n<p><strong>controllerUser.java</strong></p>\n<pre><code>//imports\n@Controller\npublic class ControllerUser {\n    private final JdbcOrderDAO oDAO;\n\n    public ControllerUser(JdbcOrderDAO oDAO) {\n        this.oDAO = oDAO;\n    }\n\n    //GetMappings\n    \n    @PostMapping(&quot;/addOrder&quot;)\n    public String addOrder(@RequestParam(&quot;orderDate&quot;) Date orderDate,\n                           @RequestParam(&quot;orderStatus&quot;) String orderStatus) {\n\n        Order order = new Order();\n        order.setDate(orderDate);\n        order.setStatus(orderStatus);\n        oDAO.addOrder(order);\n        \n        return &quot;user/orders&quot;;\n    }\n}\n</code></pre>\n<p><strong>databaseConfig.java</strong></p>\n<pre><code>//imports\n@Configuration\npublic class DatabaseConfig {\n\n    @Value(&quot;${spring.datasource.url}&quot;)\n    private String databaseUrl;\n\n    @Value(&quot;${spring.datasource.username}&quot;)\n    private String databaseUsername;\n\n    @Value(&quot;${spring.datasource.password}&quot;)\n    private String databasePassword;\n\n    @Bean\n    public DataSource dataSource() {\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        dataSource.setDriverClassName(&quot;org.postgresql.Driver&quot;);\n        dataSource.setUrl(databaseUrl);\n        dataSource.setUsername(databaseUsername);\n        dataSource.setPassword(databasePassword);\n        return dataSource;\n    }\n    \n    @Bean\n    public JdbcTemplate jdbcTemplate(DataSource dataSource) {\n        return new JdbcTemplate(dataSource);\n    }\n}\n</code></pre>\n"},{"tags":["java","kotlin","jwt","rsa-sha256"],"answers":[{"tags":[],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699898120,"creation_date":1699898120,"answer_id":77475877,"question_id":77475780,"body_markdown":"You seem to have got confused about text blocks:\r\n\r\n```lang-kotlin\r\n    val PRIVATE_KEY = &quot;&quot; +\r\n    &quot;-----BEGIN RSA PRIVATE KEY-----&quot; +\r\n    &quot;SOME_PRIVATE_KEY&quot; +\r\n    &quot;-----END RSA PRIVATE KEY-----&quot; +\r\n    &quot;&quot;\r\n```\r\n\r\nThat is just simple string concatenation. There are no newlines in your string. In fact, it has the same value as if you wrote it like this:\r\n\r\n\r\n```lang-kotlin\r\nval PRIVATE_KEY = &quot;-----BEGIN RSA PRIVATE KEY-----SOME_PRIVATE_KEY-----END RSA PRIVATE KEY-----&quot;\r\n```\r\n\r\nSo when you call `replace`, it doesn&#39;t replace anything because there are no newlines in your original string, so there&#39;s no match.\r\n\r\nTry using multiline strings:\r\n\r\n```lang-kotlin\r\nval PRIVATE_KEY = &quot;&quot;&quot;\r\n    -----BEGIN RSA PRIVATE KEY-----\r\n    SOME_PRIVATE_KEY\r\n    -----END RSA PRIVATE KEY-----\r\n    &quot;&quot;&quot;.stripIndent()\r\n```","title":"Signing a string using a private RSA key","body":"<p>You seem to have got confused about text blocks:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>    val PRIVATE_KEY = &quot;&quot; +\n    &quot;-----BEGIN RSA PRIVATE KEY-----&quot; +\n    &quot;SOME_PRIVATE_KEY&quot; +\n    &quot;-----END RSA PRIVATE KEY-----&quot; +\n    &quot;&quot;\n</code></pre>\n<p>That is just simple string concatenation. There are no newlines in your string. In fact, it has the same value as if you wrote it like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val PRIVATE_KEY = &quot;-----BEGIN RSA PRIVATE KEY-----SOME_PRIVATE_KEY-----END RSA PRIVATE KEY-----&quot;\n</code></pre>\n<p>So when you call <code>replace</code>, it doesn't replace anything because there are no newlines in your original string, so there's no match.</p>\n<p>Try using multiline strings:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val PRIVATE_KEY = &quot;&quot;&quot;\n    -----BEGIN RSA PRIVATE KEY-----\n    SOME_PRIVATE_KEY\n    -----END RSA PRIVATE KEY-----\n    &quot;&quot;&quot;.stripIndent()\n</code></pre>\n"}],"owner":{"account_id":17200780,"reputation":113,"user_id":12452565,"display_name":"ProcgerXacker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1699898120,"creation_date":1699896963,"question_id":77475780,"body_markdown":"My question consists of two parts: 1) How to sign a string using a private key; 2) How to sign a JWT token.\r\n\r\n1) It is necessary to sign the string with a private key using the SHA256withRSA/PSS algorithm. I looked at a lot of materials on the Internet and implemented the code that is given below. But the problem is that the result obtained when executing the code does not coincide with what should actually be. More precisely, they match, but only the first few characters. Therefore, I wanted to find out how to sign a string correctly using a private key?\r\n```\r\n    fun signStr(strToSign: String): String {\r\n        val PRIVATE_KEY = &quot;&quot; +\r\n        &quot;-----BEGIN RSA PRIVATE KEY-----&quot; +\r\n        &quot;SOME_PRIVATE_KEY&quot; +\r\n        &quot;-----END RSA PRIVATE KEY-----&quot; +\r\n        &quot;&quot;\r\n        val privateKeyString = String(PRIVATE_KEY)\r\n            .replace(&quot;-----BEGIN RSA PRIVATE KEY-----\\n&quot;, &quot;&quot;)\r\n            .replace(&quot;\\n-----END RSA PRIVATE KEY-----&quot;, &quot;&quot;)\r\n            .replace(&quot;\\n&quot;, &quot;&quot;)\r\n    \r\n        // Generate a PrivateKey object from the private key bytes using a KeyFactory and a PKCS8EncodedKeySpec\r\n        val privateKeyBytes: ByteArray = Base64.decode(privateKeyString, Base64.DEFAULT)\r\n        val keyFactory = KeyFactory.getInstance(&quot;RSA&quot;)\r\n        val privateKeySpec = PKCS8EncodedKeySpec(privateKeyBytes)\r\n        val privateKey = keyFactory.generatePrivate(privateKeySpec)\r\n    \r\n        // Create a Signature object using the getInstance() method with the algorithm name\r\n        val signature: Signature = Signature.getInstance(&quot;SHA256withRSA/PSS&quot;)\r\n    \r\n        // Initialize the Signature object with the private key using the initSign() method\r\n        signature.initSign(privateKey)\r\n    \r\n        // Update the Signature object with the plain text bytes using the update() method\r\n        signature.update(strToSign.toByteArray())\r\n    \r\n        // Call the sign() method to generate the digital signature, which is returned as a byte array\r\n        val signatureBytes = signature.sign()\r\n\r\n        return String(signatureBytes)\r\n    }\r\n```\r\n\r\n2) The second part of the question concerns the correct signing of the JWT token. Do I understand correctly that JWT is signed as follows:\r\n```\r\nfun signJWT(header: String, payload: String): String {\r\n    val headerAndPayloadInBase64Url = header.convertToBase64URL() + &quot;.&quot; + payload.convertToBase64URL()\r\n    return headerAndPayloadInBase64Url + &quot;.&quot; + signStr(headerAndPayloadInBase64Url).convertToBase64URL()\r\n}\r\n```\r\n\r\nI also wanted to know your advice, maybe there are good libraries in **Kotlin** or **Java** designed for the above two purposes?","title":"Signing a string using a private RSA key","body":"<p>My question consists of two parts: 1) How to sign a string using a private key; 2) How to sign a JWT token.</p>\n<ol>\n<li>It is necessary to sign the string with a private key using the SHA256withRSA/PSS algorithm. I looked at a lot of materials on the Internet and implemented the code that is given below. But the problem is that the result obtained when executing the code does not coincide with what should actually be. More precisely, they match, but only the first few characters. Therefore, I wanted to find out how to sign a string correctly using a private key?</li>\n</ol>\n<pre><code>    fun signStr(strToSign: String): String {\n        val PRIVATE_KEY = &quot;&quot; +\n        &quot;-----BEGIN RSA PRIVATE KEY-----&quot; +\n        &quot;SOME_PRIVATE_KEY&quot; +\n        &quot;-----END RSA PRIVATE KEY-----&quot; +\n        &quot;&quot;\n        val privateKeyString = String(PRIVATE_KEY)\n            .replace(&quot;-----BEGIN RSA PRIVATE KEY-----\\n&quot;, &quot;&quot;)\n            .replace(&quot;\\n-----END RSA PRIVATE KEY-----&quot;, &quot;&quot;)\n            .replace(&quot;\\n&quot;, &quot;&quot;)\n    \n        // Generate a PrivateKey object from the private key bytes using a KeyFactory and a PKCS8EncodedKeySpec\n        val privateKeyBytes: ByteArray = Base64.decode(privateKeyString, Base64.DEFAULT)\n        val keyFactory = KeyFactory.getInstance(&quot;RSA&quot;)\n        val privateKeySpec = PKCS8EncodedKeySpec(privateKeyBytes)\n        val privateKey = keyFactory.generatePrivate(privateKeySpec)\n    \n        // Create a Signature object using the getInstance() method with the algorithm name\n        val signature: Signature = Signature.getInstance(&quot;SHA256withRSA/PSS&quot;)\n    \n        // Initialize the Signature object with the private key using the initSign() method\n        signature.initSign(privateKey)\n    \n        // Update the Signature object with the plain text bytes using the update() method\n        signature.update(strToSign.toByteArray())\n    \n        // Call the sign() method to generate the digital signature, which is returned as a byte array\n        val signatureBytes = signature.sign()\n\n        return String(signatureBytes)\n    }\n</code></pre>\n<ol start=\"2\">\n<li>The second part of the question concerns the correct signing of the JWT token. Do I understand correctly that JWT is signed as follows:</li>\n</ol>\n<pre><code>fun signJWT(header: String, payload: String): String {\n    val headerAndPayloadInBase64Url = header.convertToBase64URL() + &quot;.&quot; + payload.convertToBase64URL()\n    return headerAndPayloadInBase64Url + &quot;.&quot; + signStr(headerAndPayloadInBase64Url).convertToBase64URL()\n}\n</code></pre>\n<p>I also wanted to know your advice, maybe there are good libraries in <strong>Kotlin</strong> or <strong>Java</strong> designed for the above two purposes?</p>\n"},{"tags":["java","json","serialization","jackson","objectmapper"],"comments":[{"owner":{"account_id":486080,"reputation":2255,"user_id":902782,"accept_rate":76,"display_name":"Gon&#231;alo Cardoso"},"score":0,"creation_date":1699913123,"post_id":66942538,"comment_id":136588270,"body_markdown":"Did you managed to find a solution for this?","body":"Did you managed to find a solution for this?"}],"owner":{"account_id":2263712,"reputation":101,"user_id":1993076,"display_name":"Akash"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":488,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1699898028,"creation_date":1617548092,"question_id":66942538,"body_markdown":"I have a Person class:\r\n\r\n    public class Person {\r\n        private String name;\r\n        private String address;\r\n    }\r\n\r\nNow this Person class is used in another class as:\r\n\r\n    public class Group {\r\n        private Person nicePerson;\r\n        private Person badPerson;\r\n        private Person secretPerson;\r\n    }\r\n\r\nNow, I want to serialize my Group object to JSON using Jackson ObjectMapper. I&#39;m using a custom serializer based on some annotation.\r\n\r\nWhen I serialize the Group object, I&#39;m looking for the following output:\r\n\r\n    {\r\n    \t&quot;nicePerson&quot;: {\r\n    \t\t&quot;name&quot;: &quot;John&quot;,\r\n    \t\t&quot;address&quot;: &quot;usa&quot;\r\n    \t},\r\n    \t&quot;badPerson&quot;: {\r\n    \t\t&quot;name&quot;: &quot;Harold&quot;,\r\n    \t\t&quot;address&quot;: &quot;canada&quot;\r\n    \t},\r\n    \t&quot;secretPerson&quot;: {\r\n    \t\t&quot;name&quot;: &quot;XXXXXXX&quot;,\r\n    \t\t&quot;address&quot;: &quot;london&quot;\r\n    \t}\r\n    }\r\n\r\nHere, I want to change the name of &#39;secretPerson&#39; to &quot;XXXXXXX&quot;.\r\n\r\nBut I&#39;m having some problems.\r\n\r\nI have made following annotation:\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target({ElementType.METHOD, ElementType.FIELD})\r\n    public @interface SecretInfo {\r\n        String maskedValue = &quot;XXXXXXX&quot;;\r\n        String value() default maskedValue;\r\n    }\r\n\r\n\r\nI have annotated my Person class following way:\r\n\r\n    public class Person {\r\n    \t@SecretInfo\r\n        private String name;\r\n        private String address;\r\n    }\r\n\r\nI have made the following serializer which looks for this annotation and then changes the value. It is using some generics now for convenience.\r\n\r\n    public class SecretInfoSerializer&lt;T&gt; extends StdSerializer&lt;T&gt; implements ContextualSerializer {\r\n    \r\n        private SecretInfo secretInfo;\r\n    \r\n        public SecretInfoSerializer() {\r\n            super((Class&lt;T&gt;) String.class);\r\n        }\r\n    \r\n        public SecretInfoSerializer(SecretInfo secretInfo,\r\n                                              JavaType clazz) {\r\n            super(clazz);\r\n            this.secretInfo = secretInfo;\r\n        }\r\n    \r\n        @Override\r\n        public void serialize(T value, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {\r\n            if (secretInfo != null &amp;&amp; value != null) {\r\n                jsonGenerator.writeString(secretInfo.value());\r\n            } else jsonGenerator.writeString(getValue(value));\r\n        }\r\n    \r\n        @Override\r\n        public JsonSerializer&lt;?&gt; createContextual(SerializerProvider serializerProvider, BeanProperty property) {\r\n            if (property != null) {\r\n                return new SecretInfoSerializer&lt;&gt;(\r\n                        property.getAnnotation(SecretInfo.class),\r\n                        property.getType());\r\n            } else {\r\n                return new SecretInfoSerializer&lt;&gt;();\r\n            }\r\n        }\r\n    \r\n        private String getValue(T value) {\r\n            if (value == null) {\r\n                return &quot;null&quot;;\r\n            } else {\r\n                return value.toString();\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nI have associated this with Annotation Introspector and made the ObjectMapper.\r\nThen I serialized my &#39;Group&#39; class above. But I get the following output:\r\n\r\n    {\r\n    \t&quot;nicePerson&quot;: {\r\n    \t\t&quot;name&quot;: &quot;XXXXXXX&quot;,\r\n    \t\t&quot;address&quot;: &quot;usa&quot;\r\n    \t},\r\n    \t&quot;badPerson&quot;: {\r\n    \t\t&quot;name&quot;: &quot;XXXXXXX&quot;,\r\n    \t\t&quot;address&quot;: &quot;canada&quot;\r\n    \t},\r\n    \t&quot;secretPerson&quot;: {\r\n    \t\t&quot;name&quot;: &quot;XXXXXXX&quot;,\r\n    \t\t&quot;address&quot;: &quot;london&quot;\r\n    \t}\r\n    }\r\n\r\nAs you can see, since I annotated the &#39;name&#39; field in Person class, I&#39;m getting &quot;XXXXXXX&quot; for every Person class there is. But this is not what I wanted. I just want to change the value for &#39;secretPerson&#39; only.\r\n\r\nI don&#39;t know what to do:\r\n\r\n\r\nMaybe there is some way such as following:\r\n\r\n    public class Group {\r\n        private Person nicePerson;\r\n        private Person badPerson;\r\n        @HasSecretInfo\r\n        private Person secretPerson; \r\n    }\r\n\r\nThen the serializer would check if it `@HasSecretInfo`, only then look for `@SecretInfo` ...etc. something like this.\r\n\r\n\r\nSo I&#39;m looking to solve this problem. If you have any solution, that&#39;d be great.","title":"Change value of specific annotated fields of an object which is used as a type for multiple fields in some object - Jackson Object Mapper Serialize","body":"<p>I have a Person class:</p>\n<pre><code>public class Person {\n    private String name;\n    private String address;\n}\n</code></pre>\n<p>Now this Person class is used in another class as:</p>\n<pre><code>public class Group {\n    private Person nicePerson;\n    private Person badPerson;\n    private Person secretPerson;\n}\n</code></pre>\n<p>Now, I want to serialize my Group object to JSON using Jackson ObjectMapper. I'm using a custom serializer based on some annotation.</p>\n<p>When I serialize the Group object, I'm looking for the following output:</p>\n<pre><code>{\n    &quot;nicePerson&quot;: {\n        &quot;name&quot;: &quot;John&quot;,\n        &quot;address&quot;: &quot;usa&quot;\n    },\n    &quot;badPerson&quot;: {\n        &quot;name&quot;: &quot;Harold&quot;,\n        &quot;address&quot;: &quot;canada&quot;\n    },\n    &quot;secretPerson&quot;: {\n        &quot;name&quot;: &quot;XXXXXXX&quot;,\n        &quot;address&quot;: &quot;london&quot;\n    }\n}\n</code></pre>\n<p>Here, I want to change the name of 'secretPerson' to &quot;XXXXXXX&quot;.</p>\n<p>But I'm having some problems.</p>\n<p>I have made following annotation:</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.METHOD, ElementType.FIELD})\npublic @interface SecretInfo {\n    String maskedValue = &quot;XXXXXXX&quot;;\n    String value() default maskedValue;\n}\n</code></pre>\n<p>I have annotated my Person class following way:</p>\n<pre><code>public class Person {\n    @SecretInfo\n    private String name;\n    private String address;\n}\n</code></pre>\n<p>I have made the following serializer which looks for this annotation and then changes the value. It is using some generics now for convenience.</p>\n<pre><code>public class SecretInfoSerializer&lt;T&gt; extends StdSerializer&lt;T&gt; implements ContextualSerializer {\n\n    private SecretInfo secretInfo;\n\n    public SecretInfoSerializer() {\n        super((Class&lt;T&gt;) String.class);\n    }\n\n    public SecretInfoSerializer(SecretInfo secretInfo,\n                                          JavaType clazz) {\n        super(clazz);\n        this.secretInfo = secretInfo;\n    }\n\n    @Override\n    public void serialize(T value, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {\n        if (secretInfo != null &amp;&amp; value != null) {\n            jsonGenerator.writeString(secretInfo.value());\n        } else jsonGenerator.writeString(getValue(value));\n    }\n\n    @Override\n    public JsonSerializer&lt;?&gt; createContextual(SerializerProvider serializerProvider, BeanProperty property) {\n        if (property != null) {\n            return new SecretInfoSerializer&lt;&gt;(\n                    property.getAnnotation(SecretInfo.class),\n                    property.getType());\n        } else {\n            return new SecretInfoSerializer&lt;&gt;();\n        }\n    }\n\n    private String getValue(T value) {\n        if (value == null) {\n            return &quot;null&quot;;\n        } else {\n            return value.toString();\n        }\n    }\n\n}\n</code></pre>\n<p>I have associated this with Annotation Introspector and made the ObjectMapper.\nThen I serialized my 'Group' class above. But I get the following output:</p>\n<pre><code>{\n    &quot;nicePerson&quot;: {\n        &quot;name&quot;: &quot;XXXXXXX&quot;,\n        &quot;address&quot;: &quot;usa&quot;\n    },\n    &quot;badPerson&quot;: {\n        &quot;name&quot;: &quot;XXXXXXX&quot;,\n        &quot;address&quot;: &quot;canada&quot;\n    },\n    &quot;secretPerson&quot;: {\n        &quot;name&quot;: &quot;XXXXXXX&quot;,\n        &quot;address&quot;: &quot;london&quot;\n    }\n}\n</code></pre>\n<p>As you can see, since I annotated the 'name' field in Person class, I'm getting &quot;XXXXXXX&quot; for every Person class there is. But this is not what I wanted. I just want to change the value for 'secretPerson' only.</p>\n<p>I don't know what to do:</p>\n<p>Maybe there is some way such as following:</p>\n<pre><code>public class Group {\n    private Person nicePerson;\n    private Person badPerson;\n    @HasSecretInfo\n    private Person secretPerson; \n}\n</code></pre>\n<p>Then the serializer would check if it <code>@HasSecretInfo</code>, only then look for <code>@SecretInfo</code> ...etc. something like this.</p>\n<p>So I'm looking to solve this problem. If you have any solution, that'd be great.</p>\n"},{"tags":["java","docker","docker-compose","testcontainers"],"owner":{"account_id":29866839,"reputation":11,"user_id":22889203,"display_name":"Ryan-GG"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1699896915,"creation_date":1699892262,"question_id":77475308,"body_markdown":"Hi I&#39;m new to Docker and testcontainers and I&#39;m trying to create a `DockerComposeContainer` with a .yml file. \r\n\r\nI need to expose one of the services and tried using the `.withExposedService( String Service, Integer Port)` method. \r\n\r\nThough if I call `.withExposedService` the `DockerComposeContainer` tries to pull in Images `alpine/socat:{$VERSION_NUMBER}`. **I do not want to ever pull in any images.** How do I go about this?\r\n\r\n\r\nHere is my code\r\n\r\n\r\n\r\n     DockerComposeContainer testContainer = new DockerComposeContainer(new File(&quot;path_to_compose.yml&quot;))\r\n            .withLocalCompose(true)\r\n            .withPull(false)\r\n            .withExposedService(&quot;SERVICE_NAME&quot;, PORT_NUMBER)\r\n\r\n\r\n\r\n\r\nI&#39;ve tried using `.withPull(false)`, setting `pull_policy: never` in my `docker-compose.yml`.\r\nMy thought was `.withPull(false)` this issue should be resolved but maybe I don&#39;t understand the function properly.","title":"DockerComposeContainer tries to pull images even .withPull(false)?","body":"<p>Hi I'm new to Docker and testcontainers and I'm trying to create a <code>DockerComposeContainer</code> with a .yml file.</p>\n<p>I need to expose one of the services and tried using the <code>.withExposedService( String Service, Integer Port)</code> method.</p>\n<p>Though if I call <code>.withExposedService</code> the <code>DockerComposeContainer</code> tries to pull in Images <code>alpine/socat:{$VERSION_NUMBER}</code>. <strong>I do not want to ever pull in any images.</strong> How do I go about this?</p>\n<p>Here is my code</p>\n<pre><code> DockerComposeContainer testContainer = new DockerComposeContainer(new File(&quot;path_to_compose.yml&quot;))\n        .withLocalCompose(true)\n        .withPull(false)\n        .withExposedService(&quot;SERVICE_NAME&quot;, PORT_NUMBER)\n</code></pre>\n<p>I've tried using <code>.withPull(false)</code>, setting <code>pull_policy: never</code> in my <code>docker-compose.yml</code>.\nMy thought was <code>.withPull(false)</code> this issue should be resolved but maybe I don't understand the function properly.</p>\n"},{"tags":["java","string","vector","printf"],"comments":[{"owner":{"account_id":18256279,"reputation":661,"user_id":13290159,"display_name":"0x150"},"score":0,"creation_date":1699826768,"post_id":77470849,"comment_id":136576840,"body_markdown":"The infamous https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo problem","body":"The infamous <a href=\"https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo\" title=\"scanner is skipping nextline after using next or nextfoo\">stackoverflow.com/questions/13102045/&hellip;</a> problem"},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1699834229,"post_id":77470849,"comment_id":136577441,"body_markdown":"It&#39;s called &quot;array&quot; in Java, not &quot;vector&quot;. `Vector` is an outmoded collection class.","body":"It&#39;s called &quot;array&quot; in Java, not &quot;vector&quot;. <code>Vector</code> is an outmoded collection class."}],"answers":[{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699827836,"creation_date":1699827367,"answer_id":77470892,"question_id":77470849,"body_markdown":" - In case `name` is always **one word, no spaces**, then you can use `scan.next()`.\r\n - In case `name` can have **space**, then you should use `scan.nextLine()` (as you do), and then before getting `scan.nextInt()` you should add `scan.nextLine()` (with skipping the return value). \r\n\r\n```java\r\n@Getter\r\n@RequiredArgsConstructor\r\npublic final class Student {\r\n\r\n    private final String name;\r\n    private final double grade1;\r\n    private final double grade2;\r\n    private final double avg;\r\n\r\n}\r\n```\r\n\r\n```java\r\npublic class Program {\r\n\r\n    public static void main(String... args) {\r\n        final Locale locale = Locale.US;\r\n        Scanner scan = new Scanner(System.in);\r\n        scan.useLocale(locale);\r\n\r\n        System.out.print(&quot;How many students will you enter? &quot;);\r\n        int total = scan.nextInt();\r\n        Student[] students = readStudents(total, scan);\r\n\r\n        System.out.print(&quot;Enter min avg grade: &quot;);\r\n        double minAvg = scan.nextDouble();\r\n\r\n        for (Student student : students) {\r\n            if (student.getAvg() &gt;= minAvg)\r\n                System.out.format(locale, &quot;%s %.1f\\n&quot;, student.getName(), student.getAvg());\r\n        }\r\n    }\r\n\r\n    private static Student[] readStudents(int total, Scanner scan) {\r\n        Student[] students = new Student[total];\r\n\r\n        for (int i = 0; i &lt; students.length; i++)\r\n            students[i] = readStudent(i + 1, scan);\r\n\r\n        return students;\r\n    }\r\n\r\n    private static Student readStudent(int num, Scanner scan) {\r\n        System.out.format(&quot;Student %d:\\n&quot;, num);\r\n\r\n        System.out.print(&quot;Name: &quot;);\r\n        String name = scan.next();\r\n\r\n        System.out.print(&quot;1st grade: &quot;);\r\n        double grade1 = scan.nextDouble();\r\n\r\n        System.out.print(&quot;2nd grade: &quot;);\r\n        double grade2 = scan.nextDouble();\r\n\r\n        double avg = (grade1 + grade2) / 2;\r\n        return new Student(name, grade1, grade2, avg);\r\n    }\r\n\r\n}\r\n```","title":"Why is my vector not printing the String?","body":"<ul>\n<li>In case <code>name</code> is always <strong>one word, no spaces</strong>, then you can use <code>scan.next()</code>.</li>\n<li>In case <code>name</code> can have <strong>space</strong>, then you should use <code>scan.nextLine()</code> (as you do), and then before getting <code>scan.nextInt()</code> you should add <code>scan.nextLine()</code> (with skipping the return value).</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@RequiredArgsConstructor\npublic final class Student {\n\n    private final String name;\n    private final double grade1;\n    private final double grade2;\n    private final double avg;\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Program {\n\n    public static void main(String... args) {\n        final Locale locale = Locale.US;\n        Scanner scan = new Scanner(System.in);\n        scan.useLocale(locale);\n\n        System.out.print(&quot;How many students will you enter? &quot;);\n        int total = scan.nextInt();\n        Student[] students = readStudents(total, scan);\n\n        System.out.print(&quot;Enter min avg grade: &quot;);\n        double minAvg = scan.nextDouble();\n\n        for (Student student : students) {\n            if (student.getAvg() &gt;= minAvg)\n                System.out.format(locale, &quot;%s %.1f\\n&quot;, student.getName(), student.getAvg());\n        }\n    }\n\n    private static Student[] readStudents(int total, Scanner scan) {\n        Student[] students = new Student[total];\n\n        for (int i = 0; i &lt; students.length; i++)\n            students[i] = readStudent(i + 1, scan);\n\n        return students;\n    }\n\n    private static Student readStudent(int num, Scanner scan) {\n        System.out.format(&quot;Student %d:\\n&quot;, num);\n\n        System.out.print(&quot;Name: &quot;);\n        String name = scan.next();\n\n        System.out.print(&quot;1st grade: &quot;);\n        double grade1 = scan.nextDouble();\n\n        System.out.print(&quot;2nd grade: &quot;);\n        double grade2 = scan.nextDouble();\n\n        double avg = (grade1 + grade2) / 2;\n        return new Student(name, grade1, grade2, avg);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":27842501,"reputation":1,"user_id":21258703,"display_name":"Laura"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1699826886,"answer_count":1,"score":-1,"last_activity_date":1699896470,"creation_date":1699826465,"question_id":77470849,"body_markdown":"I&#39;m studying vectors and while practicing with a few exercises i got stuck in this particular one, my code doesn&#39;t seem to print the name string, and I don&#39;t know why. In the final project I have to print only the name of the students with an average that are &gt;=6, since the names wont print  checked if the code was functional by printing the average of the approved ones instead of the name!\r\nCan you guys help me fix it?\r\n\r\nHere&#39;s the main class:\r\n\r\n```java\r\npackage Program;\r\n\r\nimport java.util.Scanner;\r\nimport java.util.Locale;\r\nimport Entities.Student;\r\n\r\npublic class Program {\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tLocale.setDefault(Locale.US);\r\n\t\tScanner sc = new Scanner(System.in);\r\n\r\n\t\tString name;\r\n\t\tdouble grade1;\r\n\t\tdouble grade2;\r\n\t\tdouble average;\r\n\r\n\t\tSystem.out.printf(&quot;how many students will you enter? &quot;);\r\n\t\tint n = sc.nextInt();\r\n\r\n\t\tStudent[] vect = new Student[n]; // vector that will store the students created\r\n\r\n\t\tfor (int i = 0; i &lt; vect.length; i++) {\r\n\t\t\tSystem.out.printf(&quot;imput the name, first and second grade for the student number %d%n &quot;, i + 1);\r\n\t\t\tname = sc.nextLine(); // reads the name\r\n\t\t\tsc.nextLine();\r\n\t\t\tgrade1 = sc.nextDouble();\r\n\t\t\tgrade2 = sc.nextDouble();\r\n\t\t\taverage = (grade1 + grade2) / 2;\r\n\t\t\tvect[i] = new Student(name, grade1, grade2, average);\r\n\t\t}\r\n\r\n\t\tfor (int i = 0; i &lt; vect.length; i++) {\r\n\r\n\t\t\tif (vect[i].getAverage() &gt;= 6.0) {\r\n\t\t\t\tSystem.out.printf(&quot;%s%n&quot;, vect[i].getName());\r\n\t\t\t\tSystem.out.printf(&quot;%.2f%n&quot;, vect[i].getAverage());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nHere&#39;s the `Student` class:\r\n\r\n```java\r\npackage Entities;\r\n\r\npublic class Student {\r\n\tprivate String name;\r\n\tprivate double grade1;\r\n\tprivate double grade2;\r\n\tprivate double average;\r\n\r\n\tpublic Student(String name, double grade1, double grade2, double average) {\r\n\t\tthis.name = name;\r\n\t\tthis.grade1 = grade1;\r\n\t\tthis.grade2 = grade2;\r\n\t\tthis.average = average;\r\n\t}\r\n\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\tpublic double getGrade1() {\r\n\t\treturn grade1;\r\n\t}\r\n\r\n\tpublic void setGrade1(double grade1) {\r\n\t\tthis.grade1 = grade1;\r\n\t}\r\n\r\n\tpublic double getGrade2() {\r\n\t\treturn grade2;\r\n\t}\r\n\r\n\tpublic void setGrade2(double grade2) {\r\n\t\tthis.grade2 = grade2;\r\n\t}\r\n\r\n\tpublic double getAverage() {\r\n\t\treturn average;\r\n\t}\r\n\r\n\tpublic void setAverage(double average) {\r\n\t\tthis.average = average;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nThe console log and return is as follows:\r\n\r\n```\r\nhow many students will you enter? 5\r\nimput the name, first and second grade for the student number 1\r\n John\r\n10.0\r\n9.0\r\nimput the name, first and second grade for the student number 2\r\n Mary\r\n5.0\r\n4.5\r\nimput the name, first and second grade for the student number 3\r\n Peter\r\n8.5\r\n9.5\r\nimput the name, first and second grade for the student number 4\r\n Carl\r\n9.9\r\n7.5\r\nimput the name, first and second grade for the student number 5\r\n Patricia\r\n2.5\r\n8.0\r\n\r\n9.50\r\n\r\n9.00\r\n\r\n8.70\r\n```\r\n\r\nThe expected output for the entries in the example were supposed to be:\r\n\r\n```\r\nJohn\r\n9.5\r\n\r\nPeter\r\n9.0\r\n\r\nCarl\r\n8.70\r\n```","title":"Why is my vector not printing the String?","body":"<p>I'm studying vectors and while practicing with a few exercises i got stuck in this particular one, my code doesn't seem to print the name string, and I don't know why. In the final project I have to print only the name of the students with an average that are &gt;=6, since the names wont print  checked if the code was functional by printing the average of the approved ones instead of the name!\nCan you guys help me fix it?</p>\n<p>Here's the main class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Program;\n\nimport java.util.Scanner;\nimport java.util.Locale;\nimport Entities.Student;\n\npublic class Program {\n\n    public static void main(String[] args) {\n\n        Locale.setDefault(Locale.US);\n        Scanner sc = new Scanner(System.in);\n\n        String name;\n        double grade1;\n        double grade2;\n        double average;\n\n        System.out.printf(&quot;how many students will you enter? &quot;);\n        int n = sc.nextInt();\n\n        Student[] vect = new Student[n]; // vector that will store the students created\n\n        for (int i = 0; i &lt; vect.length; i++) {\n            System.out.printf(&quot;imput the name, first and second grade for the student number %d%n &quot;, i + 1);\n            name = sc.nextLine(); // reads the name\n            sc.nextLine();\n            grade1 = sc.nextDouble();\n            grade2 = sc.nextDouble();\n            average = (grade1 + grade2) / 2;\n            vect[i] = new Student(name, grade1, grade2, average);\n        }\n\n        for (int i = 0; i &lt; vect.length; i++) {\n\n            if (vect[i].getAverage() &gt;= 6.0) {\n                System.out.printf(&quot;%s%n&quot;, vect[i].getName());\n                System.out.printf(&quot;%.2f%n&quot;, vect[i].getAverage());\n            }\n        }\n    }\n}\n</code></pre>\n<p>Here's the <code>Student</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Entities;\n\npublic class Student {\n    private String name;\n    private double grade1;\n    private double grade2;\n    private double average;\n\n    public Student(String name, double grade1, double grade2, double average) {\n        this.name = name;\n        this.grade1 = grade1;\n        this.grade2 = grade2;\n        this.average = average;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public double getGrade1() {\n        return grade1;\n    }\n\n    public void setGrade1(double grade1) {\n        this.grade1 = grade1;\n    }\n\n    public double getGrade2() {\n        return grade2;\n    }\n\n    public void setGrade2(double grade2) {\n        this.grade2 = grade2;\n    }\n\n    public double getAverage() {\n        return average;\n    }\n\n    public void setAverage(double average) {\n        this.average = average;\n    }\n\n}\n</code></pre>\n<p>The console log and return is as follows:</p>\n<pre><code>how many students will you enter? 5\nimput the name, first and second grade for the student number 1\n John\n10.0\n9.0\nimput the name, first and second grade for the student number 2\n Mary\n5.0\n4.5\nimput the name, first and second grade for the student number 3\n Peter\n8.5\n9.5\nimput the name, first and second grade for the student number 4\n Carl\n9.9\n7.5\nimput the name, first and second grade for the student number 5\n Patricia\n2.5\n8.0\n\n9.50\n\n9.00\n\n8.70\n</code></pre>\n<p>The expected output for the entries in the example were supposed to be:</p>\n<pre><code>John\n9.5\n\nPeter\n9.0\n\nCarl\n8.70\n</code></pre>\n"},{"tags":["java","android","sql","database","android-room"],"comments":[{"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":2,"creation_date":1581635023,"post_id":60217615,"comment_id":106513145,"body_markdown":"Can you include your `CustomerOfServiceProvider` class? That&#39;s what it is trying to fill in to create for your `getCustomersOfServiceProvider()` return type.","body":"Can you include your <code>CustomerOfServiceProvider</code> class? That&#39;s what it is trying to fill in to create for your <code>getCustomersOfServiceProvider()</code> return type."},{"owner":{"account_id":12547796,"reputation":303,"user_id":9130499,"display_name":"Omid Fast"},"score":0,"creation_date":1581678654,"post_id":60217615,"comment_id":106525884,"body_markdown":"i added it. tnx","body":"i added it. tnx"}],"answers":[{"tags":[],"owner":{"account_id":12547796,"reputation":303,"user_id":9130499,"display_name":"Omid Fast"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581795416,"creation_date":1581795416,"answer_id":60242435,"question_id":60217615,"body_markdown":"thank you [@ianhanniballake](https://stackoverflow.com/users/1676363/ianhanniballake). problem solved!.\r\n&lt;br /&gt;in **CustomerDAO** file i found this problem:\r\n```\r\n@Transaction\r\n    @Query(&quot;SELECT * FROM Customer&quot;)\r\n    public List&lt;CustomerOfServiceProvider&gt; getCustomersOfServiceProvider();\r\n```\r\ntype of this list must be ServiceProvidersOfCustomer:\r\n```\r\n@Transaction\r\n    @Query(&quot;SELECT * FROM Customer&quot;)\r\n    public List&lt;ServiceProviderOfCustomer&gt; getServiceProvidersOfCustomer();\r\n```","title":"error: incompatible types: &lt;null&gt; cannot be converted to int if (!_cursor.isNull(null)) using android room","body":"<p>thank you <a href=\"https://stackoverflow.com/users/1676363/ianhanniballake\">@ianhanniballake</a>. problem solved!.\n<br />in <strong>CustomerDAO</strong> file i found this problem:</p>\n\n<pre><code>@Transaction\n    @Query(\"SELECT * FROM Customer\")\n    public List&lt;CustomerOfServiceProvider&gt; getCustomersOfServiceProvider();\n</code></pre>\n\n<p>type of this list must be ServiceProvidersOfCustomer:</p>\n\n<pre><code>@Transaction\n    @Query(\"SELECT * FROM Customer\")\n    public List&lt;ServiceProviderOfCustomer&gt; getServiceProvidersOfCustomer();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":974734,"reputation":2864,"user_id":4957915,"display_name":"solamour"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1646245684,"creation_date":1646245684,"answer_id":71327523,"question_id":60217615,"body_markdown":"This has nothing to do with the problem described by the original poster, but if you got here via Google search, here is something that might be relevant.\r\n\r\nI recently updated Room from 2.4.x to 2.5.x and encountered `error: incompatible types: &lt;null&gt; cannot be converted to int`.\r\n\r\nI had to replace `androidx.room.OnConflictStrategy.REPLACE` with `androidx.room.OnConflictStrategy.Companion.REPLACE` to fix.","title":"error: incompatible types: &lt;null&gt; cannot be converted to int if (!_cursor.isNull(null)) using android room","body":"<p>This has nothing to do with the problem described by the original poster, but if you got here via Google search, here is something that might be relevant.</p>\n<p>I recently updated Room from 2.4.x to 2.5.x and encountered <code>error: incompatible types: &lt;null&gt; cannot be converted to int</code>.</p>\n<p>I had to replace <code>androidx.room.OnConflictStrategy.REPLACE</code> with <code>androidx.room.OnConflictStrategy.Companion.REPLACE</code> to fix.</p>\n"},{"tags":[],"owner":{"account_id":288238,"reputation":14443,"user_id":588532,"accept_rate":88,"display_name":"Uriel Frankel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676215719,"creation_date":1676215719,"answer_id":75428096,"question_id":60217615,"body_markdown":"Like @solamour I also upgraded to room 2.5.x but my problem was this line:\r\n\r\n        @ColumnInfo(name = &quot;elapsedTime&quot;, typeAffinity = INTEGER, defaultValue = &quot;0&quot;)\r\n\r\nAnd I changed it to:\r\n       \r\n        @ColumnInfo(name = &quot;elapsedTime&quot;, typeAffinity = ColumnInfo.Companion.INTEGER, defaultValue = &quot;0&quot;)\r\n\r\n","title":"error: incompatible types: &lt;null&gt; cannot be converted to int if (!_cursor.isNull(null)) using android room","body":"<p>Like @solamour I also upgraded to room 2.5.x but my problem was this line:</p>\n<pre><code>    @ColumnInfo(name = &quot;elapsedTime&quot;, typeAffinity = INTEGER, defaultValue = &quot;0&quot;)\n</code></pre>\n<p>And I changed it to:</p>\n<pre><code>    @ColumnInfo(name = &quot;elapsedTime&quot;, typeAffinity = ColumnInfo.Companion.INTEGER, defaultValue = &quot;0&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":148440,"reputation":54364,"user_id":360211,"accept_rate":76,"display_name":"weston"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699895955,"creation_date":1699895955,"answer_id":77475680,"question_id":60217615,"body_markdown":"If you previously had code in the style:\r\n\r\n```\r\nimport androidx.room.OnConflictStrategy.REPLACE\r\n\r\n@Update(onConflict = REPLACE)\r\n```\r\n\r\nThis will no longer work, and can be fixed by the addition of `Companion`, however, the style the API designers expected you to use would be:\r\n\r\n```\r\nimport androidx.room.OnConflictStrategy\r\n\r\n@Update(onConflict = OnConflictStrategy.REPLACE)\r\n```\r\n\r\nWhich requires no fix.","title":"error: incompatible types: &lt;null&gt; cannot be converted to int if (!_cursor.isNull(null)) using android room","body":"<p>If you previously had code in the style:</p>\n<pre><code>import androidx.room.OnConflictStrategy.REPLACE\n\n@Update(onConflict = REPLACE)\n</code></pre>\n<p>This will no longer work, and can be fixed by the addition of <code>Companion</code>, however, the style the API designers expected you to use would be:</p>\n<pre><code>import androidx.room.OnConflictStrategy\n\n@Update(onConflict = OnConflictStrategy.REPLACE)\n</code></pre>\n<p>Which requires no fix.</p>\n"}],"owner":{"account_id":12547796,"reputation":303,"user_id":9130499,"display_name":"Omid Fast"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6233,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":4,"score":6,"last_activity_date":1699895955,"creation_date":1581633995,"question_id":60217615,"body_markdown":"I&#39;m using room for my android database. here i have a many to many relationship between Customer and ServiceProvider class i used [this tutorial](https://developer.android.com/training/data-storage/room/relationships#one-to-many) to do it but after compiling i received this error:\r\n&gt;/home/omid/IntelliJIDEAProjects/Accounting/app/build/generated/ap_generated_sources/debug/out/com/omidmsl/accounting/db/CustomerDAO_Impl.java:69: error: incompatible types: &lt;null&gt; cannot be converted to int\r\n          if (!_cursor.isNull(null)) {\r\n\r\nand it is mentioning to this code **CustomerDAO_Impl.java** (compiler created this):\r\n```\r\npackage com.omidmsl.accounting.db;\r\n\r\nimport android.database.Cursor;\r\nimport androidx.collection.ArrayMap;\r\nimport androidx.room.RoomDatabase;\r\nimport androidx.room.RoomSQLiteQuery;\r\nimport androidx.room.util.CursorUtil;\r\nimport androidx.room.util.DBUtil;\r\nimport androidx.room.util.StringUtil;\r\nimport com.omidmsl.accounting.models.Business;\r\nimport com.omidmsl.accounting.models.Customer;\r\nimport com.omidmsl.accounting.models.serviceprovider.CustomerOfServiceProvider;\r\nimport java.lang.Override;\r\nimport java.lang.String;\r\nimport java.lang.StringBuilder;\r\nimport java.lang.SuppressWarnings;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Set;\r\n\r\n@SuppressWarnings({&quot;unchecked&quot;, &quot;deprecation&quot;})\r\npublic final class CustomerDAO_Impl implements CustomerDAO {\r\n  private final RoomDatabase __db;\r\n\r\n  public CustomerDAO_Impl(RoomDatabase __db) {\r\n    this.__db = __db;\r\n  }\r\n\r\n  @Override\r\n  public List&lt;Customer&gt; getCustomers() {\r\n    final String _sql = &quot;SELECT * FROM Customer&quot;;\r\n    final RoomSQLiteQuery _statement = RoomSQLiteQuery.acquire(_sql, 0);\r\n    __db.assertNotSuspendingTransaction();\r\n    final Cursor _cursor = DBUtil.query(__db, _statement, false, null);\r\n    try {\r\n      final int _cursorIndexOfCustomerName = CursorUtil.getColumnIndexOrThrow(_cursor, &quot;customerName&quot;);\r\n      final int _cursorIndexOfPhoneNumber = CursorUtil.getColumnIndexOrThrow(_cursor, &quot;phoneNumber&quot;);\r\n      final List&lt;Customer&gt; _result = new ArrayList&lt;Customer&gt;(_cursor.getCount());\r\n      while(_cursor.moveToNext()) {\r\n        final Customer _item;\r\n        _item = new Customer();\r\n        final String _tmpCustomerName;\r\n        _tmpCustomerName = _cursor.getString(_cursorIndexOfCustomerName);\r\n        _item.setCustomerName(_tmpCustomerName);\r\n        final String _tmpPhoneNumber;\r\n        _tmpPhoneNumber = _cursor.getString(_cursorIndexOfPhoneNumber);\r\n        _item.setPhoneNumber(_tmpPhoneNumber);\r\n        _result.add(_item);\r\n      }\r\n      return _result;\r\n    } finally {\r\n      _cursor.close();\r\n      _statement.release();\r\n    }\r\n  }\r\n\r\n  @Override\r\n  public List&lt;CustomerOfServiceProvider&gt; getCustomersOfServiceProvider() {\r\n    final String _sql = &quot;SELECT * FROM Customer&quot;;\r\n    final RoomSQLiteQuery _statement = RoomSQLiteQuery.acquire(_sql, 0);\r\n    __db.assertNotSuspendingTransaction();\r\n    __db.beginTransaction();\r\n    try {\r\n      final Cursor _cursor = DBUtil.query(__db, _statement, true, null);\r\n      try {\r\n        final int _cursorIndexOfPhoneNumber = CursorUtil.getColumnIndexOrThrow(_cursor, &quot;phoneNumber&quot;);\r\n        final ArrayMap&lt;String, ArrayList&lt;Customer&gt;&gt; _collectionCustomers = new ArrayMap&lt;String, ArrayList&lt;Customer&gt;&gt;();\r\n        while (_cursor.moveToNext()) {\r\n          if (!_cursor.isNull(null)) {\r\n            final String _tmpKey = _cursor.getString(null);\r\n            ArrayList&lt;Customer&gt; _tmpCustomersCollection = _collectionCustomers.get(_tmpKey);\r\n            if (_tmpCustomersCollection == null) {\r\n              _tmpCustomersCollection = new ArrayList&lt;Customer&gt;();\r\n              _collectionCustomers.put(_tmpKey, _tmpCustomersCollection);\r\n            }\r\n          }\r\n        }\r\n        _cursor.moveToPosition(-1);\r\n        __fetchRelationshipCustomerAscomOmidmslAccountingModelsCustomer(_collectionCustomers);\r\n        final List&lt;CustomerOfServiceProvider&gt; _result = new ArrayList&lt;CustomerOfServiceProvider&gt;(_cursor.getCount());\r\n        while(_cursor.moveToNext()) {\r\n          final CustomerOfServiceProvider _item;\r\n          final Business _tmpServiceProvider;\r\n          if (! (_cursor.isNull(_cursorIndexOfPhoneNumber))) {\r\n            _tmpServiceProvider = new Business();\r\n            final String _tmpPhoneNumber;\r\n            _tmpPhoneNumber = _cursor.getString(_cursorIndexOfPhoneNumber);\r\n            _tmpServiceProvider.setPhoneNumber(_tmpPhoneNumber);\r\n          }  else  {\r\n            _tmpServiceProvider = null;\r\n          }\r\n          ArrayList&lt;Customer&gt; _tmpCustomersCollection_1 = null;\r\n          if (!_cursor.isNull(null)) {\r\n            final String _tmpKey_1 = _cursor.getString(null);\r\n            _tmpCustomersCollection_1 = _collectionCustomers.get(_tmpKey_1);\r\n          }\r\n          if (_tmpCustomersCollection_1 == null) {\r\n            _tmpCustomersCollection_1 = new ArrayList&lt;Customer&gt;();\r\n          }\r\n          _item = new CustomerOfServiceProvider();\r\n          _item.setServiceProvider(_tmpServiceProvider);\r\n          _item.setCustomers(_tmpCustomersCollection_1);\r\n          _result.add(_item);\r\n        }\r\n        __db.setTransactionSuccessful();\r\n        return _result;\r\n      } finally {\r\n        _cursor.close();\r\n        _statement.release();\r\n      }\r\n    } finally {\r\n      __db.endTransaction();\r\n    }\r\n  }\r\n\r\n  @Override\r\n  public List&lt;Customer&gt; getCustomer(final String cName) {\r\n    final String _sql = &quot;SELECT * FROM Customer WHERE customerName = ?&quot;;\r\n    final RoomSQLiteQuery _statement = RoomSQLiteQuery.acquire(_sql, 1);\r\n    int _argIndex = 1;\r\n    if (cName == null) {\r\n      _statement.bindNull(_argIndex);\r\n    } else {\r\n      _statement.bindString(_argIndex, cName);\r\n    }\r\n    __db.assertNotSuspendingTransaction();\r\n    final Cursor _cursor = DBUtil.query(__db, _statement, false, null);\r\n    try {\r\n      final int _cursorIndexOfCustomerName = CursorUtil.getColumnIndexOrThrow(_cursor, &quot;customerName&quot;);\r\n      final int _cursorIndexOfPhoneNumber = CursorUtil.getColumnIndexOrThrow(_cursor, &quot;phoneNumber&quot;);\r\n      final List&lt;Customer&gt; _result = new ArrayList&lt;Customer&gt;(_cursor.getCount());\r\n      while(_cursor.moveToNext()) {\r\n        final Customer _item;\r\n        _item = new Customer();\r\n        final String _tmpCustomerName;\r\n        _tmpCustomerName = _cursor.getString(_cursorIndexOfCustomerName);\r\n        _item.setCustomerName(_tmpCustomerName);\r\n        final String _tmpPhoneNumber;\r\n        _tmpPhoneNumber = _cursor.getString(_cursorIndexOfPhoneNumber);\r\n        _item.setPhoneNumber(_tmpPhoneNumber);\r\n        _result.add(_item);\r\n      }\r\n      return _result;\r\n    } finally {\r\n      _cursor.close();\r\n      _statement.release();\r\n    }\r\n  }\r\n\r\n  private void __fetchRelationshipCustomerAscomOmidmslAccountingModelsCustomer(final ArrayMap&lt;String, ArrayList&lt;Customer&gt;&gt; _map) {\r\n    final Set&lt;String&gt; __mapKeySet = _map.keySet();\r\n    if (__mapKeySet.isEmpty()) {\r\n      return;\r\n    }\r\n    // check if the size is too big, if so divide;\r\n    if(_map.size() &gt; RoomDatabase.MAX_BIND_PARAMETER_CNT) {\r\n      ArrayMap&lt;String, ArrayList&lt;Customer&gt;&gt; _tmpInnerMap = new ArrayMap&lt;String, ArrayList&lt;Customer&gt;&gt;(androidx.room.RoomDatabase.MAX_BIND_PARAMETER_CNT);\r\n      int _tmpIndex = 0;\r\n      int _mapIndex = 0;\r\n      final int _limit = _map.size();\r\n      while(_mapIndex &lt; _limit) {\r\n        _tmpInnerMap.put(_map.keyAt(_mapIndex), _map.valueAt(_mapIndex));\r\n        _mapIndex++;\r\n        _tmpIndex++;\r\n        if(_tmpIndex == RoomDatabase.MAX_BIND_PARAMETER_CNT) {\r\n          __fetchRelationshipCustomerAscomOmidmslAccountingModelsCustomer(_tmpInnerMap);\r\n          _tmpInnerMap = new ArrayMap&lt;String, ArrayList&lt;Customer&gt;&gt;(RoomDatabase.MAX_BIND_PARAMETER_CNT);\r\n          _tmpIndex = 0;\r\n        }\r\n      }\r\n      if(_tmpIndex &gt; 0) {\r\n        __fetchRelationshipCustomerAscomOmidmslAccountingModelsCustomer(_tmpInnerMap);\r\n      }\r\n      return;\r\n    }\r\n    StringBuilder _stringBuilder = StringUtil.newStringBuilder();\r\n    _stringBuilder.append(&quot;SELECT `Customer`.`customerName` AS `customerName`,`Customer`.`phoneNumber` AS `phoneNumber`,_junction.`businessName` FROM `Service` AS _junction INNER JOIN `Customer` ON (_junction.`customerName` = `Customer`.`customerName`) WHERE _junction.`businessName` IN (&quot;);\r\n    final int _inputSize = __mapKeySet.size();\r\n    StringUtil.appendPlaceholders(_stringBuilder, _inputSize);\r\n    _stringBuilder.append(&quot;)&quot;);\r\n    final String _sql = _stringBuilder.toString();\r\n    final int _argCount = 0 + _inputSize;\r\n    final RoomSQLiteQuery _stmt = RoomSQLiteQuery.acquire(_sql, _argCount);\r\n    int _argIndex = 1;\r\n    for (String _item : __mapKeySet) {\r\n      if (_item == null) {\r\n        _stmt.bindNull(_argIndex);\r\n      } else {\r\n        _stmt.bindString(_argIndex, _item);\r\n      }\r\n      _argIndex ++;\r\n    }\r\n    final Cursor _cursor = DBUtil.query(__db, _stmt, false, null);\r\n    try {\r\n      final int _itemKeyIndex = 2; // _junction.businessName;\r\n      if (_itemKeyIndex == -1) {\r\n        return;\r\n      }\r\n      final int _cursorIndexOfCustomerName = CursorUtil.getColumnIndex(_cursor, &quot;customerName&quot;);\r\n      final int _cursorIndexOfPhoneNumber = CursorUtil.getColumnIndex(_cursor, &quot;phoneNumber&quot;);\r\n      while(_cursor.moveToNext()) {\r\n        if (!_cursor.isNull(_itemKeyIndex)) {\r\n          final String _tmpKey = _cursor.getString(_itemKeyIndex);\r\n          ArrayList&lt;Customer&gt; _tmpRelation = _map.get(_tmpKey);\r\n          if (_tmpRelation != null) {\r\n            final Customer _item_1;\r\n            _item_1 = new Customer();\r\n            if (_cursorIndexOfCustomerName != -1) {\r\n              final String _tmpCustomerName;\r\n              _tmpCustomerName = _cursor.getString(_cursorIndexOfCustomerName);\r\n              _item_1.setCustomerName(_tmpCustomerName);\r\n            }\r\n            if (_cursorIndexOfPhoneNumber != -1) {\r\n              final String _tmpPhoneNumber;\r\n              _tmpPhoneNumber = _cursor.getString(_cursorIndexOfPhoneNumber);\r\n              _item_1.setPhoneNumber(_tmpPhoneNumber);\r\n            }\r\n            _tmpRelation.add(_item_1);\r\n          }\r\n        }\r\n      }\r\n    } finally {\r\n      _cursor.close();\r\n    }\r\n  }\r\n}\r\n\r\n```\r\nand here is the rest of my codes:&lt;br /&gt;\r\n**Customer.java:**\r\n```\r\npackage com.omidmsl.accounting.models;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.room.Entity;\r\nimport androidx.room.PrimaryKey;\r\n\r\n@Entity(tableName = &quot;Customer&quot;)\r\npublic class Customer {\r\n\r\n    public static final String KEY_NAME = &quot;customer_name&quot;;\r\n    public static final String KEY_PHONE_NUMBER = &quot;phone_number&quot;;\r\n\r\n    @NonNull\r\n    @PrimaryKey\r\n    private String customerName;\r\n    private String phoneNumber;\r\n\r\n    public String getCustomerName() {\r\n        return customerName;\r\n    }\r\n\r\n    public void setCustomerName(String customerName) {\r\n        this.customerName = customerName;\r\n    }\r\n\r\n    public String getPhoneNumber() {\r\n        return phoneNumber;\r\n    }\r\n\r\n    public void setPhoneNumber(String phoneNumber) {\r\n        this.phoneNumber = phoneNumber;\r\n    }\r\n}\r\n```\r\n**CustomerDAO.java:**\r\n```\r\npackage com.omidmsl.accounting.db;\r\n\r\nimport androidx.room.Dao;\r\nimport androidx.room.Query;\r\nimport androidx.room.Transaction;\r\nimport com.omidmsl.accounting.models.Customer;\r\nimport com.omidmsl.accounting.models.serviceprovider.CustomerOfServiceProvider;\r\n\r\nimport java.util.List;\r\n\r\n@Dao\r\npublic interface CustomerDAO {\r\n\r\n    @Query(&quot;SELECT * FROM Customer&quot;)\r\n    public List&lt;Customer&gt; getCustomers();\r\n\r\n    @Transaction\r\n    @Query(&quot;SELECT * FROM Customer&quot;)\r\n    public List&lt;CustomerOfServiceProvider&gt; getCustomersOfServiceProvider();\r\n\r\n    @Query(&quot;SELECT * FROM Customer WHERE customerName = :cName&quot;)\r\n    public List&lt;Customer&gt; getCustomer(String cName);\r\n}\r\n\r\n```\r\n**Business.java:**\r\n```\r\npackage com.omidmsl.accounting.models;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.room.Entity;\r\nimport androidx.room.*;\r\n\r\n\r\n@Entity(tableName = &quot;Business&quot;)\r\npublic class Business {\r\n\r\n    public static final String KEY_TYPE = &quot;type&quot;;\r\n    public static final String KEY_NAME = &quot;business_name&quot;;\r\n    public static final String KEY_PHONE_NUMBER = &quot;phone_number&quot;;\r\n\r\n    private int type;\r\n    @PrimaryKey\r\n    @NonNull\r\n    private String businessName;\r\n    private String phoneNumber;\r\n    @Ignore\r\n    private long costs;\r\n    @Ignore\r\n    private long buys;\r\n\r\n    public Business(int type) {\r\n        this.type = type;\r\n    }\r\n\r\n    public int getType() {\r\n        return type;\r\n    }\r\n\r\n    public void setType(int type) {\r\n        this.type = type;\r\n    }\r\n\r\n    public Business() {\r\n        businessName = &quot;&quot;;\r\n    }\r\n\r\n    public String getBusinessName() {\r\n        return businessName;\r\n    }\r\n\r\n    public void setBusinessName(String businessName) {\r\n        this.businessName = businessName;\r\n    }\r\n\r\n    public String getPhoneNumber() {\r\n        return phoneNumber;\r\n    }\r\n\r\n    public void setPhoneNumber(String phoneNumber) {\r\n        this.phoneNumber = phoneNumber;\r\n    }\r\n\r\n    public long getCosts() {\r\n        return costs;\r\n    }\r\n\r\n    public void setCosts(long costs) {\r\n        this.costs = costs;\r\n    }\r\n\r\n    public long getBuys() {\r\n        return buys;\r\n    }\r\n\r\n    public void setBuys(long buys) {\r\n        this.buys = buys;\r\n    }\r\n}\r\n\r\n```\r\n**ServiceProviderDAO.java:**\r\n```\r\npackage com.omidmsl.accounting.db;\r\n\r\nimport androidx.room.Dao;\r\nimport androidx.room.Query;\r\nimport androidx.room.Transaction;\r\nimport com.omidmsl.accounting.models.serviceprovider.ServiceProviderOfCustomer;\r\n\r\nimport java.util.List;\r\n\r\n@Dao\r\npublic interface ServiceProviderDAO {\r\n    @Transaction\r\n    @Query(&quot;SELECT * FROM Business&quot;)\r\n    public List&lt;ServiceProviderOfCustomer&gt; getServiceProvidersOfCustomer();\r\n}\r\n```\r\n**CustomersOfServiceProvider.java:**\r\n```\r\npackage com.omidmsl.accounting.models.serviceprovider;\r\n\r\nimport androidx.room.*;\r\nimport com.omidmsl.accounting.models.Business;\r\nimport com.omidmsl.accounting.models.Customer;\r\n\r\nimport java.util.List;\r\n\r\npublic class CustomerOfServiceProvider {\r\n    @Embedded\r\n    private Business serviceProvider;\r\n    @Relation(\r\n            parentColumn = &quot;businessName&quot;,\r\n            entityColumn = &quot;customerName&quot;,\r\n            associateBy = @Junction(Service.class)\r\n    )\r\n    private List&lt;Customer&gt; customers;\r\n\r\n    public Business getServiceProvider() {\r\n        return serviceProvider;\r\n    }\r\n\r\n    public void setServiceProvider(Business serviceProvider) {\r\n        this.serviceProvider = serviceProvider;\r\n    }\r\n\r\n    public List&lt;Customer&gt; getCustomers() {\r\n        return customers;\r\n    }\r\n\r\n    public void setCustomers(List&lt;Customer&gt; customers) {\r\n        this.customers = customers;\r\n    }\r\n}\r\n```\r\nplease help me","title":"error: incompatible types: &lt;null&gt; cannot be converted to int if (!_cursor.isNull(null)) using android room","body":"<p>I'm using room for my android database. here i have a many to many relationship between Customer and ServiceProvider class i used <a href=\"https://developer.android.com/training/data-storage/room/relationships#one-to-many\" rel=\"noreferrer\">this tutorial</a> to do it but after compiling i received this error:</p>\n\n<blockquote>\n  <p>/home/omid/IntelliJIDEAProjects/Accounting/app/build/generated/ap_generated_sources/debug/out/com/omidmsl/accounting/db/CustomerDAO_Impl.java:69: error: incompatible types:  cannot be converted to int\n            if (!_cursor.isNull(null)) {</p>\n</blockquote>\n\n<p>and it is mentioning to this code <strong>CustomerDAO_Impl.java</strong> (compiler created this):</p>\n\n<pre><code>package com.omidmsl.accounting.db;\n\nimport android.database.Cursor;\nimport androidx.collection.ArrayMap;\nimport androidx.room.RoomDatabase;\nimport androidx.room.RoomSQLiteQuery;\nimport androidx.room.util.CursorUtil;\nimport androidx.room.util.DBUtil;\nimport androidx.room.util.StringUtil;\nimport com.omidmsl.accounting.models.Business;\nimport com.omidmsl.accounting.models.Customer;\nimport com.omidmsl.accounting.models.serviceprovider.CustomerOfServiceProvider;\nimport java.lang.Override;\nimport java.lang.String;\nimport java.lang.StringBuilder;\nimport java.lang.SuppressWarnings;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Set;\n\n@SuppressWarnings({\"unchecked\", \"deprecation\"})\npublic final class CustomerDAO_Impl implements CustomerDAO {\n  private final RoomDatabase __db;\n\n  public CustomerDAO_Impl(RoomDatabase __db) {\n    this.__db = __db;\n  }\n\n  @Override\n  public List&lt;Customer&gt; getCustomers() {\n    final String _sql = \"SELECT * FROM Customer\";\n    final RoomSQLiteQuery _statement = RoomSQLiteQuery.acquire(_sql, 0);\n    __db.assertNotSuspendingTransaction();\n    final Cursor _cursor = DBUtil.query(__db, _statement, false, null);\n    try {\n      final int _cursorIndexOfCustomerName = CursorUtil.getColumnIndexOrThrow(_cursor, \"customerName\");\n      final int _cursorIndexOfPhoneNumber = CursorUtil.getColumnIndexOrThrow(_cursor, \"phoneNumber\");\n      final List&lt;Customer&gt; _result = new ArrayList&lt;Customer&gt;(_cursor.getCount());\n      while(_cursor.moveToNext()) {\n        final Customer _item;\n        _item = new Customer();\n        final String _tmpCustomerName;\n        _tmpCustomerName = _cursor.getString(_cursorIndexOfCustomerName);\n        _item.setCustomerName(_tmpCustomerName);\n        final String _tmpPhoneNumber;\n        _tmpPhoneNumber = _cursor.getString(_cursorIndexOfPhoneNumber);\n        _item.setPhoneNumber(_tmpPhoneNumber);\n        _result.add(_item);\n      }\n      return _result;\n    } finally {\n      _cursor.close();\n      _statement.release();\n    }\n  }\n\n  @Override\n  public List&lt;CustomerOfServiceProvider&gt; getCustomersOfServiceProvider() {\n    final String _sql = \"SELECT * FROM Customer\";\n    final RoomSQLiteQuery _statement = RoomSQLiteQuery.acquire(_sql, 0);\n    __db.assertNotSuspendingTransaction();\n    __db.beginTransaction();\n    try {\n      final Cursor _cursor = DBUtil.query(__db, _statement, true, null);\n      try {\n        final int _cursorIndexOfPhoneNumber = CursorUtil.getColumnIndexOrThrow(_cursor, \"phoneNumber\");\n        final ArrayMap&lt;String, ArrayList&lt;Customer&gt;&gt; _collectionCustomers = new ArrayMap&lt;String, ArrayList&lt;Customer&gt;&gt;();\n        while (_cursor.moveToNext()) {\n          if (!_cursor.isNull(null)) {\n            final String _tmpKey = _cursor.getString(null);\n            ArrayList&lt;Customer&gt; _tmpCustomersCollection = _collectionCustomers.get(_tmpKey);\n            if (_tmpCustomersCollection == null) {\n              _tmpCustomersCollection = new ArrayList&lt;Customer&gt;();\n              _collectionCustomers.put(_tmpKey, _tmpCustomersCollection);\n            }\n          }\n        }\n        _cursor.moveToPosition(-1);\n        __fetchRelationshipCustomerAscomOmidmslAccountingModelsCustomer(_collectionCustomers);\n        final List&lt;CustomerOfServiceProvider&gt; _result = new ArrayList&lt;CustomerOfServiceProvider&gt;(_cursor.getCount());\n        while(_cursor.moveToNext()) {\n          final CustomerOfServiceProvider _item;\n          final Business _tmpServiceProvider;\n          if (! (_cursor.isNull(_cursorIndexOfPhoneNumber))) {\n            _tmpServiceProvider = new Business();\n            final String _tmpPhoneNumber;\n            _tmpPhoneNumber = _cursor.getString(_cursorIndexOfPhoneNumber);\n            _tmpServiceProvider.setPhoneNumber(_tmpPhoneNumber);\n          }  else  {\n            _tmpServiceProvider = null;\n          }\n          ArrayList&lt;Customer&gt; _tmpCustomersCollection_1 = null;\n          if (!_cursor.isNull(null)) {\n            final String _tmpKey_1 = _cursor.getString(null);\n            _tmpCustomersCollection_1 = _collectionCustomers.get(_tmpKey_1);\n          }\n          if (_tmpCustomersCollection_1 == null) {\n            _tmpCustomersCollection_1 = new ArrayList&lt;Customer&gt;();\n          }\n          _item = new CustomerOfServiceProvider();\n          _item.setServiceProvider(_tmpServiceProvider);\n          _item.setCustomers(_tmpCustomersCollection_1);\n          _result.add(_item);\n        }\n        __db.setTransactionSuccessful();\n        return _result;\n      } finally {\n        _cursor.close();\n        _statement.release();\n      }\n    } finally {\n      __db.endTransaction();\n    }\n  }\n\n  @Override\n  public List&lt;Customer&gt; getCustomer(final String cName) {\n    final String _sql = \"SELECT * FROM Customer WHERE customerName = ?\";\n    final RoomSQLiteQuery _statement = RoomSQLiteQuery.acquire(_sql, 1);\n    int _argIndex = 1;\n    if (cName == null) {\n      _statement.bindNull(_argIndex);\n    } else {\n      _statement.bindString(_argIndex, cName);\n    }\n    __db.assertNotSuspendingTransaction();\n    final Cursor _cursor = DBUtil.query(__db, _statement, false, null);\n    try {\n      final int _cursorIndexOfCustomerName = CursorUtil.getColumnIndexOrThrow(_cursor, \"customerName\");\n      final int _cursorIndexOfPhoneNumber = CursorUtil.getColumnIndexOrThrow(_cursor, \"phoneNumber\");\n      final List&lt;Customer&gt; _result = new ArrayList&lt;Customer&gt;(_cursor.getCount());\n      while(_cursor.moveToNext()) {\n        final Customer _item;\n        _item = new Customer();\n        final String _tmpCustomerName;\n        _tmpCustomerName = _cursor.getString(_cursorIndexOfCustomerName);\n        _item.setCustomerName(_tmpCustomerName);\n        final String _tmpPhoneNumber;\n        _tmpPhoneNumber = _cursor.getString(_cursorIndexOfPhoneNumber);\n        _item.setPhoneNumber(_tmpPhoneNumber);\n        _result.add(_item);\n      }\n      return _result;\n    } finally {\n      _cursor.close();\n      _statement.release();\n    }\n  }\n\n  private void __fetchRelationshipCustomerAscomOmidmslAccountingModelsCustomer(final ArrayMap&lt;String, ArrayList&lt;Customer&gt;&gt; _map) {\n    final Set&lt;String&gt; __mapKeySet = _map.keySet();\n    if (__mapKeySet.isEmpty()) {\n      return;\n    }\n    // check if the size is too big, if so divide;\n    if(_map.size() &gt; RoomDatabase.MAX_BIND_PARAMETER_CNT) {\n      ArrayMap&lt;String, ArrayList&lt;Customer&gt;&gt; _tmpInnerMap = new ArrayMap&lt;String, ArrayList&lt;Customer&gt;&gt;(androidx.room.RoomDatabase.MAX_BIND_PARAMETER_CNT);\n      int _tmpIndex = 0;\n      int _mapIndex = 0;\n      final int _limit = _map.size();\n      while(_mapIndex &lt; _limit) {\n        _tmpInnerMap.put(_map.keyAt(_mapIndex), _map.valueAt(_mapIndex));\n        _mapIndex++;\n        _tmpIndex++;\n        if(_tmpIndex == RoomDatabase.MAX_BIND_PARAMETER_CNT) {\n          __fetchRelationshipCustomerAscomOmidmslAccountingModelsCustomer(_tmpInnerMap);\n          _tmpInnerMap = new ArrayMap&lt;String, ArrayList&lt;Customer&gt;&gt;(RoomDatabase.MAX_BIND_PARAMETER_CNT);\n          _tmpIndex = 0;\n        }\n      }\n      if(_tmpIndex &gt; 0) {\n        __fetchRelationshipCustomerAscomOmidmslAccountingModelsCustomer(_tmpInnerMap);\n      }\n      return;\n    }\n    StringBuilder _stringBuilder = StringUtil.newStringBuilder();\n    _stringBuilder.append(\"SELECT `Customer`.`customerName` AS `customerName`,`Customer`.`phoneNumber` AS `phoneNumber`,_junction.`businessName` FROM `Service` AS _junction INNER JOIN `Customer` ON (_junction.`customerName` = `Customer`.`customerName`) WHERE _junction.`businessName` IN (\");\n    final int _inputSize = __mapKeySet.size();\n    StringUtil.appendPlaceholders(_stringBuilder, _inputSize);\n    _stringBuilder.append(\")\");\n    final String _sql = _stringBuilder.toString();\n    final int _argCount = 0 + _inputSize;\n    final RoomSQLiteQuery _stmt = RoomSQLiteQuery.acquire(_sql, _argCount);\n    int _argIndex = 1;\n    for (String _item : __mapKeySet) {\n      if (_item == null) {\n        _stmt.bindNull(_argIndex);\n      } else {\n        _stmt.bindString(_argIndex, _item);\n      }\n      _argIndex ++;\n    }\n    final Cursor _cursor = DBUtil.query(__db, _stmt, false, null);\n    try {\n      final int _itemKeyIndex = 2; // _junction.businessName;\n      if (_itemKeyIndex == -1) {\n        return;\n      }\n      final int _cursorIndexOfCustomerName = CursorUtil.getColumnIndex(_cursor, \"customerName\");\n      final int _cursorIndexOfPhoneNumber = CursorUtil.getColumnIndex(_cursor, \"phoneNumber\");\n      while(_cursor.moveToNext()) {\n        if (!_cursor.isNull(_itemKeyIndex)) {\n          final String _tmpKey = _cursor.getString(_itemKeyIndex);\n          ArrayList&lt;Customer&gt; _tmpRelation = _map.get(_tmpKey);\n          if (_tmpRelation != null) {\n            final Customer _item_1;\n            _item_1 = new Customer();\n            if (_cursorIndexOfCustomerName != -1) {\n              final String _tmpCustomerName;\n              _tmpCustomerName = _cursor.getString(_cursorIndexOfCustomerName);\n              _item_1.setCustomerName(_tmpCustomerName);\n            }\n            if (_cursorIndexOfPhoneNumber != -1) {\n              final String _tmpPhoneNumber;\n              _tmpPhoneNumber = _cursor.getString(_cursorIndexOfPhoneNumber);\n              _item_1.setPhoneNumber(_tmpPhoneNumber);\n            }\n            _tmpRelation.add(_item_1);\n          }\n        }\n      }\n    } finally {\n      _cursor.close();\n    }\n  }\n}\n\n</code></pre>\n\n<p>and here is the rest of my codes:<br />\n<strong>Customer.java:</strong></p>\n\n<pre><code>package com.omidmsl.accounting.models;\n\nimport androidx.annotation.NonNull;\nimport androidx.room.Entity;\nimport androidx.room.PrimaryKey;\n\n@Entity(tableName = \"Customer\")\npublic class Customer {\n\n    public static final String KEY_NAME = \"customer_name\";\n    public static final String KEY_PHONE_NUMBER = \"phone_number\";\n\n    @NonNull\n    @PrimaryKey\n    private String customerName;\n    private String phoneNumber;\n\n    public String getCustomerName() {\n        return customerName;\n    }\n\n    public void setCustomerName(String customerName) {\n        this.customerName = customerName;\n    }\n\n    public String getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(String phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n}\n</code></pre>\n\n<p><strong>CustomerDAO.java:</strong></p>\n\n<pre><code>package com.omidmsl.accounting.db;\n\nimport androidx.room.Dao;\nimport androidx.room.Query;\nimport androidx.room.Transaction;\nimport com.omidmsl.accounting.models.Customer;\nimport com.omidmsl.accounting.models.serviceprovider.CustomerOfServiceProvider;\n\nimport java.util.List;\n\n@Dao\npublic interface CustomerDAO {\n\n    @Query(\"SELECT * FROM Customer\")\n    public List&lt;Customer&gt; getCustomers();\n\n    @Transaction\n    @Query(\"SELECT * FROM Customer\")\n    public List&lt;CustomerOfServiceProvider&gt; getCustomersOfServiceProvider();\n\n    @Query(\"SELECT * FROM Customer WHERE customerName = :cName\")\n    public List&lt;Customer&gt; getCustomer(String cName);\n}\n\n</code></pre>\n\n<p><strong>Business.java:</strong></p>\n\n<pre><code>package com.omidmsl.accounting.models;\n\nimport androidx.annotation.NonNull;\nimport androidx.room.Entity;\nimport androidx.room.*;\n\n\n@Entity(tableName = \"Business\")\npublic class Business {\n\n    public static final String KEY_TYPE = \"type\";\n    public static final String KEY_NAME = \"business_name\";\n    public static final String KEY_PHONE_NUMBER = \"phone_number\";\n\n    private int type;\n    @PrimaryKey\n    @NonNull\n    private String businessName;\n    private String phoneNumber;\n    @Ignore\n    private long costs;\n    @Ignore\n    private long buys;\n\n    public Business(int type) {\n        this.type = type;\n    }\n\n    public int getType() {\n        return type;\n    }\n\n    public void setType(int type) {\n        this.type = type;\n    }\n\n    public Business() {\n        businessName = \"\";\n    }\n\n    public String getBusinessName() {\n        return businessName;\n    }\n\n    public void setBusinessName(String businessName) {\n        this.businessName = businessName;\n    }\n\n    public String getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(String phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n\n    public long getCosts() {\n        return costs;\n    }\n\n    public void setCosts(long costs) {\n        this.costs = costs;\n    }\n\n    public long getBuys() {\n        return buys;\n    }\n\n    public void setBuys(long buys) {\n        this.buys = buys;\n    }\n}\n\n</code></pre>\n\n<p><strong>ServiceProviderDAO.java:</strong></p>\n\n<pre><code>package com.omidmsl.accounting.db;\n\nimport androidx.room.Dao;\nimport androidx.room.Query;\nimport androidx.room.Transaction;\nimport com.omidmsl.accounting.models.serviceprovider.ServiceProviderOfCustomer;\n\nimport java.util.List;\n\n@Dao\npublic interface ServiceProviderDAO {\n    @Transaction\n    @Query(\"SELECT * FROM Business\")\n    public List&lt;ServiceProviderOfCustomer&gt; getServiceProvidersOfCustomer();\n}\n</code></pre>\n\n<p><strong>CustomersOfServiceProvider.java:</strong></p>\n\n<pre><code>package com.omidmsl.accounting.models.serviceprovider;\n\nimport androidx.room.*;\nimport com.omidmsl.accounting.models.Business;\nimport com.omidmsl.accounting.models.Customer;\n\nimport java.util.List;\n\npublic class CustomerOfServiceProvider {\n    @Embedded\n    private Business serviceProvider;\n    @Relation(\n            parentColumn = \"businessName\",\n            entityColumn = \"customerName\",\n            associateBy = @Junction(Service.class)\n    )\n    private List&lt;Customer&gt; customers;\n\n    public Business getServiceProvider() {\n        return serviceProvider;\n    }\n\n    public void setServiceProvider(Business serviceProvider) {\n        this.serviceProvider = serviceProvider;\n    }\n\n    public List&lt;Customer&gt; getCustomers() {\n        return customers;\n    }\n\n    public void setCustomers(List&lt;Customer&gt; customers) {\n        this.customers = customers;\n    }\n}\n</code></pre>\n\n<p>please help me</p>\n"},{"tags":["java","sql-server","spring-boot","jdbc","azure-sql-database"],"comments":[{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1699643498,"post_id":77462312,"comment_id":136562224,"body_markdown":"Probably something like: `((DateTimeOffset)rs.getObject(&quot;bla&quot;, DateTimeOffset.class)).getOffsetDateTime()` . Although i do recall ms not implementing getObject properly, so you might need to cast the ResutlSet to SQLServerResultSet and do the following: `((SQLServerResultSet)rs).getDateTimeOffset(&quot;bla&quot;).getOffsetDateTime()`","body":"Probably something like: <code>((DateTimeOffset)rs.getObject(&quot;bla&quot;, DateTimeOffset.class)).getOffsetDateTime()</code> . Although i do recall ms not implementing getObject properly, so you might need to cast the ResutlSet to SQLServerResultSet and do the following: <code>((SQLServerResultSet)rs).getDateTimeOffset(&quot;bla&quot;).getOffsetD&zwnj;&#8203;ateTime()</code>"},{"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"score":0,"creation_date":1699669487,"post_id":77462312,"comment_id":136564556,"body_markdown":"hi @siggemannen feel free to write as answer and I can send points, thanks","body":"hi @siggemannen feel free to write as answer and I can send points, thanks"}],"answers":[{"tags":[],"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699709391,"creation_date":1699709391,"answer_id":77465262,"question_id":77462312,"body_markdown":"The &quot;standard&quot; way of doing it is:\r\n\r\n```java\r\nOffsetDateTime offset = rs.getObject(1, OffsetDateTime.class);\r\n```\r\n\r\nCouple of alternatives to use:\r\n```java\r\nimport microsoft.sql.DateTimeOffset;\r\n...\r\nDateTimeOffset dto = (DateTimeOffset) rs.getObject(1);\r\nDateTimeOffset dto = rs.getObject(1, DateTimeOffset.class);\r\nDateTimeOffset dto = ((SQLServerResultSet)rs).getDateTimeOffset(1);\r\n\r\nreturn dto != null ? dto.getOffsetDateTime(): null; //Careful with nulls!\r\n\r\n```\r\nThe first version is the safest and avoids the casts, while the others work with the concrete microsoft implemention classes.\r\n\r\nThese were tested with microsoft jdbc driver version 9.1.1, your mileage might vary with older versions.\r\nAlso, watch out for time zone handling in general, there are a lot of pitfalls as well as ways of losing the information on the way, both from and to the database!","title":"Java JDBC RowMapper : Convert MSSQL Server datetimeoffset into Java OffsetDateTime","body":"<p>The &quot;standard&quot; way of doing it is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>OffsetDateTime offset = rs.getObject(1, OffsetDateTime.class);\n</code></pre>\n<p>Couple of alternatives to use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import microsoft.sql.DateTimeOffset;\n...\nDateTimeOffset dto = (DateTimeOffset) rs.getObject(1);\nDateTimeOffset dto = rs.getObject(1, DateTimeOffset.class);\nDateTimeOffset dto = ((SQLServerResultSet)rs).getDateTimeOffset(1);\n\nreturn dto != null ? dto.getOffsetDateTime(): null; //Careful with nulls!\n\n</code></pre>\n<p>The first version is the safest and avoids the casts, while the others work with the concrete microsoft implemention classes.</p>\n<p>These were tested with microsoft jdbc driver version 9.1.1, your mileage might vary with older versions.\nAlso, watch out for time zone handling in general, there are a lot of pitfalls as well as ways of losing the information on the way, both from and to the database!</p>\n"}],"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77465262,"answer_count":1,"score":0,"last_activity_date":1699895747,"creation_date":1699642959,"question_id":77462312,"body_markdown":"I am using JDBC Template to retrieve data from database in MS SQL Server / Azure. I have my enrollment date as datetimeoffset in SQL. What is the corresponding RowMapper / ResultSet method, to convert into Java OffsetDateTime ?\r\n\r\nSee the last line:\r\n\r\n**SQL:**\r\n\r\n    CREATE TABLE [dbo].[Customer]\r\n    (\r\n    \t[CustomerId] [int] IDENTITY(1,1) NOT NULL,\r\n    \t[FirstName] [varchar](255) NOT NULL,\r\n    \t[employeeid] [int] NOT NULL,\r\n    \t[EnrollmentAmount] [decimal](10, 2) NULL,\r\n    \t[ActiveFlag] [bit] NULL,\r\n    \t[EnrollmentDate] [datetimeoffset](7) NULL,  -- &lt;&lt; this column\r\n    )\r\n\r\n**Java:**\r\n\r\n    @Data\r\n    public class CustomerGetResponse {\r\n        private int customerId;\r\n        private String firstName;\r\n        private int employeeId;\r\n        private BigDecimal enrollmentAmount;\r\n        private boolean activeFlag;\r\n        private OffsetDateTime enrollmentDate;  \r\n    }\r\n\r\n    public class CustomerGetMapper implements RowMapper&lt;CustomerGetResponse&gt; {\r\n        public CustomerGetResponse mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n            CustomerGetResponse customer = new CustomerGetResponse();\r\n            customer.setCustomerId(rs.getInt(&quot;CustomerId&quot;));\r\n            customer.setFirstName(rs.getString(&quot;FirstName&quot;));\r\n            customer.setFeeAmount(rs.getBigDecimal(&quot;EnrollmentAmount&quot;));\r\n            customer.setActiveFlag(rs.getBoolean(&quot;ActiveFlag&quot;));\r\n            customer.setEnrollmentDate(rs.); -- &lt;&lt; trying to figure out correct ResultSet method\r\n            return customer;\r\n        }\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\nNote:  BeanPropertyRowMapper.newInstance(CustomerGetResponse.class) seems to be doing it well, (not sure what its doing internally), but trying to use manual RowMapper.\r\n\r\nReference question: https://stackoverflow.com/questions/77457883/what-is-the-sql-server-database-column-type-for-java-time-offsetdatetime\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zsEsh.png","title":"Java JDBC RowMapper : Convert MSSQL Server datetimeoffset into Java OffsetDateTime","body":"<p>I am using JDBC Template to retrieve data from database in MS SQL Server / Azure. I have my enrollment date as datetimeoffset in SQL. What is the corresponding RowMapper / ResultSet method, to convert into Java OffsetDateTime ?</p>\n<p>See the last line:</p>\n<p><strong>SQL:</strong></p>\n<pre><code>CREATE TABLE [dbo].[Customer]\n(\n    [CustomerId] [int] IDENTITY(1,1) NOT NULL,\n    [FirstName] [varchar](255) NOT NULL,\n    [employeeid] [int] NOT NULL,\n    [EnrollmentAmount] [decimal](10, 2) NULL,\n    [ActiveFlag] [bit] NULL,\n    [EnrollmentDate] [datetimeoffset](7) NULL,  -- &lt;&lt; this column\n)\n</code></pre>\n<p><strong>Java:</strong></p>\n<pre><code>@Data\npublic class CustomerGetResponse {\n    private int customerId;\n    private String firstName;\n    private int employeeId;\n    private BigDecimal enrollmentAmount;\n    private boolean activeFlag;\n    private OffsetDateTime enrollmentDate;  \n}\n\npublic class CustomerGetMapper implements RowMapper&lt;CustomerGetResponse&gt; {\n    public CustomerGetResponse mapRow(ResultSet rs, int rowNum) throws SQLException {\n        CustomerGetResponse customer = new CustomerGetResponse();\n        customer.setCustomerId(rs.getInt(&quot;CustomerId&quot;));\n        customer.setFirstName(rs.getString(&quot;FirstName&quot;));\n        customer.setFeeAmount(rs.getBigDecimal(&quot;EnrollmentAmount&quot;));\n        customer.setActiveFlag(rs.getBoolean(&quot;ActiveFlag&quot;));\n        customer.setEnrollmentDate(rs.); -- &lt;&lt; trying to figure out correct ResultSet method\n        return customer;\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zsEsh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zsEsh.png\" alt=\"enter image description here\" /></a></p>\n<p>Note:  BeanPropertyRowMapper.newInstance(CustomerGetResponse.class) seems to be doing it well, (not sure what its doing internally), but trying to use manual RowMapper.</p>\n<p>Reference question: <a href=\"https://stackoverflow.com/questions/77457883/what-is-the-sql-server-database-column-type-for-java-time-offsetdatetime\">What is the SQL Server Database column type for java.time.OffsetDateTime?</a></p>\n"},{"tags":["java","messageformat"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1699630045,"post_id":77460880,"comment_id":136559993,"body_markdown":"The code in your question does not compile. First of all, Java is case sensitive so `New` should be `new`. Nonetheless, there is no constructor in class `MessageFormat` that accepts both a string and a varargs parameter. Perhaps you are referring to the [static] method `format`?","body":"The code in your question does not compile. First of all, Java is case sensitive so <code>New</code> should be <code>new</code>. Nonetheless, there is no constructor in class <code>MessageFormat</code> that accepts both a string and a varargs parameter. Perhaps you are referring to the [static] method <code>format</code>?"},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1699631124,"post_id":77460880,"comment_id":136560235,"body_markdown":"`MessageFormat` does not provide a hook to to do argument pre-processing.  Within `myMethod`, iterate over `args` and replace a null value with an empty string.  Not really elegant, but having the null check in the method at least somewhat hides it, and avoids potential duplicate code.","body":"<code>MessageFormat</code> does not provide a hook to to do argument pre-processing.  Within <code>myMethod</code>, iterate over <code>args</code> and replace a null value with an empty string.  Not really elegant, but having the null check in the method at least somewhat hides it, and avoids potential duplicate code."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1699639690,"post_id":77460880,"comment_id":136561634,"body_markdown":"I never knew the `MessageFormat` class existed.  I&#39;d just use a `StringBuilder` and build the message exactly how you want it built.","body":"I never knew the <code>MessageFormat</code> class existed.  I&#39;d just use a <code>StringBuilder</code> and build the message exactly how you want it built."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1699640925,"post_id":77460880,"comment_id":136561860,"body_markdown":"Try the _[Formattable](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Formattable.html)_ _interface_.","body":"Try the <i><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Formattable.html\" rel=\"nofollow noreferrer\">Formattable</a></i> <i>interface</i>."}],"owner":{"account_id":1214811,"reputation":142,"user_id":1182625,"display_name":"user1182625"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1699895582,"creation_date":1699628054,"question_id":77460880,"body_markdown":"What is the most elegant way to replace the null object with an empty string within MessageFormat?\r\n\r\n\r\n\r\n    public String myMethod(String str, String... args) {\r\n        return new MessageFormat(str).format(args);\r\n    }\r\n\r\n    String str1 = &quot;My string {0} and other place {1}&quot;;\r\n    String str2 = &quot;My other string {0} and other place {1} and another place {2}&quot;;\r\n\r\n    String[] args1 = new String[] {&quot;0&quot;,&quot;1&quot;};\r\n    myMethod(str1, args1);\r\n\r\n    myMethod(str2, args1);\r\n\r\n    String[] args3 = new String[] {&quot;0&quot;,&quot;1&quot;, null};\r\n    myMethod(str2, args3);\r\n\r\n    String[] args4 = new String[] {&quot;0&quot;,&quot;1&quot;, &quot;2&quot;};\r\n    myMethod(str2, args4);\r\n\r\n\r\nWanted outputs:\r\n\r\n    m1 = &quot;My string 0 and other place 1&quot;;\r\n\r\n    m2 = &quot;My other string 0 and other place 1&quot;; // no substring &quot; and another place {2}&quot;\r\n\r\n    m3 = &quot;My other string 0 and other place 1&quot;; // no substring &quot; and another place {2}&quot;\r\n\r\n    m4 = &quot;My other string 0 and other place 1 and another place 2&quot;;\r\n \r\nAccepted outputs:\r\n\r\n    m1 = &quot;My string 0 and other place 1&quot;;\r\n\r\n    m2 = &quot;My other string 0 and other place 1 and another place &quot;; // empty string for no argument\r\n\r\n    m3 = &quot;My other string 0 and other place 1 and another place &quot;; // empty string for null \r\n\r\n    m4 = &quot;My other string 0 and other place 1 and another place 2&quot;;\r\n","title":"Java MessageFormat and Null Values formating","body":"<p>What is the most elegant way to replace the null object with an empty string within MessageFormat?</p>\n<pre><code>public String myMethod(String str, String... args) {\n    return new MessageFormat(str).format(args);\n}\n\nString str1 = &quot;My string {0} and other place {1}&quot;;\nString str2 = &quot;My other string {0} and other place {1} and another place {2}&quot;;\n\nString[] args1 = new String[] {&quot;0&quot;,&quot;1&quot;};\nmyMethod(str1, args1);\n\nmyMethod(str2, args1);\n\nString[] args3 = new String[] {&quot;0&quot;,&quot;1&quot;, null};\nmyMethod(str2, args3);\n\nString[] args4 = new String[] {&quot;0&quot;,&quot;1&quot;, &quot;2&quot;};\nmyMethod(str2, args4);\n</code></pre>\n<p>Wanted outputs:</p>\n<pre><code>m1 = &quot;My string 0 and other place 1&quot;;\n\nm2 = &quot;My other string 0 and other place 1&quot;; // no substring &quot; and another place {2}&quot;\n\nm3 = &quot;My other string 0 and other place 1&quot;; // no substring &quot; and another place {2}&quot;\n\nm4 = &quot;My other string 0 and other place 1 and another place 2&quot;;\n</code></pre>\n<p>Accepted outputs:</p>\n<pre><code>m1 = &quot;My string 0 and other place 1&quot;;\n\nm2 = &quot;My other string 0 and other place 1 and another place &quot;; // empty string for no argument\n\nm3 = &quot;My other string 0 and other place 1 and another place &quot;; // empty string for null \n\nm4 = &quot;My other string 0 and other place 1 and another place 2&quot;;\n</code></pre>\n"},{"tags":["java","multithreading","hashmap","thread-safety"],"answers":[{"tags":[],"owner":{"account_id":1354683,"reputation":133,"user_id":1293339,"accept_rate":14,"display_name":"Sukesh Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699894926,"creation_date":1343930253,"answer_id":11783149,"question_id":7599639,"body_markdown":"I think you can refer to the code by gwoolsey at [JDK-6611637](https://web.archive.org/web/20101204055312/http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6611637).  I was able to reproduce the problem with this. ","title":"How can I programatically recreate these WebSphere logs due to unsynchronized access to HashMap?","body":"<p>I think you can refer to the code by gwoolsey at <a href=\"https://web.archive.org/web/20101204055312/http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6611637\" rel=\"nofollow noreferrer\">JDK-6611637</a>.  I was able to reproduce the problem with this.</p>\n"}],"owner":{"account_id":903519,"reputation":90,"user_id":938987,"display_name":"Niru"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":322,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":11783149,"answer_count":1,"score":2,"last_activity_date":1699895488,"creation_date":1317309861,"question_id":7599639,"body_markdown":"We have few components in our project extending `HashMap`.\r\nDue to unsynchronized access to the `HashMap` object we are getting the logs like the below one in production:\r\n\r\n```lang-none\r\nThreadMonitor W WSVR0605W:Thread &quot;webcontainer:5&quot; has been active for 864096 milliseconds and may be hung.There is/are 5 thread(s) in the total server that may be hung.\r\n    at java.util.HashMap.findNonNullKeyEntry(HashMap.java:525)\r\n    at java.util.HashMap.putImpl(HashMap.java:622)\r\n    at java.util.HashMap.put(HashMap.java:605\r\n```\r\n\r\nI want to recreate this for the testing purpose and tried spawning different threads putting and getting the `HashMap` object, but still no breakthroughs. Also, I have set `loadFactor` to 0.1 so that resizing of the `HashMap` will occur more frequently, which we are analysing is causing the issue (structural changes in the `HahMap`).\r\n\r\nWe are using IBM Java version 6.\r\n\r\nHow can I recreate this issue?","title":"How can I programatically recreate these WebSphere logs due to unsynchronized access to HashMap?","body":"<p>We have few components in our project extending <code>HashMap</code>.\nDue to unsynchronized access to the <code>HashMap</code> object we are getting the logs like the below one in production:</p>\n<pre class=\"lang-none prettyprint-override\"><code>ThreadMonitor W WSVR0605W:Thread &quot;webcontainer:5&quot; has been active for 864096 milliseconds and may be hung.There is/are 5 thread(s) in the total server that may be hung.\n    at java.util.HashMap.findNonNullKeyEntry(HashMap.java:525)\n    at java.util.HashMap.putImpl(HashMap.java:622)\n    at java.util.HashMap.put(HashMap.java:605\n</code></pre>\n<p>I want to recreate this for the testing purpose and tried spawning different threads putting and getting the <code>HashMap</code> object, but still no breakthroughs. Also, I have set <code>loadFactor</code> to 0.1 so that resizing of the <code>HashMap</code> will occur more frequently, which we are analysing is causing the issue (structural changes in the <code>HahMap</code>).</p>\n<p>We are using IBM Java version 6.</p>\n<p>How can I recreate this issue?</p>\n"},{"tags":["java","jpa","postgis"],"comments":[{"owner":{"account_id":9487799,"reputation":16379,"user_id":7635569,"display_name":"JGH"},"score":1,"creation_date":1694803156,"post_id":77114456,"comment_id":135944112,"body_markdown":"maybe the user running the query doesn&#39;t have in its path the schema where postgis is installed","body":"maybe the user running the query doesn&#39;t have in its path the schema where postgis is installed"},{"owner":{"account_id":8633322,"reputation":218333,"user_id":6464308,"display_name":"Laurenz Albe"},"score":0,"creation_date":1694803533,"post_id":77114456,"comment_id":135944154,"body_markdown":"Does this answer your question? [I am getting: No function matches the given name and argument types when executing poytgis function with psycopg2](https://stackoverflow.com/questions/71736879/i-am-getting-no-function-matches-the-given-name-and-argument-types-when-executi)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/71736879/i-am-getting-no-function-matches-the-given-name-and-argument-types-when-executi\">I am getting: No function matches the given name and argument types when executing poytgis function with psycopg2</a>"},{"owner":{"account_id":1303936,"reputation":1310,"user_id":1253336,"accept_rate":95,"display_name":"Timothy Dalton"},"score":0,"creation_date":1694843153,"post_id":77114456,"comment_id":135947453,"body_markdown":"If it works if you use makepoint with fixed coordinates in the string then you know it has something to do how it inserts the variables from s","body":"If it works if you use makepoint with fixed coordinates in the string then you know it has something to do how it inserts the variables from s"},{"owner":{"account_id":27429920,"reputation":11,"user_id":20926792,"display_name":"Atram"},"score":0,"creation_date":1694946000,"post_id":77114456,"comment_id":135955866,"body_markdown":"@JGH I have the schema set with PostGIS and checked all the user configs.","body":"@JGH I have the schema set with PostGIS and checked all the user configs."},{"owner":{"account_id":27429920,"reputation":11,"user_id":20926792,"display_name":"Atram"},"score":0,"creation_date":1694946071,"post_id":77114456,"comment_id":135955875,"body_markdown":"@LaurenzAlbe that link does not help, but thank you!","body":"@LaurenzAlbe that link does not help, but thank you!"},{"owner":{"account_id":27429920,"reputation":11,"user_id":20926792,"display_name":"Atram"},"score":0,"creation_date":1694946116,"post_id":77114456,"comment_id":135955880,"body_markdown":"@TimothyDalton The MakePoint does not work with fixed coordinates, already tried it :(","body":"@TimothyDalton The MakePoint does not work with fixed coordinates, already tried it :("},{"owner":{"account_id":8633322,"reputation":218333,"user_id":6464308,"display_name":"Laurenz Albe"},"score":3,"creation_date":1694954903,"post_id":77114456,"comment_id":135956646,"body_markdown":"Are you certain? If the error message is that the function (with the proper argument data types) cannot be found, either you connected to the wrong database or your `search_path` is wrong. And that is what the question I referred to is about. Did you try adding the schema name to the function call?","body":"Are you certain? If the error message is that the function (with the proper argument data types) cannot be found, either you connected to the wrong database or your <code>search_path</code> is wrong. And that is what the question I referred to is about. Did you try adding the schema name to the function call?"}],"answers":[{"tags":[],"owner":{"account_id":27429920,"reputation":11,"user_id":20926792,"display_name":"Atram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699895466,"creation_date":1699895466,"answer_id":77475636,"question_id":77114456,"body_markdown":"I solved the problem by adding the `public` to my current schema in the `application.properties` file\r\n\r\n    spring.datasource.url=jdbc:postgresql://localhost:5433/myCustomdb?currentSchema=customname,public","title":"Java with PostGIS &quot;ERROR: function st_makepoint(double precision, double precision) does not exist&quot; but query works on SQL","body":"<p>I solved the problem by adding the <code>public</code> to my current schema in the <code>application.properties</code> file</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://localhost:5433/myCustomdb?currentSchema=customname,public\n</code></pre>\n"}],"owner":{"account_id":27429920,"reputation":11,"user_id":20926792,"display_name":"Atram"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77475636,"answer_count":1,"score":0,"last_activity_date":1699895466,"creation_date":1694800050,"question_id":77114456,"body_markdown":"I am trying to make a query through my JPA repository but I&#39;m getting the following error:\r\n\r\n`ERROR: function st_makepoint(double precision, double precision) does not exist\r\n  Hint: No function matches the given name and argument types. You might need to add explicit type casts.\r\n  Position: 83`\r\n\r\n\r\n**CompanyRepository**\r\n\r\n```\r\n@Query(value = &quot;SELECT c.* FROM company c JOIN store s ON c.store_id = s.id &quot; +\r\n            &quot;WHERE ST_Within(ST_MakePoint(s.longitude, s.latitude), :polygon)&quot;,\r\n            nativeQuery = true)\r\n    List&lt;CompanyEntity&gt; findStoresInPolygon(@Param(&quot;polygon&quot;) Geometry polygon);\r\n```\r\n\r\n\r\n**If I try to make the same query on SQL it works as expected.**\r\n(I have a list of stores saved and only a couple of them fall within that polygon shown below, and those are the ones being retrieved)\r\n\r\n```\r\nSELECT c.*\r\nFROM mySchema.company c\r\nJOIN mySchema.store s ON c.store_id = s.id\r\nWHERE ST_Within(\r\n    ST_MakePoint(s.longitude , s.latitude),\r\n    &#39;POLYGON((10.7522 59.9139, 5.3221 60.3913, 10.3951 63.4305, 5.7331 58.969, 10.7522 59.9139))&#39;\r\n);\r\n```\r\n\r\n\r\nThanks in advance!\r\n\r\n\r\n**OTHER POSSIBLE REVELANT INFO:**\r\n\r\nNot sure if it&#39;s relevant but latitude and longitude are being stored like shown below:\r\n\r\n**StoreEntity**\r\n\r\n```\r\n@Column(nullable = false)\r\nprivate Double latitude;\r\n\r\n@Column(nullable = false)\r\nprivate Double longitude;\r\n```\r\n\r\nThe schema is defined in the `application.properties` and other queries work, I&#39;m only having a problem with the ST_MakePoint.\r\n\r\n\r\nI&#39;ve read a bunch of other topics not only here in stackoverflow, official PostGIS docs, but also on other websites as well and tried different alternatives, if anyone have any sugestion I appreciate it.\r\n\r\nSome of the things tried and did not work include cast lat and long to double and numeric, put coordinates directly on the ST_MakePoint.\r\n\r\nI am expecting for the results from Java to be the same as the ones from SQL query.\r\n\r\n(the posts stakoverflow have as possible duplicates have differences and I&#39;ve already tested for what was different)","title":"Java with PostGIS &quot;ERROR: function st_makepoint(double precision, double precision) does not exist&quot; but query works on SQL","body":"<p>I am trying to make a query through my JPA repository but I'm getting the following error:</p>\n<p><code>ERROR: function st_makepoint(double precision, double precision) does not exist Hint: No function matches the given name and argument types. You might need to add explicit type casts. Position: 83</code></p>\n<p><strong>CompanyRepository</strong></p>\n<pre><code>@Query(value = &quot;SELECT c.* FROM company c JOIN store s ON c.store_id = s.id &quot; +\n            &quot;WHERE ST_Within(ST_MakePoint(s.longitude, s.latitude), :polygon)&quot;,\n            nativeQuery = true)\n    List&lt;CompanyEntity&gt; findStoresInPolygon(@Param(&quot;polygon&quot;) Geometry polygon);\n</code></pre>\n<p><strong>If I try to make the same query on SQL it works as expected.</strong>\n(I have a list of stores saved and only a couple of them fall within that polygon shown below, and those are the ones being retrieved)</p>\n<pre><code>SELECT c.*\nFROM mySchema.company c\nJOIN mySchema.store s ON c.store_id = s.id\nWHERE ST_Within(\n    ST_MakePoint(s.longitude , s.latitude),\n    'POLYGON((10.7522 59.9139, 5.3221 60.3913, 10.3951 63.4305, 5.7331 58.969, 10.7522 59.9139))'\n);\n</code></pre>\n<p>Thanks in advance!</p>\n<p><strong>OTHER POSSIBLE REVELANT INFO:</strong></p>\n<p>Not sure if it's relevant but latitude and longitude are being stored like shown below:</p>\n<p><strong>StoreEntity</strong></p>\n<pre><code>@Column(nullable = false)\nprivate Double latitude;\n\n@Column(nullable = false)\nprivate Double longitude;\n</code></pre>\n<p>The schema is defined in the <code>application.properties</code> and other queries work, I'm only having a problem with the ST_MakePoint.</p>\n<p>I've read a bunch of other topics not only here in stackoverflow, official PostGIS docs, but also on other websites as well and tried different alternatives, if anyone have any sugestion I appreciate it.</p>\n<p>Some of the things tried and did not work include cast lat and long to double and numeric, put coordinates directly on the ST_MakePoint.</p>\n<p>I am expecting for the results from Java to be the same as the ones from SQL query.</p>\n<p>(the posts stakoverflow have as possible duplicates have differences and I've already tested for what was different)</p>\n"},{"tags":["java","android","c++","qt"],"answers":[{"tags":[],"owner":{"account_id":1581608,"reputation":761,"user_id":1466885,"accept_rate":60,"display_name":"reckless"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1586355589,"creation_date":1586355589,"answer_id":61102958,"question_id":61097966,"body_markdown":"Ok it turns out that Qt 5.14 requires an updated version of the AndroidManifest.xml file of a project. This is mentioned here [Qt for Android known issues](https://wiki.qt.io/Qt_for_Android_known_issues). The needed changes can be found at the following [link](https://codereview.qt-project.org/c/qt/qtandroidextras/+/278987/2/examples/androidextras/notification/android-sources/AndroidManifest.xml).\r\n\r\nAfter updating the manifest file, my project runs correctly.","title":"Qt on Android Runtime error: Invalid package identifier when getting bag for resource number 0x00000000","body":"<p>Ok it turns out that Qt 5.14 requires an updated version of the AndroidManifest.xml file of a project. This is mentioned here <a href=\"https://wiki.qt.io/Qt_for_Android_known_issues\" rel=\"nofollow noreferrer\">Qt for Android known issues</a>. The needed changes can be found at the following <a href=\"https://codereview.qt-project.org/c/qt/qtandroidextras/+/278987/2/examples/androidextras/notification/android-sources/AndroidManifest.xml\" rel=\"nofollow noreferrer\">link</a>.</p>\n\n<p>After updating the manifest file, my project runs correctly.</p>\n"},{"tags":[],"owner":{"account_id":1324963,"reputation":14623,"user_id":1270008,"display_name":"tanius"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1699895409,"creation_date":1590871469,"answer_id":62108461,"question_id":61097966,"body_markdown":"Qt 5.14 requires a different `AndroidManifest.xml` file than Qt 5.13 or earlier. I followed the [Qt recommendations][1] and ended up with the following changes to get it to work again:\r\n\r\n1. In `AndroidManifest.xml`, add attribute `android:extractNativeLibs=&quot;true&quot;` into the `&lt;application …&gt;` element.\r\n\r\n2. In `AndroidManifest.xml`, remove the following three lines (shown abbreviated):\r\n\r\n    ```\r\n    &lt;meta-data android:name=&quot;android.app.bundled_in_lib_resource_id&quot; … /&gt;\r\n    &lt;meta-data android:name=&quot;android.app.bundled_in_assets_resource_id&quot; … /&gt;\r\n    &lt;meta-data android:name=&quot;android.app.load_local_libs&quot; … /&gt;\r\n    ```\r\n\r\n3. In `AndroidManifest.xml`, insert the following line among the other `&lt;meta-data …/&gt;` lines:\r\n\r\n    ```\r\n    &lt;meta-data android:name=&quot;android.app.load_local_libs_resource_id&quot; android:resource=&quot;@array/load_local_libs&quot;/&gt;\r\n    ```\r\n\r\n4. In `res/values/libs.xml` in your Android config directory, insert the following lines into the `&lt;resources&gt; … &lt;/resources&gt;` element:\r\n\r\n    ```\r\n    &lt;array name=&quot;load_local_libs&quot;&gt;\r\n        &lt;!-- %%INSERT_LOCAL_LIBS%% --&gt;\r\n    &lt;/array&gt;\r\n    ```\r\n\r\n**Using Qt 5.14 and ≤5.13 in parallel.** Some more detail about this issue is available in issue [QTBUG-80444][2]. From there, unfortunately it seems that the required changes are not backwards compatible with Qt 5.13 or earlier, means you need one version of `AndroidManifest.xml` to build for Android with Qt 5.13 and another version to build with Qt 5.14. (Except you never want to look back to Qt 5.13, of course.)\r\n\r\n**Sources.** Derived from the [Qt examples diff][3] mentioned by @daljit97 in [another answer][4] on this page. That still lead to an error &quot;`AndroidManifest.xml:80: error: resource array/load_local_libs (aka com.example.qtws:array/load_local_libs) not found.`&quot; on deployment, but [this comment][5] hinted me into the right direction to fix that.\r\n\r\n\r\n  [1]: https://wiki.qt.io/Qt_for_Android_known_issues\r\n  [2]: https://bugreports.qt.io/browse/QTBUG-80444\r\n  [3]: https://codereview.qt-project.org/c/qt/qtandroidextras/+/278987/2/examples/androidextras/notification/android-sources/AndroidManifest.xml\r\n  [4]: https://stackoverflow.com/a/61102958\r\n  [5]: https://bugreports.qt.io/browse/QTBUG-80444?focusedCommentId=496331&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-496331","title":"Qt on Android Runtime error: Invalid package identifier when getting bag for resource number 0x00000000","body":"<p>Qt 5.14 requires a different <code>AndroidManifest.xml</code> file than Qt 5.13 or earlier. I followed the <a href=\"https://wiki.qt.io/Qt_for_Android_known_issues\" rel=\"nofollow noreferrer\">Qt recommendations</a> and ended up with the following changes to get it to work again:</p>\n<ol>\n<li><p>In <code>AndroidManifest.xml</code>, add attribute <code>android:extractNativeLibs=&quot;true&quot;</code> into the <code>&lt;application …&gt;</code> element.</p>\n</li>\n<li><p>In <code>AndroidManifest.xml</code>, remove the following three lines (shown abbreviated):</p>\n<pre><code>&lt;meta-data android:name=&quot;android.app.bundled_in_lib_resource_id&quot; … /&gt;\n&lt;meta-data android:name=&quot;android.app.bundled_in_assets_resource_id&quot; … /&gt;\n&lt;meta-data android:name=&quot;android.app.load_local_libs&quot; … /&gt;\n</code></pre>\n</li>\n<li><p>In <code>AndroidManifest.xml</code>, insert the following line among the other <code>&lt;meta-data …/&gt;</code> lines:</p>\n<pre><code>&lt;meta-data android:name=&quot;android.app.load_local_libs_resource_id&quot; android:resource=&quot;@array/load_local_libs&quot;/&gt;\n</code></pre>\n</li>\n<li><p>In <code>res/values/libs.xml</code> in your Android config directory, insert the following lines into the <code>&lt;resources&gt; … &lt;/resources&gt;</code> element:</p>\n<pre><code>&lt;array name=&quot;load_local_libs&quot;&gt;\n    &lt;!-- %%INSERT_LOCAL_LIBS%% --&gt;\n&lt;/array&gt;\n</code></pre>\n</li>\n</ol>\n<p><strong>Using Qt 5.14 and ≤5.13 in parallel.</strong> Some more detail about this issue is available in issue <a href=\"https://bugreports.qt.io/browse/QTBUG-80444\" rel=\"nofollow noreferrer\">QTBUG-80444</a>. From there, unfortunately it seems that the required changes are not backwards compatible with Qt 5.13 or earlier, means you need one version of <code>AndroidManifest.xml</code> to build for Android with Qt 5.13 and another version to build with Qt 5.14. (Except you never want to look back to Qt 5.13, of course.)</p>\n<p><strong>Sources.</strong> Derived from the <a href=\"https://codereview.qt-project.org/c/qt/qtandroidextras/+/278987/2/examples/androidextras/notification/android-sources/AndroidManifest.xml\" rel=\"nofollow noreferrer\">Qt examples diff</a> mentioned by @daljit97 in <a href=\"https://stackoverflow.com/a/61102958\">another answer</a> on this page. That still lead to an error &quot;<code>AndroidManifest.xml:80: error: resource array/load_local_libs (aka com.example.qtws:array/load_local_libs) not found.</code>&quot; on deployment, but <a href=\"https://bugreports.qt.io/browse/QTBUG-80444?focusedCommentId=496331&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-496331\" rel=\"nofollow noreferrer\">this comment</a> hinted me into the right direction to fix that.</p>\n"}],"owner":{"account_id":1581608,"reputation":761,"user_id":1466885,"accept_rate":60,"display_name":"reckless"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2136,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":61102958,"answer_count":2,"score":6,"last_activity_date":1699895409,"creation_date":1586339844,"question_id":61097966,"body_markdown":"I am getting this strange error after updating my Qt version from 5.13.1 to 5.14.2 and I am not sure what is the cause of it (I also updated my gradle version from 4.1.0 to 5.5.1). The error give the following output message:\r\n\r\n&gt; W ResourceType: Invalid package identifier when getting bag for\r\n&gt; resource number 0x00000000 E Qt      : Can&#39;t create main activity E Qt\r\n&gt; : android.content.res.Resources$NotFoundException: String array\r\n&gt; resource ID #0x0 E Qt      : \tat\r\n&gt; android.content.res.Resources.getStringArray(Resources.java:525) E Qt \r\n&gt; : \tat\r\n&gt; org.qtproject.qt5.android.bindings.QtLoader.startApp(QtLoader.java:423)\r\n&gt; E Qt      : \tat\r\n&gt; org.qtproject.qt5.android.bindings.QtActivityLoader.onCreate(QtActivityLoader.java:166)\r\n&gt; E Qt      : \tat\r\n&gt; org.qtproject.qt5.android.bindings.QtActivity.onCreateHook(QtActivity.java:266)\r\n&gt; E Qt      : \tat\r\n&gt; org.qtproject.qt5.android.bindings.QtActivity.onCreate(QtActivity.java:273)\r\n\r\nI have seen that this has been discussed before, but the solution given were unrelated to Qt and required the modification of Java code (which I don&#39;t think it is the problem at all in my case since I haven&#39;t changed that). ","title":"Qt on Android Runtime error: Invalid package identifier when getting bag for resource number 0x00000000","body":"<p>I am getting this strange error after updating my Qt version from 5.13.1 to 5.14.2 and I am not sure what is the cause of it (I also updated my gradle version from 4.1.0 to 5.5.1). The error give the following output message:</p>\n\n<blockquote>\n  <p>W ResourceType: Invalid package identifier when getting bag for\n  resource number 0x00000000 E Qt      : Can't create main activity E Qt\n  : android.content.res.Resources$NotFoundException: String array\n  resource ID #0x0 E Qt      :  at\n  android.content.res.Resources.getStringArray(Resources.java:525) E Qt \n  :     at\n  org.qtproject.qt5.android.bindings.QtLoader.startApp(QtLoader.java:423)\n  E Qt      :   at\n  org.qtproject.qt5.android.bindings.QtActivityLoader.onCreate(QtActivityLoader.java:166)\n  E Qt      :   at\n  org.qtproject.qt5.android.bindings.QtActivity.onCreateHook(QtActivity.java:266)\n  E Qt      :   at\n  org.qtproject.qt5.android.bindings.QtActivity.onCreate(QtActivity.java:273)</p>\n</blockquote>\n\n<p>I have seen that this has been discussed before, but the solution given were unrelated to Qt and required the modification of Java code (which I don't think it is the problem at all in my case since I haven't changed that). </p>\n"},{"tags":["java","spring-boot","localhost"],"comments":[{"owner":{"account_id":28177079,"reputation":118,"user_id":21534708,"display_name":"Farfetch&#39;d"},"score":0,"creation_date":1699802295,"post_id":77469427,"comment_id":136574253,"body_markdown":"Do you use a RestController ?","body":"Do you use a RestController ?"},{"owner":{"account_id":26830926,"reputation":3,"user_id":20418900,"display_name":"Teddy Woods"},"score":0,"creation_date":1699804766,"post_id":77469427,"comment_id":136574522,"body_markdown":"Yes, I&#39;m using a RestController","body":"Yes, I&#39;m using a RestController"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1699884850,"post_id":77469427,"comment_id":136583338,"body_markdown":"Why should those URLs not give you a 404 error? Nothing you&#39;ve shown indicates they should return otherwise.","body":"Why should those URLs not give you a 404 error? Nothing you&#39;ve shown indicates they should return otherwise."},{"owner":{"account_id":2111,"reputation":1569,"user_id":2910,"accept_rate":67,"display_name":"benc"},"score":0,"creation_date":1700029741,"post_id":77469427,"comment_id":136603440,"body_markdown":"Check your access log file... (also `localhost:8080` is not really a valid URL, but most browsers add the `/` and make the request...)","body":"Check your access log file... (also <code>localhost:8080</code> is not really a valid URL, but most browsers add the <code>&#47;</code> and make the request...)"}],"owner":{"account_id":26830926,"reputation":3,"user_id":20418900,"display_name":"Teddy Woods"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":0,"score":-3,"last_activity_date":1699895330,"creation_date":1699801114,"question_id":77469427,"body_markdown":"Started making an app, using the Gradle and Springboot in Intellij. When I run the application, for some reason, the address \r\n```\r\nlocalhost:8080/projectName \r\n```\r\nresponds correctly, but the \r\n```\r\nlocalhost:8080 \r\n```\r\nor any \r\n```\r\nlocalhost:8080/somePage \r\n```\r\nare not found (404)\r\n\r\nWhat could be the issue and how could I fix that?\r\n\r\nI added the \r\n```\r\nserver.servlet.context-path=/ \r\n```\r\nto my application.properties file, but nothing changed\r\n\r\nHere&#39;s the RestController I&#39;m using:\r\n\r\n```java\r\n@RestController\r\npublic class OrderController {\r\n\r\n    private final OrderRepository repository;\r\n\r\n    public OrderController(OrderRepository repository) {\r\n        this.repository = repository;\r\n    }\r\n\r\n    @GetMapping(&quot;/&quot;)\r\n    public String root() {\r\n        return &quot;Welcome to the root URL!&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/hello&quot;)\r\n    public String hello() {\r\n        return &quot;Hello!&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;api/orders&quot;)\r\n    public Iterable&lt;Order&gt; getOrders() {\r\n        return repository.findAll();\r\n    }\r\n\r\n    @PostMapping(&quot;api/orders&quot;)\r\n    public Order saveOrder(@Valid @RequestBody Order order) {\r\n        return repository.save(order);\r\n    }\r\n\r\n    @GetMapping(&quot;api/orders/{id}&quot;)\r\n    public Order getOrders(@PathVariable Long id) {\r\n        return repository.findById(id).orElseThrow(()\r\n                -&gt; new ResponseStatusException(HttpStatus.NOT_FOUND));\r\n    }\r\n\r\n    @ExceptionHandler\r\n    public ResponseEntity&lt;Void&gt; handle(ResponseStatusException e) {\r\n        return new ResponseEntity&lt;&gt;(null, e.getStatusCode());\r\n    }\r\n\r\n    @ExceptionHandler\r\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n    public void handleValidationExceptions(MethodArgumentNotValidException ex) {\r\n    }\r\n\r\n}\r\n```","title":"Why localhost:8080 is not found (404)","body":"<p>Started making an app, using the Gradle and Springboot in Intellij. When I run the application, for some reason, the address</p>\n<pre><code>localhost:8080/projectName \n</code></pre>\n<p>responds correctly, but the</p>\n<pre><code>localhost:8080 \n</code></pre>\n<p>or any</p>\n<pre><code>localhost:8080/somePage \n</code></pre>\n<p>are not found (404)</p>\n<p>What could be the issue and how could I fix that?</p>\n<p>I added the</p>\n<pre><code>server.servlet.context-path=/ \n</code></pre>\n<p>to my application.properties file, but nothing changed</p>\n<p>Here's the RestController I'm using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class OrderController {\n\n    private final OrderRepository repository;\n\n    public OrderController(OrderRepository repository) {\n        this.repository = repository;\n    }\n\n    @GetMapping(&quot;/&quot;)\n    public String root() {\n        return &quot;Welcome to the root URL!&quot;;\n    }\n\n    @GetMapping(&quot;/hello&quot;)\n    public String hello() {\n        return &quot;Hello!&quot;;\n    }\n\n    @GetMapping(&quot;api/orders&quot;)\n    public Iterable&lt;Order&gt; getOrders() {\n        return repository.findAll();\n    }\n\n    @PostMapping(&quot;api/orders&quot;)\n    public Order saveOrder(@Valid @RequestBody Order order) {\n        return repository.save(order);\n    }\n\n    @GetMapping(&quot;api/orders/{id}&quot;)\n    public Order getOrders(@PathVariable Long id) {\n        return repository.findById(id).orElseThrow(()\n                -&gt; new ResponseStatusException(HttpStatus.NOT_FOUND));\n    }\n\n    @ExceptionHandler\n    public ResponseEntity&lt;Void&gt; handle(ResponseStatusException e) {\n        return new ResponseEntity&lt;&gt;(null, e.getStatusCode());\n    }\n\n    @ExceptionHandler\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\n    public void handleValidationExceptions(MethodArgumentNotValidException ex) {\n    }\n\n}\n</code></pre>\n"},{"tags":["java","swing","jframe"],"comments":[{"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"score":2,"creation_date":1699894133,"post_id":77475454,"comment_id":136585270,"body_markdown":"Consider posting a [MRE](https://stackoverflow.com/help/minimal-reproducible-example) that could demonstrate your problem in a small easily runnable code block","body":"Consider posting a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MRE</a> that could demonstrate your problem in a small easily runnable code block"},{"owner":{"account_id":4279913,"reputation":3623,"user_id":3499626,"accept_rate":89,"display_name":"jhamon"},"score":4,"creation_date":1699894639,"post_id":77475454,"comment_id":136585370,"body_markdown":"Why are you using mouse position instead of `JButton` or similar component?","body":"Why are you using mouse position instead of <code>JButton</code> or similar component?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":4,"creation_date":1699895209,"post_id":77475454,"comment_id":136585485,"body_markdown":"1) Don&#39;t use a null layout and setBounds(). Swing was designed to be used with layout managers.  2) You should be adding an `ActionListener` to a button to listen for a button click. 3) Read the [Swing tutorial](https://docs.oracle.com/javase/tutorial/uiswing/TOC.html) for Swing basics.","body":"1) Don&#39;t use a null layout and setBounds(). Swing was designed to be used with layout managers.  2) You should be adding an <code>ActionListener</code> to a button to listen for a button click. 3) Read the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/TOC.html\" rel=\"nofollow noreferrer\">Swing tutorial</a> for Swing basics."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1699935484,"post_id":77475454,"comment_id":136590235,"body_markdown":"[*How to Use Buttons, Check Boxes, and Radio Buttons*](https://docs.oracle.com/javase/tutorial/uiswing/components/button.html)","body":"<a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/button.html\" rel=\"nofollow noreferrer\"><i>How to Use Buttons, Check Boxes, and Radio Buttons</i></a>"}],"owner":{"account_id":29893691,"reputation":1,"user_id":22909202,"display_name":"Aleksander"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1699895244,"creation_date":1699893758,"question_id":77475454,"body_markdown":"Can you please tell me why this doesn&#39;t work? When i tell to look for the release of the mouse button and exactly to look if i pressed a button or not but when i start the application the System.out.println()\r\nis printing a text in the console but the canvas does not change and my UI does not work.\r\n\r\n```\r\n        if (window.getCurrentPage() == Window.Page.MAIN) {\r\n            if ((mouseX &gt;= 20 &amp;&amp; mouseX &lt;= 220) &amp;&amp; (mouseY &gt;= 80 &amp;&amp; mouseY &lt;= 140)) {\r\n                try {\r\n                    MainPage.removeAccountServicesPanel();\r\n                    MainPage.addCardsMenuLabel();\r\n                }\r\n                catch(Exception error) {\r\n                    System.out.println(&quot;asd&quot; + error);\r\n                }\r\n                System.out.println(&quot;Opened Cards Menu&quot;);\r\n            }\r\n\r\n            if ((mouseX &gt;= 20 &amp;&amp; mouseX &lt;= 220) &amp;&amp; (mouseY &gt;= 10 &amp;&amp; mouseY &lt;= 70)) {\r\n                MainPage.AccountServicesPanel();\r\n                System.out.println(&quot;Opened Account Service Menu&quot;);\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nAnd there is the MainPage.java\r\n\r\n```\r\npublic MainPage(Window window) {\r\n        this.window = window;\r\n        this.mouseInputs = new MouseInputs(window);\r\n\r\n        this.infoPanel = new JPanel();\r\n\r\n        addMouseListener(mouseInputs);\r\n\r\n        requestFocus();\r\n\r\n        setLayout(null);\r\n\r\n        this.infoPanel.setBackground(new Color(13, 17, 37));\r\n        this.infoPanel.setBounds(340, 0, 1280 - 340, 685);\r\n\r\n        add(this.infoPanel);\r\n\r\n        setSize(1280, 720);\r\n        setBackground(new Color(13, 17, 23));\r\n\r\n        this.font = new Font(&quot;Arial&quot;, Font.BOLD, 30);;\r\n\r\n        this.accServ = new JLabel(&quot;Account Services&quot;);\r\n        this.CardsMenuLabel = new JLabel(&quot;Cards&quot;);\r\n\r\n//        Puttin in the AccServ Label\r\n        this.accServ.setFont(font);\r\n        this.accServ.setForeground(Color.WHITE);\r\n\r\n//        Putting in the CardsMenuLabel\r\n        this.CardsMenuLabel.setFont(font);\r\n        this.CardsMenuLabel.setForeground(Color.WHITE);\r\n    }\r\n\r\n    public static void AccountServicesPanel() {\r\n        infoPanel.add(accServ);\r\n    }\r\n\r\n    public static void removeAccountServicesPanel() {\r\n        infoPanel.remove(accServ);\r\n    }\r\n\r\n    public static void addCardsMenuLabel() {infoPanel.add(CardsMenuLabel);}\r\n\r\n    public static void removeCardsMenuLabel() {infoPanel.remove(CardsMenuLabel);}\r\n```\r\n\r\n\r\n\r\nI tried to catch the problem but nothing happened, tried System.out.println and i don&#39;t know why it doesn&#39;t work.\r\nPlease help.","title":"The UI in my banking application in Java does not work","body":"<p>Can you please tell me why this doesn't work? When i tell to look for the release of the mouse button and exactly to look if i pressed a button or not but when i start the application the System.out.println()\nis printing a text in the console but the canvas does not change and my UI does not work.</p>\n<pre><code>        if (window.getCurrentPage() == Window.Page.MAIN) {\n            if ((mouseX &gt;= 20 &amp;&amp; mouseX &lt;= 220) &amp;&amp; (mouseY &gt;= 80 &amp;&amp; mouseY &lt;= 140)) {\n                try {\n                    MainPage.removeAccountServicesPanel();\n                    MainPage.addCardsMenuLabel();\n                }\n                catch(Exception error) {\n                    System.out.println(&quot;asd&quot; + error);\n                }\n                System.out.println(&quot;Opened Cards Menu&quot;);\n            }\n\n            if ((mouseX &gt;= 20 &amp;&amp; mouseX &lt;= 220) &amp;&amp; (mouseY &gt;= 10 &amp;&amp; mouseY &lt;= 70)) {\n                MainPage.AccountServicesPanel();\n                System.out.println(&quot;Opened Account Service Menu&quot;);\n            }\n        }\n    }\n</code></pre>\n<p>And there is the MainPage.java</p>\n<pre><code>public MainPage(Window window) {\n        this.window = window;\n        this.mouseInputs = new MouseInputs(window);\n\n        this.infoPanel = new JPanel();\n\n        addMouseListener(mouseInputs);\n\n        requestFocus();\n\n        setLayout(null);\n\n        this.infoPanel.setBackground(new Color(13, 17, 37));\n        this.infoPanel.setBounds(340, 0, 1280 - 340, 685);\n\n        add(this.infoPanel);\n\n        setSize(1280, 720);\n        setBackground(new Color(13, 17, 23));\n\n        this.font = new Font(&quot;Arial&quot;, Font.BOLD, 30);;\n\n        this.accServ = new JLabel(&quot;Account Services&quot;);\n        this.CardsMenuLabel = new JLabel(&quot;Cards&quot;);\n\n//        Puttin in the AccServ Label\n        this.accServ.setFont(font);\n        this.accServ.setForeground(Color.WHITE);\n\n//        Putting in the CardsMenuLabel\n        this.CardsMenuLabel.setFont(font);\n        this.CardsMenuLabel.setForeground(Color.WHITE);\n    }\n\n    public static void AccountServicesPanel() {\n        infoPanel.add(accServ);\n    }\n\n    public static void removeAccountServicesPanel() {\n        infoPanel.remove(accServ);\n    }\n\n    public static void addCardsMenuLabel() {infoPanel.add(CardsMenuLabel);}\n\n    public static void removeCardsMenuLabel() {infoPanel.remove(CardsMenuLabel);}\n</code></pre>\n<p>I tried to catch the problem but nothing happened, tried System.out.println and i don't know why it doesn't work.\nPlease help.</p>\n"},{"tags":["java","jackson","deserialization","jackson-databind","objectmapper"],"comments":[{"owner":{"account_id":27317635,"reputation":737,"user_id":20831888,"display_name":"Kozydot"},"score":1,"creation_date":1696747753,"post_id":77252198,"comment_id":136191286,"body_markdown":"Jackson does not directly support matching on substrings for type identification. The @JsonSubTypes annotation in Jackson requires an exact match on the name field. Potential solution to your problem is to implement a custom deserializer. This allows you to define your own logic to match the type field in your JSON to the correct subclass.","body":"Jackson does not directly support matching on substrings for type identification. The @JsonSubTypes annotation in Jackson requires an exact match on the name field. Potential solution to your problem is to implement a custom deserializer. This allows you to define your own logic to match the type field in your JSON to the correct subclass."},{"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696748091,"post_id":77252198,"comment_id":136191307,"body_markdown":"It&#39;s a good question and tricky one. So, consider offering a bounty for this question given the effort it will take.","body":"It&#39;s a good question and tricky one. So, consider offering a bounty for this question given the effort it will take."},{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1696750650,"post_id":77252198,"comment_id":136191487,"body_markdown":"Why can&#39;t you use `name=&quot;xyz-bar&quot;` in the `Type` annotation, or do you mean that `xyz` can be anything and varies?","body":"Why can&#39;t you use <code>name=&quot;xyz-bar&quot;</code> in the <code>Type</code> annotation, or do you mean that <code>xyz</code> can be anything and varies?"},{"owner":{"account_id":14337360,"reputation":614,"user_id":10356422,"display_name":"pizza"},"score":0,"creation_date":1696793901,"post_id":77252198,"comment_id":136195579,"body_markdown":"@Kozydot I tried using a custom deserializer but the problem is wouldn&#39;t I have to manually deserialize ```Pojo Class``` to have access to ```type```, handling not just ```Info``` but other properties in ```Pojo Class```? In the example, there are only ```type``` and ```info``` properties but I have a bunch more in the actual ```Pojo Class```.","body":"@Kozydot I tried using a custom deserializer but the problem is wouldn&#39;t I have to manually deserialize <code>Pojo Class</code> to have access to <code>type</code>, handling not just <code>Info</code> but other properties in <code>Pojo Class</code>? In the example, there are only <code>type</code> and <code>info</code> properties but I have a bunch more in the actual <code>Pojo Class</code>."},{"owner":{"account_id":14337360,"reputation":614,"user_id":10356422,"display_name":"pizza"},"score":0,"creation_date":1696793936,"post_id":77252198,"comment_id":136195583,"body_markdown":"@AnishB. Not sure how to offer a bounty","body":"@AnishB. Not sure how to offer a bounty"},{"owner":{"account_id":14337360,"reputation":614,"user_id":10356422,"display_name":"pizza"},"score":0,"creation_date":1696793979,"post_id":77252198,"comment_id":136195591,"body_markdown":"@MarkRotteveelyes ```xyz``` varies. type can be identified by the last substring ```foo/bar```","body":"@MarkRotteveelyes <code>xyz</code> varies. type can be identified by the last substring <code>foo&#47;bar</code>"},{"owner":{"account_id":27317635,"reputation":737,"user_id":20831888,"display_name":"Kozydot"},"score":0,"creation_date":1696845667,"post_id":77252198,"comment_id":136200522,"body_markdown":"@pizza Yes, you are correct. Using a custom deserializer for the entire class would mean you have to manually handle the deserialization of all properties in the class. This can be tedious and error-prone, especially if your class has a lot of properties. A better approach would be to use a custom deserializer just for the `info` field, and let Jackson handle the deserialization of the other fields automatically.","body":"@pizza Yes, you are correct. Using a custom deserializer for the entire class would mean you have to manually handle the deserialization of all properties in the class. This can be tedious and error-prone, especially if your class has a lot of properties. A better approach would be to use a custom deserializer just for the <code>info</code> field, and let Jackson handle the deserialization of the other fields automatically."},{"owner":{"account_id":14337360,"reputation":614,"user_id":10356422,"display_name":"pizza"},"score":0,"creation_date":1697067125,"post_id":77252198,"comment_id":136234209,"body_markdown":"@Kozydot sure thanks for the suggestion. But how do I pass &quot;type&quot; to the deserializer?","body":"@Kozydot sure thanks for the suggestion. But how do I pass &quot;type&quot; to the deserializer?"},{"owner":{"account_id":27317635,"reputation":737,"user_id":20831888,"display_name":"Kozydot"},"score":0,"creation_date":1697074411,"post_id":77252198,"comment_id":136234736,"body_markdown":"@pizza You can use the ContextualDeserializer interface, which allows you to create a deserializer that is aware of the context in which it is being used.","body":"@pizza You can use the ContextualDeserializer interface, which allows you to create a deserializer that is aware of the context in which it is being used."}],"answers":[{"tags":[],"owner":{"account_id":18239208,"reputation":149,"user_id":13276541,"display_name":"Ahmed Mera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699894633,"creation_date":1699894633,"answer_id":77475548,"question_id":77252198,"body_markdown":"To resolve this issue you cane remove this annotion **`@JsonTypeInfo(...)`**\r\n\r\nYour POJO\r\n```\r\nclass Pojo {\r\n   private String type;\r\n   private Info info;\r\n\r\n  // Getter &amp; Setter\r\n}\r\n```\r\nIt will work. Let me know ","title":"Jackson polymorphic deserialization based on property substring","body":"<p>To resolve this issue you cane remove this annotion <strong><code>@JsonTypeInfo(...)</code></strong></p>\n<p>Your POJO</p>\n<pre><code>class Pojo {\n   private String type;\n   private Info info;\n\n  // Getter &amp; Setter\n}\n</code></pre>\n<p>It will work. Let me know</p>\n"}],"owner":{"account_id":14337360,"reputation":614,"user_id":10356422,"display_name":"pizza"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699894765,"creation_date":1696735357,"question_id":77252198,"body_markdown":"Consider this JSON array:\r\n\r\n```json\r\n[\r\n   {\r\n      &quot;type&quot;: &quot;xyz-foo&quot;,\r\n      &quot;info&quot;: {\r\n         &quot;name&quot;: &quot;John&quot;,\r\n         &quot;age&quot;: 20,\r\n         &quot;company&quot;: &quot;some company&quot;\r\n      }\r\n   },\r\n   {\r\n      &quot;type&quot;: &quot;xyz-bar&quot;,\r\n      &quot;info&quot;: {\r\n         &quot;name&quot;: &quot;Tom&quot;,\r\n         &quot;age&quot;: 10,\r\n         &quot;school&quot;: &quot;some school&quot;\r\n      }\r\n   }\r\n]\r\n```\r\n\r\nand I have a POJO like this\r\n```java\r\nclass Pojo {\r\n   private String type;\r\n   \r\n   @JsonTypeInfo(\r\n            use = JsonTypeInfo.Id.NAME, property = &quot;type&quot;,\r\n            include = JsonTypeInfo.As.EXTERNAL_PROPERTY, visible = true)\r\n    @JsonSubTypes(value = {@JsonSubTypes.Type(value = FooInfo.class, name = &quot;foo&quot;),\r\n    @JsonSubTypes(value = {@JsonSubTypes.Type(value = BarInfo.class, name = &quot;bar&quot;)})\r\n   private Info info;\r\n}\r\n```\r\n\r\nObviously, this will not work because type is neither ```foo``` nor ```bar```. And I get an error saying \r\n\r\n&gt; Could not resolve type id &#39;xyz-foo&#39; as a subtype of `Info`: known type\r\n&gt; ids = [foo, bar] (for POJO property &#39;info&#39;)\r\n\r\nIs there anyway to match the subclass based on the substring?\r\n","title":"Jackson polymorphic deserialization based on property substring","body":"<p>Consider this JSON array:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n   {\n      &quot;type&quot;: &quot;xyz-foo&quot;,\n      &quot;info&quot;: {\n         &quot;name&quot;: &quot;John&quot;,\n         &quot;age&quot;: 20,\n         &quot;company&quot;: &quot;some company&quot;\n      }\n   },\n   {\n      &quot;type&quot;: &quot;xyz-bar&quot;,\n      &quot;info&quot;: {\n         &quot;name&quot;: &quot;Tom&quot;,\n         &quot;age&quot;: 10,\n         &quot;school&quot;: &quot;some school&quot;\n      }\n   }\n]\n</code></pre>\n<p>and I have a POJO like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Pojo {\n   private String type;\n   \n   @JsonTypeInfo(\n            use = JsonTypeInfo.Id.NAME, property = &quot;type&quot;,\n            include = JsonTypeInfo.As.EXTERNAL_PROPERTY, visible = true)\n    @JsonSubTypes(value = {@JsonSubTypes.Type(value = FooInfo.class, name = &quot;foo&quot;),\n    @JsonSubTypes(value = {@JsonSubTypes.Type(value = BarInfo.class, name = &quot;bar&quot;)})\n   private Info info;\n}\n</code></pre>\n<p>Obviously, this will not work because type is neither <code>foo</code> nor <code>bar</code>. And I get an error saying</p>\n<blockquote>\n<p>Could not resolve type id 'xyz-foo' as a subtype of <code>Info</code>: known type\nids = [foo, bar] (for POJO property 'info')</p>\n</blockquote>\n<p>Is there anyway to match the subclass based on the substring?</p>\n"},{"tags":["java","spring","openapi","openapi-generator","feign"],"owner":{"account_id":17945128,"reputation":96,"user_id":13039593,"display_name":"mk03"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699894742,"creation_date":1699894742,"question_id":77475559,"body_markdown":"I was using the `openapi-generator-maven-plugin` to generate feign client using:\r\n\r\n    &lt;generatorName&gt;spring&lt;/generatorName&gt;\r\n    &lt;library&gt;spring-cloud&lt;/library&gt;\r\n\r\nThe Client is generated as follows:\r\n\r\n    @FeignClient(name=&quot;${abcClient.name:abc}&quot;, url=&quot;${abcClient.url:http://localhost}&quot;, configuration = ClientConfiguration.class)\r\n    public interface AbcClientApiClient extends AbcClientApi {\r\n    }\r\n\r\nIn this, I wanted to specify the URL and also use a different configuration as I want custom encoder/decoder and okHttpClient. I can&#39;t modify the generated client file because it is generated each time the project is complied, so I will lose any value I set here.\r\n\r\nI was not able to find any documentation or examples related to it. \r\n\r\nAny help would be appreciated, thanks!","title":"Change URL for Feign Client Generated By Open-Api-Generator","body":"<p>I was using the <code>openapi-generator-maven-plugin</code> to generate feign client using:</p>\n<pre><code>&lt;generatorName&gt;spring&lt;/generatorName&gt;\n&lt;library&gt;spring-cloud&lt;/library&gt;\n</code></pre>\n<p>The Client is generated as follows:</p>\n<pre><code>@FeignClient(name=&quot;${abcClient.name:abc}&quot;, url=&quot;${abcClient.url:http://localhost}&quot;, configuration = ClientConfiguration.class)\npublic interface AbcClientApiClient extends AbcClientApi {\n}\n</code></pre>\n<p>In this, I wanted to specify the URL and also use a different configuration as I want custom encoder/decoder and okHttpClient. I can't modify the generated client file because it is generated each time the project is complied, so I will lose any value I set here.</p>\n<p>I was not able to find any documentation or examples related to it.</p>\n<p>Any help would be appreciated, thanks!</p>\n"},{"tags":["java","ssl","rmi"],"comments":[{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":1,"creation_date":1670151799,"post_id":74674857,"comment_id":131802915,"body_markdown":"Sounds like you have a version conflict.","body":"Sounds like you have a version conflict."},{"owner":{"account_id":14801365,"reputation":376,"user_id":15322661,"display_name":"Rustam"},"score":0,"creation_date":1670264137,"post_id":74674857,"comment_id":131831322,"body_markdown":"what is a java version?","body":"what is a java version?"}],"answers":[{"tags":[],"owner":{"account_id":26919313,"reputation":44,"user_id":20982349,"display_name":"Yuval Bar Maoz"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1673435974,"creation_date":1673435958,"answer_id":75082206,"question_id":74674857,"body_markdown":"Try to change the SDK version to 15, and then return it to the updated version.\r\nYou can change your DSK version in the &quot;Project Structure&quot;, shortcut to get there:\r\n \r\nctrl+alt+shift+S\r\n\r\n[&quot;Project Structure&quot; window in IntelliJ][1]\r\n\r\nMake sure you click the &quot;Apply&quot; button.\r\n\r\nIt helps me solve the same problem.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nKPUT.png","title":"What to do with &quot;java: No enum constant javax.lang.model.element.Modifier.SEALED&quot; build error?","body":"<p>Try to change the SDK version to 15, and then return it to the updated version.\nYou can change your DSK version in the &quot;Project Structure&quot;, shortcut to get there:</p>\n<p>ctrl+alt+shift+S</p>\n<p><a href=\"https://i.stack.imgur.com/nKPUT.png\" rel=\"nofollow noreferrer\">&quot;Project Structure&quot; window in IntelliJ</a></p>\n<p>Make sure you click the &quot;Apply&quot; button.</p>\n<p>It helps me solve the same problem.</p>\n"},{"tags":[],"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692924429,"creation_date":1692924429,"answer_id":76973635,"question_id":74674857,"body_markdown":"I solved the same project by lowering the language level.\r\nFrom jdk 17+,**sealed types** are introduced.\r\n  \r\n1)Go to File&gt;&gt;Project structure.  \r\n2)Click the **Language level** dropdown and set it to **16**\r\n\r\n   Close and rebuild your application.Should now work.","title":"What to do with &quot;java: No enum constant javax.lang.model.element.Modifier.SEALED&quot; build error?","body":"<p>I solved the same project by lowering the language level.\nFrom jdk 17+,<strong>sealed types</strong> are introduced.</p>\n<p>1)Go to File&gt;&gt;Project structure.<br />\n2)Click the <strong>Language level</strong> dropdown and set it to <strong>16</strong></p>\n<p>Close and rebuild your application.Should now work.</p>\n"},{"tags":[],"owner":{"account_id":14730572,"reputation":322,"user_id":10638010,"display_name":"Ika"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699894731,"creation_date":1699894731,"answer_id":77475557,"question_id":74674857,"body_markdown":"If you are using IntelliJ, find the .iml file in your project\r\n\r\nYou are looking for this line:\r\n\r\n    &lt;component name=&quot;NewModuleRootManager&quot; LANGUAGE_LEVEL=&quot;JDK_17&quot;&gt;\r\n\r\nSet language level to 16\r\n\r\n    &lt;component name=&quot;NewModuleRootManager&quot; LANGUAGE_LEVEL=&quot;JDK_16&quot;&gt;\r\n\r\nRebuild your project :)\r\n\r\n\r\n  \r\n","title":"What to do with &quot;java: No enum constant javax.lang.model.element.Modifier.SEALED&quot; build error?","body":"<p>If you are using IntelliJ, find the .iml file in your project</p>\n<p>You are looking for this line:</p>\n<pre><code>&lt;component name=&quot;NewModuleRootManager&quot; LANGUAGE_LEVEL=&quot;JDK_17&quot;&gt;\n</code></pre>\n<p>Set language level to 16</p>\n<pre><code>&lt;component name=&quot;NewModuleRootManager&quot; LANGUAGE_LEVEL=&quot;JDK_16&quot;&gt;\n</code></pre>\n<p>Rebuild your project :)</p>\n"}],"owner":{"account_id":21582929,"reputation":25,"user_id":15913856,"display_name":"Raynaud Cornille"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7427,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75082206,"answer_count":3,"score":2,"last_activity_date":1699894731,"creation_date":1670151328,"question_id":74674857,"body_markdown":"For a University project we need to implement a server &#39;registrar&#39; that communicates with a client &#39;barowner&#39; through a SSL RMI connection. When building the client, I get the error java: No enum constant javax.lang.model.element.Modifier.SEALED build error. The Server gets build without any problems. \r\n\r\n**BarownerMain.java**\r\n```\r\npackage com.example.BarOwner;\r\n\r\nimport com.example.registrar.RegistrarInterface;\r\n\r\nimport javax.rmi.ssl.SslRMIClientSocketFactory;\r\nimport java.net.InetAddress;\r\nimport java.net.UnknownHostException;\r\nimport java.rmi.NotBoundException;\r\nimport java.rmi.RemoteException;\r\nimport java.rmi.registry.LocateRegistry;\r\nimport java.rmi.registry.Registry;\r\n\r\npublic class BarOwnerMain {\r\n    public static void main(String[] args) throws RemoteException {\r\n\r\n        String pass = &quot;password&quot;;\r\n        System.setProperty(&quot;javax.net.ssl.debug&quot;, &quot;all&quot;);\r\n        System.setProperty(&quot;javax.net.ssl.keyStore&quot;, System.getProperty(&quot;user.dir&quot;) + &quot;/keys/raynaud.jks&quot;);\r\n        System.setProperty(&quot;javax.net.ssl.keyStorePassword&quot;, pass);\r\n        System.setProperty(&quot;javax.net.ssl.trustStore&quot;, System.getProperty(&quot;user.dir&quot;) + &quot;/keys/raynaud.jks&quot;);\r\n        System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, pass);\r\n\r\n        Registry registrarRegistry;\r\n        RegistrarInterface registrarInterface;\r\n        try {\r\n             registrarRegistry = LocateRegistry.getRegistry(\r\n                    InetAddress.getLocalHost().getHostName(), 1112,\r\n                    new RMISSLClientSocketFactory());\r\n            registrarInterface = (RegistrarInterface) registrarRegistry.lookup(&quot;RegistrarService&quot;);\r\n            BarOwnerMenu.showMenu(registrarInterface);\r\n        } catch (RemoteException | NotBoundException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (UnknownHostException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\nI already tried editing javax.lang.module as desribed in [JDK-8244367](https://bugs.openjdk.org/browse/JDK-8244367) but IntelliJ doesn&#39;t let me. Any help would be appreciated!","title":"What to do with &quot;java: No enum constant javax.lang.model.element.Modifier.SEALED&quot; build error?","body":"<p>For a University project we need to implement a server 'registrar' that communicates with a client 'barowner' through a SSL RMI connection. When building the client, I get the error java: No enum constant javax.lang.model.element.Modifier.SEALED build error. The Server gets build without any problems.</p>\n<p><strong>BarownerMain.java</strong></p>\n<pre><code>package com.example.BarOwner;\n\nimport com.example.registrar.RegistrarInterface;\n\nimport javax.rmi.ssl.SslRMIClientSocketFactory;\nimport java.net.InetAddress;\nimport java.net.UnknownHostException;\nimport java.rmi.NotBoundException;\nimport java.rmi.RemoteException;\nimport java.rmi.registry.LocateRegistry;\nimport java.rmi.registry.Registry;\n\npublic class BarOwnerMain {\n    public static void main(String[] args) throws RemoteException {\n\n        String pass = &quot;password&quot;;\n        System.setProperty(&quot;javax.net.ssl.debug&quot;, &quot;all&quot;);\n        System.setProperty(&quot;javax.net.ssl.keyStore&quot;, System.getProperty(&quot;user.dir&quot;) + &quot;/keys/raynaud.jks&quot;);\n        System.setProperty(&quot;javax.net.ssl.keyStorePassword&quot;, pass);\n        System.setProperty(&quot;javax.net.ssl.trustStore&quot;, System.getProperty(&quot;user.dir&quot;) + &quot;/keys/raynaud.jks&quot;);\n        System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, pass);\n\n        Registry registrarRegistry;\n        RegistrarInterface registrarInterface;\n        try {\n             registrarRegistry = LocateRegistry.getRegistry(\n                    InetAddress.getLocalHost().getHostName(), 1112,\n                    new RMISSLClientSocketFactory());\n            registrarInterface = (RegistrarInterface) registrarRegistry.lookup(&quot;RegistrarService&quot;);\n            BarOwnerMenu.showMenu(registrarInterface);\n        } catch (RemoteException | NotBoundException e) {\n            throw new RuntimeException(e);\n        } catch (UnknownHostException e) {\n            e.printStackTrace();\n        }\n\n    }\n}\n\n</code></pre>\n<p>I already tried editing javax.lang.module as desribed in <a href=\"https://bugs.openjdk.org/browse/JDK-8244367\" rel=\"nofollow noreferrer\">JDK-8244367</a> but IntelliJ doesn't let me. Any help would be appreciated!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":12,"creation_date":1699886927,"post_id":77474701,"comment_id":136583758,"body_markdown":"I presume you mean &quot;abstract classes&quot; rather than &quot;abstraction&quot;. Abstraction is a concept. Both abstract classes and interfaces are ways of achieving abstraction.","body":"I presume you mean &quot;abstract classes&quot; rather than &quot;abstraction&quot;. Abstraction is a concept. Both abstract classes and interfaces are ways of achieving abstraction."},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":4,"creation_date":1699887047,"post_id":77474701,"comment_id":136583779,"body_markdown":"In general: prefer to use an interface if it&#39;s possible. You will eventually encounter a situation where an interface is not possible, and you&#39;ll have to use an abstract class instead (for example, if you need to store data in it).","body":"In general: prefer to use an interface if it&#39;s possible. You will eventually encounter a situation where an interface is not possible, and you&#39;ll have to use an abstract class instead (for example, if you need to store data in it)."},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1699894083,"post_id":77474701,"comment_id":136585261,"body_markdown":"[Prefer composition over inheritance](https://en.wikipedia.org/wiki/Composition_over_inheritance)","body":"<a href=\"https://en.wikipedia.org/wiki/Composition_over_inheritance\" rel=\"nofollow noreferrer\">Prefer composition over inheritance</a>"}],"answers":[{"tags":[],"owner":{"account_id":3544434,"reputation":1492,"user_id":2960757,"display_name":"CodeTheorist"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699889265,"creation_date":1699887595,"answer_id":77474828,"question_id":77474701,"body_markdown":"Interfaces:\r\n\r\nSay you have an interface, like:\r\n\r\n    interface Animal {\r\n      String makeNoise();\r\n    }\r\n\r\nand a couple of classes that implement Animal:\r\n\r\n    class Cat implements Animal {\r\n        String makeNoise() {\r\n            return &quot;Meow&quot;;\r\n        }\r\n    }\r\n\r\n    class Dog implements Animal {\r\n        String makeNoise() {\r\n            return &quot;Woof&quot;;\r\n        }\r\n    }\r\n\r\n    \r\nNow you can use the interface as the return type, so a method can return a `Cat` or a `Dog`.\r\n\r\n    String makeAnimalMakeNoise(int animalId) {\r\n        Animal animal = pretendAnimalService.getDogOrCat(animalId);\r\n\r\n        animal.makeNoise();\r\n    }\r\n\r\nAbstract Classes:\r\n\r\nLet&#39;s say you have an abstract class:\r\n```java\r\nabstract class Animal {\r\n    public String makeNoise() {\r\n        return &quot;Whistle&quot;;\r\n    }\r\n\r\n    abstract public String getName();\r\n}\r\n```\r\nNow, any class that extends this would need to implement the `getName` method:\r\n\r\n    class Cat extends Animal {\r\n        String getName() {\r\n            return &quot;Pussy&quot;;\r\n        }\r\n    }\r\n\r\n    class Dog extends Animal {\r\n        String getName() {\r\n            return &quot;Fido&quot;;\r\n        }\r\n    }\r\n\r\nBoth of the above classes implemented the required `getName` method, but they also have access to the parent classes `makeNoise` method, which can also be overridden if required.\r\n\r\nIt&#39;s important to note the other differences too, which are:\r\n\r\n - You can only extend one abstract class but you may implement multiple\r\n   interfaces.\r\n - Interfaces should be used when different types should have the same method signature whereas abstract classes should be used when implementations share a common behaviour.\r\n - They are not mutually exclusive.\r\n - An interface can only have public methods where as abstract classes can have public and protected methods.\r\n","title":"When to use abstraction and when an interface?","body":"<p>Interfaces:</p>\n<p>Say you have an interface, like:</p>\n<pre><code>interface Animal {\n  String makeNoise();\n}\n</code></pre>\n<p>and a couple of classes that implement Animal:</p>\n<pre><code>class Cat implements Animal {\n    String makeNoise() {\n        return &quot;Meow&quot;;\n    }\n}\n\nclass Dog implements Animal {\n    String makeNoise() {\n        return &quot;Woof&quot;;\n    }\n}\n</code></pre>\n<p>Now you can use the interface as the return type, so a method can return a <code>Cat</code> or a <code>Dog</code>.</p>\n<pre><code>String makeAnimalMakeNoise(int animalId) {\n    Animal animal = pretendAnimalService.getDogOrCat(animalId);\n\n    animal.makeNoise();\n}\n</code></pre>\n<p>Abstract Classes:</p>\n<p>Let's say you have an abstract class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>abstract class Animal {\n    public String makeNoise() {\n        return &quot;Whistle&quot;;\n    }\n\n    abstract public String getName();\n}\n</code></pre>\n<p>Now, any class that extends this would need to implement the <code>getName</code> method:</p>\n<pre><code>class Cat extends Animal {\n    String getName() {\n        return &quot;Pussy&quot;;\n    }\n}\n\nclass Dog extends Animal {\n    String getName() {\n        return &quot;Fido&quot;;\n    }\n}\n</code></pre>\n<p>Both of the above classes implemented the required <code>getName</code> method, but they also have access to the parent classes <code>makeNoise</code> method, which can also be overridden if required.</p>\n<p>It's important to note the other differences too, which are:</p>\n<ul>\n<li>You can only extend one abstract class but you may implement multiple\ninterfaces.</li>\n<li>Interfaces should be used when different types should have the same method signature whereas abstract classes should be used when implementations share a common behaviour.</li>\n<li>They are not mutually exclusive.</li>\n<li>An interface can only have public methods where as abstract classes can have public and protected methods.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1699890326,"creation_date":1699890326,"answer_id":77475110,"question_id":77474701,"body_markdown":"The general age-old principle is: Stick with interfaces until you&#39;re forced to write an abstract class.\r\n\r\nAn `interface` in Java is a non-instantiable type which defines a public interface that other types can *choose* to conform to.\r\n\r\n* Interfaces can declare public methods, which must be defined by their implementors. All such methods are implicitly `abstract`, so you don&#39;t need to use the word `abstract`.\r\n* In old versions of Java, interfaces could not have default implementations, so *every* method was `abstract`. This is no longer the case, and interfaces can now have default implementations that get used in `implement`ing classes unless replaced.\r\n* In recent versions of Java, interfaces can declare `private` helper methods. These can help in implementing default implementations.\r\n* Interfaces can never have constructors or instance variables.\r\n* A class can `implement` several interfaces.\r\n\r\nAn `abstract class` is just a class that cannot be instantiated. Abstract classes are not required to  define any `abstract` methods, though you&#39;ll usually want to.\r\n\r\n* Abstract classes can declare methods with any visibility: `public`, `private`, `protected`, and package-private.\r\n* Abstract classes can implement methods or leave them `abstract`. Methods in an abstract class are *not* implicitly `abstract` and must be marked as such.\r\n* An abstract class can have constructors, which must be called by `extend`ing classes in their own constructor using `super`. An abstract class can have instance variables of any visibility, and these work just like instance variables in any parent class.\r\n* A class can only `extend` one class, either an `abstract` one or a concrete one. A class&#39; `abstract`ness does not change the number of superclasses it&#39;s allowed to have.\r\n\r\n`abstract class`es should be the exception and not the norm. You should use an abstract class if you need to maintain some internal state while also letting subclasses define your own behavior. A great example of this comes from the Java Swing GUI library: [`AbstractButton`](https://docs.oracle.com/javase/8/docs/api/javax/swing/AbstractButton.html). `AbstractButton` is the abstract parent of things that behave vaguely like buttons in a window, including buttons, toggle buttons, and items in a menu. Anyone can subclass `AbstractButton` and implement its members to define a button-like display. But `AbstractButton` also has to maintain a lot of internal state (much of it coming from `JComponent`) in order to communicate with the window and with the Swing API as a whole.\r\n\r\nIf you want to define the public interface for a collection of types, use an `interface`. If you want to provide default implementations for some of those methods and are using a version of Java released after 2014, use interfaces. If you need default implementations but are stuck in the 2000s, use an abstract class. Regardless of Java version, if you need private state such as instance variables or custom initialization like a constructor, use an abstract class.","title":"When to use abstraction and when an interface?","body":"<p>The general age-old principle is: Stick with interfaces until you're forced to write an abstract class.</p>\n<p>An <code>interface</code> in Java is a non-instantiable type which defines a public interface that other types can <em>choose</em> to conform to.</p>\n<ul>\n<li>Interfaces can declare public methods, which must be defined by their implementors. All such methods are implicitly <code>abstract</code>, so you don't need to use the word <code>abstract</code>.</li>\n<li>In old versions of Java, interfaces could not have default implementations, so <em>every</em> method was <code>abstract</code>. This is no longer the case, and interfaces can now have default implementations that get used in <code>implement</code>ing classes unless replaced.</li>\n<li>In recent versions of Java, interfaces can declare <code>private</code> helper methods. These can help in implementing default implementations.</li>\n<li>Interfaces can never have constructors or instance variables.</li>\n<li>A class can <code>implement</code> several interfaces.</li>\n</ul>\n<p>An <code>abstract class</code> is just a class that cannot be instantiated. Abstract classes are not required to  define any <code>abstract</code> methods, though you'll usually want to.</p>\n<ul>\n<li>Abstract classes can declare methods with any visibility: <code>public</code>, <code>private</code>, <code>protected</code>, and package-private.</li>\n<li>Abstract classes can implement methods or leave them <code>abstract</code>. Methods in an abstract class are <em>not</em> implicitly <code>abstract</code> and must be marked as such.</li>\n<li>An abstract class can have constructors, which must be called by <code>extend</code>ing classes in their own constructor using <code>super</code>. An abstract class can have instance variables of any visibility, and these work just like instance variables in any parent class.</li>\n<li>A class can only <code>extend</code> one class, either an <code>abstract</code> one or a concrete one. A class' <code>abstract</code>ness does not change the number of superclasses it's allowed to have.</li>\n</ul>\n<p><code>abstract class</code>es should be the exception and not the norm. You should use an abstract class if you need to maintain some internal state while also letting subclasses define your own behavior. A great example of this comes from the Java Swing GUI library: <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/AbstractButton.html\" rel=\"nofollow noreferrer\"><code>AbstractButton</code></a>. <code>AbstractButton</code> is the abstract parent of things that behave vaguely like buttons in a window, including buttons, toggle buttons, and items in a menu. Anyone can subclass <code>AbstractButton</code> and implement its members to define a button-like display. But <code>AbstractButton</code> also has to maintain a lot of internal state (much of it coming from <code>JComponent</code>) in order to communicate with the window and with the Swing API as a whole.</p>\n<p>If you want to define the public interface for a collection of types, use an <code>interface</code>. If you want to provide default implementations for some of those methods and are using a version of Java released after 2014, use interfaces. If you need default implementations but are stuck in the 2000s, use an abstract class. Regardless of Java version, if you need private state such as instance variables or custom initialization like a constructor, use an abstract class.</p>\n"}],"owner":{"account_id":23126814,"reputation":45,"user_id":17232487,"display_name":"Bambi2k21"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1699893098,"accepted_answer_id":77475110,"answer_count":2,"score":0,"last_activity_date":1699893766,"creation_date":1699886561,"question_id":77474701,"body_markdown":"I vaguely understand the difference between abstraction and interfaces, but what I can&#39;t understand at all, is when to use abstraction and when an interface. What are the variables needed for me to choose abstraction over interfaces and vice versa? Most of the answers online are for showing the differences, but even though I understand them. I don&#39;t know when one is more appropriate.","title":"When to use abstraction and when an interface?","body":"<p>I vaguely understand the difference between abstraction and interfaces, but what I can't understand at all, is when to use abstraction and when an interface. What are the variables needed for me to choose abstraction over interfaces and vice versa? Most of the answers online are for showing the differences, but even though I understand them. I don't know when one is more appropriate.</p>\n"},{"tags":["java","gradle"],"comments":[{"owner":{"account_id":4327054,"reputation":26992,"user_id":3533584,"display_name":"Jeff Scott Brown"},"score":2,"creation_date":1620737203,"post_id":67487009,"comment_id":119284209,"body_markdown":"It isn&#39;t clear if `issuing` is a subproject in a multiproject build or not but if it is, you should be able to `./gradlew issuing:integrationTest`.","body":"It isn&#39;t clear if <code>issuing</code> is a subproject in a multiproject build or not but if it is, you should be able to <code>.&#47;gradlew issuing:integrationTest</code>."},{"owner":{"account_id":2889245,"reputation":3533,"user_id":2478398,"display_name":"BeUndead"},"score":4,"creation_date":1620737226,"post_id":67487009,"comment_id":119284224,"body_markdown":"The `-p` Option specifies ‘working directory’ for gradle. So something like `./childDir/gradlew -p ./childDir build` or similar. (If it’s a multi project build see comment above.)","body":"The <code>-p</code> Option specifies ‘working directory’ for gradle. So something like <code>.&#47;childDir&#47;gradlew -p .&#47;childDir build</code> or similar. (If it’s a multi project build see comment above.)"},{"owner":{"account_id":1294821,"reputation":4548,"user_id":1246159,"accept_rate":71,"display_name":"Mark"},"score":0,"creation_date":1620737467,"post_id":67487009,"comment_id":119284338,"body_markdown":"issuing is the gradle project, its within the parent directory /sam-wrapper/","body":"issuing is the gradle project, its within the parent directory /sam-wrapper/"}],"answers":[{"tags":[],"owner":{"account_id":112364,"reputation":25221,"user_id":296427,"accept_rate":91,"display_name":"pixel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1699893724,"creation_date":1699893724,"answer_id":77475452,"question_id":67487009,"body_markdown":"as @BeUndead suggested use `-p` option.\r\n\r\n`./issuing/gradlew -p ./issuing build`","title":"Running gradle build from a parent folder","body":"<p>as @BeUndead suggested use <code>-p</code> option.</p>\n<p><code>./issuing/gradlew -p ./issuing build</code></p>\n"}],"owner":{"account_id":1294821,"reputation":4548,"user_id":1246159,"accept_rate":71,"display_name":"Mark"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":848,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1699893724,"creation_date":1620737012,"question_id":67487009,"body_markdown":"I have a folder structure:\r\n\r\n    - sam-wrapper/  \r\n    -- issuing/\r\n    --- build.gradle\r\n    --- gradlew\r\n\r\nSo when I navigate to the `issuing` folder and run `./gradlew build` it works fine. \r\n\r\nBut when I go out into the `sam-wrapper` folder and run `issuing/./gradlew build` I get the errors:\r\n\r\n    classpath\r\n    No dependencies\r\n\r\nAnd when I run `issuing/./gradlew integrationTest` I see errors:\r\n\r\n    Task &#39;integrationTest&#39; not found in root project &#39;sam-issuing&#39;\r\n\r\nWhat is the correct command to run gradle build within the parent folder (`sam-wrapper`)?\r\n\r\n\r\n**EDIT**\r\n\r\n`sam-wrapper` is just the parent directory, the gradle project is within `issuing`","title":"Running gradle build from a parent folder","body":"<p>I have a folder structure:</p>\n<pre><code>- sam-wrapper/  \n-- issuing/\n--- build.gradle\n--- gradlew\n</code></pre>\n<p>So when I navigate to the <code>issuing</code> folder and run <code>./gradlew build</code> it works fine.</p>\n<p>But when I go out into the <code>sam-wrapper</code> folder and run <code>issuing/./gradlew build</code> I get the errors:</p>\n<pre><code>classpath\nNo dependencies\n</code></pre>\n<p>And when I run <code>issuing/./gradlew integrationTest</code> I see errors:</p>\n<pre><code>Task 'integrationTest' not found in root project 'sam-issuing'\n</code></pre>\n<p>What is the correct command to run gradle build within the parent folder (<code>sam-wrapper</code>)?</p>\n<p><strong>EDIT</strong></p>\n<p><code>sam-wrapper</code> is just the parent directory, the gradle project is within <code>issuing</code></p>\n"},{"tags":["java","instanceof"],"comments":[{"owner":{"account_id":129540,"reputation":210837,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":5,"creation_date":1699880770,"post_id":77474094,"comment_id":136582557,"body_markdown":"Can `method1` and `method2` be a single method *on* the interface, so then all you&#39;d need to call is `aaa.method()`?","body":"Can <code>method1</code> and <code>method2</code> be a single method <i>on</i> the interface, so then all you&#39;d need to call is <code>aaa.method()</code>?"},{"owner":{"account_id":7980951,"reputation":2003,"user_id":6022333,"accept_rate":100,"display_name":"Matley"},"score":0,"creation_date":1699881052,"post_id":77474094,"comment_id":136582622,"body_markdown":"NO, method1 and method2 are private methods in Service with a little bit different steps to execute, eg only in method2 I call aaa.getSomeObject()...","body":"NO, method1 and method2 are private methods in Service with a little bit different steps to execute, eg only in method2 I call aaa.getSomeObject()..."},{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1699881525,"post_id":77474094,"comment_id":136582728,"body_markdown":"_Why_ do you want to avoid `instanceof`?","body":"<i>Why</i> do you want to avoid <code>instanceof</code>?"},{"owner":{"account_id":7980951,"reputation":2003,"user_id":6022333,"accept_rate":100,"display_name":"Matley"},"score":0,"creation_date":1699881584,"post_id":77474094,"comment_id":136582742,"body_markdown":"I don&#39;t know, maybe that&#39;s the only solution in this case? But instanceof is considered smell code...","body":"I don&#39;t know, maybe that&#39;s the only solution in this case? But instanceof is considered smell code..."},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":2,"creation_date":1699881652,"post_id":77474094,"comment_id":136582754,"body_markdown":"&#39;Code smell&#39; is a cliche, and like most cliches, doesn&#39;t accurately describe all situations.","body":"&#39;Code smell&#39; is a cliche, and like most cliches, doesn&#39;t accurately describe all situations."},{"owner":{"account_id":7980951,"reputation":2003,"user_id":6022333,"accept_rate":100,"display_name":"Matley"},"score":0,"creation_date":1699882408,"post_id":77474094,"comment_id":136582896,"body_markdown":"OK so it looks like instanceof is the only solution in this case","body":"OK so it looks like instanceof is the only solution in this case"},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1699882956,"post_id":77474094,"comment_id":136582991,"body_markdown":"Visitor pattern.","body":"Visitor pattern."},{"owner":{"account_id":3446101,"reputation":11345,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":2,"creation_date":1699884483,"post_id":77474094,"comment_id":136583266,"body_markdown":"@user207421 Does&#39;t look like a use case for the *visitor* pattern, rather a *strategy* pattern. In the visitor patter you want an action to be performed on all the objects in a complex structure, here you just want to choose the implementation based on the object type.","body":"@user207421 Does&#39;t look like a use case for the <i>visitor</i> pattern, rather a <i>strategy</i> pattern. In the visitor patter you want an action to be performed on all the objects in a complex structure, here you just want to choose the implementation based on the object type."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1699936619,"post_id":77474094,"comment_id":136590327,"body_markdown":"&quot;Method1 and Method2&quot;. –&#160;Did yo amen those to be lowercase: method1 and method2?","body":"&quot;Method1 and Method2&quot;. – Did yo amen those to be lowercase: method1 and method2?"},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1699936717,"post_id":77474094,"comment_id":136590333,"body_markdown":"Not clear. Your last two sentences puzzle me, as I cannot grasp what point you intend to convey. I assume they mean to explain why you object to using `instanceof`, but I cannot see the why.","body":"Not clear. Your last two sentences puzzle me, as I cannot grasp what point you intend to convey. I assume they mean to explain why you object to using <code>instanceof</code>, but I cannot see the why."}],"answers":[{"tags":[],"owner":{"account_id":15536406,"reputation":39,"user_id":11208494,"display_name":"Dmitrii Karmanov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699880956,"creation_date":1699880956,"answer_id":77474146,"question_id":77474094,"body_markdown":"In this case I would recommend to have a common method in the interface AAA, like:\r\n\r\n    public interface AAA {\r\n        void method1();\r\n    }\r\n\r\nand make both inherited classes to implement this method. In this case you will have to call only one method which will be automatically chosen based on the exact instance.\r\n\r\n    public class Service() {\r\n        public void ddd(AAA aaa){\r\n            aaa.method1();\r\n        }\r\n    }\r\n\r\n    ...\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            AAA b = new BBB();\r\n            AAA c = new CCC();\r\n\r\n            new Service().ddd(b); // b.method1() will be called\r\n            new Service().ddd(c); // c.method1() will be called\r\n        }\r\n    }","title":"How to avoid instanceof","body":"<p>In this case I would recommend to have a common method in the interface AAA, like:</p>\n<pre><code>public interface AAA {\n    void method1();\n}\n</code></pre>\n<p>and make both inherited classes to implement this method. In this case you will have to call only one method which will be automatically chosen based on the exact instance.</p>\n<pre><code>public class Service() {\n    public void ddd(AAA aaa){\n        aaa.method1();\n    }\n}\n\n...\n\npublic class Main {\n    public static void main(String[] args) {\n        AAA b = new BBB();\n        AAA c = new CCC();\n\n        new Service().ddd(b); // b.method1() will be called\n        new Service().ddd(c); // c.method1() will be called\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699893501,"creation_date":1699890278,"answer_id":77475106,"question_id":77474094,"body_markdown":"Ok, this may be unorthodox but it works unless there is some other requirement that is missing from your code.  I am not using interface AAA method for anything but can be added if required.\r\n\r\nBut I don&#39;t really see any problem using `instanceof`.\r\n```\r\nclass Service {    \r\n    public DDD returnDDD(AAA aaa) {\r\n        return switch(aaa.getClass().getSimpleName()) {\r\n            case &quot;BBB&quot; -&gt; method2((BBB)aaa); // casting depends on method\r\n                                             // signatures\r\n            case &quot;CCC&quot; -&gt; method3((CCC)aaa);\r\n            default -&gt; null; // or some appropriate return value.\r\n        };\r\n    }\r\n    public DDD method2(BBB b) {\r\n        System.out.println(&quot;Calling method2&quot;);\r\n        return new DDD();\r\n    }\r\n    public DDD method3(CCC c) {\r\n        System.out.println(&quot;Calling method3&quot;);\r\n        return new DDD();\r\n    }\r\n}\r\n```\r\nprints\r\n```\r\ncalling method2\r\ncalling method3\r\n```\r\nHere is how I would slightly modify your existing code.  It casts `AAA` to the appropriate subtype so you can make use of each class&#39; attributes.  The enhanced `instanceof` helps with this.\r\n```\r\nclass Service {\r\n    public DDD returnDDD(AAA aaa){\r\n        return method1(aaa);\r\n    }\r\n    private DDD method1(AAA aaa){\r\n        if(aaa instanceof BBB bbb){ // bbb cast for you\r\n            return method2(bbb);\r\n        }\r\n        return method3((CCC)aaa); // do it explicitly\r\n    }\r\n}\r\n```\r\nThe above presumes that `method2` and `method3` can accept the subtypes as arguments based on the method signatures.  Otherwise, they may need to be cast internally to the method to access subtype attributes.  ","title":"How to avoid instanceof","body":"<p>Ok, this may be unorthodox but it works unless there is some other requirement that is missing from your code.  I am not using interface AAA method for anything but can be added if required.</p>\n<p>But I don't really see any problem using <code>instanceof</code>.</p>\n<pre><code>class Service {    \n    public DDD returnDDD(AAA aaa) {\n        return switch(aaa.getClass().getSimpleName()) {\n            case &quot;BBB&quot; -&gt; method2((BBB)aaa); // casting depends on method\n                                             // signatures\n            case &quot;CCC&quot; -&gt; method3((CCC)aaa);\n            default -&gt; null; // or some appropriate return value.\n        };\n    }\n    public DDD method2(BBB b) {\n        System.out.println(&quot;Calling method2&quot;);\n        return new DDD();\n    }\n    public DDD method3(CCC c) {\n        System.out.println(&quot;Calling method3&quot;);\n        return new DDD();\n    }\n}\n</code></pre>\n<p>prints</p>\n<pre><code>calling method2\ncalling method3\n</code></pre>\n<p>Here is how I would slightly modify your existing code.  It casts <code>AAA</code> to the appropriate subtype so you can make use of each class' attributes.  The enhanced <code>instanceof</code> helps with this.</p>\n<pre><code>class Service {\n    public DDD returnDDD(AAA aaa){\n        return method1(aaa);\n    }\n    private DDD method1(AAA aaa){\n        if(aaa instanceof BBB bbb){ // bbb cast for you\n            return method2(bbb);\n        }\n        return method3((CCC)aaa); // do it explicitly\n    }\n}\n</code></pre>\n<p>The above presumes that <code>method2</code> and <code>method3</code> can accept the subtypes as arguments based on the method signatures.  Otherwise, they may need to be cast internally to the method to access subtype attributes.</p>\n"}],"owner":{"account_id":7980951,"reputation":2003,"user_id":6022333,"accept_rate":100,"display_name":"Matley"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1699893501,"creation_date":1699880545,"question_id":77474094,"body_markdown":"I have interface `AAA`. I have two classes (entities):\r\n\r\n```public class BBB implements AAA```\r\n\r\n```public class CCC implements AAA```\r\n\r\nBoth classes have different fields of course that will be used in `Service`\r\n\r\nI have Service:\r\n\r\n```\r\npublic class Service() {\r\n    public DDD returnDdd(AAA aaa){\r\n        ....\r\n        return method1(aaa);\r\n    }\r\n    private DDD method1(AAA aaa){\r\n        if(aaa instanceof BBB){\r\n            return method2(aaa)\r\n        }\r\n        return method3(aaa)\r\n    }\r\n}\r\n```\r\n\r\n\r\nHow to avoid instanceof? In my `Service` I have common logic for both `BBB` and `CCC`. `Method1` and `Method2` use the same private methods in this service.\r\n","title":"How to avoid instanceof","body":"<p>I have interface <code>AAA</code>. I have two classes (entities):</p>\n<p><code>public class BBB implements AAA</code></p>\n<p><code>public class CCC implements AAA</code></p>\n<p>Both classes have different fields of course that will be used in <code>Service</code></p>\n<p>I have Service:</p>\n<pre><code>public class Service() {\n    public DDD returnDdd(AAA aaa){\n        ....\n        return method1(aaa);\n    }\n    private DDD method1(AAA aaa){\n        if(aaa instanceof BBB){\n            return method2(aaa)\n        }\n        return method3(aaa)\n    }\n}\n</code></pre>\n<p>How to avoid instanceof? In my <code>Service</code> I have common logic for both <code>BBB</code> and <code>CCC</code>. <code>Method1</code> and <code>Method2</code> use the same private methods in this service.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":185558,"reputation":7305,"user_id":422353,"display_name":"madth3"},"score":0,"creation_date":1380124158,"post_id":19009340,"comment_id":28085053,"body_markdown":"Apart from the coding conventions already documented for Java, there are no standards for APIs (Not even the Java libraries are 100% consistent in that regard). There could be many recommendations but most likely they would be supported by opinions and experience.","body":"Apart from the coding conventions already documented for Java, there are no standards for APIs (Not even the Java libraries are 100% consistent in that regard). There could be many recommendations but most likely they would be supported by opinions and experience."},{"owner":{"account_id":1600914,"reputation":1477,"user_id":1481955,"accept_rate":97,"display_name":"Krithika Vittal"},"score":1,"creation_date":1380125095,"post_id":19009340,"comment_id":28085643,"body_markdown":"Aren&#39;t opinions the outcome of expert experience in stackoverflow ?","body":"Aren&#39;t opinions the outcome of expert experience in stackoverflow ?"}],"answers":[{"tags":[],"owner":{"account_id":936797,"reputation":2054,"user_id":965593,"accept_rate":67,"display_name":"pamphlet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1380123844,"creation_date":1380123844,"answer_id":19009415,"question_id":19009340,"body_markdown":"Be consistent. Document assumptions. Think about thread safety, security and performance. Use empathy: think of callers to the API&#39;s as users, and try to make their lives easier.","title":"Steps to follow in creation of a API/library in Java","body":"<p>Be consistent. Document assumptions. Think about thread safety, security and performance. Use empathy: think of callers to the API's as users, and try to make their lives easier.</p>\n"}],"owner":{"account_id":1600914,"reputation":1477,"user_id":1481955,"accept_rate":97,"display_name":"Krithika Vittal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1380124072,"accepted_answer_id":19009415,"answer_count":1,"score":1,"last_activity_date":1699893283,"creation_date":1380123630,"question_id":19009340,"body_markdown":"Trying to construct a common API library using Java. What are the coding standards/conventions to be followed for a API library. I am new to developing a API library, but have implemented Java services with web services ,mq and rdbms.","title":"Steps to follow in creation of a API/library in Java","body":"<p>Trying to construct a common API library using Java. What are the coding standards/conventions to be followed for a API library. I am new to developing a API library, but have implemented Java services with web services ,mq and rdbms.</p>\n"},{"tags":["java","api-design"],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527336,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1457097822,"creation_date":1457097822,"answer_id":35797202,"question_id":35796824,"body_markdown":"I would do whatever you believe is simpler and clearer.  \r\n\r\nAs for extension I suggest you read about [YAGNI][1]. If you really can predict the future, I suggest you play the lottery.  If you can&#39;t predict the future, I suggest you not try and only do what you know you need now.\r\n\r\n\r\n  [1]: http://c2.com/cgi/wiki?YouArentGonnaNeedIt","title":"API design : return type should be Map or a new object holding Map","body":"<p>I would do whatever you believe is simpler and clearer.  </p>\n\n<p>As for extension I suggest you read about <a href=\"http://c2.com/cgi/wiki?YouArentGonnaNeedIt\" rel=\"nofollow\">YAGNI</a>. If you really can predict the future, I suggest you play the lottery.  If you can't predict the future, I suggest you not try and only do what you know you need now.</p>\n"}],"owner":{"account_id":1144443,"reputation":4425,"user_id":2113996,"accept_rate":31,"display_name":"eatSleepCode"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1699893186,"creation_date":1457096655,"question_id":35796824,"body_markdown":"I am designing an API for getting some values from client, and need some help about return type of that API.\r\n\r\nWhat should be the approach (this is not real code, this just the representation of real code)?\r\n\r\nApproach 1:\r\n    \r\n    public interface Provider {\r\n        Map&lt;Long, Long&gt; getDependencies(String type);\r\n    }\r\n    \r\n\r\nApproach 2:\r\n    \r\n    public interface Provider {\r\n        Dependency getDependency(String type);\r\n    }\r\n    \r\n    public class Dependency {\r\n        private Map&lt;Long, Long&gt; dependency;\r\n        public Dependency(Map&lt;Long, Long&gt; dependency) {\r\n            this.dependency = dependency;\r\n        }\r\n    \r\n        public Map&lt;Long, Long&gt; getDependency() {\r\n            ImmutableMap.copyOf(dependency);\r\n        }\r\n    }\r\n\r\n#Update\r\n\r\nTo my opinion second approach is good as its open for extension.\r\n\r\nOne more question that I have is `getDependency` should me immutable or not?","title":"API design : return type should be Map or a new object holding Map","body":"<p>I am designing an API for getting some values from client, and need some help about return type of that API.</p>\n<p>What should be the approach (this is not real code, this just the representation of real code)?</p>\n<p>Approach 1:</p>\n<pre><code>public interface Provider {\n    Map&lt;Long, Long&gt; getDependencies(String type);\n}\n</code></pre>\n<p>Approach 2:</p>\n<pre><code>public interface Provider {\n    Dependency getDependency(String type);\n}\n\npublic class Dependency {\n    private Map&lt;Long, Long&gt; dependency;\n    public Dependency(Map&lt;Long, Long&gt; dependency) {\n        this.dependency = dependency;\n    }\n\n    public Map&lt;Long, Long&gt; getDependency() {\n        ImmutableMap.copyOf(dependency);\n    }\n}\n</code></pre>\n<p>#Update</p>\n<p>To my opinion second approach is good as its open for extension.</p>\n<p>One more question that I have is <code>getDependency</code> should me immutable or not?</p>\n"},{"tags":["java","apache-poi","java-17"],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699893117,"creation_date":1699875574,"answer_id":77473622,"question_id":77473250,"body_markdown":"Excel cells don&#39;t contain text paragraphs. A cell only can contain single text runs having different text formatting. For that you will need [RichTextString](https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/RichTextString.html) content in the cell.\r\n\r\nCell content also may contain line breaks. But line breaks only get effective if cell style is set to wrap text.\r\n\r\nUsing [XSSFRichTextString](https://poi.apache.org/apidocs/dev/org/apache/poi/xssf/usermodel/XSSFRichTextString.html) one can append different strings using different fonts using method [XSSFRichTextString.append](https://poi.apache.org/apidocs/dev/org/apache/poi/xssf/usermodel/XSSFRichTextString.html#append-java.lang.String-org.apache.poi.xssf.usermodel.XSSFFont-).\r\n\r\nThe different fonts need to be created on workbook level. Same for the cell style.\r\n\r\nComplete example:\r\n\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    import java.io.FileOutputStream;\r\n    \r\n    class RichTextTest {\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n      XSSFWorkbook wb = new XSSFWorkbook();\r\n      \r\n      XSSFCellStyle wrapTextCellStyle = wb.createCellStyle();\r\n      wrapTextCellStyle.setWrapText(true);\r\n      \r\n      XSSFFont fontTNR = wb.createFont();\r\n      fontTNR.setFontName(&quot;Times New Roman&quot;);\r\n       \r\n      XSSFFont fontArial = wb.createFont();\r\n      fontArial.setFontName(&quot;Arial&quot;);\r\n      \r\n      XSSFRichTextString richString = new XSSFRichTextString();\r\n      richString.append(&quot;This is Times New Roman&quot;, fontTNR);\r\n      richString.append(&quot;\\n&quot;);\r\n      richString.append(&quot;This is Arial&quot;, fontArial);\r\n      \r\n      XSSFSheet sheet = wb.createSheet(&quot;Sheet1&quot;);\r\n      XSSFRow row = sheet.createRow(0);\r\n      XSSFCell cell = row.createCell(0);\r\n    \r\n      cell.setCellValue(richString);\r\n      cell.setCellStyle(wrapTextCellStyle);\r\n      \r\n      sheet.setColumnWidth(0, 25*256);\r\n    \r\n      try ( FileOutputStream fileOut = new FileOutputStream(&quot;./workbook.xlsx&quot;); ) {\r\n       wb.write(fileOut);\r\n      }\r\n    \r\n     }\r\n    }","title":"Insert Multi para tags in a single cell in Excel sheet using Apache poi","body":"<p>Excel cells don't contain text paragraphs. A cell only can contain single text runs having different text formatting. For that you will need <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/RichTextString.html\" rel=\"nofollow noreferrer\">RichTextString</a> content in the cell.</p>\n<p>Cell content also may contain line breaks. But line breaks only get effective if cell style is set to wrap text.</p>\n<p>Using <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/xssf/usermodel/XSSFRichTextString.html\" rel=\"nofollow noreferrer\">XSSFRichTextString</a> one can append different strings using different fonts using method <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/xssf/usermodel/XSSFRichTextString.html#append-java.lang.String-org.apache.poi.xssf.usermodel.XSSFFont-\" rel=\"nofollow noreferrer\">XSSFRichTextString.append</a>.</p>\n<p>The different fonts need to be created on workbook level. Same for the cell style.</p>\n<p>Complete example:</p>\n<pre><code>import org.apache.poi.xssf.usermodel.*;\nimport java.io.FileOutputStream;\n\nclass RichTextTest {\n\n public static void main(String[] args) throws Exception {\n  XSSFWorkbook wb = new XSSFWorkbook();\n  \n  XSSFCellStyle wrapTextCellStyle = wb.createCellStyle();\n  wrapTextCellStyle.setWrapText(true);\n  \n  XSSFFont fontTNR = wb.createFont();\n  fontTNR.setFontName(&quot;Times New Roman&quot;);\n   \n  XSSFFont fontArial = wb.createFont();\n  fontArial.setFontName(&quot;Arial&quot;);\n  \n  XSSFRichTextString richString = new XSSFRichTextString();\n  richString.append(&quot;This is Times New Roman&quot;, fontTNR);\n  richString.append(&quot;\\n&quot;);\n  richString.append(&quot;This is Arial&quot;, fontArial);\n  \n  XSSFSheet sheet = wb.createSheet(&quot;Sheet1&quot;);\n  XSSFRow row = sheet.createRow(0);\n  XSSFCell cell = row.createCell(0);\n\n  cell.setCellValue(richString);\n  cell.setCellStyle(wrapTextCellStyle);\n  \n  sheet.setColumnWidth(0, 25*256);\n\n  try ( FileOutputStream fileOut = new FileOutputStream(&quot;./workbook.xlsx&quot;); ) {\n   wb.write(fileOut);\n  }\n\n }\n}\n</code></pre>\n"}],"owner":{"account_id":3272354,"reputation":348,"user_id":2755407,"display_name":"user2755407"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699893117,"creation_date":1699871909,"question_id":77473250,"body_markdown":"I have an input coming as below:\r\n\r\n    &lt;p style=&quot;font-family:Caveat;&quot;&gt;This is Caveat&lt;/p&gt;&lt;p style=&quot;font-family:Arial;&quot;&gt;This is Arial text&lt;/p&gt;\r\n\r\nI want to insert both para tag element in a single cell as below using apache poi.\r\n[![enter image description here][1]][1]\r\n\r\n.I tried few example from net but I could find any appropriate solution for it.Can anyone help me to resolve it?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XKXnW.png","title":"Insert Multi para tags in a single cell in Excel sheet using Apache poi","body":"<p>I have an input coming as below:</p>\n<pre><code>&lt;p style=&quot;font-family:Caveat;&quot;&gt;This is Caveat&lt;/p&gt;&lt;p style=&quot;font-family:Arial;&quot;&gt;This is Arial text&lt;/p&gt;\n</code></pre>\n<p>I want to insert both para tag element in a single cell as below using apache poi.\n<a href=\"https://i.stack.imgur.com/XKXnW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XKXnW.png\" alt=\"enter image description here\" /></a></p>\n<p>.I tried few example from net but I could find any appropriate solution for it.Can anyone help me to resolve it?</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":50585,"reputation":39930,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1699904996,"post_id":77475397,"comment_id":136587000,"body_markdown":"You mean the manifest you see in Android Studio has no such entry. But you have to consider that every used library can add entries or modify settings, therefore you have to look at the final Android manifest.xml from the APK. You can use the Analyze APK feature if AS to load the generated APK.","body":"You mean the manifest you see in Android Studio has no such entry. But you have to consider that every used library can add entries or modify settings, therefore you have to look at the final Android manifest.xml from the APK. You can use the Analyze APK feature if AS to load the generated APK."},{"owner":{"account_id":29893525,"reputation":1,"user_id":22909081,"display_name":"fyyyyy"},"score":0,"creation_date":1699930498,"post_id":77475397,"comment_id":136589844,"body_markdown":"@Robert Thanks for your advice. I have tried Analyze APK but still found no such setting in Androidmanifest.xml.","body":"@Robert Thanks for your advice. I have tried Analyze APK but still found no such setting in Androidmanifest.xml."}],"owner":{"account_id":29893525,"reputation":1,"user_id":22909081,"display_name":"fyyyyy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699893077,"creation_date":1699893077,"question_id":77475397,"body_markdown":"I was starting to learn Android Studio and create a project with the empty activity template. While connecting to a real Mobile Phone using USB and press the &quot;run&quot; button, it turned out to show &quot;install failed&quot; with code &quot;INSTALL_FAILED_SHARED_USER_INCOMPATIBLE&quot;.\r\n\r\n I have looked up for other similar question, which all impiles **android:sharedUserId=&quot;android.uid.system&quot;** in **AndroidManifest.xml**. However, there is no such settings in the file at all. \r\n\r\nI have also tried to add the setting and generate a key file using **keytool-importkeypair** and **platform.pk8, platform.x509.pem**, it still didn&#39;t work. \r\n\r\nI didn&#39;t install the apk before so it has nothing to do with uninstall or rebuild.\r\n\r\nCound anyone give me some suggestions? Thanks for your time.","title":"Failure &quot;INSTALL_FAILED_SHARED_USER_INCOMPATIBLE&quot; without using &quot;sharedUserId&quot;","body":"<p>I was starting to learn Android Studio and create a project with the empty activity template. While connecting to a real Mobile Phone using USB and press the &quot;run&quot; button, it turned out to show &quot;install failed&quot; with code &quot;INSTALL_FAILED_SHARED_USER_INCOMPATIBLE&quot;.</p>\n<p>I have looked up for other similar question, which all impiles <strong>android:sharedUserId=&quot;android.uid.system&quot;</strong> in <strong>AndroidManifest.xml</strong>. However, there is no such settings in the file at all.</p>\n<p>I have also tried to add the setting and generate a key file using <strong>keytool-importkeypair</strong> and <strong>platform.pk8, platform.x509.pem</strong>, it still didn't work.</p>\n<p>I didn't install the apk before so it has nothing to do with uninstall or rebuild.</p>\n<p>Cound anyone give me some suggestions? Thanks for your time.</p>\n"},{"tags":["java","switch-statement","case"],"comments":[{"owner":{"account_id":96198,"reputation":2592,"user_id":261581,"accept_rate":100,"display_name":"Security Hound"},"score":0,"creation_date":1699892177,"post_id":77475351,"comment_id":136584987,"body_markdown":"This question is not about computer hardware or software, within the scope defined in the help center.","body":"This question is not about computer hardware or software, within the scope defined in the help center."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1699904903,"post_id":77475351,"comment_id":136586990,"body_markdown":"I thought this was recently implemented, with the _pattern matching syntax_, and _&quot;when&quot;_ _keyword_.","body":"I thought this was recently implemented, with the <i>pattern matching syntax</i>, and <i>&quot;when&quot;</i> <i>keyword</i>."},{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1699974518,"post_id":77475351,"comment_id":136596227,"body_markdown":"I guess you&#39;re thinking of [JEP 441: Pattern Matching for switch](https://openjdk.org/jeps/441).","body":"I guess you&#39;re thinking of <a href=\"https://openjdk.org/jeps/441\" rel=\"nofollow noreferrer\">JEP 441: Pattern Matching for switch</a>."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1699980627,"post_id":77475351,"comment_id":136597590,"body_markdown":"It is in Java 21 and works using the latest JDK compiler.  But Eclipse doesn&#39;t yet support it.  I running Eclipse 2023-09 which supports some of Java 21.  A bug was reported [here](https://marketplace.eclipse.org/content/java-21-support-eclipse-2023-09-429).  My understanding is that this feature will be supported in 2023-12.","body":"It is in Java 21 and works using the latest JDK compiler.  But Eclipse doesn&#39;t yet support it.  I running Eclipse 2023-09 which supports some of Java 21.  A bug was reported <a href=\"https://marketplace.eclipse.org/content/java-21-support-eclipse-2023-09-429\" rel=\"nofollow noreferrer\">here</a>.  My understanding is that this feature will be supported in 2023-12."},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1700059126,"post_id":77475351,"comment_id":136608388,"body_markdown":"“in C, we could use a range (&#39;a&#39; ... &#39;z&#39;)”—not standard C.","body":"“in C, we could use a range (&#39;a&#39; ... &#39;z&#39;)”—not standard C."}],"owner":{"account_id":9335422,"reputation":95,"user_id":6929771,"display_name":"S.S.Prabhu"},"comment_count":5,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1699903875,"answer_count":0,"score":-2,"last_activity_date":1699892642,"creation_date":1699891479,"question_id":77475351,"body_markdown":"I found that in C, we could **use a range (&#39;a&#39; ... &#39;z&#39;)** but in Java, am unable to use the range in **switch case statement**. The language does not support it naturally. However, what are the ways you can think of to achieve this ?\r\n\r\n","title":"Alternate ways to achieve ranges in switch case in Java","body":"<p>I found that in C, we could <strong>use a range ('a' ... 'z')</strong> but in Java, am unable to use the range in <strong>switch case statement</strong>. The language does not support it naturally. However, what are the ways you can think of to achieve this ?</p>\n"},{"tags":["java","unit-testing","quarkus"],"comments":[{"owner":{"account_id":385127,"reputation":6284,"user_id":742081,"display_name":"Ladicek"},"score":3,"creation_date":1699892917,"post_id":77475318,"comment_id":136585034,"body_markdown":"It seems that what you want is _partial mocking_. You can use `Mockito.spy()` for that, instead of `mock()`.","body":"It seems that what you want is <i>partial mocking</i>. You can use <code>Mockito.spy()</code> for that, instead of <code>mock()</code>."}],"owner":{"account_id":26633402,"reputation":47,"user_id":21166611,"display_name":"santi254"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699892319,"creation_date":1699892319,"question_id":77475318,"body_markdown":"Hello I have a class that makes a database call with the method\r\n\r\n`callDatabase()`\r\n\r\nIt also has another method `doOtherStuff()`\r\n\r\nWhen I run my unit test I don&#39;t want the `callDatabase()` method to run But i can&#39;t figure out how to achieve this.\r\n\r\nmy Attempt so far\r\n\r\n\r\n```java\r\n        Service mock = Mockito.mock(Service.class);\r\n        Mockito.doNothing().when(mock).callDatabase(any(), any(), any());\r\n        QuarkusMock.installMockForType(mock, Service.class);\r\n\r\n```\r\n\r\nNow I would assume this mocks the callDatabase method but it seems to create a mock for the entire `Service` object so my test is failing because `doOtherStuff()` just returns null because `Service` is a mocked object","title":"Quarkus with JUnit mock only 1 method from a class while keeping the other methods real","body":"<p>Hello I have a class that makes a database call with the method</p>\n<p><code>callDatabase()</code></p>\n<p>It also has another method <code>doOtherStuff()</code></p>\n<p>When I run my unit test I don't want the <code>callDatabase()</code> method to run But i can't figure out how to achieve this.</p>\n<p>my Attempt so far</p>\n<pre class=\"lang-java prettyprint-override\"><code>        Service mock = Mockito.mock(Service.class);\n        Mockito.doNothing().when(mock).callDatabase(any(), any(), any());\n        QuarkusMock.installMockForType(mock, Service.class);\n\n</code></pre>\n<p>Now I would assume this mocks the callDatabase method but it seems to create a mock for the entire <code>Service</code> object so my test is failing because <code>doOtherStuff()</code> just returns null because <code>Service</code> is a mocked object</p>\n"},{"tags":["java","spring-boot","google-bigquery","spring-cloud-gcp-bigquery"],"owner":{"account_id":416779,"reputation":39,"user_id":792361,"display_name":"barisinanc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1699892285,"creation_date":1699892285,"question_id":77475311,"body_markdown":"I have a spring boot application running on GCP Compute Engine, this application reads from Google Pub/Sub and after computation writes to Firestore and BigQuery. Another process also reads from BigQuery then computes its results. Once a week BigQuery operations stops and after at least 24 hours operations returns to normal. In these problematic situations no exceptions or timeout errors can be found.\r\n\r\nCode for inserting line to BQ is below:\r\n\r\n```\r\nprivate static void rowInsert(InsertAllRequest.Builder builder) {\r\n        try{\r\n            log.info(&quot;Inserting record to BQ&quot;);\r\n            InsertAllResponse response = BQO.getInstance().insertAll(builder.build());\r\n            \r\n            log.info(&quot;Insert all response: {}&quot;, response.toString());\r\n\r\n            if (response.hasErrors()) {\r\n                StringBuilder sb = new StringBuilder();\r\n                for (Map.Entry&lt;Long, List&lt;BigQueryError&gt;&gt; entry : response.getInsertErrors().entrySet()){\r\n                    for (BigQueryError error : entry.getValue()){\r\n                        sb.append(error.getMessage()).append(&quot;, &quot;);\r\n                    }\r\n                }\r\n                log.error(&quot;Error inserting record {}&quot;, sb);\r\n            }\r\n\r\n        } catch (BigQueryException e){\r\n            log.error(&quot;Error inserting record {}&quot;, e.getMessage());\r\n            log.error(&quot;Error inserting record {}&quot;, e);\r\n        } catch (Exception e){\r\n            log.error(&quot;Unexpected exception row insert:&quot; + e.getMessage(), e);\r\n            throw e;\r\n        }\r\n    }\r\n```\r\n\r\nIn the execution &quot;Inserting record to BQ&quot; log is written after that I cannot see &quot;Insert all response:&quot; log. It seems write operation never finishes. After 24~30 hours new operations executes correctly, and old operations never returns.\r\n\r\nAlso in this time slots I cannot read from bigquery. When I try to read from BigQuery I got StackOverflowError with the log:\r\njava.base/java.util.Collections$UnmodifiableCollection.isEmpty(Collections.java:1033) ~[na:na]\r\n[![SELECT query exception](https://i.stack.imgur.com/1yKyX.png)](https://i.stack.imgur.com/1yKyX.png)\r\n\r\nUntil 11th of October this code was working flawlessly, after this date I started to get errors above. I have upgraded my spring boot to 2.7.17 and my spring-cloud-gcp to 3.7.3. No changes occured.","title":"BigQuery Requests never returns","body":"<p>I have a spring boot application running on GCP Compute Engine, this application reads from Google Pub/Sub and after computation writes to Firestore and BigQuery. Another process also reads from BigQuery then computes its results. Once a week BigQuery operations stops and after at least 24 hours operations returns to normal. In these problematic situations no exceptions or timeout errors can be found.</p>\n<p>Code for inserting line to BQ is below:</p>\n<pre><code>private static void rowInsert(InsertAllRequest.Builder builder) {\n        try{\n            log.info(&quot;Inserting record to BQ&quot;);\n            InsertAllResponse response = BQO.getInstance().insertAll(builder.build());\n            \n            log.info(&quot;Insert all response: {}&quot;, response.toString());\n\n            if (response.hasErrors()) {\n                StringBuilder sb = new StringBuilder();\n                for (Map.Entry&lt;Long, List&lt;BigQueryError&gt;&gt; entry : response.getInsertErrors().entrySet()){\n                    for (BigQueryError error : entry.getValue()){\n                        sb.append(error.getMessage()).append(&quot;, &quot;);\n                    }\n                }\n                log.error(&quot;Error inserting record {}&quot;, sb);\n            }\n\n        } catch (BigQueryException e){\n            log.error(&quot;Error inserting record {}&quot;, e.getMessage());\n            log.error(&quot;Error inserting record {}&quot;, e);\n        } catch (Exception e){\n            log.error(&quot;Unexpected exception row insert:&quot; + e.getMessage(), e);\n            throw e;\n        }\n    }\n</code></pre>\n<p>In the execution &quot;Inserting record to BQ&quot; log is written after that I cannot see &quot;Insert all response:&quot; log. It seems write operation never finishes. After 24~30 hours new operations executes correctly, and old operations never returns.</p>\n<p>Also in this time slots I cannot read from bigquery. When I try to read from BigQuery I got StackOverflowError with the log:\njava.base/java.util.Collections$UnmodifiableCollection.isEmpty(Collections.java:1033) ~[na:na]\n<a href=\"https://i.stack.imgur.com/1yKyX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1yKyX.png\" alt=\"SELECT query exception\" /></a></p>\n<p>Until 11th of October this code was working flawlessly, after this date I started to get errors above. I have upgraded my spring boot to 2.7.17 and my spring-cloud-gcp to 3.7.3. No changes occured.</p>\n"},{"tags":["java","spring-boot","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1666644908,"creation_date":1666619928,"answer_id":74182263,"question_id":74151506,"body_markdown":"This works exactly as expected...\r\n\r\n```java\r\n@SpringBootApplication\r\npublic class So74151506Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(So74151506Application.class, args);\r\n\t}\r\n\r\n\t@KafkaListener(id = &quot;so74151506&quot;, topics = &quot;so74151506&quot;)\r\n\tvoid listen(String in) {\r\n\t\tSystem.out.println(in);\r\n\t\tthrow new NullPointerException();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic NewTopic topic() {\r\n\t\treturn TopicBuilder.name(&quot;so74151506&quot;).partitions(1).replicas(1).build();\r\n\t}\r\n\r\n\t@Bean\r\n\tApplicationRunner runner(KafkaTemplate&lt;String, String&gt; template) {\r\n\t\treturn args -&gt; {\r\n\t\t\ttemplate.send(&quot;so74151506&quot;, &quot;test&quot;);\r\n\t\t};\r\n\t}\r\n\r\n\t@Bean\r\n\tCommonErrorHandler eh() {\r\n\t\tDefaultErrorHandler eh = new DefaultErrorHandler((rec, ex) -&gt; System.out.println(&quot;In recoverer&quot;),\r\n\t\t\t\tnew FixedBackOff(1000, 4));\r\n\t\teh.addNotRetryableExceptions(NullPointerException.class);\r\n\t\treturn eh;\r\n\t}\r\n\r\n}\r\n```\r\n```properties\r\nspring.kafka.consumer.auto-offset-reset=earliest\r\n```\r\n```\r\ntest\r\nIn recoverer\r\n```\r\n\r\nIf you can&#39;t figure out what&#39;s wrong, post a minimal, complete, reproducible example someplace so we can see what you are doing wrong.\r\n\r\n__EDIT__\r\n\r\nThere is a bug in the `FallbackBatchErrorHandler`.\r\n\r\nhttps://github.com/spring-projects/spring-kafka/issues/2459\r\n\r\nHowever, with a batch listener, it is better to wrap the exception in a `BatchListenerFailedException`, telling the framework which record in the batch caused the failure, so that just that one will be retried and/or recovered.\r\n\r\nOtherwise the entire batch is retried and sent to the recoverer.\r\n\r\nThis works as expected in your example:\r\n\r\n```java\r\n@KafkaListener(id = &quot;so74151506&quot;, topics = &quot;so74151506&quot;)\r\nvoid listen(List&lt;String&gt; in) {\r\n\tfor (int i = 0; i &lt; in.size(); i++) {\r\n\t\tString str = in.get(i);\r\n\t\tSystem.out.println(str);\r\n\t\tif (&quot;bar&quot;.equalsIgnoreCase(str)) {\r\n\t\t\tthrow new BatchListenerFailedException(&quot;Listener Failed&quot;, new NullPointerException(), i);\r\n\t\t}\r\n\t}\r\n}\r\n```","title":"Spring Boot Kafka Batch DefaultErrorHandler addNotRetryableExceptions?","body":"<p>This works exactly as expected...</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class So74151506Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(So74151506Application.class, args);\n    }\n\n    @KafkaListener(id = &quot;so74151506&quot;, topics = &quot;so74151506&quot;)\n    void listen(String in) {\n        System.out.println(in);\n        throw new NullPointerException();\n    }\n\n    @Bean\n    public NewTopic topic() {\n        return TopicBuilder.name(&quot;so74151506&quot;).partitions(1).replicas(1).build();\n    }\n\n    @Bean\n    ApplicationRunner runner(KafkaTemplate&lt;String, String&gt; template) {\n        return args -&gt; {\n            template.send(&quot;so74151506&quot;, &quot;test&quot;);\n        };\n    }\n\n    @Bean\n    CommonErrorHandler eh() {\n        DefaultErrorHandler eh = new DefaultErrorHandler((rec, ex) -&gt; System.out.println(&quot;In recoverer&quot;),\n                new FixedBackOff(1000, 4));\n        eh.addNotRetryableExceptions(NullPointerException.class);\n        return eh;\n    }\n\n}\n</code></pre>\n<pre><code>spring.kafka.consumer.auto-offset-reset=earliest\n</code></pre>\n<pre><code>test\nIn recoverer\n</code></pre>\n<p>If you can't figure out what's wrong, post a minimal, complete, reproducible example someplace so we can see what you are doing wrong.</p>\n<p><strong>EDIT</strong></p>\n<p>There is a bug in the <code>FallbackBatchErrorHandler</code>.</p>\n<p><a href=\"https://github.com/spring-projects/spring-kafka/issues/2459\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-kafka/issues/2459</a></p>\n<p>However, with a batch listener, it is better to wrap the exception in a <code>BatchListenerFailedException</code>, telling the framework which record in the batch caused the failure, so that just that one will be retried and/or recovered.</p>\n<p>Otherwise the entire batch is retried and sent to the recoverer.</p>\n<p>This works as expected in your example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@KafkaListener(id = &quot;so74151506&quot;, topics = &quot;so74151506&quot;)\nvoid listen(List&lt;String&gt; in) {\n    for (int i = 0; i &lt; in.size(); i++) {\n        String str = in.get(i);\n        System.out.println(str);\n        if (&quot;bar&quot;.equalsIgnoreCase(str)) {\n            throw new BatchListenerFailedException(&quot;Listener Failed&quot;, new NullPointerException(), i);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26690700,"reputation":43,"user_id":20299315,"display_name":"jd1289"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2264,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":74182263,"answer_count":1,"score":4,"last_activity_date":1699892221,"creation_date":1666344137,"question_id":74151506,"body_markdown":"In Spring boot kafka batch consumer, I want to skip non retryable exceptions.  \r\n\r\nI&#39;ve added an exception to the `DefaultErrorHandler.addNotRetryableExceptions`, if that exception is thrown. I was expecting it to go to the `ConsumerRecordRecoverer` and not be retired. \r\n\r\nIn my test, it will eventually go to `ConsumerRecordRecoverer` but only after it has been retried n times.\r\n\r\nDoes `DefaultErrorHandler.addNotRetryableExceptions` work in batch mode? Maybe I misread the spring kafka documentation.\r\n\r\nMy example test code, this is using *spring-kafka:2.9.2*\r\n``` \r\n@SpringBootApplication\r\npublic class DemoKafkaApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(DemoKafkaApplication.class, args);\r\n\t}\r\n\r\n\t@Bean\r\n\tCommandLineRunner commandLineRunner(){\r\n\t\treturn new CommandLineRunner() {\r\n\t\t\t@Autowired KafkaTemplate&lt;Integer, String&gt; kafkaTemplate;\r\n\t\t\t@Override\r\n\t\t\tpublic void run(String... args) throws Exception {\r\n\t\t\t\tkafkaTemplate.send(&quot;topic1&quot;, &quot;hello&quot;);\r\n\t\t\t\tkafkaTemplate.send(&quot;topic1&quot;, &quot;foo&quot;);\r\n\t\t\t\tkafkaTemplate.send(&quot;topic1&quot;, &quot;derp&quot;);\r\n\t\t\t\tkafkaTemplate.send(&quot;topic1&quot;, &quot;cheese&quot;);\r\n\t\t\t\tkafkaTemplate.send(&quot;topic1&quot;, &quot;bar&quot;);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t@KafkaListener(id = &quot;myId&quot;, topics = &quot;topic1&quot;)\r\n\tpublic void listen(List&lt;String&gt; in) {\r\n\t\tSystem.out.println(&quot;----------------&quot;);\r\n\t\tin.forEach(str -&gt; {\r\n\t\t\tSystem.out.println(str);\r\n\t\t\tif(str.equalsIgnoreCase(&quot;cheese&quot;)) throw new NullPointerException(&quot;cheese not allowed&quot;);\r\n\t\t});\r\n\r\n\t\tSystem.out.println(&quot;----------------&quot;);\r\n\t}\r\n\r\n\tclass MyConsumerRecordRecoverer implements ConsumerRecordRecoverer{\r\n\r\n\t\t@Override\r\n\t\tpublic void accept(ConsumerRecord&lt;?, ?&gt; consumerRecord, Exception e) {\r\n\t\t\tSystem.out.println(consumerRecord.toString());\r\n\t\t}\r\n\t}\r\n\r\n\t@Configuration\r\n\t@EnableKafka\r\n\tclass KafkaConfig{\r\n\t\t@Bean\r\n\t\tNewTopic topic(){\r\n\t\t\treturn TopicBuilder.name(&quot;topic1&quot;)\r\n\t\t\t\t\t.build();\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tConcurrentKafkaListenerContainerFactory&lt;Integer, String&gt;\r\n\t\tkafkaListenerContainerFactory(ConsumerFactory&lt;Integer, String&gt; consumerFactory) {\r\n\t\t\tConcurrentKafkaListenerContainerFactory&lt;Integer, String&gt; factory =\r\n\t\t\t\t\tnew ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n\t\t\tfactory.setConsumerFactory(consumerFactory);\r\n\t\t\tfactory.setBatchListener(true);\r\n\t\t\tfactory.setCommonErrorHandler(commonErrorHandler());\r\n\t\t\treturn factory;\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tpublic ConsumerFactory&lt;Integer, String&gt; consumerFactory() {\r\n\t\t\treturn new DefaultKafkaConsumerFactory&lt;&gt;(consumerProps());\r\n\t\t}\r\n\r\n\t\tprivate Map&lt;String, Object&gt; consumerProps() {\r\n\t\t\tMap&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n\t\t\tprops.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\r\n\t\t\tprops.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;group&quot;);\r\n\t\t\tprops.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, IntegerDeserializer.class);\r\n\t\t\tprops.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n\t\t\tprops.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\r\n\t\t\tprops.put(ConsumerConfig.FETCH_MAX_WAIT_MS_CONFIG, &quot;5000&quot;);\r\n\t\t\tprops.put(ConsumerConfig.FETCH_MIN_BYTES_CONFIG, &quot;1000&quot;);\r\n\t\t\tprops.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG, &quot;2&quot;);\r\n\t\t\treturn props;\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tpublic CommonErrorHandler commonErrorHandler() {\r\n\t\t\tDefaultErrorHandler defaultErrorHandler = \r\n\t\t\t\t\tnew DefaultErrorHandler(myConsumerRecordRecoverer(), new FixedBackOff(2000,3));\r\n\t\t\tdefaultErrorHandler.addNotRetryableExceptions(NullPointerException.class);\r\n\t\t\treturn defaultErrorHandler;\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tpublic MyConsumerRecordRecoverer myConsumerRecordRecoverer(){\r\n\t\t\treturn new MyConsumerRecordRecoverer();\r\n\t\t}\r\n\r\n\t}\r\n} \r\n```","title":"Spring Boot Kafka Batch DefaultErrorHandler addNotRetryableExceptions?","body":"<p>In Spring boot kafka batch consumer, I want to skip non retryable exceptions.</p>\n<p>I've added an exception to the <code>DefaultErrorHandler.addNotRetryableExceptions</code>, if that exception is thrown. I was expecting it to go to the <code>ConsumerRecordRecoverer</code> and not be retired.</p>\n<p>In my test, it will eventually go to <code>ConsumerRecordRecoverer</code> but only after it has been retried n times.</p>\n<p>Does <code>DefaultErrorHandler.addNotRetryableExceptions</code> work in batch mode? Maybe I misread the spring kafka documentation.</p>\n<p>My example test code, this is using <em>spring-kafka:2.9.2</em></p>\n<pre><code>@SpringBootApplication\npublic class DemoKafkaApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoKafkaApplication.class, args);\n    }\n\n    @Bean\n    CommandLineRunner commandLineRunner(){\n        return new CommandLineRunner() {\n            @Autowired KafkaTemplate&lt;Integer, String&gt; kafkaTemplate;\n            @Override\n            public void run(String... args) throws Exception {\n                kafkaTemplate.send(&quot;topic1&quot;, &quot;hello&quot;);\n                kafkaTemplate.send(&quot;topic1&quot;, &quot;foo&quot;);\n                kafkaTemplate.send(&quot;topic1&quot;, &quot;derp&quot;);\n                kafkaTemplate.send(&quot;topic1&quot;, &quot;cheese&quot;);\n                kafkaTemplate.send(&quot;topic1&quot;, &quot;bar&quot;);\n            }\n        };\n    }\n\n    @KafkaListener(id = &quot;myId&quot;, topics = &quot;topic1&quot;)\n    public void listen(List&lt;String&gt; in) {\n        System.out.println(&quot;----------------&quot;);\n        in.forEach(str -&gt; {\n            System.out.println(str);\n            if(str.equalsIgnoreCase(&quot;cheese&quot;)) throw new NullPointerException(&quot;cheese not allowed&quot;);\n        });\n\n        System.out.println(&quot;----------------&quot;);\n    }\n\n    class MyConsumerRecordRecoverer implements ConsumerRecordRecoverer{\n\n        @Override\n        public void accept(ConsumerRecord&lt;?, ?&gt; consumerRecord, Exception e) {\n            System.out.println(consumerRecord.toString());\n        }\n    }\n\n    @Configuration\n    @EnableKafka\n    class KafkaConfig{\n        @Bean\n        NewTopic topic(){\n            return TopicBuilder.name(&quot;topic1&quot;)\n                    .build();\n        }\n\n        @Bean\n        ConcurrentKafkaListenerContainerFactory&lt;Integer, String&gt;\n        kafkaListenerContainerFactory(ConsumerFactory&lt;Integer, String&gt; consumerFactory) {\n            ConcurrentKafkaListenerContainerFactory&lt;Integer, String&gt; factory =\n                    new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n            factory.setConsumerFactory(consumerFactory);\n            factory.setBatchListener(true);\n            factory.setCommonErrorHandler(commonErrorHandler());\n            return factory;\n        }\n\n        @Bean\n        public ConsumerFactory&lt;Integer, String&gt; consumerFactory() {\n            return new DefaultKafkaConsumerFactory&lt;&gt;(consumerProps());\n        }\n\n        private Map&lt;String, Object&gt; consumerProps() {\n            Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n            props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\n            props.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;group&quot;);\n            props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, IntegerDeserializer.class);\n            props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n            props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\n            props.put(ConsumerConfig.FETCH_MAX_WAIT_MS_CONFIG, &quot;5000&quot;);\n            props.put(ConsumerConfig.FETCH_MIN_BYTES_CONFIG, &quot;1000&quot;);\n            props.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG, &quot;2&quot;);\n            return props;\n        }\n\n        @Bean\n        public CommonErrorHandler commonErrorHandler() {\n            DefaultErrorHandler defaultErrorHandler = \n                    new DefaultErrorHandler(myConsumerRecordRecoverer(), new FixedBackOff(2000,3));\n            defaultErrorHandler.addNotRetryableExceptions(NullPointerException.class);\n            return defaultErrorHandler;\n        }\n\n        @Bean\n        public MyConsumerRecordRecoverer myConsumerRecordRecoverer(){\n            return new MyConsumerRecordRecoverer();\n        }\n\n    }\n} \n</code></pre>\n"},{"tags":["java","unit-testing","mocking","super","powermock"],"comments":[{"owner":{"account_id":135067,"reputation":9676,"user_id":337621,"accept_rate":70,"display_name":"G&#225;bor Lipt&#225;k"},"score":0,"creation_date":1401139919,"post_id":23865555,"comment_id":36756790,"body_markdown":"Can you make up a code sample to be tested? It would help answering your question.","body":"Can you make up a code sample to be tested? It would help answering your question."},{"owner":{"account_id":3163862,"reputation":36942,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1401176723,"post_id":23865555,"comment_id":36767625,"body_markdown":"@G&#225;bor Lipt&#225;k please read update","body":"@G&#225;bor Lipt&#225;k please read update"},{"owner":{"display_name":"user1373996"},"score":0,"creation_date":1401249200,"post_id":23865555,"comment_id":36804282,"body_markdown":"Can you tell me why your problems cannot be solved by the answer with the solution &quot;DI&quot;? Is there any special things in your code?","body":"Can you tell me why your problems cannot be solved by the answer with the solution &quot;DI&quot;? Is there any special things in your code?"},{"owner":{"account_id":3163862,"reputation":36942,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1401276559,"post_id":23865555,"comment_id":36818424,"body_markdown":"I just cannot change this code","body":"I just cannot change this code"}],"answers":[{"tags":[],"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1401091986,"creation_date":1401091986,"answer_id":23865651,"question_id":23865555,"body_markdown":"This is impossible; the whole point of a superclass is that it encapsulates upstream state and functionality, and the class hierarchy is hard-coded in your subclass based on the `extends` relationship.","title":"How to mock super reference (on super class)?","body":"<p>This is impossible; the whole point of a superclass is that it encapsulates upstream state and functionality, and the class hierarchy is hard-coded in your subclass based on the <code>extends</code> relationship.</p>\n"},{"tags":[],"owner":{"account_id":135067,"reputation":9676,"user_id":337621,"accept_rate":70,"display_name":"G&#225;bor Lipt&#225;k"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1401223165,"creation_date":1401177596,"answer_id":23884011,"question_id":23865555,"body_markdown":"With Powermock you can replace or suppress methods, so it is possible to change the action done by `BaseService.save()`. You can also make methods to do nothing with suppressing. You can even suppress static initializer blocks.\r\n\r\nPlease read [this blog entry of the Powermock authors][1]. See chapter &quot;Replacing&quot;.\r\n\r\nUPDATE:\r\n\r\nSuppress seems to work for me, but replace not. See the picture below:\r\n![enter image description here][2]\r\n\r\n\r\n  [1]: http://www.jayway.com/2013/03/05/beyond-mocking-with-powermock/\r\n  [2]: http://i.stack.imgur.com/DUvjK.png","title":"How to mock super reference (on super class)?","body":"<p>With Powermock you can replace or suppress methods, so it is possible to change the action done by <code>BaseService.save()</code>. You can also make methods to do nothing with suppressing. You can even suppress static initializer blocks.</p>\n\n<p>Please read <a href=\"http://www.jayway.com/2013/03/05/beyond-mocking-with-powermock/\" rel=\"nofollow noreferrer\">this blog entry of the Powermock authors</a>. See chapter \"Replacing\".</p>\n\n<p>UPDATE:</p>\n\n<p>Suppress seems to work for me, but replace not. See the picture below:\n<img src=\"https://i.stack.imgur.com/DUvjK.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":20261619,"reputation":727,"user_id":14859847,"display_name":"Junhyunny"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699892153,"creation_date":1699891128,"answer_id":77475196,"question_id":23865555,"body_markdown":"This is actually not mocking super reference but I think it is helpful for someone who wants to make test double parent&#39;s method. \r\n\r\nIn my case, I make a new method to wrap super class&#39;s method and make a test double. Because I need result from super class method when I implement oAuth2 client. I want this answer is helpful who someone needs to use result from super class&#39;s method.\r\n\r\n### System Under Test\r\n\r\n- Make a `loadUserFromParent` method to wrap super class function\r\n\r\n```java\r\npackage action.in.blog.service;\r\n\r\nimport org.springframework.security.oauth2.client.userinfo.DefaultOAuth2UserService;\r\nimport org.springframework.security.oauth2.client.userinfo.OAuth2UserRequest;\r\nimport org.springframework.security.oauth2.core.OAuth2AuthenticationException;\r\nimport org.springframework.security.oauth2.core.user.OAuth2User;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.List;\r\n\r\n@Service\r\npublic class DefaultOAuth2UserServiceDelegator extends DefaultOAuth2UserService {\r\n\r\n    private final List&lt;CustomOAuth2UserService&gt; oAuth2UserServices;\r\n\r\n\r\n    public DefaultOAuth2UserServiceDelegator(List&lt;CustomOAuth2UserService&gt; oAuth2UserServices) {\r\n        this.oAuth2UserServices = oAuth2UserServices;\r\n    }\r\n\r\n    public OAuth2User loadUserFromParent(OAuth2UserRequest userRequest) {\r\n        return super.loadUser(userRequest);\r\n    }\r\n\r\n    @Override\r\n    public OAuth2User loadUser(OAuth2UserRequest userRequest) throws OAuth2AuthenticationException {\r\n        for (var oauth2Service : oAuth2UserServices) {\r\n            if (!oauth2Service.supports(userRequest)) {\r\n                continue;\r\n            }\r\n            var oauthUser = loadUserFromParent(userRequest);\r\n            return oauth2Service.createOrLoadUser(oauthUser);\r\n        }\r\n        throw new RuntimeException(&quot;Not found user service&quot;);\r\n    }\r\n}\r\n```\r\n\r\n### Test\r\n\r\n - Make SUT as a spy\r\n - Use `doReturn(expectedValue).when(testDouble).method(params)`\r\n\r\n```java\r\npackage action.in.blog.service;\r\n\r\nimport action.in.blog.domain.CustomAuthentication;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.security.oauth2.client.userinfo.OAuth2UserRequest;\r\nimport org.springframework.security.oauth2.core.user.DefaultOAuth2User;\r\n\r\nimport java.util.Collections;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\nimport static org.mockito.Mockito.*;\r\n\r\nclass DefaultOAuth2UserServiceDelegatorTest {\r\n\r\n    CustomOAuth2UserService googleUserService;\r\n    CustomOAuth2UserService facebookUserService;\r\n    DefaultOAuth2UserServiceDelegator sut;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        googleUserService = mock(CustomOAuth2UserService.class);\r\n        facebookUserService = mock(CustomOAuth2UserService.class);\r\n        sut = spy(new DefaultOAuth2UserServiceDelegator(\r\n                List.of(googleUserService, facebookUserService)\r\n        ));\r\n    }\r\n\r\n    @Test\r\n    void loadUser() {\r\n\r\n        var authentication = new CustomAuthentication();\r\n        var oauth2UserRequest = mock(OAuth2UserRequest.class);\r\n        var oauth2User = new DefaultOAuth2User(Collections.emptyList(), Map.of(&quot;id&quot;, &quot;junhyunny&quot;), &quot;id&quot;);\r\n        // make a stub \r\n        doReturn(oauth2User).when(sut).loadUserFromParent(oauth2UserRequest);\r\n        when(googleUserService.supports(oauth2UserRequest)).thenReturn(true);\r\n        when(googleUserService.createOrLoadUser(oauth2User)).thenReturn(authentication);\r\n\r\n\r\n        var result = sut.loadUser(oauth2UserRequest);\r\n\r\n\r\n        assertEquals(result, authentication);\r\n    }\r\n}\r\n```","title":"How to mock super reference (on super class)?","body":"<p>This is actually not mocking super reference but I think it is helpful for someone who wants to make test double parent's method.</p>\n<p>In my case, I make a new method to wrap super class's method and make a test double. Because I need result from super class method when I implement oAuth2 client. I want this answer is helpful who someone needs to use result from super class's method.</p>\n<h3>System Under Test</h3>\n<ul>\n<li>Make a <code>loadUserFromParent</code> method to wrap super class function</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>package action.in.blog.service;\n\nimport org.springframework.security.oauth2.client.userinfo.DefaultOAuth2UserService;\nimport org.springframework.security.oauth2.client.userinfo.OAuth2UserRequest;\nimport org.springframework.security.oauth2.core.OAuth2AuthenticationException;\nimport org.springframework.security.oauth2.core.user.OAuth2User;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\n\n@Service\npublic class DefaultOAuth2UserServiceDelegator extends DefaultOAuth2UserService {\n\n    private final List&lt;CustomOAuth2UserService&gt; oAuth2UserServices;\n\n\n    public DefaultOAuth2UserServiceDelegator(List&lt;CustomOAuth2UserService&gt; oAuth2UserServices) {\n        this.oAuth2UserServices = oAuth2UserServices;\n    }\n\n    public OAuth2User loadUserFromParent(OAuth2UserRequest userRequest) {\n        return super.loadUser(userRequest);\n    }\n\n    @Override\n    public OAuth2User loadUser(OAuth2UserRequest userRequest) throws OAuth2AuthenticationException {\n        for (var oauth2Service : oAuth2UserServices) {\n            if (!oauth2Service.supports(userRequest)) {\n                continue;\n            }\n            var oauthUser = loadUserFromParent(userRequest);\n            return oauth2Service.createOrLoadUser(oauthUser);\n        }\n        throw new RuntimeException(&quot;Not found user service&quot;);\n    }\n}\n</code></pre>\n<h3>Test</h3>\n<ul>\n<li>Make SUT as a spy</li>\n<li>Use <code>doReturn(expectedValue).when(testDouble).method(params)</code></li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>package action.in.blog.service;\n\nimport action.in.blog.domain.CustomAuthentication;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.security.oauth2.client.userinfo.OAuth2UserRequest;\nimport org.springframework.security.oauth2.core.user.DefaultOAuth2User;\n\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Map;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.mockito.Mockito.*;\n\nclass DefaultOAuth2UserServiceDelegatorTest {\n\n    CustomOAuth2UserService googleUserService;\n    CustomOAuth2UserService facebookUserService;\n    DefaultOAuth2UserServiceDelegator sut;\n\n    @BeforeEach\n    void setUp() {\n        googleUserService = mock(CustomOAuth2UserService.class);\n        facebookUserService = mock(CustomOAuth2UserService.class);\n        sut = spy(new DefaultOAuth2UserServiceDelegator(\n                List.of(googleUserService, facebookUserService)\n        ));\n    }\n\n    @Test\n    void loadUser() {\n\n        var authentication = new CustomAuthentication();\n        var oauth2UserRequest = mock(OAuth2UserRequest.class);\n        var oauth2User = new DefaultOAuth2User(Collections.emptyList(), Map.of(&quot;id&quot;, &quot;junhyunny&quot;), &quot;id&quot;);\n        // make a stub \n        doReturn(oauth2User).when(sut).loadUserFromParent(oauth2UserRequest);\n        when(googleUserService.supports(oauth2UserRequest)).thenReturn(true);\n        when(googleUserService.createOrLoadUser(oauth2User)).thenReturn(authentication);\n\n\n        var result = sut.loadUser(oauth2UserRequest);\n\n\n        assertEquals(result, authentication);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3163862,"reputation":36942,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11087,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":23884011,"answer_count":3,"score":7,"last_activity_date":1699892153,"creation_date":1401091653,"question_id":23865555,"body_markdown":"Sometimes when I write unit tests I should to mock reference to superclass.\r\n\r\nI have read this question:\r\n[question][1]\r\n\r\n\r\nThis answer [answer with DI][2] advice to refactor code. But I cannot it\r\n \r\nthis answer [another answer][3] is not suitable if superclass method is enough big. In my case I have very big code. Yes I know that it is brokes SOLID OOD principes but I just should to write test. I have not enough time for refactor. \r\n\r\nsaid question was asked 4 years ago! \r\n\r\nDoes currently Mockito or Powermock can resolve this issue ?\r\n\r\nupdate\r\n-\r\ncode example:\r\n\r\n    class BaseService {  \r\n        public void save() {\r\n          // a lot of code here! I cannot change this code.\r\n        }  \r\n    }\r\n    \r\n    public Childservice extends BaseService {  \r\n        public void save(){  \r\n            //logic for testing\r\n            super.save();\r\n           //logic for testing\r\n        }  \r\n    } \r\n\r\n  update 2\r\n-\r\n\r\n    public class Parent {\r\n        public int save() {\r\n             return 99;\r\n        }   \r\n    }\r\n    \r\n    public class Child extends Parent {\r\n        public int save() {\r\n            int i = super.save();\r\n            return i*2;\r\n        }\r\n    }\r\n\r\nand test:\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest(Parent.class)\r\n    public class ParentTest {\r\n        @Test\r\n        public void testSave() {       \r\n            PowerMockito.suppress(PowerMockito.methodsDeclaredIn(Parent.class));        \r\n            System.out.println(new Child().save());\r\n        }\r\n    }\r\n\r\noutput: 198\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3467801/mockito-how-to-mock-only-the-call-of-a-method-of-the-superclass\r\n  [2]: https://stackoverflow.com/a/3479507/2674303\r\n  [3]: https://stackoverflow.com/a/3838664/2674303\r\n","title":"How to mock super reference (on super class)?","body":"<p>Sometimes when I write unit tests I should to mock reference to superclass.</p>\n\n<p>I have read this question:\n<a href=\"https://stackoverflow.com/questions/3467801/mockito-how-to-mock-only-the-call-of-a-method-of-the-superclass\">question</a></p>\n\n<p>This answer <a href=\"https://stackoverflow.com/a/3479507/2674303\">answer with DI</a> advice to refactor code. But I cannot it</p>\n\n<p>this answer <a href=\"https://stackoverflow.com/a/3838664/2674303\">another answer</a> is not suitable if superclass method is enough big. In my case I have very big code. Yes I know that it is brokes SOLID OOD principes but I just should to write test. I have not enough time for refactor. </p>\n\n<p>said question was asked 4 years ago! </p>\n\n<p>Does currently Mockito or Powermock can resolve this issue ?</p>\n\n<h2>update</h2>\n\n<p>code example:</p>\n\n<pre><code>class BaseService {  \n    public void save() {\n      // a lot of code here! I cannot change this code.\n    }  \n}\n\npublic Childservice extends BaseService {  \n    public void save(){  \n        //logic for testing\n        super.save();\n       //logic for testing\n    }  \n} \n</code></pre>\n\n<h2>  update 2</h2>\n\n<pre><code>public class Parent {\n    public int save() {\n         return 99;\n    }   \n}\n\npublic class Child extends Parent {\n    public int save() {\n        int i = super.save();\n        return i*2;\n    }\n}\n</code></pre>\n\n<p>and test:</p>\n\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest(Parent.class)\npublic class ParentTest {\n    @Test\n    public void testSave() {       \n        PowerMockito.suppress(PowerMockito.methodsDeclaredIn(Parent.class));        \n        System.out.println(new Child().save());\n    }\n}\n</code></pre>\n\n<p>output: 198</p>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":3549742,"reputation":4749,"user_id":2964890,"accept_rate":72,"display_name":"javaPlease42"},"score":0,"creation_date":1466528712,"post_id":3467801,"comment_id":63349671,"body_markdown":"Can this be solved with PowerMockito?","body":"Can this be solved with PowerMockito?"},{"owner":{"account_id":2338104,"reputation":9101,"user_id":2049986,"accept_rate":89,"display_name":"Jacob van Lingen"},"score":0,"creation_date":1575014578,"post_id":3467801,"comment_id":104434065,"body_markdown":"@javaPlease42: Yes you can: https://stackoverflow.com/a/23884011/2049986.","body":"@javaPlease42: Yes you can: <a href=\"https://stackoverflow.com/a/23884011/2049986\">stackoverflow.com/a/23884011/2049986</a>."}],"answers":[{"tags":[],"owner":{"account_id":109996,"reputation":25916,"user_id":291244,"accept_rate":83,"display_name":"iwein"},"down_vote_count":9,"up_vote_count":77,"is_accepted":true,"score":68,"last_activity_date":1486716821,"creation_date":1281722369,"answer_id":3479507,"question_id":3467801,"body_markdown":"No, Mockito does not support this.\r\n\r\nThis might not be the answer you&#39;re looking for, but what you&#39;re seeing is a symptom of not applying the design principle:\r\n\r\n&gt; [Favor composition over inheritance][1] \r\n\r\nIf you extract a strategy instead of extending a super class the problem is gone.\r\n\r\nIf however you are not allowed to change the code, but you must test it anyway, and in this awkward way, there is still hope. With some AOP tools (for example AspectJ) you can weave code into the super class method and avoid its execution entirely (yuck). This doesn&#39;t work if you&#39;re using proxies, you have to use bytecode modification (either load time weaving or compile time weaving). There are be mocking frameworks that support this type of trick as well, like PowerMock and PowerMockito.\r\n\r\nI suggest you go for the refactoring, but if that is not an option you&#39;re in for some serious hacking fun.\r\n\r\n  [1]: http://haacked.com/archive/2007/12/11/favor-composition-over-inheritance-and-other-pithy-catch-phrases.aspx","title":"Mockito How to mock only the call of a method of the superclass","body":"<p>No, Mockito does not support this.</p>\n\n<p>This might not be the answer you're looking for, but what you're seeing is a symptom of not applying the design principle:</p>\n\n<blockquote>\n  <p><a href=\"http://haacked.com/archive/2007/12/11/favor-composition-over-inheritance-and-other-pithy-catch-phrases.aspx\" rel=\"noreferrer\">Favor composition over inheritance</a> </p>\n</blockquote>\n\n<p>If you extract a strategy instead of extending a super class the problem is gone.</p>\n\n<p>If however you are not allowed to change the code, but you must test it anyway, and in this awkward way, there is still hope. With some AOP tools (for example AspectJ) you can weave code into the super class method and avoid its execution entirely (yuck). This doesn't work if you're using proxies, you have to use bytecode modification (either load time weaving or compile time weaving). There are be mocking frameworks that support this type of trick as well, like PowerMock and PowerMockito.</p>\n\n<p>I suggest you go for the refactoring, but if that is not an option you're in for some serious hacking fun.</p>\n"},{"tags":[],"owner":{"account_id":110800,"reputation":2061,"user_id":293061,"display_name":"jgonian"},"down_vote_count":5,"up_vote_count":110,"is_accepted":false,"score":105,"last_activity_date":1539623541,"creation_date":1285931939,"answer_id":3838664,"question_id":3467801,"body_markdown":"If you really don&#39;t have a choice for refactoring you can mock/stub everything in the super method call e.g.\r\n\r\n\r\n        class BaseService {\r\n    \r\n            public void validate(){\r\n                fail(&quot; I must not be called&quot;);\r\n            }\r\n    \r\n            public void save(){\r\n                //Save method of super will still be called.\r\n                validate();\r\n            }\r\n        }\r\n    \r\n        class ChildService extends BaseService{\r\n    \r\n            public void load(){}\r\n    \r\n            public void save(){\r\n                super.save();\r\n                load();\r\n            }\r\n        }\r\n    \r\n        @Test\r\n        public void testSave() {\r\n            ChildService classToTest = Mockito.spy(new ChildService());\r\n    \r\n            // Prevent/stub logic in super.save()\r\n            Mockito.doNothing().when((BaseService)classToTest).validate();\r\n    \r\n            // When\r\n            classToTest.save();\r\n    \r\n            // Then\r\n            verify(classToTest).load();\r\n        }\r\n\r\n","title":"Mockito How to mock only the call of a method of the superclass","body":"<p>If you really don't have a choice for refactoring you can mock/stub everything in the super method call e.g.</p>\n\n<pre><code>    class BaseService {\n\n        public void validate(){\n            fail(\" I must not be called\");\n        }\n\n        public void save(){\n            //Save method of super will still be called.\n            validate();\n        }\n    }\n\n    class ChildService extends BaseService{\n\n        public void load(){}\n\n        public void save(){\n            super.save();\n            load();\n        }\n    }\n\n    @Test\n    public void testSave() {\n        ChildService classToTest = Mockito.spy(new ChildService());\n\n        // Prevent/stub logic in super.save()\n        Mockito.doNothing().when((BaseService)classToTest).validate();\n\n        // When\n        classToTest.save();\n\n        // Then\n        verify(classToTest).load();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1508560,"reputation":19,"user_id":1411292,"display_name":"Luke"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1337724586,"creation_date":1337724252,"answer_id":10710848,"question_id":3467801,"body_markdown":"create a package protected (assumes test class in same package) method in the sub class that calls the super class method and then call that method in your overridden sub class method.  you can then set expectations on this method in your test through the use of the spy pattern.  not pretty but certainly better than having to deal with all the expectation setting for the super method in your test","title":"Mockito How to mock only the call of a method of the superclass","body":"<p>create a package protected (assumes test class in same package) method in the sub class that calls the super class method and then call that method in your overridden sub class method.  you can then set expectations on this method in your test through the use of the spy pattern.  not pretty but certainly better than having to deal with all the expectation setting for the super method in your test</p>\n"},{"tags":[],"owner":{"account_id":2783535,"reputation":61,"user_id":2395550,"display_name":"Mohammed Misbahuddin"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1368826031,"creation_date":1368826031,"answer_id":16618183,"question_id":3467801,"body_markdown":"Consider refactoring the code from ChildService.save() method to different method and test that new method instead of testing ChildService.save(), this way you will avoid unnecessary call to super method.\r\n\r\nExample:\r\n\r\n    class BaseService {  \r\n        public void save() {...}  \r\n    }\r\n\r\n    public Childservice extends BaseService {  \r\n        public void save(){  \r\n            newMethod();    \r\n            super.save();\r\n        }\r\n        public void newMethod(){\r\n           //some codes\r\n        }\r\n    } ","title":"Mockito How to mock only the call of a method of the superclass","body":"<p>Consider refactoring the code from ChildService.save() method to different method and test that new method instead of testing ChildService.save(), this way you will avoid unnecessary call to super method.</p>\n\n<p>Example:</p>\n\n<pre><code>class BaseService {  \n    public void save() {...}  \n}\n\npublic Childservice extends BaseService {  \n    public void save(){  \n        newMethod();    \n        super.save();\n    }\n    public void newMethod(){\n       //some codes\n    }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":3028422,"reputation":9,"user_id":2567925,"display_name":"zoufeiyy"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1373449705,"creation_date":1373449705,"answer_id":17567481,"question_id":3467801,"body_markdown":"The reason is your base class is not public-ed, then Mockito cannot intercept it due to visibility, if you change base class as public, or @Override in sub class (as public), then Mockito can mock it correctly.\r\n\r\n    public class BaseService{\r\n      public boolean foo(){\r\n        return true;\r\n      }\r\n    }\r\n\r\n    public ChildService extends BaseService{\r\n    }\r\n\r\n    @Test\r\n    @Mock ChildService childService;\r\n    public void testSave() {\r\n      Mockito.when(childService.foo()).thenReturn(false);\r\n\r\n      // When\r\n      assertFalse(childService.foo());\r\n    }","title":"Mockito How to mock only the call of a method of the superclass","body":"<p>The reason is your base class is not public-ed, then Mockito cannot intercept it due to visibility, if you change base class as public, or @Override in sub class (as public), then Mockito can mock it correctly.</p>\n\n<pre><code>public class BaseService{\n  public boolean foo(){\n    return true;\n  }\n}\n\npublic ChildService extends BaseService{\n}\n\n@Test\n@Mock ChildService childService;\npublic void testSave() {\n  Mockito.when(childService.foo()).thenReturn(false);\n\n  // When\n  assertFalse(childService.foo());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7062189,"reputation":949,"user_id":5406972,"display_name":"Rubasace"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1494447423,"creation_date":1494446384,"answer_id":43901723,"question_id":3467801,"body_markdown":"Maybe the easiest option if inheritance makes sense is to create a new method (package private??) to call the super (lets call it superFindall), spy the real instance and then mock the superFindAll() method in the way you wanted to mock the parent class one. It&#39;s not the perfect solution in terms of coverage and visibility but it should do the job and it&#39;s easy to apply. \r\n\r\n     public Childservice extends BaseService {\r\n        public void save(){\r\n            //some code\r\n            superSave();\r\n        }\r\n\r\n        void superSave(){\r\n            super.save();\r\n        }\r\n    }","title":"Mockito How to mock only the call of a method of the superclass","body":"<p>Maybe the easiest option if inheritance makes sense is to create a new method (package private??) to call the super (lets call it superFindall), spy the real instance and then mock the superFindAll() method in the way you wanted to mock the parent class one. It's not the perfect solution in terms of coverage and visibility but it should do the job and it's easy to apply. </p>\n\n<pre><code> public Childservice extends BaseService {\n    public void save(){\n        //some code\n        superSave();\n    }\n\n    void superSave(){\n        super.save();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2123706,"reputation":21,"user_id":1886426,"display_name":"dams50"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522859250,"creation_date":1522859250,"answer_id":49655985,"question_id":3467801,"body_markdown":"Even if i totally agree with iwein response (\r\n\r\n&gt; favor composition over inheritance\r\n\r\n), i admit there are some times inheritance seems just natural, and i don&#39;t feel breaking or refactor it just for the sake of a unit test.\r\n\r\nSo, my suggestion :\r\n\r\n    /**\r\n\t * BaseService is now an asbtract class encapsulating \r\n\t * some common logic callable by child implementations\r\n\t */\r\n    abstract class BaseService {  \r\n        protected void commonSave() {\r\n\t\t\t// Put your common work here\r\n\t\t}\r\n\t\t\r\n\t\tabstract void save();\r\n    }\r\n\r\n    public ChildService extends BaseService {  \r\n        public void save() {\r\n            // Put your child specific work here\r\n\t\t\t// ...\r\n\t\t\t\r\n            this.commonSave();\r\n        }  \r\n    }\r\n\r\nAnd then, in the unit test :\r\n\t\t\r\n\t\tChildService childSrv = Mockito.mock(ChildService.class, Mockito.CALLS_REAL_METHODS);\r\n        \r\n        Mockito.doAnswer(new Answer&lt;Void&gt;() {\r\n            @Override\r\n            public Boolean answer(InvocationOnMock invocation)\r\n                    throws Throwable {\r\n\t\t\t\t// Put your mocked behavior of BaseService.commonSave() here\r\n                return null;\r\n            }\r\n        }).when(childSrv).commonSave();\r\n\r\n\t\tchildSrv.save();\r\n\t\t\r\n\t\tMockito.verify(childSrv, Mockito.times(1)).commonSave();\r\n\r\n\t\t// Put any other assertions to check child specific work is done\r\n","title":"Mockito How to mock only the call of a method of the superclass","body":"<p>Even if i totally agree with iwein response (</p>\n\n<blockquote>\n  <p>favor composition over inheritance</p>\n</blockquote>\n\n<p>), i admit there are some times inheritance seems just natural, and i don't feel breaking or refactor it just for the sake of a unit test.</p>\n\n<p>So, my suggestion :</p>\n\n<pre><code>/**\n * BaseService is now an asbtract class encapsulating \n * some common logic callable by child implementations\n */\nabstract class BaseService {  \n    protected void commonSave() {\n        // Put your common work here\n    }\n\n    abstract void save();\n}\n\npublic ChildService extends BaseService {  \n    public void save() {\n        // Put your child specific work here\n        // ...\n\n        this.commonSave();\n    }  \n}\n</code></pre>\n\n<p>And then, in the unit test :</p>\n\n<pre><code>    ChildService childSrv = Mockito.mock(ChildService.class, Mockito.CALLS_REAL_METHODS);\n\n    Mockito.doAnswer(new Answer&lt;Void&gt;() {\n        @Override\n        public Boolean answer(InvocationOnMock invocation)\n                throws Throwable {\n            // Put your mocked behavior of BaseService.commonSave() here\n            return null;\n        }\n    }).when(childSrv).commonSave();\n\n    childSrv.save();\n\n    Mockito.verify(childSrv, Mockito.times(1)).commonSave();\n\n    // Put any other assertions to check child specific work is done\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13790539,"reputation":701,"user_id":9953131,"display_name":"Sumit Rane"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1622005329,"creation_date":1615472848,"answer_id":66584523,"question_id":3467801,"body_markdown":"I found a way to suppress the superclass method using PowerMockito. 3 simple steps need for this \r\n    \r\n\r\n 1. Use **PowerMockito.suppress** method and **MemberMatcher.methodsDeclaredIn** method to supress parent class method\r\n\t\r\n 2. Second **add Parent class in @PrepareForTest** \r\n\r\n 3. Run your test class with PowerMock ie add **@RunWith(PowerMockRunner.class)** above your test class.\r\n\r\n\r\n\t\t@RunWith(PowerMockRunner.class)\r\n\t\t@PrepareForTest({BaseService.class})\r\n\t\tpublic class TestChildService(){\r\n            \r\n            @Spy\r\n            private ChildService testChildServiceObj = Mockito.spy(new ChildService());\r\n\r\n\t\t\t@Test\r\n\t\t\tpublic void testSave(){\r\n\t\t\t\tPowerMockito.suppress(MemberMatcher.methodsDeclaredIn(BaseService.class));\r\n\t\t\t\t\r\n\t\t\t\t//your further test code\r\n\r\n                testChildServiceObj.save();\r\n\t\t\t}\r\n\t\t}\r\n\r\nNote: This will work only when the superclass method does not return anything.\r\n","title":"Mockito How to mock only the call of a method of the superclass","body":"<p>I found a way to suppress the superclass method using PowerMockito. 3 simple steps need for this</p>\n<ol>\n<li><p>Use <strong>PowerMockito.suppress</strong> method and <strong>MemberMatcher.methodsDeclaredIn</strong> method to supress parent class method</p>\n</li>\n<li><p>Second <strong>add Parent class in @PrepareForTest</strong></p>\n</li>\n<li><p>Run your test class with PowerMock ie add <strong>@RunWith(PowerMockRunner.class)</strong> above your test class.</p>\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest({BaseService.class})\npublic class TestChildService(){\n\n    @Spy\n    private ChildService testChildServiceObj = Mockito.spy(new ChildService());\n\n    @Test\n    public void testSave(){\n        PowerMockito.suppress(MemberMatcher.methodsDeclaredIn(BaseService.class));\n\n        //your further test code\n\n        testChildServiceObj.save();\n    }\n}\n</code></pre>\n</li>\n</ol>\n<p>Note: This will work only when the superclass method does not return anything.</p>\n"},{"tags":[],"owner":{"account_id":408728,"reputation":4587,"user_id":779570,"accept_rate":63,"display_name":"Rafael Borja"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1620688482,"creation_date":1620688482,"answer_id":67478690,"question_id":3467801,"body_markdown":"There is simple approach that works for most of cases. You can spy your object and stub the method you want to mock.\r\n\r\nHere is an example:\r\n\r\n    MyClass myObjectSpy = Mockito.spy(myObject);\r\n    org.mockito.Mockito.doReturn(&quot;yourReturnValue&quot;).when(mySpyObject).methodToMock(any()..);\r\n\r\n \r\n\r\nSo, when you test your object, you can use myObjectSpy and when methodToMock is called, it will overwrite the normal behavior by a mock method.\r\n\r\n\r\nThis code for a method with return. In case you have a void method you can use [doNothing][1] instead.\r\n     \r\n\r\n\r\n  [1]: https://javadoc.io/static/org.mockito/mockito-core/3.9.0/org/mockito/Mockito.html#12","title":"Mockito How to mock only the call of a method of the superclass","body":"<p>There is simple approach that works for most of cases. You can spy your object and stub the method you want to mock.</p>\n<p>Here is an example:</p>\n<pre><code>MyClass myObjectSpy = Mockito.spy(myObject);\norg.mockito.Mockito.doReturn(&quot;yourReturnValue&quot;).when(mySpyObject).methodToMock(any()..);\n</code></pre>\n<p>So, when you test your object, you can use myObjectSpy and when methodToMock is called, it will overwrite the normal behavior by a mock method.</p>\n<p>This code for a method with return. In case you have a void method you can use <a href=\"https://javadoc.io/static/org.mockito/mockito-core/3.9.0/org/mockito/Mockito.html#12\" rel=\"nofollow noreferrer\">doNothing</a> instead.</p>\n"},{"tags":[],"owner":{"account_id":482765,"reputation":4526,"user_id":897373,"accept_rate":85,"display_name":"Saša"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675695994,"creation_date":1620899941,"answer_id":67517270,"question_id":3467801,"body_markdown":"You can do this with PowerMockito and replace behavior only of the parent class method with continuing testing the child&#39;s class method. Even when the method is returning some value, lets say a string, you can do something like this:\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest({ BaseService.class })\r\n    public class TestChildService() {\r\n    \r\n        private BasicService basicServiceObj;\r\n        private ChildService testee;\r\n\r\n        @Before\r\n        public void init() throws Exception {\r\n            testee = new ChildService();\r\n            basicServiceObj = PowerMockito.spy(new BaseService());\r\n            PowerMockito.doReturn(&quot;Result&quot;).when(basicServiceObj, &quot;save&quot;, ... optionalArgs);\r\n        }\r\n    \r\n        @Test\r\n        public void testSave(){\r\n            testee.save();\r\n        }\r\n    }\r\n\r\nIf you are returning nothing (`void`) then instead of `doReturn` you can use `doNothing`. Add some `optionalArgs` if the method have some arguments, if not, then skip that part.","title":"Mockito How to mock only the call of a method of the superclass","body":"<p>You can do this with PowerMockito and replace behavior only of the parent class method with continuing testing the child's class method. Even when the method is returning some value, lets say a string, you can do something like this:</p>\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest({ BaseService.class })\npublic class TestChildService() {\n\n    private BasicService basicServiceObj;\n    private ChildService testee;\n\n    @Before\n    public void init() throws Exception {\n        testee = new ChildService();\n        basicServiceObj = PowerMockito.spy(new BaseService());\n        PowerMockito.doReturn(&quot;Result&quot;).when(basicServiceObj, &quot;save&quot;, ... optionalArgs);\n    }\n\n    @Test\n    public void testSave(){\n        testee.save();\n    }\n}\n</code></pre>\n<p>If you are returning nothing (<code>void</code>) then instead of <code>doReturn</code> you can use <code>doNothing</code>. Add some <code>optionalArgs</code> if the method have some arguments, if not, then skip that part.</p>\n"},{"tags":[],"owner":{"account_id":20261619,"reputation":727,"user_id":14859847,"display_name":"Junhyunny"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699892111,"creation_date":1699890963,"answer_id":77475178,"question_id":3467801,"body_markdown":"In my case, I make a new method to wrap super class&#39;s method and make a test double. Because I need result from super class method when I implement oAuth2 client. I want this answer is helpful who someone needs to use result from super class&#39;s method.\r\n\r\n### System Under Test\r\n\r\n- Make a `loadUserFromParent` method to wrap super class function\r\n\r\n```java\r\npackage action.in.blog.service;\r\n\r\nimport org.springframework.security.oauth2.client.userinfo.DefaultOAuth2UserService;\r\nimport org.springframework.security.oauth2.client.userinfo.OAuth2UserRequest;\r\nimport org.springframework.security.oauth2.core.OAuth2AuthenticationException;\r\nimport org.springframework.security.oauth2.core.user.OAuth2User;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.List;\r\n\r\n@Service\r\npublic class DefaultOAuth2UserServiceDelegator extends DefaultOAuth2UserService {\r\n\r\n    private final List&lt;CustomOAuth2UserService&gt; oAuth2UserServices;\r\n\r\n\r\n    public DefaultOAuth2UserServiceDelegator(List&lt;CustomOAuth2UserService&gt; oAuth2UserServices) {\r\n        this.oAuth2UserServices = oAuth2UserServices;\r\n    }\r\n\r\n    public OAuth2User loadUserFromParent(OAuth2UserRequest userRequest) {\r\n        return super.loadUser(userRequest);\r\n    }\r\n\r\n    @Override\r\n    public OAuth2User loadUser(OAuth2UserRequest userRequest) throws OAuth2AuthenticationException {\r\n        for (var oauth2Service : oAuth2UserServices) {\r\n            if (!oauth2Service.supports(userRequest)) {\r\n                continue;\r\n            }\r\n            var oauthUser = loadUserFromParent(userRequest);\r\n            return oauth2Service.createOrLoadUser(oauthUser);\r\n        }\r\n        throw new RuntimeException(&quot;Not found user service&quot;);\r\n    }\r\n}\r\n```\r\n\r\n### Test\r\n\r\n - Make SUT as a spy\r\n - Use `doReturn(expectedValue).when(testDouble).method(params)`\r\n\r\n```java\r\npackage action.in.blog.service;\r\n\r\nimport action.in.blog.domain.CustomAuthentication;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.security.oauth2.client.userinfo.OAuth2UserRequest;\r\nimport org.springframework.security.oauth2.core.user.DefaultOAuth2User;\r\n\r\nimport java.util.Collections;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\nimport static org.mockito.Mockito.*;\r\n\r\nclass DefaultOAuth2UserServiceDelegatorTest {\r\n\r\n    CustomOAuth2UserService googleUserService;\r\n    CustomOAuth2UserService facebookUserService;\r\n    DefaultOAuth2UserServiceDelegator sut;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        googleUserService = mock(CustomOAuth2UserService.class);\r\n        facebookUserService = mock(CustomOAuth2UserService.class);\r\n        sut = spy(new DefaultOAuth2UserServiceDelegator(\r\n                List.of(googleUserService, facebookUserService)\r\n        ));\r\n    }\r\n\r\n    @Test\r\n    void loadUser() {\r\n\r\n        var authentication = new CustomAuthentication();\r\n        var oauth2UserRequest = mock(OAuth2UserRequest.class);\r\n        var oauth2User = new DefaultOAuth2User(Collections.emptyList(), Map.of(&quot;id&quot;, &quot;junhyunny&quot;), &quot;id&quot;);\r\n        // make a stub \r\n        doReturn(oauth2User).when(sut).loadUserFromParent(oauth2UserRequest);\r\n        when(googleUserService.supports(oauth2UserRequest)).thenReturn(true);\r\n        when(googleUserService.createOrLoadUser(oauth2User)).thenReturn(authentication);\r\n\r\n\r\n        var result = sut.loadUser(oauth2UserRequest);\r\n\r\n\r\n        assertEquals(result, authentication);\r\n    }\r\n}\r\n```","title":"Mockito How to mock only the call of a method of the superclass","body":"<p>In my case, I make a new method to wrap super class's method and make a test double. Because I need result from super class method when I implement oAuth2 client. I want this answer is helpful who someone needs to use result from super class's method.</p>\n<h3>System Under Test</h3>\n<ul>\n<li>Make a <code>loadUserFromParent</code> method to wrap super class function</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>package action.in.blog.service;\n\nimport org.springframework.security.oauth2.client.userinfo.DefaultOAuth2UserService;\nimport org.springframework.security.oauth2.client.userinfo.OAuth2UserRequest;\nimport org.springframework.security.oauth2.core.OAuth2AuthenticationException;\nimport org.springframework.security.oauth2.core.user.OAuth2User;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\n\n@Service\npublic class DefaultOAuth2UserServiceDelegator extends DefaultOAuth2UserService {\n\n    private final List&lt;CustomOAuth2UserService&gt; oAuth2UserServices;\n\n\n    public DefaultOAuth2UserServiceDelegator(List&lt;CustomOAuth2UserService&gt; oAuth2UserServices) {\n        this.oAuth2UserServices = oAuth2UserServices;\n    }\n\n    public OAuth2User loadUserFromParent(OAuth2UserRequest userRequest) {\n        return super.loadUser(userRequest);\n    }\n\n    @Override\n    public OAuth2User loadUser(OAuth2UserRequest userRequest) throws OAuth2AuthenticationException {\n        for (var oauth2Service : oAuth2UserServices) {\n            if (!oauth2Service.supports(userRequest)) {\n                continue;\n            }\n            var oauthUser = loadUserFromParent(userRequest);\n            return oauth2Service.createOrLoadUser(oauthUser);\n        }\n        throw new RuntimeException(&quot;Not found user service&quot;);\n    }\n}\n</code></pre>\n<h3>Test</h3>\n<ul>\n<li>Make SUT as a spy</li>\n<li>Use <code>doReturn(expectedValue).when(testDouble).method(params)</code></li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>package action.in.blog.service;\n\nimport action.in.blog.domain.CustomAuthentication;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.security.oauth2.client.userinfo.OAuth2UserRequest;\nimport org.springframework.security.oauth2.core.user.DefaultOAuth2User;\n\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Map;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.mockito.Mockito.*;\n\nclass DefaultOAuth2UserServiceDelegatorTest {\n\n    CustomOAuth2UserService googleUserService;\n    CustomOAuth2UserService facebookUserService;\n    DefaultOAuth2UserServiceDelegator sut;\n\n    @BeforeEach\n    void setUp() {\n        googleUserService = mock(CustomOAuth2UserService.class);\n        facebookUserService = mock(CustomOAuth2UserService.class);\n        sut = spy(new DefaultOAuth2UserServiceDelegator(\n                List.of(googleUserService, facebookUserService)\n        ));\n    }\n\n    @Test\n    void loadUser() {\n\n        var authentication = new CustomAuthentication();\n        var oauth2UserRequest = mock(OAuth2UserRequest.class);\n        var oauth2User = new DefaultOAuth2User(Collections.emptyList(), Map.of(&quot;id&quot;, &quot;junhyunny&quot;), &quot;id&quot;);\n        // make a stub \n        doReturn(oauth2User).when(sut).loadUserFromParent(oauth2UserRequest);\n        when(googleUserService.supports(oauth2UserRequest)).thenReturn(true);\n        when(googleUserService.createOrLoadUser(oauth2User)).thenReturn(authentication);\n\n\n        var result = sut.loadUser(oauth2UserRequest);\n\n\n        assertEquals(result, authentication);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":611408,"reputation":1505,"user_id":337399,"accept_rate":62,"display_name":"mada"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170736,"favorite_count":0,"down_vote_count":0,"up_vote_count":126,"accepted_answer_id":3479507,"answer_count":11,"score":126,"last_activity_date":1699892111,"creation_date":1281617420,"question_id":3467801,"body_markdown":"I&#39;m using Mockito in some tests.\r\n\r\nI have the following classes: \r\n\r\n    class BaseService {  \r\n        public void save() {...}  \r\n    }\r\n     \r\n    public Childservice extends BaseService {  \r\n        public void save(){  \r\n            //some code  \r\n            super.save();\r\n        }  \r\n    }   \r\n\r\nI want to mock only the second call (`super.save`) of `ChildService`. The first call must call the real method. Is there a way to do that?","title":"Mockito How to mock only the call of a method of the superclass","body":"<p>I'm using Mockito in some tests.</p>\n\n<p>I have the following classes: </p>\n\n<pre><code>class BaseService {  \n    public void save() {...}  \n}\n\npublic Childservice extends BaseService {  \n    public void save(){  \n        //some code  \n        super.save();\n    }  \n}   \n</code></pre>\n\n<p>I want to mock only the second call (<code>super.save</code>) of <code>ChildService</code>. The first call must call the real method. Is there a way to do that?</p>\n"},{"tags":["java","amazon-web-services","apache-kafka","aws-msk"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699892026,"creation_date":1699892026,"answer_id":77475284,"question_id":77471226,"body_markdown":"&gt; any way to access the file system for the MSK cluster\r\n\r\nCan you SSH to the broker EC2 instances? That&#39;s the only way that&#39;s possible.\r\n\r\n&gt; not sure that the application can delete anything in the cluster\r\n\r\nCorrect. The state store is stored where your apps run. The Kafka cluster only stores the compacted, internal topics of the KTable, not any RocksDB instance metadata. \r\n\r\nYou&#39;d use `kafka-streams-application-reset.sh` to delete the data on the cluster.\r\n\r\n&gt; I am using Spring Kafka and I dont have that `KafkaStreams` instance in my code\r\n\r\nYou do/should. It is only abstracted away. https://docs.spring.io/spring-kafka/docs/current/reference/html/#streams-kafka-streams\r\n\r\nIf you only have `@KafkaListener` consumer, then that&#39;s not using Kafka Streams.","title":"How to remove the kafka state store in AWS MSK cluster","body":"<blockquote>\n<p>any way to access the file system for the MSK cluster</p>\n</blockquote>\n<p>Can you SSH to the broker EC2 instances? That's the only way that's possible.</p>\n<blockquote>\n<p>not sure that the application can delete anything in the cluster</p>\n</blockquote>\n<p>Correct. The state store is stored where your apps run. The Kafka cluster only stores the compacted, internal topics of the KTable, not any RocksDB instance metadata.</p>\n<p>You'd use <code>kafka-streams-application-reset.sh</code> to delete the data on the cluster.</p>\n<blockquote>\n<p>I am using Spring Kafka and I dont have that <code>KafkaStreams</code> instance in my code</p>\n</blockquote>\n<p>You do/should. It is only abstracted away. <a href=\"https://docs.spring.io/spring-kafka/docs/current/reference/html/#streams-kafka-streams\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/docs/current/reference/html/#streams-kafka-streams</a></p>\n<p>If you only have <code>@KafkaListener</code> consumer, then that's not using Kafka Streams.</p>\n"}],"owner":{"account_id":22886030,"reputation":1849,"user_id":17026900,"display_name":"Oussama ZAGHDOUD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699892026,"creation_date":1699835614,"question_id":77471226,"body_markdown":"I have a `kafkaStreams` application using an MSK cluster on AWS.\r\nI need to clean the state store (created after using some `KTables` in my application).\r\nI can&#39;t find any way to access the file system for the MSK cluster.\r\n\r\nI found  [here][1] that I can use :\r\n\r\n    KafkaStreams app = new KafkaStreams(builder.build(), props);\r\n    // Delete the application&#39;s local state.\r\n    // Note: In real application you&#39;d call `cleanUp()` only under\r\n    // certain conditions.  See tip on `cleanUp()` below.\r\n    app.cleanUp();\r\n    app.start();\r\n\r\nBut in my case I am using Spring Kafka and I dont have that `KafkaStreams` instance in my code, and the app is starting automatically.\r\n\r\nAlso I found that just by deleting the topic (the input of my state store) the state store will be deleted, not sure how much time is needed here, I tried to delete the topic and after 15 minutes the state store looks still there so I just recreated the topic.\r\n\r\nAlso I found this suggestion about getting the state store directory path and delete it using the application code, and I am sure it will not work because the directory is used by the app itself at the same time so it can&#39;t be deleted, also not sure that the application can delete anything in the cluster: \r\n\r\n    String stateDirectory = config.getString(StreamsConfig.STATE_DIR_CONFIG);\r\n    // Delete the state directory using appropriate file operations\r\n\r\nThe single way that I think it can be the solution is : \r\ncreate a Punctuator or a Processor or something like that, get the state store name, pass it to the processor and clean the state store there, is that seems to be the good solution here?\r\n \r\nThank you in advance.\r\n\r\n  [1]: https://docs.confluent.io/platform/current/streams/developer-guide/app-reset-tool.html#step-2-reset-the-local-environments-of-your-application-instances\r\n\r\n","title":"How to remove the kafka state store in AWS MSK cluster","body":"<p>I have a <code>kafkaStreams</code> application using an MSK cluster on AWS.\nI need to clean the state store (created after using some <code>KTables</code> in my application).\nI can't find any way to access the file system for the MSK cluster.</p>\n<p>I found  <a href=\"https://docs.confluent.io/platform/current/streams/developer-guide/app-reset-tool.html#step-2-reset-the-local-environments-of-your-application-instances\" rel=\"nofollow noreferrer\">here</a> that I can use :</p>\n<pre><code>KafkaStreams app = new KafkaStreams(builder.build(), props);\n// Delete the application's local state.\n// Note: In real application you'd call `cleanUp()` only under\n// certain conditions.  See tip on `cleanUp()` below.\napp.cleanUp();\napp.start();\n</code></pre>\n<p>But in my case I am using Spring Kafka and I dont have that <code>KafkaStreams</code> instance in my code, and the app is starting automatically.</p>\n<p>Also I found that just by deleting the topic (the input of my state store) the state store will be deleted, not sure how much time is needed here, I tried to delete the topic and after 15 minutes the state store looks still there so I just recreated the topic.</p>\n<p>Also I found this suggestion about getting the state store directory path and delete it using the application code, and I am sure it will not work because the directory is used by the app itself at the same time so it can't be deleted, also not sure that the application can delete anything in the cluster:</p>\n<pre><code>String stateDirectory = config.getString(StreamsConfig.STATE_DIR_CONFIG);\n// Delete the state directory using appropriate file operations\n</code></pre>\n<p>The single way that I think it can be the solution is :\ncreate a Punctuator or a Processor or something like that, get the state store name, pass it to the processor and clean the state store there, is that seems to be the good solution here?</p>\n<p>Thank you in advance.</p>\n"},{"tags":["java","spring-boot","multi-tenant","spring-boot-3","hibernate-6.x"],"owner":{"account_id":25896342,"reputation":86,"user_id":19622845,"display_name":"Danijel Sudar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699891833,"creation_date":1699317041,"question_id":77434924,"body_markdown":"I have recently performed an upgrade of my `multitenancy Spring Boot` application and am now encountering issues with making requests to the database. The upgrade was as follows: \r\n\r\n- Spring Boot `2.5.6` to `3.1.4` \r\n- Java `11` to `17` \r\n- Gradle `7.2` to `8.2.1` \r\n- Hibernate `5` to `6` \r\n\r\nI am using MariaDB `11.4.4` and Liquibase.\r\n\r\nMy application starts without any issues after the upgrade. However, **every time I try to make a request to the repository that needs to connect to the database, I encounter a** *`CannotCreateTransactionException`* **error**. The database is running without any issues and I have confirmed that all the dependencies are correctly installed. Before I upgraded, the application was working as expected. The error that I am encountering now seems to happen every time I attempt to make a database request using the request code snippet provided above.\r\n\r\nI get these **error messages:**\r\n```text\r\norg.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction\r\n  at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)\r\n  at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400)\r\n\r\nCaused by: java.lang.UnsupportedOperationException: The application must supply JDBC connections\r\n```\r\n\r\nThese are the logs from my app:\r\n```text\r\n//...\r\nINFO HHH000204: Processing PersistenceUnitInfo [name: default]\r\nINFO HHH000412: Hibernate ORM core version 6.2.9.Final\r\nINFO HHH000406: Using bytecode reflection optimizer\r\nINFO HHH000021: Bytecode provider name : bytebuddy\r\nINFO No LoadTimeWeaver setup: ignoring JPA class transformer\r\nWARN HHH000181: No appropriate connection provider encountered, assuming application will be supplying connections\r\nWARN HHH000342: Could not obtain connection to query metadata\r\njava.lang.UnsupportedOperationException: The application must supply JDBC connections\r\n\tat org.hibernate.engine.jdbc.connections.internal.UserSuppliedConnectionProviderImpl.getConnection(UserSuppliedConnectionProviderImpl.java:44)\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:316)\r\n//...\r\nWARN class org.hibernate.tool.schema.Action cannot be cast to class java.lang.String (org.hibernate.tool.schema.Action is in unnamed module of loader org.springframework.boot.loader.LaunchedURLClassLoader @5ce65a89; java.lang.String is in module java.base of loader &#39;bootstrap&#39;)  Ignoring\r\nINFO HHH000021: Bytecode provider name : bytebuddy\r\nINFO HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\nINFO Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\nINFO Hibernate is in classpath; If applicable, HQL parser will be used.\r\nINFO Tomcat started on port(s): 8080 \r\nINFO Started X in ...\r\n//...\r\norg.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400)\r\n//...\t\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy143.findById(Unknown Source)\r\n\tat com......ProjectParamsServiceImpl.getProjectParam(ProjectParamsServiceImpl.java:65)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n//...\r\n\tat com......ProjectParamsControllerImpl.getProjectParam(ProjectParamsControllerImpl.java:48)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n//...\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: java.lang.UnsupportedOperationException: The application must supply JDBC connections\r\n\tat org.hibernate.engine.jdbc.connections.internal.UserSuppliedConnectionProviderImpl.getConnection(UserSuppliedConnectionProviderImpl.java:44)\r\n\tat org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:38)\r\n\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)\r\n\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:152)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)\r\n```\r\n\r\nThis is the part of the code where I get `CannotCreateTransactionException` error: `projectParamsRepository.findById(paramName).orElse(null)`;\r\n```java\r\n@Service\r\npublic class ProjectParamsServiceImpl implements ProjectParamsService {\r\n  @Autowired\r\n  private ProjectParamsRepository projectParamsRepository;\r\n\r\n  @Override\r\n  public ProjectParam getProjectParam(String paramName) {\r\n    ProjectParam projectParam = projectParamsRepository.findById(paramName).orElse(null);\r\n  \r\n    //...\r\n  }\r\n}\r\n\r\n@Repository\r\npublic interface ProjectParamsRepository\r\n        extends JpaRepository&lt;ProjectParam, String&gt;,\r\n        JpaSpecificationExecutor&lt;ProjectParam&gt;,\r\n        ProjectParamsMxRepository {\r\n}\r\n\r\n@Entity\r\n@Table(name = &quot;project_param&quot;)\r\npublic class ProjectParam {\r\n    @Id\r\n    @Column(name = &quot;name&quot;)\r\n    @Size(max = 60)\r\n    String name;\r\n\r\n    @Lob\r\n    @Column(name = &quot;value&quot;)\r\n    String value;\r\n//...\r\n}\r\n```\r\n\r\nHere are my current dependencies from `build.gradle`:\r\n```groovy\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-configuration-processor&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-validation&#39;\r\n\r\n    //...\r\n\r\n    compileOnly &#39;org.projectlombok:lombok&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n\r\n    implementation &#39;org.liquibase:liquibase-core:4.19.0&#39;\r\n    runtimeOnly &#39;mysql:mysql-connector-java:8.0.33&#39;\r\n    liquibase &#39;org.liquibase.ext:liquibase-hibernate6:4.19.0&#39;\r\n}\r\n```\r\n\r\nThis is my `application.yml`\r\n```yaml\r\nspring:\r\n  datasource:\r\n    driver-class-name: com.mysql.cj.jdbc.Driver\r\n  jpa:\r\n    database: mysql\r\n    generate-ddl: true\r\n  liquibase:\r\n    change-log: db/changelog/db.changelog-master.yml\r\n```\r\n\r\n**I implemented multitenancy in my Spring Boot app using the classes listed below.**\r\n\r\nHere&#39;s the code for my `MultiTenancyJpaConfiguration`.\r\nI had to comment out three lines in this class because the import `import org.hibernate.MultiTenancyStrategy;` for them no longer exist.\r\n```java\r\n@Configuration\r\n@EnableConfigurationProperties({JpaProperties.class})\r\n@EnableTransactionManagement\r\npublic class MultiTenancyJpaConfiguration {\r\n\r\n    @Autowired\r\n    private JpaProperties jpaProperties;\r\n\r\n    @Bean\r\n    public MultiTenantConnectionProvider multiTenantConnectionProvider() {\r\n        return new DataSourceBasedMultiTenantConnectionProviderImpl();\r\n    }\r\n\r\n    @Bean\r\n    public CurrentTenantIdentifierResolver currentTenantIdentifierResolver() {\r\n        return new CurrentProjectIdentifierResolverImpl();\r\n    }\r\n\r\n    @Primary\r\n    @Bean\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean(\r\n            MultiTenantConnectionProvider multiTenantConnectionProvider,\r\n            CurrentTenantIdentifierResolver currentTenantIdentifierResolver\r\n    ) {\r\n        LocalContainerEntityManagerFactoryBean result = new LocalContainerEntityManagerFactoryBean();\r\n\r\n        result.setPackagesToScan(\r\n                &quot;com...entity&quot;,\r\n                &quot;com...repository&quot;,\r\n                &quot;com...repository.impl&quot;);\r\n        result.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\r\n        result.setJpaPropertyMap(hibernateProps(multiTenantConnectionProvider, currentTenantIdentifierResolver));\r\n\r\n        return result;\r\n    }\r\n\r\n    Map&lt;String, Object&gt; hibernateProps(MultiTenantConnectionProvider multiTenantConnectionProvider, CurrentTenantIdentifierResolver currentTenantIdentifierResolver) {\r\n        Map&lt;String, Object&gt; hibernateProps = new LinkedHashMap&lt;&gt;();\r\n        hibernateProps.putAll(this.jpaProperties.getProperties());\r\n//        hibernateProps.put(Environment.MULTI_TENANT, MultiTenancyStrategy.DATABASE);\r\n//        hibernateProps.put(Environment.MULTI_TENANT_CONNECTION_PROVIDER, multiTenantConnectionProvider);\r\n//        hibernateProps.put(Environment.MULTI_TENANT_IDENTIFIER_RESOLVER, currentTenantIdentifierResolver);\r\n\r\n        hibernateProps.put(Environment.HBM2DDL_AUTO, Action.NONE);\r\n        hibernateProps.put(Environment.FORMAT_SQL, true);\r\n        hibernateProps.put(Environment.SHOW_SQL, false);\r\n\r\n        hibernateProps.put(Environment.DIALECT, &quot;org.hibernate.dialect.MySQLDialect&quot;);\r\n\r\n        return hibernateProps;\r\n    }\r\n\r\n    @Bean\r\n    public EntityManagerFactory entityManagerFactory(LocalContainerEntityManagerFactoryBean entityManagerFactoryBean) {\r\n        return entityManagerFactoryBean.getObject();\r\n    }\r\n\r\n    @Bean\r\n    public JpaTransactionManager transactionManager(\r\n            EntityManagerFactory entityManagerFactory\r\n    ) {\r\n        JpaTransactionManager transactionManager = new JpaTransactionManager();\r\n        transactionManager.setEntityManagerFactory(entityManagerFactory);\r\n        return transactionManager;\r\n    }\r\n}\r\n```\r\n\r\nAdditionally, this is my `CurrentTenantIdentifierResolver` class:\r\n```java\r\n@Component\r\npublic class CurrentProjectIdentifierResolverImpl implements CurrentTenantIdentifierResolver {\r\n\r\n    @Value(&quot;${defaultProject.defaultProjectId}&quot;)\r\n    String defaultProjectId;\r\n\r\n    @Override\r\n    public String resolveCurrentTenantIdentifier() {\r\n        String project = UserProjectContent.getCurrentProject(); //ThreadLocal\r\n        if (StringUtils.isNotBlank(project))\r\n            return project;\r\n\r\n        return defaultProjectId;\r\n    }\r\n\r\n    @Override\r\n    public boolean validateExistingCurrentSessions() {\r\n        return true;\r\n    }\r\n\r\n}\r\n```\r\n\r\nHere is my `AbstractDataSourceBasedMultiTenantConnectionProviderImpl` class:\r\n```java\r\n@Component\r\npublic class DataSourceBasedMultiTenantConnectionProviderImpl\r\n        extends AbstractDataSourceBasedMultiTenantConnectionProviderImpl {\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    @Autowired\r\n    private ProjectDatabaseRepository projectDatabaseInfoRepository;\r\n\r\n    @Autowired\r\n    private ProjectRepository projectRepository;\r\n\r\n    @Value(&quot;${refreshIntervalForWaitingProjectsInSeconds}&quot;)\r\n    Integer refreshIntervalForWaitingProjectsInSeconds;\r\n\r\n    @Value(&quot;${defaultProject.defaultProjectId}&quot;)\r\n    String defaultProjectId;\r\n\r\n    private final Map&lt;String, DataSource&gt; dataSourcesMtApp = new TreeMap&lt;&gt;();\r\n\r\n    @Override\r\n    protected DataSource selectAnyDataSource() {\r\n        if (dataSourcesMtApp.isEmpty()) {\r\n            List&lt;ProjectDbInfo&gt; projects = new ArrayList&lt;&gt;();\r\n            //...\r\n            addProjects(projects);\r\n        }\r\n        return this.dataSourcesMtApp.values().iterator().next();\r\n    }\r\n\r\n    @Override\r\n    protected DataSource selectDataSource(String projectId) {\r\n        if (!this.dataSourcesMtApp.containsKey(projectId)) {\r\n            ProjectDbInfo project = projectDatabaseInfoRepository.getByProjectId(projectId);\r\n            addProject(project);\r\n        }\r\n        return this.dataSourcesMtApp.get(projectId);\r\n    }\r\n\r\n    public void addProjects(List&lt;ProjectDbInfo&gt; projects) {\r\n        for (ProjectDbInfo project : projects) {\r\n            addProject(project);\r\n        }\r\n    }\r\n\r\n    public void addProject(ProjectDbInfo project) {\r\n        dataSourcesMtApp.put(\r\n                project.getId(),\r\n                DataSourceUtil.createAndConfigureDataSource(project)\r\n        );\r\n    }\r\n}\r\n```\r\n\r\nThis is my `DataSourceUtil` class:\r\nan example of a `masterProject.getUrl()` is: `jdbc:mysql://mariadb:3306/examples?createDatabaseIfNotExist=true&amp;useSSL=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=UTC`\r\n```java\r\npublic final class DataSourceUtil {\r\n\r\n    public static DataSource createAndConfigureDataSource(ProjectDbInfo masterProject) {\r\n        HikariDataSource ds = new HikariDataSource();\r\n        ds.setUsername(masterProject.getUsername());\r\n        ds.setPassword(masterProject.getPassword());\r\n        ds.setJdbcUrl(masterProject.getUrl());\r\n        ds.setConnectionTimeout(20000);\r\n\r\n        ds.setMinimumIdle(0);\r\n        ds.setMaximumPoolSize(1);\r\n        ds.setIdleTimeout(30000);\r\n        ds.setMaxLifetime(30000);\r\n        String projectId = masterProject.getId();\r\n        String projectConnectionPoolName = projectId + &quot;-connection-pool&quot;;\r\n        ds.setPoolName(projectConnectionPoolName);\r\n        return ds;\r\n    }\r\n}\r\n```\r\n\r\nI believe that the error is associated with the `upgrade from Hibernate 5 to 6`, in conjunction with changes made in the `MultiTenancyJpaConfiguration` class.\r\n\r\nGiven this information, could someone please help me figure out why I am getting a `CannotCreateTransactionException` here and how I can fix this problem? Any suggestions would be much appreciated.\r\n\r\n\r\nUpdate: Solution\r\n----------------\r\n\r\n\r\nI solved the problem by making the following changes in the `MultiTenancyJpaConfiguration` class.\r\n\r\n```\r\n@Configuration\r\npublic class MultiTenancyJpaConfiguration {\r\n\r\n    @Primary\r\n    @Bean\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(DataSourceBasedMultiTenantConnectionProviderImpl multiTenantConnectionProvider,\r\n                                                                       CurrentProjectIdentifierResolverImpl tenantIdentifierResolver) {\r\n        LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\r\n\r\n        em.setPackagesToScan(\r\n                &quot;com....entity&quot;,\r\n                &quot;com....repository&quot;,\r\n                &quot;com....repository.impl&quot;);\r\n\r\n        em.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\r\n\r\n        Map&lt;String, Object&gt; jpaProperties = new HashMap&lt;&gt;();\r\n        jpaProperties.put(Environment.MULTI_TENANT_CONNECTION_PROVIDER, multiTenantConnectionProvider);\r\n        jpaProperties.put(Environment.MULTI_TENANT_IDENTIFIER_RESOLVER, tenantIdentifierResolver);\r\n        jpaProperties.put(Environment.FORMAT_SQL, true);\r\n\r\n        jpaProperties.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;none&quot;);\r\n        jpaProperties.put(&quot;hibernate.format_sql&quot;, true);\r\n        jpaProperties.put(&quot;hibernate.show_sql&quot;, false);\r\n        jpaProperties.put(Environment.PHYSICAL_NAMING_STRATEGY, PhysicalNamingStrategyStandardImpl.class);\r\n        jpaProperties.put(Environment.DIALECT, &quot;org.hibernate.dialect.MySQLDialect&quot;);\r\n\r\n        em.setJpaPropertyMap(jpaProperties);\r\n\r\n        return em;\r\n    }\r\n\r\n    @Bean(name = &quot;transactionManager&quot;)\r\n    public PlatformTransactionManager transactionManager(LocalContainerEntityManagerFactoryBean entityManagerFactoryBean) {\r\n        JpaTransactionManager transactionManager = new JpaTransactionManager();\r\n        transactionManager.setEntityManagerFactory(entityManagerFactoryBean.getObject());\r\n        return transactionManager;\r\n    }\r\n}\r\n```\r\n\r\nI hope this helps anyone who encounters a similar problem after upgrading to Spring Boot 3 and Hibernate 6 with a multi-tenant configuration.","title":"CannotCreateTransactionException in Multi-Tenant Spring Boot App After Upgrading to Spring Boot 3 and Hibernate 6","body":"<p>I have recently performed an upgrade of my <code>multitenancy Spring Boot</code> application and am now encountering issues with making requests to the database. The upgrade was as follows:</p>\n<ul>\n<li>Spring Boot <code>2.5.6</code> to <code>3.1.4</code></li>\n<li>Java <code>11</code> to <code>17</code></li>\n<li>Gradle <code>7.2</code> to <code>8.2.1</code></li>\n<li>Hibernate <code>5</code> to <code>6</code></li>\n</ul>\n<p>I am using MariaDB <code>11.4.4</code> and Liquibase.</p>\n<p>My application starts without any issues after the upgrade. However, <strong>every time I try to make a request to the repository that needs to connect to the database, I encounter a</strong> <em><code>CannotCreateTransactionException</code></em> <strong>error</strong>. The database is running without any issues and I have confirmed that all the dependencies are correctly installed. Before I upgraded, the application was working as expected. The error that I am encountering now seems to happen every time I attempt to make a database request using the request code snippet provided above.</p>\n<p>I get these <strong>error messages:</strong></p>\n<pre><code>org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction\n  at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)\n  at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400)\n\nCaused by: java.lang.UnsupportedOperationException: The application must supply JDBC connections\n</code></pre>\n<p>These are the logs from my app:</p>\n<pre><code>//...\nINFO HHH000204: Processing PersistenceUnitInfo [name: default]\nINFO HHH000412: Hibernate ORM core version 6.2.9.Final\nINFO HHH000406: Using bytecode reflection optimizer\nINFO HHH000021: Bytecode provider name : bytebuddy\nINFO No LoadTimeWeaver setup: ignoring JPA class transformer\nWARN HHH000181: No appropriate connection provider encountered, assuming application will be supplying connections\nWARN HHH000342: Could not obtain connection to query metadata\njava.lang.UnsupportedOperationException: The application must supply JDBC connections\n    at org.hibernate.engine.jdbc.connections.internal.UserSuppliedConnectionProviderImpl.getConnection(UserSuppliedConnectionProviderImpl.java:44)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:316)\n//...\nWARN class org.hibernate.tool.schema.Action cannot be cast to class java.lang.String (org.hibernate.tool.schema.Action is in unnamed module of loader org.springframework.boot.loader.LaunchedURLClassLoader @5ce65a89; java.lang.String is in module java.base of loader 'bootstrap')  Ignoring\nINFO HHH000021: Bytecode provider name : bytebuddy\nINFO HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\nINFO Initialized JPA EntityManagerFactory for persistence unit 'default'\nINFO Hibernate is in classpath; If applicable, HQL parser will be used.\nINFO Tomcat started on port(s): 8080 \nINFO Started X in ...\n//...\norg.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction\n    at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400)\n//...   \n    at jdk.proxy2/jdk.proxy2.$Proxy143.findById(Unknown Source)\n    at com......ProjectParamsServiceImpl.getProjectParam(ProjectParamsServiceImpl.java:65)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n//...\n    at com......ProjectParamsControllerImpl.getProjectParam(ProjectParamsControllerImpl.java:48)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n//...\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.UnsupportedOperationException: The application must supply JDBC connections\n    at org.hibernate.engine.jdbc.connections.internal.UserSuppliedConnectionProviderImpl.getConnection(UserSuppliedConnectionProviderImpl.java:44)\n    at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:38)\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:152)\n    at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)\n</code></pre>\n<p>This is the part of the code where I get <code>CannotCreateTransactionException</code> error: <code>projectParamsRepository.findById(paramName).orElse(null)</code>;</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class ProjectParamsServiceImpl implements ProjectParamsService {\n  @Autowired\n  private ProjectParamsRepository projectParamsRepository;\n\n  @Override\n  public ProjectParam getProjectParam(String paramName) {\n    ProjectParam projectParam = projectParamsRepository.findById(paramName).orElse(null);\n  \n    //...\n  }\n}\n\n@Repository\npublic interface ProjectParamsRepository\n        extends JpaRepository&lt;ProjectParam, String&gt;,\n        JpaSpecificationExecutor&lt;ProjectParam&gt;,\n        ProjectParamsMxRepository {\n}\n\n@Entity\n@Table(name = &quot;project_param&quot;)\npublic class ProjectParam {\n    @Id\n    @Column(name = &quot;name&quot;)\n    @Size(max = 60)\n    String name;\n\n    @Lob\n    @Column(name = &quot;value&quot;)\n    String value;\n//...\n}\n</code></pre>\n<p>Here are my current dependencies from <code>build.gradle</code>:</p>\n<pre><code>dependencies {\n    implementation 'org.springframework.boot:spring-boot-configuration-processor'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-validation'\n\n    //...\n\n    compileOnly 'org.projectlombok:lombok'\n    annotationProcessor 'org.projectlombok:lombok'\n\n    implementation 'org.liquibase:liquibase-core:4.19.0'\n    runtimeOnly 'mysql:mysql-connector-java:8.0.33'\n    liquibase 'org.liquibase.ext:liquibase-hibernate6:4.19.0'\n}\n</code></pre>\n<p>This is my <code>application.yml</code></p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  datasource:\n    driver-class-name: com.mysql.cj.jdbc.Driver\n  jpa:\n    database: mysql\n    generate-ddl: true\n  liquibase:\n    change-log: db/changelog/db.changelog-master.yml\n</code></pre>\n<p><strong>I implemented multitenancy in my Spring Boot app using the classes listed below.</strong></p>\n<p>Here's the code for my <code>MultiTenancyJpaConfiguration</code>.\nI had to comment out three lines in this class because the import <code>import org.hibernate.MultiTenancyStrategy;</code> for them no longer exist.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableConfigurationProperties({JpaProperties.class})\n@EnableTransactionManagement\npublic class MultiTenancyJpaConfiguration {\n\n    @Autowired\n    private JpaProperties jpaProperties;\n\n    @Bean\n    public MultiTenantConnectionProvider multiTenantConnectionProvider() {\n        return new DataSourceBasedMultiTenantConnectionProviderImpl();\n    }\n\n    @Bean\n    public CurrentTenantIdentifierResolver currentTenantIdentifierResolver() {\n        return new CurrentProjectIdentifierResolverImpl();\n    }\n\n    @Primary\n    @Bean\n    public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean(\n            MultiTenantConnectionProvider multiTenantConnectionProvider,\n            CurrentTenantIdentifierResolver currentTenantIdentifierResolver\n    ) {\n        LocalContainerEntityManagerFactoryBean result = new LocalContainerEntityManagerFactoryBean();\n\n        result.setPackagesToScan(\n                &quot;com...entity&quot;,\n                &quot;com...repository&quot;,\n                &quot;com...repository.impl&quot;);\n        result.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\n        result.setJpaPropertyMap(hibernateProps(multiTenantConnectionProvider, currentTenantIdentifierResolver));\n\n        return result;\n    }\n\n    Map&lt;String, Object&gt; hibernateProps(MultiTenantConnectionProvider multiTenantConnectionProvider, CurrentTenantIdentifierResolver currentTenantIdentifierResolver) {\n        Map&lt;String, Object&gt; hibernateProps = new LinkedHashMap&lt;&gt;();\n        hibernateProps.putAll(this.jpaProperties.getProperties());\n//        hibernateProps.put(Environment.MULTI_TENANT, MultiTenancyStrategy.DATABASE);\n//        hibernateProps.put(Environment.MULTI_TENANT_CONNECTION_PROVIDER, multiTenantConnectionProvider);\n//        hibernateProps.put(Environment.MULTI_TENANT_IDENTIFIER_RESOLVER, currentTenantIdentifierResolver);\n\n        hibernateProps.put(Environment.HBM2DDL_AUTO, Action.NONE);\n        hibernateProps.put(Environment.FORMAT_SQL, true);\n        hibernateProps.put(Environment.SHOW_SQL, false);\n\n        hibernateProps.put(Environment.DIALECT, &quot;org.hibernate.dialect.MySQLDialect&quot;);\n\n        return hibernateProps;\n    }\n\n    @Bean\n    public EntityManagerFactory entityManagerFactory(LocalContainerEntityManagerFactoryBean entityManagerFactoryBean) {\n        return entityManagerFactoryBean.getObject();\n    }\n\n    @Bean\n    public JpaTransactionManager transactionManager(\n            EntityManagerFactory entityManagerFactory\n    ) {\n        JpaTransactionManager transactionManager = new JpaTransactionManager();\n        transactionManager.setEntityManagerFactory(entityManagerFactory);\n        return transactionManager;\n    }\n}\n</code></pre>\n<p>Additionally, this is my <code>CurrentTenantIdentifierResolver</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class CurrentProjectIdentifierResolverImpl implements CurrentTenantIdentifierResolver {\n\n    @Value(&quot;${defaultProject.defaultProjectId}&quot;)\n    String defaultProjectId;\n\n    @Override\n    public String resolveCurrentTenantIdentifier() {\n        String project = UserProjectContent.getCurrentProject(); //ThreadLocal\n        if (StringUtils.isNotBlank(project))\n            return project;\n\n        return defaultProjectId;\n    }\n\n    @Override\n    public boolean validateExistingCurrentSessions() {\n        return true;\n    }\n\n}\n</code></pre>\n<p>Here is my <code>AbstractDataSourceBasedMultiTenantConnectionProviderImpl</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class DataSourceBasedMultiTenantConnectionProviderImpl\n        extends AbstractDataSourceBasedMultiTenantConnectionProviderImpl {\n    private static final long serialVersionUID = 1L;\n\n    @Autowired\n    private ProjectDatabaseRepository projectDatabaseInfoRepository;\n\n    @Autowired\n    private ProjectRepository projectRepository;\n\n    @Value(&quot;${refreshIntervalForWaitingProjectsInSeconds}&quot;)\n    Integer refreshIntervalForWaitingProjectsInSeconds;\n\n    @Value(&quot;${defaultProject.defaultProjectId}&quot;)\n    String defaultProjectId;\n\n    private final Map&lt;String, DataSource&gt; dataSourcesMtApp = new TreeMap&lt;&gt;();\n\n    @Override\n    protected DataSource selectAnyDataSource() {\n        if (dataSourcesMtApp.isEmpty()) {\n            List&lt;ProjectDbInfo&gt; projects = new ArrayList&lt;&gt;();\n            //...\n            addProjects(projects);\n        }\n        return this.dataSourcesMtApp.values().iterator().next();\n    }\n\n    @Override\n    protected DataSource selectDataSource(String projectId) {\n        if (!this.dataSourcesMtApp.containsKey(projectId)) {\n            ProjectDbInfo project = projectDatabaseInfoRepository.getByProjectId(projectId);\n            addProject(project);\n        }\n        return this.dataSourcesMtApp.get(projectId);\n    }\n\n    public void addProjects(List&lt;ProjectDbInfo&gt; projects) {\n        for (ProjectDbInfo project : projects) {\n            addProject(project);\n        }\n    }\n\n    public void addProject(ProjectDbInfo project) {\n        dataSourcesMtApp.put(\n                project.getId(),\n                DataSourceUtil.createAndConfigureDataSource(project)\n        );\n    }\n}\n</code></pre>\n<p>This is my <code>DataSourceUtil</code> class:\nan example of a <code>masterProject.getUrl()</code> is: <code>jdbc:mysql://mariadb:3306/examples?createDatabaseIfNotExist=true&amp;useSSL=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=UTC</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class DataSourceUtil {\n\n    public static DataSource createAndConfigureDataSource(ProjectDbInfo masterProject) {\n        HikariDataSource ds = new HikariDataSource();\n        ds.setUsername(masterProject.getUsername());\n        ds.setPassword(masterProject.getPassword());\n        ds.setJdbcUrl(masterProject.getUrl());\n        ds.setConnectionTimeout(20000);\n\n        ds.setMinimumIdle(0);\n        ds.setMaximumPoolSize(1);\n        ds.setIdleTimeout(30000);\n        ds.setMaxLifetime(30000);\n        String projectId = masterProject.getId();\n        String projectConnectionPoolName = projectId + &quot;-connection-pool&quot;;\n        ds.setPoolName(projectConnectionPoolName);\n        return ds;\n    }\n}\n</code></pre>\n<p>I believe that the error is associated with the <code>upgrade from Hibernate 5 to 6</code>, in conjunction with changes made in the <code>MultiTenancyJpaConfiguration</code> class.</p>\n<p>Given this information, could someone please help me figure out why I am getting a <code>CannotCreateTransactionException</code> here and how I can fix this problem? Any suggestions would be much appreciated.</p>\n<h2>Update: Solution</h2>\n<p>I solved the problem by making the following changes in the <code>MultiTenancyJpaConfiguration</code> class.</p>\n<pre><code>@Configuration\npublic class MultiTenancyJpaConfiguration {\n\n    @Primary\n    @Bean\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(DataSourceBasedMultiTenantConnectionProviderImpl multiTenantConnectionProvider,\n                                                                       CurrentProjectIdentifierResolverImpl tenantIdentifierResolver) {\n        LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\n\n        em.setPackagesToScan(\n                &quot;com....entity&quot;,\n                &quot;com....repository&quot;,\n                &quot;com....repository.impl&quot;);\n\n        em.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\n\n        Map&lt;String, Object&gt; jpaProperties = new HashMap&lt;&gt;();\n        jpaProperties.put(Environment.MULTI_TENANT_CONNECTION_PROVIDER, multiTenantConnectionProvider);\n        jpaProperties.put(Environment.MULTI_TENANT_IDENTIFIER_RESOLVER, tenantIdentifierResolver);\n        jpaProperties.put(Environment.FORMAT_SQL, true);\n\n        jpaProperties.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;none&quot;);\n        jpaProperties.put(&quot;hibernate.format_sql&quot;, true);\n        jpaProperties.put(&quot;hibernate.show_sql&quot;, false);\n        jpaProperties.put(Environment.PHYSICAL_NAMING_STRATEGY, PhysicalNamingStrategyStandardImpl.class);\n        jpaProperties.put(Environment.DIALECT, &quot;org.hibernate.dialect.MySQLDialect&quot;);\n\n        em.setJpaPropertyMap(jpaProperties);\n\n        return em;\n    }\n\n    @Bean(name = &quot;transactionManager&quot;)\n    public PlatformTransactionManager transactionManager(LocalContainerEntityManagerFactoryBean entityManagerFactoryBean) {\n        JpaTransactionManager transactionManager = new JpaTransactionManager();\n        transactionManager.setEntityManagerFactory(entityManagerFactoryBean.getObject());\n        return transactionManager;\n    }\n}\n</code></pre>\n<p>I hope this helps anyone who encounters a similar problem after upgrading to Spring Boot 3 and Hibernate 6 with a multi-tenant configuration.</p>\n"},{"tags":["javascript","java","android","react-native"],"answers":[{"tags":[],"owner":{"account_id":13075524,"reputation":19,"user_id":9447808,"display_name":"Illia"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1520280478,"creation_date":1520280478,"answer_id":49118595,"question_id":48619393,"body_markdown":"I have the same exception with 3 callbacks. If you use one or two callbacks it works fine \r\n\r\n   @ReactMethod\r\n   public void testCallback(String message, Callback c1, Callback c2)\r\n\r\nworks","title":"React Native, &#39;is not usable as a native method argument&#39;","body":"<p>I have the same exception with 3 callbacks. If you use one or two callbacks it works fine </p>\n\n<p>@ReactMethod\n   public void testCallback(String message, Callback c1, Callback c2)</p>\n\n<p>works</p>\n"},{"tags":[],"owner":{"account_id":9641923,"reputation":375,"user_id":7155874,"display_name":"Shanu Singh"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1622657872,"creation_date":1622657872,"answer_id":67810489,"question_id":48619393,"body_markdown":"This kind of error comes when you pass something inappropriate to the property. For example, I was not passing the exact format to the Image **URI** property, because of that it throws the error. This Error is very much indicative of itself.\r\n\r\nRight.\r\n\r\n    &lt;Image source = {{ uri: &#39;https://reactnative.dev/img/tiny_logo.png&#39;}}&gt;\r\n\r\nbut when you do something like this.\r\n\r\n \r\n    \r\n    &lt;Image source = {{ uri: &#39;&lt;NaN&#39;}}&gt;\r\n\r\n&gt; Mostly it happens when you get the wrong data format from the API.\r\n&gt; \r\n&gt; \r\n\r\n&gt; My answer is not suitable for this particular question, but to find\r\n&gt; out the exact title, I&#39;ve landed on this link various times, so to\r\n&gt; save others time, I would like to post this answer here.\r\n\r\n","title":"React Native, &#39;is not usable as a native method argument&#39;","body":"<p>This kind of error comes when you pass something inappropriate to the property. For example, I was not passing the exact format to the Image <strong>URI</strong> property, because of that it throws the error. This Error is very much indicative of itself.</p>\n<p>Right.</p>\n<pre><code>&lt;Image source = {{ uri: 'https://reactnative.dev/img/tiny_logo.png'}}&gt;\n</code></pre>\n<p>but when you do something like this.</p>\n<pre><code>&lt;Image source = {{ uri: '&lt;NaN'}}&gt;\n</code></pre>\n<blockquote>\n<p>Mostly it happens when you get the wrong data format from the API.</p>\n</blockquote>\n<blockquote>\n<p>My answer is not suitable for this particular question, but to find\nout the exact title, I've landed on this link various times, so to\nsave others time, I would like to post this answer here.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":9922956,"reputation":814,"user_id":9213600,"display_name":"Ali H. Kudeir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624017282,"creation_date":1624017282,"answer_id":68034725,"question_id":48619393,"body_markdown":"I encountered this issue while using Axios with formData field without converting the appended data to string format.\r\n\r\nGives errors:\r\n\r\n    const formData = new FormData();\r\n    formData.append(&lt;field_name&gt;, field_data);\r\n\r\nMust be in the form:\r\n\r\n    const formData = new FormData();\r\n    formData.append(&lt;field_name&gt;, JSON.stringify(field_data));","title":"React Native, &#39;is not usable as a native method argument&#39;","body":"<p>I encountered this issue while using Axios with formData field without converting the appended data to string format.</p>\n<p>Gives errors:</p>\n<pre><code>const formData = new FormData();\nformData.append(&lt;field_name&gt;, field_data);\n</code></pre>\n<p>Must be in the form:</p>\n<pre><code>const formData = new FormData();\nformData.append(&lt;field_name&gt;, JSON.stringify(field_data));\n</code></pre>\n"}],"owner":{"account_id":2634855,"reputation":785,"user_id":2279854,"accept_rate":62,"display_name":"Tony Lin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18694,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":3,"score":12,"last_activity_date":1699891665,"creation_date":1517823170,"question_id":48619393,"body_markdown":"I&#39;m new to React Native. While I was developing a native module, I encounter a problem with callbacks. \r\nBelow is the error message from React Native\r\n\r\n    02-05 17:43:26.387 32301-32570/com.awesomeproject2 E/ReactNativeJNI: Got JS Exception: Exception calling object as function: abc,function f1() {\r\n                                                                                   _ToastExample2.default.show(&#39;1111&#39;, _ToastExample2.default.SHORT);\r\n                                                                                 },72,73 is not usable as a native method argument (&lt;unknown file&gt;:1845)\r\n    02-05 17:43:26.387 32301-32570/com.awesomeproject2 E/ReactNativeJNI: Got JS Stack: invariant@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;minify=false:1838:26\r\n                                                                         enqueueNativeCall@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;minify=false:2259:20\r\n                                                                         fn@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;minify=false:1999:40\r\n                                                                         onBtnPress@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;minify=false:58362:32\r\n                                                                         proxiedMethod@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;minify=false:34324:37\r\n                                                                         proxiedMethod@[native code]\r\n                                                                         touchableHandlePress@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;minify=false:37170:47\r\n                                                                         touchableHandlePress@[native code]\r\n                                                                         _performSideEffectsForTransition@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;minify=false:36821:36\r\n                                                                         _performSideEffectsForTransition@[native code]\r\n                                                                         _receiveSignal@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;minify=false:36754:46\r\n                                                                         _receiveSignal@[native code]\r\n                                                                         touchableHandleResponderRelease@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;\r\n    02-05 17:43:26.393 32301-32570/com.awesomeproject2 E/unknown:ReactNative: Exception in native call\r\n                                                                              java.lang.RuntimeException: Error calling RCTEventEmitter.receiveTouches\r\n                                                                                  at com.facebook.react.bridge.queue.NativeRunnable.run(Native Method)\r\n                                                                                  at android.os.Handler.handleCallback(Handler.java:739)\r\n                                                                                  at android.os.Handler.dispatchMessage(Handler.java:95)\r\n                                                                                  at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:31)\r\n                                                                                  at android.os.Looper.loop(Looper.java:135)\r\n                                                                                  at com.facebook.react.bridge.queue.MessageQueueThreadImpl$3.run(MessageQueueThreadImpl.java:194)\r\n                                                                                  at java.lang.Thread.run(Thread.java:818)\r\n                                                                               Caused by: com.facebook.jni.CppException: Exception calling object as function: abc,function f1() {\r\n                                                                                        _ToastExample2.default.show(&#39;1111&#39;, _ToastExample2.default.SHORT);\r\n                                                                                      },72,73 is not usable as a native method argument (&lt;unknown file&gt;:1845)\r\n                                                                              \t... 7 more\r\n\r\n\r\nAnd my native module look like this\r\n\r\n    @ReactMethod\r\n    public void testCallback(String message, Callback c1, Callback c2, Callback c3) {\r\n        if (message.equals(&quot;123&quot;)) {\r\n            c1.invoke(message);\r\n        } else if (message.equals(&quot;abc&quot;)) {\r\n            c2.invoke(message);\r\n        } else {\r\n            c3.invoke(message);\r\n        }\r\n    }\r\n\r\n\r\nAnd my calling function from react\r\n\r\n    onBtnPress() {\r\n    \r\n      function f1 () {\r\n        ToastExample.show(&#39;1111&#39;, ToastExample.SHORT);\r\n      };\r\n    \r\n      function f2 () {\r\n        ToastExample.show(&#39;2222&#39;, ToastExample.SHORT);\r\n      };\r\n    \r\n      function f3 () {\r\n        ToastExample.show(&#39;3333&#39;, ToastExample.SHORT);\r\n      };\r\n      \r\n      ToastExample.testCallback(&#39;abc&#39;, f1, f2, f3);\r\n    }\r\n\r\nI have no idea that why this error is happening, can someone help me? Thanks.\r\n","title":"React Native, &#39;is not usable as a native method argument&#39;","body":"<p>I'm new to React Native. While I was developing a native module, I encounter a problem with callbacks. \nBelow is the error message from React Native</p>\n\n<pre><code>02-05 17:43:26.387 32301-32570/com.awesomeproject2 E/ReactNativeJNI: Got JS Exception: Exception calling object as function: abc,function f1() {\n                                                                               _ToastExample2.default.show('1111', _ToastExample2.default.SHORT);\n                                                                             },72,73 is not usable as a native method argument (&lt;unknown file&gt;:1845)\n02-05 17:43:26.387 32301-32570/com.awesomeproject2 E/ReactNativeJNI: Got JS Stack: invariant@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;minify=false:1838:26\n                                                                     enqueueNativeCall@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;minify=false:2259:20\n                                                                     fn@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;minify=false:1999:40\n                                                                     onBtnPress@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;minify=false:58362:32\n                                                                     proxiedMethod@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;minify=false:34324:37\n                                                                     proxiedMethod@[native code]\n                                                                     touchableHandlePress@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;minify=false:37170:47\n                                                                     touchableHandlePress@[native code]\n                                                                     _performSideEffectsForTransition@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;minify=false:36821:36\n                                                                     _performSideEffectsForTransition@[native code]\n                                                                     _receiveSignal@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;minify=false:36754:46\n                                                                     _receiveSignal@[native code]\n                                                                     touchableHandleResponderRelease@http://localhost:8081/index.delta?platform=android&amp;dev=true&amp;\n02-05 17:43:26.393 32301-32570/com.awesomeproject2 E/unknown:ReactNative: Exception in native call\n                                                                          java.lang.RuntimeException: Error calling RCTEventEmitter.receiveTouches\n                                                                              at com.facebook.react.bridge.queue.NativeRunnable.run(Native Method)\n                                                                              at android.os.Handler.handleCallback(Handler.java:739)\n                                                                              at android.os.Handler.dispatchMessage(Handler.java:95)\n                                                                              at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:31)\n                                                                              at android.os.Looper.loop(Looper.java:135)\n                                                                              at com.facebook.react.bridge.queue.MessageQueueThreadImpl$3.run(MessageQueueThreadImpl.java:194)\n                                                                              at java.lang.Thread.run(Thread.java:818)\n                                                                           Caused by: com.facebook.jni.CppException: Exception calling object as function: abc,function f1() {\n                                                                                    _ToastExample2.default.show('1111', _ToastExample2.default.SHORT);\n                                                                                  },72,73 is not usable as a native method argument (&lt;unknown file&gt;:1845)\n                                                                            ... 7 more\n</code></pre>\n\n<p>And my native module look like this</p>\n\n<pre><code>@ReactMethod\npublic void testCallback(String message, Callback c1, Callback c2, Callback c3) {\n    if (message.equals(\"123\")) {\n        c1.invoke(message);\n    } else if (message.equals(\"abc\")) {\n        c2.invoke(message);\n    } else {\n        c3.invoke(message);\n    }\n}\n</code></pre>\n\n<p>And my calling function from react</p>\n\n<pre><code>onBtnPress() {\n\n  function f1 () {\n    ToastExample.show('1111', ToastExample.SHORT);\n  };\n\n  function f2 () {\n    ToastExample.show('2222', ToastExample.SHORT);\n  };\n\n  function f3 () {\n    ToastExample.show('3333', ToastExample.SHORT);\n  };\n\n  ToastExample.testCallback('abc', f1, f2, f3);\n}\n</code></pre>\n\n<p>I have no idea that why this error is happening, can someone help me? Thanks.</p>\n"},{"tags":["java","spring","spring-boot","p6spy"],"answers":[{"tags":[],"owner":{"account_id":4897719,"reputation":546,"user_id":3946752,"accept_rate":83,"display_name":"Conrad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699891240,"creation_date":1699891240,"answer_id":77475208,"question_id":74609759,"body_markdown":"Run it before p6spy configuration:    \r\n`System.setProperty(&quot;p6spy.config.excludecategories&quot;, &quot;info,debug,result&quot;)`\r\n\r\nWhy it works? You probably have batched updates which are excluded from logging by default.\r\nThis solution is kinda ugly, but configuration of excludecategories is currently not supported in spring-boot-data-source-decorator.","title":"spring-boot-data-source-decorator with p6spy are not logging insert statements","body":"<p>Run it before p6spy configuration:<br />\n<code>System.setProperty(&quot;p6spy.config.excludecategories&quot;, &quot;info,debug,result&quot;)</code></p>\n<p>Why it works? You probably have batched updates which are excluded from logging by default.\nThis solution is kinda ugly, but configuration of excludecategories is currently not supported in spring-boot-data-source-decorator.</p>\n"},{"tags":[],"owner":{"account_id":3378723,"reputation":948,"user_id":2836301,"display_name":"Tonsic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699891507,"creation_date":1699891507,"answer_id":77475231,"question_id":74609759,"body_markdown":"I was having the same issue as you and finally discovered how to fix that.\r\n\r\nBy default, p6spy excludes some categories from logging: `info,debug,result,resultset,batch`,\r\nthrough the `spy.properties` config called `excludecategories`.\r\n\r\nThe INSERTS, at least here, are part of the `batch` category.\r\n\r\nIn my case I put in the `spy.properties` file the line:\r\n\r\n```\r\nexcludecategories=\r\n```\r\nand now it prints the INSERTS.\r\n\r\nThe documentation can be found in: https://p6spy.readthedocs.io/en/latest/configandusage.html\r\n\r\nI couldn&#39;t find if this specific property is possible to be set in the `application.properties` file. Looks like it is not supported by `spring-boot-data-source-decorator` at the moment of this writing.\r\n\r\n[]s","title":"spring-boot-data-source-decorator with p6spy are not logging insert statements","body":"<p>I was having the same issue as you and finally discovered how to fix that.</p>\n<p>By default, p6spy excludes some categories from logging: <code>info,debug,result,resultset,batch</code>,\nthrough the <code>spy.properties</code> config called <code>excludecategories</code>.</p>\n<p>The INSERTS, at least here, are part of the <code>batch</code> category.</p>\n<p>In my case I put in the <code>spy.properties</code> file the line:</p>\n<pre><code>excludecategories=\n</code></pre>\n<p>and now it prints the INSERTS.</p>\n<p>The documentation can be found in: <a href=\"https://p6spy.readthedocs.io/en/latest/configandusage.html\" rel=\"nofollow noreferrer\">https://p6spy.readthedocs.io/en/latest/configandusage.html</a></p>\n<p>I couldn't find if this specific property is possible to be set in the <code>application.properties</code> file. Looks like it is not supported by <code>spring-boot-data-source-decorator</code> at the moment of this writing.</p>\n<p>[]s</p>\n"}],"owner":{"account_id":383332,"reputation":1147,"user_id":739115,"accept_rate":54,"display_name":"user739115"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":415,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1699891507,"creation_date":1669702079,"question_id":74609759,"body_markdown":"I am using p6spy to log the sql statements.we are using springboot/hibernate for Java ORM mapping.I see only select statements are getting loggged in spy.log.when insert statemnets are executing in the code I see only commmit is coming in the log but insert statements are not coming.\r\n\r\n    |connection|commit||\r\n    |connection|statement | select * from emp_id where id=1234\r\n\r\nhttps://github.com/gavlyukovskiy/spring-boot-data-source-decorator\r\n\r\n    # Register P6LogFactory to log JDBC events\r\n    decorator.datasource.p6spy.enable-logging=true\r\n    # Use com.p6spy.engine.spy.appender.MultiLineFormat instead of com.p6spy.engine.spy.appender.SingleLineFormat\r\n    decorator.datasource.p6spy.multiline=true\r\n    # Use logging for default listeners [slf4j, sysout, file, custom]\r\n    decorator.datasource.p6spy.logging=file\r\n    # Log file to use (only with logging=file)\r\n    decorator.datasource.p6spy.log-file=spy.log\r\n    # Class file to use (only with logging=custom). The class must implement com.p6spy.engine.spy.appender.FormattedLogger\r\n    decorator.datasource.p6spy.custom-appender-class=my.custom.LoggerClass\r\n    # Custom log format, if specified com.p6spy.engine.spy.appender.CustomLineFormat will be used with this log format\r\n    decorator.datasource.p6spy.log-format=\r\n    # Use regex pattern to filter log messages. If specified only matched messages will be logged.\r\n    decorator.datasource.p6spy.log-filter.pattern=\r\n    # Report the effective sql string (with &#39;?&#39; replaced with real values) to tracing systems.\r\n    # NOTE this setting does not affect the logging message.\r\n    decorator.datasource.p6spy.tracing.include-parameter-values=true","title":"spring-boot-data-source-decorator with p6spy are not logging insert statements","body":"<p>I am using p6spy to log the sql statements.we are using springboot/hibernate for Java ORM mapping.I see only select statements are getting loggged in spy.log.when insert statemnets are executing in the code I see only commmit is coming in the log but insert statements are not coming.</p>\n<pre><code>|connection|commit||\n|connection|statement | select * from emp_id where id=1234\n</code></pre>\n<p><a href=\"https://github.com/gavlyukovskiy/spring-boot-data-source-decorator\" rel=\"nofollow noreferrer\">https://github.com/gavlyukovskiy/spring-boot-data-source-decorator</a></p>\n<pre><code># Register P6LogFactory to log JDBC events\ndecorator.datasource.p6spy.enable-logging=true\n# Use com.p6spy.engine.spy.appender.MultiLineFormat instead of com.p6spy.engine.spy.appender.SingleLineFormat\ndecorator.datasource.p6spy.multiline=true\n# Use logging for default listeners [slf4j, sysout, file, custom]\ndecorator.datasource.p6spy.logging=file\n# Log file to use (only with logging=file)\ndecorator.datasource.p6spy.log-file=spy.log\n# Class file to use (only with logging=custom). The class must implement com.p6spy.engine.spy.appender.FormattedLogger\ndecorator.datasource.p6spy.custom-appender-class=my.custom.LoggerClass\n# Custom log format, if specified com.p6spy.engine.spy.appender.CustomLineFormat will be used with this log format\ndecorator.datasource.p6spy.log-format=\n# Use regex pattern to filter log messages. If specified only matched messages will be logged.\ndecorator.datasource.p6spy.log-filter.pattern=\n# Report the effective sql string (with '?' replaced with real values) to tracing systems.\n# NOTE this setting does not affect the logging message.\ndecorator.datasource.p6spy.tracing.include-parameter-values=true\n</code></pre>\n"},{"tags":["java","spring","spring-boot","azure","spring-cloud-azure"],"answers":[{"tags":[],"owner":{"account_id":3894930,"reputation":4026,"user_id":3224238,"display_name":"Paizo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699884302,"creation_date":1699884302,"answer_id":77474460,"question_id":77459062,"body_markdown":"for version compatibility is better to check spring boot/spring cloud **and** azure sdk bom version matrix\r\n\r\nSpring boot/cloud matrix can be found here https://spring.io/projects/spring-cloud\r\n\r\nfor azure bom https://github.com/Azure/azure-sdk-for-java/wiki/Spring-Versions-Mapping\r\n\r\nyou should end up with a similar code snippet in your `pom.xml` file:\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.azure&lt;/groupId&gt;\r\n                &lt;artifactId&gt;azure-sdk-bom&lt;/artifactId&gt;\r\n                &lt;version&gt;${azure-bom.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\nwhere the version variables depends on your setup and the matrix mentioned above","title":"azure-spring-boot-starter-keyvault-secrets autoconfiguration of SecretClient does not work with spring-boot 2.7.17","body":"<p>for version compatibility is better to check spring boot/spring cloud <strong>and</strong> azure sdk bom version matrix</p>\n<p>Spring boot/cloud matrix can be found here <a href=\"https://spring.io/projects/spring-cloud\" rel=\"nofollow noreferrer\">https://spring.io/projects/spring-cloud</a></p>\n<p>for azure bom <a href=\"https://github.com/Azure/azure-sdk-for-java/wiki/Spring-Versions-Mapping\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-sdk-for-java/wiki/Spring-Versions-Mapping</a></p>\n<p>you should end up with a similar code snippet in your <code>pom.xml</code> file:</p>\n<pre><code>&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.azure&lt;/groupId&gt;\n            &lt;artifactId&gt;azure-sdk-bom&lt;/artifactId&gt;\n            &lt;version&gt;${azure-bom.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n<p>where the version variables depends on your setup and the matrix mentioned above</p>\n"},{"tags":[],"owner":{"account_id":4081389,"reputation":79,"user_id":3351796,"display_name":"michalavis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699891109,"creation_date":1699891109,"answer_id":77475192,"question_id":77459062,"body_markdown":"I was able to solve this by looking at the this class - \r\n\r\n    com.azure.spring.cloud.autoconfigure.keyvault.secrets.AzureKeyVaultSecretAutoConfiguration\r\n\r\nthere is **@ConditionOnAnyProperty** annotation which checks the presence of \r\n`&quot;spring.cloud.azure.keyvault.secret.endpoint&quot;` in application.yml\r\n \r\nSo apparently **property-sources[0]** is unnecessary for this version, which is quite strange, because it was included in every tutorial and documentation on azure and version **4.12.0** is currently one of the latest for spring-boot below 3.0.0\r\n\r\nAnyway - I might have thought earlier to look into the classes that configure this automatically, but at least now it works correctly and maybe it will help someone solve a similar problem more quickly.","title":"azure-spring-boot-starter-keyvault-secrets autoconfiguration of SecretClient does not work with spring-boot 2.7.17","body":"<p>I was able to solve this by looking at the this class -</p>\n<pre><code>com.azure.spring.cloud.autoconfigure.keyvault.secrets.AzureKeyVaultSecretAutoConfiguration\n</code></pre>\n<p>there is <strong>@ConditionOnAnyProperty</strong> annotation which checks the presence of\n<code>&quot;spring.cloud.azure.keyvault.secret.endpoint&quot;</code> in application.yml</p>\n<p>So apparently <strong>property-sources[0]</strong> is unnecessary for this version, which is quite strange, because it was included in every tutorial and documentation on azure and version <strong>4.12.0</strong> is currently one of the latest for spring-boot below 3.0.0</p>\n<p>Anyway - I might have thought earlier to look into the classes that configure this automatically, but at least now it works correctly and maybe it will help someone solve a similar problem more quickly.</p>\n"}],"owner":{"account_id":4081389,"reputation":79,"user_id":3351796,"display_name":"michalavis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77475192,"answer_count":2,"score":0,"last_activity_date":1699891109,"creation_date":1699609745,"question_id":77459062,"body_markdown":"I set up connection between spring-boot and AKV and everything works fine when @Bean SecretClient is added explicitly. \r\nI have looked across various code samples and for azure-spring-boot-starter-keyvault-secrets this should work automatically and set @Bean should not be necessary. \r\n\r\nThis is version of spring-boot and spring-cloud-azure I use\r\n\r\n    &lt;spring.boot.version&gt;2.7.17&lt;/spring.boot.version&gt;\r\n\t&lt;spring-cloud-azure.version&gt;4.12.0&lt;/spring-cloud-azure.version&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-azure-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud-azure.version}&lt;/version&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-cloud-azure-starter-keyvault&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nand this is my application.yml configuration\r\n\r\n    spring:\r\n      cloud:\r\n        azure:\r\n          keyvault:\r\n            secret:\r\n              property-sources[0]:\r\n                endpoint: ${ENDPOINT_URL}\r\n                credential:\r\n                  client-secret: ${AZURE_CLIENT_SECRET}\r\n                  client-id: ${AZURE_CLIENT_ID}\r\n                profile:\r\n                  tenant-id: ${AZURE_TENANT_ID}\r\n\r\nIf I remove @Bean from my config\r\n\r\n    @Bean\r\n    public SecretClient secretClient() {\r\n        return new SecretClientBuilder()\r\n                .vaultUrl(&quot;akv-url&quot;)\r\n                .credential(new DefaultAzureCredentialBuilder().build())\r\n                .buildClient();\r\n    }\r\n\r\nI see spring bean exception:\r\n\r\n    Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.azure.security.keyvault.secrets.SecretClient&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\r\nNo idea what the problem is, I checked for version compatibility and they should be compatible. \r\nAny ideas?\r\n","title":"azure-spring-boot-starter-keyvault-secrets autoconfiguration of SecretClient does not work with spring-boot 2.7.17","body":"<p>I set up connection between spring-boot and AKV and everything works fine when @Bean SecretClient is added explicitly.\nI have looked across various code samples and for azure-spring-boot-starter-keyvault-secrets this should work automatically and set @Bean should not be necessary.</p>\n<p>This is version of spring-boot and spring-cloud-azure I use</p>\n<pre><code>&lt;spring.boot.version&gt;2.7.17&lt;/spring.boot.version&gt;\n&lt;spring-cloud-azure.version&gt;4.12.0&lt;/spring-cloud-azure.version&gt;\n\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-azure-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-cloud-azure.version}&lt;/version&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-azure-starter-keyvault&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and this is my application.yml configuration</p>\n<pre><code>spring:\n  cloud:\n    azure:\n      keyvault:\n        secret:\n          property-sources[0]:\n            endpoint: ${ENDPOINT_URL}\n            credential:\n              client-secret: ${AZURE_CLIENT_SECRET}\n              client-id: ${AZURE_CLIENT_ID}\n            profile:\n              tenant-id: ${AZURE_TENANT_ID}\n</code></pre>\n<p>If I remove @Bean from my config</p>\n<pre><code>@Bean\npublic SecretClient secretClient() {\n    return new SecretClientBuilder()\n            .vaultUrl(&quot;akv-url&quot;)\n            .credential(new DefaultAzureCredentialBuilder().build())\n            .buildClient();\n}\n</code></pre>\n<p>I see spring bean exception:</p>\n<pre><code>Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.azure.security.keyvault.secrets.SecretClient' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n</code></pre>\n<p>No idea what the problem is, I checked for version compatibility and they should be compatible.\nAny ideas?</p>\n"},{"tags":["java","spring-boot","swagger","openapi","springdoc"],"comments":[{"owner":{"account_id":1912441,"reputation":2961,"user_id":1725871,"accept_rate":88,"display_name":"JoSSte"},"score":0,"creation_date":1699867451,"post_id":77472819,"comment_id":136580282,"body_markdown":"have you looked at whether the `@Hidden` annotation would fix your issue?  https://github.com/swagger-api/swagger-core/wiki/Swagger-2.X---Annotations#hidden","body":"have you looked at whether the <code>@Hidden</code> annotation would fix your issue?  <a href=\"https://github.com/swagger-api/swagger-core/wiki/Swagger-2.X---Annotations#hidden\" rel=\"nofollow noreferrer\">github.com/swagger-api/swagger-core/wiki/&hellip;</a>"},{"owner":{"account_id":28637424,"reputation":1,"user_id":21927293,"display_name":"ismala"},"score":0,"creation_date":1699868207,"post_id":77472819,"comment_id":136580399,"body_markdown":"I have to provide two definition, so @Hidden will hide the endpoints for all groups i think.","body":"I have to provide two definition, so @Hidden will hide the endpoints for all groups i think."}],"answers":[{"tags":[],"owner":{"account_id":11698906,"reputation":1250,"user_id":8564731,"display_name":"Jeremy Fiel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699890489,"creation_date":1699890489,"answer_id":77475130,"question_id":77472819,"body_markdown":"these endpoints are ambiguous because `/query/filter` and `/query/{template}` can resolve to the same endpoint. what are you trying to do with the `/filter` that can&#39;t be done with the template path? \r\n\r\nFrom the looks of it, using a path `/query` is already causing you some issues where you should be using the query parameters (`?`) and then adding query parameter definitions in your OpenAPI description\r\n\r\nsomething like this.. `api/v2/cars?filter=`\r\n\r\nThe Specification defines the behavior you have shown as non-compliant.\r\n\r\n&gt; Templated paths with the same hierarchy but different templated names MUST NOT exist as they are identical. In case of ambiguous matching, it’s up to the tooling to decide which one to use\r\n_https://spec.openapis.org/oas/v3.0.3#paths-object_","title":"Exclude endpoints with brackets in swagger-ui","body":"<p>these endpoints are ambiguous because <code>/query/filter</code> and <code>/query/{template}</code> can resolve to the same endpoint. what are you trying to do with the <code>/filter</code> that can't be done with the template path?</p>\n<p>From the looks of it, using a path <code>/query</code> is already causing you some issues where you should be using the query parameters (<code>?</code>) and then adding query parameter definitions in your OpenAPI description</p>\n<p>something like this.. <code>api/v2/cars?filter=</code></p>\n<p>The Specification defines the behavior you have shown as non-compliant.</p>\n<blockquote>\n<p>Templated paths with the same hierarchy but different templated names MUST NOT exist as they are identical. In case of ambiguous matching, it’s up to the tooling to decide which one to use\n<em><a href=\"https://spec.openapis.org/oas/v3.0.3#paths-object\" rel=\"nofollow noreferrer\">https://spec.openapis.org/oas/v3.0.3#paths-object</a></em></p>\n</blockquote>\n"}],"owner":{"account_id":28637424,"reputation":1,"user_id":21927293,"display_name":"ismala"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699890489,"creation_date":1699867084,"question_id":77472819,"body_markdown":"Let say i  have the two following endpoints : \r\n\r\n    /api/v2/query/{param1}\r\n\r\n    /api/v2/query/filter \r\n\r\nI want to have in my swagger-ui only : `/api/v2/query/{param1}`\r\n\r\nSo i tried to filter :\r\n```java\r\n@Bean\r\npublic GroupedOpenApi adminApi() {\r\n    return GroupedOpenApi.builder().group(&quot;filteredGroup&quot;).pathsToMatch(&quot;/api/v2/query/{param1}&quot;).pathsToExclude(&quot;/api/v2/query/filter&quot;).build();\r\n}\r\n```\r\n\r\nThe issue is that i still see this endpoints : \r\n\r\n    /api/v2/query/filter \r\n\r\n\r\nHow can I exclude it ? I think `{param1}` acts like `*`","title":"Exclude endpoints with brackets in swagger-ui","body":"<p>Let say i  have the two following endpoints :</p>\n<pre><code>/api/v2/query/{param1}\n\n/api/v2/query/filter \n</code></pre>\n<p>I want to have in my swagger-ui only : <code>/api/v2/query/{param1}</code></p>\n<p>So i tried to filter :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic GroupedOpenApi adminApi() {\n    return GroupedOpenApi.builder().group(&quot;filteredGroup&quot;).pathsToMatch(&quot;/api/v2/query/{param1}&quot;).pathsToExclude(&quot;/api/v2/query/filter&quot;).build();\n}\n</code></pre>\n<p>The issue is that i still see this endpoints :</p>\n<pre><code>/api/v2/query/filter \n</code></pre>\n<p>How can I exclude it ? I think <code>{param1}</code> acts like <code>*</code></p>\n"},{"tags":["java","spring-boot","keycloak"],"comments":[{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1699773544,"post_id":77467992,"comment_id":136571840,"body_markdown":"Please format this illegible mess properly.","body":"Please format this illegible mess properly."},{"owner":{"account_id":23800054,"reputation":9,"user_id":17810408,"display_name":"Zakariya Iqbal"},"score":0,"creation_date":1699774265,"post_id":77467992,"comment_id":136571885,"body_markdown":"@user207421 done formating","body":"@user207421 done formating"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1699784218,"post_id":77467992,"comment_id":136572618,"body_markdown":"What&#39;s the type of `KeycloakAdminClientUtils.realmResource().users()`?","body":"What&#39;s the type of <code>KeycloakAdminClientUtils.realmResource().users()</code>?"},{"owner":{"account_id":23800054,"reputation":9,"user_id":17810408,"display_name":"Zakariya Iqbal"},"score":0,"creation_date":1699789565,"post_id":77467992,"comment_id":136573086,"body_markdown":"@tgdavies KeycloakAdminClientUtils is a class which contains method RealmResource","body":"@tgdavies KeycloakAdminClientUtils is a class which contains method RealmResource"},{"owner":{"account_id":23800054,"reputation":9,"user_id":17810408,"display_name":"Zakariya Iqbal"},"score":0,"creation_date":1699860386,"post_id":77467992,"comment_id":136579251,"body_markdown":"@tgdavies the type of KeycloakAdminClientUtils.realmResource().users() is UsersResource.","body":"@tgdavies the type of KeycloakAdminClientUtils.realmResource().users() is UsersResource."}],"answers":[{"tags":[],"owner":{"account_id":461547,"reputation":3094,"user_id":863311,"accept_rate":62,"display_name":"Simon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699890332,"creation_date":1699890332,"answer_id":77475111,"question_id":77467992,"body_markdown":"The issue is the line\r\n\r\n`KeycloakPrincipal principal = (KeycloakPrincipal) SecurityContextHolder.getContext() .getAuthentication().getPrincipal();`\r\n\r\nwhere the authentication principal is a String. There could be several reasons for this, you need to decide what you want your code to do if principal is not a KeycloakPrincipal. For starters, how about changing the above line to a conditional\r\n\r\n    Authentication auth = SecurityContextHolder.getContext().getAuthentication();\r\n    \r\n    if ((auth != null) &amp;&amp; auth.isAuthenticated() &amp;&amp; (auth.getPrincipal() instanceof KeycloakPrincipal)) {\r\n        return (KeycloakPrincipal) auth.getPrincipal();\r\n    }\r\n    throw new IllegalStateException(&quot;Expected a KeycloakPrincipal but instead got &quot; + auth);\r\n\r\nWith your current code you&#39;ll then run into that IllegalStateException, but we don&#39;t know if a string principal is a possible, but invalid state in your application (e.g. &quot;anonymous&quot;), or if your security setup is broken and a string principal should never occur.","title":"class java.lang.String cannot be cast to class org.keycloak.KeycloakPrincipal","body":"<p>The issue is the line</p>\n<p><code>KeycloakPrincipal principal = (KeycloakPrincipal) SecurityContextHolder.getContext() .getAuthentication().getPrincipal();</code></p>\n<p>where the authentication principal is a String. There could be several reasons for this, you need to decide what you want your code to do if principal is not a KeycloakPrincipal. For starters, how about changing the above line to a conditional</p>\n<pre><code>Authentication auth = SecurityContextHolder.getContext().getAuthentication();\n\nif ((auth != null) &amp;&amp; auth.isAuthenticated() &amp;&amp; (auth.getPrincipal() instanceof KeycloakPrincipal)) {\n    return (KeycloakPrincipal) auth.getPrincipal();\n}\nthrow new IllegalStateException(&quot;Expected a KeycloakPrincipal but instead got &quot; + auth);\n</code></pre>\n<p>With your current code you'll then run into that IllegalStateException, but we don't know if a string principal is a possible, but invalid state in your application (e.g. &quot;anonymous&quot;), or if your security setup is broken and a string principal should never occur.</p>\n"}],"owner":{"account_id":23800054,"reputation":9,"user_id":17810408,"display_name":"Zakariya Iqbal"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1699890332,"creation_date":1699771582,"question_id":77467992,"body_markdown":"I am encountering the ClassCastException when trying to retrieve Keycloak User Resource.\r\n\r\n\r\n\r\n     private void updateMerchantInKeycloak(String keycloakId, Merchant merchantDTO) { \r\n    log.info(&quot;updateMerchantInKeycloak : keycloakId : &quot; + keycloakId + &quot;, merchantDTO: &quot; + merchantDTO); \r\n    UserResource userResource = KeycloakAdminClientUtils.realmResource().users().get(String.valueOf(keycloakId)); \r\n           log.info(&quot;KeycloakAdminClientUtils.realmResource(): &quot; + KeycloakAdminClientUtils.realmResource()\r\n                + &quot;\\nKeycloakAdminClientUtils.realmResource().users()&quot; +\r\n        KeycloakAdminClientUtils.realmResource().users());\r\n        log.info(&quot;updateMerchantInKeycloak got userResource : {}&quot;, userResource);\r\n        UserRepresentation userRep = userResource.toRepresentation();\r\n        log.info(&quot;updateMerchantInKeycloak got UserRepresentation&quot;);\r\n        if (Objects.nonNull(merchantDTO.getEmail()) &amp;&amp; !&quot;&quot;.equalsIgnoreCase(merchantDTO.getEmail())) {\r\n          userRep.setEmail(merchantDTO.getEmail());\r\n        }\r\n    \r\n        if (Objects.nonNull(merchantDTO.getStatus()) &amp;&amp;!&quot;&quot;.equalsIgnoreCase(merchantDTO.getStatus())) {\r\n          if (merchantDTO.getStatus().equalsIgnoreCase(Constants.ACTIVE)) {\r\n            userRep.setEnabled(true);\r\n    \r\n          } else if (merchantDTO.getStatus().equalsIgnoreCase(Constants.SUSPENDED)) {\r\n            userRep.setEnabled(false);\r\n          }\r\n        }\r\n        if (Objects.nonNull(merchantDTO.getRegisteredMobileNumber())\r\n                &amp;&amp; !&quot;&quot;.equalsIgnoreCase(merchantDTO.getRegisteredMobileNumber())) {\r\n          userRep\r\n                  .getAttributes()\r\n                  .get(Constants.MOBILE_NUMBER)\r\n                  .set(0, merchantDTO.getRegisteredMobileNumber());\r\n        }\r\n    }`\r\n\r\n The error occurs when code attempt to retieve the user Resource: \r\n\r\n`KeycloakAdminClientUtils.realmResource().users().get(String.valueOf(keycloakId));&#160;`\r\n This line is throwing a java.lang.ClassCastException between java.lang.String and org.keycloak.KeycloakPrincipal.\r\n\r\n here is the code of KeycloakAdminClientUtils: \r\n`KeycloakPrincipal principal = (KeycloakPrincipal) SecurityContextHolder.getContext() .getAuthentication().getPrincipal();`\r\n\r\n I&#39;ve ensured that the SecurityContextHolder.getContext().getAuthentication().getPrincipal() should return a KeycloakPrincipal, but it seems to be returning a String, causing the ClassCastException. \r\n\r\n**stack trace**:&#160;ERROR GlobalRestExceptionHandler : class java.lang.String cannot be cast to class org.keycloak.KeycloakPrincipal (java.lang.String is in module java.base of loader &#39;bootstrap&#39;; org.keycloak.KeycloakPrincipal is in unnamed module of loader org.springframework.boot.loader.LaunchedURLCla I&#39;m seeking guidance on how to resolve the error. \r\n\r\n\r\nI tried by replacing the line&#160;KeycloakAdminClientUtils.realmResource().users().get(String.valueOf(keycloakId));. with the line KeycloakAdminClientUtils.realmResource().users().get(keycloakId); but still the same error occurs. Note: here keycloakId is String.\r\n","title":"class java.lang.String cannot be cast to class org.keycloak.KeycloakPrincipal","body":"<p>I am encountering the ClassCastException when trying to retrieve Keycloak User Resource.</p>\n<pre><code> private void updateMerchantInKeycloak(String keycloakId, Merchant merchantDTO) { \nlog.info(&quot;updateMerchantInKeycloak : keycloakId : &quot; + keycloakId + &quot;, merchantDTO: &quot; + merchantDTO); \nUserResource userResource = KeycloakAdminClientUtils.realmResource().users().get(String.valueOf(keycloakId)); \n       log.info(&quot;KeycloakAdminClientUtils.realmResource(): &quot; + KeycloakAdminClientUtils.realmResource()\n            + &quot;\\nKeycloakAdminClientUtils.realmResource().users()&quot; +\n    KeycloakAdminClientUtils.realmResource().users());\n    log.info(&quot;updateMerchantInKeycloak got userResource : {}&quot;, userResource);\n    UserRepresentation userRep = userResource.toRepresentation();\n    log.info(&quot;updateMerchantInKeycloak got UserRepresentation&quot;);\n    if (Objects.nonNull(merchantDTO.getEmail()) &amp;&amp; !&quot;&quot;.equalsIgnoreCase(merchantDTO.getEmail())) {\n      userRep.setEmail(merchantDTO.getEmail());\n    }\n\n    if (Objects.nonNull(merchantDTO.getStatus()) &amp;&amp;!&quot;&quot;.equalsIgnoreCase(merchantDTO.getStatus())) {\n      if (merchantDTO.getStatus().equalsIgnoreCase(Constants.ACTIVE)) {\n        userRep.setEnabled(true);\n\n      } else if (merchantDTO.getStatus().equalsIgnoreCase(Constants.SUSPENDED)) {\n        userRep.setEnabled(false);\n      }\n    }\n    if (Objects.nonNull(merchantDTO.getRegisteredMobileNumber())\n            &amp;&amp; !&quot;&quot;.equalsIgnoreCase(merchantDTO.getRegisteredMobileNumber())) {\n      userRep\n              .getAttributes()\n              .get(Constants.MOBILE_NUMBER)\n              .set(0, merchantDTO.getRegisteredMobileNumber());\n    }\n}`\n</code></pre>\n<p>The error occurs when code attempt to retieve the user Resource:</p>\n<p><code>KeycloakAdminClientUtils.realmResource().users().get(String.valueOf(keycloakId)); </code>\nThis line is throwing a java.lang.ClassCastException between java.lang.String and org.keycloak.KeycloakPrincipal.</p>\n<p>here is the code of KeycloakAdminClientUtils:\n<code>KeycloakPrincipal principal = (KeycloakPrincipal) SecurityContextHolder.getContext() .getAuthentication().getPrincipal();</code></p>\n<p>I've ensured that the SecurityContextHolder.getContext().getAuthentication().getPrincipal() should return a KeycloakPrincipal, but it seems to be returning a String, causing the ClassCastException.</p>\n<p><strong>stack trace</strong>: ERROR GlobalRestExceptionHandler : class java.lang.String cannot be cast to class org.keycloak.KeycloakPrincipal (java.lang.String is in module java.base of loader 'bootstrap'; org.keycloak.KeycloakPrincipal is in unnamed module of loader org.springframework.boot.loader.LaunchedURLCla I'm seeking guidance on how to resolve the error.</p>\n<p>I tried by replacing the line KeycloakAdminClientUtils.realmResource().users().get(String.valueOf(keycloakId));. with the line KeycloakAdminClientUtils.realmResource().users().get(keycloakId); but still the same error occurs. Note: here keycloakId is String.</p>\n"},{"tags":["java","querydsl"],"comments":[{"owner":{"account_id":2508516,"reputation":27879,"user_id":2181514,"display_name":"freedomn-m"},"score":0,"creation_date":1699872204,"post_id":77472654,"comment_id":136581056,"body_markdown":"If you&#39;d like a useful response, you might consider reviewing your tags.  People tend to only look at questions they have a vested interested in - specifically your [tag:QueryDSL] experts *probably* won&#39;t be looking at [tag:jquery] which is for manipulating web pages.","body":"If you&#39;d like a useful response, you might consider reviewing your tags.  People tend to only look at questions they have a vested interested in - specifically your <a href=\"https://stackoverflow.com/questions/tagged/querydsl\">querydsl</a> experts <i>probably</i> won&#39;t be looking at <a href=\"https://stackoverflow.com/questions/tagged/jquery\">jquery</a> which is for manipulating web pages."},{"owner":{"account_id":216950,"reputation":20103,"user_id":472495,"accept_rate":92,"display_name":"halfer"},"score":0,"creation_date":1700305863,"post_id":77472654,"comment_id":136639934,"body_markdown":"Rulong, could you make a start on this? Do you have a bare-bones Java program to run a simple `SELECT * FROM mytable` query using the library you are referring to?","body":"Rulong, could you make a start on this? Do you have a bare-bones Java program to run a simple <code>SELECT * FROM mytable</code> query using the library you are referring to?"}],"owner":{"account_id":29889891,"reputation":9,"user_id":22906307,"display_name":"Rulong Ma"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1699890018,"creation_date":1699865246,"question_id":77472654,"body_markdown":"How to convert the following sql into QueryDSL form?\r\n\r\n```\r\nSELECT user.name,la.library_id,l.library_name,lr.coun\r\nFROM library_admin la\r\nLEFT JOIN user on la.user_id = user.id\r\nleft join library l on la.library_id = l.id \r\nleft join (SELECT lend_admin_id ,COUNT(lend_admin_id) coun FROM lend_record\r\n         GROUP BY apply_status, lend_admin_id\r\n\t\t HAVING apply_status = &#39;APPROVED&#39;) lr\r\n\t\ton lr.lend_admin_id = la.user_id\r\n\r\norder by la.library_id; \r\n```\r\n","title":"How to convert the following sql into QueryDSL form?","body":"<p>How to convert the following sql into QueryDSL form?</p>\n<pre><code>SELECT user.name,la.library_id,l.library_name,lr.coun\nFROM library_admin la\nLEFT JOIN user on la.user_id = user.id\nleft join library l on la.library_id = l.id \nleft join (SELECT lend_admin_id ,COUNT(lend_admin_id) coun FROM lend_record\n         GROUP BY apply_status, lend_admin_id\n         HAVING apply_status = 'APPROVED') lr\n        on lr.lend_admin_id = la.user_id\n\norder by la.library_id; \n</code></pre>\n"},{"tags":["java","static","sonarqube","try-with-resources","autocloseable"],"comments":[{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1699633751,"post_id":77461477,"comment_id":136560733,"body_markdown":"Register a shutdown hook to close it. That said, depending on what the `AutoCloseable` **is**, it might not be worth the effort, because most resources and native resources will be closed and discarded anyway once the application exits. Only if it is a resource with a remote peer (e.g. a database connection), it might be advisable to close it, so the remote can also clean up without delay. Alternatively, you need to rewrite your code to make the auto-closeable an instance field that is part of a class that is started by the main method, and closed by the main once it exits.","body":"Register a shutdown hook to close it. That said, depending on what the <code>AutoCloseable</code> <b>is</b>, it might not be worth the effort, because most resources and native resources will be closed and discarded anyway once the application exits. Only if it is a resource with a remote peer (e.g. a database connection), it might be advisable to close it, so the remote can also clean up without delay. Alternatively, you need to rewrite your code to make the auto-closeable an instance field that is part of a class that is started by the main method, and closed by the main once it exits."},{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":4,"creation_date":1699633961,"post_id":77461477,"comment_id":136560762,"body_markdown":"Also, SonarQube is just a tool to warn you about potential issues using heuristics. If you can provide a good reason why it doesn&#39;t matter, there should be no problem to ignore its suggestions.","body":"Also, SonarQube is just a tool to warn you about potential issues using heuristics. If you can provide a good reason why it doesn&#39;t matter, there should be no problem to ignore its suggestions."},{"owner":{"account_id":3967710,"reputation":1462,"user_id":3273130,"display_name":"Bolpat"},"score":0,"creation_date":1699634725,"post_id":77461477,"comment_id":136560897,"body_markdown":"Didn’t know about shutdown hooks. I’ll look into that.","body":"Didn’t know about shutdown hooks. I’ll look into that."},{"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1699638652,"post_id":77461477,"comment_id":136561456,"body_markdown":"@MarkRotteveel that is really bad advice. It&#39;s always wrong to do that, effectively. There are only two options: [1] On system shutdown your resource is cleaned up automatically without the need to run any code at all, or [2] a horribly broken disaster of a program: If someone trips over a powercable, or hardkills your app, your app is now terminally corrupted and can only be salvaged with a complete reinstall, or, the OS must be rebooted. Even making that shutdown hook is just opening the door to writing bad code.","body":"@MarkRotteveel that is really bad advice. It&#39;s always wrong to do that, effectively. There are only two options: [1] On system shutdown your resource is cleaned up automatically without the need to run any code at all, or [2] a horribly broken disaster of a program: If someone trips over a powercable, or hardkills your app, your app is now terminally corrupted and can only be salvaged with a complete reinstall, or, the OS must be rebooted. Even making that shutdown hook is just opening the door to writing bad code."},{"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1699638728,"post_id":77461477,"comment_id":136561468,"body_markdown":"Fortunately, all relevant resources actually are &#39;nice&#39; - if your JVM quits on you, they are just closed, nicely. There is __no need__ to use a shutdown hook to close your files, your network sockets, your jdbc connection objects. Note that if you &#39;nicely&#39; ask a JVM to quit (`kill` without the `-9`, or `System.exit(0)`), __none of your `finally` blocks actually run__ and `close()` isn&#39;t called on anything you have open inside a try-with block. Intentionally. Because there is no need, and it would in fact be a bad idea to try.","body":"Fortunately, all relevant resources actually are &#39;nice&#39; - if your JVM quits on you, they are just closed, nicely. There is <b>no need</b> to use a shutdown hook to close your files, your network sockets, your jdbc connection objects. Note that if you &#39;nicely&#39; ask a JVM to quit (<code>kill</code> without the <code>-9</code>, or <code>System.exit(0)</code>), <b>none of your <code>finally</code> blocks actually run</b> and <code>close()</code> isn&#39;t called on anything you have open inside a try-with block. Intentionally. Because there is no need, and it would in fact be a bad idea to try."},{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1699701945,"post_id":77461477,"comment_id":136566392,"body_markdown":"@rzwitserloot Could you identify exactly which part of my comments were &quot;bad advice&quot; as I&#39;m curious exactly what you&#39;re objecting to.","body":"@rzwitserloot Could you identify exactly which part of my comments were &quot;bad advice&quot; as I&#39;m curious exactly what you&#39;re objecting to."},{"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1699728872,"post_id":77461477,"comment_id":136569057,"body_markdown":"The notion of making shutdown hooks to close resources is either [A] useless (exiting the JVM entirely closes the resource, properly, reliably, every time), or [B] is actually useful, but that means the resource is badly designed (it is a resource which will corrupt an OS or app installation on core dumps and power cycles). Remember ye olde file systems that required &#39;cleaning&#39;? That&#39;s a bad design. Modern journaling file systems? That&#39;s a good design. Your comment suggests a thing that has no purpose other than to prop up bad designs.","body":"The notion of making shutdown hooks to close resources is either [A] useless (exiting the JVM entirely closes the resource, properly, reliably, every time), or [B] is actually useful, but that means the resource is badly designed (it is a resource which will corrupt an OS or app installation on core dumps and power cycles). Remember ye olde file systems that required &#39;cleaning&#39;? That&#39;s a bad design. Modern journaling file systems? That&#39;s a good design. Your comment suggests a thing that has no purpose other than to prop up bad designs."},{"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1699728935,"post_id":77461477,"comment_id":136569069,"body_markdown":"@MarkRotteveel It&#39;s a bit of a leap perhaps, but a programming technique that has no purpose beyond propping up bad designs is, itself, also &#39;bad&#39; - something to avoid, something to write scanners for and eliminate, and _definitely_ something __not__ to teach others.","body":"@MarkRotteveel It&#39;s a bit of a leap perhaps, but a programming technique that has no purpose beyond propping up bad designs is, itself, also &#39;bad&#39; - something to avoid, something to write scanners for and eliminate, and <i>definitely</i> something <b>not</b> to teach others."},{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1699785363,"post_id":77461477,"comment_id":136572701,"body_markdown":"@rzwitserloot But exiting the JVM doesn&#39;t necessarily close resources properly and reliably. It depends on the type of resource. If it is fully in-process, or something like a file handle, then yes, but if it has a remote peer that itself holds significant resources and might not (or with a long delay) detect that the its peer process terminated, or requires a special signal to terminate cleanly, then you will need to do something. And no, using shutdown hooks might not be ideal, but in some cases it might be the last-ditch effort that you need.","body":"@rzwitserloot But exiting the JVM doesn&#39;t necessarily close resources properly and reliably. It depends on the type of resource. If it is fully in-process, or something like a file handle, then yes, but if it has a remote peer that itself holds significant resources and might not (or with a long delay) detect that the its peer process terminated, or requires a special signal to terminate cleanly, then you will need to do something. And no, using shutdown hooks might not be ideal, but in some cases it might be the last-ditch effort that you need."},{"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1699793957,"post_id":77461477,"comment_id":136573451,"body_markdown":"_doesn&#39;t necessarily close resources properly and reliably._ - Yes it does. Unless it&#39;s a resource you wrote (not provided by `java.*`) and it is badly designed. Such as a non-journaling file system. In which case, fix the design. Don&#39;t add shutdown hooks (that just enables the bad). For example, if you have a TCP/IP connection open and the &#39;other side&#39; is reserving lots of resources as long as it is, and the process ends, the TCP/IP is shut down. Unless a router in the middle failed, in which case it won&#39;t, but a shutdown hook can&#39;t fix that either. See? Shutdown hook is useless.","body":"<i>doesn&#39;t necessarily close resources properly and reliably.</i> - Yes it does. Unless it&#39;s a resource you wrote (not provided by <code>java.*</code>) and it is badly designed. Such as a non-journaling file system. In which case, fix the design. Don&#39;t add shutdown hooks (that just enables the bad). For example, if you have a TCP/IP connection open and the &#39;other side&#39; is reserving lots of resources as long as it is, and the process ends, the TCP/IP is shut down. Unless a router in the middle failed, in which case it won&#39;t, but a shutdown hook can&#39;t fix that either. See? Shutdown hook is useless."},{"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1699794059,"post_id":77461477,"comment_id":136573465,"body_markdown":"It is trivial to write the server properly such that the end of the TCP/IP connection server-side also closes down the resources there. If the cost is so high, the protocol should _definitely_ be updated to include a requirement that a Ping?/Pong! message cycle is done at least once a minute, to detect stuck TCP/IP. Or properly configure soKeepalive (but, I&#39;d do it in the main protocol, not rely on soKA)","body":"It is trivial to write the server properly such that the end of the TCP/IP connection server-side also closes down the resources there. If the cost is so high, the protocol should <i>definitely</i> be updated to include a requirement that a Ping?/Pong! message cycle is done at least once a minute, to detect stuck TCP/IP. Or properly configure soKeepalive (but, I&#39;d do it in the main protocol, not rely on soKA)"},{"owner":{"account_id":3967710,"reputation":1462,"user_id":3273130,"display_name":"Bolpat"},"score":0,"creation_date":1699886358,"post_id":77461477,"comment_id":136583635,"body_markdown":"This is an interesting discussion. Thank you all for your time.","body":"This is an interesting discussion. Thank you all for your time."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1699639146,"creation_date":1699639146,"answer_id":77462002,"question_id":77461477,"body_markdown":"&gt; One customer complained that SonarQube warns them that close() isn’t called to free resources and suggests to use try-with-resources on the object, but the object is held by a static variable or something equivalent and lives until the application closes (as far as I understood).\r\n\r\n&quot;Doctor, it hurts when I smash a hammer into my face!&quot;\r\n\r\nStop doing that then.\r\n\r\nSonarQube is a tool. It can be configured to just say silly things, similar to that hammer. The fix isn&#39;t to try to grow a hammerproof face. The fix is to simply stop doing the thing whose only purpose is to hurt.\r\n\r\nUnfortunately, your customer might not be willing to hear that.\r\n\r\nBut if they are, they can tell sonarqube to stop doing that. They can even add a simple comment to tell sonarqube not to complain about that specific case.\r\n\r\n&gt; It seems like no-one had the problem of static AutoClosable objects, since there are no questions about it on Stack Overflow.\r\n\r\nIt&#39;s kind of a weird thing to want it, even by your customer. If there&#39;s a global variable that has this kind of state, that means your customer&#39;s code is untestable (they can&#39;t really replace it with a dummy implementation for example) - but, again, given that it&#39;s a customer, they might not be willing to hear that.\r\n\r\nNormally you make the resource once soon after app start and hand it to the rest of your code in a try-with block that never exits unless the app exits:\r\n\r\n```\r\npublic static void main(String[] args) {\r\n  try (var out = new FileOutputStream(args[0])) {\r\n    yourActualApp(out);\r\n  }\r\n```\r\n\r\nsomething like the above. The same would work for your library. But, your customer must want to move away from a static global field and pass the resource along _everywhere_ to make this work, and they might not want to do that.\r\n\r\n## A possible solution\r\n\r\nSplit whatever java class represents your resource in twain. 2 classes, both of which simply wrap around the actual implementation. One implements AutoClosable, the other doesn&#39;t. Name the one that doesn&#39;t &#39;GlobalFoo&#39; where Foo is what you currently name it - and put in its javadoc that the intent for such a thing is that it exists for the lifetime of your JVM. This way your users have to explictly opt into &#39;nono this one lives forever, no need to close it!&#39;, and you can add some smarts, such as - if it&#39;s a resource with a unique key (say, it&#39;s representing a file. files have unique keys: The fully qualified file name!) - you can store those unique keys and throw an error if a user of your library attempts to make such a global object using the same key more than once ever.\r\n\r\nYou can have one extend the other - that extender simply adds AutoClosable and nothing more.\r\n","title":"How to close a static variable of AutoClosable type?","body":"<blockquote>\n<p>One customer complained that SonarQube warns them that close() isn’t called to free resources and suggests to use try-with-resources on the object, but the object is held by a static variable or something equivalent and lives until the application closes (as far as I understood).</p>\n</blockquote>\n<p>&quot;Doctor, it hurts when I smash a hammer into my face!&quot;</p>\n<p>Stop doing that then.</p>\n<p>SonarQube is a tool. It can be configured to just say silly things, similar to that hammer. The fix isn't to try to grow a hammerproof face. The fix is to simply stop doing the thing whose only purpose is to hurt.</p>\n<p>Unfortunately, your customer might not be willing to hear that.</p>\n<p>But if they are, they can tell sonarqube to stop doing that. They can even add a simple comment to tell sonarqube not to complain about that specific case.</p>\n<blockquote>\n<p>It seems like no-one had the problem of static AutoClosable objects, since there are no questions about it on Stack Overflow.</p>\n</blockquote>\n<p>It's kind of a weird thing to want it, even by your customer. If there's a global variable that has this kind of state, that means your customer's code is untestable (they can't really replace it with a dummy implementation for example) - but, again, given that it's a customer, they might not be willing to hear that.</p>\n<p>Normally you make the resource once soon after app start and hand it to the rest of your code in a try-with block that never exits unless the app exits:</p>\n<pre><code>public static void main(String[] args) {\n  try (var out = new FileOutputStream(args[0])) {\n    yourActualApp(out);\n  }\n</code></pre>\n<p>something like the above. The same would work for your library. But, your customer must want to move away from a static global field and pass the resource along <em>everywhere</em> to make this work, and they might not want to do that.</p>\n<h2>A possible solution</h2>\n<p>Split whatever java class represents your resource in twain. 2 classes, both of which simply wrap around the actual implementation. One implements AutoClosable, the other doesn't. Name the one that doesn't 'GlobalFoo' where Foo is what you currently name it - and put in its javadoc that the intent for such a thing is that it exists for the lifetime of your JVM. This way your users have to explictly opt into 'nono this one lives forever, no need to close it!', and you can add some smarts, such as - if it's a resource with a unique key (say, it's representing a file. files have unique keys: The fully qualified file name!) - you can store those unique keys and throw an error if a user of your library attempts to make such a global object using the same key more than once ever.</p>\n<p>You can have one extend the other - that extender simply adds AutoClosable and nothing more.</p>\n"},{"tags":[],"owner":{"account_id":2792262,"reputation":163837,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699640846,"creation_date":1699640846,"answer_id":77462141,"question_id":77461477,"body_markdown":"&gt; One customer complained that SonarQube warns them that close() isn’t called to free resources and suggests to use try-with-resources on the object, but the object is held by a static variable or something equivalent and lives until the application closes (as far as I understood).\r\n\r\nIf SonarQube is to be believed, then the user is creating an instance of your class that is not managed by a try-with-resources statement and that they do not `close()` explicitly.  There are then two possibilities:\r\n\r\n 1. that&#39;s ok for instances of your particular class, or\r\n 2. that&#39;s a usage error.\r\n\r\nEither way, it&#39;s fundamentally a &quot;them&quot; problem, not a &quot;you&quot; problem.\r\n\r\n&gt; I want to help them, but removing AutoClosable (as they suggested) simply isn’t correct.\r\n\r\nI expect that removing `AutoClosable` (and any of its subinterfaces that you&#39;ve explicitly implemented) will silence SonarQube, because it will no longer recognize the object as one whose `close()` method is relevant.  I&#39;m inclined to believe you that that would be incorrect.  Certainly that would make the class invalid for use with try-with-resources statements.  That would not make the usage that SonarQube presently reports on any more or less correct than it already is.\r\n\r\n&gt; The issue isn’t so much about the memory: When the application ends and the C++ library is unloaded, the memory resources are freed (by the OS) anyway.\r\n\r\nThat tends to support the premise that it is (1), above, that applies to your class.  There are other potential issues with objects not being closed, however.  For example, if instances of your class manage modifiable files then failing to close them could mean that some writes are lost if the VM terminates abnormally.  But again, this seems like a usage problem, not a design or implementation problem.\r\n\r\n&gt; So, how does one close `AutoClosable` objects held by static variables, ideally in a way that SonarQube detects? Java does not seem to have the opposite of a class initializer that could be used.\r\n\r\nBy explicitly invoking their `close()` methods.  `AutoCloseable` is not relevant here except inasmuch as it declares that method.  It does not have any special semantics apart from its relevance to try-with-finally statements.\r\nAnd you are correct, Java does not have any kind of hook for executing code before a class is cleaned up, nor does it guarantee that unused classes ever will be cleaned up at all, not even at program termination.\r\n\r\nComments on the question mention shutdown hooks, but these are bad juju.  Moreover, I doubt that anything you could do with them inside the class itself would satisfy SonarQube, and I&#39;d be a little surprised if your user could successfully use them to satisfy SonarQube, either.  And even if they did, would that actually make their application work in any way better or more reliably?\r\n\r\nOverall, I think it is usually a mistake to store an `AutoCloseable` object in a `static` field in the first place.  To the extent that there is a reasonable expectation that `AutoClosable`s need to be closed, that&#39;s hard to reconcile with the indefinite availability typical of `static` fields.\r\n\r\n&gt; I’m about to tell them that they should appropriately reconfigure SonarQube or suppress the warning.\r\n\r\nIf you&#39;re satisfied that it&#39;s ok for the object not to be closed (at all), then that&#39;s exactly what I would do.\r\n\r\n&gt; Of course, not using global state, i.e. not having a static AutoClosable is a no-brainer, but I guess they already know that.\r\n\r\nI wouldn&#39;t assume that they do know that, but I also wouldn&#39;t assume that they would respond well to being told that they shouldn&#39;t be doing what they are doing.  Nor is that a particularly good look from a user support perspective.\r\n","title":"How to close a static variable of AutoClosable type?","body":"<blockquote>\n<p>One customer complained that SonarQube warns them that close() isn’t called to free resources and suggests to use try-with-resources on the object, but the object is held by a static variable or something equivalent and lives until the application closes (as far as I understood).</p>\n</blockquote>\n<p>If SonarQube is to be believed, then the user is creating an instance of your class that is not managed by a try-with-resources statement and that they do not <code>close()</code> explicitly.  There are then two possibilities:</p>\n<ol>\n<li>that's ok for instances of your particular class, or</li>\n<li>that's a usage error.</li>\n</ol>\n<p>Either way, it's fundamentally a &quot;them&quot; problem, not a &quot;you&quot; problem.</p>\n<blockquote>\n<p>I want to help them, but removing AutoClosable (as they suggested) simply isn’t correct.</p>\n</blockquote>\n<p>I expect that removing <code>AutoClosable</code> (and any of its subinterfaces that you've explicitly implemented) will silence SonarQube, because it will no longer recognize the object as one whose <code>close()</code> method is relevant.  I'm inclined to believe you that that would be incorrect.  Certainly that would make the class invalid for use with try-with-resources statements.  That would not make the usage that SonarQube presently reports on any more or less correct than it already is.</p>\n<blockquote>\n<p>The issue isn’t so much about the memory: When the application ends and the C++ library is unloaded, the memory resources are freed (by the OS) anyway.</p>\n</blockquote>\n<p>That tends to support the premise that it is (1), above, that applies to your class.  There are other potential issues with objects not being closed, however.  For example, if instances of your class manage modifiable files then failing to close them could mean that some writes are lost if the VM terminates abnormally.  But again, this seems like a usage problem, not a design or implementation problem.</p>\n<blockquote>\n<p>So, how does one close <code>AutoClosable</code> objects held by static variables, ideally in a way that SonarQube detects? Java does not seem to have the opposite of a class initializer that could be used.</p>\n</blockquote>\n<p>By explicitly invoking their <code>close()</code> methods.  <code>AutoCloseable</code> is not relevant here except inasmuch as it declares that method.  It does not have any special semantics apart from its relevance to try-with-finally statements.\nAnd you are correct, Java does not have any kind of hook for executing code before a class is cleaned up, nor does it guarantee that unused classes ever will be cleaned up at all, not even at program termination.</p>\n<p>Comments on the question mention shutdown hooks, but these are bad juju.  Moreover, I doubt that anything you could do with them inside the class itself would satisfy SonarQube, and I'd be a little surprised if your user could successfully use them to satisfy SonarQube, either.  And even if they did, would that actually make their application work in any way better or more reliably?</p>\n<p>Overall, I think it is usually a mistake to store an <code>AutoCloseable</code> object in a <code>static</code> field in the first place.  To the extent that there is a reasonable expectation that <code>AutoClosable</code>s need to be closed, that's hard to reconcile with the indefinite availability typical of <code>static</code> fields.</p>\n<blockquote>\n<p>I’m about to tell them that they should appropriately reconfigure SonarQube or suppress the warning.</p>\n</blockquote>\n<p>If you're satisfied that it's ok for the object not to be closed (at all), then that's exactly what I would do.</p>\n<blockquote>\n<p>Of course, not using global state, i.e. not having a static AutoClosable is a no-brainer, but I guess they already know that.</p>\n</blockquote>\n<p>I wouldn't assume that they do know that, but I also wouldn't assume that they would respond well to being told that they shouldn't be doing what they are doing.  Nor is that a particularly good look from a user support perspective.</p>\n"}],"owner":{"account_id":3967710,"reputation":1462,"user_id":3273130,"display_name":"Bolpat"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77462002,"answer_count":2,"score":2,"last_activity_date":1699889896,"creation_date":1699633503,"question_id":77461477,"body_markdown":"I’m the author of a Java library that provides Java access to a C++ library our company sells. The instances of one of the classes “own” C++ objects in the following sense: The class has a few private `long` fields that are set by certain `native` methods and have the role of (unique) pointers into the C++ heap. Because the C++ heap is not garbage collected, the memory must be freed manually when the owning Java object doesn’t need them anymore, in particular when the owning Java object itself isn’t needed anymore, so the class implements `AutoClosable` and `close()` frees all the C++ memory owned by the instance. Ideally, users would use `try`-with-resources on the instances of that class.\r\n\r\nOne customer complained that SonarQube warns them that `close()` isn’t called to free resources and suggests to use `try`-with-resources on the object, but the object is held by a `static` variable or something equivalent and lives until the application closes (as far as I understood). I want to help them, but removing `AutoClosable` (as they suggested) simply isn’t correct. The issue isn’t so much about the memory: When the application ends and the C++ library is unloaded, the memory resources are freed (by the OS) anyway.\r\n\r\nSo, how does one close `AutoClosable` objects held by static variables, ideally in a way that SonarQube detects? Java does not seem to have the opposite of a class initializer that could be used.\r\n\r\nI don’t have access to SonarQube to play around and see what could work, i.e. when SonarQube recognizes that `close()` will be called. I’m about to tell them that they should appropriately reconfigure SonarQube or suppress the warning. Asking this question, I want to make sure it’s essentially the best course of action. “Yes, it is” would be an appropriate answer if it is true. Of course, not using global state, i.e. not having a `static` `AutoClosable` is a no-brainer, but I guess they already know that.\r\n\r\nIt seems like no-one had the problem of `static` `AutoClosable` objects, since there are no questions about it on Stack Overflow.\r\nI figured that `AutoClosable` is similar to `IDisposable` in .NET (C#), and I found [this question](https://stackoverflow.com/questions/12092529/static-disposable-objects) very much asking this, however the answers are specific to the use-case and .NET, and also don’t provide a general solution.","title":"How to close a static variable of AutoClosable type?","body":"<p>I’m the author of a Java library that provides Java access to a C++ library our company sells. The instances of one of the classes “own” C++ objects in the following sense: The class has a few private <code>long</code> fields that are set by certain <code>native</code> methods and have the role of (unique) pointers into the C++ heap. Because the C++ heap is not garbage collected, the memory must be freed manually when the owning Java object doesn’t need them anymore, in particular when the owning Java object itself isn’t needed anymore, so the class implements <code>AutoClosable</code> and <code>close()</code> frees all the C++ memory owned by the instance. Ideally, users would use <code>try</code>-with-resources on the instances of that class.</p>\n<p>One customer complained that SonarQube warns them that <code>close()</code> isn’t called to free resources and suggests to use <code>try</code>-with-resources on the object, but the object is held by a <code>static</code> variable or something equivalent and lives until the application closes (as far as I understood). I want to help them, but removing <code>AutoClosable</code> (as they suggested) simply isn’t correct. The issue isn’t so much about the memory: When the application ends and the C++ library is unloaded, the memory resources are freed (by the OS) anyway.</p>\n<p>So, how does one close <code>AutoClosable</code> objects held by static variables, ideally in a way that SonarQube detects? Java does not seem to have the opposite of a class initializer that could be used.</p>\n<p>I don’t have access to SonarQube to play around and see what could work, i.e. when SonarQube recognizes that <code>close()</code> will be called. I’m about to tell them that they should appropriately reconfigure SonarQube or suppress the warning. Asking this question, I want to make sure it’s essentially the best course of action. “Yes, it is” would be an appropriate answer if it is true. Of course, not using global state, i.e. not having a <code>static</code> <code>AutoClosable</code> is a no-brainer, but I guess they already know that.</p>\n<p>It seems like no-one had the problem of <code>static</code> <code>AutoClosable</code> objects, since there are no questions about it on Stack Overflow.\nI figured that <code>AutoClosable</code> is similar to <code>IDisposable</code> in .NET (C#), and I found <a href=\"https://stackoverflow.com/questions/12092529/static-disposable-objects\">this question</a> very much asking this, however the answers are specific to the use-case and .NET, and also don’t provide a general solution.</p>\n"},{"tags":["java","spring","spring-boot","docker"],"owner":{"account_id":1182420,"reputation":5604,"user_id":1157070,"accept_rate":39,"display_name":"lowLatency"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699889569,"creation_date":1699850439,"question_id":77471762,"body_markdown":"I have a docker container(max memory allocated 512MB) having a spring boot app running, where the Eden space utilization(EU) keeps increasing slowly (without any traffic).\r\n\r\nThis spring boot app is using openjdk-11, G1 garbage collector with Xms 128MB and Xmx 256MB\r\n\r\nAfter I deploy it, and don&#39;t push any traffic/request to it, the Eden space utilization keeps increasing slowly with time. \r\nThis is on a VM where I have limited access and can see Eden space utilization(EU) value using command\r\n\r\n    jstat -gc\r\n\r\nI dont have permission to run the docker stats on the shared VM machine, though have access to my container logs, but can see all values on the Grafana like `container_memory_usage_bytes`, `container_memory_rss`.\r\nI tried to do go through the heapdumps (after importing to Visual VM) but not able to figure out any leaks or patterns which can cause increase in heap space\r\n\r\nLooking for suggestions: where should I focus to debug it better\r\n\r\nNote:`YGC(young generation GC)` and `CGC(Concurrent GC)` events occurs and does not cause any OOM errors etc, and there is slight increase in `Old space capacity as well as Utilization` with YGC (means most objects are garbage collected and few moved to Old space)","title":"Spring boot app (docker container) - Eden space utilization(EU) keeps increasing slowly (without any traffic)","body":"<p>I have a docker container(max memory allocated 512MB) having a spring boot app running, where the Eden space utilization(EU) keeps increasing slowly (without any traffic).</p>\n<p>This spring boot app is using openjdk-11, G1 garbage collector with Xms 128MB and Xmx 256MB</p>\n<p>After I deploy it, and don't push any traffic/request to it, the Eden space utilization keeps increasing slowly with time.\nThis is on a VM where I have limited access and can see Eden space utilization(EU) value using command</p>\n<pre><code>jstat -gc\n</code></pre>\n<p>I dont have permission to run the docker stats on the shared VM machine, though have access to my container logs, but can see all values on the Grafana like <code>container_memory_usage_bytes</code>, <code>container_memory_rss</code>.\nI tried to do go through the heapdumps (after importing to Visual VM) but not able to figure out any leaks or patterns which can cause increase in heap space</p>\n<p>Looking for suggestions: where should I focus to debug it better</p>\n<p>Note:<code>YGC(young generation GC)</code> and <code>CGC(Concurrent GC)</code> events occurs and does not cause any OOM errors etc, and there is slight increase in <code>Old space capacity as well as Utilization</code> with YGC (means most objects are garbage collected and few moved to Old space)</p>\n"},{"tags":["java","multipartform-data","quarkus","resteasy"],"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":2,"creation_date":1663023525,"post_id":73686447,"comment_id":130137454,"body_markdown":"It does look like the backing map is a `HashMap` so order is not guaranteed. A change to the implementation would be required to get this to work. One option might be to extend it and change the `MultipartFormDataOutput.getFormDataMap()` to return a `LinkedHashMap` instead. Or actually, you&#39;d want to set the protected field in the subclass.","body":"It does look like the backing map is a <code>HashMap</code> so order is not guaranteed. A change to the implementation would be required to get this to work. One option might be to extend it and change the <code>MultipartFormDataOutput.getFormDataMap()</code> to return a <code>LinkedHashMap</code> instead. Or actually, you&#39;d want to set the protected field in the subclass."},{"owner":{"account_id":3461077,"reputation":1190,"user_id":2898163,"accept_rate":100,"display_name":"GigiSan"},"score":0,"creation_date":1663054828,"post_id":73686447,"comment_id":130142621,"body_markdown":"Interesting point, the object actually already instantiates a LinkedHashMap. I will look in to it, thanks a lot! :)","body":"Interesting point, the object actually already instantiates a LinkedHashMap. I will look in to it, thanks a lot! :)"}],"answers":[{"tags":[],"owner":{"account_id":29893101,"reputation":1,"user_id":22908755,"display_name":"Lucas Galvao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699889412,"creation_date":1699888874,"answer_id":77474976,"question_id":73686447,"body_markdown":"Unfortunately don&#39;t have enough rep to add to the comment thread, so going to use an Answer.\r\n\r\nI had used that approach of extending MultipartFormDataOutput and using a linked hashmap. Unfortunately in resteasy reactive 3.x MultipartFormDataOutput was made final, so that workaround no longer works, so in case that was your solution beware of  that.\r\n\r\nAs of now I don&#39;t know of a substitute.","title":"Order of keys in RestEasy MultipartFormDataOutput","body":"<p>Unfortunately don't have enough rep to add to the comment thread, so going to use an Answer.</p>\n<p>I had used that approach of extending MultipartFormDataOutput and using a linked hashmap. Unfortunately in resteasy reactive 3.x MultipartFormDataOutput was made final, so that workaround no longer works, so in case that was your solution beware of  that.</p>\n<p>As of now I don't know of a substitute.</p>\n"}],"owner":{"account_id":3461077,"reputation":1190,"user_id":2898163,"accept_rate":100,"display_name":"GigiSan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699889412,"creation_date":1662971429,"question_id":73686447,"body_markdown":"I&#39;m trying to send a document to a remote API with **RestEasy** on **Quarkus**.\r\n\r\nThe API I&#39;m calling requires me to send a `multipart/form-data` body with 3 files. Problem is, the API cares about the order in which they are specified and will return an error if they are in the wrong order.\r\n\r\nThe problem seems similar to [this question][1], but the problem there concerns a server *returning* data, while my problem concerns a client *sending* data. I posted a comment anyway and will delete this question if something resolutive comes up there.\r\n\r\nThe parameters are called `PARAMETERS`, `INDEX` and `DATA` and need to be specified in this exact order and intentionally uppercased. I&#39;m using a [MultipartFormDataOutput][2] to store the files to send and as the other question suggests, it might be a problem with the keys being ordered alphabetically.\r\n\r\nThis is the service interface I&#39;m using:\r\n\r\n    @ApplicationScoped\r\n    @RegisterRestClient(configKey = &quot;api-url&quot;)\r\n    public interface DocuService {\r\n    \r\n        @POST\r\n        @Consumes(MediaType.MULTIPART_FORM_DATA)\r\n        @Produces(MediaType.APPLICATION_OCTET_STREAM)\r\n        @Path(&quot;/send_document&quot;)\r\n        String sendDocument(\r\n                @MultipartForm MultipartFormDataOutput data\r\n        );\r\n    \r\n    }\r\n\r\nWhile this is how I add the files to the payload and send it:\r\n\r\n    MultipartFormDataOutput mpFormData = new MultipartFormDataOutput();\r\n    mpFormData.addFormData(&quot;PARAMETERS&quot;, requestData.getParamFile(), new MediaType(&quot;application&quot;, &quot;xml&quot;), &quot;parametersFile.xml&quot;);\r\n    mpFormData.addFormData(&quot;INDEX&quot;, requestData.getIndexFile(), new MediaType(&quot;application&quot;, &quot;xml&quot;), &quot;indexFile.xml&quot;);\r\n    mpFormData.addFormData(&quot;DATA&quot;, requestData.getDataFile(), new MediaType(&quot;application&quot;, &quot;json&quot;), &quot;dataFile.json&quot;);\r\n    docuService.sendDocument(\r\n            mpFormData\r\n    );\r\n\r\nI can&#39;t find a way to specify the key order, or maybe a similar object that will allow me to do so. Maybe someone can help me shed some light on this.\r\n\r\nThanks in advance and have a nice day! &#128521;\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/69227680/missing-part-in-multipartformdataoutput-depending-on-order-of-keys\r\n  [2]: https://docs.jboss.org/resteasy/docs/3.0-beta-4/javadocs/index.html?org/jboss/resteasy/plugins/providers/multipart/MultipartFormDataOutput.html","title":"Order of keys in RestEasy MultipartFormDataOutput","body":"<p>I'm trying to send a document to a remote API with <strong>RestEasy</strong> on <strong>Quarkus</strong>.</p>\n<p>The API I'm calling requires me to send a <code>multipart/form-data</code> body with 3 files. Problem is, the API cares about the order in which they are specified and will return an error if they are in the wrong order.</p>\n<p>The problem seems similar to <a href=\"https://stackoverflow.com/questions/69227680/missing-part-in-multipartformdataoutput-depending-on-order-of-keys\">this question</a>, but the problem there concerns a server <em>returning</em> data, while my problem concerns a client <em>sending</em> data. I posted a comment anyway and will delete this question if something resolutive comes up there.</p>\n<p>The parameters are called <code>PARAMETERS</code>, <code>INDEX</code> and <code>DATA</code> and need to be specified in this exact order and intentionally uppercased. I'm using a <a href=\"https://docs.jboss.org/resteasy/docs/3.0-beta-4/javadocs/index.html?org/jboss/resteasy/plugins/providers/multipart/MultipartFormDataOutput.html\" rel=\"nofollow noreferrer\">MultipartFormDataOutput</a> to store the files to send and as the other question suggests, it might be a problem with the keys being ordered alphabetically.</p>\n<p>This is the service interface I'm using:</p>\n<pre><code>@ApplicationScoped\n@RegisterRestClient(configKey = &quot;api-url&quot;)\npublic interface DocuService {\n\n    @POST\n    @Consumes(MediaType.MULTIPART_FORM_DATA)\n    @Produces(MediaType.APPLICATION_OCTET_STREAM)\n    @Path(&quot;/send_document&quot;)\n    String sendDocument(\n            @MultipartForm MultipartFormDataOutput data\n    );\n\n}\n</code></pre>\n<p>While this is how I add the files to the payload and send it:</p>\n<pre><code>MultipartFormDataOutput mpFormData = new MultipartFormDataOutput();\nmpFormData.addFormData(&quot;PARAMETERS&quot;, requestData.getParamFile(), new MediaType(&quot;application&quot;, &quot;xml&quot;), &quot;parametersFile.xml&quot;);\nmpFormData.addFormData(&quot;INDEX&quot;, requestData.getIndexFile(), new MediaType(&quot;application&quot;, &quot;xml&quot;), &quot;indexFile.xml&quot;);\nmpFormData.addFormData(&quot;DATA&quot;, requestData.getDataFile(), new MediaType(&quot;application&quot;, &quot;json&quot;), &quot;dataFile.json&quot;);\ndocuService.sendDocument(\n        mpFormData\n);\n</code></pre>\n<p>I can't find a way to specify the key order, or maybe a similar object that will allow me to do so. Maybe someone can help me shed some light on this.</p>\n<p>Thanks in advance and have a nice day! 😉</p>\n"},{"tags":["java","macos","jar","macos-catalina"],"owner":{"account_id":19738929,"reputation":151,"user_id":14452728,"display_name":"Ric"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":653,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":0,"score":2,"last_activity_date":1699889398,"creation_date":1606855382,"question_id":65098188,"body_markdown":"I am having the following problem:\r\n\r\nI am using Catalina (10.15.7) on a MacBook and recently I downloaded a JAR executable file (called JKnobMan) but apparently it doesn&#39;t have access to the open and save operations, even though the program runs normally otherwise, and it even lets me export. But naturally, what I want is to be able to save my progress and open it later on.\r\n\r\nThe message I get when I click &#39;open&#39; is: &quot;The open file operation failed to connect to the open and save panel service&quot;. I don&#39;t get this message when I &#39;save&#39; but the saved file contains none of the information it should have (I checked this by opening the saved file on the web version of the KnobMan program).\r\n\r\nI tried going to the Security &amp; Privacy settings to give this program all necessary access but for some reason the JAR file is not selectable when I browse the items.\r\n\r\nI expect this to be an easy fix, but so far I have been unable to find a solution. Some people experience a similar problem with email services and they&#39;re usually easily solved, so this must be straightforward as well?\r\n\r\nAny help appreciated.\r\n\r\nEDIT: Note that I&#39;m not asking for help with THIS particular program. I assume that I would have the same issue with any other JAR executable trying to open/save in a Catalina environment. So, knowledge of said program is probably not necessary to know the solution.","title":"JAR program not allowed to open/save under MacOS Catalina (&quot;the open file operation failed to connect to the open and save panel service&quot;)","body":"<p>I am having the following problem:</p>\n<p>I am using Catalina (10.15.7) on a MacBook and recently I downloaded a JAR executable file (called JKnobMan) but apparently it doesn't have access to the open and save operations, even though the program runs normally otherwise, and it even lets me export. But naturally, what I want is to be able to save my progress and open it later on.</p>\n<p>The message I get when I click 'open' is: &quot;The open file operation failed to connect to the open and save panel service&quot;. I don't get this message when I 'save' but the saved file contains none of the information it should have (I checked this by opening the saved file on the web version of the KnobMan program).</p>\n<p>I tried going to the Security &amp; Privacy settings to give this program all necessary access but for some reason the JAR file is not selectable when I browse the items.</p>\n<p>I expect this to be an easy fix, but so far I have been unable to find a solution. Some people experience a similar problem with email services and they're usually easily solved, so this must be straightforward as well?</p>\n<p>Any help appreciated.</p>\n<p>EDIT: Note that I'm not asking for help with THIS particular program. I assume that I would have the same issue with any other JAR executable trying to open/save in a Catalina environment. So, knowledge of said program is probably not necessary to know the solution.</p>\n"},{"tags":["java","oracle","jpa","jpa-2.0"],"comments":[{"owner":{"account_id":294406,"reputation":24602,"user_id":598289,"accept_rate":85,"display_name":"SJuan76"},"score":2,"creation_date":1349427470,"post_id":12742826,"comment_id":17213785,"body_markdown":"You could avoid the @GeneratedValue, use the generator yourself to get the value and set it to entity &quot;manually&quot;","body":"You could avoid the @GeneratedValue, use the generator yourself to get the value and set it to entity &quot;manually&quot;"},{"owner":{"account_id":1706440,"reputation":2901,"user_id":1565399,"accept_rate":83,"display_name":"mstzn"},"score":0,"creation_date":1349427908,"post_id":12742826,"comment_id":17213981,"body_markdown":"I dont want to set it to entity manually.if i get next value for id from oracle and i set it to new entity&#39;s id,is it rational ?","body":"I dont want to set it to entity manually.if i get next value for id from oracle and i set it to new entity&#39;s id,is it rational ?"}],"answers":[{"tags":[],"owner":{"account_id":903562,"reputation":15094,"user_id":939023,"accept_rate":90,"display_name":"Shivan Dragon"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1507466229,"creation_date":1349427729,"answer_id":12742959,"question_id":12742826,"body_markdown":"With a @GeneratedValue type id you can&#39;t know that value in advance (before actually writing it). However once you persist your Bean, the id field will be populated in that bean instance and you can obtain it without needing to do an extra query for it. In other words:\r\n\r\n    MyEntiry myEnt = new MyEntity(); //the id field is null now\r\n    entityManager.persist(myEnt);//the id field is populated in myEnt now\r\n    Long id = myEnt.getId();\r\n\r\nAlso, depending on how your `EntityManager` is configured, you might need to also first commit the transaction (manually) before you can get that id.\r\n\r\n# Update as per comment\r\n\r\nIf you want to intercept and do something to the entity before it is saved and/or updated, you can use JPA LifeCycle Listeners (if you&#39;re using JPA version 2): [Handling JPA lifecycle event using listeners and callbacks](http://www.objectdb.com/java/jpa/persistence/event).\r\n\r\nBasically you can make a `validate()` method in your bean, annotate it with  `@PrePersist` and `@PreUpdate` and do the validation in it (if code is empty set it to id&#39;s value)\r\n\r\n# Update per 2nd comment\r\n\r\nYes, I honestly just thought of that just now: that if the id is auto generated, it might get populated AFTER the pre-persist event, such that when your pre-persist code is executed you still don&#39;t know what the id is (you may notice also that in the example you link to the id is NOT autogenerated but set manually).\r\nWhat you can do in this case is add a boolean field to your entity (annotated with `@Transient` so it won&#39;t get persisted) called `isCodeEmpty` (which is false by default if not specifically initialized). Then in your `@PrePersist` annotated method you check if the value for code field is empty and if so, set the boolean to true. Then you refactor your `setId(...)` method such that (aside from setting the id field) it will check this boolean, and if true set the value of the code field to that of the id field:\r\n\r\n\r\n    public class YourEntity {\r\n    \r\n    @Transient\r\n    private boolean isCodeEmpty;\r\n    \r\n    public void setId(Whatever id) {\r\n     this.id = id;\r\n     if(isCodeEmpty) {\r\n      this.code = id;\r\n      //if necessary:\r\n      //this.isCodeEmpty = false;\r\n     }\r\n    }\r\n    \r\n    @PrePersist\r\n    public void validate() {\r\n     if(code == null || code.isEmpty()) {\r\n      isCodeEmpty = true;\r\n     }\r\n    \r\n    }\r\n    \r\n    \r\n    }","title":"How do I know the id before saving an object in jpa","body":"<p>With a @GeneratedValue type id you can't know that value in advance (before actually writing it). However once you persist your Bean, the id field will be populated in that bean instance and you can obtain it without needing to do an extra query for it. In other words:</p>\n\n<pre><code>MyEntiry myEnt = new MyEntity(); //the id field is null now\nentityManager.persist(myEnt);//the id field is populated in myEnt now\nLong id = myEnt.getId();\n</code></pre>\n\n<p>Also, depending on how your <code>EntityManager</code> is configured, you might need to also first commit the transaction (manually) before you can get that id.</p>\n\n<h1>Update as per comment</h1>\n\n<p>If you want to intercept and do something to the entity before it is saved and/or updated, you can use JPA LifeCycle Listeners (if you're using JPA version 2): <a href=\"http://www.objectdb.com/java/jpa/persistence/event\" rel=\"noreferrer\">Handling JPA lifecycle event using listeners and callbacks</a>.</p>\n\n<p>Basically you can make a <code>validate()</code> method in your bean, annotate it with  <code>@PrePersist</code> and <code>@PreUpdate</code> and do the validation in it (if code is empty set it to id's value)</p>\n\n<h1>Update per 2nd comment</h1>\n\n<p>Yes, I honestly just thought of that just now: that if the id is auto generated, it might get populated AFTER the pre-persist event, such that when your pre-persist code is executed you still don't know what the id is (you may notice also that in the example you link to the id is NOT autogenerated but set manually).\nWhat you can do in this case is add a boolean field to your entity (annotated with <code>@Transient</code> so it won't get persisted) called <code>isCodeEmpty</code> (which is false by default if not specifically initialized). Then in your <code>@PrePersist</code> annotated method you check if the value for code field is empty and if so, set the boolean to true. Then you refactor your <code>setId(...)</code> method such that (aside from setting the id field) it will check this boolean, and if true set the value of the code field to that of the id field:</p>\n\n<pre><code>public class YourEntity {\n\n@Transient\nprivate boolean isCodeEmpty;\n\npublic void setId(Whatever id) {\n this.id = id;\n if(isCodeEmpty) {\n  this.code = id;\n  //if necessary:\n  //this.isCodeEmpty = false;\n }\n}\n\n@PrePersist\npublic void validate() {\n if(code == null || code.isEmpty()) {\n  isCodeEmpty = true;\n }\n\n}\n\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1706440,"reputation":2901,"user_id":1565399,"accept_rate":83,"display_name":"mstzn"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1510746591,"creation_date":1360255451,"answer_id":14756350,"question_id":12742826,"body_markdown":"After long researching about this, finally I found a solution. \r\n\r\nIn fact, if you use ***sequence generator*** in jpa, certainly you cannot obtain entity&#39;s id before saving it in database, because next id will be assigned by database sequence. \r\n\r\nThere is one way to obtain the id if you use a ***custom generator***, you can get the id before saving. Here is simple implementation:\r\n\r\n    public class CustomGenerator extends IdentityGenerator implements Configurable {\r\n        \r\n        private IdentifierGenerator defaultGenerator;\r\n\r\n        public Serializable generate(SessionImplementor session, Object object) throws HibernateException {\r\n            Long idValue = (Long)defaultGenerator.generate(session, object);\r\n            //idValue will be assigned your entity id\r\n            return idValue;\r\n        }\r\n\r\n        @Override\r\n        public void configure(Type type, Properties params, Dialect d) throws MappingException {\r\n            DefaultIdentifierGeneratorFactory dd = new DefaultIdentifierGeneratorFactory();\r\n            dd.setDialect(d);\r\n            defaultGenerator = dd.createIdentifierGenerator(&quot;sequence&quot;, type, params);\r\n        }\r\n    }\r\n\r\nUsing CustomGenerator for id field:\r\n\r\n    @Id\r\n    @Basic(optional = false)\r\n    @Column(name = &quot;ID&quot;, nullable = false)\r\n    @GenericGenerator(name = &quot;seq_id&quot;, strategy = &quot;com.yoncabt.abys.core.listener.CustomGenerator&quot;, parameters = { @Parameter(name = &quot;sequence&quot;, value = &quot;II_FIRM_DOC_PRM_SEQ&quot;) })\r\n    @GeneratedValue(generator = &quot;seq_id&quot;)\r\n    private Long id;\r\n\r\n","title":"How do I know the id before saving an object in jpa","body":"<p>After long researching about this, finally I found a solution. </p>\n\n<p>In fact, if you use <strong><em>sequence generator</em></strong> in jpa, certainly you cannot obtain entity's id before saving it in database, because next id will be assigned by database sequence. </p>\n\n<p>There is one way to obtain the id if you use a <strong><em>custom generator</em></strong>, you can get the id before saving. Here is simple implementation:</p>\n\n<pre><code>public class CustomGenerator extends IdentityGenerator implements Configurable {\n\n    private IdentifierGenerator defaultGenerator;\n\n    public Serializable generate(SessionImplementor session, Object object) throws HibernateException {\n        Long idValue = (Long)defaultGenerator.generate(session, object);\n        //idValue will be assigned your entity id\n        return idValue;\n    }\n\n    @Override\n    public void configure(Type type, Properties params, Dialect d) throws MappingException {\n        DefaultIdentifierGeneratorFactory dd = new DefaultIdentifierGeneratorFactory();\n        dd.setDialect(d);\n        defaultGenerator = dd.createIdentifierGenerator(\"sequence\", type, params);\n    }\n}\n</code></pre>\n\n<p>Using CustomGenerator for id field:</p>\n\n<pre><code>@Id\n@Basic(optional = false)\n@Column(name = \"ID\", nullable = false)\n@GenericGenerator(name = \"seq_id\", strategy = \"com.yoncabt.abys.core.listener.CustomGenerator\", parameters = { @Parameter(name = \"sequence\", value = \"II_FIRM_DOC_PRM_SEQ\") })\n@GeneratedValue(generator = \"seq_id\")\nprivate Long id;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7108060,"reputation":415,"user_id":5437050,"accept_rate":0,"display_name":"suri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621317507,"creation_date":1566982982,"answer_id":57688701,"question_id":12742826,"body_markdown":"Just follow these steps then you will get the id before you complete the transaction.  \r\n\r\n1st step adds an entity listener at your entity level by using the annotation called `@EntityListeners`.\r\n\r\n    @Id\r\n    @Basic(optional = false)\r\n    @Column(name = &quot;ID&quot;, nullable = false)\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;woTypeSeq&quot;)\r\n    @EntityListeners(SomeLinstener.class)\r\n    private Long id;\r\n\r\n2nd step\r\n\r\n    public class SomeLinstener{\r\n    \t\r\n    \t@PostPersist\r\n    \tpublic void userPostPersist(YourEntity obj) {\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tobj.getId();\r\n    \t\t}catch(Exception e) {\r\n    \t\t\t\r\n    \t\t}\r\n    \t} \r\n\r\nThis will you an id which has been generated by your generator and you can reuse where ever it is required this will give in a single transaction.\r\n\r\nHope this will help for somebody else.","title":"How do I know the id before saving an object in jpa","body":"<p>Just follow these steps then you will get the id before you complete the transaction.</p>\n<p>1st step adds an entity listener at your entity level by using the annotation called <code>@EntityListeners</code>.</p>\n<pre><code>@Id\n@Basic(optional = false)\n@Column(name = &quot;ID&quot;, nullable = false)\n@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;woTypeSeq&quot;)\n@EntityListeners(SomeLinstener.class)\nprivate Long id;\n</code></pre>\n<p>2nd step</p>\n<pre><code>public class SomeLinstener{\n    \n    @PostPersist\n    public void userPostPersist(YourEntity obj) {\n        \n        try {\n            obj.getId();\n        }catch(Exception e) {\n            \n        }\n    } \n</code></pre>\n<p>This will you an id which has been generated by your generator and you can reuse where ever it is required this will give in a single transaction.</p>\n<p>Hope this will help for somebody else.</p>\n"},{"tags":[],"owner":{"account_id":10958211,"reputation":176,"user_id":9989732,"display_name":"Ivan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1699889288,"creation_date":1625506724,"answer_id":68260151,"question_id":12742826,"body_markdown":"Here is the solution that works for me:\r\n\r\n```java\r\n    @Id\r\n    @GeneratedValue( strategy = GenerationType.SEQUENCE, generator = &quot;my_seq&quot; )\r\n    @SequenceGenerator( name = &quot;my_seq&quot;, sequenceName = &quot;my_seq&quot; )\r\n    @Access( AccessType.PROPERTY )\r\n    private Long id;\r\n\r\n    @Column( name = &quot;CODE&quot;, nullable = false, updatable = false )\r\n    private Long code;\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n        if (code == null) {\r\n            code = id;\r\n        }\r\n    }\r\n```\r\n\r\nThe important part is placing the ```@javax.persistence.Access( AccessType.PROPERTY )``` annotation, which makes Hibernate use the getter and the setter to access the id field. Without it, when the @Id annotation placed directly on a field rather than on the field getter, Hibernate uses a field-based access strategy (getter and setter are not used). Link: \r\nhttps://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/Hibernate_User_Guide.html#access","title":"How do I know the id before saving an object in jpa","body":"<p>Here is the solution that works for me:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Id\n    @GeneratedValue( strategy = GenerationType.SEQUENCE, generator = &quot;my_seq&quot; )\n    @SequenceGenerator( name = &quot;my_seq&quot;, sequenceName = &quot;my_seq&quot; )\n    @Access( AccessType.PROPERTY )\n    private Long id;\n\n    @Column( name = &quot;CODE&quot;, nullable = false, updatable = false )\n    private Long code;\n\n    public void setId(Long id) {\n        this.id = id;\n        if (code == null) {\n            code = id;\n        }\n    }\n</code></pre>\n<p>The important part is placing the <code>@javax.persistence.Access( AccessType.PROPERTY )</code> annotation, which makes Hibernate use the getter and the setter to access the id field. Without it, when the @Id annotation placed directly on a field rather than on the field getter, Hibernate uses a field-based access strategy (getter and setter are not used). Link:\n<a href=\"https://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/Hibernate_User_Guide.html#access\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/Hibernate_User_Guide.html#access</a></p>\n"}],"owner":{"account_id":1706440,"reputation":2901,"user_id":1565399,"accept_rate":83,"display_name":"mstzn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34124,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":14756350,"answer_count":4,"score":22,"last_activity_date":1699889288,"creation_date":1349427318,"question_id":12742826,"body_markdown":"I have a new object. I want to know id before saving it. Is it possible? Or there is another way for this? I am using jpa as orm and oracle as database.\r\n\r\n    @Id\r\n    @Basic(optional = false)\r\n    @Column(name = &quot;ID&quot;, nullable = false)\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;woTypeSeq&quot;)\r\n    private Long id;\r\n\r\nI have a code field in my entity. If the user doesn&#39;t enter a value for the `code` field, I want to set code as entity&#39;s id. If I persist entity, of course i can get id and set code value as id, but this is extra query database.\r\n\r\nI want to do something like that\r\n\r\n    if(entity.getCode()==null) {\r\n       entity.setCode(entity.getId);\r\n       jpaDao.saveOrUpdate(entity);\r\n    }","title":"How do I know the id before saving an object in jpa","body":"<p>I have a new object. I want to know id before saving it. Is it possible? Or there is another way for this? I am using jpa as orm and oracle as database.</p>\n\n<pre><code>@Id\n@Basic(optional = false)\n@Column(name = \"ID\", nullable = false)\n@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"woTypeSeq\")\nprivate Long id;\n</code></pre>\n\n<p>I have a code field in my entity. If the user doesn't enter a value for the <code>code</code> field, I want to set code as entity's id. If I persist entity, of course i can get id and set code value as id, but this is extra query database.</p>\n\n<p>I want to do something like that</p>\n\n<pre><code>if(entity.getCode()==null) {\n   entity.setCode(entity.getId);\n   jpaDao.saveOrUpdate(entity);\n}\n</code></pre>\n"},{"tags":["java","payara"],"owner":{"account_id":26547503,"reputation":1,"user_id":20177349,"display_name":"FRANCESCO SALERNO"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699889092,"creation_date":1699889092,"question_id":77474993,"body_markdown":"I am facing this problem using Payara 5.194 and java 11. I have deployed the same war on another machine which implement a payer 5.191 and java 1.8. \r\nMy problem is related to a login and the information about thew login disappear just after they have been correctly checked. \r\nIn other words I have problem in carrying through the application the information about the session. This doesn&#39;t happen in older version of payara with an older java. Any solution?\r\n&gt; `your text`\r\n```\r\n&lt;h:form&gt;\r\n\r\n            &lt;p:growl showDetail=&quot;true&quot; life=&quot;5000&quot; &gt;\r\n                &lt;p:autoUpdate/&gt;\r\n            &lt;/p:growl&gt;\r\n            \r\n            &lt;h:panelGrid columns=&quot;2&quot; cellpadding=&quot;5&quot;&gt;\r\n                &lt;h:outputLabel for=&quot;username&quot; value=&quot;Username:&quot; /&gt;\r\n                &lt;p:inputText id=&quot;username&quot; value=&quot;#{users.selected.userid}&quot; required=&quot;true&quot; label=&quot;username&quot; /&gt;\r\n\r\n                &lt;h:outputLabel for=&quot;password&quot; value=&quot;Password:&quot; /&gt;\r\n                &lt;p:password id=&quot;password&quot; value=&quot;#{users.selected.password}&quot; required=&quot;true&quot; label=&quot;password&quot; /&gt;\r\n                \r\n                &lt;p:commandButton value=&quot;Login&quot; action=&quot;#{users.login()}&quot; /&gt;\r\n                \r\n\r\n            &lt;/h:panelGrid&gt;\r\n\r\n        &lt;/h:form&gt;\r\n```\r\n\r\n\r\nI tried to update primeface, do the login in the same page without change http session ","title":"Setting non-serializable attribute value into ViewMap: (key: bean, value class: .....)]]","body":"<p>I am facing this problem using Payara 5.194 and java 11. I have deployed the same war on another machine which implement a payer 5.191 and java 1.8.\nMy problem is related to a login and the information about thew login disappear just after they have been correctly checked.\nIn other words I have problem in carrying through the application the information about the session. This doesn't happen in older version of payara with an older java. Any solution?</p>\n<blockquote>\n<p><code>your text</code></p>\n</blockquote>\n<pre><code>&lt;h:form&gt;\n\n            &lt;p:growl showDetail=&quot;true&quot; life=&quot;5000&quot; &gt;\n                &lt;p:autoUpdate/&gt;\n            &lt;/p:growl&gt;\n            \n            &lt;h:panelGrid columns=&quot;2&quot; cellpadding=&quot;5&quot;&gt;\n                &lt;h:outputLabel for=&quot;username&quot; value=&quot;Username:&quot; /&gt;\n                &lt;p:inputText id=&quot;username&quot; value=&quot;#{users.selected.userid}&quot; required=&quot;true&quot; label=&quot;username&quot; /&gt;\n\n                &lt;h:outputLabel for=&quot;password&quot; value=&quot;Password:&quot; /&gt;\n                &lt;p:password id=&quot;password&quot; value=&quot;#{users.selected.password}&quot; required=&quot;true&quot; label=&quot;password&quot; /&gt;\n                \n                &lt;p:commandButton value=&quot;Login&quot; action=&quot;#{users.login()}&quot; /&gt;\n                \n\n            &lt;/h:panelGrid&gt;\n\n        &lt;/h:form&gt;\n</code></pre>\n<p>I tried to update primeface, do the login in the same page without change http session</p>\n"},{"tags":["java","image-processing","alignment","registration","pixel-manipulation"],"comments":[{"owner":{"account_id":3379153,"reputation":195928,"user_id":2836621,"display_name":"Mark Setchell"},"score":0,"creation_date":1699736572,"post_id":77466627,"comment_id":136569755,"body_markdown":"Two representative images and the corresponding best placement by slow method might help give some insights.","body":"Two representative images and the corresponding best placement by slow method might help give some insights."},{"owner":{"account_id":29395563,"reputation":13,"user_id":22900026,"display_name":"No Grad"},"score":0,"creation_date":1699811797,"post_id":77466627,"comment_id":136575298,"body_markdown":"Edited, thanks for the comment","body":"Edited, thanks for the comment"}],"answers":[{"tags":[],"owner":{"account_id":3379153,"reputation":195928,"user_id":2836621,"display_name":"Mark Setchell"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1699888634,"creation_date":1699881721,"answer_id":77474211,"question_id":77466627,"body_markdown":"I don&#39;t speak Java, but I think you want a *&quot;phase correlation&quot;*, which you can do with [scikit-image][1] in Python as follows:\r\n\r\n    #!/usr/bin/env python3\r\n    \r\n    import numpy as np\r\n    from skimage import io\r\n    from skimage.registration import phase_cross_correlation\r\n    \r\n    #&#160;Define image names and load them\r\n    im1name = &#39;MVlJh.png&#39;\r\n    im2name = &#39;XSj05.png&#39;\r\n    im1 = io.imread(im1name)\r\n    im2 = io.imread(im2name)\r\n    \r\n    # Peform phase correlation\r\n    shift, error, diffphase = phase_cross_correlation(im1, im2)\r\n    \r\n    print(f&#39;Detected pixel offset (y, x): {shift}&#39;)\r\n\r\n**Output**\r\n\r\nFor your two images, it outputs the following in around 1 second:\r\n\r\n    Detected pixel offset (y, x): [-97. 171.   0.]\r\n\r\nI guess you could either *&quot;shell out&quot;* to Python with some type of `exec()` or `system()` function, or find a Java implementation of the phase correlation technique.\r\n    \r\n---\r\n\r\nThere is also an **OpenCV** implementation available, which may have Java [bindings][2]. It is noticeably faster than the method above and gets the result in well under 1 second:\r\n\r\n    #!/usr/bin/env python3\r\n    \r\n    import numpy as np\r\n    import cv2 as cv\r\n    \r\n    im1name = &#39;MVlJh.png&#39;\r\n    im2name = &#39;XSj05.png&#39;\r\n    \r\n    im1 = cv.imread(im1name, cv.IMREAD_GRAYSCALE)\r\n    im2 = cv.imread(im2name, cv.IMREAD_GRAYSCALE)\r\n    \r\n    # Peform phase correlation\r\n    retval, response = cv.phaseCorrelate(im1.astype(float), im2.astype(float))\r\n    \r\n    print(f&#39;{retval=}&#39;)\r\n    \r\n**Output**\r\n\r\n    retval=(-171.0011860055988, 97.00465314052326)\r\n\r\n---\r\n\r\nHere&#39;s what I get if I plot one image in green, then the second image in red shifted by the calculated amount.\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\nI used a *&quot;hardmix&quot;* blending mode, so the yellow parts are where red and green coincide. For my own reference, this was my blend command with **ImageMagick**:\r\n\r\n    magick MVlJh.png -fill lime -opaque white \\( XSj05.png -geometry +171-97  -fill red -opaque white  \\) -compose hardmix -composite result.png\r\n\r\n  [1]: https://scikit-image.org/docs/stable/auto_examples/registration/plot_register_translation.html#sphx-glr-auto-examples-registration-plot-register-translation-py\r\n  [2]: https://docs.opencv.org/3.4/d9/d52/tutorial_java_dev_intro.html\r\n  [3]: https://i.stack.imgur.com/Ev4Ch.png","title":"Optimizing Algorithm for Image Translation with maximum common foreground pixel","body":"<p>I don't speak Java, but I think you want a <em>&quot;phase correlation&quot;</em>, which you can do with <a href=\"https://scikit-image.org/docs/stable/auto_examples/registration/plot_register_translation.html#sphx-glr-auto-examples-registration-plot-register-translation-py\" rel=\"nofollow noreferrer\">scikit-image</a> in Python as follows:</p>\n<pre><code>#!/usr/bin/env python3\n\nimport numpy as np\nfrom skimage import io\nfrom skimage.registration import phase_cross_correlation\n\n# Define image names and load them\nim1name = 'MVlJh.png'\nim2name = 'XSj05.png'\nim1 = io.imread(im1name)\nim2 = io.imread(im2name)\n\n# Peform phase correlation\nshift, error, diffphase = phase_cross_correlation(im1, im2)\n\nprint(f'Detected pixel offset (y, x): {shift}')\n</code></pre>\n<p><strong>Output</strong></p>\n<p>For your two images, it outputs the following in around 1 second:</p>\n<pre><code>Detected pixel offset (y, x): [-97. 171.   0.]\n</code></pre>\n<p>I guess you could either <em>&quot;shell out&quot;</em> to Python with some type of <code>exec()</code> or <code>system()</code> function, or find a Java implementation of the phase correlation technique.</p>\n<hr />\n<p>There is also an <strong>OpenCV</strong> implementation available, which may have Java <a href=\"https://docs.opencv.org/3.4/d9/d52/tutorial_java_dev_intro.html\" rel=\"nofollow noreferrer\">bindings</a>. It is noticeably faster than the method above and gets the result in well under 1 second:</p>\n<pre><code>#!/usr/bin/env python3\n\nimport numpy as np\nimport cv2 as cv\n\nim1name = 'MVlJh.png'\nim2name = 'XSj05.png'\n\nim1 = cv.imread(im1name, cv.IMREAD_GRAYSCALE)\nim2 = cv.imread(im2name, cv.IMREAD_GRAYSCALE)\n\n# Peform phase correlation\nretval, response = cv.phaseCorrelate(im1.astype(float), im2.astype(float))\n\nprint(f'{retval=}')\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>retval=(-171.0011860055988, 97.00465314052326)\n</code></pre>\n<hr />\n<p>Here's what I get if I plot one image in green, then the second image in red shifted by the calculated amount.</p>\n<p><a href=\"https://i.stack.imgur.com/Ev4Ch.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ev4Ch.png\" alt=\"enter image description here\" /></a></p>\n<p>I used a <em>&quot;hardmix&quot;</em> blending mode, so the yellow parts are where red and green coincide. For my own reference, this was my blend command with <strong>ImageMagick</strong>:</p>\n<pre><code>magick MVlJh.png -fill lime -opaque white \\( XSj05.png -geometry +171-97  -fill red -opaque white  \\) -compose hardmix -composite result.png\n</code></pre>\n"}],"owner":{"account_id":29395563,"reputation":13,"user_id":22900026,"display_name":"No Grad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77474211,"answer_count":1,"score":1,"last_activity_date":1699888634,"creation_date":1699732297,"question_id":77466627,"body_markdown":"I&#39;m searching for an algorithm to efficiently determine the optimal translation of one 2D image onto another (limited to x and y axes, without rotation). The goal is to find the maximum common pixel, where pixels are considered black on a white background and vice versa. The foreground-to-background ratio is significantly skewed towards the background.\r\n\r\nExample: \r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\nHere, the best translation is [-171, 97].\r\n\r\nI&#39;ve already implemented an algorithm that compares all pixels and iterates through translations by incrementing x and y. However, this approach is time-consuming. To address this, I&#39;ve attempted to speed up the process by focusing only on the translation of white pixels to other white pixels in the second image. Although it works, it&#39;s still slow.\r\n\r\nBelow is the code snippet of my current algorithm (arrayImage is only contains 0 and 1, it&#39;s a binary image).\r\n\r\n\tpublic static int[] findBestTranslation(int[][] arrayImage1, int[][] arrayImage2) {\r\n\t\tint[] bestTranslation = new int[2];\r\n\t\tint bestSimilarity = Integer.MIN_VALUE;\r\n\r\n\t\tint img2Length = arrayImage2.length;\r\n\t\tint img2Width = arrayImage2[0].length;\r\n\t\t\r\n\t\tList&lt;int[]&gt; whitePixelsImage1 = findWhitePixels(arrayImage1);\r\n\t\tList&lt;int[]&gt; whitePixelsImage2 = findWhitePixels(arrayImage2);\r\n\t    boolean[][] checkedOffsets = new boolean[img2Length * 2][img2Width * 2];\r\n\t    \r\n\t\tint i = 0;\r\n\t\tfor (int[] pixel1 : whitePixelsImage1) {\r\n\t\t\tSystem.out.println(i++ + &quot;: &quot; + bestSimilarity);\r\n\t\t\tfor (int[] pixel2 : whitePixelsImage2) {\r\n\t\t\t\t//calculate translation\r\n\t\t\t\tint xOffset = pixel2[0] - pixel1[0];\r\n\t\t\t\tint yOffset = pixel2[1] - pixel1[1];\r\n\r\n\t\t\t    // Check if this offset has been selected before\r\n\t            if (checkedOffsets[xOffset + img2Length][yOffset + img2Width]) {\r\n\t                continue;\r\n\t            } else {\r\n\t                checkedOffsets[xOffset + img2Length][yOffset + img2Width] = true;\r\n\t            }\r\n\r\n\t\t\t\tint similarity = 0;\r\n\t\t\t\tfor (int[] pixelNotTranslated : whitePixelsImage1) {\r\n\t\t\t\t\tint xTranslated = pixelNotTranslated[0] + xOffset;\r\n\t\t\t\t\tint yTranslated = pixelNotTranslated[1] + yOffset;\r\n\t\t\t\t\tif (xTranslated &gt;= 0 &amp;&amp; xTranslated &lt; img2Length &amp;&amp; yTranslated &gt;= 0 &amp;&amp; yTranslated &lt; img2Width) {\r\n\t\t\t\t\t\tsimilarity += arrayImage2[xTranslated][yTranslated];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (similarity &gt; bestSimilarity) {\r\n\t\t\t\t\tbestSimilarity = similarity;\r\n\t\t\t\t\tbestTranslation[0] = xOffset;\r\n\t\t\t\t\tbestTranslation[1] = yOffset;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn bestTranslation;\r\n\t}\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KrdwD.png\r\n  [2]: https://i.stack.imgur.com/Nwrqz.png","title":"Optimizing Algorithm for Image Translation with maximum common foreground pixel","body":"<p>I'm searching for an algorithm to efficiently determine the optimal translation of one 2D image onto another (limited to x and y axes, without rotation). The goal is to find the maximum common pixel, where pixels are considered black on a white background and vice versa. The foreground-to-background ratio is significantly skewed towards the background.</p>\n<p>Example:</p>\n<p><a href=\"https://i.stack.imgur.com/KrdwD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KrdwD.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/Nwrqz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Nwrqz.png\" alt=\"enter image description here\" /></a></p>\n<p>Here, the best translation is [-171, 97].</p>\n<p>I've already implemented an algorithm that compares all pixels and iterates through translations by incrementing x and y. However, this approach is time-consuming. To address this, I've attempted to speed up the process by focusing only on the translation of white pixels to other white pixels in the second image. Although it works, it's still slow.</p>\n<p>Below is the code snippet of my current algorithm (arrayImage is only contains 0 and 1, it's a binary image).</p>\n<pre><code>public static int[] findBestTranslation(int[][] arrayImage1, int[][] arrayImage2) {\n    int[] bestTranslation = new int[2];\n    int bestSimilarity = Integer.MIN_VALUE;\n\n    int img2Length = arrayImage2.length;\n    int img2Width = arrayImage2[0].length;\n    \n    List&lt;int[]&gt; whitePixelsImage1 = findWhitePixels(arrayImage1);\n    List&lt;int[]&gt; whitePixelsImage2 = findWhitePixels(arrayImage2);\n    boolean[][] checkedOffsets = new boolean[img2Length * 2][img2Width * 2];\n    \n    int i = 0;\n    for (int[] pixel1 : whitePixelsImage1) {\n        System.out.println(i++ + &quot;: &quot; + bestSimilarity);\n        for (int[] pixel2 : whitePixelsImage2) {\n            //calculate translation\n            int xOffset = pixel2[0] - pixel1[0];\n            int yOffset = pixel2[1] - pixel1[1];\n\n            // Check if this offset has been selected before\n            if (checkedOffsets[xOffset + img2Length][yOffset + img2Width]) {\n                continue;\n            } else {\n                checkedOffsets[xOffset + img2Length][yOffset + img2Width] = true;\n            }\n\n            int similarity = 0;\n            for (int[] pixelNotTranslated : whitePixelsImage1) {\n                int xTranslated = pixelNotTranslated[0] + xOffset;\n                int yTranslated = pixelNotTranslated[1] + yOffset;\n                if (xTranslated &gt;= 0 &amp;&amp; xTranslated &lt; img2Length &amp;&amp; yTranslated &gt;= 0 &amp;&amp; yTranslated &lt; img2Width) {\n                    similarity += arrayImage2[xTranslated][yTranslated];\n                }\n            }\n\n            if (similarity &gt; bestSimilarity) {\n                bestSimilarity = similarity;\n                bestTranslation[0] = xOffset;\n                bestTranslation[1] = yOffset;\n            }\n        }\n    }\n\n    return bestTranslation;\n}\n</code></pre>\n"},{"tags":["java","spring-cloud","gateway","spring-cloud-gateway"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1699888871,"post_id":77474858,"comment_id":136584141,"body_markdown":"All you need to do is set a property `spring.cloud.gateway.discovery.locator.enabled=true`","body":"All you need to do is set a property <code>spring.cloud.gateway.discovery.locator.enabled=true</code>"},{"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"score":0,"creation_date":1699929683,"post_id":77474858,"comment_id":136589776,"body_markdown":"@spencergibb still, how do I turn `RouteDefinition`s into a `RouteLocator`?","body":"@spencergibb still, how do I turn <code>RouteDefinition</code>s into a <code>RouteLocator</code>?"},{"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"score":0,"creation_date":1699931048,"post_id":77474858,"comment_id":136589890,"body_markdown":"See, I need to modify the routes","body":"See, I need to modify the routes"},{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1700080006,"post_id":77474858,"comment_id":136612113,"body_markdown":"There are no docs on how to do that. If you describe what you need to change, maybe I can help. There are ways to change what predicates and filters are applied via properties and SpEL. Here is the code where we do the transformation https://github.com/spring-cloud/spring-cloud-gateway/blob/main/spring-cloud-gateway-server/src/main/java/org/springframework/cloud/gateway/discovery/DiscoveryClientRouteDefinitionLocator.java#L79","body":"There are no docs on how to do that. If you describe what you need to change, maybe I can help. There are ways to change what predicates and filters are applied via properties and SpEL. Here is the code where we do the transformation <a href=\"https://github.com/spring-cloud/spring-cloud-gateway/blob/main/spring-cloud-gateway-server/src/main/java/org/springframework/cloud/gateway/discovery/DiscoveryClientRouteDefinitionLocator.java#L79\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-gateway/blob/main/&hellip;</a>"}],"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1699887793,"creation_date":1699887793,"question_id":77474858,"body_markdown":"Suppose I want to go fancy and to dynamically create a `RouteLocator` that routes to all registered Eureka services. One challenge I have is that I don&#39;t have a clear idea of how you transform a list (or flux, or whatever) of `RouteDefinition`s to a full-blown `RouteLocator`. I haven&#39;t found an answer to that on SO or in the Spring documentation (at least yet)\r\n\r\nCan you give me a hand with that? Again, the goal is to transform `RouteDefinition`s to a `RouteLocator`\r\n```java\r\n        discoveryClientRouteDefinitionLocator\r\n                .getRouteDefinitions()\r\n                .subscribe(routeDefinition -&gt; {\r\n            // something should happen here, I guess\r\n        });\r\n\r\n```\r\nThe [documentation][1] for `DiscoveryClientRouteDefinitionLocator` is stunningly unpolished (e.g. notice the TODO comment)\r\n\r\n\r\n  [1]: https://javadoc.io/doc/org.springframework.cloud/spring-cloud-gateway-core/2.2.0.RELEASE/org/springframework/cloud/gateway/discovery/DiscoveryClientRouteDefinitionLocator.html","title":"How do I create a RouteLocator from RouteDefinitions?","body":"<p>Suppose I want to go fancy and to dynamically create a <code>RouteLocator</code> that routes to all registered Eureka services. One challenge I have is that I don't have a clear idea of how you transform a list (or flux, or whatever) of <code>RouteDefinition</code>s to a full-blown <code>RouteLocator</code>. I haven't found an answer to that on SO or in the Spring documentation (at least yet)</p>\n<p>Can you give me a hand with that? Again, the goal is to transform <code>RouteDefinition</code>s to a <code>RouteLocator</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>        discoveryClientRouteDefinitionLocator\n                .getRouteDefinitions()\n                .subscribe(routeDefinition -&gt; {\n            // something should happen here, I guess\n        });\n\n</code></pre>\n<p>The <a href=\"https://javadoc.io/doc/org.springframework.cloud/spring-cloud-gateway-core/2.2.0.RELEASE/org/springframework/cloud/gateway/discovery/DiscoveryClientRouteDefinitionLocator.html\" rel=\"nofollow noreferrer\">documentation</a> for <code>DiscoveryClientRouteDefinitionLocator</code> is stunningly unpolished (e.g. notice the TODO comment)</p>\n"},{"tags":["java","maven","continuous-integration","maven-repository"],"comments":[{"owner":{"account_id":112317,"reputation":93929,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1699885638,"post_id":77474532,"comment_id":136583478,"body_markdown":"Put the &quot;.m2&quot; directory as not disposible... in your CI ... and reuse it? What kind of CI solution do you use?","body":"Put the &quot;.m2&quot; directory as not disposible... in your CI ... and reuse it? What kind of CI solution do you use?"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1699885799,"post_id":77474532,"comment_id":136583507,"body_markdown":"Use a Maven repository that is not a local filesystem repository like Nexus or Artifactory.","body":"Use a Maven repository that is not a local filesystem repository like Nexus or Artifactory."},{"owner":{"account_id":5908073,"reputation":3827,"user_id":4649143,"accept_rate":94,"display_name":"shay__"},"score":0,"creation_date":1699886688,"post_id":77474532,"comment_id":136583704,"body_markdown":"@khmarbaise, aled, maybe the question was not clear, please see the edit","body":"@khmarbaise, aled, maybe the question was not clear, please see the edit"},{"owner":{"account_id":112317,"reputation":93929,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1699891725,"post_id":77474532,"comment_id":136584793,"body_markdown":"I exactly meant that...","body":"I exactly meant that..."},{"owner":{"account_id":112317,"reputation":93929,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1699891791,"post_id":77474532,"comment_id":136584808,"body_markdown":"What is also possible for example do some caching as other container based CI systems offer ... (but that cost the price of unpackaging the cached things)...","body":"What is also possible for example do some caching as other container based CI systems offer ... (but that cost the price of unpackaging the cached things)..."}],"answers":[{"tags":[],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1699887768,"creation_date":1699887768,"answer_id":77474855,"question_id":77474532,"body_markdown":"The point is: You shouldn&#39;t dispose the local repository after the build.\r\n\r\nYou should have the local repository in a volume that is mounted into the container. \r\n","title":"Maven multiple local repositories for containerized CI","body":"<p>The point is: You shouldn't dispose the local repository after the build.</p>\n<p>You should have the local repository in a volume that is mounted into the container.</p>\n"}],"owner":{"account_id":5908073,"reputation":3827,"user_id":4649143,"accept_rate":94,"display_name":"shay__"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77474855,"answer_count":1,"score":0,"last_activity_date":1699887768,"creation_date":1699885005,"question_id":77474532,"body_markdown":"Our Java applications have many dependencies, and during CI a lot of time is spent on downloading the artifacts. Since many dependencies are used in almost all applications (Hadoop, Scala, Jackson, etc., various versions), they are downloaded again and again on each application CI. The CI process is containerized for obvious reasons, and the entire .m2 folder is disposed with the container when done.\r\n\r\nAn idea came up to have 2 local repositories:\r\n1. Read only repository, **on a shared mount**, containing all the shared dependencies\r\n2. Writable, disposable repository **on the CI container** for downloading exclusive artifacts \r\n\r\nBut I couldn&#39;t find any way to configure Maven in such a way. Is it possible at all? \r\n\r\n\r\n---------------------\r\nEDIT: the question is about LOCAL repository, where all the artifacts are being downloaded into, for the build itself.\r\n\r\n\r\n\r\nThanks.","title":"Maven multiple local repositories for containerized CI","body":"<p>Our Java applications have many dependencies, and during CI a lot of time is spent on downloading the artifacts. Since many dependencies are used in almost all applications (Hadoop, Scala, Jackson, etc., various versions), they are downloaded again and again on each application CI. The CI process is containerized for obvious reasons, and the entire .m2 folder is disposed with the container when done.</p>\n<p>An idea came up to have 2 local repositories:</p>\n<ol>\n<li>Read only repository, <strong>on a shared mount</strong>, containing all the shared dependencies</li>\n<li>Writable, disposable repository <strong>on the CI container</strong> for downloading exclusive artifacts</li>\n</ol>\n<p>But I couldn't find any way to configure Maven in such a way. Is it possible at all?</p>\n<hr />\n<p>EDIT: the question is about LOCAL repository, where all the artifacts are being downloaded into, for the build itself.</p>\n<p>Thanks.</p>\n"},{"tags":["java","spring-boot","response","httpresponse"],"comments":[{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1665771349,"post_id":74073178,"comment_id":130784014,"body_markdown":"`Response` is an object wrapped in the **HTTP Response** body sent back to the caller.  It&#39;s the **HTTP Response**  that needs to have its status code set to BadRequest.  There are various mechanisms to do this such as @ControllerAdvice, @ExceptionHandler, global exception handler...","body":"<code>Response</code> is an object wrapped in the <b>HTTP Response</b> body sent back to the caller.  It&#39;s the <b>HTTP Response</b>  that needs to have its status code set to BadRequest.  There are various mechanisms to do this such as @ControllerAdvice, @ExceptionHandler, global exception handler..."},{"owner":{"account_id":25785912,"reputation":37,"user_id":19530736,"display_name":"CuriousCat"},"score":0,"creation_date":1665771604,"post_id":74073178,"comment_id":130784091,"body_markdown":"Can you give more details or provide a link where I can read up on this please?","body":"Can you give more details or provide a link where I can read up on this please?"},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":1,"creation_date":1665771734,"post_id":74073178,"comment_id":130784123,"body_markdown":"[This](https://www.baeldung.com/exception-handling-for-rest-with-spring) is a good place to start.","body":"<a href=\"https://www.baeldung.com/exception-handling-for-rest-with-spring\" rel=\"nofollow noreferrer\">This</a> is a good place to start."}],"answers":[{"tags":[],"owner":{"account_id":27799692,"reputation":1,"user_id":21224358,"display_name":"Nicat Mehdiyev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699887567,"creation_date":1699887567,"answer_id":77474827,"question_id":74073178,"body_markdown":"    @Data\r\n    public class BaseResponse&lt;T&gt; {\r\n        private final Boolean status;\r\n        private final String message;\r\n        @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\r\n        @JsonDeserialize(using = LocalDateTimeDeserializer.class)\r\n        @JsonSerialize(using = LocalDateTimeSerializer.class)\r\n        private final LocalDateTime timeStamp;\r\n        private final T payload;\r\n    \r\n        public BaseResponse(Boolean status, String message, T payload) {\r\n            this.status = status;\r\n            this.message = message;\r\n            this.timeStamp = LocalDateTime.now();\r\n            this.payload = payload;\r\n        }","title":"How to return Response appropriately in Springboot","body":"<pre><code>@Data\npublic class BaseResponse&lt;T&gt; {\n    private final Boolean status;\n    private final String message;\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\n    @JsonDeserialize(using = LocalDateTimeDeserializer.class)\n    @JsonSerialize(using = LocalDateTimeSerializer.class)\n    private final LocalDateTime timeStamp;\n    private final T payload;\n\n    public BaseResponse(Boolean status, String message, T payload) {\n        this.status = status;\n        this.message = message;\n        this.timeStamp = LocalDateTime.now();\n        this.payload = payload;\n    }\n</code></pre>\n"}],"owner":{"account_id":25785912,"reputation":37,"user_id":19530736,"display_name":"CuriousCat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":479,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699887567,"creation_date":1665770553,"question_id":74073178,"body_markdown":"I am returning Response in my controller using Springboot. I am throwing an Exception in my service class and returning a particular response code when the exception is caught. However, when ever I hit the endpoint on Postman I still gett `200 ok` even if an exception was caught.\r\n\r\nHere is the service \r\n\r\n \r\n\r\n    public Response signup(RegisterDto register) throws CrossPointException{\r\n            try{\r\n                if (!register.getEmail().matches(EMAIL_PATTERN)){\r\n                    throw new CrossPointException(&quot;Email is invalid&quot;);\r\n                }\r\n                if(!register.getPhoneNumber().matches(PHONE_NUMBER_PATTERN)){\r\n                    throw new CrossPointException(&quot;Phone number is invalid&quot;);\r\n                }\r\n                Optional&lt;User&gt; foundUser = userRepository.findByUsername(register.getEmail());\r\n                if(foundUser.isPresent()){\r\n                    throw new CrossPointException(&quot;Email already exist&quot;);\r\n                }\r\n    \r\n                User user = new User();\r\n                user.setFirstName(register.getFirstName());\r\n                user.setLastName(register.getLastName());\r\n                user.setPhoneNumber(register.getPhoneNumber());\r\n                user.setEmail(register.getEmail());\r\n                user.setPassword(passwordEncoder.encode(register.getPassword()));\r\n                user.setUsername(register.getEmail());\r\n                user.setCreatedAt(new Date());\r\n                user.setEnabled(false);\r\n                user.setRole(Types.Role.BUSINESS);\r\n                user.setRcNumber(register.getRcNumber());\r\n                user.setUserType(register.getUserType());\r\n                user.setRole(Types.Role.INDIVIDUAL);\r\n                user.setPartnerName(register.getPartnerName());\r\n                user.setBusinessRegistered(register.isBusinessRegistered());\r\n                user.setGender(register.getGender());\r\n    \r\n                User savedUser = userRepository.save(user);\r\n    \r\n                basketService.createBasket(savedUser.getId());\r\n    \r\n                GenerateOtpResponseDto response =  otpService.generateOtp();\r\n                mailService.sendMail(new NotificationEmail(&quot;Please Activate your account&quot;,\r\n                        user.getEmail(), &quot;this is your verification cade &quot; + response.getOtp()));\r\n    \r\n                return Response.status(200, &quot;testing this out&quot;).entity(BaseResponse.builder().status(true).\r\n                        responseCode(HttpStatus.OK.toString()).message(&quot;Thanks for signing up. Kindly check your &quot; +\r\n                        &quot;email to activate your account&quot;).data(user).build()).build();\r\n            }catch (CrossPointException ex){\r\n    \r\n                return Response.status(400, HttpStatus.BAD_REQUEST.toString()).entity(\r\n                        BaseResponse.builder()\r\n                                .responseCode(HttpStatus.BAD_REQUEST.toString())\r\n                                .status(false)\r\n                                .message(ex.getMessage())\r\n                                .build()\r\n                ).build();\r\n            }\r\n    \r\n        }\r\n\r\nThis is what my custom BaseResponse looks like \r\n\r\n    public class BaseResponse&lt;T&gt; {\r\n        private boolean status;\r\n        private String message;\r\n        private String responseCode;\r\n        @JsonInclude(JsonInclude.Include.NON_NULL)\r\n        private T data;\r\n    }\r\n\r\nWhen I hit the endpoint I am getting a number of things that are needless as part of the response.\r\n\r\n    {\r\n        &quot;context&quot;: {\r\n            &quot;headers&quot;: {},\r\n            &quot;configuration&quot;: null,\r\n            &quot;entity&quot;: {\r\n                &quot;context&quot;: {\r\n                    &quot;headers&quot;: {},\r\n                    &quot;configuration&quot;: null,\r\n                    &quot;entity&quot;: {\r\n                        &quot;status&quot;: false,\r\n                        &quot;message&quot;: &quot;Email already exist&quot;,\r\n                        &quot;responseCode&quot;: &quot;400 BAD_REQUEST&quot;\r\n                    },\r\n                    &quot;entityType&quot;: &quot;com.crosspoint.crosspointfinance.data.model.BaseResponse&quot;,\r\n                    &quot;entityAnnotations&quot;: [],\r\n                    &quot;entityStream&quot;: {\r\n                        &quot;committed&quot;: false,\r\n                        &quot;closed&quot;: false\r\n                    },\r\n                    &quot;length&quot;: -1,\r\n                    &quot;language&quot;: null,\r\n                    &quot;location&quot;: null,\r\n                    &quot;mediaType&quot;: null,\r\n                    &quot;committed&quot;: false,\r\n                    &quot;date&quot;: null,\r\n                    &quot;lastModified&quot;: null,\r\n                    &quot;allowedMethods&quot;: [],\r\n                    &quot;acceptableMediaTypes&quot;: [\r\n                        {\r\n                            &quot;type&quot;: &quot;*&quot;,\r\n                            &quot;subtype&quot;: &quot;*&quot;,\r\n                            &quot;parameters&quot;: {},\r\n                            &quot;quality&quot;: 1000,\r\n                            &quot;wildcardType&quot;: true,\r\n                            &quot;wildcardSubtype&quot;: true\r\n                        }\r\n                    ],\r\n                    &quot;links&quot;: [],\r\n                    &quot;entityTag&quot;: null,\r\n                    &quot;stringHeaders&quot;: {},\r\n                    &quot;entityClass&quot;: &quot;com.crosspoint.crosspointfinance.data.model.BaseResponse&quot;,\r\n                    &quot;responseCookies&quot;: {},\r\n                    &quot;acceptableLanguages&quot;: [\r\n                        &quot;*&quot;\r\n                    ],\r\n                    &quot;requestCookies&quot;: {},\r\n                    &quot;lengthLong&quot;: -1\r\n                },\r\n                &quot;status&quot;: 400,\r\n                &quot;length&quot;: -1,\r\n                &quot;language&quot;: null,\r\n                &quot;location&quot;: null,\r\n                &quot;mediaType&quot;: null,\r\n                &quot;cookies&quot;: {},\r\n                &quot;metadata&quot;: {},\r\n                &quot;date&quot;: null,\r\n                &quot;lastModified&quot;: null,\r\n                &quot;allowedMethods&quot;: [],\r\n                &quot;entity&quot;: {\r\n                    &quot;status&quot;: false,\r\n                    &quot;message&quot;: &quot;Email already exist&quot;,\r\n                    &quot;responseCode&quot;: &quot;400 BAD_REQUEST&quot;\r\n                },\r\n                &quot;statusInfo&quot;: {\r\n                    &quot;reasonPhrase&quot;: &quot;400 BAD_REQUEST&quot;,\r\n                    &quot;statusCode&quot;: 400,\r\n                    &quot;family&quot;: &quot;CLIENT_ERROR&quot;\r\n                },\r\n                &quot;links&quot;: [],\r\n                &quot;entityTag&quot;: null,\r\n                &quot;stringHeaders&quot;: {},\r\n                &quot;headers&quot;: {}\r\n            },\r\n            &quot;entityType&quot;: &quot;org.glassfish.jersey.message.internal.OutboundJaxrsResponse&quot;,\r\n            &quot;entityAnnotations&quot;: [],\r\n            &quot;entityStream&quot;: {\r\n                &quot;committed&quot;: false,\r\n                &quot;closed&quot;: false\r\n            },\r\n            &quot;length&quot;: -1,\r\n            &quot;language&quot;: null,\r\n            &quot;location&quot;: null,\r\n            &quot;mediaType&quot;: null,\r\n            &quot;committed&quot;: false,\r\n            &quot;date&quot;: null,\r\n            &quot;lastModified&quot;: null,\r\n            &quot;allowedMethods&quot;: [],\r\n            &quot;acceptableMediaTypes&quot;: [\r\n                {\r\n                    &quot;type&quot;: &quot;*&quot;,\r\n                    &quot;subtype&quot;: &quot;*&quot;,\r\n                    &quot;parameters&quot;: {},\r\n                    &quot;quality&quot;: 1000,\r\n                    &quot;wildcardType&quot;: true,\r\n                    &quot;wildcardSubtype&quot;: true\r\n                }\r\n            ],\r\n            &quot;links&quot;: [],\r\n            &quot;entityTag&quot;: null,\r\n            &quot;stringHeaders&quot;: {},\r\n            &quot;entityClass&quot;: &quot;org.glassfish.jersey.message.internal.OutboundJaxrsResponse&quot;,\r\n            &quot;responseCookies&quot;: {},\r\n            &quot;acceptableLanguages&quot;: [\r\n                &quot;*&quot;\r\n            ],\r\n            &quot;requestCookies&quot;: {},\r\n            &quot;lengthLong&quot;: -1\r\n        },\r\n        &quot;status&quot;: 200,\r\n        &quot;length&quot;: -1,\r\n        &quot;language&quot;: null,\r\n        &quot;location&quot;: null,\r\n        &quot;mediaType&quot;: null,\r\n        &quot;cookies&quot;: {},\r\n        &quot;metadata&quot;: {},\r\n        &quot;date&quot;: null,\r\n        &quot;lastModified&quot;: null,\r\n        &quot;allowedMethods&quot;: [],\r\n        &quot;entity&quot;: {\r\n            &quot;context&quot;: {\r\n                &quot;headers&quot;: {},\r\n                &quot;configuration&quot;: null,\r\n                &quot;entity&quot;: {\r\n                    &quot;status&quot;: false,\r\n                    &quot;message&quot;: &quot;Email already exist&quot;,\r\n                    &quot;responseCode&quot;: &quot;400 BAD_REQUEST&quot;\r\n                },\r\n                &quot;entityType&quot;: &quot;com.crosspoint.crosspointfinance.data.model.BaseResponse&quot;,\r\n                &quot;entityAnnotations&quot;: [],\r\n                &quot;entityStream&quot;: {\r\n                    &quot;committed&quot;: false,\r\n                    &quot;closed&quot;: false\r\n                },\r\n                &quot;length&quot;: -1,\r\n                &quot;language&quot;: null,\r\n                &quot;location&quot;: null,\r\n                &quot;mediaType&quot;: null,\r\n                &quot;committed&quot;: false,\r\n                &quot;date&quot;: null,\r\n                &quot;lastModified&quot;: null,\r\n                &quot;allowedMethods&quot;: [],\r\n                &quot;acceptableMediaTypes&quot;: [\r\n                    {\r\n                        &quot;type&quot;: &quot;*&quot;,\r\n                        &quot;subtype&quot;: &quot;*&quot;,\r\n                        &quot;parameters&quot;: {},\r\n                        &quot;quality&quot;: 1000,\r\n                        &quot;wildcardType&quot;: true,\r\n                        &quot;wildcardSubtype&quot;: true\r\n                    }\r\n                ],\r\n                &quot;links&quot;: [],\r\n                &quot;entityTag&quot;: null,\r\n                &quot;stringHeaders&quot;: {},\r\n                &quot;entityClass&quot;: &quot;com.crosspoint.crosspointfinance.data.model.BaseResponse&quot;,\r\n                &quot;responseCookies&quot;: {},\r\n                &quot;acceptableLanguages&quot;: [\r\n                    &quot;*&quot;\r\n                ],\r\n                &quot;requestCookies&quot;: {},\r\n                &quot;lengthLong&quot;: -1\r\n            },\r\n            &quot;status&quot;: 400,\r\n            &quot;length&quot;: -1,\r\n            &quot;language&quot;: null,\r\n            &quot;location&quot;: null,\r\n            &quot;mediaType&quot;: null,\r\n            &quot;cookies&quot;: {},\r\n            &quot;metadata&quot;: {},\r\n            &quot;date&quot;: null,\r\n            &quot;lastModified&quot;: null,\r\n            &quot;allowedMethods&quot;: [],\r\n            &quot;entity&quot;: {\r\n                &quot;status&quot;: false,\r\n                &quot;message&quot;: &quot;Email already exist&quot;,\r\n                &quot;responseCode&quot;: &quot;400 BAD_REQUEST&quot;\r\n            },\r\n            &quot;statusInfo&quot;: {\r\n                &quot;reasonPhrase&quot;: &quot;400 BAD_REQUEST&quot;,\r\n                &quot;statusCode&quot;: 400,\r\n                &quot;family&quot;: &quot;CLIENT_ERROR&quot;\r\n            },\r\n            &quot;links&quot;: [],\r\n            &quot;entityTag&quot;: null,\r\n            &quot;stringHeaders&quot;: {},\r\n            &quot;headers&quot;: {}\r\n        },\r\n        &quot;statusInfo&quot;: &quot;OK&quot;,\r\n        &quot;links&quot;: [],\r\n        &quot;entityTag&quot;: null,\r\n        &quot;stringHeaders&quot;: {},\r\n        &quot;headers&quot;: {}\r\n    }\r\n\r\nThis is response is too lengthy and contains a lot of useless info.\r\n\r\nAll I want is something like this:\r\n\r\n    {\r\n        &quot;status&quot;: true,\r\n        &quot;message&quot;: &quot;Successfully Joined wait-list&quot;,\r\n        &quot;responseCode&quot;: &quot;200 OK&quot;,\r\n        &quot;data&quot;: {\r\n            &quot;id&quot;: &quot;6349a3be93a8523e3f40ee00&quot;,\r\n            &quot;email&quot;: &quot;ojoi@gmail.com&quot;,\r\n            &quot;firstName&quot;: &quot;Ojo&quot;\r\n        }\r\n    }\r\n\r\nThis is what my controller looks like \r\n\r\n      @PostMapping(&quot;/signup&quot;)\r\n        @PermitAll\r\n        public Response signUp(@RequestBody RegisterDto register) throws CrossPointException{\r\n            return Response.ok(auth.signup(register)).build();\r\n        }\r\n\r\n\r\n","title":"How to return Response appropriately in Springboot","body":"<p>I am returning Response in my controller using Springboot. I am throwing an Exception in my service class and returning a particular response code when the exception is caught. However, when ever I hit the endpoint on Postman I still gett <code>200 ok</code> even if an exception was caught.</p>\n<p>Here is the service</p>\n<pre><code>public Response signup(RegisterDto register) throws CrossPointException{\n        try{\n            if (!register.getEmail().matches(EMAIL_PATTERN)){\n                throw new CrossPointException(&quot;Email is invalid&quot;);\n            }\n            if(!register.getPhoneNumber().matches(PHONE_NUMBER_PATTERN)){\n                throw new CrossPointException(&quot;Phone number is invalid&quot;);\n            }\n            Optional&lt;User&gt; foundUser = userRepository.findByUsername(register.getEmail());\n            if(foundUser.isPresent()){\n                throw new CrossPointException(&quot;Email already exist&quot;);\n            }\n\n            User user = new User();\n            user.setFirstName(register.getFirstName());\n            user.setLastName(register.getLastName());\n            user.setPhoneNumber(register.getPhoneNumber());\n            user.setEmail(register.getEmail());\n            user.setPassword(passwordEncoder.encode(register.getPassword()));\n            user.setUsername(register.getEmail());\n            user.setCreatedAt(new Date());\n            user.setEnabled(false);\n            user.setRole(Types.Role.BUSINESS);\n            user.setRcNumber(register.getRcNumber());\n            user.setUserType(register.getUserType());\n            user.setRole(Types.Role.INDIVIDUAL);\n            user.setPartnerName(register.getPartnerName());\n            user.setBusinessRegistered(register.isBusinessRegistered());\n            user.setGender(register.getGender());\n\n            User savedUser = userRepository.save(user);\n\n            basketService.createBasket(savedUser.getId());\n\n            GenerateOtpResponseDto response =  otpService.generateOtp();\n            mailService.sendMail(new NotificationEmail(&quot;Please Activate your account&quot;,\n                    user.getEmail(), &quot;this is your verification cade &quot; + response.getOtp()));\n\n            return Response.status(200, &quot;testing this out&quot;).entity(BaseResponse.builder().status(true).\n                    responseCode(HttpStatus.OK.toString()).message(&quot;Thanks for signing up. Kindly check your &quot; +\n                    &quot;email to activate your account&quot;).data(user).build()).build();\n        }catch (CrossPointException ex){\n\n            return Response.status(400, HttpStatus.BAD_REQUEST.toString()).entity(\n                    BaseResponse.builder()\n                            .responseCode(HttpStatus.BAD_REQUEST.toString())\n                            .status(false)\n                            .message(ex.getMessage())\n                            .build()\n            ).build();\n        }\n\n    }\n</code></pre>\n<p>This is what my custom BaseResponse looks like</p>\n<pre><code>public class BaseResponse&lt;T&gt; {\n    private boolean status;\n    private String message;\n    private String responseCode;\n    @JsonInclude(JsonInclude.Include.NON_NULL)\n    private T data;\n}\n</code></pre>\n<p>When I hit the endpoint I am getting a number of things that are needless as part of the response.</p>\n<pre><code>{\n    &quot;context&quot;: {\n        &quot;headers&quot;: {},\n        &quot;configuration&quot;: null,\n        &quot;entity&quot;: {\n            &quot;context&quot;: {\n                &quot;headers&quot;: {},\n                &quot;configuration&quot;: null,\n                &quot;entity&quot;: {\n                    &quot;status&quot;: false,\n                    &quot;message&quot;: &quot;Email already exist&quot;,\n                    &quot;responseCode&quot;: &quot;400 BAD_REQUEST&quot;\n                },\n                &quot;entityType&quot;: &quot;com.crosspoint.crosspointfinance.data.model.BaseResponse&quot;,\n                &quot;entityAnnotations&quot;: [],\n                &quot;entityStream&quot;: {\n                    &quot;committed&quot;: false,\n                    &quot;closed&quot;: false\n                },\n                &quot;length&quot;: -1,\n                &quot;language&quot;: null,\n                &quot;location&quot;: null,\n                &quot;mediaType&quot;: null,\n                &quot;committed&quot;: false,\n                &quot;date&quot;: null,\n                &quot;lastModified&quot;: null,\n                &quot;allowedMethods&quot;: [],\n                &quot;acceptableMediaTypes&quot;: [\n                    {\n                        &quot;type&quot;: &quot;*&quot;,\n                        &quot;subtype&quot;: &quot;*&quot;,\n                        &quot;parameters&quot;: {},\n                        &quot;quality&quot;: 1000,\n                        &quot;wildcardType&quot;: true,\n                        &quot;wildcardSubtype&quot;: true\n                    }\n                ],\n                &quot;links&quot;: [],\n                &quot;entityTag&quot;: null,\n                &quot;stringHeaders&quot;: {},\n                &quot;entityClass&quot;: &quot;com.crosspoint.crosspointfinance.data.model.BaseResponse&quot;,\n                &quot;responseCookies&quot;: {},\n                &quot;acceptableLanguages&quot;: [\n                    &quot;*&quot;\n                ],\n                &quot;requestCookies&quot;: {},\n                &quot;lengthLong&quot;: -1\n            },\n            &quot;status&quot;: 400,\n            &quot;length&quot;: -1,\n            &quot;language&quot;: null,\n            &quot;location&quot;: null,\n            &quot;mediaType&quot;: null,\n            &quot;cookies&quot;: {},\n            &quot;metadata&quot;: {},\n            &quot;date&quot;: null,\n            &quot;lastModified&quot;: null,\n            &quot;allowedMethods&quot;: [],\n            &quot;entity&quot;: {\n                &quot;status&quot;: false,\n                &quot;message&quot;: &quot;Email already exist&quot;,\n                &quot;responseCode&quot;: &quot;400 BAD_REQUEST&quot;\n            },\n            &quot;statusInfo&quot;: {\n                &quot;reasonPhrase&quot;: &quot;400 BAD_REQUEST&quot;,\n                &quot;statusCode&quot;: 400,\n                &quot;family&quot;: &quot;CLIENT_ERROR&quot;\n            },\n            &quot;links&quot;: [],\n            &quot;entityTag&quot;: null,\n            &quot;stringHeaders&quot;: {},\n            &quot;headers&quot;: {}\n        },\n        &quot;entityType&quot;: &quot;org.glassfish.jersey.message.internal.OutboundJaxrsResponse&quot;,\n        &quot;entityAnnotations&quot;: [],\n        &quot;entityStream&quot;: {\n            &quot;committed&quot;: false,\n            &quot;closed&quot;: false\n        },\n        &quot;length&quot;: -1,\n        &quot;language&quot;: null,\n        &quot;location&quot;: null,\n        &quot;mediaType&quot;: null,\n        &quot;committed&quot;: false,\n        &quot;date&quot;: null,\n        &quot;lastModified&quot;: null,\n        &quot;allowedMethods&quot;: [],\n        &quot;acceptableMediaTypes&quot;: [\n            {\n                &quot;type&quot;: &quot;*&quot;,\n                &quot;subtype&quot;: &quot;*&quot;,\n                &quot;parameters&quot;: {},\n                &quot;quality&quot;: 1000,\n                &quot;wildcardType&quot;: true,\n                &quot;wildcardSubtype&quot;: true\n            }\n        ],\n        &quot;links&quot;: [],\n        &quot;entityTag&quot;: null,\n        &quot;stringHeaders&quot;: {},\n        &quot;entityClass&quot;: &quot;org.glassfish.jersey.message.internal.OutboundJaxrsResponse&quot;,\n        &quot;responseCookies&quot;: {},\n        &quot;acceptableLanguages&quot;: [\n            &quot;*&quot;\n        ],\n        &quot;requestCookies&quot;: {},\n        &quot;lengthLong&quot;: -1\n    },\n    &quot;status&quot;: 200,\n    &quot;length&quot;: -1,\n    &quot;language&quot;: null,\n    &quot;location&quot;: null,\n    &quot;mediaType&quot;: null,\n    &quot;cookies&quot;: {},\n    &quot;metadata&quot;: {},\n    &quot;date&quot;: null,\n    &quot;lastModified&quot;: null,\n    &quot;allowedMethods&quot;: [],\n    &quot;entity&quot;: {\n        &quot;context&quot;: {\n            &quot;headers&quot;: {},\n            &quot;configuration&quot;: null,\n            &quot;entity&quot;: {\n                &quot;status&quot;: false,\n                &quot;message&quot;: &quot;Email already exist&quot;,\n                &quot;responseCode&quot;: &quot;400 BAD_REQUEST&quot;\n            },\n            &quot;entityType&quot;: &quot;com.crosspoint.crosspointfinance.data.model.BaseResponse&quot;,\n            &quot;entityAnnotations&quot;: [],\n            &quot;entityStream&quot;: {\n                &quot;committed&quot;: false,\n                &quot;closed&quot;: false\n            },\n            &quot;length&quot;: -1,\n            &quot;language&quot;: null,\n            &quot;location&quot;: null,\n            &quot;mediaType&quot;: null,\n            &quot;committed&quot;: false,\n            &quot;date&quot;: null,\n            &quot;lastModified&quot;: null,\n            &quot;allowedMethods&quot;: [],\n            &quot;acceptableMediaTypes&quot;: [\n                {\n                    &quot;type&quot;: &quot;*&quot;,\n                    &quot;subtype&quot;: &quot;*&quot;,\n                    &quot;parameters&quot;: {},\n                    &quot;quality&quot;: 1000,\n                    &quot;wildcardType&quot;: true,\n                    &quot;wildcardSubtype&quot;: true\n                }\n            ],\n            &quot;links&quot;: [],\n            &quot;entityTag&quot;: null,\n            &quot;stringHeaders&quot;: {},\n            &quot;entityClass&quot;: &quot;com.crosspoint.crosspointfinance.data.model.BaseResponse&quot;,\n            &quot;responseCookies&quot;: {},\n            &quot;acceptableLanguages&quot;: [\n                &quot;*&quot;\n            ],\n            &quot;requestCookies&quot;: {},\n            &quot;lengthLong&quot;: -1\n        },\n        &quot;status&quot;: 400,\n        &quot;length&quot;: -1,\n        &quot;language&quot;: null,\n        &quot;location&quot;: null,\n        &quot;mediaType&quot;: null,\n        &quot;cookies&quot;: {},\n        &quot;metadata&quot;: {},\n        &quot;date&quot;: null,\n        &quot;lastModified&quot;: null,\n        &quot;allowedMethods&quot;: [],\n        &quot;entity&quot;: {\n            &quot;status&quot;: false,\n            &quot;message&quot;: &quot;Email already exist&quot;,\n            &quot;responseCode&quot;: &quot;400 BAD_REQUEST&quot;\n        },\n        &quot;statusInfo&quot;: {\n            &quot;reasonPhrase&quot;: &quot;400 BAD_REQUEST&quot;,\n            &quot;statusCode&quot;: 400,\n            &quot;family&quot;: &quot;CLIENT_ERROR&quot;\n        },\n        &quot;links&quot;: [],\n        &quot;entityTag&quot;: null,\n        &quot;stringHeaders&quot;: {},\n        &quot;headers&quot;: {}\n    },\n    &quot;statusInfo&quot;: &quot;OK&quot;,\n    &quot;links&quot;: [],\n    &quot;entityTag&quot;: null,\n    &quot;stringHeaders&quot;: {},\n    &quot;headers&quot;: {}\n}\n</code></pre>\n<p>This is response is too lengthy and contains a lot of useless info.</p>\n<p>All I want is something like this:</p>\n<pre><code>{\n    &quot;status&quot;: true,\n    &quot;message&quot;: &quot;Successfully Joined wait-list&quot;,\n    &quot;responseCode&quot;: &quot;200 OK&quot;,\n    &quot;data&quot;: {\n        &quot;id&quot;: &quot;6349a3be93a8523e3f40ee00&quot;,\n        &quot;email&quot;: &quot;ojoi@gmail.com&quot;,\n        &quot;firstName&quot;: &quot;Ojo&quot;\n    }\n}\n</code></pre>\n<p>This is what my controller looks like</p>\n<pre><code>  @PostMapping(&quot;/signup&quot;)\n    @PermitAll\n    public Response signUp(@RequestBody RegisterDto register) throws CrossPointException{\n        return Response.ok(auth.signup(register)).build();\n    }\n</code></pre>\n"},{"tags":["java","rest"],"comments":[{"owner":{"account_id":124495,"reputation":33043,"user_id":319618,"accept_rate":82,"display_name":"fredley"},"score":0,"creation_date":1319707977,"post_id":7913864,"comment_id":9665241,"body_markdown":"A quick google comes up with [prospreads](http://www.prospreads.com/index.php?fb).","body":"A quick google comes up with <a href=\"http://www.prospreads.com/index.php?fb\" rel=\"nofollow noreferrer\">prospreads</a>."},{"owner":{"account_id":483515,"reputation":133,"user_id":898617,"display_name":"user898617"},"score":0,"creation_date":1329478505,"post_id":7913864,"comment_id":11770858,"body_markdown":"https://github.com/cityindex/CIAPI.Java","body":"<a href=\"https://github.com/cityindex/CIAPI.Java\" rel=\"nofollow noreferrer\">github.com/cityindex/CIAPI.Java</a>"}],"answers":[{"tags":[],"owner":{"account_id":1567881,"reputation":341,"user_id":1566117,"display_name":"Robert Morschel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699887529,"creation_date":1404199139,"answer_id":24504525,"question_id":7913864,"body_markdown":"IG Group have a cfd and spreadbet API. https://labs.ig.com/\r\n\r\nThe API provides REST-based and streaming access to a range of asset classes (including indices, forex, commodities, binaries and options), and includes functionality to:\r\n\r\n - Trade using risk management tools such as stops and limits\r\n - View real-time and historical market prices\r\n - Analyse market instrument and client sentiment information\r\n - Review account balances and trade history","title":"Spread Betting API?","body":"<p>IG Group have a cfd and spreadbet API. <a href=\"https://labs.ig.com/\" rel=\"nofollow noreferrer\">https://labs.ig.com/</a></p>\n<p>The API provides REST-based and streaming access to a range of asset classes (including indices, forex, commodities, binaries and options), and includes functionality to:</p>\n<ul>\n<li>Trade using risk management tools such as stops and limits</li>\n<li>View real-time and historical market prices</li>\n<li>Analyse market instrument and client sentiment information</li>\n<li>Review account balances and trade history</li>\n</ul>\n"}],"owner":{"account_id":861,"reputation":904,"user_id":1126,"accept_rate":70,"display_name":"TiGz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1549,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699887529,"creation_date":1319706794,"question_id":7913864,"body_markdown":"Does anyone know of any Java or REST API for any Financial Markets Spread Betting provider?\r\n\r\nI want to automate opening and closing of positions in stocks listed on the S&amp;P 500 etc.\r\n\r\nFailing a defined API - does anyone know of any Spread Betting providers that have a simple Web API that could be easily automated via a Web Robot of some sort?","title":"Spread Betting API?","body":"<p>Does anyone know of any Java or REST API for any Financial Markets Spread Betting provider?</p>\n\n<p>I want to automate opening and closing of positions in stocks listed on the S&amp;P 500 etc.</p>\n\n<p>Failing a defined API - does anyone know of any Spread Betting providers that have a simple Web API that could be easily automated via a Web Robot of some sort?</p>\n"},{"tags":["java","spring-boot","maven","aws-codeartifact"],"comments":[{"owner":{"account_id":19635311,"reputation":1574,"user_id":14372685,"display_name":"tbjorch"},"score":0,"creation_date":1698598454,"post_id":77381164,"comment_id":136423031,"body_markdown":"What is the reason behind wanting separate repositories? Generally it sounds a bit strange to me since the common approach is to externalize configuration from the application to make it possible to deploy in multiple environments.","body":"What is the reason behind wanting separate repositories? Generally it sounds a bit strange to me since the common approach is to externalize configuration from the application to make it possible to deploy in multiple environments."},{"owner":{"account_id":6006179,"reputation":2415,"user_id":4718042,"display_name":"Bradley D"},"score":0,"creation_date":1699551123,"post_id":77381164,"comment_id":136549496,"body_markdown":"The reasoning I&#39;m being given is possibility over overwriting the jar file prod points to.  I don&#39;t know if that&#39;s even possible with code artifact.  I guess it&#39;s entirely &#39;possible&#39;, but in any case we have a build script that automatically creates the next sequence of the jar version so it&#39;s not likely.  Yes, &#39;separate repository&#39; might be the wrong way to go about it.  I have used UDeploy in an enterprise environment.  But I didn&#39;t set that up.  Right now I&#39;m just looking for a quick and dirty solution to separate deployment to diff environments.","body":"The reasoning I&#39;m being given is possibility over overwriting the jar file prod points to.  I don&#39;t know if that&#39;s even possible with code artifact.  I guess it&#39;s entirely &#39;possible&#39;, but in any case we have a build script that automatically creates the next sequence of the jar version so it&#39;s not likely.  Yes, &#39;separate repository&#39; might be the wrong way to go about it.  I have used UDeploy in an enterprise environment.  But I didn&#39;t set that up.  Right now I&#39;m just looking for a quick and dirty solution to separate deployment to diff environments."}],"answers":[{"tags":[],"owner":{"account_id":6006179,"reputation":2415,"user_id":4718042,"display_name":"Bradley D"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699887356,"creation_date":1699887356,"answer_id":77474804,"question_id":77381164,"body_markdown":"Was able to solve this by doing this in pom.xml: \r\n\r\n    &lt;distributionManagement&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;backend-prod&lt;/id&gt;\r\n            &lt;name&gt;Production Repository&lt;/name&gt;\r\n            &lt;url&gt;https://mydomain-XXXXXXXXXXXX.d.codeartifact.us-east-1.amazonaws.com/maven/backend-prod/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n        &lt;snapshotRepository&gt;\r\n            &lt;id&gt;backend-test&lt;/id&gt;\r\n            &lt;name&gt;Test Repository&lt;/name&gt;\r\n            &lt;url&gt;https://mydomain-XXXXXXXXXXXX.d.codeartifact.us-east-1.amazonaws.com/maven/backend-test/&lt;/url&gt;\r\n        &lt;/snapshotRepository&gt;\r\n    &lt;/distributionManagement&gt;\r\n\r\nWith the above, maven will look for a version with -SNAPSHOT appended.  So in our build bash script, we are already checking for ENV, which is either &#39;test&#39; or &#39;prod&#39;.  If test, then we append -SNAPSHOT to the version and maven handles the rest - uploading the artifact to the snapshotRepository","title":"AWS CodeArtifact - separate repositories for test and production environments","body":"<p>Was able to solve this by doing this in pom.xml:</p>\n<pre><code>&lt;distributionManagement&gt;\n    &lt;repository&gt;\n        &lt;id&gt;backend-prod&lt;/id&gt;\n        &lt;name&gt;Production Repository&lt;/name&gt;\n        &lt;url&gt;https://mydomain-XXXXXXXXXXXX.d.codeartifact.us-east-1.amazonaws.com/maven/backend-prod/&lt;/url&gt;\n    &lt;/repository&gt;\n    &lt;snapshotRepository&gt;\n        &lt;id&gt;backend-test&lt;/id&gt;\n        &lt;name&gt;Test Repository&lt;/name&gt;\n        &lt;url&gt;https://mydomain-XXXXXXXXXXXX.d.codeartifact.us-east-1.amazonaws.com/maven/backend-test/&lt;/url&gt;\n    &lt;/snapshotRepository&gt;\n&lt;/distributionManagement&gt;\n</code></pre>\n<p>With the above, maven will look for a version with -SNAPSHOT appended.  So in our build bash script, we are already checking for ENV, which is either 'test' or 'prod'.  If test, then we append -SNAPSHOT to the version and maven handles the rest - uploading the artifact to the snapshotRepository</p>\n"}],"owner":{"account_id":6006179,"reputation":2415,"user_id":4718042,"display_name":"Bradley D"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699887356,"creation_date":1698525757,"question_id":77381164,"body_markdown":"We recently built a core JPA layer application that we manage on AWS CodeArtifact.  We have multiple applications that consume this jar.  No problem there.  Management wants separate repositories for test and production.  But upon research using phind (chat GPT) states that \r\n\r\n&gt; &quot;When using AWS CodeArtifact to share a jar across multiple\r\n&gt; applications, it is generally recommended to use the same repository\r\n&gt; for both test and production.&quot;\r\n\r\nI was inclined to think the same way, but management wants them separated.\r\n\r\nOur applications are maven/spring boot.  The repositories and other AWS config stuff are configured in settings.xml.  I would be switching between repos depending on the `spring.profiles.active` property. \r\n\r\nFirst, would like the opinions on which way to go and/or any sample code for your configuration.","title":"AWS CodeArtifact - separate repositories for test and production environments","body":"<p>We recently built a core JPA layer application that we manage on AWS CodeArtifact.  We have multiple applications that consume this jar.  No problem there.  Management wants separate repositories for test and production.  But upon research using phind (chat GPT) states that</p>\n<blockquote>\n<p>&quot;When using AWS CodeArtifact to share a jar across multiple\napplications, it is generally recommended to use the same repository\nfor both test and production.&quot;</p>\n</blockquote>\n<p>I was inclined to think the same way, but management wants them separated.</p>\n<p>Our applications are maven/spring boot.  The repositories and other AWS config stuff are configured in settings.xml.  I would be switching between repos depending on the <code>spring.profiles.active</code> property.</p>\n<p>First, would like the opinions on which way to go and/or any sample code for your configuration.</p>\n"},{"tags":["java","spring-boot","jackson"],"comments":[{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1699279725,"post_id":77431622,"comment_id":136507950,"body_markdown":"Probably custom [serialization](https://www.baeldung.com/jackson-custom-serialization) / [deserialization](https://www.baeldung.com/jackson-deserialization).  How the customization is registered would depend on if the behavior is needed globally (all `String`s for all payloads) or just for those class fields mentioned in the question.","body":"Probably custom <a href=\"https://www.baeldung.com/jackson-custom-serialization\" rel=\"nofollow noreferrer\">serialization</a> / <a href=\"https://www.baeldung.com/jackson-deserialization\" rel=\"nofollow noreferrer\">deserialization</a>.  How the customization is registered would depend on if the behavior is needed globally (all <code>String</code>s for all payloads) or just for those class fields mentioned in the question."}],"answers":[{"tags":[],"owner":{"account_id":18239208,"reputation":149,"user_id":13276541,"display_name":"Ahmed Mera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699887261,"creation_date":1699887261,"answer_id":77474788,"question_id":77431622,"body_markdown":"You can use the **`@JsonIgnoreProperties(ignoreUnknown = true)`** &amp; the default value.\r\n\r\nES:\r\n```\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class RequestBody {\r\n  String firstName = &quot;&quot;;\r\n  String middleName = &quot;&quot;;\r\n  String lastName = &quot;&quot;;\r\n\r\n // Getter &amp; Setter methods \r\n\r\n}\r\n```","title":"How to configure Jackson to control the behaviour of null fields?","body":"<p>You can use the <strong><code>@JsonIgnoreProperties(ignoreUnknown = true)</code></strong> &amp; the default value.</p>\n<p>ES:</p>\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\npublic class RequestBody {\n  String firstName = &quot;&quot;;\n  String middleName = &quot;&quot;;\n  String lastName = &quot;&quot;;\n\n // Getter &amp; Setter methods \n\n}\n</code></pre>\n"}],"owner":{"account_id":23101335,"reputation":1,"user_id":17210714,"display_name":"Ruturaj Dilip Mestry"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699887261,"creation_date":1699278913,"question_id":77431622,"body_markdown":"The class to which postman request body is mapped looks like this\r\n```\r\npublic class RequestBody {\r\n  String firstName;\r\n  String middleName;\r\n  String lastName;\r\n}\r\n```\r\n\r\npostman request body looks like this\r\n{\r\n&quot;firstName&quot; : &quot;somename&quot;\r\n}\r\n\r\nNow my requirements are\r\n1) When jackson is deserializing (From json to POJO), I want to map implicit and explicit null string values to &quot; &quot; (Empty string).\r\n2) When jackson is serializing (From POJO to json), I want to map implicit and explicit null string values to &quot; &quot; (Empty string).\r\n\r\nProblem I noticed is that when you implement jackson serialization and deserialization for String data type then it doesnt read explicit and implicit null values.\r\n\r\nI tried Includes.ALWAYS but it didnt help to read implicit null values from json.","title":"How to configure Jackson to control the behaviour of null fields?","body":"<p>The class to which postman request body is mapped looks like this</p>\n<pre><code>public class RequestBody {\n  String firstName;\n  String middleName;\n  String lastName;\n}\n</code></pre>\n<p>postman request body looks like this\n{\n&quot;firstName&quot; : &quot;somename&quot;\n}</p>\n<p>Now my requirements are</p>\n<ol>\n<li>When jackson is deserializing (From json to POJO), I want to map implicit and explicit null string values to &quot; &quot; (Empty string).</li>\n<li>When jackson is serializing (From POJO to json), I want to map implicit and explicit null string values to &quot; &quot; (Empty string).</li>\n</ol>\n<p>Problem I noticed is that when you implement jackson serialization and deserialization for String data type then it doesnt read explicit and implicit null values.</p>\n<p>I tried Includes.ALWAYS but it didnt help to read implicit null values from json.</p>\n"},{"tags":["java","spring","client","openapi","openapi-generator"],"owner":{"account_id":17945128,"reputation":96,"user_id":13039593,"display_name":"mk03"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1699886596,"creation_date":1699886596,"question_id":77474703,"body_markdown":"I have generated a client using OpenFeign but I wanted to generate it using open-api-generator, using a .yaml file.\r\nI tried to use the following :\r\n\r\n    &lt;generatorName&gt;spring&lt;/generatorName&gt;\r\n    &lt;library&gt;spring-cloud&lt;/library&gt;\r\n\r\nAnd also \r\n\r\n    &lt;generatorName&gt;java&lt;/generatorName&gt;\r\n    &lt;library&gt;feign&lt;/library&gt;\r\n\r\nIn openapi-generator-maven-plugin.\r\nHowever, I was not able to find any documentation related to it, like how could I create the client with these configurations (customOkHttpClient, encoder and decoder) that I created using OpenFeign using above generator? Any example would be helpful, thanks!\r\n\r\n    @Import(FeignClientsConfiguration.class)\r\n    @Configuration\r\n    @Slf4j\r\n    public class PetsClientConfiguration {\r\n        X509TrustManager trustManager =\r\n                new X509TrustManager() {\r\n                    public X509Certificate[] getAcceptedIssuers() {\r\n                        return new X509Certificate[0];\r\n                    }\r\n    \r\n                    public void checkClientTrusted(X509Certificate[] certs, String authType) {}\r\n    \r\n                    public void checkServerTrusted(X509Certificate[] certs, String authType) {}\r\n                };\r\n    \r\n        SSLContext sslContext = null;\r\n    \r\n        @Bean\r\n        public PetsClient getPetsClient(\r\n                @Value(&quot;${services.pets.endPoint}&quot;) String petsEndPoint, Contract contract) {\r\n    \r\n            try {\r\n                sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n                sslContext.init(null, new X509TrustManager[]{trustManager}, new SecureRandom());\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(&quot;An error occurred during SSLContext initialization&quot;, e);\r\n            }\r\n            OkHttpClient customOkHttpClient =\r\n                    new OkHttpClient.Builder()\r\n                            .sslSocketFactory(sslContext.getSocketFactory(), trustManager)\r\n                            .hostnameVerifier((hostname, session) -&gt; true)\r\n                            .build();\r\n    \r\n            return Feign.builder()\r\n                    .client(new feign.okhttp.OkHttpClient(customOkHttpClient))\r\n                    .encoder(petsEncoder())\r\n                    .decoder(petsDecoder())\r\n                    .contract(contract)\r\n                    .logLevel(Logger.Level.BASIC)\r\n                    .errorDecoder(new ErrorDecoder.Default())\r\n                    .target(PetsClient.class, petsEndPoint);\r\n        }\r\n    \r\n        public Decoder petsDecoder() {\r\n            return (response, type) -&gt; {\r\n                String bodyStr = Util.toString(response.body().asReader(Util.UTF_8));\r\n                JavaType javaType = TypeFactory.defaultInstance().constructType(type);\r\n                return new XmlMapper()\r\n                        .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)\r\n                        .readValue(bodyStr, javaType);\r\n            };\r\n        }\r\n    \r\n        public Encoder petsEncoder() {\r\n            return (response, type, template) -&gt; {\r\n                try {\r\n                    byte[] xmlData =\r\n                            new XmlMapper()\r\n                                    .configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false)\r\n                                    .writeValueAsBytes(response);\r\n                    template.body(xmlData, StandardCharsets.UTF_8);\r\n                    template.header(&quot;Content-Type&quot;, &quot;application/xml&quot;);\r\n                } catch (Exception e) {\r\n                    throw new RuntimeException(&quot;Not able to initialize XML decoder for Pets&quot;, e);\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n","title":"How to use open-api-generator to generate Client with configuration?","body":"<p>I have generated a client using OpenFeign but I wanted to generate it using open-api-generator, using a .yaml file.\nI tried to use the following :</p>\n<pre><code>&lt;generatorName&gt;spring&lt;/generatorName&gt;\n&lt;library&gt;spring-cloud&lt;/library&gt;\n</code></pre>\n<p>And also</p>\n<pre><code>&lt;generatorName&gt;java&lt;/generatorName&gt;\n&lt;library&gt;feign&lt;/library&gt;\n</code></pre>\n<p>In openapi-generator-maven-plugin.\nHowever, I was not able to find any documentation related to it, like how could I create the client with these configurations (customOkHttpClient, encoder and decoder) that I created using OpenFeign using above generator? Any example would be helpful, thanks!</p>\n<pre><code>@Import(FeignClientsConfiguration.class)\n@Configuration\n@Slf4j\npublic class PetsClientConfiguration {\n    X509TrustManager trustManager =\n            new X509TrustManager() {\n                public X509Certificate[] getAcceptedIssuers() {\n                    return new X509Certificate[0];\n                }\n\n                public void checkClientTrusted(X509Certificate[] certs, String authType) {}\n\n                public void checkServerTrusted(X509Certificate[] certs, String authType) {}\n            };\n\n    SSLContext sslContext = null;\n\n    @Bean\n    public PetsClient getPetsClient(\n            @Value(&quot;${services.pets.endPoint}&quot;) String petsEndPoint, Contract contract) {\n\n        try {\n            sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n            sslContext.init(null, new X509TrustManager[]{trustManager}, new SecureRandom());\n        } catch (Exception e) {\n            throw new RuntimeException(&quot;An error occurred during SSLContext initialization&quot;, e);\n        }\n        OkHttpClient customOkHttpClient =\n                new OkHttpClient.Builder()\n                        .sslSocketFactory(sslContext.getSocketFactory(), trustManager)\n                        .hostnameVerifier((hostname, session) -&gt; true)\n                        .build();\n\n        return Feign.builder()\n                .client(new feign.okhttp.OkHttpClient(customOkHttpClient))\n                .encoder(petsEncoder())\n                .decoder(petsDecoder())\n                .contract(contract)\n                .logLevel(Logger.Level.BASIC)\n                .errorDecoder(new ErrorDecoder.Default())\n                .target(PetsClient.class, petsEndPoint);\n    }\n\n    public Decoder petsDecoder() {\n        return (response, type) -&gt; {\n            String bodyStr = Util.toString(response.body().asReader(Util.UTF_8));\n            JavaType javaType = TypeFactory.defaultInstance().constructType(type);\n            return new XmlMapper()\n                    .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)\n                    .readValue(bodyStr, javaType);\n        };\n    }\n\n    public Encoder petsEncoder() {\n        return (response, type, template) -&gt; {\n            try {\n                byte[] xmlData =\n                        new XmlMapper()\n                                .configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false)\n                                .writeValueAsBytes(response);\n                template.body(xmlData, StandardCharsets.UTF_8);\n                template.header(&quot;Content-Type&quot;, &quot;application/xml&quot;);\n            } catch (Exception e) {\n                throw new RuntimeException(&quot;Not able to initialize XML decoder for Pets&quot;, e);\n            }\n        };\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-scrollview"],"answers":[{"tags":[],"owner":{"account_id":392004,"reputation":4854,"user_id":753000,"accept_rate":38,"display_name":"Till - Appviewer.io"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1699872553,"creation_date":1699872553,"answer_id":77473307,"question_id":77473071,"body_markdown":"Have you tried\r\n\r\n`scrollView.canScrollVertically(1)`\r\n\r\n(positive value to check scrolling down)?\r\n\r\nYou&#39;d do this when your view is created (outside of your `onScrollChange` because it might not get called).\r\nBut pay attention that the views probably need to be drawn and measured first:\r\n```\r\nscrollView.post(() -&gt; {\r\n    boolean canScroll = scrollView.canScrollVertically(1)\r\n});\r\n\r\n```\r\n---\r\n\r\nIf this doesn&#39;t work, how about checking whether the textViewHeight is smaller than your scrollView&#39;s height? Again making sure that the views are already drawn and measured.","title":"How to check if the ScrollView is actually displayed or not?","body":"<p>Have you tried</p>\n<p><code>scrollView.canScrollVertically(1)</code></p>\n<p>(positive value to check scrolling down)?</p>\n<p>You'd do this when your view is created (outside of your <code>onScrollChange</code> because it might not get called).\nBut pay attention that the views probably need to be drawn and measured first:</p>\n<pre><code>scrollView.post(() -&gt; {\n    boolean canScroll = scrollView.canScrollVertically(1)\n});\n\n</code></pre>\n<hr />\n<p>If this doesn't work, how about checking whether the textViewHeight is smaller than your scrollView's height? Again making sure that the views are already drawn and measured.</p>\n"},{"tags":[],"owner":{"account_id":21636597,"reputation":383,"user_id":15959434,"display_name":"TIMBLOCKER"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699872730,"creation_date":1699872730,"answer_id":77473324,"question_id":77473071,"body_markdown":"Instead of using a RecyclerView and manually enabling the button, you could do the following:\r\n\r\nNest the Recyclerview in a parent Layout (e.g. ConstraintLayout) and make it so that the Button is below the RecyclerView. You could then Nest it with a (vertical) ScrollView and disable the Bar entirely with `android:scrollbars=&quot;none&quot;`. The Layout would then behave like you want it to. You would have to scroll down in the RecyclerView entriely until the Scrolling of the ScrollView would kick in. Then you would scroll down to the Button and it would appear. This seems to be a good soulution to your problem, because you dont have a &quot;in-between&quot; state.","title":"How to check if the ScrollView is actually displayed or not?","body":"<p>Instead of using a RecyclerView and manually enabling the button, you could do the following:</p>\n<p>Nest the Recyclerview in a parent Layout (e.g. ConstraintLayout) and make it so that the Button is below the RecyclerView. You could then Nest it with a (vertical) ScrollView and disable the Bar entirely with <code>android:scrollbars=&quot;none&quot;</code>. The Layout would then behave like you want it to. You would have to scroll down in the RecyclerView entriely until the Scrolling of the ScrollView would kick in. Then you would scroll down to the Button and it would appear. This seems to be a good soulution to your problem, because you dont have a &quot;in-between&quot; state.</p>\n"},{"tags":[],"owner":{"account_id":11363645,"reputation":2645,"user_id":8331157,"display_name":"BenjyTec"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1699886519,"creation_date":1699873155,"answer_id":77473370,"question_id":77473071,"body_markdown":"In extension to the answer by Till, only check if the `ScrollView` is scrollable after the `View` has already been drawn:\r\n\r\n    ViewTreeObserver observer = scrollView.getViewTreeObserver();\r\n    observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {\r\n        @Override\r\n        public void onGlobalLayout() {\r\n            if (!scrollView.canScrollVertically(1)) {\r\n                myButton.setEnabled(true);\r\n            }\r\n        }\r\n    });","title":"How to check if the ScrollView is actually displayed or not?","body":"<p>In extension to the answer by Till, only check if the <code>ScrollView</code> is scrollable after the <code>View</code> has already been drawn:</p>\n<pre><code>ViewTreeObserver observer = scrollView.getViewTreeObserver();\nobserver.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {\n    @Override\n    public void onGlobalLayout() {\n        if (!scrollView.canScrollVertically(1)) {\n            myButton.setEnabled(true);\n        }\n    }\n});\n</code></pre>\n"}],"owner":{"account_id":22086285,"reputation":31,"user_id":16345082,"display_name":"di1um"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1699886519,"creation_date":1699869865,"question_id":77473071,"body_markdown":"I have this dynamic text which will change. I need to enable the button of this layout only if the user read all the texts. (scrolled to the bottom). This is working with the method that I have implemented. \r\nscrollView.setOnScrollChangeListener(new View.OnScrollChangeListener() {\r\n            \r\n\r\n    @Override\r\n    public void onScrollChange(View view, int i, int i1, int i2, int i3) {\r\n                    if (isTextViewScrolledToBottom(scrollView, mTextViewNotPDF)) {\r\n                        mAgreeButton.setEnabled(true);\r\n                        mAgreeButton.setBackground(getResources().getDrawable(R.drawable.button_bg_black_rounded));\r\n                    } else {\r\n                        mAgreeButton.setEnabled(false);\r\n                        mAgreeButton.setBackground(getResources().getDrawable(R.drawable.button_bg_grey_rounded));\r\n                    }\r\n                }\r\n            });\r\n\r\n\r\n    private boolean isTextViewScrolledToBottom(ScrollView scrollView, TextView mTextViewNotPDF) {\r\n            int scrollViewHeight = scrollView.getHeight();\r\n            int textViewHeight = mTextViewNotPDF.getHeight();\r\n            int scrollY = scrollView.getScrollY();\r\n            return (textViewHeight) &lt;= (scrollY + scrollViewHeight);\r\n        }\r\n    \t\r\n    \t\r\n\r\n\t\t\r\n\t\r\nBut when the text is not long enough to enable the scrollView, this method (onScrollChange)will not be called and button is disabled. \r\n\r\nI have tested these so far without a success. \r\n\r\n    Boolean isAct =  scrollView.isEnabled(); // will be true no matter it&#39;s showing or not.  \r\n    Boolean isAct1 = scrollView.isFocusable(); // will be true no matter it&#39;s showing or not.  \r\n\r\n","title":"How to check if the ScrollView is actually displayed or not?","body":"<p>I have this dynamic text which will change. I need to enable the button of this layout only if the user read all the texts. (scrolled to the bottom). This is working with the method that I have implemented.\nscrollView.setOnScrollChangeListener(new View.OnScrollChangeListener() {</p>\n<pre><code>@Override\npublic void onScrollChange(View view, int i, int i1, int i2, int i3) {\n                if (isTextViewScrolledToBottom(scrollView, mTextViewNotPDF)) {\n                    mAgreeButton.setEnabled(true);\n                    mAgreeButton.setBackground(getResources().getDrawable(R.drawable.button_bg_black_rounded));\n                } else {\n                    mAgreeButton.setEnabled(false);\n                    mAgreeButton.setBackground(getResources().getDrawable(R.drawable.button_bg_grey_rounded));\n                }\n            }\n        });\n\n\nprivate boolean isTextViewScrolledToBottom(ScrollView scrollView, TextView mTextViewNotPDF) {\n        int scrollViewHeight = scrollView.getHeight();\n        int textViewHeight = mTextViewNotPDF.getHeight();\n        int scrollY = scrollView.getScrollY();\n        return (textViewHeight) &lt;= (scrollY + scrollViewHeight);\n    }\n    \n    \n\n    \n</code></pre>\n<p>But when the text is not long enough to enable the scrollView, this method (onScrollChange)will not be called and button is disabled.</p>\n<p>I have tested these so far without a success.</p>\n<pre><code>Boolean isAct =  scrollView.isEnabled(); // will be true no matter it's showing or not.  \nBoolean isAct1 = scrollView.isFocusable(); // will be true no matter it's showing or not.  \n</code></pre>\n"},{"tags":["java","spring","spring-cloud","gateway","spring-cloud-gateway"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1699634524,"post_id":77461495,"comment_id":136560862,"body_markdown":"Have you verified the response is not 200 via other means? Also, why are you writing a custom filter rather than just using `ModifyResponseBodyGatewayFilterFactory` directly?","body":"Have you verified the response is not 200 via other means? Also, why are you writing a custom filter rather than just using <code>ModifyResponseBodyGatewayFilterFactory</code> directly?"},{"owner":{"account_id":120465,"reputation":1592,"user_id":312929,"accept_rate":70,"display_name":"rojanu"},"score":0,"creation_date":1699706940,"post_id":77461495,"comment_id":136566789,"body_markdown":"@spencergibb I attempted to use a `RouteLocator` as in updated question when it didn&#39;t work, I thought it might work with a GlobaFilter","body":"@spencergibb I attempted to use a <code>RouteLocator</code> as in updated question when it didn&#39;t work, I thought it might work with a GlobaFilter"},{"owner":{"account_id":120465,"reputation":1592,"user_id":312929,"accept_rate":70,"display_name":"rojanu"},"score":0,"creation_date":1699872452,"post_id":77461495,"comment_id":136581110,"body_markdown":"The reason for `200` was that I was checking the http code in `pre` filter","body":"The reason for <code>200</code> was that I was checking the http code in <code>pre</code> filter"}],"answers":[{"tags":[],"owner":{"account_id":120465,"reputation":1592,"user_id":312929,"accept_rate":70,"display_name":"rojanu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699886508,"creation_date":1699833956,"answer_id":77471170,"question_id":77461495,"body_markdown":"I got it to work thanks to @spencergibb comment and an example found [here][1]\r\nHere is the my updated working code that satisfies my needs \r\n\r\n```\r\n@Component\r\npublic class ErrorResponseGlobalPostFilter implements GlobalFilter, Ordered {\r\n    private static final String REASON = &quot;reason&quot;;\r\n    private static final String USER_MESSAGE = &quot;userMessage&quot;;\r\n    private final ModifyResponseBodyGatewayFilterFactory modifyResponseBodyGatewayFilterFactory;\r\n    private final ModifyResponseBodyGatewayFilterFactory.Config config;\r\n\r\n    public ErrorResponseGlobalPostFilter(\r\n            ModifyResponseBodyGatewayFilterFactory modifyResponseBodyGatewayFilterFactory) {\r\n        this.modifyResponseBodyGatewayFilterFactory = modifyResponseBodyGatewayFilterFactory;\r\n        config = new ModifyResponseBodyGatewayFilterFactory.Config();\r\n        config.setInClass(JsonNode.class);\r\n        config.setOutClass(JsonNode.class);\r\n        config.setRewriteFunction(JsonNode.class, JsonNode.class, (swe, body) -&gt; Optional.ofNullable(body)\r\n                .map(rewriteReasonToUserMessageFunction(swe, body))\r\n                .orElseGet(Mono::empty));\r\n    }\r\n\r\n    @Override\r\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\r\n        return chain.filter(\r\n                exchange.mutate().response(new ErrorResponseBuilder(exchange)).build());\r\n    }\r\n\r\n    private Function&lt;JsonNode, Mono&lt;JsonNode&gt;&gt; rewriteReasonToUserMessageFunction(\r\n            ServerWebExchange swe, JsonNode body) {\r\n        return s -&gt; {\r\n            HttpStatusCode statusCode = swe.getResponse().getStatusCode();\r\n            if (statusCode != null &amp;&amp; statusCode.isError() &amp;&amp; body instanceof ObjectNode obj &amp;&amp; body.has(REASON)) {\r\n                obj.set(USER_MESSAGE, obj.get(REASON));\r\n                obj.remove(REASON);\r\n                return Mono.just(obj);\r\n            }\r\n            return Mono.just(body);\r\n        };\r\n    }\r\n\r\n    protected class ErrorResponseBuilder extends ServerHttpResponseDecorator {\r\n\r\n        private final ServerWebExchange exchange;\r\n\r\n        public ErrorResponseBuilder(ServerWebExchange exchange) {\r\n            super(exchange.getResponse());\r\n            this.exchange = exchange;\r\n        }\r\n\r\n        @Override\r\n        @NonNull\r\n        public Mono&lt;Void&gt; writeWith(@NonNull Publisher&lt;? extends DataBuffer&gt; publishedBody) {\r\n            HttpStatusCode statusCode = exchange.getResponse().getStatusCode();\r\n            if (statusCode != null\r\n                    &amp;&amp; statusCode.isError()\r\n                    &amp;&amp; !Objects.equals(\r\n                            exchange.getResponse().getHeaders().getContentType(), MediaType.APPLICATION_OCTET_STREAM)) {\r\n                ModifyResponseBodyGatewayFilterFactory.ModifiedServerHttpResponse modifiedServerHttpResponse =\r\n                        modifyResponseBodyGatewayFilterFactory.new ModifiedServerHttpResponse(exchange, config);\r\n\r\n                return modifiedServerHttpResponse.writeWith(publishedBody);\r\n            }\r\n            return super.writeWith(publishedBody);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public int getOrder() {\r\n        return -1;\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://github.com/einsteinarbert/spring-webfux-response-logging/blob/master/gateway-service-filter-properties/src/main/java/com/javainuse/config/GatewayCustomFilter.java","title":"Spring Gateway mutate response body on isError","body":"<p>I got it to work thanks to @spencergibb comment and an example found <a href=\"https://github.com/einsteinarbert/spring-webfux-response-logging/blob/master/gateway-service-filter-properties/src/main/java/com/javainuse/config/GatewayCustomFilter.java\" rel=\"nofollow noreferrer\">here</a>\nHere is the my updated working code that satisfies my needs</p>\n<pre><code>@Component\npublic class ErrorResponseGlobalPostFilter implements GlobalFilter, Ordered {\n    private static final String REASON = &quot;reason&quot;;\n    private static final String USER_MESSAGE = &quot;userMessage&quot;;\n    private final ModifyResponseBodyGatewayFilterFactory modifyResponseBodyGatewayFilterFactory;\n    private final ModifyResponseBodyGatewayFilterFactory.Config config;\n\n    public ErrorResponseGlobalPostFilter(\n            ModifyResponseBodyGatewayFilterFactory modifyResponseBodyGatewayFilterFactory) {\n        this.modifyResponseBodyGatewayFilterFactory = modifyResponseBodyGatewayFilterFactory;\n        config = new ModifyResponseBodyGatewayFilterFactory.Config();\n        config.setInClass(JsonNode.class);\n        config.setOutClass(JsonNode.class);\n        config.setRewriteFunction(JsonNode.class, JsonNode.class, (swe, body) -&gt; Optional.ofNullable(body)\n                .map(rewriteReasonToUserMessageFunction(swe, body))\n                .orElseGet(Mono::empty));\n    }\n\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n        return chain.filter(\n                exchange.mutate().response(new ErrorResponseBuilder(exchange)).build());\n    }\n\n    private Function&lt;JsonNode, Mono&lt;JsonNode&gt;&gt; rewriteReasonToUserMessageFunction(\n            ServerWebExchange swe, JsonNode body) {\n        return s -&gt; {\n            HttpStatusCode statusCode = swe.getResponse().getStatusCode();\n            if (statusCode != null &amp;&amp; statusCode.isError() &amp;&amp; body instanceof ObjectNode obj &amp;&amp; body.has(REASON)) {\n                obj.set(USER_MESSAGE, obj.get(REASON));\n                obj.remove(REASON);\n                return Mono.just(obj);\n            }\n            return Mono.just(body);\n        };\n    }\n\n    protected class ErrorResponseBuilder extends ServerHttpResponseDecorator {\n\n        private final ServerWebExchange exchange;\n\n        public ErrorResponseBuilder(ServerWebExchange exchange) {\n            super(exchange.getResponse());\n            this.exchange = exchange;\n        }\n\n        @Override\n        @NonNull\n        public Mono&lt;Void&gt; writeWith(@NonNull Publisher&lt;? extends DataBuffer&gt; publishedBody) {\n            HttpStatusCode statusCode = exchange.getResponse().getStatusCode();\n            if (statusCode != null\n                    &amp;&amp; statusCode.isError()\n                    &amp;&amp; !Objects.equals(\n                            exchange.getResponse().getHeaders().getContentType(), MediaType.APPLICATION_OCTET_STREAM)) {\n                ModifyResponseBodyGatewayFilterFactory.ModifiedServerHttpResponse modifiedServerHttpResponse =\n                        modifyResponseBodyGatewayFilterFactory.new ModifiedServerHttpResponse(exchange, config);\n\n                return modifiedServerHttpResponse.writeWith(publishedBody);\n            }\n            return super.writeWith(publishedBody);\n        }\n    }\n\n    @Override\n    public int getOrder() {\n        return -1;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":120465,"reputation":1592,"user_id":312929,"accept_rate":70,"display_name":"rojanu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699886508,"creation_date":1699633698,"question_id":77461495,"body_markdown":"I have requirement to mutate the response body for 4xx and 5xx responses.\r\n\r\nincoming response would look like\r\n```\r\n{\r\n  &quot;reason&quot;: &quot;sample reason&quot;\r\n}\r\n```\r\nI need to change that to \r\n```\r\n{\r\n  &quot;userMessage&quot;: &quot;sample reason&quot;\r\n}\r\n```\r\n\r\nHere is my attempt\r\n```\r\npublic class ErrorResponseFilter implements GlobalFilter, Ordered {\r\n    private static final String REASON = &quot;reason&quot;;\r\n    private static final String USER_MESSAGE = &quot;userMessage&quot;;\r\n    private final ModifyResponseBodyGatewayFilterFactory modifyResponseBodyGatewayFilterFactory;\r\n\r\n    public ErrorResponseFilter(ModifyResponseBodyGatewayFilterFactory modifyResponseBodyGatewayFilterFactory) {\r\n        this.modifyResponseBodyGatewayFilterFactory = modifyResponseBodyGatewayFilterFactory;\r\n    }\r\n\r\n    @Override\r\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\r\n        return modifyResponseBodyGatewayFilterFactory\r\n                .apply(c -&gt; c.setInClass(JsonNode.class)\r\n                        .setOutClass(JsonNode.class)\r\n                        .setRewriteFunction((RewriteFunction&lt;JsonNode, JsonNode&gt;) (exchange1, body) -&gt; {\r\n                            if (null == body) return Mono.empty();\r\n\r\n                            var originalResponse = exchange1.getResponse();\r\n                            log.info(&quot;COOOODEDDDE: &quot; + originalResponse.getStatusCode());\r\n                            HttpStatusCode statusCode = originalResponse.getStatusCode();\r\n\r\n                            if (statusCode != null &amp;&amp; !statusCode.isError()) {\r\n                                if (body.isObject()) {\r\n                                    ObjectNode node = (ObjectNode) body;\r\n                                    node.set(USER_MESSAGE, node.get(REASON));\r\n                                    node.remove(REASON);\r\n                                }\r\n                            }\r\n                            return Mono.just(body);\r\n                        })\r\n                )\r\n                .filter(exchange, chain);\r\n    }\r\n\r\n    @Override\r\n    public int getOrder() {\r\n        return Ordered.HIGHEST_PRECEDENCE;\r\n    }\r\n}\r\n```\r\nHowever, this doesn&#39;t work, HTTP code is `200 OK` all the time\r\n---\r\n**Update 1:**\r\n\r\nI had attempted to use a bean\r\n```\r\n @Bean\r\n    public RouteLocator routes(RouteLocatorBuilder builder) {\r\n        return builder.routes()\r\n                .route(&quot;rewrite_response_user_message&quot;, r -&gt; r.alwaysTrue()\r\n                        .filters(f -&gt; f.modifyResponseBody(JsonNode.class, JsonNode.class, (exchange, u) -&gt; {\r\n                            var originalResponse = exchange.getResponse();\r\n                            HttpStatusCode statusCode = originalResponse.getStatusCode();\r\n                            log.info(&quot;HTTP CODE: &quot; + originalResponse.getStatusCode());\r\n                            if(u == null) return Mono.empty();\r\n                            if (statusCode != null &amp;&amp; statusCode.isError()) {\r\n                                if (u.isObject()) {\r\n                                    ObjectNode node = (ObjectNode) u;\r\n                                    node.set(&quot;userMessage&quot;, node.get(&quot;response&quot;));\r\n                                    node.remove(&quot;response&quot;);\r\n                                }\r\n                            }\r\n                            return Mono.just(u);\r\n                        }))\r\n                        .uri(uri))\r\n                .build();\r\n    }\r\n```\r\nWithout the bean a route returns `204 NO CONTENT` but when the bean is enabled the same prints `404` in above code.\r\n\r\n**Update 2:**\r\n\r\nLooks like, a filter that applies to all routes cannot be added via Java DSL.\r\n\r\n**Update 3:**\r\nI got it to work for some scenarios with following code and using it as a `default-filter`\r\n\r\n```\r\npublic class ErrorReasonToUserMessageGatewayFilterFactory\r\n        extends AbstractGatewayFilterFactory&lt;ErrorReasonToUserMessageGatewayFilterFactory.Config&gt; implements Ordered {\r\n    private static final String REASON = &quot;reason&quot;;\r\n    private static final String USER_MESSAGE = &quot;userMessage&quot;;\r\n    private final ModifyResponseBodyGatewayFilterFactory modifyResponseBodyFilterFactory;\r\n\r\n    public ErrorReasonToUserMessageGatewayFilterFactory(\r\n            ModifyResponseBodyGatewayFilterFactory modifyResponseBodyFilterFactory) {\r\n        super(Config.class);\r\n        this.modifyResponseBodyFilterFactory = modifyResponseBodyFilterFactory;\r\n    }\r\n\r\n    @Override\r\n    public GatewayFilter apply(Config config) {\r\n        return modifyResponseBodyFilterFactory.apply(\r\n                c -&gt; c.setRewriteFunction(JsonNode.class, JsonNode.class, (swe, body) -&gt; Optional.ofNullable(body)\r\n                        .map(rewriteReasonToUserMessageFunction(swe, body))\r\n                        .orElseGet(Mono::empty)));\r\n    }\r\n\r\n    private Function&lt;JsonNode, Mono&lt;JsonNode&gt;&gt; rewriteReasonToUserMessageFunction(\r\n            ServerWebExchange swe, JsonNode body) {\r\n        return s -&gt; {\r\n            HttpStatusCode statusCode = swe.getResponse().getStatusCode();\r\n            if (statusCode != null &amp;&amp; statusCode.isError() &amp;&amp; body instanceof ObjectNode obj &amp;&amp; body.has(REASON)) {\r\n                obj.set(USER_MESSAGE, obj.get(REASON));\r\n                obj.remove(REASON);\r\n                return Mono.just(obj);\r\n            }\r\n            return Mono.just(body);\r\n        };\r\n    }\r\n\r\n    @Override\r\n    public int getOrder() {\r\n        return Ordered.HIGHEST_PRECEDENCE;\r\n    }\r\n\r\n    public static class Config {}\r\n}\r\n```\r\n\r\nAbove work for scenarios where either the `Content-Type: application/json` or missing. it fails for `application/octet-stream` as the payload cannot be converted to JsonNode.\r\n\r\nQuestion is how can I apply the above filter conditionally to 4xx/5xx and/or payload cannot be converted to JsonNode?","title":"Spring Gateway mutate response body on isError","body":"<p>I have requirement to mutate the response body for 4xx and 5xx responses.</p>\n<p>incoming response would look like</p>\n<pre><code>{\n  &quot;reason&quot;: &quot;sample reason&quot;\n}\n</code></pre>\n<p>I need to change that to</p>\n<pre><code>{\n  &quot;userMessage&quot;: &quot;sample reason&quot;\n}\n</code></pre>\n<p>Here is my attempt</p>\n<pre><code>public class ErrorResponseFilter implements GlobalFilter, Ordered {\n    private static final String REASON = &quot;reason&quot;;\n    private static final String USER_MESSAGE = &quot;userMessage&quot;;\n    private final ModifyResponseBodyGatewayFilterFactory modifyResponseBodyGatewayFilterFactory;\n\n    public ErrorResponseFilter(ModifyResponseBodyGatewayFilterFactory modifyResponseBodyGatewayFilterFactory) {\n        this.modifyResponseBodyGatewayFilterFactory = modifyResponseBodyGatewayFilterFactory;\n    }\n\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n        return modifyResponseBodyGatewayFilterFactory\n                .apply(c -&gt; c.setInClass(JsonNode.class)\n                        .setOutClass(JsonNode.class)\n                        .setRewriteFunction((RewriteFunction&lt;JsonNode, JsonNode&gt;) (exchange1, body) -&gt; {\n                            if (null == body) return Mono.empty();\n\n                            var originalResponse = exchange1.getResponse();\n                            log.info(&quot;COOOODEDDDE: &quot; + originalResponse.getStatusCode());\n                            HttpStatusCode statusCode = originalResponse.getStatusCode();\n\n                            if (statusCode != null &amp;&amp; !statusCode.isError()) {\n                                if (body.isObject()) {\n                                    ObjectNode node = (ObjectNode) body;\n                                    node.set(USER_MESSAGE, node.get(REASON));\n                                    node.remove(REASON);\n                                }\n                            }\n                            return Mono.just(body);\n                        })\n                )\n                .filter(exchange, chain);\n    }\n\n    @Override\n    public int getOrder() {\n        return Ordered.HIGHEST_PRECEDENCE;\n    }\n}\n</code></pre>\n<h2>However, this doesn't work, HTTP code is <code>200 OK</code> all the time</h2>\n<p><strong>Update 1:</strong></p>\n<p>I had attempted to use a bean</p>\n<pre><code> @Bean\n    public RouteLocator routes(RouteLocatorBuilder builder) {\n        return builder.routes()\n                .route(&quot;rewrite_response_user_message&quot;, r -&gt; r.alwaysTrue()\n                        .filters(f -&gt; f.modifyResponseBody(JsonNode.class, JsonNode.class, (exchange, u) -&gt; {\n                            var originalResponse = exchange.getResponse();\n                            HttpStatusCode statusCode = originalResponse.getStatusCode();\n                            log.info(&quot;HTTP CODE: &quot; + originalResponse.getStatusCode());\n                            if(u == null) return Mono.empty();\n                            if (statusCode != null &amp;&amp; statusCode.isError()) {\n                                if (u.isObject()) {\n                                    ObjectNode node = (ObjectNode) u;\n                                    node.set(&quot;userMessage&quot;, node.get(&quot;response&quot;));\n                                    node.remove(&quot;response&quot;);\n                                }\n                            }\n                            return Mono.just(u);\n                        }))\n                        .uri(uri))\n                .build();\n    }\n</code></pre>\n<p>Without the bean a route returns <code>204 NO CONTENT</code> but when the bean is enabled the same prints <code>404</code> in above code.</p>\n<p><strong>Update 2:</strong></p>\n<p>Looks like, a filter that applies to all routes cannot be added via Java DSL.</p>\n<p><strong>Update 3:</strong>\nI got it to work for some scenarios with following code and using it as a <code>default-filter</code></p>\n<pre><code>public class ErrorReasonToUserMessageGatewayFilterFactory\n        extends AbstractGatewayFilterFactory&lt;ErrorReasonToUserMessageGatewayFilterFactory.Config&gt; implements Ordered {\n    private static final String REASON = &quot;reason&quot;;\n    private static final String USER_MESSAGE = &quot;userMessage&quot;;\n    private final ModifyResponseBodyGatewayFilterFactory modifyResponseBodyFilterFactory;\n\n    public ErrorReasonToUserMessageGatewayFilterFactory(\n            ModifyResponseBodyGatewayFilterFactory modifyResponseBodyFilterFactory) {\n        super(Config.class);\n        this.modifyResponseBodyFilterFactory = modifyResponseBodyFilterFactory;\n    }\n\n    @Override\n    public GatewayFilter apply(Config config) {\n        return modifyResponseBodyFilterFactory.apply(\n                c -&gt; c.setRewriteFunction(JsonNode.class, JsonNode.class, (swe, body) -&gt; Optional.ofNullable(body)\n                        .map(rewriteReasonToUserMessageFunction(swe, body))\n                        .orElseGet(Mono::empty)));\n    }\n\n    private Function&lt;JsonNode, Mono&lt;JsonNode&gt;&gt; rewriteReasonToUserMessageFunction(\n            ServerWebExchange swe, JsonNode body) {\n        return s -&gt; {\n            HttpStatusCode statusCode = swe.getResponse().getStatusCode();\n            if (statusCode != null &amp;&amp; statusCode.isError() &amp;&amp; body instanceof ObjectNode obj &amp;&amp; body.has(REASON)) {\n                obj.set(USER_MESSAGE, obj.get(REASON));\n                obj.remove(REASON);\n                return Mono.just(obj);\n            }\n            return Mono.just(body);\n        };\n    }\n\n    @Override\n    public int getOrder() {\n        return Ordered.HIGHEST_PRECEDENCE;\n    }\n\n    public static class Config {}\n}\n</code></pre>\n<p>Above work for scenarios where either the <code>Content-Type: application/json</code> or missing. it fails for <code>application/octet-stream</code> as the payload cannot be converted to JsonNode.</p>\n<p>Question is how can I apply the above filter conditionally to 4xx/5xx and/or payload cannot be converted to JsonNode?</p>\n"},{"tags":["java","soap","cxf","soap-client","cxf-client"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1699986263,"post_id":77474691,"comment_id":136598631,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":18551117,"reputation":1,"user_id":13517343,"display_name":"Rahul Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699886447,"creation_date":1699886447,"question_id":77474691,"body_markdown":"I am consuming a soap 1.2 wsdl with springboot and CXF, however the request I am sending is being geneated with SOAP 1.1 namespace. I am running into soap fault.\r\n\r\nI am looking for a way to send a request with soap 1.2 envelope.","title":"CXF client - how to set SoapVersion on CXF port without Spring","body":"<p>I am consuming a soap 1.2 wsdl with springboot and CXF, however the request I am sending is being geneated with SOAP 1.1 namespace. I am running into soap fault.</p>\n<p>I am looking for a way to send a request with soap 1.2 envelope.</p>\n"},{"tags":["java","maven-plugin","checkstyle"],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699884722,"creation_date":1699884722,"answer_id":77474498,"question_id":77474171,"body_markdown":"Checkstyle does not (yet) support inheriting or embedding configuration (apart from using external DTDs, which is disabled by default because of security concerns). See https://github.com/checkstyle/checkstyle/issues/2873 for a discussion about adding it.\r\n\r\nAs far as I know, the only way to currently do this is to copy the existing configuration, tweak it as necessary, and use that instead. That does mean that you need to actively maintain the file, because any changes to the provided config will need to be copied to your own.","title":"Check style custom indentation","body":"<p>Checkstyle does not (yet) support inheriting or embedding configuration (apart from using external DTDs, which is disabled by default because of security concerns). See <a href=\"https://github.com/checkstyle/checkstyle/issues/2873\" rel=\"nofollow noreferrer\">https://github.com/checkstyle/checkstyle/issues/2873</a> for a discussion about adding it.</p>\n<p>As far as I know, the only way to currently do this is to copy the existing configuration, tweak it as necessary, and use that instead. That does mean that you need to actively maintain the file, because any changes to the provided config will need to be copied to your own.</p>\n"},{"tags":[],"owner":{"account_id":7147029,"reputation":1189,"user_id":5462398,"accept_rate":0,"display_name":"zur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699886352,"creation_date":1699886352,"answer_id":77474679,"question_id":77474171,"body_markdown":"      &lt;dependencies&gt;\r\n                        &lt;dependency&gt;\r\n                            &lt;groupId&gt;com.puppycrawl.tools&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;checkstyle&lt;/artifactId&gt;\r\n                            &lt;version&gt;10.9.0&lt;/version&gt;\r\n                        &lt;/dependency&gt;\r\n                    &lt;/dependencies&gt;\r\n\r\nAdding above to plugin fixed the problem. Thanks.","title":"Check style custom indentation","body":"<pre><code>  &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;com.puppycrawl.tools&lt;/groupId&gt;\n                        &lt;artifactId&gt;checkstyle&lt;/artifactId&gt;\n                        &lt;version&gt;10.9.0&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n</code></pre>\n<p>Adding above to plugin fixed the problem. Thanks.</p>\n"}],"owner":{"account_id":7147029,"reputation":1189,"user_id":5462398,"accept_rate":0,"display_name":"zur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1699886352,"creation_date":1699881282,"question_id":77474171,"body_markdown":"`TLDR;`\r\n\r\nHow to configure indentation and other configuration for `maven` `build` `plugin` by modifying `google_checks.xml`.\r\n\r\n\r\nDetails:\r\n\r\nPOM snipets:\r\n\r\n    ...\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n    \t    ...\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.3.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;configLocation&gt;google_checks.xml&lt;/configLocation&gt;\r\n                        &lt;consoleOutput&gt;true&lt;/consoleOutput&gt;\r\n                        &lt;failsOnError&gt;true&lt;/failsOnError&gt;\r\n                        &lt;suppressionsLocation&gt;checkstyle-suppressions.xml&lt;/suppressionsLocation&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;check&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n                ...\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    ...\r\n\r\n\r\n[https://raw.githubusercontent.com/checkstyle/checkstyle/master/src/main/resources/google_checks.xml][1]\r\n\r\nSniper from `google_checks.xml`\r\n\r\n     &lt;module name=&quot;Indentation&quot;&gt;\r\n                &lt;property name=&quot;basicOffset&quot; value=&quot;4&quot;/&gt;\r\n                &lt;property name=&quot;braceAdjustment&quot; value=&quot;4&quot;/&gt;\r\n                &lt;property name=&quot;caseIndent&quot; value=&quot;4&quot;/&gt;\r\n                &lt;property name=&quot;throwsIndent&quot; value=&quot;4&quot;/&gt;\r\n                &lt;property name=&quot;lineWrappingIndentation&quot; value=&quot;4&quot;/&gt;\r\n                &lt;property name=&quot;arrayInitIndent&quot; value=&quot;4&quot;/&gt;\r\n            &lt;/module&gt;\r\n\r\n\r\n`SomeClass.java`\r\n\r\n    public class SomeClass&lt;T&gt; implements SomeInterface,\r\n                                         SomeInterface1 {\r\n    \r\n        private final CommentTableModel delegate; // Line with error. \r\n\r\n`member def modifier&#39; has incorrect indentation level 4, expected level should be 2.`\r\n\r\n**The problem to solve:**\r\n\r\nI want it to remain at 4 ... I want check style to not report it as error. **How can I do that?**\r\n\r\n\r\n  [1]: https://raw.githubusercontent.com/checkstyle/checkstyle/master/src/main/resources/google_checks.xml","title":"Check style custom indentation","body":"<p><code>TLDR;</code></p>\n<p>How to configure indentation and other configuration for <code>maven</code> <code>build</code> <code>plugin</code> by modifying <code>google_checks.xml</code>.</p>\n<p>Details:</p>\n<p>POM snipets:</p>\n<pre><code>...\n    &lt;build&gt;\n        &lt;plugins&gt;\n        ...\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;configLocation&gt;google_checks.xml&lt;/configLocation&gt;\n                    &lt;consoleOutput&gt;true&lt;/consoleOutput&gt;\n                    &lt;failsOnError&gt;true&lt;/failsOnError&gt;\n                    &lt;suppressionsLocation&gt;checkstyle-suppressions.xml&lt;/suppressionsLocation&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;check&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            ...\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n...\n</code></pre>\n<p><a href=\"https://raw.githubusercontent.com/checkstyle/checkstyle/master/src/main/resources/google_checks.xml\" rel=\"nofollow noreferrer\">https://raw.githubusercontent.com/checkstyle/checkstyle/master/src/main/resources/google_checks.xml</a></p>\n<p>Sniper from <code>google_checks.xml</code></p>\n<pre><code> &lt;module name=&quot;Indentation&quot;&gt;\n            &lt;property name=&quot;basicOffset&quot; value=&quot;4&quot;/&gt;\n            &lt;property name=&quot;braceAdjustment&quot; value=&quot;4&quot;/&gt;\n            &lt;property name=&quot;caseIndent&quot; value=&quot;4&quot;/&gt;\n            &lt;property name=&quot;throwsIndent&quot; value=&quot;4&quot;/&gt;\n            &lt;property name=&quot;lineWrappingIndentation&quot; value=&quot;4&quot;/&gt;\n            &lt;property name=&quot;arrayInitIndent&quot; value=&quot;4&quot;/&gt;\n        &lt;/module&gt;\n</code></pre>\n<p><code>SomeClass.java</code></p>\n<pre><code>public class SomeClass&lt;T&gt; implements SomeInterface,\n                                     SomeInterface1 {\n\n    private final CommentTableModel delegate; // Line with error. \n</code></pre>\n<p><code>member def modifier' has incorrect indentation level 4, expected level should be 2.</code></p>\n<p><strong>The problem to solve:</strong></p>\n<p>I want it to remain at 4 ... I want check style to not report it as error. <strong>How can I do that?</strong></p>\n"},{"tags":["java","sql","hibernate"],"answers":[{"tags":[],"owner":{"account_id":461547,"reputation":3094,"user_id":863311,"accept_rate":62,"display_name":"Simon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699885964,"creation_date":1699885964,"answer_id":77474632,"question_id":77473524,"body_markdown":"I&#39;m not 100% this works, but how about: Map PART_TAB as polymorphic single table.\r\n\r\n    @Entity\r\n    @Table(name=&quot;PART_TAB&quot;)\r\n    @DiscriminatorColumn(name=&quot;elart&quot;, discriminatorType=DiscriminatorType.STRING)\r\n    @Inheritance(strategy=InheritanceType.SINGLE_TABLE)\r\n    abstract class PartTab {\r\n    \r\n    }\r\n    \r\n    \r\n    @Entity\r\n    @DiscriminatorValue(value=&quot;Part&quot;)\r\n    class PartTabPart extends PartTab {\r\n    \r\n        @ManyToOne(targetEntity=Article .class)\r\n        @JoinColumn(name=&quot;FK_elex&quot;, nullable=true)\r\n        @Fetch(FetchMode.SELECT)\r\n        private Article article;\r\n    \r\n    }\r\n    \r\n    @Entity\r\n    @DiscriminatorValue(value=&quot;Operation&quot;)\r\n    class PartTabOperation extends PartTab {\r\n    \r\n        @ManyToOne(targetEntity=Operation.class)\r\n        @JoinColumn(name=&quot;FK_elex&quot;, nullable=true)\r\n        @Fetch(FetchMode.SELECT)\r\n        private Operation operation;\r\n    \r\n    \r\n    }\r\n\r\nThen you have several options how to deal with the polymorphism. Crude instanceofs, or make PartTab a generic, or introduce `isArticle()` and `isOperation()` on the abstract class, to name a few.","title":"Hibernate variable with reference to one table or another depending on the value of column","body":"<p>I'm not 100% this works, but how about: Map PART_TAB as polymorphic single table.</p>\n<pre><code>@Entity\n@Table(name=&quot;PART_TAB&quot;)\n@DiscriminatorColumn(name=&quot;elart&quot;, discriminatorType=DiscriminatorType.STRING)\n@Inheritance(strategy=InheritanceType.SINGLE_TABLE)\nabstract class PartTab {\n\n}\n\n\n@Entity\n@DiscriminatorValue(value=&quot;Part&quot;)\nclass PartTabPart extends PartTab {\n\n    @ManyToOne(targetEntity=Article .class)\n    @JoinColumn(name=&quot;FK_elex&quot;, nullable=true)\n    @Fetch(FetchMode.SELECT)\n    private Article article;\n\n}\n\n@Entity\n@DiscriminatorValue(value=&quot;Operation&quot;)\nclass PartTabOperation extends PartTab {\n\n    @ManyToOne(targetEntity=Operation.class)\n    @JoinColumn(name=&quot;FK_elex&quot;, nullable=true)\n    @Fetch(FetchMode.SELECT)\n    private Operation operation;\n\n\n}\n</code></pre>\n<p>Then you have several options how to deal with the polymorphism. Crude instanceofs, or make PartTab a generic, or introduce <code>isArticle()</code> and <code>isOperation()</code> on the abstract class, to name a few.</p>\n"}],"owner":{"account_id":9183711,"reputation":25,"user_id":6826736,"display_name":"Nessarose"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699885964,"creation_date":1699874644,"question_id":77473524,"body_markdown":"Firstly you must know I&#39;m working with a poorly db design but it is out of my hands. There is table PART_TAB that have the column FK_elex that can contains a reference to a record of the table PART or table OPERATION. Table PART_TAB have another column named elart that contains &quot;Part&quot; or &quot;Operation&quot; to indicate to which table is FK_elex referencing.\r\n\r\nI have to map this with Hibernate. I created a super class named Ingredient and two subclasses Article and Operation. Article maps table PART and Operation table OPERATION. Then I have the class Subarticle that maps PART_TAB. In Subarticle I created a variable of type Ingredient to represent FK_elex and should be annotated to point Article or Operation depending on the column elart.\r\n\r\nAny idea on how to do it? If it is impossible to have only one variable, I&#39;m thinking on creating 2, one pointing Article and the other pointing Operation, but both of them uses the same column, and I don&#39;t know how to annotate it.\r\n\r\nCan someone point me in the right direction?\r\nThank you!","title":"Hibernate variable with reference to one table or another depending on the value of column","body":"<p>Firstly you must know I'm working with a poorly db design but it is out of my hands. There is table PART_TAB that have the column FK_elex that can contains a reference to a record of the table PART or table OPERATION. Table PART_TAB have another column named elart that contains &quot;Part&quot; or &quot;Operation&quot; to indicate to which table is FK_elex referencing.</p>\n<p>I have to map this with Hibernate. I created a super class named Ingredient and two subclasses Article and Operation. Article maps table PART and Operation table OPERATION. Then I have the class Subarticle that maps PART_TAB. In Subarticle I created a variable of type Ingredient to represent FK_elex and should be annotated to point Article or Operation depending on the column elart.</p>\n<p>Any idea on how to do it? If it is impossible to have only one variable, I'm thinking on creating 2, one pointing Article and the other pointing Operation, but both of them uses the same column, and I don't know how to annotate it.</p>\n<p>Can someone point me in the right direction?\nThank you!</p>\n"},{"tags":["java","maven","web3-java"],"comments":[{"owner":{"account_id":1211800,"reputation":2680,"user_id":1180201,"accept_rate":12,"display_name":"1977"},"score":0,"creation_date":1634047818,"post_id":68032384,"comment_id":122918097,"body_markdown":"btw do you know if its possible for the web3j-maven-plugin plugin to simply reference abi files (that were already generated by a separate truffle project) and simply create the Java proxies from those ? or do I have to tell webj3 to compile everything all over again ?","body":"btw do you know if its possible for the web3j-maven-plugin plugin to simply reference abi files (that were already generated by a separate truffle project) and simply create the Java proxies from those ? or do I have to tell webj3 to compile everything all over again ?"}],"answers":[{"tags":[],"owner":{"account_id":8823984,"reputation":168,"user_id":6592788,"display_name":"Lukas"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1626848584,"creation_date":1626848584,"answer_id":68464841,"question_id":68032384,"body_markdown":"We had the same problem. We solved it by manually performing some steps of the maven plugin:\r\n\r\n1. Go to the solidity versions list posted here: &lt;https://internal.services.web3labs.com/api/solidity/versions/&gt;.\r\n2. Save the displayed json as `releases.json` in `~/.web3j/solc/`.\r\n3. Manually search the list of binaries download the one you need (i.e. win/linux/mac).\r\n4. Save the selected binary in a subfolder using the version as its name. For example, if you need version `0.4.25` create a corresponding folder (`~/.web3j/solc/0.4.25/`) and put the binaries there.\r\n5. Rerun your maven build. \r\n\r\nSomehow, the problem is that the maven plugin is not able to download the corresponding files. After doing that manually, the plugin finds the binaries and skips downloading them.","title":"Problem with WEB3J Maven Plugin, it cant find the solidity compiler","body":"<p>We had the same problem. We solved it by manually performing some steps of the maven plugin:</p>\n<ol>\n<li>Go to the solidity versions list posted here: <a href=\"https://internal.services.web3labs.com/api/solidity/versions/\" rel=\"nofollow noreferrer\">https://internal.services.web3labs.com/api/solidity/versions/</a>.</li>\n<li>Save the displayed json as <code>releases.json</code> in <code>~/.web3j/solc/</code>.</li>\n<li>Manually search the list of binaries download the one you need (i.e. win/linux/mac).</li>\n<li>Save the selected binary in a subfolder using the version as its name. For example, if you need version <code>0.4.25</code> create a corresponding folder (<code>~/.web3j/solc/0.4.25/</code>) and put the binaries there.</li>\n<li>Rerun your maven build.</li>\n</ol>\n<p>Somehow, the problem is that the maven plugin is not able to download the corresponding files. After doing that manually, the plugin finds the binaries and skips downloading them.</p>\n"},{"tags":[],"owner":{"account_id":29846835,"reputation":11,"user_id":22873732,"display_name":"Mijo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699885896,"creation_date":1699365395,"answer_id":77438805,"question_id":68032384,"body_markdown":"Just note that link https://internal.services.web3labs.com/api/solidity/versions/ **doesn&#39;t exist anymore** so use this link to download releases.json file:\r\nhttps://raw.githubusercontent.com/web3j/web3j-sokt/master/src/main/resources/releases.json\r\n\r\n\r\n**Solution found on** https://github.com/web3j/web3j-maven-plugin/issues/68 posted by **doumuxie**. This is domuxie&#39;s translation from Chinese to English by using Google Translate to prevent link-rot (as commented by lugiorgi):\r\n\r\n*If the sol version is compiled beyond 0.7.1, the above problem will occur. The reason is because web3j will first obtain the latest windows available URL from the local C:\\Users&lt;User&gt;.web3j\\solc\\release.json, in maven web3j 4.9. In version 4, the sub-dependency web3j-sokt 0.2.1 was introduced, in the source code https://github.com/web3j/web3j-sokt/blob/release/0.2.1/src/main/kotlin/org/web3j/ Available in sokt/VersionResolver.kt, you can see that the release.json file was downloaded from https://internal.services.web3labs.com/api/solidity/versions/, but the windows_url in the file has been &quot;&quot; since 0.7.1, so Unable to find suitable compiled version solc.*\r\n\r\n*In web3j-sokt 0.2.2 https://github.com/web3j/web3j-sokt/blob/release/0.2.2/src/main/kotlin/org/web3j/sokt/VersionResolver.kt, release.json The download address has been changed to https://raw.githubusercontent.com/web3j/web3j-sokt/master/src/main/resources/releases.json. The latest available version in the file so far is solidity 0.8.13.\r\nSo I think the solution should be to exclude web3j-sokt 0.2.1 from maven and introduce the new web3j-sokt 0.2.2.*","title":"Problem with WEB3J Maven Plugin, it cant find the solidity compiler","body":"<p>Just note that link <a href=\"https://internal.services.web3labs.com/api/solidity/versions/\" rel=\"nofollow noreferrer\">https://internal.services.web3labs.com/api/solidity/versions/</a> <strong>doesn't exist anymore</strong> so use this link to download releases.json file:\n<a href=\"https://raw.githubusercontent.com/web3j/web3j-sokt/master/src/main/resources/releases.json\" rel=\"nofollow noreferrer\">https://raw.githubusercontent.com/web3j/web3j-sokt/master/src/main/resources/releases.json</a></p>\n<p><strong>Solution found on</strong> <a href=\"https://github.com/web3j/web3j-maven-plugin/issues/68\" rel=\"nofollow noreferrer\">https://github.com/web3j/web3j-maven-plugin/issues/68</a> posted by <strong>doumuxie</strong>. This is domuxie's translation from Chinese to English by using Google Translate to prevent link-rot (as commented by lugiorgi):</p>\n<p><em>If the sol version is compiled beyond 0.7.1, the above problem will occur. The reason is because web3j will first obtain the latest windows available URL from the local C:\\Users.web3j\\solc\\release.json, in maven web3j 4.9. In version 4, the sub-dependency web3j-sokt 0.2.1 was introduced, in the source code <a href=\"https://github.com/web3j/web3j-sokt/blob/release/0.2.1/src/main/kotlin/org/web3j/\" rel=\"nofollow noreferrer\">https://github.com/web3j/web3j-sokt/blob/release/0.2.1/src/main/kotlin/org/web3j/</a> Available in sokt/VersionResolver.kt, you can see that the release.json file was downloaded from <a href=\"https://internal.services.web3labs.com/api/solidity/versions/\" rel=\"nofollow noreferrer\">https://internal.services.web3labs.com/api/solidity/versions/</a>, but the windows_url in the file has been &quot;&quot; since 0.7.1, so Unable to find suitable compiled version solc.</em></p>\n<p><em>In web3j-sokt 0.2.2 <a href=\"https://github.com/web3j/web3j-sokt/blob/release/0.2.2/src/main/kotlin/org/web3j/sokt/VersionResolver.kt\" rel=\"nofollow noreferrer\">https://github.com/web3j/web3j-sokt/blob/release/0.2.2/src/main/kotlin/org/web3j/sokt/VersionResolver.kt</a>, release.json The download address has been changed to <a href=\"https://raw.githubusercontent.com/web3j/web3j-sokt/master/src/main/resources/releases.json\" rel=\"nofollow noreferrer\">https://raw.githubusercontent.com/web3j/web3j-sokt/master/src/main/resources/releases.json</a>. The latest available version in the file so far is solidity 0.8.13.\nSo I think the solution should be to exclude web3j-sokt 0.2.1 from maven and introduce the new web3j-sokt 0.2.2.</em></p>\n"}],"owner":{"reputation":49,"user_id":11798283,"display_name":"martin0815100"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1866,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1699885896,"creation_date":1624007165,"question_id":68032384,"body_markdown":"I use the web3j maven plugin to auto generate the Smart Contract Java Proxies.\r\n\r\nBut I have the problem, that the solidity compiler version couldn&#39;t be found.\r\n\r\n    [INFO]\r\n    [INFO] --- web3j-maven-plugin:4.8.2:generate-sources (default) @ web3j-client-lib ---\r\n    [INFO] Solidity: adding to process &#39;DZPayments.sol&#39;\r\n    [INFO] Solidity: adding to process &#39;Migrations.sol&#39;\r\n    [INFO] Solidity: adding to process &#39;Proxy.sol&#39;\r\n    [INFO] Solidity: adding to process &#39;Storage.sol&#39;\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  26.928 s\r\n    [INFO] Finished at: 2021-06-18T10:50:37+02:00\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to get solidity version from server\r\n\r\nHas anyone an idea?\r\n\r\nI&#39;m using only default config and have copied the SOL Files to src/main/resources\r\n\r\nThis is my plugin config (easiest possible!):\r\n\r\n\t\t&lt;plugin&gt;\r\n\t\t\t&lt;groupId&gt;org.web3j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;web3j-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.8.2&lt;/version&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;soliditySourceFiles/&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t&lt;/plugin&gt;\r\n\r\nI used the following two dependencies with version 4.8.4 but I tested it with 5.0.0 too with the same result:\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.web3j&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;abi&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;4.8.4&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.web3j&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;core&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;4.8.4&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n","title":"Problem with WEB3J Maven Plugin, it cant find the solidity compiler","body":"<p>I use the web3j maven plugin to auto generate the Smart Contract Java Proxies.</p>\n<p>But I have the problem, that the solidity compiler version couldn't be found.</p>\n<pre><code>[INFO]\n[INFO] --- web3j-maven-plugin:4.8.2:generate-sources (default) @ web3j-client-lib ---\n[INFO] Solidity: adding to process 'DZPayments.sol'\n[INFO] Solidity: adding to process 'Migrations.sol'\n[INFO] Solidity: adding to process 'Proxy.sol'\n[INFO] Solidity: adding to process 'Storage.sol'\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  26.928 s\n[INFO] Finished at: 2021-06-18T10:50:37+02:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to get solidity version from server\n</code></pre>\n<p>Has anyone an idea?</p>\n<p>I'm using only default config and have copied the SOL Files to src/main/resources</p>\n<p>This is my plugin config (easiest possible!):</p>\n<pre><code>    &lt;plugin&gt;\n        &lt;groupId&gt;org.web3j&lt;/groupId&gt;\n        &lt;artifactId&gt;web3j-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;4.8.2&lt;/version&gt;\n        &lt;configuration&gt;\n            &lt;soliditySourceFiles/&gt;\n        &lt;/configuration&gt;\n    &lt;/plugin&gt;\n</code></pre>\n<p>I used the following two dependencies with version 4.8.4 but I tested it with 5.0.0 too with the same result:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.web3j&lt;/groupId&gt;\n    &lt;artifactId&gt;abi&lt;/artifactId&gt;\n    &lt;version&gt;4.8.4&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.web3j&lt;/groupId&gt;\n    &lt;artifactId&gt;core&lt;/artifactId&gt;\n    &lt;version&gt;4.8.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","listview","javafx","fxml","scenebuilder"],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1699885797,"creation_date":1489689404,"answer_id":42842275,"question_id":42841665,"body_markdown":"First, don&#39;t make anything here static. The controller is an *object* associated with the UI loaded from the FXML file, so the fields and methods need to be member of that object, not of the class. (And the `FXMLLoader` [will not initialize static fields](https://stackoverflow.com/questions/23105433/javafx-8-compatibility-issues-fxml-static-fields/23109125#23109125).)\r\n\r\nSecond, annotate the fields declared in the FXML file with `@FXML`. That will allow the `FXMLLoader` to initialize them even if you declare them private (which you should do). Make sure the `fx:id` assigned to the control in the FXML file is the same as the field name.\r\n\r\nFinally, the `FXMLLoader` will (by default) create an instance of your controller class by calling its no-argument constructor, then it will initialize the fields. Consequently, of course, they will not be initialized when the constructor is invoked. Instead, use the `initialize()` method, which the `FXMLLoader` will invoke automatically once the `@FXML`-annotated fields have been injected.\r\n\r\nSo you should have\r\n\r\n    public class MainDriversController{\r\n    \r\n        @FXML\r\n        private ListView&lt;String&gt; driversLV;\r\n    \r\n        private ObservableList&lt;String&gt; observableList = FXCollections.observableArrayList();\r\n    \r\n        @FXML\r\n        private void initialize(){\r\n            for(int x=0; x&lt;Cparsing.driversNodes.getLength(); x++) {\r\n                observableList.add(Cparsing.driversNodes.item(x).getAttributes().getNamedItem(&quot;nick&quot;).getNodeValue());\r\n            }\r\n            driversLV.setItems(observableList);\r\n            System.out.println(driversLV);\r\n        }\r\n    }\r\n\r\nAnd of course your FXML file will have `fx:controller=&quot;my.package.name.MainDriversController&quot;` in the root element, and\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;ListView fx:id=&quot;driversLV&quot; /&gt;\r\n\r\nas an element somewhere.","title":"How can I initialize ListView from FXML file?","body":"<p>First, don't make anything here static. The controller is an <em>object</em> associated with the UI loaded from the FXML file, so the fields and methods need to be member of that object, not of the class. (And the <code>FXMLLoader</code> <a href=\"https://stackoverflow.com/questions/23105433/javafx-8-compatibility-issues-fxml-static-fields/23109125#23109125\">will not initialize static fields</a>.)</p>\n<p>Second, annotate the fields declared in the FXML file with <code>@FXML</code>. That will allow the <code>FXMLLoader</code> to initialize them even if you declare them private (which you should do). Make sure the <code>fx:id</code> assigned to the control in the FXML file is the same as the field name.</p>\n<p>Finally, the <code>FXMLLoader</code> will (by default) create an instance of your controller class by calling its no-argument constructor, then it will initialize the fields. Consequently, of course, they will not be initialized when the constructor is invoked. Instead, use the <code>initialize()</code> method, which the <code>FXMLLoader</code> will invoke automatically once the <code>@FXML</code>-annotated fields have been injected.</p>\n<p>So you should have</p>\n<pre><code>public class MainDriversController{\n\n    @FXML\n    private ListView&lt;String&gt; driversLV;\n\n    private ObservableList&lt;String&gt; observableList = FXCollections.observableArrayList();\n\n    @FXML\n    private void initialize(){\n        for(int x=0; x&lt;Cparsing.driversNodes.getLength(); x++) {\n            observableList.add(Cparsing.driversNodes.item(x).getAttributes().getNamedItem(&quot;nick&quot;).getNodeValue());\n        }\n        driversLV.setItems(observableList);\n        System.out.println(driversLV);\n    }\n}\n</code></pre>\n<p>And of course your FXML file will have <code>fx:controller=&quot;my.package.name.MainDriversController&quot;</code> in the root element, and</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;ListView fx:id=&quot;driversLV&quot; /&gt;\n</code></pre>\n<p>as an element somewhere.</p>\n"}],"owner":{"account_id":9300745,"reputation":175,"user_id":6906304,"accept_rate":71,"display_name":"Sheb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5353,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":42842275,"answer_count":1,"score":0,"last_activity_date":1699885797,"creation_date":1489687432,"question_id":42841665,"body_markdown":"I have my scene made with JavaFX Scene Builder and ListView in it. I want it to show some data from xml file, but I have no idea how to properly initialize this ListView. \r\n\r\n    import javafx.collections.ObservableList;\r\n    import javafx.scene.control.ListView;\r\n    import application.Cparsing;\r\n    import javafx.collections.*;\r\n\r\n    public class MainDriversController{\r\n\t    private static ListView&lt;String&gt; driversLV;\r\n\t    static ObservableList&lt;String&gt; observableList = FXCollections.observableArrayList();\r\n\t\r\n       \tpublic static void SetListView(){\r\n\t\t    for(int x=0; x&lt;Cparsing.driversNodes.getLength(); x++) {\r\n\t\t\t    observableList.add(Cparsing.driversNodes.item(x).getAttributes().getNamedItem(&quot;nick&quot;).getNodeValue());\r\n     \t\t}\r\n\t\tdriversLV.setItems(observableList);\r\n\t\tSystem.out.println(driversLV);\r\n\t    }\r\n    }\r\n\r\nThat of course gives me NullPointerException because it&#39;s not initialized. \r\nI&#39;ve tried to add \r\n\r\n    driversLV = new ListView&lt;String&gt;(observableList);\r\n\r\nand no error then, but ListView is still empty in GUI. \r\n\r\n    System.out.println(driversLV);\r\n\r\ngives:\r\n \r\n    ListView@54f2d1d5[styleClass=list-view]\r\n\r\nSo my question is: what is the proper way to initialize ListView? Is my code correct despite this?","title":"How can I initialize ListView from FXML file?","body":"<p>I have my scene made with JavaFX Scene Builder and ListView in it. I want it to show some data from xml file, but I have no idea how to properly initialize this ListView. </p>\n\n<pre><code>import javafx.collections.ObservableList;\nimport javafx.scene.control.ListView;\nimport application.Cparsing;\nimport javafx.collections.*;\n\npublic class MainDriversController{\n    private static ListView&lt;String&gt; driversLV;\n    static ObservableList&lt;String&gt; observableList = FXCollections.observableArrayList();\n\n    public static void SetListView(){\n        for(int x=0; x&lt;Cparsing.driversNodes.getLength(); x++) {\n            observableList.add(Cparsing.driversNodes.item(x).getAttributes().getNamedItem(\"nick\").getNodeValue());\n        }\n    driversLV.setItems(observableList);\n    System.out.println(driversLV);\n    }\n}\n</code></pre>\n\n<p>That of course gives me NullPointerException because it's not initialized. \nI've tried to add </p>\n\n<pre><code>driversLV = new ListView&lt;String&gt;(observableList);\n</code></pre>\n\n<p>and no error then, but ListView is still empty in GUI. </p>\n\n<pre><code>System.out.println(driversLV);\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>ListView@54f2d1d5[styleClass=list-view]\n</code></pre>\n\n<p>So my question is: what is the proper way to initialize ListView? Is my code correct despite this?</p>\n"},{"tags":["java","android","sqlite"],"comments":[{"owner":{"account_id":41275,"reputation":92177,"user_id":119895,"accept_rate":92,"display_name":"Macarse"},"score":1,"creation_date":1270811385,"post_id":2605555,"comment_id":2616883,"body_markdown":"Why did you place the .sqlite file in the assets folder instead of the /res/raw?","body":"Why did you place the .sqlite file in the assets folder instead of the /res/raw?"},{"owner":{"account_id":3040544,"reputation":3031,"user_id":2577705,"accept_rate":86,"display_name":"craned"},"score":0,"creation_date":1452103828,"post_id":2605555,"comment_id":57024998,"body_markdown":"You will want to try [android sqlite asset helper](https://github.com/jgilfelt/android-sqlite-asset-helper). It makes it a piece of cake.","body":"You will want to try <a href=\"https://github.com/jgilfelt/android-sqlite-asset-helper\" rel=\"nofollow noreferrer\">android sqlite asset helper</a>. It makes it a piece of cake."}],"answers":[{"tags":[],"owner":{"account_id":106941,"reputation":3720,"user_id":284606,"accept_rate":100,"display_name":"franklins"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1286902698,"creation_date":1286902698,"answer_id":3917137,"question_id":2605555,"body_markdown":"If you are planning to create a new SQLite database then over ride and implement the onCreate() Method as shown in the tutorial.\r\n\r\nBut if you are using a SQLite database that is created by another external source and you are going to pull it down, then leave the onCreate() method empty.","title":"Android: Accessing assets folder sqlite database file with .sqlite extension","body":"<p>If you are planning to create a new SQLite database then over ride and implement the onCreate() Method as shown in the tutorial.</p>\n\n<p>But if you are using a SQLite database that is created by another external source and you are going to pull it down, then leave the onCreate() method empty.</p>\n"},{"tags":[],"owner":{"account_id":248735,"reputation":744,"user_id":524307,"accept_rate":87,"display_name":"Jon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1301028442,"creation_date":1301028442,"answer_id":5428650,"question_id":2605555,"body_markdown":"Its important that in the tutorial, when you call the file, make sure you pass the application context `getApplicationContext()` such that you have access to the correct assets, otherwise you might get a FileNotFound Exception.","title":"Android: Accessing assets folder sqlite database file with .sqlite extension","body":"<p>Its important that in the tutorial, when you call the file, make sure you pass the application context <code>getApplicationContext()</code> such that you have access to the correct assets, otherwise you might get a FileNotFound Exception.</p>\n"},{"tags":[],"owner":{"account_id":330552,"reputation":5985,"user_id":654730,"accept_rate":83,"display_name":"Jaydeep Khamar"},"down_vote_count":1,"up_vote_count":35,"is_accepted":false,"score":34,"last_activity_date":1350053117,"creation_date":1305028610,"answer_id":5949629,"question_id":2605555,"body_markdown":"Try this code:\r\n    \r\n    public class DataBaseHelper extends SQLiteOpenHelper {\r\n        private Context mycontext;\r\n\r\n        //private String DB_PATH = mycontext.getApplicationContext().getPackageName()+&quot;/databases/&quot;;\r\n        private static String DB_NAME = &quot;(datbasename).sqlite&quot;;//the extension may be .sqlite or .db\r\n        public SQLiteDatabase myDataBase;\r\n        /*private String DB_PATH = &quot;/data/data/&quot;\r\n                            + mycontext.getApplicationContext().getPackageName()\r\n                            + &quot;/databases/&quot;;*/\r\n\r\n        public DataBaseHelper(Context context) throws IOException {\r\n\t        super(context,DB_NAME,null,1);\r\n\t        this.mycontext=context;\r\n\t        boolean dbexist = checkdatabase();\r\n\t        if (dbexist) {\r\n\t\t        //System.out.println(&quot;Database exists&quot;);\r\n\t\t        opendatabase(); \r\n\t        } else {\r\n\t\t        System.out.println(&quot;Database doesn&#39;t exist&quot;);\r\n\t\t        createdatabase();\r\n\t        }\r\n        }\r\n\r\n        public void createdatabase() throws IOException {\r\n\t        boolean dbexist = checkdatabase();\r\n\t        if(dbexist) {\r\n\t        \t//System.out.println(&quot; Database exists.&quot;);\r\n\t        } else {\r\n\t        \tthis.getReadableDatabase();\r\n\t\t        try {\r\n\t\t            copydatabase();\r\n\t\t        } catch(IOException e) {\r\n\t\t            throw new Error(&quot;Error copying database&quot;);\r\n\t\t        }\r\n\t        }\r\n        }\t\r\n        \r\n        private boolean checkdatabase() {\r\n\t        //SQLiteDatabase checkdb = null;\r\n\t        boolean checkdb = false;\r\n\t        try {\r\n\t\t        String myPath = DB_PATH + DB_NAME;\r\n\t\t        File dbfile = new File(myPath);\r\n\t\t        //checkdb = SQLiteDatabase.openDatabase(myPath,null,SQLiteDatabase.OPEN_READWRITE);\r\n\t\t        checkdb = dbfile.exists();\r\n\t        } catch(SQLiteException e) {\r\n\t        \tSystem.out.println(&quot;Database doesn&#39;t exist&quot;);\r\n\t        }\r\n\t        return checkdb;\r\n        }\r\n        \r\n        private void copydatabase() throws IOException {\r\n\t        //Open your local db as the input stream\r\n\t        InputStream myinput = mycontext.getAssets().open(DB_NAME);\r\n\t\r\n\t        // Path to the just created empty db\r\n\t        String outfilename = DB_PATH + DB_NAME;\r\n\t     \r\n\t        //Open the empty db as the output stream\r\n\t        OutputStream myoutput = new FileOutputStream(&quot;/data/data/(packagename)/databases   /(datbasename).sqlite&quot;);\r\n\t\r\n\t        // transfer byte to inputfile to outputfile\r\n\t        byte[] buffer = new byte[1024];\r\n\t        int length;\r\n\t        while ((length = myinput.read(buffer))&gt;0) {\r\n\t        \tmyoutput.write(buffer,0,length);\r\n\t        }\r\n\t\r\n\t        //Close the streams\r\n\t        myoutput.flush();\r\n\t        myoutput.close();\r\n\t        myinput.close();\r\n        }\r\n\r\n        public void opendatabase() throws SQLException {\r\n\t        //Open the database\r\n\t        String mypath = DB_PATH + DB_NAME;\r\n\t        myDataBase = SQLiteDatabase.openDatabase(mypath, null, SQLiteDatabase.OPEN_READWRITE);\r\n        }\r\n\r\n        public synchronized void close() {\r\n\t        if(myDataBase != null) {\r\n\t        \tmyDataBase.close();\r\n\t        }\r\n\t        super.close();\r\n        }\r\n        \r\n    }","title":"Android: Accessing assets folder sqlite database file with .sqlite extension","body":"<p>Try this code:</p>\n\n<pre><code>public class DataBaseHelper extends SQLiteOpenHelper {\n    private Context mycontext;\n\n    //private String DB_PATH = mycontext.getApplicationContext().getPackageName()+\"/databases/\";\n    private static String DB_NAME = \"(datbasename).sqlite\";//the extension may be .sqlite or .db\n    public SQLiteDatabase myDataBase;\n    /*private String DB_PATH = \"/data/data/\"\n                        + mycontext.getApplicationContext().getPackageName()\n                        + \"/databases/\";*/\n\n    public DataBaseHelper(Context context) throws IOException {\n        super(context,DB_NAME,null,1);\n        this.mycontext=context;\n        boolean dbexist = checkdatabase();\n        if (dbexist) {\n            //System.out.println(\"Database exists\");\n            opendatabase(); \n        } else {\n            System.out.println(\"Database doesn't exist\");\n            createdatabase();\n        }\n    }\n\n    public void createdatabase() throws IOException {\n        boolean dbexist = checkdatabase();\n        if(dbexist) {\n            //System.out.println(\" Database exists.\");\n        } else {\n            this.getReadableDatabase();\n            try {\n                copydatabase();\n            } catch(IOException e) {\n                throw new Error(\"Error copying database\");\n            }\n        }\n    }   \n\n    private boolean checkdatabase() {\n        //SQLiteDatabase checkdb = null;\n        boolean checkdb = false;\n        try {\n            String myPath = DB_PATH + DB_NAME;\n            File dbfile = new File(myPath);\n            //checkdb = SQLiteDatabase.openDatabase(myPath,null,SQLiteDatabase.OPEN_READWRITE);\n            checkdb = dbfile.exists();\n        } catch(SQLiteException e) {\n            System.out.println(\"Database doesn't exist\");\n        }\n        return checkdb;\n    }\n\n    private void copydatabase() throws IOException {\n        //Open your local db as the input stream\n        InputStream myinput = mycontext.getAssets().open(DB_NAME);\n\n        // Path to the just created empty db\n        String outfilename = DB_PATH + DB_NAME;\n\n        //Open the empty db as the output stream\n        OutputStream myoutput = new FileOutputStream(\"/data/data/(packagename)/databases   /(datbasename).sqlite\");\n\n        // transfer byte to inputfile to outputfile\n        byte[] buffer = new byte[1024];\n        int length;\n        while ((length = myinput.read(buffer))&gt;0) {\n            myoutput.write(buffer,0,length);\n        }\n\n        //Close the streams\n        myoutput.flush();\n        myoutput.close();\n        myinput.close();\n    }\n\n    public void opendatabase() throws SQLException {\n        //Open the database\n        String mypath = DB_PATH + DB_NAME;\n        myDataBase = SQLiteDatabase.openDatabase(mypath, null, SQLiteDatabase.OPEN_READWRITE);\n    }\n\n    public synchronized void close() {\n        if(myDataBase != null) {\n            myDataBase.close();\n        }\n        super.close();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1142281,"reputation":994,"user_id":1125824,"accept_rate":0,"display_name":"Nikhil Ranjan"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1341661592,"creation_date":1341661592,"answer_id":11374720,"question_id":2605555,"body_markdown":"Place old database (old.db) in your asset folder. Type this inside onCreate() of your activity:\r\n\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n    ....\r\n\r\n    //=======Code For copying Existing Database file to system folder for use====//\r\n        // Copying Existing Database into system folder\r\n     \t\ttry {\r\n\r\n     \t\t\tString destPath = &quot;/data/data/&quot; + getPackageName()\r\n     \t\t\t\t\t+ &quot;/databases/data.db&quot;;\r\n     \t\t\t\r\n     \t\t\tFile f = new File(destPath);\r\n     \t\t\tif(!f.exists()){\r\n     \t\t\tLog.v(TAG,&quot;File Not Exist&quot;);\r\n     \t\t\tInputStream in = getAssets().open(&quot;old.db&quot;);\r\n     \t\t\tOutputStream out = new FileOutputStream(destPath);\r\n     \t\t\t\r\n     \t \t\tbyte[] buffer = new byte[1024];\r\n     \t \t\tint length;\r\n     \t \t\twhile ((length = in.read(buffer)) &gt; 0) {\r\n     \t \t\t\tout.write(buffer, 0, length);\r\n     \t \t\t}\r\n     \t \t\tin.close();\r\n     \t \t\tout.close();\r\n     \t\t\t}\r\n\r\n     \t\t} catch (FileNotFoundException e) {\r\n     \t\t\te.printStackTrace();\r\n     \t\t} catch (IOException e) {\r\n     \t\t\tLog.v(&quot;TAG&quot;,&quot;ioexeption&quot;);\r\n     \t\t\te.printStackTrace();\r\n     \t\t}\r\n     \t\t\r\n     \t\tDBManager dbManager =  new DBManager(this);\r\n     \t\tLog.v(TAG,&quot;Database is there with version: &quot;+dbManager.getReadableDatabase().getVersion());\r\n     \t\tString sql = &quot;select * from prizes&quot;;\r\n     \t\t\r\n     \t\t\r\n     \t\tSQLiteDatabase db = dbManager.getReadableDatabase();\r\n     \t\tCursor cursor = db.rawQuery(sql, null);\r\n     \t\tLog.v(TAG,&quot;Query Result:&quot;+cursor);\r\n     \t\t\r\n     \t\t\r\n     \t\tcursor.close();\r\n     \t\tdb.close();\r\n     \t\tdbManager.close();\r\n\r\n    ....\r\n\r\n    } \r\n\r\nNow you have to make a DBManager Class which subclasses SQLiteOpenHelper . Insert the abstract method and constructor. Don&#39;t forget to type correct database name inside super() of dbHelper. \r\n\r\n    public class DBManager extends SQLiteOpenHelper {\r\n\r\n    private static final int DATABASE_VERSION = 1;\r\n    private static final String TAG = &quot;DATABASES&quot;;\r\n\r\n    public DBManager(Context context) {\r\n        super(context, &quot;data.db&quot;, null, DATABASE_VERSION);\r\n \r\n    }\r\n\r\n    @Override\r\n    public void onCreate(SQLiteDatabase db) {\r\n        Log.v(TAG,&quot;On create Called:&quot;+db.getPath());\r\n    }\r\n\r\n\t@Override\r\n\tpublic void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\r\n\t}\r\n    }\r\n\r\nNow you can access database by instantiating DBManager.\r\n\r\n    SQLiteDatabase db = dbManager.getReadableDatabase();\r\n    Cursor cursor = db.rawQuery(sql, null);\r\n    ...\r\n\r\nDon&#39;t forget to close database or u will get a SQLiteDatabaseNotClosed Exception.\r\n\r\n    db.close();\r\n    dbManager.close();\r\n","title":"Android: Accessing assets folder sqlite database file with .sqlite extension","body":"<p>Place old database (old.db) in your asset folder. Type this inside onCreate() of your activity:</p>\n\n<pre><code>public void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n....\n\n//=======Code For copying Existing Database file to system folder for use====//\n    // Copying Existing Database into system folder\n        try {\n\n            String destPath = \"/data/data/\" + getPackageName()\n                    + \"/databases/data.db\";\n\n            File f = new File(destPath);\n            if(!f.exists()){\n            Log.v(TAG,\"File Not Exist\");\n            InputStream in = getAssets().open(\"old.db\");\n            OutputStream out = new FileOutputStream(destPath);\n\n            byte[] buffer = new byte[1024];\n            int length;\n            while ((length = in.read(buffer)) &gt; 0) {\n                out.write(buffer, 0, length);\n            }\n            in.close();\n            out.close();\n            }\n\n        } catch (FileNotFoundException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            Log.v(\"TAG\",\"ioexeption\");\n            e.printStackTrace();\n        }\n\n        DBManager dbManager =  new DBManager(this);\n        Log.v(TAG,\"Database is there with version: \"+dbManager.getReadableDatabase().getVersion());\n        String sql = \"select * from prizes\";\n\n\n        SQLiteDatabase db = dbManager.getReadableDatabase();\n        Cursor cursor = db.rawQuery(sql, null);\n        Log.v(TAG,\"Query Result:\"+cursor);\n\n\n        cursor.close();\n        db.close();\n        dbManager.close();\n\n....\n\n} \n</code></pre>\n\n<p>Now you have to make a DBManager Class which subclasses SQLiteOpenHelper . Insert the abstract method and constructor. Don't forget to type correct database name inside super() of dbHelper. </p>\n\n<pre><code>public class DBManager extends SQLiteOpenHelper {\n\nprivate static final int DATABASE_VERSION = 1;\nprivate static final String TAG = \"DATABASES\";\n\npublic DBManager(Context context) {\n    super(context, \"data.db\", null, DATABASE_VERSION);\n\n}\n\n@Override\npublic void onCreate(SQLiteDatabase db) {\n    Log.v(TAG,\"On create Called:\"+db.getPath());\n}\n\n@Override\npublic void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n}\n}\n</code></pre>\n\n<p>Now you can access database by instantiating DBManager.</p>\n\n<pre><code>SQLiteDatabase db = dbManager.getReadableDatabase();\nCursor cursor = db.rawQuery(sql, null);\n...\n</code></pre>\n\n<p>Don't forget to close database or u will get a SQLiteDatabaseNotClosed Exception.</p>\n\n<pre><code>db.close();\ndbManager.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3040544,"reputation":3031,"user_id":2577705,"accept_rate":86,"display_name":"craned"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1452103821,"creation_date":1452103821,"answer_id":34639845,"question_id":2605555,"body_markdown":"You will want to try [android sqlite asset helper](https://github.com/jgilfelt/android-sqlite-asset-helper). It made opening a pre-existing db a piece of cake for me.\r\n\r\nI literally had it working in about a half hour after spending 3 hours trying to do it all manually. Funny thing is, I thought I was doing the same thing the library did for me, but something was missing!","title":"Android: Accessing assets folder sqlite database file with .sqlite extension","body":"<p>You will want to try <a href=\"https://github.com/jgilfelt/android-sqlite-asset-helper\" rel=\"nofollow\">android sqlite asset helper</a>. It made opening a pre-existing db a piece of cake for me.</p>\n\n<p>I literally had it working in about a half hour after spending 3 hours trying to do it all manually. Funny thing is, I thought I was doing the same thing the library did for me, but something was missing!</p>\n"},{"tags":[],"owner":{"account_id":929906,"reputation":838,"user_id":959964,"display_name":"Jakir Hossain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492753198,"creation_date":1492753198,"answer_id":43534728,"question_id":2605555,"body_markdown":"You can only read database from asset folder as the resources folders are read-only. If you need to do more operation like create, update,  delete you can do a tricks. Copy the database from assets folder to storage and then you can do anything you want. \r\n\r\nHere is a quick example of [Working with Android Pre Built Database.][1] \r\n\r\nThere is a easy to use library too for accessing database from assets folder. You can check  Android SQLiteAssetHelper  (https://github.com/jgilfelt/android-sqlite-asset-helper).  Good luck! \r\n\r\n\r\n  [1]: https://github.com/jakirseu/Android-Pre-Built-database\r\n ","title":"Android: Accessing assets folder sqlite database file with .sqlite extension","body":"<p>You can only read database from asset folder as the resources folders are read-only. If you need to do more operation like create, update,  delete you can do a tricks. Copy the database from assets folder to storage and then you can do anything you want. </p>\n\n<p>Here is a quick example of <a href=\"https://github.com/jakirseu/Android-Pre-Built-database\" rel=\"nofollow noreferrer\">Working with Android Pre Built Database.</a> </p>\n\n<p>There is a easy to use library too for accessing database from assets folder. You can check  Android SQLiteAssetHelper  (<a href=\"https://github.com/jgilfelt/android-sqlite-asset-helper\" rel=\"nofollow noreferrer\">https://github.com/jgilfelt/android-sqlite-asset-helper</a>).  Good luck! </p>\n"},{"tags":[],"owner":{"account_id":5027850,"reputation":118,"user_id":4039091,"accept_rate":60,"display_name":"Almero Rick"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1495589907,"creation_date":1495588204,"answer_id":44147357,"question_id":2605555,"body_markdown":"You need to convert your .sqlite database to .db inorder to fit to Android.\r\n\r\nOn your app&#39;s first launch after installation\r\n\r\n    SuperDatabase database=new SuperDatabase(getApplicationContext(),&quot;foods.db&quot;, AssetDatabaseMode.COPY_TO_SYSTEM);\r\n\r\nOn subsequent launches\r\n\r\n    SuperDatabase database=new SuperDatabase(getApplicationContext(),&quot;foods.db&quot;, AssetDatabaseMode.READ_FROM_DEVICE);\r\n\r\nSimply fire SQL queries\r\n\r\n    database.sqlInject(&quot;INSERT INTO food VALUES(&#39;Banana&#39;,&#39;Vitamin A&#39;);&quot;);\r\n\r\nGet results on Array in CSV, JSON, XML\r\n\r\n\tArrayList&lt;String&gt; rows=new ArrayList&lt;String&gt;();\r\n\trows=database.sqlEjectCSV(&quot;SELECT * FROM food;&quot;);\r\n\tfor (int i=0;i&lt;rows.size();i++)\r\n\t{\r\n\t\t//Do stuffs with each row\r\n\t}\r\n\r\nYou need to include my library for this. Documentations here:  \r\nhttps://github.com/sangeethnandakumar/TestTube","title":"Android: Accessing assets folder sqlite database file with .sqlite extension","body":"<p>You need to convert your .sqlite database to .db inorder to fit to Android.</p>\n\n<p>On your app's first launch after installation</p>\n\n<pre><code>SuperDatabase database=new SuperDatabase(getApplicationContext(),\"foods.db\", AssetDatabaseMode.COPY_TO_SYSTEM);\n</code></pre>\n\n<p>On subsequent launches</p>\n\n<pre><code>SuperDatabase database=new SuperDatabase(getApplicationContext(),\"foods.db\", AssetDatabaseMode.READ_FROM_DEVICE);\n</code></pre>\n\n<p>Simply fire SQL queries</p>\n\n<pre><code>database.sqlInject(\"INSERT INTO food VALUES('Banana','Vitamin A');\");\n</code></pre>\n\n<p>Get results on Array in CSV, JSON, XML</p>\n\n<pre><code>ArrayList&lt;String&gt; rows=new ArrayList&lt;String&gt;();\nrows=database.sqlEjectCSV(\"SELECT * FROM food;\");\nfor (int i=0;i&lt;rows.size();i++)\n{\n    //Do stuffs with each row\n}\n</code></pre>\n\n<p>You need to include my library for this. Documentations here:<br>\n<a href=\"https://github.com/sangeethnandakumar/TestTube\" rel=\"nofollow noreferrer\">https://github.com/sangeethnandakumar/TestTube</a></p>\n"}],"owner":{"account_id":603294,"reputation":389,"user_id":312559,"display_name":"Ashish Mishra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77256,"favorite_count":0,"down_vote_count":1,"up_vote_count":39,"answer_count":7,"score":38,"last_activity_date":1699885785,"creation_date":1270795637,"question_id":2605555,"body_markdown":"How do you read data from the sqlite database file in the `res/assets/` folder with the `.sqlite` extension in my Android application?\r\n\r\n","title":"Android: Accessing assets folder sqlite database file with .sqlite extension","body":"<p>How do you read data from the sqlite database file in the <code>res/assets/</code> folder with the <code>.sqlite</code> extension in my Android application?</p>\n"},{"tags":["java","jakarta-ee","jms","activemq-artemis"],"comments":[{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1699762866,"post_id":77467680,"comment_id":136571312,"body_markdown":"Have you given the role to which the user `murad` belongs permission to consume messages from the queue `jms.queue.exampleQueue`? Please provide your WildFly configuration XML.","body":"Have you given the role to which the user <code>murad</code> belongs permission to consume messages from the queue <code>jms.queue.exampleQueue</code>? Please provide your WildFly configuration XML."},{"owner":{"account_id":5224094,"reputation":55,"user_id":4176619,"display_name":"Gulam Samdani"},"score":0,"creation_date":1699763894,"post_id":77467680,"comment_id":136571355,"body_markdown":"I have added &quot;murad&quot; user as application user from wildfy addUser.bat . But Can not give permission for consume .  here is my wildfy jms configuration","body":"I have added &quot;murad&quot; user as application user from wildfy addUser.bat . But Can not give permission for consume .  here is my wildfy jms configuration"},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1699764360,"post_id":77467680,"comment_id":136571371,"body_markdown":"Add the requested information _to the question_. Thanks!","body":"Add the requested information <i>to the question</i>. Thanks!"},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1699764424,"post_id":77467680,"comment_id":136571373,"body_markdown":"Why can you &quot;not give permission for consume&quot;? If you can give permission then your application won&#39;t be able to consume messages.","body":"Why can you &quot;not give permission for consume&quot;? If you can give permission then your application won&#39;t be able to consume messages."},{"owner":{"account_id":5224094,"reputation":55,"user_id":4176619,"display_name":"Gulam Samdani"},"score":0,"creation_date":1699764928,"post_id":77467680,"comment_id":136571403,"body_markdown":"This is the problem , I have no idea for giving permission for wildfy jms queue consume .How can i give permission for this scenario ?","body":"This is the problem , I have no idea for giving permission for wildfy jms queue consume .How can i give permission for this scenario ?"},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1699765745,"post_id":77467680,"comment_id":136571442,"body_markdown":"You configure permissions using the `security-setting` block. You&#39;ve already got two entries - one for the `guest` role and one for the `murad` role. However, it&#39;s not clear if the _user_ `murad` is in either of these roles. Please elaborate on how you created the user `murad` and what role you assigned to it during creation.","body":"You configure permissions using the <code>security-setting</code> block. You&#39;ve already got two entries - one for the <code>guest</code> role and one for the <code>murad</code> role. However, it&#39;s not clear if the <i>user</i> <code>murad</code> is in either of these roles. Please elaborate on how you created the user <code>murad</code> and what role you assigned to it during creation."},{"owner":{"account_id":5224094,"reputation":55,"user_id":4176619,"display_name":"Gulam Samdani"},"score":0,"creation_date":1699769550,"post_id":77467680,"comment_id":136571634,"body_markdown":"@JustinBertram , Yes, I have some problem in my application-roles.properties  . After resolve this one by the following way then this permission issue is overcome . i have solve here after after modify this file : &quot;murad=guest&quot;  .","body":"@JustinBertram , Yes, I have some problem in my application-roles.properties  . After resolve this one by the following way then this permission issue is overcome . i have solve here after after modify this file : &quot;murad=guest&quot;  ."},{"owner":{"account_id":5224094,"reputation":55,"user_id":4176619,"display_name":"Gulam Samdani"},"score":0,"creation_date":1699769813,"post_id":77467680,"comment_id":136571648,"body_markdown":"@JustinBertram , after resolve this permission issue , i have found another one issue .I have found null  value result  from consumer.receiveBody(String.class, 5000);","body":"@JustinBertram , after resolve this permission issue , i have found another one issue .I have found null  value result  from consumer.receiveBody(String.class, 5000);"}],"answers":[{"tags":[],"owner":{"account_id":5224094,"reputation":55,"user_id":4176619,"display_name":"Gulam Samdani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699885404,"creation_date":1699771030,"answer_id":77467973,"question_id":77467680,"body_markdown":"I have solved this issue after updating `applicaton-roles.properties` to use `murad=guest` (i.e. assigning the `guest` role to the user `murad`).","title":"WildFly JMS error: does not have permission=&#39;CONSUME&#39; for queue jms.queue.exampleQueue","body":"<p>I have solved this issue after updating <code>applicaton-roles.properties</code> to use <code>murad=guest</code> (i.e. assigning the <code>guest</code> role to the user <code>murad</code>).</p>\n"}],"owner":{"account_id":5224094,"reputation":55,"user_id":4176619,"display_name":"Gulam Samdani"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699885504,"creation_date":1699761103,"question_id":77467680,"body_markdown":"I am using WildFly 19 and a JMS application. After running this program it gives bellow error: \r\n```\r\nAMQ229213: User: murad does not have permission=&#39;CONSUME&#39; for queue jms.queue.exampleQueue on address jms.queue.exampleQueue.jms.queue.exampleQueue\r\n```\r\nHere is my JMS code  : \r\n```java\r\ntry {\r\n    // Set up the namingContext for the JNDI lookup\r\n    final Properties env = new Properties();\r\n    env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;org.wildfly.naming.client.WildFlyInitialContextFactory&quot;);\r\n    env.put(Context.PROVIDER_URL, &quot;http-remoting://127.0.0.1:8080&quot;);\r\n    env.put(Context.SECURITY_PRINCIPAL, &quot;murad&quot;);\r\n    env.put(Context.SECURITY_CREDENTIALS, &quot;Murad@1234&quot;);\r\n    env.put(&quot;jboss.naming.client.ejb.context&quot;, true);\r\n    namingContext = new InitialContext(env);\r\n\r\n    ConnectionFactory connectionFactory = (ConnectionFactory) namingContext.lookup(&quot;jms/RemoteConnectionFactory&quot;);\r\n    System.out.println(&quot;Got ConnectionFactory &quot; + connectionFactory);\r\n\r\n    Destination destination = (Destination) namingContext.lookup(&quot;jms/queue/exampleQueue&quot;);\r\n    System.out.println(&quot;Got JMS Endpoint &quot; + destination);\r\n\r\n    // Create the JMS context\r\n    context = connectionFactory.createContext(&quot;murad&quot;, &quot;Murad@1234&quot;); \r\n    \r\n    JMSConsumer consumer = context.createConsumer(destination);\r\n    // Then receive the same number of messages that were sent\r\n\r\n    String text = consumer.receiveBody(String.class, 5000);\r\n    if (text == null)\r\n        System.out.println(&quot;No message Received! Maybe another Consumer listening on the Queue ??&quot;);\r\n    System.out.println(&quot;Received message with content &quot; + text);\r\n} catch (Exception e) {\r\n    ...\r\n}\r\n```\r\n\r\nWildFly configuration xml is : \r\n\r\n[![s][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xmoHK.png","title":"WildFly JMS error: does not have permission=&#39;CONSUME&#39; for queue jms.queue.exampleQueue","body":"<p>I am using WildFly 19 and a JMS application. After running this program it gives bellow error:</p>\n<pre><code>AMQ229213: User: murad does not have permission='CONSUME' for queue jms.queue.exampleQueue on address jms.queue.exampleQueue.jms.queue.exampleQueue\n</code></pre>\n<p>Here is my JMS code  :</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    // Set up the namingContext for the JNDI lookup\n    final Properties env = new Properties();\n    env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;org.wildfly.naming.client.WildFlyInitialContextFactory&quot;);\n    env.put(Context.PROVIDER_URL, &quot;http-remoting://127.0.0.1:8080&quot;);\n    env.put(Context.SECURITY_PRINCIPAL, &quot;murad&quot;);\n    env.put(Context.SECURITY_CREDENTIALS, &quot;Murad@1234&quot;);\n    env.put(&quot;jboss.naming.client.ejb.context&quot;, true);\n    namingContext = new InitialContext(env);\n\n    ConnectionFactory connectionFactory = (ConnectionFactory) namingContext.lookup(&quot;jms/RemoteConnectionFactory&quot;);\n    System.out.println(&quot;Got ConnectionFactory &quot; + connectionFactory);\n\n    Destination destination = (Destination) namingContext.lookup(&quot;jms/queue/exampleQueue&quot;);\n    System.out.println(&quot;Got JMS Endpoint &quot; + destination);\n\n    // Create the JMS context\n    context = connectionFactory.createContext(&quot;murad&quot;, &quot;Murad@1234&quot;); \n    \n    JMSConsumer consumer = context.createConsumer(destination);\n    // Then receive the same number of messages that were sent\n\n    String text = consumer.receiveBody(String.class, 5000);\n    if (text == null)\n        System.out.println(&quot;No message Received! Maybe another Consumer listening on the Queue ??&quot;);\n    System.out.println(&quot;Received message with content &quot; + text);\n} catch (Exception e) {\n    ...\n}\n</code></pre>\n<p>WildFly configuration xml is :</p>\n<p><a href=\"https://i.stack.imgur.com/xmoHK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xmoHK.png\" alt=\"s\" /></a></p>\n"},{"tags":["java","deployment","software-packaging"],"comments":[{"owner":{"account_id":97082,"reputation":374996,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":0,"creation_date":1339485563,"post_id":10992028,"comment_id":14360377,"body_markdown":"You may do as you describe. There is no constraint nor better accepted way.","body":"You may do as you describe. There is no constraint nor better accepted way."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1339485567,"post_id":10992028,"comment_id":14360378,"body_markdown":"A lot of this depends on which build tool/IDE you are using.  Note that if packaging it all up yourself, it is theoretically possible to use almost any structure, while an IDE will typically set up a structure that it more commonly uses.  As to *&quot;create a package named com.myproject.config&quot;*  Yes, that seems reasonable.","body":"A lot of this depends on which build tool/IDE you are using.  Note that if packaging it all up yourself, it is theoretically possible to use almost any structure, while an IDE will typically set up a structure that it more commonly uses.  As to <i>&quot;create a package named com.myproject.config&quot;</i>  Yes, that seems reasonable."},{"owner":{"account_id":268991,"reputation":1120,"user_id":558079,"accept_rate":83,"display_name":"plucury"},"score":1,"creation_date":1339485618,"post_id":10992028,"comment_id":14360395,"body_markdown":"I think use Maven to build your project is a good option.","body":"I think use Maven to build your project is a good option."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1339485668,"post_id":10992028,"comment_id":14360412,"body_markdown":"BTW - is this question really more about how to **deploy** the built application to the end-user?  What type of application is it?  (e.g. Desktop, command line, something meant for the system tray..?)","body":"BTW - is this question really more about how to <b>deploy</b> the built application to the end-user?  What type of application is it?  (e.g. Desktop, command line, something meant for the system tray..?)"},{"owner":{"account_id":1261273,"reputation":869,"user_id":1219497,"accept_rate":56,"display_name":"HariShankar"},"score":0,"creation_date":1339489039,"post_id":10992028,"comment_id":14361518,"body_markdown":"@AndrewThompson : Command Line application","body":"@AndrewThompson : Command Line application"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1339490196,"post_id":10992028,"comment_id":14361939,"body_markdown":"I edited &#39;command line&#39; into the question, but am still not clear on the answer to my first question. *&quot;is this question really more about how to **deploy** the built application to the end-user?&quot;*   If not it seems the answer to this is &#39;use whatever structure that works for you&#39;.","body":"I edited &#39;command line&#39; into the question, but am still not clear on the answer to my first question. <i>&quot;is this question really more about how to <b>deploy</b> the built application to the end-user?&quot;</i>   If not it seems the answer to this is &#39;use whatever structure that works for you&#39;."}],"answers":[{"tags":[],"owner":{"account_id":348818,"reputation":12356,"user_id":683735,"accept_rate":100,"display_name":"Konstantin Pribluda"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1339485893,"creation_date":1339485648,"answer_id":10992091,"question_id":10992028,"body_markdown":"I would recommend to stick with default [Maven][1] layout ( and also use maven as build tool )\r\n\r\nProductive classes / resources:\r\n\r\n    src/main/java\r\n    src/main/resources\r\n\r\nTest data and classes:\r\n\r\n    src/test/java\r\n    src/test/resources\r\n\r\nMaven can also take care to package your application properly with all the necessary jars\r\n( look for maven assembly plugin ) \r\n\r\n\r\n  [1]: http://maven.apache.org","title":"What is the project directory structure for a standalone Java SE application?","body":"<p>I would recommend to stick with default <a href=\"http://maven.apache.org\">Maven</a> layout ( and also use maven as build tool )</p>\n\n<p>Productive classes / resources:</p>\n\n<pre><code>src/main/java\nsrc/main/resources\n</code></pre>\n\n<p>Test data and classes:</p>\n\n<pre><code>src/test/java\nsrc/test/resources\n</code></pre>\n\n<p>Maven can also take care to package your application properly with all the necessary jars\n( look for maven assembly plugin ) </p>\n"},{"tags":[],"owner":{"account_id":1460128,"reputation":10123,"user_id":1374678,"accept_rate":93,"display_name":"rolve"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1339487215,"creation_date":1339485780,"answer_id":10992124,"question_id":10992028,"body_markdown":"As far I as know, there is no such thing as a standard project structure for Java per se. However, various tools and IDEs (such as Eclipse) do have a standard structure.\r\n\r\n[Maven][1], a build tool for Java, on the other hand has a very clearly defined (default) project structure. There, all Java source files are placed in the `src/main/java` folder and all resource files (like your config files) are placed in `src/main/resources`.\r\n\r\nHere&#39;s a very quick introduction to Maven, if you don&#39;t know it yet: [Maven in 5 Minutes][2]\r\n\r\n\r\n----------\r\n\r\nRegarding your question about packaging with dependencies, here is a snipped from one of my Maven POM files that uses the [Assembly Plugin][3] to create a JAR file with all dependencies included:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n\t&lt;plugin&gt;\r\n\t\t&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n\t\t&lt;configuration&gt;\r\n\t\t\t&lt;descriptorRefs&gt;\r\n\t\t\t\t&lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n\t\t\t&lt;/descriptorRefs&gt;\r\n\t\t\t&lt;archive&gt;\r\n\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t&lt;mainClass&gt;...&lt;/mainClass&gt;\r\n\t\t\t\t&lt;/manifest&gt;\r\n\t\t\t&lt;/archive&gt;\r\n\t\t&lt;/configuration&gt;\r\n\t\t&lt;executions&gt;\r\n\t\t\t&lt;execution&gt;\r\n\t\t\t\t&lt;id&gt;make-assembly&lt;/id&gt;\r\n\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t&lt;goal&gt;single&lt;/goal&gt;\r\n\t\t\t\t&lt;/goals&gt;\r\n\t\t\t&lt;/execution&gt;\r\n\t\t&lt;/executions&gt;\r\n\t&lt;/plugin&gt;\r\n\r\n\r\n  [1]: http://maven.apache.org/\r\n  [2]: http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html\r\n  [3]: http://maven.apache.org/plugins/maven-assembly-plugin/","title":"What is the project directory structure for a standalone Java SE application?","body":"<p>As far I as know, there is no such thing as a standard project structure for Java per se. However, various tools and IDEs (such as Eclipse) do have a standard structure.</p>\n\n<p><a href=\"http://maven.apache.org/\" rel=\"nofollow\">Maven</a>, a build tool for Java, on the other hand has a very clearly defined (default) project structure. There, all Java source files are placed in the <code>src/main/java</code> folder and all resource files (like your config files) are placed in <code>src/main/resources</code>.</p>\n\n<p>Here's a very quick introduction to Maven, if you don't know it yet: <a href=\"http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html\" rel=\"nofollow\">Maven in 5 Minutes</a></p>\n\n<hr>\n\n<p>Regarding your question about packaging with dependencies, here is a snipped from one of my Maven POM files that uses the <a href=\"http://maven.apache.org/plugins/maven-assembly-plugin/\" rel=\"nofollow\">Assembly Plugin</a> to create a JAR file with all dependencies included:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;descriptorRefs&gt;\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n        &lt;/descriptorRefs&gt;\n        &lt;archive&gt;\n            &lt;manifest&gt;\n                &lt;mainClass&gt;...&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n        &lt;/archive&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;make-assembly&lt;/id&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;single&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1542670,"reputation":4119,"user_id":1436932,"accept_rate":64,"display_name":"DieterDP"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1699885235,"creation_date":1339485998,"answer_id":10992178,"question_id":10992028,"body_markdown":"A commonly used structure is the following:\r\n\r\n - src - contains all your source files, and possibly the following as well (might be far down the folder tree):\r\n - resources - contains resources such as properties files\r\n - config - everything config related\r\n - lib - a folder containing a your libraries, possibly placed in separate subfolderrs\r\n - bin - contains compiled classes","title":"What is the project directory structure for a standalone Java SE application?","body":"<p>A commonly used structure is the following:</p>\n<ul>\n<li>src - contains all your source files, and possibly the following as well (might be far down the folder tree):</li>\n<li>resources - contains resources such as properties files</li>\n<li>config - everything config related</li>\n<li>lib - a folder containing a your libraries, possibly placed in separate subfolderrs</li>\n<li>bin - contains compiled classes</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1305612,"reputation":934,"user_id":1254672,"display_name":"Musculaa"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1456749468,"creation_date":1456749468,"answer_id":35699785,"question_id":10992028,"body_markdown":"**src/com.enterprise_name.project_name.** Main.java (the main class)\r\n\r\n**src/com.enterprise_name.project_name.model.**(here all model classes)\r\n\r\n**src/com.enterprise_name.project_name.view.**(here all view classes, JFrame, Jdialog,etc)\r\n\r\n**src/com.enterprise_name.project_name.view.resources.**(here all the files and  images used in the views ***note**)\r\n\r\n**src/com.enterprise_name.project_name.controller.**(here all controller classes)\r\n\r\n**lib/**(here all the external libraries - dont forget add to build path)\r\n\r\n***note** if you need some resource file (xml, config file, etc) create a package .resources. in the specific place where do you need (model, controller, view)","title":"What is the project directory structure for a standalone Java SE application?","body":"<p><strong>src/com.enterprise_name.project_name.</strong> Main.java (the main class)</p>\n\n<p><strong>src/com.enterprise_name.project_name.model.</strong>(here all model classes)</p>\n\n<p><strong>src/com.enterprise_name.project_name.view.</strong>(here all view classes, JFrame, Jdialog,etc)</p>\n\n<p><strong>src/com.enterprise_name.project_name.view.resources.</strong>(here all the files and  images used in the views <strong>*note</strong>)</p>\n\n<p><strong>src/com.enterprise_name.project_name.controller.</strong>(here all controller classes)</p>\n\n<p><strong>lib/</strong>(here all the external libraries - dont forget add to build path)</p>\n\n<p><strong>*note</strong> if you need some resource file (xml, config file, etc) create a package .resources. in the specific place where do you need (model, controller, view)</p>\n"}],"owner":{"account_id":1261273,"reputation":869,"user_id":1219497,"accept_rate":56,"display_name":"HariShankar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66253,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"answer_count":4,"score":24,"last_activity_date":1699885235,"creation_date":1339485379,"question_id":10992028,"body_markdown":"What is the standard project directory structure of a standalone Java SE (Command Line based) application? \r\n\r\n`src` folder will contain all my `.java` files in properly organized packages. Other than that I have `bin` folder which will contain my `.class` files. \r\n\r\nI&#39;ve Properties files and XML configuration files in my project. In which directory should I place them? Should I create a package named `com.myproject.config` and place all the `.xml` config files in that?\r\n\r\nI want the dependent jars to be packaged along with my final package. So should I create a folder (say by the name `lib`) to hold all these `.jar` files? ","title":"What is the project directory structure for a standalone Java SE application?","body":"<p>What is the standard project directory structure of a standalone Java SE (Command Line based) application? </p>\n\n<p><code>src</code> folder will contain all my <code>.java</code> files in properly organized packages. Other than that I have <code>bin</code> folder which will contain my <code>.class</code> files. </p>\n\n<p>I've Properties files and XML configuration files in my project. In which directory should I place them? Should I create a package named <code>com.myproject.config</code> and place all the <code>.xml</code> config files in that?</p>\n\n<p>I want the dependent jars to be packaged along with my final package. So should I create a folder (say by the name <code>lib</code>) to hold all these <code>.jar</code> files? </p>\n"},{"tags":["java","appium","ui-automation","nosuchelementexception"],"answers":[{"tags":[],"owner":{"account_id":7979274,"reputation":57,"user_id":6021277,"accept_rate":0,"display_name":"monil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688438152,"creation_date":1688438152,"answer_id":76609091,"question_id":76595915,"body_markdown":"You can try inspecting element using [appium inspector][1] and check whether it is able to identify object by locator id. Make sure to specify the entire package name with the resource id `com.org.android:id/submitBtn`\r\n\r\n\r\n  [1]: https://github.com/appium/appium-inspector/releases","title":"How to scroll to the element with resourceId or id if you don&#39;t have the text or content-desc as attributes of that element in Appium","body":"<p>You can try inspecting element using <a href=\"https://github.com/appium/appium-inspector/releases\" rel=\"nofollow noreferrer\">appium inspector</a> and check whether it is able to identify object by locator id. Make sure to specify the entire package name with the resource id <code>com.org.android:id/submitBtn</code></p>\n"},{"tags":[],"owner":{"account_id":28931584,"reputation":1,"user_id":22160165,"display_name":"Aaditya Awasthi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688755051,"creation_date":1688755051,"answer_id":76639460,"question_id":76595915,"body_markdown":"I have attempted to implement new logic for this\r\n\r\n    public boolean scrollDownGestureForUnknownElementAction(String element_path){\r\n    boolean canScrollMore;\r\n    do{\r\n       canScrollMore = (Boolean) ((JavascriptExecutor) driver).executeScript\r\n                        (&quot;mobile: scrollGesture&quot;, ImmutableMap.of(&quot;direction&quot;, &quot;down&quot;, &quot;percent&quot;, 50.0, &quot;left&quot;, 100, &quot;top&quot;, 100, &quot;width&quot;, 200, &quot;height&quot;, 800, &quot;speed&quot;, 1500));\r\n          try {\r\n             if (driver.findElement(By.id(element_path)).isDisplayed());\r\n                    break;\r\n              }\r\n              catch (NoSuchElementException exception){\r\n                    exception.printStackTrace();\r\n                    return false;\r\n              }\r\n    }while (canScrollMore);\r\n            return canScrollMore;\r\n    }\r\n\r\n","title":"How to scroll to the element with resourceId or id if you don&#39;t have the text or content-desc as attributes of that element in Appium","body":"<p>I have attempted to implement new logic for this</p>\n<pre><code>public boolean scrollDownGestureForUnknownElementAction(String element_path){\nboolean canScrollMore;\ndo{\n   canScrollMore = (Boolean) ((JavascriptExecutor) driver).executeScript\n                    (&quot;mobile: scrollGesture&quot;, ImmutableMap.of(&quot;direction&quot;, &quot;down&quot;, &quot;percent&quot;, 50.0, &quot;left&quot;, 100, &quot;top&quot;, 100, &quot;width&quot;, 200, &quot;height&quot;, 800, &quot;speed&quot;, 1500));\n      try {\n         if (driver.findElement(By.id(element_path)).isDisplayed());\n                break;\n          }\n          catch (NoSuchElementException exception){\n                exception.printStackTrace();\n                return false;\n          }\n}while (canScrollMore);\n        return canScrollMore;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6294058,"reputation":355,"user_id":4890791,"display_name":"Balaji Dinakaran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699885153,"creation_date":1699885153,"answer_id":77474545,"question_id":76595915,"body_markdown":"Here is your code, \r\n\r\n    HashMap&lt;String, String&gt; map1 = new HashMap&lt;&gt;();\r\n    map1.put(&quot;strategy&quot;, &quot;-android uiautomator&quot;);\r\n    map1.put(&quot;selector&quot;, &quot;UiSelector().resourceId(\\&quot;test123\\&quot;)&quot;);\r\n    \r\n    driver.executeScript(&quot;mobile: scroll&quot;, map1);\r\n\r\n    driver.findElement(AppiumBy.androidUIAutomator(&quot;UiSelector().resourceId(\\&quot;test123\\&quot;)&quot;)).click();","title":"How to scroll to the element with resourceId or id if you don&#39;t have the text or content-desc as attributes of that element in Appium","body":"<p>Here is your code,</p>\n<pre><code>HashMap&lt;String, String&gt; map1 = new HashMap&lt;&gt;();\nmap1.put(&quot;strategy&quot;, &quot;-android uiautomator&quot;);\nmap1.put(&quot;selector&quot;, &quot;UiSelector().resourceId(\\&quot;test123\\&quot;)&quot;);\n\ndriver.executeScript(&quot;mobile: scroll&quot;, map1);\n\ndriver.findElement(AppiumBy.androidUIAutomator(&quot;UiSelector().resourceId(\\&quot;test123\\&quot;)&quot;)).click();\n</code></pre>\n"}],"owner":{"account_id":28931584,"reputation":1,"user_id":22160165,"display_name":"Aaditya Awasthi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":467,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1699885153,"creation_date":1688233878,"question_id":76595915,"body_markdown":"I am trying to execute this script but the scroll function is not working, I have rechecked the resourceId, it is correct and this method works when used with text(&quot;&lt;desired_text&gt;&quot;) or description(&lt;desired_text&gt;) in place of resourceId(&quot;&lt;/element_id&gt;&quot;). But I don&#39;t have those attribute values in the app.\r\n\r\n```\r\nWebElement element = driver.findElement(AppiumBy.androidUIAutomator(&quot;new UiScrollable(new UiSelector().scrollable(true)).scrollIntoView(new UiSelector().resourceId(\\&quot;&quot;+resourceId+&quot;\\&quot;));&quot;));\r\nelement.click();\r\n```\r\n\r\nThe output is showing NoSuchElementException but scroll function is not working then it is obvious that NoSuchElementException will be thrown because desired element is not in current focus of the device&#39;s screen, it can&#39;t be located.\r\n\r\n\r\noutput:\r\n```\r\norg.openqa.selenium.NoSuchElementException: An element could not be located on the page using the given search parameters.\r\nFor documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception\r\nBuild info: version: &#39;4.10.0&#39;, revision: &#39;c14d967899&#39;\r\nSystem info: os.name: &#39;Mac OS X&#39;, os.arch: &#39;aarch64&#39;, os.version: &#39;13.4&#39;, java.version: &#39;11.0.19&#39;\r\nDriver info: io.appium.java_client.android.AndroidDriver\r\nCommand: [32fc3d21-6a7f-46eb-b8a2-99f18bdd920a, findElement {using=-android uiautomator, value=new UiScrollable(new UiSelector().scrollable(true)).scrollIntoView(new UiSelector().resourceId(&quot;&lt;masking_the_id&gt;&quot;));}]\r\nCapabilities {appium:automationName: UIAutomator2, appium:databaseEnabled: false, appium:desired: {automationName: UIAutomator2, platformName: ANDROID}, appium:deviceApiLevel: 33, appium:deviceManufacturer: XXXXX, appium:deviceModel: XXXXXXX, appium:deviceName: XXXXXX, appium:deviceScreenDensity: 450, appium:deviceScreenSize: 1080x2408, appium:deviceUDID: XXXXX, appium:javascriptEnabled: true, appium:locationContextEnabled: false, appium:networkConnectionEnabled: true, appium:pixelRatio: 2.8125, appium:platformVersion: 13, appium:statBarHeight: 70, appium:takesScreenshot: true, appium:viewportRect: {height: 2133, left: 0, top: 70, width: 1080}, appium:warnings: {}, appium:webStorageEnabled: false, platformName: ANDROID}\r\nSession ID: 32fc3d21-6a7f-46eb-b8a2-99f18bdd920a\r\n```","title":"How to scroll to the element with resourceId or id if you don&#39;t have the text or content-desc as attributes of that element in Appium","body":"<p>I am trying to execute this script but the scroll function is not working, I have rechecked the resourceId, it is correct and this method works when used with text(&quot;&lt;desired_text&gt;&quot;) or description(&lt;desired_text&gt;) in place of resourceId(&quot;&lt;/element_id&gt;&quot;). But I don't have those attribute values in the app.</p>\n<pre><code>WebElement element = driver.findElement(AppiumBy.androidUIAutomator(&quot;new UiScrollable(new UiSelector().scrollable(true)).scrollIntoView(new UiSelector().resourceId(\\&quot;&quot;+resourceId+&quot;\\&quot;));&quot;));\nelement.click();\n</code></pre>\n<p>The output is showing NoSuchElementException but scroll function is not working then it is obvious that NoSuchElementException will be thrown because desired element is not in current focus of the device's screen, it can't be located.</p>\n<p>output:</p>\n<pre><code>org.openqa.selenium.NoSuchElementException: An element could not be located on the page using the given search parameters.\nFor documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception\nBuild info: version: '4.10.0', revision: 'c14d967899'\nSystem info: os.name: 'Mac OS X', os.arch: 'aarch64', os.version: '13.4', java.version: '11.0.19'\nDriver info: io.appium.java_client.android.AndroidDriver\nCommand: [32fc3d21-6a7f-46eb-b8a2-99f18bdd920a, findElement {using=-android uiautomator, value=new UiScrollable(new UiSelector().scrollable(true)).scrollIntoView(new UiSelector().resourceId(&quot;&lt;masking_the_id&gt;&quot;));}]\nCapabilities {appium:automationName: UIAutomator2, appium:databaseEnabled: false, appium:desired: {automationName: UIAutomator2, platformName: ANDROID}, appium:deviceApiLevel: 33, appium:deviceManufacturer: XXXXX, appium:deviceModel: XXXXXXX, appium:deviceName: XXXXXX, appium:deviceScreenDensity: 450, appium:deviceScreenSize: 1080x2408, appium:deviceUDID: XXXXX, appium:javascriptEnabled: true, appium:locationContextEnabled: false, appium:networkConnectionEnabled: true, appium:pixelRatio: 2.8125, appium:platformVersion: 13, appium:statBarHeight: 70, appium:takesScreenshot: true, appium:viewportRect: {height: 2133, left: 0, top: 70, width: 1080}, appium:warnings: {}, appium:webStorageEnabled: false, platformName: ANDROID}\nSession ID: 32fc3d21-6a7f-46eb-b8a2-99f18bdd920a\n</code></pre>\n"},{"tags":["java","protocol-buffers"],"comments":[{"owner":{"account_id":11683,"reputation":1438111,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1404212099,"post_id":24508458,"comment_id":37943191,"body_markdown":"Please show a short but complete program demonstrating the problem. (Do you have a short message which you can put in just a `byte[]` for example?)","body":"Please show a short but complete program demonstrating the problem. (Do you have a short message which you can put in just a <code>byte[]</code> for example?)"},{"owner":{"account_id":472466,"reputation":902,"user_id":880963,"accept_rate":43,"display_name":"krish7919"},"score":0,"creation_date":1404212891,"post_id":24508458,"comment_id":37943639,"body_markdown":"@JonSkeet I have updated the question with my code. Please check.","body":"@JonSkeet I have updated the question with my code. Please check."},{"owner":{"account_id":11975,"reputation":1033772,"user_id":23354,"accept_rate":100,"display_name":"Marc Gravell"},"score":2,"creation_date":1404215679,"post_id":24508458,"comment_id":37945209,"body_markdown":"is the received `byte[]` by any chance an *oversized* buffer, with some spare `0`s at the end? For the record, I would expect that message to be exactly 5 bytes, so either `receivedPkt` should be length `5`, or you need to handle framing etc such that you only try to parse a single (but complete) message at a time","body":"is the received <code>byte[]</code> by any chance an <i>oversized</i> buffer, with some spare <code>0</code>s at the end? For the record, I would expect that message to be exactly 5 bytes, so either <code>receivedPkt</code> should be length <code>5</code>, or you need to handle framing etc such that you only try to parse a single (but complete) message at a time"},{"owner":{"account_id":472466,"reputation":902,"user_id":880963,"accept_rate":43,"display_name":"krish7919"},"score":0,"creation_date":1404216098,"post_id":24508458,"comment_id":37945456,"body_markdown":"It is a complete message. The sent length and the received length are equal and Arrays.equal also says they are equal.","body":"It is a complete message. The sent length and the received length are equal and Arrays.equal also says they are equal."},{"owner":{"account_id":11683,"reputation":1438111,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1404216387,"post_id":24508458,"comment_id":37945615,"body_markdown":"So why don&#39;t you show us that in a short but complete program demonstrating the problem? It should just be two lines of code within `main`: `byte[] bytes = ...; IpMessage.parseFrom(bytes);`","body":"So why don&#39;t you show us that in a short but complete program demonstrating the problem? It should just be two lines of code within <code>main</code>: <code>byte[] bytes = ...; IpMessage.parseFrom(bytes);</code>"},{"owner":{"account_id":11975,"reputation":1033772,"user_id":23354,"accept_rate":100,"display_name":"Marc Gravell"},"score":1,"creation_date":1404218183,"post_id":24508458,"comment_id":37946689,"body_markdown":"you say it is a complete message: can you confirm, what is the length of `receivedPkt`? Or even better: just show us the exact bytes (hex, base-64, decimal, whatever), and then we will **know** whether it is a valid array containing a well-formed protobuf message.","body":"you say it is a complete message: can you confirm, what is the length of <code>receivedPkt</code>? Or even better: just show us the exact bytes (hex, base-64, decimal, whatever), and then we will <b>know</b> whether it is a valid array containing a well-formed protobuf message."},{"owner":{"account_id":472466,"reputation":902,"user_id":880963,"accept_rate":43,"display_name":"krish7919"},"score":1,"creation_date":1425804419,"post_id":24508458,"comment_id":46105722,"body_markdown":"@MarcGravell: Please put your comment as answer and I will accept it. That was the root cause.\nI ran into the same problem again and remembered this post; excuse me for the late acceptance.","body":"@MarcGravell: Please put your comment as answer and I will accept it. That was the root cause. I ran into the same problem again and remembered this post; excuse me for the late acceptance."}],"answers":[{"tags":[],"owner":{"account_id":406121,"reputation":1365,"user_id":954747,"accept_rate":11,"display_name":"Linh Dao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644918858,"creation_date":1644918858,"answer_id":71124374,"question_id":24508458,"body_markdown":"This error appears if your code parses wrong protobuf message at current binary file location. In your case above, current `receivedPkt` isn&#39;t a `IpMessage`.","title":"InvalidProtocolBufferException when parsing protobuf - invalid tag (zero)","body":"<p>This error appears if your code parses wrong protobuf message at current binary file location. In your case above, current <code>receivedPkt</code> isn't a <code>IpMessage</code>.</p>\n"}],"owner":{"account_id":472466,"reputation":902,"user_id":880963,"accept_rate":43,"display_name":"krish7919"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9794,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":1,"score":4,"last_activity_date":1699884295,"creation_date":1404211917,"question_id":24508458,"body_markdown":"I have a protobuf message which cribs while being parsed.\r\n\r\n\r\nI ran the client and server on the same machine and serialized the byte stream.\r\n\r\n\r\nI compare this with the received byte array using Arrays.equal in java.\r\nIt says that they are equal.\r\n\r\nMy protobuf has just a single fixed32 field storing an IP address.\r\n\r\nI used both google protobuf 2.4.1 and 2.5.0 versions with no success. Anything I am missing here?\r\n\r\nStacktrace:\r\n\r\n    com.google.protobuf.InvalidProtocolBufferException: Protocol message contained an invalid tag (zero).\r\n\tat com.google.protobuf.InvalidProtocolBufferException.invalidTag(InvalidProtocolBufferException.java:89)\r\n\tat com.google.protobuf.CodedInputStream.readTag(CodedInputStream.java:108)\r\n...\r\n...\r\n\r\n\r\nProtobuf Code:\r\n\r\n    message IpMessage {\r\n        required fixed32 ip = 1;\r\n    }\r\n\r\nCompilation:\r\n\r\n    protoc --java_out=. ip-message.proto\r\n\r\nTo parse the message, I use:\r\n\r\n    IpMessage.parseFrom(receivedPkt); //receivedPkt is byte[]\r\n\r\n","title":"InvalidProtocolBufferException when parsing protobuf - invalid tag (zero)","body":"<p>I have a protobuf message which cribs while being parsed.</p>\n\n<p>I ran the client and server on the same machine and serialized the byte stream.</p>\n\n<p>I compare this with the received byte array using Arrays.equal in java.\nIt says that they are equal.</p>\n\n<p>My protobuf has just a single fixed32 field storing an IP address.</p>\n\n<p>I used both google protobuf 2.4.1 and 2.5.0 versions with no success. Anything I am missing here?</p>\n\n<p>Stacktrace:</p>\n\n<pre><code>com.google.protobuf.InvalidProtocolBufferException: Protocol message contained an invalid tag (zero).\nat com.google.protobuf.InvalidProtocolBufferException.invalidTag(InvalidProtocolBufferException.java:89)\nat com.google.protobuf.CodedInputStream.readTag(CodedInputStream.java:108)\n</code></pre>\n\n<p>...\n...</p>\n\n<p>Protobuf Code:</p>\n\n<pre><code>message IpMessage {\n    required fixed32 ip = 1;\n}\n</code></pre>\n\n<p>Compilation:</p>\n\n<pre><code>protoc --java_out=. ip-message.proto\n</code></pre>\n\n<p>To parse the message, I use:</p>\n\n<pre><code>IpMessage.parseFrom(receivedPkt); //receivedPkt is byte[]\n</code></pre>\n"},{"tags":["java","maven-jaxb2-plugin","jaxb2-basics"],"answers":[{"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1685631217,"creation_date":1685535069,"answer_id":76373368,"question_id":76371804,"body_markdown":"Not sure about (the future of) `org.jvnet.jaxb2.maven2`, but the actual xjc-plugin/fuctionality ([jaxb2-value-constructor][1]) seems jaxb-version-agnostic.\r\n\r\nI could manage with (latest jakarta.xml and):\r\n\r\n### Apache&#39;s [cxf-xjc-plugin][2]\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n  &lt;artifactId&gt;xjc-demo-shiporder&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n  &lt;properties&gt;\r\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;cxf-xjc-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;4.0.0&lt;/version&gt; &lt;!-- resp. latest --&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;cxf-xjc&lt;/id&gt;\r\n            &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;xsdtojava&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n              &lt;sourceRoot&gt;${basedir}/target/generated-sources/jaxb&lt;/sourceRoot&gt;\r\n              &lt;extensions&gt;\r\n                &lt;extension&gt;org.jvnet.jaxb2_commons:jaxb2-value-constructor:3.0&lt;/extension&gt;\r\n              &lt;/extensions&gt;\r\n              &lt;xsdOptions&gt;\r\n                &lt;xsdOption&gt;\r\n                  &lt;xsd&gt;/src/main/xsd/shiporder.xsd&lt;/xsd&gt;\r\n                  &lt;packagename&gt;com.example.cxf.shiporder&lt;/packagename&gt;\r\n                  &lt;extensionArgs&gt;\r\n                    &lt;extensionArg&gt;-Xvalue-constructor&lt;/extensionArg&gt;\r\n                  &lt;/extensionArgs&gt;\r\n                &lt;/xsdOption&gt;\r\n              &lt;/xsdOptions&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;      \r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n      &lt;version&gt;4.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n...basically the quickstart, with the only &quot;extensions&quot;: `&lt;extensions/&gt;` + `&lt;extensionsArgs&gt;`.\r\n\r\n... but also with:\r\n\r\n### &lt;s&gt;Code&lt;/s&gt;Mojohaus&#39; [jaxb2-maven-plugin][3]\r\n\r\n```lang-xml\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.0&lt;/version&gt; &lt;!-- resp. latest --&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;codehaus-xjc&lt;/id&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;xjc&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n        &lt;configuration&gt;\r\n          &lt;arguments&gt;\r\n            &lt;argument&gt;-Xvalue-constructor&lt;/argument&gt;\r\n          &lt;/arguments&gt;\r\n          &lt;packageName&gt;com.example.codehaus.shiporder&lt;/packageName&gt; \r\n        &lt;/configuration&gt;\r\n        &lt;dependencies&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jvnet.jaxb2_commons&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jaxb2-value-constructor&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0&lt;/version&gt; &lt;!-- final/archived --&gt;\r\n          &lt;/dependency&gt;          \r\n        &lt;/dependencies&gt;\r\n    &lt;/plugin&gt;\r\n```\r\n..with the same &quot;pom skeletton&quot;. \r\n\r\n\r\nNow we have &quot;xsd2java&quot; generation with:\r\n- latest xml api and \r\n- &quot;no+all-args-constructors&quot; in the generated classes.\r\n\r\nI would not recommend to mix both plugins in one project.\r\n\r\nThe generated sources are identical (disregarding packages and timestamps), since generated by the same (jdk) tool with equivalent input.\r\n\r\n\r\n\r\n(xsd used: https://gist.github.com/xerx593/76e449c599307a48a5264aa746651ec8)\r\n\r\n  [1]: https://github.com/javaee/jaxb2-commons/blob/master/value-constructor/src/main/java/org/jvnet/jaxb2_commons/plugin/value_constructor/ValueConstructorPlugin.java\r\n  [2]: https://cxf.apache.org/cxf-xjc-plugin.html\r\n  [3]: https://github.com/mojohaus/jaxb2-maven-plugin","title":"Is there a way to generate value constructors when creating Java code using jakarta dependencies in JAXB?","body":"<p>Not sure about (the future of) <code>org.jvnet.jaxb2.maven2</code>, but the actual xjc-plugin/fuctionality (<a href=\"https://github.com/javaee/jaxb2-commons/blob/master/value-constructor/src/main/java/org/jvnet/jaxb2_commons/plugin/value_constructor/ValueConstructorPlugin.java\" rel=\"nofollow noreferrer\">jaxb2-value-constructor</a>) seems jaxb-version-agnostic.</p>\n<p>I could manage with (latest jakarta.xml and):</p>\n<h3>Apache's <a href=\"https://cxf.apache.org/cxf-xjc-plugin.html\" rel=\"nofollow noreferrer\">cxf-xjc-plugin</a></h3>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.example&lt;/groupId&gt;\n  &lt;artifactId&gt;xjc-demo-shiporder&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n        &lt;artifactId&gt;cxf-xjc-plugin&lt;/artifactId&gt;\n        &lt;version&gt;4.0.0&lt;/version&gt; &lt;!-- resp. latest --&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;cxf-xjc&lt;/id&gt;\n            &lt;phase&gt;generate-sources&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;xsdtojava&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n              &lt;sourceRoot&gt;${basedir}/target/generated-sources/jaxb&lt;/sourceRoot&gt;\n              &lt;extensions&gt;\n                &lt;extension&gt;org.jvnet.jaxb2_commons:jaxb2-value-constructor:3.0&lt;/extension&gt;\n              &lt;/extensions&gt;\n              &lt;xsdOptions&gt;\n                &lt;xsdOption&gt;\n                  &lt;xsd&gt;/src/main/xsd/shiporder.xsd&lt;/xsd&gt;\n                  &lt;packagename&gt;com.example.cxf.shiporder&lt;/packagename&gt;\n                  &lt;extensionArgs&gt;\n                    &lt;extensionArg&gt;-Xvalue-constructor&lt;/extensionArg&gt;\n                  &lt;/extensionArgs&gt;\n                &lt;/xsdOption&gt;\n              &lt;/xsdOptions&gt;\n            &lt;/configuration&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;      \n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n      &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n      &lt;version&gt;4.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>...basically the quickstart, with the only &quot;extensions&quot;: <code>&lt;extensions/&gt;</code> + <code>&lt;extensionsArgs&gt;</code>.</p>\n<p>... but also with:</p>\n<h3><s>Code</s>Mojohaus' <a href=\"https://github.com/mojohaus/jaxb2-maven-plugin\" rel=\"nofollow noreferrer\">jaxb2-maven-plugin</a></h3>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;plugin&gt;\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt; &lt;!-- resp. latest --&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;codehaus-xjc&lt;/id&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;xjc&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n        &lt;configuration&gt;\n          &lt;arguments&gt;\n            &lt;argument&gt;-Xvalue-constructor&lt;/argument&gt;\n          &lt;/arguments&gt;\n          &lt;packageName&gt;com.example.codehaus.shiporder&lt;/packageName&gt; \n        &lt;/configuration&gt;\n        &lt;dependencies&gt;\n          &lt;dependency&gt;\n            &lt;groupId&gt;org.jvnet.jaxb2_commons&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb2-value-constructor&lt;/artifactId&gt;\n            &lt;version&gt;3.0&lt;/version&gt; &lt;!-- final/archived --&gt;\n          &lt;/dependency&gt;          \n        &lt;/dependencies&gt;\n    &lt;/plugin&gt;\n</code></pre>\n<p>..with the same &quot;pom skeletton&quot;.</p>\n<p>Now we have &quot;xsd2java&quot; generation with:</p>\n<ul>\n<li>latest xml api and</li>\n<li>&quot;no+all-args-constructors&quot; in the generated classes.</li>\n</ul>\n<p>I would not recommend to mix both plugins in one project.</p>\n<p>The generated sources are identical (disregarding packages and timestamps), since generated by the same (jdk) tool with equivalent input.</p>\n<p>(xsd used: <a href=\"https://gist.github.com/xerx593/76e449c599307a48a5264aa746651ec8\" rel=\"nofollow noreferrer\">https://gist.github.com/xerx593/76e449c599307a48a5264aa746651ec8</a>)</p>\n"},{"tags":[],"owner":{"account_id":3909931,"reputation":406,"user_id":3235583,"display_name":"Rick O&#39;Sullivan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693154634,"creation_date":1693154634,"answer_id":76988052,"question_id":76371804,"body_markdown":"Yes, there is a way to generate Java code from an XSD file so that the generated code uses the new Jakarta dependencies AND comprises a simple default constructor and a value constructor (a constructor that accepts all class fields as parameter).\r\n\r\nVersion 2.1.1 of the `hisrc-higherjaxb-maven-plugin` generates Jakarta JAXB classes from an XSD file and uses `hisrc-basicjaxb-plugins` to extend XJC with a `valueConstructor` add-on.\r\n\r\n**Sample POM configuration**\r\n~~~\r\n...\r\n&lt;!-- mvn hisrc-higherjaxb:help -Ddetail=true --&gt;\r\n&lt;!-- mvn hisrc-higherjaxb:generate --&gt;\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.patrodyne.jvnet&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hisrc-higherjaxb-maven-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;2.1.1&lt;/version&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;generate&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n    &lt;configuration&gt;\r\n        &lt;extension&gt;true&lt;/extension&gt;\r\n        &lt;debug&gt;true&lt;/debug&gt;\r\n        &lt;args&gt;\r\n            &lt;arg&gt;-XvalueConstructor&lt;/arg&gt;\r\n        &lt;/args&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.patrodyne.jvnet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hisrc-basicjaxb-plugins&lt;/artifactId&gt;\r\n                &lt;version&gt;2.1.1&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n...\r\n~~~","title":"Is there a way to generate value constructors when creating Java code using jakarta dependencies in JAXB?","body":"<p>Yes, there is a way to generate Java code from an XSD file so that the generated code uses the new Jakarta dependencies AND comprises a simple default constructor and a value constructor (a constructor that accepts all class fields as parameter).</p>\n<p>Version 2.1.1 of the <code>hisrc-higherjaxb-maven-plugin</code> generates Jakarta JAXB classes from an XSD file and uses <code>hisrc-basicjaxb-plugins</code> to extend XJC with a <code>valueConstructor</code> add-on.</p>\n<p><strong>Sample POM configuration</strong></p>\n<pre><code>...\n&lt;!-- mvn hisrc-higherjaxb:help -Ddetail=true --&gt;\n&lt;!-- mvn hisrc-higherjaxb:generate --&gt;\n&lt;plugin&gt;\n    &lt;groupId&gt;org.patrodyne.jvnet&lt;/groupId&gt;\n    &lt;artifactId&gt;hisrc-higherjaxb-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.1.1&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;generate&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n    &lt;configuration&gt;\n        &lt;extension&gt;true&lt;/extension&gt;\n        &lt;debug&gt;true&lt;/debug&gt;\n        &lt;args&gt;\n            &lt;arg&gt;-XvalueConstructor&lt;/arg&gt;\n        &lt;/args&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.patrodyne.jvnet&lt;/groupId&gt;\n                &lt;artifactId&gt;hisrc-basicjaxb-plugins&lt;/artifactId&gt;\n                &lt;version&gt;2.1.1&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29874264,"reputation":463,"user_id":22894892,"display_name":"Laurent Schoelens"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699884017,"creation_date":1699884017,"answer_id":77474425,"question_id":76371804,"body_markdown":"I know the question is quite old now but I wanted to notice that the plugin you used is now capable of generating Java code regarding latest JAXB API version (`jakarta` namespace starting with v3)\r\n\r\nWe did some refactoring so please read the [migration guide][1] if needed.\r\n\r\nThat would lead to the following configuration :\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n&lt;groupId&gt;org.jvnet.jaxb&lt;/groupId&gt;\r\n&lt;artifactId&gt;jaxb-maven-plugin&lt;/artifactId&gt;\r\n&lt;version&gt;4.0.0&lt;/version&gt;\r\n&lt;executions&gt;\r\n    &lt;execution&gt;\r\n        ...\r\n        &lt;configuration&gt;\r\n            ...\r\n            &lt;args&gt;\r\n                &lt;arg&gt;-Xvalue-constructor&lt;/arg&gt;\r\n            &lt;/args&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/execution&gt;\r\n&lt;/executions&gt;\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.jvnet.jaxb&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxb-plugins&lt;/artifactId&gt;\r\n        &lt;version&gt;4.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\n*Note :* we did integrate in former **jaxb2-basics** extension (now artifact is named `org.jvnet.jaxb:jaxb-plugins`) the 5 plugins outside of *basics* which you could find [here][2], including the `jaxb2-value-constructor`.\r\n\r\n\r\n  [1]: https://github.com/highsource/jaxb-tools/wiki/JAXB-Tools-Migration-Guide\r\n  [2]: https://github.com/javaee/jaxb2-commons","title":"Is there a way to generate value constructors when creating Java code using jakarta dependencies in JAXB?","body":"<p>I know the question is quite old now but I wanted to notice that the plugin you used is now capable of generating Java code regarding latest JAXB API version (<code>jakarta</code> namespace starting with v3)</p>\n<p>We did some refactoring so please read the <a href=\"https://github.com/highsource/jaxb-tools/wiki/JAXB-Tools-Migration-Guide\" rel=\"nofollow noreferrer\">migration guide</a> if needed.</p>\n<p>That would lead to the following configuration :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n&lt;groupId&gt;org.jvnet.jaxb&lt;/groupId&gt;\n&lt;artifactId&gt;jaxb-maven-plugin&lt;/artifactId&gt;\n&lt;version&gt;4.0.0&lt;/version&gt;\n&lt;executions&gt;\n    &lt;execution&gt;\n        ...\n        &lt;configuration&gt;\n            ...\n            &lt;args&gt;\n                &lt;arg&gt;-Xvalue-constructor&lt;/arg&gt;\n            &lt;/args&gt;\n        &lt;/configuration&gt;\n    &lt;/execution&gt;\n&lt;/executions&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jvnet.jaxb&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-plugins&lt;/artifactId&gt;\n        &lt;version&gt;4.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p><em>Note :</em> we did integrate in former <strong>jaxb2-basics</strong> extension (now artifact is named <code>org.jvnet.jaxb:jaxb-plugins</code>) the 5 plugins outside of <em>basics</em> which you could find <a href=\"https://github.com/javaee/jaxb2-commons\" rel=\"nofollow noreferrer\">here</a>, including the <code>jaxb2-value-constructor</code>.</p>\n"}],"owner":{"account_id":16158338,"reputation":43,"user_id":11665099,"display_name":"Philipp Kemkes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":630,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76373368,"answer_count":3,"score":2,"last_activity_date":1699884017,"creation_date":1685523709,"question_id":76371804,"body_markdown":"I&#39;m migrating my JAXB code from the javax.* to the jakarta.* dependencies. Until now I used the following maven plugin to generate the Java code.\r\n\r\n\r\n```\r\n&lt;plugin&gt;\r\n&lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\r\n&lt;artifactId&gt;maven-jaxb23-plugin&lt;/artifactId&gt;\r\n&lt;version&gt;0.15.2&lt;/version&gt;\r\n&lt;executions&gt;\r\n    &lt;execution&gt;\r\n        ...\r\n        &lt;configuration&gt;\r\n            ...\r\n            &lt;args&gt;\r\n                &lt;arg&gt;-Xvalue-constructor&lt;/arg&gt;\r\n            &lt;/args&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/execution&gt;\r\n&lt;/executions&gt;\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.jvnet.jaxb2_commons&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxb2-value-constructor&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nOf course this maven plugin creates code using the javax dependencies. \r\n\r\n                \r\n\r\n\r\nThere is a fork that has been updated to jakarta:\r\n\r\n```\r\n&lt;groupId&gt;com.helger.maven&lt;/groupId&gt;\r\n&lt;artifactId&gt;jaxb40-maven-plugin&lt;/artifactId&gt;\r\n```\r\n\r\nBut I haven&#39;t found an updated version of the plugin which generates the value constructors (jaxb2-value-constructor).\r\n\r\nIs there another way to generate Java code from an XSD file so that the generated code uses the new Jakarta dependencies AND comprises a simple default constructor and a value constructor (a constructor that accepts all class fields as parameter)?","title":"Is there a way to generate value constructors when creating Java code using jakarta dependencies in JAXB?","body":"<p>I'm migrating my JAXB code from the javax.* to the jakarta.* dependencies. Until now I used the following maven plugin to generate the Java code.</p>\n<pre><code>&lt;plugin&gt;\n&lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\n&lt;artifactId&gt;maven-jaxb23-plugin&lt;/artifactId&gt;\n&lt;version&gt;0.15.2&lt;/version&gt;\n&lt;executions&gt;\n    &lt;execution&gt;\n        ...\n        &lt;configuration&gt;\n            ...\n            &lt;args&gt;\n                &lt;arg&gt;-Xvalue-constructor&lt;/arg&gt;\n            &lt;/args&gt;\n        &lt;/configuration&gt;\n    &lt;/execution&gt;\n&lt;/executions&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jvnet.jaxb2_commons&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb2-value-constructor&lt;/artifactId&gt;\n        &lt;version&gt;3.0&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Of course this maven plugin creates code using the javax dependencies.</p>\n<p>There is a fork that has been updated to jakarta:</p>\n<pre><code>&lt;groupId&gt;com.helger.maven&lt;/groupId&gt;\n&lt;artifactId&gt;jaxb40-maven-plugin&lt;/artifactId&gt;\n</code></pre>\n<p>But I haven't found an updated version of the plugin which generates the value constructors (jaxb2-value-constructor).</p>\n<p>Is there another way to generate Java code from an XSD file so that the generated code uses the new Jakarta dependencies AND comprises a simple default constructor and a value constructor (a constructor that accepts all class fields as parameter)?</p>\n"},{"tags":["java","android","arrays"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1531429912,"post_id":51314501,"comment_id":89605684,"body_markdown":"What don&#39;t you understand about it?","body":"What don&#39;t you understand about it?"},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1531430446,"post_id":51314501,"comment_id":89605878,"body_markdown":"THe array is hard coded.  You can see the values.  Its a really weird implementation but it works.  ALso, it isn&#39;t called the XOX game and I had no idea what you meant until I read the code-  its called tic-tac-toe.","body":"THe array is hard coded.  You can see the values.  Its a really weird implementation but it works.  ALso, it isn&#39;t called the XOX game and I had no idea what you meant until I read the code-  its called tic-tac-toe."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1531430911,"post_id":51314501,"comment_id":89606058,"body_markdown":"8 ways to win- 3 horizontal, 3 vertical, 2 diagonal. The days are the positions in the grid. Starting from square 0 to square 8","body":"8 ways to win- 3 horizontal, 3 vertical, 2 diagonal. The days are the positions in the grid. Starting from square 0 to square 8"}],"answers":[{"tags":[],"owner":{"account_id":7525136,"reputation":1212,"user_id":5715599,"accept_rate":20,"display_name":"Aidan Rosswood"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531431739,"creation_date":1531430043,"answer_id":51314548,"question_id":51314501,"body_markdown":"`for (int [] winningPosition : winningPositions)`\r\n\r\nIterates through the array called `winningPositions`. Each iteration has the variable called `winningPosition` which is an int array of length 3. \r\n\r\n    if (gameState[winningPosition[0]] == gameState[winningPosition[1]] &amp;&amp;\r\n        gameState[winningPosition[1]] == gameState[winningPosition[2]] &amp;&amp;\r\n        gameState[winningPosition[0]] != 2)\r\n checks that all the positions are owned by the same player and the last part `gameState[winningPosition[0]] != 2` checks that the line isn&#39;t empty.\r\n\r\nEDIT:\r\n\r\n@ChrisParker explains this line very well in the comments. `for (int [] winningPosition : winningPositions)`","title":"What does array do in this code?","body":"<p><code>for (int [] winningPosition : winningPositions)</code></p>\n\n<p>Iterates through the array called <code>winningPositions</code>. Each iteration has the variable called <code>winningPosition</code> which is an int array of length 3. </p>\n\n<pre><code>if (gameState[winningPosition[0]] == gameState[winningPosition[1]] &amp;&amp;\n    gameState[winningPosition[1]] == gameState[winningPosition[2]] &amp;&amp;\n    gameState[winningPosition[0]] != 2)\n</code></pre>\n\n<p>checks that all the positions are owned by the same player and the last part <code>gameState[winningPosition[0]] != 2</code> checks that the line isn't empty.</p>\n\n<p>EDIT:</p>\n\n<p>@ChrisParker explains this line very well in the comments. <code>for (int [] winningPosition : winningPositions)</code></p>\n"},{"tags":[],"owner":{"account_id":7761116,"reputation":143,"user_id":5873843,"accept_rate":71,"display_name":"JpersaudCodezit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531432834,"creation_date":1531432834,"answer_id":51315082,"question_id":51314501,"body_markdown":"The for loop is iterating through the array and checking each of the conditions inside the if statement, IF all of them are true then the code will go inside the IF loop otherwise it will skip over and continue.\n\nCheers","title":"What does array do in this code?","body":"<p>The for loop is iterating through the array and checking each of the conditions inside the if statement, IF all of them are true then the code will go inside the IF loop otherwise it will skip over and continue.</p>\n\n<p>Cheers</p>\n"},{"tags":[],"owner":{"account_id":5685747,"reputation":416,"user_id":6894838,"display_name":"Chris Parker"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1531434508,"creation_date":1531433513,"answer_id":51315179,"question_id":51314501,"body_markdown":"Answering based on the question posed below my comment:\r\n\r\nAt it&#39;s most fundamental, the format for that for loop is\r\n\r\n    for(&#39;one object&#39; : &#39;group of objects&#39;)\r\n\r\nNow then, under ordinary circumstances you&#39;d use something along the lines of:\r\n\r\n    for(String oneString : arrayOfStrings)\r\n\r\n\r\nBased on your question, it appears as if you are unaware that you can statically specify an array of values by putting them inside braces.  For example:\r\n\r\n    String[] arrayOfStrings = {&quot;zero&quot;, &quot;one&quot;, &quot;two&quot;};\r\n\r\n\r\nThat produces exactly the same result as:\r\n\r\n\r\n    String[] arrayOfStrings = new String[3];\r\n    arrayOfStrings[0] = &quot;zero&quot;;\r\n    arrayOfStrings[1] = &quot;one&quot;;\r\n    arrayOfStrings[2] = &quot;two&quot;;\r\n\r\n\r\nYou could loop over that with `for(String string : arrayOfStrings)`...\r\n\r\n\r\nGoing back to your original code - they have embedded braces inside braces, which is how you declare a multi-dimensional array.  So the following:\r\n\r\n    int [][] winningPositions = {{0,1,2},{3,4,5},{6,7,8},{0,3,6},{1,4,7},{2,5,8},{0,4,8},{2,4,6}};\r\n\r\nProduces the same array as:\r\n\r\n    int[][] winningPositions = new int[8][3];\r\n    winningPositions[0][0] = 0;\r\n    winningPositions[0][1] = 1;\r\n    winningPositions[0][2] = 2;\r\n    ...\r\n    winningPositions[7][0] = 2;\r\n    winningPositions[7][1] = 4;\r\n    winningPositions[7][2] = 6;\r\n\r\n\r\nWith me so far?\r\n\r\nThe full &quot;winningPositions&quot; variable is an object of type array, whose content is itself a sequence of arrays.  Okay, so now when you do your loop that you don&#39;t understand, this:\r\n\r\n    for (int [] winningPosition : winningPositions)\r\n\r\nEach item in the array &quot;winningPosition&quot; is itself an array - as I just said - so the &quot;one object&quot; resolves to the inner array, which has 3 elements, while the outer has 8.\r\n\r\nDoes that help?\r\n\r\n\r\n*On a side note: Code like that is either aimed at new programmers, or else is written by someone that doesn&#39;t understand OO programming.  It&#39;s worthwhile to understand how it works, it is not necessarily meant to be emulated.  Or at least by the time you know I&#39;m wrong about that, you&#39;ll know why I&#39;m wrong.*\r\n\r\n","title":"What does array do in this code?","body":"<p>Answering based on the question posed below my comment:</p>\n\n<p>At it's most fundamental, the format for that for loop is</p>\n\n<pre><code>for('one object' : 'group of objects')\n</code></pre>\n\n<p>Now then, under ordinary circumstances you'd use something along the lines of:</p>\n\n<pre><code>for(String oneString : arrayOfStrings)\n</code></pre>\n\n<p>Based on your question, it appears as if you are unaware that you can statically specify an array of values by putting them inside braces.  For example:</p>\n\n<pre><code>String[] arrayOfStrings = {\"zero\", \"one\", \"two\"};\n</code></pre>\n\n<p>That produces exactly the same result as:</p>\n\n<pre><code>String[] arrayOfStrings = new String[3];\narrayOfStrings[0] = \"zero\";\narrayOfStrings[1] = \"one\";\narrayOfStrings[2] = \"two\";\n</code></pre>\n\n<p>You could loop over that with <code>for(String string : arrayOfStrings)</code>...</p>\n\n<p>Going back to your original code - they have embedded braces inside braces, which is how you declare a multi-dimensional array.  So the following:</p>\n\n<pre><code>int [][] winningPositions = {{0,1,2},{3,4,5},{6,7,8},{0,3,6},{1,4,7},{2,5,8},{0,4,8},{2,4,6}};\n</code></pre>\n\n<p>Produces the same array as:</p>\n\n<pre><code>int[][] winningPositions = new int[8][3];\nwinningPositions[0][0] = 0;\nwinningPositions[0][1] = 1;\nwinningPositions[0][2] = 2;\n...\nwinningPositions[7][0] = 2;\nwinningPositions[7][1] = 4;\nwinningPositions[7][2] = 6;\n</code></pre>\n\n<p>With me so far?</p>\n\n<p>The full \"winningPositions\" variable is an object of type array, whose content is itself a sequence of arrays.  Okay, so now when you do your loop that you don't understand, this:</p>\n\n<pre><code>for (int [] winningPosition : winningPositions)\n</code></pre>\n\n<p>Each item in the array \"winningPosition\" is itself an array - as I just said - so the \"one object\" resolves to the inner array, which has 3 elements, while the outer has 8.</p>\n\n<p>Does that help?</p>\n\n<p><em>On a side note: Code like that is either aimed at new programmers, or else is written by someone that doesn't understand OO programming.  It's worthwhile to understand how it works, it is not necessarily meant to be emulated.  Or at least by the time you know I'm wrong about that, you'll know why I'm wrong.</em></p>\n"}],"owner":{"account_id":11589959,"reputation":31,"user_id":8490695,"display_name":"Anil Demir"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":430,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"accepted_answer_id":51315179,"answer_count":3,"score":-3,"last_activity_date":1699883605,"creation_date":1531429787,"question_id":51314501,"body_markdown":"I am studying on udemy. I was writing the code of XOX game. I think all of us know XOX game. My code is working but i didn&#39;t understand what does this code do ? \r\n\r\n    for (int [] winningPosition : winningPositions){\r\n                        if (gameState[winningPosition[0]] == gameState[winningPosition[1]] &amp;&amp; gameState[winningPosition[1]] == gameState[winningPosition[2]] &amp;&amp;\r\n                                gameState[winningPosition[0]] != 2)}\r\n\r\nThe code which is the i dont get is above. Please help me with understand that.\r\n\r\n    { package com.example.anild.xox;\r\n        \r\n        import android.support.v7.app.AppCompatActivity;\r\n        import android.os.Bundle;\r\n        import android.view.View;\r\n        import android.widget.GridLayout;\r\n        import android.widget.ImageView;\r\n        import android.widget.LinearLayout;\r\n        import android.widget.TextView;\r\n        \r\n        public class MainActivity extends AppCompatActivity {\r\n            // 0 = yellow, 1 = red\r\n        \r\n            int activePlayer = 0;\r\n        \r\n            boolean gameIsActive = true;\r\n        \r\n            //2 means unplayed\r\n            int [] gameState = {2,2,2,2,2,2,2,2,2};\r\n        \r\n            int [][] winningPositions = {{0,1,2},{3,4,5},{6,7,8},{0,3,6},{1,4,7},{2,5,8},{0,4,8},{2,4,6}};\r\n        \r\n            public void dropIn(View view) {\r\n        \r\n                ImageView counter = (ImageView) view;\r\n        \r\n                int tappedCounter = Integer.parseInt(counter.getTag().toString());\r\n        \r\n                if(gameState[tappedCounter] == 2 &amp;&amp; gameIsActive) {\r\n        \r\n                    //burada tappedCounterdaki sayıyı &#231;ekiyor yani tag&#39;i daha sonra gamstate[] dizisine atıyor. Ve zaten hepsi 2 if koşulu sağlanıyor\r\n                    //Bir asağısında bu kural değişiyor. Bu alınan tag gametate&#39;te artık 0 olarak saklanıyor :)\r\n        \r\n                    gameState[tappedCounter] = activePlayer;\r\n        \r\n                    counter.setTranslationY(-1000f);\r\n        \r\n        \r\n                    if (activePlayer == 0) {\r\n                        counter.setImageResource(R.drawable.yellow);\r\n                        activePlayer = 1;\r\n                    } else {\r\n                        counter.setImageResource(R.drawable.red);\r\n                        activePlayer = 0;\r\n                    }\r\n        \r\n                    counter.animate().translationYBy(1000f).rotation(360).setDuration(300);\r\n        \r\n                    for (int [] winningPosition : winningPositions){\r\n                        if (gameState[winningPosition[0]] == gameState[winningPosition[1]] &amp;&amp; gameState[winningPosition[1]] == gameState[winningPosition[2]] &amp;&amp;\r\n                                gameState[winningPosition[0]] != 2){\r\n        \r\n                            //someone has won\r\n        \r\n                            gameIsActive = false;\r\n                            String winner = &quot;Red&quot;;\r\n                            if(gameState[winningPosition[0]] == 0){\r\n                                winner = &quot;Yellow&quot;;\r\n        \r\n                            }\r\n        \r\n                            TextView winnerMessage = (TextView) findViewById(R.id.winnerMessage);\r\n        \r\n                            winnerMessage.setText(winner + &quot;has won !&quot;);\r\n        \r\n                            LinearLayout layout = (LinearLayout)findViewById(R.id.playAgainLayout);\r\n        \r\n        \r\n                            layout.setVisibility(View.VISIBLE);\r\n                        }\r\n                        else {\r\n                            boolean gameIsOver = true;\r\n                            for(int counterState : gameState) {\r\n                                if (counterState == 2) {\r\n                                    gameIsOver = false;\r\n        \r\n                                }\r\n        \r\n                                if (gameIsOver) {\r\n                                    TextView winnerMessage = (TextView) findViewById(R.id.winnerMessage);\r\n        \r\n                                    winnerMessage.setText(&quot;it&#39;s a draw&quot;);\r\n        \r\n                                    LinearLayout layout = (LinearLayout)findViewById(R.id.playAgainLayout);\r\n        \r\n        \r\n                                    layout.setVisibility(View.VISIBLE);\r\n        \r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n        \r\n        \r\n        \r\n            }\r\n        \r\n            public void playAgain(View view) {\r\n        \r\n                gameIsActive = true;\r\n        \r\n                LinearLayout layout = (LinearLayout)findViewById(R.id.playAgainLayout);\r\n                layout.setVisibility(View.INVISIBLE);\r\n        \r\n                // 0 = yellow, 1 = red\r\n        \r\n                activePlayer = 0;\r\n        \r\n        \r\n        \r\n                for(int i = 0; i &lt; gameState.length; i++) {\r\n        \r\n                    gameState[i] = 2;\r\n                }\r\n        \r\n                GridLayout gridLayout = (GridLayout) findViewById(R.id.gridLayout);\r\n        \r\n                for(int i = 0; i &lt; gridLayout.getChildCount(); i++) {\r\n        \r\n                    ((ImageView) gridLayout.getChildAt(i)).setImageResource(0);\r\n        \r\n                }\r\n            }\r\n        \r\n        \r\n        \r\n            @Override\r\n            protected void onCreate(Bundle savedInstanceState) {\r\n                super.onCreate(savedInstanceState);\r\n                setContentView(R.layout.activity_main);\r\n        \r\n        \r\n        \r\n        \r\n            }\r\n        }\r\n    \r\n     }","title":"What does array do in this code?","body":"<p>I am studying on udemy. I was writing the code of XOX game. I think all of us know XOX game. My code is working but i didn't understand what does this code do ?</p>\n<pre><code>for (int [] winningPosition : winningPositions){\n                    if (gameState[winningPosition[0]] == gameState[winningPosition[1]] &amp;&amp; gameState[winningPosition[1]] == gameState[winningPosition[2]] &amp;&amp;\n                            gameState[winningPosition[0]] != 2)}\n</code></pre>\n<p>The code which is the i dont get is above. Please help me with understand that.</p>\n<pre><code>{ package com.example.anild.xox;\n    \n    import android.support.v7.app.AppCompatActivity;\n    import android.os.Bundle;\n    import android.view.View;\n    import android.widget.GridLayout;\n    import android.widget.ImageView;\n    import android.widget.LinearLayout;\n    import android.widget.TextView;\n    \n    public class MainActivity extends AppCompatActivity {\n        // 0 = yellow, 1 = red\n    \n        int activePlayer = 0;\n    \n        boolean gameIsActive = true;\n    \n        //2 means unplayed\n        int [] gameState = {2,2,2,2,2,2,2,2,2};\n    \n        int [][] winningPositions = {{0,1,2},{3,4,5},{6,7,8},{0,3,6},{1,4,7},{2,5,8},{0,4,8},{2,4,6}};\n    \n        public void dropIn(View view) {\n    \n            ImageView counter = (ImageView) view;\n    \n            int tappedCounter = Integer.parseInt(counter.getTag().toString());\n    \n            if(gameState[tappedCounter] == 2 &amp;&amp; gameIsActive) {\n    \n                //burada tappedCounterdaki sayıyı çekiyor yani tag'i daha sonra gamstate[] dizisine atıyor. Ve zaten hepsi 2 if koşulu sağlanıyor\n                //Bir asağısında bu kural değişiyor. Bu alınan tag gametate'te artık 0 olarak saklanıyor :)\n    \n                gameState[tappedCounter] = activePlayer;\n    \n                counter.setTranslationY(-1000f);\n    \n    \n                if (activePlayer == 0) {\n                    counter.setImageResource(R.drawable.yellow);\n                    activePlayer = 1;\n                } else {\n                    counter.setImageResource(R.drawable.red);\n                    activePlayer = 0;\n                }\n    \n                counter.animate().translationYBy(1000f).rotation(360).setDuration(300);\n    \n                for (int [] winningPosition : winningPositions){\n                    if (gameState[winningPosition[0]] == gameState[winningPosition[1]] &amp;&amp; gameState[winningPosition[1]] == gameState[winningPosition[2]] &amp;&amp;\n                            gameState[winningPosition[0]] != 2){\n    \n                        //someone has won\n    \n                        gameIsActive = false;\n                        String winner = &quot;Red&quot;;\n                        if(gameState[winningPosition[0]] == 0){\n                            winner = &quot;Yellow&quot;;\n    \n                        }\n    \n                        TextView winnerMessage = (TextView) findViewById(R.id.winnerMessage);\n    \n                        winnerMessage.setText(winner + &quot;has won !&quot;);\n    \n                        LinearLayout layout = (LinearLayout)findViewById(R.id.playAgainLayout);\n    \n    \n                        layout.setVisibility(View.VISIBLE);\n                    }\n                    else {\n                        boolean gameIsOver = true;\n                        for(int counterState : gameState) {\n                            if (counterState == 2) {\n                                gameIsOver = false;\n    \n                            }\n    \n                            if (gameIsOver) {\n                                TextView winnerMessage = (TextView) findViewById(R.id.winnerMessage);\n    \n                                winnerMessage.setText(&quot;it's a draw&quot;);\n    \n                                LinearLayout layout = (LinearLayout)findViewById(R.id.playAgainLayout);\n    \n    \n                                layout.setVisibility(View.VISIBLE);\n    \n                            }\n                        }\n                    }\n                }\n            }\n    \n    \n    \n        }\n    \n        public void playAgain(View view) {\n    \n            gameIsActive = true;\n    \n            LinearLayout layout = (LinearLayout)findViewById(R.id.playAgainLayout);\n            layout.setVisibility(View.INVISIBLE);\n    \n            // 0 = yellow, 1 = red\n    \n            activePlayer = 0;\n    \n    \n    \n            for(int i = 0; i &lt; gameState.length; i++) {\n    \n                gameState[i] = 2;\n            }\n    \n            GridLayout gridLayout = (GridLayout) findViewById(R.id.gridLayout);\n    \n            for(int i = 0; i &lt; gridLayout.getChildCount(); i++) {\n    \n                ((ImageView) gridLayout.getChildAt(i)).setImageResource(0);\n    \n            }\n        }\n    \n    \n    \n        @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.activity_main);\n    \n    \n    \n    \n        }\n    }\n\n }\n</code></pre>\n"},{"tags":["java","instrumentation","open-telemetry","jaeger","open-telemetry-collector"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1698674866,"post_id":77382053,"comment_id":136431633,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":5955942,"reputation":597,"user_id":4682632,"display_name":"Jonah Kowall"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699883470,"creation_date":1699883470,"answer_id":77474372,"question_id":77382053,"body_markdown":"So the issue you are referring to here is called context propagation. Since you are using autoinstrumentation you have to ensure that the Java application is supported by the instrumentation or you have to do this manually. Here is the supported frameworks https://github.com/open-telemetry/opentelemetry-java-instrumentation/blob/main/docs/supported-libraries.md \r\n\r\nAre your other services using a supported library? Are the other microservices instrumented with Otel in the same way? ","title":"Opentelemetry agent auto-instrumentation not connecting web server calls to microservice calls, although traces of both are captured independently","body":"<p>So the issue you are referring to here is called context propagation. Since you are using autoinstrumentation you have to ensure that the Java application is supported by the instrumentation or you have to do this manually. Here is the supported frameworks <a href=\"https://github.com/open-telemetry/opentelemetry-java-instrumentation/blob/main/docs/supported-libraries.md\" rel=\"nofollow noreferrer\">https://github.com/open-telemetry/opentelemetry-java-instrumentation/blob/main/docs/supported-libraries.md</a></p>\n<p>Are your other services using a supported library? Are the other microservices instrumented with Otel in the same way?</p>\n"}],"owner":{"account_id":19118954,"reputation":1,"user_id":13963290,"display_name":"Sahil Chawla"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699883470,"creation_date":1698555509,"question_id":77382053,"body_markdown":"I have a basic opentelemetry setup, consisting of: \r\n1) A deployment running a tomcat web server (with otel java agent attached on runtime)\r\n2) multiple deployments with different microservices (with otel java agent attached on all using java options)\r\n3) a jaeger collector, supported by ES storage, and finally a jaeger query to look at the traces.\r\n\r\nWhen I make calls directly on the microservices (which further call other microservices), I am able to see the expected output of traces &amp; spans (a long succession of calls, including mongo, ES etc., including calls to different microservices, and their instrumentation too). All of this comes under  a single trace, which is totally what I expected.\r\n\r\nNow I wanted to analyze my entire system, end-to-end, starting from the calls on the web server, ending on microservice calls.\r\n\r\nBut, what I am observing is that, the java agent on my web server just captures GET and POST calls (with the correct http target etc.), and doesn&#39;t connect the traces with the microservice calls.\r\nI can see the HTTP request trace on tomcat server (with a duration that matches the ENTIRE call, for ex. 7s or 8s), and the microservice call trace INDEPENDENTLY, on similar timestamps, but not collectively as a single trace (as expected, web-server -&gt; microservice -&gt; microservice etc.)\r\n\r\nThere is no sampling on and majorly all default parameters are used. (default sampling is used, also tried &quot;always_on&quot; instead of parent based &quot;always_on&quot;, but no difference)\r\n\r\nI wanted to understand how I can fix this, \r\n1) What may be the reason calls are not getting connected. \r\n2) I was unable to understand how exactly the otel java agent is propagating context, and exactly when does it inject its context information (I wanted to understand this, as I noticed some filters being applied on my tomcat server, and was wondering if this may be the reason context was being lost?)\r\n\r\nPlease help me with this, and let me know if any more information is required.\r\n","title":"Opentelemetry agent auto-instrumentation not connecting web server calls to microservice calls, although traces of both are captured independently","body":"<p>I have a basic opentelemetry setup, consisting of:</p>\n<ol>\n<li>A deployment running a tomcat web server (with otel java agent attached on runtime)</li>\n<li>multiple deployments with different microservices (with otel java agent attached on all using java options)</li>\n<li>a jaeger collector, supported by ES storage, and finally a jaeger query to look at the traces.</li>\n</ol>\n<p>When I make calls directly on the microservices (which further call other microservices), I am able to see the expected output of traces &amp; spans (a long succession of calls, including mongo, ES etc., including calls to different microservices, and their instrumentation too). All of this comes under  a single trace, which is totally what I expected.</p>\n<p>Now I wanted to analyze my entire system, end-to-end, starting from the calls on the web server, ending on microservice calls.</p>\n<p>But, what I am observing is that, the java agent on my web server just captures GET and POST calls (with the correct http target etc.), and doesn't connect the traces with the microservice calls.\nI can see the HTTP request trace on tomcat server (with a duration that matches the ENTIRE call, for ex. 7s or 8s), and the microservice call trace INDEPENDENTLY, on similar timestamps, but not collectively as a single trace (as expected, web-server -&gt; microservice -&gt; microservice etc.)</p>\n<p>There is no sampling on and majorly all default parameters are used. (default sampling is used, also tried &quot;always_on&quot; instead of parent based &quot;always_on&quot;, but no difference)</p>\n<p>I wanted to understand how I can fix this,</p>\n<ol>\n<li>What may be the reason calls are not getting connected.</li>\n<li>I was unable to understand how exactly the otel java agent is propagating context, and exactly when does it inject its context information (I wanted to understand this, as I noticed some filters being applied on my tomcat server, and was wondering if this may be the reason context was being lost?)</li>\n</ol>\n<p>Please help me with this, and let me know if any more information is required.</p>\n"},{"tags":["java","microsoft-graph-api"],"answers":[{"tags":[],"owner":{"account_id":2596604,"reputation":15928,"user_id":2250152,"accept_rate":72,"display_name":"user2250152"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699882679,"creation_date":1699882679,"answer_id":77474297,"question_id":77472917,"body_markdown":"`categories` property is a collection, so you need to use `any`\r\n\r\n    String filterCondition = &quot;categories/any(c:c eq &#39;Green&#39;)&quot;;\r\n\r\nIf some messages have two categories, let&#39;s say `Green` and `Red` and you want to get messages with both categories then `filterCondition` will be \r\n\r\n    String filterCondition = &quot;categories/any(c:c eq &#39;Green&#39;) and categories/any(c:c eq &#39;Red&#39;)&quot;;\r\n\r\nIf want to get messages with either `Green` or `Red`\r\n\r\n    String filterCondition = &quot;categories/any(c:c eq &#39;Green&#39;) or categories/any(c:c eq &#39;Red&#39;)&quot;;","title":"How to get the mails from outlook based on categorized","body":"<p><code>categories</code> property is a collection, so you need to use <code>any</code></p>\n<pre><code>String filterCondition = &quot;categories/any(c:c eq 'Green')&quot;;\n</code></pre>\n<p>If some messages have two categories, let's say <code>Green</code> and <code>Red</code> and you want to get messages with both categories then <code>filterCondition</code> will be</p>\n<pre><code>String filterCondition = &quot;categories/any(c:c eq 'Green') and categories/any(c:c eq 'Red')&quot;;\n</code></pre>\n<p>If want to get messages with either <code>Green</code> or <code>Red</code></p>\n<pre><code>String filterCondition = &quot;categories/any(c:c eq 'Green') or categories/any(c:c eq 'Red')&quot;;\n</code></pre>\n"}],"owner":{"account_id":27850022,"reputation":17,"user_id":21264707,"display_name":"Mani Bellamkonda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77474297,"answer_count":1,"score":1,"last_activity_date":1699882679,"creation_date":1699868195,"question_id":77472917,"body_markdown":"I need to get all mails from outlook using Graphapi,\r\nfor below code shows only unread mails will get,\r\n \r\nbut, here I need to get it category, like below [reference][1]\r\n        \r\n    String filterCondition = &quot;isRead eq false&quot;;\r\n    if (isArchiveFlow) {\r\n        filterCondition = isInfoMailBox ? &quot;&quot; :&quot;isRead eq true&quot;;\r\n    }\r\n            \r\n    return _appClient.users(o365Mailbox)\r\n            .mailFolders(&quot;inbox&quot;)\r\n            .messages()\r\n            .buildRequest()                \r\n            .select(&quot;from,isRead,receivedDateTime,sentDateTime,subject,body,bodyPreview,flag,toRecipients,ccRecipients,bccRecipients,sender,hasAttachments&quot;)\r\n            .filter(filterCondition)              \r\n            .top(1000)//Default is 10 and $top accepts a minimum value of 1 and a maximum value of 999 (inclusive).\r\n            .orderBy(&quot;receivedDateTime ASC&quot;)//ASC - For older emails and DESC - For new emails\r\n            .get();\r\n\r\ninstead of using `isRead` conditions I need to get mails based on category.\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/graph/api/resources/outlookcategory?view=graph-rest-1.0","title":"How to get the mails from outlook based on categorized","body":"<p>I need to get all mails from outlook using Graphapi,\nfor below code shows only unread mails will get,</p>\n<p>but, here I need to get it category, like below <a href=\"https://learn.microsoft.com/en-us/graph/api/resources/outlookcategory?view=graph-rest-1.0\" rel=\"nofollow noreferrer\">reference</a></p>\n<pre><code>String filterCondition = &quot;isRead eq false&quot;;\nif (isArchiveFlow) {\n    filterCondition = isInfoMailBox ? &quot;&quot; :&quot;isRead eq true&quot;;\n}\n        \nreturn _appClient.users(o365Mailbox)\n        .mailFolders(&quot;inbox&quot;)\n        .messages()\n        .buildRequest()                \n        .select(&quot;from,isRead,receivedDateTime,sentDateTime,subject,body,bodyPreview,flag,toRecipients,ccRecipients,bccRecipients,sender,hasAttachments&quot;)\n        .filter(filterCondition)              \n        .top(1000)//Default is 10 and $top accepts a minimum value of 1 and a maximum value of 999 (inclusive).\n        .orderBy(&quot;receivedDateTime ASC&quot;)//ASC - For older emails and DESC - For new emails\n        .get();\n</code></pre>\n<p>instead of using <code>isRead</code> conditions I need to get mails based on category.</p>\n"},{"tags":["java","spring-boot","spring-mvc","spring-data-jpa"],"comments":[{"owner":{"account_id":45934,"reputation":203639,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1699879467,"post_id":77473968,"comment_id":136582308,"body_markdown":"Where is your application class that is annotated with `@SpringBootApplication`? It should be in the package `com.example.demo1`. Note that if you put it in a package that is not higher in the hierarchy than the packages that contain the repository and the controller, Spring Boot will not find it automatically.","body":"Where is your application class that is annotated with <code>@SpringBootApplication</code>? It should be in the package <code>com.example.demo1</code>. Note that if you put it in a package that is not higher in the hierarchy than the packages that contain the repository and the controller, Spring Boot will not find it automatically."},{"owner":{"account_id":20258254,"reputation":3,"user_id":14857393,"display_name":"Andrew26"},"score":0,"creation_date":1699879641,"post_id":77473968,"comment_id":136582333,"body_markdown":"I added it now. I had it in that package.","body":"I added it now. I had it in that package."},{"owner":{"account_id":45934,"reputation":203639,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1699879732,"post_id":77473968,"comment_id":136582354,"body_markdown":"Why do you have this line: `@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})`? Remove it. Also, `@ComponentScan` and `@Configuration` are not necessary on your application class.","body":"Why do you have this line: <code>@EnableAutoConfiguration(exclude={DataSourceAutoConfiguratio&zwnj;&#8203;n.class})</code>? Remove it. Also, <code>@ComponentScan</code> and <code>@Configuration</code> are not necessary on your application class."},{"owner":{"account_id":20258254,"reputation":3,"user_id":14857393,"display_name":"Andrew26"},"score":0,"creation_date":1699879966,"post_id":77473968,"comment_id":136582398,"body_markdown":"I removed the @EnableAutoConfiguration and now I get these errors when I start the project:                                                                                                             \n    Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to resolve name [org.hibernate.dialect.MySQL5Dialect] as strategy [org.hibernate.dialect.Dialect]","body":"I removed the @EnableAutoConfiguration and now I get these errors when I start the project:                                                                                                                  Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to resolve name [org.hibernate.dialect.MySQL5Dialect] as strategy [org.hibernate.dialect.Dialect]"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1699880233,"post_id":77473968,"comment_id":136582451,"body_markdown":"Remove `@ EnableAutoConfiguration`, `@ComponentScan` and `@Configuration`. You disabled the database, JPA needs a database. The error you get about the dialect is because you are following some old tutorial or guide. Use `MySQLDialect` instead (which is for Hibernate6).","body":"Remove <code>@ EnableAutoConfiguration</code>, <code>@ComponentScan</code> and <code>@Configuration</code>. You disabled the database, JPA needs a database. The error you get about the dialect is because you are following some old tutorial or guide. Use <code>MySQLDialect</code> instead (which is for Hibernate6)."},{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1699881554,"post_id":77473968,"comment_id":136582731,"body_markdown":"https://stackoverflow.com/questions/77474190/how-to-debug-spring-boot-autoconfiguration/77474191 might be helpful in debugging this.","body":"<a href=\"https://stackoverflow.com/questions/77474190/how-to-debug-spring-boot-autoconfiguration/77474191\" title=\"how to debug spring boot autoconfiguration\">stackoverflow.com/questions/77474190/&hellip;</a> might be helpful in debugging this."}],"answers":[{"tags":[],"owner":{"account_id":15340842,"reputation":59,"user_id":11068082,"display_name":"sarthak sethi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699882342,"creation_date":1699882342,"answer_id":77474272,"question_id":77473968,"body_markdown":"@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\r\nremove this line it will work, it disables database","title":"JPA Repository is not visible in my project","body":"<p>@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\nremove this line it will work, it disables database</p>\n"}],"owner":{"account_id":20258254,"reputation":3,"user_id":14857393,"display_name":"Andrew26"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77474272,"answer_count":1,"score":0,"last_activity_date":1699882342,"creation_date":1699879299,"question_id":77473968,"body_markdown":"I am having trouble in starting my Spring Boot project, as I get an error that says the fact that I have not defined a bean of type Repository in my project, even though I had. This is my code:\r\n\r\nController:\r\n```\r\n\r\npackage com.example.demo1.controller;\r\n\r\nimport com.example.demo1.entities.Book;\r\nimport com.example.demo1.service.BookService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport java.util.List;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api&quot;)\r\npublic class BookController {\r\n    @Autowired\r\n    BookService bookService;\r\n\r\n    @GetMapping(value=&quot;/books/all&quot;)\r\n    public ResponseEntity&lt;List&lt;Book&gt;&gt; getAllBooks(){\r\n        return  ResponseEntity.ok(bookService.getAllBooks());\r\n    }\r\n\r\n}\r\n```\r\n\r\nService\r\n```\r\npackage com.example.demo1.service;\r\n\r\nimport com.example.demo1.entities.Book;\r\nimport com.example.demo1.repository.BookJPARepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.List;\r\n\r\n@Service\r\npublic class BookService {\r\n    @Autowired\r\n    BookJPARepository bookJPARepository;\r\n\r\n    public List&lt;Book&gt; getAllBooks(){\r\n        return bookJPARepository.findAll();\r\n    }\r\n}\r\n\r\n```\r\n\r\nRepository\r\n\r\n\r\n```\r\npackage com.example.demo1.repository;\r\n\r\nimport com.example.demo1.entities.Book;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface BookJPARepository extends JpaRepository&lt;Book, Long&gt; {\r\n}\r\n\r\n```\r\n\r\npom.xml\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.5&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo1&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;demo1&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;image&gt;\r\n\t\t\t\t\t\t&lt;builder&gt;paketobuildpacks/builder-jammy-base:latest&lt;/builder&gt;\r\n\t\t\t\t\t&lt;/image&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nEntity:\r\n\r\n        package com.example.demo1.entities;\r\n    \r\n    import jakarta.persistence.*;\r\n    import lombok.Data;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;books&quot;, schema = &quot;books&quot;)\r\n    @Data\r\n    public class Book {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        @Column(name = &quot;book_id&quot;, nullable = false)\r\n        private Long id;\r\n        @Basic\r\n        @Column(name = &quot;book_name&quot;, nullable = false, length = 255)\r\n        private String title;\r\n        @Basic\r\n        @Column(name = &quot;book_author&quot;, nullable = false, length = 255)\r\n        private String author;\r\n        @Basic\r\n        @Column(name = &quot;book_publishing_house&quot;, nullable = false, length = 255)\r\n        private String publishing_house;\r\n        @Basic\r\n        @Column(name = &quot;book_price&quot;)\r\n        private float price;\r\n    \r\n        public Book(String book_name, String book_author, String book_price, String book_publishing_house) {\r\n        this.title=book_name;\r\n        this.author=book_author;\r\n        this.price=Float.parseFloat(book_price);\r\n        this.publishing_house=book_publishing_house;\r\n        }\r\n    }\r\n\r\nApplication is this one:\r\n\r\n        package com.example.demo1;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    @SpringBootApplication\r\n    @EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\r\n    @ComponentScan\r\n    @Configuration\r\n    public class Demo1Application {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(Demo1Application.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\nThe error is this one:\r\n\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nField bookJPARepository in com.example.demo1.service.BookService required a bean of type &#39;com.example.demo1.repository.BookJPARepository&#39; that could not be found.\r\n\r\nThe injection point has the following annotations:\r\n\t- @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;com.example.demo1.repository.BookJPARepository&#39; in your configuration.\r\n\r\n\r\n**Have I missed something? Could you help me please?**\r\n\r\n\r\n\r\n\r\nI expected that my app should start. Have I missed any dependency when creating the project with Spring initialzr?","title":"JPA Repository is not visible in my project","body":"<p>I am having trouble in starting my Spring Boot project, as I get an error that says the fact that I have not defined a bean of type Repository in my project, even though I had. This is my code:</p>\n<p>Controller:</p>\n<pre><code>\npackage com.example.demo1.controller;\n\nimport com.example.demo1.entities.Book;\nimport com.example.demo1.service.BookService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(&quot;/api&quot;)\npublic class BookController {\n    @Autowired\n    BookService bookService;\n\n    @GetMapping(value=&quot;/books/all&quot;)\n    public ResponseEntity&lt;List&lt;Book&gt;&gt; getAllBooks(){\n        return  ResponseEntity.ok(bookService.getAllBooks());\n    }\n\n}\n</code></pre>\n<p>Service</p>\n<pre><code>package com.example.demo1.service;\n\nimport com.example.demo1.entities.Book;\nimport com.example.demo1.repository.BookJPARepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\n\n@Service\npublic class BookService {\n    @Autowired\n    BookJPARepository bookJPARepository;\n\n    public List&lt;Book&gt; getAllBooks(){\n        return bookJPARepository.findAll();\n    }\n}\n\n</code></pre>\n<p>Repository</p>\n<pre><code>package com.example.demo1.repository;\n\nimport com.example.demo1.entities.Book;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface BookJPARepository extends JpaRepository&lt;Book, Long&gt; {\n}\n\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.5&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo1&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo1&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;image&gt;\n                        &lt;builder&gt;paketobuildpacks/builder-jammy-base:latest&lt;/builder&gt;\n                    &lt;/image&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>Entity:</p>\n<pre><code>    package com.example.demo1.entities;\n\nimport jakarta.persistence.*;\nimport lombok.Data;\n\n@Entity\n@Table(name = &quot;books&quot;, schema = &quot;books&quot;)\n@Data\npublic class Book {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;book_id&quot;, nullable = false)\n    private Long id;\n    @Basic\n    @Column(name = &quot;book_name&quot;, nullable = false, length = 255)\n    private String title;\n    @Basic\n    @Column(name = &quot;book_author&quot;, nullable = false, length = 255)\n    private String author;\n    @Basic\n    @Column(name = &quot;book_publishing_house&quot;, nullable = false, length = 255)\n    private String publishing_house;\n    @Basic\n    @Column(name = &quot;book_price&quot;)\n    private float price;\n\n    public Book(String book_name, String book_author, String book_price, String book_publishing_house) {\n    this.title=book_name;\n    this.author=book_author;\n    this.price=Float.parseFloat(book_price);\n    this.publishing_house=book_publishing_house;\n    }\n}\n</code></pre>\n<p>Application is this one:</p>\n<pre><code>    package com.example.demo1;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\n\n@SpringBootApplication\n@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\n@ComponentScan\n@Configuration\npublic class Demo1Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Demo1Application.class, args);\n    }\n\n}\n</code></pre>\n<p>The error is this one:</p>\n<hr />\n<p>APPLICATION FAILED TO START</p>\n<hr />\n<p>Description:</p>\n<p>Field bookJPARepository in com.example.demo1.service.BookService required a bean of type 'com.example.demo1.repository.BookJPARepository' that could not be found.</p>\n<p>The injection point has the following annotations:\n- @org.springframework.beans.factory.annotation.Autowired(required=true)</p>\n<p>Action:</p>\n<p>Consider defining a bean of type 'com.example.demo1.repository.BookJPARepository' in your configuration.</p>\n<p><strong>Have I missed something? Could you help me please?</strong></p>\n<p>I expected that my app should start. Have I missed any dependency when creating the project with Spring initialzr?</p>\n"},{"tags":["java","swagger"],"owner":{"account_id":6716155,"reputation":127,"user_id":5177929,"accept_rate":83,"display_name":"Zolt&#225;n Raffai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699882303,"creation_date":1699875082,"question_id":77473570,"body_markdown":"I have this object as a request body in my code:\r\n\r\n    @Builder\r\n    @Value\r\n    @NoArgsConstructor(force = true, access = AccessLevel.PRIVATE)\r\n    @AllArgsConstructor\r\n    @Serdeable\r\n    @Introspected\r\n    public class ForecastingRequest {\r\n        @NotNull\r\n        Map&lt;Targeting, List&lt;Condition&gt;&gt; targetings;\r\n        Map&lt;TargetingProperties, String&gt; properties;\r\n        @NotNull\r\n        Explode explode;\r\n        @NotNull\r\n        Double budget;\r\n    }\r\n\r\nbut swagger only generates this for the maps, the key is totally missing:\r\n\r\n       targetings:\r\n          additionalProperties:\r\n            type: array\r\n            items:\r\n              $ref: &#39;#/components/schemas/Condition&#39;\r\n        properties:\r\n          additionalProperties:\r\n            type: string\r\n    \r\nHow can I generate the proper maps with enum keys?","title":"Java swagger codegen with enum keys in map","body":"<p>I have this object as a request body in my code:</p>\n<pre><code>@Builder\n@Value\n@NoArgsConstructor(force = true, access = AccessLevel.PRIVATE)\n@AllArgsConstructor\n@Serdeable\n@Introspected\npublic class ForecastingRequest {\n    @NotNull\n    Map&lt;Targeting, List&lt;Condition&gt;&gt; targetings;\n    Map&lt;TargetingProperties, String&gt; properties;\n    @NotNull\n    Explode explode;\n    @NotNull\n    Double budget;\n}\n</code></pre>\n<p>but swagger only generates this for the maps, the key is totally missing:</p>\n<pre><code>   targetings:\n      additionalProperties:\n        type: array\n        items:\n          $ref: '#/components/schemas/Condition'\n    properties:\n      additionalProperties:\n        type: string\n</code></pre>\n<p>How can I generate the proper maps with enum keys?</p>\n"},{"tags":["java","spring-boot","jaeger","opentracing","jaeger-client-go"],"answers":[{"tags":[],"owner":{"account_id":5955942,"reputation":597,"user_id":4682632,"display_name":"Jonah Kowall"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699882226,"creation_date":1699882226,"answer_id":77474259,"question_id":77384061,"body_markdown":"Opentracing is deprecated. To instrument using OpenTelemetry follow this tutorial: https://opentelemetry.io/docs/instrumentation/java/getting-started/ this will automatically instrument the Spring Boot application. If you have questions, we can help on the Slack community for the CNCF in both #opentelemetry and #jaeger channels! ","title":"How to enable opentracing on TCP ports","body":"<p>Opentracing is deprecated. To instrument using OpenTelemetry follow this tutorial: <a href=\"https://opentelemetry.io/docs/instrumentation/java/getting-started/\" rel=\"nofollow noreferrer\">https://opentelemetry.io/docs/instrumentation/java/getting-started/</a> this will automatically instrument the Spring Boot application. If you have questions, we can help on the Slack community for the CNCF in both #opentelemetry and #jaeger channels!</p>\n"}],"owner":{"account_id":15217003,"reputation":117,"user_id":10980085,"display_name":"Rest"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1699882226,"creation_date":1698594751,"question_id":77384061,"body_markdown":"So, I am trying to trace logs of my spring boot application with jaeger so below are the steps that i did my application and jaeger configuration. My issue is its works fine when I&#39;m enabling UDP on Jaeger,but i need is enable TCP on here.\r\n\r\nIt&#39;s Working fine as per below below UDP configuration,\r\n***Jager docker service***\r\n\r\n    docker run -d -e COLLECTOR_ZIPKIN_HTTP_PORT=9411 -p 5775:5775/udp -p 6831:6831/udp -p 6832:6832/udp -p 5778:5778 -p 16686:16686 -p 14268:14268 -p 9411:9411 jaegertracing/all-in-one:latest \r\n\r\n***YML as per below***\r\n\r\n    spring:\r\n      application:\r\n        name: service-v11\r\n    opentracing:\r\n      jaeger:\r\n        service-name: service-v11\r\n        enable: true\r\n        udp-sender:\r\n          host:  172.15.15.15\r\n      sampler:\r\n        type: const\r\n        param: 1\r\n    server:\r\n      port: 8090\r\n\r\nBut when i use  below configuration jaeger service its up adn running but  not hit the tracing request ,\r\n\r\n    version: &quot;3.9&quot;\r\n    services:\r\n      jaeger:\r\n        image: jaegertracing/all-in-one:latest\r\n        ports:\r\n          - 4318:4318\r\n          - 16686:16686\r\n        environment:\r\n          - COLLECTOR_OTLP_ENABLED=true\r\n\r\n","title":"How to enable opentracing on TCP ports","body":"<p>So, I am trying to trace logs of my spring boot application with jaeger so below are the steps that i did my application and jaeger configuration. My issue is its works fine when I'm enabling UDP on Jaeger,but i need is enable TCP on here.</p>\n<p>It's Working fine as per below below UDP configuration,\n<em><strong>Jager docker service</strong></em></p>\n<pre><code>docker run -d -e COLLECTOR_ZIPKIN_HTTP_PORT=9411 -p 5775:5775/udp -p 6831:6831/udp -p 6832:6832/udp -p 5778:5778 -p 16686:16686 -p 14268:14268 -p 9411:9411 jaegertracing/all-in-one:latest \n</code></pre>\n<p><em><strong>YML as per below</strong></em></p>\n<pre><code>spring:\n  application:\n    name: service-v11\nopentracing:\n  jaeger:\n    service-name: service-v11\n    enable: true\n    udp-sender:\n      host:  172.15.15.15\n  sampler:\n    type: const\n    param: 1\nserver:\n  port: 8090\n</code></pre>\n<p>But when i use  below configuration jaeger service its up adn running but  not hit the tracing request ,</p>\n<pre><code>version: &quot;3.9&quot;\nservices:\n  jaeger:\n    image: jaegertracing/all-in-one:latest\n    ports:\n      - 4318:4318\n      - 16686:16686\n    environment:\n      - COLLECTOR_OTLP_ENABLED=true\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9795,"page":62,"page_size":100}
