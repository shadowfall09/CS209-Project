{"items":[{"tags":["java","list","collections","arraylist"],"answers":[{"comments":[{"owner":{"account_id":25918,"reputation":412,"user_id":67035,"display_name":"Evan"},"score":10,"creation_date":1360025105,"post_id":4228990,"comment_id":20554776,"body_markdown":"This is the Java, object oriented solution.  Perhaps, how it should be done... :)","body":"This is the Java, object oriented solution.  Perhaps, how it should be done... :)"},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":1,"creation_date":1697608423,"post_id":4228990,"comment_id":136299530,"body_markdown":"In recent Java versions, use a record: `public record Data(String txtFileName, String imgFileName) { }`. This will provide a constructor, accessors, equals, hashCode, and toString implementations.","body":"In recent Java versions, use a record: <code>public record Data(String txtFileName, String imgFileName) { }</code>. This will provide a constructor, accessors, equals, hashCode, and toString implementations."},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1697621117,"post_id":4228990,"comment_id":136301720,"body_markdown":"Yes indeed. They&#39;re available since Java 14 (Mar 2020) as preview feature and since Java 17 (Sep 2021) as standard feature. I updated the answer to catch up the current state of technology.","body":"Yes indeed. They&#39;re available since Java 14 (Mar 2020) as preview feature and since Java 17 (Sep 2021) as standard feature. I updated the answer to catch up the current state of technology."}],"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":3,"down_vote_count":1,"up_vote_count":124,"is_accepted":false,"score":123,"last_activity_date":1697621221,"creation_date":1290197600,"answer_id":4228990,"question_id":4228975,"body_markdown":"Wrap them in a [record][1] so that you can simply end up with a single array or `List` of those objects.\r\n\r\n```java\r\npublic record Data (\r\n    String txtFileName,\r\n    String imgFileName\r\n) {}\r\n```\r\n\r\nUsage example:\r\n\r\n```java\r\nList&lt;Data&gt; list = new ArrayList&lt;Data&gt;();\r\nlist.add(new Data(&quot;H1.txt&quot;, &quot;e1.jpg&quot;));\r\nlist.add(new Data(&quot;H2.txt&quot;, &quot;e2.jpg&quot;));\r\n// ...\r\n\r\nCollections.shuffle(list);\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/language/records.html","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>Wrap them in a <a href=\"https://docs.oracle.com/en/java/javase/17/language/records.html\" rel=\"nofollow noreferrer\">record</a> so that you can simply end up with a single array or <code>List</code> of those objects.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record Data (\n    String txtFileName,\n    String imgFileName\n) {}\n</code></pre>\n<p>Usage example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Data&gt; list = new ArrayList&lt;Data&gt;();\nlist.add(new Data(&quot;H1.txt&quot;, &quot;e1.jpg&quot;));\nlist.add(new Data(&quot;H2.txt&quot;, &quot;e2.jpg&quot;));\n// ...\n\nCollections.shuffle(list);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":0,"down_vote_count":2,"up_vote_count":24,"is_accepted":false,"score":22,"last_activity_date":1290197607,"creation_date":1290197607,"answer_id":4228993,"question_id":4228975,"body_markdown":"The simplest approach is to encapsulate the two values together into a type which has both the image and the file. Then build an `ArrayList` of *that* and shuffle it.\r\n\r\nThat improves encapsulation as well, giving you the property that you&#39;ll always have the same number of files as images automatically.\r\n\r\nAn alternative if you *really* don&#39;t like that idea would be to write the shuffle code yourself (there are plenty of examples of a modified [Fisher-Yates shuffle][1] in Java, including several on Stack Overflow I suspect) and just operate on both lists at the same time. But I&#39;d strongly recommend going with the &quot;improve encapsulation&quot; approach.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>The simplest approach is to encapsulate the two values together into a type which has both the image and the file. Then build an <code>ArrayList</code> of <em>that</em> and shuffle it.</p>\n\n<p>That improves encapsulation as well, giving you the property that you'll always have the same number of files as images automatically.</p>\n\n<p>An alternative if you <em>really</em> don't like that idea would be to write the shuffle code yourself (there are plenty of examples of a modified <a href=\"http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\" rel=\"noreferrer\">Fisher-Yates shuffle</a> in Java, including several on Stack Overflow I suspect) and just operate on both lists at the same time. But I'd strongly recommend going with the \"improve encapsulation\" approach.</p>\n"},{"tags":[],"owner":{"account_id":139856,"reputation":77162,"user_id":345717,"accept_rate":81,"display_name":"EboMike"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1290197645,"creation_date":1290197645,"answer_id":4228998,"question_id":4228975,"body_markdown":"Instead of having two arrays of Strings, have one array of a custom class which contains your two strings.","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>Instead of having two arrays of Strings, have one array of a custom class which contains your two strings.</p>\n"},{"tags":[],"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1290197647,"creation_date":1290197647,"answer_id":4228999,"question_id":4228975,"body_markdown":"You could do this with maps:\r\n\r\n    Map&lt;String, String&gt; fileToImg:\r\n    List&lt;String&gt; fileList = new ArrayList(fileToImg.keySet());\r\n    Collections.shuffle(fileList);\r\n    for(String item: fileList) {\r\n        fileToImf.get(item);\r\n    }\r\n\r\nThis will iterate through the images in the random order.","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>You could do this with maps:</p>\n\n<pre><code>Map&lt;String, String&gt; fileToImg:\nList&lt;String&gt; fileList = new ArrayList(fileToImg.keySet());\nCollections.shuffle(fileList);\nfor(String item: fileList) {\n    fileToImf.get(item);\n}\n</code></pre>\n\n<p>This will iterate through the images in the random order.</p>\n"},{"tags":[],"owner":{"account_id":24377,"reputation":818073,"user_id":61974,"display_name":"Mark Byers"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1290197653,"creation_date":1290197653,"answer_id":4229000,"question_id":4228975,"body_markdown":"You can create an array containing the numbers 0 to 5 and shuffle those. Then use the result as a mapping of &quot;oldIndex -&gt; newIndex&quot; and apply this mapping to both your original arrays.","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>You can create an array containing the numbers 0 to 5 and shuffle those. Then use the result as a mapping of \"oldIndex -> newIndex\" and apply this mapping to both your original arrays.</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"comment_count":0,"down_vote_count":2,"up_vote_count":601,"is_accepted":true,"score":599,"last_activity_date":1478290080,"creation_date":1290197655,"answer_id":4229001,"question_id":4228975,"body_markdown":"Use [`Collections.shuffle()`][1] twice, with two `Random` objects initialized with the same seed:\r\n\r\n    long seed = System.nanoTime();\r\n    Collections.shuffle(fileList, new Random(seed));\r\n    Collections.shuffle(imgList, new Random(seed));\r\n\r\nUsing two `Random` objects with the same seed ensures that both lists will be shuffled in exactly the same way.  This allows for two separate collections.\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle(java.util.List,%20java.util.Random)","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>Use <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle(java.util.List,%20java.util.Random)\" rel=\"noreferrer\"><code>Collections.shuffle()</code></a> twice, with two <code>Random</code> objects initialized with the same seed:</p>\n\n<pre><code>long seed = System.nanoTime();\nCollections.shuffle(fileList, new Random(seed));\nCollections.shuffle(imgList, new Random(seed));\n</code></pre>\n\n<p>Using two <code>Random</code> objects with the same seed ensures that both lists will be shuffled in exactly the same way.  This allows for two separate collections.</p>\n"},{"tags":[],"owner":{"account_id":48454,"reputation":12964,"user_id":143969,"accept_rate":91,"display_name":"aperkins"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1290197715,"creation_date":1290197715,"answer_id":4229005,"question_id":4228975,"body_markdown":"Not totally sure what you mean by &quot;automatically&quot; - you can create a container object that holds both objects:\r\n\r\npublic class FileImageHolder {\r\n    String fileName;\r\n    String imageName;\r\n    //TODO: insert stuff here\r\n}\r\n\r\nAnd then put that in an array list and randomize that array list.\r\n\r\nOtherwise, you would need to keep track of where each element moved in one list, and move it in the other one as well.","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>Not totally sure what you mean by \"automatically\" - you can create a container object that holds both objects:</p>\n\n<p>public class FileImageHolder {\n    String fileName;\n    String imageName;\n    //TODO: insert stuff here\n}</p>\n\n<p>And then put that in an array list and randomize that array list.</p>\n\n<p>Otherwise, you would need to keep track of where each element moved in one list, and move it in the other one as well.</p>\n"},{"tags":[],"owner":{"account_id":241682,"reputation":18477,"user_id":512652,"accept_rate":84,"display_name":"ajwood"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1290198267,"creation_date":1290198267,"answer_id":4229074,"question_id":4228975,"body_markdown":"Unless there&#39;s a way to retrieve the old index of the elements after they&#39;ve been shuffled, I&#39;d do it one of two ways:\r\n\r\n\r\nA)\r\n   Make another list multi_shuffler = [0, 1, 2, ... , file.size()] and shuffle it. Loop over it to get the order for your shuffled file/image lists.\r\n\r\nArrayList&lt;String&gt; newFileList = new ArrayList&lt;String&gt;();\r\nArrayList&lt;String&gt; newImgList = new ArrayList&lt;String&gt;();\r\nfor ( i=0; i&lt;file.length; i++ ){\r\n   newFileList.add( fileList.get( multi_shuffler[i] ) );\r\n   newImageList.add( imgList.get( multi_shuffler[i] ) );\r\n}\r\n\r\n\r\nor B)\r\n   Make a StringWrapper class to hold the file/image names and combine the two lists you&#39;ve already got into one: ArrayList&lt;StringWrapper&gt; combinedList;","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>Unless there's a way to retrieve the old index of the elements after they've been shuffled, I'd do it one of two ways:</p>\n\n<p>A)\n   Make another list multi_shuffler = [0, 1, 2, ... , file.size()] and shuffle it. Loop over it to get the order for your shuffled file/image lists.</p>\n\n<p>ArrayList newFileList = new ArrayList();\nArrayList newImgList = new ArrayList();\nfor ( i=0; i\n\n<p>or B)\n   Make a StringWrapper class to hold the file/image names and combine the two lists you've already got into one: ArrayList combinedList;</p>\n"},{"tags":[],"owner":{"account_id":4394923,"reputation":550,"user_id":3582295,"display_name":"Rohit Goyal"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1400864359,"creation_date":1400864359,"answer_id":23834751,"question_id":4228975,"body_markdown":"This can be done using the shuffle method: \r\n\r\n\r\n\r\n\r\n\r\n    private List&lt;Integer&gt; getJumbledList() {\r\n         List&lt;Integer&gt; myArrayList2 = new ArrayList&lt;Integer&gt;();\r\n        \tmyArrayList2.add(8);\r\n        \tmyArrayList2.add(4);\r\n        \tmyArrayList2.add(9);\r\n        \tCollections.shuffle(myArrayList2);\r\n        \treturn myArrayList2;","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>This can be done using the shuffle method: </p>\n\n<pre><code>private List&lt;Integer&gt; getJumbledList() {\n     List&lt;Integer&gt; myArrayList2 = new ArrayList&lt;Integer&gt;();\n        myArrayList2.add(8);\n        myArrayList2.add(4);\n        myArrayList2.add(9);\n        Collections.shuffle(myArrayList2);\n        return myArrayList2;\n</code></pre>\n"}],"owner":{"account_id":29808,"reputation":15451,"user_id":80796,"accept_rate":77,"display_name":"Jessy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":203175,"favorite_count":0,"down_vote_count":0,"up_vote_count":268,"accepted_answer_id":4229001,"answer_count":9,"score":268,"last_activity_date":1697621221,"creation_date":1290197452,"question_id":4228975,"body_markdown":"I have two arraylist `filelist` and `imgList` which related to each other, e.g. &quot;H1.txt&quot; related to &quot;e1.jpg&quot;. How to automatically randomized the list of `imgList` according to the randomization of `fileList`? Like in excel, if we sort certain column, the other column will automatically follow?\r\n\r\n    String [] file = {&quot;H1.txt&quot;,&quot;H2.txt&quot;,&quot;H3.txt&quot;,&quot;M4.txt&quot;,&quot;M5.txt&quot;,&quot;M6.txt&quot;};\r\n    ArrayList&lt;String&gt; fileList = new ArrayList&lt;String&gt;(Arrays.asList(file));\r\n    \r\n    String [] img = {&quot;e1.jpg&quot;,&quot;e2.jpg&quot;,&quot;e3.jpg&quot;,&quot;e4.jpg&quot;,&quot;e5.jpg&quot;,&quot;e6.jpg&quot;};\r\n    ArrayList&lt;String&gt; imgList = new ArrayList&lt;String&gt;(Arrays.asList(img));\r\n    \r\n    //randomized files\r\n    Collections.shuffle(fileList);\r\n\r\noutput after randomization e.g.:\r\n\r\n    fileList = {&quot;M4.txt&quot;,&quot;M6.txt&quot;,&quot;H3.txt&quot;,&quot;M5.txt&quot;,&quot;H2.txt&quot;,&quot;H1.txt&quot;};\r\n\r\nintended output:\r\n\r\n     imgList = {&quot;e4.jpg&quot;,&quot;e6.jpg&quot;,&quot;e3.jpg&quot;,&quot;e5.jpg&quot;,&quot;e2.jpg&quot;,&quot;e1.jpg&quot;};","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>I have two arraylist <code>filelist</code> and <code>imgList</code> which related to each other, e.g. \"H1.txt\" related to \"e1.jpg\". How to automatically randomized the list of <code>imgList</code> according to the randomization of <code>fileList</code>? Like in excel, if we sort certain column, the other column will automatically follow?</p>\n\n<pre><code>String [] file = {\"H1.txt\",\"H2.txt\",\"H3.txt\",\"M4.txt\",\"M5.txt\",\"M6.txt\"};\nArrayList&lt;String&gt; fileList = new ArrayList&lt;String&gt;(Arrays.asList(file));\n\nString [] img = {\"e1.jpg\",\"e2.jpg\",\"e3.jpg\",\"e4.jpg\",\"e5.jpg\",\"e6.jpg\"};\nArrayList&lt;String&gt; imgList = new ArrayList&lt;String&gt;(Arrays.asList(img));\n\n//randomized files\nCollections.shuffle(fileList);\n</code></pre>\n\n<p>output after randomization e.g.:</p>\n\n<pre><code>fileList = {\"M4.txt\",\"M6.txt\",\"H3.txt\",\"M5.txt\",\"H2.txt\",\"H1.txt\"};\n</code></pre>\n\n<p>intended output:</p>\n\n<pre><code> imgList = {\"e4.jpg\",\"e6.jpg\",\"e3.jpg\",\"e5.jpg\",\"e2.jpg\",\"e1.jpg\"};\n</code></pre>\n"},{"tags":["java","hibernate","jpa"],"owner":{"account_id":3642347,"reputation":15,"user_id":3036172,"display_name":"F_V"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697621050,"creation_date":1697620052,"question_id":77314947,"body_markdown":"We have three entities involved in this problem. For simplicity, let&#39;s name them A, B, C. Each of them has its own identifier as the primary key.\r\n\r\n[![ER diagram](https://i.stack.imgur.com/0yPJk.png)](https://i.stack.imgur.com/0yPJk.png)\r\n\r\nThe 3-ary relationship adds some other fields we are skipping for simplicity. It has the following constraints:\r\n- A previous relation between A and C must exist\r\n- A previous relation between A and B must exist\r\n- The entity A (its id) must be the same\r\n\r\nIn terms of database schema:\r\n\r\n```\r\ncreate table a_b_c\r\n(\r\n    a_id   int,\r\n    b_id   int,\r\n    c_id   int,\r\n    primary key (a_id, r_id, c_id),\r\n    constraint fk_a_c foreign key (a_id, c_id) references c (a_id, id) on delete cascade,\r\n    constraint fk_a_b foreign key (a_id, b_id) references a_b (a_id, b_id) on delete cascade\r\n)\r\n```\r\n\r\n\r\nI&#39;ve tried the following classes:\r\n\r\n\r\n```\r\npublic class A {\r\n\r\n   @Id\r\n   @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n   private Integer id;\r\n\r\n   @ManyToMany\r\n   @JoinTable(name = &quot;a_b&quot;,\r\n              inverseJoinColumns = @JoinColumn(name = &quot;b_id&quot;))\r\n   private List&lt;B&gt; bs;\r\n\r\n   @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, mappedBy = &quot;a&quot;, orphanRemoval = true) \r\n   private List&lt;C&gt; cs;\r\n\r\n}\r\n\r\npublic class B {\r\n\r\n   @Id\r\n   @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n   private Integer id;\r\n\r\n   //I don&#39;t need to access A from B objects\r\n\r\n}\r\n\r\npublic class C {\r\n\r\n   @Id\r\n   @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n   private Integer id;\r\n\r\n   @ManyToOne\r\n   private A a;\r\n\r\n   @OneToMany(fetch = FetchType.EAGER, mappedBy = &quot;c&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n   private List&lt;ABC&gt; abcs;\r\n\r\n}\r\n\r\n@Embeddable\r\npublic class ABCId {\r\n\r\n    @Column(name = &quot;a_id&quot;)\r\n    private Integer aId;\r\n\r\n    @Column(name = &quot;b_id&quot;)\r\n    private Integer bId;\r\n\r\n    @Column(name = &quot;c_id&quot;)\r\n    private Integer cId;\r\n}\r\n\r\npublic class ABC {\r\n\r\n    @EmbeddedId\r\n    protected ABCId id = new ABCId();\r\n\r\n    @MapsId(&quot;aId&quot;)\r\n    @ManyToOne\r\n    private A a;\r\n\r\n    @MapsId(&quot;bId&quot;)\r\n    @ManyToOne\r\n    private B b;\r\n\r\n    @MapsId(&quot;cId&quot;)\r\n    @ManyToOne\r\n    private C c;\r\n\r\n}\r\n```\r\n\r\nWhen the application tries to create a new instance of type A, when creating ABC on cascade, it fails because of the constraints in the database schema (shown above): the entries relating to A and C, and A and B do not exist in the database yet. It also fails when trying to update or delete.\r\n\r\nI think JPA does not know anything about the constraints existing in the database, so I must be missing how to describe those constraints in the classes.\r\n\r\nMy solution right now is to create the needed entries by using specific repositories instead of relying entirely on the A class.\r\n\r\nSo my questions are:\r\n- Does the design of the classes reflect the constraints in the database schema?\r\n- If not, how can I describe such constraints using JPA?\r\n\r\nThank you in advance.\r\n","title":"3-ary relationship with composite foreign keys using JPA","body":"<p>We have three entities involved in this problem. For simplicity, let's name them A, B, C. Each of them has its own identifier as the primary key.</p>\n<p><a href=\"https://i.stack.imgur.com/0yPJk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0yPJk.png\" alt=\"ER diagram\" /></a></p>\n<p>The 3-ary relationship adds some other fields we are skipping for simplicity. It has the following constraints:</p>\n<ul>\n<li>A previous relation between A and C must exist</li>\n<li>A previous relation between A and B must exist</li>\n<li>The entity A (its id) must be the same</li>\n</ul>\n<p>In terms of database schema:</p>\n<pre><code>create table a_b_c\n(\n    a_id   int,\n    b_id   int,\n    c_id   int,\n    primary key (a_id, r_id, c_id),\n    constraint fk_a_c foreign key (a_id, c_id) references c (a_id, id) on delete cascade,\n    constraint fk_a_b foreign key (a_id, b_id) references a_b (a_id, b_id) on delete cascade\n)\n</code></pre>\n<p>I've tried the following classes:</p>\n<pre><code>public class A {\n\n   @Id\n   @GeneratedValue(strategy = GenerationType.IDENTITY)\n   private Integer id;\n\n   @ManyToMany\n   @JoinTable(name = &quot;a_b&quot;,\n              inverseJoinColumns = @JoinColumn(name = &quot;b_id&quot;))\n   private List&lt;B&gt; bs;\n\n   @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, mappedBy = &quot;a&quot;, orphanRemoval = true) \n   private List&lt;C&gt; cs;\n\n}\n\npublic class B {\n\n   @Id\n   @GeneratedValue(strategy = GenerationType.IDENTITY)\n   private Integer id;\n\n   //I don't need to access A from B objects\n\n}\n\npublic class C {\n\n   @Id\n   @GeneratedValue(strategy = GenerationType.IDENTITY)\n   private Integer id;\n\n   @ManyToOne\n   private A a;\n\n   @OneToMany(fetch = FetchType.EAGER, mappedBy = &quot;c&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n   private List&lt;ABC&gt; abcs;\n\n}\n\n@Embeddable\npublic class ABCId {\n\n    @Column(name = &quot;a_id&quot;)\n    private Integer aId;\n\n    @Column(name = &quot;b_id&quot;)\n    private Integer bId;\n\n    @Column(name = &quot;c_id&quot;)\n    private Integer cId;\n}\n\npublic class ABC {\n\n    @EmbeddedId\n    protected ABCId id = new ABCId();\n\n    @MapsId(&quot;aId&quot;)\n    @ManyToOne\n    private A a;\n\n    @MapsId(&quot;bId&quot;)\n    @ManyToOne\n    private B b;\n\n    @MapsId(&quot;cId&quot;)\n    @ManyToOne\n    private C c;\n\n}\n</code></pre>\n<p>When the application tries to create a new instance of type A, when creating ABC on cascade, it fails because of the constraints in the database schema (shown above): the entries relating to A and C, and A and B do not exist in the database yet. It also fails when trying to update or delete.</p>\n<p>I think JPA does not know anything about the constraints existing in the database, so I must be missing how to describe those constraints in the classes.</p>\n<p>My solution right now is to create the needed entries by using specific repositories instead of relying entirely on the A class.</p>\n<p>So my questions are:</p>\n<ul>\n<li>Does the design of the classes reflect the constraints in the database schema?</li>\n<li>If not, how can I describe such constraints using JPA?</li>\n</ul>\n<p>Thank you in advance.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":6,"creation_date":1568368254,"post_id":57921251,"comment_id":102260259,"body_markdown":"ok .. and why do you think it should? why do you believe that if something doesn&#39;t work the way you would &#39;ve figured it to, it is wrong or bad?","body":"ok .. and why do you think it should? why do you believe that if something doesn&#39;t work the way you would &#39;ve figured it to, it is wrong or bad?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":3,"creation_date":1568368429,"post_id":57921251,"comment_id":102260360,"body_markdown":"Well `List.of(...)` is a standard JDK class while `ImmutableList` is part of a 3rd party lib like Guava. Why should `List.of(...)` return such a list?","body":"Well <code>List.of(...)</code> is a standard JDK class while <code>ImmutableList</code> is part of a 3rd party lib like Guava. Why should <code>List.of(...)</code> return such a list?"},{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":6,"creation_date":1568368830,"post_id":57921251,"comment_id":102260566,"body_markdown":"Immutable collections that extend List all break the Liskov substitution principle - their declared return type does not change that, it is broken to begin with and there is no real way to fix it (without changing what a `List` actually is)","body":"Immutable collections that extend List all break the Liskov substitution principle - their declared return type does not change that, it is broken to begin with and there is no real way to fix it (without changing what a <code>List</code> actually is)"},{"owner":{"account_id":446208,"reputation":8611,"user_id":839128,"accept_rate":75,"display_name":"MikeFHay"},"score":5,"creation_date":1568368898,"post_id":57921251,"comment_id":102260587,"body_markdown":"&quot;(albeit with a lot of code)&quot;\n\nGood news, you don&#39;t need all that code, `ImmutableList.copyOf(list)` or `ImmutableList.of(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;)` do the same.","body":"&quot;(albeit with a lot of code)&quot;  Good news, you don&#39;t need all that code, <code>ImmutableList.copyOf(list)</code> or <code>ImmutableList.of(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;)</code> do the same."}],"answers":[{"tags":[],"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1568369991,"creation_date":1568368742,"answer_id":57921433,"question_id":57921251,"body_markdown":"I would say that since commonly collections tend to (or at least should) be treated as &quot;immutable by default&quot; (meaning you&#39;re rarely modifying collections that you didn&#39;t create), it&#39;s not very important to specify that &quot;this is immutable&quot;. It would be more useful to specify &quot;you can safely modify this collection if you wish&quot;.\r\n\r\nSecondly, your suggested approach wouldn&#39;t work. You can&#39;t extend `List` and hide methods, so the only option would be to make it return an `ImmutableList` that&#39;s *not* a subtype of `List`. That would make it useless, as it would require a new `ImmutableList` interface, and any existing code wouldn&#39;t be able to use it.\r\n\r\nSo is this optimal design? No, not really, but for backwards compatibility that&#39;s not going to change.","title":"Why does List.of() in Java not return a typed immutable list?","body":"<p>I would say that since commonly collections tend to (or at least should) be treated as \"immutable by default\" (meaning you're rarely modifying collections that you didn't create), it's not very important to specify that \"this is immutable\". It would be more useful to specify \"you can safely modify this collection if you wish\".</p>\n\n<p>Secondly, your suggested approach wouldn't work. You can't extend <code>List</code> and hide methods, so the only option would be to make it return an <code>ImmutableList</code> that's <em>not</em> a subtype of <code>List</code>. That would make it useless, as it would require a new <code>ImmutableList</code> interface, and any existing code wouldn't be able to use it.</p>\n\n<p>So is this optimal design? No, not really, but for backwards compatibility that's not going to change.</p>\n"},{"tags":[],"owner":{"account_id":446208,"reputation":8611,"user_id":839128,"accept_rate":75,"display_name":"MikeFHay"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1568369856,"creation_date":1568369856,"answer_id":57921722,"question_id":57921251,"body_markdown":"Removing `add`, `remove`, etc. from all the Collection types and creating subinterfaces `MutableCollection`, `MutableList`, `MutableSet` would double the number of Collection interfaces, which is a complexity cost to be considered. Furthermore, Collections aren&#39;t cleanly separated into Mutable and Immutable: `Arrays.asList` supports `set`, but not `add`.\r\n\r\nUltimately there&#39;s a tradeoff to be made about how much to capture in the type system and how much to enforce at runtime. Reasonable people can disagree as to where to draw the line.","title":"Why does List.of() in Java not return a typed immutable list?","body":"<p>Removing <code>add</code>, <code>remove</code>, etc. from all the Collection types and creating subinterfaces <code>MutableCollection</code>, <code>MutableList</code>, <code>MutableSet</code> would double the number of Collection interfaces, which is a complexity cost to be considered. Furthermore, Collections aren't cleanly separated into Mutable and Immutable: <code>Arrays.asList</code> supports <code>set</code>, but not <code>add</code>.</p>\n\n<p>Ultimately there's a tradeoff to be made about how much to capture in the type system and how much to enforce at runtime. Reasonable people can disagree as to where to draw the line.</p>\n"},{"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":4,"creation_date":1568402654,"post_id":57926310,"comment_id":102276111,"body_markdown":"This is about as conclusive an answer as you can get to &quot;why&quot; from one of the actual people who made the decision :)  You&#39;re allowed to disagree with the reasons, of course, but these are the reasons.","body":"This is about as conclusive an answer as you can get to &quot;why&quot; from one of the actual people who made the decision :)  You&#39;re allowed to disagree with the reasons, of course, but these are the reasons."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1568799944,"post_id":57926310,"comment_id":102386987,"body_markdown":"If we are at it, why do these immutable collections still have no optimized `forEach` nor `spliterator` implementations (JDK14-ea)? It’s kind of embarrassing that the newest, most space optimized collection types have the poorest Stream processing support. And we could have a straight-forward check like `list.spliterator().hasCharacteristics(Spliterator.IMMUTABLE)` without the need to introduce a new API, same for `NONULL`, but it just doesn’t work.","body":"If we are at it, why do these immutable collections still have no optimized <code>forEach</code> nor <code>spliterator</code> implementations (JDK14-ea)? It’s kind of embarrassing that the newest, most space optimized collection types have the poorest Stream processing support. And we could have a straight-forward check like <code>list.spliterator().hasCharacteristics(Spliterator.IMMUTABLE)</code> without the need to introduce a new API, same for <code>NONULL</code>, but it just doesn’t work."},{"owner":{"account_id":3606551,"reputation":1221,"user_id":3008606,"accept_rate":75,"display_name":"Martin Geisse"},"score":0,"creation_date":1686934287,"post_id":57926310,"comment_id":134871713,"body_markdown":"&quot;Thus, callers can use List.copyOf to make defensive copies with impunity&quot; -- One thing that became clear to me only after reading this again is: If you think about build an API that takes an ImmutableList (e.g. Guava) as a parameter, you might as well take a List and make a List.copyOf(it). This will have a similar effect, but is more convenient to use and takes care of performance (share vs. copy) itself. The only downside is that informal docs are needed to emphasize that the list is copied, not shared, but sharing a list is rarely a good mode of operation for an API anyway.","body":"&quot;Thus, callers can use List.copyOf to make defensive copies with impunity&quot; -- One thing that became clear to me only after reading this again is: If you think about build an API that takes an ImmutableList (e.g. Guava) as a parameter, you might as well take a List and make a List.copyOf(it). This will have a similar effect, but is more convenient to use and takes care of performance (share vs. copy) itself. The only downside is that informal docs are needed to emphasize that the list is copied, not shared, but sharing a list is rarely a good mode of operation for an API anyway."}],"tags":[],"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"comment_count":3,"down_vote_count":0,"up_vote_count":28,"is_accepted":true,"score":28,"last_activity_date":1568387906,"creation_date":1568387906,"answer_id":57926310,"question_id":57921251,"body_markdown":"It&#39;s not that nobody cares; it&#39;s that this is a problem of considerable subtlety.\r\n\r\nThe original reason there isn&#39;t a family of &quot;immutable&quot; collection interfaces is because of a concern about [interface proliferation][1]. There could potentially be interfaces not only for immutability, but synchronized and runtime type-checked collections, and also collections that can have elements set but not added or removed (e.g., [Arrays.asList][2]) or collections from which elements can be removed but not added (e.g., [Map.keySet][3]).\r\n\r\nBut it could also be argued that immutability is so important that it should be special-cased, and that there be support in the type hierarchy for it even if there isn&#39;t support for all those other characteristics. Fair enough.\r\n\r\nThe initial suggestion is to have an `ImmutableList` interface extend `List`, as\r\n\r\n&gt; ImmutableList &lt;: List &lt;: Collection\r\n\r\n(Where `&lt;:` means &quot;is a subtype of&quot;.)\r\n\r\nThis can certainly be done, but then `ImmutableList` would inherit all of the methods from `List`, including all the mutator methods. Something would have to be done with them; a sub-interface can&#39;t &quot;disinherit&quot; methods from a super-interface. The best that could be done is to specify that these methods throw an exception, provide default implementations that do so, and perhaps mark the methods as deprecated so that programmers get a warning at compile time.\r\n\r\nThis works, but it doesn&#39;t help much. An implementation of such an interface cannot be guaranteed to be immutable at all. A malicious or buggy implementation could override the mutator methods, or it could simply add more methods that mutate the state. Any programs that used `ImmutableList` couldn&#39;t make any assumptions that the list was, in fact, immutable.\r\n\r\nA variation on this is to make `ImmutableList` be a *class* instead of an *interface*, to define its mutator methods to throw exceptions, to make them final, and to provide no public constructors, in order to restrict implementations. In fact, this is exactly what Guava&#39;s [`ImmutableList`][4] has done. If you trust the Guava developers (I think they&#39;re pretty reputable) then if you have a Guava `ImmutableList` instance, you&#39;re assured that it is in fact immutable. For example, you could store it in a field with the knowledge that it won&#39;t change out from under you unexpectedly. But this also means that you can&#39;t add another `ImmutableList` implementation, at least not without modifying Guava.\r\n\r\nA problem that isn&#39;t solved by this approach is the &quot;scrubbing&quot; of immutability by upcasting. A lot of existing APIs define methods with parameters of type `Collection` or `Iterable`. If you were to pass an `ImmutableList` to such a method, it would lose the type information indicating that the list is immutable. To benefit from this, you&#39;d have to add immutable-flavored overloads everywhere. Or, you could add `instanceof` checks everywhere. Both are pretty messy.\r\n\r\n(Note that the JDK&#39;s [`List.copyOf`][5] sidesteps this problem. Even though there are no immutable *types*, it checks the implementation before making a copy, and avoids making  copies unnecessarily. Thus, callers can use `List.copyOf` to make defensive copies with impunity.)\r\n\r\nAs an alternative, one might argue that we don&#39;t want `ImmutableList` to be a sub-interface of `List`, we want it to be a super-interface:\r\n\r\n&gt; List &lt;: ImmutableList\r\n\r\nThis way, instead of `ImmutableList` having to specify that all those mutator methods throw exceptions, they wouldn&#39;t be present in the interface at all. This is nice, except that this model is completely wrong. Since `ArrayList` is a `List`, that means `ArrayList` is also an `ImmutableList`, which is clearly nonsensical. The problem is that &quot;immutable&quot; implies a restriction on subtypes, which can&#39;t be done in an inheritance hierarchy. Instead, it would need to be renamed to allow capabilities to be added as one goes down the hierarchy, for example,\r\n\r\n&gt; List &lt;: ReadableList\r\n\r\nwhich is more accurate. However, `ReadableList` is altogether a different thing from an `ImmutableList`.\r\n\r\nFinally, there are a bunch of semantic issues that we haven&#39;t considered. One concerns *immutability* vs. *unmodifiability*. Java has APIs that support unmodifiability, for example:\r\n\r\n    List&lt;String&gt; alist = new ArrayList&lt;&gt;(...);\r\n    ??? ulist = Collections.unmodifiableList(alist);\r\n\r\nWhat should the type of `ulist` be? It&#39;s not immutable, since it will change if somebody changes the backing list `alist`. Now consider:\r\n\r\n    ???&lt;String[]&gt; arlist = List.of(new String[] { ... }, new String[] { ... });\r\n\r\nWhat should the type be? It&#39;s certainly not immutable, as it contains arrays, and arrays are always mutable. Thus it&#39;s not at all clear that it would be reasonable to say that `List.of` returns something immutable.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/doc-files/coll-designfaq.html#a1\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Arrays.html#asList(T...)\r\n  [3]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#keySet()\r\n  [4]: https://guava.dev/releases/28.1-jre/api/docs/com/google/common/collect/ImmutableList.html\r\n  [5]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html#copyOf(java.util.Collection)","title":"Why does List.of() in Java not return a typed immutable list?","body":"<p>It's not that nobody cares; it's that this is a problem of considerable subtlety.</p>\n\n<p>The original reason there isn't a family of \"immutable\" collection interfaces is because of a concern about <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/doc-files/coll-designfaq.html#a1\" rel=\"noreferrer\">interface proliferation</a>. There could potentially be interfaces not only for immutability, but synchronized and runtime type-checked collections, and also collections that can have elements set but not added or removed (e.g., <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Arrays.html#asList(T...)\" rel=\"noreferrer\">Arrays.asList</a>) or collections from which elements can be removed but not added (e.g., <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#keySet()\" rel=\"noreferrer\">Map.keySet</a>).</p>\n\n<p>But it could also be argued that immutability is so important that it should be special-cased, and that there be support in the type hierarchy for it even if there isn't support for all those other characteristics. Fair enough.</p>\n\n<p>The initial suggestion is to have an <code>ImmutableList</code> interface extend <code>List</code>, as</p>\n\n<blockquote>\n  <p>ImmutableList &lt;: List &lt;: Collection</p>\n</blockquote>\n\n<p>(Where <code>&lt;:</code> means \"is a subtype of\".)</p>\n\n<p>This can certainly be done, but then <code>ImmutableList</code> would inherit all of the methods from <code>List</code>, including all the mutator methods. Something would have to be done with them; a sub-interface can't \"disinherit\" methods from a super-interface. The best that could be done is to specify that these methods throw an exception, provide default implementations that do so, and perhaps mark the methods as deprecated so that programmers get a warning at compile time.</p>\n\n<p>This works, but it doesn't help much. An implementation of such an interface cannot be guaranteed to be immutable at all. A malicious or buggy implementation could override the mutator methods, or it could simply add more methods that mutate the state. Any programs that used <code>ImmutableList</code> couldn't make any assumptions that the list was, in fact, immutable.</p>\n\n<p>A variation on this is to make <code>ImmutableList</code> be a <em>class</em> instead of an <em>interface</em>, to define its mutator methods to throw exceptions, to make them final, and to provide no public constructors, in order to restrict implementations. In fact, this is exactly what Guava's <a href=\"https://guava.dev/releases/28.1-jre/api/docs/com/google/common/collect/ImmutableList.html\" rel=\"noreferrer\"><code>ImmutableList</code></a> has done. If you trust the Guava developers (I think they're pretty reputable) then if you have a Guava <code>ImmutableList</code> instance, you're assured that it is in fact immutable. For example, you could store it in a field with the knowledge that it won't change out from under you unexpectedly. But this also means that you can't add another <code>ImmutableList</code> implementation, at least not without modifying Guava.</p>\n\n<p>A problem that isn't solved by this approach is the \"scrubbing\" of immutability by upcasting. A lot of existing APIs define methods with parameters of type <code>Collection</code> or <code>Iterable</code>. If you were to pass an <code>ImmutableList</code> to such a method, it would lose the type information indicating that the list is immutable. To benefit from this, you'd have to add immutable-flavored overloads everywhere. Or, you could add <code>instanceof</code> checks everywhere. Both are pretty messy.</p>\n\n<p>(Note that the JDK's <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html#copyOf(java.util.Collection)\" rel=\"noreferrer\"><code>List.copyOf</code></a> sidesteps this problem. Even though there are no immutable <em>types</em>, it checks the implementation before making a copy, and avoids making  copies unnecessarily. Thus, callers can use <code>List.copyOf</code> to make defensive copies with impunity.)</p>\n\n<p>As an alternative, one might argue that we don't want <code>ImmutableList</code> to be a sub-interface of <code>List</code>, we want it to be a super-interface:</p>\n\n<blockquote>\n  <p>List &lt;: ImmutableList</p>\n</blockquote>\n\n<p>This way, instead of <code>ImmutableList</code> having to specify that all those mutator methods throw exceptions, they wouldn't be present in the interface at all. This is nice, except that this model is completely wrong. Since <code>ArrayList</code> is a <code>List</code>, that means <code>ArrayList</code> is also an <code>ImmutableList</code>, which is clearly nonsensical. The problem is that \"immutable\" implies a restriction on subtypes, which can't be done in an inheritance hierarchy. Instead, it would need to be renamed to allow capabilities to be added as one goes down the hierarchy, for example,</p>\n\n<blockquote>\n  <p>List &lt;: ReadableList</p>\n</blockquote>\n\n<p>which is more accurate. However, <code>ReadableList</code> is altogether a different thing from an <code>ImmutableList</code>.</p>\n\n<p>Finally, there are a bunch of semantic issues that we haven't considered. One concerns <em>immutability</em> vs. <em>unmodifiability</em>. Java has APIs that support unmodifiability, for example:</p>\n\n<pre><code>List&lt;String&gt; alist = new ArrayList&lt;&gt;(...);\n??? ulist = Collections.unmodifiableList(alist);\n</code></pre>\n\n<p>What should the type of <code>ulist</code> be? It's not immutable, since it will change if somebody changes the backing list <code>alist</code>. Now consider:</p>\n\n<pre><code>???&lt;String[]&gt; arlist = List.of(new String[] { ... }, new String[] { ... });\n</code></pre>\n\n<p>What should the type be? It's certainly not immutable, as it contains arrays, and arrays are always mutable. Thus it's not at all clear that it would be reasonable to say that <code>List.of</code> returns something immutable.</p>\n"}],"owner":{"account_id":2726502,"reputation":338,"user_id":2351407,"display_name":"Johannes Rabauer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11106,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"accepted_answer_id":57926310,"answer_count":3,"score":11,"last_activity_date":1697620915,"creation_date":1568368160,"question_id":57921251,"body_markdown":"The list returned by the method `List.of(E... elements)` in java does return an immutable list, but this is not visible at all by looking at the created list. The created list simply throws an Exception instead of not showing the possiblity to change the list at all. \r\nMy point is, that `List.of(E... elements)` should return a `ImmutableList` that `extends List`. This way the user can decide if he cares to show this fact of immutability or not.\r\n\r\nBut I don&#39;t find anybody complaining or showing alternative solutions. Even Guava and Apache Commons don&#39;t do this by default. Only Guava gives the possibilty to create it (albeit with a lot of code): \r\n\r\n```java\r\nList&lt;String&gt; list = new ArrayList&lt;String&gt;(Arrays.asList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;));\r\nImmutableList&lt;String&gt; unmodifiableList = ImmutableList.&lt;String&gt;builder().addAll(list).build();\r\n```\r\n\r\nBut even this class has a (deprecated) `add` and `remove` method.\r\n\r\nCan anyone tell me why nobody cares about this (seemingly fundamental) issue?","title":"Why does List.of() in Java not return a typed immutable list?","body":"<p>The list returned by the method <code>List.of(E... elements)</code> in java does return an immutable list, but this is not visible at all by looking at the created list. The created list simply throws an Exception instead of not showing the possiblity to change the list at all.\nMy point is, that <code>List.of(E... elements)</code> should return a <code>ImmutableList</code> that <code>extends List</code>. This way the user can decide if he cares to show this fact of immutability or not.</p>\n<p>But I don't find anybody complaining or showing alternative solutions. Even Guava and Apache Commons don't do this by default. Only Guava gives the possibilty to create it (albeit with a lot of code):</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;(Arrays.asList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;));\nImmutableList&lt;String&gt; unmodifiableList = ImmutableList.&lt;String&gt;builder().addAll(list).build();\n</code></pre>\n<p>But even this class has a (deprecated) <code>add</code> and <code>remove</code> method.</p>\n<p>Can anyone tell me why nobody cares about this (seemingly fundamental) issue?</p>\n"},{"tags":["java","spring","spring-boot","websocket"],"comments":[{"owner":{"account_id":1479351,"reputation":337,"user_id":1389063,"accept_rate":67,"display_name":"dasAnderl ausMinga"},"score":0,"creation_date":1483205307,"post_id":41403693,"comment_id":70024061,"body_markdown":"just tested with up to date versions (4.3.5.RELEASE and boot 1.4.3.RELEASE) no change","body":"just tested with up to date versions (4.3.5.RELEASE and boot 1.4.3.RELEASE) no change"}],"answers":[{"tags":[],"owner":{"account_id":1479351,"reputation":337,"user_id":1389063,"accept_rate":67,"display_name":"dasAnderl ausMinga"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1483205659,"creation_date":1483205659,"answer_id":41410474,"question_id":41403693,"body_markdown":"annotation \r\n`@EnableWebSocketMessageBroker`\r\nis required in a configuration class to enable the websocket scope. `@EnableWebSocket` is NOT suffcicient\r\n\r\n","title":"spring websocket scope missing","body":"<p>annotation \n<code>@EnableWebSocketMessageBroker</code>\nis required in a configuration class to enable the websocket scope. <code>@EnableWebSocket</code> is NOT suffcicient</p>\n"},{"tags":[],"owner":{"account_id":7866417,"reputation":43,"user_id":5945117,"display_name":"jihed zaoueli"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697620901,"creation_date":1697620901,"answer_id":77315039,"question_id":41403693,"body_markdown":"I&#39;m getting the error :(\r\n\r\nWhen i add @EnableWebSocketMessageBroker i get another error\r\n\r\n    11:11:35.789 [main] [] ERROR o.s.boot.SpringApplication - SpringApplication.java:821 - Application run failed org.springframework.context.ApplicationContextException: Failed to start bean &#39;subProtocolWebSocketHandler&#39;; nested exception is java.lang.IllegalArgumentException: No handlers\r\n\r\nps: I&#39;m not using STOPM and no StompEndpointRegistry","title":"spring websocket scope missing","body":"<p>I'm getting the error :(</p>\n<p>When i add @EnableWebSocketMessageBroker i get another error</p>\n<pre><code>11:11:35.789 [main] [] ERROR o.s.boot.SpringApplication - SpringApplication.java:821 - Application run failed org.springframework.context.ApplicationContextException: Failed to start bean 'subProtocolWebSocketHandler'; nested exception is java.lang.IllegalArgumentException: No handlers\n</code></pre>\n<p>ps: I'm not using STOPM and no StompEndpointRegistry</p>\n"}],"owner":{"account_id":1479351,"reputation":337,"user_id":1389063,"accept_rate":67,"display_name":"dasAnderl ausMinga"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":688,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1697620901,"creation_date":1483138344,"question_id":41403693,"body_markdown":"when i use the new &quot;websocket&quot; scope in a component, i get:\r\n\r\n    java.lang.IllegalStateException: No Scope registered for scope name &#39;websocket&#39;\r\n\r\ncontroller:\r\n\r\n    @RestController\r\n    @Scope(value = &quot;websocket&quot;, proxyMode = ScopedProxyMode.TARGET_CLASS)\r\n    @Slf4j\r\n    public class GenericWrapperController extends TextWebSocketHandler {\r\n\r\nspring version 4.3.3.RELEASE and 1.4.1.RELEASE for springboot. my guess its version related however the docs say this scope was introduced in 4.1 already. ","title":"spring websocket scope missing","body":"<p>when i use the new \"websocket\" scope in a component, i get:</p>\n\n<pre><code>java.lang.IllegalStateException: No Scope registered for scope name 'websocket'\n</code></pre>\n\n<p>controller:</p>\n\n<pre><code>@RestController\n@Scope(value = \"websocket\", proxyMode = ScopedProxyMode.TARGET_CLASS)\n@Slf4j\npublic class GenericWrapperController extends TextWebSocketHandler {\n</code></pre>\n\n<p>spring version 4.3.3.RELEASE and 1.4.1.RELEASE for springboot. my guess its version related however the docs say this scope was introduced in 4.1 already. </p>\n"},{"tags":["java","android","android-room"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1650546271,"post_id":71954872,"comment_id":127147168,"body_markdown":"&quot;Most tutorials are done in kotlin&quot; -- you are going to need to learn enough Kotlin to be able to read documentation, Stack Overflow answers, and other knowledge sources. FWIW, [here is my free book on Kotlin](https://commonsware.com/Kotlin). My [free book on Room](https://commonsware.com/Room) has [an example of packaging a database with your app](https://commonsware.com/Room/pages/chap-package-001.html), though the example is in Kotlin.","body":"&quot;Most tutorials are done in kotlin&quot; -- you are going to need to learn enough Kotlin to be able to read documentation, Stack Overflow answers, and other knowledge sources. FWIW, <a href=\"https://commonsware.com/Kotlin\" rel=\"nofollow noreferrer\">here is my free book on Kotlin</a>. My <a href=\"https://commonsware.com/Room\" rel=\"nofollow noreferrer\">free book on Room</a> has <a href=\"https://commonsware.com/Room/pages/chap-package-001.html\" rel=\"nofollow noreferrer\">an example of packaging a database with your app</a>, though the example is in Kotlin."}],"answers":[{"tags":[],"owner":{"account_id":21384180,"reputation":1690,"user_id":15749574,"display_name":"JustSightseeing"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650545946,"creation_date":1650545946,"answer_id":71954919,"question_id":71954872,"body_markdown":"you can create a database using other tools like &quot;db browser for SQLite&quot;, there you will be able to create tables and fill them with data and save the database as .db file, which you will be able to move to your android project.","title":"How to prepopulate database using Room? I don&#39;t see tutorials that explains in details using java","body":"<p>you can create a database using other tools like &quot;db browser for SQLite&quot;, there you will be able to create tables and fill them with data and save the database as .db file, which you will be able to move to your android project.</p>\n"},{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1650590292,"creation_date":1650573051,"answer_id":71960555,"question_id":71954872,"body_markdown":"You may wish to consider the following, even though it may appear to be the wrong order (it may overcome perplexing issues with the dreaded Expected/Found issue that is often associated with trying to adapt room&#39;s entities to cater for an existing database)\r\n\r\n- If you already have a populated pre-packaged database you may find it easier to add steps to create the Room expected tables, copy the data from the existing tables and drop them afterwards *(still probably less perplexing than trying to ascertain the nuances of Room)*.\r\n\r\n1. Design and create your schema for the database.\r\n2. Using the schema create the entities for Room, that is a class annotated with @Entity per table.\r\n3. Create an appropriate `@Database` annotated abstract class that includes ALL of the @Entity annotated class in the `entities =` parameter of the `@Database` annotation.\r\n4. Compile (successfully) the project.\r\n5. In the Android View of Android Studio look at the generated java there will be a class that has the same names as the `@Database` annotated class but suffixed with **_Impl**. In this class there will be a method called **createAllTables** and you will see an `execSQL` statement for each table and any supplementary indexes \r\n    - note if you use Views then you need to create the `@View` annotated classes and follow the similar procedure. However, Views are not common though and hence they have not been included.\r\n6. **Use the SQL from the `execSQ`L statements** to create your tables in favourite SQL tool (e.g. DB Browser for SQLite, Navicat, DBeaver).\r\n7. Populate the database using your SQLite Tool.\r\n8. Close and Save the database (it is suggested that you then Open the database and check that it is as expected and then Close and Save the database again (some tools sometimes don&#39;t close the database))\r\n9. Create the assets folder in your project.\r\n10. Copy the saved database file into the assets folder.\r\n11. add/amend where you undertake the Room&#39;s build method, to precede it with `.createFromAsset(&quot;the_database_file_name_including_extension_if_one&quot;)`\r\n    - this tells Room, when building the database, if the database does not exist, to copy the database from the assets folder.\r\n12. Save and compile and then the App.\r\n\r\nFollowing the above order, especially using Room to generate the SQL, will circumvent having to understand the nuances of Room in regards to column type affinities and column constraints.\r\n- for example you CANNOT have a column type that is not INTEGER, TEXT, REAL or BLOB.\r\n\r\nHere&#39;s an example with a single table named Table1 that has 6 columns\r\n\r\nThe **Table1** @Entity annotated class :-\r\n\r\n    @Entity /*(\r\n            primaryKeys = {&quot;column_name&quot;,&quot;more_columns_for_a_composite_primary&quot;},\r\n            tableName = &quot;alternative_table_name&quot;\r\n    )*/\r\n    class Table1 {\r\n        /* in ROOM every table MUST have a column either annotated with @PrimaryKey\r\n            or have a primary key specified in the primaryKeys parameter of the @Entity annotation\r\n         */\r\n        @PrimaryKey\r\n        Long id = null; /* this will be a typically id column that will, if no value is specified, be generated (must be Long not long) */\r\n        String text_column;\r\n        @NonNull\r\n        String notnull_text_column;\r\n        double real_column;\r\n        byte[] blob_column;\r\n        @NonNull\r\n        @ColumnInfo(index = true)\r\n        double notnull_real_column_also_indexed;\r\n    \r\n    }\r\n\r\nThe @Database annotated class, **TheDatabase**,including singleton for getting an instance.\r\n\r\n    @Database(entities = {Table1.class}, version = 1, exportSchema = false)\r\n    abstract class TheDatabase extends RoomDatabase {\r\n    \r\n       private volatile static TheDatabase instance = null;\r\n    \r\n       public static TheDatabase getInstance(Context context) {\r\n          if (instance == null) {\r\n             instance = Room.databaseBuilder(context,TheDatabase.class,&quot;the_database.db&quot;)\r\n                     .allowMainThreadQueries() /* for convenience and brevity */\r\n                     .createFromAsset(&quot;the_database.db&quot;)\r\n                     .build();\r\n          }\r\n          return instance;\r\n       }\r\n    }\r\n\r\nWith the above, the project can be compiled (Ctrl+F9), and then the generated java associated with the @Database annotated class can be located e.g.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWithin the class there will be a method name createAllTables :-\r\n\r\n    @SuppressWarnings({&quot;unchecked&quot;, &quot;deprecation&quot;})\r\n    public final class TheDatabase_Impl extends TheDatabase {\r\n      @Override\r\n      protected SupportSQLiteOpenHelper createOpenHelper(DatabaseConfiguration configuration) {\r\n        final SupportSQLiteOpenHelper.Callback _openCallback = new RoomOpenHelper(configuration, new RoomOpenHelper.Delegate(1) {\r\n          @Override\r\n          public void createAllTables(SupportSQLiteDatabase _db) {\r\n            _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `Table1` (`id` INTEGER, `text_column` TEXT, `notnull_text_column` TEXT NOT NULL, `real_column` REAL NOT NULL, `blob_column` BLOB, `notnull_real_column_also_indexed` REAL NOT NULL, PRIMARY KEY(`id`))&quot;);\r\n            _db.execSQL(&quot;CREATE INDEX IF NOT EXISTS `index_Table1_notnull_real_column_also_indexed` ON `Table1` (`notnull_real_column_also_indexed`)&quot;);\r\n            _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER PRIMARY KEY,identity_hash TEXT)&quot;);\r\n            _db.execSQL(&quot;INSERT OR REPLACE INTO room_master_table (id,identity_hash) VALUES(42, &#39;a6ca75e8ee6037ad13c258cdc0405ef1&#39;)&quot;);\r\n          }\r\n    \r\n          @Override\r\n          public void dropAllTables(SupportSQLiteDatabase _db) {\r\n            _db.execSQL(&quot;DROP TABLE IF EXISTS `Table1`&quot;);\r\n            if (mCallbacks != null) {\r\n              for (int _i = 0, _size = mCallbacks.size(); _i &lt; _size; _i++) {\r\n                mCallbacks.get(_i).onDestructiveMigration(_db);\r\n              }\r\n            }\r\n          }\r\n          ....\r\n\r\nAs can be seen there is an `execSQ`L for the table1 table, another for the index (as index = true was specified in the `@ColumnInfo` annotation).\r\n\r\n- the room_master_table is used by room to store a hash of the schema, this is not needed, and should NOT be created in the pre-packaged database that will be copied into the assets folder. \r\n    - The hash will change if the schema changes (the @Entity annotated classes)\r\n\r\n- **Nuances** \r\n    - if you look closely, you will see that both the real_column and the notnull_real_column have the NOT NULL constraint, but only the latter has the `@NonNull` annotation. This is because double, is a primitive and ALWAYS has a value, so Room implicitly applies the NOT NULL constraint. If the NOT NULL constraint is not coded when creating the pre-packaged database then after the asset has been copied, when running the App, an exception will occur as the database that was found (the one copied from the asset) will be different (in Room&#39;s view) from what Room expected (the schema according to the @Entity annotated classed defined in the list of entities in the @Database annotation). **Hence**, why it is suggested to create the schema via room, extract the generated SQL and use this to create the pre-packaged database. This ensures that the database schema is as expected.\r\n    - Note this is just **one** example of the nuances\r\n\r\n**Continuing with a working example**\r\n\r\nOne thing that often trips new users of SQLite and also Room is that when you instantiate the Database class, is that, it does not then create or open the database. It is not until an attempt is made to access the database (changing or extracting data from the database) that the database is opened and if necessary created and in the case of a pre-populated database copied from the asset (or file, normally the former).\r\n\r\nAs such, in preparation, for this a (can be one or more), an interface or abstract class annotated with `@Dao` is created. In this case **AllDAO** as per:-\r\n\r\n    @Dao\r\n    abstract class AllDAO {\r\n        @Insert\r\n        abstract long insert(Table1 table1);\r\n        @Query(&quot;SELECT * FROM table1&quot;)\r\n        abstract List&lt;Table1&gt; getAllTable1s();\r\n    }\r\n\r\n- using either the `insert` or the `getAllTable1s` would access the database.\r\n\r\nThe `@Dao` annotated class(es) have to be known/defined to Room, typically  the @Database class includes this so the **TheDatabase** class could then be:-\r\n\r\n    @Database(entities = {Table1.class}, version = 1, exportSchema = false)\r\n    abstract class TheDatabase extends RoomDatabase {\r\n       abstract AllDAO getAllDAO(); //&lt;&lt;&lt;&lt;&lt; ADDED to allow use of the database\r\n       private volatile static TheDatabase instance = null;\r\n    \r\n       public static TheDatabase getInstance(Context context) {\r\n          if (instance == null) {\r\n             instance = Room.databaseBuilder(context,TheDatabase.class,&quot;the_database.db&quot;)\r\n                     .allowMainThreadQueries() /* for convenience and brevity */\r\n                     .createFromAsset(&quot;the_database.db&quot;)\r\n                     .build();\r\n          }\r\n          return instance;\r\n       }\r\n    }\r\n\r\n So the App is virtually ready (using it in an activity will be dealt with later).\r\n\r\nNow the pre-packaged database can be perpared/built using an SQLite tool (Navicat for SQLite has been used in this case, it shouldn&#39;t matter which).\r\n\r\nA connection is made and opened, this detailing where the database file will be stored. (see the tool&#39;s help if needed). In this case the database is named `SOQuestions` (already exists) :-\r\n\r\n[![enter image description here][2]][2]\r\n\r\nNew Query is clicked, and the SQL for the user defined tables is pasted, as well as the indexes. e.g.:-\r\n\r\n[![enter image description here][3]][3]\r\n\r\nSo the table(s) and indexes now exist but are unpopulated. So now to populate the database by inserting some records. A query will be used (in this case as it&#39;s only an example queries won&#39;t be saved, they could if desired). \r\n\r\nSo the existing SQL is deleted and replaced with (not deletes all rows, so it is rerunnable) and then run:-\r\n\r\n[![enter image description here][4]][4]\r\n\r\nThe resultant data being :-\r\n\r\n[![enter image description here][5]][5]\r\n\r\nThe database should be saved. It is suggested that the database/connection is closed and then reopened to check that the data has been saved and then finally closed again (this was done).\r\n\r\nThe database is now ready to be copied into the assets folder (which currently doesn&#39;t exist). So create the assets folder in the project (back to Android Studio). File/Directory was used to select src\\main\\assets :-\r\n\r\n[![enter image description here][6]][6]\r\n\r\nto get :-\r\n\r\n[![enter image description here][7]][7]\r\n\r\nThe file is copied, from Windows Explorer (right click on the file and copy) \r\n\r\n[![enter image description here][8]][8]\r\n\r\nand pasted (right click on the assets folder in Andriod Studio and Paste), renaming it to the_database.db (the database name, as per the `createFromAsset` *(could use **soquestions.db** as the asset file name)*)\r\n\r\n[![enter image description here][9]][9]\r\n\r\nresulting in :-\r\n\r\n[![enter image description here][10]][10]\r\n\r\nNow to running the App by using the database in an activity (note that for brevity and convenience this is run on the main thread).\r\n\r\nThe activity code :-\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        TheDatabase dbInstance;\r\n        AllDAO dao;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            dbInstance = TheDatabase.getInstance(this); /* get DB Instance */\r\n            dao = dbInstance.getAllDAO(); /* get the appropriate Dao */\r\n            logAllRowsFromTable1(&quot;PRENEWDATA&quot;); /* WILL INITIATE THE ASSET COPY (if DB does not exist) */\r\n            Table1 newTable1Row = new Table1();\r\n            newTable1Row.text_column = &quot;a new row&quot;;\r\n            newTable1Row.blob_column = new byte[30];\r\n            newTable1Row.notnull_text_column = &quot; the new nottnull_text_column&quot;;\r\n            newTable1Row.real_column = 4444.55555;\r\n            newTable1Row.notnull_real_column_also_indexed = 7777.8888;\r\n            dao.insert(newTable1Row); /* IF NOT INITIATED ABOVE WILL INITIATE THE ASSET COPY (if DB does not exist)*/\r\n            logAllRowsFromTable1(&quot;POSTNEWDATA&quot;);\r\n        }\r\n    \r\n        void logAllRowsFromTable1(String suffix) {\r\n            for (Table1 t: dao.getAllTable1s()) {\r\n                Log.d(&quot;DB-&quot; + suffix,\r\n                        &quot;ID is &quot; + t.real_column\r\n                        + &quot;\\n\\tTEXT_COLUMN is &quot; + t.text_column\r\n                        + &quot;\\n\\t NOTNULL_TEXT_COLUMN is &quot; + t.notnull_text_column\r\n                        + &quot;\\n\\t REAL_COLUMN is &quot; + t.real_column\r\n                        + &quot;\\n\\t NOTNULL_REAL_COLUMN... is &quot; + t.notnull_real_column_also_indexed\r\n                        /* not doing the blob so as not to complicate matters */\r\n                );\r\n            }\r\n        }\r\n\r\n\r\nThis will first output some of the data, for all rows, from the pre-packaged database to the log.\r\nIt will then add a new run (each run, it is only a demo/example) and then output some of the data for all rows, from the updated (new row) database.\r\n\r\ne.g. :-\r\n\r\n    2022-04-22 11:00:43.689 D/DB-PRENEWDATA: ID is 10.3333\r\n        \tTEXT_COLUMN is some text\r\n        \t NOTNULL_TEXT_COLUMN is some notnull text\r\n        \t REAL_COLUMN is 10.3333\r\n        \t NOTNULL_REAL_COLUMN... is 3.1\r\n    2022-04-22 11:00:43.689 D/DB-PRENEWDATA: ID is 11.3333\r\n        \tTEXT_COLUMN is null\r\n        \t NOTNULL_TEXT_COLUMN is more not null text\r\n        \t REAL_COLUMN is 11.3333\r\n        \t NOTNULL_REAL_COLUMN... is 4.1\r\n    \t\t \r\n    \t\t \r\n    2022-04-22 11:00:43.692 D/DB-POSTNEWDATA: ID is 10.3333\r\n        \tTEXT_COLUMN is some text\r\n        \t NOTNULL_TEXT_COLUMN is some notnull text\r\n        \t REAL_COLUMN is 10.3333\r\n        \t NOTNULL_REAL_COLUMN... is 3.1\r\n    2022-04-22 11:00:43.692 D/DB-POSTNEWDATA: ID is 11.3333\r\n        \tTEXT_COLUMN is null\r\n        \t NOTNULL_TEXT_COLUMN is more not null text\r\n        \t REAL_COLUMN is 11.3333\r\n        \t NOTNULL_REAL_COLUMN... is 4.1\r\n    2022-04-22 11:00:43.692 D/DB-POSTNEWDATA: ID is 4444.55555\r\n        \tTEXT_COLUMN is a new row\r\n        \t NOTNULL_TEXT_COLUMN is  the new nottnull_text_column\r\n        \t REAL_COLUMN is 4444.55555\r\n        \t NOTNULL_REAL_COLUMN... is 7777.8888\r\n\r\n  - blank lines added to distinguish between the two sets of output\r\n\r\nAndroid Studio&#39;s **App Inspection** can be used to see the actual data:-\r\n\r\n[![enter image description here][11]][11] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7mM5H.png\r\n  [2]: https://i.stack.imgur.com/nOWru.png\r\n  [3]: https://i.stack.imgur.com/UayF7.png\r\n  [4]: https://i.stack.imgur.com/sHNhM.png\r\n  [5]: https://i.stack.imgur.com/mbqnH.png\r\n  [6]: https://i.stack.imgur.com/emA5r.png\r\n  [7]: https://i.stack.imgur.com/pWerV.png\r\n  [8]: https://i.stack.imgur.com/yvCOB.png\r\n  [9]: https://i.stack.imgur.com/j7OcV.png\r\n  [10]: https://i.stack.imgur.com/kaPIU.png\r\n  [11]: https://i.stack.imgur.com/LAluc.png","title":"How to prepopulate database using Room? I don&#39;t see tutorials that explains in details using java","body":"<p>You may wish to consider the following, even though it may appear to be the wrong order (it may overcome perplexing issues with the dreaded Expected/Found issue that is often associated with trying to adapt room's entities to cater for an existing database)</p>\n<ul>\n<li>If you already have a populated pre-packaged database you may find it easier to add steps to create the Room expected tables, copy the data from the existing tables and drop them afterwards <em>(still probably less perplexing than trying to ascertain the nuances of Room)</em>.</li>\n</ul>\n<ol>\n<li>Design and create your schema for the database.</li>\n<li>Using the schema create the entities for Room, that is a class annotated with @Entity per table.</li>\n<li>Create an appropriate <code>@Database</code> annotated abstract class that includes ALL of the @Entity annotated class in the <code>entities =</code> parameter of the <code>@Database</code> annotation.</li>\n<li>Compile (successfully) the project.</li>\n<li>In the Android View of Android Studio look at the generated java there will be a class that has the same names as the <code>@Database</code> annotated class but suffixed with <strong>_Impl</strong>. In this class there will be a method called <strong>createAllTables</strong> and you will see an <code>execSQL</code> statement for each table and any supplementary indexes\n<ul>\n<li>note if you use Views then you need to create the <code>@View</code> annotated classes and follow the similar procedure. However, Views are not common though and hence they have not been included.</li>\n</ul>\n</li>\n<li><strong>Use the SQL from the <code>execSQ</code>L statements</strong> to create your tables in favourite SQL tool (e.g. DB Browser for SQLite, Navicat, DBeaver).</li>\n<li>Populate the database using your SQLite Tool.</li>\n<li>Close and Save the database (it is suggested that you then Open the database and check that it is as expected and then Close and Save the database again (some tools sometimes don't close the database))</li>\n<li>Create the assets folder in your project.</li>\n<li>Copy the saved database file into the assets folder.</li>\n<li>add/amend where you undertake the Room's build method, to precede it with <code>.createFromAsset(&quot;the_database_file_name_including_extension_if_one&quot;)</code>\n<ul>\n<li>this tells Room, when building the database, if the database does not exist, to copy the database from the assets folder.</li>\n</ul>\n</li>\n<li>Save and compile and then the App.</li>\n</ol>\n<p>Following the above order, especially using Room to generate the SQL, will circumvent having to understand the nuances of Room in regards to column type affinities and column constraints.</p>\n<ul>\n<li>for example you CANNOT have a column type that is not INTEGER, TEXT, REAL or BLOB.</li>\n</ul>\n<p>Here's an example with a single table named Table1 that has 6 columns</p>\n<p>The <strong>Table1</strong> @Entity annotated class :-</p>\n<pre><code>@Entity /*(\n        primaryKeys = {&quot;column_name&quot;,&quot;more_columns_for_a_composite_primary&quot;},\n        tableName = &quot;alternative_table_name&quot;\n)*/\nclass Table1 {\n    /* in ROOM every table MUST have a column either annotated with @PrimaryKey\n        or have a primary key specified in the primaryKeys parameter of the @Entity annotation\n     */\n    @PrimaryKey\n    Long id = null; /* this will be a typically id column that will, if no value is specified, be generated (must be Long not long) */\n    String text_column;\n    @NonNull\n    String notnull_text_column;\n    double real_column;\n    byte[] blob_column;\n    @NonNull\n    @ColumnInfo(index = true)\n    double notnull_real_column_also_indexed;\n\n}\n</code></pre>\n<p>The @Database annotated class, <strong>TheDatabase</strong>,including singleton for getting an instance.</p>\n<pre><code>@Database(entities = {Table1.class}, version = 1, exportSchema = false)\nabstract class TheDatabase extends RoomDatabase {\n\n   private volatile static TheDatabase instance = null;\n\n   public static TheDatabase getInstance(Context context) {\n      if (instance == null) {\n         instance = Room.databaseBuilder(context,TheDatabase.class,&quot;the_database.db&quot;)\n                 .allowMainThreadQueries() /* for convenience and brevity */\n                 .createFromAsset(&quot;the_database.db&quot;)\n                 .build();\n      }\n      return instance;\n   }\n}\n</code></pre>\n<p>With the above, the project can be compiled (Ctrl+F9), and then the generated java associated with the @Database annotated class can be located e.g.</p>\n<p><a href=\"https://i.stack.imgur.com/7mM5H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7mM5H.png\" alt=\"enter image description here\" /></a></p>\n<p>Within the class there will be a method name createAllTables :-</p>\n<pre><code>@SuppressWarnings({&quot;unchecked&quot;, &quot;deprecation&quot;})\npublic final class TheDatabase_Impl extends TheDatabase {\n  @Override\n  protected SupportSQLiteOpenHelper createOpenHelper(DatabaseConfiguration configuration) {\n    final SupportSQLiteOpenHelper.Callback _openCallback = new RoomOpenHelper(configuration, new RoomOpenHelper.Delegate(1) {\n      @Override\n      public void createAllTables(SupportSQLiteDatabase _db) {\n        _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `Table1` (`id` INTEGER, `text_column` TEXT, `notnull_text_column` TEXT NOT NULL, `real_column` REAL NOT NULL, `blob_column` BLOB, `notnull_real_column_also_indexed` REAL NOT NULL, PRIMARY KEY(`id`))&quot;);\n        _db.execSQL(&quot;CREATE INDEX IF NOT EXISTS `index_Table1_notnull_real_column_also_indexed` ON `Table1` (`notnull_real_column_also_indexed`)&quot;);\n        _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER PRIMARY KEY,identity_hash TEXT)&quot;);\n        _db.execSQL(&quot;INSERT OR REPLACE INTO room_master_table (id,identity_hash) VALUES(42, 'a6ca75e8ee6037ad13c258cdc0405ef1')&quot;);\n      }\n\n      @Override\n      public void dropAllTables(SupportSQLiteDatabase _db) {\n        _db.execSQL(&quot;DROP TABLE IF EXISTS `Table1`&quot;);\n        if (mCallbacks != null) {\n          for (int _i = 0, _size = mCallbacks.size(); _i &lt; _size; _i++) {\n            mCallbacks.get(_i).onDestructiveMigration(_db);\n          }\n        }\n      }\n      ....\n</code></pre>\n<p>As can be seen there is an <code>execSQ</code>L for the table1 table, another for the index (as index = true was specified in the <code>@ColumnInfo</code> annotation).</p>\n<ul>\n<li><p>the room_master_table is used by room to store a hash of the schema, this is not needed, and should NOT be created in the pre-packaged database that will be copied into the assets folder.</p>\n<ul>\n<li>The hash will change if the schema changes (the @Entity annotated classes)</li>\n</ul>\n</li>\n<li><p><strong>Nuances</strong></p>\n<ul>\n<li>if you look closely, you will see that both the real_column and the notnull_real_column have the NOT NULL constraint, but only the latter has the <code>@NonNull</code> annotation. This is because double, is a primitive and ALWAYS has a value, so Room implicitly applies the NOT NULL constraint. If the NOT NULL constraint is not coded when creating the pre-packaged database then after the asset has been copied, when running the App, an exception will occur as the database that was found (the one copied from the asset) will be different (in Room's view) from what Room expected (the schema according to the @Entity annotated classed defined in the list of entities in the @Database annotation). <strong>Hence</strong>, why it is suggested to create the schema via room, extract the generated SQL and use this to create the pre-packaged database. This ensures that the database schema is as expected.</li>\n<li>Note this is just <strong>one</strong> example of the nuances</li>\n</ul>\n</li>\n</ul>\n<p><strong>Continuing with a working example</strong></p>\n<p>One thing that often trips new users of SQLite and also Room is that when you instantiate the Database class, is that, it does not then create or open the database. It is not until an attempt is made to access the database (changing or extracting data from the database) that the database is opened and if necessary created and in the case of a pre-populated database copied from the asset (or file, normally the former).</p>\n<p>As such, in preparation, for this a (can be one or more), an interface or abstract class annotated with <code>@Dao</code> is created. In this case <strong>AllDAO</strong> as per:-</p>\n<pre><code>@Dao\nabstract class AllDAO {\n    @Insert\n    abstract long insert(Table1 table1);\n    @Query(&quot;SELECT * FROM table1&quot;)\n    abstract List&lt;Table1&gt; getAllTable1s();\n}\n</code></pre>\n<ul>\n<li>using either the <code>insert</code> or the <code>getAllTable1s</code> would access the database.</li>\n</ul>\n<p>The <code>@Dao</code> annotated class(es) have to be known/defined to Room, typically  the @Database class includes this so the <strong>TheDatabase</strong> class could then be:-</p>\n<pre><code>@Database(entities = {Table1.class}, version = 1, exportSchema = false)\nabstract class TheDatabase extends RoomDatabase {\n   abstract AllDAO getAllDAO(); //&lt;&lt;&lt;&lt;&lt; ADDED to allow use of the database\n   private volatile static TheDatabase instance = null;\n\n   public static TheDatabase getInstance(Context context) {\n      if (instance == null) {\n         instance = Room.databaseBuilder(context,TheDatabase.class,&quot;the_database.db&quot;)\n                 .allowMainThreadQueries() /* for convenience and brevity */\n                 .createFromAsset(&quot;the_database.db&quot;)\n                 .build();\n      }\n      return instance;\n   }\n}\n</code></pre>\n<p>So the App is virtually ready (using it in an activity will be dealt with later).</p>\n<p>Now the pre-packaged database can be perpared/built using an SQLite tool (Navicat for SQLite has been used in this case, it shouldn't matter which).</p>\n<p>A connection is made and opened, this detailing where the database file will be stored. (see the tool's help if needed). In this case the database is named <code>SOQuestions</code> (already exists) :-</p>\n<p><a href=\"https://i.stack.imgur.com/nOWru.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nOWru.png\" alt=\"enter image description here\" /></a></p>\n<p>New Query is clicked, and the SQL for the user defined tables is pasted, as well as the indexes. e.g.:-</p>\n<p><a href=\"https://i.stack.imgur.com/UayF7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UayF7.png\" alt=\"enter image description here\" /></a></p>\n<p>So the table(s) and indexes now exist but are unpopulated. So now to populate the database by inserting some records. A query will be used (in this case as it's only an example queries won't be saved, they could if desired).</p>\n<p>So the existing SQL is deleted and replaced with (not deletes all rows, so it is rerunnable) and then run:-</p>\n<p><a href=\"https://i.stack.imgur.com/sHNhM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sHNhM.png\" alt=\"enter image description here\" /></a></p>\n<p>The resultant data being :-</p>\n<p><a href=\"https://i.stack.imgur.com/mbqnH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mbqnH.png\" alt=\"enter image description here\" /></a></p>\n<p>The database should be saved. It is suggested that the database/connection is closed and then reopened to check that the data has been saved and then finally closed again (this was done).</p>\n<p>The database is now ready to be copied into the assets folder (which currently doesn't exist). So create the assets folder in the project (back to Android Studio). File/Directory was used to select src\\main\\assets :-</p>\n<p><a href=\"https://i.stack.imgur.com/emA5r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/emA5r.png\" alt=\"enter image description here\" /></a></p>\n<p>to get :-</p>\n<p><a href=\"https://i.stack.imgur.com/pWerV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pWerV.png\" alt=\"enter image description here\" /></a></p>\n<p>The file is copied, from Windows Explorer (right click on the file and copy)</p>\n<p><a href=\"https://i.stack.imgur.com/yvCOB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yvCOB.png\" alt=\"enter image description here\" /></a></p>\n<p>and pasted (right click on the assets folder in Andriod Studio and Paste), renaming it to the_database.db (the database name, as per the <code>createFromAsset</code> <em>(could use <strong>soquestions.db</strong> as the asset file name)</em>)</p>\n<p><a href=\"https://i.stack.imgur.com/j7OcV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j7OcV.png\" alt=\"enter image description here\" /></a></p>\n<p>resulting in :-</p>\n<p><a href=\"https://i.stack.imgur.com/kaPIU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kaPIU.png\" alt=\"enter image description here\" /></a></p>\n<p>Now to running the App by using the database in an activity (note that for brevity and convenience this is run on the main thread).</p>\n<p>The activity code :-</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    TheDatabase dbInstance;\n    AllDAO dao;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        dbInstance = TheDatabase.getInstance(this); /* get DB Instance */\n        dao = dbInstance.getAllDAO(); /* get the appropriate Dao */\n        logAllRowsFromTable1(&quot;PRENEWDATA&quot;); /* WILL INITIATE THE ASSET COPY (if DB does not exist) */\n        Table1 newTable1Row = new Table1();\n        newTable1Row.text_column = &quot;a new row&quot;;\n        newTable1Row.blob_column = new byte[30];\n        newTable1Row.notnull_text_column = &quot; the new nottnull_text_column&quot;;\n        newTable1Row.real_column = 4444.55555;\n        newTable1Row.notnull_real_column_also_indexed = 7777.8888;\n        dao.insert(newTable1Row); /* IF NOT INITIATED ABOVE WILL INITIATE THE ASSET COPY (if DB does not exist)*/\n        logAllRowsFromTable1(&quot;POSTNEWDATA&quot;);\n    }\n\n    void logAllRowsFromTable1(String suffix) {\n        for (Table1 t: dao.getAllTable1s()) {\n            Log.d(&quot;DB-&quot; + suffix,\n                    &quot;ID is &quot; + t.real_column\n                    + &quot;\\n\\tTEXT_COLUMN is &quot; + t.text_column\n                    + &quot;\\n\\t NOTNULL_TEXT_COLUMN is &quot; + t.notnull_text_column\n                    + &quot;\\n\\t REAL_COLUMN is &quot; + t.real_column\n                    + &quot;\\n\\t NOTNULL_REAL_COLUMN... is &quot; + t.notnull_real_column_also_indexed\n                    /* not doing the blob so as not to complicate matters */\n            );\n        }\n    }\n</code></pre>\n<p>This will first output some of the data, for all rows, from the pre-packaged database to the log.\nIt will then add a new run (each run, it is only a demo/example) and then output some of the data for all rows, from the updated (new row) database.</p>\n<p>e.g. :-</p>\n<pre><code>2022-04-22 11:00:43.689 D/DB-PRENEWDATA: ID is 10.3333\n        TEXT_COLUMN is some text\n         NOTNULL_TEXT_COLUMN is some notnull text\n         REAL_COLUMN is 10.3333\n         NOTNULL_REAL_COLUMN... is 3.1\n2022-04-22 11:00:43.689 D/DB-PRENEWDATA: ID is 11.3333\n        TEXT_COLUMN is null\n         NOTNULL_TEXT_COLUMN is more not null text\n         REAL_COLUMN is 11.3333\n         NOTNULL_REAL_COLUMN... is 4.1\n         \n         \n2022-04-22 11:00:43.692 D/DB-POSTNEWDATA: ID is 10.3333\n        TEXT_COLUMN is some text\n         NOTNULL_TEXT_COLUMN is some notnull text\n         REAL_COLUMN is 10.3333\n         NOTNULL_REAL_COLUMN... is 3.1\n2022-04-22 11:00:43.692 D/DB-POSTNEWDATA: ID is 11.3333\n        TEXT_COLUMN is null\n         NOTNULL_TEXT_COLUMN is more not null text\n         REAL_COLUMN is 11.3333\n         NOTNULL_REAL_COLUMN... is 4.1\n2022-04-22 11:00:43.692 D/DB-POSTNEWDATA: ID is 4444.55555\n        TEXT_COLUMN is a new row\n         NOTNULL_TEXT_COLUMN is  the new nottnull_text_column\n         REAL_COLUMN is 4444.55555\n         NOTNULL_REAL_COLUMN... is 7777.8888\n</code></pre>\n<ul>\n<li>blank lines added to distinguish between the two sets of output</li>\n</ul>\n<p>Android Studio's <strong>App Inspection</strong> can be used to see the actual data:-</p>\n<p><a href=\"https://i.stack.imgur.com/LAluc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LAluc.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":1318207,"reputation":997,"user_id":1264616,"accept_rate":75,"display_name":"Sepultura"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697620683,"creation_date":1697620683,"answer_id":77315012,"question_id":71954872,"body_markdown":"With the new room versions you can now also access the database inside the RoomDatabase.Callbacks(), so the easiest way would be to just register an onCreate callback in the database builder and execute a SQL statement. E.g.:\r\n\r\n```\r\nRoom.databaseBuilder(\r\n  context = appContext,\r\n  klass = MyDatabase::class.java,\r\n  name = &quot;my_database&quot;\r\n).addCallback(object : RoomDatabase.Callback() {\r\n    override fun onCreate(db: SupportSQLiteDatabase) {\r\n        super.onCreate(db)\r\n        db.execSQL(&quot;INSERT INTO my_table (id, value) VALUES (1, &#39;hello&#39;)&quot;)\r\n    }\r\n}).build()\r\n```\r\nFor some simple insert statements, this should be sufficient, however if you have a lot of data to be pre-populated, this might not be suitable. Alternative would be to create you DB from a DB file (like MikeT already described here: https://stackoverflow.com/a/71960555/1264616)","title":"How to prepopulate database using Room? I don&#39;t see tutorials that explains in details using java","body":"<p>With the new room versions you can now also access the database inside the RoomDatabase.Callbacks(), so the easiest way would be to just register an onCreate callback in the database builder and execute a SQL statement. E.g.:</p>\n<pre><code>Room.databaseBuilder(\n  context = appContext,\n  klass = MyDatabase::class.java,\n  name = &quot;my_database&quot;\n).addCallback(object : RoomDatabase.Callback() {\n    override fun onCreate(db: SupportSQLiteDatabase) {\n        super.onCreate(db)\n        db.execSQL(&quot;INSERT INTO my_table (id, value) VALUES (1, 'hello')&quot;)\n    }\n}).build()\n</code></pre>\n<p>For some simple insert statements, this should be sufficient, however if you have a lot of data to be pre-populated, this might not be suitable. Alternative would be to create you DB from a DB file (like MikeT already described here: <a href=\"https://stackoverflow.com/a/71960555/1264616\">https://stackoverflow.com/a/71960555/1264616</a>)</p>\n"}],"owner":{"account_id":11682198,"reputation":21,"user_id":8553462,"display_name":"01slkd3u"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1858,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1697620683,"creation_date":1650545767,"question_id":71954872,"body_markdown":"I checked this link: https://developer.android.com/training/data-storage/room/prepopulate\r\nand I don&#39;t know the step by step of doing it.\r\n\r\nI don&#39;t know what will I write in the db file, I still need some examples.\r\nI don&#39;t know how to access the prepopulated db, like what functions/methods will I use. I really have no idea. Please help.\r\n\r\nMost tutorials are done in kotlin.","title":"How to prepopulate database using Room? I don&#39;t see tutorials that explains in details using java","body":"<p>I checked this link: <a href=\"https://developer.android.com/training/data-storage/room/prepopulate\" rel=\"nofollow noreferrer\">https://developer.android.com/training/data-storage/room/prepopulate</a>\nand I don't know the step by step of doing it.</p>\n<p>I don't know what will I write in the db file, I still need some examples.\nI don't know how to access the prepopulated db, like what functions/methods will I use. I really have no idea. Please help.</p>\n<p>Most tutorials are done in kotlin.</p>\n"},{"tags":["java","spring","spring-mvc","twilio"],"comments":[{"owner":{"account_id":1671271,"reputation":1283,"user_id":1537706,"accept_rate":59,"display_name":"CrazySabbath"},"score":0,"creation_date":1542287662,"post_id":53320260,"comment_id":93520587,"body_markdown":"`does not get me the from and body that i require.` Can you post what you do get and what you expect to get?","body":"<code>does not get me the from and body that i require.</code> Can you post what you do get and what you expect to get?"},{"owner":{"account_id":142261,"reputation":1,"user_id":492293,"accept_rate":85,"display_name":"Gandalf"},"score":0,"creation_date":1542289276,"post_id":53320260,"comment_id":93521482,"body_markdown":"the from and body are what twilio api provides. They share the name across the api i guess but the variables in my case are empty.","body":"the from and body are what twilio api provides. They share the name across the api i guess but the variables in my case are empty."},{"owner":{"account_id":1671271,"reputation":1283,"user_id":1537706,"accept_rate":59,"display_name":"CrazySabbath"},"score":0,"creation_date":1542289937,"post_id":53320260,"comment_id":93521920,"body_markdown":"Is body really a requestParam? Not a RequestBody? It&#39;s hard to tell without seeing twilio api endpoint.","body":"Is body really a requestParam? Not a RequestBody? It&#39;s hard to tell without seeing twilio api endpoint."},{"owner":{"account_id":31213,"reputation":2933,"user_id":85556,"accept_rate":82,"display_name":"Stefano Ricciardi"},"score":0,"creation_date":1542291969,"post_id":53320260,"comment_id":93523276,"body_markdown":"Are you sure you want to share your account and auth token in clear?","body":"Are you sure you want to share your account and auth token in clear?"}],"answers":[{"tags":[],"owner":{"account_id":142261,"reputation":1,"user_id":492293,"accept_rate":85,"display_name":"Gandalf"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1542290620,"creation_date":1542290620,"answer_id":53321206,"question_id":53320260,"body_markdown":"Solved it this way\r\n\r\n        @ResponseBody\r\n    \t@RequestMapping(value = { &quot;/wizard&quot; }, method = RequestMethod.POST)\r\n    \tpublic String wizardSave(@RequestParam(&quot;Body&quot;) String message, \r\n        @RequestParam(&quot;From&quot;) String from) {\t\r\n\r\n\r\nand to send\r\n\r\n      Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\r\n        \t\t        Message messagem = Message.creator(\r\n        \t\t        \t\t new com.twilio.type.PhoneNumber(from),\r\n        \t\t                 new com.twilio.type.PhoneNumber(&quot;whatsapp:+14155238886&quot;),\r\n        \t\t                &quot;Sent From one&quot;)\r\n        \t\t            .create();\r\n       System.out.println(messagem.getSid());","title":"Get number and body of a whatsapp message in twilio with java","body":"<p>Solved it this way</p>\n\n<pre><code>    @ResponseBody\n    @RequestMapping(value = { \"/wizard\" }, method = RequestMethod.POST)\n    public String wizardSave(@RequestParam(\"Body\") String message, \n    @RequestParam(\"From\") String from) {    \n</code></pre>\n\n<p>and to send</p>\n\n<pre><code>  Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\n                    Message messagem = Message.creator(\n                             new com.twilio.type.PhoneNumber(from),\n                             new com.twilio.type.PhoneNumber(\"whatsapp:+14155238886\"),\n                            \"Sent From one\")\n                        .create();\n   System.out.println(messagem.getSid());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15751044,"reputation":381,"user_id":11365594,"display_name":"Jasper"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697620651,"creation_date":1697620651,"answer_id":77315010,"question_id":53320260,"body_markdown":"try this\r\n\r\n       @PostMapping(value=&quot;/wizard&quot;,consumes = MediaType.APPLICATION_FORM_URLENCODED_VALUE)\r\n    public String wizardSave(@RequestBody MultiValueMap&lt;String, String&gt; data) {\r\n        String body= data.getFirst(&quot;Body&quot;);\r\n\r\n        System.out.prinln(&quot;Body :&quot;+body);\r\n\r\n        return body;\r\n    }\r\n\r\nHope this solution will be useful.","title":"Get number and body of a whatsapp message in twilio with java","body":"<p>try this</p>\n<pre><code>   @PostMapping(value=&quot;/wizard&quot;,consumes = MediaType.APPLICATION_FORM_URLENCODED_VALUE)\npublic String wizardSave(@RequestBody MultiValueMap&lt;String, String&gt; data) {\n    String body= data.getFirst(&quot;Body&quot;);\n\n    System.out.prinln(&quot;Body :&quot;+body);\n\n    return body;\n}\n</code></pre>\n<p>Hope this solution will be useful.</p>\n"}],"owner":{"account_id":142261,"reputation":1,"user_id":492293,"accept_rate":85,"display_name":"Gandalf"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":772,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697620651,"creation_date":1542287456,"question_id":53320260,"body_markdown":"I have a problem that i am trying to solve. I have this messages coming from WhatsApp that i am trying to reply using the Twilio SDK for java.\r\n\r\nThis is my code:\r\n\r\n    package com.boilerplate.controllers;\r\n\r\n    import java.util.List;\r\n    \r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.query.Query;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.stereotype.Repository;\r\n    import org.springframework.transaction.annotation.Transactional;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RequestMethod;\r\n    import org.springframework.web.bind.annotation.RequestParam;\r\n    import org.springframework.web.bind.annotation.ResponseBody;\r\n    \r\n    import com.twilio.Twilio;\r\n    import com.twilio.rest.api.v2010.account.Message;\r\n    \r\n    @Controller\r\n    @Repository\r\n    @Transactional\r\n    @RequestMapping(&quot;/boilerplate&quot;)\r\n    public class BoilerplateController {\r\n        public static final String ACCOUNT_SID = &quot;&quot;;\r\n        public static final String AUTH_TOKEN = &quot;&quot;;\r\n        @Autowired \r\n    \tprivate SessionFactory sessionFactory;\r\n        \r\n    \t@ResponseBody\r\n    \t@RequestMapping(value = { &quot;/wizard&quot; }, method = RequestMethod.POST)\r\n    \tpublic String wizardSave(@RequestParam String from,@RequestParam String body) {\t\r\n    \t\t\r\n    //\t\tString q1_field = &quot;0&quot;;\r\n    //\t\tString q2_field = &quot;0&quot;;\r\n    //\t\tString q3_field = &quot;0&quot;;\r\n    //\t\tString q4_field = &quot;0&quot;;\r\n    \tString undone = &quot;UNDONE&quot;;\r\n    //\t\tString status = &quot;&quot;;\r\n    \t\t\r\n    \t\tTwilio.init(ACCOUNT_SID, AUTH_TOKEN);\r\n            Message message = Message.creator(\r\n            \t\t new com.twilio.type.PhoneNumber(from),\r\n                     new com.twilio.type.PhoneNumber(&quot;whatsapp:+14155238886&quot;),\r\n                    &quot;Hello there!&quot;)\r\n                .create();\r\n            return undone;\r\n            \r\n    \t\r\n    }\r\n    }\r\n\r\nFor some reason this code\r\n\r\n    @ResponseBody\r\n        @RequestMapping(value = { &quot;/wizard&quot; }, method = RequestMethod.POST)\r\n        public String wizardSave(@RequestParam String from,@RequestParam String body) { \r\n\r\ndoes not get me the from and body that i require.\r\n\r\nI am using spring and i have used the annotation @RequestParam\r\n\r\nI cannot get the from and the body. Why?.\r\n\r\nNB: The only i error i get is from Twilio saying i am unable to connect.\r\n\r\n","title":"Get number and body of a whatsapp message in twilio with java","body":"<p>I have a problem that i am trying to solve. I have this messages coming from WhatsApp that i am trying to reply using the Twilio SDK for java.</p>\n\n<p>This is my code:</p>\n\n<pre><code>package com.boilerplate.controllers;\n\nimport java.util.List;\n\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.query.Query;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.transaction.annotation.Transactional;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\nimport com.twilio.Twilio;\nimport com.twilio.rest.api.v2010.account.Message;\n\n@Controller\n@Repository\n@Transactional\n@RequestMapping(\"/boilerplate\")\npublic class BoilerplateController {\n    public static final String ACCOUNT_SID = \"\";\n    public static final String AUTH_TOKEN = \"\";\n    @Autowired \n    private SessionFactory sessionFactory;\n\n    @ResponseBody\n    @RequestMapping(value = { \"/wizard\" }, method = RequestMethod.POST)\n    public String wizardSave(@RequestParam String from,@RequestParam String body) { \n\n//      String q1_field = \"0\";\n//      String q2_field = \"0\";\n//      String q3_field = \"0\";\n//      String q4_field = \"0\";\n    String undone = \"UNDONE\";\n//      String status = \"\";\n\n        Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\n        Message message = Message.creator(\n                 new com.twilio.type.PhoneNumber(from),\n                 new com.twilio.type.PhoneNumber(\"whatsapp:+14155238886\"),\n                \"Hello there!\")\n            .create();\n        return undone;\n\n\n}\n}\n</code></pre>\n\n<p>For some reason this code</p>\n\n<pre><code>@ResponseBody\n    @RequestMapping(value = { \"/wizard\" }, method = RequestMethod.POST)\n    public String wizardSave(@RequestParam String from,@RequestParam String body) { \n</code></pre>\n\n<p>does not get me the from and body that i require.</p>\n\n<p>I am using spring and i have used the annotation @RequestParam</p>\n\n<p>I cannot get the from and the body. Why?.</p>\n\n<p>NB: The only i error i get is from Twilio saying i am unable to connect.</p>\n"},{"tags":["java","immutability"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1697620684,"post_id":77314992,"comment_id":136301631,"body_markdown":"Does this answer your question? [How to test if a List&lt;? extends Object&gt; is an UnmodifableList?](https://stackoverflow.com/questions/8364856/how-to-test-if-a-list-extends-object-is-an-unmodifablelist)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/8364856/how-to-test-if-a-list-extends-object-is-an-unmodifablelist\">How to test if a List&lt;? extends Object&gt; is an UnmodifableList?</a>"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1697620774,"post_id":77314992,"comment_id":136301644,"body_markdown":"There&#39;s the `ImmutableMap` interface in [Guava](https://github.com/google/guava); but this makes you dependent on a third-party library","body":"There&#39;s the <code>ImmutableMap</code> interface in <a href=\"https://github.com/google/guava\" rel=\"nofollow noreferrer\">Guava</a>; but this makes you dependent on a third-party library"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1697620874,"post_id":77314992,"comment_id":136301667,"body_markdown":"Although the duplicate talks about `List.of()`, the answers apply for all Java collection types from the standard API.","body":"Although the duplicate talks about <code>List.of()</code>, the answers apply for all Java collection types from the standard API."},{"owner":{"account_id":29578838,"reputation":21,"user_id":22669083,"display_name":"MartinK"},"score":0,"creation_date":1697621894,"post_id":77314992,"comment_id":136301870,"body_markdown":"@experiment unit: no. I want to let the user of the getData method know that he cannot modify the data.","body":"@experiment unit: no. I want to let the user of the getData method know that he cannot modify the data."},{"owner":{"account_id":29578838,"reputation":21,"user_id":22669083,"display_name":"MartinK"},"score":0,"creation_date":1697622850,"post_id":77314992,"comment_id":136302063,"body_markdown":"@knittl: thanks, This might be the best option. Although: I don&#39;t like the idea of copying possibly large collections.","body":"@knittl: thanks, This might be the best option. Although: I don&#39;t like the idea of copying possibly large collections."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1697630377,"post_id":77314992,"comment_id":136303486,"body_markdown":"Then why not create your own implementation/wrapper of an ImmutableMap? Only provide a way to read values but not modify the data","body":"Then why not create your own implementation/wrapper of an ImmutableMap? Only provide a way to read values but not modify the data"},{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":2,"creation_date":1697636415,"post_id":77314992,"comment_id":136304864,"body_markdown":"About the &quot;Why&quot; question: Because at the time the Java collections API was invented (end of the 1990&#39;s), the developers of the JDK did not design it with immutability in mind. And now it cannot be changed without massively breaking backward compatibility.","body":"About the &quot;Why&quot; question: Because at the time the Java collections API was invented (end of the 1990&#39;s), the developers of the JDK did not design it with immutability in mind. And now it cannot be changed without massively breaking backward compatibility."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1697642889,"post_id":77314992,"comment_id":136306441,"body_markdown":"I remember reading a detailed explanation of this by a Java architect.  Having a parallel class hierarchy (Map/ImmutableMap, Set/IImmutableSet, List/ImmutableList, etc.) is very messy.  It’s simply not worth the trouble.","body":"I remember reading a detailed explanation of this by a Java architect.  Having a parallel class hierarchy (Map/ImmutableMap, Set/IImmutableSet, List/ImmutableList, etc.) is very messy.  It’s simply not worth the trouble."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1697661861,"post_id":77314992,"comment_id":136309653,"body_markdown":"[*Google Guava*](https://github.com/google/guava) and [*Eclipse Collections*](https://eclipse.dev/collections/) both provide types for immutable maps. Either gives you the type-safety protection you seek.","body":"<a href=\"https://github.com/google/guava\" rel=\"nofollow noreferrer\"><i>Google Guava</i></a> and <a href=\"https://eclipse.dev/collections/\" rel=\"nofollow noreferrer\"><i>Eclipse Collections</i></a> both provide types for immutable maps. Either gives you the type-safety protection you seek."}],"owner":{"account_id":29578838,"reputation":21,"user_id":22669083,"display_name":"MartinK"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1697620821,"answer_count":0,"score":0,"last_activity_date":1697620508,"creation_date":1697620508,"question_id":77314992,"body_markdown":"java.util.Collections has the unmodifiableMap method, which creates a view of the map, making it impossible to alter the map.\r\n\r\nBut why isn&#39;t there an ImmutableMap type? As the unmodifiableMap return is declared to be a simple Map, one could write this code:\r\n\r\n```\r\nclass SomeClass {\r\n    private Map&lt;String, Object&gt; data = new HashMap&lt;&gt;();\r\n    public Map&lt;String, Integer&gt; getData () {\r\n        return Collections.unmodifiableMap(data);\r\n    }\r\n}\r\n\r\n```\r\nelsewhere:\r\n\r\n    Map&lt;String, Object&gt; data = someClass.getData();\r\n    // no compiler warning here, but an UnsupportedOperationException at runtime\r\n    data.put(&quot;count&quot;, 17);\r\n\r\n\r\nWhat is the best way to deal with this?\r\n\r\n\r\nWhy is such a type not in java.util? My expectation was to have such a type, making it clear that the value, returned from the getData method is not mutable. As there would be no put or any other method which will alter the value the code above would not compile.\r\n\r\nDo I miss something here?","title":"How to return an unmodifiable Map in Java?","body":"<p>java.util.Collections has the unmodifiableMap method, which creates a view of the map, making it impossible to alter the map.</p>\n<p>But why isn't there an ImmutableMap type? As the unmodifiableMap return is declared to be a simple Map, one could write this code:</p>\n<pre><code>class SomeClass {\n    private Map&lt;String, Object&gt; data = new HashMap&lt;&gt;();\n    public Map&lt;String, Integer&gt; getData () {\n        return Collections.unmodifiableMap(data);\n    }\n}\n\n</code></pre>\n<p>elsewhere:</p>\n<pre><code>Map&lt;String, Object&gt; data = someClass.getData();\n// no compiler warning here, but an UnsupportedOperationException at runtime\ndata.put(&quot;count&quot;, 17);\n</code></pre>\n<p>What is the best way to deal with this?</p>\n<p>Why is such a type not in java.util? My expectation was to have such a type, making it clear that the value, returned from the getData method is not mutable. As there would be no put or any other method which will alter the value the code above would not compile.</p>\n<p>Do I miss something here?</p>\n"},{"tags":["java","out-of-memory","ulimit"],"comments":[{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":3,"creation_date":1416395001,"post_id":27015226,"comment_id":42555984,"body_markdown":"What is your `-Xmx` set to?","body":"What is your <code>-Xmx</code> set to?"},{"owner":{"account_id":1066775,"reputation":4941,"user_id":1067124,"accept_rate":75,"display_name":"Benedikt K&#246;ppel"},"score":0,"creation_date":1416395368,"post_id":27015226,"comment_id":42556208,"body_markdown":"Locally, I have `-Xmx1024m`. When I set it to `-Xmx2048m`, I still get an OutOfMemoryError after 2027 DefaultUdpTransportMappings are started. For the production process on the server, I set `-Xmx12288m -Xms12288m`. Memory dump of the production process is 58MB.","body":"Locally, I have <code>-Xmx1024m</code>. When I set it to <code>-Xmx2048m</code>, I still get an OutOfMemoryError after 2027 DefaultUdpTransportMappings are started. For the production process on the server, I set <code>-Xmx12288m -Xms12288m</code>. Memory dump of the production process is 58MB."},{"owner":{"account_id":2417243,"reputation":11672,"user_id":2111035,"display_name":"Chris K"},"score":2,"creation_date":1416395406,"post_id":27015226,"comment_id":42556232,"body_markdown":"run again and attach jconsole (comes with the jdk) to the running process; if you add the visual gc plugin to it then it will show you the sizes and amount of allocations in each heap region.","body":"run again and attach jconsole (comes with the jdk) to the running process; if you add the visual gc plugin to it then it will show you the sizes and amount of allocations in each heap region."},{"owner":{"account_id":25466,"reputation":36566,"user_id":65464,"accept_rate":93,"display_name":"Erich Kitzmueller"},"score":2,"creation_date":1416396035,"post_id":27015226,"comment_id":42556561,"body_markdown":"possible duplicate of [Java: Unable to create new native thread](http://stackoverflow.com/questions/5253072/java-unable-to-create-new-native-thread)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/5253072/java-unable-to-create-new-native-thread\">Java: Unable to create new native thread</a>"},{"owner":{"account_id":1066775,"reputation":4941,"user_id":1067124,"accept_rate":75,"display_name":"Benedikt K&#246;ppel"},"score":0,"creation_date":1416396386,"post_id":27015226,"comment_id":42556764,"body_markdown":"I couldn&#39;t find out how to add the VisualGC in the jconsole, but I found it in `jvisualvm`. This is how it looks like: http://i.imgur.com/OvIko5w.png.","body":"I couldn&#39;t find out how to add the VisualGC in the jconsole, but I found it in <code>jvisualvm</code>. This is how it looks like: <a href=\"http://i.imgur.com/OvIko5w.png\" rel=\"nofollow noreferrer\">i.imgur.com/OvIko5w.png</a>."},{"owner":{"account_id":1066775,"reputation":4941,"user_id":1067124,"accept_rate":75,"display_name":"Benedikt K&#246;ppel"},"score":0,"creation_date":1416396654,"post_id":27015226,"comment_id":42556911,"body_markdown":"ammoQ: The link mentiones that I hit the limit for open file descriptors. I tried printing the number of open FDs with the code from here: http://stackoverflow.com/a/16361505/1067124. I get the `OutOfMemoryError` when I have 2098 open FDs. ulimit for open FDs is 2560.","body":"ammoQ: The link mentiones that I hit the limit for open file descriptors. I tried printing the number of open FDs with the code from here: <a href=\"http://stackoverflow.com/a/16361505/1067124\">stackoverflow.com/a/16361505/1067124</a>. I get the <code>OutOfMemoryError</code> when I have 2098 open FDs. ulimit for open FDs is 2560."},{"owner":{"account_id":25466,"reputation":36566,"user_id":65464,"accept_rate":93,"display_name":"Erich Kitzmueller"},"score":1,"creation_date":1416398230,"post_id":27015226,"comment_id":42557817,"body_markdown":"@BenediktK&#246;ppel you should also read the linked blog entry http://blog.egilh.com/2006/06/2811aspx.html","body":"@BenediktK&#246;ppel you should also read the linked blog entry <a href=\"http://blog.egilh.com/2006/06/2811aspx.html\" rel=\"nofollow noreferrer\">blog.egilh.com/2006/06/2811aspx.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":5959417,"reputation":652,"user_id":4685029,"display_name":"Erwin de Gier"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697620232,"creation_date":1426764695,"answer_id":29143465,"question_id":27015226,"body_markdown":"The `java.lang.OutOfMemoryError: unable to create new native thread` is a confusing message, since it not really related to running out of heap memory. Therefore the heap size settings (`Xmx` and `Xms`) have no influence on this case. \r\n\r\nThe exception is thrown when a new operating process cannot be created for your application, either because a maximum number of processes/open file handles is reached or there is no memory left on the system to create a new thread. \r\n\r\nRegarding the `ulimit` settings, it can be either the number of file descriptors, the stack size or the number of processes. The stack size is a per thread number. The number of threads times the stack size will be the amount of used memory.\r\n\r\nUsually, as it is in your case, getting this exception means your application is not closing its threads properly and keeps hold of system processes. This is why closing the transport fixed the issue for you.","title":"OutOfMemoryError even though enough free memory","body":"<p>The <code>java.lang.OutOfMemoryError: unable to create new native thread</code> is a confusing message, since it not really related to running out of heap memory. Therefore the heap size settings (<code>Xmx</code> and <code>Xms</code>) have no influence on this case.</p>\n<p>The exception is thrown when a new operating process cannot be created for your application, either because a maximum number of processes/open file handles is reached or there is no memory left on the system to create a new thread.</p>\n<p>Regarding the <code>ulimit</code> settings, it can be either the number of file descriptors, the stack size or the number of processes. The stack size is a per thread number. The number of threads times the stack size will be the amount of used memory.</p>\n<p>Usually, as it is in your case, getting this exception means your application is not closing its threads properly and keeps hold of system processes. This is why closing the transport fixed the issue for you.</p>\n"}],"owner":{"account_id":1066775,"reputation":4941,"user_id":1067124,"accept_rate":75,"display_name":"Benedikt K&#246;ppel"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1710,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1697620232,"creation_date":1416394949,"question_id":27015226,"body_markdown":"I am getting `java.lang.OutOfMemoryError` errors, even when I still have enough free RAM. The memory dumps I took were between 200MB and 1GB, while my server has 24GB of RAM. I set `-Xmx12288m -Xms12288m`.\r\n\r\nAlso, when I try to log in to the server, I frequently get\r\n\r\n    -bash: fork: retry: Resource temporarily unavailable\r\n    -bash: fork: retry: Resource temporarily unavailable\r\n    -bash: fork: retry: Resource temporarily unavailable\r\n    -bash: fork: retry: Resource temporarily unavailable\r\n    -bash: fork: Resource temporarily unavailable\r\n\r\nI narrowed it down to the code snippet below:\r\n\r\n    import org.snmp4j.Snmp;\r\n    import org.snmp4j.transport.DefaultUdpTransportMapping;\r\n\r\n        long n = 0;\r\n        while (true) {\r\n            DefaultUdpTransportMapping transport = null;\r\n            try {\r\n                transport = new DefaultUdpTransportMapping();\r\n                transport.listen();\r\n            } catch (IOException e) {\r\n                // TODO Auto-generated catch block\r\n                e.printStackTrace();\r\n    //      } finally {             // (*) I forgot this\r\n    //          transport.close();  // (*) I forgot this\r\n            }\r\n\r\n            n++;\r\n            double freeMemMB = Runtime.getRuntime().freeMemory() / 1024 / 1024;\r\n            System.out.println(&quot;Created &quot; + n\r\n                    + &quot; DefaultUdpTransportMappings. Free Mem (mb): &quot;\r\n                    + freeMemMB);\r\n        }\r\n\r\n\r\nOutput (on my developer machine, with `mvn exec:java`):\r\n\r\n    Created 2026 DefaultUdpTransportMappings. Free Mem (mb): 299.0\r\n    Created 2027 DefaultUdpTransportMappings. Free Mem (mb): 299.0\r\n    [WARNING] \r\n    java.lang.reflect.InvocationTargetException\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:606)\r\n        at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:293)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n    Caused by: java.lang.OutOfMemoryError: unable to create new native thread\r\n        at java.lang.Thread.start0(Native Method)\r\n        at java.lang.Thread.start(Thread.java:714)\r\n        at org.snmp4j.util.DefaultThreadFactory$WorkerThread.run(DefaultThreadFactory.java:91)\r\n        at org.snmp4j.transport.DefaultUdpTransportMapping.listen(DefaultUdpTransportMapping.java:168)\r\n        at App.main(App.java:19)\r\n        ... 6 more\r\n\r\n\r\nI found that I get the errors because I don&#39;t close the DefaultUdpTransportMapping. Enabling the `finally { ... }` block solves the problem. Now I&#39;m wondering which limits (if not the amount of free memory) I reached. The ulimits on the server are:\r\n\r\n    core file size          (blocks, -c) 0\r\n    data seg size           (kbytes, -d) unlimited\r\n    scheduling priority             (-e) 0\r\n    file size               (blocks, -f) unlimited\r\n    pending signals                 (-i) 191968\r\n    max locked memory       (kbytes, -l) 64\r\n    max memory size         (kbytes, -m) unlimited\r\n    open files                      (-n) 1024\r\n    pipe size            (512 bytes, -p) 8\r\n    POSIX message queues     (bytes, -q) 819200\r\n    real-time priority              (-r) 0\r\n    stack size              (kbytes, -s) 10240\r\n    cpu time               (seconds, -t) unlimited\r\n    max user processes              (-u) 1024\r\n    virtual memory          (kbytes, -v) unlimited\r\n    file locks                      (-x) unlimited\r\n\r\nOn my developer Mac:\r\n\r\n    -t: cpu time (seconds)              unlimited\r\n    -f: file size (blocks)              unlimited\r\n    -d: data seg size (kbytes)          unlimited\r\n    -s: stack size (kbytes)             8192\r\n    -c: core file size (blocks)         0\r\n    -v: address space (kbytes)          unlimited\r\n    -l: locked-in-memory size (kbytes)  unlimited\r\n    -u: processes                       709\r\n    -n: file descriptors                2560\r\n\r\nWhich limit did I reach?\r\n","title":"OutOfMemoryError even though enough free memory","body":"<p>I am getting <code>java.lang.OutOfMemoryError</code> errors, even when I still have enough free RAM. The memory dumps I took were between 200MB and 1GB, while my server has 24GB of RAM. I set <code>-Xmx12288m -Xms12288m</code>.</p>\n\n<p>Also, when I try to log in to the server, I frequently get</p>\n\n<pre><code>-bash: fork: retry: Resource temporarily unavailable\n-bash: fork: retry: Resource temporarily unavailable\n-bash: fork: retry: Resource temporarily unavailable\n-bash: fork: retry: Resource temporarily unavailable\n-bash: fork: Resource temporarily unavailable\n</code></pre>\n\n<p>I narrowed it down to the code snippet below:</p>\n\n<pre><code>import org.snmp4j.Snmp;\nimport org.snmp4j.transport.DefaultUdpTransportMapping;\n\n    long n = 0;\n    while (true) {\n        DefaultUdpTransportMapping transport = null;\n        try {\n            transport = new DefaultUdpTransportMapping();\n            transport.listen();\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n//      } finally {             // (*) I forgot this\n//          transport.close();  // (*) I forgot this\n        }\n\n        n++;\n        double freeMemMB = Runtime.getRuntime().freeMemory() / 1024 / 1024;\n        System.out.println(\"Created \" + n\n                + \" DefaultUdpTransportMappings. Free Mem (mb): \"\n                + freeMemMB);\n    }\n</code></pre>\n\n<p>Output (on my developer machine, with <code>mvn exec:java</code>):</p>\n\n<pre><code>Created 2026 DefaultUdpTransportMappings. Free Mem (mb): 299.0\nCreated 2027 DefaultUdpTransportMappings. Free Mem (mb): 299.0\n[WARNING] \njava.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:293)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.lang.OutOfMemoryError: unable to create new native thread\n    at java.lang.Thread.start0(Native Method)\n    at java.lang.Thread.start(Thread.java:714)\n    at org.snmp4j.util.DefaultThreadFactory$WorkerThread.run(DefaultThreadFactory.java:91)\n    at org.snmp4j.transport.DefaultUdpTransportMapping.listen(DefaultUdpTransportMapping.java:168)\n    at App.main(App.java:19)\n    ... 6 more\n</code></pre>\n\n<p>I found that I get the errors because I don't close the DefaultUdpTransportMapping. Enabling the <code>finally { ... }</code> block solves the problem. Now I'm wondering which limits (if not the amount of free memory) I reached. The ulimits on the server are:</p>\n\n<pre><code>core file size          (blocks, -c) 0\ndata seg size           (kbytes, -d) unlimited\nscheduling priority             (-e) 0\nfile size               (blocks, -f) unlimited\npending signals                 (-i) 191968\nmax locked memory       (kbytes, -l) 64\nmax memory size         (kbytes, -m) unlimited\nopen files                      (-n) 1024\npipe size            (512 bytes, -p) 8\nPOSIX message queues     (bytes, -q) 819200\nreal-time priority              (-r) 0\nstack size              (kbytes, -s) 10240\ncpu time               (seconds, -t) unlimited\nmax user processes              (-u) 1024\nvirtual memory          (kbytes, -v) unlimited\nfile locks                      (-x) unlimited\n</code></pre>\n\n<p>On my developer Mac:</p>\n\n<pre><code>-t: cpu time (seconds)              unlimited\n-f: file size (blocks)              unlimited\n-d: data seg size (kbytes)          unlimited\n-s: stack size (kbytes)             8192\n-c: core file size (blocks)         0\n-v: address space (kbytes)          unlimited\n-l: locked-in-memory size (kbytes)  unlimited\n-u: processes                       709\n-n: file descriptors                2560\n</code></pre>\n\n<p>Which limit did I reach?</p>\n"},{"tags":["java","json","debugging","visual-studio-code"],"comments":[{"owner":{"account_id":7874502,"reputation":523,"user_id":5950720,"accept_rate":0,"display_name":"bambino307"},"score":0,"creation_date":1517432051,"post_id":48490671,"comment_id":84098601,"body_markdown":"There might be a bug with [Java Test Runner](https://github.com/Microsoft/vscode-java-test/issues/34). Solution: create a Java project with Eclipse and open it with VS Code. Important are the .project and .classpath files. (or use templates and work with copies of them)","body":"There might be a bug with <a href=\"https://github.com/Microsoft/vscode-java-test/issues/34\" rel=\"nofollow noreferrer\">Java Test Runner</a>. Solution: create a Java project with Eclipse and open it with VS Code. Important are the .project and .classpath files. (or use templates and work with copies of them)"},{"owner":{"account_id":975610,"reputation":2898,"user_id":996946,"accept_rate":62,"display_name":"Alex 75"},"score":0,"creation_date":1565548597,"post_id":48490671,"comment_id":101379862,"body_markdown":"Try to remove &quot;projectName&quot;. Just &quot;mainClass&quot; should work.","body":"Try to remove &quot;projectName&quot;. Just &quot;mainClass&quot; should work."}],"answers":[{"tags":[],"owner":{"account_id":951291,"reputation":604,"user_id":977394,"display_name":"Rob Taylor"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1520297786,"creation_date":1520297786,"answer_id":49121823,"question_id":48490671,"body_markdown":"If you are using the extension Debugger for Java (https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-debug), then the `projectName` is the name of the directory that your project is in.\r\n\r\nFor instance, if your project looks like the following.\r\n\r\n\r\n    my-project/\r\n      src/\r\n        main/\r\n          java/\r\n            myproject/\r\n              Application.java\r\n      .project\r\n      pom.xml\r\n\r\nThen `projectName = &quot;my-project&quot;`\r\n\r\n","title":"Visual Studio Code projectName","body":"<p>If you are using the extension Debugger for Java (<a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-debug\" rel=\"noreferrer\">https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-debug</a>), then the <code>projectName</code> is the name of the directory that your project is in.</p>\n\n<p>For instance, if your project looks like the following.</p>\n\n<pre><code>my-project/\n  src/\n    main/\n      java/\n        myproject/\n          Application.java\n  .project\n  pom.xml\n</code></pre>\n\n<p>Then <code>projectName = \"my-project\"</code></p>\n"},{"comments":[{"owner":{"account_id":477672,"reputation":485,"user_id":889310,"accept_rate":75,"display_name":"Harshal"},"score":2,"creation_date":1559572178,"post_id":49696053,"comment_id":99453222,"body_markdown":"What to do if I have multiple web projects in the workspace? Should I put in entry project only?","body":"What to do if I have multiple web projects in the workspace? Should I put in entry project only?"}],"tags":[],"owner":{"account_id":1909769,"reputation":287,"user_id":1723912,"display_name":"Nevitones"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1523027960,"creation_date":1523027960,"answer_id":49696053,"question_id":48490671,"body_markdown":"For Maven projects(at least) you can find the project names at the bottom of the vscode sidebar under MAVEN PROJECTS.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nYou can also look for .project files inside your projects.\r\nThe projectName is there in the name attribute.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n*I&#39;m not expert on this at all, but I was struggling with this too, so I hope it can help someone else!\r\n\r\n  [1]: https://i.stack.imgur.com/u6VdR.png\r\n  [2]: https://i.stack.imgur.com/7l6uf.png","title":"Visual Studio Code projectName","body":"<p>For Maven projects(at least) you can find the project names at the bottom of the vscode sidebar under MAVEN PROJECTS.</p>\n\n<p><a href=\"https://i.stack.imgur.com/u6VdR.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/u6VdR.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can also look for .project files inside your projects.\nThe projectName is there in the name attribute.</p>\n\n<p><a href=\"https://i.stack.imgur.com/7l6uf.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/7l6uf.png\" alt=\"enter image description here\"></a></p>\n\n<p>*I'm not expert on this at all, but I was struggling with this too, so I hope it can help someone else!</p>\n"},{"tags":[],"owner":{"account_id":3920223,"reputation":5600,"user_id":3242721,"accept_rate":86,"display_name":"Michal Hosala"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1567425287,"creation_date":1567425287,"answer_id":57756531,"question_id":48490671,"body_markdown":"Stumbled upon this thread while searching for &quot;Failed to resolve classpath: The project &#39;??&#39; is not a valid java project.&quot;. In my case the culprit was rather silly. I have multiple projects within one parent folder and one common `build.gradle` in the root folder. E.g.:\r\n\r\n```\r\nparent/\r\n├── abc/\r\n├── def/\r\n├── build.gradle\r\n└── settings.gradle\r\n```\r\n\r\n The &quot;??&quot; in my case was referring to one of the projects, be it `abc`. After modifying `settings.gradle` in root folder to contain the following line problem seems to be gone.\r\n\r\n```\r\nrootProject.name = &#39;gat&#39;\r\n```","title":"Visual Studio Code projectName","body":"<p>Stumbled upon this thread while searching for \"Failed to resolve classpath: The project '??' is not a valid java project.\". In my case the culprit was rather silly. I have multiple projects within one parent folder and one common <code>build.gradle</code> in the root folder. E.g.:</p>\n\n<pre><code>parent/\n├── abc/\n├── def/\n├── build.gradle\n└── settings.gradle\n</code></pre>\n\n<p>The \"??\" in my case was referring to one of the projects, be it <code>abc</code>. After modifying <code>settings.gradle</code> in root folder to contain the following line problem seems to be gone.</p>\n\n<pre><code>rootProject.name = 'gat'\n</code></pre>\n"},{"comments":[{"owner":{"account_id":282233,"reputation":373,"user_id":4544981,"display_name":"BennyHilarious"},"score":1,"creation_date":1668010577,"post_id":63718772,"comment_id":131305444,"body_markdown":"now it works with codebling answer on github\nhttps://github.com/microsoft/vscode-java-debug/issues/843#issuecomment-1066236388\n\nRight-click on a Java file (one without a main() function) and choose &quot;Run Java&quot; and you&#39;ll get a prompt with a few options. This prompt will show the project name.","body":"now it works with codebling answer on github <a href=\"https://github.com/microsoft/vscode-java-debug/issues/843#issuecomment-1066236388\" rel=\"nofollow noreferrer\">github.com/microsoft/vscode-java-debug/issues/&hellip;</a>  Right-click on a Java file (one without a main() function) and choose &quot;Run Java&quot; and you&#39;ll get a prompt with a few options. This prompt will show the project name."},{"owner":{"account_id":282233,"reputation":373,"user_id":4544981,"display_name":"BennyHilarious"},"score":0,"creation_date":1697619536,"post_id":63718772,"comment_id":136301377,"body_markdown":"Yet another approach\nExplorer-&gt; Java Projects-&gt; Click Debug on the project itself and the dialog appears\n(updated the answer with the screenshot)","body":"Yet another approach Explorer-&gt; Java Projects-&gt; Click Debug on the project itself and the dialog appears (updated the answer with the screenshot)"}],"tags":[],"owner":{"account_id":282233,"reputation":373,"user_id":4544981,"display_name":"BennyHilarious"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1697619623,"creation_date":1599117977,"answer_id":63718772,"question_id":48490671,"body_markdown":"The VSCode contains JAVA PROJECTS on the sidebar.\r\nI am using SSH plugin to connect to a machine where the project actually resides (VS Code runs locally) so the name of the java project is my name and some hash to it\r\n\r\n[![VSCodeSideBar][1]][1]\r\n\r\nRecent version (2023 - click to enlarge)\r\n[![ProjectIdentifierUpdated][2]][2]\r\n\r\nAfter adding the hash &quot;_c4503cca&quot; to the projectName in launch.json, the watches in debug mode work fine.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/q3CW6.png\r\n  [2]: https://i.stack.imgur.com/OweaN.png","title":"Visual Studio Code projectName","body":"<p>The VSCode contains JAVA PROJECTS on the sidebar.\nI am using SSH plugin to connect to a machine where the project actually resides (VS Code runs locally) so the name of the java project is my name and some hash to it</p>\n<p><a href=\"https://i.stack.imgur.com/q3CW6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q3CW6.png\" alt=\"VSCodeSideBar\" /></a></p>\n<p>Recent version (2023 - click to enlarge)\n<a href=\"https://i.stack.imgur.com/OweaN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OweaN.png\" alt=\"ProjectIdentifierUpdated\" /></a></p>\n<p>After adding the hash &quot;_c4503cca&quot; to the projectName in launch.json, the watches in debug mode work fine.</p>\n"},{"tags":[],"owner":{"account_id":9534467,"reputation":1428,"user_id":7085047,"display_name":"Datum Geek"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1634042038,"creation_date":1634042038,"answer_id":69540649,"question_id":48490671,"body_markdown":"i was going crazy trying to figure out why the update i made to .project and pom.xml didn&#39;t change the project name in vs code...\r\n\r\n1. edit projectDescription / name in .project\r\n\r\n2. edit artifactId in pom.xml\r\n\r\n3. here&#39;s what i did to get it to reload and show the updated project name:\r\n\r\n[![update project name][1]][1]\r\n\r\nhttps://github.com/Microsoft/vscode-java-debug/blob/main/Troubleshooting.md#failed-to-resolve-classpath\r\n\r\n  [1]: https://i.stack.imgur.com/kKWHZ.png","title":"Visual Studio Code projectName","body":"<p>i was going crazy trying to figure out why the update i made to .project and pom.xml didn't change the project name in vs code...</p>\n<ol>\n<li><p>edit projectDescription / name in .project</p>\n</li>\n<li><p>edit artifactId in pom.xml</p>\n</li>\n<li><p>here's what i did to get it to reload and show the updated project name:</p>\n</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/kKWHZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/kKWHZ.png\" alt=\"update project name\" /></a></p>\n<p><a href=\"https://github.com/Microsoft/vscode-java-debug/blob/main/Troubleshooting.md#failed-to-resolve-classpath\" rel=\"noreferrer\">https://github.com/Microsoft/vscode-java-debug/blob/main/Troubleshooting.md#failed-to-resolve-classpath</a></p>\n"},{"tags":[],"owner":{"account_id":2909719,"reputation":19935,"user_id":2494262,"accept_rate":64,"display_name":"MrE"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668820880,"creation_date":1668820880,"answer_id":74496886,"question_id":48490671,"body_markdown":"setting `projectName: &quot;&quot;` works\r\n\r\notherwise, go to the Java Projects -&gt; right click on project -&gt; Reveal in Explorer and it shows the folder.","title":"Visual Studio Code projectName","body":"<p>setting <code>projectName: &quot;&quot;</code> works</p>\n<p>otherwise, go to the Java Projects -&gt; right click on project -&gt; Reveal in Explorer and it shows the folder.</p>\n"}],"owner":{"account_id":7874502,"reputation":523,"user_id":5950720,"accept_rate":0,"display_name":"bambino307"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17038,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"answer_count":6,"score":21,"last_activity_date":1697619623,"creation_date":1517169191,"question_id":48490671,"body_markdown":"Using VS Code for Java debugging, there must be `projectName`defined in the **launch.json** file for using the watch-window while debugging.\r\n\r\nHow to determine and/or define the name of the Java project? \r\n\r\nI always get the error message:\r\n\r\n&gt; Failed to resolve classpath: The project &#39;??&#39; is not a valid java\r\n&gt; project.\r\n\r\n\r\nHere my launch.json extract:\r\n\r\n            &quot;type&quot;: &quot;java&quot;,\r\n            &quot;name&quot;: &quot;Debug (Launch)-Application&lt;foo&gt;&quot;,\r\n            &quot;request&quot;: &quot;launch&quot;,\r\n            &quot;cwd&quot;: &quot;${workspaceFolder}&quot;,\r\n            &quot;console&quot;: &quot;internalConsole&quot;,\r\n            &quot;stopOnEntry&quot;: false,\r\n            &quot;mainClass&quot;: &quot;FooClass&quot;,\r\n            &quot;args&quot;: &quot;&quot;,\r\n            &quot;projectName&quot;: &quot;??&quot;,\r\n            &quot;windows&quot;: {\r\n                &quot;classPaths&quot;: [\r\n                    &quot;%CLASSPATH%&quot;,&quot;C:\\\\JUnit\\\\junit-4.12.jar&quot;, &quot;C:\\\\JUnit\\\\hamcrest-junit-2.0.0.0.jar&quot;, &quot;.&quot;\r\n                ]\r\n             }","title":"Visual Studio Code projectName","body":"<p>Using VS Code for Java debugging, there must be <code>projectName</code>defined in the <strong>launch.json</strong> file for using the watch-window while debugging.</p>\n\n<p>How to determine and/or define the name of the Java project? </p>\n\n<p>I always get the error message:</p>\n\n<blockquote>\n  <p>Failed to resolve classpath: The project '??' is not a valid java\n  project.</p>\n</blockquote>\n\n<p>Here my launch.json extract:</p>\n\n<pre><code>        \"type\": \"java\",\n        \"name\": \"Debug (Launch)-Application&lt;foo&gt;\",\n        \"request\": \"launch\",\n        \"cwd\": \"${workspaceFolder}\",\n        \"console\": \"internalConsole\",\n        \"stopOnEntry\": false,\n        \"mainClass\": \"FooClass\",\n        \"args\": \"\",\n        \"projectName\": \"??\",\n        \"windows\": {\n            \"classPaths\": [\n                \"%CLASSPATH%\",\"C:\\\\JUnit\\\\junit-4.12.jar\", \"C:\\\\JUnit\\\\hamcrest-junit-2.0.0.0.jar\", \".\"\n            ]\n         }\n</code></pre>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":1202593,"reputation":9569,"user_id":1173495,"accept_rate":46,"display_name":"SANN3"},"score":0,"creation_date":1697720952,"post_id":77314826,"comment_id":136317234,"body_markdown":"Does this answer your question? [Embed files into Excel using Apache POI](https://stackoverflow.com/questions/16910503/embed-files-into-excel-using-apache-poi)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/16910503/embed-files-into-excel-using-apache-poi\">Embed files into Excel using Apache POI</a>"},{"owner":{"account_id":8136836,"reputation":11,"user_id":6217037,"display_name":"Renat Ahmetshin"},"score":0,"creation_date":1698393955,"post_id":77314826,"comment_id":136402426,"body_markdown":"Hi.\nUnfortunately, the stated answer does not quite suit me, since I am looking for an example of functionality for MS Word, and in the example functionality for MS excel was developed","body":"Hi. Unfortunately, the stated answer does not quite suit me, since I am looking for an example of functionality for MS Word, and in the example functionality for MS excel was developed"}],"owner":{"account_id":8136836,"reputation":11,"user_id":6217037,"display_name":"Renat Ahmetshin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697618984,"creation_date":1697618984,"question_id":77314826,"body_markdown":"everyone.\r\nI am a new in apache poi.\r\nI would like to know is there a way to embed file in ms word document (.docx) , using apache poi.\r\n\r\nI do not have any code examples.\r\nIf anybode have code examples, please insert them.\r\nThanks","title":"Embed file in MS Word using apache poi","body":"<p>everyone.\nI am a new in apache poi.\nI would like to know is there a way to embed file in ms word document (.docx) , using apache poi.</p>\n<p>I do not have any code examples.\nIf anybode have code examples, please insert them.\nThanks</p>\n"},{"tags":["java","android","react-native","kotlin"],"owner":{"account_id":13305813,"reputation":11,"user_id":9605630,"display_name":"Yureshwar Ravuri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697618931,"creation_date":1697618931,"question_id":77314812,"body_markdown":"I am using an older project that was built on react-native version 0.63.4 which uses react-native-unimodules of version 0.10.1.\r\n\r\nMy installed versions:\r\n\r\nJava: JDK8\r\n\r\nNode: v14.21.3\r\n\r\nAndroid SDK: Android Studio Bumblebee | 2021.1.1 Canary 13\r\nBuild #AI-211.7628.21.2111.7762732, built on September 24, 2021\r\nRuntime version: 11.0.11+9-b60-7590822 amd64\r\n\r\n\r\nWhen i am trying to run the command &quot;react-native run-android&quot; it throws me error \r\n&quot;CookieManagerModule is not abstract and does not override abstract method invalidate() in NativeModule&quot; \r\n\r\nwhy is this happening even after giving the specific version of react-native-unimodules and so on.\r\n\r\nAlso i was getting an kotlin issue but i have added an specific version of kotlin to resolve this. Why was the kotlin issue did not come earlier when i have used the same versions during development. Why only now i am getting the issue. Any help could be very helpful\r\n","title":"Unable to run my older react native project","body":"<p>I am using an older project that was built on react-native version 0.63.4 which uses react-native-unimodules of version 0.10.1.</p>\n<p>My installed versions:</p>\n<p>Java: JDK8</p>\n<p>Node: v14.21.3</p>\n<p>Android SDK: Android Studio Bumblebee | 2021.1.1 Canary 13\nBuild #AI-211.7628.21.2111.7762732, built on September 24, 2021\nRuntime version: 11.0.11+9-b60-7590822 amd64</p>\n<p>When i am trying to run the command &quot;react-native run-android&quot; it throws me error\n&quot;CookieManagerModule is not abstract and does not override abstract method invalidate() in NativeModule&quot;</p>\n<p>why is this happening even after giving the specific version of react-native-unimodules and so on.</p>\n<p>Also i was getting an kotlin issue but i have added an specific version of kotlin to resolve this. Why was the kotlin issue did not come earlier when i have used the same versions during development. Why only now i am getting the issue. Any help could be very helpful</p>\n"},{"tags":["java","macos","homebrew"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":3,"creation_date":1642474748,"post_id":70749800,"comment_id":125074415,"body_markdown":"They changed their name to [Temurin](https://projects.eclipse.org/projects/adoptium.temurin). I use [sdkman](https://sdkman.io/) to manage my JVM on mac. I suggest you do too. See [supported JDKs](https://sdkman.io/jdks).","body":"They changed their name to <a href=\"https://projects.eclipse.org/projects/adoptium.temurin\" rel=\"nofollow noreferrer\">Temurin</a>. I use <a href=\"https://sdkman.io/\" rel=\"nofollow noreferrer\">sdkman</a> to manage my JVM on mac. I suggest you do too. See <a href=\"https://sdkman.io/jdks\" rel=\"nofollow noreferrer\">supported JDKs</a>."},{"owner":{"account_id":14398487,"reputation":653,"user_id":10400997,"display_name":"D. Joe"},"score":1,"creation_date":1642517502,"post_id":70749800,"comment_id":125088110,"body_markdown":"Seems like sdkman wants the version as X.Y.Z. I&#39;d like to be able to install all the LTEs from 8 (8, 11, 17) + the latest one, and be able to easily update them, without knowing the minor versions. Is that possible with sdkman ?","body":"Seems like sdkman wants the version as X.Y.Z. I&#39;d like to be able to install all the LTEs from 8 (8, 11, 17) + the latest one, and be able to easily update them, without knowing the minor versions. Is that possible with sdkman ?"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1642520738,"post_id":70749800,"comment_id":125089620,"body_markdown":"Install the version explicitly. When you do an `sdk upgrade` it will (by default) always recommend the latest version of Temurin. At least at the moment.","body":"Install the version explicitly. When you do an <code>sdk upgrade</code> it will (by default) always recommend the latest version of Temurin. At least at the moment."},{"owner":{"account_id":236897,"reputation":153,"user_id":504696,"display_name":"Geodepe"},"score":0,"creation_date":1694200907,"post_id":70749800,"comment_id":135865085,"body_markdown":"Did you ever get alias java17 working like you want? If so, please update. Thanks.","body":"Did you ever get alias java17 working like you want? If so, please update. Thanks."}],"answers":[{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":5,"creation_date":1642846358,"post_id":70771552,"comment_id":125184404,"body_markdown":"The AdoptOpenJDK project has been renamed to Adoptium (as shown in the banner on the link in your answer), and can now be found on https://adoptium.net/.","body":"The AdoptOpenJDK project has been renamed to Adoptium (as shown in the banner on the link in your answer), and can now be found on <a href=\"https://adoptium.net/\" rel=\"nofollow noreferrer\">adoptium.net</a>."},{"owner":{"account_id":1376876,"reputation":1243,"user_id":1310733,"display_name":"Petr &#218;jezdsk&#253;"},"score":3,"creation_date":1663152461,"post_id":70771552,"comment_id":130170390,"body_markdown":"This currently installs version 18. For 17 use `temurin17` via tap `homebrew/cask-versions`","body":"This currently installs version 18. For 17 use <code>temurin17</code> via tap <code>homebrew&#47;cask-versions</code>"},{"owner":{"account_id":475721,"reputation":309,"user_id":886217,"display_name":"Adam Lehenbauer"},"score":15,"creation_date":1663607719,"post_id":70771552,"comment_id":130274932,"body_markdown":"I had to run\n`brew tap homebrew/cask-versions`\n\nTo get this to work. Maybe that&#39;s obvious to those familiar with homebrew, but I had to dig a bit.","body":"I had to run <code>brew tap homebrew&#47;cask-versions</code>  To get this to work. Maybe that&#39;s obvious to those familiar with homebrew, but I had to dig a bit."}],"tags":[],"owner":{"account_id":14869803,"reputation":1329,"user_id":10737626,"display_name":"Nick the Community Scientist"},"comment_count":3,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1663260326,"creation_date":1642599257,"answer_id":70771552,"question_id":70749800,"body_markdown":"**Update!**\r\n\r\nThe new website for this project is [here called Adoptium][1] (thanks @MarkRotteveel). In Homebrew, the package that installs the new AdoptOpenJDK is [here named temurin][2]. All you need to run is:\r\n\r\n    brew install --cask temurin17\r\n\r\nor for the latest version\r\n\r\n    brew install --cask temurin\r\n\r\n  [1]: https://adoptium.net/\r\n  [2]: https://formulae.brew.sh/cask/temurin#default\r\n","title":"Installing jdk17 on Mac with brew","body":"<p><strong>Update!</strong></p>\n<p>The new website for this project is <a href=\"https://adoptium.net/\" rel=\"noreferrer\">here called Adoptium</a> (thanks @MarkRotteveel). In Homebrew, the package that installs the new AdoptOpenJDK is <a href=\"https://formulae.brew.sh/cask/temurin#default\" rel=\"noreferrer\">here named temurin</a>. All you need to run is:</p>\n<pre><code>brew install --cask temurin17\n</code></pre>\n<p>or for the latest version</p>\n<pre><code>brew install --cask temurin\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1810871,"reputation":1131,"user_id":1646970,"display_name":"Goaul"},"comment_count":0,"down_vote_count":1,"up_vote_count":56,"is_accepted":false,"score":55,"last_activity_date":1667202591,"creation_date":1667202591,"answer_id":74260169,"question_id":70749800,"body_markdown":"So, noone wastes more time on this, to install temurin17, execute:\r\n\r\n    brew tap homebrew/cask-versions\r\n    brew install --cask temurin17","title":"Installing jdk17 on Mac with brew","body":"<p>So, noone wastes more time on this, to install temurin17, execute:</p>\n<pre><code>brew tap homebrew/cask-versions\nbrew install --cask temurin17\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12935393,"reputation":141,"user_id":14414522,"display_name":"James Stroud"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1681303666,"creation_date":1681274052,"answer_id":75991935,"question_id":70749800,"body_markdown":"Thanks everyone this was very helpful.  I also had to make the following changes to my `$HOME/.zshrc` file\r\n\r\n```\r\nexport PATH=&quot;/Library/Java/JavaVirtualMachines/temurin-17.jdk/Contents/Home/bin/:$PATH&quot;\r\n```\r\nI also kept my old adoptopenjdk8 on my system but commented out this line from `$HOME/.zshrc` to remove java 8 from my path so it would not be executed when I ran java command\r\n```\r\n# export PATH=&quot;/usr/local/opt/openjdk@8/bin:$PATH&quot;\r\n```\r\nto execute my PATH with these 2 changes I ran\r\n```\r\nsource ~/.zshrc\r\n```\r\n\r\n\r\nPrior to this I ran these 2 command to get java 17 installed\r\n```\r\nbrew tap homebrew/cask-versions\r\nbrew info temurin17\r\nbrew install temurin17\r\n```\r\nnow (as of April 12, 2023) when I run\r\n```\r\njava -version\r\n```\r\nit shows \r\n```\r\nopenjdk version &quot;17.0.6&quot; 2023-01-17\r\nOpenJDK Runtime Environment Temurin-17.0.6+10 (build 17.0.6+10)\r\nOpenJDK 64-Bit Server VM Temurin-17.0.6+10 (build 17.0.6+10, mixed mode, sharing)\r\n```\r\nPrior to this `java -version` showed\r\n```\r\nopenjdk version &quot;1.8.0_362&quot;\r\nOpenJDK Runtime Environment (build 1.8.0_362-bre_2023_01_22_03_32-b00)\r\nOpenJDK 64-Bit Server VM (build 25.362-b00, mixed mode)\r\n```\r\n\r\nthe \r\n```\r\nbrew info temurin17\r\n```\r\ncommand shows you what brew &quot;knows&quot; about `temurin17` and the output I had before I installed it was\r\n```\r\n==&gt; temurin17: 17.0.6,10\r\nhttps://adoptium.net/\r\nNot installed\r\nFrom: https://github.com/Homebrew/homebrew-cask-versions/blob/HEAD/Casks/temurin17.rb\r\n==&gt; Name\r\nEclipse Temurin Java Development Kit\r\n==&gt; Description\r\nJDK from the Eclipse Foundation (Adoptium)\r\n==&gt; Artifacts\r\nOpenJDK17U-jdk_x64_mac_hotspot_17.0.6_10.pkg (Pkg)\r\n```\r\nFYI If you do not have `brew` installed on your mac simply run\r\n```\r\n/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;\r\n```","title":"Installing jdk17 on Mac with brew","body":"<p>Thanks everyone this was very helpful.  I also had to make the following changes to my <code>$HOME/.zshrc</code> file</p>\n<pre><code>export PATH=&quot;/Library/Java/JavaVirtualMachines/temurin-17.jdk/Contents/Home/bin/:$PATH&quot;\n</code></pre>\n<p>I also kept my old adoptopenjdk8 on my system but commented out this line from <code>$HOME/.zshrc</code> to remove java 8 from my path so it would not be executed when I ran java command</p>\n<pre><code># export PATH=&quot;/usr/local/opt/openjdk@8/bin:$PATH&quot;\n</code></pre>\n<p>to execute my PATH with these 2 changes I ran</p>\n<pre><code>source ~/.zshrc\n</code></pre>\n<p>Prior to this I ran these 2 command to get java 17 installed</p>\n<pre><code>brew tap homebrew/cask-versions\nbrew info temurin17\nbrew install temurin17\n</code></pre>\n<p>now (as of April 12, 2023) when I run</p>\n<pre><code>java -version\n</code></pre>\n<p>it shows</p>\n<pre><code>openjdk version &quot;17.0.6&quot; 2023-01-17\nOpenJDK Runtime Environment Temurin-17.0.6+10 (build 17.0.6+10)\nOpenJDK 64-Bit Server VM Temurin-17.0.6+10 (build 17.0.6+10, mixed mode, sharing)\n</code></pre>\n<p>Prior to this <code>java -version</code> showed</p>\n<pre><code>openjdk version &quot;1.8.0_362&quot;\nOpenJDK Runtime Environment (build 1.8.0_362-bre_2023_01_22_03_32-b00)\nOpenJDK 64-Bit Server VM (build 25.362-b00, mixed mode)\n</code></pre>\n<p>the</p>\n<pre><code>brew info temurin17\n</code></pre>\n<p>command shows you what brew &quot;knows&quot; about <code>temurin17</code> and the output I had before I installed it was</p>\n<pre><code>==&gt; temurin17: 17.0.6,10\nhttps://adoptium.net/\nNot installed\nFrom: https://github.com/Homebrew/homebrew-cask-versions/blob/HEAD/Casks/temurin17.rb\n==&gt; Name\nEclipse Temurin Java Development Kit\n==&gt; Description\nJDK from the Eclipse Foundation (Adoptium)\n==&gt; Artifacts\nOpenJDK17U-jdk_x64_mac_hotspot_17.0.6_10.pkg (Pkg)\n</code></pre>\n<p>FYI If you do not have <code>brew</code> installed on your mac simply run</p>\n<pre><code>/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23090114,"reputation":11,"user_id":17201102,"display_name":"Stuart - TomorrowX"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697618622,"creation_date":1697618582,"answer_id":77314761,"question_id":70749800,"body_markdown":"I recommend installing jEnv to manage and select from multiple installed JDKs. When later versions are released you can easily switch between prior versions.\r\n\r\n$ brew install jenv\r\n\r\njEnv is a command line tool to help you forget how to set the JAVA_HOME environment variable\r\n\r\n[https://www.jenv.be/][1]\r\n\r\n\r\n  [1]: https://www.jenv.be/","title":"Installing jdk17 on Mac with brew","body":"<p>I recommend installing jEnv to manage and select from multiple installed JDKs. When later versions are released you can easily switch between prior versions.</p>\n<p>$ brew install jenv</p>\n<p>jEnv is a command line tool to help you forget how to set the JAVA_HOME environment variable</p>\n<p><a href=\"https://www.jenv.be/\" rel=\"nofollow noreferrer\">https://www.jenv.be/</a></p>\n"}],"owner":{"account_id":14398487,"reputation":653,"user_id":10400997,"display_name":"D. Joe"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39999,"favorite_count":0,"down_vote_count":1,"up_vote_count":36,"answer_count":4,"score":35,"last_activity_date":1697618622,"creation_date":1642474397,"question_id":70749800,"body_markdown":"I am trying to install jdk17 with brew, while also having java8, java11 and java16 installed.\r\n\r\nIn order to install 8, 11 and 16 I ran:\r\n\r\n```\r\nbrew tap adoptopenjdk/openjdk\r\n\r\nbrew install --cask adoptopenjdk8\r\n\r\nbrew install --cask adoptopenjdk11\r\n\r\nbrew install --cask adoptopenjdk16\r\n```\r\n\r\nHowever there seems to be no adoptopenjdk for 17.\r\n\r\nI can install 17 with \r\n\r\n```\r\nbrew install openjdk\r\n```\r\n\r\nBut if I run \r\n\r\n```\r\n/usr/libexec/java_home -v 17\r\n```\r\n\r\nit returns \r\n\r\n```\r\n/Library/Java/JavaVirtualMachines/adoptopenjdk-16.jdk/Contents/Home\r\n```\r\n\r\nand there is no entry for 17 in \r\n\r\n```\r\n/Library/Java/JavaVirtualMachines/\r\n```\r\n\r\nI am using \r\n\r\n```\r\nalias java8=&quot;unset JAVA_HOME; export JAVA_HOME=`/usr/libexec/java_home -v 1.8`; java -version&quot;\r\nalias java11=&quot;unset JAVA_HOME; export JAVA_HOME=`/usr/libexec/java_home -v 11`; java -version&quot;\r\nalias java16=&quot;unset JAVA_HOME; export JAVA_HOME=`/usr/libexec/java_home -v 16`; java -version&quot;\r\nalias java17=&quot;unset JAVA_HOME; export JAVA_HOME=`/usr/libexec/java_home -v 17`; java -version&quot;\r\n```\r\n\r\nto manage the java versions, and without an entry for java 17, I can&#39;t switch to it.\r\n\r\nThanks.\r\n","title":"Installing jdk17 on Mac with brew","body":"<p>I am trying to install jdk17 with brew, while also having java8, java11 and java16 installed.</p>\n<p>In order to install 8, 11 and 16 I ran:</p>\n<pre><code>brew tap adoptopenjdk/openjdk\n\nbrew install --cask adoptopenjdk8\n\nbrew install --cask adoptopenjdk11\n\nbrew install --cask adoptopenjdk16\n</code></pre>\n<p>However there seems to be no adoptopenjdk for 17.</p>\n<p>I can install 17 with</p>\n<pre><code>brew install openjdk\n</code></pre>\n<p>But if I run</p>\n<pre><code>/usr/libexec/java_home -v 17\n</code></pre>\n<p>it returns</p>\n<pre><code>/Library/Java/JavaVirtualMachines/adoptopenjdk-16.jdk/Contents/Home\n</code></pre>\n<p>and there is no entry for 17 in</p>\n<pre><code>/Library/Java/JavaVirtualMachines/\n</code></pre>\n<p>I am using</p>\n<pre><code>alias java8=&quot;unset JAVA_HOME; export JAVA_HOME=`/usr/libexec/java_home -v 1.8`; java -version&quot;\nalias java11=&quot;unset JAVA_HOME; export JAVA_HOME=`/usr/libexec/java_home -v 11`; java -version&quot;\nalias java16=&quot;unset JAVA_HOME; export JAVA_HOME=`/usr/libexec/java_home -v 16`; java -version&quot;\nalias java17=&quot;unset JAVA_HOME; export JAVA_HOME=`/usr/libexec/java_home -v 17`; java -version&quot;\n</code></pre>\n<p>to manage the java versions, and without an entry for java 17, I can't switch to it.</p>\n<p>Thanks.</p>\n"},{"tags":["java","timestamp"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1463384910,"post_id":37248945,"comment_id":62026228,"body_markdown":"A `java.util.Date.getTime()` only has milliseconds, so you can&#39;t get nanos this way.","body":"A <code>java.util.Date.getTime()</code> only has milliseconds, so you can&#39;t get nanos this way."}],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1697618531,"creation_date":1463385701,"answer_id":37249246,"question_id":37248945,"body_markdown":"The type [`java.sql.Timestamp`][1] has nanosecond precision using a separate field, as documented: \r\n\r\n&gt; Note: This type is a composite of a `java.util.Date` and a separate\r\n&gt; nanoseconds value. Only integral seconds are stored in the\r\n&gt; `java.util.Date` component. The fractional seconds - the `nanos` - are\r\n&gt; separate.\r\n\r\nYou are setting the timestamp value using [`java.util.Date.getTime()`][2], which provides only millisecond precision: _&quot;Returns the number of milliseconds since January 1, 1970, 00:00:00 GMT represented by this Date object.&quot;_; the subsecond value of that millisecond value is stored in the nanos field, in other words, the submillisecond value of nanos is zero this way.\r\n\r\nIf you want to use the nanosecond precision, you need to set and get the nanos separately (using [`setNanos`][3] and [`getNanos`][4]), or you need to construct it from a type that does have nanosecond precision (`java.time.LocalDateTime`) using [`Timestamp.valueOf(java.time.LocalDateTime)`][5].\r\n\r\nGiven that nanos stores all of the fractional seconds, using `setNanos` has some caveats, see also some of the answers to https://stackoverflow.com/questions/5839411/java-sql-timestamp-way-of-storing-nanoseconds\r\n\r\nThis said, you will only get benefit from this nanosecond precision if the database you use actually supports it. For example, I maintain the JDBC driver for Firebird, and Firebird supports only 100 microsecond precision, not nanosecond precision; and PostgreSQL, for example, supports microsecond precision.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/Date.html#getTime--\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html#setNanos-int-\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html#getNanos--\r\n  [5]: https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html#valueOf-java.time.LocalDateTime-","title":"Does java.sql.Timestamp provide nanosecond precision that is useful?","body":"<p>The type <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html\" rel=\"nofollow noreferrer\"><code>java.sql.Timestamp</code></a> has nanosecond precision using a separate field, as documented:</p>\n<blockquote>\n<p>Note: This type is a composite of a <code>java.util.Date</code> and a separate\nnanoseconds value. Only integral seconds are stored in the\n<code>java.util.Date</code> component. The fractional seconds - the <code>nanos</code> - are\nseparate.</p>\n</blockquote>\n<p>You are setting the timestamp value using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Date.html#getTime--\" rel=\"nofollow noreferrer\"><code>java.util.Date.getTime()</code></a>, which provides only millisecond precision: <em>&quot;Returns the number of milliseconds since January 1, 1970, 00:00:00 GMT represented by this Date object.&quot;</em>; the subsecond value of that millisecond value is stored in the nanos field, in other words, the submillisecond value of nanos is zero this way.</p>\n<p>If you want to use the nanosecond precision, you need to set and get the nanos separately (using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html#setNanos-int-\" rel=\"nofollow noreferrer\"><code>setNanos</code></a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html#getNanos--\" rel=\"nofollow noreferrer\"><code>getNanos</code></a>), or you need to construct it from a type that does have nanosecond precision (<code>java.time.LocalDateTime</code>) using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html#valueOf-java.time.LocalDateTime-\" rel=\"nofollow noreferrer\"><code>Timestamp.valueOf(java.time.LocalDateTime)</code></a>.</p>\n<p>Given that nanos stores all of the fractional seconds, using <code>setNanos</code> has some caveats, see also some of the answers to <a href=\"https://stackoverflow.com/questions/5839411/java-sql-timestamp-way-of-storing-nanoseconds\">java.sql.Timestamp way of storing NanoSeconds</a></p>\n<p>This said, you will only get benefit from this nanosecond precision if the database you use actually supports it. For example, I maintain the JDBC driver for Firebird, and Firebird supports only 100 microsecond precision, not nanosecond precision; and PostgreSQL, for example, supports microsecond precision.</p>\n"}],"owner":{"account_id":7092330,"reputation":1519,"user_id":5427151,"accept_rate":8,"display_name":"Sirish Renukumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7877,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1697618531,"creation_date":1463384417,"question_id":37248945,"body_markdown":"I ran a simple test to create a million time objects and tested the following\r\n\r\n     int nano = new Timestamp(new Date().getTime()).getNanos();\r\n     if((nano &amp; 0x00000000003F) != 0x0) {\r\n        System.out.println(&quot;Nano from timestamp : &quot; +  nano);\r\n     }\r\n\r\nNothing was output, implying that the last least significant 6 digits were all zeros. So, does Timestamp merely depend on the value as returned from System.currentTimeMillis() and just multiply it with 1000000?  \r\n\r\nIs Timestamp useful with nanosecond precision?  In the current case, since I am not getting any non-zero value, it implies that the precision is just reduced to milliseconds (and not nanoseconds).\r\n\r\nSo what&#39;s the benefit of using Timestamp?","title":"Does java.sql.Timestamp provide nanosecond precision that is useful?","body":"<p>I ran a simple test to create a million time objects and tested the following</p>\n<pre><code> int nano = new Timestamp(new Date().getTime()).getNanos();\n if((nano &amp; 0x00000000003F) != 0x0) {\n    System.out.println(&quot;Nano from timestamp : &quot; +  nano);\n }\n</code></pre>\n<p>Nothing was output, implying that the last least significant 6 digits were all zeros. So, does Timestamp merely depend on the value as returned from System.currentTimeMillis() and just multiply it with 1000000?</p>\n<p>Is Timestamp useful with nanosecond precision?  In the current case, since I am not getting any non-zero value, it implies that the precision is just reduced to milliseconds (and not nanoseconds).</p>\n<p>So what's the benefit of using Timestamp?</p>\n"},{"tags":["java","spring","microservices","resttemplate"],"comments":[{"owner":{"account_id":14725244,"reputation":482,"user_id":10634487,"display_name":"Bill Naylor"},"score":2,"creation_date":1596712370,"post_id":63281734,"comment_id":111902075,"body_markdown":"Haven&#39;t tried `postForObject` myself, but from looking at: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html it looks like the trinary for of `postForObject` requires the 3&#39;rd argument to be the responseType, so `List.class` would work in your case, though you would get a warning about generics.","body":"Haven&#39;t tried <code>postForObject</code> myself, but from looking at: <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/javadoc-api/org&zwnj;&#8203;/&hellip;</a> it looks like the trinary for of <code>postForObject</code> requires the 3&#39;rd argument to be the responseType, so <code>List.class</code> would work in your case, though you would get a warning about generics."},{"owner":{"account_id":3153451,"reputation":3590,"user_id":2666368,"accept_rate":79,"display_name":"Ke Vin"},"score":0,"creation_date":1596771891,"post_id":63281734,"comment_id":111924007,"body_markdown":"hi @BillNaylor that worked for me too but yeah i got warning about generics and i choose to use Bernard answer to use exchange rather than postForObject then, so i can specify another method too, thank you. i will find where List.class can be use in future thank u very much","body":"hi @BillNaylor that worked for me too but yeah i got warning about generics and i choose to use Bernard answer to use exchange rather than postForObject then, so i can specify another method too, thank you. i will find where List.class can be use in future thank u very much"},{"owner":{"account_id":14725244,"reputation":482,"user_id":10634487,"display_name":"Bill Naylor"},"score":0,"creation_date":1596791588,"post_id":63281734,"comment_id":111930444,"body_markdown":"I think to avoid the generics warning, you can encapsulate the `List&lt;PartnerShipmentDto&gt;` in your own class, then reference that.","body":"I think to avoid the generics warning, you can encapsulate the <code>List&lt;PartnerShipmentDto&gt;</code> in your own class, then reference that."}],"answers":[{"comments":[{"owner":{"account_id":5945706,"reputation":1374,"user_id":4675277,"accept_rate":78,"display_name":"Anand Vaidya"},"score":0,"creation_date":1596714466,"post_id":63282294,"comment_id":111903098,"body_markdown":"I dont think you need to use exchange function..  postForObject also will do the trick","body":"I dont think you need to use exchange function..  postForObject also will do the trick"}],"tags":[],"owner":{"account_id":2464729,"reputation":333,"user_id":2148091,"display_name":"Bernard"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1596712149,"creation_date":1596712149,"answer_id":63282294,"question_id":63281734,"body_markdown":"If you want to use `ParameterizedTypeReference&lt;T&gt;`, you need to use `RestTemplate.exchange()`, since this is the only Method that exposes a parameter of type `ParameterizedTypeReference&lt;T&gt;`.\r\n\r\n    List&lt;PartnerShipmentDto&gt; partnerShipmentDto = restTemplate.exchange(url, \r\n                    HttpMethod.GET, \r\n                    requestPartnerShipmentDto,\r\n                    new ParameterizedTypeReference&lt;List&lt;PartnerShipmentDto&gt;&gt;() {})\r\n            .getBody();\r\n\r\n","title":"How to use RestTemplate to get result in List and put the response into List?","body":"<p>If you want to use <code>ParameterizedTypeReference&lt;T&gt;</code>, you need to use <code>RestTemplate.exchange()</code>, since this is the only Method that exposes a parameter of type <code>ParameterizedTypeReference&lt;T&gt;</code>.</p>\n<pre><code>List&lt;PartnerShipmentDto&gt; partnerShipmentDto = restTemplate.exchange(url, \n                HttpMethod.GET, \n                requestPartnerShipmentDto,\n                new ParameterizedTypeReference&lt;List&lt;PartnerShipmentDto&gt;&gt;() {})\n        .getBody();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3691593,"reputation":1094,"user_id":3074057,"display_name":"Beezer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697618349,"creation_date":1697618349,"answer_id":77314721,"question_id":63281734,"body_markdown":"I tried the above but it did not work for me.\r\nThis works nicely in Kotlin:\r\n\r\n  \r\n  \r\n\r\n      val uri = &quot;http://localhost:$port/api/xxx/dosomething/&quot;\r\n      log.info(&quot;URL for Controller was: [$uri]&quot;) \r\n      val result: ResponseEntity&lt;Array&lt;BillingOrder&gt;&gt;\r\n                    = restTemplate!!.postForEntity(uri, ids, Array&lt;BillingOrder&gt;::class.java)\r\n      assertNotNull(result)\r\n      assertEquals(200, result.statusCodeValue)\r\n      val body = result.body\r\n      if (body != null) {\r\n         body.forEach { order -&gt;\r\n           assertEquals(&quot;Success&quot;, order.billingState)\r\n      } else {\r\n        fail(&quot;Response body is null!&quot;)\r\n      }\r\n\r\nOn a tangent, if you have a post that does NOT return a value but takes params, here is that one:\r\n\r\n      uri = &quot;http://localhost:$port/api/xxx/doSomething/${subscription.id}/&quot;\r\n      log.info(&quot;URL for Controller was: [$uri]&quot;)\r\n      val x = restTemplate.postForEntity(uri, null, Void::class.java)\r\n      assertNotNull(x)\r\n      assertEquals(HttpStatus.SC_OK, x.statusCodeValue)\r\n    ","title":"How to use RestTemplate to get result in List and put the response into List?","body":"<p>I tried the above but it did not work for me.\nThis works nicely in Kotlin:</p>\n<pre><code>  val uri = &quot;http://localhost:$port/api/xxx/dosomething/&quot;\n  log.info(&quot;URL for Controller was: [$uri]&quot;) \n  val result: ResponseEntity&lt;Array&lt;BillingOrder&gt;&gt;\n                = restTemplate!!.postForEntity(uri, ids, Array&lt;BillingOrder&gt;::class.java)\n  assertNotNull(result)\n  assertEquals(200, result.statusCodeValue)\n  val body = result.body\n  if (body != null) {\n     body.forEach { order -&gt;\n       assertEquals(&quot;Success&quot;, order.billingState)\n  } else {\n    fail(&quot;Response body is null!&quot;)\n  }\n</code></pre>\n<p>On a tangent, if you have a post that does NOT return a value but takes params, here is that one:</p>\n<pre><code>  uri = &quot;http://localhost:$port/api/xxx/doSomething/${subscription.id}/&quot;\n  log.info(&quot;URL for Controller was: [$uri]&quot;)\n  val x = restTemplate.postForEntity(uri, null, Void::class.java)\n  assertNotNull(x)\n  assertEquals(HttpStatus.SC_OK, x.statusCodeValue)\n</code></pre>\n"}],"owner":{"account_id":3153451,"reputation":3590,"user_id":2666368,"accept_rate":79,"display_name":"Ke Vin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1167,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":63282294,"answer_count":2,"score":0,"last_activity_date":1697618349,"creation_date":1596710098,"question_id":63281734,"body_markdown":"Hi what i trying to achieve is i want to consume other API and put some response data into List&lt;myObject&gt; in my function using RestTemplate, here is how my code look like :\r\n\r\n    @PostMapping(&quot;/save-new&quot;)\r\n    public ResponseEntity&lt;ShipmentAddressGrouping&gt; saveNewShipmentAddressGrouping(@Valid @RequestBody InputRequest&lt;ShipmentAddressGroupingDto&gt; request) {\r\n        String url = baseUrl + &quot;/load-list&quot;;\r\n    \r\n        HttpEntity&lt;PartnerShipmentDto&gt; requestPartnerShipmentDto = new HttpEntity&lt;&gt;(new PartnerShipmentDto());\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        List&lt;PartnerShipmentDto&gt; partnerShipmentDto = restTemplate.postForObject(url, requestPartnerShipmentDto, new ParameterizedTypeReference&lt;List&lt;PartnerShipmentDto&gt;&gt;() {});\r\n    \r\n        ShipmentAddressGrouping newShipmentAddressGrouping = shipmentAddressGroupingService.save(request);\r\n        return ResponseEntity.ok(newShipmentAddressGrouping);\r\n    \r\n    }\r\n\r\nas you can see i try to get the response in to List&lt;PartnerShipmentDto&gt;, which is i try here `restTemplate.postForObject(url, requestPartnerShipmentDto, new ParameterizedTypeReference&lt;List&lt;PartnerShipmentDto&gt;&gt;() {});`\r\n\r\nbut i got error underlined in restTemplate.postForObject that look like this :\r\n\r\n&gt; The method postForObject(String, Object, Class&lt;T&gt;, Object...) in the\r\n&gt; type RestTemplate is not applicable for the arguments (String,\r\n&gt; HttpEntity&lt;PartnerShipmentDto&gt;, new\r\n&gt; ParameterizedTypeReference&lt;List&lt;PartnerShipmentDto&gt;&gt;(){})\r\n\r\nWhat should i change to fix this?","title":"How to use RestTemplate to get result in List and put the response into List?","body":"<p>Hi what i trying to achieve is i want to consume other API and put some response data into List in my function using RestTemplate, here is how my code look like :</p>\n<pre><code>@PostMapping(&quot;/save-new&quot;)\npublic ResponseEntity&lt;ShipmentAddressGrouping&gt; saveNewShipmentAddressGrouping(@Valid @RequestBody InputRequest&lt;ShipmentAddressGroupingDto&gt; request) {\n    String url = baseUrl + &quot;/load-list&quot;;\n\n    HttpEntity&lt;PartnerShipmentDto&gt; requestPartnerShipmentDto = new HttpEntity&lt;&gt;(new PartnerShipmentDto());\n    RestTemplate restTemplate = new RestTemplate();\n    List&lt;PartnerShipmentDto&gt; partnerShipmentDto = restTemplate.postForObject(url, requestPartnerShipmentDto, new ParameterizedTypeReference&lt;List&lt;PartnerShipmentDto&gt;&gt;() {});\n\n    ShipmentAddressGrouping newShipmentAddressGrouping = shipmentAddressGroupingService.save(request);\n    return ResponseEntity.ok(newShipmentAddressGrouping);\n\n}\n</code></pre>\n<p>as you can see i try to get the response in to List, which is i try here <code>restTemplate.postForObject(url, requestPartnerShipmentDto, new ParameterizedTypeReference&lt;List&lt;PartnerShipmentDto&gt;&gt;() {});</code></p>\n<p>but i got error underlined in restTemplate.postForObject that look like this :</p>\n<blockquote>\n<p>The method postForObject(String, Object, Class, Object...) in the\ntype RestTemplate is not applicable for the arguments (String,\nHttpEntity, new\nParameterizedTypeReference&lt;List&gt;(){})</p>\n</blockquote>\n<p>What should i change to fix this?</p>\n"},{"tags":["java","list","jackson"],"comments":[{"owner":{"account_id":1107169,"reputation":6727,"user_id":1098361,"accept_rate":86,"display_name":"Zack Macomber"},"score":0,"creation_date":1595016016,"post_id":62960892,"comment_id":111339630,"body_markdown":"What do you mean by &quot;many other content types, including customized types&quot;.  You&#39;re working with JSON so wouldn&#39;t the content type would be `application/json`?","body":"What do you mean by &quot;many other content types, including customized types&quot;.  You&#39;re working with JSON so wouldn&#39;t the content type would be <code>application&#47;json</code>?"},{"owner":{"account_id":303087,"reputation":8621,"user_id":611819,"accept_rate":100,"display_name":"dnault"},"score":0,"creation_date":1595016595,"post_id":62960892,"comment_id":111339846,"body_markdown":"Do you have control over the JSON? That is, can you fix this problem at the root and have your JSON accurately reflect the data model?","body":"Do you have control over the JSON? That is, can you fix this problem at the root and have your JSON accurately reflect the data model?"}],"answers":[{"comments":[{"owner":{"account_id":5384755,"reputation":183,"user_id":4289035,"display_name":"Gaurav kumar Singh"},"score":0,"creation_date":1595017990,"post_id":62961223,"comment_id":111340350,"body_markdown":"Hi, I would like to know what is wrong with the answer, if the model can be changed it would solve the problem (as also commented by @dnault). But if the model can not be changed then please ignore my answer. Thanks!","body":"Hi, I would like to know what is wrong with the answer, if the model can be changed it would solve the problem (as also commented by @dnault). But if the model can not be changed then please ignore my answer. Thanks!"},{"owner":{"account_id":341912,"reputation":1589,"user_id":672780,"accept_rate":100,"display_name":"LoganMzz"},"score":0,"creation_date":1692886707,"post_id":62961223,"comment_id":135687428,"body_markdown":"Dodging the problem isn&#39;t  really a valuable solution. The question is strictly about how to transform a string input into a list. Otherwise, there is no question at all.","body":"Dodging the problem isn&#39;t  really a valuable solution. The question is strictly about how to transform a string input into a list. Otherwise, there is no question at all."}],"tags":[],"owner":{"account_id":5384755,"reputation":183,"user_id":4289035,"display_name":"Gaurav kumar Singh"},"comment_count":2,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1595017002,"creation_date":1595017002,"answer_id":62961223,"question_id":62960892,"body_markdown":"Your Bean doesn&#39;t correctly represents the JSON. The correct version should look something like below \r\n\r\n\tclass Bean {\r\n\t  private String names;\r\n\t  private Integer values;\r\n\t  private String statuses;\r\n\t}\r\n\r\nAnd you can use [Object Mapper][1]\r\n\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n\tBean bean = objectMapper.readValue(json, Bean.class);  \r\n\r\nFinally, you can break down your Bean object to list of names, values and status for your further usages.  \r\n\r\n\r\n  [1]: https://www.baeldung.com/jackson-object-mapper-tutorial","title":"How to deserialize a string separated by comma to list with Jackson commonly?","body":"<p>Your Bean doesn't correctly represents the JSON. The correct version should look something like below</p>\n<pre><code>class Bean {\n  private String names;\n  private Integer values;\n  private String statuses;\n}\n</code></pre>\n<p>And you can use <a href=\"https://www.baeldung.com/jackson-object-mapper-tutorial\" rel=\"nofollow noreferrer\">Object Mapper</a></p>\n<pre><code>ObjectMapper objectMapper = new ObjectMapper();\nBean bean = objectMapper.readValue(json, Bean.class);  \n</code></pre>\n<p>Finally, you can break down your Bean object to list of names, values and status for your further usages.</p>\n"},{"tags":[],"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1595027170,"creation_date":1595027170,"answer_id":62962834,"question_id":62960892,"body_markdown":"To avoid manual deserialisation and handling all possible types we can use a fact that all items on the list are also `JSON` elements when we wrap them with a quote (`&quot;`) char.\r\n\r\nSo, we can convert `John, Tom` to a `&quot;John&quot;, &quot;Tom&quot;`, `8, 9` to `&quot;8&quot;, &quot;9&quot;` and so on.\r\n\r\nWe can use default `Jackson` behaviour which allows to handle unexpected tokens. In our case whenever: `STRING` token appears when `JSON ARRAY` was expected. To handle these cases we can use `com.fasterxml.jackson.databind.deser.DeserializationProblemHandler` class. It could look like below:\r\n\r\n    class ComaSeparatedValuesDeserializationProblemHandler extends DeserializationProblemHandler {\r\n    \r\n    \t@Override\r\n    \tpublic Object handleUnexpectedToken(DeserializationContext ctxt, JavaType targetType, JsonToken token, JsonParser parser, String failureMsg) throws IOException {\r\n    \t\tif (token == JsonToken.VALUE_STRING &amp;&amp; targetType.isCollectionLikeType()) {\r\n    \t\t\treturn deserializeAsList(targetType, parser);\r\n    \t\t}\r\n    \t\treturn super.handleUnexpectedToken(ctxt, targetType, token, parser, failureMsg);\r\n    \t}\r\n    \r\n    \tprivate Object deserializeAsList(JavaType listType, JsonParser parser) throws IOException {\r\n    \t\tString[] values = readValues(parser);\r\n    \r\n    \t\tObjectMapper mapper = (ObjectMapper) parser.getCodec();\r\n    \t\tJavaType itemType = listType.getContentType();\r\n    \r\n    \t\tList&lt;Object&gt; result = new ArrayList&lt;&gt;();\r\n    \t\tfor (String value : values) {\r\n    \t\t\tresult.add(convertToItemType(mapper, itemType, value));\r\n    \t\t}\r\n    \r\n    \t\treturn result;\r\n    \t}\r\n    \r\n    \tprivate Object convertToItemType(ObjectMapper mapper, JavaType contentType, String value) throws IOException {\r\n    \t\tfinal String json = &quot;\\&quot;&quot; + value.trim() + &quot;\\&quot;&quot;;\r\n    \r\n    \t\treturn mapper.readValue(json, contentType);\r\n    \t}\r\n    \r\n    \tprivate String[] readValues(JsonParser p) throws IOException {\r\n    \t\tfinal String text = p.getText();\r\n    \r\n    \t\treturn text.split(&quot;,&quot;);\r\n    \t}\r\n    }\r\n\r\nExample usage:\r\n\r\n    import com.fasterxml.jackson.core.JsonParser;\r\n    import com.fasterxml.jackson.core.JsonToken;\r\n    import com.fasterxml.jackson.databind.DeserializationContext;\r\n    import com.fasterxml.jackson.databind.JavaType;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.deser.DeserializationProblemHandler;\r\n    import com.fasterxml.jackson.databind.json.JsonMapper;\r\n    import com.google.common.base.Joiner;\r\n    import lombok.Data;\r\n    \r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class ConvertStringToCollectionApp {\r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \t\tFile jsonFile = new File(&quot;./resource/test.json&quot;).getAbsoluteFile();\r\n    \r\n    \t\tObjectMapper mapper = JsonMapper.builder()\r\n    \t\t\t\t.addHandler(new ComaSeparatedValuesDeserializationProblemHandler())\r\n    \t\t\t\t.build();\r\n    \r\n    \t\tBean bean = mapper.readValue(jsonFile, Bean.class);\r\n    \r\n    \t\tprint(bean.getNames());\r\n    \t\tprint(bean.getValues());\r\n    \t\tprint(bean.getStatuses());\r\n    \t}\r\n    \r\n    \tprivate static void print(List&lt;?&gt; values) {\r\n    \t\tvalues.stream().findFirst().ifPresent(value -&gt; System.out.print(value.getClass().getSimpleName() + &quot;s: &quot;));\r\n    \t\tSystem.out.println(Joiner.on(&quot;, &quot;).join(values));\r\n    \t}\r\n    }\r\n    \r\n    @Data\r\n    class Bean {\r\n    \tprivate List&lt;String&gt; names;\r\n    \tprivate List&lt;Integer&gt; values;\r\n    \tprivate List&lt;StatusEnum&gt; statuses;\r\n    }\r\n    \r\n    enum StatusEnum {\r\n    \tyes, no\r\n    }\r\n\r\nAbove app for your `JSON` payload prints:\r\n\r\n    Strings: John, Tom\r\n    Integers: 8, 9\r\n    StatusEnums: yes, no\r\n\r\nI used [Lombok][1] and [Guava][2] libraries just to make it simple and short but they are not mandatory to make it work.\r\n\r\n\r\n  [1]: https://projectlombok.org/features/all\r\n  [2]: https://github.com/google/guava","title":"How to deserialize a string separated by comma to list with Jackson commonly?","body":"<p>To avoid manual deserialisation and handling all possible types we can use a fact that all items on the list are also <code>JSON</code> elements when we wrap them with a quote (<code>&quot;</code>) char.</p>\n<p>So, we can convert <code>John, Tom</code> to a <code>&quot;John&quot;, &quot;Tom&quot;</code>, <code>8, 9</code> to <code>&quot;8&quot;, &quot;9&quot;</code> and so on.</p>\n<p>We can use default <code>Jackson</code> behaviour which allows to handle unexpected tokens. In our case whenever: <code>STRING</code> token appears when <code>JSON ARRAY</code> was expected. To handle these cases we can use <code>com.fasterxml.jackson.databind.deser.DeserializationProblemHandler</code> class. It could look like below:</p>\n<pre><code>class ComaSeparatedValuesDeserializationProblemHandler extends DeserializationProblemHandler {\n\n    @Override\n    public Object handleUnexpectedToken(DeserializationContext ctxt, JavaType targetType, JsonToken token, JsonParser parser, String failureMsg) throws IOException {\n        if (token == JsonToken.VALUE_STRING &amp;&amp; targetType.isCollectionLikeType()) {\n            return deserializeAsList(targetType, parser);\n        }\n        return super.handleUnexpectedToken(ctxt, targetType, token, parser, failureMsg);\n    }\n\n    private Object deserializeAsList(JavaType listType, JsonParser parser) throws IOException {\n        String[] values = readValues(parser);\n\n        ObjectMapper mapper = (ObjectMapper) parser.getCodec();\n        JavaType itemType = listType.getContentType();\n\n        List&lt;Object&gt; result = new ArrayList&lt;&gt;();\n        for (String value : values) {\n            result.add(convertToItemType(mapper, itemType, value));\n        }\n\n        return result;\n    }\n\n    private Object convertToItemType(ObjectMapper mapper, JavaType contentType, String value) throws IOException {\n        final String json = &quot;\\&quot;&quot; + value.trim() + &quot;\\&quot;&quot;;\n\n        return mapper.readValue(json, contentType);\n    }\n\n    private String[] readValues(JsonParser p) throws IOException {\n        final String text = p.getText();\n\n        return text.split(&quot;,&quot;);\n    }\n}\n</code></pre>\n<p>Example usage:</p>\n<pre><code>import com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.core.JsonToken;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JavaType;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.deser.DeserializationProblemHandler;\nimport com.fasterxml.jackson.databind.json.JsonMapper;\nimport com.google.common.base.Joiner;\nimport lombok.Data;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class ConvertStringToCollectionApp {\n    public static void main(String[] args) throws IOException {\n        File jsonFile = new File(&quot;./resource/test.json&quot;).getAbsoluteFile();\n\n        ObjectMapper mapper = JsonMapper.builder()\n                .addHandler(new ComaSeparatedValuesDeserializationProblemHandler())\n                .build();\n\n        Bean bean = mapper.readValue(jsonFile, Bean.class);\n\n        print(bean.getNames());\n        print(bean.getValues());\n        print(bean.getStatuses());\n    }\n\n    private static void print(List&lt;?&gt; values) {\n        values.stream().findFirst().ifPresent(value -&gt; System.out.print(value.getClass().getSimpleName() + &quot;s: &quot;));\n        System.out.println(Joiner.on(&quot;, &quot;).join(values));\n    }\n}\n\n@Data\nclass Bean {\n    private List&lt;String&gt; names;\n    private List&lt;Integer&gt; values;\n    private List&lt;StatusEnum&gt; statuses;\n}\n\nenum StatusEnum {\n    yes, no\n}\n</code></pre>\n<p>Above app for your <code>JSON</code> payload prints:</p>\n<pre><code>Strings: John, Tom\nIntegers: 8, 9\nStatusEnums: yes, no\n</code></pre>\n<p>I used <a href=\"https://projectlombok.org/features/all\" rel=\"noreferrer\">Lombok</a> and <a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a> libraries just to make it simple and short but they are not mandatory to make it work.</p>\n"},{"tags":[],"owner":{"account_id":10065967,"reputation":13,"user_id":7441153,"display_name":"jptx"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697618154,"creation_date":1697618154,"answer_id":77314701,"question_id":62960892,"body_markdown":"I also encountered this problem. And I completed the TODO in your code.\r\n\r\n``` Java\r\npublic class StringToListDeserializer extends JsonDeserializer&lt;List&lt;?&gt;&gt; implements ContextualDeserializer\r\n    public List&lt;?&gt; deserialize(JsonParser p, DeserializationContext context) throws IOException {\r\n        JavaType javaType = property.getType();\r\n        if (p.hasToken(JsonToken.VALUE_STRING)) {\r\n            String text = p.getText();\r\n            if (StringUtils.isBlank(text)) {\r\n                return null;\r\n            }\r\n            List&lt;?&gt; list = new LinkedList&lt;&gt;();\r\n            JavaType contentType = javaType.getContentType();\r\n            JsonDeserializer&lt;Object&gt; deserializer = context.findNonContextualValueDeserializer(contentType);\r\n\r\n            // To write json String\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n            for (String s : text.split(DELIMITER)) {\r\n                // As Michal Ziober said, it needs to be wrapped in quotation marks here\r\n                String wrappedValue = objectMapper.writeValueAsString(s);\r\n\r\n                // Generate JsonParser based on wrappedValue\r\n                JsonParser wrappedJsonParser = p.getCodec().getFactory().createParser(wrappedValue);\r\n\r\n                // Let JsonParser generate currentToken internally\r\n                wrappedJsonParser.nextToken();\r\n\r\n                // Deserialize the JSON string to a known type\r\n                Object value = deserializer.deserialize(wrappedJsonParser, context);\r\n\r\n                // Save the result\r\n                list.add(value);\r\n\r\n                // Should we do `wrappedJsonParser.close()`? I didn&#39;t try.\r\n\r\n            }\r\n            return list;\r\n        }\r\n        return context.readValue(p, javaType);\r\n    }\r\n```","title":"How to deserialize a string separated by comma to list with Jackson commonly?","body":"<p>I also encountered this problem. And I completed the TODO in your code.</p>\n<pre><code>public class StringToListDeserializer extends JsonDeserializer&lt;List&lt;?&gt;&gt; implements ContextualDeserializer\n    public List&lt;?&gt; deserialize(JsonParser p, DeserializationContext context) throws IOException {\n        JavaType javaType = property.getType();\n        if (p.hasToken(JsonToken.VALUE_STRING)) {\n            String text = p.getText();\n            if (StringUtils.isBlank(text)) {\n                return null;\n            }\n            List&lt;?&gt; list = new LinkedList&lt;&gt;();\n            JavaType contentType = javaType.getContentType();\n            JsonDeserializer&lt;Object&gt; deserializer = context.findNonContextualValueDeserializer(contentType);\n\n            // To write json String\n            ObjectMapper objectMapper = new ObjectMapper();\n\n            for (String s : text.split(DELIMITER)) {\n                // As Michal Ziober said, it needs to be wrapped in quotation marks here\n                String wrappedValue = objectMapper.writeValueAsString(s);\n\n                // Generate JsonParser based on wrappedValue\n                JsonParser wrappedJsonParser = p.getCodec().getFactory().createParser(wrappedValue);\n\n                // Let JsonParser generate currentToken internally\n                wrappedJsonParser.nextToken();\n\n                // Deserialize the JSON string to a known type\n                Object value = deserializer.deserialize(wrappedJsonParser, context);\n\n                // Save the result\n                list.add(value);\n\n                // Should we do `wrappedJsonParser.close()`? I didn't try.\n\n            }\n            return list;\n        }\n        return context.readValue(p, javaType);\n    }\n</code></pre>\n"}],"owner":{"account_id":19043421,"reputation":83,"user_id":13903041,"display_name":"Wong"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4895,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":62962834,"answer_count":3,"score":8,"last_activity_date":1697618154,"creation_date":1595015514,"question_id":62960892,"body_markdown":"I have a json like:\r\n\r\n```\r\n{\r\n  &quot;names&quot;: &quot;John, Tom&quot;,\r\n  &quot;values&quot;: &quot;8, 9&quot;,\r\n  &quot;statuses&quot;: &quot;yes, no&quot;\r\n}\r\n```\r\nand want to deserialize to:\r\n```\r\nclass Bean {\r\n  private List&lt;String&gt; names;\r\n  private List&lt;Integer&gt; values;\r\n  private List&lt;StatusEnum&gt; statuses;\r\n}\r\n```\r\nI know that implementing `StringToStringListDeserializer`, `StringToIntegerListDeserializer`, and `StringToStatusEnumListDeserializer` separately is practicable. But there are many other content types, including customized types. I tried:\r\n```\r\npublic class StringToListDeserializer&lt;T&gt; extends JsonDeserializer&lt;List&lt;T&gt;&gt; implements ContextualDeserializer\r\n    public List&lt;T&gt; deserialize(JsonParser p, DeserializationContext context) throws IOException {\r\n        JavaType javaType = property.getType();\r\n        if (p.hasToken(JsonToken.VALUE_STRING)) {\r\n            String text = p.getText();\r\n            if (StringUtils.isBlank(text)) {\r\n                return null;\r\n            }\r\n            List&lt;T&gt; list = new LinkedList&lt;&gt;();\r\n            JavaType contentType = javaType.getContentType();\r\n            JsonDeserializer&lt;Object&gt; deserializer = context.findNonContextualValueDeserializer(contentType);\r\n            for (String s : text.split(DELIMITER)) {\r\n\r\n                // todo how to deserialize the string to a known type?\r\n\r\n            }\r\n            return list;\r\n        }\r\n        return context.readValue(p, javaType);\r\n    }\r\n```\r\n and i don&#39;t know how to deserialize the string to the known content type. Is there any way to implement a universal deserializer?","title":"How to deserialize a string separated by comma to list with Jackson commonly?","body":"<p>I have a json like:</p>\n<pre><code>{\n  &quot;names&quot;: &quot;John, Tom&quot;,\n  &quot;values&quot;: &quot;8, 9&quot;,\n  &quot;statuses&quot;: &quot;yes, no&quot;\n}\n</code></pre>\n<p>and want to deserialize to:</p>\n<pre><code>class Bean {\n  private List&lt;String&gt; names;\n  private List&lt;Integer&gt; values;\n  private List&lt;StatusEnum&gt; statuses;\n}\n</code></pre>\n<p>I know that implementing <code>StringToStringListDeserializer</code>, <code>StringToIntegerListDeserializer</code>, and <code>StringToStatusEnumListDeserializer</code> separately is practicable. But there are many other content types, including customized types. I tried:</p>\n<pre><code>public class StringToListDeserializer&lt;T&gt; extends JsonDeserializer&lt;List&lt;T&gt;&gt; implements ContextualDeserializer\n    public List&lt;T&gt; deserialize(JsonParser p, DeserializationContext context) throws IOException {\n        JavaType javaType = property.getType();\n        if (p.hasToken(JsonToken.VALUE_STRING)) {\n            String text = p.getText();\n            if (StringUtils.isBlank(text)) {\n                return null;\n            }\n            List&lt;T&gt; list = new LinkedList&lt;&gt;();\n            JavaType contentType = javaType.getContentType();\n            JsonDeserializer&lt;Object&gt; deserializer = context.findNonContextualValueDeserializer(contentType);\n            for (String s : text.split(DELIMITER)) {\n\n                // todo how to deserialize the string to a known type?\n\n            }\n            return list;\n        }\n        return context.readValue(p, javaType);\n    }\n</code></pre>\n<p>and i don't know how to deserialize the string to the known content type. Is there any way to implement a universal deserializer?</p>\n"},{"tags":["java","android","google-maps","maps"],"comments":[{"owner":{"account_id":16549589,"reputation":177,"user_id":11958275,"display_name":"Ghazanfar Ateeb"},"score":0,"creation_date":1697548571,"post_id":77309185,"comment_id":136291633,"body_markdown":"Have you tried `FusedProviderClient` for Google Maps?","body":"Have you tried <code>FusedProviderClient</code> for Google Maps?"}],"answers":[{"tags":[],"owner":{"account_id":29686742,"reputation":11,"user_id":22752098,"display_name":"an_android_dev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697548922,"creation_date":1697548922,"answer_id":77309377,"question_id":77309185,"body_markdown":"Google maps requires an API key and you do need to [enable billing to get one](https://developers.google.com/maps/documentation/android-sdk/get-api-key#before-you-begin).\r\n\r\nHowever there is a [monthly $200 credit](https://developers.google.com/maps/billing-and-pricing/billing?_gl=1*ztdkhj*_ga*MjE0MDIxMjk0OC4xNjk3NTQ3OTc5*_ga_NRWSTWS78N*MTY5NzU0Nzk3OC4xLjEuMTY5NzU0Nzk5MC4wLjAuMA..#monthly-credit) for maps and Android maps are supposedly free (haven&#39;t tried personally):\r\n&gt; Note that the Maps Embed API, Maps SDK for Android, and Maps SDK for iOS currently have no usage limits and are at no charge (usage of the API or SDKs is not applied against your $200 monthly credit).\r\n\r\nSource: https://mapsplatform.google.com/pricing/\r\n\r\n","title":"How to activate Google Maps on android","body":"<p>Google maps requires an API key and you do need to <a href=\"https://developers.google.com/maps/documentation/android-sdk/get-api-key#before-you-begin\" rel=\"nofollow noreferrer\">enable billing to get one</a>.</p>\n<p>However there is a <a href=\"https://developers.google.com/maps/billing-and-pricing/billing?_gl=1*ztdkhj*_ga*MjE0MDIxMjk0OC4xNjk3NTQ3OTc5*_ga_NRWSTWS78N*MTY5NzU0Nzk3OC4xLjEuMTY5NzU0Nzk5MC4wLjAuMA..#monthly-credit\" rel=\"nofollow noreferrer\">monthly $200 credit</a> for maps and Android maps are supposedly free (haven't tried personally):</p>\n<blockquote>\n<p>Note that the Maps Embed API, Maps SDK for Android, and Maps SDK for iOS currently have no usage limits and are at no charge (usage of the API or SDKs is not applied against your $200 monthly credit).</p>\n</blockquote>\n<p>Source: <a href=\"https://mapsplatform.google.com/pricing/\" rel=\"nofollow noreferrer\">https://mapsplatform.google.com/pricing/</a></p>\n"},{"tags":[],"owner":{"account_id":9485090,"reputation":1,"user_id":7051677,"display_name":"Surjya Das"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697617256,"creation_date":1697617256,"answer_id":77314582,"question_id":77309185,"body_markdown":"The Google map api  is free for first 5 hit.\r\n\r\nYou need to  setup  billing account to use the location api service.\r\n\r\nFor more info\r\n\r\nhttps://mapsplatform.google.com/pricing/\r\n","title":"How to activate Google Maps on android","body":"<p>The Google map api  is free for first 5 hit.</p>\n<p>You need to  setup  billing account to use the location api service.</p>\n<p>For more info</p>\n<p><a href=\"https://mapsplatform.google.com/pricing/\" rel=\"nofollow noreferrer\">https://mapsplatform.google.com/pricing/</a></p>\n"},{"tags":[],"owner":{"account_id":29698332,"reputation":62,"user_id":22761072,"display_name":"JimmyP"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697618121,"creation_date":1697618121,"answer_id":77314695,"question_id":77309185,"body_markdown":"Google Maps Platform is now has a pay-as-you-go billing model which means that you are charged for how many requests/map loads you make. \r\nhttps://developers.google.com/maps/billing-and-pricing/billing\r\n\r\nYou will need to set up billing:\r\nhttps://support.google.com/googleapi/answer/6158867?hl=en\r\n\r\nOnce you&#39;ve done that you can create or connect a project to the billing account: \r\nhttps://developers.google.com/maps/get-started#quickstart\r\n\r\nYou can then create an API key using the steps in the link above. \r\n\r\nYou will have $200 of maps monthly credits each and every month to use before you are charged: \r\nhttps://developers.google.com/maps/billing-and-pricing/billing#monthly-credit\r\n\r\nPlease take a look at the pricing of the SKUs here: \r\nhttps://developers.google.com/maps/billing-and-pricing/pricing\r\n\r\nYou can optimise your usage, set budget alerts or set daily caps on your APIs, check this optimization guide out: \r\nhttps://developers.google.com/maps/optimization-guide\r\n\r\nDon&#39;t forget to secure your API keys too: \r\nhttps://developers.google.com/maps/api-security-best-practices\r\n\r\nAndroid SDk map loads are free unless you are loading the Maps JavaScript API or using a MapID for styling the Map: \r\nhttps://developers.google.com/maps/documentation/android-sdk/usage-and-billing#dynamic-maps\r\n\r\nSo, you can set daily quota limits so that you can&#39;t go over the $200 maps monthly credits and then you won&#39;t be charged for the usage, it will instead return errors. \r\n\r\n","title":"How to activate Google Maps on android","body":"<p>Google Maps Platform is now has a pay-as-you-go billing model which means that you are charged for how many requests/map loads you make.\n<a href=\"https://developers.google.com/maps/billing-and-pricing/billing\" rel=\"nofollow noreferrer\">https://developers.google.com/maps/billing-and-pricing/billing</a></p>\n<p>You will need to set up billing:\n<a href=\"https://support.google.com/googleapi/answer/6158867?hl=en\" rel=\"nofollow noreferrer\">https://support.google.com/googleapi/answer/6158867?hl=en</a></p>\n<p>Once you've done that you can create or connect a project to the billing account:\n<a href=\"https://developers.google.com/maps/get-started#quickstart\" rel=\"nofollow noreferrer\">https://developers.google.com/maps/get-started#quickstart</a></p>\n<p>You can then create an API key using the steps in the link above.</p>\n<p>You will have $200 of maps monthly credits each and every month to use before you are charged:\n<a href=\"https://developers.google.com/maps/billing-and-pricing/billing#monthly-credit\" rel=\"nofollow noreferrer\">https://developers.google.com/maps/billing-and-pricing/billing#monthly-credit</a></p>\n<p>Please take a look at the pricing of the SKUs here:\n<a href=\"https://developers.google.com/maps/billing-and-pricing/pricing\" rel=\"nofollow noreferrer\">https://developers.google.com/maps/billing-and-pricing/pricing</a></p>\n<p>You can optimise your usage, set budget alerts or set daily caps on your APIs, check this optimization guide out:\n<a href=\"https://developers.google.com/maps/optimization-guide\" rel=\"nofollow noreferrer\">https://developers.google.com/maps/optimization-guide</a></p>\n<p>Don't forget to secure your API keys too:\n<a href=\"https://developers.google.com/maps/api-security-best-practices\" rel=\"nofollow noreferrer\">https://developers.google.com/maps/api-security-best-practices</a></p>\n<p>Android SDk map loads are free unless you are loading the Maps JavaScript API or using a MapID for styling the Map:\n<a href=\"https://developers.google.com/maps/documentation/android-sdk/usage-and-billing#dynamic-maps\" rel=\"nofollow noreferrer\">https://developers.google.com/maps/documentation/android-sdk/usage-and-billing#dynamic-maps</a></p>\n<p>So, you can set daily quota limits so that you can't go over the $200 maps monthly credits and then you won't be charged for the usage, it will instead return errors.</p>\n"}],"owner":{"account_id":29691902,"reputation":13,"user_id":22756098,"display_name":"MABCO Developer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77314695,"answer_count":3,"score":1,"last_activity_date":1697618121,"creation_date":1697547361,"question_id":77309185,"body_markdown":"I have an old java android project with simple using of google map for allocating some store locations .\r\nthe map fragment stopped working on new android version showing blank page while working on older versions like android 9 or older .. \r\n\r\nI tried to activate the Google Map API from Google Cloud it says that I need to purchase the service\r\ndoes it no longer available for free ?\r\nand if so is there any way of activating it with out baying the service?\r\nany help appreciated \r\nthanks ..","title":"How to activate Google Maps on android","body":"<p>I have an old java android project with simple using of google map for allocating some store locations .\nthe map fragment stopped working on new android version showing blank page while working on older versions like android 9 or older ..</p>\n<p>I tried to activate the Google Map API from Google Cloud it says that I need to purchase the service\ndoes it no longer available for free ?\nand if so is there any way of activating it with out baying the service?\nany help appreciated\nthanks ..</p>\n"},{"tags":["java","jenkins","cross-browser","testng","allure"],"answers":[{"tags":[],"owner":{"account_id":12666485,"reputation":79,"user_id":9205586,"display_name":"Nikola Jakubiak"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697618021,"creation_date":1697618021,"answer_id":77314676,"question_id":76171615,"body_markdown":"You need to create dynamic test names + manipulate with Allure historyId, browserPrefix() need to implemented by you:\r\n\r\nExample:\r\n\r\n    @Story(&quot;Your Story Name&quot;)\r\n    @Test\r\n    public void loginStandardUser() {\r\n      updateTestNameForAllure(browserPrefix() + &quot;YourStoryName&quot;);\r\n      standardUserActions.loginAction();\r\n    }\r\n    \r\n    private void updateTestNameAndHistoryIdForAllure(String newName) {\r\n      Allure.getLifecycle().updateTestCase(testResult -&gt; testResult.setName(newName));\r\n      String customHistoryId = Utils.generateConsistentHistoryId(newName, getBrowserName());\r\n      Allure.getLifecycle().updateTestCase(testResult -&gt; testResult.setHistoryId(customUUID));\r\n    }\r\n    \r\n    privat String generateConsistentHistoryId(String newName, String browserName) {\r\n      String baseString = newName + browserName;\r\n      return UUID.nameUUIDFromBytes(baseString.getBytes()).toString();\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TxuWP.png","title":"Cross Browser Testing with Allure report","body":"<p>You need to create dynamic test names + manipulate with Allure historyId, browserPrefix() need to implemented by you:</p>\n<p>Example:</p>\n<pre><code>@Story(&quot;Your Story Name&quot;)\n@Test\npublic void loginStandardUser() {\n  updateTestNameForAllure(browserPrefix() + &quot;YourStoryName&quot;);\n  standardUserActions.loginAction();\n}\n\nprivate void updateTestNameAndHistoryIdForAllure(String newName) {\n  Allure.getLifecycle().updateTestCase(testResult -&gt; testResult.setName(newName));\n  String customHistoryId = Utils.generateConsistentHistoryId(newName, getBrowserName());\n  Allure.getLifecycle().updateTestCase(testResult -&gt; testResult.setHistoryId(customUUID));\n}\n\nprivat String generateConsistentHistoryId(String newName, String browserName) {\n  String baseString = newName + browserName;\n  return UUID.nameUUIDFromBytes(baseString.getBytes()).toString();\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/TxuWP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TxuWP.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":6757274,"reputation":71,"user_id":5205189,"display_name":"Silviu Sabău"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697618021,"creation_date":1683192400,"question_id":76171615,"body_markdown":"I have a web application that I&#39;m testing in 2 browsers: chrome and edge. The results of the tests must appear in an Allure Report on a Jenkins server. The problem that I am facing is that Allure only shows the test results on the second browser where the tests ran while ignoring the first browser. \r\n\r\nMy setup is as follows: A BrowserFactory class that takes care of the browser setup and initialization.\r\n\r\n    public class BrowserFactory {\r\n    private static WebDriver driver;\r\n\r\n    public static WebDriver getDriver() {\r\n        String browser = System.getProperty(&quot;BrowserName&quot;);\r\n        if (&quot;edge&quot;.equals(browser)) {\r\n            driver = initializeEdgeDriver();\r\n            return driver;\r\n        }\r\n        driver = initializeChromeDriver();\r\n        return driver;\r\n    }\r\n\r\n    public static String getBrowserInfo() {\r\n        return ((RemoteWebDriver) driver).getCapabilities().getBrowserVersion();\r\n    }\r\n\r\n    private static WebDriver initializeChromeDriver() {\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,\r\n                Optional.ofNullable(BrowserFactory.class.getClassLoader()\r\n                                .getResource(&quot;drivers//chromedriver.exe&quot;))\r\n                        .orElseThrow(() -&gt; new RuntimeException(&quot;Missing driver!&quot;)).getPath());\r\n        System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\r\n        ChromeOptions chromeOptions = new ChromeOptions();\r\n        chromeOptions.addArguments(&quot;--lang=en&quot;);\r\n        chromeOptions.addArguments(&quot;--no-sandbox&quot;);\r\n        chromeOptions.addArguments(&quot;--headless&quot;);\r\n        chromeOptions.setAcceptInsecureCerts(true);\r\n        WebDriver driver = new ChromeDriver(chromeOptions);\r\n        configureDriver(driver);\r\n        return driver;\r\n    }\r\n\r\nNext is the Page class that has all the general operations that can be made on a given web page. The snippet bellow contains only what is relevant for this topic. I am using ThreadLocal for parallel testing.\r\n\r\n    public class Page {\r\n    protected static final ThreadLocal&lt;WebDriver&gt; driver = new ThreadLocal&lt;&gt;();\r\n\r\n    public static void startBrowser() {\r\n        driver.set(ThreadGuard.protect(BrowserFactory.getDriver()));\r\n    }\r\n\r\n    public static WebDriver getDriver() {\r\n        return driver.get();\r\n    }\r\n\r\n    public static void closeBrowser() {\r\n        getDriver().close();\r\n        getDriver().quit();\r\n        driver.remove();\r\n    }\r\n\r\nNext is a test class\r\n\r\n    public class TestSomething {\r\n    @BeforeMethod\r\n    public void setUp() {\r\n        Page.startBrowser();\r\n    }\r\n\r\n    @AfterMethod(alwaysRun = true)\r\n    public void tearDown() {\r\n        Page.closeBrowser();\r\n    }\r\n\r\n    @Test()\r\n    public void retrieveBearerToken() {\r\n        //do some test     \r\n    }\r\n\r\nIn Jenkins I&#39;m calling this runner on 2 separate jobs, one for chrome and one for edge, with the following commands:\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE suite SYSTEM &quot;https://testng.org/testng-1.0.dtd&quot; &gt;\r\n    &lt;suite name=&quot;Test something&quot;&gt;\r\n    &lt;listeners&gt;\r\n    &lt;listener class-name=&quot;org.evidian.qaautomation.util.testngcustomized.RetryFailedTestListener&quot;/&gt;\r\n    &lt;/listeners&gt;\r\n    &lt;test name=&quot;Test something&quot;&gt;\r\n    &lt;parameter name=&quot;BrowserName&quot; value=&quot;${BrowserName}&quot;/&gt;\r\n    &lt;classes&gt;\r\n    &lt;class name=&quot;ui.test.TestSomething&quot;/&gt;\r\n    &lt;/classes&gt;\r\n    &lt;/test&gt;\r\n    &lt;/suite&gt;\r\n\r\n    test -DsuiteXMLFile=src/main/resources/Runner/test_Something.xml, -DBrowserName=edge\r\n    test -DsuiteXMLFile=src/main/resources/Runner/test_Something.xml, -DBrowserName=chrome\r\n\r\nWhat am I missing? Is Allure not able to support cross browser testing? Or is there something else?\r\n    ","title":"Cross Browser Testing with Allure report","body":"<p>I have a web application that I'm testing in 2 browsers: chrome and edge. The results of the tests must appear in an Allure Report on a Jenkins server. The problem that I am facing is that Allure only shows the test results on the second browser where the tests ran while ignoring the first browser.</p>\n<p>My setup is as follows: A BrowserFactory class that takes care of the browser setup and initialization.</p>\n<pre><code>public class BrowserFactory {\nprivate static WebDriver driver;\n\npublic static WebDriver getDriver() {\n    String browser = System.getProperty(&quot;BrowserName&quot;);\n    if (&quot;edge&quot;.equals(browser)) {\n        driver = initializeEdgeDriver();\n        return driver;\n    }\n    driver = initializeChromeDriver();\n    return driver;\n}\n\npublic static String getBrowserInfo() {\n    return ((RemoteWebDriver) driver).getCapabilities().getBrowserVersion();\n}\n\nprivate static WebDriver initializeChromeDriver() {\n    System.setProperty(&quot;webdriver.chrome.driver&quot;,\n            Optional.ofNullable(BrowserFactory.class.getClassLoader()\n                            .getResource(&quot;drivers//chromedriver.exe&quot;))\n                    .orElseThrow(() -&gt; new RuntimeException(&quot;Missing driver!&quot;)).getPath());\n    System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\n    ChromeOptions chromeOptions = new ChromeOptions();\n    chromeOptions.addArguments(&quot;--lang=en&quot;);\n    chromeOptions.addArguments(&quot;--no-sandbox&quot;);\n    chromeOptions.addArguments(&quot;--headless&quot;);\n    chromeOptions.setAcceptInsecureCerts(true);\n    WebDriver driver = new ChromeDriver(chromeOptions);\n    configureDriver(driver);\n    return driver;\n}\n</code></pre>\n<p>Next is the Page class that has all the general operations that can be made on a given web page. The snippet bellow contains only what is relevant for this topic. I am using ThreadLocal for parallel testing.</p>\n<pre><code>public class Page {\nprotected static final ThreadLocal&lt;WebDriver&gt; driver = new ThreadLocal&lt;&gt;();\n\npublic static void startBrowser() {\n    driver.set(ThreadGuard.protect(BrowserFactory.getDriver()));\n}\n\npublic static WebDriver getDriver() {\n    return driver.get();\n}\n\npublic static void closeBrowser() {\n    getDriver().close();\n    getDriver().quit();\n    driver.remove();\n}\n</code></pre>\n<p>Next is a test class</p>\n<pre><code>public class TestSomething {\n@BeforeMethod\npublic void setUp() {\n    Page.startBrowser();\n}\n\n@AfterMethod(alwaysRun = true)\npublic void tearDown() {\n    Page.closeBrowser();\n}\n\n@Test()\npublic void retrieveBearerToken() {\n    //do some test     \n}\n</code></pre>\n<p>In Jenkins I'm calling this runner on 2 separate jobs, one for chrome and one for edge, with the following commands:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE suite SYSTEM &quot;https://testng.org/testng-1.0.dtd&quot; &gt;\n&lt;suite name=&quot;Test something&quot;&gt;\n&lt;listeners&gt;\n&lt;listener class-name=&quot;org.evidian.qaautomation.util.testngcustomized.RetryFailedTestListener&quot;/&gt;\n&lt;/listeners&gt;\n&lt;test name=&quot;Test something&quot;&gt;\n&lt;parameter name=&quot;BrowserName&quot; value=&quot;${BrowserName}&quot;/&gt;\n&lt;classes&gt;\n&lt;class name=&quot;ui.test.TestSomething&quot;/&gt;\n&lt;/classes&gt;\n&lt;/test&gt;\n&lt;/suite&gt;\n\ntest -DsuiteXMLFile=src/main/resources/Runner/test_Something.xml, -DBrowserName=edge\ntest -DsuiteXMLFile=src/main/resources/Runner/test_Something.xml, -DBrowserName=chrome\n</code></pre>\n<p>What am I missing? Is Allure not able to support cross browser testing? Or is there something else?</p>\n"},{"tags":["java","jboss","migration","redhat","intellij-plugin"],"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697617958,"creation_date":1697617958,"question_id":77314671,"body_markdown":"This is the configuration (I attach only selected options)\r\n\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\n[![enter image description here][4]][4]\r\n\r\n\r\nWhen I launch, I have this error\r\n\r\n[![enter image description here][5]][5]\r\n\r\nI have tried to search this error online and in the documentation; I&#39;ve also tried to change Java version, but without success. The other options in the configuration doesn&#39;t seems to help. Do you know how I can solve?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/n4gK2.png\r\n  [2]: https://i.stack.imgur.com/mysfX.png\r\n  [3]: https://i.stack.imgur.com/4ToFc.png\r\n  [4]: https://i.stack.imgur.com/v6usC.png\r\n  [5]: https://i.stack.imgur.com/RDrp9.png","title":"Error launching Redhat MTA plugin configuration from IntelliJ","body":"<p>This is the configuration (I attach only selected options)</p>\n<p><a href=\"https://i.stack.imgur.com/n4gK2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n4gK2.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/mysfX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mysfX.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/4ToFc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4ToFc.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/v6usC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v6usC.png\" alt=\"enter image description here\" /></a></p>\n<p>When I launch, I have this error</p>\n<p><a href=\"https://i.stack.imgur.com/RDrp9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RDrp9.png\" alt=\"enter image description here\" /></a></p>\n<p>I have tried to search this error online and in the documentation; I've also tried to change Java version, but without success. The other options in the configuration doesn't seems to help. Do you know how I can solve?</p>\n"},{"tags":["java","reflection"],"comments":[{"owner":{"account_id":19372481,"reputation":106,"user_id":14165494,"display_name":"Harish Dalmia"},"score":1,"creation_date":1697565494,"post_id":77311202,"comment_id":136294947,"body_markdown":"if (String.class.equals(type)) {\n            field.set(rule, fieldValue);\n        } else {\n            Method valueOf = type.getMethod(&quot;valueOf&quot;, String.class);\n            field.set(rule, valueOf.invoke(null, fieldValue));\n        }\n\nPlease update the if-else code with the above and also remove the  Method valueOf;\nSeems, this is happening due to the overloading of the &quot;valueOf&quot; method for different params and different classes.\nPlease try once.","body":"if (String.class.equals(type)) {             field.set(rule, fieldValue);         } else {             Method valueOf = type.getMethod(&quot;valueOf&quot;, String.class);             field.set(rule, valueOf.invoke(null, fieldValue));         }  Please update the if-else code with the above and also remove the  Method valueOf; Seems, this is happening due to the overloading of the &quot;valueOf&quot; method for different params and different classes. Please try once."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1697567679,"post_id":77311202,"comment_id":136295300,"body_markdown":"Try finding the String version first and if not found look for Object version.","body":"Try finding the String version first and if not found look for Object version."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1697567822,"post_id":77311202,"comment_id":136295321,"body_markdown":"You&#39;ll need to convert the _type_ for _primitive data-types_.  This isn&#39;t a practical application; is there a specific functionality you&#39;re looking to use, or just practicing code?","body":"You&#39;ll need to convert the <i>type</i> for <i>primitive data-types</i>.  This isn&#39;t a practical application; is there a specific functionality you&#39;re looking to use, or just practicing code?"},{"owner":{"account_id":10315060,"reputation":3,"user_id":7609613,"display_name":"Mojtaba"},"score":0,"creation_date":1697569729,"post_id":77311202,"comment_id":136295643,"body_markdown":"@HarishDalmia, Thanks, I did it. it&#39;s shorter and better but Is there any solution to avoid using if clause?","body":"@HarishDalmia, Thanks, I did it. it&#39;s shorter and better but Is there any solution to avoid using if clause?"},{"owner":{"account_id":10315060,"reputation":3,"user_id":7609613,"display_name":"Mojtaba"},"score":0,"creation_date":1697569975,"post_id":77311202,"comment_id":136295689,"body_markdown":"@Reilas, I&#39;m trying to read an Excel file and map it to a POJO.","body":"@Reilas, I&#39;m trying to read an Excel file and map it to a POJO."},{"owner":{"account_id":19372481,"reputation":106,"user_id":14165494,"display_name":"Harish Dalmia"},"score":0,"creation_date":1697617735,"post_id":77311202,"comment_id":136300996,"body_markdown":"@Mojtaba - Yes, we can use try-catch. In the try block, we can use String. class and when it fails and proceeds to catch block there we can log the error if needed and use Object.class. Will add code to the solution. Thanks","body":"@Mojtaba - Yes, we can use try-catch. In the try block, we can use String. class and when it fails and proceeds to catch block there we can log the error if needed and use Object.class. Will add code to the solution. Thanks"},{"owner":{"account_id":9494766,"reputation":147,"user_id":7058262,"display_name":"prasannajoshi"},"score":0,"creation_date":1697618196,"post_id":77311202,"comment_id":136301104,"body_markdown":"@Mojtaba writing correct reflection based code is always tricky and error prone, try to use existing library like apache beanutils which solves problem easily","body":"@Mojtaba writing correct reflection based code is always tricky and error prone, try to use existing library like apache beanutils which solves problem easily"}],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1697728486,"post_id":77311998,"comment_id":136318953,"body_markdown":"Some of the invoked constructors have been marked “*Deprecated, for removal*”, see for example [`Double(String)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Double.html#%3Cinit%3E(java.lang.String)) or [`Integer(String)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html#%3Cinit%3E(java.lang.String)). So, don’t be surprised when this code stops working with a future Java version.","body":"Some of the invoked constructors have been marked “<i>Deprecated, for removal</i>”, see for example <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Double.html#%3Cinit%3E(java.lang.String)\" rel=\"nofollow noreferrer\"><code>Double(String)</code></a> or <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html#%3Cinit%3E(java.lang.String)\" rel=\"nofollow noreferrer\"><code>Integer(String)</code></a>. So, don’t be surprised when this code stops working with a future Java version."}],"tags":[],"owner":{"account_id":25748814,"reputation":146,"user_id":19501659,"display_name":"Habib Z."},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697573578,"creation_date":1697573578,"answer_id":77311998,"question_id":77311202,"body_markdown":"You can use the types constructor (with String arg) instead of the valueOf method : \r\n\r\n    static class Rule {\r\n\t\tprivate String stringField;\r\n\t\tprivate Integer integerField;\r\n\t\tprivate Double doubleField;\r\n\t\tprivate Long longField;\r\n\t\tprivate Boolean booleanField;\r\n\t\tprivate BigDecimal bigDecimalField;\r\n\t}\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\tRule rule = new Rule();\r\n\t\tsetFieldValue(rule, &quot;stringField&quot;, &quot;string val&quot;);\r\n\t\tsetFieldValue(rule, &quot;integerField&quot;, &quot;12&quot;);\r\n\t\tsetFieldValue(rule, &quot;doubleField&quot;, &quot;1.23&quot;);\r\n\t\tsetFieldValue(rule, &quot;longField&quot;, &quot;19877754&quot;);\r\n\t\tsetFieldValue(rule, &quot;booleanField&quot;, &quot;false&quot;);\r\n\t\tsetFieldValue(rule, &quot;bigDecimalField&quot;, &quot;879565.3565754&quot;);\r\n\t\tSystem.out.println(rule.stringField);\r\n\t\tSystem.out.println(rule.integerField);\r\n\t\tSystem.out.println(rule.doubleField);\r\n\t\tSystem.out.println(rule.longField);\r\n\t\tSystem.out.println(rule.booleanField);\r\n\t\tSystem.out.println(rule.bigDecimalField);\r\n\t}\r\n\r\n\tprivate static void setFieldValue(Rule rule, String fieldName, String fieldValue) throws Exception {\r\n\t\tField field = Rule.class.getDeclaredField(fieldName);\r\n\t\tfield.setAccessible(true);\r\n\t\tClass&lt;?&gt; type = field.getType();\r\n\t\tConstructor&lt;?&gt; valueOf = type.getConstructor(String.class);\r\n\t\tfield.set(rule, valueOf.newInstance(fieldValue));\r\n\t}\r\n\r\nOutput : \r\n\r\n    string val\r\n    12\r\n    1.23\r\n    19877754\r\n    false\r\n    879565.3565754\r\n\r\n","title":"Java Reflection - Invoke valueOf on different types","body":"<p>You can use the types constructor (with String arg) instead of the valueOf method :</p>\n<pre><code>static class Rule {\n    private String stringField;\n    private Integer integerField;\n    private Double doubleField;\n    private Long longField;\n    private Boolean booleanField;\n    private BigDecimal bigDecimalField;\n}\n\npublic static void main(String[] args) throws Exception {\n    Rule rule = new Rule();\n    setFieldValue(rule, &quot;stringField&quot;, &quot;string val&quot;);\n    setFieldValue(rule, &quot;integerField&quot;, &quot;12&quot;);\n    setFieldValue(rule, &quot;doubleField&quot;, &quot;1.23&quot;);\n    setFieldValue(rule, &quot;longField&quot;, &quot;19877754&quot;);\n    setFieldValue(rule, &quot;booleanField&quot;, &quot;false&quot;);\n    setFieldValue(rule, &quot;bigDecimalField&quot;, &quot;879565.3565754&quot;);\n    System.out.println(rule.stringField);\n    System.out.println(rule.integerField);\n    System.out.println(rule.doubleField);\n    System.out.println(rule.longField);\n    System.out.println(rule.booleanField);\n    System.out.println(rule.bigDecimalField);\n}\n\nprivate static void setFieldValue(Rule rule, String fieldName, String fieldValue) throws Exception {\n    Field field = Rule.class.getDeclaredField(fieldName);\n    field.setAccessible(true);\n    Class&lt;?&gt; type = field.getType();\n    Constructor&lt;?&gt; valueOf = type.getConstructor(String.class);\n    field.set(rule, valueOf.newInstance(fieldValue));\n}\n</code></pre>\n<p>Output :</p>\n<pre><code>string val\n12\n1.23\n19877754\nfalse\n879565.3565754\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19372481,"reputation":106,"user_id":14165494,"display_name":"Harish Dalmia"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697617856,"creation_date":1697617856,"answer_id":77314652,"question_id":77311202,"body_markdown":"As discussed in the comment, if we want to avoid using the if clause - we can try using try catch to achieve. Below is the updated code.\r\n\r\n\r\n    private static void setFieldValue(String fieldName, String fieldValue, Rule rule) throws Exception {\r\n        Field field = Rule.class.getDeclaredField(fieldName);\r\n        field.setAccessible(true);\r\n        Class&lt;?&gt; type = field.getType();\r\n        Method valueOf;\r\n        try {\r\n            valueOf = type.getMethod(&quot;valueOf&quot;, String.class);\r\n\r\n        } catch (NoSuchMethodException e) {\r\n            valueOf = type.getMethod(&quot;valueOf&quot;, Object.class);\r\n        }\r\n       field.set(rule, valueOf.invoke(null, fieldValue));\r\n    }\r\n\r\nPlease try and update. Thank you.","title":"Java Reflection - Invoke valueOf on different types","body":"<p>As discussed in the comment, if we want to avoid using the if clause - we can try using try catch to achieve. Below is the updated code.</p>\n<pre><code>private static void setFieldValue(String fieldName, String fieldValue, Rule rule) throws Exception {\n    Field field = Rule.class.getDeclaredField(fieldName);\n    field.setAccessible(true);\n    Class&lt;?&gt; type = field.getType();\n    Method valueOf;\n    try {\n        valueOf = type.getMethod(&quot;valueOf&quot;, String.class);\n\n    } catch (NoSuchMethodException e) {\n        valueOf = type.getMethod(&quot;valueOf&quot;, Object.class);\n    }\n   field.set(rule, valueOf.invoke(null, fieldValue));\n}\n</code></pre>\n<p>Please try and update. Thank you.</p>\n"}],"owner":{"account_id":10315060,"reputation":3,"user_id":7609613,"display_name":"Mojtaba"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77311998,"answer_count":2,"score":0,"last_activity_date":1697617856,"creation_date":1697564938,"question_id":77311202,"body_markdown":"I am trying to invoke the valueOf method on different types such as Integer, String,... using reflection.\r\n\r\nI want to know how to call this method using reflection with only one `getMehod()`.\r\n\r\nThe problem is when the type is `java.lang.String` the `valueOf` method doesn&#39;t accept the String parameter and when it is Integer or other types the valueOf method  doesn&#39;t accept the `Object.class` .\r\n\r\nI used one if clause to differentiate them as you can see below but I want to remove the if clause.\r\n\r\n```\r\nprivate static void setFieldValue(String fieldName, String fieldValue, Rule rule) throws Exception {\r\n        Field field = Rule.class.getDeclaredField(fieldName);\r\n        field.setAccessible(true);\r\n        Class&lt;?&gt; type = field.getType();\r\n        Method valueOf;\r\n\r\n        // here I checked the type\r\n\r\n        if (String.class.equals(type))\r\n            valueOf = type.getMethod(&quot;valueOf&quot;, Object.class);\r\n        else\r\n            valueOf = type.getMethod(&quot;valueOf&quot;, String.class);\r\n        field.set(rule, valueOf.invoke(null, fieldValue));\r\n}\r\n```","title":"Java Reflection - Invoke valueOf on different types","body":"<p>I am trying to invoke the valueOf method on different types such as Integer, String,... using reflection.</p>\n<p>I want to know how to call this method using reflection with only one <code>getMehod()</code>.</p>\n<p>The problem is when the type is <code>java.lang.String</code> the <code>valueOf</code> method doesn't accept the String parameter and when it is Integer or other types the valueOf method  doesn't accept the <code>Object.class</code> .</p>\n<p>I used one if clause to differentiate them as you can see below but I want to remove the if clause.</p>\n<pre><code>private static void setFieldValue(String fieldName, String fieldValue, Rule rule) throws Exception {\n        Field field = Rule.class.getDeclaredField(fieldName);\n        field.setAccessible(true);\n        Class&lt;?&gt; type = field.getType();\n        Method valueOf;\n\n        // here I checked the type\n\n        if (String.class.equals(type))\n            valueOf = type.getMethod(&quot;valueOf&quot;, Object.class);\n        else\n            valueOf = type.getMethod(&quot;valueOf&quot;, String.class);\n        field.set(rule, valueOf.invoke(null, fieldValue));\n}\n</code></pre>\n"},{"tags":["java","bluetooth"],"owner":{"account_id":962024,"reputation":342,"user_id":986163,"accept_rate":33,"display_name":"George Violettas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697617584,"creation_date":1697617584,"question_id":77314615,"body_markdown":"I am using the following Java code to successfully discover Bluetooth devices connected to my PC (Windows).\r\n\r\n    import javax.bluetooth.*;\r\n    import java.io.IOException;\r\n\r\n    public class SimpleTry {\r\n       public static void main(String[] args) throws BluetoothStateException {\r\n        try {\r\n            LocalDevice localDevice = LocalDevice.getLocalDevice();\r\n            DiscoveryAgent discoveryAgent = localDevice.getDiscoveryAgent();\r\n\r\n            RemoteDevice[] remoteDevices = discoveryAgent.retrieveDevices(DiscoveryAgent.CACHED);\r\n\r\n            for (RemoteDevice remoteDevice : remoteDevices) {\r\n                System.out.println(&quot;Device Address: &quot; + remoteDevice.getBluetoothAddress());\r\n                System.out.println(&quot;Device Name: &quot; + remoteDevice.getFriendlyName(false));\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    }\r\n\r\n\r\nAccording to [this][1], there is no remoteDevice.getUUID() function.\r\nis there any way to retrieve the UUID of the discovered Bluetooth devices preferably in Java? \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/77282130/bluetooth-uuid-search-with-java-bluecove","title":"How to get the UUID of a bluetooth device, preferably with JAVA","body":"<p>I am using the following Java code to successfully discover Bluetooth devices connected to my PC (Windows).</p>\n<pre><code>import javax.bluetooth.*;\nimport java.io.IOException;\n\npublic class SimpleTry {\n   public static void main(String[] args) throws BluetoothStateException {\n    try {\n        LocalDevice localDevice = LocalDevice.getLocalDevice();\n        DiscoveryAgent discoveryAgent = localDevice.getDiscoveryAgent();\n\n        RemoteDevice[] remoteDevices = discoveryAgent.retrieveDevices(DiscoveryAgent.CACHED);\n\n        for (RemoteDevice remoteDevice : remoteDevices) {\n            System.out.println(&quot;Device Address: &quot; + remoteDevice.getBluetoothAddress());\n            System.out.println(&quot;Device Name: &quot; + remoteDevice.getFriendlyName(false));\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n}\n</code></pre>\n<p>According to <a href=\"https://stackoverflow.com/questions/77282130/bluetooth-uuid-search-with-java-bluecove\">this</a>, there is no remoteDevice.getUUID() function.\nis there any way to retrieve the UUID of the discovered Bluetooth devices preferably in Java?</p>\n"},{"tags":["java","naming-conventions"],"answers":[{"comments":[{"owner":{"account_id":69197,"reputation":11177,"user_id":201498,"display_name":"lweller"},"score":3,"creation_date":1295635030,"post_id":4762435,"comment_id":5268906,"body_markdown":"this makes no sense for me? what should be the usage of toString() in productive code if it changes it&#39;s return value while debunging?","body":"this makes no sense for me? what should be the usage of toString() in productive code if it changes it&#39;s return value while debunging?"},{"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"score":0,"creation_date":1295635516,"post_id":4762435,"comment_id":5269001,"body_markdown":"@lweller. You can&#39;t always do this. But sometimes it can be very helpful.","body":"@lweller. You can&#39;t always do this. But sometimes it can be very helpful."}],"tags":[],"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"comment_count":2,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1295634753,"creation_date":1295634753,"answer_id":4762435,"question_id":4762406,"body_markdown":"One thing you can do is use a Debug flag to change this as you like:\r\n\r\n    public String toString(boolean debug) {\r\n        if (debug) return debugStringVersion;\r\n        else return humanVersion;\r\n    }\r\n    \r\n    public String toString() {\r\n        return toString(Util.DEBUG);\r\n    }\r\n\r\nOf course this assumes that you have a utility class suet up with a debug flag in it.","title":"toString(): for debugging or for humans?","body":"<p>One thing you can do is use a Debug flag to change this as you like:</p>\n\n<pre><code>public String toString(boolean debug) {\n    if (debug) return debugStringVersion;\n    else return humanVersion;\n}\n\npublic String toString() {\n    return toString(Util.DEBUG);\n}\n</code></pre>\n\n<p>Of course this assumes that you have a utility class suet up with a debug flag in it.</p>\n"},{"tags":[],"owner":{"account_id":108387,"reputation":8648,"user_id":287727,"accept_rate":100,"display_name":"Navi"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1295634814,"creation_date":1295634814,"answer_id":4762447,"question_id":4762406,"body_markdown":"I normally use the Apache Commons ToStringBuilder http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/builder/ToStringBuilder.html with only the parts that I think are absolutely necessary for debugging.","title":"toString(): for debugging or for humans?","body":"<p>I normally use the Apache Commons ToStringBuilder <a href=\"http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/builder/ToStringBuilder.html\" rel=\"nofollow\">http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/builder/ToStringBuilder.html</a> with only the parts that I think are absolutely necessary for debugging.</p>\n"},{"tags":[],"owner":{"account_id":72745,"reputation":10483,"user_id":209878,"accept_rate":91,"display_name":"Timothy Baldridge"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1295634844,"creation_date":1295634844,"answer_id":4762454,"question_id":4762406,"body_markdown":"I would say the first. Data formatting should not be hard coded into the ToString() function of the object.\r\n\r\nI look at it this way: I try to make my ToString() output data that is readable by a matching Parse(string data) function (if that function actually exists or not is not important). So in this case, if you want a specific formatting, write a specific function, and leave the generic data dump routines to ToString().","title":"toString(): for debugging or for humans?","body":"<p>I would say the first. Data formatting should not be hard coded into the ToString() function of the object.</p>\n\n<p>I look at it this way: I try to make my ToString() output data that is readable by a matching Parse(string data) function (if that function actually exists or not is not important). So in this case, if you want a specific formatting, write a specific function, and leave the generic data dump routines to ToString().</p>\n"},{"comments":[{"owner":{"account_id":36759,"reputation":38034,"user_id":104950,"accept_rate":93,"display_name":"Amir Afghani"},"score":0,"creation_date":1295634892,"post_id":4762462,"comment_id":5268879,"body_markdown":"I see I was beaten to the punch!","body":"I see I was beaten to the punch!"},{"owner":{"account_id":69197,"reputation":11177,"user_id":201498,"display_name":"lweller"},"score":1,"creation_date":1295634996,"post_id":4762462,"comment_id":5268898,"body_markdown":"this makes no sense for me? what should be the usage of toString() in productive code if it changes it&#39;s return value while debunging?","body":"this makes no sense for me? what should be the usage of toString() in productive code if it changes it&#39;s return value while debunging?"},{"owner":{"account_id":88014,"reputation":60053,"user_id":1178669,"accept_rate":93,"display_name":"helpermethod"},"score":0,"creation_date":1295635200,"post_id":4762462,"comment_id":5268946,"body_markdown":"Looks like emulating a C `define`.","body":"Looks like emulating a C <code>define</code>."},{"owner":{"account_id":36759,"reputation":38034,"user_id":104950,"accept_rate":93,"display_name":"Amir Afghani"},"score":0,"creation_date":1295638537,"post_id":4762462,"comment_id":5269569,"body_markdown":"So you&#39;ve never turned logging on with the verbose flag??","body":"So you&#39;ve never turned logging on with the verbose flag??"},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":0,"creation_date":1295672427,"post_id":4762462,"comment_id":5273923,"body_markdown":"For me it makes sense. Unfortunately, there&#39;s only one toString, so it&#39;s use is restricted. No important piece of code should ever depend on it, so you can tune it to your needs. It&#39;d do for this solution, the flexibility may be useful while debugging.","body":"For me it makes sense. Unfortunately, there&#39;s only one toString, so it&#39;s use is restricted. No important piece of code should ever depend on it, so you can tune it to your needs. It&#39;d do for this solution, the flexibility may be useful while debugging."}],"tags":[],"owner":{"account_id":36759,"reputation":38034,"user_id":104950,"accept_rate":93,"display_name":"Amir Afghani"},"comment_count":5,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1295634877,"creation_date":1295634877,"answer_id":4762462,"question_id":4762406,"body_markdown":"You could read from some debug property that you configure dynamically.:\r\n\r\n    @Override\r\n    public String toString() { \r\n    \r\n        if(debug) {\r\n            return debugAddrString()\r\n        }\r\n        return normalAddrString();\r\n    \r\n    }","title":"toString(): for debugging or for humans?","body":"<p>You could read from some debug property that you configure dynamically.:</p>\n\n<pre><code>@Override\npublic String toString() { \n\n    if(debug) {\n        return debugAddrString()\n    }\n    return normalAddrString();\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":1,"creation_date":1296049141,"post_id":4762622,"comment_id":5325620,"body_markdown":"If you mention SimpleDateFormat vs Date (or any other relevant example) I&#39;ll mark this answer as accepted.","body":"If you mention SimpleDateFormat vs Date (or any other relevant example) I&#39;ll mark this answer as accepted."}],"tags":[],"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1298213451,"creation_date":1295635923,"answer_id":4762622,"question_id":4762406,"body_markdown":"Would you format an address the same way in a SMS message and in an HTML page? Would you format it the same way in English, French and Japanese?\r\n\r\nIf no, then you have your answer : the presentation does not belong to the object, but to the presentation layer displaying the object. Unless the object is specifically made up for the presentation layer, for example if it is a HtmlI18nedAddress, use toString for debugging.\r\n\r\nConsider `Date` vs `SimpleDateFormat`. `Date` contains the state and `SimpleDateFormat` returns multiple representations.","title":"toString(): for debugging or for humans?","body":"<p>Would you format an address the same way in a SMS message and in an HTML page? Would you format it the same way in English, French and Japanese?</p>\n\n<p>If no, then you have your answer : the presentation does not belong to the object, but to the presentation layer displaying the object. Unless the object is specifically made up for the presentation layer, for example if it is a HtmlI18nedAddress, use toString for debugging.</p>\n\n<p>Consider <code>Date</code> vs <code>SimpleDateFormat</code>. <code>Date</code> contains the state and <code>SimpleDateFormat</code> returns multiple representations.</p>\n"},{"comments":[{"owner":{"account_id":112612,"reputation":89615,"user_id":296974,"accept_rate":100,"display_name":"glglgl"},"score":0,"creation_date":1438335781,"post_id":4764299,"comment_id":51419653,"body_markdown":"IBTD. What does a `StringBuilder` say about your first sentence? Is its `.toString()` really only for debugging?","body":"IBTD. What does a <code>StringBuilder</code> say about your first sentence? Is its <code>.toString()</code> really only for debugging?"}],"tags":[],"owner":{"account_id":106097,"reputation":838,"user_id":282778,"display_name":"jtb"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1295647570,"creation_date":1295647570,"answer_id":4764299,"question_id":4762406,"body_markdown":"ToString should generally only be used for debug information.  Keep in mind that you&#39;re overriding a method on `Object`; is it conceptually accurate to have a method call on an `Object` reference return a human readable address?  In some cases, depending on the project, this may actually make sense, but it sounds a bit odd to me.  I would implement a new method.\r\n\r\nAnother thing to note is that most modern IDEs use the ToString method to print debug information about objects when inspecting them.","title":"toString(): for debugging or for humans?","body":"<p>ToString should generally only be used for debug information.  Keep in mind that you're overriding a method on <code>Object</code>; is it conceptually accurate to have a method call on an <code>Object</code> reference return a human readable address?  In some cases, depending on the project, this may actually make sense, but it sounds a bit odd to me.  I would implement a new method.</p>\n\n<p>Another thing to note is that most modern IDEs use the ToString method to print debug information about objects when inspecting them.</p>\n"},{"tags":[],"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697617401,"creation_date":1587918253,"answer_id":61444160,"question_id":4762406,"body_markdown":"According to [Effective Java](https://www.oreilly.com/library/view/effective-java-3rd/9780134686097/) Item 12: &quot;Always override toString&quot; the contract for `toString()` is:\r\n\r\n&gt; The result should be a concise but informative representation that is easy for a person to read. [...] providing a good toString implementation makes your class much more pleasant to use and makes systems **using the class easier to debug**.\r\n\r\nThus, it is for debugging.\r\n\r\nMore notes on `toString()`:\r\n\r\n- Add JavaDoc (the format should be explained here)\r\n- As soon as the format is fixed, keep in mind that the format will be used for parsing.\r\n\r\nI highly recommend investing in the book &quot;Effective Java&quot;. It is a very nice read. Just five to ten minutes for an item, but your Java live will change forever!","title":"toString(): for debugging or for humans?","body":"<p>According to <a href=\"https://www.oreilly.com/library/view/effective-java-3rd/9780134686097/\" rel=\"nofollow noreferrer\">Effective Java</a> Item 12: &quot;Always override toString&quot; the contract for <code>toString()</code> is:</p>\n<blockquote>\n<p>The result should be a concise but informative representation that is easy for a person to read. [...] providing a good toString implementation makes your class much more pleasant to use and makes systems <strong>using the class easier to debug</strong>.</p>\n</blockquote>\n<p>Thus, it is for debugging.</p>\n<p>More notes on <code>toString()</code>:</p>\n<ul>\n<li>Add JavaDoc (the format should be explained here)</li>\n<li>As soon as the format is fixed, keep in mind that the format will be used for parsing.</li>\n</ul>\n<p>I highly recommend investing in the book &quot;Effective Java&quot;. It is a very nice read. Just five to ten minutes for an item, but your Java live will change forever!</p>\n"}],"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2548,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":4762622,"answer_count":7,"score":8,"last_activity_date":1697617401,"creation_date":1295634526,"question_id":4762406,"body_markdown":"    class Address\r\n    {\r\n      private enum Component\r\n      {\r\n        NUMBER,\r\n        STREET,\r\n        STATE,\r\n        COUNTRY\r\n      }\r\n\r\n      private Map&lt;Component, String&gt; componentToValue = ...;\r\n    }\r\n\r\nI&#39;d like my class to contain two methods:\r\n\r\n1. One to indicate the value of each address component (so I can debug if anything goes wrong).\r\n2. One to return the address in a form expected by humans: &quot;1600 Amphitheatre Parkway Mountain View, CA 94043&quot;.\r\n\r\nWhat is the best-practice for Object.toString()? Is it primary meant for #1 or #2? Is there a best-practice for the naming of these methods?","title":"toString(): for debugging or for humans?","body":"<pre><code>class Address\n{\n  private enum Component\n  {\n    NUMBER,\n    STREET,\n    STATE,\n    COUNTRY\n  }\n\n  private Map&lt;Component, String&gt; componentToValue = ...;\n}\n</code></pre>\n\n<p>I'd like my class to contain two methods:</p>\n\n<ol>\n<li>One to indicate the value of each address component (so I can debug if anything goes wrong).</li>\n<li>One to return the address in a form expected by humans: \"1600 Amphitheatre Parkway Mountain View, CA 94043\".</li>\n</ol>\n\n<p>What is the best-practice for Object.toString()? Is it primary meant for #1 or #2? Is there a best-practice for the naming of these methods?</p>\n"},{"tags":["java","spring","stomp"],"comments":[{"owner":{"account_id":11288679,"reputation":923,"user_id":8278630,"display_name":"Farkhod Abdukodirov"},"score":0,"creation_date":1697603266,"post_id":77308589,"comment_id":136299010,"body_markdown":"Images are not allowed, update your post with the source code in the plain text format~","body":"Images are not allowed, update your post with the source code in the plain text format~"}],"answers":[{"tags":[],"owner":{"account_id":21222460,"reputation":326,"user_id":15608713,"display_name":"i_m_js"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697578450,"creation_date":1697578116,"answer_id":77312349,"question_id":77308589,"body_markdown":"`SimpMessagingTemplate#convertAndSendToUser` will internally convert the destination into `userDestinationPrefix + username + destination` (for eg, /user/username/destination. where `/user` is the default userDestinationPrefix). so the following script can be used to subscribe to the messages which is sent using `this.template.convertAndSendToUser(userName, &quot;/private&quot;, chatMessage);`\r\n\r\n    const username = &#39;user1&#39;;\r\n    stompClient.subscribe(`/user/${username}/private`, message=&gt; {\r\n    \t\t\t\t\t\t\tconsole.log(message.body)\r\n    \t\t\t\t\t\t});\r\n\r\n\r\n\r\nTo broadcast events to multiple users, publish messages to a topic (eg., /topic/chatroom1) using `SimpMessagingTemplate#convertAndSend` and subscribe to that in script as follows.\r\n\r\n    stompClient.subscribe(`/topic/chatroom1`, message=&gt; {\r\n    \t\t\t\t\t\t\tconsole.log(message.body)\r\n    \t\t\t\t\t\t});\r\nAlso register &#39;/user&#39; as part of the messageBroker list\r\n\r\n    registry.enableSimpleBroker(&quot;/topic&quot;, &quot;/user&quot;);\r\n\r\nRef: https://spring.io/guides/gs/messaging-stomp-websocket/","title":"Spring stomp - messagingTemplate.convertAndSendToUser doesn&#39;t work","body":"<p><code>SimpMessagingTemplate#convertAndSendToUser</code> will internally convert the destination into <code>userDestinationPrefix + username + destination</code> (for eg, /user/username/destination. where <code>/user</code> is the default userDestinationPrefix). so the following script can be used to subscribe to the messages which is sent using <code>this.template.convertAndSendToUser(userName, &quot;/private&quot;, chatMessage);</code></p>\n<pre><code>const username = 'user1';\nstompClient.subscribe(`/user/${username}/private`, message=&gt; {\n                            console.log(message.body)\n                        });\n</code></pre>\n<p>To broadcast events to multiple users, publish messages to a topic (eg., /topic/chatroom1) using <code>SimpMessagingTemplate#convertAndSend</code> and subscribe to that in script as follows.</p>\n<pre><code>stompClient.subscribe(`/topic/chatroom1`, message=&gt; {\n                            console.log(message.body)\n                        });\n</code></pre>\n<p>Also register '/user' as part of the messageBroker list</p>\n<pre><code>registry.enableSimpleBroker(&quot;/topic&quot;, &quot;/user&quot;);\n</code></pre>\n<p>Ref: <a href=\"https://spring.io/guides/gs/messaging-stomp-websocket/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/messaging-stomp-websocket/</a></p>\n"}],"owner":{"account_id":28327548,"reputation":1,"user_id":21662340,"display_name":"川大计院蒻篝"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697617186,"creation_date":1697541950,"question_id":77308589,"body_markdown":"I am trying to send a message using stomp to a specific user. I created a class to determine the userId.\r\nHere is the code:\r\n - LoginController: \r\n```\r\n@Controller\r\npublic class LoginController {\r\n    @PostMapping(&quot;/login&quot;)\r\n    public String login(@RequestParam String username, @RequestParam String password, HttpSession session) {\r\n        session.setAttribute(&quot;userId&quot;, username);\r\n        System.out.println(&quot;userId: &quot; + username);\r\n        return &quot;redirect:/index.html&quot;;\r\n    }\r\n    @GetMapping(&quot;/login&quot;)\r\n    public String login() {\r\n        return &quot;login&quot;;\r\n    }\r\n}\r\n```\r\n - CustomHandshakeHandler (to get useId from session which come from LoginController): \r\n```\r\npublic class CustomHandshakeHandler extends DefaultHandshakeHandler {\r\n    @Override\r\n    protected Principal determineUser(org.springframework.http.server.ServerHttpRequest request,\r\n                                      org.springframework.web.socket.WebSocketHandler wsHandler,\r\n                                      java.util.Map&lt;String, Object&gt; attributes) {\r\n        ServletServerHttpRequest servletRequest = (ServletServerHttpRequest) request;\r\n        HttpSession session = servletRequest.getServletRequest().getSession();\r\n        String userId = (String) session.getAttribute(&quot;userId&quot;);\r\n        return ()-&gt;userId;\r\n    }\r\n}\r\n```\r\n - WebSocketConfig: \r\n```\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n    @Override\r\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\r\n        registry.addEndpoint(&quot;/ws&quot;)\r\n                .setHandshakeHandler(new CustomHandshakeHandler())\r\n                .withSockJS(); \r\n    }\r\n    @Override\r\n    public void configureMessageBroker(MessageBrokerRegistry registry) {\r\n        registry.enableSimpleBroker(&quot;/topic&quot;);\r\n        registry.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n        registry.setUserDestinationPrefix(&quot;/user&quot;);\r\n    }\r\n}\r\n```\r\n - On the client, subscribe the `/user/private`:\r\n```\r\nfunction connect(event) {\r\n    username = document.querySelector(&#39;#name&#39;).value.trim();\r\n    receive = document.querySelector(&#39;#receiver&#39;).value.trim();\r\n    if(username) {\r\n        usernamePage.classList.add(&#39;hidden&#39;);\r\n        chatPage.classList.remove(&#39;hidden&#39;);\r\n        var socket = new SockJS(&#39;/ws&#39;);\r\n        stompClient = Stomp.over(socket);\r\n        stompClient.connect({}, onConnected, onError);\r\n    }\r\n    event.preventDefault();\r\n}\r\nfunction onConnected() {\r\n    stompClient.subscribe(&#39;/user/private&#39;, onMessageReceived);\r\n    // Tell your username to the server\r\n    stompClient.send(&quot;/app/chat.addUser&quot;,\r\n        {},\r\n        JSON.stringify({sender: username, type: &#39;JOIN&#39;})\r\n    )\r\n    connectingElement.classList.add(&#39;hidden&#39;);\r\n}\r\n```\r\n - ChatController: \r\n```\r\n@Controller\r\npublic class ChatController {\r\n    @Autowired\r\n    private SimpMessagingTemplate messagingTemplate;\r\n    private Logger logger = org.slf4j.LoggerFactory.getLogger(ChatController.class);\r\n    @MessageMapping(&quot;/chat.sendMessage&quot;)\r\n    @SendTo(&quot;/topic/public&quot;)\r\n    public ChatMessage sendMessage(@Payload ChatMessage chatMessage) {\r\n        return chatMessage;\r\n    }\r\n    @MessageMapping(&quot;/chat.addUser&quot;)\r\n    @SendTo(&quot;/topic/public&quot;)\r\n    public ChatMessage addUser(@Payload ChatMessage chatMessage,\r\n                               SimpMessageHeaderAccessor headerAccessor) {\r\n        headerAccessor.getSessionAttributes().put(&quot;username&quot;, chatMessage.getSender());\r\n        return chatMessage;\r\n    }\r\n    @MessageMapping(&quot;/chat.sendPrivateMessage&quot;)\r\n    public void sendPrivateMessage(@Payload ChatMessage chatMessage) {\r\n        String Username = chatMessage.getReceiver();\r\n        logger.info(&quot;private message from :&quot; + chatMessage.getSender() + &quot; to :&quot; + Username);\r\n        messagingTemplate.convertAndSendToUser(Username, &quot;/private&quot;, chatMessage);\r\n    }\r\n}\r\n```\r\n\r\nWhile I have two users (1 and 2) send private message to each other, they can&#39;t get the message, but the console could log their active:\r\n\r\n```\r\nuserId: 1\r\n2023-10-18T16:18:50.202+08:00  INFO 17240 --- [tboundChannel-1] t.s.f.controller.WebSocketEventListener  : Received a new web socket connection\r\nuserId: 2\r\n2023-10-18T16:18:59.751+08:00  INFO 17240 --- [tboundChannel-2] t.s.f.controller.WebSocketEventListener  : Received a new web socket connection\r\n2023-10-18T16:19:03.057+08:00  INFO 17240 --- [boundChannel-19] t.scxy.fusion.controller.ChatController  : private message from :1 to :2\r\n2023-10-18T16:19:05.830+08:00  INFO 17240 --- [boundChannel-22] t.scxy.fusion.controller.ChatController  : private message from :2 to :1\r\n```\r\n\r\nWhat can I do to get both of them to receive the message?\r\n\r\nI have try to make the client to subscribe the `/user/{username}/private`, but it doesn&#39;t work.\r\n","title":"Spring stomp - messagingTemplate.convertAndSendToUser doesn&#39;t work","body":"<p>I am trying to send a message using stomp to a specific user. I created a class to determine the userId.\nHere is the code:</p>\n<ul>\n<li>LoginController:</li>\n</ul>\n<pre><code>@Controller\npublic class LoginController {\n    @PostMapping(&quot;/login&quot;)\n    public String login(@RequestParam String username, @RequestParam String password, HttpSession session) {\n        session.setAttribute(&quot;userId&quot;, username);\n        System.out.println(&quot;userId: &quot; + username);\n        return &quot;redirect:/index.html&quot;;\n    }\n    @GetMapping(&quot;/login&quot;)\n    public String login() {\n        return &quot;login&quot;;\n    }\n}\n</code></pre>\n<ul>\n<li>CustomHandshakeHandler (to get useId from session which come from LoginController):</li>\n</ul>\n<pre><code>public class CustomHandshakeHandler extends DefaultHandshakeHandler {\n    @Override\n    protected Principal determineUser(org.springframework.http.server.ServerHttpRequest request,\n                                      org.springframework.web.socket.WebSocketHandler wsHandler,\n                                      java.util.Map&lt;String, Object&gt; attributes) {\n        ServletServerHttpRequest servletRequest = (ServletServerHttpRequest) request;\n        HttpSession session = servletRequest.getServletRequest().getSession();\n        String userId = (String) session.getAttribute(&quot;userId&quot;);\n        return ()-&gt;userId;\n    }\n}\n</code></pre>\n<ul>\n<li>WebSocketConfig:</li>\n</ul>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\n        registry.addEndpoint(&quot;/ws&quot;)\n                .setHandshakeHandler(new CustomHandshakeHandler())\n                .withSockJS(); \n    }\n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry registry) {\n        registry.enableSimpleBroker(&quot;/topic&quot;);\n        registry.setApplicationDestinationPrefixes(&quot;/app&quot;);\n        registry.setUserDestinationPrefix(&quot;/user&quot;);\n    }\n}\n</code></pre>\n<ul>\n<li>On the client, subscribe the <code>/user/private</code>:</li>\n</ul>\n<pre><code>function connect(event) {\n    username = document.querySelector('#name').value.trim();\n    receive = document.querySelector('#receiver').value.trim();\n    if(username) {\n        usernamePage.classList.add('hidden');\n        chatPage.classList.remove('hidden');\n        var socket = new SockJS('/ws');\n        stompClient = Stomp.over(socket);\n        stompClient.connect({}, onConnected, onError);\n    }\n    event.preventDefault();\n}\nfunction onConnected() {\n    stompClient.subscribe('/user/private', onMessageReceived);\n    // Tell your username to the server\n    stompClient.send(&quot;/app/chat.addUser&quot;,\n        {},\n        JSON.stringify({sender: username, type: 'JOIN'})\n    )\n    connectingElement.classList.add('hidden');\n}\n</code></pre>\n<ul>\n<li>ChatController:</li>\n</ul>\n<pre><code>@Controller\npublic class ChatController {\n    @Autowired\n    private SimpMessagingTemplate messagingTemplate;\n    private Logger logger = org.slf4j.LoggerFactory.getLogger(ChatController.class);\n    @MessageMapping(&quot;/chat.sendMessage&quot;)\n    @SendTo(&quot;/topic/public&quot;)\n    public ChatMessage sendMessage(@Payload ChatMessage chatMessage) {\n        return chatMessage;\n    }\n    @MessageMapping(&quot;/chat.addUser&quot;)\n    @SendTo(&quot;/topic/public&quot;)\n    public ChatMessage addUser(@Payload ChatMessage chatMessage,\n                               SimpMessageHeaderAccessor headerAccessor) {\n        headerAccessor.getSessionAttributes().put(&quot;username&quot;, chatMessage.getSender());\n        return chatMessage;\n    }\n    @MessageMapping(&quot;/chat.sendPrivateMessage&quot;)\n    public void sendPrivateMessage(@Payload ChatMessage chatMessage) {\n        String Username = chatMessage.getReceiver();\n        logger.info(&quot;private message from :&quot; + chatMessage.getSender() + &quot; to :&quot; + Username);\n        messagingTemplate.convertAndSendToUser(Username, &quot;/private&quot;, chatMessage);\n    }\n}\n</code></pre>\n<p>While I have two users (1 and 2) send private message to each other, they can't get the message, but the console could log their active:</p>\n<pre><code>userId: 1\n2023-10-18T16:18:50.202+08:00  INFO 17240 --- [tboundChannel-1] t.s.f.controller.WebSocketEventListener  : Received a new web socket connection\nuserId: 2\n2023-10-18T16:18:59.751+08:00  INFO 17240 --- [tboundChannel-2] t.s.f.controller.WebSocketEventListener  : Received a new web socket connection\n2023-10-18T16:19:03.057+08:00  INFO 17240 --- [boundChannel-19] t.scxy.fusion.controller.ChatController  : private message from :1 to :2\n2023-10-18T16:19:05.830+08:00  INFO 17240 --- [boundChannel-22] t.scxy.fusion.controller.ChatController  : private message from :2 to :1\n</code></pre>\n<p>What can I do to get both of them to receive the message?</p>\n<p>I have try to make the client to subscribe the <code>/user/{username}/private</code>, but it doesn't work.</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","aws-lambda","aws-sdk"],"answers":[{"tags":[],"owner":{"account_id":5312014,"reputation":571,"user_id":4237969,"display_name":"ian1095"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1496063919,"creation_date":1496063919,"answer_id":44243524,"question_id":44151982,"body_markdown":"Well steps you can take to investigate:\r\n\r\nPlease make sure your Lambda function and S3 are in the same region. \r\n(When you use ProviderChain, it will pick up the region from the Lambda function\r\n\r\nAlso, You should not need to specify the BasicCredentials(aws-key..etc) if you are using Lambda. \r\n\r\nPlease read about Lambda Permission model (http://docs.aws.amazon.com/lambda/latest/dg/intro-permission-model.html): \r\n\r\nBasically, the Lambda role that you assign should have permission to access S3. \r\n\r\nAll you need to configure S3 is pretty much: \r\n\r\n    private static final AmazonS3 s3Client = \r\n    AmazonS3ClientBuilder.defaultClient();\r\n\r\nTo test it locally, make sure you have configured the AWS Credentials locally. \r\n\r\nYou can check if you have the credentials, if you go into .aws/credentials (This will contain the &quot;aws-access-key&quot;, &quot;aws-secret-key&quot;) \r\n\r\nhttp://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/setup-credentials.html\r\n\r\nTo set up your credentials locally, all you need to do is run the AWS Cli command: aws configure (http://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.htm)\r\n","title":"AWS Java SDK - Unable to find a region via the region provider chain","body":"<p>Well steps you can take to investigate:</p>\n\n<p>Please make sure your Lambda function and S3 are in the same region. \n(When you use ProviderChain, it will pick up the region from the Lambda function</p>\n\n<p>Also, You should not need to specify the BasicCredentials(aws-key..etc) if you are using Lambda. </p>\n\n<p>Please read about Lambda Permission model (<a href=\"http://docs.aws.amazon.com/lambda/latest/dg/intro-permission-model.html\" rel=\"noreferrer\">http://docs.aws.amazon.com/lambda/latest/dg/intro-permission-model.html</a>): </p>\n\n<p>Basically, the Lambda role that you assign should have permission to access S3. </p>\n\n<p>All you need to configure S3 is pretty much: </p>\n\n<pre><code>private static final AmazonS3 s3Client = \nAmazonS3ClientBuilder.defaultClient();\n</code></pre>\n\n<p>To test it locally, make sure you have configured the AWS Credentials locally. </p>\n\n<p>You can check if you have the credentials, if you go into .aws/credentials (This will contain the \"aws-access-key\", \"aws-secret-key\") </p>\n\n<p><a href=\"http://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/setup-credentials.html\" rel=\"noreferrer\">http://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/setup-credentials.html</a></p>\n\n<p>To set up your credentials locally, all you need to do is run the AWS Cli command: aws configure (<a href=\"http://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.htm\" rel=\"noreferrer\">http://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.htm</a>)</p>\n"},{"comments":[{"owner":{"account_id":59461,"reputation":19172,"user_id":177920,"accept_rate":77,"display_name":"Madbreaks"},"score":39,"creation_date":1524696425,"post_id":45081648,"comment_id":87080795,"body_markdown":"Better to use `Regions.US_EAST_1`.","body":"Better to use <code>Regions.US_EAST_1</code>."},{"owner":{"account_id":59461,"reputation":19172,"user_id":177920,"accept_rate":77,"display_name":"Madbreaks"},"score":5,"creation_date":1579296436,"post_id":45081648,"comment_id":105732217,"body_markdown":"Hard-coding a `Region` in your app is almost certainly a bad idea.","body":"Hard-coding a <code>Region</code> in your app is almost certainly a bad idea."},{"owner":{"account_id":334402,"reputation":1621,"user_id":660833,"accept_rate":51,"display_name":"Anupam Gupta"},"score":3,"creation_date":1611399681,"post_id":45081648,"comment_id":116442009,"body_markdown":"The number of people looking for a quick fix without understanding the issue is double the number of people who want to learn. At the time of posting the comment, this incomplete (and thus incorrect) answer has 40 upvotes and the correct answer with explanation, posted below by Aniket Thakur has half the upvotes(20).","body":"The number of people looking for a quick fix without understanding the issue is double the number of people who want to learn. At the time of posting the comment, this incomplete (and thus incorrect) answer has 40 upvotes and the correct answer with explanation, posted below by Aniket Thakur has half the upvotes(20)."}],"tags":[],"owner":{"account_id":6342850,"reputation":1335,"user_id":4924260,"display_name":"mapm"},"comment_count":3,"down_vote_count":3,"up_vote_count":68,"is_accepted":true,"score":65,"last_activity_date":1499951497,"creation_date":1499951497,"answer_id":45081648,"question_id":44151982,"body_markdown":"Regarding Q1, try to build your client using the following syntax:\r\n\r\n    AmazonS3 amazonS3 = AmazonS3Client.builder()\r\n\t\t.withRegion(&quot;us-east-1&quot;)\r\n\t\t.withCredentials(new AWSStaticCredentialsProvider(creds))\r\n\t\t.build();\r\n","title":"AWS Java SDK - Unable to find a region via the region provider chain","body":"<p>Regarding Q1, try to build your client using the following syntax:</p>\n\n<pre><code>AmazonS3 amazonS3 = AmazonS3Client.builder()\n    .withRegion(\"us-east-1\")\n    .withCredentials(new AWSStaticCredentialsProvider(creds))\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2784842,"reputation":67281,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"comment_count":0,"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1556112914,"creation_date":1531746003,"answer_id":51362437,"question_id":44151982,"body_markdown":"As mentioned in the answer above you need to have S3 and lambda in same region and here&#39;s why-\r\n\r\nIf you don&#39;t explicitly set a region using the `withRegion` methods, the SDK consults the default region provider chain to try and determine the region to use. One of the methods used is -\r\n\r\n\r\n&gt;The AWS_REGION environment variable is checked. If it&#39;s set, that region is used to configure the client.\r\n\r\nAnd in the case of Lambda -\r\n\r\n&gt;This environment variable is set by the Lambda container.\r\n\r\nFinally, to use default credential/region provider chain to determine the region from the environment, use the client builder&#39;s defaultClient method.\r\n\r\n    AmazonS3 s3Client = AmazonS3ClientBuilder.defaultClient();\r\n\r\nThis is the same as using standard followed by build.\r\n\r\n    AmazonS3 s3Client = AmazonS3ClientBuilder.standard().build();\r\n\r\nAWS Documentation: https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/java-dg-region-selection.html\r\n\r\nMore details: [How to fix &quot;Unable to find a region via the region provider chain&quot; exception with AWS SDK][1]\r\n\r\nPS: Above link goes to my personal blog that has additional details on this.\r\n\r\n\r\n  [1]: http://opensourceforgeeks.blogspot.com/2018/07/how-to-fix-unable-to-find-region-via.html","title":"AWS Java SDK - Unable to find a region via the region provider chain","body":"<p>As mentioned in the answer above you need to have S3 and lambda in same region and here's why-</p>\n\n<p>If you don't explicitly set a region using the <code>withRegion</code> methods, the SDK consults the default region provider chain to try and determine the region to use. One of the methods used is -</p>\n\n<blockquote>\n  <p>The AWS_REGION environment variable is checked. If it's set, that region is used to configure the client.</p>\n</blockquote>\n\n<p>And in the case of Lambda -</p>\n\n<blockquote>\n  <p>This environment variable is set by the Lambda container.</p>\n</blockquote>\n\n<p>Finally, to use default credential/region provider chain to determine the region from the environment, use the client builder's defaultClient method.</p>\n\n<pre><code>AmazonS3 s3Client = AmazonS3ClientBuilder.defaultClient();\n</code></pre>\n\n<p>This is the same as using standard followed by build.</p>\n\n<pre><code>AmazonS3 s3Client = AmazonS3ClientBuilder.standard().build();\n</code></pre>\n\n<p>AWS Documentation: <a href=\"https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/java-dg-region-selection.html\" rel=\"noreferrer\">https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/java-dg-region-selection.html</a></p>\n\n<p>More details: <a href=\"http://opensourceforgeeks.blogspot.com/2018/07/how-to-fix-unable-to-find-region-via.html\" rel=\"noreferrer\">How to fix \"Unable to find a region via the region provider chain\" exception with AWS SDK</a></p>\n\n<p>PS: Above link goes to my personal blog that has additional details on this.</p>\n"},{"tags":[],"owner":{"account_id":13967105,"reputation":61,"user_id":10086599,"display_name":"Akhilesh Nagabhushan"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1532064756,"creation_date":1532063668,"answer_id":51435498,"question_id":44151982,"body_markdown":"This worked for me.\r\n\r\n   \r\n\r\n    AmazonS3 s3Client = AmazonS3ClientBuilder.standard().withCredentials(new ProfileCredentialsProvider()).withRegion(Regions.AP_SOUTH_1).build();\r\n\r\n","title":"AWS Java SDK - Unable to find a region via the region provider chain","body":"<p>This worked for me.</p>\n\n<pre><code>AmazonS3 s3Client = AmazonS3ClientBuilder.standard().withCredentials(new ProfileCredentialsProvider()).withRegion(Regions.AP_SOUTH_1).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3223315,"reputation":367,"user_id":2720180,"display_name":"Peter.Chu"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1552462931,"creation_date":1552462931,"answer_id":55136681,"question_id":44151982,"body_markdown":"You can try this as below\r\n\r\n \r\n\r\n    BasicAWSCredentials creds = new BasicAWSCredentials(&quot;your-accessKey&quot;, &quot;your-secretKey&quot;);\r\n    AmazonSNS snsClient = AmazonSNSClientBuilder.standard()\r\n            .withCredentials(new AWSStaticCredentialsProvider(creds))\r\n            .withRegion(Regions.US_EAST_1).build();","title":"AWS Java SDK - Unable to find a region via the region provider chain","body":"<p>You can try this as below</p>\n\n<pre><code>BasicAWSCredentials creds = new BasicAWSCredentials(\"your-accessKey\", \"your-secretKey\");\nAmazonSNS snsClient = AmazonSNSClientBuilder.standard()\n        .withCredentials(new AWSStaticCredentialsProvider(creds))\n        .withRegion(Regions.US_EAST_1).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2987511,"reputation":3024,"user_id":5772982,"display_name":"Kumar Abhishek"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1575974973,"creation_date":1575974973,"answer_id":59265515,"question_id":44151982,"body_markdown":"Actually, while I faced this issue was not possible to update the code all the time. \r\n\r\nThus we need to look into the reasons why it&#39;s happening, While investigating I found there is `.aws` folder created at your root. It was created because I tried to install `aws console` some time back.\r\n\r\nThe solution is you need to update your config file with region.\r\n\r\n[![][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pShtC.png","title":"AWS Java SDK - Unable to find a region via the region provider chain","body":"<p>Actually, while I faced this issue was not possible to update the code all the time. </p>\n\n<p>Thus we need to look into the reasons why it's happening, While investigating I found there is <code>.aws</code> folder created at your root. It was created because I tried to install <code>aws console</code> some time back.</p>\n\n<p>The solution is you need to update your config file with region.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pShtC.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/pShtC.png\" alt=\"\"></a></p>\n"},{"tags":[],"owner":{"account_id":2300810,"reputation":11,"user_id":2021141,"display_name":"Ramshad"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582621967,"creation_date":1582621967,"answer_id":60391056,"question_id":44151982,"body_markdown":"&gt; **withRegion(Regions.DEFAULT_REGION)** helped me to solve my issue\r\n\r\n    return AmazonS3ClientBuilder.standard()\r\n    .withCredentials(new AWSStaticCredentialsProvider(awsCredentials))\r\n    .withRegion(Regions.DEFAULT_REGION)\r\n    .build();","title":"AWS Java SDK - Unable to find a region via the region provider chain","body":"<blockquote>\n  <p><strong>withRegion(Regions.DEFAULT_REGION)</strong> helped me to solve my issue</p>\n</blockquote>\n\n<pre><code>return AmazonS3ClientBuilder.standard()\n.withCredentials(new AWSStaticCredentialsProvider(awsCredentials))\n.withRegion(Regions.DEFAULT_REGION)\n.build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10721562,"reputation":21,"user_id":7890493,"display_name":"Misael Paredes"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1645059307,"creation_date":1645059307,"answer_id":71151166,"question_id":44151982,"body_markdown":"You can set the region in the environment of AWS for your session.\r\n\r\nIf you are on Windows, add in c:\\user\\\\%USERNAME%\\\\.aws\\config the next text:\r\n\r\n    [default]\r\n    region = us-east-1\r\n    output = json\r\n\r\nThat works for me.","title":"AWS Java SDK - Unable to find a region via the region provider chain","body":"<p>You can set the region in the environment of AWS for your session.</p>\n<p>If you are on Windows, add in c:\\user\\%USERNAME%\\.aws\\config the next text:</p>\n<pre><code>[default]\nregion = us-east-1\noutput = json\n</code></pre>\n<p>That works for me.</p>\n"},{"tags":[],"owner":{"account_id":1628102,"reputation":3602,"user_id":1503163,"display_name":"Sanjay Bharwani"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660045727,"creation_date":1660045727,"answer_id":73291295,"question_id":44151982,"body_markdown":"So, root cause of the issue is the `AmazonS3` needs to know the region to connect to for doing any operations on S3 bucket.\r\n\r\nIn my case, credentials not needed as it was handled via IAM roles on the server from where the operation was being performed.\r\n\r\nBut still the initialisation of the `amazoneS3Client` was failing with the error while injecting the bean defined in my class \r\n\r\n    private final AmazonS3 amazonS3Client;\r\n\r\nAnd the spring application fails to load the context as the bean cannot be created. BeanCreation of AmazonS3 fails with below root cause\r\n\r\n\r\n    Failed to instantiate [com.amazonaws.services.s3.AmazonS3]: \r\n    Factory method &#39;amazonS3Client&#39; threw exception; nested exception is com.amazonaws.SdkClientException: \r\n    Unable to find a region via the region provider chain. \r\n    Must provide an explicit region in the builder or setup environment to supply a region.\r\n\r\nSo, the fix for that is to configure the region while creating the bean.\r\n\r\n\r\n    @Bean\r\n      AmazonS3 amazonS3Client() {\r\n        return AmazonS3ClientBuilder.standard().withRegion(s3ConfigProperties.getRegion()).build();\r\n      }\r\n\r\nAs you see, we are passing the region in .withRegion(), and this region is defined in the application.yml file.\r\n\r\n     region: &#39;eu-west-1&#39;\r\n\r\n","title":"AWS Java SDK - Unable to find a region via the region provider chain","body":"<p>So, root cause of the issue is the <code>AmazonS3</code> needs to know the region to connect to for doing any operations on S3 bucket.</p>\n<p>In my case, credentials not needed as it was handled via IAM roles on the server from where the operation was being performed.</p>\n<p>But still the initialisation of the <code>amazoneS3Client</code> was failing with the error while injecting the bean defined in my class</p>\n<pre><code>private final AmazonS3 amazonS3Client;\n</code></pre>\n<p>And the spring application fails to load the context as the bean cannot be created. BeanCreation of AmazonS3 fails with below root cause</p>\n<pre><code>Failed to instantiate [com.amazonaws.services.s3.AmazonS3]: \nFactory method 'amazonS3Client' threw exception; nested exception is com.amazonaws.SdkClientException: \nUnable to find a region via the region provider chain. \nMust provide an explicit region in the builder or setup environment to supply a region.\n</code></pre>\n<p>So, the fix for that is to configure the region while creating the bean.</p>\n<pre><code>@Bean\n  AmazonS3 amazonS3Client() {\n    return AmazonS3ClientBuilder.standard().withRegion(s3ConfigProperties.getRegion()).build();\n  }\n</code></pre>\n<p>As you see, we are passing the region in .withRegion(), and this region is defined in the application.yml file.</p>\n<pre><code> region: 'eu-west-1'\n</code></pre>\n"},{"comments":[{"owner":{"account_id":20758517,"reputation":97,"user_id":15244324,"display_name":"Usurper"},"score":0,"creation_date":1697613436,"post_id":74823028,"comment_id":136300255,"body_markdown":"This worked for me, I had all the setup properly done but default region was not set. Thanks man!","body":"This worked for me, I had all the setup properly done but default region was not set. Thanks man!"}],"tags":[],"owner":{"account_id":4528798,"reputation":10533,"user_id":3679900,"accept_rate":48,"display_name":"y2k-shubham"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671185826,"creation_date":1671185826,"answer_id":74823028,"question_id":44151982,"body_markdown":"AWS region can also be configured for machine via `aws configure` CLI command\r\n - Type `aws configure` command.\r\n - Press enter to not change the `AWS Access Key ID` and `AWS Secret Access Key`.\r\n - When you are prompted to add region (`Default region name [none]:`), type `ap-southeast-1` (or whatever region you need) and press enter.\r\n\r\nCredits to [@Matheus Sena][1] for suggesting this on an internal forum\r\n\r\n\r\n  [1]: https://www.linkedin.com/in/senavs/?originalSubdomain=br","title":"AWS Java SDK - Unable to find a region via the region provider chain","body":"<p>AWS region can also be configured for machine via <code>aws configure</code> CLI command</p>\n<ul>\n<li>Type <code>aws configure</code> command.</li>\n<li>Press enter to not change the <code>AWS Access Key ID</code> and <code>AWS Secret Access Key</code>.</li>\n<li>When you are prompted to add region (<code>Default region name [none]:</code>), type <code>ap-southeast-1</code> (or whatever region you need) and press enter.</li>\n</ul>\n<p>Credits to <a href=\"https://www.linkedin.com/in/senavs/?originalSubdomain=br\" rel=\"nofollow noreferrer\">@Matheus Sena</a> for suggesting this on an internal forum</p>\n"},{"tags":[],"owner":{"account_id":2976799,"reputation":121,"user_id":2527697,"display_name":"Ajay Sodhi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675680679,"creation_date":1675665549,"answer_id":75358063,"question_id":44151982,"body_markdown":"I faced a similar error.\r\n\r\nI am using **Windows 11** and **IntelliJ Idea**. \r\n\r\nWhen you configure AWS CLI, it creates ***config*** file at **C:\\Users\\username\\\\.aws\\config** location. \r\n\r\nIn my case, the file had content similar to \r\n\r\n    [profile default] \r\n    output = json\r\n    region = us-east-1\r\n\r\nAnd because of the word profile in the profile name, it was not picking up the region. \r\n\r\nI modified it by removing the word *profile* (shown below).\r\n\r\n    [default] \r\n    output = json\r\n    region = us-east-1\r\n\r\nAnd it worked.","title":"AWS Java SDK - Unable to find a region via the region provider chain","body":"<p>I faced a similar error.</p>\n<p>I am using <strong>Windows 11</strong> and <strong>IntelliJ Idea</strong>.</p>\n<p>When you configure AWS CLI, it creates <em><strong>config</strong></em> file at <strong>C:\\Users\\username\\.aws\\config</strong> location.</p>\n<p>In my case, the file had content similar to</p>\n<pre><code>[profile default] \noutput = json\nregion = us-east-1\n</code></pre>\n<p>And because of the word profile in the profile name, it was not picking up the region.</p>\n<p>I modified it by removing the word <em>profile</em> (shown below).</p>\n<pre><code>[default] \noutput = json\nregion = us-east-1\n</code></pre>\n<p>And it worked.</p>\n"},{"tags":[],"owner":{"account_id":20758517,"reputation":97,"user_id":15244324,"display_name":"Usurper"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697616819,"creation_date":1697616819,"answer_id":77314535,"question_id":44151982,"body_markdown":"Simply add the following details in your `~/.aws/config` file \r\n\r\n    \r\n    [default]\r\n    region = &lt;region-name&gt; // ex: ap-south-1\r\n\r\nOr you can also run the command `aws configure` and provide the region details and keep the rest of the fields as it is. \r\n\r\n```\r\naws configure\r\nAWS Access Key ID [None]:\r\nAWS Secret Access Key [None]:\r\nDefault region name [None]: &lt;region-name&gt;\r\nDefault output format [None]:\r\n``` \r\n","title":"AWS Java SDK - Unable to find a region via the region provider chain","body":"<p>Simply add the following details in your <code>~/.aws/config</code> file</p>\n<pre><code>[default]\nregion = &lt;region-name&gt; // ex: ap-south-1\n</code></pre>\n<p>Or you can also run the command <code>aws configure</code> and provide the region details and keep the rest of the fields as it is.</p>\n<pre><code>aws configure\nAWS Access Key ID [None]:\nAWS Secret Access Key [None]:\nDefault region name [None]: &lt;region-name&gt;\nDefault output format [None]:\n</code></pre>\n"}],"owner":{"account_id":5138725,"reputation":1489,"user_id":4116725,"accept_rate":75,"display_name":"Codistan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134634,"favorite_count":0,"down_vote_count":0,"up_vote_count":88,"accepted_answer_id":45081648,"answer_count":12,"score":88,"last_activity_date":1697616819,"creation_date":1495611633,"question_id":44151982,"body_markdown":"I have gone through the question titled &quot;Setting the AWS region programmatically 1&quot; but it doesn&#39;t provide all the answers I need.\r\n\r\nQ1: I&#39;m getting a `SDKClientException-Unable to find a region via the region provider chain`. What am I doing wrong? or is there a typo that I missed.\r\n\r\n    public class CreateS3Bucket {\r\n\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\t\r\n\t\tBasicAWSCredentials creds = new BasicAWSCredentials(&quot;aws-access-key&quot;, &quot;aws-secret-key&quot;);\r\n\t\tAmazonS3 s3Client = AmazonS3ClientBuilder.standard().withCredentials(new AWSStaticCredentialsProvider(creds)).build();\r\n\t\t\r\n\t\tRegion region = Region.getRegion(Regions.US_EAST_1);\r\n\t\ts3Client.setRegion(region);\r\n\t\t\r\n\t\ttry {\r\n\t\t\tString bucketName = &quot;testBucket&quot; + UUID.randomUUID();\r\n\t\t\ts3Client.createBucket(bucketName);\r\n\t\t\tSystem.out.println(&quot;Bucket Created Successfully.&quot;);\r\n\t\t\r\n\t\t} catch(AmazonServiceException awse) {\r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;This means that your request made it AWS S3 but got rejected&quot;);\r\n\t\t\tSystem.out.println(&quot;Error Message:&quot; +awse.getMessage());\r\n\t\t\tSystem.out.println(&quot;Error Message:&quot; +awse.getErrorCode());\r\n\t\t\tSystem.out.println(&quot;Error Message:&quot; +awse.getErrorType());\r\n\t\t\tSystem.out.println(&quot;Error Message:&quot; +awse.getRequestId());\r\n\t\t\t\r\n\t\t} catch (AmazonClientException ace) {\r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;The Amazon Client encountered an Error with network Connectivity&quot;);\r\n\t\t\tSystem.out.println(&quot;Error Message:&quot; + ace.getMessage());\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\n}\r\n\r\nQ2: What code changes needs to be done if I want to build a Lambda Function out of it? I&#39;m aware how to create a lambda function and roles that it needs. Just need to know if the code that I have written needs to changed. How should I implement the LambdaFuctionHandler class as below:\r\n\r\n    import com.amazonaws.services.lambda.runtime.Context;\r\n    import com.amazonaws.services.lambda.runtime.RequestHandler;\r\n\r\n     public class LambdaFunctionHandler implements RequestHandler&lt;String, String&gt; {\r\n\r\n    @Override\r\n    public String handleRequest(String input, Context context) {\r\n        context.getLogger().log(&quot;Input: &quot; + input);\r\n\r\n        \r\n        return null;\r\n    }\r\n\r\n    }\r\n\r\n\r\n","title":"AWS Java SDK - Unable to find a region via the region provider chain","body":"<p>I have gone through the question titled \"Setting the AWS region programmatically 1\" but it doesn't provide all the answers I need.</p>\n\n<p>Q1: I'm getting a <code>SDKClientException-Unable to find a region via the region provider chain</code>. What am I doing wrong? or is there a typo that I missed.</p>\n\n<pre><code>public class CreateS3Bucket {\n\npublic static void main(String[] args) throws IOException {\n\n    BasicAWSCredentials creds = new BasicAWSCredentials(\"aws-access-key\", \"aws-secret-key\");\n    AmazonS3 s3Client = AmazonS3ClientBuilder.standard().withCredentials(new AWSStaticCredentialsProvider(creds)).build();\n\n    Region region = Region.getRegion(Regions.US_EAST_1);\n    s3Client.setRegion(region);\n\n    try {\n        String bucketName = \"testBucket\" + UUID.randomUUID();\n        s3Client.createBucket(bucketName);\n        System.out.println(\"Bucket Created Successfully.\");\n\n    } catch(AmazonServiceException awse) {\n\n        System.out.println(\"This means that your request made it AWS S3 but got rejected\");\n        System.out.println(\"Error Message:\" +awse.getMessage());\n        System.out.println(\"Error Message:\" +awse.getErrorCode());\n        System.out.println(\"Error Message:\" +awse.getErrorType());\n        System.out.println(\"Error Message:\" +awse.getRequestId());\n\n    } catch (AmazonClientException ace) {\n\n        System.out.println(\"The Amazon Client encountered an Error with network Connectivity\");\n        System.out.println(\"Error Message:\" + ace.getMessage());\n    }\n\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Q2: What code changes needs to be done if I want to build a Lambda Function out of it? I'm aware how to create a lambda function and roles that it needs. Just need to know if the code that I have written needs to changed. How should I implement the LambdaFuctionHandler class as below:</p>\n\n<pre><code>import com.amazonaws.services.lambda.runtime.Context;\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\n\n public class LambdaFunctionHandler implements RequestHandler&lt;String, String&gt; {\n\n@Override\npublic String handleRequest(String input, Context context) {\n    context.getLogger().log(\"Input: \" + input);\n\n\n    return null;\n}\n\n}\n</code></pre>\n"},{"tags":["java","reactjs","spring-boot","java-17","spring-boot-3"],"comments":[{"owner":{"account_id":9378438,"reputation":1138,"user_id":8504033,"display_name":"Abdul Alim Shakir"},"score":0,"creation_date":1697621172,"post_id":77314529,"comment_id":136301734,"body_markdown":"Are you using axios in react?","body":"Are you using axios in react?"},{"owner":{"account_id":7241283,"reputation":183,"user_id":5524788,"accept_rate":86,"display_name":"Jill"},"score":0,"creation_date":1697625290,"post_id":77314529,"comment_id":136302510,"body_markdown":"yes @AbdulAlimShakir","body":"yes @AbdulAlimShakir"}],"owner":{"account_id":7241283,"reputation":183,"user_id":5524788,"accept_rate":86,"display_name":"Jill"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697616758,"creation_date":1697616758,"question_id":77314529,"body_markdown":"Controller API is receiving a string datatype as @RequestBody which is having size &gt; 5mb. \r\nEven though a simple string having less than 1 kb is sent back as response , at the front end (client) is not able to receive this response. \r\n\r\nBut if the request body string is having size &lt; 5 mb , any response will be received at front end. \r\n\r\nWhere might be the actual issue here ? \r\n\r\nI tried setting \r\n\r\nserver.tomcat.max-http-post-size = 10\r\n\r\nBut no luck \r\n\r\nIs it failing at react application or in spring boot application?","title":"String Payload &gt; 5Mb , Fails to send back response","body":"<p>Controller API is receiving a string datatype as @RequestBody which is having size &gt; 5mb.\nEven though a simple string having less than 1 kb is sent back as response , at the front end (client) is not able to receive this response.</p>\n<p>But if the request body string is having size &lt; 5 mb , any response will be received at front end.</p>\n<p>Where might be the actual issue here ?</p>\n<p>I tried setting</p>\n<p>server.tomcat.max-http-post-size = 10</p>\n<p>But no luck</p>\n<p>Is it failing at react application or in spring boot application?</p>\n"},{"tags":["javascript","java","websocket","stomp","java-websocket"],"comments":[{"owner":{"account_id":13252051,"reputation":1635,"user_id":9569292,"display_name":"Thomas Timbul"},"score":0,"creation_date":1670509602,"post_id":74731441,"comment_id":131895227,"body_markdown":"Should that be `@MessageMapping(&quot;/topic/greeting&quot;)`?","body":"Should that be <code>@MessageMapping(&quot;&#47;topic&#47;greeting&quot;)</code>?"},{"owner":{"account_id":14940264,"reputation":161,"user_id":10787157,"display_name":"BJagger"},"score":0,"creation_date":1670511805,"post_id":74731441,"comment_id":131896075,"body_markdown":"https://docs.spring.io/spring-framework/docs/6.0.3-SNAPSHOT/reference/html/web.html#websocket-stomp-message-flow by this reference no","body":"<a href=\"https://docs.spring.io/spring-framework/docs/6.0.3-SNAPSHOT/reference/html/web.html#websocket-stomp-message-flow\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/6.0.3-SNAPSHOT/referenc&zwnj;&#8203;e/&hellip;</a> by this reference no"}],"answers":[{"tags":[],"owner":{"account_id":21222460,"reputation":326,"user_id":15608713,"display_name":"i_m_js"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697616754,"creation_date":1697616754,"answer_id":77314528,"question_id":74731441,"body_markdown":"In your MessageMapping handler prefix your destination with a `/` (i.e. &quot;/topic/greeting&quot;). you have registered `&quot;/topic&quot;, &quot;/queue&quot;` as the broker endpoints, spring will validate the destination using this before sending the message. Since `topic/greeting` does not match the registered paths, the message is not sent. \r\nNote: This is handled in `AbstractBrokerMessageHandler#checkDestinationPrefix` which is inherited by `SimpleBrokerMessageHandler`\r\n\r\nSimilarly in your JavaScript code, use `/app/greeting` as the stomp message destination.","title":"Stomp over Websocket: Connection is established but messages are not received on the channel. Probably more related to Javascript","body":"<p>In your MessageMapping handler prefix your destination with a <code>/</code> (i.e. &quot;/topic/greeting&quot;). you have registered <code>&quot;/topic&quot;, &quot;/queue&quot;</code> as the broker endpoints, spring will validate the destination using this before sending the message. Since <code>topic/greeting</code> does not match the registered paths, the message is not sent.\nNote: This is handled in <code>AbstractBrokerMessageHandler#checkDestinationPrefix</code> which is inherited by <code>SimpleBrokerMessageHandler</code></p>\n<p>Similarly in your JavaScript code, use <code>/app/greeting</code> as the stomp message destination.</p>\n"}],"owner":{"account_id":14940264,"reputation":161,"user_id":10787157,"display_name":"BJagger"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2541,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697616754,"creation_date":1670508141,"question_id":74731441,"body_markdown":"I implement chat using WebSocket and SockJs in the client and spring-websocket on the server, I have established a connection but when I send a message it never gets to the server - or it appears so based on the lack of log from handling method. It looks like the client (and the coder :P) is at fault here but I cannot spot the mistake. \r\n### Client:\r\n```\r\nimport Stomp from &#39;stompjs&#39;;\r\n...\r\nfunction connect() {\r\n    var socket = new WebSocket(&#39;ws://localhost:8080/chat&#39;, &quot;v10.stomp&quot;);\r\n    stompClient = Stomp.over(socket);\r\n    stompClient.connect({}, function(frame) {\r\n        setConnected(true);\r\n        console.log(&#39;Connected: &#39; + frame);\r\n        stompClient.subscribe(&#39;/topic/greeting&#39;, function(messageOutput) {\r\n            console.log(messageOutput.body);\r\n            showMessageOutput(JSON.parse(messageOutput.body));\r\n        });\r\n    });\r\n}\r\n\r\nfunction sendMessage() {\r\n    let message = JSON.stringify({&quot;from&quot;:&quot;User1&quot;, &quot;messageBody&quot;:&quot;Connected&quot;, &quot;to&quot;:&#39;&#39;});\r\n    console.log(message);\r\n    stompClient.send(&quot;app/greeting&quot;, {}, message); // tried to change destination to topic/greeting - with no positive results\r\n}\r\n...\r\n```\r\n#### Clients package.json dependencies:\r\n```\r\n&quot;devDependencies&quot;: {\r\n    &quot;css-loader&quot;: &quot;^6.7.2&quot;,\r\n    &quot;postcss-loader&quot;: &quot;^7.0.2&quot;,\r\n    &quot;sass&quot;: &quot;^1.56.1&quot;,\r\n    &quot;sass-loader&quot;: &quot;^13.2.0&quot;,\r\n    &quot;style-loader&quot;: &quot;^3.3.1&quot;,\r\n    &quot;webpack&quot;: &quot;^5.75.0&quot;,\r\n    &quot;webpack-cli&quot;: &quot;^5.0.1&quot;,\r\n    &quot;webpack-dev-server&quot;: &quot;^4.11.1&quot;\r\n  },\r\n  &quot;main&quot;: &quot;webpack.config.js&quot;,\r\n  &quot;description&quot;: &quot;&quot;,\r\n  &quot;dependencies&quot;: {\r\n    &quot;bootstrap&quot;: &quot;^5.2.3&quot;,\r\n    &quot;html-webpack-plugin&quot;: &quot;^5.5.0&quot;,\r\n    &quot;jquery&quot;: &quot;^3.6.1&quot;,\r\n    &quot;net&quot;: &quot;^1.0.2&quot;,\r\n    &quot;sockjs-client&quot;: &quot;^1.6.1&quot;,\r\n    &quot;stomp-websocket&quot;: &quot;^2.3.4-next&quot;,\r\n    &quot;stompjs&quot;: &quot;^2.3.3&quot;,\r\n    &quot;websocket&quot;: &quot;^1.0.34&quot;\r\n  }\r\n```\r\n\r\n### Server: \r\n```\r\n@RequiredArgsConstructor\r\n@Controller\r\n@Slf4j\r\nclass WebSocketController {\r\n\r\n    private static final Map&lt;String, String&gt; userToSessionMap = new ConcurrentHashMap&lt;&gt;();\r\n    SimpMessagingTemplate simpMessagingTemplate;\r\n\r\n    @MessageMapping(&quot;/greeting&quot;)\r\n    public void addUserAndNotifyOthers(@Header(&quot;simpSessionId&quot;) String sessionId, @Payload Message initialMessage) {\r\n        userToSessionMap.put(initialMessage.getFrom(), sessionId);\r\n        log.warn(initialMessage.toString()); // THIS LOG IS NEVER DISPLAYED\r\n        simpMessagingTemplate.convertAndSend(&quot;topic/greeting&quot;, initialMessage);\r\n    }\r\n...\r\n}\r\n\r\n@Data\r\n@AllArgsConstructor\r\npublic class Message {\r\n    String to;\r\n    String from;\r\n    String messageBody;\r\n}\r\n\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class WebsocketConfiguration implements WebSocketMessageBrokerConfigurer {\r\n\r\n    @Override\r\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\r\n        registry.addEndpoint(&quot;/chat&quot;).setAllowedOrigins(&quot;http://localhost:5000&quot;);\r\n        registry.addEndpoint(&quot;/chat&quot;).setAllowedOrigins(&quot;http://localhost:5000&quot;).withSockJS();\r\n    }\r\n\r\n    @Override\r\n    public void configureMessageBroker(MessageBrokerRegistry registry) {\r\n        registry.enableSimpleBroker(&quot;/topic&quot;, &quot;/queue&quot;);\r\n        registry.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n    }\r\n}\r\n\r\n```\r\n\r\n### LOGS\r\n\r\n```\r\nWeb Socket Opened... stomp.js:134:104\r\n&gt;&gt;&gt; CONNECT\r\naccept-version:1.1,1.0\r\nheart-beat:10000,10000\r\n\r\n� stomp.js:134:104\r\n&lt;&lt;&lt; CONNECTED\r\nversion:1.1\r\nheart-beat:0,0\r\n\r\n� stomp.js:134:104\r\nconnected to server undefined stomp.js:134:104\r\nConnected: CONNECTED\r\nheart-beat:0,0\r\nversion:1.1\r\n\r\nindex.js:32:17\r\n&gt;&gt;&gt; SUBSCRIBE\r\nid:sub-0\r\ndestination:/topic/greeting\r\n\r\n� stomp.js:134:104\r\nSENDING:  {&quot;from&quot;:&quot;User1&quot;,&quot;messageBody&quot;:&quot;Connected&quot;,&quot;to&quot;:&quot;&quot;} index.js:54:13\r\n&gt;&gt;&gt; SEND\r\ndestination:topic/greeting\r\ncontent-length:50\r\n\r\n{&quot;from&quot;:&quot;User1&quot;,&quot;messageBody&quot;:&quot;Connected&quot;,&quot;to&quot;:&quot;&quot;}�\r\n// END OF LOGS: I never get Received log\r\n```\r\n","title":"Stomp over Websocket: Connection is established but messages are not received on the channel. Probably more related to Javascript","body":"<p>I implement chat using WebSocket and SockJs in the client and spring-websocket on the server, I have established a connection but when I send a message it never gets to the server - or it appears so based on the lack of log from handling method. It looks like the client (and the coder :P) is at fault here but I cannot spot the mistake.</p>\n<h3>Client:</h3>\n<pre><code>import Stomp from 'stompjs';\n...\nfunction connect() {\n    var socket = new WebSocket('ws://localhost:8080/chat', &quot;v10.stomp&quot;);\n    stompClient = Stomp.over(socket);\n    stompClient.connect({}, function(frame) {\n        setConnected(true);\n        console.log('Connected: ' + frame);\n        stompClient.subscribe('/topic/greeting', function(messageOutput) {\n            console.log(messageOutput.body);\n            showMessageOutput(JSON.parse(messageOutput.body));\n        });\n    });\n}\n\nfunction sendMessage() {\n    let message = JSON.stringify({&quot;from&quot;:&quot;User1&quot;, &quot;messageBody&quot;:&quot;Connected&quot;, &quot;to&quot;:''});\n    console.log(message);\n    stompClient.send(&quot;app/greeting&quot;, {}, message); // tried to change destination to topic/greeting - with no positive results\n}\n...\n</code></pre>\n<h4>Clients package.json dependencies:</h4>\n<pre><code>&quot;devDependencies&quot;: {\n    &quot;css-loader&quot;: &quot;^6.7.2&quot;,\n    &quot;postcss-loader&quot;: &quot;^7.0.2&quot;,\n    &quot;sass&quot;: &quot;^1.56.1&quot;,\n    &quot;sass-loader&quot;: &quot;^13.2.0&quot;,\n    &quot;style-loader&quot;: &quot;^3.3.1&quot;,\n    &quot;webpack&quot;: &quot;^5.75.0&quot;,\n    &quot;webpack-cli&quot;: &quot;^5.0.1&quot;,\n    &quot;webpack-dev-server&quot;: &quot;^4.11.1&quot;\n  },\n  &quot;main&quot;: &quot;webpack.config.js&quot;,\n  &quot;description&quot;: &quot;&quot;,\n  &quot;dependencies&quot;: {\n    &quot;bootstrap&quot;: &quot;^5.2.3&quot;,\n    &quot;html-webpack-plugin&quot;: &quot;^5.5.0&quot;,\n    &quot;jquery&quot;: &quot;^3.6.1&quot;,\n    &quot;net&quot;: &quot;^1.0.2&quot;,\n    &quot;sockjs-client&quot;: &quot;^1.6.1&quot;,\n    &quot;stomp-websocket&quot;: &quot;^2.3.4-next&quot;,\n    &quot;stompjs&quot;: &quot;^2.3.3&quot;,\n    &quot;websocket&quot;: &quot;^1.0.34&quot;\n  }\n</code></pre>\n<h3>Server:</h3>\n<pre><code>@RequiredArgsConstructor\n@Controller\n@Slf4j\nclass WebSocketController {\n\n    private static final Map&lt;String, String&gt; userToSessionMap = new ConcurrentHashMap&lt;&gt;();\n    SimpMessagingTemplate simpMessagingTemplate;\n\n    @MessageMapping(&quot;/greeting&quot;)\n    public void addUserAndNotifyOthers(@Header(&quot;simpSessionId&quot;) String sessionId, @Payload Message initialMessage) {\n        userToSessionMap.put(initialMessage.getFrom(), sessionId);\n        log.warn(initialMessage.toString()); // THIS LOG IS NEVER DISPLAYED\n        simpMessagingTemplate.convertAndSend(&quot;topic/greeting&quot;, initialMessage);\n    }\n...\n}\n\n@Data\n@AllArgsConstructor\npublic class Message {\n    String to;\n    String from;\n    String messageBody;\n}\n\n@Configuration\n@EnableWebSocketMessageBroker\npublic class WebsocketConfiguration implements WebSocketMessageBrokerConfigurer {\n\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\n        registry.addEndpoint(&quot;/chat&quot;).setAllowedOrigins(&quot;http://localhost:5000&quot;);\n        registry.addEndpoint(&quot;/chat&quot;).setAllowedOrigins(&quot;http://localhost:5000&quot;).withSockJS();\n    }\n\n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry registry) {\n        registry.enableSimpleBroker(&quot;/topic&quot;, &quot;/queue&quot;);\n        registry.setApplicationDestinationPrefixes(&quot;/app&quot;);\n    }\n}\n\n</code></pre>\n<h3>LOGS</h3>\n<pre><code>Web Socket Opened... stomp.js:134:104\n&gt;&gt;&gt; CONNECT\naccept-version:1.1,1.0\nheart-beat:10000,10000\n\n� stomp.js:134:104\n&lt;&lt;&lt; CONNECTED\nversion:1.1\nheart-beat:0,0\n\n� stomp.js:134:104\nconnected to server undefined stomp.js:134:104\nConnected: CONNECTED\nheart-beat:0,0\nversion:1.1\n\nindex.js:32:17\n&gt;&gt;&gt; SUBSCRIBE\nid:sub-0\ndestination:/topic/greeting\n\n� stomp.js:134:104\nSENDING:  {&quot;from&quot;:&quot;User1&quot;,&quot;messageBody&quot;:&quot;Connected&quot;,&quot;to&quot;:&quot;&quot;} index.js:54:13\n&gt;&gt;&gt; SEND\ndestination:topic/greeting\ncontent-length:50\n\n{&quot;from&quot;:&quot;User1&quot;,&quot;messageBody&quot;:&quot;Connected&quot;,&quot;to&quot;:&quot;&quot;}�\n// END OF LOGS: I never get Received log\n</code></pre>\n"},{"tags":["java","android","android-alertdialog"],"answers":[{"comments":[{"owner":{"account_id":4155523,"reputation":1183,"user_id":3406936,"display_name":"Shlomi Agiv"},"score":0,"creation_date":1697616573,"post_id":77257544,"comment_id":136300811,"body_markdown":"your solution uses a fragment layout and view id, while I&#39;m looking for a solution in pure code","body":"your solution uses a fragment layout and view id, while I&#39;m looking for a solution in pure code"}],"tags":[],"owner":{"account_id":7118887,"reputation":543,"user_id":5444161,"accept_rate":29,"display_name":"Rahul Agrawal"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696842591,"creation_date":1696842591,"answer_id":77257544,"question_id":77257246,"body_markdown":"You can create a custom view.\r\n\r\n    public class EditNameDialogFragment extends DialogFragment {\r\n\r\n\tprivate EditText mEditText;\r\n\r\n\tpublic EditNameDialogFragment() {\r\n\t\t// Empty constructor is required for DialogFragment\r\n                // Make sure not to add arguments to the constructor\r\n                // Use `newInstance` instead as shown below\r\n\t}\r\n\t\r\n\tpublic static EditNameDialogFragment newInstance(String title) {\r\n\t\tEditNameDialogFragment frag = new EditNameDialogFragment();\r\n\t\tBundle args = new Bundle();\r\n\t\targs.putString(&quot;title&quot;, title);\r\n\t\tfrag.setArguments(args);\r\n\t\treturn frag;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n\t\t\tBundle savedInstanceState) {\r\n\t\treturn inflater.inflate(R.layout.fragment_edit_name, container);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void onViewCreated(View view, @Nullable Bundle savedInstanceState) {\r\n\t\tsuper.onViewCreated(view, savedInstanceState);\r\n\t\t// Get field from view\r\n\t\tmEditText = (EditText) view.findViewById(R.id.txt_your_name);\r\n\t\t// Fetch arguments from bundle and set title\r\n\t\tString title = getArguments().getString(&quot;title&quot;, &quot;Enter Name&quot;);\r\n\t\tgetDialog().setTitle(title);\r\n\t\t// Show soft keyboard automatically and request focus to field\r\n\t\tmEditText.requestFocus();\r\n\t\tgetDialog().getWindow().setSoftInputMode(\r\n\t\t    WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE);\r\n\t}\r\n    }\r\n\r\nCan be called like this.\r\n\r\n        public class DialogDemoActivity extends AppCompatActivity {\r\n      @Override\r\n      public void onCreate(Bundle savedInstanceState) {\r\n          super.onCreate(savedInstanceState);\r\n          setContentView(R.layout.main);\r\n          showEditDialog();\r\n      }\r\n      \r\n      private void showEditDialog() {\r\n          FragmentManager fm = getSupportFragmentManager();\r\n          EditNameDialogFragment editNameDialogFragment = EditNameDialogFragment.newInstance(&quot;Some Title&quot;);\r\n          editNameDialogFragment.show(fm, &quot;fragment_edit_name&quot;);\r\n      }\r\n    }","title":"using setview under AlertDialog with long text","body":"<p>You can create a custom view.</p>\n<pre><code>public class EditNameDialogFragment extends DialogFragment {\n\nprivate EditText mEditText;\n\npublic EditNameDialogFragment() {\n    // Empty constructor is required for DialogFragment\n            // Make sure not to add arguments to the constructor\n            // Use `newInstance` instead as shown below\n}\n\npublic static EditNameDialogFragment newInstance(String title) {\n    EditNameDialogFragment frag = new EditNameDialogFragment();\n    Bundle args = new Bundle();\n    args.putString(&quot;title&quot;, title);\n    frag.setArguments(args);\n    return frag;\n}\n\n@Override\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\n        Bundle savedInstanceState) {\n    return inflater.inflate(R.layout.fragment_edit_name, container);\n}\n\n@Override\npublic void onViewCreated(View view, @Nullable Bundle savedInstanceState) {\n    super.onViewCreated(view, savedInstanceState);\n    // Get field from view\n    mEditText = (EditText) view.findViewById(R.id.txt_your_name);\n    // Fetch arguments from bundle and set title\n    String title = getArguments().getString(&quot;title&quot;, &quot;Enter Name&quot;);\n    getDialog().setTitle(title);\n    // Show soft keyboard automatically and request focus to field\n    mEditText.requestFocus();\n    getDialog().getWindow().setSoftInputMode(\n        WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE);\n}\n}\n</code></pre>\n<p>Can be called like this.</p>\n<pre><code>    public class DialogDemoActivity extends AppCompatActivity {\n  @Override\n  public void onCreate(Bundle savedInstanceState) {\n      super.onCreate(savedInstanceState);\n      setContentView(R.layout.main);\n      showEditDialog();\n  }\n  \n  private void showEditDialog() {\n      FragmentManager fm = getSupportFragmentManager();\n      EditNameDialogFragment editNameDialogFragment = EditNameDialogFragment.newInstance(&quot;Some Title&quot;);\n      editNameDialogFragment.show(fm, &quot;fragment_edit_name&quot;);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":4155523,"reputation":1183,"user_id":3406936,"display_name":"Shlomi Agiv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697616609,"creation_date":1696839810,"question_id":77257246,"body_markdown":"I&#39;ve been trying use setview with an added button under an AlertDialog along with long message text and positive/negative buttons. Whatever I do, either I don&#39;t see the positive/negative buttons or don&#39;t see the checkbox or the long text isn&#39;t scrollable. What can I do to show all buttons and checkbox and make it scrollable (als when phone is horizontal)?\r\nfull code:\r\n\r\n    import android.app.AlertDialog;\r\n    import android.app.Dialog;\r\n    import android.content.DialogInterface;\r\n    import android.os.Bundle;\r\n    import android.widget.Button;\r\n    import android.widget.CheckBox;\r\n    \r\n    import androidx.fragment.app.DialogFragment;\r\n    \r\n    public class StartGameDialogFragment extends DialogFragment {\r\n        @Override\r\n        public Dialog onCreateDialog(Bundle savedInstanceState) {\r\n            Button customCheckBox = new CheckBox(getActivity());\r\n            customCheckBox.setText(&quot;Custom CheckBox&quot;);\r\n            // Use the Builder class for convenient dialog construction.\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\r\n            builder.setView(customCheckBox)\r\n                    .setMessage(&quot;Your long message here&quot; + System.lineSeparator() + &quot;The standard Lorem Ipsum passage, used since the 1500s\\n&quot; +\r\n                    &quot;\\&quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\\&quot;\\n&quot; +\r\n                    &quot;\\n&quot; +\r\n                    &quot;Section 1.10.32 of \\&quot;de Finibus Bonorum et Malorum\\&quot;, written by Cicero in 45 BC\\n&quot; +\r\n                    &quot;\\&quot;Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?&quot;)\r\n    \r\n                    .setPositiveButton(&quot;start&quot;, new DialogInterface.OnClickListener() {\r\n                        public void onClick(DialogInterface dialog, int id) {\r\n                            // START THE GAME!\r\n                        }\r\n                    })\r\n                    .setNegativeButton(&quot;cancel&quot;, new DialogInterface.OnClickListener() {\r\n                        public void onClick(DialogInterface dialog, int id) {\r\n                            // User cancels the dialog.\r\n                        }\r\n                    });\r\n            // Create the AlertDialog object and return it.\r\n            return builder.create();\r\n        }\r\n    }\r\n\r\n-- edit --\r\n\r\nlooking for a solution in pure code, without xml&#39;s","title":"using setview under AlertDialog with long text","body":"<p>I've been trying use setview with an added button under an AlertDialog along with long message text and positive/negative buttons. Whatever I do, either I don't see the positive/negative buttons or don't see the checkbox or the long text isn't scrollable. What can I do to show all buttons and checkbox and make it scrollable (als when phone is horizontal)?\nfull code:</p>\n<pre><code>import android.app.AlertDialog;\nimport android.app.Dialog;\nimport android.content.DialogInterface;\nimport android.os.Bundle;\nimport android.widget.Button;\nimport android.widget.CheckBox;\n\nimport androidx.fragment.app.DialogFragment;\n\npublic class StartGameDialogFragment extends DialogFragment {\n    @Override\n    public Dialog onCreateDialog(Bundle savedInstanceState) {\n        Button customCheckBox = new CheckBox(getActivity());\n        customCheckBox.setText(&quot;Custom CheckBox&quot;);\n        // Use the Builder class for convenient dialog construction.\n        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\n        builder.setView(customCheckBox)\n                .setMessage(&quot;Your long message here&quot; + System.lineSeparator() + &quot;The standard Lorem Ipsum passage, used since the 1500s\\n&quot; +\n                &quot;\\&quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\\&quot;\\n&quot; +\n                &quot;\\n&quot; +\n                &quot;Section 1.10.32 of \\&quot;de Finibus Bonorum et Malorum\\&quot;, written by Cicero in 45 BC\\n&quot; +\n                &quot;\\&quot;Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?&quot;)\n\n                .setPositiveButton(&quot;start&quot;, new DialogInterface.OnClickListener() {\n                    public void onClick(DialogInterface dialog, int id) {\n                        // START THE GAME!\n                    }\n                })\n                .setNegativeButton(&quot;cancel&quot;, new DialogInterface.OnClickListener() {\n                    public void onClick(DialogInterface dialog, int id) {\n                        // User cancels the dialog.\n                    }\n                });\n        // Create the AlertDialog object and return it.\n        return builder.create();\n    }\n}\n</code></pre>\n<p>-- edit --</p>\n<p>looking for a solution in pure code, without xml's</p>\n"},{"tags":["java","exception","runtime-error","runtimeexception"],"comments":[{"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"score":2,"creation_date":1697616423,"post_id":77314481,"comment_id":136300785,"body_markdown":"instead of writing `this::toDTO` you should the `TechniciansModel::toDTO`. :: is used with the class name not by the object","body":"instead of writing <code>this::toDTO</code> you should the <code>TechniciansModel::toDTO</code>. :: is used with the class name not by the object"}],"answers":[{"comments":[{"owner":{"account_id":29698054,"reputation":1,"user_id":22760831,"display_name":"Alejandro Palacios Sanz"},"score":0,"creation_date":1697617748,"post_id":77314513,"comment_id":136300997,"body_markdown":"I used many times this:: coding, and worked perfectly until now.\n\nBtw, cant use TechniciansModel cause it would make me declare the method as static, so i wouldnt have access to the bean injected","body":"I used many times this:: coding, and worked perfectly until now.  Btw, cant use TechniciansModel cause it would make me declare the method as static, so i wouldnt have access to the bean injected"},{"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"score":0,"creation_date":1697618418,"post_id":77314513,"comment_id":136301156,"body_markdown":"any specific reason why you have made your class as private?","body":"any specific reason why you have made your class as private?"},{"owner":{"account_id":29698054,"reputation":1,"user_id":22760831,"display_name":"Alejandro Palacios Sanz"},"score":0,"creation_date":1697619004,"post_id":77314513,"comment_id":136301274,"body_markdown":"It&#39;s an inner class designed to be exclusively used by the one that contains it, it doesn&#39;t need to have more visibility than that, plus the resulting class isn&#39;t big enough to extract its inner","body":"It&#39;s an inner class designed to be exclusively used by the one that contains it, it doesn&#39;t need to have more visibility than that, plus the resulting class isn&#39;t big enough to extract its inner"}],"tags":[],"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697616583,"creation_date":1697616583,"answer_id":77314513,"question_id":77314481,"body_markdown":"try as below:\r\n\r\n    return findTechnician.findWithUser()\r\n           .stream()\r\n           .map(TechniciansModel::toDTO)\r\n           .collect(Collectors.toSet());\r\n\r\n**::** is used with the class name not by the object.","title":"Why this fragment of code doesnt work but the others do?","body":"<p>try as below:</p>\n<pre><code>return findTechnician.findWithUser()\n       .stream()\n       .map(TechniciansModel::toDTO)\n       .collect(Collectors.toSet());\n</code></pre>\n<p><strong>::</strong> is used with the class name not by the object.</p>\n"}],"owner":{"account_id":29698054,"reputation":1,"user_id":22760831,"display_name":"Alejandro Palacios Sanz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697616583,"creation_date":1697616253,"question_id":77314481,"body_markdown":"This dont work: \\[Only changed the .map()\\]\r\n\r\n```\r\nreturn findTechnician.findWithUser()\r\n\t\t\t              .stream()\r\n\t\t\t              .map(this::toDTO)\r\n\t\t\t              .collect(Collectors.toSet());\r\n```\r\n\r\n`Error:`\r\n`Method threw &#39;java.lang.TypeNotPresentException&#39; exception.`\r\n\r\n`Type com.grupoaev.aevgestion.domain.entities.solicitudes.Tecnico not present`\r\n[enter image description here](https://i.stack.imgur.com/ujhQu.png)\r\n\r\nThis is my actual class:\r\n\r\n```\r\nprivate static class TechniciansModel extends LoadableDetachableModel&lt;Collection&lt;TechnicianDatesDTO&gt;&gt; {\r\n\r\n\t\tprivate static final long serialVersionUID = 1L;\r\n\r\n\t\t@SpringBean\r\n\t\tprivate FindTechnician findTechnician;\r\n\t\t@SpringBean\r\n\t\tprivate FindTechnicalUserAbsences findTechnicalUserAbsences;\r\n\r\n\t\tpublic TechniciansModel() {\r\n\t\t\tInjector.get().inject(this);\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tprotected Collection&lt;TechnicianDatesDTO&gt; load() {\r\n\r\n\t\t\treturn findTechnician.findWithUser()\r\n\t\t\t              .stream()\r\n\t\t\t              .map(t-&gt;toDTO(t))\r\n\t\t\t              .collect(Collectors.toSet());\r\n\t\t}\r\n\r\n\t\t@NotNull\r\n\t\tprivate TechnicianDatesDTO toDTO(Tecnico technician) {\r\n\t\t\tString displayingName = technician.getUsuario().getName();\r\n\r\n\t\t\tSet&lt;Range&lt;LocalDate&gt;&gt; invalidDates =\r\n\t\t\t\t\tfindTechnicalUserAbsences.findByTecnicoId(technician.getId())\r\n\t\t\t\t\t                         .stream()\r\n\t\t\t\t\t                         .map(absence -&gt; new Range&lt;&gt;(toLocalDate(absence.getFechaInicio()),\r\n\t\t\t\t\t                                                     toLocalDate(absence.getFechaFin())))\r\n\t\t\t\t\t                         .collect(Collectors.toSet());\r\n\r\n\t\t\treturn new TechnicianDatesDTO(displayingName, invalidDates);\r\n\t\t}\r\n\r\n\t\tprivate LocalDate toLocalDate(Date date) {\r\n\t\t\treturn date != null ? date.toInstant().atZone(ZoneId.systemDefault()).toLocalDate() : null;\r\n\t\t}\r\n\t}\r\n```\r\n\r\nI guess this is a deep Java working way problem that i dont understand and i m probably far from it...\r\n\r\nShould work the same way as:\r\n\r\n```\r\nreturn findTechnician.findWithUser()\r\n\t\t\t              .stream()\r\n\t\t\t              .map(t-&gt;toDTO(t))\r\n\t\t\t              .collect(Collectors.toSet());\r\n```","title":"Why this fragment of code doesnt work but the others do?","body":"<p>This dont work: [Only changed the .map()]</p>\n<pre><code>return findTechnician.findWithUser()\n                          .stream()\n                          .map(this::toDTO)\n                          .collect(Collectors.toSet());\n</code></pre>\n<p><code>Error:</code>\n<code>Method threw 'java.lang.TypeNotPresentException' exception.</code></p>\n<p><code>Type com.grupoaev.aevgestion.domain.entities.solicitudes.Tecnico not present</code>\n<a href=\"https://i.stack.imgur.com/ujhQu.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>This is my actual class:</p>\n<pre><code>private static class TechniciansModel extends LoadableDetachableModel&lt;Collection&lt;TechnicianDatesDTO&gt;&gt; {\n\n        private static final long serialVersionUID = 1L;\n\n        @SpringBean\n        private FindTechnician findTechnician;\n        @SpringBean\n        private FindTechnicalUserAbsences findTechnicalUserAbsences;\n\n        public TechniciansModel() {\n            Injector.get().inject(this);\n        }\n\n        @Override\n        protected Collection&lt;TechnicianDatesDTO&gt; load() {\n\n            return findTechnician.findWithUser()\n                          .stream()\n                          .map(t-&gt;toDTO(t))\n                          .collect(Collectors.toSet());\n        }\n\n        @NotNull\n        private TechnicianDatesDTO toDTO(Tecnico technician) {\n            String displayingName = technician.getUsuario().getName();\n\n            Set&lt;Range&lt;LocalDate&gt;&gt; invalidDates =\n                    findTechnicalUserAbsences.findByTecnicoId(technician.getId())\n                                             .stream()\n                                             .map(absence -&gt; new Range&lt;&gt;(toLocalDate(absence.getFechaInicio()),\n                                                                         toLocalDate(absence.getFechaFin())))\n                                             .collect(Collectors.toSet());\n\n            return new TechnicianDatesDTO(displayingName, invalidDates);\n        }\n\n        private LocalDate toLocalDate(Date date) {\n            return date != null ? date.toInstant().atZone(ZoneId.systemDefault()).toLocalDate() : null;\n        }\n    }\n</code></pre>\n<p>I guess this is a deep Java working way problem that i dont understand and i m probably far from it...</p>\n<p>Should work the same way as:</p>\n<pre><code>return findTechnician.findWithUser()\n                          .stream()\n                          .map(t-&gt;toDTO(t))\n                          .collect(Collectors.toSet());\n</code></pre>\n"},{"tags":["java","spring","httpclient","resttemplate","connection-timeout"],"comments":[{"owner":{"account_id":5420563,"reputation":302,"user_id":4314307,"display_name":"Dhruv Raj Singh"},"score":0,"creation_date":1533559484,"post_id":51706926,"comment_id":90376749,"body_markdown":"can you check whether two different version of commons-httpclient jar is present. if present then remove one and try.","body":"can you check whether two different version of commons-httpclient jar is present. if present then remove one and try."},{"owner":{"account_id":13244227,"reputation":715,"user_id":9563846,"display_name":"Bali"},"score":0,"creation_date":1533560069,"post_id":51706926,"comment_id":90377175,"body_markdown":"Hi, in the library I have: commons-httpclient-3.1, httpcore-4.4.6 and httpclient-4.5.3","body":"Hi, in the library I have: commons-httpclient-3.1, httpcore-4.4.6 and httpclient-4.5.3"},{"owner":{"account_id":5420563,"reputation":302,"user_id":4314307,"display_name":"Dhruv Raj Singh"},"score":0,"creation_date":1533560264,"post_id":51706926,"comment_id":90377320,"body_markdown":"add only one httpClient remove  commons-httpclient-3.1","body":"add only one httpClient remove  commons-httpclient-3.1"},{"owner":{"account_id":13244227,"reputation":715,"user_id":9563846,"display_name":"Bali"},"score":0,"creation_date":1533561082,"post_id":51706926,"comment_id":90377879,"body_markdown":"Thank you, i will try to remove  commons-httpclient-3.1 and test it again","body":"Thank you, i will try to remove  commons-httpclient-3.1 and test it again"},{"owner":{"account_id":13244227,"reputation":715,"user_id":9563846,"display_name":"Bali"},"score":0,"creation_date":1533561907,"post_id":51706926,"comment_id":90378480,"body_markdown":"hi, I did try to remove the commons-httpclient-3.1 and leave only the httpclient-4.5.3 but the timeout exception is still there","body":"hi, I did try to remove the commons-httpclient-3.1 and leave only the httpclient-4.5.3 but the timeout exception is still there"},{"owner":{"account_id":5420563,"reputation":302,"user_id":4314307,"display_name":"Dhruv Raj Singh"},"score":0,"creation_date":1533619728,"post_id":51706926,"comment_id":90399544,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/177539/discussion-between-dhruv-raj-singh-and-schau).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/177539/discussion-between-dhruv-raj-singh-and-schau\">continue this discussion in chat</a>."},{"owner":{"account_id":2374041,"reputation":943,"user_id":2077917,"accept_rate":25,"display_name":"Winster"},"score":0,"creation_date":1599123562,"post_id":51706926,"comment_id":112678007,"body_markdown":"any update on this. I have a similar issue","body":"any update on this. I have a similar issue"}],"answers":[{"comments":[{"owner":{"account_id":13244227,"reputation":715,"user_id":9563846,"display_name":"Bali"},"score":0,"creation_date":1533634187,"post_id":51707945,"comment_id":90407089,"body_markdown":"yeah I did set a new SocketConfig object in my httpClient as follow: HttpClients.custom().setDefaultSocketConfig(SocketConfig.custom().setSoTimeout(600000).build()).build() but it still did not work :(","body":"yeah I did set a new SocketConfig object in my httpClient as follow: HttpClients.custom().setDefaultSocketConfig(SocketConfig.cus&zwnj;&#8203;tom().setSoTimeout(6&zwnj;&#8203;00000).build()).buil&zwnj;&#8203;d() but it still did not work :("},{"owner":{"account_id":5420563,"reputation":302,"user_id":4314307,"display_name":"Dhruv Raj Singh"},"score":0,"creation_date":1533708750,"post_id":51707945,"comment_id":90439392,"body_markdown":"Add setConnectionTimeout\nbecause connection is not established\n.setSoTimeout is the timeout for receiving the data when connection is established","body":"Add setConnectionTimeout because connection is not established .setSoTimeout is the timeout for receiving the data when connection is established"},{"owner":{"account_id":13244227,"reputation":715,"user_id":9563846,"display_name":"Bali"},"score":0,"creation_date":1533798344,"post_id":51707945,"comment_id":90480495,"body_markdown":"yes as you can see from my codes above, I did set already the connectionTimeout as 600000ms in the HttpComponentsClientHttpRequestFactory object","body":"yes as you can see from my codes above, I did set already the connectionTimeout as 600000ms in the HttpComponentsClientHttpRequestFactory object"}],"tags":[],"owner":{"account_id":5420563,"reputation":302,"user_id":4314307,"display_name":"Dhruv Raj Singh"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1533633501,"creation_date":1533559381,"answer_id":51707945,"question_id":51706926,"body_markdown":"You are using HTTP request configuration, Request level configuration applies only once the connection route has been fully established. It does not apply to SSL handshakes or CONNECT requests. You need to configure socket properties applied by the connection manager upon connection creation.\r\n\r\nThis link will be helpful https://github.com/spring-projects/spring-boot/issues/11379","title":"Connection Timeout in request with RestTemplate is not working correctly","body":"<p>You are using HTTP request configuration, Request level configuration applies only once the connection route has been fully established. It does not apply to SSL handshakes or CONNECT requests. You need to configure socket properties applied by the connection manager upon connection creation.</p>\n\n<p>This link will be helpful <a href=\"https://github.com/spring-projects/spring-boot/issues/11379\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/issues/11379</a></p>\n"}],"owner":{"account_id":13244227,"reputation":715,"user_id":9563846,"display_name":"Bali"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12216,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697616541,"creation_date":1533556060,"question_id":51706926,"body_markdown":"I am using RestTemplate to get data from an external service, and I would like to set timeout for the request as follow: \r\n\r\n            CloseableHttpClient client = HttpClients.custom().setDefaultRequestConfig(RequestConfig.custom().setConnectTimeout(600000).setConnectionRequestTimeout(600000).setSocketTimeout(600000).build()).build();\r\n\r\n            HttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory();\r\n            requestFactory.setHttpClient(client);\r\n    \t\trequestFactory.setConnectTimeout(600000);\r\n    \t\trequestFactory.setConnectionRequestTimeout(600000);\r\n    \t\trequestFactory.setReadTimeout(600000);\r\n\r\n            RestTemplate restTemplate = new RestTemplate(requestFactory);\r\n\r\n            HttpHeaders headers = new HttpHeaders();\r\n    \t\theaders.add(&quot;Authorization&quot;, &quot;Basic &quot; + settings.getBase64EncodedAuthString());\r\n    \t\theaders.setContentType(MediaType.APPLICATION_JSON);\r\n    \t\tHttpEntity&lt;BaseParameters&gt; request = new HttpEntity&lt;&gt;(parameters, headers);\r\n\r\n            ResponseEntity&lt;MyResponse&gt; response = restTemplate.exchange(&quot;https://my-external-service.com/service1&quot;, HttpMethod.POST,\r\n    \t\t\t\t\trequest, MyResponse.class);\r\n\r\nAlthough I have set the timeout to 600000ms (10 minutes), sometime I still got the timeout exception from server after only 20s, and this is the exception that I got: \r\n\r\n&gt; org.springframework.web.client.ResourceAccessException -&gt; I/O error on\r\n&gt; POST request for\r\n&gt; &quot;https://my-external-service.com/service1&quot;:\r\n&gt; Connect to my-external-service.com:443\r\n&gt;  failed: Connection timed out:\r\n&gt; connect; nested exception is\r\n&gt; org.apache.http.conn.HttpHostConnectException: Connect to\r\n&gt; my-external-service.com:443\r\n&gt; failed: Connection timed out: connect\r\n\r\nDoes anyone have an idea whether I made here something wrong with the timeout configuration or do I need to configure something more? Thank you","title":"Connection Timeout in request with RestTemplate is not working correctly","body":"<p>I am using RestTemplate to get data from an external service, and I would like to set timeout for the request as follow: </p>\n\n<pre><code>        CloseableHttpClient client = HttpClients.custom().setDefaultRequestConfig(RequestConfig.custom().setConnectTimeout(600000).setConnectionRequestTimeout(600000).setSocketTimeout(600000).build()).build();\n\n        HttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory();\n        requestFactory.setHttpClient(client);\n        requestFactory.setConnectTimeout(600000);\n        requestFactory.setConnectionRequestTimeout(600000);\n        requestFactory.setReadTimeout(600000);\n\n        RestTemplate restTemplate = new RestTemplate(requestFactory);\n\n        HttpHeaders headers = new HttpHeaders();\n        headers.add(\"Authorization\", \"Basic \" + settings.getBase64EncodedAuthString());\n        headers.setContentType(MediaType.APPLICATION_JSON);\n        HttpEntity&lt;BaseParameters&gt; request = new HttpEntity&lt;&gt;(parameters, headers);\n\n        ResponseEntity&lt;MyResponse&gt; response = restTemplate.exchange(\"https://my-external-service.com/service1\", HttpMethod.POST,\n                    request, MyResponse.class);\n</code></pre>\n\n<p>Although I have set the timeout to 600000ms (10 minutes), sometime I still got the timeout exception from server after only 20s, and this is the exception that I got: </p>\n\n<blockquote>\n  <p>org.springframework.web.client.ResourceAccessException -> I/O error on\n  POST request for\n  \"<a href=\"https://my-external-service.com/service1\" rel=\"nofollow noreferrer\">https://my-external-service.com/service1</a>\":\n  Connect to my-external-service.com:443\n   failed: Connection timed out:\n  connect; nested exception is\n  org.apache.http.conn.HttpHostConnectException: Connect to\n  my-external-service.com:443\n  failed: Connection timed out: connect</p>\n</blockquote>\n\n<p>Does anyone have an idea whether I made here something wrong with the timeout configuration or do I need to configure something more? Thank you</p>\n"},{"tags":["java","varhandle"],"owner":{"account_id":6871197,"reputation":456,"user_id":5281466,"accept_rate":62,"display_name":"Matrix12"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697616149,"creation_date":1697616149,"question_id":77314471,"body_markdown":"I have found an issue when indirect access is slower than direct access. It seems like inlining doesn&#39;t work in that case. In stack profiler I see different results. \r\n\r\n\r\n```\r\n\r\n@Fork(value = 1)\r\n@BenchmarkMode(Mode.Throughput)\r\n@OutputTimeUnit(TimeUnit.SECONDS)\r\npublic class DifferentAccessBenchmark {\r\n\r\n    @State(Scope.Benchmark)\r\n    public static class BenchState {\r\n\r\n        public static final VarHandle DIRECT_VAR_HANDLE;\r\n        public static final IntVarHandle INDIRECT_VAR_HANDLE;\r\n        public static final FunctionMapping FUNCTION_MAPPING;\r\n\r\n        static {\r\n            try {\r\n                DIRECT_VAR_HANDLE = MethodHandles.privateLookupIn(Employee.class, MethodHandles.lookup())\r\n                    .findVarHandle(Employee.class, &quot;department&quot;, int.class);\r\n                INDIRECT_VAR_HANDLE = new IntVarHandle(DIRECT_VAR_HANDLE);\r\n                FUNCTION_MAPPING = new FunctionMapping(employee -&gt; employee.department);\r\n            } catch (Throwable e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n\r\n        Employee[] data;\r\n\r\n        @Setup\r\n        public void setup() {\r\n            data = IntStream.range(1,10240)\r\n                .mapToObj(Employee::new)\r\n                .toArray(Employee[]::new);\r\n        }\r\n    }\r\n\r\n\r\n    @Benchmark\r\n    public long benchmark_direct_var_handle(BenchState state) {\r\n        long acc = 0;\r\n\r\n        for (int i = 0; i &lt; state.data.length; i++) {\r\n            acc +=  BenchState.DIRECT_VAR_HANDLE.get(state.data[i]);\r\n        }\r\n\r\n        return acc;\r\n    }\r\n\r\n    @Benchmark\r\n    public long benchmark_indirect_var_handle(BenchState state) {\r\n        long acc = 0;\r\n\r\n        for (int i = 0; i &lt; state.data.length; i++) {\r\n            acc +=  (int) BenchState.INDIRECT_VAR_HANDLE.getInt(state.data[i]);\r\n        }\r\n\r\n        return acc;\r\n    }\r\n\r\n    @Benchmark\r\n    public long benchmark_to_int_function(BenchState state) {\r\n        long acc = 0;\r\n\r\n        for (int i = 0; i &lt; state.data.length; i++) {\r\n            acc += BenchState.FUNCTION_MAPPING.getInt(state.data[i]);\r\n        }\r\n\r\n        return acc;\r\n    }\r\n\r\n    public final static class Employee {\r\n        public Employee(final int department) {\r\n            this.department = department;\r\n        }\r\n\r\n        public int department;\r\n    }\r\n\r\n\r\n    public static class IntVarHandle {\r\n\r\n        private final VarHandle varHandle;\r\n\r\n        public IntVarHandle(VarHandle varHandle) {\r\n            this.varHandle = varHandle;\r\n        }\r\n\r\n        public int getInt(Employee o) {\r\n            return (int) varHandle.get(o);\r\n        }\r\n    }\r\n\r\n    public static class FunctionMapping {\r\n\r\n        private final ToIntFunction&lt;Employee&gt; intHandle;\r\n\r\n        public FunctionMapping(ToIntFunction&lt;Employee&gt; intHandle) {\r\n            this.intHandle = intHandle;\r\n        }\r\n\r\n        public int getInt(Employee o) {\r\n            return intHandle.applyAsInt(o);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nThe result is on Apple M1.  \r\n\r\n\r\n```Benchmark                                                Mode  Cnt       Score      Error  Units\r\nDifferentAccessBenchmark.benchmark_direct_var_handle    thrpt    5  164317.970 &#177;  347.999  ops/s\r\nDifferentAccessBenchmark.benchmark_indirect_var_handle  thrpt    5    7350.975 &#177;  320.375  ops/s\r\nDifferentAccessBenchmark.benchmark_to_int_function      thrpt    5  165102.382 &#177; 6989.192  ops/s\r\n```\r\n\r\nStack profiler: \r\n\r\n```\r\n Direct: \r\n 33.3%  50.0% &lt;stack is empty, everything is filtered?&gt;\r\n 33.3%  49.9% DifferentAccessBenchmark.benchmark_direct_var_handle\r\n  0.0%   0.1% jmh_generated.DifferentAccessBenchmark_benchmark_direct_var_handle_jmhTest.benchmark_direct_var_handle_thrpt_jmhStub\r\n  0.0%   0.0% java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.isReleasable\r\n  0.0%   0.0% java.lang.reflect.AccessibleObject.verifyAccess\r\n  0.0%   0.0% org.openjdk.jmh.runner.InfraControlL2.announceWarmupReady\r\n  \r\n  Indirect: \r\n  \r\n   33.3%  50.0% &lt;stack is empty, everything is filtered?&gt;\r\n   32.8%  49.2% java.lang.invoke.VarHandleGuards.guard_L_I\r\n    0.5%   0.8% DifferentAccessBenchmark.benchmark_indirect_var_handle\r\n    0.0%   0.0% java.lang.invoke.VarHandleGuards.guard_LLL_Z\r\n    0.0%   0.0% org.openjdk.jmh.results.RawResults.&lt;init&gt;\r\n    0.0%   0.0% java.lang.invoke.MethodHandle.maybeCustomize\r\n    0.0%   0.0% java.lang.Object.hashCode\r\n```\r\n\r\nThe indirect version is very slow... Can you help me investigate why? In perfasm seems like inlining doesn&#39;t work properly. ","title":"Varhandle indirect access slower than direct access","body":"<p>I have found an issue when indirect access is slower than direct access. It seems like inlining doesn't work in that case. In stack profiler I see different results.</p>\n<pre><code>\n@Fork(value = 1)\n@BenchmarkMode(Mode.Throughput)\n@OutputTimeUnit(TimeUnit.SECONDS)\npublic class DifferentAccessBenchmark {\n\n    @State(Scope.Benchmark)\n    public static class BenchState {\n\n        public static final VarHandle DIRECT_VAR_HANDLE;\n        public static final IntVarHandle INDIRECT_VAR_HANDLE;\n        public static final FunctionMapping FUNCTION_MAPPING;\n\n        static {\n            try {\n                DIRECT_VAR_HANDLE = MethodHandles.privateLookupIn(Employee.class, MethodHandles.lookup())\n                    .findVarHandle(Employee.class, &quot;department&quot;, int.class);\n                INDIRECT_VAR_HANDLE = new IntVarHandle(DIRECT_VAR_HANDLE);\n                FUNCTION_MAPPING = new FunctionMapping(employee -&gt; employee.department);\n            } catch (Throwable e) {\n                throw new RuntimeException(e);\n            }\n        }\n\n        Employee[] data;\n\n        @Setup\n        public void setup() {\n            data = IntStream.range(1,10240)\n                .mapToObj(Employee::new)\n                .toArray(Employee[]::new);\n        }\n    }\n\n\n    @Benchmark\n    public long benchmark_direct_var_handle(BenchState state) {\n        long acc = 0;\n\n        for (int i = 0; i &lt; state.data.length; i++) {\n            acc +=  BenchState.DIRECT_VAR_HANDLE.get(state.data[i]);\n        }\n\n        return acc;\n    }\n\n    @Benchmark\n    public long benchmark_indirect_var_handle(BenchState state) {\n        long acc = 0;\n\n        for (int i = 0; i &lt; state.data.length; i++) {\n            acc +=  (int) BenchState.INDIRECT_VAR_HANDLE.getInt(state.data[i]);\n        }\n\n        return acc;\n    }\n\n    @Benchmark\n    public long benchmark_to_int_function(BenchState state) {\n        long acc = 0;\n\n        for (int i = 0; i &lt; state.data.length; i++) {\n            acc += BenchState.FUNCTION_MAPPING.getInt(state.data[i]);\n        }\n\n        return acc;\n    }\n\n    public final static class Employee {\n        public Employee(final int department) {\n            this.department = department;\n        }\n\n        public int department;\n    }\n\n\n    public static class IntVarHandle {\n\n        private final VarHandle varHandle;\n\n        public IntVarHandle(VarHandle varHandle) {\n            this.varHandle = varHandle;\n        }\n\n        public int getInt(Employee o) {\n            return (int) varHandle.get(o);\n        }\n    }\n\n    public static class FunctionMapping {\n\n        private final ToIntFunction&lt;Employee&gt; intHandle;\n\n        public FunctionMapping(ToIntFunction&lt;Employee&gt; intHandle) {\n            this.intHandle = intHandle;\n        }\n\n        public int getInt(Employee o) {\n            return intHandle.applyAsInt(o);\n        }\n    }\n}\n\n</code></pre>\n<p>The result is on Apple M1.</p>\n<pre><code>DifferentAccessBenchmark.benchmark_direct_var_handle    thrpt    5  164317.970 ±  347.999  ops/s\nDifferentAccessBenchmark.benchmark_indirect_var_handle  thrpt    5    7350.975 ±  320.375  ops/s\nDifferentAccessBenchmark.benchmark_to_int_function      thrpt    5  165102.382 ± 6989.192  ops/s\n</code></pre>\n<p>Stack profiler:</p>\n<pre><code> Direct: \n 33.3%  50.0% &lt;stack is empty, everything is filtered?&gt;\n 33.3%  49.9% DifferentAccessBenchmark.benchmark_direct_var_handle\n  0.0%   0.1% jmh_generated.DifferentAccessBenchmark_benchmark_direct_var_handle_jmhTest.benchmark_direct_var_handle_thrpt_jmhStub\n  0.0%   0.0% java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.isReleasable\n  0.0%   0.0% java.lang.reflect.AccessibleObject.verifyAccess\n  0.0%   0.0% org.openjdk.jmh.runner.InfraControlL2.announceWarmupReady\n  \n  Indirect: \n  \n   33.3%  50.0% &lt;stack is empty, everything is filtered?&gt;\n   32.8%  49.2% java.lang.invoke.VarHandleGuards.guard_L_I\n    0.5%   0.8% DifferentAccessBenchmark.benchmark_indirect_var_handle\n    0.0%   0.0% java.lang.invoke.VarHandleGuards.guard_LLL_Z\n    0.0%   0.0% org.openjdk.jmh.results.RawResults.&lt;init&gt;\n    0.0%   0.0% java.lang.invoke.MethodHandle.maybeCustomize\n    0.0%   0.0% java.lang.Object.hashCode\n</code></pre>\n<p>The indirect version is very slow... Can you help me investigate why? In perfasm seems like inlining doesn't work properly.</p>\n"},{"tags":["java","excel","spring-boot","apache-poi","xlsx"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1697460435,"post_id":77301530,"comment_id":136278808,"body_markdown":"Posts on stackoverflow get nothing from me.","body":"Posts on stackoverflow get nothing from me."}],"answers":[{"comments":[{"owner":{"account_id":16259058,"reputation":23,"user_id":11740962,"display_name":"Shaurya"},"score":0,"creation_date":1697551635,"post_id":77309056,"comment_id":136292316,"body_markdown":"Thankyou for the answer @Alex.\nThe change that you suggested, will this be added in future releases of poi ?","body":"Thankyou for the answer @Alex. The change that you suggested, will this be added in future releases of poi ?"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1697555541,"post_id":77309056,"comment_id":136293225,"body_markdown":"@Shaurya: Forgot one code. `class ExcelEvaluateROWFormulaAsArray`. Now it is provided too. And I don&#39;t know what will be added in future releases of poi.","body":"@Shaurya: Forgot one code. <code>class ExcelEvaluateROWFormulaAsArray</code>. Now it is provided too. And I don&#39;t know what will be added in future releases of poi."},{"owner":{"account_id":16259058,"reputation":23,"user_id":11740962,"display_name":"Shaurya"},"score":0,"creation_date":1697564357,"post_id":77309056,"comment_id":136294794,"body_markdown":"I tried the above approach and it does work for the formulas in the original question.\nBut this still fails for more complex formulas where range is used.\nThe formula is  :  \n\n\n=IFERROR(SMALL(IF((COUNTIF($B$69:B69, $D$6:$D$62)=0)*ISNUMBER($D$6:$D$62), $D$6:$D$62, &quot;A&quot;), 1), INDEX($D$6:$D$62, MATCH(SMALL(IF(ISTEXT($D$6:$D$62)*(COUNTIF(B69:$B$69, $D$6:$D$62)=0), COUNTIF($D$6:$D$62, &quot;&lt;&quot;&amp;$D$6:$D$62), &quot;&quot;), 1), IF(ISTEXT($D$6:$D$62), COUNTIF($D$6:$D$62, &quot;&lt;&quot;&amp;$D$6:$D$62), &quot;&quot;), 0)))","body":"I tried the above approach and it does work for the formulas in the original question. But this still fails for more complex formulas where range is used. The formula is  :     =IFERROR(SMALL(IF((COUNTIF($B$69:B69, $D$6:$D$62)=0)*ISNUMBER($D$6:$D$62), $D$6:$D$62, &quot;A&quot;), 1), INDEX($D$6:$D$62, MATCH(SMALL(IF(ISTEXT($D$6:$D$62)*(COUNTIF(B69:$B$69, $D$6:$D$62)=0), COUNTIF($D$6:$D$62, &quot;&lt;&quot;&amp;$D$6:$D$62), &quot;&quot;), 1), IF(ISTEXT($D$6:$D$62), COUNTIF($D$6:$D$62, &quot;&lt;&quot;&amp;$D$6:$D$62), &quot;&quot;), 0)))"},{"owner":{"account_id":16259058,"reputation":23,"user_id":11740962,"display_name":"Shaurya"},"score":0,"creation_date":1697567348,"post_id":77309056,"comment_id":136295254,"body_markdown":"So for functions like INDEX, ISTEXT etc also we will have to write these custom fixes.\nHow can we check which function supports array usage and which does not ?","body":"So for functions like INDEX, ISTEXT etc also we will have to write these custom fixes. How can we check which function supports array usage and which does not ?"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1697616146,"post_id":77309056,"comment_id":136300738,"body_markdown":"@Shaurya:  INDEX and ISTEXT is not the problem but the very special undocumented usage of `COUNTIF` is. See my supplement to the answer.","body":"@Shaurya:  INDEX and ISTEXT is not the problem but the very special undocumented usage of <code>COUNTIF</code> is. See my supplement to the answer."},{"owner":{"account_id":16259058,"reputation":23,"user_id":11740962,"display_name":"Shaurya"},"score":0,"creation_date":1697634222,"post_id":77309056,"comment_id":136304368,"body_markdown":"Thanks for the inputs. This was really helpful.","body":"Thanks for the inputs. This was really helpful."},{"owner":{"account_id":16259058,"reputation":23,"user_id":11740962,"display_name":"Shaurya"},"score":0,"creation_date":1697637410,"post_id":77309056,"comment_id":136305104,"body_markdown":"As an alternate to poi, we&#39;re now using aspose.cell library. It&#39;s actually providing the correct results.\n@Axel, \nDo you know if there is any drawback using aspose compared to poi ? It is giving correct output as excel does.","body":"As an alternate to poi, we&#39;re now using aspose.cell library. It&#39;s actually providing the correct results. @Axel,  Do you know if there is any drawback using aspose compared to poi ? It is giving correct output as excel does."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1697641570,"post_id":77309056,"comment_id":136306116,"body_markdown":"@Shaurya:  Any drawback except that Aspose is not free software as Apache POI is? No, not that I know of.","body":"@Shaurya:  Any drawback except that Aspose is not free software as Apache POI is? No, not that I know of."},{"owner":{"account_id":16259058,"reputation":23,"user_id":11740962,"display_name":"Shaurya"},"score":0,"creation_date":1697643322,"post_id":77309056,"comment_id":136306529,"body_markdown":"Yes it&#39;s not free.. We procured the license for aspose nuget .net , since we require these excel evaluations for a production grade application.\nHopefully poi will have these fixes in future releases.\nThanks !","body":"Yes it&#39;s not free.. We procured the license for aspose nuget .net , since we require these excel evaluations for a production grade application. Hopefully poi will have these fixes in future releases. Thanks !"}],"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"comment_count":9,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697616051,"creation_date":1697546194,"answer_id":77309056,"question_id":77301530,"body_markdown":"The main problem here is that Apache POI not provides all functions for usage as `ArrayFunction`. In that special case, the [Excel function ROW](https://support.microsoft.com/en-us/office/row-function-3a63b74a-c4d0-4093-b49a-e76eb49a6d8d) is represented by the `Java` function [org.apache.poi.ss.formula.functions.RowFunc](https://svn.apache.org/viewvc/poi/tags/REL_5_2_4/poi/src/main/java/org/apache/poi/ss/formula/functions/RowFunc.java?view=markup) which is not ready to run in array context.\r\n\r\nThat could be changed by changing the code of that `Java` function. That code needs to consider &quot;If reference is a range of cells, and if ROW is entered as a vertical array, ROW returns the row numbers of reference as a vertical array.&quot;. My function `RowFuncArrayReady` does that.\r\n\r\n    import org.apache.poi.ss.formula.functions.*;\r\n    \r\n    import org.apache.poi.ss.formula.eval.AreaEval;\r\n    import org.apache.poi.ss.formula.eval.ErrorEval;\r\n    import org.apache.poi.ss.formula.eval.NumberEval;\r\n    import org.apache.poi.ss.formula.eval.RefEval;\r\n    import org.apache.poi.ss.formula.eval.ValueEval;\r\n    import org.apache.poi.ss.formula.CacheAreaEval;\r\n    \r\n    /**\r\n     * Implementation for the Excel function ROW ready for usage as ArrayFunction\r\n     */\r\n    public final class RowFuncArrayReady implements Function, ArrayFunction {\r\n    \t@Override\r\n        public ValueEval evaluate(ValueEval[] args, int srcRowIndex, int srcColumnIndex) {\r\n            if (args.length &gt; 1) {\r\n                return ErrorEval.VALUE_INVALID;\r\n            }\r\n            if (args.length == 0) {\r\n                return new NumberEval(srcRowIndex + 1.);\r\n            } else {\r\n    \t\t    return evaluate(srcRowIndex, srcColumnIndex, args[0]);\r\n            }\r\n    \t}\r\n    \t\t\r\n        public ValueEval evaluate(int srcRowIndex, int srcColumnIndex, ValueEval arg0) {\r\n            int rnum;\r\n            if (arg0 instanceof AreaEval) {\r\n                rnum = ((AreaEval)arg0).getFirstRow();\r\n            } else if (arg0 instanceof RefEval) {\r\n                rnum = ((RefEval)arg0).getRow();\r\n            } else {\r\n                // anything else is not valid argument\r\n                return ErrorEval.VALUE_INVALID;\r\n            }\r\n            return new NumberEval(rnum + 1.);\r\n        }\r\n    \t\r\n        @Override\r\n        public ValueEval evaluateArray(ValueEval[] args, int srcRowIndex, int srcColumnIndex) {\r\n            if (args.length &gt; 1) {\r\n                return ErrorEval.VALUE_INVALID;\r\n            }\r\n            if (args.length == 0) {\r\n                return new NumberEval(srcRowIndex + 1.);\r\n            } else if (args[0] instanceof AreaEval) {\r\n                return evaluateAreaEval((AreaEval)args[0], srcRowIndex, srcColumnIndex);\r\n            } else if (args[0] instanceof RefEval) {\r\n                return evaluate(srcRowIndex, srcColumnIndex, (RefEval)args[0]);\r\n            } else {\r\n                // anything else is not valid argument\r\n                return ErrorEval.VALUE_INVALID;\r\n            }\r\n        }\t\r\n    \t\r\n        private ValueEval evaluateAreaEval(AreaEval ae, int srcRowIndex, int srcColumnIndex) {\r\n            int w1, w2, h1, h2;\r\n            int a1FirstCol = 0, a1FirstRow = 0;\r\n            w1 = ae.getWidth();\r\n            h1 = ae.getHeight();\r\n            a1FirstCol = ae.getFirstColumn();\r\n            a1FirstRow = ae.getFirstRow();\r\n            w2 = 1;\r\n            h2 = 1;\r\n            int width = Math.max(w1, w2);\r\n            int height = Math.max(h1, h2);\r\n            ValueEval[] vals = new ValueEval[height * width];\r\n            int idx = 0;\r\n            for(int i = 0; i &lt; height; i++){\r\n                for(int j = 0; j &lt; width; j++){\r\n                    vals[idx++] = evaluate(srcRowIndex, srcColumnIndex, ae.offset(i, i, j, j));\r\n                }\r\n            }\r\n            if (vals.length == 1) {\r\n                return vals[0];\r\n            }\r\n            return new CacheAreaEval(srcRowIndex, srcColumnIndex, srcRowIndex + height - 1, srcColumnIndex + width - 1, vals);\r\n        }\r\n    \t\t\r\n    }\r\n\r\nTo make that new function the default representation of Excel&#39;s ROW function, it needs to be in `Function[] functions` array of [org.apache.poi.ss.formula.eval.FunctionEval](https://svn.apache.org/viewvc/poi/tags/REL_5_2_4/poi/src/main/java/org/apache/poi/ss/formula/eval/FunctionEval.java?view=markup) at index 8. In following code the method `prepareFunctionEval` will do that when called as `prepareFunctionEval(8, new RowFuncArrayReady());`.\r\n\r\n    import org.apache.poi.ss.usermodel.*;\r\n    \r\n    import java.io.FileInputStream;\r\n    \r\n    class ExcelEvaluateROWFormulaAsArray  {\r\n         \r\n     static void prepareFunctionEval(int pos, org.apache.poi.ss.formula.functions.Function function) throws Exception {\r\n      java.lang.reflect.Field _functions = Class.forName(&quot;org.apache.poi.ss.formula.eval.FunctionEval&quot;).getDeclaredField(&quot;functions&quot;);\r\n      _functions.setAccessible(true); \r\n      org.apache.poi.ss.formula.functions.Function[] functions = (org.apache.poi.ss.formula.functions.Function[])_functions.get(null); \r\n      functions[pos] = function;\r\n     }\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n         \r\n      prepareFunctionEval(8, new RowFuncArrayReady());\r\n       \r\n      Workbook workbook = WorkbookFactory.create(new FileInputStream(&quot;./ExcelUsingRowFormulaInArrayContext.xlsx&quot;));\r\n      FormulaEvaluator evaluator = workbook.getCreationHelper().createFormulaEvaluator(); \r\n      \r\n      evaluator.setDebugEvaluationOutputForNextEval(true);  \r\n     \r\n      Sheet sheet = workbook.getSheetAt(0);\r\n      \r\n      for (Row row : sheet) {\r\n       for (Cell cell : row) {\r\n        if (CellType.FORMULA == cell.getCellType()) {\r\n         System.out.println(cell.getCellFormula());\r\n         CellValue cellValue = evaluator.evaluate(cell);\r\n         System.out.println(cellValue);\r\n        }\r\n       }\r\n      }\r\n      \r\n      workbook.close();\r\n     }\r\n    }\r\n\r\nMy `ExcelUsingRowFormulaInArrayContext.xlsx` looks like so:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nNote, the formulas `{=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J6)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J6))))}` are array formulas entered using &lt;kbd&gt;Ctrl&lt;/kbd&gt;&lt;kbd&gt;Shift&lt;/kbd&gt;&lt;kbd&gt;Enter&lt;/kbd&gt;. Apache POI is not able evaluating the new dynamic array formulas and spilled array behavior of Excel 365.\r\n\r\nMy `ExcelEvaluateROWFormulaAsArray` then prints:\r\n\r\n    IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J6)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J6))))\r\n    org.apache.poi.ss.usermodel.CellValue [&quot;Text 1&quot;]\r\n    IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K6)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K6))))\r\n    org.apache.poi.ss.usermodel.CellValue [1.0]\r\n    IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J7)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J7))))\r\n    org.apache.poi.ss.usermodel.CellValue [&quot;Text 2&quot;]\r\n    IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K7)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K7))))\r\n    org.apache.poi.ss.usermodel.CellValue [2.0]\r\n    IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J8)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J8))))\r\n    org.apache.poi.ss.usermodel.CellValue [&quot;Text 3&quot;]\r\n    IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K8)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K8))))\r\n    org.apache.poi.ss.usermodel.CellValue [3.0]\r\n    IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J9)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J9))))\r\n    org.apache.poi.ss.usermodel.CellValue [&quot;Text 4&quot;]\r\n    IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K9)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K9))))\r\n    org.apache.poi.ss.usermodel.CellValue [4.0]\r\n    IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J10)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J10))))\r\n    org.apache.poi.ss.usermodel.CellValue [&quot;Text 5&quot;]\r\n    IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K10)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K10))))\r\n    org.apache.poi.ss.usermodel.CellValue [5.0]\r\n    IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J11)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J11))))\r\n    org.apache.poi.ss.usermodel.CellValue [&quot;&quot;]\r\n    IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K11)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K11))))\r\n    org.apache.poi.ss.usermodel.CellValue [&quot;&quot;]\r\n    IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J12)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J12))))\r\n    org.apache.poi.ss.usermodel.CellValue [&quot;&quot;]\r\n    IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K12)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K12))))\r\n    org.apache.poi.ss.usermodel.CellValue [&quot;&quot;]\r\n\r\nThat is the same as Excel evaluates.\r\n\r\nTo check what Apache POI Java function representations of Excel functions are ready to work in array context, there is no other way than to have a look into the source code. All such code is in https://svn.apache.org/viewvc/poi/tags/REL_5_2_4/poi/src/main/java/org/apache/poi/ss/formula/ and sub directories. Named functions are in /functions or /atp sub-directory. \r\n\r\nBut also operands sometimes needs to be `ArrayFunction`s. Most operands are in /eval sub-directory. For example `UnaryPlusEval` is array context ready. So `+A1:A10` will work in array context. But `ConcatEval` is not. So `A1:A10&amp;B1:B10` will not work  in array context. \r\n\r\nBut there are also functions where the function in array context simply is not documented somewhere. For example for [COUNTIF function](https://support.microsoft.com/en-us/office/countif-function-e0de10c6-f885-4e71-abb4-1f464816df34) it is simply unclear what shall happen if used like `COUNTIF($B$69:B69, $D$6:$D$62)` in array context. How shall the array in `What do you want to look for?` be handled? Microsoft do not tell something about that. So all one can do is to check what Excel does in such a case and then trying to program Excel&#39;s behavior using Java. That&#39;s very challenging and error prone. So I doubt someone will do this. I suspect not even Microsoft knows exactly what funny formula solutions Excel users have found, especially using the array context. So if someone needs those funny formula solutions, then this one should use the real Excel application.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nmKBe.png","title":"Apache poi formula evaluation for range based","body":"<p>The main problem here is that Apache POI not provides all functions for usage as <code>ArrayFunction</code>. In that special case, the <a href=\"https://support.microsoft.com/en-us/office/row-function-3a63b74a-c4d0-4093-b49a-e76eb49a6d8d\" rel=\"nofollow noreferrer\">Excel function ROW</a> is represented by the <code>Java</code> function <a href=\"https://svn.apache.org/viewvc/poi/tags/REL_5_2_4/poi/src/main/java/org/apache/poi/ss/formula/functions/RowFunc.java?view=markup\" rel=\"nofollow noreferrer\">org.apache.poi.ss.formula.functions.RowFunc</a> which is not ready to run in array context.</p>\n<p>That could be changed by changing the code of that <code>Java</code> function. That code needs to consider &quot;If reference is a range of cells, and if ROW is entered as a vertical array, ROW returns the row numbers of reference as a vertical array.&quot;. My function <code>RowFuncArrayReady</code> does that.</p>\n<pre><code>import org.apache.poi.ss.formula.functions.*;\n\nimport org.apache.poi.ss.formula.eval.AreaEval;\nimport org.apache.poi.ss.formula.eval.ErrorEval;\nimport org.apache.poi.ss.formula.eval.NumberEval;\nimport org.apache.poi.ss.formula.eval.RefEval;\nimport org.apache.poi.ss.formula.eval.ValueEval;\nimport org.apache.poi.ss.formula.CacheAreaEval;\n\n/**\n * Implementation for the Excel function ROW ready for usage as ArrayFunction\n */\npublic final class RowFuncArrayReady implements Function, ArrayFunction {\n    @Override\n    public ValueEval evaluate(ValueEval[] args, int srcRowIndex, int srcColumnIndex) {\n        if (args.length &gt; 1) {\n            return ErrorEval.VALUE_INVALID;\n        }\n        if (args.length == 0) {\n            return new NumberEval(srcRowIndex + 1.);\n        } else {\n            return evaluate(srcRowIndex, srcColumnIndex, args[0]);\n        }\n    }\n        \n    public ValueEval evaluate(int srcRowIndex, int srcColumnIndex, ValueEval arg0) {\n        int rnum;\n        if (arg0 instanceof AreaEval) {\n            rnum = ((AreaEval)arg0).getFirstRow();\n        } else if (arg0 instanceof RefEval) {\n            rnum = ((RefEval)arg0).getRow();\n        } else {\n            // anything else is not valid argument\n            return ErrorEval.VALUE_INVALID;\n        }\n        return new NumberEval(rnum + 1.);\n    }\n    \n    @Override\n    public ValueEval evaluateArray(ValueEval[] args, int srcRowIndex, int srcColumnIndex) {\n        if (args.length &gt; 1) {\n            return ErrorEval.VALUE_INVALID;\n        }\n        if (args.length == 0) {\n            return new NumberEval(srcRowIndex + 1.);\n        } else if (args[0] instanceof AreaEval) {\n            return evaluateAreaEval((AreaEval)args[0], srcRowIndex, srcColumnIndex);\n        } else if (args[0] instanceof RefEval) {\n            return evaluate(srcRowIndex, srcColumnIndex, (RefEval)args[0]);\n        } else {\n            // anything else is not valid argument\n            return ErrorEval.VALUE_INVALID;\n        }\n    }   \n    \n    private ValueEval evaluateAreaEval(AreaEval ae, int srcRowIndex, int srcColumnIndex) {\n        int w1, w2, h1, h2;\n        int a1FirstCol = 0, a1FirstRow = 0;\n        w1 = ae.getWidth();\n        h1 = ae.getHeight();\n        a1FirstCol = ae.getFirstColumn();\n        a1FirstRow = ae.getFirstRow();\n        w2 = 1;\n        h2 = 1;\n        int width = Math.max(w1, w2);\n        int height = Math.max(h1, h2);\n        ValueEval[] vals = new ValueEval[height * width];\n        int idx = 0;\n        for(int i = 0; i &lt; height; i++){\n            for(int j = 0; j &lt; width; j++){\n                vals[idx++] = evaluate(srcRowIndex, srcColumnIndex, ae.offset(i, i, j, j));\n            }\n        }\n        if (vals.length == 1) {\n            return vals[0];\n        }\n        return new CacheAreaEval(srcRowIndex, srcColumnIndex, srcRowIndex + height - 1, srcColumnIndex + width - 1, vals);\n    }\n        \n}\n</code></pre>\n<p>To make that new function the default representation of Excel's ROW function, it needs to be in <code>Function[] functions</code> array of <a href=\"https://svn.apache.org/viewvc/poi/tags/REL_5_2_4/poi/src/main/java/org/apache/poi/ss/formula/eval/FunctionEval.java?view=markup\" rel=\"nofollow noreferrer\">org.apache.poi.ss.formula.eval.FunctionEval</a> at index 8. In following code the method <code>prepareFunctionEval</code> will do that when called as <code>prepareFunctionEval(8, new RowFuncArrayReady());</code>.</p>\n<pre><code>import org.apache.poi.ss.usermodel.*;\n\nimport java.io.FileInputStream;\n\nclass ExcelEvaluateROWFormulaAsArray  {\n     \n static void prepareFunctionEval(int pos, org.apache.poi.ss.formula.functions.Function function) throws Exception {\n  java.lang.reflect.Field _functions = Class.forName(&quot;org.apache.poi.ss.formula.eval.FunctionEval&quot;).getDeclaredField(&quot;functions&quot;);\n  _functions.setAccessible(true); \n  org.apache.poi.ss.formula.functions.Function[] functions = (org.apache.poi.ss.formula.functions.Function[])_functions.get(null); \n  functions[pos] = function;\n }\n\n public static void main(String[] args) throws Exception {\n     \n  prepareFunctionEval(8, new RowFuncArrayReady());\n   \n  Workbook workbook = WorkbookFactory.create(new FileInputStream(&quot;./ExcelUsingRowFormulaInArrayContext.xlsx&quot;));\n  FormulaEvaluator evaluator = workbook.getCreationHelper().createFormulaEvaluator(); \n  \n  evaluator.setDebugEvaluationOutputForNextEval(true);  \n \n  Sheet sheet = workbook.getSheetAt(0);\n  \n  for (Row row : sheet) {\n   for (Cell cell : row) {\n    if (CellType.FORMULA == cell.getCellType()) {\n     System.out.println(cell.getCellFormula());\n     CellValue cellValue = evaluator.evaluate(cell);\n     System.out.println(cellValue);\n    }\n   }\n  }\n  \n  workbook.close();\n }\n}\n</code></pre>\n<p>My <code>ExcelUsingRowFormulaInArrayContext.xlsx</code> looks like so:</p>\n<p><a href=\"https://i.stack.imgur.com/nmKBe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nmKBe.png\" alt=\"enter image description here\" /></a></p>\n<p>Note, the formulas <code>{=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J6)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J6))))}</code> are array formulas entered using <kbd>Ctrl</kbd><kbd>Shift</kbd><kbd>Enter</kbd>. Apache POI is not able evaluating the new dynamic array formulas and spilled array behavior of Excel 365.</p>\n<p>My <code>ExcelEvaluateROWFormulaAsArray</code> then prints:</p>\n<pre><code>IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J6)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J6))))\norg.apache.poi.ss.usermodel.CellValue [&quot;Text 1&quot;]\nIF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K6)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K6))))\norg.apache.poi.ss.usermodel.CellValue [1.0]\nIF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J7)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J7))))\norg.apache.poi.ss.usermodel.CellValue [&quot;Text 2&quot;]\nIF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K7)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K7))))\norg.apache.poi.ss.usermodel.CellValue [2.0]\nIF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J8)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J8))))\norg.apache.poi.ss.usermodel.CellValue [&quot;Text 3&quot;]\nIF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K8)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K8))))\norg.apache.poi.ss.usermodel.CellValue [3.0]\nIF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J9)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J9))))\norg.apache.poi.ss.usermodel.CellValue [&quot;Text 4&quot;]\nIF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K9)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K9))))\norg.apache.poi.ss.usermodel.CellValue [4.0]\nIF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J10)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J10))))\norg.apache.poi.ss.usermodel.CellValue [&quot;Text 5&quot;]\nIF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K10)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K10))))\norg.apache.poi.ss.usermodel.CellValue [5.0]\nIF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J11)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J11))))\norg.apache.poi.ss.usermodel.CellValue [&quot;&quot;]\nIF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K11)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K11))))\norg.apache.poi.ss.usermodel.CellValue [&quot;&quot;]\nIF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J12)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J12))))\norg.apache.poi.ss.usermodel.CellValue [&quot;&quot;]\nIF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K12)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K12))))\norg.apache.poi.ss.usermodel.CellValue [&quot;&quot;]\n</code></pre>\n<p>That is the same as Excel evaluates.</p>\n<p>To check what Apache POI Java function representations of Excel functions are ready to work in array context, there is no other way than to have a look into the source code. All such code is in <a href=\"https://svn.apache.org/viewvc/poi/tags/REL_5_2_4/poi/src/main/java/org/apache/poi/ss/formula/\" rel=\"nofollow noreferrer\">https://svn.apache.org/viewvc/poi/tags/REL_5_2_4/poi/src/main/java/org/apache/poi/ss/formula/</a> and sub directories. Named functions are in /functions or /atp sub-directory.</p>\n<p>But also operands sometimes needs to be <code>ArrayFunction</code>s. Most operands are in /eval sub-directory. For example <code>UnaryPlusEval</code> is array context ready. So <code>+A1:A10</code> will work in array context. But <code>ConcatEval</code> is not. So <code>A1:A10&amp;B1:B10</code> will not work  in array context.</p>\n<p>But there are also functions where the function in array context simply is not documented somewhere. For example for <a href=\"https://support.microsoft.com/en-us/office/countif-function-e0de10c6-f885-4e71-abb4-1f464816df34\" rel=\"nofollow noreferrer\">COUNTIF function</a> it is simply unclear what shall happen if used like <code>COUNTIF($B$69:B69, $D$6:$D$62)</code> in array context. How shall the array in <code>What do you want to look for?</code> be handled? Microsoft do not tell something about that. So all one can do is to check what Excel does in such a case and then trying to program Excel's behavior using Java. That's very challenging and error prone. So I doubt someone will do this. I suspect not even Microsoft knows exactly what funny formula solutions Excel users have found, especially using the array context. So if someone needs those funny formula solutions, then this one should use the real Excel application.</p>\n"}],"owner":{"account_id":16259058,"reputation":23,"user_id":11740962,"display_name":"Shaurya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77309056,"answer_count":1,"score":2,"last_activity_date":1697616051,"creation_date":1697455121,"question_id":77301530,"body_markdown":"We&#39;re trying to evaluate xlsx formulas using poi in java maven project, but the output values are repetitive in case of a formula having a range or array.\r\n\r\nBelow is expected vs poi output :\r\n\r\n**Expected output**\r\n\r\n[![Expected output][1]][1]\r\n\r\n[1]:https://i.stack.imgur.com/ECTS4.png\r\n\r\n**poi output**\r\n\r\n[![poi output][2]][2]\r\n\r\n[2]:https://i.stack.imgur.com/HmEBp.png\r\n\r\nColumn J and K doesn&#39;t have any formula cells.\r\nColumn L and M have formula cells dependent on J and K data.\r\n\r\nHere&#39;s formula defined in 7 rows of column J and K :\r\n```\r\nColumn J :\r\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J6)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J6))))\r\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J7)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J7))))\r\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J8)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J8))))\r\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J9)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J9))))\r\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J10)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J10))))\r\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J11)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J11))))\r\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J12)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J12))))\r\n\r\nColumn K :\r\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K6)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K6))))\r\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K7)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K7))))\r\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K8)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K8))))\r\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K9)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K9))))\r\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K10)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K10))))\r\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K11)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K11))))\r\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K12)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K12))))\r\n```\r\n\r\nIf we compare the images above (Expected vs poi output), then we see that poi gives incorrect results and repeat the items in J and K, whereas MS excel is able to calculate correctly.\r\n\r\n\r\nTried formula evaluator `evaluateAll` and `evaluateFormulaCell`. Doesn&#39;t yield correct results.\t\t\t\r\nTried with `evaluator.clearAllCachedResultValues();` and \t`evaluator.notifySetFormula(cell);`\r\nThis looks like that poi is not supporting these formulas.\r\nXSSFWorkBook is used.\r\n\r\n    \r\n```java\r\n    FileInputStream fis = new FileInputStream(inputFile);\r\n    Workbook workbook = new XSSFWorkbook(fis);\r\n    FormulaEvaluator evaluator = workbook.getCreationHelper().createFormulaEvaluator();\r\n    // some code in between, loops etc\r\n    if (cell.getCellType() == CellType.FORMULA) {\r\n        evaluator.evaluateFormulaCell(cell);\t\r\n    }\r\n```\r\n```\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n        &lt;artifactId&gt;poi&lt;/artifactId&gt;\t\t    \r\n        &lt;version&gt;5.2.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\t\t\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n        &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n        &lt;version&gt;5.2.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n```","title":"Apache poi formula evaluation for range based","body":"<p>We're trying to evaluate xlsx formulas using poi in java maven project, but the output values are repetitive in case of a formula having a range or array.</p>\n<p>Below is expected vs poi output :</p>\n<p><strong>Expected output</strong></p>\n<p><a href=\"https://i.stack.imgur.com/ECTS4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ECTS4.png\" alt=\"Expected output\" /></a></p>\n<p><strong>poi output</strong></p>\n<p><a href=\"https://i.stack.imgur.com/HmEBp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HmEBp.png\" alt=\"poi output\" /></a></p>\n<p>Column J and K doesn't have any formula cells.\nColumn L and M have formula cells dependent on J and K data.</p>\n<p>Here's formula defined in 7 rows of column J and K :</p>\n<pre><code>Column J :\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J6)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J6))))\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J7)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J7))))\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J8)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J8))))\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J9)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J9))))\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J10)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J10))))\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J11)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J11))))\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(J12)-5,&quot;&quot;,INDEX(J:J,SMALL(IF(J$6:J$62&lt;&gt;&quot;&quot;,ROW(J$6:J$62)),ROWS(J$6:J12))))\n\nColumn K :\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K6)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K6))))\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K7)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K7))))\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K8)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K8))))\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K9)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K9))))\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K10)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K10))))\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K11)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K11))))\n=IF(COUNTIF($J$6:$J$62,&quot;?*&quot;)&lt;ROW(K12)-5,&quot;&quot;,INDEX(K:K,SMALL(IF(K$6:K$62&lt;&gt;&quot;&quot;,ROW(K$6:K$62)),ROWS(K$6:K12))))\n</code></pre>\n<p>If we compare the images above (Expected vs poi output), then we see that poi gives incorrect results and repeat the items in J and K, whereas MS excel is able to calculate correctly.</p>\n<p>Tried formula evaluator <code>evaluateAll</code> and <code>evaluateFormulaCell</code>. Doesn't yield correct results.<br />\nTried with <code>evaluator.clearAllCachedResultValues();</code> and    <code>evaluator.notifySetFormula(cell);</code>\nThis looks like that poi is not supporting these formulas.\nXSSFWorkBook is used.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    FileInputStream fis = new FileInputStream(inputFile);\n    Workbook workbook = new XSSFWorkbook(fis);\n    FormulaEvaluator evaluator = workbook.getCreationHelper().createFormulaEvaluator();\n    // some code in between, loops etc\n    if (cell.getCellType() == CellType.FORMULA) {\n        evaluator.evaluateFormulaCell(cell);    \n    }\n</code></pre>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n        &lt;artifactId&gt;poi&lt;/artifactId&gt;            \n        &lt;version&gt;5.2.4&lt;/version&gt;\n    &lt;/dependency&gt;       \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n        &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n        &lt;version&gt;5.2.4&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","spring","amazon-eks","amazon-sagemaker","aws-sdk-java-2.0"],"comments":[{"owner":{"account_id":13580417,"reputation":1104,"user_id":9796588,"display_name":"Marc Karp"},"score":0,"creation_date":1683673747,"post_id":76205646,"comment_id":134402156,"body_markdown":"You mentioned, 15-20ms and 30-40ms in CloudWatch. What metrics are these?  What p99 latencies are you comparing to, is it end to end latency? How are you measuring it?","body":"You mentioned, 15-20ms and 30-40ms in CloudWatch. What metrics are these?  What p99 latencies are you comparing to, is it end to end latency? How are you measuring it?"},{"owner":{"account_id":12875245,"reputation":547,"user_id":9312181,"display_name":"tusharRawat"},"score":0,"creation_date":1683711030,"post_id":76205646,"comment_id":134407110,"body_markdown":"@MarcKarp, In cloudwatch for sagemaker we are using: p99 of `ModelLatency` and `OverheadLatency` metric as stated in the docs : https://docs.aws.amazon.com/sagemaker/latest/dg/monitoring-cloudwatch.html#cloudwatch-metrics-feature-store\nAnd For feature-store we are using `Latency` metrics as mentioned.","body":"@MarcKarp, In cloudwatch for sagemaker we are using: p99 of <code>ModelLatency</code> and <code>OverheadLatency</code> metric as stated in the docs : <a href=\"https://docs.aws.amazon.com/sagemaker/latest/dg/monitoring-cloudwatch.html#cloudwatch-metrics-feature-store\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/sagemaker/latest/dg/&hellip;</a> And For feature-store we are using <code>Latency</code> metrics as mentioned."},{"owner":{"account_id":12875245,"reputation":547,"user_id":9312181,"display_name":"tusharRawat"},"score":0,"creation_date":1683711101,"post_id":76205646,"comment_id":134407125,"body_markdown":"How we are measuring the end to end p99 latency on application level for sagemaker and feature-store: `histogram_quantile(0.99, sum(rate(resilience4j_circuitbreaker_calls_seconds_bucket{name=&quot;awsSageMaker&quot;}[1m])) by (le))` . and same query with method name awsFeatureMaker as well.. @MarcKarp.","body":"How we are measuring the end to end p99 latency on application level for sagemaker and feature-store: <code>histogram_quantile(0.99, sum(rate(resilience4j_circuitbreaker_calls_seconds_bucket{na&zwnj;&#8203;me=&quot;awsSageMaker&quot;}[1&zwnj;&#8203;m])) by (le))</code> . and same query with method name awsFeatureMaker as well.. @MarcKarp."},{"owner":{"account_id":12875245,"reputation":547,"user_id":9312181,"display_name":"tusharRawat"},"score":0,"creation_date":1697731648,"post_id":76205646,"comment_id":136319615,"body_markdown":"No @AnishB. But I could try that. Which version of sdk &lt; 2.0 would be more suitable here ?","body":"No @AnishB. But I could try that. Which version of sdk &lt; 2.0 would be more suitable here ?"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1697732164,"post_id":76205646,"comment_id":136319702,"body_markdown":"Are you sure it&#39;s a dependency issue?","body":"Are you sure it&#39;s a dependency issue?"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1697732410,"post_id":76205646,"comment_id":136319760,"body_markdown":"Because it can be that processing time for the data model that you are sending to sagemaker is taking time.. Just sayin","body":"Because it can be that processing time for the data model that you are sending to sagemaker is taking time.. Just sayin"},{"owner":{"account_id":12875245,"reputation":547,"user_id":9312181,"display_name":"tusharRawat"},"score":0,"creation_date":1697983675,"post_id":76205646,"comment_id":136345059,"body_markdown":"I don&#39;t think this is a dependency issue @AnishB.","body":"I don&#39;t think this is a dependency issue @AnishB."},{"owner":{"account_id":12875245,"reputation":547,"user_id":9312181,"display_name":"tusharRawat"},"score":0,"creation_date":1697983701,"post_id":76205646,"comment_id":136345061,"body_markdown":"@AnishB. how to reduce the processing time for the data model ?","body":"@AnishB. how to reduce the processing time for the data model ?"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1697983773,"post_id":76205646,"comment_id":136345067,"body_markdown":"Not sure. Need to check. Is your model big that you are sending to sagemaker?","body":"Not sure. Need to check. Is your model big that you are sending to sagemaker?"},{"owner":{"account_id":12875245,"reputation":547,"user_id":9312181,"display_name":"tusharRawat"},"score":0,"creation_date":1697984141,"post_id":76205646,"comment_id":136345099,"body_markdown":"The request payload type is json and it contains around 400 &lt;key, value&gt; pairs. It not that big, I guess. are you suggesting to use some compression algo here ?","body":"The request payload type is json and it contains around 400 &lt;key, value&gt; pairs. It not that big, I guess. are you suggesting to use some compression algo here ?"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1698214429,"post_id":76205646,"comment_id":136375101,"body_markdown":"@tusharRawat Not sure on that. 400 key value pairs is not at all small. Can you check one thing. Try to send the data model directly into AWS Sagemaker via AWS CLI without using your code and do a comparison of p99 with and without code to see for any difference.","body":"@tusharRawat Not sure on that. 400 key value pairs is not at all small. Can you check one thing. Try to send the data model directly into AWS Sagemaker via AWS CLI without using your code and do a comparison of p99 with and without code to see for any difference."},{"owner":{"account_id":12875245,"reputation":547,"user_id":9312181,"display_name":"tusharRawat"},"score":0,"creation_date":1698405463,"post_id":76205646,"comment_id":136404504,"body_markdown":"@AnishB. How can p99 be measured from the AWS CLI, as there would be high changes that there&#39;s not going to be latent from there.","body":"@AnishB. How can p99 be measured from the AWS CLI, as there would be high changes that there&#39;s not going to be latent from there."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1698405573,"post_id":76205646,"comment_id":136404532,"body_markdown":"@tusharRawat Can you check whether or not there is a lower latency via CLI? To be sure.","body":"@tusharRawat Can you check whether or not there is a lower latency via CLI? To be sure."}],"owner":{"account_id":12875245,"reputation":547,"user_id":9312181,"display_name":"tusharRawat"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":532,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1697615895,"creation_date":1683602675,"question_id":76205646,"body_markdown":"We have recently done an integration with AWS SageMaker and FeatureStore for one of our use-case. On Cloudwatch, we could see the `p99: 50-60ms(Overhead + Model)` for sagemaker and `p99: 15-20ms` for feature-store.\r\n\r\n\r\nBut we are observing the high latencies while using JAVA AWS sdk 2.0, to call to feature-store, somewhat around. `p99: 180ms` for sagemaker and `p99: 100ms` for feature-store.\r\n\r\n\r\nWe have the containerised spring-boot application running on EKS and here we are calling FS and SM.\r\n\r\nSample code :-\r\n\r\n **feature-store call**\r\n\r\n       private static SageMakerFeatureStoreRuntimeClient featureStoreRuntimeClient;\r\n    \r\n        @PostConstruct\r\n        public void init() {\r\n            ClientOverrideConfiguration clientOverrideConfiguration = ClientOverrideConfiguration.builder()\r\n                    .apiCallTimeout(Duration.of(featureStoreConfig.getApiCallAttemptTimeout(), ChronoUnit.MILLIS))\r\n                    .retryPolicy(RetryPolicy.builder().numRetries(0).build())\r\n                    .build();\r\n    \r\n            featureStoreRuntimeClient = SageMakerFeatureStoreRuntimeClient.builder()\r\n                    .overrideConfiguration(clientOverrideConfiguration)\r\n                    .credentialsProvider(DefaultCredentialsProvider.create())\r\n                    .region(Region.AP_SOUTHEAST_1).build();\r\n     }\r\n\r\n**Sagemaker call**:\r\n\r\n    private static SageMakerRuntimeClient sageMakerRuntimeClient;\r\n    \r\n    @PostConstruct\r\n    public void init() {\r\n        ClientOverrideConfiguration clientOverrideConfiguration = ClientOverrideConfiguration.builder()\r\n                .apiCallTimeout(Duration.of(sageMakerConfig.getApiCallAttemptTimeout(), ChronoUnit.MILLIS))\r\n                .retryPolicy(RetryPolicy.builder().numRetries(0).build())\r\n        .build();\r\n    \r\n        sageMakerRuntimeClient = SageMakerRuntimeClient.builder()\r\n                .overrideConfiguration(clientOverrideConfiguration)\r\n                .credentialsProvider(DefaultCredentialsProvider.create())\r\n                .region(Region.AP_SOUTHEAST_1)\r\n                .build();\r\n    }\r\n\r\nUsing AWS java-sdk2 for SageMaker and feature-store.\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n      &lt;artifactId&gt;sagemakerruntime&lt;/artifactId&gt;\r\n      &lt;version&gt;2.20.26&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n      &lt;artifactId&gt;sagemakerfeaturestoreruntime&lt;/artifactId&gt;\r\n      &lt;version&gt;2.20.26&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nWhat could we possible cause for such a high latency ?\r\n\r\n\r\n\r\n\r\n\r\n","title":"High latency observed while calling AWS sagemaker and online feature-store service","body":"<p>We have recently done an integration with AWS SageMaker and FeatureStore for one of our use-case. On Cloudwatch, we could see the <code>p99: 50-60ms(Overhead + Model)</code> for sagemaker and <code>p99: 15-20ms</code> for feature-store.</p>\n<p>But we are observing the high latencies while using JAVA AWS sdk 2.0, to call to feature-store, somewhat around. <code>p99: 180ms</code> for sagemaker and <code>p99: 100ms</code> for feature-store.</p>\n<p>We have the containerised spring-boot application running on EKS and here we are calling FS and SM.</p>\n<p>Sample code :-</p>\n<p><strong>feature-store call</strong></p>\n<pre><code>   private static SageMakerFeatureStoreRuntimeClient featureStoreRuntimeClient;\n\n    @PostConstruct\n    public void init() {\n        ClientOverrideConfiguration clientOverrideConfiguration = ClientOverrideConfiguration.builder()\n                .apiCallTimeout(Duration.of(featureStoreConfig.getApiCallAttemptTimeout(), ChronoUnit.MILLIS))\n                .retryPolicy(RetryPolicy.builder().numRetries(0).build())\n                .build();\n\n        featureStoreRuntimeClient = SageMakerFeatureStoreRuntimeClient.builder()\n                .overrideConfiguration(clientOverrideConfiguration)\n                .credentialsProvider(DefaultCredentialsProvider.create())\n                .region(Region.AP_SOUTHEAST_1).build();\n }\n</code></pre>\n<p><strong>Sagemaker call</strong>:</p>\n<pre><code>private static SageMakerRuntimeClient sageMakerRuntimeClient;\n\n@PostConstruct\npublic void init() {\n    ClientOverrideConfiguration clientOverrideConfiguration = ClientOverrideConfiguration.builder()\n            .apiCallTimeout(Duration.of(sageMakerConfig.getApiCallAttemptTimeout(), ChronoUnit.MILLIS))\n            .retryPolicy(RetryPolicy.builder().numRetries(0).build())\n    .build();\n\n    sageMakerRuntimeClient = SageMakerRuntimeClient.builder()\n            .overrideConfiguration(clientOverrideConfiguration)\n            .credentialsProvider(DefaultCredentialsProvider.create())\n            .region(Region.AP_SOUTHEAST_1)\n            .build();\n}\n</code></pre>\n<p>Using AWS java-sdk2 for SageMaker and feature-store.</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n  &lt;artifactId&gt;sagemakerruntime&lt;/artifactId&gt;\n  &lt;version&gt;2.20.26&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n  &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n  &lt;artifactId&gt;sagemakerfeaturestoreruntime&lt;/artifactId&gt;\n  &lt;version&gt;2.20.26&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>What could we possible cause for such a high latency ?</p>\n"},{"tags":["java","spring-boot","freeze"],"comments":[{"owner":{"account_id":1515381,"reputation":958,"user_id":1416490,"accept_rate":72,"display_name":"zt9788"},"score":1,"creation_date":1697613789,"post_id":77314197,"comment_id":136300311,"body_markdown":"jstack pid to look which thread is blocked","body":"jstack pid to look which thread is blocked"},{"owner":{"account_id":10245746,"reputation":145,"user_id":7561583,"display_name":"Kerwin Bryant"},"score":0,"creation_date":1697615900,"post_id":77314197,"comment_id":136300684,"body_markdown":"I&#39;m sorry, but due to the length of the output from jstack, I&#39;ve condensed it (by removing some duplicate information) and included it here; No threads with a blocked state were found;","body":"I&#39;m sorry, but due to the length of the output from jstack, I&#39;ve condensed it (by removing some duplicate information) and included it here; No threads with a blocked state were found;"},{"owner":{"account_id":1515381,"reputation":958,"user_id":1416490,"accept_rate":72,"display_name":"zt9788"},"score":0,"creation_date":1697618317,"post_id":77314197,"comment_id":136301135,"body_markdown":"do you import the spring-boot-start-actuator and set `managent`, and you can try use the `@RestControllerAdvice` to catch there is some exception","body":"do you import the spring-boot-start-actuator and set <code>managent</code>, and you can try use the <code>@RestControllerAdvice</code> to catch there is some exception"},{"owner":{"account_id":10245746,"reputation":145,"user_id":7561583,"display_name":"Kerwin Bryant"},"score":0,"creation_date":1697619091,"post_id":77314197,"comment_id":136301289,"body_markdown":"Of course, I&#39;m just giving an example here; In fact, requesting any API has the same result.","body":"Of course, I&#39;m just giving an example here; In fact, requesting any API has the same result."},{"owner":{"account_id":10245746,"reputation":145,"user_id":7561583,"display_name":"Kerwin Bryant"},"score":0,"creation_date":1697619144,"post_id":77314197,"comment_id":136301303,"body_markdown":"I can&#39;t see any exception through the log. I suspect that the request hasn&#39;t arrived at the controller yet.","body":"I can&#39;t see any exception through the log. I suspect that the request hasn&#39;t arrived at the controller yet."},{"owner":{"account_id":1515381,"reputation":958,"user_id":1416490,"accept_rate":72,"display_name":"zt9788"},"score":0,"creation_date":1697619546,"post_id":77314197,"comment_id":136301380,"body_markdown":"You can consider becoming a controller without any business to see if it returns results. If there is no feedback yet, I have no idea :(","body":"You can consider becoming a controller without any business to see if it returns results. If there is no feedback yet, I have no idea :("},{"owner":{"account_id":10245746,"reputation":145,"user_id":7561583,"display_name":"Kerwin Bryant"},"score":0,"creation_date":1697619719,"post_id":77314197,"comment_id":136301420,"body_markdown":"I try to use `curl -I`, the behavior is the same, `-I` is not going to go business logic;","body":"I try to use <code>curl -I</code>, the behavior is the same, <code>-I</code> is not going to go business logic;"}],"owner":{"account_id":10245746,"reputation":145,"user_id":7561583,"display_name":"Kerwin Bryant"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697615778,"creation_date":1697613476,"question_id":77314197,"body_markdown":"the main component version information that the application depends on is as follows:\r\n```text\r\n[INFO] com.isli:com.isli.datacollection:jar:3.0.0\r\n[INFO] +- org.springframework.boot:spring-boot-starter-web:jar:2.0.3.RELEASE:compile\r\n[INFO] |  +- org.springframework.boot:spring-boot-starter-tomcat:jar:2.0.3.RELEASE:compile\r\n[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:8.5.31:compile\r\n[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:8.5.31:compile\r\n[INFO] |  |  \\- org.apache.tomcat.embed:tomcat-embed-websocket:jar:8.5.31:compile\r\n[INFO] |  +- org.springframework:spring-web:jar:5.0.7.RELEASE:compile\r\n[INFO] |  |  \\- org.springframework:spring-beans:jar:5.0.7.RELEASE:compile\r\n[INFO] |  \\- org.springframework:spring-webmvc:jar:5.0.7.RELEASE:compile\r\n[INFO] |     \\- org.springframework:spring-expression:jar:5.0.7.RELEASE:compile\r\n[INFO] +- org.mybatis.spring.boot:mybatis-spring-boot-starter:jar:1.3.2:compile\r\n[INFO] |  +- org.springframework.boot:spring-boot-starter-jdbc:jar:2.0.3.RELEASE:compile\r\n[INFO] |  |  +- com.zaxxer:HikariCP:jar:2.7.9:compile\r\n[INFO] |  |  \\- org.springframework:spring-jdbc:jar:5.0.7.RELEASE:compile\r\n[INFO] |  |     \\- org.springframework:spring-tx:jar:5.0.7.RELEASE:compile\r\n[INFO] |  +- org.mybatis.spring.boot:mybatis-spring-boot-autoconfigure:jar:1.3.2:compile\r\n[INFO] |  +- org.mybatis:mybatis:jar:3.4.6:compile\r\n[INFO] |  \\- org.mybatis:mybatis-spring:jar:1.3.2:compile\r\n[INFO] +- mysql:mysql-connector-java:jar:5.1.46:compile\r\n[INFO] ...\r\n```\r\n\r\nThe information of `jsatck -l` is as follows:\r\n```text\r\n2023-10-16 15:46:02\r\nFull thread dump Java HotSpot(TM) 64-Bit Server VM (25.131-b11 mixed mode):\r\n\r\n&quot;HikariPool-1 connection adder&quot; #9401 daemon prio=5 os_prio=0 tid=0x00007f5e0400d000 nid=0xc40 sleeping[0x00007f5e7eeb3000]\r\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\r\n\tat java.lang.Thread.sleep(Native Method)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- &lt;0x00000000f8ebabb0&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)\r\n\r\n&quot;HikariPool-1 housekeeper&quot; #9446 daemon prio=5 os_prio=0 tid=0x00007f5df0005000 nid=0x203f waiting on condition [0x00007f5e746ce000]\r\n   java.lang.Thread.State: TIMED_WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1249f50&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;HikariPool-2 housekeeper&quot; #62 daemon prio=5 os_prio=0 tid=0x00007f5dd800e800 nid=0x2038 waiting on condition [0x00007f5e773f2000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e2034400&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;HikariPool-2 connection adder&quot; #9466 daemon prio=5 os_prio=0 tid=0x00007f5dd8036800 nid=0x2c5 waiting on condition [0x00007f5e74cd2000]\r\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- &lt;0x00000000f8ee35c0&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)\r\n\r\n&quot;HikariPool-4 housekeeper&quot; #9444 daemon prio=5 os_prio=0 tid=0x00007f5da4006800 nid=0x757d waiting on condition [0x00007f5e7c656000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1f5f5c8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;HikariPool-4 connection adder&quot; #9465 daemon prio=5 os_prio=0 tid=0x00007f5dd8037800 nid=0x22f waiting on condition [0x00007f5e744cc000]\r\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- &lt;0x00000000f8ee2e80&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)\r\n\r\n&quot;logback-8&quot; #3615 daemon prio=5 os_prio=0 tid=0x00007f5ddc797000 nid=0x6717 waiting on condition [0x00007f5e86781000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;logback-7&quot; #3614 daemon prio=5 os_prio=0 tid=0x00007f5ddc795000 nid=0x6716 waiting on condition [0x00007f5e775f4000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;logback-6&quot; #3503 daemon prio=5 os_prio=0 tid=0x00007f5d20008800 nid=0x5166 waiting on condition [0x00007f5e777f6000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;logback-5&quot; #3502 daemon prio=5 os_prio=0 tid=0x00007f5d20006800 nid=0x5165 waiting on condition [0x00007f5e749d1000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;logback-4&quot; #1901 daemon prio=5 os_prio=0 tid=0x00007f5ddc6d3000 nid=0x1b6d waiting on condition [0x00007f5e771f0000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;logback-3&quot; #1900 daemon prio=5 os_prio=0 tid=0x00007f5ddc6d2800 nid=0x1b6c waiting on condition [0x00007f5e774f3000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;logback-2&quot; #1899 daemon prio=5 os_prio=0 tid=0x00007f5ddc6d2000 nid=0x1b6b waiting on condition [0x00007f5e747cf000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;logback-1&quot; #1898 daemon prio=5 os_prio=0 tid=0x00007f5ddc6d1000 nid=0x1b6a waiting on condition [0x00007f5e776f5000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e6cb1e20&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;logback-1&quot; #9448 daemon prio=5 os_prio=0 tid=0x00007f5d6001e800 nid=0x6b98 waiting on condition [0x00007f5e7dead000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000f8edc1e0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;DiscoveryClient-12&quot; #9439 daemon prio=5 os_prio=0 tid=0x00007f5d78005800 nid=0x43cc waiting on condition [0x00007f5e743cb000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1e8bc40&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;DiscoveryClient-8&quot; #9431 daemon prio=5 os_prio=0 tid=0x00007f5d4000a000 nid=0x4257 waiting on condition [0x00007f5e770ef000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1e8bc40&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;DiscoveryClient-CacheRefreshExecutor-2&quot; #8071 daemon prio=5 os_prio=0 tid=0x00007f5de4003000 nid=0x27a4 waiting on condition [0x00007f5e76aeb000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1e8b9f0&gt; (a java.util.concurrent.SynchronousQueue$TransferStack)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;DiscoveryClient-HeartbeatExecutor-2&quot; #3643 daemon prio=5 os_prio=0 tid=0x00007f5d98002000 nid=0x712a waiting on condition [0x00007f5e772f1000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1e8b440&gt; (a java.util.concurrent.SynchronousQueue$TransferStack)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;AsyncResolver-bootstrap-executor-0&quot; #98 daemon prio=5 os_prio=0 tid=0x00007f5dec001000 nid=0x2385 waiting on condition [0x00007f5e74dd3000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1dbf238&gt; (a java.util.concurrent.SynchronousQueue$TransferStack)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;PollingServerListUpdater-1&quot; #80 daemon prio=5 os_prio=0 tid=0x00007f5d8c001800 nid=0x2082 waiting on condition [0x00007f5e765e8000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1edc458&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;pool-1-thread-1&quot; #79 prio=5 os_prio=0 tid=0x00007f5ddc827800 nid=0x2081 waiting on condition [0x00007f5e766e9000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e15f3470&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;Okio Watchdog&quot; #78 daemon prio=5 os_prio=0 tid=0x00007f5ddc81e800 nid=0x2080 in Object.wait() [0x00007f5e767ea000]\r\n   java.lang.Thread.State: WAITING (on object monitor)\r\n\tat java.lang.Object.wait(Native Method)\r\n\tat java.lang.Object.wait(Object.java:502)\r\n\tat okio.AsyncTimeout.awaitTimeout(AsyncTimeout.java:338)\r\n\t- locked &lt;0x00000000e2033dc0&gt; (a java.lang.Class for okio.AsyncTimeout)\r\n\tat okio.AsyncTimeout$Watchdog.run(AsyncTimeout.java:313)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;PollingServerListUpdater-0&quot; #74 daemon prio=5 os_prio=0 tid=0x00007f5ddc73e000 nid=0x2072 waiting on condition [0x00007f5e76fee000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1edc458&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;RibbonApacheHttpClientConfiguration.connectionManagerTimer&quot; #70 daemon prio=5 os_prio=0 tid=0x00007f5ddc3f0800 nid=0x2070 in Object.wait() [0x00007f5e7fffe000]\r\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\r\n\tat java.lang.Object.wait(Native Method)\r\n\tat java.util.TimerThread.mainLoop(Timer.java:552)\r\n\t- locked &lt;0x00000000e1edd308&gt; (a java.util.TaskQueue)\r\n\tat java.util.TimerThread.run(Timer.java:505)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;DestroyJavaVM&quot; #61 prio=5 os_prio=0 tid=0x00007f5ed400a800 nid=0x1fdb waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;http-nio-9026-exec-10&quot; #55 daemon prio=5 os_prio=0 tid=0x00007f5ed62a4800 nid=0x2033 waiting on condition [0x00007f5e778f7000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;http-nio-9026-exec-9&quot; #54 daemon prio=5 os_prio=0 tid=0x00007f5ed62a3000 nid=0x2032 waiting on condition [0x00007f5e779f8000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;http-nio-9026-exec-8&quot; #53 daemon prio=5 os_prio=0 tid=0x00007f5ed62a1000 nid=0x2031 waiting on condition [0x00007f5e77af9000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;http-nio-9026-exec-7&quot; #52 daemon prio=5 os_prio=0 tid=0x00007f5ed629f800 nid=0x2030 waiting on condition [0x00007f5e77bfa000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;http-nio-9026-exec-6&quot; #51 daemon prio=5 os_prio=0 tid=0x00007f5ed629d800 nid=0x202f waiting on condition [0x00007f5e77cfb000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;http-nio-9026-exec-5&quot; #50 daemon prio=5 os_prio=0 tid=0x00007f5ed629c000 nid=0x202e waiting on condition [0x00007f5e77dfc000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;http-nio-9026-exec-4&quot; #49 daemon prio=5 os_prio=0 tid=0x00007f5ed629a000 nid=0x202d waiting on condition [0x00007f5e77efd000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;http-nio-9026-exec-3&quot; #48 daemon prio=5 os_prio=0 tid=0x00007f5ed6298800 nid=0x202c waiting on condition [0x00007f5e77ffe000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;http-nio-9026-exec-2&quot; #47 daemon prio=5 os_prio=0 tid=0x00007f5ed6296800 nid=0x202b waiting on condition [0x00007f5e7c151000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;http-nio-9026-exec-1&quot; #46 daemon prio=5 os_prio=0 tid=0x00007f5ed6295000 nid=0x202a waiting on condition [0x00007f5e7c252000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\t...\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;NioBlockingSelector.BlockPoller-1&quot; #45 daemon prio=5 os_prio=0 tid=0x00007f5ed6293800 nid=0x2029 runnable [0x00007f5e7c353000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\tat sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)\r\n\tat sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)\r\n\tat sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)\r\n\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)\r\n\t- locked &lt;0x00000000e1e205d0&gt; (a sun.nio.ch.Util$3)\r\n\t- locked &lt;0x00000000e1e205c0&gt; (a java.util.Collections$UnmodifiableSet)\r\n\t- locked &lt;0x00000000e1e20498&gt; (a sun.nio.ch.EPollSelectorImpl)\r\n\tat sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)\r\n\tat org.apache.tomcat.util.net.NioBlockingSelector$BlockPoller.run(NioBlockingSelector.java:298)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;pool-8-thread-1&quot; #44 prio=5 os_prio=0 tid=0x00007f5ed6272800 nid=0x2028 waiting on condition [0x00007f5e7c454000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e202aa70&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;DiscoveryClient-InstanceInfoReplicator-0&quot; #43 daemon prio=5 os_prio=0 tid=0x00007f5ed6249000 nid=0x2027 waiting on condition [0x00007f5e7c555000]\r\n   java.lang.Thread.State: TIMED_WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1f5f728&gt; (a java.util.concurrent.SynchronousQueue$TransferQueue)\r\n\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\n\tat java.util.concurrent.SynchronousQueue$TransferQueue.awaitFulfill(SynchronousQueue.java:764)\r\n\tat java.util.concurrent.SynchronousQueue$TransferQueue.transfer(SynchronousQueue.java:695)\r\n\tat java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\r\n\tat com.zaxxer.hikari.util.ConcurrentBag.borrow(ConcurrentBag.java:157)\r\n\tat com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:166)\r\n\tat com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:148)\r\n\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)\r\n\tat org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:151)\r\n\tat org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:115)\r\n\tat org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:78)\r\n\tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:324)\r\n\tat org.springframework.boot.actuate.jdbc.DataSourceHealthIndicator.getProduct(DataSourceHealthIndicator.java:122)\r\n\tat org.springframework.boot.actuate.jdbc.DataSourceHealthIndicator.doDataSourceHealthCheck(DataSourceHealthIndicator.java:109)\r\n\tat org.springframework.boot.actuate.jdbc.DataSourceHealthIndicator.doHealthCheck(DataSourceHealthIndicator.java:104)\r\n\tat org.springframework.boot.actuate.health.AbstractHealthIndicator.health(AbstractHealthIndicator.java:84)\r\n\tat org.springframework.boot.actuate.health.CompositeHealthIndicator.health(CompositeHealthIndicator.java:68)\r\n\tat org.springframework.boot.actuate.health.CompositeHealthIndicator.health(CompositeHealthIndicator.java:68)\r\n\tat org.springframework.cloud.netflix.eureka.EurekaHealthCheckHandler.getHealthStatus(EurekaHealthCheckHandler.java:103)\r\n\tat org.springframework.cloud.netflix.eureka.EurekaHealthCheckHandler.getStatus(EurekaHealthCheckHandler.java:99)\r\n\tat com.netflix.discovery.DiscoveryClient.refreshInstanceInfo(DiscoveryClient.java:1382)\r\n\tat com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:117)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- &lt;0x00000000e1e686a8&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)\r\n\r\n&quot;AsyncResolver-bootstrap-0&quot; #40 daemon prio=5 os_prio=0 tid=0x00007f5ed61fb000 nid=0x2024 waiting on condition [0x00007f5e7ca58000]\r\n   java.lang.Thread.State: TIMED_WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1dbf718&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;Eureka-JerseyClient-Conn-Cleaner2&quot; #39 daemon prio=5 os_prio=0 tid=0x00007f5ed61da000 nid=0x2023 waiting on condition [0x00007f5e7dfae000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e1fcbac8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;Java2D Disposer&quot; #37 daemon prio=10 os_prio=0 tid=0x00007f5dfc291800 nid=0x201b in Object.wait() [0x00007f5e7d359000]\r\n   java.lang.Thread.State: WAITING (on object monitor)\r\n\tat java.lang.Object.wait(Native Method)\r\n\t- waiting on &lt;0x00000000e128e7a8&gt; (a java.lang.ref.ReferenceQueue$Lock)\r\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143)\r\n\t- locked &lt;0x00000000e128e7a8&gt; (a java.lang.ref.ReferenceQueue$Lock)\r\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:164)\r\n\tat sun.java2d.Disposer.run(Disposer.java:148)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;container-0&quot; #33 prio=5 os_prio=0 tid=0x00007f5ed5d5d000 nid=0x2017 waiting on condition [0x00007f5e7e8af000]\r\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\r\n\tat java.lang.Thread.sleep(Native Method)\r\n\tat org.apache.catalina.core.StandardServer.await(StandardServer.java:427)\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer$1.run(TomcatWebServer.java:182)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;spring.cloud.inetutils&quot; #31 daemon prio=5 os_prio=0 tid=0x00007f5e10207000 nid=0x2011 waiting on condition [0x00007f5e7eab1000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e13c7088&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;Thread-7&quot; #28 daemon prio=9 os_prio=0 tid=0x00007f5e2c013000 nid=0x200e waiting on condition [0x00007f5e7efb4000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e105b5c0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\r\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\r\n\tat org.LatencyUtils.PauseDetector$PauseDetectorThread.run(PauseDetector.java:85)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;Thread-3&quot; #22 prio=5 os_prio=0 tid=0x00007f5ed4f1b800 nid=0x2004 waiting on condition [0x00007f5e84b8e000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000e055b3c8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\t...\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;Thread-2&quot; #21 daemon prio=5 os_prio=0 tid=0x00007f5ed4f1a000 nid=0x2003 runnable [0x00007f5e85f68000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\tat sun.nio.fs.LinuxWatchService.poll(Native Method)\r\n\tat sun.nio.fs.LinuxWatchService.access$600(LinuxWatchService.java:47)\r\n\tat sun.nio.fs.LinuxWatchService$Poller.run(LinuxWatchService.java:314)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;Service Thread&quot; #17 daemon prio=9 os_prio=0 tid=0x00007f5ed4389800 nid=0x1fff runnable [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;C1 CompilerThread11&quot; #16 daemon prio=9 os_prio=0 tid=0x00007f5ed437c800 nid=0x1ffe waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;C1 CompilerThread10&quot; #15 daemon prio=9 os_prio=0 tid=0x00007f5ed437a800 nid=0x1ffd waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;C1 CompilerThread9&quot; #14 daemon prio=9 os_prio=0 tid=0x00007f5ed4378000 nid=0x1ffc waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;C1 CompilerThread8&quot; #13 daemon prio=9 os_prio=0 tid=0x00007f5ed4376000 nid=0x1ffb waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;C2 CompilerThread7&quot; #12 daemon prio=9 os_prio=0 tid=0x00007f5ed4374000 nid=0x1ffa waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;C2 CompilerThread6&quot; #11 daemon prio=9 os_prio=0 tid=0x00007f5ed4371800 nid=0x1ff9 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;C2 CompilerThread5&quot; #10 daemon prio=9 os_prio=0 tid=0x00007f5ed436f800 nid=0x1ff8 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;C2 CompilerThread4&quot; #9 daemon prio=9 os_prio=0 tid=0x00007f5ed4365800 nid=0x1ff7 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;C2 CompilerThread3&quot; #8 daemon prio=9 os_prio=0 tid=0x00007f5ed4363800 nid=0x1ff6 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;C2 CompilerThread2&quot; #7 daemon prio=9 os_prio=0 tid=0x00007f5ed4361000 nid=0x1ff5 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;C2 CompilerThread1&quot; #6 daemon prio=9 os_prio=0 tid=0x00007f5ed435f800 nid=0x1ff4 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;C2 CompilerThread0&quot; #5 daemon prio=9 os_prio=0 tid=0x00007f5ed435c800 nid=0x1ff3 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;Signal Dispatcher&quot; #4 daemon prio=9 os_prio=0 tid=0x00007f5ed435b000 nid=0x1ff2 runnable [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;Finalizer&quot; #3 daemon prio=8 os_prio=0 tid=0x00007f5ed4328800 nid=0x1ff1 in Object.wait() [0x00007f5e87bfa000]\r\n   java.lang.Thread.State: WAITING (on object monitor)\r\n\tat java.lang.Object.wait(Native Method)\r\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143)\r\n\t- locked &lt;0x00000000e001e0f8&gt; (a java.lang.ref.ReferenceQueue$Lock)\r\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:164)\r\n\tat java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:209)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;Reference Handler&quot; #2 daemon prio=10 os_prio=0 tid=0x00007f5ed4323800 nid=0x1ff0 in Object.wait() [0x00007f5e87cfb000]\r\n   java.lang.Thread.State: WAITING (on object monitor)\r\n\tat java.lang.Object.wait(Native Method)\r\n\tat java.lang.Object.wait(Object.java:502)\r\n\tat java.lang.ref.Reference.tryHandlePending(Reference.java:191)\r\n\t- locked &lt;0x00000000e0021a50&gt; (a java.lang.ref.Reference$Lock)\r\n\tat java.lang.ref.Reference$ReferenceHandler.run(Reference.java:153)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n&quot;VM Thread&quot; os_prio=0 tid=0x00007f5ed431c000 nid=0x1fef runnable \r\n\r\n&quot;GC task thread#0 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4020000 nid=0x1fdd runnable \r\n\r\n&quot;GC task thread#1 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4022000 nid=0x1fde runnable \r\n\r\n&quot;GC task thread#2 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4023800 nid=0x1fdf runnable \r\n\r\n&quot;GC task thread#3 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4025800 nid=0x1fe0 runnable \r\n\r\n&quot;GC task thread#4 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4027000 nid=0x1fe1 runnable \r\n\r\n&quot;GC task thread#5 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4029000 nid=0x1fe2 runnable \r\n\r\n&quot;GC task thread#6 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed402a800 nid=0x1fe3 runnable \r\n\r\n&quot;GC task thread#7 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed402c800 nid=0x1fe4 runnable \r\n\r\n&quot;GC task thread#8 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed402e000 nid=0x1fe5 runnable \r\n\r\n&quot;GC task thread#9 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4030000 nid=0x1fe6 runnable \r\n\r\n&quot;GC task thread#10 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4031800 nid=0x1fe7 runnable \r\n\r\n&quot;GC task thread#11 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4033800 nid=0x1fe8 runnable \r\n\r\n&quot;GC task thread#12 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4035000 nid=0x1fe9 runnable \r\n\r\n&quot;GC task thread#13 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4037000 nid=0x1fea runnable \r\n\r\n&quot;GC task thread#14 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4038800 nid=0x1feb runnable \r\n\r\n&quot;GC task thread#15 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed403a800 nid=0x1fec runnable \r\n\r\n&quot;GC task thread#16 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed403c000 nid=0x1fed runnable \r\n\r\n&quot;GC task thread#17 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed403e000 nid=0x1fee runnable \r\n\r\n&quot;VM Periodic Task Thread&quot; os_prio=0 tid=0x00007f5ed438c800 nid=0x2000 waiting on condition \r\n\r\nJNI global references: 1656\r\n```\r\n\r\naccess any api of the application using `curl` in the command line, for example: `curl http://127.0.0.1:9026/actuator/env`, unable to respond, no timeout has been reached, and it hangs there. Using `netstat` to troubleshoot, the `curl` request status is `ESTABLISHED`. How can I find out where the problem is?","title":"How to troubleshoot the spring-boot microservice that cannot respond to requests normally?","body":"<p>the main component version information that the application depends on is as follows:</p>\n<pre><code>[INFO] com.isli:com.isli.datacollection:jar:3.0.0\n[INFO] +- org.springframework.boot:spring-boot-starter-web:jar:2.0.3.RELEASE:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-tomcat:jar:2.0.3.RELEASE:compile\n[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:8.5.31:compile\n[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:8.5.31:compile\n[INFO] |  |  \\- org.apache.tomcat.embed:tomcat-embed-websocket:jar:8.5.31:compile\n[INFO] |  +- org.springframework:spring-web:jar:5.0.7.RELEASE:compile\n[INFO] |  |  \\- org.springframework:spring-beans:jar:5.0.7.RELEASE:compile\n[INFO] |  \\- org.springframework:spring-webmvc:jar:5.0.7.RELEASE:compile\n[INFO] |     \\- org.springframework:spring-expression:jar:5.0.7.RELEASE:compile\n[INFO] +- org.mybatis.spring.boot:mybatis-spring-boot-starter:jar:1.3.2:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-jdbc:jar:2.0.3.RELEASE:compile\n[INFO] |  |  +- com.zaxxer:HikariCP:jar:2.7.9:compile\n[INFO] |  |  \\- org.springframework:spring-jdbc:jar:5.0.7.RELEASE:compile\n[INFO] |  |     \\- org.springframework:spring-tx:jar:5.0.7.RELEASE:compile\n[INFO] |  +- org.mybatis.spring.boot:mybatis-spring-boot-autoconfigure:jar:1.3.2:compile\n[INFO] |  +- org.mybatis:mybatis:jar:3.4.6:compile\n[INFO] |  \\- org.mybatis:mybatis-spring:jar:1.3.2:compile\n[INFO] +- mysql:mysql-connector-java:jar:5.1.46:compile\n[INFO] ...\n</code></pre>\n<p>The information of <code>jsatck -l</code> is as follows:</p>\n<pre><code>2023-10-16 15:46:02\nFull thread dump Java HotSpot(TM) 64-Bit Server VM (25.131-b11 mixed mode):\n\n&quot;HikariPool-1 connection adder&quot; #9401 daemon prio=5 os_prio=0 tid=0x00007f5e0400d000 nid=0xc40 sleeping[0x00007f5e7eeb3000]\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\n    at java.lang.Thread.sleep(Native Method)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - &lt;0x00000000f8ebabb0&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)\n\n&quot;HikariPool-1 housekeeper&quot; #9446 daemon prio=5 os_prio=0 tid=0x00007f5df0005000 nid=0x203f waiting on condition [0x00007f5e746ce000]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1249f50&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;HikariPool-2 housekeeper&quot; #62 daemon prio=5 os_prio=0 tid=0x00007f5dd800e800 nid=0x2038 waiting on condition [0x00007f5e773f2000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e2034400&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;HikariPool-2 connection adder&quot; #9466 daemon prio=5 os_prio=0 tid=0x00007f5dd8036800 nid=0x2c5 waiting on condition [0x00007f5e74cd2000]\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\n    ...\n\n   Locked ownable synchronizers:\n    - &lt;0x00000000f8ee35c0&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)\n\n&quot;HikariPool-4 housekeeper&quot; #9444 daemon prio=5 os_prio=0 tid=0x00007f5da4006800 nid=0x757d waiting on condition [0x00007f5e7c656000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1f5f5c8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;HikariPool-4 connection adder&quot; #9465 daemon prio=5 os_prio=0 tid=0x00007f5dd8037800 nid=0x22f waiting on condition [0x00007f5e744cc000]\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\n    ...\n\n   Locked ownable synchronizers:\n    - &lt;0x00000000f8ee2e80&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)\n\n&quot;logback-8&quot; #3615 daemon prio=5 os_prio=0 tid=0x00007f5ddc797000 nid=0x6717 waiting on condition [0x00007f5e86781000]\n   java.lang.Thread.State: WAITING (parking)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;logback-7&quot; #3614 daemon prio=5 os_prio=0 tid=0x00007f5ddc795000 nid=0x6716 waiting on condition [0x00007f5e775f4000]\n   java.lang.Thread.State: WAITING (parking)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;logback-6&quot; #3503 daemon prio=5 os_prio=0 tid=0x00007f5d20008800 nid=0x5166 waiting on condition [0x00007f5e777f6000]\n   java.lang.Thread.State: WAITING (parking)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;logback-5&quot; #3502 daemon prio=5 os_prio=0 tid=0x00007f5d20006800 nid=0x5165 waiting on condition [0x00007f5e749d1000]\n   java.lang.Thread.State: WAITING (parking)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;logback-4&quot; #1901 daemon prio=5 os_prio=0 tid=0x00007f5ddc6d3000 nid=0x1b6d waiting on condition [0x00007f5e771f0000]\n   java.lang.Thread.State: WAITING (parking)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;logback-3&quot; #1900 daemon prio=5 os_prio=0 tid=0x00007f5ddc6d2800 nid=0x1b6c waiting on condition [0x00007f5e774f3000]\n   java.lang.Thread.State: WAITING (parking)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;logback-2&quot; #1899 daemon prio=5 os_prio=0 tid=0x00007f5ddc6d2000 nid=0x1b6b waiting on condition [0x00007f5e747cf000]\n   java.lang.Thread.State: WAITING (parking)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;logback-1&quot; #1898 daemon prio=5 os_prio=0 tid=0x00007f5ddc6d1000 nid=0x1b6a waiting on condition [0x00007f5e776f5000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e6cb1e20&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;logback-1&quot; #9448 daemon prio=5 os_prio=0 tid=0x00007f5d6001e800 nid=0x6b98 waiting on condition [0x00007f5e7dead000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000f8edc1e0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;DiscoveryClient-12&quot; #9439 daemon prio=5 os_prio=0 tid=0x00007f5d78005800 nid=0x43cc waiting on condition [0x00007f5e743cb000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1e8bc40&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;DiscoveryClient-8&quot; #9431 daemon prio=5 os_prio=0 tid=0x00007f5d4000a000 nid=0x4257 waiting on condition [0x00007f5e770ef000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1e8bc40&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;DiscoveryClient-CacheRefreshExecutor-2&quot; #8071 daemon prio=5 os_prio=0 tid=0x00007f5de4003000 nid=0x27a4 waiting on condition [0x00007f5e76aeb000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1e8b9f0&gt; (a java.util.concurrent.SynchronousQueue$TransferStack)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;DiscoveryClient-HeartbeatExecutor-2&quot; #3643 daemon prio=5 os_prio=0 tid=0x00007f5d98002000 nid=0x712a waiting on condition [0x00007f5e772f1000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1e8b440&gt; (a java.util.concurrent.SynchronousQueue$TransferStack)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;AsyncResolver-bootstrap-executor-0&quot; #98 daemon prio=5 os_prio=0 tid=0x00007f5dec001000 nid=0x2385 waiting on condition [0x00007f5e74dd3000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1dbf238&gt; (a java.util.concurrent.SynchronousQueue$TransferStack)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;PollingServerListUpdater-1&quot; #80 daemon prio=5 os_prio=0 tid=0x00007f5d8c001800 nid=0x2082 waiting on condition [0x00007f5e765e8000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1edc458&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;pool-1-thread-1&quot; #79 prio=5 os_prio=0 tid=0x00007f5ddc827800 nid=0x2081 waiting on condition [0x00007f5e766e9000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e15f3470&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;Okio Watchdog&quot; #78 daemon prio=5 os_prio=0 tid=0x00007f5ddc81e800 nid=0x2080 in Object.wait() [0x00007f5e767ea000]\n   java.lang.Thread.State: WAITING (on object monitor)\n    at java.lang.Object.wait(Native Method)\n    at java.lang.Object.wait(Object.java:502)\n    at okio.AsyncTimeout.awaitTimeout(AsyncTimeout.java:338)\n    - locked &lt;0x00000000e2033dc0&gt; (a java.lang.Class for okio.AsyncTimeout)\n    at okio.AsyncTimeout$Watchdog.run(AsyncTimeout.java:313)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;PollingServerListUpdater-0&quot; #74 daemon prio=5 os_prio=0 tid=0x00007f5ddc73e000 nid=0x2072 waiting on condition [0x00007f5e76fee000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1edc458&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;RibbonApacheHttpClientConfiguration.connectionManagerTimer&quot; #70 daemon prio=5 os_prio=0 tid=0x00007f5ddc3f0800 nid=0x2070 in Object.wait() [0x00007f5e7fffe000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n    at java.lang.Object.wait(Native Method)\n    at java.util.TimerThread.mainLoop(Timer.java:552)\n    - locked &lt;0x00000000e1edd308&gt; (a java.util.TaskQueue)\n    at java.util.TimerThread.run(Timer.java:505)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;DestroyJavaVM&quot; #61 prio=5 os_prio=0 tid=0x00007f5ed400a800 nid=0x1fdb waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;http-nio-9026-exec-10&quot; #55 daemon prio=5 os_prio=0 tid=0x00007f5ed62a4800 nid=0x2033 waiting on condition [0x00007f5e778f7000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;http-nio-9026-exec-9&quot; #54 daemon prio=5 os_prio=0 tid=0x00007f5ed62a3000 nid=0x2032 waiting on condition [0x00007f5e779f8000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;http-nio-9026-exec-8&quot; #53 daemon prio=5 os_prio=0 tid=0x00007f5ed62a1000 nid=0x2031 waiting on condition [0x00007f5e77af9000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;http-nio-9026-exec-7&quot; #52 daemon prio=5 os_prio=0 tid=0x00007f5ed629f800 nid=0x2030 waiting on condition [0x00007f5e77bfa000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;http-nio-9026-exec-6&quot; #51 daemon prio=5 os_prio=0 tid=0x00007f5ed629d800 nid=0x202f waiting on condition [0x00007f5e77cfb000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;http-nio-9026-exec-5&quot; #50 daemon prio=5 os_prio=0 tid=0x00007f5ed629c000 nid=0x202e waiting on condition [0x00007f5e77dfc000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;http-nio-9026-exec-4&quot; #49 daemon prio=5 os_prio=0 tid=0x00007f5ed629a000 nid=0x202d waiting on condition [0x00007f5e77efd000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;http-nio-9026-exec-3&quot; #48 daemon prio=5 os_prio=0 tid=0x00007f5ed6298800 nid=0x202c waiting on condition [0x00007f5e77ffe000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;http-nio-9026-exec-2&quot; #47 daemon prio=5 os_prio=0 tid=0x00007f5ed6296800 nid=0x202b waiting on condition [0x00007f5e7c151000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;http-nio-9026-exec-1&quot; #46 daemon prio=5 os_prio=0 tid=0x00007f5ed6295000 nid=0x202a waiting on condition [0x00007f5e7c252000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1dde1a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    ...\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;NioBlockingSelector.BlockPoller-1&quot; #45 daemon prio=5 os_prio=0 tid=0x00007f5ed6293800 nid=0x2029 runnable [0x00007f5e7c353000]\n   java.lang.Thread.State: RUNNABLE\n    at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)\n    at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)\n    at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)\n    at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)\n    - locked &lt;0x00000000e1e205d0&gt; (a sun.nio.ch.Util$3)\n    - locked &lt;0x00000000e1e205c0&gt; (a java.util.Collections$UnmodifiableSet)\n    - locked &lt;0x00000000e1e20498&gt; (a sun.nio.ch.EPollSelectorImpl)\n    at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)\n    at org.apache.tomcat.util.net.NioBlockingSelector$BlockPoller.run(NioBlockingSelector.java:298)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;pool-8-thread-1&quot; #44 prio=5 os_prio=0 tid=0x00007f5ed6272800 nid=0x2028 waiting on condition [0x00007f5e7c454000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e202aa70&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;DiscoveryClient-InstanceInfoReplicator-0&quot; #43 daemon prio=5 os_prio=0 tid=0x00007f5ed6249000 nid=0x2027 waiting on condition [0x00007f5e7c555000]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1f5f728&gt; (a java.util.concurrent.SynchronousQueue$TransferQueue)\n    at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n    at java.util.concurrent.SynchronousQueue$TransferQueue.awaitFulfill(SynchronousQueue.java:764)\n    at java.util.concurrent.SynchronousQueue$TransferQueue.transfer(SynchronousQueue.java:695)\n    at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n    at com.zaxxer.hikari.util.ConcurrentBag.borrow(ConcurrentBag.java:157)\n    at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:166)\n    at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:148)\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)\n    at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:151)\n    at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:115)\n    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:78)\n    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:324)\n    at org.springframework.boot.actuate.jdbc.DataSourceHealthIndicator.getProduct(DataSourceHealthIndicator.java:122)\n    at org.springframework.boot.actuate.jdbc.DataSourceHealthIndicator.doDataSourceHealthCheck(DataSourceHealthIndicator.java:109)\n    at org.springframework.boot.actuate.jdbc.DataSourceHealthIndicator.doHealthCheck(DataSourceHealthIndicator.java:104)\n    at org.springframework.boot.actuate.health.AbstractHealthIndicator.health(AbstractHealthIndicator.java:84)\n    at org.springframework.boot.actuate.health.CompositeHealthIndicator.health(CompositeHealthIndicator.java:68)\n    at org.springframework.boot.actuate.health.CompositeHealthIndicator.health(CompositeHealthIndicator.java:68)\n    at org.springframework.cloud.netflix.eureka.EurekaHealthCheckHandler.getHealthStatus(EurekaHealthCheckHandler.java:103)\n    at org.springframework.cloud.netflix.eureka.EurekaHealthCheckHandler.getStatus(EurekaHealthCheckHandler.java:99)\n    at com.netflix.discovery.DiscoveryClient.refreshInstanceInfo(DiscoveryClient.java:1382)\n    at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:117)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - &lt;0x00000000e1e686a8&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)\n\n&quot;AsyncResolver-bootstrap-0&quot; #40 daemon prio=5 os_prio=0 tid=0x00007f5ed61fb000 nid=0x2024 waiting on condition [0x00007f5e7ca58000]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1dbf718&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;Eureka-JerseyClient-Conn-Cleaner2&quot; #39 daemon prio=5 os_prio=0 tid=0x00007f5ed61da000 nid=0x2023 waiting on condition [0x00007f5e7dfae000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e1fcbac8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;Java2D Disposer&quot; #37 daemon prio=10 os_prio=0 tid=0x00007f5dfc291800 nid=0x201b in Object.wait() [0x00007f5e7d359000]\n   java.lang.Thread.State: WAITING (on object monitor)\n    at java.lang.Object.wait(Native Method)\n    - waiting on &lt;0x00000000e128e7a8&gt; (a java.lang.ref.ReferenceQueue$Lock)\n    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143)\n    - locked &lt;0x00000000e128e7a8&gt; (a java.lang.ref.ReferenceQueue$Lock)\n    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:164)\n    at sun.java2d.Disposer.run(Disposer.java:148)\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;container-0&quot; #33 prio=5 os_prio=0 tid=0x00007f5ed5d5d000 nid=0x2017 waiting on condition [0x00007f5e7e8af000]\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\n    at java.lang.Thread.sleep(Native Method)\n    at org.apache.catalina.core.StandardServer.await(StandardServer.java:427)\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer$1.run(TomcatWebServer.java:182)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;spring.cloud.inetutils&quot; #31 daemon prio=5 os_prio=0 tid=0x00007f5e10207000 nid=0x2011 waiting on condition [0x00007f5e7eab1000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e13c7088&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;Thread-7&quot; #28 daemon prio=9 os_prio=0 tid=0x00007f5e2c013000 nid=0x200e waiting on condition [0x00007f5e7efb4000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e105b5c0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\n    at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\n    at org.LatencyUtils.PauseDetector$PauseDetectorThread.run(PauseDetector.java:85)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;Thread-3&quot; #22 prio=5 os_prio=0 tid=0x00007f5ed4f1b800 nid=0x2004 waiting on condition [0x00007f5e84b8e000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000e055b3c8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    ...\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;Thread-2&quot; #21 daemon prio=5 os_prio=0 tid=0x00007f5ed4f1a000 nid=0x2003 runnable [0x00007f5e85f68000]\n   java.lang.Thread.State: RUNNABLE\n    at sun.nio.fs.LinuxWatchService.poll(Native Method)\n    at sun.nio.fs.LinuxWatchService.access$600(LinuxWatchService.java:47)\n    at sun.nio.fs.LinuxWatchService$Poller.run(LinuxWatchService.java:314)\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;Service Thread&quot; #17 daemon prio=9 os_prio=0 tid=0x00007f5ed4389800 nid=0x1fff runnable [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;C1 CompilerThread11&quot; #16 daemon prio=9 os_prio=0 tid=0x00007f5ed437c800 nid=0x1ffe waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;C1 CompilerThread10&quot; #15 daemon prio=9 os_prio=0 tid=0x00007f5ed437a800 nid=0x1ffd waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;C1 CompilerThread9&quot; #14 daemon prio=9 os_prio=0 tid=0x00007f5ed4378000 nid=0x1ffc waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;C1 CompilerThread8&quot; #13 daemon prio=9 os_prio=0 tid=0x00007f5ed4376000 nid=0x1ffb waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;C2 CompilerThread7&quot; #12 daemon prio=9 os_prio=0 tid=0x00007f5ed4374000 nid=0x1ffa waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;C2 CompilerThread6&quot; #11 daemon prio=9 os_prio=0 tid=0x00007f5ed4371800 nid=0x1ff9 waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;C2 CompilerThread5&quot; #10 daemon prio=9 os_prio=0 tid=0x00007f5ed436f800 nid=0x1ff8 waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;C2 CompilerThread4&quot; #9 daemon prio=9 os_prio=0 tid=0x00007f5ed4365800 nid=0x1ff7 waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;C2 CompilerThread3&quot; #8 daemon prio=9 os_prio=0 tid=0x00007f5ed4363800 nid=0x1ff6 waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;C2 CompilerThread2&quot; #7 daemon prio=9 os_prio=0 tid=0x00007f5ed4361000 nid=0x1ff5 waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;C2 CompilerThread1&quot; #6 daemon prio=9 os_prio=0 tid=0x00007f5ed435f800 nid=0x1ff4 waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;C2 CompilerThread0&quot; #5 daemon prio=9 os_prio=0 tid=0x00007f5ed435c800 nid=0x1ff3 waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;Signal Dispatcher&quot; #4 daemon prio=9 os_prio=0 tid=0x00007f5ed435b000 nid=0x1ff2 runnable [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;Finalizer&quot; #3 daemon prio=8 os_prio=0 tid=0x00007f5ed4328800 nid=0x1ff1 in Object.wait() [0x00007f5e87bfa000]\n   java.lang.Thread.State: WAITING (on object monitor)\n    at java.lang.Object.wait(Native Method)\n    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143)\n    - locked &lt;0x00000000e001e0f8&gt; (a java.lang.ref.ReferenceQueue$Lock)\n    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:164)\n    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:209)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;Reference Handler&quot; #2 daemon prio=10 os_prio=0 tid=0x00007f5ed4323800 nid=0x1ff0 in Object.wait() [0x00007f5e87cfb000]\n   java.lang.Thread.State: WAITING (on object monitor)\n    at java.lang.Object.wait(Native Method)\n    at java.lang.Object.wait(Object.java:502)\n    at java.lang.ref.Reference.tryHandlePending(Reference.java:191)\n    - locked &lt;0x00000000e0021a50&gt; (a java.lang.ref.Reference$Lock)\n    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:153)\n\n   Locked ownable synchronizers:\n    - None\n\n&quot;VM Thread&quot; os_prio=0 tid=0x00007f5ed431c000 nid=0x1fef runnable \n\n&quot;GC task thread#0 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4020000 nid=0x1fdd runnable \n\n&quot;GC task thread#1 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4022000 nid=0x1fde runnable \n\n&quot;GC task thread#2 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4023800 nid=0x1fdf runnable \n\n&quot;GC task thread#3 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4025800 nid=0x1fe0 runnable \n\n&quot;GC task thread#4 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4027000 nid=0x1fe1 runnable \n\n&quot;GC task thread#5 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4029000 nid=0x1fe2 runnable \n\n&quot;GC task thread#6 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed402a800 nid=0x1fe3 runnable \n\n&quot;GC task thread#7 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed402c800 nid=0x1fe4 runnable \n\n&quot;GC task thread#8 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed402e000 nid=0x1fe5 runnable \n\n&quot;GC task thread#9 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4030000 nid=0x1fe6 runnable \n\n&quot;GC task thread#10 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4031800 nid=0x1fe7 runnable \n\n&quot;GC task thread#11 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4033800 nid=0x1fe8 runnable \n\n&quot;GC task thread#12 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4035000 nid=0x1fe9 runnable \n\n&quot;GC task thread#13 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4037000 nid=0x1fea runnable \n\n&quot;GC task thread#14 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed4038800 nid=0x1feb runnable \n\n&quot;GC task thread#15 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed403a800 nid=0x1fec runnable \n\n&quot;GC task thread#16 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed403c000 nid=0x1fed runnable \n\n&quot;GC task thread#17 (ParallelGC)&quot; os_prio=0 tid=0x00007f5ed403e000 nid=0x1fee runnable \n\n&quot;VM Periodic Task Thread&quot; os_prio=0 tid=0x00007f5ed438c800 nid=0x2000 waiting on condition \n\nJNI global references: 1656\n</code></pre>\n<p>access any api of the application using <code>curl</code> in the command line, for example: <code>curl http://127.0.0.1:9026/actuator/env</code>, unable to respond, no timeout has been reached, and it hangs there. Using <code>netstat</code> to troubleshoot, the <code>curl</code> request status is <code>ESTABLISHED</code>. How can I find out where the problem is?</p>\n"},{"tags":["java","bouncycastle","openssh"],"comments":[{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1697555352,"post_id":77307946,"comment_id":136293184,"body_markdown":"I suspect that this is not possible out-of-the-box even with BouncyCastle. You will probably have to implement this yourself, analogous to the non-encrypted key code (see [here](https://github.com/bcgit/bc-java/blob/main/core/src/main/java/org/bouncycastle/crypto/util/OpenSSHPrivateKeyUtil.java#L101)). Are you limited to BouncyCastle, or can you also use other libraries (there are libraries that can generate encrypted OpenSSH keys)?","body":"I suspect that this is not possible out-of-the-box even with BouncyCastle. You will probably have to implement this yourself, analogous to the non-encrypted key code (see <a href=\"https://github.com/bcgit/bc-java/blob/main/core/src/main/java/org/bouncycastle/crypto/util/OpenSSHPrivateKeyUtil.java#L101\" rel=\"nofollow noreferrer\">here</a>). Are you limited to BouncyCastle, or can you also use other libraries (there are libraries that can generate encrypted OpenSSH keys)?"},{"owner":{"account_id":23452190,"reputation":9,"user_id":17508203,"display_name":"Evgenii Sokolov"},"score":0,"creation_date":1697561835,"post_id":77307946,"comment_id":136294341,"body_markdown":"@Topaco Thanks for your reply. You&#39;ve given me some ideas. I found a resource describing [SSH key formats](https://www.thedigitalcatonline.com/blog/2021/06/03/public-key-cryptography-openssh-private-keys/) in sufficient detail. Probably on the basis of this information I will be able to write my own library. I&#39;m not limited to BouncyCastle, it&#39;s just that I don&#39;t know anything else.","body":"@Topaco Thanks for your reply. You&#39;ve given me some ideas. I found a resource describing <a href=\"https://www.thedigitalcatonline.com/blog/2021/06/03/public-key-cryptography-openssh-private-keys/\" rel=\"nofollow noreferrer\">SSH key formats</a> in sufficient detail. Probably on the basis of this information I will be able to write my own library. I&#39;m not limited to BouncyCastle, it&#39;s just that I don&#39;t know anything else."},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1697609345,"post_id":77307946,"comment_id":136299648,"body_markdown":"If you can&#39;t find a solution with BC or it&#39;s too elaborate, and since you&#39;re not restricted to BC, I&#39;ll post a solution with the *maverick-synergy* library, which can be used to create encrypted OpenSSH keys relatively easily.","body":"If you can&#39;t find a solution with BC or it&#39;s too elaborate, and since you&#39;re not restricted to BC, I&#39;ll post a solution with the <i>maverick-synergy</i> library, which can be used to create encrypted OpenSSH keys relatively easily."}],"answers":[{"tags":[],"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697615540,"creation_date":1697567578,"answer_id":77311457,"question_id":77307946,"body_markdown":"If you can&#39;t find a way to export encrypted OpenSSH keys with BouncyCastle: A library that allows exporting encrypted OpenSSH keys out-of-the-box is [sshtools/maverick-synergy][1].\r\n\r\nExample of generating an Ed25519 key pair with export of the private encrypted key and the public key:\r\n\r\n```javaimport java.io.File;\r\nimport java.security.KeyPair;\r\nimport java.security.KeyPairGenerator;\r\n\r\nimport com.sshtools.common.publickey.SshKeyUtils;\r\nimport com.sshtools.common.ssh.components.SshKeyPair;\r\nimport com.sshtools.common.ssh.components.jce.JCEAlgorithms;\r\nimport com.sshtools.common.ssh.components.jce.SshEd25519PrivateKeyJCE;\r\nimport com.sshtools.common.ssh.components.jce.SshEd25519PublicKeyJCE;\r\n\r\n...\r\n\r\n// Create Ed25519 key pair\r\nKeyPairGenerator keyGen = KeyPairGenerator.getInstance(JCEAlgorithms.ED25519);\r\nKeyPair kp = keyGen.generateKeyPair();\r\nSshKeyPair pair = new SshKeyPair();\r\npair.setPrivateKey(new SshEd25519PrivateKeyJCE(kp.getPrivate()));\r\npair.setPublicKey(new SshEd25519PublicKeyJCE(kp.getPublic()));\r\n\r\n// Export\r\nSystem.out.println(SshKeyUtils.getFormattedKey(pair, &quot;my passphrase&quot;));\r\nSystem.out.println(SshKeyUtils.getFormattedKey(pair.getPublicKey(), &quot;my comment&quot;));\r\n```\r\n\r\nwith the following sample output:\r\n\r\n```none\r\n-----BEGIN OPENSSH PRIVATE KEY-----\r\nb3BlbnNzaC1rZXktdjEAAAAACmFlczI1Ni1jdHIAAAAGYmNyeXB0AAAAGAAAABDN\r\n3FuF2G77g48ktctKG3NTAAAAEAAAAAEAAAAzAAAAC3NzaC1lZDI1NTE5AAAAIO+e\r\nPM91Qbd6b6bF8sKfOJiox19K1llf8UwUbUayPmRHAAAAkD7rMYeeAKeyiwEU1uy2\r\niNsXTTWHR2jK2abcQ3Qndw1lQBmM+QfmdefnoN4HToSuSVzybaLBRoHl5vybFq74\r\n5JaZ9ZQitXBrBLX91imjGmHDPr/nOYWo57Yuh05gPnx96MZHo61Ze6HNWhZ73xBT\r\n6ve7YAxCDO8LjGjyC17k2/0HMcPOwbV8J39f5KTeXNf6vA==\r\n-----END OPENSSH PRIVATE KEY-----\r\n\r\nssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIO+ePM91Qbd6b6bF8sKfOJiox19K1llf8UwUbUayPmRH my comment\r\n```\r\n\r\n---------------\r\n\r\nThe format of the OpenSSH private key is described e.g. [here][2] (and in more detail, especially concerning the encryption logic, [here][3]). If the encrypted OpenSSH private key is Base64 decoded, the individual parts can be identified:\r\n\r\n```none\r\n6f70656e7373682d6b65792d763100\t\t\t\t\t\t\t\t&quot;openssh-key-v1&quot; + 0x00\r\n0000000a 6165733235362d637472\t\t\t\t\t\t\t\tlength: 0x0a, &quot;aes256-ctr&quot;\r\n00000006 626372797074\t\t\t\t\t\t\t\t\t\tlength: 0x06, &quot;bcrypt&quot;\r\n00000018 00000010cddc5b85d86efb838f24b5cb4a1b735300000010\ttotal length: 0x18, salt length: 0x10 + &lt;salt, here 0xcddc5b85d86efb838f24b5cb4a1b7353&gt; + &lt;rounds, here 0x10&gt;\r\n00000001 \r\n00000033 0000000b7373682d6564323535313900000020ef9e3ccf7541b77a6fa6c5f2c29f3898a8c75f4ad6595ff14c146d46b23e6447\r\n00000090 3eeb31879e00a7b28b0114d6ecb688db174d35874768cad9a6dc437427770d6540198cf907e675e7e7a0de074e84ae495cf26da2c14681e5e6fc9b16aef8e49699f59422b5706b04b5fdd629a31a61c33ebfe73985a8e7b62e874e603e7c7de8c647a3ad597ba1cd5a167bdf1053eaf7bb600c420cef0b8c68f20b5ee4dbfd0731c3cec1b57c277f5fe4a4de5cd7fabc\r\n```\r\n\r\nThe second line contains a description of the encryption algorithm, the third a description of the key derivation function (KDF) used, and the fourth a description of the KDF options.  \r\nIn the case of an *un*encrypted key, the lines for algorithm and KDF are each *0x000000046e6f6e65* (i.e. length: 0x04 + &quot;none&quot;) and the line with the KDF options is *0x00000000* (i.e. length: 0).  \r\nFor the generated key these values are different and show that the key is encrypted with AES-256 in CTR mode and *bcrypt* (more precisely, an OpenSSH specific variant of *bcrypt*) is applied as KDF.\r\n\r\n[1]: https://github.com/sshtools/maverick-synergy\r\n[2]: https://coolaj86.com/articles/the-openssh-private-key-format/\r\n[3]: https://dnaeon.github.io/openssh-private-key-binary-format/","title":"How to create OpenSSH private key with password using java BouncyCastle","body":"<p>If you can't find a way to export encrypted OpenSSH keys with BouncyCastle: A library that allows exporting encrypted OpenSSH keys out-of-the-box is <a href=\"https://github.com/sshtools/maverick-synergy\" rel=\"nofollow noreferrer\">sshtools/maverick-synergy</a>.</p>\n<p>Example of generating an Ed25519 key pair with export of the private encrypted key and the public key:</p>\n<pre><code>import java.security.KeyPair;\nimport java.security.KeyPairGenerator;\n\nimport com.sshtools.common.publickey.SshKeyUtils;\nimport com.sshtools.common.ssh.components.SshKeyPair;\nimport com.sshtools.common.ssh.components.jce.JCEAlgorithms;\nimport com.sshtools.common.ssh.components.jce.SshEd25519PrivateKeyJCE;\nimport com.sshtools.common.ssh.components.jce.SshEd25519PublicKeyJCE;\n\n...\n\n// Create Ed25519 key pair\nKeyPairGenerator keyGen = KeyPairGenerator.getInstance(JCEAlgorithms.ED25519);\nKeyPair kp = keyGen.generateKeyPair();\nSshKeyPair pair = new SshKeyPair();\npair.setPrivateKey(new SshEd25519PrivateKeyJCE(kp.getPrivate()));\npair.setPublicKey(new SshEd25519PublicKeyJCE(kp.getPublic()));\n\n// Export\nSystem.out.println(SshKeyUtils.getFormattedKey(pair, &quot;my passphrase&quot;));\nSystem.out.println(SshKeyUtils.getFormattedKey(pair.getPublicKey(), &quot;my comment&quot;));\n</code></pre>\n<p>with the following sample output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAACmFlczI1Ni1jdHIAAAAGYmNyeXB0AAAAGAAAABDN\n3FuF2G77g48ktctKG3NTAAAAEAAAAAEAAAAzAAAAC3NzaC1lZDI1NTE5AAAAIO+e\nPM91Qbd6b6bF8sKfOJiox19K1llf8UwUbUayPmRHAAAAkD7rMYeeAKeyiwEU1uy2\niNsXTTWHR2jK2abcQ3Qndw1lQBmM+QfmdefnoN4HToSuSVzybaLBRoHl5vybFq74\n5JaZ9ZQitXBrBLX91imjGmHDPr/nOYWo57Yuh05gPnx96MZHo61Ze6HNWhZ73xBT\n6ve7YAxCDO8LjGjyC17k2/0HMcPOwbV8J39f5KTeXNf6vA==\n-----END OPENSSH PRIVATE KEY-----\n\nssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIO+ePM91Qbd6b6bF8sKfOJiox19K1llf8UwUbUayPmRH my comment\n</code></pre>\n<hr />\n<p>The format of the OpenSSH private key is described e.g. <a href=\"https://coolaj86.com/articles/the-openssh-private-key-format/\" rel=\"nofollow noreferrer\">here</a> (and in more detail, especially concerning the encryption logic, <a href=\"https://dnaeon.github.io/openssh-private-key-binary-format/\" rel=\"nofollow noreferrer\">here</a>). If the encrypted OpenSSH private key is Base64 decoded, the individual parts can be identified:</p>\n<pre class=\"lang-none prettyprint-override\"><code>6f70656e7373682d6b65792d763100                              &quot;openssh-key-v1&quot; + 0x00\n0000000a 6165733235362d637472                               length: 0x0a, &quot;aes256-ctr&quot;\n00000006 626372797074                                       length: 0x06, &quot;bcrypt&quot;\n00000018 00000010cddc5b85d86efb838f24b5cb4a1b735300000010   total length: 0x18, salt length: 0x10 + &lt;salt, here 0xcddc5b85d86efb838f24b5cb4a1b7353&gt; + &lt;rounds, here 0x10&gt;\n00000001 \n00000033 0000000b7373682d6564323535313900000020ef9e3ccf7541b77a6fa6c5f2c29f3898a8c75f4ad6595ff14c146d46b23e6447\n00000090 3eeb31879e00a7b28b0114d6ecb688db174d35874768cad9a6dc437427770d6540198cf907e675e7e7a0de074e84ae495cf26da2c14681e5e6fc9b16aef8e49699f59422b5706b04b5fdd629a31a61c33ebfe73985a8e7b62e874e603e7c7de8c647a3ad597ba1cd5a167bdf1053eaf7bb600c420cef0b8c68f20b5ee4dbfd0731c3cec1b57c277f5fe4a4de5cd7fabc\n</code></pre>\n<p>The second line contains a description of the encryption algorithm, the third a description of the key derivation function (KDF) used, and the fourth a description of the KDF options.<br />\nIn the case of an <em>un</em>encrypted key, the lines for algorithm and KDF are each <em>0x000000046e6f6e65</em> (i.e. length: 0x04 + &quot;none&quot;) and the line with the KDF options is <em>0x00000000</em> (i.e. length: 0).<br />\nFor the generated key these values are different and show that the key is encrypted with AES-256 in CTR mode and <em>bcrypt</em> (more precisely, an OpenSSH specific variant of <em>bcrypt</em>) is applied as KDF.</p>\n"}],"owner":{"account_id":23452190,"reputation":9,"user_id":17508203,"display_name":"Evgenii Sokolov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697615540,"creation_date":1697536453,"question_id":77307946,"body_markdown":"Simple way to create OpenSSH keys with non password encrypted private key:\r\n\r\n```\r\n    AsymmetricCipherKeyPairGenerator gen = new Ed25519KeyPairGenerator();\r\n    gen.init(new KeyGenerationParameters(new SecureRandom(), 255));\r\n    AsymmetricCipherKeyPair kp = gen.generateKeyPair();\r\n    byte[] bprv = OpenSSHPrivateKeyUtil.encodePrivateKey(kp.getPrivate());\r\n    StringWriter sw = new StringWriter();\r\n    PemWriter w = new PemWriter(sw);\r\n    w.writeObject(new PemObject(&quot;OPENSSH PRIVATE KEY&quot;, bprv)); w.close();\r\n    String privateKey = sw.toString(); sw.close();\r\n    System.out.println(privateKey);\r\n    byte[] bpub = OpenSSHPublicKeyUtil.encodePublicKey(kp.getPublic());\r\n    sw = new StringWriter();\r\n    w = new PemWriter(sw);\r\n    w.writeObject(new PemObject(&quot;SSH2 PUBLIC KEY&quot;, bpub)); w.close();\r\n    String publicKey = sw.toString(); sw.close();\r\n```\r\nBut how to create private key encrypted with password? Is it possible? \r\n","title":"How to create OpenSSH private key with password using java BouncyCastle","body":"<p>Simple way to create OpenSSH keys with non password encrypted private key:</p>\n<pre><code>    AsymmetricCipherKeyPairGenerator gen = new Ed25519KeyPairGenerator();\n    gen.init(new KeyGenerationParameters(new SecureRandom(), 255));\n    AsymmetricCipherKeyPair kp = gen.generateKeyPair();\n    byte[] bprv = OpenSSHPrivateKeyUtil.encodePrivateKey(kp.getPrivate());\n    StringWriter sw = new StringWriter();\n    PemWriter w = new PemWriter(sw);\n    w.writeObject(new PemObject(&quot;OPENSSH PRIVATE KEY&quot;, bprv)); w.close();\n    String privateKey = sw.toString(); sw.close();\n    System.out.println(privateKey);\n    byte[] bpub = OpenSSHPublicKeyUtil.encodePublicKey(kp.getPublic());\n    sw = new StringWriter();\n    w = new PemWriter(sw);\n    w.writeObject(new PemObject(&quot;SSH2 PUBLIC KEY&quot;, bpub)); w.close();\n    String publicKey = sw.toString(); sw.close();\n</code></pre>\n<p>But how to create private key encrypted with password? Is it possible?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","swagger-ui"],"answers":[{"tags":[],"owner":{"account_id":21730227,"reputation":63,"user_id":16039091,"display_name":"Imesh Isuranga"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697584345,"creation_date":1697576314,"answer_id":77312222,"question_id":77312185,"body_markdown":"Try using @ApiOperation(value = &quot;Get the count of faces in an image&quot;) annotation.\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/facedetect&quot;)\r\n    @CrossOrigin\r\n    public class FaceDetectController {\r\n    \r\n        @Autowired\r\n        FaceDetectService faceDetectService;\r\n    \r\n        @ApiOperation(value = &quot;Get the count of faces in an image&quot;)\r\n        @GetMapping(&quot;/get&quot;)\r\n        public String getFaceCount(@RequestParam(&quot;image&quot;) MultipartFile image) throws IOException {\r\n            faceDetectService.getFaceCount(image);\r\n            return &quot;Count&quot;;\r\n        }\r\n    }\r\n\r\nIf it is not useful plz try like below.\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/facedetect&quot;)\r\n    @CrossOrigin\r\n    public class FaceDetectController {\r\n    \r\n        @Autowired\r\n        FaceDetectService faceDetectService;\r\n    \r\n        @PostMapping(&quot;/get&quot;)\r\n        public String getFaceCount(@RequestParam(&quot;image&quot;) MultipartFile image) throws IOException {\r\n            String faceCount = faceDetectService.getFaceCount(image);\r\n            return &quot;Count : &quot; +faceCount;\r\n        }\r\n    \r\n        @GetMapping(&quot;/get&quot;)\r\n        public String getFaceCount(@RequestParam(&quot;imagePath&quot;) String imagePath) throws IOException {\r\n            // Process imagePath and return the result\r\n            String faceCount = faceDetectService.getFaceCountUsingOnlyPath(imagePath);\r\n            return &quot;Count:-- &quot; + faceCount;\r\n        }\r\n\r\nNow you can give image path like below.\r\n\r\n    http://localhost:8080/api/facedetect/get?imagePath={give image path}\r\n\r\nThen you cn give image path in Swagger ui.Check below image.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/14lmG.png\r\n\r\n\r\nCheck below link for more info..\r\n\r\nhttps://stackoverflow.com/questions/35401304/requestparam-annotated-method-with-swagger-ui-not-showing-description","title":"Why SwaggerUI show Validation error after uploading image?","body":"<p>Try using @ApiOperation(value = &quot;Get the count of faces in an image&quot;) annotation.</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/facedetect&quot;)\n@CrossOrigin\npublic class FaceDetectController {\n\n    @Autowired\n    FaceDetectService faceDetectService;\n\n    @ApiOperation(value = &quot;Get the count of faces in an image&quot;)\n    @GetMapping(&quot;/get&quot;)\n    public String getFaceCount(@RequestParam(&quot;image&quot;) MultipartFile image) throws IOException {\n        faceDetectService.getFaceCount(image);\n        return &quot;Count&quot;;\n    }\n}\n</code></pre>\n<p>If it is not useful plz try like below.</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/facedetect&quot;)\n@CrossOrigin\npublic class FaceDetectController {\n\n    @Autowired\n    FaceDetectService faceDetectService;\n\n    @PostMapping(&quot;/get&quot;)\n    public String getFaceCount(@RequestParam(&quot;image&quot;) MultipartFile image) throws IOException {\n        String faceCount = faceDetectService.getFaceCount(image);\n        return &quot;Count : &quot; +faceCount;\n    }\n\n    @GetMapping(&quot;/get&quot;)\n    public String getFaceCount(@RequestParam(&quot;imagePath&quot;) String imagePath) throws IOException {\n        // Process imagePath and return the result\n        String faceCount = faceDetectService.getFaceCountUsingOnlyPath(imagePath);\n        return &quot;Count:-- &quot; + faceCount;\n    }\n</code></pre>\n<p>Now you can give image path like below.</p>\n<pre><code>http://localhost:8080/api/facedetect/get?imagePath={give image path}\n</code></pre>\n<p>Then you cn give image path in Swagger ui.Check below image.</p>\n<p><a href=\"https://i.stack.imgur.com/14lmG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/14lmG.png\" alt=\"enter image description here\" /></a></p>\n<p>Check below link for more info..</p>\n<p><a href=\"https://stackoverflow.com/questions/35401304/requestparam-annotated-method-with-swagger-ui-not-showing-description\">@RequestParam annotated method with swagger ui not showing description</a></p>\n"},{"tags":[],"owner":{"account_id":8884226,"reputation":514,"user_id":6633045,"display_name":"phuongnq1995"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697604593,"creation_date":1697604534,"answer_id":77313548,"question_id":77312185,"body_markdown":"Value of consumes should should be &quot;multipart/form-data&quot;. consumes=&quot;multipart/form-data&quot; &amp; method should be POST in case image is too large. Let&#39;s specify your method with \r\n\r\n    @RequestMapping(method = RequestMethod.POST, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\r\n\r\nRefer to this post https://stackoverflow.com/a/47519825/6633045","title":"Why SwaggerUI show Validation error after uploading image?","body":"<p>Value of consumes should should be &quot;multipart/form-data&quot;. consumes=&quot;multipart/form-data&quot; &amp; method should be POST in case image is too large. Let's specify your method with</p>\n<pre><code>@RequestMapping(method = RequestMethod.POST, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\n</code></pre>\n<p>Refer to this post <a href=\"https://stackoverflow.com/a/47519825/6633045\">https://stackoverflow.com/a/47519825/6633045</a></p>\n"}],"owner":{"account_id":29695140,"reputation":5,"user_id":22758600,"display_name":"Bitwhiz Acc6"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"answer_count":2,"score":-3,"last_activity_date":1697615182,"creation_date":1697575803,"question_id":77312185,"body_markdown":"I have created API using Spring Boot for uploading images and then returning how many faces are in that image.\r\n\r\nBelow is my controller class:\r\n\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api/facedetect&quot;)\r\n@CrossOrigin\r\npublic class FaceDetectController {\r\n\r\n    @Autowired\r\n    FaceDetectService faceDetectService;\r\n\r\n    @GetMapping(&quot;/get&quot;)\r\n    public String getFaceCount(@RequestParam(&quot;image&quot;) MultipartFile image) throws IOException {\r\n        String faceCount = faceDetectService.getFaceCount(image);\r\n        return &quot;Count + &quot; +faceCount;\r\n    }\r\n\r\n\r\n}\r\n```\r\nAfter uploading the image `getFaceCount` method will return `faceCount`. \r\n\r\nAfter I generated swagger UI documentation for it. After uploading the image it shows the below error.\r\n\r\n![Swagger UI error](https://i.stack.imgur.com/TT5EA.png)\r\n\r\n\r\n\r\nI think this is because of `@RequestParam(&quot;image&quot;)` annotation. Because when I used POSTMAN it didn&#39;t show any error.\r\n\r\n![Postman](https://i.stack.imgur.com/IBvUp.png)\r\n\r\n\r\nPlease help me fix this.","title":"Why SwaggerUI show Validation error after uploading image?","body":"<p>I have created API using Spring Boot for uploading images and then returning how many faces are in that image.</p>\n<p>Below is my controller class:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/facedetect&quot;)\n@CrossOrigin\npublic class FaceDetectController {\n\n    @Autowired\n    FaceDetectService faceDetectService;\n\n    @GetMapping(&quot;/get&quot;)\n    public String getFaceCount(@RequestParam(&quot;image&quot;) MultipartFile image) throws IOException {\n        String faceCount = faceDetectService.getFaceCount(image);\n        return &quot;Count + &quot; +faceCount;\n    }\n\n\n}\n</code></pre>\n<p>After uploading the image <code>getFaceCount</code> method will return <code>faceCount</code>.</p>\n<p>After I generated swagger UI documentation for it. After uploading the image it shows the below error.</p>\n<p><img src=\"https://i.stack.imgur.com/TT5EA.png\" alt=\"Swagger UI error\" /></p>\n<p>I think this is because of <code>@RequestParam(&quot;image&quot;)</code> annotation. Because when I used POSTMAN it didn't show any error.</p>\n<p><img src=\"https://i.stack.imgur.com/IBvUp.png\" alt=\"Postman\" /></p>\n<p>Please help me fix this.</p>\n"},{"tags":["java","xamarin"],"comments":[{"owner":{"account_id":2585558,"reputation":1311,"user_id":2241348,"display_name":"abalos"},"score":2,"creation_date":1494959896,"post_id":44009058,"comment_id":75046452,"body_markdown":"What happens if you type &quot;java -version&quot; into the terminal?","body":"What happens if you type &quot;java -version&quot; into the terminal?"},{"owner":{"account_id":1288640,"reputation":8167,"user_id":1241193,"display_name":"Bob Dalgleish"},"score":2,"creation_date":1494959961,"post_id":44009058,"comment_id":75046483,"body_markdown":"What happens if you type `echo $JAVA_HOME` into the terminal?","body":"What happens if you type <code>echo $JAVA_HOME</code> into the terminal?"},{"owner":{"account_id":1384870,"reputation":5570,"user_id":1317117,"display_name":"andih"},"score":0,"creation_date":1494960255,"post_id":44009058,"comment_id":75046674,"body_markdown":"@BobDalgleish the environment variable `JAVA_HOME` does not need to exist.","body":"@BobDalgleish the environment variable <code>JAVA_HOME</code> does not need to exist."},{"owner":{"account_id":9110022,"reputation":1807,"user_id":6779114,"accept_rate":91,"display_name":"Mauro Piccotti"},"score":3,"creation_date":1494960708,"post_id":44009058,"comment_id":75046928,"body_markdown":"You need to install the jdk, not only the jre","body":"You need to install the jdk, not only the jre"},{"owner":{"account_id":80795,"reputation":8986,"user_id":228208,"accept_rate":88,"display_name":"Kylar"},"score":0,"creation_date":1494961869,"post_id":44009058,"comment_id":75047561,"body_markdown":"This probably belongs on https://apple.stackexchange.com","body":"This probably belongs on <a href=\"https://apple.stackexchange.com\">apple.stackexchange.com</a>"},{"owner":{"account_id":10912490,"reputation":2975,"user_id":8021418,"display_name":"Gina Gina"},"score":0,"creation_date":1494987455,"post_id":44009058,"comment_id":75056716,"body_markdown":"@abalos same error - No Java runtime present  - requesting to install","body":"@abalos same error - No Java runtime present  - requesting to install"},{"owner":{"account_id":10912490,"reputation":2975,"user_id":8021418,"display_name":"Gina Gina"},"score":0,"creation_date":1494987532,"post_id":44009058,"comment_id":75056740,"body_markdown":"@MauroPiccotti yes i have installed the jdk ..its in the path /Library/Developer/Xamarin/android-sdk/ path","body":"@MauroPiccotti yes i have installed the jdk ..its in the path /Library/Developer/Xamarin/android-sdk/ path"},{"owner":{"account_id":12183171,"reputation":914,"user_id":8894035,"display_name":"Wahab Khan Jadon"},"score":0,"creation_date":1664706581,"post_id":44009058,"comment_id":130529210,"body_markdown":"to install a specific version ie for 11 version with homebrew `brew install openjdk@11` and then for setting the path `sudo ln -sfn /opt/homebrew/opt/openjdk@11/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-11.jdk`","body":"to install a specific version ie for 11 version with homebrew <code>brew install openjdk@11</code> and then for setting the path <code>sudo ln -sfn &#47;opt&#47;homebrew&#47;opt&#47;openjdk@11&#47;libexec&#47;openjdk.jdk &#47;Library&#47;Java&#47;JavaVirtualMachines&#47;openjdk-11.jdk</code>"}],"answers":[{"comments":[{"owner":{"account_id":1981751,"reputation":1089,"user_id":1778190,"display_name":"Igor Levicki"},"score":1,"creation_date":1526712756,"post_id":44023051,"comment_id":87860029,"body_markdown":"This is the correct answer -- it is enough to install JRE and set JAVA_HOME to make Java command available in shell.","body":"This is the correct answer -- it is enough to install JRE and set JAVA_HOME to make Java command available in shell."}],"tags":[],"owner":{"account_id":2585558,"reputation":1311,"user_id":2241348,"display_name":"abalos"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1495019059,"creation_date":1495019059,"answer_id":44023051,"question_id":44009058,"body_markdown":"Since it sounds like your JAVA_HOME variable is not set correctly, follow the instructions for setting that. \r\n\r\nhttps://stackoverflow.com/questions/22842743/setting-java-home-environment-variable-on-mac-osx-10-9\r\n\r\nI would imagine once you set this, it will stop complaining.","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>Since it sounds like your JAVA_HOME variable is not set correctly, follow the instructions for setting that. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/22842743/setting-java-home-environment-variable-on-mac-osx-10-9\">Setting JAVA_HOME environment variable on MAC OSX 10.9</a></p>\n\n<p>I would imagine once you set this, it will stop complaining.</p>\n"},{"comments":[{"owner":{"account_id":11253033,"reputation":17925,"user_id":8253662,"display_name":"Mahesh Jamdade"},"score":0,"creation_date":1584601545,"post_id":46828380,"comment_id":107487448,"body_markdown":"I got this error while adding Debug signing certificate SHA-1 keys to firebase ,for mac just download the mac os installer and install it once done, and run the command debug certificate generation command and it works","body":"I got this error while adding Debug signing certificate SHA-1 keys to firebase ,for mac just download the mac os installer and install it once done, and run the command debug certificate generation command and it works"},{"owner":{"account_id":1372683,"reputation":4172,"user_id":1308171,"accept_rate":57,"display_name":"Siddharth"},"score":0,"creation_date":1617116925,"post_id":46828380,"comment_id":118210472,"body_markdown":"yes, you have to install JDK within your Mac OS to get rid of this error.","body":"yes, you have to install JDK within your Mac OS to get rid of this error."},{"owner":{"account_id":1212671,"reputation":1919,"user_id":1180930,"accept_rate":37,"display_name":"jvriesem"},"score":20,"creation_date":1619730918,"post_id":46828380,"comment_id":119001325,"body_markdown":"This doesn&#39;t fix the problem for the latest JDK on macOS 10.15.7.","body":"This doesn&#39;t fix the problem for the latest JDK on macOS 10.15.7."},{"owner":{"account_id":5689111,"reputation":6366,"user_id":4497662,"accept_rate":30,"display_name":"Anuj Gupta"},"score":8,"creation_date":1655283717,"post_id":46828380,"comment_id":128293597,"body_markdown":"This solution didnot work for Monterey (12.4). after installing JDK also $JAVA_HOME is empty","body":"This solution didnot work for Monterey (12.4). after installing JDK also $JAVA_HOME is empty"}],"tags":[],"owner":{"account_id":5340889,"reputation":3550,"user_id":4258051,"accept_rate":67,"display_name":"MrDEV"},"comment_count":4,"down_vote_count":3,"up_vote_count":239,"is_accepted":true,"score":236,"last_activity_date":1697338079,"creation_date":1508410751,"answer_id":46828380,"question_id":44009058,"body_markdown":"You have to install the full JDK, not only the JRE.\r\n\r\nI had the same issue and solved by installing JDK.\r\n\r\nPlease use [this link][1] to download the latest JDK version 21.\r\n\r\n\r\n  [1]: https://www.oracle.com/java/technologies/downloads/","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>You have to install the full JDK, not only the JRE.</p>\n<p>I had the same issue and solved by installing JDK.</p>\n<p>Please use <a href=\"https://www.oracle.com/java/technologies/downloads/\" rel=\"nofollow noreferrer\">this link</a> to download the latest JDK version 21.</p>\n"},{"comments":[{"owner":{"account_id":137113,"reputation":11637,"user_id":341091,"accept_rate":75,"display_name":"Martin"},"score":3,"creation_date":1511874520,"post_id":47034470,"comment_id":82021134,"body_markdown":"But that is a super old Java. Installing it is a security risk as it is not updated any more.","body":"But that is a super old Java. Installing it is a security risk as it is not updated any more."}],"tags":[],"owner":{"display_name":"user8532358"},"comment_count":1,"down_vote_count":3,"up_vote_count":7,"is_accepted":false,"score":4,"last_activity_date":1509452771,"creation_date":1509449909,"answer_id":47034470,"question_id":44009058,"body_markdown":"In newer versions of OS X (especially Yosemite, EL Capitan), Apple has removed Java support for security reasons.\r\nTo fix this you have to do the following.\r\n\r\n 1. Download Java for OS X 2015-001 from this link: https://support.apple.com/kb/dl1572?locale=en_US\r\n 2. Mount the disk image file and install Java 6 runtime for OS X.\r\n\r\n After this you should not be seeing any of the below messages:\r\n\r\n *- Unable to find any JVMs matching version &quot;(null)&quot;*\r\n\r\n *- No Java runtime present, try --request to install.*\r\n \r\n This should resolve the issue for the pop-up shown below:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pmVVf.png","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>In newer versions of OS X (especially Yosemite, EL Capitan), Apple has removed Java support for security reasons.\nTo fix this you have to do the following.</p>\n\n<ol>\n<li>Download Java for OS X 2015-001 from this link: <a href=\"https://support.apple.com/kb/dl1572?locale=en_US\" rel=\"nofollow noreferrer\">https://support.apple.com/kb/dl1572?locale=en_US</a></li>\n<li><p>Mount the disk image file and install Java 6 runtime for OS X.</p>\n\n<p>After this you should not be seeing any of the below messages:</p>\n\n<p><em>- Unable to find any JVMs matching version \"(null)\"</em></p>\n\n<p><em>- No Java runtime present, try --request to install.</em></p>\n\n<p>This should resolve the issue for the pop-up shown below:\n<a href=\"https://i.stack.imgur.com/pmVVf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pmVVf.png\" alt=\"enter image description here\"></a></p></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":4118856,"reputation":2579,"user_id":3379766,"accept_rate":100,"display_name":"Gobe"},"score":0,"creation_date":1536082898,"post_id":51121484,"comment_id":91293618,"body_markdown":"I&#39;m also on High Sierra and unfortunately this did work, although it &quot;fixed&quot; the error message &quot;No Java Runtime present&quot;. I got this, then: &quot;Could not find tools.jar. Please check that /Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home contains a valid JDK installation.&quot;","body":"I&#39;m also on High Sierra and unfortunately this did work, although it &quot;fixed&quot; the error message &quot;No Java Runtime present&quot;. I got this, then: &quot;Could not find tools.jar. Please check that /Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home contains a valid JDK installation.&quot;"}],"tags":[],"owner":{"account_id":4926528,"reputation":969,"user_id":3967633,"display_name":"Oleg Kazakov"},"comment_count":1,"down_vote_count":1,"up_vote_count":84,"is_accepted":false,"score":83,"last_activity_date":1530432129,"creation_date":1530432129,"answer_id":51121484,"question_id":44009058,"body_markdown":"I didn&#39;t need the full JDK, I just needed to make JRE work and none of the other answers provided above worked for me. \r\nMaybe it used to work, but now (1st Jul 2018) it isn&#39;t working. I just kept getting the error and the pop-up.\r\n\r\nI eventually solved this issue by placing the following JAVA_HOME export in ~/.bash_profile:\r\n\r\n    export JAVA_HOME=/Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home\r\n\r\nHope this helps someone.\r\nI&#39;m running Mac OS High Sierra.\r\n","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>I didn't need the full JDK, I just needed to make JRE work and none of the other answers provided above worked for me. \nMaybe it used to work, but now (1st Jul 2018) it isn't working. I just kept getting the error and the pop-up.</p>\n\n<p>I eventually solved this issue by placing the following JAVA_HOME export in ~/.bash_profile:</p>\n\n<pre><code>export JAVA_HOME=/Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home\n</code></pre>\n\n<p>Hope this helps someone.\nI'm running Mac OS High Sierra.</p>\n"},{"tags":[],"owner":{"account_id":7727186,"reputation":4351,"user_id":5969121,"display_name":"atereshkov"},"comment_count":0,"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1651167477,"creation_date":1572160745,"answer_id":58577310,"question_id":44009058,"body_markdown":"If you came across the error when tried to **generate a jks file (keystore)**, so try adding \r\n\r\n    /Applications/Android\\ Studio.app/Contents/jre/Contents/Home/bin/keytool\r\n\r\nbefore running the command, like so:\r\n\r\n    /Applications/Android\\ Studio.app/Contents/jre/Contents/Home/bin/keytool -genkey -v -keystore ~/key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias key","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>If you came across the error when tried to <strong>generate a jks file (keystore)</strong>, so try adding</p>\n<pre><code>/Applications/Android\\ Studio.app/Contents/jre/Contents/Home/bin/keytool\n</code></pre>\n<p>before running the command, like so:</p>\n<pre><code>/Applications/Android\\ Studio.app/Contents/jre/Contents/Home/bin/keytool -genkey -v -keystore ~/key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias key\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9597469,"reputation":3728,"user_id":7126156,"display_name":"kallayya Hiremath"},"comment_count":0,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1576489457,"creation_date":1576489457,"answer_id":59354002,"question_id":44009058,"body_markdown":"   install JDK it will work ,\r\n\r\n   here is the jdk link to download .\r\n\r\n   link: https://www.oracle.com/technetwork/java/javase/downloads/jdk13-downloads- \r\n   5672538.html\r\n\r\n   ","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>install JDK it will work ,</p>\n\n<p>here is the jdk link to download .</p>\n\n<p>link: <a href=\"https://www.oracle.com/technetwork/java/javase/downloads/jdk13-downloads-\" rel=\"nofollow noreferrer\">https://www.oracle.com/technetwork/java/javase/downloads/jdk13-downloads-</a> \n   5672538.html</p>\n"},{"tags":[],"owner":{"account_id":6159625,"reputation":87,"user_id":4936121,"display_name":"emre"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1584614568,"creation_date":1584614568,"answer_id":60755501,"question_id":44009058,"body_markdown":"Below is worked for me on macos mojave 10.14.6 version\r\n\r\nI installed current jdk(https://www.oracle.com/java/technologies/javase-downloads.html) \r\n\r\nThen do respectively;\r\n\r\n - vim .bash_profile\r\n - add &quot;export JAVA_HOME=$(/usr/libexec/java_home)&quot; to bash_profile\r\n - source .bash_profile\r\n\r\nit is done. And you can check the version with java -version command.","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>Below is worked for me on macos mojave 10.14.6 version</p>\n\n<p>I installed current jdk(<a href=\"https://www.oracle.com/java/technologies/javase-downloads.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/javase-downloads.html</a>) </p>\n\n<p>Then do respectively;</p>\n\n<ul>\n<li>vim .bash_profile</li>\n<li>add \"export JAVA_HOME=$(/usr/libexec/java_home)\" to bash_profile</li>\n<li>source .bash_profile</li>\n</ul>\n\n<p>it is done. And you can check the version with java -version command.</p>\n"},{"comments":[{"owner":{"account_id":2004970,"reputation":2264,"user_id":1795125,"display_name":"Chaim Leib Halbert"},"score":0,"creation_date":1612559345,"post_id":62702800,"comment_id":116814454,"body_markdown":"Running in macOS 10.15.7 Catalina, I additionally needed to set my PATH.","body":"Running in macOS 10.15.7 Catalina, I additionally needed to set my PATH."},{"owner":{"account_id":110909,"reputation":45713,"user_id":293280,"accept_rate":77,"display_name":"Joshua Pinter"},"score":8,"creation_date":1615071914,"post_id":62702800,"comment_id":117579784,"body_markdown":"Yes! Bang on. I guess it&#39;s as simple as &quot;RTFI&quot;","body":"Yes! Bang on. I guess it&#39;s as simple as &quot;RTFI&quot;"},{"owner":{"account_id":4941847,"reputation":6754,"user_id":4262057,"accept_rate":77,"display_name":"WJA"},"score":0,"creation_date":1628505703,"post_id":62702800,"comment_id":121429994,"body_markdown":"Can you elaborate @ChaimLeibHalbert?","body":"Can you elaborate @ChaimLeibHalbert?"},{"owner":{"account_id":431527,"reputation":9888,"user_id":815653,"accept_rate":81,"display_name":"zell"},"score":2,"creation_date":1633123291,"post_id":62702800,"comment_id":122685767,"body_markdown":"This is for me the best solution to this issue.","body":"This is for me the best solution to this issue."},{"owner":{"account_id":5920746,"reputation":1601,"user_id":4658157,"accept_rate":79,"display_name":"Phate P"},"score":0,"creation_date":1634643778,"post_id":62702800,"comment_id":123075139,"body_markdown":"That solves the issue. Thanks :)","body":"That solves the issue. Thanks :)"},{"owner":{"account_id":9545760,"reputation":783,"user_id":7091922,"accept_rate":69,"display_name":"A Campos"},"score":0,"creation_date":1648831476,"post_id":62702800,"comment_id":126732436,"body_markdown":"This: `sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk`","body":"This: <code>sudo ln -sfn &#47;usr&#47;local&#47;opt&#47;openjdk&#47;libexec&#47;openjdk.jdk &#47;Library&#47;Java&#47;JavaVirtualMachines&#47;openjdk.jdk</code>"},{"owner":{"account_id":6117248,"reputation":486,"user_id":4771865,"display_name":"Cem"},"score":2,"creation_date":1658908133,"post_id":62702800,"comment_id":129165687,"body_markdown":"Thanks!\nRunning on macOS Monterey - 12.4  \n1- brew install openjdk@11  \n2- echo &#39;export PATH=&quot;/opt/homebrew/opt/openjdk@11/bin:$PATH&quot;&#39; &gt;&gt; ~/.zshrc  \n3- sudo ln -sfn /opt/homebrew/opt/openjdk@11/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-11.jdk","body":"Thanks! Running on macOS Monterey - 12.4   1- brew install openjdk@11   2- echo &#39;export PATH=&quot;/opt/homebrew/opt/openjdk@11/bin:$PATH&quot;&#39; &gt;&gt; ~/.zshrc   3- sudo ln -sfn /opt/homebrew/opt/openjdk@11/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-11.jdk"},{"owner":{"account_id":8667699,"reputation":101,"user_id":6487568,"display_name":"CamBeeler"},"score":0,"creation_date":1658957673,"post_id":62702800,"comment_id":129184411,"body_markdown":"Same as @Cem.  brew install openjdk@17.  Did the symlink and then added the path.  perfect!","body":"Same as @Cem.  brew install openjdk@17.  Did the symlink and then added the path.  perfect!"},{"owner":{"account_id":13613277,"reputation":315,"user_id":9820032,"display_name":"Eric Xue"},"score":0,"creation_date":1661212391,"post_id":62702800,"comment_id":129713524,"body_markdown":"By default, homebrew is using a new directory structure now. The command now should be `sudo ln -sfn /opt/homebrew/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk`","body":"By default, homebrew is using a new directory structure now. The command now should be <code>sudo ln -sfn &#47;opt&#47;homebrew&#47;opt&#47;openjdk&#47;libexec&#47;openjdk.jdk &#47;Library&#47;Java&#47;JavaVirtualMachines&#47;openjdk.jdk</code>"},{"owner":{"account_id":4724640,"reputation":310,"user_id":3837764,"display_name":"majorgear"},"score":0,"creation_date":1673038812,"post_id":62702800,"comment_id":132415765,"body_markdown":"This is really close. java --version\nopenjdk 11.0.17 2022-10-18\nOpenJDK Runtime Environment Homebrew (build 11.0.17+0)\nOpenJDK 64-Bit Server VM Homebrew (build 11.0.17+0, mixed mode)\n\njavaws ~/Downloads/iLO-jirc.jnlp\nThe operation couldn’t be completed. Unable to locate a Java Runtime.\nPlease visit http://www.java.com for information on installing Java.","body":"This is really close. java --version openjdk 11.0.17 2022-10-18 OpenJDK Runtime Environment Homebrew (build 11.0.17+0) OpenJDK 64-Bit Server VM Homebrew (build 11.0.17+0, mixed mode)  javaws ~/Downloads/iLO-jirc.jnlp The operation couldn’t be completed. Unable to locate a Java Runtime. Please visit <a href=\"http://www.java.com\" rel=\"nofollow noreferrer\">java.com</a> for information on installing Java."}],"tags":[],"owner":{"account_id":14556813,"reputation":2325,"user_id":10514118,"display_name":"Mohammed"},"comment_count":10,"down_vote_count":0,"up_vote_count":169,"is_accepted":false,"score":169,"last_activity_date":1697614802,"creation_date":1593714323,"answer_id":62702800,"question_id":44009058,"body_markdown":"After installing openjdk with brew and runnning `brew info openjdk` I got this:\r\n\r\n```none\r\n==&gt; openjdk: stable 21 (bottled) [keg-only]\r\nDevelopment kit for the Java programming language\r\nhttps://openjdk.java.net/\r\n/opt/homebrew/Cellar/openjdk/21 (600 files, 331MB)\r\n  Poured from bottle using the formulae.brew.sh API on 2023-09-26 at 11:06:55\r\nFrom: https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/o/openjdk.rb\r\nLicense: GPL-2.0-only with Classpath-exception-2.0\r\n==&gt; Dependencies\r\nBuild: autoconf ✔, pkg-config ✔\r\nRequired: giflib ✔, harfbuzz ✔, jpeg-turbo ✔, libpng ✔, little-cms2 ✔\r\n==&gt; Requirements\r\nBuild: Xcode (on macOS) ✘\r\nRequired: macOS &gt;= 10.15 (or Linux) ✔\r\n==&gt; Caveats\r\nFor the system Java wrappers to find this JDK, symlink it with\r\n  sudo ln -sfn /opt/homebrew/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\r\n\r\nopenjdk is keg-only, which means it was not symlinked into /opt/homebrew,\r\nbecause macOS provides similar software and installing this software in\r\nparallel can cause all kinds of trouble.\r\n\r\nIf you need to have openjdk first in your PATH, run:\r\n  echo &#39;export PATH=&quot;/opt/homebrew/opt/openjdk/bin:$PATH&quot;&#39; &gt;&gt; ~/.zshrc\r\n\r\nFor compilers to find openjdk you may need to set:\r\n  export CPPFLAGS=&quot;-I/opt/homebrew/opt/openjdk/include&quot;\r\n```\r\n\r\n\r\nAnd from that I got this command here, and after running it I got Java working\r\n\r\n    sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\r\n\r\n  [1]: https://i.stack.imgur.com/06AAb.png\r\n","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>After installing openjdk with brew and runnning <code>brew info openjdk</code> I got this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>==&gt; openjdk: stable 21 (bottled) [keg-only]\nDevelopment kit for the Java programming language\nhttps://openjdk.java.net/\n/opt/homebrew/Cellar/openjdk/21 (600 files, 331MB)\n  Poured from bottle using the formulae.brew.sh API on 2023-09-26 at 11:06:55\nFrom: https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/o/openjdk.rb\nLicense: GPL-2.0-only with Classpath-exception-2.0\n==&gt; Dependencies\nBuild: autoconf ✔, pkg-config ✔\nRequired: giflib ✔, harfbuzz ✔, jpeg-turbo ✔, libpng ✔, little-cms2 ✔\n==&gt; Requirements\nBuild: Xcode (on macOS) ✘\nRequired: macOS &gt;= 10.15 (or Linux) ✔\n==&gt; Caveats\nFor the system Java wrappers to find this JDK, symlink it with\n  sudo ln -sfn /opt/homebrew/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\n\nopenjdk is keg-only, which means it was not symlinked into /opt/homebrew,\nbecause macOS provides similar software and installing this software in\nparallel can cause all kinds of trouble.\n\nIf you need to have openjdk first in your PATH, run:\n  echo 'export PATH=&quot;/opt/homebrew/opt/openjdk/bin:$PATH&quot;' &gt;&gt; ~/.zshrc\n\nFor compilers to find openjdk you may need to set:\n  export CPPFLAGS=&quot;-I/opt/homebrew/opt/openjdk/include&quot;\n</code></pre>\n<p>And from that I got this command here, and after running it I got Java working</p>\n<pre><code>sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\n</code></pre>\n"},{"tags":[],"owner":{"account_id":177094,"reputation":780,"user_id":2128873,"display_name":"jpgbarbosa"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1595785081,"creation_date":1595785081,"answer_id":63103561,"question_id":44009058,"body_markdown":"I have Mojave 10.14.6 and the only thing that did work for me was:\r\n\r\n* setting JAVA_HOME to the following:\r\n\r\n```\r\nexport JAVA_HOME=/Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home\r\n```\r\n\r\n* source .bash_profile (or wherever you keep your vars, in my case .zshrc)\r\n\r\nHope it helps! You can now type `java --version` and it should work","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>I have Mojave 10.14.6 and the only thing that did work for me was:</p>\n<ul>\n<li>setting JAVA_HOME to the following:</li>\n</ul>\n<pre><code>export JAVA_HOME=/Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home\n</code></pre>\n<ul>\n<li>source .bash_profile (or wherever you keep your vars, in my case .zshrc)</li>\n</ul>\n<p>Hope it helps! You can now type <code>java --version</code> and it should work</p>\n"},{"comments":[{"owner":{"account_id":16549745,"reputation":416,"user_id":11958390,"display_name":"raphisama"},"score":0,"creation_date":1627798759,"post_id":65951339,"comment_id":121249038,"body_markdown":"`java -version` works for me, but `apt` can&#39;t find it. For example, when I do `apt update` I get the error `The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.`","body":"<code>java -version</code> works for me, but <code>apt</code> can&#39;t find it. For example, when I do <code>apt update</code> I get the error <code>The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.</code>"},{"owner":{"account_id":134590,"reputation":26825,"user_id":336827,"accept_rate":61,"display_name":"freedev"},"score":0,"creation_date":1627799040,"post_id":65951339,"comment_id":121249079,"body_markdown":"Are you trying to run this on MacOS?","body":"Are you trying to run this on MacOS?"},{"owner":{"account_id":16549745,"reputation":416,"user_id":11958390,"display_name":"raphisama"},"score":1,"creation_date":1627843078,"post_id":65951339,"comment_id":121258699,"body_markdown":"Yes running on BigSur","body":"Yes running on BigSur"},{"owner":{"account_id":134590,"reputation":26825,"user_id":336827,"accept_rate":61,"display_name":"freedev"},"score":0,"creation_date":1627845484,"post_id":65951339,"comment_id":121259301,"body_markdown":"But AFAIK `apt` is not available on MacOS","body":"But AFAIK <code>apt</code> is not available on MacOS"},{"owner":{"account_id":364696,"reputation":9984,"user_id":709223,"accept_rate":75,"display_name":"ekkis"},"score":0,"creation_date":1628055579,"post_id":65951339,"comment_id":121316175,"body_markdown":"as always, the instructions don&#39;t work.  when I try the first jenv (after the brew installs), I get the error: &quot;ln: /Users/ekkis/.jenv/versions/openjdk64-11.0.10: No such file or directory&quot;","body":"as always, the instructions don&#39;t work.  when I try the first jenv (after the brew installs), I get the error: &quot;ln: /Users/ekkis/.jenv/versions/openjdk64-11.0.10: No such file or directory&quot;"},{"owner":{"account_id":134590,"reputation":26825,"user_id":336827,"accept_rate":61,"display_name":"freedev"},"score":0,"creation_date":1628067475,"post_id":65951339,"comment_id":121320152,"body_markdown":"@ekkis very likely you were already using jenv, in any case double check your jenv defaults and what&#39;s in `/Users/ekkis/.jenv/versions/`","body":"@ekkis very likely you were already using jenv, in any case double check your jenv defaults and what&#39;s in <code>&#47;Users&#47;ekkis&#47;.jenv&#47;versions&#47;</code>"},{"owner":{"account_id":364696,"reputation":9984,"user_id":709223,"accept_rate":75,"display_name":"ekkis"},"score":0,"creation_date":1628101716,"post_id":65951339,"comment_id":121334122,"body_markdown":"the directory you mention is empty","body":"the directory you mention is empty"},{"owner":{"account_id":134590,"reputation":26825,"user_id":336827,"accept_rate":61,"display_name":"freedev"},"score":0,"creation_date":1628155841,"post_id":65951339,"comment_id":121347420,"body_markdown":"@ekkis you have to execute `jenv add ...` first","body":"@ekkis you have to execute <code>jenv add ...</code> first"}],"tags":[],"owner":{"account_id":134590,"reputation":26825,"user_id":336827,"accept_rate":61,"display_name":"freedev"},"comment_count":8,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1611911779,"creation_date":1611910123,"answer_id":65951339,"question_id":44009058,"body_markdown":"# TL;DR\r\n### For JDK 11 try this:\r\nTo handle this problem in a clean way, I suggest to use `brew` and `jenv`.&lt;br&gt;\r\n### **For Java 11** follow this 2 steps, first : \r\n\r\n    JAVA_VERSION=11\r\n    brew reinstall jenv \r\n    brew reinstall openjdk@${JAVA_VERSION}\r\n    jenv add /usr/local/opt/openjdk@${JAVA_VERSION}/\r\n    jenv global ${JAVA_VERSION}\r\n\r\n### And add this at end of your shell config scripts &lt;br&gt;`~/.bashrc` or `~/.zshrc`\r\n\r\n    export PATH=&quot;$HOME/.jenv/bin:$PATH&quot;\r\n    eval &quot;$(jenv init -)&quot;\r\n    export JAVA_HOME=&quot;$HOME/.jenv/versions/`jenv version-name`&quot;\r\n\r\n# Problem solved!\r\nThen restart your shell and try to execute `java -version`\r\n\r\nNote: If you have this problem, your current JDK version is not existent or misconfigured (or may be you have only JRE).\r\n\r\n","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<h1>TL;DR</h1>\n<h3>For JDK 11 try this:</h3>\n<p>To handle this problem in a clean way, I suggest to use <code>brew</code> and <code>jenv</code>.<br></p>\n<h3><strong>For Java 11</strong> follow this 2 steps, first :</h3>\n<pre><code>JAVA_VERSION=11\nbrew reinstall jenv \nbrew reinstall openjdk@${JAVA_VERSION}\njenv add /usr/local/opt/openjdk@${JAVA_VERSION}/\njenv global ${JAVA_VERSION}\n</code></pre>\n<h3>And add this at end of your shell config scripts <br><code>~/.bashrc</code> or <code>~/.zshrc</code></h3>\n<pre><code>export PATH=&quot;$HOME/.jenv/bin:$PATH&quot;\neval &quot;$(jenv init -)&quot;\nexport JAVA_HOME=&quot;$HOME/.jenv/versions/`jenv version-name`&quot;\n</code></pre>\n<h1>Problem solved!</h1>\n<p>Then restart your shell and try to execute <code>java -version</code></p>\n<p>Note: If you have this problem, your current JDK version is not existent or misconfigured (or may be you have only JRE).</p>\n"},{"comments":[{"owner":{"account_id":7072599,"reputation":874,"user_id":5422725,"display_name":"Eugene Troyanskii"},"score":0,"creation_date":1637930845,"post_id":68779092,"comment_id":123960733,"body_markdown":"sh: command not found: brew","body":"sh: command not found: brew"},{"owner":{"account_id":6242813,"reputation":2006,"user_id":4855849,"accept_rate":100,"display_name":"iNyar"},"score":3,"creation_date":1638070997,"post_id":68779092,"comment_id":123988318,"body_markdown":"@EugeneTroyanskii: https://brew.sh/ → Install Homebrew (package manager on macOS)","body":"@EugeneTroyanskii: <a href=\"https://brew.sh/\" rel=\"nofollow noreferrer\">brew.sh</a> → Install Homebrew (package manager on macOS)"},{"owner":{"account_id":2563473,"reputation":172,"user_id":2224126,"accept_rate":75,"display_name":"AleGiovane"},"score":1,"creation_date":1684256130,"post_id":68779092,"comment_id":134490570,"body_markdown":"This is the only working solution","body":"This is the only working solution"}],"tags":[],"owner":{"account_id":6242813,"reputation":2006,"user_id":4855849,"accept_rate":100,"display_name":"iNyar"},"comment_count":3,"down_vote_count":3,"up_vote_count":125,"is_accepted":false,"score":122,"last_activity_date":1628896147,"creation_date":1628895443,"answer_id":68779092,"question_id":44009058,"body_markdown":"# 2021 solution\r\n\r\n## TL;DR\r\n\r\n```bash\r\nbrew install temurin\r\n```\r\n\r\n## Details\r\n\r\nOn an M1 Mac/Apple Silicon (running Big Sur), I had already `openjdk` installed. As signaled in a previous answer by Mohammed, `openjdk` is keg-only with `brew`, and hence requires [adding a symlink][1].\r\n\r\nAfter following this, it solved the `No Java Runtime present` error, but `rJava` was complaining about missing `libjvm.dylib` and that existing libraries were for the wrong architecture:\r\n\r\n```\r\n.onLoad failed in loadNamespace() for &#39;rJava&#39;, details:\r\n  call: dyn.load(jvm, FALSE)\r\n  error: unable to load shared object &#39;/opt/homebrew/Cellar/openjdk/16.0.2/libexec/openjdk.jdk/Contents/Home/lib/server/libjvm.dylib&#39;:\r\n  dlopen(/opt/homebrew/Cellar/openjdk/16.0.2/libexec/openjdk.jdk/Contents/Home/lib/server/libjvm.dylib, 10): \r\n    no suitable image found.  Did find:\r\n\t/opt/homebrew/Cellar/openjdk/16.0.2/libexec/openjdk.jdk/Contents/Home/lib/server/libjvm.dylib: \r\n    mach-o, but wrong architecture\r\n```\r\n\r\nInstalling [Eclipse **Temurin**][2] (previously `AdoptOpenJDK`) (and removing the previously created symlink in `/Library/Java/JavaVirtualMachines/openjdk.jdk`) immediately solved both issues seamlessly.\r\n\r\nJust run `brew install temurin` and everything should be OK.\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/62702800/4855849\r\n  [2]: https://adoptium.net/","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<h1>2021 solution</h1>\n<h2>TL;DR</h2>\n<pre class=\"lang-sh prettyprint-override\"><code>brew install temurin\n</code></pre>\n<h2>Details</h2>\n<p>On an M1 Mac/Apple Silicon (running Big Sur), I had already <code>openjdk</code> installed. As signaled in a previous answer by Mohammed, <code>openjdk</code> is keg-only with <code>brew</code>, and hence requires <a href=\"https://stackoverflow.com/a/62702800/4855849\">adding a symlink</a>.</p>\n<p>After following this, it solved the <code>No Java Runtime present</code> error, but <code>rJava</code> was complaining about missing <code>libjvm.dylib</code> and that existing libraries were for the wrong architecture:</p>\n<pre><code>.onLoad failed in loadNamespace() for 'rJava', details:\n  call: dyn.load(jvm, FALSE)\n  error: unable to load shared object '/opt/homebrew/Cellar/openjdk/16.0.2/libexec/openjdk.jdk/Contents/Home/lib/server/libjvm.dylib':\n  dlopen(/opt/homebrew/Cellar/openjdk/16.0.2/libexec/openjdk.jdk/Contents/Home/lib/server/libjvm.dylib, 10): \n    no suitable image found.  Did find:\n    /opt/homebrew/Cellar/openjdk/16.0.2/libexec/openjdk.jdk/Contents/Home/lib/server/libjvm.dylib: \n    mach-o, but wrong architecture\n</code></pre>\n<p>Installing <a href=\"https://adoptium.net/\" rel=\"noreferrer\">Eclipse <strong>Temurin</strong></a> (previously <code>AdoptOpenJDK</code>) (and removing the previously created symlink in <code>/Library/Java/JavaVirtualMachines/openjdk.jdk</code>) immediately solved both issues seamlessly.</p>\n<p>Just run <code>brew install temurin</code> and everything should be OK.</p>\n"},{"comments":[{"owner":{"account_id":7210445,"reputation":680,"user_id":5504758,"display_name":"nakamume"},"score":2,"creation_date":1647402974,"post_id":68821404,"comment_id":126359895,"body_markdown":"You can `export JAVA_HOME=&quot;/usr/local/opt/openjdk/libexec/openjdk.jdk/Contents/Home&quot;`. No need for symlink.","body":"You can <code>export JAVA_HOME=&quot;&#47;usr&#47;local&#47;opt&#47;openjdk&#47;libexec&#47;openjdk.jdk&#47;Conten&zwnj;&#8203;ts&#47;Home&quot;</code>. No need for symlink."},{"owner":{"account_id":13375762,"reputation":5588,"user_id":13055097,"display_name":"Saurabh"},"score":2,"creation_date":1648610142,"post_id":68821404,"comment_id":126665584,"body_markdown":"@nakamume Symlink is recommended by Homebrew","body":"@nakamume Symlink is recommended by Homebrew"},{"owner":{"account_id":1903355,"reputation":2822,"user_id":1718722,"display_name":"Josep Alsina"},"score":4,"creation_date":1652719154,"post_id":68821404,"comment_id":127668490,"body_markdown":"even better the second line: \n`sudo ln -sfn $(brew --prefix)/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk`","body":"even better the second line:  <code>sudo ln -sfn $(brew --prefix)&#47;opt&#47;openjdk&#47;libexec&#47;openjdk.jdk &#47;Library&#47;Java&#47;JavaVirtualMachines&#47;openjdk.jdk</code>"},{"owner":{"account_id":10314724,"reputation":191,"user_id":7609373,"display_name":"Valeriy"},"score":0,"creation_date":1652873966,"post_id":68821404,"comment_id":127711002,"body_markdown":"How I can save this result after restarting macOS?","body":"How I can save this result after restarting macOS?"},{"owner":{"account_id":13375762,"reputation":5588,"user_id":13055097,"display_name":"Saurabh"},"score":1,"creation_date":1652886978,"post_id":68821404,"comment_id":127716909,"body_markdown":"@Valeriy add `export JAVA_HOME=&quot;...&quot;` to your Bash or ZSH profile","body":"@Valeriy add <code>export JAVA_HOME=&quot;...&quot;</code> to your Bash or ZSH profile"}],"tags":[],"owner":{"account_id":13375762,"reputation":5588,"user_id":13055097,"display_name":"Saurabh"},"comment_count":5,"down_vote_count":0,"up_vote_count":76,"is_accepted":false,"score":76,"last_activity_date":1651187231,"creation_date":1629219900,"answer_id":68821404,"question_id":44009058,"body_markdown":"I just had to do the following on Mac:\r\n\r\n```\r\nbrew install openjdk\r\nsudo ln -sfn /opt/homebrew/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\r\nexport JAVA_HOME=&quot;/Library/Java/JavaVirtualMachines/openjdk.jdk/Contents/Home&quot;\r\njava --version\r\n```","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>I just had to do the following on Mac:</p>\n<pre><code>brew install openjdk\nsudo ln -sfn /opt/homebrew/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\nexport JAVA_HOME=&quot;/Library/Java/JavaVirtualMachines/openjdk.jdk/Contents/Home&quot;\njava --version\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4832549,"reputation":21,"user_id":10540635,"display_name":"Kate Portalatin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1633308534,"creation_date":1633298068,"answer_id":69429187,"question_id":44009058,"body_markdown":"If you  are having this issue for the same reason that I am, I can tell you why it is happening. I just don&#39;t know how to fix it yet.  \r\n\r\nHere it is:\r\n\r\nI am using JDK version 1.8 on MacOS Big Sur.  I do not want to have to install a later version of the JDK because all my projects run on 1.8. But here&#39;s the thing.... On the command line \r\n\r\n```\r\njava -version\r\n```\r\n\r\nReturns this:\r\n\r\n```\r\nopenjdk version &quot;1.8.0_302&quot;\r\nOpenJDK Runtime Environment (build 1.8.0_302-bre_2021_08_14_21_34-b00)\r\nOpenJDK 64-Bit Server VM (build 25.302-b00, mixed mode)\r\n```\r\n\r\nbut a slightly different command (version prefixed with 2 dashes instead of 1)\r\n\r\n```\r\njava --version\r\n```\r\n\r\nreturns this error:\r\n\r\n```\r\nUnrecognized option: --version\r\nError: Could not create the Java Virtual Machine.\r\nError: A fatal exception has occurred. Program will exit.\r\n```\r\n\r\nThis is because Java 8 uses single dash version, all JDKs after use double dash.  \r\n\r\nSo the machine, when looking for JAVA_HOME, is also using double dashes and getting the error.","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>If you  are having this issue for the same reason that I am, I can tell you why it is happening. I just don't know how to fix it yet.</p>\n<p>Here it is:</p>\n<p>I am using JDK version 1.8 on MacOS Big Sur.  I do not want to have to install a later version of the JDK because all my projects run on 1.8. But here's the thing.... On the command line</p>\n<pre><code>java -version\n</code></pre>\n<p>Returns this:</p>\n<pre><code>openjdk version &quot;1.8.0_302&quot;\nOpenJDK Runtime Environment (build 1.8.0_302-bre_2021_08_14_21_34-b00)\nOpenJDK 64-Bit Server VM (build 25.302-b00, mixed mode)\n</code></pre>\n<p>but a slightly different command (version prefixed with 2 dashes instead of 1)</p>\n<pre><code>java --version\n</code></pre>\n<p>returns this error:</p>\n<pre><code>Unrecognized option: --version\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n</code></pre>\n<p>This is because Java 8 uses single dash version, all JDKs after use double dash.</p>\n<p>So the machine, when looking for JAVA_HOME, is also using double dashes and getting the error.</p>\n"},{"comments":[{"owner":{"account_id":10907310,"reputation":2214,"user_id":8017666,"display_name":"SRJ"},"score":0,"creation_date":1642570288,"post_id":69557759,"comment_id":125102795,"body_markdown":"In my case installed openjdk location was `/opt/homebrew/Cellar/openjdk/17.0.1_1/bin`","body":"In my case installed openjdk location was <code>&#47;opt&#47;homebrew&#47;Cellar&#47;openjdk&#47;17.0.1_1&#47;bin</code>"}],"tags":[],"owner":{"account_id":23022624,"reputation":141,"user_id":17143425,"display_name":"Mohamed Abouelwafa"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1634176024,"creation_date":1634136873,"answer_id":69557759,"question_id":44009058,"body_markdown":"Maybe someone is still having the same issue. You can install openjdk using homebrew, and then add the new JDK `bin` directory to the front of your path:\r\n\r\n```\r\ncd ~\r\n\r\nbrew install openjdk\r\n\r\necho &#39;export PATH=&quot;/usr/local/opt/openjdk/bin:$PATH&quot;&#39; &gt;&gt; .bash_profile\r\n\r\nsource .bash_profile\r\n```\r\n\r\n","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>Maybe someone is still having the same issue. You can install openjdk using homebrew, and then add the new JDK <code>bin</code> directory to the front of your path:</p>\n<pre><code>cd ~\n\nbrew install openjdk\n\necho 'export PATH=&quot;/usr/local/opt/openjdk/bin:$PATH&quot;' &gt;&gt; .bash_profile\n\nsource .bash_profile\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5213018,"reputation":637,"user_id":4168794,"display_name":"Mehdi Abbassi"},"score":0,"creation_date":1654607973,"post_id":69718593,"comment_id":128127154,"body_markdown":"It helped me kind of, but after this, I can&#39;t run Homebrew: `zsh: command not found: brew`","body":"It helped me kind of, but after this, I can&#39;t run Homebrew: <code>zsh: command not found: brew</code>"}],"tags":[],"owner":{"account_id":8862245,"reputation":1280,"user_id":6618218,"display_name":"khizer"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1635231111,"creation_date":1635231111,"answer_id":69718593,"question_id":44009058,"body_markdown":"**Pre-Requisite:**\r\n\r\n- I already had java11 installed on my machine using brew.\r\n\r\nStep-1: `brew info java11`\r\n\r\noutput:\r\n\r\n**/opt/homebrew/Cellar/openjdk@11**\r\n\r\n```\r\nUSER1-MacBook-Pro JavaVirtualMachines % brew info java11\r\nopenjdk@11: stable 11.0.12 (bottled) [keg-only]\r\nDevelopment kit for the Java programming language\r\nhttps://openjdk.java.net/\r\n/opt/homebrew/Cellar/openjdk@11/11.0.12 (670 files, 273.0MB)\r\n  Poured from bottle on 2021-10-09 at 13:07:04\r\nFrom: https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/openjdk@11.rb\r\nLicense: GPL-2.0-only\r\n==&gt; Dependencies\r\nBuild: autoconf ✔\r\n==&gt; Requirements\r\nBuild: Xcode ✘\r\n==&gt; Caveats\r\nFor the system Java wrappers to find this JDK, symlink it with\r\n  sudo ln -sfn /opt/homebrew/opt/openjdk@11/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-11.jdk\r\n\r\nopenjdk@11 is keg-only, which means it was not symlinked into /opt/homebrew,\r\nbecause this is an alternate version of another formula.\r\n\r\nIf you need to have openjdk@11 first in your PATH, run:\r\n  echo &#39;export PATH=&quot;/opt/homebrew/opt/openjdk@11/bin:$PATH&quot;&#39; &gt;&gt; ~/.zshrc\r\n\r\nFor compilers to find openjdk@11 you may need to set:\r\n  export CPPFLAGS=&quot;-I/opt/homebrew/opt/openjdk@11/include&quot;\r\n\r\n==&gt; Analytics\r\ninstall: 44,188 (30 days), 149,578 (90 days), 433,845 (365 days)\r\ninstall-on-request: 19,074 (30 days), 63,262 (90 days), 187,286 (365 days)\r\nbuild-error: 0 (30 days)\r\n```\r\nStep-2: Append openJDK path to existing path.\r\n\r\n\r\necho &#39;export PATH=&quot;/opt/homebrew/opt/openjdk@11/bin:$PATH&quot;&#39; &gt;&gt; ~/.zshrc\r\n\r\n\r\nStep-3: Source existing shell or open new terminal to validate changes\r\n\r\n- `source ~/.zshrc`\r\n\r\nStep-4: Check path is added\r\n\r\n- `which java`\r\n\r\noutput: `/opt/homebrew/opt/openjdk@11/bin/java`\r\n\r\nStep-5: \r\n\r\n- `java --version`\r\n\r\n```java\r\nopenjdk 11.0.12 2021-07-20\r\nOpenJDK Runtime Environment Homebrew (build 11.0.12+0)\r\nOpenJDK 64-Bit Server VM Homebrew (build 11.0.12+0, mixed mode)\r\n```","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p><strong>Pre-Requisite:</strong></p>\n<ul>\n<li>I already had java11 installed on my machine using brew.</li>\n</ul>\n<p>Step-1: <code>brew info java11</code></p>\n<p>output:</p>\n<p><strong>/opt/homebrew/Cellar/openjdk@11</strong></p>\n<pre><code>USER1-MacBook-Pro JavaVirtualMachines % brew info java11\nopenjdk@11: stable 11.0.12 (bottled) [keg-only]\nDevelopment kit for the Java programming language\nhttps://openjdk.java.net/\n/opt/homebrew/Cellar/openjdk@11/11.0.12 (670 files, 273.0MB)\n  Poured from bottle on 2021-10-09 at 13:07:04\nFrom: https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/openjdk@11.rb\nLicense: GPL-2.0-only\n==&gt; Dependencies\nBuild: autoconf ✔\n==&gt; Requirements\nBuild: Xcode ✘\n==&gt; Caveats\nFor the system Java wrappers to find this JDK, symlink it with\n  sudo ln -sfn /opt/homebrew/opt/openjdk@11/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-11.jdk\n\nopenjdk@11 is keg-only, which means it was not symlinked into /opt/homebrew,\nbecause this is an alternate version of another formula.\n\nIf you need to have openjdk@11 first in your PATH, run:\n  echo 'export PATH=&quot;/opt/homebrew/opt/openjdk@11/bin:$PATH&quot;' &gt;&gt; ~/.zshrc\n\nFor compilers to find openjdk@11 you may need to set:\n  export CPPFLAGS=&quot;-I/opt/homebrew/opt/openjdk@11/include&quot;\n\n==&gt; Analytics\ninstall: 44,188 (30 days), 149,578 (90 days), 433,845 (365 days)\ninstall-on-request: 19,074 (30 days), 63,262 (90 days), 187,286 (365 days)\nbuild-error: 0 (30 days)\n</code></pre>\n<p>Step-2: Append openJDK path to existing path.</p>\n<p>echo 'export PATH=&quot;/opt/homebrew/opt/openjdk@11/bin:$PATH&quot;' &gt;&gt; ~/.zshrc</p>\n<p>Step-3: Source existing shell or open new terminal to validate changes</p>\n<ul>\n<li><code>source ~/.zshrc</code></li>\n</ul>\n<p>Step-4: Check path is added</p>\n<ul>\n<li><code>which java</code></li>\n</ul>\n<p>output: <code>/opt/homebrew/opt/openjdk@11/bin/java</code></p>\n<p>Step-5:</p>\n<ul>\n<li><code>java --version</code></li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>openjdk 11.0.12 2021-07-20\nOpenJDK Runtime Environment Homebrew (build 11.0.12+0)\nOpenJDK 64-Bit Server VM Homebrew (build 11.0.12+0, mixed mode)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":347179,"reputation":551,"user_id":681139,"display_name":"Eli"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643718154,"creation_date":1643718154,"answer_id":70940500,"question_id":44009058,"body_markdown":"It&#39;s worth noting that with my current version of SQLDeveloper (`21.2.1`), there&#39;s another way to specify the JDK location. In my case, I was able to open up `~/.sqldeveloper/21.2.1/product.conf` and set the `JavaHome` directive to the appropriate directory. I use `jabba` for JDK version management, and this path was something like `~/.jabba/jdk/amazon-corretto@1.8.292-10.1/Contents/Home`. Needless to say, just setting that config value and restarting SQLDeveloper left me with a running copy again. This should work with any version of SQLDeveloper given the `product.conf` file exists inside your user&#39;s `.sqldeveloper` directory appropriate for the version you are using.","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>It's worth noting that with my current version of SQLDeveloper (<code>21.2.1</code>), there's another way to specify the JDK location. In my case, I was able to open up <code>~/.sqldeveloper/21.2.1/product.conf</code> and set the <code>JavaHome</code> directive to the appropriate directory. I use <code>jabba</code> for JDK version management, and this path was something like <code>~/.jabba/jdk/amazon-corretto@1.8.292-10.1/Contents/Home</code>. Needless to say, just setting that config value and restarting SQLDeveloper left me with a running copy again. This should work with any version of SQLDeveloper given the <code>product.conf</code> file exists inside your user's <code>.sqldeveloper</code> directory appropriate for the version you are using.</p>\n"},{"tags":[],"owner":{"account_id":10313291,"reputation":1698,"user_id":7608371,"display_name":"Noor Hossain"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1648481067,"creation_date":1646950703,"answer_id":71431454,"question_id":44009058,"body_markdown":"**In 2022:** \r\n\r\nNo need to download Java anymore, once Android Studio is installed.  \r\n\r\nEven though Java 11 is embedded with Android Studio now, on Mac sometimes this problem arises and the Java runtime is not found.  \r\n\r\nSo, I have solved this problem by doing these two steps: \r\n\r\n 1. In Android Studio go to File &gt; Project Structure. If, under the SDK entry, you can see there is no default SDK selected, but a text in red &quot;No SDK&quot;, click on it and you will find an SDK / JDK list, select one of them. Thats it. \r\n 2. Make sure you run Android Studio from Application Folder. \r\nFor this copy the Android Studio launcher to the Application folder. Then in the Finder, go to the Application folder.  Right-click on it. Click on &quot;Show package contents&quot;, then navigate up to jre folder. Copy the folder and paste it into your home folder.\r\n\r\nNow setup the path from the terminal: you can create a folder named  java_jre, and the path must be set to `jre/contents/Home` :  \r\n\r\n\r\n    Noors-Mac-mini:bin noorhossain$ export JAVA_HOME=&quot;/Users/noorhossain/java_jre/jre/Contents/Home&quot;\r\n\r\n// now checking the version : \r\n\r\n    Noors-Mac-mini:bin noorhossain$ java -version\r\n    \r\n    openjdk version &quot;11.0.11&quot; 2021-04-20\r\n    OpenJDK Runtime Environment (build 11.0.11+0-b60-7772763)\r\n    OpenJDK 64-Bit Server VM (build 11.0.11+0-b60-7772763, mixed mode)\r\n\r\n\r\n ","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p><strong>In 2022:</strong></p>\n<p>No need to download Java anymore, once Android Studio is installed.</p>\n<p>Even though Java 11 is embedded with Android Studio now, on Mac sometimes this problem arises and the Java runtime is not found.</p>\n<p>So, I have solved this problem by doing these two steps:</p>\n<ol>\n<li>In Android Studio go to File &gt; Project Structure. If, under the SDK entry, you can see there is no default SDK selected, but a text in red &quot;No SDK&quot;, click on it and you will find an SDK / JDK list, select one of them. Thats it.</li>\n<li>Make sure you run Android Studio from Application Folder.\nFor this copy the Android Studio launcher to the Application folder. Then in the Finder, go to the Application folder.  Right-click on it. Click on &quot;Show package contents&quot;, then navigate up to jre folder. Copy the folder and paste it into your home folder.</li>\n</ol>\n<p>Now setup the path from the terminal: you can create a folder named  java_jre, and the path must be set to <code>jre/contents/Home</code> :</p>\n<pre><code>Noors-Mac-mini:bin noorhossain$ export JAVA_HOME=&quot;/Users/noorhossain/java_jre/jre/Contents/Home&quot;\n</code></pre>\n<p>// now checking the version :</p>\n<pre><code>Noors-Mac-mini:bin noorhossain$ java -version\n\nopenjdk version &quot;11.0.11&quot; 2021-04-20\nOpenJDK Runtime Environment (build 11.0.11+0-b60-7772763)\nOpenJDK 64-Bit Server VM (build 11.0.11+0-b60-7772763, mixed mode)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14020441,"reputation":146,"user_id":10126773,"display_name":"rkwap"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1650750888,"creation_date":1650750888,"answer_id":71983904,"question_id":44009058,"body_markdown":"**In 2022, only if Android studio is installed:**\r\n\r\n1. Check if JDK is installed in Android studio. In Android Studio go to File &gt; Project Structure. Under the SDK entry, if there is no default JDK selected, select from the list, or if there isn&#39;t any, add JDK and then apply to install.\r\n\r\n2. After the JDK is installed in Android studio, you just need to add the JDK path directly from your Android Studio. Run the below command in the terminal and that&#39;s it.\r\n\r\n\r\n&gt;     echo &#39;export JAVA_HOME=&quot;/Applications/Android Studio.app/Contents/jre/Contents/Home&quot;&#39; &gt;&gt; ~/.zshrc\r\n\r\n3. Now, check if it&#39;s working.\r\n\r\n&gt;     ❯ java -version\r\n&gt;     openjdk version &quot;11.0.11&quot; 2021-04-20\r\n&gt;     OpenJDK Runtime Environment (build 11.0.11+0-b60-7772763)\r\n&gt;     OpenJDK 64-Bit Server VM (build 11.0.11+0-b60-7772763, mixed mode)\r\n\r\n***No need to install any package from brew or create any symlink. The Java is already embedded with the Android studio and we can use this directly for our system.***","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p><strong>In 2022, only if Android studio is installed:</strong></p>\n<ol>\n<li><p>Check if JDK is installed in Android studio. In Android Studio go to File &gt; Project Structure. Under the SDK entry, if there is no default JDK selected, select from the list, or if there isn't any, add JDK and then apply to install.</p>\n</li>\n<li><p>After the JDK is installed in Android studio, you just need to add the JDK path directly from your Android Studio. Run the below command in the terminal and that's it.</p>\n</li>\n</ol>\n<blockquote>\n<pre><code>echo 'export JAVA_HOME=&quot;/Applications/Android Studio.app/Contents/jre/Contents/Home&quot;' &gt;&gt; ~/.zshrc\n</code></pre>\n</blockquote>\n<ol start=\"3\">\n<li>Now, check if it's working.</li>\n</ol>\n<blockquote>\n<pre><code>❯ java -version\nopenjdk version &quot;11.0.11&quot; 2021-04-20\nOpenJDK Runtime Environment (build 11.0.11+0-b60-7772763)\nOpenJDK 64-Bit Server VM (build 11.0.11+0-b60-7772763, mixed mode)\n</code></pre>\n</blockquote>\n<p><em><strong>No need to install any package from brew or create any symlink. The Java is already embedded with the Android studio and we can use this directly for our system.</strong></em></p>\n"},{"tags":[],"owner":{"account_id":10286146,"reputation":130,"user_id":7589378,"display_name":"Almokhtar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1652898690,"creation_date":1652886563,"answer_id":72291705,"question_id":44009058,"body_markdown":"just run this \r\n  \r\n\r\n    sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>just run this</p>\n<pre><code>sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3102087,"reputation":596,"user_id":2625945,"display_name":"Hugo Brilhante"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1655248474,"creation_date":1655248474,"answer_id":72624333,"question_id":44009058,"body_markdown":"I solved the problem by installing `oracle-sdk` with `brew`.\r\n\r\n    brew install oracle-jdk --cask","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>I solved the problem by installing <code>oracle-sdk</code> with <code>brew</code>.</p>\n<pre><code>brew install oracle-jdk --cask\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4354839,"reputation":2493,"user_id":3553843,"accept_rate":70,"display_name":"Sattar"},"score":0,"creation_date":1679411912,"post_id":73497298,"comment_id":133715272,"body_markdown":"I just run it at Android Studio Terminal and works like a charm, Thanks","body":"I just run it at Android Studio Terminal and works like a charm, Thanks"},{"owner":{"account_id":16291509,"reputation":1683,"user_id":11764886,"display_name":"Waldmann"},"score":0,"creation_date":1689051370,"post_id":73497298,"comment_id":135154476,"body_markdown":"didnt help for my case","body":"didnt help for my case"},{"owner":{"account_id":975359,"reputation":6345,"user_id":996787,"accept_rate":33,"display_name":"Rajesh N"},"score":0,"creation_date":1689136963,"post_id":73497298,"comment_id":135168773,"body_markdown":"so open path manually from finder and go until you found jre and copy relative path and export it, like Application=&gt;Android studio=&gt;","body":"so open path manually from finder and go until you found jre and copy relative path and export it, like Application=&gt;Android studio=&gt;"},{"owner":{"account_id":1863751,"reputation":3608,"user_id":1687766,"accept_rate":50,"display_name":"JoeGalind"},"score":2,"creation_date":1698082106,"post_id":73497298,"comment_id":136357463,"body_markdown":"For newer versions of Android Studio:\nexport JAVA_HOME=/Applications/Android\\ Studio.app/Contents/jbr/Contents/Home/","body":"For newer versions of Android Studio: export JAVA_HOME=/Applications/Android\\ Studio.app/Contents/jbr/Contents/Home/"}],"tags":[],"owner":{"account_id":975359,"reputation":6345,"user_id":996787,"accept_rate":33,"display_name":"Rajesh N"},"comment_count":4,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1661497659,"creation_date":1661497659,"answer_id":73497298,"question_id":44009058,"body_markdown":"working by following command\r\n\r\n    export JAVA_HOME=&quot;/Applications/Android Studio.app/Contents/jre/Contents/Home&quot;","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>working by following command</p>\n<pre><code>export JAVA_HOME=&quot;/Applications/Android Studio.app/Contents/jre/Contents/Home&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9687425,"reputation":691,"user_id":7186671,"display_name":"Abdallah Mahmoud"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1681118970,"creation_date":1681118970,"answer_id":75975871,"question_id":44009058,"body_markdown":"\r\n# Error \r\n\r\n## error terminal when try to find java version:\r\n```\r\nThe operation couldn’t be completed. Unable to locate a Java Runtime.\r\n\r\nabdallahandroid@Abdallah-mahmoud ~ % java -version\r\nThe operation couldn’t be completed. Unable to locate a Java Runtime.\r\nPlease visit http://www.java.com for information on installing Java.\r\n\r\n```\r\n\r\n## error when try to run &quot;flutter doctor&quot;\r\n```\r\nAndroid Studio (version 2022.1)\r\n    ✗ Unable to find bundled Java version.\r\n\r\n```\r\n\r\n# try to fix by using &quot;brew&quot;\r\n\r\n1- install homebrew :\r\n```\r\n/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;\r\n\r\n```\r\n\r\n2- install java by brew \r\n```\r\nabdallahandroid@Abdallah-mahmoud ~ % brew install java\r\n\r\n```\r\n\r\n3- set export pat\r\n```\r\nexport PATH=&quot;/opt/homebrew/opt/openjdk/bin:$PATH&quot;\r\n\r\n```\r\n\r\ncase set forever by using editior &quot; vim /etc/paths &quot;\r\n```\r\n/opt/homebrew/opt/openjdk/bin\r\n\r\n```\r\n\r\nmust restart sometime the mac itself !!, some time not just need to restart termnial\r\n \r\n4- test installation \r\n```\r\njava -version\r\n```\r\n","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<h1>Error</h1>\n<h2>error terminal when try to find java version:</h2>\n<pre><code>The operation couldn’t be completed. Unable to locate a Java Runtime.\n\nabdallahandroid@Abdallah-mahmoud ~ % java -version\nThe operation couldn’t be completed. Unable to locate a Java Runtime.\nPlease visit http://www.java.com for information on installing Java.\n\n</code></pre>\n<h2>error when try to run &quot;flutter doctor&quot;</h2>\n<pre><code>Android Studio (version 2022.1)\n    ✗ Unable to find bundled Java version.\n\n</code></pre>\n<h1>try to fix by using &quot;brew&quot;</h1>\n<p>1- install homebrew :</p>\n<pre><code>/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;\n\n</code></pre>\n<p>2- install java by brew</p>\n<pre><code>abdallahandroid@Abdallah-mahmoud ~ % brew install java\n\n</code></pre>\n<p>3- set export pat</p>\n<pre><code>export PATH=&quot;/opt/homebrew/opt/openjdk/bin:$PATH&quot;\n\n</code></pre>\n<p>case set forever by using editior &quot; vim /etc/paths &quot;</p>\n<pre><code>/opt/homebrew/opt/openjdk/bin\n\n</code></pre>\n<p>must restart sometime the mac itself !!, some time not just need to restart termnial</p>\n<p>4- test installation</p>\n<pre><code>java -version\n</code></pre>\n"}],"owner":{"account_id":10912490,"reputation":2975,"user_id":8021418,"display_name":"Gina Gina"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":599728,"favorite_count":0,"down_vote_count":1,"up_vote_count":285,"accepted_answer_id":46828380,"answer_count":22,"score":284,"last_activity_date":1697614802,"creation_date":1494959469,"question_id":44009058,"body_markdown":"Even though  JRE 8  is installed on my MAC OS Yosemite 10.10.3,while running the Android present in tools in  sdk - the error - &quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal- how do i solve this issue?\r\n\r\n 1. I wanted to install Xamarin test recorder - after installing they\r\n    asked me to install Android sdk\r\n    \r\n 2. SDK is downloaded in Library/Developer/Xamarin/android-sdk \r\n\r\n 3. Now when I run Android present in tools folder - I get the error -\r\n    No Java run time  \r\n \r\n 4. I&#39;ve installed JRE 8 with get the verified\r\n    java version from their site\r\n\r\nCan someone please help!!","title":"Even though JRE 8 is installed on my MAC -&quot; No Java Runtime present,requesting to install &quot; gets displayed in terminal","body":"<p>Even though  JRE 8  is installed on my MAC OS Yosemite 10.10.3,while running the Android present in tools in  sdk - the error - \" No Java Runtime present,requesting to install \" gets displayed in terminal- how do i solve this issue?</p>\n\n<ol>\n<li><p>I wanted to install Xamarin test recorder - after installing they\nasked me to install Android sdk</p></li>\n<li><p>SDK is downloaded in Library/Developer/Xamarin/android-sdk </p></li>\n<li><p>Now when I run Android present in tools folder - I get the error -\nNo Java run time  </p></li>\n<li><p>I've installed JRE 8 with get the verified\njava version from their site</p></li>\n</ol>\n\n<p>Can someone please help!!</p>\n"},{"tags":["java","jvm","heap-dump","eclipse-memory-analyzer"],"answers":[{"comments":[{"owner":{"account_id":4408231,"reputation":1174,"user_id":3591946,"accept_rate":85,"display_name":"Kohei Nozaki"},"score":0,"creation_date":1697696179,"post_id":77314326,"comment_id":136312702,"body_markdown":"Unfortunately that doesn&#39;t work for my usecase, because non-ascii parts get converted into `.`.","body":"Unfortunately that doesn&#39;t work for my usecase, because non-ascii parts get converted into <code>.</code>."},{"owner":{"account_id":18866500,"reputation":431,"user_id":13762112,"display_name":"user13762112"},"score":0,"creation_date":1697736353,"post_id":77314326,"comment_id":136320508,"body_markdown":"It should have worked for a single byte[] array, as the help says:\n\nSave to a file the value of char[], String, StringBuffer or StringBuilder into a text file, or for a single primitive array store the elements as binary, or for other types, the printable value or the class name and address.\n\nbut perhaps there is a bug in https://git.eclipse.org/c/mat/org.eclipse.mat.git/tree/plugins/org.eclipse.mat.ui/src/org/eclipse/mat/ui/snapshot/actions/SaveValueAsQuery.java","body":"It should have worked for a single byte[] array, as the help says:  Save to a file the value of char[], String, StringBuffer or StringBuilder into a text file, or for a single primitive array store the elements as binary, or for other types, the printable value or the class name and address.  but perhaps there is a bug in <a href=\"https://git.eclipse.org/c/mat/org.eclipse.mat.git/tree/plugins/org.eclipse.mat.ui/src/org/eclipse/mat/ui/snapshot/actions/SaveValueAsQuery.java\" rel=\"nofollow noreferrer\">git.eclipse.org/c/mat/org.eclipse.mat.git/tree/plugins/&hellip;</a>"},{"owner":{"account_id":4408231,"reputation":1174,"user_id":3591946,"accept_rate":85,"display_name":"Kohei Nozaki"},"score":0,"creation_date":1697761300,"post_id":77314326,"comment_id":136323720,"body_markdown":"Thank you pointing that out, actually it seems to work with just single entry (it doesn&#39;t convert them into `.`) but not for multiple entries (the `.` conversion kicks in in that case). Now the question is how do I do this for 3 million entries.","body":"Thank you pointing that out, actually it seems to work with just single entry (it doesn&#39;t convert them into <code>.</code>) but not for multiple entries (the <code>.</code> conversion kicks in in that case). Now the question is how do I do this for 3 million entries."}],"tags":[],"owner":{"account_id":18866500,"reputation":431,"user_id":13762112,"display_name":"user13762112"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697614703,"creation_date":1697614703,"answer_id":77314326,"question_id":77286304,"body_markdown":"Select the byte array, then use Copy &gt; Save Value to File.\r\n","title":"How can I extract raw byte arrays stored in Map&lt;?, byte[]&gt; objects from a Java heap dump?","body":"<p>Select the byte array, then use Copy &gt; Save Value to File.</p>\n"}],"owner":{"account_id":4408231,"reputation":1174,"user_id":3591946,"accept_rate":85,"display_name":"Kohei Nozaki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697614703,"creation_date":1697186471,"question_id":77286304,"body_markdown":"I have a Java application (Kafka Streams app) where a few `ConcurrentSkipListMap` objects are maintained (in InMemoryWindowStore). The type of the key of the maps is `org.apache.kafka.common.utils.Bytes` and the values are `byte[]`. The byte arrays are serialized Protocol Buffers objects.\r\n\r\nI have taken a heap dump of this app for investigating an issue and I want to extract the byte arrays stored as the values of the maps, deserialize those byte arrays into Protocol Buffers objects and inspect them. Those maps contain 3 million mappings (based on what I see on Eclipse Memory Analyzer). Is there a good way to somehow extract those raw byte arrays in the maps in the heap dump?","title":"How can I extract raw byte arrays stored in Map&lt;?, byte[]&gt; objects from a Java heap dump?","body":"<p>I have a Java application (Kafka Streams app) where a few <code>ConcurrentSkipListMap</code> objects are maintained (in InMemoryWindowStore). The type of the key of the maps is <code>org.apache.kafka.common.utils.Bytes</code> and the values are <code>byte[]</code>. The byte arrays are serialized Protocol Buffers objects.</p>\n<p>I have taken a heap dump of this app for investigating an issue and I want to extract the byte arrays stored as the values of the maps, deserialize those byte arrays into Protocol Buffers objects and inspect them. Those maps contain 3 million mappings (based on what I see on Eclipse Memory Analyzer). Is there a good way to somehow extract those raw byte arrays in the maps in the heap dump?</p>\n"},{"tags":["java","serialization","deserialization","hessian"],"comments":[{"owner":{"account_id":2557108,"reputation":2556,"user_id":2218838,"accept_rate":58,"display_name":"Anderson"},"score":0,"creation_date":1449038977,"post_id":29813683,"comment_id":55828189,"body_markdown":"I try it again, find that hessian transforms the unknown type  to a `Hashmap` without throwing exceptions. But for `Class&lt;T&gt;` instance, `Class` is a well-known type, so it starts transforming and throws a `ClassNotFoundException` since `T` is unknown.","body":"I try it again, find that hessian transforms the unknown type  to a <code>Hashmap</code> without throwing exceptions. But for <code>Class&lt;T&gt;</code> instance, <code>Class</code> is a well-known type, so it starts transforming and throws a <code>ClassNotFoundException</code> since <code>T</code> is unknown."}],"answers":[{"comments":[{"owner":{"account_id":2557108,"reputation":2556,"user_id":2218838,"accept_rate":58,"display_name":"Anderson"},"score":0,"creation_date":1430190290,"post_id":29901716,"comment_id":47941437,"body_markdown":"Thanks a lot! But the answer doesn&#39;t mention why it can&#39;t skip the `Map` field since it matches case 1) ?","body":"Thanks a lot! But the answer doesn&#39;t mention why it can&#39;t skip the <code>Map</code> field since it matches case 1) ?"},{"owner":{"account_id":69707,"reputation":41791,"user_id":202694,"accept_rate":88,"display_name":"Pace"},"score":0,"creation_date":1430193789,"post_id":29901716,"comment_id":47942322,"body_markdown":"An item in a map is not a field in Java.  Case one is specifically talking about instances of a &quot;type&quot;.  A &quot;type&quot; in Hessian is a Class in Java.  So case 1 would only apply to unknown fields.  A HashMap in Java is an &quot;untyped map&quot; in Hessian terminology.","body":"An item in a map is not a field in Java.  Case one is specifically talking about instances of a &quot;type&quot;.  A &quot;type&quot; in Hessian is a Class in Java.  So case 1 would only apply to unknown fields.  A HashMap in Java is an &quot;untyped map&quot; in Hessian terminology."}],"tags":[],"owner":{"account_id":69707,"reputation":41791,"user_id":202694,"accept_rate":88,"display_name":"Pace"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697613877,"creation_date":1430153824,"answer_id":29901716,"question_id":29813683,"body_markdown":"This would depend on the tool itself.  `serialVersionUID` is intended for use by Java&#39;s built-in serializer (`ObjectOutputStream`) which, as best I can tell from reading the Hessian source, is not used by Hessian.\r\n\r\nFor Hessian specifically, the best source I can find which mentions these kinds of changes is [this email][1]:\r\n\r\n&gt; At least for Hessian, it&#39;s best to think of versioning as a set of\r\n&gt; types  of changes that can be handled.\r\n&gt; \r\n&gt; Specifically Hessian can manage the following kinds of changes:    1)\r\n&gt; if you add or drop a field, the side that doesn&#39;t understand the \r\n&gt; field will ignore it.    2) some field type changes are possible, if\r\n&gt; Hessian can convert (e.g.  int to long)    3) there&#39;s some flexibility\r\n&gt; on map(bean) types, depending on how much  information Hessian has\r\n&gt; (which is a reason to prefer concrete types.)\r\n&gt; \r\n&gt; So, if the sender sends an untyped map {&quot;field1&quot;, 10} and the target\r\n&gt; is  known to be MyValue { int field1; }, then Hessian can map the\r\n&gt; fields.\r\n&gt; \r\n&gt; But it cannot manage things like:    1) field name changes (the data\r\n&gt; will be dropped).    2) class name changes where the target is\r\n&gt; underdefined, like Object  field1. If you send a MyValue2 as the new\r\n&gt; field1, when the previous  version was MyValue1, Hessian can&#39;t make\r\n&gt; that automatic transition. (But  as with #3 above, a &quot;MyValue2 field1&quot;\r\n&gt; would give Hessian enough  information to translate.)    3) class\r\n&gt; splits, e.g. creating a subclass and pushing some fields  into it.   \r\n&gt; 4) map to list or list to map changes.\r\n\r\nBasically, I don&#39;t think Hessian intends to support unknown types in maps.\r\n\r\n  [1]: https://www.mail-archive.com/hessian-interest@caucho.com/msg01111.html","title":"How does serialization tool skip unknown fields during deserialization?","body":"<p>This would depend on the tool itself.  <code>serialVersionUID</code> is intended for use by Java's built-in serializer (<code>ObjectOutputStream</code>) which, as best I can tell from reading the Hessian source, is not used by Hessian.</p>\n<p>For Hessian specifically, the best source I can find which mentions these kinds of changes is <a href=\"https://www.mail-archive.com/hessian-interest@caucho.com/msg01111.html\" rel=\"nofollow noreferrer\">this email</a>:</p>\n<blockquote>\n<p>At least for Hessian, it's best to think of versioning as a set of\ntypes  of changes that can be handled.</p>\n<p>Specifically Hessian can manage the following kinds of changes:    1)\nif you add or drop a field, the side that doesn't understand the\nfield will ignore it.    2) some field type changes are possible, if\nHessian can convert (e.g.  int to long)    3) there's some flexibility\non map(bean) types, depending on how much  information Hessian has\n(which is a reason to prefer concrete types.)</p>\n<p>So, if the sender sends an untyped map {&quot;field1&quot;, 10} and the target\nis  known to be MyValue { int field1; }, then Hessian can map the\nfields.</p>\n<p>But it cannot manage things like:    1) field name changes (the data\nwill be dropped).    2) class name changes where the target is\nunderdefined, like Object  field1. If you send a MyValue2 as the new\nfield1, when the previous  version was MyValue1, Hessian can't make\nthat automatic transition. (But  as with #3 above, a &quot;MyValue2 field1&quot;\nwould give Hessian enough  information to translate.)    3) class\nsplits, e.g. creating a subclass and pushing some fields  into it.<br />\n4) map to list or list to map changes.</p>\n</blockquote>\n<p>Basically, I don't think Hessian intends to support unknown types in maps.</p>\n"}],"owner":{"account_id":2557108,"reputation":2556,"user_id":2218838,"accept_rate":58,"display_name":"Anderson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1326,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697613877,"creation_date":1429763258,"question_id":29813683,"body_markdown":"How does serialization tool(i.e. hessian) deserialize a class of different version with the same `serialVersionUID`? In most cases, it can skip those unknown(not found in class loader) fields and keep compatible. But last time, I tried appending a new field of `Map&lt;String, Object&gt;`, put some unknown object into the map, then it threw a `ClassNotFoundException`. \r\n\r\n - **Why can&#39;t skip the map like the others?** \r\n - Is it a problem associated with the tool&#39;s implementation or serialization mechanism?","title":"How does serialization tool skip unknown fields during deserialization?","body":"<p>How does serialization tool(i.e. hessian) deserialize a class of different version with the same <code>serialVersionUID</code>? In most cases, it can skip those unknown(not found in class loader) fields and keep compatible. But last time, I tried appending a new field of <code>Map&lt;String, Object&gt;</code>, put some unknown object into the map, then it threw a <code>ClassNotFoundException</code>. </p>\n\n<ul>\n<li><strong>Why can't skip the map like the others?</strong> </li>\n<li>Is it a problem associated with the tool's implementation or serialization mechanism?</li>\n</ul>\n"},{"tags":["java","mongodb","spring-batch","spring-data-mongodb"],"answers":[{"tags":[],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697613784,"creation_date":1697576621,"answer_id":77312239,"question_id":77312012,"body_markdown":"I didn&#39;t set the Collection...\r\n\r\n    public XyzMongoItemReader(\r\n            final MongoTemplate template,\r\n            final Query query) {\r\n        setTemplate(template);\r\n        setCollection(Xyz.class.getSimpleName());\r\n        setQuery(query);\r\n        setTargetType(Xyz.class);\r\n    }\r\n\r\nReader:\r\n\r\n    @StepScope\r\n    @Bean\r\n    @Override\r\n    public ItemReader&lt;Xyz&gt; reader() throws Exception {\r\n        return new XyzMongoItemReader(mongoTemplate, new Query());\r\n    }\r\n\r\nusing queryString instead of Query requires also to setSort:\r\n\r\n    public XyzMongoItemReader(\r\n            final MongoTemplate template,\r\n            final String query, \r\n            final Map&lt;String, Sort.Direction&gt; sorts) {\r\n    \tsetTemplate(template);\r\n    \tsetCollection(Xyz.class.getSimpleName());\r\n    \tsetQuery(query);\r\n    \tsetSort(sorts);\r\n    \tsetTargetType(parametrizedType);\r\n    }\r\n\r\nReader:\r\n\r\n    @StepScope\r\n    @Bean\r\n    @Override\r\n    public ItemReader&lt;Xyz&gt; reader() throws Exception {\r\n        return new XyzMongoItemReader(mongoTemplate, &quot;{}&quot;, Map.of(&quot;_id&quot;, Sort.Direction.ASC));\r\n    }\r\n\r\n","title":"How to read all documents of mongo collection using Spring Batch?","body":"<p>I didn't set the Collection...</p>\n<pre><code>public XyzMongoItemReader(\n        final MongoTemplate template,\n        final Query query) {\n    setTemplate(template);\n    setCollection(Xyz.class.getSimpleName());\n    setQuery(query);\n    setTargetType(Xyz.class);\n}\n</code></pre>\n<p>Reader:</p>\n<pre><code>@StepScope\n@Bean\n@Override\npublic ItemReader&lt;Xyz&gt; reader() throws Exception {\n    return new XyzMongoItemReader(mongoTemplate, new Query());\n}\n</code></pre>\n<p>using queryString instead of Query requires also to setSort:</p>\n<pre><code>public XyzMongoItemReader(\n        final MongoTemplate template,\n        final String query, \n        final Map&lt;String, Sort.Direction&gt; sorts) {\n    setTemplate(template);\n    setCollection(Xyz.class.getSimpleName());\n    setQuery(query);\n    setSort(sorts);\n    setTargetType(parametrizedType);\n}\n</code></pre>\n<p>Reader:</p>\n<pre><code>@StepScope\n@Bean\n@Override\npublic ItemReader&lt;Xyz&gt; reader() throws Exception {\n    return new XyzMongoItemReader(mongoTemplate, &quot;{}&quot;, Map.of(&quot;_id&quot;, Sort.Direction.ASC));\n}\n</code></pre>\n"}],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77312239,"answer_count":1,"score":0,"last_activity_date":1697613784,"creation_date":1697573732,"question_id":77312012,"body_markdown":"I have to read an entire collection from MongoDB without filters during spring batch.\r\n\r\nI have created a class XyzMongoItemReader that extends MongoItemReader&lt;Xyz&gt; \r\non XyzMongoItemReader constructor I&#39;m setting the following field:\r\n\r\n\tpublic XyzMongoItemReader(\r\n\t\t\tfinal MongoTemplate template,\r\n\t\t\tfinal Query query) {\r\n\t\tsetTemplate(template);\r\n\t\tsetQuery(query);\r\n\t\tsetTargetType(Xyz.class);\r\n\t}\r\n\r\nThe Xyz class is annotated with @Document and fields are annotated with @Field:\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Document\r\n    @JsonInclude(JsonInclude.Include.NON_NULL)\r\n    public class Xyz {\r\n    \r\n    \t@Field\r\n    \t@JsonProperty\r\n    \tprotected String x;\r\n    \t\r\n    \t@Field\r\n    \t@JsonProperty\r\n    \tprivate String y;\r\n    \r\n    \t@Field\r\n    \t@JsonProperty\r\n    \tprivate Z z;\r\n    \r\n    }\r\n\r\nThe configuration class is:\r\n\r\n    @Configuration\r\n    @EnableBatchProcessing\r\n    public class XyzBatchConfigurerReaderFromMongoWriterToRedis extends AbstractBatchConfigurer&lt;Xyz, String&gt; {\r\n    \r\n    \t@Autowired\r\n    \tMongoTemplate mongoTemplate;\r\n    \r\n    \t@StepScope\r\n    \t@Bean\r\n    \t@Override\r\n    \tpublic ItemReader&lt;Xyz&gt; reader() throws Exception {\r\n    \t\treturn new XyzMongoItemReader(mongoTemplate, new Query());\r\n    \t}\r\n\r\n        ... processor ...\r\n\r\n        ... writer ...\r\n    \r\n    }\r\n\r\nThe collection on Mongo has 20 records, but when the read method is executed, there is no document retrieved.\r\n\r\nIs it sufficient to set those 3 parameters?\r\n- template\r\n- query\r\n- targetType\r\n\r\nIs &quot;new Query()&quot; the right query to use to be able to read all the document on the collection?\r\n\r\n","title":"How to read all documents of mongo collection using Spring Batch?","body":"<p>I have to read an entire collection from MongoDB without filters during spring batch.</p>\n<p>I have created a class XyzMongoItemReader that extends MongoItemReader\non XyzMongoItemReader constructor I'm setting the following field:</p>\n<pre><code>public XyzMongoItemReader(\n        final MongoTemplate template,\n        final Query query) {\n    setTemplate(template);\n    setQuery(query);\n    setTargetType(Xyz.class);\n}\n</code></pre>\n<p>The Xyz class is annotated with @Document and fields are annotated with @Field:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Document\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic class Xyz {\n\n    @Field\n    @JsonProperty\n    protected String x;\n    \n    @Field\n    @JsonProperty\n    private String y;\n\n    @Field\n    @JsonProperty\n    private Z z;\n\n}\n</code></pre>\n<p>The configuration class is:</p>\n<pre><code>@Configuration\n@EnableBatchProcessing\npublic class XyzBatchConfigurerReaderFromMongoWriterToRedis extends AbstractBatchConfigurer&lt;Xyz, String&gt; {\n\n    @Autowired\n    MongoTemplate mongoTemplate;\n\n    @StepScope\n    @Bean\n    @Override\n    public ItemReader&lt;Xyz&gt; reader() throws Exception {\n        return new XyzMongoItemReader(mongoTemplate, new Query());\n    }\n\n    ... processor ...\n\n    ... writer ...\n\n}\n</code></pre>\n<p>The collection on Mongo has 20 records, but when the read method is executed, there is no document retrieved.</p>\n<p>Is it sufficient to set those 3 parameters?</p>\n<ul>\n<li>template</li>\n<li>query</li>\n<li>targetType</li>\n</ul>\n<p>Is &quot;new Query()&quot; the right query to use to be able to read all the document on the collection?</p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1697610868,"post_id":77313957,"comment_id":136299839,"body_markdown":"What is not understandable by the message: *Cannot insert explicit value for identity column in table &#39;entityA&#39; when IDENTITY_INSERT is set to OFF.*","body":"What is not understandable by the message: <i>Cannot insert explicit value for identity column in table &#39;entityA&#39; when IDENTITY_INSERT is set to OFF.</i>"},{"owner":{"account_id":2852205,"reputation":891,"user_id":2449161,"accept_rate":80,"display_name":"2dor"},"score":0,"creation_date":1697610929,"post_id":77313957,"comment_id":136299852,"body_markdown":"@Jens please read before writing. thank you","body":"@Jens please read before writing. thank you"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1697610958,"post_id":77313957,"comment_id":136299856,"body_markdown":"@2dor that is the advice you should have taken. Jens is right in asking this question","body":"@2dor that is the advice you should have taken. Jens is right in asking this question"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1697611022,"post_id":77313957,"comment_id":136299862,"body_markdown":"`@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;sequence&quot;)` wil generate the id","body":"<code>@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;sequence&quot;)</code> wil generate the id"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1697611048,"post_id":77313957,"comment_id":136299868,"body_markdown":"@2dor BTW: I read before writing","body":"@2dor BTW: I read before writing"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1697611115,"post_id":77313957,"comment_id":136299881,"body_markdown":"@2dor I know in the bit of code you&#39;ve posted, you only set the field values, but if you look at the error message: &quot;insert into dbo.entityA (field1, field2, id) values (?,?,?)&quot; you can clearly see that that is not the only part being persisted","body":"@2dor I know in the bit of code you&#39;ve posted, you only set the field values, but if you look at the error message: &quot;insert into dbo.entityA (field1, field2, id) values (?,?,?)&quot; you can clearly see that that is not the only part being persisted"},{"owner":{"account_id":2852205,"reputation":891,"user_id":2449161,"accept_rate":80,"display_name":"2dor"},"score":0,"creation_date":1697611371,"post_id":77313957,"comment_id":136299927,"body_markdown":"@Jens if you suggest removing the generated value annotation, this would not work because then I would get &quot;ids for this class must be manually assigned before calling save()&quot;. I&#39;ve already played with that, also changing the strategy to Identity","body":"@Jens if you suggest removing the generated value annotation, this would not work because then I would get &quot;ids for this class must be manually assigned before calling save()&quot;. I&#39;ve already played with that, also changing the strategy to Identity"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1697611450,"post_id":77313957,"comment_id":136299944,"body_markdown":"@2dor I do not suggest to remove it. I only got you a hint where the id comes from. I would suggest set `IDENTITY_INSERT` to `ON`","body":"@2dor I do not suggest to remove it. I only got you a hint where the id comes from. I would suggest set <code>IDENTITY_INSERT</code> to <code>ON</code>"},{"owner":{"account_id":2852205,"reputation":891,"user_id":2449161,"accept_rate":80,"display_name":"2dor"},"score":0,"creation_date":1697611541,"post_id":77313957,"comment_id":136299960,"body_markdown":"@Jens that is bad practice and I can&#39;t set the identity insert to on. something else must be wrong in what I&#39;m doing","body":"@Jens that is bad practice and I can&#39;t set the identity insert to on. something else must be wrong in what I&#39;m doing"},{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1697611884,"post_id":77313957,"comment_id":136300010,"body_markdown":"Does this answer your question? [Cannot insert explicit value for identity column in table &#39;table&#39; when IDENTITY\\_INSERT is set to OFF](https://stackoverflow.com/questions/1334012/cannot-insert-explicit-value-for-identity-column-in-table-table-when-identity)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/1334012/cannot-insert-explicit-value-for-identity-column-in-table-table-when-identity\">Cannot insert explicit value for identity column in table &#39;table&#39; when IDENTITY_INSERT is set to OFF</a>"},{"owner":{"account_id":2852205,"reputation":891,"user_id":2449161,"accept_rate":80,"display_name":"2dor"},"score":0,"creation_date":1697612834,"post_id":77313957,"comment_id":136300139,"body_markdown":"@ArunSudhakaran no as I do not set value for id","body":"@ArunSudhakaran no as I do not set value for id"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1697612862,"post_id":77313957,"comment_id":136300144,"body_markdown":"@2dor as it is explained above, you do, just not manually","body":"@2dor as it is explained above, you do, just not manually"}],"answers":[{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697613576,"creation_date":1697613576,"answer_id":77314206,"question_id":77313957,"body_markdown":"You basically have the id generation duplicated.\r\n\r\nYour Hibernate mapping tells it to get a new id from a sequence an then use that in the insert statement.\r\n\r\nBut your table definition tries to create the id itself on insert.\r\n\r\nSo you should either adjust your Hibernate mapping to not generate an id explicitly, but to rely on the database to do that. \r\nOr you should remove the `DEFAULT (NEXT VALUE FOR sequence)` part from your column declaration in the database.","title":"Hibernate throws exception when trying to persist entity","body":"<p>You basically have the id generation duplicated.</p>\n<p>Your Hibernate mapping tells it to get a new id from a sequence an then use that in the insert statement.</p>\n<p>But your table definition tries to create the id itself on insert.</p>\n<p>So you should either adjust your Hibernate mapping to not generate an id explicitly, but to rely on the database to do that.\nOr you should remove the <code>DEFAULT (NEXT VALUE FOR sequence)</code> part from your column declaration in the database.</p>\n"}],"owner":{"account_id":2852205,"reputation":891,"user_id":2449161,"accept_rate":80,"display_name":"2dor"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77314206,"answer_count":1,"score":0,"last_activity_date":1697613576,"creation_date":1697610792,"question_id":77313957,"body_markdown":"I have an entity &quot;EntityA&quot; that has the following id definition\r\n\r\n````\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;sequence&quot;)\r\n  @SequenceGenerator(name = &quot;sequence&quot;, sequenceName = &quot;sequence&quot;, allocationSize = 1)\r\n  private Long id;\r\n````\r\n\r\nWhen trying to persist a new entry, the following logs appear:\r\n````\r\nHibernate: select next value for sequence\r\nHibernate: insert into dbo.entityA (field1, field2, id) values (?,?,?)\r\nCaused by: java.sql.BatchUpdateException: Cannot insert explicit value for identity column in table &#39;entityA&#39; when IDENTITY_INSERT is set to OFF.\r\n````\r\n\r\nTable definition\r\n\r\n````\r\n\r\nIF NOT EXISTS (SELECT 1 FROM sys.objects WHERE object_id = OBJECT_ID(&#39;dbo.entityA&#39;) AND type = &#39;SO&#39;)\r\nBEGIN\r\nCREATE SEQUENCE sequence\r\n    AS BIGINT\r\n    START WITH 1\r\n    INCREMENT BY 1\r\n    MINVALUE 1\r\n    NO MAXVALUE\r\n    CACHE 1000;\r\nEND\r\nGO\r\n\r\nIF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N&#39;dbo.entityA&#39;) AND type in (N&#39;U&#39;))\r\nBEGIN\r\n    CREATE TABLE dbo.entityA(\r\n        id BIGINT NOT NULL CONSTRAINT PK_id PRIMARY KEY DEFAULT (NEXT VALUE FOR sequence),\r\n        field1 varchar(20) not null,\r\n        field2 varchar(20) not null\r\n    );\r\nEND\r\n````\r\n\r\nPersisting is a very basic creation, without me setting the id\r\n````\r\nEntityA entityA = new EntityA();\r\nentityA.setField1(&quot;test&quot;);\r\nentityA.setField2(&quot;test);\r\nentityARepository.save(entityA);\r\n````\r\n\r\n\r\nHow can I fix this? \r\n","title":"Hibernate throws exception when trying to persist entity","body":"<p>I have an entity &quot;EntityA&quot; that has the following id definition</p>\n<pre><code>  @Id\n  @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;sequence&quot;)\n  @SequenceGenerator(name = &quot;sequence&quot;, sequenceName = &quot;sequence&quot;, allocationSize = 1)\n  private Long id;\n</code></pre>\n<p>When trying to persist a new entry, the following logs appear:</p>\n<pre><code>Hibernate: select next value for sequence\nHibernate: insert into dbo.entityA (field1, field2, id) values (?,?,?)\nCaused by: java.sql.BatchUpdateException: Cannot insert explicit value for identity column in table 'entityA' when IDENTITY_INSERT is set to OFF.\n</code></pre>\n<p>Table definition</p>\n<pre><code>\nIF NOT EXISTS (SELECT 1 FROM sys.objects WHERE object_id = OBJECT_ID('dbo.entityA') AND type = 'SO')\nBEGIN\nCREATE SEQUENCE sequence\n    AS BIGINT\n    START WITH 1\n    INCREMENT BY 1\n    MINVALUE 1\n    NO MAXVALUE\n    CACHE 1000;\nEND\nGO\n\nIF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'dbo.entityA') AND type in (N'U'))\nBEGIN\n    CREATE TABLE dbo.entityA(\n        id BIGINT NOT NULL CONSTRAINT PK_id PRIMARY KEY DEFAULT (NEXT VALUE FOR sequence),\n        field1 varchar(20) not null,\n        field2 varchar(20) not null\n    );\nEND\n</code></pre>\n<p>Persisting is a very basic creation, without me setting the id</p>\n<pre><code>EntityA entityA = new EntityA();\nentityA.setField1(&quot;test&quot;);\nentityA.setField2(&quot;test);\nentityARepository.save(entityA);\n</code></pre>\n<p>How can I fix this?</p>\n"},{"tags":["java","visual-studio-code","configuration"],"comments":[{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1698284526,"post_id":77310302,"comment_id":136386915,"body_markdown":"May I know what&#39;s going on with the problem? If it has been solved, can you change the status of the answer to help more people with similar problems.","body":"May I know what&#39;s going on with the problem? If it has been solved, can you change the status of the answer to help more people with similar problems."},{"owner":{"account_id":21940634,"reputation":79,"user_id":16221236,"display_name":"Ronan"},"score":0,"creation_date":1698402477,"post_id":77310302,"comment_id":136403945,"body_markdown":"The solution was to go on InteliJ, and I think the problem was I was building with a makefile the javaprojet and the lsp of vscode cant resolve this way.","body":"The solution was to go on InteliJ, and I think the problem was I was building with a makefile the javaprojet and the lsp of vscode cant resolve this way."},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1698715788,"post_id":77310302,"comment_id":136437740,"body_markdown":"If you find the solution, Please consider answering it and accepting it as an answer to change its status to Answered. It will also help others to solve a similar issue. See [can I answer my own question..](https://stackoverflow.com/help/self-answer), Just a reminder :)","body":"If you find the solution, Please consider answering it and accepting it as an answer to change its status to Answered. It will also help others to solve a similar issue. See <a href=\"https://stackoverflow.com/help/self-answer\">can I answer my own question..</a>, Just a reminder :)"}],"answers":[{"tags":[],"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697613044,"creation_date":1697613044,"answer_id":77314148,"question_id":77310302,"body_markdown":"Try using the following setting：\r\n\r\n```json\r\n&quot;java.project.referencedLibraries&quot;: {\r\n    &quot;include&quot;: [\r\n        &quot;lib/**/*.jar&quot;,\r\n        &quot;%PATH_TO_FX%/lib/*.jar&quot;\r\n    ],\r\n    &quot;sources&quot;: {\r\n        &quot;%PATH_TO_FX%/lib/javafx.base.jar&quot;: &quot;%PATH_TO_FX%/src.zip&quot;,\r\n        &quot;%PATH_TO_FX%/lib/javafx.controls.jar&quot;: &quot;%PATH_TO_FX%/src.zip&quot;,\r\n        &quot;%PATH_TO_FX%/lib/javafx.fxml.jar&quot;: &quot;%PATH_TO_FX%/src.zip&quot;,\r\n        &quot;%PATH_TO_FX%/lib/javafx.graphics.jar&quot;: &quot;%PATH_TO_FX%/src.zip&quot;,\r\n        &quot;%PATH_TO_FX%/lib/javafx.media.jar&quot;: &quot;%PATH_TO_FX%/src.zip&quot;,\r\n        &quot;%PATH_TO_FX%/lib/javafx.swing.jar&quot;: &quot;%PATH_TO_FX%/src.zip&quot;,\r\n        &quot;%PATH_TO_FX%/lib/javafx.web.jar&quot;: &quot;%PATH_TO_FX%/src.zip&quot;,\r\n        &quot;%PATH_TO_FX%/lib/javafx.swt.jar&quot;: &quot;%PATH_TO_FX%/src.zip&quot;\r\n    }\r\n}\r\n```\r\n\r\n[Also this document details how to use *javafx* in vscode.][1]\r\n\r\n\r\n  [1]: https://openjfx.io/openjfx-docs/#IDE-VSCode","title":"javafx.base cannot be resolved to a module in vscode","body":"<p>Try using the following setting：</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;java.project.referencedLibraries&quot;: {\n    &quot;include&quot;: [\n        &quot;lib/**/*.jar&quot;,\n        &quot;%PATH_TO_FX%/lib/*.jar&quot;\n    ],\n    &quot;sources&quot;: {\n        &quot;%PATH_TO_FX%/lib/javafx.base.jar&quot;: &quot;%PATH_TO_FX%/src.zip&quot;,\n        &quot;%PATH_TO_FX%/lib/javafx.controls.jar&quot;: &quot;%PATH_TO_FX%/src.zip&quot;,\n        &quot;%PATH_TO_FX%/lib/javafx.fxml.jar&quot;: &quot;%PATH_TO_FX%/src.zip&quot;,\n        &quot;%PATH_TO_FX%/lib/javafx.graphics.jar&quot;: &quot;%PATH_TO_FX%/src.zip&quot;,\n        &quot;%PATH_TO_FX%/lib/javafx.media.jar&quot;: &quot;%PATH_TO_FX%/src.zip&quot;,\n        &quot;%PATH_TO_FX%/lib/javafx.swing.jar&quot;: &quot;%PATH_TO_FX%/src.zip&quot;,\n        &quot;%PATH_TO_FX%/lib/javafx.web.jar&quot;: &quot;%PATH_TO_FX%/src.zip&quot;,\n        &quot;%PATH_TO_FX%/lib/javafx.swt.jar&quot;: &quot;%PATH_TO_FX%/src.zip&quot;\n    }\n}\n</code></pre>\n<p><a href=\"https://openjfx.io/openjfx-docs/#IDE-VSCode\" rel=\"nofollow noreferrer\">Also this document details how to use <em>javafx</em> in vscode.</a></p>\n"}],"owner":{"account_id":21940634,"reputation":79,"user_id":16221236,"display_name":"Ronan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697613044,"creation_date":1697556375,"question_id":77310302,"body_markdown":"I am on a java project where I need to use javafx but vscode does not recognize it.\r\n[![screen of the error](https://i.stack.imgur.com/YAaz7.png)](https://i.stack.imgur.com/YAaz7.png)\r\nI add In the Java Projects all the .jar from the javafx librarie like this:\r\n[![References Libraries](https://i.stack.imgur.com/2C3LO.png)](https://i.stack.imgur.com/2C3LO.png)\r\nI have try a lot of thing without any luck. Do you have an idea of how to fix that?\r\n\r\nI have tried to modif the settings.json inside the .vscode like this:\r\n\r\n```\r\njson\r\n{\r\n    &quot;java.classPath&quot;: [\r\n        &quot;/path/to/library1.jar&quot;,\r\n        &quot;/path/to/library2.jar&quot;\r\n    ],\r\n    &quot;java.project.referencedLibraries&quot;: [\r\n        &quot;lib/**/*.jar&quot;,\r\n        &quot;/usr/lib/javafx-sdk-15.0.1/lib/javafx.base.jar&quot;,\r\n        &quot;/usr/lib/javafx-sdk-15.0.1/lib/javafx.controls.jar&quot;,\r\n        &quot;/usr/lib/javafx-sdk-15.0.1/lib/javafx.fxml.jar&quot;,\r\n        &quot;/usr/lib/javafx-sdk-15.0.1/lib/javafx.graphics.jar&quot;,\r\n        &quot;/usr/lib/javafx-sdk-15.0.1/lib/javafx.media.jar&quot;,\r\n        &quot;/usr/lib/javafx-sdk-15.0.1/lib/javafx.swing.jar&quot;,\r\n        &quot;/usr/lib/javafx-sdk-15.0.1/lib/javafx.web.jar&quot;,\r\n        &quot;/usr/lib/javafx-sdk-15.0.1/lib/javafx-swt.jar&quot;,\r\n        &quot;/home/ronan/Documents/Projets/Bin/JizLib.jar&quot;,\r\n        &quot;/home/ronan/Documents/Projets/Bin/JizoM.jar&quot;,\r\n        &quot;/home/ronan/Documents/Projets/Bin/JizoMSrv.jar&quot;,\r\n        &quot;/home/ronan/Documents/Projets/Bin/Task.jar&quot;,\r\n        &quot;/home/ronan/Documents/Projets/ppg/src/org/phypo/PPg/PPgLib.jar&quot;\r\n    ]\r\n}\r\n```\r\nBut this does not change anything.","title":"javafx.base cannot be resolved to a module in vscode","body":"<p>I am on a java project where I need to use javafx but vscode does not recognize it.\n<a href=\"https://i.stack.imgur.com/YAaz7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YAaz7.png\" alt=\"screen of the error\" /></a>\nI add In the Java Projects all the .jar from the javafx librarie like this:\n<a href=\"https://i.stack.imgur.com/2C3LO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2C3LO.png\" alt=\"References Libraries\" /></a>\nI have try a lot of thing without any luck. Do you have an idea of how to fix that?</p>\n<p>I have tried to modif the settings.json inside the .vscode like this:</p>\n<pre><code>json\n{\n    &quot;java.classPath&quot;: [\n        &quot;/path/to/library1.jar&quot;,\n        &quot;/path/to/library2.jar&quot;\n    ],\n    &quot;java.project.referencedLibraries&quot;: [\n        &quot;lib/**/*.jar&quot;,\n        &quot;/usr/lib/javafx-sdk-15.0.1/lib/javafx.base.jar&quot;,\n        &quot;/usr/lib/javafx-sdk-15.0.1/lib/javafx.controls.jar&quot;,\n        &quot;/usr/lib/javafx-sdk-15.0.1/lib/javafx.fxml.jar&quot;,\n        &quot;/usr/lib/javafx-sdk-15.0.1/lib/javafx.graphics.jar&quot;,\n        &quot;/usr/lib/javafx-sdk-15.0.1/lib/javafx.media.jar&quot;,\n        &quot;/usr/lib/javafx-sdk-15.0.1/lib/javafx.swing.jar&quot;,\n        &quot;/usr/lib/javafx-sdk-15.0.1/lib/javafx.web.jar&quot;,\n        &quot;/usr/lib/javafx-sdk-15.0.1/lib/javafx-swt.jar&quot;,\n        &quot;/home/ronan/Documents/Projets/Bin/JizLib.jar&quot;,\n        &quot;/home/ronan/Documents/Projets/Bin/JizoM.jar&quot;,\n        &quot;/home/ronan/Documents/Projets/Bin/JizoMSrv.jar&quot;,\n        &quot;/home/ronan/Documents/Projets/Bin/Task.jar&quot;,\n        &quot;/home/ronan/Documents/Projets/ppg/src/org/phypo/PPg/PPgLib.jar&quot;\n    ]\n}\n</code></pre>\n<p>But this does not change anything.</p>\n"},{"tags":["java","android","firebase","google-cloud-firestore"],"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1694932895,"post_id":77118782,"comment_id":135954811,"body_markdown":"What exactly isn&#39;t clear from the error message?","body":"What exactly isn&#39;t clear from the error message?"},{"owner":{"account_id":5644605,"reputation":341,"user_id":4467171,"display_name":"Miha M"},"score":0,"creation_date":1694934762,"post_id":77118782,"comment_id":135954912,"body_markdown":"@AlexMamo I understand the error message. I am looking for suggestions on how to achieve what I&#39;m trying to do without using paid services like Algolia.","body":"@AlexMamo I understand the error message. I am looking for suggestions on how to achieve what I&#39;m trying to do without using paid services like Algolia."}],"owner":{"account_id":5644605,"reputation":341,"user_id":4467171,"display_name":"Miha M"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697612980,"creation_date":1694884127,"question_id":77118782,"body_markdown":"I am trying to implement a search feature in my Android app and am stuck with implementing it.\r\n\r\nThe app uses Firebase Firestore as a database. It has a collection called **questions** with lots of documents that use string fields **choice_a** and **choice_b**.\r\n\r\nI want to query all documents IF the user query contains/starts with any word that is mentioned in choice_a or choice_b fields.\r\n\r\nThis code works when query only one field:\r\n\r\n    firebaseFirestore.collection(&quot;questions&quot;)\r\n    \t.where(Filter.or(\r\n\t\t\t\tFilter.and(\r\n\t\t\t\t\t\tFilter.greaterThanOrEqualTo(&quot;choice_a&quot;, textQuery),\r\n\t\t\t\t\t\tFilter.lessThanOrEqualTo(&quot;choice_a&quot;, textQuery + &#39;\\uf8ff&#39;)\r\n\t\t\t\t),\r\n\t\t\t\tFilter.and(\r\n\t\t\t\t\t\tFilter.greaterThanOrEqualTo(&quot;choice_a&quot;, textQuery.toLowerCase()),\r\n\t\t\t\t\t\tFilter.lessThanOrEqualTo(&quot;choice_a&quot;, textQuery.toLowerCase() + &#39;\\uf8ff&#39;)\r\n\t\t\t\t),\r\n\t\t\t\tFilter.and(\r\n\t\t\t\t\t\tFilter.greaterThanOrEqualTo(&quot;choice_a&quot;, textQuery.substring(0, 1).toUpperCase() + textQuery.substring(1)),\r\n\t\t\t\t\t\tFilter.lessThanOrEqualTo(&quot;choice_a&quot;, textQuery.substring(0, 1).toUpperCase() + textQuery.substring(1) + &#39;\\uf8ff&#39;)\r\n\t\t\t\t)\r\n\t\t\t)\r\n    \t)\r\n    \t.get();\r\n\r\nBut it doesn&#39;t work if use two fields like this:\r\n\r\n    firebaseFirestore.collection(&quot;questions&quot;)\r\n    \t.where(Filter.or(\r\n\t\t\t\tFilter.and(\r\n\t\t\t\t\t\tFilter.greaterThanOrEqualTo(&quot;choice_a&quot;, textQuery),\r\n\t\t\t\t\t\tFilter.lessThanOrEqualTo(&quot;choice_a&quot;, textQuery + &#39;\\uf8ff&#39;)\r\n\t\t\t\t),\r\n\t\t\t\tFilter.and(\r\n\t\t\t\t\t\tFilter.greaterThanOrEqualTo(&quot;choice_a&quot;, textQuery.toLowerCase()),\r\n\t\t\t\t\t\tFilter.lessThanOrEqualTo(&quot;choice_a&quot;, textQuery.toLowerCase() + &#39;\\uf8ff&#39;)\r\n\t\t\t\t),\r\n\t\t\t\tFilter.and(\r\n\t\t\t\t\t\tFilter.greaterThanOrEqualTo(&quot;choice_a&quot;, textQuery.substring(0, 1).toUpperCase() + textQuery.substring(1)),\r\n\t\t\t\t\t\tFilter.lessThanOrEqualTo(&quot;choice_a&quot;, textQuery.substring(0, 1).toUpperCase() + textQuery.substring(1) + &#39;\\uf8ff&#39;)\r\n\t\t\t\t),\r\n\t\t\t\tFilter.and(\r\n\t\t\t\t\t\tFilter.greaterThanOrEqualTo(&quot;choice_b&quot;, textQuery),\r\n\t\t\t\t\t\tFilter.lessThanOrEqualTo(&quot;choice_b&quot;, textQuery + &#39;\\uf8ff&#39;)\r\n\t\t\t\t),\r\n\t\t\t\tFilter.and(\r\n\t\t\t\t\t\tFilter.greaterThanOrEqualTo(&quot;choice_b&quot;, textQuery.toLowerCase()),\r\n\t\t\t\t\t\tFilter.lessThanOrEqualTo(&quot;choice_b&quot;, textQuery.toLowerCase() + &#39;\\uf8ff&#39;)\r\n\t\t\t\t),\r\n\t\t\t\tFilter.and(\r\n\t\t\t\t\t\tFilter.greaterThanOrEqualTo(&quot;choice_b&quot;, textQuery.substring(0, 1).toUpperCase() + textQuery.substring(1)),\r\n\t\t\t\t\t\tFilter.lessThanOrEqualTo(&quot;choice_b&quot;, textQuery.substring(0, 1).toUpperCase() + textQuery.substring(1) + &#39;\\uf8ff&#39;)\r\n\t\t\t\t)\r\n\t\t\t)\r\n    \t)\r\n    \t.get();\r\n\r\n**Error:** \r\n\r\n&gt; All where filters with an inequality (notEqualTo, notIn, lessThan, lessThanOrEqualTo, greaterThan, or greaterThanOrEqualTo) must be on the same field. But you have filters on &#39;choice_a&#39; and &#39;choice_b&#39;\r\n\r\nHow can I achieve this?","title":"How to search multiple fields in Firestore using Filter?","body":"<p>I am trying to implement a search feature in my Android app and am stuck with implementing it.</p>\n<p>The app uses Firebase Firestore as a database. It has a collection called <strong>questions</strong> with lots of documents that use string fields <strong>choice_a</strong> and <strong>choice_b</strong>.</p>\n<p>I want to query all documents IF the user query contains/starts with any word that is mentioned in choice_a or choice_b fields.</p>\n<p>This code works when query only one field:</p>\n<pre><code>firebaseFirestore.collection(&quot;questions&quot;)\n    .where(Filter.or(\n            Filter.and(\n                    Filter.greaterThanOrEqualTo(&quot;choice_a&quot;, textQuery),\n                    Filter.lessThanOrEqualTo(&quot;choice_a&quot;, textQuery + '\\uf8ff')\n            ),\n            Filter.and(\n                    Filter.greaterThanOrEqualTo(&quot;choice_a&quot;, textQuery.toLowerCase()),\n                    Filter.lessThanOrEqualTo(&quot;choice_a&quot;, textQuery.toLowerCase() + '\\uf8ff')\n            ),\n            Filter.and(\n                    Filter.greaterThanOrEqualTo(&quot;choice_a&quot;, textQuery.substring(0, 1).toUpperCase() + textQuery.substring(1)),\n                    Filter.lessThanOrEqualTo(&quot;choice_a&quot;, textQuery.substring(0, 1).toUpperCase() + textQuery.substring(1) + '\\uf8ff')\n            )\n        )\n    )\n    .get();\n</code></pre>\n<p>But it doesn't work if use two fields like this:</p>\n<pre><code>firebaseFirestore.collection(&quot;questions&quot;)\n    .where(Filter.or(\n            Filter.and(\n                    Filter.greaterThanOrEqualTo(&quot;choice_a&quot;, textQuery),\n                    Filter.lessThanOrEqualTo(&quot;choice_a&quot;, textQuery + '\\uf8ff')\n            ),\n            Filter.and(\n                    Filter.greaterThanOrEqualTo(&quot;choice_a&quot;, textQuery.toLowerCase()),\n                    Filter.lessThanOrEqualTo(&quot;choice_a&quot;, textQuery.toLowerCase() + '\\uf8ff')\n            ),\n            Filter.and(\n                    Filter.greaterThanOrEqualTo(&quot;choice_a&quot;, textQuery.substring(0, 1).toUpperCase() + textQuery.substring(1)),\n                    Filter.lessThanOrEqualTo(&quot;choice_a&quot;, textQuery.substring(0, 1).toUpperCase() + textQuery.substring(1) + '\\uf8ff')\n            ),\n            Filter.and(\n                    Filter.greaterThanOrEqualTo(&quot;choice_b&quot;, textQuery),\n                    Filter.lessThanOrEqualTo(&quot;choice_b&quot;, textQuery + '\\uf8ff')\n            ),\n            Filter.and(\n                    Filter.greaterThanOrEqualTo(&quot;choice_b&quot;, textQuery.toLowerCase()),\n                    Filter.lessThanOrEqualTo(&quot;choice_b&quot;, textQuery.toLowerCase() + '\\uf8ff')\n            ),\n            Filter.and(\n                    Filter.greaterThanOrEqualTo(&quot;choice_b&quot;, textQuery.substring(0, 1).toUpperCase() + textQuery.substring(1)),\n                    Filter.lessThanOrEqualTo(&quot;choice_b&quot;, textQuery.substring(0, 1).toUpperCase() + textQuery.substring(1) + '\\uf8ff')\n            )\n        )\n    )\n    .get();\n</code></pre>\n<p><strong>Error:</strong></p>\n<blockquote>\n<p>All where filters with an inequality (notEqualTo, notIn, lessThan, lessThanOrEqualTo, greaterThan, or greaterThanOrEqualTo) must be on the same field. But you have filters on 'choice_a' and 'choice_b'</p>\n</blockquote>\n<p>How can I achieve this?</p>\n"},{"tags":["java","oracle","jdbc","connection","ucp"],"comments":[{"owner":{"account_id":5854892,"reputation":3571,"user_id":4612499,"display_name":"Jean de Lavarene"},"score":0,"creation_date":1475655768,"post_id":39720350,"comment_id":67024790,"body_markdown":"This could be a bug in the UCP and JDBC version you&#39;re using. You might want to try the latest version 12.1.0.2. Note that you need to upgrade both the JDBC jar and the UCP jar.","body":"This could be a bug in the UCP and JDBC version you&#39;re using. You might want to try the latest version 12.1.0.2. Note that you need to upgrade both the JDBC jar and the UCP jar."},{"owner":{"account_id":6571613,"reputation":4240,"user_id":5079380,"accept_rate":47,"display_name":"Amr Eladawy"},"score":0,"creation_date":1475656149,"post_id":39720350,"comment_id":67024994,"body_markdown":"I am using UCP 11.2.0.3 and the latest is 11.2.0.4 as per this link. http://www.oracle.com/technetwork/database/enterprise-edition/downloads/ucp-112010-099129.html   where can I get that version 12.1.0.2","body":"I am using UCP 11.2.0.3 and the latest is 11.2.0.4 as per this link. <a href=\"http://www.oracle.com/technetwork/database/enterprise-edition/downloads/ucp-112010-099129.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/database/enterprise-edition/downloads&zwnj;&#8203;/&hellip;</a>   where can I get that version 12.1.0.2"},{"owner":{"account_id":5854892,"reputation":3571,"user_id":4612499,"display_name":"Jean de Lavarene"},"score":0,"creation_date":1475657259,"post_id":39720350,"comment_id":67025632,"body_markdown":"The 12.1.0.2 download page is there: http://www.oracle.com/technetwork/database/features/jdbc/default-2280470.html","body":"The 12.1.0.2 download page is there: <a href=\"http://www.oracle.com/technetwork/database/features/jdbc/default-2280470.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/database/features/jdbc/&hellip;</a>"},{"owner":{"account_id":4039095,"reputation":436,"user_id":3322464,"accept_rate":100,"display_name":"Michal Sipek"},"score":0,"creation_date":1510756295,"post_id":39720350,"comment_id":81570382,"body_markdown":"I had the same problem because of InitialPoolSize=0. I have set InitialPoolSize=1 and after was everything OK.","body":"I had the same problem because of InitialPoolSize=0. I have set InitialPoolSize=1 and after was everything OK."}],"answers":[{"tags":[],"owner":{"account_id":2908204,"reputation":1283,"user_id":2493020,"accept_rate":67,"display_name":"Abdul Mohsin"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1592806547,"creation_date":1592806547,"answer_id":62508422,"question_id":39720350,"body_markdown":"In my case, I was using wrong password :|","title":"JDBC: Oracle Universal Connection Pool Error UCP-45060 Invalid life cycle state","body":"<p>In my case, I was using wrong password :|</p>\n"},{"tags":[],"owner":{"account_id":27570375,"reputation":1,"user_id":21041692,"display_name":"Thomas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674114351,"creation_date":1674114221,"answer_id":75169066,"question_id":39720350,"body_markdown":"In my case I encountered this exception during a routine upgrade of a tomcat application. When attempting to interact with an Oracle database (and so getting a connection from the UniversalConnectionPool) the application kept getting this exception.\r\n\r\nAfter reading up on the UniversalConnectionPool ([overview-using-ucp-manager][1]), I found this line in some Oracle documentation: &quot;*a life cycle state exception occurs if an application attempts to start a pool that has been previously started or if the pool is in a state other than stopped or failed.*&quot;\r\nThat is the closest thing I could find for something related to this exception.\r\n\r\nI ended up finding that a mistake in my build config meant that I have an OJDBC driver placed in both my application and externally in the Tomcat and somehow these were then interacting with my datasource and the UCP together at the same time, causing the one initialized last to give this error.\r\nRemoving the OJDBC driver from the classpath in my application fixed the issue.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/database/oracle/oracle-database/12.2/jjucp/overview-using-ucp-manager.html","title":"JDBC: Oracle Universal Connection Pool Error UCP-45060 Invalid life cycle state","body":"<p>In my case I encountered this exception during a routine upgrade of a tomcat application. When attempting to interact with an Oracle database (and so getting a connection from the UniversalConnectionPool) the application kept getting this exception.</p>\n<p>After reading up on the UniversalConnectionPool (<a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/12.2/jjucp/overview-using-ucp-manager.html\" rel=\"nofollow noreferrer\">overview-using-ucp-manager</a>), I found this line in some Oracle documentation: &quot;<em>a life cycle state exception occurs if an application attempts to start a pool that has been previously started or if the pool is in a state other than stopped or failed.</em>&quot;\nThat is the closest thing I could find for something related to this exception.</p>\n<p>I ended up finding that a mistake in my build config meant that I have an OJDBC driver placed in both my application and externally in the Tomcat and somehow these were then interacting with my datasource and the UCP together at the same time, causing the one initialized last to give this error.\nRemoving the OJDBC driver from the classpath in my application fixed the issue.</p>\n"}],"owner":{"account_id":6571613,"reputation":4240,"user_id":5079380,"accept_rate":47,"display_name":"Amr Eladawy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11095,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1697612825,"creation_date":1474966657,"question_id":39720350,"body_markdown":"I am using Oracle UCP (Universal Connection Pool). I am getting the following error after processing around 100K records. \r\n\r\n        oracle.ucp.UniversalConnectionPoolException: Invalid life cycle state. Check the status of the Universal Connection Pool\r\n            at oracle.ucp.util.UCPErrorHandler.newSQLException(UCPErrorHandler.java:488) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\r\n            at oracle.ucp.util.UCPErrorHandler.throwSQLException(UCPErrorHandler.java:163) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\r\n            at oracle.ucp.jdbc.PoolDataSourceImpl.getConnection(PoolDataSourceImpl.java:943) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\r\n            at oracle.ucp.jdbc.PoolDataSourceImpl.getConnection(PoolDataSourceImpl.java:873) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\r\n            at oracle.ucp.jdbc.PoolDataSourceImpl.getConnection(PoolDataSourceImpl.java:863) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\r\n     Caused by: oracle.ucp.UniversalConnectionPoolException: Invalid life cycle state. Check the status of the Universal Connection Pool\r\n                at oracle.ucp.util.UCPErrorHandler.newUniversalConnectionPoolException(UCPErrorHandler.java:368) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\r\n                at oracle.ucp.util.UCPErrorHandler.throwUniversalConnectionPoolException(UCPErrorHandler.java:49) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\r\n                at oracle.ucp.util.UCPErrorHandler.throwUniversalConnectionPoolException(UCPErrorHandler.java:80) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\r\n                at oracle.ucp.util.UCPErrorHandler.throwUniversalConnectionPoolException(UCPErrorHandler.java:131) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\r\n                at oracle.ucp.common.UniversalConnectionPoolImpl.borrowConnectionWithoutCountingRequests(UniversalConnectionPoolImpl.java:304) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\r\n                at oracle.ucp.common.UniversalConnectionPoolImpl.borrowConnectionAndValidate(UniversalConnectionPoolImpl.java:168) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\r\n                at oracle.ucp.common.UniversalConnectionPoolImpl.borrowConnection(UniversalConnectionPoolImpl.java:143) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\r\n                at oracle.ucp.jdbc.JDBCConnectionPool.borrowConnection(JDBCConnectionPool.java:157) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\r\n                at oracle.ucp.jdbc.PoolDataSourceImpl.getConnection(PoolDataSourceImpl.java:931) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\r\n                ... 15 more\r\n\r\nHere is the code snippet to create the DataSource\r\n\r\n    PoolDataSource dataSource = PoolDataSourceFactory.getPoolDataSource();\r\n\r\n\t\t \r\n\t\tdataSource.setURL(&quot;jdbc.url&quot;));\r\n\t\tdataSource.setUser(&quot;jdbc.user&quot;));\r\n\t\tdataSource.setPassword(&quot;jdbc.password&quot;));\r\n\t\tdataSource.setMaxConnectionReuseCount(100);\r\n\r\n\t\tdataSource.setInitialPoolSize(50);\r\n\t\tdataSource.setMinPoolSize(50);\r\n\r\n\t\tdataSource.setMaxPoolSize(100);\r\n\r\n\t\tdataSource.setValidateConnectionOnBorrow(true);\r\n\r\n\t\tdataSource.setConnectionFactoryClassName(&quot;oracle.jdbc.pool.OracleDataSource&quot;);\r\n\r\n\r\nAnd then I get the connection from data source as \r\n\r\n    datasource.getConnection();","title":"JDBC: Oracle Universal Connection Pool Error UCP-45060 Invalid life cycle state","body":"<p>I am using Oracle UCP (Universal Connection Pool). I am getting the following error after processing around 100K records. </p>\n\n<pre><code>    oracle.ucp.UniversalConnectionPoolException: Invalid life cycle state. Check the status of the Universal Connection Pool\n        at oracle.ucp.util.UCPErrorHandler.newSQLException(UCPErrorHandler.java:488) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\n        at oracle.ucp.util.UCPErrorHandler.throwSQLException(UCPErrorHandler.java:163) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\n        at oracle.ucp.jdbc.PoolDataSourceImpl.getConnection(PoolDataSourceImpl.java:943) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\n        at oracle.ucp.jdbc.PoolDataSourceImpl.getConnection(PoolDataSourceImpl.java:873) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\n        at oracle.ucp.jdbc.PoolDataSourceImpl.getConnection(PoolDataSourceImpl.java:863) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\n Caused by: oracle.ucp.UniversalConnectionPoolException: Invalid life cycle state. Check the status of the Universal Connection Pool\n            at oracle.ucp.util.UCPErrorHandler.newUniversalConnectionPoolException(UCPErrorHandler.java:368) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\n            at oracle.ucp.util.UCPErrorHandler.throwUniversalConnectionPoolException(UCPErrorHandler.java:49) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\n            at oracle.ucp.util.UCPErrorHandler.throwUniversalConnectionPoolException(UCPErrorHandler.java:80) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\n            at oracle.ucp.util.UCPErrorHandler.throwUniversalConnectionPoolException(UCPErrorHandler.java:131) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\n            at oracle.ucp.common.UniversalConnectionPoolImpl.borrowConnectionWithoutCountingRequests(UniversalConnectionPoolImpl.java:304) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\n            at oracle.ucp.common.UniversalConnectionPoolImpl.borrowConnectionAndValidate(UniversalConnectionPoolImpl.java:168) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\n            at oracle.ucp.common.UniversalConnectionPoolImpl.borrowConnection(UniversalConnectionPoolImpl.java:143) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\n            at oracle.ucp.jdbc.JDBCConnectionPool.borrowConnection(JDBCConnectionPool.java:157) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\n            at oracle.ucp.jdbc.PoolDataSourceImpl.getConnection(PoolDataSourceImpl.java:931) ~[ucp-11.2.0.3.0.jar:11.2.0.3.0]\n            ... 15 more\n</code></pre>\n\n<p>Here is the code snippet to create the DataSource</p>\n\n<pre><code>PoolDataSource dataSource = PoolDataSourceFactory.getPoolDataSource();\n\n\n    dataSource.setURL(\"jdbc.url\"));\n    dataSource.setUser(\"jdbc.user\"));\n    dataSource.setPassword(\"jdbc.password\"));\n    dataSource.setMaxConnectionReuseCount(100);\n\n    dataSource.setInitialPoolSize(50);\n    dataSource.setMinPoolSize(50);\n\n    dataSource.setMaxPoolSize(100);\n\n    dataSource.setValidateConnectionOnBorrow(true);\n\n    dataSource.setConnectionFactoryClassName(\"oracle.jdbc.pool.OracleDataSource\");\n</code></pre>\n\n<p>And then I get the connection from data source as </p>\n\n<pre><code>datasource.getConnection();\n</code></pre>\n"},{"tags":["java","deserialization","hessian"],"owner":{"account_id":29836,"reputation":36360,"user_id":80901,"accept_rate":80,"display_name":"mjn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697612589,"creation_date":1697612589,"question_id":77314111,"body_markdown":"Is there a way to cause Hessian deserialization to throw an exception if a class is missing on the classpath?\r\n\r\nIn https://stackoverflow.com/questions/29813683/ a comment says that &quot;hessian transforms the unknown type to a Hashmap without throwing exceptions&quot;.\r\n\r\nThis is the behaviour I am watching, and which led to an error when the object is serialized again and sent back, because the type is now a HashMap.\r\n\r\n","title":"Hessian (Java) deserialization of class which is not in the classpath does not raise an error","body":"<p>Is there a way to cause Hessian deserialization to throw an exception if a class is missing on the classpath?</p>\n<p>In <a href=\"https://stackoverflow.com/questions/29813683/\">How does serialization tool skip unknown fields during deserialization?</a> a comment says that &quot;hessian transforms the unknown type to a Hashmap without throwing exceptions&quot;.</p>\n<p>This is the behaviour I am watching, and which led to an error when the object is serialized again and sent back, because the type is now a HashMap.</p>\n"},{"tags":["java","android","xamarin","xamarin.android","android-multidex"],"comments":[{"owner":{"account_id":7310888,"reputation":16574,"user_id":5570139,"display_name":"Grace Feng"},"score":0,"creation_date":1494987000,"post_id":44004161,"comment_id":75056599,"body_markdown":"Please tell us which libs did you installed into your project?","body":"Please tell us which libs did you installed into your project?"},{"owner":{"account_id":6690132,"reputation":891,"user_id":5159872,"accept_rate":100,"display_name":"Daniel_97"},"score":0,"creation_date":1495013425,"post_id":44004161,"comment_id":75068668,"body_markdown":"I installed pretty much e.g. firebase, pubnub, playservices(packed) and some scanner libs for special devices.","body":"I installed pretty much e.g. firebase, pubnub, playservices(packed) and some scanner libs for special devices."},{"owner":{"account_id":5404494,"reputation":2881,"user_id":4303411,"accept_rate":13,"display_name":"Ajay Sharma"},"score":0,"creation_date":1502349238,"post_id":44004161,"comment_id":78172431,"body_markdown":"I faced the same error after install a nugget package","body":"I faced the same error after install a nugget package"},{"owner":{"account_id":6690132,"reputation":891,"user_id":5159872,"accept_rate":100,"display_name":"Daniel_97"},"score":1,"creation_date":1502356007,"post_id":44004161,"comment_id":78176943,"body_markdown":"@AjaySharma yea i believe it can happen anytime if you hit the mehtod limit of ~65k :) \nTry the answer it might help you too","body":"@AjaySharma yea i believe it can happen anytime if you hit the mehtod limit of ~65k :)  Try the answer it might help you too"}],"answers":[{"comments":[{"owner":{"account_id":2084754,"reputation":414,"user_id":1855967,"display_name":"Eli"},"score":0,"creation_date":1506681007,"post_id":44020852,"comment_id":79928215,"body_markdown":"Point 3. See [MultiDexApplication](https://developer.android.com/reference/android/support/multidex/MultiDexApplication.html)","body":"Point 3. See <a href=\"https://developer.android.com/reference/android/support/multidex/MultiDexApplication.html\" rel=\"nofollow noreferrer\">MultiDexApplication</a>"},{"owner":{"account_id":2084754,"reputation":414,"user_id":1855967,"display_name":"Eli"},"score":2,"creation_date":1506765633,"post_id":44020852,"comment_id":79957505,"body_markdown":"Point 2. In my case the _.csproj_ file had only this line `&lt;AndroidEnableMultipleDex&gt;true&lt;/AndroidEnableMultipleDex&gt;` and I had to manually add `&lt;AndroidEnableMultiDex&gt;true&lt;/AndroidEnableMultiDex&gt;` to make it work! Note the **MultiDex** instead of **MultipleDex**. Thanks go to [this discussion](https://bugzilla.xamarin.com/show_bug.cgi?id=56192).","body":"Point 2. In my case the <i>.csproj</i> file had only this line <code>&lt;AndroidEnableMultipleDex&gt;true&lt;&#47;AndroidEnableMultipleDex&gt;</code> and I had to manually add <code>&lt;AndroidEnableMultiDex&gt;true&lt;&#47;AndroidEnableMultiDex&gt;</code> to make it work! Note the <b>MultiDex</b> instead of <b>MultipleDex</b>. Thanks go to <a href=\"https://bugzilla.xamarin.com/show_bug.cgi?id=56192\" rel=\"nofollow noreferrer\">this discussion</a>."},{"owner":{"account_id":6690132,"reputation":891,"user_id":5159872,"accept_rate":100,"display_name":"Daniel_97"},"score":0,"creation_date":1507274654,"post_id":44020852,"comment_id":80152638,"body_markdown":"@Elisa a collegue of mine had to face the same problem like you \nI have literally no idea why such things are happening but as long as we can solve them it might be fine I guess...","body":"@Elisa a collegue of mine had to face the same problem like you  I have literally no idea why such things are happening but as long as we can solve them it might be fine I guess..."},{"owner":{"account_id":9028676,"reputation":2316,"user_id":6727154,"accept_rate":29,"display_name":"michaelitoh"},"score":0,"creation_date":1515949502,"post_id":44020852,"comment_id":83486444,"body_markdown":"@Elisa in which tag is the AndroidEnableMultipleDex tag? I don&#39;t have any of this tags.","body":"@Elisa in which tag is the AndroidEnableMultipleDex tag? I don&#39;t have any of this tags."},{"owner":{"account_id":2084754,"reputation":414,"user_id":1855967,"display_name":"Eli"},"score":0,"creation_date":1516027968,"post_id":44020852,"comment_id":83513591,"body_markdown":"@MichaelAlexanderMontero This tag `&lt;PropertyGroup Condition=&quot; &#39;$(Configuration)|$(Platform)&#39; == &#39;Debug|AnyCPU&#39; &quot;&gt;`","body":"@MichaelAlexanderMontero This tag <code>&lt;PropertyGroup Condition=&quot; &#39;$(Configuration)|$(Platform)&#39; == &#39;Debug|AnyCPU&#39; &quot;&gt;</code>"}],"tags":[],"owner":{"account_id":6690132,"reputation":891,"user_id":5159872,"accept_rate":100,"display_name":"Daniel_97"},"comment_count":5,"down_vote_count":0,"up_vote_count":43,"is_accepted":true,"score":43,"last_activity_date":1554925534,"creation_date":1495013380,"answer_id":44020852,"question_id":44004161,"body_markdown":"Found the answer after about 20 hours of searching in my project.. \r\nSo here are the steps to resolve the problem &quot;java.exe&quot; exited with code 2\r\n\r\n1) Change the MainDexClasses.bat as described in the link:\r\n\r\nhttp://www.jon-douglas.com/2016/09/05/xamarin-android-multidex/\r\n\r\n2) Make sure you have enabled `Multidex` Option in your Android Application! Have a look at the `.csprj` file if `Multidex` is set to `true` (in my case it wasn&#39;t even if I enabled `Multidex`)\r\n\r\n\r\n3) Add the following part in your `AndroidManifest` file\r\n\r\n    &lt;application android:name=&quot;android.support.multidex.MultiDexApplication&quot;&gt;&lt;/application&gt;\r\n\r\nThis will tell your Android project to actually use the Multidex-Option given.\r\n\r\nAfter a clean and build I was able to run my application as it is.\r\n","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>Found the answer after about 20 hours of searching in my project.. \nSo here are the steps to resolve the problem \"java.exe\" exited with code 2</p>\n\n<p>1) Change the MainDexClasses.bat as described in the link:</p>\n\n<p><a href=\"http://www.jon-douglas.com/2016/09/05/xamarin-android-multidex/\" rel=\"noreferrer\">http://www.jon-douglas.com/2016/09/05/xamarin-android-multidex/</a></p>\n\n<p>2) Make sure you have enabled <code>Multidex</code> Option in your Android Application! Have a look at the <code>.csprj</code> file if <code>Multidex</code> is set to <code>true</code> (in my case it wasn't even if I enabled <code>Multidex</code>)</p>\n\n<p>3) Add the following part in your <code>AndroidManifest</code> file</p>\n\n<pre><code>&lt;application android:name=\"android.support.multidex.MultiDexApplication\"&gt;&lt;/application&gt;\n</code></pre>\n\n<p>This will tell your Android project to actually use the Multidex-Option given.</p>\n\n<p>After a clean and build I was able to run my application as it is.</p>\n"},{"comments":[{"owner":{"account_id":6690132,"reputation":891,"user_id":5159872,"accept_rate":100,"display_name":"Daniel_97"},"score":2,"creation_date":1507274576,"post_id":45969728,"comment_id":80152583,"body_markdown":"Maybe on the windows machine you only had installed android API level(s) &gt;21 which would determinate the statement in my question?","body":"Maybe on the windows machine you only had installed android API level(s) &gt;21 which would determinate the statement in my question?"},{"owner":{"account_id":1111321,"reputation":8799,"user_id":1101730,"accept_rate":78,"display_name":"Micer"},"score":0,"creation_date":1507705375,"post_id":45969728,"comment_id":80311317,"body_markdown":"@Daniel_97 Yeah that was most likely the reason.","body":"@Daniel_97 Yeah that was most likely the reason."}],"tags":[],"owner":{"account_id":1111321,"reputation":8799,"user_id":1101730,"accept_rate":78,"display_name":"Micer"},"comment_count":2,"down_vote_count":1,"up_vote_count":32,"is_accepted":false,"score":31,"last_activity_date":1520084943,"creation_date":1504127303,"answer_id":45969728,"question_id":44004161,"body_markdown":"After finding this question and @Daniel_97s answer I was able to solve this error only by adding multidex to the project without changing MainDexClasses.bat:\r\n \r\n1. Check the option in Project Options:\r\n\r\n[![Check the option in Project Options:][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Tjhwp.png\r\n\r\n2. Add `MultiDexApplication` to Android Manifest:\r\n\r\n        &lt;application android:name=&quot;android.support.multidex.MultiDexApplication&quot;&gt;&lt;/application&gt;\r\n\r\nNote I was getting this error code 2 on Visual Studio for Mac and on Windows the same app was building successfully. (why?)","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>After finding this question and @Daniel_97s answer I was able to solve this error only by adding multidex to the project without changing MainDexClasses.bat:</p>\n\n<ol>\n<li>Check the option in Project Options:</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/Tjhwp.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Tjhwp.png\" alt=\"Check the option in Project Options:\"></a></p>\n\n<ol start=\"2\">\n<li><p>Add <code>MultiDexApplication</code> to Android Manifest:</p>\n\n<pre><code>&lt;application android:name=\"android.support.multidex.MultiDexApplication\"&gt;&lt;/application&gt;\n</code></pre></li>\n</ol>\n\n<p>Note I was getting this error code 2 on Visual Studio for Mac and on Windows the same app was building successfully. (why?)</p>\n"},{"comments":[{"owner":{"account_id":8511198,"reputation":744,"user_id":6381179,"accept_rate":71,"display_name":"Shirkam"},"score":0,"creation_date":1507718961,"post_id":46685717,"comment_id":80320052,"body_markdown":"Are you using same version of Xamarin and VS as the OP?","body":"Are you using same version of Xamarin and VS as the OP?"},{"owner":{"account_id":11104157,"reputation":203,"user_id":8151854,"display_name":"Vermoric Huynh"},"score":0,"creation_date":1508297752,"post_id":46685717,"comment_id":80551456,"body_markdown":"I using VS version 7.2 (build 636)","body":"I using VS version 7.2 (build 636)"},{"owner":{"account_id":3847903,"reputation":1997,"user_id":3188794,"accept_rate":50,"display_name":"james"},"score":0,"creation_date":1515047790,"post_id":46685717,"comment_id":83154192,"body_markdown":"Thanks, that saved my time!","body":"Thanks, that saved my time!"},{"owner":{"account_id":1154994,"reputation":723,"user_id":1135847,"display_name":"wislon"},"score":0,"creation_date":1569278457,"post_id":46685717,"comment_id":102537479,"body_markdown":"I actually had to add the `&lt;AndroidEnableMultiDex&gt;true&lt;/AndroidEnableMultiDex&gt;` line, it looks like mine got wiped out somehow. After I put it back, reloaded the project and rebuilt, it worked perfectly.","body":"I actually had to add the <code>&lt;AndroidEnableMultiDex&gt;true&lt;&#47;AndroidEnableMultiDex&gt;</code> line, it looks like mine got wiped out somehow. After I put it back, reloaded the project and rebuilt, it worked perfectly."}],"tags":[],"owner":{"account_id":11104157,"reputation":203,"user_id":8151854,"display_name":"Vermoric Huynh"},"comment_count":4,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1507717217,"creation_date":1507717217,"answer_id":46685717,"question_id":44004161,"body_markdown":"I only go to option &gt; Build &gt; Android Build and check Enable Multi-Dex it will resolve ","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>I only go to option > Build > Android Build and check Enable Multi-Dex it will resolve </p>\n"},{"comments":[{"owner":{"account_id":3181085,"reputation":328,"user_id":2687766,"display_name":"Dave Rincon"},"score":3,"creation_date":1544470845,"post_id":52535480,"comment_id":94279486,"body_markdown":"i add multidex but dont works i disabled sing and works, many thanks!","body":"i add multidex but dont works i disabled sing and works, many thanks!"},{"owner":{"account_id":2593229,"reputation":2047,"user_id":2247427,"accept_rate":57,"display_name":"Le-roy Staines"},"score":3,"creation_date":1551946288,"post_id":52535480,"comment_id":96828929,"body_markdown":"Assuming you want to distribute an unsigned APK, which you cannot do with Google Play...","body":"Assuming you want to distribute an unsigned APK, which you cannot do with Google Play..."},{"owner":{"account_id":1288211,"reputation":6945,"user_id":1240844,"accept_rate":62,"display_name":"Hein Andre Gr&#248;nnestad"},"score":2,"creation_date":1552038105,"post_id":52535480,"comment_id":96869108,"body_markdown":"@Le-royStaines, you obviously can&#39;t do this for the release build. As stated in my answer, my keystore location was incorrect (actually on an unavailable network path). This is just another reason for the general java error message, which isn&#39;t covered in the other answers.","body":"@Le-royStaines, you obviously can&#39;t do this for the release build. As stated in my answer, my keystore location was incorrect (actually on an unavailable network path). This is just another reason for the general java error message, which isn&#39;t covered in the other answers."},{"owner":{"account_id":8545262,"reputation":713,"user_id":6404011,"accept_rate":25,"display_name":"DisturbedNeo"},"score":3,"creation_date":1556187050,"post_id":52535480,"comment_id":98355725,"body_markdown":"Changing the path to the correct location fixed it for me. Seems like the build failing can be attributed to not being able to find the keystore at the specified location, even if you&#39;re just running a Debug build and don&#39;t even need to sign the APK.","body":"Changing the path to the correct location fixed it for me. Seems like the build failing can be attributed to not being able to find the keystore at the specified location, even if you&#39;re just running a Debug build and don&#39;t even need to sign the APK."},{"owner":{"account_id":4106607,"reputation":1219,"user_id":3370431,"display_name":"Eric Mutta"},"score":1,"creation_date":1601188429,"post_id":52535480,"comment_id":113324255,"body_markdown":"In my case I had renamed the folder containing the keystore so changing the path fixed the issue.","body":"In my case I had renamed the folder containing the keystore so changing the path fixed the issue."}],"tags":[],"owner":{"account_id":1288211,"reputation":6945,"user_id":1240844,"accept_rate":62,"display_name":"Hein Andre Gr&#248;nnestad"},"comment_count":5,"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1538046074,"creation_date":1538046074,"answer_id":52535480,"question_id":44004161,"body_markdown":"The solution in my case was to disable the &quot;Sign the .APK file using the following keystore details&quot;. Because the keystore location and/or password was incorrect, java.exe exited with code 2.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SluqI.png","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>The solution in my case was to disable the \"Sign the .APK file using the following keystore details\". Because the keystore location and/or password was incorrect, java.exe exited with code 2.</p>\n\n<p><a href=\"https://i.stack.imgur.com/SluqI.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/SluqI.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":123769,"reputation":9348,"user_id":1348522,"accept_rate":57,"display_name":"Zumry Mohamed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546406763,"creation_date":1546406763,"answer_id":54001615,"question_id":44004161,"body_markdown":"Please Update your Visual Studio to Latest version, if you are still using an old version.\r\n\r\nIf you think there is no solution then go and enable the `Multidex`","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>Please Update your Visual Studio to Latest version, if you are still using an old version.</p>\n\n<p>If you think there is no solution then go and enable the <code>Multidex</code></p>\n"},{"comments":[{"owner":{"account_id":980276,"reputation":5186,"user_id":1335793,"display_name":"Davos"},"score":0,"creation_date":1547126953,"post_id":54129292,"comment_id":95090601,"body_markdown":"I am not sure what you mean by that, could you elaborate your answer with some steps of how you did that and why it was the solution?","body":"I am not sure what you mean by that, could you elaborate your answer with some steps of how you did that and why it was the solution?"}],"tags":[],"owner":{"account_id":4376854,"reputation":327,"user_id":3569660,"accept_rate":71,"display_name":"Starlin Gonz&#225;lez"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1547127348,"creation_date":1547125283,"answer_id":54129292,"question_id":44004161,"body_markdown":"Reassign the path of the keystore worked for me \r\n\r\n==EDIT 01==\r\n\r\nDouble click on Android Project &gt; Android Package Signing \r\n\r\nOn the Keystore path, don&#39;t know why but apparently the path was wrong, I re-select the .keystore file again from the same path, and the error &quot;exited with code 2&quot; went away and I was able to Archive for release","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>Reassign the path of the keystore worked for me </p>\n\n<p>==EDIT 01==</p>\n\n<p>Double click on Android Project > Android Package Signing </p>\n\n<p>On the Keystore path, don't know why but apparently the path was wrong, I re-select the .keystore file again from the same path, and the error \"exited with code 2\" went away and I was able to Archive for release</p>\n"},{"tags":[],"owner":{"account_id":9985323,"reputation":181,"user_id":8385383,"display_name":"100RaBH"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550582074,"creation_date":1550582074,"answer_id":54767202,"question_id":44004161,"body_markdown":"In my case the one of keystore details was wrong, after saving-&gt; cleaning -&gt; building process it worked.","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>In my case the one of keystore details was wrong, after saving-> cleaning -> building process it worked.</p>\n"},{"tags":[],"owner":{"account_id":10776484,"reputation":724,"user_id":7928327,"display_name":"Filipe Piletti Plucenio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590700032,"creation_date":1551102508,"answer_id":54867685,"question_id":44004161,"body_markdown":"Try reset the keystore `&lt;AndroidSigningKeyStore&gt;` or change to false the key \r\n\r\n&gt;\r\n\r\n    &lt;AndroidKeyStore&gt;true&lt;/AndroidKeyStore&gt;\r\n\r\nOnly to check. But remembering that it needs to be set to true.\r\n\r\nAfter Clean and Rebuild the solution.","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>Try reset the keystore <code>&lt;AndroidSigningKeyStore&gt;</code> or change to false the key </p>\n\n<p>></p>\n\n<pre><code>&lt;AndroidKeyStore&gt;true&lt;/AndroidKeyStore&gt;\n</code></pre>\n\n<p>Only to check. But remembering that it needs to be set to true.</p>\n\n<p>After Clean and Rebuild the solution.</p>\n"},{"comments":[{"owner":{"account_id":6197705,"reputation":4720,"user_id":4828524,"display_name":"Alen.Toma"},"score":1,"creation_date":1558268161,"post_id":55039192,"comment_id":99036778,"body_markdown":"Man you are a life saver thank you. Your solution is the only one that worked :)","body":"Man you are a life saver thank you. Your solution is the only one that worked :)"}],"tags":[],"owner":{"account_id":2593229,"reputation":2047,"user_id":2247427,"accept_rate":57,"display_name":"Le-roy Staines"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1551947294,"creation_date":1551947294,"answer_id":55039192,"question_id":44004161,"body_markdown":"My `.csproj` file had an entry for the **KeyStore** that was no longer valid, even thought right-clicking the project and inspecting the properties indicated that I had pointed it to the new location.\r\n\r\nWithin .csproj look for all instances of `&lt;AndroidSigningKeyStore&gt;` and update accordingly.","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>My <code>.csproj</code> file had an entry for the <strong>KeyStore</strong> that was no longer valid, even thought right-clicking the project and inspecting the properties indicated that I had pointed it to the new location.</p>\n\n<p>Within .csproj look for all instances of <code>&lt;AndroidSigningKeyStore&gt;</code> and update accordingly.</p>\n"},{"tags":[],"owner":{"account_id":2526486,"reputation":369,"user_id":2195770,"accept_rate":80,"display_name":"Klemikaze"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1556876937,"creation_date":1556876937,"answer_id":55967276,"question_id":44004161,"body_markdown":"I&#39;ve struggled with this issue for quite a long time. I found source of the error in signing - as I cloned project repo from company TFS, Android csproj file had entries for KeyStore settings and location. I didn&#39;t have the keystore and the location on my drive was invalid. Visual Studio is then unable to sign the app while deploying and instead of some sort of FileNotFoundException it gave me just java exited with code 2. So...\r\n\r\ntl;dr: Go to android project properties, select package signing a uncheck &quot;Sign the apk file...&quot; (which changes csproj `&lt;AndroidKeyStore&gt;true&lt;/AndroidKeyStore&gt;` to false) and voila, you can now run your solution.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/k3U2M.png","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>I've struggled with this issue for quite a long time. I found source of the error in signing - as I cloned project repo from company TFS, Android csproj file had entries for KeyStore settings and location. I didn't have the keystore and the location on my drive was invalid. Visual Studio is then unable to sign the app while deploying and instead of some sort of FileNotFoundException it gave me just java exited with code 2. So...</p>\n\n<p>tl;dr: Go to android project properties, select package signing a uncheck \"Sign the apk file...\" (which changes csproj <code>&lt;AndroidKeyStore&gt;true&lt;/AndroidKeyStore&gt;</code> to false) and voila, you can now run your solution.</p>\n\n<p><a href=\"https://i.stack.imgur.com/k3U2M.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/k3U2M.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":7138647,"reputation":2612,"user_id":5457220,"display_name":"G Clovs"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1559905727,"creation_date":1559905727,"answer_id":56493189,"question_id":44004161,"body_markdown":"I had this error when switching from VS Mac to VS Windows.\r\n\r\n[Here the topic Switching From VS Mac To VS Windows got “java.exe” exited with code 2][1]\r\n\r\nThe issue was comming from the Android.csproj and the Keystore Path.            \r\n It was set to my Mac Path even if I changed it on \r\n\r\nVSWindows AndroidProject =&gt; Properties =&gt; Signin\r\n\r\n\r\nSo I removed this lines on Android.csproj (edited with third text editor):\r\n----------\r\n\r\n    &lt;AndroidKeyStore&gt;True&lt;/AndroidKeyStore&gt;\r\n    &lt;AndroidSigningKeyStore&gt;YourMacPath/Alias.keystore&lt;/AndroidSigningKeyStore&gt;\r\n    &lt;AndroidSigningStorePass&gt;Password&lt;/AndroidSigningStorePass&gt;\r\n    &lt;AndroidSigningKeyAlias&gt;Alias&lt;/AndroidSigningKeyAlias&gt;\r\n    &lt;AndroidSigningKeyPass&gt;AliasPassword&lt;/AndroidSigningKeyPass&gt;\r\n\r\nOn debug &amp; release Part.\r\n\r\nThen you can edit them on VS Windows.\r\n\r\nHope I helped someone.\r\nSee ya\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/56492819/switching-from-vs-mac-to-vs-windows-got-java-exe-exited-with-code-2?noredirect=1#comment99574565_56492819","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>I had this error when switching from VS Mac to VS Windows.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/56492819/switching-from-vs-mac-to-vs-windows-got-java-exe-exited-with-code-2?noredirect=1#comment99574565_56492819\">Here the topic Switching From VS Mac To VS Windows got “java.exe” exited with code 2</a></p>\n\n<p>The issue was comming from the Android.csproj and the Keystore Path.<br>\n It was set to my Mac Path even if I changed it on </p>\n\n<p>VSWindows AndroidProject => Properties => Signin</p>\n\n<h2>So I removed this lines on Android.csproj (edited with third text editor):</h2>\n\n<pre><code>&lt;AndroidKeyStore&gt;True&lt;/AndroidKeyStore&gt;\n&lt;AndroidSigningKeyStore&gt;YourMacPath/Alias.keystore&lt;/AndroidSigningKeyStore&gt;\n&lt;AndroidSigningStorePass&gt;Password&lt;/AndroidSigningStorePass&gt;\n&lt;AndroidSigningKeyAlias&gt;Alias&lt;/AndroidSigningKeyAlias&gt;\n&lt;AndroidSigningKeyPass&gt;AliasPassword&lt;/AndroidSigningKeyPass&gt;\n</code></pre>\n\n<p>On debug &amp; release Part.</p>\n\n<p>Then you can edit them on VS Windows.</p>\n\n<p>Hope I helped someone.\nSee ya</p>\n"},{"tags":[],"owner":{"account_id":8180291,"reputation":97,"user_id":6157742,"display_name":"helper"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1562575965,"creation_date":1562575965,"answer_id":56931402,"question_id":44004161,"body_markdown":"Disable sign the .APK file using the following keystore details as @Klemikaze\r\n","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>Disable sign the .APK file using the following keystore details as @Klemikaze</p>\n"},{"tags":[],"owner":{"account_id":13583574,"reputation":21,"user_id":9798865,"display_name":"HBock"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1569416437,"creation_date":1569416437,"answer_id":58099048,"question_id":44004161,"body_markdown":"In my case this was link to the &quot;Sign the .APK file using the following keystore details&quot; option as Hein Andre Gr&#248;nnestad mentioned.\r\nThe location was not correct.\r\n\r\nI wanted to put a path that could work for everyone at work so I used $HOME/Library/... instead of /Users/Me/Library/...\r\n\r\nThe problem is $HOME doesn&#39;t mean anything special for java so the keystore file could not be found.\r\n\r\nSolution: use relative path or absolute path without $HOME variable or ~\r\n\r\n","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>In my case this was link to the \"Sign the .APK file using the following keystore details\" option as Hein Andre Grønnestad mentioned.\nThe location was not correct.</p>\n\n<p>I wanted to put a path that could work for everyone at work so I used $HOME/Library/... instead of /Users/Me/Library/...</p>\n\n<p>The problem is $HOME doesn't mean anything special for java so the keystore file could not be found.</p>\n\n<p>Solution: use relative path or absolute path without $HOME variable or ~</p>\n"},{"tags":[],"owner":{"account_id":19312538,"reputation":1,"user_id":14117928,"display_name":"KDas"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1597658295,"creation_date":1597651625,"answer_id":63446926,"question_id":44004161,"body_markdown":"My experience is...\r\n\r\nI updated the following elements:\r\n\r\n- Xamarin.Android.Support.Design\r\n- Xamarin.Android.Support.v4\r\n- Xamarin.Android.Support.v7.AppCompat\r\n- Xamarin.Android.Support.v7.CardView\r\n- Xamarin.Android.Support.v7.MediaRouter\r\n\r\nfrom `26.1.0.1` to `28.0.0.3`\r\n\r\nThen, after it started the issue with:\r\n&gt; &quot;java.exe&quot; exited with code 2 Xamarin.Android project.\r\n\r\nI just ticked the `Enable Multi-Dex` inside the Android project property. I am using VS 2017 in windows system.","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>My experience is...</p>\n<p>I updated the following elements:</p>\n<ul>\n<li>Xamarin.Android.Support.Design</li>\n<li>Xamarin.Android.Support.v4</li>\n<li>Xamarin.Android.Support.v7.AppCompat</li>\n<li>Xamarin.Android.Support.v7.CardView</li>\n<li>Xamarin.Android.Support.v7.MediaRouter</li>\n</ul>\n<p>from <code>26.1.0.1</code> to <code>28.0.0.3</code></p>\n<p>Then, after it started the issue with:</p>\n<blockquote>\n<p>&quot;java.exe&quot; exited with code 2 Xamarin.Android project.</p>\n</blockquote>\n<p>I just ticked the <code>Enable Multi-Dex</code> inside the Android project property. I am using VS 2017 in windows system.</p>\n"},{"comments":[{"owner":{"account_id":18002940,"reputation":133,"user_id":13084451,"display_name":"Chris Wray"},"score":0,"creation_date":1646103946,"post_id":65992450,"comment_id":126036317,"body_markdown":"This was the issue for me as well. Thank you!","body":"This was the issue for me as well. Thank you!"}],"tags":[],"owner":{"account_id":910103,"reputation":626,"user_id":944146,"accept_rate":36,"display_name":"pseudoabdul"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1612181284,"creation_date":1612181284,"answer_id":65992450,"question_id":44004161,"body_markdown":"For me, it was a problem with my Keystore. Follow this [link][1] to enable diagnostics. This will give you a more detailed error message in the output window. If it says that your keystore failed to verify, you will have to fix your keystore. This solved the problem for me. \r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-au/xamarin/android/troubleshooting/troubleshooting#Diagnostic_MSBuild_Output","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>For me, it was a problem with my Keystore. Follow this <a href=\"https://learn.microsoft.com/en-au/xamarin/android/troubleshooting/troubleshooting#Diagnostic_MSBuild_Output\" rel=\"nofollow noreferrer\">link</a> to enable diagnostics. This will give you a more detailed error message in the output window. If it says that your keystore failed to verify, you will have to fix your keystore. This solved the problem for me.</p>\n"},{"tags":[],"owner":{"account_id":1367279,"reputation":522,"user_id":1303466,"accept_rate":75,"display_name":"Buzz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646083458,"creation_date":1645554922,"answer_id":71226625,"question_id":44004161,"body_markdown":"For me it turned out I had Eclipse Temurin JDK installed and that was being used. In VS Tools&gt;Options&gt;Xamarin I changed the path to Java Development Kit Location to from the Eclipse path to C:\\Program Files\\Microsoft\\jdk-11.0.12.7-hotspot.\r\nMaybe more importantly, I discovered Eclipse Temurin JDK was being used by running:\r\nmsbuild /bl /t:&quot;Restore;SignAndroidPackage&quot;\r\nin my solution dir and then opening the resulting msbuild.binlog and clicking on the few errors and a path with Eclipse stood out. Your problem may be different but finding it this way may be the key to solving it.\r\nEDIT: My settings don&#39;t stick after closing and reopening VS 2019. At this point I started using VS 2022 and don&#39;t have the issue.","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>For me it turned out I had Eclipse Temurin JDK installed and that was being used. In VS Tools&gt;Options&gt;Xamarin I changed the path to Java Development Kit Location to from the Eclipse path to C:\\Program Files\\Microsoft\\jdk-11.0.12.7-hotspot.\nMaybe more importantly, I discovered Eclipse Temurin JDK was being used by running:\nmsbuild /bl /t:&quot;Restore;SignAndroidPackage&quot;\nin my solution dir and then opening the resulting msbuild.binlog and clicking on the few errors and a path with Eclipse stood out. Your problem may be different but finding it this way may be the key to solving it.\nEDIT: My settings don't stick after closing and reopening VS 2019. At this point I started using VS 2022 and don't have the issue.</p>\n"},{"comments":[{"owner":{"account_id":103661,"reputation":1076,"user_id":277522,"accept_rate":59,"display_name":"jaysonragasa"},"score":0,"creation_date":1678806886,"post_id":72015856,"comment_id":133602760,"body_markdown":"Thank you. This is the only thing that worked as of year 2023 - Visual Studio 2019 version 16.11.115","body":"Thank you. This is the only thing that worked as of year 2023 - Visual Studio 2019 version 16.11.115"},{"owner":{"account_id":24131527,"reputation":1071,"user_id":18099076,"display_name":"aca"},"score":0,"creation_date":1678868362,"post_id":72015856,"comment_id":133614570,"body_markdown":"@jaysonragasa You&#39;re welcome, lol. A year later someone found this useful, nice.","body":"@jaysonragasa You&#39;re welcome, lol. A year later someone found this useful, nice."}],"tags":[],"owner":{"account_id":24131527,"reputation":1071,"user_id":18099076,"display_name":"aca"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1650983753,"creation_date":1650983753,"answer_id":72015856,"question_id":44004161,"body_markdown":"Note: Multi-dex is enabled.\r\n\r\nAfter 5 hours of looking or an answer, this is the conclusion I&#39;ve found -\r\n\r\n \r\n\r\n 1.  Enable diagnostic MSBuild output within Visual Studio, so you can see more details about your error:\r\n \r\n\r\n&gt; - **Click Tools &gt; Options...**\r\n&gt;  - In the left-hand tree view, select **Projects and Solutions &gt; Build and Run**\r\n&gt;  - In the right-hand panel, set the MSBuild build output verbosity dropdown to **Diagnostic**, Click **OK**\r\n&gt;  - Clean and rebuild your package. **Diagnostic output is visible within the Output panel.**\r\n\r\n 2. If your error shows &quot;java.io.IOException: Invalid keystore format&quot;, you are probably using an outdated Java sdk file, so do next:\r\n  \r\n\r\n&gt; Open Visual Studio and update the Java Development Kit Location to\r\n&gt; point to the new JDK under **Tools &gt; Options &gt; Xamarin &gt; Android\r\n&gt; Settings &gt; Java Development Kit Location:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBe sure to restart Visual Studio.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GpdUS.png","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>Note: Multi-dex is enabled.</p>\n<p>After 5 hours of looking or an answer, this is the conclusion I've found -</p>\n<ol>\n<li>Enable diagnostic MSBuild output within Visual Studio, so you can see more details about your error:</li>\n</ol>\n<blockquote>\n<ul>\n<li><strong>Click Tools &gt; Options...</strong></li>\n<li>In the left-hand tree view, select <strong>Projects and Solutions &gt; Build and Run</strong></li>\n<li>In the right-hand panel, set the MSBuild build output verbosity dropdown to <strong>Diagnostic</strong>, Click <strong>OK</strong></li>\n<li>Clean and rebuild your package. <strong>Diagnostic output is visible within the Output panel.</strong></li>\n</ul>\n</blockquote>\n<ol start=\"2\">\n<li>If your error shows &quot;java.io.IOException: Invalid keystore format&quot;, you are probably using an outdated Java sdk file, so do next:</li>\n</ol>\n<blockquote>\n<p>Open Visual Studio and update the Java Development Kit Location to\npoint to the new JDK under <strong>Tools &gt; Options &gt; Xamarin &gt; Android\nSettings &gt; Java Development Kit Location:</strong></p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/GpdUS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GpdUS.png\" alt=\"enter image description here\" /></a></p>\n<p>Be sure to restart Visual Studio.</p>\n"},{"tags":[],"owner":{"account_id":12941373,"reputation":31,"user_id":9676970,"display_name":"Eleazar Saavedra"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668182320,"creation_date":1668182320,"answer_id":74405118,"question_id":44004161,"body_markdown":"In my case solved the problem by signing the .APK whit the values signed into the keystore that we configured to create the APK file in Release mode.\r\n\r\nI taked the Microsoft example in [here][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nand here I put the same values\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\nThat way a solved my problem with \r\n\r\n&quot;java.exe&quot; exited with code 2\r\n\r\nBut the real information problem was in output:\r\n\r\nFailed to load signer &quot;signer #1&quot;\r\njava.io.IOException: Invalid keystore format\r\n\r\nAt the moment I don&#39;t find the real solution to this problem but, this works.\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/xamarin/android/deploy-test/signing/?tabs=windows\r\n  [2]: https://i.stack.imgur.com/jmnNo.png\r\n  [3]: https://i.stack.imgur.com/qHOmx.png","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>In my case solved the problem by signing the .APK whit the values signed into the keystore that we configured to create the APK file in Release mode.</p>\n<p>I taked the Microsoft example in <a href=\"https://learn.microsoft.com/en-us/xamarin/android/deploy-test/signing/?tabs=windows\" rel=\"nofollow noreferrer\">here</a></p>\n<p><a href=\"https://i.stack.imgur.com/jmnNo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jmnNo.png\" alt=\"enter image description here\" /></a></p>\n<p>and here I put the same values</p>\n<p><a href=\"https://i.stack.imgur.com/qHOmx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qHOmx.png\" alt=\"enter image description here\" /></a></p>\n<p>That way a solved my problem with</p>\n<p>&quot;java.exe&quot; exited with code 2</p>\n<p>But the real information problem was in output:</p>\n<p>Failed to load signer &quot;signer #1&quot;\njava.io.IOException: Invalid keystore format</p>\n<p>At the moment I don't find the real solution to this problem but, this works.</p>\n"},{"tags":[],"owner":{"account_id":23762747,"reputation":1,"user_id":17777899,"display_name":"Harish Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697612483,"creation_date":1697120073,"answer_id":77281384,"question_id":44004161,"body_markdown":"Right click on the project and click on Properties\r\nAndroid Options &gt; Check the Enable Multi-Dex and save the \r\n\r\n[image 1][1]\r\n\r\n\r\nNow click on Tools &gt; Options &gt;Xamarin &gt; Android Settings \r\nChange the Java development Kit location\r\n\r\n    C:\\Program Files\\Java\\jdk-17\r\n\r\n\r\n[image 2][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZF1nS.png\r\n  [2]: https://i.stack.imgur.com/YArzu.png","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>Right click on the project and click on Properties\nAndroid Options &gt; Check the Enable Multi-Dex and save the</p>\n<p><a href=\"https://i.stack.imgur.com/ZF1nS.png\" rel=\"nofollow noreferrer\">image 1</a></p>\n<p>Now click on Tools &gt; Options &gt;Xamarin &gt; Android Settings\nChange the Java development Kit location</p>\n<pre><code>C:\\Program Files\\Java\\jdk-17\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/YArzu.png\" rel=\"nofollow noreferrer\">image 2</a></p>\n"}],"owner":{"account_id":6690132,"reputation":891,"user_id":5159872,"accept_rate":100,"display_name":"Daniel_97"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37514,"favorite_count":0,"down_vote_count":3,"up_vote_count":41,"accepted_answer_id":44020852,"answer_count":19,"score":38,"last_activity_date":1697612483,"creation_date":1494944568,"question_id":44004161,"body_markdown":"so I have my Xamarin.Android project which contains several libraries. When I try to build I receive an error which says &quot;java.exe&quot; exited with code 2. \r\n\r\nAfter some hours of google research I found out that I could enable Multidex.\r\nAccording to the blog entry of Jon Doublas I did the steps mentioned. \r\nhttp://www.jon-douglas.com/2016/09/05/xamarin-android-multidex/\r\n\r\nAccording to the blog entry Android API Level &gt; 21 handles Multidex itself. \r\nWell my experience is that it does not. I am building on API Level 25 and get the same error again and again with the same information. \r\nThe steps in the article do not help. It seems like Xamarin.Android does not support Multidex. \r\n\r\nIt seems like you have to handle Multidex by yourself but I haven&#39;t found any solution which is working. Dos anybody found a solution which works? \r\n\r\nI am using Xamarin 4.6 and Visual studio 2017.","title":"&quot;java.exe&quot; exited with code 2 Xamarin.Android project","body":"<p>so I have my Xamarin.Android project which contains several libraries. When I try to build I receive an error which says \"java.exe\" exited with code 2. </p>\n\n<p>After some hours of google research I found out that I could enable Multidex.\nAccording to the blog entry of Jon Doublas I did the steps mentioned. \n<a href=\"http://www.jon-douglas.com/2016/09/05/xamarin-android-multidex/\" rel=\"noreferrer\">http://www.jon-douglas.com/2016/09/05/xamarin-android-multidex/</a></p>\n\n<p>According to the blog entry Android API Level > 21 handles Multidex itself. \nWell my experience is that it does not. I am building on API Level 25 and get the same error again and again with the same information. \nThe steps in the article do not help. It seems like Xamarin.Android does not support Multidex. </p>\n\n<p>It seems like you have to handle Multidex by yourself but I haven't found any solution which is working. Dos anybody found a solution which works? </p>\n\n<p>I am using Xamarin 4.6 and Visual studio 2017.</p>\n"},{"tags":["java","jsp","web-applications","struts"],"comments":[{"owner":{"account_id":2931887,"reputation":8248,"user_id":2511915,"accept_rate":85,"display_name":"Dark Knight"},"score":0,"creation_date":1383995317,"post_id":19875210,"comment_id":29565103,"body_markdown":"Please share your package structure.","body":"Please share your package structure."},{"owner":{"account_id":1050089,"reputation":20492,"user_id":1054245,"accept_rate":100,"display_name":"Prince"},"score":0,"creation_date":1386188082,"post_id":19875210,"comment_id":30437247,"body_markdown":"Did you EVER get any solution for this error?","body":"Did you EVER get any solution for this error?"}],"answers":[{"tags":[],"owner":{"account_id":2931887,"reputation":8248,"user_id":2511915,"accept_rate":85,"display_name":"Dark Knight"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1414593974,"creation_date":1383995475,"answer_id":19875246,"question_id":19875210,"body_markdown":"Make sure `struts-config.xml` resides in WEB-INF folder. Similarly, `hibernate.cfg.xml` should also be at the appropriate place(if you are using it).","title":"javax.servlet.UnavailableException: Missing configuration resource for path /WEB-INF/struts-config.xml","body":"<p>Make sure <code>struts-config.xml</code> resides in WEB-INF folder. Similarly, <code>hibernate.cfg.xml</code> should also be at the appropriate place(if you are using it).</p>\n"},{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1383996087,"creation_date":1383995576,"answer_id":19875259,"question_id":19875210,"body_markdown":"You are configured the web application to use `struts-config.xml`\r\n\r\n    &lt;init-param&gt;\r\n        &lt;param-name&gt;config&lt;/param-name&gt;\r\n        &lt;param-value&gt;/WEB-INF/struts-config.xml&lt;/param-value&gt;\r\n    &lt;/init-param&gt;\r\n\r\nbut there&#39;s not the file with such name in the specified folder. Make sure the file exist there or if you use another name for the struts configuration file you could change this init param value to reflect the file availability. If you have several configuration files each for the module, you could use a comma to separate names.  ","title":"javax.servlet.UnavailableException: Missing configuration resource for path /WEB-INF/struts-config.xml","body":"<p>You are configured the web application to use <code>struts-config.xml</code></p>\n\n<pre><code>&lt;init-param&gt;\n    &lt;param-name&gt;config&lt;/param-name&gt;\n    &lt;param-value&gt;/WEB-INF/struts-config.xml&lt;/param-value&gt;\n&lt;/init-param&gt;\n</code></pre>\n\n<p>but there's not the file with such name in the specified folder. Make sure the file exist there or if you use another name for the struts configuration file you could change this init param value to reflect the file availability. If you have several configuration files each for the module, you could use a comma to separate names.  </p>\n"},{"tags":[],"owner":{"account_id":4681144,"reputation":11,"user_id":3789822,"display_name":"Rama"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1404123896,"creation_date":1404122562,"answer_id":24487573,"question_id":19875210,"body_markdown":"You need to add the *servlet-api.jar* from the apache *lib* folder. You need to include the *struts.xml* folder in *src* folder under java resources.","title":"javax.servlet.UnavailableException: Missing configuration resource for path /WEB-INF/struts-config.xml","body":"<p>You need to add the <em>servlet-api.jar</em> from the apache <em>lib</em> folder. You need to include the <em>struts.xml</em> folder in <em>src</em> folder under java resources.</p>\n"},{"tags":[],"owner":{"account_id":4526530,"reputation":377,"user_id":3678163,"accept_rate":71,"display_name":"Yithirash"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1505548658,"creation_date":1505546700,"answer_id":46251356,"question_id":19875210,"body_markdown":"1) You have mentioned your struts.xml filename as **config-struts.xml** but in the init-param you wrote as **struts-config.xml**. Please check the names properly.\r\n\r\n\r\n2) Or maybe (common issue) because you are missing the DTD tag in your struts xml file. Try to add this code above the `&lt;struts-config&gt;` tag in your **struts-config.xml**.\r\n\r\n`&lt;!DOCTYPE struts-config PUBLIC\r\n       &quot;-//Apache Software Foundation//DTD Struts Configuration 1.3//EN&quot;\r\n       &quot;http://struts.apache.org/dtds/struts-config_1_3.dtd&quot;&gt;`\r\n","title":"javax.servlet.UnavailableException: Missing configuration resource for path /WEB-INF/struts-config.xml","body":"<p>1) You have mentioned your struts.xml filename as <strong>config-struts.xml</strong> but in the init-param you wrote as <strong>struts-config.xml</strong>. Please check the names properly.</p>\n\n<p>2) Or maybe (common issue) because you are missing the DTD tag in your struts xml file. Try to add this code above the <code>&lt;struts-config&gt;</code> tag in your <strong>struts-config.xml</strong>.</p>\n\n<p><code>&lt;!DOCTYPE struts-config PUBLIC\n       \"-//Apache Software Foundation//DTD Struts Configuration 1.3//EN\"\n       \"http://struts.apache.org/dtds/struts-config_1_3.dtd\"&gt;</code></p>\n"}],"owner":{"account_id":3510842,"reputation":41,"user_id":2935193,"display_name":"user2935193"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19648,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":4,"score":4,"last_activity_date":1697612352,"creation_date":1383995190,"question_id":19875210,"body_markdown":"I am new to Struts and I am trying to run a sample login web-application using Struts but I am unable to get the result due to `(javax.servlet.UnavailableException: Missing configuration resource for path /WEB-INF/struts-config.xml)` the error. I had done everything in configuring struts in eclipse. I even don&#39;t no what the exception is? please anyone help me  \r\n\r\n**the errors I am getting are:**\r\n\r\n    javax.servlet.UnavailableException: Missing configuration resource for path /WEB-INF/struts-config.xml\r\n\tat org.apache.struts.action.ActionServlet.splitAndResolvePaths(ActionServlet.java:1872)\r\n\tat org.apache.struts.action.ActionServlet.initModuleConfig(ActionServlet.java:683)\r\n\tat org.apache.struts.action.ActionServlet.init(ActionServlet.java:356)\r\n\tat javax.servlet.GenericServlet.init(GenericServlet.java:212)\r\n\tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1213)\r\n\tat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)\r\n\tat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)\r\n\tat org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)\r\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)\r\n\tat org.apache.catalina.core.StandardHost.start(StandardHost.java:840)\r\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)\r\n\tat org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)\r\n\tat org.apache.catalina.core.StandardService.start(StandardService.java:525)\r\n\tat org.apache.catalina.core.StandardServer.start(StandardServer.java:754)\r\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:595)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\r\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) \r\n\r\n\r\n**`index.jsp`:**\r\n\r\n    &lt;html&gt; \r\n        &lt;body&gt;\r\n            \r\n            \r\n            &lt;form action=&quot;login.do&quot;&gt;\r\n           &lt;tr&gt;\r\n           &lt;td&gt;Username&lt;/td&gt; \r\n           &lt;td&gt;&lt;input type = &quot;text&quot; name = &quot;username&quot; maxlength = &quot;25&quot;&gt;&lt;/td&gt;\r\n           &lt;/tr&gt;\r\n           &lt;tr&gt;\r\n           &lt;td&gt;Password&lt;/td&gt;\r\n           &lt;td&gt;&lt;input type = &quot;password&quot; name = &quot;password&quot; minlength = &quot;8&quot; maxlength = &quot;16&quot;&gt;&lt;/td&gt;\r\n           &lt;/tr&gt;\r\n           \r\n           &lt;tr&gt;\r\n           &lt;td  colspan = &quot;2&quot; align = &quot;center&quot;&gt;&lt;button type = &quot;submit&quot; name = &quot;submit&quot;&gt;Submit&lt;/button&gt;\r\n           &lt;button type = &quot;reset&quot;   name = &quot;reset&quot;&gt;Reset&lt;/button&gt;&lt;/td&gt;\r\n           \r\n           &lt;/tr&gt;\r\n           \r\n                  \r\n            &lt;/form&gt;\r\n        &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n\r\n**`LoginForm.java`:**\r\n\r\n    package com.sample.com;\r\n    \r\n    import org.apache.struts.action.ActionForm;\r\n    \r\n    import org.apache.struts.action.Action;\r\n    \r\n    import org.apache.struts.action.ActionMapping;\r\n    \r\n    import org.apache.struts.action.ActionForward;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    \r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    public class LoginAction extends Action {\r\n    \r\n        public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest req, HttpServletResponse res)\r\n        {\r\n            System.out.println(&quot;test&quot;);\r\n    \r\n        LoginForm login = (LoginForm)form;\r\n    \r\n        String uname=login.getUname();\r\n    \r\n        String pass=login.getPass();\r\n    \r\n        if(uname==&quot;admin&quot; &amp;&amp; pass ==&quot;test&quot;)\r\n        {\r\n        return mapping.findForward(&quot;success&quot;);\r\n    \r\n        }\r\n        else\r\n        {\r\n        return mapping.findForward(&quot;failure&quot;);\r\n    \r\n        }\r\n      }\r\n    }\r\n\r\n**`LoginAction.java`:**\r\n\r\n    package com.sample.com;\r\n    \r\n    import org.apache.struts.action.ActionForm;\r\n    \r\n    import org.apache.struts.action.Action;\r\n    \r\n    import org.apache.struts.action.ActionMapping;\r\n    \r\n    import org.apache.struts.action.ActionForward;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    \r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    \r\n    \r\n    public class LoginAction extends Action {\r\n    \r\n        public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest req, HttpServletResponse res)\r\n        {\r\n    \r\n            System.out.println(&quot;test&quot;);\r\n    \r\n        LoginForm login = (LoginForm)form;\r\n    \r\n        String uname=login.getUname();\r\n    \r\n        String pass=login.getPass();\r\n    \r\n        if(uname==&quot;admin&quot; &amp;&amp; pass ==&quot;test&quot;)\r\n        {\r\n        return mapping.findForward(&quot;success&quot;);\r\n        }\r\n        else\r\n        {\r\n        return mapping.findForward(&quot;failure&quot;);\r\n    \r\n        }\r\n    \r\n      }\r\n    \r\n    \r\n    }\r\n\r\n\r\n\r\n**`config-struts.xml`:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n     \r\n    \r\n     \r\n    &lt;struts-config&gt;\r\n     \r\n        &lt;form-beans&gt;\r\n            &lt;form-bean name=&quot;loginRequest&quot; type=&quot;com.sample.com.LoginForm&quot;/&gt;\r\n        &lt;/form-beans&gt; \r\n     \r\n        &lt;global-forwards&gt;\r\n            &lt;forward name=&quot;success&quot;  path=&quot;/success.jsp&quot;/&gt;\r\n        &lt;/global-forwards&gt;\r\n     \r\n        &lt;action-mappings&gt;\r\n            &lt;action path=&quot;/login&quot; type=&quot;com.sample.com.LoginAction&quot; name=&quot;loginRequest&quot;&gt;\r\n                &lt;forward name=&quot;success&quot; path=&quot;/success.jsp&quot;/&gt;\r\n                &lt;forward name=&quot;failure&quot; path=&quot;/failure.jsp&quot;/&gt;        \r\n            &lt;/action&gt;\r\n        &lt;/action-mappings&gt;\r\n     \r\n    &lt;/struts-config&gt;\r\n\r\n**`web.xml`:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;web-app version=&quot;3.0&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;&gt;\r\n    \r\n        &lt;servlet&gt;\r\n            &lt;servlet-name&gt;action&lt;/servlet-name&gt;\r\n            &lt;servlet-class&gt;org.apache.struts.action.ActionServlet&lt;/servlet-class&gt;\r\n            &lt;init-param&gt;\r\n                &lt;param-name&gt;config&lt;/param-name&gt;\r\n                &lt;param-value&gt;/WEB-INF/struts-config.xml&lt;/param-value&gt;\r\n            &lt;/init-param&gt;\r\n            &lt;init-param&gt;\r\n                &lt;param-name&gt;debug&lt;/param-name&gt;\r\n                &lt;param-value&gt;2&lt;/param-value&gt;\r\n            &lt;/init-param&gt;\r\n            &lt;init-param&gt;\r\n                &lt;param-name&gt;detail&lt;/param-name&gt;\r\n                &lt;param-value&gt;2&lt;/param-value&gt;\r\n            &lt;/init-param&gt;\r\n            &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;\r\n        &lt;/servlet&gt;\r\n        &lt;servlet-mapping&gt;\r\n            &lt;servlet-name&gt;action&lt;/servlet-name&gt;\r\n            &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        &lt;session-config&gt;\r\n            &lt;session-timeout&gt;\r\n                30\r\n            &lt;/session-timeout&gt;\r\n        &lt;/session-config&gt;\r\n        &lt;welcome-file-list&gt;\r\n            &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\r\n        &lt;/welcome-file-list&gt;\r\n    &lt;/web-app&gt;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"javax.servlet.UnavailableException: Missing configuration resource for path /WEB-INF/struts-config.xml","body":"<p>I am new to Struts and I am trying to run a sample login web-application using Struts but I am unable to get the result due to <code>(javax.servlet.UnavailableException: Missing configuration resource for path /WEB-INF/struts-config.xml)</code> the error. I had done everything in configuring struts in eclipse. I even don't no what the exception is? please anyone help me  </p>\n\n<p><strong>the errors I am getting are:</strong></p>\n\n<pre><code>javax.servlet.UnavailableException: Missing configuration resource for path /WEB-INF/struts-config.xml\nat org.apache.struts.action.ActionServlet.splitAndResolvePaths(ActionServlet.java:1872)\nat org.apache.struts.action.ActionServlet.initModuleConfig(ActionServlet.java:683)\nat org.apache.struts.action.ActionServlet.init(ActionServlet.java:356)\nat javax.servlet.GenericServlet.init(GenericServlet.java:212)\nat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1213)\nat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)\nat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)\nat org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)\nat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)\nat org.apache.catalina.core.StandardHost.start(StandardHost.java:840)\nat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)\nat org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)\nat org.apache.catalina.core.StandardService.start(StandardService.java:525)\nat org.apache.catalina.core.StandardServer.start(StandardServer.java:754)\nat org.apache.catalina.startup.Catalina.start(Catalina.java:595)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\nat java.lang.reflect.Method.invoke(Unknown Source)\nat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\nat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) \n</code></pre>\n\n<p><strong><code>index.jsp</code>:</strong></p>\n\n<pre><code>&lt;html&gt; \n    &lt;body&gt;\n\n\n        &lt;form action=\"login.do\"&gt;\n       &lt;tr&gt;\n       &lt;td&gt;Username&lt;/td&gt; \n       &lt;td&gt;&lt;input type = \"text\" name = \"username\" maxlength = \"25\"&gt;&lt;/td&gt;\n       &lt;/tr&gt;\n       &lt;tr&gt;\n       &lt;td&gt;Password&lt;/td&gt;\n       &lt;td&gt;&lt;input type = \"password\" name = \"password\" minlength = \"8\" maxlength = \"16\"&gt;&lt;/td&gt;\n       &lt;/tr&gt;\n\n       &lt;tr&gt;\n       &lt;td  colspan = \"2\" align = \"center\"&gt;&lt;button type = \"submit\" name = \"submit\"&gt;Submit&lt;/button&gt;\n       &lt;button type = \"reset\"   name = \"reset\"&gt;Reset&lt;/button&gt;&lt;/td&gt;\n\n       &lt;/tr&gt;\n\n\n        &lt;/form&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong><code>LoginForm.java</code>:</strong></p>\n\n<pre><code>package com.sample.com;\n\nimport org.apache.struts.action.ActionForm;\n\nimport org.apache.struts.action.Action;\n\nimport org.apache.struts.action.ActionMapping;\n\nimport org.apache.struts.action.ActionForward;\n\nimport javax.servlet.http.HttpServletRequest;\n\nimport javax.servlet.http.HttpServletResponse;\n\npublic class LoginAction extends Action {\n\n    public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest req, HttpServletResponse res)\n    {\n        System.out.println(\"test\");\n\n    LoginForm login = (LoginForm)form;\n\n    String uname=login.getUname();\n\n    String pass=login.getPass();\n\n    if(uname==\"admin\" &amp;&amp; pass ==\"test\")\n    {\n    return mapping.findForward(\"success\");\n\n    }\n    else\n    {\n    return mapping.findForward(\"failure\");\n\n    }\n  }\n}\n</code></pre>\n\n<p><strong><code>LoginAction.java</code>:</strong></p>\n\n<pre><code>package com.sample.com;\n\nimport org.apache.struts.action.ActionForm;\n\nimport org.apache.struts.action.Action;\n\nimport org.apache.struts.action.ActionMapping;\n\nimport org.apache.struts.action.ActionForward;\n\nimport javax.servlet.http.HttpServletRequest;\n\nimport javax.servlet.http.HttpServletResponse;\n\n\n\npublic class LoginAction extends Action {\n\n    public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest req, HttpServletResponse res)\n    {\n\n        System.out.println(\"test\");\n\n    LoginForm login = (LoginForm)form;\n\n    String uname=login.getUname();\n\n    String pass=login.getPass();\n\n    if(uname==\"admin\" &amp;&amp; pass ==\"test\")\n    {\n    return mapping.findForward(\"success\");\n    }\n    else\n    {\n    return mapping.findForward(\"failure\");\n\n    }\n\n  }\n\n\n}\n</code></pre>\n\n<p><strong><code>config-struts.xml</code>:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n\n\n\n&lt;struts-config&gt;\n\n    &lt;form-beans&gt;\n        &lt;form-bean name=\"loginRequest\" type=\"com.sample.com.LoginForm\"/&gt;\n    &lt;/form-beans&gt; \n\n    &lt;global-forwards&gt;\n        &lt;forward name=\"success\"  path=\"/success.jsp\"/&gt;\n    &lt;/global-forwards&gt;\n\n    &lt;action-mappings&gt;\n        &lt;action path=\"/login\" type=\"com.sample.com.LoginAction\" name=\"loginRequest\"&gt;\n            &lt;forward name=\"success\" path=\"/success.jsp\"/&gt;\n            &lt;forward name=\"failure\" path=\"/failure.jsp\"/&gt;        \n        &lt;/action&gt;\n    &lt;/action-mappings&gt;\n\n&lt;/struts-config&gt;\n</code></pre>\n\n<p><strong><code>web.xml</code>:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;web-app version=\"3.0\" xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;action&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.apache.struts.action.ActionServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;config&lt;/param-name&gt;\n            &lt;param-value&gt;/WEB-INF/struts-config.xml&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;debug&lt;/param-name&gt;\n            &lt;param-value&gt;2&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;detail&lt;/param-name&gt;\n            &lt;param-value&gt;2&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;action&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    &lt;session-config&gt;\n        &lt;session-timeout&gt;\n            30\n        &lt;/session-timeout&gt;\n    &lt;/session-config&gt;\n    &lt;welcome-file-list&gt;\n        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n    &lt;/welcome-file-list&gt;\n&lt;/web-app&gt;\n</code></pre>\n"},{"tags":["java","hibernate","jpa","persist"],"comments":[{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1697451347,"post_id":77300865,"comment_id":136277221,"body_markdown":"If you can&#39;t find an object in the database then it is not created. You should provide a debugging details.","body":"If you can&#39;t find an object in the database then it is not created. You should provide a debugging details."},{"owner":{"account_id":9823976,"reputation":11,"user_id":7277672,"display_name":"Jes&#250;s Moncada Ram&#237;rez"},"score":0,"creation_date":1697455925,"post_id":77300865,"comment_id":136278009,"body_markdown":"I forgot to explain this. The objects are perfectly created in the database (with the auto-generated id). I&#39;m editing the post.","body":"I forgot to explain this. The objects are perfectly created in the database (with the auto-generated id). I&#39;m editing the post."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1697553315,"post_id":77300865,"comment_id":136292686,"body_markdown":"Persist is a no-op. The insert statement is only required to be performed when the context is synchronized to the database - when it is flushed or the transaction commits. Your entity won&#39;t have an Id assigned until after the insert when using identity, so you can force a flush or look at the managed entity instance after the transaction commits. Also note, JPA&#39;s EntityManager&#39;s Persist method doesn&#39;t return anything. What you pass in becomes the managed entity instance, so I don&#39;t quite know what you are calling or showing in your question, but it isn&#39;t a JPA method.","body":"Persist is a no-op. The insert statement is only required to be performed when the context is synchronized to the database - when it is flushed or the transaction commits. Your entity won&#39;t have an Id assigned until after the insert when using identity, so you can force a flush or look at the managed entity instance after the transaction commits. Also note, JPA&#39;s EntityManager&#39;s Persist method doesn&#39;t return anything. What you pass in becomes the managed entity instance, so I don&#39;t quite know what you are calling or showing in your question, but it isn&#39;t a JPA method."},{"owner":{"account_id":9823976,"reputation":11,"user_id":7277672,"display_name":"Jes&#250;s Moncada Ram&#237;rez"},"score":0,"creation_date":1697611919,"post_id":77300865,"comment_id":136300016,"body_markdown":"That&#39;s true, I&#39;m correcting the question. What I wanted to say is: after the `persist`, if I look at the managed entity, one of the fields of the composed id is null.","body":"That&#39;s true, I&#39;m correcting the question. What I wanted to say is: after the <code>persist</code>, if I look at the managed entity, one of the fields of the composed id is null."}],"answers":[{"tags":[],"owner":{"account_id":9823976,"reputation":11,"user_id":7277672,"display_name":"Jes&#250;s Moncada Ram&#237;rez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697612215,"creation_date":1697612215,"answer_id":77314073,"question_id":77300865,"body_markdown":"Actually, I have found the answer to my question [here][1]. Basically, auto-generated composed ids are currently not supported in Hibernate.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/66377401/7277672","title":"Autogenerated field of embedded id is null after JPA persisting","body":"<p>Actually, I have found the answer to my question <a href=\"https://stackoverflow.com/a/66377401/7277672\">here</a>. Basically, auto-generated composed ids are currently not supported in Hibernate.</p>\n"}],"owner":{"account_id":9823976,"reputation":11,"user_id":7277672,"display_name":"Jes&#250;s Moncada Ram&#237;rez"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77314073,"answer_count":1,"score":0,"last_activity_date":1697612215,"creation_date":1697448956,"question_id":77300865,"body_markdown":"I have a class structure made up of a main class (called `MaterialResource`) that has an embedded id (called `MaterialResourceId`). Note also that the `MaterialResourceId` class has two fields: `idMaterialResource` and `idCompany`. `idMaterialResource` is **autogenerated** with strategy identity.\r\n\r\nThe problem is that when I persist a `MaterialResource` object (with `idMaterialResource` set to `null`, as it should be auto-generated) the database insertion works perfectly, but the returned object has the `idMaterialResource` field set to `null` too. This way I cannot know what id (what number) has been assigned to my newly created object.\r\n\r\n\r\nThe classes are the following. This is the main class:\r\n```java\r\n@Entity\r\n@Table(name = &quot;material_resource&quot;)\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class MaterialResource {\r\n\r\n    @EmbeddedId\r\n    private MaterialResourceId materialResourceId;\r\n\r\n    @Column(name = &quot;name&quot;, nullable = false)\r\n    private String name = &quot;&quot;;\r\n    ...\r\n}\r\n```\r\n\r\nThis is its embedded id:\r\n```java\r\n@Embeddable\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class MaterialResourceId implements Serializable {\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id_materialresource&quot;)\r\n    private Integer idMaterialResource;\r\n\r\n    @Column(name = &quot;id_company&quot;)\r\n    private Integer idCompany;\r\n}\r\n```\r\n(Note that I&#39;m using the `lombok` annotations to generate getters, setters, equals, hashCode...)\r\n\r\nNow, if I try to execute:\r\n```\r\nMaterialResourceId id = new MaterialResourceId(null, 1);\r\nMaterialResource materialResource = MaterialResource(id, &quot;Material resource name&quot;, ...);\r\ngetEntityManager().persist(materialResource);\r\n```\r\n(Note that all the previous code is placed inside an entity manager transaction)\r\n\r\nIt turns out that `materialResource.materialResourceId.idMaterialResource` is `null`. As I said, this is a problem since I cannot know which id has been assigned. Thus, I cannot return to the client the id of the created object, I cannot find the object in the database... \r\n\r\nHowever, if I inspect the database with an external app (DBeaver), a row in the `MaterialResource` table has been properly created (with an autogenerated value for `idMaterialResource`).\r\n\r\nThe Flyway script for creating the `MaterialResource` table is the following (here is where I set `id_materialresource` to be auto-generated).\r\n```sql\r\nCREATE TABLE IF NOT EXISTS material_resource(\r\n\tid_materialresource INT NOT NULL AUTO_INCREMENT,\r\n\tid_company INT NOT NULL,\r\n\tname VARCHAR(255) NOT NULL DEFAULT &quot;&quot;,\r\n\tidentifier VARCHAR(255) NOT NULL DEFAULT &quot;&quot;,\r\n\tfromDate DATE NOT NULL,\r\n\ttoDate DATE NOT NULL,\r\n\tPRIMARY KEY (id_recurso, id_empresa)\r\n);\r\n```\r\n\r\nAny help is useful. Thanks!\r\n","title":"Autogenerated field of embedded id is null after JPA persisting","body":"<p>I have a class structure made up of a main class (called <code>MaterialResource</code>) that has an embedded id (called <code>MaterialResourceId</code>). Note also that the <code>MaterialResourceId</code> class has two fields: <code>idMaterialResource</code> and <code>idCompany</code>. <code>idMaterialResource</code> is <strong>autogenerated</strong> with strategy identity.</p>\n<p>The problem is that when I persist a <code>MaterialResource</code> object (with <code>idMaterialResource</code> set to <code>null</code>, as it should be auto-generated) the database insertion works perfectly, but the returned object has the <code>idMaterialResource</code> field set to <code>null</code> too. This way I cannot know what id (what number) has been assigned to my newly created object.</p>\n<p>The classes are the following. This is the main class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;material_resource&quot;)\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class MaterialResource {\n\n    @EmbeddedId\n    private MaterialResourceId materialResourceId;\n\n    @Column(name = &quot;name&quot;, nullable = false)\n    private String name = &quot;&quot;;\n    ...\n}\n</code></pre>\n<p>This is its embedded id:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Embeddable\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class MaterialResourceId implements Serializable {\n    private static final long serialVersionUID = 1L;\n\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id_materialresource&quot;)\n    private Integer idMaterialResource;\n\n    @Column(name = &quot;id_company&quot;)\n    private Integer idCompany;\n}\n</code></pre>\n<p>(Note that I'm using the <code>lombok</code> annotations to generate getters, setters, equals, hashCode...)</p>\n<p>Now, if I try to execute:</p>\n<pre><code>MaterialResourceId id = new MaterialResourceId(null, 1);\nMaterialResource materialResource = MaterialResource(id, &quot;Material resource name&quot;, ...);\ngetEntityManager().persist(materialResource);\n</code></pre>\n<p>(Note that all the previous code is placed inside an entity manager transaction)</p>\n<p>It turns out that <code>materialResource.materialResourceId.idMaterialResource</code> is <code>null</code>. As I said, this is a problem since I cannot know which id has been assigned. Thus, I cannot return to the client the id of the created object, I cannot find the object in the database...</p>\n<p>However, if I inspect the database with an external app (DBeaver), a row in the <code>MaterialResource</code> table has been properly created (with an autogenerated value for <code>idMaterialResource</code>).</p>\n<p>The Flyway script for creating the <code>MaterialResource</code> table is the following (here is where I set <code>id_materialresource</code> to be auto-generated).</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE IF NOT EXISTS material_resource(\n    id_materialresource INT NOT NULL AUTO_INCREMENT,\n    id_company INT NOT NULL,\n    name VARCHAR(255) NOT NULL DEFAULT &quot;&quot;,\n    identifier VARCHAR(255) NOT NULL DEFAULT &quot;&quot;,\n    fromDate DATE NOT NULL,\n    toDate DATE NOT NULL,\n    PRIMARY KEY (id_recurso, id_empresa)\n);\n</code></pre>\n<p>Any help is useful. Thanks!</p>\n"},{"tags":["java","tomcat10"],"owner":{"account_id":28470885,"reputation":1,"user_id":21786216,"display_name":" Chakri Reguri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697611900,"creation_date":1697611900,"question_id":77314044,"body_markdown":"In a dynamic web project, one of the users mistakenly committed the .classpath file to the SVN repository. As a result, all the other users attempting to work on the project are facing issues when trying to run it with Tomcat.\r\nApache Tomcat version---10.1\r\nJava --17\r\nDynamic Web Module--5.0\r\nEclise---2023-09\r\n\r\nI tried to change dependencies in pom but its not working\r\nthe class path (xml)is same as previous (for other users even after updating the project)-but it is not running and throwing a class not found exception for my filter","title":"Committing .classpath to SVN Repository Causes Project Execution Issues(Tomcat-Dynamic Web Project)","body":"<p>In a dynamic web project, one of the users mistakenly committed the .classpath file to the SVN repository. As a result, all the other users attempting to work on the project are facing issues when trying to run it with Tomcat.\nApache Tomcat version---10.1\nJava --17\nDynamic Web Module--5.0\nEclise---2023-09</p>\n<p>I tried to change dependencies in pom but its not working\nthe class path (xml)is same as previous (for other users even after updating the project)-but it is not running and throwing a class not found exception for my filter</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"score":5,"creation_date":1526290326,"post_id":50327099,"comment_id":87669942,"body_markdown":"Unclear as to what you&#39;re asking at the moment - do you literally just want to know how to call an existing method in Java? Or is there something more here?","body":"Unclear as to what you&#39;re asking at the moment - do you literally just want to know how to call an existing method in Java? Or is there something more here?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1697615552,"post_id":50327099,"comment_id":136300609,"body_markdown":"Or there is `PropertyChangeListener` and friends, but it all depends on what exactly you&#39;re trying to do, which still isn&#39;t clear 5 years later.","body":"Or there is <code>PropertyChangeListener</code> and friends, but it all depends on what exactly you&#39;re trying to do, which still isn&#39;t clear 5 years later."}],"answers":[{"comments":[{"owner":{"account_id":1091117,"reputation":8451,"user_id":1085736,"accept_rate":64,"display_name":"MobileMon"},"score":1,"creation_date":1573571597,"post_id":50327299,"comment_id":103919953,"body_markdown":"From my understanding you should never directly access instance fields in java due to how class inheritance works. You should always use getters and setters. If class B extends class A, and in class B it overrides a getter, when accessing that getter method on an instance of class B but specified to type A( A a = new B() ), class B&#39;s overridden getter is called (as expected). But if you were to directly access an instance field in that same scenario, class A&#39;s instance field would be called and not B&#39;s (not expected). It&#39;s confusing but it makes sense. I will create a blog post demonstrating","body":"From my understanding you should never directly access instance fields in java due to how class inheritance works. You should always use getters and setters. If class B extends class A, and in class B it overrides a getter, when accessing that getter method on an instance of class B but specified to type A( A a = new B() ), class B&#39;s overridden getter is called (as expected). But if you were to directly access an instance field in that same scenario, class A&#39;s instance field would be called and not B&#39;s (not expected). It&#39;s confusing but it makes sense. I will create a blog post demonstrating"},{"owner":{"account_id":3816309,"reputation":9934,"user_id":3165602,"accept_rate":62,"display_name":"Oleg Sklyar"},"score":0,"creation_date":1573662205,"post_id":50327299,"comment_id":103956892,"body_markdown":"Class inheritance works exactly the same way in e.g. python and there it is a standard practice to access fields directly. Getters provide a level of encapsulation, good to have normally, but not always. I would accept an argument though that you cannot satisfy an interface by field access, but can by methods; although I would question the value of an interface that defines getters.","body":"Class inheritance works exactly the same way in e.g. python and there it is a standard practice to access fields directly. Getters provide a level of encapsulation, good to have normally, but not always. I would accept an argument though that you cannot satisfy an interface by field access, but can by methods; although I would question the value of an interface that defines getters."}],"tags":[],"owner":{"account_id":3816309,"reputation":9934,"user_id":3165602,"accept_rate":62,"display_name":"Oleg Sklyar"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697611702,"creation_date":1526290828,"answer_id":50327299,"question_id":50327099,"body_markdown":"Unfortunately, there is no concept of &quot;property&quot; in Java. That is, it is impossible to trigger a setter or a getter call by assigning a value to a field or reading a value from it.\r\n\r\nA general pattern is to call getter and setter methods instead, keeping the field value private so it can only be accessed as a value within the class.\r\n\r\nThere is a tendency in the Java community to overuse getters and setters, automatically providing both for private fields (the situation in Java Beans). It is advisable though to first, define no getter/setter methods for data that should not be directly accessible from outside, second, work with final values wherever possible and thus define no setters for them, and third, use public fields for DTOs whose sole purpose is to transport data (see &quot;Clean Code&quot; by Uncle Bob).","title":"Java computed properties","body":"<p>Unfortunately, there is no concept of &quot;property&quot; in Java. That is, it is impossible to trigger a setter or a getter call by assigning a value to a field or reading a value from it.</p>\n<p>A general pattern is to call getter and setter methods instead, keeping the field value private so it can only be accessed as a value within the class.</p>\n<p>There is a tendency in the Java community to overuse getters and setters, automatically providing both for private fields (the situation in Java Beans). It is advisable though to first, define no getter/setter methods for data that should not be directly accessible from outside, second, work with final values wherever possible and thus define no setters for them, and third, use public fields for DTOs whose sole purpose is to transport data (see &quot;Clean Code&quot; by Uncle Bob).</p>\n"}],"owner":{"account_id":13567649,"reputation":9,"user_id":9787220,"display_name":"Arthour"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5131,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1697611702,"creation_date":1526290177,"question_id":50327099,"body_markdown":"I use Jacob library to manipulate my Win32 application.\r\nI got some java SomeClass which is an implementation of win32 SomeClass.\r\n\r\nExample:\r\n\r\n    public class SomeClass{\r\n        public String someProperty;\r\n\r\n        public String getProperty(String propertyName){\r\n             return SomeStaticSystemClass.getProperty(propertyName);\r\n        }\r\n\r\n        public String setProperty(String propertyName, String value){\r\n             return SomeStaticSystemClass.getProperty(propertyName, value);\r\n        }\r\n    }\r\n\r\nHow can I call getProperty or setProperty methods when I get or set &quot;someProperty&quot; field?\r\n\r\nIn Swift, for example, I can do something like that:\r\n\r\n    struct Rect {\r\n    var origin = Point()\r\n    var size = Size()\r\n    var center: Point {\r\n        get {\r\n            let centerX = origin.x + (size.width / 2)\r\n            let centerY = origin.y + (size.height / 2)\r\n            return Point(x: centerX, y: centerY)\r\n        }\r\n        set(newCenter) {\r\n            origin.x = newCenter.x - (size.width / 2)\r\n            origin.y = newCenter.y - (size.height / 2)\r\n        }\r\n    }\r\n    }\r\n\r\n\r\n","title":"Java computed properties","body":"<p>I use Jacob library to manipulate my Win32 application.\nI got some java SomeClass which is an implementation of win32 SomeClass.</p>\n<p>Example:</p>\n<pre><code>public class SomeClass{\n    public String someProperty;\n\n    public String getProperty(String propertyName){\n         return SomeStaticSystemClass.getProperty(propertyName);\n    }\n\n    public String setProperty(String propertyName, String value){\n         return SomeStaticSystemClass.getProperty(propertyName, value);\n    }\n}\n</code></pre>\n<p>How can I call getProperty or setProperty methods when I get or set &quot;someProperty&quot; field?</p>\n<p>In Swift, for example, I can do something like that:</p>\n<pre><code>struct Rect {\nvar origin = Point()\nvar size = Size()\nvar center: Point {\n    get {\n        let centerX = origin.x + (size.width / 2)\n        let centerY = origin.y + (size.height / 2)\n        return Point(x: centerX, y: centerY)\n    }\n    set(newCenter) {\n        origin.x = newCenter.x - (size.width / 2)\n        origin.y = newCenter.y - (size.height / 2)\n    }\n}\n}\n</code></pre>\n"},{"tags":["java","json","maven","jackson"],"comments":[{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1508332122,"post_id":46810788,"comment_id":80568969,"body_markdown":"Might be related to reading the entity from the response, rather than your model itself. For instance if you read the value from `String` from your `ObjectMapper`, by parametrizing with `new TypeReference&lt;List&lt;ImportTask&gt;&gt;(){}`, it will successfully de-serialize.","body":"Might be related to reading the entity from the response, rather than your model itself. For instance if you read the value from <code>String</code> from your <code>ObjectMapper</code>, by parametrizing with <code>new TypeReference&lt;List&lt;ImportTask&gt;&gt;(){}</code>, it will successfully de-serialize."},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1508332407,"post_id":46810788,"comment_id":80569149,"body_markdown":"Your JSON is a JSON String, not a JSON array, for whatever reason.","body":"Your JSON is a JSON String, not a JSON array, for whatever reason."}],"answers":[{"tags":[],"owner":{"account_id":8173271,"reputation":175,"user_id":6152945,"accept_rate":60,"display_name":"Piotr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1508336612,"creation_date":1508336612,"answer_id":46812501,"question_id":46810788,"body_markdown":"Sotirios is correct.\r\n\r\nProblem is with webservice returning strings instead of json.","title":"Jackson Can not deserialize instance of java.util.ArrayList out of VALUE_STRING token","body":"<p>Sotirios is correct.</p>\n\n<p>Problem is with webservice returning strings instead of json.</p>\n"},{"tags":[],"owner":{"account_id":10606749,"reputation":1,"user_id":7811852,"display_name":"W.lu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555413959,"creation_date":1555411130,"answer_id":55706218,"question_id":46810788,"body_markdown":"You are returning a string not jsonString.\r\n\r\n```\r\nObjectMapper mapper = new ObjectMapper();\r\nString jsonString = mapper.readValue(&quot;returning&quot;,String.class);\r\n// then,your operation...\r\n```","title":"Jackson Can not deserialize instance of java.util.ArrayList out of VALUE_STRING token","body":"<p>You are returning a string not jsonString.</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nString jsonString = mapper.readValue(\"returning\",String.class);\n// then,your operation...\n</code></pre>\n"}],"owner":{"account_id":8173271,"reputation":175,"user_id":6152945,"accept_rate":60,"display_name":"Piotr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11054,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1697614550,"accepted_answer_id":46812501,"answer_count":2,"score":0,"last_activity_date":1697611670,"creation_date":1508331595,"question_id":46810788,"body_markdown":"i am having problem with deserializing JSON string. I think i tried everything and i got stuck. This is my code so far. Maven:\r\n\r\n\r\n    \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\r\n            &lt;version&gt;2.26&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;\r\n            &lt;version&gt;2.26&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\r\n            &lt;version&gt;2.26&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.jaxrs&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-jaxrs-json-provider&lt;/artifactId&gt;\r\n            &lt;version&gt;2.9.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nEntity:\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class ImportTask {\r\n        @JsonProperty(&quot;ID&quot;)\r\n        private long id;\r\n        @JsonProperty(&quot;Name&quot;)\r\n        private String name;\r\n        @JsonProperty(&quot;Description&quot;)\r\n        private String description;\r\n\r\n        public ImportTask() {\r\n        }\r\n\r\n        // getters and setters\r\n    }\r\n\r\nClient:\r\n            \r\n    List&lt;ImportTask&gt; importTaskList = new ArrayList&lt;ImportTask&gt;();\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.enable(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY);\r\n    JacksonJaxbJsonProvider jacksonJaxbJsonProvider = new JacksonJaxbJsonProvider();\r\n    jacksonJaxbJsonProvider.setMapper(mapper);\r\n    Client client = ClientBuilder.newClient(new ClientConfig(jacksonJaxbJsonProvider));\r\n    Response response= client\r\n                         .target(&quot;http://localhost:51873/api/getImportTaskList&quot;)\r\n                         .request(MediaType.APPLICATION_JSON)\r\n                        .get();\r\n    importTaskList = response.readEntity(new GenericType&lt;List&lt;ImportTask&gt;&gt;(){});\r\n\r\nThis is JSON string i get from webservice:\r\n\r\n    &quot;[{\\&quot;ID\\&quot;:16,\\&quot;Name\\&quot;:\\&quot;name\\&quot;,\\&quot;Description\\&quot;:\\&quot;description\\&quot;}]&quot;\r\n\r\ni am getting this error\r\n\r\n    javax.ws.rs.ProcessingException: Error reading entity from input stream.\r\n    .......\r\n\r\n    \r\n\r\n&gt; Caused by: com.fasterxml.jackson.databind.JsonMappingException: Can\r\n&gt; not deserialize instance of java.util.ArrayList out of VALUE_STRING\r\n&gt; token\r\n\r\nIs error related to Id being passed as int not string?\r\nAny help would be much apprecieted. ","title":"Jackson Can not deserialize instance of java.util.ArrayList out of VALUE_STRING token","body":"<p>i am having problem with deserializing JSON string. I think i tried everything and i got stuck. This is my code so far. Maven:</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\n        &lt;version&gt;2.26&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;\n        &lt;version&gt;2.26&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\n        &lt;version&gt;2.26&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.jaxrs&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-jaxrs-json-provider&lt;/artifactId&gt;\n        &lt;version&gt;2.9.2&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>Entity:</p>\n\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\npublic class ImportTask {\n    @JsonProperty(\"ID\")\n    private long id;\n    @JsonProperty(\"Name\")\n    private String name;\n    @JsonProperty(\"Description\")\n    private String description;\n\n    public ImportTask() {\n    }\n\n    // getters and setters\n}\n</code></pre>\n\n<p>Client:</p>\n\n<pre><code>List&lt;ImportTask&gt; importTaskList = new ArrayList&lt;ImportTask&gt;();\nObjectMapper mapper = new ObjectMapper();\nmapper.enable(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY);\nJacksonJaxbJsonProvider jacksonJaxbJsonProvider = new JacksonJaxbJsonProvider();\njacksonJaxbJsonProvider.setMapper(mapper);\nClient client = ClientBuilder.newClient(new ClientConfig(jacksonJaxbJsonProvider));\nResponse response= client\n                     .target(\"http://localhost:51873/api/getImportTaskList\")\n                     .request(MediaType.APPLICATION_JSON)\n                    .get();\nimportTaskList = response.readEntity(new GenericType&lt;List&lt;ImportTask&gt;&gt;(){});\n</code></pre>\n\n<p>This is JSON string i get from webservice:</p>\n\n<pre><code>\"[{\\\"ID\\\":16,\\\"Name\\\":\\\"name\\\",\\\"Description\\\":\\\"description\\\"}]\"\n</code></pre>\n\n<p>i am getting this error</p>\n\n<pre><code>javax.ws.rs.ProcessingException: Error reading entity from input stream.\n.......\n</code></pre>\n\n<blockquote>\n  <p>Caused by: com.fasterxml.jackson.databind.JsonMappingException: Can\n  not deserialize instance of java.util.ArrayList out of VALUE_STRING\n  token</p>\n</blockquote>\n\n<p>Is error related to Id being passed as int not string?\nAny help would be much apprecieted. </p>\n"},{"tags":["java","spring-boot","maven"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1697205614,"post_id":77287515,"comment_id":136254439,"body_markdown":"Remove the jacoco-maven-plugin from your dependencies... also you seemed to be mixing different versions of spring boot ...for example `feign`... there is by default on in spring boot... also hibernate-validator etc. are part of spring boot...  apart from that please post the full pom files not only excerpts... or even better a link to the project...","body":"Remove the jacoco-maven-plugin from your dependencies... also you seemed to be mixing different versions of spring boot ...for example <code>feign</code>... there is by default on in spring boot... also hibernate-validator etc. are part of spring boot...  apart from that please post the full pom files not only excerpts... or even better a link to the project..."}],"answers":[{"comments":[{"owner":{"account_id":29663871,"reputation":11,"user_id":22734871,"display_name":"foreverchild"},"score":0,"creation_date":1697996954,"post_id":77313999,"comment_id":136346489,"body_markdown":"Wow this was so helpful thank you so much it worked","body":"Wow this was so helpful thank you so much it worked"}],"tags":[],"owner":{"account_id":12554188,"reputation":1,"user_id":9134577,"display_name":"Chetan Sengar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697611387,"creation_date":1697611387,"answer_id":77313999,"question_id":77287515,"body_markdown":"It appears that the error is arising from an incompatibility with Java 17 and the Maven resources plugin you&#39;re using.\r\n\r\nJava 17 introduced strong encapsulation of the JDK&#39;s internal APIs using JEP 396. Some libraries and plugins, which relied on these internal APIs in the past, might fail under Java 17 if they haven&#39;t been updated.\r\n\r\nHere are some steps to address the issue:\r\n\r\n1. Update Maven: Ensure that you&#39;re using the latest version of Maven that supports Java 17. Ideally, Maven 3.8.4 or later.\r\n2. Update Maven Resource Plugin: The version 3.3.1 of the maven-resources-plugin that you&#39;re using might not be fully compatible with Java 17. Update it to a more recent version that has support for Java 17.\r\nReplace it with : &lt;version&gt;3.3.0&lt;/version&gt;\r\n\r\nAfter checking these If you still encounter issues, consider creating a specific Maven profile for Java 17. This way, you can have specific plugin configurations and dependencies that are activated only when building with Java 17.","title":"How can i build my web app using java 17 and maven correctly","body":"<p>It appears that the error is arising from an incompatibility with Java 17 and the Maven resources plugin you're using.</p>\n<p>Java 17 introduced strong encapsulation of the JDK's internal APIs using JEP 396. Some libraries and plugins, which relied on these internal APIs in the past, might fail under Java 17 if they haven't been updated.</p>\n<p>Here are some steps to address the issue:</p>\n<ol>\n<li>Update Maven: Ensure that you're using the latest version of Maven that supports Java 17. Ideally, Maven 3.8.4 or later.</li>\n<li>Update Maven Resource Plugin: The version 3.3.1 of the maven-resources-plugin that you're using might not be fully compatible with Java 17. Update it to a more recent version that has support for Java 17.\nReplace it with : 3.3.0</li>\n</ol>\n<p>After checking these If you still encounter issues, consider creating a specific Maven profile for Java 17. This way, you can have specific plugin configurations and dependencies that are activated only when building with Java 17.</p>\n"}],"owner":{"account_id":29663871,"reputation":11,"user_id":22734871,"display_name":"foreverchild"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":215,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1697611387,"creation_date":1697198113,"question_id":77287515,"body_markdown":"Am new to java 17 and i tried building my project with java 17 and am getting the below errors how can i fix it. \r\n\r\n```\r\n[WARNING] Error injecting: org.apache.maven.plugins.resources.ResourcesMojo\r\ncom.google.inject.ProvisionException: Unable to provision, see the following errors:\r\n\r\n1) [Guice/NullInjectedIntoNonNullable]: null returned by binding at LocatorWiring\r\n but the 1st parameter of DefaultMavenResourcesFiltering.&lt;init&gt;(DefaultMavenResourcesFiltering.java:66) is not @Nullable\r\n  at LocatorWiring\r\n  at DefaultMavenResourcesFiltering.&lt;init&gt;(DefaultMavenResourcesFiltering.java:66)\r\n      \\_ for 1st parameter\r\n  at ClassRealm[plugin&gt;org.apache.maven.plugins:maven-resources-plugin:3.3.1, parent: ClassLoaders$AppClassLoader@2a139a55]\r\n      \\_ installed by: WireModule -&gt; PlexusBindingModule\r\n  while locating DefaultMavenResourcesFiltering\r\n  while locating Object annotated with *\r\n  while locating ResourcesMojo\r\n\r\nLearn more:\r\n  https://github.com/google/guice/wiki/NULL_INJECTED_INTO_NON_NULLABLE\r\n\r\n1 error\r\n\r\n======================\r\nFull classname legend:\r\n======================\r\nClassLoaders$AppClassLoader:    &quot;jdk.internal.loader.ClassLoaders$AppClassLoader&quot;\r\nDefaultMavenResourcesFiltering: &quot;org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering&quot;\r\nLocatorWiring:                  &quot;org.eclipse.sisu.wire.LocatorWiring&quot;\r\nPlexusBindingModule:            &quot;org.eclipse.sisu.plexus.PlexusBindingModule&quot;\r\nResourcesMojo:                  &quot;org.apache.maven.plugins.resources.ResourcesMojo&quot;\r\nWireModule:                     &quot;org.eclipse.sisu.wire.WireModule&quot;\r\n========================\r\nEnd of classname legend:\r\n========================\r\n```\r\nalso here is what my pom looks like\r\n```xml\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-openfeign --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-dependencies --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2022.0.4&lt;/version&gt;\r\n\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n&lt;!--\t\t\t&lt;scope&gt;import&lt;/scope&gt;--&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/io.github.openfeign/feign-httpclient --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.openfeign&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;feign-httpclient&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;12.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;8.0.0.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.inject&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;guice&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;7.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.konghq&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;unirest-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.10.00&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.jacoco/jacoco-maven-plugin --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.8.10&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.3.1&lt;/version&gt; &lt;!-- Make sure this version is compatible --&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;!-- Other plugins --&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n```\r\n\r\n\r\n\r\ni have tried to change from different maven versions still didnt work.","title":"How can i build my web app using java 17 and maven correctly","body":"<p>Am new to java 17 and i tried building my project with java 17 and am getting the below errors how can i fix it.</p>\n<pre><code>[WARNING] Error injecting: org.apache.maven.plugins.resources.ResourcesMojo\ncom.google.inject.ProvisionException: Unable to provision, see the following errors:\n\n1) [Guice/NullInjectedIntoNonNullable]: null returned by binding at LocatorWiring\n but the 1st parameter of DefaultMavenResourcesFiltering.&lt;init&gt;(DefaultMavenResourcesFiltering.java:66) is not @Nullable\n  at LocatorWiring\n  at DefaultMavenResourcesFiltering.&lt;init&gt;(DefaultMavenResourcesFiltering.java:66)\n      \\_ for 1st parameter\n  at ClassRealm[plugin&gt;org.apache.maven.plugins:maven-resources-plugin:3.3.1, parent: ClassLoaders$AppClassLoader@2a139a55]\n      \\_ installed by: WireModule -&gt; PlexusBindingModule\n  while locating DefaultMavenResourcesFiltering\n  while locating Object annotated with *\n  while locating ResourcesMojo\n\nLearn more:\n  https://github.com/google/guice/wiki/NULL_INJECTED_INTO_NON_NULLABLE\n\n1 error\n\n======================\nFull classname legend:\n======================\nClassLoaders$AppClassLoader:    &quot;jdk.internal.loader.ClassLoaders$AppClassLoader&quot;\nDefaultMavenResourcesFiltering: &quot;org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering&quot;\nLocatorWiring:                  &quot;org.eclipse.sisu.wire.LocatorWiring&quot;\nPlexusBindingModule:            &quot;org.eclipse.sisu.plexus.PlexusBindingModule&quot;\nResourcesMojo:                  &quot;org.apache.maven.plugins.resources.ResourcesMojo&quot;\nWireModule:                     &quot;org.eclipse.sisu.wire.WireModule&quot;\n========================\nEnd of classname legend:\n========================\n</code></pre>\n<p>also here is what my pom looks like</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-openfeign --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\n            &lt;version&gt;4.0.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-dependencies --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;2022.0.4&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n&lt;!--            &lt;scope&gt;import&lt;/scope&gt;--&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/io.github.openfeign/feign-httpclient --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.openfeign&lt;/groupId&gt;\n            &lt;artifactId&gt;feign-httpclient&lt;/artifactId&gt;\n            &lt;version&gt;12.5&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;8.0.0.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.inject&lt;/groupId&gt;\n            &lt;artifactId&gt;guice&lt;/artifactId&gt;\n            &lt;version&gt;7.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.konghq&lt;/groupId&gt;\n            &lt;artifactId&gt;unirest-java&lt;/artifactId&gt;\n            &lt;version&gt;3.10.00&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.jacoco/jacoco-maven-plugin --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n            &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.8.10&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.1&lt;/version&gt; &lt;!-- Make sure this version is compatible --&gt;\n            &lt;/plugin&gt;\n            &lt;!-- Other plugins --&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>i have tried to change from different maven versions still didnt work.</p>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":1,"creation_date":1593438294,"post_id":62639393,"comment_id":110773538,"body_markdown":"Have you configured the Maven home directory under `Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Maven`?","body":"Have you configured the Maven home directory under <code>Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Maven</code>?"},{"owner":{"account_id":16214104,"reputation":481,"user_id":11707306,"display_name":"Maria1995"},"score":0,"creation_date":1593438351,"post_id":62639393,"comment_id":110773566,"body_markdown":"yes, I have put this as home:C:/Users/mmmm/Downloads/apache-maven-3.3.3-bin/apache-maven-3.3.3","body":"yes, I have put this as home:C:/Users/mmmm/Downloads/apache-maven-3.3.3-bin/apache-m&zwnj;&#8203;aven-3.3.3"},{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":0,"creation_date":1593448238,"post_id":62639393,"comment_id":110778991,"body_markdown":"Have you restarting the IDE after you had installed the Maven? Also if you are using Toolbox app try restarting it, then starting the IDE.","body":"Have you restarting the IDE after you had installed the Maven? Also if you are using Toolbox app try restarting it, then starting the IDE."},{"owner":{"account_id":17492398,"reputation":929,"user_id":12684279,"display_name":"Ruokki"},"score":0,"creation_date":1593461179,"post_id":62639393,"comment_id":110784788,"body_markdown":"Can you show us your path ?","body":"Can you show us your path ?"}],"answers":[{"tags":[],"owner":{"account_id":6283683,"reputation":3277,"user_id":4883754,"display_name":"Jess Chen"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1601293229,"creation_date":1601293229,"answer_id":64101496,"question_id":62639393,"body_markdown":"I have also installed JDK 1.8 and Maven3 as below:\r\n```\r\n&gt;java -version\r\njava version &quot;1.8.0_121&quot;\r\nJava(TM) SE Runtime Environment (build 1.8.0_121-b13)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.121-b13, mixed mode)\r\n\r\n&gt;javac -version\r\njavac 1.8.0_121\r\n\r\n&gt;mvn -version\r\nApache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\r\nMaven home: C:\\SDK\\maven\\apache-maven-3.6.3\\bin\\..\r\nJava version: 1.8.0_121, vendor: Oracle Corporation, runtime: C:\\java\\jdk1.8\\jre\r\nDefault locale: en_US, platform encoding: MS932\r\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\r\n```\r\nI found the problem is **the environment variables of terminal**:\r\n[![enter image description here][1]][1]\r\n\r\nCopy your **bin path of JDK and Maven** into it!! And then restart your Terminal.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sWjVs.png\r\n  [2]: https://i.stack.imgur.com/0Q83R.png","title":"Intellij &#39;mvn&#39; is not recognized as an internal or external command","body":"<p>I have also installed JDK 1.8 and Maven3 as below:</p>\n<pre><code>&gt;java -version\njava version &quot;1.8.0_121&quot;\nJava(TM) SE Runtime Environment (build 1.8.0_121-b13)\nJava HotSpot(TM) 64-Bit Server VM (build 25.121-b13, mixed mode)\n\n&gt;javac -version\njavac 1.8.0_121\n\n&gt;mvn -version\nApache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\nMaven home: C:\\SDK\\maven\\apache-maven-3.6.3\\bin\\..\nJava version: 1.8.0_121, vendor: Oracle Corporation, runtime: C:\\java\\jdk1.8\\jre\nDefault locale: en_US, platform encoding: MS932\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\n</code></pre>\n<p>I found the problem is <strong>the environment variables of terminal</strong>:\n<a href=\"https://i.stack.imgur.com/sWjVs.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/sWjVs.png\" alt=\"enter image description here\" /></a></p>\n<p>Copy your <strong>bin path of JDK and Maven</strong> into it!! And then restart your Terminal.</p>\n<p><a href=\"https://i.stack.imgur.com/0Q83R.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/0Q83R.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":4996819,"reputation":309,"user_id":4017098,"display_name":"sankar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666152404,"creation_date":1666114400,"answer_id":74115150,"question_id":62639393,"body_markdown":"I had a similar issue that was fixed after I pointed M2_HOME to Intellij&#39;s maven plugin path instead of pointing to a path associated with a separate maven installation. \r\n\r\n    &quot;C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2020.2.3\\plugins\\maven\\lib\\maven3&quot;\r\n\r\nI also added %M2_HOME%\\bin to PATH.","title":"Intellij &#39;mvn&#39; is not recognized as an internal or external command","body":"<p>I had a similar issue that was fixed after I pointed M2_HOME to Intellij's maven plugin path instead of pointing to a path associated with a separate maven installation.</p>\n<pre><code>&quot;C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2020.2.3\\plugins\\maven\\lib\\maven3&quot;\n</code></pre>\n<p>I also added %M2_HOME%\\bin to PATH.</p>\n"},{"tags":[],"owner":{"account_id":24789281,"reputation":31,"user_id":18672350,"display_name":"user18672350"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691412613,"creation_date":1691412613,"answer_id":76851914,"question_id":62639393,"body_markdown":"Had a similar issue, solved by just restarting intelliJ","title":"Intellij &#39;mvn&#39; is not recognized as an internal or external command","body":"<p>Had a similar issue, solved by just restarting intelliJ</p>\n"},{"tags":[],"owner":{"account_id":15031711,"reputation":1,"user_id":10849634,"display_name":"王林涛"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697611151,"creation_date":1697611151,"answer_id":77313985,"question_id":62639393,"body_markdown":"restart your computer and then idea will update the system enviroment variables；\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UuGFC.png","title":"Intellij &#39;mvn&#39; is not recognized as an internal or external command","body":"<p>restart your computer and then idea will update the system enviroment variables；\n<a href=\"https://i.stack.imgur.com/UuGFC.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}],"owner":{"account_id":16214104,"reputation":481,"user_id":11707306,"display_name":"Maria1995"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49266,"favorite_count":0,"down_vote_count":1,"up_vote_count":14,"accepted_answer_id":64101496,"answer_count":4,"score":13,"last_activity_date":1697611151,"creation_date":1593437829,"question_id":62639393,"body_markdown":"I have installed maven on my pc and if I type &quot;mvn --version&quot; in the cmd, I get:\r\n\r\n``` \r\nApache Maven 3.3.3 (7994120775791599e205a5524ec3e0dfe41d4a06; 2015-04-22T14:57:37+03:00)\r\nMaven home: C:\\Users\\mmmm\\Downloads\\apache-maven-3.3.3-bin\\apache-maven-3.3.3\r\nJava version: 1.8.0_251, vendor: Oracle Corporation\r\nJava home: C:\\Program Files\\Java\\jdk1.8.0_251\\jre\r\nDefault locale: en_US, platform encoding: Cp1252\r\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;dos&quot;\r\n```\r\n\r\nThe problem is that from Intellij, if I try to do a mvn clean install from the terminal, I get &quot;&#39;mvn&#39; is not recognized as an internal or external command,\r\noperable program or batch file.&quot;\r\n\r\nMy system variables contain these:\r\n``` \r\nM2_HOME = C:\\Users\\mmmm\\Downloads\\apache-maven-3.3.3-bin\\apache-maven-3.3.3\r\nM2 = %M2_HOME%\\bin\r\nPath = %M2_HOME%\\bin\r\n```\r\n\r\nHow can I fix this?","title":"Intellij &#39;mvn&#39; is not recognized as an internal or external command","body":"<p>I have installed maven on my pc and if I type &quot;mvn --version&quot; in the cmd, I get:</p>\n<pre><code>Apache Maven 3.3.3 (7994120775791599e205a5524ec3e0dfe41d4a06; 2015-04-22T14:57:37+03:00)\nMaven home: C:\\Users\\mmmm\\Downloads\\apache-maven-3.3.3-bin\\apache-maven-3.3.3\nJava version: 1.8.0_251, vendor: Oracle Corporation\nJava home: C:\\Program Files\\Java\\jdk1.8.0_251\\jre\nDefault locale: en_US, platform encoding: Cp1252\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;dos&quot;\n</code></pre>\n<p>The problem is that from Intellij, if I try to do a mvn clean install from the terminal, I get &quot;'mvn' is not recognized as an internal or external command,\noperable program or batch file.&quot;</p>\n<p>My system variables contain these:</p>\n<pre><code>M2_HOME = C:\\Users\\mmmm\\Downloads\\apache-maven-3.3.3-bin\\apache-maven-3.3.3\nM2 = %M2_HOME%\\bin\nPath = %M2_HOME%\\bin\n</code></pre>\n<p>How can I fix this?</p>\n"},{"tags":["java","mqtt","broker"],"answers":[{"comments":[{"owner":{"account_id":21472532,"reputation":91,"user_id":15821295,"display_name":"Taliebram"},"score":0,"creation_date":1700750546,"post_id":52640308,"comment_id":136694826,"body_markdown":"FYI, unrelated to your answer, you have setCleanSession(true) and setCleanSession(false).","body":"FYI, unrelated to your answer, you have setCleanSession(true) and setCleanSession(false)."}],"tags":[],"owner":{"account_id":7460660,"reputation":2741,"user_id":5672261,"accept_rate":72,"display_name":"Nitin"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1538634257,"creation_date":1538634257,"answer_id":52640308,"question_id":51183171,"body_markdown":"No need for extra code for automatic reconnect if you use [this mqtt client][1]\r\n\r\nYou can specify reconnect and clean session option in `MqttConnectOptions` while creating `MqttClient`.\r\n\r\nSample code:\r\n\r\n    public void initClinet(){\r\n    \tMqttClient client=new MqttClient(&quot;server address&quot;, MqttClient.generateClientId());\r\n    \tclient.setCallback(new MyListener());\r\n    \tMqttConnectOptions options = new MqttConnectOptions();\r\n    \toptions.setAutomaticReconnect(true);\r\n    \toptions.setCleanSession(true);\r\n    \toptions.setUserName(&quot;username&quot;);\r\n    \toptions.setPassword(&quot;password&quot;.toCharArray());\r\n    \toptions.setKeepAliveInterval(10);\r\n    \toptions.setCleanSession(false);\r\n    \tclient.connect(options);\r\n    \tclient.subscribe(&quot;channelname&quot;);\t\r\n    }\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.eclipse.paho/org.eclipse.paho.client.mqttv3\r\n","title":"MQTT client connectionLost do not work after reconnect to broker","body":"<p>No need for extra code for automatic reconnect if you use <a href=\"https://mvnrepository.com/artifact/org.eclipse.paho/org.eclipse.paho.client.mqttv3\" rel=\"nofollow noreferrer\">this mqtt client</a></p>\n\n<p>You can specify reconnect and clean session option in <code>MqttConnectOptions</code> while creating <code>MqttClient</code>.</p>\n\n<p>Sample code:</p>\n\n<pre><code>public void initClinet(){\n    MqttClient client=new MqttClient(\"server address\", MqttClient.generateClientId());\n    client.setCallback(new MyListener());\n    MqttConnectOptions options = new MqttConnectOptions();\n    options.setAutomaticReconnect(true);\n    options.setCleanSession(true);\n    options.setUserName(\"username\");\n    options.setPassword(\"password\".toCharArray());\n    options.setKeepAliveInterval(10);\n    options.setCleanSession(false);\n    client.connect(options);\n    client.subscribe(\"channelname\");    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2510419,"reputation":33,"user_id":2183044,"display_name":"user2183044"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1590328475,"creation_date":1590075619,"answer_id":61938256,"question_id":51183171,"body_markdown":"What worked for me was using `Mqttclient.reconnect()`.","title":"MQTT client connectionLost do not work after reconnect to broker","body":"<p>What worked for me was using <code>Mqttclient.reconnect()</code>.</p>\n"}],"owner":{"account_id":13183107,"reputation":157,"user_id":9521928,"display_name":"mintquan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7519,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":52640308,"answer_count":2,"score":1,"last_activity_date":1697610950,"creation_date":1530762864,"question_id":51183171,"body_markdown":"I&#39;m newbie in MQTT. I try to reconnect to broker when the client lost connection. This is my function:\r\n\r\n    @Override\r\n\tpublic void connectionLost(Throwable cause) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\treconnectStatus = 0;\r\n\t\t\r\n\t\texecutor.scheduleAtFixedRate(reconnectRunnable, 0, 5, TimeUnit.SECONDS); // reconnect every 5s\r\n\r\n\t\tSystem.out.println(cause);\r\n\t}\r\n\r\nAnd this is function to reconnect:\r\n\r\n    // reconnect to the broker\r\n\tRunnable reconnectRunnable = new Runnable() {\r\n\t    public void run() {\r\n\t       if(reconnectStatus == 1) {\r\n\t    \t   System.out.println(&quot;Stop runnable!&quot;);\r\n\t    \t   executor.shutdown();\r\n\t    \t   return;\r\n\t       } else {\r\n\t    \t   init();\r\n\t       }\r\n\t    }\r\n\t};\r\n\r\nIt&#39;s working fine at the firs time when broker restart. However, this `connectionLost()` trigger does not work at the second time I restart the broker.\r\nHow can I fix it? &lt;br&gt;\r\nThank you very much.","title":"MQTT client connectionLost do not work after reconnect to broker","body":"<p>I'm newbie in MQTT. I try to reconnect to broker when the client lost connection. This is my function:</p>\n\n<pre><code>@Override\npublic void connectionLost(Throwable cause) {\n    // TODO Auto-generated method stub\n    reconnectStatus = 0;\n\n    executor.scheduleAtFixedRate(reconnectRunnable, 0, 5, TimeUnit.SECONDS); // reconnect every 5s\n\n    System.out.println(cause);\n}\n</code></pre>\n\n<p>And this is function to reconnect:</p>\n\n<pre><code>// reconnect to the broker\nRunnable reconnectRunnable = new Runnable() {\n    public void run() {\n       if(reconnectStatus == 1) {\n           System.out.println(\"Stop runnable!\");\n           executor.shutdown();\n           return;\n       } else {\n           init();\n       }\n    }\n};\n</code></pre>\n\n<p>It's working fine at the firs time when broker restart. However, this <code>connectionLost()</code> trigger does not work at the second time I restart the broker.\nHow can I fix it? <br>\nThank you very much.</p>\n"},{"tags":["java","networking","sockets","hostname","ports"],"comments":[{"owner":{"account_id":62950,"reputation":3354,"user_id":186663,"display_name":"PSpeed"},"score":0,"creation_date":1267226891,"post_id":2345063,"comment_id":2317818,"body_markdown":"Do you want just IP addresses?  Or do you want hosts to work too?","body":"Do you want just IP addresses?  Or do you want hosts to work too?"},{"owner":{"account_id":62626,"reputation":10896,"user_id":185919,"accept_rate":89,"display_name":"java.is.for.desktop"},"score":0,"creation_date":1267228620,"post_id":2345063,"comment_id":2317943,"body_markdown":"Hosts **and** IP addresses, but without any lookups. Things that make sense not only in an &quot;online context&quot;. `1.1.1.1:123` is a valid internet socket address, so is `my.host.com:80`, so is `[::1]:456`.","body":"Hosts <b>and</b> IP addresses, but without any lookups. Things that make sense not only in an &quot;online context&quot;. <code>1.1.1.1:123</code> is a valid internet socket address, so is <code>my.host.com:80</code>, so is <code>[::1]:456</code>."},{"owner":{"account_id":71101,"reputation":4373,"user_id":205642,"accept_rate":75,"display_name":"AFK"},"score":0,"creation_date":1267228831,"post_id":2345063,"comment_id":2317964,"body_markdown":"hosts resolve to IP addresses.","body":"hosts resolve to IP addresses."},{"owner":{"account_id":62626,"reputation":10896,"user_id":185919,"accept_rate":89,"display_name":"java.is.for.desktop"},"score":0,"creation_date":1267275291,"post_id":2345063,"comment_id":2319972,"body_markdown":"Hosts resolve to IP addresses only if you let them ;)","body":"Hosts resolve to IP addresses only if you let them ;)"}],"answers":[{"comments":[{"owner":{"account_id":62626,"reputation":10896,"user_id":185919,"accept_rate":89,"display_name":"java.is.for.desktop"},"score":5,"creation_date":1267221506,"post_id":2345094,"comment_id":2317372,"body_markdown":"this would fail for IPv6, because it is something like `[2001:db8:85a3::8a2e:370:7334]:80`","body":"this would fail for IPv6, because it is something like <code>[2001:db8:85a3::8a2e:370:7334]:80</code>"},{"owner":{"account_id":62626,"reputation":10896,"user_id":185919,"accept_rate":89,"display_name":"java.is.for.desktop"},"score":0,"creation_date":1267221572,"post_id":2345094,"comment_id":2317376,"body_markdown":"Perhaps my question is wrong. Is an IP address also a host? I don&#39;t know.","body":"Perhaps my question is wrong. Is an IP address also a host? I don&#39;t know."},{"owner":{"account_id":71101,"reputation":4373,"user_id":205642,"accept_rate":75,"display_name":"AFK"},"score":0,"creation_date":1267223171,"post_id":2345094,"comment_id":2317529,"body_markdown":"you&#39;re right this would fail for IPv6. Also the host&#39;s address is an IP Address. I guess you would just have to put in an if statement before this one and create an InetSocket based on whether or not the IP address is v6 or v4","body":"you&#39;re right this would fail for IPv6. Also the host&#39;s address is an IP Address. I guess you would just have to put in an if statement before this one and create an InetSocket based on whether or not the IP address is v6 or v4"},{"owner":{"account_id":62950,"reputation":3354,"user_id":186663,"display_name":"PSpeed"},"score":2,"creation_date":1267226624,"post_id":2345094,"comment_id":2317794,"body_markdown":"...or use lastIndexOf() instead of indexOf()...  Though I don&#39;t know what InetSocketAddress is expecting for IPv6.","body":"...or use lastIndexOf() instead of indexOf()...  Though I don&#39;t know what InetSocketAddress is expecting for IPv6."},{"owner":{"account_id":62950,"reputation":3354,"user_id":186663,"display_name":"PSpeed"},"score":0,"creation_date":1267226784,"post_id":2345094,"comment_id":2317810,"body_markdown":"Also note: the post strong should be lastIndexOf(&#39;:&#39;) + 1 and no second parameter is required.","body":"Also note: the post strong should be lastIndexOf(&#39;:&#39;) + 1 and no second parameter is required."},{"owner":{"account_id":1278157,"reputation":7595,"user_id":1232937,"accept_rate":40,"display_name":"Robin Davies"},"score":0,"creation_date":1532291758,"post_id":2345094,"comment_id":89906592,"body_markdown":"And it fails on an IPv6 address if a port number hasn&#39;t been supplied.e.g.  &quot;[2001:db8:85a3::8a2e:370:7334]&quot;, So not a good idea if you&#39;re going to unleash this code on user-supplied input. Which, when you think it about it is pretty much guaranteed to be the case if the port number isn&#39;t hard-coded.","body":"And it fails on an IPv6 address if a port number hasn&#39;t been supplied.e.g.  &quot;[2001:db8:85a3::8a2e:370:7334]&quot;, So not a good idea if you&#39;re going to unleash this code on user-supplied input. Which, when you think it about it is pretty much guaranteed to be the case if the port number isn&#39;t hard-coded."}],"tags":[],"owner":{"account_id":71101,"reputation":4373,"user_id":205642,"accept_rate":75,"display_name":"AFK"},"comment_count":6,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1410874368,"creation_date":1267221237,"answer_id":2345094,"question_id":2345063,"body_markdown":"    new InetSocketAddress(\r\n      addressString.substring(0, addressString.lastIndexOf(&quot;:&quot;)),\r\n      Integer.parseInt(addressString.substring(addressString.lastIndexOf(&quot;:&quot;)+1, addressString.length));\r\n\r\n\r\n? I probably made some little silly mistake. and I&#39;m assuming you just wanted a new InetSocketAddress object out of the String in only that format. host:port","title":"Java: Common way to validate and convert &quot;host:port&quot; to InetSocketAddress?","body":"<pre><code>new InetSocketAddress(\n  addressString.substring(0, addressString.lastIndexOf(\":\")),\n  Integer.parseInt(addressString.substring(addressString.lastIndexOf(\":\")+1, addressString.length));\n</code></pre>\n\n<p>? I probably made some little silly mistake. and I'm assuming you just wanted a new InetSocketAddress object out of the String in only that format. host:port</p>\n"},{"comments":[{"owner":{"account_id":62950,"reputation":3354,"user_id":186663,"display_name":"PSpeed"},"score":0,"creation_date":1267264312,"post_id":2345721,"comment_id":2319398,"body_markdown":"Note, the &#39;^&#39; and &#39;$&#39; are unnecessary in this case as matches() must match the entire string anyway.","body":"Note, the &#39;^&#39; and &#39;$&#39; are unnecessary in this case as matches() must match the entire string anyway."},{"owner":{"account_id":631723,"reputation":2270,"user_id":1046421,"accept_rate":55,"display_name":"Urhixidur"},"score":0,"creation_date":1497378084,"post_id":2345721,"comment_id":76049448,"body_markdown":"That pattern is way too permissive, even once the leading and trailing white space is dumped. The port part, for instance, must be in the range 0 through 65535 inclusive, and zero can lead only in the 0 case. The pattern for just the port part is this abomination: `&quot;((0)|([1-9]\\\\d{0,2})|([1-5]\\\\d{3})|([6-9]\\\\d{3})|([1-5]\\\\d{4})|(6[0-4]\\\\d{3})|(65[0-4]\\\\d{2})|(655[0-2]\\\\d)|(6553[0-5]))&quot;`","body":"That pattern is way too permissive, even once the leading and trailing white space is dumped. The port part, for instance, must be in the range 0 through 65535 inclusive, and zero can lead only in the 0 case. The pattern for just the port part is this abomination: <code>&quot;((0)|([1-9]\\\\d{0,2})|([1-5]\\\\d{3})|([6-9]\\\\d{3})|([1-5]\\\\d{&zwnj;&#8203;4})|(6[0-4]\\\\d{3})|(&zwnj;&#8203;65[0-4]\\\\d{2})|(655[&zwnj;&#8203;0-2]\\\\d)|(6553[0-5])&zwnj;&#8203;)&quot;</code>"}],"tags":[],"owner":{"account_id":9867,"reputation":618201,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"comment_count":2,"down_vote_count":3,"up_vote_count":10,"is_accepted":false,"score":7,"last_activity_date":1267230831,"creation_date":1267230831,"answer_id":2345721,"question_id":2345063,"body_markdown":"A regex will do this quite neatly:\r\n\r\n    Pattern p = Pattern.compile(&quot;^\\\\s*(.*?):(\\\\d+)\\\\s*$&quot;);\r\n    Matcher m = p.matcher(&quot;127.0.0.1:8080&quot;);\r\n    if (m.matches()) {\r\n      String host = m.group(1);\r\n      int port = Integer.parseInt(m.group(2));\r\n    }\r\n\r\nYou can this in many ways such as making the port optional or doing some validation on the host.","title":"Java: Common way to validate and convert &quot;host:port&quot; to InetSocketAddress?","body":"<p>A regex will do this quite neatly:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"^\\\\s*(.*?):(\\\\d+)\\\\s*$\");\nMatcher m = p.matcher(\"127.0.0.1:8080\");\nif (m.matches()) {\n  String host = m.group(1);\n  int port = Integer.parseInt(m.group(2));\n}\n</code></pre>\n\n<p>You can this in many ways such as making the port optional or doing some validation on the host.</p>\n"},{"tags":[],"owner":{"account_id":62950,"reputation":3354,"user_id":186663,"display_name":"PSpeed"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1362894286,"creation_date":1267265435,"answer_id":2346949,"question_id":2345063,"body_markdown":"Another person has given a regex answer which is what I was doing to do when originally asking the question about hosts.  I will still do because it&#39;s an example of a regex that is slightly more advanced and can help determine what kind of address you are dealing with.\r\n\r\n    String ipPattern = &quot;(\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}):(\\\\d+)&quot;;\r\n    String ipV6Pattern = &quot;\\\\[([a-zA-Z0-9:]+)\\\\]:(\\\\d+)&quot;;\r\n    String hostPattern = &quot;([\\\\w\\\\.\\\\-]+):(\\\\d+)&quot;;  // note will allow _ in host name\r\n    Pattern p = Pattern.compile( ipPattern + &quot;|&quot; + ipV6Pattern + &quot;|&quot; + hostPattern );\r\n    Matcher m = p.matcher( someString );\r\n    if( m.matches() ) {\r\n        if( m.group(1) != null ) {\r\n            // group(1) IP address, group(2) is port\r\n        } else if( m.group(3) != null ) {\r\n            // group(3) is IPv6 address, group(4) is port            \r\n        } else if( m.group(5) != null ) {\r\n            // group(5) is hostname, group(6) is port\r\n        } else {\r\n            // Not a valid address        \r\n        }\r\n    }\r\n\r\nModifying so that port is optional is pretty straight forward.  Wrap the &quot;:(\\d+)&quot; as &quot;(?::(\\d+))?&quot; and then check for null for group(2), etc.\r\n\r\nEdit: I&#39;ll note that there&#39;s no &quot;common way&quot; way that I&#39;m aware of but the above is how I&#39;d do it if I had to.\r\n\r\nAlso note: the IPv4 case can be removed if the host and IPv4 cases will actually be handled the same.  I split them out because sometimes you can avoid an ultimate host look-up if you know you have the IP address.","title":"Java: Common way to validate and convert &quot;host:port&quot; to InetSocketAddress?","body":"<p>Another person has given a regex answer which is what I was doing to do when originally asking the question about hosts.  I will still do because it's an example of a regex that is slightly more advanced and can help determine what kind of address you are dealing with.</p>\n\n<pre><code>String ipPattern = \"(\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}):(\\\\d+)\";\nString ipV6Pattern = \"\\\\[([a-zA-Z0-9:]+)\\\\]:(\\\\d+)\";\nString hostPattern = \"([\\\\w\\\\.\\\\-]+):(\\\\d+)\";  // note will allow _ in host name\nPattern p = Pattern.compile( ipPattern + \"|\" + ipV6Pattern + \"|\" + hostPattern );\nMatcher m = p.matcher( someString );\nif( m.matches() ) {\n    if( m.group(1) != null ) {\n        // group(1) IP address, group(2) is port\n    } else if( m.group(3) != null ) {\n        // group(3) is IPv6 address, group(4) is port            \n    } else if( m.group(5) != null ) {\n        // group(5) is hostname, group(6) is port\n    } else {\n        // Not a valid address        \n    }\n}\n</code></pre>\n\n<p>Modifying so that port is optional is pretty straight forward.  Wrap the \":(\\d+)\" as \"(?::(\\d+))?\" and then check for null for group(2), etc.</p>\n\n<p>Edit: I'll note that there's no \"common way\" way that I'm aware of but the above is how I'd do it if I had to.</p>\n\n<p>Also note: the IPv4 case can be removed if the host and IPv4 cases will actually be handled the same.  I split them out because sometimes you can avoid an ultimate host look-up if you know you have the IP address.</p>\n"},{"comments":[{"owner":{"account_id":62950,"reputation":3354,"user_id":186663,"display_name":"PSpeed"},"score":3,"creation_date":1267287480,"post_id":2347356,"comment_id":2320702,"body_markdown":"Note that is also works with quite a few others things, e.g.: &quot;my://foo:bar:baz/&quot; or &quot;my://something@foo.bar:8000/&quot; and so on... which may or may not be a problem in your case but doesn&#39;t really satisfy the original question&#39;s desire to avoid things that &quot;lead to unexpected results&quot;. :)","body":"Note that is also works with quite a few others things, e.g.: &quot;my://foo:bar:baz/&quot; or &quot;my://something@foo.bar:8000/&quot; and so on... which may or may not be a problem in your case but doesn&#39;t really satisfy the original question&#39;s desire to avoid things that &quot;lead to unexpected results&quot;. :)"},{"owner":{"account_id":23599,"reputation":3481,"user_id":59241,"accept_rate":76,"display_name":"Dikla"},"score":1,"creation_date":1507016952,"post_id":2347356,"comment_id":80033437,"body_markdown":"This is not working properly for IPv6 address w/o port. \n    `String host = &quot;fc00::142:10&quot;;\n\t\tSystem.out.println(new URI(&quot;my://&quot; + host).getHost());` This code will print null.","body":"This is not working properly for IPv6 address w/o port.      <code>String host = &quot;fc00::142:10&quot;; \t\tSystem.out.println(new URI(&quot;my:&#47;&#47;&quot; + host).getHost());</code> This code will print null."}],"tags":[],"owner":{"account_id":62626,"reputation":10896,"user_id":185919,"accept_rate":89,"display_name":"java.is.for.desktop"},"comment_count":2,"down_vote_count":1,"up_vote_count":59,"is_accepted":true,"score":58,"last_activity_date":1540611706,"creation_date":1267275048,"answer_id":2347356,"question_id":2345063,"body_markdown":"I myself propose one possible workaround solution.\r\n\r\nConvert a string into URI (this would validate it automatically) and then query the URI&#39;s host and port components.\r\n\r\nSadly, an URI with a host component MUST have a scheme. This is why this solution is &quot;not perfect&quot;.\r\n\r\n    String string = ... // some string which has to be validated\r\n\r\n    try {\r\n      // WORKAROUND: add any scheme to make the resulting URI valid.\r\n      URI uri = new URI(&quot;my://&quot; + string); // may throw URISyntaxException\r\n      String host = uri.getHost();\r\n      int port = uri.getPort();\r\n\r\n      if (uri.getHost() == null || uri.getPort() == -1) {\r\n        throw new URISyntaxException(uri.toString(),\r\n          &quot;URI must have host and port parts&quot;);\r\n      }\r\n\r\n      // here, additional checks can be performed, such as\r\n      // presence of path, query, fragment, ...\r\n\r\n\r\n      // validation succeeded\r\n      return new InetSocketAddress (host, port);\r\n\r\n    } catch (URISyntaxException ex) {\r\n      // validation failed\r\n    }\r\n\r\nThis solution **needs no custom string parsing**, works with **IPv4** (`1.1.1.1:123`), **IPv6** (`[::0]:123`) and **host names** (`my.host.com:123`).\r\n\r\n*Accidentally, this solution is well suited for my scenario. I was going to use URI schemes anyway.*","title":"Java: Common way to validate and convert &quot;host:port&quot; to InetSocketAddress?","body":"<p>I myself propose one possible workaround solution.</p>\n\n<p>Convert a string into URI (this would validate it automatically) and then query the URI's host and port components.</p>\n\n<p>Sadly, an URI with a host component MUST have a scheme. This is why this solution is \"not perfect\".</p>\n\n<pre><code>String string = ... // some string which has to be validated\n\ntry {\n  // WORKAROUND: add any scheme to make the resulting URI valid.\n  URI uri = new URI(\"my://\" + string); // may throw URISyntaxException\n  String host = uri.getHost();\n  int port = uri.getPort();\n\n  if (uri.getHost() == null || uri.getPort() == -1) {\n    throw new URISyntaxException(uri.toString(),\n      \"URI must have host and port parts\");\n  }\n\n  // here, additional checks can be performed, such as\n  // presence of path, query, fragment, ...\n\n\n  // validation succeeded\n  return new InetSocketAddress (host, port);\n\n} catch (URISyntaxException ex) {\n  // validation failed\n}\n</code></pre>\n\n<p>This solution <strong>needs no custom string parsing</strong>, works with <strong>IPv4</strong> (<code>1.1.1.1:123</code>), <strong>IPv6</strong> (<code>[::0]:123</code>) and <strong>host names</strong> (<code>my.host.com:123</code>).</p>\n\n<p><em>Accidentally, this solution is well suited for my scenario. I was going to use URI schemes anyway.</em></p>\n"},{"comments":[{"owner":{"account_id":32956,"reputation":8091,"user_id":91813,"accept_rate":90,"display_name":"stanleyxu2005"},"score":1,"creation_date":1420423452,"post_id":13585786,"comment_id":43955918,"body_markdown":"Be careful with Guava&#39;s `HostAndPort`. It will not do a strict validation on hostname. Please check its class doc or source code.","body":"Be careful with Guava&#39;s <code>HostAndPort</code>. It will not do a strict validation on hostname. Please check its class doc or source code."},{"owner":{"account_id":229007,"reputation":457,"user_id":491686,"accept_rate":86,"display_name":"titania424"},"score":0,"creation_date":1475864088,"post_id":13585786,"comment_id":67130659,"body_markdown":"I noticed also that HostAndPort is very useful, but I found myself calling InetAddresses.forString(hostIp) solely to validate the host.  Makes no sense that HostAndPort validates the Port is ok but not the Host!","body":"I noticed also that HostAndPort is very useful, but I found myself calling InetAddresses.forString(hostIp) solely to validate the host.  Makes no sense that HostAndPort validates the Port is ok but not the Host!"}],"tags":[],"owner":{"account_id":38846,"reputation":29755,"user_id":111777,"accept_rate":82,"display_name":"Edward Dale"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1354024515,"creation_date":1354024515,"answer_id":13585786,"question_id":2345063,"body_markdown":"It doesn&#39;t answer the question exactly, but this answer could still be useful others like me who just want to parse a host and port, but not necessarily a full `InetAddress`. Guava has a [HostAndPort](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/net/HostAndPort.html) class with a `parseString` method.","title":"Java: Common way to validate and convert &quot;host:port&quot; to InetSocketAddress?","body":"<p>It doesn't answer the question exactly, but this answer could still be useful others like me who just want to parse a host and port, but not necessarily a full <code>InetAddress</code>. Guava has a <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/net/HostAndPort.html\" rel=\"noreferrer\">HostAndPort</a> class with a <code>parseString</code> method.</p>\n"},{"tags":[],"owner":{"account_id":1278157,"reputation":7595,"user_id":1232937,"accept_rate":40,"display_name":"Robin Davies"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532294388,"creation_date":1532294388,"answer_id":51469346,"question_id":2345063,"body_markdown":"All kind of peculiar hackery, and elegant but unsafe solutions provided elsewhere. Sometimes the inelegant brute-force solution is the way.\r\n\r\n    public static InetSocketAddress parseInetSocketAddress(String addressAndPort) throws IllegalArgumentException {\r\n    \tint portPosition = addressAndPort.length();\r\n    \tint portNumber = 0;\r\n    \twhile (portPosition &gt; 1 &amp;&amp; Character.isDigit(addressAndPort.charAt(portPosition-1)))\r\n    \t{\r\n    \t\t--portPosition;\r\n    \t}\r\n    \tString address;\r\n    \tif (portPosition &gt; 1 &amp;&amp; addressAndPort.charAt(portPosition-1) == &#39;:&#39;)\r\n    \t{\r\n    \t\ttry {\r\n    \t\t\tportNumber = Integer.parseInt(addressAndPort.substring(portPosition));\r\n    \t\t} catch (NumberFormatException ignored)\r\n    \t\t{\r\n    \t\t\tthrow new IllegalArgumentException(&quot;Invalid port number.&quot;);\r\n    \t\t}\r\n    \t\taddress = addressAndPort.substring(0,portPosition-1);\r\n    \t} else {\r\n    \t\tportNumber = 0;\r\n    \t\taddress = addressAndPort;\r\n    \t}\r\n    \treturn new InetSocketAddress(address,portNumber);\r\n    }\r\n\r\n","title":"Java: Common way to validate and convert &quot;host:port&quot; to InetSocketAddress?","body":"<p>All kind of peculiar hackery, and elegant but unsafe solutions provided elsewhere. Sometimes the inelegant brute-force solution is the way.</p>\n\n<pre><code>public static InetSocketAddress parseInetSocketAddress(String addressAndPort) throws IllegalArgumentException {\n    int portPosition = addressAndPort.length();\n    int portNumber = 0;\n    while (portPosition &gt; 1 &amp;&amp; Character.isDigit(addressAndPort.charAt(portPosition-1)))\n    {\n        --portPosition;\n    }\n    String address;\n    if (portPosition &gt; 1 &amp;&amp; addressAndPort.charAt(portPosition-1) == ':')\n    {\n        try {\n            portNumber = Integer.parseInt(addressAndPort.substring(portPosition));\n        } catch (NumberFormatException ignored)\n        {\n            throw new IllegalArgumentException(\"Invalid port number.\");\n        }\n        address = addressAndPort.substring(0,portPosition-1);\n    } else {\n        portNumber = 0;\n        address = addressAndPort;\n    }\n    return new InetSocketAddress(address,portNumber);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9144834,"reputation":4430,"user_id":6801443,"display_name":"Sean F"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549176486,"creation_date":1546754018,"answer_id":54059023,"question_id":2345063,"body_markdown":"The [open-source IPAddress Java library](https://seancfoley.github.io/IPAddress/) has a [HostName](https://seancfoley.github.io/IPAddress/IPAddress/apidocs/inet/ipaddr/HostName.html) class which will do the required parsing.  Disclaimer: I am the project manager of the IPAddress library. \r\n\r\nIt will parse IPv4, IPv6 and string host names with or without ports.  It will handle all the various formats of hosts and addresses.  BTW, there is no single RFC for this, there are a number of RFCs that apply in different ways.\r\n\r\n    String hostName = &quot;[a:b:c:d:e:f:a:b]:8080&quot;;\r\n    String hostName2 = &quot;1.2.3.4:8080&quot;;\r\n    String hostName3 = &quot;a.com:8080&quot;;\r\n    try {\r\n        HostName host = new HostName(hostName);\r\n        host.validate();\r\n        InetSocketAddress address = host.asInetSocketAddress();\r\n        HostName host2 = new HostName(hostName2);\r\n        host2.validate();\r\n        InetSocketAddress address2 = host2.asInetSocketAddress();\r\n        HostName host3 = new HostName(hostName3);\r\n        host3.validate();\r\n        InetSocketAddress address3 = host3.asInetSocketAddress();\r\n        // use socket address      \r\n    } catch (HostNameException e) {\r\n        String msg = e.getMessage();\r\n        // handle improperly formatted host name or address string\r\n    }","title":"Java: Common way to validate and convert &quot;host:port&quot; to InetSocketAddress?","body":"<p>The <a href=\"https://seancfoley.github.io/IPAddress/\" rel=\"nofollow noreferrer\">open-source IPAddress Java library</a> has a <a href=\"https://seancfoley.github.io/IPAddress/IPAddress/apidocs/inet/ipaddr/HostName.html\" rel=\"nofollow noreferrer\">HostName</a> class which will do the required parsing.  Disclaimer: I am the project manager of the IPAddress library. </p>\n\n<p>It will parse IPv4, IPv6 and string host names with or without ports.  It will handle all the various formats of hosts and addresses.  BTW, there is no single RFC for this, there are a number of RFCs that apply in different ways.</p>\n\n<pre><code>String hostName = \"[a:b:c:d:e:f:a:b]:8080\";\nString hostName2 = \"1.2.3.4:8080\";\nString hostName3 = \"a.com:8080\";\ntry {\n    HostName host = new HostName(hostName);\n    host.validate();\n    InetSocketAddress address = host.asInetSocketAddress();\n    HostName host2 = new HostName(hostName2);\n    host2.validate();\n    InetSocketAddress address2 = host2.asInetSocketAddress();\n    HostName host3 = new HostName(hostName3);\n    host3.validate();\n    InetSocketAddress address3 = host3.asInetSocketAddress();\n    // use socket address      \n} catch (HostNameException e) {\n    String msg = e.getMessage();\n    // handle improperly formatted host name or address string\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20583481,"reputation":11,"user_id":15108964,"display_name":"computerquip-work"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611959992,"creation_date":1611959992,"answer_id":65962672,"question_id":2345063,"body_markdown":"URI can accomplish this:\r\n\r\n    URI uri = new URI(null, &quot;example.com:80&quot;, null, null, null);\r\n\r\nUnfortunately, there&#39;s a bug in current OpenJDK (or in the documentation) where the authority isn&#39;t properly validated. The documentation states:\r\n\r\n&gt; The resulting URI string is then parsed as if by invoking the URI(String) constructor and then invoking the parseServerAuthority() method upon the result\r\n\r\nThat call to parseServerAuthority just doesn&#39;t happen unfortunately so the real solution here that properly validates is:\r\n\r\n    URI uri = new URI(null, &quot;example.com:80&quot;, null, null, null).parseServerAuthority();\r\n\r\nthen\r\n\r\n    InetSocketAddress address = new InetSocketAddress(uri.getHost(), uri.getPort());","title":"Java: Common way to validate and convert &quot;host:port&quot; to InetSocketAddress?","body":"<p>URI can accomplish this:</p>\n<pre><code>URI uri = new URI(null, &quot;example.com:80&quot;, null, null, null);\n</code></pre>\n<p>Unfortunately, there's a bug in current OpenJDK (or in the documentation) where the authority isn't properly validated. The documentation states:</p>\n<blockquote>\n<p>The resulting URI string is then parsed as if by invoking the URI(String) constructor and then invoking the parseServerAuthority() method upon the result</p>\n</blockquote>\n<p>That call to parseServerAuthority just doesn't happen unfortunately so the real solution here that properly validates is:</p>\n<pre><code>URI uri = new URI(null, &quot;example.com:80&quot;, null, null, null).parseServerAuthority();\n</code></pre>\n<p>then</p>\n<pre><code>InetSocketAddress address = new InetSocketAddress(uri.getHost(), uri.getPort());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":450787,"reputation":1364,"user_id":846300,"accept_rate":50,"display_name":"Lukas Hanacek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697610695,"creation_date":1697610695,"answer_id":77313944,"question_id":2345063,"body_markdown":"With Guava\r\n\r\n        String[] examples = new String[] {&quot;192.168.0.1:456&quot;, &quot;[2010:836B:4179::836B:4179]:456&quot;, &quot;2010:836B:4179::836B:4179&quot;, &quot;g35v4325234f:446&quot;, &quot;sagasdghdfh&quot;};\r\n\r\n        for (String example : examples) {\r\n            HostAndPort hostAndPort = HostAndPort.fromString(example);\r\n            String host = hostAndPort.getHost();\r\n            Log.debug(host);\r\n\r\n            if (InetAddresses.isInetAddress(host)) {\r\n                InetAddress inetAddress = InetAddresses.forString(host);\r\n                try {\r\n                    Log.debug(&quot;is reachable: &quot; + inetAddress.isReachable(500));\r\n                } catch (IOException e) {\r\n                    Log.error(e);\r\n                }\r\n            }\r\n        }","title":"Java: Common way to validate and convert &quot;host:port&quot; to InetSocketAddress?","body":"<p>With Guava</p>\n<pre><code>    String[] examples = new String[] {&quot;192.168.0.1:456&quot;, &quot;[2010:836B:4179::836B:4179]:456&quot;, &quot;2010:836B:4179::836B:4179&quot;, &quot;g35v4325234f:446&quot;, &quot;sagasdghdfh&quot;};\n\n    for (String example : examples) {\n        HostAndPort hostAndPort = HostAndPort.fromString(example);\n        String host = hostAndPort.getHost();\n        Log.debug(host);\n\n        if (InetAddresses.isInetAddress(host)) {\n            InetAddress inetAddress = InetAddresses.forString(host);\n            try {\n                Log.debug(&quot;is reachable: &quot; + inetAddress.isReachable(500));\n            } catch (IOException e) {\n                Log.error(e);\n            }\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":62626,"reputation":10896,"user_id":185919,"accept_rate":89,"display_name":"java.is.for.desktop"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37269,"favorite_count":0,"down_vote_count":1,"up_vote_count":38,"accepted_answer_id":2347356,"answer_count":9,"score":37,"last_activity_date":1697610695,"creation_date":1267220910,"question_id":2345063,"body_markdown":"What is the common way in Java to validate and convert a string of the form `host:port` into an instance of `InetSocketAddress`?\r\n\r\nIt would be nice if following criteria were met:\r\n\r\n - No address lookups;\r\n\r\n - Working for IPv4, IPv6, and &quot;string&quot; hostnames;  \r\n*(For IPv4 it&#39;s `ip:port`, for IPv6 it&#39;s `[ip]:port`, right? Is there some RFC which defines all these schemes?)*\r\n\r\n - Preferable without parsing the string by hand.  \r\n*(I&#39;m thinking about all those special cases, when someone think he knows all valid forms of socket addresses, but forgets about &quot;that special case&quot; which leads to unexpected results.)*","title":"Java: Common way to validate and convert &quot;host:port&quot; to InetSocketAddress?","body":"<p>What is the common way in Java to validate and convert a string of the form <code>host:port</code> into an instance of <code>InetSocketAddress</code>?</p>\n\n<p>It would be nice if following criteria were met:</p>\n\n<ul>\n<li><p>No address lookups;</p></li>\n<li><p>Working for IPv4, IPv6, and \"string\" hostnames;<br>\n<em>(For IPv4 it's <code>ip:port</code>, for IPv6 it's <code>[ip]:port</code>, right? Is there some RFC which defines all these schemes?)</em></p></li>\n<li><p>Preferable without parsing the string by hand.<br>\n<em>(I'm thinking about all those special cases, when someone think he knows all valid forms of socket addresses, but forgets about \"that special case\" which leads to unexpected results.)</em></p></li>\n</ul>\n"},{"tags":["java","tostring"],"comments":[{"owner":{"account_id":2068268,"reputation":42279,"user_id":1843331,"accept_rate":100,"display_name":"Tim"},"score":0,"creation_date":1495537295,"post_id":44132918,"comment_id":75284301,"body_markdown":"Use it while debugging, remove it before committing?","body":"Use it while debugging, remove it before committing?"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":2,"creation_date":1495537321,"post_id":44132918,"comment_id":75284326,"body_markdown":"i prefer to override that method in every class even if i never use it","body":"i prefer to override that method in every class even if i never use it"},{"owner":{"account_id":3123845,"reputation":4404,"user_id":2643110,"display_name":"forgivenson"},"score":1,"creation_date":1495537385,"post_id":44132918,"comment_id":75284377,"body_markdown":"This is an opinion question, so it will likely be closed, since this site is for questions with a clear answer. Personally, I see no issue with adding toString methods to all classes. In fact, I think it is good practice to do so.","body":"This is an opinion question, so it will likely be closed, since this site is for questions with a clear answer. Personally, I see no issue with adding toString methods to all classes. In fact, I think it is good practice to do so."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1495537407,"post_id":44132918,"comment_id":75284391,"body_markdown":"Use the actual  debugger instead of printing","body":"Use the actual  debugger instead of printing"},{"owner":{"account_id":1801353,"reputation":81710,"user_id":1639625,"display_name":"tobias_k"},"score":1,"creation_date":1495538023,"post_id":44132918,"comment_id":75284808,"body_markdown":"What&#39;s wrong with code that&#39;s only used for debugging? By similar reasoning, unit-tests should be forbidden as they add no &quot;business value&quot;. You value is that the code is easier to debug and thus has fewer bugs.","body":"What&#39;s wrong with code that&#39;s only used for debugging? By similar reasoning, unit-tests should be forbidden as they add no &quot;business value&quot;. You value is that the code is easier to debug and thus has fewer bugs."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1495539598,"post_id":44132918,"comment_id":75286019,"body_markdown":"@tobias_k The point is to have that &quot;debugging only&quot; responsibility **within** your production code. Test cases are NOT part of the product.","body":"@tobias_k The point is to have that &quot;debugging only&quot; responsibility <b>within</b> your production code. Test cases are NOT part of the product."},{"owner":{"account_id":9779820,"reputation":9719,"user_id":7248342,"display_name":"Thomas Fritsch"},"score":0,"creation_date":1495540204,"post_id":44132918,"comment_id":75286459,"body_markdown":"That&#39;s perfect. Many JDK classes have `toString()` implementations clearly targeted at convenience of debugging. For some best-practice examples see the  `toString()` implementations in `java.util.AbstractCollection`, `java.util.AbstractMap`, `java.util.EventObject`, `java.awt.Component`, `java.awt.Color`, `java.awt.IndexColorModel`.","body":"That&#39;s perfect. Many JDK classes have <code>toString()</code> implementations clearly targeted at convenience of debugging. For some best-practice examples see the  <code>toString()</code> implementations in <code>java.util.AbstractCollection</code>, <code>java.util.AbstractMap</code>, <code>java.util.EventObject</code>, <code>java.awt.Component</code>, <code>java.awt.Color</code>, <code>java.awt.IndexColorModel</code>."},{"owner":{"account_id":1497191,"reputation":9670,"user_id":1402846,"accept_rate":90,"display_name":"Pang"},"score":0,"creation_date":1697610723,"post_id":44132918,"comment_id":136299818,"body_markdown":"See also: https://stackoverflow.com/questions/4762406/tostring-for-debugging-or-for-humans","body":"See also: <a href=\"https://stackoverflow.com/questions/4762406/tostring-for-debugging-or-for-humans\" title=\"tostring for debugging or for humans\">stackoverflow.com/questions/4762406/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1495538180,"post_id":44133136,"comment_id":75284914,"body_markdown":"Nice one. And again, thanks for leaving some things out so I could write up my 2 cent as well ;-)","body":"Nice one. And again, thanks for leaving some things out so I could write up my 2 cent as well ;-)"},{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":0,"creation_date":1495538472,"post_id":44133136,"comment_id":75285162,"body_markdown":"@GhostCat I hesitated to discuss also about robustness and performance concerns. Not a so bad thing finally as you have relieved me from it ;-)","body":"@GhostCat I hesitated to discuss also about robustness and performance concerns. Not a so bad thing finally as you have relieved me from it ;-)"},{"owner":{"account_id":390473,"reputation":2212,"user_id":750565,"accept_rate":69,"display_name":"why_vincent"},"score":0,"creation_date":1495539613,"post_id":44133136,"comment_id":75286030,"body_markdown":"I couldn&#39;t have gotten a better reply. Thanks.","body":"I couldn&#39;t have gotten a better reply. Thanks."}],"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1495537769,"creation_date":1495537769,"answer_id":44133136,"question_id":44132918,"body_markdown":"The `toString()` method is mainly designed as a debugging purpose method.\r\n&lt;br&gt;\r\nExcept some exceptional cases, you should favor its use for debug purposes and not to display information to the clients as client needs may happen to be different or be the same as the `toString()` method today but could be different tomorrow.&lt;br&gt;\r\n\r\nFrom the `toString()` javadoc, you can read :\r\n\r\n&gt; Returns a string representation of the object. In general, the\r\n&gt; toString method returns a string that &quot;textually represents&quot; this\r\n&gt; object. The result should be a concise but informative representation\r\n&gt; that is easy for a person to read. It is recommended that all\r\n&gt; subclasses override this method.\r\n\r\nThe parts that matter for your are :\r\n\r\n&gt; The result should be a concise but informative representation\r\n&gt; that is easy for a person to read.\r\n\r\nand \r\n&gt; It is recommended that all\r\n&gt; subclasses override this method.\r\n\r\nYou said that :\r\n&gt; Still, it is a part of my process. What is correct here?\r\n\r\nGood thing : the specification recommends it.\r\n\r\n\r\n\r\n","title":"Is it ok to add toString() to ease debugging?","body":"<p>The <code>toString()</code> method is mainly designed as a debugging purpose method.\n<br>\nExcept some exceptional cases, you should favor its use for debug purposes and not to display information to the clients as client needs may happen to be different or be the same as the <code>toString()</code> method today but could be different tomorrow.<br></p>\n\n<p>From the <code>toString()</code> javadoc, you can read :</p>\n\n<blockquote>\n  <p>Returns a string representation of the object. In general, the\n  toString method returns a string that \"textually represents\" this\n  object. The result should be a concise but informative representation\n  that is easy for a person to read. It is recommended that all\n  subclasses override this method.</p>\n</blockquote>\n\n<p>The parts that matter for your are :</p>\n\n<blockquote>\n  <p>The result should be a concise but informative representation\n  that is easy for a person to read.</p>\n</blockquote>\n\n<p>and </p>\n\n<blockquote>\n  <p>It is recommended that all\n  subclasses override this method.</p>\n</blockquote>\n\n<p>You said that :</p>\n\n<blockquote>\n  <p>Still, it is a part of my process. What is correct here?</p>\n</blockquote>\n\n<p>Good thing : the specification recommends it.</p>\n"},{"tags":[],"owner":{"account_id":8084233,"reputation":400,"user_id":6092270,"display_name":"Ville Oikarinen"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1495537929,"creation_date":1495537929,"answer_id":44133179,"question_id":44132918,"body_markdown":"It is perfectly OK and even a good idea. Most classes don&#39;t specify the content of toString so it&#39;s not wise to use it for logic (the content may change in a future version of the class). But some classes do, for example StringBuilder. And then it is also OK to use the return value for logic.\r\n\r\nSo for your own classes you may even opt to specify the content and use (and let your users use) the return value for logic.","title":"Is it ok to add toString() to ease debugging?","body":"<p>It is perfectly OK and even a good idea. Most classes don't specify the content of toString so it's not wise to use it for logic (the content may change in a future version of the class). But some classes do, for example StringBuilder. And then it is also OK to use the return value for logic.</p>\n\n<p>So for your own classes you may even opt to specify the content and use (and let your users use) the return value for logic.</p>\n"},{"comments":[{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":1,"creation_date":1495538373,"post_id":44133240,"comment_id":75285075,"body_markdown":"Robustness is indeed a very important point. With JPA, it may create a disaster even. Nice adding.","body":"Robustness is indeed a very important point. With JPA, it may create a disaster even. Nice adding."}],"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1495540235,"creation_date":1495538141,"answer_id":44133240,"question_id":44132918,"body_markdown":"Besides the excellent points by davidxxx, the following things apply:\r\n\r\n - *Consistency* matters. People working with your code should *not* be surprised by what is happening within your classes. So either &quot;all/most&quot; classes @override `toString()` using similar implementations - or &quot;none&quot; does that.\r\n - Thus: make sure everybody agrees if/how to implement `toString()`\r\n - Specifically ensure that your `toString()` implementation is **robust**\r\n\r\nMeaning: you absolutely have to avoid that your implementation throws any exception (for example a NPE because you happen to do `someString + fieldX.name()` for some fieldX that might be null). \r\n\r\nYou also have to avoid creating an &quot;expensive&quot; implementation (for example code that does a &quot;deep dive&quot; into some database to return a value from there). \r\n\r\n2 cent of personal opinion: I find `toString()` to be of great value when debugging things; but I also have seen real performance impacts by *toString() too expensive*. Thing is: you have no idea how often some trace code might be calling `toString()` on your objects; so you better make sure it returns *quickly*.","title":"Is it ok to add toString() to ease debugging?","body":"<p>Besides the excellent points by davidxxx, the following things apply:</p>\n\n<ul>\n<li><em>Consistency</em> matters. People working with your code should <em>not</em> be surprised by what is happening within your classes. So either \"all/most\" classes @override <code>toString()</code> using similar implementations - or \"none\" does that.</li>\n<li>Thus: make sure everybody agrees if/how to implement <code>toString()</code></li>\n<li>Specifically ensure that your <code>toString()</code> implementation is <strong>robust</strong></li>\n</ul>\n\n<p>Meaning: you absolutely have to avoid that your implementation throws any exception (for example a NPE because you happen to do <code>someString + fieldX.name()</code> for some fieldX that might be null). </p>\n\n<p>You also have to avoid creating an \"expensive\" implementation (for example code that does a \"deep dive\" into some database to return a value from there). </p>\n\n<p>2 cent of personal opinion: I find <code>toString()</code> to be of great value when debugging things; but I also have seen real performance impacts by <em>toString() too expensive</em>. Thing is: you have no idea how often some trace code might be calling <code>toString()</code> on your objects; so you better make sure it returns <em>quickly</em>.</p>\n"},{"tags":[],"owner":{"account_id":5166424,"reputation":1147,"user_id":4136240,"accept_rate":83,"display_name":"fill͡pant͡"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1495538351,"creation_date":1495538351,"answer_id":44133315,"question_id":44132918,"body_markdown":"The [docs][1] explain the function of this method:\r\n\r\n&gt; Returns a string representation of the object. In general, the toString method returns a string that &quot;textually represents&quot; this object. The result should be a concise but informative representation that is easy for a person to read. It is recommended that all subclasses override this method.\r\n\r\nAs you see, they don&#39;t specify a perticular use for this method or discourage you from using it for debuging, but they only state what it is expected to do and also recomend implementing this method in subclasses of Object.\r\n\r\nTherefore strictly speaking how you use this method is up to you. In the university course i am taking, overwriting the toString method is required for some tasks and in some cases we are asked to use it to demonstrate debuging.\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString()","title":"Is it ok to add toString() to ease debugging?","body":"<p>The <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString()\" rel=\"nofollow noreferrer\">docs</a> explain the function of this method:</p>\n\n<blockquote>\n  <p>Returns a string representation of the object. In general, the toString method returns a string that \"textually represents\" this object. The result should be a concise but informative representation that is easy for a person to read. It is recommended that all subclasses override this method.</p>\n</blockquote>\n\n<p>As you see, they don't specify a perticular use for this method or discourage you from using it for debuging, but they only state what it is expected to do and also recomend implementing this method in subclasses of Object.</p>\n\n<p>Therefore strictly speaking how you use this method is up to you. In the university course i am taking, overwriting the toString method is required for some tasks and in some cases we are asked to use it to demonstrate debuging.</p>\n"}],"owner":{"account_id":390473,"reputation":2212,"user_id":750565,"accept_rate":69,"display_name":"why_vincent"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":816,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":44133136,"answer_count":4,"score":3,"last_activity_date":1697610174,"creation_date":1495537158,"question_id":44132918,"body_markdown":"I work a lot in IntelliJ and it can be quite convenient to have classes having their own toString() (the generated one in IntelliJ works fine) so you can see something more informative than MyClass@1345 when trying to figure out what something is. \r\n\r\nMy question is: Is that ok? I am adding code that has no business value and doesn&#39;t affect my test cases or the execution of my software (I am not using toString() for anything more than debugging). Still, it is a part of my process. What is correct here?","title":"Is it ok to add toString() to ease debugging?","body":"<p>I work a lot in IntelliJ and it can be quite convenient to have classes having their own toString() (the generated one in IntelliJ works fine) so you can see something more informative than MyClass@1345 when trying to figure out what something is.</p>\n<p>My question is: Is that ok? I am adding code that has no business value and doesn't affect my test cases or the execution of my software (I am not using toString() for anything more than debugging). Still, it is a part of my process. What is correct here?</p>\n"},{"tags":["java","spring-boot","cors","microservices","spring-cloud-gateway"],"comments":[{"owner":{"account_id":16673497,"reputation":2011,"user_id":12050506,"display_name":"possum"},"score":1,"creation_date":1656950757,"post_id":72859401,"comment_id":128690036,"body_markdown":"Please consider shortening your question to the minimum of information required to understand the problem and help.","body":"Please consider shortening your question to the minimum of information required to understand the problem and help."}],"answers":[{"comments":[{"owner":{"account_id":5278173,"reputation":51,"user_id":4214370,"display_name":"Allteran"},"score":0,"creation_date":1656952907,"post_id":72859545,"comment_id":128690655,"body_markdown":"Thanks for your answer, but it didn&#39;t help me. I&#39;ve added this bean to ```Application.java``` class, commented before, as you said, annotation, WebConfig and SecurityConfig. Anyway, doesn&#39;t it the same do that ```addCorsMappings``` in WebConfig?","body":"Thanks for your answer, but it didn&#39;t help me. I&#39;ve added this bean to <code>Application.java</code> class, commented before, as you said, annotation, WebConfig and SecurityConfig. Anyway, doesn&#39;t it the same do that <code>addCorsMappings</code> in WebConfig?"},{"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"score":0,"creation_date":1656953115,"post_id":72859545,"comment_id":128690713,"body_markdown":"Yes, it is. In my case I even used `addCorsMappings` but it didn&#39;t worked. Can you check what error you are getting is it same?","body":"Yes, it is. In my case I even used <code>addCorsMappings</code> but it didn&#39;t worked. Can you check what error you are getting is it same?"},{"owner":{"account_id":5278173,"reputation":51,"user_id":4214370,"display_name":"Allteran"},"score":0,"creation_date":1656968731,"post_id":72859545,"comment_id":128694383,"body_markdown":"Yes, it&#39;s still the same error. I&#39;ve tried to do like you said and even tried to mix it with Security config and still facing same problem.","body":"Yes, it&#39;s still the same error. I&#39;ve tried to do like you said and even tried to mix it with Security config and still facing same problem."}],"tags":[],"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1656951953,"creation_date":1656951175,"answer_id":72859545,"question_id":72859401,"body_markdown":"I have faced similar issue &amp; got resolved by defining following bean in my Configuration.\r\n\r\n    @Bean\r\n    \tpublic CorsFilter corsFilter() {\r\n    \t    final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n    \t    final CorsConfiguration config = new CorsConfiguration();\r\n    \t    config.setAllowedOrigins(Collections.singletonList(&quot;http://localhost:8100&quot;)); // Provide list of origins if you want multiple origins\r\n    \t    config.setAllowedHeaders(Arrays.asList(&quot;Origin&quot;, &quot;Content-Type&quot;, &quot;Accept&quot;));\r\n    \t    config.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;OPTIONS&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;));\r\n    \t    config.setAllowCredentials(true);\r\n    \t    source.registerCorsConfiguration(&quot;/**&quot;, config);\r\n    \t    return new CorsFilter(source);\r\n    \t}\r\n\r\n\r\nYou can comment out all other details e.g. `@CrossOrigin(origins = &quot;http://localhost:8100&quot;), WebConfig.java, SecurityConfig.java` as once we define above bean these things are not required. \r\n\r\nYour code may not be running because you have defined bean , security config as well as webconfig which might be conflicting while processing your request.","title":"No &#39;Access-Control-Allow-Origin&#39; header is present (CORS) - Spring Boot (Spring security) Microservices + Vue.js","body":"<p>I have faced similar issue &amp; got resolved by defining following bean in my Configuration.</p>\n<pre><code>@Bean\n    public CorsFilter corsFilter() {\n        final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        final CorsConfiguration config = new CorsConfiguration();\n        config.setAllowedOrigins(Collections.singletonList(&quot;http://localhost:8100&quot;)); // Provide list of origins if you want multiple origins\n        config.setAllowedHeaders(Arrays.asList(&quot;Origin&quot;, &quot;Content-Type&quot;, &quot;Accept&quot;));\n        config.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;OPTIONS&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;));\n        config.setAllowCredentials(true);\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\n        return new CorsFilter(source);\n    }\n</code></pre>\n<p>You can comment out all other details e.g. <code>@CrossOrigin(origins = &quot;http://localhost:8100&quot;), WebConfig.java, SecurityConfig.java</code> as once we define above bean these things are not required.</p>\n<p>Your code may not be running because you have defined bean , security config as well as webconfig which might be conflicting while processing your request.</p>\n"},{"comments":[{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1686222994,"post_id":72896860,"comment_id":134771012,"body_markdown":"For Spring Cloud Gateway 2022.0.3 It&#39;s not working. Any idea for a solution?","body":"For Spring Cloud Gateway 2022.0.3 It&#39;s not working. Any idea for a solution?"}],"tags":[],"owner":{"account_id":5278173,"reputation":51,"user_id":4214370,"display_name":"Allteran"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1657192590,"creation_date":1657192590,"answer_id":72896860,"question_id":72859401,"body_markdown":"After research I&#39;ve solved problem. **It was all Gateway&#39;s fault**  \r\nAs I mentioned before, direct request gives me right response, but only if I go through ```api-gateway``` it gives me an errors.  \r\n## So solution is to add CORS Configuration rules to gateway:  \r\n```\r\nspring:\r\n  cloud:\r\n    gateway:\r\n      default-filters:\r\n        - DedupeResponseHeader=Access-Control-Allow-Origin Access-Control-Allow-Credentials, RETAIN_UNIQUE\r\n      globalcors:\r\n        corsConfigurations:\r\n          &#39;[/**]&#39;:\r\n            allowedOrigins: &quot;http://localhost:8100&quot;\r\n            allowedHeaders: &quot;*&quot;\r\n            allowedMethods: &quot;*&quot;\r\n```\r\nPlease, note that if you don&#39;t add section with ```gateway: default-filters``` you will be facing similar error with header that contains multiple values.\r\n\r\nThanks to [answer by Pablo Aragon&#233;s in another question][1] and [Spring Cloud Documentation][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/70985763\r\n  [2]: https://cloud.spring.io/spring-cloud-gateway/multi/multi__cors_configuration.html","title":"No &#39;Access-Control-Allow-Origin&#39; header is present (CORS) - Spring Boot (Spring security) Microservices + Vue.js","body":"<p>After research I've solved problem. <strong>It was all Gateway's fault</strong><br />\nAs I mentioned before, direct request gives me right response, but only if I go through <code>api-gateway</code> it gives me an errors.</p>\n<h2>So solution is to add CORS Configuration rules to gateway:</h2>\n<pre><code>spring:\n  cloud:\n    gateway:\n      default-filters:\n        - DedupeResponseHeader=Access-Control-Allow-Origin Access-Control-Allow-Credentials, RETAIN_UNIQUE\n      globalcors:\n        corsConfigurations:\n          '[/**]':\n            allowedOrigins: &quot;http://localhost:8100&quot;\n            allowedHeaders: &quot;*&quot;\n            allowedMethods: &quot;*&quot;\n</code></pre>\n<p>Please, note that if you don't add section with <code>gateway: default-filters</code> you will be facing similar error with header that contains multiple values.</p>\n<p>Thanks to <a href=\"https://stackoverflow.com/a/70985763\">answer by Pablo Aragonés in another question</a> and <a href=\"https://cloud.spring.io/spring-cloud-gateway/multi/multi__cors_configuration.html\" rel=\"nofollow noreferrer\">Spring Cloud Documentation</a></p>\n"},{"tags":[],"owner":{"account_id":23208927,"reputation":1159,"user_id":17302718,"display_name":"Mounir bkr"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674411327,"creation_date":1674411327,"answer_id":75202802,"question_id":72859401,"body_markdown":"add this to applications.yml in your gateway, solved issue for me:\r\n\r\n    spring:\r\n      cloud:\r\n        gateway:\r\n        default-filters:\r\n           - DedupeResponseHeader=Access-Control-Allow-Origin Access-Control- \r\n           Allow-Credentials, RETAIN_UNIQUE\r\n      globalcors:\r\n        corsConfigurations:\r\n          &#39;[/**]&#39;:\r\n            allowedOrigins: &quot;http://localhost:&lt;your port&gt;&quot;\r\n            allowedHeaders: &quot;*&quot;\r\n            allowedMethods: &quot;*&quot;","title":"No &#39;Access-Control-Allow-Origin&#39; header is present (CORS) - Spring Boot (Spring security) Microservices + Vue.js","body":"<p>add this to applications.yml in your gateway, solved issue for me:</p>\n<pre><code>spring:\n  cloud:\n    gateway:\n    default-filters:\n       - DedupeResponseHeader=Access-Control-Allow-Origin Access-Control- \n       Allow-Credentials, RETAIN_UNIQUE\n  globalcors:\n    corsConfigurations:\n      '[/**]':\n        allowedOrigins: &quot;http://localhost:&lt;your port&gt;&quot;\n        allowedHeaders: &quot;*&quot;\n        allowedMethods: &quot;*&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24940156,"reputation":1,"user_id":18806166,"display_name":"user18806166"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697609868,"creation_date":1697367881,"answer_id":77296353,"question_id":72859401,"body_markdown":"#I had the same issue. I added these lines which are in the first answer\r\n\r\n    spring:\r\n      cloud:\r\n        gateway:\r\n          default-filters:\r\n            - DedupeResponseHeader=Access-Control-Allow-Origin Access-Control-Allow-Credentials, RETAIN_UNIQUE\r\n          globalcors:\r\n            corsConfigurations:\r\n              &#39;[/**]&#39;:\r\n                allowedOrigins: &quot;http://localhost:8100&quot;(or frontend link)\r\n                allowedHeaders: &quot;*&quot;\r\n                allowedMethods: &quot;*&quot;","title":"No &#39;Access-Control-Allow-Origin&#39; header is present (CORS) - Spring Boot (Spring security) Microservices + Vue.js","body":"<p>#I had the same issue. I added these lines which are in the first answer</p>\n<pre><code>spring:\n  cloud:\n    gateway:\n      default-filters:\n        - DedupeResponseHeader=Access-Control-Allow-Origin Access-Control-Allow-Credentials, RETAIN_UNIQUE\n      globalcors:\n        corsConfigurations:\n          '[/**]':\n            allowedOrigins: &quot;http://localhost:8100&quot;(or frontend link)\n            allowedHeaders: &quot;*&quot;\n            allowedMethods: &quot;*&quot;\n</code></pre>\n"}],"owner":{"account_id":5278173,"reputation":51,"user_id":4214370,"display_name":"Allteran"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5589,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":72896860,"answer_count":4,"score":0,"last_activity_date":1697609868,"creation_date":1656950337,"question_id":72859401,"body_markdown":"I&#39;m working on Spring Boot project based on microservices architecture on backend and Vue.js on frontend.\r\nStructure of my project is next:\r\n[![Project structure][1]][1]\r\n\r\n\r\nFor avoiding CORS error usually I add ```@CrossOrigin``` annotation on to class and it works.\r\nIt was all good and has been working well, until I added **security part** with ability to login users.  \r\n\r\n### What did I did:  \r\n**1.** To API Gateway that built on ```spring-cloud-gateway``` I&#39;ve added ```AuthFilter``` that uses as interceptor to create and check JWT:   \r\n```api-gateway/src/main/java/.../AuthFilter.java```  \r\n```\r\n@Component\r\npublic class AuthFilter extends AbstractGatewayFilterFactory&lt;AuthFilter.Config&gt; {\r\n    private final WebClient.Builder webClientBuilder;\r\n\r\n    @Autowired\r\n    public AuthFilter(WebClient.Builder webClientBuilder) {\r\n        super(Config.class);\r\n        this.webClientBuilder = webClientBuilder;\r\n    }\r\n\r\n    @Override\r\n    public GatewayFilter apply(Config config) {\r\n        return (exchange, chain) -&gt; {\r\n            if(!exchange.getRequest().getHeaders().containsKey(HttpHeaders.AUTHORIZATION)) {\r\n                throw new RuntimeException(&quot;Missing auth information&quot;);\r\n            }\r\n\r\n            String authHeader = exchange.getRequest().getHeaders().get(org.springframework.http.HttpHeaders.AUTHORIZATION).get(0);\r\n            String[] parts = authHeader.split(&quot; &quot;);\r\n\r\n            if(parts.length != 2 || !&quot;Bearer&quot;.equals(parts[0])) {\r\n                throw new RuntimeException(&quot;Incorrect auth structure&quot;);\r\n            }\r\n\r\n            return webClientBuilder.build()\r\n                    .post()\r\n                    .uri(&quot;http://manager-service/api/v1/auth/validateToken?token=&quot; + parts[1])\r\n                    .retrieve()\r\n                    .bodyToMono(EmployeeDTO.class) //EmployeeDTO.class is custom DTO that represents User\r\n                    .map(user -&gt; {\r\n                        exchange.getRequest()\r\n                                .mutate()\r\n                                .header(&quot;x-auth-user-id&quot;, user.getId());\r\n                        return exchange;\r\n                    }).flatMap(chain::filter);\r\n\r\n        };\r\n    }\r\n\r\n    public static class Config {\r\n        //live it empty because we dont need any particular configuration\r\n    }\r\n}\r\n```  \r\n**2.** I&#39;ve added ```AuthFilter``` as filter to each service in ```application.properties```:  \r\n```api-gateway/src/resource/application.properties```  \r\n```\r\n##Workshop service routes\r\nspring.cloud.gateway.routes[0].id=workshop-service\r\nspring.cloud.gateway.routes[0].uri=lb://workshop-service\r\nspring.cloud.gateway.routes[0].predicates[0]=Path=/api/v1/workshop/**\r\nspring.cloud.gateway.routes[0].filters[0]=AuthFilter\r\n\r\n##Manage service routes\r\nspring.cloud.gateway.routes[1].id=manager-service\r\nspring.cloud.gateway.routes[1].uri=lb://manager-service\r\nspring.cloud.gateway.routes[1].predicates[0]=Path=/api/v1/manage/**\r\nspring.cloud.gateway.routes[1].filters[0]=AuthFilter\r\n\r\n##Manage service for singIn. Here we dont need to add AuthFilter, cause sign in page should be available for all\r\nspring.cloud.gateway.routes[2].id=manager-service-sign-in\r\nspring.cloud.gateway.routes[2].uri=lb://manager-service\r\nspring.cloud.gateway.routes[2].predicates[0]=Path=/api/v1/auth/signIn\r\n\r\n...\r\n```\r\n**3.** Manager-service microservice used to control base entities for system, such as users, roles, organizations where users working are and so on, so here I added ```SecurityConfig``` and ```WebConfig```, because this microservice will be responsible for JWT generating: &lt;br /&gt;\r\n```manager-service/src/main/java/.../SecurityConfig.java```  \r\n```\r\n@EnableWebSecurity\r\npublic class SecurityConfig  {\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n        httpSecurity\r\n                .csrf().disable()\r\n                .authorizeRequests().anyRequest().permitAll();\r\n        return httpSecurity.build();\r\n    }\r\n   }\r\n```  \r\n```manager-service/src/main/java/.../WebConfig.java```  \r\n```@Configuration\r\n@EnableWebMvc\r\npublic class WebConfig implements WebMvcConfigurer {\r\n\r\n    private static final Long MAX_AGE=3600L;\r\n\r\n    @Override\r\n    public void addCorsMappings(CorsRegistry registry) {\r\n        registry.addMapping(&quot;/**&quot;)\r\n                .allowedHeaders(\r\n                        HttpHeaders.AUTHORIZATION,\r\n                        HttpHeaders.CONTENT_TYPE,\r\n                        HttpHeaders.ACCEPT)\r\n                .allowedMethods(\r\n                        HttpMethod.GET.name(),\r\n                        HttpMethod.POST.name(),\r\n                        HttpMethod.PUT.name(),\r\n                        HttpMethod.DELETE.name())\r\n                .maxAge(MAX_AGE)\r\n                .allowedOrigins(&quot;http://localhost:8100&quot;)\r\n                .allowCredentials(false);\r\n    }\r\n}\r\n```  \r\n**4.** In controller, that represents auth I also added ```@CrossOrigin``` annotation to class:  \r\n```manager-service/src/main/java/.../AuthController.java```    \r\n```\r\n@RestController\r\n@RequestMapping(&quot;api/v1/auth&quot;)\r\n@CrossOrigin(origins = &quot;http://localhost:8100&quot;)\r\n@Slf4j\r\npublic class AuthController {\r\n    private final AuthService authService;\r\n\r\n    @Autowired\r\n    public AuthController(AuthService authService) {\r\n        this.authService = authService;\r\n    }\r\n\r\n    @PostMapping(&quot;/signIn&quot;)\r\n    public ResponseEntity&lt;EmployeeDTO&gt; signIn(@RequestBody CredentialsDTO credentialsDTO) {\r\n        log.info(&quot;Trying to login {}&quot;, credentialsDTO.getLogin());\r\n\r\n        return ResponseEntity.ok(EmployeeMapper.convertToDTO(authService.signIn(credentialsDTO)));\r\n    }\r\n\r\n    @PostMapping(&quot;/validateToken&quot;)\r\n    public ResponseEntity&lt;EmployeeDTO&gt; validateToken(@RequestParam String token) {\r\n        log.info(&quot;Trying to validate token {}&quot;, token);\r\n        Employee validatedTokenUser = authService.validateToken(token);\r\n        return ResponseEntity.ok(EmployeeMapper.convertToDTO(validatedTokenUser));\r\n    }\r\n}\r\n```\r\n**5.** For frontend I use Vue.js. For requests I use ```axios```. Here are ```post```-request to login:  \r\n```\r\naxios.post(&#39;http://localhost:8080/api/v1/auth/signIn&#39;, this.credentials).then(response =&gt; {\r\n              console.log(&#39;response = &#39;, response)\r\n              console.log(&#39;token from response&#39;, response.data.token)\r\n              this.$store.commit(&#39;saveToken&#39;, response.data.token)\r\n            }).catch(error =&gt; {\r\n          console.log(&#39;Error is below&#39;)\r\n          console.log(error)\r\n        })\r\n```  \r\n\r\nAll what I&#39;m getting is an error: ```Access to XMLHttpRequest at &#39;http://localhost:8080/api/v1/auth/signIn&#39; from origin &#39;http://localhost:8100&#39; has been blocked by CORS policy: Response to preflight request doesn&#39;t pass access control check: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.```. Below you&#39;ll see headers, that displays Chrome with request:  \r\n[![enter image description here][2]][2]  \r\nI&#39;ve been trying to add another one ```corsConfiguration```, tried to mark with ```CrossOrigin``` annotation only method, not class at all but it hadn&#39;t take any effects. If I try to make such requests with **postman** it gives me expected response with generated token.\r\n\r\n\r\nI&#39;ll be grateful for any idea what could I do wrong.  \r\nThanks!\r\n\r\n**UPDATE:** As I understood well - all problems is in ```api-gateway```. If I make requests directly to service - I get right response, but if I make request through **gateway** - I&#39;m facing an error, logs of ```api-gateway``` below:  \r\n```2022-07-05 00:34:18.127 TRACE 8105 --- [or-http-epoll-5] o.s.c.g.f.WeightCalculatorWebFilter      : Weights attr: {}\r\n2022-07-05 00:34:18.128 TRACE 8105 --- [or-http-epoll-5] o.s.c.g.h.p.PathRoutePredicateFactory    : Pattern &quot;[/api/v1/workshop/**]&quot; does not match against value &quot;/api/v1/auth/signIn&quot;\r\n2022-07-05 00:34:18.129 TRACE 8105 --- [or-http-epoll-5] o.s.c.g.h.p.PathRoutePredicateFactory    : Pattern &quot;[/api/v1/manage/**]&quot; does not match against value &quot;/api/v1/auth/signIn&quot;\r\n2022-07-05 00:34:18.129 TRACE 8105 --- [or-http-epoll-5] o.s.c.g.h.p.PathRoutePredicateFactory    : Pattern &quot;/api/v1/auth/signIn&quot; matches against value &quot;/api/v1/auth/signIn&quot;\r\n2022-07-05 00:34:18.129 DEBUG 8105 --- [or-http-epoll-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: manager-service-sign-in\r\n2022-07-05 00:34:18.129 DEBUG 8105 --- [or-http-epoll-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: OPTIONS http://localhost:8080/api/v1/auth/signIn] to Route{id=&#39;manager-service-sign-in&#39;, uri=lb://manager-service, order=0, predicate=Paths: [/api/v1/auth/signIn], match trailing slash: true, gatewayFilters=[], metadata={}}\r\n2022-07-05 00:34:18.129 DEBUG 8105 --- [or-http-epoll-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [e5b87280-8] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@78df1cfc\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dFOya.png\r\n  [2]: https://i.stack.imgur.com/A65Dl.png","title":"No &#39;Access-Control-Allow-Origin&#39; header is present (CORS) - Spring Boot (Spring security) Microservices + Vue.js","body":"<p>I'm working on Spring Boot project based on microservices architecture on backend and Vue.js on frontend.\nStructure of my project is next:\n<a href=\"https://i.stack.imgur.com/dFOya.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dFOya.png\" alt=\"Project structure\" /></a></p>\n<p>For avoiding CORS error usually I add <code>@CrossOrigin</code> annotation on to class and it works.\nIt was all good and has been working well, until I added <strong>security part</strong> with ability to login users.</p>\n<h3>What did I did:</h3>\n<p><strong>1.</strong> To API Gateway that built on <code>spring-cloud-gateway</code> I've added <code>AuthFilter</code> that uses as interceptor to create and check JWT:<br />\n<code>api-gateway/src/main/java/.../AuthFilter.java</code></p>\n<pre><code>@Component\npublic class AuthFilter extends AbstractGatewayFilterFactory&lt;AuthFilter.Config&gt; {\n    private final WebClient.Builder webClientBuilder;\n\n    @Autowired\n    public AuthFilter(WebClient.Builder webClientBuilder) {\n        super(Config.class);\n        this.webClientBuilder = webClientBuilder;\n    }\n\n    @Override\n    public GatewayFilter apply(Config config) {\n        return (exchange, chain) -&gt; {\n            if(!exchange.getRequest().getHeaders().containsKey(HttpHeaders.AUTHORIZATION)) {\n                throw new RuntimeException(&quot;Missing auth information&quot;);\n            }\n\n            String authHeader = exchange.getRequest().getHeaders().get(org.springframework.http.HttpHeaders.AUTHORIZATION).get(0);\n            String[] parts = authHeader.split(&quot; &quot;);\n\n            if(parts.length != 2 || !&quot;Bearer&quot;.equals(parts[0])) {\n                throw new RuntimeException(&quot;Incorrect auth structure&quot;);\n            }\n\n            return webClientBuilder.build()\n                    .post()\n                    .uri(&quot;http://manager-service/api/v1/auth/validateToken?token=&quot; + parts[1])\n                    .retrieve()\n                    .bodyToMono(EmployeeDTO.class) //EmployeeDTO.class is custom DTO that represents User\n                    .map(user -&gt; {\n                        exchange.getRequest()\n                                .mutate()\n                                .header(&quot;x-auth-user-id&quot;, user.getId());\n                        return exchange;\n                    }).flatMap(chain::filter);\n\n        };\n    }\n\n    public static class Config {\n        //live it empty because we dont need any particular configuration\n    }\n}\n</code></pre>\n<p><strong>2.</strong> I've added <code>AuthFilter</code> as filter to each service in <code>application.properties</code>:<br />\n<code>api-gateway/src/resource/application.properties</code></p>\n<pre><code>##Workshop service routes\nspring.cloud.gateway.routes[0].id=workshop-service\nspring.cloud.gateway.routes[0].uri=lb://workshop-service\nspring.cloud.gateway.routes[0].predicates[0]=Path=/api/v1/workshop/**\nspring.cloud.gateway.routes[0].filters[0]=AuthFilter\n\n##Manage service routes\nspring.cloud.gateway.routes[1].id=manager-service\nspring.cloud.gateway.routes[1].uri=lb://manager-service\nspring.cloud.gateway.routes[1].predicates[0]=Path=/api/v1/manage/**\nspring.cloud.gateway.routes[1].filters[0]=AuthFilter\n\n##Manage service for singIn. Here we dont need to add AuthFilter, cause sign in page should be available for all\nspring.cloud.gateway.routes[2].id=manager-service-sign-in\nspring.cloud.gateway.routes[2].uri=lb://manager-service\nspring.cloud.gateway.routes[2].predicates[0]=Path=/api/v1/auth/signIn\n\n...\n</code></pre>\n<p><strong>3.</strong> Manager-service microservice used to control base entities for system, such as users, roles, organizations where users working are and so on, so here I added <code>SecurityConfig</code> and <code>WebConfig</code>, because this microservice will be responsible for JWT generating: <br />\n<code>manager-service/src/main/java/.../SecurityConfig.java</code></p>\n<pre><code>@EnableWebSecurity\npublic class SecurityConfig  {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity\n                .csrf().disable()\n                .authorizeRequests().anyRequest().permitAll();\n        return httpSecurity.build();\n    }\n   }\n</code></pre>\n<p><code>manager-service/src/main/java/.../WebConfig.java</code></p>\n<pre><code>@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n\n    private static final Long MAX_AGE=3600L;\n\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;)\n                .allowedHeaders(\n                        HttpHeaders.AUTHORIZATION,\n                        HttpHeaders.CONTENT_TYPE,\n                        HttpHeaders.ACCEPT)\n                .allowedMethods(\n                        HttpMethod.GET.name(),\n                        HttpMethod.POST.name(),\n                        HttpMethod.PUT.name(),\n                        HttpMethod.DELETE.name())\n                .maxAge(MAX_AGE)\n                .allowedOrigins(&quot;http://localhost:8100&quot;)\n                .allowCredentials(false);\n    }\n}\n</code></pre>\n<p><strong>4.</strong> In controller, that represents auth I also added <code>@CrossOrigin</code> annotation to class:<br />\n<code>manager-service/src/main/java/.../AuthController.java</code></p>\n<pre><code>@RestController\n@RequestMapping(&quot;api/v1/auth&quot;)\n@CrossOrigin(origins = &quot;http://localhost:8100&quot;)\n@Slf4j\npublic class AuthController {\n    private final AuthService authService;\n\n    @Autowired\n    public AuthController(AuthService authService) {\n        this.authService = authService;\n    }\n\n    @PostMapping(&quot;/signIn&quot;)\n    public ResponseEntity&lt;EmployeeDTO&gt; signIn(@RequestBody CredentialsDTO credentialsDTO) {\n        log.info(&quot;Trying to login {}&quot;, credentialsDTO.getLogin());\n\n        return ResponseEntity.ok(EmployeeMapper.convertToDTO(authService.signIn(credentialsDTO)));\n    }\n\n    @PostMapping(&quot;/validateToken&quot;)\n    public ResponseEntity&lt;EmployeeDTO&gt; validateToken(@RequestParam String token) {\n        log.info(&quot;Trying to validate token {}&quot;, token);\n        Employee validatedTokenUser = authService.validateToken(token);\n        return ResponseEntity.ok(EmployeeMapper.convertToDTO(validatedTokenUser));\n    }\n}\n</code></pre>\n<p><strong>5.</strong> For frontend I use Vue.js. For requests I use <code>axios</code>. Here are <code>post</code>-request to login:</p>\n<pre><code>axios.post('http://localhost:8080/api/v1/auth/signIn', this.credentials).then(response =&gt; {\n              console.log('response = ', response)\n              console.log('token from response', response.data.token)\n              this.$store.commit('saveToken', response.data.token)\n            }).catch(error =&gt; {\n          console.log('Error is below')\n          console.log(error)\n        })\n</code></pre>\n<p>All what I'm getting is an error: <code>Access to XMLHttpRequest at 'http://localhost:8080/api/v1/auth/signIn' from origin 'http://localhost:8100' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.</code>. Below you'll see headers, that displays Chrome with request:<br />\n<a href=\"https://i.stack.imgur.com/A65Dl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A65Dl.png\" alt=\"enter image description here\" /></a><br />\nI've been trying to add another one <code>corsConfiguration</code>, tried to mark with <code>CrossOrigin</code> annotation only method, not class at all but it hadn't take any effects. If I try to make such requests with <strong>postman</strong> it gives me expected response with generated token.</p>\n<p>I'll be grateful for any idea what could I do wrong.<br />\nThanks!</p>\n<p><strong>UPDATE:</strong> As I understood well - all problems is in <code>api-gateway</code>. If I make requests directly to service - I get right response, but if I make request through <strong>gateway</strong> - I'm facing an error, logs of <code>api-gateway</code> below:</p>\n<pre><code>2022-07-05 00:34:18.128 TRACE 8105 --- [or-http-epoll-5] o.s.c.g.h.p.PathRoutePredicateFactory    : Pattern &quot;[/api/v1/workshop/**]&quot; does not match against value &quot;/api/v1/auth/signIn&quot;\n2022-07-05 00:34:18.129 TRACE 8105 --- [or-http-epoll-5] o.s.c.g.h.p.PathRoutePredicateFactory    : Pattern &quot;[/api/v1/manage/**]&quot; does not match against value &quot;/api/v1/auth/signIn&quot;\n2022-07-05 00:34:18.129 TRACE 8105 --- [or-http-epoll-5] o.s.c.g.h.p.PathRoutePredicateFactory    : Pattern &quot;/api/v1/auth/signIn&quot; matches against value &quot;/api/v1/auth/signIn&quot;\n2022-07-05 00:34:18.129 DEBUG 8105 --- [or-http-epoll-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: manager-service-sign-in\n2022-07-05 00:34:18.129 DEBUG 8105 --- [or-http-epoll-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: OPTIONS http://localhost:8080/api/v1/auth/signIn] to Route{id='manager-service-sign-in', uri=lb://manager-service, order=0, predicate=Paths: [/api/v1/auth/signIn], match trailing slash: true, gatewayFilters=[], metadata={}}\n2022-07-05 00:34:18.129 DEBUG 8105 --- [or-http-epoll-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [e5b87280-8] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@78df1cfc\n</code></pre>\n"},{"tags":["java","android","android-studio","opencv"],"answers":[{"comments":[{"owner":{"account_id":19352105,"reputation":67,"user_id":14149296,"display_name":"RunMildew"},"score":0,"creation_date":1603142993,"post_id":64423056,"comment_id":113937606,"body_markdown":"Thank you so much! This was extremely helpful and the camera is up and running! However, I do have a follow-up, which might prompt me to make another question thread; after the camera starts, it stays on for around 10 seconds, and then the app crashes. Would there be any way to resolve this?","body":"Thank you so much! This was extremely helpful and the camera is up and running! However, I do have a follow-up, which might prompt me to make another question thread; after the camera starts, it stays on for around 10 seconds, and then the app crashes. Would there be any way to resolve this?"},{"owner":{"account_id":5103844,"reputation":3188,"user_id":4092588,"accept_rate":77,"display_name":"Antonino"},"score":0,"creation_date":1603156670,"post_id":64423056,"comment_id":113940844,"body_markdown":"@RunMildew ciao! the issue you are having is with the processing happening in `onCameraFrame()` that after a few seconds becomes unsustainable. This one you are asking is a memory management issue though - totally unrelated to the black screen at inizialization time - so I would suggest you to open a new one. Also, since now it seems you are able to get the camera stream please mark this as the answer to your question, thanks!","body":"@RunMildew ciao! the issue you are having is with the processing happening in <code>onCameraFrame()</code> that after a few seconds becomes unsustainable. This one you are asking is a memory management issue though - totally unrelated to the black screen at inizialization time - so I would suggest you to open a new one. Also, since now it seems you are able to get the camera stream please mark this as the answer to your question, thanks!"},{"owner":{"account_id":19352105,"reputation":67,"user_id":14149296,"display_name":"RunMildew"},"score":0,"creation_date":1603194440,"post_id":64423056,"comment_id":113953544,"body_markdown":"You&#39;re very welcome! I&#39;m really new to software development, so hopefully one of the final questions I&#39;ll be asking is; would I have to create a new OnCameraFrame( ) method or class in order to make this sustainable? and would I just be copying and pasting the same `OnCameraFrame( )` that I had made prior?","body":"You&#39;re very welcome! I&#39;m really new to software development, so hopefully one of the final questions I&#39;ll be asking is; would I have to create a new OnCameraFrame( ) method or class in order to make this sustainable? and would I just be copying and pasting the same <code>OnCameraFrame( )</code> that I had made prior?"},{"owner":{"account_id":5103844,"reputation":3188,"user_id":4092588,"accept_rate":77,"display_name":"Antonino"},"score":0,"creation_date":1603196896,"post_id":64423056,"comment_id":113954699,"body_markdown":"@RunMildew no problem, we all started from zero so I perfectly understand ;) no, what I was recommending you before is to make the elaboration happening inside `onCameraFrame()` a little bit lighter. Just change its content to make it work smarter. For example in [this question](https://stackoverflow.com/a/39922008/4092588) the user had a very similar problem and was suggested already to release the matrices after usage. That&#39;s a good start I guess... ciao!","body":"@RunMildew no problem, we all started from zero so I perfectly understand ;) no, what I was recommending you before is to make the elaboration happening inside <code>onCameraFrame()</code> a little bit lighter. Just change its content to make it work smarter. For example in <a href=\"https://stackoverflow.com/a/39922008/4092588\">this question</a> the user had a very similar problem and was suggested already to release the matrices after usage. That&#39;s a good start I guess... ciao!"},{"owner":{"account_id":19352105,"reputation":67,"user_id":14149296,"display_name":"RunMildew"},"score":0,"creation_date":1603236696,"post_id":64423056,"comment_id":113972179,"body_markdown":"Thank you for getting back to me! This will be the final question; So would I be required to replace the code that i already have on `OnCameraFrame()` with the one provided in the link? or would I be merely adding it onto it? Thank you so much in advance with this one!","body":"Thank you for getting back to me! This will be the final question; So would I be required to replace the code that i already have on <code>OnCameraFrame()</code> with the one provided in the link? or would I be merely adding it onto it? Thank you so much in advance with this one!"},{"owner":{"account_id":5103844,"reputation":3188,"user_id":4092588,"accept_rate":77,"display_name":"Antonino"},"score":0,"creation_date":1603239788,"post_id":64423056,"comment_id":113972803,"body_markdown":"simply speaking: you have to replace the code in `onCameraFrame()`. The link I gave you is a test that in your shoes I would start doing. Check if clearing the matrices as they do in that answer with `.release()` is enough and then you move on from there. Most probably you will need to slightly adapt any solution that you will find because you have your specific frame transformation to accomplish. Have a check even here on StackOverflow, I think there may be more people who faced a similar freeze. Good luck mate!","body":"simply speaking: you have to replace the code in <code>onCameraFrame()</code>. The link I gave you is a test that in your shoes I would start doing. Check if clearing the matrices as they do in that answer with <code>.release()</code> is enough and then you move on from there. Most probably you will need to slightly adapt any solution that you will find because you have your specific frame transformation to accomplish. Have a check even here on StackOverflow, I think there may be more people who faced a similar freeze. Good luck mate!"}],"tags":[],"owner":{"account_id":5103844,"reputation":3188,"user_id":4092588,"accept_rate":77,"display_name":"Antonino"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669158103,"creation_date":1603093338,"answer_id":64423056,"question_id":64417874,"body_markdown":"The issue you are facing is actually with the camera permission check\r\n\r\nStarting from Android Marshmallow, the `CAMERA` permission is considered a dangerous one and the user must explicitly agree on its usage at runtime, clicking on the system dialog\r\n\r\n[![camera permission request][1]][1]\r\n\r\nThis wouldn&#39;t happen for &quot;normal permissions&quot; [e.g. `INTERNET`] that are granted by default. If you are interested in which ones are dangerous and which not you can check for the one of interest directly in the [Android documentation][3]\r\n\r\nWhat&#39;s happening with your initial code is that you are mentioning you will require the camera permission in your manifest file and then you are enabling it from the Android Settings [toggling the Camera slider]. But then, when you start the app there is nothing in the code that goes and checks that toggle. Then you get a black screen because Android assumes that the user has not given explicit consent\r\n\r\n[This link][2] from the Android documentation should help you understand more. Here the snippet that will make your code work. In a nutshell, with `onCreate()` you go and check if the user has already granted the permission and if not you will ask it. In `onRequestPermissionResult()` there is the check we were talking about before. If the user agreed the camera will start, otherwise it won&#39;t\r\n\r\n    private static final int MY_CAMERA_REQUEST_CODE = 100;\r\n    int activeCamera = CameraBridgeViewBase.CAMERA_ID_FRONT;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        javaCameraView = (JavaCameraView) findViewById(R.id.my_camera_view);\r\n\r\n        // checking if the permission has already been granted\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA)\r\n                == PackageManager.PERMISSION_GRANTED) {\r\n            Log.d(TAG, &quot;Permissions granted&quot;);\r\n            initializeCamera(javaCameraView, activeCamera);\r\n        } else {\r\n            // prompt system dialog\r\n            Log.d(TAG, &quot;Permission prompt&quot;);\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.CAMERA}, MY_CAMERA_REQUEST_CODE);\r\n            }\r\n    }\r\n\r\n    // callback to be executed after the user has givenapproval or rejection via system prompt\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if (requestCode == MY_CAMERA_REQUEST_CODE) {\r\n            if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                // camera can be turned on\r\n                Toast.makeText(this, &quot;camera permission granted&quot;, Toast.LENGTH_LONG).show();\r\n                initializeCamera(javaCameraView, activeCamera);\r\n            } else {\r\n                // camera will stay off\r\n                Toast.makeText(this, &quot;camera permission denied&quot;, Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n    }\r\n\r\n    private void initializeCamera(JavaCameraView javaCameraView, int activeCamera){\r\n        javaCameraView.setCameraPermissionGranted();\r\n        javaCameraView.setCameraIndex(activeCamera);\r\n        javaCameraView.setVisibility(CameraBridgeViewBase.VISIBLE);\r\n        javaCameraView.setCvCameraViewListener(this);\r\n    }\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NoLxwm.png\r\n  [2]: https://developer.android.com/training/permissions/requesting\r\n  [3]: https://developer.android.com/reference/android/Manifest.permission#CAMERA","title":"OpenCV app - Android camera keeps showing black screen","body":"<p>The issue you are facing is actually with the camera permission check</p>\n<p>Starting from Android Marshmallow, the <code>CAMERA</code> permission is considered a dangerous one and the user must explicitly agree on its usage at runtime, clicking on the system dialog</p>\n<p><a href=\"https://i.stack.imgur.com/NoLxwm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NoLxwm.png\" alt=\"camera permission request\" /></a></p>\n<p>This wouldn't happen for &quot;normal permissions&quot; [e.g. <code>INTERNET</code>] that are granted by default. If you are interested in which ones are dangerous and which not you can check for the one of interest directly in the <a href=\"https://developer.android.com/reference/android/Manifest.permission#CAMERA\" rel=\"nofollow noreferrer\">Android documentation</a></p>\n<p>What's happening with your initial code is that you are mentioning you will require the camera permission in your manifest file and then you are enabling it from the Android Settings [toggling the Camera slider]. But then, when you start the app there is nothing in the code that goes and checks that toggle. Then you get a black screen because Android assumes that the user has not given explicit consent</p>\n<p><a href=\"https://developer.android.com/training/permissions/requesting\" rel=\"nofollow noreferrer\">This link</a> from the Android documentation should help you understand more. Here the snippet that will make your code work. In a nutshell, with <code>onCreate()</code> you go and check if the user has already granted the permission and if not you will ask it. In <code>onRequestPermissionResult()</code> there is the check we were talking about before. If the user agreed the camera will start, otherwise it won't</p>\n<pre><code>private static final int MY_CAMERA_REQUEST_CODE = 100;\nint activeCamera = CameraBridgeViewBase.CAMERA_ID_FRONT;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState)\n{\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    javaCameraView = (JavaCameraView) findViewById(R.id.my_camera_view);\n\n    // checking if the permission has already been granted\n    if (ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA)\n            == PackageManager.PERMISSION_GRANTED) {\n        Log.d(TAG, &quot;Permissions granted&quot;);\n        initializeCamera(javaCameraView, activeCamera);\n    } else {\n        // prompt system dialog\n        Log.d(TAG, &quot;Permission prompt&quot;);\n        ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.CAMERA}, MY_CAMERA_REQUEST_CODE);\n        }\n}\n\n// callback to be executed after the user has givenapproval or rejection via system prompt\n@Override\npublic void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n    super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n    if (requestCode == MY_CAMERA_REQUEST_CODE) {\n        if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n            // camera can be turned on\n            Toast.makeText(this, &quot;camera permission granted&quot;, Toast.LENGTH_LONG).show();\n            initializeCamera(javaCameraView, activeCamera);\n        } else {\n            // camera will stay off\n            Toast.makeText(this, &quot;camera permission denied&quot;, Toast.LENGTH_LONG).show();\n        }\n    }\n}\n\nprivate void initializeCamera(JavaCameraView javaCameraView, int activeCamera){\n    javaCameraView.setCameraPermissionGranted();\n    javaCameraView.setCameraIndex(activeCamera);\n    javaCameraView.setVisibility(CameraBridgeViewBase.VISIBLE);\n    javaCameraView.setCvCameraViewListener(this);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10974515,"reputation":29,"user_id":8489848,"display_name":"faizi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697609837,"creation_date":1697349126,"answer_id":77295450,"question_id":64417874,"body_markdown":"    javaCameraView = binding.openCvCamera;\r\n    javaCameraView.setCameraPermissionGranted();\r\n\r\nThe setCameraPermissionGranted method will resolve the issue.","title":"OpenCV app - Android camera keeps showing black screen","body":"<pre><code>javaCameraView = binding.openCvCamera;\njavaCameraView.setCameraPermissionGranted();\n</code></pre>\n<p>The setCameraPermissionGranted method will resolve the issue.</p>\n"}],"owner":{"account_id":19352105,"reputation":67,"user_id":14149296,"display_name":"RunMildew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2117,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":64423056,"answer_count":2,"score":1,"last_activity_date":1697609837,"creation_date":1603052045,"question_id":64417874,"body_markdown":"**Background**\r\n\r\nI had started out this project on Android Studio with the intent of creating a OpenCV application that could process frames using the camera on my OnePlus android device. After running the application, I was gratified to see it finally launch on my device. However, the application shows up with a black screen where the camera preview should be. Here is my code for my MainActivity, activity_main, and AndroidManifest files:\r\n\r\nEDIT: While the application launched on my device, I did give the application permission to use camera\r\n\r\n**MainActivity.java**\r\n``` \r\npackage com.example.cv;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.SurfaceView;\r\n\r\nimport org.opencv.android.BaseLoaderCallback;\r\nimport org.opencv.android.CameraBridgeViewBase;\r\nimport org.opencv.android.JavaCameraView;\r\nimport org.opencv.android.OpenCVLoader;\r\nimport org.opencv.core.Core;\r\nimport org.opencv.core.CvType;\r\nimport org.opencv.core.Mat;\r\nimport org.opencv.imgproc.Imgproc;\r\n\r\npublic class MainActivity extends AppCompatActivity implements CameraBridgeViewBase.CvCameraViewListener2\r\n{\r\n    private static String TAG = &quot;MainActivity&quot;;\r\n    JavaCameraView javaCameraView;\r\n    Mat mRGBA, mRGBAT;\r\n\r\n\r\n    BaseLoaderCallback baseLoaderCallback = new BaseLoaderCallback(MainActivity.this) {\r\n        @Override\r\n        public void onManagerConnected(int status)\r\n        {\r\n            if (status == BaseLoaderCallback.SUCCESS) {\r\n                javaCameraView.enableView();\r\n            } else {\r\n                super.onManagerConnected(status);\r\n            }\r\n        }\r\n    };\r\n\r\n    static\r\n    {\r\n        if (OpenCVLoader.initDebug())\r\n        {\r\n            Log.d(TAG, &quot;OpenCV is Configured or Connected successfully.&quot;);\r\n        }\r\n        else\r\n        {\r\n            Log.d(TAG, &quot;OpenCV not Working or Loaded.&quot;);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        javaCameraView = (JavaCameraView) findViewById(R.id.my_camera_view);\r\n        javaCameraView.setVisibility(SurfaceView.VISIBLE);\r\n        javaCameraView.setCvCameraViewListener(MainActivity.this);\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onCameraViewStarted(int width, int height)\r\n    {\r\n        mRGBA = new Mat(height, width, CvType.CV_8UC4);\r\n    }\r\n\r\n    @Override\r\n    public void onCameraViewStopped()\r\n    {\r\n        mRGBA.release();\r\n    }\r\n\r\n    @Override\r\n    public Mat onCameraFrame(CameraBridgeViewBase.CvCameraViewFrame inputFrame)\r\n    {\r\n        mRGBA = inputFrame.rgba();\r\n        mRGBAT = mRGBA.t();\r\n        Core.flip(mRGBA.t(), mRGBAT, 1);\r\n        Imgproc.resize(mRGBAT, mRGBAT, mRGBA.size());\r\n        return mRGBAT;\r\n    }\r\n\r\n    @Override\r\n    public void onPointerCaptureChanged(boolean hasCapture) {\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n\r\n        if (javaCameraView != null)\r\n        {\r\n            javaCameraView.disableView();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n\r\n        if (javaCameraView != null)\r\n        {\r\n            javaCameraView.disableView();\r\n        }\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n\r\n        if (OpenCVLoader.initDebug())\r\n        {\r\n            Log.d(TAG, &quot;OpenCV is Configured or Connected successfully.&quot;);\r\n            baseLoaderCallback.onManagerConnected(BaseLoaderCallback.SUCCESS);\r\n        }\r\n        else\r\n        {\r\n            Log.d(TAG, &quot;OpenCV not Working or Loaded.&quot;);\r\n            OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION, this, baseLoaderCallback);\r\n        }\r\n    }\r\n}\r\n``` \r\n\r\n**activity_main.xml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n\r\n    &lt;org.opencv.android.JavaCameraView\r\n        android:id=&quot;@+id/my_camera_view&quot;\r\n        android:layout_width=&quot;fill_parent&quot;\r\n        android:layout_height=&quot;fill_parent&quot;\r\n        /&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n```\r\n\r\n**AndroidManifest.xml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.example.cv&quot;&gt;\r\n\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot;/&gt;\r\n    &lt;uses-feature android:name=&quot;android.hardware.camera&quot;/&gt;\r\n    &lt;uses-feature android:name=&quot;android.hardware.camera.autofocus&quot;/&gt;\r\n    &lt;uses-feature android:name=&quot;android.hardware.camera.front&quot;/&gt;\r\n    &lt;uses-feature android:name=&quot;android.hardware.camera.front.autofocus&quot;/&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/AppTheme&quot;&gt;\r\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n``` \r\n\r\n","title":"OpenCV app - Android camera keeps showing black screen","body":"<p><strong>Background</strong></p>\n<p>I had started out this project on Android Studio with the intent of creating a OpenCV application that could process frames using the camera on my OnePlus android device. After running the application, I was gratified to see it finally launch on my device. However, the application shows up with a black screen where the camera preview should be. Here is my code for my MainActivity, activity_main, and AndroidManifest files:</p>\n<p>EDIT: While the application launched on my device, I did give the application permission to use camera</p>\n<p><strong>MainActivity.java</strong></p>\n<pre><code>package com.example.cv;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.SurfaceView;\n\nimport org.opencv.android.BaseLoaderCallback;\nimport org.opencv.android.CameraBridgeViewBase;\nimport org.opencv.android.JavaCameraView;\nimport org.opencv.android.OpenCVLoader;\nimport org.opencv.core.Core;\nimport org.opencv.core.CvType;\nimport org.opencv.core.Mat;\nimport org.opencv.imgproc.Imgproc;\n\npublic class MainActivity extends AppCompatActivity implements CameraBridgeViewBase.CvCameraViewListener2\n{\n    private static String TAG = &quot;MainActivity&quot;;\n    JavaCameraView javaCameraView;\n    Mat mRGBA, mRGBAT;\n\n\n    BaseLoaderCallback baseLoaderCallback = new BaseLoaderCallback(MainActivity.this) {\n        @Override\n        public void onManagerConnected(int status)\n        {\n            if (status == BaseLoaderCallback.SUCCESS) {\n                javaCameraView.enableView();\n            } else {\n                super.onManagerConnected(status);\n            }\n        }\n    };\n\n    static\n    {\n        if (OpenCVLoader.initDebug())\n        {\n            Log.d(TAG, &quot;OpenCV is Configured or Connected successfully.&quot;);\n        }\n        else\n        {\n            Log.d(TAG, &quot;OpenCV not Working or Loaded.&quot;);\n        }\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        javaCameraView = (JavaCameraView) findViewById(R.id.my_camera_view);\n        javaCameraView.setVisibility(SurfaceView.VISIBLE);\n        javaCameraView.setCvCameraViewListener(MainActivity.this);\n\n    }\n\n    @Override\n    public void onCameraViewStarted(int width, int height)\n    {\n        mRGBA = new Mat(height, width, CvType.CV_8UC4);\n    }\n\n    @Override\n    public void onCameraViewStopped()\n    {\n        mRGBA.release();\n    }\n\n    @Override\n    public Mat onCameraFrame(CameraBridgeViewBase.CvCameraViewFrame inputFrame)\n    {\n        mRGBA = inputFrame.rgba();\n        mRGBAT = mRGBA.t();\n        Core.flip(mRGBA.t(), mRGBAT, 1);\n        Imgproc.resize(mRGBAT, mRGBAT, mRGBA.size());\n        return mRGBAT;\n    }\n\n    @Override\n    public void onPointerCaptureChanged(boolean hasCapture) {\n\n    }\n\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n\n        if (javaCameraView != null)\n        {\n            javaCameraView.disableView();\n        }\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n\n        if (javaCameraView != null)\n        {\n            javaCameraView.disableView();\n        }\n    }\n\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n\n        if (OpenCVLoader.initDebug())\n        {\n            Log.d(TAG, &quot;OpenCV is Configured or Connected successfully.&quot;);\n            baseLoaderCallback.onManagerConnected(BaseLoaderCallback.SUCCESS);\n        }\n        else\n        {\n            Log.d(TAG, &quot;OpenCV not Working or Loaded.&quot;);\n            OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION, this, baseLoaderCallback);\n        }\n    }\n}\n</code></pre>\n<p><strong>activity_main.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n\n    &lt;org.opencv.android.JavaCameraView\n        android:id=&quot;@+id/my_camera_view&quot;\n        android:layout_width=&quot;fill_parent&quot;\n        android:layout_height=&quot;fill_parent&quot;\n        /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p><strong>AndroidManifest.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.example.cv&quot;&gt;\n\n\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot;/&gt;\n    &lt;uses-feature android:name=&quot;android.hardware.camera&quot;/&gt;\n    &lt;uses-feature android:name=&quot;android.hardware.camera.autofocus&quot;/&gt;\n    &lt;uses-feature android:name=&quot;android.hardware.camera.front&quot;/&gt;\n    &lt;uses-feature android:name=&quot;android.hardware.camera.front.autofocus&quot;/&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/AppTheme&quot;&gt;\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","dictionary","java-stream","collectors"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1693923788,"post_id":77045319,"comment_id":135821684,"body_markdown":"You have to start a new stream from the `:values()` of the map and operate on that.","body":"You have to start a new stream from the <code>:values()</code> of the map and operate on that."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693927793,"post_id":77045319,"comment_id":135822675,"body_markdown":"There’s a wrong comma in your print statement. But why do you write `System.out.print(a.getKey() + &quot;==&gt;&quot;); System.out.println(a.getValue());` anyway, instead of a straight-forward `System.out.println(a.getKey() + &quot;==&gt;&quot; + a.getValue());`? Besides that, I don’t understand the purpose of your code. Your repeated integer division piles up rounding errors. Without those rounding errors, your final result would just be `myIntegers.size()/2`","body":"There’s a wrong comma in your print statement. But why do you write <code>System.out.print(a.getKey() + &quot;==&gt;&quot;); System.out.println(a.getValue());</code> anyway, instead of a straight-forward <code>System.out.println(a.getKey() + &quot;==&gt;&quot; + a.getValue());</code>? Besides that, I don’t understand the purpose of your code. Your repeated integer division piles up rounding errors. Without those rounding errors, your final result would just be <code>myIntegers.size()&#47;2</code>"},{"owner":{"account_id":5545338,"reputation":155,"user_id":4400293,"accept_rate":100,"display_name":"Raoul Duke"},"score":0,"creation_date":1693931178,"post_id":77045319,"comment_id":135823406,"body_markdown":"Yes, typo in the print statement and can be simplified. The purpose of all this is to return the total number of pairs of integers in the list.","body":"Yes, typo in the print statement and can be simplified. The purpose of all this is to return the total number of pairs of integers in the list."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693932829,"post_id":77045319,"comment_id":135823742,"body_markdown":"I see. So the rounding error equals to the number of odd counts, which is the number of non-paired elements. Makes sense. The alternative would be to only count the number of odd frequencies and subtract it from the list size (before halving), `Map&lt;Integer, Boolean&gt; oddValues = myIntegers.stream() .collect(Collectors.toMap(Function.identity(), v -&gt; true, (a,b) -&gt; a ^ b));  long result = (myIntegers.size() - Collections.frequency(oddValues.values(), true)) / 2;`","body":"I see. So the rounding error equals to the number of odd counts, which is the number of non-paired elements. Makes sense. The alternative would be to only count the number of odd frequencies and subtract it from the list size (before halving), <code>Map&lt;Integer, Boolean&gt; oddValues = myIntegers.stream() .collect(Collectors.toMap(Function.identity(), v -&gt; true, (a,b) -&gt; a ^ b));  long result = (myIntegers.size() - Collections.frequency(oddValues.values(), true)) &#47; 2;</code>"}],"answers":[{"tags":[],"owner":{"account_id":12359057,"reputation":103,"user_id":9013909,"display_name":"RancidCrab"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693925703,"creation_date":1693924463,"answer_id":77045444,"question_id":77045319,"body_markdown":"You can do that with a map-reduce approach like so:\r\n\r\n      long result = myIntegerMap.values().stream()\r\n                .mapToLong(aLong -&gt; aLong / 2)\r\n                .sum();\r\n\r\nHope I didn&#39;t misunderstand your question and this helps.","title":"How to perform arithmetic on the result of Collectors.counting()?","body":"<p>You can do that with a map-reduce approach like so:</p>\n<pre><code>  long result = myIntegerMap.values().stream()\n            .mapToLong(aLong -&gt; aLong / 2)\n            .sum();\n</code></pre>\n<p>Hope I didn't misunderstand your question and this helps.</p>\n"},{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693924787,"creation_date":1693924787,"answer_id":77045478,"question_id":77045319,"body_markdown":"If you are using Java8 you can do this way:\r\n\r\n```java\r\nint result = myIntegerMap.entrySet().stream()\r\n                .mapToInt(entry -&gt; (int) (entry.getValue() / 2))\r\n                .sum();\r\n```\r\n","title":"How to perform arithmetic on the result of Collectors.counting()?","body":"<p>If you are using Java8 you can do this way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int result = myIntegerMap.entrySet().stream()\n                .mapToInt(entry -&gt; (int) (entry.getValue() / 2))\n                .sum();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693929870,"creation_date":1693924821,"answer_id":77045482,"question_id":77045319,"body_markdown":"You don&#39;t need to use two statements.  You can do it in the same construct as doing the frequency count.\r\n\r\nFirst compute the frequencies and then use `CollectingAndThen` to post process the map and add up the values after dividing by `2` to get the desired result. \r\n```\r\nlong result = myIntegers.stream().collect(Collectors.collectingAndThen(\r\n         Collectors.groupingBy(Function.identity(),\r\n                 Collectors.counting()),\r\n           mp -&gt; mp.values().stream().mapToLong(a-&gt;a/2).sum()))\r\n\r\nSystem.out.println(result);\r\n```\r\nprints\r\n```\r\n2","title":"How to perform arithmetic on the result of Collectors.counting()?","body":"<p>You don't need to use two statements.  You can do it in the same construct as doing the frequency count.</p>\n<p>First compute the frequencies and then use <code>CollectingAndThen</code> to post process the map and add up the values after dividing by <code>2</code> to get the desired result.</p>\n<pre><code>long result = myIntegers.stream().collect(Collectors.collectingAndThen(\n         Collectors.groupingBy(Function.identity(),\n                 Collectors.counting()),\n           mp -&gt; mp.values().stream().mapToLong(a-&gt;a/2).sum()))\n\nSystem.out.println(result);\n</code></pre>\n<p>prints</p>\n<pre><code>2\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1693926410,"post_id":77045508,"comment_id":135822318,"body_markdown":"you can eliminate the `mapToLong(i-&gt;i)` by just doing `mapToLong(v-&gt;v/2)`.","body":"you can eliminate the <code>mapToLong(i-&gt;i)</code> by just doing <code>mapToLong(v-&gt;v&#47;2)</code>."},{"owner":{"account_id":14587108,"reputation":155,"user_id":10535520,"display_name":"Stone"},"score":0,"creation_date":1693926890,"post_id":77045508,"comment_id":135822442,"body_markdown":"you are right. That is more simplicity.","body":"you are right. That is more simplicity."}],"tags":[],"owner":{"account_id":14587108,"reputation":155,"user_id":10535520,"display_name":"Stone"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693924997,"creation_date":1693924997,"answer_id":77045508,"question_id":77045319,"body_markdown":"        List&lt;Integer&gt; myIntegers = Arrays.asList(1, 1, 2, 3, 4, 2);\r\n        Map&lt;Integer, Long&gt; myIntegerMap = myIntegers.stream().collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));\r\n        // get the value field from the map and create another stream to calc the result\r\n        long sum = myIntegerMap.values().stream().map(v -&gt; v/2).mapToLong(i -&gt; i).sum();","title":"How to perform arithmetic on the result of Collectors.counting()?","body":"<pre><code>    List&lt;Integer&gt; myIntegers = Arrays.asList(1, 1, 2, 3, 4, 2);\n    Map&lt;Integer, Long&gt; myIntegerMap = myIntegers.stream().collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));\n    // get the value field from the map and create another stream to calc the result\n    long sum = myIntegerMap.values().stream().map(v -&gt; v/2).mapToLong(i -&gt; i).sum();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29670186,"reputation":1,"user_id":22739624,"display_name":"SrikanthMalladi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697609785,"creation_date":1697354981,"answer_id":77295661,"question_id":77045319,"body_markdown":"    public static Long findSum(List&lt;Integer&gt; list) {\r\n    \t\treturn list.stream().collect(Collectors.collectingAndThen(\r\n    \t\t\t\tCollectors.groupingBy(Function.identity(), Collectors.counting()),map -&gt; map.entrySet().stream().map(data -&gt; data.getValue() / 2).mapToLong(Long::longValue).sum()));\t\t\t\r\n    \t}","title":"How to perform arithmetic on the result of Collectors.counting()?","body":"<pre><code>public static Long findSum(List&lt;Integer&gt; list) {\n        return list.stream().collect(Collectors.collectingAndThen(\n                Collectors.groupingBy(Function.identity(), Collectors.counting()),map -&gt; map.entrySet().stream().map(data -&gt; data.getValue() / 2).mapToLong(Long::longValue).sum()));           \n    }\n</code></pre>\n"}],"owner":{"account_id":5545338,"reputation":155,"user_id":4400293,"accept_rate":100,"display_name":"Raoul Duke"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77045482,"answer_count":5,"score":2,"last_activity_date":1697609785,"creation_date":1693923483,"question_id":77045319,"body_markdown":"Given: \r\n\r\n```List&lt;Integer&gt; myIntegers = Arrays.asList(1, 1, 2, 3, 4, 2);```\r\n\r\nReturn: \r\n\r\nan Integer = Sum(((Frequency of Integer) / 2)))\r\n\r\nI&#39;m able to get the frequency of each integer using Collectors.groupingBy(), but want to then divide each frequency value by 2 and then sum all the values in the map, returning just an Integer:\r\n\r\n```Map&lt;Integer, Long&gt; myIntegerMap = myIntegers.stream().collect(Collectors.groupingby(Function.identity(), Collectors.counting()));```\r\n\r\n```for(Map.Entry&lt;Integer, Long&gt; a : myIntegerMap.entrySet()){ System.out.print(a.getKey(), + &quot;==&gt;&quot;); System.out.println(a.getValue());}```\r\n\r\nOutput:\r\n\r\n1 ==&gt; 2\r\n\r\n2 ==&gt; 2\r\n\r\n3 ==&gt; 1\r\n\r\n4 ==&gt; 1\r\n\r\nDesired Output:\r\n\r\n( ( 2 / 2 ) + ( 2 / 2 ) + ( 1 / 2 ) + ( 1 / 2 ) ) = 2\r\n","title":"How to perform arithmetic on the result of Collectors.counting()?","body":"<p>Given:</p>\n<p><code>List&lt;Integer&gt; myIntegers = Arrays.asList(1, 1, 2, 3, 4, 2);</code></p>\n<p>Return:</p>\n<p>an Integer = Sum(((Frequency of Integer) / 2)))</p>\n<p>I'm able to get the frequency of each integer using Collectors.groupingBy(), but want to then divide each frequency value by 2 and then sum all the values in the map, returning just an Integer:</p>\n<p><code>Map&lt;Integer, Long&gt; myIntegerMap = myIntegers.stream().collect(Collectors.groupingby(Function.identity(), Collectors.counting()));</code></p>\n<p><code>for(Map.Entry&lt;Integer, Long&gt; a : myIntegerMap.entrySet()){ System.out.print(a.getKey(), + &quot;==&gt;&quot;); System.out.println(a.getValue());}</code></p>\n<p>Output:</p>\n<p>1 ==&gt; 2</p>\n<p>2 ==&gt; 2</p>\n<p>3 ==&gt; 1</p>\n<p>4 ==&gt; 1</p>\n<p>Desired Output:</p>\n<p>( ( 2 / 2 ) + ( 2 / 2 ) + ( 1 / 2 ) + ( 1 / 2 ) ) = 2</p>\n"},{"tags":["java","debugging","intellij-idea"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1528305195,"post_id":50722271,"comment_id":88460189,"body_markdown":"Seems you can define [Java data type renderers](https://kamilszymanski.github.io/custom-type-renderers-in-intellij-idea-debugger/).","body":"Seems you can define <a href=\"https://kamilszymanski.github.io/custom-type-renderers-in-intellij-idea-debugger/\" rel=\"nofollow noreferrer\">Java data type renderers</a>."}],"answers":[{"comments":[{"owner":{"account_id":2725121,"reputation":2144,"user_id":2350423,"accept_rate":58,"display_name":"arieljannai"},"score":0,"creation_date":1528293997,"post_id":50722406,"comment_id":88453274,"body_markdown":"Thanks! I&#39;m familiar with those methods, and a lot of times when I debug I have a lot of variables and it&#39;s more time consuming and confusing to enter the evaluation window or expand each variable. So I&#39;m already using them but I don&#39;t feel that&#39;s enough.","body":"Thanks! I&#39;m familiar with those methods, and a lot of times when I debug I have a lot of variables and it&#39;s more time consuming and confusing to enter the evaluation window or expand each variable. So I&#39;m already using them but I don&#39;t feel that&#39;s enough."},{"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1528294079,"post_id":50722406,"comment_id":88453325,"body_markdown":"@arieljannai Lots of local variables might be a sign that you need to break the function into several smaller functions.","body":"@arieljannai Lots of local variables might be a sign that you need to break the function into several smaller functions."},{"owner":{"account_id":2725121,"reputation":2144,"user_id":2350423,"accept_rate":58,"display_name":"arieljannai"},"score":0,"creation_date":1528294289,"post_id":50722406,"comment_id":88453469,"body_markdown":"Unfortunately (or luckily?) that&#39;s not the case - it&#39;s usually when I have some variables and I want to track them relatively quickly in a loop, to see that they change as I expected :)","body":"Unfortunately (or luckily?) that&#39;s not the case - it&#39;s usually when I have some variables and I want to track them relatively quickly in a loop, to see that they change as I expected :)"},{"owner":{"account_id":2725121,"reputation":2144,"user_id":2350423,"accept_rate":58,"display_name":"arieljannai"},"score":0,"creation_date":1528838502,"post_id":50722406,"comment_id":88656829,"body_markdown":"I eventually came up with a solution that for it I will only have to set a single expression and only one time :)","body":"I eventually came up with a solution that for it I will only have to set a single expression and only one time :)"}],"tags":[],"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1528293781,"creation_date":1528293781,"answer_id":50722406,"question_id":50722271,"body_markdown":"You can press `Alt-F8` and evaluate any arbitrary expression. For example, type `test1.toDebuggerString()` and press `Ctrl-Enter`. Then press `Ctrl-Shift-Enter` to add its value to the watch window.\r\n\r\nNote the triangle to the left of the variable name. This is much more useful than just a different `toDebuggerString()` method. You click on the triangle to view the values of all member fields.","title":"IntelliJ change toString for debug mode (variables view)","body":"<p>You can press <code>Alt-F8</code> and evaluate any arbitrary expression. For example, type <code>test1.toDebuggerString()</code> and press <code>Ctrl-Enter</code>. Then press <code>Ctrl-Shift-Enter</code> to add its value to the watch window.</p>\n\n<p>Note the triangle to the left of the variable name. This is much more useful than just a different <code>toDebuggerString()</code> method. You click on the triangle to view the values of all member fields.</p>\n"},{"comments":[{"owner":{"account_id":2725121,"reputation":2144,"user_id":2350423,"accept_rate":58,"display_name":"arieljannai"},"score":0,"creation_date":1528294360,"post_id":50722528,"comment_id":88453518,"body_markdown":"Sounds like the direction I&#39;m looking for - thanks! Will look at it soon","body":"Sounds like the direction I&#39;m looking for - thanks! Will look at it soon"},{"owner":{"account_id":2725121,"reputation":2144,"user_id":2350423,"accept_rate":58,"display_name":"arieljannai"},"score":0,"creation_date":1528838398,"post_id":50722528,"comment_id":88656787,"body_markdown":"Thanks for the idea! I eventually came up with another solution that from my point of view is more comfortable and nice :)","body":"Thanks for the idea! I eventually came up with another solution that from my point of view is more comfortable and nice :)"}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1528294145,"creation_date":1528294145,"answer_id":50722528,"question_id":50722271,"body_markdown":"You can add your own.\r\n\r\n    interface Debuggable {\r\n        String toDebugString();\r\n    }\r\n\r\nthen in right click a variable in the debugger -&gt; Customize Data Views -&gt; Java Type Renderer -&gt; + -&gt; type: Debuggable\r\n\r\nIt will do this for any object of this type for any program in future.\r\n","title":"IntelliJ change toString for debug mode (variables view)","body":"<p>You can add your own.</p>\n\n<pre><code>interface Debuggable {\n    String toDebugString();\n}\n</code></pre>\n\n<p>then in right click a variable in the debugger -> Customize Data Views -> Java Type Renderer -> + -> type: Debuggable</p>\n\n<p>It will do this for any object of this type for any program in future.</p>\n"},{"tags":[],"owner":{"account_id":2725121,"reputation":2144,"user_id":2350423,"accept_rate":58,"display_name":"arieljannai"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1697609645,"creation_date":1528811746,"answer_id":50818990,"question_id":50722271,"body_markdown":"Based on the other answers, I got an idea to create a **static class that will supply the correct *debug string* for the debugger**.\r\n\r\nSo I created such class, which decreases the number of steps needed to configure those data views, and makes it more flexible and comfortable.\r\n\r\n# The steps\r\n\r\n1. Set a constant expression for `Objects` in the debug customized data views. &lt;sup&gt;[*]&lt;/sup&gt;\r\n2. Throw the package/class I made near your code\r\n3. Create `toDebugString()` methods for the relevant data types, and the class will supply it if exists. Otherwise, if `toString()` is overridden, it will use it; and if not, it will use the default `Object.toString()`.\r\n\r\n&lt;sup&gt;[*]&lt;/sup&gt; *This step needs to be done only once, since IntelliJ keeps this in the global settings.*\r\n\r\n# Screenshots\r\n\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n\r\n# How to get it, and more examples\r\nPublicly available on my GitLab - [IntelliJ-CustomDebugDataView][3]\r\n\r\n# Advantages\r\n1. No need to explicitly set a data view for each different data type we&#39;re working with.\r\n2. The data view is the same for all objects and so it&#39;s easy to track and control what you want to see.\r\n3. Minimal change to the code if you want to use it (one method).\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/e8x4o.png\r\n  [2]: https://i.stack.imgur.com/On5iU.png\r\n  [3]: https://gitlab.com/arieljannai/IntelliJ-CustomDebugDataView","title":"IntelliJ change toString for debug mode (variables view)","body":"<p>Based on the other answers, I got an idea to create a <strong>static class that will supply the correct <em>debug string</em> for the debugger</strong>.</p>\n<p>So I created such class, which decreases the number of steps needed to configure those data views, and makes it more flexible and comfortable.</p>\n<h1>The steps</h1>\n<ol>\n<li>Set a constant expression for <code>Objects</code> in the debug customized data views. <sup>[*]</sup></li>\n<li>Throw the package/class I made near your code</li>\n<li>Create <code>toDebugString()</code> methods for the relevant data types, and the class will supply it if exists. Otherwise, if <code>toString()</code> is overridden, it will use it; and if not, it will use the default <code>Object.toString()</code>.</li>\n</ol>\n<p><sup>[*]</sup> <em>This step needs to be done only once, since IntelliJ keeps this in the global settings.</em></p>\n<h1>Screenshots</h1>\n<p><a href=\"https://i.stack.imgur.com/e8x4o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e8x4o.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/On5iU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/On5iU.png\" alt=\"enter image description here\" /></a></p>\n<h1>How to get it, and more examples</h1>\n<p>Publicly available on my GitLab - <a href=\"https://gitlab.com/arieljannai/IntelliJ-CustomDebugDataView\" rel=\"nofollow noreferrer\">IntelliJ-CustomDebugDataView</a></p>\n<h1>Advantages</h1>\n<ol>\n<li>No need to explicitly set a data view for each different data type we're working with.</li>\n<li>The data view is the same for all objects and so it's easy to track and control what you want to see.</li>\n<li>Minimal change to the code if you want to use it (one method).</li>\n</ol>\n"}],"owner":{"account_id":2725121,"reputation":2144,"user_id":2350423,"accept_rate":58,"display_name":"arieljannai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1693,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":50818990,"answer_count":3,"score":6,"last_activity_date":1697609645,"creation_date":1528293357,"question_id":50722271,"body_markdown":"If I overload `toString()`, the debugger in IntelliJ will show me the result from `Object.toString()` near the relevant object in the variables tab.\r\n\r\nIf `toString` is overloaded with: `return &quot;Test1: This is toString overload&quot;;`:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nSometimes, what I want to see in debug isn&#39;t the same as the general `toString` overload. I know it&#39;s possible to set another expression for a specific type/class/etc, but only from the settings.\r\n\r\nIs there a way to (globally) set an arbitrary function name that will take precedence over `toString` when such function exists?\r\n\r\nFor example:&lt;BR&gt;\r\nIf `Object.toDebuggerString()` exists, use it; otherwise, use `Object.toString()`.\r\n\r\n\tclass Test1 {\r\n\t\t@Override\r\n\t\tpublic String toString() {\r\n\t\t\treturn &quot;Test1&quot;;\r\n\t\t}\r\n\t}\r\n\r\n\tclass Test2 {\r\n\t\t@Override\r\n\t\tpublic String toString() {\r\n\t\t\treturn &quot;Test2&quot;;\r\n\t\t}\r\n\r\n\t\tpublic String toDebuggerString() {\r\n\t\t\treturn &quot;Testing debugging mode&quot;;\r\n\t\t}\r\n\t}\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/u62VX.png","title":"IntelliJ change toString for debug mode (variables view)","body":"<p>If I overload <code>toString()</code>, the debugger in IntelliJ will show me the result from <code>Object.toString()</code> near the relevant object in the variables tab.</p>\n<p>If <code>toString</code> is overloaded with: <code>return &quot;Test1: This is toString overload&quot;;</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/u62VX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u62VX.png\" alt=\"enter image description here\" /></a></p>\n<p>Sometimes, what I want to see in debug isn't the same as the general <code>toString</code> overload. I know it's possible to set another expression for a specific type/class/etc, but only from the settings.</p>\n<p>Is there a way to (globally) set an arbitrary function name that will take precedence over <code>toString</code> when such function exists?</p>\n<p>For example:<BR>\nIf <code>Object.toDebuggerString()</code> exists, use it; otherwise, use <code>Object.toString()</code>.</p>\n<pre><code>class Test1 {\n    @Override\n    public String toString() {\n        return &quot;Test1&quot;;\n    }\n}\n\nclass Test2 {\n    @Override\n    public String toString() {\n        return &quot;Test2&quot;;\n    }\n\n    public String toDebuggerString() {\n        return &quot;Testing debugging mode&quot;;\n    }\n}\n</code></pre>\n"},{"tags":["java","sonarqube","sonarqube-scan"],"comments":[{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1578061649,"post_id":59580208,"comment_id":105326716,"body_markdown":"Read the message carefully. What does it mean? Which collection are you using in this method? Is there any way you could know its size in advance?","body":"Read the message carefully. What does it mean? Which collection are you using in this method? Is there any way you could know its size in advance?"}],"answers":[{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1578061675,"creation_date":1578061675,"answer_id":59580294,"question_id":59580208,"body_markdown":"Well, you&#39;re operating on an array of known length and add all elements to the set. Assuming you don&#39;t have any duplicates the resulting set should contain the same number of elements.\r\n\r\nHowever, you&#39;re creating a set with a default initial capacity, i.e. `new HashSet&lt;&gt;()`. That might cause the need for the set to be resized which isn&#39;t a problem in itself but would be unnecessary and thus _could_ cause some performance hit.\r\n\r\nTo get rid of that, create the set via `new HashSet&lt;&gt;(jsonArray.length())` right before iterating.","title":"Method does not presize the allocation of a collection","body":"<p>Well, you're operating on an array of known length and add all elements to the set. Assuming you don't have any duplicates the resulting set should contain the same number of elements.</p>\n\n<p>However, you're creating a set with a default initial capacity, i.e. <code>new HashSet&lt;&gt;()</code>. That might cause the need for the set to be resized which isn't a problem in itself but would be unnecessary and thus <em>could</em> cause some performance hit.</p>\n\n<p>To get rid of that, create the set via <code>new HashSet&lt;&gt;(jsonArray.length())</code> right before iterating.</p>\n"},{"tags":[],"owner":{"account_id":12554188,"reputation":1,"user_id":9134577,"display_name":"Chetan Sengar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697609531,"creation_date":1697609531,"answer_id":77313846,"question_id":59580208,"body_markdown":"Just to bypass the error, we could do the below:\r\n\r\n    private Set&lt;ResponseDTO&gt; mapping(ResponseEntity&lt;String&gt; responseEntity) {\r\n    final JSONObject jsonObject = new JSONObject(responseEntity.getBody());\r\n    final JSONArray jsonArray = jsonObject.optJSONArray(&quot;issues&quot;);\r\n\r\n    int initialCapacity = (int) Math.ceil(jsonArray.length() / 0.75);\r\n    final Set&lt;ResponseDTO&gt; result = new HashSet&lt;&gt;(initialCapacity);\r\n\r\n    for (int i = 0; i &lt; jsonArray.length(); i++) {\r\n        final JSONObject innerObject = jsonArray.getJSONObject(i);\r\n        final String name = innerObject.optString(&quot;key&quot;);\r\n        result.add(new ResponseDTO().name(name));\r\n    }\r\n    return result; }\r\n\r\n\r\n\r\nSince HashSet&#39;s default load factor is 0.75, if we know the expected size, we can calculate the initial capacity as expectedSize / 0.75. However, HashSet&#39;s internal mechanics will ensure the capacity is a power of two. So, if you&#39;re trying to optimize for both space and time, the capacity should be the smallest power of two greater than expectedSize / 0.75.\r\n\r\nThis adjustment should address the SonarQube warning regarding collection allocation.","title":"Method does not presize the allocation of a collection","body":"<p>Just to bypass the error, we could do the below:</p>\n<pre><code>private Set&lt;ResponseDTO&gt; mapping(ResponseEntity&lt;String&gt; responseEntity) {\nfinal JSONObject jsonObject = new JSONObject(responseEntity.getBody());\nfinal JSONArray jsonArray = jsonObject.optJSONArray(&quot;issues&quot;);\n\nint initialCapacity = (int) Math.ceil(jsonArray.length() / 0.75);\nfinal Set&lt;ResponseDTO&gt; result = new HashSet&lt;&gt;(initialCapacity);\n\nfor (int i = 0; i &lt; jsonArray.length(); i++) {\n    final JSONObject innerObject = jsonArray.getJSONObject(i);\n    final String name = innerObject.optString(&quot;key&quot;);\n    result.add(new ResponseDTO().name(name));\n}\nreturn result; }\n</code></pre>\n<p>Since HashSet's default load factor is 0.75, if we know the expected size, we can calculate the initial capacity as expectedSize / 0.75. However, HashSet's internal mechanics will ensure the capacity is a power of two. So, if you're trying to optimize for both space and time, the capacity should be the smallest power of two greater than expectedSize / 0.75.</p>\n<p>This adjustment should address the SonarQube warning regarding collection allocation.</p>\n"}],"owner":{"account_id":6070104,"reputation":1839,"user_id":4739210,"accept_rate":0,"display_name":"Aymen Kanzari"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7416,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59580294,"answer_count":2,"score":1,"last_activity_date":1697609531,"creation_date":1578061397,"question_id":59580208,"body_markdown":"Sonar shows that me this bug `Performance - Method does not presize the allocation of a collection`\r\n\r\n\r\n&gt; Method mapping(ResponseEntity) does not presize the allocation of a\r\n&gt; collection\r\n\r\nHere is the code:\r\n\r\n    private Set&lt;ResponseDTO&gt; mapping(ResponseEntity&lt;String&gt; responseEntity) {\r\n\t\tfinal Set&lt;ResponseDTO&gt; result = new HashSet&lt;&gt;();\r\n\t\tfinal JSONObject jsonObject = new JSONObject(responseEntity.getBody());\r\n\t\tfinal JSONArray jsonArray = jsonObject.optJSONArray(&quot;issues&quot;);\r\n\t\tfor (int i = 0; i &lt; jsonArray.length(); i++) {\r\n\t\t\tfinal JSONObject innerObject = jsonArray.getJSONObject(i);\r\n\t\t\tfinal String name = innerObject.optString(&quot;key&quot;);\r\n\t\t\tresult.add(new ResponseDTO().name(name));\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\nWhy does Sonar flag this as an error and how can I fix it ?","title":"Method does not presize the allocation of a collection","body":"<p>Sonar shows that me this bug <code>Performance - Method does not presize the allocation of a collection</code></p>\n\n<blockquote>\n  <p>Method mapping(ResponseEntity) does not presize the allocation of a\n  collection</p>\n</blockquote>\n\n<p>Here is the code:</p>\n\n<pre><code>private Set&lt;ResponseDTO&gt; mapping(ResponseEntity&lt;String&gt; responseEntity) {\n    final Set&lt;ResponseDTO&gt; result = new HashSet&lt;&gt;();\n    final JSONObject jsonObject = new JSONObject(responseEntity.getBody());\n    final JSONArray jsonArray = jsonObject.optJSONArray(\"issues\");\n    for (int i = 0; i &lt; jsonArray.length(); i++) {\n        final JSONObject innerObject = jsonArray.getJSONObject(i);\n        final String name = innerObject.optString(\"key\");\n        result.add(new ResponseDTO().name(name));\n    }\n    return result;\n}\n</code></pre>\n\n<p>Why does Sonar flag this as an error and how can I fix it ?</p>\n"},{"tags":["java","spring-boot","oauth-2.0","keycloak"],"answers":[{"comments":[{"owner":{"account_id":393856,"reputation":11926,"user_id":755932,"accept_rate":67,"display_name":"K. Siva Prasad Reddy"},"score":0,"creation_date":1632666070,"post_id":69332133,"comment_id":122549075,"body_markdown":"My application is a OAuth2 Client not a Resource Server. Spring-addons project looks very interesting, will take a look at it. Thanks @WimDeblauwe for sharing your thoughts.","body":"My application is a OAuth2 Client not a Resource Server. Spring-addons project looks very interesting, will take a look at it. Thanks @WimDeblauwe for sharing your thoughts."}],"tags":[],"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1632634333,"creation_date":1632634333,"answer_id":69332133,"question_id":69331013,"body_markdown":"I use this configuration:\r\n\r\n```\r\nimport org.springframework.boot.autoconfigure.security.servlet.PathRequest;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.core.convert.converter.Converter;\r\nimport org.springframework.http.HttpMethod;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.config.BeanIds;\r\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.oauth2.jwt.Jwt;\r\nimport org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationConverter;\r\n\r\nimport java.util.Collection;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.stream.Collectors;\r\n\r\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\r\npublic class WebSecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        // We can safely disable CSRF protection on the REST API because we do not rely on cookies (https://security.stackexchange.com/questions/166724/should-i-use-csrf-protection-on-rest-api-endpoints)\r\n        http.csrf(httpSecurityCsrfConfigurer -&gt; httpSecurityCsrfConfigurer.ignoringAntMatchers(&quot;/api/**&quot;));\r\n        http.cors();\r\n        http.authorizeRequests(registry -&gt; {\r\n            registry.mvcMatchers(&quot;/api-docs/**&quot;, &quot;/architecture-docs/**&quot;).permitAll();\r\n            registry.mvcMatchers(&quot;/api/integrationtest/**&quot;).permitAll();\r\n            registry.requestMatchers(PathRequest.toStaticResources().atCommonLocations()).permitAll();\r\n            registry.mvcMatchers(&quot;/actuator/info&quot;, &quot;/actuator/health&quot;).permitAll();\r\n            registry.anyRequest().authenticated();\r\n        });\r\n        http.oauth2ResourceServer()\r\n            .jwt()\r\n            .jwtAuthenticationConverter(jwtAuthenticationConverter());\r\n    }\r\n\r\n    @Bean(name = BeanIds.AUTHENTICATION_MANAGER)\r\n    public AuthenticationManager authenticationManagerBean() throws Exception {\r\n        // Although this seems like useless code,\r\n        // it is required to prevent Spring Boot creating a default password\r\n        return super.authenticationManagerBean();\r\n    }\r\n\r\n    @Bean\r\n    public JwtAuthenticationConverter jwtAuthenticationConverter() {\r\n        JwtAuthenticationConverter converter = new JwtAuthenticationConverter();\r\n        converter.setJwtGrantedAuthoritiesConverter(jwtToAuthorityConverter());\r\n        return converter;\r\n    }\r\n\r\n    @Bean\r\n    public Converter&lt;Jwt, Collection&lt;GrantedAuthority&gt;&gt; jwtToAuthorityConverter() {\r\n        return new Converter&lt;Jwt, Collection&lt;GrantedAuthority&gt;&gt;() {\r\n            @Override\r\n            public List&lt;GrantedAuthority&gt; convert(Jwt jwt) {\r\n                Map&lt;String, Object&gt; realmAccess = jwt.getClaimAsMap(&quot;realm_access&quot;);\r\n                if (realmAccess != null) {\r\n                    @SuppressWarnings(&quot;unchecked&quot;)\r\n                    List&lt;String&gt; roles = (List&lt;String&gt;) realmAccess.get(&quot;roles&quot;);\r\n                    if (roles != null) {\r\n                        return roles.stream()\r\n                                    .map(rn -&gt; new SimpleGrantedAuthority(&quot;ROLE_&quot; + rn))\r\n                                    .collect(Collectors.toList());\r\n                    }\r\n                }\r\n\r\n                return Collections.emptyList();\r\n            }\r\n        };\r\n    }\r\n}\r\n```\r\n\r\nWith these dependencies:\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nAnd this property:\r\n\r\n```\r\nspring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8181/auth/realms/myrealm\r\n```\r\n\r\nExtra tip: Use https://github.com/ch4mpy/spring-addons for testing. You can also take a look there at a configuration sample (which is different from what I do, but should work fine as well, see https://github.com/ch4mpy/spring-addons/issues/27 for more info about those differences): https://github.com/ch4mpy/starter/tree/master/api/webmvc/common-security-webmvc/src/main/java/com/c4_soft/commons/security","title":"SpringBoot OAuth2 with Keycloak not returning mapped Roles as Authorities","body":"<p>I use this configuration:</p>\n<pre><code>import org.springframework.boot.autoconfigure.security.servlet.PathRequest;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.core.convert.converter.Converter;\nimport org.springframework.http.HttpMethod;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.BeanIds;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.oauth2.jwt.Jwt;\nimport org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationConverter;\n\nimport java.util.Collection;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\npublic class WebSecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        // We can safely disable CSRF protection on the REST API because we do not rely on cookies (https://security.stackexchange.com/questions/166724/should-i-use-csrf-protection-on-rest-api-endpoints)\n        http.csrf(httpSecurityCsrfConfigurer -&gt; httpSecurityCsrfConfigurer.ignoringAntMatchers(&quot;/api/**&quot;));\n        http.cors();\n        http.authorizeRequests(registry -&gt; {\n            registry.mvcMatchers(&quot;/api-docs/**&quot;, &quot;/architecture-docs/**&quot;).permitAll();\n            registry.mvcMatchers(&quot;/api/integrationtest/**&quot;).permitAll();\n            registry.requestMatchers(PathRequest.toStaticResources().atCommonLocations()).permitAll();\n            registry.mvcMatchers(&quot;/actuator/info&quot;, &quot;/actuator/health&quot;).permitAll();\n            registry.anyRequest().authenticated();\n        });\n        http.oauth2ResourceServer()\n            .jwt()\n            .jwtAuthenticationConverter(jwtAuthenticationConverter());\n    }\n\n    @Bean(name = BeanIds.AUTHENTICATION_MANAGER)\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        // Although this seems like useless code,\n        // it is required to prevent Spring Boot creating a default password\n        return super.authenticationManagerBean();\n    }\n\n    @Bean\n    public JwtAuthenticationConverter jwtAuthenticationConverter() {\n        JwtAuthenticationConverter converter = new JwtAuthenticationConverter();\n        converter.setJwtGrantedAuthoritiesConverter(jwtToAuthorityConverter());\n        return converter;\n    }\n\n    @Bean\n    public Converter&lt;Jwt, Collection&lt;GrantedAuthority&gt;&gt; jwtToAuthorityConverter() {\n        return new Converter&lt;Jwt, Collection&lt;GrantedAuthority&gt;&gt;() {\n            @Override\n            public List&lt;GrantedAuthority&gt; convert(Jwt jwt) {\n                Map&lt;String, Object&gt; realmAccess = jwt.getClaimAsMap(&quot;realm_access&quot;);\n                if (realmAccess != null) {\n                    @SuppressWarnings(&quot;unchecked&quot;)\n                    List&lt;String&gt; roles = (List&lt;String&gt;) realmAccess.get(&quot;roles&quot;);\n                    if (roles != null) {\n                        return roles.stream()\n                                    .map(rn -&gt; new SimpleGrantedAuthority(&quot;ROLE_&quot; + rn))\n                                    .collect(Collectors.toList());\n                    }\n                }\n\n                return Collections.emptyList();\n            }\n        };\n    }\n}\n</code></pre>\n<p>With these dependencies:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>And this property:</p>\n<pre><code>spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8181/auth/realms/myrealm\n</code></pre>\n<p>Extra tip: Use <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">https://github.com/ch4mpy/spring-addons</a> for testing. You can also take a look there at a configuration sample (which is different from what I do, but should work fine as well, see <a href=\"https://github.com/ch4mpy/spring-addons/issues/27\" rel=\"nofollow noreferrer\">https://github.com/ch4mpy/spring-addons/issues/27</a> for more info about those differences): <a href=\"https://github.com/ch4mpy/starter/tree/master/api/webmvc/common-security-webmvc/src/main/java/com/c4_soft/commons/security\" rel=\"nofollow noreferrer\">https://github.com/ch4mpy/starter/tree/master/api/webmvc/common-security-webmvc/src/main/java/com/c4_soft/commons/security</a></p>\n"},{"comments":[{"owner":{"account_id":393856,"reputation":11926,"user_id":755932,"accept_rate":67,"display_name":"K. Siva Prasad Reddy"},"score":0,"creation_date":1632665943,"post_id":69333676,"comment_id":122549046,"body_markdown":"My application is a OAuth Client and following your approach worked well for me. Thanks a lot.","body":"My application is a OAuth Client and following your approach worked well for me. Thanks a lot."},{"owner":{"account_id":1425338,"reputation":241,"user_id":1349021,"display_name":"sn1987a"},"score":0,"creation_date":1668135011,"post_id":69333676,"comment_id":131338069,"body_markdown":"If the &quot;Oauth client&quot; is used, the ID token will be used to check for roles. That&#39;s why when configure keycloak to map realm roles, make sure to uncheck &quot;Add to ID token&quot; and check it again. On my keycloak 19, even the &quot;Add to ID token&quot; is check by default, the roles has not mapped.","body":"If the &quot;Oauth client&quot; is used, the ID token will be used to check for roles. That&#39;s why when configure keycloak to map realm roles, make sure to uncheck &quot;Add to ID token&quot; and check it again. On my keycloak 19, even the &quot;Add to ID token&quot; is check by default, the roles has not mapped."},{"owner":{"account_id":268922,"reputation":113,"user_id":557968,"display_name":"sarath"},"score":3,"creation_date":1689068115,"post_id":69333676,"comment_id":135157355,"body_markdown":"You saved my day brother, thank you.","body":"You saved my day brother, thank you."}],"tags":[],"owner":{"account_id":12111866,"reputation":1698,"user_id":8848246,"display_name":"Thomas Vitale"},"comment_count":3,"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1632649674,"creation_date":1632649674,"answer_id":69333676,"question_id":69331013,"body_markdown":"By default, Spring Security generates a list of `GrantedAuthority` using the values in the `scope` or `scp` claim and the `SCOPE_` prefix.\r\n\r\nKeycloak keeps the realm roles in a nested claim `realm_access.roles`. You have two options to extract the roles and map them to a list of `GrantedAuthority`.\r\n\r\n**OAuth2 Client**\r\n\r\nIf your application is configured as an OAuth2 Client, then you can extract the roles from either the ID Token or the UserInfo endpoint. Keycloak includes the roles only in the Access Token, so you need to change the configuration to include them also in either the ID Token or the UserInfo endpoint (which is what I use in the following example). You can do so from the Keycloak Admin Console, going to `Client Scopes &gt; roles &gt; Mappers &gt; realm roles`\r\n\r\n[![Realm roles configuration][1]][1]\r\n\r\nThen, in your Spring Security configuration, define a `GrantedAuthoritiesMapper` which extracts the roles from the UserInfo endpoint and maps them to `GrantedAuthority`s. Here, I&#39;ll include how the specific bean should look like. A full example is available on my GitHub: https://github.com/ThomasVitale/spring-security-examples/tree/main/oauth2/login-user-authorities\r\n\r\n    @Bean\r\n    public GrantedAuthoritiesMapper userAuthoritiesMapperForKeycloak() {\r\n    \t\treturn authorities -&gt; {\r\n    \t\t\tSet&lt;GrantedAuthority&gt; mappedAuthorities = new HashSet&lt;&gt;();\r\n    \t\t\tvar authority = authorities.iterator().next();\r\n    \t\t\tboolean isOidc = authority instanceof OidcUserAuthority;\r\n    \r\n    \t\t\tif (isOidc) {\r\n    \t\t\t\tvar oidcUserAuthority = (OidcUserAuthority) authority;\r\n    \t\t\t\tvar userInfo = oidcUserAuthority.getUserInfo();\r\n    \r\n    \t\t\t\tif (userInfo.hasClaim(&quot;realm_access&quot;)) {\r\n    \t\t\t\t\tvar realmAccess = userInfo.getClaimAsMap(&quot;realm_access&quot;);\r\n    \t\t\t\t\tvar roles = (Collection&lt;String&gt;) realmAccess.get(&quot;roles&quot;);\r\n    \t\t\t\t\tmappedAuthorities.addAll(generateAuthoritiesFromClaim(roles));\r\n    \t\t\t\t}\r\n    \t\t\t} else {\r\n    \t\t\t\tvar oauth2UserAuthority = (OAuth2UserAuthority) authority;\r\n    \t\t\t\tMap&lt;String, Object&gt; userAttributes = oauth2UserAuthority.getAttributes();\r\n    \r\n    \t\t\t\tif (userAttributes.containsKey(&quot;realm_access&quot;)) {\r\n    \t\t\t\t\tvar realmAccess =  (Map&lt;String,Object&gt;) userAttributes.get(&quot;realm_access&quot;);\r\n    \t\t\t\t\tvar roles =  (Collection&lt;String&gt;) realmAccess.get(&quot;roles&quot;);\r\n    \t\t\t\t\tmappedAuthorities.addAll(generateAuthoritiesFromClaim(roles));\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t\treturn mappedAuthorities;\r\n    \t\t};\r\n    \t}\r\n    \r\n    Collection&lt;GrantedAuthority&gt; generateAuthoritiesFromClaim(Collection&lt;String&gt; roles) {\r\n    \t\treturn roles.stream()\r\n    \t\t\t\t.map(role -&gt; new SimpleGrantedAuthority(&quot;ROLE_&quot; + role))\r\n    \t\t\t\t.collect(Collectors.toList());\r\n    }\r\n\r\n**OAuth2 Resource Server**\r\n\r\nIf your application is configured as an OAuth2 Resource Server, then you can extract the roles from the Access Token. In your Spring Security configuration, define a `JwtAuthenticationConverter` bean which extracts the roles from the Access Token and maps them to `GrantedAuthority`s. Here, I&#39;ll include how the specific bean should look like. A full example is available on my GitHub: https://github.com/ThomasVitale/spring-security-examples/tree/main/oauth2/resource-server-jwt-authorities\r\n\r\n    public JwtAuthenticationConverter jwtAuthenticationConverterForKeycloak() {\r\n        Converter&lt;Jwt, Collection&lt;GrantedAuthority&gt;&gt; jwtGrantedAuthoritiesConverter = jwt -&gt; {\r\n            Map&lt;String, Collection&lt;String&gt;&gt; realmAccess = jwt.getClaim(&quot;realm_access&quot;);\r\n            Collection&lt;String&gt; roles = realmAccess.get(&quot;roles&quot;);\r\n            return roles.stream()\r\n                .map(role -&gt; new SimpleGrantedAuthority(&quot;ROLE_&quot; + role))\r\n                .collect(Collectors.toList());\r\n        };\r\n    \r\n        var jwtAuthenticationConverter = new JwtAuthenticationConverter();\r\n        jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter);\r\n    \r\n        return jwtAuthenticationConverter;\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/j1dXj.png","title":"SpringBoot OAuth2 with Keycloak not returning mapped Roles as Authorities","body":"<p>By default, Spring Security generates a list of <code>GrantedAuthority</code> using the values in the <code>scope</code> or <code>scp</code> claim and the <code>SCOPE_</code> prefix.</p>\n<p>Keycloak keeps the realm roles in a nested claim <code>realm_access.roles</code>. You have two options to extract the roles and map them to a list of <code>GrantedAuthority</code>.</p>\n<p><strong>OAuth2 Client</strong></p>\n<p>If your application is configured as an OAuth2 Client, then you can extract the roles from either the ID Token or the UserInfo endpoint. Keycloak includes the roles only in the Access Token, so you need to change the configuration to include them also in either the ID Token or the UserInfo endpoint (which is what I use in the following example). You can do so from the Keycloak Admin Console, going to <code>Client Scopes &gt; roles &gt; Mappers &gt; realm roles</code></p>\n<p><a href=\"https://i.stack.imgur.com/j1dXj.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/j1dXj.png\" alt=\"Realm roles configuration\" /></a></p>\n<p>Then, in your Spring Security configuration, define a <code>GrantedAuthoritiesMapper</code> which extracts the roles from the UserInfo endpoint and maps them to <code>GrantedAuthority</code>s. Here, I'll include how the specific bean should look like. A full example is available on my GitHub: <a href=\"https://github.com/ThomasVitale/spring-security-examples/tree/main/oauth2/login-user-authorities\" rel=\"noreferrer\">https://github.com/ThomasVitale/spring-security-examples/tree/main/oauth2/login-user-authorities</a></p>\n<pre><code>@Bean\npublic GrantedAuthoritiesMapper userAuthoritiesMapperForKeycloak() {\n        return authorities -&gt; {\n            Set&lt;GrantedAuthority&gt; mappedAuthorities = new HashSet&lt;&gt;();\n            var authority = authorities.iterator().next();\n            boolean isOidc = authority instanceof OidcUserAuthority;\n\n            if (isOidc) {\n                var oidcUserAuthority = (OidcUserAuthority) authority;\n                var userInfo = oidcUserAuthority.getUserInfo();\n\n                if (userInfo.hasClaim(&quot;realm_access&quot;)) {\n                    var realmAccess = userInfo.getClaimAsMap(&quot;realm_access&quot;);\n                    var roles = (Collection&lt;String&gt;) realmAccess.get(&quot;roles&quot;);\n                    mappedAuthorities.addAll(generateAuthoritiesFromClaim(roles));\n                }\n            } else {\n                var oauth2UserAuthority = (OAuth2UserAuthority) authority;\n                Map&lt;String, Object&gt; userAttributes = oauth2UserAuthority.getAttributes();\n\n                if (userAttributes.containsKey(&quot;realm_access&quot;)) {\n                    var realmAccess =  (Map&lt;String,Object&gt;) userAttributes.get(&quot;realm_access&quot;);\n                    var roles =  (Collection&lt;String&gt;) realmAccess.get(&quot;roles&quot;);\n                    mappedAuthorities.addAll(generateAuthoritiesFromClaim(roles));\n                }\n            }\n\n            return mappedAuthorities;\n        };\n    }\n\nCollection&lt;GrantedAuthority&gt; generateAuthoritiesFromClaim(Collection&lt;String&gt; roles) {\n        return roles.stream()\n                .map(role -&gt; new SimpleGrantedAuthority(&quot;ROLE_&quot; + role))\n                .collect(Collectors.toList());\n}\n</code></pre>\n<p><strong>OAuth2 Resource Server</strong></p>\n<p>If your application is configured as an OAuth2 Resource Server, then you can extract the roles from the Access Token. In your Spring Security configuration, define a <code>JwtAuthenticationConverter</code> bean which extracts the roles from the Access Token and maps them to <code>GrantedAuthority</code>s. Here, I'll include how the specific bean should look like. A full example is available on my GitHub: <a href=\"https://github.com/ThomasVitale/spring-security-examples/tree/main/oauth2/resource-server-jwt-authorities\" rel=\"noreferrer\">https://github.com/ThomasVitale/spring-security-examples/tree/main/oauth2/resource-server-jwt-authorities</a></p>\n<pre><code>public JwtAuthenticationConverter jwtAuthenticationConverterForKeycloak() {\n    Converter&lt;Jwt, Collection&lt;GrantedAuthority&gt;&gt; jwtGrantedAuthoritiesConverter = jwt -&gt; {\n        Map&lt;String, Collection&lt;String&gt;&gt; realmAccess = jwt.getClaim(&quot;realm_access&quot;);\n        Collection&lt;String&gt; roles = realmAccess.get(&quot;roles&quot;);\n        return roles.stream()\n            .map(role -&gt; new SimpleGrantedAuthority(&quot;ROLE_&quot; + role))\n            .collect(Collectors.toList());\n    };\n\n    var jwtAuthenticationConverter = new JwtAuthenticationConverter();\n    jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter);\n\n    return jwtAuthenticationConverter;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5581710,"reputation":633,"user_id":4423409,"display_name":"O. Schnieders"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697609319,"creation_date":1697609319,"answer_id":77313834,"question_id":69331013,"body_markdown":"You have another option if you do not want to customize Spring that much. According to the [Spring documentation][1], you can change authority claim name and prefix.\r\n\r\n```\r\n    @Bean\r\n    public JwtAuthenticationConverter jwtAuthenticationConverter() {\r\n        JwtGrantedAuthoritiesConverter grantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\r\n        grantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;roles&quot;);\r\n        grantedAuthoritiesConverter.setAuthorityPrefix(&quot;ROLE_&quot;);\r\n\r\n        JwtAuthenticationConverter jwtAuthenticationConverter = new JwtAuthenticationConverter();\r\n        jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(grantedAuthoritiesConverter);\r\n        return jwtAuthenticationConverter;\r\n    }\r\n```\r\n\r\nWith that, Spring expects the roles as a top level claim. To do so, you have to add client specific mapper on the Keycloak client, so that the realm roles will be sent additional on top level.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nIn my case, I added the mapper as a client specific one. But you should be able to set this as a default for a realm.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html#oauth2resourceserver-jwt-authorization-extraction\r\n  [2]: https://i.stack.imgur.com/yvD37.png","title":"SpringBoot OAuth2 with Keycloak not returning mapped Roles as Authorities","body":"<p>You have another option if you do not want to customize Spring that much. According to the <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html#oauth2resourceserver-jwt-authorization-extraction\" rel=\"nofollow noreferrer\">Spring documentation</a>, you can change authority claim name and prefix.</p>\n<pre><code>    @Bean\n    public JwtAuthenticationConverter jwtAuthenticationConverter() {\n        JwtGrantedAuthoritiesConverter grantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\n        grantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;roles&quot;);\n        grantedAuthoritiesConverter.setAuthorityPrefix(&quot;ROLE_&quot;);\n\n        JwtAuthenticationConverter jwtAuthenticationConverter = new JwtAuthenticationConverter();\n        jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(grantedAuthoritiesConverter);\n        return jwtAuthenticationConverter;\n    }\n</code></pre>\n<p>With that, Spring expects the roles as a top level claim. To do so, you have to add client specific mapper on the Keycloak client, so that the realm roles will be sent additional on top level.</p>\n<p><a href=\"https://i.stack.imgur.com/yvD37.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yvD37.png\" alt=\"enter image description here\" /></a></p>\n<p>In my case, I added the mapper as a client specific one. But you should be able to set this as a default for a realm.</p>\n"}],"owner":{"account_id":393856,"reputation":11926,"user_id":755932,"accept_rate":67,"display_name":"K. Siva Prasad Reddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9071,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":69333676,"answer_count":3,"score":10,"last_activity_date":1697609319,"creation_date":1632616722,"question_id":69331013,"body_markdown":"I am creating a simple SpringBoot application and trying to integrate with OAuth 2.0 provider Keycloak. I have created a realm, client, roles (Member, PremiumMember) at realm level and finally created users and assigned roles (Member, PremiumMember).\r\n\r\nIf I use SpringBoot Adapter provided by Keycloak https://www.keycloak.org/docs/latest/securing_apps/index.html#_spring_boot_adapter then when I successfully login and check the Authorities of the loggedin user I am able to see the assigned roles such as Member, PremiumMember.\r\n\r\n```java\r\nCollection&lt;? extends GrantedAuthority&gt; authorities = \r\n SecurityContextHolder.getContext().getAuthentication().getAuthorities();\r\n```\r\n\r\nBut if I use generic SpringBoot Auth2 Client Config I am able to login but when I check the Authorities it always show only **ROLE_USER, SCOPE_email,SCOPE_openid,SCOPE_profile**  and didn&#39;t include the roles I mapped (Member, PremiumMember).\r\n\r\nMy SpringBoot OAuth2 config:\r\n\r\n**pom.xml**\r\n\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n**application.properties**\r\n\r\n```\r\nspring.security.oauth2.client.provider.spring-boot-thymeleaf-client.issuer-uri=http://localhost:8181/auth/realms/myrealm\r\n\r\nspring.security.oauth2.client.registration.spring-boot-thymeleaf-client.authorization-grant-type=authorization_code\r\nspring.security.oauth2.client.registration.spring-boot-thymeleaf-client.client-id=spring-boot-app\r\nspring.security.oauth2.client.registration.spring-boot-thymeleaf-client.client-secret=XXXXXXXXXXXXXX\r\nspring.security.oauth2.client.registration.spring-boot-thymeleaf-client.scope=openid,profile,roles\r\nspring.security.oauth2.client.registration.spring-boot-thymeleaf-client.redirect-uri=http://localhost:8080/login/oauth2/code/spring-boot-app\r\n```\r\n\r\nI am using **SpringBoot 2.5.5** and **Keycloak 15.0.2**.\r\n\r\nUsing this generic OAuth2.0 config approach (without using Keycloak SpringBootAdapter) is there a way to get the assigned roles?\r\n\r\n","title":"SpringBoot OAuth2 with Keycloak not returning mapped Roles as Authorities","body":"<p>I am creating a simple SpringBoot application and trying to integrate with OAuth 2.0 provider Keycloak. I have created a realm, client, roles (Member, PremiumMember) at realm level and finally created users and assigned roles (Member, PremiumMember).</p>\n<p>If I use SpringBoot Adapter provided by Keycloak <a href=\"https://www.keycloak.org/docs/latest/securing_apps/index.html#_spring_boot_adapter\" rel=\"noreferrer\">https://www.keycloak.org/docs/latest/securing_apps/index.html#_spring_boot_adapter</a> then when I successfully login and check the Authorities of the loggedin user I am able to see the assigned roles such as Member, PremiumMember.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Collection&lt;? extends GrantedAuthority&gt; authorities = \n SecurityContextHolder.getContext().getAuthentication().getAuthorities();\n</code></pre>\n<p>But if I use generic SpringBoot Auth2 Client Config I am able to login but when I check the Authorities it always show only <strong>ROLE_USER, SCOPE_email,SCOPE_openid,SCOPE_profile</strong>  and didn't include the roles I mapped (Member, PremiumMember).</p>\n<p>My SpringBoot OAuth2 config:</p>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>spring.security.oauth2.client.provider.spring-boot-thymeleaf-client.issuer-uri=http://localhost:8181/auth/realms/myrealm\n\nspring.security.oauth2.client.registration.spring-boot-thymeleaf-client.authorization-grant-type=authorization_code\nspring.security.oauth2.client.registration.spring-boot-thymeleaf-client.client-id=spring-boot-app\nspring.security.oauth2.client.registration.spring-boot-thymeleaf-client.client-secret=XXXXXXXXXXXXXX\nspring.security.oauth2.client.registration.spring-boot-thymeleaf-client.scope=openid,profile,roles\nspring.security.oauth2.client.registration.spring-boot-thymeleaf-client.redirect-uri=http://localhost:8080/login/oauth2/code/spring-boot-app\n</code></pre>\n<p>I am using <strong>SpringBoot 2.5.5</strong> and <strong>Keycloak 15.0.2</strong>.</p>\n<p>Using this generic OAuth2.0 config approach (without using Keycloak SpringBootAdapter) is there a way to get the assigned roles?</p>\n"},{"tags":["java","android","android-studio","debugging"],"comments":[{"owner":{"account_id":1497191,"reputation":9670,"user_id":1402846,"accept_rate":90,"display_name":"Pang"},"score":0,"creation_date":1697610030,"post_id":46487342,"comment_id":136299726,"body_markdown":"This may be helpful: https://stackoverflow.com/questions/50722271/intellij-change-tostring-for-debug-mode-variables-view","body":"This may be helpful: <a href=\"https://stackoverflow.com/questions/50722271/intellij-change-tostring-for-debug-mode-variables-view\" title=\"intellij change tostring for debug mode variables view\">stackoverflow.com/questions/50722271/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":11065126,"reputation":157,"user_id":8125165,"display_name":"cjerik"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1697609279,"creation_date":1506685829,"answer_id":46488217,"question_id":46487342,"body_markdown":"When you debug, change `toString()` like the following, and then you can change it back to whatever you like afterwards!  \r\n\r\n    public class Foo {\r\n\r\n        private int debugInfo;\r\n\r\n        /* some code */\r\n\r\n        @Override\r\n        public String toString() {\r\n            return debugInfo;\r\n        }\r\n    }","title":"Display custom string in debugger variables","body":"<p>When you debug, change <code>toString()</code> like the following, and then you can change it back to whatever you like afterwards!</p>\n<pre><code>public class Foo {\n\n    private int debugInfo;\n\n    /* some code */\n\n    @Override\n    public String toString() {\n        return debugInfo;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1909497,"reputation":7762,"user_id":1723695,"accept_rate":78,"display_name":"Kirill"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1697609279,"creation_date":1506682421,"question_id":46487342,"body_markdown":"I have a class with an overridden `toString()` method. It looks like this:\r\n\r\n    public class Foo {\r\n    \r\n    \tprivate int debugInfo;\r\n    \r\n        /* some code */\r\n\r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;some-string&quot;;\r\n    \t}\r\n    }\r\n\r\nIn debug tab in Android Studio, in &#39;Variables&#39;, it&#39;s represented as text from `toString`:\r\n[![debugger view][1]][1]\r\n\r\nIs it possible to have a custom message for the debugger to display in &#39;Variables&#39;? I want to see the `debugInfo` field value instead of the output from `toString`, without having to click on the &#39;expand&#39; arrow.\r\n\r\nI know an analog exists in C# - it is the [`[DebuggerDisplay]` attribute][2]:\r\n\r\n    [DebuggerDisplay(&quot;info = {debugInfo}&quot;)]\r\n    public class Foo \r\n    { \r\n    \tprivate int debugInfo;\r\n    }\r\n\r\nIs there something similar for Java/Android?\r\n\r\n  [1]: https://i.stack.imgur.com/I3Qfb.png\r\n  [2]: https://learn.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2015/debugger/using-the-debuggerdisplay-attribute","title":"Display custom string in debugger variables","body":"<p>I have a class with an overridden <code>toString()</code> method. It looks like this:</p>\n<pre><code>public class Foo {\n\n    private int debugInfo;\n\n    /* some code */\n\n    @Override\n    public String toString() {\n        return &quot;some-string&quot;;\n    }\n}\n</code></pre>\n<p>In debug tab in Android Studio, in 'Variables', it's represented as text from <code>toString</code>:\n<a href=\"https://i.stack.imgur.com/I3Qfb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I3Qfb.png\" alt=\"debugger view\" /></a></p>\n<p>Is it possible to have a custom message for the debugger to display in 'Variables'? I want to see the <code>debugInfo</code> field value instead of the output from <code>toString</code>, without having to click on the 'expand' arrow.</p>\n<p>I know an analog exists in C# - it is the <a href=\"https://learn.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2015/debugger/using-the-debuggerdisplay-attribute\" rel=\"nofollow noreferrer\"><code>[DebuggerDisplay]</code> attribute</a>:</p>\n<pre><code>[DebuggerDisplay(&quot;info = {debugInfo}&quot;)]\npublic class Foo \n{ \n    private int debugInfo;\n}\n</code></pre>\n<p>Is there something similar for Java/Android?</p>\n"},{"tags":["java","mockito","resttemplate"],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697609278,"creation_date":1697609278,"answer_id":77313830,"question_id":77312192,"body_markdown":"If you haven&#39;t mocked an instance, you cannot call `when` with it. `when` is reserved for mock objects or spies.\r\n\r\nThe line `Mockito.when(restTemplate.postForEntity(anyString(), any(), any(Class.class)))` calls the real `postForEntity` method with parameters `anyString(), any(), any(Class.class)`, which is really just `&quot;&quot;, null, null`:\r\n\r\n[`ArgumentMatchers#anyString`](https://github.com/mockito/mockito/blob/main/src/main/java/org/mockito/ArgumentMatchers.java#L392):\r\n\r\n```\r\npublic static String anyString() {\r\n    reportMatcher(new InstanceOf(String.class, &quot;&lt;any string&gt;&quot;));\r\n    return &quot;&quot;;\r\n}\r\n```\r\n\r\n[`#any`](https://github.com/mockito/mockito/blob/main/src/main/java/org/mockito/ArgumentMatchers.java#L140):\r\n\r\n```\r\npublic static &lt;T&gt; T any() {\r\n    reportMatcher(Any.ANY);\r\n    return null;\r\n}\r\n```\r\n\r\nThe empty string `&quot;&quot;` obviously isn&#39;t an absolute URI.\r\n\r\nIf you want to test a class, you must not mock it; otherwise you would only be testing the mock object/mock behavior and not your real class.\r\n\r\nThat said, I think it is fair to assume that `RestTemplate` has already been thoroughly tested by the framework authors – why do you want to test if it detects/triggers timeouts correctly? That should already be covered by the tests for `RestTemplate`.\r\n\r\nIf, however, you want to test if your application code handles timeouts of `RestTemplate` correctly, then by all means create a mock instance of `RestTemplate`, set it up to behave like it timeouted, and verify that your own code handles the timeout of the template correctly.","title":"Why is my unit test failing with &quot;URI is not absolute&quot; when I try to mock RestTemplate.postForEntity()?","body":"<p>If you haven't mocked an instance, you cannot call <code>when</code> with it. <code>when</code> is reserved for mock objects or spies.</p>\n<p>The line <code>Mockito.when(restTemplate.postForEntity(anyString(), any(), any(Class.class)))</code> calls the real <code>postForEntity</code> method with parameters <code>anyString(), any(), any(Class.class)</code>, which is really just <code>&quot;&quot;, null, null</code>:</p>\n<p><a href=\"https://github.com/mockito/mockito/blob/main/src/main/java/org/mockito/ArgumentMatchers.java#L392\" rel=\"nofollow noreferrer\"><code>ArgumentMatchers#anyString</code></a>:</p>\n<pre><code>public static String anyString() {\n    reportMatcher(new InstanceOf(String.class, &quot;&lt;any string&gt;&quot;));\n    return &quot;&quot;;\n}\n</code></pre>\n<p><a href=\"https://github.com/mockito/mockito/blob/main/src/main/java/org/mockito/ArgumentMatchers.java#L140\" rel=\"nofollow noreferrer\"><code>#any</code></a>:</p>\n<pre><code>public static &lt;T&gt; T any() {\n    reportMatcher(Any.ANY);\n    return null;\n}\n</code></pre>\n<p>The empty string <code>&quot;&quot;</code> obviously isn't an absolute URI.</p>\n<p>If you want to test a class, you must not mock it; otherwise you would only be testing the mock object/mock behavior and not your real class.</p>\n<p>That said, I think it is fair to assume that <code>RestTemplate</code> has already been thoroughly tested by the framework authors – why do you want to test if it detects/triggers timeouts correctly? That should already be covered by the tests for <code>RestTemplate</code>.</p>\n<p>If, however, you want to test if your application code handles timeouts of <code>RestTemplate</code> correctly, then by all means create a mock instance of <code>RestTemplate</code>, set it up to behave like it timeouted, and verify that your own code handles the timeout of the template correctly.</p>\n"}],"owner":{"account_id":29607724,"reputation":3,"user_id":22691744,"display_name":"Shi Lilian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77313830,"answer_count":1,"score":0,"last_activity_date":1697609278,"creation_date":1697575890,"question_id":77312192,"body_markdown":"I want to mock the postForEntity method of a RestTemplate instance variable belonging to one of my classes, but it keeps failing with a &quot;URI is not absolute&quot; error despite my seeing anyString() being passed in as the URI in other examples. Something that should be noted is that I did not @Mock my RestTemplate, because I want to test if it&#39;s been correctly built by the constructor of its parent class (namely the timeout). \r\n\r\nI can&#39;t post actual code but the class I&#39;m testing looks something like this:\r\n````\r\npublic class MyClient {\r\n    ...\r\n    @Getter\r\n    @Setter\r\n    private RestTemplate restTemplate = new RestTemplate();\r\n\r\n    public MyClient(Property x, Property y, Property z){\r\n        this.x = x; \r\n        this.y = y;\r\n        this.z = z; \r\n    }\r\n\r\n    //New constructor that I want to test \r\n    public MyClient(Property x, Property y, Property z, int timeout){\r\n        this(x, y, z);\r\n        this.restTemplate =((SimpleClientHttpRequestFactory)getRestTemplate().getRequestFactory()).setReadTimeout(timeout);\r\n    }\r\n    \r\n    public makeRequests() {\r\n        ...\r\n        //myEndpoint, myRequest are assigned earlier in this fx, CustomResponse is a custom class\r\n        ResponseEntity resEntity = getRestTemplate().postForEntity(myEndpoint, myRequest, CustomResponse.class);\r\n    }\r\n}\r\n````\r\n\r\nI want to test whether MyClient.restTemplate is timing out:\r\n````\r\n@RunWith(MockitoJUnitRunner.class)\r\npublic class MyClassTest extends TestCase{\r\n    ...\r\n    \r\n    @Test\r\n    public void test_new_constructor(){\r\n        MyClient myClient = new MyClient(x, y, z, 1000);\r\n        RestTemplate restTemplate = myClient.getRestTemplate(); \r\n        Mockito.when(restTemplate.postForEntity(anyString(), any(), any(Class.class))).thenAnswer(new AnswersWithDelay(100000, new Returns(new ResponseEntity(CustomResponse, HttpStatus.OK)) ));\r\n        //Will eventually add a delay to trigger a timeout + code for checking the exception, but it doesn&#39;t make it past the above line\r\n        myClient.makeRequests();\r\n    }\r\n}\r\n````\r\n\r\nIt fails on the `Mockito.when(restTemplate.postForEntity(anyString(), any(), any(Class.class))).thenAnswer(new AnswersWithDelay(100000, new Returns(new ResponseEntity(CustomResponse, HttpStatus.OK)) ));` line with `java.lang.IllegalArgumentException: URI is not absolute`, why is this? Is it a bad idea to test an actual RestTemplate in the first place? I was thinking that using `Mockito.when` on the network calls would make it so that the tests aren&#39;t reliant on requests to actual endpoints, but is this not the case?  ","title":"Why is my unit test failing with &quot;URI is not absolute&quot; when I try to mock RestTemplate.postForEntity()?","body":"<p>I want to mock the postForEntity method of a RestTemplate instance variable belonging to one of my classes, but it keeps failing with a &quot;URI is not absolute&quot; error despite my seeing anyString() being passed in as the URI in other examples. Something that should be noted is that I did not @Mock my RestTemplate, because I want to test if it's been correctly built by the constructor of its parent class (namely the timeout).</p>\n<p>I can't post actual code but the class I'm testing looks something like this:</p>\n<pre><code>public class MyClient {\n    ...\n    @Getter\n    @Setter\n    private RestTemplate restTemplate = new RestTemplate();\n\n    public MyClient(Property x, Property y, Property z){\n        this.x = x; \n        this.y = y;\n        this.z = z; \n    }\n\n    //New constructor that I want to test \n    public MyClient(Property x, Property y, Property z, int timeout){\n        this(x, y, z);\n        this.restTemplate =((SimpleClientHttpRequestFactory)getRestTemplate().getRequestFactory()).setReadTimeout(timeout);\n    }\n    \n    public makeRequests() {\n        ...\n        //myEndpoint, myRequest are assigned earlier in this fx, CustomResponse is a custom class\n        ResponseEntity resEntity = getRestTemplate().postForEntity(myEndpoint, myRequest, CustomResponse.class);\n    }\n}\n</code></pre>\n<p>I want to test whether MyClient.restTemplate is timing out:</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class MyClassTest extends TestCase{\n    ...\n    \n    @Test\n    public void test_new_constructor(){\n        MyClient myClient = new MyClient(x, y, z, 1000);\n        RestTemplate restTemplate = myClient.getRestTemplate(); \n        Mockito.when(restTemplate.postForEntity(anyString(), any(), any(Class.class))).thenAnswer(new AnswersWithDelay(100000, new Returns(new ResponseEntity(CustomResponse, HttpStatus.OK)) ));\n        //Will eventually add a delay to trigger a timeout + code for checking the exception, but it doesn't make it past the above line\n        myClient.makeRequests();\n    }\n}\n</code></pre>\n<p>It fails on the <code>Mockito.when(restTemplate.postForEntity(anyString(), any(), any(Class.class))).thenAnswer(new AnswersWithDelay(100000, new Returns(new ResponseEntity(CustomResponse, HttpStatus.OK)) ));</code> line with <code>java.lang.IllegalArgumentException: URI is not absolute</code>, why is this? Is it a bad idea to test an actual RestTemplate in the first place? I was thinking that using <code>Mockito.when</code> on the network calls would make it so that the tests aren't reliant on requests to actual endpoints, but is this not the case?</p>\n"},{"tags":["java","android-studio"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1648641230,"post_id":71675159,"comment_id":126674894,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":4898551,"reputation":1350,"user_id":3947321,"accept_rate":50,"display_name":"Rujul Gandhi"},"score":0,"creation_date":1687257909,"post_id":71675159,"comment_id":134908190,"body_markdown":"Did your issue got resolved ? @Mohammad","body":"Did your issue got resolved ? @Mohammad"}],"answers":[{"tags":[],"owner":{"account_id":25845376,"reputation":1,"user_id":19580311,"display_name":"8Malvina8"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1670225130,"creation_date":1669722405,"answer_id":74613603,"question_id":71675159,"body_markdown":"I faced this problem by updating kotlin version in android studio but not changing buildscript `{ ext.kotlin_version = &#39;specify new version here&#39;}` in build gradle","title":"Module jdk.compiler does not export com.sun.tools.javac.util.. Compile time error","body":"<p>I faced this problem by updating kotlin version in android studio but not changing buildscript <code>{ ext.kotlin_version = 'specify new version here'}</code> in build gradle</p>\n"},{"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1691646312,"post_id":76853604,"comment_id":135520072,"body_markdown":"What was your original Kotlin version and what version did you update to?","body":"What was your original Kotlin version and what version did you update to?"},{"owner":{"account_id":25352539,"reputation":11,"user_id":19169168,"display_name":"Safak"},"score":0,"creation_date":1691691795,"post_id":76853604,"comment_id":135529378,"body_markdown":"My original kotlin version was 1.3.72 and i updated it to 1.8.21","body":"My original kotlin version was 1.3.72 and i updated it to 1.8.21"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1691734903,"post_id":76853604,"comment_id":135534304,"body_markdown":"[Edit] your answer and add the details. Don&#39;t post answer details in a comment.","body":"<a href=\"https://stackoverflow.com/posts/76853604/edit\">Edit</a> your answer and add the details. Don&#39;t post answer details in a comment."}],"tags":[],"owner":{"account_id":25352539,"reputation":11,"user_id":19169168,"display_name":"Safak"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691861937,"creation_date":1691426389,"answer_id":76853604,"question_id":71675159,"body_markdown":"I encountered this problem when running an old app. My original kotlin version was 1.3.72 and i updated it to 1.8.21 and my problem was solved.","title":"Module jdk.compiler does not export com.sun.tools.javac.util.. Compile time error","body":"<p>I encountered this problem when running an old app. My original kotlin version was 1.3.72 and i updated it to 1.8.21 and my problem was solved.</p>\n"},{"comments":[{"owner":{"account_id":9194285,"reputation":418,"user_id":8628330,"display_name":"Jamal N"},"score":0,"creation_date":1693602946,"post_id":76868949,"comment_id":135787659,"body_markdown":"I am having the same exact problem with the same project (testing codelab), i have tried changing kotlinVersion to 1.8.2 (recommended by the IDE) but this did not work","body":"I am having the same exact problem with the same project (testing codelab), i have tried changing kotlinVersion to 1.8.2 (recommended by the IDE) but this did not work"}],"tags":[],"owner":{"account_id":557097,"reputation":7858,"user_id":919426,"accept_rate":63,"display_name":"tinonetic"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691592665,"creation_date":1691592665,"answer_id":76868949,"question_id":71675159,"body_markdown":"More descriptive solution:\r\n\r\n 1. Go to `build.gradle` file\r\n 2. In the module config, for the Kotlin implementation, make sure it reflects the latest plugin [![Module build.gradle file][1]][1]\r\n 3. Android Studio will highlight, describe the issue &amp; suggest a correct version\r\n 4. Edit it an build again\r\n 5. In my case the Kotlin version is specified in the Project&#39;s `build.gradle` file\r\n\r\n\r\n[![Project build.gradle file][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/q0zQt.png\r\n  [3]: https://i.stack.imgur.com/Chpam.png","title":"Module jdk.compiler does not export com.sun.tools.javac.util.. Compile time error","body":"<p>More descriptive solution:</p>\n<ol>\n<li>Go to <code>build.gradle</code> file</li>\n<li>In the module config, for the Kotlin implementation, make sure it reflects the latest plugin <a href=\"https://i.stack.imgur.com/q0zQt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q0zQt.png\" alt=\"Module build.gradle file\" /></a></li>\n<li>Android Studio will highlight, describe the issue &amp; suggest a correct version</li>\n<li>Edit it an build again</li>\n<li>In my case the Kotlin version is specified in the Project's <code>build.gradle</code> file</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/Chpam.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Chpam.png\" alt=\"Project build.gradle file\" /></a></p>\n"}],"owner":{"account_id":22478776,"reputation":81,"user_id":16678146,"display_name":"Mohammad Taqi Velani"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11506,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1697608930,"creation_date":1648634272,"question_id":71675159,"body_markdown":"Getting this error while building the shadowsocks project.\r\n\r\n(https://github.com/shadowsocks/shadowsocks-android)\r\n\r\njava.lang.IllegalAccessError: class org.jetbrains.kotlin.kapt3.base.KaptContext (in unnamed module @0x1d312b6c) \r\ncannot access class com.sun.tools.javac.util.Context (in module jdk.compiler)\r\n because module jdk.compiler does not export com.sun.tools.javac.util to unnamed module @0x1d312b6c\r\n\tat org.jetbrains.kotlin.kapt3.base.KaptContext.&lt;init&gt;(KaptContext.kt:28)\r\n","title":"Module jdk.compiler does not export com.sun.tools.javac.util.. Compile time error","body":"<p>Getting this error while building the shadowsocks project.</p>\n<p>(<a href=\"https://github.com/shadowsocks/shadowsocks-android\" rel=\"noreferrer\">https://github.com/shadowsocks/shadowsocks-android</a>)</p>\n<p>java.lang.IllegalAccessError: class org.jetbrains.kotlin.kapt3.base.KaptContext (in unnamed module @0x1d312b6c)\ncannot access class com.sun.tools.javac.util.Context (in module jdk.compiler)\nbecause module jdk.compiler does not export com.sun.tools.javac.util to unnamed module @0x1d312b6c\nat org.jetbrains.kotlin.kapt3.base.KaptContext.(KaptContext.kt:28)</p>\n"},{"tags":["java","ftp","timestamp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1697608705,"creation_date":1522738414,"answer_id":49623958,"question_id":49623415,"body_markdown":"[`FTPClient.getModificationTime`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#getModificationTime(java.lang.String)) returns `null` when the server returns an error response to `MDTM` command. Typically that would mean either that:\r\n\r\n- *&quot;File path&quot;* does not exists; or\r\n- the FTP server does not support `MDTM` command.\r\n\r\nCheck [`FTPClient.getReplyString()`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#getReplyString()).\r\n\r\n---\r\n\r\nIf it turns out that the FTP server does not support `MDTM` command, you will have to use another method to retrieve the timestamps. If `MDTM` is not supported, `MLSD` won&#39;t be either.\r\n\r\nIn that case the only other way is using `LIST` command to retrieve listing of all files and lookup the file you need - Use [`FTPClient.listFiles()`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#listFiles()).\r\n\r\n    FTPFile[] remoteFiles = ftpClient.listFiles(remotePath);\r\n    \r\n    Arrays.sort(remoteFiles,\r\n        Comparator.comparing((FTPFile remoteFile) -&gt; remoteFile.getTimestamp()).reversed());\r\n    \r\n    FTPFile latestFile = remoteFiles[0];\r\n    System.out.println(\r\n        &quot;Latest file is &quot; + latestFile.getName() +\r\n        &quot; with timestamp &quot; + latestFile.getTimestamp().getTime().toString());\r\n\r\nSee also https://stackoverflow.com/q/36032064/850848.\r\n","title":"Fetching last modified date of a file in FTP server using FTPClient.getModificationTime yields null","body":"<p><a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#getModificationTime(java.lang.String)\" rel=\"nofollow noreferrer\"><code>FTPClient.getModificationTime</code></a> returns <code>null</code> when the server returns an error response to <code>MDTM</code> command. Typically that would mean either that:</p>\n<ul>\n<li><em>&quot;File path&quot;</em> does not exists; or</li>\n<li>the FTP server does not support <code>MDTM</code> command.</li>\n</ul>\n<p>Check <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#getReplyString()\" rel=\"nofollow noreferrer\"><code>FTPClient.getReplyString()</code></a>.</p>\n<hr />\n<p>If it turns out that the FTP server does not support <code>MDTM</code> command, you will have to use another method to retrieve the timestamps. If <code>MDTM</code> is not supported, <code>MLSD</code> won't be either.</p>\n<p>In that case the only other way is using <code>LIST</code> command to retrieve listing of all files and lookup the file you need - Use <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#listFiles()\" rel=\"nofollow noreferrer\"><code>FTPClient.listFiles()</code></a>.</p>\n<pre><code>FTPFile[] remoteFiles = ftpClient.listFiles(remotePath);\n\nArrays.sort(remoteFiles,\n    Comparator.comparing((FTPFile remoteFile) -&gt; remoteFile.getTimestamp()).reversed());\n\nFTPFile latestFile = remoteFiles[0];\nSystem.out.println(\n    &quot;Latest file is &quot; + latestFile.getName() +\n    &quot; with timestamp &quot; + latestFile.getTimestamp().getTime().toString());\n</code></pre>\n<p>See also <a href=\"https://stackoverflow.com/q/36032064/850848\">Make FTP server return files listed by timestamp with Apache FTPClient</a>.</p>\n"}],"owner":{"account_id":13282175,"reputation":206,"user_id":9589386,"display_name":"Ayush"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4629,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":49623958,"answer_count":1,"score":3,"last_activity_date":1697608705,"creation_date":1522736138,"question_id":49623415,"body_markdown":"I am trying to fetch last modified date of a file from FTP environment.The result is not as expected.\r\n\r\nBy using `ftpClient.getModificationTime(&quot;File path&quot;)` I am getting **null**.\r\n\r\nBy using `FTPFile.getTimestamp().getTime()` I am getting **wrong last modified** (i.e. real last modified is of today and I am getting *Wed Feb 18 02:55:22 EST 2004*).\r\n\r\nHow to get correct last modified?\r\n\r\n[![File at FTP][2]][2]\r\n\r\nThanks in advance.\r\n\r\n\r\n  [2]: https://i.stack.imgur.com/MVpM3.png","title":"Fetching last modified date of a file in FTP server using FTPClient.getModificationTime yields null","body":"<p>I am trying to fetch last modified date of a file from FTP environment.The result is not as expected.</p>\n<p>By using <code>ftpClient.getModificationTime(&quot;File path&quot;)</code> I am getting <strong>null</strong>.</p>\n<p>By using <code>FTPFile.getTimestamp().getTime()</code> I am getting <strong>wrong last modified</strong> (i.e. real last modified is of today and I am getting <em>Wed Feb 18 02:55:22 EST 2004</em>).</p>\n<p>How to get correct last modified?</p>\n<p><a href=\"https://i.stack.imgur.com/MVpM3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MVpM3.png\" alt=\"File at FTP\" /></a></p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","arrays","algorithm"],"comments":[{"owner":{"account_id":9799,"reputation":3583,"user_id":18233,"accept_rate":75,"display_name":"Martin OConnor"},"score":0,"creation_date":1270949943,"post_id":2615712,"comment_id":2627278,"body_markdown":"Your code snippet does not indicate how highest_score was initialized","body":"Your code snippet does not indicate how highest_score was initialized"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":3,"creation_date":1270949985,"post_id":2615712,"comment_id":2627281,"body_markdown":"Should `second highest` be `second_highest`? Is there a loop?","body":"Should <code>second highest</code> be <code>second_highest</code>? Is there a loop?"},{"owner":{"account_id":93001,"reputation":2221,"user_id":254628,"accept_rate":80,"display_name":"Alexandros Gezerlis"},"score":0,"creation_date":1270964473,"post_id":2615712,"comment_id":2627808,"body_markdown":"Very similar threads: http://stackoverflow.com/questions/1811846/how-to-get-the-second-highest-number-in-an-array-in-visual-c and http://stackoverflow.com/questions/1412751/find-largest-and-second-largest-element-in-a-range","body":"Very similar threads: <a href=\"http://stackoverflow.com/questions/1811846/how-to-get-the-second-highest-number-in-an-array-in-visual-c\" title=\"how to get the second highest number in an array in visual c\">stackoverflow.com/questions/1811846/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/1412751/find-largest-and-second-largest-element-in-a-range\" title=\"find largest and second largest element in a range\">stackoverflow.com/questions/1412751/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":70757,"reputation":41231,"user_id":204883,"display_name":"Arkku"},"score":1,"creation_date":1270953882,"post_id":2615723,"comment_id":2627484,"body_markdown":"+1 for pointing out that this returns the second highest value instead of the element.","body":"+1 for pointing out that this returns the second highest value instead of the element."}],"tags":[],"owner":{"account_id":74268,"reputation":5244,"user_id":213489,"accept_rate":100,"display_name":"Nathan S."},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1270949838,"creation_date":1270949838,"answer_id":2615723,"question_id":2615712,"body_markdown":"If the first element which second_highest is set to initially is already the highest element, then it should be reassigned to a new element when the next element is found. That is, it&#39;s being initialized to 98, and should be set to 56. But, 56 isn&#39;t higher than 98, so it won&#39;t be set unless you do the check.\r\n\r\nIf the highest number appears twice, this will result in the second highest *value* as opposed to the second *element* that you would find if you sorted the array.","title":"Finding the second highest number in array in Java","body":"<p>If the first element which second_highest is set to initially is already the highest element, then it should be reassigned to a new element when the next element is found. That is, it's being initialized to 98, and should be set to 56. But, 56 isn't higher than 98, so it won't be set unless you do the check.</p>\n\n<p>If the highest number appears twice, this will result in the second highest <em>value</em> as opposed to the second <em>element</em> that you would find if you sorted the array.</p>\n"},{"comments":[{"owner":{"account_id":180632,"reputation":124566,"user_id":414076,"accept_rate":86,"display_name":"Anthony Pegram"},"score":3,"creation_date":1270950715,"post_id":2615743,"comment_id":2627312,"body_markdown":"This code will not handle the condition of the current element exceeding the second highest value but not the first highest value.","body":"This code will not handle the condition of the current element exceeding the second highest value but not the first highest value."},{"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":0,"creation_date":1270950736,"post_id":2615743,"comment_id":2627315,"body_markdown":"This fails on input like `{1, 0}`.","body":"This fails on input like <code>{1, 0}</code>."},{"owner":{"account_id":4841971,"reputation":933,"user_id":3907873,"accept_rate":40,"display_name":"hitesh141"},"score":0,"creation_date":1433572344,"post_id":2615743,"comment_id":49420428,"body_markdown":"super... i love this  logic. can you tell me what about the third max??","body":"super... i love this  logic. can you tell me what about the third max??"},{"owner":{"account_id":97538,"reputation":3909,"user_id":264540,"accept_rate":88,"display_name":"Scott Smith"},"score":2,"creation_date":1437019828,"post_id":2615743,"comment_id":50859201,"body_markdown":"@hitesh - is that sarcasm? OP didn&#39;t ask about the third max. If s/he wanted the nth max, the algorithm would obviously have been different.","body":"@hitesh - is that sarcasm? OP didn&#39;t ask about the third max. If s/he wanted the nth max, the algorithm would obviously have been different."}],"tags":[],"owner":{"account_id":97538,"reputation":3909,"user_id":264540,"accept_rate":88,"display_name":"Scott Smith"},"comment_count":4,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1270951949,"creation_date":1270950115,"answer_id":2615743,"question_id":2615712,"body_markdown":"    // Initialize these to the smallest value possible\r\n    int highest = Integer.MIN_VALUE;\r\n    int secondHighest = Integer.MIN_VALUE;\r\n\r\n    // Loop over the array\r\n    for (int i = 0; i &lt; array.Length; i++) {\r\n\r\n        // If we&#39;ve found a new highest number...\r\n        if (array[i] &gt; highest) {\r\n\r\n            // ...shift the current highest number to second highest\r\n            secondHighest = highest;\r\n\r\n            // ...and set the new highest.\r\n            highest = array[i];\r\n        } else if (array[i] &gt; secondHighest)\r\n            // Just replace the second highest\r\n            secondHighest = array[i];\r\n        }\r\n    }\r\n\r\n    // After exiting the loop, secondHighest now represents the second\r\n    // largest value in the array\r\n\r\n&lt;h3&gt;Edit:&lt;/h3&gt; Whoops. Thanks for pointing out my mistake, guys. Fixed now.","title":"Finding the second highest number in array in Java","body":"<pre><code>// Initialize these to the smallest value possible\nint highest = Integer.MIN_VALUE;\nint secondHighest = Integer.MIN_VALUE;\n\n// Loop over the array\nfor (int i = 0; i &lt; array.Length; i++) {\n\n    // If we've found a new highest number...\n    if (array[i] &gt; highest) {\n\n        // ...shift the current highest number to second highest\n        secondHighest = highest;\n\n        // ...and set the new highest.\n        highest = array[i];\n    } else if (array[i] &gt; secondHighest)\n        // Just replace the second highest\n        secondHighest = array[i];\n    }\n}\n\n// After exiting the loop, secondHighest now represents the second\n// largest value in the array\n</code></pre>\n\n<p><h3>Edit:</h3> Whoops. Thanks for pointing out my mistake, guys. Fixed now.</p>\n"},{"comments":[{"owner":{"account_id":270417,"reputation":373,"user_id":560350,"display_name":"loc"},"score":12,"creation_date":1410446547,"post_id":2615761,"comment_id":40337000,"body_markdown":"To the array [2,2,1] it gives back 2. Isn&#39;t it wrong?","body":"To the array [2,2,1] it gives back 2. Isn&#39;t it wrong?"},{"owner":{"account_id":1991758,"reputation":109,"user_id":1785629,"accept_rate":25,"display_name":"Jhabar"},"score":1,"creation_date":1645940200,"post_id":2615761,"comment_id":125999184,"body_markdown":"the &#39;else if (num &gt; high2)&#39; check should be &#39;else if (num != high1 &amp;&amp; num &gt; high2)&#39;","body":"the &#39;else if (num &gt; high2)&#39; check should be &#39;else if (num != high1 &amp;&amp; num &gt; high2)&#39;"}],"tags":[],"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"comment_count":2,"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1270951200,"creation_date":1270950563,"answer_id":2615761,"question_id":2615712,"body_markdown":"I&#39;m not convinced that doing what you did fixes the problem; I think it masks yet another problem in your logic. To find the second highest is actually quite simple:\r\n\r\n     static int secondHighest(int... nums) {\r\n        int high1 = Integer.MIN_VALUE;\r\n        int high2 = Integer.MIN_VALUE;\r\n        for (int num : nums) {\r\n          if (num &gt; high1) {\r\n            high2 = high1;\r\n            high1 = num;\r\n          } else if (num &gt; high2) {\r\n            high2 = num;\r\n          }\r\n        }\r\n        return high2;\r\n     }\r\n\r\nThis is `O(N)` in one pass. If you want to accept ties, then change to `if (num &gt;= high1)`, but as it is, it will return `Integer.MIN_VALUE` if there aren&#39;t at least 2 elements in the array. It will also return `Integer.MIN_VALUE` if the array contains only the same number.\r\n","title":"Finding the second highest number in array in Java","body":"<p>I'm not convinced that doing what you did fixes the problem; I think it masks yet another problem in your logic. To find the second highest is actually quite simple:</p>\n\n<pre><code> static int secondHighest(int... nums) {\n    int high1 = Integer.MIN_VALUE;\n    int high2 = Integer.MIN_VALUE;\n    for (int num : nums) {\n      if (num &gt; high1) {\n        high2 = high1;\n        high1 = num;\n      } else if (num &gt; high2) {\n        high2 = num;\n      }\n    }\n    return high2;\n }\n</code></pre>\n\n<p>This is <code>O(N)</code> in one pass. If you want to accept ties, then change to <code>if (num &gt;= high1)</code>, but as it is, it will return <code>Integer.MIN_VALUE</code> if there aren't at least 2 elements in the array. It will also return <code>Integer.MIN_VALUE</code> if the array contains only the same number.</p>\n"},{"tags":[],"owner":{"account_id":156914,"reputation":9897,"user_id":374499,"accept_rate":80,"display_name":"Chander Shivdasani"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1348521655,"creation_date":1348521655,"answer_id":12573103,"question_id":2615712,"body_markdown":"  \r\n\r\n \r\n\r\n     public static int secondLargest(int[] input) {\r\n        \t\tint largest,secondLargest;\r\n        \t\t\r\n        \t\tif(input[0] &gt; input[1]) {\r\n        \t\t\tlargest = input[0];\r\n        \t\t\tsecondLargest = input[1];\r\n        \t\t}\r\n        \t\telse {\r\n        \t\t\tlargest = input[1];\r\n        \t\t\tsecondLargest = input[0];\r\n        \t\t}\r\n        \t\t\t\r\n        \t\tfor(int i = 2; i &lt; input.length; i++) {\r\n        \t\t\tif((input[i] &lt;= largest) &amp;&amp; input[i] &gt; secondLargest) {\r\n        \t\t\t\tsecondLargest = input[i];\r\n        \t\t\t}\r\n        \t\t\t\r\n        \t\t\tif(input[i] &gt; largest) {\r\n        \t\t\t\tsecondLargest = largest;\r\n        \t\t\t\tlargest = input[i];\r\n        \t\t\t}\r\n        \t\t}\r\n        \t\t\r\n        \t\treturn secondLargest;\r\n        \t}","title":"Finding the second highest number in array in Java","body":"<pre><code> public static int secondLargest(int[] input) {\n            int largest,secondLargest;\n\n            if(input[0] &gt; input[1]) {\n                largest = input[0];\n                secondLargest = input[1];\n            }\n            else {\n                largest = input[1];\n                secondLargest = input[0];\n            }\n\n            for(int i = 2; i &lt; input.length; i++) {\n                if((input[i] &lt;= largest) &amp;&amp; input[i] &gt; secondLargest) {\n                    secondLargest = input[i];\n                }\n\n                if(input[i] &gt; largest) {\n                    secondLargest = largest;\n                    largest = input[i];\n                }\n            }\n\n            return secondLargest;\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":37381,"reputation":1347,"user_id":106844,"display_name":"csaam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455246814,"creation_date":1360809092,"answer_id":14866902,"question_id":2615712,"body_markdown":"    private static int SecondBiggest(int[] vector)\r\n    {\r\n        if (vector == null)\r\n        {\r\n            throw new ArgumentNullException(&quot;vector&quot;);\r\n        }\r\n        if (vector.Length &lt; 2)\r\n        {\r\n            return int.MinValue;\r\n        }\r\n\r\n        int max1 = vector[0];\r\n        int max2 = vector[1];\r\n        for (int i = 2; i &lt; vector.Length; ++i)\r\n        {\r\n            if (max1 &gt; max2 &amp;&amp; max1 != vector[i])\r\n            {\r\n                max2 = Math.Max(max2, vector[i]);\r\n            }\r\n            else if (max2 != vector[i])\r\n            {\r\n                max1 = Math.Max(max1, vector[i]);\r\n            }\r\n        }\r\n        return Math.Min(max1, max2);\r\n    }\r\n\r\nThis treats duplicates as the same number.  You can change the condition checks if you want to all the biggest and the second biggest to be duplicates.\r\n","title":"Finding the second highest number in array in Java","body":"<pre><code>private static int SecondBiggest(int[] vector)\n{\n    if (vector == null)\n    {\n        throw new ArgumentNullException(\"vector\");\n    }\n    if (vector.Length &lt; 2)\n    {\n        return int.MinValue;\n    }\n\n    int max1 = vector[0];\n    int max2 = vector[1];\n    for (int i = 2; i &lt; vector.Length; ++i)\n    {\n        if (max1 &gt; max2 &amp;&amp; max1 != vector[i])\n        {\n            max2 = Math.Max(max2, vector[i]);\n        }\n        else if (max2 != vector[i])\n        {\n            max1 = Math.Max(max1, vector[i]);\n        }\n    }\n    return Math.Min(max1, max2);\n}\n</code></pre>\n\n<p>This treats duplicates as the same number.  You can change the condition checks if you want to all the biggest and the second biggest to be duplicates.</p>\n"},{"comments":[{"owner":{"account_id":37701,"reputation":44030,"user_id":128645,"accept_rate":100,"display_name":"Jeff Foster"},"score":0,"creation_date":1374256314,"post_id":14880748,"comment_id":25885289,"body_markdown":"You mean selection sort, not bubble sort. Bubble sort only swaps adjacent elements.","body":"You mean selection sort, not bubble sort. Bubble sort only swaps adjacent elements."}],"tags":[],"owner":{"account_id":1576027,"reputation":864,"user_id":1462452,"accept_rate":69,"display_name":"Stranger"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360863435,"creation_date":1360863435,"answer_id":14880748,"question_id":2615712,"body_markdown":"If time complexity is not an issue, then You can run bubble sort and within two iterations, you will get your second highest number because in the first iteration of the loop, the largest number will be moved to the last. In the second iteration, the second largest number will be moved next to last. ","title":"Finding the second highest number in array in Java","body":"<p>If time complexity is not an issue, then You can run bubble sort and within two iterations, you will get your second highest number because in the first iteration of the loop, the largest number will be moved to the last. In the second iteration, the second largest number will be moved next to last. </p>\n"},{"tags":[],"owner":{"account_id":3069472,"reputation":31,"user_id":2600478,"display_name":"Harsh Kevadia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1374257466,"creation_date":1374255897,"answer_id":17752371,"question_id":2615712,"body_markdown":"If you want to 2nd highest and highest number index in array then....\r\n\r\n    public class Scoller_student {\r\n\r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;\\t\\t\\tEnter No. of Student\\n&quot;);\r\n            Scanner scan = new Scanner(System.in);\r\n            int student_no = scan.nextInt();\r\n\t\r\n            // Marks Array.........\r\n            int[] marks;\r\n            marks = new int[student_no];\r\n\r\n            // Student name array.....\r\n            String[] names;\r\n            names = new String[student_no];\r\n            int max = 0;\r\n            int sec = max;\r\n            for (int i = 0; i &lt; student_no; i++) {\r\n                System.out.println(&quot;\\t\\t\\tEnter Student Name of id = &quot; + i + &quot;.&quot;);\r\n\r\n                names[i] = scan.next();\r\n                System.out.println(&quot;\\t\\t\\tEnter Student Score of id = &quot; + i + &quot;.\\n&quot;);\r\n\r\n                marks[i] = scan.nextInt();\r\n                if (marks[max] &lt; marks[i]) {\r\n                    sec = max;\r\n                    max = i;\r\n                } else if (marks[sec] &lt; marks[i] &amp;&amp; marks[max] != marks[i]) {\r\n                    sec = i;\r\n                }\r\n            }\r\n\r\n            if (max == sec) {\r\n                sec = 1;\r\n                for (int i = 1; i &lt; student_no; i++) {\r\n                    if (marks[sec] &lt; marks[i]) {\r\n                        sec = i;\r\n                    }\r\n                }\r\n            }\r\n\r\n            System.out.println(&quot;\\t\\t\\tHigherst score id = \\&quot;&quot; + max + &quot;\\&quot; Name : \\&quot;&quot;\r\n\t\t\t\t+ names[max] + &quot;\\&quot; Max mark : \\&quot;&quot; + marks[max] + &quot;\\&quot;.\\n&quot;);\r\n            System.out.println(&quot;\\t\\t\\tSecond Higherst score id = \\&quot;&quot; + sec + &quot;\\&quot; Name : \\&quot;&quot;\r\n\t\t\t\t+ names[sec] + &quot;\\&quot; Max mark : \\&quot;&quot; + marks[sec] + &quot;\\&quot;.\\n&quot;);\r\n\r\n        }\r\n    }","title":"Finding the second highest number in array in Java","body":"<p>If you want to 2nd highest and highest number index in array then....</p>\n\n<pre><code>public class Scoller_student {\n\n    public static void main(String[] args) {\n        System.out.println(\"\\t\\t\\tEnter No. of Student\\n\");\n        Scanner scan = new Scanner(System.in);\n        int student_no = scan.nextInt();\n\n        // Marks Array.........\n        int[] marks;\n        marks = new int[student_no];\n\n        // Student name array.....\n        String[] names;\n        names = new String[student_no];\n        int max = 0;\n        int sec = max;\n        for (int i = 0; i &lt; student_no; i++) {\n            System.out.println(\"\\t\\t\\tEnter Student Name of id = \" + i + \".\");\n\n            names[i] = scan.next();\n            System.out.println(\"\\t\\t\\tEnter Student Score of id = \" + i + \".\\n\");\n\n            marks[i] = scan.nextInt();\n            if (marks[max] &lt; marks[i]) {\n                sec = max;\n                max = i;\n            } else if (marks[sec] &lt; marks[i] &amp;&amp; marks[max] != marks[i]) {\n                sec = i;\n            }\n        }\n\n        if (max == sec) {\n            sec = 1;\n            for (int i = 1; i &lt; student_no; i++) {\n                if (marks[sec] &lt; marks[i]) {\n                    sec = i;\n                }\n            }\n        }\n\n        System.out.println(\"\\t\\t\\tHigherst score id = \\\"\" + max + \"\\\" Name : \\\"\"\n            + names[max] + \"\\\" Max mark : \\\"\" + marks[max] + \"\\\".\\n\");\n        System.out.println(\"\\t\\t\\tSecond Higherst score id = \\\"\" + sec + \"\\\" Name : \\\"\"\n            + names[sec] + \"\\\" Max mark : \\\"\" + marks[sec] + \"\\\".\\n\");\n\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"score":0,"creation_date":1387544244,"post_id":20704105,"comment_id":31010353,"body_markdown":"Whenever you&#39;re finding 1st , 2nd or 3rd highest and so on, you always needs to be sort an array into an ascending order.","body":"Whenever you&#39;re finding 1st , 2nd or 3rd highest and so on, you always needs to be sort an array into an ascending order."}],"tags":[],"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1387544152,"creation_date":1387544152,"answer_id":20704105,"question_id":2615712,"body_markdown":"Its very easy to get the 2nd highest element in an array. I&#39;ve shows below for all your reference. Hope this will be helpful.\r\n\r\n    import java.util.Arrays;\r\n    \r\n    public class Testdemo {\r\n    \tpublic static void main(String[] args) {\r\n    \tint[] numbers = {1, 5, 4, 2, 8, 1, 1, 6, 7, 8, 9};\r\n    \tArrays.sort(numbers);\r\n    \tSystem.out.println(&quot;The second Higest Element :&quot; + numbers[numbers.length-2]);\r\n        }\r\n    }\r\n\r\nAns - The second Higest Element :8\r\n","title":"Finding the second highest number in array in Java","body":"<p>Its very easy to get the 2nd highest element in an array. I've shows below for all your reference. Hope this will be helpful.</p>\n\n<pre><code>import java.util.Arrays;\n\npublic class Testdemo {\n    public static void main(String[] args) {\n    int[] numbers = {1, 5, 4, 2, 8, 1, 1, 6, 7, 8, 9};\n    Arrays.sort(numbers);\n    System.out.println(\"The second Higest Element :\" + numbers[numbers.length-2]);\n    }\n}\n</code></pre>\n\n<p>Ans - The second Higest Element :8</p>\n"},{"tags":[],"owner":{"account_id":2164894,"reputation":1,"user_id":1918205,"display_name":"Prashant Jain"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1458482783,"creation_date":1389166487,"answer_id":20989553,"question_id":2615712,"body_markdown":"    public static void main(String[] args) {\r\n\r\n\t\tint[] arr = {0,12,74,56,2,63,45};\r\n\t\tint f1 = 1, f2 = 0, temp = 0;\r\n\t\tint num = 0;\r\n\r\n\t\tfor (int i = 0; i &lt; arr.length; i++){\r\n\t\t\tnum = arr[i];\r\n\t\t\tif (f1 &lt; num) {\r\n\t\t\t\ttemp = f1;\r\n\t\t\t\tf1 = num;\r\n\t\t\t\tnum = temp;\r\n\t\t\t}\r\n\t\t\tif (f2 &lt; num) {\r\n\t\t\t\ttemp = f2;\r\n\t\t\t\tf2 = num;\r\n\t\t\t\tnum = temp;\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(&quot;First Highest &quot; + f1 + &quot; Second Highest &quot; + f2 + &quot; Third &quot; + num);\r\n\r\n\t}","title":"Finding the second highest number in array in Java","body":"<pre><code>public static void main(String[] args) {\n\n    int[] arr = {0,12,74,56,2,63,45};\n    int f1 = 1, f2 = 0, temp = 0;\n    int num = 0;\n\n    for (int i = 0; i &lt; arr.length; i++){\n        num = arr[i];\n        if (f1 &lt; num) {\n            temp = f1;\n            f1 = num;\n            num = temp;\n        }\n        if (f2 &lt; num) {\n            temp = f2;\n            f2 = num;\n            num = temp;\n        }\n    }\n    System.out.println(\"First Highest \" + f1 + \" Second Highest \" + f2 + \" Third \" + num);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4144330,"reputation":11571,"user_id":3398554,"accept_rate":77,"display_name":"Georgi Koemdzhiev"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1394468745,"creation_date":1394467558,"answer_id":22305276,"question_id":2615712,"body_markdown":"I will propose even shorter and simplest answer to the problem and it contains 2 lines of code in the method (`import java.util.Arrays` is required):\r\n\r\n    \tpublic static int secMax(int[] num){\r\n\t\tArrays.sort(num);\r\n\t\ttemp = num[num.length-2];\r\n\r\n\t\treturn temp;\r\n\t}","title":"Finding the second highest number in array in Java","body":"<p>I will propose even shorter and simplest answer to the problem and it contains 2 lines of code in the method (<code>import java.util.Arrays</code> is required):</p>\n\n<pre><code>    public static int secMax(int[] num){\n    Arrays.sort(num);\n    temp = num[num.length-2];\n\n    return temp;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2655871,"reputation":195,"user_id":2296600,"accept_rate":25,"display_name":"user2296600"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458510277,"creation_date":1396477951,"answer_id":22824359,"question_id":2615712,"body_markdown":"    public class SecondHighest {\r\n\r\n    \tpublic static void main(String[] args) {\r\n\t    \t// TODO Auto-generated method stub\r\n\r\n\t\t    /*\r\n    \t\t * Find the second largest int item in an unsorted array.\r\n             * This solution assumes we have atleast two elements in the array\r\n\t    \t * SOLVED! - Order N. \r\n    \t\t * Other possible solution is to solve with Array.sort and get n-2 element.\r\n\t    \t * However, Big(O) time NlgN \r\n\t\t     */\r\n\t\t\r\n    \t\tint[] nums = new int[]{1,2,4,3,5,8,55,76,90,34,91};\r\n\t    \tint highest,cur, secondHighest = -1;\r\n\t\t\r\n    \t\tint arrayLength = nums.length;\r\n\t    \thighest = nums[1] &gt; nums[0] ? nums[1] : nums[0];\r\n    \t\tsecondHighest = nums[1] &lt; nums[0] ? nums[1] : nums[0];\r\n\t\t\r\n    \t\tif (arrayLength == 2) {\r\n    \t\t\tSystem.out.println(secondHighest);\r\n\r\n\t    \t} else {\r\n\r\n    \t\t\tfor (int x = 0; x &lt; nums.length; x++) {\r\n\r\n    \t\t\t\tcur = nums[x];\r\n    \t\t\t\tint tmp;\r\n\t\t\t\r\n\t    \t\t\tif (cur &lt; highest &amp;&amp; cur &gt; secondHighest)\r\n\t\t    \t\t\tsecondHighest = cur;\r\n\t\t\t\t\r\n\t\t\t    \telse if (cur &gt; secondHighest &amp;&amp; cur &gt; highest) {\r\n                    \ttmp = highest;\r\n\t\t\t\t\t    highest = cur;\r\n    \t\t\t\t\tsecondHighest = tmp;\r\n                    }\r\n\t\t\t\t\r\n\t\t\t    }\t\r\n\t\t\t\r\n    \t\t\tSystem.out.println(secondHighest);\r\n\t\t\t\r\n\t    \t}\t\r\n        }\r\n    }","title":"Finding the second highest number in array in Java","body":"<pre><code>public class SecondHighest {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n\n        /*\n         * Find the second largest int item in an unsorted array.\n         * This solution assumes we have atleast two elements in the array\n         * SOLVED! - Order N. \n         * Other possible solution is to solve with Array.sort and get n-2 element.\n         * However, Big(O) time NlgN \n         */\n\n        int[] nums = new int[]{1,2,4,3,5,8,55,76,90,34,91};\n        int highest,cur, secondHighest = -1;\n\n        int arrayLength = nums.length;\n        highest = nums[1] &gt; nums[0] ? nums[1] : nums[0];\n        secondHighest = nums[1] &lt; nums[0] ? nums[1] : nums[0];\n\n        if (arrayLength == 2) {\n            System.out.println(secondHighest);\n\n        } else {\n\n            for (int x = 0; x &lt; nums.length; x++) {\n\n                cur = nums[x];\n                int tmp;\n\n                if (cur &lt; highest &amp;&amp; cur &gt; secondHighest)\n                    secondHighest = cur;\n\n                else if (cur &gt; secondHighest &amp;&amp; cur &gt; highest) {\n                    tmp = highest;\n                    highest = cur;\n                    secondHighest = tmp;\n                }\n\n            }   \n\n            System.out.println(secondHighest);\n\n        }   \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1481670,"reputation":558,"user_id":1390904,"accept_rate":29,"display_name":"Deep"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1404297701,"creation_date":1404297701,"answer_id":24529081,"question_id":2615712,"body_markdown":"\r\n\r\n    public class secondLargestElement \r\n    {\r\n    \tpublic static void main(String[] args) \r\n    \t{\r\n    \t\tint []a1={1,0};\r\n    \t\tsecondHigh(a1);\r\n    \t}\r\n    \r\n    \tpublic static void secondHigh(int[] arr)\r\n    \t{\r\n    \t\ttry\r\n    \t\t{\r\n    \t\t\tint highest,sec_high;\r\n    \t\t\thighest=arr[0];\r\n    \t\t\tsec_high=arr[1];\r\n    \t\t\t\r\n    \t\t\t\tfor(int i=1;i&lt;arr.length;i++)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tif(arr[i]&gt;highest)\r\n    \t\t\t\t\t{\t\t\t\r\n    \t\t\t\t\t\tsec_high=highest;\r\n    \t\t\t\t\t\thighest=arr[i];\t\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\telse \r\n    \t\t\t\t\t// The first condition before the || is to make sure that second highest is not actually same as the highest , think \r\n    \t\t\t\t\t\t// about {5,4,5}, you don&#39;t want the last  5 to be reported as the sec_high\r\n    \t\t\t\t\t\t// The other half after || says if the first two elements are same then also replace the sec_high with incoming integer\r\n    \t\t\t\t\t\t// Think about {5,5,4}\r\n    \t\t\t\t\tif(arr[i]&gt;sec_high &amp;&amp; arr[i]&lt;highest || highest==sec_high)\r\n    \t\t\t\t\t\tsec_high=arr[i];\r\n    \t\t\t\t}\r\n    \t\t\t//System.out.println(&quot;high=&quot;+highest +&quot;sec&quot;+sec_high);\r\n    \t\t\tif(highest==sec_high)\r\n    \t\t\t\tSystem.out.println(&quot;All the elements in the input array are same&quot;);\r\n    \t\t\t else\r\n    \t\t\t\t System.out.println(&quot;The second highest element in the array is:&quot;+ sec_high);\r\n    \t\t\t\r\n    \t\t }\r\n    \t\r\n    \t\tcatch(ArrayIndexOutOfBoundsException e)\r\n    \t\t{\r\n    \t\tSystem.out.println(&quot;Not enough elements in the array&quot;);\r\n    \t\t//e.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n","title":"Finding the second highest number in array in Java","body":"<pre><code>public class secondLargestElement \n{\n    public static void main(String[] args) \n    {\n        int []a1={1,0};\n        secondHigh(a1);\n    }\n\n    public static void secondHigh(int[] arr)\n    {\n        try\n        {\n            int highest,sec_high;\n            highest=arr[0];\n            sec_high=arr[1];\n\n                for(int i=1;i&lt;arr.length;i++)\n                {\n                    if(arr[i]&gt;highest)\n                    {           \n                        sec_high=highest;\n                        highest=arr[i]; \n                    }\n                    else \n                    // The first condition before the || is to make sure that second highest is not actually same as the highest , think \n                        // about {5,4,5}, you don't want the last  5 to be reported as the sec_high\n                        // The other half after || says if the first two elements are same then also replace the sec_high with incoming integer\n                        // Think about {5,5,4}\n                    if(arr[i]&gt;sec_high &amp;&amp; arr[i]&lt;highest || highest==sec_high)\n                        sec_high=arr[i];\n                }\n            //System.out.println(\"high=\"+highest +\"sec\"+sec_high);\n            if(highest==sec_high)\n                System.out.println(\"All the elements in the input array are same\");\n             else\n                 System.out.println(\"The second highest element in the array is:\"+ sec_high);\n\n         }\n\n        catch(ArrayIndexOutOfBoundsException e)\n        {\n        System.out.println(\"Not enough elements in the array\");\n        //e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3803280,"reputation":788,"user_id":3156324,"accept_rate":33,"display_name":"PVH"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1420724809,"creation_date":1420724809,"answer_id":27841629,"question_id":2615712,"body_markdown":"You can find Largest and Third largest number of unsorted array as well.\r\n\r\n   \r\n\r\n     public class ThirdLargestNumber {\r\n        \tpublic static void main(String[] args) {\r\n        \t\tint arr[] = { 220, 200, 100, 100, 300, 600, 50, 5000, 125, 785 };\r\n        \t\tint first = 0, second = 0, third = 0, firstTemp = 0, secondTemp = 0;\r\n        \t\tfor (int i = 0; i &lt;= 9 /*\r\n        \t\t\t\t\t\t\t\t * Length of array-1. You can use here length\r\n        \t\t\t\t\t\t\t\t * property of java array instead of hard coded\r\n        \t\t\t\t\t\t\t\t * value\r\n        \t\t\t\t\t\t\t\t */; i++) {\r\n        \t\t\tif (arr[i] == first) {\r\n        \t\t\t\tcontinue;\r\n        \t\t\t}\r\n        \t\t\tif (arr[i] &gt; first) {\r\n        \t\t\t\tfirstTemp = first;\r\n        \t\t\t\tsecondTemp = second;\r\n        \t\t\t\tfirst = arr[i];\r\n        \t\t\t\tsecond = firstTemp;\r\n        \t\t\t\tif (secondTemp &gt; third) {\r\n        \t\t\t\t\tthird = secondTemp;\r\n        \t\t\t\t}\r\n        \t\t\t} else {\r\n        \t\t\t\tif ((arr[i] == second) || (arr[i]) == first) {\r\n        \t\t\t\t\tcontinue;\r\n        \t\t\t\t}\r\n        \t\t\t\tif ((arr[i] &gt; second) &amp;&amp; (arr[i]) &lt; first) {\r\n        \t\t\t\t\tsecondTemp = second;\r\n        \t\t\t\t\tsecond = arr[i];\r\n        \t\t\t\t\tif (secondTemp &gt; third) {\r\n        \t\t\t\t\t\tthird = secondTemp;\r\n        \t\t\t\t\t}\r\n        \t\t\t\t} else {\r\n        \t\t\t\t\tif (arr[i] &gt; third) {\r\n        \t\t\t\t\t\tthird = arr[i];\r\n        \t\t\t\t\t}\r\n        \t\t\t\t}\r\n        \t\t\t}\r\n        \t\t}\r\n        \t\t// System.out.println(&quot;Third largest number: &quot; + third);\r\n        \t\tSystem.out.println(&quot;Second largest number: &quot; + second);\r\n        \t\t// System.out.println(&quot;Largest number: &quot; + first);\r\n        \t}\r\n        }\r\n\r\n","title":"Finding the second highest number in array in Java","body":"<p>You can find Largest and Third largest number of unsorted array as well.</p>\n\n<pre><code> public class ThirdLargestNumber {\n        public static void main(String[] args) {\n            int arr[] = { 220, 200, 100, 100, 300, 600, 50, 5000, 125, 785 };\n            int first = 0, second = 0, third = 0, firstTemp = 0, secondTemp = 0;\n            for (int i = 0; i &lt;= 9 /*\n                                     * Length of array-1. You can use here length\n                                     * property of java array instead of hard coded\n                                     * value\n                                     */; i++) {\n                if (arr[i] == first) {\n                    continue;\n                }\n                if (arr[i] &gt; first) {\n                    firstTemp = first;\n                    secondTemp = second;\n                    first = arr[i];\n                    second = firstTemp;\n                    if (secondTemp &gt; third) {\n                        third = secondTemp;\n                    }\n                } else {\n                    if ((arr[i] == second) || (arr[i]) == first) {\n                        continue;\n                    }\n                    if ((arr[i] &gt; second) &amp;&amp; (arr[i]) &lt; first) {\n                        secondTemp = second;\n                        second = arr[i];\n                        if (secondTemp &gt; third) {\n                            third = secondTemp;\n                        }\n                    } else {\n                        if (arr[i] &gt; third) {\n                            third = arr[i];\n                        }\n                    }\n                }\n            }\n            // System.out.println(\"Third largest number: \" + third);\n            System.out.println(\"Second largest number: \" + second);\n            // System.out.println(\"Largest number: \" + first);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":126486,"reputation":4659,"user_id":323015,"accept_rate":43,"display_name":"subhashis"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1422946311,"creation_date":1422946311,"answer_id":28293002,"question_id":2615712,"body_markdown":" The answers I saw wont work if there are two same largest numbers like the below example.\r\n\r\n            int[] randomIntegers = { 1, 5, 4, 2, 8, 1, 8, 9,9 };\r\n    \t    SortedSet&lt;Integer&gt; set = new TreeSet&lt;Integer&gt;();\r\n    \t    for (int i: randomIntegers) {\r\n    \t        set.add(i);\r\n    \t    }\r\n    \t    // Remove the maximum value; print the largest remaining item\r\n    \t    set.remove(set.last());\r\n    \t    System.out.println(set.last());\r\n\r\nI have removed it from the Set not from the Array","title":"Finding the second highest number in array in Java","body":"<p>The answers I saw wont work if there are two same largest numbers like the below example.</p>\n\n<pre><code>        int[] randomIntegers = { 1, 5, 4, 2, 8, 1, 8, 9,9 };\n        SortedSet&lt;Integer&gt; set = new TreeSet&lt;Integer&gt;();\n        for (int i: randomIntegers) {\n            set.add(i);\n        }\n        // Remove the maximum value; print the largest remaining item\n        set.remove(set.last());\n        System.out.println(set.last());\n</code></pre>\n\n<p>I have removed it from the Set not from the Array</p>\n"},{"comments":[{"owner":{"account_id":1497191,"reputation":9670,"user_id":1402846,"accept_rate":90,"display_name":"Pang"},"score":0,"creation_date":1498212492,"post_id":30320044,"comment_id":76419494,"body_markdown":"The question is about Java. This answer is not.","body":"The question is about Java. This answer is not."}],"tags":[],"owner":{"account_id":5544467,"reputation":1,"user_id":4399733,"display_name":"SBusidan"},"comment_count":1,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1432022872,"creation_date":1432022872,"answer_id":30320044,"question_id":2615712,"body_markdown":"This is my answer in C , O(N) complexity time.\r\nPass the array only once, only three variables.\r\nThe solution is very intuitive and easy to understand.   \r\n\r\n     #include &lt;stdio.h&gt;\r\n        \r\n        int second(int arr[],int size)\r\n        {\r\n        \tint i, max , secondmax;\r\n        \r\n        \tif (arr[0] &gt; arr[1]){\r\n        \t\tmax = arr[0];\r\n        \t\tsecondmax = arr[1];\r\n        \t} else {\r\n        \t\tmax = arr[1];\r\n        \t\tsecondmax = arr[0];\r\n        \t}\r\n        \tfor (i = 2; i &lt; size; i++)\r\n        \t{\r\n        \t\tif ((arr[i] &lt; max) &amp;&amp; (arr[i] &lt; secondmax)) {\r\n        \t\t\tcontinue;\r\n        \t\t}\r\n        \t\tif ((arr[i] &lt; max) &amp;&amp; (arr[i] &gt; secondmax)) {\r\n        \t\t\tsecondmax = arr[i];\r\n        \t\t\tcontinue;\r\n        \t\t}\r\n        \t\tif ((arr[i] &gt; max)) {\r\n        \t\t\tsecondmax = max;\r\n        \t\t\tmax = arr[i];\r\n        \t\t\tcontinue;\r\n        \t\t}\r\n        \t}\r\n        \treturn secondmax;\r\n        }\r\n        void main()\r\n        {\r\n        \tint arr[] = { 1,10,5,7};\r\n        \tint size = sizeof(arr) / sizeof(arr[0]);\r\n        \tint secondmax = second(arr,size);\r\n        \tprintf(&quot;%d \\n\\n&quot;, secondmax);\r\n        }","title":"Finding the second highest number in array in Java","body":"<p>This is my answer in C , O(N) complexity time.\nPass the array only once, only three variables.\nThe solution is very intuitive and easy to understand.   </p>\n\n<pre><code> #include &lt;stdio.h&gt;\n\n    int second(int arr[],int size)\n    {\n        int i, max , secondmax;\n\n        if (arr[0] &gt; arr[1]){\n            max = arr[0];\n            secondmax = arr[1];\n        } else {\n            max = arr[1];\n            secondmax = arr[0];\n        }\n        for (i = 2; i &lt; size; i++)\n        {\n            if ((arr[i] &lt; max) &amp;&amp; (arr[i] &lt; secondmax)) {\n                continue;\n            }\n            if ((arr[i] &lt; max) &amp;&amp; (arr[i] &gt; secondmax)) {\n                secondmax = arr[i];\n                continue;\n            }\n            if ((arr[i] &gt; max)) {\n                secondmax = max;\n                max = arr[i];\n                continue;\n            }\n        }\n        return secondmax;\n    }\n    void main()\n    {\n        int arr[] = { 1,10,5,7};\n        int size = sizeof(arr) / sizeof(arr[0]);\n        int secondmax = second(arr,size);\n        printf(\"%d \\n\\n\", secondmax);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6491317,"reputation":1,"user_id":5025301,"display_name":"SOURAV DAS"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1435250438,"creation_date":1435238677,"answer_id":31051667,"question_id":2615712,"body_markdown":"    Scanner sc = new Scanner(System.in);\r\n        \r\n    System.out.println(&quot;\\n number of input sets::&quot;);\r\n    int value=sc.nextInt();\r\n    System.out.println(&quot;\\n input sets::&quot;);\r\n    int[] inputset; \r\n     \r\n    inputset = new int[value];\r\n    for(int i=0;i&lt;value;i++)\r\n    {\r\n        inputset[i]=sc.nextInt();\r\n    }\r\n    int maxvalue=inputset[0];\r\n    int secondval=inputset[0];\r\n    for(int i=1;i&lt;value;i++)\r\n    {\r\n        if(inputset[i]&gt;maxvalue)\r\n       {\r\n            maxvalue=inputset[i];\r\n        }\r\n    }\r\n    for(int i=1;i&lt;value;i++)\r\n    {\r\n        if(inputset[i]&gt;secondval &amp;&amp; inputset[i]&lt;maxvalue)\r\n        {\r\n            secondval=inputset[i];\r\n        }\r\n    }\r\n    System.out.println(&quot;\\n maxvalue&quot;+ maxvalue);\r\n    System.out.println(&quot;\\n secondmaxvalue&quot;+ secondval);\r\n    ","title":"Finding the second highest number in array in Java","body":"<pre><code>Scanner sc = new Scanner(System.in);\n\nSystem.out.println(\"\\n number of input sets::\");\nint value=sc.nextInt();\nSystem.out.println(\"\\n input sets::\");\nint[] inputset; \n\ninputset = new int[value];\nfor(int i=0;i&lt;value;i++)\n{\n    inputset[i]=sc.nextInt();\n}\nint maxvalue=inputset[0];\nint secondval=inputset[0];\nfor(int i=1;i&lt;value;i++)\n{\n    if(inputset[i]&gt;maxvalue)\n   {\n        maxvalue=inputset[i];\n    }\n}\nfor(int i=1;i&lt;value;i++)\n{\n    if(inputset[i]&gt;secondval &amp;&amp; inputset[i]&lt;maxvalue)\n    {\n        secondval=inputset[i];\n    }\n}\nSystem.out.println(\"\\n maxvalue\"+ maxvalue);\nSystem.out.println(\"\\n secondmaxvalue\"+ secondval);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3337298,"reputation":11,"user_id":2804490,"display_name":"Ashish Singh"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1438347168,"creation_date":1438347168,"answer_id":31746689,"question_id":2615712,"body_markdown":"I think for finding the second Highest no we require these lines,if we can use inbuilt function\r\n\r\n    int[] randomIntegers = {1, 5, 4, 2, 8, 1, 1, 6, 7, 8, 9};\r\n\t\tArrays.sort(randomIntegers);\r\n\t\tSystem.out.println(randomIntegers[randomIntegers.length-2]);\r\n\r\n\r\n\r\n","title":"Finding the second highest number in array in Java","body":"<p>I think for finding the second Highest no we require these lines,if we can use inbuilt function</p>\n\n<pre><code>int[] randomIntegers = {1, 5, 4, 2, 8, 1, 1, 6, 7, 8, 9};\n    Arrays.sort(randomIntegers);\n    System.out.println(randomIntegers[randomIntegers.length-2]);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":210048,"reputation":9082,"user_id":461444,"accept_rate":56,"display_name":"AFract"},"score":2,"creation_date":1441716460,"post_id":32458210,"comment_id":52778436,"body_markdown":"Instead of only posting some code, even if it answers the question, please don&#39;t hesitate to clearly comment what it does / how it works. Thanks","body":"Instead of only posting some code, even if it answers the question, please don&#39;t hesitate to clearly comment what it does / how it works. Thanks"}],"tags":[],"owner":{"account_id":6919922,"reputation":1,"user_id":5312908,"display_name":"shiva mothkula"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1458482191,"creation_date":1441716247,"answer_id":32458210,"question_id":2615712,"body_markdown":"              \r\n    int arr[] = {25, 5, 35, 26, 6, 270, 0};\r\n              \r\n    int large1 = arr[0];\r\n    int large2 = arr[1];\r\n              \r\n    for (int i = 2; i &lt; arr.length; i++) {\r\n\r\n        if (arr[i] &gt; large1) {\r\n\r\n            if (large1 &gt; large2)\r\n                large2 = large1;\r\n            large1 = arr[i];\r\n\r\n        } else if (arr[i] &gt; large2)\r\n            large2 = arr[i];                    \r\n    }\r\n              \r\n    System.out.println(&quot;Large1 &quot; + large1);\r\n    System.out.println(&quot;Large2 &quot; + large2);\r\n       ","title":"Finding the second highest number in array in Java","body":"<pre><code>int arr[] = {25, 5, 35, 26, 6, 270, 0};\n\nint large1 = arr[0];\nint large2 = arr[1];\n\nfor (int i = 2; i &lt; arr.length; i++) {\n\n    if (arr[i] &gt; large1) {\n\n        if (large1 &gt; large2)\n            large2 = large1;\n        large1 = arr[i];\n\n    } else if (arr[i] &gt; large2)\n        large2 = arr[i];                    \n}\n\nSystem.out.println(\"Large1 \" + large1);\nSystem.out.println(\"Large2 \" + large2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3289093,"reputation":99,"user_id":2767793,"display_name":"priyank"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1442179470,"creation_date":1442071923,"answer_id":32540549,"question_id":2615712,"body_markdown":"\tstatic int secondLargest(int[] input){\r\n\t\tint largest , secondlargest;\r\n\t\t\t\r\n\t\tif(input[0]&gt;input[1])\r\n\t\t{\r\n\t\t\tlargest=input[0];\r\n\t\t\tsecondlargest = input[1];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tsecondlargest = input[0];\r\n\t\t\tlargest =input[1];\r\n\t\t}\r\n\t\tfor(int i =2 ;i&lt;input.length;i++){\r\n\t\t\tif(input[i]&gt;largest)\r\n\t\t\t{\r\n\t\t\t\tsecondlargest  = largest;\r\n\t\t\t\tlargest = input[i];\r\n\t\t\t}\r\n\t\t\telse if(input[i]&gt;secondlargest){\r\n\t\t\t\tsecondlargest = input[i];\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t}\r\n\t\treturn secondlargest;\r\n\t}","title":"Finding the second highest number in array in Java","body":"<pre><code>static int secondLargest(int[] input){\n    int largest , secondlargest;\n\n    if(input[0]&gt;input[1])\n    {\n        largest=input[0];\n        secondlargest = input[1];\n    }\n    else\n    {\n        secondlargest = input[0];\n        largest =input[1];\n    }\n    for(int i =2 ;i&lt;input.length;i++){\n        if(input[i]&gt;largest)\n        {\n            secondlargest  = largest;\n            largest = input[i];\n        }\n        else if(input[i]&gt;secondlargest){\n            secondlargest = input[i];\n        }\n\n    }\n    return secondlargest;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2356435,"reputation":221,"user_id":2064130,"display_name":"Sarojini2064130"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1458482187,"creation_date":1444350679,"answer_id":33028075,"question_id":2615712,"body_markdown":"Find the second largest number:\r\n\r\n    public class SecondMaxNumbers {\r\n \r\n        public void printTwoMaxNumbers(int[] nums){\r\n            int maxOne = 0;\r\n            int maxTwo = 0;\r\n            for(int n:nums){\r\n                if(maxOne &lt; n){\r\n                    maxTwo = maxOne;\r\n                    maxOne =n;\r\n                } else if(maxTwo &lt; n){\r\n                    maxTwo = n;\r\n                }\r\n            }\r\n            System.out.println(&quot;Second Max Number: &quot;+maxTwo);\r\n        }\r\n     \r\n        public static void main(String a[]){\r\n            int num[] = {10,20,30,40,50,60,70};\r\n            SecondMaxNumbers sec = new SecondMaxNumbers();\r\n            tmn.printTwoMaxNumbers(num);\r\n        }\r\n    }","title":"Finding the second highest number in array in Java","body":"<p>Find the second largest number:</p>\n\n<pre><code>public class SecondMaxNumbers {\n\n    public void printTwoMaxNumbers(int[] nums){\n        int maxOne = 0;\n        int maxTwo = 0;\n        for(int n:nums){\n            if(maxOne &lt; n){\n                maxTwo = maxOne;\n                maxOne =n;\n            } else if(maxTwo &lt; n){\n                maxTwo = n;\n            }\n        }\n        System.out.println(\"Second Max Number: \"+maxTwo);\n    }\n\n    public static void main(String a[]){\n        int num[] = {10,20,30,40,50,60,70};\n        SecondMaxNumbers sec = new SecondMaxNumbers();\n        tmn.printTwoMaxNumbers(num);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3578485,"reputation":11394,"user_id":2987216,"accept_rate":19,"display_name":"Praveen M P"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1446648814,"creation_date":1446648440,"answer_id":33524775,"question_id":2615712,"body_markdown":"I am giving solution that&#39;s not in JAVA program (written in JavaScript), but it takes o(n/2) iteration to find the highest and second highest number.  \r\nWorking fiddler link [Fiddler link][1]\r\n\r\n\r\n\r\n\r\n  [1]: https://jsfiddle.net/rz0yx4xs/\r\n\r\n   \r\n\r\n     var num=[1020215,2000,35,2,54546,456,2,2345,24,545,132,5469,25653,0,2315648978523];\r\n    var j=num.length-1;\r\n    var firstHighest=0,seoncdHighest=0;\r\n    num[0] &gt;num[num.length-1]?(firstHighest=num[0],seoncdHighest=num[num.length-1]):(firstHighest=num[num.length-1],   seoncdHighest=num[0]);\r\n    j--;\r\n    for(var i=1;i&lt;=num.length/2;i++,j--)\r\n    {\r\n       if(num[i] &lt; num[j] )\r\n       {\r\n              if(firstHighest &lt; num[j]){\r\n              seoncdHighest=firstHighest;\r\n               firstHighest= num[j];\r\n              }\r\n               else if(seoncdHighest &lt; num[j] ) {\r\n                   seoncdHighest= num[j];\r\n                   \r\n               }\r\n       }\r\n       else {\r\n           if(firstHighest &lt; num[i])\r\n           {\r\n               seoncdHighest=firstHighest;\r\n               firstHighest= num[i];\r\n               \r\n           }\r\n           else if(seoncdHighest &lt; num[i] ) {\r\n                seoncdHighest= num[i];\r\n               \r\n           }\r\n       }\r\n          \r\n    }         ","title":"Finding the second highest number in array in Java","body":"<p>I am giving solution that's not in JAVA program (written in JavaScript), but it takes o(n/2) iteration to find the highest and second highest number.<br>\nWorking fiddler link <a href=\"https://jsfiddle.net/rz0yx4xs/\" rel=\"nofollow\">Fiddler link</a></p>\n\n<pre><code> var num=[1020215,2000,35,2,54546,456,2,2345,24,545,132,5469,25653,0,2315648978523];\nvar j=num.length-1;\nvar firstHighest=0,seoncdHighest=0;\nnum[0] &gt;num[num.length-1]?(firstHighest=num[0],seoncdHighest=num[num.length-1]):(firstHighest=num[num.length-1],   seoncdHighest=num[0]);\nj--;\nfor(var i=1;i&lt;=num.length/2;i++,j--)\n{\n   if(num[i] &lt; num[j] )\n   {\n          if(firstHighest &lt; num[j]){\n          seoncdHighest=firstHighest;\n           firstHighest= num[j];\n          }\n           else if(seoncdHighest &lt; num[j] ) {\n               seoncdHighest= num[j];\n\n           }\n   }\n   else {\n       if(firstHighest &lt; num[i])\n       {\n           seoncdHighest=firstHighest;\n           firstHighest= num[i];\n\n       }\n       else if(seoncdHighest &lt; num[i] ) {\n            seoncdHighest= num[i];\n\n       }\n   }\n\n}         \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6277349,"reputation":311,"user_id":4879651,"display_name":"Manash Ranjan Dakua"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447864142,"creation_date":1447864142,"answer_id":33785327,"question_id":2615712,"body_markdown":"    public class SecondandThirdHighestElement {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tint[] arr = {1,1,2,3,8,1,2,3,3,3,2,3,101,6,6,7,8,8,1001,99,1,0};\r\n    \t\t// create three temp variable and store arr of first element in that temp variable so that it will compare with other element\r\n    \t\tint firsttemp = arr[0];\r\n    \t\tint secondtemp = arr[0];\r\n    \t\tint thirdtemp = arr[0];\r\n    \t\t//check and find first highest value from array by comparing with other elements if found than save in the first temp variable \r\n    \t\tfor (int i = 0; i &lt; arr.length; i++) {\r\n    \t\t\tif(firsttemp &lt;arr[i]){\r\n    \t\t\t\tfirsttemp =  arr[i];\r\n    \t\t\t}//if\r\n    \t\t\t\r\n    \t\t}//for\r\n    \t\t//check and find the second highest variable by comparing with other elements in an array and find the element and that element should be smaller than first element array\r\n    \t\tfor (int i = 0; i &lt; arr.length; i++) {\r\n    \t\t\tif(secondtemp &lt; arr[i] &amp;&amp; firsttemp&gt;arr[i]){\r\n    \t\t\t\tsecondtemp = arr[i];\r\n    \t\t\t}//if\r\n    \t\t}//for\r\n    \t\t//check and find the third highest variable by comparing with other elements in an array and find the element and that element should be smaller than second element array\r\n    \r\n    \t\tfor (int i = 0; i &lt; arr.length; i++) {\r\n    \t\t\tif(thirdtemp &lt; arr[i] &amp;&amp; secondtemp&gt;arr[i]){\r\n    \t\t\t\tthirdtemp = arr[i];\r\n    \t\t\t}//if\r\n    \t\t}//for\r\n\r\n            System.out.println(&quot;First Highest Value:&quot;+firsttemp);\r\n            System.out.println(&quot;Second Highest Value:&quot;+secondtemp);\r\n            System.out.println(&quot;Third Highest  Value:&quot;+thirdtemp);\r\n    \r\n    \t}//main\r\n    }//class\r\n\r\n","title":"Finding the second highest number in array in Java","body":"<pre><code>public class SecondandThirdHighestElement {\n    public static void main(String[] args) {\n        int[] arr = {1,1,2,3,8,1,2,3,3,3,2,3,101,6,6,7,8,8,1001,99,1,0};\n        // create three temp variable and store arr of first element in that temp variable so that it will compare with other element\n        int firsttemp = arr[0];\n        int secondtemp = arr[0];\n        int thirdtemp = arr[0];\n        //check and find first highest value from array by comparing with other elements if found than save in the first temp variable \n        for (int i = 0; i &lt; arr.length; i++) {\n            if(firsttemp &lt;arr[i]){\n                firsttemp =  arr[i];\n            }//if\n\n        }//for\n        //check and find the second highest variable by comparing with other elements in an array and find the element and that element should be smaller than first element array\n        for (int i = 0; i &lt; arr.length; i++) {\n            if(secondtemp &lt; arr[i] &amp;&amp; firsttemp&gt;arr[i]){\n                secondtemp = arr[i];\n            }//if\n        }//for\n        //check and find the third highest variable by comparing with other elements in an array and find the element and that element should be smaller than second element array\n\n        for (int i = 0; i &lt; arr.length; i++) {\n            if(thirdtemp &lt; arr[i] &amp;&amp; secondtemp&gt;arr[i]){\n                thirdtemp = arr[i];\n            }//if\n        }//for\n\n        System.out.println(\"First Highest Value:\"+firsttemp);\n        System.out.println(\"Second Highest Value:\"+secondtemp);\n        System.out.println(\"Third Highest  Value:\"+thirdtemp);\n\n    }//main\n}//class\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7571676,"reputation":1,"user_id":5745354,"display_name":"James Johney"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1451946829,"creation_date":1451946352,"answer_id":34600988,"question_id":2615712,"body_markdown":"If this question is from the interviewer then please DONT USE SORTING Technique or Don&#39;t use any built in methods like Arrays.sort or Collection.sort. The purpose of this questions is how optimal your solution is in terms of performance so the best option would be just implement with your own logic with O(n-1) implementation. The below code is strictly for beginners and not for experienced guys. \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n      public void printLargest(){\r\n\r\n\r\n        int num[] ={ 900,90,6,7,5000,4,60000,20,3};\r\n\r\n\t\tint largest = num[0];\r\n\r\n\t\tint secondLargest = num[1];\r\n\r\n\t\tfor (int i=1; i&lt;num.length; i++)\r\n\t\t{\r\n\t\t\tif(largest &lt; num[i])\r\n\t\t\t{\r\n\t\t\t\tsecondLargest = largest;\r\n\t\t\t\tlargest = num[i];\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\telse if(secondLargest &lt; num[i]){\r\n\t\t\t\tsecondLargest = num[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Largest : &quot; +largest);\r\n\t\tSystem.out.println(&quot;Second Largest : &quot;+secondLargest);\r\n\t}","title":"Finding the second highest number in array in Java","body":"<p>If this question is from the interviewer then please DONT USE SORTING Technique or Don't use any built in methods like Arrays.sort or Collection.sort. The purpose of this questions is how optimal your solution is in terms of performance so the best option would be just implement with your own logic with O(n-1) implementation. The below code is strictly for beginners and not for experienced guys. </p>\n\n<pre><code>  public void printLargest(){\n\n\n    int num[] ={ 900,90,6,7,5000,4,60000,20,3};\n\n    int largest = num[0];\n\n    int secondLargest = num[1];\n\n    for (int i=1; i&lt;num.length; i++)\n    {\n        if(largest &lt; num[i])\n        {\n            secondLargest = largest;\n            largest = num[i];\n\n\n        }\n        else if(secondLargest &lt; num[i]){\n            secondLargest = num[i];\n        }\n    }\n    System.out.println(\"Largest : \" +largest);\n    System.out.println(\"Second Largest : \"+secondLargest);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6348474,"reputation":326,"user_id":4928269,"display_name":"very hit"},"score":1,"creation_date":1473861266,"post_id":35199468,"comment_id":66302057,"body_markdown":"Hi, your solution is **not O(n/2)**, because the times of comparison determines the compute complexity for this question. Even if you times of iteration is n/2, but every iteration you would compare more than 2 times so that the whole times of comparison is still more than n times. BTW, when we talk about compute complexity, we usually ignore the coefficient, O(0.5n), O(2n), and O(4n), all of them can be seen as the same class.","body":"Hi, your solution is <b>not O(n/2)</b>, because the times of comparison determines the compute complexity for this question. Even if you times of iteration is n/2, but every iteration you would compare more than 2 times so that the whole times of comparison is still more than n times. BTW, when we talk about compute complexity, we usually ignore the coefficient, O(0.5n), O(2n), and O(4n), all of them can be seen as the same class."}],"tags":[],"owner":{"account_id":2705965,"reputation":581,"user_id":2335562,"display_name":"rohan kamat"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458480504,"creation_date":1454584165,"answer_id":35199468,"question_id":2615712,"body_markdown":"Second Largest in O(n/2)\r\n\r\n    public class SecMaxNum {\r\n\t\r\n    \t// second Largest number with O(n/2)\r\n    \t/**\r\n    \t * @author Rohan Kamat\r\n    \t * @Date Feb 04, 2016\r\n    \t */\r\n    \tpublic static void main(String[] args) {\r\n    \t\tint[] input = { 1, 5, 10, 11, 11, 4, 2, 8, 1, 8, 9, 8 };\r\n\t    \tint large = 0, second = 0;\r\n\r\n\t\t    for (int i = 0; i &lt; input.length - 1; i = i + 2) {\r\n    \t\t\t// System.out.println(i);\r\n\t    \t\tint fist = input[i];\r\n    \t\t\tint sec = input[i + 1];\r\n    \t\t\tif (sec &gt;= fist) {\r\n    \t\t\t\tint temp = fist;\r\n    \t\t\t\tfist = sec;\r\n    \t\t\t\tsec = temp;\r\n    \t\t\t}\r\n    \t\t\tif (fist &gt;= second) {\r\n    \t\t\t\tif (fist &gt;= large) {\r\n    \t\t\t\t\tlarge = fist;\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tsecond = fist;\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t}\r\n    \r\n    \t\t\tif (sec &gt;= second) {\r\n\t    \t\t\tif (sec &gt;= large) {\r\n    \t\t\t\t\tlarge = sec;\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tsecond = sec;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }","title":"Finding the second highest number in array in Java","body":"<p>Second Largest in O(n/2)</p>\n\n<pre><code>public class SecMaxNum {\n\n    // second Largest number with O(n/2)\n    /**\n     * @author Rohan Kamat\n     * @Date Feb 04, 2016\n     */\n    public static void main(String[] args) {\n        int[] input = { 1, 5, 10, 11, 11, 4, 2, 8, 1, 8, 9, 8 };\n        int large = 0, second = 0;\n\n        for (int i = 0; i &lt; input.length - 1; i = i + 2) {\n            // System.out.println(i);\n            int fist = input[i];\n            int sec = input[i + 1];\n            if (sec &gt;= fist) {\n                int temp = fist;\n                fist = sec;\n                sec = temp;\n            }\n            if (fist &gt;= second) {\n                if (fist &gt;= large) {\n                    large = fist;\n                } else {\n                    second = fist;\n                }\n\n            }\n\n            if (sec &gt;= second) {\n                if (sec &gt;= large) {\n                    large = sec;\n                } else {\n                    second = sec;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7005288,"reputation":88,"user_id":5369911,"display_name":"SagaciousLearner"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455246353,"creation_date":1455246353,"answer_id":35354148,"question_id":2615712,"body_markdown":"Problem:\r\nThe problem is to get the second largest array element. \r\n\r\nObservation:\r\nSecond largest number is defined as the number that has the minimum difference when subtracted from the maximum element in the array.\r\n\r\nSolution:\r\nThis is a two pass solution. First pass is to find the maximum number. Second pass is to find the element that has minimum difference with the maximum element as compared to other array elements. Example: In the array [2, 3, 6, 6, 5] maximum = 6 and second maximum = 5 , since it has the minimum difference to the maximum element 6 - 5 = 1 the solution for second largest = 5\r\n\r\n    function printSecondMax(myArray) {\r\n      var x, max = myArray[0];\r\n      // Find maximum element \r\n      for(x in myArray){\r\n         if(max &lt; myArray[x]){\r\n            max = myArray[x];\r\n         }\r\n      }\r\n      var secondMax = myArray[0], diff = max - secondMax;\r\n      // Find second max, an element that has min diff with the max\r\n      for(x in myArray){\r\n        if(diff != 0 &amp;&amp; (max - myArray[x]) != 0 &amp;&amp; diff &gt; (max - myArray[x])){\r\n            secondMax = myArray[x];\r\n            diff = max - secondMax;\r\n        }\r\n      }\r\n      console.log(secondMax);\r\n    }\r\n\r\nComplexity : O(n), This is the simplest way to do this.\r\n\r\nFor finding maximum element even more efficiently one can look into [max heap][1], a call to max-heapify will take O(log n) time to find the max and then pop-ing the top element gives maximum. To get the second maximum, max-heapify after pop-ing the top and keep pop-ing till you get a number that is less than maximum. That will be the second maximum. This solution has O(n log n) complexity.   \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Min-max_heap","title":"Finding the second highest number in array in Java","body":"<p>Problem:\nThe problem is to get the second largest array element. </p>\n\n<p>Observation:\nSecond largest number is defined as the number that has the minimum difference when subtracted from the maximum element in the array.</p>\n\n<p>Solution:\nThis is a two pass solution. First pass is to find the maximum number. Second pass is to find the element that has minimum difference with the maximum element as compared to other array elements. Example: In the array [2, 3, 6, 6, 5] maximum = 6 and second maximum = 5 , since it has the minimum difference to the maximum element 6 - 5 = 1 the solution for second largest = 5</p>\n\n<pre><code>function printSecondMax(myArray) {\n  var x, max = myArray[0];\n  // Find maximum element \n  for(x in myArray){\n     if(max &lt; myArray[x]){\n        max = myArray[x];\n     }\n  }\n  var secondMax = myArray[0], diff = max - secondMax;\n  // Find second max, an element that has min diff with the max\n  for(x in myArray){\n    if(diff != 0 &amp;&amp; (max - myArray[x]) != 0 &amp;&amp; diff &gt; (max - myArray[x])){\n        secondMax = myArray[x];\n        diff = max - secondMax;\n    }\n  }\n  console.log(secondMax);\n}\n</code></pre>\n\n<p>Complexity : O(n), This is the simplest way to do this.</p>\n\n<p>For finding maximum element even more efficiently one can look into <a href=\"https://en.wikipedia.org/wiki/Min-max_heap\" rel=\"nofollow\">max heap</a>, a call to max-heapify will take O(log n) time to find the max and then pop-ing the top element gives maximum. To get the second maximum, max-heapify after pop-ing the top and keep pop-ing till you get a number that is less than maximum. That will be the second maximum. This solution has O(n log n) complexity.   </p>\n"},{"comments":[{"owner":{"account_id":1851431,"reputation":44947,"user_id":1677912,"accept_rate":82,"display_name":"Mogsdad"},"score":2,"creation_date":1456937293,"post_id":35752968,"comment_id":59179831,"body_markdown":"Please [edit] with more information. Code-only and &quot;try this&quot; answers are [discouraged](//meta.stackexchange.com/questions/196187), because they contain no searchable content, and don&#39;t explain why someone should &quot;try this&quot;. We make an effort here to be a resource for knowledge.","body":"Please <a href=\"https://stackoverflow.com/posts/35752968/edit\">edit</a> with more information. Code-only and &quot;try this&quot; answers are <a href=\"//meta.stackexchange.com/questions/196187\">discouraged</a>, because they contain no searchable content, and don&#39;t explain why someone should &quot;try this&quot;. We make an effort here to be a resource for knowledge."}],"tags":[],"owner":{"account_id":7893408,"reputation":73,"user_id":5962882,"display_name":"Farhan Ghaffar"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1457037683,"creation_date":1456936325,"answer_id":35752968,"question_id":2615712,"body_markdown":"Please try this one: Using this method, You can fined second largest number in array even array contain random number. The first loop is used to solve the problem if largest number come first index of array.\r\n\r\n    public class secondLargestnum {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tint[] array = new int[6];\r\n    \t\tarray[0] = 10;\r\n    \t\tarray[1] = 80;\r\n    \t\tarray[2] = 5;\r\n    \t\tarray[3] = 6;\r\n    \t\tarray[4] = 50;\r\n    \t\tarray[5] = 60;\r\n    \t\tint tem = 0;\r\n    \t\tfor (int i = 0; i &lt; array.length; i++) {\r\n    \t\t\tif (array[0]&gt;array[i]) {\r\n    \t\t\t\ttem = array[0];\r\n    \t\t\tarray[0] = array[array.length-1];\r\n    \t\t\tarray[array.length-1] = tem;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tInteger largest = array[0];\r\n    \t\tInteger second_largest = array[0];\r\n    \t\t\r\n    \t\tfor (int i = 0; i &lt; array.length; i++) {\r\n    \t\t\t\r\n    \t\t\tif (largest&lt;array[i]) {\r\n    \t\t\t\tsecond_large = largest;\r\n    \t\t\t\tlargest = array[i];\r\n    \t\t\t}\r\n    \t\t\telse if (second_large&lt;array[i]) {\r\n    \t\t\t\tsecond_large = array[i];\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \t\t\r\n    \t\t}\r\n    System.out.println(&quot;largest number &quot;+largest+&quot; and second largest number &quot;+second_largest);\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Finding the second highest number in array in Java","body":"<p>Please try this one: Using this method, You can fined second largest number in array even array contain random number. The first loop is used to solve the problem if largest number come first index of array.</p>\n\n<pre><code>public class secondLargestnum {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        int[] array = new int[6];\n        array[0] = 10;\n        array[1] = 80;\n        array[2] = 5;\n        array[3] = 6;\n        array[4] = 50;\n        array[5] = 60;\n        int tem = 0;\n        for (int i = 0; i &lt; array.length; i++) {\n            if (array[0]&gt;array[i]) {\n                tem = array[0];\n            array[0] = array[array.length-1];\n            array[array.length-1] = tem;\n            }\n        }\n        Integer largest = array[0];\n        Integer second_largest = array[0];\n\n        for (int i = 0; i &lt; array.length; i++) {\n\n            if (largest&lt;array[i]) {\n                second_large = largest;\n                largest = array[i];\n            }\n            else if (second_large&lt;array[i]) {\n                second_large = array[i];\n\n            }\n\n        }\nSystem.out.println(\"largest number \"+largest+\" and second largest number \"+second_largest);\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6868634,"reputation":129,"user_id":5279988,"display_name":"SanA"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458478740,"creation_date":1458476316,"answer_id":36113595,"question_id":2615712,"body_markdown":"\r\npublic class SecondHighInIntArray {\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tint[] intArray=new int[]{2,2,1};\r\n\t\t\t\t//{2,2,1,12,3,7,9,-1,-5,7};\r\n\t\tint secHigh=findSecHigh(intArray);\r\n\t\tSystem.out.println(secHigh);\r\n\t}\r\n\r\n\tprivate static int findSecHigh(int[] intArray) {\r\n\r\n\t\tint highest=Integer.MIN_VALUE;\r\n\t\tint sechighest=Integer.MIN_VALUE;\r\n\t\tint len=intArray.length;\r\n\t\tfor(int i=0;i&lt;len;i++)\r\n\t\t{\r\n\t\t\tif(intArray[i]&gt;highest)\r\n\t\t\t{\r\n\t\t\t\tsechighest=highest;\r\n\t\t\t\thighest=intArray[i];\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(intArray[i]&lt;highest &amp;&amp; intArray[i]&gt;sechighest)\r\n\t\t\t{\r\n\t\t\t\tsechighest=intArray[i];\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\treturn sechighest;\r\n\t}\r\n\r\n}\r\n","title":"Finding the second highest number in array in Java","body":"<p>public class SecondHighInIntArray {</p>\n\n<pre><code>public static void main(String[] args) {\n    int[] intArray=new int[]{2,2,1};\n            //{2,2,1,12,3,7,9,-1,-5,7};\n    int secHigh=findSecHigh(intArray);\n    System.out.println(secHigh);\n}\n\nprivate static int findSecHigh(int[] intArray) {\n\n    int highest=Integer.MIN_VALUE;\n    int sechighest=Integer.MIN_VALUE;\n    int len=intArray.length;\n    for(int i=0;i&lt;len;i++)\n    {\n        if(intArray[i]&gt;highest)\n        {\n            sechighest=highest;\n            highest=intArray[i];\n            continue;\n        }\n\n        if(intArray[i]&lt;highest &amp;&amp; intArray[i]&gt;sechighest)\n        {\n            sechighest=intArray[i];\n            continue;\n        }\n\n\n    }\n    return sechighest;\n}\n</code></pre>\n\n<p>}</p>\n"},{"comments":[{"owner":{"account_id":8020875,"reputation":7408,"user_id":6049581,"display_name":"Frits"},"score":7,"creation_date":1467805343,"post_id":38222768,"comment_id":63868313,"body_markdown":"Please try to avoid just dumping a code as an answer and try to explain what it does and why. Your code might not be obvious for people who do not have the relevant coding experience.","body":"Please try to avoid just dumping a code as an answer and try to explain what it does and why. Your code might not be obvious for people who do not have the relevant coding experience."}],"tags":[],"owner":{"account_id":6925725,"reputation":10963,"user_id":5316872,"display_name":"Keshav Gera"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1625225591,"creation_date":1467803993,"answer_id":38222768,"question_id":2615712,"body_markdown":"\r\n\r\n    let array = [0,12,74,26,82,176,189,8,55,3,189]; \r\n    let highest=0 ;\r\n    let secondHighest = 0;\r\n    for (let i = 0; i &lt; array.length; i++) { \r\n    if (array[i] &gt; highest) { \r\n        // ...shift the current highest number to second highest\r\n        secondHighest = highest; \r\n        // ...and set the new highest.\r\n        highest = array[i]; \r\n    } else if (highest &gt; array[i] &gt; secondHighest) { \r\n       // Just replace the second highest\r\n       secondHighest = array[i]; \r\n      }\r\n    }\r\n    console.log(secondHighest);\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/67530020/5316872\r\n  [2]: https://i.stack.imgur.com/Qsy46.png\r\n  [3]: https://i.stack.imgur.com/WTdD9.png","title":"Finding the second highest number in array in Java","body":"<pre><code>let array = [0,12,74,26,82,176,189,8,55,3,189]; \nlet highest=0 ;\nlet secondHighest = 0;\nfor (let i = 0; i &lt; array.length; i++) { \nif (array[i] &gt; highest) { \n    // ...shift the current highest number to second highest\n    secondHighest = highest; \n    // ...and set the new highest.\n    highest = array[i]; \n} else if (highest &gt; array[i] &gt; secondHighest) { \n   // Just replace the second highest\n   secondHighest = array[i]; \n  }\n}\nconsole.log(secondHighest);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/WTdD9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WTdD9.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":8840285,"reputation":61,"user_id":6602967,"display_name":"devasghar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1471179195,"creation_date":1471179195,"answer_id":38942442,"question_id":2615712,"body_markdown":"Use following function      \r\n`\r\n\r\n    public static int secHigh(int arr[]){\r\n                int firstHigh = 0,secHigh = 0;\r\n                for(int x: arr){\r\n                    if(x &gt; firstHigh){\r\n                        secHigh = firstHigh;\r\n                        firstHigh = x;\r\n                    }else if(x &gt; secHigh){\r\n                        secHigh = x;\r\n                    }\r\n                }\r\n                return secHigh;\r\n            }\r\n\r\nFunction Call\r\n\r\n    int secondHigh = secHigh(arr);","title":"Finding the second highest number in array in Java","body":"<p>Use following function<br>\n`</p>\n\n<pre><code>public static int secHigh(int arr[]){\n            int firstHigh = 0,secHigh = 0;\n            for(int x: arr){\n                if(x &gt; firstHigh){\n                    secHigh = firstHigh;\n                    firstHigh = x;\n                }else if(x &gt; secHigh){\n                    secHigh = x;\n                }\n            }\n            return secHigh;\n        }\n</code></pre>\n\n<p>Function Call</p>\n\n<pre><code>int secondHigh = secHigh(arr);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9939178,"reputation":1,"user_id":7356457,"display_name":"Asish"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1483071908,"creation_date":1483069124,"answer_id":41390284,"question_id":2615712,"body_markdown":"    import java.util.Scanner;\r\n    \r\n    public class SecondLargest {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tScanner sc = new Scanner(System.in);\r\n    \t\tSystem.out.print(&quot;Enter size of array : &quot;);\r\n    \t\tint n = sc.nextInt();\r\n    \t\tint ar[] = new int[n];\r\n    \t\tfor(int i=0;i&lt;n;i++)\r\n    \t\t{\r\n    \t\t\tSystem.out.print(&quot;Enter value for array : &quot;);\r\n    \t\t\tar[i] = sc.nextInt();\r\n    \t\t}\r\n    \t\tint m=ar[0],m2=ar[0];\r\n    \t\tfor(int i=0;i&lt;n;i++)\r\n    \t\t{\r\n    \t\t\tif(ar[i]&gt;m)\r\n    \t\t\t\tm=ar[i];\r\n    \t\t}\r\n    \t\tfor(int i=0;i&lt;n;i++)\r\n    \t\t{\r\n    \t\t\tif(ar[i]&gt;m2 &amp;&amp; ar[i]&lt;m)\r\n    \t\t\t\tm2=ar[i];\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;Second largest : &quot;+m2);\r\n    \t\tsc.close();\r\n    \t}\r\n    }\r\n\r\n","title":"Finding the second highest number in array in Java","body":"<pre><code>import java.util.Scanner;\n\npublic class SecondLargest {\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.print(\"Enter size of array : \");\n        int n = sc.nextInt();\n        int ar[] = new int[n];\n        for(int i=0;i&lt;n;i++)\n        {\n            System.out.print(\"Enter value for array : \");\n            ar[i] = sc.nextInt();\n        }\n        int m=ar[0],m2=ar[0];\n        for(int i=0;i&lt;n;i++)\n        {\n            if(ar[i]&gt;m)\n                m=ar[i];\n        }\n        for(int i=0;i&lt;n;i++)\n        {\n            if(ar[i]&gt;m2 &amp;&amp; ar[i]&lt;m)\n                m2=ar[i];\n        }\n        System.out.println(\"Second largest : \"+m2);\n        sc.close();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6795473,"reputation":36,"user_id":5230960,"display_name":"Rahul Chauhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1496145696,"creation_date":1496145387,"answer_id":44261614,"question_id":2615712,"body_markdown":"    public void findMax(int a[]) {\r\n\t\tint large = Integer.MIN_VALUE;\r\n\t\tint secondLarge = Integer.MIN_VALUE;\r\n\t\tfor (int i = 0; i &lt; a.length; i++) {\r\n\t\t\tif (large &lt; a[i]) {\r\n\t\t\t\tsecondLarge = large;\r\n\t\t\t\tlarge = a[i];\r\n\t\t\t} else if (a[i] &gt; secondLarge) {\r\n\t\t\t\tif (a[i] != large) {\r\n\t\t\t\t\tsecondLarge = a[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Large number &quot; + large + &quot; Second Large  number &quot; + secondLarge);\r\n\t}\r\n\r\nThe above code has been tested with integer arrays having duplicate entries, negative values. Largest number and second largest number are retrived in one pass. This code only fails if array only contains multiple copy of same number like {8,8,8,8} or having only one number.","title":"Finding the second highest number in array in Java","body":"<pre><code>public void findMax(int a[]) {\n    int large = Integer.MIN_VALUE;\n    int secondLarge = Integer.MIN_VALUE;\n    for (int i = 0; i &lt; a.length; i++) {\n        if (large &lt; a[i]) {\n            secondLarge = large;\n            large = a[i];\n        } else if (a[i] &gt; secondLarge) {\n            if (a[i] != large) {\n                secondLarge = a[i];\n            }\n        }\n    }\n    System.out.println(\"Large number \" + large + \" Second Large  number \" + secondLarge);\n}\n</code></pre>\n\n<p>The above code has been tested with integer arrays having duplicate entries, negative values. Largest number and second largest number are retrived in one pass. This code only fails if array only contains multiple copy of same number like {8,8,8,8} or having only one number.</p>\n"},{"comments":[{"owner":{"account_id":9844958,"reputation":1760,"user_id":7292819,"display_name":"Gary99"},"score":1,"creation_date":1497619807,"post_id":44589817,"comment_id":76168556,"body_markdown":"It may help if you explain your answer some. What was the problem with the OP&#39;s code? How does this fix it?","body":"It may help if you explain your answer some. What was the problem with the OP&#39;s code? How does this fix it?"}],"tags":[],"owner":{"account_id":11132123,"reputation":11,"user_id":8171807,"display_name":"Dheeraj Devadiga"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497617825,"creation_date":1497617825,"answer_id":44589817,"question_id":2615712,"body_markdown":"    public class SecondLargestNumber\r\n    {\r\n      public static void main(String[] args)\r\n      {\r\n        int[] var={-11,-11,-11,-11,115,-11,-9};\r\n        int largest = 0;\r\n        int secLargest = 0;\r\n        if(var.length == 1)\r\n        {\r\n          largest = var[0];\r\n          secLargest = var[0];\r\n        }\r\n        else if(var.length &gt; 1)\r\n        {\r\n      \t  largest= var[0];\r\n      \t  secLargest = var[1];\r\n    \t  for(int i=1;i&lt;var.length;i++)\r\n    \t  {\r\n            if(secLargest!=largest)\r\n            {\r\n      \t\t  if(var[i]&gt;largest)\r\n      \t\t  { \r\n              \tsecLargest = largest;\r\n        \t\tlargest = var[i];\r\n      \t\t  }\r\n      \t\t  else if(var[i]&gt;secLargest &amp;&amp; var[i] != largest)\r\n      \t\t  {\r\n        \t\tsecLargest= var[i];\r\n      \t\t  }\r\n            }\r\n            else\r\n            {\r\n          \t  if(var[i]&gt;largest)\r\n              {\r\n               secLargest = largest;\r\n               largest = var[i];\r\n              }\r\n              else\r\n              {\r\n               secLargest = var[i];\r\n              }\r\n           }\r\n    \t}\r\n      }\r\n      \r\n        System.out.println(&quot;Largest: &quot;+largest+&quot; Second Largest: &quot;+secLargest);\r\n      }\r\n    }","title":"Finding the second highest number in array in Java","body":"<pre><code>public class SecondLargestNumber\n{\n  public static void main(String[] args)\n  {\n    int[] var={-11,-11,-11,-11,115,-11,-9};\n    int largest = 0;\n    int secLargest = 0;\n    if(var.length == 1)\n    {\n      largest = var[0];\n      secLargest = var[0];\n    }\n    else if(var.length &gt; 1)\n    {\n      largest= var[0];\n      secLargest = var[1];\n      for(int i=1;i&lt;var.length;i++)\n      {\n        if(secLargest!=largest)\n        {\n          if(var[i]&gt;largest)\n          { \n            secLargest = largest;\n            largest = var[i];\n          }\n          else if(var[i]&gt;secLargest &amp;&amp; var[i] != largest)\n          {\n            secLargest= var[i];\n          }\n        }\n        else\n        {\n          if(var[i]&gt;largest)\n          {\n           secLargest = largest;\n           largest = var[i];\n          }\n          else\n          {\n           secLargest = var[i];\n          }\n       }\n    }\n  }\n\n    System.out.println(\"Largest: \"+largest+\" Second Largest: \"+secLargest);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2012183,"reputation":9,"user_id":1800375,"display_name":"Venkata"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1500182417,"creation_date":1500182417,"answer_id":45125298,"question_id":2615712,"body_markdown":"       /* Function to print the second largest elements */\r\n        void print2largest(int arr[], int arr_size)\r\n        {\r\n       int i, first, second;\r\n \r\n       /* There should be atleast two elements */\r\n       if (arr_size &lt; 2)\r\n       {\r\n        printf(&quot; Invalid Input &quot;);\r\n        return;\r\n        }\r\n \r\n       first = second = INT_MIN;\r\n       for (i = 0; i &lt; arr_size ; i ++)\r\n       {\r\n        /* If current element is smaller than first\r\n           then update both first and second */\r\n        if (arr[i] &gt; first)\r\n        {\r\n            second = first;\r\n            first = arr[i];\r\n        }\r\n \r\n        /* If arr[i] is in between first and \r\n           second then update second  */\r\n        else if (arr[i] &gt; second &amp;&amp; arr[i] != first)\r\n            second = arr[i];\r\n       }\r\n       if (second == INT_MIN)\r\n        printf(&quot;There is no second largest elementn&quot;);\r\n        else\r\n        printf(&quot;The second largest element is %dn&quot;, second);\r\n        }","title":"Finding the second highest number in array in Java","body":"<pre><code>   /* Function to print the second largest elements */\n    void print2largest(int arr[], int arr_size)\n    {\n   int i, first, second;\n\n   /* There should be atleast two elements */\n   if (arr_size &lt; 2)\n   {\n    printf(\" Invalid Input \");\n    return;\n    }\n\n   first = second = INT_MIN;\n   for (i = 0; i &lt; arr_size ; i ++)\n   {\n    /* If current element is smaller than first\n       then update both first and second */\n    if (arr[i] &gt; first)\n    {\n        second = first;\n        first = arr[i];\n    }\n\n    /* If arr[i] is in between first and \n       second then update second  */\n    else if (arr[i] &gt; second &amp;&amp; arr[i] != first)\n        second = arr[i];\n   }\n   if (second == INT_MIN)\n    printf(\"There is no second largest elementn\");\n    else\n    printf(\"The second largest element is %dn\", second);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7767540,"reputation":49,"user_id":5878297,"display_name":"RKP"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1500667324,"creation_date":1500667324,"answer_id":45245849,"question_id":2615712,"body_markdown":"I have got the simplest logic to find the second largest number may be, it&#39;s not.\r\nThe logic find sum of two number in the array which has the highest value and then check which is greater among two simple............\r\n       \r\n    int\tar[]={611,4,556,107,5,55,811};\r\n\tint sum=ar[0]+ar[1];\r\n\tint temp=0;\r\n\tint m=ar[0];\r\n\tint n=ar[1];\r\n\tfor(int i=0;i&lt;ar.length;i++){\r\n\t\tfor(int j=i;j&lt;ar.length;j++){\r\n\t\t\tif(i!=j){\r\n\t\t\ttemp=ar[i]+ar[j];\r\n\t\t\tif(temp&gt;sum){\r\n\t\t\t\tsum=temp;\r\n\t\t\t\tm=ar[i];\r\n\t\t\t\tn=ar[j];\r\n\t\t\t}\r\n\t\t\ttemp=0;\r\n\t\t\t\r\n\t\t}\r\n\t\t}\r\n\t}\r\n\tif(m&gt;n){\r\n\t\tSystem.out.println(n);\r\n\t\t\r\n\t}\r\n\telse{\r\n\t\tSystem.out.println(m);\r\n\t}","title":"Finding the second highest number in array in Java","body":"<p>I have got the simplest logic to find the second largest number may be, it's not.\nThe logic find sum of two number in the array which has the highest value and then check which is greater among two simple............</p>\n\n<pre><code>int ar[]={611,4,556,107,5,55,811};\nint sum=ar[0]+ar[1];\nint temp=0;\nint m=ar[0];\nint n=ar[1];\nfor(int i=0;i&lt;ar.length;i++){\n    for(int j=i;j&lt;ar.length;j++){\n        if(i!=j){\n        temp=ar[i]+ar[j];\n        if(temp&gt;sum){\n            sum=temp;\n            m=ar[i];\n            n=ar[j];\n        }\n        temp=0;\n\n    }\n    }\n}\nif(m&gt;n){\n    System.out.println(n);\n\n}\nelse{\n    System.out.println(m);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5096768,"reputation":1551,"user_id":4087817,"display_name":"ngg"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1503377872,"creation_date":1503377872,"answer_id":45809177,"question_id":2615712,"body_markdown":"import java.util.Scanner;\r\n\r\npublic class SecondHighestFromArrayTest {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner scan = new Scanner(System.in);\r\n\t\tSystem.out.println(&quot;Enter size of Array&quot;);\r\n\t\tint size = scan.nextInt();\r\n\t\tint[] arr = new int[size];\r\n\t\tfor (int i = 0; i &lt; size; i++) {\r\n\t\t\tarr[i] = scan.nextInt();\r\n\t\t}\r\n\t\tSystem.out.println(&quot;second highest element &quot; + getSecondHighest(arr));\r\n\t}\r\n\r\n\tpublic static int getSecondHighest(int arr[]) {\r\n\t\tint firstHighest = arr[0];\r\n\t\tint secondHighest = arr[0];\r\n\t\tfor (int i = 0; i &lt; arr.length; i++) {\r\n\t\t\tif (arr[i] &gt; firstHighest) {\r\n\t\t\t\tsecondHighest = firstHighest;\r\n\t\t\t\tfirstHighest = arr[i];\r\n\t\t\t} else if (arr[i] &gt; secondHighest) {\r\n\t\t\t\tsecondHighest = arr[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn secondHighest;\r\n\t}\r\n}","title":"Finding the second highest number in array in Java","body":"<p>import java.util.Scanner;</p>\n\n<p>public class SecondHighestFromArrayTest {</p>\n\n<pre><code>public static void main(String[] args) {\n    Scanner scan = new Scanner(System.in);\n    System.out.println(\"Enter size of Array\");\n    int size = scan.nextInt();\n    int[] arr = new int[size];\n    for (int i = 0; i &lt; size; i++) {\n        arr[i] = scan.nextInt();\n    }\n    System.out.println(\"second highest element \" + getSecondHighest(arr));\n}\n\npublic static int getSecondHighest(int arr[]) {\n    int firstHighest = arr[0];\n    int secondHighest = arr[0];\n    for (int i = 0; i &lt; arr.length; i++) {\n        if (arr[i] &gt; firstHighest) {\n            secondHighest = firstHighest;\n            firstHighest = arr[i];\n        } else if (arr[i] &gt; secondHighest) {\n            secondHighest = arr[i];\n        }\n    }\n    return secondHighest;\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":11260258,"reputation":404,"user_id":8258820,"accept_rate":20,"display_name":"Boris "},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1512043648,"creation_date":1512043648,"answer_id":47573143,"question_id":2615712,"body_markdown":"My idea is that you assume that first and second members of the array are your first max and second max. Then you take each new member of an array and compare it with the 2nd max. Don&#39;t forget to compare 2nd max with the 1st one. If it&#39;s bigger, just swap them.\r\n\r\n       public static int getMax22(int[] arr){\r\n        int max1 = arr[0];\r\n        int max2 = arr[1];\r\n        for (int i = 2; i &lt; arr.length; i++){\r\n            if (arr[i] &gt; max2)\r\n            {\r\n                max2 = arr[i];\r\n            }\r\n\r\n            if (max2 &gt; max1)\r\n            {\r\n                int temp = max1;\r\n                max1 = max2;\r\n                max2 = temp;\r\n            }\r\n        }\r\n         return max2;\r\n    }\r\n","title":"Finding the second highest number in array in Java","body":"<p>My idea is that you assume that first and second members of the array are your first max and second max. Then you take each new member of an array and compare it with the 2nd max. Don't forget to compare 2nd max with the 1st one. If it's bigger, just swap them.</p>\n\n<pre><code>   public static int getMax22(int[] arr){\n    int max1 = arr[0];\n    int max2 = arr[1];\n    for (int i = 2; i &lt; arr.length; i++){\n        if (arr[i] &gt; max2)\n        {\n            max2 = arr[i];\n        }\n\n        if (max2 &gt; max1)\n        {\n            int temp = max1;\n            max1 = max2;\n            max2 = temp;\n        }\n    }\n     return max2;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3236183,"reputation":506,"user_id":2730349,"display_name":"Avinash Kadam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523095595,"creation_date":1523095595,"answer_id":49706203,"question_id":2615712,"body_markdown":"The simplest way is - \r\n\r\n    public class SecondLargest {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tint[] arr = { 1, 2, 5, 6, 3 };\r\n    \r\n    \t\tint first = Integer.MIN_VALUE;\r\n    \t\tint second = Integer.MIN_VALUE;\r\n    \t\tfor (int i = 0; i &lt; arr.length; i++) {\r\n    \t\t\t// If current element is smaller than first then update both first\r\n    \t\t\t// and second\r\n    \t\t\tif (arr[i] &gt; first) {\r\n    \t\t\t\tsecond = first;\r\n    \t\t\t\tfirst = arr[i];\r\n    \t\t\t}\r\n    \t\t\t// If arr[i] is in between first and second then update second\r\n    \t\t\telse if (arr[i] &gt; second &amp;&amp; arr[i] != first) {\r\n    \t\t\t\tsecond = arr[i];\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }","title":"Finding the second highest number in array in Java","body":"<p>The simplest way is - </p>\n\n<pre><code>public class SecondLargest {\n    public static void main(String[] args) {\n        int[] arr = { 1, 2, 5, 6, 3 };\n\n        int first = Integer.MIN_VALUE;\n        int second = Integer.MIN_VALUE;\n        for (int i = 0; i &lt; arr.length; i++) {\n            // If current element is smaller than first then update both first\n            // and second\n            if (arr[i] &gt; first) {\n                second = first;\n                first = arr[i];\n            }\n            // If arr[i] is in between first and second then update second\n            else if (arr[i] &gt; second &amp;&amp; arr[i] != first) {\n                second = arr[i];\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8004185,"reputation":1391,"user_id":6037956,"display_name":"Soudipta Dutta"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1529198406,"creation_date":1529198406,"answer_id":50892942,"question_id":2615712,"body_markdown":"The second largest element in the array :\r\nIN Java:\r\n\r\n\r\n    class test2{\r\n    \tpublic static void main(String[] args) {\r\n    \r\n    int a[] = {1,2,3,9,5,7,6,4,8};\r\n    Arrays.sort(a);\r\n    int aa = a[a.length -2 ];\r\n    System.out.println(aa);\r\n    \r\n    \t\r\n    \t}//main\r\n    \t\r\n    }//end\r\n\r\nIn Python :\r\n\r\n    a = [1, 2, 3, 9, 5, 7, 6, 4, 8]\r\n    \r\n    aa = sorted(list(a))\r\n    print(aa)\r\n    aaa = aa[-2]\r\n    print(aaa)\r\n\r\n","title":"Finding the second highest number in array in Java","body":"<p>The second largest element in the array :\nIN Java:</p>\n\n<pre><code>class test2{\n    public static void main(String[] args) {\n\nint a[] = {1,2,3,9,5,7,6,4,8};\nArrays.sort(a);\nint aa = a[a.length -2 ];\nSystem.out.println(aa);\n\n\n    }//main\n\n}//end\n</code></pre>\n\n<p>In Python :</p>\n\n<pre><code>a = [1, 2, 3, 9, 5, 7, 6, 4, 8]\n\naa = sorted(list(a))\nprint(aa)\naaa = aa[-2]\nprint(aaa)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1435254,"reputation":29439,"user_id":4826457,"display_name":"Suraj Rao"},"score":1,"creation_date":1560430085,"post_id":56580843,"comment_id":99739462,"body_markdown":"While this code may solve the question, [including an explanation](//meta.stackexchange.com/q/114762) of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please [edit] your answer to add explanations and give an indication of what limitations and assumptions apply.","body":"While this code may solve the question, <a href=\"//meta.stackexchange.com/q/114762\">including an explanation</a> of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please <a href=\"https://stackoverflow.com/posts/56580843/edit\">edit</a> your answer to add explanations and give an indication of what limitations and assumptions apply."}],"tags":[],"owner":{"account_id":10995672,"reputation":572,"user_id":8077972,"display_name":"Manjitha Teshara"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560582167,"creation_date":1560430006,"answer_id":56580843,"question_id":2615712,"body_markdown":"This java program help to find second highest number in any given array.\r\nFirst we have to get highest value and then we have to go second one.\r\n\r\n    class Demo{\r\n    \tpublic static void main(String args[]){\r\n    \t\tint arr[]={321,321,321,43,65,234,56,-1,4,45,-67};\r\n    \t\tint max=arr[0];\r\n    \t\tint len=arr.length;\r\n    \t\tfor(int i=0;i&lt;len;i++){\r\n    \t\t\tif(max&lt;arr[i]){\r\n    \t\t\t\tmax=arr[i];\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;Max value is &quot;+max);\r\n    \t\t\r\n    \t\tint secMax=arr[0];\r\n    \t\tfor(int j=0;j&lt;len;j++){\r\n    \t\t\tif(max&gt;arr[j]){\r\n    \t\t\t\tif(secMax&lt;arr[j]){\r\n    \t\t\t\t\tsecMax=arr[j];\r\n    \t\t\t\t}\r\n    \t\t\t\telse if(secMax&gt;arr[j]){\r\n    \t\t\t\t\tsecMax=arr[j];\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \t\t\telse if(max==arr[j]){\r\n    \t\t\t\t//\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\t\tSystem.out.println(&quot;Sec Max value is &quot;+secMax);\r\n    \r\n    \t}\r\n    }","title":"Finding the second highest number in array in Java","body":"<p>This java program help to find second highest number in any given array.\nFirst we have to get highest value and then we have to go second one.</p>\n\n<pre><code>class Demo{\n    public static void main(String args[]){\n        int arr[]={321,321,321,43,65,234,56,-1,4,45,-67};\n        int max=arr[0];\n        int len=arr.length;\n        for(int i=0;i&lt;len;i++){\n            if(max&lt;arr[i]){\n                max=arr[i];\n            }\n        }\n\n        System.out.println(\"Max value is \"+max);\n\n        int secMax=arr[0];\n        for(int j=0;j&lt;len;j++){\n            if(max&gt;arr[j]){\n                if(secMax&lt;arr[j]){\n                    secMax=arr[j];\n                }\n                else if(secMax&gt;arr[j]){\n                    secMax=arr[j];\n                }\n\n            }\n            else if(max==arr[j]){\n                //\n            }\n\n        }\n                System.out.println(\"Sec Max value is \"+secMax);\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4551305,"reputation":165,"user_id":3696393,"display_name":"Hirein"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599494926,"creation_date":1599494926,"answer_id":63780993,"question_id":2615712,"body_markdown":"     private static void returnSecondHighetsNumber(int[] a) {\r\n    \t\t int firstHighest=0;\r\n    \t\t int secondHighest=0;\r\n    \t\t if(a[0]&gt;=a[1]) {\r\n    \t\t\t firstHighest=a[0];\r\n    \t\t\t secondHighest=a[1];\r\n    \t\t }else {\r\n    \t\t\t firstHighest=a[1];\r\n    \t\t\t secondHighest=a[0];\r\n    \t\t }\r\n    \t\t for (int i = 2; i &lt; a.length; i++) {\r\n    \t\t\t if(a[i] &gt;=firstHighest) {\r\n    \t\t\t\t secondHighest=firstHighest;\r\n    \t\t\t\t firstHighest=a[i];\r\n    \t\t\t }\r\n    \t\t\t else if(a[i]&gt;=secondHighest) {\r\n    \t\t\t\t secondHighest=a[i];\r\n    \t\t\t }\r\n    \t\t }\r\n    \t\t System.out.println(firstHighest+&quot;---&quot;+secondHighest);\r\n    \t}","title":"Finding the second highest number in array in Java","body":"<pre><code> private static void returnSecondHighetsNumber(int[] a) {\n         int firstHighest=0;\n         int secondHighest=0;\n         if(a[0]&gt;=a[1]) {\n             firstHighest=a[0];\n             secondHighest=a[1];\n         }else {\n             firstHighest=a[1];\n             secondHighest=a[0];\n         }\n         for (int i = 2; i &lt; a.length; i++) {\n             if(a[i] &gt;=firstHighest) {\n                 secondHighest=firstHighest;\n                 firstHighest=a[i];\n             }\n             else if(a[i]&gt;=secondHighest) {\n                 secondHighest=a[i];\n             }\n         }\n         System.out.println(firstHighest+&quot;---&quot;+secondHighest);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13293670,"reputation":183,"user_id":10251555,"display_name":"Mayank Maheshwari"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626633732,"creation_date":1626633732,"answer_id":68432098,"question_id":2615712,"body_markdown":"the idea is to take two variables firstmax fm and secondmax sm and traverse the array.\r\n\r\n    \r\n\r\n    def print2largest(self,A,N): \r\n            #code here\r\n        if all(A[x]==A[x-1] for x in range(1,N)): \r\n            return -1\r\n        sm=0\r\n        fs=0\r\n        for i in range(N):\r\n            if A[i]&gt;fs: \r\n                sm=fs\r\n                fs=A[i]\r\n            elif A[i]&gt;sm and A[i]!=fs: \r\n                sm=A[i]\r\n        return sm\r\n        \r\n        ","title":"Finding the second highest number in array in Java","body":"<p>the idea is to take two variables firstmax fm and secondmax sm and traverse the array.</p>\n<pre><code>def print2largest(self,A,N): \n        #code here\n    if all(A[x]==A[x-1] for x in range(1,N)): \n        return -1\n    sm=0\n    fs=0\n    for i in range(N):\n        if A[i]&gt;fs: \n            sm=fs\n            fs=A[i]\n        elif A[i]&gt;sm and A[i]!=fs: \n            sm=A[i]\n    return sm\n    \n    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":13437288,"reputation":51,"user_id":9695394,"display_name":"Abdul Samad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647191143,"creation_date":1647191143,"answer_id":71458983,"question_id":2615712,"body_markdown":"I&#39;m not sure how good answers present here. I have below code which is shorter and works good.\r\n\r\n    static int getSecondHigh(int [] x) {\r\n\r\n        int max1st = Integer.MIN_VALUE;\r\n        int max2nd = Integer.MIN_VALUE;\r\n        for (int i = 0; i &lt; x.length; i++) {\r\n            if(max2nd&lt;x[i]){\r\n                if(max1st&lt;x[i]){\r\n                    max1st=x[i];\r\n                }else{\r\n                    max2nd=x[i];\r\n                }\r\n            }\r\n        }\r\n        return max2nd;\r\n    }","title":"Finding the second highest number in array in Java","body":"<p>I'm not sure how good answers present here. I have below code which is shorter and works good.</p>\n<pre><code>static int getSecondHigh(int [] x) {\n\n    int max1st = Integer.MIN_VALUE;\n    int max2nd = Integer.MIN_VALUE;\n    for (int i = 0; i &lt; x.length; i++) {\n        if(max2nd&lt;x[i]){\n            if(max1st&lt;x[i]){\n                max1st=x[i];\n            }else{\n                max2nd=x[i];\n            }\n        }\n    }\n    return max2nd;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16463138,"reputation":21,"user_id":11893782,"display_name":"sufiyan gani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655315502,"creation_date":1655315502,"answer_id":72635790,"question_id":2615712,"body_markdown":"If you want the strictly second highest number then the following code will work.\r\n\r\nThis is an extension of most of the answers above. It handles the scenario where both `highest` and `second_highest` are same. In that case, if you encounter a number smaller than highest/second_highest, then update `second_highest`.\r\n\r\nIf you draw a number line and put two points corresponding to highest and second_highest then it will greatly help understanding the logic.\r\n\r\n    def second(data):\r\n        highest = max(data[0], data[1])\r\n        second_highest = min(data[0], data[1])\r\n        for i in range(2, len(data)):\r\n            if data[i] &gt; highest:\r\n                second_highest = highest\r\n                highest = data[i]\r\n            elif data[i] &gt; second_highest and data[i] &lt; highest:\r\n                second_highest = data[i]\r\n            elif data[i] &lt; second_highest and highest == second_highest:\r\n                second_highest = data[i]\r\n        return None if highest == second_highest else second_highest","title":"Finding the second highest number in array in Java","body":"<p>If you want the strictly second highest number then the following code will work.</p>\n<p>This is an extension of most of the answers above. It handles the scenario where both <code>highest</code> and <code>second_highest</code> are same. In that case, if you encounter a number smaller than highest/second_highest, then update <code>second_highest</code>.</p>\n<p>If you draw a number line and put two points corresponding to highest and second_highest then it will greatly help understanding the logic.</p>\n<pre><code>def second(data):\n    highest = max(data[0], data[1])\n    second_highest = min(data[0], data[1])\n    for i in range(2, len(data)):\n        if data[i] &gt; highest:\n            second_highest = highest\n            highest = data[i]\n        elif data[i] &gt; second_highest and data[i] &lt; highest:\n            second_highest = data[i]\n        elif data[i] &lt; second_highest and highest == second_highest:\n            second_highest = data[i]\n    return None if highest == second_highest else second_highest\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25990576,"reputation":119,"user_id":19702819,"display_name":"Abubakar Khalid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665464886,"creation_date":1665464886,"answer_id":74023207,"question_id":2615712,"body_markdown":"**This code is for those who don&#39;t want to use loop**\r\n\r\n**The Easiest way to find the highest number in the array is**\r\n\r\n    int a[] = {1,2,3,9,5,7,6,4,8};\r\n    Arrays.sort(a);\r\n    System.out.println(a[1-1]);\r\n\r\n**The Easiest way to find the second-highest number in the array is**\r\n\r\n    int a[] = {1,2,3,9,5,7,6,4,8};\r\n    Arrays.sort(a);\r\n    System.out.println(a[2-1]);\r\n\r\n\r\n**The Easiest way to find the third-highest number in the array is**\r\n\r\n    int a[] = {1,2,3,9,5,7,6,4,8};\r\n    Arrays.sort(a);\r\n    System.out.println(a[3-1]);\r\n\r\n\r\n**The Easiest way to find the fourth-highest number in the array is**\r\n\r\n    int a[] = {1,2,3,9,5,7,6,4,8};\r\n    Arrays.sort(a);\r\n    System.out.println(a[4-1]);","title":"Finding the second highest number in array in Java","body":"<p><strong>This code is for those who don't want to use loop</strong></p>\n<p><strong>The Easiest way to find the highest number in the array is</strong></p>\n<pre><code>int a[] = {1,2,3,9,5,7,6,4,8};\nArrays.sort(a);\nSystem.out.println(a[1-1]);\n</code></pre>\n<p><strong>The Easiest way to find the second-highest number in the array is</strong></p>\n<pre><code>int a[] = {1,2,3,9,5,7,6,4,8};\nArrays.sort(a);\nSystem.out.println(a[2-1]);\n</code></pre>\n<p><strong>The Easiest way to find the third-highest number in the array is</strong></p>\n<pre><code>int a[] = {1,2,3,9,5,7,6,4,8};\nArrays.sort(a);\nSystem.out.println(a[3-1]);\n</code></pre>\n<p><strong>The Easiest way to find the fourth-highest number in the array is</strong></p>\n<pre><code>int a[] = {1,2,3,9,5,7,6,4,8};\nArrays.sort(a);\nSystem.out.println(a[4-1]);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15972793,"reputation":113,"user_id":11526440,"display_name":"Vinay Pandey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668061502,"creation_date":1668061502,"answer_id":74384923,"question_id":2615712,"body_markdown":"    public class Main\r\n    {\r\n        public static int getLargetstNNumbereFromList(int numbers[]){\r\n                int largest = Integer.MIN_VALUE;\r\n            for(int i=0; i&lt;numbers.length; i++){\r\n                if(largest &lt; numbers[i]){\r\n                    largest = numbers[i];\r\n                }\r\n            }\r\n            return largest;\r\n        }\r\n    \tpublic static void main(String[] args) {\r\n            int numbers[] = {2,13,67,22,21};\r\n            System.out.println(getLargetstNNumbereFromList(numbers));\r\n    \t}\r\n    }\r\n\r\n","title":"Finding the second highest number in array in Java","body":"<pre><code>public class Main\n{\n    public static int getLargetstNNumbereFromList(int numbers[]){\n            int largest = Integer.MIN_VALUE;\n        for(int i=0; i&lt;numbers.length; i++){\n            if(largest &lt; numbers[i]){\n                largest = numbers[i];\n            }\n        }\n        return largest;\n    }\n    public static void main(String[] args) {\n        int numbers[] = {2,13,67,22,21};\n        System.out.println(getLargetstNNumbereFromList(numbers));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":603831,"reputation":381,"user_id":313732,"display_name":"Richard Jackson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162322,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"answer_count":45,"score":38,"last_activity_date":1697608562,"creation_date":1270949546,"question_id":2615712,"body_markdown":"I&#39;m having difficulty to understand the logic behind the method to find the second highest number in array. The method used is to find the highest in the array but less than the previous highest (which has already been found). The thing that I still can&#39;t figure it out is why `|| highest_score == second_highest` is necessary. For example I input three numbers: 98, 56, 3. Without it, both highest and second highest would be 98. Please explain.\r\n\r\n    int second highest = score[0];  \r\n    if (score[i] &gt; second_highest &amp;&amp; score[i] &lt; highest_score || highest_score == second_highest)   \r\n        second_highest = score[i];","title":"Finding the second highest number in array in Java","body":"<p>I'm having difficulty to understand the logic behind the method to find the second highest number in array. The method used is to find the highest in the array but less than the previous highest (which has already been found). The thing that I still can't figure it out is why <code>|| highest_score == second_highest</code> is necessary. For example I input three numbers: 98, 56, 3. Without it, both highest and second highest would be 98. Please explain.</p>\n\n<pre><code>int second highest = score[0];  \nif (score[i] &gt; second_highest &amp;&amp; score[i] &lt; highest_score || highest_score == second_highest)   \n    second_highest = score[i];\n</code></pre>\n"},{"tags":["java","android","ftp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697608551,"creation_date":1437547784,"answer_id":31555821,"question_id":31550862,"body_markdown":"The [`FTPClient.storeFileStream` method](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFileStream(java.lang.String)) can return `null`:\r\n\r\n&gt; An OutputStream through which the remote file can be written. **If the data connection cannot be opened (e.g., the file does not exist), null is returned (in which case you may check the reply code to determine the exact reason for failure).**\r\n\r\nThough the &quot;file does not exist&quot; note is nonsense for upload, it&#39;s obviously a copy-and-paste error from the [`.retrieveFileStream`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#retrieveFileStream(java.lang.String)) (download). \r\n\r\n---\r\n\r\nUse the [`.getReplyCode`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#getReplyCode()) and [`.getReplyString`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#getReplyString()), to see what went wrong.","title":"Apache Commons FTP storeFileStream returns null","body":"<p>The <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFileStream(java.lang.String)\" rel=\"nofollow noreferrer\"><code>FTPClient.storeFileStream</code> method</a> can return <code>null</code>:</p>\n<blockquote>\n<p>An OutputStream through which the remote file can be written. <strong>If the data connection cannot be opened (e.g., the file does not exist), null is returned (in which case you may check the reply code to determine the exact reason for failure).</strong></p>\n</blockquote>\n<p>Though the &quot;file does not exist&quot; note is nonsense for upload, it's obviously a copy-and-paste error from the <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#retrieveFileStream(java.lang.String)\" rel=\"nofollow noreferrer\"><code>.retrieveFileStream</code></a> (download).</p>\n<hr />\n<p>Use the <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#getReplyCode()\" rel=\"nofollow noreferrer\"><code>.getReplyCode</code></a> and <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#getReplyString()\" rel=\"nofollow noreferrer\"><code>.getReplyString</code></a>, to see what went wrong.</p>\n"}],"owner":{"account_id":4460288,"reputation":269,"user_id":3629386,"accept_rate":44,"display_name":"Maclaren"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3927,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":31555821,"answer_count":1,"score":2,"last_activity_date":1697608551,"creation_date":1437518360,"question_id":31550862,"body_markdown":"I am trying to upload a file in android to an FTP server using the apache.commons.ftp library.\r\n\r\nNote: I am using `storeFileStream` so that I can track the progress of the upload. \r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    ftpClient.enterLocalPassiveMode();\r\n    ftpClient.setFileType(FTP.BINARY_FILE_TYPE);\r\n    InputStream inputStream = new FileInputStream(localFile);\r\n    OutputStream outputStream = ftpClient.storeFileStream(remoteFile);\r\n    byte[] buffer = new byte[8192];\r\n    int bytesRead;\r\n    logMessage(&quot;Starting to upload file&quot;);\r\n\r\n    while ((bytesRead = inputStream.read(buffer)) != -1) {\r\n        total += bytesRead;\r\n        outputStream.write(buffer, 0, bytesRead); //output stream is null here\r\n        latestPercentDone = (int) ((total / (float) totalMegaBytes) * 100);\r\n        if (percentDone != latestPercentDone) {\r\n            percentDone = latestPercentDone;\r\n            publishProgress(&quot;&quot;+percentDone);\r\n        }\r\n    }\r\n    inputStream.close();\r\n    outputStream.close();\r\n    ftpClient.completePendingCommand();\r\n\r\nI am using the speedtest.tele2.net server for testing. Using an anonymous login.\r\n\r\nThe log keeps saying the outputstream is null. \r\n\r\n\r\nEDIT: Using what Martin Prikryl and getting the error code, i found the problem to be the location of the remote file. \r\n\r\nUpload to a location rather than a directory.\r\n\r\nFor example if the file is caled `item1.txt` the remote file should be `/item1.txt` or `/someFolder/AnotherFolder/item1.txt` rather than `/someFolder/AnotherFolder/` \r\n\r\n","title":"Apache Commons FTP storeFileStream returns null","body":"<p>I am trying to upload a file in android to an FTP server using the apache.commons.ftp library.</p>\n\n<p>Note: I am using <code>storeFileStream</code> so that I can track the progress of the upload. </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>ftpClient.enterLocalPassiveMode();\nftpClient.setFileType(FTP.BINARY_FILE_TYPE);\nInputStream inputStream = new FileInputStream(localFile);\nOutputStream outputStream = ftpClient.storeFileStream(remoteFile);\nbyte[] buffer = new byte[8192];\nint bytesRead;\nlogMessage(\"Starting to upload file\");\n\nwhile ((bytesRead = inputStream.read(buffer)) != -1) {\n    total += bytesRead;\n    outputStream.write(buffer, 0, bytesRead); //output stream is null here\n    latestPercentDone = (int) ((total / (float) totalMegaBytes) * 100);\n    if (percentDone != latestPercentDone) {\n        percentDone = latestPercentDone;\n        publishProgress(\"\"+percentDone);\n    }\n}\ninputStream.close();\noutputStream.close();\nftpClient.completePendingCommand();\n</code></pre>\n\n<p>I am using the speedtest.tele2.net server for testing. Using an anonymous login.</p>\n\n<p>The log keeps saying the outputstream is null. </p>\n\n<p>EDIT: Using what Martin Prikryl and getting the error code, i found the problem to be the location of the remote file. </p>\n\n<p>Upload to a location rather than a directory.</p>\n\n<p>For example if the file is caled <code>item1.txt</code> the remote file should be <code>/item1.txt</code> or <code>/someFolder/AnotherFolder/item1.txt</code> rather than <code>/someFolder/AnotherFolder/</code> </p>\n"},{"tags":["java","android","ftp","ftp-client"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697608445,"creation_date":1424703358,"answer_id":28676553,"question_id":28675970,"body_markdown":"I believe it&#39;s the call to [`getReply()`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#getReply()) that deadlocks your code.\r\n\r\nYou didn&#39;t send any command to which the server should reply, so the client waits for the response until it or the server times out.\r\n\r\nThe latter happened probably, that&#39;s why the connection was closed/reset by the server.\r\n\r\nYou generally do not call `getReply()` yourself. In most cases it&#39;s called internally by the `FTPClient` for you:\r\n\r\n&gt; Only use this method if you are implementing your own FTP client or if you need to fetch a secondary response from the FTP server. \r\n\r\n---\r\n\r\nWhile I have no experience with Android development, from the symptoms and your code, I assume you connect to the FTP server from a GUI thread, what is rather a bad practice. That would explain why the screen goes blank while you wait.","title":"Java FTPClient: Getting &quot;Connection reset by peer&quot; when calling getReply()","body":"<p>I believe it's the call to <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#getReply()\" rel=\"nofollow noreferrer\"><code>getReply()</code></a> that deadlocks your code.</p>\n<p>You didn't send any command to which the server should reply, so the client waits for the response until it or the server times out.</p>\n<p>The latter happened probably, that's why the connection was closed/reset by the server.</p>\n<p>You generally do not call <code>getReply()</code> yourself. In most cases it's called internally by the <code>FTPClient</code> for you:</p>\n<blockquote>\n<p>Only use this method if you are implementing your own FTP client or if you need to fetch a secondary response from the FTP server.</p>\n</blockquote>\n<hr />\n<p>While I have no experience with Android development, from the symptoms and your code, I assume you connect to the FTP server from a GUI thread, what is rather a bad practice. That would explain why the screen goes blank while you wait.</p>\n"}],"owner":{"account_id":5807072,"reputation":69,"user_id":4579387,"accept_rate":62,"display_name":"Job Slot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":696,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":28676553,"answer_count":1,"score":0,"last_activity_date":1697608445,"creation_date":1424701506,"question_id":28675970,"body_markdown":"I was recently trying to connect to a FTP server via a mobile application.\r\nI&#39;m able to connect to my server and check if it&#39;s connected (which it is).\r\nNext thing is to login with a username and password following with a passive mode setup. Last thing I did was get the reply code from the server, but when my application is running, my screens goes black. When I reopen my application it says &quot;recv failed: ECONNREST (Connection reset by peer)&quot; as the error message I output. Here is my code:\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n\r\n        ftpClient = new FTPClient();\r\n        textView = (TextView)findViewById(R.id.textView_id);\r\n        textView2 = (TextView)findViewById(R.id.textView2_id);\r\n        textView3 = (TextView)findViewById(R.id.textView3_id);\r\n        textView4 = (TextView)findViewById(R.id.textView4_id);\r\n        textView5 = (TextView)findViewById(R.id.textView5_id);\r\n\r\n        try{\r\n            ftpClient.connect(ip, port);\r\n            boolean connectSucces = ftpClient.isConnected();\r\n            ftpClient.login(userName,passWord);\r\n            ftpClient.enterLocalPassiveMode();\r\n            ftpClient.getReply();\r\n            int connectionMode = ftpClient.getDataConnectionMode();\r\n            if(connectionMode == ftpClient.PASSIVE_LOCAL_DATA_CONNECTION_MODE)    {\r\n                textView.setText(&quot;Connected: &quot; + connectSucces + &quot; ConnectionMode: &quot; + connectionMode);\r\n            }\r\n        }catch(Exception e){\r\n            textView.setText(e.getMessage());\r\n        }\r\n    }\r\n\r\nAm I missing something?","title":"Java FTPClient: Getting &quot;Connection reset by peer&quot; when calling getReply()","body":"<p>I was recently trying to connect to a FTP server via a mobile application.\nI'm able to connect to my server and check if it's connected (which it is).\nNext thing is to login with a username and password following with a passive mode setup. Last thing I did was get the reply code from the server, but when my application is running, my screens goes black. When I reopen my application it says \"recv failed: ECONNREST (Connection reset by peer)\" as the error message I output. Here is my code:</p>\n\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState)\n{\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\n    StrictMode.setThreadPolicy(policy);\n\n    ftpClient = new FTPClient();\n    textView = (TextView)findViewById(R.id.textView_id);\n    textView2 = (TextView)findViewById(R.id.textView2_id);\n    textView3 = (TextView)findViewById(R.id.textView3_id);\n    textView4 = (TextView)findViewById(R.id.textView4_id);\n    textView5 = (TextView)findViewById(R.id.textView5_id);\n\n    try{\n        ftpClient.connect(ip, port);\n        boolean connectSucces = ftpClient.isConnected();\n        ftpClient.login(userName,passWord);\n        ftpClient.enterLocalPassiveMode();\n        ftpClient.getReply();\n        int connectionMode = ftpClient.getDataConnectionMode();\n        if(connectionMode == ftpClient.PASSIVE_LOCAL_DATA_CONNECTION_MODE)    {\n            textView.setText(\"Connected: \" + connectSucces + \" ConnectionMode: \" + connectionMode);\n        }\n    }catch(Exception e){\n        textView.setText(e.getMessage());\n    }\n}\n</code></pre>\n\n<p>Am I missing something?</p>\n"},{"tags":["java","ftp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1697608414,"creation_date":1537543283,"answer_id":52446805,"question_id":52446676,"body_markdown":"The Apache Commons Net library believes that the `220` response from the server does not conform to RFC 959 (probably rightfully).\r\n\r\nIf you want to allow the library to talk to the server, call [`FTP.setStrictReplyParsing`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#setStrictReplyParsing(boolean)):\r\n\r\n    ftpClient.setStrictReplyParsing(false);","title":"java FTP org.apache.commons.net.MalformedServerReplyException: Truncated server reply: &#39;220 &#39;","body":"<p>The Apache Commons Net library believes that the <code>220</code> response from the server does not conform to RFC 959 (probably rightfully).</p>\n<p>If you want to allow the library to talk to the server, call <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#setStrictReplyParsing(boolean)\" rel=\"nofollow noreferrer\"><code>FTP.setStrictReplyParsing</code></a>:</p>\n<pre><code>ftpClient.setStrictReplyParsing(false);\n</code></pre>\n"}],"owner":{"account_id":14392968,"reputation":53,"user_id":10397092,"display_name":"sd2018"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4515,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":52446805,"answer_count":1,"score":5,"last_activity_date":1697608414,"creation_date":1537542813,"question_id":52446676,"body_markdown":"I&#39;m using Java Apache Commons Net library for downloading files from an FTP server.  As a starting point, I am attempting to re-use code from https://www.codejava.net/java-se/networking/ftp/java-ftp-file-upload-tutorial-and-example.  In general, the code executes without issue/exceptions however for one particular FTP server (ftp://ftp.nasdaqtrader.com/symboldirectory/nasdaqlisted.txt) I get the following error:\r\n\r\n&gt; org.apache.commons.net.MalformedServerReplyException: Truncated server reply: &#39;220 &#39;\r\n\r\nMy code is as follows:\r\n\r\n    String server = &quot;ftp.nasdaqtrader.com&quot;;\r\n    int port = 21;\r\n    String user = &quot;anonymous&quot;;\r\n    String pass = &quot;pw&quot;;\r\n \r\n    FTPClient ftpClient = new FTPClient();\r\n    try {\r\n \r\n        ftpClient.connect(server, port);\r\n        ftpClient.login(user, pass);\r\n        ftpClient.enterLocalPassiveMode();\r\n        ftpClient.setFileType(FTP.BINARY_FILE_TYPE);\r\n \r\n        // APPROACH #1: using retrieveFile(String, OutputStream)\r\n        String remoteFile1 = &quot;/symboldirectory/nasdaqlisted.txt&quot;;\r\n        File downloadFile1 = new File(&quot;C:\\\\filedirectory\\\\nasdaqlisted.txt&quot;);\r\n        OutputStream outputStream1 =\r\n            new BufferedOutputStream(new FileOutputStream(downloadFile1));\r\n        boolean success = ftpClient.retrieveFile(remoteFile1, outputStream1);\r\n        outputStream1.close();\r\n        \r\n        if (success) {\r\n            System.out.println(&quot;File #1 has been downloaded successfully.&quot;);\r\n        }\r\n        \r\n        } catch (IOException ex) {\r\n        System.out.println(&quot;Error: &quot; + ex.getMessage());\r\n        ex.printStackTrace();\r\n    } finally {\r\n        try {\r\n            if (ftpClient.isConnected()) {\r\n                ftpClient.logout();\r\n                ftpClient.disconnect();\r\n            }\r\n        } catch (IOException ex) {\r\n            ex.printStackTrace();\r\n        }\r\n    }\r\n\r\nConnecting from my Windows terminal yields the following:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    C:\\Computer&gt;ftp ftp.nasdaqtrader.com\r\n    Connected to ftp.nasdaqtrader.com.\r\n    220\r\n    200 OPTS UTF8 command successful - UTF8 encoding now ON.\r\n    User (ftp.nasdaqtrader.com:(none)): anonymous\r\n    331 Anonymous access allowed, send identity (e-mail name) as password.\r\n    Password:\r\n    230 User logged in.\r\n    ftp&gt; quit\r\n    221 Goodbye.\r\n\r\nFor a similar FTP server (NOAA weather) where the code connects and downloads without exceptions connecting via the Windows terminal yields the following:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    C:\\Computer&gt;ftp ftp.cdc.noaa.gov\r\n    Connected to ftp.cdc.noaa.gov.\r\n    220-**********************************************************************\r\n    220-**WARNING**WARNING**WARNING**WARNING**WARNING**WARNING**WARNING**    *\r\n    220-*                                                                    *\r\n    220-* This is a Department of Commerce (DOC) computer system.  DOC       *   \r\n    220-* computer systems are provided for the processing of official U.S.  *\r\n    220-* Government information only. Unauthorized access or use of this    *\r\n    220-* computer system may subject violators to criminal, civil, and/or   *\r\n    220-* administrative action. All data contained within DOC computer      *\r\n    220-* systems is owned by the DOC, and may be audited, intercepted,      *\r\n    220-* recorded, read, copied, or captured in any manner and disclosed in *\r\n    220-* any manner, by authorized personnel. THERE IS NO RIGHT OF PRIVACY  *\r\n    220-* IN THIS SYSTEM. System personnel may disclose any potential        *\r\n    220-* evidence of crime found on DOC computer systems to appropriate     *\r\n    220-* authorities. USE OF THIS SYSTEM BY ANY USER, AUTHORIZED OR         *\r\n    220-* UNAUTHORIZED CONSTITUTES CONSENT TO THIS AUDITING, INTERCEPTION,   *\r\n    220-* RECORDING, READING, COPYING, CAPTURING, and DISCLOSURE OF COMPUTER *\r\n    220-* ACTIVITY.                                                          *\r\n    220-*                                                                    *\r\n    220-**WARNING**WARNING**WARNING**WARNING**WARNING**WARNING**WARNING**    *\r\n    220-**********************************************************************\r\n    220\r\n    200 Always in UTF8 mode.\r\n    User (ftp.cdc.noaa.gov:(none)): anonymous\r\n    331 Please specify the password.\r\n    Password:\r\n    230 Login successful.\r\n\r\nSo comparing the two replies it appears that ftp.nasdaqtrader.com simply doesn&#39;t provide the appropriate (standard?) 220 reply (i.e. truncated).  So:\r\n\r\n1. have I correctly identified the issue and \r\n2. what is the appropriate way to deal with this issue?\r\n\r\nThanks!\r\n","title":"java FTP org.apache.commons.net.MalformedServerReplyException: Truncated server reply: &#39;220 &#39;","body":"<p>I'm using Java Apache Commons Net library for downloading files from an FTP server.  As a starting point, I am attempting to re-use code from <a href=\"https://www.codejava.net/java-se/networking/ftp/java-ftp-file-upload-tutorial-and-example\" rel=\"nofollow noreferrer\">https://www.codejava.net/java-se/networking/ftp/java-ftp-file-upload-tutorial-and-example</a>.  In general, the code executes without issue/exceptions however for one particular FTP server (<a href=\"ftp://ftp.nasdaqtrader.com/symboldirectory/nasdaqlisted.txt\" rel=\"nofollow noreferrer\">ftp://ftp.nasdaqtrader.com/symboldirectory/nasdaqlisted.txt</a>) I get the following error:</p>\n\n<blockquote>\n  <p>org.apache.commons.net.MalformedServerReplyException: Truncated server reply: '220 '</p>\n</blockquote>\n\n<p>My code is as follows:</p>\n\n<pre><code>String server = \"ftp.nasdaqtrader.com\";\nint port = 21;\nString user = \"anonymous\";\nString pass = \"pw\";\n\nFTPClient ftpClient = new FTPClient();\ntry {\n\n    ftpClient.connect(server, port);\n    ftpClient.login(user, pass);\n    ftpClient.enterLocalPassiveMode();\n    ftpClient.setFileType(FTP.BINARY_FILE_TYPE);\n\n    // APPROACH #1: using retrieveFile(String, OutputStream)\n    String remoteFile1 = \"/symboldirectory/nasdaqlisted.txt\";\n    File downloadFile1 = new File(\"C:\\\\filedirectory\\\\nasdaqlisted.txt\");\n    OutputStream outputStream1 =\n        new BufferedOutputStream(new FileOutputStream(downloadFile1));\n    boolean success = ftpClient.retrieveFile(remoteFile1, outputStream1);\n    outputStream1.close();\n\n    if (success) {\n        System.out.println(\"File #1 has been downloaded successfully.\");\n    }\n\n    } catch (IOException ex) {\n    System.out.println(\"Error: \" + ex.getMessage());\n    ex.printStackTrace();\n} finally {\n    try {\n        if (ftpClient.isConnected()) {\n            ftpClient.logout();\n            ftpClient.disconnect();\n        }\n    } catch (IOException ex) {\n        ex.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>Connecting from my Windows terminal yields the following:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\Computer&gt;ftp ftp.nasdaqtrader.com\nConnected to ftp.nasdaqtrader.com.\n220\n200 OPTS UTF8 command successful - UTF8 encoding now ON.\nUser (ftp.nasdaqtrader.com:(none)): anonymous\n331 Anonymous access allowed, send identity (e-mail name) as password.\nPassword:\n230 User logged in.\nftp&gt; quit\n221 Goodbye.\n</code></pre>\n\n<p>For a similar FTP server (NOAA weather) where the code connects and downloads without exceptions connecting via the Windows terminal yields the following:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\Computer&gt;ftp ftp.cdc.noaa.gov\nConnected to ftp.cdc.noaa.gov.\n220-**********************************************************************\n220-**WARNING**WARNING**WARNING**WARNING**WARNING**WARNING**WARNING**    *\n220-*                                                                    *\n220-* This is a Department of Commerce (DOC) computer system.  DOC       *   \n220-* computer systems are provided for the processing of official U.S.  *\n220-* Government information only. Unauthorized access or use of this    *\n220-* computer system may subject violators to criminal, civil, and/or   *\n220-* administrative action. All data contained within DOC computer      *\n220-* systems is owned by the DOC, and may be audited, intercepted,      *\n220-* recorded, read, copied, or captured in any manner and disclosed in *\n220-* any manner, by authorized personnel. THERE IS NO RIGHT OF PRIVACY  *\n220-* IN THIS SYSTEM. System personnel may disclose any potential        *\n220-* evidence of crime found on DOC computer systems to appropriate     *\n220-* authorities. USE OF THIS SYSTEM BY ANY USER, AUTHORIZED OR         *\n220-* UNAUTHORIZED CONSTITUTES CONSENT TO THIS AUDITING, INTERCEPTION,   *\n220-* RECORDING, READING, COPYING, CAPTURING, and DISCLOSURE OF COMPUTER *\n220-* ACTIVITY.                                                          *\n220-*                                                                    *\n220-**WARNING**WARNING**WARNING**WARNING**WARNING**WARNING**WARNING**    *\n220-**********************************************************************\n220\n200 Always in UTF8 mode.\nUser (ftp.cdc.noaa.gov:(none)): anonymous\n331 Please specify the password.\nPassword:\n230 Login successful.\n</code></pre>\n\n<p>So comparing the two replies it appears that ftp.nasdaqtrader.com simply doesn't provide the appropriate (standard?) 220 reply (i.e. truncated).  So:</p>\n\n<ol>\n<li>have I correctly identified the issue and </li>\n<li>what is the appropriate way to deal with this issue?</li>\n</ol>\n\n<p>Thanks!</p>\n"},{"tags":["java","android","android-studio","gradle","java-11"],"answers":[{"comments":[{"owner":{"account_id":17774757,"reputation":322,"user_id":12907389,"display_name":"Y.R"},"score":0,"creation_date":1583152463,"post_id":60487206,"comment_id":107008331,"body_markdown":"you suggest to use which version?","body":"you suggest to use which version?"},{"owner":{"account_id":9266845,"reputation":73,"user_id":6882060,"display_name":"Carlos Rguez M"},"score":0,"creation_date":1583169157,"post_id":60487206,"comment_id":107017376,"body_markdown":"I try with the newest for my new project Gradle version 6.2.1","body":"I try with the newest for my new project Gradle version 6.2.1"},{"owner":{"account_id":9266845,"reputation":73,"user_id":6882060,"display_name":"Carlos Rguez M"},"score":0,"creation_date":1583311186,"post_id":60487206,"comment_id":107068940,"body_markdown":"Try invalidate cache and restart and rebuild project after apply the config change","body":"Try invalidate cache and restart and rebuild project after apply the config change"}],"tags":[],"owner":{"account_id":9266845,"reputation":73,"user_id":6882060,"display_name":"Carlos Rguez M"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1583145901,"creation_date":1583145901,"answer_id":60487206,"question_id":60474877,"body_markdown":"I solved it change the version of Gradle on Project Structure options. I imagine it will also work by configuring old versions\r\n\r\n[Gradle Version Config][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DTddw.png","title":"syncing : Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed error in syncing.... androidstudio 3.6.1","body":"<p>I solved it change the version of Gradle on Project Structure options. I imagine it will also work by configuring old versions</p>\n\n<p><a href=\"https://i.stack.imgur.com/DTddw.png\" rel=\"nofollow noreferrer\">Gradle Version Config</a></p>\n"},{"tags":[],"owner":{"account_id":1810811,"reputation":579,"user_id":1646919,"accept_rate":50,"display_name":"Android Developer"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1583165306,"creation_date":1583165306,"answer_id":60492677,"question_id":60474877,"body_markdown":"https://developer.android.com/studio/intro/studio-config.html#jdk\r\nUse Jdk 8 as mentioned in above link.","title":"syncing : Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed error in syncing.... androidstudio 3.6.1","body":"<p><a href=\"https://developer.android.com/studio/intro/studio-config.html#jdk\" rel=\"noreferrer\">https://developer.android.com/studio/intro/studio-config.html#jdk</a>\nUse Jdk 8 as mentioned in above link.</p>\n"},{"comments":[{"owner":{"account_id":17774757,"reputation":322,"user_id":12907389,"display_name":"Y.R"},"score":0,"creation_date":1589263723,"post_id":61697926,"comment_id":109215875,"body_markdown":"I used JDK-8 and my problem was solved.... thank you for your answer","body":"I used JDK-8 and my problem was solved.... thank you for your answer"}],"tags":[],"owner":{"account_id":18535725,"reputation":43,"user_id":13505447,"display_name":"Harsh Vardhan Gautam"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589368088,"creation_date":1589032802,"answer_id":61697926,"question_id":60474877,"body_markdown":"I got this error while creating a new project, so I am telling solution for the case, if you are creating a new project and you got this error, then below mentioned solution will definitely work for you.\r\n\r\n**Condition** : Check your project&#39;s name if it is having any special characters like &#39;,#,@ etc.\r\n\r\n**Solution** : Just remove any special character from the project&#39;s file name and that&#39;s it.\r\n","title":"syncing : Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed error in syncing.... androidstudio 3.6.1","body":"<p>I got this error while creating a new project, so I am telling solution for the case, if you are creating a new project and you got this error, then below mentioned solution will definitely work for you.</p>\n\n<p><strong>Condition</strong> : Check your project's name if it is having any special characters like ',#,@ etc.</p>\n\n<p><strong>Solution</strong> : Just remove any special character from the project's file name and that's it.</p>\n"},{"tags":[],"owner":{"account_id":20648711,"reputation":1,"user_id":15159556,"display_name":"Ani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612636412,"creation_date":1612636412,"answer_id":66080492,"question_id":60474877,"body_markdown":"I also got this error while creating a new project in a newly installed Android Studio, So i am sharing my solution-\r\nIf you have installed the very latest version of Android Studio then try installing the older version. \r\nIn my case i installed version 4.1.2 and was not able to make gradle work. So i uninstalled 4.1.2 version and tried 3.6 version and it worked without any issues.","title":"syncing : Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed error in syncing.... androidstudio 3.6.1","body":"<p>I also got this error while creating a new project in a newly installed Android Studio, So i am sharing my solution-\nIf you have installed the very latest version of Android Studio then try installing the older version.\nIn my case i installed version 4.1.2 and was not able to make gradle work. So i uninstalled 4.1.2 version and tried 3.6 version and it worked without any issues.</p>\n"},{"tags":[],"owner":{"account_id":19913990,"reputation":71,"user_id":14591435,"display_name":"Hari Agus W"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1616800173,"creation_date":1616764090,"answer_id":66817551,"question_id":60474877,"body_markdown":"I also experienced the same, I tried changing the JDK version.\r\n\r\n1. File -&gt; Setting -&gt; Build, Execution, Deployment -&gt; Build Tools -&gt; Maven -&gt; **Gradle**\r\n2. Gradle JVM -&gt; Download JDK \r\n\r\nand I set it as below\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VE15S.png","title":"syncing : Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed error in syncing.... androidstudio 3.6.1","body":"<p>I also experienced the same, I tried changing the JDK version.</p>\n<ol>\n<li>File -&gt; Setting -&gt; Build, Execution, Deployment -&gt; Build Tools -&gt; Maven -&gt; <strong>Gradle</strong></li>\n<li>Gradle JVM -&gt; Download JDK</li>\n</ol>\n<p>and I set it as below</p>\n<p><a href=\"https://i.stack.imgur.com/VE15S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VE15S.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":19555062,"reputation":1096,"user_id":14309684,"display_name":"SemicolonSpace"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1644845982,"creation_date":1624011718,"answer_id":68033466,"question_id":60474877,"body_markdown":"I&#39;m too late, but it helps someone.\r\n\r\nI got the same problem when I installed Android Studio 4.2.1 in Windows 10. I fixed it by selecting the JDK location.\r\nOpen File &gt; Project Structure. Then select the SDK Location tab (on the left).\r\nOn the JDK location section, select Embedded JDK: option (the first one).\r\n\r\nLook at this picture:\r\n\r\n[![Screenshot][1]][1]\r\n\r\nIt worked in my case. Also, I&#39;m using the latest Gradle Version (6.7.1) and Android Gradle Plugin Version (4.2.1).\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qHARf.png","title":"syncing : Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed error in syncing.... androidstudio 3.6.1","body":"<p>I'm too late, but it helps someone.</p>\n<p>I got the same problem when I installed Android Studio 4.2.1 in Windows 10. I fixed it by selecting the JDK location.\nOpen File &gt; Project Structure. Then select the SDK Location tab (on the left).\nOn the JDK location section, select Embedded JDK: option (the first one).</p>\n<p>Look at this picture:</p>\n<p><a href=\"https://i.stack.imgur.com/qHARf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qHARf.png\" alt=\"Screenshot\" /></a></p>\n<p>It worked in my case. Also, I'm using the latest Gradle Version (6.7.1) and Android Gradle Plugin Version (4.2.1).</p>\n"},{"tags":[],"owner":{"account_id":1013937,"reputation":10560,"user_id":1025935,"accept_rate":96,"display_name":"UmAnusorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1629014391,"creation_date":1629013582,"answer_id":68789628,"question_id":60474877,"body_markdown":"In short \r\n\r\n&gt; Set the JDK version to Embedded JDK\r\n\r\n**WHY?**\r\n\r\nA copy of the latest OpenJDK comes bundled with Android Studio 2.2+. This is the JDK version GOOGLE recommend. \r\n\r\nTo use the bundled JDK, do the following:\r\n\r\n**HOW?**\r\n\r\nAndroid Studio &gt; Preferences... &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle \r\nUnder Gradle JDK, choose the Embedded JDK option.\r\nClick OK.\r\n\r\nFor windows\r\n\r\nselect File &gt; Settings... &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle \r\nUnder Gradle JDK, choose the Embedded JDK option.","title":"syncing : Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed error in syncing.... androidstudio 3.6.1","body":"<p>In short</p>\n<blockquote>\n<p>Set the JDK version to Embedded JDK</p>\n</blockquote>\n<p><strong>WHY?</strong></p>\n<p>A copy of the latest OpenJDK comes bundled with Android Studio 2.2+. This is the JDK version GOOGLE recommend.</p>\n<p>To use the bundled JDK, do the following:</p>\n<p><strong>HOW?</strong></p>\n<p>Android Studio &gt; Preferences... &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle\nUnder Gradle JDK, choose the Embedded JDK option.\nClick OK.</p>\n<p>For windows</p>\n<p>select File &gt; Settings... &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle\nUnder Gradle JDK, choose the Embedded JDK option.</p>\n"},{"tags":[],"owner":{"account_id":5947086,"reputation":1247,"user_id":4676291,"display_name":"aslamhossin"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1637773949,"creation_date":1637773949,"answer_id":70100254,"question_id":60474877,"body_markdown":"Change your `JDK` version by following steps in **Android Studio**: \r\n\r\n**File**-&gt; **Project Structure** -&gt; `SDK` **location** -&gt; `Gradle` **Settings** \r\n\r\nThen select the configured `JDK` version.\r\n\r\n [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3rTTf.jpg","title":"syncing : Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed error in syncing.... androidstudio 3.6.1","body":"<p>Change your <code>JDK</code> version by following steps in <strong>Android Studio</strong>:</p>\n<p><strong>File</strong>-&gt; <strong>Project Structure</strong> -&gt; <code>SDK</code> <strong>location</strong> -&gt; <code>Gradle</code> <strong>Settings</strong></p>\n<p>Then select the configured <code>JDK</code> version.</p>\n<p><a href=\"https://i.stack.imgur.com/3rTTf.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/3rTTf.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":29498755,"reputation":1,"user_id":22606221,"display_name":"Rahulraj Senapati"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695285944,"creation_date":1695285944,"answer_id":77148582,"question_id":60474877,"body_markdown":"The error message you&#39;ve posted appears to be related to Groovy, a programming language that runs on the Java Virtual Machine (JVM). The error message indicates that there was a problem with compiling or running a Groovy script.\r\n\r\nHere&#39;s a breakdown of the error message:\r\n\r\norg.codehaus.groovy.control.MultipleCompilationErrorsException: This part of the error message indicates that there were multiple compilation errors during the execution of your Groovy script.\r\n\r\nstartup failed: This suggests that the script encountered an issue at the start of its execution, possibly during the compilation phase.\r\n","title":"syncing : Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed error in syncing.... androidstudio 3.6.1","body":"<p>The error message you've posted appears to be related to Groovy, a programming language that runs on the Java Virtual Machine (JVM). The error message indicates that there was a problem with compiling or running a Groovy script.</p>\n<p>Here's a breakdown of the error message:</p>\n<p>org.codehaus.groovy.control.MultipleCompilationErrorsException: This part of the error message indicates that there were multiple compilation errors during the execution of your Groovy script.</p>\n<p>startup failed: This suggests that the script encountered an issue at the start of its execution, possibly during the compilation phase.</p>\n"},{"tags":[],"owner":{"account_id":29226570,"reputation":1,"user_id":22391122,"display_name":"Hammad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697608322,"creation_date":1697608226,"answer_id":77313761,"question_id":60474877,"body_markdown":"**Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:**\r\n\r\nI also got this error while creating new project in Android Studio. I solved this by simply replacing below code:\r\n\r\n1. **projectName/build.gradle** :\r\n\r\n**from**\r\n\r\n        plugins {\r\n    alias(libs.plugins.androidApplication) apply false\r\n    }\r\n\r\n**to**\r\n\r\n        plugins {\r\n        id &#39;com.android.application&#39; version &#39;7.4.2&#39; apply false\r\n        id &#39;com.android.library&#39; version &#39;7.4.2&#39; apply false\r\n    }\r\n\r\n\r\n2. **projectName/app/build.gradle**:\r\n\r\n**from**\r\n\r\n        plugins {\r\n        alias(libs.plugins.androidApplication)\r\n    }\r\n\r\n**to** \r\n\r\n        plugins {\r\n        id &#39;com.android.application&#39;\r\n    }\r\n\r\n3. **projectName\\gradle\\wrapper\\gradle-wrapper.properties**:\r\n\r\n\r\n    \r\n\r\n&gt; **distributionUrl=https\\://services.gradle.org/distributions/gradle-7.5-bin.zip**\r\n\r\n","title":"syncing : Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed error in syncing.... androidstudio 3.6.1","body":"<p><strong>Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:</strong></p>\n<p>I also got this error while creating new project in Android Studio. I solved this by simply replacing below code:</p>\n<ol>\n<li><strong>projectName/build.gradle</strong> :</li>\n</ol>\n<p><strong>from</strong></p>\n<pre><code>    plugins {\nalias(libs.plugins.androidApplication) apply false\n}\n</code></pre>\n<p><strong>to</strong></p>\n<pre><code>    plugins {\n    id 'com.android.application' version '7.4.2' apply false\n    id 'com.android.library' version '7.4.2' apply false\n}\n</code></pre>\n<ol start=\"2\">\n<li><strong>projectName/app/build.gradle</strong>:</li>\n</ol>\n<p><strong>from</strong></p>\n<pre><code>    plugins {\n    alias(libs.plugins.androidApplication)\n}\n</code></pre>\n<p><strong>to</strong></p>\n<pre><code>    plugins {\n    id 'com.android.application'\n}\n</code></pre>\n<ol start=\"3\">\n<li><strong>projectName\\gradle\\wrapper\\gradle-wrapper.properties</strong>:</li>\n</ol>\n<blockquote>\n<p><strong>distributionUrl=https://services.gradle.org/distributions/gradle-7.5-bin.zip</strong></p>\n</blockquote>\n"}],"owner":{"account_id":17774757,"reputation":322,"user_id":12907389,"display_name":"Y.R"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49036,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":60492677,"answer_count":10,"score":14,"last_activity_date":1697608322,"creation_date":1583064092,"question_id":60474877,"body_markdown":"I did not work with my `Android Studio` up today.\r\nwhen I build my project and I synced it , it said : `Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:\r\n`\r\n***I did not change anything in the project*** and the language of the project is `Kotin`.\r\nI use `JDK 13` and `Android Studio 3.6.1` and the latest Android SDK.","title":"syncing : Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed error in syncing.... androidstudio 3.6.1","body":"<p>I did not work with my <code>Android Studio</code> up today.\nwhen I build my project and I synced it , it said : <code>Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:\n</code>\n<strong><em>I did not change anything in the project</em></strong> and the language of the project is <code>Kotin</code>.\nI use <code>JDK 13</code> and <code>Android Studio 3.6.1</code> and the latest Android SDK.</p>\n"},{"tags":["java","ftp","client-server","ftp-client","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":1363814,"reputation":5827,"user_id":1300669,"accept_rate":91,"display_name":"RP-"},"comment_count":0,"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1340800596,"creation_date":1340695754,"answer_id":11202590,"question_id":11202215,"body_markdown":"If you are using apache commons net `FTPClient`, there is a direct method to move a file from one location to another location (if the `user` has proper permissions).\r\n\r\n    ftpClient.rename(from, to);\r\n\r\nor, If you are familiar with `ftp commands`, you can use something like\r\n\r\n    ftpClient.sendCommand(FTPCommand.yourCommand, args);\r\n    if(FTPReply.isPositiveCompletion(ftpClient.getReplyCode())) {\r\n         //command successful;\r\n    } else {\r\n         //check for reply code, and take appropriate action.\r\n    }\r\n\r\nIf you are using any other client, go through the documentation, There wont be much changes between client implementations.\r\n\r\n**UPDATE:**\r\n\r\nAbove approach moves the file to `to` directory, i.e, the file won&#39;t be there in `from` directory anymore. Basically ftp protocol meant to be transfer the files from `local &lt;-&gt; remote` or `remote &lt;-&gt; other remote` but not to transfer with in the server.\r\n\r\nThe work around here, would be simpler, get the complete file to a local `InputStream` and write it back to the server as a new file in the back up directory.\r\n\r\nto get the complete file, \r\n\r\n    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n    ftpClient.retrieveFile(fileName, outputStream);\r\n    InputStream is = new ByteArrayInputStream(outputStream.toByteArray());\r\n\r\nnow, store this stream to backup directory. First we need to change working directory to backup directory.\r\n\r\n    // assuming backup directory is with in current working directory\r\n    ftpClient.setFileType(FTP.BINARY_FILE_TYPE);//binary files\r\n    ftpClient.changeWorkingDirectory(&quot;backup&quot;);\r\n    //this overwrites the existing file\r\n    ftpClient.storeFile(fileName, is);\r\n    //if you don&#39;t want to overwrite it use storeUniqueFile\r\n\r\nHope this helps you..","title":"How to copy a file on the FTP server to a directory on the same server in Java?","body":"<p>If you are using apache commons net <code>FTPClient</code>, there is a direct method to move a file from one location to another location (if the <code>user</code> has proper permissions).</p>\n\n<pre><code>ftpClient.rename(from, to);\n</code></pre>\n\n<p>or, If you are familiar with <code>ftp commands</code>, you can use something like</p>\n\n<pre><code>ftpClient.sendCommand(FTPCommand.yourCommand, args);\nif(FTPReply.isPositiveCompletion(ftpClient.getReplyCode())) {\n     //command successful;\n} else {\n     //check for reply code, and take appropriate action.\n}\n</code></pre>\n\n<p>If you are using any other client, go through the documentation, There wont be much changes between client implementations.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Above approach moves the file to <code>to</code> directory, i.e, the file won't be there in <code>from</code> directory anymore. Basically ftp protocol meant to be transfer the files from <code>local &lt;-&gt; remote</code> or <code>remote &lt;-&gt; other remote</code> but not to transfer with in the server.</p>\n\n<p>The work around here, would be simpler, get the complete file to a local <code>InputStream</code> and write it back to the server as a new file in the back up directory.</p>\n\n<p>to get the complete file, </p>\n\n<pre><code>ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\nftpClient.retrieveFile(fileName, outputStream);\nInputStream is = new ByteArrayInputStream(outputStream.toByteArray());\n</code></pre>\n\n<p>now, store this stream to backup directory. First we need to change working directory to backup directory.</p>\n\n<pre><code>// assuming backup directory is with in current working directory\nftpClient.setFileType(FTP.BINARY_FILE_TYPE);//binary files\nftpClient.changeWorkingDirectory(\"backup\");\n//this overwrites the existing file\nftpClient.storeFile(fileName, is);\n//if you don't want to overwrite it use storeUniqueFile\n</code></pre>\n\n<p>Hope this helps you..</p>\n"},{"comments":[{"owner":{"account_id":1099760,"reputation":7046,"user_id":1092450,"accept_rate":74,"display_name":"itro"},"score":0,"creation_date":1340708473,"post_id":11204013,"comment_id":14711309,"body_markdown":"I should checkout if file exist in server then make backup then upload the file. i think you did here something else","body":"I should checkout if file exist in server then make backup then upload the file. i think you did here something else"},{"owner":{"account_id":1355206,"reputation":33312,"user_id":1293744,"accept_rate":44,"display_name":"Kumar Vivek Mitra"},"score":0,"creation_date":1340714534,"post_id":11204013,"comment_id":14714071,"body_markdown":"Look at it properly once again, if (result) is the block which will execute after the file is successfully stored on the server.....","body":"Look at it properly once again, if (result) is the block which will execute after the file is successfully stored on the server....."}],"tags":[],"owner":{"account_id":1355206,"reputation":33312,"user_id":1293744,"accept_rate":44,"display_name":"Kumar Vivek Mitra"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1340701590,"creation_date":1340701590,"answer_id":11204013,"question_id":11202215,"body_markdown":"Try this way,\r\n\r\nI am using apache&#39;s library .\r\n\r\n**ftpClient.rename(from, to)**  will make it easier, i have mentioned in the code below\r\nwhere to add ftpClient.rename(from,to).\r\n\r\n    public void goforIt(){\r\n    \t\t\r\n    \t\t\r\n    \t\tFTPClient con = null;\r\n    \t\t\r\n    \t\ttry\r\n    \t\t{\r\n    \t\t\tcon = new FTPClient();\r\n    \t\t    con.connect(&quot;www.ujudgeit.net&quot;);\r\n    \t\t    \r\n    \t\t    if (con.login(&quot;ujud3&quot;, &quot;Stevejobs27!!!!&quot;))\r\n    \t\t    {\r\n    \t\t        con.enterLocalPassiveMode(); // important!\r\n    \t\t        con.setFileType(FTP.BINARY_FILE_TYPE);\r\n    \t\t        String data = &quot;/sdcard/prerakm4a.m4a&quot;;\r\n    \t\t        ByteArrayInputStream(data.getBytes());\r\n    \t\t        FileInputStream in = new FileInputStream(new File(data));\r\n    \t\t        boolean result = con.storeFile(&quot;/Ads/prerakm4a.m4a&quot;, in);\r\n    \t\t        in.close();\r\n    \t\t        if (result) \r\n                           {\r\n                                Log.v(&quot;upload result&quot;, &quot;succeeded&quot;);\r\n                                 \r\n//$$$$$$$$$$$$$$$$$$$$$$$$$$$$$Add the backup Here$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$//\r\n\r\n                             \r\n    \r\n                       // Now here you can store the file into a backup location\r\n    \r\n                      // Use ftpClient.rename(from, to) to place it in backup\r\n \r\n//$$$$$$$$$$$$$$$$$$$$$$$$$$$$$Add the backup Here$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$//\r\n   \r\n                           }\r\n    \t\t        con.logout();\r\n    \t\t\t    con.disconnect();\r\n    \t\t    }\r\n    \t\t}\r\n    \t\tcatch (Exception e)\r\n    \t\t{\r\n    \t\t    e.printStackTrace();\r\n    \t\t}\t\r\n    \t\t\r\n    \t}","title":"How to copy a file on the FTP server to a directory on the same server in Java?","body":"<p>Try this way,</p>\n\n<p>I am using apache's library .</p>\n\n<p><strong>ftpClient.rename(from, to)</strong>  will make it easier, i have mentioned in the code below\nwhere to add ftpClient.rename(from,to).</p>\n\n<pre><code>public void goforIt(){\n\n\n        FTPClient con = null;\n\n        try\n        {\n            con = new FTPClient();\n            con.connect(\"www.ujudgeit.net\");\n\n            if (con.login(\"ujud3\", \"Stevejobs27!!!!\"))\n            {\n                con.enterLocalPassiveMode(); // important!\n                con.setFileType(FTP.BINARY_FILE_TYPE);\n                String data = \"/sdcard/prerakm4a.m4a\";\n                ByteArrayInputStream(data.getBytes());\n                FileInputStream in = new FileInputStream(new File(data));\n                boolean result = con.storeFile(\"/Ads/prerakm4a.m4a\", in);\n                in.close();\n                if (result) \n                       {\n                            Log.v(\"upload result\", \"succeeded\");\n</code></pre>\n\n<p>//$$$$$$$$$$$$$$$$$$$$$$$$$$$$$Add the backup Here$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$//</p>\n\n<pre><code>                   // Now here you can store the file into a backup location\n\n                  // Use ftpClient.rename(from, to) to place it in backup\n</code></pre>\n\n<p>//$$$$$$$$$$$$$$$$$$$$$$$$$$$$$Add the backup Here$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$//</p>\n\n<pre><code>                       }\n                con.logout();\n                con.disconnect();\n            }\n        }\n        catch (Exception e)\n        {\n            e.printStackTrace();\n        }   \n\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":0,"creation_date":1496948972,"post_id":44442582,"comment_id":75885113,"body_markdown":"This does not backup/copy a file, it moves a file. That&#39;s not what this question is about.","body":"This does not backup/copy a file, it moves a file. That&#39;s not what this question is about."}],"tags":[],"owner":{"account_id":9931486,"reputation":9,"user_id":7351277,"display_name":"Angel Santiago"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1496944566,"creation_date":1496944566,"answer_id":44442582,"question_id":11202215,"body_markdown":"To backup at same Server (move), can you use:\r\n\r\n    String source=&quot;/home/user/some&quot;;\r\n    String goal  =&quot;/home/user/someOther&quot;;\r\n    FTPFile[] filesFTP = cliente.listFiles(source);\r\n    \r\n    clientFTP.changeWorkingDirectory(goal);  // IMPORTANT change to final directory\r\n                 \r\n    for (FTPFile f : archivosFTP) \r\n       {\r\n        if(f.isFile())\r\n           {\r\n            cliente.rename(source+&quot;/&quot;+f.getName(), f.getName());\r\n           }\r\n       }","title":"How to copy a file on the FTP server to a directory on the same server in Java?","body":"<p>To backup at same Server (move), can you use:</p>\n\n<pre><code>String source=\"/home/user/some\";\nString goal  =\"/home/user/someOther\";\nFTPFile[] filesFTP = cliente.listFiles(source);\n\nclientFTP.changeWorkingDirectory(goal);  // IMPORTANT change to final directory\n\nfor (FTPFile f : archivosFTP) \n   {\n    if(f.isFile())\n       {\n        cliente.rename(source+\"/\"+f.getName(), f.getName());\n       }\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697608106,"creation_date":1537771482,"answer_id":52473922,"question_id":11202215,"body_markdown":"There&#39;s no standard way to duplicate a remote file over FTP protocol. Some FTP servers support proprietary or non-standard extensions for this though. \r\n\r\n---\r\n\r\nSo if your are lucky that your server is ProFTPD with [`mod_copy` module](http://www.proftpd.org/docs/contrib/mod_copy.html), you can use [`FTP.sendCommand`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#sendCommand(java.lang.String)) to issue these two commands:\r\n\r\n    f.sendCommand(&quot;CPFR sourcepath&quot;);\r\n    f.sendCommand(&quot;CPTO targetpath&quot;);\r\n\r\n---\r\n\r\nThe second possibility is that your server allows you to execute arbitrary shell commands. This is even less common. If your server supports this you can use `SITE EXEC` command:\r\n\r\n    SITE EXEC cp -p sourcepath targetpath\r\n\r\n---\r\n\r\nAnother workaround is to open a second connection to the FTP server and make the server upload the file to itself by piping a passive mode data connection to an active mode data connection. Implementation of this solution (in PHP though) is shown in https://stackoverflow.com/q/3808799/850848#46785089.\r\n\r\n---\r\n\r\nIf neither of this works, all you can do is to download the file to a local temporary location and re-upload it back to the target location. This is that the [answer by @RP- shows](https://stackoverflow.com/q/11202215/850848#11202590).\r\n\r\n---\r\n\r\nSee also https://stackoverflow.com/q/3808799/850848.","title":"How to copy a file on the FTP server to a directory on the same server in Java?","body":"<p>There's no standard way to duplicate a remote file over FTP protocol. Some FTP servers support proprietary or non-standard extensions for this though.</p>\n<hr />\n<p>So if your are lucky that your server is ProFTPD with <a href=\"http://www.proftpd.org/docs/contrib/mod_copy.html\" rel=\"nofollow noreferrer\"><code>mod_copy</code> module</a>, you can use <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#sendCommand(java.lang.String)\" rel=\"nofollow noreferrer\"><code>FTP.sendCommand</code></a> to issue these two commands:</p>\n<pre><code>f.sendCommand(&quot;CPFR sourcepath&quot;);\nf.sendCommand(&quot;CPTO targetpath&quot;);\n</code></pre>\n<hr />\n<p>The second possibility is that your server allows you to execute arbitrary shell commands. This is even less common. If your server supports this you can use <code>SITE EXEC</code> command:</p>\n<pre><code>SITE EXEC cp -p sourcepath targetpath\n</code></pre>\n<hr />\n<p>Another workaround is to open a second connection to the FTP server and make the server upload the file to itself by piping a passive mode data connection to an active mode data connection. Implementation of this solution (in PHP though) is shown in <a href=\"https://stackoverflow.com/q/3808799/850848#46785089\">FTP copy a file to another place in same FTP</a>.</p>\n<hr />\n<p>If neither of this works, all you can do is to download the file to a local temporary location and re-upload it back to the target location. This is that the <a href=\"https://stackoverflow.com/q/11202215/850848#11202590\">answer by @RP- shows</a>.</p>\n<hr />\n<p>See also <a href=\"https://stackoverflow.com/q/3808799/850848\">FTP copy a file to another place in same FTP</a>.</p>\n"}],"owner":{"account_id":1099760,"reputation":7046,"user_id":1092450,"accept_rate":74,"display_name":"itro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47419,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":11202590,"answer_count":4,"score":14,"last_activity_date":1697608106,"creation_date":1340694127,"question_id":11202215,"body_markdown":"I&#39;m using Apache Commons FTP to upload a file. Before uploading I want to check if the file already exists on the server and make a backup from it to a backup directory on the same server.\r\n\r\n**Does anyone know how to copy a file from a FTP server to a backup directory on the same server?**\r\n\r\n\r\n\r\n    public static void uploadWithCommonsFTP(File fileToBeUpload){\r\n        FTPClient f = new FTPClient();\r\n        FTPFile backupDirectory;\r\n        try {\r\n            f.connect(server.getServer());\r\n            f.login(server.getUsername(), server.getPassword());\r\n            FTPFile[] directories = f.listDirectories();\r\n            FTPFile[] files = f.listFiles();\r\n            for(FTPFile file:directories){\r\n                if (!file.getName().equalsIgnoreCase(&quot;backup&quot;)) {\r\n                    backupDirectory=file;\r\n                } else {\r\n                   f.makeDirectory(&quot;backup&quot;);\r\n                }\r\n            }\r\n            for(FTPFile file: files){\r\n                if(file.getName().equals(fileToBeUpload.getName())){\r\n                    //copy file to backupDirectory\r\n                }\r\n            }\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n       \r\n    }\r\n\r\n---\r\n\r\n**Edited code:** still there is a problem,  when i backup zip file, the backup-ed file is corrupted. \r\n\r\n**Does any body know the reason for it?**\r\n\r\n     public static void backupUploadWithCommonsFTP(File fileToBeUpload) {\r\n        FTPClient f = new FTPClient();\r\n        boolean backupDirectoryExist = false;\r\n        boolean fileToBeUploadExist = false;\r\n        FTPFile backupDirectory = null;\r\n        try {\r\n            f.connect(server.getServer());\r\n            f.login(server.getUsername(), server.getPassword());\r\n            FTPFile[] directories = f.listDirectories();\r\n            // Check for existence of backup directory\r\n            for (FTPFile file : directories) {\r\n                String filename = file.getName();\r\n                if (file.isDirectory() &amp;&amp; filename.equalsIgnoreCase(&quot;backup&quot;)) {\r\n                    backupDirectory = file;\r\n                    backupDirectoryExist = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!backupDirectoryExist) {\r\n                f.makeDirectory(&quot;backup&quot;);\r\n            }\r\n            // Check if file already exist on the server\r\n            f.changeWorkingDirectory(&quot;files&quot;);\r\n            FTPFile[] files = f.listFiles();\r\n            f.changeWorkingDirectory(&quot;backup&quot;);\r\n            String filePathToBeBackup=&quot;/home/user/backup/&quot;;\r\n            String prefix;\r\n            String suffix;\r\n            String fileNameToBeBackup;\r\n            FTPFile fileReadyForBackup = null;\r\n            f.setFileType(FTP.BINARY_FILE_TYPE);\r\n            f.setFileTransferMode(FTP.BINARY_FILE_TYPE);\r\n            for (FTPFile file : files) {\r\n                if (file.isFile() &amp;&amp; file.getName().equals(fileToBeUpload.getName())) {\r\n                    prefix = FilenameUtils.getBaseName(file.getName());\r\n                    suffix = &quot;.&quot;.concat(FilenameUtils.getExtension(file.getName()));\r\n                    fileNameToBeBackup = prefix.concat(Calendar.getInstance().getTime().toString().concat(suffix));\r\n                    filePathToBeBackup = filePathToBeBackup.concat(fileNameToBeBackup);\r\n                    fileReadyForBackup = file;\r\n                    fileToBeUploadExist = true;\r\n                    break;\r\n                }\r\n            }\r\n            // If file already exist on the server create a backup from it otherwise just upload the file.\r\n            if(fileToBeUploadExist){\r\n                ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n                f.retrieveFile(fileReadyForBackup.getName(), outputStream);\r\n                InputStream is = new ByteArrayInputStream(outputStream.toByteArray());\r\n                if(f.storeUniqueFile(filePathToBeBackup, is)){\r\n                    JOptionPane.showMessageDialog(null, &quot;Backup succeeded.&quot;);\r\n                    f.changeWorkingDirectory(&quot;files&quot;);\r\n                    boolean reply = f.storeFile(fileToBeUpload.getName(), new FileInputStream(fileToBeUpload));\r\n                    if(reply){\r\n                        JOptionPane.showMessageDialog(null,&quot;Upload succeeded.&quot;);\r\n                    }else{\r\n                        JOptionPane.showMessageDialog(null,&quot;Upload failed after backup.&quot;);\r\n                    }\r\n                }else{\r\n                    JOptionPane.showMessageDialog(null,&quot;Backup failed.&quot;);\r\n                }\r\n            }else{\r\n                f.changeWorkingDirectory(&quot;files&quot;);\r\n                f.setFileType(FTP.BINARY_FILE_TYPE);\r\n                f.enterLocalPassiveMode();\r\n                InputStream inputStream = new FileInputStream(fileToBeUpload);\r\n                ByteArrayInputStream in = new ByteArrayInputStream(FileUtils.readFileToByteArray(fileToBeUpload));\r\n                boolean reply = f.storeFile(fileToBeUpload.getName(), in);\r\n                System.out.println(&quot;Reply code for storing file to server: &quot; + reply);\r\n                if(!f.completePendingCommand()) {\r\n                    f.logout();\r\n                    f.disconnect();\r\n                    System.err.println(&quot;File transfer failed.&quot;);\r\n                    System.exit(1);\r\n                }\r\n                if(reply){\r\n\r\n                    JOptionPane.showMessageDialog(null,&quot;File uploaded successfully without making backup.&quot; +\r\n                            &quot;\\nReason: There wasn&#39;t any previous version of this file.&quot;);\r\n                }else{\r\n                    JOptionPane.showMessageDialog(null,&quot;Upload failed.&quot;);\r\n                }\r\n            }\r\n            //Logout and disconnect from server\r\n            in.close();\r\n            f.logout();\r\n            f.disconnect();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }","title":"How to copy a file on the FTP server to a directory on the same server in Java?","body":"<p>I'm using Apache Commons FTP to upload a file. Before uploading I want to check if the file already exists on the server and make a backup from it to a backup directory on the same server.</p>\n\n<p><strong>Does anyone know how to copy a file from a FTP server to a backup directory on the same server?</strong></p>\n\n<pre><code>public static void uploadWithCommonsFTP(File fileToBeUpload){\n    FTPClient f = new FTPClient();\n    FTPFile backupDirectory;\n    try {\n        f.connect(server.getServer());\n        f.login(server.getUsername(), server.getPassword());\n        FTPFile[] directories = f.listDirectories();\n        FTPFile[] files = f.listFiles();\n        for(FTPFile file:directories){\n            if (!file.getName().equalsIgnoreCase(\"backup\")) {\n                backupDirectory=file;\n            } else {\n               f.makeDirectory(\"backup\");\n            }\n        }\n        for(FTPFile file: files){\n            if(file.getName().equals(fileToBeUpload.getName())){\n                //copy file to backupDirectory\n            }\n        }\n\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Edited code:</strong> still there is a problem,  when i backup zip file, the backup-ed file is corrupted. </p>\n\n<p><strong>Does any body know the reason for it?</strong></p>\n\n<pre><code> public static void backupUploadWithCommonsFTP(File fileToBeUpload) {\n    FTPClient f = new FTPClient();\n    boolean backupDirectoryExist = false;\n    boolean fileToBeUploadExist = false;\n    FTPFile backupDirectory = null;\n    try {\n        f.connect(server.getServer());\n        f.login(server.getUsername(), server.getPassword());\n        FTPFile[] directories = f.listDirectories();\n        // Check for existence of backup directory\n        for (FTPFile file : directories) {\n            String filename = file.getName();\n            if (file.isDirectory() &amp;&amp; filename.equalsIgnoreCase(\"backup\")) {\n                backupDirectory = file;\n                backupDirectoryExist = true;\n                break;\n            }\n        }\n        if (!backupDirectoryExist) {\n            f.makeDirectory(\"backup\");\n        }\n        // Check if file already exist on the server\n        f.changeWorkingDirectory(\"files\");\n        FTPFile[] files = f.listFiles();\n        f.changeWorkingDirectory(\"backup\");\n        String filePathToBeBackup=\"/home/user/backup/\";\n        String prefix;\n        String suffix;\n        String fileNameToBeBackup;\n        FTPFile fileReadyForBackup = null;\n        f.setFileType(FTP.BINARY_FILE_TYPE);\n        f.setFileTransferMode(FTP.BINARY_FILE_TYPE);\n        for (FTPFile file : files) {\n            if (file.isFile() &amp;&amp; file.getName().equals(fileToBeUpload.getName())) {\n                prefix = FilenameUtils.getBaseName(file.getName());\n                suffix = \".\".concat(FilenameUtils.getExtension(file.getName()));\n                fileNameToBeBackup = prefix.concat(Calendar.getInstance().getTime().toString().concat(suffix));\n                filePathToBeBackup = filePathToBeBackup.concat(fileNameToBeBackup);\n                fileReadyForBackup = file;\n                fileToBeUploadExist = true;\n                break;\n            }\n        }\n        // If file already exist on the server create a backup from it otherwise just upload the file.\n        if(fileToBeUploadExist){\n            ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n            f.retrieveFile(fileReadyForBackup.getName(), outputStream);\n            InputStream is = new ByteArrayInputStream(outputStream.toByteArray());\n            if(f.storeUniqueFile(filePathToBeBackup, is)){\n                JOptionPane.showMessageDialog(null, \"Backup succeeded.\");\n                f.changeWorkingDirectory(\"files\");\n                boolean reply = f.storeFile(fileToBeUpload.getName(), new FileInputStream(fileToBeUpload));\n                if(reply){\n                    JOptionPane.showMessageDialog(null,\"Upload succeeded.\");\n                }else{\n                    JOptionPane.showMessageDialog(null,\"Upload failed after backup.\");\n                }\n            }else{\n                JOptionPane.showMessageDialog(null,\"Backup failed.\");\n            }\n        }else{\n            f.changeWorkingDirectory(\"files\");\n            f.setFileType(FTP.BINARY_FILE_TYPE);\n            f.enterLocalPassiveMode();\n            InputStream inputStream = new FileInputStream(fileToBeUpload);\n            ByteArrayInputStream in = new ByteArrayInputStream(FileUtils.readFileToByteArray(fileToBeUpload));\n            boolean reply = f.storeFile(fileToBeUpload.getName(), in);\n            System.out.println(\"Reply code for storing file to server: \" + reply);\n            if(!f.completePendingCommand()) {\n                f.logout();\n                f.disconnect();\n                System.err.println(\"File transfer failed.\");\n                System.exit(1);\n            }\n            if(reply){\n\n                JOptionPane.showMessageDialog(null,\"File uploaded successfully without making backup.\" +\n                        \"\\nReason: There wasn't any previous version of this file.\");\n            }else{\n                JOptionPane.showMessageDialog(null,\"Upload failed.\");\n            }\n        }\n        //Logout and disconnect from server\n        in.close();\n        f.logout();\n        f.disconnect();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","azure","azure-form-recognizer"],"answers":[{"comments":[{"owner":{"account_id":27218323,"reputation":1,"user_id":20748019,"display_name":"Srinivasa Manindra Ramayanam"},"score":0,"creation_date":1698125827,"post_id":77313747,"comment_id":136362083,"body_markdown":"Thank you,suggestion was worked.I have one more query that, currently azure ai form recognizer is not supporting .csv or excel files,do we have any approach to read key value pairs or table structures from excel files?other than converting excel into pdf (as it includes 3rd party library call involves, in project we cannot call third party library due to security reasons).","body":"Thank you,suggestion was worked.I have one more query that, currently azure ai form recognizer is not supporting .csv or excel files,do we have any approach to read key value pairs or table structures from excel files?other than converting excel into pdf (as it includes 3rd party library call involves, in project we cannot call third party library due to security reasons)."}],"tags":[],"owner":{"account_id":28683800,"reputation":1269,"user_id":21964439,"display_name":"RishabhM"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697608043,"creation_date":1697608043,"answer_id":77313747,"question_id":77303658,"body_markdown":"\r\nBased on the provided error log, it indicates that the URL you are passing to the `beginAnalyzeDocumentFromUrl` method is not in the correct format. \r\n\r\nAs you are using `beginAnalyzeDocumentFromUrl`, the URL input must be in the format of `http` or `https`.\r\n\r\nTo fix the issue please check your source input format and you can check below sample input for reference and testing:\r\n\r\n&gt; https://raw.githubusercontent.com/Azure-Samples/cognitive-services-REST-api-samples/master/curl/form-recognizer/sample-layout.pdf\r\n\r\nI was able execute `beginAnalyzeDocumentFromUrl` method with above sample URL.\r\n![enter image description here](https://i.imgur.com/EgXSBdj.png)\r\n\r\nFor more details regarding implementation, you can check this [documentation.](https://learn.microsoft.com/en-us/azure/ai-services/document-intelligence/quickstarts/get-started-sdks-rest-api?view=doc-intel-3.1.0&amp;pivots=programming-language-java#general-document-model)\r\n\r\n\r\n","title":"Azure AI Document intelligence, getting InvalidContentSourceFormat error","body":"<p>Based on the provided error log, it indicates that the URL you are passing to the <code>beginAnalyzeDocumentFromUrl</code> method is not in the correct format.</p>\n<p>As you are using <code>beginAnalyzeDocumentFromUrl</code>, the URL input must be in the format of <code>http</code> or <code>https</code>.</p>\n<p>To fix the issue please check your source input format and you can check below sample input for reference and testing:</p>\n<blockquote>\n<p><a href=\"https://raw.githubusercontent.com/Azure-Samples/cognitive-services-REST-api-samples/master/curl/form-recognizer/sample-layout.pdf\" rel=\"nofollow noreferrer\">https://raw.githubusercontent.com/Azure-Samples/cognitive-services-REST-api-samples/master/curl/form-recognizer/sample-layout.pdf</a></p>\n</blockquote>\n<p>I was able execute <code>beginAnalyzeDocumentFromUrl</code> method with above sample URL.\n<img src=\"https://i.imgur.com/EgXSBdj.png\" alt=\"enter image description here\" /></p>\n<p>For more details regarding implementation, you can check this <a href=\"https://learn.microsoft.com/en-us/azure/ai-services/document-intelligence/quickstarts/get-started-sdks-rest-api?view=doc-intel-3.1.0&amp;pivots=programming-language-java#general-document-model\" rel=\"nofollow noreferrer\">documentation.</a></p>\n"}],"owner":{"account_id":27218323,"reputation":1,"user_id":20748019,"display_name":"Srinivasa Manindra Ramayanam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697608043,"creation_date":1697474707,"question_id":77303658,"body_markdown":"Currently i am working with azure ai document intelligence form recognizer. I have written the logic and hit my api. My api will  take azure form recognizer endpoint, and apikey to connect. But i am getting below error. Please help to solve on this.\r\n```java\r\ncom.azure.core.exception.HttpResponseException: Status code 400, &quot;{&quot;error&quot;:{&quot;code&quot;:&quot;InvalidArgument&quot;,&quot;message&quot;:&quot;Invalid argument.&quot;,&quot;innererror&quot;:{&quot;code&quot;:&quot;InvalidContentSourceFormat&quot;,&quot;message&quot;:&quot;Invalid content source: Url must be http or https.&quot;}}}&quot;\r\n\tat com.azure.ai.formrecognizer.documentanalysis.implementation.util.Transforms.getHttpResponseException(Transforms.java:276) ~[azure-ai-formrecognizer-4.0.8.jar:4.0.8]\r\n\tat com.azure.ai.formrecognizer.documentanalysis.DocumentAnalysisClient.analyzeDocument(DocumentAnalysisClient.java:332) ~[azure-ai-formrecognizer-4.0.8.jar:4.0.8]\r\n\tat com.azure.ai.formrecognizer.documentanalysis.DocumentAnalysisClient.lambda$analyzeActivationOperation$2(DocumentAnalysisClient.java:302) ~[azure-ai-formrecognizer-4.0.8.jar:4.0.8]\r\n\tat com.azure.ai.formrecognizer.documentanalysis.DocumentAnalysisClient.lambda$beginAnalyzeDocumentFromUrlSync$0(DocumentAnalysisClient.java:181) ~[azure-ai-formrecognizer-4.0.8.jar:4.0.8]\r\n\tat com.azure.core.util.polling.SimpleSyncPoller.&lt;init&gt;(SimpleSyncPoller.java:65) ~[azure-core-1.40.0.jar:1.40.0]\r\n\tat com.azure.core.util.polling.SyncPoller.createPoller(SyncPoller.java:127) ~[azure-core-1.40.0.jar:1.40.0]\r\n\tat com.azure.ai.formrecognizer.documentanalysis.DocumentAnalysisClient.beginAnalyzeDocumentFromUrlSync(DocumentAnalysisClient.java:174) ~[azure-ai-formrecognizer-4.0.8.jar:4.0.8]\r\n\tat com.azure.ai.formrecognizer.documentanalysis.DocumentAnalysisClient.beginAnalyzeDocumentFromUrl(DocumentAnalysisClient.java:157) ~[azure-ai-formrecognizer-4.0.8.jar:4.0.8]\r\n\tat com.azure.ai.formrecognizer.documentanalysis.DocumentAnalysisClient.beginAnalyzeDocumentFromUrl(DocumentAnalysisClient.java:113) ~[azure-ai-formrecognizer-4.0.8.jar:4.0.8]\r\n```\r\nI have tried by checking all possible to ways to findout, couldn&#39;t able to find.\r\nEven i tried to check azure documentation and support faq.","title":"Azure AI Document intelligence, getting InvalidContentSourceFormat error","body":"<p>Currently i am working with azure ai document intelligence form recognizer. I have written the logic and hit my api. My api will  take azure form recognizer endpoint, and apikey to connect. But i am getting below error. Please help to solve on this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>com.azure.core.exception.HttpResponseException: Status code 400, &quot;{&quot;error&quot;:{&quot;code&quot;:&quot;InvalidArgument&quot;,&quot;message&quot;:&quot;Invalid argument.&quot;,&quot;innererror&quot;:{&quot;code&quot;:&quot;InvalidContentSourceFormat&quot;,&quot;message&quot;:&quot;Invalid content source: Url must be http or https.&quot;}}}&quot;\n    at com.azure.ai.formrecognizer.documentanalysis.implementation.util.Transforms.getHttpResponseException(Transforms.java:276) ~[azure-ai-formrecognizer-4.0.8.jar:4.0.8]\n    at com.azure.ai.formrecognizer.documentanalysis.DocumentAnalysisClient.analyzeDocument(DocumentAnalysisClient.java:332) ~[azure-ai-formrecognizer-4.0.8.jar:4.0.8]\n    at com.azure.ai.formrecognizer.documentanalysis.DocumentAnalysisClient.lambda$analyzeActivationOperation$2(DocumentAnalysisClient.java:302) ~[azure-ai-formrecognizer-4.0.8.jar:4.0.8]\n    at com.azure.ai.formrecognizer.documentanalysis.DocumentAnalysisClient.lambda$beginAnalyzeDocumentFromUrlSync$0(DocumentAnalysisClient.java:181) ~[azure-ai-formrecognizer-4.0.8.jar:4.0.8]\n    at com.azure.core.util.polling.SimpleSyncPoller.&lt;init&gt;(SimpleSyncPoller.java:65) ~[azure-core-1.40.0.jar:1.40.0]\n    at com.azure.core.util.polling.SyncPoller.createPoller(SyncPoller.java:127) ~[azure-core-1.40.0.jar:1.40.0]\n    at com.azure.ai.formrecognizer.documentanalysis.DocumentAnalysisClient.beginAnalyzeDocumentFromUrlSync(DocumentAnalysisClient.java:174) ~[azure-ai-formrecognizer-4.0.8.jar:4.0.8]\n    at com.azure.ai.formrecognizer.documentanalysis.DocumentAnalysisClient.beginAnalyzeDocumentFromUrl(DocumentAnalysisClient.java:157) ~[azure-ai-formrecognizer-4.0.8.jar:4.0.8]\n    at com.azure.ai.formrecognizer.documentanalysis.DocumentAnalysisClient.beginAnalyzeDocumentFromUrl(DocumentAnalysisClient.java:113) ~[azure-ai-formrecognizer-4.0.8.jar:4.0.8]\n</code></pre>\n<p>I have tried by checking all possible to ways to findout, couldn't able to find.\nEven i tried to check azure documentation and support faq.</p>\n"},{"tags":["java","android","ftp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697607828,"creation_date":1591364002,"answer_id":62216556,"question_id":62214820,"body_markdown":"Before sending `RETR`, you need to send `PASV`, `EPSV`, `PORT` or `EPRT` and parse its response. Typically you would use `PASV`, for which there&#39;s [`FTP.pasv` method](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#pasv()).\r\n\r\nThe next would to be open the data connection, based on the response to the `PASV` (and only then you send `RETR`).\r\n\r\nBut implementing the data connection is lot of work. And the `FTPClient` implementation of the data connection is hidden in a protected `_openDataConnection_` method. So you cannot reuse the standard implementation. You will have to use generic [`Socket` class](https://docs.oracle.com/javase/8/docs/api/java/net/Socket.html).\r\n\r\nAnd only then you can call [`FTP.retr`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#retr(java.lang.String)) (which does not do much on its own).\r\n\r\n---\r\n\r\n*This is all a bad idea. But if you want to do it, check the implementation of `FTPClient.retrieveFile` – It&#39;s all there.*\r\n\r\n*The `FTPClient.retrieveFile` and `FTPClient.retrieveFileStream` methods work perfectly – They are being used by thousands – It&#39;s probably the most widely used FTP library for Java. If it does not work for you, it&#39;s either because you are using them incorrectly or because there&#39;s something wrong with your network or servers.*\r\n\r\n","title":"Use &quot;RETR&quot; FTP command with Apache Common&#39;s FTPClient","body":"<p>Before sending <code>RETR</code>, you need to send <code>PASV</code>, <code>EPSV</code>, <code>PORT</code> or <code>EPRT</code> and parse its response. Typically you would use <code>PASV</code>, for which there's <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#pasv()\" rel=\"nofollow noreferrer\"><code>FTP.pasv</code> method</a>.</p>\n<p>The next would to be open the data connection, based on the response to the <code>PASV</code> (and only then you send <code>RETR</code>).</p>\n<p>But implementing the data connection is lot of work. And the <code>FTPClient</code> implementation of the data connection is hidden in a protected <code>_openDataConnection_</code> method. So you cannot reuse the standard implementation. You will have to use generic <a href=\"https://docs.oracle.com/javase/8/docs/api/java/net/Socket.html\" rel=\"nofollow noreferrer\"><code>Socket</code> class</a>.</p>\n<p>And only then you can call <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#retr(java.lang.String)\" rel=\"nofollow noreferrer\"><code>FTP.retr</code></a> (which does not do much on its own).</p>\n<hr />\n<p><em>This is all a bad idea. But if you want to do it, check the implementation of <code>FTPClient.retrieveFile</code> – It's all there.</em></p>\n<p><em>The <code>FTPClient.retrieveFile</code> and <code>FTPClient.retrieveFileStream</code> methods work perfectly – They are being used by thousands – It's probably the most widely used FTP library for Java. If it does not work for you, it's either because you are using them incorrectly or because there's something wrong with your network or servers.</em></p>\n"}],"owner":{"account_id":2294271,"reputation":1873,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":694,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697607828,"creation_date":1591358175,"question_id":62214820,"body_markdown":"I&#39;m working on an Android app (Java 8, target API=27) that downloads files from an FTP server (using Apache Common&#39;s `FTPClient`) but I&#39;m experiencing a big [problem][1] with missing bytes with the `retrieveFile` and `retrieveFileStream` methods.\r\n\r\nThat&#39;s why I want to try the alternative of sending the actual commands:\r\n\r\n    //login\r\n    String path = remoteFolder + &quot;/&quot; + filename;\r\n    \r\n    if(ftpClient.isConnected()) {\r\n        ftpClient.enterLocalPassiveMode();\r\n        ftpClient.setFileType(FTP.BINARY_FILE_TYPE); //For images,...\r\n        ftpClient.retr(path); //sends the &quot;RETR&quot; command\r\n    \r\n        String reply = ftpClient.getReplyString();\r\n        Log.d(TAG,reply);\r\n    }\r\n\r\nThis prints:\r\n\r\n    150 Opening BINARY mode data connection.\r\n\r\nBut what now?\r\n\r\n`ftpClient.getReplyStrings().length` is `1` and it&#39;s the same text. Usually I&#39;d send the `RETR` command on the command socket, then read the data socket&#39;s reply (= the contents of the e.g. txt file) but there don&#39;t seem to be different, openly accesible sockets in this library.\r\n\r\n**Question:** How do I get the contents of the file &quot;manually&quot; - so using the FTP commands but without using the `retrieveFile...` methods (if possible)?\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/62023585/2016165","title":"Use &quot;RETR&quot; FTP command with Apache Common&#39;s FTPClient","body":"<p>I'm working on an Android app (Java 8, target API=27) that downloads files from an FTP server (using Apache Common's <code>FTPClient</code>) but I'm experiencing a big <a href=\"https://stackoverflow.com/q/62023585/2016165\">problem</a> with missing bytes with the <code>retrieveFile</code> and <code>retrieveFileStream</code> methods.</p>\n\n<p>That's why I want to try the alternative of sending the actual commands:</p>\n\n<pre><code>//login\nString path = remoteFolder + \"/\" + filename;\n\nif(ftpClient.isConnected()) {\n    ftpClient.enterLocalPassiveMode();\n    ftpClient.setFileType(FTP.BINARY_FILE_TYPE); //For images,...\n    ftpClient.retr(path); //sends the \"RETR\" command\n\n    String reply = ftpClient.getReplyString();\n    Log.d(TAG,reply);\n}\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>150 Opening BINARY mode data connection.\n</code></pre>\n\n<p>But what now?</p>\n\n<p><code>ftpClient.getReplyStrings().length</code> is <code>1</code> and it's the same text. Usually I'd send the <code>RETR</code> command on the command socket, then read the data socket's reply (= the contents of the e.g. txt file) but there don't seem to be different, openly accesible sockets in this library.</p>\n\n<p><strong>Question:</strong> How do I get the contents of the file \"manually\" - so using the FTP commands but without using the <code>retrieveFile...</code> methods (if possible)?</p>\n"},{"tags":["java","apache","ftp","ftps","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1697607623,"creation_date":1479974109,"answer_id":40780753,"question_id":40780458,"body_markdown":"The [`FTP.list` method](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#list()) is way too low-level. It does not even open a data connection. It just sends the `LIST` command. You cannot use it on its own. As its documentation says:\r\n\r\n&gt; A convenience method to send the FTP LIST command to the server,\r\n&gt; receive the reply, and return the reply code.  **Remember, it is up\r\n&gt; to you to manage the data connection.  If you don&#39;t need this low\r\n&gt; level of access, use [`FTPClient`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html), which will handle all low level details for you.**\r\n\r\n---\r\n\r\nInstead, use some high-level method like:\r\n\r\n- [`FTPClient.mlistDir`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistDir()) (recommended, if the server supports it) or\r\n- [`FTPClient.listFiles`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#listFiles()).\r\n\r\n---\r\n\r\nAnd keep your first approach with the call to the `FTPClient.enterLocalPassiveMode()`. \r\n\r\nYou cannot switch to the passive mode just by sending the `PASV` command to the server. You have to switch also the client. Otherwise the client and server won&#39;t be able to talk to each other.\r\n\r\nThe `FTPClient.enterLocalPassiveMode` switches both the client and the server to the passive mode.\r\n\r\n---\r\n\r\nAs you are using FTPS, you will want to enable encrypted data transfers too. Note that the Apache Common Net library does not encrypt data transfers by default.\r\n\r\n    ftp.execPBSZ(0);\r\n    ftp.execPROT(&quot;P&quot;).\r\n\r\nAnd actually some servers (yours in particular) will even require you to encrypt the data transfers, if the control connection is encrypted.","title":"org.apache.commons.net.ftp.FTPSClient returning 425 after list command","body":"<p>The <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#list()\" rel=\"nofollow noreferrer\"><code>FTP.list</code> method</a> is way too low-level. It does not even open a data connection. It just sends the <code>LIST</code> command. You cannot use it on its own. As its documentation says:</p>\n<blockquote>\n<p>A convenience method to send the FTP LIST command to the server,\nreceive the reply, and return the reply code.  <strong>Remember, it is up\nto you to manage the data connection.  If you don't need this low\nlevel of access, use <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html\" rel=\"nofollow noreferrer\"><code>FTPClient</code></a>, which will handle all low level details for you.</strong></p>\n</blockquote>\n<hr />\n<p>Instead, use some high-level method like:</p>\n<ul>\n<li><a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistDir()\" rel=\"nofollow noreferrer\"><code>FTPClient.mlistDir</code></a> (recommended, if the server supports it) or</li>\n<li><a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#listFiles()\" rel=\"nofollow noreferrer\"><code>FTPClient.listFiles</code></a>.</li>\n</ul>\n<hr />\n<p>And keep your first approach with the call to the <code>FTPClient.enterLocalPassiveMode()</code>.</p>\n<p>You cannot switch to the passive mode just by sending the <code>PASV</code> command to the server. You have to switch also the client. Otherwise the client and server won't be able to talk to each other.</p>\n<p>The <code>FTPClient.enterLocalPassiveMode</code> switches both the client and the server to the passive mode.</p>\n<hr />\n<p>As you are using FTPS, you will want to enable encrypted data transfers too. Note that the Apache Common Net library does not encrypt data transfers by default.</p>\n<pre><code>ftp.execPBSZ(0);\nftp.execPROT(&quot;P&quot;).\n</code></pre>\n<p>And actually some servers (yours in particular) will even require you to encrypt the data transfers, if the control connection is encrypted.</p>\n"}],"owner":{"account_id":1202806,"reputation":23223,"user_id":1173112,"accept_rate":89,"display_name":"Koray Tugay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2931,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":40780753,"answer_count":1,"score":5,"last_activity_date":1697607623,"creation_date":1479972993,"question_id":40780458,"body_markdown":"I am trying to connect to an FTPS server. I can connect with FileZilla just fine and list the files in the server, download etc..\r\n\r\n[![enter image description here][1]][1] \r\n\r\nI am trying to connect to this FTP Server with Java using the FTPSClient from org.apache.commons.net.ftp package. This is how I am trying:\r\n\r\n    FTPSClient ftp = new FTPSClient();\r\n    ftp.connect(HOST, 7021);\r\n    ftp.enterLocalPassiveMode();\r\n    ftp.login(USERNAME, PASSWORD);\r\n    final int list = ftp.list();\r\n    System.out.println(&quot;List returned: &quot; + list);\r\n\r\nAnd the response I am getting is: \r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    List returned: 425\r\n\r\nAccording to [Wikipedia][2], 425 means: &quot;Can&#39;t open data connection.&quot;\r\n\r\nHowever, trying to create a folder works fine:\r\n\r\n    FTPSClient ftp = new FTPSClient();\r\n    ftp.connect(HOST, 7021);\r\n    ftp.enterLocalPassiveMode();\r\n    ftp.login(USERNAME, PASSWORD);\r\n    ftp.mkd(&quot;/laylaylom&quot;);\r\n\r\nSo if I run this code and connect with FileZilla I will see folder &quot;laylaylom&quot; in the FTP Server.\r\n\r\nI also tried: \r\n\r\n\tFTPSClient ftp = new FTPSClient();\r\n\tftp.connect(HOST, 7021);\r\n\tftp.login(USERNAME, PASSWORD);\r\n\tfinal int pasv = ftp.sendCommand(&quot;PASV&quot;);\r\n\tSystem.out.println(&quot;pasv is: &quot; + pasv);\r\n\tfinal int list = ftp.list();\r\n\tSystem.out.println(&quot;List returned: &quot; + list);\r\n\r\nAnd the output will be: \r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    pasv is: 227\r\n    List returned: 522\r\n\r\nwhere 227 is: &quot;Entering Passive Mode (h1,h2,h3,h4,p1,p2).&quot; and 552 is not listed in the Wikipedia page and I am not sure what it stands for. \r\n\r\nHow can I make `list()` work?\r\n\r\n**Edit #1**\r\n\r\nAfter Martin Prikryl &#39;s answer I tried this:\r\n\r\n\tFTPSClient ftp = new FTPSClient();\r\n\tftp.connect(HOST, 7021);\r\n\tftp.enterLocalPassiveMode();\r\n\tftp.login(USERNAME, PASSWORD);\r\n\tfinal FTPFile[] ftpFiles = ftp.mlistDir(&quot;/&quot;);\r\n\tSystem.out.println(ftpFiles.length);\r\n\r\nwhich returns 0..\r\n\r\n**Edit #2**\r\nWinSCP Log:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    . 2016-11-24 12:52:33.947 --------------------------------------------------------------------------\r\n    . 2016-11-24 12:52:33.947 WinSCP Version 5.9.2 (Build 6958) (OS 6.1.7601 Service Pack 1 - Windows 7 Home Premium)\r\n    . 2016-11-24 12:52:33.947 Configuration: HKCU\\Software\\Martin Prikryl\\WinSCP 2\\\r\n    . 2016-11-24 12:52:33.947 Log level: Normal\r\n    . 2016-11-24 12:52:33.947 Local account: KORAYTUGAY6639\\koraytugay\r\n    . 2016-11-24 12:52:33.947 Working directory: C:\\Program Files (x86)\\WinSCP\r\n    . 2016-11-24 12:52:33.947 Process ID: 3220\r\n    . 2016-11-24 12:52:33.947 Command-line: &quot;C:\\Program Files (x86)\\WinSCP\\WinSCP.exe&quot; \r\n    . 2016-11-24 12:52:33.947 Time zone: Current: GMT+2, Standard: GMT+2 (E. Europe Standard Time), DST: GMT+3 (E. Europe Daylight Time), DST Start: 3/27/2016, DST End: 10/30/2016\r\n    . 2016-11-24 12:52:33.947 Login time: Thursday, November 24, 2016 12:52:33 PM\r\n    . 2016-11-24 12:52:33.947 --------------------------------------------------------------------------\r\n    . 2016-11-24 12:52:33.947 Session name: tuimcardtest@files.innbound.net (Ad-Hoc site)\r\n    . 2016-11-24 12:52:33.947 Host name: files.innbound.net (Port: 7021)\r\n    . 2016-11-24 12:52:33.947 User name: tuimcardtest (Password: Yes, Key file: No)\r\n    . 2016-11-24 12:52:33.947 Transfer Protocol: FTP\r\n    . 2016-11-24 12:52:33.947 Ping type: Dummy, Ping interval: 30 sec; Timeout: 15 sec\r\n    . 2016-11-24 12:52:33.947 Disable Nagle: No\r\n    . 2016-11-24 12:52:33.947 Proxy: None\r\n    . 2016-11-24 12:52:33.947 Send buffer: 262144\r\n    . 2016-11-24 12:52:33.947 UTF: Auto\r\n    . 2016-11-24 12:52:33.947 FTPS: Explicit TLS/SSL [Client certificate: No]\r\n    . 2016-11-24 12:52:33.947 FTP: Passive: Yes [Force IP: Auto]; MLSD: Auto [List all: Auto]; HOST: Auto\r\n    . 2016-11-24 12:52:33.947 Session reuse: Yes\r\n    . 2016-11-24 12:52:33.947 TLS/SSL versions: TLSv1.0-TLSv1.2\r\n    . 2016-11-24 12:52:33.947 Local directory: default, Remote directory: home, Update: Yes, Cache: Yes\r\n    . 2016-11-24 12:52:33.947 Cache directory changes: Yes, Permanent: Yes\r\n    . 2016-11-24 12:52:33.947 Recycle bin: Delete to: No, Overwritten to: No, Bin path: \r\n    . 2016-11-24 12:52:33.947 Timezone offset: 0h 0m\r\n    . 2016-11-24 12:52:33.947 --------------------------------------------------------------------------\r\n    . 2016-11-24 12:52:34.009 Connecting to files.innbound.net:7021 ...\r\n    . 2016-11-24 12:52:34.009 Connected with files.innbound.net:7021, negotiating TLS connection...\r\n    &lt; 2016-11-24 12:52:34.071 220 Welcome to THE FTP service.\r\n    &gt; 2016-11-24 12:52:34.071 AUTH TLS\r\n    &lt; 2016-11-24 12:52:34.149 234 Proceed with negotiation.\r\n    . 2016-11-24 12:52:34.212 Server asks for authentication with a client certificate.\r\n    . 2016-11-24 12:52:34.290 Verifying certificate for &quot;Innflow&quot; with fingerprint 54:52:0f:a0:cc:6a:38:80:d5:52:cc:9d:a4:4f:19:4a:d9:50:08:a7 and 18 failures\r\n    . 2016-11-24 12:52:34.290 Asking user:\r\n    . 2016-11-24 12:52:34.290 **The server&#39;s certificate is not known. You have no guarantee that the server is the computer you think it is.**\r\n    . 2016-11-24 12:52:34.290 \r\n    . 2016-11-24 12:52:34.290 Server&#39;s certificate details follow:\r\n    . 2016-11-24 12:52:34.290 \r\n    . 2016-11-24 12:52:34.290 Issuer:\r\n    . 2016-11-24 12:52:34.290 - Organization: Innflow, innbound.net, patrick.meier@innflow.com\r\n    . 2016-11-24 12:52:34.290 - Location: CH, Zurich, Zurich\r\n    . 2016-11-24 12:52:34.290 \r\n    . 2016-11-24 12:52:34.290 Subject:\r\n    . 2016-11-24 12:52:34.290 - Organization: Innflow, innbound.net, patrick.meier@innflow.com\r\n    . 2016-11-24 12:52:34.290 - Location: CH, Zurich, Zurich\r\n    . 2016-11-24 12:52:34.290 \r\n    . 2016-11-24 12:52:34.290 Valid: 7/6/2010 11:42:44 PM - 7/3/2020 11:42:44 PM\r\n    . 2016-11-24 12:52:34.290 \r\n    . 2016-11-24 12:52:34.290 Fingerprint (SHA-1): 54:52:0f:a0:cc:6a:38:80:d5:52:cc:9d:a4:4f:19:4a:d9:50:08:a7\r\n    . 2016-11-24 12:52:34.290 \r\n    . 2016-11-24 12:52:34.290 Summary: Self-signed certificate. The error occurred at a depth of 1 in the certificate chain.\r\n    . 2016-11-24 12:52:34.290 \r\n    . 2016-11-24 12:52:34.290 Certificate was not issued for this server. You might be connecting to a server that is pretending to be &quot;files.innbound.net&quot;.\r\n    . 2016-11-24 12:52:34.290 \r\n    . 2016-11-24 12:52:34.290 If you trust this certificate, press Yes. To connect without storing certificate, press No. To abandon the connection press Cancel.\r\n    . 2016-11-24 12:52:34.290 \r\n    . 2016-11-24 12:52:34.290 Continue connecting and store the certificate? ()\r\n    . 2016-11-24 12:52:35.725 Using TLSv1, cipher TLSv1/SSLv3: AES128-SHA, 1024 bit RSA, AES128-SHA              SSLv3 Kx=RSA      Au=RSA  Enc=AES(128)  Mac=SHA1\r\n    . 2016-11-24 12:52:35.787 TLS connection established. Waiting for welcome message...\r\n    &gt; 2016-11-24 12:52:35.787 USER tuimcardtest\r\n    &lt; 2016-11-24 12:52:35.803 331 Please specify the password.\r\n    &gt; 2016-11-24 12:52:35.803 PASS ************\r\n    &lt; 2016-11-24 12:52:35.865 230 Login successful.\r\n    &gt; 2016-11-24 12:52:35.865 SYST\r\n    &lt; 2016-11-24 12:52:35.928 215 UNIX Type: L8\r\n    &gt; 2016-11-24 12:52:35.928 FEAT\r\n    &lt; 2016-11-24 12:52:36.006 211-Features:\r\n    &lt; 2016-11-24 12:52:36.006  AUTH SSL\r\n    &lt; 2016-11-24 12:52:36.006  AUTH TLS\r\n    &lt; 2016-11-24 12:52:36.006  EPRT\r\n    &lt; 2016-11-24 12:52:36.006  EPSV\r\n    &lt; 2016-11-24 12:52:36.068  MDTM\r\n    &lt; 2016-11-24 12:52:36.068  PASV\r\n    &lt; 2016-11-24 12:52:36.068  PBSZ\r\n    &lt; 2016-11-24 12:52:36.068  PROT\r\n    &lt; 2016-11-24 12:52:36.068  REST STREAM\r\n    &lt; 2016-11-24 12:52:36.068  SIZE\r\n    &lt; 2016-11-24 12:52:36.068  TVFS\r\n    &lt; 2016-11-24 12:52:36.068  UTF8\r\n    &lt; 2016-11-24 12:52:36.068 211 End\r\n    &gt; 2016-11-24 12:52:36.068 OPTS UTF8 ON\r\n    &lt; 2016-11-24 12:52:36.131 200 Always in UTF8 mode.\r\n    &gt; 2016-11-24 12:52:36.131 PBSZ 0\r\n    &lt; 2016-11-24 12:52:36.209 200 PBSZ set to 0.\r\n    &gt; 2016-11-24 12:52:36.209 PROT P\r\n    &lt; 2016-11-24 12:52:36.271 200 PROT now Private.\r\n    . 2016-11-24 12:52:36.287 Connected\r\n    . 2016-11-24 12:52:36.287 --------------------------------------------------------------------------\r\n    . 2016-11-24 12:52:36.287 Using FTP protocol.\r\n    . 2016-11-24 12:52:36.287 Doing startup conversation with host.\r\n    &gt; 2016-11-24 12:52:36.349 PWD\r\n    &lt; 2016-11-24 12:52:36.411 257 &quot;/&quot;\r\n    . 2016-11-24 12:52:36.411 Getting current directory name.\r\n    . 2016-11-24 12:52:36.599 Retrieving directory listing...\r\n    &gt; 2016-11-24 12:52:36.599 TYPE A\r\n    &lt; 2016-11-24 12:52:36.661 200 Switching to ASCII mode.\r\n    &gt; 2016-11-24 12:52:36.661 PASV\r\n    &lt; 2016-11-24 12:52:36.739 227 Entering Passive Mode (46,140,133,66,195,80).\r\n    &gt; 2016-11-24 12:52:36.739 LIST -a\r\n    . 2016-11-24 12:52:36.739 Connecting to 46.140.133.66:50000 ...\r\n    . 2016-11-24 12:52:36.879 Session ID reused\r\n    &lt; 2016-11-24 12:52:36.879 150 Here comes the directory listing.\r\n    . 2016-11-24 12:52:36.879 Using TLSv1, cipher TLSv1/SSLv3: AES128-SHA, 1024 bit RSA, AES128-SHA              SSLv3 Kx=RSA      Au=RSA  Enc=AES(128)  Mac=SHA1\r\n    . 2016-11-24 12:52:36.911 TLS connection established\r\n    . 2016-11-24 12:52:37.020 drwxrwsrwx    6 0        1004         4096 Nov 24 08:32 .\r\n    . 2016-11-24 12:52:37.020 drwxrwsrwx    6 0        1004         4096 Nov 24 08:32 ..\r\n    . 2016-11-24 12:52:37.020 -rw-r--r--    1 1004     1004       162000 Oct 28 15:25 YTF.AR.T700.S.E0089858.D161028.T092339.A001\r\n    . 2016-11-24 12:52:37.020 drwxr-sr-x    2 1004     1004         4096 Nov 24 07:29 abc\r\n    . 2016-11-24 12:52:37.020 drwxr-sr-x    2 1004     1004         4096 Nov 24 07:14 koray\r\n    . 2016-11-24 12:52:37.020 drwxr-sr-x    2 1004     1004         4096 Nov 24 08:32 laylaylom\r\n    . 2016-11-24 12:52:37.020 drwxr-sr-x    2 1004     1004         4096 Nov 24 07:15 tugay\r\n    &lt; 2016-11-24 12:52:37.160 226 Directory send OK.\r\n    . 2016-11-24 12:52:37.160 Directory listing successful\r\n    . 2016-11-24 12:52:37.160 Detecting timezone difference...\r\n    . 2016-11-24 12:52:37.160 Retrieving file information...\r\n    &gt; 2016-11-24 12:52:37.160 PWD\r\n    &lt; 2016-11-24 12:52:37.223 257 &quot;/&quot;\r\n    &gt; 2016-11-24 12:52:37.223 CWD /YTF.AR.T700.S.E0089858.D161028.T092339.A001\r\n    &lt; 2016-11-24 12:52:37.285 550 Failed to change directory.\r\n    &gt; 2016-11-24 12:52:37.285 TYPE I\r\n    &lt; 2016-11-24 12:52:37.363 200 Switching to Binary mode.\r\n    &gt; 2016-11-24 12:52:37.363 SIZE /YTF.AR.T700.S.E0089858.D161028.T092339.A001\r\n    &lt; 2016-11-24 12:52:37.425 213 162000\r\n    &gt; 2016-11-24 12:52:37.425 MDTM /YTF.AR.T700.S.E0089858.D161028.T092339.A001\r\n    &lt; 2016-11-24 12:52:37.488 213 20161028152533\r\n    . 2016-11-24 12:52:37.488 Retrieving file information successful\r\n    . 2016-11-24 12:52:37.488 Timezone difference of -3 detected using file /YTF.AR.T700.S.E0089858.D161028.T092339.A001 (Listing: 2016-10-28T12:25:00.000Z, UTF: 2016-10-28T15:25:00.000Z)\r\n    . 2016-11-24 12:52:37.488 ..;D;0;1899-12-30T02:00:00.000Z;0;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2016-11-24 12:52:37.488 YTF.AR.T700.S.E0089858.D161028.T092339.A001;-;162000;2016-10-28T15:25:00.000Z;1;&quot;1004&quot; [0];&quot;1004&quot; [0];rw-r--r--;0\r\n    . 2016-11-24 12:52:37.488 abc;D;0;2016-11-24T08:29:00.000Z;1;&quot;1004&quot; [0];&quot;1004&quot; [0];rwxr-sr-x;0\r\n    . 2016-11-24 12:52:37.488 koray;D;0;2016-11-24T08:14:00.000Z;1;&quot;1004&quot; [0];&quot;1004&quot; [0];rwxr-sr-x;0\r\n    . 2016-11-24 12:52:37.488 laylaylom;D;0;2016-11-24T09:32:00.000Z;1;&quot;1004&quot; [0];&quot;1004&quot; [0];rwxr-sr-x;0\r\n    . 2016-11-24 12:52:37.488 tugay;D;0;2016-11-24T08:15:00.000Z;1;&quot;1004&quot; [0];&quot;1004&quot; [0];rwxr-sr-x;0\r\n    . 2016-11-24 12:52:37.597 Startup conversation with host finished.\r\n    . 2016-11-24 13:54:14.249 Dummy directory read to keep session alive.\r\n    . 2016-11-24 13:54:14.249 Retrieving directory listing...\r\n    &gt; 2016-11-24 13:54:14.249 TYPE A\r\n    &lt; 2016-11-24 13:54:14.312 200 Switching to ASCII mode.\r\n    &gt; 2016-11-24 13:54:14.312 PASV\r\n    &lt; 2016-11-24 13:54:14.390 227 Entering Passive Mode (46,140,133,66,195,81).\r\n    &gt; 2016-11-24 13:54:14.390 LIST -a\r\n    . 2016-11-24 13:54:14.390 Connecting to 46.140.133.66:50001 ...\r\n    &lt; 2016-11-24 13:54:14.514 150 Here comes the directory listing.\r\n    . 2016-11-24 13:54:14.514 Session ID reused\r\n    . 2016-11-24 13:54:14.530 Using TLSv1, cipher TLSv1/SSLv3: AES128-SHA, 1024 bit RSA, AES128-SHA              SSLv3 Kx=RSA      Au=RSA  Enc=AES(128)  Mac=SHA1\r\n    . 2016-11-24 13:54:14.530 TLS connection established\r\n    . 2016-11-24 13:54:14.655 drwxrwsrwx    6 0        1004         4096 Nov 24 08:32 .\r\n    . 2016-11-24 13:54:14.655 drwxrwsrwx    6 0        1004         4096 Nov 24 08:32 ..\r\n    . 2016-11-24 13:54:14.655 -rw-r--r--    1 1004     1004       162000 Oct 28 15:25 YTF.AR.T700.S.E0089858.D161028.T092339.A001\r\n    . 2016-11-24 13:54:14.655 drwxr-sr-x    2 1004     1004         4096 Nov 24 07:29 abc\r\n    . 2016-11-24 13:54:14.655 drwxr-sr-x    2 1004     1004         4096 Nov 24 07:14 koray\r\n    . 2016-11-24 13:54:14.655 drwxr-sr-x    2 1004     1004         4096 Nov 24 08:32 laylaylom\r\n    . 2016-11-24 13:54:14.655 drwxr-sr-x    2 1004     1004         4096 Nov 24 07:15 tugay\r\n    &lt; 2016-11-24 13:54:14.795 226 Directory send OK.\r\n    . 2016-11-24 13:54:14.795 Directory listing successful\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jWKWS.png\r\n  [2]: https://en.wikipedia.org/wiki/List_of_FTP_server_return_codes\r\n","title":"org.apache.commons.net.ftp.FTPSClient returning 425 after list command","body":"<p>I am trying to connect to an FTPS server. I can connect with FileZilla just fine and list the files in the server, download etc..</p>\n\n<p><a href=\"https://i.stack.imgur.com/jWKWS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jWKWS.png\" alt=\"enter image description here\"></a> </p>\n\n<p>I am trying to connect to this FTP Server with Java using the FTPSClient from org.apache.commons.net.ftp package. This is how I am trying:</p>\n\n<pre><code>FTPSClient ftp = new FTPSClient();\nftp.connect(HOST, 7021);\nftp.enterLocalPassiveMode();\nftp.login(USERNAME, PASSWORD);\nfinal int list = ftp.list();\nSystem.out.println(\"List returned: \" + list);\n</code></pre>\n\n<p>And the response I am getting is: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>List returned: 425\n</code></pre>\n\n<p>According to <a href=\"https://en.wikipedia.org/wiki/List_of_FTP_server_return_codes\" rel=\"nofollow noreferrer\">Wikipedia</a>, 425 means: \"Can't open data connection.\"</p>\n\n<p>However, trying to create a folder works fine:</p>\n\n<pre><code>FTPSClient ftp = new FTPSClient();\nftp.connect(HOST, 7021);\nftp.enterLocalPassiveMode();\nftp.login(USERNAME, PASSWORD);\nftp.mkd(\"/laylaylom\");\n</code></pre>\n\n<p>So if I run this code and connect with FileZilla I will see folder \"laylaylom\" in the FTP Server.</p>\n\n<p>I also tried: </p>\n\n<pre><code>FTPSClient ftp = new FTPSClient();\nftp.connect(HOST, 7021);\nftp.login(USERNAME, PASSWORD);\nfinal int pasv = ftp.sendCommand(\"PASV\");\nSystem.out.println(\"pasv is: \" + pasv);\nfinal int list = ftp.list();\nSystem.out.println(\"List returned: \" + list);\n</code></pre>\n\n<p>And the output will be: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>pasv is: 227\nList returned: 522\n</code></pre>\n\n<p>where 227 is: \"Entering Passive Mode (h1,h2,h3,h4,p1,p2).\" and 552 is not listed in the Wikipedia page and I am not sure what it stands for. </p>\n\n<p>How can I make <code>list()</code> work?</p>\n\n<p><strong>Edit #1</strong></p>\n\n<p>After Martin Prikryl 's answer I tried this:</p>\n\n<pre><code>FTPSClient ftp = new FTPSClient();\nftp.connect(HOST, 7021);\nftp.enterLocalPassiveMode();\nftp.login(USERNAME, PASSWORD);\nfinal FTPFile[] ftpFiles = ftp.mlistDir(\"/\");\nSystem.out.println(ftpFiles.length);\n</code></pre>\n\n<p>which returns 0..</p>\n\n<p><strong>Edit #2</strong>\nWinSCP Log:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>. 2016-11-24 12:52:33.947 --------------------------------------------------------------------------\n. 2016-11-24 12:52:33.947 WinSCP Version 5.9.2 (Build 6958) (OS 6.1.7601 Service Pack 1 - Windows 7 Home Premium)\n. 2016-11-24 12:52:33.947 Configuration: HKCU\\Software\\Martin Prikryl\\WinSCP 2\\\n. 2016-11-24 12:52:33.947 Log level: Normal\n. 2016-11-24 12:52:33.947 Local account: KORAYTUGAY6639\\koraytugay\n. 2016-11-24 12:52:33.947 Working directory: C:\\Program Files (x86)\\WinSCP\n. 2016-11-24 12:52:33.947 Process ID: 3220\n. 2016-11-24 12:52:33.947 Command-line: \"C:\\Program Files (x86)\\WinSCP\\WinSCP.exe\" \n. 2016-11-24 12:52:33.947 Time zone: Current: GMT+2, Standard: GMT+2 (E. Europe Standard Time), DST: GMT+3 (E. Europe Daylight Time), DST Start: 3/27/2016, DST End: 10/30/2016\n. 2016-11-24 12:52:33.947 Login time: Thursday, November 24, 2016 12:52:33 PM\n. 2016-11-24 12:52:33.947 --------------------------------------------------------------------------\n. 2016-11-24 12:52:33.947 Session name: tuimcardtest@files.innbound.net (Ad-Hoc site)\n. 2016-11-24 12:52:33.947 Host name: files.innbound.net (Port: 7021)\n. 2016-11-24 12:52:33.947 User name: tuimcardtest (Password: Yes, Key file: No)\n. 2016-11-24 12:52:33.947 Transfer Protocol: FTP\n. 2016-11-24 12:52:33.947 Ping type: Dummy, Ping interval: 30 sec; Timeout: 15 sec\n. 2016-11-24 12:52:33.947 Disable Nagle: No\n. 2016-11-24 12:52:33.947 Proxy: None\n. 2016-11-24 12:52:33.947 Send buffer: 262144\n. 2016-11-24 12:52:33.947 UTF: Auto\n. 2016-11-24 12:52:33.947 FTPS: Explicit TLS/SSL [Client certificate: No]\n. 2016-11-24 12:52:33.947 FTP: Passive: Yes [Force IP: Auto]; MLSD: Auto [List all: Auto]; HOST: Auto\n. 2016-11-24 12:52:33.947 Session reuse: Yes\n. 2016-11-24 12:52:33.947 TLS/SSL versions: TLSv1.0-TLSv1.2\n. 2016-11-24 12:52:33.947 Local directory: default, Remote directory: home, Update: Yes, Cache: Yes\n. 2016-11-24 12:52:33.947 Cache directory changes: Yes, Permanent: Yes\n. 2016-11-24 12:52:33.947 Recycle bin: Delete to: No, Overwritten to: No, Bin path: \n. 2016-11-24 12:52:33.947 Timezone offset: 0h 0m\n. 2016-11-24 12:52:33.947 --------------------------------------------------------------------------\n. 2016-11-24 12:52:34.009 Connecting to files.innbound.net:7021 ...\n. 2016-11-24 12:52:34.009 Connected with files.innbound.net:7021, negotiating TLS connection...\n&lt; 2016-11-24 12:52:34.071 220 Welcome to THE FTP service.\n&gt; 2016-11-24 12:52:34.071 AUTH TLS\n&lt; 2016-11-24 12:52:34.149 234 Proceed with negotiation.\n. 2016-11-24 12:52:34.212 Server asks for authentication with a client certificate.\n. 2016-11-24 12:52:34.290 Verifying certificate for \"Innflow\" with fingerprint 54:52:0f:a0:cc:6a:38:80:d5:52:cc:9d:a4:4f:19:4a:d9:50:08:a7 and 18 failures\n. 2016-11-24 12:52:34.290 Asking user:\n. 2016-11-24 12:52:34.290 **The server's certificate is not known. You have no guarantee that the server is the computer you think it is.**\n. 2016-11-24 12:52:34.290 \n. 2016-11-24 12:52:34.290 Server's certificate details follow:\n. 2016-11-24 12:52:34.290 \n. 2016-11-24 12:52:34.290 Issuer:\n. 2016-11-24 12:52:34.290 - Organization: Innflow, innbound.net, patrick.meier@innflow.com\n. 2016-11-24 12:52:34.290 - Location: CH, Zurich, Zurich\n. 2016-11-24 12:52:34.290 \n. 2016-11-24 12:52:34.290 Subject:\n. 2016-11-24 12:52:34.290 - Organization: Innflow, innbound.net, patrick.meier@innflow.com\n. 2016-11-24 12:52:34.290 - Location: CH, Zurich, Zurich\n. 2016-11-24 12:52:34.290 \n. 2016-11-24 12:52:34.290 Valid: 7/6/2010 11:42:44 PM - 7/3/2020 11:42:44 PM\n. 2016-11-24 12:52:34.290 \n. 2016-11-24 12:52:34.290 Fingerprint (SHA-1): 54:52:0f:a0:cc:6a:38:80:d5:52:cc:9d:a4:4f:19:4a:d9:50:08:a7\n. 2016-11-24 12:52:34.290 \n. 2016-11-24 12:52:34.290 Summary: Self-signed certificate. The error occurred at a depth of 1 in the certificate chain.\n. 2016-11-24 12:52:34.290 \n. 2016-11-24 12:52:34.290 Certificate was not issued for this server. You might be connecting to a server that is pretending to be \"files.innbound.net\".\n. 2016-11-24 12:52:34.290 \n. 2016-11-24 12:52:34.290 If you trust this certificate, press Yes. To connect without storing certificate, press No. To abandon the connection press Cancel.\n. 2016-11-24 12:52:34.290 \n. 2016-11-24 12:52:34.290 Continue connecting and store the certificate? ()\n. 2016-11-24 12:52:35.725 Using TLSv1, cipher TLSv1/SSLv3: AES128-SHA, 1024 bit RSA, AES128-SHA              SSLv3 Kx=RSA      Au=RSA  Enc=AES(128)  Mac=SHA1\n. 2016-11-24 12:52:35.787 TLS connection established. Waiting for welcome message...\n&gt; 2016-11-24 12:52:35.787 USER tuimcardtest\n&lt; 2016-11-24 12:52:35.803 331 Please specify the password.\n&gt; 2016-11-24 12:52:35.803 PASS ************\n&lt; 2016-11-24 12:52:35.865 230 Login successful.\n&gt; 2016-11-24 12:52:35.865 SYST\n&lt; 2016-11-24 12:52:35.928 215 UNIX Type: L8\n&gt; 2016-11-24 12:52:35.928 FEAT\n&lt; 2016-11-24 12:52:36.006 211-Features:\n&lt; 2016-11-24 12:52:36.006  AUTH SSL\n&lt; 2016-11-24 12:52:36.006  AUTH TLS\n&lt; 2016-11-24 12:52:36.006  EPRT\n&lt; 2016-11-24 12:52:36.006  EPSV\n&lt; 2016-11-24 12:52:36.068  MDTM\n&lt; 2016-11-24 12:52:36.068  PASV\n&lt; 2016-11-24 12:52:36.068  PBSZ\n&lt; 2016-11-24 12:52:36.068  PROT\n&lt; 2016-11-24 12:52:36.068  REST STREAM\n&lt; 2016-11-24 12:52:36.068  SIZE\n&lt; 2016-11-24 12:52:36.068  TVFS\n&lt; 2016-11-24 12:52:36.068  UTF8\n&lt; 2016-11-24 12:52:36.068 211 End\n&gt; 2016-11-24 12:52:36.068 OPTS UTF8 ON\n&lt; 2016-11-24 12:52:36.131 200 Always in UTF8 mode.\n&gt; 2016-11-24 12:52:36.131 PBSZ 0\n&lt; 2016-11-24 12:52:36.209 200 PBSZ set to 0.\n&gt; 2016-11-24 12:52:36.209 PROT P\n&lt; 2016-11-24 12:52:36.271 200 PROT now Private.\n. 2016-11-24 12:52:36.287 Connected\n. 2016-11-24 12:52:36.287 --------------------------------------------------------------------------\n. 2016-11-24 12:52:36.287 Using FTP protocol.\n. 2016-11-24 12:52:36.287 Doing startup conversation with host.\n&gt; 2016-11-24 12:52:36.349 PWD\n&lt; 2016-11-24 12:52:36.411 257 \"/\"\n. 2016-11-24 12:52:36.411 Getting current directory name.\n. 2016-11-24 12:52:36.599 Retrieving directory listing...\n&gt; 2016-11-24 12:52:36.599 TYPE A\n&lt; 2016-11-24 12:52:36.661 200 Switching to ASCII mode.\n&gt; 2016-11-24 12:52:36.661 PASV\n&lt; 2016-11-24 12:52:36.739 227 Entering Passive Mode (46,140,133,66,195,80).\n&gt; 2016-11-24 12:52:36.739 LIST -a\n. 2016-11-24 12:52:36.739 Connecting to 46.140.133.66:50000 ...\n. 2016-11-24 12:52:36.879 Session ID reused\n&lt; 2016-11-24 12:52:36.879 150 Here comes the directory listing.\n. 2016-11-24 12:52:36.879 Using TLSv1, cipher TLSv1/SSLv3: AES128-SHA, 1024 bit RSA, AES128-SHA              SSLv3 Kx=RSA      Au=RSA  Enc=AES(128)  Mac=SHA1\n. 2016-11-24 12:52:36.911 TLS connection established\n. 2016-11-24 12:52:37.020 drwxrwsrwx    6 0        1004         4096 Nov 24 08:32 .\n. 2016-11-24 12:52:37.020 drwxrwsrwx    6 0        1004         4096 Nov 24 08:32 ..\n. 2016-11-24 12:52:37.020 -rw-r--r--    1 1004     1004       162000 Oct 28 15:25 YTF.AR.T700.S.E0089858.D161028.T092339.A001\n. 2016-11-24 12:52:37.020 drwxr-sr-x    2 1004     1004         4096 Nov 24 07:29 abc\n. 2016-11-24 12:52:37.020 drwxr-sr-x    2 1004     1004         4096 Nov 24 07:14 koray\n. 2016-11-24 12:52:37.020 drwxr-sr-x    2 1004     1004         4096 Nov 24 08:32 laylaylom\n. 2016-11-24 12:52:37.020 drwxr-sr-x    2 1004     1004         4096 Nov 24 07:15 tugay\n&lt; 2016-11-24 12:52:37.160 226 Directory send OK.\n. 2016-11-24 12:52:37.160 Directory listing successful\n. 2016-11-24 12:52:37.160 Detecting timezone difference...\n. 2016-11-24 12:52:37.160 Retrieving file information...\n&gt; 2016-11-24 12:52:37.160 PWD\n&lt; 2016-11-24 12:52:37.223 257 \"/\"\n&gt; 2016-11-24 12:52:37.223 CWD /YTF.AR.T700.S.E0089858.D161028.T092339.A001\n&lt; 2016-11-24 12:52:37.285 550 Failed to change directory.\n&gt; 2016-11-24 12:52:37.285 TYPE I\n&lt; 2016-11-24 12:52:37.363 200 Switching to Binary mode.\n&gt; 2016-11-24 12:52:37.363 SIZE /YTF.AR.T700.S.E0089858.D161028.T092339.A001\n&lt; 2016-11-24 12:52:37.425 213 162000\n&gt; 2016-11-24 12:52:37.425 MDTM /YTF.AR.T700.S.E0089858.D161028.T092339.A001\n&lt; 2016-11-24 12:52:37.488 213 20161028152533\n. 2016-11-24 12:52:37.488 Retrieving file information successful\n. 2016-11-24 12:52:37.488 Timezone difference of -3 detected using file /YTF.AR.T700.S.E0089858.D161028.T092339.A001 (Listing: 2016-10-28T12:25:00.000Z, UTF: 2016-10-28T15:25:00.000Z)\n. 2016-11-24 12:52:37.488 ..;D;0;1899-12-30T02:00:00.000Z;0;\"\" [0];\"\" [0];---------;0\n. 2016-11-24 12:52:37.488 YTF.AR.T700.S.E0089858.D161028.T092339.A001;-;162000;2016-10-28T15:25:00.000Z;1;\"1004\" [0];\"1004\" [0];rw-r--r--;0\n. 2016-11-24 12:52:37.488 abc;D;0;2016-11-24T08:29:00.000Z;1;\"1004\" [0];\"1004\" [0];rwxr-sr-x;0\n. 2016-11-24 12:52:37.488 koray;D;0;2016-11-24T08:14:00.000Z;1;\"1004\" [0];\"1004\" [0];rwxr-sr-x;0\n. 2016-11-24 12:52:37.488 laylaylom;D;0;2016-11-24T09:32:00.000Z;1;\"1004\" [0];\"1004\" [0];rwxr-sr-x;0\n. 2016-11-24 12:52:37.488 tugay;D;0;2016-11-24T08:15:00.000Z;1;\"1004\" [0];\"1004\" [0];rwxr-sr-x;0\n. 2016-11-24 12:52:37.597 Startup conversation with host finished.\n. 2016-11-24 13:54:14.249 Dummy directory read to keep session alive.\n. 2016-11-24 13:54:14.249 Retrieving directory listing...\n&gt; 2016-11-24 13:54:14.249 TYPE A\n&lt; 2016-11-24 13:54:14.312 200 Switching to ASCII mode.\n&gt; 2016-11-24 13:54:14.312 PASV\n&lt; 2016-11-24 13:54:14.390 227 Entering Passive Mode (46,140,133,66,195,81).\n&gt; 2016-11-24 13:54:14.390 LIST -a\n. 2016-11-24 13:54:14.390 Connecting to 46.140.133.66:50001 ...\n&lt; 2016-11-24 13:54:14.514 150 Here comes the directory listing.\n. 2016-11-24 13:54:14.514 Session ID reused\n. 2016-11-24 13:54:14.530 Using TLSv1, cipher TLSv1/SSLv3: AES128-SHA, 1024 bit RSA, AES128-SHA              SSLv3 Kx=RSA      Au=RSA  Enc=AES(128)  Mac=SHA1\n. 2016-11-24 13:54:14.530 TLS connection established\n. 2016-11-24 13:54:14.655 drwxrwsrwx    6 0        1004         4096 Nov 24 08:32 .\n. 2016-11-24 13:54:14.655 drwxrwsrwx    6 0        1004         4096 Nov 24 08:32 ..\n. 2016-11-24 13:54:14.655 -rw-r--r--    1 1004     1004       162000 Oct 28 15:25 YTF.AR.T700.S.E0089858.D161028.T092339.A001\n. 2016-11-24 13:54:14.655 drwxr-sr-x    2 1004     1004         4096 Nov 24 07:29 abc\n. 2016-11-24 13:54:14.655 drwxr-sr-x    2 1004     1004         4096 Nov 24 07:14 koray\n. 2016-11-24 13:54:14.655 drwxr-sr-x    2 1004     1004         4096 Nov 24 08:32 laylaylom\n. 2016-11-24 13:54:14.655 drwxr-sr-x    2 1004     1004         4096 Nov 24 07:15 tugay\n&lt; 2016-11-24 13:54:14.795 226 Directory send OK.\n. 2016-11-24 13:54:14.795 Directory listing successful\n</code></pre>\n"},{"tags":["java","data-structures","priority-queue"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":4,"creation_date":1697607023,"post_id":77313660,"comment_id":136299365,"body_markdown":"You would have to remove the instance from the PriorityQueue, modify it, and add it again. Using a TreeMap would not help. The same problem applies, and it would require the same solution. These data structures do not expect the data they contain to change on-the-fly.","body":"You would have to remove the instance from the PriorityQueue, modify it, and add it again. Using a TreeMap would not help. The same problem applies, and it would require the same solution. These data structures do not expect the data they contain to change on-the-fly."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1697607197,"post_id":77313660,"comment_id":136299384,"body_markdown":"You can delete the element from the heap, with [`remove(Object o)`](https://docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.html#remove-java.lang.Object-), but the time complexity is linear, O(n). So, not great.","body":"You can delete the element from the heap, with <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.html#remove-java.lang.Object-\" rel=\"nofollow noreferrer\"><code>remove(Object o)</code></a>, but the time complexity is linear, O(n). So, not great."},{"owner":{"account_id":5344340,"reputation":2306,"user_id":4260303,"accept_rate":42,"display_name":"curiousengineer"},"score":0,"creation_date":1697609218,"post_id":77313660,"comment_id":136299626,"body_markdown":"If I use a TreeMap, it might be better than heap I believe because deletion in treemap is faster then finding a node in PQ and deleting it I think","body":"If I use a TreeMap, it might be better than heap I believe because deletion in treemap is faster then finding a node in PQ and deleting it I think"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1697609581,"post_id":77313660,"comment_id":136299673,"body_markdown":"That is probably true, yes. Finding the item to delete in a TreeMap would be faster.","body":"That is probably true, yes. Finding the item to delete in a TreeMap would be faster."},{"owner":{"account_id":9378438,"reputation":1138,"user_id":8504033,"display_name":"Abdul Alim Shakir"},"score":0,"creation_date":1697613422,"post_id":77313660,"comment_id":136300250,"body_markdown":"Could you try IndexedPriorityQueue? This will allow to efficiently update the priority of an element without removing it completely. Other elements will not be disturbed and heap property will be maintained as well.","body":"Could you try IndexedPriorityQueue? This will allow to efficiently update the priority of an element without removing it completely. Other elements will not be disturbed and heap property will be maintained as well."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1697615153,"post_id":77313660,"comment_id":136300537,"body_markdown":"@AbdulAlimShakir I don&#39;t think the JDK contains a (public/API) class named `IndexedPriorityQueue`. Is that from a library?","body":"@AbdulAlimShakir I don&#39;t think the JDK contains a (public/API) class named <code>IndexedPriorityQueue</code>. Is that from a library?"},{"owner":{"account_id":9378438,"reputation":1138,"user_id":8504033,"display_name":"Abdul Alim Shakir"},"score":0,"creation_date":1697618382,"post_id":77313660,"comment_id":136301150,"body_markdown":"You can build it from scratch :  [IndexedPriorityQueue](https://www.geeksforgeeks.org/indexed-priority-queue-with-implementation) or use [IndexMinPQ of Princeton University](https://algs4.cs.princeton.edu/24pq/IndexMinPQ.java.html)","body":"You can build it from scratch :  <a href=\"https://www.geeksforgeeks.org/indexed-priority-queue-with-implementation\" rel=\"nofollow noreferrer\">IndexedPriorityQueue</a> or use <a href=\"https://algs4.cs.princeton.edu/24pq/IndexMinPQ.java.html\" rel=\"nofollow noreferrer\">IndexMinPQ of Princeton University</a>"},{"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"score":0,"creation_date":1697720576,"post_id":77313660,"comment_id":136317155,"body_markdown":"https://stackoverflow.com/questions/48004917/prims-algorithm-how-to-get-index-of-key-on-which-decrease-key-operation-is-to/48017333#48017333","body":"<a href=\"https://stackoverflow.com/questions/48004917/prims-algorithm-how-to-get-index-of-key-on-which-decrease-key-operation-is-to/48017333#48017333\" title=\"prims algorithm how to get index of key on which decrease key operation is to\">stackoverflow.com/questions/48004917/&hellip;</a>"}],"owner":{"account_id":5344340,"reputation":2306,"user_id":4260303,"accept_rate":42,"display_name":"curiousengineer"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697607559,"creation_date":1697606710,"question_id":77313660,"body_markdown":"Say I have a custom class as below\r\n```\r\nclass Emp {\r\n   String name;\r\n   Integer id;\r\n}\r\n```\r\nI decide to use a PriorityQueue in java to insert the elements of Emp and provide a custom comparator on `id` field of the class. Say `max-heap`. \r\n\r\nI understand `pop` and `offer` will keep the heap property intact. Now my question is, if I want to modify the value of `id` for an instance of `Emp`, how do I do it? Even if I maintain a HashMap to find the object that I want to modify readily, even if I do, it will destroy the heap property. Isn&#39;t it?\r\n\r\nWhat is the best way to achieve this? I also cannot delete the element from heap at random and re-insert?\r\n\r\nShall I just use a `TreeMap`?","title":"Modifying an item in a PriorityQueue in Java","body":"<p>Say I have a custom class as below</p>\n<pre><code>class Emp {\n   String name;\n   Integer id;\n}\n</code></pre>\n<p>I decide to use a PriorityQueue in java to insert the elements of Emp and provide a custom comparator on <code>id</code> field of the class. Say <code>max-heap</code>.</p>\n<p>I understand <code>pop</code> and <code>offer</code> will keep the heap property intact. Now my question is, if I want to modify the value of <code>id</code> for an instance of <code>Emp</code>, how do I do it? Even if I maintain a HashMap to find the object that I want to modify readily, even if I do, it will destroy the heap property. Isn't it?</p>\n<p>What is the best way to achieve this? I also cannot delete the element from heap at random and re-insert?</p>\n<p>Shall I just use a <code>TreeMap</code>?</p>\n"},{"tags":["java","ftp","apache-commons-net"],"answers":[{"comments":[{"owner":{"account_id":7721211,"reputation":301,"user_id":5847392,"accept_rate":77,"display_name":"F. Baum"},"score":1,"creation_date":1457706919,"post_id":35942818,"comment_id":59542000,"body_markdown":"Thank you, it works perfectly! And I&#39;m sorry about the confusion!","body":"Thank you, it works perfectly! And I&#39;m sorry about the confusion!"}],"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697607522,"creation_date":1457706773,"answer_id":35942818,"question_id":35938586,"body_markdown":"The welcome message is effectively a &quot;response&quot; to a connection.\r\n\r\nSo after you connect using the `FTPClient.connect()`, use the [`FTPClient.getReplyStrings()`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#getReplyStrings()) to retrieve the welcome message.\r\n\r\n    ftp.connect(server);\r\n\r\n    // After connection attempt, you should check the reply code to verify success.\r\n    reply = ftp.getReplyCode();\r\n\r\n    if (!FTPReply.isPositiveCompletion(reply))\r\n    {\r\n        ftp.disconnect();\r\n        System.err.println(&quot;FTP server refused connection.&quot;);\r\n        System.exit(1);\r\n    }\r\n\r\n    // read the initial response (aka &quot;Welcome message&quot;)\r\n    String[] welcomeMessage = ftp.getReplyStrings();\r\n\r\n","title":"Apache FTPClient: Read welcome message","body":"<p>The welcome message is effectively a &quot;response&quot; to a connection.</p>\n<p>So after you connect using the <code>FTPClient.connect()</code>, use the <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#getReplyStrings()\" rel=\"nofollow noreferrer\"><code>FTPClient.getReplyStrings()</code></a> to retrieve the welcome message.</p>\n<pre><code>ftp.connect(server);\n\n// After connection attempt, you should check the reply code to verify success.\nreply = ftp.getReplyCode();\n\nif (!FTPReply.isPositiveCompletion(reply))\n{\n    ftp.disconnect();\n    System.err.println(&quot;FTP server refused connection.&quot;);\n    System.exit(1);\n}\n\n// read the initial response (aka &quot;Welcome message&quot;)\nString[] welcomeMessage = ftp.getReplyStrings();\n</code></pre>\n"}],"owner":{"account_id":7721211,"reputation":301,"user_id":5847392,"accept_rate":77,"display_name":"F. Baum"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":552,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":35942818,"answer_count":1,"score":1,"last_activity_date":1697607522,"creation_date":1457694276,"question_id":35938586,"body_markdown":"With my Java-Program I&#39;m connecting to a FTP server with Apache Commons Net.\r\nThe FTP server works as the update server for my software and currently everytime I check for updates, the updater downloads a .txt and checks if the version number written in the file is greater than the version number currently installed on the machine.\r\n\r\nIs there a way to get the version number of the update for the software on the machine from the welcome-message of the FTP server?\r\nThen I don&#39;t have to download the .txt to check for updates instead I&#39;m able to only connect to the server and check the welcome-message for the number?","title":"Apache FTPClient: Read welcome message","body":"<p>With my Java-Program I'm connecting to a FTP server with Apache Commons Net.\nThe FTP server works as the update server for my software and currently everytime I check for updates, the updater downloads a .txt and checks if the version number written in the file is greater than the version number currently installed on the machine.</p>\n\n<p>Is there a way to get the version number of the update for the software on the machine from the welcome-message of the FTP server?\nThen I don't have to download the .txt to check for updates instead I'm able to only connect to the server and check the welcome-message for the number?</p>\n"},{"tags":["java","optaplanner"],"comments":[{"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"score":0,"creation_date":1621425239,"post_id":67582578,"comment_id":119490670,"body_markdown":"Interesting proposal to enhance the CS API. We&#39;ll have to think about it.","body":"Interesting proposal to enhance the CS API. We&#39;ll have to think about it."},{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"score":0,"creation_date":1621425967,"post_id":67582578,"comment_id":119491011,"body_markdown":"This definitely isn&#39;t possible at the moment, but it is definitely interesting to consider. In the meantime, I&#39;d try adding a shadow variable on `Team` which tells you if there is or is not a plan for that team - this way, you can achieve your goal with a single constraint, I think.","body":"This definitely isn&#39;t possible at the moment, but it is definitely interesting to consider. In the meantime, I&#39;d try adding a shadow variable on <code>Team</code> which tells you if there is or is not a plan for that team - this way, you can achieve your goal with a single constraint, I think."},{"owner":{"account_id":21636195,"reputation":21,"user_id":15959087,"display_name":"Bram"},"score":0,"creation_date":1621513503,"post_id":67582578,"comment_id":119522130,"body_markdown":"I&#39;m sorry, I don&#39;t fully understand your suggestion.\nDo you propose to keep a reference to the Planning of a team in the Team class?\n\nIn a real world (where a team could be planned on multiple days, in multiple buildings, for example), this would introduce a complex datastructure, I fear.","body":"I&#39;m sorry, I don&#39;t fully understand your suggestion. Do you propose to keep a reference to the Planning of a team in the Team class?  In a real world (where a team could be planned on multiple days, in multiple buildings, for example), this would introduce a complex datastructure, I fear."},{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"score":0,"creation_date":1621852867,"post_id":67582578,"comment_id":119610685,"body_markdown":"See https://docs.optaplanner.org/latest/optaplanner-docs/html_single/index.html#shadowVariable . It is possible that this would require introduction of some new data structures in your domain, but in the absence of stream concat, it could be an acceptable solution.","body":"See <a href=\"https://docs.optaplanner.org/latest/optaplanner-docs/html_single/index.html#shadowVariable\" rel=\"nofollow noreferrer\">docs.optaplanner.org/latest/optaplanner-docs/html_single/&hellip;</a> . It is possible that this would require introduction of some new data structures in your domain, but in the absence of stream concat, it could be an acceptable solution."},{"owner":{"account_id":1504788,"reputation":302,"user_id":1408443,"accept_rate":50,"display_name":"elk-tamer"},"score":0,"creation_date":1669041959,"post_id":67582578,"comment_id":131546637,"body_markdown":"@Bram Did you ever figure out how using a shadow variable would achieve the goal you wanted to get with concatenation? I&#39;m having the exact same issue.","body":"@Bram Did you ever figure out how using a shadow variable would achieve the goal you wanted to get with concatenation? I&#39;m having the exact same issue."}],"answers":[{"tags":[],"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697606979,"creation_date":1697606979,"answer_id":77313677,"question_id":67582578,"body_markdown":"Starting with [Timefold][1] Solver 1.3.0, there is now a way to concat streams. It&#39;s called `concat` and it is available on all cardinalities of constraint streams.\r\n\r\n\r\n  [1]: https://timefold.ai/blog/2023/optaplanner-fork","title":"Concat optaplanner constraint streams","body":"<p>Starting with <a href=\"https://timefold.ai/blog/2023/optaplanner-fork\" rel=\"nofollow noreferrer\">Timefold</a> Solver 1.3.0, there is now a way to concat streams. It's called <code>concat</code> and it is available on all cardinalities of constraint streams.</p>\n"}],"owner":{"account_id":21636195,"reputation":21,"user_id":15959087,"display_name":"Bram"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697606979,"creation_date":1621326528,"question_id":67582578,"body_markdown":"Is it possible to concatenate two constraint streams of the same cardinality and with the same types?\r\n\r\nFor instance, I have a constraint stream containing all planned teams:\r\n\r\n```\r\nBiConstraintStream &lt;Team, Long&gt; plannedTeams(ConstraintFactory constraintFactory) {\r\n    return constraintFactory.from(Team.class)\r\n        .ifExists(Planning.class, Joiners.equal(team -&gt; team, Planning::getTeam))\r\n        .groupBy(team -&gt; team, Team::getCountPeople)\r\n}\r\n```\r\nand a stream containing all non planned teams.\r\n```\r\nBiConstraintStream &lt;Team, Long&gt; nonPlannedTeams(ConstraintFactory constraintFactory) {\r\n    return constraintFactory.from(Team.class)\r\n        .ifNotExists(Planning.class, Joiners.equal(team -&gt; team, Planning::getTeam))\r\n        .groupBy(team -&gt; team, team -&gt; team.getCountPeople()/2)\r\n}\r\n```\r\nNow I want to set a constraint on the total count, by summing the count of both planned teams and unplanned teams, e.g.,\r\n\r\n```\r\nConstraint constraintOnCount(ConstraintFactory constraintFactory) {\r\n    return plannedTeams(constraintFactory).concat(nonPlannedTeams(constraintFactory))\r\n        .groupBy(sum((team, count)-&gt;count))\r\n        .filter(count -&gt; count &gt; 5)\r\n        .penalize(&quot;too many people&quot;, HardSoftScore.ONE_HARD, count -&gt; count - 5)\r\n\r\n}\r\n```\r\nIs there a way to do this?\r\n\r\n","title":"Concat optaplanner constraint streams","body":"<p>Is it possible to concatenate two constraint streams of the same cardinality and with the same types?</p>\n<p>For instance, I have a constraint stream containing all planned teams:</p>\n<pre><code>BiConstraintStream &lt;Team, Long&gt; plannedTeams(ConstraintFactory constraintFactory) {\n    return constraintFactory.from(Team.class)\n        .ifExists(Planning.class, Joiners.equal(team -&gt; team, Planning::getTeam))\n        .groupBy(team -&gt; team, Team::getCountPeople)\n}\n</code></pre>\n<p>and a stream containing all non planned teams.</p>\n<pre><code>BiConstraintStream &lt;Team, Long&gt; nonPlannedTeams(ConstraintFactory constraintFactory) {\n    return constraintFactory.from(Team.class)\n        .ifNotExists(Planning.class, Joiners.equal(team -&gt; team, Planning::getTeam))\n        .groupBy(team -&gt; team, team -&gt; team.getCountPeople()/2)\n}\n</code></pre>\n<p>Now I want to set a constraint on the total count, by summing the count of both planned teams and unplanned teams, e.g.,</p>\n<pre><code>Constraint constraintOnCount(ConstraintFactory constraintFactory) {\n    return plannedTeams(constraintFactory).concat(nonPlannedTeams(constraintFactory))\n        .groupBy(sum((team, count)-&gt;count))\n        .filter(count -&gt; count &gt; 5)\n        .penalize(&quot;too many people&quot;, HardSoftScore.ONE_HARD, count -&gt; count - 5)\n\n}\n</code></pre>\n<p>Is there a way to do this?</p>\n"},{"tags":["java","collections","arrays","set"],"answers":[{"comments":[{"owner":{"display_name":"user130076"},"score":0,"creation_date":1276799463,"post_id":3064446,"comment_id":3138563,"body_markdown":"I was hoping for a method that returns a set directly from an array, does one exist?","body":"I was hoping for a method that returns a set directly from an array, does one exist?"},{"owner":{"account_id":78181,"reputation":46967,"user_id":222674,"accept_rate":97,"display_name":"Petar Minchev"},"score":1,"creation_date":1276799694,"post_id":3064446,"comment_id":3138601,"body_markdown":"You can write your own, if you are so eager:)","body":"You can write your own, if you are so eager:)"}],"tags":[],"owner":{"account_id":78181,"reputation":46967,"user_id":222674,"accept_rate":97,"display_name":"Petar Minchev"},"comment_count":2,"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1319610023,"creation_date":1276799248,"answer_id":3064446,"question_id":3064423,"body_markdown":"After you do `Arrays.asList(array)` you can execute `Set set = new HashSet(list);`\r\n\r\nHere is a sample method, you can write:\r\n\r\n    public &lt;T&gt; Set&lt;T&gt; GetSetFromArray(T[] array) {\r\n        return new HashSet&lt;T&gt;(Arrays.asList(array));\r\n    }","title":"How to convert an Array to a Set in Java","body":"<p>After you do <code>Arrays.asList(array)</code> you can execute <code>Set set = new HashSet(list);</code></p>\n\n<p>Here is a sample method, you can write:</p>\n\n<pre><code>public &lt;T&gt; Set&lt;T&gt; GetSetFromArray(T[] array) {\n    return new HashSet&lt;T&gt;(Arrays.asList(array));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":247188,"reputation":7267,"user_id":521754,"accept_rate":77,"display_name":"despot"},"score":11,"creation_date":1309946812,"post_id":3064447,"comment_id":7779923,"body_markdown":"I would leave out the last &lt;T&gt;, otherwise nice oneliner!","body":"I would leave out the last &lt;T&gt;, otherwise nice oneliner!"},{"owner":{"account_id":58450,"reputation":1392,"user_id":377978,"accept_rate":57,"display_name":"Jagat"},"score":3,"creation_date":1340629929,"post_id":3064447,"comment_id":14685850,"body_markdown":"@SLaks Exactly. asList just creates a view on top of the array.","body":"@SLaks Exactly. asList just creates a view on top of the array."},{"owner":{"account_id":1014552,"reputation":118,"user_id":1026408,"display_name":"dataoz"},"score":1,"creation_date":1342121617,"post_id":3064447,"comment_id":15125870,"body_markdown":"@SLaks I exaggerated a bit. But you still create 1 more object than if you iterated over the array yourself or used the helper method provided by Collections, as indicated by JavadocMD below. That is unless I am missing something obvious.","body":"@SLaks I exaggerated a bit. But you still create 1 more object than if you iterated over the array yourself or used the helper method provided by Collections, as indicated by JavadocMD below. That is unless I am missing something obvious."},{"owner":{"account_id":176498,"reputation":897,"user_id":407234,"accept_rate":80,"display_name":"T. Markle"},"score":90,"creation_date":1348289624,"post_id":3064447,"comment_id":16886945,"body_markdown":"Note that if you use this method on an array of primitives such as int[] it will return a List&lt;int[]&gt; so you should use wrapper classes to get the intended behavior.","body":"Note that if you use this method on an array of primitives such as int[] it will return a List&lt;int[]&gt; so you should use wrapper classes to get the intended behavior."},{"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"score":1,"creation_date":1362422509,"post_id":3064447,"comment_id":21433704,"body_markdown":"Actually, if you put the code in a method with a generic return type &lt;T&gt;, attempting to pass a primitive array as T[] won&#39;t compile, so no problem. Otherwise, one would need to check someArray.getClass().getComponentType().isPrimitive().","body":"Actually, if you put the code in a method with a generic return type &lt;T&gt;, attempting to pass a primitive array as T[] won&#39;t compile, so no problem. Otherwise, one would need to check someArray.getClass().getComponentType().isPrimitive()."},{"owner":{"account_id":46963,"reputation":1007,"user_id":138969,"display_name":"Ajay Gautam"},"score":3,"creation_date":1380740476,"post_id":3064447,"comment_id":28316211,"body_markdown":"Sets.newHashSet is a cleaner solution","body":"Sets.newHashSet is a cleaner solution"},{"owner":{"account_id":15988,"reputation":872908,"user_id":34397,"accept_rate":87,"display_name":"SLaks"},"score":6,"creation_date":1380741322,"post_id":3064447,"comment_id":28316623,"body_markdown":"@AjayGautam: That&#39;s only in Guava.","body":"@AjayGautam: That&#39;s only in Guava."},{"owner":{"account_id":373701,"reputation":1606,"user_id":723506,"accept_rate":75,"display_name":"David Carboni"},"score":10,"creation_date":1429626596,"post_id":3064447,"comment_id":47680634,"body_markdown":"I&#39;ll take readability over efficiency (nearly) every time: http://blog.codinghorror.com/hardware-is-cheap-programmers-are-expensive/","body":"I&#39;ll take readability over efficiency (nearly) every time: <a href=\"http://blog.codinghorror.com/hardware-is-cheap-programmers-are-expensive/\" rel=\"nofollow noreferrer\">blog.codinghorror.com/&hellip;</a>"},{"owner":{"account_id":446566,"reputation":18084,"user_id":839689,"accept_rate":71,"display_name":"Nayuki"},"score":0,"creation_date":1456799832,"post_id":3064447,"comment_id":59103907,"body_markdown":"@yegor256 The valid explicit syntax is `Arrays.&lt;T&gt;asList()`. But it is better to rely on type inference whenever possible.","body":"@yegor256 The valid explicit syntax is <code>Arrays.&lt;T&gt;asList()</code>. But it is better to rely on type inference whenever possible."},{"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"score":1,"creation_date":1501600758,"post_id":3064447,"comment_id":77844461,"body_markdown":"Set&lt;String&gt; set = Collections.asSet(&quot;one&quot;, &quot;two&quot;);","body":"Set&lt;String&gt; set = Collections.asSet(&quot;one&quot;, &quot;two&quot;);"},{"owner":{"account_id":2872661,"reputation":427,"user_id":2465608,"accept_rate":100,"display_name":"Damith"},"score":1,"creation_date":1532924658,"post_id":3064447,"comment_id":90139187,"body_markdown":"There is a major difference between using  new HashSet&lt;T&gt;(Arrays.asList(someArray)); and Set.of(someArray); that is, former produces a Non-Immutable collection while later produce an immutable collection.","body":"There is a major difference between using  new HashSet&lt;T&gt;(Arrays.asList(someArray)); and Set.of(someArray); that is, former produces a Non-Immutable collection while later produce an immutable collection."},{"owner":{"account_id":9712253,"reputation":409,"user_id":7203695,"display_name":"Vikash Kumar"},"score":2,"creation_date":1546627585,"post_id":3064447,"comment_id":94924481,"body_markdown":"I observed that  new HashSet&lt;T&gt;(Arrays.asList(someArray)); would not add each element separately , it just adds the whole array as set&#39;s first item .","body":"I observed that  new HashSet&lt;T&gt;(Arrays.asList(someArray)); would not add each element separately , it just adds the whole array as set&#39;s first item ."},{"owner":{"account_id":2457205,"reputation":2562,"user_id":2142112,"accept_rate":96,"display_name":"John Farkerson"},"score":0,"creation_date":1572081541,"post_id":3064447,"comment_id":103456360,"body_markdown":"The time complexities of all of these solutions are O(n), correct? I assume there is no faster way to do it.","body":"The time complexities of all of these solutions are O(n), correct? I assume there is no faster way to do it."},{"owner":{"account_id":8906759,"reputation":2159,"user_id":6648326,"accept_rate":71,"display_name":"MasterJoe"},"score":0,"creation_date":1588656879,"post_id":3064447,"comment_id":108974716,"body_markdown":"@SLaks - how would I convert an array of primitive integers to a TreeSet of Integers ?","body":"@SLaks - how would I convert an array of primitive integers to a TreeSet of Integers ?"},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":1,"creation_date":1611786014,"post_id":3064447,"comment_id":116566214,"body_markdown":"Arrays.asList(someArray)); will not work for `int[] someArray`","body":"Arrays.asList(someArray)); will not work for <code>int[] someArray</code>"},{"owner":{"account_id":1051438,"reputation":417,"user_id":1055278,"display_name":"Ali"},"score":1,"creation_date":1626132492,"post_id":3064447,"comment_id":120806379,"body_markdown":"`Set.of(someArray);` throws an `IllegalArgumentException` in case `someArray` has duplicate item(s) while `new HashSet&lt;&gt;(Arrays.asList(someArray));` would create the set successfully.","body":"<code>Set.of(someArray);</code> throws an <code>IllegalArgumentException</code> in case <code>someArray</code> has duplicate item(s) while <code>new HashSet&lt;&gt;(Arrays.asList(someArray));</code> would create the set successfully."}],"tags":[],"owner":{"account_id":15988,"reputation":872908,"user_id":34397,"accept_rate":87,"display_name":"SLaks"},"comment_count":16,"down_vote_count":8,"up_vote_count":1406,"is_accepted":true,"score":1398,"last_activity_date":1697606700,"creation_date":1276799257,"answer_id":3064447,"question_id":3064423,"body_markdown":"Like this:\r\n\r\n    Set&lt;T&gt; mySet = new HashSet&lt;&gt;(Arrays.asList(someArray));\r\n\r\nIn Java 9+, if unmodifiable set is ok:\r\n\r\n    Set&lt;T&gt; mySet = Set.of(someArray);\r\n\r\nIn Java 10+, the generic type parameter can be inferred from the arrays component type:\r\n\r\n    var mySet = Set.of(someArray);\r\n\r\n**Be careful** \r\n\r\n&gt; Set.of throws IllegalArgumentException - if there are any duplicate\r\n&gt; elements in someArray.\r\nSee more details: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html#of(E...)\r\n\r\nIf you want an unmodifiable set and you might have duplicate elements in the array, do the following:\r\n\r\n    var mySet = Set.copyOf(Arrays.asList(array));\r\n","title":"How to convert an Array to a Set in Java","body":"<p>Like this:</p>\n<pre><code>Set&lt;T&gt; mySet = new HashSet&lt;&gt;(Arrays.asList(someArray));\n</code></pre>\n<p>In Java 9+, if unmodifiable set is ok:</p>\n<pre><code>Set&lt;T&gt; mySet = Set.of(someArray);\n</code></pre>\n<p>In Java 10+, the generic type parameter can be inferred from the arrays component type:</p>\n<pre><code>var mySet = Set.of(someArray);\n</code></pre>\n<p><strong>Be careful</strong></p>\n<blockquote>\n<p>Set.of throws IllegalArgumentException - if there are any duplicate\nelements in someArray.\nSee more details: <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html#of(E...)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html#of(E...)</a></p>\n</blockquote>\n<p>If you want an unmodifiable set and you might have duplicate elements in the array, do the following:</p>\n<pre><code>var mySet = Set.copyOf(Arrays.asList(array));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"score":0,"creation_date":1276800414,"post_id":3064461,"comment_id":3138729,"body_markdown":"That wouldn&#39;t really be more efficient (at least not worth thinking about).","body":"That wouldn&#39;t really be more efficient (at least not worth thinking about)."},{"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"score":3,"creation_date":1276800907,"post_id":3064461,"comment_id":3138793,"body_markdown":"With the constructor version, the initial capacity of the `HashSet` is set based on the size of the array, for instance.","body":"With the constructor version, the initial capacity of the <code>HashSet</code> is set based on the size of the array, for instance."},{"owner":{"account_id":405571,"reputation":726,"user_id":774543,"accept_rate":80,"display_name":"Zorb"},"score":3,"creation_date":1444860313,"post_id":3064461,"comment_id":54084349,"body_markdown":"this answer is not so dumb as it seems: &#39;Collections.addAll(mySet, myArray);&#39; from  java.util.Collections use the same iterator but plus one boolean operation . Plus as  Bert F pointed out Collections.addAll &quot; likely to run significantly faster under most implementations&quot; than c.addAll(Arrays.asList(elements))","body":"this answer is not so dumb as it seems: &#39;Collections.addAll(mySet, myArray);&#39; from  java.util.Collections use the same iterator but plus one boolean operation . Plus as  Bert F pointed out Collections.addAll &quot; likely to run significantly faster under most implementations&quot; than c.addAll(Arrays.asList(elements))"}],"tags":[],"owner":{"account_id":26356,"reputation":68584,"user_id":68507,"accept_rate":94,"display_name":"Ben S"},"comment_count":3,"down_vote_count":7,"up_vote_count":6,"is_accepted":false,"score":-1,"last_activity_date":1444864164,"creation_date":1276799324,"answer_id":3064461,"question_id":3064423,"body_markdown":"`new HashSet&lt;Object&gt;(Arrays.asList(Object[] a));`\r\n\r\nBut I think this would be more efficient:\r\n\r\n    final Set s = new HashSet&lt;Object&gt;();    \r\n    for (Object o : a) { s.add(o); }         \r\n\r\n\r\n\r\n\r\n\r\n","title":"How to convert an Array to a Set in Java","body":"<p><code>new HashSet&lt;Object&gt;(Arrays.asList(Object[] a));</code></p>\n\n<p>But I think this would be more efficient:</p>\n\n<pre><code>final Set s = new HashSet&lt;Object&gt;();    \nfor (Object o : a) { s.add(o); }         \n</code></pre>\n"},{"comments":[{"owner":{"account_id":69527,"reputation":40466,"user_id":202214,"display_name":"Kevin Bourrillion"},"score":28,"creation_date":1276809968,"post_id":3064502,"comment_id":3140077,"body_markdown":"also ImmutableSet.copyOf(array).  (I like to point out also&#39;s, I guess.)","body":"also ImmutableSet.copyOf(array).  (I like to point out also&#39;s, I guess.)"},{"owner":{"account_id":146489,"reputation":774,"user_id":356965,"display_name":"Pikachu"},"score":0,"creation_date":1471453351,"post_id":3064502,"comment_id":65356498,"body_markdown":"For a fixed list of elements you could use: ImmutableSet.of(e1, e2, ..., en). Notice you would not be able to change this Set after its creation.","body":"For a fixed list of elements you could use: ImmutableSet.of(e1, e2, ..., en). Notice you would not be able to change this Set after its creation."},{"owner":{"account_id":1968,"reputation":3615,"user_id":2709,"display_name":"Alexander Klimetschek"},"score":2,"creation_date":1478829092,"post_id":3064502,"comment_id":68319240,"body_markdown":"Be warned, the Guava javadoc says: &quot;This method is not actually very useful and will likely be deprecated in the future.&quot; They point towards the standard `new HashSet&lt;T&gt;(Arrays.asList(someArray))`. See https://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/Sets.html#newHashSet(E...)","body":"Be warned, the Guava javadoc says: &quot;This method is not actually very useful and will likely be deprecated in the future.&quot; They point towards the standard <code>new HashSet&lt;T&gt;(Arrays.asList(someArray))</code>. See <a href=\"https://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/Sets.html#newHashSet(E...)\" rel=\"nofollow noreferrer\">google.github.io/guava/releases/19.0/api/docs/com/google/com&zwnj;&#8203;mon/&hellip;</a>"}],"tags":[],"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"comment_count":3,"down_vote_count":1,"up_vote_count":128,"is_accepted":false,"score":127,"last_activity_date":1276799763,"creation_date":1276799763,"answer_id":3064502,"question_id":3064423,"body_markdown":"With [Guava][1] you can do:\r\n\r\n    T[] array = ...\r\n    Set&lt;T&gt; set = Sets.newHashSet(array);\r\n\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/","title":"How to convert an Array to a Set in Java","body":"<p>With <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">Guava</a> you can do:</p>\n\n<pre><code>T[] array = ...\nSet&lt;T&gt; set = Sets.newHashSet(array);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"score":5,"creation_date":1276800004,"post_id":3064516,"comment_id":3138648,"body_markdown":"You can do that with `java.util.Collections.addAll`. Plus, I wouldn&#39;t recommend Commons Collections anymore, what with it not being generified and Guava existing .","body":"You can do that with <code>java.util.Collections.addAll</code>. Plus, I wouldn&#39;t recommend Commons Collections anymore, what with it not being generified and Guava existing ."},{"owner":{"account_id":189438,"reputation":3782,"user_id":428768,"accept_rate":86,"display_name":"Adrian"},"score":14,"creation_date":1334096235,"post_id":3064516,"comment_id":12933756,"body_markdown":"+1 for being more efficient than SLaks&#39;s answer, even though it&#39;s not a one-liner.","body":"+1 for being more efficient than SLaks&#39;s answer, even though it&#39;s not a one-liner."},{"owner":{"account_id":22969,"reputation":25594,"user_id":57171,"accept_rate":80,"display_name":"Steve Powell"},"score":1,"creation_date":1382456137,"post_id":3064516,"comment_id":28961881,"body_markdown":"@Adrian I question that. I think `addAll` will be O(_n_).","body":"@Adrian I question that. I think <code>addAll</code> will be O(<i>n</i>)."},{"owner":{"account_id":5688,"reputation":4427,"user_id":9304,"accept_rate":82,"display_name":"JavadocMD"},"score":1,"creation_date":1382468422,"post_id":3064516,"comment_id":28968440,"body_markdown":"I believe Adrian&#39;s point was about how SLaks&#39; solution creates a List instance which is ultimately thrown out. The actual impact of that difference is *probably* extremely minimal, but *could* depend on the context in which you&#39;re doing this -- tight loops or very large sets might behave very differently between these two options.","body":"I believe Adrian&#39;s point was about how SLaks&#39; solution creates a List instance which is ultimately thrown out. The actual impact of that difference is <i>probably</i> extremely minimal, but <i>could</i> depend on the context in which you&#39;re doing this -- tight loops or very large sets might behave very differently between these two options."},{"owner":{"account_id":6664,"reputation":85927,"user_id":11296,"display_name":"Bert F"},"score":15,"creation_date":1391467842,"post_id":3064516,"comment_id":32526664,"body_markdown":"Per the Collections.addAll() javadoc (Java 6): &quot;The behavior of this convenience method is identical to that of c.addAll(Arrays.asList(elements)), but this method is likely to run significantly faster under most implementations.&quot;","body":"Per the Collections.addAll() javadoc (Java 6): &quot;The behavior of this convenience method is identical to that of c.addAll(Arrays.asList(elements)), but this method is likely to run significantly faster under most implementations.&quot;"},{"owner":{"account_id":1833521,"reputation":1246,"user_id":4387162,"display_name":"downeyt"},"score":0,"creation_date":1437228148,"post_id":3064516,"comment_id":50947348,"body_markdown":"Interesting fact? Coding in NetBeans, I wrote my own loop to copy the array to the set. NetBeans popped up a light bulb suggesting I use `mySet.addAll(Arrays.asList(myArray));`","body":"Interesting fact? Coding in NetBeans, I wrote my own loop to copy the array to the set. NetBeans popped up a light bulb suggesting I use <code>mySet.addAll(Arrays.asList(myArray));</code>"},{"owner":{"account_id":5688,"reputation":4427,"user_id":9304,"accept_rate":82,"display_name":"JavadocMD"},"score":1,"creation_date":1460590454,"post_id":3064516,"comment_id":60819513,"body_markdown":"@user2418306 Indeed! Of course you can&#39;t have a collection of primitives anyway, so you&#39;re going to have to wrap them. Edited with recommendations.","body":"@user2418306 Indeed! Of course you can&#39;t have a collection of primitives anyway, so you&#39;re going to have to wrap them. Edited with recommendations."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1524591924,"post_id":3064516,"comment_id":87032189,"body_markdown":"JDK 9+ (not primitives): `Set.of(myArray)`","body":"JDK 9+ (not primitives): <code>Set.of(myArray)</code>"},{"owner":{"account_id":4895550,"reputation":854,"user_id":6341307,"display_name":"Mr00Anderson"},"score":0,"creation_date":1595222748,"post_id":3064516,"comment_id":111388292,"body_markdown":"This should be the real answer simply for the built in method `Collections.addAll(java.util.Collection, T...)`","body":"This should be the real answer simply for the built in method <code>Collections.addAll(java.util.Collection, T...)</code>"}],"tags":[],"owner":{"account_id":5688,"reputation":4427,"user_id":9304,"accept_rate":82,"display_name":"JavadocMD"},"comment_count":9,"down_vote_count":3,"up_vote_count":249,"is_accepted":false,"score":246,"last_activity_date":1460590793,"creation_date":1276799870,"answer_id":3064516,"question_id":3064423,"body_markdown":"    Set&lt;T&gt; mySet = new HashSet&lt;T&gt;();\r\n    Collections.addAll(mySet, myArray);\r\n\r\nThat&#39;s [Collections.addAll(java.util.Collection, T...)][1] from JDK 6.\r\n\r\nAdditionally: *what if our array is full of primitives?*\r\n\r\nFor JDK &lt; 8, I would just write the obvious `for` loop to do the wrap and add-to-set in one pass.\r\n\r\nFor JDK &gt;= 8, an attractive option is something like:\r\n\r\n    Arrays.stream(intArray).boxed().collect(Collectors.toSet());\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Collections.html#addAll%28java.util.Collection,%20T...%29","title":"How to convert an Array to a Set in Java","body":"<pre><code>Set&lt;T&gt; mySet = new HashSet&lt;T&gt;();\nCollections.addAll(mySet, myArray);\n</code></pre>\n\n<p>That's <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Collections.html#addAll%28java.util.Collection,%20T...%29\" rel=\"noreferrer\">Collections.addAll(java.util.Collection, T...)</a> from JDK 6.</p>\n\n<p>Additionally: <em>what if our array is full of primitives?</em></p>\n\n<p>For JDK &lt; 8, I would just write the obvious <code>for</code> loop to do the wrap and add-to-set in one pass.</p>\n\n<p>For JDK >= 8, an attractive option is something like:</p>\n\n<pre><code>Arrays.stream(intArray).boxed().collect(Collectors.toSet());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":318324,"reputation":699,"user_id":969741,"accept_rate":0,"display_name":"Pierre-Olivier Pignon"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1320399037,"creation_date":1320399037,"answer_id":8007187,"question_id":3064423,"body_markdown":"Quickly : you can do :\r\n\r\n    // Fixed-size list\r\n    List list = Arrays.asList(array);\r\n\r\n    // Growable list\r\n    list = new LinkedList(Arrays.asList(array));\r\n  \r\n    // Duplicate elements are discarded\r\n    Set set = new HashSet(Arrays.asList(array));\r\n\r\nand to reverse\r\n\r\n    // Create an array containing the elements in a list\r\n    Object[] objectArray = list.toArray();\r\n    MyClass[] array = (MyClass[])list.toArray(new MyClass[list.size()]);\r\n\r\n    // Create an array containing the elements in a set\r\n    objectArray = set.toArray();\r\n    array = (MyClass[])set.toArray(new MyClass[set.size()]);\r\n\r\n\r\n","title":"How to convert an Array to a Set in Java","body":"<p>Quickly : you can do :</p>\n\n<pre><code>// Fixed-size list\nList list = Arrays.asList(array);\n\n// Growable list\nlist = new LinkedList(Arrays.asList(array));\n\n// Duplicate elements are discarded\nSet set = new HashSet(Arrays.asList(array));\n</code></pre>\n\n<p>and to reverse</p>\n\n<pre><code>// Create an array containing the elements in a list\nObject[] objectArray = list.toArray();\nMyClass[] array = (MyClass[])list.toArray(new MyClass[list.size()]);\n\n// Create an array containing the elements in a set\nobjectArray = set.toArray();\narray = (MyClass[])set.toArray(new MyClass[set.size()]);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":990336,"reputation":5651,"user_id":1007845,"accept_rate":82,"display_name":"Adrian"},"score":4,"creation_date":1325697457,"post_id":8730970,"comment_id":10872265,"body_markdown":"user might not use apache commons","body":"user might not use apache commons"},{"owner":{"account_id":194080,"reputation":998,"user_id":436183,"accept_rate":75,"display_name":"Jeryl Cook"},"score":0,"creation_date":1380894382,"post_id":8730970,"comment_id":28380803,"body_markdown":"if the user does not use apache commons, then that is his first mistake.","body":"if the user does not use apache commons, then that is his first mistake."},{"owner":{"account_id":333711,"reputation":4480,"user_id":659715,"accept_rate":88,"display_name":"djeikyb"},"score":3,"creation_date":1418159400,"post_id":8730970,"comment_id":43225619,"body_markdown":"why would you use this instead of `java.util.Collections.addAll(myEmptySet, keys);`??","body":"why would you use this instead of <code>java.util.Collections.addAll(myEmptySet, keys);</code>??"}],"tags":[],"owner":{"account_id":1148131,"reputation":9,"user_id":1130444,"display_name":"mnagni"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1325697201,"creation_date":1325697201,"answer_id":8730970,"question_id":3064423,"body_markdown":"Sometime using some standard libraries helps a lot. Try to look at the [Apache Commons Collections][1]. In this case your problems is simply transformed to something like this\r\n\r\n    String[] keys = {&quot;blah&quot;, &quot;blahblah&quot;}\r\n    Set&lt;String&gt; myEmptySet = new HashSet&lt;String&gt;();\r\n    CollectionUtils.addAll(pythonKeywordSet, keys);\r\n\r\n\r\nAnd here is the [CollectionsUtils javadoc][2]\r\n\r\n\r\n  [1]: http://commons.apache.org/collections/\r\n  [2]: http://commons.apache.org/collections/api-release/org/apache/commons/collections/CollectionUtils.html","title":"How to convert an Array to a Set in Java","body":"<p>Sometime using some standard libraries helps a lot. Try to look at the <a href=\"http://commons.apache.org/collections/\" rel=\"nofollow\">Apache Commons Collections</a>. In this case your problems is simply transformed to something like this</p>\n\n<pre><code>String[] keys = {\"blah\", \"blahblah\"}\nSet&lt;String&gt; myEmptySet = new HashSet&lt;String&gt;();\nCollectionUtils.addAll(pythonKeywordSet, keys);\n</code></pre>\n\n<p>And here is the <a href=\"http://commons.apache.org/collections/api-release/org/apache/commons/collections/CollectionUtils.html\" rel=\"nofollow\">CollectionsUtils javadoc</a></p>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"comment_count":0,"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1487647950,"creation_date":1355871869,"answer_id":13942949,"question_id":3064423,"body_markdown":"In [Eclipse Collections][1], the following will work:\r\n\r\n    Set&lt;Integer&gt; set1 = Sets.mutable.of(1, 2, 3, 4, 5);\r\n    Set&lt;Integer&gt; set2 = Sets.mutable.of(new Integer[]{1, 2, 3, 4, 5});\r\n    MutableSet&lt;Integer&gt; mutableSet = Sets.mutable.of(1, 2, 3, 4, 5);\r\n    ImmutableSet&lt;Integer&gt; immutableSet = Sets.immutable.of(1, 2, 3, 4, 5);\r\n\r\n    Set&lt;Integer&gt; unmodifiableSet = Sets.mutable.of(1, 2, 3, 4, 5).asUnmodifiable();\r\n    Set&lt;Integer&gt; synchronizedSet = Sets.mutable.of(1, 2, 3, 4, 5).asSynchronized();\r\n    ImmutableSet&lt;Integer&gt; immutableSet = Sets.mutable.of(1, 2, 3, 4, 5).toImmutable();\r\n\r\nNote: I am a committer for Eclipse Collections\r\n\r\n\r\n  [1]: https://www.eclipse.org/collections/","title":"How to convert an Array to a Set in Java","body":"<p>In <a href=\"https://www.eclipse.org/collections/\" rel=\"noreferrer\">Eclipse Collections</a>, the following will work:</p>\n\n<pre><code>Set&lt;Integer&gt; set1 = Sets.mutable.of(1, 2, 3, 4, 5);\nSet&lt;Integer&gt; set2 = Sets.mutable.of(new Integer[]{1, 2, 3, 4, 5});\nMutableSet&lt;Integer&gt; mutableSet = Sets.mutable.of(1, 2, 3, 4, 5);\nImmutableSet&lt;Integer&gt; immutableSet = Sets.immutable.of(1, 2, 3, 4, 5);\n\nSet&lt;Integer&gt; unmodifiableSet = Sets.mutable.of(1, 2, 3, 4, 5).asUnmodifiable();\nSet&lt;Integer&gt; synchronizedSet = Sets.mutable.of(1, 2, 3, 4, 5).asSynchronized();\nImmutableSet&lt;Integer&gt; immutableSet = Sets.mutable.of(1, 2, 3, 4, 5).toImmutable();\n</code></pre>\n\n<p>Note: I am a committer for Eclipse Collections</p>\n"},{"comments":[{"owner":{"account_id":175361,"reputation":3070,"user_id":405326,"accept_rate":93,"display_name":"Raffi Khatchadourian"},"score":2,"creation_date":1452103840,"post_id":28281754,"comment_id":57025006,"body_markdown":"Is it worth doing this in parallel?","body":"Is it worth doing this in parallel?"},{"owner":{"account_id":3322034,"reputation":108,"user_id":2792975,"display_name":"Felix S"},"score":0,"creation_date":1453290087,"post_id":28281754,"comment_id":57534491,"body_markdown":"@RaffiKhatchadourian This is not necessarily being done in parallel. Arrays.stream does not make any promises on the stream. You would have to call parallel() on the resulting stream for that.","body":"@RaffiKhatchadourian This is not necessarily being done in parallel. Arrays.stream does not make any promises on the stream. You would have to call parallel() on the resulting stream for that."},{"owner":{"account_id":203806,"reputation":26030,"user_id":451672,"display_name":"Randy the Dev"},"score":0,"creation_date":1480551258,"post_id":28281754,"comment_id":69014876,"body_markdown":"You could also call parallelStream(). To answer @RaffiKhatchadourian&#39;s question, probably not. Try measuring if you&#39;re noticing any performance issues.","body":"You could also call parallelStream(). To answer @RaffiKhatchadourian&#39;s question, probably not. Try measuring if you&#39;re noticing any performance issues."},{"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"score":6,"creation_date":1488528156,"post_id":28281754,"comment_id":72280290,"body_markdown":"Generally, avoid parallel. By default it uses a single threadpool accross your application, and the overhead to start threads and join is worse than sequentially streaming through hundreds of items. Only in very few situations does parallel actually bring benefit.","body":"Generally, avoid parallel. By default it uses a single threadpool accross your application, and the overhead to start threads and join is worse than sequentially streaming through hundreds of items. Only in very few situations does parallel actually bring benefit."}],"tags":[],"owner":{"account_id":5267841,"reputation":781,"user_id":4207141,"display_name":"max"},"comment_count":4,"down_vote_count":0,"up_vote_count":71,"is_accepted":false,"score":71,"last_activity_date":1449765198,"creation_date":1422893000,"answer_id":28281754,"question_id":3064423,"body_markdown":"Java 8:\r\n\r\n    String[] strArray = {&quot;eins&quot;, &quot;zwei&quot;, &quot;drei&quot;, &quot;vier&quot;};\r\n\r\n    Set&lt;String&gt; strSet = Arrays.stream(strArray).collect(Collectors.toSet());\r\n    System.out.println(strSet);\r\n    // [eins, vier, zwei, drei]","title":"How to convert an Array to a Set in Java","body":"<p>Java 8:</p>\n\n<pre><code>String[] strArray = {\"eins\", \"zwei\", \"drei\", \"vier\"};\n\nSet&lt;String&gt; strSet = Arrays.stream(strArray).collect(Collectors.toSet());\nSystem.out.println(strSet);\n// [eins, vier, zwei, drei]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":287515,"reputation":15504,"user_id":587365,"display_name":"Andrew Spencer"},"score":1,"creation_date":1455872408,"post_id":31018411,"comment_id":58693654,"body_markdown":"+1 for `Stream.of()` - I didn&#39;t know that one. A small quibble about `Collectors.toSet()`: you say the spec does not guarantee adding elements one by one, but that&#39;s what it means by: &quot;accumulates ... into a new `Set`&quot;. And it&#39;s more readable - so preferable to my mind, if you don&#39;t need the guarantees of concrete type, mutability, serializability and thread-safety.","body":"+1 for <code>Stream.of()</code> - I didn&#39;t know that one. A small quibble about <code>Collectors.toSet()</code>: you say the spec does not guarantee adding elements one by one, but that&#39;s what it means by: &quot;accumulates ... into a new <code>Set</code>&quot;. And it&#39;s more readable - so preferable to my mind, if you don&#39;t need the guarantees of concrete type, mutability, serializability and thread-safety."},{"owner":{"account_id":1257650,"reputation":23489,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"score":0,"creation_date":1455963136,"post_id":31018411,"comment_id":58733509,"body_markdown":"@AndrewSpencer Spec does not guarantee that the set implementation will be `HashSet`. It only guarantees that it will be a `Set` and that is what I mean. Hope I clarified it.","body":"@AndrewSpencer Spec does not guarantee that the set implementation will be <code>HashSet</code>. It only guarantees that it will be a <code>Set</code> and that is what I mean. Hope I clarified it."},{"owner":{"account_id":287515,"reputation":15504,"user_id":587365,"display_name":"Andrew Spencer"},"score":0,"creation_date":1456310203,"post_id":31018411,"comment_id":58884107,"body_markdown":"Sorry, and thanks, I misread it as meaning &quot;spec does not guarantee added one by one&quot; rather than &quot;spec does not guarantee a HashSet&quot;. Proposed an edit to clarify.","body":"Sorry, and thanks, I misread it as meaning &quot;spec does not guarantee added one by one&quot; rather than &quot;spec does not guarantee a HashSet&quot;. Proposed an edit to clarify."}],"tags":[],"owner":{"account_id":1257650,"reputation":23489,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"comment_count":3,"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1547699588,"creation_date":1435124323,"answer_id":31018411,"question_id":3064423,"body_markdown":"Java 8\r\n------\r\n\r\nWe have the option of using `Stream` as well. We can get stream in various ways:\r\n \r\n\r\n    Set&lt;String&gt; set = Stream.of(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;).collect(Collectors.toCollection(HashSet::new));\r\n    System.out.println(set);\r\n    \r\n    String[] stringArray = {&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;};\r\n    Set&lt;String&gt; strSet1 = Arrays.stream(stringArray).collect(Collectors.toSet());\r\n    System.out.println(strSet1);\r\n    \r\n    // if you need HashSet then use below option.\r\n    Set&lt;String&gt; strSet2 = Arrays.stream(stringArray).collect(Collectors.toCollection(HashSet::new));\r\n    System.out.println(strSet2);\r\n\r\nThe source code of `Collectors.toSet()` shows that elements are added one by one to a `HashSet` but specification does not guarantee it will be a `HashSet`.\r\n\r\n&gt; &quot;There are no guarantees on the type, mutability, serializability, or\r\n&gt; thread-safety of the Set returned.&quot;\r\n\r\nSo it is better to use the later option. The output is:\r\n`\r\n[A, B, C, D]\r\n[A, B, C, D]\r\n[A, B, C, D]`\r\n\r\nImmutable Set (Java 9)\r\n-------------\r\n\r\nJava 9 introduced `Set.of` static factory method which returns immutable set for the provided elements or the array. \r\n\r\n    @SafeVarargs\r\n    static &lt;E&gt; Set&lt;E&gt; of​(E... elements)\r\n\r\nCheck [Immutable Set Static Factory Methods][1] for details.\r\nImmutable Set (Java 10)\r\n-----------------------\r\n\r\nWe can also get an immutable set in two ways:\r\n\r\n 1. `Set.copyOf(Arrays.asList(array))`\r\n 2. `Arrays.stream(array).collect(Collectors.toUnmodifiableList());`\r\n\r\nThe method `Collectors.toUnmodifiableList()` internally makes use of `Set.of` introduced in Java 9. Also check this [answer][2] of mine for more.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/Set.html#immutable\r\n  [2]: https://stackoverflow.com/a/52536126/1216775","title":"How to convert an Array to a Set in Java","body":"<h2>Java 8</h2>\n\n<p>We have the option of using <code>Stream</code> as well. We can get stream in various ways:</p>\n\n<pre><code>Set&lt;String&gt; set = Stream.of(\"A\", \"B\", \"C\", \"D\").collect(Collectors.toCollection(HashSet::new));\nSystem.out.println(set);\n\nString[] stringArray = {\"A\", \"B\", \"C\", \"D\"};\nSet&lt;String&gt; strSet1 = Arrays.stream(stringArray).collect(Collectors.toSet());\nSystem.out.println(strSet1);\n\n// if you need HashSet then use below option.\nSet&lt;String&gt; strSet2 = Arrays.stream(stringArray).collect(Collectors.toCollection(HashSet::new));\nSystem.out.println(strSet2);\n</code></pre>\n\n<p>The source code of <code>Collectors.toSet()</code> shows that elements are added one by one to a <code>HashSet</code> but specification does not guarantee it will be a <code>HashSet</code>.</p>\n\n<blockquote>\n  <p>\"There are no guarantees on the type, mutability, serializability, or\n  thread-safety of the Set returned.\"</p>\n</blockquote>\n\n<p>So it is better to use the later option. The output is:\n<code>\n[A, B, C, D]\n[A, B, C, D]\n[A, B, C, D]</code></p>\n\n<h2>Immutable Set (Java 9)</h2>\n\n<p>Java 9 introduced <code>Set.of</code> static factory method which returns immutable set for the provided elements or the array. </p>\n\n<pre><code>@SafeVarargs\nstatic &lt;E&gt; Set&lt;E&gt; of​(E... elements)\n</code></pre>\n\n<p>Check <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Set.html#immutable\" rel=\"noreferrer\">Immutable Set Static Factory Methods</a> for details.</p>\n\n<h2>Immutable Set (Java 10)</h2>\n\n<p>We can also get an immutable set in two ways:</p>\n\n<ol>\n<li><code>Set.copyOf(Arrays.asList(array))</code></li>\n<li><code>Arrays.stream(array).collect(Collectors.toUnmodifiableList());</code></li>\n</ol>\n\n<p>The method <code>Collectors.toUnmodifiableList()</code> internally makes use of <code>Set.of</code> introduced in Java 9. Also check this <a href=\"https://stackoverflow.com/a/52536126/1216775\">answer</a> of mine for more.</p>\n"},{"comments":[{"owner":{"account_id":3200622,"reputation":5051,"user_id":2702730,"accept_rate":81,"display_name":"senseiwu"},"score":2,"creation_date":1519653318,"post_id":32602608,"comment_id":84984833,"body_markdown":"way better that 2-3 liners.","body":"way better that 2-3 liners."}],"tags":[],"owner":{"account_id":5919028,"reputation":623,"user_id":4656851,"display_name":"Alex"},"comment_count":1,"down_vote_count":0,"up_vote_count":51,"is_accepted":false,"score":51,"last_activity_date":1504644514,"creation_date":1442389488,"answer_id":32602608,"question_id":3064423,"body_markdown":"Varargs will work too!\r\n\r\n    Stream.of(T... values).collect(Collectors.toSet());\r\n","title":"How to convert an Array to a Set in Java","body":"<p>Varargs will work too!</p>\n\n<pre><code>Stream.of(T... values).collect(Collectors.toSet());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1677570,"reputation":18354,"user_id":1542723,"display_name":"Ferrybig"},"score":2,"creation_date":1453223789,"post_id":34743530,"comment_id":57503685,"body_markdown":"In what aspect does you answer differ from the implementation @SLaks has provided as least 6 years ago? http://stackoverflow.com/a/3064447","body":"In what aspect does you answer differ from the implementation @SLaks has provided as least 6 years ago? <a href=\"http://stackoverflow.com/a/3064447\">stackoverflow.com/a/3064447</a>"}],"tags":[],"owner":{"account_id":7493295,"reputation":17,"user_id":5694280,"display_name":"Satyendra Jaiswal"},"comment_count":1,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1452602313,"creation_date":1452601204,"answer_id":34743530,"question_id":3064423,"body_markdown":" \r\n\r\n    Set&lt;T&gt; b = new HashSet&lt;&gt;(Arrays.asList(requiredArray));","title":"How to convert an Array to a Set in Java","body":"<pre><code>Set&lt;T&gt; b = new HashSet&lt;&gt;(Arrays.asList(requiredArray));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1434179,"reputation":5113,"user_id":1355930,"display_name":"Ashley Frieze"},"score":0,"creation_date":1480760254,"post_id":36926362,"comment_id":69103556,"body_markdown":"Arrays.stream may be better than Stream.of for the above.","body":"Arrays.stream may be better than Stream.of for the above."}],"tags":[],"owner":{"account_id":1434179,"reputation":5113,"user_id":1355930,"display_name":"Ashley Frieze"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1461881439,"creation_date":1461881439,"answer_id":36926362,"question_id":3064423,"body_markdown":"I&#39;ve written the below from the advice above - steal it... it&#39;s nice!\r\n\r\n    /**\r\n     * Handy conversion to set\r\n     */\r\n    public class SetUtil {\r\n\t    /**\r\n\t     * Convert some items to a set\r\n\t     * @param items items\r\n\t     * @param &lt;T&gt; works on any type\r\n\t     * @return a hash set of the input items\r\n\t     */\r\n\t    public static &lt;T&gt; Set&lt;T&gt; asSet(T ... items) {\r\n\t\t    return Stream.of(items).collect(Collectors.toSet());\r\n\t    }\r\n    }\r\n","title":"How to convert an Array to a Set in Java","body":"<p>I've written the below from the advice above - steal it... it's nice!</p>\n\n<pre><code>/**\n * Handy conversion to set\n */\npublic class SetUtil {\n    /**\n     * Convert some items to a set\n     * @param items items\n     * @param &lt;T&gt; works on any type\n     * @return a hash set of the input items\n     */\n    public static &lt;T&gt; Set&lt;T&gt; asSet(T ... items) {\n        return Stream.of(items).collect(Collectors.toSet());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":544312,"reputation":507,"user_id":913717,"accept_rate":80,"display_name":"Bruce Zu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576351856,"creation_date":1472416486,"answer_id":39195539,"question_id":3064423,"body_markdown":"```java\r\nprivate Map&lt;Integer, Set&lt;Integer&gt;&gt; nobreaks = new HashMap();\r\nnobreaks.put(1, new HashSet(Arrays.asList(new int[]{2, 4, 5})));\r\nSystem.out.println(&quot;expected size is 3: &quot; +nobreaks.get(1).size());\r\n```\r\nthe output is\r\n```\r\nexpected size is 3: 1\r\n```\r\nchange it to \r\n```java\r\nnobreaks.put(1, new HashSet(Arrays.asList( 2, 4, 5 )));\r\n```\r\nthe output is\r\n```\r\nexpected size is 3: 3\r\n```","title":"How to convert an Array to a Set in Java","body":"<pre class=\"lang-java prettyprint-override\"><code>private Map&lt;Integer, Set&lt;Integer&gt;&gt; nobreaks = new HashMap();\nnobreaks.put(1, new HashSet(Arrays.asList(new int[]{2, 4, 5})));\nSystem.out.println(\"expected size is 3: \" +nobreaks.get(1).size());\n</code></pre>\n\n<p>the output is</p>\n\n<pre><code>expected size is 3: 1\n</code></pre>\n\n<p>change it to </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>nobreaks.put(1, new HashSet(Arrays.asList( 2, 4, 5 )));\n</code></pre>\n\n<p>the output is</p>\n\n<pre><code>expected size is 3: 3\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3155790,"reputation":14985,"user_id":2668232,"accept_rate":100,"display_name":"Oleksandr Pyrohov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534932713,"creation_date":1523739551,"answer_id":49836150,"question_id":3064423,"body_markdown":"In **Java 10**:\r\n\r\n    String[] strs = {&quot;A&quot;, &quot;B&quot;};\r\n    Set&lt;String&gt; set = Set.copyOf(Arrays.asList(strs));\r\n\r\n[`Set.copyOf`][1] returns an unmodifiable `Set` containing the elements of the given `Collection`.\r\n\r\n&amp;nbsp;The given `Collection` must not be `null`, and it must not contain any `null` elements.\r\n\r\n  [1]: https://docs.oracle.com/javase/10/docs/api/java/util/Set.html#copyOf(java.util.Collection)","title":"How to convert an Array to a Set in Java","body":"<p>In <strong>Java 10</strong>:</p>\n\n<pre><code>String[] strs = {\"A\", \"B\"};\nSet&lt;String&gt; set = Set.copyOf(Arrays.asList(strs));\n</code></pre>\n\n<p><a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/Set.html#copyOf(java.util.Collection)\" rel=\"nofollow noreferrer\"><code>Set.copyOf</code></a> returns an unmodifiable <code>Set</code> containing the elements of the given <code>Collection</code>.</p>\n\n<p>&nbsp;The given <code>Collection</code> must not be <code>null</code>, and it must not contain any <code>null</code> elements.</p>\n"},{"tags":[],"owner":{"account_id":7396121,"reputation":89,"user_id":5628004,"display_name":"Olexandra Dmytrenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1526938005,"creation_date":1526938005,"answer_id":50456827,"question_id":3064423,"body_markdown":"Use `CollectionUtils` or `ArrayUtils` from `stanford-postagger-3.0.jar` \r\n\r\n    import static edu.stanford.nlp.util.ArrayUtils.asSet;\r\n    or \r\n    import static edu.stanford.nlp.util.CollectionUtils.asSet;\r\n\r\n      ...\r\n    String [] array = {&quot;1&quot;, &quot;q&quot;};\r\n    Set&lt;String&gt; trackIds = asSet(array);\r\n        ","title":"How to convert an Array to a Set in Java","body":"<p>Use <code>CollectionUtils</code> or <code>ArrayUtils</code> from <code>stanford-postagger-3.0.jar</code> </p>\n\n<pre><code>import static edu.stanford.nlp.util.ArrayUtils.asSet;\nor \nimport static edu.stanford.nlp.util.CollectionUtils.asSet;\n\n  ...\nString [] array = {\"1\", \"q\"};\nSet&lt;String&gt; trackIds = asSet(array);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5730328,"reputation":865,"user_id":4526072,"accept_rate":64,"display_name":"Kennard"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1570479210,"creation_date":1545008887,"answer_id":53807880,"question_id":3064423,"body_markdown":"There has been a lot of great answers already, but most of them won&#39;t work with array of primitives (like `int[]`, `long[]`, `char[]`, `byte[]`, etc.)\r\n\r\nIn Java 8 and above, you can box the array with:\r\n\r\n    Integer[] boxedArr = Arrays.stream(arr).boxed().toArray(Integer[]::new);\r\n\r\n\r\nThen convert to set using stream:\r\n\r\n    Stream.of(boxedArr).collect(Collectors.toSet());\r\n\r\n","title":"How to convert an Array to a Set in Java","body":"<p>There has been a lot of great answers already, but most of them won't work with array of primitives (like <code>int[]</code>, <code>long[]</code>, <code>char[]</code>, <code>byte[]</code>, etc.)</p>\n\n<p>In Java 8 and above, you can box the array with:</p>\n\n<pre><code>Integer[] boxedArr = Arrays.stream(arr).boxed().toArray(Integer[]::new);\n</code></pre>\n\n<p>Then convert to set using stream:</p>\n\n<pre><code>Stream.of(boxedArr).collect(Collectors.toSet());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":946995,"reputation":43616,"user_id":974045,"display_name":"Gibolt"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1588381134,"creation_date":1580838315,"answer_id":60062896,"question_id":3064423,"body_markdown":"For anyone solving for Android:\r\n\r\n## Kotlin Collections Solution\r\n\r\nThe asterisk `*` is the `spread` operator. It applies all elements in a collection individually, each passed in order to a `vararg` method parameter. It is equivalent to:\r\n\r\n    val myArray = arrayOf(&quot;data&quot;, &quot;foo&quot;)\r\n    val mySet = setOf(*myArray)\r\n\r\n    // Equivalent to\r\n    val mySet = setOf(&quot;data&quot;, &quot;foo&quot;)\r\n\r\n    // Multiple spreads [&quot;data&quot;, &quot;foo&quot;, &quot;bar&quot;, &quot;data&quot;, &quot;foo&quot;]\r\n    val mySet = setOf(*myArray, &quot;bar&quot;, *myArray)\r\n\r\n\r\nPassing no parameters `setOf()` results in an empty set.\r\n\r\nIn addition to `setOf`, you can also use any of these for a specific hash type:\r\n\r\n    hashSetOf()\r\n    linkedSetOf()\r\n    mutableSetOf()\r\n    sortableSetOf()\r\n\r\nThis is how to define the collection item type explicitly.\r\n\r\n    setOf&lt;String&gt;()\r\n    hashSetOf&lt;MyClass&gt;()","title":"How to convert an Array to a Set in Java","body":"<p>For anyone solving for Android:</p>\n\n<h2>Kotlin Collections Solution</h2>\n\n<p>The asterisk <code>*</code> is the <code>spread</code> operator. It applies all elements in a collection individually, each passed in order to a <code>vararg</code> method parameter. It is equivalent to:</p>\n\n<pre><code>val myArray = arrayOf(\"data\", \"foo\")\nval mySet = setOf(*myArray)\n\n// Equivalent to\nval mySet = setOf(\"data\", \"foo\")\n\n// Multiple spreads [\"data\", \"foo\", \"bar\", \"data\", \"foo\"]\nval mySet = setOf(*myArray, \"bar\", *myArray)\n</code></pre>\n\n<p>Passing no parameters <code>setOf()</code> results in an empty set.</p>\n\n<p>In addition to <code>setOf</code>, you can also use any of these for a specific hash type:</p>\n\n<pre><code>hashSetOf()\nlinkedSetOf()\nmutableSetOf()\nsortableSetOf()\n</code></pre>\n\n<p>This is how to define the collection item type explicitly.</p>\n\n<pre><code>setOf&lt;String&gt;()\nhashSetOf&lt;MyClass&gt;()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13125278,"reputation":1011,"user_id":9481500,"display_name":"Stypox"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614869600,"creation_date":1614869600,"answer_id":66477510,"question_id":3064423,"body_markdown":"If you need to build an immutable set with only one element inside it, you can use `Collections.singleton(...)`. Here is an example:\r\n\r\n```java\r\nSet&lt;String&gt; mySet = Collections.singleton(&quot;Have a good day :-)&quot;);\r\n```\r\n\r\n&lt;sub&gt;&lt;sub&gt;This doesn&#39;t answer the original question but might be useful to someone (it would have been at least to me). If you think this answer does not fit just tell me and I will delete it.&lt;/sub&gt;&lt;/sub&gt;","title":"How to convert an Array to a Set in Java","body":"<p>If you need to build an immutable set with only one element inside it, you can use <code>Collections.singleton(...)</code>. Here is an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;String&gt; mySet = Collections.singleton(&quot;Have a good day :-)&quot;);\n</code></pre>\n<p><sub><sub>This doesn't answer the original question but might be useful to someone (it would have been at least to me). If you think this answer does not fit just tell me and I will delete it.</sub></sub></p>\n"}],"owner":{"display_name":"user130076"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":772182,"favorite_count":0,"down_vote_count":1,"up_vote_count":831,"accepted_answer_id":3064447,"answer_count":19,"score":830,"last_activity_date":1697606700,"creation_date":1276799036,"question_id":3064423,"body_markdown":"I would like to convert an array to a Set in Java. There are some obvious ways of doing this (i.e. with a loop) but I would like something a bit neater, something like:\r\n\r\n    java.util.Arrays.asList(Object[] a);\r\n\r\nAny ideas?\r\n\r\n\r\n\r\n","title":"How to convert an Array to a Set in Java","body":"<p>I would like to convert an array to a Set in Java. There are some obvious ways of doing this (i.e. with a loop) but I would like something a bit neater, something like:</p>\n\n<pre><code>java.util.Arrays.asList(Object[] a);\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["java","spring-boot","cloudevents"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1697290647,"post_id":77252316,"comment_id":136262833,"body_markdown":"Why use REST instead of a message queue such Kafka or NATS?","body":"Why use REST instead of a message queue such Kafka or NATS?"},{"owner":{"account_id":28150060,"reputation":23,"user_id":21511793,"display_name":"Ayush Gupta"},"score":0,"creation_date":1697605999,"post_id":77252316,"comment_id":136299264,"body_markdown":"The URL on which I want to send my cloud Event belongs to KNative API, which will perform certain processing based on cloud-event data.","body":"The URL on which I want to send my cloud Event belongs to KNative API, which will perform certain processing based on cloud-event data."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1697641467,"post_id":77252316,"comment_id":136306083,"body_markdown":"KNative also supports message queues","body":"KNative also supports message queues"}],"answers":[{"tags":[],"owner":{"account_id":28150060,"reputation":23,"user_id":21511793,"display_name":"Ayush Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697606133,"creation_date":1696910393,"answer_id":77262855,"question_id":77252316,"body_markdown":"Earlier I was trying to send a CloudEvent object directly which I guess not supported by spring boot (I also rovided all necessary dependencies in pom.xml) but it was not working. But cloud event is only a json data with some specific field like specVersion, type etc. in it&#39;s header, So i created a json structure where all these fields (ce-specVersion, ce-type etc) I put in header and then send this using restTemplate and it worked like below -\r\n```\r\n    import org.springframework.http.HttpEntity;\r\n    import org.springframework.http.HttpHeaders;\r\n    import org.springframework.http.MediaType;\r\n    import java.nio.charset.StandardCharsets;\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.setContentType(MediaType.APPLICATION_JSON);\r\n    headers.set(&quot;ce-specversion&quot;, &quot;1.0&quot;);\r\n    // Set Remaining fields\r\n\r\n    byte[] bytesData = \r\n    JSON_DATA_IN_FORM_OF_STRING.getBytes(StandardCharsets.UTF_8);\r\n    HttpEntity&lt;byte[]&gt; httpEntity = new HttpEntity&lt;&gt;(bytesData, headers);\r\n\r\n    restTemplate.postForLocation(sinkUrl, httpEntity);\r\n```\r\n\r\nBut remember one thing if you are sending any field in header then it should contain &#39;ce-&#39; as prefix (Apart from the Data that we are sending in HttpEntity) like in my case there was one key &#39;partitionKey&#39; so I send it as &#39;ce-partitionKey&#39;.","title":"Cloud event transfer over an URL in spring boot","body":"<p>Earlier I was trying to send a CloudEvent object directly which I guess not supported by spring boot (I also rovided all necessary dependencies in pom.xml) but it was not working. But cloud event is only a json data with some specific field like specVersion, type etc. in it's header, So i created a json structure where all these fields (ce-specVersion, ce-type etc) I put in header and then send this using restTemplate and it worked like below -</p>\n<pre><code>    import org.springframework.http.HttpEntity;\n    import org.springframework.http.HttpHeaders;\n    import org.springframework.http.MediaType;\n    import java.nio.charset.StandardCharsets;\n\n    HttpHeaders headers = new HttpHeaders();\n    headers.setContentType(MediaType.APPLICATION_JSON);\n    headers.set(&quot;ce-specversion&quot;, &quot;1.0&quot;);\n    // Set Remaining fields\n\n    byte[] bytesData = \n    JSON_DATA_IN_FORM_OF_STRING.getBytes(StandardCharsets.UTF_8);\n    HttpEntity&lt;byte[]&gt; httpEntity = new HttpEntity&lt;&gt;(bytesData, headers);\n\n    restTemplate.postForLocation(sinkUrl, httpEntity);\n</code></pre>\n<p>But remember one thing if you are sending any field in header then it should contain 'ce-' as prefix (Apart from the Data that we are sending in HttpEntity) like in my case there was one key 'partitionKey' so I send it as 'ce-partitionKey'.</p>\n"}],"owner":{"account_id":28150060,"reputation":23,"user_id":21511793,"display_name":"Ayush Gupta"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697606133,"creation_date":1696739037,"question_id":77252316,"body_markdown":"I have one cloud event in my code which contains byte data, now I want to send this cloud event to a URL. I&#39;ve tried Feign client and rest template but not able to send the cloud event. Can anyone help me here, how can I do this?\r\nIn Quarkus I used @RegisterRestClien and @RestClient Combination to send it and it works perfectly but how can I send it in spring boot?","title":"Cloud event transfer over an URL in spring boot","body":"<p>I have one cloud event in my code which contains byte data, now I want to send this cloud event to a URL. I've tried Feign client and rest template but not able to send the cloud event. Can anyone help me here, how can I do this?\nIn Quarkus I used @RegisterRestClien and @RestClient Combination to send it and it works perfectly but how can I send it in spring boot?</p>\n"},{"tags":["java","maven","osgi"],"answers":[{"comments":[{"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"score":1,"creation_date":1436964072,"post_id":31408708,"comment_id":50831636,"body_markdown":"The bundle fragment is not needed either. You can ship the configuration file along with your application binaries and pass the location as a system property argument (&quot;-D&quot;; binding specific).","body":"The bundle fragment is not needed either. You can ship the configuration file along with your application binaries and pass the location as a system property argument (&quot;-D&quot;; binding specific)."},{"owner":{"account_id":104426,"reputation":6829,"user_id":279204,"accept_rate":69,"display_name":"timothyclifford"},"score":0,"creation_date":1436982178,"post_id":31408708,"comment_id":50844540,"body_markdown":"Out of interest, I tried switching to pax-logging but now getting the following when I try and start my bundle - `org.osgi.framework.BundleException: Unable to resolve com.felix.test [18](R 18.0): missing requirement [com.felix.test [18](R 18.0)] osgi.wiring.package; (osgi.wiring.package=com.ibm.uvm.tools) Unresolved requirements: [[com.felix.test [18](R 18.0)] osgi.wiring.package; (osgi.wiring.package=com.ibm.uvm.tools)]` any ideas?","body":"Out of interest, I tried switching to pax-logging but now getting the following when I try and start my bundle - <code>org.osgi.framework.BundleException: Unable to resolve com.felix.test [18](R 18.0): missing requirement [com.felix.test [18](R 18.0)] osgi.wiring.package; (osgi.wiring.package=com.ibm.uvm.tools) Unresolved requirements: [[com.felix.test [18](R 18.0)] osgi.wiring.package; (osgi.wiring.package=com.ibm.uvm.tools)]</code> any ideas?"},{"owner":{"account_id":892776,"reputation":19529,"user_id":930728,"accept_rate":60,"display_name":"Christian Schneider"},"score":1,"creation_date":1436987126,"post_id":31408708,"comment_id":50847409,"body_markdown":"Note sure what you did to get this required package. Slf4j and pax-logging should not need that. As I have read from your new question I think you are configuring the bundle plugin incorrectly.","body":"Note sure what you did to get this required package. Slf4j and pax-logging should not need that. As I have read from your new question I think you are configuring the bundle plugin incorrectly."},{"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"score":1,"creation_date":1437030823,"post_id":31408708,"comment_id":50863540,"body_markdown":"@timothyclifford E.g. with a Java Util Logging binding you can use the following command line argument `-Djava.util.logging.config.file=&lt;installation-dir&gt;/&lt;conf-dir&gt;/logging.properties` or e.g. with a Log4J 2 binding you can use: `-Dlog4j.configurationFile=&lt;installation-dir&gt;/&lt;conf-dir&gt;/log4j2.xml`","body":"@timothyclifford E.g. with a Java Util Logging binding you can use the following command line argument <code>-Djava.util.logging.config.file=&lt;installation-dir&gt;&#47;&lt;conf-dir&zwnj;&#8203;&gt;&#47;logging.properties</code> or e.g. with a Log4J 2 binding you can use: <code>-Dlog4j.configurationFile=&lt;installation-dir&gt;&#47;&lt;conf-dir&gt;&#47;log4&zwnj;&#8203;j2.xml</code>"}],"tags":[],"owner":{"account_id":892776,"reputation":19529,"user_id":930728,"accept_rate":60,"display_name":"Christian Schneider"},"comment_count":4,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1436937779,"creation_date":1436882056,"answer_id":31408708,"question_id":31406042,"body_markdown":"Need to correct myself as slf4j indeed provides bundles now as Neil pointed out. Not sure how well it works though. I found some explanation [how to install slf4j for OSGi here][1]. It does not look very clean to me though. You need to create a bundle fragment for the configuration. Which means you can not change it at runtime.\r\n\r\nSo I still would rather recommend to use [pax-logging][2] at runtime instead. It implements the slf4j api as well as other logging APIs. As backend it uses log4j and configures it via config admin. So you do not need hacks for the logging config and can change it at runtime.\r\n\r\n\r\n  [1]: http://blog.dbfconsult.be/?p=5\r\n  [2]: https://ops4j1.jira.com/wiki/display/paxlogging/Pax+Logging","title":"OSGI org.slf4j.impl dependency","body":"<p>Need to correct myself as slf4j indeed provides bundles now as Neil pointed out. Not sure how well it works though. I found some explanation <a href=\"http://blog.dbfconsult.be/?p=5\" rel=\"nofollow\">how to install slf4j for OSGi here</a>. It does not look very clean to me though. You need to create a bundle fragment for the configuration. Which means you can not change it at runtime.</p>\n\n<p>So I still would rather recommend to use <a href=\"https://ops4j1.jira.com/wiki/display/paxlogging/Pax+Logging\" rel=\"nofollow\">pax-logging</a> at runtime instead. It implements the slf4j api as well as other logging APIs. As backend it uses log4j and configures it via config admin. So you do not need hacks for the logging config and can change it at runtime.</p>\n"},{"tags":[],"owner":{"account_id":124062,"reputation":23813,"user_id":318921,"accept_rate":67,"display_name":"Neil Bartlett"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1436912142,"creation_date":1436912142,"answer_id":31418354,"question_id":31406042,"body_markdown":"Slf4j has an unusual design (some might say a *bad* design, ahem). It is an API bundle that depends on an implementation package, namely `org.slf4j.impl`.\r\n\r\nYou need to install an additional bundle that implements the Slf4j API. There are lots of choices here... for example `slf4j-simple` is a basic implementation, whereas `slf4j-jdk14` uses the Java 1.4 `java.util.logging` back end, etc.\r\n\r\n[Logback][1] also contains an implementation of the API.\r\n\r\n\r\n  [1]: http://logback.qos.ch/","title":"OSGI org.slf4j.impl dependency","body":"<p>Slf4j has an unusual design (some might say a <em>bad</em> design, ahem). It is an API bundle that depends on an implementation package, namely <code>org.slf4j.impl</code>.</p>\n\n<p>You need to install an additional bundle that implements the Slf4j API. There are lots of choices here... for example <code>slf4j-simple</code> is a basic implementation, whereas <code>slf4j-jdk14</code> uses the Java 1.4 <code>java.util.logging</code> back end, etc.</p>\n\n<p><a href=\"http://logback.qos.ch/\" rel=\"noreferrer\">Logback</a> also contains an implementation of the API.</p>\n"},{"tags":[],"owner":{"account_id":286782,"reputation":3674,"user_id":586229,"accept_rate":20,"display_name":"hoijui"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1513850576,"creation_date":1513850576,"answer_id":47922420,"question_id":31406042,"body_markdown":"I had this same error message, and found out that it was due to bad bundle plugin configuration (as mentioned by @Christian_Schneider).\r\n\r\n### My situation\r\n\r\nSo i had roughly this error message when deploying on Karaf:\r\n\r\n&gt; missing requirement ... Unresolved requirements:  ... osgi.wiring.package=org.slf4j.impl\r\n\r\nMy modules _pom.xml_ looked like this:\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;${slf4j_version}&lt;/version&gt;\r\n\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\t...\r\n\r\n\t&lt;plugin&gt;\r\n\t\t&lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\r\n\t\t&lt;configuration&gt;\r\n\t\t\t&lt;instructions&gt;\r\n\t\t\t\t&lt;Private-Package&gt;*&lt;/Private-Package&gt;\r\n\t\t\t&lt;/instructions&gt;\r\n\t\t&lt;/configuration&gt;\r\n\t&lt;/plugin&gt;\r\n\r\n### Solution\r\n_credits @jbonofre from the karaf community_\r\n\r\nI just repaced `&lt;Private-Package&gt;*&lt;/Private-Package&gt;` with `&lt;Export-Package&gt;&lt;/Export-Package&gt;`, to get:\r\n\r\n\t&lt;plugin&gt;\r\n\t\t&lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\r\n\t\t&lt;configuration&gt;\r\n\t\t\t&lt;instructions&gt;\r\n\t\t\t\t&lt;Export-Package&gt;&lt;/Export-Package&gt;\r\n\t\t\t&lt;/instructions&gt;\r\n\t\t&lt;/configuration&gt;\r\n\t&lt;/plugin&gt;\r\n\r\nand consequently the import of `org.slf4j.impl` in my bundles _manifest.mf_ disappeared, leaving only an import to `org.slf4j`. This is provided by PAX Logging, which is installed by default on karaf.","title":"OSGI org.slf4j.impl dependency","body":"<p>I had this same error message, and found out that it was due to bad bundle plugin configuration (as mentioned by @Christian_Schneider).</p>\n\n<h3>My situation</h3>\n\n<p>So i had roughly this error message when deploying on Karaf:</p>\n\n<blockquote>\n  <p>missing requirement ... Unresolved requirements:  ... osgi.wiring.package=org.slf4j.impl</p>\n</blockquote>\n\n<p>My modules <em>pom.xml</em> looked like this:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n    &lt;version&gt;${slf4j_version}&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n\n...\n\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;instructions&gt;\n            &lt;Private-Package&gt;*&lt;/Private-Package&gt;\n        &lt;/instructions&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<h3>Solution</h3>\n\n<p><em>credits @jbonofre from the karaf community</em></p>\n\n<p>I just repaced <code>&lt;Private-Package&gt;*&lt;/Private-Package&gt;</code> with <code>&lt;Export-Package&gt;&lt;/Export-Package&gt;</code>, to get:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;instructions&gt;\n            &lt;Export-Package&gt;&lt;/Export-Package&gt;\n        &lt;/instructions&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>and consequently the import of <code>org.slf4j.impl</code> in my bundles <em>manifest.mf</em> disappeared, leaving only an import to <code>org.slf4j</code>. This is provided by PAX Logging, which is installed by default on karaf.</p>\n"},{"tags":[],"owner":{"account_id":16399288,"reputation":11,"user_id":11845804,"display_name":"ARVIND KUMAR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697605902,"creation_date":1697605902,"answer_id":77313621,"question_id":31406042,"body_markdown":"I am using **slf4j-api** bundle in my AEM local instance, and figure out this **slf4j-api** bundle in not Active status.\r\nIssue pic\r\n[![enter image description here][1]][1]\r\n\r\nAfter googling many blogs &amp; question post here, using this post I am able to resolve this issue\r\n\r\n**Steps**\r\n\r\n 1. Download the **slf4j-simple** this jar bundle from [MVN Repository][2]\r\n 2. Installed in my AEM local instance and after 30 sec refresh, this issue resolved\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tCM6X.png\r\n  [2]: https://mvnrepository.com/artifact/org.slf4j/slf4j-simple%20link","title":"OSGI org.slf4j.impl dependency","body":"<p>I am using <strong>slf4j-api</strong> bundle in my AEM local instance, and figure out this <strong>slf4j-api</strong> bundle in not Active status.\nIssue pic\n<a href=\"https://i.stack.imgur.com/tCM6X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tCM6X.png\" alt=\"enter image description here\" /></a></p>\n<p>After googling many blogs &amp; question post here, using this post I am able to resolve this issue</p>\n<p><strong>Steps</strong></p>\n<ol>\n<li>Download the <strong>slf4j-simple</strong> this jar bundle from <a href=\"https://mvnrepository.com/artifact/org.slf4j/slf4j-simple%20link\" rel=\"nofollow noreferrer\">MVN Repository</a></li>\n<li>Installed in my AEM local instance and after 30 sec refresh, this issue resolved</li>\n</ol>\n"}],"owner":{"account_id":104426,"reputation":6829,"user_id":279204,"accept_rate":69,"display_name":"timothyclifford"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6614,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":31418354,"answer_count":4,"score":3,"last_activity_date":1697605902,"creation_date":1436875376,"question_id":31406042,"body_markdown":"I&#39;m new to OSGI (sorry) and having a few issues trying to deploy my package and related dependencies.\r\n\r\nThis is my POM:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.felix.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;com.felix.test&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;bundle&lt;/packaging&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\r\n                &lt;artifactId&gt;org.osgi.core&lt;/artifactId&gt;\r\n                &lt;version&gt;1.0.0&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.5&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\r\n                &lt;artifactId&gt;org.apache.felix.scr.annotations&lt;/artifactId&gt;\r\n                &lt;version&gt;1.9.6&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n                &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n                &lt;version&gt;4.5&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;\r\n                &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\r\n                &lt;version&gt;2.10.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n                &lt;version&gt;3.4&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.5&lt;/source&gt;\r\n                        &lt;target&gt;1.5&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.5.4&lt;/version&gt;\r\n                    &lt;extensions&gt;true&lt;/extensions&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;instructions&gt;\r\n                            &lt;Export-Package&gt;\r\n                                com.felix.test.search\r\n                            &lt;/Export-Package&gt;\r\n                            &lt;Bundle-SymbolicName&gt;\r\n                                ${project.artifactId}\r\n                            &lt;/Bundle-SymbolicName&gt;\r\n                            &lt;Bundle-Activator&gt;\r\n                                com.felix.test.Activator\r\n                            &lt;/Bundle-Activator&gt;\r\n                        &lt;/instructions&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nThen I&#39;m bundling this using the Maven command:\r\n\r\n&gt; mvn org.apache.felix:maven-bundle-plugin:bundleall\r\n\r\nThis is successful and generates my bundle as well as 3 dependency bundles:\r\n\r\n - net.sf.ehcache_2.10.0.jar\r\n - org.apache.commons.lang3_3.4.0.jar\r\n - slf4j.api_1.7.7.jar\r\n\r\nThis seems OK and I can install and start the first two but when I try and start slf4j I get the following exception:\r\n\r\n&gt; org.osgi.framework.BundleException: Unable to resolve slf4j.api [25](R\r\n&gt; 25.0): missing requirement [slf4j.api [25](R 25.0)] osgi.wiring.package;\r\n&gt; (&amp;(osgi.wiring.package=org.slf4j.impl)(version&gt;=1.6.0)) Unresolved\r\n&gt; requirements: [[slf4j.api [25](R 25.0)] osgi.wiring.package;\r\n&gt; (&amp;(osgi.wiring.package=org.slf4j.impl)(version&gt;=1.6.0))]\r\n\r\nI&#39;m pretty sure I&#39;m missing something very simple but can&#39;t pin it down. Any help would be much appreciated!\r\n","title":"OSGI org.slf4j.impl dependency","body":"<p>I'm new to OSGI (sorry) and having a few issues trying to deploy my package and related dependencies.</p>\n\n<p>This is my POM:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.felix.test&lt;/groupId&gt;\n    &lt;artifactId&gt;com.felix.test&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;bundle&lt;/packaging&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\n            &lt;artifactId&gt;org.osgi.core&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;2.5&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\n            &lt;artifactId&gt;org.apache.felix.scr.annotations&lt;/artifactId&gt;\n            &lt;version&gt;1.9.6&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n            &lt;version&gt;4.5&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;\n            &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\n            &lt;version&gt;2.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.4&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.5&lt;/source&gt;\n                    &lt;target&gt;1.5&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5.4&lt;/version&gt;\n                &lt;extensions&gt;true&lt;/extensions&gt;\n                &lt;configuration&gt;\n                    &lt;instructions&gt;\n                        &lt;Export-Package&gt;\n                            com.felix.test.search\n                        &lt;/Export-Package&gt;\n                        &lt;Bundle-SymbolicName&gt;\n                            ${project.artifactId}\n                        &lt;/Bundle-SymbolicName&gt;\n                        &lt;Bundle-Activator&gt;\n                            com.felix.test.Activator\n                        &lt;/Bundle-Activator&gt;\n                    &lt;/instructions&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Then I'm bundling this using the Maven command:</p>\n\n<blockquote>\n  <p>mvn org.apache.felix:maven-bundle-plugin:bundleall</p>\n</blockquote>\n\n<p>This is successful and generates my bundle as well as 3 dependency bundles:</p>\n\n<ul>\n<li>net.sf.ehcache_2.10.0.jar</li>\n<li>org.apache.commons.lang3_3.4.0.jar</li>\n<li>slf4j.api_1.7.7.jar</li>\n</ul>\n\n<p>This seems OK and I can install and start the first two but when I try and start slf4j I get the following exception:</p>\n\n<blockquote>\n  <p>org.osgi.framework.BundleException: Unable to resolve slf4j.api [25](R\n  25.0): missing requirement [slf4j.api [25](R 25.0)] osgi.wiring.package;\n  (&amp;(osgi.wiring.package=org.slf4j.impl)(version>=1.6.0)) Unresolved\n  requirements: [[slf4j.api [25](R 25.0)] osgi.wiring.package;\n  (&amp;(osgi.wiring.package=org.slf4j.impl)(version>=1.6.0))]</p>\n</blockquote>\n\n<p>I'm pretty sure I'm missing something very simple but can't pin it down. Any help would be much appreciated!</p>\n"},{"tags":["java","python","ant"],"comments":[{"owner":{"account_id":381573,"reputation":43076,"user_id":736308,"accept_rate":71,"display_name":"cdarke"},"score":0,"creation_date":1491313638,"post_id":43208662,"comment_id":73489745,"body_markdown":"Check that your `%path%` environment variable contains the directory that `python.exe` resides in.","body":"Check that your <code>%path%</code> environment variable contains the directory that <code>python.exe</code> resides in."},{"owner":{"account_id":8618059,"reputation":335,"user_id":6454129,"accept_rate":74,"display_name":"any"},"score":0,"creation_date":1491315467,"post_id":43208662,"comment_id":73491191,"body_markdown":"@cdarke my Path value is `C:\\Program Files\\Java\\jdk1.8.0\\bin;C:\\Program Files\\pl\\bin;C:\\Python22` and my python.exe is in C:\\Python22","body":"@cdarke my Path value is <code>C:\\Program Files\\Java\\jdk1.8.0\\bin;C:\\Program Files\\pl\\bin;C:\\Python22</code> and my python.exe is in C:\\Python22"},{"owner":{"account_id":3348927,"reputation":4006,"user_id":2813395,"accept_rate":57,"display_name":"Kasun Kodagoda"},"score":0,"creation_date":1491499851,"post_id":43208662,"comment_id":73592665,"body_markdown":"Formatted the code.","body":"Formatted the code."},{"owner":{"account_id":4225446,"reputation":198,"user_id":3459078,"display_name":"zorze"},"score":0,"creation_date":1516700702,"post_id":43208662,"comment_id":83784811,"body_markdown":"https://stackoverflow.com/questions/47952935/java-io-ioexception-cannot-run-program-python-createprocess-error-2-the-sys/47953300#47953300 Only this worked for me!","body":"<a href=\"https://stackoverflow.com/questions/47952935/java-io-ioexception-cannot-run-program-python-createprocess-error-2-the-sys/47953300#47953300\" title=\"java io ioexception cannot run program python createprocess error 2 the sys\">stackoverflow.com/questions/47952935/&hellip;</a> Only this worked for me!"}],"answers":[{"comments":[{"owner":{"account_id":8618059,"reputation":335,"user_id":6454129,"accept_rate":74,"display_name":"any"},"score":0,"creation_date":1491315621,"post_id":43209761,"comment_id":73491310,"body_markdown":"I changed `python` to `python.exe` but still I have a problem.","body":"I changed <code>python</code> to <code>python.exe</code> but still I have a problem."},{"owner":{"account_id":2702906,"reputation":22668,"user_id":2333222,"display_name":"SubOptimal"},"score":0,"creation_date":1491315758,"post_id":43209761,"comment_id":73491427,"body_markdown":"The executable must be in the executable path. See the updated answer. I blindly assumed it would be the case already.","body":"The executable must be in the executable path. See the updated answer. I blindly assumed it would be the case already."},{"owner":{"account_id":8618059,"reputation":335,"user_id":6454129,"accept_rate":74,"display_name":"any"},"score":0,"creation_date":1491315844,"post_id":43209761,"comment_id":73491492,"body_markdown":"my Path value is C:\\Program Files\\Java\\jdk1.8.0\\bin;C:\\Program Files\\pl\\bin;C:\\Python22 and my python.exe is in C:\\Python22","body":"my Path value is C:\\Program Files\\Java\\jdk1.8.0\\bin;C:\\Program Files\\pl\\bin;C:\\Python22 and my python.exe is in C:\\Python22"},{"owner":{"account_id":8618059,"reputation":335,"user_id":6454129,"accept_rate":74,"display_name":"any"},"score":0,"creation_date":1491316181,"post_id":43209761,"comment_id":73491786,"body_markdown":"Does it need to I change `${dsltrans.install.path}:./backend/generated` in the above code?","body":"Does it need to I change <code>${dsltrans.install.path}:.&#47;backend&#47;generated</code> in the above code?"},{"owner":{"account_id":2702906,"reputation":22668,"user_id":2333222,"display_name":"SubOptimal"},"score":0,"creation_date":1491316627,"post_id":43209761,"comment_id":73492157,"body_markdown":"@any I add a working example. Seems in the session you execute `ant` the path to `python.exe` is not set as expected.","body":"@any I add a working example. Seems in the session you execute <code>ant</code> the path to <code>python.exe</code> is not set as expected."},{"owner":{"account_id":8618059,"reputation":335,"user_id":6454129,"accept_rate":74,"display_name":"any"},"score":0,"creation_date":1491317336,"post_id":43209761,"comment_id":73492771,"body_markdown":"To clarify I use this code: https://github.com/levilucio/SyVOLT/blob/master/eclipse_integration/verify_fam_extended.xml\nand I changed line 6 and 73.","body":"To clarify I use this code: <a href=\"https://github.com/levilucio/SyVOLT/blob/master/eclipse_integration/verify_fam_extended.xml\" rel=\"nofollow noreferrer\">github.com/levilucio/SyVOLT/blob/master/eclipse_integration/&zwnj;&#8203;&hellip;</a> and I changed line 6 and 73."},{"owner":{"account_id":8618059,"reputation":335,"user_id":6454129,"accept_rate":74,"display_name":"any"},"score":0,"creation_date":1491317891,"post_id":43209761,"comment_id":73493275,"body_markdown":"if your means of path is user environmet value, this includes C:\\ProgramFiles\\Python22 this is the picture\nhttps://www.photobox.co.uk/my/photo?album_id=4796488059&amp;photo_id=21647968793","body":"if your means of path is user environmet value, this includes C:\\ProgramFiles\\Python22 this is the picture <a href=\"https://www.photobox.co.uk/my/photo?album_id=4796488059&amp;photo_id=21647968793\" rel=\"nofollow noreferrer\">photobox.co.uk/my/&hellip;</a>"},{"owner":{"account_id":8618059,"reputation":335,"user_id":6454129,"accept_rate":74,"display_name":"any"},"score":0,"creation_date":1491319075,"post_id":43209761,"comment_id":73494234,"body_markdown":"I don&#39;t understand `execute in a command session` part in your post.","body":"I don&#39;t understand <code>execute in a command session</code> part in your post."},{"owner":{"account_id":2702906,"reputation":22668,"user_id":2333222,"display_name":"SubOptimal"},"score":0,"creation_date":1491374034,"post_id":43209761,"comment_id":73517304,"body_markdown":"@any Click on `Windows Start button` select `run...` type `cmd.exe` click `ok` go to your project directory (the one which contains the build.xml). I have not checked the github repository. How do you call `ant` to build the project?","body":"@any Click on <code>Windows Start button</code> select <code>run...</code> type <code>cmd.exe</code> click <code>ok</code> go to your project directory (the one which contains the build.xml). I have not checked the github repository. How do you call <code>ant</code> to build the project?"},{"owner":{"account_id":2702906,"reputation":22668,"user_id":2333222,"display_name":"SubOptimal"},"score":0,"creation_date":1491374472,"post_id":43209761,"comment_id":73517510,"body_markdown":"@any I amend the `build.xml` to output the `PATH` setting when `ant` is running.","body":"@any I amend the <code>build.xml</code> to output the <code>PATH</code> setting when <code>ant</code> is running."}],"tags":[],"owner":{"account_id":2702906,"reputation":22668,"user_id":2333222,"display_name":"SubOptimal"},"comment_count":10,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491374418,"creation_date":1491315190,"answer_id":43209761,"question_id":43208662,"body_markdown":"**edit** `python.exe` must be in a directory defined in the executable path variable `PATH`.\r\n\r\nFollowing working example assumes the presence of `C:\\Python33\\python.exe`\r\n\r\n    &lt;project name=&quot;demo&quot; default=&quot;main&quot; basedir=&quot;.&quot;&gt;\r\n      &lt;property environment=&quot;env&quot; /&gt;\r\n      &lt;echo&gt;PATH is set as: ${env.PATH}&lt;/echo&gt;\r\n\r\n      &lt;target name=&quot;main&quot;&gt;\r\n        &lt;exec dir=&quot;backend/generated&quot; executable=&quot;python&quot;&gt;\r\n          &lt;arg line=&quot;--version&quot;/&gt;\r\n        &lt;/exec&gt;        \r\n      &lt;/target&gt;                                \r\n    &lt;/project&gt;\r\n\r\nexecute in a command session\r\n\r\n    set PATH=C:\\Python33;%PATH%\r\n    ant \r\n\r\noutput\r\n\r\n    Buildfile: X:\\temp\\build.xml\r\n         [echo] PATH is set as: C:\\Python33;...\r\n    ...\r\n    main:\r\n         [exec] Python 3.3.0\r\n\r\n**edit** Just checked. The executable can be `executable=&quot;python&quot;` or `executable=&quot;python.exe&quot;`. So @cdarke is right the issue is that `python.exe` is not in `PATH`.","title":"CreateProcess error=2, Can not run program &quot;python&quot; on Ant","body":"<p><strong>edit</strong> <code>python.exe</code> must be in a directory defined in the executable path variable <code>PATH</code>.</p>\n\n<p>Following working example assumes the presence of <code>C:\\Python33\\python.exe</code></p>\n\n<pre><code>&lt;project name=\"demo\" default=\"main\" basedir=\".\"&gt;\n  &lt;property environment=\"env\" /&gt;\n  &lt;echo&gt;PATH is set as: ${env.PATH}&lt;/echo&gt;\n\n  &lt;target name=\"main\"&gt;\n    &lt;exec dir=\"backend/generated\" executable=\"python\"&gt;\n      &lt;arg line=\"--version\"/&gt;\n    &lt;/exec&gt;        \n  &lt;/target&gt;                                \n&lt;/project&gt;\n</code></pre>\n\n<p>execute in a command session</p>\n\n<pre><code>set PATH=C:\\Python33;%PATH%\nant \n</code></pre>\n\n<p>output</p>\n\n<pre><code>Buildfile: X:\\temp\\build.xml\n     [echo] PATH is set as: C:\\Python33;...\n...\nmain:\n     [exec] Python 3.3.0\n</code></pre>\n\n<p><strong>edit</strong> Just checked. The executable can be <code>executable=\"python\"</code> or <code>executable=\"python.exe\"</code>. So @cdarke is right the issue is that <code>python.exe</code> is not in <code>PATH</code>.</p>\n"}],"owner":{"account_id":8618059,"reputation":335,"user_id":6454129,"accept_rate":74,"display_name":"any"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9476,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697605220,"creation_date":1491312486,"question_id":43208662,"body_markdown":"I have a `C:\\Users\\Sony\\Desktop\\Project\\Workspace\\testpython\\verify_fam_extended.xml:52: Execute failed: java.io.IOException: Cannot run program &quot;python&quot; (in directory &quot;C:\\Users\\Sony\\Desktop\\Project\\Workspace\\testpython\\backend\\generated&quot;): CreateProcess error=2, The system cannot find the file specified` error when I run my xml code through Ant.\r\n\r\n    &lt;exec dir=&quot;backend/generated&quot; executable=&quot;python&quot;&gt;\r\n        &lt;arg line=&quot;toplevel.py&quot;/&gt;\r\n\t\t&lt;env key=&quot;PYTHONPATH&quot; value=&quot;${dsltrans.install.path}:./backend/generated&quot;/&gt; \r\n\t&lt;/exec&gt;\r\n","title":"CreateProcess error=2, Can not run program &quot;python&quot; on Ant","body":"<p>I have a <code>C:\\Users\\Sony\\Desktop\\Project\\Workspace\\testpython\\verify_fam_extended.xml:52: Execute failed: java.io.IOException: Cannot run program \"python\" (in directory \"C:\\Users\\Sony\\Desktop\\Project\\Workspace\\testpython\\backend\\generated\"): CreateProcess error=2, The system cannot find the file specified</code> error when I run my xml code through Ant.</p>\n\n<pre><code>&lt;exec dir=\"backend/generated\" executable=\"python\"&gt;\n    &lt;arg line=\"toplevel.py\"/&gt;\n    &lt;env key=\"PYTHONPATH\" value=\"${dsltrans.install.path}:./backend/generated\"/&gt; \n&lt;/exec&gt;\n</code></pre>\n"},{"tags":["java","android","admob"],"comments":[{"owner":{"account_id":22415217,"reputation":185,"user_id":16623378,"display_name":"Quốc H&#249;ng"},"score":1,"creation_date":1697598351,"post_id":77313176,"comment_id":136298660,"body_markdown":"With Banner Ad you can remove directly the AdView from the container to remove it and don&#39;t forget call the AdView.destroy() to avoid memory leak.","body":"With Banner Ad you can remove directly the AdView from the container to remove it and don&#39;t forget call the AdView.destroy() to avoid memory leak."},{"owner":{"account_id":6955733,"reputation":173,"user_id":5336817,"display_name":"KGeeks"},"score":1,"creation_date":1697610286,"post_id":77313176,"comment_id":136299762,"body_markdown":"Can show the Close(X) icon on the top-right corner of the Banner Ad container, Destroy and Remove an adView from the Ad container while clicking on the Close icon.","body":"Can show the Close(X) icon on the top-right corner of the Banner Ad container, Destroy and Remove an adView from the Ad container while clicking on the Close icon."}],"answers":[{"tags":[],"owner":{"account_id":14200012,"reputation":139,"user_id":10258130,"display_name":"Amardurai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697605013,"creation_date":1697605013,"answer_id":77313572,"question_id":77313176,"body_markdown":"&gt; You can use the below code with your logic by setting the visibility\r\n&gt; to &quot;INVISIBLE,&quot; you hide the ad, but it can still request and load\r\n&gt; ads, which can be useful if the user decides to re-enable ads later.\r\n&gt; If you remove the AdView entirely, you&#39;ll need to re-add it to the\r\n&gt; layout when the user wants to see ads again.\r\n\r\n    AdView adView = findViewById(R.id.adView);\r\n    \r\n    // To hide the ad without violating AdMob policies\r\n    adView.setVisibility(View.INVISIBLE);\r\n    // or\r\n    adView.setVisibility(View.GONE); // Use this option with caution\r\n    \r\n    // To remove the ad completely\r\n    adView.setVisibility(View.GONE);\r\n    ViewGroup parentView = (ViewGroup) adView.getParent();\r\n    if (parentView != null) {\r\n        parentView.removeView(adView);\r\n    }","title":"AdMob how to remove a showing ad?","body":"<blockquote>\n<p>You can use the below code with your logic by setting the visibility\nto &quot;INVISIBLE,&quot; you hide the ad, but it can still request and load\nads, which can be useful if the user decides to re-enable ads later.\nIf you remove the AdView entirely, you'll need to re-add it to the\nlayout when the user wants to see ads again.</p>\n</blockquote>\n<pre><code>AdView adView = findViewById(R.id.adView);\n\n// To hide the ad without violating AdMob policies\nadView.setVisibility(View.INVISIBLE);\n// or\nadView.setVisibility(View.GONE); // Use this option with caution\n\n// To remove the ad completely\nadView.setVisibility(View.GONE);\nViewGroup parentView = (ViewGroup) adView.getParent();\nif (parentView != null) {\n    parentView.removeView(adView);\n}\n</code></pre>\n"}],"owner":{"account_id":16115791,"reputation":367,"user_id":11632959,"display_name":"dect"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697605013,"creation_date":1697596174,"question_id":77313176,"body_markdown":"I&#39;m developing a java android app that will contain a google admob banner ad at the bottom of the screen.\r\n\r\nI have developed all the code and the ads are already working... but I want to implement a feature that will allow the user to remove the ads... imagine something like a internal not monetary purchase.\r\n\r\nMy question is: **How do I remove the ad that is currently showing in my activity without violating any AdMob rule?**\r\n\r\nWhen the user starts an activity I simply dont initialize the ad, but if the ad is already showing how can I disabled it? I didn&#39;t find any official document about it, I just found some forums saying that setting the visibility to gone violates the rules...\r\n\r\nThanks!","title":"AdMob how to remove a showing ad?","body":"<p>I'm developing a java android app that will contain a google admob banner ad at the bottom of the screen.</p>\n<p>I have developed all the code and the ads are already working... but I want to implement a feature that will allow the user to remove the ads... imagine something like a internal not monetary purchase.</p>\n<p>My question is: <strong>How do I remove the ad that is currently showing in my activity without violating any AdMob rule?</strong></p>\n<p>When the user starts an activity I simply dont initialize the ad, but if the ad is already showing how can I disabled it? I didn't find any official document about it, I just found some forums saying that setting the visibility to gone violates the rules...</p>\n<p>Thanks!</p>\n"},{"tags":["java","immutability","cglib"],"comments":[{"owner":{"account_id":7709338,"reputation":420,"user_id":5839242,"display_name":"goodguy5"},"score":0,"creation_date":1457709173,"post_id":35943632,"comment_id":59543694,"body_markdown":"Can you make the objects final, or is that not what you&#39;re asking?","body":"Can you make the objects final, or is that not what you&#39;re asking?"},{"owner":{"account_id":1454594,"reputation":2902,"user_id":1520291,"accept_rate":87,"display_name":"Dmytro Titov"},"score":0,"creation_date":1457709317,"post_id":35943632,"comment_id":59543816,"body_markdown":"@goodguy5, no, the point is that immutability must be achieved at a run-time: I can&#39;t modify the source code of objects I&#39;m working with.","body":"@goodguy5, no, the point is that immutability must be achieved at a run-time: I can&#39;t modify the source code of objects I&#39;m working with."},{"owner":{"account_id":7709338,"reputation":420,"user_id":5839242,"display_name":"goodguy5"},"score":1,"creation_date":1457709576,"post_id":35943632,"comment_id":59543998,"body_markdown":"Have you tried using the immutator object outlined here: https://javax0.wordpress.com/2013/11/13/creating-immutable-objects-run-time/","body":"Have you tried using the immutator object outlined here: <a href=\"https://javax0.wordpress.com/2013/11/13/creating-immutable-objects-run-time/\" rel=\"nofollow noreferrer\">javax0.wordpress.com/2013/11/13/&hellip;</a>"},{"owner":{"account_id":1454594,"reputation":2902,"user_id":1520291,"accept_rate":87,"display_name":"Dmytro Titov"},"score":0,"creation_date":1457710527,"post_id":35943632,"comment_id":59544732,"body_markdown":"I&#39;ve tried, but it also has the same issue, e.g.:\n    `InnerClass innerClass = new InnerClass();`\n    `innerClass.setName(&quot;innerClass&quot;);`\n    `OuterClass outerClass = new OuterClass();`\n    `outerClass.setName(&quot;outerClass&quot;);`\n    `outerClass.setInnerClass(innerClass);`\n    `OuterClass immutable = Immutable.of(outerClass);`\n    `immutable.getInnerClass().setName(&quot;try&quot;);`","body":"I&#39;ve tried, but it also has the same issue, e.g.:     <code>InnerClass innerClass = new InnerClass();</code>     <code>innerClass.setName(&quot;innerClass&quot;);</code>     <code>OuterClass outerClass = new OuterClass();</code>     <code>outerClass.setName(&quot;outerClass&quot;);</code>     <code>outerClass.setInnerClass(innerClass);</code>     <code>OuterClass immutable = Immutable.of(outerClass);</code>     <code>immutable.getInnerClass().setName(&quot;try&quot;);</code>"},{"owner":{"account_id":7709338,"reputation":420,"user_id":5839242,"display_name":"goodguy5"},"score":0,"creation_date":1457711363,"post_id":35943632,"comment_id":59545354,"body_markdown":"And it needs to be nestable? So you can&#39;t make final OuterClass immutable = Immutable.of(outerClass); Otherwise, I&#39;m sorry I can&#39;t be more help :(","body":"And it needs to be nestable? So you can&#39;t make final OuterClass immutable = Immutable.of(outerClass); Otherwise, I&#39;m sorry I can&#39;t be more help :("}],"answers":[{"comments":[{"owner":{"account_id":1454594,"reputation":2902,"user_id":1520291,"accept_rate":87,"display_name":"Dmytro Titov"},"score":0,"creation_date":1458659099,"post_id":36053928,"comment_id":59953256,"body_markdown":"Well, it really works, thanks! But you have to handle two additional cases: final classes can&#39;t be proxified by CGLIB (e.g. String) and classes without parameterless-constructors also can&#39;t be proxified by CGLIB.","body":"Well, it really works, thanks! But you have to handle two additional cases: final classes can&#39;t be proxified by CGLIB (e.g. String) and classes without parameterless-constructors also can&#39;t be proxified by CGLIB."},{"owner":{"account_id":1454594,"reputation":2902,"user_id":1520291,"accept_rate":87,"display_name":"Dmytro Titov"},"score":1,"creation_date":1462360584,"post_id":36053928,"comment_id":61602381,"body_markdown":"FYI: I&#39;ve implemented such approach in the library: https://github.com/dtitov/CodeFreeze","body":"FYI: I&#39;ve implemented such approach in the library: <a href=\"https://github.com/dtitov/CodeFreeze\" rel=\"nofollow noreferrer\">github.com/dtitov/CodeFreeze</a>"}],"tags":[],"owner":{"account_id":207518,"reputation":654,"user_id":457429,"display_name":"Alex"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1458199230,"creation_date":1458199230,"answer_id":36053928,"question_id":35943632,"body_markdown":"You may traverse the object tree and use CGLIB to make each object immutable by using interceptor which skips required methods. The tough part though is to determine all methods which modify the object&#39;s state - for each object in the tree.\r\n\r\n    package ut.test;\r\n    \r\n    import static org.junit.Assert.assertEquals;\r\n    \r\n    import java.lang.reflect.Method;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import org.junit.Test;\r\n    \r\n    import com.google.common.collect.Lists;\r\n    \r\n    import net.sf.cglib.proxy.Enhancer;\r\n    import net.sf.cglib.proxy.MethodInterceptor;\r\n    import net.sf.cglib.proxy.MethodProxy;\r\n    \r\n    public class MyTest {\r\n        \r\n        public static class Inner {\r\n            private String data = &quot;hello&quot;;\r\n            \r\n            public Inner() {}\r\n            \r\n            public String getData() {\r\n                return data;\r\n            }\r\n            \r\n            public void setData(String data) {\r\n                this.data = data;\r\n            }\r\n    \r\n            @Override\r\n            public String toString() {\r\n                return data;\r\n            }\r\n            \r\n        }\r\n        \r\n        public static class Outer {\r\n            private List&lt;Inner&gt; list = Lists.newArrayList(new Inner());\r\n            \r\n            public Outer() {}\r\n            \r\n            public List&lt;Inner&gt; getList() {\r\n                return list;\r\n            }\r\n            \r\n            public void setList(List&lt;Inner&gt; list) {\r\n                this.list = list;\r\n            }\r\n        }\r\n        \r\n        public static class GetOnlyDelegatingMethodInterceptor implements MethodInterceptor {\r\n            private Object delegate;\r\n            \r\n            public GetOnlyDelegatingMethodInterceptor(Object delegate) {\r\n                this.delegate = delegate;\r\n            }\r\n            \r\n            @Override\r\n            public Object intercept(Object obj, Method method, Object[] args, MethodProxy proxy) throws Throwable {\r\n                if (method.getName().startsWith(&quot;get&quot;)) {\r\n                    return makeImmutable(proxy.invoke(delegate, args));\r\n                }\r\n                \r\n                if (method.getName().equals(&quot;toString&quot;)) {\r\n                    return proxy.invoke(delegate, args);\r\n                }\r\n                \r\n                if (method.getDeclaringClass().equals(Object.class)) {\r\n                    return proxy.invoke(delegate, args);\r\n                }\r\n                \r\n                // you may check for other methods here\r\n                \r\n                // skip all others\r\n                return null;\r\n            }\r\n        }\r\n        \r\n        private static Object makeImmutable(Object obj) {\r\n            if (obj == null) {\r\n                return obj;\r\n            }\r\n            \r\n            Enhancer e = new Enhancer();\r\n            e.setSuperclass(obj.getClass());\r\n            e.setCallback(new GetOnlyDelegatingMethodInterceptor(obj));\r\n            return e.create();\r\n        }\r\n        \r\n        @Test\r\n        public void testImmutable() {\r\n            Outer outerImmutable = (Outer) makeImmutable(new Outer());\r\n            \r\n            // this is initial state\r\n            assertEquals(outerImmutable.getList().toString(), &quot;[hello]&quot;);\r\n            \r\n            // trying to set empty list\r\n            outerImmutable.setList(new ArrayList&lt;&gt;());\r\n            // but it&#39;s still the same\r\n            assertEquals(outerImmutable.getList().toString(), &quot;[hello]&quot;);\r\n            \r\n            // going deeper\r\n            outerImmutable.getList().get(0).setData(&quot;bye!&quot;);\r\n            // but still no changes\r\n            assertEquals(outerImmutable.getList().toString(), &quot;[hello]&quot;);\r\n        }\r\n    }\r\n","title":"Create DEEP immutable object in runtime","body":"<p>You may traverse the object tree and use CGLIB to make each object immutable by using interceptor which skips required methods. The tough part though is to determine all methods which modify the object's state - for each object in the tree.</p>\n\n<pre><code>package ut.test;\n\nimport static org.junit.Assert.assertEquals;\n\nimport java.lang.reflect.Method;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.junit.Test;\n\nimport com.google.common.collect.Lists;\n\nimport net.sf.cglib.proxy.Enhancer;\nimport net.sf.cglib.proxy.MethodInterceptor;\nimport net.sf.cglib.proxy.MethodProxy;\n\npublic class MyTest {\n\n    public static class Inner {\n        private String data = \"hello\";\n\n        public Inner() {}\n\n        public String getData() {\n            return data;\n        }\n\n        public void setData(String data) {\n            this.data = data;\n        }\n\n        @Override\n        public String toString() {\n            return data;\n        }\n\n    }\n\n    public static class Outer {\n        private List&lt;Inner&gt; list = Lists.newArrayList(new Inner());\n\n        public Outer() {}\n\n        public List&lt;Inner&gt; getList() {\n            return list;\n        }\n\n        public void setList(List&lt;Inner&gt; list) {\n            this.list = list;\n        }\n    }\n\n    public static class GetOnlyDelegatingMethodInterceptor implements MethodInterceptor {\n        private Object delegate;\n\n        public GetOnlyDelegatingMethodInterceptor(Object delegate) {\n            this.delegate = delegate;\n        }\n\n        @Override\n        public Object intercept(Object obj, Method method, Object[] args, MethodProxy proxy) throws Throwable {\n            if (method.getName().startsWith(\"get\")) {\n                return makeImmutable(proxy.invoke(delegate, args));\n            }\n\n            if (method.getName().equals(\"toString\")) {\n                return proxy.invoke(delegate, args);\n            }\n\n            if (method.getDeclaringClass().equals(Object.class)) {\n                return proxy.invoke(delegate, args);\n            }\n\n            // you may check for other methods here\n\n            // skip all others\n            return null;\n        }\n    }\n\n    private static Object makeImmutable(Object obj) {\n        if (obj == null) {\n            return obj;\n        }\n\n        Enhancer e = new Enhancer();\n        e.setSuperclass(obj.getClass());\n        e.setCallback(new GetOnlyDelegatingMethodInterceptor(obj));\n        return e.create();\n    }\n\n    @Test\n    public void testImmutable() {\n        Outer outerImmutable = (Outer) makeImmutable(new Outer());\n\n        // this is initial state\n        assertEquals(outerImmutable.getList().toString(), \"[hello]\");\n\n        // trying to set empty list\n        outerImmutable.setList(new ArrayList&lt;&gt;());\n        // but it's still the same\n        assertEquals(outerImmutable.getList().toString(), \"[hello]\");\n\n        // going deeper\n        outerImmutable.getList().get(0).setData(\"bye!\");\n        // but still no changes\n        assertEquals(outerImmutable.getList().toString(), \"[hello]\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3044,"reputation":12486,"user_id":4308,"accept_rate":84,"display_name":"Benedikt Waldvogel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697604737,"creation_date":1552833226,"answer_id":55208195,"question_id":35943632,"body_markdown":"You can use `ImmutableProxy` of the [reflection-util][reflection-util] library.\r\n\r\n*Disclaimer: I’m one of the authors of this library!*\r\n\r\nExample:\r\n\r\n```java\r\npublic class Inner\r\n{\r\n    private String data = &quot;hello&quot;;\r\n    // getters and setters\r\n}\r\n```\r\n```java\r\npublic class Outer\r\n{\r\n    private List&lt;Inner&gt; list = Arrays.asList(new Inner());\r\n    // getters and setters\r\n}\r\n```\r\n\r\n```\r\nOuter outerImmutable = ImmutableProxy.create(new Outer());\r\nInner firstElement = outerImmutable.getList().get(0)\r\n\r\n// this is initial state\r\nassertThat(firstElement.getData()).isEqualTo(&quot;hello&quot;);\r\n\r\n// throws UnsupportedOperationException\r\nouterImmutable.setList(…);\r\n\r\n// throws UnsupportedOperationException\r\nfirstElement.setData(&quot;bye!&quot;);\r\n```\r\n\r\n[reflection-util]: https://github.com/cronn/reflection-util","title":"Create DEEP immutable object in runtime","body":"<p>You can use <code>ImmutableProxy</code> of the <a href=\"https://github.com/cronn/reflection-util\" rel=\"nofollow noreferrer\">reflection-util</a> library.</p>\n<p><em>Disclaimer: I’m one of the authors of this library!</em></p>\n<p>Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Inner\n{\n    private String data = &quot;hello&quot;;\n    // getters and setters\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Outer\n{\n    private List&lt;Inner&gt; list = Arrays.asList(new Inner());\n    // getters and setters\n}\n</code></pre>\n<pre><code>Outer outerImmutable = ImmutableProxy.create(new Outer());\nInner firstElement = outerImmutable.getList().get(0)\n\n// this is initial state\nassertThat(firstElement.getData()).isEqualTo(&quot;hello&quot;);\n\n// throws UnsupportedOperationException\nouterImmutable.setList(…);\n\n// throws UnsupportedOperationException\nfirstElement.setData(&quot;bye!&quot;);\n</code></pre>\n"}],"owner":{"account_id":1454594,"reputation":2902,"user_id":1520291,"accept_rate":87,"display_name":"Dmytro Titov"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1583,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":36053928,"answer_count":2,"score":8,"last_activity_date":1697604737,"creation_date":1457709026,"question_id":35943632,"body_markdown":"I need to create immutable copy of an object in runtime with Java. I made use of org.springframework.cglib.beans.ImmutableBean, which can create immutable copy of an object using CGLIB. \r\n\r\nBut the problem is that it provides &quot;first-level&quot; immutability: it disallows change of an input object&#39;s properties, **but** it allows to change inner objects (e.g. get collection and add an element to it or get inner object and modify it&#39;s parameters etc.)\r\n\r\nSo the question is: what&#39;s the correct way of creating deep (recursive) immutable copy of an object so that one can&#39;t change inner objects also (at any level of nesting)?","title":"Create DEEP immutable object in runtime","body":"<p>I need to create immutable copy of an object in runtime with Java. I made use of org.springframework.cglib.beans.ImmutableBean, which can create immutable copy of an object using CGLIB. </p>\n\n<p>But the problem is that it provides \"first-level\" immutability: it disallows change of an input object's properties, <strong>but</strong> it allows to change inner objects (e.g. get collection and add an element to it or get inner object and modify it's parameters etc.)</p>\n\n<p>So the question is: what's the correct way of creating deep (recursive) immutable copy of an object so that one can't change inner objects also (at any level of nesting)?</p>\n"},{"tags":["java","android","kotlin","audio","thumbnails"],"answers":[{"comments":[{"owner":{"account_id":26210323,"reputation":115,"user_id":19889305,"display_name":"bovietvidai"},"score":0,"creation_date":1687337555,"post_id":76520810,"comment_id":134921321,"body_markdown":"the code you provided me is just for fetching image, meanwhile I want to set audio thumbnail not get it","body":"the code you provided me is just for fetching image, meanwhile I want to set audio thumbnail not get it"}],"tags":[],"owner":{"account_id":17438290,"reputation":189,"user_id":12640900,"display_name":"Pratik PSB"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687331497,"creation_date":1687331497,"answer_id":76520810,"question_id":76511319,"body_markdown":"**Hello @bovietvidai, Hope you are doing well. Here I am adding my suggestion to your question.**\r\n\r\nOption 1:\r\n---------\r\nYou can create a `bitmap` by using the below code snippet.\r\n``` java\r\nBitmap image = ThumbnailUtils.createAudioThumbnail(file, MediaStore.Images.Thumbnails.MICRO_KIND);\r\n```\r\nin the above code snippet `file` object is the audio file. \r\n*********************\r\n\r\nOption 2:\r\n---------\r\nYou can fetch using a `MediaMetadataRetriever` by using the below code snippet.\r\n``` java\r\nMediaMetadataRetriever mmr = new MediaMetadataRetriever();\r\nbyte[] imgbyte;\r\nBitmap bitmp;\r\nBitmapFactory.Options option =new BitmapFactory.Options();\r\n    \r\nmmr.setDataSource(getApplicationContext(), uri);\r\nimgbyte = mmr.getEmbeddedPicture();\r\n    \r\n\r\nif (imgbyte != null) \r\n    bitmp = BitmapFactory.decodeByteArray(imgbyte, 0,imgbyte.length, option);\r\n```\r\n*********************\r\n\r\nOption 3:\r\n---------\r\nYou can fetch using a `Cursor` by using the below code snippet if you are fetching media items using `Cursor`.\r\n``` java\r\nCursor cursor = getContentResolver().query(MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI, \r\n    new String[] {MediaStore.Audio.Albums._ID, MediaStore.Audio.Albums.ALBUM_ART}, \r\n    MediaStore.Audio.Albums._ID+ &quot;=?&quot;, \r\n    new String[] {String.valueOf(albumId)}, \r\n    null);\r\n    \r\nif (cursor.moveToFirst()) {\r\n    String albumart = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Albums.ALBUM_ART)); \r\n    Bitmap bm = BitmapFactory.decodeFile(albumart);\r\n}\r\n```\r\n\r\nI think all 3 options are working well for you.","title":"Set audio thumbnail from a file path and a drawableID in android","body":"<p><strong>Hello @bovietvidai, Hope you are doing well. Here I am adding my suggestion to your question.</strong></p>\n<h2>Option 1:</h2>\n<p>You can create a <code>bitmap</code> by using the below code snippet.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Bitmap image = ThumbnailUtils.createAudioThumbnail(file, MediaStore.Images.Thumbnails.MICRO_KIND);\n</code></pre>\n<p>in the above code snippet <code>file</code> object is the audio file.</p>\n<hr />\n<h2>Option 2:</h2>\n<p>You can fetch using a <code>MediaMetadataRetriever</code> by using the below code snippet.</p>\n<pre class=\"lang-java prettyprint-override\"><code>MediaMetadataRetriever mmr = new MediaMetadataRetriever();\nbyte[] imgbyte;\nBitmap bitmp;\nBitmapFactory.Options option =new BitmapFactory.Options();\n    \nmmr.setDataSource(getApplicationContext(), uri);\nimgbyte = mmr.getEmbeddedPicture();\n    \n\nif (imgbyte != null) \n    bitmp = BitmapFactory.decodeByteArray(imgbyte, 0,imgbyte.length, option);\n</code></pre>\n<hr />\n<h2>Option 3:</h2>\n<p>You can fetch using a <code>Cursor</code> by using the below code snippet if you are fetching media items using <code>Cursor</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Cursor cursor = getContentResolver().query(MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI, \n    new String[] {MediaStore.Audio.Albums._ID, MediaStore.Audio.Albums.ALBUM_ART}, \n    MediaStore.Audio.Albums._ID+ &quot;=?&quot;, \n    new String[] {String.valueOf(albumId)}, \n    null);\n    \nif (cursor.moveToFirst()) {\n    String albumart = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Albums.ALBUM_ART)); \n    Bitmap bm = BitmapFactory.decodeFile(albumart);\n}\n</code></pre>\n<p>I think all 3 options are working well for you.</p>\n"},{"tags":[],"owner":{"account_id":29437651,"reputation":1,"user_id":22556205,"display_name":"Muhammad Saad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697604605,"creation_date":1697604605,"answer_id":77313549,"question_id":76511319,"body_markdown":"Best Option is to add using glide as it will not create issue of background task and can set some default image if any error\r\n\r\n    val projection = arrayOf(\r\n                MediaStore.Audio.Media.ALBUM_ID,\r\n                MediaStore.Audio.Media.DISPLAY_NAME,\r\n                MediaStore.Audio.Media.DURATION,\r\n                MediaStore.Audio.Media.SIZE,\r\n                MediaStore.Audio.Media.DATA\r\n            )\r\n\r\n            val query = contentResolver.query(collection, projection, null, null, null)\r\n            query?.use { cursor -&gt;\r\n                // Cache column indices.\r\n                val idColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.ALBUM_ID)\r\n                val nameColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME)\r\n                val durationColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DURATION)\r\n                val sizeColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.SIZE)\r\n                val dataColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA)\r\n\r\n                while (cursor.moveToNext()) {\r\n                    // Get values of columns for a given video.\r\n                    val id = cursor.getLong(idColumn)\r\n                    val name = cursor.getString(nameColumn)\r\n                    val duration = cursor.getInt(durationColumn)\r\n                    val size = cursor.getInt(sizeColumn)\r\n                    val data = cursor.getString(dataColumn)\r\n \r\n\r\n                     val contentUri: Uri = Uri.fromFile(File(data))\r\n                    //every device works with this Uri\r\n                    val sArt = Uri.parse(&quot;content://media/external/audio/albumart&quot;)\r\n                    val musicThumbnail: Uri = ContentUris.withAppendedId(\r\n                        sArt,\r\n                        id\r\n                    )\r\n    Glide.with(context).load(musicThumbnail).error(R.drawable.baseline_music_note_24).into(yourImageView)\r\n\r\n","title":"Set audio thumbnail from a file path and a drawableID in android","body":"<p>Best Option is to add using glide as it will not create issue of background task and can set some default image if any error</p>\n<pre><code>val projection = arrayOf(\n            MediaStore.Audio.Media.ALBUM_ID,\n            MediaStore.Audio.Media.DISPLAY_NAME,\n            MediaStore.Audio.Media.DURATION,\n            MediaStore.Audio.Media.SIZE,\n            MediaStore.Audio.Media.DATA\n        )\n\n        val query = contentResolver.query(collection, projection, null, null, null)\n        query?.use { cursor -&gt;\n            // Cache column indices.\n            val idColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.ALBUM_ID)\n            val nameColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME)\n            val durationColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DURATION)\n            val sizeColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.SIZE)\n            val dataColumn = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA)\n\n            while (cursor.moveToNext()) {\n                // Get values of columns for a given video.\n                val id = cursor.getLong(idColumn)\n                val name = cursor.getString(nameColumn)\n                val duration = cursor.getInt(durationColumn)\n                val size = cursor.getInt(sizeColumn)\n                val data = cursor.getString(dataColumn)\n\n\n                 val contentUri: Uri = Uri.fromFile(File(data))\n                //every device works with this Uri\n                val sArt = Uri.parse(&quot;content://media/external/audio/albumart&quot;)\n                val musicThumbnail: Uri = ContentUris.withAppendedId(\n                    sArt,\n                    id\n                )\nGlide.with(context).load(musicThumbnail).error(R.drawable.baseline_music_note_24).into(yourImageView)\n</code></pre>\n"}],"owner":{"account_id":26210323,"reputation":115,"user_id":19889305,"display_name":"bovietvidai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1697604605,"creation_date":1687233123,"question_id":76511319,"body_markdown":"recently I am working on a Audio Manger project but don&#39;t know how to figure out setting audio thumbnail in android.\r\nMany thanks in advance.","title":"Set audio thumbnail from a file path and a drawableID in android","body":"<p>recently I am working on a Audio Manger project but don't know how to figure out setting audio thumbnail in android.\nMany thanks in advance.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":7230662,"reputation":8299,"user_id":5517633,"display_name":"Abdelhak"},"score":1,"creation_date":1454592996,"post_id":35202431,"comment_id":58120572,"body_markdown":"Can you make your question more clear?","body":"Can you make your question more clear?"},{"owner":{"account_id":7774994,"reputation":51,"user_id":5883384,"accept_rate":23,"display_name":"Ragesh ck"},"score":0,"creation_date":1454682173,"post_id":35202431,"comment_id":58167306,"body_markdown":"this code helps to implement inline image in email but also showing an attachment in email .i want to hide or disable that on email through codes .how?","body":"this code helps to implement inline image in email but also showing an attachment in email .i want to hide or disable that on email through codes .how?"},{"owner":{"account_id":7774994,"reputation":51,"user_id":5883384,"accept_rate":23,"display_name":"Ragesh ck"},"score":0,"creation_date":1454682546,"post_id":35202431,"comment_id":58167583,"body_markdown":"More specifically ,i want to send an email with inline image in java  and without any attachment of that image.","body":"More specifically ,i want to send an email with inline image in java  and without any attachment of that image."}],"answers":[{"tags":[],"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697603151,"creation_date":1697603151,"answer_id":77313478,"question_id":35202431,"body_markdown":"You can not. \r\n\r\nBut you can use a `img`-tag having a `href` to a official image location.\r\n\r\nExample:\r\n\r\n    &lt;img src=&quot;https://www.example.com/image.png&quot; /&gt;\r\n\r\nIf you do not send the image as an attachment the mail is getting smaller, no attachment-sign is set and you do not litter the postbox-space of the recipient.","title":"how to hide attachment of inline image in java","body":"<p>You can not.</p>\n<p>But you can use a <code>img</code>-tag having a <code>href</code> to a official image location.</p>\n<p>Example:</p>\n<pre><code>&lt;img src=&quot;https://www.example.com/image.png&quot; /&gt;\n</code></pre>\n<p>If you do not send the image as an attachment the mail is getting smaller, no attachment-sign is set and you do not litter the postbox-space of the recipient.</p>\n"}],"owner":{"account_id":7774994,"reputation":51,"user_id":5883384,"accept_rate":23,"display_name":"Ragesh ck"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1697603151,"creation_date":1454592850,"question_id":35202431,"body_markdown":" This is a part of setting inline image in java here setting the content id.\r\n    \r\n       \r\n       MimeBodyPart imagePart = new MimeBodyPart();\r\n                        imagePart.setHeader(&quot;Content-ID&quot;, &quot;&lt;&quot; + contentId + &quot;&gt;&quot;);\r\n                        imagePart.setDisposition(MimeBodyPart.INLINE);\r\n        this part is to concentrate \r\n                        String imageFilePath = mapInlineImages.get(contentId);\r\n                        try {\r\nHere attaching file how to hide it.\r\n                         \r\n                       //imagePart.attachFile(imageFilePath);\r\n                            DataSource fds = new FileDataSource(imageFilePath);\r\n                            imagePart.setDataHandler(new DataHandler(fds));\r\n                        } catch (Exception ex) {\r\n                            ex.printStackTrace();\r\n                        }\r\n                      mimemultipart.addBodyPart(imagePart);","title":"how to hide attachment of inline image in java","body":"<p>This is a part of setting inline image in java here setting the content id.</p>\n\n<pre><code>   MimeBodyPart imagePart = new MimeBodyPart();\n                    imagePart.setHeader(\"Content-ID\", \"&lt;\" + contentId + \"&gt;\");\n                    imagePart.setDisposition(MimeBodyPart.INLINE);\n    this part is to concentrate \n                    String imageFilePath = mapInlineImages.get(contentId);\n                    try {\n</code></pre>\n\n<p>Here attaching file how to hide it.</p>\n\n<pre><code>                   //imagePart.attachFile(imageFilePath);\n                        DataSource fds = new FileDataSource(imageFilePath);\n                        imagePart.setDataHandler(new DataHandler(fds));\n                    } catch (Exception ex) {\n                        ex.printStackTrace();\n                    }\n                  mimemultipart.addBodyPart(imagePart);\n</code></pre>\n"},{"tags":["java","deserialization","quarkus","avro"],"comments":[{"owner":{"account_id":27780101,"reputation":31,"user_id":21208607,"display_name":"Maxim Shatskikh"},"score":0,"creation_date":1697629032,"post_id":77307419,"comment_id":136303210,"body_markdown":"Make class manually is bad idea when working with avro. Solve it with class generation. https://github.com/davidmc24/gradle-avro-plugin","body":"Make class manually is bad idea when working with avro. Solve it with class generation. <a href=\"https://github.com/davidmc24/gradle-avro-plugin\" rel=\"nofollow noreferrer\">github.com/davidmc24/gradle-avro-plugin</a>"}],"owner":{"account_id":27780101,"reputation":31,"user_id":21208607,"display_name":"Maxim Shatskikh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697602984,"creation_date":1697532261,"question_id":77307419,"body_markdown":"My task is deserialize byte[] to POJO that was serialized with avro schema from json String. \r\n\r\nSchema example:\r\n```\r\n&quot;{\\&quot;type\\&quot;:\\&quot;record\\&quot;,\\&quot;name\\&quot;:\\&quot;MKB10\\&quot;,\\&quot;namespace\\&quot;:\\&quot;generatedClasses\\&quot;,\\&quot;doc\\&quot;:\\&quot;1.2.643.5.1.13.13.11.1005_2.23\\&quot;,\\&quot;fields\\&quot;:[{\\&quot;name\\&quot;:\\&quot;ID\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ACTUAL\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;MKB_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;MKB_NAME\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;REC_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ID_PARENT\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;DATE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ADDL_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]}]}&quot;\r\n```\r\n\r\nData for serialization saved as string in postgres:\r\n```\r\n{&quot;ID&quot;: 3602, &quot;ACTUAL&quot;: 1, &quot;MKB_CODE&quot;: &quot;H53.2&quot;, &quot;MKB_NAME&quot;: &quot;\\u0414\\u0438\\u043f\\u043b\\u043e\\u043f\\u0438\\u044f&quot;, &quot;REC_CODE&quot;: &quot;0710H532&quot;, &quot;ID_PARENT&quot;: &quot;3599&quot;}\r\n```\r\n\r\nClass for serialize json String data to byte array:\r\n```java\r\npublic class JsonAvroSerializer {\r\n    public byte[] jsonAvroSerialize(String jsonString, String schemaString) throws IOException {\r\n        Schema.Parser parser = new Schema.Parser();\r\n        Schema schema = parser.parse(schemaString);\r\n\r\n        GenericRecord genericRecord = new GenericData.Record(schema);\r\n        Map&lt;String, Object&gt; jsonData = jsonStringMapper(jsonString);\r\n        jsonData.forEach(genericRecord::put);\r\n\r\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n        DatumWriter&lt;GenericRecord&gt; datumWriter = new SpecificDatumWriter&lt;&gt;(schema);\r\n        Encoder encoder = EncoderFactory.get().binaryEncoder(outputStream, null);\r\n        datumWriter.write(genericRecord, encoder);\r\n        encoder.flush();\r\n\r\n        return outputStream.toByteArray();\r\n    }\r\n\r\n    private Map&lt;String, Object&gt; jsonStringMapper(String jsonString) throws IOException {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n\r\n        return mapper.readValue(jsonString, HashMap.class);\r\n    }\r\n}\r\n```\r\n\r\nMy POJO for deserialization that I expect (getters/setters omitted):\r\n```java\r\npublic class MKB10 {\r\n    private Integer ID;\r\n    private Integer ACTUAL;\r\n    private String MKB_CODE;\r\n    private String MKB_NAME;\r\n    private String REC_CODE;\r\n    private String ID_PARENT;\r\n    private String DATE;\r\n    private Integer ADDL_CODE;\r\n}\r\n```\r\n\r\nDeserialization method with hardcoded schema:\r\n```java\r\n    public MKB10 getMkb10(byte[] data ) throws IOException {\r\n        String strJson = &quot;{\\&quot;type\\&quot;:\\&quot;record\\&quot;,\\&quot;name\\&quot;:\\&quot;MKB10\\&quot;,\\&quot;namespace\\&quot;:\\&quot;generatedClasses\\&quot;,\\&quot;doc\\&quot;:\\&quot;1.2.643.5.1.13.13.11.1005_2.23\\&quot;,\\&quot;fields\\&quot;:[{\\&quot;name\\&quot;:\\&quot;ID\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ACTUAL\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;MKB_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;MKB_NAME\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;REC_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ID_PARENT\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;DATE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ADDL_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]}]}&quot;;\r\n        Schema schema = new Schema.Parser().parse(strJson);\r\n\r\n        SpecificDatumReader&lt;MKB10&gt; reader = new SpecificDatumReader&lt;&gt;(schema);\r\n        BinaryDecoder decoder = DecoderFactory.get().binaryDecoder(data, null);\r\n\r\n        var mkb10 = reader.read(null, decoder);\r\n\r\n        return mkb10;\r\n    }\r\n```\r\n\r\nAs a result I need to take POJO but have classload Exception:\r\n```\r\njava.lang.ClassCastException: class org.apache.avro.generic.GenericData$Record cannot be cast to class api.clients.dictionary.MKB10 (org.apache.avro.generic.GenericData$Record is in unnamed module of loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @6283d8b8; api.clients.dictionary.MKB10 is in unnamed module of loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @77049094)\r\n```\r\n","title":"Avro deserialization classload issue","body":"<p>My task is deserialize byte[] to POJO that was serialized with avro schema from json String.</p>\n<p>Schema example:</p>\n<pre><code>&quot;{\\&quot;type\\&quot;:\\&quot;record\\&quot;,\\&quot;name\\&quot;:\\&quot;MKB10\\&quot;,\\&quot;namespace\\&quot;:\\&quot;generatedClasses\\&quot;,\\&quot;doc\\&quot;:\\&quot;1.2.643.5.1.13.13.11.1005_2.23\\&quot;,\\&quot;fields\\&quot;:[{\\&quot;name\\&quot;:\\&quot;ID\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ACTUAL\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;MKB_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;MKB_NAME\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;REC_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ID_PARENT\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;DATE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ADDL_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]}]}&quot;\n</code></pre>\n<p>Data for serialization saved as string in postgres:</p>\n<pre><code>{&quot;ID&quot;: 3602, &quot;ACTUAL&quot;: 1, &quot;MKB_CODE&quot;: &quot;H53.2&quot;, &quot;MKB_NAME&quot;: &quot;\\u0414\\u0438\\u043f\\u043b\\u043e\\u043f\\u0438\\u044f&quot;, &quot;REC_CODE&quot;: &quot;0710H532&quot;, &quot;ID_PARENT&quot;: &quot;3599&quot;}\n</code></pre>\n<p>Class for serialize json String data to byte array:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class JsonAvroSerializer {\n    public byte[] jsonAvroSerialize(String jsonString, String schemaString) throws IOException {\n        Schema.Parser parser = new Schema.Parser();\n        Schema schema = parser.parse(schemaString);\n\n        GenericRecord genericRecord = new GenericData.Record(schema);\n        Map&lt;String, Object&gt; jsonData = jsonStringMapper(jsonString);\n        jsonData.forEach(genericRecord::put);\n\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n        DatumWriter&lt;GenericRecord&gt; datumWriter = new SpecificDatumWriter&lt;&gt;(schema);\n        Encoder encoder = EncoderFactory.get().binaryEncoder(outputStream, null);\n        datumWriter.write(genericRecord, encoder);\n        encoder.flush();\n\n        return outputStream.toByteArray();\n    }\n\n    private Map&lt;String, Object&gt; jsonStringMapper(String jsonString) throws IOException {\n        ObjectMapper mapper = new ObjectMapper();\n\n        return mapper.readValue(jsonString, HashMap.class);\n    }\n}\n</code></pre>\n<p>My POJO for deserialization that I expect (getters/setters omitted):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MKB10 {\n    private Integer ID;\n    private Integer ACTUAL;\n    private String MKB_CODE;\n    private String MKB_NAME;\n    private String REC_CODE;\n    private String ID_PARENT;\n    private String DATE;\n    private Integer ADDL_CODE;\n}\n</code></pre>\n<p>Deserialization method with hardcoded schema:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public MKB10 getMkb10(byte[] data ) throws IOException {\n        String strJson = &quot;{\\&quot;type\\&quot;:\\&quot;record\\&quot;,\\&quot;name\\&quot;:\\&quot;MKB10\\&quot;,\\&quot;namespace\\&quot;:\\&quot;generatedClasses\\&quot;,\\&quot;doc\\&quot;:\\&quot;1.2.643.5.1.13.13.11.1005_2.23\\&quot;,\\&quot;fields\\&quot;:[{\\&quot;name\\&quot;:\\&quot;ID\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ACTUAL\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;MKB_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;MKB_NAME\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;REC_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ID_PARENT\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;DATE\\&quot;,\\&quot;type\\&quot;:[\\&quot;string\\&quot;,\\&quot;null\\&quot;]},{\\&quot;name\\&quot;:\\&quot;ADDL_CODE\\&quot;,\\&quot;type\\&quot;:[\\&quot;int\\&quot;,\\&quot;null\\&quot;]}]}&quot;;\n        Schema schema = new Schema.Parser().parse(strJson);\n\n        SpecificDatumReader&lt;MKB10&gt; reader = new SpecificDatumReader&lt;&gt;(schema);\n        BinaryDecoder decoder = DecoderFactory.get().binaryDecoder(data, null);\n\n        var mkb10 = reader.read(null, decoder);\n\n        return mkb10;\n    }\n</code></pre>\n<p>As a result I need to take POJO but have classload Exception:</p>\n<pre><code>java.lang.ClassCastException: class org.apache.avro.generic.GenericData$Record cannot be cast to class api.clients.dictionary.MKB10 (org.apache.avro.generic.GenericData$Record is in unnamed module of loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @6283d8b8; api.clients.dictionary.MKB10 is in unnamed module of loader io.quarkus.bootstrap.classloading.QuarkusClassLoader @77049094)\n</code></pre>\n"},{"tags":["java","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":137237,"reputation":13989,"user_id":341291,"accept_rate":76,"display_name":"Axel"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1556948298,"creation_date":1556948298,"answer_id":55979807,"question_id":55979752,"body_markdown":"`Files.readString(Path)` was introduced in Java 11. It seems like your installation is still on Java 8.\r\n\r\nFirst make sure your project uses Java 11 by setting the correct SDK and language level under Project Settings/Project.\r\n\r\nIf that doesn&#39;t work, make sure that you have installed the JDK 11 version of IntelliJ. You can choose between the JDK 8 and JDK 11 version on the IntelliJ download page when you click on the small downwards angle to the right of the download button on the [IntelliJ download page](https://www.jetbrains.com/idea/download/).","title":"intelliJ cannot find a specific method","body":"<p><code>Files.readString(Path)</code> was introduced in Java 11. It seems like your installation is still on Java 8.</p>\n\n<p>First make sure your project uses Java 11 by setting the correct SDK and language level under Project Settings/Project.</p>\n\n<p>If that doesn't work, make sure that you have installed the JDK 11 version of IntelliJ. You can choose between the JDK 8 and JDK 11 version on the IntelliJ download page when you click on the small downwards angle to the right of the download button on the <a href=\"https://www.jetbrains.com/idea/download/\" rel=\"noreferrer\">IntelliJ download page</a>.</p>\n"},{"tags":[],"owner":{"account_id":8252494,"reputation":879,"user_id":9372934,"display_name":"Lindstorm"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1639794615,"creation_date":1556955152,"answer_id":55980478,"question_id":55979752,"body_markdown":"As Axel&#39;s answer pointed out, the problem did have to do with the Java version, but it was not the SDK or language level. \r\n\r\nWhat solved it was by going to File &gt; Settings &gt; Build &gt; Compiler &gt; Java Compiler. I then changed the Project Bytecode Version to 11 and removed Per Module Bytecode Version entries that were set to 10.\r\n\r\nNote if this error keeps happening to you, this could be because the source and target version is not specified in your pom.xml. See [this question](https://stackoverflow.com/questions/33421568/intellij-target-bytecode-reverting) for more details","title":"intelliJ cannot find a specific method","body":"<p>As Axel's answer pointed out, the problem did have to do with the Java version, but it was not the SDK or language level.</p>\n<p>What solved it was by going to File &gt; Settings &gt; Build &gt; Compiler &gt; Java Compiler. I then changed the Project Bytecode Version to 11 and removed Per Module Bytecode Version entries that were set to 10.</p>\n<p>Note if this error keeps happening to you, this could be because the source and target version is not specified in your pom.xml. See <a href=\"https://stackoverflow.com/questions/33421568/intellij-target-bytecode-reverting\">this question</a> for more details</p>\n"},{"tags":[],"owner":{"account_id":1139113,"reputation":18996,"user_id":1123501,"accept_rate":89,"display_name":"Georgios Syngouroglou"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587974583,"creation_date":1587974583,"answer_id":61454225,"question_id":55979752,"body_markdown":"The same with Lindstorm and Axel answers, the issue is due to a mis-configuration of you Java version. You probably build your source code using different source/target versions than JDK 11 (at least for Files::readString). I fix the issue using the above method.\r\n  \r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n            &lt;source&gt;11&lt;/source&gt;\r\n            &lt;target&gt;11&lt;/target&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n  \r\nI added in the maven plugin `maven-compiler-plugin` the `configuration` part. If you do not have this part (ex. you use spring boot run), add it in your pom.xml `plugins` area.","title":"intelliJ cannot find a specific method","body":"<p>The same with Lindstorm and Axel answers, the issue is due to a mis-configuration of you Java version. You probably build your source code using different source/target versions than JDK 11 (at least for Files::readString). I fix the issue using the above method.</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.8.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;source&gt;11&lt;/source&gt;\n        &lt;target&gt;11&lt;/target&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>I added in the maven plugin <code>maven-compiler-plugin</code> the <code>configuration</code> part. If you do not have this part (ex. you use spring boot run), add it in your pom.xml <code>plugins</code> area.</p>\n"},{"tags":[],"owner":{"account_id":9795689,"reputation":1259,"user_id":7258827,"display_name":"AppleCiderGuy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620061422,"creation_date":1620061422,"answer_id":67372933,"question_id":55979752,"body_markdown":"after changing the Project Bytecode Version as mentioned by @Lindstorm, intelliJ was still showing errors while compiling. I did the following to ensure the right (modified) config is picked. \r\n\r\n- invalidate the cache from files &gt; invalidate cache. \r\n- close the project.\r\n- remove the project from intellij.\r\n- delete the `.idea` file from the root of the project.\r\n- open the project again.\r\n\r\nthis will ensure that the change of Project Bytecode Version to JDK 11 is picked by IntelliJ.","title":"intelliJ cannot find a specific method","body":"<p>after changing the Project Bytecode Version as mentioned by @Lindstorm, intelliJ was still showing errors while compiling. I did the following to ensure the right (modified) config is picked.</p>\n<ul>\n<li>invalidate the cache from files &gt; invalidate cache.</li>\n<li>close the project.</li>\n<li>remove the project from intellij.</li>\n<li>delete the <code>.idea</code> file from the root of the project.</li>\n<li>open the project again.</li>\n</ul>\n<p>this will ensure that the change of Project Bytecode Version to JDK 11 is picked by IntelliJ.</p>\n"}],"owner":{"account_id":8252494,"reputation":879,"user_id":9372934,"display_name":"Lindstorm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11678,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":55980478,"answer_count":4,"score":10,"last_activity_date":1697602896,"creation_date":1556947729,"question_id":55979752,"body_markdown":"I am getting a compile error in the following code that I do not know how to fix.\r\n\r\n    String path = &quot;document.txt&quot;;\r\n    File file = new File(path);\r\n    Files.readString(file.toPath()); //cannot find symbol method readString(java.nio.file.Path)\r\n\r\n&gt;Error:(8, 14) java: cannot find symbol&lt;br/&gt;\r\nsymbol:   method readString(java.nio.file.Path)&lt;br/&gt;\r\n location: class java.nio.file.Files\r\n\r\nThere are a number of things to note.\r\n\r\n - This only happens for `readString(Path)` in `java.nio.file.Files`. If I were to try `size(Path)` (another method in `java.nio.file.Files`), it works\r\n - This code does not work in intelliJ but it works in eclipse\r\n \r\n - This code works if I create a new project in intelliJ but not in my current Maven project that I cloned from github\r\n\r\nI have tried all suggestions [here][1] including:\r\n\r\n - Build &gt; Rebuild Project\r\n - Recompiling just `Test.java`\r\n - File &gt; Invalidate Caches\r\n - Checked the /src folder is marked as source folder\r\n - Reimporting Maven dependencies\r\n\r\n \r\n\r\n\r\n[1]:https://stackoverflow.com/questions/12132003/getting-cannot-find-symbol-in-java-project-in-intellij","title":"intelliJ cannot find a specific method","body":"<p>I am getting a compile error in the following code that I do not know how to fix.</p>\n<pre><code>String path = &quot;document.txt&quot;;\nFile file = new File(path);\nFiles.readString(file.toPath()); //cannot find symbol method readString(java.nio.file.Path)\n</code></pre>\n<blockquote>\n<p>Error:(8, 14) java: cannot find symbol<br/>\nsymbol:   method readString(java.nio.file.Path)<br/>\nlocation: class java.nio.file.Files</p>\n</blockquote>\n<p>There are a number of things to note.</p>\n<ul>\n<li><p>This only happens for <code>readString(Path)</code> in <code>java.nio.file.Files</code>. If I were to try <code>size(Path)</code> (another method in <code>java.nio.file.Files</code>), it works</p>\n</li>\n<li><p>This code does not work in intelliJ but it works in eclipse</p>\n</li>\n<li><p>This code works if I create a new project in intelliJ but not in my current Maven project that I cloned from github</p>\n</li>\n</ul>\n<p>I have tried all suggestions <a href=\"https://stackoverflow.com/questions/12132003/getting-cannot-find-symbol-in-java-project-in-intellij\">here</a> including:</p>\n<ul>\n<li>Build &gt; Rebuild Project</li>\n<li>Recompiling just <code>Test.java</code></li>\n<li>File &gt; Invalidate Caches</li>\n<li>Checked the /src folder is marked as source folder</li>\n<li>Reimporting Maven dependencies</li>\n</ul>\n"},{"tags":["java","spring-boot","spring-security","spring-security-oauth2"],"answers":[{"tags":[],"owner":{"account_id":13547347,"reputation":2140,"user_id":9773274,"display_name":"NatFar"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1582173030,"creation_date":1582173030,"answer_id":60312920,"question_id":60309614,"body_markdown":"There are two OAuth implementations for Spring Security: the deprecated Spring Security OAuth project and the new Spring Security 5 OAuth classes.\r\n\r\nThese properties are for the deprecated project:\r\n```\r\nsecurity.oauth2.resource.token-info-uri=xxx\r\nsecurity.oauth2.client.resource.tokenInfoUri\r\n```\r\n\r\nAnd these are for Spring Security 5:\r\n```\r\nspring.security.oauth2.resource.token-info-uri=...\r\nspring.security.oauth2.resourceserver=...\r\n```\r\n\r\nYou can find more info in this [SO question](https://stackoverflow.com/questions/56024206/spring-security-oauth2-vs-spring-security-oauth2-core-in-spring/56024752#56024752).\r\n\r\nPS. Using the spring-boot-starter-security starter will import Spring Security 5.\r\n\r\n","title":"Spring Boot OAuth2 Security properties names in .properties files?","body":"<p>There are two OAuth implementations for Spring Security: the deprecated Spring Security OAuth project and the new Spring Security 5 OAuth classes.</p>\n\n<p>These properties are for the deprecated project:</p>\n\n<pre><code>security.oauth2.resource.token-info-uri=xxx\nsecurity.oauth2.client.resource.tokenInfoUri\n</code></pre>\n\n<p>And these are for Spring Security 5:</p>\n\n<pre><code>spring.security.oauth2.resource.token-info-uri=...\nspring.security.oauth2.resourceserver=...\n</code></pre>\n\n<p>You can find more info in this <a href=\"https://stackoverflow.com/questions/56024206/spring-security-oauth2-vs-spring-security-oauth2-core-in-spring/56024752#56024752\">SO question</a>.</p>\n\n<p>PS. Using the spring-boot-starter-security starter will import Spring Security 5.</p>\n"},{"tags":[],"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1697602891,"creation_date":1582174184,"answer_id":60313075,"question_id":60309614,"body_markdown":"[Spring Security OAuth][1] &amp; [Spring Security][2] \r\n\r\n&gt; The Spring Security OAuth project is deprecated. The latest OAuth 2.0\r\n&gt; support is provided by Spring Security\r\n\r\nThe property entries starting with \r\n\r\n    security.oauth2.*\r\n\r\nare part of the deprecated Spring Security OAuth ( [example][3] ) and the properties starting with \r\n\r\n     spring.security.oauth2.*\r\n\r\nare part of the Spring Security ( The official documentation of current spring boot [Security Properties][4] )\r\n\r\n\r\nAdditional References\r\n\r\n - [Spring Security OAuth 2.0 Roadmap Update][5]\r\n - [OAuth 2.0 Migration Guide][6]\r\n - [OAuth 2.0 Features Matrix][7]\r\n\r\n  [1]: https://github.com/spring-projects/spring-security-oauth\r\n  [2]: https://github.com/spring-projects/spring-security\r\n  [3]: https://docs.spring.io/spring-security-oauth2-boot/docs/2.7.x/reference/html5/#common-application-properties\r\n  [4]: https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#security-properties\r\n  [5]: https://spring.io/blog/2019/11/14/spring-security-oauth-2-0-roadmap-update\r\n  [6]: https://github.com/spring-projects/spring-security/wiki/OAuth-2.0-Migration-Guide\r\n  [7]: https://github.com/spring-projects/spring-security/wiki/OAuth-2.0-Features-Matrix","title":"Spring Boot OAuth2 Security properties names in .properties files?","body":"<p><a href=\"https://github.com/spring-projects/spring-security-oauth\" rel=\"nofollow noreferrer\">Spring Security OAuth</a> &amp; <a href=\"https://github.com/spring-projects/spring-security\" rel=\"nofollow noreferrer\">Spring Security</a></p>\n<blockquote>\n<p>The Spring Security OAuth project is deprecated. The latest OAuth 2.0\nsupport is provided by Spring Security</p>\n</blockquote>\n<p>The property entries starting with</p>\n<pre><code>security.oauth2.*\n</code></pre>\n<p>are part of the deprecated Spring Security OAuth ( <a href=\"https://docs.spring.io/spring-security-oauth2-boot/docs/2.7.x/reference/html5/#common-application-properties\" rel=\"nofollow noreferrer\">example</a> ) and the properties starting with</p>\n<pre><code> spring.security.oauth2.*\n</code></pre>\n<p>are part of the Spring Security ( The official documentation of current spring boot <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#security-properties\" rel=\"nofollow noreferrer\">Security Properties</a> )</p>\n<p>Additional References</p>\n<ul>\n<li><a href=\"https://spring.io/blog/2019/11/14/spring-security-oauth-2-0-roadmap-update\" rel=\"nofollow noreferrer\">Spring Security OAuth 2.0 Roadmap Update</a></li>\n<li><a href=\"https://github.com/spring-projects/spring-security/wiki/OAuth-2.0-Migration-Guide\" rel=\"nofollow noreferrer\">OAuth 2.0 Migration Guide</a></li>\n<li><a href=\"https://github.com/spring-projects/spring-security/wiki/OAuth-2.0-Features-Matrix\" rel=\"nofollow noreferrer\">OAuth 2.0 Features Matrix</a></li>\n</ul>\n"}],"owner":{"account_id":2554674,"reputation":596,"user_id":6585764,"accept_rate":40,"display_name":"Fran&#231;ois-David Lessard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3457,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":60313075,"answer_count":2,"score":4,"last_activity_date":1697602891,"creation_date":1582148160,"question_id":60309614,"body_markdown":"I&#39;m currently learning and experimenting with the different Spring Boot Security OAuth2 packages and I&#39;m really confused with the actual configuration properties names. I found on the internet and on multiple Spring Documentation pages different naming schemes for these properties. For example I found\r\n\r\n    security.oauth2.resource.token-info-uri=xxx\r\n    security.oauth2.client.resource.tokenInfoUri\r\n    spring.security.oauth2.resource.token-info-uri=xxx\r\n    spring.security.oauth2.resourceserver ...\r\n    ...\r\n\r\nI&#39;m trying to make sense of all this and would like to know what are the differences with all of them. Are they version related, package related, are they typos, are some names deprecated, ... ?\r\n\r\nRegards\r\n\r\nP.S. I&#39;m currently using Spring Boot 2.2.4\r\n\r\n\r\n\r\n\r\n","title":"Spring Boot OAuth2 Security properties names in .properties files?","body":"<p>I'm currently learning and experimenting with the different Spring Boot Security OAuth2 packages and I'm really confused with the actual configuration properties names. I found on the internet and on multiple Spring Documentation pages different naming schemes for these properties. For example I found</p>\n\n<pre><code>security.oauth2.resource.token-info-uri=xxx\nsecurity.oauth2.client.resource.tokenInfoUri\nspring.security.oauth2.resource.token-info-uri=xxx\nspring.security.oauth2.resourceserver ...\n...\n</code></pre>\n\n<p>I'm trying to make sense of all this and would like to know what are the differences with all of them. Are they version related, package related, are they typos, are some names deprecated, ... ?</p>\n\n<p>Regards</p>\n\n<p>P.S. I'm currently using Spring Boot 2.2.4</p>\n"},{"tags":["java","json","jackson","micronaut"],"answers":[{"tags":[],"owner":{"account_id":29694316,"reputation":1,"user_id":22757980,"display_name":"Peter K"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697601753,"creation_date":1697565935,"answer_id":77311290,"question_id":77099446,"body_markdown":"I recommend to change the controller return type to `String` and return `jsonNode.toString()`, which seems to work.\r\n\r\n```java\r\npackage com.fasterxml.jackson.databind;\r\n```\r\nIt seems the problem is related to \r\n```\r\nJsonNode implements Iterable&lt;JsonNode&gt;\r\n```\r\nand micronaut does not pick up the correct serializer for `JsonNode`.\r\n","title":"Problem serializing JsonNode within micronaut controller response object","body":"<p>I recommend to change the controller return type to <code>String</code> and return <code>jsonNode.toString()</code>, which seems to work.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.fasterxml.jackson.databind;\n</code></pre>\n<p>It seems the problem is related to</p>\n<pre><code>JsonNode implements Iterable&lt;JsonNode&gt;\n</code></pre>\n<p>and micronaut does not pick up the correct serializer for <code>JsonNode</code>.</p>\n"}],"owner":{"account_id":60400,"reputation":19147,"user_id":180416,"accept_rate":63,"display_name":"rich"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697601753,"creation_date":1694627783,"question_id":77099446,"body_markdown":"I&#39;ve used a jackson ObjectMapper to parse some text JSON to a JsonNode (using `readTree`). I can print out the pretty printed string and it all looks good.\r\n\r\nIf that JsonNode is on an object returned by a micronaut controller though, then I&#39;m not seeing any of the fields. I just get the object and array structure. Seems odd, what am I missing?\r\n\r\n    [\r\n                [\r\n                    [],\r\n                    [],\r\n                    [\r\n                        [\r\n                            [],\r\n                            []\r\n                        ],\r\n                        [\r\n                            [],\r\n                            []\r\n                        ],\r\n                        [\r\n                            [],\r\n                            []\r\n                        ],\r\n                        [\r\n                            [],\r\n                            []\r\n                        ]\r\n                    ]\r\n                ],\r\n                [\r\n                    [],\r\n                    [],\r\n                    [\r\n                        [\r\n                            [],\r\n                            []\r\n                        ]\r\n                    ]\r\n                ],\r\n                [\r\n                    [],\r\n                    [],\r\n                    [\r\n                        [\r\n                            [],\r\n                            []\r\n                        ]\r\n                    ]\r\n                ],\r\n                [\r\n                    [],\r\n                    [],\r\n                    [\r\n                        [\r\n                            [],\r\n                            []\r\n                        ]\r\n                    ]\r\n                ],\r\n                [\r\n                    [],\r\n                    [],\r\n                    [\r\n                        [\r\n                            [],\r\n                            []\r\n                        ]\r\n                    ]\r\n                ]\r\n            ]","title":"Problem serializing JsonNode within micronaut controller response object","body":"<p>I've used a jackson ObjectMapper to parse some text JSON to a JsonNode (using <code>readTree</code>). I can print out the pretty printed string and it all looks good.</p>\n<p>If that JsonNode is on an object returned by a micronaut controller though, then I'm not seeing any of the fields. I just get the object and array structure. Seems odd, what am I missing?</p>\n<pre><code>[\n            [\n                [],\n                [],\n                [\n                    [\n                        [],\n                        []\n                    ],\n                    [\n                        [],\n                        []\n                    ],\n                    [\n                        [],\n                        []\n                    ],\n                    [\n                        [],\n                        []\n                    ]\n                ]\n            ],\n            [\n                [],\n                [],\n                [\n                    [\n                        [],\n                        []\n                    ]\n                ]\n            ],\n            [\n                [],\n                [],\n                [\n                    [\n                        [],\n                        []\n                    ]\n                ]\n            ],\n            [\n                [],\n                [],\n                [\n                    [\n                        [],\n                        []\n                    ]\n                ]\n            ],\n            [\n                [],\n                [],\n                [\n                    [\n                        [],\n                        []\n                    ]\n                ]\n            ]\n        ]\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","spring-security","thymeleaf"],"comments":[{"owner":{"account_id":2000274,"reputation":814,"user_id":1791492,"accept_rate":100,"display_name":"Aaditya Gavandalkar"},"score":0,"creation_date":1454088503,"post_id":35090329,"comment_id":57902824,"body_markdown":"How about adding the user details in a Cookie which will be accessible to every webpage within the domain?","body":"How about adding the user details in a Cookie which will be accessible to every webpage within the domain?"},{"owner":{"account_id":1700309,"reputation":1007,"user_id":1560584,"accept_rate":71,"display_name":"Balaji Krishnan"},"score":1,"creation_date":1454088551,"post_id":35090329,"comment_id":57902851,"body_markdown":"use spring security taglib... considering you are using thymeleaf as template refer this : http://www.thymeleaf.org/doc/articles/springsecurity.html","body":"use spring security taglib... considering you are using thymeleaf as template refer this : <a href=\"http://www.thymeleaf.org/doc/articles/springsecurity.html\" rel=\"nofollow noreferrer\">thymeleaf.org/doc/articles/springsecurity.html</a>"},{"owner":{"account_id":3191016,"reputation":583,"user_id":5822499,"display_name":"Dee"},"score":0,"creation_date":1454090459,"post_id":35090329,"comment_id":57903881,"body_markdown":"@AadityaGavandalkar. Thanks for the suggestion. I suppose I could somehow set the data in a cookie and read it via JavaScript, but I believe there ought to be a decent way to access the same data server-side. In PHP for example we could set the data in $_SESSION and access it in any view potentially.","body":"@AadityaGavandalkar. Thanks for the suggestion. I suppose I could somehow set the data in a cookie and read it via JavaScript, but I believe there ought to be a decent way to access the same data server-side. In PHP for example we could set the data in $_SESSION and access it in any view potentially."},{"owner":{"account_id":3191016,"reputation":583,"user_id":5822499,"display_name":"Dee"},"score":0,"creation_date":1454090742,"post_id":35090329,"comment_id":57904038,"body_markdown":"@BalajiKrishnan. Thanks as well. I tried using the sec:authentication tag, but I couldn&#39;t figure out a way to fetch the information I need. Perhaps you could write an answer showing how you can get custom information like firstName in my example? Thanks","body":"@BalajiKrishnan. Thanks as well. I tried using the sec:authentication tag, but I couldn&#39;t figure out a way to fetch the information I need. Perhaps you could write an answer showing how you can get custom information like firstName in my example? Thanks"},{"owner":{"account_id":1700309,"reputation":1007,"user_id":1560584,"accept_rate":71,"display_name":"Balaji Krishnan"},"score":0,"creation_date":1454090962,"post_id":35090329,"comment_id":57904155,"body_markdown":"SO already has an answer - http://stackoverflow.com/questions/7807967/accessing-my-custom-user-object-in-jsp-page-using-spring-3-security","body":"SO already has an answer - <a href=\"http://stackoverflow.com/questions/7807967/accessing-my-custom-user-object-in-jsp-page-using-spring-3-security\" title=\"accessing my custom user object in jsp page using spring 3 security\">stackoverflow.com/questions/7807967/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3191016,"reputation":583,"user_id":5822499,"display_name":"Dee"},"comment_count":0,"down_vote_count":0,"up_vote_count":26,"is_accepted":true,"score":26,"last_activity_date":1454094004,"creation_date":1454094004,"answer_id":35092065,"question_id":35090329,"body_markdown":"It&#39;s quite easy to accomplish this, thanks to a hint from Balaji Krishnan. \r\n\r\nBasically, I had to add the Thymeleaf Spring Security integration module to my build.gradle file as follows: \r\n\r\n    compile(&quot;org.thymeleaf.extras:thymeleaf-extras-springsecurity3&quot;)\r\n\r\nThen in my template I just used the following markup: \r\n\r\n    &lt;span th:text =&quot;${#authentication.getPrincipal().getUser().getFirstName()}&quot;&gt;&lt;/span&gt;\r\n","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>It's quite easy to accomplish this, thanks to a hint from Balaji Krishnan. </p>\n\n<p>Basically, I had to add the Thymeleaf Spring Security integration module to my build.gradle file as follows: </p>\n\n<pre><code>compile(\"org.thymeleaf.extras:thymeleaf-extras-springsecurity3\")\n</code></pre>\n\n<p>Then in my template I just used the following markup: </p>\n\n<pre><code>&lt;span th:text =\"${#authentication.getPrincipal().getUser().getFirstName()}\"&gt;&lt;/span&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7756949,"reputation":1720,"user_id":5870896,"accept_rate":43,"display_name":"Rashid"},"score":1,"creation_date":1499756887,"post_id":45027239,"comment_id":77029293,"body_markdown":"explain more about your answer","body":"explain more about your answer"}],"tags":[],"owner":{"account_id":6993360,"reputation":1037,"user_id":5361779,"accept_rate":56,"display_name":"B378"},"comment_count":1,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1499755597,"creation_date":1499755597,"answer_id":45027239,"question_id":35090329,"body_markdown":"When using Spring Security 4 and Thymeleaf 3:\r\n\r\n    &lt;span th:text=&quot;${#authentication.getPrincipal().getUsername()}&quot;&gt;&lt;/span&gt;","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>When using Spring Security 4 and Thymeleaf 3:</p>\n\n<pre><code>&lt;span th:text=\"${#authentication.getPrincipal().getUsername()}\"&gt;&lt;/span&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6115694,"reputation":3228,"user_id":4770813,"accept_rate":53,"display_name":"Scaramouche"},"score":0,"creation_date":1539038885,"post_id":49534130,"comment_id":92348213,"body_markdown":"do you know of a way to do so with the user&#39;s role? like `&lt;span sec:authentication=&quot;role&quot;&gt;Bob&lt;/span&gt;`","body":"do you know of a way to do so with the user&#39;s role? like <code>&lt;span sec:authentication=&quot;role&quot;&gt;Bob&lt;&#47;span&gt;</code>"},{"owner":{"account_id":9885814,"reputation":1371,"user_id":7320372,"display_name":"Thomas Lang"},"score":0,"creation_date":1539152041,"post_id":49534130,"comment_id":92392195,"body_markdown":"Sure. Just use this: `&lt;span sec:authentication=&quot;principal.authorities&quot;&gt;[ROLE_USER, ROLE_ADMIN]&lt;/span&gt;` that should do the trick. Here are some hints to find: [spring security thymeleaf](https://www.baeldung.com/spring-security-thymeleaf). I hope this helps.","body":"Sure. Just use this: <code>&lt;span sec:authentication=&quot;principal.authorities&quot;&gt;[ROLE_USER, ROLE_ADMIN]&lt;&#47;span&gt;</code> that should do the trick. Here are some hints to find: <a href=\"https://www.baeldung.com/spring-security-thymeleaf\" rel=\"nofollow noreferrer\">spring security thymeleaf</a>. I hope this helps."}],"tags":[],"owner":{"account_id":9885814,"reputation":1371,"user_id":7320372,"display_name":"Thomas Lang"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1522238809,"creation_date":1522238809,"answer_id":49534130,"question_id":35090329,"body_markdown":"This construct is working for me (spring boot 1.5 and 2.0/thymeleaf 3):  \r\nIt is documented here (bottom of the page) [Thymeleaf + Spring Security integration basics][1]\r\n\r\n    Logged user: &lt;span sec:authentication=&quot;name&quot;&gt;Bob&lt;/span&gt;\r\n\r\nDon&#180;t forget to include the sec tag in the html section of your view:\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;\r\n          xmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;&gt;\r\n    &lt;head&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n\r\n\r\nI hope this helps!  \r\nHave a nice day!  \r\nThomas\r\n\r\n\r\n  [1]: https://www.thymeleaf.org/doc/articles/springsecurity.html","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>This construct is working for me (spring boot 1.5 and 2.0/thymeleaf 3):<br>\nIt is documented here (bottom of the page) <a href=\"https://www.thymeleaf.org/doc/articles/springsecurity.html\" rel=\"nofollow noreferrer\">Thymeleaf + Spring Security integration basics</a></p>\n\n<pre><code>Logged user: &lt;span sec:authentication=\"name\"&gt;Bob&lt;/span&gt;\n</code></pre>\n\n<p>Don´t forget to include the sec tag in the html section of your view:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=\"http://www.thymeleaf.org\"\n      xmlns:sec=\"http://www.thymeleaf.org/extras/spring-security\"&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body&gt;\n</code></pre>\n\n<p>I hope this helps!<br>\nHave a nice day!<br>\nThomas</p>\n"},{"tags":[],"owner":{"account_id":12627878,"reputation":107,"user_id":9180632,"display_name":"Tanaji Kolekar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1537785992,"creation_date":1537785992,"answer_id":52477643,"question_id":35090329,"body_markdown":"As @B378 said, When using Spring Security 4 and Thymeleaf 3: you have to use following.\r\n\r\n    &lt;span th:text=&quot;${#authentication.getPrincipal().getUsername()}&quot;&gt;&lt;/span&gt;\r\n\r\nBecause spring security uses UserDetails internally. And UserDetails contains one function called getUsername().","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>As @B378 said, When using Spring Security 4 and Thymeleaf 3: you have to use following.</p>\n\n<pre><code>&lt;span th:text=\"${#authentication.getPrincipal().getUsername()}\"&gt;&lt;/span&gt;\n</code></pre>\n\n<p>Because spring security uses UserDetails internally. And UserDetails contains one function called getUsername().</p>\n"},{"tags":[],"owner":{"account_id":3882891,"reputation":2008,"user_id":3214988,"display_name":"sunitkatkar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1541695563,"creation_date":1541695563,"answer_id":53212382,"question_id":35090329,"body_markdown":"This page was useful. Thanks for all the replies. \r\nPlease note that if you are using the latest Spring Boot i.e. version `2.1.0` then you need to use the following: `thymeleaf-extras-springsecurity5`\r\n\r\n\r\n[LINK][1]\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.1-Release-Notes","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>This page was useful. Thanks for all the replies. \nPlease note that if you are using the latest Spring Boot i.e. version <code>2.1.0</code> then you need to use the following: <code>thymeleaf-extras-springsecurity5</code></p>\n\n<p><a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.1-Release-Notes\" rel=\"nofollow noreferrer\">LINK</a></p>\n"},{"tags":[],"owner":{"account_id":1167798,"reputation":39,"user_id":1145691,"display_name":"user1145691"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1549619125,"creation_date":1549619125,"answer_id":54589641,"question_id":35090329,"body_markdown":"For me, When using Spring boot 2.1.2 I need to use the following\r\n\r\n    &lt;span th:text=&quot;${#authentication.getPrincipal()}&quot;&gt;&lt;/span&gt; &lt;!-- No &quot;.getUsername()&quot;--&gt;\r\nWith thymeleaf-extras-springsecurity5\r\n","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>For me, When using Spring boot 2.1.2 I need to use the following</p>\n\n<pre><code>&lt;span th:text=\"${#authentication.getPrincipal()}\"&gt;&lt;/span&gt; &lt;!-- No \".getUsername()\"--&gt;\n</code></pre>\n\n<p>With thymeleaf-extras-springsecurity5</p>\n"},{"tags":[],"owner":{"account_id":1850614,"reputation":1024,"user_id":1677230,"display_name":"user1677230"},"comment_count":0,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1648642012,"creation_date":1576117696,"answer_id":59296859,"question_id":35090329,"body_markdown":"When using Spring boot 2.2.1.\r\n\r\nFor the maven, Add these lines to the pom.xml\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nIn the thymeleaf\r\n```\r\n&lt;span th:text=&quot;${#authentication.getPrincipal().getUsername()}&quot;&gt;&lt;/span&gt;\r\n&lt;span th:text=&quot;${#authentication.getPrincipal().authorities}&quot;&gt;&lt;/span&gt;\r\n```","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>When using Spring boot 2.2.1.</p>\n<p>For the maven, Add these lines to the pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n    &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>In the thymeleaf</p>\n<pre><code>&lt;span th:text=&quot;${#authentication.getPrincipal().getUsername()}&quot;&gt;&lt;/span&gt;\n&lt;span th:text=&quot;${#authentication.getPrincipal().authorities}&quot;&gt;&lt;/span&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2248953,"reputation":2149,"user_id":1981644,"display_name":"Ullas Hunka"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586622216,"creation_date":1586622216,"answer_id":61160026,"question_id":35090329,"body_markdown":"For thymleaf 4 and above you have to modify some classes in order to get the info. Heres how you can do that:\r\n\r\nFirst, add the getter of your user `getUser(){return this.user;}` in the UserDetails class and then push that object in the UserDetailsService object. Without these changes, thymleaf will not parse your HTML file. \r\n\r\nThen you can get the info as follows:\r\n\r\n`&lt;span sec:authentication=&quot;principal.user.name&quot;&gt;`","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>For thymleaf 4 and above you have to modify some classes in order to get the info. Heres how you can do that:</p>\n\n<p>First, add the getter of your user <code>getUser(){return this.user;}</code> in the UserDetails class and then push that object in the UserDetailsService object. Without these changes, thymleaf will not parse your HTML file. </p>\n\n<p>Then you can get the info as follows:</p>\n\n<p><code>&lt;span sec:authentication=\"principal.user.name\"&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":8383036,"reputation":641,"user_id":6294316,"display_name":"mkkabi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673945875,"creation_date":1673945875,"answer_id":75143972,"question_id":35090329,"body_markdown":"Don&#39;t forget to check if a user is authenticated before trying to print his detais\r\n\r\n    &lt;th:block th:if=&quot;${#authorization.expression(&#39;isAuthenticated()&#39;)}&quot;&gt;\r\n                        &lt;span&gt;Hello&lt;/span&gt;\r\n                        &lt;span th:text=&quot;${#authentication.getPrincipal().getFullName()}&quot;&gt;&lt;/span&gt;\r\n                    &lt;/th:block&gt;","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>Don't forget to check if a user is authenticated before trying to print his detais</p>\n<pre><code>&lt;th:block th:if=&quot;${#authorization.expression('isAuthenticated()')}&quot;&gt;\n                    &lt;span&gt;Hello&lt;/span&gt;\n                    &lt;span th:text=&quot;${#authentication.getPrincipal().getFullName()}&quot;&gt;&lt;/span&gt;\n                &lt;/th:block&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4716379,"reputation":1255,"user_id":3901138,"accept_rate":41,"display_name":"Park JongBum"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680240139,"creation_date":1680240139,"answer_id":75895108,"question_id":35090329,"body_markdown":"On 2023-March, to display username from either local or social login(like Facebook), I took this method: (when I&#39;m using)\r\n - spring boot version: 3.0.4 \r\n - related tech: Maven and Lombok\r\n\r\npom.xml\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n      &lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nhtml top\r\n\r\n    &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\r\n    \txmlns:th=&quot;http://www.thymeleaf.org&quot;\r\n    \txmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;&gt;\r\n\r\nhtml body\r\n\r\n    &lt;h3 th:inline=&quot;text&quot;&gt;\r\n    \tuser: &lt;span sec:authentication=&quot;name&quot;&gt;not found&lt;/span&gt;\r\n    &lt;/h3&gt;\r\nbean class\r\n\r\n    @AllArgsConstructor\r\n    public class CustomOAuth2User implements OAuth2User {\r\n    \r\n    \tprivate OAuth2User oAuth2User;\r\n    \r\n    \t@Override\r\n    \tpublic String getName() {\r\n    \t\treturn oAuth2User.getAttribute(&quot;name&quot;);\r\n    \t}\r\n    }\r\n\r\nPart of rendered view page:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MhgsM.png","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>On 2023-March, to display username from either local or social login(like Facebook), I took this method: (when I'm using)</p>\n<ul>\n<li>spring boot version: 3.0.4</li>\n<li>related tech: Maven and Lombok</li>\n</ul>\n<p>pom.xml</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n  &lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>html top</p>\n<pre><code>&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\n    xmlns:th=&quot;http://www.thymeleaf.org&quot;\n    xmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;&gt;\n</code></pre>\n<p>html body</p>\n<pre><code>&lt;h3 th:inline=&quot;text&quot;&gt;\n    user: &lt;span sec:authentication=&quot;name&quot;&gt;not found&lt;/span&gt;\n&lt;/h3&gt;\n</code></pre>\n<p>bean class</p>\n<pre><code>@AllArgsConstructor\npublic class CustomOAuth2User implements OAuth2User {\n\n    private OAuth2User oAuth2User;\n\n    @Override\n    public String getName() {\n        return oAuth2User.getAttribute(&quot;name&quot;);\n    }\n}\n</code></pre>\n<p>Part of rendered view page:\n<a href=\"https://i.stack.imgur.com/MhgsM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MhgsM.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":10371815,"reputation":1,"user_id":7649264,"display_name":"Balbino Gachuz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697598911,"creation_date":1697598911,"answer_id":77313288,"question_id":35090329,"body_markdown":"I&#39;ve this configuration with **Thymeleaf 3.1.2**, **Sprig Boot 3.1.3** and **Spring Security 6.0.11** (**Java 17**):\r\n\r\nSpring Boot: \r\n\r\n    &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.3&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\nThymeleaf for Spring Security:\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nHTML Namespace:\r\n\r\n    xmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;&gt;\r\n\r\nHTML Authenticated user, **option 1**:\r\n\r\n    &lt;span sec:authentication=&quot;principal.firstName&quot;&gt;&lt;/span&gt;\r\n\r\nHTML Authenticated user, **option 2**:\r\n\r\n    &lt;p th:text=&quot;${#authentication.principal.fisrtName}&quot;&gt;&lt;/p&gt;\r\n\r\nObject UserLogin:\r\n\r\n    public class UsuarioLogin implements Serializable {\r\n\r\n\t   private static final long serialVersionUID = 1L;\r\n\r\n\t   private Integer cve;\r\n\t   private String name;\r\n\t   private String firstName;\r\n\t   private Perfil perfil;\r\n\r\nRef: https://www.baeldung.com/get-user-in-spring-security ","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>I've this configuration with <strong>Thymeleaf 3.1.2</strong>, <strong>Sprig Boot 3.1.3</strong> and <strong>Spring Security 6.0.11</strong> (<strong>Java 17</strong>):</p>\n<p>Spring Boot:</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.1.3&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n</code></pre>\n<p>Thymeleaf for Spring Security:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n    &lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>HTML Namespace:</p>\n<pre><code>xmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;&gt;\n</code></pre>\n<p>HTML Authenticated user, <strong>option 1</strong>:</p>\n<pre><code>&lt;span sec:authentication=&quot;principal.firstName&quot;&gt;&lt;/span&gt;\n</code></pre>\n<p>HTML Authenticated user, <strong>option 2</strong>:</p>\n<pre><code>&lt;p th:text=&quot;${#authentication.principal.fisrtName}&quot;&gt;&lt;/p&gt;\n</code></pre>\n<p>Object UserLogin:</p>\n<pre><code>public class UsuarioLogin implements Serializable {\n\n   private static final long serialVersionUID = 1L;\n\n   private Integer cve;\n   private String name;\n   private String firstName;\n   private Perfil perfil;\n</code></pre>\n<p>Ref: <a href=\"https://www.baeldung.com/get-user-in-spring-security\" rel=\"nofollow noreferrer\">https://www.baeldung.com/get-user-in-spring-security</a></p>\n"}],"owner":{"account_id":3191016,"reputation":583,"user_id":5822499,"display_name":"Dee"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50710,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":35092065,"answer_count":11,"score":17,"last_activity_date":1697598911,"creation_date":1454087989,"question_id":35090329,"body_markdown":"I have a Spring Boot application that uses Spring Security and Thymeleaf template. I am trying to display the logged-in user&#39;s first name and last name in a template when the controller is managed by a subclass of WebConfigurerAdapter. \r\n\r\nSo, say my WebConfigurerAdapter subclass looks like this\r\n\r\n    @Configuration\r\n    public class MvcConfig extends WebMvcConfigurerAdapter{\r\n\r\n        @Override\r\n        public void addViewControllers(ViewControllerRegistry registry){\r\n            registry.addViewController(&quot;/some-logged-in-page&quot;).setViewName(&quot;some-logged-in-page&quot;);\r\n            registry.addViewController(&quot;/login&quot;).setViewName(&quot;login&quot;);\r\n\r\n        }\r\n        ....\r\n    }\r\n\r\nMy User entity class looks like this\r\n\r\n    @Entity\r\n    @Table(name = &quot;user&quot;)\r\n    public class User {\r\n\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;id&quot;, nullable = false, updatable = false)\r\n        private Long id;\r\n\r\n\r\n\r\n        @Column(name=&quot;first_name&quot;, nullable = false)\r\n        private String firstName;\r\n\r\n\r\n        public String getFirstName() {\r\n            return firstName;\r\n        }\r\n        ...\r\n    }\r\n\r\n\r\nIn my template, I have tried using code like \r\n\r\n    &lt;div sec:authentication=&quot;firstName&quot;&gt;&lt;/div&gt; \r\n\r\nBut it didn&#39;t work. \r\n\r\nI know it is possible to use a ControllerAdvise as follows: \r\n\r\n    @ControllerAdvice\r\n    public class CurrentUserControllerAdvice {\r\n        @ModelAttribute(&quot;currentUser&quot;)\r\n        public UserDetails getCurrentUser(Authentication authentication) {\r\n            return (authentication == null) ? null : (UserDetails) authentication.getPrincipal();\r\n        }\r\n    }\r\n\r\nand then access the details in the template using code like: \r\n\r\n    &lt;span th:text =&quot;${currentUser.getUser().getFirstName()}&quot;&gt;&lt;/span&gt;\r\n\r\n\r\nBut this doesn&#39;t work with any view controller registered with my class MvcConfig. Rather I will need to make sure each of my controllers are separate classes.\r\n\r\nSo, could someone kindly point me to a way to automatically insert the logged-in user details to my view, e.g. some-logged-in-page.html in this example? Thanks","title":"How to display current logged-in user&#39;s information in all templates including view managed by WebMvcConfigurerAdapter in Spring Security application","body":"<p>I have a Spring Boot application that uses Spring Security and Thymeleaf template. I am trying to display the logged-in user's first name and last name in a template when the controller is managed by a subclass of WebConfigurerAdapter. </p>\n\n<p>So, say my WebConfigurerAdapter subclass looks like this</p>\n\n<pre><code>@Configuration\npublic class MvcConfig extends WebMvcConfigurerAdapter{\n\n    @Override\n    public void addViewControllers(ViewControllerRegistry registry){\n        registry.addViewController(\"/some-logged-in-page\").setViewName(\"some-logged-in-page\");\n        registry.addViewController(\"/login\").setViewName(\"login\");\n\n    }\n    ....\n}\n</code></pre>\n\n<p>My User entity class looks like this</p>\n\n<pre><code>@Entity\n@Table(name = \"user\")\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = \"id\", nullable = false, updatable = false)\n    private Long id;\n\n\n\n    @Column(name=\"first_name\", nullable = false)\n    private String firstName;\n\n\n    public String getFirstName() {\n        return firstName;\n    }\n    ...\n}\n</code></pre>\n\n<p>In my template, I have tried using code like </p>\n\n<pre><code>&lt;div sec:authentication=\"firstName\"&gt;&lt;/div&gt; \n</code></pre>\n\n<p>But it didn't work. </p>\n\n<p>I know it is possible to use a ControllerAdvise as follows: </p>\n\n<pre><code>@ControllerAdvice\npublic class CurrentUserControllerAdvice {\n    @ModelAttribute(\"currentUser\")\n    public UserDetails getCurrentUser(Authentication authentication) {\n        return (authentication == null) ? null : (UserDetails) authentication.getPrincipal();\n    }\n}\n</code></pre>\n\n<p>and then access the details in the template using code like: </p>\n\n<pre><code>&lt;span th:text =\"${currentUser.getUser().getFirstName()}\"&gt;&lt;/span&gt;\n</code></pre>\n\n<p>But this doesn't work with any view controller registered with my class MvcConfig. Rather I will need to make sure each of my controllers are separate classes.</p>\n\n<p>So, could someone kindly point me to a way to automatically insert the logged-in user details to my view, e.g. some-logged-in-page.html in this example? Thanks</p>\n"},{"tags":["java","stream","vaadin"],"comments":[{"owner":{"account_id":3837378,"reputation":35488,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1697454889,"post_id":77301354,"comment_id":136277818,"body_markdown":"Do you also get the OOME, if you do _nothing_ inside the `forEach`?","body":"Do you also get the OOME, if you do <i>nothing</i> inside the <code>forEach</code>?"},{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1697460445,"post_id":77301354,"comment_id":136278811,"body_markdown":"Posts on stackoverflow get nothing from me.","body":"Posts on stackoverflow get nothing from me."},{"owner":{"account_id":26746945,"reputation":91,"user_id":21110009,"display_name":"Алексей Жуков"},"score":0,"creation_date":1697511789,"post_id":77301354,"comment_id":136285902,"body_markdown":"K.Nicholas, hello. I write I wrote my question in more detail.","body":"K.Nicholas, hello. I write I wrote my question in more detail."},{"owner":{"account_id":26746945,"reputation":91,"user_id":21110009,"display_name":"Алексей Жуков"},"score":0,"creation_date":1697512810,"post_id":77301354,"comment_id":136285950,"body_markdown":"Cfrick, thank you. I try it:\n\nAn empty method  OOMEpositionGrid.getLazyDataView().getItems().forEach   does not give an error","body":"Cfrick, thank you. I try it:  An empty method  OOMEpositionGrid.getLazyDataView().getItems().forEach   does not give an error"},{"owner":{"account_id":3837378,"reputation":35488,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1697521663,"post_id":77301354,"comment_id":136286665,"body_markdown":"I have removed the Vaadin tag and I suggest you turn this question into a question on how &quot;stream&quot; writing out the PDF with whatever library you are using.","body":"I have removed the Vaadin tag and I suggest you turn this question into a question on how &quot;stream&quot; writing out the PDF with whatever library you are using."},{"owner":{"account_id":26746945,"reputation":91,"user_id":21110009,"display_name":"Алексей Жуков"},"score":0,"creation_date":1697525212,"post_id":77301354,"comment_id":136287170,"body_markdown":"Sorry. As it turned out, I checked on 100 thousand records. In this case, there were no errors. But with the number of over 100 thousand records  get OOME ( It turns out that this problem concerns Vaadin. Namely, how can I get data in parts for writing to a PDF file from Grid table....","body":"Sorry. As it turned out, I checked on 100 thousand records. In this case, there were no errors. But with the number of over 100 thousand records  get OOME ( It turns out that this problem concerns Vaadin. Namely, how can I get data in parts for writing to a PDF file from Grid table...."},{"owner":{"account_id":3837378,"reputation":35488,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1697528382,"post_id":77301354,"comment_id":136287656,"body_markdown":"Why do you want to do this? Eliminate Vaadin, use a scrolling resultset directly from your DB.","body":"Why do you want to do this? Eliminate Vaadin, use a scrolling resultset directly from your DB."},{"owner":{"account_id":26746945,"reputation":91,"user_id":21110009,"display_name":"Алексей Жуков"},"score":0,"creation_date":1697532208,"post_id":77301354,"comment_id":136288336,"body_markdown":"I have a web application with vaadin. I have a page with reports. These page use filters. Vaadin has Lazy Loading. This allows you to display a limited number of records in the page. So I have a beautiful report on the site. But it was necessary to upload the report to a pdf file. Based on your words, it turns out that it is necessary to write other functionality, ignoring all the features of Lazy Loading Vaadin. This is probably the only solution, but it&#39;s very sad :(","body":"I have a web application with vaadin. I have a page with reports. These page use filters. Vaadin has Lazy Loading. This allows you to display a limited number of records in the page. So I have a beautiful report on the site. But it was necessary to upload the report to a pdf file. Based on your words, it turns out that it is necessary to write other functionality, ignoring all the features of Lazy Loading Vaadin. This is probably the only solution, but it&#39;s very sad :("}],"answers":[{"tags":[],"owner":{"account_id":26746945,"reputation":91,"user_id":21110009,"display_name":"Алексей Жуков"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697598902,"creation_date":1697598902,"answer_id":77313287,"question_id":77301354,"body_markdown":"Thanks cfrick for help. \r\n\r\nI have nice report by my page and I used Lazy Loading with filter and API Criteria:\r\n\r\nMy method:\r\n\r\n    positionService.getAll(\r\n                        filter,\r\n                        PageRequest.of(query.getPage(),\r\n                                query.getPageSize(),\r\n                                Sort.by(springSortOrders))\r\n                ).stream();\r\n\r\nMy service:\r\n\r\n    @Service\r\n    public class PositionCustomService extends CustomService&lt;Position&gt; {\r\n    \r\n        private final static Logger LOGGER = LogManager.getLogger(PositionCustomService.class);\r\n    \r\n        private final PositionRepository repository;\r\n    \r\n        @Autowired\r\n        public PositionCustomService(PositionRepository repository) {\r\n            this.repository = repository;\r\n        }\r\n    \r\n        public Page&lt;Position&gt; getAll(PageRequest pageRequest) {\r\n            return repository.findAll(pageRequest);\r\n        }\r\n    \r\n        public List&lt;Position&gt; getAll(Filter filter) {\r\n            return repository.findAll(bySearchWithFilter(filter, Position.class));\r\n        }\r\n    \r\n        public Page&lt;Position&gt; getAll(Filter filter, PageRequest pageRequest) {\r\n            return repository.findAll(bySearchWithFilter(filter, Position.class), pageRequest);\r\n        }\r\n    \r\n        public Map&lt;LocalDate, Long&gt; getCountByDays(int days) {\r\n            return repository.countByDays(days);\r\n        }\r\n    }\r\n\r\nMy CustomService:\r\n\r\n    public abstract class CustomService&lt;T&gt; {\r\n    \r\n        public static &lt;T&gt; Specification&lt;T&gt; bySearchWithFilter(Filter filter, Class&lt;T&gt; clazz) {\r\n    \r\n            return (Root&lt;T&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criterailBuilder) -&gt; {\r\n    \r\n                List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n    \r\n                // Add Predicates for tables to be joined\r\n                List&lt;JoinColumnProps&gt; joinColumnProps = filter.getJoinColumnProps();\r\n    \r\n                if (joinColumnProps != null &amp;&amp; !joinColumnProps.isEmpty()) {\r\n                    for (JoinColumnProps joinColumnProp : joinColumnProps) {\r\n                        addJoinColumnProps(predicates, joinColumnProp, criterailBuilder, root);\r\n                    }\r\n                }\r\n    \r\n                List&lt;AttributeFilter&gt; attributeFilters = filter.getAttributeFilters();\r\n    \r\n                if (attributeFilters != null &amp;&amp; !attributeFilters.isEmpty()) {\r\n    \r\n                    for (final AttributeFilter attributeFilter : attributeFilters) {\r\n                        addPredicates(predicates, attributeFilter, criterailBuilder, root);\r\n                    }\r\n                }\r\n    \r\n                if (predicates.isEmpty()) {\r\n                    return criterailBuilder.conjunction();\r\n                }\r\n    \r\n                return criterailBuilder.and(predicates.toArray(new Predicate[0]));\r\n            };\r\n        }\r\n    \r\n        private static &lt;T&gt; void addJoinColumnProps(List&lt;Predicate&gt; predicates, JoinColumnProps joinColumnProp,\r\n                                                   CriteriaBuilder criterailBuilder, Root&lt;T&gt; root) {\r\n    \r\n            AttributeFilter attributeFilter = joinColumnProp.getSearchAttrFilter();\r\n            Join&lt;Object, Object&gt; joinParent = root.join(joinColumnProp.getJoinColumnName());\r\n    \r\n            String property = attributeFilter.getField().getNameField();\r\n            Path expression = joinParent.get(property);\r\n    \r\n            addPredicate(predicates, attributeFilter, criterailBuilder, expression);\r\n        }\r\n    \r\n        private static &lt;T&gt; void addPredicates(List&lt;Predicate&gt; predicates, AttributeFilter attributeFilter,\r\n                                              CriteriaBuilder criterailBuilder, Root&lt;T&gt; root) {\r\n            String property = attributeFilter.getField().getNameField();\r\n            Path expression = root.get(property);\r\n    \r\n            addPredicate(predicates, attributeFilter, criterailBuilder, expression);\r\n        }\r\n    \r\n        private static void addPredicate(List&lt;Predicate&gt; predicates, AttributeFilter attributeFilter,\r\n                                         CriteriaBuilder criterailBuilder, Path expression) {\r\n            switch (attributeFilter.getOperator()) {\r\n                case &quot;=&quot;:\r\n                    predicates.add(criterailBuilder.equal(expression, attributeFilter.getValue()));\r\n                    break;\r\n                case &quot;LIKE&quot;:\r\n                    predicates.add(criterailBuilder.like(expression, &quot;%&quot; + attributeFilter.getValue() + &quot;%&quot;));\r\n                    break;\r\n                case &quot;IN&quot;:\r\n                    predicates.add(criterailBuilder.in(expression).value(attributeFilter.getValue()));\r\n                    break;\r\n                case &quot;&gt;&quot;:\r\n                    predicates.add(criterailBuilder.greaterThan(expression, (Comparable) attributeFilter.getValue()));\r\n                    break;\r\n                case &quot;&lt;&quot;:\r\n                    predicates.add(criterailBuilder.lessThan(expression, (Comparable) attributeFilter.getValue()));\r\n                    break;\r\n                case &quot;&gt;=&quot;:\r\n                    predicates.add(criterailBuilder.greaterThanOrEqualTo(expression, (Comparable) attributeFilter.getValue()));\r\n                    break;\r\n                case &quot;&lt;=&quot;:\r\n                    predicates.add(criterailBuilder.lessThanOrEqualTo(expression, (Comparable) attributeFilter.getValue()));\r\n                    break;\r\n                case &quot;!&quot;:\r\n                    predicates.add(criterailBuilder.notEqual(expression, attributeFilter.getValue()));\r\n                    break;\r\n                case &quot;IsNull&quot;:\r\n                    predicates.add(criterailBuilder.isNull(expression));\r\n                    break;\r\n                case &quot;NotNull&quot;:\r\n                    predicates.add(criterailBuilder.isNotNull(expression));\r\n                    break;\r\n                default:\r\n                    throw new IllegalArgumentException(attributeFilter.getOperator() + &quot; is not a valid predicate&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nMy repo:\r\n\r\n    \r\n        @Repository\r\n        public interface PositionRepository extends JpaRepository&lt;Position, Long&gt;, JpaSpecificationExecutor&lt;Position&gt;, PositionRepositoryCustom {\r\n        }\r\n    \r\n    \r\n        @Repository\r\n        public interface PositionRepositoryCustom {\r\n        \r\n            Map&lt;LocalDate, Long&gt; countByDays(int days);\r\n        }\r\n    \r\n    public class PositionRepositoryImpl implements PositionRepositoryCustom {\r\n    \r\n        @PersistenceContext\r\n        private EntityManager entityManager;\r\n    \r\n        @Override\r\n        public Map&lt;LocalDate, Long&gt; countByDays(int days) {\r\n    \r\n            CriteriaBuilder cb = entityManager.getCriteriaBuilder();\r\n            CriteriaQuery cq = cb.createQuery();\r\n    \r\n            Root&lt;Position&gt; position = cq.from(Position.class);\r\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n    \r\n            Instant endDate = Instant.now();\r\n            Instant startDate = endDate.minus(days, ChronoUnit.DAYS)\r\n                    .truncatedTo(ChronoUnit.DAYS);\r\n    \r\n            Expression dateWithoutTimeExp = cb.function(&quot;date&quot;, Instant.class, position.get(PositionModelFilter.MESSAGE_DATE.getNameField()));\r\n    \r\n            cq.multiselect(dateWithoutTimeExp, cb.count(position.get(PositionModelFilter.ID.getNameField())));\r\n    \r\n            cq.groupBy(dateWithoutTimeExp);\r\n    \r\n            predicates.add(cb.between(position.get(PositionModelFilter.MESSAGE_DATE.getNameField()),\r\n                    startDate, endDate));\r\n            cq.where(predicates.toArray(new Predicate[0]));\r\n    \r\n            Map&lt;LocalDate, Long&gt; resMap = new HashMap&lt;&gt;();\r\n            entityManager.createQuery(cq).getResultList().forEach(elem -&gt; {\r\n                Object[] mas = (Object[])elem;\r\n                resMap.put(((Date)mas[0]).toLocalDate(), (long)mas[1]);\r\n            });\r\n    \r\n            return resMap;\r\n        }\r\n    }\r\n\r\n    public interface JpaSpecificationExecutor&lt;T&gt; {\r\n        Optional&lt;T&gt; findOne(@Nullable Specification&lt;T&gt; spec);\r\n    \r\n        List&lt;T&gt; findAll(@Nullable Specification&lt;T&gt; spec);\r\n    \r\n        Page&lt;T&gt; findAll(@Nullable Specification&lt;T&gt; spec, Pageable pageable);\r\n    \r\n        List&lt;T&gt; findAll(@Nullable Specification&lt;T&gt; spec, Sort sort);\r\n    \r\n        long count(@Nullable Specification&lt;T&gt; spec);\r\n    \r\n        boolean exists(Specification&lt;T&gt; spec);\r\n    }\r\n\r\nI found the only solution to how to work with big data: I started making several limited queries:\r\n\r\n    int index = 0;\r\n            int limit = 10_000;\r\n    \r\n            while (true) {\r\n                log.debug(&quot;Загружается партия записей: &quot; + index);\r\n                List&lt;Position&gt; res = positionService.getAll(\r\n                                positionFilterView.getFilter(),\r\n                                PageRequest.of(index,\r\n                                        limit,\r\n                                        Sort.by(Sort.Order.asc(&quot;datetime&quot;)))\r\n                        ).stream().collect(Collectors.toList());\r\n    \r\n                if (res.isEmpty()) break;\r\n    \r\n                Table dataTable = new Table(UnitValue.createPercentArray(columnWidths));\r\n                res.forEach(elem -&gt; {\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(String.valueOf(num.incrementAndGet())).setTextAlignment(TextAlignment.CENTER)));\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getSsi().toString())).setTextAlignment(TextAlignment.CENTER));\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(PositionGrid.formatter.format(elem.getDatetime())).setTextAlignment(TextAlignment.CENTER)));\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getPosx().toString())).setTextAlignment(TextAlignment.CENTER));\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getPosy().toString())).setTextAlignment(TextAlignment.CENTER));\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getVelocity() != null) ? elem.getVelocity().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getRssi() != null) ? elem.getRssi().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getPathDelay() != null) ? elem.getPathDelay().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\r\n                    dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getBsId() != null) ? elem.getBsId().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\r\n                });\r\n    \r\n                pdfExporter.getDocument().add(dataTable);\r\n                //pdfExporter.getDocument().flush();\r\n    \r\n                index++;\r\n            }\r\n\r\nThe only problem is that 10 thousand records are written to the file in 1 minute. It&#39;s a very long time (\r\n\r\n","title":"How to read data by portions in Vaadin for export to PDF","body":"<p>Thanks cfrick for help.</p>\n<p>I have nice report by my page and I used Lazy Loading with filter and API Criteria:</p>\n<p>My method:</p>\n<pre><code>positionService.getAll(\n                    filter,\n                    PageRequest.of(query.getPage(),\n                            query.getPageSize(),\n                            Sort.by(springSortOrders))\n            ).stream();\n</code></pre>\n<p>My service:</p>\n<pre><code>@Service\npublic class PositionCustomService extends CustomService&lt;Position&gt; {\n\n    private final static Logger LOGGER = LogManager.getLogger(PositionCustomService.class);\n\n    private final PositionRepository repository;\n\n    @Autowired\n    public PositionCustomService(PositionRepository repository) {\n        this.repository = repository;\n    }\n\n    public Page&lt;Position&gt; getAll(PageRequest pageRequest) {\n        return repository.findAll(pageRequest);\n    }\n\n    public List&lt;Position&gt; getAll(Filter filter) {\n        return repository.findAll(bySearchWithFilter(filter, Position.class));\n    }\n\n    public Page&lt;Position&gt; getAll(Filter filter, PageRequest pageRequest) {\n        return repository.findAll(bySearchWithFilter(filter, Position.class), pageRequest);\n    }\n\n    public Map&lt;LocalDate, Long&gt; getCountByDays(int days) {\n        return repository.countByDays(days);\n    }\n}\n</code></pre>\n<p>My CustomService:</p>\n<pre><code>public abstract class CustomService&lt;T&gt; {\n\n    public static &lt;T&gt; Specification&lt;T&gt; bySearchWithFilter(Filter filter, Class&lt;T&gt; clazz) {\n\n        return (Root&lt;T&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criterailBuilder) -&gt; {\n\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n\n            // Add Predicates for tables to be joined\n            List&lt;JoinColumnProps&gt; joinColumnProps = filter.getJoinColumnProps();\n\n            if (joinColumnProps != null &amp;&amp; !joinColumnProps.isEmpty()) {\n                for (JoinColumnProps joinColumnProp : joinColumnProps) {\n                    addJoinColumnProps(predicates, joinColumnProp, criterailBuilder, root);\n                }\n            }\n\n            List&lt;AttributeFilter&gt; attributeFilters = filter.getAttributeFilters();\n\n            if (attributeFilters != null &amp;&amp; !attributeFilters.isEmpty()) {\n\n                for (final AttributeFilter attributeFilter : attributeFilters) {\n                    addPredicates(predicates, attributeFilter, criterailBuilder, root);\n                }\n            }\n\n            if (predicates.isEmpty()) {\n                return criterailBuilder.conjunction();\n            }\n\n            return criterailBuilder.and(predicates.toArray(new Predicate[0]));\n        };\n    }\n\n    private static &lt;T&gt; void addJoinColumnProps(List&lt;Predicate&gt; predicates, JoinColumnProps joinColumnProp,\n                                               CriteriaBuilder criterailBuilder, Root&lt;T&gt; root) {\n\n        AttributeFilter attributeFilter = joinColumnProp.getSearchAttrFilter();\n        Join&lt;Object, Object&gt; joinParent = root.join(joinColumnProp.getJoinColumnName());\n\n        String property = attributeFilter.getField().getNameField();\n        Path expression = joinParent.get(property);\n\n        addPredicate(predicates, attributeFilter, criterailBuilder, expression);\n    }\n\n    private static &lt;T&gt; void addPredicates(List&lt;Predicate&gt; predicates, AttributeFilter attributeFilter,\n                                          CriteriaBuilder criterailBuilder, Root&lt;T&gt; root) {\n        String property = attributeFilter.getField().getNameField();\n        Path expression = root.get(property);\n\n        addPredicate(predicates, attributeFilter, criterailBuilder, expression);\n    }\n\n    private static void addPredicate(List&lt;Predicate&gt; predicates, AttributeFilter attributeFilter,\n                                     CriteriaBuilder criterailBuilder, Path expression) {\n        switch (attributeFilter.getOperator()) {\n            case &quot;=&quot;:\n                predicates.add(criterailBuilder.equal(expression, attributeFilter.getValue()));\n                break;\n            case &quot;LIKE&quot;:\n                predicates.add(criterailBuilder.like(expression, &quot;%&quot; + attributeFilter.getValue() + &quot;%&quot;));\n                break;\n            case &quot;IN&quot;:\n                predicates.add(criterailBuilder.in(expression).value(attributeFilter.getValue()));\n                break;\n            case &quot;&gt;&quot;:\n                predicates.add(criterailBuilder.greaterThan(expression, (Comparable) attributeFilter.getValue()));\n                break;\n            case &quot;&lt;&quot;:\n                predicates.add(criterailBuilder.lessThan(expression, (Comparable) attributeFilter.getValue()));\n                break;\n            case &quot;&gt;=&quot;:\n                predicates.add(criterailBuilder.greaterThanOrEqualTo(expression, (Comparable) attributeFilter.getValue()));\n                break;\n            case &quot;&lt;=&quot;:\n                predicates.add(criterailBuilder.lessThanOrEqualTo(expression, (Comparable) attributeFilter.getValue()));\n                break;\n            case &quot;!&quot;:\n                predicates.add(criterailBuilder.notEqual(expression, attributeFilter.getValue()));\n                break;\n            case &quot;IsNull&quot;:\n                predicates.add(criterailBuilder.isNull(expression));\n                break;\n            case &quot;NotNull&quot;:\n                predicates.add(criterailBuilder.isNotNull(expression));\n                break;\n            default:\n                throw new IllegalArgumentException(attributeFilter.getOperator() + &quot; is not a valid predicate&quot;);\n        }\n    }\n}\n</code></pre>\n<p>My repo:</p>\n<pre><code>    @Repository\n    public interface PositionRepository extends JpaRepository&lt;Position, Long&gt;, JpaSpecificationExecutor&lt;Position&gt;, PositionRepositoryCustom {\n    }\n\n\n    @Repository\n    public interface PositionRepositoryCustom {\n    \n        Map&lt;LocalDate, Long&gt; countByDays(int days);\n    }\n\npublic class PositionRepositoryImpl implements PositionRepositoryCustom {\n\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    @Override\n    public Map&lt;LocalDate, Long&gt; countByDays(int days) {\n\n        CriteriaBuilder cb = entityManager.getCriteriaBuilder();\n        CriteriaQuery cq = cb.createQuery();\n\n        Root&lt;Position&gt; position = cq.from(Position.class);\n        List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n\n        Instant endDate = Instant.now();\n        Instant startDate = endDate.minus(days, ChronoUnit.DAYS)\n                .truncatedTo(ChronoUnit.DAYS);\n\n        Expression dateWithoutTimeExp = cb.function(&quot;date&quot;, Instant.class, position.get(PositionModelFilter.MESSAGE_DATE.getNameField()));\n\n        cq.multiselect(dateWithoutTimeExp, cb.count(position.get(PositionModelFilter.ID.getNameField())));\n\n        cq.groupBy(dateWithoutTimeExp);\n\n        predicates.add(cb.between(position.get(PositionModelFilter.MESSAGE_DATE.getNameField()),\n                startDate, endDate));\n        cq.where(predicates.toArray(new Predicate[0]));\n\n        Map&lt;LocalDate, Long&gt; resMap = new HashMap&lt;&gt;();\n        entityManager.createQuery(cq).getResultList().forEach(elem -&gt; {\n            Object[] mas = (Object[])elem;\n            resMap.put(((Date)mas[0]).toLocalDate(), (long)mas[1]);\n        });\n\n        return resMap;\n    }\n}\n\npublic interface JpaSpecificationExecutor&lt;T&gt; {\n    Optional&lt;T&gt; findOne(@Nullable Specification&lt;T&gt; spec);\n\n    List&lt;T&gt; findAll(@Nullable Specification&lt;T&gt; spec);\n\n    Page&lt;T&gt; findAll(@Nullable Specification&lt;T&gt; spec, Pageable pageable);\n\n    List&lt;T&gt; findAll(@Nullable Specification&lt;T&gt; spec, Sort sort);\n\n    long count(@Nullable Specification&lt;T&gt; spec);\n\n    boolean exists(Specification&lt;T&gt; spec);\n}\n</code></pre>\n<p>I found the only solution to how to work with big data: I started making several limited queries:</p>\n<pre><code>int index = 0;\n        int limit = 10_000;\n\n        while (true) {\n            log.debug(&quot;Загружается партия записей: &quot; + index);\n            List&lt;Position&gt; res = positionService.getAll(\n                            positionFilterView.getFilter(),\n                            PageRequest.of(index,\n                                    limit,\n                                    Sort.by(Sort.Order.asc(&quot;datetime&quot;)))\n                    ).stream().collect(Collectors.toList());\n\n            if (res.isEmpty()) break;\n\n            Table dataTable = new Table(UnitValue.createPercentArray(columnWidths));\n            res.forEach(elem -&gt; {\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(String.valueOf(num.incrementAndGet())).setTextAlignment(TextAlignment.CENTER)));\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getSsi().toString())).setTextAlignment(TextAlignment.CENTER));\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(PositionGrid.formatter.format(elem.getDatetime())).setTextAlignment(TextAlignment.CENTER)));\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getPosx().toString())).setTextAlignment(TextAlignment.CENTER));\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getPosy().toString())).setTextAlignment(TextAlignment.CENTER));\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getVelocity() != null) ? elem.getVelocity().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getRssi() != null) ? elem.getRssi().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getPathDelay() != null) ? elem.getPathDelay().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\n                dataTable.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getBsId() != null) ? elem.getBsId().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\n            });\n\n            pdfExporter.getDocument().add(dataTable);\n            //pdfExporter.getDocument().flush();\n\n            index++;\n        }\n</code></pre>\n<p>The only problem is that 10 thousand records are written to the file in 1 minute. It's a very long time (</p>\n"}],"owner":{"account_id":26746945,"reputation":91,"user_id":21110009,"display_name":"Алексей Жуков"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697598902,"creation_date":1697453527,"question_id":77301354,"body_markdown":"I have 2 billion records in MySQL.\r\n\r\nI use Vaadin Framework with Lazy Loading (https://vaadin.com/docs/v23/components/grid#lazy-loading) and filter (with callback):\r\n\r\n    private void showData(Filter filter) {\r\n            positionGrid.setItems(query -&gt; {\r\n                var vaadinSortOrders = query.getSortOrders();\r\n                var springSortOrders = new ArrayList&lt;Sort.Order&gt;();\r\n                for (QuerySortOrder so : vaadinSortOrders) {\r\n                    String colKey = so.getSorted();\r\n                    if (so.getDirection() == SortDirection.ASCENDING) {\r\n                        springSortOrders.add(Sort.Order.asc(colKey));\r\n                    } else if (so.getDirection() == SortDirection.DESCENDING) {\r\n                        springSortOrders.add(Sort.Order.desc(colKey));\r\n                    }\r\n                }\r\n                return positionService.getAll(\r\n                        filter,\r\n                        PageRequest.of(query.getPage(),\r\n                                query.getPageSize(),\r\n                                Sort.by(springSortOrders))\r\n                ).stream();\r\n            });\r\n        }\r\n\r\nI need export data in PDF report (I use itextpdf library). But I get an error:\r\n\r\n**java.lang.OutOfMemoryError: Java heap space**\r\n\r\nMy code:\r\n\r\n    private final PositionGrid positionGrid;\r\n\r\n...\r\n\r\n    positionGrid.getLazyDataView().getItems().forEach(elem -&gt; {\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(String.valueOf(num.incrementAndGet())).setTextAlignment(TextAlignment.CENTER)));\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getSsi().toString())).setTextAlignment(TextAlignment.CENTER));\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(PositionGrid.formatter.format(elem.getDatetime())).setTextAlignment(TextAlignment.CENTER)));\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getPosx().toString())).setTextAlignment(TextAlignment.CENTER));\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getPosy().toString())).setTextAlignment(TextAlignment.CENTER));\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getVelocity() != null) ? elem.getVelocity().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getRssi() != null) ? elem.getRssi().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getPathDelay() != null) ? elem.getPathDelay().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\r\n                table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getBsId() != null) ? elem.getBsId().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\r\n            });\r\n\r\nTell me please. How do I read the data in parts (I need write it to a PDF file)?\r\n\r\n\r\nThis is my Entity:\r\n\r\n    @Entity\r\n    @Table(name = &quot;Positions&quot;)\r\n    @Getter\r\n    @Setter\r\n    public class Position {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;id&quot;, nullable = false)\r\n        private Long id;\r\n    \r\n        @Column(name = &quot;datetime&quot;, nullable = false)\r\n        private Instant datetime;\r\n    \r\n        @Column(name = &quot;posx&quot;, nullable = false)\r\n        private Double posx;\r\n    \r\n        @Column(name = &quot;posy&quot;, nullable = false)\r\n        private Double posy;\r\n    \r\n        @Column(name = &quot;velocity&quot;)\r\n        private Double velocity;\r\n    \r\n        @Column(name = &quot;rssi&quot;)\r\n        private Short rssi;\r\n    \r\n        @Column(name = &quot;pathDelay&quot;)\r\n        private Short pathDelay;\r\n    \r\n        @Column(name = &quot;bs_id&quot;)\r\n        private Integer bsId;\r\n    \r\n        @Column(name = &quot;ssi&quot;, nullable = false)\r\n        private Long ssi;\r\n    }","title":"How to read data by portions in Vaadin for export to PDF","body":"<p>I have 2 billion records in MySQL.</p>\n<p>I use Vaadin Framework with Lazy Loading (<a href=\"https://vaadin.com/docs/v23/components/grid#lazy-loading\" rel=\"nofollow noreferrer\">https://vaadin.com/docs/v23/components/grid#lazy-loading</a>) and filter (with callback):</p>\n<pre><code>private void showData(Filter filter) {\n        positionGrid.setItems(query -&gt; {\n            var vaadinSortOrders = query.getSortOrders();\n            var springSortOrders = new ArrayList&lt;Sort.Order&gt;();\n            for (QuerySortOrder so : vaadinSortOrders) {\n                String colKey = so.getSorted();\n                if (so.getDirection() == SortDirection.ASCENDING) {\n                    springSortOrders.add(Sort.Order.asc(colKey));\n                } else if (so.getDirection() == SortDirection.DESCENDING) {\n                    springSortOrders.add(Sort.Order.desc(colKey));\n                }\n            }\n            return positionService.getAll(\n                    filter,\n                    PageRequest.of(query.getPage(),\n                            query.getPageSize(),\n                            Sort.by(springSortOrders))\n            ).stream();\n        });\n    }\n</code></pre>\n<p>I need export data in PDF report (I use itextpdf library). But I get an error:</p>\n<p><strong>java.lang.OutOfMemoryError: Java heap space</strong></p>\n<p>My code:</p>\n<pre><code>private final PositionGrid positionGrid;\n</code></pre>\n<p>...</p>\n<pre><code>positionGrid.getLazyDataView().getItems().forEach(elem -&gt; {\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(String.valueOf(num.incrementAndGet())).setTextAlignment(TextAlignment.CENTER)));\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getSsi().toString())).setTextAlignment(TextAlignment.CENTER));\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(PositionGrid.formatter.format(elem.getDatetime())).setTextAlignment(TextAlignment.CENTER)));\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getPosx().toString())).setTextAlignment(TextAlignment.CENTER));\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph(elem.getPosy().toString())).setTextAlignment(TextAlignment.CENTER));\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getVelocity() != null) ? elem.getVelocity().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getRssi() != null) ? elem.getRssi().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getPathDelay() != null) ? elem.getPathDelay().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\n            table.addCell(new Cell().setTextAlignment(TextAlignment.CENTER).add(new Paragraph((elem.getBsId() != null) ? elem.getBsId().toString() : &quot;&quot;)).setTextAlignment(TextAlignment.CENTER));\n        });\n</code></pre>\n<p>Tell me please. How do I read the data in parts (I need write it to a PDF file)?</p>\n<p>This is my Entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;Positions&quot;)\n@Getter\n@Setter\npublic class Position {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n\n    @Column(name = &quot;datetime&quot;, nullable = false)\n    private Instant datetime;\n\n    @Column(name = &quot;posx&quot;, nullable = false)\n    private Double posx;\n\n    @Column(name = &quot;posy&quot;, nullable = false)\n    private Double posy;\n\n    @Column(name = &quot;velocity&quot;)\n    private Double velocity;\n\n    @Column(name = &quot;rssi&quot;)\n    private Short rssi;\n\n    @Column(name = &quot;pathDelay&quot;)\n    private Short pathDelay;\n\n    @Column(name = &quot;bs_id&quot;)\n    private Integer bsId;\n\n    @Column(name = &quot;ssi&quot;, nullable = false)\n    private Long ssi;\n}\n</code></pre>\n"},{"tags":["java","algorithm","binary-search"],"comments":[{"owner":{"account_id":4127333,"reputation":34381,"user_id":3386109,"display_name":"user3386109"},"score":1,"creation_date":1566320989,"post_id":57578328,"comment_id":101617054,"body_markdown":"To find the first 4, treat 4 as greater than the target value, and 3 as less than the target value. **Don&#39;t** terminate the algorithm early when a value in the array is 4.","body":"To find the first 4, treat 4 as greater than the target value, and 3 as less than the target value. <b>Don&#39;t</b> terminate the algorithm early when a value in the array is 4."},{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":1,"creation_date":1566322047,"post_id":57578328,"comment_id":101617443,"body_markdown":"Just iterate backwards until you find a different value, storing the previous index (which you return at the end of the algorithm).","body":"Just iterate backwards until you find a different value, storing the previous index (which you return at the end of the algorithm)."},{"owner":{"account_id":4127333,"reputation":34381,"user_id":3386109,"display_name":"user3386109"},"score":4,"creation_date":1566322331,"post_id":57578328,"comment_id":101617565,"body_markdown":"@JacobG. Worst case, that results in an O(n) algorithm, which defeats the purpose of a binary search.","body":"@JacobG. Worst case, that results in an O(n) algorithm, which defeats the purpose of a binary search."}],"answers":[{"comments":[{"owner":{"account_id":11530548,"reputation":2452,"user_id":8449612,"display_name":"douyu"},"score":0,"creation_date":1566360354,"post_id":57579396,"comment_id":101626962,"body_markdown":"Thanks for your answer, but (min+max)/2 could be overflow.","body":"Thanks for your answer, but (min+max)/2 could be overflow."},{"owner":{"account_id":14956637,"reputation":1466,"user_id":10797718,"display_name":"Ben Souchet"},"score":0,"creation_date":1566365849,"post_id":57579396,"comment_id":101628126,"body_markdown":"Can you give me input values with which you get an overflow. By the way you can compute mid like this : `mid = min + ((max - min) / 2);`","body":"Can you give me input values with which you get an overflow. By the way you can compute mid like this : <code>mid = min + ((max - min) &#47; 2);</code>"}],"tags":[],"owner":{"account_id":14956637,"reputation":1466,"user_id":10797718,"display_name":"Ben Souchet"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1566505877,"creation_date":1566324666,"answer_id":57579396,"question_id":57578328,"body_markdown":"I think the implementation below will do the job correctly: \r\n\r\n    int firstOccurrence(int[] sequence, int x) {\r\n    \tint min = 0;\r\n    \tint max = sequence.length - 1;\r\n    \r\n    \tint result = -1;\r\n    \r\n    \twhile (min &lt;= max)\r\n    \t{\r\n    \t\t// find the mid value and compare it with x\r\n    \t\tint mid = min + ((max - min) / 2);\r\n    \r\n    \t\t// if x is found, update result and search towards left\r\n    \t\tif (x == sequence[mid]) {\r\n    \t\t\tresult = mid;\r\n    \t\t\tmax = mid - 1;\r\n    \t\t} else if (x &lt; sequence[mid]) {\r\n    \t\t\t// discard right half\r\n    \t\t\tmax = mid - 1;\r\n    \t\t} else {\r\n    \t\t\t// discard left half\r\n    \t\t\tmin = mid + 1;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t// return the leftmost index equal to x or -1 if not found\r\n    \treturn result;\r\n    }\r\n\r\n\r\n**Edit:**\r\n\r\nChange the way to compute mid to avoid overflow with larger sums\r\n```java\r\n// Previously, can overflow since we add two integer\r\nint mid = (min + max) / 2;\r\n\r\n// Now\r\nint mid = min + ((max - min) / 2);\r\n\r\n// Another way using the unsigned right shift operator\r\nint mid = (low + high) &gt;&gt;&gt; 1;\r\n// The left operands value (low + high) is moved right\r\n// by the number of bits specified (2 in this case) by the right operand and\r\n// shifted values are filled up with zeros.\r\n// The &gt;&gt;&gt; treats the value as unsigned\r\n```","title":"How to implement a lower_bound binary search algorithm in Java?","body":"<p>I think the implementation below will do the job correctly: </p>\n\n<pre><code>int firstOccurrence(int[] sequence, int x) {\n    int min = 0;\n    int max = sequence.length - 1;\n\n    int result = -1;\n\n    while (min &lt;= max)\n    {\n        // find the mid value and compare it with x\n        int mid = min + ((max - min) / 2);\n\n        // if x is found, update result and search towards left\n        if (x == sequence[mid]) {\n            result = mid;\n            max = mid - 1;\n        } else if (x &lt; sequence[mid]) {\n            // discard right half\n            max = mid - 1;\n        } else {\n            // discard left half\n            min = mid + 1;\n        }\n    }\n\n    // return the leftmost index equal to x or -1 if not found\n    return result;\n}\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>Change the way to compute mid to avoid overflow with larger sums</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Previously, can overflow since we add two integer\nint mid = (min + max) / 2;\n\n// Now\nint mid = min + ((max - min) / 2);\n\n// Another way using the unsigned right shift operator\nint mid = (low + high) &gt;&gt;&gt; 1;\n// The left operands value (low + high) is moved right\n// by the number of bits specified (2 in this case) by the right operand and\n// shifted values are filled up with zeros.\n// The &gt;&gt;&gt; treats the value as unsigned\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14956637,"reputation":1466,"user_id":10797718,"display_name":"Ben Souchet"},"score":0,"creation_date":1566367185,"post_id":57583627,"comment_id":101628544,"body_markdown":"If all elements in the sequence is greater than valueToFind you will return 0, this is an error, and if all elements in the sequence is smaller than valueToFind you will return length + 1, not a good return value.","body":"If all elements in the sequence is greater than valueToFind you will return 0, this is an error, and if all elements in the sequence is smaller than valueToFind you will return length + 1, not a good return value."},{"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"score":1,"creation_date":1566367532,"post_id":57583627,"comment_id":101628676,"body_markdown":"If all elements are greater, I will return zero.  That is what it&#39;s supposed to do.  If all elements are less, then I will return length, which is also what it&#39;s supposed to do.","body":"If all elements are greater, I will return zero.  That is what it&#39;s supposed to do.  If all elements are less, then I will return length, which is also what it&#39;s supposed to do."},{"owner":{"account_id":14956637,"reputation":1466,"user_id":10797718,"display_name":"Ben Souchet"},"score":0,"creation_date":1566367691,"post_id":57583627,"comment_id":101628732,"body_markdown":"And shifting right to do the division is not faster since the compiler will optimize `/ 2` but cannot do much with bit shifting, and not all programmers will understand this operation.","body":"And shifting right to do the division is not faster since the compiler will optimize <code>&#47; 2</code> but cannot do much with bit shifting, and not all programmers will understand this operation."},{"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"score":0,"creation_date":1566367779,"post_id":57583627,"comment_id":101628755,"body_markdown":"Shifting to the right is occasionally faster, but /2 also works just fine, even though it cannot be optimized to a shift unless the compiler can figure out that the operand is always positive.  The important part of that expression is to avoid overflow","body":"Shifting to the right is occasionally faster, but /2 also works just fine, even though it cannot be optimized to a shift unless the compiler can figure out that the operand is always positive.  The important part of that expression is to avoid overflow"},{"owner":{"account_id":14956637,"reputation":1466,"user_id":10797718,"display_name":"Ben Souchet"},"score":0,"creation_date":1566368704,"post_id":57583627,"comment_id":101629099,"body_markdown":"So if all values in the sequence are greater than valueToFind you return 0 and how can you tell the difference between a 0 return because your the first element in the sequence is valueToFind and when we didn’t find the value? In the OP’s post the goal is to find the index when the value firstly appeared.","body":"So if all values in the sequence are greater than valueToFind you return 0 and how can you tell the difference between a 0 return because your the first element in the sequence is valueToFind and when we didn’t find the value? In the OP’s post the goal is to find the index when the value firstly appeared."},{"owner":{"account_id":11530548,"reputation":2452,"user_id":8449612,"display_name":"douyu"},"score":0,"creation_date":1566371898,"post_id":57583627,"comment_id":101630498,"body_markdown":"According to this [post](https://ai.googleblog.com/2006/06/extra-extra-read-all-about-it-nearly.html) and this [tutorial](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html) here you should use `&gt;&gt;&gt;` rather than using `&gt;&gt;` in java.","body":"According to this <a href=\"https://ai.googleblog.com/2006/06/extra-extra-read-all-about-it-nearly.html\" rel=\"nofollow noreferrer\">post</a> and this <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html\" rel=\"nofollow noreferrer\">tutorial</a> here you should use <code>&gt;&gt;&gt;</code> rather than using <code>&gt;&gt;</code> in java."},{"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"score":1,"creation_date":1566389516,"post_id":57583627,"comment_id":101639900,"body_markdown":"@BSO you just check, of course.  The OP asked for an equivalent of C++ lower_bound, and that is what I provided.  I also explained exactly what it does an gave it a name that makes it obvious.  It turns out that that this contract is also the most convenient and efficient for cases in which you specifically want to search for the position of the *first* occurrence.  Think of some realistic use cases and try it.","body":"@BSO you just check, of course.  The OP asked for an equivalent of C++ lower_bound, and that is what I provided.  I also explained exactly what it does an gave it a name that makes it obvious.  It turns out that that this contract is also the most convenient and efficient for cases in which you specifically want to search for the position of the <i>first</i> occurrence.  Think of some realistic use cases and try it."},{"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"score":0,"creation_date":1566389921,"post_id":57583627,"comment_id":101640152,"body_markdown":"@Aoerz, do you understand why `&gt;&gt;&gt;` is recommended?  My search is not broken, since `pos + ((limit-pos)&gt;&gt;1)` will never overflow.  `(pos + limit) &gt;&gt;&gt; 1` also works, even though it *does* overflow.   I think it&#39;s a little too clever.","body":"@Aoerz, do you understand why <code>&gt;&gt;&gt;</code> is recommended?  My search is not broken, since <code>pos + ((limit-pos)&gt;&gt;1)</code> will never overflow.  <code>(pos + limit) &gt;&gt;&gt; 1</code> also works, even though it <i>does</i> overflow.   I think it&#39;s a little too clever."}],"tags":[],"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1566353970,"creation_date":1566353970,"answer_id":57583627,"question_id":57578328,"body_markdown":"Building on this answer to another binary search question: \r\n\r\nhttps://stackoverflow.com/questions/39416560/how-can-i-simplify-this-working-binary-search-code-in-c/39417165#39417165\r\n\r\nThis is a search that is equivalent to `lower_bound` from C++.  It returns the number of elements smaller than the value you want to find.  That would be\r\nthe index of the first occurrence, or where one would be inserted if there is no occurrence:\r\n\r\n    int numSmaller(int[] seq, int valueToFind)\r\n    {\r\n        int pos=0;\r\n        int limit=seq.length;\r\n        while(pos&lt;limit)\r\n        {\r\n            int testpos = pos+((limit-pos)&gt;&gt;1);\r\n    \r\n            if (seq[testpos]&lt;valueToFind)\r\n                pos=testpos+1;\r\n            else\r\n                limit=testpos;\r\n        }\r\n        return pos;\r\n    }\r\n\r\nNote that we only need to do one comparison per iteration.\r\n\r\nThe linked answer highlights several advantages of writing a binary search this way.","title":"How to implement a lower_bound binary search algorithm in Java?","body":"<p>Building on this answer to another binary search question: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/39416560/how-can-i-simplify-this-working-binary-search-code-in-c/39417165#39417165\">How can I simplify this working Binary Search code in C?</a></p>\n\n<p>This is a search that is equivalent to <code>lower_bound</code> from C++.  It returns the number of elements smaller than the value you want to find.  That would be\nthe index of the first occurrence, or where one would be inserted if there is no occurrence:</p>\n\n<pre><code>int numSmaller(int[] seq, int valueToFind)\n{\n    int pos=0;\n    int limit=seq.length;\n    while(pos&lt;limit)\n    {\n        int testpos = pos+((limit-pos)&gt;&gt;1);\n\n        if (seq[testpos]&lt;valueToFind)\n            pos=testpos+1;\n        else\n            limit=testpos;\n    }\n    return pos;\n}\n</code></pre>\n\n<p>Note that we only need to do one comparison per iteration.</p>\n\n<p>The linked answer highlights several advantages of writing a binary search this way.</p>\n"},{"comments":[{"owner":{"account_id":2972301,"reputation":444,"user_id":2524114,"accept_rate":29,"display_name":"n j"},"score":0,"creation_date":1642187295,"post_id":59369329,"comment_id":125013136,"body_markdown":"Do you think a person asking how to implement a lower bound in java would benefit from a recursive code instead of iterative one?","body":"Do you think a person asking how to implement a lower bound in java would benefit from a recursive code instead of iterative one?"}],"tags":[],"owner":{"account_id":14872766,"reputation":69,"user_id":10742104,"display_name":"Ijlal H"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576567236,"creation_date":1576567236,"answer_id":59369329,"question_id":57578328,"body_markdown":"It think it will help you\r\n&lt;br&gt;\r\n\r\n    public static boolean binarysearch(int[] data, int target, int low, int high){\r\n        if(low&gt;high){\r\n            System.out.println(&quot;Target not found&quot;);\r\n            return false;}\r\n            else{\r\n                    int mid=(low+high)/2;\r\n                    if(target==data[mid])\r\n                        return true;\r\n                    else if(target&lt;data[mid])\r\n                        return binarysearch(data, target, low, high);\r\n                    else\r\n                        return binarysearch(data, target, low, high);\r\n                    }\r\n    }","title":"How to implement a lower_bound binary search algorithm in Java?","body":"<p>It think it will help you\n<br></p>\n\n<pre><code>public static boolean binarysearch(int[] data, int target, int low, int high){\n    if(low&gt;high){\n        System.out.println(\"Target not found\");\n        return false;}\n        else{\n                int mid=(low+high)/2;\n                if(target==data[mid])\n                    return true;\n                else if(target&lt;data[mid])\n                    return binarysearch(data, target, low, high);\n                else\n                    return binarysearch(data, target, low, high);\n                }\n}\n</code></pre>\n"}],"owner":{"account_id":11530548,"reputation":2452,"user_id":8449612,"display_name":"douyu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1942,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":57583627,"answer_count":3,"score":1,"last_activity_date":1697598899,"creation_date":1566320015,"question_id":57578328,"body_markdown":"I want to find a target value 4 firstly appeared place in a sequence [1, 1, 2, 3, 3, 3, 3, 4, 4, 4, 5, 5, 6]. when I use java.util.Arrays.binaySearch, it returns index is 9, but I expected 7.    \r\n\r\nI look java.util.Arrays.binaySearch [source code](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/Arrays.java)   \r\n\r\nand I found some comments:\r\n&gt; If the array contains multiple elements with the specified value, there is no guarantee which one will be found.\r\n\r\n So how to implement a lower_bound binary search algorithm in Java, which returns the target value firstly appeared place.\r\n\r\nNote: The lower_bound concept comes from C++, but I don&#39;t understand C++ well.","title":"How to implement a lower_bound binary search algorithm in Java?","body":"<p>I want to find a target value 4 firstly appeared place in a sequence [1, 1, 2, 3, 3, 3, 3, 4, 4, 4, 5, 5, 6]. when I use java.util.Arrays.binaySearch, it returns index is 9, but I expected 7.    </p>\n\n<p>I look java.util.Arrays.binaySearch <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/Arrays.java\" rel=\"nofollow noreferrer\">source code</a>   </p>\n\n<p>and I found some comments:</p>\n\n<blockquote>\n  <p>If the array contains multiple elements with the specified value, there is no guarantee which one will be found.</p>\n</blockquote>\n\n<p>So how to implement a lower_bound binary search algorithm in Java, which returns the target value firstly appeared place.</p>\n\n<p>Note: The lower_bound concept comes from C++, but I don't understand C++ well.</p>\n"},{"tags":["python","java","android","kotlin","mobile"],"answers":[{"tags":[],"owner":{"account_id":6799808,"reputation":21,"user_id":5233517,"display_name":"Gold Yon War"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697598634,"creation_date":1697598634,"answer_id":77313276,"question_id":77313006,"body_markdown":"To read all items from Firebase Firestore database in Kotlin, you can use the following steps:\r\n\r\n - Create a reference to the collection that you want to read. \r\n - Get a snapshot of the collection.\r\n - Iterate over the snapshot and get the data from each item.\r\n\r\nThe following code you can see how to read all from users collection.\r\n\r\n    val db = FirebaseFirestore.getInstance()\r\n    val usersRef = db.collection(&quot;users&quot;)\r\n    \r\n    usersRef.get().addOnSuccessListener { snapshot -&gt;\r\n        for (document in snapshot.documents) {\r\n            val user = document.toObject(User::class.java)\r\n    \r\n            // Do something with the user data.\r\n        }\r\n    }\r\n\r\n","title":"How to read all items from firebasestore database. in kotlin","body":"<p>To read all items from Firebase Firestore database in Kotlin, you can use the following steps:</p>\n<ul>\n<li>Create a reference to the collection that you want to read.</li>\n<li>Get a snapshot of the collection.</li>\n<li>Iterate over the snapshot and get the data from each item.</li>\n</ul>\n<p>The following code you can see how to read all from users collection.</p>\n<pre><code>val db = FirebaseFirestore.getInstance()\nval usersRef = db.collection(&quot;users&quot;)\n\nusersRef.get().addOnSuccessListener { snapshot -&gt;\n    for (document in snapshot.documents) {\n        val user = document.toObject(User::class.java)\n\n        // Do something with the user data.\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26060570,"reputation":1,"user_id":19910548,"display_name":"Hom Sokhim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1697598634,"creation_date":1697591992,"question_id":77313006,"body_markdown":"[enter image description here](https://i.stack.imgur.com/3Ieyk.png)\r\n\r\n\r\nPlease help me! I really need for help. I am a junior developer from cambodia. I use android studio for build app for project at school. This problem it really effect for my project. So I can not do this. ","title":"How to read all items from firebasestore database. in kotlin","body":"<p><a href=\"https://i.stack.imgur.com/3Ieyk.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Please help me! I really need for help. I am a junior developer from cambodia. I use android studio for build app for project at school. This problem it really effect for my project. So I can not do this.</p>\n"},{"tags":["java","spring-boot","spring-security"],"answers":[{"comments":[{"owner":{"account_id":4054391,"reputation":929,"user_id":3332879,"accept_rate":38,"display_name":"Cugomastik"},"score":0,"creation_date":1668612747,"post_id":72023381,"comment_id":131448764,"body_markdown":"Can you share the whole PasswordEncoder in this case please?","body":"Can you share the whole PasswordEncoder in this case please?"},{"owner":{"account_id":3933016,"reputation":134,"user_id":3250678,"accept_rate":88,"display_name":"Kosz"},"score":0,"creation_date":1672708958,"post_id":72023381,"comment_id":132332283,"body_markdown":"@Cugomastik\nThe PasswordEncoder can be any class that implements the [PasswordEncoder interface](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/crypto/password/PasswordEncoder.html).  \nFor example, if you want BCrypt to be the default, do something like this\n`setDefaultPasswordEncoderForMatches(new BCryptPasswordEncoder());`","body":"@Cugomastik The PasswordEncoder can be any class that implements the <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/crypto/password/PasswordEncoder.html\" rel=\"nofollow noreferrer\">PasswordEncoder interface</a>.   For example, if you want BCrypt to be the default, do something like this <code>setDefaultPasswordEncoderForMatches(new BCryptPasswordEncoder());</code>"}],"tags":[],"owner":{"account_id":8761405,"reputation":1504,"user_id":6551263,"display_name":"Chetan Ahirrao"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1651034563,"creation_date":1651034563,"answer_id":72023381,"question_id":72021698,"body_markdown":"For Passwords with no id, you can set a Default Password Encoder using DelegatingPasswordEncoder method\r\n```setDefaultPasswordEncoderForMatches(PasswordEncoder defaultPasswordEncoderForMatches)```\r\n\r\nIf this is not set, spring uses ```UnmappedIdPasswordEncoder``` by default, which throws ```IllegalArgumentException``` ","title":"Spring Security DelegatingPasswordEncoder doesn&#39;t validate passwords that have no prefix","body":"<p>For Passwords with no id, you can set a Default Password Encoder using DelegatingPasswordEncoder method\n<code>setDefaultPasswordEncoderForMatches(PasswordEncoder defaultPasswordEncoderForMatches)</code></p>\n<p>If this is not set, spring uses <code>UnmappedIdPasswordEncoder</code> by default, which throws <code>IllegalArgumentException</code></p>\n"},{"tags":[],"owner":{"account_id":9098845,"reputation":11,"user_id":7483195,"display_name":"user101871"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688839957,"creation_date":1688839957,"answer_id":76644334,"question_id":72021698,"body_markdown":"I believe the following will work also:\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder(){\r\n      \r\n        Map&lt;String,PasswordEncoder&gt; encoders= new HashMap&lt;&gt;();\r\n        encoders.put(null, NoOpPasswordEncoder.getInstance());\r\n        encoders.put(&quot;noop&quot;, NoOpPasswordEncoder.getInstance());\r\n        encoders.put(&quot;bcrypt&quot;,new BCryptPasswordEncoder());\r\n        encoders.put(&quot;scrypt&quot;,new SCryptPasswordEncoder());\r\n        return new DelegatingPasswordEncoder(&quot;noop&quot;,encoders);\r\n    }","title":"Spring Security DelegatingPasswordEncoder doesn&#39;t validate passwords that have no prefix","body":"<p>I believe the following will work also:</p>\n<pre><code>@Bean\npublic PasswordEncoder passwordEncoder(){\n  \n    Map&lt;String,PasswordEncoder&gt; encoders= new HashMap&lt;&gt;();\n    encoders.put(null, NoOpPasswordEncoder.getInstance());\n    encoders.put(&quot;noop&quot;, NoOpPasswordEncoder.getInstance());\n    encoders.put(&quot;bcrypt&quot;,new BCryptPasswordEncoder());\n    encoders.put(&quot;scrypt&quot;,new SCryptPasswordEncoder());\n    return new DelegatingPasswordEncoder(&quot;noop&quot;,encoders);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19234622,"reputation":1701,"user_id":14055826,"display_name":"13ibrahimov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697598071,"creation_date":1697597519,"answer_id":77313236,"question_id":72021698,"body_markdown":"You&#39;ve called DelegatingPasswordEncoder constructor with the following signature:\r\n\r\n    public DelegatingPasswordEncoder(String idForEncode, Map&lt;String,PasswordEncoder&gt; idToPasswordEncoder)\r\n\r\n```idForEncode``` param is used to determine which PasswordEncoder to employ when using the ```encode()``` method. E.g. when a user creates an account or changes their password, your app will hash the password using the PasswordEncoder specified by idForEncode. In your case, NoOpPasswordEncoder.\r\n\r\nHowever, for password matching, such as during a user login, the ```matches()``` method of the PasswordEncoder is used. DelegatingPasswordEncoder doesn&#39;t rely on the idForEncode param for password matching. As mentioned in the verified answer you should use `setDefaultPasswordEncoderForMatches(PasswordEncoder defaultPasswordEncoderForMatches)` method to define the PasswordEncoder to delegate to in case your passwords do not include an id prefix.\r\n\r\nThink of a scenario when you decide to change the encoding algorithm in your app for newly registered users to BCrypt, but for old users whose passwords were hashed via NoOpPasswordEncoder &amp; already stored, you want to keep using NoOpPasswordEncoder for match verification:\r\n\r\n    @Bean\r\n    PasswordEncoder passwordEncoder() {\r\n        Map&lt;String, PasswordEncoder&gt; encoders = new HashMap&lt;&gt;();\r\n        encoders.put(&quot;noop&quot;, NoOpPasswordEncoder.getInstance());\r\n        encoders.put(&quot;bcrypt&quot;, new BCryptPasswordEncoder());\r\n        encoders.put(&quot;scrypt&quot;, new SCryptPasswordEncoder());\r\n    \r\n        var passwordEncoder = new DelegatingPasswordEncoder(&quot;bcrypt&quot;, encoders);\r\n        passwordEncoder.setDefaultPasswordEncoderForMatches(NoOpPasswordEncoder.getInstance());\r\n\r\n        return passwordEncoder;\r\n    }","title":"Spring Security DelegatingPasswordEncoder doesn&#39;t validate passwords that have no prefix","body":"<p>You've called DelegatingPasswordEncoder constructor with the following signature:</p>\n<pre><code>public DelegatingPasswordEncoder(String idForEncode, Map&lt;String,PasswordEncoder&gt; idToPasswordEncoder)\n</code></pre>\n<p><code>idForEncode</code> param is used to determine which PasswordEncoder to employ when using the <code>encode()</code> method. E.g. when a user creates an account or changes their password, your app will hash the password using the PasswordEncoder specified by idForEncode. In your case, NoOpPasswordEncoder.</p>\n<p>However, for password matching, such as during a user login, the <code>matches()</code> method of the PasswordEncoder is used. DelegatingPasswordEncoder doesn't rely on the idForEncode param for password matching. As mentioned in the verified answer you should use <code>setDefaultPasswordEncoderForMatches(PasswordEncoder defaultPasswordEncoderForMatches)</code> method to define the PasswordEncoder to delegate to in case your passwords do not include an id prefix.</p>\n<p>Think of a scenario when you decide to change the encoding algorithm in your app for newly registered users to BCrypt, but for old users whose passwords were hashed via NoOpPasswordEncoder &amp; already stored, you want to keep using NoOpPasswordEncoder for match verification:</p>\n<pre><code>@Bean\nPasswordEncoder passwordEncoder() {\n    Map&lt;String, PasswordEncoder&gt; encoders = new HashMap&lt;&gt;();\n    encoders.put(&quot;noop&quot;, NoOpPasswordEncoder.getInstance());\n    encoders.put(&quot;bcrypt&quot;, new BCryptPasswordEncoder());\n    encoders.put(&quot;scrypt&quot;, new SCryptPasswordEncoder());\n\n    var passwordEncoder = new DelegatingPasswordEncoder(&quot;bcrypt&quot;, encoders);\n    passwordEncoder.setDefaultPasswordEncoderForMatches(NoOpPasswordEncoder.getInstance());\n\n    return passwordEncoder;\n}\n</code></pre>\n"}],"owner":{"account_id":21522619,"reputation":19,"user_id":15863607,"display_name":"sergio jauregui"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":831,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72023381,"answer_count":3,"score":0,"last_activity_date":1697598071,"creation_date":1651016415,"question_id":72021698,"body_markdown":"I have recently implemented the DelegatingPasswordEncoder that delegates to PassworEncoders instances upon the prefix of the stored password. The problem is that for the previous stored password that has no prefix it throws an error &#39;There is no PasswordEncoder mapped for the id &quot;null&quot;&#39;.I have been told that to defining a default PasswordEncoder to authenticate password that has no prefix the PasswordEncoder prefix has to be specified it in the first parameter of the DelegatingPasswordEncoder () constructor as I specified in the below code example because the stored password are encoded as plain text.\r\n\r\n```\r\n@Bean\r\n    public PasswordEncoder passwordEncoder(){\r\n      \r\n        Map&lt;String,PasswordEncoder&gt; encoders= new HashMap&lt;&gt;();\r\n        encoders.put(&quot;&quot;, NoOpPasswordEncoder.getInstance());\r\n        encoders.put(&quot;noop&quot;, NoOpPasswordEncoder.getInstance());\r\n        encoders.put(&quot;bcrypt&quot;,new BCryptPasswordEncoder());\r\n        encoders.put(&quot;scrypt&quot;,new SCryptPasswordEncoder());\r\n        return new DelegatingPasswordEncoder(&quot;noop&quot;,encoders);\r\n    }\r\n```","title":"Spring Security DelegatingPasswordEncoder doesn&#39;t validate passwords that have no prefix","body":"<p>I have recently implemented the DelegatingPasswordEncoder that delegates to PassworEncoders instances upon the prefix of the stored password. The problem is that for the previous stored password that has no prefix it throws an error 'There is no PasswordEncoder mapped for the id &quot;null&quot;'.I have been told that to defining a default PasswordEncoder to authenticate password that has no prefix the PasswordEncoder prefix has to be specified it in the first parameter of the DelegatingPasswordEncoder () constructor as I specified in the below code example because the stored password are encoded as plain text.</p>\n<pre><code>@Bean\n    public PasswordEncoder passwordEncoder(){\n      \n        Map&lt;String,PasswordEncoder&gt; encoders= new HashMap&lt;&gt;();\n        encoders.put(&quot;&quot;, NoOpPasswordEncoder.getInstance());\n        encoders.put(&quot;noop&quot;, NoOpPasswordEncoder.getInstance());\n        encoders.put(&quot;bcrypt&quot;,new BCryptPasswordEncoder());\n        encoders.put(&quot;scrypt&quot;,new SCryptPasswordEncoder());\n        return new DelegatingPasswordEncoder(&quot;noop&quot;,encoders);\n    }\n</code></pre>\n"},{"tags":["java","kotlin","bigdecimal"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1611795210,"post_id":65929370,"comment_id":116568470,"body_markdown":"Are you using Java, or Kotlin?  It makes a difference.  You&#39;ll need to pick one to get an accurate answer.","body":"Are you using Java, or Kotlin?  It makes a difference.  You&#39;ll need to pick one to get an accurate answer."},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":1,"creation_date":1697536493,"post_id":65929370,"comment_id":136289235,"body_markdown":"You can&#39;t actually do this equation using entirely `BigDecimal` numbers because Java&#39;s BigDecimal has no `pow` function (or any exponentiation operation by whatever name) that takes a `BigDecimal` argument. `BigDecimal` is not designed for scientific calculations like this one; its main use is for financial/accounting and similar domains.","body":"You can&#39;t actually do this equation using entirely <code>BigDecimal</code> numbers because Java&#39;s BigDecimal has no <code>pow</code> function (or any exponentiation operation by whatever name) that takes a <code>BigDecimal</code> argument. <code>BigDecimal</code> is not designed for scientific calculations like this one; its main use is for financial/accounting and similar domains."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1697598298,"post_id":65929370,"comment_id":136298654,"body_markdown":"To use a fractional exponent, find a third-party library. See related Questions: [here](https://stackoverflow.com/q/3579779/642706), [here](https://stackoverflow.com/q/11848887/642706), [here](https://stackoverflow.com/q/16441769/642706).","body":"To use a fractional exponent, find a third-party library. See related Questions: <a href=\"https://stackoverflow.com/q/3579779/642706\">here</a>, <a href=\"https://stackoverflow.com/q/11848887/642706\">here</a>, <a href=\"https://stackoverflow.com/q/16441769/642706\">here</a>."}],"answers":[{"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1611803035,"post_id":65929521,"comment_id":116569981,"body_markdown":"In Kotlin, the [BigDecimal.plus](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/java.math.-big-decimal/plus.html) function is an operator function which [overloads](https://kotlinlang.org/docs/reference/operator-overloading.html#binary-operations) `+`. Kotlin also does away with the `new` keyword.","body":"In Kotlin, the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/java.math.-big-decimal/plus.html\" rel=\"nofollow noreferrer\">BigDecimal.plus</a> function is an operator function which <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html#binary-operations\" rel=\"nofollow noreferrer\">overloads</a> <code>+</code>. Kotlin also does away with the <code>new</code> keyword."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1611803122,"post_id":65929521,"comment_id":116569999,"body_markdown":"@slaw, thanks I did not notice the Kotlin tag","body":"@slaw, thanks I did not notice the Kotlin tag"}],"tags":[],"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1611794958,"creation_date":1611794958,"answer_id":65929521,"question_id":65929370,"body_markdown":"*dividing 1 by 251 is not accurate and this expression always returns 0* \r\n\r\nThis would result in Integer division,  To cure integer division you can do `1.00/251`.  \r\n\r\nAlso you are missing a `new` before `BigDecimal(0.02)`, but even if you did there there is no operator `+` for `BigDecimal` and the `plus` method should be used.","title":"Expressions with BigDecimal Java / Kotlin","body":"<p><em>dividing 1 by 251 is not accurate and this expression always returns 0</em></p>\n<p>This would result in Integer division,  To cure integer division you can do <code>1.00/251</code>.</p>\n<p>Also you are missing a <code>new</code> before <code>BigDecimal(0.02)</code>, but even if you did there there is no operator <code>+</code> for <code>BigDecimal</code> and the <code>plus</code> method should be used.</p>\n"}],"owner":{"account_id":15782522,"reputation":61,"user_id":15083614,"display_name":"Jo&#227;o Pedro"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10364,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1697598061,"creation_date":1611793564,"question_id":65929370,"body_markdown":"I need help from those who understand Java / Kotlin.\r\n\r\nI would like to perform some calculations with BigDecimal\r\n\r\nHow would the expression below look using BigDecimal?\r\n\r\n**(1 + 0.02) ^ (1 / 251) - 1**\r\n\r\nI tried to do like this:\r\n\r\n    val x = (BigDecimal.ONE + BigDecimal(0.02)).pow(1/251) - 1\r\n\r\nHowever, dividing 1 by 251 is not accurate and this expression always returns 0\r\n\r\n\r\n \r\n\r\n","title":"Expressions with BigDecimal Java / Kotlin","body":"<p>I need help from those who understand Java / Kotlin.</p>\n<p>I would like to perform some calculations with BigDecimal</p>\n<p>How would the expression below look using BigDecimal?</p>\n<p><strong>(1 + 0.02) ^ (1 / 251) - 1</strong></p>\n<p>I tried to do like this:</p>\n<pre><code>val x = (BigDecimal.ONE + BigDecimal(0.02)).pow(1/251) - 1\n</code></pre>\n<p>However, dividing 1 by 251 is not accurate and this expression always returns 0</p>\n"},{"tags":["java","bash","version","dependency-management"],"comments":[{"owner":{"account_id":327698,"reputation":5680,"user_id":650228,"accept_rate":78,"display_name":"kittylyst"},"score":0,"creation_date":1315402689,"post_id":7334754,"comment_id":8845269,"body_markdown":"Java 5 has been end-of-life for quite a long time. Java 6 will be end-of-life very soon. You should be moving to Java 6 as a priority, and to 7 as soon as you can.","body":"Java 5 has been end-of-life for quite a long time. Java 6 will be end-of-life very soon. You should be moving to Java 6 as a priority, and to 7 as soon as you can."},{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":1,"creation_date":1315402707,"post_id":7334754,"comment_id":8845275,"body_markdown":"[What have you tried?](http://mattgemmell.com/2008/12/08/what-have-you-tried)","body":"<a href=\"http://mattgemmell.com/2008/12/08/what-have-you-tried\" rel=\"nofollow noreferrer\">What have you tried?</a>"},{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1315404998,"post_id":7334754,"comment_id":8846018,"body_markdown":"@Brian: Nothing; My hope is that someone has a &quot;bash search path function&quot; handy.","body":"@Brian: Nothing; My hope is that someone has a &quot;bash search path function&quot; handy."},{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1315405206,"post_id":7334754,"comment_id":8846097,"body_markdown":"@kittylyst: This is a minimal requirement. My software doesn&#39;t need Java 6 features, so there is no point forcing users for something better. But thanks for pointing it out anyway.","body":"@kittylyst: This is a minimal requirement. My software doesn&#39;t need Java 6 features, so there is no point forcing users for something better. But thanks for pointing it out anyway."}],"answers":[{"comments":[{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1315405134,"post_id":7334780,"comment_id":8846068,"body_markdown":"This is very close to what I want. Do you know of a version which also searches `$PATH` before it calls `locate` (which isn&#39;t always available)?","body":"This is very close to what I want. Do you know of a version which also searches <code>$PATH</code> before it calls <code>locate</code> (which isn&#39;t always available)?"},{"owner":{"account_id":390056,"reputation":588,"user_id":1652408,"accept_rate":83,"display_name":"Ravi"},"score":0,"creation_date":1456693648,"post_id":7334780,"comment_id":59054156,"body_markdown":"both links dont work and I checked my internet twice :-)","body":"both links dont work and I checked my internet twice :-)"},{"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"score":0,"creation_date":1456707608,"post_id":7334780,"comment_id":59058513,"body_markdown":"@Ravi, right I will edit those links, you could use `java -version 2&gt;&amp;1 &gt;/dev/null | grep &#39;java version&#39; | awk &#39;{print $3}&#39;` by the time","body":"@Ravi, right I will edit those links, you could use <code>java -version 2&gt;&amp;1 &gt;&#47;dev&#47;null | grep &#39;java version&#39; | awk &#39;{print $3}&#39;</code> by the time"},{"owner":{"account_id":9097660,"reputation":9382,"user_id":6771046,"display_name":"U880D"},"score":2,"creation_date":1521110206,"post_id":7334780,"comment_id":85596213,"body_markdown":"If interested in the numerical part only and for further usage in path variables, you may use something like `java -version 2&gt;&amp;1 | head -1 | cut -d &#39;&quot;&#39; -f 2`","body":"If interested in the numerical part only and for further usage in path variables, you may use something like <code>java -version 2&gt;&amp;1 | head -1 | cut -d &#39;&quot;&#39; -f 2</code>"}],"tags":[],"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"comment_count":4,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1456707636,"creation_date":1315402609,"answer_id":7334780,"question_id":7334754,"body_markdown":"You can issue `java -version` and read &amp; parse the output\r\n\r\n\r\n    java -version 2&gt;&amp;1 &gt;/dev/null | grep &#39;java version&#39; | awk &#39;{print $3}&#39;\r\n\r\n","title":"Correct way to check Java version from BASH script","body":"<p>You can issue <code>java -version</code> and read &amp; parse the output</p>\n\n<pre><code>java -version 2&gt;&amp;1 &gt;/dev/null | grep 'java version' | awk '{print $3}'\n</code></pre>\n"},{"comments":[{"owner":{"account_id":249565,"reputation":9766,"user_id":525725,"accept_rate":67,"display_name":"Emmanuel Bourg"},"score":10,"creation_date":1407537032,"post_id":7335120,"comment_id":39269183,"body_markdown":"The result of &#39;java -version&#39; with OpenJDK 8 is slightly different, &quot;java&quot; is replaced by &quot;openjdk&quot; in the output. This expression works with both cases: `sed &#39;s/.*version &quot;\\(.*\\)\\.\\(.*\\)\\..*&quot;/\\1\\2/; 1q&#39;`","body":"The result of &#39;java -version&#39; with OpenJDK 8 is slightly different, &quot;java&quot; is replaced by &quot;openjdk&quot; in the output. This expression works with both cases: <code>sed &#39;s&#47;.*version &quot;\\(.*\\)\\.\\(.*\\)\\..*&quot;&#47;\\1\\2&#47;; 1q&#39;</code>"},{"owner":{"account_id":37860,"reputation":5949,"user_id":108368,"accept_rate":45,"display_name":"CodeBuddy"},"score":1,"creation_date":1413444725,"post_id":7335120,"comment_id":41447961,"body_markdown":"If JAVA_TOOL_OPTIONS is set the output is again slightly different, the java version is not on the first line. eg: Picked up JAVA_TOOL_OPTIONS: -agentlib:hprof\njava version &quot;1.7.0_60&quot;\nJava(TM) SE Runtime Environment (build 1.7.0_60-b19)\nJava HotSpot(TM) 64-Bit Server VM (build 24.60-b09, mixed mode)\nDumping Java heap ... allocation sites ... done","body":"If JAVA_TOOL_OPTIONS is set the output is again slightly different, the java version is not on the first line. eg: Picked up JAVA_TOOL_OPTIONS: -agentlib:hprof java version &quot;1.7.0_60&quot; Java(TM) SE Runtime Environment (build 1.7.0_60-b19) Java HotSpot(TM) 64-Bit Server VM (build 24.60-b09, mixed mode) Dumping Java heap ... allocation sites ... done"},{"owner":{"account_id":362471,"reputation":30540,"user_id":705676,"accept_rate":64,"display_name":"Michał Šrajer"},"score":0,"creation_date":1488451902,"post_id":7335120,"comment_id":72241457,"body_markdown":"EmmanuelBourg and codebuddy thanks. I updated code to fix issues you found.","body":"EmmanuelBourg and codebuddy thanks. I updated code to fix issues you found."},{"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"score":5,"creation_date":1539775382,"post_id":7335120,"comment_id":92622550,"body_markdown":"This doesn&#39;t work correctly anymore since java 9, and fails spectacularly since java 10","body":"This doesn&#39;t work correctly anymore since java 9, and fails spectacularly since java 10"},{"owner":{"account_id":4070522,"reputation":5252,"user_id":3343801,"display_name":"Venkateswara Rao"},"score":0,"creation_date":1623564603,"post_id":7335120,"comment_id":120111162,"body_markdown":"Some tweak to this as below should work after Java 9 as well...\n\nJAVA_VER=$(java -version 2&gt;&amp;1 | sed -n &#39;;s/.* version &quot;\\(.*\\)\\.\\(.*\\)\\..*&quot;/\\1\\2/p;&#39;)","body":"Some tweak to this as below should work after Java 9 as well...  JAVA_VER=$(java -version 2&gt;&amp;1 | sed -n &#39;;s/.* version &quot;&#40;.*&#41;\\.&#40;.*&#41;\\..*&quot;/\\1\\2/p;&#39;)"}],"tags":[],"owner":{"account_id":362471,"reputation":30540,"user_id":705676,"accept_rate":64,"display_name":"Michał Šrajer"},"comment_count":5,"down_vote_count":2,"up_vote_count":55,"is_accepted":false,"score":53,"last_activity_date":1697597241,"creation_date":1315403902,"answer_id":7335120,"question_id":7334754,"body_markdown":"You can obtain java version via:\r\n\r\n    JAVA_VER=$(java -version 2&gt;&amp;1 | awk -F &#39;&quot;&#39; &#39;/version/ {print $2}&#39; | awk -F &#39;.&#39; &#39;{print $1$2}&#39;)\r\n\r\nit will give you `16` for java like `1.6.0_13`,  `15` for version like `1.5.0_17` and 110 for `openjdk 11.0.6 2020-01-14 LTS`.\r\n\r\nSo you can easily compare it in shell:\r\n\r\n    [ &quot;$JAVA_VER&quot; -ge 15 ] &amp;&amp; echo &quot;ok, java is 1.5 or newer&quot; || echo &quot;it&#39;s too old...&quot;\r\n\r\n**UPDATE:**\r\nThis code should work fine with openjdk and JAVA_TOOL_OPTIONS as mentioned in comments.","title":"Correct way to check Java version from BASH script","body":"<p>You can obtain java version via:</p>\n<pre><code>JAVA_VER=$(java -version 2&gt;&amp;1 | awk -F '&quot;' '/version/ {print $2}' | awk -F '.' '{print $1$2}')\n</code></pre>\n<p>it will give you <code>16</code> for java like <code>1.6.0_13</code>,  <code>15</code> for version like <code>1.5.0_17</code> and 110 for <code>openjdk 11.0.6 2020-01-14 LTS</code>.</p>\n<p>So you can easily compare it in shell:</p>\n<pre><code>[ &quot;$JAVA_VER&quot; -ge 15 ] &amp;&amp; echo &quot;ok, java is 1.5 or newer&quot; || echo &quot;it's too old...&quot;\n</code></pre>\n<p><strong>UPDATE:</strong>\nThis code should work fine with openjdk and JAVA_TOOL_OPTIONS as mentioned in comments.</p>\n"},{"comments":[{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":1,"creation_date":1315405899,"post_id":7335524,"comment_id":8846325,"body_markdown":"Excellent. I was missing the `type` builtin.","body":"Excellent. I was missing the <code>type</code> builtin."},{"owner":{"account_id":1906666,"reputation":761,"user_id":1721406,"display_name":"Andrew"},"score":2,"creation_date":1390510437,"post_id":7335524,"comment_id":32134494,"body_markdown":"Ug sorry cant get comments to format.  This fails when Java version is 1.10.  This is because string comapre is not a number compare.  Also the answer is wrong when version is &quot;1.5&quot;  Though I guess that would be &quot;1.5.0&quot; so I guess its okay.","body":"Ug sorry cant get comments to format.  This fails when Java version is 1.10.  This is because string comapre is not a number compare.  Also the answer is wrong when version is &quot;1.5&quot;  Though I guess that would be &quot;1.5.0&quot; so I guess its okay."},{"owner":{"account_id":4879,"reputation":240930,"user_id":7552,"accept_rate":100,"display_name":"glenn jackman"},"score":1,"creation_date":1390513375,"post_id":7335524,"comment_id":32136147,"body_markdown":"good point. you could do something like: `IFS=. read major minor extra &lt;&lt;&lt;&quot;$version&quot;; if (( major == 1 &amp;&amp; minor &gt; 5 )); ...` -- would have to check for invalid octal numbers like &quot;08&quot;.","body":"good point. you could do something like: <code>IFS=. read major minor extra &lt;&lt;&lt;&quot;$version&quot;; if (( major == 1 &amp;&amp; minor &gt; 5 )); ...</code> -- would have to check for invalid octal numbers like &quot;08&quot;."},{"owner":{"account_id":43736,"reputation":9289,"user_id":127971,"display_name":"michael"},"score":3,"creation_date":1410500747,"post_id":7335524,"comment_id":40358178,"body_markdown":"the &quot;`type -p java`&quot; won&#39;t work in &quot;sh&quot;; so, for portability, use `#!/bin/bash` in the script, rather than `#!/bin/sh` (though, it&#39;s possible that `/bin/sh` isn&#39;t actually bourne shell, but rather a backward compatible variant)","body":"the &quot;<code>type -p java</code>&quot; won&#39;t work in &quot;sh&quot;; so, for portability, use <code>#!&#47;bin&#47;bash</code> in the script, rather than <code>#!&#47;bin&#47;sh</code> (though, it&#39;s possible that <code>&#47;bin&#47;sh</code> isn&#39;t actually bourne shell, but rather a backward compatible variant)"},{"owner":{"account_id":1623444,"reputation":227,"user_id":1499546,"display_name":"khaemuaset"},"score":4,"creation_date":1453115639,"post_id":7335524,"comment_id":57446194,"body_markdown":"For comparing versions, I suggest : `version1=$(echo &quot;$version&quot; | awk -F. &#39;{printf(&quot;%03d%03d&quot;,$1,$2);}&#39;)` which will get you major and minor aligned with 3 digit for each, and then compare with `if [ $version1 -ge 001008 ] ; then`","body":"For comparing versions, I suggest : <code>version1=$(echo &quot;$version&quot; | awk -F. &#39;{printf(&quot;%03d%03d&quot;,$1,$2);}&#39;)</code> which will get you major and minor aligned with 3 digit for each, and then compare with <code>if [ $version1 -ge 001008 ] ; then</code>"},{"owner":{"account_id":218377,"reputation":1099,"user_id":474669,"display_name":"Ben XO"},"score":0,"creation_date":1591208267,"post_id":7335524,"comment_id":109971725,"body_markdown":"Combining Glenn&#39;s original post with his comment above, I did the following to check for Java &lt;=1.7 (in this case related to setting TLS defaults:\n`IFS=. read major minor extra &lt;&lt;&lt;$(java -version 2&gt;&amp;1 | awk -F &#39;&quot;&#39; &#39;/version/ {print $2}&#39;);\nif [ $major -lt 1 -o $major -eq 1 -a $minor -le 7 ]; then\n  JVM_EXTRA_OPTS=&quot;-Dhttps.protocols=TLSv1.2,TLSv1.1,TLSv1&quot;;\nfi`","body":"Combining Glenn&#39;s original post with his comment above, I did the following to check for Java &lt;=1.7 (in this case related to setting TLS defaults: <code>IFS=. read major minor extra &lt;&lt;&lt;$(java -version 2&gt;&amp;1 | awk -F &#39;&quot;&#39; &#39;&#47;version&#47; {print $2}&#39;); if [ $major -lt 1 -o $major -eq 1 -a $minor -le 7 ]; then   JVM_EXTRA_OPTS=&quot;-Dhttps.protocols=TLSv1.2,TLSv1.1,TLSv1&quot;; fi</code>"},{"owner":{"account_id":8002,"reputation":283812,"user_id":14122,"accept_rate":71,"display_name":"Charles Duffy"},"score":0,"creation_date":1661960395,"post_id":7335524,"comment_id":129897046,"body_markdown":"Boo, hiss for showing a string comparison instead of a version comparison.","body":"Boo, hiss for showing a string comparison instead of a version comparison."}],"tags":[],"owner":{"account_id":4879,"reputation":240930,"user_id":7552,"accept_rate":100,"display_name":"glenn jackman"},"comment_count":7,"down_vote_count":1,"up_vote_count":104,"is_accepted":true,"score":103,"last_activity_date":1315405468,"creation_date":1315405468,"answer_id":7335524,"question_id":7334754,"body_markdown":"Perhaps something like:\r\n\r\n    if type -p java; then\r\n        echo found java executable in PATH\r\n        _java=java\r\n    elif [[ -n &quot;$JAVA_HOME&quot; ]] &amp;&amp; [[ -x &quot;$JAVA_HOME/bin/java&quot; ]];  then\r\n        echo found java executable in JAVA_HOME     \r\n        _java=&quot;$JAVA_HOME/bin/java&quot;\r\n    else\r\n        echo &quot;no java&quot;\r\n    fi\r\n    \r\n    if [[ &quot;$_java&quot; ]]; then\r\n        version=$(&quot;$_java&quot; -version 2&gt;&amp;1 | awk -F &#39;&quot;&#39; &#39;/version/ {print $2}&#39;)\r\n        echo version &quot;$version&quot;\r\n        if [[ &quot;$version&quot; &gt; &quot;1.5&quot; ]]; then\r\n            echo version is more than 1.5\r\n        else         \r\n            echo version is less than 1.5\r\n        fi\r\n    fi\r\n\r\n","title":"Correct way to check Java version from BASH script","body":"<p>Perhaps something like:</p>\n\n<pre><code>if type -p java; then\n    echo found java executable in PATH\n    _java=java\nelif [[ -n \"$JAVA_HOME\" ]] &amp;&amp; [[ -x \"$JAVA_HOME/bin/java\" ]];  then\n    echo found java executable in JAVA_HOME     \n    _java=\"$JAVA_HOME/bin/java\"\nelse\n    echo \"no java\"\nfi\n\nif [[ \"$_java\" ]]; then\n    version=$(\"$_java\" -version 2&gt;&amp;1 | awk -F '\"' '/version/ {print $2}')\n    echo version \"$version\"\n    if [[ \"$version\" &gt; \"1.5\" ]]; then\n        echo version is more than 1.5\n    else         \n        echo version is less than 1.5\n    fi\nfi\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13566,"reputation":48845,"user_id":27358,"accept_rate":76,"display_name":"David Moles"},"score":1,"creation_date":1422035944,"post_id":27143937,"comment_id":44605937,"body_markdown":"This doesn&#39;t work if you have anything other than those specific minor versions of Java, e.g.","body":"This doesn&#39;t work if you have anything other than those specific minor versions of Java, e.g."},{"owner":{"account_id":5392908,"reputation":436,"user_id":4294886,"display_name":"Richard"},"score":0,"creation_date":1422124300,"post_id":27143937,"comment_id":44630527,"body_markdown":"Well. I got this information from a page on the official Oracle site. I don&#39;t know it all and neither do I pretend to. If you know what other versions of Java there are then feel free to add a subcomment with these underneath this message.","body":"Well. I got this information from a page on the official Oracle site. I don&#39;t know it all and neither do I pretend to. If you know what other versions of Java there are then feel free to add a subcomment with these underneath this message."},{"owner":{"account_id":13566,"reputation":48845,"user_id":27358,"accept_rate":76,"display_name":"David Moles"},"score":1,"creation_date":1422291361,"post_id":27143937,"comment_id":44681019,"body_markdown":"1.5.0_anything is Java 5, 1.6.0_anything is Java 6, 1.7.0_anything is Java 7, 1.8.0_anything is Java 8. The minor versions change all the time (though I suppose there aren&#39;t ever going to be any new ones for Java 5 or 6).","body":"1.5.0_anything is Java 5, 1.6.0_anything is Java 6, 1.7.0_anything is Java 7, 1.8.0_anything is Java 8. The minor versions change all the time (though I suppose there aren&#39;t ever going to be any new ones for Java 5 or 6)."},{"owner":{"account_id":13566,"reputation":48845,"user_id":27358,"accept_rate":76,"display_name":"David Moles"},"score":1,"creation_date":1422291378,"post_id":27143937,"comment_id":44681030,"body_markdown":"Also, there&#39;s no guarantee anyone will have the most recent minor version.","body":"Also, there&#39;s no guarantee anyone will have the most recent minor version."},{"owner":{"account_id":5392908,"reputation":436,"user_id":4294886,"display_name":"Richard"},"score":0,"creation_date":1422350145,"post_id":27143937,"comment_id":44703818,"body_markdown":"That&#39;s fair enough. Why didn&#39;t you just say that in the first place? I had a feeling that 1.x... meant version x but I didn&#39;t want to make that assumption in case I was wrong.","body":"That&#39;s fair enough. Why didn&#39;t you just say that in the first place? I had a feeling that 1.x... meant version x but I didn&#39;t want to make that assumption in case I was wrong."}],"tags":[],"owner":{"account_id":5392908,"reputation":436,"user_id":4294886,"display_name":"Richard"},"comment_count":5,"down_vote_count":4,"up_vote_count":4,"is_accepted":false,"score":0,"last_activity_date":1416988909,"creation_date":1416988909,"answer_id":27143937,"question_id":7334754,"body_markdown":"I know this is a very old thread but this will still be of help to others.\r\n\r\nTo know whether you&#39;re running Java 5, 6 or 7, firstly type `java -version`.\r\n\r\nThere will be a line in your output that looks similar to this: &lt;b&gt;java version &quot;1.7.0_55&quot;&lt;/b&gt;\r\n\r\nThen you use this table for converting the &#39;jargon&#39; result to the version number.\r\n\r\n1.7.0_55 is Java 7&lt;br&gt;\r\n1.6.0_75 is Java 6&lt;br&gt;\r\n1.5.0_65 is Java 5&lt;br&gt;\r\n\r\nInformation taken from a page on the Oracle site&lt;br&gt;\r\n[http://www.oracle.com/technetwork/java/javase/7u55-relnotes-2177812.html][1]\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javase/7u55-relnotes-2177812.html","title":"Correct way to check Java version from BASH script","body":"<p>I know this is a very old thread but this will still be of help to others.</p>\n\n<p>To know whether you're running Java 5, 6 or 7, firstly type <code>java -version</code>.</p>\n\n<p>There will be a line in your output that looks similar to this: <b>java version \"1.7.0_55\"</b></p>\n\n<p>Then you use this table for converting the 'jargon' result to the version number.</p>\n\n<p>1.7.0_55 is Java 7<br>\n1.6.0_75 is Java 6<br>\n1.5.0_65 is Java 5<br></p>\n\n<p>Information taken from a page on the Oracle site<br>\n<a href=\"http://www.oracle.com/technetwork/java/javase/7u55-relnotes-2177812.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/java/javase/7u55-relnotes-2177812.html</a></p>\n"},{"comments":[{"owner":{"account_id":7660,"reputation":15986,"user_id":13365,"accept_rate":70,"display_name":"neu242"},"score":0,"creation_date":1492674163,"post_id":37593973,"comment_id":74080115,"body_markdown":"Oneliner: `if [[ $(java -version 2&gt;&amp;1 &gt;/dev/null | grep &#39;java version&#39; | awk &#39;{print $3}&#39;) =~ \\&quot;([0-9])\\.([0-9])\\.([0-9])_(.*)\\&quot; ]]; then echo ${BASH_REMATCH[2]}; fi`","body":"Oneliner: <code>if [[ $(java -version 2&gt;&amp;1 &gt;&#47;dev&#47;null | grep &#39;java version&#39; | awk &#39;{print $3}&#39;) =~ \\&quot;([0-9])\\.([0-9])\\.([0-9])_(.*)\\&quot; ]]; then echo ${BASH_REMATCH[2]}; fi</code>"}],"tags":[],"owner":{"account_id":28710,"reputation":988,"user_id":76938,"display_name":"Jinesh Choksi"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1464878902,"creation_date":1464875783,"answer_id":37593973,"question_id":7334754,"body_markdown":"The method I ended up using is:\r\n\r\n    # Work out the JAVA version we are working with:\r\n    JAVA_VER_MAJOR=&quot;&quot;\r\n    JAVA_VER_MINOR=&quot;&quot;\r\n    JAVA_VER_BUILD=&quot;&quot;\r\n    \r\n    # Based on: http://stackoverflow.com/a/32026447\r\n    for token in $(java -version 2&gt;&amp;1 | grep -i version)\r\n    do\r\n        if [[ $token =~ \\&quot;([[:digit:]])\\.([[:digit:]])\\.(.*)\\&quot; ]]\r\n        then\r\n            JAVA_VER_MAJOR=${BASH_REMATCH[1]}\r\n            JAVA_VER_MINOR=${BASH_REMATCH[2]}\r\n            JAVA_VER_BUILD=${BASH_REMATCH[3]}\r\n            break\r\n        fi\r\n    done\r\n\r\nIt will work correctly even if JAVA_TOOL_OPTIONS is set to something due to filtering done by grep.","title":"Correct way to check Java version from BASH script","body":"<p>The method I ended up using is:</p>\n\n<pre><code># Work out the JAVA version we are working with:\nJAVA_VER_MAJOR=\"\"\nJAVA_VER_MINOR=\"\"\nJAVA_VER_BUILD=\"\"\n\n# Based on: http://stackoverflow.com/a/32026447\nfor token in $(java -version 2&gt;&amp;1 | grep -i version)\ndo\n    if [[ $token =~ \\\"([[:digit:]])\\.([[:digit:]])\\.(.*)\\\" ]]\n    then\n        JAVA_VER_MAJOR=${BASH_REMATCH[1]}\n        JAVA_VER_MINOR=${BASH_REMATCH[2]}\n        JAVA_VER_BUILD=${BASH_REMATCH[3]}\n        break\n    fi\ndone\n</code></pre>\n\n<p>It will work correctly even if JAVA_TOOL_OPTIONS is set to something due to filtering done by grep.</p>\n"},{"comments":[{"owner":{"account_id":334793,"reputation":851,"user_id":661471,"display_name":"aenw"},"score":4,"creation_date":1537565552,"post_id":40407601,"comment_id":91845891,"body_markdown":"for Java 10, this returns &#39;0&#39; for the version number","body":"for Java 10, this returns &#39;0&#39; for the version number"},{"owner":{"account_id":558770,"reputation":16438,"user_id":755804,"accept_rate":20,"display_name":"18446744073709551615"},"score":0,"creation_date":1570539534,"post_id":40407601,"comment_id":102938441,"body_markdown":"$ java -version 2&gt;&amp;1 | grep -i version | sed &#39;s/.*version &quot;.*\\.\\(.*\\)\\..*&quot;/\\1/; 1q&#39;\n--&gt; 0\nfor java version &quot;9.0.1&quot;","body":"$ java -version 2&gt;&amp;1 | grep -i version | sed &#39;s/.*version &quot;.*\\.&#40;.*&#41;\\..*&quot;/\\1/; 1q&#39; --&gt; 0 for java version &quot;9.0.1&quot;"},{"owner":{"account_id":3854242,"reputation":377,"user_id":3193604,"display_name":"Manu D."},"score":0,"creation_date":1602147306,"post_id":40407601,"comment_id":113630145,"body_markdown":"Indeed, answer below works better for java version &gt; 9: https://stackoverflow.com/a/56243046/3193604","body":"Indeed, answer below works better for java version &gt; 9: <a href=\"https://stackoverflow.com/a/56243046/3193604\">stackoverflow.com/a/56243046/3193604</a>"}],"tags":[],"owner":{"account_id":3854242,"reputation":377,"user_id":3193604,"display_name":"Manu D."},"comment_count":3,"down_vote_count":3,"up_vote_count":7,"is_accepted":false,"score":4,"last_activity_date":1478195367,"creation_date":1478193456,"answer_id":40407601,"question_id":7334754,"body_markdown":"A combination of different answers:\r\n\r\n    JAVA_VER=$(java -version 2&gt;&amp;1 | grep -i version | sed &#39;s/.*version &quot;.*\\.\\(.*\\)\\..*&quot;/\\1/; 1q&#39;)\r\n\r\n- Returns `7` for Java 7 and `8` for Java 8\r\n- Works with OpenJDK and with Oracle JDK\r\n- Works even if the JAVA_TOOL_OPTIONS is set","title":"Correct way to check Java version from BASH script","body":"<p>A combination of different answers:</p>\n\n<pre><code>JAVA_VER=$(java -version 2&gt;&amp;1 | grep -i version | sed 's/.*version \".*\\.\\(.*\\)\\..*\"/\\1/; 1q')\n</code></pre>\n\n<ul>\n<li>Returns <code>7</code> for Java 7 and <code>8</code> for Java 8</li>\n<li>Works with OpenJDK and with Oracle JDK</li>\n<li>Works even if the JAVA_TOOL_OPTIONS is set</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2722,"reputation":94810,"user_id":3827,"accept_rate":94,"display_name":"Eugene Yokota"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1518737610,"creation_date":1518737610,"answer_id":48817958,"question_id":7334754,"body_markdown":"I wrote a bash function that should work for JDK 9 and JDK 10.\r\n\r\n&lt;!-- language: bash --&gt;\r\n\r\n    #!/bin/bash\r\n    \r\n    # returns the JDK version.\r\n    # 8 for 1.8.0_nn, 9 for 9-ea etc, and &quot;no_java&quot; for undetected\r\n    jdk_version() {\r\n      local result\r\n      local java_cmd\r\n      if [[ -n $(type -p java) ]]\r\n      then\r\n        java_cmd=java\r\n      elif [[ (-n &quot;$JAVA_HOME&quot;) &amp;&amp; (-x &quot;$JAVA_HOME/bin/java&quot;) ]]\r\n      then\r\n        java_cmd=&quot;$JAVA_HOME/bin/java&quot;\r\n      fi\r\n      local IFS=$&#39;\\n&#39;\r\n      # remove \\r for Cygwin\r\n      local lines=$(&quot;$java_cmd&quot; -Xms32M -Xmx32M -version 2&gt;&amp;1 | tr &#39;\\r&#39; &#39;\\n&#39;)\r\n      if [[ -z $java_cmd ]]\r\n      then\r\n        result=no_java\r\n      else\r\n        for line in $lines; do\r\n          if [[ (-z $result) &amp;&amp; ($line = *&quot;version \\&quot;&quot;*) ]]\r\n          then\r\n            local ver=$(echo $line | sed -e &#39;s/.*version &quot;\\(.*\\)&quot;\\(.*\\)/\\1/; 1q&#39;)\r\n            # on macOS, sed doesn&#39;t support &#39;?&#39;\r\n            if [[ $ver = &quot;1.&quot;* ]]\r\n            then\r\n              result=$(echo $ver | sed -e &#39;s/1\\.\\([0-9]*\\)\\(.*\\)/\\1/; 1q&#39;)\r\n            else\r\n              result=$(echo $ver | sed -e &#39;s/\\([0-9]*\\)\\(.*\\)/\\1/; 1q&#39;)\r\n            fi\r\n          fi\r\n        done\r\n      fi\r\n      echo &quot;$result&quot;\r\n    }\r\n    \r\n    v=&quot;$(jdk_version)&quot;\r\n    echo $v\r\n\r\nThis returns `8` for Java 8 (`&quot;1.8.0_151&quot;` etc), and `9` for Java 9 (`&quot;9-Debian&quot;` etc), which should make it easier to do the further comparison.\r\n","title":"Correct way to check Java version from BASH script","body":"<p>I wrote a bash function that should work for JDK 9 and JDK 10.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>#!/bin/bash\n\n# returns the JDK version.\n# 8 for 1.8.0_nn, 9 for 9-ea etc, and \"no_java\" for undetected\njdk_version() {\n  local result\n  local java_cmd\n  if [[ -n $(type -p java) ]]\n  then\n    java_cmd=java\n  elif [[ (-n \"$JAVA_HOME\") &amp;&amp; (-x \"$JAVA_HOME/bin/java\") ]]\n  then\n    java_cmd=\"$JAVA_HOME/bin/java\"\n  fi\n  local IFS=$'\\n'\n  # remove \\r for Cygwin\n  local lines=$(\"$java_cmd\" -Xms32M -Xmx32M -version 2&gt;&amp;1 | tr '\\r' '\\n')\n  if [[ -z $java_cmd ]]\n  then\n    result=no_java\n  else\n    for line in $lines; do\n      if [[ (-z $result) &amp;&amp; ($line = *\"version \\\"\"*) ]]\n      then\n        local ver=$(echo $line | sed -e 's/.*version \"\\(.*\\)\"\\(.*\\)/\\1/; 1q')\n        # on macOS, sed doesn't support '?'\n        if [[ $ver = \"1.\"* ]]\n        then\n          result=$(echo $ver | sed -e 's/1\\.\\([0-9]*\\)\\(.*\\)/\\1/; 1q')\n        else\n          result=$(echo $ver | sed -e 's/\\([0-9]*\\)\\(.*\\)/\\1/; 1q')\n        fi\n      fi\n    done\n  fi\n  echo \"$result\"\n}\n\nv=\"$(jdk_version)\"\necho $v\n</code></pre>\n\n<p>This returns <code>8</code> for Java 8 (<code>\"1.8.0_151\"</code> etc), and <code>9</code> for Java 9 (<code>\"9-Debian\"</code> etc), which should make it easier to do the further comparison.</p>\n"},{"tags":[],"owner":{"account_id":5648492,"reputation":25,"user_id":4469848,"display_name":"Fil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1529338219,"creation_date":1529338219,"answer_id":50913562,"question_id":7334754,"body_markdown":"Using bashj, an extended bash version (https://sourceforge.net/projects/bashj/), you get a rather compact solution:\r\n\r\n    #!/usr/bin/bashj\r\n    echo System.getProperty(&quot;java.runtime.version&quot;)\r\n\r\nThe answer is provided by an integrated JVM (in ~0.017&#39;&#39;  execution time for the script , and ~0.004&#39;&#39; for the call itself).","title":"Correct way to check Java version from BASH script","body":"<p>Using bashj, an extended bash version (<a href=\"https://sourceforge.net/projects/bashj/\" rel=\"nofollow noreferrer\">https://sourceforge.net/projects/bashj/</a>), you get a rather compact solution:</p>\n\n<pre><code>#!/usr/bin/bashj\necho System.getProperty(\"java.runtime.version\")\n</code></pre>\n\n<p>The answer is provided by an integrated JVM (in ~0.017''  execution time for the script , and ~0.004'' for the call itself).</p>\n"},{"comments":[{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1548419236,"post_id":53995412,"comment_id":95544323,"body_markdown":"You should be able to replace the `sed` with BASH parameter expansion (https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html) using `${parameter/pattern/string}`","body":"You should be able to replace the <code>sed</code> with BASH parameter expansion (<a href=\"https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html\" rel=\"nofollow noreferrer\">gnu.org/software/bash/manual/html_node/&hellip;</a>) using <code>${parameter&#47;pattern&#47;string}</code>"},{"owner":{"account_id":15038853,"reputation":1515,"user_id":10854225,"display_name":"vincenzopalazzo"},"score":0,"creation_date":1548433751,"post_id":53995412,"comment_id":95552608,"body_markdown":"@AaronDigulla Thanks for the information, I will see the link and I update the answer","body":"@AaronDigulla Thanks for the information, I will see the link and I update the answer"}],"tags":[],"owner":{"account_id":15038853,"reputation":1515,"user_id":10854225,"display_name":"vincenzopalazzo"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1546345507,"creation_date":1546345507,"answer_id":53995412,"question_id":7334754,"body_markdown":"I had a similar problem, I wanted to check which version of java was installed to perform two types of application launches.\r\nThe following code has solved my problem\r\n\r\n    jdk_version() {\r\n      local result\r\n      local java_cmd\r\n      if [[ -n $(type -p java) ]]\r\n      then\r\n        java_cmd=java\r\n      elif [[ (-n &quot;$JAVA_HOME&quot;) &amp;&amp; (-x &quot;$JAVA_HOME/bin/java&quot;) ]]\r\n      then\r\n        java_cmd=&quot;$JAVA_HOME/bin/java&quot;\r\n      fi\r\n      local IFS=$&#39;\\n&#39;\r\n      # remove \\r for Cygwin\r\n      local lines=$(&quot;$java_cmd&quot; -Xms32M -Xmx32M -version 2&gt;&amp;1 | tr &#39;\\r&#39; &#39;\\n&#39;)\r\n      if [[ -z $java_cmd ]]\r\n      then\r\n        result=no_java\r\n      else\r\n        for line in $lines; do\r\n          if [[ (-z $result) &amp;&amp; ($line = *&quot;version \\&quot;&quot;*) ]]\r\n          then\r\n            local ver=$(echo $line | sed -e &#39;s/.*version &quot;\\(.*\\)&quot;\\(.*\\)/\\1/; 1q&#39;)\r\n            # on macOS, sed doesn&#39;t support &#39;?&#39;\r\n            if [[ $ver = &quot;1.&quot;* ]]\r\n            then\r\n              result=$(echo $ver | sed -e &#39;s/1\\.\\([0-9]*\\)\\(.*\\)/\\1/; 1q&#39;)\r\n            else\r\n              result=$(echo $ver | sed -e &#39;s/\\([0-9]*\\)\\(.*\\)/\\1/; 1q&#39;)\r\n            fi\r\n          fi\r\n        done\r\n      fi\r\n      echo &quot;$result&quot;\r\n    }\r\n    \r\n    _java=&quot;$(jdk_version)&quot;\r\n    echo $_java\r\n    \r\n    if [[ &quot;$_java&quot; &gt; &quot;$8&quot; ]]; then\r\n           echo version is more than 8\r\n          \r\n    else\r\n      echo version is less than 8\r\n     \r\n    fi\r\n\r\n[source][1]\r\n\r\n*I hope to be proved helpful*\r\n\r\n\r\n  [1]: http://eed3si9n.com/detecting-java-version-bash","title":"Correct way to check Java version from BASH script","body":"<p>I had a similar problem, I wanted to check which version of java was installed to perform two types of application launches.\nThe following code has solved my problem</p>\n\n<pre><code>jdk_version() {\n  local result\n  local java_cmd\n  if [[ -n $(type -p java) ]]\n  then\n    java_cmd=java\n  elif [[ (-n \"$JAVA_HOME\") &amp;&amp; (-x \"$JAVA_HOME/bin/java\") ]]\n  then\n    java_cmd=\"$JAVA_HOME/bin/java\"\n  fi\n  local IFS=$'\\n'\n  # remove \\r for Cygwin\n  local lines=$(\"$java_cmd\" -Xms32M -Xmx32M -version 2&gt;&amp;1 | tr '\\r' '\\n')\n  if [[ -z $java_cmd ]]\n  then\n    result=no_java\n  else\n    for line in $lines; do\n      if [[ (-z $result) &amp;&amp; ($line = *\"version \\\"\"*) ]]\n      then\n        local ver=$(echo $line | sed -e 's/.*version \"\\(.*\\)\"\\(.*\\)/\\1/; 1q')\n        # on macOS, sed doesn't support '?'\n        if [[ $ver = \"1.\"* ]]\n        then\n          result=$(echo $ver | sed -e 's/1\\.\\([0-9]*\\)\\(.*\\)/\\1/; 1q')\n        else\n          result=$(echo $ver | sed -e 's/\\([0-9]*\\)\\(.*\\)/\\1/; 1q')\n        fi\n      fi\n    done\n  fi\n  echo \"$result\"\n}\n\n_java=\"$(jdk_version)\"\necho $_java\n\nif [[ \"$_java\" &gt; \"$8\" ]]; then\n       echo version is more than 8\n\nelse\n  echo version is less than 8\n\nfi\n</code></pre>\n\n<p><a href=\"http://eed3si9n.com/detecting-java-version-bash\" rel=\"nofollow noreferrer\">source</a></p>\n\n<p><em>I hope to be proved helpful</em></p>\n"},{"tags":[],"owner":{"account_id":487921,"reputation":1196,"user_id":1360042,"display_name":"dvlcube"},"comment_count":0,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1592337022,"creation_date":1558457564,"answer_id":56243046,"question_id":7334754,"body_markdown":"The answers above work correctly only for specific Java versions (usually for the ones before Java 9 or for the ones after Java 8.\r\n \r\nI wrote a simple one liner that will return an integer for Java versions 6 through 11 (and possibly all future versions, until they change it again!).\r\n\r\nIt basically drops the &quot;1.&quot; at the beginning of the version number, if it exists, and then considers only the first number before the next &quot;.&quot;.\r\n\r\n`java -version 2&gt;&amp;1 | head -1 | cut -d&#39;&quot;&#39; -f2 | sed &#39;/^1\\./s///&#39; | cut -d&#39;.&#39; -f1`","title":"Correct way to check Java version from BASH script","body":"<p>The answers above work correctly only for specific Java versions (usually for the ones before Java 9 or for the ones after Java 8.</p>\n\n<p>I wrote a simple one liner that will return an integer for Java versions 6 through 11 (and possibly all future versions, until they change it again!).</p>\n\n<p>It basically drops the \"1.\" at the beginning of the version number, if it exists, and then considers only the first number before the next \".\".</p>\n\n<p><code>java -version 2&gt;&amp;1 | head -1 | cut -d'\"' -f2 | sed '/^1\\./s///' | cut -d'.' -f1</code></p>\n"},{"comments":[{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1581339902,"post_id":60036471,"comment_id":106387904,"body_markdown":"Small improvements: Use `$(...)` instead of backticks. They are safer, support nesting, and easier to type on most keyboards/OSs.","body":"Small improvements: Use <code>$(...)</code> instead of backticks. They are safer, support nesting, and easier to type on most keyboards/OSs."}],"tags":[],"owner":{"account_id":5871853,"reputation":31,"user_id":6494470,"display_name":"David Ben David"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1581339940,"creation_date":1580722511,"answer_id":60036471,"question_id":7334754,"body_markdown":"1. in TERMINAL\r\n```\r\njava -version |&amp; grep &#39;version&#39; |&amp; awk -F\\&quot; &#39;{ split($2,a,&quot;.&quot;); print a[1]&quot;.&quot;a[2]}&#39;\r\n```\r\n2. in BASH\r\n\r\n```\r\n#!/bin/bash\r\n\r\n\r\necho `java -version 2&gt;&amp;1 | grep &#39;version&#39; 2&gt;&amp;1 | awk -F\\&quot; &#39;{ split($2,a,&quot;.&quot;); print a[1]&quot;.&quot;a[2]}&#39;`\r\njver=`java -version 2&gt;&amp;1 | grep &#39;version&#39; 2&gt;&amp;1 | awk -F\\&quot; &#39;{ split($2,a,&quot;.&quot;); print a[1]&quot;.&quot;a[2]}&#39;`\r\n\r\nif [[ $jver == &quot;1.8&quot; ]]; then                \r\n     echo $jver is java 8\r\nelse\r\n     echo $jver is java 11\r\nfi\r\n```\r\n\r\nWorks in SUN and Linux\r\n\r\n","title":"Correct way to check Java version from BASH script","body":"<ol>\n<li>in TERMINAL</li>\n</ol>\n\n<pre><code>java -version |&amp; grep 'version' |&amp; awk -F\\\" '{ split($2,a,\".\"); print a[1]\".\"a[2]}'\n</code></pre>\n\n<ol start=\"2\">\n<li>in BASH</li>\n</ol>\n\n<pre><code>#!/bin/bash\n\n\necho `java -version 2&gt;&amp;1 | grep 'version' 2&gt;&amp;1 | awk -F\\\" '{ split($2,a,\".\"); print a[1]\".\"a[2]}'`\njver=`java -version 2&gt;&amp;1 | grep 'version' 2&gt;&amp;1 | awk -F\\\" '{ split($2,a,\".\"); print a[1]\".\"a[2]}'`\n\nif [[ $jver == \"1.8\" ]]; then                \n     echo $jver is java 8\nelse\n     echo $jver is java 11\nfi\n</code></pre>\n\n<p>Works in SUN and Linux</p>\n"},{"comments":[{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1585332801,"post_id":60321470,"comment_id":107732180,"body_markdown":"This is a nice hack if you just want to know the major version. Sometimes, you&#39;d like to check that a certain patchlevel is installed.","body":"This is a nice hack if you just want to know the major version. Sometimes, you&#39;d like to check that a certain patchlevel is installed."},{"owner":{"account_id":1144755,"reputation":1415,"user_id":1127772,"display_name":"Carlos Saltos"},"score":0,"creation_date":1601970252,"post_id":60321470,"comment_id":113563880,"body_markdown":"Amazing, this is bullet proof !!","body":"Amazing, this is bullet proof !!"},{"owner":{"account_id":1026390,"reputation":631,"user_id":1035608,"display_name":"enridaga"},"score":0,"creation_date":1633680158,"post_id":60321470,"comment_id":122829131,"body_markdown":"Simple and easy for major version check","body":"Simple and easy for major version check"}],"tags":[],"owner":{"account_id":414776,"reputation":6554,"user_id":789188,"accept_rate":81,"display_name":"zhujik"},"comment_count":3,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1582206558,"creation_date":1582206558,"answer_id":60321470,"question_id":7334754,"body_markdown":"You could also compare the jdk class version number with `javap`:\r\n\r\n    javap -verbose java.lang.String | grep &quot;major version&quot; | cut -d &quot; &quot; -f5\r\n\r\nIf its java 8, this will print 52, and 55 for java 11. With this you can make a simple comparison and you don&#39;t have to deal with the version string parsing.","title":"Correct way to check Java version from BASH script","body":"<p>You could also compare the jdk class version number with <code>javap</code>:</p>\n\n<pre><code>javap -verbose java.lang.String | grep \"major version\" | cut -d \" \" -f5\n</code></pre>\n\n<p>If its java 8, this will print 52, and 55 for java 11. With this you can make a simple comparison and you don't have to deal with the version string parsing.</p>\n"},{"tags":[],"owner":{"account_id":24162,"reputation":10032,"user_id":61298,"accept_rate":67,"display_name":"Matt R"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600683885,"creation_date":1600683885,"answer_id":63990433,"question_id":7334754,"body_markdown":"There is a nice portable bash function for this here: http://eed3si9n.com/detecting-java-version-bash\r\n\r\n```\r\njdk_version() {\r\n  local result\r\n  local java_cmd\r\n  if [[ -n $(type -p java) ]]\r\n  then\r\n    java_cmd=java\r\n  elif [[ (-n &quot;$JAVA_HOME&quot;) &amp;&amp; (-x &quot;$JAVA_HOME/bin/java&quot;) ]]\r\n  then\r\n    java_cmd=&quot;$JAVA_HOME/bin/java&quot;\r\n  fi\r\n  local IFS=$&#39;\\n&#39;\r\n  # remove \\r for Cygwin\r\n  local lines=$(&quot;$java_cmd&quot; -Xms32M -Xmx32M -version 2&gt;&amp;1 | tr &#39;\\r&#39; &#39;\\n&#39;)\r\n  if [[ -z $java_cmd ]]\r\n  then\r\n    result=no_java\r\n  else\r\n    for line in $lines; do\r\n      if [[ (-z $result) &amp;&amp; ($line = *&quot;version \\&quot;&quot;*) ]]\r\n      then\r\n        local ver=$(echo $line | sed -e &#39;s/.*version &quot;\\(.*\\)&quot;\\(.*\\)/\\1/; 1q&#39;)\r\n        # on macOS, sed doesn&#39;t support &#39;?&#39;\r\n        if [[ $ver = &quot;1.&quot;* ]]\r\n        then\r\n          result=$(echo $ver | sed -e &#39;s/1\\.\\([0-9]*\\)\\(.*\\)/\\1/; 1q&#39;)\r\n        else\r\n          result=$(echo $ver | sed -e &#39;s/\\([0-9]*\\)\\(.*\\)/\\1/; 1q&#39;)\r\n        fi\r\n      fi\r\n    done\r\n  fi\r\n  echo &quot;$result&quot;\r\n}\r\n```","title":"Correct way to check Java version from BASH script","body":"<p>There is a nice portable bash function for this here: <a href=\"http://eed3si9n.com/detecting-java-version-bash\" rel=\"nofollow noreferrer\">http://eed3si9n.com/detecting-java-version-bash</a></p>\n<pre><code>jdk_version() {\n  local result\n  local java_cmd\n  if [[ -n $(type -p java) ]]\n  then\n    java_cmd=java\n  elif [[ (-n &quot;$JAVA_HOME&quot;) &amp;&amp; (-x &quot;$JAVA_HOME/bin/java&quot;) ]]\n  then\n    java_cmd=&quot;$JAVA_HOME/bin/java&quot;\n  fi\n  local IFS=$'\\n'\n  # remove \\r for Cygwin\n  local lines=$(&quot;$java_cmd&quot; -Xms32M -Xmx32M -version 2&gt;&amp;1 | tr '\\r' '\\n')\n  if [[ -z $java_cmd ]]\n  then\n    result=no_java\n  else\n    for line in $lines; do\n      if [[ (-z $result) &amp;&amp; ($line = *&quot;version \\&quot;&quot;*) ]]\n      then\n        local ver=$(echo $line | sed -e 's/.*version &quot;\\(.*\\)&quot;\\(.*\\)/\\1/; 1q')\n        # on macOS, sed doesn't support '?'\n        if [[ $ver = &quot;1.&quot;* ]]\n        then\n          result=$(echo $ver | sed -e 's/1\\.\\([0-9]*\\)\\(.*\\)/\\1/; 1q')\n        else\n          result=$(echo $ver | sed -e 's/\\([0-9]*\\)\\(.*\\)/\\1/; 1q')\n        fi\n      fi\n    done\n  fi\n  echo &quot;$result&quot;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1608131485,"post_id":65093484,"comment_id":115489534,"body_markdown":"Interesting. I found the file in several JDKs (Oracle and OpenJDK). I don&#39;t think it will exist in J9 or the Amazon JVM. Plus you need to figure out the Java installation folder if `$JAVA_HOME` isn&#39;t defined.","body":"Interesting. I found the file in several JDKs (Oracle and OpenJDK). I don&#39;t think it will exist in J9 or the Amazon JVM. Plus you need to figure out the Java installation folder if <code>$JAVA_HOME</code> isn&#39;t defined."}],"tags":[],"owner":{"account_id":19054692,"reputation":3493,"user_id":13912132,"display_name":"JCWasmx86"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1606836643,"creation_date":1606836643,"answer_id":65093484,"question_id":7334754,"body_markdown":"Another way is:\r\nA file called `release` is located in `$JAVA_HOME`.\r\nOn Java 15 (Debian) it has as content:\r\n```\r\nIMPLEMENTOR=&quot;Debian&quot;\r\nJAVA_VERSION=&quot;15.0.1&quot;\r\nJAVA_VERSION_DATE=&quot;2020-10-20&quot;\r\nMODULES=&quot;java.base java.compiler java.datatransfer java.xml java.prefs java.desktop java.instrument java.logging java.management java.security.sasl java.naming java.rmi java.management.rmi java.net.http java.scripting java.security.jgss java.transaction.xa java.sql java.sql.rowset java.xml.crypto java.se java.smartcardio jdk.accessibility jdk.internal.vm.ci jdk.management jdk.unsupported jdk.internal.vm.compiler jdk.aot jdk.internal.jvmstat jdk.attach jdk.charsets jdk.compiler jdk.crypto.ec jdk.crypto.cryptoki jdk.dynalink jdk.internal.ed jdk.editpad jdk.hotspot.agent jdk.httpserver jdk.incubator.foreign jdk.internal.opt jdk.jdeps jdk.jlink jdk.incubator.jpackage jdk.internal.le jdk.internal.vm.compiler.management jdk.jartool jdk.javadoc jdk.jcmd jdk.management.agent jdk.jconsole jdk.jdwp.agent jdk.jdi jdk.jfr jdk.jshell jdk.jsobject jdk.jstatd jdk.localedata jdk.management.jfr jdk.naming.dns jdk.naming.rmi jdk.net jdk.nio.mapmode jdk.sctp jdk.security.auth jdk.security.jgss jdk.unsupported.desktop jdk.xml.dom jdk.zipfs&quot;\r\nOS_ARCH=&quot;x86_64&quot;\r\nOS_NAME=&quot;Linux&quot;\r\nSOURCE=&quot;&quot;\r\n```\r\nSo you see `JAVA_VERSION`, which contains the version number.\r\n\r\nFor example,\r\n```\r\nmajor=$(echo $JAVA_VERSION | cut -d. -f1)\r\n```\r\nsets `major` to the value 15 (=Major version number), which you can use further.\r\n\r\nIt&#39;s a really simple solution.","title":"Correct way to check Java version from BASH script","body":"<p>Another way is:\nA file called <code>release</code> is located in <code>$JAVA_HOME</code>.\nOn Java 15 (Debian) it has as content:</p>\n<pre><code>IMPLEMENTOR=&quot;Debian&quot;\nJAVA_VERSION=&quot;15.0.1&quot;\nJAVA_VERSION_DATE=&quot;2020-10-20&quot;\nMODULES=&quot;java.base java.compiler java.datatransfer java.xml java.prefs java.desktop java.instrument java.logging java.management java.security.sasl java.naming java.rmi java.management.rmi java.net.http java.scripting java.security.jgss java.transaction.xa java.sql java.sql.rowset java.xml.crypto java.se java.smartcardio jdk.accessibility jdk.internal.vm.ci jdk.management jdk.unsupported jdk.internal.vm.compiler jdk.aot jdk.internal.jvmstat jdk.attach jdk.charsets jdk.compiler jdk.crypto.ec jdk.crypto.cryptoki jdk.dynalink jdk.internal.ed jdk.editpad jdk.hotspot.agent jdk.httpserver jdk.incubator.foreign jdk.internal.opt jdk.jdeps jdk.jlink jdk.incubator.jpackage jdk.internal.le jdk.internal.vm.compiler.management jdk.jartool jdk.javadoc jdk.jcmd jdk.management.agent jdk.jconsole jdk.jdwp.agent jdk.jdi jdk.jfr jdk.jshell jdk.jsobject jdk.jstatd jdk.localedata jdk.management.jfr jdk.naming.dns jdk.naming.rmi jdk.net jdk.nio.mapmode jdk.sctp jdk.security.auth jdk.security.jgss jdk.unsupported.desktop jdk.xml.dom jdk.zipfs&quot;\nOS_ARCH=&quot;x86_64&quot;\nOS_NAME=&quot;Linux&quot;\nSOURCE=&quot;&quot;\n</code></pre>\n<p>So you see <code>JAVA_VERSION</code>, which contains the version number.</p>\n<p>For example,</p>\n<pre><code>major=$(echo $JAVA_VERSION | cut -d. -f1)\n</code></pre>\n<p>sets <code>major</code> to the value 15 (=Major version number), which you can use further.</p>\n<p>It's a really simple solution.</p>\n"},{"tags":[],"owner":{"account_id":5279877,"reputation":1377,"user_id":4215616,"accept_rate":100,"display_name":"Paul Stoner"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626797586,"creation_date":1611240186,"answer_id":65829814,"question_id":7334754,"body_markdown":"I found the following works rather well. It is a combination of the answers from [Michał Šrajer][1] and [jmj][2]\r\n\r\n`version=$(java -version 2&gt;&amp;1 | sed -n &#39;;s/.* version &quot;\\(.*\\)\\.\\(.*\\)\\..*&quot;/\\1\\2/p;&#39; | awk &#39;{ print $1 }&#39;)`.\r\n\r\nI have openJDK 13 installed and without the `awk` command the first answer printed: `130 2020-01-14`. Thus, adding `awk &#39;{ print $1 }&#39;` provides me with just the version.\r\n\r\n  [1]: https://stackoverflow.com/a/7335120/4215616\r\n  [2]: https://stackoverflow.com/a/7334780/4215616","title":"Correct way to check Java version from BASH script","body":"<p>I found the following works rather well. It is a combination of the answers from <a href=\"https://stackoverflow.com/a/7335120/4215616\">Michał Šrajer</a> and <a href=\"https://stackoverflow.com/a/7334780/4215616\">jmj</a></p>\n<p><code>version=$(java -version 2&gt;&amp;1 | sed -n ';s/.* version &quot;\\(.*\\)\\.\\(.*\\)\\..*&quot;/\\1\\2/p;' | awk '{ print $1 }')</code>.</p>\n<p>I have openJDK 13 installed and without the <code>awk</code> command the first answer printed: <code>130 2020-01-14</code>. Thus, adding <code>awk '{ print $1 }'</code> provides me with just the version.</p>\n"},{"tags":[],"owner":{"account_id":6625798,"reputation":834,"user_id":5116073,"display_name":"Seb T"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1624309621,"creation_date":1624292379,"answer_id":68071437,"question_id":7334754,"body_markdown":"Determining the Java version only using grep with Perl-style regex can be done like this:\r\n```bash\r\njava -version 2&gt;&amp;1 | grep -oP &#39;version &quot;?(1\\.)?\\K\\d+&#39;\r\n```\r\n\r\nThis will print the major version for Java 9 or higher and the minor version for versions lower than 9, for example `8` for Java `1.8` and `11` for Java `11.0.4`.\r\n\r\nIt can be used like this:\r\n```bash\r\nJAVA_MAJOR_VERSION=$(java -version 2&gt;&amp;1 | grep -oP &#39;version &quot;?(1\\.)?\\K\\d+&#39; || true)\r\nif [[ $JAVA_MAJOR_VERSION -lt 8 ]]; then\r\n  echo &quot;Java 8 or higher is required!&quot;\r\n  exit 1\r\nfi\r\n```\r\n\r\nThe `|| true` was added to prevent the script from aborting in case Java is not installed and the Shell option `set -e` was enabled.","title":"Correct way to check Java version from BASH script","body":"<p>Determining the Java version only using grep with Perl-style regex can be done like this:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>java -version 2&gt;&amp;1 | grep -oP 'version &quot;?(1\\.)?\\K\\d+'\n</code></pre>\n<p>This will print the major version for Java 9 or higher and the minor version for versions lower than 9, for example <code>8</code> for Java <code>1.8</code> and <code>11</code> for Java <code>11.0.4</code>.</p>\n<p>It can be used like this:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>JAVA_MAJOR_VERSION=$(java -version 2&gt;&amp;1 | grep -oP 'version &quot;?(1\\.)?\\K\\d+' || true)\nif [[ $JAVA_MAJOR_VERSION -lt 8 ]]; then\n  echo &quot;Java 8 or higher is required!&quot;\n  exit 1\nfi\n</code></pre>\n<p>The <code>|| true</code> was added to prevent the script from aborting in case Java is not installed and the Shell option <code>set -e</code> was enabled.</p>\n"},{"comments":[{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1670840656,"post_id":74459237,"comment_id":131958295,"body_markdown":"I&#39;&#39;m getting `-bash: java_version_major: command not found` for the line with the here string `&lt;&lt;&lt;`.","body":"I&#39;&#39;m getting <code>-bash: java_version_major: command not found</code> for the line with the here string <code>&lt;&lt;&lt;</code>."},{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":1,"creation_date":1670840729,"post_id":74459237,"comment_id":131958316,"body_markdown":"`IFS=&quot;.&quot; read java_version_major java_version_minor java_version_build java_version_patch   &lt;&lt;&lt; &quot;$java_version_string&quot;` works for me.","body":"<code>IFS=&quot;.&quot; read java_version_major java_version_minor java_version_build java_version_patch   &lt;&lt;&lt; &quot;$java_version_string&quot;</code> works for me."},{"owner":{"account_id":6014861,"reputation":18112,"user_id":7939871,"display_name":"L&#233;a Gris"},"score":1,"creation_date":1670841793,"post_id":74459237,"comment_id":131958648,"body_markdown":"@AaronDigulla I broke my answer with an unfortunate cut during an edit. It is now fixed.","body":"@AaronDigulla I broke my answer with an unfortunate cut during an edit. It is now fixed."}],"tags":[],"owner":{"account_id":6014861,"reputation":18112,"user_id":7939871,"display_name":"L&#233;a Gris"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1670848099,"creation_date":1668596164,"answer_id":74459237,"question_id":7334754,"body_markdown":"Getting java version string, using Bash&#39;s built-in parsing capabilities:\r\n\r\n```sh\r\n#!/usr/bin/env bash\r\n\r\njava_cmd=${1:-java}\r\n\r\n# Captures version string between double-quotes\r\nIFS=&#39;&quot;&#39; read -r _ java_version_string _ &lt; &lt;(&quot;${java_cmd}&quot; -version 2&gt;&amp;1)\r\n\r\n# Splits version string at dots and (underscore for patch number)\r\nIFS=&#39;._&#39; read -r \\\r\n  java_version_major \\\r\n  java_version_minor \\\r\n  java_version_build \\\r\n  java_version_patch \\\r\n  &lt;&lt;&lt;&quot;$java_version_string&quot;\r\n\r\n# Debug demo output\r\ndeclare -p java_version_major java_version_minor java_version_build \\\r\n  java_version_patch\r\n```\r\n\r\n**Examples**\r\n\r\nSystem default Java 17:\r\n```sh\r\ndeclare -- java_version_major=&quot;17&quot;\r\ndeclare -- java_version_minor=&quot;0&quot;\r\ndeclare -- java_version_build=&quot;3&quot;\r\ndeclare -- java_version_patch=&quot;&quot;\r\n```\r\n\r\nSpecific Java 8 path provided as argument:\r\n```sh\r\ndeclare -- java_version_major=&quot;1&quot;\r\ndeclare -- java_version_minor=&quot;8&quot;\r\ndeclare -- java_version_build=&quot;0&quot;\r\ndeclare -- java_version_patch=&quot;352&quot;\r\n```","title":"Correct way to check Java version from BASH script","body":"<p>Getting java version string, using Bash's built-in parsing capabilities:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>#!/usr/bin/env bash\n\njava_cmd=${1:-java}\n\n# Captures version string between double-quotes\nIFS='&quot;' read -r _ java_version_string _ &lt; &lt;(&quot;${java_cmd}&quot; -version 2&gt;&amp;1)\n\n# Splits version string at dots and (underscore for patch number)\nIFS='._' read -r \\\n  java_version_major \\\n  java_version_minor \\\n  java_version_build \\\n  java_version_patch \\\n  &lt;&lt;&lt;&quot;$java_version_string&quot;\n\n# Debug demo output\ndeclare -p java_version_major java_version_minor java_version_build \\\n  java_version_patch\n</code></pre>\n<p><strong>Examples</strong></p>\n<p>System default Java 17:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>declare -- java_version_major=&quot;17&quot;\ndeclare -- java_version_minor=&quot;0&quot;\ndeclare -- java_version_build=&quot;3&quot;\ndeclare -- java_version_patch=&quot;&quot;\n</code></pre>\n<p>Specific Java 8 path provided as argument:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>declare -- java_version_major=&quot;1&quot;\ndeclare -- java_version_minor=&quot;8&quot;\ndeclare -- java_version_build=&quot;0&quot;\ndeclare -- java_version_patch=&quot;352&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":190274,"reputation":321,"user_id":430139,"accept_rate":0,"display_name":"ivenhov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696180945,"creation_date":1696171612,"answer_id":77210970,"question_id":7334754,"body_markdown":"This question is still relevant so posting my answer.\r\n\r\nUsing slightly convoluted way by using built-in Bash variable expansions and avoiding creating multiple sub-shells\r\n\r\n    line=$(java -version 2&gt;&amp;1 | head -1) &amp;&amp; echo ${${${line#*\\&quot;}#1.}%%.*}\r\n\r\nReturns 8 for Java 1.8.0_312 and 17 for 17.0.6\r\n\r\nThis can be used in a script like below\r\n\r\n    #!/bin/bash\r\n\r\n    required=5\r\n\r\n    version=$(line=$(java -version 2&gt;&amp;1 | head -1) &amp;&amp; echo ${${${line#*\\&quot;}#1.}%%.*})\r\n    \r\n    [[ $version -ge $required ]] &amp;&amp; echo &quot;Java version OK&quot; || echo &quot;Java version too low&quot;","title":"Correct way to check Java version from BASH script","body":"<p>This question is still relevant so posting my answer.</p>\n<p>Using slightly convoluted way by using built-in Bash variable expansions and avoiding creating multiple sub-shells</p>\n<pre><code>line=$(java -version 2&gt;&amp;1 | head -1) &amp;&amp; echo ${${${line#*\\&quot;}#1.}%%.*}\n</code></pre>\n<p>Returns 8 for Java 1.8.0_312 and 17 for 17.0.6</p>\n<p>This can be used in a script like below</p>\n<pre><code>#!/bin/bash\n\nrequired=5\n\nversion=$(line=$(java -version 2&gt;&amp;1 | head -1) &amp;&amp; echo ${${${line#*\\&quot;}#1.}%%.*})\n\n[[ $version -ge $required ]] &amp;&amp; echo &quot;Java version OK&quot; || echo &quot;Java version too low&quot;\n</code></pre>\n"}],"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111424,"favorite_count":0,"down_vote_count":1,"up_vote_count":80,"accepted_answer_id":7335524,"answer_count":18,"score":79,"last_activity_date":1697597241,"creation_date":1315402494,"question_id":7334754,"body_markdown":"How can I check whether Java is available (in the PATH or via JAVA_HOME) from a bash script and make sure the version is at least 1.5?","title":"Correct way to check Java version from BASH script","body":"<p>How can I check whether Java is available (in the PATH or via JAVA_HOME) from a bash script and make sure the version is at least 1.5?</p>\n"},{"tags":["javascript","java","formatting","format","prettier"],"answers":[{"tags":[],"owner":{"account_id":24650539,"reputation":94,"user_id":22576975,"display_name":"Heath B"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697596107,"creation_date":1697596107,"answer_id":77313169,"question_id":77301754,"body_markdown":"You cannot set a prettier config that will add extra spaces into your code like that. Honestly, it&#39;s a bad habit to get into and you should avoid doing that. Line breaks should only be used where they are separating content logically. This would not pass the sniff-test for any code review. If you&#39;re asking about the trailing semicolon, then you can create a .prettierrc file and put this content into it:\r\n\r\n    {\r\n      &quot;semi&quot;: false,\r\n    }","title":"Format JavaScript vscode code to be like java in eclipse","body":"<p>You cannot set a prettier config that will add extra spaces into your code like that. Honestly, it's a bad habit to get into and you should avoid doing that. Line breaks should only be used where they are separating content logically. This would not pass the sniff-test for any code review. If you're asking about the trailing semicolon, then you can create a .prettierrc file and put this content into it:</p>\n<pre><code>{\n  &quot;semi&quot;: false,\n}\n</code></pre>\n"}],"owner":{"account_id":25590503,"reputation":1,"user_id":19367342,"display_name":"Mahmoud Elkafrawy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697596107,"creation_date":1697457387,"question_id":77301754,"body_markdown":"I have code formatted like this\r\n\r\n```\r\n   subRedirect() {\r\n\r\n        let features = this.config.get(&#39;features&#39;)\r\n        if (features !== null) {\r\n            features.forEach(feature =&gt; {\r\n                this.composeWith(require.resolve(&quot;../&quot; + feature.type.toLowerCase()));\r\n\r\n            })\r\n\r\n\r\n        }\r\n\r\n    }\r\n```\r\n\r\nbut when editing and saving with prettier it will be like this\r\n\r\n```\r\n subRedirect() {\r\n    let features = this.config.get(&quot;features&quot;);\r\n    if (features !== null) {\r\n      features.forEach((feature) =&gt; {\r\n        this.composeWith(require.resolve(&quot;../&quot; + feature.type.toLowerCase()));\r\n      });\r\n    }\r\n  }\r\n```\r\n\r\nis there a way or prettier config file to achieve the first code format\r\n\r\ni tried some extensions on VScode but none working with JavaScript","title":"Format JavaScript vscode code to be like java in eclipse","body":"<p>I have code formatted like this</p>\n<pre><code>   subRedirect() {\n\n        let features = this.config.get('features')\n        if (features !== null) {\n            features.forEach(feature =&gt; {\n                this.composeWith(require.resolve(&quot;../&quot; + feature.type.toLowerCase()));\n\n            })\n\n\n        }\n\n    }\n</code></pre>\n<p>but when editing and saving with prettier it will be like this</p>\n<pre><code> subRedirect() {\n    let features = this.config.get(&quot;features&quot;);\n    if (features !== null) {\n      features.forEach((feature) =&gt; {\n        this.composeWith(require.resolve(&quot;../&quot; + feature.type.toLowerCase()));\n      });\n    }\n  }\n</code></pre>\n<p>is there a way or prettier config file to achieve the first code format</p>\n<p>i tried some extensions on VScode but none working with JavaScript</p>\n"},{"tags":["java","memory-leaks"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1697533627,"post_id":77307535,"comment_id":136288627,"body_markdown":"It&#39;s possible there&#39;s a memory leak in the application. You won&#39;t find it by looking at `top`. Make a full dump of the application and analyze it. You can find tools to help by googling &quot;java memory dump&quot;.","body":"It&#39;s possible there&#39;s a memory leak in the application. You won&#39;t find it by looking at <code>top</code>. Make a full dump of the application and analyze it. You can find tools to help by googling &quot;java memory dump&quot;."},{"owner":{"account_id":8265962,"reputation":1,"user_id":6215506,"display_name":"keller"},"score":0,"creation_date":1697535388,"post_id":77307535,"comment_id":136289005,"body_markdown":"I checked GC and it was basically normal.","body":"I checked GC and it was basically normal."}],"owner":{"account_id":8265962,"reputation":1,"user_id":6215506,"display_name":"keller"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697595645,"creation_date":1697533251,"question_id":77307535,"body_markdown":"Within the cluster, there are several individual machines whose memory continues to increase until the alarm.\r\nI am searching for a long time on net. But no use. Please help or try to give some ideas how to achieve this.\r\n\r\n\r\nCompare abnormal machines with problematic machines, some info show：\r\n\r\n\r\n   abnormal machine： \r\n\r\n - [top show mem 10gb](https://i.stack.imgur.com/bR3BM.png)\r\n\r\n - java Native memeory show commit 9479MB:\r\n\r\n```\r\nNative Memory Tracking:\r\n\r\nTotal: reserved=10651MB, committed=9479MB\r\n-                 Java Heap (reserved=7168MB, committed=7168MB)\r\n                            (mmap: reserved=7168MB, committed=7168MB) \r\n \r\n-                     Class (reserved=1147MB, committed=140MB)\r\n                            (classes #22587)\r\n                            (malloc=3MB #50903) \r\n                            (mmap: reserved=1144MB, committed=137MB) \r\n \r\n-                    Thread (reserved=1020MB, committed=1020MB)\r\n                            (thread #1013)\r\n                            (stack: reserved=1016MB, committed=1016MB)\r\n                            (malloc=3MB #5073) \r\n                            (arena=1MB #2021)\r\n \r\n-                      Code (reserved=262MB, committed=112MB)\r\n                            (malloc=18MB #26576) \r\n                            (mmap: reserved=244MB, committed=93MB) \r\n \r\n-                        GC (reserved=354MB, committed=354MB)\r\n                            (malloc=56MB #58554) \r\n                            (mmap: reserved=298MB, committed=298MB) \r\n \r\n-                  Compiler (reserved=2MB, committed=2MB)\r\n                            (malloc=2MB #4614) \r\n \r\n-                  Internal (reserved=649MB, committed=649MB)\r\n                            (malloc=649MB #66342) \r\n \r\n-                    Symbol (reserved=26MB, committed=26MB)\r\n                            (malloc=24MB #242279) \r\n                            (arena=2MB #1)\r\n \r\n-    Native Memory Tracking (reserved=7MB, committed=7MB)\r\n                            (tracking overhead=7MB)\r\n \r\n-                   Unknown (reserved=14MB, committed=0MB)\r\n                            (mmap: reserved=14MB, committed=0MB)\r\n```\r\n\r\n\r\n----------\r\n\r\n\r\nnormal machine\r\n- [top show mem 8.1gb](https://i.stack.imgur.com/K4Hi5.png)\r\n- java Native memeory show commit 9291MB:\r\n\r\n```\r\nNative Memory Tracking:\r\n\r\nTotal: reserved=10465MB, committed=9291MB\r\n-                 Java Heap (reserved=7168MB, committed=7168MB)\r\n                            (mmap: reserved=7168MB, committed=7168MB) \r\n \r\n-                     Class (reserved=1140MB, committed=132MB)\r\n                            (classes #20844)\r\n                            (malloc=4MB #50411) \r\n                            (mmap: reserved=1136MB, committed=128MB) \r\n \r\n-                    Thread (reserved=1087MB, committed=1087MB)\r\n                            (thread #1079)\r\n                            (stack: reserved=1082MB, committed=1082MB)\r\n                            (malloc=3MB #5403) \r\n                            (arena=1MB #2153)\r\n \r\n-                      Code (reserved=262MB, committed=110MB)\r\n                            (malloc=18MB #25669) \r\n                            (mmap: reserved=244MB, committed=92MB) \r\n \r\n-                        GC (reserved=333MB, committed=333MB)\r\n                            (malloc=35MB #38960) \r\n                            (mmap: reserved=298MB, committed=298MB) \r\n \r\n-                  Compiler (reserved=3MB, committed=3MB)\r\n                            (malloc=3MB #5355) \r\n \r\n-                  Internal (reserved=427MB, committed=427MB)\r\n                            (malloc=427MB #50809) \r\n \r\n-                    Symbol (reserved=24MB, committed=24MB)\r\n                            (malloc=22MB #227078) \r\n                            (arena=2MB #1)\r\n \r\n-    Native Memory Tracking (reserved=6MB, committed=6MB)\r\n                            (tracking overhead=6MB)\r\n \r\n-                   Unknown (reserved=14MB, committed=0MB)\r\n                            (mmap: reserved=14MB, committed=0MB) \r\n```\r\n\r\nThe abnormal machine top shows that it takes up 10g of memory, and the normal machine shows 8.1 g. However, the java memory stack shows that the memory consumption on both sides is not much different. The whole thing looks normal, but the memory footprint of abnormal machines is very high.\r\n\r\n\r\n----------\r\n\r\n\r\n Check the stack situation, it seems that the memory occupation of the whole stack is basically the same as that of normal machines, abnormal machines will have several times full gc, but this does not seem to be a problem.\r\n```\r\nabnormal machine:jstat -gc 1954\r\n S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   \r\n 0.0   262144.0  0.0   262144.0 3637248.0 425984.0 3440640.0  2568134.1  140052.0 123958.6 18452.0 15316.6  12853  585.804   3     27.154  612.958\r\n\r\n\r\n\r\nnormal machine:jstat -gc 1973\r\n S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   \r\n 0.0   163840.0  0.0   163840.0 4194304.0 1605632.0 2981888.0  2257346.5  131496.0 114735.3 17356.0 14088.7  10696  336.754   0      0.000  336.754\r\n```\r\nThe entire stack takes up to 7 gigabytes, but java process memory usage has exceeded 10 gigabytes and continues to increase.\r\n\r\nIve tried multiple variations of this, but none of them seem to work. Any ideas?\r\n\r\nThanks in advance.","title":"Within the cluster, there are several individual machines whose memory continues to increase until it exceeds 85%.how to resolve?","body":"<p>Within the cluster, there are several individual machines whose memory continues to increase until the alarm.\nI am searching for a long time on net. But no use. Please help or try to give some ideas how to achieve this.</p>\n<p>Compare abnormal machines with problematic machines, some info show：</p>\n<p>abnormal machine：</p>\n<ul>\n<li><p><a href=\"https://i.stack.imgur.com/bR3BM.png\" rel=\"nofollow noreferrer\">top show mem 10gb</a></p>\n</li>\n<li><p>java Native memeory show commit 9479MB:</p>\n</li>\n</ul>\n<pre><code>Native Memory Tracking:\n\nTotal: reserved=10651MB, committed=9479MB\n-                 Java Heap (reserved=7168MB, committed=7168MB)\n                            (mmap: reserved=7168MB, committed=7168MB) \n \n-                     Class (reserved=1147MB, committed=140MB)\n                            (classes #22587)\n                            (malloc=3MB #50903) \n                            (mmap: reserved=1144MB, committed=137MB) \n \n-                    Thread (reserved=1020MB, committed=1020MB)\n                            (thread #1013)\n                            (stack: reserved=1016MB, committed=1016MB)\n                            (malloc=3MB #5073) \n                            (arena=1MB #2021)\n \n-                      Code (reserved=262MB, committed=112MB)\n                            (malloc=18MB #26576) \n                            (mmap: reserved=244MB, committed=93MB) \n \n-                        GC (reserved=354MB, committed=354MB)\n                            (malloc=56MB #58554) \n                            (mmap: reserved=298MB, committed=298MB) \n \n-                  Compiler (reserved=2MB, committed=2MB)\n                            (malloc=2MB #4614) \n \n-                  Internal (reserved=649MB, committed=649MB)\n                            (malloc=649MB #66342) \n \n-                    Symbol (reserved=26MB, committed=26MB)\n                            (malloc=24MB #242279) \n                            (arena=2MB #1)\n \n-    Native Memory Tracking (reserved=7MB, committed=7MB)\n                            (tracking overhead=7MB)\n \n-                   Unknown (reserved=14MB, committed=0MB)\n                            (mmap: reserved=14MB, committed=0MB)\n</code></pre>\n<hr />\n<p>normal machine</p>\n<ul>\n<li><a href=\"https://i.stack.imgur.com/K4Hi5.png\" rel=\"nofollow noreferrer\">top show mem 8.1gb</a></li>\n<li>java Native memeory show commit 9291MB:</li>\n</ul>\n<pre><code>Native Memory Tracking:\n\nTotal: reserved=10465MB, committed=9291MB\n-                 Java Heap (reserved=7168MB, committed=7168MB)\n                            (mmap: reserved=7168MB, committed=7168MB) \n \n-                     Class (reserved=1140MB, committed=132MB)\n                            (classes #20844)\n                            (malloc=4MB #50411) \n                            (mmap: reserved=1136MB, committed=128MB) \n \n-                    Thread (reserved=1087MB, committed=1087MB)\n                            (thread #1079)\n                            (stack: reserved=1082MB, committed=1082MB)\n                            (malloc=3MB #5403) \n                            (arena=1MB #2153)\n \n-                      Code (reserved=262MB, committed=110MB)\n                            (malloc=18MB #25669) \n                            (mmap: reserved=244MB, committed=92MB) \n \n-                        GC (reserved=333MB, committed=333MB)\n                            (malloc=35MB #38960) \n                            (mmap: reserved=298MB, committed=298MB) \n \n-                  Compiler (reserved=3MB, committed=3MB)\n                            (malloc=3MB #5355) \n \n-                  Internal (reserved=427MB, committed=427MB)\n                            (malloc=427MB #50809) \n \n-                    Symbol (reserved=24MB, committed=24MB)\n                            (malloc=22MB #227078) \n                            (arena=2MB #1)\n \n-    Native Memory Tracking (reserved=6MB, committed=6MB)\n                            (tracking overhead=6MB)\n \n-                   Unknown (reserved=14MB, committed=0MB)\n                            (mmap: reserved=14MB, committed=0MB) \n</code></pre>\n<p>The abnormal machine top shows that it takes up 10g of memory, and the normal machine shows 8.1 g. However, the java memory stack shows that the memory consumption on both sides is not much different. The whole thing looks normal, but the memory footprint of abnormal machines is very high.</p>\n<hr />\n<p>Check the stack situation, it seems that the memory occupation of the whole stack is basically the same as that of normal machines, abnormal machines will have several times full gc, but this does not seem to be a problem.</p>\n<pre><code>abnormal machine:jstat -gc 1954\n S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   \n 0.0   262144.0  0.0   262144.0 3637248.0 425984.0 3440640.0  2568134.1  140052.0 123958.6 18452.0 15316.6  12853  585.804   3     27.154  612.958\n\n\n\nnormal machine:jstat -gc 1973\n S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   \n 0.0   163840.0  0.0   163840.0 4194304.0 1605632.0 2981888.0  2257346.5  131496.0 114735.3 17356.0 14088.7  10696  336.754   0      0.000  336.754\n</code></pre>\n<p>The entire stack takes up to 7 gigabytes, but java process memory usage has exceeded 10 gigabytes and continues to increase.</p>\n<p>Ive tried multiple variations of this, but none of them seem to work. Any ideas?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring-boot","graphql","graphql-spqr"],"answers":[{"comments":[{"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"score":0,"creation_date":1697732881,"post_id":77306618,"comment_id":136319877,"body_markdown":"You should ideally return `result.toSpecification()`","body":"You should ideally return <code>result.toSpecification()</code>"}],"tags":[],"owner":{"account_id":12270189,"reputation":1,"user_id":8955549,"display_name":"hardkraja20"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697595447,"creation_date":1697524294,"answer_id":77306618,"question_id":77287573,"body_markdown":"I found the answer of the above question,\r\n\r\n```java\r\n@PostMapping(value = &quot;/graphql&quot;)\r\n    public Map&lt;String, Object&gt; execute(@RequestBody Map&lt;String, String&gt; request, HttpServletRequest raw)\r\n            throws GraphQLException {\r\n        ExecutionResult result = graphQL.execute(request.get(&quot;query&quot;));\r\n        return result; // it should return executionResult as it is\r\n    }\r\n```\r\nEarlier, I was returning executionResult.getData() instead of executionResult - that is why it was not working.\r\n","title":"Handling Exceptions not working with SPQR (graphql)","body":"<p>I found the answer of the above question,</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(value = &quot;/graphql&quot;)\n    public Map&lt;String, Object&gt; execute(@RequestBody Map&lt;String, String&gt; request, HttpServletRequest raw)\n            throws GraphQLException {\n        ExecutionResult result = graphQL.execute(request.get(&quot;query&quot;));\n        return result; // it should return executionResult as it is\n    }\n</code></pre>\n<p>Earlier, I was returning executionResult.getData() instead of executionResult - that is why it was not working.</p>\n"}],"owner":{"account_id":12270189,"reputation":1,"user_id":8955549,"display_name":"hardkraja20"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77306618,"answer_count":1,"score":0,"last_activity_date":1697595447,"creation_date":1697198701,"question_id":77287573,"body_markdown":"I am having an issue in configuring exception handling with this. I went through all the issues/examples and found some solutions. But don&#39;t know that is not working.\r\n\r\n**See, here is how I configured my graphQL**\r\n\r\n    @Autowired\r\n        public GraphqlController(BookResolver bookResolver) {\r\n            GraphQLSchema schema = new GraphQLSchemaGenerator()\r\n                    .withBasePackages(&quot;com.graphql.learn&quot;)\r\n                    .withOperationsFromSingleton(bookResolver)\r\n                    .generate();\r\n            this.graphQL = new GraphQL.Builder(schema)\r\n                    .queryExecutionStrategy(new AsyncExecutionStrategy(new CustomExceptionHandler()))\r\n                    .mutationExecutionStrategy(new AsyncExecutionStrategy(new CustomExceptionHandler()))\r\n                    .build();\r\n        }\r\n        @PostMapping(value = &quot;/graphql&quot;)\r\n        public Map&lt;String, Object&gt; execute(@RequestBody Map&lt;String, String&gt; request, HttpServletRequest raw)\r\n                throws GraphQLException {\r\n            ExecutionResult result = graphQL.execute(request.get(&quot;query&quot;));\r\n            return result.getData();\r\n        }\r\n    \r\n   **This is the resolver I made (_Here, I am intentionally throwing an exception_)**\r\n   \r\n\r\n    @GraphQLQuery\r\n        public List&lt;Book&gt; books(){\r\n            if(true){\r\n                throw new NullPointerException(&quot;Null pointer exception&quot;);\r\n            }\r\n            return bookService.getAll();\r\n        }\r\n **And Here is how I created CustomExceptionHandler**\r\n    \r\n     @Component\r\n    public class CustomExceptionHandler implements DataFetcherExceptionHandler {\r\n    \r\n        private DataFetcherExceptionHandlerResult onExceptionHandler(DataFetcherExceptionHandlerParameters handlerParameters) {\r\n    \r\n            Throwable exception = handlerParameters.getException();\r\n    \r\n            // do something with exception\r\n    \r\n            GraphQLError error = GraphqlErrorBuilder\r\n                    .newError()\r\n                    .message(exception.getMessage())\r\n                    .build();\r\n    \r\n            return DataFetcherExceptionHandlerResult\r\n                    .newResult()\r\n                    .error(error)\r\n                    .build();\r\n        }\r\n    \r\n        @Override\r\n        public CompletableFuture&lt;DataFetcherExceptionHandlerResult&gt; handleException(DataFetcherExceptionHandlerParameters handlerParameters) {\r\n            DataFetcherExceptionHandlerResult result = onExceptionHandler(handlerParameters);\r\n            return CompletableFuture.completedFuture(result);\r\n        }\r\n    }\r\n\r\n**And Here What I get for the query result **\r\n- Request \r\n```\r\nquery{\r\n    books{\r\n        id,\r\n        title\r\n    }\r\n}\r\n```\r\n- Response\r\n```\r\n{\r\n    &quot;books&quot;: null\r\n}\r\n```\r\n\r\n- Please show me how can I configure in a way so that I get proper exception message in response.\r\n- To get the access of whole implementation you can refer to this branch -&gt; https://github.com/Hardikraja/graphql-learning/tree/with-spqr\r\n\r\nThanks.\r\n\r\n    \r\n\r\nI tried using `DataFetcherExceptionHandler` and `ResolverInterceptor` too. But, Still getting the same issue.","title":"Handling Exceptions not working with SPQR (graphql)","body":"<p>I am having an issue in configuring exception handling with this. I went through all the issues/examples and found some solutions. But don't know that is not working.</p>\n<p><strong>See, here is how I configured my graphQL</strong></p>\n<pre><code>@Autowired\n    public GraphqlController(BookResolver bookResolver) {\n        GraphQLSchema schema = new GraphQLSchemaGenerator()\n                .withBasePackages(&quot;com.graphql.learn&quot;)\n                .withOperationsFromSingleton(bookResolver)\n                .generate();\n        this.graphQL = new GraphQL.Builder(schema)\n                .queryExecutionStrategy(new AsyncExecutionStrategy(new CustomExceptionHandler()))\n                .mutationExecutionStrategy(new AsyncExecutionStrategy(new CustomExceptionHandler()))\n                .build();\n    }\n    @PostMapping(value = &quot;/graphql&quot;)\n    public Map&lt;String, Object&gt; execute(@RequestBody Map&lt;String, String&gt; request, HttpServletRequest raw)\n            throws GraphQLException {\n        ExecutionResult result = graphQL.execute(request.get(&quot;query&quot;));\n        return result.getData();\n    }\n</code></pre>\n<p><strong>This is the resolver I made (<em>Here, I am intentionally throwing an exception</em>)</strong></p>\n<pre><code>@GraphQLQuery\n    public List&lt;Book&gt; books(){\n        if(true){\n            throw new NullPointerException(&quot;Null pointer exception&quot;);\n        }\n        return bookService.getAll();\n    }\n</code></pre>\n<p><strong>And Here is how I created CustomExceptionHandler</strong></p>\n<pre><code> @Component\npublic class CustomExceptionHandler implements DataFetcherExceptionHandler {\n\n    private DataFetcherExceptionHandlerResult onExceptionHandler(DataFetcherExceptionHandlerParameters handlerParameters) {\n\n        Throwable exception = handlerParameters.getException();\n\n        // do something with exception\n\n        GraphQLError error = GraphqlErrorBuilder\n                .newError()\n                .message(exception.getMessage())\n                .build();\n\n        return DataFetcherExceptionHandlerResult\n                .newResult()\n                .error(error)\n                .build();\n    }\n\n    @Override\n    public CompletableFuture&lt;DataFetcherExceptionHandlerResult&gt; handleException(DataFetcherExceptionHandlerParameters handlerParameters) {\n        DataFetcherExceptionHandlerResult result = onExceptionHandler(handlerParameters);\n        return CompletableFuture.completedFuture(result);\n    }\n}\n</code></pre>\n<p>**And Here What I get for the query result **</p>\n<ul>\n<li>Request</li>\n</ul>\n<pre><code>query{\n    books{\n        id,\n        title\n    }\n}\n</code></pre>\n<ul>\n<li>Response</li>\n</ul>\n<pre><code>{\n    &quot;books&quot;: null\n}\n</code></pre>\n<ul>\n<li>Please show me how can I configure in a way so that I get proper exception message in response.</li>\n<li>To get the access of whole implementation you can refer to this branch -&gt; <a href=\"https://github.com/Hardikraja/graphql-learning/tree/with-spqr\" rel=\"nofollow noreferrer\">https://github.com/Hardikraja/graphql-learning/tree/with-spqr</a></li>\n</ul>\n<p>Thanks.</p>\n<p>I tried using <code>DataFetcherExceptionHandler</code> and <code>ResolverInterceptor</code> too. But, Still getting the same issue.</p>\n"},{"tags":["java","eclipse","crash","javadoc"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1697487294,"post_id":77304597,"comment_id":136283574,"body_markdown":"Do you have an NVIDIA GPU with an NVIDIA driver? Does it also crash on _Help &gt; Help Contents_? If yes, it&#39;s related to the web browser widget. When you start Eclipse in the terminal, is then anything logged/printed?","body":"Do you have an NVIDIA GPU with an NVIDIA driver? Does it also crash on <i>Help &gt; Help Contents</i>? If yes, it&#39;s related to the web browser widget. When you start Eclipse in the terminal, is then anything logged/printed?"},{"owner":{"account_id":3142246,"reputation":2632,"user_id":2657515,"accept_rate":75,"display_name":"JonathanDavidArndt"},"score":0,"creation_date":1697488028,"post_id":77304597,"comment_id":136283684,"body_markdown":"Ah ha! &quot;No provider of eglCreateImage found.  Requires one of: EGL 15&quot; (yes, it does crash on Help &gt; Help Contents)","body":"Ah ha! &quot;No provider of eglCreateImage found.  Requires one of: EGL 15&quot; (yes, it does crash on Help &gt; Help Contents)"},{"owner":{"account_id":3142246,"reputation":2632,"user_id":2657515,"accept_rate":75,"display_name":"JonathanDavidArndt"},"score":1,"creation_date":1697488037,"post_id":77304597,"comment_id":136283685,"body_markdown":"And there is already a bug report: https://github.com/tauri-apps/tauri/issues/8013","body":"And there is already a bug report: <a href=\"https://github.com/tauri-apps/tauri/issues/8013\" rel=\"nofollow noreferrer\">github.com/tauri-apps/tauri/issues/8013</a>"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1697488464,"post_id":77304597,"comment_id":136283738,"body_markdown":"Does the [workaround that is mention it that bug report work for you (setting the environment variable `WEBKIT_DISABLE_COMPOSITING_MODE=1`)](https://github.com/tauri-apps/tauri/issues/8013#issuecomment-1761085938)? If yes, please add a self-answer.","body":"Does the <a href=\"https://github.com/tauri-apps/tauri/issues/8013#issuecomment-1761085938\" rel=\"nofollow noreferrer\">workaround that is mention it that bug report work for you (setting the environment variable <code>WEBKIT_DISABLE_COMPOSITING_MODE=1</code>)</a>? If yes, please add a self-answer."},{"owner":{"account_id":3142246,"reputation":2632,"user_id":2657515,"accept_rate":75,"display_name":"JonathanDavidArndt"},"score":0,"creation_date":1697490315,"post_id":77304597,"comment_id":136284059,"body_markdown":"Once I remembered to tack the `env` on the front of the command, it worked great! Thank you for those who responded!","body":"Once I remembered to tack the <code>env</code> on the front of the command, it worked great! Thank you for those who responded!"}],"answers":[{"tags":[],"owner":{"account_id":3142246,"reputation":2632,"user_id":2657515,"accept_rate":75,"display_name":"JonathanDavidArndt"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1697490202,"creation_date":1697490202,"answer_id":77304952,"question_id":77304597,"body_markdown":"From information provided in this [bug report](https://github.com/tauri-apps/tauri/issues/8013), launching Eclipse with a modified environment variable solved the problem.\r\n\r\n    env WEBKIT_DISABLE_COMPOSITING_MODE=1 ./eclipse","title":"Eclipse 2023-09 crashes whenever Javadocs begin loading","body":"<p>From information provided in this <a href=\"https://github.com/tauri-apps/tauri/issues/8013\" rel=\"nofollow noreferrer\">bug report</a>, launching Eclipse with a modified environment variable solved the problem.</p>\n<pre><code>env WEBKIT_DISABLE_COMPOSITING_MODE=1 ./eclipse\n</code></pre>\n"}],"owner":{"account_id":3142246,"reputation":2632,"user_id":2657515,"accept_rate":75,"display_name":"JonathanDavidArndt"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77304952,"answer_count":1,"score":1,"last_activity_date":1697594976,"creation_date":1697485689,"question_id":77304597,"body_markdown":"Eclipse is instant-crashing with no errors, no warnings whenever Javadocs are loaded.\r\n\r\nThis happens during:\r\n\r\n* content-assist with &lt;kbd&gt;CTRL+SPACE&lt;/kbd&gt; (the content-assist part is working fine, however, when hovering over a method, a second panel opens that has the Javadoc: it is when this second panel begins to open when the crash occurs)\r\n* whenever the Javadoc Eclipse view is opened (even if nothing is selected, simply opening the view panel causes the crash)\r\n\r\nThe crash happens immediately.  \r\nNothing is shown on the screen, nothing is written to the logs, program just stops and vanishes.\r\nEverything restarts just fine, however *(workspace does not save, and reverts back to whatever previous state it had)* and I can continue working.\r\n\r\nHave already tried:\r\n\r\n* updating/validating/removing the location of the Javadoc for the the Installed JREs\r\n* changing/disabling the internal/external Web Browser\r\n* updating the `eclipse.ini` file with various options for `-Dorg.eclipse.swt.browser`, based on various crash bug reports, most of which were extremely old to begin with\r\n* checking the logs in `/confuguration/` and `/.metadata/.log`\r\n\r\n(Unfortunately, there is nothing in any of the logs.)\r\n\r\nInstallation is totally vanilla. There are no plugins installed, and no configuration changes from the installation defaults.\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n    Version: 2023-09 (4.29.0)\r\n    Build ID: 4.29.0.20230907-1200\r\n    Platform: Debian Linux\r\n","title":"Eclipse 2023-09 crashes whenever Javadocs begin loading","body":"<p>Eclipse is instant-crashing with no errors, no warnings whenever Javadocs are loaded.</p>\n<p>This happens during:</p>\n<ul>\n<li>content-assist with <kbd>CTRL+SPACE</kbd> (the content-assist part is working fine, however, when hovering over a method, a second panel opens that has the Javadoc: it is when this second panel begins to open when the crash occurs)</li>\n<li>whenever the Javadoc Eclipse view is opened (even if nothing is selected, simply opening the view panel causes the crash)</li>\n</ul>\n<p>The crash happens immediately.<br />\nNothing is shown on the screen, nothing is written to the logs, program just stops and vanishes.\nEverything restarts just fine, however <em>(workspace does not save, and reverts back to whatever previous state it had)</em> and I can continue working.</p>\n<p>Have already tried:</p>\n<ul>\n<li>updating/validating/removing the location of the Javadoc for the the Installed JREs</li>\n<li>changing/disabling the internal/external Web Browser</li>\n<li>updating the <code>eclipse.ini</code> file with various options for <code>-Dorg.eclipse.swt.browser</code>, based on various crash bug reports, most of which were extremely old to begin with</li>\n<li>checking the logs in <code>/confuguration/</code> and <code>/.metadata/.log</code></li>\n</ul>\n<p>(Unfortunately, there is nothing in any of the logs.)</p>\n<p>Installation is totally vanilla. There are no plugins installed, and no configuration changes from the installation defaults.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Version: 2023-09 (4.29.0)\nBuild ID: 4.29.0.20230907-1200\nPlatform: Debian Linux\n</code></pre>\n"},{"tags":["java","xpath","vast","joox"],"answers":[{"tags":[],"owner":{"account_id":2270024,"reputation":1657,"user_id":1997707,"accept_rate":80,"display_name":"John Mercier"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697594817,"creation_date":1697594817,"answer_id":77313110,"question_id":77309234,"body_markdown":"jOOX builds the document with `setNamespaceAware(true)` this causes the document to use namespaces which then requires xpath expressions to use namespaces.\r\n\r\nThis can be fixed by building the document manually with a the DocumentBuilderFactory and passing it to jOOX. Don&#39;t call `setNamespaceAware(true)`.\r\n\r\n```java\r\nvar domFactory = DocumentBuilderFactory.newInstance();\r\nvar builder = domFactory.newDocumentBuilder();\r\nvar document = builder.parse(new ByteArrayInputStream(&quot;&quot;&quot;\r\n    &lt;VAST version=&quot;4.2&quot; xmlns=&quot;http://www.iab.com/VAST&quot;&gt;\r\n            \r\n    &lt;/VAST&gt;\r\n    &quot;&quot;&quot;.getBytes()));\r\nvar vast42version = $(document).xpath(&quot;/VAST&quot;).attr(&quot;version&quot;);\r\n\r\nassertThat(vast42version).isEqualTo(&quot;4.2&quot;);\r\n```","title":"Cannot get attribute on xml with namespace","body":"<p>jOOX builds the document with <code>setNamespaceAware(true)</code> this causes the document to use namespaces which then requires xpath expressions to use namespaces.</p>\n<p>This can be fixed by building the document manually with a the DocumentBuilderFactory and passing it to jOOX. Don't call <code>setNamespaceAware(true)</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>var domFactory = DocumentBuilderFactory.newInstance();\nvar builder = domFactory.newDocumentBuilder();\nvar document = builder.parse(new ByteArrayInputStream(&quot;&quot;&quot;\n    &lt;VAST version=&quot;4.2&quot; xmlns=&quot;http://www.iab.com/VAST&quot;&gt;\n            \n    &lt;/VAST&gt;\n    &quot;&quot;&quot;.getBytes()));\nvar vast42version = $(document).xpath(&quot;/VAST&quot;).attr(&quot;version&quot;);\n\nassertThat(vast42version).isEqualTo(&quot;4.2&quot;);\n</code></pre>\n"}],"owner":{"account_id":2270024,"reputation":1657,"user_id":1997707,"accept_rate":80,"display_name":"John Mercier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697594817,"creation_date":1697547801,"question_id":77309234,"body_markdown":"I am running into trouble with jOOX when trying to get an attribute and with other xpath expressions. This is with a schema that I cannot change.\r\n\r\nWith vast 3.0 there is no targetNamespace so the xml looks like this.\r\n\r\n```\r\n&lt;VAST version=&quot;3.0&quot;&gt;\r\n            \r\n&lt;/VAST&gt;\r\n```\r\n\r\nBut with vast 4.2 there is a targetNamespace so the namespace declaration is required.\r\n\r\n```\r\n&lt;VAST version=&quot;4.2&quot; xmlns=&quot;http://www.iab.com/VAST&quot;&gt;\r\n            \r\n&lt;/VAST&gt;\r\n```\r\n\r\nIf I try to get the version attribute for 3.0 this works.\r\n\r\n```\r\nvar vast3version = $(&quot;&quot;&quot;\r\n    &lt;VAST version=&quot;3.0&quot;&gt;\r\n            \r\n    &lt;/VAST&gt;\r\n    &quot;&quot;&quot;).xpath(&quot;/VAST&quot;).attr(&quot;version&quot;);\r\n\r\nassertThat(vast3version).isEqualTo(&quot;3.0&quot;);\r\n```\r\n\r\nBut if I try vast 4.2 it returns null and the test fails.\r\n\r\n```\r\nvar vast42version = $(&quot;&quot;&quot;\r\n    &lt;VAST version=&quot;4.2&quot; xmlns=&quot;http://www.iab.com/VAST&quot;&gt;\r\n            \r\n    &lt;/VAST&gt;\r\n    &quot;&quot;&quot;).xpath(&quot;/VAST&quot;).attr(&quot;version&quot;);\r\n\r\nassertThat(vast42version).isEqualTo(&quot;4.2&quot;);\r\n```\r\n\r\nIt looks like the introduction of a namespace causes an issue and I&#39;m not sure how to get around it. I&#39;m trying to write an editor class to modify the xml and support both versions but none of the xpaths work for vast 4.2 xml.\r\n\r\nIs there a way to get the version that works for both xml inputs?","title":"Cannot get attribute on xml with namespace","body":"<p>I am running into trouble with jOOX when trying to get an attribute and with other xpath expressions. This is with a schema that I cannot change.</p>\n<p>With vast 3.0 there is no targetNamespace so the xml looks like this.</p>\n<pre><code>&lt;VAST version=&quot;3.0&quot;&gt;\n            \n&lt;/VAST&gt;\n</code></pre>\n<p>But with vast 4.2 there is a targetNamespace so the namespace declaration is required.</p>\n<pre><code>&lt;VAST version=&quot;4.2&quot; xmlns=&quot;http://www.iab.com/VAST&quot;&gt;\n            \n&lt;/VAST&gt;\n</code></pre>\n<p>If I try to get the version attribute for 3.0 this works.</p>\n<pre><code>var vast3version = $(&quot;&quot;&quot;\n    &lt;VAST version=&quot;3.0&quot;&gt;\n            \n    &lt;/VAST&gt;\n    &quot;&quot;&quot;).xpath(&quot;/VAST&quot;).attr(&quot;version&quot;);\n\nassertThat(vast3version).isEqualTo(&quot;3.0&quot;);\n</code></pre>\n<p>But if I try vast 4.2 it returns null and the test fails.</p>\n<pre><code>var vast42version = $(&quot;&quot;&quot;\n    &lt;VAST version=&quot;4.2&quot; xmlns=&quot;http://www.iab.com/VAST&quot;&gt;\n            \n    &lt;/VAST&gt;\n    &quot;&quot;&quot;).xpath(&quot;/VAST&quot;).attr(&quot;version&quot;);\n\nassertThat(vast42version).isEqualTo(&quot;4.2&quot;);\n</code></pre>\n<p>It looks like the introduction of a namespace causes an issue and I'm not sure how to get around it. I'm trying to write an editor class to modify the xml and support both versions but none of the xpaths work for vast 4.2 xml.</p>\n<p>Is there a way to get the version that works for both xml inputs?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9799,"page":118,"page_size":100}
