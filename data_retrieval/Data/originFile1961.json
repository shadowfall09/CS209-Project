{"items":[{"tags":["java"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":6,"creation_date":1633713562,"post_id":69499549,"comment_id":122842054,"body_markdown":"Trivially `new Character(&#39;a&#39;) == new Character(&#39;a&#39;)` is false. Yes you should use `equals` when comparing reference types.","body":"Trivially <code>new Character(&#39;a&#39;) == new Character(&#39;a&#39;)</code> is false. Yes you should use <code>equals</code> when comparing reference types."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":2,"creation_date":1633713607,"post_id":69499549,"comment_id":122842068,"body_markdown":"Does this answer your question? [Why is 128==128 false but 127==127 is true when comparing Integer wrappers in Java?](https://stackoverflow.com/questions/1700081/why-is-128-128-false-but-127-127-is-true-when-comparing-integer-wrappers-in-ja)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/1700081/why-is-128-128-false-but-127-127-is-true-when-comparing-integer-wrappers-in-ja\">Why is 128==128 false but 127==127 is true when comparing Integer wrappers in Java?</a>"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1633713669,"post_id":69499549,"comment_id":122842088,"body_markdown":"It is never a good idea to use `==` with objects.","body":"It is never a good idea to use <code>==</code> with objects."}],"answers":[{"tags":[],"owner":{"account_id":2493093,"reputation":26492,"user_id":2170192,"accept_rate":100,"display_name":"Alex Shesterov"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1633721059,"creation_date":1633713666,"answer_id":69499616,"question_id":69499549,"body_markdown":"No, it&#39;s not safe. You must use `equals()`. \r\n\r\nDemonstration:\r\n\r\n    System.out.println(Character.valueOf(&#39;&#220;&#39;) == Character.valueOf(&#39;&#220;&#39;));\r\n    // -&gt; false\r\n\r\nNote that if you use autoboxing or `Character.valueOf()`, then some characters (ASCII characters) are cached and the same `Character` instance is reused, so `==` may return `true` for the same value:\r\n\r\n    System.out.println(Character.valueOf(&#39;A&#39;) == Character.valueOf(&#39;A&#39;));\r\n    // -&gt; true (on my machine)\r\n\r\nBut it doesn&#39;t work for all characters, and it won&#39;t work if you call the deprecated `new Character(...)` explicitly.\r\n","title":"Is it safe to use !=/== with Character?","body":"<p>No, it's not safe. You must use <code>equals()</code>.</p>\n<p>Demonstration:</p>\n<pre><code>System.out.println(Character.valueOf('Ü') == Character.valueOf('Ü'));\n// -&gt; false\n</code></pre>\n<p>Note that if you use autoboxing or <code>Character.valueOf()</code>, then some characters (ASCII characters) are cached and the same <code>Character</code> instance is reused, so <code>==</code> may return <code>true</code> for the same value:</p>\n<pre><code>System.out.println(Character.valueOf('A') == Character.valueOf('A'));\n// -&gt; true (on my machine)\n</code></pre>\n<p>But it doesn't work for all characters, and it won't work if you call the deprecated <code>new Character(...)</code> explicitly.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1633726824,"creation_date":1633725711,"answer_id":69501507,"question_id":69499549,"body_markdown":"# tl;dr\r\n\r\nUse code points, not `char`/`Character`. \r\n\r\n    &quot;d&quot;.codePointAt( 0 ) == 100  // true.\r\n\r\n# Details\r\n\r\nThe [Answer by Alex Shesterov][1] is correct. But bigger picture, you should not be using `Character` objects.\r\n\r\n## `Character` is broken\r\n\r\nThe `Character` class is a wrapper class for the primitive type `char`. The `char`/`Character` type is legacy as of Java 2, and is essentially broken. As a 16-bit value, it is physically **incapable of representing most characters**. \r\n\r\nFor example, try running:\r\n\r\n     System.out.println( Character.valueOf( &#39;&#128567;&#39; ) ) ;\r\n\r\n## Code points\r\n\r\nInstead, when working with individual characters, use [code point][2] integer numbers. In Java that means using the `int`/`Integer` type. \r\n\r\nIf you look around classes such as `String`, `StringBuilder`, and `Character` you will find `codePoint` methods.\r\n\r\nLet&#39;s revise your code snippet. We will change the names to be more descriptive. We switch out `Character` and `char` usage for mere `int` primitive integers. As such, we can compare our `int` values using `==` or `!=`. \r\n\r\n```java\r\npackage work.basil.text;\r\n\r\npublic class App7\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        int codePointOf_LATIN_SMALL_LETTER_D = &quot;d&quot;.codePointAt( 0 ); // Annoying zero-based index counting, not ordinal.\r\n        int codePoint2 = getInt();\r\n\r\n        boolean sameCharacter = ( codePointOf_LATIN_SMALL_LETTER_D == codePoint2 );  // Comparing `int` primitives with double-equals. \r\n        System.out.println( sameCharacter );\r\n    }\r\n\r\n    public static int getInt ()\r\n    {\r\n        return 100;  // Code point 100 is LATIN SMALL LETTER D, `d`. \r\n    }\r\n}\r\n```\r\n\r\nWhen run:\r\n\r\n&gt;true\r\n\r\n\r\nOf course, if you use [auto-boxing][3] or otherwise mix the wrapper class `Integer` with the primitive `int`, then the same explanation in [that other Answer][1] applies here too. \r\n\r\n - Compare `Integer` object to `Integer` object by calling [`Integer#equals`][4] or [`Objects.equals( Object a , Object b )`][5] rather than using `==`. \r\n - Compare `int` primitive to `int` primitive using `==` or calling [`Integer.compare( int x , int y )`][6]. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/69499616/642706\r\n  [2]: https://en.wikipedia.org/wiki/Code_point\r\n  [3]: https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html#equals(java.lang.Object)\r\n  [5]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Objects.html#equals(java.lang.Object,java.lang.Object)\r\n  [6]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html#compare(int,int)","title":"Is it safe to use !=/== with Character?","body":"<h1>tl;dr</h1>\n<p>Use code points, not <code>char</code>/<code>Character</code>.</p>\n<pre><code>&quot;d&quot;.codePointAt( 0 ) == 100  // true.\n</code></pre>\n<h1>Details</h1>\n<p>The <a href=\"https://stackoverflow.com/a/69499616/642706\">Answer by Alex Shesterov</a> is correct. But bigger picture, you should not be using <code>Character</code> objects.</p>\n<h2><code>Character</code> is broken</h2>\n<p>The <code>Character</code> class is a wrapper class for the primitive type <code>char</code>. The <code>char</code>/<code>Character</code> type is legacy as of Java 2, and is essentially broken. As a 16-bit value, it is physically <strong>incapable of representing most characters</strong>.</p>\n<p>For example, try running:</p>\n<pre><code> System.out.println( Character.valueOf( '😷' ) ) ;\n</code></pre>\n<h2>Code points</h2>\n<p>Instead, when working with individual characters, use <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integer numbers. In Java that means using the <code>int</code>/<code>Integer</code> type.</p>\n<p>If you look around classes such as <code>String</code>, <code>StringBuilder</code>, and <code>Character</code> you will find <code>codePoint</code> methods.</p>\n<p>Let's revise your code snippet. We will change the names to be more descriptive. We switch out <code>Character</code> and <code>char</code> usage for mere <code>int</code> primitive integers. As such, we can compare our <code>int</code> values using <code>==</code> or <code>!=</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.text;\n\npublic class App7\n{\n    public static void main ( String[] args )\n    {\n        int codePointOf_LATIN_SMALL_LETTER_D = &quot;d&quot;.codePointAt( 0 ); // Annoying zero-based index counting, not ordinal.\n        int codePoint2 = getInt();\n\n        boolean sameCharacter = ( codePointOf_LATIN_SMALL_LETTER_D == codePoint2 );  // Comparing `int` primitives with double-equals. \n        System.out.println( sameCharacter );\n    }\n\n    public static int getInt ()\n    {\n        return 100;  // Code point 100 is LATIN SMALL LETTER D, `d`. \n    }\n}\n</code></pre>\n<p>When run:</p>\n<blockquote>\n<p>true</p>\n</blockquote>\n<p>Of course, if you use <a href=\"https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html\" rel=\"nofollow noreferrer\">auto-boxing</a> or otherwise mix the wrapper class <code>Integer</code> with the primitive <code>int</code>, then the same explanation in <a href=\"https://stackoverflow.com/a/69499616/642706\">that other Answer</a> applies here too.</p>\n<ul>\n<li>Compare <code>Integer</code> object to <code>Integer</code> object by calling <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\"><code>Integer#equals</code></a> or <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Objects.html#equals(java.lang.Object,java.lang.Object)\" rel=\"nofollow noreferrer\"><code>Objects.equals( Object a , Object b )</code></a> rather than using <code>==</code>.</li>\n<li>Compare <code>int</code> primitive to <code>int</code> primitive using <code>==</code> or calling <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html#compare(int,int)\" rel=\"nofollow noreferrer\"><code>Integer.compare( int x , int y )</code></a>.</li>\n</ul>\n"}],"owner":{"account_id":4742401,"reputation":864,"user_id":7858768,"display_name":"user7858768"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":540,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":69499616,"answer_count":2,"score":11,"last_activity_date":1633726824,"creation_date":1633713315,"question_id":69499549,"body_markdown":"Is it safe to use `==/!=` while comparing `Character`?\r\n\r\nCharacter being a boxed type is it safe to use `==/!=` while comparing Character types?\r\n\r\n```\r\n  public static void main(String[] args) {\r\n\r\n        Character c1 = &#39;d&#39;;\r\n        Character c2 = (char) getInt();\r\n\r\n        System.out.println(c1 == c2);\r\n    }\r\n\r\n    public static int getInt() {\r\n\r\n        return 100;\r\n    }\r\n\r\n```\r\n\r\nThe following works as expected (true). However, are there cases where comparing Character with same value using `==` would lead to false? (Hence, do we have to use &#39;.equals()&#39; while comparing boxed primitive types?\r\n","title":"Is it safe to use !=/== with Character?","body":"<p>Is it safe to use <code>==/!=</code> while comparing <code>Character</code>?</p>\n<p>Character being a boxed type is it safe to use <code>==/!=</code> while comparing Character types?</p>\n<pre><code>  public static void main(String[] args) {\n\n        Character c1 = 'd';\n        Character c2 = (char) getInt();\n\n        System.out.println(c1 == c2);\n    }\n\n    public static int getInt() {\n\n        return 100;\n    }\n\n</code></pre>\n<p>The following works as expected (true). However, are there cases where comparing Character with same value using <code>==</code> would lead to false? (Hence, do we have to use '.equals()' while comparing boxed primitive types?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":7529235,"reputation":1142,"user_id":5718106,"display_name":"Sibin Muhammed"},"score":0,"creation_date":1633726194,"post_id":69501353,"comment_id":122846000,"body_markdown":"Attach the code of your registration page. &quot;Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Error during execution of processor &#39;org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor&#39; (template: &quot;registration&quot; - line 49, col 57) &quot;","body":"Attach the code of your registration page. &quot;Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Error during execution of processor &#39;org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagP&zwnj;&#8203;rocessor&#39; (template: &quot;registration&quot; - line 49, col 57) &quot;"},{"owner":{"account_id":21030243,"reputation":75,"user_id":15454800,"display_name":"Hesham Eldawy"},"score":0,"creation_date":1633726744,"post_id":69501353,"comment_id":122846138,"body_markdown":"i just added it","body":"i just added it"},{"owner":{"account_id":7529235,"reputation":1142,"user_id":5718106,"display_name":"Sibin Muhammed"},"score":0,"creation_date":1633727128,"post_id":69501353,"comment_id":122846237,"body_markdown":"See, User  have multiple Roles. As per your code: private Collection&lt;Roles&gt; role; So Change your code accordingly.   &lt;div class=&quot;form-group&quot;&gt;\n                &lt;input  id=&quot;roles&quot; class=&quot;form-control&quot; th:field=&quot;*{roles}&quot; required autofocus=&quot;autofocus&quot; /&gt; This line of code is the root cause of your issue.","body":"See, User  have multiple Roles. As per your code: private Collection&lt;Roles&gt; role; So Change your code accordingly.   &lt;div class=&quot;form-group&quot;&gt;                 &lt;input  id=&quot;roles&quot; class=&quot;form-control&quot; th:field=&quot;*{roles}&quot; required autofocus=&quot;autofocus&quot; /&gt; This line of code is the root cause of your issue."},{"owner":{"account_id":7529235,"reputation":1142,"user_id":5718106,"display_name":"Sibin Muhammed"},"score":0,"creation_date":1633727321,"post_id":69501353,"comment_id":122846306,"body_markdown":"From registration page you must send list of Roles.","body":"From registration page you must send list of Roles."},{"owner":{"account_id":21030243,"reputation":75,"user_id":15454800,"display_name":"Hesham Eldawy"},"score":0,"creation_date":1633727429,"post_id":69501353,"comment_id":122846336,"body_markdown":"yes thanks so much, it runs up but without the inputting the roles tags. so in your opinion how can i make the admin choose the new user role","body":"yes thanks so much, it runs up but without the inputting the roles tags. so in your opinion how can i make the admin choose the new user role"},{"owner":{"account_id":21030243,"reputation":75,"user_id":15454800,"display_name":"Hesham Eldawy"},"score":0,"creation_date":1633727470,"post_id":69501353,"comment_id":122846344,"body_markdown":"should i do it as select tags","body":"should i do it as select tags"},{"owner":{"account_id":7529235,"reputation":1142,"user_id":5718106,"display_name":"Sibin Muhammed"},"score":0,"creation_date":1633728056,"post_id":69501353,"comment_id":122846471,"body_markdown":"https://stackoverflow.com/questions/59634700/how-to-save-a-role-from-thymeleaf-using-in-spring-boot","body":"<a href=\"https://stackoverflow.com/questions/59634700/how-to-save-a-role-from-thymeleaf-using-in-spring-boot\" title=\"how to save a role from thymeleaf using in spring boot\">stackoverflow.com/questions/59634700/&hellip;</a>"}],"owner":{"account_id":21030243,"reputation":75,"user_id":15454800,"display_name":"Hesham Eldawy"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1633726713,"creation_date":1633724579,"question_id":69501353,"body_markdown":"\r\nWhat i am trying to do is, when i click on create a user from the login page, it should direct me to the registration form, but it doesn&#39;t and i don&#39;t see any mistakes. can you please help me?\r\n\r\ninside my code:\r\n\r\nso I have passed the /registration path in the spring security configure class so I can access this request.\r\n\r\nin the UserRegistrationController,\r\n\r\nIn the Get request, I create the modelAttribute name is &quot;user&quot; and its value is creating an object from UserRegistrationDto and this method showcreateUserForm will return the registration.html\r\n\r\nand then in the post request, i passed registrationDto object parameter , and then in the implementation i did &gt;&gt; userService.save(registrationDto);\r\n\r\nnote :\r\n\r\ni tried to see the request without the tag and the page opened so the problem is with the form tags.\r\n\r\n\r\nthe problem is in the Save function in the UserServiceImp, especially the passing role parameter.\r\n\r\nMy Users class Entity:\r\n\r\n    @Entity\r\n    @Table(name = &quot;users&quot; ,uniqueConstraints = @UniqueConstraint(columnNames = &quot;userName&quot;))\r\n    public class Users {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n    private String userName;\r\n    private String password;\r\n\r\n\r\n\r\n    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n    @JoinTable(\r\n            name = &quot;users_roles&quot;,\r\n            joinColumns = @JoinColumn(\r\n                    name = &quot;user_id&quot;,referencedColumnName =&quot;id&quot;),\r\n            inverseJoinColumns = @JoinColumn(\r\n                    name =&quot;role_id&quot; ,referencedColumnName =&quot;id&quot;\r\n            )\r\n\r\n    )\r\n    private Collection&lt;Roles&gt; roles;\r\n\r\n\r\n    public Users(String userName, String password, Collection&lt;Roles&gt; roles) {\r\n        this.userName = userName;\r\n        this.password = password;\r\n        this.roles = roles;\r\n    }\r\n\r\n    public Users()\r\n    {\r\n        super();\r\n    }\r\n\r\n    public long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getUserName() {\r\n        return userName;\r\n    }\r\n\r\n    public void setUserName(String userName) {\r\n        this.userName = userName;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n    public Collection&lt;Roles&gt; getRoles() {\r\n        return roles;\r\n    }\r\n\r\n    public void setRoles(Collection&lt;Roles&gt; roles) {\r\n        this.roles = roles;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Users{&quot; +\r\n                &quot;id=&quot; + id +\r\n                &quot;, userName=&#39;&quot; + userName + &#39;\\&#39;&#39; +\r\n                &quot;, password=&#39;&quot; + password + &#39;\\&#39;&#39; +\r\n                &quot;, roles=&quot; + roles +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n\r\nUserRegistrationDto class: which this class i will use it as a modelAttribute\r\n\r\n\r\n    public class UserRegistrationDto {\r\n    \r\n        private String userName;\r\n        private String password;\r\n        private Collection&lt;Roles&gt; role;\r\n    \r\n        public UserRegistrationDto(String userName, String password, Collection&lt;Roles&gt; role) {\r\n            this.userName = userName;\r\n            this.password = password;\r\n            this.role = role;\r\n        }\r\n    \r\n        public UserRegistrationDto()\r\n        {\r\n            super();\r\n        }\r\n    \r\n        public String getUserName() {\r\n            return userName;\r\n        }\r\n    \r\n        public void setUserName(String userName) {\r\n            this.userName = userName;\r\n        }\r\n    \r\n        public String getPassword() {\r\n            return password;\r\n        }\r\n    \r\n        public void setPassword(String password) {\r\n            this.password = password;\r\n        }\r\n    \r\n        public Collection&lt;Roles&gt; getRole() {\r\n            return role;\r\n        }\r\n    \r\n        public void setRole(Collection&lt;Roles&gt; role) {\r\n            this.role = role;\r\n        }\r\n    }\r\n\r\nmy service layer:\r\n\r\n    @Service\r\npublic class UserServiceImp implements UserService {\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    public UserServiceImp(UserRepository userRepository) {\r\n        this.userRepository = userRepository;\r\n    }\r\n\r\n    @Autowired\r\n    private BCryptPasswordEncoder passwordEncoder;\r\n\r\n    @Override\r\n    public Users findByUsername(String username) {\r\n        return userRepository.findByUserName(username);\r\n    }\r\n\r\n    //save a user from the userRegistration form that been shown in the class model\r\n    public Users save(UserRegistrationDto registrationDto)\r\n    {\r\n        Users user = new Users(registrationDto.getUserName(),passwordEncoder.encode(registrationDto.getPassword()),Arrays.asList(new Roles(&quot;ROLE_USER&quot;)));\r\n\r\n        return userRepository.save(user);\r\n    }\r\n\r\n    @Override\r\n    public List&lt;Users&gt; getAlluser() {\r\n        return userRepository.findAll();\r\n    }\r\n\r\n    @Override\r\n    public Users getUserById(long id) {\r\n        return userRepository.findById(id).get();\r\n    }\r\n\r\n    @Override\r\n    public void deleteUser(Long id) {\r\n        userRepository.deleteById(id);\r\n    }\r\n\r\n    @Override\r\n    public Users updateUser(Users users) {\r\n        return userRepository.save(users);\r\n    }\r\n\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        Users user = userRepository.findByUserName(username);\r\n        if (user == null) {\r\n            throw new UsernameNotFoundException(&quot;Invalid username or password.&quot;);\r\n        }\r\n        return new org.springframework.security.core.userdetails.User(user.getUserName(),\r\n                user.getPassword(),\r\n                mapRolesToAuthorities(user.getRoles()));\r\n    }\r\n\r\n    //this method will map the roles\r\n\r\n    //we converting roles to authorities\r\n    private Collection &lt;? extends GrantedAuthority&gt; mapRolesToAuthorities(Collection&lt;Roles&gt; roles) {\r\n        return roles.stream()\r\n                .map(role -&gt; new SimpleGrantedAuthority(role.getName()))\r\n                .collect(Collectors.toList());\r\n    }\r\n}\r\n\r\nmy controller layer:\r\n\r\n    @Controller\r\npublic class UserRegistrationController {\r\n\r\n    @Autowired\r\n    private UserService userService;\r\n    \r\n    //Constructor\r\n    public UserRegistrationController(UserService userService) {\r\n        this.userService = userService;\r\n    }\r\n\r\n    @RequestMapping(value = &quot;/registration&quot;,method = RequestMethod.POST)\r\n    public String registerUserAccount(@ModelAttribute(&quot;user&quot;) UserRegistrationDto registrationDto) {\r\n        userService.save(registrationDto);\r\n        return &quot;redirect:/showInventory?success&quot;;\r\n    }\r\n    }\r\nthe registration.html page :\r\n\r\n                &lt;form th:action=&quot;@{/registration}&quot; method=&quot;post&quot; th:object=&quot;${user}&quot;&gt;\r\n\r\n                &lt;div class=&quot;form-group&quot;&gt;\r\n                    &lt;label class=&quot;control-label&quot; for=&quot;userName&quot;&gt; Username &lt;/label&gt;\r\n                    &lt;input id=&quot;userName&quot; class=&quot;form-control&quot; th:field=&quot;*{userName}&quot; required autofocus=&quot;autofocus&quot; /&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;div class=&quot;form-group&quot;&gt;\r\n                    &lt;label class=&quot;control-label&quot; for=&quot;roles&quot;&gt; Role &lt;/label&gt; &lt;input\r\n                        id=&quot;roles&quot; class=&quot;form-control&quot; th:field=&quot;*{roles}&quot; required autofocus=&quot;autofocus&quot; /&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;div class=&quot;form-group&quot;&gt;\r\n                    &lt;label class=&quot;control-label&quot; for=&quot;password&quot;&gt; Password  &lt;/label&gt; &lt;input\r\n                        id=&quot;password&quot; class=&quot;form-control&quot; th:field=&quot;*{password}&quot; required autofocus=&quot;autofocus&quot; /&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;div class=&quot;form-group&quot;&gt;\r\n                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-success&quot;&gt;Add User&lt;/button&gt;\r\n                &lt;/div&gt;\r\n            &lt;/form&gt;\r\n\r\n\r\n\r\nfull stacktrace\r\n\r\n        org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: &quot;class path resource [templates/registration.html]&quot;)\r\n    \tat org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1400) ~[spring-webmvc-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1145) ~[spring-webmvc-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1084) ~[spring-webmvc-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.10.jar:5.3.10]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.53.jar:4.0.FR]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.10.jar:5.3.10]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.53.jar:4.0.FR]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.53.jar:9.0.53]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358) ~[spring-web-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271) ~[spring-web-5.3.10.jar:5.3.10]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.10.jar:5.3.10]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.10.jar:5.3.10]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.10.jar:5.3.10]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]\r\n    Caused by: org.attoparser.ParseException: Error during execution of processor &#39;org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor&#39; (template: &quot;registration&quot; - line 49, col 57)\r\n    \tat org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393) ~[attoparser-2.0.5.RELEASE.jar:2.0.5.RELEASE]\r\n    \tat org.attoparser.MarkupParser.parse(MarkupParser.java:257) ~[attoparser-2.0.5.RELEASE.jar:2.0.5.RELEASE]\r\n    \tat org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \t... 89 common frames omitted\r\n    Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Error during execution of processor &#39;org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor&#39; (template: &quot;registration&quot; - line 49, col 57)\r\n    \tat org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:117) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.engine.ProcessorTemplateHandler.handleStandaloneElement(ProcessorTemplateHandler.java:918) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleStandaloneElementEnd(TemplateHandlerAdapterMarkupHandler.java:260) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleStandaloneElementEnd(InlinedOutputExpressionMarkupHandler.java:256) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleStandaloneElementEnd(OutputExpressionInlinePreProcessorHandler.java:169) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleStandaloneElementEnd(InlinedOutputExpressionMarkupHandler.java:104) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.attoparser.HtmlElement.handleStandaloneElementEnd(HtmlElement.java:79) ~[attoparser-2.0.5.RELEASE.jar:2.0.5.RELEASE]\r\n    \tat org.attoparser.HtmlMarkupHandler.handleStandaloneElementEnd(HtmlMarkupHandler.java:241) ~[attoparser-2.0.5.RELEASE.jar:2.0.5.RELEASE]\r\n    \tat org.attoparser.MarkupEventProcessorHandler.handleStandaloneElementEnd(MarkupEventProcessorHandler.java:327) ~[attoparser-2.0.5.RELEASE.jar:2.0.5.RELEASE]\r\n    \tat org.attoparser.ParsingElementMarkupUtil.parseStandaloneElement(ParsingElementMarkupUtil.java:96) ~[attoparser-2.0.5.RELEASE.jar:2.0.5.RELEASE]\r\n    \tat org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:706) ~[attoparser-2.0.5.RELEASE.jar:2.0.5.RELEASE]\r\n    \tat org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301) ~[attoparser-2.0.5.RELEASE.jar:2.0.5.RELEASE]\r\n    \t... 91 common frames omitted\r\n    Caused by: org.springframework.beans.NotReadablePropertyException: Invalid property &#39;roles&#39; of bean class [com.example.warehouseManagementSystem.Model.UserRegistrationDto]: Bean property &#39;roles&#39; is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?\r\n    \tat org.springframework.beans.AbstractNestablePropertyAccessor.getPropertyValue(AbstractNestablePropertyAccessor.java:627) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.beans.AbstractNestablePropertyAccessor.getPropertyValue(AbstractNestablePropertyAccessor.java:617) ~[spring-beans-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.validation.AbstractPropertyBindingResult.getActualFieldValue(AbstractPropertyBindingResult.java:104) ~[spring-context-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.validation.AbstractBindingResult.getFieldValue(AbstractBindingResult.java:228) ~[spring-context-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:129) ~[spring-webmvc-5.3.10.jar:5.3.10]\r\n    \tat org.springframework.web.servlet.support.RequestContext.getBindStatus(RequestContext.java:903) ~[spring-webmvc-5.3.10.jar:5.3.10]\r\n    \tat org.thymeleaf.spring5.context.webmvc.SpringWebMvcThymeleafRequestContext.getBindStatus(SpringWebMvcThymeleafRequestContext.java:227) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.spring5.util.FieldUtils.getBindStatusFromParsedExpression(FieldUtils.java:306) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:253) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:227) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.spring5.processor.AbstractSpringFieldTagProcessor.doProcess(AbstractSpringFieldTagProcessor.java:174) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \t... 104 common frames omitted\r\n    \r\n    2021-10-08 16:09:44.431 ERROR 27772 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: &quot;class path resource [templates/registration.html]&quot;)] with root cause\r\n\r\n\r\n","title":"I am trying to reach registration page but i am receiving 500 error. the error is about the service layer class epically the save method","body":"<p>What i am trying to do is, when i click on create a user from the login page, it should direct me to the registration form, but it doesn't and i don't see any mistakes. can you please help me?</p>\n<p>inside my code:</p>\n<p>so I have passed the /registration path in the spring security configure class so I can access this request.</p>\n<p>in the UserRegistrationController,</p>\n<p>In the Get request, I create the modelAttribute name is &quot;user&quot; and its value is creating an object from UserRegistrationDto and this method showcreateUserForm will return the registration.html</p>\n<p>and then in the post request, i passed registrationDto object parameter , and then in the implementation i did &gt;&gt; userService.save(registrationDto);</p>\n<p>note :</p>\n<p>i tried to see the request without the tag and the page opened so the problem is with the form tags.</p>\n<p>the problem is in the Save function in the UserServiceImp, especially the passing role parameter.</p>\n<p>My Users class Entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;users&quot; ,uniqueConstraints = @UniqueConstraint(columnNames = &quot;userName&quot;))\npublic class Users {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate long id;\nprivate String userName;\nprivate String password;\n\n\n\n@ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n@JoinTable(\n        name = &quot;users_roles&quot;,\n        joinColumns = @JoinColumn(\n                name = &quot;user_id&quot;,referencedColumnName =&quot;id&quot;),\n        inverseJoinColumns = @JoinColumn(\n                name =&quot;role_id&quot; ,referencedColumnName =&quot;id&quot;\n        )\n\n)\nprivate Collection&lt;Roles&gt; roles;\n\n\npublic Users(String userName, String password, Collection&lt;Roles&gt; roles) {\n    this.userName = userName;\n    this.password = password;\n    this.roles = roles;\n}\n\npublic Users()\n{\n    super();\n}\n\npublic long getId() {\n    return id;\n}\n\npublic void setId(long id) {\n    this.id = id;\n}\n\npublic String getUserName() {\n    return userName;\n}\n\npublic void setUserName(String userName) {\n    this.userName = userName;\n}\n\npublic String getPassword() {\n    return password;\n}\n\npublic void setPassword(String password) {\n    this.password = password;\n}\n\npublic Collection&lt;Roles&gt; getRoles() {\n    return roles;\n}\n\npublic void setRoles(Collection&lt;Roles&gt; roles) {\n    this.roles = roles;\n}\n\n@Override\npublic String toString() {\n    return &quot;Users{&quot; +\n            &quot;id=&quot; + id +\n            &quot;, userName='&quot; + userName + '\\'' +\n            &quot;, password='&quot; + password + '\\'' +\n            &quot;, roles=&quot; + roles +\n            '}';\n}\n</code></pre>\n<p>}</p>\n<p>UserRegistrationDto class: which this class i will use it as a modelAttribute</p>\n<pre><code>public class UserRegistrationDto {\n\n    private String userName;\n    private String password;\n    private Collection&lt;Roles&gt; role;\n\n    public UserRegistrationDto(String userName, String password, Collection&lt;Roles&gt; role) {\n        this.userName = userName;\n        this.password = password;\n        this.role = role;\n    }\n\n    public UserRegistrationDto()\n    {\n        super();\n    }\n\n    public String getUserName() {\n        return userName;\n    }\n\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public Collection&lt;Roles&gt; getRole() {\n        return role;\n    }\n\n    public void setRole(Collection&lt;Roles&gt; role) {\n        this.role = role;\n    }\n}\n</code></pre>\n<p>my service layer:</p>\n<pre><code>@Service\n</code></pre>\n<p>public class UserServiceImp implements UserService {</p>\n<pre><code>@Autowired\nprivate UserRepository userRepository;\n\npublic UserServiceImp(UserRepository userRepository) {\n    this.userRepository = userRepository;\n}\n\n@Autowired\nprivate BCryptPasswordEncoder passwordEncoder;\n\n@Override\npublic Users findByUsername(String username) {\n    return userRepository.findByUserName(username);\n}\n\n//save a user from the userRegistration form that been shown in the class model\npublic Users save(UserRegistrationDto registrationDto)\n{\n    Users user = new Users(registrationDto.getUserName(),passwordEncoder.encode(registrationDto.getPassword()),Arrays.asList(new Roles(&quot;ROLE_USER&quot;)));\n\n    return userRepository.save(user);\n}\n\n@Override\npublic List&lt;Users&gt; getAlluser() {\n    return userRepository.findAll();\n}\n\n@Override\npublic Users getUserById(long id) {\n    return userRepository.findById(id).get();\n}\n\n@Override\npublic void deleteUser(Long id) {\n    userRepository.deleteById(id);\n}\n\n@Override\npublic Users updateUser(Users users) {\n    return userRepository.save(users);\n}\n\npublic UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n    Users user = userRepository.findByUserName(username);\n    if (user == null) {\n        throw new UsernameNotFoundException(&quot;Invalid username or password.&quot;);\n    }\n    return new org.springframework.security.core.userdetails.User(user.getUserName(),\n            user.getPassword(),\n            mapRolesToAuthorities(user.getRoles()));\n}\n\n//this method will map the roles\n\n//we converting roles to authorities\nprivate Collection &lt;? extends GrantedAuthority&gt; mapRolesToAuthorities(Collection&lt;Roles&gt; roles) {\n    return roles.stream()\n            .map(role -&gt; new SimpleGrantedAuthority(role.getName()))\n            .collect(Collectors.toList());\n}\n</code></pre>\n<p>}</p>\n<p>my controller layer:</p>\n<pre><code>@Controller\n</code></pre>\n<p>public class UserRegistrationController {</p>\n<pre><code>@Autowired\nprivate UserService userService;\n\n//Constructor\npublic UserRegistrationController(UserService userService) {\n    this.userService = userService;\n}\n\n@RequestMapping(value = &quot;/registration&quot;,method = RequestMethod.POST)\npublic String registerUserAccount(@ModelAttribute(&quot;user&quot;) UserRegistrationDto registrationDto) {\n    userService.save(registrationDto);\n    return &quot;redirect:/showInventory?success&quot;;\n}\n}\n</code></pre>\n<p>the registration.html page :</p>\n<pre><code>            &lt;form th:action=&quot;@{/registration}&quot; method=&quot;post&quot; th:object=&quot;${user}&quot;&gt;\n\n            &lt;div class=&quot;form-group&quot;&gt;\n                &lt;label class=&quot;control-label&quot; for=&quot;userName&quot;&gt; Username &lt;/label&gt;\n                &lt;input id=&quot;userName&quot; class=&quot;form-control&quot; th:field=&quot;*{userName}&quot; required autofocus=&quot;autofocus&quot; /&gt;\n            &lt;/div&gt;\n\n            &lt;div class=&quot;form-group&quot;&gt;\n                &lt;label class=&quot;control-label&quot; for=&quot;roles&quot;&gt; Role &lt;/label&gt; &lt;input\n                    id=&quot;roles&quot; class=&quot;form-control&quot; th:field=&quot;*{roles}&quot; required autofocus=&quot;autofocus&quot; /&gt;\n            &lt;/div&gt;\n\n            &lt;div class=&quot;form-group&quot;&gt;\n                &lt;label class=&quot;control-label&quot; for=&quot;password&quot;&gt; Password  &lt;/label&gt; &lt;input\n                    id=&quot;password&quot; class=&quot;form-control&quot; th:field=&quot;*{password}&quot; required autofocus=&quot;autofocus&quot; /&gt;\n            &lt;/div&gt;\n\n            &lt;div class=&quot;form-group&quot;&gt;\n                &lt;button type=&quot;submit&quot; class=&quot;btn btn-success&quot;&gt;Add User&lt;/button&gt;\n            &lt;/div&gt;\n        &lt;/form&gt;\n</code></pre>\n<p>full stacktrace</p>\n<pre><code>    org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: &quot;class path resource [templates/registration.html]&quot;)\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1400) ~[spring-webmvc-5.3.10.jar:5.3.10]\n    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1145) ~[spring-webmvc-5.3.10.jar:5.3.10]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1084) ~[spring-webmvc-5.3.10.jar:5.3.10]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.10.jar:5.3.10]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.10.jar:5.3.10]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.10.jar:5.3.10]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.53.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.10.jar:5.3.10]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.53.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.53.jar:9.0.53]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.10.jar:5.3.10]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.10.jar:5.3.10]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.10.jar:5.3.10]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358) ~[spring-web-5.3.10.jar:5.3.10]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271) ~[spring-web-5.3.10.jar:5.3.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.10.jar:5.3.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.10.jar:5.3.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.10.jar:5.3.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.10.jar:5.3.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.10.jar:5.3.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.10.jar:5.3.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.53.jar:9.0.53]\n    at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]\nCaused by: org.attoparser.ParseException: Error during execution of processor 'org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor' (template: &quot;registration&quot; - line 49, col 57)\n    at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393) ~[attoparser-2.0.5.RELEASE.jar:2.0.5.RELEASE]\n    at org.attoparser.MarkupParser.parse(MarkupParser.java:257) ~[attoparser-2.0.5.RELEASE.jar:2.0.5.RELEASE]\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    ... 89 common frames omitted\nCaused by: org.thymeleaf.exceptions.TemplateProcessingException: Error during execution of processor 'org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor' (template: &quot;registration&quot; - line 49, col 57)\n    at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:117) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.engine.ProcessorTemplateHandler.handleStandaloneElement(ProcessorTemplateHandler.java:918) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleStandaloneElementEnd(TemplateHandlerAdapterMarkupHandler.java:260) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleStandaloneElementEnd(InlinedOutputExpressionMarkupHandler.java:256) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleStandaloneElementEnd(OutputExpressionInlinePreProcessorHandler.java:169) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleStandaloneElementEnd(InlinedOutputExpressionMarkupHandler.java:104) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.attoparser.HtmlElement.handleStandaloneElementEnd(HtmlElement.java:79) ~[attoparser-2.0.5.RELEASE.jar:2.0.5.RELEASE]\n    at org.attoparser.HtmlMarkupHandler.handleStandaloneElementEnd(HtmlMarkupHandler.java:241) ~[attoparser-2.0.5.RELEASE.jar:2.0.5.RELEASE]\n    at org.attoparser.MarkupEventProcessorHandler.handleStandaloneElementEnd(MarkupEventProcessorHandler.java:327) ~[attoparser-2.0.5.RELEASE.jar:2.0.5.RELEASE]\n    at org.attoparser.ParsingElementMarkupUtil.parseStandaloneElement(ParsingElementMarkupUtil.java:96) ~[attoparser-2.0.5.RELEASE.jar:2.0.5.RELEASE]\n    at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:706) ~[attoparser-2.0.5.RELEASE.jar:2.0.5.RELEASE]\n    at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301) ~[attoparser-2.0.5.RELEASE.jar:2.0.5.RELEASE]\n    ... 91 common frames omitted\nCaused by: org.springframework.beans.NotReadablePropertyException: Invalid property 'roles' of bean class [com.example.warehouseManagementSystem.Model.UserRegistrationDto]: Bean property 'roles' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?\n    at org.springframework.beans.AbstractNestablePropertyAccessor.getPropertyValue(AbstractNestablePropertyAccessor.java:627) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.beans.AbstractNestablePropertyAccessor.getPropertyValue(AbstractNestablePropertyAccessor.java:617) ~[spring-beans-5.3.10.jar:5.3.10]\n    at org.springframework.validation.AbstractPropertyBindingResult.getActualFieldValue(AbstractPropertyBindingResult.java:104) ~[spring-context-5.3.10.jar:5.3.10]\n    at org.springframework.validation.AbstractBindingResult.getFieldValue(AbstractBindingResult.java:228) ~[spring-context-5.3.10.jar:5.3.10]\n    at org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:129) ~[spring-webmvc-5.3.10.jar:5.3.10]\n    at org.springframework.web.servlet.support.RequestContext.getBindStatus(RequestContext.java:903) ~[spring-webmvc-5.3.10.jar:5.3.10]\n    at org.thymeleaf.spring5.context.webmvc.SpringWebMvcThymeleafRequestContext.getBindStatus(SpringWebMvcThymeleafRequestContext.java:227) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.spring5.util.FieldUtils.getBindStatusFromParsedExpression(FieldUtils.java:306) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:253) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:227) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.spring5.processor.AbstractSpringFieldTagProcessor.doProcess(AbstractSpringFieldTagProcessor.java:174) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    ... 104 common frames omitted\n\n2021-10-08 16:09:44.431 ERROR 27772 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: &quot;class path resource [templates/registration.html]&quot;)] with root cause\n</code></pre>\n"},{"tags":["java","oop"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1633722214,"post_id":69500937,"comment_id":122844834,"body_markdown":"So you want to call `Point p; p.multiply(p.x, 1)` and have it modify `p.x` and also `p.multiply(p.y, 1);` and have it modify `p.y`?","body":"So you want to call <code>Point p; p.multiply(p.x, 1)</code> and have it modify <code>p.x</code> and also <code>p.multiply(p.y, 1);</code> and have it modify <code>p.y</code>?"},{"owner":{"account_id":7230356,"reputation":1512,"user_id":5517465,"accept_rate":100,"display_name":"Yassir Khaldi"},"score":0,"creation_date":1633723002,"post_id":69500937,"comment_id":122845047,"body_markdown":"Please elaborate your program requirements in a clearer and simpler way.","body":"Please elaborate your program requirements in a clearer and simpler way."},{"owner":{"account_id":22982446,"reputation":35,"user_id":17109144,"display_name":"Phil_Software"},"score":0,"creation_date":1633776374,"post_id":69500937,"comment_id":122853840,"body_markdown":"@YassirKhaldi The original problem is trying to animate a Vertex. My `Vertex` class has a .x and .y component, and I would like my animation function to take parameters: `(Vector.x_or_y, Animation)`, being `Animation` another class with the animation info. I can solve this problem in many ways, the question is, can I somehow enter `Vertex.whatever_int_parameter` as the function argument and let the function also manipulate it?","body":"@YassirKhaldi The original problem is trying to animate a Vertex. My <code>Vertex</code> class has a .x and .y component, and I would like my animation function to take parameters: <code>(Vector.x_or_y, Animation)</code>, being <code>Animation</code> another class with the animation info. I can solve this problem in many ways, the question is, can I somehow enter <code>Vertex.whatever_int_parameter</code> as the function argument and let the function also manipulate it?"}],"answers":[{"tags":[],"owner":{"account_id":1636,"reputation":20746,"user_id":2197,"accept_rate":76,"display_name":"David Koelle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633725921,"creation_date":1633725921,"answer_id":69501540,"question_id":69500937,"body_markdown":"You would just refer to x and y in your function:\r\n\r\n    void multiply(int factor) { \r\n        this.x *= factor; \r\n        this.y *= factor; \r\n    }\r\n\r\nIf you want methods that specifically factor certain fields, I&#39;d recommend method calls that make this clear:\r\n\r\n    void multiplyX(int factor) { \r\n        this.x *= factor; \r\n    }\r\n\r\nIf you want to factor only one particular variable that you want to specify when you call the function, that&#39;s probably not something you actually want to do. You *could* do it with a lambda, and if you want me to edit this question to explain that, just leave a comment; but that seems like a lot more trouble than it&#39;s worth from a API and maintenance perspective.\r\n","title":"Using object property as function parameter","body":"<p>You would just refer to x and y in your function:</p>\n<pre><code>void multiply(int factor) { \n    this.x *= factor; \n    this.y *= factor; \n}\n</code></pre>\n<p>If you want methods that specifically factor certain fields, I'd recommend method calls that make this clear:</p>\n<pre><code>void multiplyX(int factor) { \n    this.x *= factor; \n}\n</code></pre>\n<p>If you want to factor only one particular variable that you want to specify when you call the function, that's probably not something you actually want to do. You <em>could</em> do it with a lambda, and if you want me to edit this question to explain that, just leave a comment; but that seems like a lot more trouble than it's worth from a API and maintenance perspective.</p>\n"},{"tags":[],"owner":{"account_id":11730609,"reputation":36976,"user_id":8586227,"display_name":"Davis Herring"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1633726506,"creation_date":1633726506,"answer_id":69501606,"question_id":69500937,"body_markdown":"Java doesn&#39;t have pointers/references to primitive (non-object) values.  You can emulate them either by defining an **interface** for accessing a value:\r\n\r\n```\r\npublic interface IntAccess {\r\n  void set(int);\r\n  int get();\r\n}\r\n\r\npublic class Point {\r\n  int x,y;\r\n\r\n  IntAccess accessX() {\r\n    return new IntAccess() {\r\n      public void set(int v) {x=v;}\r\n      public int get() {return x;}\r\n    }\r\n  }\r\n  IntAccess accessY() {\r\n    return new IntAccess() {\r\n      public void set(int v) {y=v;}\r\n      public int get() {return y;}\r\n    }\r\n  }\r\n\r\n  public static void multiply(IntAccess i,int f) {i.set(i.get()*f);}\r\n}\r\n\r\nclass Client {\r\n  static void test() {\r\n    Point p=new Point();\r\n    Point.multiply(p.accessX(),3);\r\n    Point.multiply(p.accessY(),4);\r\n  }\r\n}\r\n```\r\n\r\nAlternatively, you can make the fields be **objects**:\r\n```\r\npublic class Multiplyable {\r\n  int v;\r\n  public void multiply(int f) {v*=f;}\r\n}\r\n\r\npublic class Point {\r\n  public Multiplyable x,y;\r\n}\r\n\r\nclass Client {\r\n  static void test() {\r\n    Point p=new Point();\r\n    p.x.multiply(3);\r\n  }\r\n}\r\n```","title":"Using object property as function parameter","body":"<p>Java doesn't have pointers/references to primitive (non-object) values.  You can emulate them either by defining an <strong>interface</strong> for accessing a value:</p>\n<pre><code>public interface IntAccess {\n  void set(int);\n  int get();\n}\n\npublic class Point {\n  int x,y;\n\n  IntAccess accessX() {\n    return new IntAccess() {\n      public void set(int v) {x=v;}\n      public int get() {return x;}\n    }\n  }\n  IntAccess accessY() {\n    return new IntAccess() {\n      public void set(int v) {y=v;}\n      public int get() {return y;}\n    }\n  }\n\n  public static void multiply(IntAccess i,int f) {i.set(i.get()*f);}\n}\n\nclass Client {\n  static void test() {\n    Point p=new Point();\n    Point.multiply(p.accessX(),3);\n    Point.multiply(p.accessY(),4);\n  }\n}\n</code></pre>\n<p>Alternatively, you can make the fields be <strong>objects</strong>:</p>\n<pre><code>public class Multiplyable {\n  int v;\n  public void multiply(int f) {v*=f;}\n}\n\npublic class Point {\n  public Multiplyable x,y;\n}\n\nclass Client {\n  static void test() {\n    Point p=new Point();\n    p.x.multiply(3);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":22982446,"reputation":35,"user_id":17109144,"display_name":"Phil_Software"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1633791611,"accepted_answer_id":69501606,"answer_count":2,"score":0,"last_activity_date":1633726506,"creation_date":1633721631,"question_id":69500937,"body_markdown":"Imagine you have a Point myPoint object with a .x and .y property. How would you write a function void multiply() that used myPoint.x or myPoint.y as an input, and multiplied the value of .x or .y in the object. Keep in mind the problem is being able to input myPoint.x, .y, .z or any property of the object and saving the result in the myPoint.whatever variable. This would be the class:\r\n\r\n    Point{\r\n     int x,y;\r\n\r\n     //Im ignoring the constructor\r\n\r\n     void multiply(int Point.x number, int factor) //Being int Point.x or .y my problem\r\n      number*=factor; //saving the value of number in Point.x\r\n    }\r\n\r\n\r\n","title":"Using object property as function parameter","body":"<p>Imagine you have a Point myPoint object with a .x and .y property. How would you write a function void multiply() that used myPoint.x or myPoint.y as an input, and multiplied the value of .x or .y in the object. Keep in mind the problem is being able to input myPoint.x, .y, .z or any property of the object and saving the result in the myPoint.whatever variable. This would be the class:</p>\n<pre><code>Point{\n int x,y;\n\n //Im ignoring the constructor\n\n void multiply(int Point.x number, int factor) //Being int Point.x or .y my problem\n  number*=factor; //saving the value of number in Point.x\n}\n</code></pre>\n"},{"tags":["java","amazon-s3","file-upload","download","amazon-ecs"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1633671843,"post_id":69490641,"comment_id":122826586,"body_markdown":"Is the 3rd-party service an HTTP server, or if not, what protocol does it use?","body":"Is the 3rd-party service an HTTP server, or if not, what protocol does it use?"},{"owner":{"account_id":10919474,"reputation":319,"user_id":8026274,"accept_rate":80,"display_name":"Mikasa"},"score":0,"creation_date":1633681184,"post_id":69490641,"comment_id":122829486,"body_markdown":"It uses http protocol @TimMoore","body":"It uses http protocol @TimMoore"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1633829674,"post_id":69490641,"comment_id":122864221,"body_markdown":"is there a specific HTTP library you are using, or are you looking for more general advice?","body":"is there a specific HTTP library you are using, or are you looking for more general advice?"}],"owner":{"account_id":10919474,"reputation":319,"user_id":8026274,"accept_rate":80,"display_name":"Mikasa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1633725255,"creation_date":1633668596,"question_id":69490641,"body_markdown":"I have an ECS service where I want to have a logic to download from a link from some 3rd party storage containing large files and I want to upload to S3. I want to download from the link in chunks and upload in chunks so that I don&#39;t go out memory. What are some ways to do this in Java? I tried looking into bunch of docs but I don&#39;t see a clear way do it. \r\n\r\nI want to download a chunk in local and upload that chunk to S3 and then delete it. I want to do this in a loop until I complete downloading it all.\r\n\r\nAny docs or examples that maybe useful for my scenario?","title":"Download from 3rd party repository and upload directly to S3 chunk by chunk","body":"<p>I have an ECS service where I want to have a logic to download from a link from some 3rd party storage containing large files and I want to upload to S3. I want to download from the link in chunks and upload in chunks so that I don't go out memory. What are some ways to do this in Java? I tried looking into bunch of docs but I don't see a clear way do it.</p>\n<p>I want to download a chunk in local and upload that chunk to S3 and then delete it. I want to do this in a loop until I complete downloading it all.</p>\n<p>Any docs or examples that maybe useful for my scenario?</p>\n"},{"tags":["java","oop","hashmap"],"answers":[{"tags":[],"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633723828,"creation_date":1633723828,"answer_id":69501253,"question_id":69501139,"body_markdown":"You could create some key logic to save on map\r\n\r\n```java\r\n\r\npublic class Snake {\r\n    private int head;\r\n    private int tail;\r\n\r\n    // create any key logic\r\n    public String getKey(){\r\n       return head + &quot;-&quot; + tail; // eg. with both but can be any other one\r\n    }\r\n\r\n    public Snake(int head, int tail) {\r\n        super();\r\n        this.head = head;\r\n        this.tail = tail;\r\n    }\r\n}\r\n\r\n```\r\nUse map with key logic\r\n\r\n```java\r\nMap&lt;String,Snake&gt; map = new HashMap&lt;&gt;();\r\nmap.put(snake.getKey(), snake );\r\n```","title":"Make Custom class map with only one attribute as key","body":"<p>You could create some key logic to save on map</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class Snake {\n    private int head;\n    private int tail;\n\n    // create any key logic\n    public String getKey(){\n       return head + &quot;-&quot; + tail; // eg. with both but can be any other one\n    }\n\n    public Snake(int head, int tail) {\n        super();\n        this.head = head;\n        this.tail = tail;\n    }\n}\n\n</code></pre>\n<p>Use map with key logic</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String,Snake&gt; map = new HashMap&lt;&gt;();\nmap.put(snake.getKey(), snake );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1633724082,"creation_date":1633724082,"answer_id":69501288,"question_id":69501139,"body_markdown":"[`HashMap`](https://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html) and [`HashSet`](https://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html) use the Java senses of [`equals`](https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals(java.lang.Object)) and [`hashCode`](https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode()). If you override those methods of `Object` in your `Snake` implementation such that they are based only on the value of `head`, then Snake instances will behave as equivalent Map keys (or Set members) as long as they have the same `head` value.\r\n\r\nNote that this might be confusing behavior: You are telling Java that those objects should be considered equal in all senses regardless of the value of `tail`! This might be a good idea if `tail` is fixed and calculable based on `head` or some other value, but it might be a very bad idea if `tail` can reasonably vary between `Snake` instances that have the same `head`. You might instead choose to use an explicit key as Dilermando Lima suggests in his answer, or if the sense of equality is unique to the particular set or map, you might try a utility like Guava&#39;s [Equivalence](https://guava.dev/releases/snapshot-jre/api/docs/com/google/common/base/Equivalence.html) that allows you to wrap your objects with a custom `equals` and `hashCode`.","title":"Make Custom class map with only one attribute as key","body":"<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html\" rel=\"nofollow noreferrer\"><code>HashMap</code></a> and <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html\" rel=\"nofollow noreferrer\"><code>HashSet</code></a> use the Java senses of <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\"><code>equals</code></a> and <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode()\" rel=\"nofollow noreferrer\"><code>hashCode</code></a>. If you override those methods of <code>Object</code> in your <code>Snake</code> implementation such that they are based only on the value of <code>head</code>, then Snake instances will behave as equivalent Map keys (or Set members) as long as they have the same <code>head</code> value.</p>\n<p>Note that this might be confusing behavior: You are telling Java that those objects should be considered equal in all senses regardless of the value of <code>tail</code>! This might be a good idea if <code>tail</code> is fixed and calculable based on <code>head</code> or some other value, but it might be a very bad idea if <code>tail</code> can reasonably vary between <code>Snake</code> instances that have the same <code>head</code>. You might instead choose to use an explicit key as Dilermando Lima suggests in his answer, or if the sense of equality is unique to the particular set or map, you might try a utility like Guava's <a href=\"https://guava.dev/releases/snapshot-jre/api/docs/com/google/common/base/Equivalence.html\" rel=\"nofollow noreferrer\">Equivalence</a> that allows you to wrap your objects with a custom <code>equals</code> and <code>hashCode</code>.</p>\n"}],"owner":{"account_id":20906134,"reputation":483,"user_id":15358022,"display_name":"Dawson Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69501288,"answer_count":2,"score":0,"last_activity_date":1633724082,"creation_date":1633723062,"question_id":69501139,"body_markdown":"I have a class as follows - \r\n```\r\npublic class Snake {\r\n\tprivate int head;\r\n\tprivate int tail;\r\n\tpublic Snake(int head, int tail) {\r\n\t\tsuper();\r\n\t\tthis.head = head;\r\n\t\tthis.tail = tail;\r\n\t}\r\n}\r\n```\r\nI want to create a map of this class - \r\n```\r\nMap&lt;Snake,Integer&gt; map = new HashMap&lt;&gt;();\r\n```\r\nBut I want the key to be searched only on the basis of the head not both the head and tail. How should I implement this functionality?\r\nI need this so that head, tail pair values where head is the same but tails are different can be avoided.","title":"Make Custom class map with only one attribute as key","body":"<p>I have a class as follows -</p>\n<pre><code>public class Snake {\n    private int head;\n    private int tail;\n    public Snake(int head, int tail) {\n        super();\n        this.head = head;\n        this.tail = tail;\n    }\n}\n</code></pre>\n<p>I want to create a map of this class -</p>\n<pre><code>Map&lt;Snake,Integer&gt; map = new HashMap&lt;&gt;();\n</code></pre>\n<p>But I want the key to be searched only on the basis of the head not both the head and tail. How should I implement this functionality?\nI need this so that head, tail pair values where head is the same but tails are different can be avoided.</p>\n"},{"tags":["java","spring-boot","graphql"],"comments":[{"owner":{"account_id":17434554,"reputation":1302,"user_id":12637839,"display_name":"Mykhailo Skliar"},"score":0,"creation_date":1622243976,"post_id":67746066,"comment_id":119745721,"body_markdown":"Will this solve your issue? https://github.com/donbeave/graphql-java-datetime\nIf not, could you, please, provide the steps to reproduce your issue?\nI was able to start your spring boot application, but was unable to figure out what to do next.","body":"Will this solve your issue? <a href=\"https://github.com/donbeave/graphql-java-datetime\" rel=\"nofollow noreferrer\">github.com/donbeave/graphql-java-datetime</a> If not, could you, please, provide the steps to reproduce your issue? I was able to start your spring boot application, but was unable to figure out what to do next."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1622244083,"post_id":67746066,"comment_id":119745743,"body_markdown":"@MykhailoSkliar I got this result. `&quot;birthday&quot;: null`.  Where is the problem? How can I fix it?  Is it possible to write the answer step by step if you don&#39;t mind?","body":"@MykhailoSkliar I got this result. <code>&quot;birthday&quot;: null</code>.  Where is the problem? How can I fix it?  Is it possible to write the answer step by step if you don&#39;t mind?"},{"owner":{"account_id":7119515,"reputation":6055,"user_id":5444618,"accept_rate":83,"display_name":"Guillaume F."},"score":0,"creation_date":1622245984,"post_id":67746066,"comment_id":119746034,"body_markdown":"Don&#39;t use `Date`, it is old and obsolete; use `LocalDate` instead.","body":"Don&#39;t use <code>Date</code>, it is old and obsolete; use <code>LocalDate</code> instead."}],"answers":[{"tags":[],"owner":{"account_id":17434554,"reputation":1302,"user_id":12637839,"display_name":"Mykhailo Skliar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1622247855,"creation_date":1622246325,"answer_id":67746608,"question_id":67746066,"body_markdown":"Add the following dependency to your pom.xml file:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.zhokhov.graphql&lt;/groupId&gt;\r\n      &lt;artifactId&gt;graphql-datetime-spring-boot-starter&lt;/artifactId&gt;\r\n      &lt;version&gt;4.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIf it doesn&#39;t help, then take a look at this sample application:\r\nhttps://github.com/donbeave/graphql-java-datetime/tree/master/graphql-datetime-sample-app\r\n\r\nTry to write the test, similar to the test in this sample application, and try to experiment with different formattings and types, described in this article: https://github.com/donbeave/graphql-java-datetime \r\n","title":"Error : Can&#39;t serialize value : Expected a &#39;String&#39; or &#39;java.time.temporal.TemporalAccessor&#39; but was &#39;Timestamp&#39;.&quot; in Spring Boot with Graphql","body":"<p>Add the following dependency to your pom.xml file:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.zhokhov.graphql&lt;/groupId&gt;\n  &lt;artifactId&gt;graphql-datetime-spring-boot-starter&lt;/artifactId&gt;\n  &lt;version&gt;4.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>If it doesn't help, then take a look at this sample application:\n<a href=\"https://github.com/donbeave/graphql-java-datetime/tree/master/graphql-datetime-sample-app\" rel=\"nofollow noreferrer\">https://github.com/donbeave/graphql-java-datetime/tree/master/graphql-datetime-sample-app</a></p>\n<p>Try to write the test, similar to the test in this sample application, and try to experiment with different formattings and types, described in this article: <a href=\"https://github.com/donbeave/graphql-java-datetime\" rel=\"nofollow noreferrer\">https://github.com/donbeave/graphql-java-datetime</a></p>\n"},{"tags":[],"owner":{"account_id":2017262,"reputation":1008,"user_id":1804257,"accept_rate":57,"display_name":"jorgevasquezang"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633723863,"creation_date":1633723863,"answer_id":69501259,"question_id":67746066,"body_markdown":"Use `LocalDate` instead of `Date`, the `graphql-java-extended-scalars` library does not support a raw `Date` class but instead the new classes created from Java 8 to handle Dates and Times which all extend from `TemporalAccessor`\r\n\r\nAnyway, you should not use Date unless you are working with legacy code","title":"Error : Can&#39;t serialize value : Expected a &#39;String&#39; or &#39;java.time.temporal.TemporalAccessor&#39; but was &#39;Timestamp&#39;.&quot; in Spring Boot with Graphql","body":"<p>Use <code>LocalDate</code> instead of <code>Date</code>, the <code>graphql-java-extended-scalars</code> library does not support a raw <code>Date</code> class but instead the new classes created from Java 8 to handle Dates and Times which all extend from <code>TemporalAccessor</code></p>\n<p>Anyway, you should not use Date unless you are working with legacy code</p>\n"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3703,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":67746608,"answer_count":2,"score":2,"last_activity_date":1633723863,"creation_date":1622240873,"question_id":67746066,"body_markdown":"I&#39;ve devised an example of the usage of **Graphql** in **Spring Boot**.\r\nI got an error related with the definition of **Date** when I wrote a query in **Graphiql** \r\n\r\nHere is the error :  `Can&#39;t serialize value : Expected a &#39;String&#39; or &#39;java.time.temporal.TemporalAccessor&#39; but was &#39;Timestamp&#39;.&quot;`\r\n\r\nHere is my Doctor Entity which is shown below.\r\n\r\n    public class Doctor implements Serializable {\r\n    ....\r\n    private Date birthday;\r\n    ....\r\n    }\r\n\r\n\r\nHere is my code snippet defined in **Graphiql** which is shown below.\r\n\r\n    {\r\n      departments{\r\n        id\r\n        name\r\n        doctors{\r\n          id\r\n          firstName\r\n          lastName\r\n          salary\r\n          age\r\n          birthday\r\n        }\r\n        hospital{\r\n          id\r\n          name\r\n        }\r\n      }\r\n    }\r\n\r\nHere is my project file : [My Project Link][1]\r\n\r\n\r\n  [1]: https://github.com/Rapter1990/springbootgraphql\r\n\r\n\r\nHow can I fix it?","title":"Error : Can&#39;t serialize value : Expected a &#39;String&#39; or &#39;java.time.temporal.TemporalAccessor&#39; but was &#39;Timestamp&#39;.&quot; in Spring Boot with Graphql","body":"<p>I've devised an example of the usage of <strong>Graphql</strong> in <strong>Spring Boot</strong>.\nI got an error related with the definition of <strong>Date</strong> when I wrote a query in <strong>Graphiql</strong></p>\n<p>Here is the error :  <code>Can't serialize value : Expected a 'String' or 'java.time.temporal.TemporalAccessor' but was 'Timestamp'.&quot;</code></p>\n<p>Here is my Doctor Entity which is shown below.</p>\n<pre><code>public class Doctor implements Serializable {\n....\nprivate Date birthday;\n....\n}\n</code></pre>\n<p>Here is my code snippet defined in <strong>Graphiql</strong> which is shown below.</p>\n<pre><code>{\n  departments{\n    id\n    name\n    doctors{\n      id\n      firstName\n      lastName\n      salary\n      age\n      birthday\n    }\n    hospital{\n      id\n      name\n    }\n  }\n}\n</code></pre>\n<p>Here is my project file : <a href=\"https://github.com/Rapter1990/springbootgraphql\" rel=\"nofollow noreferrer\">My Project Link</a></p>\n<p>How can I fix it?</p>\n"},{"tags":["java"],"comments":[{"owner":{"display_name":"user10109396"},"score":0,"creation_date":1633717505,"post_id":69500227,"comment_id":122843365,"body_markdown":"How do you get the `hp` variable in `hp.setHP(updatedHP);`?","body":"How do you get the <code>hp</code> variable in <code>hp.setHP(updatedHP);</code>?"},{"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"score":0,"creation_date":1633717821,"post_id":69500227,"comment_id":122843465,"body_markdown":"Is that the fully definition of the `Monster` class - I don&#39;t see any getters/setters defined.","body":"Is that the fully definition of the <code>Monster</code> class - I don&#39;t see any getters/setters defined."},{"owner":{"account_id":21146338,"reputation":37,"user_id":15547586,"display_name":"ayy"},"score":0,"creation_date":1633717978,"post_id":69500227,"comment_id":122843524,"body_markdown":"No, it&#39;s not the full definition. I defined getters for every variable and setter for &#39;hp&#39;","body":"No, it&#39;s not the full definition. I defined getters for every variable and setter for &#39;hp&#39;"},{"owner":{"account_id":21146338,"reputation":37,"user_id":15547586,"display_name":"ayy"},"score":0,"creation_date":1633718102,"post_id":69500227,"comment_id":122843571,"body_markdown":"I&#39;m trying to use a setter to update the value of hp in hp.setHP(updatedHP)","body":"I&#39;m trying to use a setter to update the value of hp in hp.setHP(updatedHP)"}],"answers":[{"tags":[],"owner":{"account_id":19728093,"reputation":51,"user_id":14444227,"display_name":"Connell Hagen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633718058,"creation_date":1633718058,"answer_id":69500345,"question_id":69500227,"body_markdown":"You will not be able to update that instance variable `hp` outside of the `Monster` class. Your idea of using `.setHP()` isn&#39;t working, because you are not using that method on a `Monster` object. If your `Monster` in this example is called `p1`, you should do something like this:\r\n\r\n```\r\nint updatedHP = p1.getHP() - damage;\r\np1.setHP(updatedHP);\r\n```\r\n\r\nassuming you want to keep the `updatedHP` variable, and have a working getHP() method within the `Monster` class, that is.","title":"How do I access and update a variable form another java class?","body":"<p>You will not be able to update that instance variable <code>hp</code> outside of the <code>Monster</code> class. Your idea of using <code>.setHP()</code> isn't working, because you are not using that method on a <code>Monster</code> object. If your <code>Monster</code> in this example is called <code>p1</code>, you should do something like this:</p>\n<pre><code>int updatedHP = p1.getHP() - damage;\np1.setHP(updatedHP);\n</code></pre>\n<p>assuming you want to keep the <code>updatedHP</code> variable, and have a working getHP() method within the <code>Monster</code> class, that is.</p>\n"},{"tags":[],"owner":{"account_id":17113942,"reputation":623,"user_id":12383992,"display_name":"dbrewster"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633718937,"creation_date":1633718937,"answer_id":69500500,"question_id":69500227,"body_markdown":"Your code is unclear as there a bunch of variables without the Type included (hp and p1) but I believe what you are trying to do is this -\r\n```\r\n    damage = getMonster().getAttack() + movePower - pl.getMonster().getDefense();\r\n    int currentHP = getMonster().getHP();\r\n    int updatedHP = currentHP - damage;\r\n    getMonster().setHP(updatedHP);\r\n```","title":"How do I access and update a variable form another java class?","body":"<p>Your code is unclear as there a bunch of variables without the Type included (hp and p1) but I believe what you are trying to do is this -</p>\n<pre><code>    damage = getMonster().getAttack() + movePower - pl.getMonster().getDefense();\n    int currentHP = getMonster().getHP();\n    int updatedHP = currentHP - damage;\n    getMonster().setHP(updatedHP);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9933082,"reputation":169,"user_id":7352289,"display_name":"arp5"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633718986,"creation_date":1633718986,"answer_id":69500504,"question_id":69500227,"body_markdown":"you&#39;ll need to define setter in Monster class and use it after instantiating Monster object.(Removing move for simplicity)\r\n```\r\npublic class Monster {\r\n\r\n    private String name, type;\r\n    private int hp, speed, attack, defense;\r\n\r\n    public Monster(String name, String type, int hp, int speed, int attack, int defense) {\r\n                                                                                         \r\n        this.name = name;\r\n        this.type = type;\r\n        this.hp = hp;\r\n        this.speed = speed;\r\n        this.attack = attack;\r\n        this.defense = defense;\r\n    }\r\n\r\n    public int getHp() {\r\n        return this.hp;\r\n    }\r\n\r\n    public void setHp(int num) {\r\n        this.hp = num;\r\n    }\r\n}\r\n```\r\n```\r\nimport Monster.java;\r\n\r\npublic class Hello {\r\n    public static void main(String[] args) {\r\n        Monster m = new Monster(&quot;name1&quot;, &quot;type1&quot;, 20, 1, 2, 3);\r\n        m.setHp(200);\r\n        System.out.println(m.getHp());\r\n    }\r\n}","title":"How do I access and update a variable form another java class?","body":"<p>you'll need to define setter in Monster class and use it after instantiating Monster object.(Removing move for simplicity)</p>\n<pre><code>public class Monster {\n\n    private String name, type;\n    private int hp, speed, attack, defense;\n\n    public Monster(String name, String type, int hp, int speed, int attack, int defense) {\n                                                                                         \n        this.name = name;\n        this.type = type;\n        this.hp = hp;\n        this.speed = speed;\n        this.attack = attack;\n        this.defense = defense;\n    }\n\n    public int getHp() {\n        return this.hp;\n    }\n\n    public void setHp(int num) {\n        this.hp = num;\n    }\n}\n</code></pre>\n<pre><code>import Monster.java;\n\npublic class Hello {\n    public static void main(String[] args) {\n        Monster m = new Monster(&quot;name1&quot;, &quot;type1&quot;, 20, 1, 2, 3);\n        m.setHp(200);\n        System.out.println(m.getHp());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21146338,"reputation":37,"user_id":15547586,"display_name":"ayy"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1633720007,"creation_date":1633720007,"answer_id":69500695,"question_id":69500227,"body_markdown":"I figured it out. All I had to do was set the monster variable to public in the Player class and then I used the dot operator to access and update the hp variable. Thanks for all the help!","title":"How do I access and update a variable form another java class?","body":"<p>I figured it out. All I had to do was set the monster variable to public in the Player class and then I used the dot operator to access and update the hp variable. Thanks for all the help!</p>\n"},{"tags":[],"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633723454,"creation_date":1633723454,"answer_id":69501192,"question_id":69500227,"body_markdown":"Let&#39;s assume we have a Monster and we calculate some damage:\r\n\r\n    Monster monster = getMonster();\r\n    int damage = calculateDamage();\r\n\r\nWe can calculate the HP then assign it back to the Monster:\r\n\r\n    int remainingHp = monster.getHp() - damage;\r\n    monster.setHp(remainingHp);\r\n\r\nThis can be simplified a bit to: \r\n\r\n    monster.setHp(monster.getHp() - damage);\r\n\r\nNote that there is no bounds checking.  What happens if damage is greater than the HP on the monster?  Is it meaningful to go negative or should it drop to 0?  Consider adding a method to Monster:\r\n\r\n    public class Monster {\r\n      ... stuff ...\r\n      /**\r\n       * @return true if the Monster is still alive, false if it has died\r\n       */\r\n      public boolean acceptDamage(int damage) {\r\n        hp = hp - damage;\r\n        if (hp &gt; 0) {\r\n          return true;\r\n        }\r\n        // doh - we died!  set HP to 0 and return false\r\n        hp = 0; \r\n        return false;\r\n      }\r\n\r\n\r\n\r\n      ","title":"How do I access and update a variable form another java class?","body":"<p>Let's assume we have a Monster and we calculate some damage:</p>\n<pre><code>Monster monster = getMonster();\nint damage = calculateDamage();\n</code></pre>\n<p>We can calculate the HP then assign it back to the Monster:</p>\n<pre><code>int remainingHp = monster.getHp() - damage;\nmonster.setHp(remainingHp);\n</code></pre>\n<p>This can be simplified a bit to:</p>\n<pre><code>monster.setHp(monster.getHp() - damage);\n</code></pre>\n<p>Note that there is no bounds checking.  What happens if damage is greater than the HP on the monster?  Is it meaningful to go negative or should it drop to 0?  Consider adding a method to Monster:</p>\n<pre><code>public class Monster {\n  ... stuff ...\n  /**\n   * @return true if the Monster is still alive, false if it has died\n   */\n  public boolean acceptDamage(int damage) {\n    hp = hp - damage;\n    if (hp &gt; 0) {\n      return true;\n    }\n    // doh - we died!  set HP to 0 and return false\n    hp = 0; \n    return false;\n  }\n\n\n\n  \n</code></pre>\n"}],"owner":{"account_id":21146338,"reputation":37,"user_id":15547586,"display_name":"ayy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":5,"score":0,"last_activity_date":1633723454,"creation_date":1633717328,"question_id":69500227,"body_markdown":"I am trying to access the variable &#39;hp&#39; which I initialized in the &#39;Monster&#39; class but nothing is working. I tried using setters but it didn&#39;t work.\r\n\r\n`Monster` class:\r\n\r\n```\r\npublic class Monster{\r\n    \r\n    private String name, type;\r\n    private int hp, speed, attack, defense;\r\n    private Move move1, move2, move3, move4;\r\n\r\n    public Monster(String name, String type, int hp, int speed, int attack, int defense, Move move1, Move move2, Move move3, Move move4) {\r\n\r\n        this.name = name;\r\n        this.type = type;\r\n        this.hp = hp;\r\n        this.speed = speed;\r\n        this.attack = attack;\r\n        this.defense = defense;\r\n        this.move1 = move1;\r\n        this.move2 = move2;\r\n        this.move3 = move3;\r\n        this.move4 = move4;\r\n    }\r\n```\r\n\r\nThe following code is part of another class where I am trying to access `hp` and update its value:\r\n\r\n```\r\n    damage = getMonster().getAttack() + movePower - pl.getMonster().getDefense();\r\n    int currentHP = getMonster().getHP();\r\n    int updatedHP = currentHP - damage;\r\n    hp.setHP(updatedHP);\r\n```\r\n\r\nThis is how I&#39;m trying to access and modify it. Please help.\r\n\r\n","title":"How do I access and update a variable form another java class?","body":"<p>I am trying to access the variable 'hp' which I initialized in the 'Monster' class but nothing is working. I tried using setters but it didn't work.</p>\n<p><code>Monster</code> class:</p>\n<pre><code>public class Monster{\n    \n    private String name, type;\n    private int hp, speed, attack, defense;\n    private Move move1, move2, move3, move4;\n\n    public Monster(String name, String type, int hp, int speed, int attack, int defense, Move move1, Move move2, Move move3, Move move4) {\n\n        this.name = name;\n        this.type = type;\n        this.hp = hp;\n        this.speed = speed;\n        this.attack = attack;\n        this.defense = defense;\n        this.move1 = move1;\n        this.move2 = move2;\n        this.move3 = move3;\n        this.move4 = move4;\n    }\n</code></pre>\n<p>The following code is part of another class where I am trying to access <code>hp</code> and update its value:</p>\n<pre><code>    damage = getMonster().getAttack() + movePower - pl.getMonster().getDefense();\n    int currentHP = getMonster().getHP();\n    int updatedHP = currentHP - damage;\n    hp.setHP(updatedHP);\n</code></pre>\n<p>This is how I'm trying to access and modify it. Please help.</p>\n"},{"tags":["java","macos","java-8","java-11"],"answers":[{"tags":[],"owner":{"account_id":5960523,"reputation":185,"user_id":4685845,"accept_rate":33,"display_name":"Johannes Loepelmann"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1633723153,"creation_date":1633702745,"answer_id":69497366,"question_id":69497067,"body_markdown":"Its probably because you&#39;re actually running a x86_64 Java VM through Rosetta on your M1 Macbook. At least AdoptOpenJDK doesn&#39;t even offer a native m1 version of Java 11. For Java 17, there is a native aarch64 version available: https://adoptium.net/releases.html?variant=openjdk17&amp;jvmVariant=hotspot \r\n\r\nIn the [*Activity Monitor*](https://support.apple.com/guide/activity-monitor/welcome/mac) app bundled with your map, you can verify if an app (“process”) is running natively versus running under [Rosetta 2](https://en.wikipedia.org/wiki/Rosetta_(software)#Rosetta_2). Find your process, likely named `java`, and look at the *Kind* column. Native apps say `Apple` while apps under Rosetta 2 say `Intel`. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qcn2x.jpg","title":"Java SDK Reporting Wrong Architecture on Mac M1","body":"<p>Its probably because you're actually running a x86_64 Java VM through Rosetta on your M1 Macbook. At least AdoptOpenJDK doesn't even offer a native m1 version of Java 11. For Java 17, there is a native aarch64 version available: <a href=\"https://adoptium.net/releases.html?variant=openjdk17&amp;jvmVariant=hotspot\" rel=\"nofollow noreferrer\">https://adoptium.net/releases.html?variant=openjdk17&amp;jvmVariant=hotspot</a></p>\n<p>In the <a href=\"https://support.apple.com/guide/activity-monitor/welcome/mac\" rel=\"nofollow noreferrer\"><em>Activity Monitor</em></a> app bundled with your map, you can verify if an app (“process”) is running natively versus running under <a href=\"https://en.wikipedia.org/wiki/Rosetta_(software)#Rosetta_2\" rel=\"nofollow noreferrer\">Rosetta 2</a>. Find your process, likely named <code>java</code>, and look at the <em>Kind</em> column. Native apps say <code>Apple</code> while apps under Rosetta 2 say <code>Intel</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/qcn2x.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qcn2x.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":2509901,"reputation":522,"user_id":2182636,"display_name":"cgivre"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5240,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1633723153,"creation_date":1633701492,"question_id":69497067,"body_markdown":"I have a strange java issue.  I&#39;m working on a MacBook Air and doing some Java development work.  I need my code to do the following:\r\n\r\n```\r\n// pseudo code\r\nif (intel) {\r\n   // Load docker \r\n} else if (arm) {\r\n   // Load ARM docker\r\n}\r\n```\r\n\r\nIt works for Intel and Linux-based ARM architecture.  But for my M1 MacBook Air, it reports that the OS is `Mac OS X` but the architecture is reported as `x86`.  Because of that last issue, I can&#39;t distinguish between the ARM and Intel machines.  \r\n\r\nHere&#39;s the JDK version I&#39;m running.  I feel like I&#39;m missing something here, but is there some way I can write this code so that I can determine whether the code is running on an M1 or an Intel?\r\n\r\n```\r\n ~ java --version\r\nopenjdk 11.0.12 2021-07-20 LTS\r\nOpenJDK Runtime Environment Zulu11.50+19-CA (build 11.0.12+7-LTS)\r\nOpenJDK 64-Bit Server VM Zulu11.50+19-CA (build 11.0.12+7-LTS, mixed mode)\r\n(base) ➜  ~ java -XshowSettings 2&gt;&amp;1 | grep &quot;  os.&quot;\r\n    os.arch = x86_64\r\n    os.name = Mac OS X\r\n    os.version = 11.5\r\n```","title":"Java SDK Reporting Wrong Architecture on Mac M1","body":"<p>I have a strange java issue.  I'm working on a MacBook Air and doing some Java development work.  I need my code to do the following:</p>\n<pre><code>// pseudo code\nif (intel) {\n   // Load docker \n} else if (arm) {\n   // Load ARM docker\n}\n</code></pre>\n<p>It works for Intel and Linux-based ARM architecture.  But for my M1 MacBook Air, it reports that the OS is <code>Mac OS X</code> but the architecture is reported as <code>x86</code>.  Because of that last issue, I can't distinguish between the ARM and Intel machines.</p>\n<p>Here's the JDK version I'm running.  I feel like I'm missing something here, but is there some way I can write this code so that I can determine whether the code is running on an M1 or an Intel?</p>\n<pre><code> ~ java --version\nopenjdk 11.0.12 2021-07-20 LTS\nOpenJDK Runtime Environment Zulu11.50+19-CA (build 11.0.12+7-LTS)\nOpenJDK 64-Bit Server VM Zulu11.50+19-CA (build 11.0.12+7-LTS, mixed mode)\n(base) ➜  ~ java -XshowSettings 2&gt;&amp;1 | grep &quot;  os.&quot;\n    os.arch = x86_64\n    os.name = Mac OS X\n    os.version = 11.5\n</code></pre>\n"},{"tags":["java","eclipse","maven"],"comments":[{"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1589999819,"post_id":61920400,"comment_id":109518747,"body_markdown":"Why do you want to do it?","body":"Why do you want to do it?"},{"owner":{"account_id":11260438,"reputation":5143,"user_id":8258942,"accept_rate":0,"display_name":"Nitin Bisht"},"score":0,"creation_date":1589999875,"post_id":61920400,"comment_id":109518783,"body_markdown":"When you do not create a package inside the src folder first and try to create class directly then eclipse create default package itself. You better delete by right-clicking on it and press on delete option. Then create package first and then create a class","body":"When you do not create a package inside the src folder first and try to create class directly then eclipse create default package itself. You better delete by right-clicking on it and press on delete option. Then create package first and then create a class"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":2,"creation_date":1590000028,"post_id":61920400,"comment_id":109518871,"body_markdown":"The `default` package is the &#39;package without a package name&#39;. It is there because you don&#39;t have any packages (i.e. subfolders) in the `src/main/java` folder. Create a package yourself and the `default` package will disappear","body":"The <code>default</code> package is the &#39;package without a package name&#39;. It is there because you don&#39;t have any packages (i.e. subfolders) in the <code>src&#47;main&#47;java</code> folder. Create a package yourself and the <code>default</code> package will disappear"}],"answers":[{"tags":[],"owner":{"account_id":6224397,"reputation":545,"user_id":4843147,"accept_rate":83,"display_name":"DanCode"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633722489,"creation_date":1633722489,"answer_id":69501054,"question_id":61920400,"body_markdown":"Try right clicking and select refresh on the project explorer. Make sure there is nothing in the default package first.","title":"How to remove default package in maven project in eclipse","body":"<p>Try right clicking and select refresh on the project explorer. Make sure there is nothing in the default package first.</p>\n"}],"owner":{"account_id":18637693,"reputation":11,"user_id":13584208,"display_name":"naga reddy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1202,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1633722489,"creation_date":1589999668,"question_id":61920400,"body_markdown":"[![enter image description here][1]][1]\r\n\r\nplease help out how to remove default package in maven project in eclipse\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vgDsb.png","title":"How to remove default package in maven project in eclipse","body":"<p><a href=\"https://i.stack.imgur.com/vgDsb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vgDsb.png\" alt=\"enter image description here\"></a></p>\n\n<p>please help out how to remove default package in maven project in eclipse</p>\n"},{"tags":["java","amazon-web-services","amazon-elastic-beanstalk","amazon-cloudwatchlogs"],"answers":[{"tags":[],"owner":{"account_id":90365,"reputation":222476,"user_id":248823,"accept_rate":100,"display_name":"Marcin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599211312,"creation_date":1599211312,"answer_id":63738358,"question_id":63734196,"body_markdown":"I don&#39;t think so. The log files you mentioned in the question are hard coded into config file `/opt/aws/amazon-cloudwatch-agent/etc/beanstalk.json`:\r\n\r\n```\r\n{\r\n        &quot;logs&quot;: {\r\n                &quot;logs_collected&quot;: {\r\n                        &quot;files&quot;: {\r\n                                &quot;collect_list&quot;: [\r\n                                        {\r\n                                                &quot;file_path&quot;: &quot;/var/log/eb-engine.log&quot;,\r\n                                                &quot;log_group_name&quot;: &quot;/aws/elasticbeanstalk/A03cBeanstalkApplicationMybeanstalka-env/var/log/eb-engine.log&quot;,\r\n                                                &quot;log_stream_name&quot;: &quot;{instance_id}&quot;\r\n                                        },\r\n                                        {\r\n                                                &quot;file_path&quot;: &quot;/var/log/eb-hooks.log&quot;,\r\n                                                &quot;log_group_name&quot;: &quot;/aws/elasticbeanstalk/A03cBeanstalkApplicationMybeanstalka-env/var/log/eb-hooks.log&quot;,\r\n                                                &quot;log_stream_name&quot;: &quot;{instance_id}&quot;\r\n                                        },\r\n                                        {\r\n                                                &quot;file_path&quot;: &quot;/var/log/nginx/access.log&quot;,\r\n                                                &quot;log_group_name&quot;: &quot;/aws/elasticbeanstalk/A03cBeanstalkApplicationMybeanstalka-env/var/log/nginx/access.log&quot;,\r\n                                                &quot;log_stream_name&quot;: &quot;{instance_id}&quot;\r\n                                        },\r\n                                        {\r\n                                                &quot;file_path&quot;: &quot;/var/log/nginx/error.log&quot;,\r\n                                                &quot;log_group_name&quot;: &quot;/aws/elasticbeanstalk/A03cBeanstalkApplicationMybeanstalka-env/var/log/nginx/error.log&quot;,\r\n                                                &quot;log_stream_name&quot;: &quot;{instance_id}&quot;\r\n                                        },\r\n                                        {\r\n                                                &quot;file_path&quot;: &quot;/var/log/web.stdout.log&quot;,\r\n                                                &quot;log_group_name&quot;: &quot;/aws/elasticbeanstalk/A03cBeanstalkApplicationMybeanstalka-env/var/log/web.stdout.log&quot;,\r\n                                                &quot;log_stream_name&quot;: &quot;{instance_id}&quot;\r\n                                        }\r\n                                ]\r\n                        }\r\n                }\r\n        }\r\n}\r\n```\r\n\r\nThe [aws:elasticbeanstalk:cloudwatch:logs](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/command-options-general.html#command-options-general-cloudwatchlogs) does not have any option to add extra log files. \r\n\r\nIt seems to me that you would have to  customize the config files through `extensions` config files.\r\n\r\n","title":"AWS Elastic Beanstalk default CloudWatch log location for Java applications","body":"<p>I don't think so. The log files you mentioned in the question are hard coded into config file <code>/opt/aws/amazon-cloudwatch-agent/etc/beanstalk.json</code>:</p>\n<pre><code>{\n        &quot;logs&quot;: {\n                &quot;logs_collected&quot;: {\n                        &quot;files&quot;: {\n                                &quot;collect_list&quot;: [\n                                        {\n                                                &quot;file_path&quot;: &quot;/var/log/eb-engine.log&quot;,\n                                                &quot;log_group_name&quot;: &quot;/aws/elasticbeanstalk/A03cBeanstalkApplicationMybeanstalka-env/var/log/eb-engine.log&quot;,\n                                                &quot;log_stream_name&quot;: &quot;{instance_id}&quot;\n                                        },\n                                        {\n                                                &quot;file_path&quot;: &quot;/var/log/eb-hooks.log&quot;,\n                                                &quot;log_group_name&quot;: &quot;/aws/elasticbeanstalk/A03cBeanstalkApplicationMybeanstalka-env/var/log/eb-hooks.log&quot;,\n                                                &quot;log_stream_name&quot;: &quot;{instance_id}&quot;\n                                        },\n                                        {\n                                                &quot;file_path&quot;: &quot;/var/log/nginx/access.log&quot;,\n                                                &quot;log_group_name&quot;: &quot;/aws/elasticbeanstalk/A03cBeanstalkApplicationMybeanstalka-env/var/log/nginx/access.log&quot;,\n                                                &quot;log_stream_name&quot;: &quot;{instance_id}&quot;\n                                        },\n                                        {\n                                                &quot;file_path&quot;: &quot;/var/log/nginx/error.log&quot;,\n                                                &quot;log_group_name&quot;: &quot;/aws/elasticbeanstalk/A03cBeanstalkApplicationMybeanstalka-env/var/log/nginx/error.log&quot;,\n                                                &quot;log_stream_name&quot;: &quot;{instance_id}&quot;\n                                        },\n                                        {\n                                                &quot;file_path&quot;: &quot;/var/log/web.stdout.log&quot;,\n                                                &quot;log_group_name&quot;: &quot;/aws/elasticbeanstalk/A03cBeanstalkApplicationMybeanstalka-env/var/log/web.stdout.log&quot;,\n                                                &quot;log_stream_name&quot;: &quot;{instance_id}&quot;\n                                        }\n                                ]\n                        }\n                }\n        }\n}\n</code></pre>\n<p>The <a href=\"https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/command-options-general.html#command-options-general-cloudwatchlogs\" rel=\"nofollow noreferrer\">aws:elasticbeanstalk:cloudwatch:logs</a> does not have any option to add extra log files.</p>\n<p>It seems to me that you would have to  customize the config files through <code>extensions</code> config files.</p>\n"},{"tags":[],"owner":{"account_id":11013943,"reputation":410,"user_id":8090336,"display_name":"gowthz"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1633722084,"creation_date":1633705022,"answer_id":69497891,"question_id":63734196,"body_markdown":"It is very easy to configure this in the new unified CloudWatch agent. The agent picks up any configuration files present in the directory - `/etc/amazon/amazon-cloudwatch-agent/amazon-cloudwatch-agent.d/`\r\n\r\nYou can create a custom config file in that directory,\r\n```\r\n{\r\n    &quot;logs&quot;: {\r\n        &quot;logs_collected&quot;: {\r\n            &quot;files&quot;: {\r\n                &quot;collect_list&quot;: [\r\n                    {\r\n                        &quot;file_path&quot;: &quot;path_to_file/app1.log&quot;,\r\n                        &quot;log_group_name&quot;: &quot;/app/app.log&quot;,\r\n                        &quot;log_stream_name&quot;: &quot;{instance_id}&quot;\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\nYou can have [multiple config files][1] like this. These logs will be available in CloudWatch Logs along with default log groups.\r\n\r\n**Note -** Looking at eb-engine.log, Elastic Beanstalk freshly sets up the unified cloudwatch agent after running `commands` from .ebextension and `prebuild` hooks for every deplyment, so any files created in those steps are being deleted. So I suggest you use `predeploy` hooks to configure this.\r\n\r\n**A sample hook to do this -**\r\n\r\nStore the hook file at - `.platform/hooks/predeploy/cwa_custom_logs.sh`\r\nand make sure the file is executable in git.\r\n```\r\n#!/bin/sh\r\n\r\nfilepath=&quot;/etc/amazon/amazon-cloudwatch-agent/amazon-cloudwatch-agent.d/custom_logs.json&quot;\r\n\r\n# Create the file\r\ncat &gt; $filepath &lt;&lt; &#39;EOL&#39;\r\n{\r\n    &quot;logs&quot;: {\r\n        &quot;logs_collected&quot;: {\r\n            &quot;files&quot;: {\r\n                &quot;collect_list&quot;: [\r\n                    {\r\n                        &quot;file_path&quot;: &quot;path_to_file/app1.log&quot;,\r\n                        &quot;log_group_name&quot;: &quot;/app/app.log&quot;,\r\n                        &quot;log_stream_name&quot;: &quot;{instance_id}&quot;\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    }\r\n}\r\nEOL\r\n\r\n# Change file permissions\r\nchmod 000755 $filepath\r\nchown root:root $filepath\r\n\r\n# Restart cloudwatch agent\r\nsystemctl restart amazon-cloudwatch-agent.service\r\n```\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch-Agent-common-scenarios.html#CloudWatch-Agent-multiple-config-files","title":"AWS Elastic Beanstalk default CloudWatch log location for Java applications","body":"<p>It is very easy to configure this in the new unified CloudWatch agent. The agent picks up any configuration files present in the directory - <code>/etc/amazon/amazon-cloudwatch-agent/amazon-cloudwatch-agent.d/</code></p>\n<p>You can create a custom config file in that directory,</p>\n<pre><code>{\n    &quot;logs&quot;: {\n        &quot;logs_collected&quot;: {\n            &quot;files&quot;: {\n                &quot;collect_list&quot;: [\n                    {\n                        &quot;file_path&quot;: &quot;path_to_file/app1.log&quot;,\n                        &quot;log_group_name&quot;: &quot;/app/app.log&quot;,\n                        &quot;log_stream_name&quot;: &quot;{instance_id}&quot;\n                    }\n                ]\n            }\n        }\n    }\n}\n</code></pre>\n<p>You can have <a href=\"https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch-Agent-common-scenarios.html#CloudWatch-Agent-multiple-config-files\" rel=\"nofollow noreferrer\">multiple config files</a> like this. These logs will be available in CloudWatch Logs along with default log groups.</p>\n<p><strong>Note -</strong> Looking at eb-engine.log, Elastic Beanstalk freshly sets up the unified cloudwatch agent after running <code>commands</code> from .ebextension and <code>prebuild</code> hooks for every deplyment, so any files created in those steps are being deleted. So I suggest you use <code>predeploy</code> hooks to configure this.</p>\n<p><strong>A sample hook to do this -</strong></p>\n<p>Store the hook file at - <code>.platform/hooks/predeploy/cwa_custom_logs.sh</code>\nand make sure the file is executable in git.</p>\n<pre><code>#!/bin/sh\n\nfilepath=&quot;/etc/amazon/amazon-cloudwatch-agent/amazon-cloudwatch-agent.d/custom_logs.json&quot;\n\n# Create the file\ncat &gt; $filepath &lt;&lt; 'EOL'\n{\n    &quot;logs&quot;: {\n        &quot;logs_collected&quot;: {\n            &quot;files&quot;: {\n                &quot;collect_list&quot;: [\n                    {\n                        &quot;file_path&quot;: &quot;path_to_file/app1.log&quot;,\n                        &quot;log_group_name&quot;: &quot;/app/app.log&quot;,\n                        &quot;log_stream_name&quot;: &quot;{instance_id}&quot;\n                    }\n                ]\n            }\n        }\n    }\n}\nEOL\n\n# Change file permissions\nchmod 000755 $filepath\nchown root:root $filepath\n\n# Restart cloudwatch agent\nsystemctl restart amazon-cloudwatch-agent.service\n</code></pre>\n"}],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5922,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1633722084,"creation_date":1599188320,"question_id":63734196,"body_markdown":"I have deployed a JAR file in an AWS Elastic Beanstalk environment, using a load balancer and maximum 2 EC2 instances. \r\n\r\nMy environment seems to be using _the new unified CloudWatch agent_, not the legacy CloudWatch Logs Agent\r\n\r\nIn the environment configuration in the console I turned on &quot;Instance log streaming to CloudWatch Logs&quot;, and now in CloudWatch Logs I get the following groups:\r\n\r\n* `/aws/elasticbeanstalk/myapp-myenv/var/log/eb-engine.log`\r\n* `/aws/elasticbeanstalk/myapp-myenv/var/log/eb-hooks.log`\r\n* `/aws/elasticbeanstalk/myapp-myenv/var/log/nginx/access.log`\r\n* `/aws/elasticbeanstalk/myapp-myenv/var/log/nginx/error.log`\r\n* `/aws/elasticbeanstalk/myapp-myenv/var/log/web.stdout.log`\r\n\r\nThis is nice. Notably the web server accesses are in `access.log`, and even the STDOUT console output of my JAR file is in `web.stdout.log`. So far so good.\r\n\r\nNow let&#39;s say I want my JAR application to generate a log file and have it picked up automatically in CloudWatch Logs. I&#39;ve read the [Elastic Beanstalk EC2 logging documentation][1] which says that I can bundle special `.ebextensions` in my application to indicate new logging locations &quot;[i]f your application generates logs in a location that isn&#39;t part of the default configuration for your environment&#39;s platform&quot;.\r\n\r\nIn the short term I&#39;d rather not create an `.ebextensions` file. The part about &quot;… a location … part of the default configuration …&quot; intrigues me.\r\n\r\n**Is there a default location for the Elastic Beanstalk Java platform logs?** In other words, is there some default location such as `/var/log/app/` that I can simply have my application log to (e.g. via environment variable configuration) and have CloudWatch Logs with the new unified agent automatically pick them up, without needing to create an `.ebextensions` file? (As a second best solution, is there a way I can configure the location using the AWS console?)\r\n\r\n  [1]: https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features.logging.html","title":"AWS Elastic Beanstalk default CloudWatch log location for Java applications","body":"<p>I have deployed a JAR file in an AWS Elastic Beanstalk environment, using a load balancer and maximum 2 EC2 instances.</p>\n<p>My environment seems to be using <em>the new unified CloudWatch agent</em>, not the legacy CloudWatch Logs Agent</p>\n<p>In the environment configuration in the console I turned on &quot;Instance log streaming to CloudWatch Logs&quot;, and now in CloudWatch Logs I get the following groups:</p>\n<ul>\n<li><code>/aws/elasticbeanstalk/myapp-myenv/var/log/eb-engine.log</code></li>\n<li><code>/aws/elasticbeanstalk/myapp-myenv/var/log/eb-hooks.log</code></li>\n<li><code>/aws/elasticbeanstalk/myapp-myenv/var/log/nginx/access.log</code></li>\n<li><code>/aws/elasticbeanstalk/myapp-myenv/var/log/nginx/error.log</code></li>\n<li><code>/aws/elasticbeanstalk/myapp-myenv/var/log/web.stdout.log</code></li>\n</ul>\n<p>This is nice. Notably the web server accesses are in <code>access.log</code>, and even the STDOUT console output of my JAR file is in <code>web.stdout.log</code>. So far so good.</p>\n<p>Now let's say I want my JAR application to generate a log file and have it picked up automatically in CloudWatch Logs. I've read the <a href=\"https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features.logging.html\" rel=\"nofollow noreferrer\">Elastic Beanstalk EC2 logging documentation</a> which says that I can bundle special <code>.ebextensions</code> in my application to indicate new logging locations &quot;[i]f your application generates logs in a location that isn't part of the default configuration for your environment's platform&quot;.</p>\n<p>In the short term I'd rather not create an <code>.ebextensions</code> file. The part about &quot;… a location … part of the default configuration …&quot; intrigues me.</p>\n<p><strong>Is there a default location for the Elastic Beanstalk Java platform logs?</strong> In other words, is there some default location such as <code>/var/log/app/</code> that I can simply have my application log to (e.g. via environment variable configuration) and have CloudWatch Logs with the new unified agent automatically pick them up, without needing to create an <code>.ebextensions</code> file? (As a second best solution, is there a way I can configure the location using the AWS console?)</p>\n"},{"tags":["java","android","kotlin","tabs","android-tablayout"],"comments":[{"owner":{"account_id":15212304,"reputation":772,"user_id":10976668,"display_name":"Sergio Pardo"},"score":0,"creation_date":1633703028,"post_id":69497289,"comment_id":122837958,"body_markdown":"Please add some code so it&#39;s easier to understand your requirement","body":"Please add some code so it&#39;s easier to understand your requirement"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1634018237,"post_id":69497289,"comment_id":122906602,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":19627125,"reputation":186,"user_id":14366207,"display_name":"Omar Hemaia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633722017,"creation_date":1633722017,"answer_id":69500991,"question_id":69497289,"body_markdown":"Try this :\r\n\r\n    yourTabLayout.getTabAt(tabPosition).select();\r\n\r\ntabPosition is an ```int``` that determinants which tab will be selected\r\n\r\nFor example : 0 will select the first tab, 1 will select the second tab, 2 will select the third tab and so on","title":"Switch tab on button clicked","body":"<p>Try this :</p>\n<pre><code>yourTabLayout.getTabAt(tabPosition).select();\n</code></pre>\n<p>tabPosition is an <code>int</code> that determinants which tab will be selected</p>\n<p>For example : 0 will select the first tab, 1 will select the second tab, 2 will select the third tab and so on</p>\n"}],"owner":{"account_id":20236690,"reputation":1,"user_id":14841644,"display_name":"Abhi Patel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":550,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1633722017,"creation_date":1633702483,"question_id":69497289,"body_markdown":"I create one activity(Home activity)inside home activity I add frame layout &amp; some buttons. in frame layout I load fragment(Home fragment)inside home fragment I create Tab Layout now my question is when we select button(from home activity)so change regarding tab is their any possible way??\r\n\r\nNote: I can not use viewpager because of some reason\r\n\r\nmy flow is \r\n\r\n(1) Activity-&gt;frame layout &amp;&amp; buttons\r\n\r\n(2) frame layout-&gt; load fragment(Home fragment)-&gt;  tab layout-&gt;  new frame layout which contains diff. fragment regarding tabs.\r\n\r\nwhen click on activity&#39;s button so change tab \r\n\r\nThanks in advance ","title":"Switch tab on button clicked","body":"<p>I create one activity(Home activity)inside home activity I add frame layout &amp; some buttons. in frame layout I load fragment(Home fragment)inside home fragment I create Tab Layout now my question is when we select button(from home activity)so change regarding tab is their any possible way??</p>\n<p>Note: I can not use viewpager because of some reason</p>\n<p>my flow is</p>\n<p>(1) Activity-&gt;frame layout &amp;&amp; buttons</p>\n<p>(2) frame layout-&gt; load fragment(Home fragment)-&gt;  tab layout-&gt;  new frame layout which contains diff. fragment regarding tabs.</p>\n<p>when click on activity's button so change tab</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","jar","java-platform-module-system"],"owner":{"account_id":15922768,"reputation":51,"user_id":11489272,"display_name":"noeppi noeppi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":0,"score":5,"last_activity_date":1633721775,"creation_date":1560967341,"question_id":56673470,"body_markdown":"Assuming we have two jar files with two different modules. Both jar-files include some resources (lets say png-files) in a folder called `images` in their jar. When I now try to start a module in java I get the following error:\r\n\r\n    Error occurred during initialization of boot layer\r\n    java.lang.LayerInstantiationException: Package images in both module A and module B\r\n\r\nAlthough my `images` folder is not meant to be a package but is just a folder containing resources. So how can I get two modules with an `images`-folder onto my module-path?","title":"How to add resources to two module jars in same-named folders?","body":"<p>Assuming we have two jar files with two different modules. Both jar-files include some resources (lets say png-files) in a folder called <code>images</code> in their jar. When I now try to start a module in java I get the following error:</p>\n\n<pre><code>Error occurred during initialization of boot layer\njava.lang.LayerInstantiationException: Package images in both module A and module B\n</code></pre>\n\n<p>Although my <code>images</code> folder is not meant to be a package but is just a folder containing resources. So how can I get two modules with an <code>images</code>-folder onto my module-path?</p>\n"},{"tags":["java","jax-rs","swagger","swagger-ui","swagger-2.0"],"answers":[{"tags":[],"owner":{"account_id":13405891,"reputation":106,"user_id":9673941,"display_name":"noltedx"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1551973596,"creation_date":1551973596,"answer_id":55047755,"question_id":49598003,"body_markdown":"Especially to point one of your needs, we are using a replacer-plugin in maven to substitute the hardcoded url:\r\n\r\n````\r\n&lt;!-- replace name of the specification file to show--&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;com.google.code.maven-replacer-plugin&lt;/groupId&gt;\r\n                &lt;artifactId&gt;replacer&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;prepare-package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;replace&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;file&gt;${project.build.directory}/swagger-ui/META-INF/resources/webjars/swagger-ui/${swagger-ui.version}/index.html&lt;/file&gt;\r\n                    &lt;replacements&gt;\r\n                        &lt;replacement&gt;\r\n                            &lt;token&gt;&quot;https://petstore.swagger.io/v2/swagger.json&quot;&lt;/token&gt;\r\n                            &lt;value&gt;location.protocol + &#39;//&#39; + location.hostname+&#39;:&#39;+location.port+&#39;/${project.artifactId}-${project.version}/Your-URL/openapi.json&#39;&lt;/value&gt;\r\n                        &lt;/replacement&gt;\r\n                    &lt;/replacements&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n````","title":"configure swagger-ui with maven","body":"<p>Especially to point one of your needs, we are using a replacer-plugin in maven to substitute the hardcoded url:</p>\n\n<pre><code>&lt;!-- replace name of the specification file to show--&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.google.code.maven-replacer-plugin&lt;/groupId&gt;\n                &lt;artifactId&gt;replacer&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;prepare-package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;replace&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;file&gt;${project.build.directory}/swagger-ui/META-INF/resources/webjars/swagger-ui/${swagger-ui.version}/index.html&lt;/file&gt;\n                    &lt;replacements&gt;\n                        &lt;replacement&gt;\n                            &lt;token&gt;\"https://petstore.swagger.io/v2/swagger.json\"&lt;/token&gt;\n                            &lt;value&gt;location.protocol + '//' + location.hostname+':'+location.port+'/${project.artifactId}-${project.version}/Your-URL/openapi.json'&lt;/value&gt;\n                        &lt;/replacement&gt;\n                    &lt;/replacements&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22500,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":55047755,"answer_count":1,"score":11,"last_activity_date":1633721028,"creation_date":1522585324,"question_id":49598003,"body_markdown":"I am integrating my JAX-RS REST project with Swagger.\r\nI read many documentation and tutorials and my favourite figure is the following (thanks to [Philipp Hauer&#39;s blog][1]):\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThat image helped me a lot to understand how Swagger works.\r\n\r\nAfter I have learned how Swagger works I modified my `pom.xml`.\r\n\r\nI added `swagger-jersey2-jaxrs` dependencies to my project which enable me to use the related [swagger annotations][3]:\r\n\r\n\r\n    &lt;!-- for Swagger-Core Annotations --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.swagger&lt;/groupId&gt;\r\n        &lt;artifactId&gt;swagger-jersey2-jaxrs&lt;/artifactId&gt;\r\n        &lt;version&gt;1.5.13&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n**Important:** I am not able to use the latest 1.15.18 swagger-jersey2-jaxrs dependency because the guava library belongs to this dependency made a serious classloader issue with the latest (v5.181) [Payara][4] appserver:\r\n\r\n      Exception Occurred :Error occurred during deployment: Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: java.lang.NoSuchMethodError: com.google.common.collect.Sets$SetView.iterator()Lcom/google/common/collect/UnmodifiableIterator;. Please see server.log for more details. ]]\r\n\r\n \r\nAnyway, added the following plugin to my pom.xml as well which download the `swagger-ui` part and unpack it to the maven target folder:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;com.googlecode.maven-download-plugin&lt;/groupId&gt;\r\n        &lt;artifactId&gt;download-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;1.4.0&lt;/version&gt;\r\n        &lt;executions&gt;\r\n            &lt;execution&gt;\r\n                &lt;id&gt;swagger-ui&lt;/id&gt;\r\n                &lt;phase&gt;prepare-package&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;wget&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;url&gt;https://github.com/swagger-api/swagger-ui/archive/v${version.swagger-ui}.tar.gz&lt;/url&gt;\r\n                    &lt;unpack&gt;true&lt;/unpack&gt;\r\n                    &lt;outputDirectory&gt;${project.build.directory}&lt;/outputDirectory&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n\r\nHere my issue was that I am behind proxy server so I had to add HTTPS proxy configuration to maven setting.xml.\r\n\r\nFinnaly I added `maven-war-plugin` to the pom.xml which copy the swagger-ui related static files to my final war file:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.2.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n            &lt;warName&gt;${project.build.finalName}&lt;/warName&gt;\r\n            &lt;webappDirectory&gt;${basedir}/target/${project.build.finalName}&lt;/webappDirectory&gt;\r\n            &lt;webResources&gt;\r\n                &lt;webResource&gt;\r\n                    &lt;directory&gt;${project.build.directory}/swagger-ui-${version.swagger-ui}/dist&lt;/directory&gt;\r\n                    &lt;targetPath&gt;swagger&lt;/targetPath&gt;\r\n                &lt;/webResource&gt;\r\n            &lt;/webResources&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nI initialize swagger documentation generator with the following code:\r\n\r\n    @ApplicationPath(&quot;api&quot;)\r\n    public class Configurator extends Application {\r\n        public Configurator() {\r\n            BeanConfig beanConfig = new BeanConfig();\r\n            beanConfig.setVersion(&quot;1.0.0&quot;);\r\n            beanConfig.setSchemes(new String[]{&quot;http&quot;});\r\n            beanConfig.setHost(&quot;localhost:8080&quot;);\r\n            beanConfig.setBasePath(&quot;my-rest-1.0.0/api&quot;);\r\n            beanConfig.setResourcePackage(EchoRest.class.getPackage().getName());\r\n            beanConfig.setTitle(&quot;JAX-RS + Swagger and Swagger UI Example&quot;);\r\n            beanConfig.setDescription(&quot;Sample RESTful API built using JAX-RS, Swagger and Swagger UI&quot;);\r\n            beanConfig.setScan(true);\r\n        }\r\n    }\r\n\r\nIt works fine, the http://localhost:8080/my-rest-1.2.0/api/swagger.json returns with a proper swagger documentation.\r\n\r\n**BUT** \r\n\r\n 1. I need to overwrite the hardcoded url value in the JavaScript part of the `swagger/index.html` file from the default http://petstore.swagger.io/v2/swagger.json to my URL. I download and copy swagger-ui via maven plugins automatically but I do not know how to change the value of the URL variable automatically during compiling with maven.\r\n 2. The name of my WAR file depends on the version information used in maven pom.xml. That means that the hard-coded version, host and base-path used in `Configurator` class wont be correct after a while. Can I generate this values automatically based on the application root url and the value from @ApplicationPath(&quot;api&quot;) annotation?\r\n\r\n  [1]: https://blog.philipphauer.de/enriching-restful-services-swagger/\r\n  [2]: https://i.stack.imgur.com/viQ9z.png\r\n  [3]: https://github.com/swagger-api/swagger-core/wiki/annotations\r\n  [4]: https://www.payara.fish/downloads\r\n\r\n\r\n","title":"configure swagger-ui with maven","body":"<p>I am integrating my JAX-RS REST project with Swagger.\nI read many documentation and tutorials and my favourite figure is the following (thanks to <a href=\"https://blog.philipphauer.de/enriching-restful-services-swagger/\" rel=\"nofollow noreferrer\">Philipp Hauer's blog</a>):</p>\n<p><a href=\"https://i.stack.imgur.com/viQ9z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/viQ9z.png\" alt=\"enter image description here\" /></a></p>\n<p>That image helped me a lot to understand how Swagger works.</p>\n<p>After I have learned how Swagger works I modified my <code>pom.xml</code>.</p>\n<p>I added <code>swagger-jersey2-jaxrs</code> dependencies to my project which enable me to use the related <a href=\"https://github.com/swagger-api/swagger-core/wiki/annotations\" rel=\"nofollow noreferrer\">swagger annotations</a>:</p>\n<pre><code>&lt;!-- for Swagger-Core Annotations --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.swagger&lt;/groupId&gt;\n    &lt;artifactId&gt;swagger-jersey2-jaxrs&lt;/artifactId&gt;\n    &lt;version&gt;1.5.13&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>Important:</strong> I am not able to use the latest 1.15.18 swagger-jersey2-jaxrs dependency because the guava library belongs to this dependency made a serious classloader issue with the latest (v5.181) <a href=\"https://www.payara.fish/downloads\" rel=\"nofollow noreferrer\">Payara</a> appserver:</p>\n<pre><code>  Exception Occurred :Error occurred during deployment: Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: java.lang.NoSuchMethodError: com.google.common.collect.Sets$SetView.iterator()Lcom/google/common/collect/UnmodifiableIterator;. Please see server.log for more details. ]]\n</code></pre>\n<p>Anyway, added the following plugin to my pom.xml as well which download the <code>swagger-ui</code> part and unpack it to the maven target folder:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;com.googlecode.maven-download-plugin&lt;/groupId&gt;\n    &lt;artifactId&gt;download-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.4.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;swagger-ui&lt;/id&gt;\n            &lt;phase&gt;prepare-package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;wget&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;url&gt;https://github.com/swagger-api/swagger-ui/archive/v${version.swagger-ui}.tar.gz&lt;/url&gt;\n                &lt;unpack&gt;true&lt;/unpack&gt;\n                &lt;outputDirectory&gt;${project.build.directory}&lt;/outputDirectory&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Here my issue was that I am behind proxy server so I had to add HTTPS proxy configuration to maven setting.xml.</p>\n<p>Finnaly I added <code>maven-war-plugin</code> to the pom.xml which copy the swagger-ui related static files to my final war file:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.2.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;warName&gt;${project.build.finalName}&lt;/warName&gt;\n        &lt;webappDirectory&gt;${basedir}/target/${project.build.finalName}&lt;/webappDirectory&gt;\n        &lt;webResources&gt;\n            &lt;webResource&gt;\n                &lt;directory&gt;${project.build.directory}/swagger-ui-${version.swagger-ui}/dist&lt;/directory&gt;\n                &lt;targetPath&gt;swagger&lt;/targetPath&gt;\n            &lt;/webResource&gt;\n        &lt;/webResources&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>I initialize swagger documentation generator with the following code:</p>\n<pre><code>@ApplicationPath(&quot;api&quot;)\npublic class Configurator extends Application {\n    public Configurator() {\n        BeanConfig beanConfig = new BeanConfig();\n        beanConfig.setVersion(&quot;1.0.0&quot;);\n        beanConfig.setSchemes(new String[]{&quot;http&quot;});\n        beanConfig.setHost(&quot;localhost:8080&quot;);\n        beanConfig.setBasePath(&quot;my-rest-1.0.0/api&quot;);\n        beanConfig.setResourcePackage(EchoRest.class.getPackage().getName());\n        beanConfig.setTitle(&quot;JAX-RS + Swagger and Swagger UI Example&quot;);\n        beanConfig.setDescription(&quot;Sample RESTful API built using JAX-RS, Swagger and Swagger UI&quot;);\n        beanConfig.setScan(true);\n    }\n}\n</code></pre>\n<p>It works fine, the http://localhost:8080/my-rest-1.2.0/api/swagger.json returns with a proper swagger documentation.</p>\n<p><strong>BUT</strong></p>\n<ol>\n<li>I need to overwrite the hardcoded url value in the JavaScript part of the <code>swagger/index.html</code> file from the default <a href=\"http://petstore.swagger.io/v2/swagger.json\" rel=\"nofollow noreferrer\">http://petstore.swagger.io/v2/swagger.json</a> to my URL. I download and copy swagger-ui via maven plugins automatically but I do not know how to change the value of the URL variable automatically during compiling with maven.</li>\n<li>The name of my WAR file depends on the version information used in maven pom.xml. That means that the hard-coded version, host and base-path used in <code>Configurator</code> class wont be correct after a while. Can I generate this values automatically based on the application root url and the value from @ApplicationPath(&quot;api&quot;) annotation?</li>\n</ol>\n"},{"tags":["java","spring","spring-mvc","spring-security"],"answers":[{"tags":[],"owner":{"account_id":1781649,"reputation":577,"user_id":1624212,"display_name":"mingchuno"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1430187191,"creation_date":1430187191,"answer_id":29909119,"question_id":29888458,"body_markdown":"The issue is in the RoleHierachy, which should be like this:\r\n\r\n    @Bean\r\n    public RoleHierarchy roleHierarchy() {\r\n      RoleHierarchyImpl r = new RoleHierarchyImpl();\r\n      r.setHierarchy(&quot;ROLE_ADMIN &gt; ROLE_STAFF and ROLE_ADMIN &gt; ROLE_DEVELOPER and ROLE_STAFF &gt; ROLE_USER and ROLE_DEVELOPER &gt; ROLE_USER&quot;);\r\n      return r;\r\n    }\r\n\r\nkeep calling `setHierarchy()` will override the setting before","title":"Spring Security Role Hierarchy not working using Java Config","body":"<p>The issue is in the RoleHierachy, which should be like this:</p>\n\n<pre><code>@Bean\npublic RoleHierarchy roleHierarchy() {\n  RoleHierarchyImpl r = new RoleHierarchyImpl();\n  r.setHierarchy(\"ROLE_ADMIN &gt; ROLE_STAFF and ROLE_ADMIN &gt; ROLE_DEVELOPER and ROLE_STAFF &gt; ROLE_USER and ROLE_DEVELOPER &gt; ROLE_USER\");\n  return r;\n}\n</code></pre>\n\n<p>keep calling <code>setHierarchy()</code> will override the setting before</p>\n"},{"tags":[],"owner":{"account_id":5629922,"reputation":1670,"user_id":4457155,"display_name":"Lord Nighton"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1442430560,"creation_date":1442429942,"answer_id":32616604,"question_id":29888458,"body_markdown":"Everytime I want to implement a hierarchy of roles with Spring Security and Java config, I use the following approach:\r\n\r\n 1. We have to add a **RoleHierarchyImpl** bean into context (You see, that I use **multiple roles** to build a hierarchy):   \r\n\r\n        @Bean\r\n        public RoleHierarchyImpl roleHierarchy() {\r\n            RoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\r\n            roleHierarchy.setHierarchy(&quot;ROLE_ADMIN &gt; ROLE_DBA ROLE_DBA &gt; ROLE_USER &quot;);\r\n            return roleHierarchy;\r\n        }\r\n\r\n 2. Then we need to create web expression handler to pass obtained hierarchy to it:\r\n\r\n        private SecurityExpressionHandler&lt;FilterInvocation&gt; webExpressionHandler() {\r\n            DefaultWebSecurityExpressionHandler defaultWebSecurityExpressionHandler = new DefaultWebSecurityExpressionHandler();\r\n            defaultWebSecurityExpressionHandler.setRoleHierarchy(roleHierarchy());\r\n            return defaultWebSecurityExpressionHandler;\r\n        }\r\n\r\n 3. The final step is to add expressionHandler into http.authorizeRequests():\r\n\r\n                @Override\r\n                protected void configure(HttpSecurity http) throws Exception {\r\n                    http\r\n                       .authorizeRequests()\r\n                            .expressionHandler(webExpressionHandler())\r\n                            .antMatchers(&quot;/admin/**&quot;).access(&quot;(hasRole(&#39;ROLE_ADMIN&#39;) or hasRole(&#39;ROLE_DBA&#39;)) and isFullyAuthenticated()&quot;)\r\n                            .antMatchers(&quot;/dba&quot;).access(&quot;hasRole(&#39;ROLE_DBA&#39;) and isFullyAuthenticated()&quot;)\r\n                            .antMatchers(&quot;/dba/**&quot;).access(&quot;hasRole(&#39;ROLE_USER&#39;)&quot;)\r\n                            .and()\r\n                       .requiresChannel()\r\n                            .antMatchers(&quot;/security/**&quot;).requiresSecure()\r\n                            .anyRequest().requiresInsecure()\r\n                            .and()\r\n                       .formLogin()\r\n                            .loginPage(&quot;/login&quot;)\r\n                            .failureUrl(&quot;/login?auth=fail&quot;)\r\n                            .usernameParameter(&quot;username&quot;)\r\n                            .passwordParameter(&quot;password&quot;)\r\n                            .defaultSuccessUrl(&quot;/admin&quot;)\r\n                            .permitAll()\r\n                            .and()\r\n                       .logout()\r\n                                .logoutUrl(&quot;/logout&quot;)\r\n                                .deleteCookies(&quot;remember-me&quot;)\r\n                                .invalidateHttpSession(true)\r\n                                .logoutSuccessUrl(&quot;/index&quot;)\r\n                                .permitAll()\r\n                                .and()\r\n                       .csrf()\r\n                                .and()\r\n                       .rememberMe().tokenValiditySeconds(1209600)\r\n                                .and()\r\n                       .exceptionHandling().accessDeniedPage(&quot;/403&quot;)\r\n                                .and()\r\n                       .anonymous().disable()\r\n                       .addFilter(switchUserFilter());\r\n                }\r\n\r\n**Result:** in this particular example we try to visit **/dba** section after we have logged in using admin user (ROLE_ADMIN). Before we created a hierarchy, we had an access denied result, but now we can visit this section without any problems.","title":"Spring Security Role Hierarchy not working using Java Config","body":"<p>Everytime I want to implement a hierarchy of roles with Spring Security and Java config, I use the following approach:</p>\n\n<ol>\n<li><p>We have to add a <strong>RoleHierarchyImpl</strong> bean into context (You see, that I use <strong>multiple roles</strong> to build a hierarchy):   </p>\n\n<pre><code>@Bean\npublic RoleHierarchyImpl roleHierarchy() {\n    RoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\n    roleHierarchy.setHierarchy(\"ROLE_ADMIN &gt; ROLE_DBA ROLE_DBA &gt; ROLE_USER \");\n    return roleHierarchy;\n}\n</code></pre></li>\n<li><p>Then we need to create web expression handler to pass obtained hierarchy to it:</p>\n\n<pre><code>private SecurityExpressionHandler&lt;FilterInvocation&gt; webExpressionHandler() {\n    DefaultWebSecurityExpressionHandler defaultWebSecurityExpressionHandler = new DefaultWebSecurityExpressionHandler();\n    defaultWebSecurityExpressionHandler.setRoleHierarchy(roleHierarchy());\n    return defaultWebSecurityExpressionHandler;\n}\n</code></pre></li>\n<li><p>The final step is to add expressionHandler into http.authorizeRequests():</p>\n\n<pre><code>        @Override\n        protected void configure(HttpSecurity http) throws Exception {\n            http\n               .authorizeRequests()\n                    .expressionHandler(webExpressionHandler())\n                    .antMatchers(\"/admin/**\").access(\"(hasRole('ROLE_ADMIN') or hasRole('ROLE_DBA')) and isFullyAuthenticated()\")\n                    .antMatchers(\"/dba\").access(\"hasRole('ROLE_DBA') and isFullyAuthenticated()\")\n                    .antMatchers(\"/dba/**\").access(\"hasRole('ROLE_USER')\")\n                    .and()\n               .requiresChannel()\n                    .antMatchers(\"/security/**\").requiresSecure()\n                    .anyRequest().requiresInsecure()\n                    .and()\n               .formLogin()\n                    .loginPage(\"/login\")\n                    .failureUrl(\"/login?auth=fail\")\n                    .usernameParameter(\"username\")\n                    .passwordParameter(\"password\")\n                    .defaultSuccessUrl(\"/admin\")\n                    .permitAll()\n                    .and()\n               .logout()\n                        .logoutUrl(\"/logout\")\n                        .deleteCookies(\"remember-me\")\n                        .invalidateHttpSession(true)\n                        .logoutSuccessUrl(\"/index\")\n                        .permitAll()\n                        .and()\n               .csrf()\n                        .and()\n               .rememberMe().tokenValiditySeconds(1209600)\n                        .and()\n               .exceptionHandling().accessDeniedPage(\"/403\")\n                        .and()\n               .anonymous().disable()\n               .addFilter(switchUserFilter());\n        }\n</code></pre></li>\n</ol>\n\n<p><strong>Result:</strong> in this particular example we try to visit <strong>/dba</strong> section after we have logged in using admin user (ROLE_ADMIN). Before we created a hierarchy, we had an access denied result, but now we can visit this section without any problems.</p>\n"},{"tags":[],"owner":{"account_id":2545532,"reputation":41,"user_id":2210419,"display_name":"user2210419"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1465568638,"creation_date":1465566805,"answer_id":37750067,"question_id":29888458,"body_markdown":"I don&#39;t use Spring RoleHierarchy - because it doea not work for me.\r\nBut Ussualy I do like this:\r\nDefine Role interface\r\n\r\n    public static interface Role {\r\n      String getName();\r\n      List&lt;String&gt; getHierarchy();\r\n    }\r\n\r\nList of my roles (to store in DB):\r\n\r\n    public interface AuthStates {\r\n      // Spring security works fine only with ROLE_*** prefix\r\n      String ANONYMOUS = &quot;ROLE_ANONYMOUS&quot;;\r\n      String AUTHENTICATED = &quot;ROLE_AUTHENTICATED&quot;;\r\n      String ADMINISTRATOR = &quot;ROLE_ADMINISTRATOR&quot;;\r\n    }\r\n\r\nDefine Anonymous role as basic role class:\r\n\r\n    public static class Anonymous implements Role {\r\n      private final String name;\r\n      private final List&lt;String&gt; hierarchy = Lists.newArrayList(ANONYMOUS);\r\n\r\n      public Anonymous() {\r\n        this(ANONYMOUS);\r\n      }\r\n\r\n      protected Anonymous(String name) {\r\n        this.name = name;\r\n      }\r\n\r\n      @Override\r\n      public String getName() {\r\n        return name;\r\n      }\r\n\r\n      @Override\r\n      public List&lt;String&gt; getHierarchy() {\r\n        return hierarchy;\r\n      }\r\n\r\n      protected void addHierarchy(String name) {\r\n        hierarchy.add(name);\r\n      }\r\n    }\r\n\r\nDefine Authenticated role (common user role):\r\n\r\n    public static class Authenticated extends Anonymous {\r\n      public Authenticated() {\r\n        this(AUTHENTICATED);\r\n      }\r\n\r\n      protected Authenticated(String name) {\r\n        super(name);\r\n        addHierarchy(AUTHENTICATED);\r\n      }\r\n    }\r\n\r\nDefine Administrator role (at the top of the evolution):\r\n\r\n    public static class Administrator extends Authenticated {\r\n      public Administrator() {\r\n        this(ADMINISTRATOR);\r\n      }\r\n\r\n      protected Administrator(String name) {\r\n        super(name);\r\n        addHierarchy(ADMINISTRATOR);\r\n      }\r\n    }\r\n\r\nOptional - static factory class:\r\n\r\n    public static Role getRole(String authState) {\r\n      switch (authState) {\r\n        case ANONYMOUS: return new Anonymous();\r\n        case AUTHENTICATED: return new Authenticated();\r\n        case ADMINISTRATOR: return new Administrator();\r\n        default: throw new IllegalArgumentException(&quot;Wrong auth state&quot;);\r\n      }\r\n    }\r\n\r\nIn my CustomUserDetailsService (which implements UserDetailsService) I use role like this:\r\n\r\n    private Collection&lt;GrantedAuthority&gt; createAuthority(User user) {\r\n      final List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\n      AuthStates.Role userAuthState = AuthStates.getRole(user.getAuthState());\r\n      for (String role : userAuthState.getHierarchy()) {\r\n        authorities.add(new SimpleGrantedAuthority(role));\r\n      }\r\n      return authorities;\r\n    }\r\n\r\n[authorities][1]\r\n\r\nIn controllers:\r\n\r\n    @PreAuthorize(&quot;hasRole(&#39;ROLE_AUTHENTICATED&#39;)&quot;)\r\n\r\nWill allow user logged in as ROLE_AUTHENTICATED and ROLE_ADMINISTRATOR both.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8Gs7n.png","title":"Spring Security Role Hierarchy not working using Java Config","body":"<p>I don't use Spring RoleHierarchy - because it doea not work for me.\nBut Ussualy I do like this:\nDefine Role interface</p>\n\n<pre><code>public static interface Role {\n  String getName();\n  List&lt;String&gt; getHierarchy();\n}\n</code></pre>\n\n<p>List of my roles (to store in DB):</p>\n\n<pre><code>public interface AuthStates {\n  // Spring security works fine only with ROLE_*** prefix\n  String ANONYMOUS = \"ROLE_ANONYMOUS\";\n  String AUTHENTICATED = \"ROLE_AUTHENTICATED\";\n  String ADMINISTRATOR = \"ROLE_ADMINISTRATOR\";\n}\n</code></pre>\n\n<p>Define Anonymous role as basic role class:</p>\n\n<pre><code>public static class Anonymous implements Role {\n  private final String name;\n  private final List&lt;String&gt; hierarchy = Lists.newArrayList(ANONYMOUS);\n\n  public Anonymous() {\n    this(ANONYMOUS);\n  }\n\n  protected Anonymous(String name) {\n    this.name = name;\n  }\n\n  @Override\n  public String getName() {\n    return name;\n  }\n\n  @Override\n  public List&lt;String&gt; getHierarchy() {\n    return hierarchy;\n  }\n\n  protected void addHierarchy(String name) {\n    hierarchy.add(name);\n  }\n}\n</code></pre>\n\n<p>Define Authenticated role (common user role):</p>\n\n<pre><code>public static class Authenticated extends Anonymous {\n  public Authenticated() {\n    this(AUTHENTICATED);\n  }\n\n  protected Authenticated(String name) {\n    super(name);\n    addHierarchy(AUTHENTICATED);\n  }\n}\n</code></pre>\n\n<p>Define Administrator role (at the top of the evolution):</p>\n\n<pre><code>public static class Administrator extends Authenticated {\n  public Administrator() {\n    this(ADMINISTRATOR);\n  }\n\n  protected Administrator(String name) {\n    super(name);\n    addHierarchy(ADMINISTRATOR);\n  }\n}\n</code></pre>\n\n<p>Optional - static factory class:</p>\n\n<pre><code>public static Role getRole(String authState) {\n  switch (authState) {\n    case ANONYMOUS: return new Anonymous();\n    case AUTHENTICATED: return new Authenticated();\n    case ADMINISTRATOR: return new Administrator();\n    default: throw new IllegalArgumentException(\"Wrong auth state\");\n  }\n}\n</code></pre>\n\n<p>In my CustomUserDetailsService (which implements UserDetailsService) I use role like this:</p>\n\n<pre><code>private Collection&lt;GrantedAuthority&gt; createAuthority(User user) {\n  final List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\n  AuthStates.Role userAuthState = AuthStates.getRole(user.getAuthState());\n  for (String role : userAuthState.getHierarchy()) {\n    authorities.add(new SimpleGrantedAuthority(role));\n  }\n  return authorities;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/8Gs7n.png\" rel=\"nofollow\">authorities</a></p>\n\n<p>In controllers:</p>\n\n<pre><code>@PreAuthorize(\"hasRole('ROLE_AUTHENTICATED')\")\n</code></pre>\n\n<p>Will allow user logged in as ROLE_AUTHENTICATED and ROLE_ADMINISTRATOR both.</p>\n"},{"tags":[],"owner":{"account_id":409144,"reputation":2185,"user_id":780225,"accept_rate":90,"display_name":"David Rz Ayala"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1468557338,"creation_date":1468557338,"answer_id":38387923,"question_id":29888458,"body_markdown":"Override the `createExpressionHandler` method so it returns a configured global expression handler\r\n\r\n\r\n      @Configuration\r\n      @EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\r\n      public class GlobalMethodSecurityConfig extends GlobalMethodSecurityConfiguration {\r\n          @Autowired\r\n          private RoleHierarchy roleHierarchy;\r\n\r\n          @Override\r\n          protected MethodSecurityExpressionHandler createExpressionHandler(){\r\n              return methodSecurityExpressionHandler();\r\n          }\r\n\r\n          private DefaultMethodSecurityExpressionHandler methodSecurityExpressionHandler(){\r\n              DefaultMethodSecurityExpressionHandler expressionHandler = new DefaultMethodSecurityExpressionHandler();\r\n              expressionHandler.setRoleHierarchy(roleHierarchy);\r\n              return expressionHandler;\r\n          }\r\n\r\n          @Bean\r\n          public RoleHierarchyImpl roleHierarchy() {\r\n              RoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\r\n          roleHierarchy.setHierarchy(&quot;ROLE_ADMIN &gt; ROLE_OWNER &gt; ROLE_USER&quot;);\r\n              return roleHierarchy;\r\n          }\r\n\r\n          @Bean\r\n          public RoleHierarchyVoter roleVoter() {\r\n              return new RoleHierarchyVoter(roleHierarchy);\r\n          }\r\n\r\n          @Configuration\r\n          public static class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n              @Override\r\n              protected void configure(HttpSecurity http) throws Exception {}\r\n          }\r\n      }","title":"Spring Security Role Hierarchy not working using Java Config","body":"<p>Override the <code>createExpressionHandler</code> method so it returns a configured global expression handler</p>\n\n<pre><code>  @Configuration\n  @EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\n  public class GlobalMethodSecurityConfig extends GlobalMethodSecurityConfiguration {\n      @Autowired\n      private RoleHierarchy roleHierarchy;\n\n      @Override\n      protected MethodSecurityExpressionHandler createExpressionHandler(){\n          return methodSecurityExpressionHandler();\n      }\n\n      private DefaultMethodSecurityExpressionHandler methodSecurityExpressionHandler(){\n          DefaultMethodSecurityExpressionHandler expressionHandler = new DefaultMethodSecurityExpressionHandler();\n          expressionHandler.setRoleHierarchy(roleHierarchy);\n          return expressionHandler;\n      }\n\n      @Bean\n      public RoleHierarchyImpl roleHierarchy() {\n          RoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\n      roleHierarchy.setHierarchy(\"ROLE_ADMIN &gt; ROLE_OWNER &gt; ROLE_USER\");\n          return roleHierarchy;\n      }\n\n      @Bean\n      public RoleHierarchyVoter roleVoter() {\n          return new RoleHierarchyVoter(roleHierarchy);\n      }\n\n      @Configuration\n      public static class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n          @Override\n          protected void configure(HttpSecurity http) throws Exception {}\n      }\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":484389,"reputation":1888,"user_id":900026,"display_name":"Vitaliy Polchuk"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1511186193,"creation_date":1511185009,"answer_id":47393352,"question_id":29888458,"body_markdown":"For me the solution was having proper bean name for the instance of `DefaultWebSecurityExpressionHandler`. The name should be `webSecurityExpressionHandler`.\r\n\r\n\t@Bean\r\n\tpublic RoleHierarchyImpl roleHierarchy() {\r\n\t\tRoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\r\n\t\troleHierarchy.setHierarchy(Roles.getRoleHierarchy());\r\n\t\treturn roleHierarchy;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic DefaultWebSecurityExpressionHandler webSecurityExpressionHandler() {\r\n\t\tDefaultWebSecurityExpressionHandler expressionHandler = new DefaultWebSecurityExpressionHandler();\r\n\t\texpressionHandler.setRoleHierarchy(roleHierarchy());\r\n\t\treturn expressionHandler;\r\n\t}\r\n\r\n\t@Override\r\n\tprotected void configure(HttpSecurity http) throws Exception {\r\n\t\thttp.authorizeRequests()\r\n\t\t\t\t.expressionHandler(webSecurityExpressionHandler())\r\n\t\t\t\t...\r\n\t}","title":"Spring Security Role Hierarchy not working using Java Config","body":"<p>For me the solution was having proper bean name for the instance of <code>DefaultWebSecurityExpressionHandler</code>. The name should be <code>webSecurityExpressionHandler</code>.</p>\n\n<pre><code>@Bean\npublic RoleHierarchyImpl roleHierarchy() {\n    RoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\n    roleHierarchy.setHierarchy(Roles.getRoleHierarchy());\n    return roleHierarchy;\n}\n\n@Bean\npublic DefaultWebSecurityExpressionHandler webSecurityExpressionHandler() {\n    DefaultWebSecurityExpressionHandler expressionHandler = new DefaultWebSecurityExpressionHandler();\n    expressionHandler.setRoleHierarchy(roleHierarchy());\n    return expressionHandler;\n}\n\n@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http.authorizeRequests()\n            .expressionHandler(webSecurityExpressionHandler())\n            ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14367834,"reputation":226,"user_id":10378322,"display_name":"Maran23"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1597219130,"creation_date":1597145823,"answer_id":63357329,"question_id":29888458,"body_markdown":"Note: The accepted answer won&#39;t work in the newest version of Spring security (I think since release 5.2.1). \r\nThis is because the &#39;and&#39; (ROLE_1 &gt; ROLE_2 **and** ROLE_2 &gt; ROLE_3) notation was never an official standard. You could have written every word instead of &#39;and&#39; and it would still work the same in the past versions. \r\n\r\nInstead, in the new version you should now use &#39;\\n&#39; (new line), e.g. ROLE_1 &gt; ROLE_2\\nROLE2 &gt; ROLE_3 ...","title":"Spring Security Role Hierarchy not working using Java Config","body":"<p>Note: The accepted answer won't work in the newest version of Spring security (I think since release 5.2.1).\nThis is because the 'and' (ROLE_1 &gt; ROLE_2 <strong>and</strong> ROLE_2 &gt; ROLE_3) notation was never an official standard. You could have written every word instead of 'and' and it would still work the same in the past versions.</p>\n<p>Instead, in the new version you should now use '\\n' (new line), e.g. ROLE_1 &gt; ROLE_2\\nROLE2 &gt; ROLE_3 ...</p>\n"},{"tags":[],"owner":{"account_id":10878966,"reputation":734,"user_id":8000120,"display_name":"J. Jerez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633720799,"creation_date":1633720799,"answer_id":69500814,"question_id":29888458,"body_markdown":"Correct format is: `ROLE_A &gt; ROLE_B and ROLE_B &gt; ROLE_C.` see [doc][1].\r\n\r\n    @Bean\r\n\tpublic RoleHierarchy roleHierarchy() {\r\n\t\tRoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\r\n\t\troleHierarchy.setHierarchy(UserRole.ROLE_HIERARCHY);\r\n\t\treturn roleHierarchy;\r\n\t}\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/4.0.x/apidocs/org/springframework/security/access/hierarchicalroles/RoleHierarchy.html#getReachableGrantedAuthorities-java.util","title":"Spring Security Role Hierarchy not working using Java Config","body":"<p>Correct format is: <code>ROLE_A &gt; ROLE_B and ROLE_B &gt; ROLE_C.</code> see <a href=\"https://docs.spring.io/spring-security/site/docs/4.0.x/apidocs/org/springframework/security/access/hierarchicalroles/RoleHierarchy.html#getReachableGrantedAuthorities-java.util\" rel=\"nofollow noreferrer\">doc</a>.</p>\n<pre><code>@Bean\npublic RoleHierarchy roleHierarchy() {\n    RoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\n    roleHierarchy.setHierarchy(UserRole.ROLE_HIERARCHY);\n    return roleHierarchy;\n}\n</code></pre>\n"}],"owner":{"account_id":1781649,"reputation":577,"user_id":1624212,"display_name":"mingchuno"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17137,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":29909119,"answer_count":7,"score":13,"last_activity_date":1633720799,"creation_date":1430115327,"question_id":29888458,"body_markdown":"First of all, I am new to Java Spring Framework. So forgive me if I did not provide enough info. I have tried to add RoleHierarchy into my app but it did not work. Below are the codes I have tried.\r\n\r\n\r\n----------\r\n\r\n\r\n**SecurityConfig.java**\r\n\r\n    // These config is try to set up a user Role Hierarchy\r\n    @Bean\r\n    public RoleHierarchy roleHierarchy() {\r\n      System.out.println(&quot;arrive public RoleHierarchy roleHierarchy()&quot;);\r\n      RoleHierarchyImpl r = new RoleHierarchyImpl();\r\n      r.setHierarchy(&quot;ROLE_ADMIN &gt; ROLE_STAFF&quot;);\r\n      r.setHierarchy(&quot;ROLE_STAFF &gt; ROLE_USER&quot;);\r\n      r.setHierarchy(&quot;ROLE_DEVELOPER &gt; ROLE_USER&quot;);\r\n      r.setHierarchy(&quot;ROLE_USER &gt; ROLE_GUEST&quot;); \r\n      return r;\r\n    }\r\n\r\n    @Bean\r\n    public AffirmativeBased defaultAccessDecisionManager(RoleHierarchy roleHierarchy){\r\n      System.out.println(&quot;arrive public AffirmativeBased defaultAccessDecisionManager()&quot;);\r\n      List&lt;AccessDecisionVoter&gt; decisionVoters = new ArrayList&lt;&gt;();\r\n\r\n      // webExpressionVoter\r\n      WebExpressionVoter webExpressionVoter = new WebExpressionVoter();\r\n      DefaultWebSecurityExpressionHandler\r\n          expressionHandler = new DefaultWebSecurityExpressionHandler();\r\n      expressionHandler.setRoleHierarchy(roleHierarchy);\r\n      webExpressionVoter.setExpressionHandler(expressionHandler);\r\n\r\n      decisionVoters.add(webExpressionVoter);\r\n      decisionVoters.add(roleHierarchyVoter(roleHierarchy));\r\n      // return new AffirmativeBased(Arrays.asList((AccessDecisionVoter) webExpressionVoter));\r\n      return new AffirmativeBased(decisionVoters);\r\n    }\r\n\r\n    @Bean\r\n    public RoleHierarchyVoter roleHierarchyVoter(RoleHierarchy roleHierarchy) {\r\n      System.out.println(&quot;arrive public RoleHierarchyVoter roleHierarchyVoter&quot;);\r\n      return new RoleHierarchyVoter(roleHierarchy);\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n      // skipping some codes\r\n      http\r\n        // skipping some codes\r\n        .accessDecisionManager(defaultAccessDecisionManager(roleHierarchy()))\r\n      // skipping some codes\r\n    }\r\n\r\n\r\n----------\r\n\r\n\r\n**MethodSecurityConfig.java**\r\n\r\n    @Configuration\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true, proxyTargetClass = true)\r\n    public class MethodSecurityConfig extends GlobalMethodSecurityConfiguration {\r\n\r\n      @Inject\r\n      private SecurityConfig securityConfig;\r\n\r\n      @Override\r\n      protected AuthenticationManager authenticationManager() throws Exception {\r\n        return securityConfig.authenticationManagerBean();\r\n      }\r\n\r\n      @Override\r\n      protected MethodSecurityExpressionHandler createExpressionHandler() {\r\n        System.out.println(&quot;arrive protected MethodSecurityExpressionHandler createExpressionHandler()&quot;);\r\n        DefaultMethodSecurityExpressionHandler d = new DefaultMethodSecurityExpressionHandler();\r\n        d.setRoleHierarchy(securityConfig.roleHierarchy());\r\n        return d;\r\n      }\r\n\r\n    }\r\n\r\n\r\n----------\r\n\r\n\r\nAnd I have a `UserDetailsServiceImpl implements UserDetailsService` that provide the `principal`, `Authentication` and `GrantedAuthority`\r\n\r\nFinally I have some APIs:\r\n\r\n    @PreAuthorize(&quot;hasRole(&#39;ROLE_STAFF&#39;)&quot;)\r\n    @RequestMapping(value = &quot;/api/v1/contactUs&quot;, method = RequestMethod.GET)\r\n\r\n    @PreAuthorize(&quot;hasRole(&#39;ROLE_DEVELOPER&#39;)&quot;)\r\n    @RequestMapping(value = &quot;/api/v1/system&quot;, method = RequestMethod.GET)\r\n\r\n\r\n----------\r\n\r\n\r\nThe problem is now if I login as ROLE_STAFF, ROLE_DEVELOPER, ROLE_ADMIN, I got the following result.\r\n\r\n    | API       | ROLE_STAFF | ROLE_DEVELOPER | ROLE_ADMIN |\r\n    |-----------|------------|----------------|------------|\r\n    | contactUs | 200        | 403            | 403        |\r\n    | system    | 403        | 200            | 403        |\r\n\r\nAs you can see `ROLE_STAFF` and `ROLE_DEVELOPER` work just fine. But I want `ROLE_ADMIN` as a super role of both and it didn&#39;t work. \r\n\r\nFYI, I am using spring-security 3.2.5.RELEASE\r\n","title":"Spring Security Role Hierarchy not working using Java Config","body":"<p>First of all, I am new to Java Spring Framework. So forgive me if I did not provide enough info. I have tried to add RoleHierarchy into my app but it did not work. Below are the codes I have tried.</p>\n\n<hr>\n\n<p><strong>SecurityConfig.java</strong></p>\n\n<pre><code>// These config is try to set up a user Role Hierarchy\n@Bean\npublic RoleHierarchy roleHierarchy() {\n  System.out.println(\"arrive public RoleHierarchy roleHierarchy()\");\n  RoleHierarchyImpl r = new RoleHierarchyImpl();\n  r.setHierarchy(\"ROLE_ADMIN &gt; ROLE_STAFF\");\n  r.setHierarchy(\"ROLE_STAFF &gt; ROLE_USER\");\n  r.setHierarchy(\"ROLE_DEVELOPER &gt; ROLE_USER\");\n  r.setHierarchy(\"ROLE_USER &gt; ROLE_GUEST\"); \n  return r;\n}\n\n@Bean\npublic AffirmativeBased defaultAccessDecisionManager(RoleHierarchy roleHierarchy){\n  System.out.println(\"arrive public AffirmativeBased defaultAccessDecisionManager()\");\n  List&lt;AccessDecisionVoter&gt; decisionVoters = new ArrayList&lt;&gt;();\n\n  // webExpressionVoter\n  WebExpressionVoter webExpressionVoter = new WebExpressionVoter();\n  DefaultWebSecurityExpressionHandler\n      expressionHandler = new DefaultWebSecurityExpressionHandler();\n  expressionHandler.setRoleHierarchy(roleHierarchy);\n  webExpressionVoter.setExpressionHandler(expressionHandler);\n\n  decisionVoters.add(webExpressionVoter);\n  decisionVoters.add(roleHierarchyVoter(roleHierarchy));\n  // return new AffirmativeBased(Arrays.asList((AccessDecisionVoter) webExpressionVoter));\n  return new AffirmativeBased(decisionVoters);\n}\n\n@Bean\npublic RoleHierarchyVoter roleHierarchyVoter(RoleHierarchy roleHierarchy) {\n  System.out.println(\"arrive public RoleHierarchyVoter roleHierarchyVoter\");\n  return new RoleHierarchyVoter(roleHierarchy);\n}\n\n@Override\nprotected void configure(HttpSecurity http) throws Exception {\n  // skipping some codes\n  http\n    // skipping some codes\n    .accessDecisionManager(defaultAccessDecisionManager(roleHierarchy()))\n  // skipping some codes\n}\n</code></pre>\n\n<hr>\n\n<p><strong>MethodSecurityConfig.java</strong></p>\n\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity(prePostEnabled = true, proxyTargetClass = true)\npublic class MethodSecurityConfig extends GlobalMethodSecurityConfiguration {\n\n  @Inject\n  private SecurityConfig securityConfig;\n\n  @Override\n  protected AuthenticationManager authenticationManager() throws Exception {\n    return securityConfig.authenticationManagerBean();\n  }\n\n  @Override\n  protected MethodSecurityExpressionHandler createExpressionHandler() {\n    System.out.println(\"arrive protected MethodSecurityExpressionHandler createExpressionHandler()\");\n    DefaultMethodSecurityExpressionHandler d = new DefaultMethodSecurityExpressionHandler();\n    d.setRoleHierarchy(securityConfig.roleHierarchy());\n    return d;\n  }\n\n}\n</code></pre>\n\n<hr>\n\n<p>And I have a <code>UserDetailsServiceImpl implements UserDetailsService</code> that provide the <code>principal</code>, <code>Authentication</code> and <code>GrantedAuthority</code></p>\n\n<p>Finally I have some APIs:</p>\n\n<pre><code>@PreAuthorize(\"hasRole('ROLE_STAFF')\")\n@RequestMapping(value = \"/api/v1/contactUs\", method = RequestMethod.GET)\n\n@PreAuthorize(\"hasRole('ROLE_DEVELOPER')\")\n@RequestMapping(value = \"/api/v1/system\", method = RequestMethod.GET)\n</code></pre>\n\n<hr>\n\n<p>The problem is now if I login as ROLE_STAFF, ROLE_DEVELOPER, ROLE_ADMIN, I got the following result.</p>\n\n<pre><code>| API       | ROLE_STAFF | ROLE_DEVELOPER | ROLE_ADMIN |\n|-----------|------------|----------------|------------|\n| contactUs | 200        | 403            | 403        |\n| system    | 403        | 200            | 403        |\n</code></pre>\n\n<p>As you can see <code>ROLE_STAFF</code> and <code>ROLE_DEVELOPER</code> work just fine. But I want <code>ROLE_ADMIN</code> as a super role of both and it didn't work. </p>\n\n<p>FYI, I am using spring-security 3.2.5.RELEASE</p>\n"},{"tags":["java","java-time","chronounit"],"comments":[{"owner":{"account_id":18688943,"reputation":2332,"user_id":13623742,"display_name":"Charlie Armstrong"},"score":3,"creation_date":1633579429,"post_id":69475265,"comment_id":122798533,"body_markdown":"The dates you&#39;ve given are only 5 months apart though.  Do you want it to only consider the year portion of the date?  So 2021-12-31 and 2022-01-01 would be 1 year apart, but 2022-01-01 and 2022-12-31 would be 0 years apart?  This part of your question could be made clearer.","body":"The dates you&#39;ve given are only 5 months apart though.  Do you want it to only consider the year portion of the date?  So 2021-12-31 and 2022-01-01 would be 1 year apart, but 2022-01-01 and 2022-12-31 would be 0 years apart?  This part of your question could be made clearer."},{"owner":{"account_id":1306536,"reputation":2406,"user_id":1255433,"accept_rate":63,"display_name":"pappu_kutty"},"score":0,"creation_date":1633579541,"post_id":69475265,"comment_id":122798550,"body_markdown":"i have mentioned , that i need to compare only years not dates in question..","body":"i have mentioned , that i need to compare only years not dates in question.."},{"owner":{"account_id":18688943,"reputation":2332,"user_id":13623742,"display_name":"Charlie Armstrong"},"score":0,"creation_date":1633579617,"post_id":69475265,"comment_id":122798563,"body_markdown":"Got it, I was just a little confused by the wording.  Thank you for clarifying.","body":"Got it, I was just a little confused by the wording.  Thank you for clarifying."}],"answers":[{"tags":[],"owner":{"account_id":18688943,"reputation":2332,"user_id":13623742,"display_name":"Charlie Armstrong"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1633580295,"creation_date":1633580295,"answer_id":69475403,"question_id":69475265,"body_markdown":"If you want to ignore the month and day components of the LocalDate, you can just get the year from each LocalDate and then compare them, like so:\r\n\r\n```java\r\n// Let&#39;s say we have two LocalDates, date1 and date2:\r\nLocalDate date1 = LocalDate.of(2021, 10, 6);\r\nLocalDate date2 = LocalDate.of(2022, 3, 7);\r\n\r\n// We can get the year for each object and then subtract the two years:\r\nlong yearsBetween = date2.getYear() - date1.getYear();\r\n\r\n// This will print 1 because 2022 is 1 year ahead of 2021:\r\nSystem.out.println(yearsBetween);\r\n```\r\n\r\nAs a side note, there is no need for `yearsBetween` to be a long data type (64-bit integer).  The `getYear()` method returns an int (32-bit integer), and I doubt you&#39;ll ever have to deal with years that far in the future.  We can just use:\r\n\r\n```java\r\nint yearsBetween = date2.getYear() - date1.getYear();\r\n```\r\n\r\nYou can then just plug in your dates where `date1` and `date2` are like so:\r\n\r\n```java\r\nint yearsBetween = customDate.toInstant().atZone(ZoneId.systemDefault())\r\n        .toLocalDate().getYear()\r\n        - LocalDate.now().getYear();\r\n```","title":"java chrono unit difference between year","body":"<p>If you want to ignore the month and day components of the LocalDate, you can just get the year from each LocalDate and then compare them, like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Let's say we have two LocalDates, date1 and date2:\nLocalDate date1 = LocalDate.of(2021, 10, 6);\nLocalDate date2 = LocalDate.of(2022, 3, 7);\n\n// We can get the year for each object and then subtract the two years:\nlong yearsBetween = date2.getYear() - date1.getYear();\n\n// This will print 1 because 2022 is 1 year ahead of 2021:\nSystem.out.println(yearsBetween);\n</code></pre>\n<p>As a side note, there is no need for <code>yearsBetween</code> to be a long data type (64-bit integer).  The <code>getYear()</code> method returns an int (32-bit integer), and I doubt you'll ever have to deal with years that far in the future.  We can just use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int yearsBetween = date2.getYear() - date1.getYear();\n</code></pre>\n<p>You can then just plug in your dates where <code>date1</code> and <code>date2</code> are like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int yearsBetween = customDate.toInstant().atZone(ZoneId.systemDefault())\n        .toLocalDate().getYear()\n        - LocalDate.now().getYear();\n</code></pre>\n"}],"owner":{"account_id":1306536,"reputation":2406,"user_id":1255433,"accept_rate":63,"display_name":"pappu_kutty"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":368,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":69475403,"answer_count":1,"score":-1,"last_activity_date":1633720754,"creation_date":1633578914,"question_id":69475265,"body_markdown":"i have below code to get difference between two years.. \r\n\r\n\r\n\t\t\r\n\r\n    long yearsBetween = ChronoUnit.YEARS.between(\r\n    \t\t\t\tcustomDate.toInstant().atZone(ZoneId.systemDefault()).toLocalDate(),\r\n    \t\t\t\tLocalDate.now());\r\n\r\nmy date value is as below\r\n\r\n    customDate = 2022-03-07\r\n    LocalDate.now() = 2021-10-07\r\n\r\nbut when i execute ChronoUnit.YEARS.between, it returns `&quot;0&quot;`, but i am expecting `&quot;1&quot;` as return value. i want to compare only years for the given date and get the difference, excluding days.. \r\n","title":"java chrono unit difference between year","body":"<p>i have below code to get difference between two years..</p>\n<pre><code>long yearsBetween = ChronoUnit.YEARS.between(\n                customDate.toInstant().atZone(ZoneId.systemDefault()).toLocalDate(),\n                LocalDate.now());\n</code></pre>\n<p>my date value is as below</p>\n<pre><code>customDate = 2022-03-07\nLocalDate.now() = 2021-10-07\n</code></pre>\n<p>but when i execute ChronoUnit.YEARS.between, it returns <code>&quot;0&quot;</code>, but i am expecting <code>&quot;1&quot;</code> as return value. i want to compare only years for the given date and get the difference, excluding days..</p>\n"},{"tags":["java","csv","file-io","bufferedwriter"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1633718957,"post_id":69500268,"comment_id":122843882,"body_markdown":"Try use an absolute path, or ask the canonical file path of ~.","body":"Try use an absolute path, or ask the canonical file path of ~."},{"owner":{"account_id":17832421,"reputation":4234,"user_id":12952113,"display_name":"Alex Sveshnikov"},"score":0,"creation_date":1633719283,"post_id":69500268,"comment_id":122843986,"body_markdown":"Files.notExists returns false  if the file exists or its existence cannot be determined. So in your case the existence cannot be determined.","body":"Files.notExists returns false  if the file exists or its existence cannot be determined. So in your case the existence cannot be determined."},{"owner":{"account_id":10547532,"reputation":31,"user_id":7771230,"display_name":"iansumm"},"score":0,"creation_date":1633719584,"post_id":69500268,"comment_id":122844068,"body_markdown":"@Alex, also File.exists returns true","body":"@Alex, also File.exists returns true"},{"owner":{"account_id":10547532,"reputation":31,"user_id":7771230,"display_name":"iansumm"},"score":0,"creation_date":1633719841,"post_id":69500268,"comment_id":122844157,"body_markdown":"@JoopEggen You&#39;re right! Using the absolute path generates an IOException from the BufferedWriter.","body":"@JoopEggen You&#39;re right! Using the absolute path generates an IOException from the BufferedWriter."}],"answers":[{"tags":[],"owner":{"account_id":10547532,"reputation":31,"user_id":7771230,"display_name":"iansumm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633720400,"creation_date":1633720400,"answer_id":69500754,"question_id":69500268,"body_markdown":"As mentioned in the comments, the solution is to get the absolute path. When the absolute path is used the directory permissions are picked up and an IOException is generated. No need to check whether the file exists anymore.\r\n\r\n```\r\npublic void writeCSV(String fileName, List&lt;String&gt; results) throws IOException {\r\n    // fileName = &quot;~/no_write/results.csv&quot;\r\n\r\n    try(CSVPrinter printer = new CSVPrinter(Files.newBufferedWriter(Paths.get(fileName).toAbsolutePath()), CSVFormat.DEFAULT.withHeader(header)) {\r\n        for (String result : results) {\r\n            printer.printRecord(result);\r\n        }\r\n    }\r\n}\r\n```","title":"BufferedWriter does not detect read only directory","body":"<p>As mentioned in the comments, the solution is to get the absolute path. When the absolute path is used the directory permissions are picked up and an IOException is generated. No need to check whether the file exists anymore.</p>\n<pre><code>public void writeCSV(String fileName, List&lt;String&gt; results) throws IOException {\n    // fileName = &quot;~/no_write/results.csv&quot;\n\n    try(CSVPrinter printer = new CSVPrinter(Files.newBufferedWriter(Paths.get(fileName).toAbsolutePath()), CSVFormat.DEFAULT.withHeader(header)) {\n        for (String result : results) {\n            printer.printRecord(result);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10547532,"reputation":31,"user_id":7771230,"display_name":"iansumm"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1633720400,"creation_date":1633717599,"question_id":69500268,"body_markdown":"I have a java application that reads and writes csv files. I have created a read only directory on my Mac that my application will try to write a csv file to. I did this with chmod 000. No file gets created but no error is thrown either. Furthermore, checking that the file was created with Files.notExists() returns False. My application needs to detect that no csv was created to inform the user. What is going on here?\r\n\r\n```\r\npublic void writeCSV(String fileName, List&lt;String&gt; results) throws IOException {\r\n    // fileName = &quot;~/no_write/results.csv&quot;\r\n\r\n    try(CSVPrinter printer = new CSVPrinter(Files.newBufferedWriter(Paths.get(fileName)), CSVFormat.DEFAULT.withHeader(header)) {\r\n        for (String result : results) {\r\n            printer.printRecord(result);\r\n        }\r\n    }\r\n\r\n    if (Files.notExists(Paths.get(fileName))) { // returns False but no_write directory is empty\r\n        throw new IOException();\r\n    }\r\n\r\n    if (!Files.exists(Paths.get(fileName))) { // Files.exists returns True\r\n        throw new IOException();\r\n    }\r\n}\r\n```","title":"BufferedWriter does not detect read only directory","body":"<p>I have a java application that reads and writes csv files. I have created a read only directory on my Mac that my application will try to write a csv file to. I did this with chmod 000. No file gets created but no error is thrown either. Furthermore, checking that the file was created with Files.notExists() returns False. My application needs to detect that no csv was created to inform the user. What is going on here?</p>\n<pre><code>public void writeCSV(String fileName, List&lt;String&gt; results) throws IOException {\n    // fileName = &quot;~/no_write/results.csv&quot;\n\n    try(CSVPrinter printer = new CSVPrinter(Files.newBufferedWriter(Paths.get(fileName)), CSVFormat.DEFAULT.withHeader(header)) {\n        for (String result : results) {\n            printer.printRecord(result);\n        }\n    }\n\n    if (Files.notExists(Paths.get(fileName))) { // returns False but no_write directory is empty\n        throw new IOException();\n    }\n\n    if (!Files.exists(Paths.get(fileName))) { // Files.exists returns True\n        throw new IOException();\n    }\n}\n</code></pre>\n"},{"tags":["java","oop"],"comments":[{"owner":{"account_id":5332007,"reputation":9649,"user_id":4252352,"accept_rate":43,"display_name":"Mark"},"score":0,"creation_date":1633725612,"post_id":69500694,"comment_id":122845817,"body_markdown":"Key word here is state - use a simple 2 step state machine .. transition when applicable .. only one method does anything in each state. Currently you have 2 responsibilities in one class, adding and transfer .. break that up into single responsibilities. You could go even further inside each &quot;state&quot; interface implementation map a state to a command using Command Pattern, so state machine decides what it does, command then executes the action .. Just couple ideas off top my head ..","body":"Key word here is state - use a simple 2 step state machine .. transition when applicable .. only one method does anything in each state. Currently you have 2 responsibilities in one class, adding and transfer .. break that up into single responsibilities. You could go even further inside each &quot;state&quot; interface implementation map a state to a command using Command Pattern, so state machine decides what it does, command then executes the action .. Just couple ideas off top my head .."},{"owner":{"account_id":8556756,"reputation":595,"user_id":6412004,"display_name":"Regyn"},"score":0,"creation_date":1633896337,"post_id":69500694,"comment_id":122876456,"body_markdown":"@MarkKeen Would a state machine even make it easier? I still have to check the state in the endpoint. If you emit the event TRANSFER, but the state isn’t completed, you’d need to have a user facing error. So in the end still checking and setting the state in every endpoint","body":"@MarkKeen Would a state machine even make it easier? I still have to check the state in the endpoint. If you emit the event TRANSFER, but the state isn’t completed, you’d need to have a user facing error. So in the end still checking and setting the state in every endpoint"},{"owner":{"account_id":5332007,"reputation":9649,"user_id":4252352,"accept_rate":43,"display_name":"Mark"},"score":0,"creation_date":1633898806,"post_id":69500694,"comment_id":122876949,"body_markdown":"If you let it get this far without defensive checks you already throw an unchecked exception so I don&#39;t really understand your point about having to tell the user when you can&#39;t validate or complete their request? If a user doesn&#39;t fill in a form correctly is an app supposed to crash or tell them what&#39;s not yet valid? As to your original question, you have added behaviour based on an enum.. as some point, wherever you abstract it, you have to define the behaviour.  My comment suggests design patterns backed up with rationale .. adding your use cases kind of moves the goal posts without context","body":"If you let it get this far without defensive checks you already throw an unchecked exception so I don&#39;t really understand your point about having to tell the user when you can&#39;t validate or complete their request? If a user doesn&#39;t fill in a form correctly is an app supposed to crash or tell them what&#39;s not yet valid? As to your original question, you have added behaviour based on an enum.. as some point, wherever you abstract it, you have to define the behaviour.  My comment suggests design patterns backed up with rationale .. adding your use cases kind of moves the goal posts without context"},{"owner":{"account_id":8556756,"reputation":595,"user_id":6412004,"display_name":"Regyn"},"score":0,"creation_date":1634157140,"post_id":69500694,"comment_id":122953511,"body_markdown":"@MarkKeen Exceptions can have context and be mapped to JSON representations of the error. The examle can easily swap out exceptions, while the state machines can usually only report the transition not existing. When I have to look up source and target and find out what I can show the user it&#39;s kind of like what I have already isn&#39;t it? Not sure what is moving the goal posts there","body":"@MarkKeen Exceptions can have context and be mapped to JSON representations of the error. The examle can easily swap out exceptions, while the state machines can usually only report the transition not existing. When I have to look up source and target and find out what I can show the user it&#39;s kind of like what I have already isn&#39;t it? Not sure what is moving the goal posts there"},{"owner":{"account_id":5332007,"reputation":9649,"user_id":4252352,"accept_rate":43,"display_name":"Mark"},"score":0,"creation_date":1634158554,"post_id":69500694,"comment_id":122953960,"body_markdown":"&quot;Exceptions can have context and be mapped to JSON representations of the error.&quot; -not sure how JSON gets involved specifically. It should really be using checked exceptions if you&#39;re not using defensive checks .. wrapping unchecked exceptions in try/catches seems like a code smell .. as to your original question without architecture rethink you can&#39;t remove checking of state as you have delegates to your container class rather than just telling it what to do. Currently data and logic are coupled .. but that&#39;s not necessarily bad as it&#39;s encapsulated. I&#39;d advocate one class one responsibility","body":"&quot;Exceptions can have context and be mapped to JSON representations of the error.&quot; -not sure how JSON gets involved specifically. It should really be using checked exceptions if you&#39;re not using defensive checks .. wrapping unchecked exceptions in try/catches seems like a code smell .. as to your original question without architecture rethink you can&#39;t remove checking of state as you have delegates to your container class rather than just telling it what to do. Currently data and logic are coupled .. but that&#39;s not necessarily bad as it&#39;s encapsulated. I&#39;d advocate one class one responsibility"},{"owner":{"account_id":8556756,"reputation":595,"user_id":6412004,"display_name":"Regyn"},"score":0,"creation_date":1634158799,"post_id":69500694,"comment_id":122954060,"body_markdown":"So in my case: user performs /transfer, state isn&#39;t upload_finished, throws TransferNotPossibleException(currentState). Spring ControllerAdvice maps TransferNotPossibleException to JSON error, user sees {&quot;code&quot;: &quot;xyz&quot;, &quot;message&quot;: &quot;abc&quot;}. I&#39;m just not sure how I&#39;d even do that with state machines, since e.g. spring state machine offers `sendEvent` and returns false if there&#39;s no such transition defined.","body":"So in my case: user performs /transfer, state isn&#39;t upload_finished, throws TransferNotPossibleException(currentState). Spring ControllerAdvice maps TransferNotPossibleException to JSON error, user sees {&quot;code&quot;: &quot;xyz&quot;, &quot;message&quot;: &quot;abc&quot;}. I&#39;m just not sure how I&#39;d even do that with state machines, since e.g. spring state machine offers <code>sendEvent</code> and returns false if there&#39;s no such transition defined."},{"owner":{"account_id":5332007,"reputation":9649,"user_id":4252352,"accept_rate":43,"display_name":"Mark"},"score":0,"creation_date":1634159314,"post_id":69500694,"comment_id":122954218,"body_markdown":"Maybe consider returning a `Result` for each method either `Success()` or `Failure(String reason)` - check for the happy path in each method, ultimately returning Success if not then Failure, then let the client handle? However it seems any upset to this classes API might upset clients that currently use it?","body":"Maybe consider returning a <code>Result</code> for each method either <code>Success()</code> or <code>Failure(String reason)</code> - check for the happy path in each method, ultimately returning Success if not then Failure, then let the client handle? However it seems any upset to this classes API might upset clients that currently use it?"}],"owner":{"account_id":8556756,"reputation":595,"user_id":6412004,"display_name":"Regyn"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1633720002,"creation_date":1633720002,"question_id":69500694,"body_markdown":"I&#39;m  currently having the following class\r\n\r\n```\r\npublic class ContentContainer {\r\n    private enum ContentState {\r\n        NEW,\r\n        IN_UPLOAD,\r\n        UPLOAD_FINISHED,\r\n        IN_TRANSFER,\r\n        TRANSFER_FINISHED\r\n    }\r\n    \r\n    // Persisted in Postgres DB\r\n    private UUID uuid;\r\n    private ContentState state;\r\n    private List&lt;ContentPart&gt; parts;\r\n    private Integer expectedParts;\r\n    \r\n    public void addContentPart(ContentPart contentPart) {\r\n        if (this.state != ContentState.IN_UPLOAD) {\r\n            throw new IllegalStateException();\r\n        }\r\n        parts.add(contentPart);\r\n        \r\n        if (this.parts.size() == this.expectedParts) {\r\n            this.state = ContentState.UPLOAD_FINISHED;\r\n        }\r\n        // persist in db\r\n    }\r\n    \r\n    public void transfer() {\r\n        if (this.state != ContentState.UPLOAD_FINISHED) {\r\n            throw new IllegalStateException();\r\n        }\r\n        // transfer\r\n    }\r\n}\r\n```\r\n\r\nThere can be e.g. 20 HTTP requests adding Content. Now if someone triggers the `/transfer` endpoint before all 20 parts are added, there should be an exemption.\r\n\r\nIs there a better available design pattern to avoid the ContentState comparsion in every request to `transfer`?","title":"Avoid excessive use of IllegalStateException","body":"<p>I'm  currently having the following class</p>\n<pre><code>public class ContentContainer {\n    private enum ContentState {\n        NEW,\n        IN_UPLOAD,\n        UPLOAD_FINISHED,\n        IN_TRANSFER,\n        TRANSFER_FINISHED\n    }\n    \n    // Persisted in Postgres DB\n    private UUID uuid;\n    private ContentState state;\n    private List&lt;ContentPart&gt; parts;\n    private Integer expectedParts;\n    \n    public void addContentPart(ContentPart contentPart) {\n        if (this.state != ContentState.IN_UPLOAD) {\n            throw new IllegalStateException();\n        }\n        parts.add(contentPart);\n        \n        if (this.parts.size() == this.expectedParts) {\n            this.state = ContentState.UPLOAD_FINISHED;\n        }\n        // persist in db\n    }\n    \n    public void transfer() {\n        if (this.state != ContentState.UPLOAD_FINISHED) {\n            throw new IllegalStateException();\n        }\n        // transfer\n    }\n}\n</code></pre>\n<p>There can be e.g. 20 HTTP requests adding Content. Now if someone triggers the <code>/transfer</code> endpoint before all 20 parts are added, there should be an exemption.</p>\n<p>Is there a better available design pattern to avoid the ContentState comparsion in every request to <code>transfer</code>?</p>\n"},{"tags":["java","spring","callstack","spring-bean"],"comments":[{"owner":{"account_id":9389442,"reputation":321,"user_id":9121818,"display_name":"Shashwat Kaundinya"},"score":0,"creation_date":1633716063,"post_id":69499683,"comment_id":122842889,"body_markdown":"As Spring is all about separation of concerns and loose coupling, why not **consider** going the **AOP** way? Create an `@Aspect` class, create a method (`@Around, @Before or @After`) and then define a pointcut that points to the EmailService class&#39; method or even better, consider creating a custom annotation class to handle your needs. This solution could also very easily scale and monitor other service classes that you might have.","body":"As Spring is all about separation of concerns and loose coupling, why not <b>consider</b> going the <b>AOP</b> way? Create an <code>@Aspect</code> class, create a method (<code>@Around, @Before or @After</code>) and then define a pointcut that points to the EmailService class&#39; method or even better, consider creating a custom annotation class to handle your needs. This solution could also very easily scale and monitor other service classes that you might have."},{"owner":{"account_id":5809031,"reputation":873,"user_id":6259216,"accept_rate":50,"display_name":"johnlinp"},"score":0,"creation_date":1633717318,"post_id":69499683,"comment_id":122843303,"body_markdown":"@ShashwatKaundinya Thank you for the suggestion. Unfortunately, I couldn&#39;t find a way to retrieve the caller&#39;s name from the `ProceedingJoinPoint` in a @Aspect class. I can only find the callee&#39;s name. Could you please give me some hints about how to retrieve the caller&#39;s name in `ProceedingJoinPoint`? Thanks!","body":"@ShashwatKaundinya Thank you for the suggestion. Unfortunately, I couldn&#39;t find a way to retrieve the caller&#39;s name from the <code>ProceedingJoinPoint</code> in a @Aspect class. I can only find the callee&#39;s name. Could you please give me some hints about how to retrieve the caller&#39;s name in <code>ProceedingJoinPoint</code>? Thanks!"},{"owner":{"account_id":9389442,"reputation":321,"user_id":9121818,"display_name":"Shashwat Kaundinya"},"score":0,"creation_date":1633930387,"post_id":69499683,"comment_id":122881348,"body_markdown":"You could use `proceedingJoinPoint.getThis().getClass().getName()` to get the caller to your target. You could also match the method signature by leveraging Reflection now that you have a reference to your caller class.","body":"You could use <code>proceedingJoinPoint.getThis().getClass().getName()</code> to get the caller to your target. You could also match the method signature by leveraging Reflection now that you have a reference to your caller class."},{"owner":{"account_id":5809031,"reputation":873,"user_id":6259216,"accept_rate":50,"display_name":"johnlinp"},"score":0,"creation_date":1633977171,"post_id":69499683,"comment_id":122898362,"body_markdown":"I tried `proceedingJoinPoint.getThis().getClass().getName()`, but I got `com.sun.proxy.$Proxy200`. How do I get the &quot;real&quot; caller, e.g. `PaymentService` and `RetailerReportService`?","body":"I tried <code>proceedingJoinPoint.getThis().getClass().getName()</code>, but I got <code>com.sun.proxy.$Proxy200</code>. How do I get the &quot;real&quot; caller, e.g. <code>PaymentService</code> and <code>RetailerReportService</code>?"}],"owner":{"account_id":5809031,"reputation":873,"user_id":6259216,"accept_rate":50,"display_name":"johnlinp"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":618,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1633719703,"creation_date":1633714069,"question_id":69499683,"body_markdown":"I have a Spring service named `EmailService` like this:\r\n\r\n```java\r\n@Service\r\npublic class EmailService {\r\n    public void send (String recipient, String content) {\r\n        // send out an email\r\n    }\r\n}\r\n```\r\n\r\nThere are several other Spring services using `EmailService`, e.g. `PaymentService` uses `EmailService` to send emails to customers about their payments and `RetailerReportService` uses `EmailService` to send emails to retailers some selling reports.\r\n\r\nI would like to know the amount of usage for `EmailService` and who are using it. Specifically, I want a bar chart that says &quot;`PaymentService` called `EmailService` for 300 times a day&quot; and &quot;`RetailerReportService` called `EmailService` for 20 times a day&quot;.\r\n\r\nTherefore, I want to add some code inside `EmailService` to monitor who are calling it. The first thing came to my mind is to retrieve the call stack with `Thread.currentThread().getStackTrace()`. However, since my application is using Spring framework, the call stack is full of proxy classes like `org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint()` or `sun.reflect.NativeMethodAccessorImpl.invoke0()`. Still, I can traverse the call stack and filter out unwanted classes by package names, but it would look ugly.\r\n\r\nI would like to know if Spring provides a way to retrieve the caller Spring bean&#39;s name, so that I can use it inside `EmailService` to get names like `paymentService` or `retailerReportService`. Thank you.","title":"How to get the caller Spring bean name in a Spring application?","body":"<p>I have a Spring service named <code>EmailService</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class EmailService {\n    public void send (String recipient, String content) {\n        // send out an email\n    }\n}\n</code></pre>\n<p>There are several other Spring services using <code>EmailService</code>, e.g. <code>PaymentService</code> uses <code>EmailService</code> to send emails to customers about their payments and <code>RetailerReportService</code> uses <code>EmailService</code> to send emails to retailers some selling reports.</p>\n<p>I would like to know the amount of usage for <code>EmailService</code> and who are using it. Specifically, I want a bar chart that says &quot;<code>PaymentService</code> called <code>EmailService</code> for 300 times a day&quot; and &quot;<code>RetailerReportService</code> called <code>EmailService</code> for 20 times a day&quot;.</p>\n<p>Therefore, I want to add some code inside <code>EmailService</code> to monitor who are calling it. The first thing came to my mind is to retrieve the call stack with <code>Thread.currentThread().getStackTrace()</code>. However, since my application is using Spring framework, the call stack is full of proxy classes like <code>org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint()</code> or <code>sun.reflect.NativeMethodAccessorImpl.invoke0()</code>. Still, I can traverse the call stack and filter out unwanted classes by package names, but it would look ugly.</p>\n<p>I would like to know if Spring provides a way to retrieve the caller Spring bean's name, so that I can use it inside <code>EmailService</code> to get names like <code>paymentService</code> or <code>retailerReportService</code>. Thank you.</p>\n"},{"tags":["java","refactoring"],"answers":[{"tags":[],"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1633719631,"creation_date":1633719300,"answer_id":69500567,"question_id":69500131,"body_markdown":"You need look for `Fluent Api Pattern` and `Builder Pattern`\r\n\r\nSimple example\r\n```java\r\npublic class CheckTest {\r\n\r\n    private int num;\r\n\r\n    // private constructor for avoiding new CheckTest()\r\n    private CheckTest(int num){ \r\n        this.num = num;\r\n    } \r\n\r\n    // must start with Print.num(...); on static method\r\n    // see we are returning the same class to use other methods in one line\r\n    public static CheckTest num(int num){ \r\n        return new CheckTest(num);\r\n    }\r\n\r\n    // can be called by Print.num().isMultipleOf()\r\n    public boolean isMultipleOf(int muiltipleOf){ \r\n        return ( this.num % muiltipleOf ) == 0;\r\n    }\r\n\r\n    // can be called by Print.num().isMultipleOfThenPrint()\r\n    public void ifIsMultipleOfThenPrint(int muiltipleOf, String msgToPrint){\r\n        if( isMultipleOf(muiltipleOf))\r\n            System.out.println(msgToPrint);\r\n    }\r\n}\r\n\r\n```\r\n\r\nusing our simple class\r\n```java\r\n\r\nif( CheckTest.num(10).isMultipleOf(5) &amp;&amp; CheckTest.num(15).isMultipleOf(5) ){\r\n    System.out.println(&quot;print&quot;);\r\n}\r\n\r\nCheckTest.num(15).ifIsMultipleOfThenPrint(5,&quot;print&quot;);\r\n\r\n```","title":"How do I connect methods with dots? - Refactoring","body":"<p>You need look for <code>Fluent Api Pattern</code> and <code>Builder Pattern</code></p>\n<p>Simple example</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CheckTest {\n\n    private int num;\n\n    // private constructor for avoiding new CheckTest()\n    private CheckTest(int num){ \n        this.num = num;\n    } \n\n    // must start with Print.num(...); on static method\n    // see we are returning the same class to use other methods in one line\n    public static CheckTest num(int num){ \n        return new CheckTest(num);\n    }\n\n    // can be called by Print.num().isMultipleOf()\n    public boolean isMultipleOf(int muiltipleOf){ \n        return ( this.num % muiltipleOf ) == 0;\n    }\n\n    // can be called by Print.num().isMultipleOfThenPrint()\n    public void ifIsMultipleOfThenPrint(int muiltipleOf, String msgToPrint){\n        if( isMultipleOf(muiltipleOf))\n            System.out.println(msgToPrint);\n    }\n}\n\n</code></pre>\n<p>using our simple class</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nif( CheckTest.num(10).isMultipleOf(5) &amp;&amp; CheckTest.num(15).isMultipleOf(5) ){\n    System.out.println(&quot;print&quot;);\n}\n\nCheckTest.num(15).ifIsMultipleOfThenPrint(5,&quot;print&quot;);\n\n</code></pre>\n"}],"owner":{"account_id":22981850,"reputation":13,"user_id":17108642,"display_name":"Luk&#233;"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69500567,"answer_count":1,"score":1,"last_activity_date":1633719631,"creation_date":1633716839,"question_id":69500131,"body_markdown":"I am trying to refactor my code. But I dont know how to do what I want to do. I dont know how it&#39;s called so I dont find it with google. \r\nMy Code:\r\n```\r\npublic void print(int from, int to) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\t\r\n\t\tfor(;from&lt;=to;from++)\r\n\t\t{\r\n\t\t\tif(from % 3 == 0)\r\n\t\t\t{\r\n\t\t\t\tif(from % 5 == 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tSystem.out.println(&quot;Fizz Buzz&quot;);\r\n\t\t\t\t}\r\n\t\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\tSystem.out.println(&quot;Fizz&quot;);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif(from % 5 == 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tSystem.out.println(&quot;Buzz&quot;);\r\n\t\t\t\t}\r\n\t\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\tSystem.out.println(from);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n```\r\nI want to refactor everything so the final version looks like this:\r\n```\r\nprint(&quot;Fizz&quot;).If(from).IsMultipleOf(3);\r\nprint(&quot;Buzz&quot;).If(from).IsMultipleOf(5);\r\nprint(&quot;Fizz Buzz&quot;).If(from).IsMultipleOf(3).And.IsMultipleOf(5);\r\n```\r\n\r\nor like this:\r\n\r\n```\r\nif(If(from).IsMultipleOf(3) &amp;&amp; If(from).IsMultipleOf(5))\r\n{\r\nprint(&quot;Fizz Buzz&quot;);\r\n}\r\n```\r\nSo the &quot;If(from).IsMultipleOf(3)&quot; shall return true/false and if its true it shall execute the print() function. But I dont know how to do it with the dots (&quot;.&quot;).\r\n\r\n\r\nCould someone please tell me the right term to google for or show me an example?\r\n\r\n-Thanks already in advance!\r\n","title":"How do I connect methods with dots? - Refactoring","body":"<p>I am trying to refactor my code. But I dont know how to do what I want to do. I dont know how it's called so I dont find it with google.\nMy Code:</p>\n<pre><code>public void print(int from, int to) {\n        // TODO Auto-generated method stub\n        \n        for(;from&lt;=to;from++)\n        {\n            if(from % 3 == 0)\n            {\n                if(from % 5 == 0)\n                {\n                    System.out.println(&quot;Fizz Buzz&quot;);\n                }\n                else \n                {\n                    System.out.println(&quot;Fizz&quot;);\n                }\n            }\n            else\n            {\n                if(from % 5 == 0)\n                {\n                    System.out.println(&quot;Buzz&quot;);\n                }\n                else \n                {\n                    System.out.println(from);\n                }\n            }\n        }\n        \n    }\n</code></pre>\n<p>I want to refactor everything so the final version looks like this:</p>\n<pre><code>print(&quot;Fizz&quot;).If(from).IsMultipleOf(3);\nprint(&quot;Buzz&quot;).If(from).IsMultipleOf(5);\nprint(&quot;Fizz Buzz&quot;).If(from).IsMultipleOf(3).And.IsMultipleOf(5);\n</code></pre>\n<p>or like this:</p>\n<pre><code>if(If(from).IsMultipleOf(3) &amp;&amp; If(from).IsMultipleOf(5))\n{\nprint(&quot;Fizz Buzz&quot;);\n}\n</code></pre>\n<p>So the &quot;If(from).IsMultipleOf(3)&quot; shall return true/false and if its true it shall execute the print() function. But I dont know how to do it with the dots (&quot;.&quot;).</p>\n<p>Could someone please tell me the right term to google for or show me an example?</p>\n<p>-Thanks already in advance!</p>\n"},{"tags":["java","garbage-collection","java-11","zgc"],"answers":[{"tags":[],"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1633719367,"creation_date":1590010137,"answer_id":61923235,"question_id":61923094,"body_markdown":"Allocation stall means a thread is asking for heap and none is available and so the requesting thread is blocking.\r\n\r\nMake sure you have enough gc threads setup.  JDK can have trouble detecting core count particularly if using Docker, which the default value of gc threads is derived from.  See https://wiki.openjdk.java.net/display/zgc/Main#Main-SettingConcurrentGCThreads\r\n\r\nIf your CPU util is low during these times, that&#39;s another indication that you need more GC threads.\r\n\r\nIn general, enabling `hugepages` can help performance with ZGC.  https://wiki.openjdk.java.net/display/zgc/Main#Main-EnablingLargePagesOnLinux\r\n\r\nAlso, you may just need more heap.\r\n\r\n**EDIT TO ADD**: Probably also worthwhile to make sure you&#39;re on the latest patch release of jdk and the OS.","title":"Getting &#39;allocation stall&#39; when enabling ZGC","body":"<p>Allocation stall means a thread is asking for heap and none is available and so the requesting thread is blocking.</p>\n<p>Make sure you have enough gc threads setup.  JDK can have trouble detecting core count particularly if using Docker, which the default value of gc threads is derived from.  See <a href=\"https://wiki.openjdk.java.net/display/zgc/Main#Main-SettingConcurrentGCThreads\" rel=\"nofollow noreferrer\">https://wiki.openjdk.java.net/display/zgc/Main#Main-SettingConcurrentGCThreads</a></p>\n<p>If your CPU util is low during these times, that's another indication that you need more GC threads.</p>\n<p>In general, enabling <code>hugepages</code> can help performance with ZGC.  <a href=\"https://wiki.openjdk.java.net/display/zgc/Main#Main-EnablingLargePagesOnLinux\" rel=\"nofollow noreferrer\">https://wiki.openjdk.java.net/display/zgc/Main#Main-EnablingLargePagesOnLinux</a></p>\n<p>Also, you may just need more heap.</p>\n<p><strong>EDIT TO ADD</strong>: Probably also worthwhile to make sure you're on the latest patch release of jdk and the OS.</p>\n"}],"owner":{"account_id":2544235,"reputation":6765,"user_id":2209390,"accept_rate":91,"display_name":"hveiga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3123,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":61923235,"answer_count":1,"score":5,"last_activity_date":1633719367,"creation_date":1590009570,"question_id":61923094,"body_markdown":"I am testing the new `zgc` garbage collector that was included in `java` 11 since it promises really low latency. Our application is a real-time service that creates and destroys many objects per second and it does it in a multi-threaded environment using `akka`.\r\n\r\nWhen enabling `zgc` by passing the options `-XX:+UnlockExperimentalVMOptions -XX:+UseZGC` and enabling `gc` logs, we can see many messages in the log similar to this:\r\n\r\n```\r\n[2020-05-20T18:05:36.563+0000][63.851s][info ][gc] Allocation Stall (Main-akka.remote.default-remote-dispatcher-6) 11332.231ms\r\n[2020-05-20T18:05:36.563+0000][63.851s][info ][gc] Allocation Stall (Main-akka.remote.default-remote-dispatcher-26) 9898.046ms\r\n[2020-05-20T18:05:36.563+0000][63.851s][info ][gc] Allocation Stall (Main-io-blocking-dispatcher-52) 12133.240ms\r\n[2020-05-20T18:05:36.563+0000][63.851s][info ][gc] Allocation Stall (Main-akka.actor.default-dispatcher-54) 9002.299ms\r\n[2020-05-20T18:05:36.563+0000][63.850s][info ][gc] Allocation Stall (Main-io-blocking-dispatcher-50) 12134.218ms\r\n[2020-05-20T18:05:36.563+0000][63.850s][info ][gc] Allocation Stall (Main-akka.actor.default-dispatcher-46) 12132.540ms\r\n[2020-05-20T18:05:36.563+0000][63.851s][info ][gc] Allocation Stall (Main-akka.actor.default-dispatcher-56) 8072.664ms\r\n```\r\nAnd after some seconds the JVM exits, not giving any reason. We are running `openjdk-java-11`.\r\nAny suggestions about what to do to make this work?","title":"Getting &#39;allocation stall&#39; when enabling ZGC","body":"<p>I am testing the new <code>zgc</code> garbage collector that was included in <code>java</code> 11 since it promises really low latency. Our application is a real-time service that creates and destroys many objects per second and it does it in a multi-threaded environment using <code>akka</code>.</p>\n\n<p>When enabling <code>zgc</code> by passing the options <code>-XX:+UnlockExperimentalVMOptions -XX:+UseZGC</code> and enabling <code>gc</code> logs, we can see many messages in the log similar to this:</p>\n\n<pre><code>[2020-05-20T18:05:36.563+0000][63.851s][info ][gc] Allocation Stall (Main-akka.remote.default-remote-dispatcher-6) 11332.231ms\n[2020-05-20T18:05:36.563+0000][63.851s][info ][gc] Allocation Stall (Main-akka.remote.default-remote-dispatcher-26) 9898.046ms\n[2020-05-20T18:05:36.563+0000][63.851s][info ][gc] Allocation Stall (Main-io-blocking-dispatcher-52) 12133.240ms\n[2020-05-20T18:05:36.563+0000][63.851s][info ][gc] Allocation Stall (Main-akka.actor.default-dispatcher-54) 9002.299ms\n[2020-05-20T18:05:36.563+0000][63.850s][info ][gc] Allocation Stall (Main-io-blocking-dispatcher-50) 12134.218ms\n[2020-05-20T18:05:36.563+0000][63.850s][info ][gc] Allocation Stall (Main-akka.actor.default-dispatcher-46) 12132.540ms\n[2020-05-20T18:05:36.563+0000][63.851s][info ][gc] Allocation Stall (Main-akka.actor.default-dispatcher-56) 8072.664ms\n</code></pre>\n\n<p>And after some seconds the JVM exits, not giving any reason. We are running <code>openjdk-java-11</code>.\nAny suggestions about what to do to make this work?</p>\n"},{"tags":["java","collections","set"],"comments":[{"owner":{"account_id":5715690,"reputation":2296,"user_id":4515989,"accept_rate":78,"display_name":"Felix"},"score":2,"creation_date":1633719368,"post_id":69500481,"comment_id":122844010,"body_markdown":"There’s IdentityHashMap and you can create Sets from Map instances. So yes: `Collections.newSetFromMap(new IdentityHashMap&lt;&gt;());`","body":"There’s IdentityHashMap and you can create Sets from Map instances. So yes: <code>Collections.newSetFromMap(new IdentityHashMap&lt;&gt;());</code>"},{"owner":{"account_id":22982006,"reputation":11,"user_id":17108769,"display_name":"bitwiseWho"},"score":0,"creation_date":1633724249,"post_id":69500481,"comment_id":122845393,"body_markdown":"Thank you, all! IdentityHashMap is exactly what I was looking for.","body":"Thank you, all! IdentityHashMap is exactly what I was looking for."}],"owner":{"account_id":22982006,"reputation":11,"user_id":17108769,"display_name":"bitwiseWho"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1633760414,"answer_count":0,"score":1,"last_activity_date":1633718842,"creation_date":1633718842,"question_id":69500481,"body_markdown":"I&#39;m trying to find a collection which won&#39;t store multiple instances of the same object, but will store identical objects with distinct references.\r\n\r\nFor example, the code:\r\n\r\n```\r\nimport java.awt.Rectangle;\r\nimport java.util.HashSet;\r\n\r\npublic class setTest {\r\n    public static void main(String[] args) {\r\n        Rectangle r1 = new Rectangle();\r\n        Rectangle r2 = new Rectangle();\r\n        HashSet&lt;Rectangle&gt; set = new HashSet&lt;&gt;();\r\n\r\n        System.out.println(&quot;Add r1      : &quot; + set.add(r1));\r\n        System.out.println(&quot;Contains r2 : &quot; + set.contains(r2));\r\n        System.out.println(&quot;Add r2      : &quot; + set.add(r2));\r\n        System.out.println();\r\n\r\n        r2.grow(100,100);\r\n        System.out.println(&quot;Grow r2&quot;);\r\n        System.out.println(&quot;Contains r2 : &quot; + set.contains(r2));\r\n        System.out.println(&quot;Add r2      : &quot; + set.add(r2));\r\n        System.out.println(&quot;Contains r2 : &quot; + set.contains(r2));\r\n        System.out.println();\r\n\r\n        r2.grow(100,100);\r\n        System.out.println(&quot;Grow r2&quot;);\r\n        System.out.println(&quot;Contains r2 : &quot; + set.contains(r2));\r\n    }\r\n}\r\n\r\n```\r\nproduces the result:\r\n```\r\nAdd r1      : true\r\nContains r2 : true\r\nAdd r2      : false\r\n\r\nGrow r2\r\nContains r2 : false\r\nAdd r2      : true\r\nContains r2 : true\r\n\r\nGrow r2\r\nContains r2 : false\r\n```\r\n\r\nWhereas I would like an implementation which produces:\r\n```\r\nAdd r1      : true\r\nContains r2 : false\r\nAdd r2      : true\r\n\r\nGrow r2\r\nContains r2 : true\r\nAdd r2      : false\r\nContains r2 : true\r\n\r\nGrow r2\r\nContains r2 : true\r\n```\r\n\r\nDoes something like that exist? Or would I need to create a collection like that myself?","title":"Is there a set which determines duplicates based on objects&#39; references?","body":"<p>I'm trying to find a collection which won't store multiple instances of the same object, but will store identical objects with distinct references.</p>\n<p>For example, the code:</p>\n<pre><code>import java.awt.Rectangle;\nimport java.util.HashSet;\n\npublic class setTest {\n    public static void main(String[] args) {\n        Rectangle r1 = new Rectangle();\n        Rectangle r2 = new Rectangle();\n        HashSet&lt;Rectangle&gt; set = new HashSet&lt;&gt;();\n\n        System.out.println(&quot;Add r1      : &quot; + set.add(r1));\n        System.out.println(&quot;Contains r2 : &quot; + set.contains(r2));\n        System.out.println(&quot;Add r2      : &quot; + set.add(r2));\n        System.out.println();\n\n        r2.grow(100,100);\n        System.out.println(&quot;Grow r2&quot;);\n        System.out.println(&quot;Contains r2 : &quot; + set.contains(r2));\n        System.out.println(&quot;Add r2      : &quot; + set.add(r2));\n        System.out.println(&quot;Contains r2 : &quot; + set.contains(r2));\n        System.out.println();\n\n        r2.grow(100,100);\n        System.out.println(&quot;Grow r2&quot;);\n        System.out.println(&quot;Contains r2 : &quot; + set.contains(r2));\n    }\n}\n\n</code></pre>\n<p>produces the result:</p>\n<pre><code>Add r1      : true\nContains r2 : true\nAdd r2      : false\n\nGrow r2\nContains r2 : false\nAdd r2      : true\nContains r2 : true\n\nGrow r2\nContains r2 : false\n</code></pre>\n<p>Whereas I would like an implementation which produces:</p>\n<pre><code>Add r1      : true\nContains r2 : false\nAdd r2      : true\n\nGrow r2\nContains r2 : true\nAdd r2      : false\nContains r2 : true\n\nGrow r2\nContains r2 : true\n</code></pre>\n<p>Does something like that exist? Or would I need to create a collection like that myself?</p>\n"},{"tags":["java","syntax","constructor"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1576859221,"post_id":59428410,"comment_id":105042913,"body_markdown":"No; Java is still verbose. One option would be to look at the current JLS--all Java syntax is readily available.","body":"No; Java is still verbose. One option would be to look at the current JLS--all Java syntax is readily available."}],"answers":[{"tags":[],"owner":{"account_id":16992821,"reputation":402,"user_id":12292005,"display_name":"SteffenJacobs"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576859210,"creation_date":1576859210,"answer_id":59428488,"question_id":59428410,"body_markdown":"With Java &lt;= 13 there is no way to make it less verbose.","title":"Shorthand class constructor member initialisation","body":"<p>With Java &lt;= 13 there is no way to make it less verbose.</p>\n"},{"tags":[],"owner":{"account_id":3910638,"reputation":6001,"user_id":3236102,"accept_rate":80,"display_name":"Dakkaron"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1633717302,"creation_date":1633717302,"answer_id":69500222,"question_id":59428410,"body_markdown":"Project Lombok makes Java much less verbose. Using it&#39;s annotations you can skip a lot of Java Boilerplate. \r\n\r\nFor constructors there are `@NoArgsConstructor`, `@RequiredArgsConstructor` and `@AllArgsConstructor`.","title":"Shorthand class constructor member initialisation","body":"<p>Project Lombok makes Java much less verbose. Using it's annotations you can skip a lot of Java Boilerplate.</p>\n<p>For constructors there are <code>@NoArgsConstructor</code>, <code>@RequiredArgsConstructor</code> and <code>@AllArgsConstructor</code>.</p>\n"}],"owner":{"account_id":3910638,"reputation":6001,"user_id":3236102,"accept_rate":80,"display_name":"Dakkaron"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":69500222,"answer_count":2,"score":0,"last_activity_date":1633717302,"creation_date":1576858820,"question_id":59428410,"body_markdown":"Writing simple constructors in Java is pretty verbose. For each field that needs to be initialised you need to write the variable name four times, e.g. like so:\r\n\r\n    class X {\r\n        int y;\r\n        public X(int y) {\r\n            this.y = y;\r\n        }\r\n    }\r\n\r\nIs there a shorthand for that like e.g. in Kotlin?\r\n\r\nThis question was asked before here: https://stackoverflow.com/questions/16384061/shorthand-class-constructor-field-initialisation\r\n\r\nBut that was way back in 2013 (6 Java versions ago) and the comments in this (https://meta.stackoverflow.com/questions/269631/ask-for-update-to-answers) meta post say to post another question to request an answer for a newer version.\r\n\r\nAlso, the original question wasn&#39;t really answered since the answers focussed on chaining constructors instead. And according to the rules, a question that has not been answered cannot be the reason that another question is flagged as a duplicate.","title":"Shorthand class constructor member initialisation","body":"<p>Writing simple constructors in Java is pretty verbose. For each field that needs to be initialised you need to write the variable name four times, e.g. like so:</p>\n\n<pre><code>class X {\n    int y;\n    public X(int y) {\n        this.y = y;\n    }\n}\n</code></pre>\n\n<p>Is there a shorthand for that like e.g. in Kotlin?</p>\n\n<p>This question was asked before here: <a href=\"https://stackoverflow.com/questions/16384061/shorthand-class-constructor-field-initialisation\">Shorthand class constructor field initialisation</a></p>\n\n<p>But that was way back in 2013 (6 Java versions ago) and the comments in this (<a href=\"https://meta.stackoverflow.com/questions/269631/ask-for-update-to-answers\">Ask for update to answers</a>) meta post say to post another question to request an answer for a newer version.</p>\n\n<p>Also, the original question wasn't really answered since the answers focussed on chaining constructors instead. And according to the rules, a question that has not been answered cannot be the reason that another question is flagged as a duplicate.</p>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":105578,"reputation":4431,"user_id":281657,"accept_rate":93,"display_name":"Malcolm Crum"},"score":2,"creation_date":1581569033,"post_id":60200557,"comment_id":106480813,"body_markdown":"What is your question?","body":"What is your question?"}],"answers":[{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581779664,"creation_date":1581571241,"answer_id":60200934,"question_id":60200557,"body_markdown":"Your basic idea is OK, though it took me a bit to understand it. If there’s an even number of socks in the same colour to the right of this sock. then I can count it as belonging to a pair (if an odd number, then it may be the other sock of a pair, so don’t count it again).\r\n\r\nI think that there are two errors in your program:\r\n\r\n 1. You must reset `count` to 0 for each iteration of your outer loop; the value from the previous iteration is irrelevant.\r\n 2. Since you are not counting the current sock in, you need an odd count, not an even one, to call a pair.\r\n\r\nSo your program becomes:\r\n\r\n\t\tint ar[] = { 1, 1, 3, 1, 2, 1, 3, 3, 3, 3 };\r\n\t\tint numberOfPairs = 0;\r\n\r\n\t\tfor (int i = 0; i &lt; ar.length - 1; i++)\r\n\t\t{\r\n\t\t\tint countSocksToTheRight = 0;\r\n\r\n\t\t\tfor (int j = i + 1; j &lt; ar.length; j++)\r\n\t\t\t{\r\n\t\t\t\tif (ar[i] == ar[j])\r\n\t\t\t\t{\r\n\t\t\t\t\tcountSocksToTheRight++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (countSocksToTheRight % 2 != 0)\r\n\t\t\t{\r\n\t\t\t\tnumberOfPairs++;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Pairs =  &quot; + numberOfPairs);\r\n\r\nI have tried to think of better variable names. I haven’t done any thorough testing. As the program stands, it outputs:\r\n\r\n&gt; Pairs =  4\r\n\r\n**Alternative:** As a complete aside and not answering anything you asked about, but possibly interesting for other readers: If I were to write the program, I would use two stream operations. I’d first use a stream from the array and group by sock color and count socks in each group. Next I’d do a new stream from the values of the map, dividing each sock count by 2 and throw away any remainder (any unmatched sock) to get the number of pairs of that colour, finally adding all the pair counts.","title":"Sock merchant Problem: i am trying to do this with a different approach","body":"<p>Your basic idea is OK, though it took me a bit to understand it. If there’s an even number of socks in the same colour to the right of this sock. then I can count it as belonging to a pair (if an odd number, then it may be the other sock of a pair, so don’t count it again).</p>\n\n<p>I think that there are two errors in your program:</p>\n\n<ol>\n<li>You must reset <code>count</code> to 0 for each iteration of your outer loop; the value from the previous iteration is irrelevant.</li>\n<li>Since you are not counting the current sock in, you need an odd count, not an even one, to call a pair.</li>\n</ol>\n\n<p>So your program becomes:</p>\n\n<pre><code>    int ar[] = { 1, 1, 3, 1, 2, 1, 3, 3, 3, 3 };\n    int numberOfPairs = 0;\n\n    for (int i = 0; i &lt; ar.length - 1; i++)\n    {\n        int countSocksToTheRight = 0;\n\n        for (int j = i + 1; j &lt; ar.length; j++)\n        {\n            if (ar[i] == ar[j])\n            {\n                countSocksToTheRight++;\n            }\n        }\n        if (countSocksToTheRight % 2 != 0)\n        {\n            numberOfPairs++;\n        }\n\n    }\n    System.out.println(\"Pairs =  \" + numberOfPairs);\n</code></pre>\n\n<p>I have tried to think of better variable names. I haven’t done any thorough testing. As the program stands, it outputs:</p>\n\n<blockquote>\n  <p>Pairs =  4</p>\n</blockquote>\n\n<p><strong>Alternative:</strong> As a complete aside and not answering anything you asked about, but possibly interesting for other readers: If I were to write the program, I would use two stream operations. I’d first use a stream from the array and group by sock color and count socks in each group. Next I’d do a new stream from the values of the map, dividing each sock count by 2 and throw away any remainder (any unmatched sock) to get the number of pairs of that colour, finally adding all the pair counts.</p>\n"},{"tags":[],"owner":{"account_id":17000499,"reputation":48397,"user_id":12299000,"display_name":"kaya3"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581575101,"creation_date":1581575101,"answer_id":60201627,"question_id":60200557,"body_markdown":"In this case you can get away with a nested loop because HackerRank is only going to test your solution on arrays of length up to 100. But if you want to take a different approach, think about how you would solve this problem yourself, manually, if you had a drawer full of socks and you wanted to count how many pairs there were. I don&#39;t think you would take a sock, count how many socks of that colour are in the drawer, then take another sock and count again, and so on!\r\n\r\nThe natural solution is to take the socks one at a time, keep them in a separate space aside from the drawer, and when you take a sock that pairs with one that you&#39;ve kept aside, pair them together and put them somewhere else. That solution can be modelled in Java by using a `Set` to store the unpaired socks, and a counter variable to count the number of pairs. Each time you take a new sock from the array, if the same colour is already in the set, remove the one from the set and pair them up (i.e. add one to the counter), otherwise put the new sock into the set.\r\n\r\n```java\r\npublic int countPairs(int[] socks) {\r\n    Set&lt;Integer&gt; oddSocks = new HashSet&lt;&gt;();\r\n    int pairs = 0;\r\n    for(int sock : socks) {\r\n        if(oddSocks.contains(sock)) {\r\n            oddSocks.remove(sock);\r\n            pairs++;\r\n        } else {\r\n            oddSocks.add(sock);\r\n        }\r\n    }\r\n    return pairs;\r\n}\r\n```","title":"Sock merchant Problem: i am trying to do this with a different approach","body":"<p>In this case you can get away with a nested loop because HackerRank is only going to test your solution on arrays of length up to 100. But if you want to take a different approach, think about how you would solve this problem yourself, manually, if you had a drawer full of socks and you wanted to count how many pairs there were. I don't think you would take a sock, count how many socks of that colour are in the drawer, then take another sock and count again, and so on!</p>\n\n<p>The natural solution is to take the socks one at a time, keep them in a separate space aside from the drawer, and when you take a sock that pairs with one that you've kept aside, pair them together and put them somewhere else. That solution can be modelled in Java by using a <code>Set</code> to store the unpaired socks, and a counter variable to count the number of pairs. Each time you take a new sock from the array, if the same colour is already in the set, remove the one from the set and pair them up (i.e. add one to the counter), otherwise put the new sock into the set.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public int countPairs(int[] socks) {\n    Set&lt;Integer&gt; oddSocks = new HashSet&lt;&gt;();\n    int pairs = 0;\n    for(int sock : socks) {\n        if(oddSocks.contains(sock)) {\n            oddSocks.remove(sock);\n            pairs++;\n        } else {\n            oddSocks.add(sock);\n        }\n    }\n    return pairs;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17752426,"reputation":84,"user_id":12890198,"display_name":"Boby Robert"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581581465,"creation_date":1581581465,"answer_id":60203163,"question_id":60200557,"body_markdown":"This can be done in O(n) time complexity and O(n) space if you use a hashtable. \r\n\r\nHashtable would have Key = color of Socks, Value = total count of each color.\r\n\r\n    total_count = dict()\r\n    for i in range(len(arr)):\r\n        if arr[i] in total_count:\r\n            total_count[arr[i]] += 1\r\n    \r\n    pairs = 0\r\n    for i in total_count:\r\n        pairs += int(total_count[i] / 2)\r\n            \r\n    print(pairs)\r\n\r\nIterate once over the array and store each occurrence of color in a hashtable. Then iterate over the hashtable to check if counts of each color are divisible by 2. That would give you your pairs.\r\n\r\nI did this in python but hope you get the point.\r\n\r\n\r\n\r\n\r\n ","title":"Sock merchant Problem: i am trying to do this with a different approach","body":"<p>This can be done in O(n) time complexity and O(n) space if you use a hashtable. </p>\n\n<p>Hashtable would have Key = color of Socks, Value = total count of each color.</p>\n\n<pre><code>total_count = dict()\nfor i in range(len(arr)):\n    if arr[i] in total_count:\n        total_count[arr[i]] += 1\n\npairs = 0\nfor i in total_count:\n    pairs += int(total_count[i] / 2)\n\nprint(pairs)\n</code></pre>\n\n<p>Iterate once over the array and store each occurrence of color in a hashtable. Then iterate over the hashtable to check if counts of each color are divisible by 2. That would give you your pairs.</p>\n\n<p>I did this in python but hope you get the point.</p>\n"},{"tags":[],"owner":{"account_id":12932573,"reputation":9,"user_id":9351113,"display_name":"abdul basit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595943729,"creation_date":1595943729,"answer_id":63135530,"question_id":60200557,"body_markdown":" var res = 0;\r\n    ar.sort(function(a,b){\r\n        return a-b\r\n    });\r\n    for(var i=0; i&lt;ar.length; i++){\r\n        if(ar[i]===ar[i+1]){\r\n            res++\r\n        }\r\n    }\r\n    return Math.ceil(res/2)\r\n\r\n","title":"Sock merchant Problem: i am trying to do this with a different approach","body":"<p>var res = 0;\nar.sort(function(a,b){\nreturn a-b\n});\nfor(var i=0; i&lt;ar.length; i++){\nif(ar[i]===ar[i+1]){\nres++\n}\n}\nreturn Math.ceil(res/2)</p>\n"},{"tags":[],"owner":{"account_id":17389888,"reputation":221,"user_id":12600599,"display_name":"Shivam Suchak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598681664,"creation_date":1598681664,"answer_id":63644043,"question_id":60200557,"body_markdown":"Try this, you can easily understand it \r\n\r\n    x=[]\r\n    y=[]\r\n    ar.sort()\r\n    while len(ar)&gt;1:\r\n     if ar[0]==ar[1]:\r\n      x.append(ar[:2])\r\n      del ar[:2]\r\n     else:\r\n      del ar[0]\r\n\r\n","title":"Sock merchant Problem: i am trying to do this with a different approach","body":"<p>Try this, you can easily understand it</p>\n<pre><code>x=[]\ny=[]\nar.sort()\nwhile len(ar)&gt;1:\n if ar[0]==ar[1]:\n  x.append(ar[:2])\n  del ar[:2]\n else:\n  del ar[0]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17307070,"reputation":663,"user_id":12535554,"display_name":"Shah Vipul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1601470388,"creation_date":1601470388,"answer_id":64138010,"question_id":60200557,"body_markdown":"    def sockMerchant(n, ar):\r\n    check_bucket = {}\r\n    for i in range(len(ar)):\r\n        if ar.count(ar[i]) &gt; 1:\r\n            check_bucket[ar[i]] = ar.count(ar[i])\r\n    for key, value in check_bucket.items():\r\n        if check_bucket[key] % 2 != 0:\r\n            check_bucket[key] = check_bucket[key] - 1\r\n\r\n    values = check_bucket.values()\r\n    total = round(sum(values) / 2)\r\n    return total  \r\n\r\nthis is works absolutely fine","title":"Sock merchant Problem: i am trying to do this with a different approach","body":"<pre><code>def sockMerchant(n, ar):\ncheck_bucket = {}\nfor i in range(len(ar)):\n    if ar.count(ar[i]) &gt; 1:\n        check_bucket[ar[i]] = ar.count(ar[i])\nfor key, value in check_bucket.items():\n    if check_bucket[key] % 2 != 0:\n        check_bucket[key] = check_bucket[key] - 1\n\nvalues = check_bucket.values()\ntotal = round(sum(values) / 2)\nreturn total  \n</code></pre>\n<p>this is works absolutely fine</p>\n"},{"tags":[],"owner":{"account_id":20178786,"reputation":1,"user_id":16981149,"display_name":"dr3n"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633716899,"creation_date":1633716899,"answer_id":69500145,"question_id":60200557,"body_markdown":"Boby Robert&#39;s answer inspired this simplified version:\r\n\r\n\r\n    def sockMerchant(n, ar):\r\n        pairs = 0\r\n        arset = set(ar)\r\n        for i in arset:\r\n            pairs += int(ar.count(i) / 2)\r\n        \r\n        return pairs\r\n\r\nSets are frequently useful in Python as duplicate entries are automatically discarded. Then we just use the .count() built-in to get the total count of each type of sock, divide by two, and store the whole number value result.","title":"Sock merchant Problem: i am trying to do this with a different approach","body":"<p>Boby Robert's answer inspired this simplified version:</p>\n<pre><code>def sockMerchant(n, ar):\n    pairs = 0\n    arset = set(ar)\n    for i in arset:\n        pairs += int(ar.count(i) / 2)\n    \n    return pairs\n</code></pre>\n<p>Sets are frequently useful in Python as duplicate entries are automatically discarded. Then we just use the .count() built-in to get the total count of each type of sock, divide by two, and store the whole number value result.</p>\n"}],"owner":{"account_id":15670387,"reputation":41,"user_id":11307088,"display_name":"sushil chhetri"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4511,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":7,"score":2,"last_activity_date":1633716899,"creation_date":1581568674,"question_id":60200557,"body_markdown":"I am trying to solve Sock Merchant problem from HackerRank .\r\n\r\n\r\n\r\n&gt; John works at a clothing store. He has a large pile of socks that he\r\n&gt; must pair by color for sale. Given an array of integers representing\r\n&gt; the color of each sock, determine how many pairs of socks with\r\n&gt; matching colors there are.\r\n&gt; \r\n&gt; For example, there are `n=7` socks with colors `ar= [1,2,1,2,1,3,2]` . There is one pair of color `1`\r\n&gt; and one of color `2` . There are three odd socks left, one of each color.\r\n&gt; The number of pairs is `2` .\r\n\r\nMy Code : \r\n\r\n    class Sock\r\n    {\r\n    \tpublic static void  main(String args[])\r\n    \t{\r\n    \t\tint n=10;\r\n    \t\tint ar[] = new int[]{1,1,3,1,2,1,3,3,3,3};\r\n            int count = 0,number=0;\r\n            \r\n            for(int i=0;i&lt;n-1;i++)\r\n            {\r\n                for(int j=i+1;j&lt;n;j++)\r\n                {\r\n                    if(ar[i]==ar[j])\r\n                    {\r\n                        count++;\r\n                    }\r\n                }\r\n             \r\n                 if(count%2==0)\r\n                    number++;\r\n              \r\n            }\r\n    \t\tSystem.out.println(&quot;Pairs =  &quot;+number);\r\n    \t}\r\n    }\r\n\r\nI am trying to do this problem with different approach .\r\nlike:\r\nFirst ` ar[0]=1 `  frequency is 3 ,\r\n`count=3`  include itself, then if `count&gt;1` and if `count%2==0` then increment `number++`, \r\nso again if `1` come `ar[2]=1` then again count `1&#39;s` frequency from `ar[2]=1`. \r\nthen we got `1&#39;s` frequency `3,2,1` from `ar[0]` to `ar[6]` ,`ar[2]` to `ar[6]`, `ar[4]` to `ar[6]` .\r\n\r\nso we got `1&#39;s` pair `1 time` , `&#39;2&#39;s` pair `1 time` : total= `2 pairs`.\r\n","title":"Sock merchant Problem: i am trying to do this with a different approach","body":"<p>I am trying to solve Sock Merchant problem from HackerRank .</p>\n\n<blockquote>\n  <p>John works at a clothing store. He has a large pile of socks that he\n  must pair by color for sale. Given an array of integers representing\n  the color of each sock, determine how many pairs of socks with\n  matching colors there are.</p>\n  \n  <p>For example, there are <code>n=7</code> socks with colors <code>ar= [1,2,1,2,1,3,2]</code> . There is one pair of color <code>1</code>\n  and one of color <code>2</code> . There are three odd socks left, one of each color.\n  The number of pairs is <code>2</code> .</p>\n</blockquote>\n\n<p>My Code : </p>\n\n<pre><code>class Sock\n{\n    public static void  main(String args[])\n    {\n        int n=10;\n        int ar[] = new int[]{1,1,3,1,2,1,3,3,3,3};\n        int count = 0,number=0;\n\n        for(int i=0;i&lt;n-1;i++)\n        {\n            for(int j=i+1;j&lt;n;j++)\n            {\n                if(ar[i]==ar[j])\n                {\n                    count++;\n                }\n            }\n\n             if(count%2==0)\n                number++;\n\n        }\n        System.out.println(\"Pairs =  \"+number);\n    }\n}\n</code></pre>\n\n<p>I am trying to do this problem with different approach .\nlike:\nFirst <code>ar[0]=1</code>  frequency is 3 ,\n<code>count=3</code>  include itself, then if <code>count&gt;1</code> and if <code>count%2==0</code> then increment <code>number++</code>, \nso again if <code>1</code> come <code>ar[2]=1</code> then again count <code>1's</code> frequency from <code>ar[2]=1</code>. \nthen we got <code>1's</code> frequency <code>3,2,1</code> from <code>ar[0]</code> to <code>ar[6]</code> ,<code>ar[2]</code> to <code>ar[6]</code>, <code>ar[4]</code> to <code>ar[6]</code> .</p>\n\n<p>so we got <code>1's</code> pair <code>1 time</code> , <code>'2's</code> pair <code>1 time</code> : total= <code>2 pairs</code>.</p>\n"},{"tags":["java","android","xml","android-studio"],"answers":[{"tags":[],"owner":{"account_id":3049482,"reputation":4367,"user_id":3090120,"accept_rate":56,"display_name":"vepzfe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1633716848,"creation_date":1633716848,"answer_id":69500133,"question_id":69494770,"body_markdown":"In `view_product.xml` you are only displaying the price, but that&#39;s not where the actual data is located so your question shouldn&#39;t be that the prices are in `view_product.xml` and you want to show in `activity_main.xml`, but your question should be - \r\n\r\n1) Where is the data located \r\n2) How to make the necessary calculations \r\n3) Where to show it. . \r\n\r\nYour data regarding the prices are in `products` object. So, in order to calculate the total you just need to add one more method which calculates the total \r\n\r\n```\r\nprivate double calculateTotal(ProductDataSet productDataSet) {\r\n    double totalPrice = 0.0;\r\n    for(int i=0; i&lt;productDataSet.size(); i++) {\r\n        totalPrice += productDataSet.get(i).getPrice();\r\n    }\r\n\r\n    return totalPrice;\r\n}\r\n```\r\n\r\nThe result of this you can store in a new value or show directly in the textView itself. \r\n\r\n```\r\n((TextView)findViewById(R.id.finalTotalPrice)).setText(calculateTotal(products).toString());\r\n```\r\n\r\nThis you can call anywhere after `createInitialProductList()`. I hope this helps and makes it clear for you. ","title":"Android Studio calculate total price","body":"<p>In <code>view_product.xml</code> you are only displaying the price, but that's not where the actual data is located so your question shouldn't be that the prices are in <code>view_product.xml</code> and you want to show in <code>activity_main.xml</code>, but your question should be -</p>\n<ol>\n<li>Where is the data located</li>\n<li>How to make the necessary calculations</li>\n<li>Where to show it. .</li>\n</ol>\n<p>Your data regarding the prices are in <code>products</code> object. So, in order to calculate the total you just need to add one more method which calculates the total</p>\n<pre><code>private double calculateTotal(ProductDataSet productDataSet) {\n    double totalPrice = 0.0;\n    for(int i=0; i&lt;productDataSet.size(); i++) {\n        totalPrice += productDataSet.get(i).getPrice();\n    }\n\n    return totalPrice;\n}\n</code></pre>\n<p>The result of this you can store in a new value or show directly in the textView itself.</p>\n<pre><code>((TextView)findViewById(R.id.finalTotalPrice)).setText(calculateTotal(products).toString());\n</code></pre>\n<p>This you can call anywhere after <code>createInitialProductList()</code>. I hope this helps and makes it clear for you.</p>\n"}],"owner":{"account_id":22958145,"reputation":3,"user_id":17088449,"display_name":"user17088449"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2236,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69500133,"answer_count":1,"score":0,"last_activity_date":1633716848,"creation_date":1633690673,"question_id":69494770,"body_markdown":"I wanna ask how can I sum all patty price and display in the total ? The total is in activity_main.xml layout while all the product price is in view_product.xml .\r\n[Screenshot of app][1]\r\nAs you can see the grey color text is per patty price , and the right side black text is price after multiply the quantity of patty. I want all the black text to sum up and show at below total.\r\n\r\n\r\n```MainActivity.java```\r\n\r\n    package com.tankarjian.it212n.a2910assingment;\r\n    \r\n    import android.app.Activity;\r\n    import android.os.Bundle;\r\n    import android.widget.BaseAdapter;\r\n    import android.widget.ListView;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    public class MainActivity extends Activity {\r\n    \r\n        private Products products;\r\n        private BaseAdapter productsAdapter;\r\n    \r\n        @Override\r\n        public void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            products = createInitialProductList();\r\n            productsAdapter = new ProductsAdapter(products, productClickListener, getLayoutInflater());\r\n    \r\n            ListView productsListView = (ListView) findViewById(R.id.products_list);\r\n            productsListView.setAdapter(productsAdapter);\r\n        }\r\n    \r\n        private Products createInitialProductList() {\r\n            return new Products(new ArrayList&lt;&gt;(Arrays.asList(\r\n                    new Product(&quot;Chicken Patty&quot;, 0, 4.00),\r\n                    new Product(&quot;Chicken Special Patty&quot;, 0, 5.00),\r\n                    new Product(&quot;Imported Lamb Patty&quot;, 0, 8.00),\r\n                    new Product(&quot;Imported Lamb Special Patty&quot;, 0, 10.00)\r\n    \r\n            )));\r\n        }\r\n    \r\n        private final ProductClickListener productClickListener = new ProductClickListener() {\r\n            @Override\r\n            public void onMinusClick(Product product) {\r\n                products.removeOneFrom(product);\r\n                productsAdapter.notifyDataSetChanged();\r\n            }\r\n    \r\n            @Override\r\n            public void onPlusClick(Product product) {\r\n                products.addOneTo(product);\r\n                productsAdapter.notifyDataSetChanged();\r\n            }\r\n        };\r\n    \r\n        private static class Products implements ProductDataSet {\r\n    \r\n            private final List&lt;Product&gt; productList;\r\n    \r\n            Products(List&lt;Product&gt; productList) {\r\n                this.productList = productList;\r\n            }\r\n    \r\n            @Override\r\n            public int size() {\r\n                return productList.size();\r\n            }\r\n    \r\n            @Override\r\n            public Product get(int position) {\r\n                return productList.get(position);\r\n            }\r\n    \r\n            @Override\r\n            public long getId(int position) {\r\n                return position;\r\n            }\r\n    \r\n            public void removeOneFrom(Product product) {\r\n                int i = productList.indexOf(product);\r\n                if (i == -1) {\r\n                    throw new IndexOutOfBoundsException();\r\n                }\r\n    \r\n                Product updatedProduct = new Product(product.name, (product.quantity - 1), product.getPrice());\r\n                productList.remove(product);\r\n                productList.add(i, updatedProduct);\r\n            }\r\n    \r\n            public void addOneTo(Product product) {\r\n                int i = productList.indexOf(product);\r\n                if (i == -1) {\r\n                    throw new IndexOutOfBoundsException();\r\n                }\r\n                Product updatedProduct = new Product(product.name, (product.quantity + 1), product.getPrice());\r\n                productList.remove(product);\r\n                productList.add(i, updatedProduct);\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n```ProductsAdapter.java```\r\n\r\n    package com.tankarjian.it212n.a2910assingment;\r\n    \r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.widget.BaseAdapter;\r\n    import android.widget.ImageView;\r\n    import android.widget.TextView;\r\n    \r\n    import java.util.Locale;\r\n    \r\n    class ProductsAdapter extends BaseAdapter {\r\n    \r\n        private final ProductDataSet productDataSet;\r\n        private final ProductClickListener productClickListener;\r\n        private final LayoutInflater layoutInflater;\r\n    \r\n        ProductsAdapter(ProductDataSet productDataSet, ProductClickListener productClickListener, LayoutInflater layoutInflater) {\r\n            this.productDataSet = productDataSet;\r\n            this.productClickListener = productClickListener;\r\n            this.layoutInflater = layoutInflater;\r\n        }\r\n    \r\n        @Override\r\n        public int getCount() {\r\n            return productDataSet.size();\r\n        }\r\n    \r\n        @Override\r\n        public Product getItem(int position) {\r\n            return productDataSet.get(position);\r\n        }\r\n    \r\n        @Override\r\n        public long getItemId(int position) {\r\n            return productDataSet.getId(position);\r\n        }\r\n    \r\n        @Override\r\n        public boolean hasStableIds() {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public View getView(int position, View convertView, ViewGroup parent) {\r\n            View view = convertView;\r\n            if (view == null) {\r\n                view = createView(parent);\r\n                view.setTag(ViewHolder.from(view));\r\n            }\r\n    \r\n            Product Products =(Product) getItem(position);\r\n    \r\n            ImageView image = (ImageView) view.findViewById(R.id.imageBurgerView);\r\n            image.setImageResource(R.drawable.burger);\r\n            \r\n            TextView text = (TextView) view.findViewById(R.id.singlePrice);\r\n            String price = String.format(Locale.ENGLISH, &quot;%.2f&quot;, Products.getPrice());\r\n            text.setText(price);\r\n    \r\n            TextView text1 = (TextView) view.findViewById(R.id.totalPrice);\r\n            String totalPrice = String.format(Locale.ENGLISH, &quot;%.2f&quot;, (Products.getPrice() * Products.quantity));\r\n            text1.setText(totalPrice);\r\n    \r\n            Product product = productDataSet.get(position);\r\n            ViewHolder viewHolder = (ViewHolder) view.getTag();\r\n            update(viewHolder, product);\r\n            return view;\r\n    \r\n    \r\n        }\r\n    \r\n        private View createView(ViewGroup parent) {\r\n            return layoutInflater.inflate(R.layout.view_product, parent, false);\r\n        }\r\n    \r\n        private void update(ViewHolder viewHolder, final Product product) {\r\n            viewHolder.name.setText(product.name);\r\n            viewHolder.quantity.setText(String.valueOf(product.quantity));\r\n            viewHolder.minus.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    productClickListener.onMinusClick(product);\r\n                }\r\n            });\r\n            viewHolder.plus.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    productClickListener.onPlusClick(product);\r\n                }\r\n            });\r\n        }\r\n    \r\n        private static final class ViewHolder {\r\n            final TextView name;\r\n            final TextView quantity;\r\n            final View minus;\r\n            final View plus;\r\n    \r\n            static ViewHolder from(View view) {\r\n                return new ViewHolder(\r\n                        ((TextView) view.findViewById(R.id.product_name)),\r\n                        ((TextView) view.findViewById(R.id.product_quantity)),\r\n                        view.findViewById(R.id.product_minus),\r\n                        view.findViewById(R.id.product_plus)\r\n    \r\n                );\r\n            }\r\n    \r\n            private ViewHolder(TextView name, TextView quantity, View minus, View plus) {\r\n                this.name = name;\r\n                this.quantity = quantity;\r\n                this.minus = minus;\r\n                this.plus = plus;\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n```Product.java```\r\n\r\n    package com.tankarjian.it212n.a2910assingment;\r\n    \r\n    class Product {\r\n        final String name;\r\n        final int quantity;\r\n        private double price;\r\n    \r\n        Product(String name, int quantity, Double price) {\r\n            this.name = name;\r\n            this.quantity = quantity;\r\n            this.price = price;\r\n    \r\n        }\r\n        public double getPrice() {return price;}\r\n    }\r\n\r\n```activity_main.xml```\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_marginStart=&quot;15dp&quot;\r\n        android:layout_marginTop=&quot;16dp&quot;\r\n        android:layout_marginEnd=&quot;15dp&quot;\r\n        android:layout_marginBottom=&quot;16dp&quot;\r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n        &lt;ListView\r\n            android:id=&quot;@+id/products_list&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;512dp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.0&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.0&quot; /&gt;\r\n    \r\n        &lt;Switch\r\n            android:id=&quot;@+id/switchMember&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:minHeight=&quot;48dp&quot;\r\n            android:text=&quot;Member&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@+id/products_list&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/products_list&quot; /&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/textView2&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;25dp&quot;\r\n            android:layout_marginStart=&quot;16dp&quot;\r\n            android:text=&quot;Tax &quot;\r\n            android:textColor=&quot;#2A2F49&quot;\r\n            android:textSize=&quot;19sp&quot;\r\n            android:textStyle=&quot;bold|italic&quot;\r\n            app:layout_constraintBottom_toTopOf=&quot;@+id/textView3&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/products_list&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.92&quot; /&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/textView3&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;25dp&quot;\r\n            android:layout_marginBottom=&quot;68dp&quot;\r\n            android:text=&quot;Total &quot;\r\n            android:textColor=&quot;#2A2F49&quot;\r\n            android:textSize=&quot;19sp&quot;\r\n            android:textStyle=&quot;bold|italic&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/totalTax&quot;\r\n            android:layout_width=&quot;45dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;0&quot;\r\n            android:textColor=&quot;#2A2F49&quot;\r\n            android:textSize=&quot;19sp&quot;\r\n            android:textStyle=&quot;bold|italic&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;1.0&quot;\r\n            app:layout_constraintStart_toEndOf=&quot;@+id/textView2&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/textView7&quot; /&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/textView9&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginEnd=&quot;5dp&quot;\r\n            android:text=&quot;RM&quot;\r\n            android:textColor=&quot;#2A2F49&quot;\r\n            android:textSize=&quot;19sp&quot;\r\n            android:textStyle=&quot;bold|italic&quot;\r\n            app:layout_constraintEnd_toStartOf=&quot;@+id/totalTax&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;1.0&quot;\r\n            app:layout_constraintStart_toEndOf=&quot;@+id/textView7&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/textView7&quot; /&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/textView10&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginEnd=&quot;5dp&quot;\r\n            android:text=&quot;RM&quot;\r\n            android:textColor=&quot;#2A2F49&quot;\r\n            android:textSize=&quot;19sp&quot;\r\n            android:textStyle=&quot;bold|italic&quot;\r\n            app:layout_constraintEnd_toStartOf=&quot;@+id/finalTotalPrice&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;1.0&quot;\r\n            app:layout_constraintStart_toEndOf=&quot;@+id/textView8&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/textView8&quot; /&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/finalTotalPrice&quot;\r\n            android:layout_width=&quot;45dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;0&quot;\r\n            android:textColor=&quot;#2A2F49&quot;\r\n            android:textSize=&quot;19sp&quot;\r\n            android:textStyle=&quot;bold|italic&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;1.0&quot;\r\n            app:layout_constraintStart_toEndOf=&quot;@+id/textView3&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/textView8&quot; /&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/textView7&quot;\r\n            android:layout_width=&quot;210dp&quot;\r\n            android:layout_height=&quot;25dp&quot;\r\n            android:layout_marginStart=&quot;20dp&quot;\r\n            android:text=&quot;--------------------------------&quot;\r\n            android:textColor=&quot;#2A2F49&quot;\r\n            android:textSize=&quot;19sp&quot;\r\n            android:textStyle=&quot;bold|italic&quot;\r\n            app:layout_constraintEnd_toStartOf=&quot;@+id/totalTax&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.0&quot;\r\n            app:layout_constraintStart_toEndOf=&quot;@+id/textView2&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/textView2&quot; /&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/textView8&quot;\r\n            android:layout_width=&quot;210dp&quot;\r\n            android:layout_height=&quot;26dp&quot;\r\n            android:layout_marginStart=&quot;20dp&quot;\r\n            android:text=&quot;--------------------------------&quot;\r\n            android:textColor=&quot;#2A2F49&quot;\r\n            android:textSize=&quot;19sp&quot;\r\n            android:textStyle=&quot;bold|italic&quot;\r\n            app:layout_constraintEnd_toStartOf=&quot;@+id/finalTotalPrice&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.08&quot;\r\n            app:layout_constraintStart_toEndOf=&quot;@+id/textView3&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/textView3&quot; /&gt;\r\n    \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n```view_product.xml```\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/product_name&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:textColor=&quot;#FF5722&quot;\r\n            android:textSize=&quot;20sp&quot;\r\n            android:textStyle=&quot;bold|italic&quot; /&gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:orientation=&quot;horizontal&quot;&gt;\r\n    \r\n            &lt;ImageView\r\n                android:id=&quot;@+id/imageBurgerView&quot;\r\n                android:layout_width=&quot;70dp&quot;\r\n                android:layout_height=&quot;60dp&quot;\r\n                android:layout_marginStart=&quot;10dp&quot;\r\n                android:contentDescription=&quot;@string/todo&quot;\r\n                app:srcCompat=&quot;@drawable/burger&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/textView4&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginStart=&quot;8dp&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:text=&quot;@string/rm&quot;\r\n                android:textAlignment=&quot;textEnd&quot;\r\n                android:textColor=&quot;#878BA3&quot;\r\n                android:textSize=&quot;16sp&quot;\r\n                android:textStyle=&quot;bold&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/singlePrice&quot;\r\n                android:layout_width=&quot;108dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginStart=&quot;3dp&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:text=&quot;@string/textview&quot;\r\n                android:textColor=&quot;#878BA3&quot;\r\n                android:textSize=&quot;16sp&quot;\r\n                android:textStyle=&quot;bold&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/textView&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:text=&quot;@string/rm&quot;\r\n                android:textAlignment=&quot;textEnd&quot;\r\n                android:textColor=&quot;#272E53&quot;\r\n                android:textSize=&quot;16sp&quot;\r\n                android:textStyle=&quot;bold|italic&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/totalPrice&quot;\r\n                android:layout_width=&quot;45dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:text=&quot;@string/textview&quot;\r\n                android:textAlignment=&quot;textStart&quot;\r\n                android:textColor=&quot;#272E53&quot;\r\n                android:textSize=&quot;16sp&quot;\r\n                android:textStyle=&quot;bold|italic&quot; /&gt;\r\n        &lt;/LinearLayout&gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;116dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:orientation=&quot;horizontal&quot;&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/product_minus&quot;\r\n                android:layout_width=&quot;30dp&quot;\r\n                android:layout_height=&quot;40dp&quot;\r\n                android:text=&quot;-&quot;\r\n                tools:ignore=&quot;TouchTargetSizeCheck&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/product_quantity&quot;\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:layout_weight=&quot;20&quot;\r\n                android:textAlignment=&quot;center&quot;\r\n                android:textSize=&quot;16sp&quot;\r\n                android:textStyle=&quot;bold&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/product_plus&quot;\r\n                android:layout_width=&quot;30dp&quot;\r\n                android:layout_height=&quot;40dp&quot;\r\n                android:text=&quot;+&quot;\r\n                tools:ignore=&quot;TouchTargetSizeCheck&quot; /&gt;\r\n    \r\n        &lt;/LinearLayout&gt;\r\n    \r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sW7nw.png","title":"Android Studio calculate total price","body":"<p>I wanna ask how can I sum all patty price and display in the total ? The total is in activity_main.xml layout while all the product price is in view_product.xml .\n<a href=\"https://i.stack.imgur.com/sW7nw.png\" rel=\"nofollow noreferrer\">Screenshot of app</a>\nAs you can see the grey color text is per patty price , and the right side black text is price after multiply the quantity of patty. I want all the black text to sum up and show at below total.</p>\n<p><code>MainActivity.java</code></p>\n<pre><code>package com.tankarjian.it212n.a2910assingment;\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.widget.BaseAdapter;\nimport android.widget.ListView;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\npublic class MainActivity extends Activity {\n\n    private Products products;\n    private BaseAdapter productsAdapter;\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        products = createInitialProductList();\n        productsAdapter = new ProductsAdapter(products, productClickListener, getLayoutInflater());\n\n        ListView productsListView = (ListView) findViewById(R.id.products_list);\n        productsListView.setAdapter(productsAdapter);\n    }\n\n    private Products createInitialProductList() {\n        return new Products(new ArrayList&lt;&gt;(Arrays.asList(\n                new Product(&quot;Chicken Patty&quot;, 0, 4.00),\n                new Product(&quot;Chicken Special Patty&quot;, 0, 5.00),\n                new Product(&quot;Imported Lamb Patty&quot;, 0, 8.00),\n                new Product(&quot;Imported Lamb Special Patty&quot;, 0, 10.00)\n\n        )));\n    }\n\n    private final ProductClickListener productClickListener = new ProductClickListener() {\n        @Override\n        public void onMinusClick(Product product) {\n            products.removeOneFrom(product);\n            productsAdapter.notifyDataSetChanged();\n        }\n\n        @Override\n        public void onPlusClick(Product product) {\n            products.addOneTo(product);\n            productsAdapter.notifyDataSetChanged();\n        }\n    };\n\n    private static class Products implements ProductDataSet {\n\n        private final List&lt;Product&gt; productList;\n\n        Products(List&lt;Product&gt; productList) {\n            this.productList = productList;\n        }\n\n        @Override\n        public int size() {\n            return productList.size();\n        }\n\n        @Override\n        public Product get(int position) {\n            return productList.get(position);\n        }\n\n        @Override\n        public long getId(int position) {\n            return position;\n        }\n\n        public void removeOneFrom(Product product) {\n            int i = productList.indexOf(product);\n            if (i == -1) {\n                throw new IndexOutOfBoundsException();\n            }\n\n            Product updatedProduct = new Product(product.name, (product.quantity - 1), product.getPrice());\n            productList.remove(product);\n            productList.add(i, updatedProduct);\n        }\n\n        public void addOneTo(Product product) {\n            int i = productList.indexOf(product);\n            if (i == -1) {\n                throw new IndexOutOfBoundsException();\n            }\n            Product updatedProduct = new Product(product.name, (product.quantity + 1), product.getPrice());\n            productList.remove(product);\n            productList.add(i, updatedProduct);\n        }\n    }\n\n}\n</code></pre>\n<p><code>ProductsAdapter.java</code></p>\n<pre><code>package com.tankarjian.it212n.a2910assingment;\n\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.BaseAdapter;\nimport android.widget.ImageView;\nimport android.widget.TextView;\n\nimport java.util.Locale;\n\nclass ProductsAdapter extends BaseAdapter {\n\n    private final ProductDataSet productDataSet;\n    private final ProductClickListener productClickListener;\n    private final LayoutInflater layoutInflater;\n\n    ProductsAdapter(ProductDataSet productDataSet, ProductClickListener productClickListener, LayoutInflater layoutInflater) {\n        this.productDataSet = productDataSet;\n        this.productClickListener = productClickListener;\n        this.layoutInflater = layoutInflater;\n    }\n\n    @Override\n    public int getCount() {\n        return productDataSet.size();\n    }\n\n    @Override\n    public Product getItem(int position) {\n        return productDataSet.get(position);\n    }\n\n    @Override\n    public long getItemId(int position) {\n        return productDataSet.getId(position);\n    }\n\n    @Override\n    public boolean hasStableIds() {\n        return true;\n    }\n\n    @Override\n    public View getView(int position, View convertView, ViewGroup parent) {\n        View view = convertView;\n        if (view == null) {\n            view = createView(parent);\n            view.setTag(ViewHolder.from(view));\n        }\n\n        Product Products =(Product) getItem(position);\n\n        ImageView image = (ImageView) view.findViewById(R.id.imageBurgerView);\n        image.setImageResource(R.drawable.burger);\n        \n        TextView text = (TextView) view.findViewById(R.id.singlePrice);\n        String price = String.format(Locale.ENGLISH, &quot;%.2f&quot;, Products.getPrice());\n        text.setText(price);\n\n        TextView text1 = (TextView) view.findViewById(R.id.totalPrice);\n        String totalPrice = String.format(Locale.ENGLISH, &quot;%.2f&quot;, (Products.getPrice() * Products.quantity));\n        text1.setText(totalPrice);\n\n        Product product = productDataSet.get(position);\n        ViewHolder viewHolder = (ViewHolder) view.getTag();\n        update(viewHolder, product);\n        return view;\n\n\n    }\n\n    private View createView(ViewGroup parent) {\n        return layoutInflater.inflate(R.layout.view_product, parent, false);\n    }\n\n    private void update(ViewHolder viewHolder, final Product product) {\n        viewHolder.name.setText(product.name);\n        viewHolder.quantity.setText(String.valueOf(product.quantity));\n        viewHolder.minus.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                productClickListener.onMinusClick(product);\n            }\n        });\n        viewHolder.plus.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                productClickListener.onPlusClick(product);\n            }\n        });\n    }\n\n    private static final class ViewHolder {\n        final TextView name;\n        final TextView quantity;\n        final View minus;\n        final View plus;\n\n        static ViewHolder from(View view) {\n            return new ViewHolder(\n                    ((TextView) view.findViewById(R.id.product_name)),\n                    ((TextView) view.findViewById(R.id.product_quantity)),\n                    view.findViewById(R.id.product_minus),\n                    view.findViewById(R.id.product_plus)\n\n            );\n        }\n\n        private ViewHolder(TextView name, TextView quantity, View minus, View plus) {\n            this.name = name;\n            this.quantity = quantity;\n            this.minus = minus;\n            this.plus = plus;\n        }\n    }\n\n}\n</code></pre>\n<p><code>Product.java</code></p>\n<pre><code>package com.tankarjian.it212n.a2910assingment;\n\nclass Product {\n    final String name;\n    final int quantity;\n    private double price;\n\n    Product(String name, int quantity, Double price) {\n        this.name = name;\n        this.quantity = quantity;\n        this.price = price;\n\n    }\n    public double getPrice() {return price;}\n}\n</code></pre>\n<p><code>activity_main.xml</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:layout_marginStart=&quot;15dp&quot;\n    android:layout_marginTop=&quot;16dp&quot;\n    android:layout_marginEnd=&quot;15dp&quot;\n    android:layout_marginBottom=&quot;16dp&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;ListView\n        android:id=&quot;@+id/products_list&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;512dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.0&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.0&quot; /&gt;\n\n    &lt;Switch\n        android:id=&quot;@+id/switchMember&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:minHeight=&quot;48dp&quot;\n        android:text=&quot;Member&quot;\n        app:layout_constraintEnd_toEndOf=&quot;@+id/products_list&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/products_list&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView2&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;25dp&quot;\n        android:layout_marginStart=&quot;16dp&quot;\n        android:text=&quot;Tax &quot;\n        android:textColor=&quot;#2A2F49&quot;\n        android:textSize=&quot;19sp&quot;\n        android:textStyle=&quot;bold|italic&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@+id/textView3&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/products_list&quot;\n        app:layout_constraintVertical_bias=&quot;0.92&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView3&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;25dp&quot;\n        android:layout_marginBottom=&quot;68dp&quot;\n        android:text=&quot;Total &quot;\n        android:textColor=&quot;#2A2F49&quot;\n        android:textSize=&quot;19sp&quot;\n        android:textStyle=&quot;bold|italic&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/totalTax&quot;\n        android:layout_width=&quot;45dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;0&quot;\n        android:textColor=&quot;#2A2F49&quot;\n        android:textSize=&quot;19sp&quot;\n        android:textStyle=&quot;bold|italic&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;1.0&quot;\n        app:layout_constraintStart_toEndOf=&quot;@+id/textView2&quot;\n        app:layout_constraintTop_toTopOf=&quot;@+id/textView7&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView9&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginEnd=&quot;5dp&quot;\n        android:text=&quot;RM&quot;\n        android:textColor=&quot;#2A2F49&quot;\n        android:textSize=&quot;19sp&quot;\n        android:textStyle=&quot;bold|italic&quot;\n        app:layout_constraintEnd_toStartOf=&quot;@+id/totalTax&quot;\n        app:layout_constraintHorizontal_bias=&quot;1.0&quot;\n        app:layout_constraintStart_toEndOf=&quot;@+id/textView7&quot;\n        app:layout_constraintTop_toTopOf=&quot;@+id/textView7&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView10&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginEnd=&quot;5dp&quot;\n        android:text=&quot;RM&quot;\n        android:textColor=&quot;#2A2F49&quot;\n        android:textSize=&quot;19sp&quot;\n        android:textStyle=&quot;bold|italic&quot;\n        app:layout_constraintEnd_toStartOf=&quot;@+id/finalTotalPrice&quot;\n        app:layout_constraintHorizontal_bias=&quot;1.0&quot;\n        app:layout_constraintStart_toEndOf=&quot;@+id/textView8&quot;\n        app:layout_constraintTop_toTopOf=&quot;@+id/textView8&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/finalTotalPrice&quot;\n        android:layout_width=&quot;45dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;0&quot;\n        android:textColor=&quot;#2A2F49&quot;\n        android:textSize=&quot;19sp&quot;\n        android:textStyle=&quot;bold|italic&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;1.0&quot;\n        app:layout_constraintStart_toEndOf=&quot;@+id/textView3&quot;\n        app:layout_constraintTop_toTopOf=&quot;@+id/textView8&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView7&quot;\n        android:layout_width=&quot;210dp&quot;\n        android:layout_height=&quot;25dp&quot;\n        android:layout_marginStart=&quot;20dp&quot;\n        android:text=&quot;--------------------------------&quot;\n        android:textColor=&quot;#2A2F49&quot;\n        android:textSize=&quot;19sp&quot;\n        android:textStyle=&quot;bold|italic&quot;\n        app:layout_constraintEnd_toStartOf=&quot;@+id/totalTax&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.0&quot;\n        app:layout_constraintStart_toEndOf=&quot;@+id/textView2&quot;\n        app:layout_constraintTop_toTopOf=&quot;@+id/textView2&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView8&quot;\n        android:layout_width=&quot;210dp&quot;\n        android:layout_height=&quot;26dp&quot;\n        android:layout_marginStart=&quot;20dp&quot;\n        android:text=&quot;--------------------------------&quot;\n        android:textColor=&quot;#2A2F49&quot;\n        android:textSize=&quot;19sp&quot;\n        android:textStyle=&quot;bold|italic&quot;\n        app:layout_constraintEnd_toStartOf=&quot;@+id/finalTotalPrice&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.08&quot;\n        app:layout_constraintStart_toEndOf=&quot;@+id/textView3&quot;\n        app:layout_constraintTop_toTopOf=&quot;@+id/textView3&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p><code>view_product.xml</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:orientation=&quot;vertical&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/product_name&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:textColor=&quot;#FF5722&quot;\n        android:textSize=&quot;20sp&quot;\n        android:textStyle=&quot;bold|italic&quot; /&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;horizontal&quot;&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/imageBurgerView&quot;\n            android:layout_width=&quot;70dp&quot;\n            android:layout_height=&quot;60dp&quot;\n            android:layout_marginStart=&quot;10dp&quot;\n            android:contentDescription=&quot;@string/todo&quot;\n            app:srcCompat=&quot;@drawable/burger&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/textView4&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginStart=&quot;8dp&quot;\n            android:layout_weight=&quot;1&quot;\n            android:text=&quot;@string/rm&quot;\n            android:textAlignment=&quot;textEnd&quot;\n            android:textColor=&quot;#878BA3&quot;\n            android:textSize=&quot;16sp&quot;\n            android:textStyle=&quot;bold&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/singlePrice&quot;\n            android:layout_width=&quot;108dp&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginStart=&quot;3dp&quot;\n            android:layout_weight=&quot;1&quot;\n            android:text=&quot;@string/textview&quot;\n            android:textColor=&quot;#878BA3&quot;\n            android:textSize=&quot;16sp&quot;\n            android:textStyle=&quot;bold&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/textView&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_weight=&quot;1&quot;\n            android:text=&quot;@string/rm&quot;\n            android:textAlignment=&quot;textEnd&quot;\n            android:textColor=&quot;#272E53&quot;\n            android:textSize=&quot;16sp&quot;\n            android:textStyle=&quot;bold|italic&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/totalPrice&quot;\n            android:layout_width=&quot;45dp&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_weight=&quot;1&quot;\n            android:text=&quot;@string/textview&quot;\n            android:textAlignment=&quot;textStart&quot;\n            android:textColor=&quot;#272E53&quot;\n            android:textSize=&quot;16sp&quot;\n            android:textStyle=&quot;bold|italic&quot; /&gt;\n    &lt;/LinearLayout&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;116dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;horizontal&quot;&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/product_minus&quot;\n            android:layout_width=&quot;30dp&quot;\n            android:layout_height=&quot;40dp&quot;\n            android:text=&quot;-&quot;\n            tools:ignore=&quot;TouchTargetSizeCheck&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/product_quantity&quot;\n            android:layout_width=&quot;0dp&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:layout_weight=&quot;20&quot;\n            android:textAlignment=&quot;center&quot;\n            android:textSize=&quot;16sp&quot;\n            android:textStyle=&quot;bold&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/product_plus&quot;\n            android:layout_width=&quot;30dp&quot;\n            android:layout_height=&quot;40dp&quot;\n            android:text=&quot;+&quot;\n            tools:ignore=&quot;TouchTargetSizeCheck&quot; /&gt;\n\n    &lt;/LinearLayout&gt;\n\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"},{"tags":["java","hibernate","hibernate-envers"],"answers":[{"tags":[],"owner":{"account_id":18236,"reputation":46374,"user_id":41619,"accept_rate":91,"display_name":"Adam Paynter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1335531455,"creation_date":1335531455,"answer_id":10351032,"question_id":10350673,"body_markdown":"Judging by the examples in [the documentation][1], it appears that the primary key in my example would be (`REVISION_ID`, `CUSTOMER_ID`). Here is the example in the documentation:\r\n\r\n    create table Address (\r\n        id integer generated by default as identity (start with 1),\r\n        flatNumber integer,\r\n        houseNumber integer,\r\n        streetName varchar(255),\r\n        primary key (id)\r\n    );\r\n\r\n    create table Address_AUD (\r\n        id integer not null,\r\n        REV integer not null,\r\n        flatNumber integer,\r\n        houseNumber integer,\r\n        streetName varchar(255),\r\n        REVTYPE tinyint,\r\n        ***primary key (id, REV)***\r\n    );\r\n\r\n\r\n  [1]: http://docs.jboss.org/envers/docs/index.html#schema","title":"What is the primary key of an audit table managed by Hibernate Envers?","body":"<p>Judging by the examples in <a href=\"http://docs.jboss.org/envers/docs/index.html#schema\" rel=\"nofollow\">the documentation</a>, it appears that the primary key in my example would be (<code>REVISION_ID</code>, <code>CUSTOMER_ID</code>). Here is the example in the documentation:</p>\n\n<pre><code>create table Address (\n    id integer generated by default as identity (start with 1),\n    flatNumber integer,\n    houseNumber integer,\n    streetName varchar(255),\n    primary key (id)\n);\n\ncreate table Address_AUD (\n    id integer not null,\n    REV integer not null,\n    flatNumber integer,\n    houseNumber integer,\n    streetName varchar(255),\n    REVTYPE tinyint,\n    ***primary key (id, REV)***\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22384792,"reputation":1,"user_id":16597773,"display_name":"Prateek Mazumdar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633716639,"creation_date":1633716639,"answer_id":69500095,"question_id":10350673,"body_markdown":"The primary key of audit table is the combination of original id(id) and revision number(rev) of the audit table.\r\nAs the official documentation there can be at most one historic entry for a given entity instance at a given revision, which simply means unique combination of above two column.","title":"What is the primary key of an audit table managed by Hibernate Envers?","body":"<p>The primary key of audit table is the combination of original id(id) and revision number(rev) of the audit table.\nAs the official documentation there can be at most one historic entry for a given entity instance at a given revision, which simply means unique combination of above two column.</p>\n"}],"owner":{"account_id":18236,"reputation":46374,"user_id":41619,"accept_rate":91,"display_name":"Adam Paynter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2998,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":10351032,"answer_count":2,"score":0,"last_activity_date":1633716639,"creation_date":1335529980,"question_id":10350673,"body_markdown":"I am using Hibernate Envers to audit some entities. I manually created the associated audit tables. However, I am having trouble determining what an audit table&#39;s primary key should be. For example, consider a fictional table designed to store customers:\r\n\r\n    CREATE TABLE CUSTOMER\r\n    (\r\n        CUSTOMER_ID   INTEGER,\r\n        CUSTOMER_NAME VARCHAR(100),\r\n\r\n        PRIMARY KEY (CUSTOMER_ID)\r\n    )\r\n\r\nAnd you create the audit table:\r\n\r\n    CREATE TABLE CUSTOMER_REVISION\r\n    (\r\n        REVISION_ID      INTEGER,\r\n        REVISION_TYPE_ID INTEGER,\r\n        CUSTOMER_ID      INTEGER,\r\n        CUSTOMER_NAME    VARCHAR(100),\r\n\r\n        PRIMARY KEY (???)\r\n    )\r\n\r\nHere were the options I considered:\r\n\r\n## Primary key: `REVISION_ID`\r\n\r\nThis cannot be the primary key because multiple entities of the same class may be modified during the same revision.\r\n\r\n## Primary key: (`REVISION_ID`, `CUSTOMER_ID`)\r\n\r\nThis seems more likely, but I&#39;m not sure if Envers will insert multiple records per customer per revision.\r\n\r\n## Primary key: (`REVISION_ID`, `REVISION_TYPE_ID`, `CUSTOMER_ID`)\r\n\r\nThis seems like overkill, but it may be possible that Envers will insert different types of records (`add`, `modify` or `delete`) per customer per revision.\r\n\r\n## Primary key: A new column\r\n\r\nPerhaps the primary key must simply be another column containing a synthetic primary key.\r\n\r\n\r\n----------\r\n\r\n\r\n**What is the true primary key of an audit table managed by Hibernate Envers?**","title":"What is the primary key of an audit table managed by Hibernate Envers?","body":"<p>I am using Hibernate Envers to audit some entities. I manually created the associated audit tables. However, I am having trouble determining what an audit table's primary key should be. For example, consider a fictional table designed to store customers:</p>\n\n<pre><code>CREATE TABLE CUSTOMER\n(\n    CUSTOMER_ID   INTEGER,\n    CUSTOMER_NAME VARCHAR(100),\n\n    PRIMARY KEY (CUSTOMER_ID)\n)\n</code></pre>\n\n<p>And you create the audit table:</p>\n\n<pre><code>CREATE TABLE CUSTOMER_REVISION\n(\n    REVISION_ID      INTEGER,\n    REVISION_TYPE_ID INTEGER,\n    CUSTOMER_ID      INTEGER,\n    CUSTOMER_NAME    VARCHAR(100),\n\n    PRIMARY KEY (???)\n)\n</code></pre>\n\n<p>Here were the options I considered:</p>\n\n<h2>Primary key: <code>REVISION_ID</code></h2>\n\n<p>This cannot be the primary key because multiple entities of the same class may be modified during the same revision.</p>\n\n<h2>Primary key: (<code>REVISION_ID</code>, <code>CUSTOMER_ID</code>)</h2>\n\n<p>This seems more likely, but I'm not sure if Envers will insert multiple records per customer per revision.</p>\n\n<h2>Primary key: (<code>REVISION_ID</code>, <code>REVISION_TYPE_ID</code>, <code>CUSTOMER_ID</code>)</h2>\n\n<p>This seems like overkill, but it may be possible that Envers will insert different types of records (<code>add</code>, <code>modify</code> or <code>delete</code>) per customer per revision.</p>\n\n<h2>Primary key: A new column</h2>\n\n<p>Perhaps the primary key must simply be another column containing a synthetic primary key.</p>\n\n<hr>\n\n<p><strong>What is the true primary key of an audit table managed by Hibernate Envers?</strong></p>\n"},{"tags":["java","user-input"],"comments":[{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1633713648,"post_id":69499577,"comment_id":122842085,"body_markdown":"Try &quot;scanner.next()&quot; without the split.  You should get &quot;10&quot;, then &quot;20&quot;.  If you saved to a List&lt;String&gt; instead of a String[] array, then you should be able to read your tokens directly from user input into your Java container.","body":"Try &quot;scanner.next()&quot; without the split.  You should get &quot;10&quot;, then &quot;20&quot;.  If you saved to a List&lt;String&gt; instead of a String[] array, then you should be able to read your tokens directly from user input into your Java container."},{"owner":{"account_id":18955796,"reputation":62,"user_id":13832419,"display_name":"Code With Faraz"},"score":0,"creation_date":1633713724,"post_id":69499577,"comment_id":122842110,"body_markdown":"Please elaborate","body":"Please elaborate"},{"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"score":0,"creation_date":1633716069,"post_id":69499577,"comment_id":122842891,"body_markdown":"Include the definition of `sc` - it is assumed that it is a `Scanner` but how it is defined impacts how it behaves.","body":"Include the definition of <code>sc</code> - it is assumed that it is a <code>Scanner</code> but how it is defined impacts how it behaves."}],"answers":[{"tags":[],"owner":{"account_id":9389442,"reputation":321,"user_id":9121818,"display_name":"Shashwat Kaundinya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633716221,"creation_date":1633715116,"answer_id":69499845,"question_id":69499577,"body_markdown":"You should use *sc.nextLine()* insteand of *sc.next()*.\r\n\r\nAs per javadoc, *sc.next()*\r\n```Finds and returns the next complete token from this scanner.```\r\n\r\n*sc.next()* will return first &quot;**token**&quot; (10 in your case, as your input is tokenized by &quot;space&quot; between 10 and 20).\r\n\r\nSo your code should look like below, for what you expect:\r\n``` java\r\n    Scanner sc = new Scanner(System.in);\r\n    System.out.print(&quot;Enter an integer width and height between 2 and 25: &quot;);\r\n    String[] str = sc.nextLine().split(&quot; &quot;);\r\n\tSystem.out.print(str.length);\r\n    sc.close();\r\n```","title":"How can I take user input separated by space in Java","body":"<p>You should use <em>sc.nextLine()</em> insteand of <em>sc.next()</em>.</p>\n<p>As per javadoc, <em>sc.next()</em>\n<code>Finds and returns the next complete token from this scanner.</code></p>\n<p><em>sc.next()</em> will return first &quot;<strong>token</strong>&quot; (10 in your case, as your input is tokenized by &quot;space&quot; between 10 and 20).</p>\n<p>So your code should look like below, for what you expect:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    Scanner sc = new Scanner(System.in);\n    System.out.print(&quot;Enter an integer width and height between 2 and 25: &quot;);\n    String[] str = sc.nextLine().split(&quot; &quot;);\n    System.out.print(str.length);\n    sc.close();\n</code></pre>\n"}],"owner":{"account_id":18955796,"reputation":62,"user_id":13832419,"display_name":"Code With Faraz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3067,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1633716221,"creation_date":1633713441,"question_id":69499577,"body_markdown":"``` \r\nSystem.out.print(&quot;Enter an integer width and height between 2 and 25: &quot;);\r\nString[] str = sc.next().split(&quot; &quot;);\r\nSystem.out.print(str.length);\r\n```\r\n\r\nI want to take user input separated by space but it is only taking first input. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DHdxU.png","title":"How can I take user input separated by space in Java","body":"<pre><code>System.out.print(&quot;Enter an integer width and height between 2 and 25: &quot;);\nString[] str = sc.next().split(&quot; &quot;);\nSystem.out.print(str.length);\n</code></pre>\n<p>I want to take user input separated by space but it is only taking first input.</p>\n<p><a href=\"https://i.stack.imgur.com/DHdxU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DHdxU.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":12206189,"reputation":5872,"user_id":8909235,"display_name":"lkatiforis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1633715707,"creation_date":1633715707,"answer_id":69499951,"question_id":69498628,"body_markdown":"The `javax.persistence.NonUniqueResultException` indicates that there is more than one result from the query. Looking at your data, indeed, you have more than one row where the `slpCode` is `700`.\r\n\r\nYou have to change the return type to List of `Vendedor`:\r\n\r\n    List&lt;Vendedor&gt; findVendedorBySlpCode (Long slpCode);\r\n\r\nIf no vendors are found an empty list will be returned.","title":"How can I show Multiple Rows in JSON","body":"<p>The <code>javax.persistence.NonUniqueResultException</code> indicates that there is more than one result from the query. Looking at your data, indeed, you have more than one row where the <code>slpCode</code> is <code>700</code>.</p>\n<p>You have to change the return type to List of <code>Vendedor</code>:</p>\n<pre><code>List&lt;Vendedor&gt; findVendedorBySlpCode (Long slpCode);\n</code></pre>\n<p>If no vendors are found an empty list will be returned.</p>\n"}],"owner":{"account_id":21745909,"reputation":9,"user_id":16052590,"display_name":"Hugo Porfirio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69499951,"answer_count":1,"score":0,"last_activity_date":1633716159,"creation_date":1633708474,"question_id":69498628,"body_markdown":"I need to show [sql result][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oN1VW.png\r\n\r\nin a JSON like this \r\n\r\n    {\r\n    slpcode: 700,\r\n    businesspartnerparamid:{181,\r\n                            195,\r\n                            197,\r\n                            362,\r\n                            376\r\n                            }\r\n    }\r\nin a spring boot app.\r\n\r\nClass\r\n\r\n```\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.NoArgsConstructor;\r\n\r\nimport javax.persistence.*;\r\n\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Entity\r\n@Table(name=&quot;businesspartnerparamsalesperson&quot;)\r\npublic class Vendedor {\r\n\r\n    @Id\r\n    @Column(name=&quot;businesspartnerparamid&quot;, nullable = false)\r\n    private Long businessPartnerParamID;\r\n\r\n    @Column(name=&quot;Slpcode&quot;,nullable = false)\r\n    private Long slpCode;\r\n\r\n    public Long getBusinessPartnerParamID() {\r\n        return businessPartnerParamID;\r\n    }\r\n\r\n    public void setBusinessPartnerParamID(Long businessPartnerParamID) {\r\n        this.businessPartnerParamID = businessPartnerParamID;\r\n    }\r\n\r\n    public Long getSlpCode() {\r\n        return slpCode;\r\n    }\r\n\r\n    public void setSlpCode(Long slpCode) {\r\n        slpCode = slpCode;\r\n    }\r\n}\r\n\r\n```\r\nRepo\r\n\r\n```\r\nRepository\r\npublic interface VendedorRepository extends JpaRepository&lt;Vendedor, Long&gt; {\r\n\r\n\r\n\r\n    Optional&lt;Vendedor&gt; findVendedorBySlpCode (Long slpCode);\r\n\r\n\r\n\r\n}\r\n```\r\n\r\nService\r\n\r\n```\r\n@Service\r\n@AllArgsConstructor\r\npublic class ApiService {\r\n\r\n    @Autowired\r\n    private final VendedorRepository vendedorRepository;\r\n\r\n    @Autowired\r\n    private final ClienteRepository clienteRepository;\r\n\r\n    public Optional&lt;Vendedor&gt; findVendedorByCode (Long slpCode) {\r\n        Optional&lt;Vendedor&gt; vendedor = vendedorRepository.findVendedorBySlpCode(slpCode);\r\n\r\n        return vendedor;\r\n    }\r\n\r\n    public Optional&lt;Cliente&gt; findClienteByCode (String code){\r\n        Optional&lt;Cliente&gt; cliente = clienteRepository.findClienteByCardCode(code);\r\n\r\n        return cliente;\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nController\r\n\r\n```\r\n@CrossOrigin\r\n@RestController\r\n@EnableAutoConfiguration\r\n@RequestMapping(&quot;/vendedor&quot;)\r\n@AllArgsConstructor\r\npublic class ApiController {\r\n\r\n    @Autowired\r\n    private ApiService apiService;\r\n\r\n\r\n    @GetMapping(value=&quot;/{slpCode}&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n    public Optional&lt;Vendedor&gt; findVendedorBySlpCode (@PathVariable Long slpCode){\r\n        return apiService.findVendedorByCode(slpCode);\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m getting this message on log: \r\n\r\n&gt;query did not return a unique result: 94; nested exception is &gt;javax.persistence.NonUniqueResultException: query did not return a unique result: 94\r\n\r\nAfter that, I wanna delete/update all of salesperson associated id&#39;s (transfer clients (id&#39;s) from one to another .","title":"How can I show Multiple Rows in JSON","body":"<p>I need to show <a href=\"https://i.stack.imgur.com/oN1VW.png\" rel=\"nofollow noreferrer\">sql result</a></p>\n<p>in a JSON like this</p>\n<pre><code>{\nslpcode: 700,\nbusinesspartnerparamid:{181,\n                        195,\n                        197,\n                        362,\n                        376\n                        }\n}\n</code></pre>\n<p>in a spring boot app.</p>\n<p>Class</p>\n<pre><code>import lombok.AllArgsConstructor;\nimport lombok.NoArgsConstructor;\n\nimport javax.persistence.*;\n\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n@Table(name=&quot;businesspartnerparamsalesperson&quot;)\npublic class Vendedor {\n\n    @Id\n    @Column(name=&quot;businesspartnerparamid&quot;, nullable = false)\n    private Long businessPartnerParamID;\n\n    @Column(name=&quot;Slpcode&quot;,nullable = false)\n    private Long slpCode;\n\n    public Long getBusinessPartnerParamID() {\n        return businessPartnerParamID;\n    }\n\n    public void setBusinessPartnerParamID(Long businessPartnerParamID) {\n        this.businessPartnerParamID = businessPartnerParamID;\n    }\n\n    public Long getSlpCode() {\n        return slpCode;\n    }\n\n    public void setSlpCode(Long slpCode) {\n        slpCode = slpCode;\n    }\n}\n\n</code></pre>\n<p>Repo</p>\n<pre><code>Repository\npublic interface VendedorRepository extends JpaRepository&lt;Vendedor, Long&gt; {\n\n\n\n    Optional&lt;Vendedor&gt; findVendedorBySlpCode (Long slpCode);\n\n\n\n}\n</code></pre>\n<p>Service</p>\n<pre><code>@Service\n@AllArgsConstructor\npublic class ApiService {\n\n    @Autowired\n    private final VendedorRepository vendedorRepository;\n\n    @Autowired\n    private final ClienteRepository clienteRepository;\n\n    public Optional&lt;Vendedor&gt; findVendedorByCode (Long slpCode) {\n        Optional&lt;Vendedor&gt; vendedor = vendedorRepository.findVendedorBySlpCode(slpCode);\n\n        return vendedor;\n    }\n\n    public Optional&lt;Cliente&gt; findClienteByCode (String code){\n        Optional&lt;Cliente&gt; cliente = clienteRepository.findClienteByCardCode(code);\n\n        return cliente;\n    }\n\n\n}\n</code></pre>\n<p>Controller</p>\n<pre><code>@CrossOrigin\n@RestController\n@EnableAutoConfiguration\n@RequestMapping(&quot;/vendedor&quot;)\n@AllArgsConstructor\npublic class ApiController {\n\n    @Autowired\n    private ApiService apiService;\n\n\n    @GetMapping(value=&quot;/{slpCode}&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\n    public Optional&lt;Vendedor&gt; findVendedorBySlpCode (@PathVariable Long slpCode){\n        return apiService.findVendedorByCode(slpCode);\n    }\n}\n</code></pre>\n<p>I'm getting this message on log:</p>\n<blockquote>\n<p>query did not return a unique result: 94; nested exception is &gt;javax.persistence.NonUniqueResultException: query did not return a unique result: 94</p>\n</blockquote>\n<p>After that, I wanna delete/update all of salesperson associated id's (transfer clients (id's) from one to another .</p>\n"},{"tags":["java","multithreading","swing","repaint","thread-sleep"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1578414472,"post_id":59632239,"comment_id":105426984,"body_markdown":"First, read https://docs.oracle.com/javase/tutorial/uiswing/painting/. Second, `while (true) repaint();` will choke the Swing event thread; you don’t need to paint hundreds of times per second. Only call repaint() when the data that determines what gets painted has changed. Third, you must use javax.swing.Timer or java.awt.EventQueue.invokeLater(…) to make sure you only call Swing methods from the AWT Event Dispatch Thread; see https://docs.oracle.com/javase/tutorial/uiswing/concurrency/.","body":"First, read <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/painting</a>. Second, <code>while (true) repaint();</code> will choke the Swing event thread; you don’t need to paint hundreds of times per second. Only call repaint() when the data that determines what gets painted has changed. Third, you must use javax.swing.Timer or java.awt.EventQueue.invokeLater(…) to make sure you only call Swing methods from the AWT Event Dispatch Thread; see <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/concurrency</a>."},{"owner":{"account_id":1887489,"reputation":8619,"user_id":4811873,"accept_rate":6,"display_name":"Mike Robinson"},"score":0,"creation_date":1578416436,"post_id":59632239,"comment_id":105427961,"body_markdown":"In general, it is also advisable to delegate &quot;painting&quot; and other such user-interface tasks to one thread ... perhaps, a thread that does nothing else.  This thread might sleep waiting for an asynchronous signal that tells it, &quot;please now go and update the user interface,&quot; whereupon it wakes up and does so.  (This design also avoids overwhelming the GUI with requests.)","body":"In general, it is also advisable to delegate &quot;painting&quot; and other such user-interface tasks to one thread ... perhaps, a thread that does nothing else.  This thread might sleep waiting for an asynchronous signal that tells it, &quot;please now go and update the user interface,&quot; whereupon it wakes up and does so.  (This design also avoids overwhelming the GUI with requests.)"},{"owner":{"account_id":17295833,"reputation":21,"user_id":12526525,"display_name":"Ryan Yonata"},"score":0,"creation_date":1578416449,"post_id":59632239,"comment_id":105427965,"body_markdown":"I have tried to use timer but I don&#39;t understand how to use it with graphics","body":"I have tried to use timer but I don&#39;t understand how to use it with graphics"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1578420371,"post_id":59632239,"comment_id":105429775,"body_markdown":"You don’t use Graphics with a Timer.  A Timer’s ActionListener should call `repaint()`, which causes Swing to automatically invoke paintComponent (and some other painting methods).","body":"You don’t use Graphics with a Timer.  A Timer’s ActionListener should call <code>repaint()</code>, which causes Swing to automatically invoke paintComponent (and some other painting methods)."}],"answers":[{"tags":[],"owner":{"account_id":5556674,"reputation":72,"user_id":4407802,"display_name":"Đo&#224;n Bảo Trung"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1578415763,"creation_date":1578415763,"answer_id":59632726,"question_id":59632239,"body_markdown":"I don&#39;t understand clearly your issue about repaint?\r\nIf you want to refresh ui immediately, why don&#39;t you use paintImmediately(0, 0, getWidth(), getHeight());","title":"Java - Different paint with multiple threads that have thread.sleep","body":"<p>I don't understand clearly your issue about repaint?\nIf you want to refresh ui immediately, why don't you use paintImmediately(0, 0, getWidth(), getHeight());</p>\n"}],"owner":{"account_id":17295833,"reputation":21,"user_id":12526525,"display_name":"Ryan Yonata"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1633715848,"creation_date":1578414045,"question_id":59632239,"body_markdown":"I&#39;m newbie and I&#39;m trying to make a game but than I don&#39;t understand how to use repaint() from different paint with different threads too. One thread with thread.sleep and the other one doesn&#39;t have.\r\n\r\nHere&#39;s my piece of code :\r\n\r\nGamePanel :\r\n\r\n    public class GamePanel extends JPanel implements MouseListener, MouseMotionListener{\r\n\t\r\n    EnemyEngine enemyE = new EnemyEngine();\r\n    \r\n    public GamePanel() {\r\n    \t\r\n    \tnew Thread(new Runnable() {\r\n    \t\t\r\n    \t\t@Override\r\n    \t\tpublic void run() {\r\n    \t\t\twhile(true){\t\t\t\r\n    \t\t\t\trepaint();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}).start();\r\n    \t\r\n    \tnew Thread(new Runnable() {\r\n    \t\t\r\n    \t\t@Override\r\n    \t\tpublic void run() {\r\n    \t\t\twhile(true){\t\t\t\r\n    \t\t\t\tenemyE.update();\r\n    \t\t\t\tenemyE.repaint();\r\n    \t\t\t\t\r\n    \t\t\t\ttry { \r\n    \t\t\t\t\tThread.sleep(1000/10);\r\n    \t\t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}).start();\r\n    }\r\n    public void paintComponent(Graphics g) {\r\n    \t// board painting\r\n    }\r\n\r\n    }\r\n\r\nEnemyEngine:\r\n\r\n    public class EnemyEngine extends JPanel{\r\n\r\n\tVector&lt;Enemy&gt; enemyVect = new Vector&lt;&gt;();\r\n\t\r\n\tRandom rand = new Random();\r\n\t\r\n\tpublic void paintComponent(Graphics g){\r\n\t\tfor (Enemy enemy : enemyVect) {\r\n\t\t\tenemy.render(g);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void update() { \r\n\t\tfor (Enemy enemy : enemyVect) {\r\n\t\t\tenemy.move();\r\n\t\t}\r\n\t}\r\n\r\n    }\r\n\r\nI have already search on the internet but it still didn&#39;t work...or maybe I&#39;m the stupid one :/\r\n\r\nPlease help me senpai","title":"Java - Different paint with multiple threads that have thread.sleep","body":"<p>I'm newbie and I'm trying to make a game but than I don't understand how to use repaint() from different paint with different threads too. One thread with thread.sleep and the other one doesn't have.</p>\n\n<p>Here's my piece of code :</p>\n\n<p>GamePanel :</p>\n\n<pre><code>public class GamePanel extends JPanel implements MouseListener, MouseMotionListener{\n\nEnemyEngine enemyE = new EnemyEngine();\n\npublic GamePanel() {\n\n    new Thread(new Runnable() {\n\n        @Override\n        public void run() {\n            while(true){            \n                repaint();\n            }\n        }\n    }).start();\n\n    new Thread(new Runnable() {\n\n        @Override\n        public void run() {\n            while(true){            \n                enemyE.update();\n                enemyE.repaint();\n\n                try { \n                    Thread.sleep(1000/10);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n    }).start();\n}\npublic void paintComponent(Graphics g) {\n    // board painting\n}\n\n}\n</code></pre>\n\n<p>EnemyEngine:</p>\n\n<pre><code>public class EnemyEngine extends JPanel{\n\nVector&lt;Enemy&gt; enemyVect = new Vector&lt;&gt;();\n\nRandom rand = new Random();\n\npublic void paintComponent(Graphics g){\n    for (Enemy enemy : enemyVect) {\n        enemy.render(g);\n    }\n}\n\npublic void update() { \n    for (Enemy enemy : enemyVect) {\n        enemy.move();\n    }\n}\n\n}\n</code></pre>\n\n<p>I have already search on the internet but it still didn't work...or maybe I'm the stupid one :/</p>\n\n<p>Please help me senpai</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":2,"creation_date":1633715796,"post_id":69499852,"comment_id":122842794,"body_markdown":"`isModel` should be `getModel`. Your assertion should be for `TestEnum.EXACT`.","body":"<code>isModel</code> should be <code>getModel</code>. Your assertion should be for <code>TestEnum.EXACT</code>."},{"owner":{"display_name":"user14734781"},"score":0,"creation_date":1633715833,"post_id":69499852,"comment_id":122842813,"body_markdown":"method namet matters?","body":"method namet matters?"},{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1633715855,"post_id":69499852,"comment_id":122842820,"body_markdown":"Yes, bean naming convention applies by default.","body":"Yes, bean naming convention applies by default."},{"owner":{"display_name":"user14734781"},"score":0,"creation_date":1633716054,"post_id":69499852,"comment_id":122842882,"body_markdown":"yes, its working. Reason I had isModel method is because I moved from boolean to Enum.","body":"yes, its working. Reason I had isModel method is because I moved from boolean to Enum."}],"owner":{"display_name":"user14734781"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1633715839,"creation_date":1633715159,"question_id":69499852,"body_markdown":"I am having problem deserializing a json string into java object . It is not working as expected. I want the enum code in model\r\n\r\nMy test:\r\n\r\n\r\n    class ConversionTest {\r\n    \r\n    \tprivate String input = &quot;{\\&quot;model\\&quot;:1}&quot;;\r\n    \t\t\r\n    \t@Test\r\n    \tvoid convertJsonToTestModel() throws JsonMappingException, JsonProcessingException {\r\n    \t\tObjectMapper mapper = new ObjectMapper();\r\n    \t\tTestModel m = mapper.readValue(input, TestModel.class);\r\n    \t\tSystem.out.println(mapper.writeValueAsString(m));\r\n    \t\tassertTrue(m.isModel()==TestEnum.ANYORDER);\r\n    \t}\r\n    \t\r\n    \t@Test\r\n    \tvoid convertTestModelToJson_EnumShouldBeCode() throws JsonMappingException, JsonProcessingException {\r\n    \t\tObjectMapper mapper = new ObjectMapper();\r\n    \t\tTestModel m = mapper.readValue(input, TestModel.class);\r\n    \t\t\r\n    \t\tSystem.out.println(mapper.writeValueAsString(m));\r\n    \t}\r\n    }\r\n\r\nOutput:\r\n\r\n&gt; {}  \r\n&gt; {}\r\n\r\n\r\nSource:\r\n\r\n    @JsonInclude(Include.NON_NULL)\r\n    public class TestModel {\r\n    \t\r\n    \tprivate TestEnum model;\r\n    \r\n    \tpublic TestEnum isModel() {\r\n    \t\treturn model;\r\n    \t}\r\n    \r\n    \tpublic void setModel(TestEnum model) {\r\n    \t\tthis.model = model;\r\n    \t}\r\n    }\r\n    import java.util.stream.Stream;\r\n    \r\n    import com.fasterxml.jackson.annotation.JsonCreator;\r\n    import com.fasterxml.jackson.annotation.JsonProperty;\r\n    import com.fasterxml.jackson.annotation.JsonValue;\r\n    \r\n    //@JsonFormat(shape = JsonFormat.Shape.OBJECT)\r\n    //@JsonFormat(shape = JsonFormat.Shape.NUMBER)\r\n    public enum TestEnum {\r\n    \t\r\n    \t\t@JsonProperty(&quot;0&quot;)\r\n    \t    ANYMATCH(0),   \r\n    \t    @JsonProperty(&quot;1&quot;)\r\n    \t    EXACT(1),\r\n    \t    @JsonProperty(&quot;2&quot;)\r\n    \t    ANYORDER(2);\r\n    \r\n    \t\tpublic final int code;\r\n    \t\t\r\n    \t    private TestEnum(int code) {\r\n    \t        this.code = code;\r\n    \t    }\r\n    \t    \r\n    \t\t@JsonValue\r\n    \t\tpublic int getCode() {\r\n    \t\t\treturn code;\r\n    \t\t}\r\n    \t\t@JsonCreator\r\n    \t\tpublic static TestEnum decode(final int code) {\r\n    \t\t\treturn Stream.of(TestEnum.values()).filter(targetEnum -&gt; targetEnum.code == code).findFirst().orElse(null);\r\n    \t\t}\t\t\r\n    }\r\n\r\nI think Create is ok i.e. TestModel m = mapper.readValue(input, TestModel.class); \r\n\r\nwhats wrong with in write value as string  code? could it be library version issue?\r\n\r\n(note: tried removing - @JsonProperty(&quot;0&quot;)) \r\n","title":"Jackson json enum not deserializing correctly","body":"<p>I am having problem deserializing a json string into java object . It is not working as expected. I want the enum code in model</p>\n<p>My test:</p>\n<pre><code>class ConversionTest {\n\n    private String input = &quot;{\\&quot;model\\&quot;:1}&quot;;\n        \n    @Test\n    void convertJsonToTestModel() throws JsonMappingException, JsonProcessingException {\n        ObjectMapper mapper = new ObjectMapper();\n        TestModel m = mapper.readValue(input, TestModel.class);\n        System.out.println(mapper.writeValueAsString(m));\n        assertTrue(m.isModel()==TestEnum.ANYORDER);\n    }\n    \n    @Test\n    void convertTestModelToJson_EnumShouldBeCode() throws JsonMappingException, JsonProcessingException {\n        ObjectMapper mapper = new ObjectMapper();\n        TestModel m = mapper.readValue(input, TestModel.class);\n        \n        System.out.println(mapper.writeValueAsString(m));\n    }\n}\n</code></pre>\n<p>Output:</p>\n<blockquote>\n<p>{}<br />\n{}</p>\n</blockquote>\n<p>Source:</p>\n<pre><code>@JsonInclude(Include.NON_NULL)\npublic class TestModel {\n    \n    private TestEnum model;\n\n    public TestEnum isModel() {\n        return model;\n    }\n\n    public void setModel(TestEnum model) {\n        this.model = model;\n    }\n}\nimport java.util.stream.Stream;\n\nimport com.fasterxml.jackson.annotation.JsonCreator;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.annotation.JsonValue;\n\n//@JsonFormat(shape = JsonFormat.Shape.OBJECT)\n//@JsonFormat(shape = JsonFormat.Shape.NUMBER)\npublic enum TestEnum {\n    \n        @JsonProperty(&quot;0&quot;)\n        ANYMATCH(0),   \n        @JsonProperty(&quot;1&quot;)\n        EXACT(1),\n        @JsonProperty(&quot;2&quot;)\n        ANYORDER(2);\n\n        public final int code;\n        \n        private TestEnum(int code) {\n            this.code = code;\n        }\n        \n        @JsonValue\n        public int getCode() {\n            return code;\n        }\n        @JsonCreator\n        public static TestEnum decode(final int code) {\n            return Stream.of(TestEnum.values()).filter(targetEnum -&gt; targetEnum.code == code).findFirst().orElse(null);\n        }       \n}\n</code></pre>\n<p>I think Create is ok i.e. TestModel m = mapper.readValue(input, TestModel.class);</p>\n<p>whats wrong with in write value as string  code? could it be library version issue?</p>\n<p>(note: tried removing - @JsonProperty(&quot;0&quot;))</p>\n"},{"tags":["java","arrays","copy"],"answers":[{"tags":[],"owner":{"account_id":101585,"reputation":107721,"user_id":273200,"accept_rate":100,"display_name":"Bala R"},"down_vote_count":0,"up_vote_count":633,"is_accepted":false,"score":633,"last_activity_date":1584453863,"creation_date":1303790337,"answer_id":5785754,"question_id":5785745,"body_markdown":"You can try using [System.arraycopy()][1]\r\n\r\n    int[] src  = new int[]{1,2,3,4,5};\r\n    int[] dest = new int[5];\r\n    \r\n    System.arraycopy( src, 0, dest, 0, src.length );\r\n\r\nBut, probably better to use clone() in most cases:\r\n\r\n    int[] src = ...\r\n    int[] dest = src.clone();\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29","title":"Make copy of an array","body":"<p>You can try using <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29\" rel=\"noreferrer\">System.arraycopy()</a></p>\n\n<pre><code>int[] src  = new int[]{1,2,3,4,5};\nint[] dest = new int[5];\n\nSystem.arraycopy( src, 0, dest, 0, src.length );\n</code></pre>\n\n<p>But, probably better to use clone() in most cases:</p>\n\n<pre><code>int[] src = ...\nint[] dest = src.clone();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":35502,"reputation":28362,"user_id":100565,"accept_rate":59,"display_name":"MeBigFatGuy"},"down_vote_count":3,"up_vote_count":249,"is_accepted":false,"score":246,"last_activity_date":1375021872,"creation_date":1303790856,"answer_id":5785821,"question_id":5785745,"body_markdown":"you can use\r\n\r\n    int[] a = new int[]{1,2,3,4,5};\r\n    int[] b = a.clone();\r\n\r\nas well.","title":"Make copy of an array","body":"<p>you can use</p>\n\n<pre><code>int[] a = new int[]{1,2,3,4,5};\nint[] b = a.clone();\n</code></pre>\n\n<p>as well.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1578019256,"creation_date":1303793378,"answer_id":5786075,"question_id":5785745,"body_markdown":"I have a feeling that all of these &quot;better ways to copy an array&quot; are not really going to solve your problem.\r\n\r\nYou say\r\n\r\n&gt; I tried a for loop like [...] but that doesn&#39;t seem to be working correctly?\r\n\r\nLooking at that loop, there&#39;s **no obvious reason** for it not to work ... unless:\r\n\r\n  - you somehow have the `a` and `b` arrays messed up (e.g. `a` and `b` refer to the same array), or\r\n  - your application is multi-threaded and different threads are reading and updating the `a` array simultaneously.\r\n\r\nIn either case, alternative ways of doing the copying won&#39;t solve the underlying problem.\r\n\r\nThe fix for the first scenario is obvious.  For the second scenario you will have to figure out some way of synchronizing the threads.  Atomic array classes don&#39;t help because they have no atomic copy constructors or clone methods, but synchronizing using a primitive mutex will do the trick.\r\n\r\n(There are hints in your question that lead me to think that this is indeed thread related; e.g. your statement that `a` is constantly changing.)","title":"Make copy of an array","body":"<p>I have a feeling that all of these \"better ways to copy an array\" are not really going to solve your problem.</p>\n\n<p>You say</p>\n\n<blockquote>\n  <p>I tried a for loop like [...] but that doesn't seem to be working correctly?</p>\n</blockquote>\n\n<p>Looking at that loop, there's <strong>no obvious reason</strong> for it not to work ... unless:</p>\n\n<ul>\n<li>you somehow have the <code>a</code> and <code>b</code> arrays messed up (e.g. <code>a</code> and <code>b</code> refer to the same array), or</li>\n<li>your application is multi-threaded and different threads are reading and updating the <code>a</code> array simultaneously.</li>\n</ul>\n\n<p>In either case, alternative ways of doing the copying won't solve the underlying problem.</p>\n\n<p>The fix for the first scenario is obvious.  For the second scenario you will have to figure out some way of synchronizing the threads.  Atomic array classes don't help because they have no atomic copy constructors or clone methods, but synchronizing using a primitive mutex will do the trick.</p>\n\n<p>(There are hints in your question that lead me to think that this is indeed thread related; e.g. your statement that <code>a</code> is constantly changing.)</p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":1,"up_vote_count":201,"is_accepted":false,"score":200,"last_activity_date":1633715783,"creation_date":1365740095,"answer_id":15962949,"question_id":5785745,"body_markdown":"If you want to make a copy of:\r\n\r\n    int[] a = {1,2,3,4,5};\r\n\r\nThis is the way to go:\r\n\r\n    int[] b = Arrays.copyOf(a, a.length);\r\n\r\n[`Arrays.copyOf`](https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#copyOf-int:A-int-) may be faster than [`a.clone()`](https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--) on small arrays. Both copy elements equally fast but clone() returns `Object` so the compiler has to insert an implicit cast to `int[]`. You can see it in the bytecode, something like this:\r\n\r\n    ALOAD 1\r\n    INVOKEVIRTUAL [I.clone ()Ljava/lang/Object;\r\n    CHECKCAST [I\r\n    ASTORE 2\r\n\r\n","title":"Make copy of an array","body":"<p>If you want to make a copy of:</p>\n<pre><code>int[] a = {1,2,3,4,5};\n</code></pre>\n<p>This is the way to go:</p>\n<pre><code>int[] b = Arrays.copyOf(a, a.length);\n</code></pre>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#copyOf-int:A-int-\" rel=\"noreferrer\"><code>Arrays.copyOf</code></a> may be faster than <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--\" rel=\"noreferrer\"><code>a.clone()</code></a> on small arrays. Both copy elements equally fast but clone() returns <code>Object</code> so the compiler has to insert an implicit cast to <code>int[]</code>. You can see it in the bytecode, something like this:</p>\n<pre><code>ALOAD 1\nINVOKEVIRTUAL [I.clone ()Ljava/lang/Object;\nCHECKCAST [I\nASTORE 2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1301815,"reputation":31761,"user_id":1251549,"accept_rate":29,"display_name":"Cherry"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1384428640,"creation_date":1384428640,"answer_id":19976527,"question_id":5785745,"body_markdown":"All solution that call length from array, add your code redundant null checkersconsider example:\r\n\r\n    int[] a = {1,2,3,4,5};\r\n\tint[] b = Arrays.copyOf(a, a.length);\r\n\tint[] c = a.clone();\r\n\t\r\n\t//What if array a comes as local parameter? You need to use null check:\r\n\t\r\n\tpublic void someMethod(int[] a) {\r\n\t\tif (a!=null) {\r\n\t\t\tint[] b = Arrays.copyOf(a, a.length);\r\n\t\t\tint[] c = a.clone();\r\n\t\t}\r\n\t}\r\n\t\r\nI recommend you not inventing the wheel and use utility class where all necessary checks have already performed. Consider ArrayUtils from apache commons. You code become shorter:\r\n\r\n\tpublic void someMethod(int[] a) {\r\n\t\tint[] b = ArrayUtils.clone(a);\r\n\t}\r\n\t\r\nApache commons you can find [there][1]\r\n\r\n\r\n  [1]: http://mvnrepository.com/artifact/commons-lang/commons-lang","title":"Make copy of an array","body":"<p>All solution that call length from array, add your code redundant null checkersconsider example:</p>\n\n<pre><code>int[] a = {1,2,3,4,5};\nint[] b = Arrays.copyOf(a, a.length);\nint[] c = a.clone();\n\n//What if array a comes as local parameter? You need to use null check:\n\npublic void someMethod(int[] a) {\n    if (a!=null) {\n        int[] b = Arrays.copyOf(a, a.length);\n        int[] c = a.clone();\n    }\n}\n</code></pre>\n\n<p>I recommend you not inventing the wheel and use utility class where all necessary checks have already performed. Consider ArrayUtils from apache commons. You code become shorter:</p>\n\n<pre><code>public void someMethod(int[] a) {\n    int[] b = ArrayUtils.clone(a);\n}\n</code></pre>\n\n<p>Apache commons you can find <a href=\"http://mvnrepository.com/artifact/commons-lang/commons-lang\" rel=\"noreferrer\">there</a></p>\n"},{"tags":[],"owner":{"account_id":4812242,"reputation":55062,"user_id":3885376,"accept_rate":64,"display_name":"ROMANIA_engineer"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1453074207,"creation_date":1453074207,"answer_id":34845194,"question_id":5785745,"body_markdown":"You can also use [`Arrays.copyOfRange`][1].\r\n\r\n**Example**:\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tint[] a = {1,2,3};\r\n\t\tint[] b = Arrays.copyOfRange(a, 0, a.length);\r\n\t\ta[0] = 5;\r\n\t\tSystem.out.println(Arrays.toString(a));\t// [5,2,3]\r\n\t\tSystem.out.println(Arrays.toString(b));\t// [1,2,3]\r\n\t}\r\n\r\nThis method is similar to [`Arrays.copyOf`][2], but it&#39;s more flexible. Both of them use `System.arraycopy` under the hood. \r\n\r\n**See**:\r\n\r\n* https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html\r\n* https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html\r\n* http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/Arrays.java?av=f\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#copyOfRange-int:A-int-int-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#copyOf-int:A-int-","title":"Make copy of an array","body":"<p>You can also use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#copyOfRange-int:A-int-int-\" rel=\"noreferrer\"><code>Arrays.copyOfRange</code></a>.</p>\n\n<p><strong>Example</strong>:</p>\n\n<pre><code>public static void main(String[] args) {\n    int[] a = {1,2,3};\n    int[] b = Arrays.copyOfRange(a, 0, a.length);\n    a[0] = 5;\n    System.out.println(Arrays.toString(a)); // [5,2,3]\n    System.out.println(Arrays.toString(b)); // [1,2,3]\n}\n</code></pre>\n\n<p>This method is similar to <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#copyOf-int:A-int-\" rel=\"noreferrer\"><code>Arrays.copyOf</code></a>, but it's more flexible. Both of them use <code>System.arraycopy</code> under the hood. </p>\n\n<p><strong>See</strong>:</p>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html</a></li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html</a></li>\n<li><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/Arrays.java?av=f\" rel=\"noreferrer\">http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/Arrays.java?av=f</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":543250,"reputation":18874,"user_id":912319,"accept_rate":62,"display_name":"Kanagavelu Sugumar"},"down_vote_count":0,"up_vote_count":68,"is_accepted":false,"score":68,"last_activity_date":1460181126,"creation_date":1460181126,"answer_id":36513254,"question_id":5785745,"body_markdown":"Nice explanation from http://www.journaldev.com/753/how-to-copy-arrays-in-java\r\n\r\n\r\n***Java Array Copy Methods***\r\n\r\n&gt; **Object.clone()**: Object class provides clone() method and since array\r\n&gt; in java is also an Object, you can use this method to achieve full\r\n&gt; array copy. This method will not suit you if you want partial copy of\r\n&gt; the array.\r\n\r\n\r\n&gt; **System.arraycopy()**: System class arraycopy() is the best way to do\r\n&gt; partial copy of an array. It provides you an easy way to specify the\r\n&gt; total number of elements to copy and the source and destination array\r\n&gt; index positions. For example **System.arraycopy(source, 3, destination,\r\n&gt; 2, 5)** will copy 5 elements from source to destination, beginning from\r\n&gt; 3rd index of source to 2nd index of destination.\r\n\r\n \r\n&gt; **Arrays.copyOf():** If you want to copy first few elements of an array or\r\n&gt; full copy of array, you can use this method. Obviously it’s not\r\n&gt; versatile like System.arraycopy() but it’s also not confusing and easy\r\n&gt; to use.\r\n\r\n&gt; **Arrays.copyOfRange()**: If you want few elements of an array to be\r\n&gt; copied, where starting index is not 0, you can use this method to copy\r\n&gt; partial array.","title":"Make copy of an array","body":"<p>Nice explanation from <a href=\"http://www.journaldev.com/753/how-to-copy-arrays-in-java\" rel=\"noreferrer\">http://www.journaldev.com/753/how-to-copy-arrays-in-java</a></p>\n\n<p><strong><em>Java Array Copy Methods</em></strong></p>\n\n<blockquote>\n  <p><strong>Object.clone()</strong>: Object class provides clone() method and since array\n  in java is also an Object, you can use this method to achieve full\n  array copy. This method will not suit you if you want partial copy of\n  the array.</p>\n  \n  <p><strong>System.arraycopy()</strong>: System class arraycopy() is the best way to do\n  partial copy of an array. It provides you an easy way to specify the\n  total number of elements to copy and the source and destination array\n  index positions. For example <strong>System.arraycopy(source, 3, destination,\n  2, 5)</strong> will copy 5 elements from source to destination, beginning from\n  3rd index of source to 2nd index of destination.</p>\n  \n  <p><strong>Arrays.copyOf():</strong> If you want to copy first few elements of an array or\n  full copy of array, you can use this method. Obviously it’s not\n  versatile like System.arraycopy() but it’s also not confusing and easy\n  to use.</p>\n  \n  <p><strong>Arrays.copyOfRange()</strong>: If you want few elements of an array to be\n  copied, where starting index is not 0, you can use this method to copy\n  partial array.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7532680,"reputation":519,"user_id":6534421,"display_name":"Durgaprasad Nagarkatte"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1491657596,"creation_date":1491657596,"answer_id":43294621,"question_id":5785745,"body_markdown":"You can try using Arrays.copyOf() in Java\r\n\r\n    int[] a = new int[5]{1,2,3,4,5};\r\n    int[] b = Arrays.copyOf(a, a.length);\r\n\r\n","title":"Make copy of an array","body":"<p>You can try using Arrays.copyOf() in Java</p>\n\n<pre><code>int[] a = new int[5]{1,2,3,4,5};\nint[] b = Arrays.copyOf(a, a.length);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1789955,"reputation":11725,"user_id":1630604,"accept_rate":76,"display_name":"Nicolas Henneaux"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1497448579,"creation_date":1497448241,"answer_id":44546758,"question_id":5785745,"body_markdown":"For a null-safe copy of an array, you can also use an optional with the `Object.clone()` method provided in this [answer](https://stackoverflow.com/a/5785821/1630604).\r\n\r\n    int[] arrayToCopy = {1, 2, 3};\r\n    int[] copiedArray = Optional.ofNullable(arrayToCopy).map(int[]::clone).orElse(null);","title":"Make copy of an array","body":"<p>For a null-safe copy of an array, you can also use an optional with the <code>Object.clone()</code> method provided in this <a href=\"https://stackoverflow.com/a/5785821/1630604\">answer</a>.</p>\n\n<pre><code>int[] arrayToCopy = {1, 2, 3};\nint[] copiedArray = Optional.ofNullable(arrayToCopy).map(int[]::clone).orElse(null);\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user177800"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1503413055,"creation_date":1503413055,"answer_id":45820757,"question_id":5785745,"body_markdown":"If you must work with raw arrays and not `ArrayList` then `Arrays` has what you need. If you look at the source code, these are the absolutely best ways to get a copy of an array. They do have a good bit of defensive programming because the `System.arraycopy()` method throws lots of unchecked exceptions if you feed it illogical parameters.\r\n\r\nYou can use either [`Arrays.copyOf()`][1] which will copy from the first to `Nth` element to the new shorter array.\r\n\r\n    public static &lt;T&gt; T[] copyOf(T[] original, int newLength)\r\n\r\n&gt; Copies the specified array, truncating or padding with nulls (if\r\n&gt; necessary) so the copy has the specified length. For all indices that\r\n&gt; are valid in both the original array and the copy, the two arrays will\r\n&gt; contain identical values. For any indices that are valid in the copy\r\n&gt; but not the original, the copy will contain null. Such indices will\r\n&gt; exist if and only if the specified length is greater than that of the\r\n&gt; original array. The resulting array is of exactly the same class as\r\n&gt; the original array.\r\n\r\n    2770\r\n    2771    public static &lt;T,U&gt; T[] More ...copyOf(U[] original, int newLength, Class&lt;? extends T[]&gt; newType) {\r\n    2772        T[] copy = ((Object)newType == (Object)Object[].class)\r\n    2773            ? (T[]) new Object[newLength]\r\n    2774            : (T[]) Array.newInstance(newType.getComponentType(), newLength);\r\n    2775        System.arraycopy(original, 0, copy, 0,\r\n    2776                         Math.min(original.length, newLength));\r\n    2777        return copy;\r\n    2778    }\r\n\r\n or `Arrays.copyOfRange()` will also do the trick:\r\n\r\n    public static &lt;T&gt; T[] copyOfRange(T[] original, int from, int to)\r\n\r\n&gt; Copies the specified range of the specified array into a new array.\r\n&gt; The initial index of the range (from) must lie between zero and\r\n&gt; original.length, inclusive. The value at original[from] is placed into\r\n&gt; the initial element of the copy (unless from == original.length or\r\n&gt; from == to). Values from subsequent elements in the original array are\r\n&gt; placed into subsequent elements in the copy. The final index of the\r\n&gt; range (to), which must be greater than or equal to from, may be\r\n&gt; greater than original.length, in which case null is placed in all\r\n&gt; elements of the copy whose index is greater than or equal to\r\n&gt; original.length - from. The length of the returned array will be to -\r\n&gt; from. The resulting array is of exactly the same class as the original\r\n&gt; array.\r\n\r\n    3035    public static &lt;T,U&gt; T[] More ...copyOfRange(U[] original, int from, int to, Class&lt;? extends T[]&gt; newType) {\r\n    3036        int newLength = to - from;\r\n    3037        if (newLength &lt; 0)\r\n    3038            throw new IllegalArgumentException(from + &quot; &gt; &quot; + to);\r\n    3039        T[] copy = ((Object)newType == (Object)Object[].class)\r\n    3040            ? (T[]) new Object[newLength]\r\n    3041            : (T[]) Array.newInstance(newType.getComponentType(), newLength);\r\n    3042        System.arraycopy(original, from, copy, 0,\r\n    3043                         Math.min(original.length - from, newLength));\r\n    3044        return copy;\r\n    3045    }\r\n\r\nAs you can see, both of these are just wrapper functions over `System.arraycopy` with defensive logic that what you are trying to do is valid.\r\n\r\n[`System.arraycopy`][2] is the absolute fastest way to copy arrays.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#copyOf-T:A-int-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/lang/System.html#arraycopy-java.lang.Object-int-java.lang.Object-int-int-","title":"Make copy of an array","body":"<p>If you must work with raw arrays and not <code>ArrayList</code> then <code>Arrays</code> has what you need. If you look at the source code, these are the absolutely best ways to get a copy of an array. They do have a good bit of defensive programming because the <code>System.arraycopy()</code> method throws lots of unchecked exceptions if you feed it illogical parameters.</p>\n\n<p>You can use either <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#copyOf-T:A-int-\" rel=\"nofollow noreferrer\"><code>Arrays.copyOf()</code></a> which will copy from the first to <code>Nth</code> element to the new shorter array.</p>\n\n<pre><code>public static &lt;T&gt; T[] copyOf(T[] original, int newLength)\n</code></pre>\n\n<blockquote>\n  <p>Copies the specified array, truncating or padding with nulls (if\n  necessary) so the copy has the specified length. For all indices that\n  are valid in both the original array and the copy, the two arrays will\n  contain identical values. For any indices that are valid in the copy\n  but not the original, the copy will contain null. Such indices will\n  exist if and only if the specified length is greater than that of the\n  original array. The resulting array is of exactly the same class as\n  the original array.</p>\n</blockquote>\n\n<pre><code>2770\n2771    public static &lt;T,U&gt; T[] More ...copyOf(U[] original, int newLength, Class&lt;? extends T[]&gt; newType) {\n2772        T[] copy = ((Object)newType == (Object)Object[].class)\n2773            ? (T[]) new Object[newLength]\n2774            : (T[]) Array.newInstance(newType.getComponentType(), newLength);\n2775        System.arraycopy(original, 0, copy, 0,\n2776                         Math.min(original.length, newLength));\n2777        return copy;\n2778    }\n</code></pre>\n\n<p>or <code>Arrays.copyOfRange()</code> will also do the trick:</p>\n\n<pre><code>public static &lt;T&gt; T[] copyOfRange(T[] original, int from, int to)\n</code></pre>\n\n<blockquote>\n  <p>Copies the specified range of the specified array into a new array.\n  The initial index of the range (from) must lie between zero and\n  original.length, inclusive. The value at original[from] is placed into\n  the initial element of the copy (unless from == original.length or\n  from == to). Values from subsequent elements in the original array are\n  placed into subsequent elements in the copy. The final index of the\n  range (to), which must be greater than or equal to from, may be\n  greater than original.length, in which case null is placed in all\n  elements of the copy whose index is greater than or equal to\n  original.length - from. The length of the returned array will be to -\n  from. The resulting array is of exactly the same class as the original\n  array.</p>\n</blockquote>\n\n<pre><code>3035    public static &lt;T,U&gt; T[] More ...copyOfRange(U[] original, int from, int to, Class&lt;? extends T[]&gt; newType) {\n3036        int newLength = to - from;\n3037        if (newLength &lt; 0)\n3038            throw new IllegalArgumentException(from + \" &gt; \" + to);\n3039        T[] copy = ((Object)newType == (Object)Object[].class)\n3040            ? (T[]) new Object[newLength]\n3041            : (T[]) Array.newInstance(newType.getComponentType(), newLength);\n3042        System.arraycopy(original, from, copy, 0,\n3043                         Math.min(original.length - from, newLength));\n3044        return copy;\n3045    }\n</code></pre>\n\n<p>As you can see, both of these are just wrapper functions over <code>System.arraycopy</code> with defensive logic that what you are trying to do is valid.</p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/System.html#arraycopy-java.lang.Object-int-java.lang.Object-int-int-\" rel=\"nofollow noreferrer\"><code>System.arraycopy</code></a> is the absolute fastest way to copy arrays.</p>\n"},{"tags":[],"owner":{"display_name":"user13149581"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600868117,"creation_date":1591148074,"answer_id":62163866,"question_id":5785745,"body_markdown":"I had a similar problem with 2D arrays and ended here.\r\nI was copying the main array and changing the inner arrays&#39; values and was surprised when the values changed in both copies. Basically both copies were independent but contained references to the same inner arrays and I had to make an array of copies of the inner arrays to get what I wanted.\r\n\r\nThis is sometimes called a deep copy. The same term &quot;deep copy&quot; can also have a completely different and arguably more complex meaning, which can be confusing, especially to someone not figuring out why their copied arrays don&#39;t behave as they should. It probably isn&#39;t the OP&#39;s problem, but I hope it can still be helpful.","title":"Make copy of an array","body":"<p>I had a similar problem with 2D arrays and ended here.\nI was copying the main array and changing the inner arrays' values and was surprised when the values changed in both copies. Basically both copies were independent but contained references to the same inner arrays and I had to make an array of copies of the inner arrays to get what I wanted.</p>\n<p>This is sometimes called a deep copy. The same term &quot;deep copy&quot; can also have a completely different and arguably more complex meaning, which can be confusing, especially to someone not figuring out why their copied arrays don't behave as they should. It probably isn't the OP's problem, but I hope it can still be helpful.</p>\n"}],"owner":{"account_id":352939,"reputation":3674,"user_id":690338,"accept_rate":23,"display_name":"badcoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":819013,"favorite_count":0,"down_vote_count":5,"up_vote_count":412,"answer_count":11,"score":407,"last_activity_date":1633715783,"creation_date":1303790250,"question_id":5785745,"body_markdown":"I have an array `a` which is constantly being updated. Let&#39;s say `a = [1,2,3,4,5]`. I need to make an exact duplicate copy of `a` and call it `b`. If `a` were to change to `[6,7,8,9,10]`, `b` should still be `[1,2,3,4,5]`. What is the best way to do this? I tried a `for` loop like:\r\n\r\n    for(int i=0; i&lt;5; i++) {\r\n        b[i]=a[i];\r\n    }\r\n\r\nbut that doesn&#39;t seem to work correctly. Please don&#39;t use advanced terms like deep copy, etc., because I do not know what that means.","title":"Make copy of an array","body":"<p>I have an array <code>a</code> which is constantly being updated. Let's say <code>a = [1,2,3,4,5]</code>. I need to make an exact duplicate copy of <code>a</code> and call it <code>b</code>. If <code>a</code> were to change to <code>[6,7,8,9,10]</code>, <code>b</code> should still be <code>[1,2,3,4,5]</code>. What is the best way to do this? I tried a <code>for</code> loop like:</p>\n<pre><code>for(int i=0; i&lt;5; i++) {\n    b[i]=a[i];\n}\n</code></pre>\n<p>but that doesn't seem to work correctly. Please don't use advanced terms like deep copy, etc., because I do not know what that means.</p>\n"},{"tags":["java","swing","if-statement","paintcomponent","repaint"],"comments":[{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1582226347,"post_id":60327035,"comment_id":106714150,"body_markdown":"Can you be more specific about what you mean when you say it &quot;Invalidates the code&quot;?  Is this a java warning, an ide warning (grey code?), an exception?  If it is an IDE warning, could you hover over the warning and tell us what it says?","body":"Can you be more specific about what you mean when you say it &quot;Invalidates the code&quot;?  Is this a java warning, an ide warning (grey code?), an exception?  If it is an IDE warning, could you hover over the warning and tell us what it says?"}],"answers":[{"tags":[],"owner":{"account_id":6411938,"reputation":4104,"user_id":4971422,"display_name":"FredK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1582230821,"creation_date":1582230821,"answer_id":60328090,"question_id":60327035,"body_markdown":"Your paintComponent() method should ALWAYS call `super.paintCompnent(g);` as the first statement in the method. Then it should draw the image only if the repaint variable is false.\r\n\r\nIt would be better - and more logically readable -  to call that variable paintImage and set it initially to true, then the button listener sets it to false, and the paintComponent() method draws the image only if paintImage is true.","title":"Why using an if statement inside a paintComponent(Graphics g) method invalidates all code inside the method?","body":"<p>Your paintComponent() method should ALWAYS call <code>super.paintCompnent(g);</code> as the first statement in the method. Then it should draw the image only if the repaint variable is false.</p>\n\n<p>It would be better - and more logically readable -  to call that variable paintImage and set it initially to true, then the button listener sets it to false, and the paintComponent() method draws the image only if paintImage is true.</p>\n"}],"owner":{"account_id":17809326,"reputation":5,"user_id":12934318,"display_name":"WagnerR"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60328090,"answer_count":1,"score":0,"last_activity_date":1633715679,"creation_date":1582225994,"question_id":60327035,"body_markdown":"I&#39;m trying to create a JFrame object which contains a JPanel object. Inside the JPanel object there are 3 JButtons that when clicked, are intended to change the background color of the JPanel. \r\n\r\nI also want to draw an image which size equals the one of the JPanel object to give the impression of a background image but as you may imagine I want it to be drown only the first time, when the user hasn&#39;t clicked any buttons yet. Once a button is clicked I intend to call the repaint() method inherited from the Component class which in my understanding should make a call to the paintComponent(Graphics g). \r\n\r\nGiven the fact I want the image to be drawn only when the user hasn&#39;t clicked any buttons, inside the paintComponent(Graphics g) I&#39;m trying to use an if statement so when the paintComponent(Graphics g) method is called the second time by the repaint() method, it will execute inside an else statement and simply call the super.paintComponent(Graphics g) method that in my understanding, should paint it without the image. The problem is that as soon as I put the if statement inside the paintComponent method it seems to invalidate the entire code inside the method. \r\n\r\nAny suggestions or explanation on why is this happening would be appreciated. \r\n\r\nThe code is below:\r\n\r\n    import java.awt.*;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;   \r\n    import javax.swing.*;\r\n    \r\n    public class PruebaEventosSelf {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tMarcoBotonSelf marco=new MarcoBotonSelf();\r\n    \t\tmarco.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t}\r\n    }\r\n    \r\n    \r\n    class MarcoBotonSelf extends JFrame{\r\n    \r\n    \tpublic MarcoBotonSelf() {\r\n    \t\tsetExtendedState(MarcoBotonSelf.MAXIMIZED_BOTH);\r\n    \t\tsetTitle(&quot;National Aeronautics and Space Administration NASA&quot;);\r\n    \t\tImage image=Toolkit.getDefaultToolkit().getImage(&quot;C:\\\\Users\\\\wagne\\\\OneDrive\\\\Desktop\\\\Nasa.png&quot;);\r\n    \t\tsetIconImage(image);\r\n    \t\tLaminaBoton lamina=new LaminaBoton();\r\n    \t\tadd(lamina);\r\n    \t\tsetVisible(true);\r\n    \t}\r\n    }\r\n    \r\n    class LaminaBoton extends JPanel implements ActionListener {\r\n    \t\r\n    \tJButton botonAzul=new JButton(&quot;Blue&quot;);\r\n    \tJButton botonNegro=new JButton(&quot;Black&quot;);\r\n    \tJButton botonGris=new JButton(&quot;Gris&quot;);\r\n    \tboolean repaint=false;\r\n    \t\r\n    \tpublic LaminaBoton() {\r\n    \t\tbotonAzul.addActionListener(this);\r\n    \t\tadd(botonAzul, Container.CENTER_ALIGNMENT);\r\n    \t\tbotonNegro.addActionListener(this);\r\n    \t\tadd(botonNegro, Container.LEFT_ALIGNMENT);\r\n    \t\tbotonGris.addActionListener(this);\r\n    \t\tadd(botonGris, Container.CENTER_ALIGNMENT);\r\n    \t}\r\n    \t\r\n    \tpublic void paintComponent(Graphics g) {\r\n    \t\tif(repaint) {\r\n    \t\t\tsuper.paintComponent(g);\r\n    \t\t}else {\r\n    \t\t\tImage imagen=Toolkit.getDefaultToolkit().getImage(&quot;C:\\\\Users\\\\wagne\\\\OneDrive\\\\Desktop\\\\NASA.jpg&quot;);\r\n    \t\t\tg.drawImage(imagen, 0, 0, this);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic void actionPerformed(ActionEvent e) {\r\n    \t\tObject pulsado=e.getSource();\r\n    \t\tif (pulsado==botonAzul){\r\n    \t\t\trepaint=true;\r\n    \t\t\trepaint();\r\n    \t\t\tthis.setBackground(Color.blue);\r\n    \t\t\tSystem.out.println(&quot;Blue is working!&quot;);\r\n    \t\t}else if(pulsado==botonNegro) {\r\n    \t\t\tSystem.out.println(&quot;Black is working!&quot;);\r\n    \t\t\tsetBackground(Color.BLACK);\r\n    \t\t}else {\r\n    \t\t\tSystem.out.println(&quot;Gray is working!&quot;);\r\n    \t\t\tsetBackground(Color.DARK_GRAY);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    }\r\n\r\nHERE&#39;S ANOTHER WAY I TRIED:\r\n\r\n    import java.awt.*;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;  \r\n    import javax.swing.*;\r\n    \r\n    public class PruebaEventosSelf {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tMarcoBotonSelf marco=new MarcoBotonSelf();\r\n    \t\tmarco.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t}\r\n    }\r\n    \r\n    \r\n    class MarcoBotonSelf extends JFrame{\r\n    \r\n    \tpublic MarcoBotonSelf() {\r\n    \t\tsetExtendedState(MarcoBotonSelf.MAXIMIZED_BOTH);\r\n    \t\tsetTitle(&quot;National Aeronautics and Space Administration NASA&quot;);\r\n    \t\tImage image=Toolkit.getDefaultToolkit().getImage(&quot;C:\\\\Users\\\\wagne\\\\OneDrive\\\\Desktop\\\\Nasa.png&quot;);\r\n    \t\tsetIconImage(image);\r\n    \t\tLaminaBoton lamina=new LaminaBoton();\r\n    \t\tadd(lamina);\r\n    \t\tsetVisible(true);\r\n    \t}\r\n    }\r\n    \r\n    class LaminaBoton extends JPanel implements ActionListener {\r\n    \t\r\n    \tJButton botonAzul=new JButton(&quot;Blue&quot;);\r\n    \tJButton botonNegro=new JButton(&quot;Black&quot;);\r\n    \tJButton botonGris=new JButton(&quot;Gris&quot;);\r\n    \tboolean repaint=false;\r\n    \t\r\n    \tpublic LaminaBoton() {\r\n    \t\tbotonAzul.addActionListener(this);\r\n    \t\tadd(botonAzul, Container.CENTER_ALIGNMENT);\r\n    \t\tbotonNegro.addActionListener(this);\r\n    \t\tadd(botonNegro, Container.LEFT_ALIGNMENT);\r\n    \t\tbotonGris.addActionListener(this);\r\n    \t\tadd(botonGris, Container.CENTER_ALIGNMENT);\r\n    \t}\r\n    \t\r\n    \tpublic void paintComponent(Graphics g) {\r\n    \t\tImage imagen=Toolkit.getDefaultToolkit().getImage(&quot;C:\\\\Users\\\\wagne\\\\OneDrive\\\\Desktop\\\\NASA.jpg&quot;);\r\n    \t\tg.drawImage(imagen, 0, 0, this);\r\n    \t\tif (repaint) super.paintComponent(g);\r\n    \t}\r\n    \t\r\n    \tpublic void actionPerformed(ActionEvent e) {\r\n    \t\tObject pulsado=e.getSource();\r\n    \t\tif (pulsado==botonAzul){\r\n    \t\t\trepaint=true;\r\n    \t\t\trepaint();\r\n    \t\t\tthis.setBackground(Color.blue);\r\n    \t\t\tSystem.out.println(&quot;Blue is working!&quot;);\r\n    \t\t}else if(pulsado==botonNegro) {\r\n    \t\t\tSystem.out.println(&quot;Black is working!&quot;);\r\n    \t\t\tsetBackground(Color.BLACK);\r\n    \t\t}else {\r\n    \t\t\tSystem.out.println(&quot;Gray is working!&quot;);\r\n    \t\t\tsetBackground(Color.DARK_GRAY);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    }\r\n\r\nI&#39;ve tried another 4 different ways but they all seem to lead to the same result of the image not being drown not even if the use hasn&#39;t clicked any buttons. ","title":"Why using an if statement inside a paintComponent(Graphics g) method invalidates all code inside the method?","body":"<p>I'm trying to create a JFrame object which contains a JPanel object. Inside the JPanel object there are 3 JButtons that when clicked, are intended to change the background color of the JPanel. </p>\n\n<p>I also want to draw an image which size equals the one of the JPanel object to give the impression of a background image but as you may imagine I want it to be drown only the first time, when the user hasn't clicked any buttons yet. Once a button is clicked I intend to call the repaint() method inherited from the Component class which in my understanding should make a call to the paintComponent(Graphics g). </p>\n\n<p>Given the fact I want the image to be drawn only when the user hasn't clicked any buttons, inside the paintComponent(Graphics g) I'm trying to use an if statement so when the paintComponent(Graphics g) method is called the second time by the repaint() method, it will execute inside an else statement and simply call the super.paintComponent(Graphics g) method that in my understanding, should paint it without the image. The problem is that as soon as I put the if statement inside the paintComponent method it seems to invalidate the entire code inside the method. </p>\n\n<p>Any suggestions or explanation on why is this happening would be appreciated. </p>\n\n<p>The code is below:</p>\n\n<pre><code>import java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;   \nimport javax.swing.*;\n\npublic class PruebaEventosSelf {\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        MarcoBotonSelf marco=new MarcoBotonSelf();\n        marco.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }\n}\n\n\nclass MarcoBotonSelf extends JFrame{\n\n    public MarcoBotonSelf() {\n        setExtendedState(MarcoBotonSelf.MAXIMIZED_BOTH);\n        setTitle(\"National Aeronautics and Space Administration NASA\");\n        Image image=Toolkit.getDefaultToolkit().getImage(\"C:\\\\Users\\\\wagne\\\\OneDrive\\\\Desktop\\\\Nasa.png\");\n        setIconImage(image);\n        LaminaBoton lamina=new LaminaBoton();\n        add(lamina);\n        setVisible(true);\n    }\n}\n\nclass LaminaBoton extends JPanel implements ActionListener {\n\n    JButton botonAzul=new JButton(\"Blue\");\n    JButton botonNegro=new JButton(\"Black\");\n    JButton botonGris=new JButton(\"Gris\");\n    boolean repaint=false;\n\n    public LaminaBoton() {\n        botonAzul.addActionListener(this);\n        add(botonAzul, Container.CENTER_ALIGNMENT);\n        botonNegro.addActionListener(this);\n        add(botonNegro, Container.LEFT_ALIGNMENT);\n        botonGris.addActionListener(this);\n        add(botonGris, Container.CENTER_ALIGNMENT);\n    }\n\n    public void paintComponent(Graphics g) {\n        if(repaint) {\n            super.paintComponent(g);\n        }else {\n            Image imagen=Toolkit.getDefaultToolkit().getImage(\"C:\\\\Users\\\\wagne\\\\OneDrive\\\\Desktop\\\\NASA.jpg\");\n            g.drawImage(imagen, 0, 0, this);\n        }\n    }\n\n    public void actionPerformed(ActionEvent e) {\n        Object pulsado=e.getSource();\n        if (pulsado==botonAzul){\n            repaint=true;\n            repaint();\n            this.setBackground(Color.blue);\n            System.out.println(\"Blue is working!\");\n        }else if(pulsado==botonNegro) {\n            System.out.println(\"Black is working!\");\n            setBackground(Color.BLACK);\n        }else {\n            System.out.println(\"Gray is working!\");\n            setBackground(Color.DARK_GRAY);\n        }\n    }\n\n}\n</code></pre>\n\n<p>HERE'S ANOTHER WAY I TRIED:</p>\n\n<pre><code>import java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;  \nimport javax.swing.*;\n\npublic class PruebaEventosSelf {\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        MarcoBotonSelf marco=new MarcoBotonSelf();\n        marco.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }\n}\n\n\nclass MarcoBotonSelf extends JFrame{\n\n    public MarcoBotonSelf() {\n        setExtendedState(MarcoBotonSelf.MAXIMIZED_BOTH);\n        setTitle(\"National Aeronautics and Space Administration NASA\");\n        Image image=Toolkit.getDefaultToolkit().getImage(\"C:\\\\Users\\\\wagne\\\\OneDrive\\\\Desktop\\\\Nasa.png\");\n        setIconImage(image);\n        LaminaBoton lamina=new LaminaBoton();\n        add(lamina);\n        setVisible(true);\n    }\n}\n\nclass LaminaBoton extends JPanel implements ActionListener {\n\n    JButton botonAzul=new JButton(\"Blue\");\n    JButton botonNegro=new JButton(\"Black\");\n    JButton botonGris=new JButton(\"Gris\");\n    boolean repaint=false;\n\n    public LaminaBoton() {\n        botonAzul.addActionListener(this);\n        add(botonAzul, Container.CENTER_ALIGNMENT);\n        botonNegro.addActionListener(this);\n        add(botonNegro, Container.LEFT_ALIGNMENT);\n        botonGris.addActionListener(this);\n        add(botonGris, Container.CENTER_ALIGNMENT);\n    }\n\n    public void paintComponent(Graphics g) {\n        Image imagen=Toolkit.getDefaultToolkit().getImage(\"C:\\\\Users\\\\wagne\\\\OneDrive\\\\Desktop\\\\NASA.jpg\");\n        g.drawImage(imagen, 0, 0, this);\n        if (repaint) super.paintComponent(g);\n    }\n\n    public void actionPerformed(ActionEvent e) {\n        Object pulsado=e.getSource();\n        if (pulsado==botonAzul){\n            repaint=true;\n            repaint();\n            this.setBackground(Color.blue);\n            System.out.println(\"Blue is working!\");\n        }else if(pulsado==botonNegro) {\n            System.out.println(\"Black is working!\");\n            setBackground(Color.BLACK);\n        }else {\n            System.out.println(\"Gray is working!\");\n            setBackground(Color.DARK_GRAY);\n        }\n    }\n\n}\n</code></pre>\n\n<p>I've tried another 4 different ways but they all seem to lead to the same result of the image not being drown not even if the use hasn't clicked any buttons. </p>\n"},{"tags":["java","function","swing","graphics","paintcomponent"],"answers":[{"tags":[],"owner":{"account_id":18806576,"reputation":36,"user_id":13724967,"display_name":"vdrizzle"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1592025565,"creation_date":1592025565,"answer_id":62355853,"question_id":62355798,"body_markdown":"I believe you are not suppose to call `paintComponent(piedra.g)` directly, you should instead call `repaint()`","title":"NullPointer when trying to move oval in java?","body":"<p>I believe you are not suppose to call <code>paintComponent(piedra.g)</code> directly, you should instead call <code>repaint()</code></p>\n"}],"owner":{"account_id":14336711,"reputation":111,"user_id":10355944,"display_name":"Oto"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1633715637,"creation_date":1592025077,"question_id":62355798,"body_markdown":"Im having an issue related to the paintComponent method in Java. Basically, what Im trying to do is move an oval across the screen using buttons.\r\n\r\n    //public class piedra\r\n     public void paintComponent(Graphics g) {\r\n\t\t//super.paintComponent(g);\r\n\t\t\r\n\t\tSystem.out.println(contador);\r\n\t\t\r\n\t\t if(contador &gt;= 1) {\r\n\t\t\t\t\r\n\t\t\tg.fillOval(x, y, largo, ancho);\r\n\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (contador == 0) {\r\n\t\t\t\t\t\t\r\n\t\t\tg.setColor(Color.GRAY);\r\n\t\t\tg.fillOval(x, y, largo, ancho);\r\n\t\t\tcontador++;\r\n\t\t\t\t\t\t\r\n\t\t}\r\n\t\t\t\t\t\t\r\n\t}\r\n\r\n  \r\n\r\nEvery variable is an attribute so I can manipulate them with the frame with buttons class.\r\nThis is what Im trying to do:\r\n\r\n\r\n\r\n    public void actionPerformed(ActionEvent e) {\r\n\t\t\t\t\r\n\t\t\t\tpiedra.y = piedra.y - 1;\r\n\t\t\t\tpiedra.paintComponent(piedra.g);\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\nIm trying to move the oval across the screen using the paintComponent method, but when I press the button, the program throws a NullPointer Exception. I have already checked the Y variable and it changes after I press the button. That&#39;s it, Im pretty lost from this point on. I barely remember that there is a function that updates the screen, but I don&#39;t think it will do something about that Exception, right? Any possible solution?\r\n\r\nThank you!\r\n\r\n","title":"NullPointer when trying to move oval in java?","body":"<p>Im having an issue related to the paintComponent method in Java. Basically, what Im trying to do is move an oval across the screen using buttons.</p>\n\n<pre><code>//public class piedra\n public void paintComponent(Graphics g) {\n    //super.paintComponent(g);\n\n    System.out.println(contador);\n\n     if(contador &gt;= 1) {\n\n        g.fillOval(x, y, largo, ancho);\n\n    }\n\n    if (contador == 0) {\n\n        g.setColor(Color.GRAY);\n        g.fillOval(x, y, largo, ancho);\n        contador++;\n\n    }\n\n}\n</code></pre>\n\n<p>Every variable is an attribute so I can manipulate them with the frame with buttons class.\nThis is what Im trying to do:</p>\n\n<pre><code>public void actionPerformed(ActionEvent e) {\n\n            piedra.y = piedra.y - 1;\n            piedra.paintComponent(piedra.g);\n\n        }\n</code></pre>\n\n<p>Im trying to move the oval across the screen using the paintComponent method, but when I press the button, the program throws a NullPointer Exception. I have already checked the Y variable and it changes after I press the button. That's it, Im pretty lost from this point on. I barely remember that there is a function that updates the screen, but I don't think it will do something about that Exception, right? Any possible solution?</p>\n\n<p>Thank you!</p>\n"},{"tags":["java","swing","paintcomponent"],"comments":[{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1604546906,"post_id":64690704,"comment_id":114381791,"body_markdown":"Your Piece class should not extend JPanel and should not be added as a *component* to the GUI. It should instead be a logical (non-GUI component) class only.","body":"Your Piece class should not extend JPanel and should not be added as a <i>component</i> to the GUI. It should instead be a logical (non-GUI component) class only."},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1604547861,"post_id":64690704,"comment_id":114381977,"body_markdown":"To extend on the comment from HovercraftFullOfEels, remove this line `add(firstP);` and remove JPanel from `public class Piece extends JPanel` like this `public class Piece`, and then your artifact should go away.","body":"To extend on the comment from HovercraftFullOfEels, remove this line <code>add(firstP);</code> and remove JPanel from <code>public class Piece extends JPanel</code> like this <code>public class Piece</code>, and then your artifact should go away."},{"owner":{"account_id":19701239,"reputation":97,"user_id":14423951,"display_name":"AdolfJames Urian"},"score":0,"creation_date":1604551643,"post_id":64690704,"comment_id":114382707,"body_markdown":"I removed the extends and the add(), now it didn&#39;t show anything, what do I do?","body":"I removed the extends and the add(), now it didn&#39;t show anything, what do I do?"},{"owner":{"account_id":19701239,"reputation":97,"user_id":14423951,"display_name":"AdolfJames Urian"},"score":0,"creation_date":1604567483,"post_id":64690704,"comment_id":114387633,"body_markdown":"I mistyped something and that what makes the main box not getting painted :) thanks","body":"I mistyped something and that what makes the main box not getting painted :) thanks"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1633715619,"post_id":64690704,"comment_id":122842738,"body_markdown":"Now you should either enter an answer below or delete the question. I recommend the latter.","body":"Now you should either enter an answer below or delete the question. I recommend the latter."}],"owner":{"account_id":19701239,"reputation":97,"user_id":14423951,"display_name":"AdolfJames Urian"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1633715552,"creation_date":1604546062,"question_id":64690704,"body_markdown":"I made a big aqua square, but somehow, a little gray square appeared in my JPanel, it looks like this.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nr6CS.png\r\n\r\nTheres the little gray square there in the middle and I didn&#39;t draw it. How do I avoid it? Heres my code:\r\n\r\nmy Main:\r\n```\r\npackage Main;\r\n\r\npublic class main {\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tcreateWindow window = new createWindow();\r\n\t\t\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nmyFrame and myPanel:\r\n```\r\npackage Main;\r\n\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport javax.swing.*;\r\nimport Objects.Piece;\r\n\r\npublic class createWindow extends JFrame {\r\n\t\r\n\tpublic myPanel panel;\r\n\t\r\n\tpublic createWindow() {\r\n\t\tsuper();\r\n\t\tpanel = new myPanel();\r\n\t\tKeyListener key = new KeyListener() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void keyTyped(KeyEvent e) {\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void keyPressed(KeyEvent e) {\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void keyReleased(KeyEvent e) {\r\n\t\t\t\t\r\n\t\t\t\tkeyAction(e.getKeyCode());\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tpublic void keyAction(int keycode) {\r\n\t\t\t\tswitch (keycode) {\r\n\t\t\t\t\tcase KeyEvent.VK_UP:\r\n\t\t\t\t\t\tSystem.out.println(&quot;Up&quot;);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase KeyEvent.VK_RIGHT:\r\n\t\t\t\t\t\tSystem.out.println(&quot;Right&quot;);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase KeyEvent.VK_DOWN:\r\n\t\t\t\t\t\tSystem.out.println(&quot;Down&quot;);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase KeyEvent.VK_LEFT:\r\n\t\t\t\t\t\tSystem.out.println(&quot;Left&quot;);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t};\r\n\t\t\r\n\t\tpack();\r\n\t\tadd(panel);\r\n\t\taddKeyListener(key);\r\n\t\tsetSize(800, 450);\r\n\t\tsetResizable(false);\r\n\t\tsetLocationRelativeTo(null);\r\n\t\tsetVisible(true);\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\nclass myPanel extends JPanel {\r\n\tpublic Piece firstP = new Piece(100, 100, 100, 100, new Color(50, 255, 255), &quot;self&quot;);\r\n\t\r\n\tmyPanel() {\r\n\t\tsuper();\r\n\t\t\r\n\t\tsetBackground(Color.gray);\r\n\t\tadd(firstP);\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void paintComponent(Graphics g) {\r\n\t\tsuper.paintComponent(g);\r\n\t\tGraphics2D g2d = (Graphics2D)g;\r\n\t\t\r\n\t\tg2d.setColor(firstP.color);\r\n\t\tg2d.fillRect(firstP.x,firstP.y, firstP.width, firstP.height);\r\n\t}\r\n\t\r\n\t\r\n}\r\n```\r\n\r\nmyPiece:\r\n```\r\npackage Objects;\r\n\r\nimport java.awt.*;\r\nimport javax.swing.*;\r\n\r\npublic class Piece extends JPanel {\r\n\t\r\n\tpublic int x;\r\n\tpublic int y;\r\n\tpublic int width;\r\n\tpublic int height;\r\n\tpublic Color color;\r\n\tpublic String type;\r\n\t\r\n\tpublic Piece(int x, int y, int width, int height, Color color, String type) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.color = color;\r\n\t\tthis.type = type;\r\n\t}\r\n\t\r\n\t\r\n}\r\n\r\n```\r\n\r\nCan someone fix my code? I am new to java paint and I can&#39;t see the bug here...","title":"My paintComponent draw something that I didn&#39;t code","body":"<p>I made a big aqua square, but somehow, a little gray square appeared in my JPanel, it looks like this.\n<a href=\"https://i.stack.imgur.com/nr6CS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nr6CS.png\" alt=\"enter image description here\" /></a></p>\n<p>Theres the little gray square there in the middle and I didn't draw it. How do I avoid it? Heres my code:</p>\n<p>my Main:</p>\n<pre><code>package Main;\n\npublic class main {\n    \n    public static void main(String[] args) {\n        createWindow window = new createWindow();\n        \n    }\n\n}\n\n</code></pre>\n<p>myFrame and myPanel:</p>\n<pre><code>package Main;\n\nimport java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport Objects.Piece;\n\npublic class createWindow extends JFrame {\n    \n    public myPanel panel;\n    \n    public createWindow() {\n        super();\n        panel = new myPanel();\n        KeyListener key = new KeyListener() {\n\n            @Override\n            public void keyTyped(KeyEvent e) {\n                \n                \n                \n            }\n\n            @Override\n            public void keyPressed(KeyEvent e) {\n                \n                \n                \n            }\n\n            @Override\n            public void keyReleased(KeyEvent e) {\n                \n                keyAction(e.getKeyCode());\n                \n            }\n            public void keyAction(int keycode) {\n                switch (keycode) {\n                    case KeyEvent.VK_UP:\n                        System.out.println(&quot;Up&quot;);\n                        break;\n                    case KeyEvent.VK_RIGHT:\n                        System.out.println(&quot;Right&quot;);\n                        break;\n                    case KeyEvent.VK_DOWN:\n                        System.out.println(&quot;Down&quot;);\n                        break;\n                    case KeyEvent.VK_LEFT:\n                        System.out.println(&quot;Left&quot;);\n                        break;\n                }\n            }\n            \n        };\n        \n        pack();\n        add(panel);\n        addKeyListener(key);\n        setSize(800, 450);\n        setResizable(false);\n        setLocationRelativeTo(null);\n        setVisible(true);\n        \n    }\n    \n}\n\nclass myPanel extends JPanel {\n    public Piece firstP = new Piece(100, 100, 100, 100, new Color(50, 255, 255), &quot;self&quot;);\n    \n    myPanel() {\n        super();\n        \n        setBackground(Color.gray);\n        add(firstP);\n    }\n    \n    @Override\n    public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Graphics2D g2d = (Graphics2D)g;\n        \n        g2d.setColor(firstP.color);\n        g2d.fillRect(firstP.x,firstP.y, firstP.width, firstP.height);\n    }\n    \n    \n}\n</code></pre>\n<p>myPiece:</p>\n<pre><code>package Objects;\n\nimport java.awt.*;\nimport javax.swing.*;\n\npublic class Piece extends JPanel {\n    \n    public int x;\n    public int y;\n    public int width;\n    public int height;\n    public Color color;\n    public String type;\n    \n    public Piece(int x, int y, int width, int height, Color color, String type) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.color = color;\n        this.type = type;\n    }\n    \n    \n}\n\n</code></pre>\n<p>Can someone fix my code? I am new to java paint and I can't see the bug here...</p>\n"},{"tags":["java","swing","paintcomponent"],"comments":[{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1608399415,"post_id":65372628,"comment_id":115574576,"body_markdown":"You&#39;re not in fact drawing within a paintComponent method override, or drawing within a JPanel (which is where you should be drawing). You instead will want to draw in the paintComponent method of a JPanel not the paintComponents method of a JFrame (or any component). Avoid guessing and instead read the tutorials: [Lesson: Performing Custom Painting](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html).","body":"You&#39;re not in fact drawing within a paintComponent method override, or drawing within a JPanel (which is where you should be drawing). You instead will want to draw in the paintComponent method of a JPanel not the paintComponents method of a JFrame (or any component). Avoid guessing and instead read the tutorials: <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Lesson: Performing Custom Painting</a>."},{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1608399504,"post_id":65372628,"comment_id":115574602,"body_markdown":"Also, this is not good: `cp.setLayout(null);` Instead learn and use the layout managers.","body":"Also, this is not good: <code>cp.setLayout(null);</code> Instead learn and use the layout managers."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":3,"creation_date":1608400834,"post_id":65372628,"comment_id":115575043,"body_markdown":"*...i am NEW to coding!* If you are new to coding you should not be trying to do graphics.  Doing graphics well depends on understanding the basic aspects of Java.  These would include classes, generics, lists, sets,maps, arrays,  types (int, long, etc) and their wrapper classes (Integer, Long, etc), and many, many other parts of the language.","body":"<i>...i am NEW to coding!</i> If you are new to coding you should not be trying to do graphics.  Doing graphics well depends on understanding the basic aspects of Java.  These would include classes, generics, lists, sets,maps, arrays,  types (int, long, etc) and their wrapper classes (Integer, Long, etc), and many, many other parts of the language."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1608404376,"post_id":65372628,"comment_id":115575972,"body_markdown":"You&#39;re welcome.  BTW, don&#39;t get discouraged by my comment.  It&#39;s excellent that you&#39;re learning Java.  Just keep at it and try learning the basics of the language first.  It will make your eventual graphics development easier and more enjoyable.","body":"You&#39;re welcome.  BTW, don&#39;t get discouraged by my comment.  It&#39;s excellent that you&#39;re learning Java.  Just keep at it and try learning the basics of the language first.  It will make your eventual graphics development easier and more enjoyable."}],"owner":{"account_id":20256961,"reputation":1,"user_id":14856491,"display_name":"d3fb0fr0stm4nn"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1608399326,"answer_count":0,"score":0,"last_activity_date":1633715464,"creation_date":1608399248,"question_id":65372628,"body_markdown":"I am working on a funtion plotter and am looking towards painting 2 lines which shall represent the x and y axis. Would you be so kind and review my code and possibly tell me what is wrong! Thank you! :)\r\nThis thing funktionsschar is irrelevant to my question.\r\n```\r\npublic class AUSGABE_GUI extends JFrame {\r\n  // Anfang Attribute\r\n  public static final int WIDTH = 1024;\r\n  public static final int HEIGHT = 768;\r\n  Funktionsschar funktionsschar;\r\n  \r\n  private JPanel jPanel1 = new JPanel(null);\r\n  // Ende Attribute\r\n  \r\n  public AUSGABE_GUI(Funktionsschar pFunktionsschar) { \r\n    super (&quot;Plotter&quot;);\r\n    setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n    setSize(WIDTH, HEIGHT);\r\n    Dimension d = Toolkit.getDefaultToolkit().getScreenSize();\r\n    int x = (d.width - getSize().width) / 2;\r\n    int y = (d.height - getSize().height) / 2;\r\n    setLocation(x, y);\r\n    Container cp = getContentPane();\r\n    cp.setLayout(null);\r\n    \r\n    jPanel1.setBounds(0, 0, WIDTH, HEIGHT);\r\n    cp.add(jPanel1);\r\n    \r\n    setVisible(true);\r\n  } \r\n  public void paintComponents(Graphics g) {\r\n    super.paintComponents(g);\r\n    Graphics2D g2d = (Graphics2D) g;\r\n    g2d.setColor(Color.blue);\r\n    g2d.drawLine(0, HEIGHT / 2, WIDTH, HEIGHT / 2);\r\n    g2d.drawLine(WIDTH / 2, 0, WIDTH / 2, HEIGHT);\r\n  }\r\n\r\n```\r\nAlso i am really sorry if my code looks terrbile i am NEW to coding! ","title":"Java paintComponent dosent pactually paint, instead nothigng happens?","body":"<p>I am working on a funtion plotter and am looking towards painting 2 lines which shall represent the x and y axis. Would you be so kind and review my code and possibly tell me what is wrong! Thank you! :)\nThis thing funktionsschar is irrelevant to my question.</p>\n<pre><code>public class AUSGABE_GUI extends JFrame {\n  // Anfang Attribute\n  public static final int WIDTH = 1024;\n  public static final int HEIGHT = 768;\n  Funktionsschar funktionsschar;\n  \n  private JPanel jPanel1 = new JPanel(null);\n  // Ende Attribute\n  \n  public AUSGABE_GUI(Funktionsschar pFunktionsschar) { \n    super (&quot;Plotter&quot;);\n    setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n    setSize(WIDTH, HEIGHT);\n    Dimension d = Toolkit.getDefaultToolkit().getScreenSize();\n    int x = (d.width - getSize().width) / 2;\n    int y = (d.height - getSize().height) / 2;\n    setLocation(x, y);\n    Container cp = getContentPane();\n    cp.setLayout(null);\n    \n    jPanel1.setBounds(0, 0, WIDTH, HEIGHT);\n    cp.add(jPanel1);\n    \n    setVisible(true);\n  } \n  public void paintComponents(Graphics g) {\n    super.paintComponents(g);\n    Graphics2D g2d = (Graphics2D) g;\n    g2d.setColor(Color.blue);\n    g2d.drawLine(0, HEIGHT / 2, WIDTH, HEIGHT / 2);\n    g2d.drawLine(WIDTH / 2, 0, WIDTH / 2, HEIGHT);\n  }\n\n</code></pre>\n<p>Also i am really sorry if my code looks terrbile i am NEW to coding!</p>\n"},{"tags":["java","swing","paintcomponent"],"comments":[{"owner":{"display_name":"user2670200"},"score":0,"creation_date":1609676051,"post_id":65549461,"comment_id":115891300,"body_markdown":"Huh? You add 2 components JMenuBar &amp; JLabel to JFrame (not to the gameArea) and they have nothing to do with the paintComponent, heven&#39;t they?","body":"Huh? You add 2 components JMenuBar &amp; JLabel to JFrame (not to the gameArea) and they have nothing to do with the paintComponent, heven&#39;t they?"}],"answers":[{"tags":[],"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1609676323,"creation_date":1609676323,"answer_id":65549767,"question_id":65549461,"body_markdown":"To add a `JMenuBar` to your `JFrame` you have to use the [`setJMenuBar()`](https://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#setJMenuBar(javax.swing.JMenuBar)) method:\r\n\r\n&gt; `public void setJMenuBar(JMenuBar menubar)`\r\n&gt;\r\n&gt; Sets the menubar for this frame.\r\n&gt; \r\n&gt; Parameters:\r\n&gt; - `menubar` - the menubar being placed in the frame\r\n&gt;\r\n&gt; See Also:\r\n&gt;\r\n&gt;  `getJMenuBar()`\r\n\r\nSo you use it like:\r\n\r\n    frame.setJMenuBar(mb);\r\n\r\nFor the label and the game engine being added to the content pane: A `JFrame` uses the [`BorderLayout` layout manager](https://docs.oracle.com/javase/7/docs/api/java/awt/BorderLayout.html) as default for placing the components on the pane. See the documentation of [`JFrame`](https://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html): \r\n\r\n&gt; The default content pane will have a `BorderLayout` manager set on it.\r\n\r\n Because you haven&#39;t specify the locations where exactly you want to place the components with the `BorderLayout` layout manager, the component will be placed in the [`CENTER`](https://docs.oracle.com/javase/7/docs/api/java/awt/BorderLayout.html#CENTER). However there can only be one component at a slot defined by the `BorderLayout` layout manager. The latest added component will override previous placed components (in the same slot), so your added `JLabel` will be overridden by the later added game engine. Depending on how/where you want to place the `JLabel` and your game engine, you have to use a different layout manager or specify where you want to place the components with the `BorderLayout` layout manager.","title":"How to make an extra JMenuBar and JLabel to a game made by a gameengine?","body":"<p>To add a <code>JMenuBar</code> to your <code>JFrame</code> you have to use the <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#setJMenuBar(javax.swing.JMenuBar)\" rel=\"nofollow noreferrer\"><code>setJMenuBar()</code></a> method:</p>\n<blockquote>\n<p><code>public void setJMenuBar(JMenuBar menubar)</code></p>\n<p>Sets the menubar for this frame.</p>\n<p>Parameters:</p>\n<ul>\n<li><code>menubar</code> - the menubar being placed in the frame</li>\n</ul>\n<p>See Also:</p>\n<p><code>getJMenuBar()</code></p>\n</blockquote>\n<p>So you use it like:</p>\n<pre><code>frame.setJMenuBar(mb);\n</code></pre>\n<p>For the label and the game engine being added to the content pane: A <code>JFrame</code> uses the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/awt/BorderLayout.html\" rel=\"nofollow noreferrer\"><code>BorderLayout</code> layout manager</a> as default for placing the components on the pane. See the documentation of <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html\" rel=\"nofollow noreferrer\"><code>JFrame</code></a>:</p>\n<blockquote>\n<p>The default content pane will have a <code>BorderLayout</code> manager set on it.</p>\n</blockquote>\n<p>Because you haven't specify the locations where exactly you want to place the components with the <code>BorderLayout</code> layout manager, the component will be placed in the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/awt/BorderLayout.html#CENTER\" rel=\"nofollow noreferrer\"><code>CENTER</code></a>. However there can only be one component at a slot defined by the <code>BorderLayout</code> layout manager. The latest added component will override previous placed components (in the same slot), so your added <code>JLabel</code> will be overridden by the later added game engine. Depending on how/where you want to place the <code>JLabel</code> and your game engine, you have to use a different layout manager or specify where you want to place the components with the <code>BorderLayout</code> layout manager.</p>\n"},{"tags":[],"owner":{"account_id":5030450,"reputation":8573,"user_id":4040817,"accept_rate":75,"display_name":"Little Santi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1609676459,"creation_date":1609676459,"answer_id":65549785,"question_id":65549461,"body_markdown":"The way to add a JMenuBar to a JFrame is not:\r\n\r\n    frame.getContentPane().add(mb);\r\n\r\nbut:\r\n\r\n    this.frame.setJMenuBar(mb);\r\n\r\nTake a look at [Creating Menus][1] section in the Java Tutorial.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/uiswing/components/menu.html#create","title":"How to make an extra JMenuBar and JLabel to a game made by a gameengine?","body":"<p>The way to add a JMenuBar to a JFrame is not:</p>\n<pre><code>frame.getContentPane().add(mb);\n</code></pre>\n<p>but:</p>\n<pre><code>this.frame.setJMenuBar(mb);\n</code></pre>\n<p>Take a look at <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/menu.html#create\" rel=\"nofollow noreferrer\">Creating Menus</a> section in the Java Tutorial.</p>\n"}],"owner":{"account_id":18443407,"reputation":19,"user_id":13435433,"display_name":"ElsaKombat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1633715424,"creation_date":1609674430,"question_id":65549461,"body_markdown":"I have a game made with my game engine Java class.\r\nThe game engine uses paintComponent to draw the elements.\r\nHere is a snippet from the game:\r\n[gamepic][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5QhZa.png\r\n\r\n\r\nI want to add this game an extra JLabel and JMenu to the top or the button of the game. \r\n\r\nHere is my code:\r\n\r\n\r\n    public class LabyrinthGUI {\r\n    \r\n        private JFrame frame;\r\n        private GameEngine gameArea;\r\n        private String PlayerName;\r\n    \r\n        public LabyrinthGUI(String PlayerName) {\r\n            frame = new JFrame(&quot;GAME&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \r\n             //making new manu bar\r\n            JMenuBar mb = new JMenuBar();\r\n            JMenu sg = new JMenu(&quot;Settings&quot;);\r\n            JMenuItem ng = new JMenuItem(&quot;New game&quot;);\r\n            \r\n    \r\n            mb.add(ng);\r\n            mb.add(sg);\r\n    \r\n            frame.getContentPane().add(mb);\r\n            gameArea = new GameEngine(PlayerName);//This is a game engine \r\n\r\n          \r\n            JLabel l1 = new JLabel(&quot;First Label.&quot;);  \r\n            l1.setBounds(50,50, 100,30);  \r\n             frame.add(l1);\r\n                \r\n    \r\n            frame.getContentPane().add(gameArea);\r\n    \r\n            frame.setPreferredSize(new Dimension(800, 600));\r\n            frame.setResizable(false);\r\n            frame.pack();\r\n            frame.setVisible(true);\r\n    \r\n    \r\n        }\r\n\r\nThe problem with my code is it does not seem to add the JLabel and JMenuBar to the game.","title":"How to make an extra JMenuBar and JLabel to a game made by a gameengine?","body":"<p>I have a game made with my game engine Java class.\nThe game engine uses paintComponent to draw the elements.\nHere is a snippet from the game:\n<a href=\"https://i.stack.imgur.com/5QhZa.png\" rel=\"nofollow noreferrer\">gamepic</a></p>\n<p>I want to add this game an extra JLabel and JMenu to the top or the button of the game.</p>\n<p>Here is my code:</p>\n<pre><code>public class LabyrinthGUI {\n\n    private JFrame frame;\n    private GameEngine gameArea;\n    private String PlayerName;\n\n    public LabyrinthGUI(String PlayerName) {\n        frame = new JFrame(&quot;GAME&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n         //making new manu bar\n        JMenuBar mb = new JMenuBar();\n        JMenu sg = new JMenu(&quot;Settings&quot;);\n        JMenuItem ng = new JMenuItem(&quot;New game&quot;);\n        \n\n        mb.add(ng);\n        mb.add(sg);\n\n        frame.getContentPane().add(mb);\n        gameArea = new GameEngine(PlayerName);//This is a game engine \n\n      \n        JLabel l1 = new JLabel(&quot;First Label.&quot;);  \n        l1.setBounds(50,50, 100,30);  \n         frame.add(l1);\n            \n\n        frame.getContentPane().add(gameArea);\n\n        frame.setPreferredSize(new Dimension(800, 600));\n        frame.setResizable(false);\n        frame.pack();\n        frame.setVisible(true);\n\n\n    }\n</code></pre>\n<p>The problem with my code is it does not seem to add the JLabel and JMenuBar to the game.</p>\n"},{"tags":["java","multithreading","threadpool"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1633708856,"post_id":69498622,"comment_id":122840388,"body_markdown":"It sounds like you&#39;re not using threads as threads, but making them act like thread _schedulers_ as well. It might be far easier to map tasks to threads, and keep your thread scheduling at the process level. Or find a well tested, long established java thread/task scheduling library and start using that.","body":"It sounds like you&#39;re not using threads as threads, but making them act like thread <i>schedulers</i> as well. It might be far easier to map tasks to threads, and keep your thread scheduling at the process level. Or find a well tested, long established java thread/task scheduling library and start using that."},{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1633708863,"post_id":69498622,"comment_id":122840395,"body_markdown":"This requires a lot of coordination. The task implementation needs to have some kind of checkpoint that is resumable. This is not built in to Java.","body":"This requires a lot of coordination. The task implementation needs to have some kind of checkpoint that is resumable. This is not built in to Java."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1633714243,"post_id":69498622,"comment_id":122842273,"body_markdown":"Sounds like a possible [_XY Problem_](https://meta.stackexchange.com/q/66377/914217). Maybe you could say more about _why_ you want to use threads in that way.","body":"Sounds like a possible <a href=\"https://meta.stackexchange.com/q/66377/914217\"><i>XY Problem</i></a>. Maybe you could say more about <i>why</i> you want to use threads in that way."},{"owner":{"account_id":7054874,"reputation":14062,"user_id":5402618,"accept_rate":45,"display_name":"CrazySynthax"},"score":0,"creation_date":1633715481,"post_id":69498622,"comment_id":122842690,"body_markdown":"@Solomon Slow, yes. Let&#39;s say that the task looks for a key in Redis. If it finds the key, it knows how to handle it. Otherwise, the task goes to sleep and wakes up after certain period. While the task is asleep, I want the thread to handle other tasks","body":"@Solomon Slow, yes. Let&#39;s say that the task looks for a key in Redis. If it finds the key, it knows how to handle it. Otherwise, the task goes to sleep and wakes up after certain period. While the task is asleep, I want the thread to handle other tasks"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":1,"creation_date":1633717256,"post_id":69498622,"comment_id":122843287,"body_markdown":"What are &quot;other tasks?&quot; Other keys to be looked up and &quot;handled?&quot; I would try a slightly different architecture: I&#39;d have a queue of tasks, and a worker thread that pulls tasks from the queue, looks up keys, and &quot;handles&quot; them. If the worker ever fails to find a key, then I&#39;d have it put the task back on to the tail of the queue, and then proceed with the next task at the head of the queue. Also note: that what I just described basically is a [single-thread `Executor`](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/util/concurrent/Executors.html#newSingleThreadExecutor()).","body":"What are &quot;other tasks?&quot; Other keys to be looked up and &quot;handled?&quot; I would try a slightly different architecture: I&#39;d have a queue of tasks, and a worker thread that pulls tasks from the queue, looks up keys, and &quot;handles&quot; them. If the worker ever fails to find a key, then I&#39;d have it put the task back on to the tail of the queue, and then proceed with the next task at the head of the queue. Also note: that what I just described basically is a <a href=\"https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/util/concurrent/Executors.html#newSingleThreadExecutor()\" rel=\"nofollow noreferrer\">single-thread <code>Executor</code></a>."}],"answers":[{"tags":[],"owner":{"account_id":75005,"reputation":14157,"user_id":215266,"accept_rate":78,"display_name":"satur9nine"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1633715407,"creation_date":1633715407,"answer_id":69499893,"question_id":69498622,"body_markdown":"What you describe is what coroutines do when you mix them with a threadpool dispatcher, assuming of course that you are invoking suspend functions from within the coroutine context.\r\n\r\nWhen the suspend function is invoked and suspends then the thread that was occupied in the threadpool is now free to execute any other coroutine that is ready.\r\n\r\nIf you only care about using the JVM then you can use Kotlin coroutines:\r\n\r\n - https://kotlinlang.org/docs/coroutines-overview.html\r\n\r\nAchieving this in a pure Java environment might be possible using one of these coroutine frameworks for Java:\r\n\r\n - https://github.com/offbynull/coroutines\r\n - https://github.com/esoco/coroutines\r\n - https://github.com/rendaw/java-coroutines\r\n - forthcoming Java fibers: https://openjdk.java.net/projects/loom/","title":"How to temporarily stop a task executed by thread pool?","body":"<p>What you describe is what coroutines do when you mix them with a threadpool dispatcher, assuming of course that you are invoking suspend functions from within the coroutine context.</p>\n<p>When the suspend function is invoked and suspends then the thread that was occupied in the threadpool is now free to execute any other coroutine that is ready.</p>\n<p>If you only care about using the JVM then you can use Kotlin coroutines:</p>\n<ul>\n<li><a href=\"https://kotlinlang.org/docs/coroutines-overview.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/coroutines-overview.html</a></li>\n</ul>\n<p>Achieving this in a pure Java environment might be possible using one of these coroutine frameworks for Java:</p>\n<ul>\n<li><a href=\"https://github.com/offbynull/coroutines\" rel=\"nofollow noreferrer\">https://github.com/offbynull/coroutines</a></li>\n<li><a href=\"https://github.com/esoco/coroutines\" rel=\"nofollow noreferrer\">https://github.com/esoco/coroutines</a></li>\n<li><a href=\"https://github.com/rendaw/java-coroutines\" rel=\"nofollow noreferrer\">https://github.com/rendaw/java-coroutines</a></li>\n<li>forthcoming Java fibers: <a href=\"https://openjdk.java.net/projects/loom/\" rel=\"nofollow noreferrer\">https://openjdk.java.net/projects/loom/</a></li>\n</ul>\n"}],"owner":{"account_id":7054874,"reputation":14062,"user_id":5402618,"accept_rate":45,"display_name":"CrazySynthax"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":167,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1633715407,"creation_date":1633708433,"question_id":69498622,"body_markdown":"Suppose I have a thread pool with 10 threads. Let&#39;s say that one of the threads in the pool executes some task. I want that in certain cases, the task will stop its execution, the thread will take another task and only later it will return to the previous task and continue it from where it stopped. \r\n\r\nIs this possible? How can I do it? \r\n","title":"How to temporarily stop a task executed by thread pool?","body":"<p>Suppose I have a thread pool with 10 threads. Let's say that one of the threads in the pool executes some task. I want that in certain cases, the task will stop its execution, the thread will take another task and only later it will return to the previous task and continue it from where it stopped.</p>\n<p>Is this possible? How can I do it?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":5,"creation_date":1633709495,"post_id":69498782,"comment_id":122840601,"body_markdown":"I&#39;d say convert to string, start traversing until you find a non-zero after the dot and then count another four characters. Then cut to there with `substring`. I can&#39;t think of a way to do it with calculations or something from the standard library.","body":"I&#39;d say convert to string, start traversing until you find a non-zero after the dot and then count another four characters. Then cut to there with <code>substring</code>. I can&#39;t think of a way to do it with calculations or something from the standard library."},{"owner":{"account_id":1718680,"reputation":2537,"user_id":1575195,"display_name":"eracube"},"score":0,"creation_date":1633709618,"post_id":69498782,"comment_id":122840639,"body_markdown":"I am not aware of any functions that provide this capability. Maybe use a hack approach.","body":"I am not aware of any functions that provide this capability. Maybe use a hack approach."},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1633712163,"post_id":69498782,"comment_id":122841530,"body_markdown":"Possible duplicate of https://stackoverflow.com/questions/5474742/is-there-a-java-number-formatting-library-that-handles-significant-digits/6092978","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/5474742/is-there-a-java-number-formatting-library-that-handles-significant-digits/6092978\" title=\"is there a java number formatting library that handles significant digits\">stackoverflow.com/questions/5474742/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":11167250,"reputation":2956,"user_id":8195525,"accept_rate":80,"display_name":"Derek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1633710087,"creation_date":1633710087,"answer_id":69498958,"question_id":69498782,"body_markdown":"This assumes your number is a string:\r\n\r\n    String tmp = &quot;0.0683453248&quot;;\r\n    \r\n    String[] tmpA = tmp.split(&quot;&quot;);\r\n    ArrayList&lt;String&gt; res = new ArrayList&lt;&gt;();\r\n    \r\n    for(int i = 0; i &lt; tmpA.length; i++){\r\n        res.add(tmpA[i]);\r\n    \r\n        if(!tmpA[i].equals(&quot;.&quot;) &amp;&amp; Integer.parseInt(tmpA[i]) &gt; 0){\r\n            res.add(tmpA[i + 1]);\r\n            res.add(tmpA[i + 2]);\r\n            res.add(tmpA[i + 3]);\r\n            break;\r\n        }\r\n    \r\n    }\r\n    \r\n    String result = String.join(&quot;&quot;,res);","title":"How to leave only 4 decimals after number bigger than 0?","body":"<p>This assumes your number is a string:</p>\n<pre><code>String tmp = &quot;0.0683453248&quot;;\n\nString[] tmpA = tmp.split(&quot;&quot;);\nArrayList&lt;String&gt; res = new ArrayList&lt;&gt;();\n\nfor(int i = 0; i &lt; tmpA.length; i++){\n    res.add(tmpA[i]);\n\n    if(!tmpA[i].equals(&quot;.&quot;) &amp;&amp; Integer.parseInt(tmpA[i]) &gt; 0){\n        res.add(tmpA[i + 1]);\n        res.add(tmpA[i + 2]);\n        res.add(tmpA[i + 3]);\n        break;\n    }\n\n}\n\nString result = String.join(&quot;&quot;,res);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633711361,"creation_date":1633710749,"answer_id":69499099,"question_id":69498782,"body_markdown":"Using the [solution from this answer](https://stackoverflow.com/a/25307973/10819573), you can convert the given number into a string and then use the regex replacement to get the required string out of it.\r\n\r\n**Demo:**\r\n\r\n    import java.text.DecimalFormat;\r\n    import java.text.DecimalFormatSymbols;\r\n    import java.util.Locale;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// Test\r\n    \t\tSystem.out.println(doubleToString(0.00000548347554));\r\n    \t\tSystem.out.println(doubleToString(0.0683453248));\r\n    \t}\r\n    \r\n    \tstatic String doubleToString(double n) {\r\n    \t\tDecimalFormat df = new DecimalFormat(&quot;0&quot;, DecimalFormatSymbols.getInstance(Locale.ENGLISH));\r\n    \t\tdf.setMaximumFractionDigits(340);\r\n    \t\treturn df.format(n).replaceAll(&quot;(\\\\d*\\\\.0*[1-9]{4})\\\\d*&quot;, &quot;$1&quot;);\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    0.000005483\r\n    0.06834\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;][1]\r\n\r\n**Explanation of the regex**:\r\n\r\n  - `(`: Start of capturing group#1\r\n    - `\\\\d*\\\\.`: Digit(s) followed by `.`\r\n    - `0*`: Any number of zeros\r\n    - `[1-9]{4}`: Non-zero four digits \r\n  - `)`: End of capturing group#1\r\n  - `\\d*` : Any digit any number of times\r\n\r\n\r\n  [1]: https://ideone.com/H5vBrn","title":"How to leave only 4 decimals after number bigger than 0?","body":"<p>Using the <a href=\"https://stackoverflow.com/a/25307973/10819573\">solution from this answer</a>, you can convert the given number into a string and then use the regex replacement to get the required string out of it.</p>\n<p><strong>Demo:</strong></p>\n<pre><code>import java.text.DecimalFormat;\nimport java.text.DecimalFormatSymbols;\nimport java.util.Locale;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Test\n        System.out.println(doubleToString(0.00000548347554));\n        System.out.println(doubleToString(0.0683453248));\n    }\n\n    static String doubleToString(double n) {\n        DecimalFormat df = new DecimalFormat(&quot;0&quot;, DecimalFormatSymbols.getInstance(Locale.ENGLISH));\n        df.setMaximumFractionDigits(340);\n        return df.format(n).replaceAll(&quot;(\\\\d*\\\\.0*[1-9]{4})\\\\d*&quot;, &quot;$1&quot;);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>0.000005483\n0.06834\n</code></pre>\n<p><a href=\"https://ideone.com/H5vBrn\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<p><strong>Explanation of the regex</strong>:</p>\n<ul>\n<li><code>(</code>: Start of capturing group#1\n<ul>\n<li><code>\\\\d*\\\\.</code>: Digit(s) followed by <code>.</code></li>\n<li><code>0*</code>: Any number of zeros</li>\n<li><code>[1-9]{4}</code>: Non-zero four digits</li>\n</ul>\n</li>\n<li><code>)</code>: End of capturing group#1</li>\n<li><code>\\d*</code> : Any digit any number of times</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633715400,"creation_date":1633715027,"answer_id":69499834,"question_id":69498782,"body_markdown":"For small numbers `BigDecimal` can be used:\r\n````\r\nBigDecimal significant(double number, int count) {\r\n    if (count &lt; 1) \r\n        throw new IllegalArgumentException(&quot;invalid count: &quot; + count);\r\n    BigDecimal big = BigDecimal.valueOf(number);\r\n    if (big.precision() &lt;= count) {\r\n        return big;\r\n    } else {\r\n        return big.setScale(big.scale()-big.precision()+count, RoundingMode.HALF_EVEN);\r\n    }\r\n}\r\n````\r\n`precision()` returns the number of *significant* digits;  \r\nthe method changes the scale so only the desired number of digits is present.  \r\nThe `if` is used to avoid more zeros than the input if this has less than `count` digits.\r\n\r\nUse `doubleValue()` to convert the result to `double` if needed (may *suffer* from rounding error).    \r\nTo get a string, use `toPlainString()`, which will transform the result to string without using the exponential notation.\r\n\r\nRounding mode can also be changed if desired.\r\n\r\nNote: it can also be used with larger numbers, it basically will replace digits by zero like in `significant(12345,2)` -&gt; `12000` (or `1.2E+4`)","title":"How to leave only 4 decimals after number bigger than 0?","body":"<p>For small numbers <code>BigDecimal</code> can be used:</p>\n<pre><code>BigDecimal significant(double number, int count) {\n    if (count &lt; 1) \n        throw new IllegalArgumentException(&quot;invalid count: &quot; + count);\n    BigDecimal big = BigDecimal.valueOf(number);\n    if (big.precision() &lt;= count) {\n        return big;\n    } else {\n        return big.setScale(big.scale()-big.precision()+count, RoundingMode.HALF_EVEN);\n    }\n}\n</code></pre>\n<p><code>precision()</code> returns the number of <em>significant</em> digits;<br />\nthe method changes the scale so only the desired number of digits is present.<br />\nThe <code>if</code> is used to avoid more zeros than the input if this has less than <code>count</code> digits.</p>\n<p>Use <code>doubleValue()</code> to convert the result to <code>double</code> if needed (may <em>suffer</em> from rounding error).<br />\nTo get a string, use <code>toPlainString()</code>, which will transform the result to string without using the exponential notation.</p>\n<p>Rounding mode can also be changed if desired.</p>\n<p>Note: it can also be used with larger numbers, it basically will replace digits by zero like in <code>significant(12345,2)</code> -&gt; <code>12000</code> (or <code>1.2E+4</code>)</p>\n"}],"owner":{"account_id":16934123,"reputation":1204,"user_id":12247578,"display_name":"vladzaba"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":69498958,"answer_count":3,"score":0,"last_activity_date":1633715400,"creation_date":1633709244,"question_id":69498782,"body_markdown":"I don&#39;t know how to explain this well, but for example I have a number:\r\n`0.00000548347554` and want to make `0.000005483` from it, or\r\n`0.0683453248` to `0.06843`, etc.\r\n","title":"How to leave only 4 decimals after number bigger than 0?","body":"<p>I don't know how to explain this well, but for example I have a number:\n<code>0.00000548347554</code> and want to make <code>0.000005483</code> from it, or\n<code>0.0683453248</code> to <code>0.06843</code>, etc.</p>\n"},{"tags":["java","image","swing","animation","paintcomponent"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":2,"creation_date":1616178380,"post_id":66712125,"comment_id":117930980,"body_markdown":"Your drawing JPanel paintComponent method should paint the JPanel.  Period.  Timers or other code should be executed somewhere else.  If you provide a [mre] with all necessary images, you might get further help.  The Oracle tutorial, [Creating a GUI With JFC/Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html) will show the correct way to construct a Swing GUI.  Skip the Netbeans section.","body":"Your drawing JPanel paintComponent method should paint the JPanel.  Period.  Timers or other code should be executed somewhere else.  If you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with all necessary images, you might get further help.  The Oracle tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With JFC/Swing</a> will show the correct way to construct a Swing GUI.  Skip the Netbeans section."},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1616186136,"post_id":66712125,"comment_id":117933668,"body_markdown":"Never _ever_ sleep on the EDT.","body":"Never <i>ever</i> sleep on the EDT."}],"answers":[{"tags":[],"owner":{"account_id":17714602,"reputation":3,"user_id":12861284,"display_name":"Mikayla Pace"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1616238702,"creation_date":1616238702,"answer_id":66720880,"question_id":66712125,"body_markdown":"Fixed the Lag. Removed the code that slept the Event Dispatch thread, which seemed to be causing the lag and used the timer to handle the pause between animations.\r\n\r\n    @Override\r\n    protected void paintComponent(Graphics g) {\r\n        super.paintComponent(g);\r\n        setGullFrame();\r\n        gull = seagullAnimation[counter].getImage();\r\n        g.drawImage(gull,10, -450, this);\r\n\r\n\r\n    public void setGullFrame(){\r\n        \r\n        if(counter &gt;=8){\r\n            counter = 0;\r\n            timer.stop();\r\n            timer.setInitialDelay((int) (Math.random() * 5000));\r\n            timer.start();\r\n\r\n        } else {\r\n            counter++;\r\n        }\r\n\r\n    }","title":"Is there a more performance friendly way to iterate through images for an animation than using an imageIcon array in Java?","body":"<p>Fixed the Lag. Removed the code that slept the Event Dispatch thread, which seemed to be causing the lag and used the timer to handle the pause between animations.</p>\n<pre><code>@Override\nprotected void paintComponent(Graphics g) {\n    super.paintComponent(g);\n    setGullFrame();\n    gull = seagullAnimation[counter].getImage();\n    g.drawImage(gull,10, -450, this);\n\n\npublic void setGullFrame(){\n    \n    if(counter &gt;=8){\n        counter = 0;\n        timer.stop();\n        timer.setInitialDelay((int) (Math.random() * 5000));\n        timer.start();\n\n    } else {\n        counter++;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":17714602,"reputation":3,"user_id":12861284,"display_name":"Mikayla Pace"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":66720880,"answer_count":1,"score":0,"last_activity_date":1633715395,"creation_date":1616171718,"question_id":66712125,"body_markdown":"I&#39;m Trying to Animate a seagull image on a JPanel for a game I&#39;m building. The animation works great, it looks how I want it to, but when I click the play button to switch cards to the next JPanel, (There is a play button controlled by the JFrame containing this panel that changes the card to another JPanel, this lags when the animation is going) it lags when the animation is running. Is there a more performance friendly way to run my animation than by looping through an ImageIcon[] like I&#39;m doing? \r\n\r\n\r\n    public class StartPanel extends JPanel implements ActionListener{\r\n        \r\n        Image gull;\r\n        \r\n        Timer timer;\r\n        ImageIcon[] seagullAnimation = new ImageIcon[9];\r\n        int counter = 0;\r\n       \r\n\r\n    StartPanel(){\r\n        seagullAnimation[0] = new ImageIcon(getClass().getResource(&quot;gullBlink0.png&quot;));\r\n        //Here I add the rest of the images in the same fashion\r\n\r\n        timer = new Timer(13, this);\r\n        timer.start();\r\n        setPreferredSize(new Dimension(500,500));\r\n\r\n    }\r\n    @Override\r\n    protected void paintComponent(Graphics g) {\r\n        super.paintComponent(g);\r\n\r\n        //Iterates through the Gull Blink images and set the proper image\r\n        if(counter &gt;=8){\r\n            counter = 0;\r\n            timer.stop();\r\n                try {    \r\n                    //Randomizes sleep times to make blink look natural\r\n                    Thread.sleep((long) (Math.random() * 5000));\r\n                    timer.start();\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            \r\n     \r\n        } else {\r\n            counter++;\r\n        }\r\n        gull = seagullAnimation[counter].getImage();\r\n\r\n        g.drawImage(gull,10,-450, this);\r\n  \r\n    }\r\n\r\n    @Override\r\n    public void actionPerformed(ActionEvent e) {\r\n        repaint();\r\n    }}\r\n\r\n","title":"Is there a more performance friendly way to iterate through images for an animation than using an imageIcon array in Java?","body":"<p>I'm Trying to Animate a seagull image on a JPanel for a game I'm building. The animation works great, it looks how I want it to, but when I click the play button to switch cards to the next JPanel, (There is a play button controlled by the JFrame containing this panel that changes the card to another JPanel, this lags when the animation is going) it lags when the animation is running. Is there a more performance friendly way to run my animation than by looping through an ImageIcon[] like I'm doing?</p>\n<pre><code>public class StartPanel extends JPanel implements ActionListener{\n    \n    Image gull;\n    \n    Timer timer;\n    ImageIcon[] seagullAnimation = new ImageIcon[9];\n    int counter = 0;\n   \n\nStartPanel(){\n    seagullAnimation[0] = new ImageIcon(getClass().getResource(&quot;gullBlink0.png&quot;));\n    //Here I add the rest of the images in the same fashion\n\n    timer = new Timer(13, this);\n    timer.start();\n    setPreferredSize(new Dimension(500,500));\n\n}\n@Override\nprotected void paintComponent(Graphics g) {\n    super.paintComponent(g);\n\n    //Iterates through the Gull Blink images and set the proper image\n    if(counter &gt;=8){\n        counter = 0;\n        timer.stop();\n            try {    \n                //Randomizes sleep times to make blink look natural\n                Thread.sleep((long) (Math.random() * 5000));\n                timer.start();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        \n \n    } else {\n        counter++;\n    }\n    gull = seagullAnimation[counter].getImage();\n\n    g.drawImage(gull,10,-450, this);\n\n}\n\n@Override\npublic void actionPerformed(ActionEvent e) {\n    repaint();\n}}\n</code></pre>\n"},{"tags":["java","swing","canvas","arraylist","paintcomponent"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1626017426,"post_id":68336384,"comment_id":120775721,"body_markdown":"Override paintComponent only.  Do not override `paint(Graphics)`. See https://docs.oracle.com/javase/tutorial/uiswing/painting/.","body":"Override paintComponent only.  Do not override <code>paint(Graphics)</code>. See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/painting</a>."},{"owner":{"account_id":22166680,"reputation":3,"user_id":16412771,"display_name":"Thariel wooden"},"score":0,"creation_date":1626024147,"post_id":68336384,"comment_id":120777163,"body_markdown":"@user16320675 Thank you. I didn&#39;t know that :)","body":"@user16320675 Thank you. I didn&#39;t know that :)"},{"owner":{"account_id":22166680,"reputation":3,"user_id":16412771,"display_name":"Thariel wooden"},"score":0,"creation_date":1626026332,"post_id":68336384,"comment_id":120777648,"body_markdown":"I realized I need to write a code to clear my Canvas first before I paint the Components. I write the method Loeschen, but I get an error Nullpointerexception when running the program! @VGR","body":"I realized I need to write a code to clear my Canvas first before I paint the Components. I write the method Loeschen, but I get an error Nullpointerexception when running the program! @VGR"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1626030483,"post_id":68336384,"comment_id":120778556,"body_markdown":"For a NullPointerException, see https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it.","body":"For a NullPointerException, see <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\" title=\"what is a nullpointerexception and how do i fix it\">stackoverflow.com/questions/218384/&hellip;</a>."}],"owner":{"account_id":22166680,"reputation":3,"user_id":16412771,"display_name":"Thariel wooden"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1633714922,"creation_date":1626007627,"question_id":68336384,"body_markdown":"I have a project, in which I should create a robot that moves between randomly created squares, till it sticks between two squares, or it reaches the end of the Canvas. For that I have a Super class Figur that has two subclass (Kreis) Circle and (Rechteck) Square, I have a Class Spielfeld(Gamefield) that has methods to populate an arraylist of figure, commands that user gives, of what robot should do, ...and at the end of this methods it calls the method zeichnen(draw) from Class Leinwand(Canvas). \r\n\r\n```\r\npublic abstract class Figur{\r\n///..some fields, constructions, methhods..\r\nabstract public void zeichnen(Graphics g);\r\n}\r\n```\r\n```\r\npublic class Rechteck extends Figur{\r\n///..some fields, constructions, methhods..\r\n\r\n   public void zeichnen(Graphics g){\r\n       g.setColor(getFarbe());\r\n       g.drawRect(getPosition().getX(),getPosition().getY(),getBreite(),getLaenge());\r\n       g.fillRect(getPosition().getX(),getPosition().getY(),getBreite(),getLaenge());\r\n    }\r\n\r\n```\r\n```\r\npublic class Kreis extends Figur{\r\n      public void zeichnen(Graphics g){\r\n       g.setColor(getFarbe());\r\n       g.drawOval(getPosition().getX(),getPosition().getY(),getBreite(),getLaenge());\r\n       g.fillOval(getPosition().getX(),getPosition().getY(),getBreite(),getLaenge());\r\n    }\r\n\r\n```\r\n```\r\npublic class Spielfeld {\r\nstatic ArrayList&lt;Figur&gt; myCharacters = new ArrayList&lt;&gt;();\r\n//some methods that adds points(circles) and Squares to the arraylist MyCharacters\r\n//some methods like movebetweensquares that calls method zeichnen in Leinwand\r\n```\r\n```\r\npublic class Leinwand{\r\n\r\n      public void zeichnen(ArrayList&lt;Figur&gt; figur){\r\n            loeschen();\r\n            zeichenflaeche.repaintFiguren(figur);   \r\n        }\r\n\r\n      private void loeschen() {\r\n        Color original = graphic.getColor();\r\n        graphic.setColor(hintergrundfarbe);\r\n        Dimension size = zeichenflaeche.getSize();\r\n        graphic.fill(new Rectangle(0, 0, size.width, size.height));\r\n        graphic.setColor(original);\r\n      }\r\n\r\n\r\n    private class Zeichenflaeche extends JPanel {\r\n        private static final long serialVersionUID = 20060330L;\r\n\r\n\r\n     \r\n\r\n        public void paintComponent(Graphics g){\r\n          \r\n          super.paintComponent(g);\r\n          \r\n            for(int j=0; j&lt;Spielfeld.get_ myCharacters ().size();j++){\r\n              Figur s= Spielfeld.get_ myCharacters ().get(j);\r\n              s.zeichnen(g);\r\n           }\r\n       }\r\n\r\n       public void repaintFiguren(ArrayList&lt;Figur&gt; figuren{\r\n          \r\n           for( Figur f: Spielfeld.get_ myCharacters ()){\r\n              for(int i=0; i&lt;Spielfeld.get_ myCharacters ().size();i++){\r\n              if(f instanceof Rechteck){\r\n                               repaint(figuren.get(i).getPosition().getX(),\r\n                               figuren.get(i).getPosition().getY(),\r\n                               figuren.get(i).getBreite(),figuren.get(i).getLaenge()); }\r\n\r\n              else if(f instanceof Kreis){\r\n                     repaint(figuren.get(i).getPosition().getX(),\r\n                             figuren.get(i).getPosition().getY(),\r\n                             figuren.get(i).getBreite(),\r\n                             figuren.get(i).getLaenge());}\r\n               }\r\n            }\r\n        } \r\n   }\r\n  \r\n\r\n```","title":"Why do I get an error (Nullpointerexception) when trying to clear Canvas?","body":"<p>I have a project, in which I should create a robot that moves between randomly created squares, till it sticks between two squares, or it reaches the end of the Canvas. For that I have a Super class Figur that has two subclass (Kreis) Circle and (Rechteck) Square, I have a Class Spielfeld(Gamefield) that has methods to populate an arraylist of figure, commands that user gives, of what robot should do, ...and at the end of this methods it calls the method zeichnen(draw) from Class Leinwand(Canvas).</p>\n<pre><code>public abstract class Figur{\n///..some fields, constructions, methhods..\nabstract public void zeichnen(Graphics g);\n}\n</code></pre>\n<pre><code>public class Rechteck extends Figur{\n///..some fields, constructions, methhods..\n\n   public void zeichnen(Graphics g){\n       g.setColor(getFarbe());\n       g.drawRect(getPosition().getX(),getPosition().getY(),getBreite(),getLaenge());\n       g.fillRect(getPosition().getX(),getPosition().getY(),getBreite(),getLaenge());\n    }\n\n</code></pre>\n<pre><code>public class Kreis extends Figur{\n      public void zeichnen(Graphics g){\n       g.setColor(getFarbe());\n       g.drawOval(getPosition().getX(),getPosition().getY(),getBreite(),getLaenge());\n       g.fillOval(getPosition().getX(),getPosition().getY(),getBreite(),getLaenge());\n    }\n\n</code></pre>\n<pre><code>public class Spielfeld {\nstatic ArrayList&lt;Figur&gt; myCharacters = new ArrayList&lt;&gt;();\n//some methods that adds points(circles) and Squares to the arraylist MyCharacters\n//some methods like movebetweensquares that calls method zeichnen in Leinwand\n</code></pre>\n<pre><code>public class Leinwand{\n\n      public void zeichnen(ArrayList&lt;Figur&gt; figur){\n            loeschen();\n            zeichenflaeche.repaintFiguren(figur);   \n        }\n\n      private void loeschen() {\n        Color original = graphic.getColor();\n        graphic.setColor(hintergrundfarbe);\n        Dimension size = zeichenflaeche.getSize();\n        graphic.fill(new Rectangle(0, 0, size.width, size.height));\n        graphic.setColor(original);\n      }\n\n\n    private class Zeichenflaeche extends JPanel {\n        private static final long serialVersionUID = 20060330L;\n\n\n     \n\n        public void paintComponent(Graphics g){\n          \n          super.paintComponent(g);\n          \n            for(int j=0; j&lt;Spielfeld.get_ myCharacters ().size();j++){\n              Figur s= Spielfeld.get_ myCharacters ().get(j);\n              s.zeichnen(g);\n           }\n       }\n\n       public void repaintFiguren(ArrayList&lt;Figur&gt; figuren{\n          \n           for( Figur f: Spielfeld.get_ myCharacters ()){\n              for(int i=0; i&lt;Spielfeld.get_ myCharacters ().size();i++){\n              if(f instanceof Rechteck){\n                               repaint(figuren.get(i).getPosition().getX(),\n                               figuren.get(i).getPosition().getY(),\n                               figuren.get(i).getBreite(),figuren.get(i).getLaenge()); }\n\n              else if(f instanceof Kreis){\n                     repaint(figuren.get(i).getPosition().getX(),\n                             figuren.get(i).getPosition().getY(),\n                             figuren.get(i).getBreite(),\n                             figuren.get(i).getLaenge());}\n               }\n            }\n        } \n   }\n  \n\n</code></pre>\n"},{"tags":["java","swing","jpanel","paintcomponent","graphics2d"],"comments":[{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1633446649,"post_id":69452737,"comment_id":122759231,"body_markdown":"Do you realize that Graphics2D is a subclass of g?  So you only need to pass g2 do the methods.  The method of g will still be available.  And please provide a [mre] that demonstrates the problem.","body":"Do you realize that Graphics2D is a subclass of g?  So you only need to pass g2 do the methods.  The method of g will still be available.  And please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the problem."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1633447264,"post_id":69452737,"comment_id":122759482,"body_markdown":"You are missing some classes (and no don&#39;t post them).   I would suggest  you look for  some condition where you are tying up the Event Dispatch Thread causing your program to lock up.  If you were recursively calling methods with in the painting process you would eventually get a stack overflow.  So it may be some other loop that is tying up the EDT.  With so much code and it being incomplete, that is the best I can offer.  I have better luck sprinkling in print statements at key points (entering and exiting methods) to help narrow down the location.","body":"You are missing some classes (and no don&#39;t post them).   I would suggest  you look for  some condition where you are tying up the Event Dispatch Thread causing your program to lock up.  If you were recursively calling methods with in the painting process you would eventually get a stack overflow.  So it may be some other loop that is tying up the EDT.  With so much code and it being incomplete, that is the best I can offer.  I have better luck sprinkling in print statements at key points (entering and exiting methods) to help narrow down the location."},{"owner":{"account_id":22640898,"reputation":1,"user_id":16817052,"display_name":"Jon Cohen"},"score":0,"creation_date":1633448437,"post_id":69452737,"comment_id":122760072,"body_markdown":"Hi WSJ, I added SOP.println(SwingUtilities.isEventDispatchThread()) throughout my code and true was printed in every instance. I was having a problem with the EDT earlier, but adding Swing.Utilities.invokeLater() to the Controller when calling doCycle() fixed the problem. Is this enough to determine there are no problems with the Event Dispatch Thread, or is there something else I can look for? Thank you, Jon","body":"Hi WSJ, I added SOP.println(SwingUtilities.isEventDispatchThread()) throughout my code and true was printed in every instance. I was having a problem with the EDT earlier, but adding Swing.Utilities.invokeLater() to the Controller when calling doCycle() fixed the problem. Is this enough to determine there are no problems with the Event Dispatch Thread, or is there something else I can look for? Thank you, Jon"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1633449275,"post_id":69452737,"comment_id":122760438,"body_markdown":"That just means your running in the EDT.  So somewhere you must be doing something to tie up processing. For example if you have two flags waiting for each other to be set, then you will have lock up and the EDT will never return.  You said it worked the first time but later locked up.  So whatever action you took with your game during that time probably contributed to the problem.","body":"That just means your running in the EDT.  So somewhere you must be doing something to tie up processing. For example if you have two flags waiting for each other to be set, then you will have lock up and the EDT will never return.  You said it worked the first time but later locked up.  So whatever action you took with your game during that time probably contributed to the problem."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1633449478,"post_id":69452737,"comment_id":122760531,"body_markdown":"Also, if you have other threads depending on some booleans or other flags, you should probably declare them volatile to ensure the threads are reading the current value.","body":"Also, if you have other threads depending on some booleans or other flags, you should probably declare them volatile to ensure the threads are reading the current value."},{"owner":{"account_id":22640898,"reputation":1,"user_id":16817052,"display_name":"Jon Cohen"},"score":0,"creation_date":1633457354,"post_id":69452737,"comment_id":122763508,"body_markdown":"I&#39;ve been trying to figure out if there are any threading issues but I am getting nowhere. As far as I know I do not have other threads dependent on other flags, but my experience with threading is extremely limited so i could be wrong. One other clue is that the updateView() method from View is being called 10 times, which calls panel.repaint() in each call, but panel.repaint() is only invoked after the 10 calls.","body":"I&#39;ve been trying to figure out if there are any threading issues but I am getting nowhere. As far as I know I do not have other threads dependent on other flags, but my experience with threading is extremely limited so i could be wrong. One other clue is that the updateView() method from View is being called 10 times, which calls panel.repaint() in each call, but panel.repaint() is only invoked after the 10 calls."},{"owner":{"account_id":22640898,"reputation":1,"user_id":16817052,"display_name":"Jon Cohen"},"score":0,"creation_date":1633457481,"post_id":69452737,"comment_id":122763557,"body_markdown":"If I remove the call for repaint(), then paintComponent() isn&#39;t called that last time, so the repaint() call after the 10 updateView() calls isn&#39;t a spontaneous call","body":"If I remove the call for repaint(), then paintComponent() isn&#39;t called that last time, so the repaint() call after the 10 updateView() calls isn&#39;t a spontaneous call"},{"owner":{"account_id":22640898,"reputation":1,"user_id":16817052,"display_name":"Jon Cohen"},"score":0,"creation_date":1633462902,"post_id":69452737,"comment_id":122765329,"body_markdown":"I think i&#39;m just going to do without the explicit repaint() call, if I add a mouseListener and move the paddle on each click, the graphic works fine.","body":"I think i&#39;m just going to do without the explicit repaint() call, if I add a mouseListener and move the paddle on each click, the graphic works fine."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1633480730,"post_id":69452737,"comment_id":122769381,"body_markdown":"Why are you still extending JFrame?","body":"Why are you still extending JFrame?"}],"owner":{"account_id":22640898,"reputation":1,"user_id":16817052,"display_name":"Jon Cohen"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1633714773,"creation_date":1633445693,"question_id":69452737,"body_markdown":"I am currently working on a brick breaker game and have run into an issue with the paintComponent method. The first time repaint is called (to invoke paintComponent) everything works fine, but the second time it is called the program gets stuck on the last line of paintComponent.\r\n\r\nBelow is code and screenshots of the issue I am having. \r\n\r\nMyPanel Code:\r\n\r\n```\r\npublic class MyPanel extends JPanel {\r\n    private static Model model;\r\n    public MyPanel(){\r\n        setBorder(BorderFactory.createLineBorder(Color.black));\r\n        setBackground(Color.BLACK);\r\n    }\r\n\r\n\r\n    public void updateModel(Model modelArg){\r\n        model = modelArg;\r\n    }\r\n\r\n    @Override\r\n    public void paintComponent(Graphics g){\r\n        super.paintComponent(g);\r\n\r\n        Graphics2D g2 = (Graphics2D) g;\r\n        draw(g2);\r\n    }\r\n\r\n    //Draw each game component\r\n    public static void draw(Graphics2D g2){\r\n\r\n        draw(g2, g, model.getPaddle());\r\n        draw(g2, g, model.getBall());\r\n        draw(g2, g, model.getBrickArray());\r\n    }\r\n\r\n    //Draw Paddle\r\n    public static void draw(Graphics2D g2, Paddle paddle){\r\n        Rectangle paddleImage = new Rectangle(paddle.getX(),paddle.getY(), paddle.getWidth(),paddle.getHeight());\r\n        g2.setColor(paddle.getColor());\r\n        g2.fill(paddleImage);\r\n        g2.draw(paddleImage);\r\n    }\r\n\r\n    //Draw Circle\r\n    public static void draw(Graphics2D g2, Ball ball){\r\n        Double x = Double.valueOf(ball.getX());\r\n        Double y = Double.valueOf(ball.getY());\r\n        Double height = Double.valueOf(ball.getHeight());\r\n        Double width = Double.valueOf(ball.getWidth());\r\n\r\n        Ellipse2D ballImage = new Ellipse2D.Double(x, y, height, width);\r\n        g2.setColor(ball.getColor());\r\n        g2.fill(ballImage);\r\n        g2.draw(ballImage);\r\n    }\r\n\r\n    //Draw Bricks\r\n    public static void draw(Graphics2D g2, Brick[] brickArray){\r\n        for(int i = 0; i&lt;brickArray.length; i++){\r\n            Brick brick = brickArray[i];\r\n\r\n            if(!brick.isDestroyed()) {\r\n                Rectangle brickImage = new Rectangle(brick.getX(), brick.getY(), brick.getWidth(), brick.getHeight());\r\n                g2.setColor(brick.getColor());\r\n                //g2.setColor(Color.BLACK);\r\n                g2.fill(brickImage);\r\n                g2.draw(brickImage);\r\n            }\r\n            else{\r\n\r\n                g2.clearRect(brick.getX(), brick.getY(), brick.getWidth(), brick.getHeight());\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nHere is the View class that creates the MyPanel object and calls repaint\r\n\r\n```\r\npublic class View extends JFrame {\r\n    private JFrame frame;\r\n    private static Model model;\r\n    private MyPanel panel;\r\n\r\n    public View() {\r\n        model = new Model();\r\n    }\r\n\r\n    //Creates Frame object\r\n    //Creates MyPanel object\r\n    //Paints MyPanel object\r\n    public void createFrame(Model modelArg) {\r\n        model = modelArg;\r\n        frame = new JFrame();\r\n\r\n        frame.setSize(500, 550);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.setTitle(&quot;Breakout Ball&quot;);\r\n        frame.getContentPane().setBackground(Color.BLACK);\r\n        frame.setResizable(false);\r\n        panel = new MyPanel();\r\n\r\n        panel.updateModel(model);\r\n        frame.add(panel);\r\n        frame.setVisible(true);\r\n    }\r\n\r\n\r\n    public void updateView(Model modelArg) {\r\n        model = modelArg;\r\n        revalidate();\r\n        panel.updateModel(model);\r\n        panel.repaint();\r\n    }\r\n}\r\n```\r\n\r\nAnd here is the controller\r\n```\r\npublic class Controller {\r\n    private Model model;\r\n    public View view;\r\n\r\n    public Controller(Model model, View view){\r\n        this.model = model;\r\n        this.view = view;\r\n        initView();\r\n\r\n        int i = 10;\r\n        while(i&gt;0){\r\n            SwingUtilities.invokeLater(new Runnable() {\r\n                public void run() {\r\n                    doCycle();\r\n                }});\r\n                model.getBrickArray()[0].setDestroyed(true);\r\n            i--;\r\n        }\r\n    }\r\n\r\n    public void initView(){\r\n        model.createGamePieces();\r\n        //view.initGamePieces(model.getPaddle());\r\n        view.createFrame(model);\r\n\r\n    }\r\n\r\n    public void doCycle(){\r\n        view.updateView(model);\r\n    }\r\n\r\n}\r\n```\r\n\r\n[Image of debugger when the code gets stuck][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pF9Hx.png\r\n\r\nIf the above image is not showing up, it displays how in the debugger under variables it just says &quot;The application is running&quot; and there are no options to step over, step into etc.\r\n\r\nIf anyone has any suggestions please let me know!\r\n\r\nEdit:\r\nI just cleaned up the code to make it a minimal reproducible example per request. I wasn&#39;t sure how much to remove because I&#39;m not exactly sure the scope of what is causing this problem, so I leaned towards removing less code. \r\n\r\nThank you,\r\nJon","title":"PaintComponent() method gets stuck after second run","body":"<p>I am currently working on a brick breaker game and have run into an issue with the paintComponent method. The first time repaint is called (to invoke paintComponent) everything works fine, but the second time it is called the program gets stuck on the last line of paintComponent.</p>\n<p>Below is code and screenshots of the issue I am having.</p>\n<p>MyPanel Code:</p>\n<pre><code>public class MyPanel extends JPanel {\n    private static Model model;\n    public MyPanel(){\n        setBorder(BorderFactory.createLineBorder(Color.black));\n        setBackground(Color.BLACK);\n    }\n\n\n    public void updateModel(Model modelArg){\n        model = modelArg;\n    }\n\n    @Override\n    public void paintComponent(Graphics g){\n        super.paintComponent(g);\n\n        Graphics2D g2 = (Graphics2D) g;\n        draw(g2);\n    }\n\n    //Draw each game component\n    public static void draw(Graphics2D g2){\n\n        draw(g2, g, model.getPaddle());\n        draw(g2, g, model.getBall());\n        draw(g2, g, model.getBrickArray());\n    }\n\n    //Draw Paddle\n    public static void draw(Graphics2D g2, Paddle paddle){\n        Rectangle paddleImage = new Rectangle(paddle.getX(),paddle.getY(), paddle.getWidth(),paddle.getHeight());\n        g2.setColor(paddle.getColor());\n        g2.fill(paddleImage);\n        g2.draw(paddleImage);\n    }\n\n    //Draw Circle\n    public static void draw(Graphics2D g2, Ball ball){\n        Double x = Double.valueOf(ball.getX());\n        Double y = Double.valueOf(ball.getY());\n        Double height = Double.valueOf(ball.getHeight());\n        Double width = Double.valueOf(ball.getWidth());\n\n        Ellipse2D ballImage = new Ellipse2D.Double(x, y, height, width);\n        g2.setColor(ball.getColor());\n        g2.fill(ballImage);\n        g2.draw(ballImage);\n    }\n\n    //Draw Bricks\n    public static void draw(Graphics2D g2, Brick[] brickArray){\n        for(int i = 0; i&lt;brickArray.length; i++){\n            Brick brick = brickArray[i];\n\n            if(!brick.isDestroyed()) {\n                Rectangle brickImage = new Rectangle(brick.getX(), brick.getY(), brick.getWidth(), brick.getHeight());\n                g2.setColor(brick.getColor());\n                //g2.setColor(Color.BLACK);\n                g2.fill(brickImage);\n                g2.draw(brickImage);\n            }\n            else{\n\n                g2.clearRect(brick.getX(), brick.getY(), brick.getWidth(), brick.getHeight());\n            }\n        }\n\n    }\n\n}\n</code></pre>\n<p>Here is the View class that creates the MyPanel object and calls repaint</p>\n<pre><code>public class View extends JFrame {\n    private JFrame frame;\n    private static Model model;\n    private MyPanel panel;\n\n    public View() {\n        model = new Model();\n    }\n\n    //Creates Frame object\n    //Creates MyPanel object\n    //Paints MyPanel object\n    public void createFrame(Model modelArg) {\n        model = modelArg;\n        frame = new JFrame();\n\n        frame.setSize(500, 550);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setTitle(&quot;Breakout Ball&quot;);\n        frame.getContentPane().setBackground(Color.BLACK);\n        frame.setResizable(false);\n        panel = new MyPanel();\n\n        panel.updateModel(model);\n        frame.add(panel);\n        frame.setVisible(true);\n    }\n\n\n    public void updateView(Model modelArg) {\n        model = modelArg;\n        revalidate();\n        panel.updateModel(model);\n        panel.repaint();\n    }\n}\n</code></pre>\n<p>And here is the controller</p>\n<pre><code>public class Controller {\n    private Model model;\n    public View view;\n\n    public Controller(Model model, View view){\n        this.model = model;\n        this.view = view;\n        initView();\n\n        int i = 10;\n        while(i&gt;0){\n            SwingUtilities.invokeLater(new Runnable() {\n                public void run() {\n                    doCycle();\n                }});\n                model.getBrickArray()[0].setDestroyed(true);\n            i--;\n        }\n    }\n\n    public void initView(){\n        model.createGamePieces();\n        //view.initGamePieces(model.getPaddle());\n        view.createFrame(model);\n\n    }\n\n    public void doCycle(){\n        view.updateView(model);\n    }\n\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/pF9Hx.png\" rel=\"nofollow noreferrer\">Image of debugger when the code gets stuck</a></p>\n<p>If the above image is not showing up, it displays how in the debugger under variables it just says &quot;The application is running&quot; and there are no options to step over, step into etc.</p>\n<p>If anyone has any suggestions please let me know!</p>\n<p>Edit:\nI just cleaned up the code to make it a minimal reproducible example per request. I wasn't sure how much to remove because I'm not exactly sure the scope of what is causing this problem, so I leaned towards removing less code.</p>\n<p>Thank you,\nJon</p>\n"},{"tags":["java","swing","jpanel","repaint"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1559246550,"post_id":56384856,"comment_id":99369926,"body_markdown":"repainting in your constructor makes no sense, as your Obstacle has not yet been added to the GUI. Therefore, there&#39;s no graphics object, and therefore paintComponent isn&#39;t being called","body":"repainting in your constructor makes no sense, as your Obstacle has not yet been added to the GUI. Therefore, there&#39;s no graphics object, and therefore paintComponent isn&#39;t being called"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1559250285,"post_id":56384856,"comment_id":99371296,"body_markdown":"And instead of using final constants you would be best served by using an `enum`.","body":"And instead of using final constants you would be best served by using an <code>enum</code>."}],"owner":{"account_id":15045183,"reputation":3,"user_id":10858589,"display_name":"Simon Trakis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1633714740,"creation_date":1559246316,"question_id":56384856,"body_markdown":"I am repainting my Obstacle extends JPanel from another Class as well as from the Obstacle constructor. Inside the paintComponent(Graphics g) my Sys.out is never printed -&gt; Method is never called. \r\nI&#39;ve implemented all of this 100 times and cannot find any difference between this and other working codes :c\r\n\r\n```public class Obstacle extends JPanel {\r\n    \r\n    private Rectangle hitbox;\r\n    private int x,y, width, height;\r\n    public static final int BIG = 0, LARGE = 1, BIRD_LOW = 2, BIRD_MID = 3, BIRD_HIGH = 4;\r\n    \r\n    public Obstacle(int x, int y, int type) {\r\n        this.x = x;\r\n        this.y = y;\r\n        \r\n        [...]\r\n\r\n        this.repaint();\r\n    }\r\n    \r\n    public void updateMovement() {\r\n        this.x -= 10;\r\n    }\r\n    \r\n    @Override\r\n    public void paintComponent(Graphics g) {\r\n        super.paintComponent(g);\r\n        Graphics2D g2 = (Graphics2D) g;\r\n        g2.setColor(Color.BLACK);\r\n        g2.draw(hitbox);\r\n        System.out.println(&quot;Repainted&quot;);\r\n    }\r\n}\r\n```","title":"What Methode is called on repainting a class extending JPanel?","body":"<p>I am repainting my Obstacle extends JPanel from another Class as well as from the Obstacle constructor. Inside the paintComponent(Graphics g) my Sys.out is never printed -> Method is never called. \nI've implemented all of this 100 times and cannot find any difference between this and other working codes :c</p>\n\n<pre><code>\n    private Rectangle hitbox;\n    private int x,y, width, height;\n    public static final int BIG = 0, LARGE = 1, BIRD_LOW = 2, BIRD_MID = 3, BIRD_HIGH = 4;\n\n    public Obstacle(int x, int y, int type) {\n        this.x = x;\n        this.y = y;\n\n        [...]\n\n        this.repaint();\n    }\n\n    public void updateMovement() {\n        this.x -= 10;\n    }\n\n    @Override\n    public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Graphics2D g2 = (Graphics2D) g;\n        g2.setColor(Color.BLACK);\n        g2.draw(hitbox);\n        System.out.println(\"Repainted\");\n    }\n}\n</code></pre>\n"},{"tags":["java","swing","jpanel","layout-manager","gridbaglayout"],"answers":[{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1560203185,"creation_date":1560203185,"answer_id":56533933,"question_id":56532828,"body_markdown":"`GridBagLayout` has strange behaviour when there is not sufficient room to size components to at least their preferred size. It does not degrade gracefully.\r\n\r\nIt seems you are trying for an absolute layout. `GridBagLayout` and indeed other general `LayoutManger`s (other the X-Y layout managers) don&#39;t work well in these situations.\r\n\r\nSticking with `GridBagLayout` it&#39;s generally best to use it inside a `JScrollPane` or at least a `JPanel` with a minimum size taken from its preferred size.","title":"GridBagLayout: Elements shrink at a very specific panel height","body":"<p><code>GridBagLayout</code> has strange behaviour when there is not sufficient room to size components to at least their preferred size. It does not degrade gracefully.</p>\n\n<p>It seems you are trying for an absolute layout. <code>GridBagLayout</code> and indeed other general <code>LayoutManger</code>s (other the X-Y layout managers) don't work well in these situations.</p>\n\n<p>Sticking with <code>GridBagLayout</code> it's generally best to use it inside a <code>JScrollPane</code> or at least a <code>JPanel</code> with a minimum size taken from its preferred size.</p>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1560289607,"creation_date":1560289607,"answer_id":56552085,"question_id":56532828,"body_markdown":"When a GridBagLayout cannot accommodate all child components’ preferred sizes, it “gives up” and sets every single child component to its minimum size.  So, one solution is to set each component’s minimum size to its preferred size.\r\n\r\nHowever, rather than trying to mathematically account for every pixel on your screen, you have more robust options.\r\n\r\nOne solution is to only set the size of one panel, in any particular dimension, so the other one always takes up the remaining space.  This way, you can never “overflow” the available space.  BorderLayout is well suited to this, since its center component is stretched to take up all available space that the side components don’t use.\r\n\r\nSo, for your magenta and blue panels, you would set the height of the magenta panel only:\r\n\r\n\r\n    JPanel leftPanel = new JPanel(new BorderLayout());\r\n\r\n    // 1\r\n        JPanel leftUpper = new JPanel();\r\n        leftUpper.setBackground(Color.MAGENTA);\r\n        leftUpper.setPreferredSize(new Dimension(1, height/7));\r\n        leftPanel.add(leftUpper, BorderLayout.NORTH);\r\n\r\n    // 2\r\n        JPanel leftLower = new JPanel();\r\n        leftLower.setBackground(Color.BLUE);\r\n        leftPanel.add(leftLower, BorderLayout.CENTER);\r\n\r\nAnd similarly for the red and cyan ones:\r\n\r\n    JPanel rightPanel = new JPanel(new BorderLayout());\r\n\r\n    // 3\r\n        JPanel rightUpper = new JPanel();\r\n        rightUpper.setBackground(Color.RED);\r\n        rightPanel.add(rightUpper, BorderLayout.CENTER);\r\n\r\n\r\n    // 4\r\n        JPanel rightLower = new JPanel();\r\n        rightLower.setBackground(Color.CYAN);\r\n        rightLower.setPreferredSize(new Dimension(1, height/5));\r\n        rightPanel.add(rightLower, BorderLayout.SOUTH);\r\n\r\nAnd then you do something similar to those two panels themselves, to put them together:\r\n\r\n        JPanel masterPanel = new JPanel(new BorderLayout());\r\n        masterPanel.setBackground(Color.GREEN);\r\n\r\n        leftPanel.setPreferredSize(new Dimension(width / 3,\r\n            leftPanel.getPreferredSize().height));\r\n\r\n        masterPanel.add(leftPanel, BorderLayout.WEST);\r\n        masterPanel.add(rightPanel, BorderLayout.CENTER);\r\n\r\nAnd since reporting of the borders given to windows by the system’s window manager is unreliable, you avoid doing any explicit math and just maximize the window:\r\n\r\n        frame.add(masterPanel);\r\n        frame.pack();\r\n        frame.setExtendedState(Frame.MAXIMIZED_BOTH);\r\n        frame.setVisible(true);\r\n\r\nIf you absolutely need to maintain the ratio among the panels (for instance, magenta_height : blue_height :: 1 : 6), you can do that with a [SpringLayout](https://docs.oracle.com/en/java/javase/12/docs/api/java.desktop/javax/swing/SpringLayout.html), but SpringLayout is more complicated and usually isn’t worth the trouble.  It allows you to specify size ranges which can be multiples of other size ranges:\r\n\r\n        SpringLayout layout = new SpringLayout();\r\n\r\n        JPanel masterPanel = new JPanel(layout);\r\n        masterPanel.setBackground(Color.GREEN);\r\n\r\n    // 1\r\n        JPanel leftUpper = new JPanel();\r\n        leftUpper.setBackground(Color.MAGENTA);\r\n        masterPanel.add(leftUpper);\r\n\r\n    // 2\r\n        JPanel leftLower = new JPanel();\r\n        leftLower.setBackground(Color.BLUE);\r\n        masterPanel.add(leftLower);\r\n\r\n    // 3\r\n        JPanel rightUpper = new JPanel();\r\n        rightUpper.setBackground(Color.RED);\r\n        masterPanel.add(rightUpper);\r\n\r\n    // 4\r\n        JPanel rightLower = new JPanel();\r\n        rightLower.setBackground(Color.CYAN);\r\n        masterPanel.add(rightLower);\r\n\r\n        Spring leftUpperHeight = Spring.height(leftUpper);\r\n        Spring leftLowerHeight = Spring.scale(leftUpperHeight, 6);\r\n\r\n        Spring rightLowerHeight = Spring.scale(leftUpperHeight, 7 / 5f);\r\n\r\n        Spring leftWidth = Spring.width(leftUpper);\r\n        Spring rightWidth = Spring.scale(leftWidth, 3);\r\n\r\n        layout.getConstraints(leftLower).setHeight(leftLowerHeight);\r\n        layout.getConstraints(rightLower).setHeight(rightLowerHeight);\r\n\r\n        layout.getConstraints(rightUpper).setWidth(rightWidth);\r\n        layout.getConstraints(rightLower).setWidth(rightWidth);\r\n\r\n        // Place leftLower beneath leftUpper.\r\n        layout.putConstraint(\r\n            SpringLayout.NORTH, leftLower, 0,\r\n            SpringLayout.SOUTH, leftUpper);\r\n\r\n        // Make leftLower&#39;s width match leftUpper&#39;s width.\r\n        layout.putConstraint(\r\n            SpringLayout.WEST, leftLower, 0,\r\n            SpringLayout.WEST, leftUpper);\r\n        layout.putConstraint(\r\n            SpringLayout.EAST, leftLower, 0,\r\n            SpringLayout.EAST, leftUpper);\r\n\r\n        // Make container high enough to hold both leftLower and leftUpper.\r\n        layout.putConstraint(\r\n            SpringLayout.SOUTH, masterPanel, 0,\r\n            SpringLayout.SOUTH, leftLower);\r\n\r\n        // Place rightUpper and rightLower to the right of leftUpper.\r\n        layout.putConstraint(\r\n            SpringLayout.WEST, rightLower, 0,\r\n            SpringLayout.EAST, leftUpper);\r\n        layout.putConstraint(\r\n            SpringLayout.WEST, rightUpper, 0,\r\n            SpringLayout.WEST, rightLower);\r\n\r\n        // Make container wide enough to accommodate rightUpper and rightLower.\r\n        layout.putConstraint(\r\n            SpringLayout.EAST, masterPanel, 0,\r\n            SpringLayout.EAST, rightLower);\r\n\r\n        // Align bottom of rightLower with bottom of leftLower.\r\n        layout.putConstraint(\r\n            SpringLayout.SOUTH, rightLower, 0,\r\n            SpringLayout.SOUTH, leftLower);\r\n\r\n        // Place rightUpper above rightLower.\r\n        layout.putConstraint(\r\n            SpringLayout.SOUTH, rightUpper, 0,\r\n            SpringLayout.NORTH, rightLower);\r\n\r\n        // Stretch rightUpper to reach to the top of the container.\r\n        layout.putConstraint(\r\n            SpringLayout.NORTH, rightUpper, 0,\r\n            SpringLayout.NORTH, masterPanel);\r\n","title":"GridBagLayout: Elements shrink at a very specific panel height","body":"<p>When a GridBagLayout cannot accommodate all child components’ preferred sizes, it “gives up” and sets every single child component to its minimum size.  So, one solution is to set each component’s minimum size to its preferred size.</p>\n\n<p>However, rather than trying to mathematically account for every pixel on your screen, you have more robust options.</p>\n\n<p>One solution is to only set the size of one panel, in any particular dimension, so the other one always takes up the remaining space.  This way, you can never “overflow” the available space.  BorderLayout is well suited to this, since its center component is stretched to take up all available space that the side components don’t use.</p>\n\n<p>So, for your magenta and blue panels, you would set the height of the magenta panel only:</p>\n\n<pre><code>JPanel leftPanel = new JPanel(new BorderLayout());\n\n// 1\n    JPanel leftUpper = new JPanel();\n    leftUpper.setBackground(Color.MAGENTA);\n    leftUpper.setPreferredSize(new Dimension(1, height/7));\n    leftPanel.add(leftUpper, BorderLayout.NORTH);\n\n// 2\n    JPanel leftLower = new JPanel();\n    leftLower.setBackground(Color.BLUE);\n    leftPanel.add(leftLower, BorderLayout.CENTER);\n</code></pre>\n\n<p>And similarly for the red and cyan ones:</p>\n\n<pre><code>JPanel rightPanel = new JPanel(new BorderLayout());\n\n// 3\n    JPanel rightUpper = new JPanel();\n    rightUpper.setBackground(Color.RED);\n    rightPanel.add(rightUpper, BorderLayout.CENTER);\n\n\n// 4\n    JPanel rightLower = new JPanel();\n    rightLower.setBackground(Color.CYAN);\n    rightLower.setPreferredSize(new Dimension(1, height/5));\n    rightPanel.add(rightLower, BorderLayout.SOUTH);\n</code></pre>\n\n<p>And then you do something similar to those two panels themselves, to put them together:</p>\n\n<pre><code>    JPanel masterPanel = new JPanel(new BorderLayout());\n    masterPanel.setBackground(Color.GREEN);\n\n    leftPanel.setPreferredSize(new Dimension(width / 3,\n        leftPanel.getPreferredSize().height));\n\n    masterPanel.add(leftPanel, BorderLayout.WEST);\n    masterPanel.add(rightPanel, BorderLayout.CENTER);\n</code></pre>\n\n<p>And since reporting of the borders given to windows by the system’s window manager is unreliable, you avoid doing any explicit math and just maximize the window:</p>\n\n<pre><code>    frame.add(masterPanel);\n    frame.pack();\n    frame.setExtendedState(Frame.MAXIMIZED_BOTH);\n    frame.setVisible(true);\n</code></pre>\n\n<p>If you absolutely need to maintain the ratio among the panels (for instance, magenta_height : blue_height :: 1 : 6), you can do that with a <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.desktop/javax/swing/SpringLayout.html\" rel=\"nofollow noreferrer\">SpringLayout</a>, but SpringLayout is more complicated and usually isn’t worth the trouble.  It allows you to specify size ranges which can be multiples of other size ranges:</p>\n\n<pre><code>    SpringLayout layout = new SpringLayout();\n\n    JPanel masterPanel = new JPanel(layout);\n    masterPanel.setBackground(Color.GREEN);\n\n// 1\n    JPanel leftUpper = new JPanel();\n    leftUpper.setBackground(Color.MAGENTA);\n    masterPanel.add(leftUpper);\n\n// 2\n    JPanel leftLower = new JPanel();\n    leftLower.setBackground(Color.BLUE);\n    masterPanel.add(leftLower);\n\n// 3\n    JPanel rightUpper = new JPanel();\n    rightUpper.setBackground(Color.RED);\n    masterPanel.add(rightUpper);\n\n// 4\n    JPanel rightLower = new JPanel();\n    rightLower.setBackground(Color.CYAN);\n    masterPanel.add(rightLower);\n\n    Spring leftUpperHeight = Spring.height(leftUpper);\n    Spring leftLowerHeight = Spring.scale(leftUpperHeight, 6);\n\n    Spring rightLowerHeight = Spring.scale(leftUpperHeight, 7 / 5f);\n\n    Spring leftWidth = Spring.width(leftUpper);\n    Spring rightWidth = Spring.scale(leftWidth, 3);\n\n    layout.getConstraints(leftLower).setHeight(leftLowerHeight);\n    layout.getConstraints(rightLower).setHeight(rightLowerHeight);\n\n    layout.getConstraints(rightUpper).setWidth(rightWidth);\n    layout.getConstraints(rightLower).setWidth(rightWidth);\n\n    // Place leftLower beneath leftUpper.\n    layout.putConstraint(\n        SpringLayout.NORTH, leftLower, 0,\n        SpringLayout.SOUTH, leftUpper);\n\n    // Make leftLower's width match leftUpper's width.\n    layout.putConstraint(\n        SpringLayout.WEST, leftLower, 0,\n        SpringLayout.WEST, leftUpper);\n    layout.putConstraint(\n        SpringLayout.EAST, leftLower, 0,\n        SpringLayout.EAST, leftUpper);\n\n    // Make container high enough to hold both leftLower and leftUpper.\n    layout.putConstraint(\n        SpringLayout.SOUTH, masterPanel, 0,\n        SpringLayout.SOUTH, leftLower);\n\n    // Place rightUpper and rightLower to the right of leftUpper.\n    layout.putConstraint(\n        SpringLayout.WEST, rightLower, 0,\n        SpringLayout.EAST, leftUpper);\n    layout.putConstraint(\n        SpringLayout.WEST, rightUpper, 0,\n        SpringLayout.WEST, rightLower);\n\n    // Make container wide enough to accommodate rightUpper and rightLower.\n    layout.putConstraint(\n        SpringLayout.EAST, masterPanel, 0,\n        SpringLayout.EAST, rightLower);\n\n    // Align bottom of rightLower with bottom of leftLower.\n    layout.putConstraint(\n        SpringLayout.SOUTH, rightLower, 0,\n        SpringLayout.SOUTH, leftLower);\n\n    // Place rightUpper above rightLower.\n    layout.putConstraint(\n        SpringLayout.SOUTH, rightUpper, 0,\n        SpringLayout.NORTH, rightLower);\n\n    // Stretch rightUpper to reach to the top of the container.\n    layout.putConstraint(\n        SpringLayout.NORTH, rightUpper, 0,\n        SpringLayout.NORTH, masterPanel);\n</code></pre>\n"}],"owner":{"account_id":12479946,"reputation":23,"user_id":9085064,"display_name":"Q - Tek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":719,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":56552085,"answer_count":2,"score":1,"last_activity_date":1633714674,"creation_date":1560196860,"question_id":56532828,"body_markdown":"I&#39;m using GridBagLayout to create a panel consisting of 4 sub-panels. The 4 sub-panels are colored magenta, blue, red, and cyan, while the master panel is green. The goal is to arrange these 4 sub-panels in a certain fashion and theoretically, no green should show. Fortunately, I have a working example of exactly what I want to achieve:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.GridBagConstraints;\r\n    import java.awt.GridBagLayout;\r\n    import java.awt.Toolkit;\r\n      \r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    \r\n    public class Main {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\r\n    \t\tDimension d = Toolkit.getDefaultToolkit().getScreenSize();\r\n    \t\tint width = d.width;\r\n    \t\tint height = 1046;\r\n    \t\t\r\n    \t\t\r\n    \t\tJFrame frame = new JFrame(&quot;4.5 test&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\t\r\n    \t\tJPanel masterPanel = new JPanel(new GridBagLayout());\r\n    \t\tmasterPanel.setBackground(Color.GREEN);\r\n    \t\t\r\n    \t\tGridBagConstraints c = new GridBagConstraints();\r\n    \t\tc.weightx = 1.0;\r\n    \t\tc.weighty = 1.0;\r\n    \t\t\r\n    \t// 1\r\n    \t\tJPanel leftUpper = new JPanel();\r\n    \t\tleftUpper.setBackground(Color.MAGENTA);\r\n    \t\tleftUpper.setPreferredSize(new Dimension(width/3, height/7));\r\n    \t\tc.gridx = 0;\r\n    \t\tc.gridy = 0;\r\n    \t\tc.anchor = GridBagConstraints.NORTH;\r\n    \t\tmasterPanel.add(leftUpper, c);\r\n    \t\t\r\n    \t\t\r\n    \t// 2\r\n    \t\tJPanel leftLower = new JPanel();\r\n    \t\tleftLower.setBackground(Color.BLUE);\r\n    \t\tleftLower.setPreferredSize(new Dimension(width/3, height - height/7));\r\n    \t\tc.gridheight = 2;\r\n    \t\tc.anchor = GridBagConstraints.SOUTH;\r\n    \t\tmasterPanel.add(leftLower, c);\r\n    \t\t\r\n    \t// 3\r\n    \t\tJPanel rightUpper = new JPanel();\r\n    \t\trightUpper.setBackground(Color.RED);\r\n    \t\trightUpper.setPreferredSize(new Dimension(width - width/3, height - height/5));\r\n    \t\tc.gridx = 1;\r\n    \t\tc.gridheight = 1;\r\n    \t\tmasterPanel.add(rightUpper, c);\r\n    \t\t\r\n    \t\t\r\n    \t// 4\r\n    \t\tJPanel rightLower = new JPanel();\r\n    \t\trightLower.setBackground(Color.CYAN);\r\n    \t\trightLower.setPreferredSize(new Dimension(width - width/3, height/5));\r\n    \t\tc.gridy = 1;\r\n    \t\tmasterPanel.add(rightLower, c);\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\tframe.add(masterPanel);\r\n    \t\tframe.pack();\r\n    \t    frame.setVisible(true);\r\n    \t}\r\n    \r\n    }\r\n\r\nWhen run, this gives \r\n[this correct result.][1] In fact, every height under 1046 works as intended.\r\n\r\n\r\nHowever, the *moment* one changes Line 16 to this:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    int height = 1047;\r\n\r\nAll goes to hell and we get [this instead.][2] This holds true for every height above 1047 as well. The panels are in the right positions, but are far from the right sizes. Note that unlike height, changing the width has no (unintended) effect.\r\n\r\nI wouldn&#39;t be so surprised by this behavior if it wasn&#39;t caused by such a small (arbitrary?) limit in size. For context, I am using the 1.8 Java RunTime environment. My computer screen resolution is 1920x1080. Why is this happening, how can one remedy this, and if this is an atrocious practice, what detailed alternative can you provide?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/O0hqz.png\r\n  [2]: https://i.stack.imgur.com/ft2SW.png","title":"GridBagLayout: Elements shrink at a very specific panel height","body":"<p>I'm using GridBagLayout to create a panel consisting of 4 sub-panels. The 4 sub-panels are colored magenta, blue, red, and cyan, while the master panel is green. The goal is to arrange these 4 sub-panels in a certain fashion and theoretically, no green should show. Fortunately, I have a working example of exactly what I want to achieve:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.Toolkit;\n\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\n\npublic class Main {\n\n    public static void main(String[] args) {\n\n        Dimension d = Toolkit.getDefaultToolkit().getScreenSize();\n        int width = d.width;\n        int height = 1046;\n\n\n        JFrame frame = new JFrame(\"4.5 test\");\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        JPanel masterPanel = new JPanel(new GridBagLayout());\n        masterPanel.setBackground(Color.GREEN);\n\n        GridBagConstraints c = new GridBagConstraints();\n        c.weightx = 1.0;\n        c.weighty = 1.0;\n\n    // 1\n        JPanel leftUpper = new JPanel();\n        leftUpper.setBackground(Color.MAGENTA);\n        leftUpper.setPreferredSize(new Dimension(width/3, height/7));\n        c.gridx = 0;\n        c.gridy = 0;\n        c.anchor = GridBagConstraints.NORTH;\n        masterPanel.add(leftUpper, c);\n\n\n    // 2\n        JPanel leftLower = new JPanel();\n        leftLower.setBackground(Color.BLUE);\n        leftLower.setPreferredSize(new Dimension(width/3, height - height/7));\n        c.gridheight = 2;\n        c.anchor = GridBagConstraints.SOUTH;\n        masterPanel.add(leftLower, c);\n\n    // 3\n        JPanel rightUpper = new JPanel();\n        rightUpper.setBackground(Color.RED);\n        rightUpper.setPreferredSize(new Dimension(width - width/3, height - height/5));\n        c.gridx = 1;\n        c.gridheight = 1;\n        masterPanel.add(rightUpper, c);\n\n\n    // 4\n        JPanel rightLower = new JPanel();\n        rightLower.setBackground(Color.CYAN);\n        rightLower.setPreferredSize(new Dimension(width - width/3, height/5));\n        c.gridy = 1;\n        masterPanel.add(rightLower, c);\n\n\n\n        frame.add(masterPanel);\n        frame.pack();\n        frame.setVisible(true);\n    }\n\n}\n</code></pre>\n\n<p>When run, this gives \n<a href=\"https://i.stack.imgur.com/O0hqz.png\" rel=\"nofollow noreferrer\">this correct result.</a> In fact, every height under 1046 works as intended.</p>\n\n<p>However, the <em>moment</em> one changes Line 16 to this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>int height = 1047;\n</code></pre>\n\n<p>All goes to hell and we get <a href=\"https://i.stack.imgur.com/ft2SW.png\" rel=\"nofollow noreferrer\">this instead.</a> This holds true for every height above 1047 as well. The panels are in the right positions, but are far from the right sizes. Note that unlike height, changing the width has no (unintended) effect.</p>\n\n<p>I wouldn't be so surprised by this behavior if it wasn't caused by such a small (arbitrary?) limit in size. For context, I am using the 1.8 Java RunTime environment. My computer screen resolution is 1920x1080. Why is this happening, how can one remedy this, and if this is an atrocious practice, what detailed alternative can you provide?</p>\n"},{"tags":["java","swing","jpanel","bufferedimage","paintcomponent"],"comments":[{"owner":{"account_id":7642693,"reputation":1180,"user_id":5794313,"display_name":"Sync it"},"score":0,"creation_date":1615121391,"post_id":66516444,"comment_id":117588216,"body_markdown":"You can&#39;t for the most part especially since the image is of a fixed size and when drawn inside your component whose size can vary based on its parent layout the image gets scaled which further degrades quality. One dumb idea you could try is draw each individual pixel of your image as an 1 x 1 rectangle with the specified pixel color inside your paint component. While terrible for performance if your image is static it might be worth it?","body":"You can&#39;t for the most part especially since the image is of a fixed size and when drawn inside your component whose size can vary based on its parent layout the image gets scaled which further degrades quality. One dumb idea you could try is draw each individual pixel of your image as an 1 x 1 rectangle with the specified pixel color inside your paint component. While terrible for performance if your image is static it might be worth it?"},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1615132286,"post_id":66516444,"comment_id":117591199,"body_markdown":"The preferred approach is to use the JPanel paintComponent method to draw on your GUI.  If you need a BufferedImage, you can create one using the JPanel printAll method.","body":"The preferred approach is to use the JPanel paintComponent method to draw on your GUI.  If you need a BufferedImage, you can create one using the JPanel printAll method."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1615137639,"post_id":66516444,"comment_id":117592732,"body_markdown":"*How can I achieve the same rendering quality on both approaches?* - Use the same rendering hints. For example, the paintComponent() method does not use anti aliasing by default. So the Graphics drawn to a BufferedImage will look different than the Graphics drawn in the paintComponent. Post a proper [mre] demonstrating the problem. Start by just drawing a single oval and get it working the same using both approaches. Then make the painting more complex. It is easier to debug this way. Also, don&#39;t change a property (background) of a component in that painting method.","body":"<i>How can I achieve the same rendering quality on both approaches?</i> - Use the same rendering hints. For example, the paintComponent() method does not use anti aliasing by default. So the Graphics drawn to a BufferedImage will look different than the Graphics drawn in the paintComponent. Post a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the problem. Start by just drawing a single oval and get it working the same using both approaches. Then make the painting more complex. It is easier to debug this way. Also, don&#39;t change a property (background) of a component in that painting method."},{"owner":{"account_id":16643882,"reputation":41,"user_id":12028642,"display_name":"Zeynel"},"score":0,"creation_date":1615148788,"post_id":66516444,"comment_id":117596072,"body_markdown":"&quot;Use the same rendering hints&quot; my problem is that I don&#39;t know what is the rendering hint is used in JPanel. Also, As I mentioned I have tried in many rendering hints, still couldn&#39;t achieve the same results.","body":"&quot;Use the same rendering hints&quot; my problem is that I don&#39;t know what is the rendering hint is used in JPanel. Also, As I mentioned I have tried in many rendering hints, still couldn&#39;t achieve the same results."},{"owner":{"account_id":16643882,"reputation":41,"user_id":12028642,"display_name":"Zeynel"},"score":0,"creation_date":1615149032,"post_id":66516444,"comment_id":117596139,"body_markdown":"PrintAll seems like a solution to my problem, I will update my message if I could manage what I am trying to do. I use buffered image to be able to drag the image around without rendering the complex drawing every time, which can take some time.","body":"PrintAll seems like a solution to my problem, I will update my message if I could manage what I am trying to do. I use buffered image to be able to drag the image around without rendering the complex drawing every time, which can take some time."},{"owner":{"account_id":16643882,"reputation":41,"user_id":12028642,"display_name":"Zeynel"},"score":0,"creation_date":1615162143,"post_id":66516444,"comment_id":117599106,"body_markdown":"Thank you all for your help, I have found my solution as I explained above.","body":"Thank you all for your help, I have found my solution as I explained above."}],"answers":[{"tags":[],"owner":{"account_id":16643882,"reputation":41,"user_id":12028642,"display_name":"Zeynel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1615178373,"creation_date":1615178373,"answer_id":66524386,"question_id":66516444,"body_markdown":"I found my solution by getting almost every setting of panel graphics and applying them to buffered image graphics. Here, the importing thing is that the panel&#39;s graphic scales everything by 1.25 and then scales down to the original before showing it on the panel.\r\n\r\nHere is an example, -this is not exactly how my code is, this is just an example to give you an idea-\r\n```\r\nprivate void createImages(Paint paint, RenderingHints hints,\r\n                         AffineTransform transform, Stroke stroke,\r\n                        Composite composite, GraphicsConfiguration config ){\r\n\r\n        image = config.createCompatibleImage(IMG_SIZE, IMG_SIZE, \r\n                BufferedImage.TYPE_INT_ARGB);\r\n        Graphics2D gr = image.createGraphics();\r\n        // same options\r\n        gr.setPaint(paint);\r\n        gr.setRenderingHints(hints);\r\n        gr.setTransform(transform);\r\n        gr.setStroke(stroke);\r\n        gr.setComposite(composite);\r\n\r\n        //something along the way\r\n        gr.drawOval(.....);\r\n        gr.drawLine(.....);\r\n        gr.drawOval(.....);\r\n\r\n        panel.repaint();\r\n        gr.dispose();\r\n}\r\n\r\n\r\n\r\npublic void paintComponent(Graphics g) {\r\n    super.paintComponent(g);\r\n    setBackground(backgroundColor);\r\n    if (USE_BUFFERED_IMAGE) {\r\n       \r\n        Graphics2D g2 = (Graphics2D)g;\r\n        createImages(g2.getPaint(), g2.getRenderingHints(),g2.getTransform(),\r\n                     g2.getStroke(),g2.getComposite(), g2.getDeviceConfiguration());\r\n         //scaling down is important because your drawings get scaled to 1.25\r\n         // by panels graphics&#39; transformation\r\n         g.drawImage(image, startX, startY,(int)(IMG_SIZE*0.8),(int)(IMG_SIZE*0.8),  null);\r\n    } else {\r\n        //something along the way\r\n        g.drawOval(.....);\r\n        g.drawLine(.....);\r\n        g.drawOval(.....);\r\n    }\r\n}\r\n```","title":"Difference between drawing on JPanel via paintComponent and Buffered Image","body":"<p>I found my solution by getting almost every setting of panel graphics and applying them to buffered image graphics. Here, the importing thing is that the panel's graphic scales everything by 1.25 and then scales down to the original before showing it on the panel.</p>\n<p>Here is an example, -this is not exactly how my code is, this is just an example to give you an idea-</p>\n<pre><code>private void createImages(Paint paint, RenderingHints hints,\n                         AffineTransform transform, Stroke stroke,\n                        Composite composite, GraphicsConfiguration config ){\n\n        image = config.createCompatibleImage(IMG_SIZE, IMG_SIZE, \n                BufferedImage.TYPE_INT_ARGB);\n        Graphics2D gr = image.createGraphics();\n        // same options\n        gr.setPaint(paint);\n        gr.setRenderingHints(hints);\n        gr.setTransform(transform);\n        gr.setStroke(stroke);\n        gr.setComposite(composite);\n\n        //something along the way\n        gr.drawOval(.....);\n        gr.drawLine(.....);\n        gr.drawOval(.....);\n\n        panel.repaint();\n        gr.dispose();\n}\n\n\n\npublic void paintComponent(Graphics g) {\n    super.paintComponent(g);\n    setBackground(backgroundColor);\n    if (USE_BUFFERED_IMAGE) {\n       \n        Graphics2D g2 = (Graphics2D)g;\n        createImages(g2.getPaint(), g2.getRenderingHints(),g2.getTransform(),\n                     g2.getStroke(),g2.getComposite(), g2.getDeviceConfiguration());\n         //scaling down is important because your drawings get scaled to 1.25\n         // by panels graphics' transformation\n         g.drawImage(image, startX, startY,(int)(IMG_SIZE*0.8),(int)(IMG_SIZE*0.8),  null);\n    } else {\n        //something along the way\n        g.drawOval(.....);\n        g.drawLine(.....);\n        g.drawOval(.....);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16643882,"reputation":41,"user_id":12028642,"display_name":"Zeynel"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":66524386,"answer_count":1,"score":0,"last_activity_date":1633714649,"creation_date":1615119505,"question_id":66516444,"body_markdown":"I have experimented with two different methods of drawing the same shape, the first image is drawn by overriding JPanel&#39;s paintComponent(Graphics g) method and using g.drawOval(..) etc,\r\nThe second image is drawn by creating a buffered image and drawing on it by using buffered image&#39;s graphics. How can I achieve the same rendering quality on both approaches? I have tried using many different rendering hints but none of them gave the same quality. I also tried sharpening by using Kernel and filtering, still couldn&#39;t. \r\n\r\n```\r\nprivate void createImage() {\r\n        image = new BufferedImage(IMG_SIZE, IMG_SIZE, BufferedImage.TYPE_INT_ARGB);\r\n        Graphics2D gr = image.createGraphics();\r\n\r\n        gr.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n        gr.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\r\n        gr.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);\r\n        //something along the way\r\n        gr.drawOval(.....);\r\n        gr.drawLine(.....);\r\n        gr.drawOval(.....);\r\n\r\n        panel.repaint();\r\n        gr.dispose();\r\n}\r\n\r\n\r\n\r\npublic void paintComponent(Graphics g) {\r\n    super.paintComponent(g);\r\n    setBackground(backgroundColor);\r\n    if (USE_BUFFERED_IMAGE) {\r\n        g.drawImage(image, startX, startY, null);\r\n    } else {\r\n        //something along the way\r\n        g.drawOval(.....);\r\n        g.drawLine(.....);\r\n        g.drawOval(.....);\r\n    }\r\n}\r\n```\r\n\r\n[Drawing using JPanel paintComponent graphics][1]\r\n\r\n[Drawing using Buffered Image graphics then it is drawn on Jpanel via drawimage ][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Rd6Tz.png\r\n  [2]: https://i.stack.imgur.com/3ZHlQ.png\r\n\r\n\r\n**EDIT**\r\n\r\nI found my solution by getting almost every setting of panel graphics and applying them to buffered image graphics. Not by using only using the same rendering hints or &quot;minimal reproducible examples&quot; approaches. Here, the importing thing is that the panel&#39;s graphic scales everything by 1.25 and then scales down to the original before showing it on the panel. \r\n\r\nHere is an example, -this is not exactly how my code is, this is just an example to give you an idea-\r\n\r\n```\r\nprivate void createImages(Paint paint, RenderingHints hints,\r\n                         AffineTransform transform, Stroke stroke,\r\n                        Composite composite, GraphicsConfiguration config ){\r\n\r\n        image = config.createCompatibleImage(IMG_SIZE, IMG_SIZE, \r\n                BufferedImage.TYPE_INT_ARGB);\r\n        Graphics2D gr = image.createGraphics();\r\n        // same options\r\n        gr.setPaint(paint);\r\n        gr.setRenderingHints(hints);\r\n        gr.setTransform(transform);\r\n        gr.setStroke(stroke);\r\n        gr.setComposite(composite);\r\n\r\n        //something along the way\r\n        gr.drawOval(.....);\r\n        gr.drawLine(.....);\r\n        gr.drawOval(.....);\r\n\r\n        panel.repaint();\r\n        gr.dispose();\r\n}\r\n\r\n\r\n\r\npublic void paintComponent(Graphics g) {\r\n    super.paintComponent(g);\r\n    setBackground(backgroundColor);\r\n    if (USE_BUFFERED_IMAGE) {\r\n       \r\n        Graphics2D g2 = (Graphics2D)g;\r\n        createImages(g2.getPaint(), g2.getRenderingHints(),g2.getTransform(),\r\n                     g2.getStroke(),g2.getComposite(), g2.getDeviceConfiguration());\r\n         //scaling down is important because your drawings get scaled to 1.25\r\n         // by panels graphics&#39; transformation\r\n         g.drawImage(image, startX, startY,(int)(IMG_SIZE*0.8),(int)(IMG_SIZE*0.8),  null);\r\n    } else {\r\n        //something along the way\r\n        g.drawOval(.....);\r\n        g.drawLine(.....);\r\n        g.drawOval(.....);\r\n    }\r\n}\r\n```","title":"Difference between drawing on JPanel via paintComponent and Buffered Image","body":"<p>I have experimented with two different methods of drawing the same shape, the first image is drawn by overriding JPanel's paintComponent(Graphics g) method and using g.drawOval(..) etc,\nThe second image is drawn by creating a buffered image and drawing on it by using buffered image's graphics. How can I achieve the same rendering quality on both approaches? I have tried using many different rendering hints but none of them gave the same quality. I also tried sharpening by using Kernel and filtering, still couldn't.</p>\n<pre><code>private void createImage() {\n        image = new BufferedImage(IMG_SIZE, IMG_SIZE, BufferedImage.TYPE_INT_ARGB);\n        Graphics2D gr = image.createGraphics();\n\n        gr.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        gr.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n        gr.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);\n        //something along the way\n        gr.drawOval(.....);\n        gr.drawLine(.....);\n        gr.drawOval(.....);\n\n        panel.repaint();\n        gr.dispose();\n}\n\n\n\npublic void paintComponent(Graphics g) {\n    super.paintComponent(g);\n    setBackground(backgroundColor);\n    if (USE_BUFFERED_IMAGE) {\n        g.drawImage(image, startX, startY, null);\n    } else {\n        //something along the way\n        g.drawOval(.....);\n        g.drawLine(.....);\n        g.drawOval(.....);\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Rd6Tz.png\" rel=\"nofollow noreferrer\">Drawing using JPanel paintComponent graphics</a></p>\n<p><a href=\"https://i.stack.imgur.com/3ZHlQ.png\" rel=\"nofollow noreferrer\">Drawing using Buffered Image graphics then it is drawn on Jpanel via drawimage </a></p>\n<p><strong>EDIT</strong></p>\n<p>I found my solution by getting almost every setting of panel graphics and applying them to buffered image graphics. Not by using only using the same rendering hints or &quot;minimal reproducible examples&quot; approaches. Here, the importing thing is that the panel's graphic scales everything by 1.25 and then scales down to the original before showing it on the panel.</p>\n<p>Here is an example, -this is not exactly how my code is, this is just an example to give you an idea-</p>\n<pre><code>private void createImages(Paint paint, RenderingHints hints,\n                         AffineTransform transform, Stroke stroke,\n                        Composite composite, GraphicsConfiguration config ){\n\n        image = config.createCompatibleImage(IMG_SIZE, IMG_SIZE, \n                BufferedImage.TYPE_INT_ARGB);\n        Graphics2D gr = image.createGraphics();\n        // same options\n        gr.setPaint(paint);\n        gr.setRenderingHints(hints);\n        gr.setTransform(transform);\n        gr.setStroke(stroke);\n        gr.setComposite(composite);\n\n        //something along the way\n        gr.drawOval(.....);\n        gr.drawLine(.....);\n        gr.drawOval(.....);\n\n        panel.repaint();\n        gr.dispose();\n}\n\n\n\npublic void paintComponent(Graphics g) {\n    super.paintComponent(g);\n    setBackground(backgroundColor);\n    if (USE_BUFFERED_IMAGE) {\n       \n        Graphics2D g2 = (Graphics2D)g;\n        createImages(g2.getPaint(), g2.getRenderingHints(),g2.getTransform(),\n                     g2.getStroke(),g2.getComposite(), g2.getDeviceConfiguration());\n         //scaling down is important because your drawings get scaled to 1.25\n         // by panels graphics' transformation\n         g.drawImage(image, startX, startY,(int)(IMG_SIZE*0.8),(int)(IMG_SIZE*0.8),  null);\n    } else {\n        //something along the way\n        g.drawOval(.....);\n        g.drawLine(.....);\n        g.drawOval(.....);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","state-machine","spring-statemachine"],"comments":[{"owner":{"account_id":2225355,"reputation":13693,"user_id":1964272,"accept_rate":92,"display_name":"Dropout"},"score":0,"creation_date":1631282330,"post_id":69132910,"comment_id":122187479,"body_markdown":"What problems are you running into specifically? I&#39;m not familiar with the Spring State Machine, but you can add a `private boolean isEnabled` flag to any service you&#39;re using and have it changed based on what you receive in the REST call. Or you can @Lazy initialize it on demand.. I mean there are several approaches to this, but I don&#39;t think I understand your constraints correctly.","body":"What problems are you running into specifically? I&#39;m not familiar with the Spring State Machine, but you can add a <code>private boolean isEnabled</code> flag to any service you&#39;re using and have it changed based on what you receive in the REST call. Or you can @Lazy initialize it on demand.. I mean there are several approaches to this, but I don&#39;t think I understand your constraints correctly."},{"owner":{"account_id":14750639,"reputation":323,"user_id":10663172,"display_name":"SP."},"score":0,"creation_date":1631282911,"post_id":69132910,"comment_id":122187776,"body_markdown":"I&#39;m getting NullPointerException when trying to start the Spring State Machine.","body":"I&#39;m getting NullPointerException when trying to start the Spring State Machine."},{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":1,"creation_date":1631290933,"post_id":69132910,"comment_id":122190938,"body_markdown":"In that case you should add the details of the exception to the question.","body":"In that case you should add the details of the exception to the question."},{"owner":{"account_id":14750639,"reputation":323,"user_id":10663172,"display_name":"SP."},"score":0,"creation_date":1631520131,"post_id":69132910,"comment_id":122234283,"body_markdown":"Sorry. I&#39;ve updated the question with the exception.","body":"Sorry. I&#39;ve updated the question with the exception."},{"owner":{"account_id":3481319,"reputation":876,"user_id":2913290,"accept_rate":50,"display_name":"Daniel Vilas-Boas"},"score":0,"creation_date":1631899997,"post_id":69132910,"comment_id":122357552,"body_markdown":"1) which line corresponds to ln 65 from the stack trace showing a Nullpointer? 2) what are the dependencies you have in your project @SP. ?","body":"1) which line corresponds to ln 65 from the stack trace showing a Nullpointer? 2) what are the dependencies you have in your project @SP. ?"},{"owner":{"account_id":14750639,"reputation":323,"user_id":10663172,"display_name":"SP."},"score":0,"creation_date":1632131160,"post_id":69132910,"comment_id":122401273,"body_markdown":"@DanielVilas-Boas I&#39;m getting NullPointerException considering Spring Statemachine at Service class for line 65 which is `stateMachineOne = this.stateMachineFactory.getStateMachine(&quot;machineone&quot;);`. I&#39;ve updated the question with pom.xml file containing dependencies.","body":"@DanielVilas-Boas I&#39;m getting NullPointerException considering Spring Statemachine at Service class for line 65 which is <code>stateMachineOne = this.stateMachineFactory.getStateMachine(&quot;machineone&quot;);</code>. I&#39;ve updated the question with pom.xml file containing dependencies."},{"owner":{"account_id":3481319,"reputation":876,"user_id":2913290,"accept_rate":50,"display_name":"Daniel Vilas-Boas"},"score":0,"creation_date":1632160108,"post_id":69132910,"comment_id":122413287,"body_markdown":"you mind trying to attach these two to your app?\n\n&quot;org.springframework.statemachine:spring-statemachine-autoconfigure&quot;\n &quot;org.springframework.statemachine:spring-statemachine-data-jpa&quot;","body":"you mind trying to attach these two to your app?  &quot;org.springframework.statemachine:spring-statemachine-autoco&zwnj;&#8203;nfigure&quot;  &quot;org.springframework.statemachine:spring-statemachine-data-j&zwnj;&#8203;pa&quot;"},{"owner":{"account_id":14750639,"reputation":323,"user_id":10663172,"display_name":"SP."},"score":0,"creation_date":1632208686,"post_id":69132910,"comment_id":122423898,"body_markdown":"I&#39;ve added these two dependencies, but still getting the same error. I think there is a problem with connecting the stateMachine defined in the Service class with the context for StateMachine or something in that direction, but I don&#39;t have enough experience to figure out how to create the necessary connections.","body":"I&#39;ve added these two dependencies, but still getting the same error. I think there is a problem with connecting the stateMachine defined in the Service class with the context for StateMachine or something in that direction, but I don&#39;t have enough experience to figure out how to create the necessary connections."},{"owner":{"account_id":3481319,"reputation":876,"user_id":2913290,"accept_rate":50,"display_name":"Daniel Vilas-Boas"},"score":0,"creation_date":1632260378,"post_id":69132910,"comment_id":122443481,"body_markdown":"yea, it seems like your context it not wiring up properly. Do you have a repository that I can clone to take a look later?","body":"yea, it seems like your context it not wiring up properly. Do you have a repository that I can clone to take a look later?"},{"owner":{"account_id":14750639,"reputation":323,"user_id":10663172,"display_name":"SP."},"score":0,"creation_date":1632300009,"post_id":69132910,"comment_id":122452019,"body_markdown":"Yes. You can access it on [GitHub](https://github.com/SP-10663172/rest-spring-state-machine-papyrus).","body":"Yes. You can access it on <a href=\"https://github.com/SP-10663172/rest-spring-state-machine-papyrus\" rel=\"nofollow noreferrer\">GitHub</a>."},{"owner":{"account_id":3481319,"reputation":876,"user_id":2913290,"accept_rate":50,"display_name":"Daniel Vilas-Boas"},"score":0,"creation_date":1632401245,"post_id":69132910,"comment_id":122485688,"body_markdown":"Took a quick look at your project and confirmed that the NPE is caused by not having a bean of &quot;SSMService&quot; when configuring your camel routes. Adding @component to that class makes it non-compilable because of machine one and two that are not properly injected. I will try to look more over the weekend, but would recommend you to investigate that section","body":"Took a quick look at your project and confirmed that the NPE is caused by not having a bean of &quot;SSMService&quot; when configuring your camel routes. Adding @component to that class makes it non-compilable because of machine one and two that are not properly injected. I will try to look more over the weekend, but would recommend you to investigate that section"},{"owner":{"account_id":14750639,"reputation":323,"user_id":10663172,"display_name":"SP."},"score":0,"creation_date":1632913001,"post_id":69132910,"comment_id":122619916,"body_markdown":"I&#39;m still dealing with this problem. I tried with `@SpringBootTest` and enabling the `@EnableStateMachineFactory` like on this [video](https://youtu.be/A-dVgRV5-Bw?t=1668), but it didn&#39;t help.","body":"I&#39;m still dealing with this problem. I tried with <code>@SpringBootTest</code> and enabling the <code>@EnableStateMachineFactory</code> like on this <a href=\"https://youtu.be/A-dVgRV5-Bw?t=1668\" rel=\"nofollow noreferrer\">video</a>, but it didn&#39;t help."},{"owner":{"account_id":14750639,"reputation":323,"user_id":10663172,"display_name":"SP."},"score":0,"creation_date":1633351414,"post_id":69132910,"comment_id":122728700,"body_markdown":"Also tried to implement it like on [this page](https://ozdinc-celikel.medium.com/state-machine-factories-while-using-spring-statemachine-55bd1e963af), but still getting NPE.","body":"Also tried to implement it like on <a href=\"https://ozdinc-celikel.medium.com/state-machine-factories-while-using-spring-statemachine-55bd1e963af\" rel=\"nofollow noreferrer\">this page</a>, but still getting NPE."},{"owner":{"account_id":3481319,"reputation":876,"user_id":2913290,"accept_rate":50,"display_name":"Daniel Vilas-Boas"},"score":0,"creation_date":1633713491,"post_id":69132910,"comment_id":122842028,"body_markdown":"hey @SP. would you be able to give me access to push a change in your repository? I think i&#39;ve came with a workaround. My github username is daanielvb","body":"hey @SP. would you be able to give me access to push a change in your repository? I think i&#39;ve came with a workaround. My github username is daanielvb"}],"answers":[{"tags":[],"owner":{"account_id":3481319,"reputation":876,"user_id":2913290,"accept_rate":50,"display_name":"Daniel Vilas-Boas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633714515,"creation_date":1633714515,"answer_id":69499753,"question_id":69132910,"body_markdown":"I cloned your project and made several changes to have it working, the main ones can be listed here:\r\n\r\n\r\n1- Added component scan to the main class to be able to find state machine configuration beans (including package rename). Got rid of SSM custom service and change to use your custom implementation\r\n\r\n    @SpringBootApplication\r\n    @ComponentScan(basePackages = {&quot;uml.statemachine.*&quot;})\r\n    public class UmlSpringStateMachineApplication implements CommandLineRunner \r\n    \r\n    \r\n    @Autowired\r\n        private SSMService stateMachineService;\r\n\r\n\r\n2- boilerplate logic to aquire machines according to the type you want\r\n\r\n    @Component\r\n    public class SSMService {\r\n    \r\n        @Autowired\r\n        @Qualifier(value=&quot;config_one&quot;)\r\n        private StateMachineFactory&lt;String, String&gt; stateMachineFactoryOne;\r\n    \r\n        @Autowired\r\n        @Qualifier(value=&quot;config_two&quot;)\r\n        private StateMachineFactory&lt;String, String&gt; stateMachineFactoryTwo;\r\n    \r\n        public SSMService() {\r\n        }\r\n    \r\n        public StateMachine&lt;String, String&gt; acquireMachine(String id, String version){\r\n            if (version.equals(&quot;one&quot;)){\r\n                return stateMachineFactoryOne.getStateMachine(id);\r\n            }\r\n            else{\r\n                return stateMachineFactoryTwo.getStateMachine(id);\r\n            }\r\n        }\r\n\r\n3- Commented out StateMachineServiceConfig due to injection issues (you can look further)\r\n\r\n4- Replaced for the factory annotation in your config classes\r\n\r\n\r\n    @Configuration\r\n    @EnableStateMachineFactory(name = &quot;config_one&quot;)\r\n    public class StateMachineOneConfig\r\n            extends StateMachineConfigurerAdapter&lt;String, String&gt; {\r\n\r\n\r\n5- In my case, the project was not compiling so I had to include few extra dependencies to your pom (might not be necessary)\r\n\r\n\r\n    &lt;repositories&gt;\r\n            &lt;repository&gt;\r\n                &lt;id&gt;spring-snapshots&lt;/id&gt;\r\n                &lt;url&gt;http://repo.spring.io/snapshot&lt;/url&gt;\r\n                &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\r\n            &lt;/repository&gt;\r\n            &lt;repository&gt;\r\n                &lt;id&gt;spring-milestones&lt;/id&gt;\r\n                &lt;url&gt;http://repo.spring.io/milestone&lt;/url&gt;\r\n            &lt;/repository&gt;\r\n        &lt;/repositories&gt;\r\n        &lt;pluginRepositories&gt;\r\n            &lt;pluginRepository&gt;\r\n                &lt;id&gt;spring-snapshots&lt;/id&gt;\r\n                &lt;url&gt;http://repo.spring.io/snapshot&lt;/url&gt;\r\n            &lt;/pluginRepository&gt;\r\n            &lt;pluginRepository&gt;\r\n                &lt;id&gt;spring-milestones&lt;/id&gt;\r\n                &lt;url&gt;http://repo.spring.io/milestone&lt;/url&gt;\r\n            &lt;/pluginRepository&gt;\r\n        &lt;/pluginRepositories&gt;\r\n\r\n\r\n\r\nYou can find the list of changes in the repository I created to help you\r\n\r\nhttps://github.com/Daanielvb/state-machine-papyrus-help\r\n\r\nHope that&#39;s helpful ","title":"Start Spring State Machine with HTTP call","body":"<p>I cloned your project and made several changes to have it working, the main ones can be listed here:</p>\n<p>1- Added component scan to the main class to be able to find state machine configuration beans (including package rename). Got rid of SSM custom service and change to use your custom implementation</p>\n<pre><code>@SpringBootApplication\n@ComponentScan(basePackages = {&quot;uml.statemachine.*&quot;})\npublic class UmlSpringStateMachineApplication implements CommandLineRunner \n\n\n@Autowired\n    private SSMService stateMachineService;\n</code></pre>\n<p>2- boilerplate logic to aquire machines according to the type you want</p>\n<pre><code>@Component\npublic class SSMService {\n\n    @Autowired\n    @Qualifier(value=&quot;config_one&quot;)\n    private StateMachineFactory&lt;String, String&gt; stateMachineFactoryOne;\n\n    @Autowired\n    @Qualifier(value=&quot;config_two&quot;)\n    private StateMachineFactory&lt;String, String&gt; stateMachineFactoryTwo;\n\n    public SSMService() {\n    }\n\n    public StateMachine&lt;String, String&gt; acquireMachine(String id, String version){\n        if (version.equals(&quot;one&quot;)){\n            return stateMachineFactoryOne.getStateMachine(id);\n        }\n        else{\n            return stateMachineFactoryTwo.getStateMachine(id);\n        }\n    }\n</code></pre>\n<p>3- Commented out StateMachineServiceConfig due to injection issues (you can look further)</p>\n<p>4- Replaced for the factory annotation in your config classes</p>\n<pre><code>@Configuration\n@EnableStateMachineFactory(name = &quot;config_one&quot;)\npublic class StateMachineOneConfig\n        extends StateMachineConfigurerAdapter&lt;String, String&gt; {\n</code></pre>\n<p>5- In my case, the project was not compiling so I had to include few extra dependencies to your pom (might not be necessary)</p>\n<pre><code>&lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;url&gt;http://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;url&gt;http://repo.spring.io/milestone&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;url&gt;http://repo.spring.io/snapshot&lt;/url&gt;\n        &lt;/pluginRepository&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;url&gt;http://repo.spring.io/milestone&lt;/url&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n</code></pre>\n<p>You can find the list of changes in the repository I created to help you</p>\n<p><a href=\"https://github.com/Daanielvb/state-machine-papyrus-help\" rel=\"nofollow noreferrer\">https://github.com/Daanielvb/state-machine-papyrus-help</a></p>\n<p>Hope that's helpful</p>\n"}],"owner":{"account_id":14750639,"reputation":323,"user_id":10663172,"display_name":"SP."},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1088,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":1,"score":0,"last_activity_date":1633714515,"creation_date":1631280307,"question_id":69132910,"body_markdown":"I want to trigger the Spring State Machine model loaded from Papyrus with an HTTP POST.\r\nIf I send let&#39;s say `{&quot;state_machine&quot;:&quot;START&quot;}`over HTTP I would like to start the predefined state machine model. Is this possible? Or looking from different view, is it possible to create and run REST API inside the Spring State Machine model?\r\n\r\nI&#39;m using Spring Boot with Spring State Machine dependency.\r\nThere is defined endpoint on Swagger to send HTTP POST to Service class.\r\n\r\nIt is based on [this project][1] where you can check all the code for State Machine/s because I basically just want to integrate HTTP call to it.\r\n\r\nI&#39;m getting NullPointerException considering Spring Statemachine at Service class for line 65 which is `stateMachineOne = this.stateMachineFactory.getStateMachine(&quot;machineone&quot;);`. Here is full exception:\r\n```\r\njava.lang.NullPointerException\r\n        at test.umlspringstatemachine.SSMService.RunSSM(SSMService.java:65)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n        at org.apache.camel.support.ObjectHelper.invokeMethodSafe(ObjectHelper.java:372)\r\n        at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:494)\r\n        at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:316)\r\n        at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:286)\r\n        at org.apache.camel.component.bean.AbstractBeanProcessor.process(AbstractBeanProcessor.java:146)\r\n        at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:81)\r\n        at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.doRun(RedeliveryErrorHandler.java:780)\r\n        at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.run(RedeliveryErrorHandler.java:688)\r\n        at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181)\r\n        at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:62)\r\n        at org.apache.camel.processor.Pipeline.process(Pipeline.java:167)\r\n        at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:388)\r\n        at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83)\r\n        at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:41)\r\n        at org.apache.camel.http.common.CamelServlet.doExecute(CamelServlet.java:319)\r\n        at org.apache.camel.http.common.CamelServlet.doService(CamelServlet.java:214)\r\n        at org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:130)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:93)\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\r\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\r\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:373)\r\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\r\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n        at java.base/java.lang.Thread.run(Thread.java:829)\r\n```\r\n\r\nChange that I made from that project is that I removed next part of code from `UmlSpringStateMachineApplication.java` so the State Machine doesn&#39;t start when I start the whole app:\r\n```\r\n@Override\r\n    public void run(String... args) throws Exception {\r\n\r\n    \tsynchronized (stateMachineOne) {\r\n    \t\t stateMachineOne.getExtendedState().getVariables().put(&quot;foo&quot;, &quot;machine1&quot;);\r\n    \t     stateMachineOne.start();\r\n\t\t}\r\n       \r\n        synchronized (stateMachineTwo) {\r\n            if(stateMachineOne.isComplete()) {\r\n                stateMachineTwo.getExtendedState().getVariables().put(&quot;foo&quot;, (String)stateMachineOne.getExtendedState().getVariables().get(&quot;foo&quot;));\r\n                stateMachineTwo.start();\r\n            }\r\n\t\t}\r\n        \r\n    }\r\n```\r\nInside the Service class I have something like this below, but I get null exception like the Spring State Machine context or something is missing. I would like to `stateMachineOne.start();` once the `START` from HTTP POST is received.\r\n```\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport org.apache.camel.Exchange;\r\nimport org.apache.camel.Message;\r\nimport org.codehaus.jettison.json.JSONArray;\r\nimport org.codehaus.jettison.json.JSONException;\r\nimport org.codehaus.jettison.json.JSONObject;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.statemachine.StateMachine;\r\nimport org.springframework.statemachine.config.StateMachineFactory;\r\n\r\nimport java.util.LinkedList;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\npublic class SSMService {\r\n\r\n    @Autowired\r\n    private StateMachineFactory&lt;String, String&gt; stateMachineFactory;\r\n\r\n    @Autowired\r\n    private StateMachine&lt;String, String&gt; stateMachineOne;\r\n\r\n    public SSMService() {\r\n    }\r\n\r\n    public void TriggerSSM(Exchange exchange) {\r\n\r\n        Message camelMessage = exchange.getIn();\r\n\r\n        ObjectMapper mapObject = new ObjectMapper();\r\n        Map&lt;String, Object&gt; mapObj = mapObject.convertValue(camelMessage.getBody(), Map.class);\r\n\r\n        try {\r\n            JSONObject json = new JSONObject(mapObj);\r\n\r\n            String state_machine= json.getString(&quot;state_machine&quot;);\r\n\r\n                if (state_machine.equals(&quot;START&quot;)) {\r\n\r\n                    stateMachineOne = this.stateMachineFactory.getStateMachine(&quot;machineone&quot;);\r\n                    stateMachineOne.getExtendedState().getVariables().put(&quot;foo&quot;, &quot;machine1&quot;);\r\n                    stateMachineOne.start();\r\n\r\n                }\r\n            }\r\n\r\n        } catch (JsonProcessingException | JSONException e) {\r\n            e.printStackTrace();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```\r\nThis is the config class:\r\n```\r\nimport ch.qos.logback.classic.Logger;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.statemachine.config.EnableStateMachine;\r\nimport org.springframework.statemachine.config.StateMachineConfigurerAdapter;\r\nimport org.springframework.statemachine.config.builders.StateMachineConfigurationConfigurer;\r\nimport org.springframework.statemachine.config.builders.StateMachineModelConfigurer;\r\nimport org.springframework.statemachine.config.model.StateMachineModelFactory;\r\nimport org.springframework.statemachine.listener.StateMachineListener;\r\nimport org.springframework.statemachine.listener.StateMachineListenerAdapter;\r\nimport org.springframework.statemachine.state.State;\r\nimport org.springframework.statemachine.uml.UmlStateMachineModelFactory;\r\nimport org.springframework.statemachine.config.EnableStateMachineFactory;\r\n\r\nimport lombok.extern.slf4j.Slf4j;\r\n\r\n@Slf4j\r\n@Configuration\r\n//@EnableStateMachineFactory\r\n@EnableStateMachine(name=&quot;stateMachineOne&quot;)\r\npublic class StateMachineOneConfig extends StateMachineConfigurerAdapter&lt;String, String&gt; {\r\n\r\n    Logger log;\r\n    \r\n    @Override\r\n    public void configure(StateMachineConfigurationConfigurer&lt;String, String&gt; config) throws Exception {\r\n        config.withConfiguration().autoStartup(false).listener(listener1()).machineId(&quot;machineone&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void configure(StateMachineModelConfigurer&lt;String, String&gt; model) throws Exception {\r\n        model.withModel().factory(modelFactory1());\r\n    }\r\n\r\n    @Bean\r\n    public StateMachineModelFactory&lt;String, String&gt; modelFactory1() {\r\n        return new UmlStateMachineModelFactory(&quot;classpath:papyrus/StateMachine1.uml&quot;);\r\n    }\r\n    \r\n    @Bean\r\n    public StateMachineListener&lt;String, String&gt; listener1() {\r\n        return new StateMachineListenerAdapter&lt;String, String&gt;() {\r\n            @Override\r\n            public void stateChanged(State&lt;String, String&gt; from, State&lt;String, String&gt; to) {\r\n                log.info(&quot;State 1 changed to &quot; + to.getId());\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n}\r\n```\r\nThis is pom.xml file with dependencies:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;test&lt;/groupId&gt;\r\n    &lt;artifactId&gt;camel&lt;/artifactId&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;name&gt;Camel - OpenAPI - Spring State Machine&lt;/name&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n        &lt;spring.boot-version&gt;2.3.0.RELEASE&lt;/spring.boot-version&gt;\r\n        &lt;jackson.swagger.version&gt;2.12.0&lt;/jackson.swagger.version&gt;\r\n\t\t&lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n\t\t&lt;start-class&gt;test.umlspringstatemachine.UmlSpringStateMachineApplication&lt;/start-class&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;!-- Spring Boot BOM --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.boot-version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- Camel BOM --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;camel-spring-boot-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;3.9.0&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.statemachine&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-statemachine-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.statemachine&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-statemachine-uml&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.statemachine&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-statemachine-autoconfigure&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.statemachine&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-statemachine-data-jpa&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.18.20&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- Spring Boot --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- Camel --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-stream-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n\t\t &lt;artifactId&gt;camel-jackson-starter&lt;/artifactId&gt;\r\n\t    &lt;/dependency&gt;\r\n        &lt;!-- REST --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-rest-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-servlet-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- Swagger --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-swagger-java-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-rest-swagger-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-swagger-java&lt;/artifactId&gt;\r\n            &lt;version&gt;3.9.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n            &lt;artifactId&gt;swagger-ui&lt;/artifactId&gt;\r\n            &lt;version&gt;3.51.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n            &lt;artifactId&gt;webjars-locator&lt;/artifactId&gt;\r\n            &lt;version&gt;0.42&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t\t&lt;!-- Kafka --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;camel-kafka&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.9.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- JSON --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.codehaus.jettison&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jettison&lt;/artifactId&gt;\r\n            &lt;version&gt;1.4.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.8.0&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;default-prepare-agent&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;default-report&lt;/id&gt;\r\n                        &lt;phase&gt;prepare-package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;report&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;!-- OWASP Dependency Check - https://www.owasp.org/index.php/OWASP_Dependency_Check --&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.owasp&lt;/groupId&gt;\r\n                &lt;artifactId&gt;dependency-check-maven&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.2&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;format&gt;XML&lt;/format&gt;\r\n                    &lt;outputDirectory&gt;${dependency.check.report.dir}&lt;/outputDirectory&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\n  [1]: https://github.com/joergi/uml-spring-state-machine","title":"Start Spring State Machine with HTTP call","body":"<p>I want to trigger the Spring State Machine model loaded from Papyrus with an HTTP POST.\nIf I send let's say <code>{&quot;state_machine&quot;:&quot;START&quot;}</code>over HTTP I would like to start the predefined state machine model. Is this possible? Or looking from different view, is it possible to create and run REST API inside the Spring State Machine model?</p>\n<p>I'm using Spring Boot with Spring State Machine dependency.\nThere is defined endpoint on Swagger to send HTTP POST to Service class.</p>\n<p>It is based on <a href=\"https://github.com/joergi/uml-spring-state-machine\" rel=\"nofollow noreferrer\">this project</a> where you can check all the code for State Machine/s because I basically just want to integrate HTTP call to it.</p>\n<p>I'm getting NullPointerException considering Spring Statemachine at Service class for line 65 which is <code>stateMachineOne = this.stateMachineFactory.getStateMachine(&quot;machineone&quot;);</code>. Here is full exception:</p>\n<pre><code>java.lang.NullPointerException\n        at test.umlspringstatemachine.SSMService.RunSSM(SSMService.java:65)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at org.apache.camel.support.ObjectHelper.invokeMethodSafe(ObjectHelper.java:372)\n        at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:494)\n        at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:316)\n        at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:286)\n        at org.apache.camel.component.bean.AbstractBeanProcessor.process(AbstractBeanProcessor.java:146)\n        at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:81)\n        at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.doRun(RedeliveryErrorHandler.java:780)\n        at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.run(RedeliveryErrorHandler.java:688)\n        at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181)\n        at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:62)\n        at org.apache.camel.processor.Pipeline.process(Pipeline.java:167)\n        at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:388)\n        at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83)\n        at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:41)\n        at org.apache.camel.http.common.CamelServlet.doExecute(CamelServlet.java:319)\n        at org.apache.camel.http.common.CamelServlet.doService(CamelServlet.java:214)\n        at org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:130)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:93)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:373)\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.base/java.lang.Thread.run(Thread.java:829)\n</code></pre>\n<p>Change that I made from that project is that I removed next part of code from <code>UmlSpringStateMachineApplication.java</code> so the State Machine doesn't start when I start the whole app:</p>\n<pre><code>@Override\n    public void run(String... args) throws Exception {\n\n        synchronized (stateMachineOne) {\n             stateMachineOne.getExtendedState().getVariables().put(&quot;foo&quot;, &quot;machine1&quot;);\n             stateMachineOne.start();\n        }\n       \n        synchronized (stateMachineTwo) {\n            if(stateMachineOne.isComplete()) {\n                stateMachineTwo.getExtendedState().getVariables().put(&quot;foo&quot;, (String)stateMachineOne.getExtendedState().getVariables().get(&quot;foo&quot;));\n                stateMachineTwo.start();\n            }\n        }\n        \n    }\n</code></pre>\n<p>Inside the Service class I have something like this below, but I get null exception like the Spring State Machine context or something is missing. I would like to <code>stateMachineOne.start();</code> once the <code>START</code> from HTTP POST is received.</p>\n<pre><code>import com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.apache.camel.Exchange;\nimport org.apache.camel.Message;\nimport org.codehaus.jettison.json.JSONArray;\nimport org.codehaus.jettison.json.JSONException;\nimport org.codehaus.jettison.json.JSONObject;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.statemachine.StateMachine;\nimport org.springframework.statemachine.config.StateMachineFactory;\n\nimport java.util.LinkedList;\nimport java.util.List;\nimport java.util.Map;\n\npublic class SSMService {\n\n    @Autowired\n    private StateMachineFactory&lt;String, String&gt; stateMachineFactory;\n\n    @Autowired\n    private StateMachine&lt;String, String&gt; stateMachineOne;\n\n    public SSMService() {\n    }\n\n    public void TriggerSSM(Exchange exchange) {\n\n        Message camelMessage = exchange.getIn();\n\n        ObjectMapper mapObject = new ObjectMapper();\n        Map&lt;String, Object&gt; mapObj = mapObject.convertValue(camelMessage.getBody(), Map.class);\n\n        try {\n            JSONObject json = new JSONObject(mapObj);\n\n            String state_machine= json.getString(&quot;state_machine&quot;);\n\n                if (state_machine.equals(&quot;START&quot;)) {\n\n                    stateMachineOne = this.stateMachineFactory.getStateMachine(&quot;machineone&quot;);\n                    stateMachineOne.getExtendedState().getVariables().put(&quot;foo&quot;, &quot;machine1&quot;);\n                    stateMachineOne.start();\n\n                }\n            }\n\n        } catch (JsonProcessingException | JSONException e) {\n            e.printStackTrace();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n    }\n\n}\n</code></pre>\n<p>This is the config class:</p>\n<pre><code>import ch.qos.logback.classic.Logger;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.statemachine.config.EnableStateMachine;\nimport org.springframework.statemachine.config.StateMachineConfigurerAdapter;\nimport org.springframework.statemachine.config.builders.StateMachineConfigurationConfigurer;\nimport org.springframework.statemachine.config.builders.StateMachineModelConfigurer;\nimport org.springframework.statemachine.config.model.StateMachineModelFactory;\nimport org.springframework.statemachine.listener.StateMachineListener;\nimport org.springframework.statemachine.listener.StateMachineListenerAdapter;\nimport org.springframework.statemachine.state.State;\nimport org.springframework.statemachine.uml.UmlStateMachineModelFactory;\nimport org.springframework.statemachine.config.EnableStateMachineFactory;\n\nimport lombok.extern.slf4j.Slf4j;\n\n@Slf4j\n@Configuration\n//@EnableStateMachineFactory\n@EnableStateMachine(name=&quot;stateMachineOne&quot;)\npublic class StateMachineOneConfig extends StateMachineConfigurerAdapter&lt;String, String&gt; {\n\n    Logger log;\n    \n    @Override\n    public void configure(StateMachineConfigurationConfigurer&lt;String, String&gt; config) throws Exception {\n        config.withConfiguration().autoStartup(false).listener(listener1()).machineId(&quot;machineone&quot;);\n    }\n\n    @Override\n    public void configure(StateMachineModelConfigurer&lt;String, String&gt; model) throws Exception {\n        model.withModel().factory(modelFactory1());\n    }\n\n    @Bean\n    public StateMachineModelFactory&lt;String, String&gt; modelFactory1() {\n        return new UmlStateMachineModelFactory(&quot;classpath:papyrus/StateMachine1.uml&quot;);\n    }\n    \n    @Bean\n    public StateMachineListener&lt;String, String&gt; listener1() {\n        return new StateMachineListenerAdapter&lt;String, String&gt;() {\n            @Override\n            public void stateChanged(State&lt;String, String&gt; from, State&lt;String, String&gt; to) {\n                log.info(&quot;State 1 changed to &quot; + to.getId());\n            }\n        };\n\n    }\n\n}\n</code></pre>\n<p>This is pom.xml file with dependencies:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;test&lt;/groupId&gt;\n    &lt;artifactId&gt;camel&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;name&gt;Camel - OpenAPI - Spring State Machine&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;spring.boot-version&gt;2.3.0.RELEASE&lt;/spring.boot-version&gt;\n        &lt;jackson.swagger.version&gt;2.12.0&lt;/jackson.swagger.version&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n        &lt;start-class&gt;test.umlspringstatemachine.UmlSpringStateMachineApplication&lt;/start-class&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;!-- Spring Boot BOM --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring.boot-version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;!-- Camel BOM --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n                &lt;artifactId&gt;camel-spring-boot-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;3.9.0&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.statemachine&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-statemachine-core&lt;/artifactId&gt;\n            &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.statemachine&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-statemachine-uml&lt;/artifactId&gt;\n            &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.statemachine&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-statemachine-autoconfigure&lt;/artifactId&gt;\n            &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.statemachine&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-statemachine-data-jpa&lt;/artifactId&gt;\n            &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.20&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Spring Boot --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Camel --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-stream-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n         &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n         &lt;artifactId&gt;camel-jackson-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- REST --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-rest-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-servlet-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Swagger --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-swagger-java-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-rest-swagger-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-swagger-java&lt;/artifactId&gt;\n            &lt;version&gt;3.9.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;swagger-ui&lt;/artifactId&gt;\n            &lt;version&gt;3.51.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;webjars-locator&lt;/artifactId&gt;\n            &lt;version&gt;0.42&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Kafka --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-kafka&lt;/artifactId&gt;\n            &lt;version&gt;3.9.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- JSON --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.codehaus.jettison&lt;/groupId&gt;\n            &lt;artifactId&gt;jettison&lt;/artifactId&gt;\n            &lt;version&gt;1.4.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.8.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-prepare-agent&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-report&lt;/id&gt;\n                        &lt;phase&gt;prepare-package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;report&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;!-- OWASP Dependency Check - https://www.owasp.org/index.php/OWASP_Dependency_Check --&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.owasp&lt;/groupId&gt;\n                &lt;artifactId&gt;dependency-check-maven&lt;/artifactId&gt;\n                &lt;version&gt;3.0.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;format&gt;XML&lt;/format&gt;\n                    &lt;outputDirectory&gt;${dependency.check.report.dir}&lt;/outputDirectory&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","android","android-alertdialog","android-progressbar","android-dialog"],"answers":[{"tags":[],"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633649447,"creation_date":1633649447,"answer_id":69488856,"question_id":69488787,"body_markdown":"&gt;     binding.loadMoreBtn.setOnClickListener(view -&gt; {\r\n&gt; \r\n&gt;             Utils.setProgressDialog(requireContext());\r\n&gt; \r\n&gt;             if (Utils.hasNetworkAccess(requireContext())) {\r\n&gt;                 postViewModel.getPosts(); //                Log.w(TAG, &quot;loadMoreBtn: &quot;+dialog.isShowing() );\r\n&gt;             } else {\r\n&gt;                 postViewModel.getAllItemsFromDataBase.getValue();\r\n&gt;             }\r\n&gt;             Utils.setProgressDialog(requireContext()).cancel();\r\n&gt;             Utils.setProgressDialog(requireContext()).dismiss();\r\n&gt; \r\n&gt;         });\r\n\r\nHere you invoked the static method `Utils.setProgressDialog()` multiple times; and each time it is called, it returns back a brand new dialog, so you&#39;d dismiss a dialog that is not displayed on the screen.\r\n\r\nInstead, you need to store the dialog that is returned from the first call to the method into a variable:\r\n```\r\nAlertDialog dialog = Utils.setProgressDialog(requireContext());\r\n```\r\n\r\nAnd then call `dismiss` on that dialog version: `dialog.dismiss()` or `dialog.cancel()` whenever you need to dismiss it.\r\n\r\n\r\n\r\n","title":"Alertdialog running ongoing dosen&#39;t dismiss or cancel","body":"<blockquote>\n<pre><code>binding.loadMoreBtn.setOnClickListener(view -&gt; {\n\n        Utils.setProgressDialog(requireContext());\n\n        if (Utils.hasNetworkAccess(requireContext())) {\n            postViewModel.getPosts(); //                Log.w(TAG, &quot;loadMoreBtn: &quot;+dialog.isShowing() );\n        } else {\n            postViewModel.getAllItemsFromDataBase.getValue();\n        }\n        Utils.setProgressDialog(requireContext()).cancel();\n        Utils.setProgressDialog(requireContext()).dismiss();\n\n    });\n</code></pre>\n</blockquote>\n<p>Here you invoked the static method <code>Utils.setProgressDialog()</code> multiple times; and each time it is called, it returns back a brand new dialog, so you'd dismiss a dialog that is not displayed on the screen.</p>\n<p>Instead, you need to store the dialog that is returned from the first call to the method into a variable:</p>\n<pre><code>AlertDialog dialog = Utils.setProgressDialog(requireContext());\n</code></pre>\n<p>And then call <code>dismiss</code> on that dialog version: <code>dialog.dismiss()</code> or <code>dialog.cancel()</code> whenever you need to dismiss it.</p>\n"},{"tags":[],"owner":{"account_id":10358025,"reputation":2474,"user_id":7639296,"accept_rate":75,"display_name":"Dr Mido"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1633713522,"creation_date":1633713522,"answer_id":69499591,"question_id":69488787,"body_markdown":"I fixed it by adding a flag boolean in the viewmodel to detect loading state\r\n\r\n```\r\npublic final MutableLiveData&lt;Boolean&gt; isLoading = new MutableLiveData&lt;&gt;();\r\n```\r\n\r\nand use it in `getPosts()` like this\r\n\r\n```\r\npublic void getPosts() {\r\n        Log.e(TAG, finalURL.getValue());\r\n\r\n        isLoading.setValue(true);\r\n        repository.remoteDataSource.getPostList(finalURL.getValue())\r\n                .subscribeOn(Schedulers.io())\r\n                .observeOn(AndroidSchedulers.mainThread())\r\n                .subscribe(new Observer&lt;Response&lt;PostList&gt;&gt;() {\r\n                    @Override\r\n                    public void onSubscribe(@NonNull Disposable d) {\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onNext(@NonNull Response&lt;PostList&gt; postListResponse) {\r\n\r\n                        if (postListResponse.isSuccessful()) {\r\n                            if (postListResponse.body() != null\r\n                                    &amp;&amp; postListResponse.body().getNextPageToken() != null) {\r\n                                Log.e(TAG, postListResponse.body().getNextPageToken());\r\n                                token.setValue(postListResponse.body().getNextPageToken());\r\n                                isLoading.setValue(false);\r\n                            }\r\n                            postListMutableLiveData.setValue(postListResponse.body());\r\n```\r\n\r\nand finally in the fragment on button click\r\n\r\n```\r\nbinding.loadMoreBtn.setOnClickListener(view -&gt; {\r\n            AlertDialog dialog = Utils.setProgressDialog(requireContext());\r\n\r\n            postViewModel.isLoading.observe(getViewLifecycleOwner(), isLoading -&gt; {\r\n                if (isLoading) {\r\n                    dialog.show();\r\n                } else {\r\n                    dialog.dismiss();\r\n                }\r\n            });\r\n\r\n            if (Utils.hasNetworkAccess(requireContext())) {\r\n                postViewModel.getPosts();\r\n                Log.w(TAG, &quot;loadMoreBtn: &quot; + dialog.isShowing());\r\n            } else {\r\n                postViewModel.isLoading.postValue(true);\r\n                postViewModel.getAllItemsFromDataBase.getValue();\r\n                postViewModel.isLoading.postValue(false);\r\n            }\r\n\r\n        });\r\n```","title":"Alertdialog running ongoing dosen&#39;t dismiss or cancel","body":"<p>I fixed it by adding a flag boolean in the viewmodel to detect loading state</p>\n<pre><code>public final MutableLiveData&lt;Boolean&gt; isLoading = new MutableLiveData&lt;&gt;();\n</code></pre>\n<p>and use it in <code>getPosts()</code> like this</p>\n<pre><code>public void getPosts() {\n        Log.e(TAG, finalURL.getValue());\n\n        isLoading.setValue(true);\n        repository.remoteDataSource.getPostList(finalURL.getValue())\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe(new Observer&lt;Response&lt;PostList&gt;&gt;() {\n                    @Override\n                    public void onSubscribe(@NonNull Disposable d) {\n\n                    }\n\n                    @Override\n                    public void onNext(@NonNull Response&lt;PostList&gt; postListResponse) {\n\n                        if (postListResponse.isSuccessful()) {\n                            if (postListResponse.body() != null\n                                    &amp;&amp; postListResponse.body().getNextPageToken() != null) {\n                                Log.e(TAG, postListResponse.body().getNextPageToken());\n                                token.setValue(postListResponse.body().getNextPageToken());\n                                isLoading.setValue(false);\n                            }\n                            postListMutableLiveData.setValue(postListResponse.body());\n</code></pre>\n<p>and finally in the fragment on button click</p>\n<pre><code>binding.loadMoreBtn.setOnClickListener(view -&gt; {\n            AlertDialog dialog = Utils.setProgressDialog(requireContext());\n\n            postViewModel.isLoading.observe(getViewLifecycleOwner(), isLoading -&gt; {\n                if (isLoading) {\n                    dialog.show();\n                } else {\n                    dialog.dismiss();\n                }\n            });\n\n            if (Utils.hasNetworkAccess(requireContext())) {\n                postViewModel.getPosts();\n                Log.w(TAG, &quot;loadMoreBtn: &quot; + dialog.isShowing());\n            } else {\n                postViewModel.isLoading.postValue(true);\n                postViewModel.getAllItemsFromDataBase.getValue();\n                postViewModel.isLoading.postValue(false);\n            }\n\n        });\n</code></pre>\n"}],"owner":{"account_id":10358025,"reputation":2474,"user_id":7639296,"accept_rate":75,"display_name":"Dr Mido"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":348,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69499591,"answer_count":2,"score":1,"last_activity_date":1633713522,"creation_date":1633648745,"question_id":69488787,"body_markdown":"According this [answer][1] , I wanna to show dilaog until the next 10 posts is loaded so I created the static alertDialog method to use it in different places in my app, but the problem is the dialog doesn&#39;t cancel or dismiss\r\n\r\n&lt;a href=&quot;https://i.stack.imgur.com/IEgPX.jpg&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/UrwFB.gif&quot; title=&quot;source: imgur.com&quot; /&gt;&lt;/a&gt;\r\n\r\n**setProgressDialog** in Utils class\r\n\r\n```\r\n public static AlertDialog setProgressDialog(Context context) {\r\n\r\n        int llPadding = 30;\r\n        LinearLayout ll = new LinearLayout(context);\r\n        ll.setOrientation(LinearLayout.HORIZONTAL);\r\n        ll.setPadding(llPadding, llPadding, llPadding, llPadding);\r\n        ll.setGravity(Gravity.CENTER);\r\n        LinearLayout.LayoutParams llParam = new LinearLayout.LayoutParams(\r\n                LinearLayout.LayoutParams.WRAP_CONTENT,\r\n                LinearLayout.LayoutParams.WRAP_CONTENT);\r\n        llParam.gravity = Gravity.CENTER;\r\n        ll.setLayoutParams(llParam);\r\n\r\n        ProgressBar progressBar = new ProgressBar(context);\r\n        progressBar.setIndeterminate(true);\r\n        progressBar.setPadding(0, 0, llPadding, 0);\r\n        progressBar.setLayoutParams(llParam);\r\n\r\n        llParam = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,\r\n                ViewGroup.LayoutParams.WRAP_CONTENT);\r\n        llParam.gravity = Gravity.CENTER;\r\n        TextView tvText = new TextView(context);\r\n        tvText.setText(&quot;Loading ...&quot;);\r\n        tvText.setTextColor(context.getResources().getColor(R.color.black));\r\n        tvText.setTextSize(20);\r\n        tvText.setLayoutParams(llParam);\r\n\r\n        ll.addView(progressBar);\r\n        ll.addView(tvText);\r\n\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(context);\r\n        builder.setCancelable(false);\r\n        builder.setView(ll);\r\n\r\n        AlertDialog dialog = builder.create();\r\n        dialog.show();\r\n        Window window = dialog.getWindow();\r\n        if (window != null) {\r\n            WindowManager.LayoutParams layoutParams = new WindowManager.LayoutParams();\r\n            layoutParams.copyFrom(dialog.getWindow().getAttributes());\r\n            layoutParams.width = LinearLayout.LayoutParams.WRAP_CONTENT;\r\n            layoutParams.height = LinearLayout.LayoutParams.WRAP_CONTENT;\r\n            dialog.getWindow().setAttributes(layoutParams);\r\n        }\r\n        return dialog;\r\n    }\r\n```\r\n\r\nthen I used it in HomeFragment on click load more button\r\n\r\n```\r\nbinding.loadMoreBtn.setOnClickListener(view -&gt; {\r\n\r\n            Utils.setProgressDialog(requireContext());\r\n\r\n            if (Utils.hasNetworkAccess(requireContext())) {\r\n                postViewModel.getPosts();\r\n//                Log.w(TAG, &quot;loadMoreBtn: &quot;+dialog.isShowing() );\r\n            } else {\r\n                postViewModel.getAllItemsFromDataBase.getValue();\r\n            }\r\n            Utils.setProgressDialog(requireContext()).cancel();\r\n            Utils.setProgressDialog(requireContext()).dismiss();\r\n\r\n        });\r\n```\r\n\r\n**PS:** I tried also to create dialog `AlertDialog dialog = Utils.setProgressDialog(requireContext());` instead to call the method directly then `dialod.show()`, and after the `getPosts` cancel or dismiss it but it dosen&#39;t appear\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/49272722/4205927","title":"Alertdialog running ongoing dosen&#39;t dismiss or cancel","body":"<p>According this <a href=\"https://stackoverflow.com/a/49272722/4205927\">answer</a> , I wanna to show dilaog until the next 10 posts is loaded so I created the static alertDialog method to use it in different places in my app, but the problem is the dialog doesn't cancel or dismiss</p>\n<p><a href=\"https://i.stack.imgur.com/IEgPX.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UrwFB.gif\" title=\"source: imgur.com\" /></a></p>\n<p><strong>setProgressDialog</strong> in Utils class</p>\n<pre><code> public static AlertDialog setProgressDialog(Context context) {\n\n        int llPadding = 30;\n        LinearLayout ll = new LinearLayout(context);\n        ll.setOrientation(LinearLayout.HORIZONTAL);\n        ll.setPadding(llPadding, llPadding, llPadding, llPadding);\n        ll.setGravity(Gravity.CENTER);\n        LinearLayout.LayoutParams llParam = new LinearLayout.LayoutParams(\n                LinearLayout.LayoutParams.WRAP_CONTENT,\n                LinearLayout.LayoutParams.WRAP_CONTENT);\n        llParam.gravity = Gravity.CENTER;\n        ll.setLayoutParams(llParam);\n\n        ProgressBar progressBar = new ProgressBar(context);\n        progressBar.setIndeterminate(true);\n        progressBar.setPadding(0, 0, llPadding, 0);\n        progressBar.setLayoutParams(llParam);\n\n        llParam = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,\n                ViewGroup.LayoutParams.WRAP_CONTENT);\n        llParam.gravity = Gravity.CENTER;\n        TextView tvText = new TextView(context);\n        tvText.setText(&quot;Loading ...&quot;);\n        tvText.setTextColor(context.getResources().getColor(R.color.black));\n        tvText.setTextSize(20);\n        tvText.setLayoutParams(llParam);\n\n        ll.addView(progressBar);\n        ll.addView(tvText);\n\n        AlertDialog.Builder builder = new AlertDialog.Builder(context);\n        builder.setCancelable(false);\n        builder.setView(ll);\n\n        AlertDialog dialog = builder.create();\n        dialog.show();\n        Window window = dialog.getWindow();\n        if (window != null) {\n            WindowManager.LayoutParams layoutParams = new WindowManager.LayoutParams();\n            layoutParams.copyFrom(dialog.getWindow().getAttributes());\n            layoutParams.width = LinearLayout.LayoutParams.WRAP_CONTENT;\n            layoutParams.height = LinearLayout.LayoutParams.WRAP_CONTENT;\n            dialog.getWindow().setAttributes(layoutParams);\n        }\n        return dialog;\n    }\n</code></pre>\n<p>then I used it in HomeFragment on click load more button</p>\n<pre><code>binding.loadMoreBtn.setOnClickListener(view -&gt; {\n\n            Utils.setProgressDialog(requireContext());\n\n            if (Utils.hasNetworkAccess(requireContext())) {\n                postViewModel.getPosts();\n//                Log.w(TAG, &quot;loadMoreBtn: &quot;+dialog.isShowing() );\n            } else {\n                postViewModel.getAllItemsFromDataBase.getValue();\n            }\n            Utils.setProgressDialog(requireContext()).cancel();\n            Utils.setProgressDialog(requireContext()).dismiss();\n\n        });\n</code></pre>\n<p><strong>PS:</strong> I tried also to create dialog <code>AlertDialog dialog = Utils.setProgressDialog(requireContext());</code> instead to call the method directly then <code>dialod.show()</code>, and after the <code>getPosts</code> cancel or dismiss it but it dosen't appear</p>\n"},{"tags":["java","android","selenium","xpath","appium"],"answers":[{"tags":[],"owner":{"account_id":22961150,"reputation":229,"user_id":17090988,"display_name":"Narcis Postolache"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1633644109,"creation_date":1633642870,"answer_id":69488163,"question_id":69486336,"body_markdown":"**matches** keyword can be used with xpath 2.0. I was not able to find online which version does the appium client app use, but you can implement an intermediary solution with java core:\r\n\r\nFirst find all the elements that contain slash\r\n\r\n        List&lt;WebElement&gt; slashElements = androidDriver.findElementsByXPath(&quot;//*[contains(@text,&#39;/&#39;)]&quot;);\r\n\r\nThen apply the regex (here maybe find a regex standard for date or experiment with different patterns like `(0[1-9]|[12][0-9]|3[01])[- \\/.](0[1-9]|1[012])[- \\/.](19|20)\\d\\d`)\r\n\r\n        WebElement dateElement = slashElements.stream().filter(webElement -&gt; Pattern.compile(&quot;\\\\d{1,2}/\\\\d{1,2}/\\\\d{4}&quot;).matcher(webElement.getText()).matches()).findFirst().get();\r\n\r\nAlso just learned how to implement a simple Appium automation framework using Server GUI, Inspector, Selenium, Intellij and Android Studio, so thank you.","title":"How to find an element by mobile xpath with Appium matching @text attribute with a regular expression (regex)?","body":"<p><strong>matches</strong> keyword can be used with xpath 2.0. I was not able to find online which version does the appium client app use, but you can implement an intermediary solution with java core:</p>\n<p>First find all the elements that contain slash</p>\n<pre><code>    List&lt;WebElement&gt; slashElements = androidDriver.findElementsByXPath(&quot;//*[contains(@text,'/')]&quot;);\n</code></pre>\n<p>Then apply the regex (here maybe find a regex standard for date or experiment with different patterns like <code>(0[1-9]|[12][0-9]|3[01])[- \\/.](0[1-9]|1[012])[- \\/.](19|20)\\d\\d</code>)</p>\n<pre><code>    WebElement dateElement = slashElements.stream().filter(webElement -&gt; Pattern.compile(&quot;\\\\d{1,2}/\\\\d{1,2}/\\\\d{4}&quot;).matcher(webElement.getText()).matches()).findFirst().get();\n</code></pre>\n<p>Also just learned how to implement a simple Appium automation framework using Server GUI, Inspector, Selenium, Intellij and Android Studio, so thank you.</p>\n"},{"tags":[],"owner":{"account_id":14199152,"reputation":796,"user_id":10257512,"display_name":"Jayanth Bala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633713493,"creation_date":1633665412,"answer_id":69490316,"question_id":69486336,"body_markdown":"This is the **syntax** for getting the text in the regex,\r\n\r\n     //tagName[contains(text(), &#39;your text to find&#39;)]\r\n\r\n**for eg :** \r\n\r\n    //h3[contains(text(),&#39;comments&#39;)]","title":"How to find an element by mobile xpath with Appium matching @text attribute with a regular expression (regex)?","body":"<p>This is the <strong>syntax</strong> for getting the text in the regex,</p>\n<pre><code> //tagName[contains(text(), 'your text to find')]\n</code></pre>\n<p><strong>for eg :</strong></p>\n<pre><code>//h3[contains(text(),'comments')]\n</code></pre>\n"}],"owner":{"account_id":959469,"reputation":145,"user_id":984151,"display_name":"Carlos Diego Quirino Lima"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1782,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69488163,"answer_count":2,"score":1,"last_activity_date":1633713493,"creation_date":1633632316,"question_id":69486336,"body_markdown":"I&#39;m automating Android apps using Selenium-Appium (Java) and I got some difficult to address the following need:\r\n\r\nI have an element that doesn&#39;t have any of ID or ACCESSIBILITY ID configured. **But I&#39;ve noticed that its value is a fixed pattern, a date, like &quot;dd/MM/yyyy&quot;**.\r\n\r\nSo, I need *“to get element in screen which pattern fits with ‘dd/MM/yyyy’ date pattern”*. **How am I supposed to achieve it?**\r\n\r\nI’d tried to call:\r\n\r\n```java\r\ndriver.findElement(MobileBy.xpath(&quot;//*[matches(@text,&#39;&quot; + regex + &quot;&#39;)]&quot;));\r\n```\r\n\r\nBut only this error occurs:\r\n\r\n```\r\nAn unknown server-side error occurred while processing the command. Original error: java.lang.IllegalStateException: Unable to evaluate expression. See cause\r\nBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\nSystem info: host: &#39;DIEGOQUIRINO-PC&#39;, ip: &#39;172.23.192.1&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_301&#39;\r\nDriver info: io.appium.java_client.android.AndroidDriver\r\nCapabilities {app: apps/CTAppium_1_2.apk, appPackage: com.ctappium, autoGrantPermissions: true, automationName: UIAutomator2, avd: Pixel_4_API_30, databaseEnabled: false, desired: {app: apps/CTAppium_1_2.apk, autoGrantPermissions: true, automationName: UIAutomator2, avd: Pixel_4_API_30, deviceName: Pixel_4_API_30, noReset: true, platformName: android}, deviceApiLevel: 30, deviceManufacturer: Google, deviceModel: sdk_gphone_x86, deviceName: emulator-5554, deviceScreenDensity: 440, deviceScreenSize: 1080x2280, deviceUDID: emulator-5554, javascriptEnabled: true, locationContextEnabled: false, networkConnectionEnabled: true, noReset: true, pixelRatio: 2.75, platform: LINUX, platformName: ANDROID, platformVersion: 11, statBarHeight: 135, takesScreenshot: true, viewportRect: {height: 1842, left: 0, top: 135, width: 1080}, warnings: {}, webStorageEnabled: false}\r\nSession ID: dd7ea369-cdd3-4899-a6d8-4f08272fe935\r\n*** Element info: {Using=xpath, value=//*[matches(@text,&#39;^([0-2][0-9]|(3)[0-1])(\\/)(((0)[0-9])|((1)[0-2]))(\\/)\\d{4}$&#39;)]}\r\norg.openqa.selenium.WebDriverException: An unknown server-side error occurred while processing the command. Original error: java.lang.IllegalStateException: Unable to evaluate expression. See cause\r\nBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\nSystem info: host: &#39;DIEGOQUIRINO-PC&#39;, ip: &#39;172.23.192.1&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_301&#39;\r\nDriver info: io.appium.java_client.android.AndroidDriver\r\nCapabilities {app: apps/CTAppium_1_2.apk, appPackage: com.ctappium, autoGrantPermissions: true, automationName: UIAutomator2, avd: Pixel_4_API_30, databaseEnabled: false, desired: {app: apps/CTAppium_1_2.apk, autoGrantPermissions: true, automationName: UIAutomator2, avd: Pixel_4_API_30, deviceName: Pixel_4_API_30, noReset: true, platformName: android}, deviceApiLevel: 30, deviceManufacturer: Google, deviceModel: sdk_gphone_x86, deviceName: emulator-5554, deviceScreenDensity: 440, deviceScreenSize: 1080x2280, deviceUDID: emulator-5554, javascriptEnabled: true, locationContextEnabled: false, networkConnectionEnabled: true, noReset: true, pixelRatio: 2.75, platform: LINUX, platformName: ANDROID, platformVersion: 11, statBarHeight: 135, takesScreenshot: true, viewportRect: {height: 1842, left: 0, top: 135, width: 1080}, warnings: {}, webStorageEnabled: false}\r\nSession ID: dd7ea369-cdd3-4899-a6d8-4f08272fe935\r\n*** Element info: {Using=xpath, value=//*[matches(@text,&#39;^([0-2][0-9]|(3)[0-1])(\\/)(((0)[0-9])|((1)[0-2]))(\\/)\\d{4}$&#39;)]}\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:187)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:122)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:49)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:158)\r\n\tat io.appium.java_client.remote.AppiumCommandExecutor.execute(AppiumCommandExecutor.java:247)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\r\n\tat io.appium.java_client.DefaultGenericMobileDriver.execute(DefaultGenericMobileDriver.java:41)\r\n\tat io.appium.java_client.AppiumDriver.execute(AppiumDriver.java:1)\r\n\tat io.appium.java_client.android.AndroidDriver.execute(AndroidDriver.java:1)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:323)\r\n\tat io.appium.java_client.DefaultGenericMobileDriver.findElement(DefaultGenericMobileDriver.java:61)\r\n\tat io.appium.java_client.AppiumDriver.findElement(AppiumDriver.java:1)\r\n\tat io.appium.java_client.android.AndroidDriver.findElement(AndroidDriver.java:1)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.findElementByXPath(RemoteWebDriver.java:428)\r\n\tat io.appium.java_client.DefaultGenericMobileDriver.findElementByXPath(DefaultGenericMobileDriver.java:151)\r\n\tat io.appium.java_client.AppiumDriver.findElementByXPath(AppiumDriver.java:1)\r\n\tat io.appium.java_client.android.AndroidDriver.findElementByXPath(AndroidDriver.java:1)\r\n\tat org.openqa.selenium.By$ByXPath.findElement(By.java:353)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:315)\r\n\tat io.appium.java_client.DefaultGenericMobileDriver.findElement(DefaultGenericMobileDriver.java:57)\r\n\tat io.appium.java_client.AppiumDriver.findElement(AppiumDriver.java:1)\r\n\tat io.appium.java_client.android.AndroidDriver.findElement(AndroidDriver.java:1)\r\n\tat br.dev.diegoquirino.pages.PageObject.getByTextWithRegex(PageObject.java:46)\r\n\tat br.dev.diegoquirino.pages.FormPageObject.getDateAsString(FormPageObject.java:47)\r\n\tat br.dev.diegoquirino.courses.FormTest.sendForm(FormTest.java:71)\r\n\tat br.dev.diegoquirino.courses.FormTest.sendFormTest(FormTest.java:39)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1259)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1259)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n\tat com.sun.proxy.$Proxy2.stop(Unknown Source)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\r\n\tat org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\r\n```\r\n\r\n**Another useful information:**\r\n- Java version: 1.8\r\n- Appium version: 7.5.1\r\n\r\nMy best regards and thank you for any help.\r\n","title":"How to find an element by mobile xpath with Appium matching @text attribute with a regular expression (regex)?","body":"<p>I'm automating Android apps using Selenium-Appium (Java) and I got some difficult to address the following need:</p>\n<p>I have an element that doesn't have any of ID or ACCESSIBILITY ID configured. <strong>But I've noticed that its value is a fixed pattern, a date, like &quot;dd/MM/yyyy&quot;</strong>.</p>\n<p>So, I need <em>“to get element in screen which pattern fits with ‘dd/MM/yyyy’ date pattern”</em>. <strong>How am I supposed to achieve it?</strong></p>\n<p>I’d tried to call:</p>\n<pre class=\"lang-java prettyprint-override\"><code>driver.findElement(MobileBy.xpath(&quot;//*[matches(@text,'&quot; + regex + &quot;')]&quot;));\n</code></pre>\n<p>But only this error occurs:</p>\n<pre><code>An unknown server-side error occurred while processing the command. Original error: java.lang.IllegalStateException: Unable to evaluate expression. See cause\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'DIEGOQUIRINO-PC', ip: '172.23.192.1', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_301'\nDriver info: io.appium.java_client.android.AndroidDriver\nCapabilities {app: apps/CTAppium_1_2.apk, appPackage: com.ctappium, autoGrantPermissions: true, automationName: UIAutomator2, avd: Pixel_4_API_30, databaseEnabled: false, desired: {app: apps/CTAppium_1_2.apk, autoGrantPermissions: true, automationName: UIAutomator2, avd: Pixel_4_API_30, deviceName: Pixel_4_API_30, noReset: true, platformName: android}, deviceApiLevel: 30, deviceManufacturer: Google, deviceModel: sdk_gphone_x86, deviceName: emulator-5554, deviceScreenDensity: 440, deviceScreenSize: 1080x2280, deviceUDID: emulator-5554, javascriptEnabled: true, locationContextEnabled: false, networkConnectionEnabled: true, noReset: true, pixelRatio: 2.75, platform: LINUX, platformName: ANDROID, platformVersion: 11, statBarHeight: 135, takesScreenshot: true, viewportRect: {height: 1842, left: 0, top: 135, width: 1080}, warnings: {}, webStorageEnabled: false}\nSession ID: dd7ea369-cdd3-4899-a6d8-4f08272fe935\n*** Element info: {Using=xpath, value=//*[matches(@text,'^([0-2][0-9]|(3)[0-1])(\\/)(((0)[0-9])|((1)[0-2]))(\\/)\\d{4}$')]}\norg.openqa.selenium.WebDriverException: An unknown server-side error occurred while processing the command. Original error: java.lang.IllegalStateException: Unable to evaluate expression. See cause\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'DIEGOQUIRINO-PC', ip: '172.23.192.1', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_301'\nDriver info: io.appium.java_client.android.AndroidDriver\nCapabilities {app: apps/CTAppium_1_2.apk, appPackage: com.ctappium, autoGrantPermissions: true, automationName: UIAutomator2, avd: Pixel_4_API_30, databaseEnabled: false, desired: {app: apps/CTAppium_1_2.apk, autoGrantPermissions: true, automationName: UIAutomator2, avd: Pixel_4_API_30, deviceName: Pixel_4_API_30, noReset: true, platformName: android}, deviceApiLevel: 30, deviceManufacturer: Google, deviceModel: sdk_gphone_x86, deviceName: emulator-5554, deviceScreenDensity: 440, deviceScreenSize: 1080x2280, deviceUDID: emulator-5554, javascriptEnabled: true, locationContextEnabled: false, networkConnectionEnabled: true, noReset: true, pixelRatio: 2.75, platform: LINUX, platformName: ANDROID, platformVersion: 11, statBarHeight: 135, takesScreenshot: true, viewportRect: {height: 1842, left: 0, top: 135, width: 1080}, warnings: {}, webStorageEnabled: false}\nSession ID: dd7ea369-cdd3-4899-a6d8-4f08272fe935\n*** Element info: {Using=xpath, value=//*[matches(@text,'^([0-2][0-9]|(3)[0-1])(\\/)(((0)[0-9])|((1)[0-2]))(\\/)\\d{4}$')]}\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.openqa.selenium.remote.http.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:187)\n    at org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:122)\n    at org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:49)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:158)\n    at io.appium.java_client.remote.AppiumCommandExecutor.execute(AppiumCommandExecutor.java:247)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\n    at io.appium.java_client.DefaultGenericMobileDriver.execute(DefaultGenericMobileDriver.java:41)\n    at io.appium.java_client.AppiumDriver.execute(AppiumDriver.java:1)\n    at io.appium.java_client.android.AndroidDriver.execute(AndroidDriver.java:1)\n    at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:323)\n    at io.appium.java_client.DefaultGenericMobileDriver.findElement(DefaultGenericMobileDriver.java:61)\n    at io.appium.java_client.AppiumDriver.findElement(AppiumDriver.java:1)\n    at io.appium.java_client.android.AndroidDriver.findElement(AndroidDriver.java:1)\n    at org.openqa.selenium.remote.RemoteWebDriver.findElementByXPath(RemoteWebDriver.java:428)\n    at io.appium.java_client.DefaultGenericMobileDriver.findElementByXPath(DefaultGenericMobileDriver.java:151)\n    at io.appium.java_client.AppiumDriver.findElementByXPath(AppiumDriver.java:1)\n    at io.appium.java_client.android.AndroidDriver.findElementByXPath(AndroidDriver.java:1)\n    at org.openqa.selenium.By$ByXPath.findElement(By.java:353)\n    at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:315)\n    at io.appium.java_client.DefaultGenericMobileDriver.findElement(DefaultGenericMobileDriver.java:57)\n    at io.appium.java_client.AppiumDriver.findElement(AppiumDriver.java:1)\n    at io.appium.java_client.android.AndroidDriver.findElement(AndroidDriver.java:1)\n    at br.dev.diegoquirino.pages.PageObject.getByTextWithRegex(PageObject.java:46)\n    at br.dev.diegoquirino.pages.FormPageObject.getDateAsString(FormPageObject.java:47)\n    at br.dev.diegoquirino.courses.FormTest.sendForm(FormTest.java:71)\n    at br.dev.diegoquirino.courses.FormTest.sendFormTest(FormTest.java:39)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.util.ArrayList.forEach(ArrayList.java:1259)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.util.ArrayList.forEach(ArrayList.java:1259)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\n    at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\n    at com.sun.proxy.$Proxy2.stop(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\n    at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\n</code></pre>\n<p><strong>Another useful information:</strong></p>\n<ul>\n<li>Java version: 1.8</li>\n<li>Appium version: 7.5.1</li>\n</ul>\n<p>My best regards and thank you for any help.</p>\n"},{"tags":["java","simulation","event-simulation"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1633283306,"post_id":69427353,"comment_id":122713120,"body_markdown":"There is a tutorial at the end of the readme script","body":"There is a tutorial at the end of the readme script"},{"owner":{"account_id":12241247,"reputation":25,"user_id":8934267,"display_name":"churchurnaan"},"score":0,"creation_date":1633283593,"post_id":69427353,"comment_id":122713197,"body_markdown":"Yes I followed that. Got Build success after maven test and maven install. Then I tried running the example in the said folder. Got many errors. Note: I don&#39;t know java, so definitely I am doing something wrong","body":"Yes I followed that. Got Build success after maven test and maven install. Then I tried running the example in the said folder. Got many errors. Note: I don&#39;t know java, so definitely I am doing something wrong"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1633283666,"post_id":69427353,"comment_id":122713214,"body_markdown":"Can you post the error here ? And which command you are running on which folder etc ? (I mean, edit your question to post it)","body":"Can you post the error here ? And which command you are running on which folder etc ? (I mean, edit your question to post it)"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1633284157,"post_id":69427353,"comment_id":122713354,"body_markdown":"The `examples` project isn&#39;t import as maven. I suggest you to remove (not from disk, only in eclipse) the project, then import it as Maven.","body":"The <code>examples</code> project isn&#39;t import as maven. I suggest you to remove (not from disk, only in eclipse) the project, then import it as Maven."},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1633284639,"post_id":69427353,"comment_id":122713490,"body_markdown":"No, you need something like [this](http://prntscr.com/1uniems) : the `src/main/java` included after the `examples` project, which will means the IDE understand it&#39;s maven&#39;s project. Also, such as said [this](https://github.com/nmcl/JavaSim/tree/master/examples) readme, maybe you can try to just copy the example, and build only this one and not the global that seems to don&#39;t include example in his pom","body":"No, you need something like <a href=\"http://prntscr.com/1uniems\" rel=\"nofollow noreferrer\">this</a> : the <code>src&#47;main&#47;java</code> included after the <code>examples</code> project, which will means the IDE understand it&#39;s maven&#39;s project. Also, such as said <a href=\"https://github.com/nmcl/JavaSim/tree/master/examples\" rel=\"nofollow noreferrer\">this</a> readme, maybe you can try to just copy the example, and build only this one and not the global that seems to don&#39;t include example in his pom"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1633287123,"post_id":69427353,"comment_id":122714095,"body_markdown":"No problem I understand. I mean take only the `examples` folder. In this one, you have a pom file so it&#39;s a maven project. You also have a readme which contains command to run","body":"No problem I understand. I mean take only the <code>examples</code> folder. In this one, you have a pom file so it&#39;s a maven project. You also have a readme which contains command to run"},{"owner":{"account_id":12241247,"reputation":25,"user_id":8934267,"display_name":"churchurnaan"},"score":0,"creation_date":1633288131,"post_id":69427353,"comment_id":122714349,"body_markdown":"Hello @Elikill58 &quot;thanks you, that was exactly what I was looking for and it works very well&quot;...BTW when is your website coming?","body":"Hello @Elikill58 &quot;thanks you, that was exactly what I was looking for and it works very well&quot;...BTW when is your website coming?"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1633289300,"post_id":69427353,"comment_id":122714552,"body_markdown":"xD no problem. With pleasure !! My website is coming in few month I think. Also, I will make an answer to explain to other people the issue and how to fix it !","body":"xD no problem. With pleasure !! My website is coming in few month I think. Also, I will make an answer to explain to other people the issue and how to fix it !"}],"answers":[{"tags":[],"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1633290216,"creation_date":1633290216,"answer_id":69428323,"question_id":69427353,"body_markdown":"(problem solved in comment)\r\n\r\nThere is two project in one, but they are not linked.\r\n\r\nThe first and global one have a `pom.xml` file which make the `src/main/java` folder works and editable. It also make it compile.\r\n\r\nIn your case, you want to use the &quot;examples&quot; project. This one is NOT linked to the main project. I explain:\r\n\r\nYou can create a project with multiple sub-project with maven. When you are building the main, all sub are also built according to what you put in the `pom.xml` file.\r\n\r\nBack to your case, the main don&#39;t use the examples as sub-project. So it have to be compilated in a second hand.\r\n\r\nIf you include the main project, the second will be used as package and not sub-project. Such as you want a new project without the main, you can copy/paste the &quot;examples&quot; folder and use only this one as project.\r\n\r\nNow, You can import it in eclipse as Maven project. ","title":"How to run example with simulation package in Java?","body":"<p>(problem solved in comment)</p>\n<p>There is two project in one, but they are not linked.</p>\n<p>The first and global one have a <code>pom.xml</code> file which make the <code>src/main/java</code> folder works and editable. It also make it compile.</p>\n<p>In your case, you want to use the &quot;examples&quot; project. This one is NOT linked to the main project. I explain:</p>\n<p>You can create a project with multiple sub-project with maven. When you are building the main, all sub are also built according to what you put in the <code>pom.xml</code> file.</p>\n<p>Back to your case, the main don't use the examples as sub-project. So it have to be compilated in a second hand.</p>\n<p>If you include the main project, the second will be used as package and not sub-project. Such as you want a new project without the main, you can copy/paste the &quot;examples&quot; folder and use only this one as project.</p>\n<p>Now, You can import it in eclipse as Maven project.</p>\n"}],"owner":{"account_id":12241247,"reputation":25,"user_id":8934267,"display_name":"churchurnaan"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":275,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":69428323,"answer_count":1,"score":0,"last_activity_date":1633713295,"creation_date":1633282695,"question_id":69427353,"body_markdown":"Need help to run examples in the JavaSim simulation package. \r\n\r\n**https://github.com/nmcl/JavaSim**\r\n\r\nThe example Main.java is available at:\r\n\r\n```examples/src/main/java/org/javasim/examples/basic```\r\n\r\n\r\n\r\n\r\n\r\n\r\nScreenshot is attached of the error\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Vpz2a.png\r\n\r\n\r\nNote that I also performed in Eclipse:\r\n\r\nRight click on the project folder -&gt; Properties\r\nChoose &#39;Java Build Path&#39;\r\nClick on &#39;Sources&#39; tab on top\r\nClick on &#39;Add Folder&#39; on the right panel\r\nSelected folder examples and apply","title":"How to run example with simulation package in Java?","body":"<p>Need help to run examples in the JavaSim simulation package.</p>\n<p><strong><a href=\"https://github.com/nmcl/JavaSim\" rel=\"nofollow noreferrer\">https://github.com/nmcl/JavaSim</a></strong></p>\n<p>The example Main.java is available at:</p>\n<p><code>examples/src/main/java/org/javasim/examples/basic</code></p>\n<p>Screenshot is attached of the error\n<a href=\"https://i.stack.imgur.com/Vpz2a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vpz2a.png\" alt=\"enter image description here\" /></a></p>\n<p>Note that I also performed in Eclipse:</p>\n<p>Right click on the project folder -&gt; Properties\nChoose 'Java Build Path'\nClick on 'Sources' tab on top\nClick on 'Add Folder' on the right panel\nSelected folder examples and apply</p>\n"},{"tags":["java","android","xml","android-studio","intellij-idea"],"comments":[{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":2,"creation_date":1441825724,"post_id":32487235,"comment_id":52835447,"body_markdown":"cmd+right arrow. also, https://www.jetbrains.com/idea/docs/IntelliJIDEA_ReferenceCard_Mac.pdf","body":"cmd+right arrow. also, <a href=\"https://www.jetbrains.com/idea/docs/IntelliJIDEA_ReferenceCard_Mac.pdf\" rel=\"nofollow noreferrer\">jetbrains.com/idea/docs/IntelliJIDEA_ReferenceCard_Mac.pdf</a>"},{"owner":{"account_id":4548085,"reputation":2786,"user_id":3694016,"accept_rate":100,"display_name":"chaosifier"},"score":1,"creation_date":1441825821,"post_id":32487235,"comment_id":52835488,"body_markdown":"But it moves the cursor 1 word at a time.","body":"But it moves the cursor 1 word at a time."},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":0,"creation_date":1441825843,"post_id":32487235,"comment_id":52835494,"body_markdown":"no it does not. that would be option+arrow","body":"no it does not. that would be option+arrow"},{"owner":{"account_id":4548085,"reputation":2786,"user_id":3694016,"accept_rate":100,"display_name":"chaosifier"},"score":1,"creation_date":1441826095,"post_id":32487235,"comment_id":52835621,"body_markdown":"I doesn&#39;t work on windows.","body":"I doesn&#39;t work on windows."},{"owner":{"account_id":3131299,"reputation":37922,"user_id":2649012,"accept_rate":100,"display_name":"Phant&#244;maxx"},"score":3,"creation_date":1441826513,"post_id":32487235,"comment_id":52835817,"body_markdown":"You have a key on your keyboard... It&#39;s written **End** on it. Press it.","body":"You have a key on your keyboard... It&#39;s written <b>End</b> on it. Press it."},{"owner":{"account_id":4548085,"reputation":2786,"user_id":3694016,"accept_rate":100,"display_name":"chaosifier"},"score":1,"creation_date":1441826646,"post_id":32487235,"comment_id":52835883,"body_markdown":"I don&#39;t think you read the question properly. Using the mouse would be faster than pressing that key.","body":"I don&#39;t think you read the question properly. Using the mouse would be faster than pressing that key."},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":2,"creation_date":1441828958,"post_id":32487235,"comment_id":52837009,"body_markdown":"@chaosifier probably because you don&#39;t have a cmd key. But there would be no way for me to know that until you said it, is there? (Anyway, the link I gave is mac-specific, but the windows equivalent also exists, and is not really hard to find)","body":"@chaosifier probably because you don&#39;t have a cmd key. But there would be no way for me to know that until you said it, is there? (Anyway, the link I gave is mac-specific, but the windows equivalent also exists, and is not really hard to find)"},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":1,"creation_date":1441829126,"post_id":32487235,"comment_id":52837094,"body_markdown":"a much quicker solution would have been to go to `settings -&gt; keymap` and search for whatever action you are trying to perform. Examples include `move caret to end of line`, `move caret to end of block`, `move caret to text end`","body":"a much quicker solution would have been to go to <code>settings -&gt; keymap</code> and search for whatever action you are trying to perform. Examples include <code>move caret to end of line</code>, <code>move caret to end of block</code>, <code>move caret to text end</code>"},{"owner":{"account_id":4548085,"reputation":2786,"user_id":3694016,"accept_rate":100,"display_name":"chaosifier"},"score":1,"creation_date":1441829196,"post_id":32487235,"comment_id":52837133,"body_markdown":"@njzk2 I just downloaded the cheat-sheet for windows and i found  a lot of other handy shortcuts too. Thanks for the suggestion.","body":"@njzk2 I just downloaded the cheat-sheet for windows and i found  a lot of other handy shortcuts too. Thanks for the suggestion."},{"owner":{"account_id":4548085,"reputation":2786,"user_id":3694016,"accept_rate":100,"display_name":"chaosifier"},"score":0,"creation_date":1441829318,"post_id":32487235,"comment_id":52837191,"body_markdown":"I didn&#39;t know that feature existed. Thanks again !","body":"I didn&#39;t know that feature existed. Thanks again !"}],"answers":[{"tags":[],"owner":{"account_id":4548085,"reputation":2786,"user_id":3694016,"accept_rate":100,"display_name":"chaosifier"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1510660583,"creation_date":1441827553,"answer_id":32487869,"question_id":32487235,"body_markdown":"Using the keyboard combination `Ctrl + [` did the trick.","title":"How to get to the end of a line in android studio","body":"<p>Using the keyboard combination <code>Ctrl + [</code> did the trick.</p>\n"},{"tags":[],"owner":{"account_id":3213677,"reputation":5074,"user_id":2713030,"accept_rate":56,"display_name":"mbmc"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1603637646,"creation_date":1441827917,"answer_id":32487955,"question_id":32487235,"body_markdown":"&lt;kbd&gt;Ctrl&lt;/kbd&gt; + &lt;kbd&gt;e&lt;/kbd&gt; for *end*\r\n\r\n&lt;kbd&gt;Ctrl&lt;/kbd&gt; + &lt;kbd&gt;a&lt;/kbd&gt; for *start*\r\n","title":"How to get to the end of a line in android studio","body":"<p><kbd>Ctrl</kbd> + <kbd>e</kbd> for <em>end</em></p>\n<p><kbd>Ctrl</kbd> + <kbd>a</kbd> for <em>start</em></p>\n"},{"tags":[],"owner":{"account_id":1714783,"reputation":799,"user_id":1572112,"accept_rate":43,"display_name":"The EasyLearn Academy"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1622695411,"creation_date":1487642347,"answer_id":42357374,"question_id":32487235,"body_markdown":"Just Press End key on keyboard. and cursor will jump to end of line. ","title":"How to get to the end of a line in android studio","body":"<p>Just Press End key on keyboard. and cursor will jump to end of line.</p>\n"},{"tags":[],"owner":{"account_id":1111160,"reputation":12198,"user_id":1101602,"accept_rate":69,"display_name":"Patrick"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1501090466,"creation_date":1501022993,"answer_id":45314712,"question_id":32487235,"body_markdown":"tl;dr use `Shift`+`Enter`\r\n\r\nThe title of your question asks how to get to the end of a line but in your question you mention wanting to get to the end of a line because automatically inserted characters are preventing you from hitting return to get to the next line.\r\n\r\nAll the other answers only solve half your problem. This command starts a new line and puts your cursor on it regardless of your cursor&#39;s current position in the line:\r\n\r\n`Shift`+`Enter`\r\n\r\nHere&#39;s an example of it being used:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3O5Rb.gif","title":"How to get to the end of a line in android studio","body":"<p>tl;dr use <code>Shift</code>+<code>Enter</code></p>\n\n<p>The title of your question asks how to get to the end of a line but in your question you mention wanting to get to the end of a line because automatically inserted characters are preventing you from hitting return to get to the next line.</p>\n\n<p>All the other answers only solve half your problem. This command starts a new line and puts your cursor on it regardless of your cursor's current position in the line:</p>\n\n<p><code>Shift</code>+<code>Enter</code></p>\n\n<p>Here's an example of it being used:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3O5Rb.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/3O5Rb.gif\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":11929999,"reputation":2524,"user_id":8730140,"display_name":"Simran Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565081469,"creation_date":1565081469,"answer_id":57372290,"question_id":32487235,"body_markdown":"**Shift + End** is the shortcut to move cursor to the end of line.","title":"How to get to the end of a line in android studio","body":"<p><strong>Shift + End</strong> is the shortcut to move cursor to the end of line.</p>\n"},{"tags":[],"owner":{"account_id":5268785,"reputation":590,"user_id":6908061,"display_name":"bomben"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603600000,"creation_date":1603600000,"answer_id":64520345,"question_id":32487235,"body_markdown":"On a Windows Laptop the commands to go to the beginning and end of a line are:\r\n\r\n&lt;kbd&gt;Fn&lt;/kbd&gt; + &lt;kbd&gt;&amp;leftarrow;&lt;/kbd&gt;\r\n\r\n&lt;kbd&gt;Fn&lt;/kbd&gt; + &lt;kbd&gt;&amp;rightarrow;&lt;/kbd&gt;\r\n","title":"How to get to the end of a line in android studio","body":"<p>On a Windows Laptop the commands to go to the beginning and end of a line are:</p>\n<p><kbd>Fn</kbd> + <kbd>←</kbd></p>\n<p><kbd>Fn</kbd> + <kbd>→</kbd></p>\n"},{"tags":[],"owner":{"account_id":1297133,"reputation":79,"user_id":6999308,"display_name":"user1297133"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1613454669,"creation_date":1613454669,"answer_id":66219297,"question_id":32487235,"body_markdown":"This will take you to the end of the line and automatically add a semicolon\r\nCTRL + SHIFT + Enter","title":"How to get to the end of a line in android studio","body":"<p>This will take you to the end of the line and automatically add a semicolon\nCTRL + SHIFT + Enter</p>\n"},{"tags":[],"owner":{"account_id":1115893,"reputation":6122,"user_id":1105214,"accept_rate":69,"display_name":"samus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633713049,"creation_date":1633710314,"answer_id":69499010,"question_id":32487235,"body_markdown":"File &gt; Settings &gt; Keymap (&lt;kbd&gt;Ctl&lt;/kbd&gt;+&lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;S&lt;/kbd&gt;)\r\n\r\n- Type &quot;end&quot; in search\r\n- Locate &quot;Move Caret to Line End&quot; under &quot;Editor Actions&quot;\r\n- Double click assigned mapping (&lt;kbd&gt;End&lt;/kbd&gt;)\r\n- Select &quot;Add Keyboard Shortcut&quot;\r\n\r\n[![enter image description here][1]][1]\r\n\r\nTry some key combinations\r\n\r\n[![enter image description here][2]][2]\r\n\r\nReplace an existing one, or compromise\r\n\r\n[![enter image description here][3]][3]\r\n\r\n**Note**: Remapping &quot;Move Caret to Next Word&quot; may also help (i.e. for hopping over closing parentheses).\r\n\r\n  [1]: https://i.stack.imgur.com/Hwk9Y.png\r\n  [2]: https://i.stack.imgur.com/WHueh.png\r\n  [3]: https://i.stack.imgur.com/59vbW.png","title":"How to get to the end of a line in android studio","body":"<p>File &gt; Settings &gt; Keymap (<kbd>Ctl</kbd>+<kbd>Alt</kbd>+<kbd>S</kbd>)</p>\n<ul>\n<li>Type &quot;end&quot; in search</li>\n<li>Locate &quot;Move Caret to Line End&quot; under &quot;Editor Actions&quot;</li>\n<li>Double click assigned mapping (<kbd>End</kbd>)</li>\n<li>Select &quot;Add Keyboard Shortcut&quot;</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/Hwk9Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hwk9Y.png\" alt=\"enter image description here\" /></a></p>\n<p>Try some key combinations</p>\n<p><a href=\"https://i.stack.imgur.com/WHueh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WHueh.png\" alt=\"enter image description here\" /></a></p>\n<p>Replace an existing one, or compromise</p>\n<p><a href=\"https://i.stack.imgur.com/59vbW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/59vbW.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Note</strong>: Remapping &quot;Move Caret to Next Word&quot; may also help (i.e. for hopping over closing parentheses).</p>\n"}],"owner":{"account_id":4548085,"reputation":2786,"user_id":3694016,"accept_rate":100,"display_name":"chaosifier"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8569,"favorite_count":0,"down_vote_count":5,"up_vote_count":9,"accepted_answer_id":45314712,"answer_count":8,"score":4,"last_activity_date":1633713049,"creation_date":1441825043,"question_id":32487235,"body_markdown":"Is there a way to get the cursor to the end of the current line? That is, without using the End key, Ctrl + Left/Right or the mouse. It&#39;s time consuming to get to the end of the line when there&#39;s some code after the cursor.\r\neg.\r\n\r\nIn a strings.xml file, the &lt;/string&gt; end tag is automatically generated and after inserting the value in between the tags, how would one get to the end of that line in order to press return and go to the new line?\r\n\r\n    &lt;string name=&quot;hello_world&quot;&gt; Hello World | &lt;/string&gt;\r\n\r\nhere, &quot;|&quot; = cursor\r\n\r\nSimilarly, despite android-studio&#39;s smart code auto-completion feature, it&#39;s common to get stuck behind a semi-colon/pair of parenthesis. In such cases, is there a quicker way to get to the end of the statement/block?","title":"How to get to the end of a line in android studio","body":"<p>Is there a way to get the cursor to the end of the current line? That is, without using the End key, Ctrl + Left/Right or the mouse. It's time consuming to get to the end of the line when there's some code after the cursor.\neg.</p>\n\n<p>In a strings.xml file, the  end tag is automatically generated and after inserting the value in between the tags, how would one get to the end of that line in order to press return and go to the new line?</p>\n\n<pre><code>&lt;string name=\"hello_world\"&gt; Hello World | &lt;/string&gt;\n</code></pre>\n\n<p>here, \"|\" = cursor</p>\n\n<p>Similarly, despite android-studio's smart code auto-completion feature, it's common to get stuck behind a semi-colon/pair of parenthesis. In such cases, is there a quicker way to get to the end of the statement/block?</p>\n"},{"tags":["java","reactive-programming","project-reactor","reactor"],"comments":[{"owner":{"account_id":12206189,"reputation":5872,"user_id":8909235,"display_name":"lkatiforis"},"score":1,"creation_date":1633657815,"post_id":69488153,"comment_id":122824286,"body_markdown":"Can you share  `isBlacklistedToken()`?  Maybe, retrying inside `isBlacklistedToken()` using `RetrySpec` is better option.","body":"Can you share  <code>isBlacklistedToken()</code>?  Maybe, retrying inside <code>isBlacklistedToken()</code> using <code>RetrySpec</code> is better option."},{"owner":{"account_id":15390740,"reputation":186,"user_id":11103550,"display_name":"Mauricio"},"score":0,"creation_date":1633706340,"post_id":69488153,"comment_id":122839380,"body_markdown":"Added the method you asked. Also, gonna learn about that RetrySpec","body":"Added the method you asked. Also, gonna learn about that RetrySpec"}],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1633712858,"creation_date":1633646352,"answer_id":69488583,"question_id":69488153,"body_markdown":"I would suggest the following:\r\n```java\r\nreturn isBlacklistedToken(refreshToken, Boolean.TRUE)                 \r\n    .filter(isBlacklisted -&gt; !isBlacklisted)                 \r\n    .flatMap(isBlacklisted -&gt; isBlacklistedToken(accessToken, Boolean.FALSE))                 \r\n    .filter(isBlacklisted -&gt; !isBlacklisted)                 \r\n    .flatMap(isBlacklisted -&gt; blacklistTokens(username, refreshToken, accessToken))                 \r\n    .switchIfEmpty(Mono.error(new UnauthorizedException(format(&quot;The user %s has already logged out.&quot;, username))));\r\n```\r\n\r\nSorry if there is some compile error but I tried this in Kotlin and needed to translate it to Java, which is become less and less easy.","title":"Reactive - Improve Mono syntax","body":"<p>I would suggest the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>return isBlacklistedToken(refreshToken, Boolean.TRUE)                 \n    .filter(isBlacklisted -&gt; !isBlacklisted)                 \n    .flatMap(isBlacklisted -&gt; isBlacklistedToken(accessToken, Boolean.FALSE))                 \n    .filter(isBlacklisted -&gt; !isBlacklisted)                 \n    .flatMap(isBlacklisted -&gt; blacklistTokens(username, refreshToken, accessToken))                 \n    .switchIfEmpty(Mono.error(new UnauthorizedException(format(&quot;The user %s has already logged out.&quot;, username))));\n</code></pre>\n<p>Sorry if there is some compile error but I tried this in Kotlin and needed to translate it to Java, which is become less and less easy.</p>\n"}],"owner":{"account_id":15390740,"reputation":186,"user_id":11103550,"display_name":"Mauricio"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69488583,"answer_count":1,"score":0,"last_activity_date":1633712858,"creation_date":1633642787,"question_id":69488153,"body_markdown":"I have this block of code that works fine:\r\n\r\n    return isBlacklistedToken(refreshToken, Boolean.TRUE).flatMap(isBlacklisted -&gt; {\r\n        if (isBlacklisted)\r\n            return Mono.error(new UnauthorizedException(format(&quot;The user %s has already logged out.&quot;, username)));\r\n        else\r\n            return isBlacklistedToken(accessToken, Boolean.FALSE).flatMap(isABlacklisted -&gt; {\r\n                if (isABlacklisted)\r\n                    return Mono.error(new UnauthorizedException(format(&quot;The user %s has already logged out.&quot;, username)));\r\n                else\r\n                    return blacklistTokens(username, refreshToken, accessToken);\r\n            });\r\n    });\r\n\r\nTo summarize it:\r\n- calls the `isBlacklistedToken` function (returns a `Mono&lt;Boolean&gt;` with the result of the refresh token)\r\n- If the `refresh` token is blacklisted, throws an `UnauthorizedException`\r\n- If the `refresh` token is not blacklisted, does the same process for the `access` token\r\n- If both tokens are not blacklisted, finally blacklists them.\r\n\r\nThis syntax, while it works, seems a bit sloppy. Is there a way to improve that? I wrote this piece of code, and while it throws an exception, the last part (blacklisting the tokens) always executes - peraphs my knowledge of reactive programming is a bit off.\r\n\r\n    return isBlacklistedToken(refreshToken, Boolean.TRUE)\r\n                    .flatMap(isBlacklisted -&gt; isBlacklisted ? Mono.error(new UnauthorizedException(format(&quot;The user %s has already logged out.&quot;, username))) : Mono.empty())\r\n                    .then(isBlacklistedToken(accessToken, Boolean.FALSE))\r\n                    .flatMap(isBlacklisted -&gt; isBlacklisted ? Mono.error(new UnauthorizedException(format(&quot;The user %s has already logged out.&quot;, username))) : Mono.empty())\r\n                    .then(blacklistTokens(username, refreshToken, accessToken));\r\n\r\nEdit: adding the `isBlacklistedToken` method\r\n\r\n    private Mono&lt;Boolean&gt; isBlacklistedToken(final String token, final Boolean type) {\r\n    \r\n            return blacklistService.isBlacklisted(token, type);\r\n        }\r\n\r\nand the respective `blacklistService` call (just a repository call, really simple)\r\n\r\n    public Mono&lt;Boolean&gt; isBlacklisted(final String token, final Boolean isRefresh) {\r\n            return Mono.just(this.blacklistRepository.existsBlacklistByTokenAndIsRefresh(token, isRefresh));\r\n        }","title":"Reactive - Improve Mono syntax","body":"<p>I have this block of code that works fine:</p>\n<pre><code>return isBlacklistedToken(refreshToken, Boolean.TRUE).flatMap(isBlacklisted -&gt; {\n    if (isBlacklisted)\n        return Mono.error(new UnauthorizedException(format(&quot;The user %s has already logged out.&quot;, username)));\n    else\n        return isBlacklistedToken(accessToken, Boolean.FALSE).flatMap(isABlacklisted -&gt; {\n            if (isABlacklisted)\n                return Mono.error(new UnauthorizedException(format(&quot;The user %s has already logged out.&quot;, username)));\n            else\n                return blacklistTokens(username, refreshToken, accessToken);\n        });\n});\n</code></pre>\n<p>To summarize it:</p>\n<ul>\n<li>calls the <code>isBlacklistedToken</code> function (returns a <code>Mono&lt;Boolean&gt;</code> with the result of the refresh token)</li>\n<li>If the <code>refresh</code> token is blacklisted, throws an <code>UnauthorizedException</code></li>\n<li>If the <code>refresh</code> token is not blacklisted, does the same process for the <code>access</code> token</li>\n<li>If both tokens are not blacklisted, finally blacklists them.</li>\n</ul>\n<p>This syntax, while it works, seems a bit sloppy. Is there a way to improve that? I wrote this piece of code, and while it throws an exception, the last part (blacklisting the tokens) always executes - peraphs my knowledge of reactive programming is a bit off.</p>\n<pre><code>return isBlacklistedToken(refreshToken, Boolean.TRUE)\n                .flatMap(isBlacklisted -&gt; isBlacklisted ? Mono.error(new UnauthorizedException(format(&quot;The user %s has already logged out.&quot;, username))) : Mono.empty())\n                .then(isBlacklistedToken(accessToken, Boolean.FALSE))\n                .flatMap(isBlacklisted -&gt; isBlacklisted ? Mono.error(new UnauthorizedException(format(&quot;The user %s has already logged out.&quot;, username))) : Mono.empty())\n                .then(blacklistTokens(username, refreshToken, accessToken));\n</code></pre>\n<p>Edit: adding the <code>isBlacklistedToken</code> method</p>\n<pre><code>private Mono&lt;Boolean&gt; isBlacklistedToken(final String token, final Boolean type) {\n\n        return blacklistService.isBlacklisted(token, type);\n    }\n</code></pre>\n<p>and the respective <code>blacklistService</code> call (just a repository call, really simple)</p>\n<pre><code>public Mono&lt;Boolean&gt; isBlacklisted(final String token, final Boolean isRefresh) {\n        return Mono.just(this.blacklistRepository.existsBlacklistByTokenAndIsRefresh(token, isRefresh));\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","maven"],"answers":[{"tags":[],"owner":{"account_id":1362416,"reputation":4479,"user_id":1299533,"display_name":"Scott Frederick"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1633712247,"creation_date":1633712247,"answer_id":69499373,"question_id":69492850,"body_markdown":"Enabling the layering feature of the Spring Boot Maven plugin does not change the layout of the generated jar file. It does enable the generation of a `layers.idx` file that describes how the application is layered, as described in the [Spring Boot documentation][1]. \r\n\r\nYou can use the `layertools` mode of the generated jar to extract the contents of the jar into a layered structure. See the [Dockerfile example in the documentation][2] for more information on how this works. \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.container-images.layering\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.container-images.building.dockerfiles","title":"Spring boot maven plugin: mvn clean package does not layered jar file automatically","body":"<p>Enabling the layering feature of the Spring Boot Maven plugin does not change the layout of the generated jar file. It does enable the generation of a <code>layers.idx</code> file that describes how the application is layered, as described in the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.container-images.layering\" rel=\"nofollow noreferrer\">Spring Boot documentation</a>.</p>\n<p>You can use the <code>layertools</code> mode of the generated jar to extract the contents of the jar into a layered structure. See the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.container-images.building.dockerfiles\" rel=\"nofollow noreferrer\">Dockerfile example in the documentation</a> for more information on how this works.</p>\n"}],"owner":{"account_id":22959627,"reputation":13,"user_id":17089722,"display_name":"AskMeSomething"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":540,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69499373,"answer_count":1,"score":1,"last_activity_date":1633712247,"creation_date":1633681996,"question_id":69492850,"body_markdown":"I got trouble with spring-boot-maven-plugin build process. I just want to build \r\n\r\nexcutable &quot;**layered**&quot; jar file for optimizing docker image. As document said this build process will produce layered jar by default https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/. Here is apart of my pom.xml file\r\n\r\n    &lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;layers&gt;\r\n\t\t\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t\t&lt;/layers&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\nI used spring boot 2.5.5, maven 3.6.3 &lt;br /&gt; \r\nSome steps produce:\r\n\r\n&gt; mvn clean package &lt;br /&gt; \r\n&gt; jar -tf target/[excutableJarFile].jar\r\n\r\n This filesystem of excutableJarFile is just BOOT-INF, META-INF and org although it should be \r\n\r\n 1. dependencies \r\n 2. spring-boot-loader\r\n 3. snapshot-dependencies\r\n 4. application","title":"Spring boot maven plugin: mvn clean package does not layered jar file automatically","body":"<p>I got trouble with spring-boot-maven-plugin build process. I just want to build</p>\n<p>excutable &quot;<strong>layered</strong>&quot; jar file for optimizing docker image. As document said this build process will produce layered jar by default <a href=\"https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/</a>. Here is apart of my pom.xml file</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;layers&gt;\n                    &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;/layers&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>I used spring boot 2.5.5, maven 3.6.3 <br />\nSome steps produce:</p>\n<blockquote>\n<p>mvn clean package <br />\njar -tf target/[excutableJarFile].jar</p>\n</blockquote>\n<p>This filesystem of excutableJarFile is just BOOT-INF, META-INF and org although it should be</p>\n<ol>\n<li>dependencies</li>\n<li>spring-boot-loader</li>\n<li>snapshot-dependencies</li>\n<li>application</li>\n</ol>\n"},{"tags":["java","antlr4"],"answers":[{"tags":[],"owner":{"account_id":27816,"reputation":6650,"user_id":73764,"accept_rate":91,"display_name":"Mike Cargal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1633711067,"creation_date":1633651242,"answer_id":69489036,"question_id":69488835,"body_markdown":"Try\r\n\r\n```\r\n.\\grun Java compilationUnit -gui &lt; HellowWorld.java \r\n```\r\n\r\n(not positive re: the syntax of piping HellowWorld.java to lysin in PowerShell)\r\n\r\ngrun wants the grammarName (`Java` in your case), then the start rule (`compilationUnit` for the Java Parser if you want to parse a *.java source file)\r\n\r\nReferencing the Lexer grammar name and using `tokens` as the &quot;start rule&quot; is a special case that only works with the -tokens options to tokenize the input stream and dump the tokens. ","title":"How do I run antlr4 on a Java file in the commandline?","body":"<p>Try</p>\n<pre><code>.\\grun Java compilationUnit -gui &lt; HellowWorld.java \n</code></pre>\n<p>(not positive re: the syntax of piping HellowWorld.java to lysin in PowerShell)</p>\n<p>grun wants the grammarName (<code>Java</code> in your case), then the start rule (<code>compilationUnit</code> for the Java Parser if you want to parse a *.java source file)</p>\n<p>Referencing the Lexer grammar name and using <code>tokens</code> as the &quot;start rule&quot; is a special case that only works with the -tokens options to tokenize the input stream and dump the tokens.</p>\n"}],"owner":{"account_id":13216518,"reputation":19,"user_id":9544853,"display_name":"Parker Browne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":406,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1633711990,"creation_date":1633649225,"question_id":69488835,"body_markdown":"I&#39;m trying to use antlr to get the AST of a given java file. I&#39;ve run antlr4 on both the JavaLexer.g4 and the JavaParser.g4 to generate everything but I&#39;m trying to use grun to see the tree from a java file. I&#39;ve tried commands like this ` .\\grun JavaLexer tokens HelloWorld.java -gui` but get nothing back.\r\n\r\nI&#39;m confused on if I need to be calling the JavaLexer, the JavaParser or if I completely have the command wrong in every way.\r\nI&#39;m using PowerShell if that matters.\r\n\r\n(edit) the correct powershell command is: ` .\\grun Java compilationUnit HelloWorld.java -gui ` Thanks for the help!","title":"How do I run antlr4 on a Java file in the commandline?","body":"<p>I'm trying to use antlr to get the AST of a given java file. I've run antlr4 on both the JavaLexer.g4 and the JavaParser.g4 to generate everything but I'm trying to use grun to see the tree from a java file. I've tried commands like this <code> .\\grun JavaLexer tokens HelloWorld.java -gui</code> but get nothing back.</p>\n<p>I'm confused on if I need to be calling the JavaLexer, the JavaParser or if I completely have the command wrong in every way.\nI'm using PowerShell if that matters.</p>\n<p>(edit) the correct powershell command is: <code>.\\grun Java compilationUnit HelloWorld.java -gui</code> Thanks for the help!</p>\n"},{"tags":["java","maven","apache-nifi"],"comments":[{"owner":{"account_id":18294530,"reputation":11,"user_id":13320707,"display_name":"Phillip Steyn"},"score":0,"creation_date":1629732870,"post_id":68895150,"comment_id":121758918,"body_markdown":"Answer here : https://stackoverflow.com/questions/67570165/error-during-the-creating-of-custom-processors-apache-nifi","body":"Answer here : <a href=\"https://stackoverflow.com/questions/67570165/error-during-the-creating-of-custom-processors-apache-nifi\" title=\"error during the creating of custom processors apache nifi\">stackoverflow.com/questions/67570165/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":10966656,"reputation":176,"user_id":8058202,"display_name":"PraveenKumar K G"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633711543,"creation_date":1633711543,"answer_id":69499235,"question_id":68895150,"body_markdown":"Try with upgrading groovy version to 2.5.6 as below\r\n&lt;nifi.groovy.version&gt;2.5.6&lt;/nifi.groovy.version&gt; in pom.xml","title":"Error when trying to build nifi-maven project","body":"<p>Try with upgrading groovy version to 2.5.6 as below\n&lt;nifi.groovy.version&gt;2.5.6&lt;/nifi.groovy.version&gt; in pom.xml</p>\n"}],"owner":{"account_id":18294530,"reputation":11,"user_id":13320707,"display_name":"Phillip Steyn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":282,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1633711543,"creation_date":1629732193,"question_id":68895150,"body_markdown":"Running on a mac, I&#39;m trying to add a simple nar to a nifi install.\r\nFollowing instructions found on [here][1], I use mvn generate to start the nifi processor project. I then immediately run mvn clean install, without making any changes, to create the nar package but I keep running into this error\r\n\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:testCompile (groovy-tests) on project test.test: Execution groovy-tests of goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:testCompile failed: Plugin org.apache.maven.plugins:maven-compiler-plugin:3.8.1 or one of its dependencies could not be resolved: Failed to collect dependencies at org.apache.maven.plugins:maven-compiler-plugin:jar:3.8.1 -&gt; org.codehaus.groovy:groovy-eclipse-batch:jar:2.5.4-01: Failed to read artifact descriptor for org.codehaus.groovy:groovy-eclipse-batch:jar:2.5.4-01: Could not transfer artifact org.codehaus.groovy:groovy-eclipse-batch:pom:2.5.4-01 from/to bintray (https://dl.bintray.com/groovy/maven): authorization failed for https://dl.bintray.com/groovy/maven/org/codehaus/groovy/groovy-eclipse-batch/2.5.4-01/groovy-eclipse-batch-2.5.4-01.pom, status: 403 Forbidden -&gt; [Help 1]\r\n\r\n\r\n  [1]: https://itnext.io/deep-dive-into-a-custom-apache-nifi-processor-c2191e4f89a0","title":"Error when trying to build nifi-maven project","body":"<p>Running on a mac, I'm trying to add a simple nar to a nifi install.\nFollowing instructions found on <a href=\"https://itnext.io/deep-dive-into-a-custom-apache-nifi-processor-c2191e4f89a0\" rel=\"nofollow noreferrer\">here</a>, I use mvn generate to start the nifi processor project. I then immediately run mvn clean install, without making any changes, to create the nar package but I keep running into this error</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:testCompile (groovy-tests) on project test.test: Execution groovy-tests of goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:testCompile failed: Plugin org.apache.maven.plugins:maven-compiler-plugin:3.8.1 or one of its dependencies could not be resolved: Failed to collect dependencies at org.apache.maven.plugins:maven-compiler-plugin:jar:3.8.1 -&gt; org.codehaus.groovy:groovy-eclipse-batch:jar:2.5.4-01: Failed to read artifact descriptor for org.codehaus.groovy:groovy-eclipse-batch:jar:2.5.4-01: Could not transfer artifact org.codehaus.groovy:groovy-eclipse-batch:pom:2.5.4-01 from/to bintray (https://dl.bintray.com/groovy/maven): authorization failed for https://dl.bintray.com/groovy/maven/org/codehaus/groovy/groovy-eclipse-batch/2.5.4-01/groovy-eclipse-batch-2.5.4-01.pom, status: 403 Forbidden -&gt; [Help 1]\n</code></pre>\n"},{"tags":["java","environment-variables","antlr","antlr4"],"owner":{"account_id":15053697,"reputation":45,"user_id":15171060,"display_name":"emilysmyth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1633711344,"creation_date":1633711344,"question_id":69499190,"body_markdown":"I have copied off of this tutorial for installing antlr4. When i run it in cmd on windows antlr it runs in a continuous loop like so\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hWwgE.png\r\n\r\n\r\nand when I run &quot;grun&quot; I get: \r\n\r\n    &#39;org.antlr.v4.runtime.misc.TestRig&#39; is not recognized as an internal or external command,\r\n    operable program or batch file.\r\n\r\nI&#39;m not sure where I&#39;m going wrong as i&#39;ve followed all the tutorials correctly","title":"Antlr4 installation errors","body":"<p>I have copied off of this tutorial for installing antlr4. When i run it in cmd on windows antlr it runs in a continuous loop like so</p>\n<p><a href=\"https://i.stack.imgur.com/hWwgE.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>and when I run &quot;grun&quot; I get:</p>\n<pre><code>'org.antlr.v4.runtime.misc.TestRig' is not recognized as an internal or external command,\noperable program or batch file.\n</code></pre>\n<p>I'm not sure where I'm going wrong as i've followed all the tutorials correctly</p>\n"},{"tags":["java","android","location","arcore"],"answers":[{"tags":[],"owner":{"account_id":133209,"reputation":24579,"user_id":334402,"accept_rate":50,"display_name":"Mick"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633711244,"creation_date":1542624375,"answer_id":53372942,"question_id":53371583,"body_markdown":"The code below will draw a line between two points - the points are associated with anchors in Sceneform - this is adapted from the answer here https://stackoverflow.com/a/52816504/334402:\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    private void drawLine(AnchorNode node1, AnchorNode node2) {\r\n          //Draw a line between two AnchorNodes\r\n            Log.d(TAG,&quot;drawLine&quot;);\r\n            Vector3 point1, point2;\r\n            point1 = node1.getWorldPosition();\r\n            point2 = node2.getWorldPosition();\r\n\r\n\r\n            //First, find the vector extending between the two points and define a look rotation\r\n            //in terms of this Vector.\r\n            final Vector3 difference = Vector3.subtract(point1, point2);\r\n            final Vector3 directionFromTopToBottom = difference.normalized();\r\n            final Quaternion rotationFromAToB =\r\n                    Quaternion.lookRotation(directionFromTopToBottom, Vector3.up());\r\n            MaterialFactory.makeOpaqueWithColor(getApplicationContext(), new Color(0, 255, 244))\r\n                    .thenAccept(\r\n                            material -&gt; {\r\n                                /* Then, create a rectangular prism, using ShapeFactory.makeCube() and use the difference vector\r\n                                       to extend to the necessary length.  */\r\n                                Log.d(TAG,&quot;drawLine insie .thenAccept&quot;);\r\n                                ModelRenderable model = ShapeFactory.makeCube(\r\n                                        new Vector3(.01f, .01f, difference.length()),\r\n                                        Vector3.zero(), material);\r\n                                /* Last, set the world rotation of the node to the rotation calculated earlier and set the world position to\r\n                                       the midpoint between the given points . */\r\n                                Anchor lineAnchor = node2.getAnchor();\r\n                                nodeForLine = new Node();\r\n                                nodeForLine.setParent(node1);\r\n                                nodeForLine.setRenderable(model);\r\n                                nodeForLine.setWorldPosition(Vector3.add(point1, point2).scaled(.5f));\r\n                                nodeForLine.setWorldRotation(rotationFromAToB);\r\n                            }\r\n                    );\r\n\r\n        }\r\n\r\n**Update**: Full working example available here:  \r\n - https://github.com/mickod/LineView","title":"Draw line between location markers in ArCore?","body":"<p>The code below will draw a line between two points - the points are associated with anchors in Sceneform - this is adapted from the answer here <a href=\"https://stackoverflow.com/a/52816504/334402\">https://stackoverflow.com/a/52816504/334402</a>:</p>\n<pre class=\"lang-js prettyprint-override\"><code>private void drawLine(AnchorNode node1, AnchorNode node2) {\n      //Draw a line between two AnchorNodes\n        Log.d(TAG,&quot;drawLine&quot;);\n        Vector3 point1, point2;\n        point1 = node1.getWorldPosition();\n        point2 = node2.getWorldPosition();\n\n\n        //First, find the vector extending between the two points and define a look rotation\n        //in terms of this Vector.\n        final Vector3 difference = Vector3.subtract(point1, point2);\n        final Vector3 directionFromTopToBottom = difference.normalized();\n        final Quaternion rotationFromAToB =\n                Quaternion.lookRotation(directionFromTopToBottom, Vector3.up());\n        MaterialFactory.makeOpaqueWithColor(getApplicationContext(), new Color(0, 255, 244))\n                .thenAccept(\n                        material -&gt; {\n                            /* Then, create a rectangular prism, using ShapeFactory.makeCube() and use the difference vector\n                                   to extend to the necessary length.  */\n                            Log.d(TAG,&quot;drawLine insie .thenAccept&quot;);\n                            ModelRenderable model = ShapeFactory.makeCube(\n                                    new Vector3(.01f, .01f, difference.length()),\n                                    Vector3.zero(), material);\n                            /* Last, set the world rotation of the node to the rotation calculated earlier and set the world position to\n                                   the midpoint between the given points . */\n                            Anchor lineAnchor = node2.getAnchor();\n                            nodeForLine = new Node();\n                            nodeForLine.setParent(node1);\n                            nodeForLine.setRenderable(model);\n                            nodeForLine.setWorldPosition(Vector3.add(point1, point2).scaled(.5f));\n                            nodeForLine.setWorldRotation(rotationFromAToB);\n                        }\n                );\n\n    }\n</code></pre>\n<p><strong>Update</strong>: Full working example available here:</p>\n<ul>\n<li><a href=\"https://github.com/mickod/LineView\" rel=\"nofollow noreferrer\">https://github.com/mickod/LineView</a></li>\n</ul>\n"}],"owner":{"account_id":13907376,"reputation":19,"user_id":10041406,"display_name":"Filip Kojic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1651,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1633711244,"creation_date":1542619454,"question_id":53371583,"body_markdown":"Is there a possibility to connect two marker locations with a line? I have two location marker:\r\n\r\n    LocationMarker point1 = new LocationMarker(\r\n        20.501925,\r\n        44.792181,\r\n        new AnnotationRenderer(&quot;point1 &quot;)\r\n    );\r\n    \r\n    LocationMarker point2 = new LocationMarker(\r\n            20.502972,\r\n            44.790873,\r\n            new AnnotationRenderer(&quot;point2 &quot;)\r\n    );\r\n\r\nAny example? I use [ArCore Location][1]\r\n\r\n\r\n  [1]: https://github.com/appoly/ARCore-Location","title":"Draw line between location markers in ArCore?","body":"<p>Is there a possibility to connect two marker locations with a line? I have two location marker:</p>\n\n<pre><code>LocationMarker point1 = new LocationMarker(\n    20.501925,\n    44.792181,\n    new AnnotationRenderer(\"point1 \")\n);\n\nLocationMarker point2 = new LocationMarker(\n        20.502972,\n        44.790873,\n        new AnnotationRenderer(\"point2 \")\n);\n</code></pre>\n\n<p>Any example? I use <a href=\"https://github.com/appoly/ARCore-Location\" rel=\"nofollow noreferrer\">ArCore Location</a></p>\n"},{"tags":["java","csv","testing","hashmap"],"comments":[{"owner":{"account_id":8515167,"reputation":5100,"user_id":6383857,"display_name":"StaticBeagle"},"score":0,"creation_date":1633703883,"post_id":69496881,"comment_id":122838298,"body_markdown":"You are instantiating a map `Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();`\n but you are not adding any values to the `map` before you pass it to `csv.reportMKTWireToOutputIRS(data, mkt, writeCSV,map);`.  \nMaybe `initMap(...)` should take a map as a parameter instead of creating a new one?","body":"You are instantiating a map <code>Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();</code>  but you are not adding any values to the <code>map</code> before you pass it to <code>csv.reportMKTWireToOutputIRS(data, mkt, writeCSV,map);</code>.   Maybe <code>initMap(...)</code> should take a map as a parameter instead of creating a new one?"}],"answers":[{"tags":[],"owner":{"account_id":22981040,"reputation":1,"user_id":17107956,"display_name":"Gokul Raj G S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633711178,"creation_date":1633711178,"answer_id":69499163,"question_id":69496881,"body_markdown":"You are having one map and you are calling the initMap method which sets the value for all keys in the map within a loop, in the end it will have either &quot;ok&quot; or &quot;not ok&quot; based on your final loop validation. ","title":"How can I get values from a hashMap dynamically - Java","body":"<p>You are having one map and you are calling the initMap method which sets the value for all keys in the map within a loop, in the end it will have either &quot;ok&quot; or &quot;not ok&quot; based on your final loop validation.</p>\n"}],"owner":{"account_id":22139534,"reputation":73,"user_id":16389773,"display_name":"Bruno Lorena"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1633711178,"creation_date":1633700729,"question_id":69496881,"body_markdown":"I am working with HashMap and don&#39;t have much experience yet.\r\n\r\nI am trying to write a csvFile for proof of a comparison between two lists. \r\nIf the compared value is the same **ok** otherwise **not ok**.\r\n\r\nSimple, but the values &quot;ok&quot; or &quot;not ok&quot; need to be changed automatically, so it was suggested to me to use HashMap where I put the name of the compared field which is the key and the value will be its state (ok or not ok).\r\n\r\nSo far the values are returned and the file is written, but the status does not fill in automatically.\r\n\r\n\r\nThis is my code so far, if anyone knows how I can do it or has other suggestions please let me know.\r\n\r\n```\r\nHashMap\r\n\r\npublic static Map&lt;String, String&gt; initMap(String status) {\r\n\t\t Map&lt;String, String&gt; mapFields = new HashMap&lt;String, String&gt;();\r\n\t\t \r\n\t\t mapFields.put(&quot;Book Ref&quot;, status);\r\n\t\t mapFields.put(&quot;Trade Date&quot;, status);\r\n\t\t mapFields.put(&quot;Start Date&quot;, status);\r\n\t\t mapFields.put(&quot;End Date&quot;, status);\r\n\t\t mapFields.put(&quot;Period Multiplier&quot;, status);\r\n\t\t mapFields.put(&quot;Notional&quot;, status);\r\n\t\t mapFields.put(&quot;Currency&quot;, status);\r\n\t\t mapFields.put(&quot;Rate&quot;, status);\r\n\t\t mapFields.put(&quot;Frequency Multiplier&quot;, status);\r\n\t\t mapFields.put(&quot;Day count&quot;, status);\r\n\t\t \r\n\t\treturn mapFields;\r\n \r\n\t}\r\n```\r\n\r\nHere in the same class, I created this method to compare two lists and define if it is ok or not.\r\n```\r\npublic static void compareValues(List&lt;String&gt; inputs, List&lt;String&gt; outputs, XrayFields fields, TradeData data, MKTWireIRS mkt) throws ParseException, InterruptedException {\r\n\t\tint y = 0;\r\n\t\tint x = 0;\r\n\t\t\r\n\t\tMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\r\n\t//\t List&lt;WriterCSV&gt; writeCSV = new ArrayList&lt;&gt;();\r\n\t\t WriterCSV cv = new WriterCSV();\r\n\t\t \r\n\t\ttry {\r\n\t\t\tfor (String input : inputs) {\t\r\n\t\t\t\tfor (String out : outputs) {\r\n\t\t\t\t\t cv = new WriterCSV();\r\n\t\t\t\t\t map = new HashMap&lt;String, String&gt;();\r\n\t\t\t\t\tif (y == x) {\r\n\t\t\t\t\t\tif (input.equals(out)) {\r\n\t\t\t\t\t\t\tSystem.out.println(&quot;ok: &quot; + input + &quot; = &quot; + out);\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tString comment = &quot;All fields checked are ok&quot;;\r\n\t\t\t\t\t\t\tfields.setComment(comment);\r\n\t\t\t\t\t\t\tfields.setStatus(&quot;PASS&quot;);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tcv.setOk(&quot;Ok&quot;);\r\n\t\t\t\t\t\t\tmap = initMap(cv.getOk());\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tSystem.out.println(&quot;not ok: &quot; + input + &quot; = &quot; + out);\r\n\t\t\t\t\t\t\tfields.setStatus(&quot;FAIL&quot;);\r\n\t\t\t\t\t\t\tString comment = &quot;The value &quot; + input + &quot; is not the same as &quot; + out;\r\n\t\t\t\t\t\t\tfields.setComment(comment);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tcv.setOk(&quot;not Ok&quot;);\r\n\t\t\t\t\t\t\tmap = initMap(cv.getOk());\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tx = x + 1; // count of the list of output\r\n\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ty = y + 1; // count of the list of inputs\r\n\t\t\t\tx = 0; // reset to 0 the count of outputs\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//create evidence of comparison\r\n\t\t\t cv.reportMKTWireToOutputIRS(data, mkt, map);\r\n\t\t\t\t\t\t\r\n\t\t} catch (Error e) {\r\n\t\t\tSystem.out.println(e);\r\n\t\t}\r\n\t}\r\n```\r\n\r\nThis is the method for writing the csv. \r\n```\r\npublic void reportMKTWireToOutputIRS(TradeData data2, MKTWireIRS mkt, Map&lt;String, String&gt; map ) throws ParseException, InterruptedException {\r\n\t\ttry {\r\n\t\t\tFileWriter fw = new FileWriter(new File(CSV_MKTWire + Setup.IRScsv));\r\n\t\t\tCSVWriter cw = new CSVWriter(fw);\r\n\t\t\t\r\n\t\t\t//format values\r\n\t\t\tString month = PropertyNames.deCapitalize(data2.getPeriod());\r\n\t\t\tString monthReset = PropertyNames.deCapitalize(data2.getResetFrequencyPeriod());\r\n\t\t\tString formatTradeDateMKT = Utils.formatDateToCompareMKTWire(data2.getTradeDateIRS());\r\n\t\t\tString formatStartDateMKT = Utils.formatDateToCompareMKTWire(data2.getStart_Date());\r\n\t\t\tString formatMAturityDateMKT = Utils.formatDateToCompareMKTWire(data2.getMaturity_Date());\r\n\t\t\tString rateActual = Utils.roundDecimal(data2.getRateIRS());\r\n\t\t\tString rateFormat = Utils.roundRateMKTwire(mkt.getRateIRS());\r\n\t\t\tString notionalFormat = data2.getNotional().charAt(0) + &quot;M&quot;;\r\n\r\n\t\t\tString[] headers = { &quot;Output Field&quot;, &quot;Output Value&quot;, &quot; MKTWire Field&quot;, &quot; MKTWire Value&quot;, &quot;Status&quot; };\r\n\t\t\tList&lt;String[]&gt; data = new ArrayList&lt;String[]&gt;();\r\n\r\n\t\t\t\tString[] book = { &quot;Book Ref&quot;, data2.getBookRef() + data2.getBookType(),&quot;Book MKTWire&quot;,mkt.getBookIRS(), map.get(&quot;Book Ref&quot;)};\r\n\t\t\t\tString[] tradeDate = { &quot;Trade Date&quot;, formatTradeDateMKT,&quot;Trade Date MKTWire&quot;,mkt.getTradeDateIRS(), map.get(&quot;Trade Date&quot;)};\r\n\t\t\t\tString[] startDate = { &quot;Start Date&quot;, formatStartDateMKT, &quot;Start Date MKTWire&quot;,mkt.getStartDate(), map.get(&quot;Start Date&quot;) };\r\n\t\t\t\tString[] maturity = { &quot;End Date&quot;, formatMAturityDateMKT, &quot;End Date MKTWire&quot;,mkt.getEndDate(), map.get(&quot;End Date&quot;) };\r\n\t\t\t\tString[] tenor = { &quot;Period Multiplier&quot;, data2.getPeriodMultiplier() + month, &quot;Tenor MKTWire&quot;,mkt.getTenorIRS(), map.get(&quot;Period Multiplier&quot;) };\r\n\t\t\t\tString[] notional = { &quot;Notional&quot;, notionalFormat, &quot;Notional MKTWire&quot;, mkt.getNotionalValueIRS(), map.get(&quot;Notional&quot;) };\r\n\t\t\t\tString[] currency = { &quot;Currency&quot;, data2.getCurrencyIRS(), &quot;Currency MKTWire&quot;, mkt.getCurrencyIRS(), map.get(&quot;Currency&quot;) };\r\n\t\t\t\tString[] rate = { &quot;Rate&quot;, rateActual, &quot;Rate MKTWire&quot;, rateFormat, map.get(&quot;Rate&quot;) };\r\n\t\t\t\tString[] resetFrequency = { &quot;Frequency Multiplier&quot;, data2.getResetFrequencyMultiplier() + monthReset, &quot;Frequency Multiplier MKTWire&quot;, mkt.getResetFrequencyIRS(),map.get(&quot;Frequency Multiplier&quot;) };\r\n\t\t\t\tString[] dayCount = { &quot;Day Count&quot;, data2.getDayCount(), &quot;Day Count MKTWire&quot;, mkt.getDayCountIRS(), map.get(&quot;Day count&quot;) };\r\n\r\n\t\t\tdata.add(headers);\r\n\t\t\tdata.add(book);\r\n\t\t\tdata.add(tradeDate);\r\n\t\t\tdata.add(startDate);\r\n\t\t\tdata.add(maturity);\r\n\t\t\tdata.add(tenor);\r\n\t\t\tdata.add(notional);\r\n\t\t\tdata.add(currency);\r\n\t\t\tdata.add(rate);\r\n\t\t\tdata.add(resetFrequency);\r\n\t\t\tdata.add(dayCount);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tcw.writeAll(data);\r\n\t\t\tcw.flush();\r\n\t\t\tfw.flush();\r\n\t\t\tcw.close();\r\n\t\t\tfw.close();\r\n\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n```","title":"How can I get values from a hashMap dynamically - Java","body":"<p>I am working with HashMap and don't have much experience yet.</p>\n<p>I am trying to write a csvFile for proof of a comparison between two lists.\nIf the compared value is the same <strong>ok</strong> otherwise <strong>not ok</strong>.</p>\n<p>Simple, but the values &quot;ok&quot; or &quot;not ok&quot; need to be changed automatically, so it was suggested to me to use HashMap where I put the name of the compared field which is the key and the value will be its state (ok or not ok).</p>\n<p>So far the values are returned and the file is written, but the status does not fill in automatically.</p>\n<p>This is my code so far, if anyone knows how I can do it or has other suggestions please let me know.</p>\n<pre><code>HashMap\n\npublic static Map&lt;String, String&gt; initMap(String status) {\n         Map&lt;String, String&gt; mapFields = new HashMap&lt;String, String&gt;();\n         \n         mapFields.put(&quot;Book Ref&quot;, status);\n         mapFields.put(&quot;Trade Date&quot;, status);\n         mapFields.put(&quot;Start Date&quot;, status);\n         mapFields.put(&quot;End Date&quot;, status);\n         mapFields.put(&quot;Period Multiplier&quot;, status);\n         mapFields.put(&quot;Notional&quot;, status);\n         mapFields.put(&quot;Currency&quot;, status);\n         mapFields.put(&quot;Rate&quot;, status);\n         mapFields.put(&quot;Frequency Multiplier&quot;, status);\n         mapFields.put(&quot;Day count&quot;, status);\n         \n        return mapFields;\n \n    }\n</code></pre>\n<p>Here in the same class, I created this method to compare two lists and define if it is ok or not.</p>\n<pre><code>public static void compareValues(List&lt;String&gt; inputs, List&lt;String&gt; outputs, XrayFields fields, TradeData data, MKTWireIRS mkt) throws ParseException, InterruptedException {\n        int y = 0;\n        int x = 0;\n        \n        Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\n    //   List&lt;WriterCSV&gt; writeCSV = new ArrayList&lt;&gt;();\n         WriterCSV cv = new WriterCSV();\n         \n        try {\n            for (String input : inputs) {   \n                for (String out : outputs) {\n                     cv = new WriterCSV();\n                     map = new HashMap&lt;String, String&gt;();\n                    if (y == x) {\n                        if (input.equals(out)) {\n                            System.out.println(&quot;ok: &quot; + input + &quot; = &quot; + out);                       \n                            String comment = &quot;All fields checked are ok&quot;;\n                            fields.setComment(comment);\n                            fields.setStatus(&quot;PASS&quot;);\n                            \n                            cv.setOk(&quot;Ok&quot;);\n                            map = initMap(cv.getOk());\n                            \n                        } else {\n                            System.out.println(&quot;not ok: &quot; + input + &quot; = &quot; + out);\n                            fields.setStatus(&quot;FAIL&quot;);\n                            String comment = &quot;The value &quot; + input + &quot; is not the same as &quot; + out;\n                            fields.setComment(comment);\n                            \n                            cv.setOk(&quot;not Ok&quot;);\n                            map = initMap(cv.getOk());\n\n                        }\n                    }\n                    x = x + 1; // count of the list of output\n\n                }\n                \n                y = y + 1; // count of the list of inputs\n                x = 0; // reset to 0 the count of outputs\n            }\n            \n            //create evidence of comparison\n             cv.reportMKTWireToOutputIRS(data, mkt, map);\n                        \n        } catch (Error e) {\n            System.out.println(e);\n        }\n    }\n</code></pre>\n<p>This is the method for writing the csv.</p>\n<pre><code>public void reportMKTWireToOutputIRS(TradeData data2, MKTWireIRS mkt, Map&lt;String, String&gt; map ) throws ParseException, InterruptedException {\n        try {\n            FileWriter fw = new FileWriter(new File(CSV_MKTWire + Setup.IRScsv));\n            CSVWriter cw = new CSVWriter(fw);\n            \n            //format values\n            String month = PropertyNames.deCapitalize(data2.getPeriod());\n            String monthReset = PropertyNames.deCapitalize(data2.getResetFrequencyPeriod());\n            String formatTradeDateMKT = Utils.formatDateToCompareMKTWire(data2.getTradeDateIRS());\n            String formatStartDateMKT = Utils.formatDateToCompareMKTWire(data2.getStart_Date());\n            String formatMAturityDateMKT = Utils.formatDateToCompareMKTWire(data2.getMaturity_Date());\n            String rateActual = Utils.roundDecimal(data2.getRateIRS());\n            String rateFormat = Utils.roundRateMKTwire(mkt.getRateIRS());\n            String notionalFormat = data2.getNotional().charAt(0) + &quot;M&quot;;\n\n            String[] headers = { &quot;Output Field&quot;, &quot;Output Value&quot;, &quot; MKTWire Field&quot;, &quot; MKTWire Value&quot;, &quot;Status&quot; };\n            List&lt;String[]&gt; data = new ArrayList&lt;String[]&gt;();\n\n                String[] book = { &quot;Book Ref&quot;, data2.getBookRef() + data2.getBookType(),&quot;Book MKTWire&quot;,mkt.getBookIRS(), map.get(&quot;Book Ref&quot;)};\n                String[] tradeDate = { &quot;Trade Date&quot;, formatTradeDateMKT,&quot;Trade Date MKTWire&quot;,mkt.getTradeDateIRS(), map.get(&quot;Trade Date&quot;)};\n                String[] startDate = { &quot;Start Date&quot;, formatStartDateMKT, &quot;Start Date MKTWire&quot;,mkt.getStartDate(), map.get(&quot;Start Date&quot;) };\n                String[] maturity = { &quot;End Date&quot;, formatMAturityDateMKT, &quot;End Date MKTWire&quot;,mkt.getEndDate(), map.get(&quot;End Date&quot;) };\n                String[] tenor = { &quot;Period Multiplier&quot;, data2.getPeriodMultiplier() + month, &quot;Tenor MKTWire&quot;,mkt.getTenorIRS(), map.get(&quot;Period Multiplier&quot;) };\n                String[] notional = { &quot;Notional&quot;, notionalFormat, &quot;Notional MKTWire&quot;, mkt.getNotionalValueIRS(), map.get(&quot;Notional&quot;) };\n                String[] currency = { &quot;Currency&quot;, data2.getCurrencyIRS(), &quot;Currency MKTWire&quot;, mkt.getCurrencyIRS(), map.get(&quot;Currency&quot;) };\n                String[] rate = { &quot;Rate&quot;, rateActual, &quot;Rate MKTWire&quot;, rateFormat, map.get(&quot;Rate&quot;) };\n                String[] resetFrequency = { &quot;Frequency Multiplier&quot;, data2.getResetFrequencyMultiplier() + monthReset, &quot;Frequency Multiplier MKTWire&quot;, mkt.getResetFrequencyIRS(),map.get(&quot;Frequency Multiplier&quot;) };\n                String[] dayCount = { &quot;Day Count&quot;, data2.getDayCount(), &quot;Day Count MKTWire&quot;, mkt.getDayCountIRS(), map.get(&quot;Day count&quot;) };\n\n            data.add(headers);\n            data.add(book);\n            data.add(tradeDate);\n            data.add(startDate);\n            data.add(maturity);\n            data.add(tenor);\n            data.add(notional);\n            data.add(currency);\n            data.add(rate);\n            data.add(resetFrequency);\n            data.add(dayCount);\n            \n            \n            cw.writeAll(data);\n            cw.flush();\n            fw.flush();\n            cw.close();\n            fw.close();\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n"},{"tags":["java","ssl","java-7","tls1.2","amazon-athena"],"comments":[{"owner":{"account_id":1852014,"reputation":24139,"user_id":1678362,"display_name":"Aaron"},"score":0,"creation_date":1632411101,"post_id":69302524,"comment_id":122490465,"body_markdown":"Your application is calling something, and when trying to it gets rejected by that something during the SSL handshake. First identify what that something is (check the stacktraces for classes of your application - i guess com.ccclogic.dao.impl.aws.IVRAnalyticsDaoImpl.getIVRs() is the relevant part -, see which services you call from those classes), then ask them what they changed or what reason they can see for the handshake failure from their side.","body":"Your application is calling something, and when trying to it gets rejected by that something during the SSL handshake. First identify what that something is (check the stacktraces for classes of your application - i guess com.ccclogic.dao.impl.aws.IVRAnalyticsDaoImpl.getIVRs() is the relevant part -, see which services you call from those classes), then ask them what they changed or what reason they can see for the handshake failure from their side."}],"answers":[{"tags":[],"owner":{"account_id":14887483,"reputation":28,"user_id":10750231,"display_name":"J. DEMARE"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1632411701,"creation_date":1632411701,"answer_id":69303085,"question_id":69302524,"body_markdown":"You can try first to debug SSL communication with adding `-Djavax.net.debug=all` to the JVM argument.\r\n\r\nYou will next see the helloClient calls and the given certificates associated from both sides (the client and the remote server).","title":"Java Microservice not able to communicate with AWS Athena Client: Handshake_Failure","body":"<p>You can try first to debug SSL communication with adding <code>-Djavax.net.debug=all</code> to the JVM argument.</p>\n<p>You will next see the helloClient calls and the given certificates associated from both sides (the client and the remote server).</p>\n"},{"tags":[],"owner":{"account_id":387913,"reputation":96,"user_id":5638790,"display_name":"Gary Richards"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1633710961,"creation_date":1633710961,"answer_id":69499138,"question_id":69302524,"body_markdown":"We&#39;ve encountered this very same problem on 21st Sept 2021 on our legacy pipeline (Java7/JBoss7) using an older version of the AWS SDK (1.11.132)\r\n\r\nIt looks like there has been a change on the AWS Athena endpoint which is now using a TLS configuration that is not a default option within our versions Java 7. Thankfully other AWS services that we use have not been affected.\r\n\r\nWe validated this was localised to Java 7 by writing some simple standalone code using the `AthenaClient` and ran it with both Java7/Java8 and with newer versions of the AWS SDK. \r\n\r\nWe&#39;re not in a position to upgrade our pipeline to Java 8 or above, however we&#39;ve managed a Java 7 workaround which customises the `AthenaClient` to force it to use `TLS1.2`\r\n\r\nThis was produced with the help of the following pages:\r\n\r\n - https://www.baeldung.com/java-7-tls-v12\r\n - https://stackoverflow.com/questions/47913449/amazon-sdk-not-using-custom-default-ssl-socket-factory\r\n\r\n```\r\nimport com.amazonaws.ClientConfiguration;\r\nimport com.amazonaws.ClientConfigurationFactory;\r\nimport com.amazonaws.regions.Regions;\r\nimport com.amazonaws.services.athena.AmazonAthena;\r\nimport com.amazonaws.services.athena.AmazonAthenaClientBuilder;\r\nimport com.amazonaws.services.athena.model.ListNamedQueriesRequest;\r\nimport com.amazonaws.services.athena.model.ListNamedQueriesResult;\r\nimport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\r\n\r\nimport javax.net.ssl.SSLContext;\r\nimport java.security.KeyManagementException;\r\nimport java.security.NoSuchAlgorithmException;\r\nimport java.security.SecureRandom;\r\nimport java.util.Arrays;\r\n\r\npublic class App {\r\n    public static void main(String[] args) throws NoSuchAlgorithmException, KeyManagementException {\r\n        System.out.println(Arrays.toString(SSLContext.getDefault().getSupportedSSLParameters().getProtocols()));\r\n\r\n        SSLContext sslContext = SSLContext.getInstance(&quot;TLSv1.2&quot;);\r\n        sslContext.init(null, null, new SecureRandom());\r\n\r\n        SSLConnectionSocketFactory sslConnectionSocketFactory = new SSLConnectionSocketFactory(\r\n                sslContext,\r\n                new String[]{&quot;TLSv1.2&quot;},\r\n                null,\r\n                SSLConnectionSocketFactory.getDefaultHostnameVerifier());\r\n\r\n        ClientConfigurationFactory clientConfigurationFactory = new ClientConfigurationFactory();\r\n        ClientConfiguration clientConfiguration = clientConfigurationFactory.getConfig();\r\n        clientConfiguration.getApacheHttpClientConfig().withSslSocketFactory(sslConnectionSocketFactory);\r\n\r\n        System.out.println(&quot;Hello Athena!&quot;);\r\n        AmazonAthena athena = AmazonAthenaClientBuilder\r\n                .standard()\r\n                .withClientConfiguration(\r\n                        clientConfiguration\r\n                )\r\n                .withRegion(Regions.EU_WEST_1)\r\n                .build();\r\n\r\n\r\n        ListNamedQueriesRequest req = new ListNamedQueriesRequest();\r\n        ListNamedQueriesResult res = athena.listNamedQueries(req);\r\n        System.out.println(&quot;Named Query Ids:&quot;);\r\n        for (String id : res.getNamedQueryIds()) {\r\n            System.out.println(id);\r\n        }\r\n    }\r\n}\r\n```\r\nWith this we&#39;ve been able to interact with Athena using Java 7 without the recent SSL handshake errors.","title":"Java Microservice not able to communicate with AWS Athena Client: Handshake_Failure","body":"<p>We've encountered this very same problem on 21st Sept 2021 on our legacy pipeline (Java7/JBoss7) using an older version of the AWS SDK (1.11.132)</p>\n<p>It looks like there has been a change on the AWS Athena endpoint which is now using a TLS configuration that is not a default option within our versions Java 7. Thankfully other AWS services that we use have not been affected.</p>\n<p>We validated this was localised to Java 7 by writing some simple standalone code using the <code>AthenaClient</code> and ran it with both Java7/Java8 and with newer versions of the AWS SDK.</p>\n<p>We're not in a position to upgrade our pipeline to Java 8 or above, however we've managed a Java 7 workaround which customises the <code>AthenaClient</code> to force it to use <code>TLS1.2</code></p>\n<p>This was produced with the help of the following pages:</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/java-7-tls-v12\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-7-tls-v12</a></li>\n<li><a href=\"https://stackoverflow.com/questions/47913449/amazon-sdk-not-using-custom-default-ssl-socket-factory\">Amazon SDK not using custom default SSL Socket Factory</a></li>\n</ul>\n<pre><code>import com.amazonaws.ClientConfiguration;\nimport com.amazonaws.ClientConfigurationFactory;\nimport com.amazonaws.regions.Regions;\nimport com.amazonaws.services.athena.AmazonAthena;\nimport com.amazonaws.services.athena.AmazonAthenaClientBuilder;\nimport com.amazonaws.services.athena.model.ListNamedQueriesRequest;\nimport com.amazonaws.services.athena.model.ListNamedQueriesResult;\nimport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\n\nimport javax.net.ssl.SSLContext;\nimport java.security.KeyManagementException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.SecureRandom;\nimport java.util.Arrays;\n\npublic class App {\n    public static void main(String[] args) throws NoSuchAlgorithmException, KeyManagementException {\n        System.out.println(Arrays.toString(SSLContext.getDefault().getSupportedSSLParameters().getProtocols()));\n\n        SSLContext sslContext = SSLContext.getInstance(&quot;TLSv1.2&quot;);\n        sslContext.init(null, null, new SecureRandom());\n\n        SSLConnectionSocketFactory sslConnectionSocketFactory = new SSLConnectionSocketFactory(\n                sslContext,\n                new String[]{&quot;TLSv1.2&quot;},\n                null,\n                SSLConnectionSocketFactory.getDefaultHostnameVerifier());\n\n        ClientConfigurationFactory clientConfigurationFactory = new ClientConfigurationFactory();\n        ClientConfiguration clientConfiguration = clientConfigurationFactory.getConfig();\n        clientConfiguration.getApacheHttpClientConfig().withSslSocketFactory(sslConnectionSocketFactory);\n\n        System.out.println(&quot;Hello Athena!&quot;);\n        AmazonAthena athena = AmazonAthenaClientBuilder\n                .standard()\n                .withClientConfiguration(\n                        clientConfiguration\n                )\n                .withRegion(Regions.EU_WEST_1)\n                .build();\n\n\n        ListNamedQueriesRequest req = new ListNamedQueriesRequest();\n        ListNamedQueriesResult res = athena.listNamedQueries(req);\n        System.out.println(&quot;Named Query Ids:&quot;);\n        for (String id : res.getNamedQueryIds()) {\n            System.out.println(id);\n        }\n    }\n}\n</code></pre>\n<p>With this we've been able to interact with Athena using Java 7 without the recent SSL handshake errors.</p>\n"}],"owner":{"account_id":5201928,"reputation":2986,"user_id":4161024,"accept_rate":86,"display_name":"Dave Ranjan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":738,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69499138,"answer_count":2,"score":2,"last_activity_date":1633710961,"creation_date":1632409401,"question_id":69302524,"body_markdown":"I had a microservice running fine in production till yesterday (22nd Sept), today it started giving handshake_failure while communicating with the AWS Athena.\r\n\r\nI have checked the SSL Certificates and it seems to be fine and valid.\r\n\r\n**Environment:** Java 7, Tomcat 7\r\n\r\n**Framework:** Spring 3\r\n\r\n**dependency:**\r\n  aws-java-sdk-athena: 1.11.522\r\n\r\n**Stacktrace:**-\r\n\r\n```\r\norg.springframework.web.util.NestedServletException: Request processing failed; nested exception is com.amazonaws.SdkClientException: Unable to execute HTTP request: Received fatal alert: handshake_failure\r\n\torg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:927)\r\n\torg.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:811)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:624)\r\n\torg.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n\tcom.ccclogic.util.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:63)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)\r\n\torg.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)\r\n\torg.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:154)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)\r\n\torg.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:166)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\tcom.ccclogic.security.filters.CsrfFilter.doFilterInternal(CsrfFilter.java:91)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\tcom.ccclogic.common.security.filters.CorsFilter.doFilterInternal(CorsFilter.java:90)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:57)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:50)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.saml.metadata.MetadataGeneratorFilter.doFilter(MetadataGeneratorFilter.java:87)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)\r\n\torg.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)\r\n\torg.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\r\n\torg.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)\r\n\tcom.ccclogic.core.filter.AcegiAjaxFilter.doFilterInternal(AcegiAjaxFilter.java:51)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tcom.ccclogic.core.filter.HttpsCookieFilter.doFilter(HttpsCookieFilter.java:46)\r\nroot cause\r\n\r\ncom.amazonaws.SdkClientException: Unable to execute HTTP request: Received fatal alert: handshake_failure\r\n\tcom.amazonaws.http.AmazonHttpClient$RequestExecutor.handleRetryableException(AmazonHttpClient.java:1175)\r\n\tcom.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1121)\r\n\tcom.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:770)\r\n\tcom.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:744)\r\n\tcom.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:726)\r\n\tcom.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:686)\r\n\tcom.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:668)\r\n\tcom.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:532)\r\n\tcom.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:512)\r\n\tcom.amazonaws.services.athena.AmazonAthenaClient.doInvoke(AmazonAthenaClient.java:1369)\r\n\tcom.amazonaws.services.athena.AmazonAthenaClient.invoke(AmazonAthenaClient.java:1336)\r\n\tcom.amazonaws.services.athena.AmazonAthenaClient.invoke(AmazonAthenaClient.java:1325)\r\n\tcom.amazonaws.services.athena.AmazonAthenaClient.executeStartQueryExecution(AmazonAthenaClient.java:1045)\r\n\tcom.amazonaws.services.athena.AmazonAthenaClient.startQueryExecution(AmazonAthenaClient.java:1017)\r\n\tcom.ccclogic.awsservices.athena.AthenaClient.submitAthenaQuery(AthenaClient.java:57)\r\n\tcom.ccclogic.awsservices.athena.AthenaClient.queryForList(AthenaClient.java:126)\r\n\tcom.ccclogic.dao.impl.aws.IVRAnalyticsDaoImpl.getIVRs(IVRAnalyticsDaoImpl.java:450)\r\n\tcom.ccclogic.business.impl.IVRAnalyticsServiceImpl.getIVRs(IVRAnalyticsServiceImpl.java:45)\r\n\tsun.reflect.GeneratedMethodAccessor397.invoke(Unknown Source)\r\n\tsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tjava.lang.reflect.Method.invoke(Method.java:606)\r\n\torg.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)\r\n\torg.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\r\n\torg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\r\n\torg.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)\r\n\torg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n\torg.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)\r\n\torg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n\torg.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\r\n\tcom.sun.proxy.$Proxy104.getIVRs(Unknown Source)\r\n\tcom.ccclogic.controller.IVRAnalyticsController.getIVR(IVRAnalyticsController.java:106)\r\n\tsun.reflect.GeneratedMethodAccessor396.invoke(Unknown Source)\r\n\tsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tjava.lang.reflect.Method.invoke(Method.java:606)\r\n\torg.springframework.web.servlet.mvc.multiaction.MultiActionController.invokeNamedMethod(MultiActionController.java:471)\r\n\torg.springframework.web.servlet.mvc.multiaction.MultiActionController.handleRequestInternal(MultiActionController.java:408)\r\n\torg.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)\r\n\torg.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)\r\n\torg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)\r\n\torg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)\r\n\torg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:915)\r\n\torg.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:811)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:624)\r\n\torg.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n\tcom.ccclogic.util.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:63)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)\r\n\torg.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)\r\n\torg.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:154)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)\r\n\torg.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:166)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\tcom.ccclogic.security.filters.CsrfFilter.doFilterInternal(CsrfFilter.java:91)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\tcom.ccclogic.common.security.filters.CorsFilter.doFilterInternal(CorsFilter.java:90)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:57)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:50)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.saml.metadata.MetadataGeneratorFilter.doFilter(MetadataGeneratorFilter.java:87)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)\r\n\torg.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)\r\n\torg.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\r\n\torg.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)\r\n\tcom.ccclogic.core.filter.AcegiAjaxFilter.doFilterInternal(AcegiAjaxFilter.java:51)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tcom.ccclogic.core.filter.HttpsCookieFilter.doFilter(HttpsCookieFilter.java:46)\r\nroot cause\r\n\r\njavax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\r\n\tsun.security.ssl.Alerts.getSSLException(Alerts.java:192)\r\n\tsun.security.ssl.Alerts.getSSLException(Alerts.java:154)\r\n\tsun.security.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:1959)\r\n\tsun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1077)\r\n\tsun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1312)\r\n\tsun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1339)\r\n\tsun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1323)\r\n\torg.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:394)\r\n\torg.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:353)\r\n\tcom.amazonaws.http.conn.ssl.SdkTLSSocketFactory.connectSocket(SdkTLSSocketFactory.java:142)\r\n\torg.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:141)\r\n\torg.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)\r\n\tsun.reflect.GeneratedMethodAccessor203.invoke(Unknown Source)\r\n\tsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tjava.lang.reflect.Method.invoke(Method.java:606)\r\n\tcom.amazonaws.http.conn.ClientConnectionManagerFactory$Handler.invoke(ClientConnectionManagerFactory.java:76)\r\n\tcom.amazonaws.http.conn.$Proxy68.connect(Unknown Source)\r\n\torg.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)\r\n\torg.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\r\n\torg.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)\r\n\torg.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)\r\n\torg.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\r\n\torg.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)\r\n\tcom.amazonaws.http.apache.client.impl.SdkHttpClient.execute(SdkHttpClient.java:72)\r\n\tcom.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1297)\r\n\tcom.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1113)\r\n\tcom.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:770)\r\n\tcom.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:744)\r\n\tcom.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:726)\r\n\tcom.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:686)\r\n\tcom.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:668)\r\n\tcom.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:532)\r\n\tcom.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:512)\r\n\tcom.amazonaws.services.athena.AmazonAthenaClient.doInvoke(AmazonAthenaClient.java:1369)\r\n\tcom.amazonaws.services.athena.AmazonAthenaClient.invoke(AmazonAthenaClient.java:1336)\r\n\tcom.amazonaws.services.athena.AmazonAthenaClient.invoke(AmazonAthenaClient.java:1325)\r\n\tcom.amazonaws.services.athena.AmazonAthenaClient.executeStartQueryExecution(AmazonAthenaClient.java:1045)\r\n\tcom.amazonaws.services.athena.AmazonAthenaClient.startQueryExecution(AmazonAthenaClient.java:1017)\r\n\tcom.ccclogic.awsservices.athena.AthenaClient.submitAthenaQuery(AthenaClient.java:57)\r\n\tcom.ccclogic.awsservices.athena.AthenaClient.queryForList(AthenaClient.java:126)\r\n\tcom.ccclogic.dao.impl.aws.IVRAnalyticsDaoImpl.getIVRs(IVRAnalyticsDaoImpl.java:450)\r\n\tcom.ccclogic.business.impl.IVRAnalyticsServiceImpl.getIVRs(IVRAnalyticsServiceImpl.java:45)\r\n\tsun.reflect.GeneratedMethodAccessor397.invoke(Unknown Source)\r\n\tsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tjava.lang.reflect.Method.invoke(Method.java:606)\r\n\torg.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)\r\n\torg.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\r\n\torg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\r\n\torg.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)\r\n\torg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n\torg.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)\r\n\torg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n\torg.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\r\n\tcom.sun.proxy.$Proxy104.getIVRs(Unknown Source)\r\n\tcom.ccclogic.controller.IVRAnalyticsController.getIVR(IVRAnalyticsController.java:106)\r\n\tsun.reflect.GeneratedMethodAccessor396.invoke(Unknown Source)\r\n\tsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tjava.lang.reflect.Method.invoke(Method.java:606)\r\n\torg.springframework.web.servlet.mvc.multiaction.MultiActionController.invokeNamedMethod(MultiActionController.java:471)\r\n\torg.springframework.web.servlet.mvc.multiaction.MultiActionController.handleRequestInternal(MultiActionController.java:408)\r\n\torg.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)\r\n\torg.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)\r\n\torg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)\r\n\torg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)\r\n\torg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:915)\r\n\torg.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:811)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:624)\r\n\torg.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n\tcom.ccclogic.util.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:63)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)\r\n\torg.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)\r\n\torg.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:154)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)\r\n\torg.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:166)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\tcom.ccclogic.security.filters.CsrfFilter.doFilterInternal(CsrfFilter.java:91)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\tcom.ccclogic.common.security.filters.CorsFilter.doFilterInternal(CorsFilter.java:90)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:57)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:50)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.saml.metadata.MetadataGeneratorFilter.doFilter(MetadataGeneratorFilter.java:87)\r\n\torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\r\n\torg.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)\r\n\torg.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)\r\n\torg.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\r\n\torg.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)\r\n\tcom.ccclogic.core.filter.AcegiAjaxFilter.doFilterInternal(AcegiAjaxFilter.java:51)\r\n\torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tcom.ccclogic.core.filter.HttpsCookieFilter.doFilter(HttpsCookieFilter.java:46)```\r\n\r\nAny help is appreciated","title":"Java Microservice not able to communicate with AWS Athena Client: Handshake_Failure","body":"<p>I had a microservice running fine in production till yesterday (22nd Sept), today it started giving handshake_failure while communicating with the AWS Athena.</p>\n<p>I have checked the SSL Certificates and it seems to be fine and valid.</p>\n<p><strong>Environment:</strong> Java 7, Tomcat 7</p>\n<p><strong>Framework:</strong> Spring 3</p>\n<p><strong>dependency:</strong>\naws-java-sdk-athena: 1.11.522</p>\n<p><strong>Stacktrace:</strong>-</p>\n<pre><code>org.springframework.web.util.NestedServletException: Request processing failed; nested exception is com.amazonaws.SdkClientException: Unable to execute HTTP request: Received fatal alert: handshake_failure\n    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:927)\n    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:811)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:624)\n    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:731)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    com.ccclogic.util.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:63)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)\n    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)\n    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:154)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)\n    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:166)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    com.ccclogic.security.filters.CsrfFilter.doFilterInternal(CsrfFilter.java:91)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    com.ccclogic.common.security.filters.CorsFilter.doFilterInternal(CorsFilter.java:90)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:57)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:50)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.saml.metadata.MetadataGeneratorFilter.doFilter(MetadataGeneratorFilter.java:87)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)\n    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)\n    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\n    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)\n    com.ccclogic.core.filter.AcegiAjaxFilter.doFilterInternal(AcegiAjaxFilter.java:51)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    com.ccclogic.core.filter.HttpsCookieFilter.doFilter(HttpsCookieFilter.java:46)\nroot cause\n\ncom.amazonaws.SdkClientException: Unable to execute HTTP request: Received fatal alert: handshake_failure\n    com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleRetryableException(AmazonHttpClient.java:1175)\n    com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1121)\n    com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:770)\n    com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:744)\n    com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:726)\n    com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:686)\n    com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:668)\n    com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:532)\n    com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:512)\n    com.amazonaws.services.athena.AmazonAthenaClient.doInvoke(AmazonAthenaClient.java:1369)\n    com.amazonaws.services.athena.AmazonAthenaClient.invoke(AmazonAthenaClient.java:1336)\n    com.amazonaws.services.athena.AmazonAthenaClient.invoke(AmazonAthenaClient.java:1325)\n    com.amazonaws.services.athena.AmazonAthenaClient.executeStartQueryExecution(AmazonAthenaClient.java:1045)\n    com.amazonaws.services.athena.AmazonAthenaClient.startQueryExecution(AmazonAthenaClient.java:1017)\n    com.ccclogic.awsservices.athena.AthenaClient.submitAthenaQuery(AthenaClient.java:57)\n    com.ccclogic.awsservices.athena.AthenaClient.queryForList(AthenaClient.java:126)\n    com.ccclogic.dao.impl.aws.IVRAnalyticsDaoImpl.getIVRs(IVRAnalyticsDaoImpl.java:450)\n    com.ccclogic.business.impl.IVRAnalyticsServiceImpl.getIVRs(IVRAnalyticsServiceImpl.java:45)\n    sun.reflect.GeneratedMethodAccessor397.invoke(Unknown Source)\n    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    java.lang.reflect.Method.invoke(Method.java:606)\n    org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)\n    org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\n    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\n    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)\n    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)\n    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\n    com.sun.proxy.$Proxy104.getIVRs(Unknown Source)\n    com.ccclogic.controller.IVRAnalyticsController.getIVR(IVRAnalyticsController.java:106)\n    sun.reflect.GeneratedMethodAccessor396.invoke(Unknown Source)\n    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    java.lang.reflect.Method.invoke(Method.java:606)\n    org.springframework.web.servlet.mvc.multiaction.MultiActionController.invokeNamedMethod(MultiActionController.java:471)\n    org.springframework.web.servlet.mvc.multiaction.MultiActionController.handleRequestInternal(MultiActionController.java:408)\n    org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)\n    org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)\n    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)\n    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)\n    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:915)\n    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:811)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:624)\n    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:731)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    com.ccclogic.util.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:63)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)\n    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)\n    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:154)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)\n    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:166)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    com.ccclogic.security.filters.CsrfFilter.doFilterInternal(CsrfFilter.java:91)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    com.ccclogic.common.security.filters.CorsFilter.doFilterInternal(CorsFilter.java:90)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:57)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:50)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.saml.metadata.MetadataGeneratorFilter.doFilter(MetadataGeneratorFilter.java:87)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)\n    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)\n    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\n    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)\n    com.ccclogic.core.filter.AcegiAjaxFilter.doFilterInternal(AcegiAjaxFilter.java:51)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    com.ccclogic.core.filter.HttpsCookieFilter.doFilter(HttpsCookieFilter.java:46)\nroot cause\n\njavax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\n    sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\n    sun.security.ssl.Alerts.getSSLException(Alerts.java:154)\n    sun.security.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:1959)\n    sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1077)\n    sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1312)\n    sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1339)\n    sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1323)\n    org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:394)\n    org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:353)\n    com.amazonaws.http.conn.ssl.SdkTLSSocketFactory.connectSocket(SdkTLSSocketFactory.java:142)\n    org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:141)\n    org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)\n    sun.reflect.GeneratedMethodAccessor203.invoke(Unknown Source)\n    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    java.lang.reflect.Method.invoke(Method.java:606)\n    com.amazonaws.http.conn.ClientConnectionManagerFactory$Handler.invoke(ClientConnectionManagerFactory.java:76)\n    com.amazonaws.http.conn.$Proxy68.connect(Unknown Source)\n    org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)\n    org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\n    org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)\n    org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)\n    org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\n    org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)\n    com.amazonaws.http.apache.client.impl.SdkHttpClient.execute(SdkHttpClient.java:72)\n    com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1297)\n    com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1113)\n    com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:770)\n    com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:744)\n    com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:726)\n    com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:686)\n    com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:668)\n    com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:532)\n    com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:512)\n    com.amazonaws.services.athena.AmazonAthenaClient.doInvoke(AmazonAthenaClient.java:1369)\n    com.amazonaws.services.athena.AmazonAthenaClient.invoke(AmazonAthenaClient.java:1336)\n    com.amazonaws.services.athena.AmazonAthenaClient.invoke(AmazonAthenaClient.java:1325)\n    com.amazonaws.services.athena.AmazonAthenaClient.executeStartQueryExecution(AmazonAthenaClient.java:1045)\n    com.amazonaws.services.athena.AmazonAthenaClient.startQueryExecution(AmazonAthenaClient.java:1017)\n    com.ccclogic.awsservices.athena.AthenaClient.submitAthenaQuery(AthenaClient.java:57)\n    com.ccclogic.awsservices.athena.AthenaClient.queryForList(AthenaClient.java:126)\n    com.ccclogic.dao.impl.aws.IVRAnalyticsDaoImpl.getIVRs(IVRAnalyticsDaoImpl.java:450)\n    com.ccclogic.business.impl.IVRAnalyticsServiceImpl.getIVRs(IVRAnalyticsServiceImpl.java:45)\n    sun.reflect.GeneratedMethodAccessor397.invoke(Unknown Source)\n    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    java.lang.reflect.Method.invoke(Method.java:606)\n    org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)\n    org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\n    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\n    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)\n    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)\n    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\n    com.sun.proxy.$Proxy104.getIVRs(Unknown Source)\n    com.ccclogic.controller.IVRAnalyticsController.getIVR(IVRAnalyticsController.java:106)\n    sun.reflect.GeneratedMethodAccessor396.invoke(Unknown Source)\n    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    java.lang.reflect.Method.invoke(Method.java:606)\n    org.springframework.web.servlet.mvc.multiaction.MultiActionController.invokeNamedMethod(MultiActionController.java:471)\n    org.springframework.web.servlet.mvc.multiaction.MultiActionController.handleRequestInternal(MultiActionController.java:408)\n    org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)\n    org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)\n    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)\n    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)\n    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:915)\n    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:811)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:624)\n    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:731)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    com.ccclogic.util.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:63)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)\n    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)\n    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:154)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)\n    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:166)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    com.ccclogic.security.filters.CsrfFilter.doFilterInternal(CsrfFilter.java:91)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    com.ccclogic.common.security.filters.CorsFilter.doFilterInternal(CorsFilter.java:90)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:57)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:50)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.saml.metadata.MetadataGeneratorFilter.doFilter(MetadataGeneratorFilter.java:87)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)\n    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)\n    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)\n    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\n    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)\n    com.ccclogic.core.filter.AcegiAjaxFilter.doFilterInternal(AcegiAjaxFilter.java:51)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    com.ccclogic.core.filter.HttpsCookieFilter.doFilter(HttpsCookieFilter.java:46)```\n\nAny help is appreciated\n</code></pre>\n"},{"tags":["java","java-stream","groupingby"],"owner":{"account_id":3407379,"reputation":43,"user_id":2858134,"display_name":"Mirza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1633710537,"creation_date":1633710300,"question_id":69499006,"body_markdown":"I have this data structure\r\n\r\n    Class Project { \r\n    String status;\r\n    Property property ; \r\n    String clientName ; \r\n    Localdate date;\r\n   }\r\n\r\nnow from this object i want to get this datastructure as output using java 8 streams method\r\n\r\n    {\r\n      &quot;Spring hill recent&quot;: {  //client name\r\n        &quot;Dallas&quot;: [{  //property name\r\n          month: &#39;January&#39;,  // date\r\n          &quot;overdue&quot;: 20,     //accumulation based on how much project falls under this status\r\n          &quot;inprogress&quot;: 30,\r\n          &quot;new&quot;: 50\r\n        }, {\r\n          month: &#39;February&#39;,\r\n          &quot;overdue&quot;: 30,\r\n          &quot;inprogress&quot;: 40,\r\n          &quot;new&quot;: 50\r\n        }, {\r\n          month: &#39;March&#39;,\r\n          &quot;overdue&quot;: 67,\r\n          &quot;inprogress&quot;: 45,\r\n          &quot;new&quot;: 23\r\n        }]\r\n          month: &#39;April&#39;,\r\n          &quot;overdue&quot;: 80,\r\n          &quot;inprogress&quot;: 40,\r\n          &quot;new&quot;: 20\r\n        }, {\r\n          month: &#39;December&#39;,\r\n          &quot;overdue&quot;: 10,\r\n          &quot;inprogress&quot;: 30,\r\n          &quot;new&quot;: 30\r\n        }, {\r\n          month: &#39;February&#39;,\r\n          &quot;overdue&quot;: 90,\r\n          &quot;inprogress&quot;: 23,\r\n          &quot;new&quot;: 56\r\n        }],\r\n      },\r\n    }\r\n\r\nSo far i have added this code but i am not sure how to do the accumulation\r\n\r\n \r\n\r\n     List&lt;Project&gt; projects = projectRepository.fetchActiveNewAndOverDueProject();\r\n            Map&lt;String, Map&lt;String, List&lt;Project&gt;&gt;&gt; collect = projects.stream()\r\n                .collect(Collectors.groupingBy(Project::getClientName,\r\n                    Collectors.groupingBy(property -&gt; property.getProperty(),getName())\r\n                ))\r\n\r\n","title":"java 8 multi level query and accumulating data","body":"<p>I have this data structure</p>\n<pre><code>Class Project { \nString status;\nProperty property ; \nString clientName ; \nLocaldate date;\n</code></pre>\n<p>}</p>\n<p>now from this object i want to get this datastructure as output using java 8 streams method</p>\n<pre><code>{\n  &quot;Spring hill recent&quot;: {  //client name\n    &quot;Dallas&quot;: [{  //property name\n      month: 'January',  // date\n      &quot;overdue&quot;: 20,     //accumulation based on how much project falls under this status\n      &quot;inprogress&quot;: 30,\n      &quot;new&quot;: 50\n    }, {\n      month: 'February',\n      &quot;overdue&quot;: 30,\n      &quot;inprogress&quot;: 40,\n      &quot;new&quot;: 50\n    }, {\n      month: 'March',\n      &quot;overdue&quot;: 67,\n      &quot;inprogress&quot;: 45,\n      &quot;new&quot;: 23\n    }]\n      month: 'April',\n      &quot;overdue&quot;: 80,\n      &quot;inprogress&quot;: 40,\n      &quot;new&quot;: 20\n    }, {\n      month: 'December',\n      &quot;overdue&quot;: 10,\n      &quot;inprogress&quot;: 30,\n      &quot;new&quot;: 30\n    }, {\n      month: 'February',\n      &quot;overdue&quot;: 90,\n      &quot;inprogress&quot;: 23,\n      &quot;new&quot;: 56\n    }],\n  },\n}\n</code></pre>\n<p>So far i have added this code but i am not sure how to do the accumulation</p>\n<pre><code> List&lt;Project&gt; projects = projectRepository.fetchActiveNewAndOverDueProject();\n        Map&lt;String, Map&lt;String, List&lt;Project&gt;&gt;&gt; collect = projects.stream()\n            .collect(Collectors.groupingBy(Project::getClientName,\n                Collectors.groupingBy(property -&gt; property.getProperty(),getName())\n            ))\n</code></pre>\n"},{"tags":["java","android","google-api","subscription","google-play"],"comments":[{"owner":{"account_id":9297493,"reputation":333,"user_id":6903989,"accept_rate":0,"display_name":"Lavanya Velusamy"},"score":0,"creation_date":1525828720,"post_id":11115381,"comment_id":87506070,"body_markdown":"I have some doubts. I stuck in that for a week. I am doing an app to get all reviews from a play store. It&#39;s for all end user who has an account in play store.\n\nhttps://developers.google.com/android-publisher/getting_started\n\nThis document specifies that I need to create oAuth and I need to link project id in my developer console for accessing review API I tried that and its working fine. But for all end user its odd for them to create OAuth and link project id into their dev console and then accessing my app I don&#39;t get any solution if anyone knows please reply","body":"I have some doubts. I stuck in that for a week. I am doing an app to get all reviews from a play store. It&#39;s for all end user who has an account in play store.  <a href=\"https://developers.google.com/android-publisher/getting_started\" rel=\"nofollow noreferrer\">developers.google.com/android-publisher/getting_started</a>  This document specifies that I need to create oAuth and I need to link project id in my developer console for accessing review API I tried that and its working fine. But for all end user its odd for them to create OAuth and link project id into their dev console and then accessing my app I don&#39;t get any solution if anyone knows please reply"}],"answers":[{"tags":[],"owner":{"account_id":49931,"reputation":25463,"user_id":148844,"accept_rate":67,"display_name":"Chloe"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1341437070,"creation_date":1341437070,"answer_id":11335588,"question_id":11115381,"body_markdown":"I&#39;m pretty sure you have to use your Client ID, not the email address. It looks like this: 37382847321922.apps.googleusercontent.com\r\n\r\nSee https://developers.google.com/android-publisher/authorization\r\n\r\n    client_id=&lt;the client ID token created in the APIs Console&gt;\r\n\r\nAnd I&#39;m pretty sure you don&#39;t need a P12 file. You only need the \r\n\r\n    client_secret=&lt;the client secret corresponding to the client ID&gt;\r\n\r\nTry doing it manually from the command line first, with &#39;wget&#39;. ","title":"Unable to get the subscription information from Google Play Android Developer API","body":"<p>I'm pretty sure you have to use your Client ID, not the email address. It looks like this: 37382847321922.apps.googleusercontent.com</p>\n\n<p>See <a href=\"https://developers.google.com/android-publisher/authorization\" rel=\"nofollow\">https://developers.google.com/android-publisher/authorization</a></p>\n\n<pre><code>client_id=&lt;the client ID token created in the APIs Console&gt;\n</code></pre>\n\n<p>And I'm pretty sure you don't need a P12 file. You only need the </p>\n\n<pre><code>client_secret=&lt;the client secret corresponding to the client ID&gt;\n</code></pre>\n\n<p>Try doing it manually from the command line first, with 'wget'. </p>\n"},{"tags":[],"owner":{"account_id":206175,"reputation":14566,"user_id":455302,"accept_rate":76,"display_name":"Jonathan Naguin"},"down_vote_count":0,"up_vote_count":48,"is_accepted":true,"score":48,"last_activity_date":1349275349,"creation_date":1349275349,"answer_id":12710896,"question_id":11115381,"body_markdown":"I got it working! The steps I followed:\r\n\r\nPrerequisite\r\n------------\r\n\r\nBefore start, we need to generate a refresh token. To do this first we have to create an APIs console project:\r\n\r\n 1. Go to the [APIs Console][1] and log in with your Android developer\r\n    account (the same account used in [Android Developer Console][2] to upload the APK).\r\n 2. Select Create project.\r\n 3. Go to Services in the left-hand navigation panel.\r\n 4. Turn the *Google Play Android Developer API* on.\r\n 5. Accept the Terms of Service.\r\n 6. Go to API Access in the left-hand navigation panel.\r\n 7. Select Create an OAuth 2.0 client ID:\r\n    - On the first page, you will need to fill in the product name, but a \r\n    logo is not required.\r\n    - On the second page, select **web application** and set the **redirect URI**\r\n    and Javascript origins. We will use it later the redirect URI.\r\n 10. Select Create client ID. Keep in mind the **Client ID** and the **Client secret**, we will use them later.\r\n\r\nSo, now we can generate the refresh token:\r\n\r\n 1. Go to the following URI (note that the redirect URI must match the value entered in the client ID exactly, including any trailing backslashes):\r\n\r\nhttps://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/androidpublisher&amp;response_type=code&amp;access_type=offline&amp;redirect_uri=REDIRECT_URI&amp;client_id=CLIENT_ID\r\n\r\n 2. Select Allow access when prompted.\r\n 3. The browser will be redirected to your redirect URI with a **code** parameter, which will look similar to 4/eWdxD7b-YSQ5CNNb-c2iI83KQx19.wp6198ti5Zc7dJ3UXOl0T3aRLxQmbwI. Copy this value.\r\n\r\nCreate a main class with:\r\n\r\n    public static String getRefreshToken(String code)\r\n\t{\r\n\r\n\t    HttpClient client = new DefaultHttpClient();\r\n\t    HttpPost post = new HttpPost(&quot;https://accounts.google.com/o/oauth2/token&quot;);\r\n\t    try \r\n\t    {\r\n\t        List&lt;NameValuePair&gt; nameValuePairs = new ArrayList&lt;NameValuePair&gt;(5);\r\n\t        nameValuePairs.add(new BasicNameValuePair(&quot;grant_type&quot;,    &quot;authorization_code&quot;));\r\n\t        nameValuePairs.add(new BasicNameValuePair(&quot;client_id&quot;,     GOOGLE_CLIENT_ID));\r\n\t        nameValuePairs.add(new BasicNameValuePair(&quot;client_secret&quot;, GOOGLE_CLIENT_SECRET));\r\n\t        nameValuePairs.add(new BasicNameValuePair(&quot;code&quot;, code));\r\n\t        nameValuePairs.add(new BasicNameValuePair(&quot;redirect_uri&quot;, GOOGLE_REDIRECT_URI));\r\n\t        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));\r\n\r\n\t        org.apache.http.HttpResponse response = client.execute(post);\r\n\t        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));\r\n\t        StringBuffer buffer = new StringBuffer();\r\n\t        for (String line = reader.readLine(); line != null; line = reader.readLine())\r\n\t        {\r\n\t            buffer.append(line);\r\n\t        }\r\n\r\n\t        JSONObject json = new JSONObject(buffer.toString());\r\n\t        String refreshToken = json.getString(&quot;refresh_token&quot;);\t        \t        \r\n\t        return refreshToken;\r\n\t    }\r\n\t    catch (Exception e) { e.printStackTrace(); }\r\n\t    \r\n\t    return null;\r\n\t}\r\n\r\n`GOOGLE_CLIENT_ID`, `GOOGLE_CLIENT_SECRET` and `GOOGLE_REDIRECT_URI` are the previously values.\r\n\r\nFinally, we have our refresh token! This value does not expire, so we can store in some site, like a property file.\r\n\r\nAccessing to Google Play Android Developer API\r\n----------------------------------------------\r\n\r\n 1. Getting the access token. We will need our previosly refresh token:\r\n\r\n        private static String getAccessToken(String refreshToken){\r\n\t\t\r\n\t\tHttpClient client = new DefaultHttpClient();\r\n\t    HttpPost post = new HttpPost(&quot;https://accounts.google.com/o/oauth2/token&quot;);\r\n\t    try \r\n\t    {\r\n\t        List&lt;NameValuePair&gt; nameValuePairs = new ArrayList&lt;NameValuePair&gt;(4);\r\n\t        nameValuePairs.add(new BasicNameValuePair(&quot;grant_type&quot;,    &quot;refresh_token&quot;));\r\n\t        nameValuePairs.add(new BasicNameValuePair(&quot;client_id&quot;,     GOOGLE_CLIENT_ID));\r\n\t        nameValuePairs.add(new BasicNameValuePair(&quot;client_secret&quot;, GOOGLE_CLIENT_SECRET));\r\n\t        nameValuePairs.add(new BasicNameValuePair(&quot;refresh_token&quot;, refreshToken));\r\n\t        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));\r\n\r\n\t        org.apache.http.HttpResponse response = client.execute(post);\r\n\t        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));\r\n\t        StringBuffer buffer = new StringBuffer();\r\n\t        for (String line = reader.readLine(); line != null; line = reader.readLine())\r\n\t        {\r\n\t            buffer.append(line);\r\n\t        }\r\n\r\n\t        JSONObject json = new JSONObject(buffer.toString());\r\n\t        String accessToken = json.getString(&quot;access_token&quot;);\r\n\t        \r\n\t        return accessToken;\r\n\t        \r\n\t    }\r\n\t    catch (IOException e) { e.printStackTrace(); }\r\n\t    \r\n\t    return null;\r\n\t}\r\n\r\n 2. Now, we can access to the Android API. I&#39;m interesting in the expiration time of a subscription, so:\r\n\r\n        private static HttpTransport HTTP_TRANSPORT = new NetHttpTransport();\r\n        private static JsonFactory JSON_FACTORY = new com.google.api.client.json.jackson2.JacksonFactory();\r\n\r\n    \tprivate static Long getSubscriptionExpire(String accessToken, String refreshToken, String subscriptionId, String purchaseToken){\r\n\r\n\t\ttry{\r\n\t\t\t\r\n\t\t\tTokenResponse tokenResponse = new TokenResponse();\r\n\t\t\ttokenResponse.setAccessToken(accessToken);\r\n\t\t\ttokenResponse.setRefreshToken(refreshToken);\r\n\t\t\ttokenResponse.setExpiresInSeconds(3600L);\r\n\t\t\ttokenResponse.setScope(&quot;https://www.googleapis.com/auth/androidpublisher&quot;);\r\n\t\t\ttokenResponse.setTokenType(&quot;Bearer&quot;);\r\n\t\t\t\r\n\t\t\tHttpRequestInitializer credential =  new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)\r\n\t\t\t        .setJsonFactory(JSON_FACTORY)\r\n\t\t\t        .setClientSecrets(GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET)\r\n\t\t\t        .build()\r\n\t\t\t        .setFromTokenResponse(tokenResponse);\r\n\t\t\t\r\n\t\t\tAndroidpublisher publisher = new Androidpublisher.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential).\r\n\t\t\t\t\tsetApplicationName(GOOGLE_PRODUCT_NAME).\r\n\t\t\t\t\tbuild();\r\n\r\n\t\t\tAndroidpublisher.Purchases purchases = publisher.purchases();\r\n\t\t\tGet get = purchases.get(GOOGLE_PACKAGE_NAME, subscriptionId, purchaseToken);\r\n\t\t\tSubscriptionPurchase subscripcion = get.execute();\r\n\t\t\t\r\n\t\t\treturn subscripcion.getValidUntilTimestampMsec();\r\n\r\n\t\t}\r\n\t\tcatch (IOException e) { e.printStackTrace(); }\r\n\t\treturn null;\r\n\t}\r\n\r\nAnd that&#39;s all!\r\n\r\nSome steps are from [https://developers.google.com/android-publisher/authorization][3].\r\n\r\n\r\n  [1]: https://code.google.com/apis/console\r\n  [2]: https://play.google.com/apps/publish/Home\r\n  [3]: https://developers.google.com/android-publisher/authorization","title":"Unable to get the subscription information from Google Play Android Developer API","body":"<p>I got it working! The steps I followed:</p>\n\n<h2>Prerequisite</h2>\n\n<p>Before start, we need to generate a refresh token. To do this first we have to create an APIs console project:</p>\n\n<ol>\n<li>Go to the <a href=\"https://code.google.com/apis/console\">APIs Console</a> and log in with your Android developer\naccount (the same account used in <a href=\"https://play.google.com/apps/publish/Home\">Android Developer Console</a> to upload the APK).</li>\n<li>Select Create project.</li>\n<li>Go to Services in the left-hand navigation panel.</li>\n<li>Turn the <em>Google Play Android Developer API</em> on.</li>\n<li>Accept the Terms of Service.</li>\n<li>Go to API Access in the left-hand navigation panel.</li>\n<li>Select Create an OAuth 2.0 client ID:\n<ul>\n<li>On the first page, you will need to fill in the product name, but a \nlogo is not required.</li>\n<li>On the second page, select <strong>web application</strong> and set the <strong>redirect URI</strong>\nand Javascript origins. We will use it later the redirect URI.</li>\n</ul></li>\n<li>Select Create client ID. Keep in mind the <strong>Client ID</strong> and the <strong>Client secret</strong>, we will use them later.</li>\n</ol>\n\n<p>So, now we can generate the refresh token:</p>\n\n<ol>\n<li>Go to the following URI (note that the redirect URI must match the value entered in the client ID exactly, including any trailing backslashes):</li>\n</ol>\n\n<p><a href=\"https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/androidpublisher&amp;response_type=code&amp;access_type=offline&amp;redirect_uri=REDIRECT_URI&amp;client_id=CLIENT_ID\">https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/androidpublisher&amp;response_type=code&amp;access_type=offline&amp;redirect_uri=REDIRECT_URI&amp;client_id=CLIENT_ID</a></p>\n\n<ol>\n<li>Select Allow access when prompted.</li>\n<li>The browser will be redirected to your redirect URI with a <strong>code</strong> parameter, which will look similar to 4/eWdxD7b-YSQ5CNNb-c2iI83KQx19.wp6198ti5Zc7dJ3UXOl0T3aRLxQmbwI. Copy this value.</li>\n</ol>\n\n<p>Create a main class with:</p>\n\n<pre><code>public static String getRefreshToken(String code)\n{\n\n    HttpClient client = new DefaultHttpClient();\n    HttpPost post = new HttpPost(\"https://accounts.google.com/o/oauth2/token\");\n    try \n    {\n        List&lt;NameValuePair&gt; nameValuePairs = new ArrayList&lt;NameValuePair&gt;(5);\n        nameValuePairs.add(new BasicNameValuePair(\"grant_type\",    \"authorization_code\"));\n        nameValuePairs.add(new BasicNameValuePair(\"client_id\",     GOOGLE_CLIENT_ID));\n        nameValuePairs.add(new BasicNameValuePair(\"client_secret\", GOOGLE_CLIENT_SECRET));\n        nameValuePairs.add(new BasicNameValuePair(\"code\", code));\n        nameValuePairs.add(new BasicNameValuePair(\"redirect_uri\", GOOGLE_REDIRECT_URI));\n        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));\n\n        org.apache.http.HttpResponse response = client.execute(post);\n        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));\n        StringBuffer buffer = new StringBuffer();\n        for (String line = reader.readLine(); line != null; line = reader.readLine())\n        {\n            buffer.append(line);\n        }\n\n        JSONObject json = new JSONObject(buffer.toString());\n        String refreshToken = json.getString(\"refresh_token\");                      \n        return refreshToken;\n    }\n    catch (Exception e) { e.printStackTrace(); }\n\n    return null;\n}\n</code></pre>\n\n<p><code>GOOGLE_CLIENT_ID</code>, <code>GOOGLE_CLIENT_SECRET</code> and <code>GOOGLE_REDIRECT_URI</code> are the previously values.</p>\n\n<p>Finally, we have our refresh token! This value does not expire, so we can store in some site, like a property file.</p>\n\n<h2>Accessing to Google Play Android Developer API</h2>\n\n<ol>\n<li><p>Getting the access token. We will need our previosly refresh token:</p>\n\n<pre><code>private static String getAccessToken(String refreshToken){\n\nHttpClient client = new DefaultHttpClient();\nHttpPost post = new HttpPost(\"https://accounts.google.com/o/oauth2/token\");\ntry \n{\n    List&lt;NameValuePair&gt; nameValuePairs = new ArrayList&lt;NameValuePair&gt;(4);\n    nameValuePairs.add(new BasicNameValuePair(\"grant_type\",    \"refresh_token\"));\n    nameValuePairs.add(new BasicNameValuePair(\"client_id\",     GOOGLE_CLIENT_ID));\n    nameValuePairs.add(new BasicNameValuePair(\"client_secret\", GOOGLE_CLIENT_SECRET));\n    nameValuePairs.add(new BasicNameValuePair(\"refresh_token\", refreshToken));\n    post.setEntity(new UrlEncodedFormEntity(nameValuePairs));\n\n    org.apache.http.HttpResponse response = client.execute(post);\n    BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));\n    StringBuffer buffer = new StringBuffer();\n    for (String line = reader.readLine(); line != null; line = reader.readLine())\n    {\n        buffer.append(line);\n    }\n\n    JSONObject json = new JSONObject(buffer.toString());\n    String accessToken = json.getString(\"access_token\");\n\n    return accessToken;\n\n}\ncatch (IOException e) { e.printStackTrace(); }\n\nreturn null;\n</code></pre>\n\n<p>}</p></li>\n<li><p>Now, we can access to the Android API. I'm interesting in the expiration time of a subscription, so:</p>\n\n<pre><code>private static HttpTransport HTTP_TRANSPORT = new NetHttpTransport();\nprivate static JsonFactory JSON_FACTORY = new com.google.api.client.json.jackson2.JacksonFactory();\n\nprivate static Long getSubscriptionExpire(String accessToken, String refreshToken, String subscriptionId, String purchaseToken){\n\ntry{\n\n    TokenResponse tokenResponse = new TokenResponse();\n    tokenResponse.setAccessToken(accessToken);\n    tokenResponse.setRefreshToken(refreshToken);\n    tokenResponse.setExpiresInSeconds(3600L);\n    tokenResponse.setScope(\"https://www.googleapis.com/auth/androidpublisher\");\n    tokenResponse.setTokenType(\"Bearer\");\n\n    HttpRequestInitializer credential =  new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)\n            .setJsonFactory(JSON_FACTORY)\n            .setClientSecrets(GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET)\n            .build()\n            .setFromTokenResponse(tokenResponse);\n\n    Androidpublisher publisher = new Androidpublisher.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential).\n            setApplicationName(GOOGLE_PRODUCT_NAME).\n            build();\n\n    Androidpublisher.Purchases purchases = publisher.purchases();\n    Get get = purchases.get(GOOGLE_PACKAGE_NAME, subscriptionId, purchaseToken);\n    SubscriptionPurchase subscripcion = get.execute();\n\n    return subscripcion.getValidUntilTimestampMsec();\n\n}\ncatch (IOException e) { e.printStackTrace(); }\nreturn null;\n</code></pre>\n\n<p>}</p></li>\n</ol>\n\n<p>And that's all!</p>\n\n<p>Some steps are from <a href=\"https://developers.google.com/android-publisher/authorization\">https://developers.google.com/android-publisher/authorization</a>.</p>\n"},{"tags":[],"owner":{"account_id":994865,"reputation":131,"user_id":1011082,"display_name":"KoboldAtWork"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1391545422,"creation_date":1391545422,"answer_id":21562602,"question_id":11115381,"body_markdown":"To piggyback on Jonathan Naguin&#39;s great answer, here is a nodejs version of getting the refresh and access token:\r\n\r\n\t//This script is to retreive a refresh token and an access token from Google API. \r\n\t//NOTE: The refresh token will only appear the first time your client credentials are used. \r\n\t//      I had to delete my client id within api console and create a new one to get the refresh token again.\r\n\r\n\t//This is the downloaded json object from Google API Console. Just copy and paste over the template below.\r\n\tvar googleJson = {&quot;web&quot;:{&quot;auth_uri&quot;:&quot;&quot;,&quot;client_secret&quot;:&quot;&quot;,&quot;token_uri&quot;:&quot;&quot;,&quot;client_email&quot;:&quot;&quot;,&quot;redirect_uris&quot;:[&quot;&quot;],&quot;client_x509_cert_url&quot;:&quot;&quot;,&quot;client_id&quot;:&quot;&quot;,&quot;auth_provider_x509_cert_url&quot;:&quot;&quot;,&quot;javascript_origins&quot;:[&quot;&quot;]}};\r\n\r\n\t//Retrieved from OAuth\r\n\tvar code \t\t\t= &#39;&#39;; // Retrieved from the response of the URL generated by printGoogleAuthUrl(). You will need to be logged in as your publisher. Copy and paste the generated url. Copy the code parameter into this variable.\r\n\tvar refreshToken \t= &#39;&#39;; // Retrieved from the printRefreshToken() function call. Requires the code variable to be filled out.\r\n\tvar accessToken \t= &#39;&#39;; // Retrieved from the printAccessToken() function call. Requires the refreshToken variable to be filled out.\r\n\r\n\r\n\tvar querystring = require(&#39;querystring&#39;);\r\n\tvar https = require(&#39;https&#39;);\r\n\tvar fs = require(&#39;fs&#39;);\r\n\t\r\n\tfunction printGoogleAuthUrl()\r\n\t{\r\n\t\tconsole.log(&quot;https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/androidpublisher&amp;response_type=code&amp;access_type=offline&amp;redirect_uri=&quot; + googleJson.web.redirect_uris[0] + &quot;&amp;client_id=&quot; + googleJson.web.client_id);\r\n\t}\r\n\t\r\n\tfunction printRefreshToken()\r\n\t{\r\n\t\tvar post_data = querystring.stringify({\r\n\t\t\t&#39;grant_type&#39;\t: &#39;authorization_code&#39;,\r\n\t\t\t&#39;client_id&#39;\t\t: googleJson.web.client_id,\r\n\t\t\t&#39;client_secret&#39;\t: googleJson.web.client_secret,\r\n\t\t\t&#39;code&#39;\t\t\t: code,\r\n\t\t\t&#39;redirect_uri&#39;\t: googleJson.web.redirect_uris[0]\r\n\t\t});\r\n\t\t\r\n\t\tvar post_options = {\r\n\t      host: &#39;accounts.google.com&#39;,\r\n\t      port: &#39;443&#39;,\r\n\t      path: &#39;/o/oauth2/token&#39;,\r\n\t      method: &#39;POST&#39;,\r\n\t      headers: {\r\n\t          &#39;Content-Type&#39;: &#39;application/x-www-form-urlencoded&#39;,\r\n\t          &#39;Content-Length&#39;: post_data.length\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar post_req = https.request(post_options, function(res) {\r\n\t\t\tres.setEncoding(&#39;utf8&#39;);\r\n\t\t\tvar data = &quot;&quot;;\r\n\t\t\tres.on(&#39;data&#39;, function (chunk) {\r\n\t\t\t\tdata += chunk;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tres.on(&#39;end&#39;, function(){\r\n\t\t\t\tvar obj = JSON.parse(data);\r\n\t\t\t\tif(obj.refresh_token)\r\n\t\t\t\t{\r\n\t\t\t\t\trefreshToken = obj.refresh_token;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tconsole.log(&quot;No refresh token found. I had to clear the web client id in Google Api Console and create a new one. There might be a better way here.&quot;);\r\n\t\t\t\t}\t\r\n\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tpost_req.write(post_data);\r\n\t\tpost_req.end();\r\n\t}\r\n\t\r\n\tfunction printAccessToken()\r\n\t{\r\n\t\tvar post_data = querystring.stringify({\r\n\t\t\t&#39;grant_type&#39;\t: &#39;refresh_token&#39;,\r\n\t\t\t&#39;client_id&#39;\t\t: googleJson.web.client_id,\r\n\t\t\t&#39;client_secret&#39;\t: googleJson.web.client_secret,\r\n\t\t\t&#39;refresh_token&#39;\t: refreshToken\r\n\t\t});\r\n\t\t\r\n\t\tvar post_options = {\r\n\t      host: &#39;accounts.google.com&#39;,\r\n\t      port: &#39;443&#39;,\r\n\t      path: &#39;/o/oauth2/token&#39;,\r\n\t      method: &#39;POST&#39;,\r\n\t      headers: {\r\n\t          &#39;Content-Type&#39;: &#39;application/x-www-form-urlencoded&#39;,\r\n\t          &#39;Content-Length&#39;: post_data.length\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar post_req = https.request(post_options, function(res) {\r\n\t\t\tres.setEncoding(&#39;utf8&#39;);\r\n\t\t\tvar data = &quot;&quot;;\r\n\t\t\tres.on(&#39;data&#39;, function (chunk) {\r\n\t\t\t\tdata += chunk;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tres.on(&#39;end&#39;, function(){\r\n\t\t\t\tvar obj = JSON.parse(data);\r\n\t\t\t\tif(obj.access_token)\r\n\t\t\t\t\taccessToken = obj.access_token;\r\n\t\t\t\telse\r\n\t\t\t\t\tconsole.log(&quot;No access token found.&quot;);\r\n\t\t\t\t\t\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tpost_req.write(post_data);\r\n\t\tpost_req.end();\r\n\t}\r\n\t\r\n\tprintGoogleAuthUrl();\r\n\t//printRefreshToken();\t\r\n\t//printAccessToken();\r\n\r\n\r\n","title":"Unable to get the subscription information from Google Play Android Developer API","body":"<p>To piggyback on Jonathan Naguin's great answer, here is a nodejs version of getting the refresh and access token:</p>\n\n<pre><code>//This script is to retreive a refresh token and an access token from Google API. \n//NOTE: The refresh token will only appear the first time your client credentials are used. \n//      I had to delete my client id within api console and create a new one to get the refresh token again.\n\n//This is the downloaded json object from Google API Console. Just copy and paste over the template below.\nvar googleJson = {\"web\":{\"auth_uri\":\"\",\"client_secret\":\"\",\"token_uri\":\"\",\"client_email\":\"\",\"redirect_uris\":[\"\"],\"client_x509_cert_url\":\"\",\"client_id\":\"\",\"auth_provider_x509_cert_url\":\"\",\"javascript_origins\":[\"\"]}};\n\n//Retrieved from OAuth\nvar code            = ''; // Retrieved from the response of the URL generated by printGoogleAuthUrl(). You will need to be logged in as your publisher. Copy and paste the generated url. Copy the code parameter into this variable.\nvar refreshToken    = ''; // Retrieved from the printRefreshToken() function call. Requires the code variable to be filled out.\nvar accessToken     = ''; // Retrieved from the printAccessToken() function call. Requires the refreshToken variable to be filled out.\n\n\nvar querystring = require('querystring');\nvar https = require('https');\nvar fs = require('fs');\n\nfunction printGoogleAuthUrl()\n{\n    console.log(\"https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/androidpublisher&amp;response_type=code&amp;access_type=offline&amp;redirect_uri=\" + googleJson.web.redirect_uris[0] + \"&amp;client_id=\" + googleJson.web.client_id);\n}\n\nfunction printRefreshToken()\n{\n    var post_data = querystring.stringify({\n        'grant_type'    : 'authorization_code',\n        'client_id'     : googleJson.web.client_id,\n        'client_secret' : googleJson.web.client_secret,\n        'code'          : code,\n        'redirect_uri'  : googleJson.web.redirect_uris[0]\n    });\n\n    var post_options = {\n      host: 'accounts.google.com',\n      port: '443',\n      path: '/o/oauth2/token',\n      method: 'POST',\n      headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n          'Content-Length': post_data.length\n        }\n    };\n\n    var post_req = https.request(post_options, function(res) {\n        res.setEncoding('utf8');\n        var data = \"\";\n        res.on('data', function (chunk) {\n            data += chunk;\n        });\n\n        res.on('end', function(){\n            var obj = JSON.parse(data);\n            if(obj.refresh_token)\n            {\n                refreshToken = obj.refresh_token;\n            }\n            else\n            {\n                console.log(\"No refresh token found. I had to clear the web client id in Google Api Console and create a new one. There might be a better way here.\");\n            }   \n\n            console.log(data);\n\n        });\n    });\n\n    post_req.write(post_data);\n    post_req.end();\n}\n\nfunction printAccessToken()\n{\n    var post_data = querystring.stringify({\n        'grant_type'    : 'refresh_token',\n        'client_id'     : googleJson.web.client_id,\n        'client_secret' : googleJson.web.client_secret,\n        'refresh_token' : refreshToken\n    });\n\n    var post_options = {\n      host: 'accounts.google.com',\n      port: '443',\n      path: '/o/oauth2/token',\n      method: 'POST',\n      headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n          'Content-Length': post_data.length\n        }\n    };\n\n    var post_req = https.request(post_options, function(res) {\n        res.setEncoding('utf8');\n        var data = \"\";\n        res.on('data', function (chunk) {\n            data += chunk;\n        });\n\n        res.on('end', function(){\n            var obj = JSON.parse(data);\n            if(obj.access_token)\n                accessToken = obj.access_token;\n            else\n                console.log(\"No access token found.\");\n\n            console.log(data);\n\n        });\n    });\n\n    post_req.write(post_data);\n    post_req.end();\n}\n\nprintGoogleAuthUrl();\n//printRefreshToken();  \n//printAccessToken();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":55342,"reputation":5776,"user_id":165708,"display_name":"Miha Hribar"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1611309685,"creation_date":1403010519,"answer_id":24264696,"question_id":11115381,"body_markdown":"You can use `com.google.api-client` and `google-api-services-androidpublisher` libraries.\r\n\r\nFirst go to the project on google developer console (https://console.developers.google.com)\r\n\r\n - APIs &amp; Auth -&gt; APIs\r\n - Enable &quot;Google Play Android Developer API&quot;\r\n - Go to Credentials -&gt; Create new Client ID\r\n - Select service account\r\n - Create client ID\r\n - Save the p12 file somewhere safe\r\n\r\nThen add the just generated email address for the service account to your google play developer console (https://play.google.com/apps/publish/)\r\n\r\n - Settings -&gt; Users and permissions -&gt; Invite new users\r\n - Paste the `@developer.gserviceaccount.com` email account \r\n - Select &quot;View financial reports&quot;\r\n - Send invitation\r\n\r\nNow to the code. Add the following dependencies to your pom.xml file:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\r\n        &lt;artifactId&gt;google-api-client&lt;/artifactId&gt;\r\n        &lt;version&gt;1.18.0-rc&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.http-client&lt;/groupId&gt;\r\n        &lt;artifactId&gt;google-http-client-jackson2&lt;/artifactId&gt;\r\n        &lt;version&gt;1.18.0-rc&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\r\n        &lt;artifactId&gt;google-api-services-androidpublisher&lt;/artifactId&gt;\r\n        &lt;version&gt;v1.1-rev25-1.18.0-rc&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThen first validate the signature:\r\n\r\n    byte[] decoded = BASE64DecoderStream.decode(KEY.getBytes());\r\n    KeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;);\r\n    PublicKey publicKey = keyFactory.generatePublic(new X509EncodedKeySpec(decoded));\r\n    Signature sig = Signature.getInstance(&quot;SHA1withRSA&quot;);\r\n    sig.initVerify(publicKey);\r\n    sig.update(signedData.getBytes());\r\n    if (sig.verify(BASE64DecoderStream.decode(signature.getBytes())))\r\n    {\r\n        // Valid\r\n    }\r\n\r\nIf the signature verifies fetch subscription details:\r\n\r\n    // fetch signature details from google\r\n    HttpTransport httpTransport = GoogleNetHttpTransport.newTrustedTransport();\r\n    JsonFactory jsonFactory = JacksonFactory.getDefaultInstance();\r\n    GoogleCredential credential = new GoogleCredential.Builder()\r\n        .setTransport(httpTransport)\r\n        .setJsonFactory(jsonFactory)\r\n        .setServiceAccountId(ACCOUNT_ID)\r\n        .setServiceAccountScopes(Collections.singleton(&quot;https://www.googleapis.com/auth/androidpublisher&quot;))\r\n        .setServiceAccountPrivateKeyFromP12File(new File(&quot;key.p12&quot;))\r\n        .build();\r\n\r\n    AndroidPublisher pub = new AndroidPublisher.Builder(httpTransport, jsonFactory, credential)\r\n        .setApplicationName(APPLICATION_NAME)\r\n        .build();\r\n    AndroidPublisher.Purchases.Get get = pub.purchases().get(\r\n        APPLICATION_NAME,\r\n        PRODUCT_ID,\r\n        token);\r\n    SubscriptionPurchase subscription = get.execute();\r\n    System.out.println(subscription.toPrettyString());\r\n\r\nThis will take care of all the token issues by generating a JWT token so you don&#39;t have to handle it yourself.","title":"Unable to get the subscription information from Google Play Android Developer API","body":"<p>You can use <code>com.google.api-client</code> and <code>google-api-services-androidpublisher</code> libraries.</p>\n<p>First go to the project on google developer console (<a href=\"https://console.developers.google.com\" rel=\"nofollow noreferrer\">https://console.developers.google.com</a>)</p>\n<ul>\n<li>APIs &amp; Auth -&gt; APIs</li>\n<li>Enable &quot;Google Play Android Developer API&quot;</li>\n<li>Go to Credentials -&gt; Create new Client ID</li>\n<li>Select service account</li>\n<li>Create client ID</li>\n<li>Save the p12 file somewhere safe</li>\n</ul>\n<p>Then add the just generated email address for the service account to your google play developer console (<a href=\"https://play.google.com/apps/publish/\" rel=\"nofollow noreferrer\">https://play.google.com/apps/publish/</a>)</p>\n<ul>\n<li>Settings -&gt; Users and permissions -&gt; Invite new users</li>\n<li>Paste the <code>@developer.gserviceaccount.com</code> email account</li>\n<li>Select &quot;View financial reports&quot;</li>\n<li>Send invitation</li>\n</ul>\n<p>Now to the code. Add the following dependencies to your pom.xml file:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\n    &lt;artifactId&gt;google-api-client&lt;/artifactId&gt;\n    &lt;version&gt;1.18.0-rc&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.google.http-client&lt;/groupId&gt;\n    &lt;artifactId&gt;google-http-client-jackson2&lt;/artifactId&gt;\n    &lt;version&gt;1.18.0-rc&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\n    &lt;artifactId&gt;google-api-services-androidpublisher&lt;/artifactId&gt;\n    &lt;version&gt;v1.1-rev25-1.18.0-rc&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Then first validate the signature:</p>\n<pre><code>byte[] decoded = BASE64DecoderStream.decode(KEY.getBytes());\nKeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;);\nPublicKey publicKey = keyFactory.generatePublic(new X509EncodedKeySpec(decoded));\nSignature sig = Signature.getInstance(&quot;SHA1withRSA&quot;);\nsig.initVerify(publicKey);\nsig.update(signedData.getBytes());\nif (sig.verify(BASE64DecoderStream.decode(signature.getBytes())))\n{\n    // Valid\n}\n</code></pre>\n<p>If the signature verifies fetch subscription details:</p>\n<pre><code>// fetch signature details from google\nHttpTransport httpTransport = GoogleNetHttpTransport.newTrustedTransport();\nJsonFactory jsonFactory = JacksonFactory.getDefaultInstance();\nGoogleCredential credential = new GoogleCredential.Builder()\n    .setTransport(httpTransport)\n    .setJsonFactory(jsonFactory)\n    .setServiceAccountId(ACCOUNT_ID)\n    .setServiceAccountScopes(Collections.singleton(&quot;https://www.googleapis.com/auth/androidpublisher&quot;))\n    .setServiceAccountPrivateKeyFromP12File(new File(&quot;key.p12&quot;))\n    .build();\n\nAndroidPublisher pub = new AndroidPublisher.Builder(httpTransport, jsonFactory, credential)\n    .setApplicationName(APPLICATION_NAME)\n    .build();\nAndroidPublisher.Purchases.Get get = pub.purchases().get(\n    APPLICATION_NAME,\n    PRODUCT_ID,\n    token);\nSubscriptionPurchase subscription = get.execute();\nSystem.out.println(subscription.toPrettyString());\n</code></pre>\n<p>This will take care of all the token issues by generating a JWT token so you don't have to handle it yourself.</p>\n"},{"tags":[],"owner":{"account_id":280625,"reputation":1405,"user_id":576442,"accept_rate":73,"display_name":"Tomcat"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1429442628,"creation_date":1429440621,"answer_id":29728826,"question_id":11115381,"body_markdown":"For those who want to check subscription status on Google&#39;s AppEngine with Java, here is my working example based on many codes found on SO. I spent couple of days to solve many mistakes caused by lack of experience. I see lot of suggestions to check subscription status on server but it was not easy for me to do on AppEngine. Without answers found on SO, I could not come up with this. \r\n\r\n**Step 1**\r\n\r\nFirst we need to go through &quot;Prerequisite&quot; section found on Jonathan Naguin&#39;s answer, until you get **code** from web browser. Now you have;\r\n\r\n - Client ID\r\n - Client secret\r\n - Redirect URI\r\n - code\r\n\r\nready.\r\n\r\nNote we run all codes shown below on AppEngine. And I used logger like this.\r\n\r\n    static final Logger log\t= Logger.getLogger(MyClassName.class.getName());\r\n\r\n\r\n**Step 2**\r\n\r\nWe need to get refresh token. Run code shown below after replacing [YOUR CLIENT ID], [YOUR CLIENT SECRET], [YOUR CODE], [YOUR REDIRECT URI] with your string.\r\n\r\n    private String getRefreshToken()\r\n\t{\r\n\t    try\r\n\t    {\r\n\t\t\tMap&lt;String,Object&gt; params = new LinkedHashMap&lt;&gt;();\r\n\t\t\tparams.put(&quot;grant_type&quot;,&quot;authorization_code&quot;);\r\n\t\t\tparams.put(&quot;client_id&quot;,[YOUR CLIENT ID]);\r\n\t        params.put(&quot;client_secret&quot;,[YOUR CLIENT SECRET]);\r\n\t        params.put(&quot;code&quot;,[YOUR CODE]);\r\n\t        params.put(&quot;redirect_uri&quot;,[YOUR REDIRECT URI]);\r\n\r\n\t\t\tStringBuilder postData = new StringBuilder();\r\n\t\t\tfor(Map.Entry&lt;String,Object&gt; param : params.entrySet())\r\n\t\t\t{\r\n\t\t\t\tif(postData.length() != 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tpostData.append(&#39;&amp;&#39;);\r\n\t\t\t\t}\r\n\t\t\t\tpostData.append(URLEncoder.encode(param.getKey(),&quot;UTF-8&quot;));\r\n\t\t\t\tpostData.append(&#39;=&#39;);\r\n\t\t\t\tpostData.append(URLEncoder.encode(String.valueOf(param.getValue()),&quot;UTF-8&quot;));\r\n\t\t\t}\r\n\t\t\tbyte[] postDataBytes = postData.toString().getBytes(&quot;UTF-8&quot;);\r\n\r\n\t\t\tURL url = new URL(&quot;https://accounts.google.com/o/oauth2/token&quot;);\r\n\t\t\tHttpURLConnection conn = (HttpURLConnection)url.openConnection();\r\n\t\t\tconn.setDoOutput(true);\r\n\t\t\tconn.setUseCaches(false);\r\n\t\t\tconn.setRequestMethod(&quot;POST&quot;);\r\n        \tconn.getOutputStream().write(postDataBytes);\r\n\r\n\t\t\tBufferedReader\treader = new BufferedReader(new InputStreamReader(conn.getInputStream()));\r\n\t        StringBuffer buffer = new StringBuffer();\r\n\t        for (String line = reader.readLine(); line != null; line = reader.readLine())\r\n\t        {\r\n\t            buffer.append(line);\r\n\t        }\r\n\r\n\t        JSONObject json = new JSONObject(buffer.toString());\r\n\t        String refreshToken = json.getString(&quot;refresh_token&quot;);\r\n\t        return refreshToken;\r\n\t    }\r\n\t    catch (Exception ex)\r\n\t    {\r\n\t\t\tlog.severe(&quot;oops! &quot; + ex.getMessage());\r\n\t\t}\r\n\t    return null;\r\n    }\r\n\r\nSince refresh token won&#39;t expire, we can save it somewhere or simply hard-code in our code. (We only need to run above code once to get refresh token.)\r\n\r\n**Step 3**\r\n\r\nWe need to get access token. Run code shown below after replacing [YOUR CLIENT ID], [YOUR CLIENT SECRET], [YOUR REFRESH TOKEN] with your string.\r\n\r\n    private String getAccessToken()\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tMap&lt;String,Object&gt; params = new LinkedHashMap&lt;&gt;();\r\n\t\t\tparams.put(&quot;grant_type&quot;,&quot;refresh_token&quot;);\r\n\t\t\tparams.put(&quot;client_id&quot;,[YOUR CLIENT ID]);\r\n\t        params.put(&quot;client_secret&quot;,[YOUR CLIENT SECRET]);\r\n\t        params.put(&quot;refresh_token&quot;,[YOUR REFRESH TOKEN]);\r\n\r\n\t\t\tStringBuilder postData = new StringBuilder();\r\n\t\t\tfor(Map.Entry&lt;String,Object&gt; param : params.entrySet())\r\n\t\t\t{\r\n\t\t\t\tif(postData.length() != 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tpostData.append(&#39;&amp;&#39;);\r\n\t\t\t\t}\r\n\t\t\t\tpostData.append(URLEncoder.encode(param.getKey(),&quot;UTF-8&quot;));\r\n\t\t\t\tpostData.append(&#39;=&#39;);\r\n\t\t\t\tpostData.append(URLEncoder.encode(String.valueOf(param.getValue()),&quot;UTF-8&quot;));\r\n\t\t\t}\r\n\t\t\tbyte[] postDataBytes = postData.toString().getBytes(&quot;UTF-8&quot;);\r\n\r\n\t\t\tURL url = new URL(&quot;https://accounts.google.com/o/oauth2/token&quot;);\r\n\t\t\tHttpURLConnection conn = (HttpURLConnection)url.openConnection();\r\n\t\t\tconn.setDoOutput(true);\r\n\t\t\tconn.setUseCaches(false);\r\n\t\t\tconn.setRequestMethod(&quot;POST&quot;);\r\n        \tconn.getOutputStream().write(postDataBytes);\r\n\r\n\t\t\tBufferedReader\treader = new BufferedReader(new InputStreamReader(conn.getInputStream()));\r\n\t        StringBuffer buffer = new StringBuffer();\r\n\t        for (String line = reader.readLine(); line != null; line = reader.readLine())\r\n\t        {\r\n\t            buffer.append(line);\r\n\t        }\r\n\r\n\t        JSONObject json = new JSONObject(buffer.toString());\r\n\t        String accessToken = json.getString(&quot;access_token&quot;);\r\n\t        return accessToken;\r\n\t    }\r\n\t    catch (Exception ex)\r\n\t    {\r\n\t\t\tlog.severe(&quot;oops! &quot; + ex.getMessage());\r\n\t\t}\r\n\t    return null;\r\n    }\r\n\r\n**Step 4**\r\n\r\nWhat I wanted to know is just expire UTC of the subscription. Code shown below returns expire UTC, 0 when found error. You need to provide your package name, product id (=subscription id), access token you got on Step 3, and purchase token found in your purchase data.\r\n\r\n    private long getExpireDate(String packageName,String productId,String accessToken,String purchaseToken)\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tString charset = &quot;UTF-8&quot;;\r\n\t\t\tString query = String.format(&quot;access_token=%s&quot;,URLEncoder.encode(accessToken,charset));\r\n\r\n\t\t\tString path = String.format(&quot;https://www.googleapis.com/androidpublisher/v1/applications/%s/subscriptions/%s/purchases/%s&quot;,packageName,productId,purchaseToken);\r\n\t\t\tURL url = new URL(path + &quot;?&quot; + query);\r\n\t\t\tHttpURLConnection connection = (HttpURLConnection)url.openConnection();\r\n\t\t\tconnection.setRequestProperty(&quot;Accept-Charset&quot;,charset);\r\n\t\t\tconnection.setRequestMethod(&quot;GET&quot;);\r\n\r\n\t\t\tBufferedReader\treader = new BufferedReader(new InputStreamReader(connection.getInputStream()));\r\n\t        StringBuffer buffer = new StringBuffer();\r\n\t        for(String line = reader.readLine(); line != null; line = reader.readLine())\r\n\t        {\r\n\t            buffer.append(line);\r\n\t        }\r\n\r\n\t        JSONObject json = new JSONObject(buffer.toString());\r\n\t        return json.optLong(&quot;validUntilTimestampMsec&quot;);\r\n\t    }\r\n\t    catch (Exception ex)\r\n\t    {\r\n\t\t\tlog.severe(&quot;oops! &quot; + ex.getMessage());\r\n\t\t}\r\n\t    return 0;\r\n    }\r\n\r\nNote product id or subscription id is a string found on developer console. Your subscription item appears with name/id column. It looks like this.\r\n\r\n    Description of item(product id)\r\n\r\n**Last step (fun part)**\r\n\r\nNow we have all components to verify subscription is valid or not. I did like this. You need to replace [YOUR PACKAGE NAME], [YOUR PRODUCT ID] with yours.\r\n\r\nYou need to provide purchase data which you can get with Purchase#getOriginalJson() found in iabHelper code.\r\n\r\n    private boolean checkValidSubscription(String purchaseData)\r\n\t{\r\n\t\tString purchaseToken;\r\n\t\tJSONObject json;\r\n\t\ttry\r\n\t\t{\r\n\t\t\tjson = new JSONObject(purchaseData);\r\n\t\t}\r\n\t\tcatch (JSONException e)\r\n\t\t{\r\n\t\t\tlog.severe(&quot;purchaseData is corrupted&quot;);\r\n\t\t\treturn true;\t// false positive\r\n\t\t}\r\n\t\tpurchaseToken = json.optString(&quot;purchaseToken&quot;);\r\n\t\tif(purchaseToken.length() == 0)\r\n\t\t{\r\n\t\t\tlog.severe(&quot;no purchase token found&quot;);\r\n\t\t\treturn true;\t// false positive\r\n\t\t}\r\n\t\tString accessToken = getAccessToken();\r\n\t\tif(accessToken == null)\r\n\t\t{\r\n\t\t\treturn true;\t// false positive\r\n\t\t}\r\n\t\tlong expireDate = getExpireDate([YOUR PACKAGE NAME],[YOUR PRODUCT ID],accessToken,purchaseToken);\r\n\t\tif(expireDate == 0)\r\n\t\t{\r\n\t\t\tlog.severe(&quot;no expire date found&quot;);\r\n\t\t\treturn true;\t// false positive\r\n\t\t}\r\n\t\texpireDate += 86400000l;\t// add one day to avoid mis judge\r\n\t\tif(expireDate  &lt; System.currentTimeMillis())\r\n\t\t{\r\n\t\t\tlog.severe(&quot;subscription is expired&quot;);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// just for log output\r\n\t\tlong leftDays = (expireDate - System.currentTimeMillis()) / 86400000l;\r\n\t\tlog.info(leftDays + &quot; days left&quot;);\r\n\t\treturn true;\r\n\t}\r\n\r\n**Note for debugging**\r\n\r\nGoogle returns JSON string for response. If code won&#39;t work as expected, logging JSON string may help understanding what is wrong.\r\n\r\nI hope this helps someone.\r\n","title":"Unable to get the subscription information from Google Play Android Developer API","body":"<p>For those who want to check subscription status on Google's AppEngine with Java, here is my working example based on many codes found on SO. I spent couple of days to solve many mistakes caused by lack of experience. I see lot of suggestions to check subscription status on server but it was not easy for me to do on AppEngine. Without answers found on SO, I could not come up with this. </p>\n\n<p><strong>Step 1</strong></p>\n\n<p>First we need to go through \"Prerequisite\" section found on Jonathan Naguin's answer, until you get <strong>code</strong> from web browser. Now you have;</p>\n\n<ul>\n<li>Client ID</li>\n<li>Client secret</li>\n<li>Redirect URI</li>\n<li>code</li>\n</ul>\n\n<p>ready.</p>\n\n<p>Note we run all codes shown below on AppEngine. And I used logger like this.</p>\n\n<pre><code>static final Logger log = Logger.getLogger(MyClassName.class.getName());\n</code></pre>\n\n<p><strong>Step 2</strong></p>\n\n<p>We need to get refresh token. Run code shown below after replacing [YOUR CLIENT ID], [YOUR CLIENT SECRET], [YOUR CODE], [YOUR REDIRECT URI] with your string.</p>\n\n<pre><code>private String getRefreshToken()\n{\n    try\n    {\n        Map&lt;String,Object&gt; params = new LinkedHashMap&lt;&gt;();\n        params.put(\"grant_type\",\"authorization_code\");\n        params.put(\"client_id\",[YOUR CLIENT ID]);\n        params.put(\"client_secret\",[YOUR CLIENT SECRET]);\n        params.put(\"code\",[YOUR CODE]);\n        params.put(\"redirect_uri\",[YOUR REDIRECT URI]);\n\n        StringBuilder postData = new StringBuilder();\n        for(Map.Entry&lt;String,Object&gt; param : params.entrySet())\n        {\n            if(postData.length() != 0)\n            {\n                postData.append('&amp;');\n            }\n            postData.append(URLEncoder.encode(param.getKey(),\"UTF-8\"));\n            postData.append('=');\n            postData.append(URLEncoder.encode(String.valueOf(param.getValue()),\"UTF-8\"));\n        }\n        byte[] postDataBytes = postData.toString().getBytes(\"UTF-8\");\n\n        URL url = new URL(\"https://accounts.google.com/o/oauth2/token\");\n        HttpURLConnection conn = (HttpURLConnection)url.openConnection();\n        conn.setDoOutput(true);\n        conn.setUseCaches(false);\n        conn.setRequestMethod(\"POST\");\n        conn.getOutputStream().write(postDataBytes);\n\n        BufferedReader  reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));\n        StringBuffer buffer = new StringBuffer();\n        for (String line = reader.readLine(); line != null; line = reader.readLine())\n        {\n            buffer.append(line);\n        }\n\n        JSONObject json = new JSONObject(buffer.toString());\n        String refreshToken = json.getString(\"refresh_token\");\n        return refreshToken;\n    }\n    catch (Exception ex)\n    {\n        log.severe(\"oops! \" + ex.getMessage());\n    }\n    return null;\n}\n</code></pre>\n\n<p>Since refresh token won't expire, we can save it somewhere or simply hard-code in our code. (We only need to run above code once to get refresh token.)</p>\n\n<p><strong>Step 3</strong></p>\n\n<p>We need to get access token. Run code shown below after replacing [YOUR CLIENT ID], [YOUR CLIENT SECRET], [YOUR REFRESH TOKEN] with your string.</p>\n\n<pre><code>private String getAccessToken()\n{\n    try\n    {\n        Map&lt;String,Object&gt; params = new LinkedHashMap&lt;&gt;();\n        params.put(\"grant_type\",\"refresh_token\");\n        params.put(\"client_id\",[YOUR CLIENT ID]);\n        params.put(\"client_secret\",[YOUR CLIENT SECRET]);\n        params.put(\"refresh_token\",[YOUR REFRESH TOKEN]);\n\n        StringBuilder postData = new StringBuilder();\n        for(Map.Entry&lt;String,Object&gt; param : params.entrySet())\n        {\n            if(postData.length() != 0)\n            {\n                postData.append('&amp;');\n            }\n            postData.append(URLEncoder.encode(param.getKey(),\"UTF-8\"));\n            postData.append('=');\n            postData.append(URLEncoder.encode(String.valueOf(param.getValue()),\"UTF-8\"));\n        }\n        byte[] postDataBytes = postData.toString().getBytes(\"UTF-8\");\n\n        URL url = new URL(\"https://accounts.google.com/o/oauth2/token\");\n        HttpURLConnection conn = (HttpURLConnection)url.openConnection();\n        conn.setDoOutput(true);\n        conn.setUseCaches(false);\n        conn.setRequestMethod(\"POST\");\n        conn.getOutputStream().write(postDataBytes);\n\n        BufferedReader  reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));\n        StringBuffer buffer = new StringBuffer();\n        for (String line = reader.readLine(); line != null; line = reader.readLine())\n        {\n            buffer.append(line);\n        }\n\n        JSONObject json = new JSONObject(buffer.toString());\n        String accessToken = json.getString(\"access_token\");\n        return accessToken;\n    }\n    catch (Exception ex)\n    {\n        log.severe(\"oops! \" + ex.getMessage());\n    }\n    return null;\n}\n</code></pre>\n\n<p><strong>Step 4</strong></p>\n\n<p>What I wanted to know is just expire UTC of the subscription. Code shown below returns expire UTC, 0 when found error. You need to provide your package name, product id (=subscription id), access token you got on Step 3, and purchase token found in your purchase data.</p>\n\n<pre><code>private long getExpireDate(String packageName,String productId,String accessToken,String purchaseToken)\n{\n    try\n    {\n        String charset = \"UTF-8\";\n        String query = String.format(\"access_token=%s\",URLEncoder.encode(accessToken,charset));\n\n        String path = String.format(\"https://www.googleapis.com/androidpublisher/v1/applications/%s/subscriptions/%s/purchases/%s\",packageName,productId,purchaseToken);\n        URL url = new URL(path + \"?\" + query);\n        HttpURLConnection connection = (HttpURLConnection)url.openConnection();\n        connection.setRequestProperty(\"Accept-Charset\",charset);\n        connection.setRequestMethod(\"GET\");\n\n        BufferedReader  reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));\n        StringBuffer buffer = new StringBuffer();\n        for(String line = reader.readLine(); line != null; line = reader.readLine())\n        {\n            buffer.append(line);\n        }\n\n        JSONObject json = new JSONObject(buffer.toString());\n        return json.optLong(\"validUntilTimestampMsec\");\n    }\n    catch (Exception ex)\n    {\n        log.severe(\"oops! \" + ex.getMessage());\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Note product id or subscription id is a string found on developer console. Your subscription item appears with name/id column. It looks like this.</p>\n\n<pre><code>Description of item(product id)\n</code></pre>\n\n<p><strong>Last step (fun part)</strong></p>\n\n<p>Now we have all components to verify subscription is valid or not. I did like this. You need to replace [YOUR PACKAGE NAME], [YOUR PRODUCT ID] with yours.</p>\n\n<p>You need to provide purchase data which you can get with Purchase#getOriginalJson() found in iabHelper code.</p>\n\n<pre><code>private boolean checkValidSubscription(String purchaseData)\n{\n    String purchaseToken;\n    JSONObject json;\n    try\n    {\n        json = new JSONObject(purchaseData);\n    }\n    catch (JSONException e)\n    {\n        log.severe(\"purchaseData is corrupted\");\n        return true;    // false positive\n    }\n    purchaseToken = json.optString(\"purchaseToken\");\n    if(purchaseToken.length() == 0)\n    {\n        log.severe(\"no purchase token found\");\n        return true;    // false positive\n    }\n    String accessToken = getAccessToken();\n    if(accessToken == null)\n    {\n        return true;    // false positive\n    }\n    long expireDate = getExpireDate([YOUR PACKAGE NAME],[YOUR PRODUCT ID],accessToken,purchaseToken);\n    if(expireDate == 0)\n    {\n        log.severe(\"no expire date found\");\n        return true;    // false positive\n    }\n    expireDate += 86400000l;    // add one day to avoid mis judge\n    if(expireDate  &lt; System.currentTimeMillis())\n    {\n        log.severe(\"subscription is expired\");\n        return false;\n    }\n    // just for log output\n    long leftDays = (expireDate - System.currentTimeMillis()) / 86400000l;\n    log.info(leftDays + \" days left\");\n    return true;\n}\n</code></pre>\n\n<p><strong>Note for debugging</strong></p>\n\n<p>Google returns JSON string for response. If code won't work as expected, logging JSON string may help understanding what is wrong.</p>\n\n<p>I hope this helps someone.</p>\n"},{"tags":[],"owner":{"account_id":1016877,"reputation":4098,"user_id":1028256,"accept_rate":43,"display_name":"Mixaz"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1633710261,"creation_date":1633707565,"answer_id":69498447,"question_id":11115381,"body_markdown":"For those looking for a more up-to-date answer with AndroidPublisher v3 please look here: https://stackoverflow.com/a/57943483/1028256.\r\n\r\nNo need to deal with refreshToken &amp; accessToken, and just few lines of code.\r\n\r\nFor Android client I found this &#39;official&#39; sample code: https://github.com/googlesamples/android-play-publisher-api/blob/master/v3/java/src/com/google/play/developerapi/samples/AndroidPublisherHelper.java and there are options to get AndroidPublisher both with .p12 file or the app credentials.","title":"Unable to get the subscription information from Google Play Android Developer API","body":"<p>For those looking for a more up-to-date answer with AndroidPublisher v3 please look here: <a href=\"https://stackoverflow.com/a/57943483/1028256\">https://stackoverflow.com/a/57943483/1028256</a>.</p>\n<p>No need to deal with refreshToken &amp; accessToken, and just few lines of code.</p>\n<p>For Android client I found this 'official' sample code: <a href=\"https://github.com/googlesamples/android-play-publisher-api/blob/master/v3/java/src/com/google/play/developerapi/samples/AndroidPublisherHelper.java\" rel=\"nofollow noreferrer\">https://github.com/googlesamples/android-play-publisher-api/blob/master/v3/java/src/com/google/play/developerapi/samples/AndroidPublisherHelper.java</a> and there are options to get AndroidPublisher both with .p12 file or the app credentials.</p>\n"}],"owner":{"account_id":206175,"reputation":14566,"user_id":455302,"accept_rate":76,"display_name":"Jonathan Naguin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38245,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":12710896,"answer_count":6,"score":29,"last_activity_date":1633710261,"creation_date":1340180043,"question_id":11115381,"body_markdown":"I&#39;trying to use Google APIs Client Library for Java to get information about user&#39;s subscriptions purchased in my android app. Here is how I&#39;m doing for now:\r\n\r\n    HttpTransport HTTP_TRANSPORT = new NetHttpTransport();\r\n    JsonFactory JSON_FACTORY = new JacksonFactory();\r\n    \r\n    GoogleCredential credential = new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)\r\n    \t\t\t        .setJsonFactory(JSON_FACTORY)\r\n    \t\t\t        .setServiceAccountId(GOOGLE_CLIENT_MAIL)\r\n    \t\t\t        .setServiceAccountScopes(&quot;https://www.googleapis.com/auth/androidpublisher&quot;)\r\n    \t\t\t        .setServiceAccountPrivateKeyFromP12File(new File(GOOGLE_KEY_FILE_PATH))\r\n    \t\t\t        .build();\r\n    \t\t\t\r\n    Androidpublisher publisher = new Androidpublisher.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential).\r\n    \t\t\t\t\tsetApplicationName(GOOGLE_PRODUCT_NAME).\r\n    \t\t\t\t\tbuild();\r\n    \t\t\t\r\n    Androidpublisher.Purchases purchases = publisher.purchases();\r\n    Get get = purchases.get(&quot;XXXXX&quot;, subscriptionId, token);\r\n    SubscriptionPurchase subscripcion = get.execute(); //Exception returned here\r\n\r\n\r\n`GOOGLE_CLIENT_MAIL` is the email address from API Access from the Google Console.\r\n`GOOGLE_KEY_FILE_PATH` is the p12 file downloaded from the API Access.   \r\n`GOOGLE_PRODUCT_NAME` is the product name from the branding information.   \r\nIn Google APIS Console the Service &quot;Google Play Android Developer API&quot; is enabled.\r\n\r\nWhat I&#39;m getting is: \r\n\r\n    {\r\n      &quot;code&quot; : 401,\r\n      &quot;errors&quot; : [ {\r\n        &quot;domain&quot; : &quot;androidpublisher&quot;,\r\n        &quot;message&quot; : &quot;This developer account does not own the application.&quot;,\r\n        &quot;reason&quot; : &quot;developerDoesNotOwnApplication&quot;\r\n      } ],\r\n      &quot;message&quot; : &quot;This developer account does not own the application.&quot;\r\n    }\r\n\r\nI really appreciate your help for this issue...","title":"Unable to get the subscription information from Google Play Android Developer API","body":"<p>I'trying to use Google APIs Client Library for Java to get information about user's subscriptions purchased in my android app. Here is how I'm doing for now:</p>\n\n<pre><code>HttpTransport HTTP_TRANSPORT = new NetHttpTransport();\nJsonFactory JSON_FACTORY = new JacksonFactory();\n\nGoogleCredential credential = new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)\n                    .setJsonFactory(JSON_FACTORY)\n                    .setServiceAccountId(GOOGLE_CLIENT_MAIL)\n                    .setServiceAccountScopes(\"https://www.googleapis.com/auth/androidpublisher\")\n                    .setServiceAccountPrivateKeyFromP12File(new File(GOOGLE_KEY_FILE_PATH))\n                    .build();\n\nAndroidpublisher publisher = new Androidpublisher.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential).\n                    setApplicationName(GOOGLE_PRODUCT_NAME).\n                    build();\n\nAndroidpublisher.Purchases purchases = publisher.purchases();\nGet get = purchases.get(\"XXXXX\", subscriptionId, token);\nSubscriptionPurchase subscripcion = get.execute(); //Exception returned here\n</code></pre>\n\n<p><code>GOOGLE_CLIENT_MAIL</code> is the email address from API Access from the Google Console.\n<code>GOOGLE_KEY_FILE_PATH</code> is the p12 file downloaded from the API Access.<br>\n<code>GOOGLE_PRODUCT_NAME</code> is the product name from the branding information.<br>\nIn Google APIS Console the Service \"Google Play Android Developer API\" is enabled.</p>\n\n<p>What I'm getting is: </p>\n\n<pre><code>{\n  \"code\" : 401,\n  \"errors\" : [ {\n    \"domain\" : \"androidpublisher\",\n    \"message\" : \"This developer account does not own the application.\",\n    \"reason\" : \"developerDoesNotOwnApplication\"\n  } ],\n  \"message\" : \"This developer account does not own the application.\"\n}\n</code></pre>\n\n<p>I really appreciate your help for this issue...</p>\n"},{"tags":["java","class","hashmap","instance"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1633622410,"post_id":69484219,"comment_id":122814756,"body_markdown":"It&#39;s a little hard to follow your code with all those `map.get(a)` calls etc. Advice for better readability: if they return the same thing, call it once and assing the return value to a variable with a proper name. Also improve names of your parameters, i.e. `a` and `b` are hard to follow - maybe better use `sourcePerson` and `targetPerson` (source is where the graph traversal starts, target is where it should end).","body":"It&#39;s a little hard to follow your code with all those <code>map.get(a)</code> calls etc. Advice for better readability: if they return the same thing, call it once and assing the return value to a variable with a proper name. Also improve names of your parameters, i.e. <code>a</code> and <code>b</code> are hard to follow - maybe better use <code>sourcePerson</code> and <code>targetPerson</code> (source is where the graph traversal starts, target is where it should end)."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1633622597,"post_id":69484219,"comment_id":122814824,"body_markdown":"As for the logic of your class: try to take one &quot;hop&quot; at a time, i.e. follow the arrows unti you&#39;re out of options, reach a cycle (keep a set of people you already checked) or found the target person. Then count how many hops you needed (you might have to carry the value around for certain &quot;routes&quot; if there are more than one way, i.e. Anne knows Daisy directly (1 hop) or via Bob (2 hops).","body":"As for the logic of your class: try to take one &quot;hop&quot; at a time, i.e. follow the arrows unti you&#39;re out of options, reach a cycle (keep a set of people you already checked) or found the target person. Then count how many hops you needed (you might have to carry the value around for certain &quot;routes&quot; if there are more than one way, i.e. Anne knows Daisy directly (1 hop) or via Bob (2 hops)."}],"answers":[{"tags":[],"owner":{"account_id":13404321,"reputation":438,"user_id":9672799,"display_name":"Geoff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1633626960,"creation_date":1633626960,"answer_id":69485284,"question_id":69484219,"body_markdown":"Here is an example using recursion:\r\n\r\n```\r\n\r\n\r\n\t\tpublic boolean knowsWithDegree(String a, String b, int x) {\r\n\t\t\treturn knowsWithDegreeRecursive(a, b, x, new HashSet&lt;&gt;());\r\n\t\t}\r\n\t\t\r\n\t\tprivate boolean knowsWithDegreeRecursive(String a, String b, int x, Set&lt;String&gt; visited) {\r\n\t\t\tif (x &lt; 1) {\r\n\t\t\t\t// x must be at least 1\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\tif (map.get(a).contains(b)) {\r\n\t\t\t\t// If a knows b, then the number of degrees should be 1\r\n\t\t\t\treturn x == 1;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (x == 1) {\r\n\t\t\t\t// Since the degree is 1 and a does not know b, then a does not know b to the specified degree\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Go through each person that a knows\r\n\t\t\tfor (String c : map.get(a)) {\r\n\t\t\t\t\r\n\t\t\t\tif (visited.contains(c)) {\r\n\t\t\t\t\t// We&#39;ve already checked this person\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Mark c as visited so we don&#39;t check them again\r\n\t\t\t\tvisited.add(c);\r\n\t\t\t\t\r\n\t\t\t\t// See if this person knows b, with one fewer degree\r\n\t\t\t\t// e.g. if we&#39;re seeing if a knows b with a degree of 2, then c should know b with a degree of 1\r\n\t\t\t\tboolean knowsWithDegree = knowsWithDegreeRecursive(c, b, x - 1, visited);\r\n\t\t\t\t\r\n\t\t\t\t// If c knows b with the degree minus 1, then a knows b with the specified degree\r\n\t\t\t\tif (knowsWithDegree) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// a does not know b to the specified degree\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\r\n```\r\n\r\nIf the order of the `knowsArrows` doesn&#39;t matter, I would recommend using `HashSet` in your `map` over `ArrayList`.","title":"Referring to an instance that refers to an instance","body":"<p>Here is an example using recursion:</p>\n<pre><code>\n\n        public boolean knowsWithDegree(String a, String b, int x) {\n            return knowsWithDegreeRecursive(a, b, x, new HashSet&lt;&gt;());\n        }\n        \n        private boolean knowsWithDegreeRecursive(String a, String b, int x, Set&lt;String&gt; visited) {\n            if (x &lt; 1) {\n                // x must be at least 1\n                return false;\n            }\n            \n\n            if (map.get(a).contains(b)) {\n                // If a knows b, then the number of degrees should be 1\n                return x == 1;\n            }\n            \n            if (x == 1) {\n                // Since the degree is 1 and a does not know b, then a does not know b to the specified degree\n                return false;\n            }\n            \n            // Go through each person that a knows\n            for (String c : map.get(a)) {\n                \n                if (visited.contains(c)) {\n                    // We've already checked this person\n                    continue;\n                }\n                \n                // Mark c as visited so we don't check them again\n                visited.add(c);\n                \n                // See if this person knows b, with one fewer degree\n                // e.g. if we're seeing if a knows b with a degree of 2, then c should know b with a degree of 1\n                boolean knowsWithDegree = knowsWithDegreeRecursive(c, b, x - 1, visited);\n                \n                // If c knows b with the degree minus 1, then a knows b with the specified degree\n                if (knowsWithDegree) {\n                    return true;\n                }\n            }\n            \n            // a does not know b to the specified degree\n            return false;\n        }\n        \n\n</code></pre>\n<p>If the order of the <code>knowsArrows</code> doesn't matter, I would recommend using <code>HashSet</code> in your <code>map</code> over <code>ArrayList</code>.</p>\n"}],"owner":{"account_id":22930128,"reputation":5,"user_id":17064578,"display_name":"Tim Davalan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69485284,"answer_count":1,"score":0,"last_activity_date":1633709675,"creation_date":1633621930,"question_id":69484219,"body_markdown":"I am not sure if the title to this question is correct. \r\n\r\nI have this school assignment where we have to create two classes. \r\n\r\nIn one class, we define relationships between people e.g. A knows B, and in the other class we ask questions about that, e.g. does A know B?\r\n\r\nThe first class below defines relationships and gives methods, the second class inquires about them. \r\n\r\nI am sure that my mistake lies somewhere in the public boolean &#39;knowsWithDegree&#39;. Are you able to help?\r\n\r\n\r\n    public class SocialGraph {\r\n    \r\n        private HashMap&lt;String, List&lt;String&gt;&gt; map = new HashMap&lt;String, List&lt;String&gt;&gt;();\r\n        \r\n        public SocialGraph() {   // empty constructor\r\n            map = new HashMap&lt;String, List&lt;String&gt;&gt;();\r\n        }\r\n        \r\n        public void addIndividual(String a) {\r\n            if (!map.containsKey(a)) {\r\n                map.put(a, new ArrayList&lt;String&gt;());\r\n            } else {\r\n        \r\n            }\r\n        }\r\n        \r\n        public boolean hasKnowsArrow(String a, String b) {\r\n            if (map.containsKey(a)) {\r\n                return map.get(a).contains(b);\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        \r\n        public void addKnowsArrow(String a, String b) {\r\n        \r\n            if ((!map.containsKey(a) || !map.containsKey(b)) || (hasKnowsArrow(a, b))) {\r\n            } else {\r\n                map.get(a).add(b);\r\n            }\r\n        }\r\n        \r\n        public void removeKnowsArrow(String a, String b) {\r\n        \r\n            if ((!map.containsKey(a) || !map.containsKey(b)) || (!hasKnowsArrow(a, b))) {\r\n            } else {\r\n                map.get(a).remove(b);\r\n            }\r\n        }\r\n        \r\n        public boolean knowsWithDegree(String a, String b, int x) {\r\n            Object[] keys = map.keySet().toArray();\r\n        \r\n            int y;\r\n            y = 0;\r\n        \r\n            if (map.get(a).contains(b)) {\r\n                y = 1;\r\n            } else {\r\n        \r\n                if ((map.get(a).contains(map.get(keys[0]).contains(b))) || (map.get(a).contains(map.get(keys[1]).contains(b))) ||\r\n                        (map.get(a).contains(map.get(keys[2]).contains(b))) || (map.get(a).contains(map.get(keys[3]).contains(b)))) {\r\n                    y = 2;\r\n                }\r\n            }\r\n            if (x == y) {\r\n                return true;\r\n            } else\r\n                return false;\r\n            }\r\n        }\r\n        \r\n        \r\n        public class SocialGraphTest {\r\n        \r\n            public static void main(String[] args) {\r\n                SocialGraph socialGraph = new SocialGraph();\r\n                socialGraph.addIndividual(&quot;Anne&quot;);\r\n                socialGraph.addIndividual(&quot;Daisy&quot;);\r\n                socialGraph.addIndividual(&quot;Bob&quot;);\r\n                socialGraph.addIndividual(&quot;Charlie&quot;);\r\n            \r\n            \r\n                socialGraph.addKnowsArrow(&quot;Anne&quot;, &quot;Bob&quot;);\r\n                socialGraph.addKnowsArrow(&quot;Anne&quot;, &quot;Daisy&quot;);\r\n                socialGraph.addKnowsArrow(&quot;Bob&quot;, &quot;Daisy&quot;);\r\n                socialGraph.addKnowsArrow(&quot;Bob&quot;, &quot;Charlie&quot;);\r\n            \r\n                System.out.println(socialGraph.hasKnowsArrow(&quot;Anne&quot;, &quot;Bob&quot;)); //should be true\r\n                System.out.println(socialGraph.hasKnowsArrow(&quot;Anne&quot;, &quot;Daisy&quot;));//should be true\r\n                System.out.println(socialGraph.hasKnowsArrow(&quot;Bob&quot;, &quot;Daisy&quot;));//should be true\r\n                System.out.println(socialGraph.hasKnowsArrow(&quot;Bob&quot;, &quot;Charlie&quot;));//should be true\r\n                System.out.println(socialGraph.hasKnowsArrow(&quot;Anne&quot;, &quot;Charlie&quot;)); //should be false\r\n            \r\n                System.out.println ();\r\n            \r\n                System.out.println (socialGraph.knowsWithDegree (&quot;Anne&quot;, &quot;Daisy&quot;, 1));\r\n                System.out.println (socialGraph.knowsWithDegree (&quot;Anne&quot;, &quot;Charlie&quot;, 2));\r\n                System.out.println (socialGraph.knowsWithDegree (&quot;Anne&quot;, &quot;Daisy&quot;, 3));\r\n            \r\n            }\r\n        }\r\n    }","title":"Referring to an instance that refers to an instance","body":"<p>I am not sure if the title to this question is correct.</p>\n<p>I have this school assignment where we have to create two classes.</p>\n<p>In one class, we define relationships between people e.g. A knows B, and in the other class we ask questions about that, e.g. does A know B?</p>\n<p>The first class below defines relationships and gives methods, the second class inquires about them.</p>\n<p>I am sure that my mistake lies somewhere in the public boolean 'knowsWithDegree'. Are you able to help?</p>\n<pre><code>public class SocialGraph {\n\n    private HashMap&lt;String, List&lt;String&gt;&gt; map = new HashMap&lt;String, List&lt;String&gt;&gt;();\n    \n    public SocialGraph() {   // empty constructor\n        map = new HashMap&lt;String, List&lt;String&gt;&gt;();\n    }\n    \n    public void addIndividual(String a) {\n        if (!map.containsKey(a)) {\n            map.put(a, new ArrayList&lt;String&gt;());\n        } else {\n    \n        }\n    }\n    \n    public boolean hasKnowsArrow(String a, String b) {\n        if (map.containsKey(a)) {\n            return map.get(a).contains(b);\n        } else {\n            return false;\n        }\n    }\n    \n    public void addKnowsArrow(String a, String b) {\n    \n        if ((!map.containsKey(a) || !map.containsKey(b)) || (hasKnowsArrow(a, b))) {\n        } else {\n            map.get(a).add(b);\n        }\n    }\n    \n    public void removeKnowsArrow(String a, String b) {\n    \n        if ((!map.containsKey(a) || !map.containsKey(b)) || (!hasKnowsArrow(a, b))) {\n        } else {\n            map.get(a).remove(b);\n        }\n    }\n    \n    public boolean knowsWithDegree(String a, String b, int x) {\n        Object[] keys = map.keySet().toArray();\n    \n        int y;\n        y = 0;\n    \n        if (map.get(a).contains(b)) {\n            y = 1;\n        } else {\n    \n            if ((map.get(a).contains(map.get(keys[0]).contains(b))) || (map.get(a).contains(map.get(keys[1]).contains(b))) ||\n                    (map.get(a).contains(map.get(keys[2]).contains(b))) || (map.get(a).contains(map.get(keys[3]).contains(b)))) {\n                y = 2;\n            }\n        }\n        if (x == y) {\n            return true;\n        } else\n            return false;\n        }\n    }\n    \n    \n    public class SocialGraphTest {\n    \n        public static void main(String[] args) {\n            SocialGraph socialGraph = new SocialGraph();\n            socialGraph.addIndividual(&quot;Anne&quot;);\n            socialGraph.addIndividual(&quot;Daisy&quot;);\n            socialGraph.addIndividual(&quot;Bob&quot;);\n            socialGraph.addIndividual(&quot;Charlie&quot;);\n        \n        \n            socialGraph.addKnowsArrow(&quot;Anne&quot;, &quot;Bob&quot;);\n            socialGraph.addKnowsArrow(&quot;Anne&quot;, &quot;Daisy&quot;);\n            socialGraph.addKnowsArrow(&quot;Bob&quot;, &quot;Daisy&quot;);\n            socialGraph.addKnowsArrow(&quot;Bob&quot;, &quot;Charlie&quot;);\n        \n            System.out.println(socialGraph.hasKnowsArrow(&quot;Anne&quot;, &quot;Bob&quot;)); //should be true\n            System.out.println(socialGraph.hasKnowsArrow(&quot;Anne&quot;, &quot;Daisy&quot;));//should be true\n            System.out.println(socialGraph.hasKnowsArrow(&quot;Bob&quot;, &quot;Daisy&quot;));//should be true\n            System.out.println(socialGraph.hasKnowsArrow(&quot;Bob&quot;, &quot;Charlie&quot;));//should be true\n            System.out.println(socialGraph.hasKnowsArrow(&quot;Anne&quot;, &quot;Charlie&quot;)); //should be false\n        \n            System.out.println ();\n        \n            System.out.println (socialGraph.knowsWithDegree (&quot;Anne&quot;, &quot;Daisy&quot;, 1));\n            System.out.println (socialGraph.knowsWithDegree (&quot;Anne&quot;, &quot;Charlie&quot;, 2));\n            System.out.println (socialGraph.knowsWithDegree (&quot;Anne&quot;, &quot;Daisy&quot;, 3));\n        \n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","arrays","random"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1415556096,"post_id":26831340,"comment_id":42229385,"body_markdown":"Why do you have two classes in the first place? All you need in your main method is `int[] numbers = generateRandomNumbers(); displayArray(numbers);`, and then define these two static methods in the same class. Each of those 2 methods should use a loop: one to fill the array, and the other to display each element of the array. Don&#39;t make things more complex than they need to be, since you&#39;ve not grasped types and classes yet.","body":"Why do you have two classes in the first place? All you need in your main method is <code>int[] numbers = generateRandomNumbers(); displayArray(numbers);</code>, and then define these two static methods in the same class. Each of those 2 methods should use a loop: one to fill the array, and the other to display each element of the array. Don&#39;t make things more complex than they need to be, since you&#39;ve not grasped types and classes yet."}],"answers":[{"tags":[],"owner":{"account_id":3745237,"reputation":7388,"user_id":3114032,"accept_rate":100,"display_name":"Aniruddha K.M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1415556039,"creation_date":1415556039,"answer_id":26831378,"question_id":26831340,"body_markdown":"you have created an array of type RandomIntegers use this it will work `int[] numbers = new int[10];`\r\nthere is no problem with the code\r\n","title":"Generate 10 Random Integers storing them in an Array and then calling a Method to display the Array","body":"<p>you have created an array of type RandomIntegers use this it will work <code>int[] numbers = new int[10];</code>\nthere is no problem with the code</p>\n"},{"tags":[],"owner":{"account_id":4878731,"reputation":20470,"user_id":3933089,"accept_rate":67,"display_name":"chiastic-security"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1415556547,"creation_date":1415556046,"answer_id":26831380,"question_id":26831340,"body_markdown":"To generate a random *integer*, you&#39;re best off using this:\r\n\r\n    Random rand = new Random();\r\n    numbers[i] = rand.nextInt(20)+1;\r\n\r\nThe `rand.nextInt(20)` call will give a random number from 0 to 19, so adding 1 makes it from 1 to 20.\r\n\r\nIn practice, you don&#39;t need to create a new `Random()` every time; you&#39;d put this\r\n\r\n    Random rand = new Random();\r\n\r\nat the beginning of your loop, and then\r\n\r\n    numbers[i] = rand.nextInt(20)+1;\r\n\r\ninside it.\r\n\r\nSince you&#39;ve got several errors, I&#39;d suggest you start again, write your code bit by bit, and check at each stage that it compiles and does what you want. For instance, start by printing a single random number out, and check that that works.","title":"Generate 10 Random Integers storing them in an Array and then calling a Method to display the Array","body":"<p>To generate a random <em>integer</em>, you're best off using this:</p>\n\n<pre><code>Random rand = new Random();\nnumbers[i] = rand.nextInt(20)+1;\n</code></pre>\n\n<p>The <code>rand.nextInt(20)</code> call will give a random number from 0 to 19, so adding 1 makes it from 1 to 20.</p>\n\n<p>In practice, you don't need to create a new <code>Random()</code> every time; you'd put this</p>\n\n<pre><code>Random rand = new Random();\n</code></pre>\n\n<p>at the beginning of your loop, and then</p>\n\n<pre><code>numbers[i] = rand.nextInt(20)+1;\n</code></pre>\n\n<p>inside it.</p>\n\n<p>Since you've got several errors, I'd suggest you start again, write your code bit by bit, and check at each stage that it compiles and does what you want. For instance, start by printing a single random number out, and check that that works.</p>\n"},{"tags":[],"owner":{"account_id":5054722,"reputation":362,"user_id":4058288,"display_name":"NerosE"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1415557264,"creation_date":1415557264,"answer_id":26831599,"question_id":26831340,"body_markdown":"You only have to use a single for loop - like this:\r\n\r\n    public static void main(String[] args) \r\n    {\r\n        int[] numbers = new int[10];       \r\n        //Generates 10 Random Numbers in the range 1 -20\r\n        for(int i = 0; i &lt; numbers.length; i++) {\r\n          numbers[i] = (int)(Math.random()*20 + 1);\r\n        }//end for loop\r\n        System.out.println(&quot;Numbers Generated: &quot; + Arrays.toString(numbers));\r\n    }\r\n","title":"Generate 10 Random Integers storing them in an Array and then calling a Method to display the Array","body":"<p>You only have to use a single for loop - like this:</p>\n\n<pre><code>public static void main(String[] args) \n{\n    int[] numbers = new int[10];       \n    //Generates 10 Random Numbers in the range 1 -20\n    for(int i = 0; i &lt; numbers.length; i++) {\n      numbers[i] = (int)(Math.random()*20 + 1);\n    }//end for loop\n    System.out.println(\"Numbers Generated: \" + Arrays.toString(numbers));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2497273,"reputation":483,"user_id":2173372,"accept_rate":14,"display_name":"user2173372"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633709381,"creation_date":1633709381,"answer_id":69498815,"question_id":26831340,"body_markdown":"From Java 8 onwards you can use following:\r\n\r\n    public static void main(String[] args) {\r\n        int[] numbers = new Random().ints(1, 21).limit(10).toArray();\r\n        System.out.println(&quot;Numbers generated: &quot; + Arrays.toString(numbers));\r\n    }\r\nOutput:\r\n\r\n    Numbers generated: [4, 14, 8, 14, 19, 16, 13, 2, 3, 1]\r\nHere in `ints(randomNumberOrigin, randomNumberBound)` randomNumberOrigin is inclusive and randomNumberBound is exclusive. So you might want to increase randomNumberBound number by 1.\r\n\r\n","title":"Generate 10 Random Integers storing them in an Array and then calling a Method to display the Array","body":"<p>From Java 8 onwards you can use following:</p>\n<pre><code>public static void main(String[] args) {\n    int[] numbers = new Random().ints(1, 21).limit(10).toArray();\n    System.out.println(&quot;Numbers generated: &quot; + Arrays.toString(numbers));\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Numbers generated: [4, 14, 8, 14, 19, 16, 13, 2, 3, 1]\n</code></pre>\n<p>Here in <code>ints(randomNumberOrigin, randomNumberBound)</code> randomNumberOrigin is inclusive and randomNumberBound is exclusive. So you might want to increase randomNumberBound number by 1.</p>\n"}],"owner":{"account_id":5230714,"reputation":213,"user_id":4181145,"accept_rate":75,"display_name":"RifferRaffers"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87695,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":26831599,"answer_count":4,"score":2,"last_activity_date":1633709381,"creation_date":1415555822,"question_id":26831340,"body_markdown":"so i need to generate 10 random integers in the range 1-20 but i have to store them in an array\r\ncalled numbers. Then I have to call a method called displayArray which displays the contents of the\r\narray and for the assignment i have to use a for loop to traverse the array.\r\n\r\nThe method header for the displayArray method is:\r\n\r\n    public static void displayArray(int[] array)\r\n\r\n\r\n\r\nThis is what I have done\r\n\r\n    public class RandomIntegers {\r\n    \r\n\t    static int numbers = 0;\r\n\t\r\n\t    public static void displayArray(int[] array) {\r\n\t\t     System.out.println(numbers + &quot;Numbers Generated&quot;);\r\n\t    }\r\n\t\r\n    }//end class\r\n\r\nand\r\n\r\n    public class Random_Integers{\r\n\t\r\n\t    public static void main(String[] args) {\r\n\r\n\t        RandomIntegers[] numbers = new RandomIntegers[10];\r\n\r\n\t        //Generates 10 Random Numbers in the range 1 -20\r\n\t        for(int i = 0; i &lt; numbers.length; i++) {\r\n\t          numbers[i] = (int)(Math.random() * 20);\r\n\r\n                RandomIntegers Numbers = new RandomIntegers();\r\n            \r\n                numbers[i] = Numbers;\r\n            \r\n\t        }//end for loop\r\n\t    \r\n\t        for (int i = 0; i &lt; numbers.length; i++) {\r\n                numbers Numbers = numbers[i];\t    \r\n            \r\n                Numbers[i].displayArray;\t    \r\n                System.out.println();\r\n\t    \r\n\t        }//end for loop\r\n      }//end main method\r\n    }//end class\r\n\r\nAn error appears on the lines\r\n\r\nType mismatch cannot convert from int to RnadomIntegers\r\n\r\n    numbers[i] = (int)(Math.random() * 20);\r\n\r\nnumbers cannot be resolved to a type\r\n\r\n    numbers Numbers = numbers[i];\r\n\r\nSyntax error enter &#39;AssignmentOperator Expression&#39; to complete expression\r\n\r\n    Numbers[i].displayArray;\r\n\r\nI realize I need to assign an instance of the RandomIntegers class to the slot in the array to fix the first problem but i don&#39;t know how, could someone show me how do to so\r\n\r\nand i don&#39;t know how to fix the other 2 problems i&#39;m only learning how to use java so could someone please guide me in the right direction","title":"Generate 10 Random Integers storing them in an Array and then calling a Method to display the Array","body":"<p>so i need to generate 10 random integers in the range 1-20 but i have to store them in an array\ncalled numbers. Then I have to call a method called displayArray which displays the contents of the\narray and for the assignment i have to use a for loop to traverse the array.</p>\n\n<p>The method header for the displayArray method is:</p>\n\n<pre><code>public static void displayArray(int[] array)\n</code></pre>\n\n<p>This is what I have done</p>\n\n<pre><code>public class RandomIntegers {\n\n    static int numbers = 0;\n\n    public static void displayArray(int[] array) {\n         System.out.println(numbers + \"Numbers Generated\");\n    }\n\n}//end class\n</code></pre>\n\n<p>and</p>\n\n<pre><code>public class Random_Integers{\n\n    public static void main(String[] args) {\n\n        RandomIntegers[] numbers = new RandomIntegers[10];\n\n        //Generates 10 Random Numbers in the range 1 -20\n        for(int i = 0; i &lt; numbers.length; i++) {\n          numbers[i] = (int)(Math.random() * 20);\n\n            RandomIntegers Numbers = new RandomIntegers();\n\n            numbers[i] = Numbers;\n\n        }//end for loop\n\n        for (int i = 0; i &lt; numbers.length; i++) {\n            numbers Numbers = numbers[i];       \n\n            Numbers[i].displayArray;        \n            System.out.println();\n\n        }//end for loop\n  }//end main method\n}//end class\n</code></pre>\n\n<p>An error appears on the lines</p>\n\n<p>Type mismatch cannot convert from int to RnadomIntegers</p>\n\n<pre><code>numbers[i] = (int)(Math.random() * 20);\n</code></pre>\n\n<p>numbers cannot be resolved to a type</p>\n\n<pre><code>numbers Numbers = numbers[i];\n</code></pre>\n\n<p>Syntax error enter 'AssignmentOperator Expression' to complete expression</p>\n\n<pre><code>Numbers[i].displayArray;\n</code></pre>\n\n<p>I realize I need to assign an instance of the RandomIntegers class to the slot in the array to fix the first problem but i don't know how, could someone show me how do to so</p>\n\n<p>and i don't know how to fix the other 2 problems i'm only learning how to use java so could someone please guide me in the right direction</p>\n"},{"tags":["java","spring-boot","amazon-sqs"],"answers":[{"tags":[],"owner":{"account_id":35893,"reputation":3344,"user_id":102009,"accept_rate":100,"display_name":"MarkOfHall"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633709139,"creation_date":1633709139,"answer_id":69498762,"question_id":69497016,"body_markdown":" While it is *possible* to do what you&#39;re trying to do with Java synchronization it&#39;s a really bad idea for a number of reasons.\r\n\r\nSuggested solutions:\r\n\r\n 1. Use the JMSListener concurrency configuration to restrict the number or worker threads running for each listener.  [@JmsListener][1]\r\n 2. So, what.  Let the 3rd party api fail and throw an exception.  SQS will automatically retry.  You will want to configure your SQS queue&#39;s visibility timeout window and retry limits with your 3rd party API limits in mind.  [SQS Visibility Time Out][2]\r\n 3. Work with the 3rd party to increase your limits.\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jms/annotation/JmsListener.html#concurrency--\r\n  [2]: https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-visibility-timeout.html","title":"Spring boot AWS SqsListener sync operation","body":"<p>While it is <em>possible</em> to do what you're trying to do with Java synchronization it's a really bad idea for a number of reasons.</p>\n<p>Suggested solutions:</p>\n<ol>\n<li>Use the JMSListener concurrency configuration to restrict the number or worker threads running for each listener.  <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jms/annotation/JmsListener.html#concurrency--\" rel=\"nofollow noreferrer\">@JmsListener</a></li>\n<li>So, what.  Let the 3rd party api fail and throw an exception.  SQS will automatically retry.  You will want to configure your SQS queue's visibility timeout window and retry limits with your 3rd party API limits in mind.  <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-visibility-timeout.html\" rel=\"nofollow noreferrer\">SQS Visibility Time Out</a></li>\n<li>Work with the 3rd party to increase your limits.</li>\n</ol>\n"}],"owner":{"account_id":22980025,"reputation":85,"user_id":17107099,"display_name":"newbie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":969,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1633709139,"creation_date":1633701288,"question_id":69497016,"body_markdown":"I have few sqs listener consuming from some standard sqs queue.\r\n\r\nThese listeners are responsible to call upon some service method which in turn talk to some3rd-party data provider.\r\n\r\nWhen there are several messages consumed within short span of time, the load on service call to 3rd-party reaches it&#39;s limit(crosses rate limit).\r\n\r\n##### 1st listener\r\n\r\n```java \r\n\t@SqsListener(value = &quot;${cloud.aws.queue-1}&quot;, deletionPolicy = SqsMessageDeletionPolicy.NEVER)\r\n\tpublic void handleQueue1(final String message, @Header RequestType type, @Header(&quot;MessageId&quot;) String messageId, Acknowledgment acknowledgment) throws JsonProcessingException {\r\n\t\t..\r\n\t\t...\r\n\t\t\r\n\t\tsynchronized (this) {\r\n\t\t\t// call to some common service method\r\n\t\t}\r\n\t\t\r\n\t\t...\r\n\t\t..\r\n\t}\r\n\r\n```\r\n\r\n\r\n##### 2nd listener\r\n\r\n```Java\r\n\t@SqsListener(value = &quot;${cloud.aws.queue-2}&quot;, deletionPolicy = SqsMessageDeletionPolicy.NEVER)\r\n\tpublic void handleQueue2(final String message, @Header RequestType type, @Header(&quot;MessageId&quot;) String messageId, Acknowledgment acknowledgment) throws JsonProcessingException {\r\n\t\t..\r\n\t\t...\r\n\t\t\r\n\t\tsynchronized (this) {\r\n\t\t\t// call to some common service method\r\n\t\t}\r\n\t\t\r\n\t\t...\r\n\t\t..\r\n\t}\r\n```\r\n\r\nMy question is how can I make sure that each sqs listener reaches the service call one after another assuming each requires data from 3rd-party call.\r\n\r\nI tried adding synchronized block but I&#39;m unable to figure out if this is okay to have it.","title":"Spring boot AWS SqsListener sync operation","body":"<p>I have few sqs listener consuming from some standard sqs queue.</p>\n<p>These listeners are responsible to call upon some service method which in turn talk to some3rd-party data provider.</p>\n<p>When there are several messages consumed within short span of time, the load on service call to 3rd-party reaches it's limit(crosses rate limit).</p>\n<h5>1st listener</h5>\n<pre class=\"lang-java prettyprint-override\"><code>    @SqsListener(value = &quot;${cloud.aws.queue-1}&quot;, deletionPolicy = SqsMessageDeletionPolicy.NEVER)\n    public void handleQueue1(final String message, @Header RequestType type, @Header(&quot;MessageId&quot;) String messageId, Acknowledgment acknowledgment) throws JsonProcessingException {\n        ..\n        ...\n        \n        synchronized (this) {\n            // call to some common service method\n        }\n        \n        ...\n        ..\n    }\n\n</code></pre>\n<h5>2nd listener</h5>\n<pre><code>    @SqsListener(value = &quot;${cloud.aws.queue-2}&quot;, deletionPolicy = SqsMessageDeletionPolicy.NEVER)\n    public void handleQueue2(final String message, @Header RequestType type, @Header(&quot;MessageId&quot;) String messageId, Acknowledgment acknowledgment) throws JsonProcessingException {\n        ..\n        ...\n        \n        synchronized (this) {\n            // call to some common service method\n        }\n        \n        ...\n        ..\n    }\n</code></pre>\n<p>My question is how can I make sure that each sqs listener reaches the service call one after another assuming each requires data from 3rd-party call.</p>\n<p>I tried adding synchronized block but I'm unable to figure out if this is okay to have it.</p>\n"},{"tags":["java","algorithm","stream","ieee-754"],"answers":[{"tags":[],"owner":{"account_id":2168743,"reputation":10044,"user_id":1921273,"display_name":"MrSmith42"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633693302,"creation_date":1633693302,"answer_id":69495285,"question_id":69495059,"body_markdown":"You cannot fix the limited precision of floating point arithmetic.\r\nTo avoid drifting have two ideas:\r\n\r\n1. Do the fast version and ignore the drifting. After a fixed amount of numbers make the effort to calculate the hole sum new O(n). This way you get O(1) most times but sometimes O(n). I know that this makes a O(n) algorithm but with a very small factor\r\n\r\n2. Convert the float to a format that has no arithmetic problems. Like a fixed-point representation (may only be applicable if your values are in a limited range)","title":"Find Average of Last N Floats in a Stream in O(1)","body":"<p>You cannot fix the limited precision of floating point arithmetic.\nTo avoid drifting have two ideas:</p>\n<ol>\n<li><p>Do the fast version and ignore the drifting. After a fixed amount of numbers make the effort to calculate the hole sum new O(n). This way you get O(1) most times but sometimes O(n). I know that this makes a O(n) algorithm but with a very small factor</p>\n</li>\n<li><p>Convert the float to a format that has no arithmetic problems. Like a fixed-point representation (may only be applicable if your values are in a limited range)</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":113187,"reputation":200947,"user_id":298225,"accept_rate":100,"display_name":"Eric Postpischil"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1633695482,"creation_date":1633694739,"answer_id":69495584,"question_id":69495059,"body_markdown":"Here are two solutions. At the bottom is code demonstrating an O(1) per element solution in which each output is computed only by summing elements from its dependent inputs. It has no rounding errors accumulated from ongoing sums. (This means it can be used generally for any reduction operation, such as finding maximums or minimums, not just addition.)\r\n\r\nThe `float` format spans 276 bits, from 2&lt;sup&gt;−149&lt;/sup&gt; (the least significant bit of a subnormal number) to 2&lt;sup&gt;+126&lt;/sup&gt; (the most significant bit [MSB] of the format’s largest finite number). 10,000 times the largest finite number has an MSB of of 2&lt;sup&gt;140&lt;/sup&gt;, so the sum spans at most 140 − −149 + 1 = 290 bits. Thus, with an array of 290 bits, plus a sign bit, you can track the exact sum of 10,000 floating-point numbers, with no rounding errors.\r\n\r\n(Note that the implementation can include some slack to avoid excessive carrying. For example, if 290 bits were implemented as, say, an array of ten 32-bit elements, fully using the first nine elements and 2 bits of the last element (plus another for the sign), then, in the worst case, a carry from the low element could cascade across all higher elements. Instead, one might use, say, twenty 32-bit elements but primarily use only around 16 bits of each element, allowing carries to accumulate within that element instead of being added to the higher element. Reconciling the slack would only be necessary when it has accumulated so much as to need actual carrying or when checking the high elements to read the current total.)\r\n\r\nA second method can provide an O(N) complexity for N elements, so O(1) per element (for a fixed window size). For this, let’s start with the first 10,000 elements in an array `I` from `I[0]` to `I[9999]`. Accumulate partial sums working backwards. Given some array `T` (this can be a temporary array, or the work can be done in the output array), set `T[9999]` = `I[9999]`, `T[9998] = T[9999] + I[9998]` and so on—generally, `T[i] = T[i+1] + I[i]`. When we are done, `T[0]` will contain the sum of the first 10,000 inputs, so it is our first output.\r\n\r\nNow note that `T[1]` is the sum of the 9,999 inputs after the first, so `T[1] + I[10000]` is the second output. In fact, each `T[i]` computed so far is the *prefix* to a sum we desire; it is the sum of the initial 10000−`i` elements for the sum that is output `i`. So what we want to complete these are matching *suffixes*. Each prefix computed so far ends at 9,999; the last (highest-indexed) input element added to it was `I[9999]`. So, if we start a partial sum `S` with `I[10000]`, it is the suffix we need to add to `T[1]`. Then adding `I[10001]` to `S` gives us the suffix we need to add to `T[2]`, and so on. So each of the 9,999 outputs, after the first can be computed by updating `S` with the new input and outputting the sum of `S` and `T[i]`. One final output from this block can be produced by updating `S` with another input and outputting it—at that point `S` is the suffix sum of 10,000 elements and needs a prefix of zero elements, so no addition with any `T[i]` is required.\r\n\r\nThus 10,0001 outputs have been produced by the 9,999 additions used to compute the prefixes and the 9,999 additions used to update S, so just under two additions per output. Then this process can be repeated for another block of 10,000 values.\r\n\r\nThe outputs may still have rounding errors from floating-point arithmetic, but each is constructed solely from finitely many “unidirectional” additions involving solely its inputs. There are no subtractions of earlier elements from an ongoing sum that accumulates more rounding errors over time.\r\n\r\nHere is demonstration code.\r\n```\r\n#include &lt;stdlib.h&gt;\r\n\r\n\r\n#define Operation(a, b) ((a) + (b))\r\n\r\n\r\n/*\tSliding window reduction.\r\n\r\n\tFor 0 &lt;= i &lt; N, each C[i] is the result of a reduction operation of the W\r\n\telements of A from A[i] to A[i+W-1].  The Operation macro defines the\r\n\treduction operation.\r\n*/\r\nvoid SlidingWindowReduction(const float *A, float *C, size_t N, size_t W)\r\n{\r\n\t//\tDo whole segments of length W+1.\r\n\tfor (; W &lt; N; N -= W+1, A += W+1, C += W+1)\r\n\t{\r\n\t\t//\tBuild prefixes. C[W-w] receives Operation(A[W-w] to A[W-1]).\r\n\t\tfloat p = A[W-1];\r\n\t\tfor (size_t w = 1; w &lt; W; ++w)\r\n\t\t{\r\n\t\t\tC[W-w] = p;\r\n\t\t\tfloat t = A[W-1-w];\r\n\t\t\tp = Operation(p, t);\r\n\t\t}\r\n\t\tC[0] = p;\r\n\r\n\t\t//\tBuild suffixes and paste them onto prefixes.\r\n\t\t//\tEach suffix is Operation(C[W] to C[W+w]).\r\n\t\tfloat s = A[W];\r\n\t\tfor (size_t w = 1; w &lt; W; ++w)\r\n\t\t{\r\n\t\t\t//\tPaste prefix (w to W-1) with suffix (W to W+w-1).\r\n\t\t\tfloat p = C[w]; \r\n\t\t\tC[w] = Operation(p, s);\r\n\r\n\t\t\t//\tBuild suffix.\r\n\t\t\tfloat t = A[W+w];\r\n\t\t\ts = Operation(s, t);\r\n\t\t}\r\n\t\tC[W] = s;\r\n\t}\r\n\r\n\t//\tDo final segment.\r\n\tif (N)\r\n\t{\r\n\t\t//\tBuild prefixes. C[W-w] receives Operation(A[W-w] to A[W-1]).\r\n\t\tfloat p = A[W-1];\r\n\t\tfor (size_t w = 1; w &lt; W-N+1; ++w)\t//\tUnstored prefixes.\r\n\t\t{\r\n\t\t\tfloat t = A[W-1-w];\r\n\t\t\tp = Operation(p, t);\r\n\t\t}\r\n\t\tfor (size_t w = W-N+1; w &lt; W; ++w)\t//\tStored prefixes.\r\n\t\t{\r\n\t\t\tC[W-w] = p;\r\n\t\t\tfloat t = A[W-1-w];\r\n\t\t\tp = Operation(p, t);\r\n\t\t}\r\n\t\tC[0] = p;\r\n\r\n\t\t//\tBuild suffixes and paste them onto prefixes.\r\n\t\t//\tEach suffix is Operation(C[W] to C[W+w]).\r\n\t\tif (1 &lt; N)\r\n\t\t{\r\n\t\t\tfloat s = A[W];\r\n\t\t\tfor (size_t w = 1; w &lt; N-1; ++w)\r\n\t\t\t{\r\n\t\t\t\t//\tPaste prefix (w to W-1) with suffix (W to W+w-1).\r\n\t\t\t\tfloat p = C[w]; \r\n\t\t\t\tC[w] = Operation(p, s);\r\n\r\n\t\t\t\t//\tBuild suffix.\r\n\t\t\t\tfloat t = A[W+w];\r\n\t\t\t\ts = Operation(s, t);\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\tfloat p = C[N-1];\r\n\t\t\t\tC[N-1] = Operation(p, s);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n#include &lt;stdio.h&gt;\r\n\r\n\r\n#define\tNumberOf(a)\t(sizeof (a) / sizeof *(a))\r\n\r\n\r\nint main(void)\r\n{\r\n\tenum { W = 3 };\t//\tNumber of elements in window.\r\n\r\n\tfloat A[] = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 };\r\n\tfloat C[NumberOf(A) - W + 1] = { 0 };\r\n\r\n\tSlidingWindowReduction(A, C, NumberOf(C), 3);\r\n\r\n\tfor (size_t c = 0; c &lt; NumberOf(C); ++c)\r\n\t\tprintf(&quot;C[%zu] = %g.\\n&quot;, c, C[c]);\r\n}\r\n```","title":"Find Average of Last N Floats in a Stream in O(1)","body":"<p>Here are two solutions. At the bottom is code demonstrating an O(1) per element solution in which each output is computed only by summing elements from its dependent inputs. It has no rounding errors accumulated from ongoing sums. (This means it can be used generally for any reduction operation, such as finding maximums or minimums, not just addition.)</p>\n<p>The <code>float</code> format spans 276 bits, from 2<sup>−149</sup> (the least significant bit of a subnormal number) to 2<sup>+126</sup> (the most significant bit [MSB] of the format’s largest finite number). 10,000 times the largest finite number has an MSB of of 2<sup>140</sup>, so the sum spans at most 140 − −149 + 1 = 290 bits. Thus, with an array of 290 bits, plus a sign bit, you can track the exact sum of 10,000 floating-point numbers, with no rounding errors.</p>\n<p>(Note that the implementation can include some slack to avoid excessive carrying. For example, if 290 bits were implemented as, say, an array of ten 32-bit elements, fully using the first nine elements and 2 bits of the last element (plus another for the sign), then, in the worst case, a carry from the low element could cascade across all higher elements. Instead, one might use, say, twenty 32-bit elements but primarily use only around 16 bits of each element, allowing carries to accumulate within that element instead of being added to the higher element. Reconciling the slack would only be necessary when it has accumulated so much as to need actual carrying or when checking the high elements to read the current total.)</p>\n<p>A second method can provide an O(N) complexity for N elements, so O(1) per element (for a fixed window size). For this, let’s start with the first 10,000 elements in an array <code>I</code> from <code>I[0]</code> to <code>I[9999]</code>. Accumulate partial sums working backwards. Given some array <code>T</code> (this can be a temporary array, or the work can be done in the output array), set <code>T[9999]</code> = <code>I[9999]</code>, <code>T[9998] = T[9999] + I[9998]</code> and so on—generally, <code>T[i] = T[i+1] + I[i]</code>. When we are done, <code>T[0]</code> will contain the sum of the first 10,000 inputs, so it is our first output.</p>\n<p>Now note that <code>T[1]</code> is the sum of the 9,999 inputs after the first, so <code>T[1] + I[10000]</code> is the second output. In fact, each <code>T[i]</code> computed so far is the <em>prefix</em> to a sum we desire; it is the sum of the initial 10000−<code>i</code> elements for the sum that is output <code>i</code>. So what we want to complete these are matching <em>suffixes</em>. Each prefix computed so far ends at 9,999; the last (highest-indexed) input element added to it was <code>I[9999]</code>. So, if we start a partial sum <code>S</code> with <code>I[10000]</code>, it is the suffix we need to add to <code>T[1]</code>. Then adding <code>I[10001]</code> to <code>S</code> gives us the suffix we need to add to <code>T[2]</code>, and so on. So each of the 9,999 outputs, after the first can be computed by updating <code>S</code> with the new input and outputting the sum of <code>S</code> and <code>T[i]</code>. One final output from this block can be produced by updating <code>S</code> with another input and outputting it—at that point <code>S</code> is the suffix sum of 10,000 elements and needs a prefix of zero elements, so no addition with any <code>T[i]</code> is required.</p>\n<p>Thus 10,0001 outputs have been produced by the 9,999 additions used to compute the prefixes and the 9,999 additions used to update S, so just under two additions per output. Then this process can be repeated for another block of 10,000 values.</p>\n<p>The outputs may still have rounding errors from floating-point arithmetic, but each is constructed solely from finitely many “unidirectional” additions involving solely its inputs. There are no subtractions of earlier elements from an ongoing sum that accumulates more rounding errors over time.</p>\n<p>Here is demonstration code.</p>\n<pre><code>#include &lt;stdlib.h&gt;\n\n\n#define Operation(a, b) ((a) + (b))\n\n\n/*  Sliding window reduction.\n\n    For 0 &lt;= i &lt; N, each C[i] is the result of a reduction operation of the W\n    elements of A from A[i] to A[i+W-1].  The Operation macro defines the\n    reduction operation.\n*/\nvoid SlidingWindowReduction(const float *A, float *C, size_t N, size_t W)\n{\n    //  Do whole segments of length W+1.\n    for (; W &lt; N; N -= W+1, A += W+1, C += W+1)\n    {\n        //  Build prefixes. C[W-w] receives Operation(A[W-w] to A[W-1]).\n        float p = A[W-1];\n        for (size_t w = 1; w &lt; W; ++w)\n        {\n            C[W-w] = p;\n            float t = A[W-1-w];\n            p = Operation(p, t);\n        }\n        C[0] = p;\n\n        //  Build suffixes and paste them onto prefixes.\n        //  Each suffix is Operation(C[W] to C[W+w]).\n        float s = A[W];\n        for (size_t w = 1; w &lt; W; ++w)\n        {\n            //  Paste prefix (w to W-1) with suffix (W to W+w-1).\n            float p = C[w]; \n            C[w] = Operation(p, s);\n\n            //  Build suffix.\n            float t = A[W+w];\n            s = Operation(s, t);\n        }\n        C[W] = s;\n    }\n\n    //  Do final segment.\n    if (N)\n    {\n        //  Build prefixes. C[W-w] receives Operation(A[W-w] to A[W-1]).\n        float p = A[W-1];\n        for (size_t w = 1; w &lt; W-N+1; ++w)  //  Unstored prefixes.\n        {\n            float t = A[W-1-w];\n            p = Operation(p, t);\n        }\n        for (size_t w = W-N+1; w &lt; W; ++w)  //  Stored prefixes.\n        {\n            C[W-w] = p;\n            float t = A[W-1-w];\n            p = Operation(p, t);\n        }\n        C[0] = p;\n\n        //  Build suffixes and paste them onto prefixes.\n        //  Each suffix is Operation(C[W] to C[W+w]).\n        if (1 &lt; N)\n        {\n            float s = A[W];\n            for (size_t w = 1; w &lt; N-1; ++w)\n            {\n                //  Paste prefix (w to W-1) with suffix (W to W+w-1).\n                float p = C[w]; \n                C[w] = Operation(p, s);\n\n                //  Build suffix.\n                float t = A[W+w];\n                s = Operation(s, t);\n            }\n            {\n                float p = C[N-1];\n                C[N-1] = Operation(p, s);\n            }\n        }\n    }\n}\n\n\n#include &lt;stdio.h&gt;\n\n\n#define NumberOf(a) (sizeof (a) / sizeof *(a))\n\n\nint main(void)\n{\n    enum { W = 3 }; //  Number of elements in window.\n\n    float A[] = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 };\n    float C[NumberOf(A) - W + 1] = { 0 };\n\n    SlidingWindowReduction(A, C, NumberOf(C), 3);\n\n    for (size_t c = 0; c &lt; NumberOf(C); ++c)\n        printf(&quot;C[%zu] = %g.\\n&quot;, c, C[c]);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2460360,"reputation":64577,"user_id":2144669,"display_name":"David Eisenstat"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1633708572,"creation_date":1633707127,"answer_id":69498355,"question_id":69495059,"body_markdown":"It&#39;s possible to keep the windowed average in a hard real-time fashion without using subtraction. In the untested code below, `a` stores the suffix sums of the least recently added elements in the window, `b` stores the next suffix sums (under construction), and `c` stores the most recently added elements. (It&#39;s actually possible to use the same array for `a` and `c`, but it does make the code harder to understand.)\r\n\r\n```java\r\npublic final class WindowedAverage {\r\n  public WindowedAverage(final int n) {\r\n    assert n &gt; 0;\r\n    scalar = 1 / (float) n;\r\n    assert n % 2 == 0;\r\n    half_n = n / 2;\r\n    a = new float[half_n];\r\n    b = new float[half_n];\r\n    b_sum = 0;\r\n    c = new float[half_n];\r\n    c_sum = 0;\r\n    i = 0;\r\n  }\r\n\r\n  public float average() {\r\n    return a[i] + b_sum + c_sum;\r\n  }\r\n\r\n  void add(final float s) {\r\n    final float term = scalar * s;\r\n    c[i] = term;\r\n    c_sum += term;\r\n    i++;\r\n    if (i &lt; half_n) {\r\n      b[half_n - (i + 1)] += b[half_n - i];\r\n    } else {\r\n      float[] temp = a;\r\n      a = b;\r\n      b = c;\r\n      b_sum = c_sum;\r\n      c = temp;\r\n      c_sum = 0;\r\n      i = 0;\r\n    }\r\n  }\r\n\r\n  private final float scalar;\r\n  private final int half_n;\r\n  private final float[] a;\r\n  private final float[] b;\r\n  private float b_sum;\r\n  private final float[] c;\r\n  private float c_sum;\r\n  private int i;\r\n}\r\n```\r\n","title":"Find Average of Last N Floats in a Stream in O(1)","body":"<p>It's possible to keep the windowed average in a hard real-time fashion without using subtraction. In the untested code below, <code>a</code> stores the suffix sums of the least recently added elements in the window, <code>b</code> stores the next suffix sums (under construction), and <code>c</code> stores the most recently added elements. (It's actually possible to use the same array for <code>a</code> and <code>c</code>, but it does make the code harder to understand.)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class WindowedAverage {\n  public WindowedAverage(final int n) {\n    assert n &gt; 0;\n    scalar = 1 / (float) n;\n    assert n % 2 == 0;\n    half_n = n / 2;\n    a = new float[half_n];\n    b = new float[half_n];\n    b_sum = 0;\n    c = new float[half_n];\n    c_sum = 0;\n    i = 0;\n  }\n\n  public float average() {\n    return a[i] + b_sum + c_sum;\n  }\n\n  void add(final float s) {\n    final float term = scalar * s;\n    c[i] = term;\n    c_sum += term;\n    i++;\n    if (i &lt; half_n) {\n      b[half_n - (i + 1)] += b[half_n - i];\n    } else {\n      float[] temp = a;\n      a = b;\n      b = c;\n      b_sum = c_sum;\n      c = temp;\n      c_sum = 0;\n      i = 0;\n    }\n  }\n\n  private final float scalar;\n  private final int half_n;\n  private final float[] a;\n  private final float[] b;\n  private float b_sum;\n  private final float[] c;\n  private float c_sum;\n  private int i;\n}\n</code></pre>\n"}],"owner":{"account_id":3491211,"reputation":1083,"user_id":2920861,"accept_rate":88,"display_name":"Crigges"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":324,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69495584,"answer_count":3,"score":2,"last_activity_date":1633708572,"creation_date":1633692283,"question_id":69495059,"body_markdown":"Let&#39;s assume I have an infinite stream of floats `s_i`. I want to calculate the average of the last 10000 values. \r\n\r\nThere is an easy and inefficient solution to this problem. Just store the last 10000 values in a list/queue and calculate the average by iterating over all elements every time. Which results in a runtime of O(n) where n is the length of the list. This solution is too inefficient for my use case.\r\n\r\nThe fast solution to this problem is to introduce a variable that holds the sum of the last 10000 elements. Every time a new element arrives it will be added to the variable and the oldest (stored in a queue) will be subtracted from the variable. This solution is O(1). (Yes memory will be still O(n) but memory is not an issue at all)\r\n\r\nHowever, there is a problem with the &quot;Fast Solution&quot;. Due to the floating point imprecision and rounding errors, the sum is drifting and getting less accurate over time. This MVCE in java shows the problem:\r\n\r\n    float sum = 0;\r\n\tList&lt;Float&gt; nums = new ArrayList&lt;&gt;();\r\n\tfor(int i = 1; i&lt;=10000; i++) {\r\n\t\tnums.add((float) (Math.random()));\r\n\t}\r\n\tfor(float f: nums) {\r\n\t\tsum += f;\r\n\t}\r\n\tfor(float f: nums) {\r\n\t\tsum -= f;\r\n\t}\r\n\tSystem.out.println(sum); //Not printing Zero\r\n\r\nPlease note that using a double instead won&#39;t solve this problem just make it less significant.\r\n\r\nSo what is an elegant solution to this problem?","title":"Find Average of Last N Floats in a Stream in O(1)","body":"<p>Let's assume I have an infinite stream of floats <code>s_i</code>. I want to calculate the average of the last 10000 values.</p>\n<p>There is an easy and inefficient solution to this problem. Just store the last 10000 values in a list/queue and calculate the average by iterating over all elements every time. Which results in a runtime of O(n) where n is the length of the list. This solution is too inefficient for my use case.</p>\n<p>The fast solution to this problem is to introduce a variable that holds the sum of the last 10000 elements. Every time a new element arrives it will be added to the variable and the oldest (stored in a queue) will be subtracted from the variable. This solution is O(1). (Yes memory will be still O(n) but memory is not an issue at all)</p>\n<p>However, there is a problem with the &quot;Fast Solution&quot;. Due to the floating point imprecision and rounding errors, the sum is drifting and getting less accurate over time. This MVCE in java shows the problem:</p>\n<pre><code>float sum = 0;\nList&lt;Float&gt; nums = new ArrayList&lt;&gt;();\nfor(int i = 1; i&lt;=10000; i++) {\n    nums.add((float) (Math.random()));\n}\nfor(float f: nums) {\n    sum += f;\n}\nfor(float f: nums) {\n    sum -= f;\n}\nSystem.out.println(sum); //Not printing Zero\n</code></pre>\n<p>Please note that using a double instead won't solve this problem just make it less significant.</p>\n<p>So what is an elegant solution to this problem?</p>\n"},{"tags":["java","bigdecimal"],"answers":[{"tags":[],"owner":{"account_id":2990262,"reputation":6816,"user_id":2628137,"accept_rate":93,"display_name":"Yosi Dahari"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1633698865,"creation_date":1633698865,"answer_id":69496444,"question_id":69496264,"body_markdown":"`BigDecimal` is an exact way of representing numbers and is not impacted by rounding in the manner in which `double` does. The issue of losing precision is when assigning to double, not when converting from double to BigDecimal.\r\n\r\nFor more details, you can see this post: https://stackoverflow.com/questions/3413448/double-vs-bigdecimal\r\n\r\n","title":"Big Decimal vs double which provides better precision","body":"<p><code>BigDecimal</code> is an exact way of representing numbers and is not impacted by rounding in the manner in which <code>double</code> does. The issue of losing precision is when assigning to double, not when converting from double to BigDecimal.</p>\n<p>For more details, you can see this post: <a href=\"https://stackoverflow.com/questions/3413448/double-vs-bigdecimal\">Double vs. BigDecimal?</a></p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1633708505,"creation_date":1633699506,"answer_id":69496601,"question_id":69496264,"body_markdown":"Floating point like `double` is always just an ([imprecise](https://en.wikipedia.org/wiki/Floating-point_arithmetic#Accuracy_problems)) approximation, a sum of powers of 2 - without any notion of precision = number of decimals. 55.88 and 55.879999998 could be the exactly same value (same bytes).\r\n\r\n`BigDecimal` solves that. But you do not want a constructor with a `double` as argument, because then the precision is lost too. Use:\r\n\r\n    BigDecimal bnv = new BigDecimal(&quot;55.88&quot;);\r\n    BigDecimal bsv = new BigDecimal(&quot;2.33&quot;);\r\n\r\nAbove both have a precision of 2, a multiplication will give a precision of 4.\r\n\r\nWith BigDecimal one sometimes must provide the resulting precision for rounding and such.\r\n\r\nSo BigDecimal is superior, where it not for its horrible cobolish expressions.","title":"Big Decimal vs double which provides better precision","body":"<p>Floating point like <code>double</code> is always just an (<a href=\"https://en.wikipedia.org/wiki/Floating-point_arithmetic#Accuracy_problems\" rel=\"nofollow noreferrer\">imprecise</a>) approximation, a sum of powers of 2 - without any notion of precision = number of decimals. 55.88 and 55.879999998 could be the exactly same value (same bytes).</p>\n<p><code>BigDecimal</code> solves that. But you do not want a constructor with a <code>double</code> as argument, because then the precision is lost too. Use:</p>\n<pre><code>BigDecimal bnv = new BigDecimal(&quot;55.88&quot;);\nBigDecimal bsv = new BigDecimal(&quot;2.33&quot;);\n</code></pre>\n<p>Above both have a precision of 2, a multiplication will give a precision of 4.</p>\n<p>With BigDecimal one sometimes must provide the resulting precision for rounding and such.</p>\n<p>So BigDecimal is superior, where it not for its horrible cobolish expressions.</p>\n"}],"owner":{"account_id":1693221,"reputation":2947,"user_id":1555190,"accept_rate":72,"display_name":"user1555190"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1038,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":69496444,"answer_count":2,"score":0,"last_activity_date":1633708505,"creation_date":1633698112,"question_id":69496264,"body_markdown":"I found some code in legacy software and i was interested in knowing which provides better precision, as it currently is where it takes the double and calculates on them:\r\n\r\n    double doubleNum = (Math.round(55.88d * 100) - Math.round(2.33d * 100));\r\n\r\nsecond option\r\n\r\n    BigDecimal bnv = BigDecimal.valueOf(55.88);\r\n    BigDecimal bsv = BigDecimal.valueOf(2.33);\r\n    \r\n    System.out.println(bnv.subtract(bsv).setScale(2));\r\n\r\nBoth produce the same output, my understanding was that using bigdecimal ensures that is more precise. But there could be loss when converting double to BigDecimal\r\n\r\nAlso the first option there is possible loss when casting.. \r\n\r\nI always use BigDecimal, but in this case.","title":"Big Decimal vs double which provides better precision","body":"<p>I found some code in legacy software and i was interested in knowing which provides better precision, as it currently is where it takes the double and calculates on them:</p>\n<pre><code>double doubleNum = (Math.round(55.88d * 100) - Math.round(2.33d * 100));\n</code></pre>\n<p>second option</p>\n<pre><code>BigDecimal bnv = BigDecimal.valueOf(55.88);\nBigDecimal bsv = BigDecimal.valueOf(2.33);\n\nSystem.out.println(bnv.subtract(bsv).setScale(2));\n</code></pre>\n<p>Both produce the same output, my understanding was that using bigdecimal ensures that is more precise. But there could be loss when converting double to BigDecimal</p>\n<p>Also the first option there is possible loss when casting..</p>\n<p>I always use BigDecimal, but in this case.</p>\n"},{"tags":["java","spring","hazelcast"],"answers":[{"tags":[],"owner":{"account_id":8897100,"reputation":56,"user_id":6672517,"display_name":"Андрей Колычев"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629904318,"creation_date":1629904318,"answer_id":68925510,"question_id":68925343,"body_markdown":"Which version of hazelcast are you using? More precisely, which is inherited from Spring. The setMaxSizeConfig method has been removed in later versions of hazelcast, for example 4.2 https://docs.hazelcast.org/docs/4.2/javadoc/com/hazelcast/config/MapConfig.html\r\n\r\nBut in version 3.6 it was still https://docs.hazelcast.org/docs/3.6/javadoc/com/hazelcast/config/MapConfig.html\r\n\r\nThe differences between versions 3 and 4 are significant.","title":"Import issue with com.hazelcast.config.MaxSizeConfig","body":"<p>Which version of hazelcast are you using? More precisely, which is inherited from Spring. The setMaxSizeConfig method has been removed in later versions of hazelcast, for example 4.2 <a href=\"https://docs.hazelcast.org/docs/4.2/javadoc/com/hazelcast/config/MapConfig.html\" rel=\"nofollow noreferrer\">https://docs.hazelcast.org/docs/4.2/javadoc/com/hazelcast/config/MapConfig.html</a></p>\n<p>But in version 3.6 it was still <a href=\"https://docs.hazelcast.org/docs/3.6/javadoc/com/hazelcast/config/MapConfig.html\" rel=\"nofollow noreferrer\">https://docs.hazelcast.org/docs/3.6/javadoc/com/hazelcast/config/MapConfig.html</a></p>\n<p>The differences between versions 3 and 4 are significant.</p>\n"},{"tags":[],"owner":{"account_id":14430922,"reputation":116,"user_id":10424312,"display_name":"Liko Mwanza"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1633708201,"creation_date":1633708201,"answer_id":69498574,"question_id":68925343,"body_markdown":"For version 4, use setEvictionConfig. \r\nhttps://docs.hazelcast.org/docs/4.0/javadoc/com/hazelcast/config/EvictionConfig.html \r\n\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    import com.hazelcast.config.Config;\r\n    import com.hazelcast.config.EvictionConfig;\r\n    import com.hazelcast.config.EvictionPolicy;\r\n    import com.hazelcast.config.MapConfig;\r\n    import com.hazelcast.config.MaxSizePolicy;\r\n    \r\n    @Configuration\r\n    public class ProductCacheConfig {\r\n    \r\n    \t@Bean\r\n    \tpublic Config cacheConfig() {\r\n    \t\treturn new Config()\r\n    \t\t\t\t.setInstanceName(&quot;hazel-instance&quot;)\r\n    \t\t\t\t.addMapConfig(new MapConfig()\r\n    \t\t\t\t\t\t.setName(&quot;product-cache&quot;)\r\n    \t\t\t\t\t\t.setTimeToLiveSeconds(3000)\r\n    \t\t\t\t\t\t.setEvictionConfig(new EvictionConfig()\r\n    \t\t\t\t\t\t\t\t.setSize(200)\r\n    \t\t\t\t\t\t\t\t.setMaxSizePolicy(MaxSizePolicy.FREE_HEAP_SIZE)\r\n    \t\t\t\t\t\t\t\t.setEvictionPolicy(EvictionPolicy.LRU)\r\n    \t\t\t\t\t\t)\r\n    \t\t\t\t);\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Import issue with com.hazelcast.config.MaxSizeConfig","body":"<p>For version 4, use setEvictionConfig.\n<a href=\"https://docs.hazelcast.org/docs/4.0/javadoc/com/hazelcast/config/EvictionConfig.html\" rel=\"noreferrer\">https://docs.hazelcast.org/docs/4.0/javadoc/com/hazelcast/config/EvictionConfig.html</a></p>\n<pre><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport com.hazelcast.config.Config;\nimport com.hazelcast.config.EvictionConfig;\nimport com.hazelcast.config.EvictionPolicy;\nimport com.hazelcast.config.MapConfig;\nimport com.hazelcast.config.MaxSizePolicy;\n\n@Configuration\npublic class ProductCacheConfig {\n\n    @Bean\n    public Config cacheConfig() {\n        return new Config()\n                .setInstanceName(&quot;hazel-instance&quot;)\n                .addMapConfig(new MapConfig()\n                        .setName(&quot;product-cache&quot;)\n                        .setTimeToLiveSeconds(3000)\n                        .setEvictionConfig(new EvictionConfig()\n                                .setSize(200)\n                                .setMaxSizePolicy(MaxSizePolicy.FREE_HEAP_SIZE)\n                                .setEvictionPolicy(EvictionPolicy.LRU)\n                        )\n                );\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":12421232,"reputation":59,"user_id":9048106,"display_name":"Stephen Agbenu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2429,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":69498574,"answer_count":2,"score":3,"last_activity_date":1633708201,"creation_date":1629903696,"question_id":68925343,"body_markdown":"I&#39;m working on a Spring boot tutorial and I&#39;m a bit stuck on this section of the video. The narrator in the video uses the MaxSizeConfig import inside a return statement. Trying out the same line, I&#39;m getting an error saying that MaxSizeConfig can&#39;t be resolved to a type. Checking out the docs for hazelcast, the import exists. Could I get some direction in what I&#39;m doing wrong with my code?\r\n\r\nHere&#39;s my pom.xml:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n     &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.5.3&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.stephen.springweb&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;productrestapi&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;productrestapi&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;\r\n\t\t\t\t\t\torg.springframework.boot\r\n\t\t\t\t\t&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;\r\n\t\t\t\t\t\tspring-boot-starter-tomcat\r\n\t\t\t\t\t&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.hazelcast&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hazelcast&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.hazelcast&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hazelcast-spring&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;build-info&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\nHere&#39;s the code that&#39;s trying to use MaxSizeConfig:\r\n```\r\npackage com.stephen.springweb.productrestapi.config;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport com.hazelcast.config.Config;\r\nimport com.hazelcast.config.EvictionPolicy;\r\nimport com.hazelcast.config.MapConfig;\r\nimport com.hazelcast.config.MaxSizePolicy;\r\n\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class ProductCacheConfig {\r\n\r\n    @Bean\r\n    public Config cacheConfig() {\r\n        return new Config()\r\n                    .setInstanceName(&quot;hazel-instance&quot;)\r\n                    .addMapConfig(new MapConfig()\r\n                        .setName(&quot;product-cache&quot;)\r\n                        .setTimeToLiveSeconds(3000)\r\n                        .setMaxSizeConfig(new MaxSizeConfig(200, MaxSizePolicy.FREE_HEAP_SIZE))\r\n                        .setEvictionPolicy(EvictionPolicy.LRU)\r\n                    );\r\n    }\r\n}\r\n```\r\nThank you.\r\n\r\n\r\n\r\n","title":"Import issue with com.hazelcast.config.MaxSizeConfig","body":"<p>I'm working on a Spring boot tutorial and I'm a bit stuck on this section of the video. The narrator in the video uses the MaxSizeConfig import inside a return statement. Trying out the same line, I'm getting an error saying that MaxSizeConfig can't be resolved to a type. Checking out the docs for hazelcast, the import exists. Could I get some direction in what I'm doing wrong with my code?</p>\n<p>Here's my pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\nxsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.5.3&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;com.stephen.springweb&lt;/groupId&gt;\n&lt;artifactId&gt;productrestapi&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;productrestapi&lt;/name&gt;\n&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n&lt;properties&gt;\n    &lt;java.version&gt;8&lt;/java.version&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;\n                    org.springframework.boot\n                &lt;/groupId&gt;\n                &lt;artifactId&gt;\n                    spring-boot-starter-tomcat\n                &lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;\n        &lt;artifactId&gt;hazelcast&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;\n        &lt;artifactId&gt;hazelcast-spring&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;build-info&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Here's the code that's trying to use MaxSizeConfig:</p>\n<pre><code>package com.stephen.springweb.productrestapi.config;\n\nimport org.springframework.context.annotation.Bean;\nimport com.hazelcast.config.Config;\nimport com.hazelcast.config.EvictionPolicy;\nimport com.hazelcast.config.MapConfig;\nimport com.hazelcast.config.MaxSizePolicy;\n\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class ProductCacheConfig {\n\n    @Bean\n    public Config cacheConfig() {\n        return new Config()\n                    .setInstanceName(&quot;hazel-instance&quot;)\n                    .addMapConfig(new MapConfig()\n                        .setName(&quot;product-cache&quot;)\n                        .setTimeToLiveSeconds(3000)\n                        .setMaxSizeConfig(new MaxSizeConfig(200, MaxSizePolicy.FREE_HEAP_SIZE))\n                        .setEvictionPolicy(EvictionPolicy.LRU)\n                    );\n    }\n}\n</code></pre>\n<p>Thank you.</p>\n"},{"tags":["java","variables"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":1,"creation_date":1633705754,"post_id":69498023,"comment_id":122839110,"body_markdown":"Depending on the java version `var` is a really bad variable name. Actually regardless of the java version it is a bad name since the variable name should hint at the meaning / usage of it.","body":"Depending on the java version <code>var</code> is a really bad variable name. Actually regardless of the java version it is a bad name since the variable name should hint at the meaning / usage of it."},{"owner":{"account_id":9911062,"reputation":160,"user_id":7337767,"display_name":"Thomas Stachl"},"score":1,"creation_date":1633705769,"post_id":69498023,"comment_id":122839117,"body_markdown":"Did you try not naming it var? Isn&#39;t var a keyword in Java nowadays?","body":"Did you try not naming it var? Isn&#39;t var a keyword in Java nowadays?"},{"owner":{"account_id":20410365,"reputation":51,"user_id":14973926,"display_name":"Ser.T"},"score":0,"creation_date":1633706510,"post_id":69498023,"comment_id":122839452,"body_markdown":"@ Thomas Stachl, i just changed the variable to `x` and i still experience the same thing","body":"@ Thomas Stachl, i just changed the variable to <code>x</code> and i still experience the same thing"},{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1633707553,"post_id":69498023,"comment_id":122839870,"body_markdown":"The error message will contain more than that _Unresolved compilation problem_. Include that in your question. Also, don&#39;t try to run code that doesn&#39;t compile.","body":"The error message will contain more than that <i>Unresolved compilation problem</i>. Include that in your question. Also, don&#39;t try to run code that doesn&#39;t compile."},{"owner":{"account_id":20410365,"reputation":51,"user_id":14973926,"display_name":"Ser.T"},"score":0,"creation_date":1633709628,"post_id":69498023,"comment_id":122840642,"body_markdown":"@sotirios I swear, that&#39;s the only error I&#39;m getting. I use VS code, could that be why?","body":"@sotirios I swear, that&#39;s the only error I&#39;m getting. I use VS code, could that be why?"},{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1633709706,"post_id":69498023,"comment_id":122840679,"body_markdown":"Try to compile with `javac` directly. Please provide a [mcve].","body":"Try to compile with <code>javac</code> directly. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"tags":[],"owner":{"account_id":21415032,"reputation":181,"user_id":16720064,"display_name":"0xff"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1633706333,"creation_date":1633705748,"answer_id":69498073,"question_id":69498023,"body_markdown":"`var` is a reserved keyword in java. You can&#39;t name any variable `var`. Try some other name.\r\n\r\nThe reason behind this is that `var` is used for assigning variables so to not confuse the compiler you cannot use it as a variable name.\r\n\r\nNote that it does compile in java 8 and prior as the `var` keyword has not had been implemented back then. Additionally starting from java 17 it is possible again to use it as a variable name.\r\n\r\n`var`, with some limitations lets you replace standart assignments in java.\r\n```\r\nString someString1 = &quot;Hello, World!&quot;;\r\n// gets turned into\r\nvar someString2 = &quot;Hello, World!&quot;;\r\n```\r\nThis also works with other assignments","title":"Variable named “var” causing compilation error","body":"<p><code>var</code> is a reserved keyword in java. You can't name any variable <code>var</code>. Try some other name.</p>\n<p>The reason behind this is that <code>var</code> is used for assigning variables so to not confuse the compiler you cannot use it as a variable name.</p>\n<p>Note that it does compile in java 8 and prior as the <code>var</code> keyword has not had been implemented back then. Additionally starting from java 17 it is possible again to use it as a variable name.</p>\n<p><code>var</code>, with some limitations lets you replace standart assignments in java.</p>\n<pre><code>String someString1 = &quot;Hello, World!&quot;;\n// gets turned into\nvar someString2 = &quot;Hello, World!&quot;;\n</code></pre>\n<p>This also works with other assignments</p>\n"}],"owner":{"account_id":20410365,"reputation":51,"user_id":14973926,"display_name":"Ser.T"},"comment_count":6,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":411,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1633706022,"answer_count":1,"score":-2,"last_activity_date":1633707521,"creation_date":1633705540,"question_id":69498023,"body_markdown":"while using `JFrame`, I tried setting the icon image with the following code\r\n\r\n    ImageIcon image = new ImageIcon(&quot;C:\\\\barney.jpg&quot;);\r\n    frame.setIconImage(image.getImage());\r\n\r\nIt works as expected, but when I set the `&quot;C:\\\\barney.jpg&quot;` as a`String` variable\r\n\r\n    String var = &quot;C:\\\\barney.jpg&quot;;\r\n    ImageIcon image = new ImageIcon(var);\r\n    frame.setIconImage(image.getImage()); \r\n\r\nThe compiler displays `Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problem`\r\n \r\nAnother point of confusion is why the line in the `error` code refer to the \r\n`public static void main(String[] args)` line instead of\r\n`String var = &quot;C:\\\\barney.jpg&quot;;` which actually causes the error?","title":"Variable named “var” causing compilation error","body":"<p>while using <code>JFrame</code>, I tried setting the icon image with the following code</p>\n<pre><code>ImageIcon image = new ImageIcon(&quot;C:\\\\barney.jpg&quot;);\nframe.setIconImage(image.getImage());\n</code></pre>\n<p>It works as expected, but when I set the <code>&quot;C:\\\\barney.jpg&quot;</code> as a<code>String</code> variable</p>\n<pre><code>String var = &quot;C:\\\\barney.jpg&quot;;\nImageIcon image = new ImageIcon(var);\nframe.setIconImage(image.getImage()); \n</code></pre>\n<p>The compiler displays <code>Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problem</code></p>\n<p>Another point of confusion is why the line in the <code>error</code> code refer to the\n<code>public static void main(String[] args)</code> line instead of\n<code>String var = &quot;C:\\\\barney.jpg&quot;;</code> which actually causes the error?</p>\n"},{"tags":["java","collections","initialization"],"answers":[{"tags":[],"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"down_vote_count":1,"up_vote_count":61,"is_accepted":true,"score":60,"last_activity_date":1633706684,"creation_date":1296122368,"answer_id":4814910,"question_id":4814867,"body_markdown":"`byte`, `int` are primitive, collection works on object. You need something like this:\r\n\r\n```java\r\npublic static Map&lt;Byte, Integer&gt; sizeNeeded = new HashMap&lt;Byte, Integer&gt;() {{\r\n\tput(new Byte(&quot;1&quot;), 1);\r\n\tput(new Byte(&quot;2&quot;), 2);\r\n}};\r\n```\r\n\r\nThis will create a new `map` and using [*initializer block*][1] it will call put method to fill data.\r\n\r\n  [1]: http://download.oracle.com/javase/tutorial/java/javaOO/initial.html","title":"Fill hash map during creation","body":"<p><code>byte</code>, <code>int</code> are primitive, collection works on object. You need something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Map&lt;Byte, Integer&gt; sizeNeeded = new HashMap&lt;Byte, Integer&gt;() {{\n    put(new Byte(&quot;1&quot;), 1);\n    put(new Byte(&quot;2&quot;), 2);\n}};\n</code></pre>\n<p>This will create a new <code>map</code> and using <a href=\"http://download.oracle.com/javase/tutorial/java/javaOO/initial.html\" rel=\"nofollow noreferrer\"><em>initializer block</em></a> it will call put method to fill data.</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1296122515,"creation_date":1296122515,"answer_id":4814938,"question_id":4814867,"body_markdown":"First of all, you can&#39;t have primitives as generic type parameters in Java, so `Map&lt;byte,int&gt;` is impossible, it&#39;ll have to be `Map&lt;Byte,Integer&gt;`.\r\n\r\nSecond, no, there are no collection literals in Java right now, though they&#39;re being considered as a new feature in [Project Coin][1]. Unfortunately, they were dropped from Java 7 and you&#39;ll have to wait until Java 8...\r\n\r\n\r\n  [1]: http://openjdk.java.net/projects/coin/","title":"Fill hash map during creation","body":"<p>First of all, you can't have primitives as generic type parameters in Java, so <code>Map&lt;byte,int&gt;</code> is impossible, it'll have to be <code>Map&lt;Byte,Integer&gt;</code>.</p>\n\n<p>Second, no, there are no collection literals in Java right now, though they're being considered as a new feature in <a href=\"http://openjdk.java.net/projects/coin/\" rel=\"nofollow\">Project Coin</a>. Unfortunately, they were dropped from Java 7 and you'll have to wait until Java 8...</p>\n"}],"owner":{"account_id":225869,"reputation":54669,"user_id":486578,"accept_rate":58,"display_name":"Damir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42487,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"closed_date":1296128689,"accepted_answer_id":4814910,"answer_count":2,"score":26,"last_activity_date":1633706684,"creation_date":1296122082,"question_id":4814867,"body_markdown":"&gt; **Possible Duplicate:**  \n&gt; [How to Initialise a static Map in Java](https://stackoverflow.com/questions/507602/how-to-initialise-a-static-map-in-java)  \n\n&lt;!-- End of automatically inserted text --&gt;\n\nHow to fill HashMap in Java at initialization time, is possible something like this ?\r\n\r\n    public static Map&lt;byte,int&gt; sizeNeeded=new HashMap&lt;byte,int&gt;(){1,1};","title":"Fill hash map during creation","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"https://stackoverflow.com/questions/507602/how-to-initialise-a-static-map-in-java\">How to Initialise a static Map in Java</a>  </p>\n</blockquote>\n\n\n\n<p>How to fill HashMap in Java at initialization time, is possible something like this ?</p>\n\n<pre><code>public static Map&lt;byte,int&gt; sizeNeeded=new HashMap&lt;byte,int&gt;(){1,1};\n</code></pre>\n"},{"tags":["java","spring","spring-boot","websphere-liberty"],"answers":[{"tags":[],"owner":{"account_id":272482,"reputation":2202,"user_id":563588,"accept_rate":67,"display_name":"whatswrong"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633706457,"creation_date":1633706457,"answer_id":69498216,"question_id":69317715,"body_markdown":"It is some nightmare, there was transitive dependency in classpath:\r\n\r\n    group: &#39;com.ibm.ws.ejb.thinclient&#39;, name: &#39;com.ibm.ws.ejb.thinclient&#39;, version:&#39;8.5.5.13&#39;\r\n\r\nLater I found that for gradle build WAR task it was excluded (and I found it only after I have excluded this dependency :D):\r\n\r\n    war {\r\n      rootSpec.exclude(&#39;**/com.ibm.ws.ejb.thinclient-*.jar&#39;)\r\n      ..\r\n    }\r\nWhen switched to spring boot I have started to use another task for packaging and I did not notice that stupid exclude, who would know this stupid exception was caused by lib..\r\n\r\n    bootWar {}\r\n\r\nSolution:\r\nExclude this transitive shit com.ibm.ws.ejb.thinclient dependency:\r\n\r\n    exclude(module: &#39;com.ibm.ws.ejb.thinclient&#39;)\r\nor declare it as compile only\r\n\r\n     compileOnly(group: &#39;com.ibm.ws.ejb.thinclient&#39;, name: &#39;com.ibm.ws.ejb.thinclient&#39;, version:&#39;8.5.5.13&#39;)","title":"Spirng fails to create jee:jndi-lookup beans after migrating to springboot from pure spring","body":"<p>It is some nightmare, there was transitive dependency in classpath:</p>\n<pre><code>group: 'com.ibm.ws.ejb.thinclient', name: 'com.ibm.ws.ejb.thinclient', version:'8.5.5.13'\n</code></pre>\n<p>Later I found that for gradle build WAR task it was excluded (and I found it only after I have excluded this dependency :D):</p>\n<pre><code>war {\n  rootSpec.exclude('**/com.ibm.ws.ejb.thinclient-*.jar')\n  ..\n}\n</code></pre>\n<p>When switched to spring boot I have started to use another task for packaging and I did not notice that stupid exclude, who would know this stupid exception was caused by lib..</p>\n<pre><code>bootWar {}\n</code></pre>\n<p>Solution:\nExclude this transitive shit com.ibm.ws.ejb.thinclient dependency:</p>\n<pre><code>exclude(module: 'com.ibm.ws.ejb.thinclient')\n</code></pre>\n<p>or declare it as compile only</p>\n<pre><code> compileOnly(group: 'com.ibm.ws.ejb.thinclient', name: 'com.ibm.ws.ejb.thinclient', version:'8.5.5.13')\n</code></pre>\n"}],"owner":{"account_id":272482,"reputation":2202,"user_id":563588,"accept_rate":67,"display_name":"whatswrong"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":275,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1633706457,"creation_date":1632497829,"question_id":69317715,"body_markdown":"Trying to migrate from pure spring to spring-boot. Some beans are configured in XML and are referencing JNDI objects provided by web server (WLP) such way i.e.:\r\n\r\n     &lt;jee:jndi-lookup id=&quot;executorService&quot;\r\n                     jndi-name=&quot;concurrent/workManagerTaskExecutor&quot;\r\n                     expected-type=&quot;java.util.concurrent.ExecutorService&quot;/&gt;\r\n\r\nApplication is packaged in WAR archive and deployed to WLP server. Now with springboot application is failing during spring context initialization with error message for above bean:\r\n\r\n*Invocation of init method failed; nested exception is javax.naming.ServiceUnavailableException: Could not obtain an initial context due to a communication failure. Since no provider URL was specified, the default provider URL of &quot;corbaloc:iiop:1.0@492d7185007d:2809/NameService&quot; was used.  Make sure that any bootstrap address information in the URL is correct and that the target name server is running.  Possible causes other than an incorrect bootstrap address or unavailable name server include the network environment and workstation network configuration. [Root exception is org.omg.CORBA.TRANSIENT: java.net.ConnectException: Connection refused (Connection refused):host=172.17.0.4,port=2809  vmcid: IBM  minor code: E02  completed: No]*\r\n\r\nDuring migration no much changes were done, generally:\r\n\r\n&lt;pre&gt;\r\n@SpringBootApplication\r\n@ImportResource(&quot;classpath:beans-definitions.xml&quot;)\r\npublic class Application extends SpringBootServletInitializer {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(Application.class, args);\r\n    }\r\n\r\n    @Override\r\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n        return application.sources(Application.class);\r\n    }\r\n}\r\n&lt;/pre&gt;\r\n\r\nTried with different springboot versions and it is the same. With pure spring - no problem..\r\nPlease any suggestion what does this error relate to. How springboot is related to it to how spring is fetching JNDI object..? :(\r\n\r\nThank you\r\n","title":"Spirng fails to create jee:jndi-lookup beans after migrating to springboot from pure spring","body":"<p>Trying to migrate from pure spring to spring-boot. Some beans are configured in XML and are referencing JNDI objects provided by web server (WLP) such way i.e.:</p>\n<pre><code> &lt;jee:jndi-lookup id=&quot;executorService&quot;\n                 jndi-name=&quot;concurrent/workManagerTaskExecutor&quot;\n                 expected-type=&quot;java.util.concurrent.ExecutorService&quot;/&gt;\n</code></pre>\n<p>Application is packaged in WAR archive and deployed to WLP server. Now with springboot application is failing during spring context initialization with error message for above bean:</p>\n<p><em>Invocation of init method failed; nested exception is javax.naming.ServiceUnavailableException: Could not obtain an initial context due to a communication failure. Since no provider URL was specified, the default provider URL of &quot;corbaloc:iiop:1.0@492d7185007d:2809/NameService&quot; was used.  Make sure that any bootstrap address information in the URL is correct and that the target name server is running.  Possible causes other than an incorrect bootstrap address or unavailable name server include the network environment and workstation network configuration. [Root exception is org.omg.CORBA.TRANSIENT: java.net.ConnectException: Connection refused (Connection refused):host=172.17.0.4,port=2809  vmcid: IBM  minor code: E02  completed: No]</em></p>\n<p>During migration no much changes were done, generally:</p>\n<pre>\n@SpringBootApplication\n@ImportResource(\"classpath:beans-definitions.xml\")\npublic class Application extends SpringBootServletInitializer {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        return application.sources(Application.class);\n    }\n}\n</pre>\n<p>Tried with different springboot versions and it is the same. With pure spring - no problem..\nPlease any suggestion what does this error relate to. How springboot is related to it to how spring is fetching JNDI object..? :(</p>\n<p>Thank you</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"score":0,"creation_date":1633608935,"post_id":69480937,"comment_id":122808500,"body_markdown":"Access by what?","body":"Access by what?"},{"owner":{"account_id":13774968,"reputation":87,"user_id":9941525,"display_name":"Praphul S Sreedhar"},"score":0,"creation_date":1633609767,"post_id":69480937,"comment_id":122808868,"body_markdown":"@meriton for jasper report i am temporary saving pdf , that file i need to read","body":"@meriton for jasper report i am temporary saving pdf , that file i need to read"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1633610685,"post_id":69480937,"comment_id":122809342,"body_markdown":"It&#39;s unclear what you want. 1. Is the file already present during build (i.e. it should be included in your resources)? 2. Do you need to *write* to the file as well?","body":"It&#39;s unclear what you want. 1. Is the file already present during build (i.e. it should be included in your resources)? 2. Do you need to <i>write</i> to the file as well?"}],"answers":[{"tags":[],"owner":{"account_id":22699957,"reputation":102,"user_id":16867530,"display_name":"nurmanbetov"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1633609059,"creation_date":1633609059,"answer_id":69480998,"question_id":69480937,"body_markdown":"You can define your destination yourself:\r\n\r\n**One possible option:**\r\n\r\n            FileOutputStream out;\r\n            String filePath = &quot;your destination&quot;;\r\n            try {\r\n                out = new FileOutputStream(filePath);\r\n                out.write(someFile.getBytes());\r\n                out.close();\r\n    \r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n\r\nAnd later access it by path","title":"In spring boot which location we are saving a file","body":"<p>You can define your destination yourself:</p>\n<p><strong>One possible option:</strong></p>\n<pre><code>        FileOutputStream out;\n        String filePath = &quot;your destination&quot;;\n        try {\n            out = new FileOutputStream(filePath);\n            out.write(someFile.getBytes());\n            out.close();\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n</code></pre>\n<p>And later access it by path</p>\n"},{"tags":[],"owner":{"account_id":17623291,"reputation":19,"user_id":12788765,"display_name":"Souradeep Banerjee"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1633630124,"creation_date":1633630124,"answer_id":69485893,"question_id":69480937,"body_markdown":"You can store a file anywhere in Spring Boot like the previous answer indicated. \r\nHowever to make it easily accessible in production, it is recommended to save it in the src/main/resources folder since that will copy it into the target folder after the build is completed and you can access it just by mentioning it&#39;s relative path in your code, rather than using it&#39;s entire file path.","title":"In spring boot which location we are saving a file","body":"<p>You can store a file anywhere in Spring Boot like the previous answer indicated.\nHowever to make it easily accessible in production, it is recommended to save it in the src/main/resources folder since that will copy it into the target folder after the build is completed and you can access it just by mentioning it's relative path in your code, rather than using it's entire file path.</p>\n"}],"owner":{"account_id":13774968,"reputation":87,"user_id":9941525,"display_name":"Praphul S Sreedhar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2058,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1633706127,"creation_date":1633608772,"question_id":69480937,"body_markdown":"I need to save a file in spring boot and i can access it in production build also. So where i can store that file?\r\n\r\nWhat is code for getting path , Now i am creating file in pom.xml file location","title":"In spring boot which location we are saving a file","body":"<p>I need to save a file in spring boot and i can access it in production build also. So where i can store that file?</p>\n<p>What is code for getting path , Now i am creating file in pom.xml file location</p>\n"},{"tags":["java","spring-boot","xss","checkmarx","stringescapeutils"],"comments":[{"owner":{"account_id":113085,"reputation":18448,"user_id":298029,"display_name":"fgb"},"score":0,"creation_date":1632489302,"post_id":69310538,"comment_id":122513459,"body_markdown":"XSS is an output issue, not an input issue. Is that method returning JSON or HTML?","body":"XSS is an output issue, not an input issue. Is that method returning JSON or HTML?"},{"owner":{"account_id":5439142,"reputation":2507,"user_id":4327668,"display_name":"securecodeninja"},"score":0,"creation_date":1634172811,"post_id":69310538,"comment_id":122957040,"body_markdown":"@DujSn28 you will have to use Checkmarx CxAudit to create a custom Checkmarx query (overriding the base Reflected XSS Checkmarx query) to recognize your checkCSS method as a valid sanitizer","body":"@DujSn28 you will have to use Checkmarx CxAudit to create a custom Checkmarx query (overriding the base Reflected XSS Checkmarx query) to recognize your checkCSS method as a valid sanitizer"}],"answers":[{"tags":[],"owner":{"account_id":6229011,"reputation":207,"user_id":4846413,"accept_rate":33,"display_name":"mosab"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1633705226,"creation_date":1633705226,"answer_id":69497944,"question_id":69310538,"body_markdown":"try this:\r\n\r\n    ESAPI.encoder().encodeForHTML(clientFirstName);\r\n\r\nand do it for all your query params.","title":"How to prevent Put API in your controller from XSS attacks reflected in CheckMarx scans?","body":"<p>try this:</p>\n<pre><code>ESAPI.encoder().encodeForHTML(clientFirstName);\n</code></pre>\n<p>and do it for all your query params.</p>\n"}],"owner":{"account_id":17068554,"reputation":13,"user_id":12349958,"display_name":"DujSn28"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":790,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1633705226,"creation_date":1632465216,"question_id":69310538,"body_markdown":"I ran a CheckMarx Scan on my repository and it gave quite many potential Reflected XSS attack results. Here is the code for my controller :\r\n\r\n```\r\n@PutMapping(&quot;/calculate&quot;)\r\n    public UpdatedResponse calculateModel(\r\n            @RequestBody ModelDocument modelDocument, @RequestParam String clientFirstName,\r\n            @PathVariable String clientId, @PathVariable String clientLastName\r\n ) {\r\n\r\n        // Sanitize the parameters\r\n\r\n        modelDocument = checkForCSS(modelDocument); // NOT ACCEPTING THIS\r\n        clientId = StringEscapeUtils.escapeHtml4(clientId);\r\n        clientFirstName = StringEscapeUtils.escapeHtml4(clientFirstName);\r\n        clientLastName = StringEscapeUtils.escapeHtml4(clientLastName);\r\n.....\r\n}\r\n```\r\nWhile I was able to resolve the warnings for ```clientId, clientFirstName and clientLastName``` since they were all string variables. But how do I do it for ```modelDocument``` since it is a user defined variable in itself and further has various strings, maps etc. defined inside of it.\r\n\r\nThe method checkForCSS is defined as below but is not being recognized by the scan:\r\n\r\n```\r\npublic static &lt;T&gt; T checkForCSS(T t) {\r\n        Gson gson = new GsonBuilder().serializeSpecialFloatingPointValues().create();\r\n        String agendaModelStr = sanitize(gson.toJson(t));\r\n        return gson.fromJson(agendaModelStr, (Type) t.getClass());\r\n    }\r\n\r\npublic static String sanitize(String string) {\r\n        return Jsoup.clean(string, &quot;&quot;, Whitelist.none(), new Document.OutputSettings().prettyPrint(false));\r\n```\r\n\r\nAny help would be appreciated. Thanks!","title":"How to prevent Put API in your controller from XSS attacks reflected in CheckMarx scans?","body":"<p>I ran a CheckMarx Scan on my repository and it gave quite many potential Reflected XSS attack results. Here is the code for my controller :</p>\n<pre><code>@PutMapping(&quot;/calculate&quot;)\n    public UpdatedResponse calculateModel(\n            @RequestBody ModelDocument modelDocument, @RequestParam String clientFirstName,\n            @PathVariable String clientId, @PathVariable String clientLastName\n ) {\n\n        // Sanitize the parameters\n\n        modelDocument = checkForCSS(modelDocument); // NOT ACCEPTING THIS\n        clientId = StringEscapeUtils.escapeHtml4(clientId);\n        clientFirstName = StringEscapeUtils.escapeHtml4(clientFirstName);\n        clientLastName = StringEscapeUtils.escapeHtml4(clientLastName);\n.....\n}\n</code></pre>\n<p>While I was able to resolve the warnings for <code>clientId, clientFirstName and clientLastName</code> since they were all string variables. But how do I do it for <code>modelDocument</code> since it is a user defined variable in itself and further has various strings, maps etc. defined inside of it.</p>\n<p>The method checkForCSS is defined as below but is not being recognized by the scan:</p>\n<pre><code>public static &lt;T&gt; T checkForCSS(T t) {\n        Gson gson = new GsonBuilder().serializeSpecialFloatingPointValues().create();\n        String agendaModelStr = sanitize(gson.toJson(t));\n        return gson.fromJson(agendaModelStr, (Type) t.getClass());\n    }\n\npublic static String sanitize(String string) {\n        return Jsoup.clean(string, &quot;&quot;, Whitelist.none(), new Document.OutputSettings().prettyPrint(false));\n</code></pre>\n<p>Any help would be appreciated. Thanks!</p>\n"},{"tags":["java","command-line-interface","runtime"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1633718643,"post_id":69497930,"comment_id":122843759,"body_markdown":"Each time you call `Runtime.getRuntime().exec(...)` you create a new process. Instead of that you want to create a single process and pipe your commands into its input stream. Have a look at https://stackoverflow.com/questions/3643939/java-process-with-input-output-stream for how this works.","body":"Each time you call <code>Runtime.getRuntime().exec(...)</code> you create a new process. Instead of that you want to create a single process and pipe your commands into its input stream. Have a look at <a href=\"https://stackoverflow.com/questions/3643939/java-process-with-input-output-stream\" title=\"java process with input output stream\">stackoverflow.com/questions/3643939/&hellip;</a> for how this works."},{"owner":{"account_id":5338090,"reputation":709,"user_id":4256313,"accept_rate":69,"display_name":"Zorak"},"score":0,"creation_date":1633779314,"post_id":69497930,"comment_id":122854436,"body_markdown":"That makes sense. I have briefly visited your linked question and it seems to be the way to go. Thank you very much for your help, sir!","body":"That makes sense. I have briefly visited your linked question and it seems to be the way to go. Thank you very much for your help, sir!"}],"owner":{"account_id":5338090,"reputation":709,"user_id":4256313,"accept_rate":69,"display_name":"Zorak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1633705139,"creation_date":1633705139,"question_id":69497930,"body_markdown":"I am working on a solution that retrieves data from an external system. This system is on the remote server and for connection, it uses a locally installed CLI.\r\n\r\nthe CLI exe itself doesn&#39;t seem to accept all the parameters during the initial call, so I cannot perform the initial call with all parameters I need to put there.\r\n\r\nWhen CLI is called on the machine manually, it jumps into its own environment and accepts its own inputs.\r\n\r\nSo when called manually, it looks something like this:\r\n\r\n    PS C:\\Program Files (x86)\\SW&gt; Cli.exe\r\n    CLI&gt; config -s thisIsMyServer\r\n    Server: thisIsMyServer\r\n    \r\n    CLI&gt; config -f thisIsMyFile\r\n    Server:  thisIsMyServer\r\n    File:   thisIsMyFile\r\n    \r\n    CLI&gt;\r\n\r\nI need to perform this from Java application, that calls the CLI.\r\n\r\nThe original code I came to was:\r\n\r\n    Configuration configuration = Configuration.getInstance();\r\n    Process process = Runtime.getRuntime().exec(configuration.getCLICommand() + &quot; config -s &quot; + configuration.getPlatformURL());\r\n    process.waitFor();\r\n    process = Runtime.getRuntime().exec(configuration.getCLICommand() + &quot; config -f &quot; + configuration.getPlatfomFile());\r\n    process.waitFor();\r\n    process = Runtime.getRuntime().exec(configuration.getCLICommand() + &quot; login &quot; + configuration.getUsername() + &quot; &quot; + configuration.getPass());\r\n    process.waitFor();\r\n\r\nMany things are hidden behind the methods, but I know for sure that:\r\n1) the data in the config file ARE correct and if the data is used manually through CMD, in the end, the CLI throws back successful login and all I need.\r\n2) The methods are returning the data correctly (tried all the logs) so it is down to how the Java is calling it.\r\n3) This example throws out incorrect login, my suspicion is, the parameters are not propagated correctly.\r\n\r\nAlso - and this I don&#39;t know, it is weird, that after each wait, when we want to write to open process, the configuration.getCLICommand() is called every time. This method returns the path to the CLI executable. That suggests (for me) that we are trying to execute new instance of the executable with completely invalid parameters.\r\n\r\nSo I tried to alter the code to:\r\n\r\n    Configuration configuration = Configuration.getInstance();\r\n    Process process = Runtime.getRuntime().exec(configuration.getCLICommand());\r\n    process.waitFor();\r\n    process = Runtime.getRuntime().exec(&quot;config -s &quot; + configuration.getPlatformURL());\r\n    process.waitFor();\r\n    process = Runtime.getRuntime().exec(&quot;config -f &quot; + configuration.getPlatfomFile());\r\n    process.waitFor();\r\n    process = Runtime.getRuntime().exec(&quot;login &quot; + configuration.getUsername() + &quot; &quot; + configuration.getPass());\r\n    process.waitFor();\r\n\r\nWhere the naive idea would be to pass the command, wait for the response, and then send the follow-up command to the process that is somewhere waiting for us running.\r\n\r\nThis is even worse, from invalid login, I get directly into a timeout, where the program just &quot;does nothing&quot; and seems to be hanging somewhere in between the commands. (logs are also problematic, this runs inside a larger java server, but at least there were no java runtime errors).\r\n\r\nAny idea then, how to successfuly pipe additional commands to the running executable?\r\n\r\nThank you!\r\n","title":"Java Runtime exec send followup command","body":"<p>I am working on a solution that retrieves data from an external system. This system is on the remote server and for connection, it uses a locally installed CLI.</p>\n<p>the CLI exe itself doesn't seem to accept all the parameters during the initial call, so I cannot perform the initial call with all parameters I need to put there.</p>\n<p>When CLI is called on the machine manually, it jumps into its own environment and accepts its own inputs.</p>\n<p>So when called manually, it looks something like this:</p>\n<pre><code>PS C:\\Program Files (x86)\\SW&gt; Cli.exe\nCLI&gt; config -s thisIsMyServer\nServer: thisIsMyServer\n\nCLI&gt; config -f thisIsMyFile\nServer:  thisIsMyServer\nFile:   thisIsMyFile\n\nCLI&gt;\n</code></pre>\n<p>I need to perform this from Java application, that calls the CLI.</p>\n<p>The original code I came to was:</p>\n<pre><code>Configuration configuration = Configuration.getInstance();\nProcess process = Runtime.getRuntime().exec(configuration.getCLICommand() + &quot; config -s &quot; + configuration.getPlatformURL());\nprocess.waitFor();\nprocess = Runtime.getRuntime().exec(configuration.getCLICommand() + &quot; config -f &quot; + configuration.getPlatfomFile());\nprocess.waitFor();\nprocess = Runtime.getRuntime().exec(configuration.getCLICommand() + &quot; login &quot; + configuration.getUsername() + &quot; &quot; + configuration.getPass());\nprocess.waitFor();\n</code></pre>\n<p>Many things are hidden behind the methods, but I know for sure that:</p>\n<ol>\n<li>the data in the config file ARE correct and if the data is used manually through CMD, in the end, the CLI throws back successful login and all I need.</li>\n<li>The methods are returning the data correctly (tried all the logs) so it is down to how the Java is calling it.</li>\n<li>This example throws out incorrect login, my suspicion is, the parameters are not propagated correctly.</li>\n</ol>\n<p>Also - and this I don't know, it is weird, that after each wait, when we want to write to open process, the configuration.getCLICommand() is called every time. This method returns the path to the CLI executable. That suggests (for me) that we are trying to execute new instance of the executable with completely invalid parameters.</p>\n<p>So I tried to alter the code to:</p>\n<pre><code>Configuration configuration = Configuration.getInstance();\nProcess process = Runtime.getRuntime().exec(configuration.getCLICommand());\nprocess.waitFor();\nprocess = Runtime.getRuntime().exec(&quot;config -s &quot; + configuration.getPlatformURL());\nprocess.waitFor();\nprocess = Runtime.getRuntime().exec(&quot;config -f &quot; + configuration.getPlatfomFile());\nprocess.waitFor();\nprocess = Runtime.getRuntime().exec(&quot;login &quot; + configuration.getUsername() + &quot; &quot; + configuration.getPass());\nprocess.waitFor();\n</code></pre>\n<p>Where the naive idea would be to pass the command, wait for the response, and then send the follow-up command to the process that is somewhere waiting for us running.</p>\n<p>This is even worse, from invalid login, I get directly into a timeout, where the program just &quot;does nothing&quot; and seems to be hanging somewhere in between the commands. (logs are also problematic, this runs inside a larger java server, but at least there were no java runtime errors).</p>\n<p>Any idea then, how to successfuly pipe additional commands to the running executable?</p>\n<p>Thank you!</p>\n"},{"tags":["java","jconsole"],"comments":[{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1305133681,"post_id":5967281,"comment_id":6884995,"body_markdown":"are both machines running the same version of java 1.6?  i have a vague recollection of there being some bugs related to this stuff in some of the jdk 1.6 releases.","body":"are both machines running the same version of java 1.6?  i have a vague recollection of there being some bugs related to this stuff in some of the jdk 1.6 releases."},{"owner":{"account_id":20044,"reputation":4699,"user_id":47508,"accept_rate":62,"display_name":"richs"},"score":0,"creation_date":1305135209,"post_id":5967281,"comment_id":6885348,"body_markdown":"I ran one of processes and the jconsole using the exact same JDK, from that same directory.  Still that process shows gray.","body":"I ran one of processes and the jconsole using the exact same JDK, from that same directory.  Still that process shows gray."},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1305139448,"post_id":5967281,"comment_id":6886463,"body_markdown":"right, i&#39;m asking if the 2 different boxes are using the same version of the jdk.","body":"right, i&#39;m asking if the 2 different boxes are using the same version of the jdk."},{"owner":{"account_id":20044,"reputation":4699,"user_id":47508,"accept_rate":62,"display_name":"richs"},"score":0,"creation_date":1305140888,"post_id":5967281,"comment_id":6886866,"body_markdown":"i tried uninstalling and re-installing a new version of the JDK, and it still didn&#39;t work.  But i noticed that there was a system classpath with some reference to a java library for quicktime.  i wish i had copied it.  but i un-installed quicktime and now everything works.","body":"i tried uninstalling and re-installing a new version of the JDK, and it still didn&#39;t work.  But i noticed that there was a system classpath with some reference to a java library for quicktime.  i wish i had copied it.  but i un-installed quicktime and now everything works."}],"answers":[{"tags":[],"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1305139558,"creation_date":1305130781,"answer_id":5967470,"question_id":5967281,"body_markdown":"if the processes are running as a different user (e.g. if you start them as services), then you won&#39;t be able to connect to them.  also, if they are running under an older jvm, you most likely won&#39;t be able to talk to them either.\r\n\r\nin some cases, the local jmx communication mechanism uses the local filesystem and may have issues if permissions are not defined correctly.  are you possibly running any of these processes on networked filesystems (nfs, samba)?","title":"Local java processes are grayed when trying to connect via JMX","body":"<p>if the processes are running as a different user (e.g. if you start them as services), then you won't be able to connect to them.  also, if they are running under an older jvm, you most likely won't be able to talk to them either.</p>\n\n<p>in some cases, the local jmx communication mechanism uses the local filesystem and may have issues if permissions are not defined correctly.  are you possibly running any of these processes on networked filesystems (nfs, samba)?</p>\n"},{"tags":[],"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1565450084,"creation_date":1305131217,"answer_id":5967559,"question_id":5967281,"body_markdown":"From http://download.oracle.com/javase/6/docs/technotes/guides/management/jconsole.html:\n\n&gt; Applications that are not attachable, with the management agent disabled. These include applications started on a J2SE 1.4.2 platform or started on a J2SE 5.0 platform without the `-Dcom.sun.management.jmxremote` or `com.sun.management.jmxremote.port` options. **These applications appear grayed-out** in the table and JConsole cannot connect to them. In the example connection dialog shown in Figure 3-1, the Anagrams application was started with a J2SE 5.0 platform VM without any of the management properties to enable the JMX agent, and consequently shows up in gray and cannot be selected.\n\n[![Figure 3-1 Creating a Connection to a Local Process][1]][1]  \n&lt;sub&gt;(source: [oracle.com](http://download.oracle.com/javase/6/docs/technotes/guides/management/figures/connect.gif))&lt;/sub&gt;  \n\n\nDespite what&#39;s being written in the documentation, most likely your process is running under a different user. You can run `jconsole` as an administrator and try then.\n\n [1]: https://i.stack.imgur.com/kpynp.gif","title":"Local java processes are grayed when trying to connect via JMX","body":"<p>From <a href=\"http://download.oracle.com/javase/6/docs/technotes/guides/management/jconsole.html\" rel=\"nofollow noreferrer\">http://download.oracle.com/javase/6/docs/technotes/guides/management/jconsole.html</a>:</p>\n<blockquote>\n<p>Applications that are not attachable, with the management agent disabled. These include applications started on a J2SE 1.4.2 platform or started on a J2SE 5.0 platform without the <code>-Dcom.sun.management.jmxremote</code> or <code>com.sun.management.jmxremote.port</code> options. <strong>These applications appear grayed-out</strong> in the table and JConsole cannot connect to them. In the example connection dialog shown in Figure 3-1, the Anagrams application was started with a J2SE 5.0 platform VM without any of the management properties to enable the JMX agent, and consequently shows up in gray and cannot be selected.</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/kpynp.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kpynp.gif\" alt=\"Figure 3-1 Creating a Connection to a Local Process\" /></a><br />\n<sub>(source: <a href=\"http://download.oracle.com/javase/6/docs/technotes/guides/management/figures/connect.gif\" rel=\"nofollow noreferrer\">oracle.com</a>)</sub></p>\n<p>Despite what's being written in the documentation, most likely your process is running under a different user. You can run <code>jconsole</code> as an administrator and try then.</p>\n"},{"tags":[],"owner":{"account_id":1421515,"reputation":383,"user_id":1346023,"display_name":"RegRog"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1447061548,"creation_date":1334911367,"answer_id":10242936,"question_id":5967281,"body_markdown":"I&#39;m fighting with this issue right now and I found out a work around:\r\n\r\nYou can change the local user&#39;s temp dir to something that they can definitely access (e.g. D:\\temp). Make sure to do this for the process you&#39;re trying to monitor and the jconsole process.\r\n\r\nAnother thing that can apparently cause issues are usernames with uppercase letters in them. The directory will always be created with all lowercase letters, but simply renaming it to exactly how it&#39;s being shown in the Task Manager made all the issues go away: http://planeofthought.com/wp/?p=75","title":"Local java processes are grayed when trying to connect via JMX","body":"<p>I'm fighting with this issue right now and I found out a work around:</p>\n\n<p>You can change the local user's temp dir to something that they can definitely access (e.g. D:\\temp). Make sure to do this for the process you're trying to monitor and the jconsole process.</p>\n\n<p>Another thing that can apparently cause issues are usernames with uppercase letters in them. The directory will always be created with all lowercase letters, but simply renaming it to exactly how it's being shown in the Task Manager made all the issues go away: <a href=\"http://planeofthought.com/wp/?p=75\" rel=\"noreferrer\">http://planeofthought.com/wp/?p=75</a></p>\n"},{"tags":[],"owner":{"account_id":2331029,"reputation":41,"user_id":2044465,"display_name":"Ayodeji Babaniyi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1372283006,"creation_date":1372281681,"answer_id":17330685,"question_id":5967281,"body_markdown":"Here is what worked for me. I changed my `%TEMP%` and `%TMP%` environment variables to point to a folder I created in my `%HOME%` location (like `C:\\Users\\[YOUR_NAME]\\Temp`). Once I did this, all problems vanished. ","title":"Local java processes are grayed when trying to connect via JMX","body":"<p>Here is what worked for me. I changed my <code>%TEMP%</code> and <code>%TMP%</code> environment variables to point to a folder I created in my <code>%HOME%</code> location (like <code>C:\\Users\\[YOUR_NAME]\\Temp</code>). Once I did this, all problems vanished. </p>\n"},{"tags":[],"owner":{"account_id":123688,"reputation":1109,"user_id":318295,"display_name":"Roland"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1415670587,"creation_date":1415670587,"answer_id":26856195,"question_id":5967281,"body_markdown":"Say your windows user name you use to start your java application seen in task manager is YOUR_USER_NAME.\r\nPlease check a folder whose name looks like hsperfdata_XXXXX (XXXXX should be your user name) in your temp folder and make sure YOUR_USER_NAME and XXXXX are exactly the same (be careful about the upper and lower case).","title":"Local java processes are grayed when trying to connect via JMX","body":"<p>Say your windows user name you use to start your java application seen in task manager is YOUR_USER_NAME.\nPlease check a folder whose name looks like hsperfdata_XXXXX (XXXXX should be your user name) in your temp folder and make sure YOUR_USER_NAME and XXXXX are exactly the same (be careful about the upper and lower case).</p>\n"},{"tags":[],"owner":{"account_id":6221014,"reputation":1,"user_id":4840653,"display_name":"Nikhil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1430202734,"creation_date":1430202734,"answer_id":29911939,"question_id":5967281,"body_markdown":"Change your TEMP paths in Environment Variables to something like D:\\temp as it could be a permission issue. Fixed this issue for me","title":"Local java processes are grayed when trying to connect via JMX","body":"<p>Change your TEMP paths in Environment Variables to something like D:\\temp as it could be a permission issue. Fixed this issue for me</p>\n"},{"tags":[],"owner":{"account_id":1002349,"reputation":1401,"user_id":1016937,"accept_rate":67,"display_name":"evgeny9"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1550071134,"creation_date":1550071134,"answer_id":54673572,"question_id":5967281,"body_markdown":"I had the problem as described earlier, but was advised a simpler solution: just close all programs using Java (&quot;IntelliJ IDEA&quot;, &quot;SoapUI&quot;, etc. - to unlock the temporary folder) and then delete `%TMP%\\hsperfdata_&lt;user.name&gt;` folder. Then, after opening any Java program, this folder will be recreated but this time with correct name (most likely `%TMP%\\hsperfdata_&lt;User.Name&gt;`). And after that, local Java processes can be monitored through &quot;JConsole&quot; or &quot;VisualVM&quot; (now runs without starting error with a link to [VisualVM: Troubleshooting Guide](https://visualvm.github.io/troubleshooting.html#jpswin2)) again.","title":"Local java processes are grayed when trying to connect via JMX","body":"<p>I had the problem as described earlier, but was advised a simpler solution: just close all programs using Java (\"IntelliJ IDEA\", \"SoapUI\", etc. - to unlock the temporary folder) and then delete <code>%TMP%\\hsperfdata_&lt;user.name&gt;</code> folder. Then, after opening any Java program, this folder will be recreated but this time with correct name (most likely <code>%TMP%\\hsperfdata_&lt;User.Name&gt;</code>). And after that, local Java processes can be monitored through \"JConsole\" or \"VisualVM\" (now runs without starting error with a link to <a href=\"https://visualvm.github.io/troubleshooting.html#jpswin2\" rel=\"nofollow noreferrer\">VisualVM: Troubleshooting Guide</a>) again.</p>\n"},{"tags":[],"owner":{"account_id":12658146,"reputation":27,"user_id":9200005,"display_name":"Pranjal Gohain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1550734193,"creation_date":1550734193,"answer_id":54801489,"question_id":5967281,"body_markdown":"instead of this steps you can just goto the CMD and then type in jconsole.exe (PID)\r\n\r\nRemember to go to the path where jconsole is present and then run the executable file.","title":"Local java processes are grayed when trying to connect via JMX","body":"<p>instead of this steps you can just goto the CMD and then type in jconsole.exe (PID)</p>\n\n<p>Remember to go to the path where jconsole is present and then run the executable file.</p>\n"},{"tags":[],"owner":{"account_id":12605596,"reputation":31,"user_id":9166627,"display_name":"Marcelino Galarza"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1577721464,"creation_date":1577721464,"answer_id":59533538,"question_id":5967281,"body_markdown":"Change the name of the hsperfdata folder which for me was found at C:\\Users\\pmimgg0\\AppData\\Local\\Temp\\hsperfdata_pmimgg0 to match the User name found on task manager. Once I changed hsperfdata_pmimgg0 to hsperfdata_PMIMGG0 my local process was no longer greyed out on jconsole.  \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/K4RD3.png","title":"Local java processes are grayed when trying to connect via JMX","body":"<p>Change the name of the hsperfdata folder which for me was found at C:\\Users\\pmimgg0\\AppData\\Local\\Temp\\hsperfdata_pmimgg0 to match the User name found on task manager. Once I changed hsperfdata_pmimgg0 to hsperfdata_PMIMGG0 my local process was no longer greyed out on jconsole.  </p>\n\n<p><a href=\"https://i.stack.imgur.com/K4RD3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K4RD3.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":11074523,"reputation":384,"user_id":8131676,"display_name":"Archit Puri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633704828,"creation_date":1633704828,"answer_id":69497844,"question_id":5967281,"body_markdown":"The best way is to run **local process like a remote process**.\r\n\r\nAdd these conditions in runtime arguments -\r\n\r\n    -Dcom.sun.management.jmxremote=true\r\n    -Dcom.sun.management.jmxremote.port=6001\r\n    -Dcom.sun.management.jmxremote.authenticate=false\r\n    -Dcom.sun.management.jmxremote.ssl=false\r\n    -Djava.rmi.server.hostname=localhost\r\n    -Dcom.sun.management.jmxremote.rmi.port=6001\r\n\r\nThen select Remote Process and point to localhost:6001 as shown\r\n\r\n[![JConsole New Connection][1]][1]\r\n\r\nClick Connect and Jconsole is connected successfully.\r\n\r\nFor me this fixed as I had some admin constraints.\r\n\r\n  [1]: https://i.stack.imgur.com/pgKbj.png","title":"Local java processes are grayed when trying to connect via JMX","body":"<p>The best way is to run <strong>local process like a remote process</strong>.</p>\n<p>Add these conditions in runtime arguments -</p>\n<pre><code>-Dcom.sun.management.jmxremote=true\n-Dcom.sun.management.jmxremote.port=6001\n-Dcom.sun.management.jmxremote.authenticate=false\n-Dcom.sun.management.jmxremote.ssl=false\n-Djava.rmi.server.hostname=localhost\n-Dcom.sun.management.jmxremote.rmi.port=6001\n</code></pre>\n<p>Then select Remote Process and point to localhost:6001 as shown</p>\n<p><a href=\"https://i.stack.imgur.com/pgKbj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pgKbj.png\" alt=\"JConsole New Connection\" /></a></p>\n<p>Click Connect and Jconsole is connected successfully.</p>\n<p>For me this fixed as I had some admin constraints.</p>\n"}],"owner":{"account_id":20044,"reputation":4699,"user_id":47508,"accept_rate":62,"display_name":"richs"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15789,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":10,"score":9,"last_activity_date":1633704828,"creation_date":1305129858,"question_id":5967281,"body_markdown":"I&#39;m running a number of java processes on a windows XP professional machine.  When i attempt to connect to these processes via a local JConsole the processes are grayed out.  \r\n\r\nHowever i can run the same processes on another machine and connect via a local JConsole on that machine.\r\n\r\nBoth machines are running java 1.6 version for the processes and jconsole.\r\n\r\nAny ideas why these processes are grayed out?","title":"Local java processes are grayed when trying to connect via JMX","body":"<p>I'm running a number of java processes on a windows XP professional machine.  When i attempt to connect to these processes via a local JConsole the processes are grayed out.  </p>\n\n<p>However i can run the same processes on another machine and connect via a local JConsole on that machine.</p>\n\n<p>Both machines are running java 1.6 version for the processes and jconsole.</p>\n\n<p>Any ideas why these processes are grayed out?</p>\n"},{"tags":["java","spring","spring-restcontroller"],"answers":[{"tags":[],"owner":{"account_id":3796711,"reputation":260,"user_id":3151553,"accept_rate":75,"display_name":"stefanos"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1508322678,"creation_date":1508322678,"answer_id":46808110,"question_id":46808109,"body_markdown":"I have managed to solve this by removing the `produces` from `@RequestMapping` and specifying with `ResponseEntity` the type I want to return\r\n\r\n&lt;!-- language-all: java --&gt;\r\n\r\n    @RequestMapping(value = &quot;/test&quot;, method = RequestMethod.GET)\r\n    public ResponseEntity&lt;String&gt; throwException(\r\n        @RequestParam(value = &quot;flag&quot;, defaultValue = &quot;false&quot;) Boolean flag\r\n    ) throws Exception {\r\n        if (flag) {\r\n            throw new Exception();\r\n        } else {\r\n            ResponseEntity response = ResponseEntity.ok().\r\n                contentType(MediaType.APPLICATION_XML).\r\n                body(&quot;&lt;xml&gt;hello&lt;/xml&gt;&quot;);\r\n            return response;\r\n        }\r\n    }\r\n\r\nThe problem with that solution is that all of the methods have an `@annotation` with the type they produce and this doesn&#39;t, breaking uniformity.","title":"Spring rest controller @ExceptionHandler return xml content and json errors","body":"<p>I have managed to solve this by removing the <code>produces</code> from <code>@RequestMapping</code> and specifying with <code>ResponseEntity</code> the type I want to return</p>\n\n\n\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value = \"/test\", method = RequestMethod.GET)\npublic ResponseEntity&lt;String&gt; throwException(\n    @RequestParam(value = \"flag\", defaultValue = \"false\") Boolean flag\n) throws Exception {\n    if (flag) {\n        throw new Exception();\n    } else {\n        ResponseEntity response = ResponseEntity.ok().\n            contentType(MediaType.APPLICATION_XML).\n            body(\"&lt;xml&gt;hello&lt;/xml&gt;\");\n        return response;\n    }\n}\n</code></pre>\n\n<p>The problem with that solution is that all of the methods have an <code>@annotation</code> with the type they produce and this doesn't, breaking uniformity.</p>\n"},{"tags":[],"owner":{"account_id":4323464,"reputation":6780,"user_id":3530898,"display_name":"Amit K Bist"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1508337832,"creation_date":1508337832,"answer_id":46812944,"question_id":46808109,"body_markdown":"You need to add below dependency in your pom.xml and it will work with your code with produces = MediaType.APPLICATION_XML_VALUE,\r\n\r\n        &lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;","title":"Spring rest controller @ExceptionHandler return xml content and json errors","body":"<p>You need to add below dependency in your pom.xml and it will work with your code with produces = MediaType.APPLICATION_XML_VALUE,</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16303290,"reputation":131,"user_id":11773824,"display_name":"silk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1562915570,"creation_date":1562915570,"answer_id":57001896,"question_id":46808109,"body_markdown":"One option is to add content type to ResponseEntity explicitly in ExceptionHandler.\r\n\r\n**Controller**: \r\n\r\n    @GetMapping(&quot;/path&quot;, produces = [MediaType.TEXT_XML_VALUE])\r\n\r\n**ControllerAdvice**:\r\n\r\n    @ExceptionHandler(org.springframework.validation.BindException::class)\r\n        fun handleBindException(\r\n            e: org.springframework.validation.BindException\r\n        ): ResponseEntity&lt;ErrorResponse&gt; {    \r\n            return ResponseEntity\r\n                .status(HttpStatus.BAD_REQUEST)\r\n                .contentType(MediaType.APPLICATION_JSON_UTF8)\r\n                .body(ErrorResponse(e.message))\r\n        }\r\n\r\n**ErrorResponse**\r\n\r\n    data class ErrorResponse(val message: String?)\r\n\r\nTested on Spring Boot 2.1.3.RELEASE with Kotlin","title":"Spring rest controller @ExceptionHandler return xml content and json errors","body":"<p>One option is to add content type to ResponseEntity explicitly in ExceptionHandler.</p>\n\n<p><strong>Controller</strong>: </p>\n\n<pre><code>@GetMapping(\"/path\", produces = [MediaType.TEXT_XML_VALUE])\n</code></pre>\n\n<p><strong>ControllerAdvice</strong>:</p>\n\n<pre><code>@ExceptionHandler(org.springframework.validation.BindException::class)\n    fun handleBindException(\n        e: org.springframework.validation.BindException\n    ): ResponseEntity&lt;ErrorResponse&gt; {    \n        return ResponseEntity\n            .status(HttpStatus.BAD_REQUEST)\n            .contentType(MediaType.APPLICATION_JSON_UTF8)\n            .body(ErrorResponse(e.message))\n    }\n</code></pre>\n\n<p><strong>ErrorResponse</strong></p>\n\n<pre><code>data class ErrorResponse(val message: String?)\n</code></pre>\n\n<p>Tested on Spring Boot 2.1.3.RELEASE with Kotlin</p>\n"},{"tags":[],"owner":{"account_id":7425507,"reputation":621,"user_id":5648134,"accept_rate":100,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633704777,"creation_date":1633704777,"answer_id":69497829,"question_id":46808109,"body_markdown":"In order to make ExceptionHandler return XML format(by default it returns JSON format), there two steps need to do:\r\n\r\n1. import the maven dependency:\r\n\r\n&gt;      &lt;dependency&gt;\r\n&gt;          &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n&gt;          &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n&gt;      &lt;/dependency&gt;\r\n\r\n2. use ResposneEntity&#39;s static method `internalServerError()`:\r\n`ResponseEntity.internalServerError().header(&quot;MyHeader&quot;,&quot;MyValue&quot;).contentType(MediaType.APPLICATION_XML).body(ex);`\r\n\r\ninside the contentType, specify `MediaType.APPLICATION_XML`. ","title":"Spring rest controller @ExceptionHandler return xml content and json errors","body":"<p>In order to make ExceptionHandler return XML format(by default it returns JSON format), there two steps need to do:</p>\n<ol>\n<li>import the maven dependency:</li>\n</ol>\n<blockquote>\n<pre><code> &lt;dependency&gt;\n     &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n     &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n &lt;/dependency&gt;\n</code></pre>\n</blockquote>\n<ol start=\"2\">\n<li>use ResposneEntity's static method <code>internalServerError()</code>:\n<code>ResponseEntity.internalServerError().header(&quot;MyHeader&quot;,&quot;MyValue&quot;).contentType(MediaType.APPLICATION_XML).body(ex);</code></li>\n</ol>\n<p>inside the contentType, specify <code>MediaType.APPLICATION_XML</code>.</p>\n"}],"owner":{"account_id":3796711,"reputation":260,"user_id":3151553,"accept_rate":75,"display_name":"stefanos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5000,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":46808110,"answer_count":4,"score":2,"last_activity_date":1633704777,"creation_date":1508322678,"question_id":46808109,"body_markdown":"So I have a @RestController and I want to return and validate XML based on a schema for a front-end application in order to display them in an editor. I want the errors to be in json format in order to handle and display them with js.\r\n\r\n&lt;!-- language-all: java --&gt;\r\n\r\n    @RestController\r\n    public class UserController {\r\n\r\n        @RequestMapping(value = &quot;/test&quot;,\r\n            method = RequestMethod.GET,\r\n            produces = MediaType.APPLICATION_XML_VALUE)\r\n        public ResponseEntity&lt;String&gt; throwException(\r\n            @RequestParam(value = &quot;flag&quot;, defaultValue = &quot;false&quot;) Boolean flag\r\n        ) throws Exception {\r\n            if (flag) {\r\n                throw new Exception();\r\n            } else {\r\n                return ResponseEntity.ok(&quot;&lt;xml&gt;hello&lt;/xml&gt;&quot;);\r\n            }\r\n        }\r\n\r\n\r\n        @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n        @ExceptionHandler(Exception.class)\r\n        @ResponseBody\r\n        ServerError exceptionHandler(HttpServletRequest req, Exception ex) {\r\n            return new ServerError(req.getRequestURL().toString(),ex);\r\n        }\r\n\r\n    }\r\n\r\nThe ServerError I want to return in JSON format :\r\n\r\n    public class ServerError {\r\n\r\n        public final String url;\r\n        public final String error;\r\n \r\n        public ServerError(String url, Exception ex) {\r\n            this.url = url;\r\n            this.error = ex.getMessage();\r\n        }\r\n\r\n        public String getUrl() {\r\n            return url;\r\n        }\r\n\r\n        public String getError() {\r\n            return error;\r\n        }\r\n    }\r\n\r\nSo the `&lt;xml&gt;hello&lt;/xml&gt;` is returned just fine but when I set the flag to `true` I get\r\n    \r\n    ERROR   2017-10-18 12:56:53,189 [http-nio-0.0.0.0-8080-exec-2] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver  - Failed to invoke @ExceptionHandler method: eu.openminted.registry.core.exception.ServerError eu.openminted.registry.service.UserController.malformedExeption(javax.servlet.http.HttpServletRequest,java.lang.Exception)\r\n    org.springframework.web.HttpMediaTypeNotAcceptableException: Could not find acceptable representation\r\n\r\nAlso, setting the `produces` to both XML and JSON yields the same result\r\n\r\n    @RequestMapping(value = &quot;/test&quot;,\r\n            method = RequestMethod.GET,\r\n            produces = {MediaType.APPLICATION_XML_VALUE,MediaType.APPLICATION_JSON_UTF8_VALUE})\r\n\r\n","title":"Spring rest controller @ExceptionHandler return xml content and json errors","body":"<p>So I have a @RestController and I want to return and validate XML based on a schema for a front-end application in order to display them in an editor. I want the errors to be in json format in order to handle and display them with js.</p>\n\n\n\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class UserController {\n\n    @RequestMapping(value = \"/test\",\n        method = RequestMethod.GET,\n        produces = MediaType.APPLICATION_XML_VALUE)\n    public ResponseEntity&lt;String&gt; throwException(\n        @RequestParam(value = \"flag\", defaultValue = \"false\") Boolean flag\n    ) throws Exception {\n        if (flag) {\n            throw new Exception();\n        } else {\n            return ResponseEntity.ok(\"&lt;xml&gt;hello&lt;/xml&gt;\");\n        }\n    }\n\n\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\n    @ExceptionHandler(Exception.class)\n    @ResponseBody\n    ServerError exceptionHandler(HttpServletRequest req, Exception ex) {\n        return new ServerError(req.getRequestURL().toString(),ex);\n    }\n\n}\n</code></pre>\n\n<p>The ServerError I want to return in JSON format :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class ServerError {\n\n    public final String url;\n    public final String error;\n\n    public ServerError(String url, Exception ex) {\n        this.url = url;\n        this.error = ex.getMessage();\n    }\n\n    public String getUrl() {\n        return url;\n    }\n\n    public String getError() {\n        return error;\n    }\n}\n</code></pre>\n\n<p>So the <code>&lt;xml&gt;hello&lt;/xml&gt;</code> is returned just fine but when I set the flag to <code>true</code> I get</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>ERROR   2017-10-18 12:56:53,189 [http-nio-0.0.0.0-8080-exec-2] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver  - Failed to invoke @ExceptionHandler method: eu.openminted.registry.core.exception.ServerError eu.openminted.registry.service.UserController.malformedExeption(javax.servlet.http.HttpServletRequest,java.lang.Exception)\norg.springframework.web.HttpMediaTypeNotAcceptableException: Could not find acceptable representation\n</code></pre>\n\n<p>Also, setting the <code>produces</code> to both XML and JSON yields the same result</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value = \"/test\",\n        method = RequestMethod.GET,\n        produces = {MediaType.APPLICATION_XML_VALUE,MediaType.APPLICATION_JSON_UTF8_VALUE})\n</code></pre>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1633704574,"creation_date":1633704574,"answer_id":69497784,"question_id":69497069,"body_markdown":"Use `@PropertySources`. Annotate either a config class that holds the attributes of the files, or your `Main` class.\r\n\r\n\r\ne.g.:\r\n```\r\n@PropertySources(\r\n\t\t{\r\n\t\t@PropertySource(&quot;classpath:messages.properties&quot;),\r\n\t\t@PropertySource(&quot;classpath:handle.properties&quot;)\r\n\t\t}\r\n)\r\n```","title":"Config multiple message properties","body":"<p>Use <code>@PropertySources</code>. Annotate either a config class that holds the attributes of the files, or your <code>Main</code> class.</p>\n<p>e.g.:</p>\n<pre><code>@PropertySources(\n        {\n        @PropertySource(&quot;classpath:messages.properties&quot;),\n        @PropertySource(&quot;classpath:handle.properties&quot;)\n        }\n)\n</code></pre>\n"}],"owner":{"account_id":8279759,"reputation":118,"user_id":6242303,"display_name":"Ikaro Sales"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69497784,"answer_count":1,"score":0,"last_activity_date":1633704574,"creation_date":1633701494,"question_id":69497069,"body_markdown":"I have properties files and I need to set them both to be loaded, but I have no idea how to do this with multiple properties\r\n```\r\nresources\r\n`-- messages.properties\r\n`-- handle.properties\r\n```","title":"Config multiple message properties","body":"<p>I have properties files and I need to set them both to be loaded, but I have no idea how to do this with multiple properties</p>\n<pre><code>resources\n`-- messages.properties\n`-- handle.properties\n</code></pre>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":11389854,"reputation":6022,"user_id":8370915,"display_name":"invzbl3"},"score":1,"creation_date":1633701136,"post_id":69494672,"comment_id":122837133,"body_markdown":"Looks like this [answer](https://stackoverflow.com/a/40818540/8370915) is related to your question. Also, please, take a look at this [article](https://www.jetbrains.com/help/idea/migrating-from-eclipse-to-intellij-idea.html).","body":"Looks like this <a href=\"https://stackoverflow.com/a/40818540/8370915\">answer</a> is related to your question. Also, please, take a look at this <a href=\"https://www.jetbrains.com/help/idea/migrating-from-eclipse-to-intellij-idea.html\" rel=\"nofollow noreferrer\">article</a>."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1633705026,"post_id":69494672,"comment_id":122838812,"body_markdown":"You did a great job at censoring your screenshot, except now it really doesn&#39;t show us what it is you want to be displayed, does it now?","body":"You did a great job at censoring your screenshot, except now it really doesn&#39;t show us what it is you want to be displayed, does it now?"},{"owner":{"account_id":19571807,"reputation":133,"user_id":14322804,"display_name":"nuzooo"},"score":1,"creation_date":1633800801,"post_id":69494672,"comment_id":122859530,"body_markdown":"@invzbl3 Your reference worked! that is the answer , add your post as answer and I will mark for upvote! Thanks","body":"@invzbl3 Your reference worked! that is the answer , add your post as answer and I will mark for upvote! Thanks"},{"owner":{"account_id":19571807,"reputation":133,"user_id":14322804,"display_name":"nuzooo"},"score":0,"creation_date":1633800926,"post_id":69494672,"comment_id":122859557,"body_markdown":"@Joachim Sauer as invzbl3 wrote, to see the projects, that all","body":"@Joachim Sauer as invzbl3 wrote, to see the projects, that all"}],"answers":[{"tags":[],"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633704564,"creation_date":1633704564,"answer_id":69497774,"question_id":69494672,"body_markdown":"To see al packages in the project, switch to **Packages** view in Project tool window and enable **Flatten Packages** [viewing mode](https://www.jetbrains.com/help/idea/ide-viewing-modes.html):\r\n\r\n[![enter image description here][1]][1]\r\n\r\nSee also [Migrate from Eclipse to IntelliJ IDEA﻿](https://www.jetbrains.com/help/idea/migrating-from-eclipse-to-intellij-idea.html) for more tips.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/O1Xw6.png","title":"Is there way in intellij to see all packages?","body":"<p>To see al packages in the project, switch to <strong>Packages</strong> view in Project tool window and enable <strong>Flatten Packages</strong> <a href=\"https://www.jetbrains.com/help/idea/ide-viewing-modes.html\" rel=\"nofollow noreferrer\">viewing mode</a>:</p>\n<p><a href=\"https://i.stack.imgur.com/O1Xw6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O1Xw6.png\" alt=\"enter image description here\" /></a></p>\n<p>See also <a href=\"https://www.jetbrains.com/help/idea/migrating-from-eclipse-to-intellij-idea.html\" rel=\"nofollow noreferrer\">Migrate from Eclipse to IntelliJ IDEA﻿</a> for more tips.</p>\n"}],"owner":{"account_id":19571807,"reputation":133,"user_id":14322804,"display_name":"nuzooo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1633801072,"answer_count":1,"score":1,"last_activity_date":1633704564,"creation_date":1633690197,"question_id":69494672,"body_markdown":"is there way to see all packages that are in folder like in eclipse, but in intellij?\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iG7jg.jpg","title":"Is there way in intellij to see all packages?","body":"<p>is there way to see all packages that are in folder like in eclipse, but in intellij?\n<a href=\"https://i.stack.imgur.com/iG7jg.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iG7jg.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","gradle","compilation","warnings"],"comments":[{"owner":{"account_id":288740,"reputation":36420,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"score":0,"creation_date":1511345184,"post_id":47430694,"comment_id":81817909,"body_markdown":"Question of style &quot;why isn&#39;t this code working&quot; are offtopic on SO, please read log files and attach a debugger to find out why your code is misbehaving. More info also at http://stackoverflow.com/help/how-to-ask. The warning just means that you use stuff that you shouldn&#39;t use anymore and that will be removed in some later version, it should not cause the crash. Actually Android Studio should also show you those usages by striking through the deprecated usage.","body":"Question of style &quot;why isn&#39;t this code working&quot; are offtopic on SO, please read log files and attach a debugger to find out why your code is misbehaving. More info also at <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>. The warning just means that you use stuff that you shouldn&#39;t use anymore and that will be removed in some later version, it should not cause the crash. Actually Android Studio should also show you those usages by striking through the deprecated usage."},{"owner":{"account_id":11253358,"reputation":641,"user_id":8253888,"accept_rate":50,"display_name":"55SK55"},"score":0,"creation_date":1511345256,"post_id":47430694,"comment_id":81817954,"body_markdown":"How to Recompile with -Xlint:deprecation?","body":"How to Recompile with -Xlint:deprecation?"},{"owner":{"account_id":288740,"reputation":36420,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"score":6,"creation_date":1511346406,"post_id":47430694,"comment_id":81818724,"body_markdown":"To enable it in all java compilation tasks in all projects do in the root build file `allprojects { tasks.withType(JavaCompile) { options.deprecation = true } }`, or just set the option on selected tasks.","body":"To enable it in all java compilation tasks in all projects do in the root build file <code>allprojects { tasks.withType(JavaCompile) { options.deprecation = true } }</code>, or just set the option on selected tasks."},{"owner":{"account_id":11253358,"reputation":641,"user_id":8253888,"accept_rate":50,"display_name":"55SK55"},"score":0,"creation_date":1511348707,"post_id":47430694,"comment_id":81820345,"body_markdown":"In whcih file i need to set this?","body":"In whcih file i need to set this?"},{"owner":{"account_id":288740,"reputation":36420,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"score":0,"creation_date":1511353381,"post_id":47430694,"comment_id":81823342,"body_markdown":"As I said, in the root build script","body":"As I said, in the root build script"},{"owner":{"account_id":470838,"reputation":3168,"user_id":878244,"accept_rate":35,"display_name":"Yehonatan"},"score":0,"creation_date":1533557118,"post_id":47430694,"comment_id":90375138,"body_markdown":"build.gradle of the app module","body":"build.gradle of the app module"}],"answers":[{"tags":[],"owner":{"account_id":5690652,"reputation":3912,"user_id":4498813,"display_name":"Mitul Varmora"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633704428,"creation_date":1633702570,"answer_id":69497323,"question_id":47430694,"body_markdown":"    Html.fromHtml(&quot;&amp;#8226;&quot;) //It is deprecated.\r\n\r\nRefrance: https://developer.android.com/reference/android/text/Html#fromHtml(java.lang.String) \r\n\r\nSolution:\r\n\r\n    HtmlCompat.fromHtml(&quot;&amp;#8226;&quot;, HtmlCompat.FROM_HTML_MODE_LEGACY);","title":".java uses or overrides a deprecated API. Note: Recompile with -Xlint:deprecation for details","body":"<pre><code>Html.fromHtml(&quot;&amp;#8226;&quot;) //It is deprecated.\n</code></pre>\n<p>Refrance: <a href=\"https://developer.android.com/reference/android/text/Html#fromHtml(java.lang.String)\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/text/Html#fromHtml(java.lang.String)</a></p>\n<p>Solution:</p>\n<pre><code>HtmlCompat.fromHtml(&quot;&amp;#8226;&quot;, HtmlCompat.FROM_HTML_MODE_LEGACY);\n</code></pre>\n"}],"owner":{"account_id":11253358,"reputation":641,"user_id":8253888,"accept_rate":50,"display_name":"55SK55"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4461,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1633704428,"creation_date":1511341928,"question_id":47430694,"body_markdown":"I am new to Android. I started a new Project and implemented a Intro Navigation and App Drawer Screens. When I published &quot;APK&quot;, intro sliders are working fine and &quot;Side Bar Menu&quot; app drawer is not working and app crashes,.\r\n\r\nGradle console has a warning message:\r\n\r\n&gt; Note:\r\n&gt; E:\\AndroidApps\\GoTogether\\app\\src\\main\\java\\com\\softvision\\gotogether\\app\\WelcomeActivity.java\r\n&gt; uses or overrides a deprecated API. Note: Recompile with\r\n&gt; -Xlint:deprecation for details.\r\n\r\nHow to Recompile with -Xlint:deprecation in Android Studio?\r\n\r\nHere&#39;s my code:\r\n\r\n    package com.softvision.gotogether.app;\r\n    \r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.graphics.Color;\r\n    import android.os.Build;\r\n    import android.support.v4.view.PagerAdapter;\r\n    import android.support.v4.view.ViewPager;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.os.Bundle;\r\n    import android.text.Html;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.view.Window;\r\n    import android.view.WindowManager;\r\n    import android.widget.Button;\r\n    import android.widget.LinearLayout;\r\n    import android.widget.TextView;\r\n    \r\n    /**\r\n     * Created by Shreekumar S [shreekumar.s@softvision.com] on 20-11-2017.\r\n     */\r\n\r\n    public class WelcomeActivity extends AppCompatActivity {\r\n    \r\n        private PreferenceManager _preferences;\r\n        private ViewPager _viewPager;\r\n        private LinearLayout _linearDotsLayout;\r\n        private Button _btnSkip, _btnNext;\r\n        private int[] _slideLayouts;\r\n        private TextView[] _textViewDots;\r\n    \r\n        private WelcomeViewPagerAdapter _welcomeViewPagerAdapter;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n    \r\n            // Checking for first time launch - before calling setContentView()\r\n            _preferences = new PreferenceManager(this);\r\n            if (!_preferences.IsFirstTimeLaunch()) {\r\n                LaunchHomeScreen();\r\n                finish();\r\n            }\r\n    \r\n            // Making notification bar transparent\r\n            if (Build.VERSION.SDK_INT &gt;= 21) {\r\n                getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN);\r\n            }\r\n            setContentView(R.layout.activity_welcome);\r\n    \r\n            // get controls of Welcome screen\r\n            _viewPager = (ViewPager)findViewById(R.id.welcomeViewPager);\r\n            _linearDotsLayout = (LinearLayout) findViewById(R.id.welcomeLinearLayout);\r\n            _btnSkip = (Button) findViewById(R.id.btnSkip);\r\n            _btnNext = (Button) findViewById(R.id.btnNext);\r\n    \r\n            // layouts of all welcome sliders\r\n            // add few more layouts if you want\r\n            _slideLayouts = new int[]{\r\n                    R.layout.intro_slide_1,\r\n                    R.layout.intro_slide_2,\r\n                    R.layout.intro_slide_3,\r\n                    R.layout.intro_slide_4};\r\n    \r\n            // adding bottom dots\r\n            AddBottomDots(0);\r\n    \r\n            // making notification bar transparent\r\n            ChangeStatusBarColor();\r\n    \r\n            _welcomeViewPagerAdapter = new WelcomeViewPagerAdapter();\r\n            _viewPager.setAdapter(_welcomeViewPagerAdapter);\r\n            _viewPager.addOnPageChangeListener(onPageChangeListener);\r\n    \r\n            // On Skip button Click\r\n            _btnSkip.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    LaunchHomeScreen();\r\n                }\r\n            });\r\n    \r\n            // On Next button Click\r\n            _btnNext.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    // checking for last page\r\n                    // if last page home screen will be launched\r\n                    int current = GetItem(+1);\r\n                    if (current &lt; _slideLayouts.length) {\r\n                        // move to next screen\r\n                        _viewPager.setCurrentItem(current);\r\n                    } else {\r\n                        LaunchHomeScreen();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void LaunchHomeScreen() {\r\n            _preferences.SetFirstTimeLaunch(false);\r\n    \r\n            // Move from Welcome Activity to Main Activity\r\n            startActivity(new Intent(WelcomeActivity.this, MainActivity.class));\r\n    \r\n            finish();\r\n        }\r\n    \r\n        private void AddBottomDots(int currentPage) {\r\n            _textViewDots = new TextView[_slideLayouts.length];\r\n    \r\n            int[] colorsActive = getResources().getIntArray(R.array.array_dot_active);\r\n            int[] colorsInactive = getResources().getIntArray(R.array.array_dot_inactive);\r\n    \r\n            _linearDotsLayout.removeAllViews();\r\n            \r\n            for (int i = 0; i &lt; _textViewDots.length; i++) {\r\n                _textViewDots[i] = new TextView(this);\r\n                _textViewDots[i].setText(Html.fromHtml(&quot;&amp;#8226;&quot;));\r\n                _textViewDots[i].setTextSize(35);\r\n                _textViewDots[i].setTextColor(colorsInactive[currentPage]);\r\n                _linearDotsLayout.addView(_textViewDots[i]);\r\n            }\r\n    \r\n            if (_textViewDots.length &gt; 0)\r\n                _textViewDots[currentPage].setTextColor(colorsActive[currentPage]);\r\n        }\r\n    \r\n        // Making notification bar transparent\r\n        private void ChangeStatusBarColor() {\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\r\n                Window window = getWindow();\r\n                window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);\r\n                window.setStatusBarColor(Color.TRANSPARENT);\r\n            }\r\n        }\r\n    \r\n        private int GetItem(int i) {\r\n            return _viewPager.getCurrentItem() + i;\r\n        }\r\n    \r\n        // View pager adapter\r\n        public class WelcomeViewPagerAdapter extends PagerAdapter {\r\n            private LayoutInflater layoutInflater;\r\n    \r\n            public WelcomeViewPagerAdapter() {\r\n            }\r\n    \r\n            @Override\r\n            public Object instantiateItem(ViewGroup container, int position) {\r\n                layoutInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n    \r\n                View view = layoutInflater.inflate(_slideLayouts[position], container, false);\r\n                container.addView(view);\r\n    \r\n                return view;\r\n            }\r\n    \r\n            @Override\r\n            public int getCount() {\r\n                return _slideLayouts.length;\r\n            }\r\n    \r\n            @Override\r\n            public boolean isViewFromObject(View view, Object obj) {\r\n                return view == obj;\r\n            }\r\n    \r\n            @Override\r\n            public void destroyItem(ViewGroup container, int position, Object object) {\r\n                View view = (View) object;\r\n                container.removeView(view);\r\n            }\r\n        }\r\n    \r\n        //  ViewPager change listener\r\n        ViewPager.OnPageChangeListener onPageChangeListener = new ViewPager.OnPageChangeListener() {\r\n    \r\n            @Override\r\n            public void onPageSelected(int position) {\r\n                AddBottomDots(position);\r\n    \r\n                // changing the next button text &#39;NEXT&#39; / &#39;GOT IT&#39;\r\n                if (position == _slideLayouts.length - 1) {\r\n                    // last page. make button text to GOT IT\r\n                    _btnNext.setText(getString(R.string.start));\r\n                    _btnSkip.setVisibility(View.GONE);\r\n                } else {\r\n                    // still pages are left\r\n                    _btnNext.setText(getString(R.string.next));\r\n                    _btnSkip.setVisibility(View.VISIBLE);\r\n                }\r\n            }\r\n    \r\n            @Override\r\n            public void onPageScrolled(int arg0, float arg1, int arg2) {\r\n            }\r\n    \r\n            @Override\r\n            public void onPageScrollStateChanged(int arg0) {\r\n            }\r\n        };\r\n    }","title":".java uses or overrides a deprecated API. Note: Recompile with -Xlint:deprecation for details","body":"<p>I am new to Android. I started a new Project and implemented a Intro Navigation and App Drawer Screens. When I published \"APK\", intro sliders are working fine and \"Side Bar Menu\" app drawer is not working and app crashes,.</p>\n\n<p>Gradle console has a warning message:</p>\n\n<blockquote>\n  <p>Note:\n  E:\\AndroidApps\\GoTogether\\app\\src\\main\\java\\com\\softvision\\gotogether\\app\\WelcomeActivity.java\n  uses or overrides a deprecated API. Note: Recompile with\n  -Xlint:deprecation for details.</p>\n</blockquote>\n\n<p>How to Recompile with -Xlint:deprecation in Android Studio?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>package com.softvision.gotogether.app;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.graphics.Color;\nimport android.os.Build;\nimport android.support.v4.view.PagerAdapter;\nimport android.support.v4.view.ViewPager;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.text.Html;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.view.Window;\nimport android.view.WindowManager;\nimport android.widget.Button;\nimport android.widget.LinearLayout;\nimport android.widget.TextView;\n\n/**\n * Created by Shreekumar S [shreekumar.s@softvision.com] on 20-11-2017.\n */\n\npublic class WelcomeActivity extends AppCompatActivity {\n\n    private PreferenceManager _preferences;\n    private ViewPager _viewPager;\n    private LinearLayout _linearDotsLayout;\n    private Button _btnSkip, _btnNext;\n    private int[] _slideLayouts;\n    private TextView[] _textViewDots;\n\n    private WelcomeViewPagerAdapter _welcomeViewPagerAdapter;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        // Checking for first time launch - before calling setContentView()\n        _preferences = new PreferenceManager(this);\n        if (!_preferences.IsFirstTimeLaunch()) {\n            LaunchHomeScreen();\n            finish();\n        }\n\n        // Making notification bar transparent\n        if (Build.VERSION.SDK_INT &gt;= 21) {\n            getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN);\n        }\n        setContentView(R.layout.activity_welcome);\n\n        // get controls of Welcome screen\n        _viewPager = (ViewPager)findViewById(R.id.welcomeViewPager);\n        _linearDotsLayout = (LinearLayout) findViewById(R.id.welcomeLinearLayout);\n        _btnSkip = (Button) findViewById(R.id.btnSkip);\n        _btnNext = (Button) findViewById(R.id.btnNext);\n\n        // layouts of all welcome sliders\n        // add few more layouts if you want\n        _slideLayouts = new int[]{\n                R.layout.intro_slide_1,\n                R.layout.intro_slide_2,\n                R.layout.intro_slide_3,\n                R.layout.intro_slide_4};\n\n        // adding bottom dots\n        AddBottomDots(0);\n\n        // making notification bar transparent\n        ChangeStatusBarColor();\n\n        _welcomeViewPagerAdapter = new WelcomeViewPagerAdapter();\n        _viewPager.setAdapter(_welcomeViewPagerAdapter);\n        _viewPager.addOnPageChangeListener(onPageChangeListener);\n\n        // On Skip button Click\n        _btnSkip.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                LaunchHomeScreen();\n            }\n        });\n\n        // On Next button Click\n        _btnNext.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                // checking for last page\n                // if last page home screen will be launched\n                int current = GetItem(+1);\n                if (current &lt; _slideLayouts.length) {\n                    // move to next screen\n                    _viewPager.setCurrentItem(current);\n                } else {\n                    LaunchHomeScreen();\n                }\n            }\n        });\n    }\n\n    private void LaunchHomeScreen() {\n        _preferences.SetFirstTimeLaunch(false);\n\n        // Move from Welcome Activity to Main Activity\n        startActivity(new Intent(WelcomeActivity.this, MainActivity.class));\n\n        finish();\n    }\n\n    private void AddBottomDots(int currentPage) {\n        _textViewDots = new TextView[_slideLayouts.length];\n\n        int[] colorsActive = getResources().getIntArray(R.array.array_dot_active);\n        int[] colorsInactive = getResources().getIntArray(R.array.array_dot_inactive);\n\n        _linearDotsLayout.removeAllViews();\n\n        for (int i = 0; i &lt; _textViewDots.length; i++) {\n            _textViewDots[i] = new TextView(this);\n            _textViewDots[i].setText(Html.fromHtml(\"&amp;#8226;\"));\n            _textViewDots[i].setTextSize(35);\n            _textViewDots[i].setTextColor(colorsInactive[currentPage]);\n            _linearDotsLayout.addView(_textViewDots[i]);\n        }\n\n        if (_textViewDots.length &gt; 0)\n            _textViewDots[currentPage].setTextColor(colorsActive[currentPage]);\n    }\n\n    // Making notification bar transparent\n    private void ChangeStatusBarColor() {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n            Window window = getWindow();\n            window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);\n            window.setStatusBarColor(Color.TRANSPARENT);\n        }\n    }\n\n    private int GetItem(int i) {\n        return _viewPager.getCurrentItem() + i;\n    }\n\n    // View pager adapter\n    public class WelcomeViewPagerAdapter extends PagerAdapter {\n        private LayoutInflater layoutInflater;\n\n        public WelcomeViewPagerAdapter() {\n        }\n\n        @Override\n        public Object instantiateItem(ViewGroup container, int position) {\n            layoutInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n\n            View view = layoutInflater.inflate(_slideLayouts[position], container, false);\n            container.addView(view);\n\n            return view;\n        }\n\n        @Override\n        public int getCount() {\n            return _slideLayouts.length;\n        }\n\n        @Override\n        public boolean isViewFromObject(View view, Object obj) {\n            return view == obj;\n        }\n\n        @Override\n        public void destroyItem(ViewGroup container, int position, Object object) {\n            View view = (View) object;\n            container.removeView(view);\n        }\n    }\n\n    //  ViewPager change listener\n    ViewPager.OnPageChangeListener onPageChangeListener = new ViewPager.OnPageChangeListener() {\n\n        @Override\n        public void onPageSelected(int position) {\n            AddBottomDots(position);\n\n            // changing the next button text 'NEXT' / 'GOT IT'\n            if (position == _slideLayouts.length - 1) {\n                // last page. make button text to GOT IT\n                _btnNext.setText(getString(R.string.start));\n                _btnSkip.setVisibility(View.GONE);\n            } else {\n                // still pages are left\n                _btnNext.setText(getString(R.string.next));\n                _btnSkip.setVisibility(View.VISIBLE);\n            }\n        }\n\n        @Override\n        public void onPageScrolled(int arg0, float arg1, int arg2) {\n        }\n\n        @Override\n        public void onPageScrollStateChanged(int arg0) {\n        }\n    };\n}\n</code></pre>\n"},{"tags":["java","hadoop","hbase"],"answers":[{"tags":[],"owner":{"account_id":320466,"reputation":8954,"user_id":638764,"display_name":"mazaneicha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633703622,"creation_date":1633703622,"answer_id":69497569,"question_id":69495515,"body_markdown":"This info is available from [`RegionMetrics.getStoreFileSize()`][1], along with all other region stats in `RegionMetrics`.&lt;br&gt;\r\nYou can go through a long chain of calls like this to get there:\r\n`Connection` &gt; `getAdmin()` &gt; `getClusterMetrics()` &gt; `getLiveServerMetrics()` &gt; `getRegionMetrics()`. \r\n\r\n\r\n  [1]: https://hbase.apache.org/2.1/apidocs/org/apache/hadoop/hbase/RegionMetrics.html#getStoreFileSize--","title":"How to check region size in hbase via java code","body":"<p>This info is available from <a href=\"https://hbase.apache.org/2.1/apidocs/org/apache/hadoop/hbase/RegionMetrics.html#getStoreFileSize--\" rel=\"nofollow noreferrer\"><code>RegionMetrics.getStoreFileSize()</code></a>, along with all other region stats in <code>RegionMetrics</code>.<br>\nYou can go through a long chain of calls like this to get there:\n<code>Connection</code> &gt; <code>getAdmin()</code> &gt; <code>getClusterMetrics()</code> &gt; <code>getLiveServerMetrics()</code> &gt; <code>getRegionMetrics()</code>.</p>\n"}],"owner":{"account_id":1082351,"reputation":79,"user_id":1078988,"accept_rate":78,"display_name":"smitz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":242,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1633703742,"creation_date":1633694466,"question_id":69495515,"body_markdown":"My HBase table is split into 10 different regions. I want to check via Java code if a region contains any data, or what is the size of each region.\r\n\r\nI see `HRegionLocation`, `HRegionInfo` doesn&#39;t have such direct function to get the size of a region.\r\n\r\nHas anyone come across such requirement?\r\n ","title":"How to check region size in hbase via java code","body":"<p>My HBase table is split into 10 different regions. I want to check via Java code if a region contains any data, or what is the size of each region.</p>\n<p>I see <code>HRegionLocation</code>, <code>HRegionInfo</code> doesn't have such direct function to get the size of a region.</p>\n<p>Has anyone come across such requirement?</p>\n"},{"tags":["java","spring-boot","stackdriver","spring-cloud-sleuth","spring-cloud-gcp"],"answers":[{"tags":[],"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1534095189,"creation_date":1534095189,"answer_id":51811243,"question_id":51809171,"body_markdown":"I actually found the answer by looking at the [source](https://github.com/spring-cloud/spring-cloud-gcp/blob/master/spring-cloud-gcp-autoconfigure/src/main/java/org/springframework/cloud/gcp/autoconfigure/trace/StackdriverTraceAutoConfiguration.java) for the [StackdriverTraceAutoConfiguration](https://docs.spring.io/spring-cloud-gcp/docs/1.0.0.RELEASE/api/org/springframework/cloud/gcp/autoconfigure/trace/StackdriverTraceAutoConfiguration.html) class. The way to solve it if using GCP is to set `spring.cloud.gcp.trace.enabled=false`. This disables tracing for all integration points.","title":"Disable Spring Cloud Sleuth when running Integration Tests?","body":"<p>I actually found the answer by looking at the <a href=\"https://github.com/spring-cloud/spring-cloud-gcp/blob/master/spring-cloud-gcp-autoconfigure/src/main/java/org/springframework/cloud/gcp/autoconfigure/trace/StackdriverTraceAutoConfiguration.java\" rel=\"nofollow noreferrer\">source</a> for the <a href=\"https://docs.spring.io/spring-cloud-gcp/docs/1.0.0.RELEASE/api/org/springframework/cloud/gcp/autoconfigure/trace/StackdriverTraceAutoConfiguration.html\" rel=\"nofollow noreferrer\">StackdriverTraceAutoConfiguration</a> class. The way to solve it if using GCP is to set <code>spring.cloud.gcp.trace.enabled=false</code>. This disables tracing for all integration points.</p>\n"},{"tags":[],"owner":{"account_id":5227218,"reputation":229,"user_id":4178889,"display_name":"Elie Nehm&#233;"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578856299,"creation_date":1578856299,"answer_id":59707247,"question_id":51809171,"body_markdown":"You can disable tracing, logging and set a fake project id as follow:\r\n\r\n```\r\nspring.cloud.gcp.project-id=fake-project-id\r\nspring.cloud.gcp.logging.enabled=false\r\nspring.cloud.gcp.trace.enabled=false\r\n```\r\n","title":"Disable Spring Cloud Sleuth when running Integration Tests?","body":"<p>You can disable tracing, logging and set a fake project id as follow:</p>\n\n<pre><code>spring.cloud.gcp.project-id=fake-project-id\nspring.cloud.gcp.logging.enabled=false\nspring.cloud.gcp.trace.enabled=false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1589916,"reputation":2586,"user_id":1473481,"accept_rate":100,"display_name":"etech"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1633703640,"creation_date":1633703640,"answer_id":69497573,"question_id":51809171,"body_markdown":"**HowTo: Disable all tests for a Webflux Sleuth implementation with Zipkin**\r\n\r\nIf, you have these dependencies:\r\n\r\n    implementation &#39;org.springframework.cloud:spring-cloud-starter-sleuth&#39;\r\n    implementation &#39;org.springframework.cloud:spring-cloud-sleuth-zipkin&#39;\r\n\r\nThen, fully disable Sleuth/Zipkin for your integration tests by adding an application.yml to your test/resources folder with:\r\n\r\n    spring:\r\n      sleuth: # All sleuth features disabled for integration tests\r\n        enabled: false\r\n        reactor:\r\n          enabled: false\r\n        web:\r\n          enabled: false\r\n        async:\r\n          enabled: false\r\n          client:\r\n            template:\r\n              enabled: false\r\n      zipkin: # All zipkin features disabled for integration tests\r\n        enabled: false","title":"Disable Spring Cloud Sleuth when running Integration Tests?","body":"<p><strong>HowTo: Disable all tests for a Webflux Sleuth implementation with Zipkin</strong></p>\n<p>If, you have these dependencies:</p>\n<pre><code>implementation 'org.springframework.cloud:spring-cloud-starter-sleuth'\nimplementation 'org.springframework.cloud:spring-cloud-sleuth-zipkin'\n</code></pre>\n<p>Then, fully disable Sleuth/Zipkin for your integration tests by adding an application.yml to your test/resources folder with:</p>\n<pre><code>spring:\n  sleuth: # All sleuth features disabled for integration tests\n    enabled: false\n    reactor:\n      enabled: false\n    web:\n      enabled: false\n    async:\n      enabled: false\n      client:\n        template:\n          enabled: false\n  zipkin: # All zipkin features disabled for integration tests\n    enabled: false\n</code></pre>\n"}],"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7527,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":51811243,"answer_count":3,"score":2,"last_activity_date":1633703640,"creation_date":1534079766,"question_id":51809171,"body_markdown":"When using `org.springframework.cloud:spring-cloud-gcp-starter-trace:1.0.0.RELEASE` and running my integration tests locally I get this error message:\r\n\r\n&gt; org.springframework.beans.factory.BeanCreationException: Error\r\n&gt; creating bean with name &#39;stackdriverSender&#39; defined in class path\r\n&gt; resource\r\n&gt; [org/springframework/cloud/gcp/autoconfigure/trace/StackdriverTraceAutoConfiguration.class]:\r\n&gt; Bean instantiation via factory method failed; nested exception is\r\n&gt; org.springframework.beans.BeanInstantiationException: Failed to\r\n&gt; instantiate [zipkin2.reporter.Sender]: Factory method\r\n&gt; &#39;stackdriverSender&#39; threw exception; nested exception is\r\n&gt; java.io.IOException: The Application Default Credentials are not\r\n&gt; available. They are available if running in Google Compute Engine.\r\n&gt; Otherwise, the environment variable GOOGLE_APPLICATION_CREDENTIALS\r\n&gt; must be defined pointing to a file defining the credentials. See\r\n&gt; https://developers.google.com/accounts/docs/application-default-credentials\r\n&gt; for more information.\r\n\r\nThis is totally understandable since this environment variable is not present locally and I don&#39;t want to use Sleuth/Stackdriver tracing when running the tests. I&#39;ve looked in the [reference documentation][1] but I can only seem to find information on how to disable Sleuth for specific integration points such as RxJava, RestTemplate etc. But how can I disable Sleuth entirely? \r\n\r\nI&#39;ve tried setting `spring.sleuth.enabled=false` but this doesn&#39;t seem to make any difference.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-cloud-gcp/docs/1.0.0.RELEASE/reference/htmlsingle","title":"Disable Spring Cloud Sleuth when running Integration Tests?","body":"<p>When using <code>org.springframework.cloud:spring-cloud-gcp-starter-trace:1.0.0.RELEASE</code> and running my integration tests locally I get this error message:</p>\n\n<blockquote>\n  <p>org.springframework.beans.factory.BeanCreationException: Error\n  creating bean with name 'stackdriverSender' defined in class path\n  resource\n  [org/springframework/cloud/gcp/autoconfigure/trace/StackdriverTraceAutoConfiguration.class]:\n  Bean instantiation via factory method failed; nested exception is\n  org.springframework.beans.BeanInstantiationException: Failed to\n  instantiate [zipkin2.reporter.Sender]: Factory method\n  'stackdriverSender' threw exception; nested exception is\n  java.io.IOException: The Application Default Credentials are not\n  available. They are available if running in Google Compute Engine.\n  Otherwise, the environment variable GOOGLE_APPLICATION_CREDENTIALS\n  must be defined pointing to a file defining the credentials. See\n  <a href=\"https://developers.google.com/accounts/docs/application-default-credentials\" rel=\"nofollow noreferrer\">https://developers.google.com/accounts/docs/application-default-credentials</a>\n  for more information.</p>\n</blockquote>\n\n<p>This is totally understandable since this environment variable is not present locally and I don't want to use Sleuth/Stackdriver tracing when running the tests. I've looked in the <a href=\"https://docs.spring.io/spring-cloud-gcp/docs/1.0.0.RELEASE/reference/htmlsingle\" rel=\"nofollow noreferrer\">reference documentation</a> but I can only seem to find information on how to disable Sleuth for specific integration points such as RxJava, RestTemplate etc. But how can I disable Sleuth entirely? </p>\n\n<p>I've tried setting <code>spring.sleuth.enabled=false</code> but this doesn't seem to make any difference.</p>\n"},{"tags":["java","firebase-realtime-database","google-cloud-platform","google-cloud-firestore","protobuf-java"],"comments":[{"owner":{"account_id":7548443,"reputation":361,"user_id":5730724,"accept_rate":50,"display_name":"Dmitriy S"},"score":0,"creation_date":1568644810,"post_id":57954994,"comment_id":102330207,"body_markdown":"Try to add: &lt;dependency&gt;\n    &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\n    &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\n    &lt;version&gt;3.4.0&lt;/version&gt;\n&lt;/dependency&gt;","body":"Try to add: &lt;dependency&gt;     &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;     &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;     &lt;version&gt;3.4.0&lt;/version&gt; &lt;/dependency&gt;"},{"owner":{"account_id":948320,"reputation":5144,"user_id":975074,"accept_rate":40,"display_name":"suztomo"},"score":1,"creation_date":1568923152,"post_id":57954994,"comment_id":102439921,"body_markdown":"I checked your dependencies with `mvn dependency:copy-dependencies` and found `com.google.protobuf.GeneratedMessageV3` is included in protobuf-java-3.9.1.jar. Strange. Would you create a dummy GitHub project to reproduce the error?","body":"I checked your dependencies with <code>mvn dependency:copy-dependencies</code> and found <code>com.google.protobuf.GeneratedMessageV3</code> is included in protobuf-java-3.9.1.jar. Strange. Would you create a dummy GitHub project to reproduce the error?"}],"owner":{"account_id":709982,"reputation":852,"user_id":622644,"accept_rate":55,"display_name":"priya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3934,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1633703385,"creation_date":1568629948,"question_id":57954994,"body_markdown":"I am using firestore in my application and On the call of method\r\n\r\n     Firestore firstoreDB = FirestoreClient.getFirestore(FirebaseApp.getInstance(env)); \r\ngetting exception : \r\n\r\n    at java.lang.ClassLoader.defineClass1(Native Method)\r\n    \tat java.lang.ClassLoader.defineClass(Unknown Source)\r\n    \tat java.security.SecureClassLoader.defineClass(Unknown Source)\r\n    \tat java.net.URLClassLoader.defineClass(Unknown Source)\r\n    \tat java.net.URLClassLoader.access$100(Unknown Source)\r\n    \tat java.net.URLClassLoader$1.run(Unknown Source)\r\n    \tat java.net.URLClassLoader$1.run(Unknown Source)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.net.URLClassLoader.findClass(Unknown Source)\r\n    \tat java.lang.ClassLoader.loadClass(Unknown Source)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\r\n    \tat java.lang.ClassLoader.loadClass(Unknown Source)\r\n    \tat com.google.cloud.firestore.v1beta1.stub.GrpcFirestoreStub.&lt;clinit&gt;(GrpcFirestoreStub.java:73)\r\n    \tat com.google.cloud.firestore.spi.v1beta1.GrpcFirestoreRpc.&lt;init&gt;(GrpcFirestoreRpc.java:133)\r\n    \tat com.google.cloud.firestore.FirestoreOptions$DefaultFirestoreRpcFactory.create(FirestoreOptions.java:80)\r\n    \tat com.google.cloud.firestore.FirestoreOptions$DefaultFirestoreRpcFactory.create(FirestoreOptions.java:72)\r\n    \tat com.google.cloud.ServiceOptions.getRpc(ServiceOptions.java:512)\r\n    \tat com.google.cloud.firestore.FirestoreOptions.getFirestoreRpc(FirestoreOptions.java:315)\r\n    \tat com.google.cloud.firestore.FirestoreImpl.&lt;init&gt;(FirestoreImpl.java:76)\r\n    \tat com.google.cloud.firestore.FirestoreOptions$DefaultFirestoreFactory.create(FirestoreOptions.java:63)\r\n    \tat com.google.cloud.firestore.FirestoreOptions$DefaultFirestoreFactory.create(FirestoreOptions.java:56)\r\n    \tat com.google.cloud.ServiceOptions.getService(ServiceOptions.java:499)\r\n    \tat com.google.firebase.cloud.FirestoreClient.&lt;init&gt;(FirestoreClient.java:47)\r\n    \tat com.google.firebase.cloud.FirestoreClient.&lt;init&gt;(FirestoreClient.java:27)\r\n    \tat com.google.firebase.cloud.FirestoreClient$FirestoreClientService.&lt;init&gt;(FirestoreClient.java:87)\r\n    \tat com.google.firebase.cloud.FirestoreClient.getInstance(FirestoreClient.java:77)\r\n    \tat com.google.firebase.cloud.FirestoreClient.getFirestore(FirestoreClient.java:70)\r\n    \tat com.mmt.app.firebase.ConnectToAgent.sendMessage(ConnectToAgent.java:94)\r\n    \tat com.mmt.app.firebase.TestFB.connectToAgent(TestFB.java:37)\r\n    \tat com.mmt.app.firebase.TestFB.main(TestFB.java:19)\r\n    Caused by: java.lang.ClassNotFoundException: com.google.protobuf.GeneratedMessageV3\r\n    \tat java.net.URLClassLoader.findClass(Unknown Source)\r\n\r\nI know is dependency mismatch and gave tried every permutation of firebase admin and firestore + guava version but no luck .\r\n\r\nMy current POM is : \r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.google.firebase&lt;/groupId&gt;\r\n    &lt;artifactId&gt;firebase-admin&lt;/artifactId&gt;\r\n    &lt;version&gt;6.9.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n    &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n    &lt;version&gt;24.1.1-jre&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n    &lt;artifactId&gt;google-cloud-firestore&lt;/artifactId&gt;\r\n    &lt;version&gt;1.20.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Firestore client throws dependency mismatch even when it&#39;s imported","body":"<p>I am using firestore in my application and On the call of method</p>\n\n<pre><code> Firestore firstoreDB = FirestoreClient.getFirestore(FirebaseApp.getInstance(env)); \n</code></pre>\n\n<p>getting exception : </p>\n\n<pre><code>at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(Unknown Source)\n    at java.security.SecureClassLoader.defineClass(Unknown Source)\n    at java.net.URLClassLoader.defineClass(Unknown Source)\n    at java.net.URLClassLoader.access$100(Unknown Source)\n    at java.net.URLClassLoader$1.run(Unknown Source)\n    at java.net.URLClassLoader$1.run(Unknown Source)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    at com.google.cloud.firestore.v1beta1.stub.GrpcFirestoreStub.&lt;clinit&gt;(GrpcFirestoreStub.java:73)\n    at com.google.cloud.firestore.spi.v1beta1.GrpcFirestoreRpc.&lt;init&gt;(GrpcFirestoreRpc.java:133)\n    at com.google.cloud.firestore.FirestoreOptions$DefaultFirestoreRpcFactory.create(FirestoreOptions.java:80)\n    at com.google.cloud.firestore.FirestoreOptions$DefaultFirestoreRpcFactory.create(FirestoreOptions.java:72)\n    at com.google.cloud.ServiceOptions.getRpc(ServiceOptions.java:512)\n    at com.google.cloud.firestore.FirestoreOptions.getFirestoreRpc(FirestoreOptions.java:315)\n    at com.google.cloud.firestore.FirestoreImpl.&lt;init&gt;(FirestoreImpl.java:76)\n    at com.google.cloud.firestore.FirestoreOptions$DefaultFirestoreFactory.create(FirestoreOptions.java:63)\n    at com.google.cloud.firestore.FirestoreOptions$DefaultFirestoreFactory.create(FirestoreOptions.java:56)\n    at com.google.cloud.ServiceOptions.getService(ServiceOptions.java:499)\n    at com.google.firebase.cloud.FirestoreClient.&lt;init&gt;(FirestoreClient.java:47)\n    at com.google.firebase.cloud.FirestoreClient.&lt;init&gt;(FirestoreClient.java:27)\n    at com.google.firebase.cloud.FirestoreClient$FirestoreClientService.&lt;init&gt;(FirestoreClient.java:87)\n    at com.google.firebase.cloud.FirestoreClient.getInstance(FirestoreClient.java:77)\n    at com.google.firebase.cloud.FirestoreClient.getFirestore(FirestoreClient.java:70)\n    at com.mmt.app.firebase.ConnectToAgent.sendMessage(ConnectToAgent.java:94)\n    at com.mmt.app.firebase.TestFB.connectToAgent(TestFB.java:37)\n    at com.mmt.app.firebase.TestFB.main(TestFB.java:19)\nCaused by: java.lang.ClassNotFoundException: com.google.protobuf.GeneratedMessageV3\n    at java.net.URLClassLoader.findClass(Unknown Source)\n</code></pre>\n\n<p>I know is dependency mismatch and gave tried every permutation of firebase admin and firestore + guava version but no luck .</p>\n\n<p>My current POM is : </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.firebase&lt;/groupId&gt;\n    &lt;artifactId&gt;firebase-admin&lt;/artifactId&gt;\n    &lt;version&gt;6.9.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n    &lt;artifactId&gt;guava&lt;/artifactId&gt;\n    &lt;version&gt;24.1.1-jre&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;google-cloud-firestore&lt;/artifactId&gt;\n    &lt;version&gt;1.20.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","parameters","overloading","overriding"],"comments":[{"owner":{"account_id":2200754,"reputation":2067,"user_id":1945220,"accept_rate":93,"display_name":"Unknown"},"score":0,"creation_date":1468263110,"post_id":38313980,"comment_id":64044704,"body_markdown":"First of all your syntax is wrong. Secondly Class can extends Another class and not the interface and Class actually implement the interface.","body":"First of all your syntax is wrong. Secondly Class can extends Another class and not the interface and Class actually implement the interface."},{"owner":{"account_id":5240280,"reputation":3071,"user_id":4518455,"accept_rate":72,"display_name":"L1ghtk3ira"},"score":0,"creation_date":1468263257,"post_id":38313980,"comment_id":64044786,"body_markdown":"It is just a general similarity to my project.","body":"It is just a general similarity to my project."},{"owner":{"account_id":6148867,"reputation":4677,"user_id":4793951,"display_name":"Zircon"},"score":1,"creation_date":1468263664,"post_id":38313980,"comment_id":64044991,"body_markdown":"This is technically impossible, as `checkThis(Document, String)` does not and cannot override `checkThis()`. However, if you tell us what you&#39;re trying to accomplish with this, we might be able to figure out a workaround.","body":"This is technically impossible, as <code>checkThis(Document, String)</code> does not and cannot override <code>checkThis()</code>. However, if you tell us what you&#39;re trying to accomplish with this, we might be able to figure out a workaround."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1468264008,"post_id":38313980,"comment_id":64045170,"body_markdown":"as @Zircon mentioned, it is not possible to &quot;override&quot; a method when changing the parameters (since they are part of the method&#39;s signature; note that in the Java language the return value is not part of the signature, in the JVM, however, it is). This smells like an [XY-problem](http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem), so please describe what you want to achieve rather than showing your approach.","body":"as @Zircon mentioned, it is not possible to &quot;override&quot; a method when changing the parameters (since they are part of the method&#39;s signature; note that in the Java language the return value is not part of the signature, in the JVM, however, it is). This smells like an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY-problem</a>, so please describe what you want to achieve rather than showing your approach."}],"answers":[{"tags":[],"owner":{"account_id":4087237,"reputation":71,"user_id":3356238,"display_name":"Renan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468263264,"creation_date":1468263264,"answer_id":38314177,"question_id":38313980,"body_markdown":"In this case you don&#39;t need any interface, it&#39;s not possible to do what you want, you need to understand the concept of interfaces before use it.\r\n\r\nhttps://docs.oracle.com/javase/tutorial/java/concepts/interface.html","title":"Java create method in Interface and change the parameter type","body":"<p>In this case you don't need any interface, it's not possible to do what you want, you need to understand the concept of interfaces before use it.</p>\n\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/concepts/interface.html\" rel=\"nofollow\">https://docs.oracle.com/javase/tutorial/java/concepts/interface.html</a></p>\n"},{"tags":[],"owner":{"account_id":5240280,"reputation":3071,"user_id":4518455,"accept_rate":72,"display_name":"L1ghtk3ira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468268263,"creation_date":1468267850,"answer_id":38315396,"question_id":38313980,"body_markdown":"The implementation I was looking for turned out to not exist however there is a better way to be able to do what I was looking for using Input and Output.\r\n\r\n    public interface MyInterface&lt;Input, Output&gt; {\r\n       void checkThis(Input input, Output output) throws Exception;\r\n\r\n       Output Show(Input input, String url) throws Exception;\r\n    }\r\n\r\n    public class HeadLevel extends MyInterface&lt;HtmlPage,String&gt;{\r\n       Output scrape(HtmlPage page, String url) throws Exception;\r\n    }\r\n\r\n    public class MyClass implements HeadLevel&lt;Output&gt;{\r\n       @Override \r\n       public void checkThis(Document page, String url){\r\n\r\n       }\r\n    }\r\n\r\nIt seems the answer was actually under my nose. I misunderstood what Input/Output types are and how you can use them. Input and Output can be of any time that you expect to come in or go out of an application sort of speak.\r\n\r\n&gt; Input is any information that is needed by your program to complete\r\n&gt; its execution.There are many forms that program input may take\r\n\r\nInput can take the form of many different types such as HtmlPage, Document, and String. Using input you can Override your method and have your desired types.\r\n\r\nYou can read more about Input and Output [here][1]\r\n\r\n\r\n  [1]: http://pages.cs.wisc.edu/~cs368-1/JavaTutorial/NOTES/JavaIO_Scanner.html","title":"Java create method in Interface and change the parameter type","body":"<p>The implementation I was looking for turned out to not exist however there is a better way to be able to do what I was looking for using Input and Output.</p>\n\n<pre><code>public interface MyInterface&lt;Input, Output&gt; {\n   void checkThis(Input input, Output output) throws Exception;\n\n   Output Show(Input input, String url) throws Exception;\n}\n\npublic class HeadLevel extends MyInterface&lt;HtmlPage,String&gt;{\n   Output scrape(HtmlPage page, String url) throws Exception;\n}\n\npublic class MyClass implements HeadLevel&lt;Output&gt;{\n   @Override \n   public void checkThis(Document page, String url){\n\n   }\n}\n</code></pre>\n\n<p>It seems the answer was actually under my nose. I misunderstood what Input/Output types are and how you can use them. Input and Output can be of any time that you expect to come in or go out of an application sort of speak.</p>\n\n<blockquote>\n  <p>Input is any information that is needed by your program to complete\n  its execution.There are many forms that program input may take</p>\n</blockquote>\n\n<p>Input can take the form of many different types such as HtmlPage, Document, and String. Using input you can Override your method and have your desired types.</p>\n\n<p>You can read more about Input and Output <a href=\"http://pages.cs.wisc.edu/~cs368-1/JavaTutorial/NOTES/JavaIO_Scanner.html\" rel=\"nofollow\">here</a></p>\n"},{"tags":[],"owner":{"account_id":2407356,"reputation":1444,"user_id":2103431,"display_name":"Konstantin Grigorov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1633703187,"creation_date":1633703187,"answer_id":69497479,"question_id":38313980,"body_markdown":"It feels that you are trying to force the code to solve a problem that you don&#39;t understand clearly. I like to step back and think about the connections between components and improve my design in such situations.\r\n\r\nMaybe think along the lines that an HtmlPage is a Document. So, if you\r\nextend an HtmlPage with a Document (`public class HtmlPage extends Document`). When an Interface method accepts Document, it will take HtmlPage. Assuming that you have control over the relationship between Document and HtmlPage, in other words, you are not using a third-party library. Once that is done, a method won&#39;t need to operate on two unrelated concepts.\r\n\r\nI&#39; am not clear about the definition of your problem, better naming might have helped, either way, a potential solution might look like this:\r\n\r\n    interface MyInterface{\r\n    \t&lt;K extends Document&gt; void checkThis(K htmlPage) throws Exception;\r\n    \r\n    \tOutput Show(Input input, String url) throws Exception;\r\n    }\r\n    \r\n    class HeadLevel implements MyInterface{\r\n    \tpublic &lt;K extends Document&gt; void checkThis(K htmlPage) throws Exception\r\n    \t{\r\n    \t\t// Do something\r\n    \t}\r\n    \r\n    \tpublic Output Show(Input input, String url) throws Exception{\r\n    \t\treturn new Output();\r\n    \t}\r\n    \r\n    \tpublic &lt;K extends Document&gt; Output scrape(K htmlPage, String url) throws Exception\r\n    \t{\r\n    \t\treturn new Output();\r\n    \t}\r\n    }\r\n    \r\n    class MyClass extends HeadLevel{\r\n    \r\n    \tpublic MyClass() throws Exception\r\n    \t{\r\n    \t\tcheckThis(new HtmlPage());\r\n    \t\tcheckThis(new Document());\r\n    \t}\r\n    \r\n    \tpublic &lt;K extends Document&gt; void checkThis(K htmlPage) throws Exception\r\n    \t{\r\n    \t\tsuper.checkThis(htmlPage);\r\n    \t}\r\n    }\r\n    \r\n    class Document{\r\n    \r\n    }\r\n    \r\n    class HtmlPage extends Document\r\n    {\r\n    \r\n    }\r\n\r\nhttps://docs.oracle.com/javase/tutorial/java/generics/types.html","title":"Java create method in Interface and change the parameter type","body":"<p>It feels that you are trying to force the code to solve a problem that you don't understand clearly. I like to step back and think about the connections between components and improve my design in such situations.</p>\n<p>Maybe think along the lines that an HtmlPage is a Document. So, if you\nextend an HtmlPage with a Document (<code>public class HtmlPage extends Document</code>). When an Interface method accepts Document, it will take HtmlPage. Assuming that you have control over the relationship between Document and HtmlPage, in other words, you are not using a third-party library. Once that is done, a method won't need to operate on two unrelated concepts.</p>\n<p>I' am not clear about the definition of your problem, better naming might have helped, either way, a potential solution might look like this:</p>\n<pre><code>interface MyInterface{\n    &lt;K extends Document&gt; void checkThis(K htmlPage) throws Exception;\n\n    Output Show(Input input, String url) throws Exception;\n}\n\nclass HeadLevel implements MyInterface{\n    public &lt;K extends Document&gt; void checkThis(K htmlPage) throws Exception\n    {\n        // Do something\n    }\n\n    public Output Show(Input input, String url) throws Exception{\n        return new Output();\n    }\n\n    public &lt;K extends Document&gt; Output scrape(K htmlPage, String url) throws Exception\n    {\n        return new Output();\n    }\n}\n\nclass MyClass extends HeadLevel{\n\n    public MyClass() throws Exception\n    {\n        checkThis(new HtmlPage());\n        checkThis(new Document());\n    }\n\n    public &lt;K extends Document&gt; void checkThis(K htmlPage) throws Exception\n    {\n        super.checkThis(htmlPage);\n    }\n}\n\nclass Document{\n\n}\n\nclass HtmlPage extends Document\n{\n\n}\n</code></pre>\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/generics/types.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/generics/types.html</a></p>\n"}],"owner":{"account_id":5240280,"reputation":3071,"user_id":4518455,"accept_rate":72,"display_name":"L1ghtk3ira"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2719,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69497479,"answer_count":3,"score":0,"last_activity_date":1633703187,"creation_date":1468262525,"question_id":38313980,"body_markdown":"How do I create an interface that when Overridden can have different types? Sometimes I would like the method to accept an item of type &#39;HtmlPage&#39; and other times I would like it to take the type &#39;Document&#39;. Later these could change to even more types.\r\n\r\n**Example:**\r\n\r\n    public interface MyInterface{\r\n       void checkThis() throws Exception;\r\n  \r\n       Output Show(Input input, String url) throws Exception;\r\n    }\r\n\r\n    public class HeadLevel extends MyInterface&lt;HtmlPage,String&gt;{\r\n       Output scrape(HtmlPage page, String url) throws Exception;\r\n    }\r\n\r\n    public class MyClass implements HeadLevel&lt;Output&gt;{\r\n       @Override \r\n       public void checkThis(Document page, String url){\r\n\r\n       }\r\n    }\r\n\r\nI am thinking something like this should be achievable. I have tried looking around using keywords &#39;Overload&#39; and &#39;Override&#39; in my searches but cannot find something that can work like this. As you can see &#39;MyClass&#39; has Overridden the method and has defined the parameters being used.\r\n","title":"Java create method in Interface and change the parameter type","body":"<p>How do I create an interface that when Overridden can have different types? Sometimes I would like the method to accept an item of type 'HtmlPage' and other times I would like it to take the type 'Document'. Later these could change to even more types.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>public interface MyInterface{\n   void checkThis() throws Exception;\n\n   Output Show(Input input, String url) throws Exception;\n}\n\npublic class HeadLevel extends MyInterface&lt;HtmlPage,String&gt;{\n   Output scrape(HtmlPage page, String url) throws Exception;\n}\n\npublic class MyClass implements HeadLevel&lt;Output&gt;{\n   @Override \n   public void checkThis(Document page, String url){\n\n   }\n}\n</code></pre>\n\n<p>I am thinking something like this should be achievable. I have tried looking around using keywords 'Overload' and 'Override' in my searches but cannot find something that can work like this. As you can see 'MyClass' has Overridden the method and has defined the parameters being used.</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":8646314,"reputation":2159,"user_id":6473398,"display_name":"sfiss"},"score":1,"creation_date":1562675265,"post_id":56952524,"comment_id":100443560,"body_markdown":"As a side note (irrelevant to your question), there are easier ways to put a value into the list if absent using the newer methods `Map.computeIfAbsent` etc. (https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#computeIfAbsent-K-java.util.function.Function-)","body":"As a side note (irrelevant to your question), there are easier ways to put a value into the list if absent using the newer methods <code>Map.computeIfAbsent</code> etc. (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#computeIfAbsent-K-java.util.function.Function-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/&hellip;</a>)"},{"owner":{"account_id":5877752,"reputation":1515,"user_id":4628136,"accept_rate":56,"display_name":"krakig"},"score":0,"creation_date":1562675411,"post_id":56952524,"comment_id":100443666,"body_markdown":"True ! But that&#39;s an old code that I just took from a java 6 app!","body":"True ! But that&#39;s an old code that I just took from a java 6 app!"},{"owner":{"account_id":8646314,"reputation":2159,"user_id":6473398,"display_name":"sfiss"},"score":1,"creation_date":1562675738,"post_id":56952524,"comment_id":100443880,"body_markdown":"Since every item eventually ends up as two keys, `toMap` and `groupingBy` won&#39;t work. I assume writing your own collector is the best way to go. Alternatively, duplicating every item with the firstname/lastname as key (as in Samuels answer) works too.","body":"Since every item eventually ends up as two keys, <code>toMap</code> and <code>groupingBy</code> won&#39;t work. I assume writing your own collector is the best way to go. Alternatively, duplicating every item with the firstname/lastname as key (as in Samuels answer) works too."},{"owner":{"account_id":8646314,"reputation":2159,"user_id":6473398,"display_name":"sfiss"},"score":1,"creation_date":1562675839,"post_id":56952524,"comment_id":100443931,"body_markdown":"Also should the title be changed to &quot;map one item with multiple fields to multiple keys&quot;?","body":"Also should the title be changed to &quot;map one item with multiple fields to multiple keys&quot;?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1562680548,"post_id":56952524,"comment_id":100446761,"body_markdown":"[@sfiss’ comment](https://stackoverflow.com/questions/56952524/java-stream-collect-map-one-item-with-multiple-fields-to-multiple-keys#comment100443560_56952524) is valuable as rewriting the loop to use `computeIfAbsent` may end up at simpler code than the Stream solution.","body":"<a href=\"https://stackoverflow.com/questions/56952524/java-stream-collect-map-one-item-with-multiple-fields-to-multiple-keys#comment100443560_56952524\">@sfiss’ comment</a> is valuable as rewriting the loop to use <code>computeIfAbsent</code> may end up at simpler code than the Stream solution."}],"answers":[{"tags":[],"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1633703117,"creation_date":1562675666,"answer_id":56952713,"question_id":56952524,"body_markdown":"You can use `Stream.flatMap()` and `Collectors.groupingBy()` with `Collectors.mapping()`:\r\n\r\n    Map&lt;String, List&lt;Person&gt;&gt; result = personList.stream()\r\n            .flatMap(p -&gt; Stream.of(p.getFirstName(), p.getLastName()).map(n -&gt; new AbstractMap.SimpleEntry&lt;&gt;(n, p)))\r\n            .collect(Collectors.groupingBy(Map.Entry::getKey, Collectors.mapping(Map.Entry::getValue, Collectors.toList())));\r\n\r\nThis uses `flatMap` to expand all names (first and last) to their `Person` object and collects it afterwards.\r\n\r\nAlternatively using Java 9 or above you could use `Collectors.flatMapping()`:\r\n\r\n    Map&lt;String, List&lt;Person&gt;&gt; result = personList.stream()\r\n            .collect(Collectors.flatMapping(\r\n                    p -&gt; Stream.of(p.getFirstName(), p.getLastName()).map(n -&gt; new AbstractMap.SimpleEntry&lt;&gt;(n, p)), \r\n                    Collectors.groupingBy(Map.Entry::getKey, \r\n                            Collectors.mapping(Map.Entry::getValue, Collectors.toList()))));\r\n\r\nBut I don&#39;t think that this is more readable.","title":"Java stream/collect: map one item with multiple fields to multiple keys","body":"<p>You can use <code>Stream.flatMap()</code> and <code>Collectors.groupingBy()</code> with <code>Collectors.mapping()</code>:</p>\n<pre><code>Map&lt;String, List&lt;Person&gt;&gt; result = personList.stream()\n        .flatMap(p -&gt; Stream.of(p.getFirstName(), p.getLastName()).map(n -&gt; new AbstractMap.SimpleEntry&lt;&gt;(n, p)))\n        .collect(Collectors.groupingBy(Map.Entry::getKey, Collectors.mapping(Map.Entry::getValue, Collectors.toList())));\n</code></pre>\n<p>This uses <code>flatMap</code> to expand all names (first and last) to their <code>Person</code> object and collects it afterwards.</p>\n<p>Alternatively using Java 9 or above you could use <code>Collectors.flatMapping()</code>:</p>\n<pre><code>Map&lt;String, List&lt;Person&gt;&gt; result = personList.stream()\n        .collect(Collectors.flatMapping(\n                p -&gt; Stream.of(p.getFirstName(), p.getLastName()).map(n -&gt; new AbstractMap.SimpleEntry&lt;&gt;(n, p)), \n                Collectors.groupingBy(Map.Entry::getKey, \n                        Collectors.mapping(Map.Entry::getValue, Collectors.toList()))));\n</code></pre>\n<p>But I don't think that this is more readable.</p>\n"}],"owner":{"account_id":5877752,"reputation":1515,"user_id":4628136,"accept_rate":56,"display_name":"krakig"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10923,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":56952713,"answer_count":1,"score":9,"last_activity_date":1633703117,"creation_date":1562675038,"question_id":56952524,"body_markdown":"I have the following code that I&#39;d like to try to write using the java collectors.\r\n\r\nGiven 2 attributes (firstname and lastname) of a person, I&#39;d like to get a map containing the unique firstname or lastname as a key, and the list of the corresponding persons.\r\n\r\nHere&#39;s a set of data :\r\n\r\n    Person person1 = new Person();\r\n    person1.setFirstName(&quot;john&quot;);\r\n    person1.setLastName(&quot;doe&quot;);\r\n    person1.setUserId(&quot;user1&quot;);\r\n\r\n    Person person2 = new Person();\r\n    person2.setFirstName(&quot;doe&quot;);\r\n    person2.setLastName(&quot;frank&quot;);\r\n    person2.setUserId(&quot;user2&quot;);\r\n\r\n    Person person3 = new Person();\r\n    person3.setFirstName(&quot;john&quot;);\r\n    person3.setLastName(&quot;wayne&quot;);\r\n    person3.setUserId(&quot;user3&quot;);\r\n\r\n    List&lt;Person&gt; personList = new ArrayList&lt;&gt;();\r\n    personList.add(person1);\r\n    personList.add(person2);\r\n    personList.add(person3);\r\n\r\nOutput (as expected) is the following : \r\n\r\n    frank=[Person{userId=&#39;user2&#39;, firstName=&#39;doe&#39;, lastName=&#39;frank&#39;}], \r\n    \r\n    john=[Person{userId=&#39;user1&#39;, firstName=&#39;john&#39;, lastName=&#39;doe&#39;}, Person{userId=&#39;user3&#39;, firstName=&#39;john&#39;, lastName=&#39;wayne&#39;}], \r\n    \r\n    doe=[Person{userId=&#39;user1&#39;, firstName=&#39;john&#39;, lastName=&#39;doe&#39;}, Person{userId=&#39;user2&#39;, firstName=&#39;doe&#39;, lastName=&#39;frank&#39;}], \r\n    \r\n    wayne=[Person{userId=&#39;user3&#39;, firstName=&#39;john&#39;, lastName=&#39;wayne&#39;}]\r\n\r\nAnd the code to populate the map :\r\n\r\n    Map&lt;String, List&lt;Person&gt;&gt; mapPersons = new HashMap&lt;String, List&lt;Person&gt;&gt;();\r\n    List&lt;Person&gt; listPersons;\r\n\r\n    for (Person p: personList) {\r\n        if (mapPersons.get(p.getFirstName()) == null) {\r\n            listPersons = new ArrayList&lt;Person&gt;();\r\n            listPersons.add(p);\r\n            mapPersons.put(p.getFirstName(), listPersons);\r\n        } else {\r\n            mapPersons.get(p.getFirstName()).add(p);\r\n        }\r\n        if (mapPersons.get(p.getLastName()) == null) {\r\n            listPersons = new ArrayList&lt;Person&gt;();\r\n            listPersons.add(p);\r\n            mapPersons.put(p.getLastName(), listPersons);\r\n        } else {\r\n            mapPersons.get(p.getLastName()).add(p);\r\n        }\r\n    }\r\n\r\nI can&#39;t figure out how I can get either the firstname or the lastname as a key (not like in https://stackoverflow.com/questions/28342814/group-by-multiple-field-names-in-java-8). Do I have to write my own collector?","title":"Java stream/collect: map one item with multiple fields to multiple keys","body":"<p>I have the following code that I'd like to try to write using the java collectors.</p>\n\n<p>Given 2 attributes (firstname and lastname) of a person, I'd like to get a map containing the unique firstname or lastname as a key, and the list of the corresponding persons.</p>\n\n<p>Here's a set of data :</p>\n\n<pre><code>Person person1 = new Person();\nperson1.setFirstName(\"john\");\nperson1.setLastName(\"doe\");\nperson1.setUserId(\"user1\");\n\nPerson person2 = new Person();\nperson2.setFirstName(\"doe\");\nperson2.setLastName(\"frank\");\nperson2.setUserId(\"user2\");\n\nPerson person3 = new Person();\nperson3.setFirstName(\"john\");\nperson3.setLastName(\"wayne\");\nperson3.setUserId(\"user3\");\n\nList&lt;Person&gt; personList = new ArrayList&lt;&gt;();\npersonList.add(person1);\npersonList.add(person2);\npersonList.add(person3);\n</code></pre>\n\n<p>Output (as expected) is the following : </p>\n\n<pre><code>frank=[Person{userId='user2', firstName='doe', lastName='frank'}], \n\njohn=[Person{userId='user1', firstName='john', lastName='doe'}, Person{userId='user3', firstName='john', lastName='wayne'}], \n\ndoe=[Person{userId='user1', firstName='john', lastName='doe'}, Person{userId='user2', firstName='doe', lastName='frank'}], \n\nwayne=[Person{userId='user3', firstName='john', lastName='wayne'}]\n</code></pre>\n\n<p>And the code to populate the map :</p>\n\n<pre><code>Map&lt;String, List&lt;Person&gt;&gt; mapPersons = new HashMap&lt;String, List&lt;Person&gt;&gt;();\nList&lt;Person&gt; listPersons;\n\nfor (Person p: personList) {\n    if (mapPersons.get(p.getFirstName()) == null) {\n        listPersons = new ArrayList&lt;Person&gt;();\n        listPersons.add(p);\n        mapPersons.put(p.getFirstName(), listPersons);\n    } else {\n        mapPersons.get(p.getFirstName()).add(p);\n    }\n    if (mapPersons.get(p.getLastName()) == null) {\n        listPersons = new ArrayList&lt;Person&gt;();\n        listPersons.add(p);\n        mapPersons.put(p.getLastName(), listPersons);\n    } else {\n        mapPersons.get(p.getLastName()).add(p);\n    }\n}\n</code></pre>\n\n<p>I can't figure out how I can get either the firstname or the lastname as a key (not like in <a href=\"https://stackoverflow.com/questions/28342814/group-by-multiple-field-names-in-java-8\">Group by multiple field names in java 8</a>). Do I have to write my own collector?</p>\n"},{"tags":["java","collections","java-8","functional-programming","java-stream"],"comments":[{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1578519286,"post_id":59654115,"comment_id":105469425,"body_markdown":"a series of two `flatMap`, it seems.","body":"a series of two <code>flatMap</code>, it seems."},{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":0,"creation_date":1578521118,"post_id":59654115,"comment_id":105470059,"body_markdown":"Show us your attempt - aside of giving an answer, we can also *help* you based on your attempt :)","body":"Show us your attempt - aside of giving an answer, we can also <i>help</i> you based on your attempt :)"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1578533465,"post_id":59654115,"comment_id":105472963,"body_markdown":"`Elegant` does not necessarily mean `best`.","body":"<code>Elegant</code> does not necessarily mean <code>best</code>."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1578534628,"post_id":59654115,"comment_id":105473185,"body_markdown":"Shouldn&#39;t the `level2List` in the `Level2` class definition really be `level3List`?","body":"Shouldn&#39;t the <code>level2List</code> in the <code>Level2</code> class definition really be <code>level3List</code>?"},{"owner":{"account_id":17168363,"reputation":334,"user_id":12426044,"display_name":"Akash Sharma"},"score":0,"creation_date":1578610095,"post_id":59654115,"comment_id":105505072,"body_markdown":"@WJS yes you are right,  it should be  `level3List`","body":"@WJS yes you are right,  it should be  <code>level3List</code>"},{"owner":{"account_id":17168363,"reputation":334,"user_id":12426044,"display_name":"Akash Sharma"},"score":0,"creation_date":1578610671,"post_id":59654115,"comment_id":105505239,"body_markdown":"@WJS what according to you is the best solution ? I want to leanr the best solution as well.","body":"@WJS what according to you is the best solution ? I want to leanr the best solution as well."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1578610945,"post_id":59654115,"comment_id":105505321,"body_markdown":"It depends on your requirement.  But it would not be appropriate for me to pick one.  Any solution which meets your requirement would be a good choice.","body":"It depends on your requirement.  But it would not be appropriate for me to pick one.  Any solution which meets your requirement would be a good choice."}],"answers":[{"tags":[],"owner":{"account_id":13889637,"reputation":1582,"user_id":10027960,"display_name":"Maxdola"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578520251,"creation_date":1578520251,"answer_id":59654299,"question_id":59654115,"body_markdown":"I have this which is valid but I have no data to test it so pls test it and give me feedback :).\r\n\r\n    Map&lt;Integer, List&lt;String&gt;&gt; map = \r\n            initialList.stream()\r\n                    .collect(Collectors.toMap(f -&gt; f.idLevel1,\r\n                    f -&gt; f.level2list.stream()\r\n                    .flatMap(f2 -&gt; f2.level2list.stream())\r\n                    .collect(Collectors.toList()).stream()\r\n                    .filter(f3 -&gt; f3.idLevel3 == f.idLevel1)\r\n                    .map(f3 -&gt; f3.name).collect(Collectors.toList())));","title":"Creating a map from nested lists","body":"<p>I have this which is valid but I have no data to test it so pls test it and give me feedback :).</p>\n\n<pre><code>Map&lt;Integer, List&lt;String&gt;&gt; map = \n        initialList.stream()\n                .collect(Collectors.toMap(f -&gt; f.idLevel1,\n                f -&gt; f.level2list.stream()\n                .flatMap(f2 -&gt; f2.level2list.stream())\n                .collect(Collectors.toList()).stream()\n                .filter(f3 -&gt; f3.idLevel3 == f.idLevel1)\n                .map(f3 -&gt; f3.name).collect(Collectors.toList())));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1578538454,"creation_date":1578538454,"answer_id":59656594,"question_id":59654115,"body_markdown":"By corresponding to `idLevel1` I made the assumption that you wanted a list of all `idlevel3` that were in the `chain` for the a particular `idLevel1`\r\n\r\nSo there could be a list of `level3 ids` for some `level1 id` and a different list of `level3 ids` for a different `level1 id`.\r\n\r\nBased on that, this is what I came up with.\r\n```\r\n\t\tMap&lt;Integer, List&lt;Integer&gt;&gt; map = initialList\r\n\t\t\t\t.stream()\r\n\t\t\t\t.collect(Collectors\r\n\t\t\t\t\t\t.toMap(lv1 -&gt; lv1.idLevel1,\r\n\t\t\t\t\t\t\t\tlv1 -&gt; lv1.level2list\r\n\t\t\t\t\t\t\t\t\t\t.stream()\r\n\t\t\t\t\t\t.flatMap(lv2 -&gt; lv2.level3list\r\n\t\t\t\t\t\t\t\t.stream())\r\n\t\t\t\t\t\t.map(lv3 -&gt; lv3.idLevel3)\r\n\t\t\t\t\t\t.collect(Collectors.toList())));","title":"Creating a map from nested lists","body":"<p>By corresponding to <code>idLevel1</code> I made the assumption that you wanted a list of all <code>idlevel3</code> that were in the <code>chain</code> for the a particular <code>idLevel1</code></p>\n\n<p>So there could be a list of <code>level3 ids</code> for some <code>level1 id</code> and a different list of <code>level3 ids</code> for a different <code>level1 id</code>.</p>\n\n<p>Based on that, this is what I came up with.</p>\n\n<pre><code>        Map&lt;Integer, List&lt;Integer&gt;&gt; map = initialList\n                .stream()\n                .collect(Collectors\n                        .toMap(lv1 -&gt; lv1.idLevel1,\n                                lv1 -&gt; lv1.level2list\n                                        .stream()\n                        .flatMap(lv2 -&gt; lv2.level3list\n                                .stream())\n                        .map(lv3 -&gt; lv3.idLevel3)\n                        .collect(Collectors.toList())));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16249442,"reputation":4026,"user_id":11733759,"display_name":"lczapski"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1578576027,"creation_date":1578576027,"answer_id":59664903,"question_id":59654115,"body_markdown":"Similar approach to others:\r\n```java\r\nMap&lt;Integer, List&lt;Integer&gt;&gt; map = initialList.stream()\r\n        .collect(Collectors.toMap(Level1::getIdLevel1,\r\n                lv1 -&gt; lv1.getLevel2list().stream()\r\n                        .flatMap(lv2 -&gt; lv2.getLevel3list().stream().map(Level3::getIdLevel3))\r\n                        .collect(Collectors.toList())));\r\n```\r\nI added getters in yout classes and change one name from `List&lt;Level3&gt; level2list; ` to `List&lt;Level3&gt; level3list; `:\r\n```java\r\nclass Level1 {\r\n    int idLevel1;\r\n    List&lt;Level2&gt; level2list;\r\n\r\n    public int getIdLevel1() {\r\n        return idLevel1;\r\n    }\r\n\r\n    public List&lt;Level2&gt; getLevel2list() {\r\n        return level2list;\r\n    }\r\n}\r\n\r\nclass Level2 {\r\n    int idLevel2;\r\n    List&lt;Level3&gt; level3list;\r\n\r\n    public List&lt;Level3&gt; getLevel3list(){\r\n        return level3list;\r\n    }\r\n}\r\n\r\nclass Level3 {\r\n    int idLevel3;\r\n    String name;\r\n\r\n    public int getIdLevel3() {\r\n        return idLevel3;\r\n    }\r\n}\r\n```","title":"Creating a map from nested lists","body":"<p>Similar approach to others:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Integer, List&lt;Integer&gt;&gt; map = initialList.stream()\n        .collect(Collectors.toMap(Level1::getIdLevel1,\n                lv1 -&gt; lv1.getLevel2list().stream()\n                        .flatMap(lv2 -&gt; lv2.getLevel3list().stream().map(Level3::getIdLevel3))\n                        .collect(Collectors.toList())));\n</code></pre>\n\n<p>I added getters in yout classes and change one name from <code>List&lt;Level3&gt; level2list;</code> to <code>List&lt;Level3&gt; level3list;</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class Level1 {\n    int idLevel1;\n    List&lt;Level2&gt; level2list;\n\n    public int getIdLevel1() {\n        return idLevel1;\n    }\n\n    public List&lt;Level2&gt; getLevel2list() {\n        return level2list;\n    }\n}\n\nclass Level2 {\n    int idLevel2;\n    List&lt;Level3&gt; level3list;\n\n    public List&lt;Level3&gt; getLevel3list(){\n        return level3list;\n    }\n}\n\nclass Level3 {\n    int idLevel3;\n    String name;\n\n    public int getIdLevel3() {\n        return idLevel3;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17168363,"reputation":334,"user_id":12426044,"display_name":"Akash Sharma"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1378,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":59656594,"answer_count":3,"score":0,"last_activity_date":1633701936,"creation_date":1578519134,"question_id":59654115,"body_markdown":"Suppose there are 3 classes:\r\n\r\n    class Level1 {\r\n    \tint idLevel1;\r\n    \tList&lt;Level2&gt; level2list;\t\r\n    }\r\n    \r\n    class Level2 {\r\n    \tint idLevel2;\r\n    \tList&lt;Level3&gt; level3list;\t\r\n    }\t\r\n    \r\n    class Level3 {\t\r\n    \tint idLevel3;\r\n    \tString name;\r\n    }\t\r\n\r\nSuppose there is a List of Level1 objects called initial state\r\n\r\n    List&lt;Level1&gt; initialList = new ArrayList&lt;&gt;();\r\n\r\n I want to create a map from initialList where:\r\n\r\n     - Key: is idLevel1\r\n     - Value: is list of all idLevel3 , corresponding to idLevel1\r\n\r\nI am able to achieve this using for loops, but I want to achieve this in a more elegant way using Java 8 features (streams and the functions).\r\nI tried using Collectors.toMap() also tried grouping but I am unable to get the desired map.\r\n","title":"Creating a map from nested lists","body":"<p>Suppose there are 3 classes:</p>\n<pre><code>class Level1 {\n    int idLevel1;\n    List&lt;Level2&gt; level2list;    \n}\n\nclass Level2 {\n    int idLevel2;\n    List&lt;Level3&gt; level3list;    \n}   \n\nclass Level3 {  \n    int idLevel3;\n    String name;\n}   \n</code></pre>\n<p>Suppose there is a List of Level1 objects called initial state</p>\n<pre><code>List&lt;Level1&gt; initialList = new ArrayList&lt;&gt;();\n</code></pre>\n<p>I want to create a map from initialList where:</p>\n<pre><code> - Key: is idLevel1\n - Value: is list of all idLevel3 , corresponding to idLevel1\n</code></pre>\n<p>I am able to achieve this using for loops, but I want to achieve this in a more elegant way using Java 8 features (streams and the functions).\nI tried using Collectors.toMap() also tried grouping but I am unable to get the desired map.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":4400136,"reputation":660,"user_id":3586084,"display_name":"alierdogan7"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633699580,"creation_date":1633699580,"answer_id":69496620,"question_id":69496333,"body_markdown":"You need to run these lines in UI thread not in a separate thread. [Like this answer.][1]\r\n\r\n```\r\n new Handler().postDelayed(new Runnable() {\r\n    activity.runOnUiThread(new Runnable() {\r\n        public void run() {\r\n            if (NotificationReceiverSoundPlay.mPlayer != null)\r\n                NotificationReceiverSoundPlay.mPlayer.stop();\r\n        }\r\n    });\r\n }, 2000);\r\n```\r\n\r\n  [1]: https://stackoverflow.com/a/3134720/3586084","title":"ANdroid lang runtime exception error, how to resolve it?","body":"<p>You need to run these lines in UI thread not in a separate thread. <a href=\"https://stackoverflow.com/a/3134720/3586084\">Like this answer.</a></p>\n<pre><code> new Handler().postDelayed(new Runnable() {\n    activity.runOnUiThread(new Runnable() {\n        public void run() {\n            if (NotificationReceiverSoundPlay.mPlayer != null)\n                NotificationReceiverSoundPlay.mPlayer.stop();\n        }\n    });\n }, 2000);\n</code></pre>\n"}],"owner":{"account_id":20910620,"reputation":1,"user_id":15361605,"display_name":"Carwahan Your car partner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1633701225,"creation_date":1633698378,"question_id":69496333,"body_markdown":"I am getting the following error in my android studio. Is there any way I can solve this issue. Its causing a lot of crashes in my app.\r\n\r\n    E/AndroidRuntime: FATAL EXCEPTION: Firebase-Messaging-Intent-Handle\r\n        Process: com.cnlcabs.cnldrivers, PID: 19224\r\n        java.lang.RuntimeException: Can&#39;t create handler inside thread Thread[Firebase-Messaging-Intent-Handle,5,main] that has not called Looper.prepare()\r\n            at android.os.Handler.&lt;init&gt;(Handler.java:227)\r\n            at android.os.Handler.&lt;init&gt;(Handler.java:129)\r\n            at com.cnlcabs.cnldrivers.data.MyFirebaseMessagingService.stopPlayer(MyFirebaseMessagingService.java:264)\r\n            at com.cnlcabs.cnldrivers.data.MyFirebaseMessagingService.onMessageReceived(MyFirebaseMessagingService.java:233)\r\n            at com.google.firebase.messaging.FirebaseMessagingService.dispatchMessage(com.google.firebase:firebase-messaging@@21.1.0:13)\r\n            at com.google.firebase.messaging.FirebaseMessagingService.passMessageIntentToSdk(com.google.firebase:firebase-messaging@@21.1.0:8)\r\n            at com.google.firebase.messaging.FirebaseMessagingService.handleMessageIntent(com.google.firebase:firebase-messaging@@21.1.0:3)\r\n            at com.google.firebase.messaging.FirebaseMessagingService.handleIntent(com.google.firebase:firebase-messaging@@21.1.0:3)\r\n            at com.google.firebase.messaging.EnhancedIntentService.lambda$processIntent$0$EnhancedIntentService(com.google.firebase:firebase-messaging@@21.1.0:1)\r\n            at com.google.firebase.messaging.EnhancedIntentService$$Lambda$0.run(Unknown Source:6)\r\n            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\r\n            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\r\n            at com.google.android.gms.common.util.concurrent.zza.run(com.google.android.gms:play-services-basement@@17.5.0:6)\r\n            at java.lang.Thread.run(Thread.java:923)\r\n\r\nmy code for myfirebasemessagingservice line 264 is \r\n\r\n    private void stopPlayer() {\r\n        try {\r\n            new Handler().postDelayed(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    if (NotificationReceiverSoundPlay.mPlayer != null)\r\n    \r\n                        NotificationReceiverSoundPlay.mPlayer.stop();\r\n    \r\n    \r\n                }\r\n            }, 2000);\r\n        } catch (IllegalStateException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n","title":"ANdroid lang runtime exception error, how to resolve it?","body":"<p>I am getting the following error in my android studio. Is there any way I can solve this issue. Its causing a lot of crashes in my app.</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: Firebase-Messaging-Intent-Handle\n    Process: com.cnlcabs.cnldrivers, PID: 19224\n    java.lang.RuntimeException: Can't create handler inside thread Thread[Firebase-Messaging-Intent-Handle,5,main] that has not called Looper.prepare()\n        at android.os.Handler.&lt;init&gt;(Handler.java:227)\n        at android.os.Handler.&lt;init&gt;(Handler.java:129)\n        at com.cnlcabs.cnldrivers.data.MyFirebaseMessagingService.stopPlayer(MyFirebaseMessagingService.java:264)\n        at com.cnlcabs.cnldrivers.data.MyFirebaseMessagingService.onMessageReceived(MyFirebaseMessagingService.java:233)\n        at com.google.firebase.messaging.FirebaseMessagingService.dispatchMessage(com.google.firebase:firebase-messaging@@21.1.0:13)\n        at com.google.firebase.messaging.FirebaseMessagingService.passMessageIntentToSdk(com.google.firebase:firebase-messaging@@21.1.0:8)\n        at com.google.firebase.messaging.FirebaseMessagingService.handleMessageIntent(com.google.firebase:firebase-messaging@@21.1.0:3)\n        at com.google.firebase.messaging.FirebaseMessagingService.handleIntent(com.google.firebase:firebase-messaging@@21.1.0:3)\n        at com.google.firebase.messaging.EnhancedIntentService.lambda$processIntent$0$EnhancedIntentService(com.google.firebase:firebase-messaging@@21.1.0:1)\n        at com.google.firebase.messaging.EnhancedIntentService$$Lambda$0.run(Unknown Source:6)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\n        at com.google.android.gms.common.util.concurrent.zza.run(com.google.android.gms:play-services-basement@@17.5.0:6)\n        at java.lang.Thread.run(Thread.java:923)\n</code></pre>\n<p>my code for myfirebasemessagingservice line 264 is</p>\n<pre><code>private void stopPlayer() {\n    try {\n        new Handler().postDelayed(new Runnable() {\n            @Override\n            public void run() {\n                if (NotificationReceiverSoundPlay.mPlayer != null)\n\n                    NotificationReceiverSoundPlay.mPlayer.stop();\n\n\n            }\n        }, 2000);\n    } catch (IllegalStateException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":["java","wmctrl"],"comments":[{"owner":{"account_id":3961427,"reputation":7215,"user_id":3268303,"accept_rate":71,"display_name":"dazza5000"},"score":0,"creation_date":1556848010,"post_id":44475990,"comment_id":98575852,"body_markdown":"Did you figure it out?","body":"Did you figure it out?"}],"answers":[{"tags":[],"owner":{"account_id":16746677,"reputation":1,"user_id":12104701,"display_name":"question_guy_1234"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633700969,"creation_date":1633641599,"answer_id":69487990,"question_id":44475990,"body_markdown":"I have found that using the ProcessBuilder class rather than Runtime.exec() works to run the wmctrl command you described.\r\nSo rather than:\r\n````\r\nString bashCommand = &quot;wmctrl -r \\&quot;Calculator\\&quot; -e 0,100,100,500,500&quot;;\r\nProcess p = Runtime.getRuntime().exec(bashCommand);\r\n````\r\nYou can try:\r\n````\r\nString bashCommand = &quot;wmctrl -r \\&quot;Calculator\\&quot; -e 0,100,100,500,500&quot;;\r\nProcessBuilder pb = new ProcessBuilder(&quot;bash&quot;, &quot;-c&quot;, bashCommand);\r\nProcess p = pb.start();\r\n````\r\n\r\n[Here is a link](https://stackoverflow.com/a/6856659/12104701) to another post explaining the different between Runtime.exec() and using ProcessBuilder.","title":"java and wmctrl to resize windows","body":"<p>I have found that using the ProcessBuilder class rather than Runtime.exec() works to run the wmctrl command you described.\nSo rather than:</p>\n<pre><code>String bashCommand = &quot;wmctrl -r \\&quot;Calculator\\&quot; -e 0,100,100,500,500&quot;;\nProcess p = Runtime.getRuntime().exec(bashCommand);\n</code></pre>\n<p>You can try:</p>\n<pre><code>String bashCommand = &quot;wmctrl -r \\&quot;Calculator\\&quot; -e 0,100,100,500,500&quot;;\nProcessBuilder pb = new ProcessBuilder(&quot;bash&quot;, &quot;-c&quot;, bashCommand);\nProcess p = pb.start();\n</code></pre>\n<p><a href=\"https://stackoverflow.com/a/6856659/12104701\">Here is a link</a> to another post explaining the different between Runtime.exec() and using ProcessBuilder.</p>\n"}],"owner":{"account_id":1173719,"reputation":1107,"user_id":1150241,"accept_rate":41,"display_name":"Simon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":295,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1633700969,"creation_date":1497114862,"question_id":44475990,"body_markdown":"I&#39;m writing a library to cover WMctrl shell program. I have problem with resizing windows:\r\n\r\n    String command = &quot;wmctrl -r \\&quot;Calculator\\&quot; -e 0,100,100,500,500&quot;;\r\n\r\n    System.out.println(command);\r\n    String output = this.bashCommandExecutor.execute(command);\r\n    System.out.println(output);\r\n\r\nThis doesn&#39;t work - _output_ variable is empty. But when I copy-paste _wmctrl -r &quot;Calculator&quot; -e 0,100,100,500,500_ to the Terminal it works properly. \r\n\r\nOther commands like &quot;_wmctrl -d_&quot; and &quot;_wmctrl -l_&quot; work in _this.bashCommandExecutor.execute()_ method.\r\n\r\nThis method looks like this:\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    \r\n    public class BashCommandExecutor\r\n    {\r\n        String execute(String bashCommand)\r\n        {\r\n            Process p = null;\r\n            try {\r\n                p = Runtime.getRuntime().exec(bashCommand);\r\n                p.waitFor();\r\n            }\r\n            catch (InterruptedException | IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            BufferedReader reader = new BufferedReader(\r\n                new InputStreamReader(p.getInputStream())\r\n            );\r\n    \r\n            String line = &quot;&quot;;\r\n            StringBuilder sb = new StringBuilder();\r\n            try {\r\n                while ((line = reader.readLine())!= null) {\r\n                    sb.append(line + &quot;\\n&quot;);\r\n                }\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            return sb.toString();\r\n        }\r\n    }\r\n\r\nWhy does resizing work in command line, but doesn&#39;t work in Java app?","title":"java and wmctrl to resize windows","body":"<p>I'm writing a library to cover WMctrl shell program. I have problem with resizing windows:</p>\n\n<pre><code>String command = \"wmctrl -r \\\"Calculator\\\" -e 0,100,100,500,500\";\n\nSystem.out.println(command);\nString output = this.bashCommandExecutor.execute(command);\nSystem.out.println(output);\n</code></pre>\n\n<p>This doesn't work - <em>output</em> variable is empty. But when I copy-paste <em>wmctrl -r \"Calculator\" -e 0,100,100,500,500</em> to the Terminal it works properly. </p>\n\n<p>Other commands like \"<em>wmctrl -d</em>\" and \"<em>wmctrl -l</em>\" work in <em>this.bashCommandExecutor.execute()</em> method.</p>\n\n<p>This method looks like this:</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\n\npublic class BashCommandExecutor\n{\n    String execute(String bashCommand)\n    {\n        Process p = null;\n        try {\n            p = Runtime.getRuntime().exec(bashCommand);\n            p.waitFor();\n        }\n        catch (InterruptedException | IOException e) {\n            e.printStackTrace();\n        }\n\n        BufferedReader reader = new BufferedReader(\n            new InputStreamReader(p.getInputStream())\n        );\n\n        String line = \"\";\n        StringBuilder sb = new StringBuilder();\n        try {\n            while ((line = reader.readLine())!= null) {\n                sb.append(line + \"\\n\");\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        return sb.toString();\n    }\n}\n</code></pre>\n\n<p>Why does resizing work in command line, but doesn't work in Java app?</p>\n"},{"tags":["java","discord4j"],"answers":[{"tags":[],"owner":{"account_id":14719989,"reputation":5877,"user_id":10630900,"display_name":"Minn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1633700124,"creation_date":1633700124,"answer_id":69496725,"question_id":69396617,"body_markdown":"This is because you receive a `MessageCreateEvent` for all messages you send with the bot as well. Since your message is `createMessage(&quot;test!&quot;)`, you will also receive a message where `getContent()` returns `&quot;test!&quot;`. This will obviously result in `&quot;test!&quot;.contains(&quot;test&quot;)` but not `&quot;test!&quot;.equals(&quot;test&quot;)`.\r\n\r\nThis can be prevented by checking if the message author is a bot. \r\n\r\n```java\r\nfilter(message -&gt; !message.getAuthor().map(User::isBot).orElse(true))\r\n```","title":"Discord4J issue: sending messages in a loop instead","body":"<p>This is because you receive a <code>MessageCreateEvent</code> for all messages you send with the bot as well. Since your message is <code>createMessage(&quot;test!&quot;)</code>, you will also receive a message where <code>getContent()</code> returns <code>&quot;test!&quot;</code>. This will obviously result in <code>&quot;test!&quot;.contains(&quot;test&quot;)</code> but not <code>&quot;test!&quot;.equals(&quot;test&quot;)</code>.</p>\n<p>This can be prevented by checking if the message author is a bot.</p>\n<pre class=\"lang-java prettyprint-override\"><code>filter(message -&gt; !message.getAuthor().map(User::isBot).orElse(true))\n</code></pre>\n"}],"owner":{"account_id":22225212,"reputation":73,"user_id":16462274,"display_name":"MichaPehlivan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":303,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69496725,"answer_count":1,"score":0,"last_activity_date":1633700124,"creation_date":1633023292,"question_id":69396617,"body_markdown":"Below is the code I used for a test command in Discord4J\r\n\r\n    gateway.on(MessageCreateEvent.class)\r\n                .map(MessageCreateEvent::getMessage)\r\n                .filter(message -&gt; message.getContent().contains(&quot;test&quot;))\r\n                .flatMap(Message::getChannel)\r\n                .flatMap(channel -&gt; channel.createMessage(&quot;test!&quot;))\r\n                .subscribe();\r\n\r\nbut now if you type &quot;test&quot; in discord, it keeps sending messages, instead of a single message like I would expect. What&#39;s the issue here? It does work with equals() and equalsignorecase(), but with all other String checking methods it goes into a loop.\r\n","title":"Discord4J issue: sending messages in a loop instead","body":"<p>Below is the code I used for a test command in Discord4J</p>\n<pre><code>gateway.on(MessageCreateEvent.class)\n            .map(MessageCreateEvent::getMessage)\n            .filter(message -&gt; message.getContent().contains(&quot;test&quot;))\n            .flatMap(Message::getChannel)\n            .flatMap(channel -&gt; channel.createMessage(&quot;test!&quot;))\n            .subscribe();\n</code></pre>\n<p>but now if you type &quot;test&quot; in discord, it keeps sending messages, instead of a single message like I would expect. What's the issue here? It does work with equals() and equalsignorecase(), but with all other String checking methods it goes into a loop.</p>\n"},{"tags":["java","inputmismatchexception"],"comments":[{"owner":{"account_id":9585350,"reputation":3325,"user_id":7118342,"display_name":"Harmandeep Singh Kalsi"},"score":0,"creation_date":1582224784,"post_id":60326657,"comment_id":106713433,"body_markdown":",could you try using scanner.nextLine instead od scanner.next() , as I can see in your toolName there is space . Please refer this for difference between next and nextLine . https://stackoverflow.com/questions/22458575/whats-the-difference-between-next-and-nextline-methods-from-scanner-class","body":",could you try using scanner.nextLine instead od scanner.next() , as I can see in your toolName there is space . Please refer this for difference between next and nextLine . <a href=\"https://stackoverflow.com/questions/22458575/whats-the-difference-between-next-and-nextline-methods-from-scanner-class\" title=\"whats the difference between next and nextline methods from scanner class\">stackoverflow.com/questions/22458575/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":7369804,"reputation":1147,"user_id":5610358,"display_name":"rhowell"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1582225232,"creation_date":1582224814,"answer_id":60326757,"question_id":60326657,"body_markdown":"The issue here is that your lines are not ending with a comma and there are newlines. \r\n\r\nThis is what your program is interpreting the first two lines of your input as:\r\n\r\n    Makita BHP452RFWX,RD2001, 12 ,false,14995,1800\\nFlex Impact Screwdriver FIS439,RD2834,14,true,13499,1200\r\n\r\nNotice how there is no comma after 1800? There is a `\\n` which denotes a newline.\r\n\r\nEdit: I&#39;m also noticing spaces after some commas, so that would likely be messing with things also. Try out Eng.Fouad&#39;s answer as it addresses my concerns.","title":"why is it giving me an java.util.InputMismatchException when i run this code when I use a text file with the text (shown underneath)","body":"<p>The issue here is that your lines are not ending with a comma and there are newlines. </p>\n\n<p>This is what your program is interpreting the first two lines of your input as:</p>\n\n<pre><code>Makita BHP452RFWX,RD2001, 12 ,false,14995,1800\\nFlex Impact Screwdriver FIS439,RD2834,14,true,13499,1200\n</code></pre>\n\n<p>Notice how there is no comma after 1800? There is a <code>\\n</code> which denotes a newline.</p>\n\n<p>Edit: I'm also noticing spaces after some commas, so that would likely be messing with things also. Try out Eng.Fouad's answer as it addresses my concerns.</p>\n"},{"tags":[],"owner":{"account_id":294022,"reputation":115930,"user_id":597657,"accept_rate":99,"display_name":"Eng.Fouad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1582225140,"creation_date":1582225140,"answer_id":60326832,"question_id":60326657,"body_markdown":"You should change the delimiter to include optional spaces around commas, and the new line characters as well. Something like this:\r\n\r\n    scanner.useDelimiter(&quot;(\\\\s*,\\\\s*)|(\\r\\n)|(\\n)&quot;);","title":"why is it giving me an java.util.InputMismatchException when i run this code when I use a text file with the text (shown underneath)","body":"<p>You should change the delimiter to include optional spaces around commas, and the new line characters as well. Something like this:</p>\n\n<pre><code>scanner.useDelimiter(\"(\\\\s*,\\\\s*)|(\\r\\n)|(\\n)\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2434783,"reputation":1779,"user_id":2124961,"display_name":"Stefan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582225925,"creation_date":1582225550,"answer_id":60326936,"question_id":60326657,"body_markdown":"You get the InputMismatchException in ```int timesBorrowed = scanner.nextInt()``` for the first line of the input file. The error is caused by the spaces around the comma.\r\n\r\nChange the delimiter to ``` *, *``` then any number of spaces around the comma become part of the delimiter and thus get removed. Instead of the spaces you may also use ```\\\\s``` which covers all whitespaces (space and tabs).\r\n\r\nThen you get the exception in line ```int weight = scanner.nextInt()``` again for the first line of the input file, because the ```1800``` is followed by a line break. So what you need is a delimiter which also matches the line breaks: ```( *, *)|[\\r\\n]+```\r\n\r\nThe regular expression means: Either a comma surrounded by any number of spaces or at least one consecutive line break. Note that Unix files have usually only ```\\n``` while Windows file have usually both characters ```\\r\\n``` in each line break. So that expression covers both file formats and also skips empty lines.\r\n\r\nHere is a full example which works:\r\n```\r\npublic class Main\r\n{\r\n\r\n    public static void readToolData(String fileName) throws FileNotFoundException\r\n    {\r\n        File dataFile = new File(fileName);\r\n        Scanner scanner = new Scanner(dataFile);\r\n        scanner.useDelimiter(&quot;( *, *)|[\\r\\n]+&quot;);\r\n        while (scanner.hasNext())\r\n        {\r\n            String toolName = scanner.next();\r\n            String itemCode = scanner.next();\r\n            int timesBorrowed = scanner.nextInt();\r\n            boolean onLoan = scanner.nextBoolean();\r\n            int cost = scanner.nextInt();\r\n            int weight = scanner.nextInt();\r\n            System.out.println(&quot;toolName=&quot; + toolName + &quot;, weight=&quot; + weight);\r\n        }\r\n        scanner.close();\r\n    }\r\n\r\n    public static void main(String[] args) throws FileNotFoundException\r\n    {\r\n        readToolData(&quot;/home/stefan/Programmierung/PC-Java/test/src/test.txt&quot;);\r\n    }\r\n}\r\n```\r\n","title":"why is it giving me an java.util.InputMismatchException when i run this code when I use a text file with the text (shown underneath)","body":"<p>You get the InputMismatchException in <code>int timesBorrowed = scanner.nextInt()</code> for the first line of the input file. The error is caused by the spaces around the comma.</p>\n\n<p>Change the delimiter to <code>*, *</code> then any number of spaces around the comma become part of the delimiter and thus get removed. Instead of the spaces you may also use <code>\\\\s</code> which covers all whitespaces (space and tabs).</p>\n\n<p>Then you get the exception in line <code>int weight = scanner.nextInt()</code> again for the first line of the input file, because the <code>1800</code> is followed by a line break. So what you need is a delimiter which also matches the line breaks: <code>( *, *)|[\\r\\n]+</code></p>\n\n<p>The regular expression means: Either a comma surrounded by any number of spaces or at least one consecutive line break. Note that Unix files have usually only <code>\\n</code> while Windows file have usually both characters <code>\\r\\n</code> in each line break. So that expression covers both file formats and also skips empty lines.</p>\n\n<p>Here is a full example which works:</p>\n\n<pre><code>public class Main\n{\n\n    public static void readToolData(String fileName) throws FileNotFoundException\n    {\n        File dataFile = new File(fileName);\n        Scanner scanner = new Scanner(dataFile);\n        scanner.useDelimiter(\"( *, *)|[\\r\\n]+\");\n        while (scanner.hasNext())\n        {\n            String toolName = scanner.next();\n            String itemCode = scanner.next();\n            int timesBorrowed = scanner.nextInt();\n            boolean onLoan = scanner.nextBoolean();\n            int cost = scanner.nextInt();\n            int weight = scanner.nextInt();\n            System.out.println(\"toolName=\" + toolName + \", weight=\" + weight);\n        }\n        scanner.close();\n    }\n\n    public static void main(String[] args) throws FileNotFoundException\n    {\n        readToolData(\"/home/stefan/Programmierung/PC-Java/test/src/test.txt\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2434783,"reputation":1779,"user_id":2124961,"display_name":"Stefan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1582308047,"creation_date":1582308047,"answer_id":60344044,"question_id":60326657,"body_markdown":"If you read the file line by line you can add additional checks, e.g. filter out comments (lines starting with &quot;//&quot; in this case):\r\n```\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.util.Scanner;\r\n\r\npublic class Main\r\n{\r\n\r\n    public static void readToolData(String fileName) throws FileNotFoundException\r\n    {\r\n        File dataFile = new File(fileName);\r\n        Scanner scanner = new Scanner(dataFile);\r\n        while (scanner.hasNext())\r\n        {\r\n            String line = scanner.nextLine().trim();\r\n            if (line.isEmpty() || line.startsWith(&quot;//&quot;))\r\n            {\r\n                // skip this line\r\n                continue;\r\n            }\r\n\r\n            // Split the line\r\n            String[] parts = line.split(&quot; *, *&quot;);\r\n\r\n            String toolName = parts[0];\r\n            String itemCode = parts[1];\r\n            int timesBorrowed = Integer.parseInt(parts[2]);\r\n            boolean onLoan = Boolean.parseBoolean(parts[3]);\r\n            int cost = Integer.parseInt(parts[4]);\r\n            int weight = Integer.parseInt(parts[5]);\r\n\r\n            System.out.println(&quot;toolName=&quot; + toolName + &quot;, weight=&quot; + weight);\r\n        }\r\n        scanner.close();\r\n    }\r\n\r\n    public static void main(String[] args) throws FileNotFoundException\r\n    {\r\n        readToolData(&quot;/home/stefan/Programmierung/PC-Java/test/src/test.txt&quot;);\r\n    }\r\n}\r\n```","title":"why is it giving me an java.util.InputMismatchException when i run this code when I use a text file with the text (shown underneath)","body":"<p>If you read the file line by line you can add additional checks, e.g. filter out comments (lines starting with \"//\" in this case):</p>\n\n<pre><code>import java.io.File;\nimport java.io.FileNotFoundException;\nimport java.util.Scanner;\n\npublic class Main\n{\n\n    public static void readToolData(String fileName) throws FileNotFoundException\n    {\n        File dataFile = new File(fileName);\n        Scanner scanner = new Scanner(dataFile);\n        while (scanner.hasNext())\n        {\n            String line = scanner.nextLine().trim();\n            if (line.isEmpty() || line.startsWith(\"//\"))\n            {\n                // skip this line\n                continue;\n            }\n\n            // Split the line\n            String[] parts = line.split(\" *, *\");\n\n            String toolName = parts[0];\n            String itemCode = parts[1];\n            int timesBorrowed = Integer.parseInt(parts[2]);\n            boolean onLoan = Boolean.parseBoolean(parts[3]);\n            int cost = Integer.parseInt(parts[4]);\n            int weight = Integer.parseInt(parts[5]);\n\n            System.out.println(\"toolName=\" + toolName + \", weight=\" + weight);\n        }\n        scanner.close();\n    }\n\n    public static void main(String[] args) throws FileNotFoundException\n    {\n        readToolData(\"/home/stefan/Programmierung/PC-Java/test/src/test.txt\");\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17809376,"reputation":21,"user_id":12934362,"display_name":"azzy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":355,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":60326832,"answer_count":4,"score":1,"last_activity_date":1633699286,"creation_date":1582224386,"question_id":60326657,"body_markdown":"    import java.util.*;\r\n    \r\n    public void readToolData(String fileName) throws FileNotFoundException\r\n    {\r\n        File dataFile = new File(fileName);\r\n        Scanner scanner = new Scanner(dataFile);\r\n        scanner.useDelimiter(&quot;,&quot;);\r\n        \r\n        while( scanner.hasNext() )\r\n        {\r\n            String toolName = scanner.next();\r\n            String itemCode = scanner.next();\r\n            int timesBorrowed = scanner.nextInt();\r\n            boolean onLoan = scanner.nextBoolean();\r\n            int cost = scanner.nextInt();\r\n            int weight = scanner.nextInt();\r\n            storeTool(new Tool(toolName, itemCode, timesBorrowed, onLoan, cost, weight));\r\n        }\r\n        \r\n        scanner.close();\r\n    }\r\n\r\n\r\nFile:\r\n    \r\n    Makita BHP452RFWX,RD2001, 12 ,false,14995,1800\r\n    Flex Impact Screwdriver FIS439,RD2834,14,true,13499,1200\r\n    DeWalt D23650-GB Circular Saw, RD6582,54,true,14997,5400\r\n    Milwaukee DD2-160XE Diamond Core Drill,RD4734,50,false,38894,9000\r\n    Bosch GSR10.8-Li Drill Driver,RD3021,25, true,9995,820\r\n    Bosch GSB19-2REA Percussion Drill,RD8654,85,false,19999,4567\r\n    Flex Impact Screwdriver FIS439, RD2835,14,false,13499,1200\r\n    DeWalt DW936 Circular Saw,RD4352,18,false,19999,3300\r\n    Sparky FK652 Wall Chaser,RD7625,15,false,29994,8400\r\n    \r\n\r\n    \r\n\r\n\r\n\r\n\r\n\r\n","title":"why is it giving me an java.util.InputMismatchException when i run this code when I use a text file with the text (shown underneath)","body":"<pre><code>import java.util.*;\n\npublic void readToolData(String fileName) throws FileNotFoundException\n{\n    File dataFile = new File(fileName);\n    Scanner scanner = new Scanner(dataFile);\n    scanner.useDelimiter(\",\");\n\n    while( scanner.hasNext() )\n    {\n        String toolName = scanner.next();\n        String itemCode = scanner.next();\n        int timesBorrowed = scanner.nextInt();\n        boolean onLoan = scanner.nextBoolean();\n        int cost = scanner.nextInt();\n        int weight = scanner.nextInt();\n        storeTool(new Tool(toolName, itemCode, timesBorrowed, onLoan, cost, weight));\n    }\n\n    scanner.close();\n}\n</code></pre>\n\n<p>File:</p>\n\n<pre><code>Makita BHP452RFWX,RD2001, 12 ,false,14995,1800\nFlex Impact Screwdriver FIS439,RD2834,14,true,13499,1200\nDeWalt D23650-GB Circular Saw, RD6582,54,true,14997,5400\nMilwaukee DD2-160XE Diamond Core Drill,RD4734,50,false,38894,9000\nBosch GSR10.8-Li Drill Driver,RD3021,25, true,9995,820\nBosch GSB19-2REA Percussion Drill,RD8654,85,false,19999,4567\nFlex Impact Screwdriver FIS439, RD2835,14,false,13499,1200\nDeWalt DW936 Circular Saw,RD4352,18,false,19999,3300\nSparky FK652 Wall Chaser,RD7625,15,false,29994,8400\n</code></pre>\n"},{"tags":["java","sockets","cmd","apache-zookeeper","apache-kafka-streams"],"answers":[{"tags":[],"owner":{"account_id":22972076,"reputation":76,"user_id":17100275,"display_name":"Rahul Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633699090,"creation_date":1633699090,"answer_id":69496493,"question_id":69493978,"body_markdown":"In order to start kafka\r\n1) start zookeeper\r\n2) start kafka server\r\n\r\nKafka server depends on zookeeper.\r\nIn order to learn the flow go through the below mentioned site,\r\nhttps://www.javainuse.com/misc/apache-kafka-hello-world","title":"kafka dont work for me using for first time Connection refused .ZooKeeperClient","body":"<p>In order to start kafka</p>\n<ol>\n<li>start zookeeper</li>\n<li>start kafka server</li>\n</ol>\n<p>Kafka server depends on zookeeper.\nIn order to learn the flow go through the below mentioned site,\n<a href=\"https://www.javainuse.com/misc/apache-kafka-hello-world\" rel=\"nofollow noreferrer\">https://www.javainuse.com/misc/apache-kafka-hello-world</a></p>\n"}],"owner":{"account_id":13267097,"reputation":1,"user_id":9673625,"display_name":"Akrimi Zoulfa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2148,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1633699090,"creation_date":1633686913,"question_id":69493978,"body_markdown":"i Install kafka for first time.\r\ni want to start it . \r\nwhen i run  .\\bin\\windows\\kafka-server-start.bat .\\config\\server.properties \r\ni get this result \r\n```\r\n[2021-10-08 10:03:43,563] INFO Socket error occurred: localhost/0:0:0:0:0:0:0:1:2181: Connection refused: no further information (org.apache.zookeeper.ClientCnxn)\r\n[2021-10-08 10:03:44,693] INFO Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)\r\n[2021-10-08 10:03:46,743] INFO Socket error occurred: localhost/0:0:0:0:0:0:0:1:2181: Connection refused: no further information (org.apache.zookeeper.ClientCnxn)\r\n[2021-10-08 10:03:47,873] INFO Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)\r\n[2021-10-08 10:03:49,928] INFO Socket error occurred: localhost/0:0:0:0:0:0:0:1:2181: Connection refused: no further information (org.apache.zookeeper.ClientCnxn)\r\n[2021-10-08 10:03:51,043] INFO Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)\r\n[2021-10-08 10:03:53,093] INFO Socket error occurred: localhost/0:0:0:0:0:0:0:1:2181: Connection refused: no further information (org.apache.zookeeper.ClientCnxn)\r\n[2021-10-08 10:03:54,233] INFO Opening socket connection to server localhost/127.0.0.1:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)\r\n[2021-10-08 10:03:56,283] INFO Socket error occurred: localhost/127.0.0.1:2181: Connection refused: no further information (org.apache.zookeeper.ClientCnxn)\r\n[2021-10-08 10:03:57,403] INFO Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)\r\n[2021-10-08 10:03:59,443] INFO Socket error occurred: localhost/0:0:0:0:0:0:0:1:2181: Connection refused: no further information (org.apache.zookeeper.ClientCnxn)\r\n[2021-10-08 10:03:59,523] INFO [ZooKeeperClient Kafka server] Closing. (kafka.zookeeper.ZooKeeperClient)\r\n[2021-10-08 10:03:59,683] INFO Session: 0x0 closed (org.apache.zookeeper.ZooKeeper)\r\n[2021-10-08 10:03:59,693] INFO EventThread shut down for session: 0x0 (org.apache.zookeeper.ClientCnxn)\r\n[2021-10-08 10:03:59,708] INFO [ZooKeeperClient Kafka server] Closed. (kafka.zookeeper.ZooKeeperClient)\r\n[2021-10-08 10:03:59,713] ERROR Fatal error during KafkaServer startup. Prepare to shutdown (kafka.server.KafkaServer)\r\nkafka.zookeeper.ZooKeeperClientTimeoutException: Timed out waiting for connection while in state: CONNECTING\r\n        at kafka.zookeeper.ZooKeeperClient.waitUntilConnected(ZooKeeperClient.scala:271)\r\n        at kafka.zookeeper.ZooKeeperClient.&lt;init&gt;(ZooKeeperClient.scala:125)\r\n        at kafka.zk.KafkaZkClient$.apply(KafkaZkClient.scala:1948)\r\n        at kafka.server.KafkaServer.createZkClient$1(KafkaServer.scala:431)\r\n        at kafka.server.KafkaServer.initZkClient(KafkaServer.scala:456)\r\n        at kafka.server.KafkaServer.startup(KafkaServer.scala:191)\r\n        at kafka.Kafka$.main(Kafka.scala:109)\r\n        at kafka.Kafka.main(Kafka.scala)\r\n[2021-10-08 10:03:59,723] INFO shutting down (kafka.server.KafkaServer)\r\n[2021-10-08 10:03:59,743] INFO App info kafka.server for 0 unregistered (org.apache.kafka.common.utils.AppInfoParser)\r\n[2021-10-08 10:03:59,743] INFO shut down completed (kafka.server.KafkaServer)\r\n[2021-10-08 10:03:59,743] ERROR Exiting Kafka. (kafka.Kafka$)\r\n[2021-10-08 10:03:59,752] INFO shutting down (kafka.server.KafkaServer)\r\n```\r\n","title":"kafka dont work for me using for first time Connection refused .ZooKeeperClient","body":"<p>i Install kafka for first time.\ni want to start it .\nwhen i run  .\\bin\\windows\\kafka-server-start.bat .\\config\\server.properties\ni get this result</p>\n<pre><code>[2021-10-08 10:03:43,563] INFO Socket error occurred: localhost/0:0:0:0:0:0:0:1:2181: Connection refused: no further information (org.apache.zookeeper.ClientCnxn)\n[2021-10-08 10:03:44,693] INFO Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)\n[2021-10-08 10:03:46,743] INFO Socket error occurred: localhost/0:0:0:0:0:0:0:1:2181: Connection refused: no further information (org.apache.zookeeper.ClientCnxn)\n[2021-10-08 10:03:47,873] INFO Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)\n[2021-10-08 10:03:49,928] INFO Socket error occurred: localhost/0:0:0:0:0:0:0:1:2181: Connection refused: no further information (org.apache.zookeeper.ClientCnxn)\n[2021-10-08 10:03:51,043] INFO Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)\n[2021-10-08 10:03:53,093] INFO Socket error occurred: localhost/0:0:0:0:0:0:0:1:2181: Connection refused: no further information (org.apache.zookeeper.ClientCnxn)\n[2021-10-08 10:03:54,233] INFO Opening socket connection to server localhost/127.0.0.1:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)\n[2021-10-08 10:03:56,283] INFO Socket error occurred: localhost/127.0.0.1:2181: Connection refused: no further information (org.apache.zookeeper.ClientCnxn)\n[2021-10-08 10:03:57,403] INFO Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)\n[2021-10-08 10:03:59,443] INFO Socket error occurred: localhost/0:0:0:0:0:0:0:1:2181: Connection refused: no further information (org.apache.zookeeper.ClientCnxn)\n[2021-10-08 10:03:59,523] INFO [ZooKeeperClient Kafka server] Closing. (kafka.zookeeper.ZooKeeperClient)\n[2021-10-08 10:03:59,683] INFO Session: 0x0 closed (org.apache.zookeeper.ZooKeeper)\n[2021-10-08 10:03:59,693] INFO EventThread shut down for session: 0x0 (org.apache.zookeeper.ClientCnxn)\n[2021-10-08 10:03:59,708] INFO [ZooKeeperClient Kafka server] Closed. (kafka.zookeeper.ZooKeeperClient)\n[2021-10-08 10:03:59,713] ERROR Fatal error during KafkaServer startup. Prepare to shutdown (kafka.server.KafkaServer)\nkafka.zookeeper.ZooKeeperClientTimeoutException: Timed out waiting for connection while in state: CONNECTING\n        at kafka.zookeeper.ZooKeeperClient.waitUntilConnected(ZooKeeperClient.scala:271)\n        at kafka.zookeeper.ZooKeeperClient.&lt;init&gt;(ZooKeeperClient.scala:125)\n        at kafka.zk.KafkaZkClient$.apply(KafkaZkClient.scala:1948)\n        at kafka.server.KafkaServer.createZkClient$1(KafkaServer.scala:431)\n        at kafka.server.KafkaServer.initZkClient(KafkaServer.scala:456)\n        at kafka.server.KafkaServer.startup(KafkaServer.scala:191)\n        at kafka.Kafka$.main(Kafka.scala:109)\n        at kafka.Kafka.main(Kafka.scala)\n[2021-10-08 10:03:59,723] INFO shutting down (kafka.server.KafkaServer)\n[2021-10-08 10:03:59,743] INFO App info kafka.server for 0 unregistered (org.apache.kafka.common.utils.AppInfoParser)\n[2021-10-08 10:03:59,743] INFO shut down completed (kafka.server.KafkaServer)\n[2021-10-08 10:03:59,743] ERROR Exiting Kafka. (kafka.Kafka$)\n[2021-10-08 10:03:59,752] INFO shutting down (kafka.server.KafkaServer)\n</code></pre>\n"},{"tags":["java","geotools"],"answers":[{"tags":[],"owner":{"account_id":195980,"reputation":10228,"user_id":439194,"accept_rate":100,"display_name":"Ian Turton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1633698835,"creation_date":1633698835,"answer_id":69496430,"question_id":69487418,"body_markdown":"The `DataUtilities` class provides a [`defaultValues(SimpleFeatureType )`][1] method that you can call to get the value defined in the `PropertyDescriptor` (though by default this is null). You can define the default value for any or all of your attributes in your `SimpleFeatureType`. \r\n\r\nI would use some code like:\r\n\r\n    SimpleFeatureTypeBuilder sftb = new SimpleFeatureTypeBuilder();\r\n    sftb.setName(&quot;test&quot;);\r\n    sftb.add(&quot;id&quot;, Integer.class);\r\n    sftb.defaultValue(&quot;String&quot;);\r\n    sftb.add(&quot;desc&quot;, String.class);\r\n    SimpleFeatureType schema = sftb.buildFeatureType();\r\n    SimpleFeatureBuilder sfb = new SimpleFeatureBuilder(schema);\r\n    sfb.addAll(DataUtilities.defaultValues(schema));\r\n    sfb.set(&quot;id&quot;, 23);\r\n    SimpleFeature f = sfb.buildFeature(&quot;test.1&quot;);\r\n    System.out.println(f);\r\n\r\nWhich produces a feature like:\r\n\r\n    SimpleFeatureImpl:test=[SimpleFeatureImpl.Attribute: id&lt;id id=test.1&gt;=23,\r\n     SimpleFeatureImpl.Attribute: desc&lt;desc id=test.1&gt;=String]\r\n\r\n  [1]: https://github.com/geotools/geotools/blob/de6f05cd4ef69523e6ff14e4658d3db92e740b10/modules/library/main/src/main/java/org/geotools/data/DataUtilities.java#L784","title":"geotools - Is it possible to skip columns when inserting new SimpleFeature using JDBCDataStore","body":"<p>The <code>DataUtilities</code> class provides a <a href=\"https://github.com/geotools/geotools/blob/de6f05cd4ef69523e6ff14e4658d3db92e740b10/modules/library/main/src/main/java/org/geotools/data/DataUtilities.java#L784\" rel=\"nofollow noreferrer\"><code>defaultValues(SimpleFeatureType )</code></a> method that you can call to get the value defined in the <code>PropertyDescriptor</code> (though by default this is null). You can define the default value for any or all of your attributes in your <code>SimpleFeatureType</code>.</p>\n<p>I would use some code like:</p>\n<pre><code>SimpleFeatureTypeBuilder sftb = new SimpleFeatureTypeBuilder();\nsftb.setName(&quot;test&quot;);\nsftb.add(&quot;id&quot;, Integer.class);\nsftb.defaultValue(&quot;String&quot;);\nsftb.add(&quot;desc&quot;, String.class);\nSimpleFeatureType schema = sftb.buildFeatureType();\nSimpleFeatureBuilder sfb = new SimpleFeatureBuilder(schema);\nsfb.addAll(DataUtilities.defaultValues(schema));\nsfb.set(&quot;id&quot;, 23);\nSimpleFeature f = sfb.buildFeature(&quot;test.1&quot;);\nSystem.out.println(f);\n</code></pre>\n<p>Which produces a feature like:</p>\n<pre><code>SimpleFeatureImpl:test=[SimpleFeatureImpl.Attribute: id&lt;id id=test.1&gt;=23,\n SimpleFeatureImpl.Attribute: desc&lt;desc id=test.1&gt;=String]\n</code></pre>\n"}],"owner":{"account_id":195078,"reputation":209,"user_id":437774,"display_name":"Geert"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69496430,"answer_count":1,"score":0,"last_activity_date":1633698835,"creation_date":1633638206,"question_id":69487418,"body_markdown":"In our application (Java, Geotools 25, PostGIS) we have forms where the user can input some data which will be used to create a new features. In the database (PostGIS) there are more columns than there are fields so some columns will be empty. For some of these &#39;empty&#39; columns there are default values defined in the database. Geotools however seems to always insert null for these columns.\r\n\r\nIn code I have a ```SimpleFeatureStore``` and I create a ```SimpleFeature``` based on the user input. When I&#39;m inserting new Features (```store.addFeatures()```) the final SQL that is created by Geotools is an ```INSERT INTO``` statement which contains ```null``` values for all the columns which are not &#39;in the form&#39;, but again some of these have default values in the DB. Since Geotools explicitly sets the value to ```null``` the default value is never used.\r\n\r\nIs there a fix or workaround I can try to resolve this issue so I can just let the DB insert default values when no value is supplied?","title":"geotools - Is it possible to skip columns when inserting new SimpleFeature using JDBCDataStore","body":"<p>In our application (Java, Geotools 25, PostGIS) we have forms where the user can input some data which will be used to create a new features. In the database (PostGIS) there are more columns than there are fields so some columns will be empty. For some of these 'empty' columns there are default values defined in the database. Geotools however seems to always insert null for these columns.</p>\n<p>In code I have a <code>SimpleFeatureStore</code> and I create a <code>SimpleFeature</code> based on the user input. When I'm inserting new Features (<code>store.addFeatures()</code>) the final SQL that is created by Geotools is an <code>INSERT INTO</code> statement which contains <code>null</code> values for all the columns which are not 'in the form', but again some of these have default values in the DB. Since Geotools explicitly sets the value to <code>null</code> the default value is never used.</p>\n<p>Is there a fix or workaround I can try to resolve this issue so I can just let the DB insert default values when no value is supplied?</p>\n"},{"tags":["java","inputstream","nio","bytearrayinputstream","gzipoutputstream"],"comments":[{"owner":{"account_id":7032763,"reputation":2130,"user_id":5387880,"display_name":"Tanuj"},"score":0,"creation_date":1633682336,"post_id":69492870,"comment_id":122829887,"body_markdown":"Can you add the exception stacktrace as well?","body":"Can you add the exception stacktrace as well?"},{"owner":{"account_id":3150862,"reputation":11755,"user_id":2664350,"display_name":"piet.t"},"score":1,"creation_date":1633682482,"post_id":69492870,"comment_id":122829944,"body_markdown":"You are writing the complete zip-file to memory, so your heap has to be larger than your maximum zip-file-size - and when used in parallel larger than the sum of all maximum zip-file-sizes...","body":"You are writing the complete zip-file to memory, so your heap has to be larger than your maximum zip-file-size - and when used in parallel larger than the sum of all maximum zip-file-sizes..."},{"owner":{"account_id":4066772,"reputation":945,"user_id":3341400,"accept_rate":67,"display_name":"mwKART"},"score":0,"creation_date":1633683785,"post_id":69492870,"comment_id":122830412,"body_markdown":"As mentioned in the edit I am writing the same to a remote folder","body":"As mentioned in the edit I am writing the same to a remote folder"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1633683885,"post_id":69492870,"comment_id":122830439,"body_markdown":"@mwKART: yes, but **before** you do that, you write it all to an `ByteArrayOutputStream`. So instead of streaming directly to your remote folder, you have to hold everything in memory. You should 1. get an `OutputStream` to write to for the remote filesystem and then 2. create the `ZipOutputStream` by directly wrapping that instead of a `ByteArrayOutputStream`.","body":"@mwKART: yes, but <b>before</b> you do that, you write it all to an <code>ByteArrayOutputStream</code>. So instead of streaming directly to your remote folder, you have to hold everything in memory. You should 1. get an <code>OutputStream</code> to write to for the remote filesystem and then 2. create the <code>ZipOutputStream</code> by directly wrapping that instead of a <code>ByteArrayOutputStream</code>."},{"owner":{"account_id":7032763,"reputation":2130,"user_id":5387880,"display_name":"Tanuj"},"score":0,"creation_date":1633684676,"post_id":69492870,"comment_id":122830720,"body_markdown":"as per the code and this line  `return new ByteArrayInputStream(byteArrayOutputStream.toByteArray());` everything is still in the memory. `ByteArrayOutputStream` will keep everything in memory until everything is written and flushed. So if the data is larger than your heap size you are eventually going to run into an OME.","body":"as per the code and this line  <code>return new ByteArrayInputStream(byteArrayOutputStream.toByteArray());</code> everything is still in the memory. <code>ByteArrayOutputStream</code> will keep everything in memory until everything is written and flushed. So if the data is larger than your heap size you are eventually going to run into an OME."},{"owner":{"account_id":4066772,"reputation":945,"user_id":3341400,"accept_rate":67,"display_name":"mwKART"},"score":0,"creation_date":1633698190,"post_id":69492870,"comment_id":122835871,"body_markdown":"Thanks, All. the issue was `ByteArrayOutputStream`. More detail in the answer.","body":"Thanks, All. the issue was <code>ByteArrayOutputStream</code>. More detail in the answer."}],"answers":[{"tags":[],"owner":{"account_id":4066772,"reputation":945,"user_id":3341400,"accept_rate":67,"display_name":"mwKART"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1633698833,"creation_date":1633698833,"answer_id":69496429,"question_id":69492870,"body_markdown":"Changed the implementation to write the file into a file in local path and then send that file to sftp and then delete the temp zip file. \r\n\r\n    public void compressToZip(String s3folderName, Set&lt;Path&gt; distinctPaths, String efsPathWithFileName) throws Exception {\r\n\t\ttry(FileOutputStream fos = new FileOutputStream(efsPathWithFileName);\r\n\t\t\tZipOutputStream zos = new ZipOutputStream(fos)) {\r\n\t\t\tdistinctPaths.forEach(path -&gt; {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tzos.putNextEntry(new ZipEntry(path.getFileName().toString()));\r\n\t\t\t\t\tfinal FileInputStream fis = new FileInputStream(path.toFile());\r\n\t\t\t\t\tIOUtils.copy(fis, zos);\r\n\t\t\t\t\tzos.closeEntry();\r\n\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\t...\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (Exception e) {\r\n\t\t\t...\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t}\r\n    \r\ncalling method:\r\n\r\n    InputStream zippedIpStream = new FileInputStream(tempCompressedFilePath);\r\n\tsession.write(zippedIpStream, deliveryLocation.getLocation().getFolder() + &quot;/&quot; + fileNameToWrite);\r\n\t...\r\n    ...\t\t\t\t\t\t\r\n\tzippedIpStream.close();\r\n    ...\r\n    ...\r\n\tFiles.deleteIfExists(Paths.get(tempCompressedFilePath));","title":"Java heap out of memory issue while zipping list of nio paths","body":"<p>Changed the implementation to write the file into a file in local path and then send that file to sftp and then delete the temp zip file.</p>\n<pre><code>public void compressToZip(String s3folderName, Set&lt;Path&gt; distinctPaths, String efsPathWithFileName) throws Exception {\n    try(FileOutputStream fos = new FileOutputStream(efsPathWithFileName);\n        ZipOutputStream zos = new ZipOutputStream(fos)) {\n        distinctPaths.forEach(path -&gt; {\n            try {\n                zos.putNextEntry(new ZipEntry(path.getFileName().toString()));\n                final FileInputStream fis = new FileInputStream(path.toFile());\n                IOUtils.copy(fis, zos);\n                zos.closeEntry();\n            } catch (IOException e) {\n                ...\n            }\n        });\n    } catch (Exception e) {\n        ...\n        throw e;\n    }\n}\n</code></pre>\n<p>calling method:</p>\n<pre><code>InputStream zippedIpStream = new FileInputStream(tempCompressedFilePath);\nsession.write(zippedIpStream, deliveryLocation.getLocation().getFolder() + &quot;/&quot; + fileNameToWrite);\n...\n...                     \nzippedIpStream.close();\n...\n...\nFiles.deleteIfExists(Paths.get(tempCompressedFilePath));\n</code></pre>\n"}],"owner":{"account_id":4066772,"reputation":945,"user_id":3341400,"accept_rate":67,"display_name":"mwKART"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":714,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":69496429,"answer_count":1,"score":-1,"last_activity_date":1633698833,"creation_date":1633682062,"question_id":69492870,"body_markdown":"I am asynchronously running the below method to zip the given set of nio paths. When there are multiple tasks running, java heap out of memory exception is encountered. \r\n\r\n    public InputStream compressToZip(String s3folderName, Set&lt;Path&gt; paths) throws Exception {\r\n\t\ttry {\r\n\t\t\tByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n\t\t\tZipOutputStream zos = new ZipOutputStream(byteArrayOutputStream);\r\n\t\t\tpaths.forEach(path -&gt; {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tSystem.out.println(&quot;Zipping &quot; + path.getFileName());\r\n\t\t\t\t\tzos.putNextEntry(new ZipEntry(path.getFileName().toString()));\r\n\t\t\t\t\tFileInputStream ObjectInputStream = new FileInputStream(path.toFile());\r\n\t\t\t\t\tIOUtils.copy(ObjectInputStream, zos);\r\n\t\t\t\t\tzos.closeEntry();\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\t...\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tzos.close();\r\n\t\t\treturn new ByteArrayInputStream(byteArrayOutputStream.toByteArray());\r\n\t\t} catch (Exception e) {\r\n\t\t\t...\r\n\t\t}\r\n\t}\r\n\r\nThe input stream returned from this file will be written on sftp location.\r\n\r\n\r\n    org.springframework.integration.file.remote.session.Session session = this.createSession(deliveryType, deliveryLocation);    \r\n    zippedIpStream = fileCompressionSvc.compressToZip(s3folderName, fileDir);\r\n\tsession.write(zippedIpStream, deliveryLocation.getLocation().getFolder() + &quot;/&quot;\r\n\t\t\t\t\t\t\t\t\t+ getfileNameFormat(fileNameFormat, masterId) + &quot;.zip&quot;);\r\n\r\nI am not sure what went wrong to occur java heap issue. Could you please assist me.","title":"Java heap out of memory issue while zipping list of nio paths","body":"<p>I am asynchronously running the below method to zip the given set of nio paths. When there are multiple tasks running, java heap out of memory exception is encountered.</p>\n<pre><code>public InputStream compressToZip(String s3folderName, Set&lt;Path&gt; paths) throws Exception {\n    try {\n        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n        ZipOutputStream zos = new ZipOutputStream(byteArrayOutputStream);\n        paths.forEach(path -&gt; {\n            try {\n                System.out.println(&quot;Zipping &quot; + path.getFileName());\n                zos.putNextEntry(new ZipEntry(path.getFileName().toString()));\n                FileInputStream ObjectInputStream = new FileInputStream(path.toFile());\n                IOUtils.copy(ObjectInputStream, zos);\n                zos.closeEntry();\n            } catch (Exception e) {\n                ...\n            }\n        });\n        zos.close();\n        return new ByteArrayInputStream(byteArrayOutputStream.toByteArray());\n    } catch (Exception e) {\n        ...\n    }\n}\n</code></pre>\n<p>The input stream returned from this file will be written on sftp location.</p>\n<pre><code>org.springframework.integration.file.remote.session.Session session = this.createSession(deliveryType, deliveryLocation);    \nzippedIpStream = fileCompressionSvc.compressToZip(s3folderName, fileDir);\nsession.write(zippedIpStream, deliveryLocation.getLocation().getFolder() + &quot;/&quot;\n                                + getfileNameFormat(fileNameFormat, masterId) + &quot;.zip&quot;);\n</code></pre>\n<p>I am not sure what went wrong to occur java heap issue. Could you please assist me.</p>\n"},{"tags":["java","maven","dependencies","httpclient"],"comments":[{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1633689177,"post_id":69494394,"comment_id":122832501,"body_markdown":"Please don&#39;t use different versions for related dependencies. That is asking for trouble.","body":"Please don&#39;t use different versions for related dependencies. That is asking for trouble."},{"owner":{"account_id":17572094,"reputation":33,"user_id":12747654,"display_name":"oxicod"},"score":0,"creation_date":1633690251,"post_id":69494394,"comment_id":122832902,"body_markdown":"@Jo&#227;oDias I changed both dependencies to 4.4, Now I got the same error on a different class\nCaused by: java.lang.ClassNotFoundException: org.apache.http.HttpRequest from [Module &quot;deployment.adobe-livecycle-jboss.ear:main&quot; from Service Module Loader]","body":"@Jo&#227;oDias I changed both dependencies to 4.4, Now I got the same error on a different class Caused by: java.lang.ClassNotFoundException: org.apache.http.HttpRequest from [Module &quot;deployment.adobe-livecycle-jboss.ear:main&quot; from Service Module Loader]"}],"answers":[{"tags":[],"owner":{"account_id":7230356,"reputation":1512,"user_id":5517465,"accept_rate":100,"display_name":"Yassir Khaldi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633698782,"creation_date":1633691099,"answer_id":69494843,"question_id":69494394,"body_markdown":"This is probably caused by a faulty maven local repository. Try looking for your maven local repository (It&#39;s generally a hidden folder like named`.m2\\repository`), delete the folder `org\\apache\\httpcomponents` then clean compile your project.\r\n\r\n---\r\n**Edit:**\r\nAfter further explanation of the problem, it seems that this is a deployment issue not a build one.\r\n\r\nIf it&#39;s the first time that you use this package in your build, then this package&#39;s jar must be defined somewhere in the deployment server, it seems that you are deploying in an Adobe environment which seems to be based on JBoss because of that line of log that you provided \r\n```\r\n[Module &quot;deployment.adobe-livecycle-jboss.ear:main&quot; from Service Module Loader]\r\n```\r\n\r\nMake sure to read the documentation of that environment on how to configure and define external modules.","title":"ClassNotFoundException on Maven Dependency Class org.apache.http.client","body":"<p>This is probably caused by a faulty maven local repository. Try looking for your maven local repository (It's generally a hidden folder like named<code>.m2\\repository</code>), delete the folder <code>org\\apache\\httpcomponents</code> then clean compile your project.</p>\n<hr />\n<p><strong>Edit:</strong>\nAfter further explanation of the problem, it seems that this is a deployment issue not a build one.</p>\n<p>If it's the first time that you use this package in your build, then this package's jar must be defined somewhere in the deployment server, it seems that you are deploying in an Adobe environment which seems to be based on JBoss because of that line of log that you provided</p>\n<pre><code>[Module &quot;deployment.adobe-livecycle-jboss.ear:main&quot; from Service Module Loader]\n</code></pre>\n<p>Make sure to read the documentation of that environment on how to configure and define external modules.</p>\n"}],"owner":{"account_id":17572094,"reputation":33,"user_id":12747654,"display_name":"oxicod"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":936,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1633698782,"creation_date":1633688915,"question_id":69494394,"body_markdown":"I&#39;m trying to build a simple API client, which uses `org.apache.http`for connecting to the API server. Locally everything works fine. I&#39;m successfully connecting to the server and receive the data I want.\r\n\r\nBut, when I deploy my application to the server. I&#39;m getting following exception:\r\n`Caused by: java.lang.ClassNotFoundException: org.apache.http.client.ClientProtocolException from [Module &quot;deployment.adobe-livecycle-jboss.ear:main&quot; from Service Module Loader]`\r\n\r\nI tried multiple different variants of versions of my depencies. Right now im using the following:\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;httpcore&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.4.3&lt;/version&gt;\r\n\t&lt;scope&gt;compile&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n    \t\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.5.1&lt;/version&gt;\r\n\t&lt;scope&gt;compile&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nBoth of the JARs appear in my Java Build Path, also the class which is &quot;missing&quot; is found in there.\r\nEven when I build the project and search the JAR files libs folder, I can find the class...\r\n\r\nI know there are some solutions to find online but none of them helped me.","title":"ClassNotFoundException on Maven Dependency Class org.apache.http.client","body":"<p>I'm trying to build a simple API client, which uses <code>org.apache.http</code>for connecting to the API server. Locally everything works fine. I'm successfully connecting to the server and receive the data I want.</p>\n<p>But, when I deploy my application to the server. I'm getting following exception:\n<code>Caused by: java.lang.ClassNotFoundException: org.apache.http.client.ClientProtocolException from [Module &quot;deployment.adobe-livecycle-jboss.ear:main&quot; from Service Module Loader]</code></p>\n<p>I tried multiple different variants of versions of my depencies. Right now im using the following:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n    &lt;artifactId&gt;httpcore&lt;/artifactId&gt;\n    &lt;version&gt;4.4.3&lt;/version&gt;\n    &lt;scope&gt;compile&lt;/scope&gt;\n&lt;/dependency&gt;\n        \n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n    &lt;version&gt;4.5.1&lt;/version&gt;\n    &lt;scope&gt;compile&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Both of the JARs appear in my Java Build Path, also the class which is &quot;missing&quot; is found in there.\nEven when I build the project and search the JAR files libs folder, I can find the class...</p>\n<p>I know there are some solutions to find online but none of them helped me.</p>\n"},{"tags":["java","spring-boot","jackson","apache-camel"],"comments":[{"owner":{"account_id":1526071,"reputation":878,"user_id":1424488,"display_name":"fkurth"},"score":0,"creation_date":1600153168,"post_id":45490796,"comment_id":112989971,"body_markdown":"Do you have an answer yet?","body":"Do you have an answer yet?"}],"owner":{"account_id":11117547,"reputation":51,"user_id":8161438,"display_name":"marusia.ua"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":773,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":0,"score":5,"last_activity_date":1633698714,"creation_date":1501780705,"question_id":45490796,"body_markdown":"I have a SpringBoot application, using Camel for routing.\r\nFor configuring jackson xmlMapper, I have the following spring bean:\r\n\r\n    @Bean\r\n    public XmlMapper xmlMapper() {\r\n        XmlMapper xmlMapper = new XmlMapper();\r\n        xmlMapper.setSerializationInclusion(JsonInclude.Include.NON_EMPTY);\r\n        return xmlMapper;\r\n    }\r\nAnd I want Camel to use this mapper when unmarshalling received POJOs as following:\r\n\r\n    from(&quot;direct:myRoute&quot;)\r\n         .marshal().jacksonxml()\r\n         .inOnly(&quot;activemq:outputQueue&quot;);\r\n\r\nBut it doesn&#39;t work this way: null fields are present in marshalled xml.\r\nCamel documentation offers to use JacksonXMLDataFormat as following:\r\n\r\n    JacksonXMLDataFormat format = new JacksonXMLDataFormat();\r\n    format.setInclude(&quot;NON_NULL&quot;);\r\n    from(&quot;direct:myRoute&quot;)\r\n         .marshal(format)\r\n         .inOnly(&quot;activemq:outputQueue&quot;);\r\nIt works, but I have to specify dataFormat each time I marshal something, and it gets trickier with unmarshalling.\r\n\r\nIs there a unified way to configure Camel&#39;s xmlMapper?\r\n\r\n","title":"How to configure Camel&#39;s jackson XmlMapper?","body":"<p>I have a SpringBoot application, using Camel for routing.\nFor configuring jackson xmlMapper, I have the following spring bean:</p>\n\n<pre><code>@Bean\npublic XmlMapper xmlMapper() {\n    XmlMapper xmlMapper = new XmlMapper();\n    xmlMapper.setSerializationInclusion(JsonInclude.Include.NON_EMPTY);\n    return xmlMapper;\n}\n</code></pre>\n\n<p>And I want Camel to use this mapper when unmarshalling received POJOs as following:</p>\n\n<pre><code>from(\"direct:myRoute\")\n     .marshal().jacksonxml()\n     .inOnly(\"activemq:outputQueue\");\n</code></pre>\n\n<p>But it doesn't work this way: null fields are present in marshalled xml.\nCamel documentation offers to use JacksonXMLDataFormat as following:</p>\n\n<pre><code>JacksonXMLDataFormat format = new JacksonXMLDataFormat();\nformat.setInclude(\"NON_NULL\");\nfrom(\"direct:myRoute\")\n     .marshal(format)\n     .inOnly(\"activemq:outputQueue\");\n</code></pre>\n\n<p>It works, but I have to specify dataFormat each time I marshal something, and it gets trickier with unmarshalling.</p>\n\n<p>Is there a unified way to configure Camel's xmlMapper?</p>\n"},{"tags":["java","substring"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1633697183,"post_id":69496013,"comment_id":122835460,"body_markdown":"Look into `String.split`","body":"Look into <code>String.split</code>"}],"answers":[{"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1633697664,"creation_date":1633697664,"answer_id":69496182,"question_id":69496013,"body_markdown":"You can use substring with lastIndexOf and split like this:\r\n\r\n    times.substring(time.lastIndexOf(&quot;,&quot;)).split(&quot;:&quot;)[1]\r\n\r\n**Demo**\r\n\r\n    String[] times = {&quot;6:10000:first,12:12000:second,18:15000:third&quot;,\r\n            &quot;6:10000:first,12:12000:second,18:15000:third,24:20000:fourth&quot;,\r\n            &quot;6:10000:first,12:12000:second,18:15000:third,24:20000:fourth,30:30000:fourth&quot;\r\n    };\r\n    for (String time : times) {\r\n        System.out.println(\r\n                time.substring(time.lastIndexOf(&quot;,&quot;)).split(&quot;:&quot;)[1]\r\n        );\r\n    }\r\n\r\n**Outputs**\r\n\r\n    15000\r\n    20000\r\n    30000","title":"Obtaining a substring value for a delimited String of unknown length","body":"<p>You can use substring with lastIndexOf and split like this:</p>\n<pre><code>times.substring(time.lastIndexOf(&quot;,&quot;)).split(&quot;:&quot;)[1]\n</code></pre>\n<p><strong>Demo</strong></p>\n<pre><code>String[] times = {&quot;6:10000:first,12:12000:second,18:15000:third&quot;,\n        &quot;6:10000:first,12:12000:second,18:15000:third,24:20000:fourth&quot;,\n        &quot;6:10000:first,12:12000:second,18:15000:third,24:20000:fourth,30:30000:fourth&quot;\n};\nfor (String time : times) {\n    System.out.println(\n            time.substring(time.lastIndexOf(&quot;,&quot;)).split(&quot;:&quot;)[1]\n    );\n}\n</code></pre>\n<p><strong>Outputs</strong></p>\n<pre><code>15000\n20000\n30000\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633698168,"creation_date":1633698168,"answer_id":69496280,"question_id":69496013,"body_markdown":"You can use [regular expression][1].\r\n```java\r\nString times = &quot;6:10000:first,12:12000:second,18:15000:third,24:20000:fourth,30:30000:fourth&quot;;\r\njava.util.regex.Pattern pttrn = java.util.regex.Pattern.compile(&quot;(\\\\d+):[a-z]+$&quot;);\r\njava.util.regex.Matcher mtchr = pttrn.matcher(times);\r\nif (mtchr.find()) {\r\n    System.out.println(mtchr.group(1));\r\n}\r\nelse {\r\n    System.out.println(&quot;Nothing found.&quot;);\r\n}\r\n```\r\nExplanation of the pattern\r\n* `(\\\\d+)` a string of one or more digits.\r\n* `:` the colon character\r\n* `[a-z]+` one or more lowercase letters\r\n* `$` the end of the input string\r\n\r\nSo the pattern looks for digits followed by a colon followed by lowercase letters at the end of the input string. It also groups the digits.\r\n\r\nIt works for every sample string in your question.\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/regex/","title":"Obtaining a substring value for a delimited String of unknown length","body":"<p>You can use <a href=\"https://docs.oracle.com/javase/tutorial/essential/regex/\" rel=\"nofollow noreferrer\">regular expression</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String times = &quot;6:10000:first,12:12000:second,18:15000:third,24:20000:fourth,30:30000:fourth&quot;;\njava.util.regex.Pattern pttrn = java.util.regex.Pattern.compile(&quot;(\\\\d+):[a-z]+$&quot;);\njava.util.regex.Matcher mtchr = pttrn.matcher(times);\nif (mtchr.find()) {\n    System.out.println(mtchr.group(1));\n}\nelse {\n    System.out.println(&quot;Nothing found.&quot;);\n}\n</code></pre>\n<p>Explanation of the pattern</p>\n<ul>\n<li><code>(\\\\d+)</code> a string of one or more digits.</li>\n<li><code>:</code> the colon character</li>\n<li><code>[a-z]+</code> one or more lowercase letters</li>\n<li><code>$</code> the end of the input string</li>\n</ul>\n<p>So the pattern looks for digits followed by a colon followed by lowercase letters at the end of the input string. It also groups the digits.</p>\n<p>It works for every sample string in your question.</p>\n"}],"owner":{"account_id":1574741,"reputation":1753,"user_id":1461517,"accept_rate":47,"display_name":"Steerpike"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69496182,"answer_count":2,"score":1,"last_activity_date":1633698321,"creation_date":1633696885,"question_id":69496013,"body_markdown":"Given the String data, delimited by `:` and comma separated\r\n\r\n    String times =  6:10000:first,12:12000:second,18:15000:third\r\n\r\nI need to get the third value from the last comma separated list, in this above case `15000` \r\n\r\nOr `20000` in the below case\r\n\r\n    String times =  6:10000:first,12:12000:second,18:15000:third,24:20000:fourth\r\n\r\nOr `30000` in the below case\r\n\r\n    String times =  \r\n             6:10000:first,12:12000:second,18:15000:third,24:20000:fourth,30:30000:fourth\r\n\r\nSomething like:\r\n\r\n    public String getLastTimeFromCommaSeparatedList() {\r\n        return times.substring(mileages.lastIndexOf(&#39;:&#39;) + 2);\r\n    }\r\n\r\nI&#39;m unclear how I can get the value I need, given the comma separated list is of an unknown length.","title":"Obtaining a substring value for a delimited String of unknown length","body":"<p>Given the String data, delimited by <code>:</code> and comma separated</p>\n<pre><code>String times =  6:10000:first,12:12000:second,18:15000:third\n</code></pre>\n<p>I need to get the third value from the last comma separated list, in this above case <code>15000</code></p>\n<p>Or <code>20000</code> in the below case</p>\n<pre><code>String times =  6:10000:first,12:12000:second,18:15000:third,24:20000:fourth\n</code></pre>\n<p>Or <code>30000</code> in the below case</p>\n<pre><code>String times =  \n         6:10000:first,12:12000:second,18:15000:third,24:20000:fourth,30:30000:fourth\n</code></pre>\n<p>Something like:</p>\n<pre><code>public String getLastTimeFromCommaSeparatedList() {\n    return times.substring(mileages.lastIndexOf(':') + 2);\n}\n</code></pre>\n<p>I'm unclear how I can get the value I need, given the comma separated list is of an unknown length.</p>\n"},{"tags":["java","udp"],"answers":[{"tags":[],"owner":{"account_id":1474271,"reputation":1908,"user_id":1385083,"accept_rate":57,"display_name":"Jamie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633698257,"creation_date":1633698257,"answer_id":69496302,"question_id":69496021,"body_markdown":"Do you have separate objects for each tank? It doesn&#39;t appear so.  It looks to me like you have one `run` loop to read messages for all 4 tanks, and all tanks are sharing the same class object fields.  If that is the case, then you are probably constantly overwriting the member fields when another packet arrives.\r\n\r\nYou should probably consider creating a separate Tank class.\r\n\r\nEG.,\r\n\r\n    class Tank\r\n    {\r\n        int x;\r\n        int y;\r\n        int direction;\r\n    }\r\n\r\nThen, create an array, list, or map of tanks.\r\n\r\n    Tank[] tanks = new Tank[4];\r\n    for(int i=0;i&lt;tanks.length;i++)\r\n    {\r\n        tanks[i] = new Tank();\r\n    }\r\n\r\nWhen you receive a message, you would have to choose what tank to update. Here is an example using an array.  \r\n\r\n    String[] msg= messagereceived.split(&quot;,&quot;);    \r\n    if(msg[0].equalsIgnoreCase(&quot;playtank&quot;)) {\r\n        tankno=Integer.parseInt(msg[1]);\r\n        // Choose which tank to update\r\n        Tank tank = tanks[tankno];\r\n        tank.x=Integer.parseInt(msg[2]);\r\n        etc...\r\n\r\nBy creating a separate object for each tank, you will keep each tank&#39;s data isolated from the others, and won&#39;t have a problem with data being overwritten.\r\n    ","title":"parsing and processing the received messages properly in java udp","body":"<p>Do you have separate objects for each tank? It doesn't appear so.  It looks to me like you have one <code>run</code> loop to read messages for all 4 tanks, and all tanks are sharing the same class object fields.  If that is the case, then you are probably constantly overwriting the member fields when another packet arrives.</p>\n<p>You should probably consider creating a separate Tank class.</p>\n<p>EG.,</p>\n<pre><code>class Tank\n{\n    int x;\n    int y;\n    int direction;\n}\n</code></pre>\n<p>Then, create an array, list, or map of tanks.</p>\n<pre><code>Tank[] tanks = new Tank[4];\nfor(int i=0;i&lt;tanks.length;i++)\n{\n    tanks[i] = new Tank();\n}\n</code></pre>\n<p>When you receive a message, you would have to choose what tank to update. Here is an example using an array.</p>\n<pre><code>String[] msg= messagereceived.split(&quot;,&quot;);    \nif(msg[0].equalsIgnoreCase(&quot;playtank&quot;)) {\n    tankno=Integer.parseInt(msg[1]);\n    // Choose which tank to update\n    Tank tank = tanks[tankno];\n    tank.x=Integer.parseInt(msg[2]);\n    etc...\n</code></pre>\n<p>By creating a separate object for each tank, you will keep each tank's data isolated from the others, and won't have a problem with data being overwritten.</p>\n"}],"owner":{"account_id":15416464,"reputation":11,"user_id":11121785,"display_name":"Recai Furfur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1633698257,"creation_date":1633696917,"question_id":69496021,"body_markdown":"my multiplayer tank game has an issue. the client side tanks are not drew properly. the last one senden from server is good. but the others are blinking. i found the problem in client. when parsing the messages it gets the tanks x, y coordinates and direction with right queue. but when i send them to draw method it gets the last one. when i write the x,y coordinates in draw method the vast majority of x and y&#39;s are belong to last tank. so the last tank doesnt blink but the others are blinking. here is my code;\r\n\r\n     public void run() {\r\n    \tbyte[] data= new byte[1024];\r\n    \twhile(true) {\r\n    \ttry { \r\n    \t\t DatagramPacket packetreceived = new DatagramPacket(data, data.length);\r\n    \tsoket.receive(packetreceived); \r\n    \tmessagereceived=new String(packetreceived.getData(),0,packetreceived.getLength());\r\n    \t\r\n    \tsetmesaj(messagereceived);\r\n    \t\r\n    \tparsemessage(messagereceived);\r\n    \t\r\n    \t\r\n    \t\r\n    \t} catch (IOException e) {\r\n    \t\t// TODO Auto-generated catch block\r\n    \t\te.printStackTrace();\r\n    \t}\r\n    \t//soket.close();\r\n    }}\r\n    public String incomingmessage() {\r\n    \treturn messagereceived;\r\n    }\r\n    public void setmesaj(String messagereceived) {\r\n    \tthis.messagereceived=messagereceived;\r\n    }\r\n    \r\n    public void senddata(byte[] data) {\r\n    \t\r\n    \ttry {DatagramPacket packet = new DatagramPacket(data, data.length,host,port );\r\n    \t\tsoket.send(packet);\r\n    \t} catch (IOException e) {\r\n    \t\t// TODO Auto-generated catch block\r\n    \t\te.printStackTrace();\r\n    \t}\r\n    }\r\n    \r\n    \r\n    public void parsemessage(String messagereceived) {\r\n    \t\r\n    \tString[] msg= messagereceived.split(&quot;,&quot;);\t \r\n    \tif(msg[0].equalsIgnoreCase(&quot;playtank&quot;)) {\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\ttankno=Integer.parseInt(msg[1]);\r\n    \t\tsetTankno(Integer.parseInt(msg[1]));\r\n    \t\tswitch(tankno) {\r\n    \t\tdefault:\r\n    \t\tx=Integer.parseInt(msg[2]);\r\n    \t\ty=Integer.parseInt(msg[3]);\r\n    \t\tdirection=Integer.parseInt(msg[4]);\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \tif(msg[0].equalsIgnoreCase(&quot;addnewtanks&quot;)) {\r\n    \t\tthis.tankno=Integer.parseInt(msg[1]);\r\n    \t\tthis.x=Integer.parseInt(msg[2]);\r\n    \t\tthis.y=Integer.parseInt(msg[3]);\r\n    \t\tthis.direction=Integer.parseInt(msg[4]);\r\n    \t\tthis.health=Integer.parseInt(msg[5]);\r\n    \t\tthis.say=Integer.parseInt(msg[6]);\r\n    \t\tthis.tip=Integer.parseInt(msg[7]);\r\n    \t}\r\n    \tSystem.out.println(this.x+&quot;     &quot;+this.y+&quot;     &quot;+this.tankno);\r\n    ** when i write these values, it is written properly to console everything is ok**\r\n    }\r\n    \r\n    public int getX() {\r\n    \treturn x;\r\n    }\r\n    \r\n    public void setX(int x) {\r\n    \tthis.x = x;\r\n    }\r\n    \r\n    public int getY() {\r\n    \treturn y;\r\n    }\r\n    \r\n    public void setY(int y) {\r\n    \tthis.y = y;\r\n    }\r\n    \r\n    public int getdir() {\r\n    \treturn direction;\r\n    }\r\n    \r\n    public void setdir(int direction) {\r\n    \tthis.direction = direction;\r\n    }\r\n    \r\n    public int getTankno() {\r\n    \treturn tankno;\r\n    }\r\n    \r\n    public void setTankno(int tankno) {\r\n    \tthis.tankno = tankno;\r\n    }\r\n    \r\n    public void draw(Graphics g,Bufferedimagex bf1) {\r\n    \t//System.out.println(this.x+&quot;  &quot;+this.y+&quot;   &quot;+this.tankno);\r\n    **when the values are written here most of the written value on the console is the third one (there are 0,1,2,3 tanks).**\r\n    \tg.drawImage(bf1.sprite(this.getdir()*32-32, this.tip*16), this.getX(), this.getY(), 48, 48,null); \r\n    \t\r\n    }","title":"parsing and processing the received messages properly in java udp","body":"<p>my multiplayer tank game has an issue. the client side tanks are not drew properly. the last one senden from server is good. but the others are blinking. i found the problem in client. when parsing the messages it gets the tanks x, y coordinates and direction with right queue. but when i send them to draw method it gets the last one. when i write the x,y coordinates in draw method the vast majority of x and y's are belong to last tank. so the last tank doesnt blink but the others are blinking. here is my code;</p>\n<pre><code> public void run() {\n    byte[] data= new byte[1024];\n    while(true) {\n    try { \n         DatagramPacket packetreceived = new DatagramPacket(data, data.length);\n    soket.receive(packetreceived); \n    messagereceived=new String(packetreceived.getData(),0,packetreceived.getLength());\n    \n    setmesaj(messagereceived);\n    \n    parsemessage(messagereceived);\n    \n    \n    \n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n    //soket.close();\n}}\npublic String incomingmessage() {\n    return messagereceived;\n}\npublic void setmesaj(String messagereceived) {\n    this.messagereceived=messagereceived;\n}\n\npublic void senddata(byte[] data) {\n    \n    try {DatagramPacket packet = new DatagramPacket(data, data.length,host,port );\n        soket.send(packet);\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n}\n\n\npublic void parsemessage(String messagereceived) {\n    \n    String[] msg= messagereceived.split(&quot;,&quot;);    \n    if(msg[0].equalsIgnoreCase(&quot;playtank&quot;)) {\n        \n        \n        \n        tankno=Integer.parseInt(msg[1]);\n        setTankno(Integer.parseInt(msg[1]));\n        switch(tankno) {\n        default:\n        x=Integer.parseInt(msg[2]);\n        y=Integer.parseInt(msg[3]);\n        direction=Integer.parseInt(msg[4]);\n        }\n        \n    }\n    if(msg[0].equalsIgnoreCase(&quot;addnewtanks&quot;)) {\n        this.tankno=Integer.parseInt(msg[1]);\n        this.x=Integer.parseInt(msg[2]);\n        this.y=Integer.parseInt(msg[3]);\n        this.direction=Integer.parseInt(msg[4]);\n        this.health=Integer.parseInt(msg[5]);\n        this.say=Integer.parseInt(msg[6]);\n        this.tip=Integer.parseInt(msg[7]);\n    }\n    System.out.println(this.x+&quot;     &quot;+this.y+&quot;     &quot;+this.tankno);\n** when i write these values, it is written properly to console everything is ok**\n}\n\npublic int getX() {\n    return x;\n}\n\npublic void setX(int x) {\n    this.x = x;\n}\n\npublic int getY() {\n    return y;\n}\n\npublic void setY(int y) {\n    this.y = y;\n}\n\npublic int getdir() {\n    return direction;\n}\n\npublic void setdir(int direction) {\n    this.direction = direction;\n}\n\npublic int getTankno() {\n    return tankno;\n}\n\npublic void setTankno(int tankno) {\n    this.tankno = tankno;\n}\n\npublic void draw(Graphics g,Bufferedimagex bf1) {\n    //System.out.println(this.x+&quot;  &quot;+this.y+&quot;   &quot;+this.tankno);\n**when the values are written here most of the written value on the console is the third one (there are 0,1,2,3 tanks).**\n    g.drawImage(bf1.sprite(this.getdir()*32-32, this.tip*16), this.getX(), this.getY(), 48, 48,null); \n    \n}\n</code></pre>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":7089168,"reputation":157118,"user_id":5424988,"display_name":"The fourth bird"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1633698236,"creation_date":1633695714,"answer_id":69495772,"question_id":69495598,"body_markdown":"You can match both lines and use 2 capture groups using a negated character class `[^&quot;]` as `\\S` does not match the spaces between the double quotes. \r\n\r\nThen concat the 2 capture groups with a `/`\r\n\r\n    cwd=&quot;([^&quot;]*)&quot;.*\\R.*?name=&quot;([^&quot;]*)&quot;\r\n\r\n- `cwd=&quot;([^&quot;]*)&quot;` Capture the content between double quotes after `cwd=&quot;` in group 1\r\n- `.*\\R` Match the rest of the line and a newline\r\n- `.*?name=&quot;([^&quot;]*)&quot;` Match as least as possible chars, match `name=&quot;` and capture the contents between the double quotes in group 2\r\n\r\n[Java demo](https://ideone.com/dyeKtG) | [Regex demo](https://regex101.com/r/0vrOMs/1)\r\n\r\n    String regex = &quot;cwd=\\&quot;([^\\&quot;]*)\\&quot;.*\\\\R.*?name=\\&quot;([^\\&quot;]*)\\&quot;&quot;;\r\n    String string = &quot;type=CWD&lt;some text&gt;cwd=\\&quot;something within double quotes\\&quot;&lt;some text&gt;&lt;enter&gt;\\n&quot;\r\n        + &quot;type=PATH&lt;some text&gt;name=\\&quot;something within double quotes\\&quot;&lt;some text&gt;&quot;;\r\n    \r\n    Pattern pattern = Pattern.compile(regex);\r\n    Matcher matcher = pattern.matcher(string);\r\n    \r\n    if (matcher.find()) {\r\n        System.out.println(matcher.group(1) + &quot;/&quot; + matcher.group(2));\r\n    }\r\n\r\nOutput\r\n\r\n    something within double quotes/something within double quotes\r\n\r\n&lt;hr&gt;\r\n\r\nFor the values on a single line, and the second part can optionally start with `/`, you can optionally match the forward slash outside of the second group so that it would not be there when concatenating group 1 and group 2 having double `//`\r\n\r\n    String regex = &quot;\\\\\\&quot;(\\\\S*)\\\\\\&quot;.*?\\\\\\&quot;/?(\\\\S*)\\\\\\&quot;&quot;;\r\n    String string = &quot;cwd=\\&quot;/root\\&quot; name=\\&quot;/msv_backup/archives/auditlogs\\&quot;&quot;;\r\n    \r\n    Pattern pattern = Pattern.compile(regex);\r\n    Matcher matcher = pattern.matcher(string);\r\n    \r\n    if (matcher.find()) {\r\n        System.out.println(matcher.group(1) + &quot;/&quot; + matcher.group(2));\r\n    }\r\n\r\nOutput\r\n\r\n    /root/msv_backup/archives/auditlogs\r\n\r\n[Java demo](https://ideone.com/bK5nXA) | [REgex demo](https://regex101.com/r/Cfb8Sy/1)","title":"Java Regex expression to append two strings","body":"<p>You can match both lines and use 2 capture groups using a negated character class <code>[^&quot;]</code> as <code>\\S</code> does not match the spaces between the double quotes.</p>\n<p>Then concat the 2 capture groups with a <code>/</code></p>\n<pre><code>cwd=&quot;([^&quot;]*)&quot;.*\\R.*?name=&quot;([^&quot;]*)&quot;\n</code></pre>\n<ul>\n<li><code>cwd=&quot;([^&quot;]*)&quot;</code> Capture the content between double quotes after <code>cwd=&quot;</code> in group 1</li>\n<li><code>.*\\R</code> Match the rest of the line and a newline</li>\n<li><code>.*?name=&quot;([^&quot;]*)&quot;</code> Match as least as possible chars, match <code>name=&quot;</code> and capture the contents between the double quotes in group 2</li>\n</ul>\n<p><a href=\"https://ideone.com/dyeKtG\" rel=\"nofollow noreferrer\">Java demo</a> | <a href=\"https://regex101.com/r/0vrOMs/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n<pre><code>String regex = &quot;cwd=\\&quot;([^\\&quot;]*)\\&quot;.*\\\\R.*?name=\\&quot;([^\\&quot;]*)\\&quot;&quot;;\nString string = &quot;type=CWD&lt;some text&gt;cwd=\\&quot;something within double quotes\\&quot;&lt;some text&gt;&lt;enter&gt;\\n&quot;\n    + &quot;type=PATH&lt;some text&gt;name=\\&quot;something within double quotes\\&quot;&lt;some text&gt;&quot;;\n\nPattern pattern = Pattern.compile(regex);\nMatcher matcher = pattern.matcher(string);\n\nif (matcher.find()) {\n    System.out.println(matcher.group(1) + &quot;/&quot; + matcher.group(2));\n}\n</code></pre>\n<p>Output</p>\n<pre><code>something within double quotes/something within double quotes\n</code></pre>\n<hr>\n<p>For the values on a single line, and the second part can optionally start with <code>/</code>, you can optionally match the forward slash outside of the second group so that it would not be there when concatenating group 1 and group 2 having double <code>//</code></p>\n<pre><code>String regex = &quot;\\\\\\&quot;(\\\\S*)\\\\\\&quot;.*?\\\\\\&quot;/?(\\\\S*)\\\\\\&quot;&quot;;\nString string = &quot;cwd=\\&quot;/root\\&quot; name=\\&quot;/msv_backup/archives/auditlogs\\&quot;&quot;;\n\nPattern pattern = Pattern.compile(regex);\nMatcher matcher = pattern.matcher(string);\n\nif (matcher.find()) {\n    System.out.println(matcher.group(1) + &quot;/&quot; + matcher.group(2));\n}\n</code></pre>\n<p>Output</p>\n<pre><code>/root/msv_backup/archives/auditlogs\n</code></pre>\n<p><a href=\"https://ideone.com/bK5nXA\" rel=\"nofollow noreferrer\">Java demo</a> | <a href=\"https://regex101.com/r/Cfb8Sy/1\" rel=\"nofollow noreferrer\">REgex demo</a></p>\n"}],"owner":{"account_id":15221211,"reputation":1,"user_id":10983042,"display_name":"hitesh adabala "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":277,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1633698236,"creation_date":1633694851,"question_id":69495598,"body_markdown":"I need to monitor a log file which will give me lines in the following way...\r\n\r\n    type=CWD&lt;some text&gt;cwd=&quot;something within double quotes&quot;&lt;some text&gt;&lt;enter&gt;\r\n    type=PATH&lt;some text&gt;name=&quot;something within double quotes&quot;&lt;some text&gt;\r\n\r\nNow I need a regex expression which will take those two variables in double quotes and append them to form a single string with a &#39;/&#39; in between \r\nEg: I need `&lt;cwd_vale&gt;/&lt;name_value&gt;`\r\n\r\n`(\\&quot;\\S*\\&quot;)(\\&quot;\\S*\\&quot;)` will give two strings within double quotes to two groups\r\nI want the way to append these strings. Help is so very welcomed!","title":"Java Regex expression to append two strings","body":"<p>I need to monitor a log file which will give me lines in the following way...</p>\n<pre><code>type=CWD&lt;some text&gt;cwd=&quot;something within double quotes&quot;&lt;some text&gt;&lt;enter&gt;\ntype=PATH&lt;some text&gt;name=&quot;something within double quotes&quot;&lt;some text&gt;\n</code></pre>\n<p>Now I need a regex expression which will take those two variables in double quotes and append them to form a single string with a '/' in between\nEg: I need <code>&lt;cwd_vale&gt;/&lt;name_value&gt;</code></p>\n<p><code>(\\&quot;\\S*\\&quot;)(\\&quot;\\S*\\&quot;)</code> will give two strings within double quotes to two groups\nI want the way to append these strings. Help is so very welcomed!</p>\n"},{"tags":["java","arrays","loops","for-loop","pseudocode"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1633611998,"post_id":69481709,"comment_id":122809972,"body_markdown":"Look at the code after the loop. Also think about what `size` and `maxSize`represent. You are on the right track on the loop condition not being correct but for the wrong reason. Think about what would happen for `i == size` when `size == maxSize` and you want to access the original array.","body":"Look at the code after the loop. Also think about what <code>size</code> and <code>maxSize</code>represent. You are on the right track on the loop condition not being correct but for the wrong reason. Think about what would happen for <code>i == size</code> when <code>size == maxSize</code> and you want to access the original array."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1633612357,"post_id":69481709,"comment_id":122810155,"body_markdown":"Ideally just play the code through in your head and think about how each of the changes would change the code. As an example: if `size == maxsize ` wouldn&#39;t `for (i = 0; i &lt;= size ; i++)` and `or (i = 0 ; i &lt;= maxsize ; i++)` be essentially be the same?","body":"Ideally just play the code through in your head and think about how each of the changes would change the code. As an example: if <code>size == maxsize </code> wouldn&#39;t <code>for (i = 0; i &lt;= size ; i++)</code> and <code>or (i = 0 ; i &lt;= maxsize ; i++)</code> be essentially be the same?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1633612449,"post_id":69481709,"comment_id":122810199,"body_markdown":"I actually see 1 bug and 1 potential but in the code but none of the solutions would address any of those...","body":"I actually see 1 bug and 1 potential but in the code but none of the solutions would address any of those..."},{"owner":{"account_id":22960637,"reputation":1,"user_id":17090565,"display_name":"compsci9298233"},"score":0,"creation_date":1633614002,"post_id":69481709,"comment_id":122810940,"body_markdown":"But arr[size++] = val; means size increments and so when it&#39;s 16 if will enter the if statement. Also those were the options i was given.","body":"But arr[size++] = val; means size increments and so when it&#39;s 16 if will enter the if statement. Also those were the options i was given."},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1633614351,"post_id":69481709,"comment_id":122811100,"body_markdown":"What happens in the loop when the `size == 16`, the length of array `arr` is 16 and you try to get an element `arr[16]`?","body":"What happens in the loop when the <code>size == 16</code>, the length of array <code>arr</code> is 16 and you try to get an element <code>arr[16]</code>?"},{"owner":{"account_id":21825332,"reputation":1219,"user_id":16120911,"display_name":"sittsering"},"score":1,"creation_date":1633614447,"post_id":69481709,"comment_id":122811130,"body_markdown":"`size` is used as index of array in here, so it&#39;ll begin from 0, incrementing each time. So, when it becomes 16, it means 16 elements are there in array and last index is 15, ie, arr[15]. As @Thomas pointed out, when `i==size` meaning arr[16] which will result in `ArrayIndexOutOfBoundsException`. Instead of `for(i=0; i &lt;= size ;i++)`, it should be `for(i=0; i &lt; size ;i++)` but it&#39;s not there in the options.","body":"<code>size</code> is used as index of array in here, so it&#39;ll begin from 0, incrementing each time. So, when it becomes 16, it means 16 elements are there in array and last index is 15, ie, arr[15]. As @Thomas pointed out, when <code>i==size</code> meaning arr[16] which will result in <code>ArrayIndexOutOfBoundsException</code>. Instead of <code>for(i=0; i &lt;= size ;i++)</code>, it should be <code>for(i=0; i &lt; size ;i++)</code> but it&#39;s not there in the options."},{"owner":{"account_id":22960637,"reputation":1,"user_id":17090565,"display_name":"compsci9298233"},"score":0,"creation_date":1633616173,"post_id":69481709,"comment_id":122811923,"body_markdown":"This is pseudocode so it doesn&#39;t have to be exact. Now im thinking Line 13 should come before line 10, as max size being multiplied by 2 shouldn&#39;t happen inside a loop","body":"This is pseudocode so it doesn&#39;t have to be exact. Now im thinking Line 13 should come before line 10, as max size being multiplied by 2 shouldn&#39;t happen inside a loop"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1633617363,"post_id":69481709,"comment_id":122812506,"body_markdown":"`maxsize = maxsize*2;` isn&#39;t part of the loop, only `newArr[i] = arr[i];` is (if there are no braces only the first statement is inside the loop - to avoid confusion I advocate using braces all the time).","body":"<code>maxsize = maxsize*2;</code> isn&#39;t part of the loop, only <code>newArr[i] = arr[i];</code> is (if there are no braces only the first statement is inside the loop - to avoid confusion I advocate using braces all the time)."},{"owner":{"account_id":21825332,"reputation":1219,"user_id":16120911,"display_name":"sittsering"},"score":0,"creation_date":1633617719,"post_id":69481709,"comment_id":122812664,"body_markdown":"@compsci9298233 I&#39;m not talking about syntactical error, it&#39;s logical error.","body":"@compsci9298233 I&#39;m not talking about syntactical error, it&#39;s logical error."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1633618602,"post_id":69481709,"comment_id":122813026,"body_markdown":"Depending on how you&#39;ve been given the options and how you are meant to respond they might try to throw you off (i.e. you shouldn&#39;t rely on multiple choice) and expect you to answer &quot;none of these options fixes the bug&quot; - that&#39;s what I would do to interns and students ;)","body":"Depending on how you&#39;ve been given the options and how you are meant to respond they might try to throw you off (i.e. you shouldn&#39;t rely on multiple choice) and expect you to answer &quot;none of these options fixes the bug&quot; - that&#39;s what I would do to interns and students ;)"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1633619825,"post_id":69481709,"comment_id":122813613,"body_markdown":"Downvoted because this is the same question as https://stackoverflow.com/questions/69472849/coding-a-loop-inside-of-an-array-in-pseudocode from the same OP","body":"Downvoted because this is the same question as <a href=\"https://stackoverflow.com/questions/69472849/coding-a-loop-inside-of-an-array-in-pseudocode\" title=\"coding a loop inside of an array in pseudocode\">stackoverflow.com/questions/69472849/&hellip;</a> from the same OP"}],"answers":[{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633698234,"creation_date":1633617769,"answer_id":69483143,"question_id":69481709,"body_markdown":"Ok, let&#39;s analyze the pseudo code a litte. Given this is pseudo code we&#39;ll not focus syntax errors but on logical ones (or design problems).\r\n\r\nFirst, this looks like an implementation for an arraylist, i.e. internally it keeps an array and doubles it if more space is needed. It also keeps the current size of the list as `size`.\r\n\r\n    //this is ok since at tehe beginning there are no elements in the array\r\n    private int size = 0; \r\n\r\n    //initial capacity of the array, ok too\r\n    private int maxsize = 16; \r\n\r\n    //an array of elements with value 0, ok too\r\n    private int[] arr = new int[maxsize]; \r\n\r\n    //ok but a potential bug: what is list used for?\r\n    public void append(val, list) \r\n    {\r\n        //if the size of the list hits the capacity, we need to increase space, so this is ok\r\n       if (size == maxsize)\r\n       {\r\n          //we create a new array with 2x the previous size, ok as well\r\n          int[] newArr = new int[maxsize * 2]; \r\n\r\n          //we&#39;re looping and copying the elements from the old array to the new one\r\n          //bug: for i == size it would try to access arr[size] which is out of bounds\r\n          //fix: use i &lt; size or even i &lt; maxsize if you have to\r\n          for (i = 0; i &lt;= size ; i++) \r\n            newArr[i] = arr[i];\r\n\r\n          //move the references to &quot;point&quot; to the new array - ok\r\n          arr = newArr;\r\n  \r\n          //double capacity - could have been better but ok here\r\n          maxsize = maxsize*2;\r\n       }\r\n \r\n       //add a new element at the index right after the last (i.e. size) and increase size by 1\r\n       arr[size++] = val;\r\n    }\r\n\r\nNow the options:\r\n\r\n&gt; Line 1 should read: `private int size = 16;`\r\n\r\nThis would cause the array to be doubled when the first element is added and would cause the first 16 elements to be &quot;empty&quot; (0). And it would not fix the bug.\r\n\r\n&gt; Line 7 should read: `if (size &gt; maxsize)`\r\n\r\nThis should never be true because `arr[size++]` would throw an exception when `size == maxsize`. It would also not fix the bug.\r\n\r\n&gt; Line 10 should read: `for (i = 0 ; i &lt;= maxsize ; i++)`\r\n\r\nThis is essentially the same as `for (i = 0 ; i &lt;= size ; i++)` because it is only executed if `size == maxsize`. It contains the same bug and does not fix it.\r\n\r\n&gt; Line 13 should come before line 10\r\n\r\nThis wouldn&#39;t change much if I identified the lines correctly the code would be come:\r\n\r\n    int[] newArr = new int[maxsize * 2];\r\n    maxsize = maxsize*2;\r\n    for (i = 0; i &lt;= size ; i++)\r\n        newArr[i] = arr[i];\r\n    arr = newArr;\r\n\r\nIf you&#39;d change the code you could get rid of one calculation though:\r\n\r\n    maxsize = maxsize*2;\r\n    int[] newArr = new int[maxsize];\r\n\r\nTo improve understandability it should better bet:\r\n    \r\n    int newMaxSize = maxsize * 2;\r\n    int[] newArr = new int[newMaxSize];\r\n\r\n    for (i = 0; i &lt;= size ; i++)\r\n        newArr[i] = arr[i];\r\n    arr = newArr;\r\n    //could be before the loop as well but it&#39;s safer to set it here, e.g. someone could change the loop to &quot;for (i = 0; i &lt; maxsize ; i++)&quot; ;)\r\n\r\n    maxsize = newMaxSize;\r\n\r\n&gt; Line 15 should read: `arr[++size] = val;`\r\n\r\nThis would leave the first element (at index 0) &quot;empty&quot; (0) and would break for `size == maxsize-1`. Does not fix the bug.","title":"Copying elements from arrays","body":"<p>Ok, let's analyze the pseudo code a litte. Given this is pseudo code we'll not focus syntax errors but on logical ones (or design problems).</p>\n<p>First, this looks like an implementation for an arraylist, i.e. internally it keeps an array and doubles it if more space is needed. It also keeps the current size of the list as <code>size</code>.</p>\n<pre><code>//this is ok since at tehe beginning there are no elements in the array\nprivate int size = 0; \n\n//initial capacity of the array, ok too\nprivate int maxsize = 16; \n\n//an array of elements with value 0, ok too\nprivate int[] arr = new int[maxsize]; \n\n//ok but a potential bug: what is list used for?\npublic void append(val, list) \n{\n    //if the size of the list hits the capacity, we need to increase space, so this is ok\n   if (size == maxsize)\n   {\n      //we create a new array with 2x the previous size, ok as well\n      int[] newArr = new int[maxsize * 2]; \n\n      //we're looping and copying the elements from the old array to the new one\n      //bug: for i == size it would try to access arr[size] which is out of bounds\n      //fix: use i &lt; size or even i &lt; maxsize if you have to\n      for (i = 0; i &lt;= size ; i++) \n        newArr[i] = arr[i];\n\n      //move the references to &quot;point&quot; to the new array - ok\n      arr = newArr;\n\n      //double capacity - could have been better but ok here\n      maxsize = maxsize*2;\n   }\n\n   //add a new element at the index right after the last (i.e. size) and increase size by 1\n   arr[size++] = val;\n}\n</code></pre>\n<p>Now the options:</p>\n<blockquote>\n<p>Line 1 should read: <code>private int size = 16;</code></p>\n</blockquote>\n<p>This would cause the array to be doubled when the first element is added and would cause the first 16 elements to be &quot;empty&quot; (0). And it would not fix the bug.</p>\n<blockquote>\n<p>Line 7 should read: <code>if (size &gt; maxsize)</code></p>\n</blockquote>\n<p>This should never be true because <code>arr[size++]</code> would throw an exception when <code>size == maxsize</code>. It would also not fix the bug.</p>\n<blockquote>\n<p>Line 10 should read: <code>for (i = 0 ; i &lt;= maxsize ; i++)</code></p>\n</blockquote>\n<p>This is essentially the same as <code>for (i = 0 ; i &lt;= size ; i++)</code> because it is only executed if <code>size == maxsize</code>. It contains the same bug and does not fix it.</p>\n<blockquote>\n<p>Line 13 should come before line 10</p>\n</blockquote>\n<p>This wouldn't change much if I identified the lines correctly the code would be come:</p>\n<pre><code>int[] newArr = new int[maxsize * 2];\nmaxsize = maxsize*2;\nfor (i = 0; i &lt;= size ; i++)\n    newArr[i] = arr[i];\narr = newArr;\n</code></pre>\n<p>If you'd change the code you could get rid of one calculation though:</p>\n<pre><code>maxsize = maxsize*2;\nint[] newArr = new int[maxsize];\n</code></pre>\n<p>To improve understandability it should better bet:</p>\n<pre><code>int newMaxSize = maxsize * 2;\nint[] newArr = new int[newMaxSize];\n\nfor (i = 0; i &lt;= size ; i++)\n    newArr[i] = arr[i];\narr = newArr;\n//could be before the loop as well but it's safer to set it here, e.g. someone could change the loop to &quot;for (i = 0; i &lt; maxsize ; i++)&quot; ;)\n\nmaxsize = newMaxSize;\n</code></pre>\n<blockquote>\n<p>Line 15 should read: <code>arr[++size] = val;</code></p>\n</blockquote>\n<p>This would leave the first element (at index 0) &quot;empty&quot; (0) and would break for <code>size == maxsize-1</code>. Does not fix the bug.</p>\n"}],"owner":{"account_id":22960637,"reputation":1,"user_id":17090565,"display_name":"compsci9298233"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1633620630,"answer_count":1,"score":-3,"last_activity_date":1633698234,"creation_date":1633611812,"question_id":69481709,"body_markdown":"I&#39;m new to computer science. I&#39;ve been told there is only 1 bug in the following Java type pseudo-code but i&#39;m unable to figure it out. Isn&#39;t there more then 1? First the if statement means it won&#39;t loop as size doesn&#39;t equal max size, but i think the loop is also incorrect as rather then i&lt;=size shouldn&#39;t it be i&lt;=maxsize? \r\n\r\n    private int size = 0;\r\n    private int maxsize = 16;\r\n    private int[] arr = new int[maxsize];\r\n\r\n    public void append(val, list)\r\n    {\r\n        if (size == maxsize)\r\n        {\r\n            int[] newArr = new int[maxsize * 2];\r\n            for (i = 0; i &lt;= size ; i++)\r\n                newArr[i] = arr[i];\r\n            arr = newArr;\r\n            maxsize = maxsize*2;\r\n        }\r\n        arr[size++] = val;\r\n    }\r\n\r\nOut of these options, which one is correct? \r\n* Line 1 should read: `private int size = 16;`\r\n* Line 7 should read: `if (size &gt; maxsize)`\r\n* Line 10 should read: `for (i = 0 ; i &lt;= maxsize ; i++)`\r\n* Line 13 should come before line 10\r\n* Line 15 should read: `arr[++size] = val;`","title":"Copying elements from arrays","body":"<p>I'm new to computer science. I've been told there is only 1 bug in the following Java type pseudo-code but i'm unable to figure it out. Isn't there more then 1? First the if statement means it won't loop as size doesn't equal max size, but i think the loop is also incorrect as rather then i&lt;=size shouldn't it be i&lt;=maxsize?</p>\n<pre><code>private int size = 0;\nprivate int maxsize = 16;\nprivate int[] arr = new int[maxsize];\n\npublic void append(val, list)\n{\n    if (size == maxsize)\n    {\n        int[] newArr = new int[maxsize * 2];\n        for (i = 0; i &lt;= size ; i++)\n            newArr[i] = arr[i];\n        arr = newArr;\n        maxsize = maxsize*2;\n    }\n    arr[size++] = val;\n}\n</code></pre>\n<p>Out of these options, which one is correct?</p>\n<ul>\n<li>Line 1 should read: <code>private int size = 16;</code></li>\n<li>Line 7 should read: <code>if (size &gt; maxsize)</code></li>\n<li>Line 10 should read: <code>for (i = 0 ; i &lt;= maxsize ; i++)</code></li>\n<li>Line 13 should come before line 10</li>\n<li>Line 15 should read: <code>arr[++size] = val;</code></li>\n</ul>\n"},{"tags":["java","jsp","tomcat","jakarta-ee"],"comments":[{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1633700787,"post_id":69496289,"comment_id":122836994,"body_markdown":"Check permission on that file.","body":"Check permission on that file."},{"owner":{"account_id":17845206,"reputation":1,"user_id":12962208,"display_name":"Arkait"},"score":0,"creation_date":1633701154,"post_id":69496289,"comment_id":122837138,"body_markdown":"It&#39;s 770, so that souldn&#39;t be a problem, right ?","body":"It&#39;s 770, so that souldn&#39;t be a problem, right ?"},{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1634044761,"post_id":69496289,"comment_id":122916520,"body_markdown":"770 allow for access to owner and group. Ultimate access for all is 777. Try it if it helps, then tomcat runs under wrong user, or doesn&#39;t have proper group.","body":"770 allow for access to owner and group. Ultimate access for all is 777. Try it if it helps, then tomcat runs under wrong user, or doesn&#39;t have proper group."}],"owner":{"account_id":17845206,"reputation":1,"user_id":12962208,"display_name":"Arkait"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":462,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1633698199,"creation_date":1633698199,"question_id":69496289,"body_markdown":"I use Eclipse 2020-03(4.15.0), Tomcat v9.0.53 with java 11.0.11 on ubuntu.\r\n\r\nWhen I create a Dynamic Web Project everything works fine. When I try to use a JSP file, I got this error 500 (on every JSP files): \r\n\r\nHere I try to access to `http://localhost:8080/TP4/form.jsp`\r\n```\r\nSEVERE: Servlet.service() for servlet [jsp] in context with path [/TP4] threw exception [Unable to set last modified date for file [/data/Documents/S3/JEE/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/work/Catalina/localhost/TP4/org/apache/jsp/form_jsp.java]] with root cause\r\norg.apache.jasper.JasperException: Unable to set last modified date for file [/data/Documents/S3/JEE/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/work/Catalina/localhost/TP4/org/apache/jsp/form_jsp.java]\r\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:394)\r\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:367)\r\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:351)\r\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:605)\r\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:399)\r\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:379)\r\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:327)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n```\r\n\r\nAnd if I spam F5 on the same page I got this error :\r\n\r\n```\r\nSEVERE: Servlet.service() for servlet [jsp] in context with path [/TP4] threw exception [org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.form_jsp] with root cause\r\njava.lang.ClassNotFoundException: org.apache.jsp.form_jsp\r\n\tat java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:471)\r\n\tat org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:129)\r\n\tat org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:58)\r\n\tat org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:158)\r\n\tat org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:192)\r\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:413)\r\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:379)\r\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:327)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n```\r\n\r\nI tried to re-install Tomcat, but I still got the error. I also check in the temporary files of the server, and it succeed to update the date of the files.\r\n\r\nDo you have any clue about how can I fix this ?","title":"Can&#39;t run JSP files on Tomcat 9 : Unable to set last modified date for file","body":"<p>I use Eclipse 2020-03(4.15.0), Tomcat v9.0.53 with java 11.0.11 on ubuntu.</p>\n<p>When I create a Dynamic Web Project everything works fine. When I try to use a JSP file, I got this error 500 (on every JSP files):</p>\n<p>Here I try to access to <code>http://localhost:8080/TP4/form.jsp</code></p>\n<pre><code>SEVERE: Servlet.service() for servlet [jsp] in context with path [/TP4] threw exception [Unable to set last modified date for file [/data/Documents/S3/JEE/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/work/Catalina/localhost/TP4/org/apache/jsp/form_jsp.java]] with root cause\norg.apache.jasper.JasperException: Unable to set last modified date for file [/data/Documents/S3/JEE/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/work/Catalina/localhost/TP4/org/apache/jsp/form_jsp.java]\n    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:394)\n    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:367)\n    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:351)\n    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:605)\n    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:399)\n    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:379)\n    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:327)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n</code></pre>\n<p>And if I spam F5 on the same page I got this error :</p>\n<pre><code>SEVERE: Servlet.service() for servlet [jsp] in context with path [/TP4] threw exception [org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.form_jsp] with root cause\njava.lang.ClassNotFoundException: org.apache.jsp.form_jsp\n    at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:471)\n    at org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:129)\n    at org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:58)\n    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:158)\n    at org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:192)\n    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:413)\n    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:379)\n    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:327)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n</code></pre>\n<p>I tried to re-install Tomcat, but I still got the error. I also check in the temporary files of the server, and it succeed to update the date of the files.</p>\n<p>Do you have any clue about how can I fix this ?</p>\n"},{"tags":["java","hadoop"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":2,"creation_date":1457824686,"post_id":35964492,"comment_id":59583972,"body_markdown":"Please post your stack trace as text in the question, not a link to an off-site image.","body":"Please post your stack trace as text in the question, not a link to an off-site image."},{"owner":{"account_id":2386595,"reputation":10486,"user_id":2087463,"accept_rate":100,"display_name":"tmthydvnprt"},"score":0,"creation_date":1457824987,"post_id":35964492,"comment_id":59584034,"body_markdown":"Try to narrow it down to a question about a few specific lines first.","body":"Try to narrow it down to a question about a few specific lines first."}],"answers":[{"tags":[],"owner":{"account_id":8030016,"reputation":55,"user_id":6055401,"display_name":"mia ich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1457829196,"creation_date":1457829196,"answer_id":35965112,"question_id":35964492,"body_markdown":"I know the reason. need to package .class files outside the directory to package jar. Thanks for all the help. I also leant how to edit post here. ","title":"Exception in thread &quot;main&quot; java.lang.ClassNotFoundException, mapreduce","body":"<p>I know the reason. need to package .class files outside the directory to package jar. Thanks for all the help. I also leant how to edit post here. </p>\n"},{"tags":[],"owner":{"account_id":319648,"reputation":6146,"user_id":637517,"accept_rate":85,"display_name":"subodh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1457880377,"creation_date":1457880377,"answer_id":35971660,"question_id":35964492,"body_markdown":"To execute a map reduce program you have to perform the below steps -\r\n\r\n1. Create jar file of your map reduce program(You have already done).\r\n2. Place the input file to HDFS/file system.\r\n\r\nand finally execute the below command.\r\n\r\n    hadoop jar [jar file name with fully qualified] [driver class name with fully qualified] /[input path] /[output path]\r\n\r\nHere is the very simple and basic [Hello World in Map Reduce step by step guide][1].\r\n\r\n\r\n  [1]: http://www.javamakeuse.com/2016/01/hadoop-mapreduce-wordcount-tutorial.html","title":"Exception in thread &quot;main&quot; java.lang.ClassNotFoundException, mapreduce","body":"<p>To execute a map reduce program you have to perform the below steps -</p>\n\n<ol>\n<li>Create jar file of your map reduce program(You have already done).</li>\n<li>Place the input file to HDFS/file system.</li>\n</ol>\n\n<p>and finally execute the below command.</p>\n\n<pre><code>hadoop jar [jar file name with fully qualified] [driver class name with fully qualified] /[input path] /[output path]\n</code></pre>\n\n<p>Here is the very simple and basic <a href=\"http://www.javamakeuse.com/2016/01/hadoop-mapreduce-wordcount-tutorial.html\" rel=\"nofollow\">Hello World in Map Reduce step by step guide</a>.</p>\n"},{"tags":[],"owner":{"account_id":16940439,"reputation":1,"user_id":12252415,"display_name":"Vladyslav Frolov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633698126,"creation_date":1633698126,"answer_id":69496268,"question_id":35964492,"body_markdown":"You must use the full qualified name, but without specifying the extension like &#39;.class&#39; or &#39;.java&#39;","title":"Exception in thread &quot;main&quot; java.lang.ClassNotFoundException, mapreduce","body":"<p>You must use the full qualified name, but without specifying the extension like '.class' or '.java'</p>\n"}],"owner":{"account_id":8030016,"reputation":55,"user_id":6055401,"display_name":"mia ich"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1463,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1633698126,"creation_date":1457824621,"question_id":35964492,"body_markdown":"I&#39;m new to both java and hadoop. Thank you for any help. I try to do a join operations on two tables. ValueWrapper is a customized type using Writable interface, I also put it in the stdRepartition package.I use command line to run it. The process and result showed below:\r\n\r\nResults:\r\n\r\n    javac StdRepartition.java ValueWrapper.java\r\n    jar -cvf StdRepartition.jar ./*.class\r\n    added manifest\r\n    adding:StdRepartition\r\n    adding:StdRepartition$DataMapper.class\r\n    adding:StdRepartition$StdReducer.class\r\n    adding:ValueWrapper.class\r\n    \r\n    hadoop jar StdRepartition.jar stdRepartition.StdRepartition input output\r\n    Exception in thread &quot;main&quot; java.lang.ClassNotFoundException: stdRepartition.StdRepartition\r\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)\r\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:425)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:358)\r\n        at java.lang.Class.forName0(Native Method)\r\n        at java.lang.Class.forName(Class.java:270)\r\n        at org.apache.hadoop.util.RunJar.main(RunJar.java:205)\r\n    \r\nCode:\r\n    \r\n        package stdRepartition;\r\n        \r\n        import java.io.IOException;\r\n        import java.util.ArrayList;\r\n        \r\n        import org.apache.hadoop.conf.Configuration;\r\n        import org.apache.hadoop.fs.Path;\r\n        import org.apache.hadoop.io.IntWritable;\r\n        import org.apache.hadoop.io.NullWritable;\r\n        import org.apache.hadoop.io.Text;\r\n        import org.apache.hadoop.mapred.FileSplit;\r\n        import org.apache.hadoop.mapreduce.Job;\r\n        import org.apache.hadoop.mapreduce.Mapper;\r\n        import org.apache.hadoop.mapreduce.Reducer;\r\n        import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\r\n        // import org.apache.hadoop.mapreduce.lib.input.MultipleInputs;\r\n        import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\r\n               \r\n        public class StdRepartition {\r\n        \t\r\n        \tpublic static class DataMapper extends Mapper&lt;Object, Text, IntWritable, ValueWrapper&gt; {\r\n        \t\tprivate Text flag = new Text();\r\n        \t\tprivate Text content = new Text();\r\n        \t\tprivate ValueWrapper valueWrapper = new ValueWrapper();\r\n        \t\tpublic void map(Object key, Text value, Context context) throws IOException, InterruptedException{\r\n        \t\t\tFileSplit fileSplit = (FileSplit)context.getInputSplit();\r\n        \t\t\tString filename = fileSplit.getPath().getName();\r\n        \t\t\tint ID;\r\n        \t\t\tif(filename.endsWith(&quot;data.txt&quot;)) {\r\n        \t\t\t\tString[] parts = value.toString().split(&quot;s+&quot;);\r\n        \t\t\t\tID = Integer.parseInt(parts[0]);\r\n        \t\t\t\tflag = new Text(&quot;data&quot;);\r\n        \t\t\t\tcontent = value;\r\n        \t\t\t}\r\n        \t\t\telse {\r\n        \t\t\t\tString[] parts = value.toString().split(&quot;\\\\|&quot;);\r\n        \t\t\t\tID = Integer.parseInt(parts[0]);\r\n        \t\t\t\tflag = new Text(&quot;user&quot;);\r\n        \t\t\t\tcontent = new Text(parts[2]);\r\n        \t\t\t}\r\n        \t\t\tvalueWrapper.setFlag(flag);\r\n        \t\t\tvalueWrapper.setContent(content);\r\n        \t\t\tcontext.write(new IntWritable(ID), valueWrapper);\r\n        \t\t}\r\n        \t}\r\n        \t\r\n        \tpublic static class StdReducer extends Reducer&lt;IntWritable, ValueWrapper, NullWritable, Text&gt; {\r\n        \t\tprivate ArrayList&lt;Text&gt; ratings = new ArrayList&lt;Text&gt;();\r\n        \t\tprivate Text age = new Text();\r\n        \t\tpublic void reduce(IntWritable key, Iterable&lt;ValueWrapper&gt; value, Context context) throws IOException, InterruptedException {\r\n        \t\t\tfor(ValueWrapper val: value) {\r\n        \t\t\t\tText flag = val.getFlag();\r\n        \t\t\t\tif(flag.toString().equals(&quot;user&quot;)) {\r\n        \t\t\t\t\tage = val.getContent();\r\n        \t\t\t\t}\r\n        \t\t\t\telse {\r\n        \t\t\t\t\tratings.add(val.getContent());\r\n        \t\t\t\t}\r\n        \t\t\t}\r\n        \t\t\t\r\n        \t\t\tString curAge = age.toString();\r\n        \t\t\tfor(Text r: ratings) {\r\n        \t\t\t\tString curR = r.toString();\r\n        \t\t\t\tcurR = curR + &quot;    &quot; + curAge;\r\n        \t\t\t\tcontext.write(NullWritable.get(), new Text(curR));\r\n        \t\t\t}\r\n        \t\t}\r\n        \t}\r\n        \t\r\n        \t@SuppressWarnings(&quot;deprecation&quot;)\r\n        \tpublic static void main(String[] args) throws Exception {\r\n        \t\tConfiguration conf = new Configuration();\r\n        \t\tJob job = new Job(conf, &quot;StdRepartition&quot;);\r\n        \t\tjob.setJarByClass(StdRepartition.class);\r\n        \t    \r\n        \t\tjob.setMapperClass(DataMapper.class);\r\n        \t\tjob.setMapOutputKeyClass(IntWritable.class);\r\n        \t\tjob.setMapOutputValueClass(ValueWrapper.class);\r\n        \t\tjob.setReducerClass(StdReducer.class);\r\n        \t\tjob.setOutputKeyClass(NullWritable.class);\r\n        \t\tjob.setOutputValueClass(Text.class);\r\n        \t\t// MultipleInputs.addInputPath(job, new Path(args[0]), TextInputFormat.class, DataMapper.class);\r\n        \t\t// MultipleInputs.addInputPath(job, new Path(args[1]), TextInputFormat.class, DataMapper.class);\r\n        \t\t\r\n        \t\t// Set the input path to be a directory\r\n        \t\tFileInputFormat.setInputPaths(job, args[0]);\r\n        \t\tFileOutputFormat.setOutputPath(job, new Path(args[1]));\r\n        \t\t\r\n        \t\tSystem.exit(job.waitForCompletion(true)? 0:1);\r\n        \t}\r\n        }\r\n\r\n  [1]: http://i.stack.imgur.com/wLXp6.png\r\n  ","title":"Exception in thread &quot;main&quot; java.lang.ClassNotFoundException, mapreduce","body":"<p>I'm new to both java and hadoop. Thank you for any help. I try to do a join operations on two tables. ValueWrapper is a customized type using Writable interface, I also put it in the stdRepartition package.I use command line to run it. The process and result showed below:</p>\n\n<p>Results:</p>\n\n<pre><code>javac StdRepartition.java ValueWrapper.java\njar -cvf StdRepartition.jar ./*.class\nadded manifest\nadding:StdRepartition\nadding:StdRepartition$DataMapper.class\nadding:StdRepartition$StdReducer.class\nadding:ValueWrapper.class\n\nhadoop jar StdRepartition.jar stdRepartition.StdRepartition input output\nException in thread \"main\" java.lang.ClassNotFoundException: stdRepartition.StdRepartition\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:425)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:358)\n    at java.lang.Class.forName0(Native Method)\n    at java.lang.Class.forName(Class.java:270)\n    at org.apache.hadoop.util.RunJar.main(RunJar.java:205)\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>    package stdRepartition;\n\n    import java.io.IOException;\n    import java.util.ArrayList;\n\n    import org.apache.hadoop.conf.Configuration;\n    import org.apache.hadoop.fs.Path;\n    import org.apache.hadoop.io.IntWritable;\n    import org.apache.hadoop.io.NullWritable;\n    import org.apache.hadoop.io.Text;\n    import org.apache.hadoop.mapred.FileSplit;\n    import org.apache.hadoop.mapreduce.Job;\n    import org.apache.hadoop.mapreduce.Mapper;\n    import org.apache.hadoop.mapreduce.Reducer;\n    import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\n    // import org.apache.hadoop.mapreduce.lib.input.MultipleInputs;\n    import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\n\n    public class StdRepartition {\n\n        public static class DataMapper extends Mapper&lt;Object, Text, IntWritable, ValueWrapper&gt; {\n            private Text flag = new Text();\n            private Text content = new Text();\n            private ValueWrapper valueWrapper = new ValueWrapper();\n            public void map(Object key, Text value, Context context) throws IOException, InterruptedException{\n                FileSplit fileSplit = (FileSplit)context.getInputSplit();\n                String filename = fileSplit.getPath().getName();\n                int ID;\n                if(filename.endsWith(\"data.txt\")) {\n                    String[] parts = value.toString().split(\"s+\");\n                    ID = Integer.parseInt(parts[0]);\n                    flag = new Text(\"data\");\n                    content = value;\n                }\n                else {\n                    String[] parts = value.toString().split(\"\\\\|\");\n                    ID = Integer.parseInt(parts[0]);\n                    flag = new Text(\"user\");\n                    content = new Text(parts[2]);\n                }\n                valueWrapper.setFlag(flag);\n                valueWrapper.setContent(content);\n                context.write(new IntWritable(ID), valueWrapper);\n            }\n        }\n\n        public static class StdReducer extends Reducer&lt;IntWritable, ValueWrapper, NullWritable, Text&gt; {\n            private ArrayList&lt;Text&gt; ratings = new ArrayList&lt;Text&gt;();\n            private Text age = new Text();\n            public void reduce(IntWritable key, Iterable&lt;ValueWrapper&gt; value, Context context) throws IOException, InterruptedException {\n                for(ValueWrapper val: value) {\n                    Text flag = val.getFlag();\n                    if(flag.toString().equals(\"user\")) {\n                        age = val.getContent();\n                    }\n                    else {\n                        ratings.add(val.getContent());\n                    }\n                }\n\n                String curAge = age.toString();\n                for(Text r: ratings) {\n                    String curR = r.toString();\n                    curR = curR + \"    \" + curAge;\n                    context.write(NullWritable.get(), new Text(curR));\n                }\n            }\n        }\n\n        @SuppressWarnings(\"deprecation\")\n        public static void main(String[] args) throws Exception {\n            Configuration conf = new Configuration();\n            Job job = new Job(conf, \"StdRepartition\");\n            job.setJarByClass(StdRepartition.class);\n\n            job.setMapperClass(DataMapper.class);\n            job.setMapOutputKeyClass(IntWritable.class);\n            job.setMapOutputValueClass(ValueWrapper.class);\n            job.setReducerClass(StdReducer.class);\n            job.setOutputKeyClass(NullWritable.class);\n            job.setOutputValueClass(Text.class);\n            // MultipleInputs.addInputPath(job, new Path(args[0]), TextInputFormat.class, DataMapper.class);\n            // MultipleInputs.addInputPath(job, new Path(args[1]), TextInputFormat.class, DataMapper.class);\n\n            // Set the input path to be a directory\n            FileInputFormat.setInputPaths(job, args[0]);\n            FileOutputFormat.setOutputPath(job, new Path(args[1]));\n\n            System.exit(job.waitForCompletion(true)? 0:1);\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":21002319,"reputation":1,"user_id":15432863,"display_name":"Barazanthul"},"score":0,"creation_date":1633631797,"post_id":69485166,"comment_id":122818213,"body_markdown":"It seems the problem was caused by properties.setProperty(&quot;hibernate.hbm2ddl.auto&quot;, &quot;create-drop&quot;);. I changed that to auto and now the problem did not appear again.","body":"It seems the problem was caused by properties.setProperty(&quot;hibernate.hbm2ddl.auto&quot;, &quot;create-drop&quot;);. I changed that to auto and now the problem did not appear again."}],"answers":[{"tags":[],"owner":{"account_id":21002319,"reputation":1,"user_id":15432863,"display_name":"Barazanthul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633697554,"creation_date":1633697554,"answer_id":69496170,"question_id":69485166,"body_markdown":"It seems the problem was caused by properties.setProperty(&quot;hibernate.hbm2ddl.auto&quot;, &quot;create-drop&quot;);. I changed that to auto and now the problem did not appear again. ","title":"unable to obtain isolated JDBC connection Spring Boot + JPA","body":"<p>It seems the problem was caused by properties.setProperty(&quot;hibernate.hbm2ddl.auto&quot;, &quot;create-drop&quot;);. I changed that to auto and now the problem did not appear again.</p>\n"}],"owner":{"account_id":21002319,"reputation":1,"user_id":15432863,"display_name":"Barazanthul"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":588,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1633697554,"creation_date":1633626237,"question_id":69485166,"body_markdown":"I am getting the above error when i try to do something with my database, which is not flyway or a simple select.\r\n\r\n```\r\nThere was an unexpected error (type=Internal Server Error, status=500).\r\nunable to obtain isolated JDBC connection; nested exception is org.hibernate.exception.JDBCConnectionException: unable to obtain isolated JDBC connection\r\norg.springframework.dao.DataAccessResourceFailureException: unable to obtain isolated JDBC connection; nested exception is org.hibernate.exception.JDBCConnectionException: unable to obtain isolated JDBC connection\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:255)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\r\n\tat jdk.proxy3/jdk.proxy3.$Proxy91.saveAll(Unknown Source)\r\n```\r\n\r\nPOMDependecies\r\n```\r\n&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.12.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0.0-2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.12.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mchange&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;c3p0&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.9.5.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n```\r\n\r\napplication.properties\r\n\r\n```\r\nspring.servlet.multipart.max-file-size=20MB\r\nspring.servlet.multipart.max-request-size=20MB\r\nspring.datasource.hikari.maximum-pool-size=10\r\nspring.datasource.hikari.connectionTimeout=30000   \r\nspring.datasource.hikari.idleTimeout=600000          \r\nspring.datasource.hikari.maxLifetime=1800000  \r\nhibernate.c3p0.min_size=5\r\nhibernate.c3p0.max_size=20\r\nhibernate.c3p0.timeout=300\r\nhibernate.c3p0.max_statements=50\r\nhibernate.c3p0.idle_test_period=3000\r\nlogging.level.com.zaxxer.hikari.HikariConfig=DEBUG \r\nlogging.level.com.zaxxer.hikari=TRACE\r\n```\r\n\r\nIn addition i sometimes get \r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [de/ak/mkm/config/PersistenceJPAConfig.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\nCaused by: java.sql.SQLNonTransientConnectionException: Socket fail to connect to host:localhost, port:3306. Address already in use: no further information\r\nCaused by: java.net.BindException: Address already in use: no further information\r\n```\r\non the startup of the application.\r\n\r\nAnd when i shutdown the app it throws an error, because it somehow tries to create an entityManager.\r\n\r\n```\r\npackage de.test.config;\r\n\r\n\r\nimport org.springframework.cache.annotation.EnableCaching;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor;\r\nimport org.springframework.jdbc.datasource.DriverManagerDataSource;\r\nimport org.springframework.orm.jpa.JpaTransactionManager;\r\nimport org.springframework.orm.jpa.JpaVendorAdapter;\r\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\r\nimport org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\r\nimport org.springframework.transaction.PlatformTransactionManager;\r\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\r\n\r\nimport javax.sql.DataSource;\r\nimport java.util.Properties;\r\n\r\n\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableCaching\r\npublic class PersistenceJPAConfig{\r\n\r\n    @Bean\r\n    public DataSource dataSource(){\r\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n        dataSource.setDriverClassName(&quot;org.mariadb.jdbc.Driver&quot;);\r\n        dataSource.setUrl(&quot;jdbc:mysql://localhost:3306/DB?autoReconnect=true&quot;);\r\n        dataSource.setUsername( &quot;XXXX&quot; );\r\n        dataSource.setPassword( &quot;XXXXXXXX&quot; );\r\n        return dataSource;\r\n    }\r\n\r\n    @Bean\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n        LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\r\n        em.setDataSource(dataSource());\r\n        em.setPackagesToScan(&quot;de.test.jpa.model&quot;);\r\n\r\n        JpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\r\n        em.setJpaVendorAdapter(vendorAdapter);\r\n        em.setJpaProperties(additionalProperties());\r\n\r\n        return em;\r\n    }\r\n\r\n    @Bean\r\n    public PlatformTransactionManager transactionManager() {\r\n        JpaTransactionManager transactionManager = new JpaTransactionManager();\r\n        transactionManager.setEntityManagerFactory(entityManagerFactory().getObject());\r\n\r\n        return transactionManager;\r\n    }\r\n\r\n    @Bean\r\n    public PersistenceExceptionTranslationPostProcessor exceptionTranslation(){\r\n        return new PersistenceExceptionTranslationPostProcessor();\r\n    }\r\n\r\n    public Properties additionalProperties() {\r\n        Properties properties = new Properties();\r\n        properties.setProperty(&quot;hibernate.hbm2ddl.auto&quot;, &quot;create-drop&quot;);\r\n        properties.setProperty(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.MySQL5Dialect&quot;);\r\n        properties.setProperty(&quot;spring.datasource.hikari.maximum-pool-size&quot;, &quot;10&quot;);\r\n        properties.setProperty(&quot;spring.datasource.hikari.connectionTimeout&quot;, &quot;30000&quot;);\r\n        properties.setProperty(&quot;spring.datasource.hikari.idleTimeout&quot;, &quot;600000&quot;);\r\n        properties.setProperty(&quot;spring.datasource.hikari.maxLifetime&quot;, &quot;1800000&quot;);\r\n        properties.setProperty(&quot;hibernate.c3p0.min_size&quot;, &quot;5&quot;);\r\n        properties.setProperty(&quot;hibernate.c3p0.max_size&quot;, &quot;20&quot;);\r\n        properties.setProperty(&quot;hibernate.c3p0.timeout&quot;, &quot;300&quot;);\r\n        properties.setProperty(&quot;hibernate.c3p0.max_statements&quot;, &quot;50&quot;);\r\n        properties.setProperty(&quot;hibernate.c3p0.idle_test_period&quot;, &quot;3000&quot;);\r\n        return properties;\r\n    }\r\n}\r\n\r\n```\r\nI don&#39;t think the config is working.","title":"unable to obtain isolated JDBC connection Spring Boot + JPA","body":"<p>I am getting the above error when i try to do something with my database, which is not flyway or a simple select.</p>\n<pre><code>There was an unexpected error (type=Internal Server Error, status=500).\nunable to obtain isolated JDBC connection; nested exception is org.hibernate.exception.JDBCConnectionException: unable to obtain isolated JDBC connection\norg.springframework.dao.DataAccessResourceFailureException: unable to obtain isolated JDBC connection; nested exception is org.hibernate.exception.JDBCConnectionException: unable to obtain isolated JDBC connection\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:255)\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)\n    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\n    at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\n    at jdk.proxy3/jdk.proxy3.$Proxy91.saveAll(Unknown Source)\n</code></pre>\n<p>POMDependecies</p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\n            &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\n            &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\n            &lt;version&gt;2.4.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\n            &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.12.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0-2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.12.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mchange&lt;/groupId&gt;\n            &lt;artifactId&gt;c3p0&lt;/artifactId&gt;\n            &lt;version&gt;0.9.5.5&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n</code></pre>\n<p>application.properties</p>\n<pre><code>spring.servlet.multipart.max-file-size=20MB\nspring.servlet.multipart.max-request-size=20MB\nspring.datasource.hikari.maximum-pool-size=10\nspring.datasource.hikari.connectionTimeout=30000   \nspring.datasource.hikari.idleTimeout=600000          \nspring.datasource.hikari.maxLifetime=1800000  \nhibernate.c3p0.min_size=5\nhibernate.c3p0.max_size=20\nhibernate.c3p0.timeout=300\nhibernate.c3p0.max_statements=50\nhibernate.c3p0.idle_test_period=3000\nlogging.level.com.zaxxer.hikari.HikariConfig=DEBUG \nlogging.level.com.zaxxer.hikari=TRACE\n</code></pre>\n<p>In addition i sometimes get</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [de/ak/mkm/config/PersistenceJPAConfig.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\nCaused by: java.sql.SQLNonTransientConnectionException: Socket fail to connect to host:localhost, port:3306. Address already in use: no further information\nCaused by: java.net.BindException: Address already in use: no further information\n</code></pre>\n<p>on the startup of the application.</p>\n<p>And when i shutdown the app it throws an error, because it somehow tries to create an entityManager.</p>\n<pre><code>package de.test.config;\n\n\nimport org.springframework.cache.annotation.EnableCaching;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor;\nimport org.springframework.jdbc.datasource.DriverManagerDataSource;\nimport org.springframework.orm.jpa.JpaTransactionManager;\nimport org.springframework.orm.jpa.JpaVendorAdapter;\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\nimport org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\nimport org.springframework.transaction.PlatformTransactionManager;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\n\nimport javax.sql.DataSource;\nimport java.util.Properties;\n\n\n@Configuration\n@EnableTransactionManagement\n@EnableCaching\npublic class PersistenceJPAConfig{\n\n    @Bean\n    public DataSource dataSource(){\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        dataSource.setDriverClassName(&quot;org.mariadb.jdbc.Driver&quot;);\n        dataSource.setUrl(&quot;jdbc:mysql://localhost:3306/DB?autoReconnect=true&quot;);\n        dataSource.setUsername( &quot;XXXX&quot; );\n        dataSource.setPassword( &quot;XXXXXXXX&quot; );\n        return dataSource;\n    }\n\n    @Bean\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n        LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\n        em.setDataSource(dataSource());\n        em.setPackagesToScan(&quot;de.test.jpa.model&quot;);\n\n        JpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\n        em.setJpaVendorAdapter(vendorAdapter);\n        em.setJpaProperties(additionalProperties());\n\n        return em;\n    }\n\n    @Bean\n    public PlatformTransactionManager transactionManager() {\n        JpaTransactionManager transactionManager = new JpaTransactionManager();\n        transactionManager.setEntityManagerFactory(entityManagerFactory().getObject());\n\n        return transactionManager;\n    }\n\n    @Bean\n    public PersistenceExceptionTranslationPostProcessor exceptionTranslation(){\n        return new PersistenceExceptionTranslationPostProcessor();\n    }\n\n    public Properties additionalProperties() {\n        Properties properties = new Properties();\n        properties.setProperty(&quot;hibernate.hbm2ddl.auto&quot;, &quot;create-drop&quot;);\n        properties.setProperty(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.MySQL5Dialect&quot;);\n        properties.setProperty(&quot;spring.datasource.hikari.maximum-pool-size&quot;, &quot;10&quot;);\n        properties.setProperty(&quot;spring.datasource.hikari.connectionTimeout&quot;, &quot;30000&quot;);\n        properties.setProperty(&quot;spring.datasource.hikari.idleTimeout&quot;, &quot;600000&quot;);\n        properties.setProperty(&quot;spring.datasource.hikari.maxLifetime&quot;, &quot;1800000&quot;);\n        properties.setProperty(&quot;hibernate.c3p0.min_size&quot;, &quot;5&quot;);\n        properties.setProperty(&quot;hibernate.c3p0.max_size&quot;, &quot;20&quot;);\n        properties.setProperty(&quot;hibernate.c3p0.timeout&quot;, &quot;300&quot;);\n        properties.setProperty(&quot;hibernate.c3p0.max_statements&quot;, &quot;50&quot;);\n        properties.setProperty(&quot;hibernate.c3p0.idle_test_period&quot;, &quot;3000&quot;);\n        return properties;\n    }\n}\n\n</code></pre>\n<p>I don't think the config is working.</p>\n"},{"tags":["java","android","memory-management","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":1852482,"reputation":7664,"user_id":1678729,"accept_rate":75,"display_name":"Danail Alexiev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1454455338,"creation_date":1454455338,"answer_id":35165730,"question_id":35165532,"body_markdown":"A few things to point out here:\r\n\r\n - Every fragment has a unique view hierarchy. If you want all four fragments to have a recycler view, you should declare it in each fragment. Even if you reuse the save XML defined view between the fragments, a different instance of the recycler view will still be created for each fragment.\r\n - There is no such thing as an XML recycler view. XML is just used as a markup language to specify you view hierarchy. In the end, all the views are Java objects.\r\n - Files are not allocated on the heap. Objects are. ","title":"Does it save more memory and is it more efficient to reuse recyclerviews?","body":"<p>A few things to point out here:</p>\n\n<ul>\n<li>Every fragment has a unique view hierarchy. If you want all four fragments to have a recycler view, you should declare it in each fragment. Even if you reuse the save XML defined view between the fragments, a different instance of the recycler view will still be created for each fragment.</li>\n<li>There is no such thing as an XML recycler view. XML is just used as a markup language to specify you view hierarchy. In the end, all the views are Java objects.</li>\n<li>Files are not allocated on the heap. Objects are. </li>\n</ul>\n"}],"owner":{"account_id":7527623,"reputation":837,"user_id":6151039,"accept_rate":53,"display_name":"Eli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1633697203,"creation_date":1454454353,"question_id":35165532,"body_markdown":"I have a total of 4 recyclerviews, each with currently has its own xml recyclerview, is it better on the memory usage to have all 4 fragments use 1 xml recyclerview or each have its own recyclerview? If I change this will it have a substantial effect on the amount of allocated files in my heap?\r\n","title":"Does it save more memory and is it more efficient to reuse recyclerviews?","body":"<p>I have a total of 4 recyclerviews, each with currently has its own xml recyclerview, is it better on the memory usage to have all 4 fragments use 1 xml recyclerview or each have its own recyclerview? If I change this will it have a substantial effect on the amount of allocated files in my heap?</p>\n"},{"tags":["java","android","jvm","heap-memory","dalvik"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1462845371,"post_id":37127912,"comment_id":61796499,"body_markdown":"It is *not* possible to migrate them *without* losing whatever differences there may be. For example, Object Serialization will serialize them in a standard format defined in the Protocol appendix of the Object Serialization Specification. XML and JSON serialization use an intermediate text format which is also standardized. Your question is without point.","body":"It is <i>not</i> possible to migrate them <i>without</i> losing whatever differences there may be. For example, Object Serialization will serialize them in a standard format defined in the Protocol appendix of the Object Serialization Specification. XML and JSON serialization use an intermediate text format which is also standardized. Your question is without point."},{"owner":{"account_id":281069,"reputation":3228,"user_id":577165,"accept_rate":65,"display_name":"Infinite"},"score":0,"creation_date":1462847542,"post_id":37127912,"comment_id":61797019,"body_markdown":"@EJP Thanks. But by dumping the heap and converting it to a standard .hprof file, the heap objects indeed can be understood by standard JVM memory analyzer. For example, [link](https://www.novoda.com/blog/debugging-memory-leaks-on-android-for-beginners-programmatic-heap-dumping-part-1/) So I think it might be doable.","body":"@EJP Thanks. But by dumping the heap and converting it to a standard .hprof file, the heap objects indeed can be understood by standard JVM memory analyzer. For example, <a href=\"https://www.novoda.com/blog/debugging-memory-leaks-on-android-for-beginners-programmatic-heap-dumping-part-1/\" rel=\"nofollow noreferrer\">link</a> So I think it might be doable."},{"owner":{"account_id":111374,"reputation":51666,"user_id":294248,"display_name":"fadden"},"score":0,"creation_date":1462908050,"post_id":37127912,"comment_id":61832385,"body_markdown":"Possibly of interest: http://stackoverflow.com/questions/10824677/is-dalvik-even-more-memory-hungry-than-hotspot-in-terms-of-object-sizes/","body":"Possibly of interest: <a href=\"http://stackoverflow.com/questions/10824677/is-dalvik-even-more-memory-hungry-than-hotspot-in-terms-of-object-sizes/\" title=\"is dalvik even more memory hungry than hotspot in terms of object sizes\">stackoverflow.com/questions/10824677/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":252759,"reputation":19874,"user_id":531021,"display_name":"JesusFreke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1462860889,"creation_date":1462860889,"answer_id":37130572,"question_id":37127912,"body_markdown":"No. The in-memory representation will be totally different than that of other VMs. The in-memory representation will vary by version of Android, whether it&#39;s running art or dalvik, and potentially even be different for different devices running the same version of Android.\r\n\r\nAnything you try to do at that level is *extremely* brittle, and would likely only work on a single device, or small set of devices.","title":"Heap object (i.e. class instance) representation difference between Dalvik and JVM","body":"<p>No. The in-memory representation will be totally different than that of other VMs. The in-memory representation will vary by version of Android, whether it's running art or dalvik, and potentially even be different for different devices running the same version of Android.</p>\n\n<p>Anything you try to do at that level is <em>extremely</em> brittle, and would likely only work on a single device, or small set of devices.</p>\n"}],"owner":{"account_id":281069,"reputation":3228,"user_id":577165,"accept_rate":65,"display_name":"Infinite"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1633697172,"creation_date":1462843985,"question_id":37127912,"body_markdown":"How are objects in heap represented in Dalvik VM and JVM, respectively, in terms of the object size and field order. Are they the same (like mirror)?\r\n\r\nIs it possible to migrate the heap objects in DVM to JVM? For example, for each object in DVM heap, allocate an object of the same type in JVM, and then copy the content byte by byte (or, field by field).\r\n\r\n","title":"Heap object (i.e. class instance) representation difference between Dalvik and JVM","body":"<p>How are objects in heap represented in Dalvik VM and JVM, respectively, in terms of the object size and field order. Are they the same (like mirror)?</p>\n\n<p>Is it possible to migrate the heap objects in DVM to JVM? For example, for each object in DVM heap, allocate an object of the same type in JVM, and then copy the content byte by byte (or, field by field).</p>\n"},{"tags":["java","android","xamarin","heap-memory","xamarin.uitest"],"comments":[{"owner":{"account_id":3481745,"reputation":6028,"user_id":2913599,"display_name":"jgoldberger - MSFT"},"score":0,"creation_date":1476403194,"post_id":40032651,"comment_id":67342799,"body_markdown":"That&#39;s weird. Are you sure that is from the build for the UITest project? When building the UITest project, the Android app project it references should build as well so maybe that is still the Android project build output? Can&#39;t tell from what is posted.","body":"That&#39;s weird. Are you sure that is from the build for the UITest project? When building the UITest project, the Android app project it references should build as well so maybe that is still the Android project build output? Can&#39;t tell from what is posted."},{"owner":{"account_id":60902,"reputation":41415,"user_id":181771,"accept_rate":83,"display_name":"DaveDev"},"score":0,"creation_date":1476404162,"post_id":40032651,"comment_id":67343046,"body_markdown":"Yeah, i think it&#39;s the Droid.csproj that&#39;s failing, as it&#39;s triggered by the UITest project. When the Droid project builds on its own it&#39;s fine, but fails when the UITest triggers it. Whatever the case, we&#39;ve removed the UITest from the build steps. Hopefully that works","body":"Yeah, i think it&#39;s the Droid.csproj that&#39;s failing, as it&#39;s triggered by the UITest project. When the Droid project builds on its own it&#39;s fine, but fails when the UITest triggers it. Whatever the case, we&#39;ve removed the UITest from the build steps. Hopefully that works"},{"owner":{"account_id":4099182,"reputation":2149,"user_id":3365178,"display_name":"JimBobBennett"},"score":0,"creation_date":1476413035,"post_id":40032651,"comment_id":67345076,"body_markdown":"What build configurations are you using? IIRC you need to set the java heap size for each build configuration, so if you only set it for release and the UITest is building the debug version then you&#39;ll get the error","body":"What build configurations are you using? IIRC you need to set the java heap size for each build configuration, so if you only set it for release and the UITest is building the debug version then you&#39;ll get the error"}],"owner":{"account_id":60902,"reputation":41415,"user_id":181771,"accept_rate":83,"display_name":"DaveDev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1633697118,"creation_date":1476401345,"question_id":40032651,"body_markdown":"\r\nWe&#39;re developing an Android app using Xamarin. \r\nWe&#39;re using Visual Studio Team Services as our CI service. \r\n\r\nThe project consist of (among other things)\r\n\r\n* Droid.csproj (android project)\r\n* UITest.csproj (C# assembly for UI tests)\r\n\r\nRecently the Droid.csproj failed the build because of a `java.lang.OutOfMemoryError: Java heap space` error. We changed the configuration of the server to run as x64, and increased the Java Max Heap Size to 2G. I can see in VSTS that the project is now successfully building.\r\n\r\nHowever, the UITest.csproj is failing, with the following:\r\n\r\n\t2016-10-13T22:58:49.2048732Z ##[error]COMPILETODALVIK(0,0): Error : \r\n\t2016-10-13T22:58:49.2048732Z COMPILETODALVIK : UNEXPECTED TOP-LEVEL error :  [C:\\a\\1\\s\\Droid\\Mobile.Droid.csproj]\r\n\t2016-10-13T22:58:49.2048732Z   java.lang.OutOfMemoryError: Java heap space\r\n\t2016-10-13T22:58:49.2048732Z   \tat java.lang.Object.clone(Native Method)\r\n\t2016-10-13T22:58:49.2048732Z   \tat java.util.Arrays.sort(Arrays.java:1206)\r\n\t2016-10-13T22:58:49.2048732Z   \tat java.util.Collections.sort(Collections.java:157)\r\n\t2016-10-13T22:58:49.2048732Z   \tat com.android.dx.dex.file.MixedItemSection.placeItems(MixedItemSection.java:301)\r\n\t2016-10-13T22:58:49.2048732Z   \tat com.android.dx.dex.file.DexFile.toDex0(DexFile.java:541)\r\n\t2016-10-13T22:58:49.2048732Z   \tat com.android.dx.dex.file.DexFile.toDex(DexFile.java:214)\r\n\t2016-10-13T22:58:49.2048732Z   \tat com.android.dx.command.dexer.Main.writeDex(Main.java:856)\r\n\t2016-10-13T22:58:49.2048732Z   \tat com.android.dx.command.dexer.Main.runMonoDex(Main.java:323)\r\n\t2016-10-13T22:58:49.2048732Z   \tat com.android.dx.command.dexer.Main.run(Main.java:277)\r\n\t2016-10-13T22:58:49.2048732Z   \tat com.android.dx.command.dexer.Main.main(Main.java:245)\r\n\t2016-10-13T22:58:49.2048732Z   \tat com.android.dx.command.Main.main(Main.java:106)\t\t\t\r\n\r\nIt seems the UITest is dependent on the Droid, which makes sense because it&#39;s testing the Droids UI components. Do I need to configure something in the UITest project for this to work?\r\n\r\nFor reference, this is the project configuration screen for the UITest project: (as you can see, it&#39;s an ordinary C# project so there&#39;s no option to increase Heap Size)\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIs there something else I need to specify in VSTS for this UITest project to build?\r\n\r\n  [1]: https://i.stack.imgur.com/lC57E.png","title":"Why do I get a Java OutOfMemory exception when building a UITest project, even when building in x64 with 2G heap?","body":"<p>We're developing an Android app using Xamarin. \nWe're using Visual Studio Team Services as our CI service. </p>\n\n<p>The project consist of (among other things)</p>\n\n<ul>\n<li>Droid.csproj (android project)</li>\n<li>UITest.csproj (C# assembly for UI tests)</li>\n</ul>\n\n<p>Recently the Droid.csproj failed the build because of a <code>java.lang.OutOfMemoryError: Java heap space</code> error. We changed the configuration of the server to run as x64, and increased the Java Max Heap Size to 2G. I can see in VSTS that the project is now successfully building.</p>\n\n<p>However, the UITest.csproj is failing, with the following:</p>\n\n<pre><code>2016-10-13T22:58:49.2048732Z ##[error]COMPILETODALVIK(0,0): Error : \n2016-10-13T22:58:49.2048732Z COMPILETODALVIK : UNEXPECTED TOP-LEVEL error :  [C:\\a\\1\\s\\Droid\\Mobile.Droid.csproj]\n2016-10-13T22:58:49.2048732Z   java.lang.OutOfMemoryError: Java heap space\n2016-10-13T22:58:49.2048732Z    at java.lang.Object.clone(Native Method)\n2016-10-13T22:58:49.2048732Z    at java.util.Arrays.sort(Arrays.java:1206)\n2016-10-13T22:58:49.2048732Z    at java.util.Collections.sort(Collections.java:157)\n2016-10-13T22:58:49.2048732Z    at com.android.dx.dex.file.MixedItemSection.placeItems(MixedItemSection.java:301)\n2016-10-13T22:58:49.2048732Z    at com.android.dx.dex.file.DexFile.toDex0(DexFile.java:541)\n2016-10-13T22:58:49.2048732Z    at com.android.dx.dex.file.DexFile.toDex(DexFile.java:214)\n2016-10-13T22:58:49.2048732Z    at com.android.dx.command.dexer.Main.writeDex(Main.java:856)\n2016-10-13T22:58:49.2048732Z    at com.android.dx.command.dexer.Main.runMonoDex(Main.java:323)\n2016-10-13T22:58:49.2048732Z    at com.android.dx.command.dexer.Main.run(Main.java:277)\n2016-10-13T22:58:49.2048732Z    at com.android.dx.command.dexer.Main.main(Main.java:245)\n2016-10-13T22:58:49.2048732Z    at com.android.dx.command.Main.main(Main.java:106)          \n</code></pre>\n\n<p>It seems the UITest is dependent on the Droid, which makes sense because it's testing the Droids UI components. Do I need to configure something in the UITest project for this to work?</p>\n\n<p>For reference, this is the project configuration screen for the UITest project: (as you can see, it's an ordinary C# project so there's no option to increase Heap Size)</p>\n\n<p><a href=\"https://i.stack.imgur.com/lC57E.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/lC57E.png\" alt=\"enter image description here\"></a></p>\n\n<p>Is there something else I need to specify in VSTS for this UITest project to build?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8031,"page":1961,"page_size":100}
