{"items":[{"tags":["java","spring-boot","csv","opencsv"],"owner":{"account_id":5640896,"reputation":187,"user_id":4464806,"display_name":"Abhinash Jha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677525642,"creation_date":1677523824,"question_id":75584449,"body_markdown":"I am using CsvToBean to parse a csv to bean. I am trying to  get the headers of the csv. This is the current setup I have:\r\n\r\n    CsvToBean&lt;T&gt; beans =\r\n              new CsvToBeanBuilder&lt;T&gt;(new FileReader(file))\r\n                  .withType(targetClazz)\r\n                  .withFieldAsNull(CSVReaderNullFieldIndicator.BOTH)\r\n                  .withThrowExceptions(false)\r\n                  .build();\r\n\r\nTo get the headers I did the following change:\r\n\r\n \r\n\r\n    public &lt;T&gt; CsvParserResult&lt;T&gt; parseFile(File file, Class&lt;? extends T&gt; targetClazz) {\r\n    \r\n    HeaderColumnNameMappingStrategy&lt;T&gt; strategy = new HeaderColumnNameMappingStrategy&lt;T&gt;();\r\n        strategy.setType(targetClazz);\r\n    CsvToBean&lt;T&gt; beans =\r\n              new CsvToBeanBuilder&lt;T&gt;(new FileReader(file))\r\n                  .withType(targetClazz)\r\n                  .withFieldAsNull(CSVReaderNullFieldIndicator.BOTH)\r\n                  .withThrowExceptions(false)\r\n                  .withMappingStrategy(strategy)\r\n                  .build();\r\n    \r\n    \r\n          String[] headers = strategy.generateHeader((T) targetClazz);\r\n\r\nThe problem is the headers retrieved is not in the order coming from csv but more in alphabetical order(which is not desired). Upon debugging I see this structure,\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aqzDl.png\r\n\r\nQuestions:\r\n1. is there a way to extract positionToHeader, present in the screenshot.\r\n2. Is there a clean way to get the headers. I have tried the following, but no result:\r\nhttps://stackoverflow.com/questions/56056890/how-to-fetch-and-validate-csv-header-in-open-csv and\r\nhttps://stackoverflow.com/questions/69012019/opencsv-validating-csv-header-with-bean-headers\r\n\r\nThanks!","title":"fetch csv header using opencsv","body":"<p>I am using CsvToBean to parse a csv to bean. I am trying to  get the headers of the csv. This is the current setup I have:</p>\n<pre><code>CsvToBean&lt;T&gt; beans =\n          new CsvToBeanBuilder&lt;T&gt;(new FileReader(file))\n              .withType(targetClazz)\n              .withFieldAsNull(CSVReaderNullFieldIndicator.BOTH)\n              .withThrowExceptions(false)\n              .build();\n</code></pre>\n<p>To get the headers I did the following change:</p>\n<pre><code>public &lt;T&gt; CsvParserResult&lt;T&gt; parseFile(File file, Class&lt;? extends T&gt; targetClazz) {\n\nHeaderColumnNameMappingStrategy&lt;T&gt; strategy = new HeaderColumnNameMappingStrategy&lt;T&gt;();\n    strategy.setType(targetClazz);\nCsvToBean&lt;T&gt; beans =\n          new CsvToBeanBuilder&lt;T&gt;(new FileReader(file))\n              .withType(targetClazz)\n              .withFieldAsNull(CSVReaderNullFieldIndicator.BOTH)\n              .withThrowExceptions(false)\n              .withMappingStrategy(strategy)\n              .build();\n\n\n      String[] headers = strategy.generateHeader((T) targetClazz);\n</code></pre>\n<p>The problem is the headers retrieved is not in the order coming from csv but more in alphabetical order(which is not desired). Upon debugging I see this structure,\n<a href=\"https://i.stack.imgur.com/aqzDl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aqzDl.png\" alt=\"enter image description here\" /></a></p>\n<p>Questions:</p>\n<ol>\n<li>is there a way to extract positionToHeader, present in the screenshot.</li>\n<li>Is there a clean way to get the headers. I have tried the following, but no result:\n<a href=\"https://stackoverflow.com/questions/56056890/how-to-fetch-and-validate-csv-header-in-open-csv\">how to fetch and validate csv header in open csv?</a> and\n<a href=\"https://stackoverflow.com/questions/69012019/opencsv-validating-csv-header-with-bean-headers\">Opencsv validating CSV header with bean headers</a></li>\n</ol>\n<p>Thanks!</p>\n"},{"tags":["java","spring-boot","rabbitmq","spring-boot-actuator"],"owner":{"account_id":12822065,"reputation":17,"user_id":10250453,"display_name":"krown_loki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1677525136,"creation_date":1677525136,"question_id":75584655,"body_markdown":"I have multiple services on Spring Boot. One of them is gateway for another services. Gateway has web implementation with controller and endpoints. When client makes request to a gateway, the gateway push message with data to rabbitmq so another services have rabbit listener to get and process a message. So I can run as many services as I want without port and web implementations.  \r\nNow I need to monitor services. For this I implement to gateway ```micrometer-registry-prometheus``` library. But I can&#39;t monitor another services with rabbit listeners because they don&#39;t have web implementation.  \r\nHow can I monitor services without web functions? I guess that implementing web starter only for actuator endpoints is a bad idea.","title":"How to setup monitoring for Spring Boot application without web endpoints","body":"<p>I have multiple services on Spring Boot. One of them is gateway for another services. Gateway has web implementation with controller and endpoints. When client makes request to a gateway, the gateway push message with data to rabbitmq so another services have rabbit listener to get and process a message. So I can run as many services as I want without port and web implementations.<br />\nNow I need to monitor services. For this I implement to gateway <code>micrometer-registry-prometheus</code> library. But I can't monitor another services with rabbit listeners because they don't have web implementation.<br />\nHow can I monitor services without web functions? I guess that implementing web starter only for actuator endpoints is a bad idea.</p>\n"},{"tags":["java","sorting","arraylist","comparator","greedy"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1677523794,"post_id":75584374,"comment_id":133351051,"body_markdown":"[Do not show pictures of text](/help/how-to-ask), just put the actual text in your post, in [code fences](/markdown). Also, look at your post after submitting: you have things in your code that are guaranteed not in your actual code.","body":"<a href=\"/help/how-to-ask\">Do not show pictures of text</a>, just put the actual text in your post, in <a href=\"/markdown\">code fences</a>. Also, look at your post after submitting: you have things in your code that are guaranteed not in your actual code."}],"answers":[{"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1677608037,"post_id":75584488,"comment_id":133370386,"body_markdown":"Or simply `return Float.compare(o1.ppw, o2.ppw);`","body":"Or simply <code>return Float.compare(o1.ppw, o2.ppw);</code>"}],"tags":[],"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677524078,"creation_date":1677524078,"answer_id":75584488,"question_id":75584374,"body_markdown":"&gt; I tried using simple array instead of arraylist and it worked correctly\r\n\r\nI find that hard to believe.  The `Comparator` you created is deficient, whether used with an array or with a `List`.\r\n\r\nYou are sorting based on `Item.ppw`, which is a `float`.  There&#39;s nothing inherently wrong with that, but consider your specific implementation:\r\n```\r\n        return (int) (o2.ppw) - (int) (o1.ppw);  \r\n```\r\nIf `o1.ppw` and `o2.ppw` are different, but `(int) o1.ppw` and `(int) o2.ppw` are the same, then the wrong result (`0`) will be returned.\r\n\r\nI&#39;m inclined to guess that you tried to adapt a more subtly flawed yet relatively common implementation for `int`-based comparisons.  Using a difference of two `int`s as the return value of a comparator is more right than your code, but it will still produce the wrong answer if the subtraction overflows.\r\n\r\nDon&#39;t try to be so clever.  A `Comparator` of this general form is perfectly good for comparing objects by any single field of primitive type:\r\n```\r\nclass CompareByPPW implements Comparator&lt;Item&gt; {\r\n    public int compare(Item o1, Item o2) {\r\n        if (o1.ppw &lt; o2.ppw) {\r\n            return -1;\r\n        } else if (o2.ppw &lt; o1.ppw) {\r\n            return 1;\r\n        } else {\r\n            return 0;\r\n        }\r\n    }\r\n}\r\n```","title":"error in arraylist sorting using collections.sort()","body":"<blockquote>\n<p>I tried using simple array instead of arraylist and it worked correctly</p>\n</blockquote>\n<p>I find that hard to believe.  The <code>Comparator</code> you created is deficient, whether used with an array or with a <code>List</code>.</p>\n<p>You are sorting based on <code>Item.ppw</code>, which is a <code>float</code>.  There's nothing inherently wrong with that, but consider your specific implementation:</p>\n<pre><code>        return (int) (o2.ppw) - (int) (o1.ppw);  \n</code></pre>\n<p>If <code>o1.ppw</code> and <code>o2.ppw</code> are different, but <code>(int) o1.ppw</code> and <code>(int) o2.ppw</code> are the same, then the wrong result (<code>0</code>) will be returned.</p>\n<p>I'm inclined to guess that you tried to adapt a more subtly flawed yet relatively common implementation for <code>int</code>-based comparisons.  Using a difference of two <code>int</code>s as the return value of a comparator is more right than your code, but it will still produce the wrong answer if the subtraction overflows.</p>\n<p>Don't try to be so clever.  A <code>Comparator</code> of this general form is perfectly good for comparing objects by any single field of primitive type:</p>\n<pre><code>class CompareByPPW implements Comparator&lt;Item&gt; {\n    public int compare(Item o1, Item o2) {\n        if (o1.ppw &lt; o2.ppw) {\n            return -1;\n        } else if (o2.ppw &lt; o1.ppw) {\n            return 1;\n        } else {\n            return 0;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27893557,"reputation":9,"user_id":21299372,"display_name":"Saransh Shukla"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1677528848,"answer_count":1,"score":-1,"last_activity_date":1677524078,"creation_date":1677523393,"question_id":75584374,"body_markdown":"I am writing a code on fractional knapsack. But, the sorting algorithm is not working well. And hence my code is not working correctly.\r\n\r\nThis is my code:\r\n\r\n    import java.util.*;\r\n    class Item {\r\n        int profit, weight;\r\n        float ppw;\r\n        //ppw is profit per weight\r\n        public Item(int profit, int weight) {\r\n            this.profit = profit;\r\n            this.weight = weight;\r\n            this.ppw= (float)profit / (float)weight;\r\n        }\r\n    }\r\n    \r\n    class SortbyPPW implements Comparator\\&lt;Item\\&gt; {\r\n        public int compare(Item o1, Item o2) {\r\n            return (int) (o2.ppw) - (int) (o1.ppw);  \r\n        }\r\n    }\r\n    \r\n    public class FractionalKnapSack {\r\n        public static void main(String args\\[\\]) {\r\n        Scanner sc = new Scanner(System.in);\r\n        System.out.print(&quot;Enter the number of elements: &quot;);\r\n        int n = sc.nextInt();\r\n        System.out.print(&quot;Enter maximum capacity: &quot;);\r\n        int capacity = sc.nextInt();\r\n        System.out.println(&quot;\\\\nEnter the items with their profit and weight separated by a space&quot;);\r\n    \r\n        ArrayList&lt;Item&gt; items = new ArrayList&lt;Item&gt;();\r\n        for (int i = 0; i &lt; n; i++) {\r\n            int profit = sc.nextInt();\r\n            int weight = sc.nextInt();\r\n            items.add(new Item(profit, weight));\r\n        }\r\n    \r\n        System.out.println(&quot;\\n&quot;);\r\n        for (Item item : items)\r\n            System.out.print(item.ppw+&quot; &quot;);\r\n        System.out.println(&quot;\\n&quot;);\r\n    \r\n    \r\n        System.out.println(Arrays.toString(items.toArray()));\r\n        double[] maxValue = getMaxValue(items, capacity);\r\n        System.out.println(&quot;\\nMaximum profit we can obtain = &quot; + maxValue[0]);\r\n        System.out.println(&quot;Capacity Used = &quot; + (capacity-maxValue[1]));\r\n        System.out.println(&quot;\\n&quot;);\r\n        System.out.println(Arrays.toString(items.toArray()));\r\n    \r\n        System.out.println(&quot;\\n&quot;);\r\n        for (Item item : items)\r\n            System.out.print(item.ppw+&quot; &quot;);\r\n        System.out.println(&quot;\\n&quot;);\r\n    }\r\n    \r\n    public static double[] getMaxValue(ArrayList&lt;Item&gt; items, int capacity) {\r\n        double maxValue = 0;\r\n        Collections.sort(items, new SortbyPPW());\r\n    \r\n        for (Item item : items) {\r\n            int currWeight = item.weight;\r\n            int currValue = item.profit;\r\n    \r\n            if (capacity - currWeight &gt;= 0) {\r\n                capacity -= currWeight;\r\n                maxValue += currValue;\r\n            } else {\r\n                double fraction = ((double) capacity / (double) currWeight);\r\n                maxValue += (currValue * fraction);\r\n                capacity = (int) (capacity - (currWeight * fraction));\r\n                break;\r\n            }\r\n        }\r\n        double[] arr1={maxValue, (double)capacity} ;\r\n        return arr1;\r\n    }\r\n\r\n}\r\n\r\nI tried using simple array instead of arraylist and it worked correctly but my teacher wants to code to have collections.sort() and comparator class implemented.\r\nThis is the input\r\n8\r\n40\r\n20 10\r\n30 15\r\n18 5\r\n25 12\r\n14 6\r\n24 8\r\n15 7\r\n10 3\r\n\r\nExpected Output\r\n103\\.91\r\nActual Output\r\n100\\.0\r\n\r\n[Input and Output on my laptop][1]\r\n\r\nBut, my code here got close only upto 100 and thus it&#39;s not correct completely.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BqKO6.png","title":"error in arraylist sorting using collections.sort()","body":"<p>I am writing a code on fractional knapsack. But, the sorting algorithm is not working well. And hence my code is not working correctly.</p>\n<p>This is my code:</p>\n<pre><code>import java.util.*;\nclass Item {\n    int profit, weight;\n    float ppw;\n    //ppw is profit per weight\n    public Item(int profit, int weight) {\n        this.profit = profit;\n        this.weight = weight;\n        this.ppw= (float)profit / (float)weight;\n    }\n}\n\nclass SortbyPPW implements Comparator\\&lt;Item\\&gt; {\n    public int compare(Item o1, Item o2) {\n        return (int) (o2.ppw) - (int) (o1.ppw);  \n    }\n}\n\npublic class FractionalKnapSack {\n    public static void main(String args\\[\\]) {\n    Scanner sc = new Scanner(System.in);\n    System.out.print(&quot;Enter the number of elements: &quot;);\n    int n = sc.nextInt();\n    System.out.print(&quot;Enter maximum capacity: &quot;);\n    int capacity = sc.nextInt();\n    System.out.println(&quot;\\\\nEnter the items with their profit and weight separated by a space&quot;);\n\n    ArrayList&lt;Item&gt; items = new ArrayList&lt;Item&gt;();\n    for (int i = 0; i &lt; n; i++) {\n        int profit = sc.nextInt();\n        int weight = sc.nextInt();\n        items.add(new Item(profit, weight));\n    }\n\n    System.out.println(&quot;\\n&quot;);\n    for (Item item : items)\n        System.out.print(item.ppw+&quot; &quot;);\n    System.out.println(&quot;\\n&quot;);\n\n\n    System.out.println(Arrays.toString(items.toArray()));\n    double[] maxValue = getMaxValue(items, capacity);\n    System.out.println(&quot;\\nMaximum profit we can obtain = &quot; + maxValue[0]);\n    System.out.println(&quot;Capacity Used = &quot; + (capacity-maxValue[1]));\n    System.out.println(&quot;\\n&quot;);\n    System.out.println(Arrays.toString(items.toArray()));\n\n    System.out.println(&quot;\\n&quot;);\n    for (Item item : items)\n        System.out.print(item.ppw+&quot; &quot;);\n    System.out.println(&quot;\\n&quot;);\n}\n\npublic static double[] getMaxValue(ArrayList&lt;Item&gt; items, int capacity) {\n    double maxValue = 0;\n    Collections.sort(items, new SortbyPPW());\n\n    for (Item item : items) {\n        int currWeight = item.weight;\n        int currValue = item.profit;\n\n        if (capacity - currWeight &gt;= 0) {\n            capacity -= currWeight;\n            maxValue += currValue;\n        } else {\n            double fraction = ((double) capacity / (double) currWeight);\n            maxValue += (currValue * fraction);\n            capacity = (int) (capacity - (currWeight * fraction));\n            break;\n        }\n    }\n    double[] arr1={maxValue, (double)capacity} ;\n    return arr1;\n}\n</code></pre>\n<p>}</p>\n<p>I tried using simple array instead of arraylist and it worked correctly but my teacher wants to code to have collections.sort() and comparator class implemented.\nThis is the input\n8\n40\n20 10\n30 15\n18 5\n25 12\n14 6\n24 8\n15 7\n10 3</p>\n<p>Expected Output\n103.91\nActual Output\n100.0</p>\n<p><a href=\"https://i.stack.imgur.com/BqKO6.png\" rel=\"nofollow noreferrer\">Input and Output on my laptop</a></p>\n<p>But, my code here got close only upto 100 and thus it's not correct completely.</p>\n"},{"tags":["java","spring","maven","unit-testing"],"comments":[{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1465725693,"post_id":37772538,"comment_id":63013711,"body_markdown":"There are several opinions on how to call such a test correctly. I call them integration tests (as also the annotation `@WebIntegrationTest` suggests), because even if you test only a specific method, you run the whole application context. Instead write real unit tests and mock the class dependencies. Then your test runs in a few milliseconds.","body":"There are several opinions on how to call such a test correctly. I call them integration tests (as also the annotation <code>@WebIntegrationTest</code> suggests), because even if you test only a specific method, you run the whole application context. Instead write real unit tests and mock the class dependencies. Then your test runs in a few milliseconds."}],"answers":[{"comments":[{"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"score":0,"creation_date":1695286807,"post_id":37773001,"comment_id":136005139,"body_markdown":"Could you add some comments to each line of code to explain a bit more?","body":"Could you add some comments to each line of code to explain a bit more?"}],"tags":[],"owner":{"account_id":8616058,"reputation":736,"user_id":6452852,"display_name":"Andrei Bardyshev"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1465734134,"creation_date":1465726087,"answer_id":37773001,"question_id":37772538,"body_markdown":"One of the ways to make spring mvc tests much faster is to use `MockMvcBuilders.standaloneSetup` With this setup you use not a real but a mocked application context. This setup has a very [reach configuration options](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/web/servlet/setup/StandaloneMockMvcBuilder.html) and in my experience, it is sufficient for most of controller tests. \r\n\r\nThat way you need to create your controller instances and inject them with mocked dependencies by hand. Here is an example of MockMvc unit test with standalone setup.\r\n\r\n    // setup beans and mockMvc\r\n    UserDAO userDAO = mock(UserDAO.class);\r\n    UserController userController = new UserController(userDAO);\r\n    MockMvc mockMvc = standaloneSetup(userController)\r\n                 .setViewResolvers(new WebConfig().viewResolver())\r\n                 .build();\r\n    ...\r\n\r\n    // do test\r\n    mockMvc.perform(get(USERS))\r\n                .andExpect(view().name(USERS_VIEW_NAME))\r\n                .andExpect(model().attribute(TOTAL, 20))","title":"Slow unit testing in spring-boot application","body":"<p>One of the ways to make spring mvc tests much faster is to use <code>MockMvcBuilders.standaloneSetup</code> With this setup you use not a real but a mocked application context. This setup has a very <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/web/servlet/setup/StandaloneMockMvcBuilder.html\" rel=\"nofollow\">reach configuration options</a> and in my experience, it is sufficient for most of controller tests. </p>\n\n<p>That way you need to create your controller instances and inject them with mocked dependencies by hand. Here is an example of MockMvc unit test with standalone setup.</p>\n\n<pre><code>// setup beans and mockMvc\nUserDAO userDAO = mock(UserDAO.class);\nUserController userController = new UserController(userDAO);\nMockMvc mockMvc = standaloneSetup(userController)\n             .setViewResolvers(new WebConfig().viewResolver())\n             .build();\n...\n\n// do test\nmockMvc.perform(get(USERS))\n            .andExpect(view().name(USERS_VIEW_NAME))\n            .andExpect(model().attribute(TOTAL, 20))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1530553731,"creation_date":1465732775,"answer_id":37773971,"question_id":37772538,"body_markdown":"I&#39;ll refer your sentence:\r\n\r\n&gt; So let&#39;s say I introduce a new feature and want to test for bugs. I\r\n&gt; use mvn test form the command line. Then all the test are run but i\r\n&gt; think it will take ages for a real application with a lot of tests.\r\n\r\nThis question you raise here is very important, so I&#39;ll try to provide an architectural point of view here without delving into technical implementation.\r\n\r\nThere are many different kinds of tests. What you&#39;re referring to is called an integration test, and not a unit test. The difference between those two that in unit tests you&#39;re testing one class and all the rest should be mocked (there are frameworks like EasyMock or Mockito for this).\r\n\r\nUnit test has a lot of restrictions:\r\n\r\n - You cannot access any external components (web servers, db and so forth)\r\n - Unit tests run only in memory \r\n - They are extremely fast (particle of second).\r\n\r\nThese tests are very helpful when it comes to testing the functionality of your classes\r\n\r\nNow when the development of the feature is done, its time to test that the feature works in &quot;semi-real&quot; environment. Usually when running those, there is a database available as well as spring container. For running this kind of tests you can use spring tests extensions and use different techniques (for example, substitute one the whole application spring context with a &quot;partial&quot; context or override some beans with stubs or something.\r\n\r\nNow, this difference is interesting in the context of your question because there should be many unit tests and substantially less integration tests in the application. So if you can cover something you&#39;ve written with unit tests - write unit tests. It&#39;s incredibly fast by nature and you can run a lot of those (thousands) in no-time. Only if you (rarely) cannot cover your functionality in unit tests - write the integration test. This will typically relevant for code that runs against the DB for example and you would like to test whether the queries produced by the component are really valid. \r\n\r\nSo generally if you have both types of tests you should be covered and there should be not so many integration tests, so running those shouldn&#39;t be a real hassle.\r\n","title":"Slow unit testing in spring-boot application","body":"<p>I'll refer your sentence:</p>\n\n<blockquote>\n  <p>So let's say I introduce a new feature and want to test for bugs. I\n  use mvn test form the command line. Then all the test are run but i\n  think it will take ages for a real application with a lot of tests.</p>\n</blockquote>\n\n<p>This question you raise here is very important, so I'll try to provide an architectural point of view here without delving into technical implementation.</p>\n\n<p>There are many different kinds of tests. What you're referring to is called an integration test, and not a unit test. The difference between those two that in unit tests you're testing one class and all the rest should be mocked (there are frameworks like EasyMock or Mockito for this).</p>\n\n<p>Unit test has a lot of restrictions:</p>\n\n<ul>\n<li>You cannot access any external components (web servers, db and so forth)</li>\n<li>Unit tests run only in memory </li>\n<li>They are extremely fast (particle of second).</li>\n</ul>\n\n<p>These tests are very helpful when it comes to testing the functionality of your classes</p>\n\n<p>Now when the development of the feature is done, its time to test that the feature works in \"semi-real\" environment. Usually when running those, there is a database available as well as spring container. For running this kind of tests you can use spring tests extensions and use different techniques (for example, substitute one the whole application spring context with a \"partial\" context or override some beans with stubs or something.</p>\n\n<p>Now, this difference is interesting in the context of your question because there should be many unit tests and substantially less integration tests in the application. So if you can cover something you've written with unit tests - write unit tests. It's incredibly fast by nature and you can run a lot of those (thousands) in no-time. Only if you (rarely) cannot cover your functionality in unit tests - write the integration test. This will typically relevant for code that runs against the DB for example and you would like to test whether the queries produced by the component are really valid. </p>\n\n<p>So generally if you have both types of tests you should be covered and there should be not so many integration tests, so running those shouldn't be a real hassle.</p>\n"}],"owner":{"account_id":4247506,"reputation":1690,"user_id":3475722,"accept_rate":83,"display_name":"Greg"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13068,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":37773971,"answer_count":2,"score":13,"last_activity_date":1677523559,"creation_date":1465722749,"question_id":37772538,"body_markdown":"I&#39;m still new to unit testing. I started to read a book about it. But one of the most important thing is that a test hast to be FIRST (Fast, Isolated, Repeatable, Self-validating, Timely).\r\n\r\nOkay, now I was ready for a bit of practice. But when I was building unit test in spring boot. I like to keep them separated.\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @ContextConfiguration(classes = UnitTestApplication.class, loader = SpringApplicationContextLoader.class)\r\n    @WebIntegrationTest(&quot;server.port:9000&quot;)\r\n    public class FirstTestClassTest{\r\n    \r\n        ...\r\n    \r\n    }\r\n\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @ContextConfiguration(classes = UnitTestApplication.class, loader = SpringApplicationContextLoader.class)\r\n    @WebIntegrationTest(&quot;server.port:9001&quot;)\r\n    public class SecondTestClassTest{\r\n    \r\n        ...\r\n    \r\n    }\r\n\r\n\r\nThis gives me the problem that for every test class there is a new instance started of the application. \r\n\r\nSo let&#39;s say I introduce a new feature and want to test for bugs. I use `mvn test` from the command line. Then all the test are run but i think it will take ages for a real application with a lot of tests.\r\n\r\n\r\nI there a way that there is only one instance started and keep the test fast but where i can keep the test in separate classes? ","title":"Slow unit testing in spring-boot application","body":"<p>I'm still new to unit testing. I started to read a book about it. But one of the most important thing is that a test hast to be FIRST (Fast, Isolated, Repeatable, Self-validating, Timely).</p>\n<p>Okay, now I was ready for a bit of practice. But when I was building unit test in spring boot. I like to keep them separated.</p>\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(classes = UnitTestApplication.class, loader = SpringApplicationContextLoader.class)\n@WebIntegrationTest(&quot;server.port:9000&quot;)\npublic class FirstTestClassTest{\n\n    ...\n\n}\n\n\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(classes = UnitTestApplication.class, loader = SpringApplicationContextLoader.class)\n@WebIntegrationTest(&quot;server.port:9001&quot;)\npublic class SecondTestClassTest{\n\n    ...\n\n}\n</code></pre>\n<p>This gives me the problem that for every test class there is a new instance started of the application.</p>\n<p>So let's say I introduce a new feature and want to test for bugs. I use <code>mvn test</code> from the command line. Then all the test are run but i think it will take ages for a real application with a lot of tests.</p>\n<p>I there a way that there is only one instance started and keep the test fast but where i can keep the test in separate classes?</p>\n"},{"tags":["java","eclipse","intellij-idea","markdown","javadoc"],"comments":[{"owner":{"account_id":7525670,"reputation":12204,"user_id":5715934,"accept_rate":95,"display_name":"Supun Wijerathne"},"score":0,"creation_date":1474208998,"post_id":39556829,"comment_id":66428035,"body_markdown":"I am not pretty much clear what you question is? Are you asking an md option for eclipse??","body":"I am not pretty much clear what you question is? Are you asking an md option for eclipse??"},{"owner":{"account_id":1817178,"reputation":4027,"user_id":1654284,"accept_rate":67,"display_name":"mchlfchr"},"score":0,"creation_date":1474210292,"post_id":39556829,"comment_id":66428449,"body_markdown":"I updated the description of the question","body":"I updated the description of the question"},{"owner":{"account_id":2824905,"reputation":3525,"user_id":2427750,"display_name":"Mickael"},"score":0,"creation_date":1474277602,"post_id":39556829,"comment_id":66449431,"body_markdown":"Javadoc is really HTML by specification, and most IDEs stick to specification rather than to the myriad of alternatives. What you&#39;re asking for is very likely to not be available, so I would recommend that rather than introducing complexity by using alternatives that aren&#39;t well supported by most standard tools, you consider sticking to good old Javadoc which works like a charm.","body":"Javadoc is really HTML by specification, and most IDEs stick to specification rather than to the myriad of alternatives. What you&#39;re asking for is very likely to not be available, so I would recommend that rather than introducing complexity by using alternatives that aren&#39;t well supported by most standard tools, you consider sticking to good old Javadoc which works like a charm."},{"owner":{"account_id":47518,"reputation":21228,"user_id":140803,"accept_rate":78,"display_name":"Blessed Geek"},"score":6,"creation_date":1554031537,"post_id":39556829,"comment_id":97597128,"body_markdown":"&quot;Javadoc is really HTML by specification&quot; - then it is a very poor and outdated specification. MD is the way most and any same programmer would prefer writing javadoc. And your recommendation is ill-advised, rather than pushing and pressing for the needed change. Javadoc as you like it IRREFUTABLY is an annoyance to vast majority and CERTAINLY does not &quot;work like a charm&quot;.","body":"&quot;Javadoc is really HTML by specification&quot; - then it is a very poor and outdated specification. MD is the way most and any same programmer would prefer writing javadoc. And your recommendation is ill-advised, rather than pushing and pressing for the needed change. Javadoc as you like it IRREFUTABLY is an annoyance to vast majority and CERTAINLY does not &quot;work like a charm&quot;."},{"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"score":0,"creation_date":1564404624,"post_id":39556829,"comment_id":101008151,"body_markdown":"@BlessedGeek At the risk of igniting a flamewar here: What you are reading here is (rendered) HTML. Even Markdown is converted into HTML to be displayed. And JavaDoc *does* work like a charm, and I never heard of it to be an &quot;annoyance&quot;. (But maybe I&#39;m just hadened by using Doxygen...)","body":"@BlessedGeek At the risk of igniting a flamewar here: What you are reading here is (rendered) HTML. Even Markdown is converted into HTML to be displayed. And JavaDoc <i>does</i> work like a charm, and I never heard of it to be an &quot;annoyance&quot;. (But maybe I&#39;m just hadened by using Doxygen...)"},{"owner":{"account_id":3001208,"reputation":577,"user_id":2546679,"display_name":"haui"},"score":2,"creation_date":1590163866,"post_id":39556829,"comment_id":109585926,"body_markdown":"@Marco13 Reading **rendered** HTML is great, but **writing** HTML with a text editor is pita.","body":"@Marco13 Reading <b>rendered</b> HTML is great, but <b>writing</b> HTML with a text editor is pita."},{"owner":{"account_id":223484,"reputation":61196,"user_id":482717,"accept_rate":66,"display_name":"Paul Verest"},"score":0,"creation_date":1615952636,"post_id":39556829,"comment_id":117849233,"body_markdown":"Linking to https://stackoverflow.com/questions/54738479/add-example-usage-markdown-to-javadocs and https://stackoverflow.com/questions/28954774/how-to-enable-markdown-in-intellij","body":"Linking to <a href=\"https://stackoverflow.com/questions/54738479/add-example-usage-markdown-to-javadocs\" title=\"add example usage markdown to javadocs\">stackoverflow.com/questions/54738479/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/28954774/how-to-enable-markdown-in-intellij\" title=\"how to enable markdown in intellij\">stackoverflow.com/questions/28954774/&hellip;</a>"},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":1,"creation_date":1631303890,"post_id":39556829,"comment_id":122195142,"body_markdown":"To add to @haui&#39;s point, reading **unrendered** HTML is also a PITA.  It can be a pain to read through the HTML tag noise.  And for me at least, given my IDE&#39;s auto-completion of HTML, it&#39;s almost more annoying to read unrendered HTML than to edit it in a Javadoc.","body":"To add to @haui&#39;s point, reading <b>unrendered</b> HTML is also a PITA.  It can be a pain to read through the HTML tag noise.  And for me at least, given my IDE&#39;s auto-completion of HTML, it&#39;s almost more annoying to read unrendered HTML than to edit it in a Javadoc."},{"owner":{"account_id":1845234,"reputation":988,"user_id":1673705,"display_name":"barneypitt"},"score":1,"creation_date":1659009315,"post_id":39556829,"comment_id":129196584,"body_markdown":"&quot;Javadoc works like a charm&quot;? If I&#39;d have been drinking coffee when I read that it would probably have shot out of my nose. Next you&#39;ll be telling us that type-erased generics &quot;work like a charm&quot;... or that Spring and Hibernate &quot;work like a charm&quot;.","body":"&quot;Javadoc works like a charm&quot;? If I&#39;d have been drinking coffee when I read that it would probably have shot out of my nose. Next you&#39;ll be telling us that type-erased generics &quot;work like a charm&quot;... or that Spring and Hibernate &quot;work like a charm&quot;."},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1690916267,"post_id":39556829,"comment_id":135418852,"body_markdown":"JavaDoc is *not* HTML by specification. HTML is part of the [StandardDoclet &quot;specification&quot;;](https://docs.oracle.com/en/java/javase/20/docs/specs/javadoc/doc-comment-spec.html) it&#39;s a convention or de facto standard, but not a requirement. JavaDoc from the get-go provided support for alternative doclets to generate different formats *or* interpret different inputs.","body":"JavaDoc is <i>not</i> HTML by specification. HTML is part of the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/javadoc/doc-comment-spec.html\" rel=\"nofollow noreferrer\">StandardDoclet &quot;specification&quot;;</a> it&#39;s a convention or de facto standard, but not a requirement. JavaDoc from the get-go provided support for alternative doclets to generate different formats <i>or</i> interpret different inputs."}],"answers":[{"tags":[],"owner":{"account_id":1069912,"reputation":5754,"user_id":1069454,"display_name":"Sebastien"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615952291,"creation_date":1574156518,"answer_id":58930892,"question_id":39556829,"body_markdown":"IntelliJ has a plugin to support markdow javadoc\r\nhttps://plugins.jetbrains.com/plugin/9840-markdown-doclet-for-idea\r\n\r\n**Note** that the plugin has not been updated since 2017\r\nand the maven plugin has not been updated since 2016, see https://mvnrepository.com/artifact/ch.raffael.pegdown-doclet/pegdown-doclet","title":"markdown replacement for javadoc, also for IDEs","body":"<p>IntelliJ has a plugin to support markdow javadoc\n<a href=\"https://plugins.jetbrains.com/plugin/9840-markdown-doclet-for-idea\" rel=\"nofollow noreferrer\">https://plugins.jetbrains.com/plugin/9840-markdown-doclet-for-idea</a></p>\n<p><strong>Note</strong> that the plugin has not been updated since 2017\nand the maven plugin has not been updated since 2016, see <a href=\"https://mvnrepository.com/artifact/ch.raffael.pegdown-doclet/pegdown-doclet\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/ch.raffael.pegdown-doclet/pegdown-doclet</a></p>\n"},{"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1677499247,"post_id":75579702,"comment_id":133343197,"body_markdown":"I was curious and checked the [javadoc-dev archives](https://mail.openjdk.org/pipermail/javadoc-dev/) as well as the [GH pull request](https://github.com/openjdk/jdk/pull/11701). The original author notes in the PR: &quot;FYI, the PR has been withdrawn for now, pending additional design discussions.&quot; Unfortunately I don&#39;t see that discussion in the mailing list archives. I hope it doesn&#39;t just happen &quot;offline&quot;, as I&#39;d be curious to take a look into that.","body":"I was curious and checked the <a href=\"https://mail.openjdk.org/pipermail/javadoc-dev/\" rel=\"nofollow noreferrer\">javadoc-dev archives</a> as well as the <a href=\"https://github.com/openjdk/jdk/pull/11701\" rel=\"nofollow noreferrer\">GH pull request</a>. The original author notes in the PR: &quot;FYI, the PR has been withdrawn for now, pending additional design discussions.&quot; Unfortunately I don&#39;t see that discussion in the mailing list archives. I hope it doesn&#39;t just happen &quot;offline&quot;, as I&#39;d be curious to take a look into that."},{"owner":{"account_id":465074,"reputation":12318,"user_id":868941,"accept_rate":75,"display_name":"rmuller"},"score":0,"creation_date":1677500376,"post_id":75579702,"comment_id":133343506,"body_markdown":"@JoachimSauer :) AFAIK these kind of discussions are mostly offline, until there is a well thought out draft. This can take a while .. For sure it will not land in the next LTS (21)","body":"@JoachimSauer :) AFAIK these kind of discussions are mostly offline, until there is a well thought out draft. This can take a while .. For sure it will not land in the next LTS (21)"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1677500493,"post_id":75579702,"comment_id":133343535,"body_markdown":"Yeah, I know. I just think it&#39;s unfortunate, because having a written record of these discussions can sometimes be very useful. Or at the very least insightful for future decisions.","body":"Yeah, I know. I just think it&#39;s unfortunate, because having a written record of these discussions can sometimes be very useful. Or at the very least insightful for future decisions."}],"tags":[],"owner":{"account_id":465074,"reputation":12318,"user_id":868941,"accept_rate":75,"display_name":"rmuller"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677523188,"creation_date":1677496219,"answer_id":75579702,"question_id":39556829,"body_markdown":"In Java 13 the legacy doclet API (`com.sun.javadoc`) is removed and only the new doclet API (`jdk.javadoc.doclet`), introduced in Java 9 can be used.\r\n\r\n[jdrupes-mdoclet](https://github.com/mnlipp/jdrupes-mdoclet) is an alternative for the `abnaxos/pegdown-doclet` and support the new doclet API and modern JVM&#39;s (Java 17 for version 3).\r\n\r\nAlso note that there exists a [JEP draft](https://openjdk.org/jeps/8299906), for adding this functionality to the standard `javadoc` tool. However, this JEP is [withdrawn](https://bugs.openjdk.org/browse/JDK-8299906) for now, &quot;pending additional design discussions&quot;.\r\n\r\n**UPDATE**: For using `jdrupes-mdoclet` with maven, see https://github.com/mnlipp/jdrupes-mdoclet/issues/11","title":"markdown replacement for javadoc, also for IDEs","body":"<p>In Java 13 the legacy doclet API (<code>com.sun.javadoc</code>) is removed and only the new doclet API (<code>jdk.javadoc.doclet</code>), introduced in Java 9 can be used.</p>\n<p><a href=\"https://github.com/mnlipp/jdrupes-mdoclet\" rel=\"nofollow noreferrer\">jdrupes-mdoclet</a> is an alternative for the <code>abnaxos/pegdown-doclet</code> and support the new doclet API and modern JVM's (Java 17 for version 3).</p>\n<p>Also note that there exists a <a href=\"https://openjdk.org/jeps/8299906\" rel=\"nofollow noreferrer\">JEP draft</a>, for adding this functionality to the standard <code>javadoc</code> tool. However, this JEP is <a href=\"https://bugs.openjdk.org/browse/JDK-8299906\" rel=\"nofollow noreferrer\">withdrawn</a> for now, &quot;pending additional design discussions&quot;.</p>\n<p><strong>UPDATE</strong>: For using <code>jdrupes-mdoclet</code> with maven, see <a href=\"https://github.com/mnlipp/jdrupes-mdoclet/issues/11\" rel=\"nofollow noreferrer\">https://github.com/mnlipp/jdrupes-mdoclet/issues/11</a></p>\n"}],"owner":{"account_id":1817178,"reputation":4027,"user_id":1654284,"accept_rate":67,"display_name":"mchlfchr"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4405,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":2,"score":16,"last_activity_date":1677523188,"creation_date":1474195796,"question_id":39556829,"body_markdown":"I found already a possible solution, described at https://dzone.com/articles/using-markdown-syntax-javadoc, which is based upon https://github.com/Abnaxos/pegdown-doclet.\r\nThis enables markdown support as a replacement for writing the ugly HTML tags in Javadoc.\r\n\r\nOn the GitHub page, there is also a &quot;markdown-compatible-tooltip&quot; solution as plugin for using the CTRL+Q tooltip in IntelliJ, which is 50% good.\r\n\r\nJust to give an example, how the Javadoc is currently looking:\r\n\r\n```java\r\n/**\r\n * This enum gives you insight for various person characteristics.\r\n * &lt;p&gt;\r\n * This could be the following:\r\n * &lt;ul&gt;\r\n * &lt;li&gt;introvert&lt;/li&gt;\r\n * &lt;li&gt;extrovert&lt;/li&gt;\r\n * &lt;/ul&gt;\r\n */\r\npublic enum PersonTypes {\r\n...\r\n}\r\n```\r\n\r\nSo, it&#39;s ok, if you tooltipping/mouse-hovering over the class in an IDE.\r\nNevertheless, it&#39;s hard to read if you are directly in the concerned class, caused by the HTML tags and other macros. And this is only a very simple example without any Javadoc specific macros.\r\n\r\nSo, as described on the website above, I&#39;d like to replace the Javadoc stuff with the Markdown syntax in the source code directly. Applied to the example, this would look like:\r\n\r\n```java\r\n/**\r\n * This enum gives you insight for various person characteristics.\r\n * \r\n * This could be the following:\r\n *\r\n * - introvert\r\n * - extrovert\r\n * \r\n */\r\npublic enum PersonTypes {\r\n...\r\n}\r\n```\r\n\r\nWhen hovering over `PersonTypes` enum in Eclipse, the Markdown syntax is getting lost, because Eclipse interprets it as Javadoc and not as Markdown by default.\r\n\r\nUnfortunately I currently have no solution found for enable that Markdown tooltip parsing for Eclipse.\r\nDoes anyone else have a solution or other ideas?","title":"markdown replacement for javadoc, also for IDEs","body":"<p>I found already a possible solution, described at <a href=\"https://dzone.com/articles/using-markdown-syntax-javadoc\" rel=\"noreferrer\">https://dzone.com/articles/using-markdown-syntax-javadoc</a>, which is based upon <a href=\"https://github.com/Abnaxos/pegdown-doclet\" rel=\"noreferrer\">https://github.com/Abnaxos/pegdown-doclet</a>.\nThis enables markdown support as a replacement for writing the ugly HTML tags in Javadoc.</p>\n\n<p>On the GitHub page, there is also a \"markdown-compatible-tooltip\" solution as plugin for using the CTRL+Q tooltip in IntelliJ, which is 50% good.</p>\n\n<p>Just to give an example, how the Javadoc is currently looking:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * This enum gives you insight for various person characteristics.\n * &lt;p&gt;\n * This could be the following:\n * &lt;ul&gt;\n * &lt;li&gt;introvert&lt;/li&gt;\n * &lt;li&gt;extrovert&lt;/li&gt;\n * &lt;/ul&gt;\n */\npublic enum PersonTypes {\n...\n}\n</code></pre>\n\n<p>So, it's ok, if you tooltipping/mouse-hovering over the class in an IDE.\nNevertheless, it's hard to read if you are directly in the concerned class, caused by the HTML tags and other macros. And this is only a very simple example without any Javadoc specific macros.</p>\n\n<p>So, as described on the website above, I'd like to replace the Javadoc stuff with the Markdown syntax in the source code directly. Applied to the example, this would look like:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * This enum gives you insight for various person characteristics.\n * \n * This could be the following:\n *\n * - introvert\n * - extrovert\n * \n */\npublic enum PersonTypes {\n...\n}\n</code></pre>\n\n<p>When hovering over <code>PersonTypes</code> enum in Eclipse, the Markdown syntax is getting lost, because Eclipse interprets it as Javadoc and not as Markdown by default.</p>\n\n<p>Unfortunately I currently have no solution found for enable that Markdown tooltip parsing for Eclipse.\nDoes anyone else have a solution or other ideas?</p>\n"},{"tags":["java","hadoop","pyspark","delta-lake","java.library.path"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1677458788,"post_id":75563134,"comment_id":133336432,"body_markdown":"Does your code work? You can ignore that warning","body":"Does your code work? You can ignore that warning"},{"owner":{"account_id":913727,"reputation":2574,"user_id":947012,"accept_rate":60,"display_name":"greatvovan"},"score":0,"creation_date":1677484474,"post_id":75563134,"comment_id":133339499,"body_markdown":"@OneCricketeer, yes, as mentioned in the question, the code works. If I understand correctly, there is a performance benefit of using native libraries, isn&#39;t it?","body":"@OneCricketeer, yes, as mentioned in the question, the code works. If I understand correctly, there is a performance benefit of using native libraries, isn&#39;t it?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1677510022,"post_id":75563134,"comment_id":133346604,"body_markdown":"Sure, but the included ones are built for 32bit - https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/NativeLibraries.html","body":"Sure, but the included ones are built for 32bit - <a href=\"https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/NativeLibraries.html\" rel=\"nofollow noreferrer\">hadoop.apache.org/docs/current/hadoop-project-dist/&hellip;</a>"},{"owner":{"account_id":913727,"reputation":2574,"user_id":947012,"accept_rate":60,"display_name":"greatvovan"},"score":0,"creation_date":1677522338,"post_id":75563134,"comment_id":133350626,"body_markdown":"@OneCricketeer `file libhadoop.so.1.0.0:`\n`libhadoop.so.1.0.0: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV)...`","body":"@OneCricketeer <code>file libhadoop.so.1.0.0:</code> <code>libhadoop.so.1.0.0: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV)...</code>"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1677532374,"post_id":75563134,"comment_id":133353083,"body_markdown":"Yes, I see that from your post... I have not done any of this in Docker, so I am really sure. You may need to modify `spark-env.sh` file","body":"Yes, I see that from your post... I have not done any of this in Docker, so I am really sure. You may need to modify <code>spark-env.sh</code> file"}],"owner":{"account_id":913727,"reputation":2574,"user_id":947012,"accept_rate":60,"display_name":"greatvovan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":324,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677522944,"creation_date":1677296233,"question_id":75563134,"body_markdown":"I checked [this question][1] and tried every single answer except rebuilding Hadoop (which is failing with endless errors so far). My hope is that the binaries from the official Hadoop [distribution][2] will do, but I can&#39;t make it work.\r\n\r\nDockerfile:\r\n```docker\r\nFROM python:3.10\r\nRUN apt update\r\nRUN apt install -y default-jdk\r\nRUN pip install pyspark==3.3.2 delta-spark==2.2.0\r\nENV JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\r\nENV HADOOP_HOME /app/hadoop-3.3.4\r\nENV HADOOP_OPTS -Djava.library.path=/app/hadoop-3.3.4/lib/native\r\nENV HADOOP_PREFIX /app/hadoop-3.3.4\r\nENV HADOOP_COMMON_HOME /app/hadoop-3.3.4\r\nENV HADOOP_COMMON_LIB_NATIVE_DIR /app/hadoop-3.3.4/lib/native\r\nENV HADOOP_CONF_DIR /app/hadoop-3.3.4/etc/hadoop\r\nENV HADOOP_HDFS_HOME /app/hadoop-3.3.4\r\nENV LD_LIBRARY_PATH /usr/lib/hadoop/lib/native\r\nENV JAVA_LIBRARY_PATH /app/hadoop-3.3.4/lib/native\r\nWORKDIR /app\r\n```\r\n\r\nmain.py:\r\n```python\r\nfrom pyspark.sql.session import SparkSession\r\nfrom delta import configure_spark_with_delta_pip\r\n\r\nbuilder = SparkSession.builder.appName(&quot;my&quot;) \\\r\n    .config(&#39;spark.sql.extensions&#39;, &#39;io.delta.sql.DeltaSparkSessionExtension&#39;) \\\r\n    .config(&#39;spark.sql.catalog.spark_catalog&#39;, &#39;org.apache.spark.sql.delta.catalog.DeltaCatalog&#39;)\r\n\r\nspark = configure_spark_with_delta_pip(builder) \\\r\n    .getOrCreate()\r\n```\r\n\r\n```cmd\r\n% tar -zxf hadoop-3.3.4.tar.gz\r\n% docker build . -t mydelta\r\n% docker run -it --rm -v `pwd`:/app mydelta bash\r\n\r\n% python main.py\r\n...\r\n23/02/25 02:13:34 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\r\n...\r\n```\r\n\r\nFunctionally it works well, but I would like to get rid of the warning.\r\n\r\n```\r\n% printenv | grep &quot;HADOOP\\|JAVA&quot;\r\nHADOOP_OPTS=/app/hadoop-3.3.4/lib/native\r\nJAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\r\nHADOOP_COMMON_HOME=/app/hadoop-3.3.4\r\nHADOOP_CONF_DIR=/app/hadoop-3.3.4/etc/hadoop\r\nHADOOP_HOME=/app/hadoop-3.3.4\r\nHADOOP_HDFS_HOME=/app/hadoop-3.3.4\r\nJAVA_LIBRARY_PATH=/app/hadoop-3.3.4/lib/native\r\nHADOOP_COMMON_LIB_NATIVE_DIR=/app/hadoop-3.3.4/lib/native\r\nHADOOP_PREFIX=/app/hadoop-3.3.4\r\n\r\n% ls -l $HADOOP_COMMON_LIB_NATIVE_DIR\r\ntotal 166800\r\ndrwxr-xr-x 6 root root       192 Jul 29  2022 examples\r\n-rw-r--r-- 1 root root   1507316 Jul 29  2022 libhadoop.a\r\nlrwxr-xr-x 1 root root        18 Jul 29  2022 libhadoop.so -&gt; libhadoop.so.1.0.0\r\n-rwxr-xr-x 1 root root    803040 Jul 29  2022 libhadoop.so.1.0.0\r\n-rw-r--r-- 1 root root   1741256 Jul 29  2022 libhadooppipes.a\r\n-rw-r--r-- 1 root root    754382 Jul 29  2022 libhadooputils.a\r\n-rw-r--r-- 1 root root    551572 Jul 29  2022 libhdfs.a\r\nlrwxr-xr-x 1 root root        16 Jul 29  2022 libhdfs.so -&gt; libhdfs.so.0.0.0\r\n-rwxr-xr-x 1 root root    333656 Jul 29  2022 libhdfs.so.0.0.0\r\n-rw-r--r-- 1 root root 106649802 Jul 29  2022 libhdfspp.a\r\nlrwxr-xr-x 1 root root        18 Jul 29  2022 libhdfspp.so -&gt; libhdfspp.so.0.1.0\r\n-rwxr-xr-x 1 root root  44450288 Jul 29  2022 libhdfspp.so.0.1.0\r\n-rw-r--r-- 1 root root  10010090 Jul 29  2022 libnativetask.a\r\nlrwxr-xr-x 1 root root        22 Jul 29  2022 libnativetask.so -&gt; libnativetask.so.1.0.0\r\n-rwxr-xr-x 1 root root   3980832 Jul 29  2022 libnativetask.so.1.0.0\r\n\r\n% ldd --version\r\nldd (Debian GLIBC 2.31-13+deb11u5) 2.31\r\n\r\n% ldd $HADOOP_COMMON_LIB_NATIVE_DIR/libhadoop.so.1.0.0\r\n\tlinux-vdso.so.1 (0x00007ffd405a5000)\r\n\tlibdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f36012ea000)\r\n\tlibpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f36012c8000)\r\n\tlibc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f36010f3000)\r\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f360151b000)\r\n\r\n% file libhadoop.so.1.0.0\r\nlibhadoop.so.1.0.0: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=30ce002bb1ee648ac42090156300dbf4f5f9c1c4, with debug_info, not stripped\r\n\r\n% objdump -f libhadoop.so.1.0.0\r\nlibhadoop.so.1.0.0:     file format elf64-x86-64\r\narchitecture: i386:x86-64, flags 0x00000150:\r\nHAS_SYMS, DYNAMIC, D_PAGED\r\nstart address 0x0000000000006bd0\r\n```\r\n\r\nCan you spot if anything is wrong with my libhadoop.so.1.0.0?\r\nWhat else can I try?\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/19943766/947012\r\n  [2]: https://www.apache.org/dyn/closer.cgi/hadoop/common/hadoop-3.3.4/hadoop-3.3.4.tar.gz","title":"Hot to get rid of &#39;Unable to load native-hadoop library for your platform&#39; with local Spark and Delta Lake","body":"<p>I checked <a href=\"https://stackoverflow.com/q/19943766/947012\">this question</a> and tried every single answer except rebuilding Hadoop (which is failing with endless errors so far). My hope is that the binaries from the official Hadoop <a href=\"https://www.apache.org/dyn/closer.cgi/hadoop/common/hadoop-3.3.4/hadoop-3.3.4.tar.gz\" rel=\"nofollow noreferrer\">distribution</a> will do, but I can't make it work.</p>\n<p>Dockerfile:</p>\n<pre><code>FROM python:3.10\nRUN apt update\nRUN apt install -y default-jdk\nRUN pip install pyspark==3.3.2 delta-spark==2.2.0\nENV JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\nENV HADOOP_HOME /app/hadoop-3.3.4\nENV HADOOP_OPTS -Djava.library.path=/app/hadoop-3.3.4/lib/native\nENV HADOOP_PREFIX /app/hadoop-3.3.4\nENV HADOOP_COMMON_HOME /app/hadoop-3.3.4\nENV HADOOP_COMMON_LIB_NATIVE_DIR /app/hadoop-3.3.4/lib/native\nENV HADOOP_CONF_DIR /app/hadoop-3.3.4/etc/hadoop\nENV HADOOP_HDFS_HOME /app/hadoop-3.3.4\nENV LD_LIBRARY_PATH /usr/lib/hadoop/lib/native\nENV JAVA_LIBRARY_PATH /app/hadoop-3.3.4/lib/native\nWORKDIR /app\n</code></pre>\n<p>main.py:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from pyspark.sql.session import SparkSession\nfrom delta import configure_spark_with_delta_pip\n\nbuilder = SparkSession.builder.appName(&quot;my&quot;) \\\n    .config('spark.sql.extensions', 'io.delta.sql.DeltaSparkSessionExtension') \\\n    .config('spark.sql.catalog.spark_catalog', 'org.apache.spark.sql.delta.catalog.DeltaCatalog')\n\nspark = configure_spark_with_delta_pip(builder) \\\n    .getOrCreate()\n</code></pre>\n<pre><code>% tar -zxf hadoop-3.3.4.tar.gz\n% docker build . -t mydelta\n% docker run -it --rm -v `pwd`:/app mydelta bash\n\n% python main.py\n...\n23/02/25 02:13:34 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\n...\n</code></pre>\n<p>Functionally it works well, but I would like to get rid of the warning.</p>\n<pre><code>% printenv | grep &quot;HADOOP\\|JAVA&quot;\nHADOOP_OPTS=/app/hadoop-3.3.4/lib/native\nJAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\nHADOOP_COMMON_HOME=/app/hadoop-3.3.4\nHADOOP_CONF_DIR=/app/hadoop-3.3.4/etc/hadoop\nHADOOP_HOME=/app/hadoop-3.3.4\nHADOOP_HDFS_HOME=/app/hadoop-3.3.4\nJAVA_LIBRARY_PATH=/app/hadoop-3.3.4/lib/native\nHADOOP_COMMON_LIB_NATIVE_DIR=/app/hadoop-3.3.4/lib/native\nHADOOP_PREFIX=/app/hadoop-3.3.4\n\n% ls -l $HADOOP_COMMON_LIB_NATIVE_DIR\ntotal 166800\ndrwxr-xr-x 6 root root       192 Jul 29  2022 examples\n-rw-r--r-- 1 root root   1507316 Jul 29  2022 libhadoop.a\nlrwxr-xr-x 1 root root        18 Jul 29  2022 libhadoop.so -&gt; libhadoop.so.1.0.0\n-rwxr-xr-x 1 root root    803040 Jul 29  2022 libhadoop.so.1.0.0\n-rw-r--r-- 1 root root   1741256 Jul 29  2022 libhadooppipes.a\n-rw-r--r-- 1 root root    754382 Jul 29  2022 libhadooputils.a\n-rw-r--r-- 1 root root    551572 Jul 29  2022 libhdfs.a\nlrwxr-xr-x 1 root root        16 Jul 29  2022 libhdfs.so -&gt; libhdfs.so.0.0.0\n-rwxr-xr-x 1 root root    333656 Jul 29  2022 libhdfs.so.0.0.0\n-rw-r--r-- 1 root root 106649802 Jul 29  2022 libhdfspp.a\nlrwxr-xr-x 1 root root        18 Jul 29  2022 libhdfspp.so -&gt; libhdfspp.so.0.1.0\n-rwxr-xr-x 1 root root  44450288 Jul 29  2022 libhdfspp.so.0.1.0\n-rw-r--r-- 1 root root  10010090 Jul 29  2022 libnativetask.a\nlrwxr-xr-x 1 root root        22 Jul 29  2022 libnativetask.so -&gt; libnativetask.so.1.0.0\n-rwxr-xr-x 1 root root   3980832 Jul 29  2022 libnativetask.so.1.0.0\n\n% ldd --version\nldd (Debian GLIBC 2.31-13+deb11u5) 2.31\n\n% ldd $HADOOP_COMMON_LIB_NATIVE_DIR/libhadoop.so.1.0.0\n    linux-vdso.so.1 (0x00007ffd405a5000)\n    libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f36012ea000)\n    libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f36012c8000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f36010f3000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007f360151b000)\n\n% file libhadoop.so.1.0.0\nlibhadoop.so.1.0.0: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=30ce002bb1ee648ac42090156300dbf4f5f9c1c4, with debug_info, not stripped\n\n% objdump -f libhadoop.so.1.0.0\nlibhadoop.so.1.0.0:     file format elf64-x86-64\narchitecture: i386:x86-64, flags 0x00000150:\nHAS_SYMS, DYNAMIC, D_PAGED\nstart address 0x0000000000006bd0\n</code></pre>\n<p>Can you spot if anything is wrong with my libhadoop.so.1.0.0?\nWhat else can I try?</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":1,"creation_date":1677519282,"post_id":75583628,"comment_id":133349820,"body_markdown":"It depends on the cardinality of the relation: If it is 0..1 or 0..* then a FK is not required, but if it is 1..1 or 1..* then the FK is required.","body":"It depends on the cardinality of the relation: If it is 0..1 or 0..* then a FK is not required, but if it is 1..1 or 1..* then the FK is required."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677521709,"post_id":75583628,"comment_id":133350466,"body_markdown":"Wonderful explanation in a short clause... Many thanks.","body":"Wonderful explanation in a short clause... Many thanks."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677521743,"post_id":75583628,"comment_id":133350476,"body_markdown":"@cyberbrain You may probably have good ideas on https://stackoverflow.com/questions/75553186/why-class-diagram-methods-are-defined-in-the-same-class/75571681?noredirect=1#comment133350134_75571681 I would be happy if you share your opinions. regards","body":"@cyberbrain You may probably have good ideas on <a href=\"https://stackoverflow.com/questions/75553186/why-class-diagram-methods-are-defined-in-the-same-class/75571681?noredirect=1#comment133350134_75571681\" title=\"why class diagram methods are defined in the same class\">stackoverflow.com/questions/75553186/&hellip;</a> I would be happy if you share your opinions. regards"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677527659,"post_id":75583628,"comment_id":133351969,"body_markdown":"Nothing in JPA is &#39;mandatory&#39; so I don&#39;t know what you mean; make it required if and only if you require it. Same as not-null on a basic. Better is subjective and not ideal for stack overflow questions - it entirely depends on application usage which you have not and likely cannot detail here. As for a basic mapping: Apps I&#39;ve seen that don&#39;t know what is best can do both - a basic mapping and the reference mapping, allowing them to have the best of both worlds. As long as they understand the drawbacks, they can avoid the pitfalls of both (ie use lazy fetching and respect it).","body":"Nothing in JPA is &#39;mandatory&#39; so I don&#39;t know what you mean; make it required if and only if you require it. Same as not-null on a basic. Better is subjective and not ideal for stack overflow questions - it entirely depends on application usage which you have not and likely cannot detail here. As for a basic mapping: Apps I&#39;ve seen that don&#39;t know what is best can do both - a basic mapping and the reference mapping, allowing them to have the best of both worlds. As long as they understand the drawbacks, they can avoid the pitfalls of both (ie use lazy fetching and respect it)."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677527958,"post_id":75583628,"comment_id":133352038,"body_markdown":"As for why you might perform a CityId look up or some other id reference lookup and require the reference - it depends on if you trust and need to validate that ID value. If it is user provided, you may want to make sure they aren&#39;t inadvertently putting in a city ID of Detroit when they mean Chicago - or that they even gave a valid ID value that refers to a city instead of say a city name. If you trust the data, it is unnecessary overhead that affects performance. So it all depends on your app and what you actually need. Easiest is to start with a model that matches the data and tweak later.","body":"As for why you might perform a CityId look up or some other id reference lookup and require the reference - it depends on if you trust and need to validate that ID value. If it is user provided, you may want to make sure they aren&#39;t inadvertently putting in a city ID of Detroit when they mean Chicago - or that they even gave a valid ID value that refers to a city instead of say a city name. If you trust the data, it is unnecessary overhead that affects performance. So it all depends on your app and what you actually need. Easiest is to start with a model that matches the data and tweak later."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677530733,"post_id":75583628,"comment_id":133352707,"body_markdown":"@Chris Yes, you absolutely right and especially when the user select these data from a dropdown list probably no need to check. On the other hand, as far as I know, I should have add extra field to the entity to save these fields easily. For example, in order to make something e.g. employee.setCityId(), I need to add cityId field besides city to my Employee entity, right? If there is a better way, could you add an example to your answer pls?","body":"@Chris Yes, you absolutely right and especially when the user select these data from a dropdown list probably no need to check. On the other hand, as far as I know, I should have add extra field to the entity to save these fields easily. For example, in order to make something e.g. employee.setCityId(), I need to add cityId field besides city to my Employee entity, right? If there is a better way, could you add an example to your answer pls?"}],"answers":[{"comments":[{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677525735,"post_id":75584278,"comment_id":133351493,"body_markdown":"In that case, If the entity has 2-3 Foreign Key for example, an Employee entity has cityId, departmentId and professionId, then when we create an Employee, it is good practice to check city, department and profession by using their id values and findById() methods. ıs that true? I am always confused if this approach is not good or good :(","body":"In that case, If the entity has 2-3 Foreign Key for example, an Employee entity has cityId, departmentId and professionId, then when we create an Employee, it is good practice to check city, department and profession by using their id values and findById() methods. ıs that true? I am always confused if this approach is not good or good :("},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1677527152,"post_id":75584278,"comment_id":133351816,"body_markdown":"It depends  always. The aim is that you need to have some way that you can report to the users if they provide invalid ID  for city or department or profession. If you are 100% sure the user will always provide an valid ID and does not need to have any checking on its city/department/profession &#39;s state, it is perfectly okay to directly save the employee without selecting  city/department/profession first.","body":"It depends  always. The aim is that you need to have some way that you can report to the users if they provide invalid ID  for city or department or profession. If you are 100% sure the user will always provide an valid ID and does not need to have any checking on its city/department/profession &#39;s state, it is perfectly okay to directly save the employee without selecting  city/department/profession first."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677530647,"post_id":75584278,"comment_id":133352680,"body_markdown":"Yes, you absolutely right and especially when the user select these data from a dropdown list probably no need to check. On the other hand, as far as I know, I should have add extra field to the entity to save these fields easily. For example, in order to make something e.g. `employee.setCityId()`, I need to add `cityId` field besides `city` to my Employee entity, right? If there is a better way, could you add an example to your answer pls?","body":"Yes, you absolutely right and especially when the user select these data from a dropdown list probably no need to check. On the other hand, as far as I know, I should have add extra field to the entity to save these fields easily. For example, in order to make something e.g. <code>employee.setCityId()</code>, I need to add <code>cityId</code> field besides <code>city</code> to my Employee entity, right? If there is a better way, could you add an example to your answer pls?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677530657,"post_id":75584278,"comment_id":133352682,"body_markdown":"By the way, voted up ;)","body":"By the way, voted up ;)"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1677531427,"post_id":75584278,"comment_id":133352864,"body_markdown":"even the user can select the correct city from the dropdown list , the advanced user can always bypass your ui and call your API with an invalid cityId. And no need to add an extra cityId field in employee , just use `EntityManager.getReference()` to get the city instance and set it to the employee if you do not want to select city for saving employee. see my answer at [here](https://stackoverflow.com/a/54727589/339637)","body":"even the user can select the correct city from the dropdown list , the advanced user can always bypass your ui and call your API with an invalid cityId. And no need to add an extra cityId field in employee , just use <code>EntityManager.getReference()</code> to get the city instance and set it to the employee if you do not want to select city for saving employee. see my answer at <a href=\"https://stackoverflow.com/a/54727589/339637\">here</a>"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677531808,"post_id":75584278,"comment_id":133352957,"body_markdown":"Sounds good. In this scene, is it the best way to set FK values of an entity without retrieving the entity of the FK value? If so, is there an equivalent for Spring Data JPA or Hibernate without using Entity manager?","body":"Sounds good. In this scene, is it the best way to set FK values of an entity without retrieving the entity of the FK value? If so, is there an equivalent for Spring Data JPA or Hibernate without using Entity manager?"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1677532005,"post_id":75584278,"comment_id":133353008,"body_markdown":"yes if you do not want to have an additional select the entity for setting the relationship. The equivalent method in spring-data repository is `getReferenceById()`","body":"yes if you do not want to have an additional select the entity for setting the relationship. The equivalent method in spring-data repository is <code>getReferenceById()</code>"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677532478,"post_id":75584278,"comment_id":133353107,"body_markdown":"Could you give an example usage for it? By the way,  do you mean Spring data JPA with spring-data repository?","body":"Could you give an example usage for it? By the way,  do you mean Spring data JPA with spring-data repository?"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1677532626,"post_id":75584278,"comment_id":133353143,"body_markdown":"already give you the example at [this](https://stackoverflow.com/a/54727589/339637).Just replace `entityManager.getReference()` with `repo. getReferenceById(xxx)`","body":"already give you the example at <a href=\"https://stackoverflow.com/a/54727589/339637\">this</a>.Just replace <code>entityManager.getReference()</code> with <code>repo. getReferenceById(xxx)</code>"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677532903,"post_id":75584278,"comment_id":133353206,"body_markdown":"Thanks, I injected `EntityManager` to my service, but  `entityManager.getReferenceById(cityId)` gives error as &quot;Cannot resolve method &#39;getReferenceById&#39; in &#39;EntityManager&#39;&quot;. Any idea? Also tried with `EntityManager.getReferenceById(cityId)` but not works.","body":"Thanks, I injected <code>EntityManager</code> to my service, but  <code>entityManager.getReferenceById(cityId)</code> gives error as &quot;Cannot resolve method &#39;getReferenceById&#39; in &#39;EntityManager&#39;&quot;. Any idea? Also tried with <code>EntityManager.getReferenceById(cityId)</code> but not works."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677533119,"post_id":75584278,"comment_id":133353259,"body_markdown":"Should I use `cityRepository.getReferenceById(cityId)` ?","body":"Should I use <code>cityRepository.getReferenceById(cityId)</code> ?"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1677533217,"post_id":75584278,"comment_id":133353287,"body_markdown":"yes. use `cityRepository.getReferenceById(cityId)`. If not okay , please create another new question for it and let me know","body":"yes. use <code>cityRepository.getReferenceById(cityId)</code>. If not okay , please create another new question for it and let me know"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":1,"creation_date":1677533414,"post_id":75584278,"comment_id":133353328,"body_markdown":"Thanks a lot amigo. It would probably ok. I think I will use this approach for retrieving and setting? &gt;&gt;&gt; `Category category = categoryRepository.getReferenceById(request.getCategoryId());\nrecipe.setCategory(category);`","body":"Thanks a lot amigo. It would probably ok. I think I will use this approach for retrieving and setting? &gt;&gt;&gt; <code>Category category = categoryRepository.getReferenceById(request.getCategoryId())&zwnj;&#8203;; recipe.setCategory(category);</code>"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":1,"creation_date":1677599386,"post_id":75584278,"comment_id":133367790,"body_markdown":"Is my last comment true? Just would like to confirm it, any reply please?","body":"Is my last comment true? Just would like to confirm it, any reply please?"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1677599691,"post_id":75584278,"comment_id":133367889,"body_markdown":"yes.it should work. amigo","body":"yes.it should work. amigo"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677600488,"post_id":75584278,"comment_id":133368178,"body_markdown":"muchas gracias amigo :) regards...","body":"muchas gracias amigo :) regards..."}],"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":16,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677522772,"creation_date":1677522772,"answer_id":75584278,"question_id":75583628,"body_markdown":"1. It depends on your business rules. If a comment can exist without any user , then you can configure `@ManyToOne` as optional (i.e. default value). Otherwise you can consider to configure it as mandatory by `@ManyToOne(fetch = FetchType.LAZY, optional=false)` . Hibernate will help to validate a comment instance must have an user even though you do not define the related foreign key constraint in DB. \r\n\r\n2. It is perfectly valid to do it especially you have some non-trivial business logic which need to check on the user before adding a comment. \r\n\r\n","title":"Setting FK column as &quot;required&quot; in Hibernate / JPA relations?","body":"<ol>\n<li><p>It depends on your business rules. If a comment can exist without any user , then you can configure <code>@ManyToOne</code> as optional (i.e. default value). Otherwise you can consider to configure it as mandatory by <code>@ManyToOne(fetch = FetchType.LAZY, optional=false)</code> . Hibernate will help to validate a comment instance must have an user even though you do not define the related foreign key constraint in DB.</p>\n</li>\n<li><p>It is perfectly valid to do it especially you have some non-trivial business logic which need to check on the user before adding a comment.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75584278,"answer_count":1,"score":0,"last_activity_date":1677522772,"creation_date":1677518521,"question_id":75583628,"body_markdown":"I use Hibernate to create relations as shown below. As far as I remember, there was no need to set FK fields as required, but I am not sure if it is the case for Hibernate or JPA. \r\n\r\n```\r\n@Entity\r\npublic class Comment {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @EqualsAndHashCode.Exclude\r\n    private Long id;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private User user;\r\n}\r\n```\r\n\r\n\r\n&lt;br/&gt;\r\n\r\n```\r\n@Entity\r\npublic class User {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(nullable = false, length = 20)\r\n    private String firstName;\r\n\r\n    @Column(nullable = false, length = 20)\r\n    private String lastName;\r\n\r\n    @OneToMany(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL)\r\n    private Set&lt;Comment&gt; comments = new HashSet&lt;&gt;();\r\n\r\n    public void addComment(Comment comment) {\r\n        comments.add(comment);\r\n        comment.setUser(this);\r\n    }\r\n\r\n    public void removeComment(Comment comment) {\r\n        comments.remove(comment);\r\n        comment.setUser(null);\r\n    }\r\n}\r\n```\r\n\r\n**1-** So, should I make userId field required? \r\n\r\n**2-** For this kind of scenarios, I retrieve the entity using its id and then add this entity to the related entity before persist. For example, when I create a Comment, I check if the user by the given id exists and then add the returned user to the Comment entity before save. Is it a bad approach? Because we can also set `comment.userId` field before persist without retrieving from database. Which one is better? ","title":"Setting FK column as &quot;required&quot; in Hibernate / JPA relations?","body":"<p>I use Hibernate to create relations as shown below. As far as I remember, there was no need to set FK fields as required, but I am not sure if it is the case for Hibernate or JPA.</p>\n<pre><code>@Entity\npublic class Comment {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @EqualsAndHashCode.Exclude\n    private Long id;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;)\n    private User user;\n}\n</code></pre>\n<br/>\n<pre><code>@Entity\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false, length = 20)\n    private String firstName;\n\n    @Column(nullable = false, length = 20)\n    private String lastName;\n\n    @OneToMany(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL)\n    private Set&lt;Comment&gt; comments = new HashSet&lt;&gt;();\n\n    public void addComment(Comment comment) {\n        comments.add(comment);\n        comment.setUser(this);\n    }\n\n    public void removeComment(Comment comment) {\n        comments.remove(comment);\n        comment.setUser(null);\n    }\n}\n</code></pre>\n<p><strong>1-</strong> So, should I make userId field required?</p>\n<p><strong>2-</strong> For this kind of scenarios, I retrieve the entity using its id and then add this entity to the related entity before persist. For example, when I create a Comment, I check if the user by the given id exists and then add the returned user to the Comment entity before save. Is it a bad approach? Because we can also set <code>comment.userId</code> field before persist without retrieving from database. Which one is better?</p>\n"},{"tags":["java","testng","powermock","powermockito","linkageerror"],"comments":[{"owner":{"account_id":5307294,"reputation":5670,"user_id":4234729,"display_name":"juherr"},"score":0,"creation_date":1444145253,"post_id":32973292,"comment_id":53772703,"body_markdown":"Which testng version do you use? Did you try the latest?","body":"Which testng version do you use? Did you try the latest?"},{"owner":{"account_id":5307294,"reputation":5670,"user_id":4234729,"display_name":"juherr"},"score":1,"creation_date":1444145479,"post_id":32973292,"comment_id":53772870,"body_markdown":"Which powermock version do you use? 1.6.3 was released few days ago and powermock has some classpath issues. ie: https://github.com/jayway/powermock/issues/579","body":"Which powermock version do you use? 1.6.3 was released few days ago and powermock has some classpath issues. ie: <a href=\"https://github.com/jayway/powermock/issues/579\" rel=\"nofollow noreferrer\">github.com/jayway/powermock/issues/579</a>"},{"owner":{"account_id":2923529,"reputation":309,"user_id":2784821,"display_name":"Seba Cervantes"},"score":0,"creation_date":1444150619,"post_id":32973292,"comment_id":53776064,"body_markdown":"Hi, I am using TestNG 6.9.6 with powermock 1.6.3. As far as I know they are the latests ones.","body":"Hi, I am using TestNG 6.9.6 with powermock 1.6.3. As far as I know they are the latests ones."},{"owner":{"account_id":2923529,"reputation":309,"user_id":2784821,"display_name":"Seba Cervantes"},"score":0,"creation_date":1444151015,"post_id":32973292,"comment_id":53776278,"body_markdown":"@juherr Thanks for the reference. I found quite interesting this part of a comment: &quot;The problem really is that the MockClassLoader does not provide a reference to the mock class it loaded.&quot;. Maybe here is the root of the problem, but at the moment I am not sure if I could find a workaround, or even if a workaround is the best solution for this.","body":"@juherr Thanks for the reference. I found quite interesting this part of a comment: &quot;The problem really is that the MockClassLoader does not provide a reference to the mock class it loaded.&quot;. Maybe here is the root of the problem, but at the moment I am not sure if I could find a workaround, or even if a workaround is the best solution for this."},{"owner":{"account_id":5538109,"reputation":624,"user_id":4395727,"display_name":"Mohammad Alavi"},"score":0,"creation_date":1545594469,"post_id":32973292,"comment_id":94657807,"body_markdown":"As a workaround you can also prepare the exception class (annotate it with @PrepareForTest) to make MockClassLoader loads the exception class, also you need to use try and catch instead of expectedExceptions.","body":"As a workaround you can also prepare the exception class (annotate it with @PrepareForTest) to make MockClassLoader loads the exception class, also you need to use try and catch instead of expectedExceptions."}],"answers":[{"tags":[],"owner":{"account_id":9060130,"reputation":1,"user_id":6746898,"display_name":"Amitabh Saini"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677522511,"creation_date":1677522511,"answer_id":75584230,"question_id":32973292,"body_markdown":"Removing from the expected exception and refactoring to [assertThrows][1] syntax worked for me. You would need to do it for all tests which have the expected exception as your conflicting class. It prevents the powermock class loader to load the class and fixes the linkage error.\r\n\r\n\r\n  [1]: https://www.javadoc.io/doc/org.testng/testng/latest/org/testng/Assert.html#assertThrows(java.lang.Class,org.testng.Assert.ThrowingRunnable)","title":"Linkage error when performing TestNG with expected exceptions and Powermock","body":"<p>Removing from the expected exception and refactoring to <a href=\"https://www.javadoc.io/doc/org.testng/testng/latest/org/testng/Assert.html#assertThrows(java.lang.Class,org.testng.Assert.ThrowingRunnable)\" rel=\"nofollow noreferrer\">assertThrows</a> syntax worked for me. You would need to do it for all tests which have the expected exception as your conflicting class. It prevents the powermock class loader to load the class and fixes the linkage error.</p>\n"}],"owner":{"account_id":2923529,"reputation":309,"user_id":2784821,"display_name":"Seba Cervantes"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":660,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677522511,"creation_date":1444143713,"question_id":32973292,"body_markdown":"I am working on a Maven project, and I am trying to perform a TestNG unit test with the following structure:\r\n\r\n    import org.testng.*;\r\n\r\n    @PrepareForTest(GeneralDAO.class)\r\n    @PowerMockIgnore({&quot;javax.management.*&quot;})\r\n    public class TestClass extends PowerMockTestCase {\r\n    \r\n        @Test(expectedExceptions = BusinessException.class) // custom exception from another project\r\n        public void testFailToGetBusiness() {\r\n        \r\n            // method that shoud throw a BusinessException\r\n\r\n        }\r\n    }\r\n\r\nBut when I am running the test, I find out the following exception:\r\n\r\n    java.lang.LinkageError: loader constraint violation: when resolving method &quot;com.company.exception.BusinessException.&lt;init&gt;(Ljava/lang/Exception;Lcom/company/exception/EExceptionCodes;)V&quot;\r\n    the class loader (instance of org/powermock/core/classloader/MockClassLoader)\r\n    of the current class, com/company/core/BusinessHandler, \r\n    and the class loader (instance of sun/misc/Launcher$AppClassLoader) for the method&#39;s defining class, com/company/exception/BusinessException, \r\n    have different Class objects for the type com/company/exception/EExceptionCodes used in the signature\r\n\r\nAs far as I understand, powermock loads the Object with MockClassLoader for the testing environment, and Sun uses his AppClassLoader to load the same Object. As the classloaders are different, in runtime the objects also are (beyond they have the same name), and that implies a LinkageError.\r\n\r\nAnyway, I have tried several ways to avoid that, for example by removing the expectedExceptions tag and adding a try and catch clause, but with no success.\r\n\r\nHow could I set an unique class loader for that Exception? Is that the correct approach to solve it? Or should I try with something else? Could be something wrong with my Maven configuration? Any ideas or comments are welcome :)","title":"Linkage error when performing TestNG with expected exceptions and Powermock","body":"<p>I am working on a Maven project, and I am trying to perform a TestNG unit test with the following structure:</p>\n\n<pre><code>import org.testng.*;\n\n@PrepareForTest(GeneralDAO.class)\n@PowerMockIgnore({\"javax.management.*\"})\npublic class TestClass extends PowerMockTestCase {\n\n    @Test(expectedExceptions = BusinessException.class) // custom exception from another project\n    public void testFailToGetBusiness() {\n\n        // method that shoud throw a BusinessException\n\n    }\n}\n</code></pre>\n\n<p>But when I am running the test, I find out the following exception:</p>\n\n<pre><code>java.lang.LinkageError: loader constraint violation: when resolving method \"com.company.exception.BusinessException.&lt;init&gt;(Ljava/lang/Exception;Lcom/company/exception/EExceptionCodes;)V\"\nthe class loader (instance of org/powermock/core/classloader/MockClassLoader)\nof the current class, com/company/core/BusinessHandler, \nand the class loader (instance of sun/misc/Launcher$AppClassLoader) for the method's defining class, com/company/exception/BusinessException, \nhave different Class objects for the type com/company/exception/EExceptionCodes used in the signature\n</code></pre>\n\n<p>As far as I understand, powermock loads the Object with MockClassLoader for the testing environment, and Sun uses his AppClassLoader to load the same Object. As the classloaders are different, in runtime the objects also are (beyond they have the same name), and that implies a LinkageError.</p>\n\n<p>Anyway, I have tried several ways to avoid that, for example by removing the expectedExceptions tag and adding a try and catch clause, but with no success.</p>\n\n<p>How could I set an unique class loader for that Exception? Is that the correct approach to solve it? Or should I try with something else? Could be something wrong with my Maven configuration? Any ideas or comments are welcome :)</p>\n"},{"tags":["java","php","mysql","database","connection"],"comments":[{"owner":{"account_id":5636066,"reputation":6620,"user_id":4461537,"accept_rate":89,"display_name":"Ren&#233; Winkler"},"score":0,"creation_date":1426703846,"post_id":29130082,"comment_id":46485925,"body_markdown":"is there a firewall in between?","body":"is there a firewall in between?"},{"owner":{"account_id":1115500,"reputation":917,"user_id":1104934,"accept_rate":78,"display_name":"Duffydake"},"score":0,"creation_date":1426704846,"post_id":29130082,"comment_id":46486511,"body_markdown":"There is a firewall : `3306/tcp filtered mysql` . Maybe there is a different port than default or you can&#39;t access it from outside","body":"There is a firewall : <code>3306&#47;tcp filtered mysql</code> . Maybe there is a different port than default or you can&#39;t access it from outside"},{"owner":{"account_id":2674049,"reputation":93913,"user_id":2310830,"display_name":"RiggsFolly"},"score":0,"creation_date":1426706996,"post_id":29130082,"comment_id":46487735,"body_markdown":"It is Very unusual that hosts allow remote access to a mysql database. It is occasionally possible but you have to setup a user account that is allowed to login from a remote address.","body":"It is Very unusual that hosts allow remote access to a mysql database. It is occasionally possible but you have to setup a user account that is allowed to login from a remote address."},{"owner":{"account_id":4538554,"reputation":49,"user_id":3687080,"accept_rate":33,"display_name":"Uchiha Madara"},"score":0,"creation_date":1426745803,"post_id":29130082,"comment_id":46500793,"body_markdown":"I think this answers my question....\r\n\r\nhttp://stackoverflow.com/questions/10831915/connecting-mysql-remotely-via-free-host","body":"I think this answers my question....    <a href=\"http://stackoverflow.com/questions/10831915/connecting-mysql-remotely-via-free-host\" title=\"connecting mysql remotely via free host\">stackoverflow.com/questions/10831915/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6973698,"reputation":1196,"user_id":5349104,"display_name":"SRIDHARAN"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1506794729,"creation_date":1506794729,"answer_id":46505610,"question_id":29130082,"body_markdown":"MySQL from 000webhost doesn&#39;t allow you to connect from external applications(remote connections). It allows only connections from the same domain where it is hosted. If you want to establish remote connections then you have to upgrade to special tier. \r\n\r\nPlease check: &lt;a href=&quot;https://www.000webhost.com/website-faq/how-can-i-connect-to-mysql-from-my-computer-27&quot;&gt;000webhost remote connections&lt;/a&gt;","title":"Can not connect to Mysql database of 000webhost.com","body":"<p>MySQL from 000webhost doesn't allow you to connect from external applications(remote connections). It allows only connections from the same domain where it is hosted. If you want to establish remote connections then you have to upgrade to special tier. </p>\n\n<p>Please check: <a href=\"https://www.000webhost.com/website-faq/how-can-i-connect-to-mysql-from-my-computer-27\" rel=\"nofollow noreferrer\">000webhost remote connections</a></p>\n"},{"tags":[],"owner":{"account_id":7318473,"reputation":106,"user_id":5575221,"display_name":"omkar ugale"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677521799,"creation_date":1677521799,"answer_id":75584125,"question_id":29130082,"body_markdown":"Remote MySQL connections are disabled for security and server performance reasons.\r\n\r\nHowever remote MySQL connections will be enabled if you upgrade your account to our premium hosting service at [https://www.hostinger.com/special/000webhost][1]\r\n\r\n\r\n  [1]: https://www.hostinger.com/special/000webhost","title":"Can not connect to Mysql database of 000webhost.com","body":"<p>Remote MySQL connections are disabled for security and server performance reasons.</p>\n<p>However remote MySQL connections will be enabled if you upgrade your account to our premium hosting service at <a href=\"https://www.hostinger.com/special/000webhost\" rel=\"nofollow noreferrer\">https://www.hostinger.com/special/000webhost</a></p>\n"}],"owner":{"account_id":4538554,"reputation":49,"user_id":3687080,"accept_rate":33,"display_name":"Uchiha Madara"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3881,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":46505610,"answer_count":2,"score":1,"last_activity_date":1677521799,"creation_date":1426703747,"question_id":29130082,"body_markdown":"    $mysql_host = &quot;mysql12.000webhost.com&quot;;\r\n    $mysql_database = &quot;a1819767_ramen&quot;;\r\n    $mysql_user = &quot;a1819767_naruto&quot;;\r\n    $mysql_password = &quot;naruto1234&quot;;\r\n\r\nI am trying to connect to mysql database using java. But it&#39;s not working. However I can access the database from phpMyAdmin of the webhost cpanel.\r\n\r\n&lt;!-- begin snippet: js hide: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    static final String JDBC_DRIVER = &quot;com.mysql.jdbc.Driver&quot;;\r\n        static final String DB_URL = &quot;jdbc:mysql://mysql12.000webhost.com/a1819767_ramen&quot;;\r\n\r\n        //  Database credentials\r\n        static final String USER = &quot;a1819767_naruto&quot;;\r\n        static final String PASS = &quot;naruto1234&quot;;\r\n\r\n        public static void main(String args[]) {\r\n            Connection conn = null;\r\n            Statement stmt = null;\r\n            try {\r\n                //STEP 2: Register JDBC driver\r\n                Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n\r\n                //STEP 3: Open a connection\r\n                System.out.println(&quot;Connecting to database...&quot;);\r\n                conn = DriverManager.getConnection(DB_URL, USER, PASS);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nBut I get the following error...\r\n\r\n    Connecting to database...\r\n    com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure\r\n    \r\n    \r\n    The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:526)\r\n    \tat com.mysql.jdbc.Util.handleNewInstance(Util.java:411)\r\n    \tat com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)\r\n    \tat com.mysql.jdbc.MysqlIO.&lt;init&gt;(MysqlIO.java:355)\r\n    \tat com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2461)\r\n    \tat com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2498)\r\n    \tat com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2283)\r\n    \tat com.mysql.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:822)\r\n    \tat com.mysql.jdbc.JDBC4Connection.&lt;init&gt;(JDBC4Connection.java:47)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:526)\r\n    \tat com.mysql.jdbc.Util.handleNewInstance(Util.java:411)\r\n    \tat com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:404)\r\n    \tat com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:317)\r\n    \tat java.sql.DriverManager.getConnection(DriverManager.java:571)\r\n    \tat java.sql.DriverManager.getConnection(DriverManager.java:215)\r\n    \tat FoodBank.main(FoodBank.java:24)\r\n    Caused by: java.net.ConnectException: Connection timed out: connect\r\n    \tat java.net.DualStackPlainSocketImpl.connect0(Native Method)\r\n    \tat java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)\r\n    \tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)\r\n    \tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)\r\n    \tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)\r\n    \tat java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)\r\n    \tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\r\n    \tat java.net.Socket.connect(Socket.java:579)\r\n    \tat java.net.Socket.connect(Socket.java:528)\r\n    \tat java.net.Socket.&lt;init&gt;(Socket.java:425)\r\n    \tat java.net.Socket.&lt;init&gt;(Socket.java:241)\r\n    \tat com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:259)\r\n    \tat com.mysql.jdbc.MysqlIO.&lt;init&gt;(MysqlIO.java:305)\r\n    \t... 15 more\r\n\r\nBUILD SUCCESSFUL (total time: 27 seconds)\r\n\r\n![Ping Screen Shot][1]\r\n\r\n![Web host credentials][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/zNc7F.png\r\n  [2]: http://i.stack.imgur.com/kTwIy.png\r\n","title":"Can not connect to Mysql database of 000webhost.com","body":"<pre><code>$mysql_host = \"mysql12.000webhost.com\";\n$mysql_database = \"a1819767_ramen\";\n$mysql_user = \"a1819767_naruto\";\n$mysql_password = \"naruto1234\";\n</code></pre>\n\n<p>I am trying to connect to mysql database using java. But it's not working. However I can access the database from phpMyAdmin of the webhost cpanel.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>static final String JDBC_DRIVER = \"com.mysql.jdbc.Driver\";\r\n    static final String DB_URL = \"jdbc:mysql://mysql12.000webhost.com/a1819767_ramen\";\r\n\r\n    //  Database credentials\r\n    static final String USER = \"a1819767_naruto\";\r\n    static final String PASS = \"naruto1234\";\r\n\r\n    public static void main(String args[]) {\r\n        Connection conn = null;\r\n        Statement stmt = null;\r\n        try {\r\n            //STEP 2: Register JDBC driver\r\n            Class.forName(\"com.mysql.jdbc.Driver\");\r\n\r\n            //STEP 3: Open a connection\r\n            System.out.println(\"Connecting to database...\");\r\n            conn = DriverManager.getConnection(DB_URL, USER, PASS);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>But I get the following error...</p>\n\n<pre><code>Connecting to database...\ncom.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure\n\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57) at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)\n    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)\n    at com.mysql.jdbc.MysqlIO.&lt;init&gt;(MysqlIO.java:355)\n    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2461)\n    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2498)\n    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2283)\n    at com.mysql.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:822)\n    at com.mysql.jdbc.JDBC4Connection.&lt;init&gt;(JDBC4Connection.java:47)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)\n    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:404)\n    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:317)\n    at java.sql.DriverManager.getConnection(DriverManager.java:571)\n    at java.sql.DriverManager.getConnection(DriverManager.java:215)\n    at FoodBank.main(FoodBank.java:24)\nCaused by: java.net.ConnectException: Connection timed out: connect\n    at java.net.DualStackPlainSocketImpl.connect0(Native Method)\n    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)\n    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\n    at java.net.Socket.connect(Socket.java:579)\n    at java.net.Socket.connect(Socket.java:528)\n    at java.net.Socket.&lt;init&gt;(Socket.java:425)\n    at java.net.Socket.&lt;init&gt;(Socket.java:241)\n    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:259)\n    at com.mysql.jdbc.MysqlIO.&lt;init&gt;(MysqlIO.java:305)\n    ... 15 more\n</code></pre>\n\n<p>BUILD SUCCESSFUL (total time: 27 seconds)</p>\n\n<p><img src=\"https://i.stack.imgur.com/zNc7F.png\" alt=\"Ping Screen Shot\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/kTwIy.png\" alt=\"Web host credentials\"></p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":1871804,"reputation":16163,"user_id":1693859,"display_name":"Sam R."},"score":13,"creation_date":1362991902,"post_id":15334394,"comment_id":21655322,"body_markdown":"Are you behind the proxy?","body":"Are you behind the proxy?"},{"owner":{"account_id":456808,"reputation":749,"user_id":855757,"accept_rate":50,"display_name":"Derek"},"score":0,"creation_date":1362991906,"post_id":15334394,"comment_id":21655324,"body_markdown":"Do you need to set a proxy?","body":"Do you need to set a proxy?"},{"owner":{"account_id":1742178,"reputation":1756,"user_id":1593272,"accept_rate":56,"display_name":"Anubhab"},"score":2,"creation_date":1362992384,"post_id":15334394,"comment_id":21655542,"body_markdown":"Are you sure you are not behind a proxy?","body":"Are you sure you are not behind a proxy?"},{"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"score":1,"creation_date":1362993282,"post_id":15334394,"comment_id":21655947,"body_markdown":"Show us the output of `mvn help:effective-settings` as well as your `pom.xml`.","body":"Show us the output of <code>mvn help:effective-settings</code> as well as your <code>pom.xml</code>."},{"owner":{"account_id":1744680,"reputation":2038,"user_id":1595165,"accept_rate":55,"display_name":"Sajith"},"score":0,"creation_date":1362993347,"post_id":15334394,"comment_id":21655982,"body_markdown":"It seems its not an issue with settings , since I have other maven projects in my system and that all works fine.this is happens when I try to create a new application.","body":"It seems its not an issue with settings , since I have other maven projects in my system and that all works fine.this is happens when I try to create a new application."},{"owner":{"account_id":1744680,"reputation":2038,"user_id":1595165,"accept_rate":55,"display_name":"Sajith"},"score":0,"creation_date":1362993547,"post_id":15334394,"comment_id":21656076,"body_markdown":"@carlspring added pom.xml into the question","body":"@carlspring added pom.xml into the question"},{"owner":{"account_id":1871804,"reputation":16163,"user_id":1693859,"display_name":"Sam R."},"score":0,"creation_date":1362993653,"post_id":15334394,"comment_id":21656129,"body_markdown":"Have you created your previous projects _(working ones)_ using the same system/IDE/Maven?","body":"Have you created your previous projects <i>(working ones)</i> using the same system/IDE/Maven?"},{"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"score":0,"creation_date":1362993780,"post_id":15334394,"comment_id":21656177,"body_markdown":"Post your `settings.xml`.","body":"Post your <code>settings.xml</code>."},{"owner":{"account_id":1744680,"reputation":2038,"user_id":1595165,"accept_rate":55,"display_name":"Sajith"},"score":0,"creation_date":1362993802,"post_id":15334394,"comment_id":21656189,"body_markdown":"Not created new ones.But imported existing projects.","body":"Not created new ones.But imported existing projects."},{"owner":{"account_id":1871804,"reputation":16163,"user_id":1693859,"display_name":"Sam R."},"score":0,"creation_date":1362993943,"post_id":15334394,"comment_id":21656251,"body_markdown":"If your `settings.xml` is OK then I suspect that it&#39;s a [bug](https://bugs.eclipse.org/bugs/show_bug.cgi?id=377534).","body":"If your <code>settings.xml</code> is OK then I suspect that it&#39;s a <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=377534\" rel=\"nofollow noreferrer\">bug</a>."},{"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"score":0,"creation_date":1362994060,"post_id":15334394,"comment_id":21656320,"body_markdown":"Are you running it from a console or and IDE?","body":"Are you running it from a console or and IDE?"},{"owner":{"account_id":1744680,"reputation":2038,"user_id":1595165,"accept_rate":55,"display_name":"Sajith"},"score":1,"creation_date":1362994202,"post_id":15334394,"comment_id":21656382,"body_markdown":"running it from IDE(STS)","body":"running it from IDE(STS)"},{"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"score":0,"creation_date":1362994854,"post_id":15334394,"comment_id":21656714,"body_markdown":"Like I said, post your `settings.xml`.","body":"Like I said, post your <code>settings.xml</code>."},{"owner":{"account_id":1744680,"reputation":2038,"user_id":1595165,"accept_rate":55,"display_name":"Sajith"},"score":0,"creation_date":1362995766,"post_id":15334394,"comment_id":21657206,"body_markdown":"@carlspring added settings.xml.IP(  &lt;host&gt;ip&lt;/host&gt;) is removed.","body":"@carlspring added settings.xml.IP(  &lt;host&gt;ip&lt;/host&gt;) is removed."},{"owner":{"account_id":9575089,"reputation":639,"user_id":7119931,"display_name":"Mauricio Toledo"},"score":0,"creation_date":1643049545,"post_id":15334394,"comment_id":125231906,"body_markdown":"Try with another version of java. Right click on project &gt; Open Module settings &gt; Project &gt; Select version 8 of java","body":"Try with another version of java. Right click on project &gt; Open Module settings &gt; Project &gt; Select version 8 of java"}],"answers":[{"comments":[{"owner":{"account_id":2464526,"reputation":1549,"user_id":2147927,"accept_rate":100,"display_name":"Line"},"score":0,"creation_date":1611153750,"post_id":15334451,"comment_id":116359608,"body_markdown":"it helped me. but the interesting thing is that only one of Maven plugins (site) needed this proxy setting. and I don&#39;t even included them in my pom (just the maven compiler), so not sure why do they even needed to be downloaded..","body":"it helped me. but the interesting thing is that only one of Maven plugins (site) needed this proxy setting. and I don&#39;t even included them in my pom (just the maven compiler), so not sure why do they even needed to be downloaded.."}],"tags":[],"owner":{"account_id":2099531,"reputation":6497,"user_id":1867549,"accept_rate":80,"display_name":"&#201;tienne Miret"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1362992364,"creation_date":1362992024,"answer_id":15334451,"question_id":15334394,"body_markdown":"It seems me there was a network issue. On your side, or on Maven side, or anywhere in the middle. Just try again later.\r\n\r\nIf the error is permanent, check your network settings. If you are behind a proxy, you need the following in you ~/.m2/settings.xml:\r\n\r\n    &lt;proxies&gt;\r\n        &lt;proxy&gt;\r\n            &lt;id&gt;optional&lt;/id&gt;\r\n            &lt;active&gt;true&lt;/active&gt;\r\n            &lt;protocol&gt;http&lt;/protocol&gt;\r\n            &lt;username&gt;proxyuser&lt;/username&gt;\r\n            &lt;password&gt;proxypass&lt;/password&gt;\r\n            &lt;host&gt;proxy.host.net&lt;/host&gt;\r\n            &lt;port&gt;80&lt;/port&gt;\r\n            &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt;\r\n        &lt;/proxy&gt;\r\n    &lt;/proxies&gt;\r\n","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>It seems me there was a network issue. On your side, or on Maven side, or anywhere in the middle. Just try again later.</p>\n\n<p>If the error is permanent, check your network settings. If you are behind a proxy, you need the following in you ~/.m2/settings.xml:</p>\n\n<pre><code>&lt;proxies&gt;\n    &lt;proxy&gt;\n        &lt;id&gt;optional&lt;/id&gt;\n        &lt;active&gt;true&lt;/active&gt;\n        &lt;protocol&gt;http&lt;/protocol&gt;\n        &lt;username&gt;proxyuser&lt;/username&gt;\n        &lt;password&gt;proxypass&lt;/password&gt;\n        &lt;host&gt;proxy.host.net&lt;/host&gt;\n        &lt;port&gt;80&lt;/port&gt;\n        &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt;\n    &lt;/proxy&gt;\n&lt;/proxies&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1871804,"reputation":16163,"user_id":1693859,"display_name":"Sam R."},"score":1,"creation_date":1362992852,"post_id":15334504,"comment_id":21655759,"body_markdown":"NP. Do you see the error in your `POM` or in `Maven console`?","body":"NP. Do you see the error in your <code>POM</code> or in <code>Maven console</code>?"},{"owner":{"account_id":1744680,"reputation":2038,"user_id":1595165,"accept_rate":55,"display_name":"Sajith"},"score":1,"creation_date":1362992978,"post_id":15334504,"comment_id":21655814,"body_markdown":"Error is showing in pom.xml .&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;","body":"Error is showing in pom.xml .&lt;project xmlns=&quot;<a href=\"http://maven.apache.org/POM/4.0.0\" rel=\"nofollow noreferrer\">maven.apache.org/POM/4.0.0</a>&quot; xmlns:xsi=&quot;<a href=\"http://www.w3.org/2001/XMLSchema-instance\" rel=\"nofollow noreferrer\">w3.org/2001/XMLSchema-instance</a>&quot;   xsi:schemaLocation=&quot;<a href=\"http://maven.apache.org/POM/4.0.0\" rel=\"nofollow noreferrer\">maven.apache.org/POM/4.0.0</a> <a href=\"http://maven.apache.org/xsd/maven-4.0.0.xsd\" rel=\"nofollow noreferrer\">maven.apache.org/xsd/maven-4.0.0.xsd</a>&quot;&gt;"}],"tags":[],"owner":{"account_id":1871804,"reputation":16163,"user_id":1693859,"display_name":"Sam R."},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1362992202,"creation_date":1362992202,"answer_id":15334504,"question_id":15334394,"body_markdown":"For the first error you can simply clear your local repository cache to force it download from main repository rather than checking the local one. \r\n\r\nFor second error, if you are behind proxy you should configure it this way [Configuring a  proxy](http://maven.apache.org/guides/mini/guide-proxies.html) otherwise you have a network problem now. ","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>For the first error you can simply clear your local repository cache to force it download from main repository rather than checking the local one. </p>\n\n<p>For second error, if you are behind proxy you should configure it this way <a href=\"http://maven.apache.org/guides/mini/guide-proxies.html\" rel=\"noreferrer\">Configuring a  proxy</a> otherwise you have a network problem now. </p>\n"},{"tags":[],"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1362993202,"creation_date":1362992603,"answer_id":15334592,"question_id":15334394,"body_markdown":"I strongly recommend to use a Maven Repository Manager such as Nexus. It will help you to get stable and reproducible builds with Maven. As the Repository Manager is usually in your LAN, you don&#39;t have to configure the proxy settings, but you need to define some other configurations:\r\n\r\nhttp://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html\r\n\r\nhttp://maven.apache.org/repository-management.html\r\n\r\n","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>I strongly recommend to use a Maven Repository Manager such as Nexus. It will help you to get stable and reproducible builds with Maven. As the Repository Manager is usually in your LAN, you don't have to configure the proxy settings, but you need to define some other configurations:</p>\n\n<p><a href=\"http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html\" rel=\"nofollow\">http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html</a></p>\n\n<p><a href=\"http://maven.apache.org/repository-management.html\" rel=\"nofollow\">http://maven.apache.org/repository-management.html</a></p>\n"},{"tags":[],"owner":{"account_id":2310941,"reputation":844,"user_id":2029079,"display_name":"Uday Shankar"},"comment_count":0,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1523015922,"creation_date":1362992712,"answer_id":15334627,"question_id":15334394,"body_markdown":"It seems like your Maven is unable to connect to Maven repository at http://repo1.maven.org/maven2.\r\n\r\nIf you are using proxy and can access the link with browser the same settings need to be applied to Spring Source Tool Suite (if you are running within suite) or Maven.\r\n\r\nFor Maven proxy setting create a `settings.xml` in the `.m2` directory with following details\r\n\r\n    &lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;\r\n      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0\r\n                          http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;\r\n      &lt;proxies&gt;\r\n        &lt;proxy&gt;\r\n          &lt;active&gt;true&lt;/active&gt;\r\n          &lt;protocol&gt;http&lt;/protocol&gt;\r\n          &lt;host&gt;PROXY&lt;/host&gt;\r\n          &lt;port&gt;3120&lt;/port&gt;\r\n          &lt;nonProxyHosts&gt;maven&lt;/nonProxyHosts&gt;\r\n        &lt;/proxy&gt;\r\n      &lt;/proxies&gt;\r\n    &lt;/settings&gt;\r\n\r\nIf you are not using proxy and can access the link with browser, remove any proxy settings described above.","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>It seems like your Maven is unable to connect to Maven repository at <a href=\"http://repo1.maven.org/maven2\" rel=\"noreferrer\">http://repo1.maven.org/maven2</a>.</p>\n\n<p>If you are using proxy and can access the link with browser the same settings need to be applied to Spring Source Tool Suite (if you are running within suite) or Maven.</p>\n\n<p>For Maven proxy setting create a <code>settings.xml</code> in the <code>.m2</code> directory with following details</p>\n\n<pre><code>&lt;settings xmlns=\"http://maven.apache.org/SETTINGS/1.0.0\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/SETTINGS/1.0.0\n                      http://maven.apache.org/xsd/settings-1.0.0.xsd\"&gt;\n  &lt;proxies&gt;\n    &lt;proxy&gt;\n      &lt;active&gt;true&lt;/active&gt;\n      &lt;protocol&gt;http&lt;/protocol&gt;\n      &lt;host&gt;PROXY&lt;/host&gt;\n      &lt;port&gt;3120&lt;/port&gt;\n      &lt;nonProxyHosts&gt;maven&lt;/nonProxyHosts&gt;\n    &lt;/proxy&gt;\n  &lt;/proxies&gt;\n&lt;/settings&gt;\n</code></pre>\n\n<p>If you are not using proxy and can access the link with browser, remove any proxy settings described above.</p>\n"},{"comments":[{"owner":{"account_id":1744680,"reputation":2038,"user_id":1595165,"accept_rate":55,"display_name":"Sajith"},"score":0,"creation_date":1362996931,"post_id":15335792,"comment_id":21657853,"body_markdown":"Thanks for helping.But still getting same error.Note that I am able to build it .error is only in the IDE.","body":"Thanks for helping.But still getting same error.Note that I am able to build it .error is only in the IDE."},{"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"score":2,"creation_date":1362997057,"post_id":15335792,"comment_id":21657928,"body_markdown":"Okay, then. In your IDE make sure it&#39;s pointing to the same `settings.xml` file, as your proxy settings are not getting picked up by your IDE apparently.","body":"Okay, then. In your IDE make sure it&#39;s pointing to the same <code>settings.xml</code> file, as your proxy settings are not getting picked up by your IDE apparently."},{"owner":{"account_id":5291486,"reputation":139,"user_id":4223942,"display_name":"Gopal Bairwa"},"score":0,"creation_date":1581027137,"post_id":15335792,"comment_id":106302862,"body_markdown":"I got the same issue when I restarted eclipse in office. It was working fine when I was working from home. So it had to do with proxy settings for corp network. After creating the settings.xml file the way  it is described , it worked like charm.","body":"I got the same issue when I restarted eclipse in office. It was working fine when I was working from home. So it had to do with proxy settings for corp network. After creating the settings.xml file the way  it is described , it worked like charm."}],"tags":[],"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"comment_count":3,"down_vote_count":0,"up_vote_count":79,"is_accepted":true,"score":79,"last_activity_date":1362996360,"creation_date":1362996360,"answer_id":15335792,"question_id":15334394,"body_markdown":"\r\nSimplify things by using the following `settings.xml`:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; \r\n              xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n              xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0\r\n                                  http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;\r\n\r\n     &lt;proxies&gt;\r\n        &lt;proxy&gt;\r\n          &lt;id&gt;myproxy&lt;/id&gt;\r\n          &lt;active&gt;true&lt;/active&gt;\r\n          &lt;protocol&gt;http&lt;/protocol&gt;\r\n          &lt;username&gt;user&lt;/username&gt;  &lt;!-- Put your username here --&gt;\r\n          &lt;password&gt;pass&lt;/password&gt;  &lt;!-- Put your password here --&gt;\r\n          &lt;host&gt;123.45.6.78&lt;/host&gt;   &lt;!-- Put the IP address of your proxy server here --&gt;\r\n          &lt;port&gt;80&lt;/port&gt;            &lt;!-- Put your proxy server&#39;s port number here --&gt;\r\n          &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt; &lt;!-- Do not use this setting unless you know what you&#39;re doing. --&gt;\r\n        &lt;/proxy&gt;    \r\n      &lt;/proxies&gt; \r\n    &lt;/settings&gt;\r\n\r\nUnder Linux/Unix, place it under `~/.m2/settings.xml`. Under Windows place it under `c:\\documents and settings\\youruser\\.m2\\settings.xml` or `c:\\users\\youruser\\.m2\\settings.xml`.\r\n\r\nYou don&#39;t need the `&lt;mirrors/&gt;`, `&lt;profiles/&gt;` and `&lt;settings/&gt;` sections, unless you really know what they&#39;re for.","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>Simplify things by using the following <code>settings.xml</code>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;settings xmlns=\"http://maven.apache.org/SETTINGS/1.0.0\" \n          xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n          xsi:schemaLocation=\"http://maven.apache.org/SETTINGS/1.0.0\n                              http://maven.apache.org/xsd/settings-1.0.0.xsd\"&gt;\n\n &lt;proxies&gt;\n    &lt;proxy&gt;\n      &lt;id&gt;myproxy&lt;/id&gt;\n      &lt;active&gt;true&lt;/active&gt;\n      &lt;protocol&gt;http&lt;/protocol&gt;\n      &lt;username&gt;user&lt;/username&gt;  &lt;!-- Put your username here --&gt;\n      &lt;password&gt;pass&lt;/password&gt;  &lt;!-- Put your password here --&gt;\n      &lt;host&gt;123.45.6.78&lt;/host&gt;   &lt;!-- Put the IP address of your proxy server here --&gt;\n      &lt;port&gt;80&lt;/port&gt;            &lt;!-- Put your proxy server's port number here --&gt;\n      &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt; &lt;!-- Do not use this setting unless you know what you're doing. --&gt;\n    &lt;/proxy&gt;    \n  &lt;/proxies&gt; \n&lt;/settings&gt;\n</code></pre>\n\n<p>Under Linux/Unix, place it under <code>~/.m2/settings.xml</code>. Under Windows place it under <code>c:\\documents and settings\\youruser\\.m2\\settings.xml</code> or <code>c:\\users\\youruser\\.m2\\settings.xml</code>.</p>\n\n<p>You don't need the <code>&lt;mirrors/&gt;</code>, <code>&lt;profiles/&gt;</code> and <code>&lt;settings/&gt;</code> sections, unless you really know what they're for.</p>\n"},{"comments":[{"owner":{"account_id":2440540,"reputation":300,"user_id":2129200,"display_name":"Manoj"},"score":1,"creation_date":1516601723,"post_id":23887221,"comment_id":83738179,"body_markdown":"Thanks it worked for me. I copied eclipse from one machine to another and the maven local cache seems to be the issue behind it for me. When I updated the sanpshot, it worked for me.","body":"Thanks it worked for me. I copied eclipse from one machine to another and the maven local cache seems to be the issue behind it for me. When I updated the sanpshot, it worked for me."},{"owner":{"account_id":112525,"reputation":4172,"user_id":296775,"accept_rate":95,"display_name":"weaveoftheride"},"score":2,"creation_date":1537348688,"post_id":23887221,"comment_id":91748455,"body_markdown":"couldn&#39;t see this option in my versino of elcipse (photon)","body":"couldn&#39;t see this option in my versino of elcipse (photon)"},{"owner":{"account_id":103070,"reputation":137,"user_id":1727025,"display_name":"Willy Makend"},"score":0,"creation_date":1544552907,"post_id":23887221,"comment_id":94314148,"body_markdown":"Sometimes the address of the proxy has changed and we do not know.","body":"Sometimes the address of the proxy has changed and we do not know."},{"owner":{"account_id":6575754,"reputation":9298,"user_id":5081877,"accept_rate":92,"display_name":"Yash"},"score":1,"creation_date":1599933390,"post_id":23887221,"comment_id":112931503,"body_markdown":"I have faced the issue: `Failure to transfer xalan:xalan:jar:2.7.1 from https://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact xalan:xalan:jar:2.7.1 from/to central (https://repo.maven.apache.org/maven2): repo.maven.apache.org`. But resolved by `Force Update of Snapshots/Releases`.","body":"I have faced the issue: <code>Failure to transfer xalan:xalan:jar:2.7.1 from https:&#47;&#47;repo.maven.apache.org&#47;maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact xalan:xalan:jar:2.7.1 from&#47;to central (https:&#47;&#47;repo.maven.apache.org&#47;maven2): repo.maven.apache.org</code>. But resolved by <code>Force Update of Snapshots&#47;Releases</code>."}],"tags":[],"owner":{"account_id":1916933,"reputation":8906,"user_id":1729347,"display_name":"Peter Tadros"},"comment_count":4,"down_vote_count":1,"up_vote_count":76,"is_accepted":false,"score":75,"last_activity_date":1620870500,"creation_date":1401186990,"answer_id":23887221,"question_id":15334394,"body_markdown":"This is solved for me when I update maven and check the option &quot;**Force update of Snapshots/Releases**&quot; in Eclipse. this clears all errors. \r\nSo **right click on project** -&gt; **Maven** -&gt; **update project**, **then check the above option** -&gt; **Ok**.\r\nHope this helps you.\r\n\r\nAddition : uncheck &quot;Refresh workspace resources from local filesystem&quot;, it&#39;s working for me.","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>This is solved for me when I update maven and check the option &quot;<strong>Force update of Snapshots/Releases</strong>&quot; in Eclipse. this clears all errors.\nSo <strong>right click on project</strong> -&gt; <strong>Maven</strong> -&gt; <strong>update project</strong>, <strong>then check the above option</strong> -&gt; <strong>Ok</strong>.\nHope this helps you.</p>\n<p>Addition : uncheck &quot;Refresh workspace resources from local filesystem&quot;, it's working for me.</p>\n"},{"comments":[{"owner":{"account_id":659270,"reputation":4476,"user_id":901798,"accept_rate":67,"display_name":"Ankit"},"score":0,"creation_date":1444219547,"post_id":32203158,"comment_id":53807922,"body_markdown":"This worked for me too. I am using STS. Nothing else worked like Maven-update-force... or settings.xml. In my case the reported error was for maven-surefire-plugin. I deleted this folder which was located at .m2/repository/apache/org/maven/plugins/maven-plugins. After that I cleaned the project and it removed the error in pom.xml","body":"This worked for me too. I am using STS. Nothing else worked like Maven-update-force... or settings.xml. In my case the reported error was for maven-surefire-plugin. I deleted this folder which was located at .m2/repository/apache/org/maven/plugins/maven-plugins. After that I cleaned the project and it removed the error in pom.xml"}],"tags":[],"owner":{"account_id":4152649,"reputation":4697,"user_id":3404637,"accept_rate":56,"display_name":"smali"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1440503207,"creation_date":1440503207,"answer_id":32203158,"question_id":15334394,"body_markdown":"To me the solution was just deleted the specific folder which is giving the error from `~/.m2/repository/org/hsqldb/`\r\n\r\nAfter deleting the `hsqldb` folder I have build the project and everything is fine.","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>To me the solution was just deleted the specific folder which is giving the error from <code>~/.m2/repository/org/hsqldb/</code></p>\n\n<p>After deleting the <code>hsqldb</code> folder I have build the project and everything is fine.</p>\n"},{"tags":[],"owner":{"account_id":2320615,"reputation":147,"user_id":2635481,"display_name":"vsm"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1460503748,"creation_date":1460503748,"answer_id":36585885,"question_id":15334394,"body_markdown":"What helped me were the suggestions by @carlspring (create a settings.xml to configure your http proxy):\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; \r\n              xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n              xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0\r\n                                  http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;\r\n    \r\n     &lt;proxies&gt;\r\n        &lt;proxy&gt;\r\n          &lt;id&gt;myproxy&lt;/id&gt;\r\n          &lt;active&gt;true&lt;/active&gt;\r\n          &lt;protocol&gt;http&lt;/protocol&gt;\r\n          &lt;username&gt;user&lt;/username&gt;  &lt;!-- Put your username here --&gt;\r\n          &lt;password&gt;pass&lt;/password&gt;  &lt;!-- Put your password here --&gt;\r\n          &lt;host&gt;123.45.6.78&lt;/host&gt;   &lt;!-- Put the IP address of your proxy server here --&gt;\r\n          &lt;port&gt;80&lt;/port&gt;            &lt;!-- Put your proxy server&#39;s port number here --&gt;\r\n          &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt; &lt;!-- Do not use this setting unless you know what you&#39;re doing. --&gt;\r\n        &lt;/proxy&gt;    \r\n      &lt;/proxies&gt; \r\n    &lt;/settings&gt;\r\n\r\nAND then refreshing eclipse project maven as suggested by @Peter T :\r\n\r\n&quot;Force update of Snapshots/Releases&quot; in Eclipse. this clears all errors. So right click on project -&gt; Maven -&gt; update project, then check the above option -&gt; Ok. Hope this helps you.\r\n\r\n","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>What helped me were the suggestions by @carlspring (create a settings.xml to configure your http proxy):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;settings xmlns=\"http://maven.apache.org/SETTINGS/1.0.0\" \n          xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n          xsi:schemaLocation=\"http://maven.apache.org/SETTINGS/1.0.0\n                              http://maven.apache.org/xsd/settings-1.0.0.xsd\"&gt;\n\n &lt;proxies&gt;\n    &lt;proxy&gt;\n      &lt;id&gt;myproxy&lt;/id&gt;\n      &lt;active&gt;true&lt;/active&gt;\n      &lt;protocol&gt;http&lt;/protocol&gt;\n      &lt;username&gt;user&lt;/username&gt;  &lt;!-- Put your username here --&gt;\n      &lt;password&gt;pass&lt;/password&gt;  &lt;!-- Put your password here --&gt;\n      &lt;host&gt;123.45.6.78&lt;/host&gt;   &lt;!-- Put the IP address of your proxy server here --&gt;\n      &lt;port&gt;80&lt;/port&gt;            &lt;!-- Put your proxy server's port number here --&gt;\n      &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt; &lt;!-- Do not use this setting unless you know what you're doing. --&gt;\n    &lt;/proxy&gt;    \n  &lt;/proxies&gt; \n&lt;/settings&gt;\n</code></pre>\n\n<p>AND then refreshing eclipse project maven as suggested by @Peter T :</p>\n\n<p>\"Force update of Snapshots/Releases\" in Eclipse. this clears all errors. So right click on project -> Maven -> update project, then check the above option -> Ok. Hope this helps you.</p>\n"},{"tags":[],"owner":{"account_id":3757293,"reputation":724,"user_id":3123372,"accept_rate":22,"display_name":"user3123372"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1462902520,"creation_date":1462902520,"answer_id":37145608,"question_id":15334394,"body_markdown":"If you are in windows os and dont need any proxy \r\nthen delete the whole proxy setting \r\n\r\n    &lt;proxies&gt;\r\n        &lt;proxy&gt;\r\n       ..................\r\n        &lt;/proxy&gt;    \r\n      &lt;/proxies&gt; \r\n\r\nand replace with \r\n\r\n    &lt;proxies/&gt; \r\n\r\nand then do a maven clean build","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>If you are in windows os and dont need any proxy \nthen delete the whole proxy setting </p>\n\n<pre><code>&lt;proxies&gt;\n    &lt;proxy&gt;\n   ..................\n    &lt;/proxy&gt;    \n  &lt;/proxies&gt; \n</code></pre>\n\n<p>and replace with </p>\n\n<pre><code>&lt;proxies/&gt; \n</code></pre>\n\n<p>and then do a maven clean build</p>\n"},{"tags":[],"owner":{"account_id":3613080,"reputation":2890,"user_id":3013633,"accept_rate":93,"display_name":"iaforek"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1464172565,"creation_date":1464172565,"answer_id":37434580,"question_id":15334394,"body_markdown":"If none of the above works then try and go this question and answer:\r\nhttps://stackoverflow.com/questions/5074063/maven-error-failure-to-transfer\r\n\r\nand delete your `.lastUpdated` files.","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>If none of the above works then try and go this question and answer:\n<a href=\"https://stackoverflow.com/questions/5074063/maven-error-failure-to-transfer\">Maven error &quot;Failure to transfer...&quot;</a></p>\n\n<p>and delete your <code>.lastUpdated</code> files.</p>\n"},{"tags":[],"owner":{"account_id":4968690,"reputation":1254,"user_id":3997195,"accept_rate":62,"display_name":"thepolina"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1474518698,"creation_date":1474518698,"answer_id":39630312,"question_id":15334394,"body_markdown":"I started using maven on my machine first time in while. Got this error: `Could not transfer artifact from/to central (https://repo.maven.apache.org/maven2) No such file or directory`\r\nCleaned up ~/.m2/repository directory. Don&#39;t experience this problem again","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>I started using maven on my machine first time in while. Got this error: <code>Could not transfer artifact from/to central (https://repo.maven.apache.org/maven2) No such file or directory</code>\nCleaned up ~/.m2/repository directory. Don't experience this problem again</p>\n"},{"tags":[],"owner":{"account_id":10517283,"reputation":998,"user_id":7750999,"display_name":"Caffeine Coder"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1490181615,"creation_date":1490181615,"answer_id":42950180,"question_id":15334394,"body_markdown":"1. Update Maven Project and check the option &quot;Force update of Snapshots/Releases&quot;, it will remove errors.\r\n2. If not, Maven clean and install the Project.\r\n3. Still the error isn&#39;t removed, repeat step 1.\r\n\r\nIt worked for me :)","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<ol>\n<li>Update Maven Project and check the option \"Force update of Snapshots/Releases\", it will remove errors.</li>\n<li>If not, Maven clean and install the Project.</li>\n<li>Still the error isn't removed, repeat step 1.</li>\n</ol>\n\n<p>It worked for me :)</p>\n"},{"tags":[],"owner":{"account_id":10575521,"reputation":11,"user_id":7790949,"display_name":"user7790949"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525808967,"creation_date":1490865996,"answer_id":43113690,"question_id":15334394,"body_markdown":"This problem was solved by following steps - \r\n\r\n 1. Go to the local m2 repository and find the directory\r\n    org/apache/maven/plugins/maven-surefire-plugin. \r\n 2. Delete the problematic version.\r\n 3. maven update the project, then download it again.","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>This problem was solved by following steps - </p>\n\n<ol>\n<li>Go to the local m2 repository and find the directory\norg/apache/maven/plugins/maven-surefire-plugin. </li>\n<li>Delete the problematic version.</li>\n<li>maven update the project, then download it again.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":224230,"reputation":409,"user_id":483899,"display_name":"Shuvankar Sarkar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1495958312,"creation_date":1495958312,"answer_id":44225039,"question_id":15334394,"body_markdown":"If you are not behind any proxy and still getting connection timeout error, please check firewall settings/ antivirus. Sometimes firewall may block the connectivity from any tool (like Eclipse/STS etc..)","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>If you are not behind any proxy and still getting connection timeout error, please check firewall settings/ antivirus. Sometimes firewall may block the connectivity from any tool (like Eclipse/STS etc..)</p>\n"},{"tags":[],"owner":{"account_id":99342,"reputation":565,"user_id":268387,"accept_rate":44,"display_name":"reg"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1501237136,"creation_date":1501237136,"answer_id":45370891,"question_id":15334394,"body_markdown":"We have the Proxy set on company level.\r\n\r\nAfter disabling proxy in Internet Explorer this issue was solved (looks like it is then disabled on &#39;system&#39; level), so all other browsers will pick this change too.\r\n\r\nNow I can issue MVN commands from CMD prompt and I have no problem while e.g.\r\n\r\n&quot;Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/archetypes/maven-archetype-webapp/1.0/maven-archetype-webapp-1.0.pom&quot;\r\n\r\n...that was causing &#39;Build failure&#39;\r\n\r\nDisabling proxy in IE needs to be done on daily basis in our case, because on each system start it gets set\r\n\r\n\r\n\r\n","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>We have the Proxy set on company level.</p>\n\n<p>After disabling proxy in Internet Explorer this issue was solved (looks like it is then disabled on 'system' level), so all other browsers will pick this change too.</p>\n\n<p>Now I can issue MVN commands from CMD prompt and I have no problem while e.g.</p>\n\n<p>\"Downloading: <a href=\"https://repo.maven.apache.org/maven2/org/apache/maven/archetypes/maven-archetype-webapp/1.0/maven-archetype-webapp-1.0.pom\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2/org/apache/maven/archetypes/maven-archetype-webapp/1.0/maven-archetype-webapp-1.0.pom</a>\"</p>\n\n<p>...that was causing 'Build failure'</p>\n\n<p>Disabling proxy in IE needs to be done on daily basis in our case, because on each system start it gets set</p>\n"},{"comments":[{"owner":{"account_id":1683541,"reputation":578,"user_id":1547266,"display_name":"Arthur"},"score":2,"creation_date":1584022369,"post_id":57361483,"comment_id":107313448,"body_markdown":"Saved me some time. Thank you!","body":"Saved me some time. Thank you!"}],"tags":[],"owner":{"account_id":1100703,"reputation":2901,"user_id":1325621,"accept_rate":100,"display_name":"Goddard"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1565018025,"creation_date":1565018025,"answer_id":57361483,"question_id":15334394,"body_markdown":"This can also happen when using an old version of Java that isn&#39;t capable of communicating properly with the HTTPS protocol that is now required.  Version 8 and above should work as of the time writing this.","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>This can also happen when using an old version of Java that isn't capable of communicating properly with the HTTPS protocol that is now required.  Version 8 and above should work as of the time writing this.</p>\n"},{"tags":[],"owner":{"account_id":14035647,"reputation":851,"user_id":10138416,"display_name":"linker"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1583997750,"creation_date":1583997750,"answer_id":60649310,"question_id":15334394,"body_markdown":"For me it was `File` **&gt;** `Settings` **&gt;** `...` **&gt;** `BuildTools` **&gt;** `Maven` **&gt;** `Work Offline[■]`","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>For me it was <code>File</code> <strong>></strong> <code>Settings</code> <strong>></strong> <code>...</code> <strong>></strong> <code>BuildTools</code> <strong>></strong> <code>Maven</code> <strong>></strong> <code>Work Offline[■]</code></p>\n"},{"tags":[],"owner":{"account_id":7279659,"reputation":248,"user_id":5549834,"display_name":"Meg"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1585637307,"creation_date":1585637307,"answer_id":60944858,"question_id":15334394,"body_markdown":"On IntelliJ go to Preference -&gt; Build, Execution, Deployment -&gt; Build Tools -&gt; Maven. Turn on the checkbox for &quot;Always update snapshots&quot; apply and save changes then do mvn clean install","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>On IntelliJ go to Preference -> Build, Execution, Deployment -> Build Tools -> Maven. Turn on the checkbox for \"Always update snapshots\" apply and save changes then do mvn clean install</p>\n"},{"tags":[],"owner":{"account_id":4727705,"reputation":309,"user_id":3824135,"accept_rate":50,"display_name":"iQuestProgrammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1596789930,"creation_date":1596789930,"answer_id":63298366,"question_id":15334394,"body_markdown":"You can try to set the proxy settings:\r\n\r\n&gt; File -&gt; Settings -&gt; Appearance -&gt; System Settings -&gt; Http proxy -&gt;\r\n&gt; Auto Detect\r\n\r\nAnd then provide the proxy URL.","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>You can try to set the proxy settings:</p>\n<blockquote>\n<p>File -&gt; Settings -&gt; Appearance -&gt; System Settings -&gt; Http proxy -&gt;\nAuto Detect</p>\n</blockquote>\n<p>And then provide the proxy URL.</p>\n"},{"tags":[],"owner":{"account_id":5903357,"reputation":61,"user_id":4646041,"display_name":"Glaucio"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1604028936,"creation_date":1604002605,"answer_id":64598629,"question_id":15334394,"body_markdown":"Try to use https in repo url: &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt; \r\n\r\nIf you use jdk1.7 or above and your network restrict protocols to newer TLS version then enable TLS1.2: `-Dhttps.protocols=TLSv1,TLSv1.1,TLSv1.2`\r\n\r\n\r\n","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>Try to use https in repo url: https://repo1.maven.org/maven2</p>\n<p>If you use jdk1.7 or above and your network restrict protocols to newer TLS version then enable TLS1.2: <code>-Dhttps.protocols=TLSv1,TLSv1.1,TLSv1.2</code></p>\n"},{"tags":[],"owner":{"account_id":5191590,"reputation":11,"user_id":4154363,"display_name":"JuanCarlos Romero"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645029432,"creation_date":1645029432,"answer_id":71145739,"question_id":15334394,"body_markdown":"I changed the java version from 1.7 to 1.8 and it worked","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>I changed the java version from 1.7 to 1.8 and it worked</p>\n"},{"tags":[],"owner":{"account_id":21448368,"reputation":515,"user_id":15801356,"display_name":"Hassan Shahzad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650533737,"creation_date":1650533737,"answer_id":71952161,"question_id":15334394,"body_markdown":"The issue is that since `maven 3.8.1`, they stopped tranferring via HTTP.\r\nThe simplest solution that worked for me is to simply go to the pom.xml file and under the repository that you are importing, **simply replace** `HTTP` with `HTTPS`. It should work for you.","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>The issue is that since <code>maven 3.8.1</code>, they stopped tranferring via HTTP.\nThe simplest solution that worked for me is to simply go to the pom.xml file and under the repository that you are importing, <strong>simply replace</strong> <code>HTTP</code> with <code>HTTPS</code>. It should work for you.</p>\n"},{"tags":[],"owner":{"account_id":5805773,"reputation":391,"user_id":4578434,"display_name":"Purva"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654673851,"creation_date":1654673851,"answer_id":72541762,"question_id":15334394,"body_markdown":"Right-click on the project.\r\nGo to Maven\r\nUpdate project, then check the above option “Force update of Snapshot/Releases“","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>Right-click on the project.\nGo to Maven\nUpdate project, then check the above option “Force update of Snapshot/Releases“</p>\n"},{"tags":[],"owner":{"account_id":20019142,"reputation":41,"user_id":14674440,"display_name":"wei_elsa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661329214,"creation_date":1661329214,"answer_id":73469742,"question_id":15334394,"body_markdown":"First, you can do `mvn clean` and clear the caches of project. Then reload maven package, and force to update maven snapshot can be final attempt. ","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>First, you can do <code>mvn clean</code> and clear the caches of project. Then reload maven package, and force to update maven snapshot can be final attempt.</p>\n"},{"tags":[],"owner":{"account_id":2409845,"reputation":866,"user_id":2105218,"display_name":"YellowStrawHatter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677521454,"creation_date":1677521454,"answer_id":75584072,"question_id":15334394,"body_markdown":"I have tested all provided solutions, nothing worked for me.\r\n\r\nI&#39;m using a company&#39;s network with a proxy, but since I don&#39;t have the proxy&#39;s credentials, I cannot setup it up in the **settings.xml** file.\r\n\r\nAfter doing some analysis, I found out that one of my project&#39;s dependencies needs to be downloaded from an internal repository.\r\n\r\nSo I need to add it to the settings.xml file (it&#39;s also possible to configure it in the pom.xml)\r\n\r\n\r\nI have tested 2 solutions that worked for me:\r\n\r\n***The first one***: add the missing repository in the **settings.xml** file.\r\n\r\nHere I ensured that I have all internal repositories that I need to download from.\r\n\r\n`central-all` is a grouped repository that groups central-releases and central-snapshots and the public maven repo (https://repo.maven.apache.org/maven2)\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;settings\r\n    \txmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0\r\n    \thttp://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;\r\n    \t&lt;profiles&gt;\r\n    \t\t&lt;profile&gt;\r\n    \t\t\t&lt;id&gt;DEFAULT-PROFILE&lt;/id&gt;\r\n    \t\t\t&lt;activation&gt;\r\n    \t\t\t\t&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n    \t\t\t&lt;/activation&gt;\r\n    \t\t\t&lt;/properties&gt;\r\n    \t\t\t&lt;repositories&gt;\r\n    \t\t\t\t&lt;repository&gt;\r\n    \t\t\t\t\t&lt;id&gt;central-all&lt;/id&gt;\r\n    \t\t\t\t\t&lt;name&gt;Grouped repository (that contains hosted and proxied repositories)&lt;/name&gt;\r\n    \t\t\t\t\t&lt;url&gt;https://company-internal-nexus/nexus/content/groups/central-all&lt;/url&gt;\r\n    \t\t\t\t&lt;/repository&gt;\r\n    \t\t\t\t&lt;repository&gt;\r\n    \t\t\t\t\t&lt;id&gt;central-releases&lt;/id&gt;\r\n    \t\t\t\t\t&lt;name&gt;Grouped central-releases repository&lt;/name&gt;\r\n    \t\t\t\t\t&lt;releases&gt;\r\n    \t\t\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n    \t\t\t\t\t&lt;/releases&gt;\r\n    \t\t\t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n    \t\t\t\t\t&lt;/snapshots&gt;\r\n    \t\t\t\t\t&lt;url&gt;https://company-internal-nexus/nexus/content/groups/central-releases/&lt;/url&gt;\r\n    \t\t\t\t&lt;/repository&gt;\r\n    \t\t\t\t&lt;repository&gt;\r\n    \t\t\t\t\t&lt;id&gt;central-snapshots&lt;/id&gt;\r\n    \t\t\t\t\t&lt;name&gt;Grouped central-snapshots repository&lt;/name&gt;\r\n    \t\t\t\t\t&lt;releases&gt;\r\n    \t\t\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n    \t\t\t\t\t&lt;/releases&gt;\r\n    \t\t\t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n    \t\t\t\t\t&lt;/snapshots&gt;\r\n    \t\t\t\t\t&lt;url&gt;https://company-internal-nexus/nexus/content/groups/central-snapshots/&lt;/url&gt;\r\n    \t\t\t\t&lt;/repository&gt;\r\n    \t\t\t&lt;/repositories&gt;\r\n\r\n    \t\t\t&lt;pluginRepositories&gt;\r\n    \t\t\t\t&lt;pluginRepository&gt;\r\n    \t\t\t\t\t&lt;id&gt;central-all&lt;/id&gt;\r\n    \t\t\t\t\t&lt;name&gt;Grouped repository (that contains hosted and proxied repositories)&lt;/name&gt;\r\n    \t\t\t\t\t&lt;url&gt;https://company-internal-nexus/nexus/content/groups/central-all&lt;/url&gt;\r\n    \t\t\t\t&lt;/pluginRepository&gt;\r\n    \t\t\t\t&lt;pluginRepository&gt;\r\n    \t\t\t\t\t&lt;id&gt;central-releases&lt;/id&gt;\r\n    \t\t\t\t\t&lt;name&gt;Grouped central-releases repository&lt;/name&gt;\r\n    \t\t\t\t\t&lt;releases&gt;\r\n    \t\t\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n    \t\t\t\t\t&lt;/releases&gt;\r\n    \t\t\t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n    \t\t\t\t\t&lt;/snapshots&gt;\r\n    \t\t\t\t\t&lt;url&gt;https://company-internal-nexus/nexus/content/groups/central-releases/&lt;/url&gt;\r\n    \t\t\t\t&lt;/pluginRepository&gt;\r\n    \t\t\t\t&lt;pluginRepository&gt;\r\n    \t\t\t\t\t&lt;id&gt;central-snapshots&lt;/id&gt;\r\n    \t\t\t\t\t&lt;name&gt;Grouped central-snapshots repository&lt;/name&gt;\r\n    \t\t\t\t\t&lt;releases&gt;\r\n    \t\t\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n    \t\t\t\t\t&lt;/releases&gt;\r\n    \t\t\t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n    \t\t\t\t\t&lt;/snapshots&gt;\r\n    \t\t\t\t\t&lt;url&gt;https://company-internal-nexus/nexus/content/groups/central-snapshots/&lt;/url&gt;\r\n    \t\t\t\t&lt;/pluginRepository&gt;\r\n    \t\t\t&lt;/pluginRepositories&gt;\r\n    \t\t&lt;/profile&gt;\r\n    \t&lt;/profiles&gt;\r\n    &lt;/settings&gt;\r\n\r\n\r\n**The second solution:**\r\n\r\nSince `central-all` is a also a proxy to `&quot;https://repo.maven.apache.org/maven2&quot;`, I could have use it in the **mirror** block defined in **settings.xml** \r\n\r\n\t\t&lt;mirror&gt;\r\n\t\t\t&lt;id&gt;central-all&lt;/id&gt;\r\n\t\t\t&lt;mirrorOf&gt;central&lt;/mirrorOf&gt;\r\n\t\t\t&lt;url&gt;https://company-internal-nexus/nexus/content/groups/central-all&lt;/url&gt;\r\n\t\t&lt;/mirror&gt;\r\n\r\n**Note:** by default, the the main Maven Central repository ID is `central`\r\n","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>I have tested all provided solutions, nothing worked for me.</p>\n<p>I'm using a company's network with a proxy, but since I don't have the proxy's credentials, I cannot setup it up in the <strong>settings.xml</strong> file.</p>\n<p>After doing some analysis, I found out that one of my project's dependencies needs to be downloaded from an internal repository.</p>\n<p>So I need to add it to the settings.xml file (it's also possible to configure it in the pom.xml)</p>\n<p>I have tested 2 solutions that worked for me:</p>\n<p><em><strong>The first one</strong></em>: add the missing repository in the <strong>settings.xml</strong> file.</p>\n<p>Here I ensured that I have all internal repositories that I need to download from.</p>\n<p><code>central-all</code> is a grouped repository that groups central-releases and central-snapshots and the public maven repo (<a href=\"https://repo.maven.apache.org/maven2\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2</a>)</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;settings\n    xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0\n    http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;DEFAULT-PROFILE&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n            &lt;/activation&gt;\n            &lt;/properties&gt;\n            &lt;repositories&gt;\n                &lt;repository&gt;\n                    &lt;id&gt;central-all&lt;/id&gt;\n                    &lt;name&gt;Grouped repository (that contains hosted and proxied repositories)&lt;/name&gt;\n                    &lt;url&gt;https://company-internal-nexus/nexus/content/groups/central-all&lt;/url&gt;\n                &lt;/repository&gt;\n                &lt;repository&gt;\n                    &lt;id&gt;central-releases&lt;/id&gt;\n                    &lt;name&gt;Grouped central-releases repository&lt;/name&gt;\n                    &lt;releases&gt;\n                        &lt;enabled&gt;true&lt;/enabled&gt;\n                    &lt;/releases&gt;\n                    &lt;snapshots&gt;\n                        &lt;enabled&gt;false&lt;/enabled&gt;\n                    &lt;/snapshots&gt;\n                    &lt;url&gt;https://company-internal-nexus/nexus/content/groups/central-releases/&lt;/url&gt;\n                &lt;/repository&gt;\n                &lt;repository&gt;\n                    &lt;id&gt;central-snapshots&lt;/id&gt;\n                    &lt;name&gt;Grouped central-snapshots repository&lt;/name&gt;\n                    &lt;releases&gt;\n                        &lt;enabled&gt;false&lt;/enabled&gt;\n                    &lt;/releases&gt;\n                    &lt;snapshots&gt;\n                        &lt;enabled&gt;true&lt;/enabled&gt;\n                    &lt;/snapshots&gt;\n                    &lt;url&gt;https://company-internal-nexus/nexus/content/groups/central-snapshots/&lt;/url&gt;\n                &lt;/repository&gt;\n            &lt;/repositories&gt;\n\n            &lt;pluginRepositories&gt;\n                &lt;pluginRepository&gt;\n                    &lt;id&gt;central-all&lt;/id&gt;\n                    &lt;name&gt;Grouped repository (that contains hosted and proxied repositories)&lt;/name&gt;\n                    &lt;url&gt;https://company-internal-nexus/nexus/content/groups/central-all&lt;/url&gt;\n                &lt;/pluginRepository&gt;\n                &lt;pluginRepository&gt;\n                    &lt;id&gt;central-releases&lt;/id&gt;\n                    &lt;name&gt;Grouped central-releases repository&lt;/name&gt;\n                    &lt;releases&gt;\n                        &lt;enabled&gt;true&lt;/enabled&gt;\n                    &lt;/releases&gt;\n                    &lt;snapshots&gt;\n                        &lt;enabled&gt;false&lt;/enabled&gt;\n                    &lt;/snapshots&gt;\n                    &lt;url&gt;https://company-internal-nexus/nexus/content/groups/central-releases/&lt;/url&gt;\n                &lt;/pluginRepository&gt;\n                &lt;pluginRepository&gt;\n                    &lt;id&gt;central-snapshots&lt;/id&gt;\n                    &lt;name&gt;Grouped central-snapshots repository&lt;/name&gt;\n                    &lt;releases&gt;\n                        &lt;enabled&gt;false&lt;/enabled&gt;\n                    &lt;/releases&gt;\n                    &lt;snapshots&gt;\n                        &lt;enabled&gt;true&lt;/enabled&gt;\n                    &lt;/snapshots&gt;\n                    &lt;url&gt;https://company-internal-nexus/nexus/content/groups/central-snapshots/&lt;/url&gt;\n                &lt;/pluginRepository&gt;\n            &lt;/pluginRepositories&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n&lt;/settings&gt;\n</code></pre>\n<p><strong>The second solution:</strong></p>\n<p>Since <code>central-all</code> is a also a proxy to <code>&quot;https://repo.maven.apache.org/maven2&quot;</code>, I could have use it in the <strong>mirror</strong> block defined in <strong>settings.xml</strong></p>\n<pre><code>    &lt;mirror&gt;\n        &lt;id&gt;central-all&lt;/id&gt;\n        &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;\n        &lt;url&gt;https://company-internal-nexus/nexus/content/groups/central-all&lt;/url&gt;\n    &lt;/mirror&gt;\n</code></pre>\n<p><strong>Note:</strong> by default, the the main Maven Central repository ID is <code>central</code></p>\n"}],"owner":{"account_id":1744680,"reputation":2038,"user_id":1595165,"accept_rate":55,"display_name":"Sajith"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":581981,"favorite_count":0,"down_vote_count":1,"up_vote_count":115,"accepted_answer_id":15335792,"answer_count":25,"score":114,"last_activity_date":1677521454,"creation_date":1362991839,"question_id":15334394,"body_markdown":"I have created a new maven project in SpringSource Tool Suite. I am getting this error in my new maven project.\r\n\r\n&gt; Failure to transfer\r\n&gt; org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from\r\n&gt; http://repo1.maven.org/maven2 was cached in the local repository,\r\n&gt; resolution will not be reattempted until the update interval of\r\n&gt; central has elapsed or updates are forced. Original error: Could not\r\n&gt; transfer artifact\r\n&gt; org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to\r\n&gt; central (http://repo1.maven.org/maven2): Connect times out\r\n\r\n**pom.xml:**\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0\r\n                                 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      \r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n      &lt;groupId&gt;com.test.app&lt;/groupId&gt;\r\n      &lt;artifactId&gt;TestApp&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n      &lt;name&gt;TestApp&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n    \r\n      &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n      &lt;/properties&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\nSettings.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; \r\n              xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n              xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;\r\n      &lt;pluginGroups&gt;\r\n      &lt;/pluginGroups&gt;\r\n     &lt;proxies&gt;\r\n        &lt;proxy&gt;\r\n          &lt;id&gt;optional&lt;/id&gt;\r\n          &lt;active&gt;true&lt;/active&gt;\r\n          &lt;protocol&gt;http&lt;/protocol&gt;\r\n          &lt;username&gt;user&lt;/username&gt;\r\n          &lt;password&gt;pass&lt;/password&gt;\r\n          &lt;host&gt;ip&lt;/host&gt;\r\n          &lt;port&gt;80&lt;/port&gt;\r\n          &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt;\r\n        &lt;/proxy&gt;    \r\n      &lt;/proxies&gt; \r\n      &lt;servers&gt;  \r\n      &lt;/servers&gt;\r\n        &lt;mirrors&gt;   \r\n        &lt;mirror&gt;\r\n          &lt;id&gt;mirrorId&lt;/id&gt;\r\n          &lt;mirrorOf&gt;repositoryId&lt;/mirrorOf&gt;\r\n          &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt;\r\n          &lt;url&gt;http://repo1.maven.org/maven2/&lt;/url&gt;\r\n        &lt;/mirror&gt;    \r\n      &lt;/mirrors&gt;  \r\n    &lt;profiles&gt;\r\n     &lt;/profiles&gt;\r\n    &lt;/settings&gt;\r\n\r\nPlease note that I am able to build it.Error is showing in pom.xml inside IDE .Any solutions?\r\n","title":"Could not transfer artifact org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to central (http://repo1.maven.org/maven2)","body":"<p>I have created a new maven project in SpringSource Tool Suite. I am getting this error in my new maven project.</p>\n\n<blockquote>\n  <p>Failure to transfer\n  org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from\n  <a href=\"http://repo1.maven.org/maven2\" rel=\"noreferrer\">http://repo1.maven.org/maven2</a> was cached in the local repository,\n  resolution will not be reattempted until the update interval of\n  central has elapsed or updates are forced. Original error: Could not\n  transfer artifact\n  org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 from/to\n  central (<a href=\"http://repo1.maven.org/maven2\" rel=\"noreferrer\">http://repo1.maven.org/maven2</a>): Connect times out</p>\n</blockquote>\n\n<p><strong>pom.xml:</strong></p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0\n                             http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.test.app&lt;/groupId&gt;\n  &lt;artifactId&gt;TestApp&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n\n  &lt;name&gt;TestApp&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Settings.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;settings xmlns=\"http://maven.apache.org/SETTINGS/1.0.0\" \n          xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n          xsi:schemaLocation=\"http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd\"&gt;\n  &lt;pluginGroups&gt;\n  &lt;/pluginGroups&gt;\n &lt;proxies&gt;\n    &lt;proxy&gt;\n      &lt;id&gt;optional&lt;/id&gt;\n      &lt;active&gt;true&lt;/active&gt;\n      &lt;protocol&gt;http&lt;/protocol&gt;\n      &lt;username&gt;user&lt;/username&gt;\n      &lt;password&gt;pass&lt;/password&gt;\n      &lt;host&gt;ip&lt;/host&gt;\n      &lt;port&gt;80&lt;/port&gt;\n      &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt;\n    &lt;/proxy&gt;    \n  &lt;/proxies&gt; \n  &lt;servers&gt;  \n  &lt;/servers&gt;\n    &lt;mirrors&gt;   \n    &lt;mirror&gt;\n      &lt;id&gt;mirrorId&lt;/id&gt;\n      &lt;mirrorOf&gt;repositoryId&lt;/mirrorOf&gt;\n      &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt;\n      &lt;url&gt;http://repo1.maven.org/maven2/&lt;/url&gt;\n    &lt;/mirror&gt;    \n  &lt;/mirrors&gt;  \n&lt;profiles&gt;\n &lt;/profiles&gt;\n&lt;/settings&gt;\n</code></pre>\n\n<p>Please note that I am able to build it.Error is showing in pom.xml inside IDE .Any solutions?</p>\n"},{"tags":["java","unit-testing","code-generation"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1677504884,"post_id":75581067,"comment_id":133344874,"body_markdown":"What&#39;s wrong with what you have? What do you mean &quot;generate java code&quot;? Generate it when? To do what?","body":"What&#39;s wrong with what you have? What do you mean &quot;generate java code&quot;? Generate it when? To do what?"},{"owner":{"account_id":25197299,"reputation":251,"user_id":20371237,"display_name":"R A"},"score":0,"creation_date":1677504958,"post_id":75581067,"comment_id":133344905,"body_markdown":"@ElliottFrisch I wrote the Java code sample by hand. I&#39;m looking for a way to generate it automatically from toString output","body":"@ElliottFrisch I wrote the Java code sample by hand. I&#39;m looking for a way to generate it automatically from toString output"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1677505056,"post_id":75581067,"comment_id":133344932,"body_markdown":"Still not making any sense... you want to generate a `record` based on `toString` output of some **existing** Java object? Why? To what end? It already exists. And if you *could* generate such code, you would need to **compile** it.","body":"Still not making any sense... you want to generate a <code>record</code> based on <code>toString</code> output of some <b>existing</b> Java object? Why? To what end? It already exists. And if you <i>could</i> generate such code, you would need to <b>compile</b> it."},{"owner":{"account_id":25197299,"reputation":251,"user_id":20371237,"display_name":"R A"},"score":0,"creation_date":1677505137,"post_id":75581067,"comment_id":133344959,"body_markdown":"@ElliottFrisch As I said - i want to write an assertion. I need a copy of the object generated by production code in my test sources code","body":"@ElliottFrisch As I said - i want to write an assertion. I need a copy of the object generated by production code in my test sources code"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1677505143,"post_id":75581067,"comment_id":133344962,"body_markdown":"Unclear. If you want some sort of &#39;generator&#39; what would be the input and what would be the output? I often generate Java code from shell scripts","body":"Unclear. If you want some sort of &#39;generator&#39; what would be the input and what would be the output? I often generate Java code from shell scripts"},{"owner":{"account_id":25197299,"reputation":251,"user_id":20371237,"display_name":"R A"},"score":0,"creation_date":1677505220,"post_id":75581067,"comment_id":133344992,"body_markdown":"@g00se Input - toString string value. Output - Java source code that builds an object represented by that value","body":"@g00se Input - toString string value. Output - Java source code that builds an object represented by that value"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1677505251,"post_id":75581067,"comment_id":133345010,"body_markdown":"One reason why this kind of code (probably) doesn&#39;t exist in library form is that it can&#39;t be done reliably. As a trivial example `List.of(&quot;foo&quot;, &quot;bar&quot;)` and `List.of(&quot;foo, bar&quot;)` produce the exact same `toString()` output: there&#39;s no way for a parser to distinguish the two and identify which one it &quot;really&quot; was. Similar problems also occur with individual fields. This might be solvable for a tightly defined subset of features, but that restriction makes it less interesting to implement &quot;generally&quot;. I suspect hundreds of in-house implementations of this exist throught the world, though.","body":"One reason why this kind of code (probably) doesn&#39;t exist in library form is that it can&#39;t be done reliably. As a trivial example <code>List.of(&quot;foo&quot;, &quot;bar&quot;)</code> and <code>List.of(&quot;foo, bar&quot;)</code> produce the exact same <code>toString()</code> output: there&#39;s no way for a parser to distinguish the two and identify which one it &quot;really&quot; was. Similar problems also occur with individual fields. This might be solvable for a tightly defined subset of features, but that restriction makes it less interesting to implement &quot;generally&quot;. I suspect hundreds of in-house implementations of this exist throught the world, though."},{"owner":{"account_id":25197299,"reputation":251,"user_id":20371237,"display_name":"R A"},"score":0,"creation_date":1677505359,"post_id":75581067,"comment_id":133345048,"body_markdown":"@JoachimSauer Unreliability is OK, I can change the results by hand","body":"@JoachimSauer Unreliability is OK, I can change the results by hand"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1677505378,"post_id":75581067,"comment_id":133345057,"body_markdown":"Write yourself a little app that takes *[User[firstName=John, lastName=Smith]]* as input and writes `u = new User(&quot;John&quot;, &quot;Smith&quot;)` to stdout","body":"Write yourself a little app that takes <i>[User[firstName=John, lastName=Smith]]</i> as input and writes <code>u = new User(&quot;John&quot;, &quot;Smith&quot;)</code> to stdout"},{"owner":{"account_id":25197299,"reputation":251,"user_id":20371237,"display_name":"R A"},"score":0,"creation_date":1677505454,"post_id":75581067,"comment_id":133345083,"body_markdown":"@g00se I was hoping someone has the solution already","body":"@g00se I was hoping someone has the solution already"},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":2,"creation_date":1677505558,"post_id":75581067,"comment_id":133345113,"body_markdown":"Nothing like this exists in the JDK, so the question is then &quot;*is there a library that can do it?*&quot;. Those questions are off-topic here, but FWIW, I&#39;m not aware of anything. You&#39;ll have to write something yourself. It will probably be a lot easier starting from the in-memory version of the object (i.e. have the object print itself as &quot;java source&quot;), rather than starting from the toString you&#39;ve shown, where you&#39;ve already lost a bunch of useful information.","body":"Nothing like this exists in the JDK, so the question is then &quot;<i>is there a library that can do it?</i>&quot;. Those questions are off-topic here, but FWIW, I&#39;m not aware of anything. You&#39;ll have to write something yourself. It will probably be a lot easier starting from the in-memory version of the object (i.e. have the object print itself as &quot;java source&quot;), rather than starting from the toString you&#39;ve shown, where you&#39;ve already lost a bunch of useful information."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1677508356,"post_id":75581067,"comment_id":133346020,"body_markdown":"There are a number of Java classes which do this, but they do it by guaranteeing a specific format in their toString method, and having a static parse method which can ‘reverse’ that string.  An example of this is [AWTKeyStroke](https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/java/awt/AWTKeyStroke.html#toString()).","body":"There are a number of Java classes which do this, but they do it by guaranteeing a specific format in their toString method, and having a static parse method which can ‘reverse’ that string.  An example of this is <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/java/awt/AWTKeyStroke.html#toString()\" rel=\"nofollow noreferrer\">AWTKeyStroke</a>."},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":1,"creation_date":1677511314,"post_id":75581067,"comment_id":133347092,"body_markdown":"You could use reflection to inspect the class fields, and then parse your string to match the resulting tokens against the class you have inspected. In your example, in the string `User[firstName=John, lastName=Smith]`, `User` is the class, `firstname` is the first field, `John` is its value, `lastname` is the second field, and `Smith` is its value. A `record` always has a *canonical constructor*, so you could easily use a `Constructor` instance with the given parsed values. Requirement: no `,`, `=`, `[` or `]` in all of your record fields, or the parsing will be challenging.","body":"You could use reflection to inspect the class fields, and then parse your string to match the resulting tokens against the class you have inspected. In your example, in the string <code>User[firstName=John, lastName=Smith]</code>, <code>User</code> is the class, <code>firstname</code> is the first field, <code>John</code> is its value, <code>lastname</code> is the second field, and <code>Smith</code> is its value. A <code>record</code> always has a <i>canonical constructor</i>, so you could easily use a <code>Constructor</code> instance with the given parsed values. Requirement: no <code>,</code>, <code>=</code>, <code>[</code> or <code>]</code> in all of your record fields, or the parsing will be challenging."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677520972,"creation_date":1677520575,"answer_id":75583966,"question_id":75581067,"body_markdown":"Out of curiosity I took a stab at this and it turns out to be reasonably simple, if you can live with some restrictions. Some of those are fundamental, others just require a bit more code to work around\r\n\r\n- this handles exactly only:\r\n  - record classes\r\n  - lists of those record classes\r\n  - strings, primitives and their wrappers\r\n- it assumes the input is actually generated by the default `toString` and is not forgiving (extra/missing whitespace at the wrong place breaks it).\r\n- the top-level class(es) that can occur have to be handed to the parser\r\n- records are assumed to not override their `toString`\r\n- the canonical constructor of each record is used\r\n- some inputs are simple ambiguous, they will be resolved to *something*, but there&#39;s no guarantee which interpretation\r\n- there is limited error checking\r\n- there is no validation for the primitive/wrapper types: non-sensical inputs will be quietly translated. Your compiler will tell you, &#39;though.\r\n- I&#39;m using the new switch features, but that&#39;s trivial to change, if needed\r\n- I&#39;ve not hand-written a parser in quite some while. Don&#39;t look at this for best practices.\r\n- there are definitely bugs\r\n\r\nAdding support for `Map` would be fairly straightforward. And due to the nature of these parsers, modifying it to actually build the objects instead of the object construction code would be reasonably simple as well. Both of these are left as an exercise for the reader.\r\n\r\nThe full tests are below, but as an example, here&#39;s how to use it:\r\n\r\n```\r\nimport java.util.List;\r\n\r\npublic class Foo {\r\n  public static void main(String[] args) {\r\n    var parser = new RecordToStringParser(List.of(User.class, UserContainer.class));\r\n    System.out.println(parser.convert(&quot;User[firstName=John, lastName=Smith]&quot;));\r\n    System.out.println(parser.convert(&quot;User[firstName=John, Doe, lastName=Smith]&quot;));\r\n    System.out.println(parser.convert(&quot;UserContainer[user=User[firstName=John, lastName=Smith], flags=13]&quot;));\r\n    System.out.println(parser.convert(&quot;UserContainer[user=null, flags=42]&quot;));\r\n    System.out.println(parser.convert(&quot;[User[firstName=John, lastName=Smith], UserContainer[user=null, flags=1]]&quot;));\r\n    System.out.println(parser.convert(&quot;UserContainer[user=null, flags=what are you talking about]&quot;));\r\n  }\r\n}\r\n\r\nrecord User(String firstName, String lastName) {}\r\nrecord UserContainer(User user, int flags) {}\r\n```\r\nThis prints\r\n\r\n```none\r\nnew User(&quot;John&quot;, &quot;Smith&quot;)\r\nnew User(&quot;John, Doe&quot;, &quot;Smith&quot;)\r\nnew UserContainer(new User(&quot;John&quot;, &quot;Smith&quot;), 13)\r\nnew UserContainer(null, 42)\r\nList.of(new User(&quot;John&quot;, &quot;Smith&quot;), new UserContainer(null, 1))\r\nnew UserContainer(null, what are you talking about)\r\n```\r\n\r\nNote how the last one just blindly dumps the value without verifying the type? &#129335;\r\n```\r\nimport java.lang.reflect.RecordComponent;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Set;\r\nimport java.util.function.Function;\r\nimport java.util.regex.Matcher;\r\nimport java.util.regex.Pattern;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class RecordToStringParser {\r\n\r\n  private static final Pattern RECORD_NAME = Pattern.compile(&quot;^[A-Z][A-Za-z0-9]+&quot;);\r\n  private static final Set&lt;Class&lt;?&gt;&gt; WRAPPER_CLASSES = Set.of(\r\n      Boolean.class, Byte.class, Character.class, Short.class, Integer.class, Long.class, Float.class, Double.class);\r\n\r\n  private final Map&lt;String, Class&lt;? extends Record&gt;&gt; classes;\r\n\r\n  public RecordToStringParser(Class&lt;? extends Record&gt; c1) {\r\n    this(List.of(c1));\r\n  }\r\n\r\n  public RecordToStringParser(List&lt;Class&lt;? extends Record&gt;&gt; inputClasses) {\r\n    if (inputClasses.isEmpty()) {\r\n      throw new IllegalArgumentException(&quot;No record classes specified!&quot;);\r\n    }\r\n    try {\r\n      classes = inputClasses.stream()\r\n          .collect(Collectors.toMap(Class::getSimpleName, Function.identity()));\r\n    } catch (IllegalStateException e) {\r\n      // this happens when simple names are not unique!\r\n      throw new IllegalArgumentException(&quot;Colliding class names detected!&quot;, e);\r\n    }\r\n    for (String name : classes.keySet()) {\r\n      if (!RECORD_NAME.matcher(name).matches()) {\r\n        throw new IllegalArgumentException(&quot;Nonconforming class name found: &quot; + name);\r\n      }\r\n    }\r\n  }\r\n\r\n  public String convert(String input) {\r\n    return new Parse(input).parse();\r\n  }\r\n\r\n  private class Parse {\r\n    String in;\r\n    int pos = 0;\r\n    StringBuilder out = new StringBuilder();\r\n\r\n    Parse(String input) {\r\n      this.in = input;\r\n    }\r\n\r\n    String parse() {\r\n      parseNext();\r\n      if (pos != in.length()) {\r\n        throw err(&quot;Unexpected content after successful parse&quot;);\r\n      }\r\n      return out.toString();\r\n    }\r\n\r\n    private void parseNext() {\r\n      if (isNext(&#39;[&#39;)) {\r\n        parseList();\r\n      } else {\r\n        parseRecord();\r\n      }\r\n    }\r\n\r\n\r\n    private void parseRecord() {\r\n      if (maybeConsume(&quot;null&quot;)) {\r\n        out.append(&quot;null&quot;);\r\n        return;\r\n      }\r\n      Matcher matcher = RECORD_NAME.matcher(in);\r\n      matcher.region(pos, in.length());\r\n      if (!matcher.find()) {\r\n        throw err(&quot;Record expected.&quot;);\r\n      }\r\n      pos = matcher.end();\r\n      consume(&#39;[&#39;);\r\n      String className = matcher.group();\r\n      out.append(&quot;new &quot;).append(className).append(&quot;(&quot;);\r\n      Class&lt;? extends Record&gt; recordClass = classes.get(className);\r\n      if (recordClass == null) {\r\n        throw err(&quot;Unknown record class &quot; + className);\r\n      }\r\n      parseMembers(recordClass);\r\n      out.append(&quot;)&quot;);\r\n      consume(&#39;]&#39;);\r\n    }\r\n\r\n    private void parseRecord(Class&lt;? extends Record&gt; type) {\r\n      if (maybeConsume(&quot;null&quot;)) {\r\n        out.append(&quot;null&quot;);\r\n        return;\r\n      }\r\n      consume(type.getSimpleName());\r\n      consume(&#39;[&#39;);\r\n      out.append(&quot;new &quot;).append(type.getSimpleName()).append(&quot;(&quot;);\r\n      parseMembers(type);\r\n      out.append(&quot;)&quot;);\r\n      consume(&#39;]&#39;);\r\n    }\r\n\r\n    private void parseMembers(Class&lt;? extends Record&gt; recordClass) {\r\n      RecordComponent[] components = recordClass.getRecordComponents();\r\n      for (int i = 0; i &lt; components.length; i++) {\r\n        RecordComponent component = components[i];\r\n        boolean isLastComponent = i == components.length - 1;\r\n        consume(component.getName());\r\n        consume(&#39;=&#39;);\r\n        Class&lt;?&gt; type = component.getType();\r\n        if (type.isRecord()) {\r\n          parseRecord(type.asSubclass(Record.class));\r\n        } else if (List.class == type) {\r\n          parseList();\r\n        } else if (type == String.class || type.isPrimitive() || WRAPPER_CLASSES.contains(type)) {\r\n          parseSimpleValues(components, i, isLastComponent, type);\r\n        } else {\r\n          throw err(&quot;Unsupported component type &quot; + type);\r\n        }\r\n        if (!isLastComponent) {\r\n          consume(&quot;, &quot;);\r\n          out.append(&quot;, &quot;);\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    private void parseSimpleValues(RecordComponent[] components, int i, boolean isLastComponent, Class&lt;?&gt; type) {\r\n      String expectedSuffix = isLastComponent ? &quot;]&quot; : &quot;, &quot; + components[i + 1].getName() + &quot;=&quot;;\r\n      isNext(&#39;\\0&#39;); // ensure we throw the right exception when we&#39;re at the end.\r\n      int valueEnd = in.indexOf(expectedSuffix, pos);\r\n      if (valueEnd == -1) {\r\n        throw err(&quot;Failed to find end of value!&quot;);\r\n      }\r\n      String value = in.substring(pos, valueEnd);\r\n      if (type == String.class &amp;&amp; !value.equals(&quot;null&quot;)) {\r\n        // interpret string values null as the value null and not the string &quot;null&quot;\r\n        out.append(&#39;&quot;&#39;);\r\n        for (char c : value.toCharArray()) {\r\n          switch (c) {\r\n            case &#39;&quot;&#39;, &#39;\\\\&#39; -&gt; out.append(&#39;\\\\&#39;).append(c);\r\n            case &#39;\\n&#39; -&gt; out.append(&quot;\\\\n&quot;);\r\n            case &#39;\\t&#39; -&gt; out.append(&quot;\\\\t&quot;);\r\n            // maybe add some more?\r\n            default -&gt; out.append(c);\r\n          }\r\n        }\r\n        out.append(&#39;&quot;&#39;);\r\n      } else {\r\n        // maybe add verification?\r\n        out.append(value);\r\n      }\r\n      pos = valueEnd;\r\n    }\r\n\r\n    private void parseList() {\r\n      if (maybeConsume(&quot;null&quot;)) {\r\n        out.append(&quot;null&quot;);\r\n        return;\r\n      }\r\n      consume(&#39;[&#39;);\r\n      out.append(&quot;List.of(&quot;);\r\n      if (!isNext(&#39;]&#39;)) {\r\n        parseNext();\r\n        while (maybeConsume(&quot;, &quot;)) {\r\n          out.append(&quot;, &quot;);\r\n          parseRecord();\r\n        }\r\n      }\r\n      consume(&#39;]&#39;);\r\n      out.append(&quot;)&quot;);\r\n    }\r\n\r\n    private boolean isNext(char expected) {\r\n      if (pos &gt;= in.length()) {\r\n        throw err(&quot;Unexpected end of string.&quot;);\r\n      }\r\n      return in.charAt(pos) == expected;\r\n    }\r\n\r\n    private boolean maybeConsume(String expected) {\r\n      boolean matches = in.regionMatches(pos, expected, 0, expected.length());\r\n      if (matches) {\r\n        pos += expected.length();\r\n      }\r\n      return matches;\r\n    }\r\n\r\n    private void consume(char expected) {\r\n      if (pos &gt;= in.length()) {\r\n        throw err(&quot;Unexpected end of string, expected &quot; + expected);\r\n      }\r\n      if (in.charAt(pos) != expected) {\r\n        throw err(&quot;Expected &quot; + expected);\r\n      }\r\n      pos++;\r\n    }\r\n\r\n    private void consume(String expected) {\r\n      if (!in.regionMatches(pos, expected, 0, expected.length())) {\r\n        throw err(&quot;Expected &quot; + expected);\r\n      }\r\n      pos += expected.length();\r\n    }\r\n\r\n    private IllegalArgumentException err(String msg) {\r\n      return new IllegalArgumentException(String.format(&quot;Unexpected input at pos %d (%s): %s&quot;, pos, this, msg));\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n      // simple way to see parser state in the debugger ;-)\r\n      return in.substring(0, pos) + &quot;&lt;|&gt;&quot; + in.substring(pos);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nTest class:\r\n\r\n```\r\nimport static org.junit.jupiter.api.Assertions.*;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.params.ParameterizedTest;\r\nimport org.junit.jupiter.params.provider.MethodSource;\r\n\r\npublic class RecordToStringParserTest {\r\n  private List&lt;Class&lt;? extends Record&gt;&gt; BASE_RECORD_CLASSES = List.of(\r\n      Empty.class, Simple.class, WithNumber.class, NestingSimple.class, NestingListOfSimple.class, Recursive.class,\r\n      TwoStrings.class, NestingRecord.class);\r\n\r\n  @Test\r\n  void mustProvideClasses() {\r\n    final List&lt;Class&lt;? extends Record&gt;&gt; noClasses = List.of();\r\n    assertThrows(IllegalArgumentException.class, () -&gt; new RecordToStringParser(noClasses));\r\n  }\r\n\r\n  @Test\r\n  void classNamesMustStartWithUpperCase() {\r\n    assertThrows(IllegalArgumentException.class, () -&gt; new RecordToStringParser(lowerRecordName.class));\r\n  }\r\n\r\n  @Test\r\n  void classNamesMustBeAlphaNumeric() {\r\n    assertThrows(IllegalArgumentException.class, () -&gt; new RecordToStringParser(NonAlphaNum_.class));\r\n  }\r\n\r\n  @Test\r\n  void simpleClassNamesMustBeUnique() {\r\n    List&lt;Class&lt;? extends Record&gt;&gt; collidingClasses = List.of(NS1.Collision.class, NS2.Collision.class);\r\n    assertThrows(IllegalArgumentException.class,\r\n        () -&gt; new RecordToStringParser(collidingClasses));\r\n  }\r\n\r\n  @SuppressWarnings(&quot;unchecked&quot;)\r\n  public static Object[][] realToStringSources() {\r\n    return new Object[][] {\r\n        {new Empty(), &quot;new Empty()&quot;},\r\n        {new Simple(&quot;bar&quot;), &quot;new Simple(\\&quot;bar\\&quot;)&quot;},\r\n        {new Simple(&quot;&quot;), &quot;new Simple(\\&quot;\\&quot;)&quot;},\r\n        {new Simple(null), &quot;new Simple(null)&quot;},\r\n        {new Simple(&quot;\\n&quot;), &quot;new Simple(\\&quot;\\\\n\\&quot;)&quot;},\r\n        {new Simple(&quot;\\\\&quot;), &quot;new Simple(\\&quot;\\\\\\\\\\&quot;)&quot;},\r\n        {new Simple(&quot;\\&quot;\\\\\\&quot;&quot;), &quot;new Simple(\\&quot;\\\\\\&quot;\\\\\\\\\\\\\\&quot;\\&quot;)&quot;}, // thanks, I hate it\r\n        {new WithNumber(1), &quot;new WithNumber(1)&quot;},\r\n        {new NestingSimple(new Simple(&quot;bar&quot;)), &quot;new NestingSimple(new Simple(\\&quot;bar\\&quot;))&quot;},\r\n        {new NestingSimple(null), &quot;new NestingSimple(null)&quot;},\r\n        {new Recursive(null), &quot;new Recursive(null)&quot;},\r\n        {new Recursive(new Recursive(null)), &quot;new Recursive(new Recursive(null))&quot;},\r\n        {List.of(), &quot;List.of()&quot;},\r\n        {List.of(new Empty()), &quot;List.of(new Empty())&quot;},\r\n        {List.of(new Empty(), new Empty()), &quot;List.of(new Empty(), new Empty())&quot;},\r\n        {List.of(List.of(new Empty())), &quot;List.of(List.of(new Empty()))&quot;},\r\n        {new NestingListOfSimple(List.of(new Simple(&quot;bar&quot;))), &quot;new NestingListOfSimple(List.of(new Simple(\\&quot;bar\\&quot;)))&quot;},\r\n        {new TwoStrings(&quot;foo&quot;, &quot;bar&quot;), &quot;new TwoStrings(\\&quot;foo\\&quot;, \\&quot;bar\\&quot;)&quot;},\r\n        {new TwoStrings(&quot;foo, bar&quot;, &quot;bar&quot;), &quot;new TwoStrings(\\&quot;foo, bar\\&quot;, \\&quot;bar\\&quot;)&quot;},\r\n        {new TwoStrings(&quot;John&quot;, &quot;Smith&quot;), &quot;new TwoStrings(\\&quot;John\\&quot;, \\&quot;Smith\\&quot;)&quot;},\r\n        // &quot;WRONG&quot; results start here\r\n        // List.of() can&#39;t contain null values, but we don&#39;t check for that, so we tolerate it\r\n        {new ArrayList&lt;&gt;(Arrays.asList(null, new Empty())), &quot;List.of(null, new Empty())&quot;},\r\n        // Simple[foo=null] is ambiguous, we decided to interpret it as null and not the string value &quot;null&quot;\r\n        {new Simple(&quot;null&quot;), &quot;new Simple(null)&quot;},\r\n        // We don&#39;t check for insanity/generics breakage\r\n        {new NestingListOfSimple((List&lt;Simple&gt;) ((List&lt;?&gt;) List.of(new WithNumber(1)))),\r\n            &quot;new NestingListOfSimple(List.of(new WithNumber(1)))&quot;},\r\n        // Well, that&#39;s just ambiguous!\r\n        {new TwoStrings(&quot;foo, bar=&quot;, &quot;bar&quot;), &quot;new TwoStrings(\\&quot;foo\\&quot;, \\&quot;, bar=bar\\&quot;)&quot;},\r\n        // We don&#39;t verify simple types, so it&#39;ll blindly output nonsense\r\n        {&quot;WithNumber[foo=bar]&quot;, &quot;new WithNumber(bar)&quot;},\r\n    };\r\n  }\r\n\r\n  @ParameterizedTest\r\n  @MethodSource(&quot;realToStringSources&quot;)\r\n  void parseRealToString(Object record, String expectedOutput) {\r\n    String input = record.toString();\r\n    RecordToStringParser parser = new RecordToStringParser(BASE_RECORD_CLASSES);\r\n    String output = parser.convert(input);\r\n    assertEquals(expectedOutput, output);\r\n  }\r\n\r\n  public static String[] unparseableStrings() {\r\n    return new String[] {\r\n        &quot;&quot;,\r\n        &quot;]&quot;,\r\n        &quot;[&quot;,\r\n        &quot;Empty&quot;,\r\n        &quot;Empty[&quot;,\r\n        &quot;Simple[foo=&quot;,\r\n        &quot;NestingSimple[foo=10]&quot;,\r\n        &quot;UnknownClass[]&quot;,\r\n        // &quot;WithNumber[foo=bar]&quot;, // this isn&#39;t validated\r\n        &quot;[]]&quot;,\r\n        &quot;[bar]&quot;, // non-record values in lists are not supported\r\n        &quot;{}&quot;, // maps are not supported, but wouldn&#39;t be too hard\r\n        &quot;NestingRecord[r=Empty[]]&quot;, // this could easily be supported, but why?\r\n    };\r\n  }\r\n\r\n  @ParameterizedTest\r\n  @MethodSource(&quot;unparseableStrings&quot;)\r\n  void failToParse(String input) {\r\n    RecordToStringParser parser = new RecordToStringParser(BASE_RECORD_CLASSES);\r\n    assertThrows(IllegalArgumentException.class, () -&gt; parser.convert(input));\r\n  }\r\n\r\n  record lowerRecordName(String foo) {}\r\n\r\n  record NonAlphaNum_(String foo) {}\r\n\r\n  record Empty() {}\r\n\r\n  record Simple(String foo) {}\r\n\r\n  record NestingSimple(Simple foo) {}\r\n\r\n  record NestingListOfSimple(List&lt;Simple&gt; foo) {}\r\n\r\n  record Recursive(Recursive foo) {}\r\n\r\n  record WithNumber(int foo) {}\r\n\r\n  record TwoStrings(String foo, String bar) {}\r\n\r\n  record NestingRecord(Record r) {}\r\n\r\n  static class NS1 {\r\n    record Collision(String foo) {}\r\n  }\r\n\r\n  static class NS2 {\r\n    record Collision(String foo) {}\r\n  }\r\n}\r\n```","title":"Representing Java toString results as Java source code","body":"<p>Out of curiosity I took a stab at this and it turns out to be reasonably simple, if you can live with some restrictions. Some of those are fundamental, others just require a bit more code to work around</p>\n<ul>\n<li>this handles exactly only:\n<ul>\n<li>record classes</li>\n<li>lists of those record classes</li>\n<li>strings, primitives and their wrappers</li>\n</ul>\n</li>\n<li>it assumes the input is actually generated by the default <code>toString</code> and is not forgiving (extra/missing whitespace at the wrong place breaks it).</li>\n<li>the top-level class(es) that can occur have to be handed to the parser</li>\n<li>records are assumed to not override their <code>toString</code></li>\n<li>the canonical constructor of each record is used</li>\n<li>some inputs are simple ambiguous, they will be resolved to <em>something</em>, but there's no guarantee which interpretation</li>\n<li>there is limited error checking</li>\n<li>there is no validation for the primitive/wrapper types: non-sensical inputs will be quietly translated. Your compiler will tell you, 'though.</li>\n<li>I'm using the new switch features, but that's trivial to change, if needed</li>\n<li>I've not hand-written a parser in quite some while. Don't look at this for best practices.</li>\n<li>there are definitely bugs</li>\n</ul>\n<p>Adding support for <code>Map</code> would be fairly straightforward. And due to the nature of these parsers, modifying it to actually build the objects instead of the object construction code would be reasonably simple as well. Both of these are left as an exercise for the reader.</p>\n<p>The full tests are below, but as an example, here's how to use it:</p>\n<pre><code>import java.util.List;\n\npublic class Foo {\n  public static void main(String[] args) {\n    var parser = new RecordToStringParser(List.of(User.class, UserContainer.class));\n    System.out.println(parser.convert(&quot;User[firstName=John, lastName=Smith]&quot;));\n    System.out.println(parser.convert(&quot;User[firstName=John, Doe, lastName=Smith]&quot;));\n    System.out.println(parser.convert(&quot;UserContainer[user=User[firstName=John, lastName=Smith], flags=13]&quot;));\n    System.out.println(parser.convert(&quot;UserContainer[user=null, flags=42]&quot;));\n    System.out.println(parser.convert(&quot;[User[firstName=John, lastName=Smith], UserContainer[user=null, flags=1]]&quot;));\n    System.out.println(parser.convert(&quot;UserContainer[user=null, flags=what are you talking about]&quot;));\n  }\n}\n\nrecord User(String firstName, String lastName) {}\nrecord UserContainer(User user, int flags) {}\n</code></pre>\n<p>This prints</p>\n<pre class=\"lang-none prettyprint-override\"><code>new User(&quot;John&quot;, &quot;Smith&quot;)\nnew User(&quot;John, Doe&quot;, &quot;Smith&quot;)\nnew UserContainer(new User(&quot;John&quot;, &quot;Smith&quot;), 13)\nnew UserContainer(null, 42)\nList.of(new User(&quot;John&quot;, &quot;Smith&quot;), new UserContainer(null, 1))\nnew UserContainer(null, what are you talking about)\n</code></pre>\n<p>Note how the last one just blindly dumps the value without verifying the type? 🤷</p>\n<pre><code>import java.lang.reflect.RecordComponent;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.function.Function;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport java.util.stream.Collectors;\n\npublic class RecordToStringParser {\n\n  private static final Pattern RECORD_NAME = Pattern.compile(&quot;^[A-Z][A-Za-z0-9]+&quot;);\n  private static final Set&lt;Class&lt;?&gt;&gt; WRAPPER_CLASSES = Set.of(\n      Boolean.class, Byte.class, Character.class, Short.class, Integer.class, Long.class, Float.class, Double.class);\n\n  private final Map&lt;String, Class&lt;? extends Record&gt;&gt; classes;\n\n  public RecordToStringParser(Class&lt;? extends Record&gt; c1) {\n    this(List.of(c1));\n  }\n\n  public RecordToStringParser(List&lt;Class&lt;? extends Record&gt;&gt; inputClasses) {\n    if (inputClasses.isEmpty()) {\n      throw new IllegalArgumentException(&quot;No record classes specified!&quot;);\n    }\n    try {\n      classes = inputClasses.stream()\n          .collect(Collectors.toMap(Class::getSimpleName, Function.identity()));\n    } catch (IllegalStateException e) {\n      // this happens when simple names are not unique!\n      throw new IllegalArgumentException(&quot;Colliding class names detected!&quot;, e);\n    }\n    for (String name : classes.keySet()) {\n      if (!RECORD_NAME.matcher(name).matches()) {\n        throw new IllegalArgumentException(&quot;Nonconforming class name found: &quot; + name);\n      }\n    }\n  }\n\n  public String convert(String input) {\n    return new Parse(input).parse();\n  }\n\n  private class Parse {\n    String in;\n    int pos = 0;\n    StringBuilder out = new StringBuilder();\n\n    Parse(String input) {\n      this.in = input;\n    }\n\n    String parse() {\n      parseNext();\n      if (pos != in.length()) {\n        throw err(&quot;Unexpected content after successful parse&quot;);\n      }\n      return out.toString();\n    }\n\n    private void parseNext() {\n      if (isNext('[')) {\n        parseList();\n      } else {\n        parseRecord();\n      }\n    }\n\n\n    private void parseRecord() {\n      if (maybeConsume(&quot;null&quot;)) {\n        out.append(&quot;null&quot;);\n        return;\n      }\n      Matcher matcher = RECORD_NAME.matcher(in);\n      matcher.region(pos, in.length());\n      if (!matcher.find()) {\n        throw err(&quot;Record expected.&quot;);\n      }\n      pos = matcher.end();\n      consume('[');\n      String className = matcher.group();\n      out.append(&quot;new &quot;).append(className).append(&quot;(&quot;);\n      Class&lt;? extends Record&gt; recordClass = classes.get(className);\n      if (recordClass == null) {\n        throw err(&quot;Unknown record class &quot; + className);\n      }\n      parseMembers(recordClass);\n      out.append(&quot;)&quot;);\n      consume(']');\n    }\n\n    private void parseRecord(Class&lt;? extends Record&gt; type) {\n      if (maybeConsume(&quot;null&quot;)) {\n        out.append(&quot;null&quot;);\n        return;\n      }\n      consume(type.getSimpleName());\n      consume('[');\n      out.append(&quot;new &quot;).append(type.getSimpleName()).append(&quot;(&quot;);\n      parseMembers(type);\n      out.append(&quot;)&quot;);\n      consume(']');\n    }\n\n    private void parseMembers(Class&lt;? extends Record&gt; recordClass) {\n      RecordComponent[] components = recordClass.getRecordComponents();\n      for (int i = 0; i &lt; components.length; i++) {\n        RecordComponent component = components[i];\n        boolean isLastComponent = i == components.length - 1;\n        consume(component.getName());\n        consume('=');\n        Class&lt;?&gt; type = component.getType();\n        if (type.isRecord()) {\n          parseRecord(type.asSubclass(Record.class));\n        } else if (List.class == type) {\n          parseList();\n        } else if (type == String.class || type.isPrimitive() || WRAPPER_CLASSES.contains(type)) {\n          parseSimpleValues(components, i, isLastComponent, type);\n        } else {\n          throw err(&quot;Unsupported component type &quot; + type);\n        }\n        if (!isLastComponent) {\n          consume(&quot;, &quot;);\n          out.append(&quot;, &quot;);\n        }\n      }\n\n    }\n\n    private void parseSimpleValues(RecordComponent[] components, int i, boolean isLastComponent, Class&lt;?&gt; type) {\n      String expectedSuffix = isLastComponent ? &quot;]&quot; : &quot;, &quot; + components[i + 1].getName() + &quot;=&quot;;\n      isNext('\\0'); // ensure we throw the right exception when we're at the end.\n      int valueEnd = in.indexOf(expectedSuffix, pos);\n      if (valueEnd == -1) {\n        throw err(&quot;Failed to find end of value!&quot;);\n      }\n      String value = in.substring(pos, valueEnd);\n      if (type == String.class &amp;&amp; !value.equals(&quot;null&quot;)) {\n        // interpret string values null as the value null and not the string &quot;null&quot;\n        out.append('&quot;');\n        for (char c : value.toCharArray()) {\n          switch (c) {\n            case '&quot;', '\\\\' -&gt; out.append('\\\\').append(c);\n            case '\\n' -&gt; out.append(&quot;\\\\n&quot;);\n            case '\\t' -&gt; out.append(&quot;\\\\t&quot;);\n            // maybe add some more?\n            default -&gt; out.append(c);\n          }\n        }\n        out.append('&quot;');\n      } else {\n        // maybe add verification?\n        out.append(value);\n      }\n      pos = valueEnd;\n    }\n\n    private void parseList() {\n      if (maybeConsume(&quot;null&quot;)) {\n        out.append(&quot;null&quot;);\n        return;\n      }\n      consume('[');\n      out.append(&quot;List.of(&quot;);\n      if (!isNext(']')) {\n        parseNext();\n        while (maybeConsume(&quot;, &quot;)) {\n          out.append(&quot;, &quot;);\n          parseRecord();\n        }\n      }\n      consume(']');\n      out.append(&quot;)&quot;);\n    }\n\n    private boolean isNext(char expected) {\n      if (pos &gt;= in.length()) {\n        throw err(&quot;Unexpected end of string.&quot;);\n      }\n      return in.charAt(pos) == expected;\n    }\n\n    private boolean maybeConsume(String expected) {\n      boolean matches = in.regionMatches(pos, expected, 0, expected.length());\n      if (matches) {\n        pos += expected.length();\n      }\n      return matches;\n    }\n\n    private void consume(char expected) {\n      if (pos &gt;= in.length()) {\n        throw err(&quot;Unexpected end of string, expected &quot; + expected);\n      }\n      if (in.charAt(pos) != expected) {\n        throw err(&quot;Expected &quot; + expected);\n      }\n      pos++;\n    }\n\n    private void consume(String expected) {\n      if (!in.regionMatches(pos, expected, 0, expected.length())) {\n        throw err(&quot;Expected &quot; + expected);\n      }\n      pos += expected.length();\n    }\n\n    private IllegalArgumentException err(String msg) {\n      return new IllegalArgumentException(String.format(&quot;Unexpected input at pos %d (%s): %s&quot;, pos, this, msg));\n    }\n\n    @Override\n    public String toString() {\n      // simple way to see parser state in the debugger ;-)\n      return in.substring(0, pos) + &quot;&lt;|&gt;&quot; + in.substring(pos);\n    }\n  }\n}\n</code></pre>\n<p>Test class:</p>\n<pre><code>import static org.junit.jupiter.api.Assertions.*;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.params.ParameterizedTest;\nimport org.junit.jupiter.params.provider.MethodSource;\n\npublic class RecordToStringParserTest {\n  private List&lt;Class&lt;? extends Record&gt;&gt; BASE_RECORD_CLASSES = List.of(\n      Empty.class, Simple.class, WithNumber.class, NestingSimple.class, NestingListOfSimple.class, Recursive.class,\n      TwoStrings.class, NestingRecord.class);\n\n  @Test\n  void mustProvideClasses() {\n    final List&lt;Class&lt;? extends Record&gt;&gt; noClasses = List.of();\n    assertThrows(IllegalArgumentException.class, () -&gt; new RecordToStringParser(noClasses));\n  }\n\n  @Test\n  void classNamesMustStartWithUpperCase() {\n    assertThrows(IllegalArgumentException.class, () -&gt; new RecordToStringParser(lowerRecordName.class));\n  }\n\n  @Test\n  void classNamesMustBeAlphaNumeric() {\n    assertThrows(IllegalArgumentException.class, () -&gt; new RecordToStringParser(NonAlphaNum_.class));\n  }\n\n  @Test\n  void simpleClassNamesMustBeUnique() {\n    List&lt;Class&lt;? extends Record&gt;&gt; collidingClasses = List.of(NS1.Collision.class, NS2.Collision.class);\n    assertThrows(IllegalArgumentException.class,\n        () -&gt; new RecordToStringParser(collidingClasses));\n  }\n\n  @SuppressWarnings(&quot;unchecked&quot;)\n  public static Object[][] realToStringSources() {\n    return new Object[][] {\n        {new Empty(), &quot;new Empty()&quot;},\n        {new Simple(&quot;bar&quot;), &quot;new Simple(\\&quot;bar\\&quot;)&quot;},\n        {new Simple(&quot;&quot;), &quot;new Simple(\\&quot;\\&quot;)&quot;},\n        {new Simple(null), &quot;new Simple(null)&quot;},\n        {new Simple(&quot;\\n&quot;), &quot;new Simple(\\&quot;\\\\n\\&quot;)&quot;},\n        {new Simple(&quot;\\\\&quot;), &quot;new Simple(\\&quot;\\\\\\\\\\&quot;)&quot;},\n        {new Simple(&quot;\\&quot;\\\\\\&quot;&quot;), &quot;new Simple(\\&quot;\\\\\\&quot;\\\\\\\\\\\\\\&quot;\\&quot;)&quot;}, // thanks, I hate it\n        {new WithNumber(1), &quot;new WithNumber(1)&quot;},\n        {new NestingSimple(new Simple(&quot;bar&quot;)), &quot;new NestingSimple(new Simple(\\&quot;bar\\&quot;))&quot;},\n        {new NestingSimple(null), &quot;new NestingSimple(null)&quot;},\n        {new Recursive(null), &quot;new Recursive(null)&quot;},\n        {new Recursive(new Recursive(null)), &quot;new Recursive(new Recursive(null))&quot;},\n        {List.of(), &quot;List.of()&quot;},\n        {List.of(new Empty()), &quot;List.of(new Empty())&quot;},\n        {List.of(new Empty(), new Empty()), &quot;List.of(new Empty(), new Empty())&quot;},\n        {List.of(List.of(new Empty())), &quot;List.of(List.of(new Empty()))&quot;},\n        {new NestingListOfSimple(List.of(new Simple(&quot;bar&quot;))), &quot;new NestingListOfSimple(List.of(new Simple(\\&quot;bar\\&quot;)))&quot;},\n        {new TwoStrings(&quot;foo&quot;, &quot;bar&quot;), &quot;new TwoStrings(\\&quot;foo\\&quot;, \\&quot;bar\\&quot;)&quot;},\n        {new TwoStrings(&quot;foo, bar&quot;, &quot;bar&quot;), &quot;new TwoStrings(\\&quot;foo, bar\\&quot;, \\&quot;bar\\&quot;)&quot;},\n        {new TwoStrings(&quot;John&quot;, &quot;Smith&quot;), &quot;new TwoStrings(\\&quot;John\\&quot;, \\&quot;Smith\\&quot;)&quot;},\n        // &quot;WRONG&quot; results start here\n        // List.of() can't contain null values, but we don't check for that, so we tolerate it\n        {new ArrayList&lt;&gt;(Arrays.asList(null, new Empty())), &quot;List.of(null, new Empty())&quot;},\n        // Simple[foo=null] is ambiguous, we decided to interpret it as null and not the string value &quot;null&quot;\n        {new Simple(&quot;null&quot;), &quot;new Simple(null)&quot;},\n        // We don't check for insanity/generics breakage\n        {new NestingListOfSimple((List&lt;Simple&gt;) ((List&lt;?&gt;) List.of(new WithNumber(1)))),\n            &quot;new NestingListOfSimple(List.of(new WithNumber(1)))&quot;},\n        // Well, that's just ambiguous!\n        {new TwoStrings(&quot;foo, bar=&quot;, &quot;bar&quot;), &quot;new TwoStrings(\\&quot;foo\\&quot;, \\&quot;, bar=bar\\&quot;)&quot;},\n        // We don't verify simple types, so it'll blindly output nonsense\n        {&quot;WithNumber[foo=bar]&quot;, &quot;new WithNumber(bar)&quot;},\n    };\n  }\n\n  @ParameterizedTest\n  @MethodSource(&quot;realToStringSources&quot;)\n  void parseRealToString(Object record, String expectedOutput) {\n    String input = record.toString();\n    RecordToStringParser parser = new RecordToStringParser(BASE_RECORD_CLASSES);\n    String output = parser.convert(input);\n    assertEquals(expectedOutput, output);\n  }\n\n  public static String[] unparseableStrings() {\n    return new String[] {\n        &quot;&quot;,\n        &quot;]&quot;,\n        &quot;[&quot;,\n        &quot;Empty&quot;,\n        &quot;Empty[&quot;,\n        &quot;Simple[foo=&quot;,\n        &quot;NestingSimple[foo=10]&quot;,\n        &quot;UnknownClass[]&quot;,\n        // &quot;WithNumber[foo=bar]&quot;, // this isn't validated\n        &quot;[]]&quot;,\n        &quot;[bar]&quot;, // non-record values in lists are not supported\n        &quot;{}&quot;, // maps are not supported, but wouldn't be too hard\n        &quot;NestingRecord[r=Empty[]]&quot;, // this could easily be supported, but why?\n    };\n  }\n\n  @ParameterizedTest\n  @MethodSource(&quot;unparseableStrings&quot;)\n  void failToParse(String input) {\n    RecordToStringParser parser = new RecordToStringParser(BASE_RECORD_CLASSES);\n    assertThrows(IllegalArgumentException.class, () -&gt; parser.convert(input));\n  }\n\n  record lowerRecordName(String foo) {}\n\n  record NonAlphaNum_(String foo) {}\n\n  record Empty() {}\n\n  record Simple(String foo) {}\n\n  record NestingSimple(Simple foo) {}\n\n  record NestingListOfSimple(List&lt;Simple&gt; foo) {}\n\n  record Recursive(Recursive foo) {}\n\n  record WithNumber(int foo) {}\n\n  record TwoStrings(String foo, String bar) {}\n\n  record NestingRecord(Record r) {}\n\n  static class NS1 {\n    record Collision(String foo) {}\n  }\n\n  static class NS2 {\n    record Collision(String foo) {}\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":25197299,"reputation":251,"user_id":20371237,"display_name":"R A"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75583966,"answer_count":1,"score":1,"last_activity_date":1677520972,"creation_date":1677504302,"question_id":75581067,"body_markdown":"I have a `String` value of a `User` list object generated at runtime using `toString` method:\r\n```\r\n[User[firstName=John, lastName=Smith]]\r\n```\r\nIs there a fast way to generate Java source code that would create such an object? Ideally it would generate the following source code:\r\n```java\r\nArrays.asList(new User(&quot;John&quot;, &quot;Smith&quot;)); // might also use getters-setters\r\n```\r\nThis will make writing of test code assertions faster for me.\r\n\r\nMy object is defined as follows:\r\n```java\r\npublic record User (String firstName, String lastName) {}\r\n```","title":"Representing Java toString results as Java source code","body":"<p>I have a <code>String</code> value of a <code>User</code> list object generated at runtime using <code>toString</code> method:</p>\n<pre><code>[User[firstName=John, lastName=Smith]]\n</code></pre>\n<p>Is there a fast way to generate Java source code that would create such an object? Ideally it would generate the following source code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Arrays.asList(new User(&quot;John&quot;, &quot;Smith&quot;)); // might also use getters-setters\n</code></pre>\n<p>This will make writing of test code assertions faster for me.</p>\n<p>My object is defined as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record User (String firstName, String lastName) {}\n</code></pre>\n"},{"tags":["java","android","parsing","web-scraping","jsoup"],"answers":[{"comments":[{"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"score":0,"creation_date":1675444700,"post_id":75336643,"comment_id":132937562,"body_markdown":"There is no need for Jsoup if you are using HtmlUnit - see e.g. https://stackoverflow.com/questions/75252331/page-content-couldnt-be-seen-by-jsoup-and-httpclient/75255515#75255515","body":"There is no need for Jsoup if you are using HtmlUnit - see e.g. <a href=\"https://stackoverflow.com/questions/75252331/page-content-couldnt-be-seen-by-jsoup-and-httpclient/75255515#75255515\" title=\"page content couldnt be seen by jsoup and httpclient\">stackoverflow.com/questions/75252331/&hellip;</a>"},{"owner":{"account_id":4526516,"reputation":208,"user_id":4013399,"accept_rate":39,"display_name":"Zac1"},"score":0,"creation_date":1675726848,"post_id":75336643,"comment_id":132987501,"body_markdown":"@Sakuragi Do you have an example of how to use HtmlUnit to extract the expandable row&#39;s values?","body":"@Sakuragi Do you have an example of how to use HtmlUnit to extract the expandable row&#39;s values?"},{"owner":{"account_id":4292723,"reputation":16,"user_id":3508630,"display_name":"Sakuragi"},"score":0,"creation_date":1677520227,"post_id":75336643,"comment_id":133350094,"body_markdown":"@Zac1 I&#39;ve tried to extract the row values with HtmlUnit but cannot get them. Seems HtmlUnit cannot retrieve the new div content even by triggering the click event on the arrow &quot;button&quot; at &quot;Total Liabilities Net Minority Interest&quot;. I don&#39;t know why.","body":"@Zac1 I&#39;ve tried to extract the row values with HtmlUnit but cannot get them. Seems HtmlUnit cannot retrieve the new div content even by triggering the click event on the arrow &quot;button&quot; at &quot;Total Liabilities Net Minority Interest&quot;. I don&#39;t know why."},{"owner":{"account_id":4292723,"reputation":16,"user_id":3508630,"display_name":"Sakuragi"},"score":0,"creation_date":1677520851,"post_id":75336643,"comment_id":133350250,"body_markdown":"I&#39;ve added the HtmlUnit code example in my answer, in case it can help","body":"I&#39;ve added the HtmlUnit code example in my answer, in case it can help"}],"tags":[],"owner":{"account_id":4292723,"reputation":16,"user_id":3508630,"display_name":"Sakuragi"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677520829,"creation_date":1675432272,"answer_id":75336643,"question_id":75270691,"body_markdown":"- For the &quot;Current Liabilities&quot; extraction, the issue is that the data is available in the web page only after clicking on the arrow next to the &quot;**Total Liabilities Net Minority Interest**&quot; text (an empty div element is then populated with all data). Which means you cannot get data simply with jsoup. It seems it&#39;s possible to activate the button click with **HtmlUnit** (https://htmlunit.sourceforge.io/), then you get a string with the generated html containing the Current Liabilities, that you can parse with jsoup using the parse() method. Source of the info on stackoverflow: https://stackoverflow.com/questions/7508813/can-jsoup-simulate-a-button-press\r\n\r\n- Here is the code to access and display the Dates:\r\n\r\n        List&lt;String&gt; dateValues = new ArrayList&lt;&gt;();\r\n        Element breakdown = doc.select(&quot;span:contains(Breakdown)&quot;).first();\r\n        Elements datesData = breakdown.parent().siblingElements();\r\n        for (Element e : datesData) {\r\n          System.out.println(&quot;date- &quot;+ e.text()); // for test purpose\r\n          dateValues.add(e.text());\r\n        }\r\n        System.out.println(&quot;dates = &quot;+dateValues);\r\n\r\nResult in the console: **dates = [9/30/2022, 9/30/2021, 9/30/2020, 9/30/2019]**\r\n\r\nHope this helps.\r\n\r\n\r\nEDIT : here is a code example of HtmlUnit, though it doesn&#39;t manage to retrieve the Current Liabilities data:\r\n\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t    String url = &quot;https://finance.yahoo.com/quote/AAPL/balance-sheet?p=AAPL&amp;guccounter=2&quot;;\r\n\r\n\t    try (final WebClient webClient = new WebClient(BrowserVersion.CHROME)) {\r\n\t        webClient.waitForBackgroundJavaScript(5000*2);\r\n\t        HtmlPage page = webClient.getPage(url); // load the page\r\n\t        List&lt;DomElement&gt; totalLiabilityButton = page.getByXPath(&quot;//button[@aria-label=&#39;Total Liabilities Net Minority Interest&#39;]&quot;); // Get the arrow button to expand the liabilities\r\n\t        HtmlPage page2 = totalLiabilityButton.get(0).click(); // click on the arrow button, to trigger the Javascript click event and populate the div element with the current liabilities data. Normally it should load the new page content into &#39;page&#39; variable, but it doesn&#39;t work, I don&#39;t understand why.\r\n\t        totalLiabilityButton = page2.getByXPath(&quot;//button[@aria-label=&#39;Total Liabilities Net Minority Interest&#39;]&quot;); // reload the button\r\n\t\t\tDomNodeList&lt;DomNode&gt; children = totalLiabilityButton.get(0).getParentNode().getParentNode().getParentNode().getParentNode().getNextSibling().getChildNodes(); // Here you should have all 3 Current Liabilities data\r\n\t    }\r\n\t}","title":"On Android Java, how to extract data from an expandable row in a website table&#39;s page source?","body":"<ul>\n<li><p>For the &quot;Current Liabilities&quot; extraction, the issue is that the data is available in the web page only after clicking on the arrow next to the &quot;<strong>Total Liabilities Net Minority Interest</strong>&quot; text (an empty div element is then populated with all data). Which means you cannot get data simply with jsoup. It seems it's possible to activate the button click with <strong>HtmlUnit</strong> (<a href=\"https://htmlunit.sourceforge.io/\" rel=\"nofollow noreferrer\">https://htmlunit.sourceforge.io/</a>), then you get a string with the generated html containing the Current Liabilities, that you can parse with jsoup using the parse() method. Source of the info on stackoverflow: <a href=\"https://stackoverflow.com/questions/7508813/can-jsoup-simulate-a-button-press\">Can Jsoup simulate a button press?</a></p>\n</li>\n<li><p>Here is the code to access and display the Dates:</p>\n<pre><code>  List&lt;String&gt; dateValues = new ArrayList&lt;&gt;();\n  Element breakdown = doc.select(&quot;span:contains(Breakdown)&quot;).first();\n  Elements datesData = breakdown.parent().siblingElements();\n  for (Element e : datesData) {\n    System.out.println(&quot;date- &quot;+ e.text()); // for test purpose\n    dateValues.add(e.text());\n  }\n  System.out.println(&quot;dates = &quot;+dateValues);\n</code></pre>\n</li>\n</ul>\n<p>Result in the console: <strong>dates = [9/30/2022, 9/30/2021, 9/30/2020, 9/30/2019]</strong></p>\n<p>Hope this helps.</p>\n<p>EDIT : here is a code example of HtmlUnit, though it doesn't manage to retrieve the Current Liabilities data:</p>\n<pre><code>public static void main(String[] args) throws IOException {\n    String url = &quot;https://finance.yahoo.com/quote/AAPL/balance-sheet?p=AAPL&amp;guccounter=2&quot;;\n\n    try (final WebClient webClient = new WebClient(BrowserVersion.CHROME)) {\n        webClient.waitForBackgroundJavaScript(5000*2);\n        HtmlPage page = webClient.getPage(url); // load the page\n        List&lt;DomElement&gt; totalLiabilityButton = page.getByXPath(&quot;//button[@aria-label='Total Liabilities Net Minority Interest']&quot;); // Get the arrow button to expand the liabilities\n        HtmlPage page2 = totalLiabilityButton.get(0).click(); // click on the arrow button, to trigger the Javascript click event and populate the div element with the current liabilities data. Normally it should load the new page content into 'page' variable, but it doesn't work, I don't understand why.\n        totalLiabilityButton = page2.getByXPath(&quot;//button[@aria-label='Total Liabilities Net Minority Interest']&quot;); // reload the button\n        DomNodeList&lt;DomNode&gt; children = totalLiabilityButton.get(0).getParentNode().getParentNode().getParentNode().getParentNode().getNextSibling().getChildNodes(); // Here you should have all 3 Current Liabilities data\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4526516,"reputation":208,"user_id":4013399,"accept_rate":39,"display_name":"Zac1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1677520829,"creation_date":1674938008,"question_id":75270691,"body_markdown":"I want to write a function that takes a URL as input, in our case: https://finance.yahoo.com/quote/AAPL/balance-sheet?p=AAPL&amp;guccounter=2 and extracts a number within a Div and a Span tag using JSOUP, using pattern matching.\r\n\r\nInput: Looking to get values 153,982,000, 125,481,000, 105,392,000, 105,718,000 on the Current Liabilities row for columns 9/30/2022, 9/30/2021, 9/30/2020, 9/30/2019.\r\n\r\nOn Inspect, these values are under the following &lt;div&gt; tags.\r\n\r\n`Current Liabilities 1: &lt;div class=&quot;Ta(c) Py(6px) Bxz(bb) BdB Bdc($seperatorColor) Miw(120px) Miw(100px)--pnclg D(tbc)&quot; data-test=&quot;fin-col&quot;&gt;&lt;span&gt;153,982,000&lt;/span&gt;&lt;/div&gt;`\r\n\r\n`Current Liabilities 2: &lt;div class=&quot;Ta(c) Py(6px) Bxz(bb) BdB Bdc($seperatorColor) Miw(120px) Miw(100px)--pnclg Bgc($lv1BgColor) fi-row:h_Bgc($hoverBgColor) D(tbc)&quot; data-test=&quot;fin-col&quot;&gt;&lt;span&gt;125,481,000&lt;/span&gt;&lt;/div&gt;`\r\n\r\n`Current Liabilities 3: &lt;div class=&quot;Ta(c) Py(6px) Bxz(bb) BdB Bdc($seperatorColor) Miw(120px) Miw(100px)--pnclg D(tbc)&quot; data-test=&quot;fin-col&quot;&gt;&lt;span&gt;105,392,000&lt;/span&gt;&lt;/div&gt;`\r\n\r\n`Current Liabilities 4: &lt;div class=&quot;Ta(c) Py(6px) Bxz(bb) BdB Bdc($seperatorColor) Miw(120px) Miw(100px)--pnclg Bgc($lv1BgColor) fi-row:h_Bgc($hoverBgColor) D(tbc)&quot; data-test=&quot;fin-col&quot;&gt;&lt;span&gt;105,718,000&lt;/span&gt;&lt;/div&gt;`\r\n\r\nPlease fix my current code shown below, but also extract the row and column data instead of a string list:\r\n\r\n    private static List&lt;String&gt; balancefetch(String url) throws IOException {\r\n        String userAgent1 = &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36 OPR/56.0.3051.43&quot;;\r\n        Document doc = Jsoup.connect(url).userAgent(userAgent1).get();\r\n        List&lt;String&gt; balanceValues = new ArrayList&lt;&gt;();\r\n\r\n        Element totalAssets = doc.select(&quot;[title=Total Assets]&quot;).first();\r\n        Elements totalAssetsData = totalAssets.parent().siblingElements();\r\n        for (Element e : totalAssetsData) {\r\n            Log.d(&quot;totalAssetsData&quot;, e.text());\r\n            balanceValues.add(e.text());\r\n        } //It works so far.\r\n\r\nThe lines below don&#39;t work because there isn&#39;t a `title=Current Liabilities`, on the website.\r\n    \r\n    Element currentLiabilities = doc.select(&quot;[title=Current Liabilities]&quot;).first();\r\n            Elements currentLiabilitiesData = totalLiabilities.parent().siblingElements();\r\n            for (Element e : currentLiabilitiesData) {\r\n                Log.d(&quot;currentLiabilitiesData&quot;, e.text());\r\n                balanceValues.add(e.text());\r\n            }\r\n            return balanceValues;\r\n        }\r\n\r\nPleas help me get the output in the following format: \r\n\r\n - dates = {9/30/2022, 9/30/2021, 9/30/2020, 9/30/2019}\r\n\r\n - CurrentLiabilities = {153,982,000, 125,481,000, 105,392,000, 105,718,000 }\r\n\r\n\r\n\r\nEDIT:\r\n\r\nThe `Date` values are under;\r\n\r\nPlease fix my code to extract the date values which are under: \r\n\r\nDate1: `&lt;div class=&quot;Ta(c) Py(6px) Bxz(bb) BdB Bdc($seperatorColor) Miw(120px) Miw(100px)--pnclg D(ib) Fw(b)&quot;&gt;&lt;span&gt;9/30/2022&lt;/span&gt;&lt;/div&gt;`\r\n\r\nDate2: `&lt;div class=&quot;Ta(c) Py(6px) Bxz(bb) BdB Bdc($seperatorColor) Miw(120px) Miw(100px)--pnclg D(ib) Fw(b) Bgc($lv1BgColor)&quot;&gt;&lt;span&gt;9/30/2021&lt;/span&gt;&lt;/div&gt;`\r\n\r\nDate3: `&lt;div class=&quot;Ta(c) Py(6px) Bxz(bb) BdB Bdc($seperatorColor) Miw(120px) Miw(100px)--pnclg D(ib) Fw(b)&quot;&gt;&lt;span&gt;9/30/2020&lt;/span&gt;&lt;/div&gt;`\r\n\r\nDate4: `&lt;div class=&quot;Ta(c) Py(6px) Bxz(bb) BdB Bdc($seperatorColor) Miw(120px) Miw(100px)--pnclg D(ib) Fw(b) Bgc($lv1BgColor)&quot;&gt;&lt;span&gt;9/30/2019&lt;/span&gt;&lt;/div&gt;` ","title":"On Android Java, how to extract data from an expandable row in a website table&#39;s page source?","body":"<p>I want to write a function that takes a URL as input, in our case: <a href=\"https://finance.yahoo.com/quote/AAPL/balance-sheet?p=AAPL&amp;guccounter=2\" rel=\"nofollow noreferrer\">https://finance.yahoo.com/quote/AAPL/balance-sheet?p=AAPL&amp;guccounter=2</a> and extracts a number within a Div and a Span tag using JSOUP, using pattern matching.</p>\n<p>Input: Looking to get values 153,982,000, 125,481,000, 105,392,000, 105,718,000 on the Current Liabilities row for columns 9/30/2022, 9/30/2021, 9/30/2020, 9/30/2019.</p>\n<p>On Inspect, these values are under the following  tags.</p>\n<p><code>Current Liabilities 1: &lt;div class=&quot;Ta(c) Py(6px) Bxz(bb) BdB Bdc($seperatorColor) Miw(120px) Miw(100px)--pnclg D(tbc)&quot; data-test=&quot;fin-col&quot;&gt;&lt;span&gt;153,982,000&lt;/span&gt;&lt;/div&gt;</code></p>\n<p><code>Current Liabilities 2: &lt;div class=&quot;Ta(c) Py(6px) Bxz(bb) BdB Bdc($seperatorColor) Miw(120px) Miw(100px)--pnclg Bgc($lv1BgColor) fi-row:h_Bgc($hoverBgColor) D(tbc)&quot; data-test=&quot;fin-col&quot;&gt;&lt;span&gt;125,481,000&lt;/span&gt;&lt;/div&gt;</code></p>\n<p><code>Current Liabilities 3: &lt;div class=&quot;Ta(c) Py(6px) Bxz(bb) BdB Bdc($seperatorColor) Miw(120px) Miw(100px)--pnclg D(tbc)&quot; data-test=&quot;fin-col&quot;&gt;&lt;span&gt;105,392,000&lt;/span&gt;&lt;/div&gt;</code></p>\n<p><code>Current Liabilities 4: &lt;div class=&quot;Ta(c) Py(6px) Bxz(bb) BdB Bdc($seperatorColor) Miw(120px) Miw(100px)--pnclg Bgc($lv1BgColor) fi-row:h_Bgc($hoverBgColor) D(tbc)&quot; data-test=&quot;fin-col&quot;&gt;&lt;span&gt;105,718,000&lt;/span&gt;&lt;/div&gt;</code></p>\n<p>Please fix my current code shown below, but also extract the row and column data instead of a string list:</p>\n<pre><code>private static List&lt;String&gt; balancefetch(String url) throws IOException {\n    String userAgent1 = &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36 OPR/56.0.3051.43&quot;;\n    Document doc = Jsoup.connect(url).userAgent(userAgent1).get();\n    List&lt;String&gt; balanceValues = new ArrayList&lt;&gt;();\n\n    Element totalAssets = doc.select(&quot;[title=Total Assets]&quot;).first();\n    Elements totalAssetsData = totalAssets.parent().siblingElements();\n    for (Element e : totalAssetsData) {\n        Log.d(&quot;totalAssetsData&quot;, e.text());\n        balanceValues.add(e.text());\n    } //It works so far.\n</code></pre>\n<p>The lines below don't work because there isn't a <code>title=Current Liabilities</code>, on the website.</p>\n<pre><code>Element currentLiabilities = doc.select(&quot;[title=Current Liabilities]&quot;).first();\n        Elements currentLiabilitiesData = totalLiabilities.parent().siblingElements();\n        for (Element e : currentLiabilitiesData) {\n            Log.d(&quot;currentLiabilitiesData&quot;, e.text());\n            balanceValues.add(e.text());\n        }\n        return balanceValues;\n    }\n</code></pre>\n<p>Pleas help me get the output in the following format:</p>\n<ul>\n<li><p>dates = {9/30/2022, 9/30/2021, 9/30/2020, 9/30/2019}</p>\n</li>\n<li><p>CurrentLiabilities = {153,982,000, 125,481,000, 105,392,000, 105,718,000 }</p>\n</li>\n</ul>\n<p>EDIT:</p>\n<p>The <code>Date</code> values are under;</p>\n<p>Please fix my code to extract the date values which are under:</p>\n<p>Date1: <code>&lt;div class=&quot;Ta(c) Py(6px) Bxz(bb) BdB Bdc($seperatorColor) Miw(120px) Miw(100px)--pnclg D(ib) Fw(b)&quot;&gt;&lt;span&gt;9/30/2022&lt;/span&gt;&lt;/div&gt;</code></p>\n<p>Date2: <code>&lt;div class=&quot;Ta(c) Py(6px) Bxz(bb) BdB Bdc($seperatorColor) Miw(120px) Miw(100px)--pnclg D(ib) Fw(b) Bgc($lv1BgColor)&quot;&gt;&lt;span&gt;9/30/2021&lt;/span&gt;&lt;/div&gt;</code></p>\n<p>Date3: <code>&lt;div class=&quot;Ta(c) Py(6px) Bxz(bb) BdB Bdc($seperatorColor) Miw(120px) Miw(100px)--pnclg D(ib) Fw(b)&quot;&gt;&lt;span&gt;9/30/2020&lt;/span&gt;&lt;/div&gt;</code></p>\n<p>Date4: <code>&lt;div class=&quot;Ta(c) Py(6px) Bxz(bb) BdB Bdc($seperatorColor) Miw(120px) Miw(100px)--pnclg D(ib) Fw(b) Bgc($lv1BgColor)&quot;&gt;&lt;span&gt;9/30/2019&lt;/span&gt;&lt;/div&gt;</code></p>\n"},{"tags":["java","spring","spring-boot","validation","spring-mvc"],"comments":[{"owner":{"display_name":"user21263160"},"score":0,"creation_date":1677516597,"post_id":75581486,"comment_id":133348983,"body_markdown":"Does anybody else have ever used messages.properties ? Or get field name while validation?","body":"Does anybody else have ever used messages.properties ? Or get field name while validation?"}],"answers":[{"comments":[{"owner":{"display_name":"user21263160"},"score":0,"creation_date":1677525472,"post_id":75583933,"comment_id":133351444,"body_markdown":"Thanks a lot. Actually I avoided to create a custom validator just for this purpose. And as far as I see, it seems impossible with the current annotations e.g. `@NotBlank`, right?","body":"Thanks a lot. Actually I avoided to create a custom validator just for this purpose. And as far as I see, it seems impossible with the current annotations e.g. <code>@NotBlank</code>, right?"},{"owner":{"account_id":18202963,"reputation":41,"user_id":13246790,"display_name":"Paul_K"},"score":0,"creation_date":1677573569,"post_id":75583933,"comment_id":133359762,"body_markdown":"@devx\nFound this https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-message-interpolation\n\n4 paragraph. You can use Expression Language in message parameter to customize it. \nE.g. `@Size(max = 10, message = &quot;{comment.size.message}&quot;)` and place in ValidationMessages.properties file something like this: `comment.size.message=The license plate &#39;${validatedValue}&#39; must be between {min} and {max} characters long`","body":"@devx Found this <a href=\"https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-message-interpolation\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/stable/validator/reference/en-US/&hellip;</a>  4 paragraph. You can use Expression Language in message parameter to customize it.  E.g. <code>@Size(max = 10, message = &quot;{comment.size.message}&quot;)</code> and place in ValidationMessages.properties file something like this: <code>comment.size.message=The license plate &#39;${validatedValue}&#39; must be between {min} and {max} characters long</code>"},{"owner":{"display_name":"user21263160"},"score":0,"creation_date":1677573794,"post_id":75583933,"comment_id":133359832,"body_markdown":"But it does not give the field name, instead gives field value. Right?","body":"But it does not give the field name, instead gives field value. Right?"},{"owner":{"account_id":18202963,"reputation":41,"user_id":13246790,"display_name":"Paul_K"},"score":0,"creation_date":1677575179,"post_id":75583933,"comment_id":133360259,"body_markdown":"9.2.1 it looks like u can implement MessageInterpolator. Or extend hibernate Interpolator  implementation where u can retrieve filed name from context and format your message","body":"9.2.1 it looks like u can implement MessageInterpolator. Or extend hibernate Interpolator  implementation where u can retrieve filed name from context and format your message"},{"owner":{"display_name":"user21263160"},"score":0,"creation_date":1677575922,"post_id":75583933,"comment_id":133360474,"body_markdown":"Could you please post an example for that implementation? You can modify my implementation if it is possible?","body":"Could you please post an example for that implementation? You can modify my implementation if it is possible?"}],"tags":[],"owner":{"account_id":18202963,"reputation":41,"user_id":13246790,"display_name":"Paul_K"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677520361,"creation_date":1677520361,"answer_id":75583933,"question_id":75581486,"body_markdown":"You can implement custom validator class for your behaviour. \r\ne.g.\r\n\r\nField annotation\r\n```\r\n@Target({ FIELD })\r\n@Retention(RUNTIME)\r\n@Constraint(validatedBy = StringSizeValidator.class)\r\n@Documented\r\npublic @interface SizeValid {\r\n\r\n    long min() default 0;\r\n\r\n    long max() default Long.MAX_VALUE;\r\n\r\n    String fieldName() default &quot;&quot;;\r\n\r\n    String message() default &quot;&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n\r\n}\r\n```\r\n\r\n\r\nValidator\r\n```\r\n\r\npublic class StringSizeValidator implements ConstraintValidator&lt;SizeValid, String&gt; {\r\n\r\n    private static final String DEFAULT_MESSAGE = &quot;Size of field %s should be between %s and %s&quot;;\r\n\r\n    @Autowired\r\n    private ConfigurableListableBeanFactory factory;\r\n\r\n    private long max;\r\n    private long min;\r\n    private String fieldName;\r\n    private String message;\r\n\r\n    @Override\r\n    public void initialize(SizeValid constraintAnnotation) {\r\n        this.max = constraintAnnotation.max();\r\n        this.min = constraintAnnotation.min();\r\n        this.fieldName = constraintAnnotation.fieldName();\r\n        this.message = constraintAnnotation.message();\r\n    }\r\n\r\n    @Override\r\n    public boolean isValid(String value, ConstraintValidatorContext context) {\r\n        if (value.length() &gt;= min) {\r\n            if (value.length() &lt;= max) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        String formattedMessage;\r\n\r\n        if (StringUtils.hasText(message)) {\r\n            String messageStr = factory.resolveEmbeddedValue(message); //here we are trying to get message from props\r\n\r\n            if (messageStr == null) {\r\n                throw new UnknownFormatConversionException(String.format(&quot;Property %s not found&quot;, message));\r\n            }\r\n\r\n            formattedMessage = messageStr.formatted(min, max);\r\n        } else {\r\n            formattedMessage = DEFAULT_MESSAGE.formatted(fieldName, max, min);\r\n        }\r\n\r\n        throw new IllegalArgumentException(formattedMessage);\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nYour dto\r\n\r\n```\r\npublic class LoginForm {\r\n\r\n    @NotEmpty(message = &quot;${email.notempty}&quot;)\r\n    @Email\r\n    private String email;\r\n\r\n    @SizeValid(min = 8, max = 50, message = &quot;${password.size}&quot;)\r\n    @NotNull\r\n    private String password;\r\n\r\n}\r\n```\r\n\r\nAnd then annotate your dto with &lt;code&gt;@Valid&lt;/code&gt; annotation in controller method.\r\n\r\nIn another way you can create some Validatable interface with &lt;code&gt;validate()&lt;/code&gt; method, implement this interface with dto, override &lt;code&gt;validate()&lt;/code&gt; method by creating your custom exception instances, aggregate and return an array of this exceptions from &lt;code&gt;validate()&lt;/code&gt;. On the next step create validator bean which should be triggered by some custom annotation on method argument. Validator should call interface &lt;code&gt;validate()&lt;/code&gt; method. From the array of your exceptions it could choose proper messages from props depending on exception type. Collect all the messages into one response.","title":"Request validation: Get field name in messages.properties using MessageSource?","body":"<p>You can implement custom validator class for your behaviour.\ne.g.</p>\n<p>Field annotation</p>\n<pre><code>@Target({ FIELD })\n@Retention(RUNTIME)\n@Constraint(validatedBy = StringSizeValidator.class)\n@Documented\npublic @interface SizeValid {\n\n    long min() default 0;\n\n    long max() default Long.MAX_VALUE;\n\n    String fieldName() default &quot;&quot;;\n\n    String message() default &quot;&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n\n}\n</code></pre>\n<p>Validator</p>\n<pre><code>\npublic class StringSizeValidator implements ConstraintValidator&lt;SizeValid, String&gt; {\n\n    private static final String DEFAULT_MESSAGE = &quot;Size of field %s should be between %s and %s&quot;;\n\n    @Autowired\n    private ConfigurableListableBeanFactory factory;\n\n    private long max;\n    private long min;\n    private String fieldName;\n    private String message;\n\n    @Override\n    public void initialize(SizeValid constraintAnnotation) {\n        this.max = constraintAnnotation.max();\n        this.min = constraintAnnotation.min();\n        this.fieldName = constraintAnnotation.fieldName();\n        this.message = constraintAnnotation.message();\n    }\n\n    @Override\n    public boolean isValid(String value, ConstraintValidatorContext context) {\n        if (value.length() &gt;= min) {\n            if (value.length() &lt;= max) {\n                return true;\n            }\n        }\n\n        String formattedMessage;\n\n        if (StringUtils.hasText(message)) {\n            String messageStr = factory.resolveEmbeddedValue(message); //here we are trying to get message from props\n\n            if (messageStr == null) {\n                throw new UnknownFormatConversionException(String.format(&quot;Property %s not found&quot;, message));\n            }\n\n            formattedMessage = messageStr.formatted(min, max);\n        } else {\n            formattedMessage = DEFAULT_MESSAGE.formatted(fieldName, max, min);\n        }\n\n        throw new IllegalArgumentException(formattedMessage);\n    }\n}\n\n\n</code></pre>\n<p>Your dto</p>\n<pre><code>public class LoginForm {\n\n    @NotEmpty(message = &quot;${email.notempty}&quot;)\n    @Email\n    private String email;\n\n    @SizeValid(min = 8, max = 50, message = &quot;${password.size}&quot;)\n    @NotNull\n    private String password;\n\n}\n</code></pre>\n<p>And then annotate your dto with <code>@Valid</code> annotation in controller method.</p>\n<p>In another way you can create some Validatable interface with <code>validate()</code> method, implement this interface with dto, override <code>validate()</code> method by creating your custom exception instances, aggregate and return an array of this exceptions from <code>validate()</code>. On the next step create validator bean which should be triggered by some custom annotation on method argument. Validator should call interface <code>validate()</code> method. From the array of your exceptions it could choose proper messages from props depending on exception type. Collect all the messages into one response.</p>\n"}],"owner":{"display_name":"user21263160"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":630,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75583933,"answer_count":1,"score":0,"last_activity_date":1677520361,"creation_date":1677506712,"question_id":75581486,"body_markdown":"I use a custom validation `MessageSource` as shown below in a Spring Boot app:\r\n\r\n&lt;br/&gt;\r\n\r\n\r\n***MessageSourceConfig:***\r\n\r\n```\r\n@Configuration\r\npublic class MessageSourceConfig {\r\n\r\n    @Bean\r\n    public MessageSource messageSource() {\r\n        ReloadableResourceBundleMessageSource messageSource = \r\n            new ReloadableResourceBundleMessageSource();\r\n        messageSource.setBasename(&quot;classpath:messages&quot;);\r\n        messageSource.setDefaultEncoding(&quot;UTF-8&quot;);\r\n        return messageSource;\r\n    }\r\n\r\n    @Bean\r\n    public LocalValidatorFactoryBean getValidator() {\r\n        LocalValidatorFactoryBean bean = new LocalValidatorFactoryBean();\r\n        bean.setValidationMessageSource(messageSource());\r\n        return bean;\r\n    }\r\n}\r\n```\r\n\r\n&lt;br/&gt;\r\n\r\n***RequestClass:***\r\n\r\n```\r\npublic class LoginForm {\r\n\r\n    @NotEmpty(message = &quot;{email.notempty}&quot;)\r\n    @Email\r\n    private String email;\r\n\r\n    @Size(min = 8, max = 50, message = &quot;{password.size}&quot;)\r\n    @NotNull\r\n    private String password;\r\n}\r\n```\r\n\r\n&lt;br/&gt;\r\n\r\n***messages.properties:***\r\n\r\n```\r\nemail.notempty=email is not valid. Please provide valid email.\r\npassword.size=password size must be between 8 and 50.\r\n```\r\n\r\n\r\n&lt;br/&gt;\r\n\r\nI just want to get `field name` and some annotation parameters e.g. `min` / `max` and use them in my message. With the help of this, I can reduce the message definitions and re-use the same message with different parameters. \r\n\r\nSo, how can I do this? I tried something e.g. `{0}` in the messages, but did not work :( ","title":"Request validation: Get field name in messages.properties using MessageSource?","body":"<p>I use a custom validation <code>MessageSource</code> as shown below in a Spring Boot app:</p>\n<br/>\n<p><em><strong>MessageSourceConfig:</strong></em></p>\n<pre><code>@Configuration\npublic class MessageSourceConfig {\n\n    @Bean\n    public MessageSource messageSource() {\n        ReloadableResourceBundleMessageSource messageSource = \n            new ReloadableResourceBundleMessageSource();\n        messageSource.setBasename(&quot;classpath:messages&quot;);\n        messageSource.setDefaultEncoding(&quot;UTF-8&quot;);\n        return messageSource;\n    }\n\n    @Bean\n    public LocalValidatorFactoryBean getValidator() {\n        LocalValidatorFactoryBean bean = new LocalValidatorFactoryBean();\n        bean.setValidationMessageSource(messageSource());\n        return bean;\n    }\n}\n</code></pre>\n<br/>\n<p><em><strong>RequestClass:</strong></em></p>\n<pre><code>public class LoginForm {\n\n    @NotEmpty(message = &quot;{email.notempty}&quot;)\n    @Email\n    private String email;\n\n    @Size(min = 8, max = 50, message = &quot;{password.size}&quot;)\n    @NotNull\n    private String password;\n}\n</code></pre>\n<br/>\n<p><em><strong>messages.properties:</strong></em></p>\n<pre><code>email.notempty=email is not valid. Please provide valid email.\npassword.size=password size must be between 8 and 50.\n</code></pre>\n<br/>\n<p>I just want to get <code>field name</code> and some annotation parameters e.g. <code>min</code> / <code>max</code> and use them in my message. With the help of this, I can reduce the message definitions and re-use the same message with different parameters.</p>\n<p>So, how can I do this? I tried something e.g. <code>{0}</code> in the messages, but did not work :(</p>\n"},{"tags":["java","android","date","zoneddatetime"],"comments":[{"owner":{"account_id":4383501,"reputation":16972,"user_id":5496177,"accept_rate":60,"display_name":"TheWanderer"},"score":0,"creation_date":1550844741,"post_id":54828832,"comment_id":96432516,"body_markdown":"How are you constructing your ZonedDateTime instance? Why can&#39;t you just replace it with the code in your question?","body":"How are you constructing your ZonedDateTime instance? Why can&#39;t you just replace it with the code in your question?"},{"owner":{"account_id":11054636,"reputation":2676,"user_id":8117793,"display_name":"Tomin B Azhakathu"},"score":1,"creation_date":1550845921,"post_id":54828832,"comment_id":96433341,"body_markdown":"Possible duplicate of [Difference in days between two dates in Java?](https://stackoverflow.com/questions/3299972/difference-in-days-between-two-dates-in-java)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/3299972/difference-in-days-between-two-dates-in-java\">Difference in days between two dates in Java?</a>"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1550852122,"post_id":54828832,"comment_id":96437027,"body_markdown":"Can&#39;t you use Joda Time or the ThreeTen Backport?","body":"Can&#39;t you use Joda Time or the ThreeTen Backport?"},{"owner":{"account_id":3284171,"reputation":551,"user_id":2764039,"accept_rate":82,"display_name":"manuelwaldner"},"score":1,"creation_date":1550860029,"post_id":54828832,"comment_id":96441058,"body_markdown":"@TheWanderer im getting a string from a json which is then passed to ZonedDateTime.parse(). I will try the ThreeTen Backport and will give an update.","body":"@TheWanderer im getting a string from a json which is then passed to ZonedDateTime.parse(). I will try the ThreeTen Backport and will give an update."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1550913811,"post_id":54828832,"comment_id":96453822,"body_markdown":"What does the string from JSON look like? Asking because if it’s like `2019-02-23T10:21:04.791797+01:00`, then `OffsetDateTime` is a still better match for parsing. The question is whether the string has a time zone in it (like Pacific/Pitcairn or ACWST) or only an offset (like `+01:00`).","body":"What does the string from JSON look like? Asking because if it’s like <code>2019-02-23T10:21:04.791797+01:00</code>, then <code>OffsetDateTime</code> is a still better match for parsing. The question is whether the string has a time zone in it (like Pacific/Pitcairn or ACWST) or only an offset (like <code>+01:00</code>)."},{"owner":{"account_id":3284171,"reputation":551,"user_id":2764039,"accept_rate":82,"display_name":"manuelwaldner"},"score":1,"creation_date":1550946156,"post_id":54828832,"comment_id":96462493,"body_markdown":"The date string is e.g. &quot;2019-02-23T16:50:21Z&quot;, so it&#39;s UTC.","body":"The date string is e.g. &quot;2019-02-23T16:50:21Z&quot;, so it&#39;s UTC."},{"owner":{"account_id":3284171,"reputation":551,"user_id":2764039,"accept_rate":82,"display_name":"manuelwaldner"},"score":0,"creation_date":1551105392,"post_id":54828832,"comment_id":96507492,"body_markdown":"I added a solution taking the String instead of a ZonedDateTime. Before that i had to adjust my API library to return the original String instead of the already parsed ZonedDateTime, but it is working! Thank you.","body":"I added a solution taking the String instead of a ZonedDateTime. Before that i had to adjust my API library to return the original String instead of the already parsed ZonedDateTime, but it is working! Thank you."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1569877692,"creation_date":1550852966,"answer_id":54831329,"question_id":54828832,"body_markdown":"# tl;dr\r\n\r\nFor Android before 26, use the [*ThreeTen-ABP*](https://github.com/JakeWharton/ThreeTenABP) library. \r\n\r\n\r\n\r\n# Avoid legacy date-time classes\r\n\r\nThe old date-time classes such as `Calendar` and `Date` are *terrible*, really, awful wretched classes. They are laden with bad design decisions and hacks, built by people who did not understand date-time handling. Avoid them. They were entirely supplanted by the *java.time* classes with the adoption of JSR 310 for a reason – actually, *many* reasons. \r\n\r\nAvoid these legacy classes. Use only *java.time* classes. \r\n\r\n\r\n\r\n# *ThreeTen-Backport* library\r\n\r\nFor Java 6 and Java 7, most of the *java.time* functionality is back-ported in the *ThreeTen-Backport* project. \r\n\r\n# *ThreeTen-ABP*\r\n\r\nThat back-port is further adapted to earlier Android (&lt;26) in the *ThreeTen-ABP* project. \r\n\r\nI urge you to add this library to your project so you can avoid ever using the tragic legacy classes. \r\n\r\n# Conversion\r\n\r\nWhere you need to interface with old code not yet updated to *java.time*, convert back-and-forth between legacy and modern. \r\n\r\nIn Java 8 and later, convert by calling the new `to…` and `from…` methods found on the old classes. \r\n\r\n\r\nIn the back-port, convert using the `to…` conversion methods found on the [`org.threeten.bp.DateTimeUtils`](https://www.threeten.org/threetenbp/apidocs/org/threeten/bp/DateTimeUtils.html) class. \r\n\r\n# Elapsed time\r\n\r\nYour Question talks about calculating elapsed time. \r\n\r\nTo count years, months, and days, use [`Period`](https://www.threeten.org/threetenbp/apidocs/org/threeten/bp/Period.html). \r\n\r\nTo count days (24-hour chunks of time unrelated to the calendar), hours, minutes, seconds, and fractional second, use [`Duration`](https://www.threeten.org/threetenbp/apidocs/org/threeten/bp/Duration.html). \r\n\r\nSearch Stack Overflow for more info. These classes have been covered many time already. \r\n\r\n\r\n\r\n----------\r\n\r\n# About *java.time*\r\n\r\nThe [*java.time*](http://docs.oracle.com/javase/10/docs/api/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the troublesome old [legacy](https://en.wikipedia.org/wiki/Legacy_system) date-time classes such as [`java.util.Date`](https://docs.oracle.com/javase/10/docs/api/java/util/Date.html), [`Calendar`](https://docs.oracle.com/javase/10/docs/api/java/util/Calendar.html), &amp; [`SimpleDateFormat`](http://docs.oracle.com/javase/10/docs/api/java/text/SimpleDateFormat.html).\r\n\r\nTo learn more, see the [*Oracle Tutorial*](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations. Specification is [JSR 310](https://jcp.org/en/jsr/detail?id=310).\r\n\r\nThe [*Joda-Time*](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to the [java.time](http://docs.oracle.com/javase/10/docs/api/java/time/package-summary.html) classes.\r\n\r\nYou may exchange *java.time* objects directly with your database. Use a [JDBC driver](https://en.wikipedia.org/wiki/JDBC_driver) compliant with [JDBC 4.2](http://openjdk.java.net/jeps/170) or later. No need for strings, no need for `java.sql.*` classes.\r\n\r\nWhere to obtain the java.time classes? \r\n\r\n - [**Java SE 8**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8), [**Java SE 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9), [**Java SE 10**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10), [**Java SE 11**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11), and later  - Part of the standard Java API with a bundled implementation.\r\n  - Java 9 adds some minor features and fixes.\r\n - [**Java SE 6**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6) and [**Java SE 7**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)\r\n  - Most of the *java.time* functionality is back-ported to Java 6 &amp; 7 in [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/).\r\n - [**Android**](https://en.wikipedia.org/wiki/Android_(operating_system))\r\n  - Later versions of Android bundle implementations of the *java.time* classes.\r\n  - For earlier Android (&lt;26), the [***ThreeTenABP***](https://github.com/JakeWharton/ThreeTenABP) project adapts [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) (mentioned above). See [*How to use ThreeTenABP…*](http://stackoverflow.com/q/38922754/642706).\r\n\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MQBBt.png","title":"ZonedDateTime to Date before Java 8 in early Android","body":"<h1>tl;dr</h1>\n\n<p>For Android before 26, use the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"noreferrer\"><em>ThreeTen-ABP</em></a> library. </p>\n\n<h1>Avoid legacy date-time classes</h1>\n\n<p>The old date-time classes such as <code>Calendar</code> and <code>Date</code> are <em>terrible</em>, really, awful wretched classes. They are laden with bad design decisions and hacks, built by people who did not understand date-time handling. Avoid them. They were entirely supplanted by the <em>java.time</em> classes with the adoption of JSR 310 for a reason – actually, <em>many</em> reasons. </p>\n\n<p>Avoid these legacy classes. Use only <em>java.time</em> classes. </p>\n\n<h1><em>ThreeTen-Backport</em> library</h1>\n\n<p>For Java 6 and Java 7, most of the <em>java.time</em> functionality is back-ported in the <em>ThreeTen-Backport</em> project. </p>\n\n<h1><em>ThreeTen-ABP</em></h1>\n\n<p>That back-port is further adapted to earlier Android (&lt;26) in the <em>ThreeTen-ABP</em> project. </p>\n\n<p>I urge you to add this library to your project so you can avoid ever using the tragic legacy classes. </p>\n\n<h1>Conversion</h1>\n\n<p>Where you need to interface with old code not yet updated to <em>java.time</em>, convert back-and-forth between legacy and modern. </p>\n\n<p>In Java 8 and later, convert by calling the new <code>to…</code> and <code>from…</code> methods found on the old classes. </p>\n\n<p>In the back-port, convert using the <code>to…</code> conversion methods found on the <a href=\"https://www.threeten.org/threetenbp/apidocs/org/threeten/bp/DateTimeUtils.html\" rel=\"noreferrer\"><code>org.threeten.bp.DateTimeUtils</code></a> class. </p>\n\n<h1>Elapsed time</h1>\n\n<p>Your Question talks about calculating elapsed time. </p>\n\n<p>To count years, months, and days, use <a href=\"https://www.threeten.org/threetenbp/apidocs/org/threeten/bp/Period.html\" rel=\"noreferrer\"><code>Period</code></a>. </p>\n\n<p>To count days (24-hour chunks of time unrelated to the calendar), hours, minutes, seconds, and fractional second, use <a href=\"https://www.threeten.org/threetenbp/apidocs/org/threeten/bp/Duration.html\" rel=\"noreferrer\"><code>Duration</code></a>. </p>\n\n<p>Search Stack Overflow for more info. These classes have been covered many time already. </p>\n\n<hr>\n\n<h1>About <em>java.time</em></h1>\n\n<p>The <a href=\"http://docs.oracle.com/javase/10/docs/api/java/time/package-summary.html\" rel=\"noreferrer\"><em>java.time</em></a> framework is built into Java 8 and later. These classes supplant the troublesome old <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"noreferrer\">legacy</a> date-time classes such as <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/Date.html\" rel=\"noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/Calendar.html\" rel=\"noreferrer\"><code>Calendar</code></a>, &amp; <a href=\"http://docs.oracle.com/javase/10/docs/api/java/text/SimpleDateFormat.html\" rel=\"noreferrer\"><code>SimpleDateFormat</code></a>.</p>\n\n<p>To learn more, see the <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"noreferrer\"><em>Oracle Tutorial</em></a>. And search Stack Overflow for many examples and explanations. Specification is <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"noreferrer\">JSR 310</a>.</p>\n\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\"><em>Joda-Time</em></a> project, now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"noreferrer\">maintenance mode</a>, advises migration to the <a href=\"http://docs.oracle.com/javase/10/docs/api/java/time/package-summary.html\" rel=\"noreferrer\">java.time</a> classes.</p>\n\n<p>You may exchange <em>java.time</em> objects directly with your database. Use a <a href=\"https://en.wikipedia.org/wiki/JDBC_driver\" rel=\"noreferrer\">JDBC driver</a> compliant with <a href=\"http://openjdk.java.net/jeps/170\" rel=\"noreferrer\">JDBC 4.2</a> or later. No need for strings, no need for <code>java.sql.*</code> classes.</p>\n\n<p>Where to obtain the java.time classes? </p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"noreferrer\"><strong>Java SE 8</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"noreferrer\"><strong>Java SE 9</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10\" rel=\"noreferrer\"><strong>Java SE 10</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11\" rel=\"noreferrer\"><strong>Java SE 11</strong></a>, and later  - Part of the standard Java API with a bundled implementation.\n\n<ul>\n<li>Java 9 adds some minor features and fixes.</li>\n</ul></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"noreferrer\"><strong>Java SE 6</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"noreferrer\"><strong>Java SE 7</strong></a>\n\n<ul>\n<li>Most of the <em>java.time</em> functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><strong><em>ThreeTen-Backport</em></strong></a>.</li>\n</ul></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Android_(operating_system)\" rel=\"noreferrer\"><strong>Android</strong></a>\n\n<ul>\n<li>Later versions of Android bundle implementations of the <em>java.time</em> classes.</li>\n<li>For earlier Android (&lt;26), the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"noreferrer\"><strong><em>ThreeTenABP</em></strong></a> project adapts <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><strong><em>ThreeTen-Backport</em></strong></a> (mentioned above). See <a href=\"http://stackoverflow.com/q/38922754/642706\"><em>How to use ThreeTenABP…</em></a>.</li>\n</ul></li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/MQBBt.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/MQBBt.png\" alt=\"enter image description here\"></a></p>\n"},{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1550958184,"post_id":54845815,"comment_id":96465733,"body_markdown":"Interesting approach, looping all `ChronoUnit` enum values. I wonder if this could be crunched down into a stream, perhaps a one-liner?","body":"Interesting approach, looping all <code>ChronoUnit</code> enum values. I wonder if this could be crunched down into a stream, perhaps a one-liner?"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1550991018,"post_id":54845815,"comment_id":96471205,"body_markdown":"It can be turned into a stream, @BasilBourque (and even better after I got rid of the superfluous `try`-`catch`in the code). See my edit. I avoided it at first because I found the code for streaming an array backward harder to read (inspired from [Java 8 stream reverse order](https://stackoverflow.com/questions/24010109/java-8-stream-reverse-order)).","body":"It can be turned into a stream, @BasilBourque (and even better after I got rid of the superfluous <code>try</code>-<code>catch</code>in the code). See my edit. I avoided it at first because I found the code for streaming an array backward harder to read (inspired from <a href=\"https://stackoverflow.com/questions/24010109/java-8-stream-reverse-order\">Java 8 stream reverse order</a>)."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1551105493,"post_id":54845815,"comment_id":96507560,"body_markdown":"Thanks for doing that, @ManuelWa. You may consider posting it as your own answer rather than in the question. I did think that you just might not want to consider *all* chrono units. I see that you found a solution for that.","body":"Thanks for doing that, @ManuelWa. You may consider posting it as your own answer rather than in the question. I did think that you just might not want to consider <i>all</i> chrono units. I see that you found a solution for that."}],"tags":[],"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1550992526,"creation_date":1550953140,"answer_id":54845815,"question_id":54828832,"body_markdown":"There’s already a good answer by Basil Bourque. After your comments I thought I could be just a little more specific:\r\n\r\n\tpublic static String diff(String thenStr) {\r\n\t\tInstant now = Instant.now();\r\n\t\tInstant then = Instant.parse(thenStr);\r\n\t\tChronoUnit[] units = ChronoUnit.values();\r\n\t\t// try longest units first, they are in the far end of the array\r\n\t\tfor (int i = units.length - 1; i &gt;= 0; i--) {\r\n\t\t\tif (then.isSupported(units[i])) {\r\n\t\t\t\tlong diffInCurrentUnit = units[i].between(then, now);\r\n\t\t\t\tif (diffInCurrentUnit != 0) {\r\n\t\t\t\t\treturn &quot;&quot; + diffInCurrentUnit + &#39; &#39; + units[i].toString().toLowerCase();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn &quot;0&quot;;\r\n\t}\r\n\r\nLet’s try it out:\r\n\r\n\t\tSystem.out.println(diff(&quot;2019-02-23T16:50:21Z&quot;));\r\n\t\tSystem.out.println(diff(&quot;2019-02-23T20:15:21Z&quot;));\r\n\r\nOutput when running just now:\r\n\r\n&gt;     3 hours\r\n&gt;     36 seconds\r\n\r\nImports I used:\r\n\r\n    import org.threeten.bp.Instant;\r\n    import org.threeten.bp.temporal.ChronoUnit;\r\n    import org.threeten.bp.temporal.UnsupportedTemporalTypeException;\r\n\r\n`Instant` doesn’t support coarser units than days (at 24 hours). If you need to be able to return weeks, months or years, just use `OffsetDateTime` instead of `Instant`.\r\n\r\n## Question: Can I use java.time on my Android API level?\r\n\r\nYes, java.time works nicely on older and newer Android devices. It just requires at least **Java 6**.\r\n\r\n - In Java 8 and later and on newer Android devices (from API level 26) the modern API comes built-in. In this case import from `java.time` with subpackages.\r\n - In Java 6 and 7 get the ThreeTen Backport, the backport of the modern classes (ThreeTen for JSR 310; see the links at the bottom).\r\n - On (older) Android use the Android edition of ThreeTen Backport. It’s called ThreeTenABP. And make sure you import the date and time classes from `org.threeten.bp` with subpackages.\r\n\r\n## A stream?\r\n\r\n**EDIT:** @Basil Bourque asked in a comment:\r\n\r\n&gt; I wonder if this could be crunched down into a stream, perhaps a one-liner?\r\n\r\nIt can, but I don’t think it will be an advantage in this case:\r\n\r\n\t\treturn IntStream.range(0, units.length)\r\n\t\t\t\t.map(i -&gt; units.length - i - 1)\r\n\t\t\t\t.mapToObj(i -&gt; units[i])\r\n\t\t\t\t.filter(then::isSupported)\r\n\t\t\t\t.filter(unit -&gt; unit.between(then, now) != 0)\r\n\t\t\t\t.map(unit -&gt; &quot;&quot; + unit.between(then, now) + &#39; &#39; + unit.toString().toLowerCase())\r\n\t\t\t\t.findFirst()\r\n\t\t\t\t.orElse(&quot;0&quot;);\r\n\r\nI find the code for taking the array elements backward, `.map(i -&gt; units.length - i - 1)`, a bit hard to read. We need to calculate the difference twice, first for filtering and then for assembling the string result. But it works, and you may go with it if you like.\r\n\r\nThe double calculation can be avoided with an inner stream pipeline, again harder to read, though:\r\n\r\n\t\t\t\t.flatMap(unit -&gt; LongStream.of(unit.between(then, now))\r\n\t\t\t\t\t\t.filter(diff -&gt; diff != 0)\r\n\t\t\t\t\t\t.mapToObj(diff -&gt; &quot;&quot; + diff + &#39; &#39; + unit.toString().toLowerCase()))\r\n\r\n## Links\r\n\r\n - [Oracle tutorial: Date Time](https://docs.oracle.com/javase/tutorial/datetime/) explaining how to use java.time.\r\n - [Java Specification Request (JSR) 310](https://jcp.org/en/jsr/detail?id=310), where `java.time` was first described.\r\n - [ThreeTen Backport project](http://www.threeten.org/threetenbp/), the backport of `java.time` to Java 6 and 7 (ThreeTen for JSR-310).\r\n - [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP), Android edition of ThreeTen Backport\r\n - [Question: How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project), with a very thorough explanation.","title":"ZonedDateTime to Date before Java 8 in early Android","body":"<p>There’s already a good answer by Basil Bourque. After your comments I thought I could be just a little more specific:</p>\n\n<pre><code>public static String diff(String thenStr) {\n    Instant now = Instant.now();\n    Instant then = Instant.parse(thenStr);\n    ChronoUnit[] units = ChronoUnit.values();\n    // try longest units first, they are in the far end of the array\n    for (int i = units.length - 1; i &gt;= 0; i--) {\n        if (then.isSupported(units[i])) {\n            long diffInCurrentUnit = units[i].between(then, now);\n            if (diffInCurrentUnit != 0) {\n                return \"\" + diffInCurrentUnit + ' ' + units[i].toString().toLowerCase();\n            }\n        }\n    }\n    return \"0\";\n}\n</code></pre>\n\n<p>Let’s try it out:</p>\n\n<pre><code>    System.out.println(diff(\"2019-02-23T16:50:21Z\"));\n    System.out.println(diff(\"2019-02-23T20:15:21Z\"));\n</code></pre>\n\n<p>Output when running just now:</p>\n\n<blockquote>\n<pre><code>3 hours\n36 seconds\n</code></pre>\n</blockquote>\n\n<p>Imports I used:</p>\n\n<pre><code>import org.threeten.bp.Instant;\nimport org.threeten.bp.temporal.ChronoUnit;\nimport org.threeten.bp.temporal.UnsupportedTemporalTypeException;\n</code></pre>\n\n<p><code>Instant</code> doesn’t support coarser units than days (at 24 hours). If you need to be able to return weeks, months or years, just use <code>OffsetDateTime</code> instead of <code>Instant</code>.</p>\n\n<h2>Question: Can I use java.time on my Android API level?</h2>\n\n<p>Yes, java.time works nicely on older and newer Android devices. It just requires at least <strong>Java 6</strong>.</p>\n\n<ul>\n<li>In Java 8 and later and on newer Android devices (from API level 26) the modern API comes built-in. In this case import from <code>java.time</code> with subpackages.</li>\n<li>In Java 6 and 7 get the ThreeTen Backport, the backport of the modern classes (ThreeTen for JSR 310; see the links at the bottom).</li>\n<li>On (older) Android use the Android edition of ThreeTen Backport. It’s called ThreeTenABP. And make sure you import the date and time classes from <code>org.threeten.bp</code> with subpackages.</li>\n</ul>\n\n<h2>A stream?</h2>\n\n<p><strong>EDIT:</strong> @Basil Bourque asked in a comment:</p>\n\n<blockquote>\n  <p>I wonder if this could be crunched down into a stream, perhaps a one-liner?</p>\n</blockquote>\n\n<p>It can, but I don’t think it will be an advantage in this case:</p>\n\n<pre><code>    return IntStream.range(0, units.length)\n            .map(i -&gt; units.length - i - 1)\n            .mapToObj(i -&gt; units[i])\n            .filter(then::isSupported)\n            .filter(unit -&gt; unit.between(then, now) != 0)\n            .map(unit -&gt; \"\" + unit.between(then, now) + ' ' + unit.toString().toLowerCase())\n            .findFirst()\n            .orElse(\"0\");\n</code></pre>\n\n<p>I find the code for taking the array elements backward, <code>.map(i -&gt; units.length - i - 1)</code>, a bit hard to read. We need to calculate the difference twice, first for filtering and then for assembling the string result. But it works, and you may go with it if you like.</p>\n\n<p>The double calculation can be avoided with an inner stream pipeline, again harder to read, though:</p>\n\n<pre><code>            .flatMap(unit -&gt; LongStream.of(unit.between(then, now))\n                    .filter(diff -&gt; diff != 0)\n                    .mapToObj(diff -&gt; \"\" + diff + ' ' + unit.toString().toLowerCase()))\n</code></pre>\n\n<h2>Links</h2>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">Oracle tutorial: Date Time</a> explaining how to use java.time.</li>\n<li><a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">Java Specification Request (JSR) 310</a>, where <code>java.time</code> was first described.</li>\n<li><a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">ThreeTen Backport project</a>, the backport of <code>java.time</code> to Java 6 and 7 (ThreeTen for JSR-310).</li>\n<li><a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>, Android edition of ThreeTen Backport</li>\n<li><a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">Question: How to use ThreeTenABP in Android Project</a>, with a very thorough explanation.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3284171,"reputation":551,"user_id":2764039,"accept_rate":82,"display_name":"manuelwaldner"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1551162100,"creation_date":1551162100,"answer_id":54879517,"question_id":54828832,"body_markdown":"**Solution (ThreeTen-Backport Library):**&lt;br&gt;\r\nIt&#39;s working perfectly, i already tried it out on an KitKat emulator.\r\n\r\n    private static final ChronoUnit[] chronoUnits = {ChronoUnit.YEARS, ChronoUnit.MONTHS, ChronoUnit.DAYS, ChronoUnit.HOURS, ChronoUnit.MINUTES, ChronoUnit.SECONDS};\r\n    private static final Map&lt;ChronoUnit, Integer&gt; chronoUnitPluralIdMap = new HashMap&lt;ChronoUnit, Integer&gt;() {{\r\n        put(ChronoUnit.YEARS, R.plurals.chrono_unit_years_ago);\r\n        put(ChronoUnit.MONTHS, R.plurals.chrono_unit_months_ago);\r\n        put(ChronoUnit.DAYS, R.plurals.chrono_unit_days_ago);\r\n        put(ChronoUnit.HOURS, R.plurals.chrono_unit_hours_ago);\r\n        put(ChronoUnit.MINUTES, R.plurals.chrono_unit_minutes_ago);\r\n        put(ChronoUnit.SECONDS, R.plurals.chrono_unit_seconds_ago);\r\n    }};\r\n\r\n    public static String getTimeStringUntilNowFromUTC(Context context, String utcDate) {\r\n        Instant now = Instant.now(Clock.systemUTC());\r\n        Instant then = Instant.parse(utcDate);\r\n        for (ChronoUnit chronoUnit : chronoUnits) {\r\n            if (then.isSupported(chronoUnit)) {\r\n                long units = chronoUnit.between(then, now);\r\n                if (units &gt; 0) {\r\n                    //noinspection ConstantConditions\r\n                    return context.getResources().getQuantityString(chronoUnitPluralIdMap.get(chronoUnit), (int)units, (int)units);\r\n                }\r\n            }\r\n        }\r\n        return &quot;-&quot;;\r\n    }\r\n\r\n    public static String getTimeBetweenTwoDates(Context context, String date1, String date2) {\r\n        Instant date1Instant = Instant.parse(date1);\r\n        Instant date2Instant = Instant.parse(date2);\r\n        final long seconds = ChronoUnit.SECONDS.between(date1Instant, date2Instant);\r\n        return getMinutesSecondsString(context, seconds);\r\n    }","title":"ZonedDateTime to Date before Java 8 in early Android","body":"<p><strong>Solution (ThreeTen-Backport Library):</strong><br>\nIt's working perfectly, i already tried it out on an KitKat emulator.</p>\n\n<pre><code>private static final ChronoUnit[] chronoUnits = {ChronoUnit.YEARS, ChronoUnit.MONTHS, ChronoUnit.DAYS, ChronoUnit.HOURS, ChronoUnit.MINUTES, ChronoUnit.SECONDS};\nprivate static final Map&lt;ChronoUnit, Integer&gt; chronoUnitPluralIdMap = new HashMap&lt;ChronoUnit, Integer&gt;() {{\n    put(ChronoUnit.YEARS, R.plurals.chrono_unit_years_ago);\n    put(ChronoUnit.MONTHS, R.plurals.chrono_unit_months_ago);\n    put(ChronoUnit.DAYS, R.plurals.chrono_unit_days_ago);\n    put(ChronoUnit.HOURS, R.plurals.chrono_unit_hours_ago);\n    put(ChronoUnit.MINUTES, R.plurals.chrono_unit_minutes_ago);\n    put(ChronoUnit.SECONDS, R.plurals.chrono_unit_seconds_ago);\n}};\n\npublic static String getTimeStringUntilNowFromUTC(Context context, String utcDate) {\n    Instant now = Instant.now(Clock.systemUTC());\n    Instant then = Instant.parse(utcDate);\n    for (ChronoUnit chronoUnit : chronoUnits) {\n        if (then.isSupported(chronoUnit)) {\n            long units = chronoUnit.between(then, now);\n            if (units &gt; 0) {\n                //noinspection ConstantConditions\n                return context.getResources().getQuantityString(chronoUnitPluralIdMap.get(chronoUnit), (int)units, (int)units);\n            }\n        }\n    }\n    return \"-\";\n}\n\npublic static String getTimeBetweenTwoDates(Context context, String date1, String date2) {\n    Instant date1Instant = Instant.parse(date1);\n    Instant date2Instant = Instant.parse(date2);\n    final long seconds = ChronoUnit.SECONDS.between(date1Instant, date2Instant);\n    return getMinutesSecondsString(context, seconds);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8005925,"reputation":1108,"user_id":6039240,"display_name":"Amr"},"score":0,"creation_date":1637057888,"post_id":64772472,"comment_id":123717790,"body_markdown":"Tested and it&#39;s working! i am using ZonedDateTime in my project which normally works only on api&gt;=26, so i downloaded emulator with api 24 and the project run without crashing!","body":"Tested and it&#39;s working! i am using ZonedDateTime in my project which normally works only on api&gt;=26, so i downloaded emulator with api 24 and the project run without crashing!"}],"tags":[],"owner":{"account_id":6180212,"reputation":329,"user_id":4815953,"display_name":"Roman Droppa"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1605024450,"creation_date":1605024450,"answer_id":64772472,"question_id":54828832,"body_markdown":"You can enable &quot;Support for newer Java language APIs&quot; simply by this gradle configuration:\r\n```\r\n&lt;!-- Copyright 2019 Google LLC.\r\nSPDX-License-Identifier: Apache-2.0 --&gt;\r\n\r\nandroid {\r\n  defaultConfig {\r\n    //Only required when setting minSdkVersion to 20 or lower\r\n    multiDexEnabled true\r\n  }\r\n\r\n  compileOptions {\r\n    // Flag to enable support for the new language APIs\r\n    coreLibraryDesugaringEnabled true\r\n    // Sets Java compatibility to Java 8\r\n    sourceCompatibility JavaVersion.VERSION_1_8\r\n    targetCompatibility JavaVersion.VERSION_1_8\r\n  }\r\n}\r\n\r\ndependencies {\r\n  // Dependency with the implementation code for the APIs\r\n  coreLibraryDesugaring &#39;com.android.tools:desugar_jdk_libs:1.0.5&#39;\r\n}\r\n```\r\nSource: https://medium.com/androiddevelopers/support-for-newer-java-language-apis-bca79fc8ef65\r\n","title":"ZonedDateTime to Date before Java 8 in early Android","body":"<p>You can enable &quot;Support for newer Java language APIs&quot; simply by this gradle configuration:</p>\n<pre><code>&lt;!-- Copyright 2019 Google LLC.\nSPDX-License-Identifier: Apache-2.0 --&gt;\n\nandroid {\n  defaultConfig {\n    //Only required when setting minSdkVersion to 20 or lower\n    multiDexEnabled true\n  }\n\n  compileOptions {\n    // Flag to enable support for the new language APIs\n    coreLibraryDesugaringEnabled true\n    // Sets Java compatibility to Java 8\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n  }\n}\n\ndependencies {\n  // Dependency with the implementation code for the APIs\n  coreLibraryDesugaring 'com.android.tools:desugar_jdk_libs:1.0.5'\n}\n</code></pre>\n<p>Source: <a href=\"https://medium.com/androiddevelopers/support-for-newer-java-language-apis-bca79fc8ef65\" rel=\"noreferrer\">https://medium.com/androiddevelopers/support-for-newer-java-language-apis-bca79fc8ef65</a></p>\n"},{"tags":[],"owner":{"account_id":20423618,"reputation":57,"user_id":14984111,"display_name":"jlsogorb"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677519537,"creation_date":1677519537,"answer_id":75583805,"question_id":54828832,"body_markdown":"Answer by Roman Droppa works fine but today (2023) you must change version of library:\r\n\r\n     compileOptions {\r\n            coreLibraryDesugaringEnabled true\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        // Dependency with the implementation code for the APIs\r\n        coreLibraryDesugaring &#39;com.android.tools:desugar_jdk_libs:1.0.9&#39;","title":"ZonedDateTime to Date before Java 8 in early Android","body":"<p>Answer by Roman Droppa works fine but today (2023) you must change version of library:</p>\n<pre><code> compileOptions {\n        coreLibraryDesugaringEnabled true\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    // Dependency with the implementation code for the APIs\n    coreLibraryDesugaring 'com.android.tools:desugar_jdk_libs:1.0.9'\n</code></pre>\n"}],"owner":{"account_id":3284171,"reputation":551,"user_id":2764039,"accept_rate":82,"display_name":"manuelwaldner"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4807,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":54879517,"answer_count":5,"score":10,"last_activity_date":1677519537,"creation_date":1550844350,"question_id":54828832,"body_markdown":"I am trying to replace the `ZonedDateTime.toInstant` method because it is only available since API 26 for Android.&lt;br&gt;\r\nBut my app is supposed to support API 19.&lt;br&gt;\r\nI want to convert the ZonedDateTime to a Date so i can do something like this:&lt;br&gt;\r\n\r\n    final Calendar calendar = Calendar.getInstance();\r\n    calendar.setTime(new Date());\r\n    final long millis = calendar.getTimeInMillis();\r\n\r\nWhat i want to achieve is the following:&lt;br&gt;\r\nI want to calculate the difference between the current date and another date in Seconds, Minutes, Hours, ... the highest possible unit wins, so i would get e.g. `5 days ago` as result.","title":"ZonedDateTime to Date before Java 8 in early Android","body":"<p>I am trying to replace the <code>ZonedDateTime.toInstant</code> method because it is only available since API 26 for Android.<br>\nBut my app is supposed to support API 19.<br>\nI want to convert the ZonedDateTime to a Date so i can do something like this:<br></p>\n\n<pre><code>final Calendar calendar = Calendar.getInstance();\ncalendar.setTime(new Date());\nfinal long millis = calendar.getTimeInMillis();\n</code></pre>\n\n<p>What i want to achieve is the following:<br>\nI want to calculate the difference between the current date and another date in Seconds, Minutes, Hours, ... the highest possible unit wins, so i would get e.g. <code>5 days ago</code> as result.</p>\n"},{"tags":["java","spring","inversion-of-control","autowired"],"comments":[{"owner":{"account_id":4668137,"reputation":6228,"user_id":9681755,"display_name":"Dirk Deyne"},"score":0,"creation_date":1677506879,"post_id":75581080,"comment_id":133345534,"body_markdown":"Where should that value come from? A system property? From application.properties? From a repository?","body":"Where should that value come from? A system property? From application.properties? From a repository?"}],"answers":[{"comments":[{"owner":{"account_id":1447743,"reputation":2678,"user_id":1379730,"accept_rate":52,"display_name":"Jason"},"score":0,"creation_date":1677518681,"post_id":75583503,"comment_id":133349629,"body_markdown":"Thank you! However, what if I wanted to maintain that constructor with the two arguments? For example, to create and test a new instance of `DealershipServiceImpl`? Would putting the `@Value` annotation in the constructor  argument work, then?","body":"Thank you! However, what if I wanted to maintain that constructor with the two arguments? For example, to create and test a new instance of <code>DealershipServiceImpl</code>? Would putting the <code>@Value</code> annotation in the constructor  argument work, then?"}],"tags":[],"owner":{"account_id":13068865,"reputation":357,"user_id":9443176,"display_name":"Max Aminov"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677519467,"creation_date":1677517784,"answer_id":75583503,"question_id":75581080,"body_markdown":"You can use @Value annotation to set initial value for `totalRevenue`.\r\n\r\n```\r\n@Slf4j\r\n@Service\r\npublic class DealershipServiceImpl implements DealershipService {\r\n\r\n    private Long totalRevenue;\r\n\r\n    private final CarRepository carRepository;\r\n\r\n    public DealershipService(\r\n            @Value(&quot;${initialRevenue:20000}&quot;) Long initialRevenue, \r\n            CarRepository carRepository) {\r\n        this.totalRevenue = initialRevenue;\r\n        this.carRepository = carRepository;\r\n    }\r\n\r\n    ...\r\n}\r\n```\r\n\r\nAnd put this property in application.properties (or application.yml):\r\n\r\n```\r\ninitialRevenue = 100000\r\n```\r\nAlso if you will not add this property, the default (20000) would be applied.\r\n\r\nP.S. @Value annotation from package `org.springframework.beans.factory.annotation`. Do not confuse with similar Lombok annotation\r\n\r\nHope it will helps you ;)","title":"Autowiring a Long in my @Service class&#39;s constructor","body":"<p>You can use @Value annotation to set initial value for <code>totalRevenue</code>.</p>\n<pre><code>@Slf4j\n@Service\npublic class DealershipServiceImpl implements DealershipService {\n\n    private Long totalRevenue;\n\n    private final CarRepository carRepository;\n\n    public DealershipService(\n            @Value(&quot;${initialRevenue:20000}&quot;) Long initialRevenue, \n            CarRepository carRepository) {\n        this.totalRevenue = initialRevenue;\n        this.carRepository = carRepository;\n    }\n\n    ...\n}\n</code></pre>\n<p>And put this property in application.properties (or application.yml):</p>\n<pre><code>initialRevenue = 100000\n</code></pre>\n<p>Also if you will not add this property, the default (20000) would be applied.</p>\n<p>P.S. @Value annotation from package <code>org.springframework.beans.factory.annotation</code>. Do not confuse with similar Lombok annotation</p>\n<p>Hope it will helps you ;)</p>\n"},{"comments":[{"owner":{"account_id":1447743,"reputation":2678,"user_id":1379730,"accept_rate":52,"display_name":"Jason"},"score":1,"creation_date":1677519368,"post_id":75583759,"comment_id":133349843,"body_markdown":"Turns out I was using lombok.Value instead of org.springframework.beans.factory.annotation.Value, and this _is_ possible with the correct annotation! Thank you.","body":"Turns out I was using lombok.Value instead of org.springframework.beans.factory.annotation.Value, and this <i>is</i> possible with the correct annotation! Thank you."}],"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677519388,"creation_date":1677519294,"answer_id":75583759,"question_id":75581080,"body_markdown":"It does not necessary to define the `initialRevenue` in the `application.properties`. Just directly specify the value in `@Value` without `#{}` , it will automatically convert it to the correct data type : \r\n\r\n``` java\r\n@Service\r\npublic class DealershipServiceImpl implements DealershipService {\r\n\r\n  private long totalRevenue;\r\n  private final CarRepository carRepository;\r\n\r\n  @Autowired\r\n  public DealershipServiceImpl(@Value(&quot;1000000&quot;)Long initialRevenue, CarRepository carRepository) {\r\n    this.totalRevenue = initialRevenue;\r\n    this.carRepository = carRepository;\r\n  }\r\n\r\n}\r\n\r\n```\r\n","title":"Autowiring a Long in my @Service class&#39;s constructor","body":"<p>It does not necessary to define the <code>initialRevenue</code> in the <code>application.properties</code>. Just directly specify the value in <code>@Value</code> without <code>#{}</code> , it will automatically convert it to the correct data type :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class DealershipServiceImpl implements DealershipService {\n\n  private long totalRevenue;\n  private final CarRepository carRepository;\n\n  @Autowired\n  public DealershipServiceImpl(@Value(&quot;1000000&quot;)Long initialRevenue, CarRepository carRepository) {\n    this.totalRevenue = initialRevenue;\n    this.carRepository = carRepository;\n  }\n\n}\n\n</code></pre>\n"}],"owner":{"account_id":1447743,"reputation":2678,"user_id":1379730,"accept_rate":52,"display_name":"Jason"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75583503,"answer_count":2,"score":0,"last_activity_date":1677519467,"creation_date":1677504398,"question_id":75581080,"body_markdown":"Very new to Spring. I want to create a service class that represents a car dealership. Among others, car dealerships have revenue. For that reason, I have a `long` field called `totalRevenue` that I&#39;d like to be instantiating my dealerships with. I have a separate `@Repository`- annotated class for my repository. This is a snippet of what I have so far:\r\n\r\n```java\r\n@Slf4j\r\n@Data\r\n@Service\r\npublic class DealershipServiceImpl implements DealershipService {\r\n\r\n  private long totalRevenue;\r\n  private final CarRepository carRepository;\r\n\r\n  public DealershipServiceImpl(@Value(&quot;#{ 1000000L }&quot;)Long initialRevenue, CarRepository carRepository) {\r\n    this.totalRevenue = initialRevenue;\r\n    this.carRepository = carRepository;\r\n  }\r\n.\r\n.\r\n.\r\n```\r\n\r\nI am using the `@Value` annotation based on the information of `[this (rather old) post][1]`. However, IntelliJ seems to not like it. Hovering over the variable reads &quot;Could not autowire...&quot; as you can see:\r\n\r\n[![Hovering over the argument.][1]][1]\r\n\r\n\r\nwhereas it seems to also not like my use of `@Value`:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nHow can I inject a default value in my constructor? I would like for that `Long` field to be provided at the constructor so that I can effectively test the class from a Junit test.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/F3SFd.png\r\n  [2]: https://i.stack.imgur.com/P1EAQ.png","title":"Autowiring a Long in my @Service class&#39;s constructor","body":"<p>Very new to Spring. I want to create a service class that represents a car dealership. Among others, car dealerships have revenue. For that reason, I have a <code>long</code> field called <code>totalRevenue</code> that I'd like to be instantiating my dealerships with. I have a separate <code>@Repository</code>- annotated class for my repository. This is a snippet of what I have so far:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Data\n@Service\npublic class DealershipServiceImpl implements DealershipService {\n\n  private long totalRevenue;\n  private final CarRepository carRepository;\n\n  public DealershipServiceImpl(@Value(&quot;#{ 1000000L }&quot;)Long initialRevenue, CarRepository carRepository) {\n    this.totalRevenue = initialRevenue;\n    this.carRepository = carRepository;\n  }\n.\n.\n.\n</code></pre>\n<p>I am using the <code>@Value</code> annotation based on the information of <code>[this (rather old) post][1]</code>. However, IntelliJ seems to not like it. Hovering over the variable reads &quot;Could not autowire...&quot; as you can see:</p>\n<p><a href=\"https://i.stack.imgur.com/F3SFd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F3SFd.png\" alt=\"Hovering over the argument.\" /></a></p>\n<p>whereas it seems to also not like my use of <code>@Value</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/P1EAQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P1EAQ.png\" alt=\"enter image description here\" /></a></p>\n<p>How can I inject a default value in my constructor? I would like for that <code>Long</code> field to be provided at the constructor so that I can effectively test the class from a Junit test.</p>\n"},{"tags":["java","java-11","javaagents"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":6,"creation_date":1561647267,"post_id":56787777,"comment_id":100142056,"body_markdown":"Where does that linked discussion say that `-Djdk.attach.allowAttachSelf=true` will not work anymore under JDK11?","body":"Where does that linked discussion say that <code>-Djdk.attach.allowAttachSelf=true</code> will not work anymore under JDK11?"},{"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"score":1,"creation_date":1561708652,"post_id":56787777,"comment_id":100160373,"body_markdown":"You need to setup the property on VM startup, not during runtime, otherwise it is ignored. Otherwise, have a look at byte-buddy-agent which can work around the restriction.","body":"You need to setup the property on VM startup, not during runtime, otherwise it is ignored. Otherwise, have a look at byte-buddy-agent which can work around the restriction."},{"owner":{"account_id":7656771,"reputation":780,"user_id":5874459,"accept_rate":69,"display_name":"Vivek Shankar"},"score":0,"creation_date":1561813118,"post_id":56787777,"comment_id":100188673,"body_markdown":"@Holger It doesn&#39;t. But how can I set the parameter during one of the test cases run which is trying to attach the agent to a JVM, IIUC, which was created by Maven.","body":"@Holger It doesn&#39;t. But how can I set the parameter during one of the test cases run which is trying to attach the agent to a JVM, IIUC, which was created by Maven."},{"owner":{"account_id":7656771,"reputation":780,"user_id":5874459,"accept_rate":69,"display_name":"Vivek Shankar"},"score":0,"creation_date":1561813282,"post_id":56787777,"comment_id":100188708,"body_markdown":"@RafaelWinterhalter I&#39;m not sure I follow, how can I set the property from a test case before the VM startup?\nAnd yes, I am looking at byte-buddy-agent code and trying to do the attach from a helper process. Being the rookie that I am, haven&#39;t managed to get it working yet.","body":"@RafaelWinterhalter I&#39;m not sure I follow, how can I set the property from a test case before the VM startup? And yes, I am looking at byte-buddy-agent code and trying to do the attach from a helper process. Being the rookie that I am, haven&#39;t managed to get it working yet."},{"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"score":2,"creation_date":1561833390,"post_id":56787777,"comment_id":100192898,"body_markdown":"You cannot, you need to boot up the VM with that property set, otherwise, the restriction would be pointless. byte-buddy-agent only requires you to call install to get hold of the instrumentation instance. If it&#39;s not working, let me know where you are stuck.","body":"You cannot, you need to boot up the VM with that property set, otherwise, the restriction would be pointless. byte-buddy-agent only requires you to call install to get hold of the instrumentation instance. If it&#39;s not working, let me know where you are stuck."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1595073342,"post_id":56787777,"comment_id":111352038,"body_markdown":"Also an option: Start a new process that does the attach to the current VM.","body":"Also an option: Start a new process that does the attach to the current VM."},{"owner":{"account_id":7656771,"reputation":780,"user_id":5874459,"accept_rate":69,"display_name":"Vivek Shankar"},"score":0,"creation_date":1596682785,"post_id":56787777,"comment_id":111891438,"body_markdown":"@JohannesKuhn yeah, you&#39;re right that&#39;s how bytebuddy did it.","body":"@JohannesKuhn yeah, you&#39;re right that&#39;s how bytebuddy did it."}],"answers":[{"comments":[{"owner":{"account_id":6063379,"reputation":529,"user_id":4734545,"display_name":"setiabb"},"score":1,"creation_date":1580129706,"post_id":59574298,"comment_id":105985053,"body_markdown":"It did not help in my case.","body":"It did not help in my case."},{"owner":{"account_id":9462062,"reputation":87,"user_id":7035536,"display_name":"Mansingh Kachhi"},"score":0,"creation_date":1598955408,"post_id":59574298,"comment_id":112617377,"body_markdown":"This fix is not working for me, any help would be appreciated! I am facing same issue with  OpenJDK11","body":"This fix is not working for me, any help would be appreciated! I am facing same issue with  OpenJDK11"},{"owner":{"account_id":7656771,"reputation":780,"user_id":5874459,"accept_rate":69,"display_name":"Vivek Shankar"},"score":0,"creation_date":1599030199,"post_id":59574298,"comment_id":112643106,"body_markdown":"@MansinghPatel I&#39;ll try to help but you&#39;ll need to share more details about what you&#39;re trying to do if it&#39;s extensive and different from my scenario perhaps post a new question.","body":"@MansinghPatel I&#39;ll try to help but you&#39;ll need to share more details about what you&#39;re trying to do if it&#39;s extensive and different from my scenario perhaps post a new question."},{"owner":{"account_id":9462062,"reputation":87,"user_id":7035536,"display_name":"Mansingh Kachhi"},"score":0,"creation_date":1599128651,"post_id":59574298,"comment_id":112680583,"body_markdown":"Thanks @Shanky, fortunately I got the fix by adding javaagent","body":"Thanks @Shanky, fortunately I got the fix by adding javaagent"},{"owner":{"account_id":1710753,"reputation":993,"user_id":1568881,"accept_rate":40,"display_name":"Aguid"},"score":0,"creation_date":1624536913,"post_id":59574298,"comment_id":120389436,"body_markdown":"@MansinghPatel can you please provide more details how it was resolved by adding javaagent ?","body":"@MansinghPatel can you please provide more details how it was resolved by adding javaagent ?"},{"owner":{"account_id":7656771,"reputation":780,"user_id":5874459,"accept_rate":69,"display_name":"Vivek Shankar"},"score":0,"creation_date":1625142576,"post_id":59574298,"comment_id":120552470,"body_markdown":"@Aguid Just check his answer below - https://stackoverflow.com/a/63721745/5874459","body":"@Aguid Just check his answer below - <a href=\"https://stackoverflow.com/a/63721745/5874459\">stackoverflow.com/a/63721745/5874459</a>"}],"tags":[],"owner":{"account_id":7656771,"reputation":780,"user_id":5874459,"accept_rate":69,"display_name":"Vivek Shankar"},"comment_count":6,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1578033999,"creation_date":1578033999,"answer_id":59574298,"question_id":56787777,"body_markdown":"I&#39;m not sure if this would help everyone, but in my case, it was a test case that tested whether the agent attaches to the JDK correctly(it won&#39;t be a self attach when the agent actually attaches to a JDK, i.e., actual runtime not a testcase).\r\n\r\nBased on the suggestion by @Holger, in the comments, I modified my maven-failsafe-plugin to allow self attach.\r\n\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.22.2&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;integration-test&lt;/goal&gt;\r\n                            &lt;goal&gt;verify&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;argLine&gt;-Djdk.attach.allowAttachSelf=true&lt;/argLine&gt;\r\n                            &lt;forkMode&gt;once&lt;/forkMode&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;","title":"VirtualMachine.attach(pid) fails with java.io.IOException: Can not attach to current VM","body":"<p>I'm not sure if this would help everyone, but in my case, it was a test case that tested whether the agent attaches to the JDK correctly(it won't be a self attach when the agent actually attaches to a JDK, i.e., actual runtime not a testcase).</p>\n\n<p>Based on the suggestion by @Holger, in the comments, I modified my maven-failsafe-plugin to allow self attach.</p>\n\n<pre><code>        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.22.2&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;integration-test&lt;/goal&gt;\n                        &lt;goal&gt;verify&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;argLine&gt;-Djdk.attach.allowAttachSelf=true&lt;/argLine&gt;\n                        &lt;forkMode&gt;once&lt;/forkMode&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4673230,"reputation":347,"user_id":3784477,"display_name":"daveca"},"score":0,"creation_date":1639684885,"post_id":62963960,"comment_id":124418905,"body_markdown":"We launch a VM from within our application. I can attest that adding -Djdk.attach.allowAttachSelf=true to the VM args does allow it to attach and I can get a remote data dump. We use this to find the OS thread ids for each of our java threads so we can tell what thread is running away.","body":"We launch a VM from within our application. I can attest that adding -Djdk.attach.allowAttachSelf=true to the VM args does allow it to attach and I can get a remote data dump. We use this to find the OS thread ids for each of our java threads so we can tell what thread is running away."},{"owner":{"account_id":411863,"reputation":7400,"user_id":784594,"display_name":"OndroMih"},"score":0,"creation_date":1669661299,"post_id":62963960,"comment_id":131688471,"body_markdown":"The OpenJDK issue &quot;JDK-8180425 : Release Note: Attach API cannot be used to attach to the current VM by default&quot; has been moved to https://bugs.openjdk.org/browse/JDK-8180425","body":"The OpenJDK issue &quot;JDK-8180425 : Release Note: Attach API cannot be used to attach to the current VM by default&quot; has been moved to <a href=\"https://bugs.openjdk.org/browse/JDK-8180425\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8180425</a>"}],"tags":[],"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1595038721,"creation_date":1595038721,"answer_id":62963960,"question_id":56787777,"body_markdown":"See [JDK-8180425 : Release Note: Attach API cannot be used to attach to the current VM by default][jdk]:\r\n\r\n&gt; The implementation of Attach API has changed in JDK 9 to disallow attaching to the current VM by default. This change should have no impact on tools that use the Attach API to attach to a running VM. It may impact libraries that mis-use this API as a way to get at the `java.lang.instrument` API. The system property `jdk.attach.allowAttachSelf` may be set on the command line to mitigate any compatibility with this change.\r\n\r\n[jdk]: https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8180425","title":"VirtualMachine.attach(pid) fails with java.io.IOException: Can not attach to current VM","body":"<p>See <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8180425\" rel=\"noreferrer\">JDK-8180425 : Release Note: Attach API cannot be used to attach to the current VM by default</a>:</p>\n<blockquote>\n<p>The implementation of Attach API has changed in JDK 9 to disallow attaching to the current VM by default. This change should have no impact on tools that use the Attach API to attach to a running VM. It may impact libraries that mis-use this API as a way to get at the <code>java.lang.instrument</code> API. The system property <code>jdk.attach.allowAttachSelf</code> may be set on the command line to mitigate any compatibility with this change.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":9462062,"reputation":87,"user_id":7035536,"display_name":"Mansingh Kachhi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599128903,"creation_date":1599128903,"answer_id":63721745,"question_id":56787777,"body_markdown":"This worked for me by adding javaagent in maven-surefire-plugin\r\n\r\n \r\n\r\n    &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;${maven-surefire-plugin.version}&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;!-- Centralize test reports in parent project --&gt;\r\n              &lt;reportsDirectory&gt;${basedir}/../target/surefire-reports&lt;/reportsDirectory&gt;\r\n              &lt;!-- Sets the VM argument line used for Jacoco when unit tests are run. --&gt;\r\n              &lt;argLine&gt;\r\n                 -javaagent:${settings.localRepository}/org/jmockit/jmockit/${jmockit.version}/jmockit-${jmockit.version}.jar ${surefireArgLine}\r\n              &lt;/argLine&gt;\r\n            &lt;/configuration&gt; \r\n    &lt;/plugin&gt;","title":"VirtualMachine.attach(pid) fails with java.io.IOException: Can not attach to current VM","body":"<p>This worked for me by adding javaagent in maven-surefire-plugin</p>\n<pre><code>&lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${maven-surefire-plugin.version}&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;!-- Centralize test reports in parent project --&gt;\n          &lt;reportsDirectory&gt;${basedir}/../target/surefire-reports&lt;/reportsDirectory&gt;\n          &lt;!-- Sets the VM argument line used for Jacoco when unit tests are run. --&gt;\n          &lt;argLine&gt;\n             -javaagent:${settings.localRepository}/org/jmockit/jmockit/${jmockit.version}/jmockit-${jmockit.version}.jar ${surefireArgLine}\n          &lt;/argLine&gt;\n        &lt;/configuration&gt; \n&lt;/plugin&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1190593,"reputation":710,"user_id":1163490,"accept_rate":44,"display_name":"divs1210"},"score":0,"creation_date":1670280363,"post_id":74391795,"comment_id":131835744,"body_markdown":"Worked for me when I got this error with clj-async-profiler, thanks!","body":"Worked for me when I got this error with clj-async-profiler, thanks!"}],"tags":[],"owner":{"account_id":21036436,"reputation":21,"user_id":15459787,"display_name":"SolarisNeko"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1668095479,"creation_date":1668095479,"answer_id":74391795,"question_id":56787777,"body_markdown":"@SolarisNeko\r\n\r\nuse JVM args: \r\n-Djdk.attach.allowAttachSelf=true\r\n\r\nyou can resolve it.","title":"VirtualMachine.attach(pid) fails with java.io.IOException: Can not attach to current VM","body":"<p>@SolarisNeko</p>\n<p>use JVM args:\n-Djdk.attach.allowAttachSelf=true</p>\n<p>you can resolve it.</p>\n"},{"tags":[],"owner":{"account_id":1946027,"reputation":617,"user_id":1751166,"display_name":"PravyNandas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677519449,"creation_date":1677519449,"answer_id":75583788,"question_id":56787777,"body_markdown":"In my case, I was compiling my android project with below setting while the compiler is set to Jdk11 (azul zulu). Changing the JDK to jdk1.8 fixed the issue.\r\n\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ceGTH.png","title":"VirtualMachine.attach(pid) fails with java.io.IOException: Can not attach to current VM","body":"<p>In my case, I was compiling my android project with below setting while the compiler is set to Jdk11 (azul zulu). Changing the JDK to jdk1.8 fixed the issue.</p>\n<pre><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ceGTH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ceGTH.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":7656771,"reputation":780,"user_id":5874459,"accept_rate":69,"display_name":"Vivek Shankar"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18189,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":59574298,"answer_count":5,"score":11,"last_activity_date":1677519449,"creation_date":1561626980,"question_id":56787777,"body_markdown":"After going through [this](http://jigsaw-dev.1059479.n5.nabble.com/Disallowing-the-dynamic-loading-of-agents-by-default-revised-td5716181i20.html) discussion, I&#39;m led to believe the option to attach to the same VM, by default has been disabled in OpenJDK11.\r\n\r\nI&#39;m trying to upgrade a java agent to OpenJDK11, during the test cases when `VirtualMachine.attach(pid)` is called I see it failing with below error. What is the correct way to deal with this situation?\r\n\r\nComplete stack trace:\r\n\r\n    java.io.IOException: Can not attach to current VM\r\n\r\n\tat jdk.attach/sun.tools.attach.HotSpotVirtualMachine.&lt;init&gt;(HotSpotVirtualMachine.java:75)\r\n\tat jdk.attach/sun.tools.attach.VirtualMachineImpl.&lt;init&gt;(VirtualMachineImpl.java:48)\r\n\tat jdk.attach/sun.tools.attach.AttachProviderImpl.attachVirtualMachine(AttachProviderImpl.java:69)\r\n\tat jdk.attach/com.sun.tools.attach.VirtualMachine.attach(VirtualMachine.java:207)\r\n\tat org.kantega.notsoserial.WithAgentIT.attachAgent(WithAgentIT.java:76)\r\n\tat org.kantega.notsoserial.WithAgentIT.attackShouldBePreventedWithAgent(WithAgentIT.java:47)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\r\n\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\n","title":"VirtualMachine.attach(pid) fails with java.io.IOException: Can not attach to current VM","body":"<p>After going through <a href=\"http://jigsaw-dev.1059479.n5.nabble.com/Disallowing-the-dynamic-loading-of-agents-by-default-revised-td5716181i20.html\" rel=\"noreferrer\">this</a> discussion, I'm led to believe the option to attach to the same VM, by default has been disabled in OpenJDK11.</p>\n\n<p>I'm trying to upgrade a java agent to OpenJDK11, during the test cases when <code>VirtualMachine.attach(pid)</code> is called I see it failing with below error. What is the correct way to deal with this situation?</p>\n\n<p>Complete stack trace:</p>\n\n<pre><code>java.io.IOException: Can not attach to current VM\n\nat jdk.attach/sun.tools.attach.HotSpotVirtualMachine.&lt;init&gt;(HotSpotVirtualMachine.java:75)\nat jdk.attach/sun.tools.attach.VirtualMachineImpl.&lt;init&gt;(VirtualMachineImpl.java:48)\nat jdk.attach/sun.tools.attach.AttachProviderImpl.attachVirtualMachine(AttachProviderImpl.java:69)\nat jdk.attach/com.sun.tools.attach.VirtualMachine.attach(VirtualMachine.java:207)\nat org.kantega.notsoserial.WithAgentIT.attachAgent(WithAgentIT.java:76)\nat org.kantega.notsoserial.WithAgentIT.attackShouldBePreventedWithAgent(WithAgentIT.java:47)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)\nat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\nat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\nat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\nat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\nat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\nat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\nat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\nat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\nat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\nat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\n</code></pre>\n"},{"tags":["java","maven","maven-checkstyle-plugin"],"comments":[{"owner":{"account_id":16426356,"reputation":1936,"user_id":11866308,"display_name":"Allen D. Ball"},"score":0,"creation_date":1597071641,"post_id":63342233,"comment_id":112006802,"body_markdown":"Does it work if you run `mvn package verify`?","body":"Does it work if you run <code>mvn package verify</code>?"},{"owner":{"account_id":17060772,"reputation":33,"user_id":12344265,"display_name":"Lucas Hagen"},"score":0,"creation_date":1597073736,"post_id":63342233,"comment_id":112007866,"body_markdown":"Also doesn&#39;t work :(","body":"Also doesn&#39;t work :("},{"owner":{"account_id":16426356,"reputation":1936,"user_id":11866308,"display_name":"Allen D. Ball"},"score":0,"creation_date":1597074475,"post_id":63342233,"comment_id":112008196,"body_markdown":"I suggested that to make sure `generate-sources` and `dependency:resolve` were being run.  I&#39;m sorry it wasn&#39;t any help.","body":"I suggested that to make sure <code>generate-sources</code> and <code>dependency:resolve</code> were being run.  I&#39;m sorry it wasn&#39;t any help."},{"owner":{"account_id":1686882,"reputation":1183,"user_id":1549977,"accept_rate":86,"display_name":"Benjamin Marwell"},"score":0,"creation_date":1632639764,"post_id":63342233,"comment_id":122543577,"body_markdown":"Did you set up your organisation&#39;s repository in either your pom.xml or settings.xml? Have you tried running Maven with `mvn -X verify`?","body":"Did you set up your organisation&#39;s repository in either your pom.xml or settings.xml? Have you tried running Maven with <code>mvn -X verify</code>?"}],"answers":[{"tags":[],"owner":{"account_id":27893165,"reputation":1,"user_id":21299078,"display_name":"konstantinben"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677519128,"creation_date":1677519128,"answer_id":75583738,"question_id":63342233,"body_markdown":"It is necessary to add in the your pom file pluginRepositories block with your repository of the checkstyle-config artifact. f.e.\r\n\r\n    &lt;pluginRepositories&gt;\r\n        &lt;pluginRepository&gt;\r\n            &lt;id&gt;myorganization-repo&lt;/id&gt;\r\n            &lt;url&gt;https://nexus.myorganization.local/repository/myorganization-repo/&lt;/url&gt;\r\n        &lt;/pluginRepository&gt;\r\n    &lt;/pluginRepositories&gt;","title":"Plugin&#39;s dependency not found in maven","body":"<p>It is necessary to add in the your pom file pluginRepositories block with your repository of the checkstyle-config artifact. f.e.</p>\n<pre><code>&lt;pluginRepositories&gt;\n    &lt;pluginRepository&gt;\n        &lt;id&gt;myorganization-repo&lt;/id&gt;\n        &lt;url&gt;https://nexus.myorganization.local/repository/myorganization-repo/&lt;/url&gt;\n    &lt;/pluginRepository&gt;\n&lt;/pluginRepositories&gt;\n</code></pre>\n"}],"owner":{"account_id":17060772,"reputation":33,"user_id":12344265,"display_name":"Lucas Hagen"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":497,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677519128,"creation_date":1597069849,"question_id":63342233,"body_markdown":"I&#39;m trying to centralize my Java&#39;s Checkstyle configuration by using the following plugin configuration in my pom.xml:\r\n\r\n```xml\r\n&lt;!-- Checkstyle Plugin --&gt;\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.1.1&lt;/version&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;me.myorganization&lt;/groupId&gt;\r\n            &lt;artifactId&gt;checkstyle-config&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;configuration&gt;\r\n        &lt;configLocation&gt;checkstyle.xml&lt;/configLocation&gt;\r\n        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n        &lt;consoleOutput&gt;true&lt;/consoleOutput&gt;\r\n        &lt;failsOnError&gt;true&lt;/failsOnError&gt;\r\n        &lt;failOnViolation&gt;true&lt;/failOnViolation&gt;\r\n        &lt;linkXRef&gt;false&lt;/linkXRef&gt;\r\n    &lt;/configuration&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;verify&lt;/id&gt;\r\n            &lt;phase&gt;verify&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;check&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nThe checkstyle-config dependency is a simple maven project with the checkstyle.xml config as a resource, but the problem is that this project is in a custom/private repository, and if it is not locally cached, it doesn&#39;t work. If I go to my checkstyle-config project and run `mvn install`, it works as it should, but if I clear the cache and run `mvn verify` in my main project, the config dependency is not resolved.\r\n\r\nAny ideas?\r\n\r\nObs1: I created another test project and added my config project as a dependency (without using the checkstyle plugin) and it is resolved and downloaded.\r\n\r\nObs2: me.myorganization is just a placeholder to protect the original one.\r\n\r\nObs3: I have already tried adding the dependency in both places, in the plugin&#39;s dependencies and in the normal pom dependencies, and it still doesn&#39;t work.\r\n\r\nThank you\r\n","title":"Plugin&#39;s dependency not found in maven","body":"<p>I'm trying to centralize my Java's Checkstyle configuration by using the following plugin configuration in my pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- Checkstyle Plugin --&gt;\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.1.1&lt;/version&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;me.myorganization&lt;/groupId&gt;\n            &lt;artifactId&gt;checkstyle-config&lt;/artifactId&gt;\n            &lt;version&gt;1.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;configuration&gt;\n        &lt;configLocation&gt;checkstyle.xml&lt;/configLocation&gt;\n        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n        &lt;consoleOutput&gt;true&lt;/consoleOutput&gt;\n        &lt;failsOnError&gt;true&lt;/failsOnError&gt;\n        &lt;failOnViolation&gt;true&lt;/failOnViolation&gt;\n        &lt;linkXRef&gt;false&lt;/linkXRef&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;verify&lt;/id&gt;\n            &lt;phase&gt;verify&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;check&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>The checkstyle-config dependency is a simple maven project with the checkstyle.xml config as a resource, but the problem is that this project is in a custom/private repository, and if it is not locally cached, it doesn't work. If I go to my checkstyle-config project and run <code>mvn install</code>, it works as it should, but if I clear the cache and run <code>mvn verify</code> in my main project, the config dependency is not resolved.</p>\n<p>Any ideas?</p>\n<p>Obs1: I created another test project and added my config project as a dependency (without using the checkstyle plugin) and it is resolved and downloaded.</p>\n<p>Obs2: me.myorganization is just a placeholder to protect the original one.</p>\n<p>Obs3: I have already tried adding the dependency in both places, in the plugin's dependencies and in the normal pom dependencies, and it still doesn't work.</p>\n<p>Thank you</p>\n"},{"tags":["java","php"],"answers":[{"tags":[],"owner":{"account_id":488448,"reputation":4117,"user_id":1147744,"accept_rate":53,"display_name":"Letharion"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1380799578,"creation_date":1380799578,"answer_id":19158004,"question_id":19157823,"body_markdown":"PHP has a (badly documented) [statistics extension][1]. There&#39;s a large number of functions in there that ought to be helpful, but I don&#39;t know enough about neither statistics in general or the specific extension to say anything more helpful about it. \r\n\r\n   [1]: http://www.php.net/manual/en/book.stats.php","title":"Percentile to Z-score in PHP or JAVA","body":"<p>PHP has a (badly documented) <a href=\"http://www.php.net/manual/en/book.stats.php\" rel=\"nofollow\">statistics extension</a>. There's a large number of functions in there that ought to be helpful, but I don't know enough about neither statistics in general or the specific extension to say anything more helpful about it. </p>\n"},{"tags":[],"owner":{"account_id":15473157,"reputation":36,"user_id":11162567,"display_name":"Joshua Faulkenberry"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677518996,"creation_date":1660175783,"answer_id":73313908,"question_id":19157823,"body_markdown":"In case anyone is still looking for this (like I was)...   I translated this function from a JavaScript z-score calculator I found and it does the trick. Simply pass it a value between 0 and 1.\r\n\r\n\r\n    \r\n    function percentile_z($p) {\r\n       $a0 = 2.5066282;\r\n       $a1 = -18.6150006;\r\n       $a2 = 41.3911977;\r\n       $a3 = -25.4410605;\r\n       $b1 = -8.4735109;\r\n       $b2 = 23.0833674;\r\n       $b3 = -21.0622410;\r\n       $b4 = 3.1308291;\r\n       $c0 = -2.7871893;\r\n       $c1 = -2.2979648;\r\n       $c2 = 4.8501413;\r\n       $c3 = 2.3212128;\r\n       $d1 = 3.5438892;\r\n       $d2 = 1.6370678;\r\n          \r\n       $p = abs($p - 0.5);\r\n          \r\n       if($p &gt; 0.42) {\r\n          $r=sqrt(-log(0.5 - $p));\r\n          $z=((($c3 * $r + $c2) * $r + $c1) * $r + $c0) / (($d2 * $r + $d1) * $r + 1);\r\n       }\r\n       else {\r\n          $r = $p * $p;\r\n          $z = $p * ((($a3 * $r + $a2) * $r + $a1) * $r + $a0) / (((($b4 * $r + $b3) * $r + $b2) * $r + $b1) * $r + 1);\r\n       }\r\n       if($p &lt; 0.5) $z = -$z;\r\n       return $z;\r\n    }","title":"Percentile to Z-score in PHP or JAVA","body":"<p>In case anyone is still looking for this (like I was)...   I translated this function from a JavaScript z-score calculator I found and it does the trick. Simply pass it a value between 0 and 1.</p>\n<pre><code>function percentile_z($p) {\n   $a0 = 2.5066282;\n   $a1 = -18.6150006;\n   $a2 = 41.3911977;\n   $a3 = -25.4410605;\n   $b1 = -8.4735109;\n   $b2 = 23.0833674;\n   $b3 = -21.0622410;\n   $b4 = 3.1308291;\n   $c0 = -2.7871893;\n   $c1 = -2.2979648;\n   $c2 = 4.8501413;\n   $c3 = 2.3212128;\n   $d1 = 3.5438892;\n   $d2 = 1.6370678;\n      \n   $p = abs($p - 0.5);\n      \n   if($p &gt; 0.42) {\n      $r=sqrt(-log(0.5 - $p));\n      $z=((($c3 * $r + $c2) * $r + $c1) * $r + $c0) / (($d2 * $r + $d1) * $r + 1);\n   }\n   else {\n      $r = $p * $p;\n      $z = $p * ((($a3 * $r + $a2) * $r + $a1) * $r + $a0) / (((($b4 * $r + $b3) * $r + $b2) * $r + $b1) * $r + 1);\n   }\n   if($p &lt; 0.5) $z = -$z;\n   return $z;\n}\n</code></pre>\n"}],"owner":{"account_id":3386472,"reputation":4990,"user_id":2842342,"accept_rate":52,"display_name":"Karthik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":937,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":19158004,"answer_count":2,"score":-1,"last_activity_date":1677518996,"creation_date":1380799087,"question_id":19157823,"body_markdown":"I am searching for a way to calculate Z score(z) for a given percentile(p). I found &lt;a href=&quot;http://www.fourmilab.ch/rpkp/experiments/analysis/zCalc.html&quot;&gt; this &lt;/a&gt; site doing such a calculation. They have given a formula for calculating P(Z&lt;=z). \r\n\r\n&lt;a href=&quot;http://www.fourmilab.ch/rpkp/experiments/figures/cumnorm.png&quot;&gt;equation&lt;/a&gt; (sorry, could not post the image due to low repution)\r\n\r\n\r\n\r\nNow i have the value of P(Z&lt;=z) and i tried solving it to find out z, but it was really complex to solve for z.\r\n\r\nIs there any function in JAVA or PHP which can do this?? or is there any mathematical way in which we can solve for Z.\r\n(I am considering hard-coding the Z table as my last choice because i have to make some approximations in that case.)","title":"Percentile to Z-score in PHP or JAVA","body":"<p>I am searching for a way to calculate Z score(z) for a given percentile(p). I found <a href=\"http://www.fourmilab.ch/rpkp/experiments/analysis/zCalc.html\" rel=\"nofollow\"> this </a> site doing such a calculation. They have given a formula for calculating P(Z&lt;=z). </p>\n\n<p><a href=\"http://www.fourmilab.ch/rpkp/experiments/figures/cumnorm.png\" rel=\"nofollow\">equation</a> (sorry, could not post the image due to low repution)</p>\n\n<p>Now i have the value of P(Z&lt;=z) and i tried solving it to find out z, but it was really complex to solve for z.</p>\n\n<p>Is there any function in JAVA or PHP which can do this?? or is there any mathematical way in which we can solve for Z.\n(I am considering hard-coding the Z table as my last choice because i have to make some approximations in that case.)</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1677518277,"post_id":75583551,"comment_id":133349519,"body_markdown":"Can you share the error trace?","body":"Can you share the error trace?"},{"owner":{"account_id":3758602,"reputation":10072,"user_id":3124333,"accept_rate":100,"display_name":"SiKing"},"score":1,"creation_date":1677518551,"post_id":75583551,"comment_id":133349584,"body_markdown":"You need to provide [mcve]. From the information you provided it is not possible to suggest an answer.","body":"You need to provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. From the information you provided it is not possible to suggest an answer."},{"owner":{"account_id":7470769,"reputation":1333,"user_id":5678845,"accept_rate":100,"display_name":"Roberto Pegoraro"},"score":1,"creation_date":1677520605,"post_id":75583551,"comment_id":133350186,"body_markdown":"Why do you have semicolon in the end of the IF statement?","body":"Why do you have semicolon in the end of the IF statement?"},{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1677530208,"post_id":75583551,"comment_id":133352582,"body_markdown":"_But code is not working_: At which line are you exactly stuck? Do you see any error?","body":"<i>But code is not working</i>: At which line are you exactly stuck? Do you see any error?"},{"owner":{"account_id":27892982,"reputation":11,"user_id":21298942,"display_name":"Krrish"},"score":0,"creation_date":1677664954,"post_id":75583551,"comment_id":133380954,"body_markdown":"no any error in this code","body":"no any error in this code"},{"owner":{"account_id":27892982,"reputation":11,"user_id":21298942,"display_name":"Krrish"},"score":0,"creation_date":1677664992,"post_id":75583551,"comment_id":133380965,"body_markdown":"removed the semicolon but still not working.","body":"removed the semicolon but still not working."}],"owner":{"account_id":27892982,"reputation":11,"user_id":21298942,"display_name":"Krrish"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677518817,"creation_date":1677518143,"question_id":75583551,"body_markdown":"\tList&lt;WebElement&gt; options =driver.findElements(By.xpath(&quot;//header/div/div&quot;));\r\n\t\tfor(WebElement option :options)\r\n\t\t{\r\n\t\t\tSystem.out.println(option.getText());\r\n\t\t\tThread.sleep(2000);\r\n\t\t\t//if(((WebElement) option).getText().equalsIgnoreCase(&quot;Software course&quot;))\r\n\t\t\tif( option.getText().contentEquals(&quot;Software Testing Course in Bangla&quot;));\r\n\t\t\t{\r\n\t\t\t\t//driver.findElement(By.xpath(&quot;(//p[@class=&#39;mb-0 search-item-title&#39;])[3]&quot;)).click();\r\n\t\t\t\toption.click();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\nI am trying to click on particular option. But code is not working.","title":"Selected option is not getting click by selenium code","body":"<pre><code>List&lt;WebElement&gt; options =driver.findElements(By.xpath(&quot;//header/div/div&quot;));\n    for(WebElement option :options)\n    {\n        System.out.println(option.getText());\n        Thread.sleep(2000);\n        //if(((WebElement) option).getText().equalsIgnoreCase(&quot;Software course&quot;))\n        if( option.getText().contentEquals(&quot;Software Testing Course in Bangla&quot;));\n        {\n            //driver.findElement(By.xpath(&quot;(//p[@class='mb-0 search-item-title'])[3]&quot;)).click();\n            option.click();\n            break;\n        }\n</code></pre>\n<p>I am trying to click on particular option. But code is not working.</p>\n"},{"tags":["java","hibernate","jpa","spring-boot","flyway"],"comments":[{"owner":{"account_id":389224,"reputation":1742,"user_id":748560,"display_name":"JamieB"},"score":0,"creation_date":1459929518,"post_id":35984401,"comment_id":60503261,"body_markdown":"Some relevant discussions here; http://stackoverflow.com/questions/18536256/combine-hibernates-automatic-schema-creation-and-database-versioning","body":"Some relevant discussions here; <a href=\"http://stackoverflow.com/questions/18536256/combine-hibernates-automatic-schema-creation-and-database-versioning\" title=\"combine hibernates automatic schema creation and database versioning\">stackoverflow.com/questions/18536256/&hellip;</a>"},{"owner":{"account_id":119737,"reputation":29617,"user_id":311660,"accept_rate":92,"display_name":"ocodo"},"score":0,"creation_date":1459929913,"post_id":35984401,"comment_id":60503503,"body_markdown":"Thank you @JamieB, we ended up just dealing with it as a chore.  Crafting the SQL for each migration by hand.  Still evaluation between flyway and maybe Liquibase.","body":"Thank you @JamieB, we ended up just dealing with it as a chore.  Crafting the SQL for each migration by hand.  Still evaluation between flyway and maybe Liquibase."}],"answers":[{"comments":[{"owner":{"account_id":119737,"reputation":29617,"user_id":311660,"accept_rate":92,"display_name":"ocodo"},"score":0,"creation_date":1541845769,"post_id":53177587,"comment_id":93362155,"body_markdown":"Thanks this is a what I ended up doing.  Honestly I&#39;d forgotten about this question.","body":"Thanks this is a what I ended up doing.  Honestly I&#39;d forgotten about this question."}],"tags":[],"owner":{"account_id":7960065,"reputation":281,"user_id":6008156,"display_name":"danzdoran"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1541527793,"creation_date":1541527793,"answer_id":53177587,"question_id":35984401,"body_markdown":"Flyway doesn&#39;t have built-in support for diff, I use liquidbase within a maven spring boot project and changelogs can be created from JPA/hibernate changes by using:\r\n\r\n    mvn liquibase:diff\r\n\r\nAll of the options for liquibase diff are located here: \r\nhttp://www.liquibase.org/documentation/maven/maven_diff.html","title":"Automatic generation of migration SQL for Flyway","body":"<p>Flyway doesn't have built-in support for diff, I use liquidbase within a maven spring boot project and changelogs can be created from JPA/hibernate changes by using:</p>\n\n<pre><code>mvn liquibase:diff\n</code></pre>\n\n<p>All of the options for liquibase diff are located here: \n<a href=\"http://www.liquibase.org/documentation/maven/maven_diff.html\" rel=\"noreferrer\">http://www.liquibase.org/documentation/maven/maven_diff.html</a></p>\n"},{"comments":[{"owner":{"account_id":943775,"reputation":7895,"user_id":1306394,"accept_rate":75,"display_name":"shashwat"},"score":0,"creation_date":1684465578,"post_id":67935661,"comment_id":134524814,"body_markdown":"plus one! which tool do you use for GIF screen recording?","body":"plus one! which tool do you use for GIF screen recording?"}],"tags":[],"owner":{"account_id":15676706,"reputation":535,"user_id":12273952,"display_name":"Andrey Oganesyan"},"comment_count":1,"down_vote_count":2,"up_vote_count":19,"is_accepted":false,"score":17,"last_activity_date":1623408455,"creation_date":1623408455,"answer_id":67935661,"question_id":35984401,"body_markdown":"If your IDE of choice is IntelliJ IDEA, I&#39;d recommend using the [JPA Buddy][1] plugin to do this. It can generate Flyway migrations by comparing your Java model to the target DB.\r\n\r\nYou can use it to keep your evolving model and your SQL scripts in sync.\r\nAlso, it can create the init script if your DB is empty.\r\n\r\nOnce you have it installed and have Flyway as your Maven/Gradle dependency, you can generate a migration like this: \r\n[![Generating Flyway migration with JPA Buddy][2]][2]\r\n\r\n\r\n  [1]: https://plugins.jetbrains.com/plugin/15075-jpa-buddy\r\n  [2]: https://i.stack.imgur.com/suJ2m.gif","title":"Automatic generation of migration SQL for Flyway","body":"<p>If your IDE of choice is IntelliJ IDEA, I'd recommend using the <a href=\"https://plugins.jetbrains.com/plugin/15075-jpa-buddy\" rel=\"noreferrer\">JPA Buddy</a> plugin to do this. It can generate Flyway migrations by comparing your Java model to the target DB.</p>\n<p>You can use it to keep your evolving model and your SQL scripts in sync.\nAlso, it can create the init script if your DB is empty.</p>\n<p>Once you have it installed and have Flyway as your Maven/Gradle dependency, you can generate a migration like this:\n<a href=\"https://i.stack.imgur.com/suJ2m.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/suJ2m.gif\" alt=\"Generating Flyway migration with JPA Buddy\" /></a></p>\n"},{"tags":[],"owner":{"account_id":345995,"reputation":6762,"user_id":679240,"accept_rate":61,"display_name":"Haroldo_OK"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1664201812,"creation_date":1664200195,"answer_id":73855162,"question_id":35984401,"body_markdown":"If you want to generate the update SQL automatically, you can ask Hibernate to do so; just add the lines below to your Spring Boot configuration:\r\n\r\n```ini\r\nspring.jpa.properties.javax.persistence.schema-generation.create-source=metadata\r\nspring.jpa.properties.javax.persistence.schema-generation.scripts.action=update\r\nspring.jpa.properties.javax.persistence.schema-generation.scripts.create-target=update.sql\r\n```\r\n\r\nWhen you execute the application, this will generate a file named `update.sql` on the root of your project. Now, you can just copy and paste them into your Flyway migration.\r\n\r\nThis was adapted from this other answer: https://stackoverflow.com/a/36966419/679240 ; it is basically the same logic, except that one wants to generate a database creation script, while I needed an update script, instead.\r\n\r\nBTW, if you want to replace the names of the foreign keys on the script with more readable ones, you could use this regex: `^(alter table .*?)(\\w+)(\\s+add constraint )\\w+( foreign key \\()(.*?)(\\).*)` with this replacement: `$1$2$3fk_$2__$5$4$5$6`; this will change the names of the FKs in the script to `fk_name_of_the_table__name_of_the_field`.","title":"Automatic generation of migration SQL for Flyway","body":"<p>If you want to generate the update SQL automatically, you can ask Hibernate to do so; just add the lines below to your Spring Boot configuration:</p>\n<pre class=\"lang-ini prettyprint-override\"><code>spring.jpa.properties.javax.persistence.schema-generation.create-source=metadata\nspring.jpa.properties.javax.persistence.schema-generation.scripts.action=update\nspring.jpa.properties.javax.persistence.schema-generation.scripts.create-target=update.sql\n</code></pre>\n<p>When you execute the application, this will generate a file named <code>update.sql</code> on the root of your project. Now, you can just copy and paste them into your Flyway migration.</p>\n<p>This was adapted from this other answer: <a href=\"https://stackoverflow.com/a/36966419/679240\">https://stackoverflow.com/a/36966419/679240</a> ; it is basically the same logic, except that one wants to generate a database creation script, while I needed an update script, instead.</p>\n<p>BTW, if you want to replace the names of the foreign keys on the script with more readable ones, you could use this regex: <code>^(alter table .*?)(\\w+)(\\s+add constraint )\\w+( foreign key \\()(.*?)(\\).*)</code> with this replacement: <code>$1$2$3fk_$2__$5$4$5$6</code>; this will change the names of the FKs in the script to <code>fk_name_of_the_table__name_of_the_field</code>.</p>\n"}],"owner":{"account_id":119737,"reputation":29617,"user_id":311660,"accept_rate":92,"display_name":"ocodo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14558,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":53177587,"answer_count":3,"score":27,"last_activity_date":1677518627,"creation_date":1457949574,"question_id":35984401,"body_markdown":"Is it possible for new Flyway migrations to be generated by JPA/Hibernate&#39;s automatic schema generation when a new model / field etc. are added via Java code.\r\n\r\nIt would be useful to capture the auto-generated SQL and save it directly to a new Flyway migration, for review / editing / committing to a project repository.\r\n\r\nThank you in advance for any assistance or enlightenment you can offer.","title":"Automatic generation of migration SQL for Flyway","body":"<p>Is it possible for new Flyway migrations to be generated by JPA/Hibernate's automatic schema generation when a new model / field etc. are added via Java code.</p>\n\n<p>It would be useful to capture the auto-generated SQL and save it directly to a new Flyway migration, for review / editing / committing to a project repository.</p>\n\n<p>Thank you in advance for any assistance or enlightenment you can offer.</p>\n"},{"tags":["java","apache-kafka","kafka-consumer-api"],"owner":{"account_id":96971,"reputation":1719,"user_id":263306,"accept_rate":46,"display_name":"Gabriel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677518488,"creation_date":1677518488,"question_id":75583623,"body_markdown":"Given a handle to a kafka consumer object, is there anyway to check if a LeaveGroup message has been sent due to poll timeout?\r\n\r\nI&#39;d like to check this in a kubernetes health check.","title":"Detect LeaveGroup sent by kafka consumer","body":"<p>Given a handle to a kafka consumer object, is there anyway to check if a LeaveGroup message has been sent due to poll timeout?</p>\n<p>I'd like to check this in a kubernetes health check.</p>\n"},{"tags":["java","debugging","jboss","intellij-idea"],"answers":[{"comments":[{"owner":{"account_id":19971,"reputation":55479,"user_id":47281,"accept_rate":83,"display_name":"Marcus Leon"},"score":0,"creation_date":1265234303,"post_id":2195731,"comment_id":2145095,"body_markdown":"Thanks.  Can you elaborate on this optimization process?","body":"Thanks.  Can you elaborate on this optimization process?"},{"owner":{"account_id":78982,"reputation":59009,"user_id":224346,"display_name":"Anon."},"score":14,"creation_date":1265234520,"post_id":2195731,"comment_id":2145134,"body_markdown":"Most virtual machines don&#39;t read a bytecode, execute the equivalent instruction, and repeat. That&#39;s just way too slow. What they instead do is take the bytecode as a whole, convert it into equivalent native code, and then execute the native code. If you&#39;re running under a debugger (and thus saying that you might step over it at some point), you&#39;re placing some pretty hefty constraints on what can actually be done.","body":"Most virtual machines don&#39;t read a bytecode, execute the equivalent instruction, and repeat. That&#39;s just way too slow. What they instead do is take the bytecode as a whole, convert it into equivalent native code, and then execute the native code. If you&#39;re running under a debugger (and thus saying that you might step over it at some point), you&#39;re placing some pretty hefty constraints on what can actually be done."}],"tags":[],"owner":{"account_id":78982,"reputation":59009,"user_id":224346,"display_name":"Anon."},"comment_count":2,"down_vote_count":0,"up_vote_count":44,"is_accepted":true,"score":44,"last_activity_date":1265233760,"creation_date":1265233760,"answer_id":2195731,"question_id":2195720,"body_markdown":"&gt; Some CPU intensive routines get dramatically slower when run through a debugger. Why is this?\r\n\r\nBecause the JITter won&#39;t optimize code as much (often, not at all) when debugging is enabled.","title":"Why does Java code slow down in debugger?","body":"<blockquote>\n  <p>Some CPU intensive routines get dramatically slower when run through a debugger. Why is this?</p>\n</blockquote>\n\n<p>Because the JITter won't optimize code as much (often, not at all) when debugging is enabled.</p>\n"},{"comments":[{"owner":{"account_id":43453,"reputation":16185,"user_id":127035,"accept_rate":71,"display_name":"ewan.chalmers"},"score":3,"creation_date":1306147331,"post_id":2195825,"comment_id":7066035,"body_markdown":"Thanks so much for this. I was losing loads of time because, and couldn&#39;t figure out why, my remote debug sessions on a process which had been performing fine for many iterations started to run consistently slow. I never thought till I read this that it might be impacted by breakpoints I had set (not breakpoints hit, but just set). Disabling all my breakpoints and re-enabling more selectively sorted the problem.","body":"Thanks so much for this. I was losing loads of time because, and couldn&#39;t figure out why, my remote debug sessions on a process which had been performing fine for many iterations started to run consistently slow. I never thought till I read this that it might be impacted by breakpoints I had set (not breakpoints hit, but just set). Disabling all my breakpoints and re-enabling more selectively sorted the problem."},{"owner":{"account_id":43453,"reputation":16185,"user_id":127035,"accept_rate":71,"display_name":"ewan.chalmers"},"score":1,"creation_date":1306148242,"post_id":2195825,"comment_id":7066250,"body_markdown":"It appears that number of breakpoints alone can be a factor. I experimented a bit with enable/disable. In my current environment, the whole process (from startup onwards) becomes very slow whenever &gt;39 breakpoints are enabled. Doesn&#39;t matter which ones.","body":"It appears that number of breakpoints alone can be a factor. I experimented a bit with enable/disable. In my current environment, the whole process (from startup onwards) becomes very slow whenever &gt;39 breakpoints are enabled. Doesn&#39;t matter which ones."}],"tags":[],"owner":{"account_id":84599,"reputation":15850,"user_id":236370,"accept_rate":87,"display_name":"manuel aldana"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1265234603,"creation_date":1265234603,"answer_id":2195825,"question_id":2195720,"body_markdown":"It also depends on the &quot;breakpoints-style&quot;. E.g. having watchpoints on variables or putting breakpoints on interface level (debugger will stop on all method-implementations when they&#39;re executed) often dramatically slows down the process time.","title":"Why does Java code slow down in debugger?","body":"<p>It also depends on the \"breakpoints-style\". E.g. having watchpoints on variables or putting breakpoints on interface level (debugger will stop on all method-implementations when they're executed) often dramatically slows down the process time.</p>\n"},{"comments":[{"owner":{"account_id":87016,"reputation":68348,"user_id":241590,"accept_rate":99,"display_name":"stacker"},"score":0,"creation_date":1265234957,"post_id":2195838,"comment_id":2145204,"body_markdown":"+1 since this happens never to me (slow connection to db) it&#39;s most probable","body":"+1 since this happens never to me (slow connection to db) it&#39;s most probable"},{"owner":{"account_id":19971,"reputation":55479,"user_id":47281,"accept_rate":83,"display_name":"Marcus Leon"},"score":0,"creation_date":1265252496,"post_id":2195838,"comment_id":2146746,"body_markdown":"When you say the code is compiled in debug mode, you&#39;re referring to the JVM compiling the Java byte code to native machine code?","body":"When you say the code is compiled in debug mode, you&#39;re referring to the JVM compiling the Java byte code to native machine code?"}],"tags":[],"owner":{"account_id":88224,"reputation":1101,"user_id":244168,"display_name":"Abboq"},"comment_count":2,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1265293394,"creation_date":1265234740,"answer_id":2195838,"question_id":2195720,"body_markdown":"When debugging, in addition to running your application, you are also running a debugger.\r\n\r\nThe code is compiled in **debug mode** with metadata symbols about local variables and other source-level information.  The debugger reads to know which line of source code corresponds with the current instruction.  The process is called **symbolic debugging**.  The stored symbols increase code size and interpreting them increases execution time.\r\n\r\nSome debuggers actually interpret the code on the fly, which is almost always a major performance hit.\r\n\r\nMore information about Java&#39;s debug compilation mode, which is performed by `javac` and **includes debug information in class files**: [Java Language Compiler Options][1].\r\nFor example: `-g` generates all debugging information, including local variables.\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.3/docs/tooldocs/win32/javac.html#options","title":"Why does Java code slow down in debugger?","body":"<p>When debugging, in addition to running your application, you are also running a debugger.</p>\n\n<p>The code is compiled in <strong>debug mode</strong> with metadata symbols about local variables and other source-level information.  The debugger reads to know which line of source code corresponds with the current instruction.  The process is called <strong>symbolic debugging</strong>.  The stored symbols increase code size and interpreting them increases execution time.</p>\n\n<p>Some debuggers actually interpret the code on the fly, which is almost always a major performance hit.</p>\n\n<p>More information about Java's debug compilation mode, which is performed by <code>javac</code> and <strong>includes debug information in class files</strong>: <a href=\"http://java.sun.com/j2se/1.3/docs/tooldocs/win32/javac.html#options\" rel=\"nofollow noreferrer\">Java Language Compiler Options</a>.\nFor example: <code>-g</code> generates all debugging information, including local variables.</p>\n"},{"tags":[],"owner":{"account_id":9178,"reputation":133593,"user_id":16853,"accept_rate":90,"display_name":"oxbow_lakes"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1265234814,"creation_date":1265234814,"answer_id":2195844,"question_id":2195720,"body_markdown":"Top Tip: *in IDEA you can use ALT+F9 to run to where you have the cursor placed rather than set an extra breakpoint.*\r\n\r\nI have found anecdotally that debugging becomes *very* slow in IDEA if you are walking through code where there is a lot of data accessible from the stack. Don&#39;t forget, IDEA collects this data (anything currently in the lexical scope) and presents it up to you as a tree of objects to browse whether you are &quot;watching&quot; or not and does this at **every subsequent step** (maybe it re-creates the tree each time?).\r\n\r\nThis is especially apparent when, for example, there is a large collection as an instance variable of the &quot;current&quot; object.","title":"Why does Java code slow down in debugger?","body":"<p>Top Tip: <em>in IDEA you can use ALT+F9 to run to where you have the cursor placed rather than set an extra breakpoint.</em></p>\n\n<p>I have found anecdotally that debugging becomes <em>very</em> slow in IDEA if you are walking through code where there is a lot of data accessible from the stack. Don't forget, IDEA collects this data (anything currently in the lexical scope) and presents it up to you as a tree of objects to browse whether you are \"watching\" or not and does this at <strong>every subsequent step</strong> (maybe it re-creates the tree each time?).</p>\n\n<p>This is especially apparent when, for example, there is a large collection as an instance variable of the \"current\" object.</p>\n"},{"tags":[],"owner":{"account_id":9780,"reputation":25221,"user_id":18196,"accept_rate":95,"display_name":"Frank V"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1429554127,"creation_date":1265234819,"answer_id":2195846,"question_id":2195720,"body_markdown":"You do need to consider that another program -- the debugger -- is *hooked* into your program and is watching it for things like exceptions. It&#39;s also monitoring the current line in order to react to breakpoints or user requested interruptions (like a pause request or watch condition). \r\n\r\n","title":"Why does Java code slow down in debugger?","body":"<p>You do need to consider that another program -- the debugger -- is <em>hooked</em> into your program and is watching it for things like exceptions. It's also monitoring the current line in order to react to breakpoints or user requested interruptions (like a pause request or watch condition). </p>\n"},{"tags":[],"owner":{"account_id":22589,"reputation":7074,"user_id":55870,"accept_rate":88,"display_name":"Dan Berindei"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1265235724,"creation_date":1265235724,"answer_id":2195916,"question_id":2195720,"body_markdown":"Debugging the optimized code produced by the JIT would be very hard, because there isn&#39;t a direct relationship between a range of native instructions and a line of Java code like there is a relationship between a range of Java bytecode and a line of Java code.\r\n\r\nSo breaking into a function in the debugger forces the JVM to deoptimize the method you are stepping through. Hotspot doesn&#39;t generate native code at all and just interprets the bytecode of the method.\r\n\r\nPrior to JDK 1.4.1 starting with debugging enabled forced the JVM to only use the interpreter: http://java.sun.com/products/hotspot/docs/whitepaper/Java_Hotspot_v1.4.1/Java_HSpot_WP_v1.4.1_1002_3.html#full","title":"Why does Java code slow down in debugger?","body":"<p>Debugging the optimized code produced by the JIT would be very hard, because there isn't a direct relationship between a range of native instructions and a line of Java code like there is a relationship between a range of Java bytecode and a line of Java code.</p>\n\n<p>So breaking into a function in the debugger forces the JVM to deoptimize the method you are stepping through. Hotspot doesn't generate native code at all and just interprets the bytecode of the method.</p>\n\n<p>Prior to JDK 1.4.1 starting with debugging enabled forced the JVM to only use the interpreter: <a href=\"http://java.sun.com/products/hotspot/docs/whitepaper/Java_Hotspot_v1.4.1/Java_HSpot_WP_v1.4.1_1002_3.html#full\" rel=\"nofollow noreferrer\">http://java.sun.com/products/hotspot/docs/whitepaper/Java_Hotspot_v1.4.1/Java_HSpot_WP_v1.4.1_1002_3.html#full</a></p>\n"}],"owner":{"account_id":19971,"reputation":55479,"user_id":47281,"accept_rate":83,"display_name":"Marcus Leon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14187,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":2195731,"answer_count":6,"score":23,"last_activity_date":1677518308,"creation_date":1265233672,"question_id":2195720,"body_markdown":"Some CPU intensive routines get dramatically slower when run through a debugger.  Why is this?  \r\n\r\nCurrently I&#39;m just using IntelliJ to step through code running in JBoss.  When I start JBoss, I use these options: \r\n\r\n    set JAVA_OPTS=-Xms512m -Xmx1024m -XX:MaxPermSize=256m -Xdebug -Xrunjdwp:transport=dt_socket,address=5005,server=y,suspend=n %JAVA_OPTS%\r\n\r\nIs there a way to speed up the execution?  Or to speed up certain method executions that I don&#39;t need to step through?\r\n\r\n----\r\n\r\n**Update**: Seems if I don&#39;t step over/into the CPU intensive routines (ie: Just run til a breakpoint set right after the routine), then the execution time is as if not in a debugger.\r\n","title":"Why does Java code slow down in debugger?","body":"<p>Some CPU intensive routines get dramatically slower when run through a debugger.  Why is this?  </p>\n\n<p>Currently I'm just using IntelliJ to step through code running in JBoss.  When I start JBoss, I use these options: </p>\n\n<pre><code>set JAVA_OPTS=-Xms512m -Xmx1024m -XX:MaxPermSize=256m -Xdebug -Xrunjdwp:transport=dt_socket,address=5005,server=y,suspend=n %JAVA_OPTS%\n</code></pre>\n\n<p>Is there a way to speed up the execution?  Or to speed up certain method executions that I don't need to step through?</p>\n\n<hr>\n\n<p><strong>Update</strong>: Seems if I don't step over/into the CPU intensive routines (ie: Just run til a breakpoint set right after the routine), then the execution time is as if not in a debugger.</p>\n"},{"tags":["javascript","java","json"],"owner":{"account_id":27892945,"reputation":1,"user_id":21298917,"display_name":"rolando garcia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677518207,"creation_date":1677517897,"question_id":75583522,"body_markdown":"I have a field tester, and that device use a payload to read the data it sends but my payload have an error with the distance and i cant get the real distance in the moment and I get a default 250 maxdistance and mixdistance ,but the others things work very well \r\n\r\nthis is the code\r\n\r\n\r\n```\r\nfunction distance(lat1, lon1, lat2, lon2) {\r\n\tif ((lat1 == lat2) &amp;&amp; (lon1 == lon2)) {\r\n\t\treturn 0;\r\n\t}\r\n\telse {\r\n\t\tvar radlat1 = Math.PI * lat1 / 180;\r\n\t\tvar radlat2 = Math.PI * lat2 / 180;\r\n\t\tvar theta = lon1 - lon2;\r\n\t\tvar radtheta = Math.PI * theta / 180;\r\n\t\tvar dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\r\n\t\tif (dist &gt; 1) {\r\n\t\t\tdist = 1;\r\n\t\t}\r\n\t\tdist = Math.acos(dist);\r\n\t\tdist = dist * 180 / Math.PI;\r\n\t\tdist = dist * 60 * 1.1515;\r\n\t\tdist = dist * 1.609344;\r\n\t\treturn dist;\r\n\t}\r\n}\r\n\r\nfunction Decoder(bytes, fPort) {\r\n\tvar decoded = {};\r\n\t// avoid sending Downlink ACK to integration (Cargo)\r\n\tif (fPort === 1) {\r\n\t\tvar lonSign = (bytes[0] &gt;&gt; 7) &amp; 0x01 ? -1 : 1;\r\n\t\tvar latSign = (bytes[0] &gt;&gt; 6) &amp; 0x01 ? -1 : 1;\r\n\r\n\t\tvar encLat = ((bytes[0] &amp; 0x3f) &lt;&lt; 17) +\r\n\t\t\t(bytes[1] &lt;&lt; 9) +\r\n\t\t\t(bytes[2] &lt;&lt; 1) +\r\n\t\t\t(bytes[3] &gt;&gt; 7);\r\n\r\n\t\tvar encLon = ((bytes[3] &amp; 0x7f) &lt;&lt; 16) +\r\n\t\t\t(bytes[4] &lt;&lt; 8) +\r\n\t\t\tbytes[5];\r\n\r\n\t\tvar hdop = bytes[8] / 10;\r\n\t\tvar sats = bytes[9];\r\n\r\n\t\tvar maxHdop = 2;\r\n\t\tvar minSats = 5;\r\n\r\n\t\tif ((hdop &lt; maxHdop) &amp;&amp; (sats &gt;= minSats)) {\r\n\t\t\t// Send only acceptable quality of position to mappers\r\n\t\t\tdecoded.latitude = latSign * (encLat * 108 + 53) / 10000000;\r\n\t\t\tdecoded.longitude = lonSign * (encLon * 215 + 107) / 10000000;\r\n\t\t\tdecoded.altitude = ((bytes[6] &lt;&lt; 8) + bytes[7]) - 1000;\r\n\t\t\tdecoded.accuracy = (hdop * 5 + 5) / 10\r\n\t\t\tdecoded.hdop = hdop;\r\n\t\t\tdecoded.sats = sats;\r\n\t\t} else {\r\n\t\t\tdecoded.error = &quot;Need more GPS precision (hdop must be &lt;&quot; + maxHdop +\r\n\t\t\t\t&quot; &amp; sats must be &gt;= &quot; + minSats + &quot;) current hdop: &quot; + hdop + &quot; &amp; sats:&quot; + sats;\r\n\t\t}\r\n\t\t\r\n\t\t// \t\tdecoded.raw = rawPayload.uplink_message.rx_metadata[0].location;\r\n\t\tdecoded.num_gw = normalizedPayload.gateways.length;\r\n\t\tdecoded.minRSSI = 0;\r\n\t\tdecoded.maxRSSI = 0;\r\n\t\tdecoded.minSNR = 0;\r\n\t\tdecoded.maxSNR = 0;\r\n\t\tdecoded.minDistance = 0;\r\n\t\tdecoded.maxDistance = 0;\r\n\r\n\r\n\t\t\r\n\r\n\t\tvar gw_lat = {};\r\n\t\tvar gw_long = {};\r\n\r\n\t\tdecoded.num_gw = 0;\r\n\t\tfor (idx_tst = 0; idx_tst &lt; 10; idx_tst++)\r\n\t\t{\r\n\t\t\tif (typeof (normalizedPayload.gateways[idx_tst]) != &quot;undefined&quot;)\r\n\t\t\t{\r\n\t\t\t\tconsole.log(&quot;Found gateway with IDX &quot; + idx_tst);\r\n\t\t\t\tdecoded.num_gw += 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (idx = 0; idx &lt; decoded.num_gw; idx++) {\r\n\t\t\tvar new_rssi = (!!normalizedPayload.gateways &amp;&amp; !!normalizedPayload.gateways[idx] &amp;&amp; normalizedPayload.gateways[idx].rssi) || 0;\r\n\t\t\tvar new_snr = (!!normalizedPayload.gateways &amp;&amp; !!normalizedPayload.gateways[idx] &amp;&amp; normalizedPayload.gateways[idx].snr) || 0;\r\n\t\t\tif ((new_rssi &lt; decoded.minRSSI) || (decoded.minRSSI == 0)) {\r\n\t\t\t\tdecoded.minRSSI = new_rssi;\r\n\t\t\t}\r\n\t\t\tif ((new_rssi &gt; decoded.maxRSSI) || (decoded.maxRSSI == 0)) {\r\n\t\t\t\tdecoded.maxRSSI = new_rssi;\r\n\t\t\t}\r\n\t\t\tif ((new_snr &lt; decoded.minSNR) || (decoded.minSNR == 0)) {\r\n\t\t\t\tdecoded.minSNR = new_snr;\r\n\t\t\t}\r\n\t\t\tif ((new_snr &gt; decoded.maxSNR) || (decoded.maxSNR == 0)) {\r\n\t\t\t\tdecoded.maxSNR = new_snr;\r\n\t\t\t}\r\n\r\n\t\t\t// var gw_lat = 0.0;\r\n\t\t\t// var gw_long = 0.0;\r\n\t\t\t\r\n\r\n\t\t\ttry {\r\n                \r\n                gw_lat[idx] = rawPayload.uplink_message.rx_metadata[idx].location.latitude;\r\n                gw_long[idx] = rawPayload.uplink_message.rx_metadata[idx].location.longitude;\r\n                \r\n                console.log(&quot;IDX &quot; + idx + &quot; lat &quot; + gw_lat[idx] + &quot; long &quot; + gw_long[idx]);\r\n                // decoded.gw_lat[idx] = gw_lat;\r\n                // decoded.gw_long[idx] = gw_long;\r\n                \r\n                // Calculate distance\r\n                var new_distance = distance(gw_lat[idx], gw_long[idx], decoded.latitude, decoded.longitude);\r\n                if ((new_distance &lt; decoded.minDistance) || (decoded.minDistance == 0)) {\r\n                    decoded.minDistance = new_distance * 1000;\r\n                }\r\n                if ((new_distance &gt; decoded.maxDistance) || (decoded.maxDistance == 0)) {\r\n                    decoded.maxDistance = new_distance * 1000;\r\n                }\r\n            } catch (e) {\r\n                console.log(&quot;Error fetching location. Probably gateway data missing.&quot;);\r\n            }\r\n\t\t}\r\n\r\n\t\r\n\r\n\t\tdecoded.maxMod = parseInt((decoded.maxDistance / 250), 10);\r\n\t\tdecoded.minMod = parseInt((decoded.minDistance / 250), 10);\r\n\t\tdecoded.maxDistance = parseInt((decoded.maxMod * 250), 10);\r\n\t\tdecoded.minDistance = parseInt((decoded.minMod * 250), 10);\r\n\t\tif (decoded.maxDistance &lt;= 1) {\r\n\t\t\tdecoded.maxDistance = parseInt(250, 10);\r\n\t\t}\r\n\t\tif (decoded.minDistance &lt;= 1) {\r\n\t\t\tdecoded.minDistance = parseInt(250, 10);\r\n\t\t}\r\n\t\treturn decoded;\r\n\t}\r\n\r\n\r\n}\r\n\r\n```\r\n\r\n[enter image description here](https://i.stack.imgur.com/ldyD4.jpg)\r\n\r\n\r\nas you see the image reflect everything less the distance\r\n\r\n\r\n\r\n\r\ni try to talk with the forum of the app , and payloads from internet and the manual but is not working","title":"code of datacake for the device rak10701-L","body":"<p>I have a field tester, and that device use a payload to read the data it sends but my payload have an error with the distance and i cant get the real distance in the moment and I get a default 250 maxdistance and mixdistance ,but the others things work very well</p>\n<p>this is the code</p>\n<pre><code>function distance(lat1, lon1, lat2, lon2) {\n    if ((lat1 == lat2) &amp;&amp; (lon1 == lon2)) {\n        return 0;\n    }\n    else {\n        var radlat1 = Math.PI * lat1 / 180;\n        var radlat2 = Math.PI * lat2 / 180;\n        var theta = lon1 - lon2;\n        var radtheta = Math.PI * theta / 180;\n        var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n        if (dist &gt; 1) {\n            dist = 1;\n        }\n        dist = Math.acos(dist);\n        dist = dist * 180 / Math.PI;\n        dist = dist * 60 * 1.1515;\n        dist = dist * 1.609344;\n        return dist;\n    }\n}\n\nfunction Decoder(bytes, fPort) {\n    var decoded = {};\n    // avoid sending Downlink ACK to integration (Cargo)\n    if (fPort === 1) {\n        var lonSign = (bytes[0] &gt;&gt; 7) &amp; 0x01 ? -1 : 1;\n        var latSign = (bytes[0] &gt;&gt; 6) &amp; 0x01 ? -1 : 1;\n\n        var encLat = ((bytes[0] &amp; 0x3f) &lt;&lt; 17) +\n            (bytes[1] &lt;&lt; 9) +\n            (bytes[2] &lt;&lt; 1) +\n            (bytes[3] &gt;&gt; 7);\n\n        var encLon = ((bytes[3] &amp; 0x7f) &lt;&lt; 16) +\n            (bytes[4] &lt;&lt; 8) +\n            bytes[5];\n\n        var hdop = bytes[8] / 10;\n        var sats = bytes[9];\n\n        var maxHdop = 2;\n        var minSats = 5;\n\n        if ((hdop &lt; maxHdop) &amp;&amp; (sats &gt;= minSats)) {\n            // Send only acceptable quality of position to mappers\n            decoded.latitude = latSign * (encLat * 108 + 53) / 10000000;\n            decoded.longitude = lonSign * (encLon * 215 + 107) / 10000000;\n            decoded.altitude = ((bytes[6] &lt;&lt; 8) + bytes[7]) - 1000;\n            decoded.accuracy = (hdop * 5 + 5) / 10\n            decoded.hdop = hdop;\n            decoded.sats = sats;\n        } else {\n            decoded.error = &quot;Need more GPS precision (hdop must be &lt;&quot; + maxHdop +\n                &quot; &amp; sats must be &gt;= &quot; + minSats + &quot;) current hdop: &quot; + hdop + &quot; &amp; sats:&quot; + sats;\n        }\n        \n        //      decoded.raw = rawPayload.uplink_message.rx_metadata[0].location;\n        decoded.num_gw = normalizedPayload.gateways.length;\n        decoded.minRSSI = 0;\n        decoded.maxRSSI = 0;\n        decoded.minSNR = 0;\n        decoded.maxSNR = 0;\n        decoded.minDistance = 0;\n        decoded.maxDistance = 0;\n\n\n        \n\n        var gw_lat = {};\n        var gw_long = {};\n\n        decoded.num_gw = 0;\n        for (idx_tst = 0; idx_tst &lt; 10; idx_tst++)\n        {\n            if (typeof (normalizedPayload.gateways[idx_tst]) != &quot;undefined&quot;)\n            {\n                console.log(&quot;Found gateway with IDX &quot; + idx_tst);\n                decoded.num_gw += 1;\n            }\n        }\n\n        for (idx = 0; idx &lt; decoded.num_gw; idx++) {\n            var new_rssi = (!!normalizedPayload.gateways &amp;&amp; !!normalizedPayload.gateways[idx] &amp;&amp; normalizedPayload.gateways[idx].rssi) || 0;\n            var new_snr = (!!normalizedPayload.gateways &amp;&amp; !!normalizedPayload.gateways[idx] &amp;&amp; normalizedPayload.gateways[idx].snr) || 0;\n            if ((new_rssi &lt; decoded.minRSSI) || (decoded.minRSSI == 0)) {\n                decoded.minRSSI = new_rssi;\n            }\n            if ((new_rssi &gt; decoded.maxRSSI) || (decoded.maxRSSI == 0)) {\n                decoded.maxRSSI = new_rssi;\n            }\n            if ((new_snr &lt; decoded.minSNR) || (decoded.minSNR == 0)) {\n                decoded.minSNR = new_snr;\n            }\n            if ((new_snr &gt; decoded.maxSNR) || (decoded.maxSNR == 0)) {\n                decoded.maxSNR = new_snr;\n            }\n\n            // var gw_lat = 0.0;\n            // var gw_long = 0.0;\n            \n\n            try {\n                \n                gw_lat[idx] = rawPayload.uplink_message.rx_metadata[idx].location.latitude;\n                gw_long[idx] = rawPayload.uplink_message.rx_metadata[idx].location.longitude;\n                \n                console.log(&quot;IDX &quot; + idx + &quot; lat &quot; + gw_lat[idx] + &quot; long &quot; + gw_long[idx]);\n                // decoded.gw_lat[idx] = gw_lat;\n                // decoded.gw_long[idx] = gw_long;\n                \n                // Calculate distance\n                var new_distance = distance(gw_lat[idx], gw_long[idx], decoded.latitude, decoded.longitude);\n                if ((new_distance &lt; decoded.minDistance) || (decoded.minDistance == 0)) {\n                    decoded.minDistance = new_distance * 1000;\n                }\n                if ((new_distance &gt; decoded.maxDistance) || (decoded.maxDistance == 0)) {\n                    decoded.maxDistance = new_distance * 1000;\n                }\n            } catch (e) {\n                console.log(&quot;Error fetching location. Probably gateway data missing.&quot;);\n            }\n        }\n\n    \n\n        decoded.maxMod = parseInt((decoded.maxDistance / 250), 10);\n        decoded.minMod = parseInt((decoded.minDistance / 250), 10);\n        decoded.maxDistance = parseInt((decoded.maxMod * 250), 10);\n        decoded.minDistance = parseInt((decoded.minMod * 250), 10);\n        if (decoded.maxDistance &lt;= 1) {\n            decoded.maxDistance = parseInt(250, 10);\n        }\n        if (decoded.minDistance &lt;= 1) {\n            decoded.minDistance = parseInt(250, 10);\n        }\n        return decoded;\n    }\n\n\n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ldyD4.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>as you see the image reflect everything less the distance</p>\n<p>i try to talk with the forum of the app , and payloads from internet and the manual but is not working</p>\n"},{"tags":["java","apache-poi","jsoup","spire.doc"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":2,"creation_date":1677537745,"post_id":75583519,"comment_id":133354170,"body_markdown":"&quot;So I have a program that can create a docx file...&quot; So, make a copy of that program and modify it to create an HTML file.","body":"&quot;So I have a program that can create a docx file...&quot; So, make a copy of that program and modify it to create an HTML file."},{"owner":{"account_id":27319974,"reputation":43,"user_id":20833857,"display_name":"apo"},"score":0,"creation_date":1677575856,"post_id":75583519,"comment_id":133360453,"body_markdown":"I dont wan&#39;t to just create a html file. But I want to be able to read a docx file and from there convert it to a html file. Cause if I copied the other program I wouldn&#39;t really convert anything but rather just create the html file.","body":"I dont wan&#39;t to just create a html file. But I want to be able to read a docx file and from there convert it to a html file. Cause if I copied the other program I wouldn&#39;t really convert anything but rather just create the html file."},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1677581976,"post_id":75583519,"comment_id":133362206,"body_markdown":"Did you try with Apache Tika? Tika will output `&lt;h1&gt;` etc tags if the right styles were set in Word","body":"Did you try with Apache Tika? Tika will output <code>&lt;h1&gt;</code> etc tags if the right styles were set in Word"}],"owner":{"account_id":27319974,"reputation":43,"user_id":20833857,"display_name":"apo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":218,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1677517879,"creation_date":1677517879,"question_id":75583519,"body_markdown":"So I have a program that can create a docx file and now I want to implement a code that takes the docx file and converts it into html. \r\n\r\nI have somewhat made it functional but the problem I&#39;m having is that the converter does not detect the headers/title or a list. I&#39;ve tried to make it detect headers but the if condition is never met and I&#39;m not sure why.\r\n\r\nSo this is our input where the first C++ is supposed to be the heading:\r\n```\r\nC++ &lt;-- header\r\nC++ is a general purpose, high-level programming language developed by Sun Microsystems. \r\nThe C++ programming language was developed by a small team of engineers, \r\nknown as the Green Team, who initiated the language in 1991.\r\n- Chapter 1\r\n- Chapter 2\r\n- Chapter 3\r\n```\r\nand here is the converter code:\r\n\r\n```\r\npackage lab2.converter;\r\n\r\nimport java.io.*;\r\nimport java.util.*;\r\nimport org.apache.poi.xwpf.usermodel.*;\r\nimport org.jsoup.nodes.Document;\r\nimport org.jsoup.nodes.Element;\r\n\r\npublic class HtmlConverter implements Converter{\r\n\r\n    @Override\r\n    public void convert() throws IOException {\r\n        try {\r\n            // 1. Read in the Word document using Apache POI\r\n            FileInputStream fis = new FileInputStream(&quot;output/Find&amp;Replace.docx&quot;);\r\n            XWPFDocument document = new XWPFDocument(fis);\r\n\r\n            // 2. Convert the document to HTML using jsoup\r\n            Document htmlDoc = new Document(&quot;&quot;);\r\n            Element html = htmlDoc.appendElement(&quot;html&quot;);\r\n            Element body = html.appendElement(&quot;body&quot;);\r\n\r\n            List&lt;XWPFParagraph&gt; paragraphs = document.getParagraphs();\r\n            for (XWPFParagraph paragraph : paragraphs) {\r\n                Element p = body.appendElement(&quot;p&quot;);\r\n                String text = paragraph.getText();\r\n\r\n                //if condition to detect header and list\r\n                //not implemented\r\n\r\n                // Add the text content to the paragraph\r\n                p.appendText(text);\r\n            }\r\n\r\n            // 3. Write the HTML to a file\r\n            try (PrintWriter out = new PrintWriter(&quot;output/Find&amp;Replace.html&quot;)) {\r\n                out.println(htmlDoc.html());\r\n            }\r\n\r\n            System.out.println(&quot;Conversion complete.&quot;);\r\n            document.close();\r\n\r\n        } catch (Exception e) {\r\n            System.err.println(&quot;Error converting Word document to HTML: &quot; + e.getMessage());\r\n        }\r\n\r\n    }\r\n}\r\n```\r\nAfter running the docx file into the converter we get this:\r\n\r\n```\r\n&lt;html&gt;\r\n &lt;body&gt;\r\n  &lt;p&gt;Evaluation Warning: The document was created with Spire.Doc for JAVA.&lt;/p&gt;\r\n  &lt;p&gt;Evaluation Warning: The document was created with Spire.Doc for C++.&lt;/p&gt;\r\n  &lt;p&gt;C++&lt;/p&gt;\r\n  &lt;p&gt;C++ is a general purpose, high-level programming language developed by Sun Microsystems. The C++ programming language was developed by a small team of engineers, known as the Green Team, who initiated the language in 1991.&lt;/p&gt;\r\n  &lt;p&gt;Chapter 1&lt;/p&gt;\r\n  &lt;p&gt;Chapter 2&lt;/p&gt;\r\n  &lt;p&gt;Chapter 3&lt;/p&gt;\r\n &lt;/body&gt;\r\n&lt;/html&gt;\r\n\r\n```\r\n\r\n\r\n\r\nLike I said earlier I&#39;ve tried conditionts to be met if they detect a header and lists but the problem I&#39;m having is that I&#39;m not sure how to detect a header with the libraries I&#39;m using.\r\n\r\nThe libraries im using to make the docx file uses the com.spire.doc library.\r\n\r\nThe converter is using org.apache.poi and org.jsoup.nodes. So I&#39;m not sure if It&#39;s that i can&#39;t mix libraries or the fact that I don&#39;t have the knowledge to find a header and lists in the docx file.","title":"how to convert a docx into html","body":"<p>So I have a program that can create a docx file and now I want to implement a code that takes the docx file and converts it into html.</p>\n<p>I have somewhat made it functional but the problem I'm having is that the converter does not detect the headers/title or a list. I've tried to make it detect headers but the if condition is never met and I'm not sure why.</p>\n<p>So this is our input where the first C++ is supposed to be the heading:</p>\n<pre><code>C++ &lt;-- header\nC++ is a general purpose, high-level programming language developed by Sun Microsystems. \nThe C++ programming language was developed by a small team of engineers, \nknown as the Green Team, who initiated the language in 1991.\n- Chapter 1\n- Chapter 2\n- Chapter 3\n</code></pre>\n<p>and here is the converter code:</p>\n<pre><code>package lab2.converter;\n\nimport java.io.*;\nimport java.util.*;\nimport org.apache.poi.xwpf.usermodel.*;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Element;\n\npublic class HtmlConverter implements Converter{\n\n    @Override\n    public void convert() throws IOException {\n        try {\n            // 1. Read in the Word document using Apache POI\n            FileInputStream fis = new FileInputStream(&quot;output/Find&amp;Replace.docx&quot;);\n            XWPFDocument document = new XWPFDocument(fis);\n\n            // 2. Convert the document to HTML using jsoup\n            Document htmlDoc = new Document(&quot;&quot;);\n            Element html = htmlDoc.appendElement(&quot;html&quot;);\n            Element body = html.appendElement(&quot;body&quot;);\n\n            List&lt;XWPFParagraph&gt; paragraphs = document.getParagraphs();\n            for (XWPFParagraph paragraph : paragraphs) {\n                Element p = body.appendElement(&quot;p&quot;);\n                String text = paragraph.getText();\n\n                //if condition to detect header and list\n                //not implemented\n\n                // Add the text content to the paragraph\n                p.appendText(text);\n            }\n\n            // 3. Write the HTML to a file\n            try (PrintWriter out = new PrintWriter(&quot;output/Find&amp;Replace.html&quot;)) {\n                out.println(htmlDoc.html());\n            }\n\n            System.out.println(&quot;Conversion complete.&quot;);\n            document.close();\n\n        } catch (Exception e) {\n            System.err.println(&quot;Error converting Word document to HTML: &quot; + e.getMessage());\n        }\n\n    }\n}\n</code></pre>\n<p>After running the docx file into the converter we get this:</p>\n<pre><code>&lt;html&gt;\n &lt;body&gt;\n  &lt;p&gt;Evaluation Warning: The document was created with Spire.Doc for JAVA.&lt;/p&gt;\n  &lt;p&gt;Evaluation Warning: The document was created with Spire.Doc for C++.&lt;/p&gt;\n  &lt;p&gt;C++&lt;/p&gt;\n  &lt;p&gt;C++ is a general purpose, high-level programming language developed by Sun Microsystems. The C++ programming language was developed by a small team of engineers, known as the Green Team, who initiated the language in 1991.&lt;/p&gt;\n  &lt;p&gt;Chapter 1&lt;/p&gt;\n  &lt;p&gt;Chapter 2&lt;/p&gt;\n  &lt;p&gt;Chapter 3&lt;/p&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n\n</code></pre>\n<p>Like I said earlier I've tried conditionts to be met if they detect a header and lists but the problem I'm having is that I'm not sure how to detect a header with the libraries I'm using.</p>\n<p>The libraries im using to make the docx file uses the com.spire.doc library.</p>\n<p>The converter is using org.apache.poi and org.jsoup.nodes. So I'm not sure if It's that i can't mix libraries or the fact that I don't have the knowledge to find a header and lists in the docx file.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1677511217,"post_id":75582282,"comment_id":133347055,"body_markdown":"You set the branch information on `ac`, not `s` or `fd`. They are completely separate instances, you need to set the branch information on whichever ones you want to call `displayInfo` on. (BTW, don&#39;t call a method which sets things on an account &quot;get&quot; something).","body":"You set the branch information on <code>ac</code>, not <code>s</code> or <code>fd</code>. They are completely separate instances, you need to set the branch information on whichever ones you want to call <code>displayInfo</code> on. (BTW, don&#39;t call a method which sets things on an account &quot;get&quot; something)."}],"answers":[{"tags":[],"owner":{"account_id":27809367,"reputation":616,"user_id":21232051,"display_name":"Raghu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677517840,"creation_date":1677517706,"answer_id":75583485,"question_id":75582282,"body_markdown":"First things first, you should always name your method as &quot;setXXX&quot; if all you are doing in the method is to set the values for instance variables. \r\n\r\nSo Set methods &quot;set&quot; values and Get methods &quot;get&quot;(return) instance variable values\r\n\r\nIn your code, you are creating two different objects, \r\n\r\n    Account ac = new Account();\r\n    ac.getCustInfo(n, nm, t, br);\r\n\r\nhere you are setting \r\n\r\n    Acno = n;\r\n    CustName = nm;\r\n    type = ty;\r\n    Branch = br;\r\n\r\nin object &quot;ac&quot;. \r\n\r\nThen you are creating a totally different Savings object \r\n\r\n    Savings s = new Savings();\r\n    s.getSavingsInfo(y, a);\r\n    s.calIntAmt();\r\n    s.displayInfo();\r\n\r\nwhere you are setting only the year, amount and interest. This object never calls the method which initializes Account, customer name, branch and type. That is why those values are null.\r\n\r\nThe clean way to do this is as follows, I have cleaned up your example\r\n\r\n    import java.util.Scanner;\r\n    \r\n    abstract class Account {\r\n        int accountNumber;\r\n        String customerName, accountType, branch;\r\n    \r\n        public Account(int accountNumber, String customerName, String accountType, String branch) {\r\n            this.accountNumber = accountNumber;\r\n            this.customerName = customerName;\r\n            this.accountType = accountType;\r\n            this.branch = branch;\r\n        }\r\n    \r\n        void displayAccountInfo() {\r\n            System.out.println(&quot;Account No: &quot; + accountNumber + &quot;\\nCustomer Name: &quot; + customerName + &quot;\\nAccount Type: &quot; + accountType\r\n                    + &quot;\\nBranch: &quot; + branch);\r\n        }\r\n    \r\n        abstract void calculateInterest();\r\n    }\r\n    \r\n    class Savings extends Account {\r\n        int year;\r\n        double amount, rate = 3.5, interest;\r\n    \r\n        public Savings(int accountNumber, String customerName, String accountType, String branch, int year, int amount) {\r\n            super(accountNumber, customerName, accountType, branch);\r\n            this.year = year;\r\n            this.amount = amount;\r\n    \r\n            calculateInterest();\r\n        }\r\n    \r\n        void calculateInterest() {\r\n            interest = (amount * rate * year) / 100;\r\n        }\r\n    \r\n        void displayAccountInfo() {\r\n            super.displayAccountInfo();\r\n            System.out.println(&quot;Interest: &quot; + interest);\r\n        }\r\n    }\r\n    \r\n    class FixedDeposit extends Account {\r\n        int year;\r\n        double amount, rate, interest;\r\n    \r\n        public FixedDeposit(int accountNumber, String customerName, String accountType, String branch, int year, int amount) {\r\n            super(accountNumber, customerName, accountType, branch);\r\n            this.year = year;\r\n            this.amount = amount;\r\n    \r\n            calculateInterest();\r\n        }\r\n    \r\n        void calculateInterest() {\r\n            if (year &lt;= 2) {\r\n                rate = 6.5;\r\n                interest = (amount * rate * year) / 100;\r\n            } else if (year &gt;= 2 &amp;&amp; year &lt;= 5) {\r\n                rate = 7.5;\r\n                interest = (amount * rate * year) / 100;\r\n            } else if (year &gt;= 5 &amp;&amp; year &lt;= 10) {\r\n                rate = 8.5;\r\n                interest = (amount * rate * year) / 100;\r\n            } else if (year &gt;= 10) {\r\n                rate = 9.0;\r\n                interest = (amount * rate * year) / 100;\r\n            } else {\r\n                System.out.println(&quot;Invalid Year&quot;);\r\n            }\r\n        }\r\n    \r\n        void displayAccountInfo() {\r\n            super.displayAccountInfo();\r\n            System.out.println(&quot;Interest: &quot; + interest);\r\n        }\r\n    }\r\n    \r\n    public class Test {\r\n        public static void main(String[] args) {\r\n            Scanner sc = new Scanner(System.in);\r\n    \r\n            System.out.print(&quot;Account Number: &quot;);\r\n            int accountNumber = sc.nextInt();\r\n    \r\n            System.out.print(&quot;Customer Name: &quot;);\r\n            String customerName = sc.next();\r\n    \r\n            System.out.print(&quot;Account Type: &quot;);\r\n            String accountType = sc.next();\r\n    \r\n            System.out.print(&quot;Branch Name: &quot;);\r\n            String branch = sc.next();\r\n    \r\n            System.out.print(&quot;Amount: &quot;);\r\n            int amount = sc.nextInt();\r\n    \r\n            System.out.print(&quot;Year: &quot;);\r\n            int year = sc.nextInt();\r\n    \r\n            Account account = null;\r\n    \r\n            if (accountType.equals(&quot;Saving&quot;)) {\r\n                account = new Savings(accountNumber, customerName, accountType, branch, year, amount);\r\n                account.displayAccountInfo();\r\n            } else if (accountType.equals(&quot;FixedDeposit&quot;)) {\r\n                account = new FixedDeposit(accountNumber, customerName, accountType, branch, year, amount);\r\n                account.displayAccountInfo();\r\n            } else {\r\n                System.out.println(&quot;Invalid Account Type&quot;);\r\n            }\r\n            sc.close();\r\n        }\r\n    }\r\n\r\n\r\nIt is better to have Account class as abstract so that you can implement the calculateInterest in the sub classes.\r\n\r\nI think you need to read more about Java inheritance to grasp these concepts\r\n\r\nhttps://www.geeksforgeeks.org/inheritance-in-java/ ","title":"When i call Method of Parent Class Using Super.displayInfo Values are not printing","body":"<p>First things first, you should always name your method as &quot;setXXX&quot; if all you are doing in the method is to set the values for instance variables.</p>\n<p>So Set methods &quot;set&quot; values and Get methods &quot;get&quot;(return) instance variable values</p>\n<p>In your code, you are creating two different objects,</p>\n<pre><code>Account ac = new Account();\nac.getCustInfo(n, nm, t, br);\n</code></pre>\n<p>here you are setting</p>\n<pre><code>Acno = n;\nCustName = nm;\ntype = ty;\nBranch = br;\n</code></pre>\n<p>in object &quot;ac&quot;.</p>\n<p>Then you are creating a totally different Savings object</p>\n<pre><code>Savings s = new Savings();\ns.getSavingsInfo(y, a);\ns.calIntAmt();\ns.displayInfo();\n</code></pre>\n<p>where you are setting only the year, amount and interest. This object never calls the method which initializes Account, customer name, branch and type. That is why those values are null.</p>\n<p>The clean way to do this is as follows, I have cleaned up your example</p>\n<pre><code>import java.util.Scanner;\n\nabstract class Account {\n    int accountNumber;\n    String customerName, accountType, branch;\n\n    public Account(int accountNumber, String customerName, String accountType, String branch) {\n        this.accountNumber = accountNumber;\n        this.customerName = customerName;\n        this.accountType = accountType;\n        this.branch = branch;\n    }\n\n    void displayAccountInfo() {\n        System.out.println(&quot;Account No: &quot; + accountNumber + &quot;\\nCustomer Name: &quot; + customerName + &quot;\\nAccount Type: &quot; + accountType\n                + &quot;\\nBranch: &quot; + branch);\n    }\n\n    abstract void calculateInterest();\n}\n\nclass Savings extends Account {\n    int year;\n    double amount, rate = 3.5, interest;\n\n    public Savings(int accountNumber, String customerName, String accountType, String branch, int year, int amount) {\n        super(accountNumber, customerName, accountType, branch);\n        this.year = year;\n        this.amount = amount;\n\n        calculateInterest();\n    }\n\n    void calculateInterest() {\n        interest = (amount * rate * year) / 100;\n    }\n\n    void displayAccountInfo() {\n        super.displayAccountInfo();\n        System.out.println(&quot;Interest: &quot; + interest);\n    }\n}\n\nclass FixedDeposit extends Account {\n    int year;\n    double amount, rate, interest;\n\n    public FixedDeposit(int accountNumber, String customerName, String accountType, String branch, int year, int amount) {\n        super(accountNumber, customerName, accountType, branch);\n        this.year = year;\n        this.amount = amount;\n\n        calculateInterest();\n    }\n\n    void calculateInterest() {\n        if (year &lt;= 2) {\n            rate = 6.5;\n            interest = (amount * rate * year) / 100;\n        } else if (year &gt;= 2 &amp;&amp; year &lt;= 5) {\n            rate = 7.5;\n            interest = (amount * rate * year) / 100;\n        } else if (year &gt;= 5 &amp;&amp; year &lt;= 10) {\n            rate = 8.5;\n            interest = (amount * rate * year) / 100;\n        } else if (year &gt;= 10) {\n            rate = 9.0;\n            interest = (amount * rate * year) / 100;\n        } else {\n            System.out.println(&quot;Invalid Year&quot;);\n        }\n    }\n\n    void displayAccountInfo() {\n        super.displayAccountInfo();\n        System.out.println(&quot;Interest: &quot; + interest);\n    }\n}\n\npublic class Test {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n\n        System.out.print(&quot;Account Number: &quot;);\n        int accountNumber = sc.nextInt();\n\n        System.out.print(&quot;Customer Name: &quot;);\n        String customerName = sc.next();\n\n        System.out.print(&quot;Account Type: &quot;);\n        String accountType = sc.next();\n\n        System.out.print(&quot;Branch Name: &quot;);\n        String branch = sc.next();\n\n        System.out.print(&quot;Amount: &quot;);\n        int amount = sc.nextInt();\n\n        System.out.print(&quot;Year: &quot;);\n        int year = sc.nextInt();\n\n        Account account = null;\n\n        if (accountType.equals(&quot;Saving&quot;)) {\n            account = new Savings(accountNumber, customerName, accountType, branch, year, amount);\n            account.displayAccountInfo();\n        } else if (accountType.equals(&quot;FixedDeposit&quot;)) {\n            account = new FixedDeposit(accountNumber, customerName, accountType, branch, year, amount);\n            account.displayAccountInfo();\n        } else {\n            System.out.println(&quot;Invalid Account Type&quot;);\n        }\n        sc.close();\n    }\n}\n</code></pre>\n<p>It is better to have Account class as abstract so that you can implement the calculateInterest in the sub classes.</p>\n<p>I think you need to read more about Java inheritance to grasp these concepts</p>\n<p><a href=\"https://www.geeksforgeeks.org/inheritance-in-java/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/inheritance-in-java/</a></p>\n"}],"owner":{"account_id":23844218,"reputation":39,"user_id":17848908,"display_name":"Dharmik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75583485,"answer_count":1,"score":0,"last_activity_date":1677517840,"creation_date":1677511030,"question_id":75582282,"body_markdown":"**Question**\r\n[![][2]][2]\r\n\r\n\\*Here is My Code \\*\r\n*I need to Override displayInfo Method. so i have used super.displayInfo and than printing interest calculated by the respective class savings or fixed deposit. the interest is getting printed but other details account no , customer name , type and branch name are getting printed as default values like 0 and null.\r\n*\r\n\r\n```\r\nimport java.util.*;\r\n\r\nclass Account {\r\n\tint Acno;\r\n\tString CustName, type, Branch;\r\n\r\n\tvoid getCustInfo(int n, String nm, String ty, String br) {\r\n\t\tAcno = n;\r\n\t\tCustName = nm;\r\n\t\ttype = ty;\r\n\t\tBranch = br;\r\n\t}\r\n\r\n\tvoid displayInfo() {\r\n\t\tSystem.out.println(&quot;Account No: &quot; + Acno + &quot;\\nCustomer Name: &quot; + CustName + &quot;\\nAccount Type: &quot; + type\r\n\t\t\t\t+ &quot;\\nBranch: &quot; + Branch);\r\n\t}\r\n}\r\n\r\nclass Savings extends Account {\r\n\tint Year;\r\n\tdouble Amount, Rate = 3.5, Interest;\r\n\r\n\tvoid getSavingsInfo(int y, double am) {\r\n\t\tYear = y;\r\n\t\tAmount = am;\r\n\t}\r\n\r\n\tvoid calIntAmt() {\r\n\t\tInterest = (Amount * Rate * Year) / 100;\r\n\t}\r\n\r\n\tvoid displayInfo() {\r\n\t\tsuper.displayInfo();\r\n\t\tSystem.out.println(&quot;Interest: &quot; + Interest);\r\n\t}\r\n}\r\n\r\nclass FixedDeposit extends Account {\r\n\tint Year;\r\n\tdouble Amount, Rate, Interest;\r\n\r\n\tvoid getFDInfo(int y, double am) {\r\n\t\tYear = y;\r\n\t\tAmount = am;\r\n\t}\r\n\r\n\tvoid calIntAmt() {\r\n\t\tif (Year &lt;= 2) {\r\n\t\t\tRate = 6.5;\r\n\t\t\tInterest = (Amount * Rate * Year) / 100;\r\n\t\t} else if (Year &gt;= 2 &amp;&amp; Year &lt;= 5) {\r\n\t\t\tRate = 7.5;\r\n\t\t\tInterest = (Amount * Rate * Year) / 100;\r\n\t\t} else if (Year &gt;= 5 &amp;&amp; Year &lt;= 10) {\r\n\t\t\tRate = 8.5;\r\n\t\t\tInterest = (Amount * Rate * Year) / 100;\r\n\t\t} else if (Year &gt;= 10) {\r\n\t\t\tRate = 9.0;\r\n\t\t\tInterest = (Amount * Rate * Year) / 100;\r\n\t\t} else {\r\n\t\t\tSystem.out.println(&quot;Invalid Year&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\tvoid displayInfo() {\r\n\t\tsuper.displayInfo();\r\n\t\tSystem.out.println(&quot;Interest&quot;);\r\n\t}\r\n}\r\n\r\npublic class Program {\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner sc = new Scanner(System.in);\r\n\r\n\t\tSystem.out.print(&quot;Account Number: &quot;);\r\n\t\tint n = sc.nextInt();\r\n\r\n\t\tSystem.out.print(&quot;Customer Name: &quot;);\r\n\t\tString nm = sc.next();\r\n\r\n\t\tSystem.out.print(&quot;Account Type: &quot;);\r\n\t\tString t = sc.next();\r\n\r\n\t\tSystem.out.print(&quot;Btanch Name: &quot;);\r\n\t\tString br = sc.next();\r\n\r\n\t\tSystem.out.print(&quot;Amount: &quot;);\r\n\t\tint a = sc.nextInt();\r\n\r\n\t\tSystem.out.print(&quot;Year: &quot;);\r\n\t\tint y = sc.nextInt();\r\n\r\n\t\tAccount ac = new Account();\r\n\t\tac.getCustInfo(n, nm, t, br);\r\n\r\n\t\tif (t.equals(&quot;Saving&quot;)) {\r\n\t\t\tSavings s = new Savings();\r\n\t\t\ts.getSavingsInfo(y, a);\r\n\t\t\ts.calIntAmt();\r\n\t\t\ts.displayInfo();\r\n\t\t} else if (t.endsWith(&quot;FixedDeposit&quot;)) {\r\n\t\t\tFixedDeposit fd = new FixedDeposit();\r\n\t\t\tfd.getFDInfo(y, a);\r\n\t\t\tfd.calIntAmt();\r\n\t\t\tfd.displayInfo();\r\n\t\t}\r\n\t\tsc.close();\r\n\t}\r\n}\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI was expecting result as\r\nAccount No: 1\r\nCustomer Name: abc\r\nAccount Type: Saving\r\nBranch: aaa\r\nInterest: 1750.0\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lqwkk.png\r\n  [2]: https://i.stack.imgur.com/UxqCW.png","title":"When i call Method of Parent Class Using Super.displayInfo Values are not printing","body":"<p><strong>Question</strong>\n<a href=\"https://i.stack.imgur.com/UxqCW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UxqCW.png\" alt=\"\" /></a></p>\n<p>*Here is My Code *\n*I need to Override displayInfo Method. so i have used super.displayInfo and than printing interest calculated by the respective class savings or fixed deposit. the interest is getting printed but other details account no , customer name , type and branch name are getting printed as default values like 0 and null.\n*</p>\n<pre><code>import java.util.*;\n\nclass Account {\n    int Acno;\n    String CustName, type, Branch;\n\n    void getCustInfo(int n, String nm, String ty, String br) {\n        Acno = n;\n        CustName = nm;\n        type = ty;\n        Branch = br;\n    }\n\n    void displayInfo() {\n        System.out.println(&quot;Account No: &quot; + Acno + &quot;\\nCustomer Name: &quot; + CustName + &quot;\\nAccount Type: &quot; + type\n                + &quot;\\nBranch: &quot; + Branch);\n    }\n}\n\nclass Savings extends Account {\n    int Year;\n    double Amount, Rate = 3.5, Interest;\n\n    void getSavingsInfo(int y, double am) {\n        Year = y;\n        Amount = am;\n    }\n\n    void calIntAmt() {\n        Interest = (Amount * Rate * Year) / 100;\n    }\n\n    void displayInfo() {\n        super.displayInfo();\n        System.out.println(&quot;Interest: &quot; + Interest);\n    }\n}\n\nclass FixedDeposit extends Account {\n    int Year;\n    double Amount, Rate, Interest;\n\n    void getFDInfo(int y, double am) {\n        Year = y;\n        Amount = am;\n    }\n\n    void calIntAmt() {\n        if (Year &lt;= 2) {\n            Rate = 6.5;\n            Interest = (Amount * Rate * Year) / 100;\n        } else if (Year &gt;= 2 &amp;&amp; Year &lt;= 5) {\n            Rate = 7.5;\n            Interest = (Amount * Rate * Year) / 100;\n        } else if (Year &gt;= 5 &amp;&amp; Year &lt;= 10) {\n            Rate = 8.5;\n            Interest = (Amount * Rate * Year) / 100;\n        } else if (Year &gt;= 10) {\n            Rate = 9.0;\n            Interest = (Amount * Rate * Year) / 100;\n        } else {\n            System.out.println(&quot;Invalid Year&quot;);\n        }\n    }\n\n    void displayInfo() {\n        super.displayInfo();\n        System.out.println(&quot;Interest&quot;);\n    }\n}\n\npublic class Program {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n\n        System.out.print(&quot;Account Number: &quot;);\n        int n = sc.nextInt();\n\n        System.out.print(&quot;Customer Name: &quot;);\n        String nm = sc.next();\n\n        System.out.print(&quot;Account Type: &quot;);\n        String t = sc.next();\n\n        System.out.print(&quot;Btanch Name: &quot;);\n        String br = sc.next();\n\n        System.out.print(&quot;Amount: &quot;);\n        int a = sc.nextInt();\n\n        System.out.print(&quot;Year: &quot;);\n        int y = sc.nextInt();\n\n        Account ac = new Account();\n        ac.getCustInfo(n, nm, t, br);\n\n        if (t.equals(&quot;Saving&quot;)) {\n            Savings s = new Savings();\n            s.getSavingsInfo(y, a);\n            s.calIntAmt();\n            s.displayInfo();\n        } else if (t.endsWith(&quot;FixedDeposit&quot;)) {\n            FixedDeposit fd = new FixedDeposit();\n            fd.getFDInfo(y, a);\n            fd.calIntAmt();\n            fd.displayInfo();\n        }\n        sc.close();\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/lqwkk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lqwkk.png\" alt=\"enter image description here\" /></a></p>\n<p>I was expecting result as\nAccount No: 1\nCustomer Name: abc\nAccount Type: Saving\nBranch: aaa\nInterest: 1750.0</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1610462973,"post_id":65686175,"comment_id":116137062,"body_markdown":"You seem to be mixing JUnit 4 (`org.junit.*`) with JUnit 5 (`org.junit.jupiter.*`). For instance, the `@RunWith` annotation is for JUnit 4, but the `@SpringBootTest` annotation applies a JUnit 5 extension.","body":"You seem to be mixing JUnit 4 (<code>org.junit.*</code>) with JUnit 5 (<code>org.junit.jupiter.*</code>). For instance, the <code>@RunWith</code> annotation is for JUnit 4, but the <code>@SpringBootTest</code> annotation applies a JUnit 5 extension."}],"answers":[{"comments":[{"owner":{"account_id":2450779,"reputation":1014,"user_id":2137125,"accept_rate":75,"display_name":"Lifeweaver"},"score":1,"creation_date":1665682403,"post_id":66377278,"comment_id":130762060,"body_markdown":"I didn&#39;t have a version issue, but was missing the junit-jupiter-api dependency. I just wanted to call that out in case it helped someone.","body":"I didn&#39;t have a version issue, but was missing the junit-jupiter-api dependency. I just wanted to call that out in case it helped someone."},{"owner":{"account_id":2043806,"reputation":4771,"user_id":2118777,"display_name":"Pipo"},"score":0,"creation_date":1670974545,"post_id":66377278,"comment_id":131996139,"body_markdown":"Note that 5.7.2 worked for me as well","body":"Note that 5.7.2 worked for me as well"},{"owner":{"account_id":303377,"reputation":3694,"user_id":612275,"accept_rate":75,"display_name":"dt1000"},"score":0,"creation_date":1687553961,"post_id":66377278,"comment_id":134958779,"body_markdown":"Thank you, upgrading to 5.6.2 worked for me!","body":"Thank you, upgrading to 5.6.2 worked for me!"}],"tags":[],"owner":{"account_id":5147284,"reputation":2911,"user_id":4122894,"display_name":"sixrandanes"},"comment_count":3,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1657631124,"creation_date":1614291375,"answer_id":66377278,"question_id":65686175,"body_markdown":"I have got the same issue with `org.junit.jupiter:junit-jupiter:5.5.2`.\r\nIt works like a charm by upgrading the version to 5.6.2. (and also the others junit-jupiter-engine, junit-jupiter-api)","title":"Junit Test error : org/junit/jupiter/api/extension/ScriptEvaluationException","body":"<p>I have got the same issue with <code>org.junit.jupiter:junit-jupiter:5.5.2</code>.\nIt works like a charm by upgrading the version to 5.6.2. (and also the others junit-jupiter-engine, junit-jupiter-api)</p>\n"}],"owner":{"account_id":20197894,"reputation":111,"user_id":14814384,"display_name":"JOONWOO LEE"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16625,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":1,"score":11,"last_activity_date":1677517738,"creation_date":1610462587,"question_id":65686175,"body_markdown":"I&#39;m trying to run test code in springboot and it shows the error like below. I cannot understand what NoClassDefFoundError means in this case. I made a PostsRepository class for JPA usage and also wrote @Repository annotation there.\r\n\r\n\r\n    `org/junit/jupiter/api/extension/ScriptEvaluationException\r\n    java.lang.NoClassDefFoundError: org/junit/jupiter/api/extension/ScriptEvaluationException\r\n    \tat java.lang.Class.forName0(Native Method)\r\n    \tat java.lang.Class.forName(Class.java:264)\r\n    \tat org.junit.jupiter.engine.extension.ScriptExecutionCondition$Evaluator.forName(ScriptExecutionCondition.java:153)\r\n    \tat org.junit.jupiter.engine.extension.ScriptExecutionCondition$Evaluator.forName(ScriptExecutionCondition.java:133)\r\n    \tat org.junit.jupiter.engine.extension.ScriptExecutionCondition.&lt;init&gt;(ScriptExecutionCondition.java:55)\r\n    \tat org.junit.jupiter.engine.extension.ScriptExecutionCondition.&lt;init&gt;(ScriptExecutionCondition.java:50)\r\n    \tat org.junit.jupiter.engine.extension.ExtensionRegistry.&lt;clinit&gt;(ExtensionRegistry.java:55)\r\n    \tat org.junit.jupiter.engine.descriptor.JupiterEngineDescriptor.prepare(JupiterEngineDescriptor.java:37)\r\n    \tat org.junit.jupiter.engine.descriptor.JupiterEngineDescriptor.prepare(JupiterEngineDescriptor.java:28)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$0(NodeTestTask.java:83)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:83)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:69)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)\r\n    \tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)\r\n    \tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)\r\n    \tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)\r\n    \tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n    \tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n    \tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\r\n    \tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n    \tat com.sun.proxy.$Proxy2.stop(Unknown Source)\r\n    \tat org.gradle.api.internal.tasks.testing.worker.TestWorker.stop(TestWorker.java:133)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n    \tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n    \tat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182)\r\n    \tat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164)\r\n    \tat org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:414)\r\n    \tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n    \tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n    Caused by: java.lang.ClassNotFoundException: org.junit.jupiter.api.extension.ScriptEvaluationException\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:355)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n    \t... 50 more\r\n    \r\n    \r\n    UnknownClass &gt; initializationError FAILED\r\n        java.lang.NoClassDefFoundError at Class.java:-2\r\n            Caused by: java.lang.ClassNotFoundException at URLClassLoader.java:382\r\n    1 test completed, 1 failed\r\n    FAILURE: Build failed with an exception.\r\n    * What went wrong:\r\n    Execution failed for task &#39;:test&#39;.\r\n    &gt; There were failing tests. See the report at: file:///C:/BackendWorkspace/java-practice/Spring�ǽ�/CRUD/build/reports/tests/test/index.html\r\n    * Try:\r\n    Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n    * Get more help at https://help.gradle.org\r\n    \r\n    Deprecated Gradle features were used in this build, making it incompatible with Gradle 7.0.\r\n    Use &#39;--warning-mode all&#39; to show the individual deprecation warnings.\r\n    See https://docs.gradle.org/6.7/userguide/command_line_interface.html#sec:command_line_warnings\r\n    BUILD FAILED in 2s\r\n    3 actionable tasks: 2 executed, 1 up-to-date\r\n    \r\n    `\r\n\r\nthis is the test code I wrote and I cannot figure out what went wrong. I already set everything in build.gradle and other test codes just ran all good yesterday.\r\n\r\n   \r\n\r\n     package com.junu.springboot.domain.posts;\r\n    \r\n    import org.junit.After;\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    import org.springframework.test.context.junit4.SpringRunner;\r\n    \r\n    import java.util.List;\r\n    \r\n    import static org.assertj.core.api.Assertions.assertThat;\r\n    \r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n    public class PostsRepositoryTest {\r\n        @Autowired \r\n        PostsRepository postsRepository;\r\n    \r\n        @After \r\n        public void cleanup(){\r\n            postsRepository.deleteAll();\r\n        }\r\n    \r\n        @Test\r\n        public void selectList(){\r\n            postsRepository.save(Posts.builder()\r\n                                    .title(title)\r\n                                    .content(content)\r\n                                    .author(&quot;junu0516@yonsei.ac.kr&quot;)\r\n                                    .build());\r\n            //when\r\n            List&lt;Posts&gt; postsList = postsRepository.findAll();\r\n    \r\n            //then\r\n            Posts posts = postsList.get(0);\r\n            assertThat(posts.getTitle()).isEqualTo(title);\r\n            assertThat(posts.getContent()).isEqualTo(content);\r\n        }\r\n    }\r\n\r\n\r\nI just guess that the annotaion @Autowired might be the reason because in my Intellij it shows a red line.\r\n\r\nAnyone please help me :)\r\n\r\n","title":"Junit Test error : org/junit/jupiter/api/extension/ScriptEvaluationException","body":"<p>I'm trying to run test code in springboot and it shows the error like below. I cannot understand what NoClassDefFoundError means in this case. I made a PostsRepository class for JPA usage and also wrote @Repository annotation there.</p>\n<pre><code>`org/junit/jupiter/api/extension/ScriptEvaluationException\njava.lang.NoClassDefFoundError: org/junit/jupiter/api/extension/ScriptEvaluationException\n    at java.lang.Class.forName0(Native Method)\n    at java.lang.Class.forName(Class.java:264)\n    at org.junit.jupiter.engine.extension.ScriptExecutionCondition$Evaluator.forName(ScriptExecutionCondition.java:153)\n    at org.junit.jupiter.engine.extension.ScriptExecutionCondition$Evaluator.forName(ScriptExecutionCondition.java:133)\n    at org.junit.jupiter.engine.extension.ScriptExecutionCondition.&lt;init&gt;(ScriptExecutionCondition.java:55)\n    at org.junit.jupiter.engine.extension.ScriptExecutionCondition.&lt;init&gt;(ScriptExecutionCondition.java:50)\n    at org.junit.jupiter.engine.extension.ExtensionRegistry.&lt;clinit&gt;(ExtensionRegistry.java:55)\n    at org.junit.jupiter.engine.descriptor.JupiterEngineDescriptor.prepare(JupiterEngineDescriptor.java:37)\n    at org.junit.jupiter.engine.descriptor.JupiterEngineDescriptor.prepare(JupiterEngineDescriptor.java:28)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$0(NodeTestTask.java:83)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:83)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:69)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)\n    at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)\n    at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\n    at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\n    at com.sun.proxy.$Proxy2.stop(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.stop(TestWorker.java:133)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182)\n    at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164)\n    at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:414)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.lang.ClassNotFoundException: org.junit.jupiter.api.extension.ScriptEvaluationException\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:355)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n    ... 50 more\n\n\nUnknownClass &gt; initializationError FAILED\n    java.lang.NoClassDefFoundError at Class.java:-2\n        Caused by: java.lang.ClassNotFoundException at URLClassLoader.java:382\n1 test completed, 1 failed\nFAILURE: Build failed with an exception.\n* What went wrong:\nExecution failed for task ':test'.\n&gt; There were failing tests. See the report at: file:///C:/BackendWorkspace/java-practice/Spring�ǽ�/CRUD/build/reports/tests/test/index.html\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n* Get more help at https://help.gradle.org\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 7.0.\nUse '--warning-mode all' to show the individual deprecation warnings.\nSee https://docs.gradle.org/6.7/userguide/command_line_interface.html#sec:command_line_warnings\nBUILD FAILED in 2s\n3 actionable tasks: 2 executed, 1 up-to-date\n\n`\n</code></pre>\n<p>this is the test code I wrote and I cannot figure out what went wrong. I already set everything in build.gradle and other test codes just ran all good yesterday.</p>\n<pre><code> package com.junu.springboot.domain.posts;\n\nimport org.junit.After;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.junit4.SpringRunner;\n\nimport java.util.List;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\n@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class PostsRepositoryTest {\n    @Autowired \n    PostsRepository postsRepository;\n\n    @After \n    public void cleanup(){\n        postsRepository.deleteAll();\n    }\n\n    @Test\n    public void selectList(){\n        postsRepository.save(Posts.builder()\n                                .title(title)\n                                .content(content)\n                                .author(&quot;junu0516@yonsei.ac.kr&quot;)\n                                .build());\n        //when\n        List&lt;Posts&gt; postsList = postsRepository.findAll();\n\n        //then\n        Posts posts = postsList.get(0);\n        assertThat(posts.getTitle()).isEqualTo(title);\n        assertThat(posts.getContent()).isEqualTo(content);\n    }\n}\n</code></pre>\n<p>I just guess that the annotaion @Autowired might be the reason because in my Intellij it shows a red line.</p>\n<p>Anyone please help me :)</p>\n"},{"tags":["java","jdbc","hikaricp"],"answers":[{"comments":[{"owner":{"account_id":425342,"reputation":4878,"user_id":805896,"accept_rate":76,"display_name":"rahman"},"score":0,"creation_date":1677518793,"post_id":75583487,"comment_id":133349673,"body_markdown":"Correct me if I am wrongplz: \n1- So the connection is considered idle if there is no handle to it. Once I do a `getConnection` it is considered not-idle until it is closed. \n\n2- My ultimate goal was to make sure I can use `setKeepaliveTime` beyond system&#39;s tcp keepalive (`net.inet.tcp.keepidle` in mac and tcp_keepalive_time in linux, both defaulted to 2 hours). I was trying to reduce the 2 hours and make a negative test. Do you think I can then just go ahead and set a high keepalive value beyond 2 hours, and the test would work?","body":"Correct me if I am wrongplz:  1- So the connection is considered idle if there is no handle to it. Once I do a <code>getConnection</code> it is considered not-idle until it is closed.   2- My ultimate goal was to make sure I can use <code>setKeepaliveTime</code> beyond system&#39;s tcp keepalive (<code>net.inet.tcp.keepidle</code> in mac and tcp_keepalive_time in linux, both defaulted to 2 hours). I was trying to reduce the 2 hours and make a negative test. Do you think I can then just go ahead and set a high keepalive value beyond 2 hours, and the test would work?"},{"owner":{"account_id":425342,"reputation":4878,"user_id":805896,"accept_rate":76,"display_name":"rahman"},"score":0,"creation_date":1677579544,"post_id":75583487,"comment_id":133361507,"body_markdown":"I still need to know how to reproduce the scenario of an idle connection timeout, for which setting tcpkeepalive is a solution. Do you know how I can do that?","body":"I still need to know how to reproduce the scenario of an idle connection timeout, for which setting tcpkeepalive is a solution. Do you know how I can do that?"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1677600870,"post_id":75583487,"comment_id":133368326,"body_markdown":"@rahman You are confusing things here. The idle timeout of HikariCP is about the connections being evicted from the connection pool when they haven&#39;t been used in a while, the keep alive time / keep idle is a low level mechanism to ensure TCP/IP connections which are open but not actively used are kept open. If you want to see idle time at work, make sure you open more connections than the minimumIdle setting (so they have actually been created), then close them all (so they are returned to the pool) and then wait the idle-time duration (+ some slack).","body":"@rahman You are confusing things here. The idle timeout of HikariCP is about the connections being evicted from the connection pool when they haven&#39;t been used in a while, the keep alive time / keep idle is a low level mechanism to ensure TCP/IP connections which are open but not actively used are kept open. If you want to see idle time at work, make sure you open more connections than the minimumIdle setting (so they have actually been created), then close them all (so they are returned to the pool) and then wait the idle-time duration (+ some slack)."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1677601060,"post_id":75583487,"comment_id":133368383,"body_markdown":"@rahman HikariCP should then trim the number of connections in the pool back to minimumIdle.","body":"@rahman HikariCP should then trim the number of connections in the pool back to minimumIdle."}],"tags":[],"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677517713,"creation_date":1677517713,"answer_id":75583487,"question_id":75583305,"body_markdown":"You&#39;re misinterpreting the meaning of `idleTimeout` in HikariCP: _&quot;This property controls the maximum amount of time that a connection is allowed to sit idle in the pool.&quot;_. Your connection is not idle in the pool: your code has it checked out, so it&#39;s in use. Same with `maxLifeTime`: _&quot; An in-use connection will never be retired, only when it is closed will it then be removed.&quot;_ (quoted text from [HikariCP, Configuration (knobs, baby!)](https://github.com/brettwooldridge/HikariCP#gear-configuration-knobs-baby))\r\n\r\nHikariCP doesn&#39;t have a way to forcibly close connections after a timeout. The only thing it has is `leakDetectionThreshold`, but that will just log that there is a potential connection leak, it will not revoke the connection.\r\n","title":"Why HikariCP connection works after idle timeout","body":"<p>You're misinterpreting the meaning of <code>idleTimeout</code> in HikariCP: <em>&quot;This property controls the maximum amount of time that a connection is allowed to sit idle in the pool.&quot;</em>. Your connection is not idle in the pool: your code has it checked out, so it's in use. Same with <code>maxLifeTime</code>: <em>&quot; An in-use connection will never be retired, only when it is closed will it then be removed.&quot;</em> (quoted text from <a href=\"https://github.com/brettwooldridge/HikariCP#gear-configuration-knobs-baby\" rel=\"nofollow noreferrer\">HikariCP, Configuration (knobs, baby!)</a>)</p>\n<p>HikariCP doesn't have a way to forcibly close connections after a timeout. The only thing it has is <code>leakDetectionThreshold</code>, but that will just log that there is a potential connection leak, it will not revoke the connection.</p>\n"}],"owner":{"account_id":425342,"reputation":4878,"user_id":805896,"accept_rate":76,"display_name":"rahman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":741,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75583487,"answer_count":1,"score":0,"last_activity_date":1677517713,"creation_date":1677516534,"question_id":75583305,"body_markdown":"I am trying to test idle connections behavior. I am expecting my code to run into an exception here, but it doesn&#39;t:\r\n\r\n    static public void testConnectionDS() throws SQLException {\r\n    \tHikariDataSource ds = new HikariDataSource();\r\n    \tds.setJdbcUrl(Jdbc_URL);\r\n    \tds.setUsername(Username);\r\n    \tds.setPassword(Password);\r\n    \r\n    \tds.setMaxLifetime(1000 * 60 * 3);\r\n    \tds.setMinimumIdle(2);\r\n    \tds.setIdleTimeout(1000 * 60 * 2);\r\n    \r\n    \tConnection connection = ds.getConnection();   \t\r\n    \t\r\n    \tsetupTable(connection);\r\n    \ttry {\r\n    \t\tTimeUnit.MILLISECONDS.sleep(ds.getMaxLifetime() + ds.getIdleTimeout() + 1000 * 35); // around 6 miutes\r\n    \t\texecuteQuery(connection);\r\n    \t} catch (Exception e) {\r\n    \t\tSystem.out.println(java.time.LocalTime.now() + &quot; : executeQuery Exception: &quot; + e.getMessage());\r\n    \t\te.printStackTrace(System.out);\r\n    \t}\r\n    }\r\n\r\nPriniting various setting, the seetings are:\r\n\r\n    KeepaliveTime:0\r\n    MaxLifetime:180,000\r\n    IdleTimeout:120,000\r\n    minimumIdle:2\r\n    maximumPoolSize:10\r\n    LeakDetectionThreshold:0\r\n\r\nand my system settings is:\r\n\r\n    % sysctl -a |grep tcp |grep keep\r\n    net.inet.tcp.keepidle: 7200000\r\n    net.inet.tcp.keepintvl: 75000\r\n    net.inet.tcp.keepinit: 75000\r\n    net.inet.tcp.keepcnt: 8\r\n    net.inet.tcp.always_keepalive: 0\r\n    net.inet.mptcp.keepalive: 840\r\n\r\nWith `MaxLifetime` of 3 minutes, `IdleTimeout` of 2 minutes, `minimumIdle` &lt; `maximumPoolSize` and disabled keepalive and leakdetection threshold, this connection should have not been able to execute `executeQuery ` function (which is a simple select query). But it does run into completion successfully.\r\n\r\nWhat am I missing please?\r\n","title":"Why HikariCP connection works after idle timeout","body":"<p>I am trying to test idle connections behavior. I am expecting my code to run into an exception here, but it doesn't:</p>\n<pre><code>static public void testConnectionDS() throws SQLException {\n    HikariDataSource ds = new HikariDataSource();\n    ds.setJdbcUrl(Jdbc_URL);\n    ds.setUsername(Username);\n    ds.setPassword(Password);\n\n    ds.setMaxLifetime(1000 * 60 * 3);\n    ds.setMinimumIdle(2);\n    ds.setIdleTimeout(1000 * 60 * 2);\n\n    Connection connection = ds.getConnection();     \n    \n    setupTable(connection);\n    try {\n        TimeUnit.MILLISECONDS.sleep(ds.getMaxLifetime() + ds.getIdleTimeout() + 1000 * 35); // around 6 miutes\n        executeQuery(connection);\n    } catch (Exception e) {\n        System.out.println(java.time.LocalTime.now() + &quot; : executeQuery Exception: &quot; + e.getMessage());\n        e.printStackTrace(System.out);\n    }\n}\n</code></pre>\n<p>Priniting various setting, the seetings are:</p>\n<pre><code>KeepaliveTime:0\nMaxLifetime:180,000\nIdleTimeout:120,000\nminimumIdle:2\nmaximumPoolSize:10\nLeakDetectionThreshold:0\n</code></pre>\n<p>and my system settings is:</p>\n<pre><code>% sysctl -a |grep tcp |grep keep\nnet.inet.tcp.keepidle: 7200000\nnet.inet.tcp.keepintvl: 75000\nnet.inet.tcp.keepinit: 75000\nnet.inet.tcp.keepcnt: 8\nnet.inet.tcp.always_keepalive: 0\nnet.inet.mptcp.keepalive: 840\n</code></pre>\n<p>With <code>MaxLifetime</code> of 3 minutes, <code>IdleTimeout</code> of 2 minutes, <code>minimumIdle</code> &lt; <code>maximumPoolSize</code> and disabled keepalive and leakdetection threshold, this connection should have not been able to execute <code>executeQuery </code> function (which is a simple select query). But it does run into completion successfully.</p>\n<p>What am I missing please?</p>\n"},{"tags":["java","android","view","android-linearlayout","touch-event"],"answers":[{"comments":[{"owner":{"account_id":10641898,"reputation":182,"user_id":7836625,"display_name":"Ashish Virani"},"score":0,"creation_date":1569038854,"post_id":58028503,"comment_id":102475852,"body_markdown":"your code is right , but i want to touch on linear layout and also on button.i want to manage both of touch at a time.","body":"your code is right , but i want to touch on linear layout and also on button.i want to manage both of touch at a time."},{"owner":{"account_id":5621305,"reputation":255,"user_id":4451052,"display_name":"Keith Kirk"},"score":0,"creation_date":1569228533,"post_id":58028503,"comment_id":102514520,"body_markdown":"I&#39;ve updated my answer to include a section on using on touch listeners.","body":"I&#39;ve updated my answer to include a section on using on touch listeners."}],"tags":[],"owner":{"account_id":5621305,"reputation":255,"user_id":4451052,"display_name":"Keith Kirk"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1569228472,"creation_date":1568982823,"answer_id":58028503,"question_id":58028175,"body_markdown":"Try this:\r\n\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:id=&quot;@+id/parentLayout&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n        &lt;/LinearLayout&gt;\r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/btnTest&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot; /&gt;\r\n    \r\n    &lt;/RelativeLayout&gt;\r\n\r\nAndroid xml views are created like a stack where views lower in the xml file are rendered on top of those earlier in the file.\r\n\r\nIt sounds like your linear layout is intercepting touch events preventing them from being propagated to the button underneath it.\r\n\r\nA way to check this is to set a background on the linear layout, you&#39;ll see that when it has a coloured background the button is not visible.\r\n\r\n**Update:**\r\n\r\nSince there is a requirement to allow touch events for both the button and the layout I&#39;ll extend my solution.\r\n\r\nOnClickListeners are the standard method for receiving tap events on android views. However lower down there are [OnTouchListeners][1] which handle raw touches on a view rather than click events.\r\n\r\nWhen the android screen is touched in any way the event is recorded and android will send an on touch event to the first view that touch event would encounter. OnTouchListeners return a boolean indicating whetehr they consumed the event. If they did not consume the event then it is propagated to the next view down in the hierarchy which the touch event would encounter.\r\n\r\nThis is why your button&#39;s on click was originally never being registered as the layout was consuming the touch event and preventing it from being propagated to the button.\r\n\r\nThis is the standard android behaviour, only one view will handle any single touch event.\r\n\r\nA decision to do otherwise is a sign that you should consider the design for your application and decide if this behaviour is definitely necessary.\r\n\r\nHowever, in case your circumstances are one of the rare ocassions I&#39;ll provide and example on touch listener.\r\n\r\n*Please note, this on touch listener assumes that you are using the xml I posted above as well as he on click listener attached to the button in the original question.*\r\n\r\n    getActivity()\r\n        .findViewById(R.id.parentLayout)\r\n        .setOnTouchListener(new OnTouchListener() {\r\n                @Override\r\n                public boolean onTouch(View v, MotionEvent event) {\r\n                    Log.e(TAG, &quot;onTouch: &quot;);\r\n                    return false;\r\n                }\r\n            });\r\n\r\nThis however will trigger both when user touches the layout and again when they release as those are two seperate motion events.\r\n\r\nTo trigger only on one type of motion event you will need to examine the passed event.\r\n\r\n    getActivity()\r\n            .findViewById(R.id.parentLayout)\r\n            .setOnTouchListener(new OnTouchListener() {\r\n                    @Override\r\n                    public boolean onTouch(View v, MotionEvent event) {\r\n                        if (event.getAction() == MotionEvent.ACTION_UP) {\r\n                           Log.e(TAG, &quot;onTouch: &quot;);\r\n                        }\r\n                        return false;\r\n                    }\r\n                });\r\n\r\nIn this code the log will only occur when the user lifts their finger from the view as [ACTION_UP][2] is the event action for a user lifting their finger.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/view/View.OnTouchListener\r\n  [2]: https://developer.android.com/reference/android/view/MotionEvent.html#ACTION_UP","title":"I have LinearLayout over a button. Is there any way to handle underneath button click event?","body":"<p>Try this:</p>\n\n<pre><code>&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;LinearLayout\n        android:id=\"@+id/parentLayout\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"&gt;\n\n    &lt;/LinearLayout&gt;\n\n    &lt;Button\n        android:id=\"@+id/btnTest\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\" /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>Android xml views are created like a stack where views lower in the xml file are rendered on top of those earlier in the file.</p>\n\n<p>It sounds like your linear layout is intercepting touch events preventing them from being propagated to the button underneath it.</p>\n\n<p>A way to check this is to set a background on the linear layout, you'll see that when it has a coloured background the button is not visible.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Since there is a requirement to allow touch events for both the button and the layout I'll extend my solution.</p>\n\n<p>OnClickListeners are the standard method for receiving tap events on android views. However lower down there are <a href=\"https://developer.android.com/reference/android/view/View.OnTouchListener\" rel=\"nofollow noreferrer\">OnTouchListeners</a> which handle raw touches on a view rather than click events.</p>\n\n<p>When the android screen is touched in any way the event is recorded and android will send an on touch event to the first view that touch event would encounter. OnTouchListeners return a boolean indicating whetehr they consumed the event. If they did not consume the event then it is propagated to the next view down in the hierarchy which the touch event would encounter.</p>\n\n<p>This is why your button's on click was originally never being registered as the layout was consuming the touch event and preventing it from being propagated to the button.</p>\n\n<p>This is the standard android behaviour, only one view will handle any single touch event.</p>\n\n<p>A decision to do otherwise is a sign that you should consider the design for your application and decide if this behaviour is definitely necessary.</p>\n\n<p>However, in case your circumstances are one of the rare ocassions I'll provide and example on touch listener.</p>\n\n<p><em>Please note, this on touch listener assumes that you are using the xml I posted above as well as he on click listener attached to the button in the original question.</em></p>\n\n<pre><code>getActivity()\n    .findViewById(R.id.parentLayout)\n    .setOnTouchListener(new OnTouchListener() {\n            @Override\n            public boolean onTouch(View v, MotionEvent event) {\n                Log.e(TAG, \"onTouch: \");\n                return false;\n            }\n        });\n</code></pre>\n\n<p>This however will trigger both when user touches the layout and again when they release as those are two seperate motion events.</p>\n\n<p>To trigger only on one type of motion event you will need to examine the passed event.</p>\n\n<pre><code>getActivity()\n        .findViewById(R.id.parentLayout)\n        .setOnTouchListener(new OnTouchListener() {\n                @Override\n                public boolean onTouch(View v, MotionEvent event) {\n                    if (event.getAction() == MotionEvent.ACTION_UP) {\n                       Log.e(TAG, \"onTouch: \");\n                    }\n                    return false;\n                }\n            });\n</code></pre>\n\n<p>In this code the log will only occur when the user lifts their finger from the view as <a href=\"https://developer.android.com/reference/android/view/MotionEvent.html#ACTION_UP\" rel=\"nofollow noreferrer\">ACTION_UP</a> is the event action for a user lifting their finger.</p>\n"},{"tags":[],"owner":{"account_id":15307538,"reputation":3,"user_id":11043754,"display_name":"Aarushi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568983044,"creation_date":1568983044,"answer_id":58028547,"question_id":58028175,"body_markdown":"The relative layout is same as Linear Layout which preserves the order of elements added inside it. \r\nyou added Button first and Linear Layout second thats why button has gone below the linear layout hence you are not able to click on it. \r\ntale the linear layout above the button view and you will see the button and do the remaing part by java coding\r\n","title":"I have LinearLayout over a button. Is there any way to handle underneath button click event?","body":"<p>The relative layout is same as Linear Layout which preserves the order of elements added inside it. \nyou added Button first and Linear Layout second thats why button has gone below the linear layout hence you are not able to click on it. \ntale the linear layout above the button view and you will see the button and do the remaing part by java coding</p>\n"},{"tags":[],"owner":{"account_id":27842140,"reputation":1,"user_id":21258415,"display_name":"Wail Smk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677517478,"creation_date":1677094745,"answer_id":75537432,"question_id":58028175,"body_markdown":"Add these lines to you linear layout:\r\n\r\n```\r\nandroid:clickable=&quot;false&quot;\r\nandroid:focusableInTouchMode=&quot;false&quot;\r\nandroid:focusable=&quot;false&quot;\r\n```","title":"I have LinearLayout over a button. Is there any way to handle underneath button click event?","body":"<p>Add these lines to you linear layout:</p>\n<pre><code>android:clickable=&quot;false&quot;\nandroid:focusableInTouchMode=&quot;false&quot;\nandroid:focusable=&quot;false&quot;\n</code></pre>\n"}],"owner":{"account_id":10641898,"reputation":182,"user_id":7836625,"display_name":"Ashish Virani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":652,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1677517478,"creation_date":1568981567,"question_id":58028175,"body_markdown":"i have one android activity xml and his xml inside make main RelativeLayout .that RelativeLayout inside add one Button and one linearlayout and i have clicking on button but not click ,because of that button overly linear layout\r\n\r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:orientation=&quot;vertical&quot;&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/btnTest&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot; /&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/parentLayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n\r\n```\r\n\r\n``` \r\ngetActivity().findViewById(R.id.btnTest).setOnClickListener(new OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Log.e(TAG, &quot;onClick: &quot;);\r\n            }\r\n        });\r\n```\r\n\r\n\r\nclick to print log.","title":"I have LinearLayout over a button. Is there any way to handle underneath button click event?","body":"<p>i have one android activity xml and his xml inside make main RelativeLayout .that RelativeLayout inside add one Button and one linearlayout and i have clicking on button but not click ,because of that button overly linear layout</p>\n\n<pre><code>&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;Button\n        android:id=\"@+id/btnTest\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\" /&gt;\n\n    &lt;LinearLayout\n        android:id=\"@+id/parentLayout\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"&gt;\n\n    &lt;/LinearLayout&gt;\n\n&lt;/RelativeLayout&gt;\n\n</code></pre>\n\n<pre><code>getActivity().findViewById(R.id.btnTest).setOnClickListener(new OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Log.e(TAG, \"onClick: \");\n            }\n        });\n</code></pre>\n\n<p>click to print log.</p>\n"},{"tags":["java","mysql-connector"],"comments":[{"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"score":1,"creation_date":1677514474,"post_id":75582832,"comment_id":133348269,"body_markdown":"Please post code instead of images of code.","body":"Please post code instead of images of code."},{"owner":{"account_id":22881048,"reputation":231,"user_id":17022635,"display_name":"siarhei987"},"score":1,"creation_date":1677516846,"post_id":75582832,"comment_id":133349061,"body_markdown":"*jbdc*:mysql://localhost - jdbc not jbdc","body":"<i>jbdc</i>:mysql://localhost - jdbc not jbdc"},{"owner":{"account_id":2450346,"reputation":5181,"user_id":2136795,"display_name":"Gyro Gearless"},"score":0,"creation_date":1677519332,"post_id":75582832,"comment_id":133349830,"body_markdown":"I wonder why people still do that `Class.forName(...)`, its obsolete for 10 or 15 years or so.","body":"I wonder why people still do that <code>Class.forName(...)</code>, its obsolete for 10 or 15 years or so."},{"owner":{"account_id":27892325,"reputation":1,"user_id":21298421,"display_name":"kadir cali"},"score":0,"creation_date":1677519489,"post_id":75582832,"comment_id":133349883,"body_markdown":"Actually, I didn&#39;t do it in the first place. But when I saw people doing it, I wanted to try it.","body":"Actually, I didn&#39;t do it in the first place. But when I saw people doing it, I wanted to try it."}],"answers":[{"comments":[{"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"score":0,"creation_date":1677514442,"post_id":75582894,"comment_id":133348258,"body_markdown":"Exactly what I was about to suggest.","body":"Exactly what I was about to suggest."},{"owner":{"account_id":27892325,"reputation":1,"user_id":21298421,"display_name":"kadir cali"},"score":0,"creation_date":1677515804,"post_id":75582894,"comment_id":133348721,"body_markdown":"i tried it but it didn&#39;t work","body":"i tried it but it didn&#39;t work"},{"owner":{"account_id":27892529,"reputation":21,"user_id":21298588,"display_name":"user21298588"},"score":0,"creation_date":1677516712,"post_id":75582894,"comment_id":133349024,"body_markdown":"the &quot;com.mysql.cj.jdbc.Driver&quot; looks like a type (the .cj part)","body":"the &quot;com.mysql.cj.jdbc.Driver&quot; looks like a type (the .cj part)"},{"owner":{"account_id":27892529,"reputation":21,"user_id":21298588,"display_name":"user21298588"},"score":0,"creation_date":1677517094,"post_id":75582894,"comment_id":133349160,"body_markdown":"but also what @siarhei987 said, above","body":"but also what @siarhei987 said, above"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1677517310,"post_id":75582894,"comment_id":133349229,"body_markdown":"@user21298588 `com.mysql.cj.jdbc.Driver` is the correct driver classname for MySQL Connector/J 8. The problem is the OP used prefix `jbdc`, not `jdbc`.","body":"@user21298588 <code>com.mysql.cj.jdbc.Driver</code> is the correct driver classname for MySQL Connector/J 8. The problem is the OP used prefix <code>jbdc</code>, not <code>jdbc</code>."},{"owner":{"account_id":27892325,"reputation":1,"user_id":21298421,"display_name":"kadir cali"},"score":0,"creation_date":1677517507,"post_id":75582894,"comment_id":133349292,"body_markdown":"thanks guys, i think it&#39;s time to see a doctor for my eyes","body":"thanks guys, i think it&#39;s time to see a doctor for my eyes"}],"tags":[],"owner":{"account_id":27892529,"reputation":21,"user_id":21298588,"display_name":"user21298588"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677517020,"creation_date":1677514319,"answer_id":75582894,"question_id":75582832,"body_markdown":"I think the double slashes `//world` before your database name might be the issue. Change it to `/world`.","title":"No suitable driver found for JDBC Netbeans","body":"<p>I think the double slashes <code>//world</code> before your database name might be the issue. Change it to <code>/world</code>.</p>\n"}],"owner":{"account_id":27892325,"reputation":1,"user_id":21298421,"display_name":"kadir cali"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1677517020,"creation_date":1677513957,"question_id":75582832,"body_markdown":"\r\n\r\nI just started learning java. I&#39;m trying to make a MySql connection with JDBC, but I get the error &quot;No suitable driver found&quot; even though I add the Connector file to the library.\r\n[here it is the image](https://i.stack.imgur.com/DZVXO.png)\r\n\r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.sql.SQLException;\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n\r\n\r\n    public class Main {\r\n    static String user =&quot;root&quot;;\r\n    static String password=&quot;12345&quot;;\r\n    static String url = &quot;jbdc:mysql://localhost:3306/world&quot;;\r\n        public static void main(String[] args) throws \r\n    ClassNotFoundException  {\r\n \r\n            Connection connection=null;\r\n        \r\n            try {\r\n                Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n                connection=DriverManager.getConnection(url, user, \r\n    password);\r\n                System.out.println(&quot;baglanti basarili&quot;);\r\n            } catch (SQLException e) {\r\n                System.out.println(e);\r\n            }\r\n        }\r\n    }","title":"No suitable driver found for JDBC Netbeans","body":"<p>I just started learning java. I'm trying to make a MySql connection with JDBC, but I get the error &quot;No suitable driver found&quot; even though I add the Connector file to the library.\n<a href=\"https://i.stack.imgur.com/DZVXO.png\" rel=\"nofollow noreferrer\">here it is the image</a></p>\n<pre><code>import java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\n\n\npublic class Main {\nstatic String user =&quot;root&quot;;\nstatic String password=&quot;12345&quot;;\nstatic String url = &quot;jbdc:mysql://localhost:3306/world&quot;;\n    public static void main(String[] args) throws \nClassNotFoundException  {\n\n        Connection connection=null;\n    \n        try {\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n            connection=DriverManager.getConnection(url, user, \npassword);\n            System.out.println(&quot;baglanti basarili&quot;);\n        } catch (SQLException e) {\n            System.out.println(e);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","intellij-idea","javafx"],"owner":{"account_id":24280390,"reputation":39,"user_id":18227003,"display_name":"Ponta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1677517308,"answer_count":0,"score":0,"last_activity_date":1677516970,"creation_date":1677516970,"question_id":75583364,"body_markdown":"When I first create a new project using IntelliJ with JavaFX, I&#39;m given two prebuilt classes, `HelloApplication` and `HelloController`, stored inside a package named `com.example.demo`. Aswell as a fxml file named, `hello-view.fxml`, which is stored inside a directory named `com.example.demo` inside `recources` I can run those without a problem. But as I finished playing around with those,I then decided to delete the classes and the fxml file I was given to begin creating my own fxml files and classes. However, as soon as I did and then tried loading the fxml file /run the program I get this long error message. So I went back, let IntelliJ create another project for me. What I found was that I could always add new fxml files in the same directory as the one IntelliJ created for me. But as soon as I create a new directory inside the resoruce folder, add a `fxml` file, copy the code inside the `fxml` file which works and paste it inside the new `fxml` file inside the new directory, I get the same long error message. \r\n\r\n\r\nHere is the class from where I run to program:\r\n\r\n   \r\n\r\n    package com.example.demo;\r\n    \r\n    import javafx.application.Application;\r\n    import javafx.fxml.FXMLLoader;\r\n    import javafx.scene.Scene;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    public class HelloApplication extends Application {\r\n        @Override\r\n        public void start(Stage stage) throws IOException {\r\n            FXMLLoader fxmlLoader = new FXMLLoader(HelloApplication.class.getResource(&quot;testing.fxml&quot;));\r\n            Scene scene = new Scene(fxmlLoader.load(), 320, 240);\r\n            stage.setTitle(&quot;Hello!&quot;);\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }\r\n\r\nand here is the fxml file which IntelliJ creates for me:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import java.lang.*?&gt;\r\n    &lt;?import java.util.*?&gt;\r\n    &lt;?import javafx.scene.*?&gt;\r\n    &lt;?import javafx.scene.control.*?&gt;\r\n    &lt;?import javafx.scene.layout.*?&gt;\r\n    \r\n    &lt;AnchorPane xmlns=&quot;http://javafx.com/javafx&quot;\r\n                xmlns:fx=&quot;http://javafx.com/fxml&quot;\r\n                fx:controller=&quot;com.example.demo.HelloController&quot;\r\n                prefHeight=&quot;400.0&quot; prefWidth=&quot;600.0&quot;&gt;\r\n    \r\n    &lt;/AnchorPane&gt;\r\n\r\nhere is the long error message:\r\n\r\n    Exception in Application start method\r\n    java.lang.reflect.InvocationTargetException\r\n    \tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:119)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \tat javafx.graphics@19/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:465)\r\n    \tat javafx.graphics@19/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\r\n    \tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1081)\r\n    Caused by: java.lang.RuntimeException: Exception in Application start method\r\n    \tat javafx.graphics@19/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:901)\r\n    \tat javafx.graphics@19/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:1589)\r\n    Caused by: java.lang.IllegalStateException: Location is not set.\r\n    \tat javafx.fxml@19/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2541)\r\n    \tat javafx.fxml@19/javafx.fxml.FXMLLoader.load(FXMLLoader.java:2516)\r\n    \tat com.example.demo/com.example.demo.HelloApplication.start(HelloApplication.java:14)\r\n    \tat javafx.graphics@19/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:847)\r\n    \tat javafx.graphics@19/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:484)\r\n    \tat javafx.graphics@19/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n    \tat javafx.graphics@19/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)\r\n    \tat javafx.graphics@19/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\r\n    Exception running application com.example.demo.HelloApplication\r\n\r\nPlease let me know if any further information is needed in order to figure out the problem. I don&#39;t know what else to show, considering that I&#39;ve tried to keep everything the same between the different `fxml` files, to narrow down what could be wrong.","title":"JavaFX load fxml file issues","body":"<p>When I first create a new project using IntelliJ with JavaFX, I'm given two prebuilt classes, <code>HelloApplication</code> and <code>HelloController</code>, stored inside a package named <code>com.example.demo</code>. Aswell as a fxml file named, <code>hello-view.fxml</code>, which is stored inside a directory named <code>com.example.demo</code> inside <code>recources</code> I can run those without a problem. But as I finished playing around with those,I then decided to delete the classes and the fxml file I was given to begin creating my own fxml files and classes. However, as soon as I did and then tried loading the fxml file /run the program I get this long error message. So I went back, let IntelliJ create another project for me. What I found was that I could always add new fxml files in the same directory as the one IntelliJ created for me. But as soon as I create a new directory inside the resoruce folder, add a <code>fxml</code> file, copy the code inside the <code>fxml</code> file which works and paste it inside the new <code>fxml</code> file inside the new directory, I get the same long error message.</p>\n<p>Here is the class from where I run to program:</p>\n<pre><code>package com.example.demo;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\n\npublic class HelloApplication extends Application {\n    @Override\n    public void start(Stage stage) throws IOException {\n        FXMLLoader fxmlLoader = new FXMLLoader(HelloApplication.class.getResource(&quot;testing.fxml&quot;));\n        Scene scene = new Scene(fxmlLoader.load(), 320, 240);\n        stage.setTitle(&quot;Hello!&quot;);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<p>and here is the fxml file which IntelliJ creates for me:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import java.lang.*?&gt;\n&lt;?import java.util.*?&gt;\n&lt;?import javafx.scene.*?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n\n&lt;AnchorPane xmlns=&quot;http://javafx.com/javafx&quot;\n            xmlns:fx=&quot;http://javafx.com/fxml&quot;\n            fx:controller=&quot;com.example.demo.HelloController&quot;\n            prefHeight=&quot;400.0&quot; prefWidth=&quot;600.0&quot;&gt;\n\n&lt;/AnchorPane&gt;\n</code></pre>\n<p>here is the long error message:</p>\n<pre><code>Exception in Application start method\njava.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:119)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n    at javafx.graphics@19/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:465)\n    at javafx.graphics@19/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n    at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1081)\nCaused by: java.lang.RuntimeException: Exception in Application start method\n    at javafx.graphics@19/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:901)\n    at javafx.graphics@19/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196)\n    at java.base/java.lang.Thread.run(Thread.java:1589)\nCaused by: java.lang.IllegalStateException: Location is not set.\n    at javafx.fxml@19/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2541)\n    at javafx.fxml@19/javafx.fxml.FXMLLoader.load(FXMLLoader.java:2516)\n    at com.example.demo/com.example.demo.HelloApplication.start(HelloApplication.java:14)\n    at javafx.graphics@19/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:847)\n    at javafx.graphics@19/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:484)\n    at javafx.graphics@19/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at javafx.graphics@19/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)\n    at javafx.graphics@19/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\nException running application com.example.demo.HelloApplication\n</code></pre>\n<p>Please let me know if any further information is needed in order to figure out the problem. I don't know what else to show, considering that I've tried to keep everything the same between the different <code>fxml</code> files, to narrow down what could be wrong.</p>\n"},{"tags":["java","tomcat8"],"comments":[{"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":1,"creation_date":1527229371,"post_id":50522683,"comment_id":88057411,"body_markdown":"The first thing to ask is what changes have you made lately which would cause this error to appear?  Tomcat typically doesn&#39;t just &quot;break&quot; on its own; you did something to it (or to your project), and we need to know what that is.","body":"The first thing to ask is what changes have you made lately which would cause this error to appear?  Tomcat typically doesn&#39;t just &quot;break&quot; on its own; you did something to it (or to your project), and we need to know what that is."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1527229527,"post_id":50522683,"comment_id":88057484,"body_markdown":"*invalid LOC header (bad signature)*  Looks like you have a corrupted zip/jar/war in your tomcat directory","body":"<i>invalid LOC header (bad signature)</i>  Looks like you have a corrupted zip/jar/war in your tomcat directory"},{"owner":{"account_id":6712687,"reputation":171,"user_id":5175557,"accept_rate":60,"display_name":"Shubham Khare"},"score":0,"creation_date":1527229678,"post_id":50522683,"comment_id":88057542,"body_markdown":"I didn&#39;t modify any tomcat files. I was running the project as usual and I got this error. Finally I made fresh download but still I am getting this error. However If I do not deploy the project I am able to run tomcat independently. Also I am able to maven build the project without any errors.","body":"I didn&#39;t modify any tomcat files. I was running the project as usual and I got this error. Finally I made fresh download but still I am getting this error. However If I do not deploy the project I am able to run tomcat independently. Also I am able to maven build the project without any errors."}],"answers":[{"tags":[],"owner":{"account_id":1867473,"reputation":3093,"user_id":1690657,"accept_rate":90,"display_name":"Alex P."},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1527244125,"creation_date":1527244125,"answer_id":50527122,"question_id":50522683,"body_markdown":"Somewhere in your project there is a corrupted library (jar), at least that&#39;s how it was with me. I deleted my local ***.m2/repository*** folder and downloaded all dependencies again. If you know exactly which jar is the problem then delete only that one from your local repository. Then build your project again and if dependencies are downloaded correctly your tomcat should be able to run again. \r\n\r\nAlso just to be sure nothing is cached, delete everything that is inside the ***/tomcat8/work/Catalina/localhost*** path. It&#39;s the working directory of tomcat and files that tomcat needs during run time are written there. I don&#39;t think it&#39;s affected, but it doesn&#39;t hurt either.","title":"org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]","body":"<p>Somewhere in your project there is a corrupted library (jar), at least that's how it was with me. I deleted my local <strong><em>.m2/repository</em></strong> folder and downloaded all dependencies again. If you know exactly which jar is the problem then delete only that one from your local repository. Then build your project again and if dependencies are downloaded correctly your tomcat should be able to run again. </p>\n\n<p>Also just to be sure nothing is cached, delete everything that is inside the <strong><em>/tomcat8/work/Catalina/localhost</em></strong> path. It's the working directory of tomcat and files that tomcat needs during run time are written there. I don't think it's affected, but it doesn't hurt either.</p>\n"},{"tags":[],"owner":{"account_id":15214588,"reputation":325,"user_id":10978300,"display_name":"Ankit Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1571222755,"creation_date":1571220477,"answer_id":58410787,"question_id":50522683,"body_markdown":"One or two projects which you are adding to the tomcat may be corrupted. In order to fix it all you need to do is.\r\n\r\n1. deleted the project from eclipse\r\n2. go the project folder of your&#39;s and deleted .settings and .classpath file from the project.\r\n3. Re-import the project in eclipse and then build\r\n\r\nThis will definitely solve your problem","title":"org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]","body":"<p>One or two projects which you are adding to the tomcat may be corrupted. In order to fix it all you need to do is.</p>\n\n<ol>\n<li>deleted the project from eclipse</li>\n<li>go the project folder of your's and deleted .settings and .classpath file from the project.</li>\n<li>Re-import the project in eclipse and then build</li>\n</ol>\n\n<p>This will definitely solve your problem</p>\n"},{"tags":[],"owner":{"account_id":4457148,"reputation":861,"user_id":3627023,"accept_rate":43,"display_name":"dozer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628663085,"creation_date":1628663085,"answer_id":68736953,"question_id":50522683,"body_markdown":"I had this issue on Eclipse\r\n\r\nRight click on project, select Maven --&gt; Update Project --&gt; \r\nCheck Update project configurations, refresh workspace resources, clean projects and also &quot;Forced Update of Snapshots/Releases&quot;. The last bit was also important for tomcat to work.","title":"org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]","body":"<p>I had this issue on Eclipse</p>\n<p>Right click on project, select Maven --&gt; Update Project --&gt;\nCheck Update project configurations, refresh workspace resources, clean projects and also &quot;Forced Update of Snapshots/Releases&quot;. The last bit was also important for tomcat to work.</p>\n"},{"tags":[],"owner":{"account_id":27892848,"reputation":1,"user_id":21298838,"display_name":"user21298838"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677516717,"creation_date":1677516717,"answer_id":75583323,"question_id":50522683,"body_markdown":"Actually for my case it is working if I maintain the folder structure as below. initially I was missing with Java Resources and then I have created and put my package under Java Resources. then it worked fine for me.\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kp5f7.png","title":"org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]","body":"<p>Actually for my case it is working if I maintain the folder structure as below. initially I was missing with Java Resources and then I have created and put my package under Java Resources. then it worked fine for me.\n<a href=\"https://i.stack.imgur.com/kp5f7.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}],"owner":{"account_id":6712687,"reputation":171,"user_id":5175557,"accept_rate":60,"display_name":"Shubham Khare"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21902,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":50527122,"answer_count":4,"score":3,"last_activity_date":1677516717,"creation_date":1527229172,"question_id":50522683,"body_markdown":"The project was smoothly running suddenly I got this error in console log. I am using Tomcat version 8.0.35. I have tried everything from clean build to updating the project. I know there are already problems that are solved but none of the solutions worked for me.\r\n\r\n    java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/eASI]]\r\n    \tat java.util.concurrent.FutureTask.report(Unknown Source)\r\n    \tat java.util.concurrent.FutureTask.get(Unknown Source)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:941)\r\n    \tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:872)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1421)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1411)\r\n    \tat java.util.concurrent.FutureTask.run(Unknown Source)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    \tat java.lang.Thread.run(Unknown Source)\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/eASI]]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\r\n    \t... 6 more\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [org.apache.catalina.webresources.StandardRoot@4ee2dba7]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\r\n    \tat org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4907)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5042)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \t... 6 more\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to initialize component [org.apache.catalina.webresources.JarResourceSet@ba0af7c]\r\n    \tat org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:112)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)\r\n    \tat org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:724)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \t... 9 more\r\n    Caused by: java.lang.IllegalArgumentException: java.util.zip.ZipException: invalid LOC header (bad signature)\r\n    \tat org.apache.catalina.webresources.AbstractSingleArchiveResourceSet.initInternal(AbstractSingleArchiveResourceSet.java:142)\r\n    \tat org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\r\n    \t... 12 more\r\n    Caused by: java.util.zip.ZipException: invalid LOC header (bad signature)\r\n    \tat java.util.zip.ZipFile.read(Native Method)\r\n    \tat java.util.zip.ZipFile.access$1400(Unknown Source)\r\n    \tat java.util.zip.ZipFile$ZipFileInputStream.read(Unknown Source)\r\n    \tat java.util.zip.ZipFile$ZipFileInflaterInputStream.fill(Unknown Source)\r\n    \tat java.util.zip.InflaterInputStream.read(Unknown Source)\r\n    \tat sun.misc.IOUtils.readFully(Unknown Source)\r\n    \tat java.util.jar.JarFile.getBytes(Unknown Source)\r\n    \tat java.util.jar.JarFile.getManifestFromReference(Unknown Source)\r\n    \tat java.util.jar.JarFile.getManifest(Unknown Source)\r\n    \tat org.apache.catalina.webresources.AbstractSingleArchiveResourceSet.initInternal(AbstractSingleArchiveResourceSet.java:140)\r\n    \t... 13 more\r\n    \r\n    May 25, 2018 11:02:04 AM org.apache.catalina.core.ContainerBase startInternal\r\n    SEVERE: A child container failed during start\r\n    java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]\r\n    \tat java.util.concurrent.FutureTask.report(Unknown Source)\r\n    \tat java.util.concurrent.FutureTask.get(Unknown Source)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:941)\r\n    \tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:262)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:422)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:793)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \tat org.apache.catalina.startup.Catalina.start(Catalina.java:681)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:353)\r\n    \tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:493)\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1421)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1411)\r\n    \tat java.util.concurrent.FutureTask.run(Unknown Source)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    \tat java.lang.Thread.run(Unknown Source)\r\n    Caused by: org.apache.catalina.LifecycleException: A child container failed during start\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:949)\r\n    \tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:872)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \t... 6 more\r\n    \r\n    May 25, 2018 11:02:04 AM org.apache.catalina.startup.Catalina start\r\n    SEVERE: The required Server component failed to start so Tomcat is unable to start.\r\n    org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\r\n    \tat org.apache.catalina.startup.Catalina.start(Catalina.java:681)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:353)\r\n    \tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:493)\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\r\n    \tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:793)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \t... 7 more\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\r\n    \tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:422)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \t... 9 more\r\n    Caused by: org.apache.catalina.LifecycleException: A child container failed during start\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:949)\r\n    \tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:262)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \t... 11 more\r\n\r\nPlease advice me what to do? Also I have searched everywhere in the pom file and other dependencies are also been generated.","title":"org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]","body":"<p>The project was smoothly running suddenly I got this error in console log. I am using Tomcat version 8.0.35. I have tried everything from clean build to updating the project. I know there are already problems that are solved but none of the solutions worked for me.</p>\n\n<pre><code>java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/eASI]]\n    at java.util.concurrent.FutureTask.report(Unknown Source)\n    at java.util.concurrent.FutureTask.get(Unknown Source)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:941)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:872)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1421)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1411)\n    at java.util.concurrent.FutureTask.run(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/eASI]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\n    ... 6 more\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [org.apache.catalina.webresources.StandardRoot@4ee2dba7]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\n    at org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4907)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5042)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    ... 6 more\nCaused by: org.apache.catalina.LifecycleException: Failed to initialize component [org.apache.catalina.webresources.JarResourceSet@ba0af7c]\n    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:112)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)\n    at org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:724)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    ... 9 more\nCaused by: java.lang.IllegalArgumentException: java.util.zip.ZipException: invalid LOC header (bad signature)\n    at org.apache.catalina.webresources.AbstractSingleArchiveResourceSet.initInternal(AbstractSingleArchiveResourceSet.java:142)\n    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\n    ... 12 more\nCaused by: java.util.zip.ZipException: invalid LOC header (bad signature)\n    at java.util.zip.ZipFile.read(Native Method)\n    at java.util.zip.ZipFile.access$1400(Unknown Source)\n    at java.util.zip.ZipFile$ZipFileInputStream.read(Unknown Source)\n    at java.util.zip.ZipFile$ZipFileInflaterInputStream.fill(Unknown Source)\n    at java.util.zip.InflaterInputStream.read(Unknown Source)\n    at sun.misc.IOUtils.readFully(Unknown Source)\n    at java.util.jar.JarFile.getBytes(Unknown Source)\n    at java.util.jar.JarFile.getManifestFromReference(Unknown Source)\n    at java.util.jar.JarFile.getManifest(Unknown Source)\n    at org.apache.catalina.webresources.AbstractSingleArchiveResourceSet.initInternal(AbstractSingleArchiveResourceSet.java:140)\n    ... 13 more\n\nMay 25, 2018 11:02:04 AM org.apache.catalina.core.ContainerBase startInternal\nSEVERE: A child container failed during start\njava.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]\n    at java.util.concurrent.FutureTask.report(Unknown Source)\n    at java.util.concurrent.FutureTask.get(Unknown Source)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:941)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:262)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:422)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:793)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:681)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:353)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:493)\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1421)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1411)\n    at java.util.concurrent.FutureTask.run(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: org.apache.catalina.LifecycleException: A child container failed during start\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:949)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:872)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    ... 6 more\n\nMay 25, 2018 11:02:04 AM org.apache.catalina.startup.Catalina start\nSEVERE: The required Server component failed to start so Tomcat is unable to start.\norg.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:681)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:353)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:493)\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:793)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    ... 7 more\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:422)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    ... 9 more\nCaused by: org.apache.catalina.LifecycleException: A child container failed during start\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:949)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:262)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    ... 11 more\n</code></pre>\n\n<p>Please advice me what to do? Also I have searched everywhere in the pom file and other dependencies are also been generated.</p>\n"},{"tags":["java","lib"],"comments":[{"owner":{"account_id":14320275,"reputation":1315,"user_id":10343888,"display_name":"fatih"},"score":0,"creation_date":1677515755,"post_id":75583128,"comment_id":133348698,"body_markdown":"Your `java` version not compatible to project gradle file I guess.","body":"Your <code>java</code> version not compatible to project gradle file I guess."},{"owner":{"account_id":22881048,"reputation":231,"user_id":17022635,"display_name":"siarhei987"},"score":0,"creation_date":1677516604,"post_id":75583128,"comment_id":133348986,"body_markdown":"From [List of Java class file format major version](https://stackoverflow.com/questions/9170832/list-of-java-class-file-format-major-version-numbers) 63 is for Java 19 and according to [Gradle Compatibility Matrix](https://docs.gradle.org/current/userguide/compatibility.html) the 19th is supported from Gradle 7.6, but your version is 7.5.1","body":"From <a href=\"https://stackoverflow.com/questions/9170832/list-of-java-class-file-format-major-version-numbers\">List of Java class file format major version</a> 63 is for Java 19 and according to <a href=\"https://docs.gradle.org/current/userguide/compatibility.html\" rel=\"nofollow noreferrer\">Gradle Compatibility Matrix</a> the 19th is supported from Gradle 7.6, but your version is 7.5.1"},{"owner":{"account_id":422872,"reputation":656,"user_id":801899,"display_name":"londonBadger"},"score":0,"creation_date":1677517918,"post_id":75583128,"comment_id":133349403,"body_markdown":"Be aware that you will get warnings (and potential runtime issues) about unsupported JNI if you use Java 19 with libGDX 1.11.","body":"Be aware that you will get warnings (and potential runtime issues) about unsupported JNI if you use Java 19 with libGDX 1.11."}],"owner":{"account_id":23198917,"reputation":17,"user_id":18440644,"display_name":"Richard Coterie"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677515599,"creation_date":1677515599,"question_id":75583128,"body_markdown":"```\r\n* What went wrong:\r\nCould not open settings generic class cache for settings file &#39;/Users / richard / Desktop/Eclipse_WorkSpace/settings.\r\ngradle&#39; (/Users / richard / gradle/ caches / 7.5.1/scripts /dn611r5pg3bcsc902xue6326v).\r\n&gt; BUG! exception in phase &#39;semantic analysis&#39; in source unit BuildScript_&#39; Unsupported class file major version 63\r\n```\r\nI also try deleting the error file and rebuild itself but it still doesn&#39;t work\r\n\r\n","title":"libGDX cannot successfully generate project for java project","body":"<pre><code>* What went wrong:\nCould not open settings generic class cache for settings file '/Users / richard / Desktop/Eclipse_WorkSpace/settings.\ngradle' (/Users / richard / gradle/ caches / 7.5.1/scripts /dn611r5pg3bcsc902xue6326v).\n&gt; BUG! exception in phase 'semantic analysis' in source unit BuildScript_' Unsupported class file major version 63\n</code></pre>\n<p>I also try deleting the error file and rebuild itself but it still doesn't work</p>\n"},{"tags":["java","spring","spring-boot","mybatis","spring-mybatis"],"comments":[{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":2,"creation_date":1677495593,"post_id":75579569,"comment_id":133342298,"body_markdown":"life hack - dont start your transactions in controllers but rather in services.","body":"life hack - dont start your transactions in controllers but rather in services."}],"answers":[{"comments":[{"owner":{"account_id":9160569,"reputation":61,"user_id":6812019,"display_name":"Jayesslee"},"score":0,"creation_date":1677546813,"post_id":75579611,"comment_id":133355686,"body_markdown":"In view of the situation where this exception occurs externally, how to use the @Transactional annotation to make the transaction roll back normally?","body":"In view of the situation where this exception occurs externally, how to use the @Transactional annotation to make the transaction roll back normally?"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1677576151,"post_id":75579611,"comment_id":133360536,"body_markdown":"It sholdnt as processing is done. Eg in gambling, would your like your bet to NOT be accepted only because you had poor internet connection? Anyhow, you always will have a layer above currently tarnsaction handling layer that might fail and you will not be able to rollback it then. **As for how?** I dont know and actually I dont really care to find out as it is a bad practice imo.","body":"It sholdnt as processing is done. Eg in gambling, would your like your bet to NOT be accepted only because you had poor internet connection? Anyhow, you always will have a layer above currently tarnsaction handling layer that might fail and you will not be able to rollback it then. <b>As for how?</b> I dont know and actually I dont really care to find out as it is a bad practice imo."},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1677576707,"post_id":75579611,"comment_id":133360714,"body_markdown":"Its like doing buying and estate and sending the confirmation via traditional mail. You dont expect the transaction to be invalidated only because mailman got sick and didnt deliver the confirmation to the recipient right? Nor you shoud here.","body":"Its like doing buying and estate and sending the confirmation via traditional mail. You dont expect the transaction to be invalidated only because mailman got sick and didnt deliver the confirmation to the recipient right? Nor you shoud here."}],"tags":[],"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677496108,"creation_date":1677495669,"answer_id":75579611,"question_id":75579569,"body_markdown":"`HttpMessageConversionException` happens outside of your controller method (inside spring MVC guts but after handler method) as whatever your method returns, cannot be serialized to a requested form. Therfore, transaction is started, commited and then exception is thrown.\r\n\r\nWhen you throw exception &quot;manually&quot; it is done from withing the method causing TX to be rolled back as expected. ","title":"Spring boot @Transactional does not work when org.springframework.http.converter.HttpMessageConversionException is thrown?","body":"<p><code>HttpMessageConversionException</code> happens outside of your controller method (inside spring MVC guts but after handler method) as whatever your method returns, cannot be serialized to a requested form. Therfore, transaction is started, commited and then exception is thrown.</p>\n<p>When you throw exception &quot;manually&quot; it is done from withing the method causing TX to be rolled back as expected.</p>\n"},{"comments":[{"owner":{"account_id":9160569,"reputation":61,"user_id":6812019,"display_name":"Jayesslee"},"score":0,"creation_date":1677546819,"post_id":75580084,"comment_id":133355688,"body_markdown":"In view of the situation where this exception occurs externally, how to use the @Transactional annotation to make the transaction roll back normally?","body":"In view of the situation where this exception occurs externally, how to use the @Transactional annotation to make the transaction roll back normally?"},{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1677574402,"post_id":75580084,"comment_id":133360008,"body_markdown":"If you want to roll back if the json serialization fails you can, for example, make the controller return String and manually create the json like this: `return mapper.writeValueAsString(response)`.\n\nThough, I believe this might not be the best design because they represent different layers of abstraction. There should be better ways of fixing this: you can start by looking at this class `com.digiwin.vssmp_backend.dto.response.Response` or check how to return an empty body: https://stackoverflow.com/questions/26550124/spring-returning-empty-http-responses-with-responseentityvoid-doesnt-work","body":"If you want to roll back if the json serialization fails you can, for example, make the controller return String and manually create the json like this: <code>return mapper.writeValueAsString(response)</code>.  Though, I believe this might not be the best design because they represent different layers of abstraction. There should be better ways of fixing this: you can start by looking at this class <code>com.digiwin.vssmp_backend.dto.response.Response</code> or check how to return an empty body: <a href=\"https://stackoverflow.com/questions/26550124/spring-returning-empty-http-responses-with-responseentityvoid-doesnt-work\" title=\"spring returning empty http responses with responseentityvoid doesnt work\">stackoverflow.com/questions/26550124/&hellip;</a>"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1677576420,"post_id":75580084,"comment_id":133360610,"body_markdown":"Then servlet layer can fail due to a multilude of reasons as OP still wants to TX to be rolled back because of reasons...","body":"Then servlet layer can fail due to a multilude of reasons as OP still wants to TX to be rolled back because of reasons..."}],"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677498469,"creation_date":1677498469,"answer_id":75580084,"question_id":75579569,"body_markdown":"The transaction is not rolled back because *createUser()* is executed successfully and the exception is thrown later when Jackson tries to serialize your Response to json. You can double-check this by creating a unit-test and directly call the *createUser* method from the controller, without the web layer.\r\n\r\n\r\nThe exception is thrown because your Response does not expose any data (or it does not contain any). For instance, if you run this simple unit test you will get the same exception:\r\n\r\n    @Test\r\n\tvoid test() throws Exception {\r\n\t\tvar bean = new MyObject(123);\r\n\t\tvar mapper = new ObjectMapper();\r\n        // will throw the same exception\r\n        System.out.println(mapper.writeValueAsString(bean)); \r\n    }\r\n\r\n\tclass MyObject {\r\n\t\tprivate int value;\r\n\r\n\t\tpublic MyObject(int value) {\r\n\t\t\tthis.value = value;\r\n\t\t}\r\n\t}\r\n\r\nThough, if you add a getter to the MyObject class and re-run the test, this time it will pass.","title":"Spring boot @Transactional does not work when org.springframework.http.converter.HttpMessageConversionException is thrown?","body":"<p>The transaction is not rolled back because <em>createUser()</em> is executed successfully and the exception is thrown later when Jackson tries to serialize your Response to json. You can double-check this by creating a unit-test and directly call the <em>createUser</em> method from the controller, without the web layer.</p>\n<p>The exception is thrown because your Response does not expose any data (or it does not contain any). For instance, if you run this simple unit test you will get the same exception:</p>\n<pre><code>@Test\nvoid test() throws Exception {\n    var bean = new MyObject(123);\n    var mapper = new ObjectMapper();\n    // will throw the same exception\n    System.out.println(mapper.writeValueAsString(bean)); \n}\n\nclass MyObject {\n    private int value;\n\n    public MyObject(int value) {\n        this.value = value;\n    }\n}\n</code></pre>\n<p>Though, if you add a getter to the MyObject class and re-run the test, this time it will pass.</p>\n"}],"owner":{"account_id":9160569,"reputation":61,"user_id":6812019,"display_name":"Jayesslee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":241,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75579611,"answer_count":2,"score":0,"last_activity_date":1677515483,"creation_date":1677495464,"question_id":75579569,"body_markdown":"I have a rest controller, it will insert 1 record per request,like:\r\n\r\n```lang-java\r\n\r\n@Transactional(rollbackFor = Exception.class)\r\n@PostMapping(&quot;/create_user&quot;)\r\npublic Response&lt;Empty&gt; createUser(@RequestBody Request&lt;CreateUserRequest&gt; body) {\r\n    String openId = body.getData().getOpenId();\r\n    String phoneNumber = body.getData().getPhoneNumber();\r\n    weChatMapper.createWechatUser(WechatUser.builder()\r\n            .openId(openId)\r\n            .phoneNumber(phoneNumber)\r\n            .build());\r\n    return Response.of();\r\n}\r\n```\r\n\r\nThen when i call it , throws ```org.springframework.http.converter.HttpMessageConversionException```, seems that somthing goes wrong when serializing the response.Then i check database, i find that 1 record has been inserted, not rolling back.\r\nThen i add a exception throwing code before returning, like:\r\n```lang-java\r\n@Transactional(rollbackFor = Exception.class)\r\n@PostMapping(&quot;/create_user&quot;)\r\npublic Response&lt;Empty&gt; createUser(@RequestBody Request&lt;CreateUserRequest&gt; body) {\r\n    String openId = body.getData().getOpenId();\r\n    String phoneNumber = body.getData().getPhoneNumber();\r\n    weChatMapper.createWechatUser(WechatUser.builder()\r\n            .openId(openId)\r\n            .phoneNumber(phoneNumber)\r\n            .build());\r\n    if (true) {\r\n        throw new IllegalArgumentException(&quot;my test exception&quot;);\r\n    }\r\n    return Response.of();\r\n }\r\n```\r\n\r\nCall again, the record is not inserted, roll back as expected.But why...? It&#39;s very strange.How to make it roll back at this kind of situation?\r\n\r\nThe complete trace:\r\n&lt;pre&gt;\r\n2023-02-27 18:42:36.100 ERROR 36244 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.http.converter.HttpMessageConversionException: Type definition error: [simple type, class com.digiwin.vssmp_backend.entity.Empty]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class com.digiwin.vssmp_backend.entity.Empty and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: com.digiwin.vssmp_backend.dto.response.Response[&quot;data&quot;])] with root cause\r\n\r\ncom.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class com.digiwin.vssmp_backend.entity.Empty and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: com.digiwin.vssmp_backend.dto.response.Response[&quot;data&quot;])\r\n\tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\r\n\tat com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1300) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\r\n\tat com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:400) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\r\n\tat com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.failForEmpty(UnknownSerializer.java:46) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\r\n\tat com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.serialize(UnknownSerializer.java:29) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\r\n\tat com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1518) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\r\n\tat com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1007) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\r\n\tat org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:456) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:104) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:290) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.handleReturnValue(RequestResponseBodyMethodProcessor.java:183) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:135) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:696) ~[tomcat-embed-core-9.0.71.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:779) ~[tomcat-embed-core-9.0.71.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat java.lang.Thread.run(Thread.java:750) [na:1.8.0_332]\r\n\r\n&lt;/pre&gt;\r\n","title":"Spring boot @Transactional does not work when org.springframework.http.converter.HttpMessageConversionException is thrown?","body":"<p>I have a rest controller, it will insert 1 record per request,like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Transactional(rollbackFor = Exception.class)\n@PostMapping(&quot;/create_user&quot;)\npublic Response&lt;Empty&gt; createUser(@RequestBody Request&lt;CreateUserRequest&gt; body) {\n    String openId = body.getData().getOpenId();\n    String phoneNumber = body.getData().getPhoneNumber();\n    weChatMapper.createWechatUser(WechatUser.builder()\n            .openId(openId)\n            .phoneNumber(phoneNumber)\n            .build());\n    return Response.of();\n}\n</code></pre>\n<p>Then when i call it , throws <code>org.springframework.http.converter.HttpMessageConversionException</code>, seems that somthing goes wrong when serializing the response.Then i check database, i find that 1 record has been inserted, not rolling back.\nThen i add a exception throwing code before returning, like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional(rollbackFor = Exception.class)\n@PostMapping(&quot;/create_user&quot;)\npublic Response&lt;Empty&gt; createUser(@RequestBody Request&lt;CreateUserRequest&gt; body) {\n    String openId = body.getData().getOpenId();\n    String phoneNumber = body.getData().getPhoneNumber();\n    weChatMapper.createWechatUser(WechatUser.builder()\n            .openId(openId)\n            .phoneNumber(phoneNumber)\n            .build());\n    if (true) {\n        throw new IllegalArgumentException(&quot;my test exception&quot;);\n    }\n    return Response.of();\n }\n</code></pre>\n<p>Call again, the record is not inserted, roll back as expected.But why...? It's very strange.How to make it roll back at this kind of situation?</p>\n<p>The complete trace:</p>\n<pre>\n2023-02-27 18:42:36.100 ERROR 36244 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.http.converter.HttpMessageConversionException: Type definition error: [simple type, class com.digiwin.vssmp_backend.entity.Empty]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class com.digiwin.vssmp_backend.entity.Empty and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: com.digiwin.vssmp_backend.dto.response.Response[\"data\"])] with root cause\n\ncom.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class com.digiwin.vssmp_backend.entity.Empty and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: com.digiwin.vssmp_backend.dto.response.Response[\"data\"])\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\n    at com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1300) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\n    at com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:400) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\n    at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.failForEmpty(UnknownSerializer.java:46) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\n    at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.serialize(UnknownSerializer.java:29) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\n    at com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1518) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\n    at com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1007) ~[jackson-databind-2.13.4.2.jar:2.13.4.2]\n    at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:456) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:104) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:290) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.handleReturnValue(RequestResponseBodyMethodProcessor.java:183) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:135) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:696) ~[tomcat-embed-core-9.0.71.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:779) ~[tomcat-embed-core-9.0.71.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.71.jar:9.0.71]\n    at java.lang.Thread.run(Thread.java:750) [na:1.8.0_332]\n\n</pre>\n"},{"tags":["java","android","webp","vp8","riff"],"answers":[{"tags":[],"owner":{"account_id":12869869,"reputation":1426,"user_id":9308731,"display_name":"CrackerKSR"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672859578,"creation_date":1672859578,"answer_id":75010193,"question_id":74993962,"body_markdown":"Found out the solution by examining more.\r\nreading ALPH:\r\nWe need to store the alpha data (Alpha BitStream) somewhere so that we can use that while writing the frames.\r\nwriting ANMF:\r\nwhile writing ANMF, after writing ANMF metadata we need to write the ALPH header &gt; BitStream length &gt; BitStream respectively. Also we must add this length to ANMF chunk size. The ALPH chunk must be written before VP8/VP8L chunk.\r\n\r\n```java\r\nprivate void writeAnmf(WebpChunk chunk) throws IOException {\r\n\t\twrite(new byte[] { &#39;A&#39;, &#39;N&#39;, &#39;M&#39;, &#39;F&#39; });\r\n\r\n\t\tint alphSize = 0;\r\n\t\tif(chunk.alphaData != null){\r\n\t\t\talphSize = 8+chunk.alphaData.length;\r\n\t\t}\r\n\r\n\t\twriteUInt32(chunk.payload.length + 24 + alphSize);\r\n\r\n\t\twriteUInt24(chunk.x); // 3 bytes (3)\r\n\t\twriteUInt24(chunk.y); // 3 bytes (6)\r\n\t\twriteUInt24(chunk.width); // 3 bytes (9)\r\n\t\twriteUInt24(chunk.height); // 3 bytes (12)\r\n\t\twriteUInt24(chunk.duration); // 3 bytes (15)\r\n\r\n\t\tBitSet bs = new BitSet(8);\r\n\t\tbs.set(0, true);\r\n\t\tbs.set(1, chunk.disposeToBackgroundColor);\r\n\t\twrite(bitSetToBytes(bs, 1)); // 1 byte (16)\r\n\r\n\t\tif (chunk.alphaData != null){\r\n\t\t\twrite(new byte[] { &#39;A&#39;, &#39;L&#39;, &#39;P&#39;, &#39;H&#39; }); // 4\r\n\t\t\twriteUInt32(chunk.alphaData.length); // 4\r\n\t\t\twrite(chunk.alphaData);\r\n\t\t\tLog.e(&quot;WebpDemo&quot;,&quot;ALPH &quot;);\r\n\t\t}\r\n\r\n\r\n\t\tif (chunk.isLossless)\r\n\t\t\twrite(new byte[] { &#39;V&#39;, &#39;P&#39;, &#39;8&#39;, &#39;L&#39; }); // 4 bytes (20)\r\n\t\telse\r\n\t\t\twrite(new byte[] { &#39;V&#39;, &#39;P&#39;, &#39;8&#39;, &#39; &#39; });\r\n\r\n\t\twriteUInt32(chunk.payload.length); // 4 bytes (24)\r\n\t\twrite(chunk.payload);\r\n\r\n\r\n\t}\r\n```","title":"How to read and write VP8L and ALPH chunks of Webp images","body":"<p>Found out the solution by examining more.\nreading ALPH:\nWe need to store the alpha data (Alpha BitStream) somewhere so that we can use that while writing the frames.\nwriting ANMF:\nwhile writing ANMF, after writing ANMF metadata we need to write the ALPH header &gt; BitStream length &gt; BitStream respectively. Also we must add this length to ANMF chunk size. The ALPH chunk must be written before VP8/VP8L chunk.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void writeAnmf(WebpChunk chunk) throws IOException {\n        write(new byte[] { 'A', 'N', 'M', 'F' });\n\n        int alphSize = 0;\n        if(chunk.alphaData != null){\n            alphSize = 8+chunk.alphaData.length;\n        }\n\n        writeUInt32(chunk.payload.length + 24 + alphSize);\n\n        writeUInt24(chunk.x); // 3 bytes (3)\n        writeUInt24(chunk.y); // 3 bytes (6)\n        writeUInt24(chunk.width); // 3 bytes (9)\n        writeUInt24(chunk.height); // 3 bytes (12)\n        writeUInt24(chunk.duration); // 3 bytes (15)\n\n        BitSet bs = new BitSet(8);\n        bs.set(0, true);\n        bs.set(1, chunk.disposeToBackgroundColor);\n        write(bitSetToBytes(bs, 1)); // 1 byte (16)\n\n        if (chunk.alphaData != null){\n            write(new byte[] { 'A', 'L', 'P', 'H' }); // 4\n            writeUInt32(chunk.alphaData.length); // 4\n            write(chunk.alphaData);\n            Log.e(&quot;WebpDemo&quot;,&quot;ALPH &quot;);\n        }\n\n\n        if (chunk.isLossless)\n            write(new byte[] { 'V', 'P', '8', 'L' }); // 4 bytes (20)\n        else\n            write(new byte[] { 'V', 'P', '8', ' ' });\n\n        writeUInt32(chunk.payload.length); // 4 bytes (24)\n        write(chunk.payload);\n\n\n    }\n</code></pre>\n"}],"owner":{"account_id":12869869,"reputation":1426,"user_id":9308731,"display_name":"CrackerKSR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":253,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75010193,"answer_count":1,"score":1,"last_activity_date":1677515293,"creation_date":1672752231,"question_id":74993962,"body_markdown":"I am trying [these classes][1] written in pure java code which used for encode the animated WEBP from list of static images. It is based on [Google&#39;s Webp container specification][2].\r\nI tried to modify the codes to fix some errors. Now \r\n\r\nProblem: If image contains VP8L then encoder does not produce valid animated WEBP image (its blank image with 2.5MB size, Supplying 2 images with size of input images).\r\nIf I set the quality while compressing WEBP to below 100 and then it read chunks as RIFF-WEBP-VP8X-ICCP-ALPH-VP8 in sequence. It creates an animated images with solid black background. It drops the transparent background data maybe, but it animates through each frame.\r\n\r\nCode for writing ANMF chunk:\r\n```java\r\n// ANMF chunk\r\nprivate void writeAnmf(WebpChunk chunk) throws IOException {\r\n\r\n   write(new byte[] { &#39;A&#39;, &#39;N&#39;, &#39;M&#39;, &#39;F&#39; });\r\n   writeUInt32(chunk.payload.length + 24);\r\n\r\n   writeUInt24(chunk.x); // 3 bytes (3)\r\n   writeUInt24(chunk.y); // 3 bytes (6)\r\n   writeUInt24(chunk.width); // 3 bytes (9)\r\n   writeUInt24(chunk.height); // 3 bytes (12)\r\n   writeUInt24(chunk.duration); // 3 bytes (15)\r\n\r\n   BitSet bs = new BitSet(6);\r\n   bs.set(1, chunk.useAlphaBlending);\r\n   bs.set(0, chunk.disposeToBackgroundColor);\r\n   write(bitSetToBytes(bs, 1)); // 1 byte (16)\r\n\r\n\r\n   if (chunk.isLossless) {\r\n      write(new byte[] { &#39;V&#39;, &#39;P&#39;, &#39;8&#39;, &#39;L&#39; }); // 4 bytes (20)\r\n      Log.d(Tag,&quot;writting vp8l ; isLossLess&quot;);\r\n   } else {\r\n      Log.d(Tag,&quot;writting vp8 ; Lossy&quot;);\r\n      write(new byte[] { &#39;V&#39;, &#39;P&#39;, &#39;8&#39;, &#39; &#39; });\r\n   }\r\n   writeUInt32(chunk.payload.length-16h); // 4 bytes (24)\r\n   write(chunk.payload);\r\n\r\n}\r\n// ANIM chunk\r\nprivate WebpChunk readVp8x() throws IOException {\r\n\t\tint chunkSize = readUInt32();\r\n\t\tif (chunkSize != 10)\r\n\t\t\tthrow new IOException(&quot;Expected 10 bytes for VP8X.&quot;);\r\n\r\n\t\tWebpChunk chunk = new WebpChunk(WebpChunkType.VP8X);\r\n\r\n\t\tbyte[] flags = new byte[4];\r\n\t\tread(flags, 4);\r\n\t\tBitSet bs = BitSet.valueOf(flags);\r\n\r\n\t\tchunk.hasIccp = bs.get(0);\r\n\t\tchunk.hasAnim = bs.get(1);\r\n\t\tchunk.hasExif = bs.get(2);\r\n\t\tchunk.hasXmp = bs.get(3);\r\n\t\tchunk.hasAlpha = bs.get(4);\r\n\r\n\t\tchunk.width = readUInt24();\r\n\t\tchunk.height = readUInt24();\r\n\r\n\t\tdebug(String.format(&quot;VP8X: size = %dx%d&quot;, chunk.width, chunk.height));\r\n\t\treturn chunk;\r\n\t}\r\n```\r\n\r\nCode for reading VP8L chunk:\r\n```java\r\n\tprivate WebpChunk readVp8l() throws IOException {\r\n\t\tLog.d(Tag,&quot;readVp8l() body &quot;);\r\n\t\tint chunkSize = readUInt32();\r\n\r\n\t\tWebpChunk chunk = new WebpChunk(WebpChunkType.VP8L);\r\n\t\tchunk.isLossless = true;\r\n\t\tchunk.payload = readPayload(chunkSize);\r\n\r\n\t\tdebug(String.format(&quot;VP8L: bytes = %d&quot;, chunkSize));\r\n\t\treturn chunk;\r\n\t}\r\n```\r\nfunction for writing bytes to output stream \r\n```java\r\n\tprivate void write(byte[] bytes, int length) throws IOException {\r\n\t\t_outputStream.write(bytes, length);\r\n\t\t_offset += length;\r\n\t}\r\n```\r\nIt read chunks as \r\nRIFF[size]WEBP -&gt; VP8X - ICCP - ALPH - VP8L and writing as \r\nRIFF[size]WEBP -&gt; VP8X - ANIM - ANMF (for first frame) and then ANMF for rest of frames.\r\nwhat is going wrong with these codes? \r\n\r\n  [1]: https://github.com/b4rtaz/android-webp-encoder/tree/master/app/src/main/java/com/n4no/webpencoder/webp\r\n  [2]: https://developers.google.com/speed/webp/docs/riff_container","title":"How to read and write VP8L and ALPH chunks of Webp images","body":"<p>I am trying <a href=\"https://github.com/b4rtaz/android-webp-encoder/tree/master/app/src/main/java/com/n4no/webpencoder/webp\" rel=\"nofollow noreferrer\">these classes</a> written in pure java code which used for encode the animated WEBP from list of static images. It is based on <a href=\"https://developers.google.com/speed/webp/docs/riff_container\" rel=\"nofollow noreferrer\">Google's Webp container specification</a>.\nI tried to modify the codes to fix some errors. Now</p>\n<p>Problem: If image contains VP8L then encoder does not produce valid animated WEBP image (its blank image with 2.5MB size, Supplying 2 images with size of input images).\nIf I set the quality while compressing WEBP to below 100 and then it read chunks as RIFF-WEBP-VP8X-ICCP-ALPH-VP8 in sequence. It creates an animated images with solid black background. It drops the transparent background data maybe, but it animates through each frame.</p>\n<p>Code for writing ANMF chunk:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// ANMF chunk\nprivate void writeAnmf(WebpChunk chunk) throws IOException {\n\n   write(new byte[] { 'A', 'N', 'M', 'F' });\n   writeUInt32(chunk.payload.length + 24);\n\n   writeUInt24(chunk.x); // 3 bytes (3)\n   writeUInt24(chunk.y); // 3 bytes (6)\n   writeUInt24(chunk.width); // 3 bytes (9)\n   writeUInt24(chunk.height); // 3 bytes (12)\n   writeUInt24(chunk.duration); // 3 bytes (15)\n\n   BitSet bs = new BitSet(6);\n   bs.set(1, chunk.useAlphaBlending);\n   bs.set(0, chunk.disposeToBackgroundColor);\n   write(bitSetToBytes(bs, 1)); // 1 byte (16)\n\n\n   if (chunk.isLossless) {\n      write(new byte[] { 'V', 'P', '8', 'L' }); // 4 bytes (20)\n      Log.d(Tag,&quot;writting vp8l ; isLossLess&quot;);\n   } else {\n      Log.d(Tag,&quot;writting vp8 ; Lossy&quot;);\n      write(new byte[] { 'V', 'P', '8', ' ' });\n   }\n   writeUInt32(chunk.payload.length-16h); // 4 bytes (24)\n   write(chunk.payload);\n\n}\n// ANIM chunk\nprivate WebpChunk readVp8x() throws IOException {\n        int chunkSize = readUInt32();\n        if (chunkSize != 10)\n            throw new IOException(&quot;Expected 10 bytes for VP8X.&quot;);\n\n        WebpChunk chunk = new WebpChunk(WebpChunkType.VP8X);\n\n        byte[] flags = new byte[4];\n        read(flags, 4);\n        BitSet bs = BitSet.valueOf(flags);\n\n        chunk.hasIccp = bs.get(0);\n        chunk.hasAnim = bs.get(1);\n        chunk.hasExif = bs.get(2);\n        chunk.hasXmp = bs.get(3);\n        chunk.hasAlpha = bs.get(4);\n\n        chunk.width = readUInt24();\n        chunk.height = readUInt24();\n\n        debug(String.format(&quot;VP8X: size = %dx%d&quot;, chunk.width, chunk.height));\n        return chunk;\n    }\n</code></pre>\n<p>Code for reading VP8L chunk:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private WebpChunk readVp8l() throws IOException {\n        Log.d(Tag,&quot;readVp8l() body &quot;);\n        int chunkSize = readUInt32();\n\n        WebpChunk chunk = new WebpChunk(WebpChunkType.VP8L);\n        chunk.isLossless = true;\n        chunk.payload = readPayload(chunkSize);\n\n        debug(String.format(&quot;VP8L: bytes = %d&quot;, chunkSize));\n        return chunk;\n    }\n</code></pre>\n<p>function for writing bytes to output stream</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private void write(byte[] bytes, int length) throws IOException {\n        _outputStream.write(bytes, length);\n        _offset += length;\n    }\n</code></pre>\n<p>It read chunks as\nRIFF[size]WEBP -&gt; VP8X - ICCP - ALPH - VP8L and writing as\nRIFF[size]WEBP -&gt; VP8X - ANIM - ANMF (for first frame) and then ANMF for rest of frames.\nwhat is going wrong with these codes?</p>\n"},{"tags":["java","postgresql","java-time","java-15"],"comments":[{"owner":{"account_id":2450346,"reputation":5181,"user_id":2136795,"display_name":"Gyro Gearless"},"score":7,"creation_date":1609932669,"post_id":65594874,"comment_id":115973586,"body_markdown":"As is, the best possible answer is &quot;your tests are flawed, fix &#39;em&quot; - maybe share some snippets of code to explain what you want to test","body":"As is, the best possible answer is &quot;your tests are flawed, fix &#39;em&quot; - maybe share some snippets of code to explain what you want to test"},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":25,"creation_date":1609932709,"post_id":65594874,"comment_id":115973604,"body_markdown":"Truncating `Instant` using `Instant.truncatedTo` *is* the elegant solution. Making assumptions about precision that are not guaranteed by the documentation is the wrong approach.","body":"Truncating <code>Instant</code> using <code>Instant.truncatedTo</code> <i>is</i> the elegant solution. Making assumptions about precision that are not guaranteed by the documentation is the wrong approach."},{"owner":{"account_id":8180577,"reputation":1584,"user_id":6157949,"accept_rate":85,"display_name":"catch22"},"score":2,"creation_date":1609999256,"post_id":65594874,"comment_id":115996134,"body_markdown":"@ErwinBolwidt , you might be right but for a grown project this solution is painful and doesn&#39;t seem to marry with the &quot;backwards compatibility&quot; motto by Java.","body":"@ErwinBolwidt , you might be right but for a grown project this solution is painful and doesn&#39;t seem to marry with the &quot;backwards compatibility&quot; motto by Java."},{"owner":{"account_id":9127082,"reputation":2954,"user_id":6790326,"display_name":"Dorian Gray"},"score":4,"creation_date":1610228734,"post_id":65594874,"comment_id":116068329,"body_markdown":"@catch22 I disagree with you. &quot;backwards compatibility&quot; refers only to things which are guaranteed by the documentation. There was no guaraantee about that before. Any improvement has the risk to break someone&#39;s code.","body":"@catch22 I disagree with you. &quot;backwards compatibility&quot; refers only to things which are guaranteed by the documentation. There was no guaraantee about that before. Any improvement has the risk to break someone&#39;s code."},{"owner":{"account_id":2973802,"reputation":48688,"user_id":2525313,"accept_rate":88,"display_name":"Nicolai Parlog"},"score":1,"creation_date":1611083334,"post_id":65594874,"comment_id":116334915,"body_markdown":"[Obligatory XKCD](https://xkcd.com/1172/). Otherwise I agree wit @DorianGray - truncating `Instant` appears to be the correct solution. Maybe you can find a good way (with something like [IntelliJ structural search and replace](https://www.jetbrains.com/help/idea/structural-search-and-replace.html) to automatically put the `truncateTo` call into your assertions.","body":"<a href=\"https://xkcd.com/1172/\" rel=\"nofollow noreferrer\">Obligatory XKCD</a>. Otherwise I agree wit @DorianGray - truncating <code>Instant</code> appears to be the correct solution. Maybe you can find a good way (with something like <a href=\"https://www.jetbrains.com/help/idea/structural-search-and-replace.html\" rel=\"nofollow noreferrer\">IntelliJ structural search and replace</a> to automatically put the <code>truncateTo</code> call into your assertions."},{"owner":{"account_id":262115,"reputation":712,"user_id":546757,"accept_rate":40,"display_name":"Alan Cabrera"},"score":1,"creation_date":1677426200,"post_id":65594874,"comment_id":133331293,"body_markdown":"Truncating `Instant` using `Instant.truncatedTo()` is one solution, although not a robust one since it relies on the earnest effort of every engineer.  For us, nanoseconds sneak in when using `Instant.now()` or `Clock.instant()`.  We have no need for nanoseconds and intend to standardize on using a custom `Clock` that truncates to microseconds and we have a CI quality gate that prohibits the use of `Instant.now()`.","body":"Truncating <code>Instant</code> using <code>Instant.truncatedTo()</code> is one solution, although not a robust one since it relies on the earnest effort of every engineer.  For us, nanoseconds sneak in when using <code>Instant.now()</code> or <code>Clock.instant()</code>.  We have no need for nanoseconds and intend to standardize on using a custom <code>Clock</code> that truncates to microseconds and we have a CI quality gate that prohibits the use of <code>Instant.now()</code>."}],"owner":{"account_id":8180577,"reputation":1584,"user_id":6157949,"accept_rate":85,"display_name":"catch22"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2171,"favorite_count":0,"down_vote_count":4,"up_vote_count":19,"closed_date":1611810534,"answer_count":0,"score":15,"last_activity_date":1677514703,"creation_date":1609932213,"question_id":65594874,"body_markdown":"I have a best practices question with regards to mapping `Instant` to PostgreSQL `TIMESTAMP`.\r\n\r\nWe&#39;ve updated our app to Java 15 and the new enhancement of the system clock to nanosecond precision ( https://bugs.openjdk.java.net/browse/JDK-8242504 ) is incompatible with the TIMESTAMP limitations in Postgres. Time is different depending on the underlying OS, and Instant in Mac (Big Sur) does not give time in nanoseconds but in Linux does.\r\n\r\nWe use Instant types across our codebase. Our tests are comparing objects of type Instant in memory vs fetched so they fail depending on the OS they&#39;re running in.\r\n\r\nIn Linux, the Instant object in memory has a precision of nanoseconds, whilst the Postgres stored Instant (TIMESTAMP) has a precision of microseconds. The assertions fail:\r\n```\r\njava.lang.AssertionError: expected [2021-01-04T19:32:23.726475249Z] but found [2021-01-04T19:32:23.726475Z]\r\n```\r\n\r\nIn Mac, the Instant object has a precision of microseconds which aligns adequately with the Timestamp precision of Postgres, so the tests pass as they&#39;ve always done so far.\r\n\r\nWe would like to avoid truncating Instant or adding plugins to PG to support nanoseconds.\r\n\r\nHow do others deal with this issue in a robust comprehensive manner?","title":"java 15 Nanoseconds precision causing issues on Linux environment","body":"<p>I have a best practices question with regards to mapping <code>Instant</code> to PostgreSQL <code>TIMESTAMP</code>.</p>\n<p>We've updated our app to Java 15 and the new enhancement of the system clock to nanosecond precision ( <a href=\"https://bugs.openjdk.java.net/browse/JDK-8242504\" rel=\"nofollow noreferrer\">https://bugs.openjdk.java.net/browse/JDK-8242504</a> ) is incompatible with the TIMESTAMP limitations in Postgres. Time is different depending on the underlying OS, and Instant in Mac (Big Sur) does not give time in nanoseconds but in Linux does.</p>\n<p>We use Instant types across our codebase. Our tests are comparing objects of type Instant in memory vs fetched so they fail depending on the OS they're running in.</p>\n<p>In Linux, the Instant object in memory has a precision of nanoseconds, whilst the Postgres stored Instant (TIMESTAMP) has a precision of microseconds. The assertions fail:</p>\n<pre><code>java.lang.AssertionError: expected [2021-01-04T19:32:23.726475249Z] but found [2021-01-04T19:32:23.726475Z]\n</code></pre>\n<p>In Mac, the Instant object has a precision of microseconds which aligns adequately with the Timestamp precision of Postgres, so the tests pass as they've always done so far.</p>\n<p>We would like to avoid truncating Instant or adding plugins to PG to support nanoseconds.</p>\n<p>How do others deal with this issue in a robust comprehensive manner?</p>\n"},{"tags":["java","arrays","list","performance"],"comments":[{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":6,"creation_date":1238824898,"post_id":716597,"comment_id":528669,"body_markdown":"&quot;Since arrays keep all the data in a contiguous chunk of memory&quot; do you have any sort of citation to back this up for Java?","body":"&quot;Since arrays keep all the data in a contiguous chunk of memory&quot; do you have any sort of citation to back this up for Java?"},{"owner":{"account_id":29100,"reputation":14836,"user_id":78351,"accept_rate":71,"display_name":"euphoria83"},"score":2,"creation_date":1238825132,"post_id":716597,"comment_id":528670,"body_markdown":"No matt. I know this for C. I am guessing Java would use the same method.","body":"No matt. I know this for C. I am guessing Java would use the same method."},{"owner":{"account_id":9168,"reputation":12722,"user_id":16828,"accept_rate":87,"display_name":"Fortyrunner"},"score":1,"creation_date":1238825700,"post_id":716597,"comment_id":528676,"body_markdown":"I doubt that it would keep them in a single chunk of memory.","body":"I doubt that it would keep them in a single chunk of memory."},{"owner":{"account_id":31100,"reputation":13876,"user_id":85170,"accept_rate":100,"display_name":"CookieOfFortune"},"score":4,"creation_date":1238825872,"post_id":716597,"comment_id":528680,"body_markdown":"Even if it&#39;s a single block of memory, it&#39;d still only be around 1000 * 4 = 4kb worth, which is not a lot of memory.","body":"Even if it&#39;s a single block of memory, it&#39;d still only be around 1000 * 4 = 4kb worth, which is not a lot of memory."},{"owner":{"account_id":1604752,"reputation":3710,"user_id":1485064,"accept_rate":74,"display_name":"Mikkel L&#248;kke"},"score":1,"creation_date":1382606000,"post_id":716597,"comment_id":29027999,"body_markdown":"Is this a case of premature optimization?\n\nThe correct answer is &quot;It depends&quot;. It depends on what JVM you are running, it depends on how your JIT compiler is optimizing the code, it depends on which platform you&#39;re running on. Arrays may be faster in JET or Avian , but lists might be faster on HotSpot or IcedTea.\n\nIn short, if this is the degree of control you need over performance, you need to use a much lower level language like assembly or C. Java is not suitable.","body":"Is this a case of premature optimization?  The correct answer is &quot;It depends&quot;. It depends on what JVM you are running, it depends on how your JIT compiler is optimizing the code, it depends on which platform you&#39;re running on. Arrays may be faster in JET or Avian , but lists might be faster on HotSpot or IcedTea.  In short, if this is the degree of control you need over performance, you need to use a much lower level language like assembly or C. Java is not suitable."},{"owner":{"account_id":471679,"reputation":411,"user_id":879619,"display_name":"Vectorjohn"},"score":0,"creation_date":1463099890,"post_id":716597,"comment_id":61931400,"body_markdown":"The question (in the comments about memory) can&#39;t be answered because List is an interface not an implementation. ArrayList will always keep the data in a contiguous block of memory (it stores an array, hence the name). Other implementations will do other things.","body":"The question (in the comments about memory) can&#39;t be answered because List is an interface not an implementation. ArrayList will always keep the data in a contiguous block of memory (it stores an array, hence the name). Other implementations will do other things."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":4,"creation_date":1465504185,"post_id":716597,"comment_id":62942447,"body_markdown":"@mattb That&#39;s what &#39;array&#39; means throughout CS. No citation necessary. The numerous references in the [JLS](https://docs.oracle.com/javase/specs/jls/se8/html/jls-10.html) and [JVM Spec]() to array lengths are only comprehensible if arrays are contiguous.","body":"@mattb That&#39;s what &#39;array&#39; means throughout CS. No citation necessary. The numerous references in the <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-10.html\" rel=\"nofollow noreferrer\">JLS</a> and [JVM Spec]() to array lengths are only comprehensible if arrays are contiguous."},{"owner":{"account_id":1713988,"reputation":1651,"user_id":1571480,"accept_rate":70,"display_name":"Pavlus"},"score":2,"creation_date":1486047920,"post_id":716597,"comment_id":71187132,"body_markdown":"They are surely not stored in continuous chunk of memory. Java object variables are pointers to the actual objects (unless they are local and put on the stack by JVM), so the array of String is, actually, an array of _pointers_ to String objects which can be placed anywhere in the heap.","body":"They are surely not stored in continuous chunk of memory. Java object variables are pointers to the actual objects (unless they are local and put on the stack by JVM), so the array of String is, actually, an array of <i>pointers</i> to String objects which can be placed anywhere in the heap."}],"answers":[{"comments":[{"owner":{"account_id":7492,"reputation":63517,"user_id":13051,"accept_rate":68,"display_name":"JesperE"},"score":0,"creation_date":1238827197,"post_id":716602,"comment_id":528703,"body_markdown":"The ArrayList has an ensureCapacity() method which preallocates the backing array to the specified size.","body":"The ArrayList has an ensureCapacity() method which preallocates the backing array to the specified size."},{"owner":{"account_id":15903,"reputation":323453,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1238836229,"post_id":716602,"comment_id":528842,"body_markdown":"Or you can specify the size at construction time. Also &quot;faster&quot; here means &quot;a few microseconds to allocate two memory areas instead of one&quot;","body":"Or you can specify the size at construction time. Also &quot;faster&quot; here means &quot;a few microseconds to allocate two memory areas instead of one&quot;"}],"tags":[],"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"comment_count":2,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1238824850,"creation_date":1238824850,"answer_id":716602,"question_id":716597,"body_markdown":"If you know in advance how large the data is then an array will be faster.\r\n\r\nA List is more flexible.  You can use an ArrayList which is backed by an array.\r\n\r\n","title":"Array or List in Java. Which is faster?","body":"<p>If you know in advance how large the data is then an array will be faster.</p>\n\n<p>A List is more flexible.  You can use an ArrayList which is backed by an array.</p>\n"},{"comments":[{"owner":{"account_id":19947,"reputation":32593,"user_id":47190,"accept_rate":80,"display_name":"Peter Štibran&#253;"},"score":7,"creation_date":1238847078,"post_id":716603,"comment_id":528984,"body_markdown":"List also stores only reference to strings.","body":"List also stores only reference to strings."}],"tags":[],"owner":{"account_id":31100,"reputation":13876,"user_id":85170,"accept_rate":100,"display_name":"CookieOfFortune"},"comment_count":1,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1238824920,"creation_date":1238824920,"answer_id":716603,"question_id":716597,"body_markdown":"No, because technically, the array only stores the reference to the strings. The strings themselves are allocated in a different location. For a thousand items, I would say a list would be better, it is slower, but it offers more flexibility and it&#39;s easier to use, especially if you are going to resize them.","title":"Array or List in Java. Which is faster?","body":"<p>No, because technically, the array only stores the reference to the strings. The strings themselves are allocated in a different location. For a thousand items, I would say a list would be better, it is slower, but it offers more flexibility and it's easier to use, especially if you are going to resize them.</p>\n"},{"tags":[],"owner":{"account_id":18028,"reputation":39206,"user_id":40933,"accept_rate":63,"display_name":"Warrior"},"comment_count":0,"down_vote_count":4,"up_vote_count":10,"is_accepted":false,"score":6,"last_activity_date":1238825055,"creation_date":1238825055,"answer_id":716605,"question_id":716597,"body_markdown":"list is slower than arrays.If you need efficiency use arrays.If you need flexibility use list.","title":"Array or List in Java. Which is faster?","body":"<p>list is slower than arrays.If you need efficiency use arrays.If you need flexibility use list.</p>\n"},{"comments":[{"owner":{"account_id":29100,"reputation":14836,"user_id":78351,"accept_rate":71,"display_name":"euphoria83"},"score":2,"creation_date":1238867625,"post_id":716619,"comment_id":529548,"body_markdown":"@Fortyrunner - From your experience, are there any such choices in Java between abstraction and raw data forms that do make a significant difference in performance ?","body":"@Fortyrunner - From your experience, are there any such choices in Java between abstraction and raw data forms that do make a significant difference in performance ?"},{"owner":{"account_id":9168,"reputation":12722,"user_id":16828,"accept_rate":87,"display_name":"Fortyrunner"},"score":4,"creation_date":1238873401,"post_id":716619,"comment_id":529683,"body_markdown":"One of the issues with performance measurement is that you constantly have to retest against new versions of Java. I am working on a problem at the moment where someone used an int throughout for a key in a map (to save space/time). We now need to change all lines to a new object - its painful.","body":"One of the issues with performance measurement is that you constantly have to retest against new versions of Java. I am working on a problem at the moment where someone used an int throughout for a key in a map (to save space/time). We now need to change all lines to a new object - its painful."},{"owner":{"account_id":9168,"reputation":12722,"user_id":16828,"accept_rate":87,"display_name":"Fortyrunner"},"score":11,"creation_date":1238873507,"post_id":716619,"comment_id":529686,"body_markdown":"So.. I now try and stay away from raw data. It rarely makes a noticeable difference. Hotspot is an amazing piece of technology and you should never try and second guess. Just try to write simple, maintainable code and Hotspot will do the rest.","body":"So.. I now try and stay away from raw data. It rarely makes a noticeable difference. Hotspot is an amazing piece of technology and you should never try and second guess. Just try to write simple, maintainable code and Hotspot will do the rest."},{"owner":{"account_id":1604752,"reputation":3710,"user_id":1485064,"accept_rate":74,"display_name":"Mikkel L&#248;kke"},"score":4,"creation_date":1382606064,"post_id":716619,"comment_id":29028034,"body_markdown":"Remember that profiler results are only valid for the Java platform you&#39;re running the profiler against. Which may be a different one than your customers.","body":"Remember that profiler results are only valid for the Java platform you&#39;re running the profiler against. Which may be a different one than your customers."},{"owner":{"account_id":9168,"reputation":12722,"user_id":16828,"accept_rate":87,"display_name":"Fortyrunner"},"score":0,"creation_date":1382740929,"post_id":716619,"comment_id":29093741,"body_markdown":"A very good point. I&#39;m lucky that I get to test on a platform identical to the one I ship on, so its not so relevant for me. Lists are so much easier to deal with syntactically though. The things that slow my application down are calls to databases and external services, lists vs arrays makes a negligible difference.","body":"A very good point. I&#39;m lucky that I get to test on a platform identical to the one I ship on, so its not so relevant for me. Lists are so much easier to deal with syntactically though. The things that slow my application down are calls to databases and external services, lists vs arrays makes a negligible difference."},{"owner":{"account_id":50598,"reputation":32356,"user_id":151019,"accept_rate":83,"display_name":"mmmmmm"},"score":0,"creation_date":1391286808,"post_id":716619,"comment_id":32462076,"body_markdown":"@Fortyrunner that is not lucky it is just normality - if you don&#39;t test especially performance test on the same platform as production that is incompetence","body":"@Fortyrunner that is not lucky it is just normality - if you don&#39;t test especially performance test on the same platform as production that is incompetence"},{"owner":{"account_id":366370,"reputation":2002,"user_id":711855,"display_name":"juanmf"},"score":4,"creation_date":1418483092,"post_id":716619,"comment_id":43356877,"body_markdown":"Effective Java recommends Lists for they help with API interoperability, and also more secure with type safety.","body":"Effective Java recommends Lists for they help with API interoperability, and also more secure with type safety."},{"owner":{"account_id":9168,"reputation":12722,"user_id":16828,"accept_rate":87,"display_name":"Fortyrunner"},"score":0,"creation_date":1432763542,"post_id":716619,"comment_id":49065263,"body_markdown":"I used the one that came with Netbeans (thats before VisualVM was bundled). I&#39;ve used YourKit and it was very good.","body":"I used the one that came with Netbeans (thats before VisualVM was bundled). I&#39;ve used YourKit and it was very good."},{"owner":{"account_id":9168,"reputation":12722,"user_id":16828,"accept_rate":87,"display_name":"Fortyrunner"},"score":0,"creation_date":1432763655,"post_id":716619,"comment_id":49065309,"body_markdown":"Although... unless you are doing some seriously low latency stuff and a recent JVM.. I really doubt whether there is any real performance difference.","body":"Although... unless you are doing some seriously low latency stuff and a recent JVM.. I really doubt whether there is any real performance difference."},{"owner":{"account_id":3370948,"reputation":4617,"user_id":2830167,"accept_rate":100,"display_name":"ZhaoGang"},"score":0,"creation_date":1476358221,"post_id":716619,"comment_id":67316243,"body_markdown":"yes, List is more flexible than array, indeed. So we should choose List first everywhere, unless we need to change it to array for performance(and the change is very small in real world coding.","body":"yes, List is more flexible than array, indeed. So we should choose List first everywhere, unless we need to change it to array for performance(and the change is very small in real world coding."}],"tags":[],"owner":{"account_id":9168,"reputation":12722,"user_id":16828,"accept_rate":87,"display_name":"Fortyrunner"},"comment_count":10,"down_vote_count":2,"up_vote_count":406,"is_accepted":true,"score":404,"last_activity_date":1238825894,"creation_date":1238825894,"answer_id":716619,"question_id":716597,"body_markdown":"I suggest that you use a profiler to test which is faster.\r\n\r\nMy personal opinion is that you should use Lists.\r\n\r\nI work on a large codebase and a previous group of developers used arrays **everywhere**. It made the code very inflexible. After changing large chunks of it to Lists we noticed no difference in speed.","title":"Array or List in Java. Which is faster?","body":"<p>I suggest that you use a profiler to test which is faster.</p>\n\n<p>My personal opinion is that you should use Lists.</p>\n\n<p>I work on a large codebase and a previous group of developers used arrays <strong>everywhere</strong>. It made the code very inflexible. After changing large chunks of it to Lists we noticed no difference in speed.</p>\n"},{"tags":[],"owner":{"account_id":24774,"reputation":2802,"user_id":63213,"accept_rate":49,"display_name":"RV."},"comment_count":0,"down_vote_count":5,"up_vote_count":0,"is_accepted":false,"score":-5,"last_activity_date":1238826533,"creation_date":1238826533,"answer_id":716632,"question_id":716597,"body_markdown":"A List is more flexible.... so better to List than array","title":"Array or List in Java. Which is faster?","body":"<p>A List is more flexible.... so better to List than array</p>\n"},{"comments":[{"owner":{"account_id":7492,"reputation":63517,"user_id":13051,"accept_rate":68,"display_name":"JesperE"},"score":0,"creation_date":1238827302,"post_id":716641,"comment_id":528704,"body_markdown":"Adding may of course involve reallocating the backing array, so if performance is important and the size of the array is known in advance, one should consider using ArrayList#ensureCapacity.","body":"Adding may of course involve reallocating the backing array, so if performance is important and the size of the array is known in advance, one should consider using ArrayList#ensureCapacity."},{"owner":{"account_id":11857,"reputation":88771,"user_id":23072,"accept_rate":74,"display_name":"Uri"},"score":6,"creation_date":1238952003,"post_id":716641,"comment_id":531327,"body_markdown":"Don&#39;t you pay the cost of dynamic binding here?","body":"Don&#39;t you pay the cost of dynamic binding here?"},{"owner":{"account_id":18572,"reputation":10668,"user_id":42645,"accept_rate":76,"display_name":"zedoo"},"score":2,"creation_date":1343253816,"post_id":716641,"comment_id":15451212,"body_markdown":"I&#39;d guess adding is not O(n) in ArrayList, there should be some ammortization effect when adding more than once, e.g. capacity is doubled instead of increased by just 1.","body":"I&#39;d guess adding is not O(n) in ArrayList, there should be some ammortization effect when adding more than once, e.g. capacity is doubled instead of increased by just 1."},{"owner":{"account_id":960579,"reputation":2855,"user_id":985026,"accept_rate":52,"display_name":"MalcolmOcean"},"score":0,"creation_date":1345589170,"post_id":716641,"comment_id":16112814,"body_markdown":"@zedoo I think they meant add and subtract in the middle.","body":"@zedoo I think they meant add and subtract in the middle."},{"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"score":0,"creation_date":1565271806,"post_id":716641,"comment_id":101308206,"body_markdown":"*&quot; If Java was being designed today, it&#39;s entirely possible that arrays would have been left out altogether in favor of the ArrayList construct.&quot;* ... I seriously doubt that this would be true.  If it were the *JVM* being rewritten today, then what you&#39;ve said is certainly possible.  But with the JVM we have, arrays are a foundational type in Java.","body":"<i>&quot; If Java was being designed today, it&#39;s entirely possible that arrays would have been left out altogether in favor of the ArrayList construct.&quot;</i> ... I seriously doubt that this would be true.  If it were the <i>JVM</i> being rewritten today, then what you&#39;ve said is certainly possible.  But with the JVM we have, arrays are a foundational type in Java."},{"owner":{"account_id":199731,"reputation":4397,"user_id":445215,"display_name":"geowar"},"score":0,"creation_date":1608209632,"post_id":716641,"comment_id":115516513,"body_markdown":"You don&#39;t need the type specifier on the right hand side (DRY): List&lt;String&gt; strings = new ArrayList&lt;&gt;();","body":"You don&#39;t need the type specifier on the right hand side (DRY): List&lt;String&gt; strings = new ArrayList&lt;&gt;();"},{"owner":{"account_id":1403029,"reputation":4725,"user_id":1331446,"accept_rate":50,"display_name":"dsz"},"score":0,"creation_date":1649656808,"post_id":716641,"comment_id":126921910,"body_markdown":"&quot;In Java, all collections store only references to objects, not the objects themselves.&quot; This is simply not true;  I can have a long array of booleans or integers, and this will have the values in the array.  A List doesn&#39;t support these data types, and forces be to have boxed Integers and Booleans, together with the extra level of indirection.","body":"&quot;In Java, all collections store only references to objects, not the objects themselves.&quot; This is simply not true;  I can have a long array of booleans or integers, and this will have the values in the array.  A List doesn&#39;t support these data types, and forces be to have boxed Integers and Booleans, together with the extra level of indirection."}],"tags":[],"owner":{"account_id":18380,"reputation":3634,"user_id":42076,"display_name":"cygil"},"comment_count":7,"down_vote_count":1,"up_vote_count":183,"is_accepted":false,"score":182,"last_activity_date":1238890794,"creation_date":1238826872,"answer_id":716641,"question_id":716597,"body_markdown":"The Java way is that you should consider what data *abstraction* most suits your needs.  Remember that in Java a List is an abstract, not a concrete data type.  You should declare the strings as a List, and then initialize it using the ArrayList implementation.\r\n\r\n    List&lt;String&gt; strings = new ArrayList&lt;String&gt;();\r\n\r\nThis separation of Abstract Data Type and specific implementation is one the key aspects of object oriented programming.\r\n\r\nAn ArrayList implements the List Abstract Data Type using an array as its underlying implementation.  Access speed is virtually identical to an array, with the additional advantages of being able to add and subtract elements to a List (although this is an O(n) operation with an ArrayList) and that if you decide to change the underlying implementation later on you can.  For example, if you realize you need synchronized access, you can change the implementation to a Vector&lt;String&gt; without rewriting all your code.\r\n\r\nIn fact, the ArrayList was specifically designed to replace the low-level array construct in most contexts.  If Java was being designed today, it&#39;s entirely possible that arrays would have been left out altogether in favor of the ArrayList construct.\r\n\r\n&gt; Since arrays keep all the data in a contiguous chunk of memory (unlike Lists), would the use of an array to store thousands of strings cause problems ?\r\n\r\nIn Java, all collections store only references to objects, not the objects themselves.   Both arrays and ArrayList will store a few thousand references in a contiguous array, so they are essentially identical.  You can consider that a contiguous block of a few thousand 32-bit references will always be readily available on modern hardware.  This does not guarantee that you will not run out of memory altogether, of course, just that the contiguous block of memory requirement is not difficult to fufil.","title":"Array or List in Java. Which is faster?","body":"<p>The Java way is that you should consider what data <em>abstraction</em> most suits your needs.  Remember that in Java a List is an abstract, not a concrete data type.  You should declare the strings as a List, and then initialize it using the ArrayList implementation.</p>\n\n<pre><code>List&lt;String&gt; strings = new ArrayList&lt;String&gt;();\n</code></pre>\n\n<p>This separation of Abstract Data Type and specific implementation is one the key aspects of object oriented programming.</p>\n\n<p>An ArrayList implements the List Abstract Data Type using an array as its underlying implementation.  Access speed is virtually identical to an array, with the additional advantages of being able to add and subtract elements to a List (although this is an O(n) operation with an ArrayList) and that if you decide to change the underlying implementation later on you can.  For example, if you realize you need synchronized access, you can change the implementation to a Vector without rewriting all your code.</p>\n\n<p>In fact, the ArrayList was specifically designed to replace the low-level array construct in most contexts.  If Java was being designed today, it's entirely possible that arrays would have been left out altogether in favor of the ArrayList construct.</p>\n\n<blockquote>\n  <p>Since arrays keep all the data in a contiguous chunk of memory (unlike Lists), would the use of an array to store thousands of strings cause problems ?</p>\n</blockquote>\n\n<p>In Java, all collections store only references to objects, not the objects themselves.   Both arrays and ArrayList will store a few thousand references in a contiguous array, so they are essentially identical.  You can consider that a contiguous block of a few thousand 32-bit references will always be readily available on modern hardware.  This does not guarantee that you will not run out of memory altogether, of course, just that the contiguous block of memory requirement is not difficult to fufil.</p>\n"},{"tags":[],"owner":{"account_id":7492,"reputation":63517,"user_id":13051,"accept_rate":68,"display_name":"JesperE"},"comment_count":0,"down_vote_count":1,"up_vote_count":109,"is_accepted":false,"score":108,"last_activity_date":1430876151,"creation_date":1238826974,"answer_id":716645,"question_id":716597,"body_markdown":"You should prefer generic types over arrays. As mentioned by others, arrays are inflexible and do not have the expressive power of generic types. (They do however support runtime typechecking, but that mixes badly with generic types.)\r\n\r\nBut, as always, when optimizing you should always follow these steps:\r\n\r\n* Don&#39;t optimize until you have a nice, clean, and **working** version of your code. Changing to generic types could very well be motivated at this step already.\r\n* When you have a version that is nice and clean, decide if it is fast enough.\r\n* If it isn&#39;t fast enough, **measure its performance**. This step is important for two reasons. If you don&#39;t measure you won&#39;t (1) know the impact of any optimizations you make and (2) know where to optimize.\r\n* Optimize the hottest part of your code.\r\n* **Measure again.** This is just as important as measuring before. If the optimization didn&#39;t improve things, **revert it**. Remember, the code *without* the optimization was **clean, nice, and working.**","title":"Array or List in Java. Which is faster?","body":"<p>You should prefer generic types over arrays. As mentioned by others, arrays are inflexible and do not have the expressive power of generic types. (They do however support runtime typechecking, but that mixes badly with generic types.)</p>\n\n<p>But, as always, when optimizing you should always follow these steps:</p>\n\n<ul>\n<li>Don't optimize until you have a nice, clean, and <strong>working</strong> version of your code. Changing to generic types could very well be motivated at this step already.</li>\n<li>When you have a version that is nice and clean, decide if it is fast enough.</li>\n<li>If it isn't fast enough, <strong>measure its performance</strong>. This step is important for two reasons. If you don't measure you won't (1) know the impact of any optimizations you make and (2) know where to optimize.</li>\n<li>Optimize the hottest part of your code.</li>\n<li><strong>Measure again.</strong> This is just as important as measuring before. If the optimization didn't improve things, <strong>revert it</strong>. Remember, the code <em>without</em> the optimization was <strong>clean, nice, and working.</strong></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":23596,"reputation":1584,"user_id":59223,"display_name":"Emmanuel Rodriguez"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1238827186,"creation_date":1238827186,"answer_id":716648,"question_id":716597,"body_markdown":"Don&#39;t get into the trap of optimizing without proper benchmarking. As others have suggested use a profiler before making any assumption.\r\n\r\nThe different data structures that you have enumerated have different purposes. A list is very efficient at inserting elements in the beginning and at the end but suffers a lot when accessing random elements. An array has fixed storage but provides fast random access. Finally an ArrayList improves the interface to an array by allowing it to grow. Normally the data structure to be used should be dictated by how the data stored will be access or added.\r\n\r\nAbout memory consumption. You seem to be mixing some things. An array will only give you a continuous chunk of memory for the type of data that you have. Don&#39;t forget that java has a fixed data types: boolean, char, int, long, float and Object (this include all objects, even an array is an Object). It means that if you declare an array of String strings [1000] or MyObject myObjects [1000] you only get a 1000 memory boxes big enough to store the location (references or pointers) of the objects. You don&#39;t get a 1000 memory boxes big enough to fit the size of the objects. Don&#39;t forget that your objects are first created with &quot;new&quot;. This is when the memory allocation is done and later a reference (their memory address) is stored in the array. The object doesn&#39;t get copied into the array only it&#39;s reference.\r\n","title":"Array or List in Java. Which is faster?","body":"<p>Don't get into the trap of optimizing without proper benchmarking. As others have suggested use a profiler before making any assumption.</p>\n\n<p>The different data structures that you have enumerated have different purposes. A list is very efficient at inserting elements in the beginning and at the end but suffers a lot when accessing random elements. An array has fixed storage but provides fast random access. Finally an ArrayList improves the interface to an array by allowing it to grow. Normally the data structure to be used should be dictated by how the data stored will be access or added.</p>\n\n<p>About memory consumption. You seem to be mixing some things. An array will only give you a continuous chunk of memory for the type of data that you have. Don't forget that java has a fixed data types: boolean, char, int, long, float and Object (this include all objects, even an array is an Object). It means that if you declare an array of String strings [1000] or MyObject myObjects [1000] you only get a 1000 memory boxes big enough to store the location (references or pointers) of the objects. You don't get a 1000 memory boxes big enough to fit the size of the objects. Don't forget that your objects are first created with \"new\". This is when the memory allocation is done and later a reference (their memory address) is stored in the array. The object doesn't get copied into the array only it's reference.</p>\n"},{"comments":[{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1238849928,"post_id":716652,"comment_id":529055,"body_markdown":"8 bytes on most 64-bit implementations.","body":"8 bytes on most 64-bit implementations."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1347762246,"post_id":716652,"comment_id":16732228,"body_markdown":"Is there any evidence that this thing is faster than java.util.LinkedList? Which is also &#39;in-memory&#39;? It can also be made immutable, as if that makes any difference.","body":"Is there any evidence that this thing is faster than java.util.LinkedList? Which is also &#39;in-memory&#39;? It can also be made immutable, as if that makes any difference."}],"tags":[],"owner":{"account_id":2466,"reputation":34852,"user_id":3434,"accept_rate":90,"display_name":"Apocalisp"},"comment_count":2,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1465577985,"creation_date":1238827278,"answer_id":716652,"question_id":716597,"body_markdown":"&quot;Thousands&quot; is not a large number. A few thousand paragraph-length strings are on the order of a couple of megabytes in size. If all you want to do is access these serially, use [an immutable singly-linked List][1].\r\n\r\n  [1]: http://www.functionaljava.org/javadoc/4.5/functionaljava/fj/data/List.html","title":"Array or List in Java. Which is faster?","body":"<p>\"Thousands\" is not a large number. A few thousand paragraph-length strings are on the order of a couple of megabytes in size. If all you want to do is access these serially, use <a href=\"http://www.functionaljava.org/javadoc/4.5/functionaljava/fj/data/List.html\" rel=\"nofollow noreferrer\">an immutable singly-linked List</a>.</p>\n"},{"tags":[],"owner":{"account_id":8537,"reputation":40691,"user_id":15459,"accept_rate":70,"display_name":"PhiLho"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1238834987,"creation_date":1238834987,"answer_id":716787,"question_id":716597,"body_markdown":"I don&#39;t think it makes a real difference for Strings. What is contiguous in an array of strings is the references to the strings, the strings themselves are stored at random places in memory.\r\n\r\nArrays vs. Lists can make a difference for primitive types, not for objects. *IF* you know in advance the number of elements, and don&#39;t need flexibility, an array of millions of integers or doubles will be more efficient in memory and marginally in speed than a list, because indeed they will be stored contiguously and accessed instantly. That&#39;s why Java still uses arrays of chars for strings, arrays of ints for image data, etc.","title":"Array or List in Java. Which is faster?","body":"<p>I don't think it makes a real difference for Strings. What is contiguous in an array of strings is the references to the strings, the strings themselves are stored at random places in memory.</p>\n\n<p>Arrays vs. Lists can make a difference for primitive types, not for objects. <em>IF</em> you know in advance the number of elements, and don't need flexibility, an array of millions of integers or doubles will be more efficient in memory and marginally in speed than a list, because indeed they will be stored contiguously and accessed instantly. That's why Java still uses arrays of chars for strings, arrays of ints for image data, etc.</p>\n"},{"tags":[],"owner":{"account_id":31309,"reputation":3434,"user_id":85868,"accept_rate":89,"display_name":"Nuoji"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1238845345,"creation_date":1238845345,"answer_id":716942,"question_id":716597,"body_markdown":"Remember that an ArrayList encapsulates an array, so there is little difference compared to using a primitive array (except for the fact that a List is much easier to work with in java).\r\n\r\nThe pretty much the only time it makes sense to prefer an array to an ArrayList is when you are storing primitives, i.e. byte, int, etc and you need the particular space-efficiency you get by using primitive arrays.","title":"Array or List in Java. Which is faster?","body":"<p>Remember that an ArrayList encapsulates an array, so there is little difference compared to using a primitive array (except for the fact that a List is much easier to work with in java).</p>\n\n<p>The pretty much the only time it makes sense to prefer an array to an ArrayList is when you are storing primitives, i.e. byte, int, etc and you need the particular space-efficiency you get by using primitive arrays.</p>\n"},{"comments":[{"owner":{"account_id":29100,"reputation":14836,"user_id":78351,"accept_rate":71,"display_name":"euphoria83"},"score":2,"creation_date":1238869454,"post_id":717051,"comment_id":529590,"body_markdown":"Thanx for the answer. But no, I am not confusing the C++ list with Java&#39;s interface List. I asked the question in such a way because I wanted to compare the performance of List implementations like ArrayList and Vector with raw arrays.","body":"Thanx for the answer. But no, I am not confusing the C++ list with Java&#39;s interface List. I asked the question in such a way because I wanted to compare the performance of List implementations like ArrayList and Vector with raw arrays."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1238871403,"post_id":717051,"comment_id":529636,"body_markdown":"Both ArrayList and Vector &quot;keep all the data in a contiguous chunk of memory&quot;.","body":"Both ArrayList and Vector &quot;keep all the data in a contiguous chunk of memory&quot;."}],"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"comment_count":2,"down_vote_count":1,"up_vote_count":25,"is_accepted":false,"score":24,"last_activity_date":1444219674,"creation_date":1238850714,"answer_id":717051,"question_id":716597,"body_markdown":"I&#39;m guessing the original poster is coming from a C++/STL background which is causing some confusion. In C++ `std::list` is a doubly linked list.\r\n\r\nIn Java `[java.util.]List` is an implementation-free interface (pure abstract class in C++ terms). `List` can be a doubly linked list - `java.util.LinkedList` is provided. However, 99 times out of 100 when you want a make a new `List`, you want to use `java.util.ArrayList` instead, which is the rough equivalent of C++ `std::vector`. There are other standard implementations, such as those returned by `java.util.Collections.emptyList()` and `java.util.Arrays.asList()`.\r\n\r\nFrom a performance standpoint there is a very small hit from having to go through an interface and an extra object, however runtime inlining means this rarely has any significance. Also remember that `String` are typically an object plus array. So for each entry, you probably have two other objects. In C++ `std::vector&lt;std::string&gt;`, although copying by value without a pointer as such, the character arrays will form an object for string (and these will not usually be shared).\r\n\r\nIf this particular code is really performance-sensitive, you could create a single `char[]` array (or even `byte[]`) for all the characters of all the strings, and then an array of offsets. IIRC, this is how javac is implemented.","title":"Array or List in Java. Which is faster?","body":"<p>I'm guessing the original poster is coming from a C++/STL background which is causing some confusion. In C++ <code>std::list</code> is a doubly linked list.</p>\n\n<p>In Java <code>[java.util.]List</code> is an implementation-free interface (pure abstract class in C++ terms). <code>List</code> can be a doubly linked list - <code>java.util.LinkedList</code> is provided. However, 99 times out of 100 when you want a make a new <code>List</code>, you want to use <code>java.util.ArrayList</code> instead, which is the rough equivalent of C++ <code>std::vector</code>. There are other standard implementations, such as those returned by <code>java.util.Collections.emptyList()</code> and <code>java.util.Arrays.asList()</code>.</p>\n\n<p>From a performance standpoint there is a very small hit from having to go through an interface and an extra object, however runtime inlining means this rarely has any significance. Also remember that <code>String</code> are typically an object plus array. So for each entry, you probably have two other objects. In C++ <code>std::vector&lt;std::string&gt;</code>, although copying by value without a pointer as such, the character arrays will form an object for string (and these will not usually be shared).</p>\n\n<p>If this particular code is really performance-sensitive, you could create a single <code>char[]</code> array (or even <code>byte[]</code>) for all the characters of all the strings, and then an array of offsets. IIRC, this is how javac is implemented.</p>\n"},{"comments":[{"owner":{"account_id":29100,"reputation":14836,"user_id":78351,"accept_rate":71,"display_name":"euphoria83"},"score":0,"creation_date":1238869500,"post_id":717112,"comment_id":529592,"body_markdown":"i mean java.util.List interface","body":"i mean java.util.List interface"},{"owner":{"account_id":25754,"reputation":69853,"user_id":66475,"accept_rate":99,"display_name":"Bjorn"},"score":1,"creation_date":1293904852,"post_id":717112,"comment_id":5021401,"body_markdown":"Random access O(n) on linkedlist seems like a big deal to me.","body":"Random access O(n) on linkedlist seems like a big deal to me."}],"tags":[],"owner":{"account_id":9867,"reputation":618201,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"comment_count":2,"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1238852771,"creation_date":1238852771,"answer_id":717112,"question_id":716597,"body_markdown":"Well firstly it&#39;s worth clarifying do you mean &quot;list&quot; in the classical comp sci data structures sense (ie a linked list) or do you mean java.util.List? If you mean a java.util.List, it&#39;s an interface. If you want to use an array just use the ArrayList implementation and you&#39;ll get array-like behaviour and semantics. Problem solved.\r\n\r\nIf you mean an array vs a linked list, it&#39;s a slightly different argument for which we go back to Big O (here is a [plain English explanation][1] if this is an unfamiliar term.\r\n\r\nArray;\r\n\r\n - Random Access: O(1);\r\n - Insert: O(n);\r\n - Delete: O(n).\r\n\r\nLinked List:\r\n\r\n - Random Access: O(n);\r\n - Insert: O(1);\r\n - Delete: O(1).\r\n\r\nSo you choose whichever one best suits how you resize your array. If you resize, insert and delete a lot then maybe a linked list is a better choice. Same goes for if random access is rare. You mention serial access. If you&#39;re mainly doing serial access with very little modification then it probably doesn&#39;t matter which you choose.\r\n\r\nLinked lists have a slightly higher overhead since, like you say, you&#39;re dealing with potentially non-contiguous blocks of memory and (effectively) pointers to the next element. That&#39;s probably not an important factor unless you&#39;re dealing with millions of entries however.\r\n\r\n  [1]: https://stackoverflow.com/questions/487258/plain-english-explanation-of-big-o/487278#487278","title":"Array or List in Java. Which is faster?","body":"<p>Well firstly it's worth clarifying do you mean \"list\" in the classical comp sci data structures sense (ie a linked list) or do you mean java.util.List? If you mean a java.util.List, it's an interface. If you want to use an array just use the ArrayList implementation and you'll get array-like behaviour and semantics. Problem solved.</p>\n\n<p>If you mean an array vs a linked list, it's a slightly different argument for which we go back to Big O (here is a <a href=\"https://stackoverflow.com/questions/487258/plain-english-explanation-of-big-o/487278#487278\">plain English explanation</a> if this is an unfamiliar term.</p>\n\n<p>Array;</p>\n\n<ul>\n<li>Random Access: O(1);</li>\n<li>Insert: O(n);</li>\n<li>Delete: O(n).</li>\n</ul>\n\n<p>Linked List:</p>\n\n<ul>\n<li>Random Access: O(n);</li>\n<li>Insert: O(1);</li>\n<li>Delete: O(1).</li>\n</ul>\n\n<p>So you choose whichever one best suits how you resize your array. If you resize, insert and delete a lot then maybe a linked list is a better choice. Same goes for if random access is rare. You mention serial access. If you're mainly doing serial access with very little modification then it probably doesn't matter which you choose.</p>\n\n<p>Linked lists have a slightly higher overhead since, like you say, you're dealing with potentially non-contiguous blocks of memory and (effectively) pointers to the next element. That's probably not an important factor unless you're dealing with millions of entries however.</p>\n"},{"tags":[],"owner":{"account_id":17401,"reputation":653,"user_id":38918,"display_name":"Emre K&#246;se"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1238855385,"creation_date":1238855385,"answer_id":717186,"question_id":716597,"body_markdown":"Array vs. List choice is not so important (considering performance) in the case of storing string objects. Because both array and list will store string object references, not the actual objects.\r\n\r\n1. If the number of strings is almost constant then use an array (or ArrayList). But if the number varies too much then you&#39;d better use LinkedList.\r\n2. If there is (or will be) a need for adding or deleting elements in the middle, then you certainly have to use LinkedList.","title":"Array or List in Java. Which is faster?","body":"<p>Array vs. List choice is not so important (considering performance) in the case of storing string objects. Because both array and list will store string object references, not the actual objects.</p>\n\n<ol>\n<li>If the number of strings is almost constant then use an array (or ArrayList). But if the number varies too much then you'd better use LinkedList.</li>\n<li>If there is (or will be) a need for adding or deleting elements in the middle, then you certainly have to use LinkedList.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":31640,"reputation":12044,"user_id":87056,"accept_rate":75,"display_name":"Yakov Fain"},"comment_count":0,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1238855712,"creation_date":1238855712,"answer_id":717191,"question_id":716597,"body_markdown":"Array is faster - all memory is pre-allocated in advance.","title":"Array or List in Java. Which is faster?","body":"<p>Array is faster - all memory is pre-allocated in advance.</p>\n"},{"comments":[{"owner":{"account_id":29100,"reputation":14836,"user_id":78351,"accept_rate":71,"display_name":"euphoria83"},"score":0,"creation_date":1238862481,"post_id":717205,"comment_id":529403,"body_markdown":"@ Chris May : Great work ! What are the actual running times for both ? Can you tell me the size of the strings you were using ? \nAlso, as the use of &#39;String s : stringsList&#39; made it take longer, this is my primary fear in using the higher abstractions in Java in general.","body":"@ Chris May : Great work ! What are the actual running times for both ? Can you tell me the size of the strings you were using ?  Also, as the use of &#39;String s : stringsList&#39; made it take longer, this is my primary fear in using the higher abstractions in Java in general."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1238871706,"post_id":717205,"comment_id":529646,"body_markdown":"It doesn&#39;t really matter how long the strings are for this mcirobenchmark. There is no gc, and the `char[]` is not touched (this is not C).","body":"It doesn&#39;t really matter how long the strings are for this mcirobenchmark. There is no gc, and the <code>char[]</code> is not touched (this is not C)."},{"owner":{"account_id":31651,"reputation":670,"user_id":87097,"display_name":"Chris May"},"score":0,"creation_date":1238938510,"post_id":717205,"comment_id":530929,"body_markdown":"Typical times for me were ~25ms for the array version, ~35ms for the ArrayList version. The strings were 15-20 chars long.  As Tom says, the string size doesn&#39;t make much of a difference, with a ~100-char string the timings were about same.","body":"Typical times for me were ~25ms for the array version, ~35ms for the ArrayList version. The strings were 15-20 chars long.  As Tom says, the string size doesn&#39;t make much of a difference, with a ~100-char string the timings were about same."},{"owner":{"account_id":263812,"reputation":7348,"user_id":549641,"display_name":"jmg"},"score":3,"creation_date":1311745990,"post_id":717205,"comment_id":8130112,"body_markdown":"How did you measure? Naive measuring in Java micro benchmarks usually generates more misinformation than information. Beware of above statement.","body":"How did you measure? Naive measuring in Java micro benchmarks usually generates more misinformation than information. Beware of above statement."}],"tags":[],"owner":{"account_id":31651,"reputation":670,"user_id":87097,"display_name":"Chris May"},"comment_count":4,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1238856273,"creation_date":1238856273,"answer_id":717205,"question_id":716597,"body_markdown":"I wrote a little benchmark to compare ArrayLists with Arrays. On my old-ish laptop, the time to traverse through a 5000-element arraylist, 1000 times, was about 10 milliseconds slower than the equivalent array code. \r\n\r\nSo, if you&#39;re doing nothing but iterating the list, and you&#39;re doing it a lot, then _maybe_ it&#39;s worth the optimisation. Otherwise I&#39;d use the List, because it&#39;ll make it easier when you _do_ need to optimise the code.\r\n\r\nn.b. I _did_ notice that using `for String s: stringsList` was about 50% slower than using an old-style for-loop to access the list. Go figure... Here&#39;s the two functions I timed; the array and list were filled with 5000 random (different) strings.\r\n\r\n    private static void readArray(String[] strings) {\r\n\t\tlong totalchars = 0;\r\n\t\tfor (int j = 0; j &lt; ITERATIONS; j++) {\r\n\t\t\ttotalchars = 0;\r\n\t\t\tfor (int i = 0; i &lt; strings.length; i++) {\r\n\t\t\t\ttotalchars += strings[i].length();\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static void readArrayList(List&lt;String&gt; stringsList) {\r\n\t\tlong totalchars = 0;\r\n\t\tfor (int j = 0; j &lt; ITERATIONS; j++) {\r\n\t\t\ttotalchars = 0;\r\n\t\t\tfor (int i = 0; i &lt; stringsList.size(); i++) {\r\n\t\t\t\ttotalchars += stringsList.get(i).length();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n","title":"Array or List in Java. Which is faster?","body":"<p>I wrote a little benchmark to compare ArrayLists with Arrays. On my old-ish laptop, the time to traverse through a 5000-element arraylist, 1000 times, was about 10 milliseconds slower than the equivalent array code. </p>\n\n<p>So, if you're doing nothing but iterating the list, and you're doing it a lot, then <em>maybe</em> it's worth the optimisation. Otherwise I'd use the List, because it'll make it easier when you <em>do</em> need to optimise the code.</p>\n\n<p>n.b. I <em>did</em> notice that using <code>for String s: stringsList</code> was about 50% slower than using an old-style for-loop to access the list. Go figure... Here's the two functions I timed; the array and list were filled with 5000 random (different) strings.</p>\n\n<pre><code>private static void readArray(String[] strings) {\n    long totalchars = 0;\n    for (int j = 0; j &lt; ITERATIONS; j++) {\n        totalchars = 0;\n        for (int i = 0; i &lt; strings.length; i++) {\n            totalchars += strings[i].length();\n\n        }\n    }\n}\n\nprivate static void readArrayList(List&lt;String&gt; stringsList) {\n    long totalchars = 0;\n    for (int j = 0; j &lt; ITERATIONS; j++) {\n        totalchars = 0;\n        for (int i = 0; i &lt; stringsList.size(); i++) {\n            totalchars += stringsList.get(i).length();\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":29100,"reputation":14836,"user_id":78351,"accept_rate":71,"display_name":"euphoria83"},"score":2,"creation_date":1238917431,"post_id":718145,"comment_id":530518,"body_markdown":"is trie like a library or how do i create it ?","body":"is trie like a library or how do i create it ?"},{"owner":{"account_id":9958,"reputation":10989,"user_id":18615,"accept_rate":56,"display_name":"M.N"},"score":0,"creation_date":1303886951,"post_id":718145,"comment_id":6651926,"body_markdown":"A trie would be useful only in case of tokenized strings, not if someone&#39;s storing running text as strings.","body":"A trie would be useful only in case of tokenized strings, not if someone&#39;s storing running text as strings."}],"tags":[],"owner":{"account_id":31324,"reputation":34658,"user_id":85931,"accept_rate":57,"display_name":"tpdi"},"comment_count":2,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1238892914,"creation_date":1238892914,"answer_id":718145,"question_id":716597,"body_markdown":"If you have thousands, consider using a trie. A trie is a tree-like structure that merges the common prefixes of the stored string.\r\n\r\nFor example, if the strings were \r\n\r\n    intern\r\n    international\r\n    internationalize\r\n    internet\r\n    internets\r\n\r\nThe trie would store:\r\n\r\n    intern\r\n     -&gt; \\0\r\n     international\r\n     -&gt; \\0\r\n     -&gt; ize\\0\r\n     net\r\n     -&gt;\\0\r\n     -&gt;s\\0\r\n\r\nThe strings requires 57 characters (including the null terminator, &#39;\\0&#39;) for storage, plus whatever the size of the String object that holds them. (In truth, we should  probably round all sizes up to multiples of 16, but...) Call it 57 + 5 = 62 bytes, roughly.\r\n\r\n\r\nThe trie requires 29 (including the null terminator, &#39;\\0&#39;) for storage, plus sizeof the trie nodes, which are a ref to an array and a list of child trie nodes.\r\n\r\nFor this example, that probably comes out about the same; for thousands, it probably comes out less as long as you do have common prefixes.\r\n\r\nNow, when using the trie in other code, you&#39;ll have to convert to String, probably using a StringBuffer as an intermediary. If many of the strings are in use at once as Strings, outside the trie, it&#39;s a loss.\r\n\r\nBut if you&#39;re only using a few at the time -- say, to look up things in a dictionary -- the trie can save you a lot of space. Definitely less space than storing them in a HashSet.\r\n\r\nYou say you&#39;re accessing them &quot;serially&quot; -- if that means sequentially an alphabetically, the trie also obviously gives you alphabetical order for free, if you iterate it depth-first.\r\n","title":"Array or List in Java. Which is faster?","body":"<p>If you have thousands, consider using a trie. A trie is a tree-like structure that merges the common prefixes of the stored string.</p>\n\n<p>For example, if the strings were </p>\n\n<pre><code>intern\ninternational\ninternationalize\ninternet\ninternets\n</code></pre>\n\n<p>The trie would store:</p>\n\n<pre><code>intern\n -&gt; \\0\n international\n -&gt; \\0\n -&gt; ize\\0\n net\n -&gt;\\0\n -&gt;s\\0\n</code></pre>\n\n<p>The strings requires 57 characters (including the null terminator, '\\0') for storage, plus whatever the size of the String object that holds them. (In truth, we should  probably round all sizes up to multiples of 16, but...) Call it 57 + 5 = 62 bytes, roughly.</p>\n\n<p>The trie requires 29 (including the null terminator, '\\0') for storage, plus sizeof the trie nodes, which are a ref to an array and a list of child trie nodes.</p>\n\n<p>For this example, that probably comes out about the same; for thousands, it probably comes out less as long as you do have common prefixes.</p>\n\n<p>Now, when using the trie in other code, you'll have to convert to String, probably using a StringBuffer as an intermediary. If many of the strings are in use at once as Strings, outside the trie, it's a loss.</p>\n\n<p>But if you're only using a few at the time -- say, to look up things in a dictionary -- the trie can save you a lot of space. Definitely less space than storing them in a HashSet.</p>\n\n<p>You say you're accessing them \"serially\" -- if that means sequentially an alphabetically, the trie also obviously gives you alphabetical order for free, if you iterate it depth-first.</p>\n"},{"tags":[],"owner":{"account_id":199672,"reputation":349,"user_id":445133,"display_name":"JRalph"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1284217035,"creation_date":1284217035,"answer_id":3691444,"question_id":716597,"body_markdown":"Depending on the implementation. it&#39;s possible that an array of primitive types will be smaller and more efficient than ArrayList. This is because the array will store the values directly in a contiguous block of memory, while the simplest ArrayList implementation will store pointers to each value. On a 64-bit platform especially, this can make a huge difference.\r\n\r\nOf course, it&#39;s possible for the jvm implementation to have a special case for this situation, in which case the performance will be the same. ","title":"Array or List in Java. Which is faster?","body":"<p>Depending on the implementation. it's possible that an array of primitive types will be smaller and more efficient than ArrayList. This is because the array will store the values directly in a contiguous block of memory, while the simplest ArrayList implementation will store pointers to each value. On a 64-bit platform especially, this can make a huge difference.</p>\n\n<p>Of course, it's possible for the jvm implementation to have a special case for this situation, in which case the performance will be the same. </p>\n"},{"tags":[],"owner":{"account_id":422887,"reputation":3986,"user_id":801919,"accept_rate":62,"display_name":"Vikram"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1343253221,"creation_date":1343253221,"answer_id":11659220,"question_id":716597,"body_markdown":"It depends on how you have to access it.\r\n \r\nAfter storing, if you mainly want to do search operation, with little or no insert/delete, then go for Array (as search is done in O(1) in arrays, whereas add/delete may need re-ordering of the elements).\r\n \r\nAfter storing, if your main purpose is to add/delete strings, with little or no search operation, then go for List. ","title":"Array or List in Java. Which is faster?","body":"<p>It depends on how you have to access it.</p>\n\n<p>After storing, if you mainly want to do search operation, with little or no insert/delete, then go for Array (as search is done in O(1) in arrays, whereas add/delete may need re-ordering of the elements).</p>\n\n<p>After storing, if your main purpose is to add/delete strings, with little or no search operation, then go for List. </p>\n"},{"comments":[{"owner":{"account_id":294070,"reputation":389,"user_id":597745,"display_name":"Zak Patterson"},"score":0,"creation_date":1352756809,"post_id":12443858,"comment_id":18223995,"body_markdown":"I found this an interesting answer, but I&#39;d wonder if it&#39;s even worse if the ArrayList is not initialized with an initial size in memory.  Generally the benefit of using ArrayList over a native array in a sense is that you won&#39;t know and you don&#39;t have to worry.  ArrayLists are by default created with initial length 10 and then are resized.  I think the resizing is expensive.  I haven&#39;t tried benchmarking it obviously.","body":"I found this an interesting answer, but I&#39;d wonder if it&#39;s even worse if the ArrayList is not initialized with an initial size in memory.  Generally the benefit of using ArrayList over a native array in a sense is that you won&#39;t know and you don&#39;t have to worry.  ArrayLists are by default created with initial length 10 and then are resized.  I think the resizing is expensive.  I haven&#39;t tried benchmarking it obviously."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":8,"creation_date":1353867718,"post_id":12443858,"comment_id":18565976,"body_markdown":"This micro benchmark has flaws (no warm up, operations not in a separate method so the arraylist part is never optimised by the JIT etc.)","body":"This micro benchmark has flaws (no warm up, operations not in a separate method so the arraylist part is never optimised by the JIT etc.)"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1367149018,"post_id":12443858,"comment_id":23270529,"body_markdown":"I agree with assylias.  The results of this benchmark should not be trusted.","body":"I agree with assylias.  The results of this benchmark should not be trusted."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1368621966,"post_id":12443858,"comment_id":23800276,"body_markdown":"@StephenC I have added a proper micro benchmark (that shows that get operations are comparable).","body":"@StephenC I have added a proper micro benchmark (that shows that get operations are comparable)."}],"tags":[],"owner":{"account_id":46006,"reputation":952,"user_id":135791,"display_name":"AbePralle"},"comment_count":4,"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1490121989,"creation_date":1347760256,"answer_id":12443858,"question_id":716597,"body_markdown":"I agree that in most cases you should choose the flexibility and elegance of ArrayLists over arrays - and in most cases the impact to program performance will be negligible.\r\n\r\nHowever, if you&#39;re doing constant, heavy iteration with little structural change (no adds and removes) for, say, software graphics rendering or a custom virtual machine, my sequential access benchmarking tests show that **ArrayLists are 1.5x slower than arrays** on my system (Java 1.6 on my one year-old iMac).\r\n\r\nSome code:\r\n\r\n    import java.util.*;\r\n\r\n    public class ArrayVsArrayList {\r\n        static public void main( String[] args ) {\r\n\r\n            String[] array = new String[300];\r\n            ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(300);\r\n\r\n            for (int i=0; i&lt;300; ++i) {\r\n                if (Math.random() &gt; 0.5) {\r\n                    array[i] = &quot;abc&quot;;\r\n                } else {\r\n                    array[i] = &quot;xyz&quot;;\r\n                }\r\n\r\n                list.add( array[i] );\r\n            }\r\n\r\n            int iterations = 100000000;\r\n            long start_ms;\r\n            int sum;\r\n\r\n            start_ms = System.currentTimeMillis();\r\n            sum = 0;\r\n\r\n            for (int i=0; i&lt;iterations; ++i) {\r\n              for (int j=0; j&lt;300; ++j) sum += array[j].length();\r\n            }\r\n            \r\n            System.out.println( (System.currentTimeMillis() - start_ms) + &quot; ms (array)&quot; );\r\n            // Prints ~13,500 ms on my system\r\n\r\n            start_ms = System.currentTimeMillis();\r\n            sum = 0;\r\n\r\n            for (int i=0; i&lt;iterations; ++i) {\r\n              for (int j=0; j&lt;300; ++j) sum += list.get(j).length();\r\n            }\r\n            \r\n            System.out.println( (System.currentTimeMillis() - start_ms) + &quot; ms (ArrayList)&quot; );\r\n            // Prints ~20,800 ms on my system - about 1.5x slower than direct array access\r\n        }\r\n    }\r\n\r\n","title":"Array or List in Java. Which is faster?","body":"<p>I agree that in most cases you should choose the flexibility and elegance of ArrayLists over arrays - and in most cases the impact to program performance will be negligible.</p>\n\n<p>However, if you're doing constant, heavy iteration with little structural change (no adds and removes) for, say, software graphics rendering or a custom virtual machine, my sequential access benchmarking tests show that <strong>ArrayLists are 1.5x slower than arrays</strong> on my system (Java 1.6 on my one year-old iMac).</p>\n\n<p>Some code:</p>\n\n<pre><code>import java.util.*;\n\npublic class ArrayVsArrayList {\n    static public void main( String[] args ) {\n\n        String[] array = new String[300];\n        ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(300);\n\n        for (int i=0; i&lt;300; ++i) {\n            if (Math.random() &gt; 0.5) {\n                array[i] = \"abc\";\n            } else {\n                array[i] = \"xyz\";\n            }\n\n            list.add( array[i] );\n        }\n\n        int iterations = 100000000;\n        long start_ms;\n        int sum;\n\n        start_ms = System.currentTimeMillis();\n        sum = 0;\n\n        for (int i=0; i&lt;iterations; ++i) {\n          for (int j=0; j&lt;300; ++j) sum += array[j].length();\n        }\n\n        System.out.println( (System.currentTimeMillis() - start_ms) + \" ms (array)\" );\n        // Prints ~13,500 ms on my system\n\n        start_ms = System.currentTimeMillis();\n        sum = 0;\n\n        for (int i=0; i&lt;iterations; ++i) {\n          for (int j=0; j&lt;300; ++j) sum += list.get(j).length();\n        }\n\n        System.out.println( (System.currentTimeMillis() - start_ms) + \" ms (ArrayList)\" );\n        // Prints ~20,800 ms on my system - about 1.5x slower than direct array access\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1952298,"reputation":91,"user_id":1756134,"display_name":"Thomas Mauch"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1677514697,"creation_date":1350645024,"answer_id":12972979,"question_id":716597,"body_markdown":"If you can live with a fixed size, arrays will be faster and need less memory.\r\n\r\nIf you need the flexibility of the List interface with adding and removing elements, the question remains which implementation you should choose. Often ArrayList is recommended and used for any case, but also ArrayList has its performance problems if elements at the beginning or in the middle of the list must be removed or inserted.\r\n\r\nYou therefore may want to have a look at https://dzone.com/articles/gaplist-lightning-fast-list which introduces GapList. This new list implementation combines the strengths of both ArrayList and LinkedList resulting in very good performance for nearly all operations. Get it at https://github.com/magicwerk/brownies-collections.","title":"Array or List in Java. Which is faster?","body":"<p>If you can live with a fixed size, arrays will be faster and need less memory.</p>\n<p>If you need the flexibility of the List interface with adding and removing elements, the question remains which implementation you should choose. Often ArrayList is recommended and used for any case, but also ArrayList has its performance problems if elements at the beginning or in the middle of the list must be removed or inserted.</p>\n<p>You therefore may want to have a look at <a href=\"https://dzone.com/articles/gaplist-lightning-fast-list\" rel=\"nofollow noreferrer\">https://dzone.com/articles/gaplist-lightning-fast-list</a> which introduces GapList. This new list implementation combines the strengths of both ArrayList and LinkedList resulting in very good performance for nearly all operations. Get it at <a href=\"https://github.com/magicwerk/brownies-collections\" rel=\"nofollow noreferrer\">https://github.com/magicwerk/brownies-collections</a>.</p>\n"},{"comments":[{"owner":{"account_id":1246414,"reputation":6801,"user_id":1207769,"accept_rate":62,"display_name":"ctrueden"},"score":2,"creation_date":1380301931,"post_id":16565376,"comment_id":28164351,"body_markdown":"Nice analysis. However, with respect to your comment &quot;when dealing with primitives, arrays can be significantly faster as they will allow one to avoid many boxing/unboxing conversions&quot;, you *can* have your cake and eat it too, with a primitive-array-backed List implementation; e.g.: https://github.com/scijava/scijava-common/blob/master/src/main/java/org/scijava/util/IntArray.java#L41. I&#39;m actually quite surprised such a thing hasn&#39;t made it into core Java.","body":"Nice analysis. However, with respect to your comment &quot;when dealing with primitives, arrays can be significantly faster as they will allow one to avoid many boxing/unboxing conversions&quot;, you <i>can</i> have your cake and eat it too, with a primitive-array-backed List implementation; e.g.: <a href=\"https://github.com/scijava/scijava-common/blob/master/src/main/java/org/scijava/util/IntArray.java#L41\" rel=\"nofollow noreferrer\">github.com/scijava/scijava-common/blob/master/src/main/java/&zwnj;&#8203;org/&hellip;</a>. I&#39;m actually quite surprised such a thing hasn&#39;t made it into core Java."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":2,"creation_date":1380302106,"post_id":16565376,"comment_id":28164443,"body_markdown":"@ctrueden yes the comment applied to the standard JDK ArrayList. trove4j is a well known library that supports primitive lists. Java 8 brings some improvements with several primitive-specialised Streams.","body":"@ctrueden yes the comment applied to the standard JDK ArrayList. trove4j is a well known library that supports primitive lists. Java 8 brings some improvements with several primitive-specialised Streams."},{"owner":{"account_id":2503,"reputation":14439,"user_id":3485,"accept_rate":76,"display_name":"Hoffmann"},"score":1,"creation_date":1412691855,"post_id":16565376,"comment_id":41155504,"body_markdown":"I don&#39;t know how jmh benchmarks work but do they take into account the JIT compiling that can happen? The performance of a Java application can vary over time as the JVM compiles your code.","body":"I don&#39;t know how jmh benchmarks work but do they take into account the JIT compiling that can happen? The performance of a Java application can vary over time as the JVM compiles your code."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":1,"creation_date":1412693898,"post_id":16565376,"comment_id":41156893,"body_markdown":"@Hoffmann Yes - it includes a warmup phase which is excluded from the measurement.","body":"@Hoffmann Yes - it includes a warmup phase which is excluded from the measurement."}],"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":4,"down_vote_count":1,"up_vote_count":135,"is_accepted":false,"score":134,"last_activity_date":1369031291,"creation_date":1368621928,"answer_id":16565376,"question_id":716597,"body_markdown":"Although the answers proposing to use ArrayList do make sense in most scenario, the actual question of relative performance has not really been answered.\n\nThere are a few things you can do with an array:\n\n- create it\n- set an item\n- get an item\n- clone/copy it\n\n## General conclusion\n\n**Although get and set operations are somewhat slower on an ArrayList** (resp. 1 and 3 nanosecond per call on my machine), **there is very little overhead of using an ArrayList vs. an array for any non-intensive use.** There are however a few things to keep in mind:\n\n- resizing operations on a list (when calling `list.add(...)`) are costly and one should try to set the initial capacity at an adequate level when possible (note that the same issue arises when using an array)\n- when dealing with primitives, arrays can be significantly faster as they will allow one to avoid many boxing/unboxing conversions\n- an application that only gets/sets values in an ArrayList (not very common!) could see a performance gain of more than 25% by switching to an array\n\n## Detailed results\n\nHere are the results I measured for those three operations using the [jmh benchmarking library][0] (times in nanoseconds) with JDK 7 on a standard x86 desktop machine. Note that ArrayList are never resized in the tests to make sure results are comparable. [Benchmark code available here][3].\n\n## Array/ArrayList Creation\n\nI ran 4 tests, executing the following statements:\n\n- createArray1: `Integer[] array = new Integer[1];`\n- createList1: `List&lt;Integer&gt; list = new ArrayList&lt;&gt; (1);`\n- createArray10000: `Integer[] array = new Integer[10000];`\n- createList10000: `List&lt;Integer&gt; list = new ArrayList&lt;&gt; (10000);`\n\nResults (in nanoseconds per call, 95% confidence):\n\n    a.p.g.a.ArrayVsList.CreateArray1         [10.933, 11.097]\n    a.p.g.a.ArrayVsList.CreateList1          [10.799, 11.046]\n    a.p.g.a.ArrayVsList.CreateArray10000    [394.899, 404.034]\n    a.p.g.a.ArrayVsList.CreateList10000     [396.706, 401.266]\n\n**Conclusion: no noticeable difference**.\n\n## get operations\n\nI ran 2 tests, executing the following statements:\n\n- getList: `return list.get(0);`\n- getArray: `return array[0];`\n\nResults (in nanoseconds per call, 95% confidence):\n\n    a.p.g.a.ArrayVsList.getArray   [2.958, 2.984]\n    a.p.g.a.ArrayVsList.getList    [3.841, 3.874]\n\n**Conclusion: getting from an array is about 25% faster** than getting from an ArrayList, although the difference is only on the order of one nanosecond.\n\n## set operations\n\nI ran 2 tests, executing the following statements:\n\n- setList: `list.set(0, value);`\n- setArray: `array[0] = value;`\n\nResults (in nanoseconds per call):\n\n    a.p.g.a.ArrayVsList.setArray   [4.201, 4.236]\n    a.p.g.a.ArrayVsList.setList    [6.783, 6.877]\n\n**Conclusion: set operations on arrays are about 40% faster** than on lists, but, as for get, each set operation takes a few nanoseconds - so for the difference to reach 1 second, one would need to set items in the list/array hundreds of millions of times!\n\n# clone/copy\n\nArrayList&#39;s copy constructor delegates to `Arrays.copyOf` so performance is identical to array copy (copying an array via `clone`, `Arrays.copyOf` or `System.arrayCopy` [makes no material difference performance-wise][1]).\n\n [0]: http://openjdk.java.net/projects/code-tools/jmh/\n [1]: https://stackoverflow.com/questions/12157300/clone-or-arrays-copyof\n [3]: https://bitbucket.org/assylias/performance/src/06d31f92c240/src/main/java/com/assylias/performance/ArrayVsList.java?at=master","title":"Array or List in Java. Which is faster?","body":"<p>Although the answers proposing to use ArrayList do make sense in most scenario, the actual question of relative performance has not really been answered.</p>\n<p>There are a few things you can do with an array:</p>\n<ul>\n<li>create it</li>\n<li>set an item</li>\n<li>get an item</li>\n<li>clone/copy it</li>\n</ul>\n<h2>General conclusion</h2>\n<p><strong>Although get and set operations are somewhat slower on an ArrayList</strong> (resp. 1 and 3 nanosecond per call on my machine), <strong>there is very little overhead of using an ArrayList vs. an array for any non-intensive use.</strong> There are however a few things to keep in mind:</p>\n<ul>\n<li>resizing operations on a list (when calling <code>list.add(...)</code>) are costly and one should try to set the initial capacity at an adequate level when possible (note that the same issue arises when using an array)</li>\n<li>when dealing with primitives, arrays can be significantly faster as they will allow one to avoid many boxing/unboxing conversions</li>\n<li>an application that only gets/sets values in an ArrayList (not very common!) could see a performance gain of more than 25% by switching to an array</li>\n</ul>\n<h2>Detailed results</h2>\n<p>Here are the results I measured for those three operations using the <a href=\"http://openjdk.java.net/projects/code-tools/jmh/\" rel=\"noreferrer\">jmh benchmarking library</a> (times in nanoseconds) with JDK 7 on a standard x86 desktop machine. Note that ArrayList are never resized in the tests to make sure results are comparable. <a href=\"https://bitbucket.org/assylias/performance/src/06d31f92c240/src/main/java/com/assylias/performance/ArrayVsList.java?at=master\" rel=\"noreferrer\">Benchmark code available here</a>.</p>\n<h2>Array/ArrayList Creation</h2>\n<p>I ran 4 tests, executing the following statements:</p>\n<ul>\n<li>createArray1: <code>Integer[] array = new Integer[1];</code></li>\n<li>createList1: <code>List&lt;Integer&gt; list = new ArrayList&lt;&gt; (1);</code></li>\n<li>createArray10000: <code>Integer[] array = new Integer[10000];</code></li>\n<li>createList10000: <code>List&lt;Integer&gt; list = new ArrayList&lt;&gt; (10000);</code></li>\n</ul>\n<p>Results (in nanoseconds per call, 95% confidence):</p>\n<pre><code>a.p.g.a.ArrayVsList.CreateArray1         [10.933, 11.097]\na.p.g.a.ArrayVsList.CreateList1          [10.799, 11.046]\na.p.g.a.ArrayVsList.CreateArray10000    [394.899, 404.034]\na.p.g.a.ArrayVsList.CreateList10000     [396.706, 401.266]\n</code></pre>\n<p><strong>Conclusion: no noticeable difference</strong>.</p>\n<h2>get operations</h2>\n<p>I ran 2 tests, executing the following statements:</p>\n<ul>\n<li>getList: <code>return list.get(0);</code></li>\n<li>getArray: <code>return array[0];</code></li>\n</ul>\n<p>Results (in nanoseconds per call, 95% confidence):</p>\n<pre><code>a.p.g.a.ArrayVsList.getArray   [2.958, 2.984]\na.p.g.a.ArrayVsList.getList    [3.841, 3.874]\n</code></pre>\n<p><strong>Conclusion: getting from an array is about 25% faster</strong> than getting from an ArrayList, although the difference is only on the order of one nanosecond.</p>\n<h2>set operations</h2>\n<p>I ran 2 tests, executing the following statements:</p>\n<ul>\n<li>setList: <code>list.set(0, value);</code></li>\n<li>setArray: <code>array[0] = value;</code></li>\n</ul>\n<p>Results (in nanoseconds per call):</p>\n<pre><code>a.p.g.a.ArrayVsList.setArray   [4.201, 4.236]\na.p.g.a.ArrayVsList.setList    [6.783, 6.877]\n</code></pre>\n<p><strong>Conclusion: set operations on arrays are about 40% faster</strong> than on lists, but, as for get, each set operation takes a few nanoseconds - so for the difference to reach 1 second, one would need to set items in the list/array hundreds of millions of times!</p>\n<h1>clone/copy</h1>\n<p>ArrayList's copy constructor delegates to <code>Arrays.copyOf</code> so performance is identical to array copy (copying an array via <code>clone</code>, <code>Arrays.copyOf</code> or <code>System.arrayCopy</code> <a href=\"https://stackoverflow.com/questions/12157300/clone-or-arrays-copyof\">makes no material difference performance-wise</a>).</p>\n"},{"comments":[{"owner":{"account_id":2101096,"reputation":6836,"user_id":2180290,"accept_rate":75,"display_name":"0x6C38"},"score":2,"creation_date":1376873662,"post_id":16730763,"comment_id":26859574,"body_markdown":"`3` times faster true, but insignificantly so. `14ms` is not a long time","body":"<code>3</code> times faster true, but insignificantly so. <code>14ms</code> is not a long time"},{"owner":{"account_id":126861,"reputation":2404,"user_id":323653,"accept_rate":21,"display_name":"Mike"},"score":1,"creation_date":1382586632,"post_id":16730763,"comment_id":29020103,"body_markdown":"Benchmark is not considering JVM warm up. Change main() to test() and call test from main repeatedly. By the 3rd or 4th run of test, it runs many times faster.\nAt that point, I&#39;m seeing that array is about 9 times faster than array.","body":"Benchmark is not considering JVM warm up. Change main() to test() and call test from main repeatedly. By the 3rd or 4th run of test, it runs many times faster. At that point, I&#39;m seeing that array is about 9 times faster than array."}],"tags":[],"owner":{"account_id":70642,"reputation":12820,"user_id":204665,"accept_rate":92,"display_name":"Roman Nikitchenko"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1382605332,"creation_date":1369384504,"answer_id":16730763,"question_id":716597,"body_markdown":"UPDATE:\r\n\r\nAs Mark noted there is no significant difference after JVM warm up (several test passes). Checked with re-created array or even new pass starting with new row of matrix. With great probability this signs simple array with index access is not to be used in favor of collections.\r\n\r\nStill first 1-2 passes simple array is 2-3 times faster.\r\n\r\nORIGINAL POST:\r\n\r\nToo much words for the subject too simple to check. **Without any question array is several times faster than any class container**. I run on this question looking for alternatives for my performance critical section. Here is the prototype code I built to check real situation:\r\n\r\n    import java.util.List;\r\n    import java.util.Arrays;\r\n    \r\n    public class IterationTest {\r\n    \r\n        private static final long MAX_ITERATIONS = 1000000000;\r\n    \r\n        public static void main(String [] args) {\r\n    \r\n            Integer [] array = {1, 5, 3, 5};\r\n            List&lt;Integer&gt; list = Arrays.asList(array);\r\n    \r\n            long start = System.currentTimeMillis();\r\n            int test_sum = 0;\r\n            for (int i = 0; i &lt; MAX_ITERATIONS; ++i) {\r\n    //            for (int e : array) {\r\n                for (int e : list) {\r\n                    test_sum += e;\r\n                }\r\n            }\r\n            long stop = System.currentTimeMillis();\r\n    \r\n            long ms = (stop - start);\r\n            System.out.println(&quot;Time: &quot; + ms);\r\n        }\r\n    }\r\n\r\nAnd here is the answer:\r\n\r\nBased on array (line 16 is active):\r\n\r\n    Time: 7064\r\n\r\nBased on list (line 17 is active):\r\n\r\n    Time: 20950\r\n\r\nAny more comment on &#39;faster&#39;? This is quite understood. The question is when about 3 time faster is better for you than flexibility of List. But this is another question.\r\nBy the way I checked this too based on manually constructed `ArrayList`. Almost the same result.\r\n","title":"Array or List in Java. Which is faster?","body":"<p>UPDATE:</p>\n\n<p>As Mark noted there is no significant difference after JVM warm up (several test passes). Checked with re-created array or even new pass starting with new row of matrix. With great probability this signs simple array with index access is not to be used in favor of collections.</p>\n\n<p>Still first 1-2 passes simple array is 2-3 times faster.</p>\n\n<p>ORIGINAL POST:</p>\n\n<p>Too much words for the subject too simple to check. <strong>Without any question array is several times faster than any class container</strong>. I run on this question looking for alternatives for my performance critical section. Here is the prototype code I built to check real situation:</p>\n\n<pre><code>import java.util.List;\nimport java.util.Arrays;\n\npublic class IterationTest {\n\n    private static final long MAX_ITERATIONS = 1000000000;\n\n    public static void main(String [] args) {\n\n        Integer [] array = {1, 5, 3, 5};\n        List&lt;Integer&gt; list = Arrays.asList(array);\n\n        long start = System.currentTimeMillis();\n        int test_sum = 0;\n        for (int i = 0; i &lt; MAX_ITERATIONS; ++i) {\n//            for (int e : array) {\n            for (int e : list) {\n                test_sum += e;\n            }\n        }\n        long stop = System.currentTimeMillis();\n\n        long ms = (stop - start);\n        System.out.println(\"Time: \" + ms);\n    }\n}\n</code></pre>\n\n<p>And here is the answer:</p>\n\n<p>Based on array (line 16 is active):</p>\n\n<pre><code>Time: 7064\n</code></pre>\n\n<p>Based on list (line 17 is active):</p>\n\n<pre><code>Time: 20950\n</code></pre>\n\n<p>Any more comment on 'faster'? This is quite understood. The question is when about 3 time faster is better for you than flexibility of List. But this is another question.\nBy the way I checked this too based on manually constructed <code>ArrayList</code>. Almost the same result.</p>\n"},{"tags":[],"owner":{"account_id":3673241,"reputation":1185,"user_id":3059896,"display_name":"Shehan Simen"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1386197665,"creation_date":1386197665,"answer_id":20387851,"question_id":716597,"body_markdown":"List is the preferred way in java 1.5 and beyond as it can use generics. Arrays cannot have generics. Also Arrays have a pre defined length, which cannot grow dynamically. Initializing an array with a large size is not a good idea.\r\nArrayList is the the way to declare an array with generics and it can dynamically grow.\r\nBut if delete and insert is used more frequently, then linked list is the fastest data structure to be used.","title":"Array or List in Java. Which is faster?","body":"<p>List is the preferred way in java 1.5 and beyond as it can use generics. Arrays cannot have generics. Also Arrays have a pre defined length, which cannot grow dynamically. Initializing an array with a large size is not a good idea.\nArrayList is the the way to declare an array with generics and it can dynamically grow.\nBut if delete and insert is used more frequently, then linked list is the fastest data structure to be used.</p>\n"},{"comments":[{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1412694081,"post_id":21872909,"comment_id":41157021,"body_markdown":"The documentation you linked to is more than 10 years old, i.e. applies to java 1.3. Major performance improvements have been made since then...","body":"The documentation you linked to is more than 10 years old, i.e. applies to java 1.3. Major performance improvements have been made since then..."},{"owner":{"account_id":1212010,"reputation":7154,"user_id":1180387,"accept_rate":67,"display_name":"Nik"},"score":0,"creation_date":1412741643,"post_id":21872909,"comment_id":41176042,"body_markdown":"@assylias see answers above, they contains performance tests, that says that arrays are faster","body":"@assylias see answers above, they contains performance tests, that says that arrays are faster"},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":3,"creation_date":1412750227,"post_id":21872909,"comment_id":41178440,"body_markdown":"I know I wrote one of them. But I don&#39;t think that &quot;*arrays are recommended everywhere you can use them instead of lists*&quot; is a good advice. ArrayList should be the default choice in most situations unless you are dealing with primitives and your code is performance sensitive.","body":"I know I wrote one of them. But I don&#39;t think that &quot;<i>arrays are recommended everywhere you can use them instead of lists</i>&quot; is a good advice. ArrayList should be the default choice in most situations unless you are dealing with primitives and your code is performance sensitive."}],"tags":[],"owner":{"account_id":1212010,"reputation":7154,"user_id":1180387,"accept_rate":67,"display_name":"Nik"},"comment_count":3,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1392791820,"creation_date":1392791820,"answer_id":21872909,"question_id":716597,"body_markdown":"Arrays recommended everywhere you may use them instead of list, especially in case if you know items count and size would not be changing. \r\n\r\nSee Oracle Java best practice: http://docs.oracle.com/cd/A97688_16/generic.903/bp/java.htm#1007056\r\n\r\nOf course, if you need add and remove objects from collection many times easy use lists.","title":"Array or List in Java. Which is faster?","body":"<p>Arrays recommended everywhere you may use them instead of list, especially in case if you know items count and size would not be changing. </p>\n\n<p>See Oracle Java best practice: <a href=\"http://docs.oracle.com/cd/A97688_16/generic.903/bp/java.htm#1007056\" rel=\"nofollow\">http://docs.oracle.com/cd/A97688_16/generic.903/bp/java.htm#1007056</a></p>\n\n<p>Of course, if you need add and remove objects from collection many times easy use lists.</p>\n"},{"tags":[],"owner":{"account_id":3270638,"reputation":216,"user_id":2754099,"display_name":"Alex Hayward"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1414749574,"creation_date":1414685657,"answer_id":26658046,"question_id":716597,"body_markdown":"A lot of microbenchmarks given here have found numbers of a few nanoseconds for things like array/ArrayList reads. This is quite reasonable if everything is in your L1 cache.\r\n\r\nA higher level cache or main memory access can have order of magnitude times of something like 10nS-100nS, vs more like 1nS for L1 cache. Accessing an ArrayList has an extra memory indirection, and in a real application you could pay this cost anything from almost never to every time, depending on what your code is doing between accesses. And, of course, if you have a lot of small ArrayLists this might add to your memory use and make it more likely you&#39;ll have cache misses.\r\n\r\nThe original poster appears to be using just one and accessing a lot of contents in a short time, so it should be no great hardship. But it might be different for other people, and you should watch out when interpreting microbenchmarks.\r\n\r\nJava Strings, however, are appallingly wasteful, especially if you store lots of small ones (just look at them with a memory analyzer, it seems to be &gt; 60 bytes for a string of a few characters). An array of strings has an indirection to the String object, and another from the String object to a char[] which contains the string itself. If anything&#39;s going to blow your L1 cache it&#39;s this, combined with thousands or tens of thousands of Strings. So, if you&#39;re serious - really serious - about scraping out as much performance as possible then you could look at doing it differently. You could, say, hold two arrays, a char[] with all the strings in it, one after another, and an int[] with offsets to the starts. This will be a PITA to do anything with, and you almost certainly don&#39;t need it. And if you do, you&#39;ve chosen the wrong language.\r\n","title":"Array or List in Java. Which is faster?","body":"<p>A lot of microbenchmarks given here have found numbers of a few nanoseconds for things like array/ArrayList reads. This is quite reasonable if everything is in your L1 cache.</p>\n\n<p>A higher level cache or main memory access can have order of magnitude times of something like 10nS-100nS, vs more like 1nS for L1 cache. Accessing an ArrayList has an extra memory indirection, and in a real application you could pay this cost anything from almost never to every time, depending on what your code is doing between accesses. And, of course, if you have a lot of small ArrayLists this might add to your memory use and make it more likely you'll have cache misses.</p>\n\n<p>The original poster appears to be using just one and accessing a lot of contents in a short time, so it should be no great hardship. But it might be different for other people, and you should watch out when interpreting microbenchmarks.</p>\n\n<p>Java Strings, however, are appallingly wasteful, especially if you store lots of small ones (just look at them with a memory analyzer, it seems to be > 60 bytes for a string of a few characters). An array of strings has an indirection to the String object, and another from the String object to a char[] which contains the string itself. If anything's going to blow your L1 cache it's this, combined with thousands or tens of thousands of Strings. So, if you're serious - really serious - about scraping out as much performance as possible then you could look at doing it differently. You could, say, hold two arrays, a char[] with all the strings in it, one after another, and an int[] with offsets to the starts. This will be a PITA to do anything with, and you almost certainly don't need it. And if you do, you've chosen the wrong language.</p>\n"},{"tags":[],"owner":{"account_id":2472300,"reputation":3706,"user_id":2153834,"accept_rate":67,"display_name":"Vipin Jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1598853035,"creation_date":1456122289,"answer_id":35547033,"question_id":716597,"body_markdown":"&gt; ArrayList internally uses  array  object to add(or store) the\r\n&gt; elements. In other words, ArrayList is backed by Array data\r\n&gt; -structure.The array of ArrayList is resizable (or dynamic).\r\n\r\n  \r\n\r\n**Array is faster than ArrayList** because ArrayList internally uses an array. if we can directly add elements in Array and indirectly add an element in \r\nArray through ArrayList always directly mechanism is faster than an indirect mechanism.\r\n\r\nThere is two overloaded add() methods in ArrayList class:  \r\n1.  `add(Object)`: adds an object to the end of the list.  \r\n2.  `add(int index, Object )`: inserts the specified object at the specified position in the list.\r\n\r\n**How the size of ArrayList grows dynamically?** \r\n  \r\n\r\n    public boolean add(E e)        \r\n    {       \r\n         ensureCapacity(size+1);\r\n         elementData[size++] = e;         \r\n         return true;\r\n    }\r\nAn important point to note from the above code is that we are checking the capacity of the ArrayList, before adding the element. ensureCapacity()  determines what is the current size of occupied elements and what is the maximum size of the array. If the size of the filled elements (including the new element to be added to the ArrayList class) is greater than the maximum size of the array then increase the size of the array. But the size of the array can not be increased dynamically. So what happens internally is new Array is created with the capacity\r\n\r\nTill Java 6\r\n\r\n   \r\n\r\n    int newCapacity = (oldCapacity * 3)/2 + 1;\r\n\r\n\r\n(Update) From Java 7\r\n\r\n     int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);\r\n\r\n\r\nalso, data from the old array is copied into the new array.\r\n\r\nHaving overhead methods in ArrayList that&#39;s why Array is faster than `ArrayList`.","title":"Array or List in Java. Which is faster?","body":"<blockquote>\n<p>ArrayList internally uses  array  object to add(or store) the\nelements. In other words, ArrayList is backed by Array data\n-structure.The array of ArrayList is resizable (or dynamic).</p>\n</blockquote>\n<p><strong>Array is faster than ArrayList</strong> because ArrayList internally uses an array. if we can directly add elements in Array and indirectly add an element in\nArray through ArrayList always directly mechanism is faster than an indirect mechanism.</p>\n<p>There is two overloaded add() methods in ArrayList class:</p>\n<ol>\n<li><code>add(Object)</code>: adds an object to the end of the list.</li>\n<li><code>add(int index, Object )</code>: inserts the specified object at the specified position in the list.</li>\n</ol>\n<p><strong>How the size of ArrayList grows dynamically?</strong></p>\n<pre><code>public boolean add(E e)        \n{       \n     ensureCapacity(size+1);\n     elementData[size++] = e;         \n     return true;\n}\n</code></pre>\n<p>An important point to note from the above code is that we are checking the capacity of the ArrayList, before adding the element. ensureCapacity()  determines what is the current size of occupied elements and what is the maximum size of the array. If the size of the filled elements (including the new element to be added to the ArrayList class) is greater than the maximum size of the array then increase the size of the array. But the size of the array can not be increased dynamically. So what happens internally is new Array is created with the capacity</p>\n<p>Till Java 6</p>\n<pre><code>int newCapacity = (oldCapacity * 3)/2 + 1;\n</code></pre>\n<p>(Update) From Java 7</p>\n<pre><code> int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);\n</code></pre>\n<p>also, data from the old array is copied into the new array.</p>\n<p>Having overhead methods in ArrayList that's why Array is faster than <code>ArrayList</code>.</p>\n"},{"tags":[],"owner":{"account_id":1162290,"reputation":3419,"user_id":1141564,"accept_rate":56,"display_name":"Xtra Coder"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1464811214,"creation_date":1464811214,"answer_id":37577736,"question_id":716597,"body_markdown":"None of the answers had information that I was interested in - repetitive scan of the same array many many times. Had to create a JMH test for this.\r\n\r\n**Results** (Java 1.8.0_66 x32, iterating plain array is at least 5 times quicker than ArrayList):\r\n\r\n\tBenchmark                    Mode  Cnt   Score   Error  Units\r\n\tMyBenchmark.testArrayForGet  avgt   10   8.121 ? 0.233  ms/op\r\n\tMyBenchmark.testListForGet   avgt   10  37.416 ? 0.094  ms/op\r\n\tMyBenchmark.testListForEach  avgt   10  75.674 ? 1.897  ms/op\r\n\r\n**Test**\r\n\r\n    package my.jmh.test;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.concurrent.TimeUnit;\r\n    import org.openjdk.jmh.annotations.Benchmark;\r\n    import org.openjdk.jmh.annotations.BenchmarkMode;\r\n    import org.openjdk.jmh.annotations.Fork;\r\n    import org.openjdk.jmh.annotations.Measurement;\r\n    import org.openjdk.jmh.annotations.Mode;\r\n    import org.openjdk.jmh.annotations.OutputTimeUnit;\r\n    import org.openjdk.jmh.annotations.Scope;\r\n    import org.openjdk.jmh.annotations.State;\r\n    import org.openjdk.jmh.annotations.Warmup;\r\n\r\n    @State(Scope.Benchmark)\r\n    @Fork(1)\r\n    @Warmup(iterations = 5, timeUnit = TimeUnit.SECONDS)\r\n    @Measurement(iterations = 10)\r\n    @BenchmarkMode(Mode.AverageTime)\r\n    @OutputTimeUnit(TimeUnit.MILLISECONDS)\r\n    public class MyBenchmark {\r\n\r\n        public final static int ARR_SIZE = 100;\r\n        public final static int ITER_COUNT = 100000;\r\n\r\n        String arr[] = new String[ARR_SIZE];\r\n        List&lt;String&gt; list = new ArrayList&lt;&gt;(ARR_SIZE);\r\n\r\n        public MyBenchmark() {\r\n            for( int i = 0; i &lt; ARR_SIZE; i++ ) {\r\n                list.add(null);\r\n            }\r\n        }\r\n\r\n        @Benchmark\r\n        public void testListForEach() {\r\n            int count = 0;\r\n            for( int i = 0; i &lt; ITER_COUNT; i++ ) {\r\n                for( String str : list ) {\r\n                    if( str != null )\r\n                        count++;\r\n                }\r\n            }\r\n            if( count &gt; 0 )\r\n                System.out.print(count);\r\n        }\r\n\r\n        @Benchmark\r\n        public void testListForGet() {\r\n            int count = 0;\r\n            for( int i = 0; i &lt; ITER_COUNT; i++ ) {\r\n                for( int j = 0; j &lt; ARR_SIZE; j++ ) {\r\n                    if( list.get(j) != null )\r\n                        count++;\r\n                }\r\n            }\r\n            if( count &gt; 0 )\r\n                System.out.print(count);\r\n        }\r\n\r\n        @Benchmark\r\n        public void testArrayForGet() {\r\n            int count = 0;\r\n            for( int i = 0; i &lt; ITER_COUNT; i++ ) {\r\n                for( int j = 0; j &lt; ARR_SIZE; j++ ) {\r\n                    if( arr[j] != null )\r\n                        count++;\r\n                }\r\n            }\r\n            if( count &gt; 0 )\r\n                System.out.print(count);\r\n        }\r\n\r\n    }\r\n","title":"Array or List in Java. Which is faster?","body":"<p>None of the answers had information that I was interested in - repetitive scan of the same array many many times. Had to create a JMH test for this.</p>\n\n<p><strong>Results</strong> (Java 1.8.0_66 x32, iterating plain array is at least 5 times quicker than ArrayList):</p>\n\n<pre><code>Benchmark                    Mode  Cnt   Score   Error  Units\nMyBenchmark.testArrayForGet  avgt   10   8.121 ? 0.233  ms/op\nMyBenchmark.testListForGet   avgt   10  37.416 ? 0.094  ms/op\nMyBenchmark.testListForEach  avgt   10  75.674 ? 1.897  ms/op\n</code></pre>\n\n<p><strong>Test</strong></p>\n\n<pre><code>package my.jmh.test;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.TimeUnit;\nimport org.openjdk.jmh.annotations.Benchmark;\nimport org.openjdk.jmh.annotations.BenchmarkMode;\nimport org.openjdk.jmh.annotations.Fork;\nimport org.openjdk.jmh.annotations.Measurement;\nimport org.openjdk.jmh.annotations.Mode;\nimport org.openjdk.jmh.annotations.OutputTimeUnit;\nimport org.openjdk.jmh.annotations.Scope;\nimport org.openjdk.jmh.annotations.State;\nimport org.openjdk.jmh.annotations.Warmup;\n\n@State(Scope.Benchmark)\n@Fork(1)\n@Warmup(iterations = 5, timeUnit = TimeUnit.SECONDS)\n@Measurement(iterations = 10)\n@BenchmarkMode(Mode.AverageTime)\n@OutputTimeUnit(TimeUnit.MILLISECONDS)\npublic class MyBenchmark {\n\n    public final static int ARR_SIZE = 100;\n    public final static int ITER_COUNT = 100000;\n\n    String arr[] = new String[ARR_SIZE];\n    List&lt;String&gt; list = new ArrayList&lt;&gt;(ARR_SIZE);\n\n    public MyBenchmark() {\n        for( int i = 0; i &lt; ARR_SIZE; i++ ) {\n            list.add(null);\n        }\n    }\n\n    @Benchmark\n    public void testListForEach() {\n        int count = 0;\n        for( int i = 0; i &lt; ITER_COUNT; i++ ) {\n            for( String str : list ) {\n                if( str != null )\n                    count++;\n            }\n        }\n        if( count &gt; 0 )\n            System.out.print(count);\n    }\n\n    @Benchmark\n    public void testListForGet() {\n        int count = 0;\n        for( int i = 0; i &lt; ITER_COUNT; i++ ) {\n            for( int j = 0; j &lt; ARR_SIZE; j++ ) {\n                if( list.get(j) != null )\n                    count++;\n            }\n        }\n        if( count &gt; 0 )\n            System.out.print(count);\n    }\n\n    @Benchmark\n    public void testArrayForGet() {\n        int count = 0;\n        for( int i = 0; i &lt; ITER_COUNT; i++ ) {\n            for( int j = 0; j &lt; ARR_SIZE; j++ ) {\n                if( arr[j] != null )\n                    count++;\n            }\n        }\n        if( count &gt; 0 )\n            System.out.print(count);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1482742,"reputation":3434,"user_id":6680585,"accept_rate":84,"display_name":"Tom Taylor"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1465503473,"creation_date":1465503152,"answer_id":37735321,"question_id":716597,"body_markdown":"Arrays - It would always be better when we have to achieve faster fetching of results\r\n\r\nLists- Performs results on insertion and deletion since they can be done in O(1) and this also provides methods to add, fetch and delete data easily. Much easier to use.\r\n\r\nBut always remember that the fetching of data would be fast when the index position in array where the data is stored - is known. \r\n\r\nThis could be achieved well by sorting the array. Hence this increases the time to fetch the data (ie; storing the data + sorting the data + seek for the position where the data is found). Hence this increases additional latency to fetch the data from the array even they may be good at fetching the data sooner.\r\n\r\nHence this could be solved with trie data structure or ternary data structure. As discussed above the trie data structure would be very efficient in searching for the data the search for a particularly word can be done in O(1) magnitude. When time matters ie; if you have to search and retrieve data quickly you may go with trie data structure. \r\n\r\nIf you want your memory space to be consumed less and you wish to have a better performance then go with ternary data structure. Both these are suitable for storing huge number of strings (eg; like words contained in dictionary).\r\n","title":"Array or List in Java. Which is faster?","body":"<p>Arrays - It would always be better when we have to achieve faster fetching of results</p>\n\n<p>Lists- Performs results on insertion and deletion since they can be done in O(1) and this also provides methods to add, fetch and delete data easily. Much easier to use.</p>\n\n<p>But always remember that the fetching of data would be fast when the index position in array where the data is stored - is known. </p>\n\n<p>This could be achieved well by sorting the array. Hence this increases the time to fetch the data (ie; storing the data + sorting the data + seek for the position where the data is found). Hence this increases additional latency to fetch the data from the array even they may be good at fetching the data sooner.</p>\n\n<p>Hence this could be solved with trie data structure or ternary data structure. As discussed above the trie data structure would be very efficient in searching for the data the search for a particularly word can be done in O(1) magnitude. When time matters ie; if you have to search and retrieve data quickly you may go with trie data structure. </p>\n\n<p>If you want your memory space to be consumed less and you wish to have a better performance then go with ternary data structure. Both these are suitable for storing huge number of strings (eg; like words contained in dictionary).</p>\n"},{"tags":[],"owner":{"account_id":4181024,"reputation":2325,"user_id":3426053,"display_name":"boraseoksoon"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1482347431,"creation_date":1478199097,"answer_id":40409168,"question_id":716597,"body_markdown":"Since there are already a lot of good answers here, I would like to give you some other information of practical view, which is **insertion and iteration performance comparison : primitive array vs Linked-list in Java.**\r\n\r\nThis is actual simple performance check.&lt;br&gt; So, the result will depend on the machine performance.\r\n\r\nSource code used for this is below : \r\n\r\n    import java.util.Iterator;\r\n    import java.util.LinkedList;\r\n \r\n    public class Array_vs_LinkedList {\r\n \r\n\t    private final static int MAX_SIZE = 40000000;\r\n\r\n\t    public static void main(String[] args) {\r\n   \r\n\t\t    LinkedList lList = new LinkedList(); \r\n\r\n\t\t    /* insertion performance check */\r\n\r\n\t\t    long startTime = System.currentTimeMillis();\r\n\r\n    \t\tfor (int i=0; i&lt;MAX_SIZE; i++) {\r\n\t\t\t    lList.add(i);\r\n    \t\t}\r\n\r\n\t      \tlong stopTime = System.currentTimeMillis();\r\n      \t\tlong elapsedTime = stopTime - startTime;\r\n      \t\tSystem.out.println(&quot;[Insert]LinkedList insert operation with &quot; + MAX_SIZE + &quot; number of integer elapsed time is &quot; + elapsedTime + &quot; millisecond.&quot;);\r\n \r\n    \t\tint[] arr = new int[MAX_SIZE];\r\n\r\n\t\t    startTime = System.currentTimeMillis();\r\n    \t\tfor(int i=0; i&lt;MAX_SIZE; i++){\r\n       \t\t\tarr[i] = i; \r\n    \t\t}\r\n\r\n\t      \tstopTime = System.currentTimeMillis();\r\n      \t\telapsedTime = stopTime - startTime;\r\n      \t\tSystem.out.println(&quot;[Insert]Array Insert operation with &quot; + MAX_SIZE + &quot; number of integer elapsed time is &quot; + elapsedTime + &quot; millisecond.&quot;);\r\n\r\n\r\n\t\t    /* iteration performance check */\r\n\t\t\r\n\t\t    startTime = System.currentTimeMillis();\r\n\r\n\t\t    Iterator itr = lList.iterator();\r\n\r\n    \t\twhile(itr.hasNext()) {\r\n\t\t\t    itr.next();\r\n      \t\t\t// System.out.println(&quot;Linked list running : &quot; + itr.next());\r\n    \t\t}\r\n\r\n\t      \tstopTime = System.currentTimeMillis();\r\n      \t\telapsedTime = stopTime - startTime;\r\n      \t\tSystem.out.println(&quot;[Loop]LinkedList iteration with &quot; + MAX_SIZE + &quot; number of integer elapsed time is &quot; + elapsedTime + &quot; millisecond.&quot;);\r\n\r\n\r\n\t\t    startTime = System.currentTimeMillis();\r\n\r\n            int t = 0;\r\n            for (int i=0; i &lt; MAX_SIZE; i++) {\r\n                t = arr[i];\r\n                // System.out.println(&quot;array running : &quot; + i);\r\n            }\r\n\r\n\t      \tstopTime = System.currentTimeMillis();\r\n      \t\telapsedTime = stopTime - startTime;\r\n      \t\tSystem.out.println(&quot;[Loop]Array iteration with &quot; + MAX_SIZE + &quot; number of integer elapsed time is &quot; + elapsedTime + &quot; millisecond.&quot;);\r\n\t    }\r\n    }\r\n\r\n\r\n\r\nPerformance Result is below :\r\n \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/V8ALj.png","title":"Array or List in Java. Which is faster?","body":"<p>Since there are already a lot of good answers here, I would like to give you some other information of practical view, which is <strong>insertion and iteration performance comparison : primitive array vs Linked-list in Java.</strong></p>\n\n<p>This is actual simple performance check.<br> So, the result will depend on the machine performance.</p>\n\n<p>Source code used for this is below : </p>\n\n<pre><code>import java.util.Iterator;\nimport java.util.LinkedList;\n\npublic class Array_vs_LinkedList {\n\n    private final static int MAX_SIZE = 40000000;\n\n    public static void main(String[] args) {\n\n        LinkedList lList = new LinkedList(); \n\n        /* insertion performance check */\n\n        long startTime = System.currentTimeMillis();\n\n        for (int i=0; i&lt;MAX_SIZE; i++) {\n            lList.add(i);\n        }\n\n        long stopTime = System.currentTimeMillis();\n        long elapsedTime = stopTime - startTime;\n        System.out.println(\"[Insert]LinkedList insert operation with \" + MAX_SIZE + \" number of integer elapsed time is \" + elapsedTime + \" millisecond.\");\n\n        int[] arr = new int[MAX_SIZE];\n\n        startTime = System.currentTimeMillis();\n        for(int i=0; i&lt;MAX_SIZE; i++){\n            arr[i] = i; \n        }\n\n        stopTime = System.currentTimeMillis();\n        elapsedTime = stopTime - startTime;\n        System.out.println(\"[Insert]Array Insert operation with \" + MAX_SIZE + \" number of integer elapsed time is \" + elapsedTime + \" millisecond.\");\n\n\n        /* iteration performance check */\n\n        startTime = System.currentTimeMillis();\n\n        Iterator itr = lList.iterator();\n\n        while(itr.hasNext()) {\n            itr.next();\n            // System.out.println(\"Linked list running : \" + itr.next());\n        }\n\n        stopTime = System.currentTimeMillis();\n        elapsedTime = stopTime - startTime;\n        System.out.println(\"[Loop]LinkedList iteration with \" + MAX_SIZE + \" number of integer elapsed time is \" + elapsedTime + \" millisecond.\");\n\n\n        startTime = System.currentTimeMillis();\n\n        int t = 0;\n        for (int i=0; i &lt; MAX_SIZE; i++) {\n            t = arr[i];\n            // System.out.println(\"array running : \" + i);\n        }\n\n        stopTime = System.currentTimeMillis();\n        elapsedTime = stopTime - startTime;\n        System.out.println(\"[Loop]Array iteration with \" + MAX_SIZE + \" number of integer elapsed time is \" + elapsedTime + \" millisecond.\");\n    }\n}\n</code></pre>\n\n<p>Performance Result is below :</p>\n\n<p><a href=\"https://i.stack.imgur.com/V8ALj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V8ALj.png\" alt=\"enter image description here\"></a></p>\n"},{"comments":[{"owner":{"account_id":2024343,"reputation":924,"user_id":1809799,"display_name":"Ren&#233;"},"score":0,"creation_date":1609755086,"post_id":51155879,"comment_id":115911941,"body_markdown":"Please read https://www.oracle.com/technical-resources/articles/java/architect-benchmarking.html before attempting to write benchmarks. (TL;DR: don&#39;t use timed loops, use something like JMH *after* reading it&#39;s documentation carefully.)","body":"Please read <a href=\"https://www.oracle.com/technical-resources/articles/java/architect-benchmarking.html\" rel=\"nofollow noreferrer\">oracle.com/technical-resources/articles/java/&hellip;</a> before attempting to write benchmarks. (TL;DR: don&#39;t use timed loops, use something like JMH <i>after</i> reading it&#39;s documentation carefully.)"}],"tags":[],"owner":{"account_id":104202,"reputation":61,"user_id":278726,"display_name":"Xult"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1530627230,"creation_date":1530624545,"answer_id":51155879,"question_id":716597,"body_markdown":"I came here to get a better feeling for the performance impact of using lists over arrays. I had to adapt code here for my scenario: array/list of ~1000 ints using mostly getters, meaning array[j] vs. list.get(j)\r\n\r\nTaking the best of 7 to be unscientific about it (first few with list where 2.5x slower) I get this:\r\n\r\n    array Integer[] best 643ms iterator\r\n    ArrayList&lt;Integer&gt; best 1014ms iterator\r\n            \r\n    array Integer[] best 635ms getter\r\n    ArrayList&lt;Integer&gt; best 891ms getter (strange though)\r\n- so, very roughly 30% faster with array \r\n\r\nThe second reason for posting now is that no-one mentions the impact if you do math/matrix/simulation/optimization code with _nested_ loops.\r\n\r\nSay you have three nested levels and the inner loop is twice as slow you are looking at 8 times performance hit. Something that would run in a day now takes a week.\r\n\r\n*EDIT\r\nQuite shocked here, for kicks I tried declaring int[1000] rather than Integer[1000]\r\n\r\n    array int[] best 299ms iterator\r\n    array int[] best 296ms getter\r\n\r\nUsing Integer[] vs. int[] represents a double performance hit, ListArray&lt;Integer&gt; with iterator is 3x slower than int[]. Really thought Java&#39;s list implementations were similar to native arrays...\r\n\r\nCode for reference (call multiple times):\r\n\r\n        public static void testArray()\r\n        {\r\n        \tfinal long MAX_ITERATIONS = 1000000;\r\n        \tfinal int MAX_LENGTH = 1000;\r\n        \t    \t\r\n        \tRandom r = new Random();\r\n        \t\r\n            //Integer[] array = new Integer[MAX_LENGTH];\r\n        \tint[] array = new int[MAX_LENGTH];\r\n        \t\r\n        \tList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;()\r\n    \t\t{{\r\n    \t\t\tfor (int i = 0; i &lt; MAX_LENGTH; ++i)\r\n    \t\t\t{\r\n    \t\t\t\tint val = r.nextInt();\r\n    \t\t\t\tadd(val);\r\n    \t\t\t\tarray[i] = val;\r\n    \t\t\t}\r\n    \t\t}};\r\n    \r\n            long start = System.currentTimeMillis();\r\n            int test_sum = 0;\r\n            for (int i = 0; i &lt; MAX_ITERATIONS; ++i)\r\n            {\r\n    //\t\t\tfor (int e : array)\r\n    //\t\t\tfor (int e : list)        \t\r\n            \tfor (int j = 0; j &lt; MAX_LENGTH; ++j)\r\n            \t{\r\n            \t\tint e = array[j];\r\n    //        \t\tint e = list.get(j);\r\n                    test_sum += e;\r\n        \t\t}\r\n            }\r\n            \r\n            long stop = System.currentTimeMillis();\r\n    \r\n            long ms = (stop - start);\r\n            System.out.println(&quot;Time: &quot; + ms);\r\n        }","title":"Array or List in Java. Which is faster?","body":"<p>I came here to get a better feeling for the performance impact of using lists over arrays. I had to adapt code here for my scenario: array/list of ~1000 ints using mostly getters, meaning array[j] vs. list.get(j)</p>\n\n<p>Taking the best of 7 to be unscientific about it (first few with list where 2.5x slower) I get this:</p>\n\n<pre><code>array Integer[] best 643ms iterator\nArrayList&lt;Integer&gt; best 1014ms iterator\n\narray Integer[] best 635ms getter\nArrayList&lt;Integer&gt; best 891ms getter (strange though)\n</code></pre>\n\n<p>- so, very roughly 30% faster with array </p>\n\n<p>The second reason for posting now is that no-one mentions the impact if you do math/matrix/simulation/optimization code with <em>nested</em> loops.</p>\n\n<p>Say you have three nested levels and the inner loop is twice as slow you are looking at 8 times performance hit. Something that would run in a day now takes a week.</p>\n\n<p>*EDIT\nQuite shocked here, for kicks I tried declaring int[1000] rather than Integer[1000]</p>\n\n<pre><code>array int[] best 299ms iterator\narray int[] best 296ms getter\n</code></pre>\n\n<p>Using Integer[] vs. int[] represents a double performance hit, ListArray with iterator is 3x slower than int[]. Really thought Java's list implementations were similar to native arrays...</p>\n\n<p>Code for reference (call multiple times):</p>\n\n<pre><code>    public static void testArray()\n    {\n        final long MAX_ITERATIONS = 1000000;\n        final int MAX_LENGTH = 1000;\n\n        Random r = new Random();\n\n        //Integer[] array = new Integer[MAX_LENGTH];\n        int[] array = new int[MAX_LENGTH];\n\n        List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;()\n        {{\n            for (int i = 0; i &lt; MAX_LENGTH; ++i)\n            {\n                int val = r.nextInt();\n                add(val);\n                array[i] = val;\n            }\n        }};\n\n        long start = System.currentTimeMillis();\n        int test_sum = 0;\n        for (int i = 0; i &lt; MAX_ITERATIONS; ++i)\n        {\n//          for (int e : array)\n//          for (int e : list)          \n            for (int j = 0; j &lt; MAX_LENGTH; ++j)\n            {\n                int e = array[j];\n//              int e = list.get(j);\n                test_sum += e;\n            }\n        }\n\n        long stop = System.currentTimeMillis();\n\n        long ms = (stop - start);\n        System.out.println(\"Time: \" + ms);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10775305,"reputation":668,"user_id":7927573,"display_name":"Oguzhan Cevik"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1604478070,"creation_date":1604478070,"answer_id":64676363,"question_id":716597,"body_markdown":"Which one to use depends on the problem. We need to look at the Big O.\r\n\r\n[![Big O Values of List and Array][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kQ9c5.png\r\n\r\n\r\nimage source: https://github.com/egonSchiele/grokking_algorithms","title":"Array or List in Java. Which is faster?","body":"<p>Which one to use depends on the problem. We need to look at the Big O.</p>\n<p><a href=\"https://i.stack.imgur.com/kQ9c5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kQ9c5.png\" alt=\"Big O Values of List and Array\" /></a></p>\n<p>image source: <a href=\"https://github.com/egonSchiele/grokking_algorithms\" rel=\"nofollow noreferrer\">https://github.com/egonSchiele/grokking_algorithms</a></p>\n"}],"owner":{"account_id":29100,"reputation":14836,"user_id":78351,"accept_rate":71,"display_name":"euphoria83"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":342461,"favorite_count":0,"down_vote_count":2,"up_vote_count":401,"accepted_answer_id":716619,"answer_count":32,"score":399,"last_activity_date":1677514697,"creation_date":1238824648,"question_id":716597,"body_markdown":"I have to keep thousands of strings in memory to be accessed serially in Java. Should I store them in an array or should I use some kind of List ?\r\n\r\nSince arrays keep all the data in a contiguous chunk of memory (unlike Lists), would the use of an array to store thousands of strings cause problems ?","title":"Array or List in Java. Which is faster?","body":"<p>I have to keep thousands of strings in memory to be accessed serially in Java. Should I store them in an array or should I use some kind of List ?</p>\n\n<p>Since arrays keep all the data in a contiguous chunk of memory (unlike Lists), would the use of an array to store thousands of strings cause problems ?</p>\n"},{"tags":["java","exception","rmi"],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1330765642,"post_id":9542464,"comment_id":12095352,"body_markdown":"@SuhailGupta See the preamble to `java.rmi.server.UnicastRemoteObject`. You only need to generate a stub class if you are using Java &lt; 1.5 or you aren&#39;t following those guidelines. As you got that exception, clearly one of those two is true.","body":"@SuhailGupta See the preamble to <code>java.rmi.server.UnicastRemoteObject</code>. You only need to generate a stub class if you are using Java &lt; 1.5 or you aren&#39;t following those guidelines. As you got that exception, clearly one of those two is true."},{"owner":{"account_id":326393,"reputation":22554,"user_id":648138,"accept_rate":68,"display_name":"Suhail Gupta"},"score":0,"creation_date":1330789925,"post_id":9542464,"comment_id":12099003,"body_markdown":"I am using java &gt; 1.5 . And my class extends UnicastRemoteObject . Am i somewhat outdated. [Here is the small code that i have used](http://suhail03.my3gb.com/doubt.html)","body":"I am using java &gt; 1.5 . And my class extends UnicastRemoteObject . Am i somewhat outdated. <a href=\"http://suhail03.my3gb.com/doubt.html\" rel=\"nofollow noreferrer\">Here is the small code that i have used</a>"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1330818153,"post_id":9542464,"comment_id":12104554,"body_markdown":"@SuhailGupta See the documentation I cited. As long as you quote a port number, even zero, when exporting, you don&#39;t need a stub.","body":"@SuhailGupta See the documentation I cited. As long as you quote a port number, even zero, when exporting, you don&#39;t need a stub."},{"owner":{"account_id":476146,"reputation":1754,"user_id":886895,"accept_rate":67,"display_name":"simgineer"},"score":0,"creation_date":1509131368,"post_id":9542464,"comment_id":80911194,"body_markdown":"@EJP I was able to get mine working by using setting the CLASSPATH using `export CLASSPATH=myLib.jar:myLib2.jar`. before launching the rmiregistry. But I am working on a production deployment and I noticed your comment on another post about CLASSPATH being for development and a codebase configuration is more suitable for deployment. Is your understanding that CLASSPATH should be cleared for deployment and all server and clients using rmi will use code base in a deployment configuration?","body":"@EJP I was able to get mine working by using setting the CLASSPATH using <code>export CLASSPATH=myLib.jar:myLib2.jar</code>. before launching the rmiregistry. But I am working on a production deployment and I noticed your comment on another post about CLASSPATH being for development and a codebase configuration is more suitable for deployment. Is your understanding that CLASSPATH should be cleared for deployment and all server and clients using rmi will use code base in a deployment configuration?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1509932324,"post_id":9542464,"comment_id":81207067,"body_markdown":"@simgineer That&#39;s not what I said at all. I said nothing about CLASSPATH being &#39;for development&#39;, and I said that the codebase feature is a deployment option and shouldn&#39;t hold up development. I&#39;m not really a fan of it but it does have its occasional uses. But most RMI systems don&#39;t need those uses, and can just use the CLASSPATH.","body":"@simgineer That&#39;s not what I said at all. I said nothing about CLASSPATH being &#39;for development&#39;, and I said that the codebase feature is a deployment option and shouldn&#39;t hold up development. I&#39;m not really a fan of it but it does have its occasional uses. But most RMI systems don&#39;t need those uses, and can just use the CLASSPATH."}],"tags":[],"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"comment_count":5,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1588124261,"creation_date":1330737058,"answer_id":9542464,"question_id":9531158,"body_markdown":"There are four cases of this exception.\r\n\r\n1. When exporting: you didn&#39;t run &#39;rmic&#39; and you didn&#39;t take the steps described in the preamble to the Javadoc for `UnicastRemoteObject` to make it unnecessary.\r\n\r\n2. When binding: the Registry doesn&#39;t have the stub or the remote interface or something they depend on on its classpath.\r\n\r\n3. when looking up: the client does&#39;t have these things on its classpath.\r\n\r\n4. When calling a remote method: you either sent something to the server of a class not present on its CLASSPATH, or received something from the server (including an exception) of a class not on your CLASSPATH: in both cases possibly a derived class or interface implementation of a class or interface mentioned in the remote interface&#39;s method signature.\r\n\r\nThis is case 2. The Registry can&#39;t find the named class.\r\n\r\nThere are several solutions:\r\n\r\n1. Start the Registry with a CLASSPATH that includes the relevant JARs or directories.\r\n\r\n2. Start the Registry in your server JVM, via `LocateRegistry.createRegistry().`\r\n\r\n3. Use dynamic stubs, as described in the preamble to the Javadoc of `UnicastRemoteObject.` However you may then still run into the same problem with the remote interface itself or a class that it depends on, in which case 1-3 above still apply to that class/those classes.\r\n\r\n4. Ensure that case (4) above doesn&#39;t occur.\r\n\r\n5. Use the codebase feature. This is really a deployment option and IMO something to be avoided at the initial development stage.","title":"java.rmi.ServerException: RemoteException occurred in server thread (ClassNotFoundException)","body":"<p>There are four cases of this exception.</p>\n\n<ol>\n<li><p>When exporting: you didn't run 'rmic' and you didn't take the steps described in the preamble to the Javadoc for <code>UnicastRemoteObject</code> to make it unnecessary.</p></li>\n<li><p>When binding: the Registry doesn't have the stub or the remote interface or something they depend on on its classpath.</p></li>\n<li><p>when looking up: the client does't have these things on its classpath.</p></li>\n<li><p>When calling a remote method: you either sent something to the server of a class not present on its CLASSPATH, or received something from the server (including an exception) of a class not on your CLASSPATH: in both cases possibly a derived class or interface implementation of a class or interface mentioned in the remote interface's method signature.</p></li>\n</ol>\n\n<p>This is case 2. The Registry can't find the named class.</p>\n\n<p>There are several solutions:</p>\n\n<ol>\n<li><p>Start the Registry with a CLASSPATH that includes the relevant JARs or directories.</p></li>\n<li><p>Start the Registry in your server JVM, via <code>LocateRegistry.createRegistry().</code></p></li>\n<li><p>Use dynamic stubs, as described in the preamble to the Javadoc of <code>UnicastRemoteObject.</code> However you may then still run into the same problem with the remote interface itself or a class that it depends on, in which case 1-3 above still apply to that class/those classes.</p></li>\n<li><p>Ensure that case (4) above doesn't occur.</p></li>\n<li><p>Use the codebase feature. This is really a deployment option and IMO something to be avoided at the initial development stage.</p></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":64777,"reputation":2537,"user_id":191064,"accept_rate":89,"display_name":"ultrajohn"},"score":0,"creation_date":1375365508,"post_id":12392894,"comment_id":26313059,"body_markdown":"wow, this actually worked for me... though i don&#39;t know why? can anyone explain what&#39;s happening here?","body":"wow, this actually worked for me... though i don&#39;t know why? can anyone explain what&#39;s happening here?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1409033170,"post_id":12392894,"comment_id":39801397,"body_markdown":"@ultrajohn See my answer. This one works because it puts the required class on the Registry&#39;s CLASSPATH, but only if that class isn&#39;t in a package. If it was, it wouldn&#39;t work. -1 for lack of explanation and special case solution.","body":"@ultrajohn See my answer. This one works because it puts the required class on the Registry&#39;s CLASSPATH, but only if that class isn&#39;t in a package. If it was, it wouldn&#39;t work. -1 for lack of explanation and special case solution."}],"tags":[],"owner":{"account_id":1836147,"reputation":59,"user_id":1666493,"display_name":"MUNIRAJ"},"comment_count":2,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1348515794,"creation_date":1347468546,"answer_id":12392894,"question_id":9531158,"body_markdown":"\r\n    Remote Server Error:RemoteException occurred in server thread; nested exception is:\r\n    java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is:\r\n    java.lang.ClassNotFoundException: mathInterface\r\n\r\nThe error very simple to solve to be perform following steps:\r\n\r\n- For example your java file consider D drive\r\n- Start rmiregistry D drive( example D:\\start rmiregistry)then don&#39;t start rmiregistry on the other drives, it will yield the above error\r\n\r\n(Wherever your file is, start `rmiregistry`)\r\n\r\n\r\n","title":"java.rmi.ServerException: RemoteException occurred in server thread (ClassNotFoundException)","body":"<pre><code>Remote Server Error:RemoteException occurred in server thread; nested exception is:\njava.rmi.UnmarshalException: error unmarshalling arguments; nested exception is:\njava.lang.ClassNotFoundException: mathInterface\n</code></pre>\n\n<p>The error very simple to solve to be perform following steps:</p>\n\n<ul>\n<li>For example your java file consider D drive</li>\n<li>Start rmiregistry D drive( example D:\\start rmiregistry)then don't start rmiregistry on the other drives, it will yield the above error</li>\n</ul>\n\n<p>(Wherever your file is, start <code>rmiregistry</code>)</p>\n"},{"tags":[],"owner":{"account_id":1037758,"reputation":96,"user_id":1044515,"display_name":"kkjava"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1427760555,"creation_date":1401709616,"answer_id":23993791,"question_id":9531158,"body_markdown":"You can launch rmiregistry from anywhere but you have to make sure that the compiled classes are already in your classpath. For example:-\r\n\r\n    E:\\ARMSRemoteUpdater\\WebContent\\WEB-INF\\classes&gt;set classpath=%classpath%;E:\\ARMSRemoteUpdater\\WebContent\\WEB-INF\\classes &lt;ENTER&gt;\r\n\r\n    E:\\ARMSRemoteUpdater\\WebContent\\WEB-INF\\classes&gt;c: &lt;ENTER&gt;\r\n\r\n    C:\\&gt;rmiregistry\r\n\r\nAnd the above should work fine.\r\n\r\nIn general, if you launch rmiregistry from the root location of the compiled classes (above example it is E:\\ARMSRemoteUpdater\\WebContent\\WEB-INF\\classes), that will work because . (dot - current directory) is already set in your classpath.\r\n\r\nBut as soon as you remove . (dot - current directory) from your classpath, the above working condition will also fail.\r\n\r\nHope I have explained in details.\r\n\r\n\r\n","title":"java.rmi.ServerException: RemoteException occurred in server thread (ClassNotFoundException)","body":"<p>You can launch rmiregistry from anywhere but you have to make sure that the compiled classes are already in your classpath. For example:-</p>\n\n<pre><code>E:\\ARMSRemoteUpdater\\WebContent\\WEB-INF\\classes&gt;set classpath=%classpath%;E:\\ARMSRemoteUpdater\\WebContent\\WEB-INF\\classes &lt;ENTER&gt;\n\nE:\\ARMSRemoteUpdater\\WebContent\\WEB-INF\\classes&gt;c: &lt;ENTER&gt;\n\nC:\\&gt;rmiregistry\n</code></pre>\n\n<p>And the above should work fine.</p>\n\n<p>In general, if you launch rmiregistry from the root location of the compiled classes (above example it is E:\\ARMSRemoteUpdater\\WebContent\\WEB-INF\\classes), that will work because . (dot - current directory) is already set in your classpath.</p>\n\n<p>But as soon as you remove . (dot - current directory) from your classpath, the above working condition will also fail.</p>\n\n<p>Hope I have explained in details.</p>\n"},{"tags":[],"owner":{"account_id":12594071,"reputation":148,"user_id":9159474,"display_name":"star8163264"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1550174114,"creation_date":1550174114,"answer_id":54698129,"question_id":9531158,"body_markdown":"I got this same issue, and a different solution worked for me. I was running two different IntelliJ projects, with a copy of the interface in each project. One of them was in a package, and the other one wasn&#39;t, and that was what was causing this error. \r\n\r\nSolutions:\r\n\r\n - Make sure the interface copies aren&#39;t in a package. \r\n - Make sure the interface copies have the exact same package name.","title":"java.rmi.ServerException: RemoteException occurred in server thread (ClassNotFoundException)","body":"<p>I got this same issue, and a different solution worked for me. I was running two different IntelliJ projects, with a copy of the interface in each project. One of them was in a package, and the other one wasn't, and that was what was causing this error. </p>\n\n<p>Solutions:</p>\n\n<ul>\n<li>Make sure the interface copies aren't in a package. </li>\n<li>Make sure the interface copies have the exact same package name.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1622605616,"post_id":62806214,"comment_id":119836773,"body_markdown":"You don&#39;t put .java files into the CLASSPATH. You put directories containing package-structures of .class files, or JAR files. Evidently all you really needed was `C:\\compiler`.","body":"You don&#39;t put .java files into the CLASSPATH. You put directories containing package-structures of .class files, or JAR files. Evidently all you really needed was <code>C:\\compiler</code>."}],"tags":[],"owner":{"account_id":18474093,"reputation":19,"user_id":13458130,"display_name":"VMFH"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1594319763,"creation_date":1594259923,"answer_id":62806214,"question_id":9531158,"body_markdown":"I will try to explain it as better as possible what I did:\r\n1st. I declared the classpath variable like follow:\r\n1. `set classpath=%classpath%`\r\n2. `set classpath=C:\\compiler`\r\n3. `set classpath=C:\\compiler\\libro\\cap07\\rmi\\hello\\Hello.java`\r\n4. `set classpath=C:\\compiler\\libro\\cap07\\rmi\\hello\\Server.java`\r\n5. `set classpath=C:\\compiler\\libro\\cap07\\rmi\\hello\\Client.java`\r\n\r\n- (All in one lineset:\r\n\r\n`set classpath=%classpath%;C:\\compiler;C:\\compiler\\libro\\cap07\\rmi\\hello\\Hello.java;C:\\compiler\\libro\\cap07\\rmi\\hello\\Server.java;C:\\compiler\\libro\\cap07\\rmi\\hello\\Client.java)`\r\n\r\n- (I&#39;m not sure if the .java files were nesesary, but I also wrote them for doubts).\r\n\r\n2nd. I compilered with the line `javac -d C:\\compiler Hello.java Server.java Client.java`. Where `C:\\compiler` is the root directory like src on Eclipse IDE.\r\n\r\n3rd. I ran the `start rmiregistry` line. (and don&#180;t matter where you run it, it&#39;s the same).\r\n\r\n4th. I ran:\r\n\r\n`start java -classpath C:\\compiler -Djava.rmi.server.codebase=file:C:\\compiler/ libro.cap07.rmi.hello.Server`\r\n\r\nYou already know `C:\\compiler`, but you need define packages address on the last to that the command can find the .class files. Open any .java file and copy the package address without packages sentense. You will see when you open the src directory (in my case C:\\compiler), you find all directory sequence created. When this command line is created correctly, no matter where you will run it, C:\\, D:\\, src, anywhere it wil run.\r\n\r\n5th. And finally, I ran the Client class with:\r\n\r\n`java -classpath C:\\compiler libro.cap07.rmi.hello.Client`\r\n\r\nIn conclusion, if the classpath variable won&#39;t created or it&#39;s to created wrong or the sentence of 4th point is not addressed well the JVM throws the same or similar error. Search there!\r\n\r\n(Sorry my english).\r\n","title":"java.rmi.ServerException: RemoteException occurred in server thread (ClassNotFoundException)","body":"<p>I will try to explain it as better as possible what I did:\n1st. I declared the classpath variable like follow:</p>\n<ol>\n<li><code>set classpath=%classpath%</code></li>\n<li><code>set classpath=C:\\compiler</code></li>\n<li><code>set classpath=C:\\compiler\\libro\\cap07\\rmi\\hello\\Hello.java</code></li>\n<li><code>set classpath=C:\\compiler\\libro\\cap07\\rmi\\hello\\Server.java</code></li>\n<li><code>set classpath=C:\\compiler\\libro\\cap07\\rmi\\hello\\Client.java</code></li>\n</ol>\n<ul>\n<li>(All in one lineset:</li>\n</ul>\n<p><code>set classpath=%classpath%;C:\\compiler;C:\\compiler\\libro\\cap07\\rmi\\hello\\Hello.java;C:\\compiler\\libro\\cap07\\rmi\\hello\\Server.java;C:\\compiler\\libro\\cap07\\rmi\\hello\\Client.java)</code></p>\n<ul>\n<li>(I'm not sure if the .java files were nesesary, but I also wrote them for doubts).</li>\n</ul>\n<p>2nd. I compilered with the line <code>javac -d C:\\compiler Hello.java Server.java Client.java</code>. Where <code>C:\\compiler</code> is the root directory like src on Eclipse IDE.</p>\n<p>3rd. I ran the <code>start rmiregistry</code> line. (and don´t matter where you run it, it's the same).</p>\n<p>4th. I ran:</p>\n<p><code>start java -classpath C:\\compiler -Djava.rmi.server.codebase=file:C:\\compiler/ libro.cap07.rmi.hello.Server</code></p>\n<p>You already know <code>C:\\compiler</code>, but you need define packages address on the last to that the command can find the .class files. Open any .java file and copy the package address without packages sentense. You will see when you open the src directory (in my case C:\\compiler), you find all directory sequence created. When this command line is created correctly, no matter where you will run it, C:, D:, src, anywhere it wil run.</p>\n<p>5th. And finally, I ran the Client class with:</p>\n<p><code>java -classpath C:\\compiler libro.cap07.rmi.hello.Client</code></p>\n<p>In conclusion, if the classpath variable won't created or it's to created wrong or the sentence of 4th point is not addressed well the JVM throws the same or similar error. Search there!</p>\n<p>(Sorry my english).</p>\n"}],"owner":{"account_id":326393,"reputation":22554,"user_id":648138,"accept_rate":68,"display_name":"Suhail Gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66422,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":9542464,"answer_count":5,"score":13,"last_activity_date":1677514689,"creation_date":1330681962,"question_id":9531158,"body_markdown":"The following method:\r\n```java\r\n    private void startServer() { // snippet that starts the server on the local machine\r\n        try {\r\n             RemoteMethodImpl impl = new RemoteMethodImpl();\r\n             Naming.rebind( &quot;Illusive-Server&quot; , impl );\r\n        } catch(Exception exc) {\r\n            JOptionPane.showMessageDialog(this, &quot;Problem starting the server&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);\r\n            System.out.println(exc);\r\n        }\r\n    }\r\n```\r\n\r\nthrows this exception:\r\n```java\r\njava.rmi.ServerException: RemoteException occurred in server thread; nested exception is:\r\n        java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is:\r\n        java.lang.ClassNotFoundException: Interfaces.RemoteMethodIntf\r\n```\r\n\r\nWhen i start my project, i am greeted with the message in JOptionPane saying _problem starting the server and then the above exception._ What could be the reason for this?\r\n\r\nI don&#39;t understand why does the last statement of exception says _class not found exc when i have imported the right packages_.","title":"java.rmi.ServerException: RemoteException occurred in server thread (ClassNotFoundException)","body":"<p>The following method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private void startServer() { // snippet that starts the server on the local machine\n        try {\n             RemoteMethodImpl impl = new RemoteMethodImpl();\n             Naming.rebind( &quot;Illusive-Server&quot; , impl );\n        } catch(Exception exc) {\n            JOptionPane.showMessageDialog(this, &quot;Problem starting the server&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);\n            System.out.println(exc);\n        }\n    }\n</code></pre>\n<p>throws this exception:</p>\n<pre class=\"lang-java prettyprint-override\"><code>java.rmi.ServerException: RemoteException occurred in server thread; nested exception is:\n        java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is:\n        java.lang.ClassNotFoundException: Interfaces.RemoteMethodIntf\n</code></pre>\n<p>When i start my project, i am greeted with the message in JOptionPane saying <em>problem starting the server and then the above exception.</em> What could be the reason for this?</p>\n<p>I don't understand why does the last statement of exception says <em>class not found exc when i have imported the right packages</em>.</p>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1677510383,"post_id":75581697,"comment_id":133346756,"body_markdown":"You are initializing the distances to 1e9 and it fails on a testcase where edge weights are one billion. I wonder if there is a connection. Maybe you should try a larger &quot;infinite&quot; value.","body":"You are initializing the distances to 1e9 and it fails on a testcase where edge weights are one billion. I wonder if there is a connection. Maybe you should try a larger &quot;infinite&quot; value."}],"owner":{"account_id":20847939,"reputation":11,"user_id":17995458,"display_name":"Luvraj Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677514669,"creation_date":1677507896,"question_id":75581697,"body_markdown":"**Question Link**\r\nhttps://practice.geeksforgeeks.org/problems/number-of-ways-to-arrive-at-destination/1\r\n\r\n\r\n```\r\nclass Pair {\r\n    int first;\r\n    int second;\r\n    public Pair(int first, int second) {\r\n        this.first = first;\r\n        this.second = second;\r\n    }\r\n}\r\nclass Solution {\r\n\r\n    static int countPaths(int n, List &lt; List &lt; Integer &gt;&gt; roads) {\r\n        \r\n        // Creating an adjacency list for the given graph.\r\n        ArrayList &lt; ArrayList &lt; Pair &gt;&gt; adj = new ArrayList &lt; &gt; ();\r\n        for (int i = 0; i &lt; n; i++) {\r\n            adj.add(new ArrayList &lt; &gt; ());\r\n        }\r\n        int m = roads.size();\r\n        for (int i = 0; i &lt; m; i++) {\r\n            adj.get(roads.get(i).get(0)).add(new Pair(roads.get(i).get(1), roads.get(i).get(2)));\r\n            adj.get(roads.get(i).get(1)).add(new Pair(roads.get(i).get(0), roads.get(i).get(2)));\r\n        }\r\n\r\n        // Defining a priority queue (min heap). \r\n        PriorityQueue &lt; Pair &gt; pq = new PriorityQueue &lt; Pair &gt; ((x, y) -&gt; x.first - y.first);\r\n\r\n        // Initializing the dist array and the ways array\r\n        // along with their first indices.\r\n        int[] dist = new int[n];\r\n        int[] ways = new int[n];\r\n        for (int i = 0; i &lt; n; i++) {\r\n            dist[i] = (int) 1e9;\r\n            ways[i] = 0;\r\n        }\r\n        dist[0] = 0;\r\n        ways[0] = 1;\r\n        pq.add(new Pair(0, 0));\r\n\r\n        // Define modulo value\r\n        int mod = (int)(1e9 + 7);\r\n\r\n        // Iterate through the graph with the help of priority queue\r\n        // just as we do in Dijkstra&#39;s Algorithm.\r\n        while (pq.size() != 0) {\r\n            int dis = pq.peek().first;\r\n            int node = pq.peek().second;\r\n            pq.remove();\r\n\r\n            for (Pair it : adj.get(node)) {\r\n                int adjNode = it.first;\r\n                int edW = it.second;\r\n\r\n                // This ‘if’ condition signifies that this is the first\r\n                // time we’re coming with this short distance, so we push\r\n                // in PQ and keep the no. of ways the same.\r\n                if (dis + edW &lt; dist[adjNode]) {\r\n                    dist[adjNode] = dis + edW;\r\n                    pq.add(new Pair(dis + edW, adjNode));\r\n                    ways[adjNode] = ways[node];\r\n                } \r\n\r\n                    // If we again encounter a node with the same short distance\r\n                    // as before, we simply increment the no. of ways.\r\n                    else if (dis + edW == dist[adjNode]) {\r\n                    ways[adjNode] = (ways[adjNode] + ways[node]) % mod;\r\n                }\r\n            }\r\n        }\r\n        // Finally, we return the no. of ways to reach\r\n        // (n-1)th node modulo 10^9+7.\r\n        return ways[n - 1] % mod;\r\n    }\r\n}\r\n\r\n\r\n\r\n```\r\nThis is my code it is using modified DIJKASTRA algo and it is passing 12 testcases out of 16 \r\nbut Not working for this testcase.\r\nFor Input: \r\n6 8\r\n0 1 1000000000\r\n0 3 1000000000\r\n1 3 1000000000\r\n1 2 1000000000\r\n1 5 1000000000\r\n3 4 1000000000\r\n4 5 1000000000\r\n2 5 1000000000\r\nYour Output: \r\n0\r\nExpected Output: \r\n1\r\n\r\n\r\nIf we observe the edge weight is 1e9 of all edges and i don&#39;t know what changes to make.\r\n\r\n\r\n\r\nI tried changing some condtions that are already there but it was stucking at previous testcases so i didn&#39;t updated anything.\r\n\r\nexpecting to pass this edge case.","title":"java Coding , Dijkastra Algorithms","body":"<p><strong>Question Link</strong>\n<a href=\"https://practice.geeksforgeeks.org/problems/number-of-ways-to-arrive-at-destination/1\" rel=\"nofollow noreferrer\">https://practice.geeksforgeeks.org/problems/number-of-ways-to-arrive-at-destination/1</a></p>\n<pre><code>class Pair {\n    int first;\n    int second;\n    public Pair(int first, int second) {\n        this.first = first;\n        this.second = second;\n    }\n}\nclass Solution {\n\n    static int countPaths(int n, List &lt; List &lt; Integer &gt;&gt; roads) {\n        \n        // Creating an adjacency list for the given graph.\n        ArrayList &lt; ArrayList &lt; Pair &gt;&gt; adj = new ArrayList &lt; &gt; ();\n        for (int i = 0; i &lt; n; i++) {\n            adj.add(new ArrayList &lt; &gt; ());\n        }\n        int m = roads.size();\n        for (int i = 0; i &lt; m; i++) {\n            adj.get(roads.get(i).get(0)).add(new Pair(roads.get(i).get(1), roads.get(i).get(2)));\n            adj.get(roads.get(i).get(1)).add(new Pair(roads.get(i).get(0), roads.get(i).get(2)));\n        }\n\n        // Defining a priority queue (min heap). \n        PriorityQueue &lt; Pair &gt; pq = new PriorityQueue &lt; Pair &gt; ((x, y) -&gt; x.first - y.first);\n\n        // Initializing the dist array and the ways array\n        // along with their first indices.\n        int[] dist = new int[n];\n        int[] ways = new int[n];\n        for (int i = 0; i &lt; n; i++) {\n            dist[i] = (int) 1e9;\n            ways[i] = 0;\n        }\n        dist[0] = 0;\n        ways[0] = 1;\n        pq.add(new Pair(0, 0));\n\n        // Define modulo value\n        int mod = (int)(1e9 + 7);\n\n        // Iterate through the graph with the help of priority queue\n        // just as we do in Dijkstra's Algorithm.\n        while (pq.size() != 0) {\n            int dis = pq.peek().first;\n            int node = pq.peek().second;\n            pq.remove();\n\n            for (Pair it : adj.get(node)) {\n                int adjNode = it.first;\n                int edW = it.second;\n\n                // This ‘if’ condition signifies that this is the first\n                // time we’re coming with this short distance, so we push\n                // in PQ and keep the no. of ways the same.\n                if (dis + edW &lt; dist[adjNode]) {\n                    dist[adjNode] = dis + edW;\n                    pq.add(new Pair(dis + edW, adjNode));\n                    ways[adjNode] = ways[node];\n                } \n\n                    // If we again encounter a node with the same short distance\n                    // as before, we simply increment the no. of ways.\n                    else if (dis + edW == dist[adjNode]) {\n                    ways[adjNode] = (ways[adjNode] + ways[node]) % mod;\n                }\n            }\n        }\n        // Finally, we return the no. of ways to reach\n        // (n-1)th node modulo 10^9+7.\n        return ways[n - 1] % mod;\n    }\n}\n\n\n\n</code></pre>\n<p>This is my code it is using modified DIJKASTRA algo and it is passing 12 testcases out of 16\nbut Not working for this testcase.\nFor Input:\n6 8\n0 1 1000000000\n0 3 1000000000\n1 3 1000000000\n1 2 1000000000\n1 5 1000000000\n3 4 1000000000\n4 5 1000000000\n2 5 1000000000\nYour Output:\n0\nExpected Output:\n1</p>\n<p>If we observe the edge weight is 1e9 of all edges and i don't know what changes to make.</p>\n<p>I tried changing some condtions that are already there but it was stucking at previous testcases so i didn't updated anything.</p>\n<p>expecting to pass this edge case.</p>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-elastic-beanstalk"],"answers":[{"comments":[{"owner":{"account_id":27892285,"reputation":13,"user_id":21298387,"display_name":"Bruna"},"score":1,"creation_date":1677516759,"post_id":75582788,"comment_id":133349036,"body_markdown":"Yes, created an EC2 instance with load balancer. I did as you said, opened the target group, and added /api/test to the URL of the health check tab, however, nothing is being returned, the 505 bad gateway message appears and the environment still has the severe status. Do you have any suggestions?","body":"Yes, created an EC2 instance with load balancer. I did as you said, opened the target group, and added /api/test to the URL of the health check tab, however, nothing is being returned, the 505 bad gateway message appears and the environment still has the severe status. Do you have any suggestions?"},{"owner":{"account_id":20168591,"reputation":58,"user_id":14791907,"display_name":"Grigor"},"score":0,"creation_date":1677522439,"post_id":75582788,"comment_id":133350659,"body_markdown":"On the Configuration page in your environment, under Software Configuration, click the settings icon.\n\nPut SERVER_PORT 5000 save it.","body":"On the Configuration page in your environment, under Software Configuration, click the settings icon.  Put SERVER_PORT 5000 save it."},{"owner":{"account_id":20168591,"reputation":58,"user_id":14791907,"display_name":"Grigor"},"score":0,"creation_date":1677522721,"post_id":75582788,"comment_id":133350741,"body_markdown":"Read also this https://aws.amazon.com/blogs/devops/deploying-a-spring-boot-application-on-aws-using-aws-elastic-beanstalk/","body":"Read also this <a href=\"https://aws.amazon.com/blogs/devops/deploying-a-spring-boot-application-on-aws-using-aws-elastic-beanstalk/\" rel=\"nofollow noreferrer\">aws.amazon.com/blogs/devops/&hellip;</a>"}],"tags":[],"owner":{"account_id":20168591,"reputation":58,"user_id":14791907,"display_name":"Grigor"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1677513722,"creation_date":1677513722,"answer_id":75582788,"question_id":75582725,"body_markdown":"It must&#39;ve created ec2 with the load balancer go to your load balancer open the target group edit it and it has a health check path put in there a valid URI if you don&#39;t have it you can add for example /API/isHealthy get mapping which returns string saying &quot;ap is up and running &quot; for example,in your project&#39;s controller then  recreate jar upload it in elastic beanstalk and update target groups health check URL to /API/isHealthy .Try this if it works fine but FYI you can handle the path with spring actuator .","title":"I can&#39;t deploy my Spring Boot application on AWS Elastic Beanstalk","body":"<p>It must've created ec2 with the load balancer go to your load balancer open the target group edit it and it has a health check path put in there a valid URI if you don't have it you can add for example /API/isHealthy get mapping which returns string saying &quot;ap is up and running &quot; for example,in your project's controller then  recreate jar upload it in elastic beanstalk and update target groups health check URL to /API/isHealthy .Try this if it works fine but FYI you can handle the path with spring actuator .</p>\n"}],"owner":{"account_id":27892285,"reputation":13,"user_id":21298387,"display_name":"Bruna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":383,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75582788,"answer_count":1,"score":1,"last_activity_date":1677514634,"creation_date":1677513448,"question_id":75582725,"body_markdown":"I have an application developed in Spring Boot. I would like to deploy it on the AWS Elastic Beanstalk service. I&#39;ve already followed some tutorials, I did as requested, but I can&#39;t get my application to work, and I believe it&#39;s because of the health status marked as &quot;severe&quot;. I have no idea why the status is severe... as it&#39;s my first time using the service, I&#39;m having doubts, I&#39;ve tried looking for a solution on the internet and I haven&#39;t found anything that could help.\r\n\r\n\r\n\r\n\r\nI followed the instructions in [this tutorial][1].\r\n\r\n\r\nIn the example image of the tutorial, it is possible to see the health status as OK, however, after following the steps, the health status that is presented to me is severe or warning\r\n\r\nMy screen:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nBy the way, checking the option in question, when creating a new environment, I get an environment with the status OK and working, which makes me think that the error is in my jar file? That&#39;s what it looks like... but why this error? what is the reason?\r\n\r\nExample image that results in ok status\r\n\r\n[![enter image description here][3]][3]\r\n\r\nAh, when I enter the URL, the error 502 bad gateway appears.\r\n\r\nTo get the jar, I ran the mvn package command. Could this command be the cause of the problem? Or does it have something to do with API? The only endpoint I have is /api/user.\r\n\r\nI have never used this service, I have no idea how to solve this problem.\r\n\r\n  [1]: https://medium.com/javarevisited/deploy-spring-boot-app-to-aws-elastic-beanstalk-fa42b8b4bfa0\r\n  [2]: https://i.stack.imgur.com/UHKMv.png\r\n  [3]: https://i.stack.imgur.com/ILIDJ.png","title":"I can&#39;t deploy my Spring Boot application on AWS Elastic Beanstalk","body":"<p>I have an application developed in Spring Boot. I would like to deploy it on the AWS Elastic Beanstalk service. I've already followed some tutorials, I did as requested, but I can't get my application to work, and I believe it's because of the health status marked as &quot;severe&quot;. I have no idea why the status is severe... as it's my first time using the service, I'm having doubts, I've tried looking for a solution on the internet and I haven't found anything that could help.</p>\n<p>I followed the instructions in <a href=\"https://medium.com/javarevisited/deploy-spring-boot-app-to-aws-elastic-beanstalk-fa42b8b4bfa0\" rel=\"nofollow noreferrer\">this tutorial</a>.</p>\n<p>In the example image of the tutorial, it is possible to see the health status as OK, however, after following the steps, the health status that is presented to me is severe or warning</p>\n<p>My screen:</p>\n<p><a href=\"https://i.stack.imgur.com/UHKMv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UHKMv.png\" alt=\"enter image description here\" /></a></p>\n<p>By the way, checking the option in question, when creating a new environment, I get an environment with the status OK and working, which makes me think that the error is in my jar file? That's what it looks like... but why this error? what is the reason?</p>\n<p>Example image that results in ok status</p>\n<p><a href=\"https://i.stack.imgur.com/ILIDJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ILIDJ.png\" alt=\"enter image description here\" /></a></p>\n<p>Ah, when I enter the URL, the error 502 bad gateway appears.</p>\n<p>To get the jar, I ran the mvn package command. Could this command be the cause of the problem? Or does it have something to do with API? The only endpoint I have is /api/user.</p>\n<p>I have never used this service, I have no idea how to solve this problem.</p>\n"},{"tags":["java","spring","spring-boot","thymeleaf"],"comments":[{"owner":{"account_id":13068865,"reputation":357,"user_id":9443176,"display_name":"Max Aminov"},"score":0,"creation_date":1677421374,"post_id":75572134,"comment_id":133330474,"body_markdown":"Please provide an additional info: which request you tried? what is the name of html you provided, index or result?","body":"Please provide an additional info: which request you tried? what is the name of html you provided, index or result?"},{"owner":{"account_id":24961106,"reputation":11,"user_id":18825062,"display_name":"Gokul Seetharaman"},"score":0,"creation_date":1677433997,"post_id":75572134,"comment_id":133332641,"body_markdown":"i have 2 html file main page is index and then after submitting it goes to result page","body":"i have 2 html file main page is index and then after submitting it goes to result page"}],"owner":{"account_id":24961106,"reputation":11,"user_id":18825062,"display_name":"Gokul Seetharaman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677514517,"creation_date":1677416114,"question_id":75572134,"body_markdown":"While running it shows\r\n&gt; There was an unexpected error (type=Internal Server Error, status=500).\r\n\r\n**My Controller page**\r\n\r\n```\r\npackage com.dbcon.controller;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\n\r\nimport com.dbcon.entity.DbEntity;\r\nimport com.dbcon.repository.DbRepo;\r\n\r\npublic class DbController {\r\n\r\n    @Autowired\r\n    private DbRepo Dbrepo;\r\n    \r\n    @GetMapping(&quot;/&quot;)\r\n    public String SignUpForm(Model model) {\r\n    \tmodel.addAttribute(&quot;user&quot;, new DbEntity());\r\n    \treturn &quot;index&quot;;\r\n    }\r\n    \r\n    @PostMapping(&quot;/process_register&quot;)\r\n    public String Registration(DbEntity user) {\r\n    \tDbrepo.save(user);\r\n    \treturn &quot;result&quot;;\r\n    }\r\n\r\n}\r\n```\r\n\r\nmy entity page\r\n\r\n```\r\n\r\npackage com.dbcon.entity;\r\n\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.Table;\r\n\r\n@Entity\r\n@Table(name = &quot;TestCon&quot;)\r\npublic class DbEntity {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY) // automated by DB\r\n    private long id;\r\n    \r\n    @Column(nullable = false, unique = true, length = 100) // primary key\r\n    private String email;\r\n    \r\n    @Column(nullable = false, length = 50)\r\n    private String firstname;\r\n    \r\n    @Column(nullable = false, length = 50)\r\n    private String lastname;\r\n    \r\n    @Column(nullable = false, length = 50)\r\n    private String phonenumber;\r\n    \r\n    \r\n    public String getEmail() {\r\n    \treturn email;\r\n    }\r\n    \r\n    public void setEmail(String email) {\r\n    \tthis.email = email;\r\n    }\r\n    \r\n    public String getFirstname() {\r\n    \treturn firstname;\r\n    }\r\n    \r\n    public void setFirstname(String firstname) {\r\n    \tthis.firstname = firstname;\r\n    }\r\n    \r\n    public String getLastname() {\r\n    \treturn lastname;\r\n    }\r\n    \r\n    public void setLastname(String lastname) {\r\n    \tthis.lastname = lastname;\r\n    }\r\n    \r\n    public String getPhonenumber() {\r\n    \treturn phonenumber;\r\n    }\r\n    \r\n    public void setPhonenumber(String phonenumber) {\r\n    \tthis.phonenumber = phonenumber;\r\n    }\r\n    \r\n    }\r\n```\r\n\r\ni am getting error in this line\r\n\r\n```\r\n&lt;input class=&quot;mx-auto my-auto&quot; type=&quot;text&quot; id=&quot;FName&quot; placeholder=&quot;First Name&quot;  style=&quot;width:80%; height:40px;&quot; th:field=&quot;*{firstname}&quot; required&gt;\r\n```\r\n\r\nmy HTML page is\r\n\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://thymeleaf.org&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;\r\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\r\n    &lt;title&gt;Database Connectivity&lt;/title&gt;\r\n      &lt;link href=&quot;https://fonts.googleapis.com/css2?family=Poppins&amp;family=Rubik:wght@300&amp;display=swap&quot; rel=&quot;stylesheet&quot;&gt;\r\n    &lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot; integrity=&quot;sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC&quot; crossorigin=&quot;anonymous&quot;&gt;\r\n&lt;/head&gt;\r\n&lt;body style=&quot;background-color:#131313;&quot;&gt;\r\n    &lt;div class=&quot;container&quot; style=&quot;width: 60%; height: auto; margin-top: 100px; justify-content: center; align-items: center;&quot; &gt;\r\n      &lt;div class=&quot;card text-center&quot; &gt;\r\n        &lt;div class=&quot;card-title&quot;style=&quot;margin-top:40px;&quot; &gt;\r\n          &lt;h3&gt;Database Conectivity&lt;/h3&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;card-body&quot; &gt;\r\n          &lt;form method=&quot;post&quot; th:object=&quot;${user}&quot; th:action=&quot;@{/result}&quot; &gt;\r\n                &lt;input class=&quot;mx-auto my-auto&quot; type=&quot;text&quot; id=&quot;FName&quot; placeholder=&quot;First Name&quot;  style=&quot;width:80%; height:40px;&quot; th:field=&quot;*{firstname}&quot; required&gt;\r\n                &lt;input class=&quot;mx-auto my-40&quot;type=&quot;text&quot; id=&quot;LName&quot; placeholder=&quot;Last Name&quot; th:field=&quot;*{lastname}&quot; required style=&quot;width:80%; height:40px;  margin-top:15px;&quot;&gt;\r\n                &lt;input class=&quot;mx-auto my-40&quot;type=&quot;number&quot; id=&quot;PhNumber&quot; placeholder=&quot;Phone Number&quot; th:field=&quot;*{phonenumber}&quot; required style=&quot;width:80%; height:40px;  margin-top:15px;&quot;&gt;\r\n                &lt;input class=&quot;mx-auto my-40&quot;type=&quot;email&quot; id=&quot;EMail&quot; placeholder=&quot;Email&quot;  th:field=&quot;*{email}&quot; required style=&quot;width:80%; height:40px;  margin-top:15px;&quot;&gt;\r\n              &lt;br&gt;&lt;br&gt;\r\n                &lt;button  type=&quot;submit&quot; style=&quot;color:#fff; background-color: #0575E6; text-decoration: none; width:95px; height:42px;border: #fff; border-radius:6px;&quot;&gt;Submit&lt;/button&gt;\r\n          &lt;/form&gt;\r\n    &lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nmy error that shown \r\n```\r\n2023-02-26 18:09:10.895 ERROR 13560 --- [nio-8080-exec-1] org.thymeleaf.TemplateEngine             : [THYMELEAF][http-nio-8080-exec-1] Exception processing template &quot;index&quot;: Error during execution of processor &#39;org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor&#39; (template: &quot;index&quot; - line 19, col 129)\r\n\r\norg.thymeleaf.exceptions.TemplateProcessingException: Error during execution of processor &#39;org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor&#39; (template: &quot;index&quot; - line 19, col 129)\r\n\tat org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:117) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.engine.ProcessorTemplateHandler.handleStandaloneElement(ProcessorTemplateHandler.java:918) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.engine.StandaloneElementTag.beHandled(StandaloneElementTag.java:228) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.engine.TemplateModel.process(TemplateModel.java:136) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:661) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1405) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1149) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\nCaused by: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;user&#39; available as request attribute\r\n\tat org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:153) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.support.RequestContext.getBindStatus(RequestContext.java:903) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.thymeleaf.spring5.context.webmvc.SpringWebMvcThymeleafRequestContext.getBindStatus(SpringWebMvcThymeleafRequestContext.java:227) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.spring5.util.FieldUtils.getBindStatusFromParsedExpression(FieldUtils.java:306) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:253) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:227) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.spring5.processor.AbstractSpringFieldTagProcessor.doProcess(AbstractSpringFieldTagProcessor.java:174) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\t... 52 common frames omitted\r\n\r\n2023-02-26 18:09:10.895 ERROR 13560 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.thymeleaf.exceptions.TemplateProcessingException: Error during execution of processor &#39;org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor&#39; (template: &quot;index&quot; - line 19, col 129)] with root cause\r\n\r\njava.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;user&#39; available as request attribute\r\n\tat org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:153) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.support.RequestContext.getBindStatus(RequestContext.java:903) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.thymeleaf.spring5.context.webmvc.SpringWebMvcThymeleafRequestContext.getBindStatus(SpringWebMvcThymeleafRequestContext.java:227) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.spring5.util.FieldUtils.getBindStatusFromParsedExpression(FieldUtils.java:306) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:253) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:227) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.spring5.processor.AbstractSpringFieldTagProcessor.doProcess(AbstractSpringFieldTagProcessor.java:174) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.engine.ProcessorTemplateHandler.handleStandaloneElement(ProcessorTemplateHandler.java:918) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.engine.StandaloneElementTag.beHandled(StandaloneElementTag.java:228) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.engine.TemplateModel.process(TemplateModel.java:136) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:661) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1405) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1149) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n\r\n\r\n```","title":"Error 500 internal server error in the Springboot-thymeleaf","body":"<p>While running it shows</p>\n<blockquote>\n<p>There was an unexpected error (type=Internal Server Error, status=500).</p>\n</blockquote>\n<p><strong>My Controller page</strong></p>\n<pre><code>package com.dbcon.controller;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\n\nimport com.dbcon.entity.DbEntity;\nimport com.dbcon.repository.DbRepo;\n\npublic class DbController {\n\n    @Autowired\n    private DbRepo Dbrepo;\n    \n    @GetMapping(&quot;/&quot;)\n    public String SignUpForm(Model model) {\n        model.addAttribute(&quot;user&quot;, new DbEntity());\n        return &quot;index&quot;;\n    }\n    \n    @PostMapping(&quot;/process_register&quot;)\n    public String Registration(DbEntity user) {\n        Dbrepo.save(user);\n        return &quot;result&quot;;\n    }\n\n}\n</code></pre>\n<p>my entity page</p>\n<pre><code>\npackage com.dbcon.entity;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = &quot;TestCon&quot;)\npublic class DbEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY) // automated by DB\n    private long id;\n    \n    @Column(nullable = false, unique = true, length = 100) // primary key\n    private String email;\n    \n    @Column(nullable = false, length = 50)\n    private String firstname;\n    \n    @Column(nullable = false, length = 50)\n    private String lastname;\n    \n    @Column(nullable = false, length = 50)\n    private String phonenumber;\n    \n    \n    public String getEmail() {\n        return email;\n    }\n    \n    public void setEmail(String email) {\n        this.email = email;\n    }\n    \n    public String getFirstname() {\n        return firstname;\n    }\n    \n    public void setFirstname(String firstname) {\n        this.firstname = firstname;\n    }\n    \n    public String getLastname() {\n        return lastname;\n    }\n    \n    public void setLastname(String lastname) {\n        this.lastname = lastname;\n    }\n    \n    public String getPhonenumber() {\n        return phonenumber;\n    }\n    \n    public void setPhonenumber(String phonenumber) {\n        this.phonenumber = phonenumber;\n    }\n    \n    }\n</code></pre>\n<p>i am getting error in this line</p>\n<pre><code>&lt;input class=&quot;mx-auto my-auto&quot; type=&quot;text&quot; id=&quot;FName&quot; placeholder=&quot;First Name&quot;  style=&quot;width:80%; height:40px;&quot; th:field=&quot;*{firstname}&quot; required&gt;\n</code></pre>\n<p>my HTML page is</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://thymeleaf.org&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\n    &lt;title&gt;Database Connectivity&lt;/title&gt;\n      &lt;link href=&quot;https://fonts.googleapis.com/css2?family=Poppins&amp;family=Rubik:wght@300&amp;display=swap&quot; rel=&quot;stylesheet&quot;&gt;\n    &lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot; integrity=&quot;sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC&quot; crossorigin=&quot;anonymous&quot;&gt;\n&lt;/head&gt;\n&lt;body style=&quot;background-color:#131313;&quot;&gt;\n    &lt;div class=&quot;container&quot; style=&quot;width: 60%; height: auto; margin-top: 100px; justify-content: center; align-items: center;&quot; &gt;\n      &lt;div class=&quot;card text-center&quot; &gt;\n        &lt;div class=&quot;card-title&quot;style=&quot;margin-top:40px;&quot; &gt;\n          &lt;h3&gt;Database Conectivity&lt;/h3&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;card-body&quot; &gt;\n          &lt;form method=&quot;post&quot; th:object=&quot;${user}&quot; th:action=&quot;@{/result}&quot; &gt;\n                &lt;input class=&quot;mx-auto my-auto&quot; type=&quot;text&quot; id=&quot;FName&quot; placeholder=&quot;First Name&quot;  style=&quot;width:80%; height:40px;&quot; th:field=&quot;*{firstname}&quot; required&gt;\n                &lt;input class=&quot;mx-auto my-40&quot;type=&quot;text&quot; id=&quot;LName&quot; placeholder=&quot;Last Name&quot; th:field=&quot;*{lastname}&quot; required style=&quot;width:80%; height:40px;  margin-top:15px;&quot;&gt;\n                &lt;input class=&quot;mx-auto my-40&quot;type=&quot;number&quot; id=&quot;PhNumber&quot; placeholder=&quot;Phone Number&quot; th:field=&quot;*{phonenumber}&quot; required style=&quot;width:80%; height:40px;  margin-top:15px;&quot;&gt;\n                &lt;input class=&quot;mx-auto my-40&quot;type=&quot;email&quot; id=&quot;EMail&quot; placeholder=&quot;Email&quot;  th:field=&quot;*{email}&quot; required style=&quot;width:80%; height:40px;  margin-top:15px;&quot;&gt;\n              &lt;br&gt;&lt;br&gt;\n                &lt;button  type=&quot;submit&quot; style=&quot;color:#fff; background-color: #0575E6; text-decoration: none; width:95px; height:42px;border: #fff; border-radius:6px;&quot;&gt;Submit&lt;/button&gt;\n          &lt;/form&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>my error that shown</p>\n<pre><code>2023-02-26 18:09:10.895 ERROR 13560 --- [nio-8080-exec-1] org.thymeleaf.TemplateEngine             : [THYMELEAF][http-nio-8080-exec-1] Exception processing template &quot;index&quot;: Error during execution of processor 'org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor' (template: &quot;index&quot; - line 19, col 129)\n\norg.thymeleaf.exceptions.TemplateProcessingException: Error during execution of processor 'org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor' (template: &quot;index&quot; - line 19, col 129)\n    at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:117) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.engine.ProcessorTemplateHandler.handleStandaloneElement(ProcessorTemplateHandler.java:918) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.engine.StandaloneElementTag.beHandled(StandaloneElementTag.java:228) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.engine.TemplateModel.process(TemplateModel.java:136) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:661) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1405) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1149) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\nCaused by: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'user' available as request attribute\n    at org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:153) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.support.RequestContext.getBindStatus(RequestContext.java:903) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.thymeleaf.spring5.context.webmvc.SpringWebMvcThymeleafRequestContext.getBindStatus(SpringWebMvcThymeleafRequestContext.java:227) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.spring5.util.FieldUtils.getBindStatusFromParsedExpression(FieldUtils.java:306) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:253) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:227) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.spring5.processor.AbstractSpringFieldTagProcessor.doProcess(AbstractSpringFieldTagProcessor.java:174) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    ... 52 common frames omitted\n\n2023-02-26 18:09:10.895 ERROR 13560 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.thymeleaf.exceptions.TemplateProcessingException: Error during execution of processor 'org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor' (template: &quot;index&quot; - line 19, col 129)] with root cause\n\njava.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'user' available as request attribute\n    at org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:153) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.support.RequestContext.getBindStatus(RequestContext.java:903) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.thymeleaf.spring5.context.webmvc.SpringWebMvcThymeleafRequestContext.getBindStatus(SpringWebMvcThymeleafRequestContext.java:227) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.spring5.util.FieldUtils.getBindStatusFromParsedExpression(FieldUtils.java:306) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:253) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:227) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.spring5.processor.AbstractSpringFieldTagProcessor.doProcess(AbstractSpringFieldTagProcessor.java:174) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.engine.ProcessorTemplateHandler.handleStandaloneElement(ProcessorTemplateHandler.java:918) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.engine.StandaloneElementTag.beHandled(StandaloneElementTag.java:228) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.engine.TemplateModel.process(TemplateModel.java:136) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:661) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072) ~[thymeleaf-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190) ~[thymeleaf-spring5-3.0.15.RELEASE.jar:3.0.15.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1405) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1149) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n\n\n</code></pre>\n"},{"tags":["java","api","http-status-code-404","response","quarkus"],"comments":[{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":0,"creation_date":1670605872,"post_id":74745905,"comment_id":131919850,"body_markdown":"Do you want the message to go in the HTTP status line or in the body of the response? I do not know about the former, but if it is the latter that you want, I believe you must use the more verbose `Response` builders, something like: `throw new NotFoundException(Response.status(404).entity(&quot;No dockerfile or image report found&quot;).build())`. Not a very intuitive part of the spec :)","body":"Do you want the message to go in the HTTP status line or in the body of the response? I do not know about the former, but if it is the latter that you want, I believe you must use the more verbose <code>Response</code> builders, something like: <code>throw new NotFoundException(Response.status(404).entity(&quot;No dockerfile or image report found&quot;).build())</code>. Not a very intuitive part of the spec :)"},{"owner":{"account_id":11543631,"reputation":1652,"user_id":8458465,"display_name":"Jishan Shaikh"},"score":0,"creation_date":1670651109,"post_id":74745905,"comment_id":131927459,"body_markdown":"It seems trivial, but your report might not be exactly null. Try debugging the report just before the exception check to know what it contains.","body":"It seems trivial, but your report might not be exactly null. Try debugging the report just before the exception check to know what it contains."}],"answers":[{"tags":[],"owner":{"account_id":24477238,"reputation":48,"user_id":18396142,"display_name":"Karlito Brigante"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1670757632,"creation_date":1670757632,"answer_id":74760346,"question_id":74745905,"body_markdown":"Thanks to Nikos Paraskevopoulos in the comments. \r\nIve added the response status in the Exception like this:\r\n\r\n    throw new NotFoundException(Response.status(HttpURLConnection.HTTP_NOT_FOUND).entity(&quot;your message&quot;).build());\r\n\r\nthis worked fine and i have the message in the response body\r\n\r\n[![response 404][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qwZsm.png","title":"How to throw NotFoundException with message body in Java Quarkus","body":"<p>Thanks to Nikos Paraskevopoulos in the comments.\nIve added the response status in the Exception like this:</p>\n<pre><code>throw new NotFoundException(Response.status(HttpURLConnection.HTTP_NOT_FOUND).entity(&quot;your message&quot;).build());\n</code></pre>\n<p>this worked fine and i have the message in the response body</p>\n<p><a href=\"https://i.stack.imgur.com/qwZsm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qwZsm.png\" alt=\"response 404\" /></a></p>\n"}],"owner":{"account_id":24477238,"reputation":48,"user_id":18396142,"display_name":"Karlito Brigante"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":892,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74760346,"answer_count":1,"score":0,"last_activity_date":1677513721,"creation_date":1670603995,"question_id":74745905,"body_markdown":"I currently have the problem, that I am looking for an artifact in Jenkins. If this artifact can not be found, then a 404 should come back. So far this works quite well. Unfortunately, I get no message and only the ErrorCode 404 back. I would like to return a message with more information.\r\n\r\nHere&#39;s my code.\r\n\r\nEndpoint:\r\n\r\n```\r\n@GET\r\n@Path(API_RESOURCE_IMAGE_REPORT)\r\n@Consumes(MediaType.APPLICATION_JSON)\r\n@Produces(MediaType.TEXT_HTML)\r\n@Operation(summary = &quot;&quot;, description = &quot;&quot;)\r\n@APIResponses(\r\n        value = {\r\n                @APIResponse(\r\n                        responseCode = &quot;200&quot;,\r\n                        description =\r\n                                &quot;Request successful&quot;,\r\n                        content = @Content(mediaType = MediaType.TEXT_HTML)),\r\n                @APIResponse(\r\n                        responseCode = &quot;404&quot;,\r\n                        description = &quot;Resource not found &quot;,\r\n                        content =\r\n                        @Content(\r\n                                mediaType = MediaType.APPLICATION_JSON,\r\n                                schema = @Schema(implementation = NotFoundException.class))),\r\n        })\r\npublic Response getReport(@Parameter(\r\n        description = &quot;&quot;,\r\n        required = true)\r\n                          @PathParam(&quot;imageName&quot;) final String imageName,\r\n                          @Parameter(description = &quot;&quot;, required = true)\r\n                          @PathParam(&quot;tag&quot;) final String tag,\r\n                          @Parameter(description = &quot;&quot;)\r\n                          @PathParam(&quot;type&quot;) String type\r\n) {\r\n\r\n    InputStream report = jenkinsClient.getReport(imageName, tag, type);\r\n    \r\n    return Response.status(HttpURLConnection.HTTP_ACCEPTED).entity(report).build();\r\n}\r\n```\r\n\r\nJenkinsclient:\r\n\r\n```\r\npublic InputStream getReport(final String imageName, final String tag, final String type) throws NotFoundException {\r\n\r\n        try {\r\n            final int lastSuccessfulBuildnumber = jenkinsClient.api().jobsApi().jobInfo(imageName, tag).lastSuccessfulBuild().number();\r\n            LOG.info(&quot;Last successful buildnumber: &quot; + lastSuccessfulBuildnumber);\r\n\r\n            final InputStream report = jenkinsClient.api().jobsApi().artifact(imageName, tag, lastSuccessfulBuildnumber, Objects.equals(type, &quot;image&quot;) ? &quot;trivy_image_report.html&quot; : &quot;trivy_Dockerfile_report.html&quot;);\r\n\r\n            if (report == null) {\r\n                throw new NotFoundException(&quot;No dockerfile or image report found&quot;);\r\n            }\r\n\r\n            return report;\r\n\r\n        } catch (Exception e) {\r\n            throw new NotFoundException(&quot;No dockerfile or image scan report found&quot;);\r\n\r\n        }\r\n    }\r\n```\r\n\r\nI expected a 404 with a the message &quot;No dockerfile or image scan report found&quot;. But i got only 404 without a message when i dont find an artefact. I used the &quot;javax.ws.rs.NotFoundException&quot; for NotFoundException.\r\n\r\nThanks for help","title":"How to throw NotFoundException with message body in Java Quarkus","body":"<p>I currently have the problem, that I am looking for an artifact in Jenkins. If this artifact can not be found, then a 404 should come back. So far this works quite well. Unfortunately, I get no message and only the ErrorCode 404 back. I would like to return a message with more information.</p>\n<p>Here's my code.</p>\n<p>Endpoint:</p>\n<pre><code>@GET\n@Path(API_RESOURCE_IMAGE_REPORT)\n@Consumes(MediaType.APPLICATION_JSON)\n@Produces(MediaType.TEXT_HTML)\n@Operation(summary = &quot;&quot;, description = &quot;&quot;)\n@APIResponses(\n        value = {\n                @APIResponse(\n                        responseCode = &quot;200&quot;,\n                        description =\n                                &quot;Request successful&quot;,\n                        content = @Content(mediaType = MediaType.TEXT_HTML)),\n                @APIResponse(\n                        responseCode = &quot;404&quot;,\n                        description = &quot;Resource not found &quot;,\n                        content =\n                        @Content(\n                                mediaType = MediaType.APPLICATION_JSON,\n                                schema = @Schema(implementation = NotFoundException.class))),\n        })\npublic Response getReport(@Parameter(\n        description = &quot;&quot;,\n        required = true)\n                          @PathParam(&quot;imageName&quot;) final String imageName,\n                          @Parameter(description = &quot;&quot;, required = true)\n                          @PathParam(&quot;tag&quot;) final String tag,\n                          @Parameter(description = &quot;&quot;)\n                          @PathParam(&quot;type&quot;) String type\n) {\n\n    InputStream report = jenkinsClient.getReport(imageName, tag, type);\n    \n    return Response.status(HttpURLConnection.HTTP_ACCEPTED).entity(report).build();\n}\n</code></pre>\n<p>Jenkinsclient:</p>\n<pre><code>public InputStream getReport(final String imageName, final String tag, final String type) throws NotFoundException {\n\n        try {\n            final int lastSuccessfulBuildnumber = jenkinsClient.api().jobsApi().jobInfo(imageName, tag).lastSuccessfulBuild().number();\n            LOG.info(&quot;Last successful buildnumber: &quot; + lastSuccessfulBuildnumber);\n\n            final InputStream report = jenkinsClient.api().jobsApi().artifact(imageName, tag, lastSuccessfulBuildnumber, Objects.equals(type, &quot;image&quot;) ? &quot;trivy_image_report.html&quot; : &quot;trivy_Dockerfile_report.html&quot;);\n\n            if (report == null) {\n                throw new NotFoundException(&quot;No dockerfile or image report found&quot;);\n            }\n\n            return report;\n\n        } catch (Exception e) {\n            throw new NotFoundException(&quot;No dockerfile or image scan report found&quot;);\n\n        }\n    }\n</code></pre>\n<p>I expected a 404 with a the message &quot;No dockerfile or image scan report found&quot;. But i got only 404 without a message when i dont find an artefact. I used the &quot;javax.ws.rs.NotFoundException&quot; for NotFoundException.</p>\n<p>Thanks for help</p>\n"},{"tags":["java","xml","xpath"],"comments":[{"owner":{"account_id":12016659,"reputation":8089,"user_id":8791568,"display_name":"Mate Mrše"},"score":0,"creation_date":1677498301,"post_id":75579979,"comment_id":133342969,"body_markdown":"See if this is helpful: https://stackoverflow.com/questions/10968612/xpath-ignore-span","body":"See if this is helpful: <a href=\"https://stackoverflow.com/questions/10968612/xpath-ignore-span\">stackoverflow.com/questions/10968612/xpath-ignore-span</a>"}],"answers":[{"tags":[],"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677506206,"creation_date":1677506206,"answer_id":75581392,"question_id":75579979,"body_markdown":"This java code:  \r\n`result_divValues = expr_divValues.evaluate(doxDiv, XPathConstants.STRING);`\r\n\r\nIs equivalent to using this xpath  \r\n`string(//div[@class=&quot;history-values&quot;]/div[1])` \r\n\r\nTesting on a browser console:\r\n\r\n    $x(&#39;string(//div[@class=&quot;history-values&quot;]/div[1])&#39;);\r\n    &quot;\r\n                    1Commentaire de la signature\r\n                &quot;\r\n\r\nChange to `result_divValues = expr_divValues.evaluate(doxDiv, XPathConstants.NODESET);` and pick the proper list element.  \r\nThis XPath returns 2 nodes:\r\n\r\n    $x(&#39;//div[@class=&quot;history-values&quot;]/div[1]/text()&#39;);\r\n    0: #text &quot;\r\n                &quot;​\r\n    1: #text &quot;Commentaire de la signature\r\n                &quot;\r\n\r\n","title":"Java with Xpath caught too much data inside a xml tag","body":"<p>This java code:<br />\n<code>result_divValues = expr_divValues.evaluate(doxDiv, XPathConstants.STRING);</code></p>\n<p>Is equivalent to using this xpath<br />\n<code>string(//div[@class=&quot;history-values&quot;]/div[1])</code></p>\n<p>Testing on a browser console:</p>\n<pre><code>$x('string(//div[@class=&quot;history-values&quot;]/div[1])');\n&quot;\n                1Commentaire de la signature\n            &quot;\n</code></pre>\n<p>Change to <code>result_divValues = expr_divValues.evaluate(doxDiv, XPathConstants.NODESET);</code> and pick the proper list element.<br />\nThis XPath returns 2 nodes:</p>\n<pre><code>$x('//div[@class=&quot;history-values&quot;]/div[1]/text()');\n0: #text &quot;\n            &quot;​\n1: #text &quot;Commentaire de la signature\n            &quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677513600,"creation_date":1677513600,"answer_id":75582753,"question_id":75579979,"body_markdown":"This is a tricky one.  From [the documentation of the XPath class](https://docs.oracle.com/en/java/javase/19/docs/api/java.xml/javax/xml/xpath/XPath.html):\r\n\r\n&gt; This result of evaluating an expression is converted to an instance of the desired return type. Valid return types are defined in XPathConstants. Conversion to the return type follows XPath conversion rules.\r\n\r\nSince you’re converting to a string, the “XPath conversion rules” come from [section 3.2](https://www.w3.org/TR/1999/REC-xpath-19991116/#section-Function-Calls) of the XPath specification:\r\n\r\n&gt;An argument is converted to type string as if by calling the string function.\r\n\r\nAnd [the string() function](https://www.w3.org/TR/1999/REC-xpath-19991116/#function-string) is documented thus:\r\n\r\n&gt;A node-set is converted to a string by returning the string-value of the node in the node-set that is first in document order. If the node-set is empty, an empty string is returned.\r\n\r\nThe text() node that is first in document order is the whitespace between the `&lt;div class=history-value&quot;&gt;` tag and the start of the span tag;  specifically, `&quot;\\n                &quot;`.  As the documentation says, only that first text node is evaluated as a string, even though `/text()` matches more than one text child.\r\n\r\nA workaround is to examine the text children yourself.  Replace this:\r\n\r\n    result_divValues = expr_divValues.evaluate(doxDiv, XPathConstants.STRING);\r\n\r\nwith this:\r\n\r\n    StringBuilder textContent = new StringBuilder();\r\n\r\n    NodeList children = (NodeList) expr_divValues.evaluate(doxDiv, XPathConstants.NODESET);\r\n    int count = children.getLength();\r\n    for (int i = 0; i &lt; count; i++) {\r\n        Object child = children.item(i);\r\n        if (child instanceof Text text) {\r\n            textContent.append(text.getData());\r\n        }\r\n    }\r\n\r\n    result_divValues = textContent.toString();\r\n","title":"Java with Xpath caught too much data inside a xml tag","body":"<p>This is a tricky one.  From <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.xml/javax/xml/xpath/XPath.html\" rel=\"nofollow noreferrer\">the documentation of the XPath class</a>:</p>\n<blockquote>\n<p>This result of evaluating an expression is converted to an instance of the desired return type. Valid return types are defined in XPathConstants. Conversion to the return type follows XPath conversion rules.</p>\n</blockquote>\n<p>Since you’re converting to a string, the “XPath conversion rules” come from <a href=\"https://www.w3.org/TR/1999/REC-xpath-19991116/#section-Function-Calls\" rel=\"nofollow noreferrer\">section 3.2</a> of the XPath specification:</p>\n<blockquote>\n<p>An argument is converted to type string as if by calling the string function.</p>\n</blockquote>\n<p>And <a href=\"https://www.w3.org/TR/1999/REC-xpath-19991116/#function-string\" rel=\"nofollow noreferrer\">the string() function</a> is documented thus:</p>\n<blockquote>\n<p>A node-set is converted to a string by returning the string-value of the node in the node-set that is first in document order. If the node-set is empty, an empty string is returned.</p>\n</blockquote>\n<p>The text() node that is first in document order is the whitespace between the <code>&lt;div class=history-value&quot;&gt;</code> tag and the start of the span tag;  specifically, <code>&quot;\\n                &quot;</code>.  As the documentation says, only that first text node is evaluated as a string, even though <code>/text()</code> matches more than one text child.</p>\n<p>A workaround is to examine the text children yourself.  Replace this:</p>\n<pre><code>result_divValues = expr_divValues.evaluate(doxDiv, XPathConstants.STRING);\n</code></pre>\n<p>with this:</p>\n<pre><code>StringBuilder textContent = new StringBuilder();\n\nNodeList children = (NodeList) expr_divValues.evaluate(doxDiv, XPathConstants.NODESET);\nint count = children.getLength();\nfor (int i = 0; i &lt; count; i++) {\n    Object child = children.item(i);\n    if (child instanceof Text text) {\n        textContent.append(text.getData());\n    }\n}\n\nresult_divValues = textContent.toString();\n</code></pre>\n"}],"owner":{"account_id":19176271,"reputation":11,"user_id":14008944,"display_name":"Xavier Domdom"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1677513600,"creation_date":1677497832,"question_id":75579979,"body_markdown":"I&#39;ve a java code like this : \r\n\r\n```\r\nexpr_divValues = xpathDiv.compile(&quot;//div[@class=\\&quot;history-entries\\&quot;]/div[&quot;+(index_historyEntrie+1)+&quot;]/div[@class=\\&quot;history-values\\&quot;]/div[&quot;+(index_historyValue+1)+&quot;]&quot;);\r\nresult_divValues = expr_divValues.evaluate(doxDiv, XPathConstants.STRING);\r\n```\r\n\r\nwith this XML data:\r\n\r\n```\r\n&lt;div class=&quot;history-entry even&quot; data-index=&quot;2&quot;&gt;\r\n    &lt;span class=&quot;history-actor&quot;&gt;JEan paul de france&lt;/span&gt;\r\n    &lt;span class=&quot;history-date&quot; data-time=&quot;1676382208618&quot;&gt;14 f&#233;vr. 2023 14:43:28&lt;/span&gt;\r\n\t\t&lt;div class=&quot;history-values&quot;&gt;\r\n\t\t\t&lt;div class=&quot;history-value&quot;&gt;\r\n\t\t\t\t&lt;span class=&quot;history-rank history-rank-first&quot; data-rank=&quot;1&quot;&gt;1&lt;/span&gt;Commentaire de la signature\r\n            &lt;/div&gt;\r\n\t\t&lt;/div&gt;\r\n  &lt;/div&gt;\r\n```\r\n\r\n\r\n\r\n\r\nWhen i use this the result of result_divValues is : 1Commentaire de la signature, the xpath request caught the &quot;1&quot; into the span tag and the only value i need in div Tag.\r\n\r\nTried adding &#39;/text()&#39; at the end of my xpath request, but when i do this, the value is empty.\r\n\r\nAnyone for a little help ?\r\n\r\nThanks a lot.\r\n","title":"Java with Xpath caught too much data inside a xml tag","body":"<p>I've a java code like this :</p>\n<pre><code>expr_divValues = xpathDiv.compile(&quot;//div[@class=\\&quot;history-entries\\&quot;]/div[&quot;+(index_historyEntrie+1)+&quot;]/div[@class=\\&quot;history-values\\&quot;]/div[&quot;+(index_historyValue+1)+&quot;]&quot;);\nresult_divValues = expr_divValues.evaluate(doxDiv, XPathConstants.STRING);\n</code></pre>\n<p>with this XML data:</p>\n<pre><code>&lt;div class=&quot;history-entry even&quot; data-index=&quot;2&quot;&gt;\n    &lt;span class=&quot;history-actor&quot;&gt;JEan paul de france&lt;/span&gt;\n    &lt;span class=&quot;history-date&quot; data-time=&quot;1676382208618&quot;&gt;14 févr. 2023 14:43:28&lt;/span&gt;\n        &lt;div class=&quot;history-values&quot;&gt;\n            &lt;div class=&quot;history-value&quot;&gt;\n                &lt;span class=&quot;history-rank history-rank-first&quot; data-rank=&quot;1&quot;&gt;1&lt;/span&gt;Commentaire de la signature\n            &lt;/div&gt;\n        &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n<p>When i use this the result of result_divValues is : 1Commentaire de la signature, the xpath request caught the &quot;1&quot; into the span tag and the only value i need in div Tag.</p>\n<p>Tried adding '/text()' at the end of my xpath request, but when i do this, the value is empty.</p>\n<p>Anyone for a little help ?</p>\n<p>Thanks a lot.</p>\n"},{"tags":["java","arrays","loops","arraylist"],"comments":[{"owner":{"account_id":1390639,"reputation":23879,"user_id":1321564,"accept_rate":71,"display_name":"Benjamin M"},"score":1,"creation_date":1615393284,"post_id":66568745,"comment_id":117678168,"body_markdown":"Ask yourself how you get all multiples of a given number. You know that your list is from `1` to `100`. So ... if the user inputs `5`, how do you get all multiples of `5` between `1` and `100`? When you got that, you just have to do `list.remove(multiple);` and you&#39;re done. Try to describe it in simple words, step by step. Then you&#39;ll see that you can convert those steps into code quite easy.","body":"Ask yourself how you get all multiples of a given number. You know that your list is from <code>1</code> to <code>100</code>. So ... if the user inputs <code>5</code>, how do you get all multiples of <code>5</code> between <code>1</code> and <code>100</code>? When you got that, you just have to do <code>list.remove(multiple);</code> and you&#39;re done. Try to describe it in simple words, step by step. Then you&#39;ll see that you can convert those steps into code quite easy."},{"owner":{"account_id":20921066,"reputation":15,"user_id":15369659,"display_name":"Malthe22"},"score":0,"creation_date":1615393636,"post_id":66568745,"comment_id":117678344,"body_markdown":"Yes. I&#39;ts just a &quot;basic&quot; exercise for my study.","body":"Yes. I&#39;ts just a &quot;basic&quot; exercise for my study."},{"owner":{"account_id":20921066,"reputation":15,"user_id":15369659,"display_name":"Malthe22"},"score":0,"creation_date":1615393699,"post_id":66568745,"comment_id":117678377,"body_markdown":"Will look through tihs. Thank you.\n@BenjaminM, good point. Will try see the step by step","body":"Will look through tihs. Thank you. @BenjaminM, good point. Will try see the step by step"}],"answers":[{"comments":[{"owner":{"account_id":17832421,"reputation":4234,"user_id":12952113,"display_name":"Alex Sveshnikov"},"score":0,"creation_date":1615394110,"post_id":66568899,"comment_id":117678566,"body_markdown":"This code has many problems. It starts with wrong index (zero), modifies the list on the fly and can easily generate IndexOutOfBoundsException.","body":"This code has many problems. It starts with wrong index (zero), modifies the list on the fly and can easily generate IndexOutOfBoundsException."},{"owner":{"account_id":17832421,"reputation":4234,"user_id":12952113,"display_name":"Alex Sveshnikov"},"score":0,"creation_date":1615395400,"post_id":66568899,"comment_id":117679157,"body_markdown":"@user15358848 The loop continues up to 100, but the elements are being removed from the list, so the size of the list decreases, so it&#39;s quite probable that at the end we&#39;ll try to remove an element with index smaller than 100 but larger than the current list size, which will lead to IndexOutOfBounds exception.","body":"@user15358848 The loop continues up to 100, but the elements are being removed from the list, so the size of the list decreases, so it&#39;s quite probable that at the end we&#39;ll try to remove an element with index smaller than 100 but larger than the current list size, which will lead to IndexOutOfBounds exception."},{"owner":{"account_id":17832421,"reputation":4234,"user_id":12952113,"display_name":"Alex Sveshnikov"},"score":0,"creation_date":1615395720,"post_id":66568899,"comment_id":117679297,"body_markdown":"No, it will not. When we remove an element from the list all further elements are shifted down by 1. So if input = 5 we&#39;ll remove elements 11, 17, 23, 29, etc. You need to replace `index += input` with `index += input - 1`. So that&#39;s why I said there are many problems with the code","body":"No, it will not. When we remove an element from the list all further elements are shifted down by 1. So if input = 5 we&#39;ll remove elements 11, 17, 23, 29, etc. You need to replace <code>index += input</code> with <code>index += input - 1</code>. So that&#39;s why I said there are many problems with the code"},{"owner":{"account_id":17832421,"reputation":4234,"user_id":12952113,"display_name":"Alex Sveshnikov"},"score":0,"creation_date":1615395994,"post_id":66568899,"comment_id":117679440,"body_markdown":"No, the &quot;wrong values&quot; in case of input 5 are &quot;10, 15, 20, 25,...&quot;, not &quot;11, 17, 23, 29,...&quot;","body":"No, the &quot;wrong values&quot; in case of input 5 are &quot;10, 15, 20, 25,...&quot;, not &quot;11, 17, 23, 29,...&quot;"},{"owner":{"account_id":8490813,"reputation":3810,"user_id":6367213,"display_name":"Janez Kuhar"},"score":0,"creation_date":1615396660,"post_id":66568899,"comment_id":117679785,"body_markdown":"The idea here is basically the same as [here](https://stackoverflow.com/a/66569346/6367213), only the other answer is much shorter and more concise.","body":"The idea here is basically the same as <a href=\"https://stackoverflow.com/a/66569346/6367213\">here</a>, only the other answer is much shorter and more concise."}],"tags":[],"owner":{"account_id":12422817,"reputation":64,"user_id":9048857,"display_name":"colin robertson"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615396163,"creation_date":1615393540,"answer_id":66568899,"question_id":66568745,"body_markdown":"Remove every multiple of the given number. Create a for loop, starting at 0, that adds the specified number to an index on every loop iteration. If the current number is NOT the original input number, remove it from the array list.\r\n\r\nWhen removing elements from the ArrayList, the index of all of the elements that come after the removed element will be shifted down by one. To counter this, we divide the current index by the input value (the value that will have all multiplies of it removed), indicating how many other values have been removed.\r\n\r\n```\r\npackage test;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport java.util.Scanner;\r\n\r\npublic class OneToHundreed {\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner sc = new Scanner(System. in );\r\n\t\tArrayList &lt; Integer &gt; list = new ArrayList &lt; &gt;();\r\n\r\n\t\tfor (int i = 1; i &lt;= 100; i++) {\r\n\t\t\tlist.add(i);\r\n\t\t}\r\n\t\tSystem.out.println(list);\r\n\t\tSystem.out.println(&quot;Next part of the exercise\\n_________________________&quot;);\r\n\t\tSystem.out.println(&quot;Please enter a number&quot;);\r\n\t\tfinal int input = sc.nextInt();\r\n\r\n\t\t// index = 0\r\n\t\t// if the input is 5, the index will go like:\r\n\t\t// 0, 5, 10, 15, 20, 25... etc\r\n\t\t// if the index is 5, it won&#39;t remove the number\r\n\t\t// otherwise it will\r\n\t\tfor (int index = input; index &lt;= 100; index += input) {\r\n\t\t\tif (index != input) list.remove(index - (index / input) + 1);\r\n\t\t}\r\n\t\tSystem.out.println(list);\r\n\t}\r\n}\r\n```","title":"Remove multiple numbers from an ArrayList","body":"<p>Remove every multiple of the given number. Create a for loop, starting at 0, that adds the specified number to an index on every loop iteration. If the current number is NOT the original input number, remove it from the array list.</p>\n<p>When removing elements from the ArrayList, the index of all of the elements that come after the removed element will be shifted down by one. To counter this, we divide the current index by the input value (the value that will have all multiplies of it removed), indicating how many other values have been removed.</p>\n<pre><code>package test;\n\nimport java.util.ArrayList;\n\nimport java.util.Scanner;\n\npublic class OneToHundreed {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System. in );\n        ArrayList &lt; Integer &gt; list = new ArrayList &lt; &gt;();\n\n        for (int i = 1; i &lt;= 100; i++) {\n            list.add(i);\n        }\n        System.out.println(list);\n        System.out.println(&quot;Next part of the exercise\\n_________________________&quot;);\n        System.out.println(&quot;Please enter a number&quot;);\n        final int input = sc.nextInt();\n\n        // index = 0\n        // if the input is 5, the index will go like:\n        // 0, 5, 10, 15, 20, 25... etc\n        // if the index is 5, it won't remove the number\n        // otherwise it will\n        for (int index = input; index &lt;= 100; index += input) {\n            if (index != input) list.remove(index - (index / input) + 1);\n        }\n        System.out.println(list);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":17832421,"reputation":4234,"user_id":12952113,"display_name":"Alex Sveshnikov"},"score":0,"creation_date":1615393900,"post_id":66568939,"comment_id":117678470,"body_markdown":"This will remove the `input` itself as well.","body":"This will remove the <code>input</code> itself as well."},{"owner":{"account_id":2787482,"reputation":1022,"user_id":2398479,"accept_rate":32,"display_name":"Emre Alparslan"},"score":0,"creation_date":1615394047,"post_id":66568939,"comment_id":117678545,"body_markdown":"@Alex Yeap, I fixed it. Thank you.","body":"@Alex Yeap, I fixed it. Thank you."},{"owner":{"account_id":17832421,"reputation":4234,"user_id":12952113,"display_name":"Alex Sveshnikov"},"score":0,"creation_date":1615394326,"post_id":66568939,"comment_id":117678665,"body_markdown":"Voted up, specifically for creating a new list for the result. Modifying the initial list in a loop is a bad idea. There is also one additional problem in this task: the list contains Integers. So it might not be obvious at a glance what does `list.remove(7)` do - removes the seventh element or removes an element with value 7. Thus creation of another list as a result is a proper way.","body":"Voted up, specifically for creating a new list for the result. Modifying the initial list in a loop is a bad idea. There is also one additional problem in this task: the list contains Integers. So it might not be obvious at a glance what does <code>list.remove(7)</code> do - removes the seventh element or removes an element with value 7. Thus creation of another list as a result is a proper way."},{"owner":{"account_id":17832421,"reputation":4234,"user_id":12952113,"display_name":"Alex Sveshnikov"},"score":0,"creation_date":1615394703,"post_id":66568939,"comment_id":117678822,"body_markdown":"Ah yes, true, the condition should be `if (list.get(i) == input || (list.get(i) % input) &gt; 0) {` and then you should do `result.add(list.get(i))`. But the idea is solid","body":"Ah yes, true, the condition should be <code>if (list.get(i) == input || (list.get(i) % input) &gt; 0) {</code> and then you should do <code>result.add(list.get(i))</code>. But the idea is solid"},{"owner":{"account_id":2787482,"reputation":1022,"user_id":2398479,"accept_rate":32,"display_name":"Emre Alparslan"},"score":0,"creation_date":1615394840,"post_id":66568939,"comment_id":117678879,"body_markdown":"Hi again, I tested it now and I fixed my mistakes. Thank you all for your comments!","body":"Hi again, I tested it now and I fixed my mistakes. Thank you all for your comments!"},{"owner":{"account_id":17832421,"reputation":4234,"user_id":12952113,"display_name":"Alex Sveshnikov"},"score":0,"creation_date":1615394855,"post_id":66568939,"comment_id":117678884,"body_markdown":"The original number is still gone from the list","body":"The original number is still gone from the list"},{"owner":{"account_id":2787482,"reputation":1022,"user_id":2398479,"accept_rate":32,"display_name":"Emre Alparslan"},"score":0,"creation_date":1615395133,"post_id":66568939,"comment_id":117679018,"body_markdown":"[1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 13, 14, 16, 17, 18, 19, 21, 22,....] is the result now.","body":"[1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 13, 14, 16, 17, 18, 19, 21, 22,....] is the result now."},{"owner":{"account_id":20921066,"reputation":15,"user_id":15369659,"display_name":"Malthe22"},"score":0,"creation_date":1615395359,"post_id":66568939,"comment_id":117679131,"body_markdown":"This is really helpful! Thank you all!","body":"This is really helpful! Thank you all!"},{"owner":{"account_id":20921066,"reputation":15,"user_id":15369659,"display_name":"Malthe22"},"score":0,"creation_date":1615395477,"post_id":66568939,"comment_id":117679193,"body_markdown":"Will definitely do that. Gotta be able to read it afterwards ;)","body":"Will definitely do that. Gotta be able to read it afterwards ;)"},{"owner":{"account_id":2787482,"reputation":1022,"user_id":2398479,"accept_rate":32,"display_name":"Emre Alparslan"},"score":0,"creation_date":1615396354,"post_id":66568939,"comment_id":117679632,"body_markdown":"@Malthe22 That&#39;s nice to hear that it helped you. I also added some comments that makes the function clear.","body":"@Malthe22 That&#39;s nice to hear that it helped you. I also added some comments that makes the function clear."}],"tags":[],"owner":{"account_id":2787482,"reputation":1022,"user_id":2398479,"accept_rate":32,"display_name":"Emre Alparslan"},"comment_count":10,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1622441652,"creation_date":1615393669,"answer_id":66568939,"question_id":66568745,"body_markdown":"You can use [modulo operation][1].\r\n\r\nCode:\r\n\r\n```java\r\nSystem.out.println(list);\r\nSystem.out.println(&quot;Next part of the exercise\\n_________________________&quot;);\r\nSystem.out.println(&quot;Please enter a number&quot;);\r\nfinal int input = sc.nextInt();\r\n// The result array that will contain correct numbers.\r\nArrayList&lt;Integer&gt; result = new ArrayList&lt;&gt;();\r\n// For loop roams the initial dataset starting from first index.\r\nfor (int i = 0; i &lt; list.size(); i++) {\r\n    // If the element in the initial array list is equal to\r\n    // the input number, it will directly added to the result\r\n    // array list.\r\n    if (list.get(i) == input) {\r\n        result.add(list.get(i));\r\n    }\r\n    // Otherwise, the modulo operation will be executed.\r\n    // If the result of the modulo is greater than 0,\r\n    // the number will be added to the result array list.\r\n    else if ((list.get(i) % input) &gt; 0) {\r\n        result.add(list.get(i));\r\n    }\r\n}\r\nSystem.out.println(result);\r\n```\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Modulo_operation\r\n","title":"Remove multiple numbers from an ArrayList","body":"<p>You can use <a href=\"https://en.wikipedia.org/wiki/Modulo_operation\" rel=\"nofollow noreferrer\">modulo operation</a>.</p>\n<p>Code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(list);\nSystem.out.println(&quot;Next part of the exercise\\n_________________________&quot;);\nSystem.out.println(&quot;Please enter a number&quot;);\nfinal int input = sc.nextInt();\n// The result array that will contain correct numbers.\nArrayList&lt;Integer&gt; result = new ArrayList&lt;&gt;();\n// For loop roams the initial dataset starting from first index.\nfor (int i = 0; i &lt; list.size(); i++) {\n    // If the element in the initial array list is equal to\n    // the input number, it will directly added to the result\n    // array list.\n    if (list.get(i) == input) {\n        result.add(list.get(i));\n    }\n    // Otherwise, the modulo operation will be executed.\n    // If the result of the modulo is greater than 0,\n    // the number will be added to the result array list.\n    else if ((list.get(i) % input) &gt; 0) {\n        result.add(list.get(i));\n    }\n}\nSystem.out.println(result);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":20921066,"reputation":15,"user_id":15369659,"display_name":"Malthe22"},"score":0,"creation_date":1615395672,"post_id":66569283,"comment_id":117679270,"body_markdown":"Appreciate the input. I don&#39;t get the &quot;a -&gt;a&quot; however?\nHaven&#39;t been working with removeIf yet","body":"Appreciate the input. I don&#39;t get the &quot;a -&gt;a&quot; however? Haven&#39;t been working with removeIf yet"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1615395717,"post_id":66569283,"comment_id":117679293,"body_markdown":"for any value in the list `a`, apply `a` to the conditions.  It&#39;s a lambda expression.","body":"for any value in the list <code>a</code>, apply <code>a</code> to the conditions.  It&#39;s a lambda expression."},{"owner":{"account_id":8664592,"reputation":9965,"user_id":6485651,"accept_rate":65,"display_name":"Zephyr"},"score":0,"creation_date":1615396487,"post_id":66569283,"comment_id":117679702,"body_markdown":"I see we came up with basically the same solution. Mine admittedly took longer to write than yours. :)","body":"I see we came up with basically the same solution. Mine admittedly took longer to write than yours. :)"},{"owner":{"account_id":8664592,"reputation":9965,"user_id":6485651,"accept_rate":65,"display_name":"Zephyr"},"score":0,"creation_date":1615396666,"post_id":66569283,"comment_id":117679787,"body_markdown":"Your code does not compile, though, as the `List` interface does not provide that `of()` method... At least not in JDK 8, which I&#39;m still stuck on :P","body":"Your code does not compile, though, as the <code>List</code> interface does not provide that <code>of()</code> method... At least not in JDK 8, which I&#39;m still stuck on :P"},{"owner":{"account_id":2465829,"reputation":11057,"user_id":2148953,"accept_rate":96,"display_name":"aran"},"score":1,"creation_date":1615396925,"post_id":66569283,"comment_id":117679901,"body_markdown":"introduced in java 9","body":"introduced in java 9"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1615397407,"post_id":66569283,"comment_id":117680096,"body_markdown":"@Zephyr Java is already at JDK 15 so I don&#39;t caveat those any more than I caveated generics (from JDK 1.5) to folks who might have been running JDK 1.4.  And it isn&#39;t essential to the solution. Just a way to initialize a list.","body":"@Zephyr Java is already at JDK 15 so I don&#39;t caveat those any more than I caveated generics (from JDK 1.5) to folks who might have been running JDK 1.4.  And it isn&#39;t essential to the solution. Just a way to initialize a list."}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":6,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1615394962,"creation_date":1615394962,"answer_id":66569283,"question_id":66568745,"body_markdown":"This isn&#39;t the entire program but enough to give you the idea.  It uses `removeIf` and the condition is that the number is divisible by the input but not equal to the input itself.\r\n```\r\nint input = 2;\r\nList&lt;Integer&gt; list = new ArrayList&lt;&gt;(List.of(1,2,3,4,5,6,7,8,9,10));\r\nSystem.out.println(list);\r\nlist.removeIf(a-&gt;a != input &amp;&amp; a % input == 0);\r\nSystem.out.println(list);\r\n```\r\nPrints\r\n```\r\n[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n[1, 2, 3, 5, 7, 9]\r\n","title":"Remove multiple numbers from an ArrayList","body":"<p>This isn't the entire program but enough to give you the idea.  It uses <code>removeIf</code> and the condition is that the number is divisible by the input but not equal to the input itself.</p>\n<pre><code>int input = 2;\nList&lt;Integer&gt; list = new ArrayList&lt;&gt;(List.of(1,2,3,4,5,6,7,8,9,10));\nSystem.out.println(list);\nlist.removeIf(a-&gt;a != input &amp;&amp; a % input == 0);\nSystem.out.println(list);\n</code></pre>\n<p>Prints</p>\n<pre><code>[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n[1, 2, 3, 5, 7, 9]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":20921066,"reputation":15,"user_id":15369659,"display_name":"Malthe22"},"score":0,"creation_date":1615395850,"post_id":66569327,"comment_id":117679355,"body_markdown":"Thank you for the input. Haven&#39;t learned about removeIf as of yet. I don&#39;t understand the interger -&gt; part. Care to explain?","body":"Thank you for the input. Haven&#39;t learned about removeIf as of yet. I don&#39;t understand the interger -&gt; part. Care to explain?"},{"owner":{"account_id":8664592,"reputation":9965,"user_id":6485651,"accept_rate":65,"display_name":"Zephyr"},"score":0,"creation_date":1615396021,"post_id":66569327,"comment_id":117679457,"body_markdown":"I&#39;ve updated my question with a little bit of an explanation. Lambdas are a more complex topic, but they&#39;re incredibly useful.","body":"I&#39;ve updated my question with a little bit of an explanation. Lambdas are a more complex topic, but they&#39;re incredibly useful."},{"owner":{"account_id":20921066,"reputation":15,"user_id":15369659,"display_name":"Malthe22"},"score":0,"creation_date":1615404438,"post_id":66569327,"comment_id":117683062,"body_markdown":"Thank you very much for the explanation. I think it might be too advanced for myself atm. But it&#39;s a nice shortcut!","body":"Thank you very much for the explanation. I think it might be too advanced for myself atm. But it&#39;s a nice shortcut!"}],"tags":[],"owner":{"account_id":8664592,"reputation":9965,"user_id":6485651,"accept_rate":65,"display_name":"Zephyr"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615395989,"creation_date":1615395131,"answer_id":66569327,"question_id":66568745,"body_markdown":"This may be a bit more advanced than your class wants you to go right now, but the `List` interface provides a `removeIf()` method that allows you to remove all elements of the `List` that match a certain condition.\r\n\r\nSince you want to remove all numbers that are multiples of your input, you would just check for that using the modulo operator: `%`.\r\n\r\nWe add a second condition to account for the original `input` so it doesn&#39;t also get removed:\r\n\r\n    list.removeIf(integer -&gt; (integer % input == 0 &amp;&amp; integer != input));\r\n\r\nThe odd syntax (`integer -&gt;`) is what is called a *lambda expression*. They are a fairly advanced topic, but essentially what is happening is `integer` is the item in the `List`. We are &quot;passing&quot; that reference to our conditional statements so it can be used in the calculation.\r\n\r\nSo it&#39;s basically saying &quot;for each `integer`, do this `-&gt;`.&quot;  Lambdas are a feature of Java that allows you to write cleaner and more readable code.  They are &quot;shortcuts&quot; to longer code, if you will.\r\n\r\nHere is the exact same process, but written out without using the lambda shortcut:\r\n\r\n    list.removeIf(new Predicate&lt;Integer&gt;() {\r\n        @Override\r\n        public boolean test(Integer integer) {\r\n             return integer % input == 0 &amp;&amp; integer != input;\r\n        }\r\n    });\r\n\r\nThe `integer % input == 0` returns `true` if `integer &#247; input` leaves no remainder (ie: it is a multiple of the `input`).\r\n\r\nGiven your code, our final output for the input of `5` is this:\r\n\r\n    [1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 13, 14, 16, 17, 18, 19, 21, 22, 23, 24, 26, 27, 28, 29, 31, 32, 33, 34, 36, 37, 38, 39, 41, 42, 43, 44, 46, 47, 48, 49, 51, 52, 53, 54, 56, 57, 58, 59, 61, 62, 63, 64, 66, 67, 68, 69, 71, 72, 73, 74, 76, 77, 78, 79, 81, 82, 83, 84, 86, 87, 88, 89, 91, 92, 93, 94, 96, 97, 98, 99]","title":"Remove multiple numbers from an ArrayList","body":"<p>This may be a bit more advanced than your class wants you to go right now, but the <code>List</code> interface provides a <code>removeIf()</code> method that allows you to remove all elements of the <code>List</code> that match a certain condition.</p>\n<p>Since you want to remove all numbers that are multiples of your input, you would just check for that using the modulo operator: <code>%</code>.</p>\n<p>We add a second condition to account for the original <code>input</code> so it doesn't also get removed:</p>\n<pre><code>list.removeIf(integer -&gt; (integer % input == 0 &amp;&amp; integer != input));\n</code></pre>\n<p>The odd syntax (<code>integer -&gt;</code>) is what is called a <em>lambda expression</em>. They are a fairly advanced topic, but essentially what is happening is <code>integer</code> is the item in the <code>List</code>. We are &quot;passing&quot; that reference to our conditional statements so it can be used in the calculation.</p>\n<p>So it's basically saying &quot;for each <code>integer</code>, do this <code>-&gt;</code>.&quot;  Lambdas are a feature of Java that allows you to write cleaner and more readable code.  They are &quot;shortcuts&quot; to longer code, if you will.</p>\n<p>Here is the exact same process, but written out without using the lambda shortcut:</p>\n<pre><code>list.removeIf(new Predicate&lt;Integer&gt;() {\n    @Override\n    public boolean test(Integer integer) {\n         return integer % input == 0 &amp;&amp; integer != input;\n    }\n});\n</code></pre>\n<p>The <code>integer % input == 0</code> returns <code>true</code> if <code>integer ÷ input</code> leaves no remainder (ie: it is a multiple of the <code>input</code>).</p>\n<p>Given your code, our final output for the input of <code>5</code> is this:</p>\n<pre><code>[1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 13, 14, 16, 17, 18, 19, 21, 22, 23, 24, 26, 27, 28, 29, 31, 32, 33, 34, 36, 37, 38, 39, 41, 42, 43, 44, 46, 47, 48, 49, 51, 52, 53, 54, 56, 57, 58, 59, 61, 62, 63, 64, 66, 67, 68, 69, 71, 72, 73, 74, 76, 77, 78, 79, 81, 82, 83, 84, 86, 87, 88, 89, 91, 92, 93, 94, 96, 97, 98, 99]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2465829,"reputation":11057,"user_id":2148953,"accept_rate":96,"display_name":"aran"},"score":0,"creation_date":1615395843,"post_id":66569346,"comment_id":117679351,"body_markdown":"still upvoted it, liked it from the beginning","body":"still upvoted it, liked it from the beginning"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1615395857,"post_id":66569346,"comment_id":117679357,"body_markdown":"@user15358848 as per my answer, it is not efficient, but it’s simple and gets the job done.","body":"@user15358848 as per my answer, it is not efficient, but it’s simple and gets the job done."},{"owner":{"account_id":2465829,"reputation":11057,"user_id":2148953,"accept_rate":96,"display_name":"aran"},"score":0,"creation_date":1615396550,"post_id":66569346,"comment_id":117679730,"body_markdown":"I personally think it&#39;s a pretty clever solution, I like it, really, and I&#39;m not drunk(yet)","body":"I personally think it&#39;s a pretty clever solution, I like it, really, and I&#39;m not drunk(yet)"}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":3,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1615395796,"creation_date":1615395236,"answer_id":66569346,"question_id":66568745,"body_markdown":"Not efficient, but closest to your intention and easy to understand:\r\n\r\n    for (Integer i = input * 2; i &lt;= 100; i += input) {\r\n        list.remove(i);\r\n    }\r\n\r\nNote use of `Integer` for the loop variable instead of `int`. The `remove()` method comes in 2 flavours, and we don’t want the `int` version which removes the item at an *index*.","title":"Remove multiple numbers from an ArrayList","body":"<p>Not efficient, but closest to your intention and easy to understand:</p>\n<pre><code>for (Integer i = input * 2; i &lt;= 100; i += input) {\n    list.remove(i);\n}\n</code></pre>\n<p>Note use of <code>Integer</code> for the loop variable instead of <code>int</code>. The <code>remove()</code> method comes in 2 flavours, and we don’t want the <code>int</code> version which removes the item at an <em>index</em>.</p>\n"},{"comments":[{"owner":{"account_id":19171006,"reputation":716,"user_id":14004764,"display_name":"Syed Mohib Uddin"},"score":0,"creation_date":1615396656,"post_id":66569471,"comment_id":117679784,"body_markdown":"Edited can check now","body":"Edited can check now"}],"tags":[],"owner":{"account_id":19171006,"reputation":716,"user_id":14004764,"display_name":"Syed Mohib Uddin"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622427255,"creation_date":1615395648,"answer_id":66569471,"question_id":66568745,"body_markdown":"Can check it efficient way no if condition required.\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n    Scanner sc = new Scanner(System.in);\r\n    ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n    ArrayList&lt;Integer&gt; res = new ArrayList&lt;&gt;();\r\n\r\n    for (int i = 1; i &lt;= 100; i++) {\r\n        list.add(i);\r\n    }\r\n\r\n    System.out.println(&quot;Please enter a number&quot;);\r\n\r\n    final int input = sc.nextInt();\r\n\r\n    for (int i = input; i &lt;= 100; i += input) {\r\n        res.add(i);\r\n    }\r\n    System.out.println(res);\r\n}\r\n```\r\n","title":"Remove multiple numbers from an ArrayList","body":"<p>Can check it efficient way no if condition required.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    Scanner sc = new Scanner(System.in);\n    ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n    ArrayList&lt;Integer&gt; res = new ArrayList&lt;&gt;();\n\n    for (int i = 1; i &lt;= 100; i++) {\n        list.add(i);\n    }\n\n    System.out.println(&quot;Please enter a number&quot;);\n\n    final int input = sc.nextInt();\n\n    for (int i = input; i &lt;= 100; i += input) {\n        res.add(i);\n    }\n    System.out.println(res);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16027095,"reputation":23,"user_id":11567067,"display_name":"game pirate"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677513463,"creation_date":1677513463,"answer_id":75582732,"question_id":66568745,"body_markdown":"I find below approch more easy:\r\n\r\n    public static void main(String[] args) {\r\n            Scanner sc = new Scanner(System.in);\r\n            ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n    \r\n            for (int i = 1; i &lt;= 100; i++) {\r\n                list.add(i);\r\n            }\r\n            System.out.println(list);\r\n            System.out.println(&quot;Next part of the exercise\\n_________________________&quot;);\r\n            System.out.println(&quot;Please enter a number&quot;);\r\n            final int input = sc.nextInt();\r\n    \r\n         \tfor(int i=0; i&lt;list.size(); i++){\r\n                //if element is multiple of input\r\n            \tif(list.get(i)%input==0){\r\n                    //remove the element\r\n                \tlist.remove(i);\r\n                    //reduce iteration, so it checks the next element -&gt; as comes to removed element position\r\n    \t\t\t\ti--;\r\n            \t}\r\n        \t}\r\n            System.out.println(list);\r\n        }","title":"Remove multiple numbers from an ArrayList","body":"<p>I find below approch more easy:</p>\n<pre><code>public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n\n        for (int i = 1; i &lt;= 100; i++) {\n            list.add(i);\n        }\n        System.out.println(list);\n        System.out.println(&quot;Next part of the exercise\\n_________________________&quot;);\n        System.out.println(&quot;Please enter a number&quot;);\n        final int input = sc.nextInt();\n\n        for(int i=0; i&lt;list.size(); i++){\n            //if element is multiple of input\n            if(list.get(i)%input==0){\n                //remove the element\n                list.remove(i);\n                //reduce iteration, so it checks the next element -&gt; as comes to removed element position\n                i--;\n            }\n        }\n        System.out.println(list);\n    }\n</code></pre>\n"}],"owner":{"account_id":20921066,"reputation":15,"user_id":15369659,"display_name":"Malthe22"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1283,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":66568939,"answer_count":7,"score":0,"last_activity_date":1677513463,"creation_date":1615393089,"question_id":66568745,"body_markdown":"I&#39;ve got this exercise &quot;**Write a program that constructs an ArrayList containing the numbers 1 to 100 and prints them out. Then ask the user for a number, and remove all multiples of that number (except for the number itself) from the list, and print the list out again. For example, if the user selects 5, it will remove 10, 15, 20, 25, 30, etc from the list.&quot;**\r\n\r\nAnd I can&#39;t seem to be done with the second part (removing all multiples) \r\n\r\nSo far this is what I&#39;ve got:\r\n```java\r\npackage ArrayList1To100;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Scanner;\r\n\r\npublic class OneToHundreed {\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n        ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n\r\n        for (int i = 1; i &lt;= 100; i++) {\r\n            list.add(i);\r\n        }\r\n        System.out.println(list);\r\n        System.out.println(&quot;Next part of the exercise\\n_________________________&quot;);\r\n        System.out.println(&quot;Please enter a number&quot;);\r\n        final int input = sc.nextInt();\r\n\r\n        int i = 2;\r\n        int x = i * input;\r\n        while (list.contains(x)) {\r\n            list.remove(x - 1);\r\n        }\r\n        System.out.println(list);\r\n\r\n    }\r\n}\r\n```\r\nI get that my remove part is flawed as it only removes a single number. \r\nI&#39;ve tried with an if statement, and a while. But I can&#39;t seem to find the connection.\r\n","title":"Remove multiple numbers from an ArrayList","body":"<p>I've got this exercise &quot;<strong>Write a program that constructs an ArrayList containing the numbers 1 to 100 and prints them out. Then ask the user for a number, and remove all multiples of that number (except for the number itself) from the list, and print the list out again. For example, if the user selects 5, it will remove 10, 15, 20, 25, 30, etc from the list.&quot;</strong></p>\n<p>And I can't seem to be done with the second part (removing all multiples)</p>\n<p>So far this is what I've got:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package ArrayList1To100;\n\nimport java.util.ArrayList;\nimport java.util.Scanner;\n\npublic class OneToHundreed {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n\n        for (int i = 1; i &lt;= 100; i++) {\n            list.add(i);\n        }\n        System.out.println(list);\n        System.out.println(&quot;Next part of the exercise\\n_________________________&quot;);\n        System.out.println(&quot;Please enter a number&quot;);\n        final int input = sc.nextInt();\n\n        int i = 2;\n        int x = i * input;\n        while (list.contains(x)) {\n            list.remove(x - 1);\n        }\n        System.out.println(list);\n\n    }\n}\n</code></pre>\n<p>I get that my remove part is flawed as it only removes a single number.\nI've tried with an if statement, and a while. But I can't seem to find the connection.</p>\n"},{"tags":["java","spring","jpa"],"comments":[{"owner":{"account_id":1041463,"reputation":3845,"user_id":1047418,"display_name":"Torben"},"score":3,"creation_date":1677482445,"post_id":75577598,"comment_id":133339087,"body_markdown":"Run it with a debugger and see what it gets in the constructor. You&#39;re defining an &quot;AllArgsConstructor&quot; so whoever uses that gets to overwrite the value you set to &quot;children&quot; in the default constructor. This is the evil of Lombok: it gives you hidden code that works in the background without you even realizing it. In my opinion, you shouldn&#39;t be using Lombok for any business logic. Logging and toString methods are fine, but leave it there and you will shoot your own foot way fewer times. If you need to generate boilerplate code, use the code generation features of your IDE.","body":"Run it with a debugger and see what it gets in the constructor. You&#39;re defining an &quot;AllArgsConstructor&quot; so whoever uses that gets to overwrite the value you set to &quot;children&quot; in the default constructor. This is the evil of Lombok: it gives you hidden code that works in the background without you even realizing it. In my opinion, you shouldn&#39;t be using Lombok for any business logic. Logging and toString methods are fine, but leave it there and you will shoot your own foot way fewer times. If you need to generate boilerplate code, use the code generation features of your IDE."},{"owner":{"account_id":1041463,"reputation":3845,"user_id":1047418,"display_name":"Torben"},"score":0,"creation_date":1677482765,"post_id":75577598,"comment_id":133339144,"body_markdown":"But if you&#39;re adamant on keeping the AllArgsConstructor annotation, you should put a NonNull annotation on the children-field. Then Lombok will add a null-checkt to it.","body":"But if you&#39;re adamant on keeping the AllArgsConstructor annotation, you should put a NonNull annotation on the children-field. Then Lombok will add a null-checkt to it."},{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":1,"creation_date":1677487842,"post_id":75577598,"comment_id":133340279,"body_markdown":"If the object you&#39;re trying to call your addChild-method on is retrieved from the db has null in the children-field, I believe that will replace your initialization. You might need to initialize the field in the add child-method, i.e. something like: `public void addChild(Category child) {if (child == null) {child = new ArrayList&lt;&gt;();} children.add(child);}`","body":"If the object you&#39;re trying to call your addChild-method on is retrieved from the db has null in the children-field, I believe that will replace your initialization. You might need to initialize the field in the add child-method, i.e. something like: <code>public void addChild(Category child) {if (child == null) {child = new ArrayList&lt;&gt;();} children.add(child);}</code>"},{"owner":{"account_id":26185931,"reputation":386,"user_id":19868455,"display_name":"Pierre Demeestere"},"score":0,"creation_date":1677517226,"post_id":75577598,"comment_id":133349202,"body_markdown":"If the `category` instance is returned by any hibernate query, the `children` collection is never null (even if no child is found in database) .Usually we set `children = new ArrayList&lt;&gt;()` only to make sure that when we do intently `new Category()`, the collection is not null.","body":"If the <code>category</code> instance is returned by any hibernate query, the <code>children</code> collection is never null (even if no child is found in database) .Usually we set <code>children = new ArrayList&lt;&gt;()</code> only to make sure that when we do intently <code>new Category()</code>, the collection is not null."}],"answers":[{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677513387,"creation_date":1677513387,"answer_id":75582714,"question_id":75577598,"body_markdown":"I suspect you&#39;re using the Builder to construct an instance of Category.  In doing this, the builder is overriding the children collection with null because you aren&#39;t passing it in the builder chain.\r\n\r\ne.g.\r\n\r\n    Category.builder().build(); // will return an instance of Category with null children collection\r\n\r\n    new Category(); // will return an instance of Category with children set to an empty ArrayList.","title":"new ArrayList&lt;&gt;().add() NPE","body":"<p>I suspect you're using the Builder to construct an instance of Category.  In doing this, the builder is overriding the children collection with null because you aren't passing it in the builder chain.</p>\n<p>e.g.</p>\n<pre><code>Category.builder().build(); // will return an instance of Category with null children collection\n\nnew Category(); // will return an instance of Category with children set to an empty ArrayList.\n</code></pre>\n"}],"owner":{"account_id":22575486,"reputation":1,"user_id":16761052,"display_name":"BigFoot"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":544,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677513387,"creation_date":1677481801,"question_id":75577598,"body_markdown":"```Java\r\n@Entity\r\n@Getter\r\n@Builder\r\n@ToString\r\n@AllArgsConstructor\r\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\r\npublic class Category {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;category_id&quot;)\r\n    private Long id;\r\n\r\n    private String name;\r\n    private Long depth;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;parent&quot;)\r\n    private Category parent;\r\n\r\n    @OneToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;store_id&quot;)\r\n    private Store store;\r\n\r\n    @OneToMany(mappedBy = &quot;parent&quot;)\r\n    private List&lt;Category&gt; children = new ArrayList&lt;&gt;();\r\n\r\n    public void addChild(Category child) {\r\n        children.add(child);\r\n    }\r\n}\r\n```\r\n\r\nCannot invoke &quot;java.util.List.add(Object)&quot; because &quot;this.children&quot; is null\r\n\r\nwhen I try `parentCategory.addChild(childCategory)`\r\n\r\nI initialized it with an empty list, but why does it happen?\r\n\r\nIs the empty list null?\r\n\r\nI want to know the correct way to initialize.\r\n","title":"new ArrayList&lt;&gt;().add() NPE","body":"<pre><code>@Entity\n@Getter\n@Builder\n@ToString\n@AllArgsConstructor\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\npublic class Category {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;category_id&quot;)\n    private Long id;\n\n    private String name;\n    private Long depth;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;parent&quot;)\n    private Category parent;\n\n    @OneToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;store_id&quot;)\n    private Store store;\n\n    @OneToMany(mappedBy = &quot;parent&quot;)\n    private List&lt;Category&gt; children = new ArrayList&lt;&gt;();\n\n    public void addChild(Category child) {\n        children.add(child);\n    }\n}\n</code></pre>\n<p>Cannot invoke &quot;java.util.List.add(Object)&quot; because &quot;this.children&quot; is null</p>\n<p>when I try <code>parentCategory.addChild(childCategory)</code></p>\n<p>I initialized it with an empty list, but why does it happen?</p>\n<p>Is the empty list null?</p>\n<p>I want to know the correct way to initialize.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1677512208,"post_id":75582440,"comment_id":133347461,"body_markdown":"And your controller looks like? What is it you are sending to the controller?","body":"And your controller looks like? What is it you are sending to the controller?"},{"owner":{"account_id":1615315,"reputation":7242,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"score":0,"creation_date":1677512329,"post_id":75582440,"comment_id":133347506,"body_markdown":"M. Deinum I added the controller","body":"M. Deinum I added the controller"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1677512405,"post_id":75582440,"comment_id":133347533,"body_markdown":"But you didn&#39;t add what you are sending to the controller. Also when you have such a large list of parameters use an object instead of separate parameters.","body":"But you didn&#39;t add what you are sending to the controller. Also when you have such a large list of parameters use an object instead of separate parameters."},{"owner":{"account_id":1615315,"reputation":7242,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"score":0,"creation_date":1677512634,"post_id":75582440,"comment_id":133347599,"body_markdown":"I am sending vie URL all parameters. I create a class ModelMocker and I produce a mock value for testing. &quot;use an object instead of separate parameters&quot; do you have an example please? thanks in advance","body":"I am sending vie URL all parameters. I create a class ModelMocker and I produce a mock value for testing. &quot;use an object instead of separate parameters&quot; do you have an example please? thanks in advance"},{"owner":{"account_id":22881048,"reputation":231,"user_id":17022635,"display_name":"siarhei987"},"score":0,"creation_date":1677514479,"post_id":75582440,"comment_id":133348272,"body_markdown":"source code from a baeldung example has an additional line in a configuration file `ApplicationConversionService.configure(registry);` [link](https://github.com/eugenp/tutorials/blob/57209b45d2f561d048553e53fa9c411b74c0e321/spring-boot-modules/spring-boot-request-params/src/main/java/com/baeldung/enummapping/config/EnumMappingConfig.java#L14) Maybe adding one could help.","body":"source code from a baeldung example has an additional line in a configuration file <code>ApplicationConversionService.configure(registry);</code> <a href=\"https://github.com/eugenp/tutorials/blob/57209b45d2f561d048553e53fa9c411b74c0e321/spring-boot-modules/spring-boot-request-params/src/main/java/com/baeldung/enummapping/config/EnumMappingConfig.java#L14\" rel=\"nofollow noreferrer\">link</a> Maybe adding one could help."},{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1677520120,"post_id":75582440,"comment_id":133350060,"body_markdown":"You could define a wrapper class containing your enum, converting your json to it and adding the `JsonAlias(&quot;baseline&quot;)` annotation  to `BASELINE`.","body":"You could define a wrapper class containing your enum, converting your json to it and adding the <code>JsonAlias(&quot;baseline&quot;)</code> annotation  to <code>BASELINE</code>."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1677569698,"post_id":75582440,"comment_id":133358816,"body_markdown":"You can just put the object in the method instead of the parameters, Spring will automatically do the binding to object parameters. So instead of the full list of parameters add `@ModelAttribute ModelMocker modelMocker`.","body":"You can just put the object in the method instead of the parameters, Spring will automatically do the binding to object parameters. So instead of the full list of parameters add <code>@ModelAttribute ModelMocker modelMocker</code>."}],"owner":{"account_id":1615315,"reputation":7242,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":242,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677513172,"creation_date":1677511841,"question_id":75582440,"body_markdown":"I have an Enum class and I would like to use the lowercase (i.e., case insensitive) in the URL call of the Get:\r\n\r\n    package org.crea.w4ag_mock.mocker;\r\n    \r\n    import com.fasterxml.jackson.annotation.JsonProperty;\r\n    \r\n    public enum TimeFramesEnum {\r\n    \r\n        /*\r\n        baseline = BASELINE\r\n        period2_2040 = PERIOD2_2040\r\n        period3_2070 = PERIOD2_2070\r\n        */\r\n    \r\n        BASELINE,\r\n        PERIOD2_2040,\r\n        PERIOD2_2070\r\n    }\r\n\r\nI have tried various examples but none without useful result. \r\n\r\n - [https://www.baeldung.com/spring-boot-enum-mapping][1]\r\n - [https://baeldung3.rssing.com/chan-58647577/all_p119.html][2]\r\n - [https://vianneyfaivre.com/tech/spring-boot-enum-as-parameter-ignore-case][3]\r\n - [https://stackoverflow.com/questions/71527893/how-to-make-enum-parameter-lowercase-in-springboot-swagger][4]\r\n\r\nEach time I get the following error:\r\n\r\n    {\r\n        &quot;timestamp&quot;: &quot;2023-02-27T15:22:06.493+00:00&quot;,\r\n        &quot;status&quot;: 400,\r\n        &quot;error&quot;: &quot;Bad Request&quot;,\r\n        &quot;message&quot;: &quot;Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;org.crea.w4ag_mock.mocker.TimeFramesEnum&#39;; Failed to convert from type [java.lang.String] to type [@org.springframework.web.bind.annotation.RequestParam org.crea.w4ag_mock.mocker.TimeFramesEnum] for value &#39;baseline&#39;&quot;,\r\n        &quot;path&quot;: &quot;/mock&quot;\r\n    }\r\n\r\nI followed the example of creating myself a custom converter and adding it to the registry via the configuration:\r\n\r\n\r\n    package org.crea.w4ag_mock.converter;\r\n    import org.apache.commons.lang3.EnumUtils;\r\n    import org.apache.commons.lang3.StringUtils;\r\n    import org.crea.w4ag_mock.mocker.TimeFramesEnum;\r\n    import org.springframework.core.convert.converter.Converter;\r\n    \r\n    public class StringToTimeFramesConverter implements Converter&lt;String, TimeFramesEnum&gt; {\r\n        @Override\r\n        public TimeFramesEnum convert(String source){\r\n            if (StringUtils.isBlank(source)) {\r\n                return null;\r\n            }\r\n            return EnumUtils.getEnum(TimeFramesEnum.class, source.toUpperCase());\r\n        }\r\n    \r\n    }\r\n\r\nconfiguration\r\n\r\n    package org.crea.w4ag_mock.config;\r\n    import org.crea.w4ag_mock.converter.StringToTimeFramesConverter;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.format.FormatterRegistry;\r\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n    \r\n    @Configuration\r\n    public class EnumMappingConfig implements WebMvcConfigurer {\r\n        @Override\r\n        public void addFormatters(FormatterRegistry registry){\r\n            registry.addConverter(new StringToTimeFramesConverter());\r\n        }\r\n    }\r\n\r\n\r\nMy RestController is:\r\n\r\n    package org.crea.w4ag_mock;\r\n    import org.crea.w4ag_mock.mocker.*;\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RequestParam;\r\n    import org.springframework.web.bind.annotation.ResponseBody;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    @SpringBootApplication\r\n    @RestController\r\n    public class Water4AgriFoodMockerApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(Water4AgriFoodMockerApplication.class, args);\r\n    \r\n    \t}\r\n    \r\n    \t@GetMapping(&quot;mock&quot;)\r\n    \t@ResponseBody\r\n    \tpublic ResponseEntity&lt;ModelMocker&gt; getMock(\r\n    \t\t\t@RequestParam(required = true) String idName,\r\n    \t\t\t@RequestParam(required = true) String idConfiguration,\r\n    \t\t\t@RequestParam(required = true) String location,\r\n    \t\t\t@RequestParam(required = true) String startTime,\r\n    \t\t\t@RequestParam(name=&quot;timeFrames&quot;, required = true) TimeFramesEnum timeFrames,\r\n    \t\t\t@RequestParam(required = true) GcmsEnum gcms,\r\n    \t\t\t@RequestParam(required = true) RcpsEnum rcps,\r\n    \t\t\t@RequestParam(required = true) String idCrop,\r\n    \t\t\t@RequestParam(required = true) String idVariety,\r\n    \t\t\t@RequestParam(required = true) String idRotation\r\n    \t){\r\n    \t\tModelMocker modelMocker = ModelMocker.builder()\r\n    \t\t\t\t.idName(idName)\r\n    \t\t\t\t.idConfiguration(idConfiguration)\r\n    \t\t\t\t.location(location)\r\n    \t\t\t\t.startTime(startTime)\r\n    \t\t\t\t.timeFrames(timeFrames)\r\n    \t\t\t\t.gcms(gcms)\r\n    \t\t\t\t.rcps(rcps)\r\n    \t\t\t\t.idCrop(idCrop)\r\n    \t\t\t\t.idVariety(idVariety)\r\n    \t\t\t\t.idRotation(idRotation)\r\n    \t\t\t\t.developmentStage(ModelMockerRandomValueGenerator.getDevelopmentStageValue())\r\n    \t\t\t\t.potentialAboveGroundBiomass(ModelMockerRandomValueGenerator.getPotentialAboveGroundBiomassValue())\r\n    \t\t\t\t.potentialYield(ModelMockerRandomValueGenerator.getPotentialYieldValue())\r\n    \t\t\t\t.potentialLAI(ModelMockerRandomValueGenerator.getPotentialLAIValue())\r\n    \t\t\t\t.waterLimitedAboveGroundBiomass(ModelMockerRandomValueGenerator.getWaterLimitedAboveGroundBiomassValue())\r\n    \t\t\t\t.waterLimitedYield(ModelMockerRandomValueGenerator.getPotentialYieldValue())\r\n    \t\t\t\t.waterLimitedLAI(ModelMockerRandomValueGenerator.getWaterLimitedLAIValue())\r\n    \t\t\t\t.build();\r\n    \t\treturn ResponseEntity.ok(modelMocker);\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-boot-enum-mapping\r\n  [2]: https://baeldung3.rssing.com/chan-58647577/all_p119.html\r\n  [3]: https://vianneyfaivre.com/tech/spring-boot-enum-as-parameter-ignore-case\r\n  [4]: https://stackoverflow.com/questions/71527893/how-to-make-enum-parameter-lowercase-in-springboot-swagger\r\n  [5]: https://i.stack.imgur.com/wwCAP.png","title":"enum case insensitive in spring boot 3.0.0+","body":"<p>I have an Enum class and I would like to use the lowercase (i.e., case insensitive) in the URL call of the Get:</p>\n<pre><code>package org.crea.w4ag_mock.mocker;\n\nimport com.fasterxml.jackson.annotation.JsonProperty;\n\npublic enum TimeFramesEnum {\n\n    /*\n    baseline = BASELINE\n    period2_2040 = PERIOD2_2040\n    period3_2070 = PERIOD2_2070\n    */\n\n    BASELINE,\n    PERIOD2_2040,\n    PERIOD2_2070\n}\n</code></pre>\n<p>I have tried various examples but none without useful result.</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/spring-boot-enum-mapping\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-enum-mapping</a></li>\n<li><a href=\"https://baeldung3.rssing.com/chan-58647577/all_p119.html\" rel=\"nofollow noreferrer\">https://baeldung3.rssing.com/chan-58647577/all_p119.html</a></li>\n<li><a href=\"https://vianneyfaivre.com/tech/spring-boot-enum-as-parameter-ignore-case\" rel=\"nofollow noreferrer\">https://vianneyfaivre.com/tech/spring-boot-enum-as-parameter-ignore-case</a></li>\n<li><a href=\"https://stackoverflow.com/questions/71527893/how-to-make-enum-parameter-lowercase-in-springboot-swagger\">How to make enum parameter lowercase in SpringBoot/Swagger?</a></li>\n</ul>\n<p>Each time I get the following error:</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2023-02-27T15:22:06.493+00:00&quot;,\n    &quot;status&quot;: 400,\n    &quot;error&quot;: &quot;Bad Request&quot;,\n    &quot;message&quot;: &quot;Failed to convert value of type 'java.lang.String' to required type 'org.crea.w4ag_mock.mocker.TimeFramesEnum'; Failed to convert from type [java.lang.String] to type [@org.springframework.web.bind.annotation.RequestParam org.crea.w4ag_mock.mocker.TimeFramesEnum] for value 'baseline'&quot;,\n    &quot;path&quot;: &quot;/mock&quot;\n}\n</code></pre>\n<p>I followed the example of creating myself a custom converter and adding it to the registry via the configuration:</p>\n<pre><code>package org.crea.w4ag_mock.converter;\nimport org.apache.commons.lang3.EnumUtils;\nimport org.apache.commons.lang3.StringUtils;\nimport org.crea.w4ag_mock.mocker.TimeFramesEnum;\nimport org.springframework.core.convert.converter.Converter;\n\npublic class StringToTimeFramesConverter implements Converter&lt;String, TimeFramesEnum&gt; {\n    @Override\n    public TimeFramesEnum convert(String source){\n        if (StringUtils.isBlank(source)) {\n            return null;\n        }\n        return EnumUtils.getEnum(TimeFramesEnum.class, source.toUpperCase());\n    }\n\n}\n</code></pre>\n<p>configuration</p>\n<pre><code>package org.crea.w4ag_mock.config;\nimport org.crea.w4ag_mock.converter.StringToTimeFramesConverter;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.format.FormatterRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\npublic class EnumMappingConfig implements WebMvcConfigurer {\n    @Override\n    public void addFormatters(FormatterRegistry registry){\n        registry.addConverter(new StringToTimeFramesConverter());\n    }\n}\n</code></pre>\n<p>My RestController is:</p>\n<pre><code>package org.crea.w4ag_mock;\nimport org.crea.w4ag_mock.mocker.*;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.ResponseBody;\nimport org.springframework.web.bind.annotation.RestController;\n\n@SpringBootApplication\n@RestController\npublic class Water4AgriFoodMockerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Water4AgriFoodMockerApplication.class, args);\n\n    }\n\n    @GetMapping(&quot;mock&quot;)\n    @ResponseBody\n    public ResponseEntity&lt;ModelMocker&gt; getMock(\n            @RequestParam(required = true) String idName,\n            @RequestParam(required = true) String idConfiguration,\n            @RequestParam(required = true) String location,\n            @RequestParam(required = true) String startTime,\n            @RequestParam(name=&quot;timeFrames&quot;, required = true) TimeFramesEnum timeFrames,\n            @RequestParam(required = true) GcmsEnum gcms,\n            @RequestParam(required = true) RcpsEnum rcps,\n            @RequestParam(required = true) String idCrop,\n            @RequestParam(required = true) String idVariety,\n            @RequestParam(required = true) String idRotation\n    ){\n        ModelMocker modelMocker = ModelMocker.builder()\n                .idName(idName)\n                .idConfiguration(idConfiguration)\n                .location(location)\n                .startTime(startTime)\n                .timeFrames(timeFrames)\n                .gcms(gcms)\n                .rcps(rcps)\n                .idCrop(idCrop)\n                .idVariety(idVariety)\n                .idRotation(idRotation)\n                .developmentStage(ModelMockerRandomValueGenerator.getDevelopmentStageValue())\n                .potentialAboveGroundBiomass(ModelMockerRandomValueGenerator.getPotentialAboveGroundBiomassValue())\n                .potentialYield(ModelMockerRandomValueGenerator.getPotentialYieldValue())\n                .potentialLAI(ModelMockerRandomValueGenerator.getPotentialLAIValue())\n                .waterLimitedAboveGroundBiomass(ModelMockerRandomValueGenerator.getWaterLimitedAboveGroundBiomassValue())\n                .waterLimitedYield(ModelMockerRandomValueGenerator.getPotentialYieldValue())\n                .waterLimitedLAI(ModelMockerRandomValueGenerator.getWaterLimitedLAIValue())\n                .build();\n        return ResponseEntity.ok(modelMocker);\n    }\n\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/wwCAP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wwCAP.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-boot","environment-variables","development-environment"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1677510016,"post_id":75581979,"comment_id":133346602,"body_markdown":"add `--spring.profiles.active=&lt;your-profile&gt;` as a program argument. You can use this as well when launching your app through `java -jar &lt;your.jar&gt; --spring.profiles.active=&lt;your-profile&gt;`. This is also explained in the spring boot documentation.","body":"add <code>--spring.profiles.active=&lt;your-profile&gt;</code> as a program argument. You can use this as well when launching your app through <code>java -jar &lt;your.jar&gt; --spring.profiles.active=&lt;your-profile&gt;</code>. This is also explained in the spring boot documentation."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677510527,"post_id":75581979,"comment_id":133346803,"body_markdown":"I also use Environment variable of Intellij in the run configuration. But could you please explain a little bit more how the other things should be  used based on this scenario? For example, if I activate the environment when running the app, is the the only way? Or what is the usage of `spring: profiles: active: production` ? or `.env` file?","body":"I also use Environment variable of Intellij in the run configuration. But could you please explain a little bit more how the other things should be  used based on this scenario? For example, if I activate the environment when running the app, is the the only way? Or what is the usage of <code>spring: profiles: active: production</code> ? or <code>.env</code> file?"}],"answers":[{"comments":[{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677511853,"post_id":75582327,"comment_id":133347301,"body_markdown":"Very good explanations, thanks a lot and voted+. In this case, I remove `spring.profiles.active` section and will use 3 properties files with `--spring.profiles.active` argument. At this point could you pls clarify me for these points? &gt;&gt;&gt;","body":"Very good explanations, thanks a lot and voted+. In this case, I remove <code>spring.profiles.active</code> section and will use 3 properties files with <code>--spring.profiles.active</code> argument. At this point could you pls clarify me for these points? &gt;&gt;&gt;"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677512039,"post_id":75582327,"comment_id":133347389,"body_markdown":"**1.** Do you have any idea about the overrides between `application.yml` and environment specific `application.yml`? I just thought  \tconcurrent props in 2 files, but maybe I should avoid using any  \tconcurrent props in these files, right?","body":"<b>1.</b> Do you have any idea about the overrides between <code>application.yml</code> and environment specific <code>application.yml</code>? I just thought  \tconcurrent props in 2 files, but maybe I should avoid using any  \tconcurrent props in these files, right?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677512143,"post_id":75582327,"comment_id":133347429,"body_markdown":"**2.** Do you mean that I should also remove all of the `.env` files from my projects? If so, when I need to use an environment variable, should I use them via run command, etc?","body":"<b>2.</b> Do you mean that I should also remove all of the <code>.env</code> files from my projects? If so, when I need to use an environment variable, should I use them via run command, etc?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677512325,"post_id":75582327,"comment_id":133347504,"body_markdown":"**3.** The last issue is securing passwords and secret data on  `application.yml` and `docker-compose.yml` files. I searched many things but some libraries are not working properly, some of them is not suitable for `docker-compose.yml`. So, without Kubernetes, how can I secure parameters in these files for my Spring Boot apps? Currently I use environment variables and say the clients who use or test the app to set their environment variables via .env file or IntelliJ, but ı think there would be more proper ways :(","body":"<b>3.</b> The last issue is securing passwords and secret data on  <code>application.yml</code> and <code>docker-compose.yml</code> files. I searched many things but some libraries are not working properly, some of them is not suitable for <code>docker-compose.yml</code>. So, without Kubernetes, how can I secure parameters in these files for my Spring Boot apps? Currently I use environment variables and say the clients who use or test the app to set their environment variables via .env file or IntelliJ, but ı think there would be more proper ways :("}],"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677512779,"creation_date":1677511226,"answer_id":75582327,"question_id":75581979,"body_markdown":"1) Yes, you can use `spring.profiles.active`, but you probably shouldn&#39;t, because you specify this in `application.yml` which should be profile-agnostic. Instead as they pointed out in comments it&#39;d be better to rely on e.g. `--spring.profiles.active=dev` which would tell Spring Boot to use properties from both `application.yml` and `application-dev.yml`.\r\n\r\n2) I&#39;d not use this file at all and rely on `application.yml`, because of two main reasons:\r\n - you can run your application from Gradle, Maven, IntelliJ, command line and for all those cases you need to handle environment variables in a different way\r\n - you can run your application on various OSes where environment variables are set up separately\r\n\r\nIf I&#39;d solve your issue with dev and prod environments I&#39;d create three files:\r\n- application.yml for props shared over all profiles\r\n- application-dev.yml for dev props\r\n- application-prod.yml for prod props\r\n\r\nThen I&#39;d switch between profiles by specifying --spring.profiles.active=dev|prod`\r\n\r\nP.S. As of your questions in comments:\r\n1) In case you specify a profile with --spring.profiles.active=dev` and there&#39;s a property e.g. `server.port` in both `application.yml` and `application-dev.yml` the value from `application-dev.yml` will be used. So you can override properties. It&#39;s a standard technique for overriding properties.\r\n2) Well, I don&#39;t know how you use the properties from `.env` files. Usually environment variables from OS level are accessed in Java using `System.getProperty(String)`. Moreover, some frameworks&#39; usage implies there&#39;s a certain property specified, e.g. Apache Spark usually needs `HADOOP_HOME`. So it might be dangerous to remove those `.env` files.\r\n3) For secrets you can use Vault. The idea is that instead of credentials or other sensitive data you specify a key for them and application uses this key to fetch secrets from vault at runtime. This allows to secure the data even if config files leak.","title":"Switching between dev and prod environments in Java / Spring Boot apps?","body":"<ol>\n<li><p>Yes, you can use <code>spring.profiles.active</code>, but you probably shouldn't, because you specify this in <code>application.yml</code> which should be profile-agnostic. Instead as they pointed out in comments it'd be better to rely on e.g. <code>--spring.profiles.active=dev</code> which would tell Spring Boot to use properties from both <code>application.yml</code> and <code>application-dev.yml</code>.</p>\n</li>\n<li><p>I'd not use this file at all and rely on <code>application.yml</code>, because of two main reasons:</p>\n</li>\n</ol>\n<ul>\n<li>you can run your application from Gradle, Maven, IntelliJ, command line and for all those cases you need to handle environment variables in a different way</li>\n<li>you can run your application on various OSes where environment variables are set up separately</li>\n</ul>\n<p>If I'd solve your issue with dev and prod environments I'd create three files:</p>\n<ul>\n<li>application.yml for props shared over all profiles</li>\n<li>application-dev.yml for dev props</li>\n<li>application-prod.yml for prod props</li>\n</ul>\n<p>Then I'd switch between profiles by specifying --spring.profiles.active=dev|prod`</p>\n<p>P.S. As of your questions in comments:</p>\n<ol>\n<li>In case you specify a profile with --spring.profiles.active=dev<code>and there's a property e.g.</code>server.port<code>in both</code>application.yml<code>and</code>application-dev.yml<code>the value from</code>application-dev.yml` will be used. So you can override properties. It's a standard technique for overriding properties.</li>\n<li>Well, I don't know how you use the properties from <code>.env</code> files. Usually environment variables from OS level are accessed in Java using <code>System.getProperty(String)</code>. Moreover, some frameworks' usage implies there's a certain property specified, e.g. Apache Spark usually needs <code>HADOOP_HOME</code>. So it might be dangerous to remove those <code>.env</code> files.</li>\n<li>For secrets you can use Vault. The idea is that instead of credentials or other sensitive data you specify a key for them and application uses this key to fetch secrets from vault at runtime. This allows to secure the data even if config files leak.</li>\n</ol>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1262,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1677512779,"creation_date":1677509450,"question_id":75581979,"body_markdown":"In my Spring Boot apps, I have just started to use different environment for development and get very confused about a proper switch steps and scenarios. \r\n\r\nThere are also some files that I could not totally understand as there are several conflicted information on the web about these files. \r\n\r\nCould you please clarify me about these issues below? \r\n\r\n**1)** As far as I know, we can set the environment from the following setting in application properties. Is that true? And is there any other way for to switch between environments?\r\n\r\n```\r\nspring:\r\n  profiles:\r\n    active: production\r\n```\r\n\r\n**2)** There is also another file called `.env` and I think there is also different versions e.g. `.env-dev`. As far as I know, it is used to define environment variables. But, for example when I run the app from IntelliJ, I am not sure if IntelliJ should read variables from it and use when running the app. How should I use this file?\r\n\r\nBased on these 2 issues, you can basically give an example scenario to setup dev and prod environment and switch between them. Any help would be appreciated. \r\n\r\n","title":"Switching between dev and prod environments in Java / Spring Boot apps?","body":"<p>In my Spring Boot apps, I have just started to use different environment for development and get very confused about a proper switch steps and scenarios.</p>\n<p>There are also some files that I could not totally understand as there are several conflicted information on the web about these files.</p>\n<p>Could you please clarify me about these issues below?</p>\n<p><strong>1)</strong> As far as I know, we can set the environment from the following setting in application properties. Is that true? And is there any other way for to switch between environments?</p>\n<pre><code>spring:\n  profiles:\n    active: production\n</code></pre>\n<p><strong>2)</strong> There is also another file called <code>.env</code> and I think there is also different versions e.g. <code>.env-dev</code>. As far as I know, it is used to define environment variables. But, for example when I run the app from IntelliJ, I am not sure if IntelliJ should read variables from it and use when running the app. How should I use this file?</p>\n<p>Based on these 2 issues, you can basically give an example scenario to setup dev and prod environment and switch between them. Any help would be appreciated.</p>\n"},{"tags":["java","spring-boot","spring-kafka","spring-cloud-stream","spring-cloud-stream-binder-kafka"],"answers":[{"comments":[{"owner":{"account_id":25192367,"reputation":55,"user_id":19032411,"display_name":"stakeika"},"score":0,"creation_date":1677512926,"post_id":75582519,"comment_id":133347700,"body_markdown":"Thank you! Is it possible to provide destination in java code, not yaml/application.properties? I work with 17 kafka topics in the project","body":"Thank you! Is it possible to provide destination in java code, not yaml/application.properties? I work with 17 kafka topics in the project"},{"owner":{"account_id":2365019,"reputation":5194,"user_id":2070861,"accept_rate":100,"display_name":"sobychacko"},"score":0,"creation_date":1677515944,"post_id":75582519,"comment_id":133348770,"body_markdown":"Can you elaborate on your use case? Maybe creating a new SO thread or filing an issue in the Spring Cloud Stream repository is better.","body":"Can you elaborate on your use case? Maybe creating a new SO thread or filing an issue in the Spring Cloud Stream repository is better."},{"owner":{"account_id":445335,"reputation":5970,"user_id":837717,"display_name":"Oleg Zhurakousky"},"score":0,"creation_date":1677517446,"post_id":75582519,"comment_id":133349278,"body_markdown":"Why would you want to couple your application so tightly to the infrastructure? The annotation-based programming modes was removed for exactly that reason?","body":"Why would you want to couple your application so tightly to the infrastructure? The annotation-based programming modes was removed for exactly that reason?"},{"owner":{"account_id":25192367,"reputation":55,"user_id":19032411,"display_name":"stakeika"},"score":0,"creation_date":1677519132,"post_id":75582519,"comment_id":133349778,"body_markdown":"@OlegZhurakousky That&#39;s how it&#39;s done in my team so far. Tight coupling to infrastructure is ok in my case. Topic names don&#39;t change","body":"@OlegZhurakousky That&#39;s how it&#39;s done in my team so far. Tight coupling to infrastructure is ok in my case. Topic names don&#39;t change"},{"owner":{"account_id":2365019,"reputation":5194,"user_id":2070861,"accept_rate":100,"display_name":"sobychacko"},"score":0,"creation_date":1677519571,"post_id":75582519,"comment_id":133349905,"body_markdown":"We need to understand better how you are using 17 topics in the application. If they are dynamic destinations, Spring Cloud Stream already has a solution. Please create a GH issue in the Spring Cloud Stream repo with more details and context around your use case, and we could triage and take it from there.","body":"We need to understand better how you are using 17 topics in the application. If they are dynamic destinations, Spring Cloud Stream already has a solution. Please create a GH issue in the Spring Cloud Stream repo with more details and context around your use case, and we could triage and take it from there."}],"tags":[],"owner":{"account_id":2365019,"reputation":5194,"user_id":2070861,"accept_rate":100,"display_name":"sobychacko"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677512360,"creation_date":1677512360,"answer_id":75582519,"question_id":75580132,"body_markdown":"`StreamListener` is removed from the framework in preference to using `java.util.function` based programming model. If you have both input and output, that can use a `Function`; if you only have input, then use `Consumer.` Your `StreamListener` above can be re-rewritten as you did above, but if you don&#39;t want to access the headers, you do not need to wrap your payload in a `Message.` For example,\r\n\r\n```\r\n@Bean\r\npublic Consumer&lt;Order&gt; consumeOrder() {\r\n    return order -&gt; {\r\n        // business logic\r\n    }\r\n}\r\n```\r\n\r\nYou can provide a destination using the pattern - `spring.cloud.stream.bindings.consumeOrder-in-0.destination`. ","title":"How to replace deprecated @StreamListener?","body":"<p><code>StreamListener</code> is removed from the framework in preference to using <code>java.util.function</code> based programming model. If you have both input and output, that can use a <code>Function</code>; if you only have input, then use <code>Consumer.</code> Your <code>StreamListener</code> above can be re-rewritten as you did above, but if you don't want to access the headers, you do not need to wrap your payload in a <code>Message.</code> For example,</p>\n<pre><code>@Bean\npublic Consumer&lt;Order&gt; consumeOrder() {\n    return order -&gt; {\n        // business logic\n    }\n}\n</code></pre>\n<p>You can provide a destination using the pattern - <code>spring.cloud.stream.bindings.consumeOrder-in-0.destination</code>.</p>\n"}],"owner":{"account_id":25192367,"reputation":55,"user_id":19032411,"display_name":"stakeika"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":894,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677512360,"creation_date":1677498764,"question_id":75580132,"body_markdown":"I&#39;m using Spring Boot and Kafka. Migrating to latest versions of Spring Boot and others, I encountered following issue: `@StreamListener` is deprecated and removed from the library. I have a topic `my_topic` and read from it as in example below:\r\n\r\n    public class OrderListener {\r\n        @StreamListener(&quot;my_topic&quot;)\r\n        public void consumeOrder(Order order) {\r\n            // business logic\r\n        }\r\n    }\r\n\r\nIn documentation it is advised to use functional programming model. How does it look like? I found this code sample:\r\n\r\n    @Bean\r\n    public Consumer&lt;Message&lt;Order&gt;&gt; consumeOrder() {\r\n        return msg -&gt; {\r\n            // to get header - msg.getHeaders().get(key, valueType);\r\n        }\r\n    }\r\n\r\nStill, it&#39;s quite verbose, I like previous approach (`@StreamListener`). Is there any short modern way to write it?","title":"How to replace deprecated @StreamListener?","body":"<p>I'm using Spring Boot and Kafka. Migrating to latest versions of Spring Boot and others, I encountered following issue: <code>@StreamListener</code> is deprecated and removed from the library. I have a topic <code>my_topic</code> and read from it as in example below:</p>\n<pre><code>public class OrderListener {\n    @StreamListener(&quot;my_topic&quot;)\n    public void consumeOrder(Order order) {\n        // business logic\n    }\n}\n</code></pre>\n<p>In documentation it is advised to use functional programming model. How does it look like? I found this code sample:</p>\n<pre><code>@Bean\npublic Consumer&lt;Message&lt;Order&gt;&gt; consumeOrder() {\n    return msg -&gt; {\n        // to get header - msg.getHeaders().get(key, valueType);\n    }\n}\n</code></pre>\n<p>Still, it's quite verbose, I like previous approach (<code>@StreamListener</code>). Is there any short modern way to write it?</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","querydsl"],"answers":[{"tags":[],"owner":{"account_id":11243704,"reputation":13,"user_id":8247078,"display_name":"FreudK"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677511493,"creation_date":1677511493,"answer_id":75582375,"question_id":75385352,"body_markdown":"One solution is by adding `@QueryEntities(value = {ExternalClass.class})` to `package-info`. \r\n\r\nFor more details check [https://stackoverflow.com/questions/65111043/how-to-generate-query-dsl-q-classes-on-external-entity][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/65111043/how-to-generate-query-dsl-q-classes-on-external-entity","title":"How to generate Query classes when an entity extends a class from an external package that does not have support for QueryDsl?","body":"<p>One solution is by adding <code>@QueryEntities(value = {ExternalClass.class})</code> to <code>package-info</code>.</p>\n<p>For more details check <a href=\"https://stackoverflow.com/questions/65111043/how-to-generate-query-dsl-q-classes-on-external-entity\">How to generate query-dsl Q classes on external entity?</a></p>\n"}],"owner":{"account_id":11243704,"reputation":13,"user_id":8247078,"display_name":"FreudK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75582375,"answer_count":1,"score":0,"last_activity_date":1677511493,"creation_date":1675856796,"question_id":75385352,"body_markdown":"I am having an entity class like below:\r\n\r\n`public class Apple extends ExternalClass implements Serializable {}`\r\n\r\nHere `Apple` is extending a class `ExternalClass` which is a part of a external package(not part of project source code). \r\n\r\nWhen I am trying to use mvn compile, the compilation is failing with an error \r\n&gt; error: cannot find symbol \\\r\n&gt; symbol:   class QExternalClass \\\r\n&gt; location: package com.example.models \\\r\n&gt; public final com.example.models.ExternalClass _super = new com.example.models.ExternalClass(this);\r\n\r\n\r\n\r\nOne solution that I can think of is to add QueryDsl to the external package, and then importing it. Is there any other solution available for this problem. ","title":"How to generate Query classes when an entity extends a class from an external package that does not have support for QueryDsl?","body":"<p>I am having an entity class like below:</p>\n<p><code>public class Apple extends ExternalClass implements Serializable {}</code></p>\n<p>Here <code>Apple</code> is extending a class <code>ExternalClass</code> which is a part of a external package(not part of project source code).</p>\n<p>When I am trying to use mvn compile, the compilation is failing with an error</p>\n<blockquote>\n<p>error: cannot find symbol <br />\nsymbol:   class QExternalClass <br />\nlocation: package com.example.models <br />\npublic final com.example.models.ExternalClass _super = new com.example.models.ExternalClass(this);</p>\n</blockquote>\n<p>One solution that I can think of is to add QueryDsl to the external package, and then importing it. Is there any other solution available for this problem.</p>\n"},{"tags":["java","lambda","java-stream"],"answers":[{"tags":[],"owner":{"account_id":89056,"reputation":8068,"user_id":2684196,"accept_rate":80,"display_name":"Willis Blackburn"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1576016208,"creation_date":1576015813,"answer_id":59276100,"question_id":59276049,"body_markdown":"The thing you need to know is that `flatMap` is the function that you can use to convert the strings into individual characters. While regular `map` function just converts each stream element into a different element, `flatMap` converts each element into a *stream* of elements, then concatenates those streams together.\r\n\r\nThe function that converts a `String` into a stream of characters is `String.chars`.\r\n\r\nWhen you want to build a new collection from a stream, you usually use a collector. Using the function `Collectors.groupingBy` you can produce a collector that will create a `Map`, given two functions, one to produce the key for each stream value, and the other to produce the value. There&#39;s a variant of this that will let you pass another collector in as the second parameter instead of a function; try `Collectors.counting`.","title":"Counting occurences of chars in string with stream","body":"<p>The thing you need to know is that <code>flatMap</code> is the function that you can use to convert the strings into individual characters. While regular <code>map</code> function just converts each stream element into a different element, <code>flatMap</code> converts each element into a <em>stream</em> of elements, then concatenates those streams together.</p>\n\n<p>The function that converts a <code>String</code> into a stream of characters is <code>String.chars</code>.</p>\n\n<p>When you want to build a new collection from a stream, you usually use a collector. Using the function <code>Collectors.groupingBy</code> you can produce a collector that will create a <code>Map</code>, given two functions, one to produce the key for each stream value, and the other to produce the value. There's a variant of this that will let you pass another collector in as the second parameter instead of a function; try <code>Collectors.counting</code>.</p>\n"},{"comments":[{"owner":{"account_id":89056,"reputation":8068,"user_id":2684196,"accept_rate":80,"display_name":"Willis Blackburn"},"score":1,"creation_date":1576033105,"post_id":59277879,"comment_id":104763296,"body_markdown":"You’re right. Could also do that transformation in the key function.","body":"You’re right. Could also do that transformation in the key function."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1639611387,"post_id":59277879,"comment_id":124396347,"body_markdown":"This code fails with most characters. Example: `List&lt;String&gt; words = Arrays.asList( &quot;&#128075;&quot;, &quot;Welcome&quot;, &quot;to&quot;, &quot;the&quot;, &quot;java&quot;, &quot;world&quot; );` results in: {a=2, c=1, d=1, e=3, h=1, j=1, ?=1, l=2, m=1, o=3, r=1, t=2, v=1, w=1, W=1, ?=1} as seen when [run live on IdeOne.com](https://ideone.com/4s6WDQ).","body":"This code fails with most characters. Example: <code>List&lt;String&gt; words = Arrays.asList( &quot;👋&quot;, &quot;Welcome&quot;, &quot;to&quot;, &quot;the&quot;, &quot;java&quot;, &quot;world&quot; );</code> results in: {a=2, c=1, d=1, e=3, h=1, j=1, ?=1, l=2, m=1, o=3, r=1, t=2, v=1, w=1, W=1, ?=1} as seen when <a href=\"https://ideone.com/4s6WDQ\" rel=\"nofollow noreferrer\">run live on IdeOne.com</a>."},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1677512082,"post_id":59277879,"comment_id":133347401,"body_markdown":"You would need `a.codePoints().mapToObj(i -&gt; new StringBuilder().appendCodePoint(i).toString())` or something like that.","body":"You would need <code>a.codePoints().mapToObj(i -&gt; new StringBuilder().appendCodePoint(i).toString())</code> or something like that."}],"tags":[],"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1576029476,"creation_date":1576029476,"answer_id":59277879,"question_id":59276049,"body_markdown":"It could be done as Willis pointed out using the `flatMap` and `groupingBy` collector. But, the expected output type should be `Map&lt;Character, Long&gt;` fo that as in:\r\n\r\n    Map&lt;Character, Long&gt; charFrequency = words.stream() //Stream&lt;String&gt;\r\n            .flatMap(a -&gt; a.chars().mapToObj(c -&gt; (char) c)) // Stream&lt;Character&gt;\r\n            .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));","title":"Counting occurences of chars in string with stream","body":"<p>It could be done as Willis pointed out using the <code>flatMap</code> and <code>groupingBy</code> collector. But, the expected output type should be <code>Map&lt;Character, Long&gt;</code> fo that as in:</p>\n\n<pre><code>Map&lt;Character, Long&gt; charFrequency = words.stream() //Stream&lt;String&gt;\n        .flatMap(a -&gt; a.chars().mapToObj(c -&gt; (char) c)) // Stream&lt;Character&gt;\n        .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1632136925,"post_id":69252785,"comment_id":122403502,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-ask).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/69252785/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-ask\">in the help center</a>."}],"tags":[],"owner":{"account_id":13944235,"reputation":21,"user_id":10765057,"display_name":"Denys Shelupets"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1632136912,"creation_date":1632133175,"answer_id":69252785,"question_id":59276049,"body_markdown":"More readable using `flatMapToInt` than `flatMap(a -&gt; a.chars().mapToObj(c -&gt; (char) c)) `\r\n\r\n    words.stream()\r\n                .flatMapToInt(String::chars) //IntStream\r\n                .mapToObj(c -&gt; (char) c)     //Stream&lt;Character&gt;\r\n                .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));","title":"Counting occurences of chars in string with stream","body":"<p>More readable using <code>flatMapToInt</code> than <code>flatMap(a -&gt; a.chars().mapToObj(c -&gt; (char) c)) </code></p>\n<pre><code>words.stream()\n            .flatMapToInt(String::chars) //IntStream\n            .mapToObj(c -&gt; (char) c)     //Stream&lt;Character&gt;\n            .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11702868,"reputation":141,"user_id":8567318,"display_name":"Ankur Yadav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677511370,"creation_date":1677511370,"answer_id":75582354,"question_id":59276049,"body_markdown":"***In Kotlin:***\r\n    \r\n    val str = &quot;Occurrences&quot;\r\n    val results: Map&lt;String, Long&gt; =\r\n            stream(str.split(&quot;&quot;).toTypedArray()).map{n-&gt; n.lowercase()}\r\n                .collect(\r\n                    Collectors.groupingBy({ it  },\r\n                        { LinkedHashMap() },\r\n                        Collectors.counting()\r\n                    )\r\n                )\r\n\r\n    Log.w(&quot;occurrencesResult&quot;,results.toString())","title":"Counting occurences of chars in string with stream","body":"<p><em><strong>In Kotlin:</strong></em></p>\n<pre><code>val str = &quot;Occurrences&quot;\nval results: Map&lt;String, Long&gt; =\n        stream(str.split(&quot;&quot;).toTypedArray()).map{n-&gt; n.lowercase()}\n            .collect(\n                Collectors.groupingBy({ it  },\n                    { LinkedHashMap() },\n                    Collectors.counting()\n                )\n            )\n\nLog.w(&quot;occurrencesResult&quot;,results.toString())\n</code></pre>\n"}],"owner":{"account_id":16273371,"reputation":103,"user_id":11751286,"display_name":"Grzesiek Chyla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15622,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":59277879,"answer_count":4,"score":3,"last_activity_date":1677511370,"creation_date":1576015489,"question_id":59276049,"body_markdown":"I&#39;m trying to understand a data flow of streams in Java. My task is to put occurrences of each letter in list of strings\r\n```\r\nList&lt;String&gt; words = Arrays.asList(&quot;Welcome&quot;, &quot;to&quot;, &quot;the&quot;, &quot;java&quot;, &quot;world&quot;);\r\n```\r\n into \r\n```\r\nMap&lt;String, Long&gt;\r\n```\r\n\r\nusing a one-liner stream.\r\n\r\nI know, that in the first place we can stream each word from the list, then I need to separate it into chars, then put each char as key and count its occurrence as value and in the end return the whole map.\r\n\r\nIt is so complicated to understand. Could someone explain to me how to do it?","title":"Counting occurences of chars in string with stream","body":"<p>I'm trying to understand a data flow of streams in Java. My task is to put occurrences of each letter in list of strings</p>\n\n<pre><code>List&lt;String&gt; words = Arrays.asList(\"Welcome\", \"to\", \"the\", \"java\", \"world\");\n</code></pre>\n\n<p>into </p>\n\n<pre><code>Map&lt;String, Long&gt;\n</code></pre>\n\n<p>using a one-liner stream.</p>\n\n<p>I know, that in the first place we can stream each word from the list, then I need to separate it into chars, then put each char as key and count its occurrence as value and in the end return the whole map.</p>\n\n<p>It is so complicated to understand. Could someone explain to me how to do it?</p>\n"},{"tags":["java","oracle","hibernate","spring-jdbc","querydsl"],"answers":[{"comments":[{"owner":{"account_id":7647613,"reputation":557,"user_id":5797650,"accept_rate":67,"display_name":"fun_hat"},"score":0,"creation_date":1677975871,"post_id":75582338,"comment_id":133443946,"body_markdown":"Formatting is difficult to read. Please add indentations and line returns","body":"Formatting is difficult to read. Please add indentations and line returns"}],"tags":[],"owner":{"account_id":26274754,"reputation":13,"user_id":19944107,"display_name":"NBS"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677511292,"creation_date":1677511292,"answer_id":75582338,"question_id":75578795,"body_markdown":"So I found a half way solution! \r\nWhat I’ve done is to add autowired parameter in class:\r\n\r\n```\r\n@Autowired\r\nprivate JdbcTemplate jdbcTemplate;\r\n```\r\n\r\nAnd this is the function:\r\n```\r\npublic List&lt;AggregationResultRow&gt; getAggregations(AggregationRequest aggregationRequest) throw Exception {\r\nConnection connection = this.jdbcTemplate.getDataSource().getConnection();\r\nOracleQuery&lt;AggregationResultRow&gt; query = new OracleQuery&lt;AggregationResultRow&gt;(connection)\r\n.with(this.aggregationValues, new OracleQuery&lt;AggregationValues&gt;(connection)\r\n.select(Projections.constructor(AggregationValues.class, this.table.age.as(this.aggregationValues.age), this.table.gender.as(this.aggregationValues.gender),\r\nthis.table.mainCity.as(this.aggregationValues.mainCity)))\r\n.from(this.table)\r\nwhere(this.getConditions(aggregationRequest)));\r\n\r\nquery.unionAll(new OracleQuery&lt;AggregationResultRow&gt;(connection)\r\n.select(Projections.constructor(AggregationResultRow.class, this.aggregationValues.age.as(“value”),\r\nthis.aggregationValues.age.count().as(“row_count”),\r\nExpressions.asString(“age”).as(“column_name”)))\r\n.from(this.aggregationValues)\r\n.groupBy(this.aggregationValues.age),\r\nnew OracleQuery&lt;AggregationResultRow&gt;(connection)\r\n.select(Projections.constructor(AggregationResultRow.class, this.aggregationValues.gender.as(“value”),\r\nthis.aggregationValues.gender.count().as(“row_count”),\r\nExpressions.asString(“gender”).as(“column_name”)))\r\n.from(this.aggregationValues)\r\n.groupBy(this.aggregationValues.gender),\r\nnew OracleQuery&lt;AggregationResultRow&gt;(connection)\r\n.select(Projections.constructor(AggregationResultRow.class, this.aggregationValues.mainCity.as(“value”),\r\nthis.aggregationValues.mainCity.count().as(“row_count”),\r\nExpressions.asString(“mainCity”).as(“column_name”)))\r\n.from(this.aggregationValues)\r\n.groupBy(this.aggregationValues.mainCity));\r\n\r\nreturn query.fetch();\r\n}\r\n```\r\n\r\nNow I only need to add Materialize to the select in the WITH clause and parallel to all the function. Any ideas?\r\n\r\n","title":"Convert SQL query that contains WITH clause and union in QueryDsl","body":"<p>So I found a half way solution!\nWhat I’ve done is to add autowired parameter in class:</p>\n<pre><code>@Autowired\nprivate JdbcTemplate jdbcTemplate;\n</code></pre>\n<p>And this is the function:</p>\n<pre><code>public List&lt;AggregationResultRow&gt; getAggregations(AggregationRequest aggregationRequest) throw Exception {\nConnection connection = this.jdbcTemplate.getDataSource().getConnection();\nOracleQuery&lt;AggregationResultRow&gt; query = new OracleQuery&lt;AggregationResultRow&gt;(connection)\n.with(this.aggregationValues, new OracleQuery&lt;AggregationValues&gt;(connection)\n.select(Projections.constructor(AggregationValues.class, this.table.age.as(this.aggregationValues.age), this.table.gender.as(this.aggregationValues.gender),\nthis.table.mainCity.as(this.aggregationValues.mainCity)))\n.from(this.table)\nwhere(this.getConditions(aggregationRequest)));\n\nquery.unionAll(new OracleQuery&lt;AggregationResultRow&gt;(connection)\n.select(Projections.constructor(AggregationResultRow.class, this.aggregationValues.age.as(“value”),\nthis.aggregationValues.age.count().as(“row_count”),\nExpressions.asString(“age”).as(“column_name”)))\n.from(this.aggregationValues)\n.groupBy(this.aggregationValues.age),\nnew OracleQuery&lt;AggregationResultRow&gt;(connection)\n.select(Projections.constructor(AggregationResultRow.class, this.aggregationValues.gender.as(“value”),\nthis.aggregationValues.gender.count().as(“row_count”),\nExpressions.asString(“gender”).as(“column_name”)))\n.from(this.aggregationValues)\n.groupBy(this.aggregationValues.gender),\nnew OracleQuery&lt;AggregationResultRow&gt;(connection)\n.select(Projections.constructor(AggregationResultRow.class, this.aggregationValues.mainCity.as(“value”),\nthis.aggregationValues.mainCity.count().as(“row_count”),\nExpressions.asString(“mainCity”).as(“column_name”)))\n.from(this.aggregationValues)\n.groupBy(this.aggregationValues.mainCity));\n\nreturn query.fetch();\n}\n</code></pre>\n<p>Now I only need to add Materialize to the select in the WITH clause and parallel to all the function. Any ideas?</p>\n"}],"owner":{"account_id":26274754,"reputation":13,"user_id":19944107,"display_name":"NBS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":409,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75582338,"answer_count":1,"score":0,"last_activity_date":1677511292,"creation_date":1677490691,"question_id":75578795,"body_markdown":"I&#39;m using Oracle DB and has Students table:\r\n\r\nStudents Table:\r\n\r\n    | COLUMN      | TYPE          |\r\n    | ----------- | ------------- |\r\n    |  ID         | VARCHAR2(200) |\r\n    |  NAME       | VARCHAR2(200) |\r\n    |  AGE        | NUMBER(5)     |\r\n    |  MAIN_CITY  | VARCHAR2(200) |\r\n    |  GENDER     | VARCHAR2(50)  |\r\n    |  SCORE      | FLOAT(5)      |\r\n\r\n \r\n`\r\n\r\nI&#39;m trying to convert this SQL query to query-dsl code:\r\n\r\n```\r\nSELECT /*+ parallel(2)*/ *\r\nFROM (WITH filtered_values(age, gender, main_city) AS\r\n(\r\nSELECT /*+ MATERIALIZE */ age, gender, main_city \r\nFROM Students\r\n-- GET CONDITIONS FROM USER AND FILTER THE QUERY USING WHERE\r\n)\r\nSELECT * \r\nFROM (\r\nSELECT age AS value, COUNT(*) AS row_count, &#39;age&#39; AS column_name\r\nFROM filtered_values\r\nGROUP BY age\r\nORDER BY row_count)\r\nWHERE rownum &lt;= 5\r\nUNION ALL (\r\nSELECT * \r\nFROM (\r\nSELECT gender AS value, COUNT(*) AS row_count, &#39;gender&#39; AS column_name\r\nFROM filtered_values\r\nGROUP BY gender\r\nORDER BY row_count)\r\nWHERE rownum &lt;= 5)\r\nUNION ALL (\r\nSELECT * \r\nFROM (\r\nSELECT main_city AS value, COUNT(*) AS row_count, &#39;main_city&#39; AS column_name\r\nFROM filtered_values\r\nGROUP BY main_city\r\nORDER BY row_count)\r\nWHERE rownum &lt;= 5)\r\n)\r\n```\r\n\r\nThe filters that available from client is flexible and change the WITH query, for example:\r\n\r\nwhere score greater than 20:\r\n&gt; WITH filtered_values(age, gender, main_city) AS\r\n&gt; (\r\n&gt; SELECT /*+ MATERIALIZE */ age, gender, main_city \r\n&gt; FROM Students\r\n&gt; WHERE score &gt; 20\r\n&gt; )\r\n\r\nwhere city is LA or NYC, and score is between 50-60:\r\n&gt; WITH filtered_values(age, gender, main_city) AS\r\n&gt; (\r\n&gt; SELECT /*+ MATERIALIZE */ age, gender, main_city \r\n&gt; FROM Students\r\n&gt; WHERE main_city IN (&#39;LA&#39;, &#39;NYC&#39;) AND score &gt;= 50 AND score &lt;= 60\r\n&gt; )\r\n\r\n\r\nI&#39;m using QueryDsl version 5.0.0.\r\n\r\nI&#39;ve created Java classes:\r\n\r\nStudent:\r\n```\r\n@Data\r\n@Entity\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Table(schema = &quot;PROD&quot;, name = &quot;Students&quot;)\r\npublic class Student implements Serializable {\r\n@Id\r\n@Column(name = &quot;ID&quot;)\r\nprivate String id;\r\n@Column(name = &quot;NAME&quot;)\r\nprivate String name;\r\n@Column(name = &quot;AGE&quot;)\r\nprivate int age;\r\n@Column(name = &quot;MAIN_CITY&quot;)\r\nprivate String mainCity;\r\n@Column(name = &quot;SCORE&quot;)\r\nprivate float score; \r\n}\r\n```\r\n\r\nAggregationValues:\r\n```\r\n@Data\r\n@Entity\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Table(schema = &quot;PROD&quot;, name = &quot;NOT_REAL_TABLE&quot;)\r\npublic class AggregationValues {\r\nprivate int age;\r\nprivate String gender;\r\nprivate String mainCity;\r\n}\r\n```\r\n\r\nAggregationResultRow:\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class AggregationResultRow {\r\nprivate String value;\r\nprivate long rowCount;\r\nprivate String columnName;\r\n}\r\n```\r\n\r\nMy code is:\r\n&gt; Note that `this.getConditions(aggregationsRequest)` return BooleanBuilder with all the filters from the client.\r\n\r\n```\r\nprivate final QStudent table = QStudent.student;\r\nprivate final QAggregationValues aggregationValues = QAggregationValues.aggregationValues;\r\n\r\npublic List&lt;AggregationResultRow&gt; getAggergations(AggregationRequest aggregationRequest) {\r\nSubQueryExpression&lt;AggregationValues&gt; filteredValues = new BlazeJPAQuery&lt;AggregationValues&gt;(entityManager, criteriaBuilderFactory)\r\n.select(Projections.constructor(AggregationValues.class, \r\nthis.table.age,\r\nthis.table.gender,\r\nthis.table.mainCity))\r\n.from(this.table)\r\n.where(this.getConditions(aggregationRequest));\r\n\r\nBlazeJPAQuery&lt;AggregationResultRow&gt; ageSelect = new BlazeJPAQuery&lt;AggregationResultRow&gt;(entityManager, criteriaBuilderFactory)\r\n.with(this.aggregationValues, filteredValues)\r\n.select(Projections.constructor(AggregationResultRow.class, this.aggregationValues.age.as(&quot;value&quot;),\r\nthis.aggregationValues.count().as(&quot;row_count&quot;),\r\nExpressions.asString(&quot;age&quot;).as(&quot;column_name&quot;)))\r\n.from(this.aggregationValues)\r\n.groupBy(this.aggregationValues.age);\r\n\r\nBlazeJPAQuery&lt;AggregationResultRow&gt; genderSelect = new BlazeJPAQuery&lt;AggregationResultRow&gt;(entityManager, criteriaBuilderFactory)\r\n.with(this.aggregationValues, filteredValues)\r\n.select(Projections.constructor(AggregationResultRow.class, this.aggregationValues.gender.as(&quot;value&quot;),\r\nthis.aggregationValues.count().as(&quot;row_count&quot;),\r\nExpressions.asString(&quot;gender&quot;).as(&quot;column_name&quot;)))\r\n.from(this.aggregationValues)\r\n.groupBy(this.aggregationValues.gender);\r\n\r\nBlazeJPAQuery&lt;AggregationResultRow&gt; mainCitySelect = new BlazeJPAQuery&lt;AggregationResultRow&gt;(entityManager, criteriaBuilderFactory)\r\n.with(this.aggregationValues, filteredValues)\r\n.select(Projections.constructor(AggregationResultRow.class, this.aggregationValues.mainCity.as(&quot;value&quot;),\r\nthis.aggregationValues.count().as(&quot;row_count&quot;),\r\nExpressions.asString(&quot;main_city&quot;).as(&quot;column_name&quot;)))\r\n.from(this.aggregationValues)\r\n.groupBy(this.aggregationValues.mainCity);\r\n\r\nreturn ageSelect.unionAll(genderSelect, mainCitySelect).fetch();\r\n}\r\n```\r\n\r\nBut I got Exception - `java.lang.IllegalArgumentException: Don&#39;t mix union and from`\r\n\r\nI&#39;ve tried more code ideas but nothing works and this one looks the closest to my query.\r\n\r\nAny ideas?\r\n\r\nThank you very much, I&#39;ll appreciate it a lot!","title":"Convert SQL query that contains WITH clause and union in QueryDsl","body":"<p>I'm using Oracle DB and has Students table:</p>\n<p>Students Table:</p>\n<pre><code>| COLUMN      | TYPE          |\n| ----------- | ------------- |\n|  ID         | VARCHAR2(200) |\n|  NAME       | VARCHAR2(200) |\n|  AGE        | NUMBER(5)     |\n|  MAIN_CITY  | VARCHAR2(200) |\n|  GENDER     | VARCHAR2(50)  |\n|  SCORE      | FLOAT(5)      |\n</code></pre>\n<p>`</p>\n<p>I'm trying to convert this SQL query to query-dsl code:</p>\n<pre><code>SELECT /*+ parallel(2)*/ *\nFROM (WITH filtered_values(age, gender, main_city) AS\n(\nSELECT /*+ MATERIALIZE */ age, gender, main_city \nFROM Students\n-- GET CONDITIONS FROM USER AND FILTER THE QUERY USING WHERE\n)\nSELECT * \nFROM (\nSELECT age AS value, COUNT(*) AS row_count, 'age' AS column_name\nFROM filtered_values\nGROUP BY age\nORDER BY row_count)\nWHERE rownum &lt;= 5\nUNION ALL (\nSELECT * \nFROM (\nSELECT gender AS value, COUNT(*) AS row_count, 'gender' AS column_name\nFROM filtered_values\nGROUP BY gender\nORDER BY row_count)\nWHERE rownum &lt;= 5)\nUNION ALL (\nSELECT * \nFROM (\nSELECT main_city AS value, COUNT(*) AS row_count, 'main_city' AS column_name\nFROM filtered_values\nGROUP BY main_city\nORDER BY row_count)\nWHERE rownum &lt;= 5)\n)\n</code></pre>\n<p>The filters that available from client is flexible and change the WITH query, for example:</p>\n<p>where score greater than 20:</p>\n<blockquote>\n<p>WITH filtered_values(age, gender, main_city) AS\n(\nSELECT /*+ MATERIALIZE */ age, gender, main_city\nFROM Students\nWHERE score &gt; 20\n)</p>\n</blockquote>\n<p>where city is LA or NYC, and score is between 50-60:</p>\n<blockquote>\n<p>WITH filtered_values(age, gender, main_city) AS\n(\nSELECT /*+ MATERIALIZE */ age, gender, main_city\nFROM Students\nWHERE main_city IN ('LA', 'NYC') AND score &gt;= 50 AND score &lt;= 60\n)</p>\n</blockquote>\n<p>I'm using QueryDsl version 5.0.0.</p>\n<p>I've created Java classes:</p>\n<p>Student:</p>\n<pre><code>@Data\n@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(schema = &quot;PROD&quot;, name = &quot;Students&quot;)\npublic class Student implements Serializable {\n@Id\n@Column(name = &quot;ID&quot;)\nprivate String id;\n@Column(name = &quot;NAME&quot;)\nprivate String name;\n@Column(name = &quot;AGE&quot;)\nprivate int age;\n@Column(name = &quot;MAIN_CITY&quot;)\nprivate String mainCity;\n@Column(name = &quot;SCORE&quot;)\nprivate float score; \n}\n</code></pre>\n<p>AggregationValues:</p>\n<pre><code>@Data\n@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(schema = &quot;PROD&quot;, name = &quot;NOT_REAL_TABLE&quot;)\npublic class AggregationValues {\nprivate int age;\nprivate String gender;\nprivate String mainCity;\n}\n</code></pre>\n<p>AggregationResultRow:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class AggregationResultRow {\nprivate String value;\nprivate long rowCount;\nprivate String columnName;\n}\n</code></pre>\n<p>My code is:</p>\n<blockquote>\n<p>Note that <code>this.getConditions(aggregationsRequest)</code> return BooleanBuilder with all the filters from the client.</p>\n</blockquote>\n<pre><code>private final QStudent table = QStudent.student;\nprivate final QAggregationValues aggregationValues = QAggregationValues.aggregationValues;\n\npublic List&lt;AggregationResultRow&gt; getAggergations(AggregationRequest aggregationRequest) {\nSubQueryExpression&lt;AggregationValues&gt; filteredValues = new BlazeJPAQuery&lt;AggregationValues&gt;(entityManager, criteriaBuilderFactory)\n.select(Projections.constructor(AggregationValues.class, \nthis.table.age,\nthis.table.gender,\nthis.table.mainCity))\n.from(this.table)\n.where(this.getConditions(aggregationRequest));\n\nBlazeJPAQuery&lt;AggregationResultRow&gt; ageSelect = new BlazeJPAQuery&lt;AggregationResultRow&gt;(entityManager, criteriaBuilderFactory)\n.with(this.aggregationValues, filteredValues)\n.select(Projections.constructor(AggregationResultRow.class, this.aggregationValues.age.as(&quot;value&quot;),\nthis.aggregationValues.count().as(&quot;row_count&quot;),\nExpressions.asString(&quot;age&quot;).as(&quot;column_name&quot;)))\n.from(this.aggregationValues)\n.groupBy(this.aggregationValues.age);\n\nBlazeJPAQuery&lt;AggregationResultRow&gt; genderSelect = new BlazeJPAQuery&lt;AggregationResultRow&gt;(entityManager, criteriaBuilderFactory)\n.with(this.aggregationValues, filteredValues)\n.select(Projections.constructor(AggregationResultRow.class, this.aggregationValues.gender.as(&quot;value&quot;),\nthis.aggregationValues.count().as(&quot;row_count&quot;),\nExpressions.asString(&quot;gender&quot;).as(&quot;column_name&quot;)))\n.from(this.aggregationValues)\n.groupBy(this.aggregationValues.gender);\n\nBlazeJPAQuery&lt;AggregationResultRow&gt; mainCitySelect = new BlazeJPAQuery&lt;AggregationResultRow&gt;(entityManager, criteriaBuilderFactory)\n.with(this.aggregationValues, filteredValues)\n.select(Projections.constructor(AggregationResultRow.class, this.aggregationValues.mainCity.as(&quot;value&quot;),\nthis.aggregationValues.count().as(&quot;row_count&quot;),\nExpressions.asString(&quot;main_city&quot;).as(&quot;column_name&quot;)))\n.from(this.aggregationValues)\n.groupBy(this.aggregationValues.mainCity);\n\nreturn ageSelect.unionAll(genderSelect, mainCitySelect).fetch();\n}\n</code></pre>\n<p>But I got Exception - <code>java.lang.IllegalArgumentException: Don't mix union and from</code></p>\n<p>I've tried more code ideas but nothing works and this one looks the closest to my query.</p>\n<p>Any ideas?</p>\n<p>Thank you very much, I'll appreciate it a lot!</p>\n"},{"tags":["java","webp","animated-webp"],"owner":{"account_id":12869869,"reputation":1426,"user_id":9308731,"display_name":"CrackerKSR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677511190,"creation_date":1677510401,"question_id":75582148,"body_markdown":"I am working on encoder decoder for animated webp image using pure java. I have to write static webp image from each from of animated webp image. It works fine but for the image having transparancy in image. reader gets flags for animation and alpha but when I write the flag for alpha (not setting animation as creating static image of given frame). But surprisingly it does not set the flag at all. I tried different indexes but not working. The output image have white background rather transparent bg.\r\n\r\ncode:\r\n```java\r\n  public byte[] encodeWebPFrame(Frame frame, WebpImage webpImage) throws IOException {\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        \r\n        baos.write(riff); // 4\r\n        baos.write(intToByteArray(getFileSize(frame))); // 4\r\n        baos.write(webp); // 4\r\n\r\n        baos.write(vp8x); // 4\r\n        baos.write(intToByteArray(10)); // 4\r\n        BitSet bs = new BitSet(32);\r\n        bs.set(1, false); // A hasAnim\r\n        bs.set(2, false); // X hasXmp\r\n        bs.set(3, false); // E hasExif\r\n        bs.set(4, true);  // L hasalpha\r\n        bs.set(5, false); // I hasIccp\r\n        baos.write(bitSetToBytes(bs,4)); // 4\r\n        baos.write(intTo3ByteArray(frame.width)); // 3\r\n        baos.write(intTo3ByteArray(frame.height)); // 3\r\n\r\n        // alpha data, bitStream\r\n        if(frame.hasVP8chunk) {\r\n            if(frame.hasALPHchunk) {\r\n                baos.write(alph); // 4\r\n                baos.write(intToByteArray(frame.alphaData.length)); // 4\r\n                baos.write(frame.alphaData); // frame.alphaData.length\r\n            }\r\n            baos.write(vp8); // 4\r\n            baos.write(intToByteArray(frame.bitStream.length)); // 4\r\n            baos.write(frame.bitStream); // frame.bitStream.length\r\n        }else{\r\n//            Logs.i(this,&quot;write byte[] -&gt; VP8L &quot;+frame.bitStream.length+&quot; | baso - &quot;+baos.size());\r\n            baos.write(vp8l); // 4\r\n            baos.write(intToByteArray(frame.bitStream.length)); // 4\r\n            baos.write(frame.bitStream); // frame.bitStream.length\r\n        }\r\n        baos.close();\r\n        return baos.toByteArray();\r\n    }\r\n\r\n\r\n```\r\n```bs.set(4, true);  // L hasalpha``` Here I am setting the alpha flag. If I set it to false then output is incorrect image.\r\nsame logic I used to write to stream and it works fine but here I am getting error in writing to bytearrayoutputstream. Any idea?\r\n\r\n","title":"How to set alpha flag in VP8X chunk of webp image having transparency","body":"<p>I am working on encoder decoder for animated webp image using pure java. I have to write static webp image from each from of animated webp image. It works fine but for the image having transparancy in image. reader gets flags for animation and alpha but when I write the flag for alpha (not setting animation as creating static image of given frame). But surprisingly it does not set the flag at all. I tried different indexes but not working. The output image have white background rather transparent bg.</p>\n<p>code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public byte[] encodeWebPFrame(Frame frame, WebpImage webpImage) throws IOException {\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        \n        baos.write(riff); // 4\n        baos.write(intToByteArray(getFileSize(frame))); // 4\n        baos.write(webp); // 4\n\n        baos.write(vp8x); // 4\n        baos.write(intToByteArray(10)); // 4\n        BitSet bs = new BitSet(32);\n        bs.set(1, false); // A hasAnim\n        bs.set(2, false); // X hasXmp\n        bs.set(3, false); // E hasExif\n        bs.set(4, true);  // L hasalpha\n        bs.set(5, false); // I hasIccp\n        baos.write(bitSetToBytes(bs,4)); // 4\n        baos.write(intTo3ByteArray(frame.width)); // 3\n        baos.write(intTo3ByteArray(frame.height)); // 3\n\n        // alpha data, bitStream\n        if(frame.hasVP8chunk) {\n            if(frame.hasALPHchunk) {\n                baos.write(alph); // 4\n                baos.write(intToByteArray(frame.alphaData.length)); // 4\n                baos.write(frame.alphaData); // frame.alphaData.length\n            }\n            baos.write(vp8); // 4\n            baos.write(intToByteArray(frame.bitStream.length)); // 4\n            baos.write(frame.bitStream); // frame.bitStream.length\n        }else{\n//            Logs.i(this,&quot;write byte[] -&gt; VP8L &quot;+frame.bitStream.length+&quot; | baso - &quot;+baos.size());\n            baos.write(vp8l); // 4\n            baos.write(intToByteArray(frame.bitStream.length)); // 4\n            baos.write(frame.bitStream); // frame.bitStream.length\n        }\n        baos.close();\n        return baos.toByteArray();\n    }\n\n\n</code></pre>\n<p><code>bs.set(4, true);  // L hasalpha</code> Here I am setting the alpha flag. If I set it to false then output is incorrect image.\nsame logic I used to write to stream and it works fine but here I am getting error in writing to bytearrayoutputstream. Any idea?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","integration-testing","spring-mvc-test"],"answers":[{"tags":[],"owner":{"account_id":132529,"reputation":3031,"user_id":333276,"accept_rate":75,"display_name":"David Brown"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677510996,"creation_date":1677510996,"answer_id":75582270,"question_id":72393966,"body_markdown":"I know this is very late to reply however if someone else with the same issue finds this answer then the world may be a little brighter.\r\n\r\nYou need to adjust your perform() call to include csrf() handling, i.e. change it to:\r\n\r\n    this.mockMvc.perform(MockMvcRequestBuilders.multipart(&quot;/create&quot;).file(file).param(&quot;adressId&quot;, &quot;96cf9ec3-f820-4192-a4db-920328df5ff4&quot;)\r\n                    .param(&quot;file&quot;, objectMapper.writeValueAsString(mockUser))\r\n        .with(csrf())\r\n                )\r\n\r\nThen you should be good.","title":"How can I test this springboot controller method with multipart and a object from a form submit?","body":"<p>I know this is very late to reply however if someone else with the same issue finds this answer then the world may be a little brighter.</p>\n<p>You need to adjust your perform() call to include csrf() handling, i.e. change it to:</p>\n<pre><code>this.mockMvc.perform(MockMvcRequestBuilders.multipart(&quot;/create&quot;).file(file).param(&quot;adressId&quot;, &quot;96cf9ec3-f820-4192-a4db-920328df5ff4&quot;)\n                .param(&quot;file&quot;, objectMapper.writeValueAsString(mockUser))\n    .with(csrf())\n            )\n</code></pre>\n<p>Then you should be good.</p>\n"}],"owner":{"account_id":25397610,"reputation":11,"user_id":19207638,"display_name":"SwisslogTest"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":316,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677510996,"creation_date":1653577544,"question_id":72393966,"body_markdown":"I have the following controller method\r\n```java\r\n @PostMapping(&quot;/create&quot;)\r\n    public ModelAndView createDocument(@ModelAttribute(&quot;user&quot;) @Valid User userToSave, BindingResult bindingResult,@RequestParam String adressId,@RequestParam MultipartFile file){\r\n```\r\nNow I want to create a integration test which supplies the following parameters. But I always get a 403. My testmethod looks like that:\r\n```java\r\n@Test\r\n    @WithMockUser(username = &quot;user&quot;,password = &quot;user123&quot;,roles=&quot;ADMIN&quot;)\r\n    public void testUploadDocument() throws Exception {\r\nUser mockUser = new User(&quot;User&quot;,null,null,&quot;test comment&quot;,&quot;Dies ist ein Test&quot;);\r\nMockMultipartFile file\r\n            = new MockMultipartFile(\r\n            &quot;file&quot;,\r\n            &quot;hello.txt&quot;,\r\n            MediaType.TEXT_PLAIN_VALUE,\r\n            &quot;Hello, World!&quot;.getBytes()\r\n        );\r\nthis.mockMvc.perform(MockMvcRequestBuilders.multipart(&quot;/create&quot;).file(file).param(&quot;adressId&quot;, &quot;96cf9ec3-f820-4192-a4db-920328df5ff4&quot;)\r\n                .param(&quot;file&quot;, objectMapper.writeValueAsString(mockUser))\r\n            ).andDo(print()).andExpect(status().isOk())\r\n            .andExpect(view().name(containsString(&quot;list&quot;)));\r\n}\r\n```","title":"How can I test this springboot controller method with multipart and a object from a form submit?","body":"<p>I have the following controller method</p>\n<pre class=\"lang-java prettyprint-override\"><code> @PostMapping(&quot;/create&quot;)\n    public ModelAndView createDocument(@ModelAttribute(&quot;user&quot;) @Valid User userToSave, BindingResult bindingResult,@RequestParam String adressId,@RequestParam MultipartFile file){\n</code></pre>\n<p>Now I want to create a integration test which supplies the following parameters. But I always get a 403. My testmethod looks like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\n    @WithMockUser(username = &quot;user&quot;,password = &quot;user123&quot;,roles=&quot;ADMIN&quot;)\n    public void testUploadDocument() throws Exception {\nUser mockUser = new User(&quot;User&quot;,null,null,&quot;test comment&quot;,&quot;Dies ist ein Test&quot;);\nMockMultipartFile file\n            = new MockMultipartFile(\n            &quot;file&quot;,\n            &quot;hello.txt&quot;,\n            MediaType.TEXT_PLAIN_VALUE,\n            &quot;Hello, World!&quot;.getBytes()\n        );\nthis.mockMvc.perform(MockMvcRequestBuilders.multipart(&quot;/create&quot;).file(file).param(&quot;adressId&quot;, &quot;96cf9ec3-f820-4192-a4db-920328df5ff4&quot;)\n                .param(&quot;file&quot;, objectMapper.writeValueAsString(mockUser))\n            ).andDo(print()).andExpect(status().isOk())\n            .andExpect(view().name(containsString(&quot;list&quot;)));\n}\n</code></pre>\n"},{"tags":["java","json","jsonschema","faker"],"answers":[{"tags":[],"owner":{"account_id":2357064,"reputation":184,"user_id":2064640,"display_name":"AMOD MAHAJAN"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677510834,"creation_date":1677510834,"answer_id":75582234,"question_id":75576606,"body_markdown":"Raised the same question on Datafaker GitHub and got the solution. \r\n\r\nJsonTransformer&lt;String&gt; transformer = JsonTransformer.&lt;String&gt;builder().formattedAs(JSON_ARRAY).build();\r\n\r\nAdding the direct link here. \r\nhttps://github.com/datafaker-net/datafaker/issues/720#issuecomment-1445929651","title":"How to create schema to generate a JSON Array using Schema and transformers provided by DataFaker API in Java?","body":"<p>Raised the same question on Datafaker GitHub and got the solution.</p>\n<p>JsonTransformer transformer = JsonTransformer.builder().formattedAs(JSON_ARRAY).build();</p>\n<p>Adding the direct link here.\n<a href=\"https://github.com/datafaker-net/datafaker/issues/720#issuecomment-1445929651\" rel=\"nofollow noreferrer\">https://github.com/datafaker-net/datafaker/issues/720#issuecomment-1445929651</a></p>\n"}],"owner":{"account_id":2357064,"reputation":184,"user_id":2064640,"display_name":"AMOD MAHAJAN"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677510834,"creation_date":1677469458,"question_id":75576606,"body_markdown":"I am using [DataFaker][1] library to create schema for JSON Object and Array. Since the use of [Format][2] is deprecated, I am trying with [Transformation Schemas][3]. I tried examples given under the Format section of official documentation to create a schema for Json Array but wasn&#39;t successful. \r\nExample JSON Array - \r\n\r\n[\r\n  {\r\n    &quot;firstName&quot;: &quot;Oleta&quot;,\r\n    &quot;lastName&quot;: &quot;Toy&quot;\r\n  },\r\n  {\r\n    &quot;firstName&quot;: &quot;Gerard&quot;,\r\n    &quot;lastName&quot;: &quot;Windler&quot;\r\n  }\r\n]\r\n\r\n\r\n  [1]: https://github.com/datafaker-net/datafaker\r\n  [2]: https://www.datafaker.net/documentation/formats/\r\n  [3]: https://www.datafaker.net/documentation/schemas/","title":"How to create schema to generate a JSON Array using Schema and transformers provided by DataFaker API in Java?","body":"<p>I am using <a href=\"https://github.com/datafaker-net/datafaker\" rel=\"nofollow noreferrer\">DataFaker</a> library to create schema for JSON Object and Array. Since the use of <a href=\"https://www.datafaker.net/documentation/formats/\" rel=\"nofollow noreferrer\">Format</a> is deprecated, I am trying with <a href=\"https://www.datafaker.net/documentation/schemas/\" rel=\"nofollow noreferrer\">Transformation Schemas</a>. I tried examples given under the Format section of official documentation to create a schema for Json Array but wasn't successful.\nExample JSON Array -</p>\n<p>[\n{\n&quot;firstName&quot;: &quot;Oleta&quot;,\n&quot;lastName&quot;: &quot;Toy&quot;\n},\n{\n&quot;firstName&quot;: &quot;Gerard&quot;,\n&quot;lastName&quot;: &quot;Windler&quot;\n}\n]</p>\n"},{"tags":["c#","java","sockets","networking"],"comments":[{"owner":{"account_id":363148,"reputation":22154,"user_id":706724,"accept_rate":100,"display_name":"pickypg"},"score":9,"creation_date":1360636120,"post_id":14824491,"comment_id":20768931,"body_markdown":"Yes. They boil down to reading bytes, which are language neutral (minus the amusing caveat that Java does not have unsigned `byte`s like C#).","body":"Yes. They boil down to reading bytes, which are language neutral (minus the amusing caveat that Java does not have unsigned <code>byte</code>s like C#)."},{"owner":{"account_id":181606,"reputation":4215,"user_id":415727,"accept_rate":62,"display_name":"damix911"},"score":1,"creation_date":1360636289,"post_id":14824491,"comment_id":20768962,"body_markdown":"Yes, have a look at this answer (the one by Blue Gene): http://stackoverflow.com/questions/5999180/sockets-send-strings-from-java-to-c","body":"Yes, have a look at this answer (the one by Blue Gene): <a href=\"http://stackoverflow.com/questions/5999180/sockets-send-strings-from-java-to-c\" title=\"sockets send strings from java to c\">stackoverflow.com/questions/5999180/&hellip;</a>"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1360637794,"post_id":14824491,"comment_id":20769292,"body_markdown":"@damix911 You can link directory to answers, e.g., [Blue Gene&#39;s answer](http://stackoverflow.com/a/6001758/438992).","body":"@damix911 You can link directory to answers, e.g., <a href=\"http://stackoverflow.com/a/6001758/438992\">Blue Gene&#39;s answer</a>."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1360637841,"post_id":14824491,"comment_id":20769299,"body_markdown":"A socket is a socket; the language used to use it is secondary.","body":"A socket is a socket; the language used to use it is secondary."}],"answers":[{"comments":[{"owner":{"account_id":2669157,"reputation":1063,"user_id":2306915,"display_name":"azuneca"},"score":0,"creation_date":1441699427,"post_id":14825061,"comment_id":52767197,"body_markdown":"gj its working, saved a lot of time trying to figure out an easy story","body":"gj its working, saved a lot of time trying to figure out an easy story"},{"owner":{"account_id":1518433,"reputation":1029,"user_id":1418838,"display_name":"Haakon L&#248;tveit"},"score":0,"creation_date":1456647017,"post_id":14825061,"comment_id":59038338,"body_markdown":"As a hopefully interesting aside, Java does have an unsigned number primitive, but it&#39;s 16 bit, not 8. Our old favourite char is an unsigned 16-bit number after all. This is why [Character.toChars(int)](https://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#toChars%28int%29) returns an array of chars, due to the whole UTF-16 shenanigans stuff.","body":"As a hopefully interesting aside, Java does have an unsigned number primitive, but it&#39;s 16 bit, not 8. Our old favourite char is an unsigned 16-bit number after all. This is why <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#toChars%28int%29\" rel=\"nofollow noreferrer\">Character.toChars(int)</a> returns an array of chars, due to the whole UTF-16 shenanigans stuff."},{"owner":{"account_id":5577567,"reputation":3383,"user_id":4420543,"accept_rate":56,"display_name":"andras"},"score":0,"creation_date":1521204377,"post_id":14825061,"comment_id":85643171,"body_markdown":"Great example, though I need to add that you do not need to send the size of the byte array. It is returned as a result of the inputstream read() function.","body":"Great example, though I need to add that you do not need to send the size of the byte array. It is returned as a result of the inputstream read() function."}],"tags":[],"owner":{"account_id":181606,"reputation":4215,"user_id":415727,"accept_rate":62,"display_name":"damix911"},"comment_count":3,"down_vote_count":0,"up_vote_count":33,"is_accepted":true,"score":33,"last_activity_date":1360640830,"creation_date":1360640830,"answer_id":14825061,"question_id":14824491,"body_markdown":"The main issue is that you need to be very careful with the encoding of the data that you send and receive. Here is a pair of programs that work together. The C# client sends a string, by first sending its length as an integer, and then sending the bytes of the string itself. The Java server reads the length, then reads the message and prints an output to the console. Then composes an echo message, computes its length, extracts the bytes and sends it back to the C# client. The client reads the length, the message and prints an output. There should be a way to avoid all the bitwise stuff, but honestly I&#39;m a little rusty with this stuff, especially on the Java side.\r\n\r\nA Java server:\r\n\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    import java.net.ServerSocket;\r\n    import java.net.Socket;\r\n    \r\n    public class JavaSocket {\r\n    \r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \t\t\r\n    \t\tServerSocket serverSocket = new ServerSocket(4343, 10);\r\n    \t\tSocket socket = serverSocket.accept();\r\n    \t\tInputStream is = socket.getInputStream();\r\n    \t\tOutputStream os = socket.getOutputStream();\r\n    \t\t\r\n    \t\t// Receiving\r\n    \t\tbyte[] lenBytes = new byte[4];\r\n    \t\tis.read(lenBytes, 0, 4);\r\n    \t\tint len = (((lenBytes[3] &amp; 0xff) &lt;&lt; 24) | ((lenBytes[2] &amp; 0xff) &lt;&lt; 16) |\r\n    \t\t\t\t  ((lenBytes[1] &amp; 0xff) &lt;&lt; 8) | (lenBytes[0] &amp; 0xff));\r\n    \t\tbyte[] receivedBytes = new byte[len];\r\n    \t\tis.read(receivedBytes, 0, len);\r\n    \t\tString received = new String(receivedBytes, 0, len);\r\n    \r\n    \t\tSystem.out.println(&quot;Server received: &quot; + received);\r\n    \t\t\r\n    \t\t// Sending\r\n    \t\tString toSend = &quot;Echo: &quot; + received;\r\n    \t\tbyte[] toSendBytes = toSend.getBytes();\r\n    \t\tint toSendLen = toSendBytes.length;\r\n    \t\tbyte[] toSendLenBytes = new byte[4];\r\n    \t\ttoSendLenBytes[0] = (byte)(toSendLen &amp; 0xff);\r\n    \t\ttoSendLenBytes[1] = (byte)((toSendLen &gt;&gt; 8) &amp; 0xff);\r\n    \t\ttoSendLenBytes[2] = (byte)((toSendLen &gt;&gt; 16) &amp; 0xff);\r\n    \t\ttoSendLenBytes[3] = (byte)((toSendLen &gt;&gt; 24) &amp; 0xff);\r\n    \t\tos.write(toSendLenBytes);\r\n    \t\tos.write(toSendBytes);\r\n    \t\t\r\n    \t\tsocket.close();\r\n    \t\tserverSocket.close();\r\n    \t}\r\n    }\r\n\r\nA C# client:\r\n\r\n    using System;\r\n    using System.Net;\r\n    using System.Net.Sockets;\r\n    \r\n    namespace CSharpSocket\r\n    {\r\n    \tclass MainClass\r\n    \t{\r\n    \t\tpublic static void Main (string[] args)\r\n    \t\t{\r\n    \t\t\tstring toSend = &quot;Hello!&quot;;\r\n    \r\n    \t\t\tIPEndPoint serverAddress = new IPEndPoint(IPAddress.Parse(&quot;192.168.0.6&quot;), 4343);\r\n    \r\n    \t\t\tSocket clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);\r\n    \t\t\tclientSocket.Connect(serverAddress);\r\n    \r\n    \t\t\t// Sending\r\n    \t\t\tint toSendLen = System.Text.Encoding.ASCII.GetByteCount(toSend);\r\n    \t\t\tbyte[] toSendBytes = System.Text.Encoding.ASCII.GetBytes(toSend);\r\n    \t\t\tbyte[] toSendLenBytes = System.BitConverter.GetBytes(toSendLen);\r\n    \t\t\tclientSocket.Send(toSendLenBytes);\r\n    \t\t\tclientSocket.Send(toSendBytes);\r\n    \r\n    \t\t\t// Receiving\r\n    \t\t\tbyte[] rcvLenBytes = new byte[4];\r\n    \t\t\tclientSocket.Receive(rcvLenBytes);\r\n    \t\t\tint rcvLen = System.BitConverter.ToInt32(rcvLenBytes, 0);\r\n    \t\t\tbyte[] rcvBytes = new byte[rcvLen];\r\n    \t\t\tclientSocket.Receive(rcvBytes);\r\n    \t\t\tString rcv = System.Text.Encoding.ASCII.GetString(rcvBytes);\r\n    \r\n    \t\t\tConsole.WriteLine(&quot;Client received: &quot; + rcv);\r\n    \r\n    \t\t\tclientSocket.Close();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n","title":"Can I communicate between Java and C# using just sockets?","body":"<p>The main issue is that you need to be very careful with the encoding of the data that you send and receive. Here is a pair of programs that work together. The C# client sends a string, by first sending its length as an integer, and then sending the bytes of the string itself. The Java server reads the length, then reads the message and prints an output to the console. Then composes an echo message, computes its length, extracts the bytes and sends it back to the C# client. The client reads the length, the message and prints an output. There should be a way to avoid all the bitwise stuff, but honestly I'm a little rusty with this stuff, especially on the Java side.</p>\n\n<p>A Java server:</p>\n\n<pre><code>import java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class JavaSocket {\n\n    public static void main(String[] args) throws IOException {\n\n        ServerSocket serverSocket = new ServerSocket(4343, 10);\n        Socket socket = serverSocket.accept();\n        InputStream is = socket.getInputStream();\n        OutputStream os = socket.getOutputStream();\n\n        // Receiving\n        byte[] lenBytes = new byte[4];\n        is.read(lenBytes, 0, 4);\n        int len = (((lenBytes[3] &amp; 0xff) &lt;&lt; 24) | ((lenBytes[2] &amp; 0xff) &lt;&lt; 16) |\n                  ((lenBytes[1] &amp; 0xff) &lt;&lt; 8) | (lenBytes[0] &amp; 0xff));\n        byte[] receivedBytes = new byte[len];\n        is.read(receivedBytes, 0, len);\n        String received = new String(receivedBytes, 0, len);\n\n        System.out.println(\"Server received: \" + received);\n\n        // Sending\n        String toSend = \"Echo: \" + received;\n        byte[] toSendBytes = toSend.getBytes();\n        int toSendLen = toSendBytes.length;\n        byte[] toSendLenBytes = new byte[4];\n        toSendLenBytes[0] = (byte)(toSendLen &amp; 0xff);\n        toSendLenBytes[1] = (byte)((toSendLen &gt;&gt; 8) &amp; 0xff);\n        toSendLenBytes[2] = (byte)((toSendLen &gt;&gt; 16) &amp; 0xff);\n        toSendLenBytes[3] = (byte)((toSendLen &gt;&gt; 24) &amp; 0xff);\n        os.write(toSendLenBytes);\n        os.write(toSendBytes);\n\n        socket.close();\n        serverSocket.close();\n    }\n}\n</code></pre>\n\n<p>A C# client:</p>\n\n<pre><code>using System;\nusing System.Net;\nusing System.Net.Sockets;\n\nnamespace CSharpSocket\n{\n    class MainClass\n    {\n        public static void Main (string[] args)\n        {\n            string toSend = \"Hello!\";\n\n            IPEndPoint serverAddress = new IPEndPoint(IPAddress.Parse(\"192.168.0.6\"), 4343);\n\n            Socket clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);\n            clientSocket.Connect(serverAddress);\n\n            // Sending\n            int toSendLen = System.Text.Encoding.ASCII.GetByteCount(toSend);\n            byte[] toSendBytes = System.Text.Encoding.ASCII.GetBytes(toSend);\n            byte[] toSendLenBytes = System.BitConverter.GetBytes(toSendLen);\n            clientSocket.Send(toSendLenBytes);\n            clientSocket.Send(toSendBytes);\n\n            // Receiving\n            byte[] rcvLenBytes = new byte[4];\n            clientSocket.Receive(rcvLenBytes);\n            int rcvLen = System.BitConverter.ToInt32(rcvLenBytes, 0);\n            byte[] rcvBytes = new byte[rcvLen];\n            clientSocket.Receive(rcvBytes);\n            String rcv = System.Text.Encoding.ASCII.GetString(rcvBytes);\n\n            Console.WriteLine(\"Client received: \" + rcv);\n\n            clientSocket.Close();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17747086,"reputation":11,"user_id":12886143,"display_name":"LifeOwner"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593190145,"creation_date":1593189726,"answer_id":62599237,"question_id":14824491,"body_markdown":"I figure how to loop this method so you can send client message over and over again. Let me know if you found this useful. I build this on Eclipse with Export Ant script. I will include ant script as well\r\n\r\n\r\n\r\n    package lineage;\r\n    \r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    import java.net.ServerSocket;\r\n    import java.net.Socket;\r\n    \r\n    \r\n    public class l2protector {\r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \t\tboolean runserver = true;\r\n        \tServerSocket serverSocket = new ServerSocket(1040, 10);\r\n            Socket socket = serverSocket.accept();\r\n            InputStream is = socket.getInputStream();\r\n            OutputStream os = socket.getOutputStream();\r\n            do\r\n            {\r\n            \ttry {\r\n                \tserverSocket = new ServerSocket(1040, 10);\r\n                    socket = serverSocket.accept();\r\n                    is = socket.getInputStream();\r\n                    os = socket.getOutputStream();\r\n    \t            // Receiving\r\n    \t            byte[] lenBytes = new byte[4];\r\n    \t            is.read(lenBytes, 0, 4);\r\n    \t            int len = (((lenBytes[3] &amp; 0xff) &lt;&lt; 24) | ((lenBytes[2] &amp; 0xff) &lt;&lt; 16) |\r\n    \t                      ((lenBytes[1] &amp; 0xff) &lt;&lt; 8) | (lenBytes[0] &amp; 0xff));\r\n    \t            byte[] receivedBytes = new byte[len];\r\n    \t            is.read(receivedBytes, 0, len);\r\n    \t            String received = new String(receivedBytes, 0, len);\r\n    \t            if(received != null) {\r\n    \t            \tSystem.out.println(&quot;Server received: &quot; + received);\r\n    \t            }\r\n    \t            // Sending\r\n    \t            String toSend = &quot;Echo: &quot; + received;\r\n    \t            byte[] toSendBytes = toSend.getBytes();\r\n    \t            int toSendLen = toSendBytes.length;\r\n    \t            byte[] toSendLenBytes = new byte[4];\r\n    \t            toSendLenBytes[0] = (byte)(toSendLen &amp; 0xff);\r\n    \t            toSendLenBytes[1] = (byte)((toSendLen &gt;&gt; 8) &amp; 0xff);\r\n    \t            toSendLenBytes[2] = (byte)((toSendLen &gt;&gt; 16) &amp; 0xff);\r\n    \t            toSendLenBytes[3] = (byte)((toSendLen &gt;&gt; 24) &amp; 0xff);\r\n    \t            os.write(toSendLenBytes);\r\n    \t            os.write(toSendBytes);\r\n    \t            socket.close();\r\n            \t}\r\n            \tcatch(Exception e) {\r\n            \t\tserverSocket.close();\r\n            \t}\r\n                \r\n            }\r\n            while(runserver);\r\n            serverSocket.close();\r\n        }\r\n    }\r\n\r\nAnt Script:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n    &lt;!-- WARNING: Eclipse auto-generated file.\r\n                  Any modifications will be overwritten.\r\n                  To include a user specific buildfile here, simply create one in the same\r\n                  directory with the processing instruction &lt;?eclipse.ant.import?&gt;\r\n                  as the first entry and export the buildfile again. --&gt;&lt;project name=&quot;AntiCheat&quot; default=&quot;dist&quot; basedir=&quot;.&quot;&gt;\r\n        &lt;description&gt;\r\n        simplest example build file\r\n      &lt;/description&gt;\r\n        &lt;!-- set global properties for this build --&gt;\r\n        &lt;property name=&quot;src&quot; location=&quot;src&quot; /&gt;\r\n        &lt;property name=&quot;build&quot; location=&quot;build&quot; /&gt;\r\n        &lt;property name=&quot;dist&quot; location=&quot;dist&quot; /&gt;\r\n        &lt;property name=&quot;version&quot; value=&quot;1.0&quot; /&gt;\r\n     \r\n        &lt;target name=&quot;init&quot;&gt;\r\n            &lt;!-- Create the time stamp --&gt;\r\n            &lt;tstamp /&gt;\r\n            &lt;!-- Create the build directory structure used by compile --&gt;\r\n            &lt;mkdir dir=&quot;${build}&quot; /&gt;\r\n        &lt;/target&gt;\r\n     \r\n        &lt;target name=&quot;compile&quot; depends=&quot;init&quot; description=&quot;compile the source&quot;&gt;\r\n            &lt;!-- Compile the java code from ${src} into ${build} --&gt;\r\n            &lt;javac srcdir=&quot;${src}&quot; destdir=&quot;${build}&quot; /&gt;\r\n        &lt;/target&gt;\r\n     \r\n        &lt;target name=&quot;dist&quot; depends=&quot;compile&quot; description=&quot;generate the distribution&quot;&gt;\r\n            &lt;buildnumber /&gt;\r\n            &lt;!-- Create the distribution directory --&gt;\r\n            &lt;mkdir dir=&quot;${dist}/lib&quot; /&gt;\r\n     \r\n            &lt;!-- Put everything in ${build} into the MyApplication-${version}.${build.number}.jar --&gt;\r\n            &lt;jar destfile=&quot;${dist}/lib/MyApplication-${version}.${build.number}.jar&quot; basedir=&quot;${build}&quot; /&gt;\r\n        &lt;/target&gt;\r\n     \r\n        &lt;target name=&quot;clean&quot; description=&quot;clean up&quot;&gt;\r\n            &lt;!-- Delete the ${build} and ${dist} directory trees --&gt;\r\n            &lt;delete dir=&quot;${build}&quot; /&gt;\r\n            &lt;delete dir=&quot;${dist}&quot; /&gt;\r\n        &lt;/target&gt;\r\n    &lt;/project&gt;","title":"Can I communicate between Java and C# using just sockets?","body":"<p>I figure how to loop this method so you can send client message over and over again. Let me know if you found this useful. I build this on Eclipse with Export Ant script. I will include ant script as well</p>\n<pre><code>package lineage;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\n\npublic class l2protector {\n    public static void main(String[] args) throws IOException {\n        boolean runserver = true;\n        ServerSocket serverSocket = new ServerSocket(1040, 10);\n        Socket socket = serverSocket.accept();\n        InputStream is = socket.getInputStream();\n        OutputStream os = socket.getOutputStream();\n        do\n        {\n            try {\n                serverSocket = new ServerSocket(1040, 10);\n                socket = serverSocket.accept();\n                is = socket.getInputStream();\n                os = socket.getOutputStream();\n                // Receiving\n                byte[] lenBytes = new byte[4];\n                is.read(lenBytes, 0, 4);\n                int len = (((lenBytes[3] &amp; 0xff) &lt;&lt; 24) | ((lenBytes[2] &amp; 0xff) &lt;&lt; 16) |\n                          ((lenBytes[1] &amp; 0xff) &lt;&lt; 8) | (lenBytes[0] &amp; 0xff));\n                byte[] receivedBytes = new byte[len];\n                is.read(receivedBytes, 0, len);\n                String received = new String(receivedBytes, 0, len);\n                if(received != null) {\n                    System.out.println(&quot;Server received: &quot; + received);\n                }\n                // Sending\n                String toSend = &quot;Echo: &quot; + received;\n                byte[] toSendBytes = toSend.getBytes();\n                int toSendLen = toSendBytes.length;\n                byte[] toSendLenBytes = new byte[4];\n                toSendLenBytes[0] = (byte)(toSendLen &amp; 0xff);\n                toSendLenBytes[1] = (byte)((toSendLen &gt;&gt; 8) &amp; 0xff);\n                toSendLenBytes[2] = (byte)((toSendLen &gt;&gt; 16) &amp; 0xff);\n                toSendLenBytes[3] = (byte)((toSendLen &gt;&gt; 24) &amp; 0xff);\n                os.write(toSendLenBytes);\n                os.write(toSendBytes);\n                socket.close();\n            }\n            catch(Exception e) {\n                serverSocket.close();\n            }\n            \n        }\n        while(runserver);\n        serverSocket.close();\n    }\n}\n</code></pre>\n<p>Ant Script:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;!-- WARNING: Eclipse auto-generated file.\n              Any modifications will be overwritten.\n              To include a user specific buildfile here, simply create one in the same\n              directory with the processing instruction &lt;?eclipse.ant.import?&gt;\n              as the first entry and export the buildfile again. --&gt;&lt;project name=&quot;AntiCheat&quot; default=&quot;dist&quot; basedir=&quot;.&quot;&gt;\n    &lt;description&gt;\n    simplest example build file\n  &lt;/description&gt;\n    &lt;!-- set global properties for this build --&gt;\n    &lt;property name=&quot;src&quot; location=&quot;src&quot; /&gt;\n    &lt;property name=&quot;build&quot; location=&quot;build&quot; /&gt;\n    &lt;property name=&quot;dist&quot; location=&quot;dist&quot; /&gt;\n    &lt;property name=&quot;version&quot; value=&quot;1.0&quot; /&gt;\n \n    &lt;target name=&quot;init&quot;&gt;\n        &lt;!-- Create the time stamp --&gt;\n        &lt;tstamp /&gt;\n        &lt;!-- Create the build directory structure used by compile --&gt;\n        &lt;mkdir dir=&quot;${build}&quot; /&gt;\n    &lt;/target&gt;\n \n    &lt;target name=&quot;compile&quot; depends=&quot;init&quot; description=&quot;compile the source&quot;&gt;\n        &lt;!-- Compile the java code from ${src} into ${build} --&gt;\n        &lt;javac srcdir=&quot;${src}&quot; destdir=&quot;${build}&quot; /&gt;\n    &lt;/target&gt;\n \n    &lt;target name=&quot;dist&quot; depends=&quot;compile&quot; description=&quot;generate the distribution&quot;&gt;\n        &lt;buildnumber /&gt;\n        &lt;!-- Create the distribution directory --&gt;\n        &lt;mkdir dir=&quot;${dist}/lib&quot; /&gt;\n \n        &lt;!-- Put everything in ${build} into the MyApplication-${version}.${build.number}.jar --&gt;\n        &lt;jar destfile=&quot;${dist}/lib/MyApplication-${version}.${build.number}.jar&quot; basedir=&quot;${build}&quot; /&gt;\n    &lt;/target&gt;\n \n    &lt;target name=&quot;clean&quot; description=&quot;clean up&quot;&gt;\n        &lt;!-- Delete the ${build} and ${dist} directory trees --&gt;\n        &lt;delete dir=&quot;${build}&quot; /&gt;\n        &lt;delete dir=&quot;${dist}&quot; /&gt;\n    &lt;/target&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19019062,"reputation":60,"user_id":13883478,"display_name":"0x000000F4"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677510686,"creation_date":1677510686,"answer_id":75582212,"question_id":14824491,"body_markdown":"I coded here is a advanced and improved version of \r\n\r\n&gt; @damix911 code: https://stackoverflow.com/a/14825061/13883478\r\n&gt; \r\n\r\n**is = input stream of Socket.**\r\n\r\nJava Side receiving with tag/label of data:\r\n\r\n    ByteArrayOutputStream bs = new ByteArrayOutputStream();\r\n        while (true) {\r\n                                byte[] lenBytes = new byte[4];\r\n                                is.read(lenBytes, 0, 4);\r\n                                int len = (((lenBytes[3] &amp; 0xff) &lt;&lt; 24) | ((lenBytes[2] &amp; 0xff) &lt;&lt; 16) |\r\n                                        ((lenBytes[1] &amp; 0xff) &lt;&lt; 8) | (lenBytes[0] &amp; 0xff));\r\n                                byte[] receivedBytes = new byte[len];\r\n                                is.read(receivedBytes, 0, len);\r\n        \r\n                                String received = new String(receivedBytes, 0, len);\r\n                                System.out.println(received);\r\n                                String tag = received.split(&quot;\\\\|&quot;)[0];\r\n                                int veri_uzunluk = Integer.parseInt(received.split(&quot;\\\\|&quot;)[1].replace(&quot;&gt;&quot;, &quot;&quot;));\r\n                                byte[] buffer = new byte[8192];\r\n                                int read = 0;\r\n                                while (true) {\r\n                                    read = is.read(buffer, 0, 8192);\r\n                                    bs.write(buffer, 0, read);\r\n                                    if (bs.toByteArray().length == veri_uzunluk) {\r\n                                        break;\r\n                                    }\r\n                                }\r\n                                System.out.println(bs.toByteArray().length);\r\n                                DataProcess(tag, bs.toByteArray());\r\n                                bs.flush();\r\n                                bs.close();\r\n                                bs = null;\r\n                                bs = new ByteArrayOutputStream();\r\n                                //String neymis = new String(recData,0, veri_uzunluk);\r\n                                //System.out.println(tag + &quot;&gt;&gt;&gt;&quot; + neymis);\r\n                                //\r\n        \r\n                            }\r\n\r\nExample process data:\r\n\r\n    private void DataProcess(String label, byte[] dataBuff) {\r\n    \r\n    switch (label.split(&quot;\\\\|&quot;)[0]) {\r\n                    case &quot;&lt;RESIM&gt;&quot;:\r\n                        FileOutputStream fs = null;\r\n                        try {\r\n                            fs = new FileOutputStream(&quot;C:\\TEST.jpg&quot;);\r\n                            fs.write(dataBuff, 0, dataBuff.length);\r\n                        } catch (Exception e) {\r\n                        }\r\n    \r\n                        break;\r\n    }\r\n\r\n}\r\n\r\nC# Side send data with packer:\r\n\r\n    public void PackerNew(string tag, byte[] data, Socket client, string extra = &quot;null&quot;)\r\n            {\r\n                string toSend = $&quot;&lt;{tag}&gt;|{data.Length}|{extra}&gt;&quot;; ;\r\n    \r\n                int toSendLen = Encoding.UTF8.GetBytes(toSend).Length;\r\n                byte[] toSendBytes = System.Text.Encoding.UTF8.GetBytes(toSend);\r\n                byte[] toSendLenBytes = System.BitConverter.GetBytes(toSendLen);\r\n                client.Send(toSendLenBytes, 0, toSendLenBytes.Length, SocketFlags.None);\r\n                client.Send(toSendBytes, 0, toSendBytes.Length, SocketFlags.None);\r\n                client.Send(data, 0, data.Length, SocketFlags.None);\r\n            }\r\n            \r\n            private void button6_Click(object sender, EventArgs e)\r\n            {\r\n                PackerNew(&quot;RESIM&quot;, File.ReadAllBytes(&quot;TEST.jpg&quot;), clint, &quot;null&quot;); // any byte[] data what you want..\r\n            }","title":"Can I communicate between Java and C# using just sockets?","body":"<p>I coded here is a advanced and improved version of</p>\n<blockquote>\n<p>@damix911 code: <a href=\"https://stackoverflow.com/a/14825061/13883478\">https://stackoverflow.com/a/14825061/13883478</a></p>\n</blockquote>\n<p><strong>is = input stream of Socket.</strong></p>\n<p>Java Side receiving with tag/label of data:</p>\n<pre><code>ByteArrayOutputStream bs = new ByteArrayOutputStream();\n    while (true) {\n                            byte[] lenBytes = new byte[4];\n                            is.read(lenBytes, 0, 4);\n                            int len = (((lenBytes[3] &amp; 0xff) &lt;&lt; 24) | ((lenBytes[2] &amp; 0xff) &lt;&lt; 16) |\n                                    ((lenBytes[1] &amp; 0xff) &lt;&lt; 8) | (lenBytes[0] &amp; 0xff));\n                            byte[] receivedBytes = new byte[len];\n                            is.read(receivedBytes, 0, len);\n    \n                            String received = new String(receivedBytes, 0, len);\n                            System.out.println(received);\n                            String tag = received.split(&quot;\\\\|&quot;)[0];\n                            int veri_uzunluk = Integer.parseInt(received.split(&quot;\\\\|&quot;)[1].replace(&quot;&gt;&quot;, &quot;&quot;));\n                            byte[] buffer = new byte[8192];\n                            int read = 0;\n                            while (true) {\n                                read = is.read(buffer, 0, 8192);\n                                bs.write(buffer, 0, read);\n                                if (bs.toByteArray().length == veri_uzunluk) {\n                                    break;\n                                }\n                            }\n                            System.out.println(bs.toByteArray().length);\n                            DataProcess(tag, bs.toByteArray());\n                            bs.flush();\n                            bs.close();\n                            bs = null;\n                            bs = new ByteArrayOutputStream();\n                            //String neymis = new String(recData,0, veri_uzunluk);\n                            //System.out.println(tag + &quot;&gt;&gt;&gt;&quot; + neymis);\n                            //\n    \n                        }\n</code></pre>\n<p>Example process data:</p>\n<pre><code>private void DataProcess(String label, byte[] dataBuff) {\n\nswitch (label.split(&quot;\\\\|&quot;)[0]) {\n                case &quot;&lt;RESIM&gt;&quot;:\n                    FileOutputStream fs = null;\n                    try {\n                        fs = new FileOutputStream(&quot;C:\\TEST.jpg&quot;);\n                        fs.write(dataBuff, 0, dataBuff.length);\n                    } catch (Exception e) {\n                    }\n\n                    break;\n}\n</code></pre>\n<p>}</p>\n<p>C# Side send data with packer:</p>\n<pre><code>public void PackerNew(string tag, byte[] data, Socket client, string extra = &quot;null&quot;)\n        {\n            string toSend = $&quot;&lt;{tag}&gt;|{data.Length}|{extra}&gt;&quot;; ;\n\n            int toSendLen = Encoding.UTF8.GetBytes(toSend).Length;\n            byte[] toSendBytes = System.Text.Encoding.UTF8.GetBytes(toSend);\n            byte[] toSendLenBytes = System.BitConverter.GetBytes(toSendLen);\n            client.Send(toSendLenBytes, 0, toSendLenBytes.Length, SocketFlags.None);\n            client.Send(toSendBytes, 0, toSendBytes.Length, SocketFlags.None);\n            client.Send(data, 0, data.Length, SocketFlags.None);\n        }\n        \n        private void button6_Click(object sender, EventArgs e)\n        {\n            PackerNew(&quot;RESIM&quot;, File.ReadAllBytes(&quot;TEST.jpg&quot;), clint, &quot;null&quot;); // any byte[] data what you want..\n        }\n</code></pre>\n"}],"owner":{"account_id":1483401,"reputation":782,"user_id":1392195,"accept_rate":100,"display_name":"DaedalusUsedPerl"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33321,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":14825061,"answer_count":3,"score":11,"last_activity_date":1677510686,"creation_date":1360636015,"question_id":14824491,"body_markdown":"More specifically, if a computer has a server (a `java.net.ServerSocket` instance) can I connect to it using a C# `System.Net.Sockets.Socket` instance?","title":"Can I communicate between Java and C# using just sockets?","body":"<p>More specifically, if a computer has a server (a <code>java.net.ServerSocket</code> instance) can I connect to it using a C# <code>System.Net.Sockets.Socket</code> instance?</p>\n"},{"tags":["java","android","in-app-update","app-update"],"owner":{"account_id":12244530,"reputation":2176,"user_id":8936551,"accept_rate":20,"display_name":"sejn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677510524,"creation_date":1677510194,"question_id":75582107,"body_markdown":"Unable to see the in-app prompt in Android version 11 and above.\r\n\r\nI have used the [in-app][1] to see the prompt in the app. But it failed to show the prompt in android versions 11 and 12. I have added the below code in my fragment. \r\n\r\nNote: If I add it in the Activity file same error is occurring in Android version 11 and 12.\r\n\r\nRestarting the app after update also not happening in the version 11 10 and 12\r\n\r\nCode:\r\n\r\n     @Override\r\n        public void onCreate(Bundle savedInstanceState) {\r\n           Calendar calendar = Calendar.getInstance();\r\n            int currentDay = calendar.get(Calendar.DAY_OF_MONTH);\r\n            SharedPreferences settings = getActivity().getSharedPreferences(&quot;PREFS&quot;, 0);\r\n            int lastday = settings.getInt(&quot;day&quot;, 0);\r\n            if (lastday != currentDay) {\r\n                SharedPreferences.Editor editor = settings.edit();\r\n                editor.putInt(&quot;day&quot;, currentDay);\r\n                editor.commit();\r\n                appUpdateManager = AppUpdateManagerFactory.create(getContext());\r\n                installStateUpdatedListener = state -&gt; {\r\n                    if (state.installStatus() == InstallStatus.INSTALLED) {\r\n                        removeInstallStateUpdateListener();\r\n                    } else {\r\n                        LogUtils.LOGD(&quot;state.installstatus&quot;);\r\n                        Toast.makeText(getContext(), &quot;App update is in progress! App will restart soon.&quot;, Toast.LENGTH_LONG).show();\r\n                    }\r\n                };\r\n                appUpdateManager.registerListener(installStateUpdatedListener);\r\n                checkUpdate();\r\n            }\r\n    \r\n      }\r\n\r\n\r\n\r\n \r\n\r\n    private void checkUpdate() {\r\n            Task&lt;AppUpdateInfo&gt; appUpdateInfoTask = appUpdateManager.getAppUpdateInfo();\r\n            appUpdateInfoTask.addOnSuccessListener(appUpdateInfo -&gt; {\r\n                if (appUpdateInfo.updateAvailability() == UpdateAvailability.UPDATE_AVAILABLE\r\n                        &amp;&amp; appUpdateInfo.isUpdateTypeAllowed(AppUpdateType.FLEXIBLE)) {\r\n                    startUpdateFlow(appUpdateInfo);\r\n                } else if (appUpdateInfo.updateAvailability() == UpdateAvailability.UPDATE_NOT_AVAILABLE) {\r\n                    Log.e(&quot;Already updated&quot;, &quot;the app and no new version available.&quot;);\r\n                } else if (appUpdateInfo.installStatus() == InstallStatus.DOWNLOADED) {\r\n                    popupSnackBarForCompleteUpdate();\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void startUpdateFlow(AppUpdateInfo appUpdateInfo) {\r\n            try {\r\n                appUpdateManager.startUpdateFlowForResult(appUpdateInfo, AppUpdateType.FLEXIBLE, getActivity(), FLEXIBLE_APP_UPDATE_REQ_CODE);\r\n            } catch (IntentSender.SendIntentException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        private void popupSnackBarForCompleteUpdate() {\r\n            Toast.makeText(getContext(), &quot;App is downloaded successfully.&quot;, Toast.LENGTH_LONG).show();\r\n            PackageManager packageManager = getContext().getPackageManager();\r\n            Intent intent = packageManager.getLaunchIntentForPackage(getContext().getPackageName());\r\n            ComponentName componentName = intent.getComponent();\r\n            Intent mainIntent = null;\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.HONEYCOMB) {\r\n                mainIntent = Intent.makeRestartActivityTask(componentName);\r\n            }\r\n            // mainIntent = Intent.makeRestartActivityTask(componentName);\r\n            getContext().startActivity(mainIntent);\r\n            Runtime.getRuntime().exit(0);\r\n    \r\n        }\r\n    \r\n    \r\n      private void removeInstallStateUpdateListener() {\r\n            if (appUpdateManager != null) {\r\n                appUpdateManager.unregisterListener(installStateUpdatedListener);\r\n            }\r\n        }\r\n    \r\n     @Override\r\n        public void onResume() {\r\n            super.onResume();\r\n      if (appUpdateManager != null) {\r\n                    appUpdateManager.getAppUpdateInfo().addOnSuccessListener(new OnSuccessListener&lt;AppUpdateInfo&gt;()\r\n                    {\r\n                        @Override\r\n                        public void onSuccess(AppUpdateInfo result)\r\n                        {\r\n                            if(result.updateAvailability() == UpdateAvailability.DEVELOPER_TRIGGERED_UPDATE_IN_PROGRESS)\r\n                            {\r\n                                try\r\n                                {\r\n                                    appUpdateManager.startUpdateFlowForResult(result,AppUpdateType.IMMEDIATE, getActivity() ,10);\r\n                                } catch (IntentSender.SendIntentException e)\r\n                                {\r\n                                    e.printStackTrace();\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n    \r\n    \r\n     @Override\r\n        public void onStop() {\r\n            removeInstallStateUpdateListener();\r\n           super.onStop();\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://developer.android.com/guide/playcore/in-app-updates","title":"Unable to see the in-app prompt in Android version 11 and above","body":"<p>Unable to see the in-app prompt in Android version 11 and above.</p>\n<p>I have used the <a href=\"https://developer.android.com/guide/playcore/in-app-updates\" rel=\"nofollow noreferrer\">in-app</a> to see the prompt in the app. But it failed to show the prompt in android versions 11 and 12. I have added the below code in my fragment.</p>\n<p>Note: If I add it in the Activity file same error is occurring in Android version 11 and 12.</p>\n<p>Restarting the app after update also not happening in the version 11 10 and 12</p>\n<p>Code:</p>\n<pre><code> @Override\n    public void onCreate(Bundle savedInstanceState) {\n       Calendar calendar = Calendar.getInstance();\n        int currentDay = calendar.get(Calendar.DAY_OF_MONTH);\n        SharedPreferences settings = getActivity().getSharedPreferences(&quot;PREFS&quot;, 0);\n        int lastday = settings.getInt(&quot;day&quot;, 0);\n        if (lastday != currentDay) {\n            SharedPreferences.Editor editor = settings.edit();\n            editor.putInt(&quot;day&quot;, currentDay);\n            editor.commit();\n            appUpdateManager = AppUpdateManagerFactory.create(getContext());\n            installStateUpdatedListener = state -&gt; {\n                if (state.installStatus() == InstallStatus.INSTALLED) {\n                    removeInstallStateUpdateListener();\n                } else {\n                    LogUtils.LOGD(&quot;state.installstatus&quot;);\n                    Toast.makeText(getContext(), &quot;App update is in progress! App will restart soon.&quot;, Toast.LENGTH_LONG).show();\n                }\n            };\n            appUpdateManager.registerListener(installStateUpdatedListener);\n            checkUpdate();\n        }\n\n  }\n\n\n\n\n\nprivate void checkUpdate() {\n        Task&lt;AppUpdateInfo&gt; appUpdateInfoTask = appUpdateManager.getAppUpdateInfo();\n        appUpdateInfoTask.addOnSuccessListener(appUpdateInfo -&gt; {\n            if (appUpdateInfo.updateAvailability() == UpdateAvailability.UPDATE_AVAILABLE\n                    &amp;&amp; appUpdateInfo.isUpdateTypeAllowed(AppUpdateType.FLEXIBLE)) {\n                startUpdateFlow(appUpdateInfo);\n            } else if (appUpdateInfo.updateAvailability() == UpdateAvailability.UPDATE_NOT_AVAILABLE) {\n                Log.e(&quot;Already updated&quot;, &quot;the app and no new version available.&quot;);\n            } else if (appUpdateInfo.installStatus() == InstallStatus.DOWNLOADED) {\n                popupSnackBarForCompleteUpdate();\n            }\n        });\n    }\n\n    private void startUpdateFlow(AppUpdateInfo appUpdateInfo) {\n        try {\n            appUpdateManager.startUpdateFlowForResult(appUpdateInfo, AppUpdateType.FLEXIBLE, getActivity(), FLEXIBLE_APP_UPDATE_REQ_CODE);\n        } catch (IntentSender.SendIntentException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void popupSnackBarForCompleteUpdate() {\n        Toast.makeText(getContext(), &quot;App is downloaded successfully.&quot;, Toast.LENGTH_LONG).show();\n        PackageManager packageManager = getContext().getPackageManager();\n        Intent intent = packageManager.getLaunchIntentForPackage(getContext().getPackageName());\n        ComponentName componentName = intent.getComponent();\n        Intent mainIntent = null;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.HONEYCOMB) {\n            mainIntent = Intent.makeRestartActivityTask(componentName);\n        }\n        // mainIntent = Intent.makeRestartActivityTask(componentName);\n        getContext().startActivity(mainIntent);\n        Runtime.getRuntime().exit(0);\n\n    }\n\n\n  private void removeInstallStateUpdateListener() {\n        if (appUpdateManager != null) {\n            appUpdateManager.unregisterListener(installStateUpdatedListener);\n        }\n    }\n\n @Override\n    public void onResume() {\n        super.onResume();\n  if (appUpdateManager != null) {\n                appUpdateManager.getAppUpdateInfo().addOnSuccessListener(new OnSuccessListener&lt;AppUpdateInfo&gt;()\n                {\n                    @Override\n                    public void onSuccess(AppUpdateInfo result)\n                    {\n                        if(result.updateAvailability() == UpdateAvailability.DEVELOPER_TRIGGERED_UPDATE_IN_PROGRESS)\n                        {\n                            try\n                            {\n                                appUpdateManager.startUpdateFlowForResult(result,AppUpdateType.IMMEDIATE, getActivity() ,10);\n                            } catch (IntentSender.SendIntentException e)\n                            {\n                                e.printStackTrace();\n                            }\n                        }\n                    }\n                });\n            }\n\n\n @Override\n    public void onStop() {\n        removeInstallStateUpdateListener();\n       super.onStop();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","queue","activemq"],"answers":[{"tags":[],"owner":{"account_id":8072204,"reputation":4156,"user_id":6084589,"display_name":"Matt Pavlovich"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677510377,"creation_date":1677510377,"answer_id":75582138,"question_id":75555389,"body_markdown":"You need to add an authorization plugin and settings to define security access to certain queues and topics.\r\n\r\nsee Authorization: https://activemq.apache.org/security.html\r\n\r\n","title":"How to secure ActiveMQ in Spring Boot","body":"<p>You need to add an authorization plugin and settings to define security access to certain queues and topics.</p>\n<p>see Authorization: <a href=\"https://activemq.apache.org/security.html\" rel=\"nofollow noreferrer\">https://activemq.apache.org/security.html</a></p>\n"}],"owner":{"account_id":19449285,"reputation":19,"user_id":14226098,"display_name":"Om Prakash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677510377,"creation_date":1677234406,"question_id":75555389,"body_markdown":"I want to secure my connection to ActiveMQ in Spring Boot. Currently Spring Boot is connecting to my ActiveMQ without any username and password, so I want to avoid this. So as per the resources I did these two things:\r\n\r\n`activemq.xml`:\r\n```xml\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\r\n\r\n    &lt;bean id=&quot;securityPlugin&quot; class=&quot;org.apache.activemq.security.SimpleAuthenticationPlugin&quot;&gt;\r\n        &lt;property name=&quot;userMap&quot;&gt;\r\n            &lt;map&gt;\r\n                &lt;entry key=&quot;admin&quot; value=&quot;password&quot;/&gt;\r\n            &lt;/map&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;broker xmlns=&quot;http://activemq.apache.org/schema/core&quot; brokerName=&quot;localhost&quot; dataDirectory=&quot;${activemq.data}&quot;&gt;\r\n        &lt;plugins&gt;\r\n            &lt;simpleAuthenticationPlugin anonymousAccessAllowed=&quot;false&quot;&gt;\r\n                &lt;users&gt;\r\n                    &lt;authenticationUser username=&quot;admin&quot; password=&quot;password&quot; groups=&quot;admins&quot;/&gt;\r\n                &lt;/users&gt;\r\n                &lt;groupMappings&gt;\r\n                    &lt;groupMapping groupPrincipal=&quot;admins&quot; roles=&quot;admins&quot;/&gt;\r\n                &lt;/groupMappings&gt;\r\n            &lt;/simpleAuthenticationPlugin&gt;\r\n        &lt;/plugins&gt;\r\n        &lt;transportConnectors&gt;\r\n            &lt;transportConnector name=&quot;openwire&quot; uri=&quot;tcp://0.0.0.0:61616&quot;/&gt;\r\n        &lt;/transportConnectors&gt;\r\n    &lt;/broker&gt;\r\n&lt;/beans&gt;\r\n```\r\n`application.properties`:\r\n\r\n```\r\nspring.activemq.broker-url=tcp://localhost:61616\r\nspring.activemq.user=admin\r\nspring.activemq.password=password\r\nspring.activemq.packages.trust-all=true\r\nspring.activemq.packages.trusted=com.hfc.card.config\r\nspring.activemq.pool.enabled=false\r\nspring.activemq.in-memory=true\r\nspring.activemq.pool.enabled=false\r\nspring.activemq.pool.max-connections=10\r\nspring.activemq.broker-url=activemq.xml\r\n```    \r\n\r\nAfter providing all these things still Spring Boot is able to connect to ActiveMQ without using username and password. Is there something I am missing?","title":"How to secure ActiveMQ in Spring Boot","body":"<p>I want to secure my connection to ActiveMQ in Spring Boot. Currently Spring Boot is connecting to my ActiveMQ without any username and password, so I want to avoid this. So as per the resources I did these two things:</p>\n<p><code>activemq.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\n\n    &lt;bean id=&quot;securityPlugin&quot; class=&quot;org.apache.activemq.security.SimpleAuthenticationPlugin&quot;&gt;\n        &lt;property name=&quot;userMap&quot;&gt;\n            &lt;map&gt;\n                &lt;entry key=&quot;admin&quot; value=&quot;password&quot;/&gt;\n            &lt;/map&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;broker xmlns=&quot;http://activemq.apache.org/schema/core&quot; brokerName=&quot;localhost&quot; dataDirectory=&quot;${activemq.data}&quot;&gt;\n        &lt;plugins&gt;\n            &lt;simpleAuthenticationPlugin anonymousAccessAllowed=&quot;false&quot;&gt;\n                &lt;users&gt;\n                    &lt;authenticationUser username=&quot;admin&quot; password=&quot;password&quot; groups=&quot;admins&quot;/&gt;\n                &lt;/users&gt;\n                &lt;groupMappings&gt;\n                    &lt;groupMapping groupPrincipal=&quot;admins&quot; roles=&quot;admins&quot;/&gt;\n                &lt;/groupMappings&gt;\n            &lt;/simpleAuthenticationPlugin&gt;\n        &lt;/plugins&gt;\n        &lt;transportConnectors&gt;\n            &lt;transportConnector name=&quot;openwire&quot; uri=&quot;tcp://0.0.0.0:61616&quot;/&gt;\n        &lt;/transportConnectors&gt;\n    &lt;/broker&gt;\n&lt;/beans&gt;\n</code></pre>\n<p><code>application.properties</code>:</p>\n<pre><code>spring.activemq.broker-url=tcp://localhost:61616\nspring.activemq.user=admin\nspring.activemq.password=password\nspring.activemq.packages.trust-all=true\nspring.activemq.packages.trusted=com.hfc.card.config\nspring.activemq.pool.enabled=false\nspring.activemq.in-memory=true\nspring.activemq.pool.enabled=false\nspring.activemq.pool.max-connections=10\nspring.activemq.broker-url=activemq.xml\n</code></pre>\n<p>After providing all these things still Spring Boot is able to connect to ActiveMQ without using username and password. Is there something I am missing?</p>\n"},{"tags":["java","android","objectinputstream","eofexception"],"answers":[{"comments":[{"owner":{"account_id":23128584,"reputation":85,"user_id":17234028,"display_name":"Daniel Hern&#225;ndez"},"score":0,"creation_date":1677509909,"post_id":75582005,"comment_id":133346559,"body_markdown":"&quot;to postpone writing until reading is finished and then see what is gonna happen.&quot; I have tried to look into ways to make the file writing thread safe but I havent had any luck whatsoever, do you perhaps have any code examples that might point me to the right direction?","body":"&quot;to postpone writing until reading is finished and then see what is gonna happen.&quot; I have tried to look into ways to make the file writing thread safe but I havent had any luck whatsoever, do you perhaps have any code examples that might point me to the right direction?"},{"owner":{"account_id":3436150,"reputation":622,"user_id":2879245,"accept_rate":71,"display_name":"Michał Marcinkowski"},"score":0,"creation_date":1677510227,"post_id":75582005,"comment_id":133346698,"body_markdown":"I do not have one, but it is rather simple. You may use AtomicBoolean isReading = new AtomicBoolean() and share it between those two methods. At the beginning of the reading method you set it to true, at the end to false. Then wrap all the code in the writing method with while(isReading), at the end of that while(isReading) block, add some System.sleep(500) to delay another attempt of writing.","body":"I do not have one, but it is rather simple. You may use AtomicBoolean isReading = new AtomicBoolean() and share it between those two methods. At the beginning of the reading method you set it to true, at the end to false. Then wrap all the code in the writing method with while(isReading), at the end of that while(isReading) block, add some System.sleep(500) to delay another attempt of writing."}],"tags":[],"owner":{"account_id":3436150,"reputation":622,"user_id":2879245,"accept_rate":71,"display_name":"Michał Marcinkowski"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677510267,"creation_date":1677509615,"answer_id":75582005,"question_id":75581835,"body_markdown":"Basically - EOF exception might be thrown in two situations, \r\n* when you&#39;ve reached end of file and there is nothing more to read\r\n* when the file is corrupted\r\n\r\nIf you&#39;re leverage reading from file on EOF exception then you won&#39;t be able determine which one is the actual source of the problem. Do you need to to detect this difference? If not - base reading on EOF exception\r\n\r\nWhat the author of mentioned answer suggested (at least I understand it this way), to use some RandomAccessFile approach, in which apart from the actual list of objects you would store an integer as first object which will tell you how many files are there. \r\n\r\nHave you considered if aren&#39;t there a situation in which those reads and writes are called simultaneously? If you&#39;re trying to read a file in between some different is writing to it, such a situation may happen. \r\n\r\nPersonally I&#39;d try to add some synchronization, to postpone writing until reading is finished and then see what is gonna happen because I believe this is the root cause of the problem.","title":"ObjectInputStream returning EOFException when reading List of Object","body":"<p>Basically - EOF exception might be thrown in two situations,</p>\n<ul>\n<li>when you've reached end of file and there is nothing more to read</li>\n<li>when the file is corrupted</li>\n</ul>\n<p>If you're leverage reading from file on EOF exception then you won't be able determine which one is the actual source of the problem. Do you need to to detect this difference? If not - base reading on EOF exception</p>\n<p>What the author of mentioned answer suggested (at least I understand it this way), to use some RandomAccessFile approach, in which apart from the actual list of objects you would store an integer as first object which will tell you how many files are there.</p>\n<p>Have you considered if aren't there a situation in which those reads and writes are called simultaneously? If you're trying to read a file in between some different is writing to it, such a situation may happen.</p>\n<p>Personally I'd try to add some synchronization, to postpone writing until reading is finished and then see what is gonna happen because I believe this is the root cause of the problem.</p>\n"}],"owner":{"account_id":23128584,"reputation":85,"user_id":17234028,"display_name":"Daniel Hern&#225;ndez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75582005,"answer_count":1,"score":0,"last_activity_date":1677510267,"creation_date":1677508574,"question_id":75581835,"body_markdown":"Im returning a list of all the objects stored in some temporary files in my Android project. When the list its appended the file its deleted.\r\n\r\n```\r\n    public static &lt;T&gt; List&lt;T&gt; fileToLogList(Context context) {\r\n        String path = context.getFilesDir()\r\n                .getAbsolutePath();\r\n        List&lt;T&gt; list = new ArrayList&lt;&gt;();\r\n        FileInputStream fis;\r\n        try {\r\n            File directory = new File(path);\r\n            File[] files = directory.listFiles();\r\n            for (File file : files) {\r\n                fis = new FileInputStream(file);\r\n                ObjectInputStream ois = new ObjectInputStream(fis);\r\n                list.addAll((List&lt;T&gt;) ois.readObject());\r\n                ois.close();\r\n                fis.close();\r\n                context.deleteFile(file.getName());\r\n            }\r\n        } catch (FileNotFoundException e) {\r\n            return new ArrayList&lt;&gt;();\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (ClassNotFoundException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        return list;\r\n    }\r\n```\r\nThe problem is that sometimes ois.readObject() will return a EOFException. I dont understand the accepted answer of the [following question](https://stackoverflow.com/questions/2626163/java-fileinputstream-objectinputstream-reaches-end-of-file-eof). I have tried the second answer and it also returns an exception.\r\n\r\n\r\n```\r\nE/AndroidRuntime: FATAL EXCEPTION: Timer-1\r\n    Process: com.example.application, PID: 774\r\n    java.lang.RuntimeException: java.io.EOFException\r\n        at com.example.application.utils.Utils.fileToLogList(Utils.java:172)\r\n        at com.example.application.logging.LogService$2.run(LogService.java:31)\r\n        at java.util.TimerThread.mainLoop(Timer.java:562)\r\n        at java.util.TimerThread.run(Timer.java:512)\r\n     Caused by: java.io.EOFException\r\n        at java.io.ObjectInputStream$BlockDataInputStream.peekByte(ObjectInputStream.java:2751)\r\n        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1378)\r\n        at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2114)\r\n        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2038)\r\n        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1899)\r\n        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1412)\r\n        at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2114)\r\n        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2038)\r\n        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1899)\r\n        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1412)\r\n        at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2114)\r\n        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2038)\r\n        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1899)\r\n        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1412)\r\n        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:427)\r\n        at java.util.concurrent.CopyOnWriteArrayList.readObject(CopyOnWriteArrayList.java:931)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1066)\r\n        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2013)\r\n        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1899)\r\n        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1412)\r\n        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:427)\r\n        at com.example.application.utils.Utils.fileToLogList(Utils.java:164)\r\n        at com.example.application.logging.LogService$2.run(LogService.java:31)&#160;\r\n        at java.util.TimerThread.mainLoop(Timer.java:562)&#160;\r\n        at java.util.TimerThread.run(Timer.java:512)&#160;\r\n```\r\n\r\nLastly this is my method to write into the files:\r\n\r\n```\r\n    public static &lt;T&gt; void logListIntoFile(List&lt;T&gt; output, Context context) {\r\n        FileOutputStream fos;\r\n        try {\r\n            // writes into a file named YYYY-MM-DD_HH:MM\r\n            fos = context.openFileOutput(getCurrentDateMinutes() + &quot;.tmp&quot;, Context.MODE_PRIVATE);\r\n            ObjectOutputStream os = new ObjectOutputStream(fos);\r\n            os.writeObject(output);\r\n            os.close();\r\n            fos.close();\r\n        } catch (FileNotFoundException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```","title":"ObjectInputStream returning EOFException when reading List of Object","body":"<p>Im returning a list of all the objects stored in some temporary files in my Android project. When the list its appended the file its deleted.</p>\n<pre><code>    public static &lt;T&gt; List&lt;T&gt; fileToLogList(Context context) {\n        String path = context.getFilesDir()\n                .getAbsolutePath();\n        List&lt;T&gt; list = new ArrayList&lt;&gt;();\n        FileInputStream fis;\n        try {\n            File directory = new File(path);\n            File[] files = directory.listFiles();\n            for (File file : files) {\n                fis = new FileInputStream(file);\n                ObjectInputStream ois = new ObjectInputStream(fis);\n                list.addAll((List&lt;T&gt;) ois.readObject());\n                ois.close();\n                fis.close();\n                context.deleteFile(file.getName());\n            }\n        } catch (FileNotFoundException e) {\n            return new ArrayList&lt;&gt;();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        } catch (ClassNotFoundException e) {\n            throw new RuntimeException(e);\n        }\n        return list;\n    }\n</code></pre>\n<p>The problem is that sometimes ois.readObject() will return a EOFException. I dont understand the accepted answer of the <a href=\"https://stackoverflow.com/questions/2626163/java-fileinputstream-objectinputstream-reaches-end-of-file-eof\">following question</a>. I have tried the second answer and it also returns an exception.</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: Timer-1\n    Process: com.example.application, PID: 774\n    java.lang.RuntimeException: java.io.EOFException\n        at com.example.application.utils.Utils.fileToLogList(Utils.java:172)\n        at com.example.application.logging.LogService$2.run(LogService.java:31)\n        at java.util.TimerThread.mainLoop(Timer.java:562)\n        at java.util.TimerThread.run(Timer.java:512)\n     Caused by: java.io.EOFException\n        at java.io.ObjectInputStream$BlockDataInputStream.peekByte(ObjectInputStream.java:2751)\n        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1378)\n        at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2114)\n        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2038)\n        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1899)\n        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1412)\n        at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2114)\n        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2038)\n        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1899)\n        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1412)\n        at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2114)\n        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2038)\n        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1899)\n        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1412)\n        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:427)\n        at java.util.concurrent.CopyOnWriteArrayList.readObject(CopyOnWriteArrayList.java:931)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1066)\n        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2013)\n        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1899)\n        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1412)\n        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:427)\n        at com.example.application.utils.Utils.fileToLogList(Utils.java:164)\n        at com.example.application.logging.LogService$2.run(LogService.java:31) \n        at java.util.TimerThread.mainLoop(Timer.java:562) \n        at java.util.TimerThread.run(Timer.java:512) \n</code></pre>\n<p>Lastly this is my method to write into the files:</p>\n<pre><code>    public static &lt;T&gt; void logListIntoFile(List&lt;T&gt; output, Context context) {\n        FileOutputStream fos;\n        try {\n            // writes into a file named YYYY-MM-DD_HH:MM\n            fos = context.openFileOutput(getCurrentDateMinutes() + &quot;.tmp&quot;, Context.MODE_PRIVATE);\n            ObjectOutputStream os = new ObjectOutputStream(fos);\n            os.writeObject(output);\n            os.close();\n            fos.close();\n        } catch (FileNotFoundException e) {\n            throw new RuntimeException(e);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n"},{"tags":["java","okta-api"],"comments":[{"owner":{"account_id":3979621,"reputation":2003,"user_id":3281886,"accept_rate":60,"display_name":"Philipp Grigoryev"},"score":0,"creation_date":1677513380,"post_id":75582102,"comment_id":133347881,"body_markdown":"Have you checked relevant guides from Okta? https://developer.okta.com/docs/guides/redirect-authentication/","body":"Have you checked relevant guides from Okta? <a href=\"https://developer.okta.com/docs/guides/redirect-authentication/\" rel=\"nofollow noreferrer\">developer.okta.com/docs/guides/redirect-authentication</a>"},{"owner":{"account_id":2883526,"reputation":2320,"user_id":3439993,"accept_rate":33,"display_name":"Deltharis"},"score":0,"creation_date":1677515529,"post_id":75582102,"comment_id":133348621,"body_markdown":"Authentication API, which is what that SDK covers, for some reason does not contain authorization and retrieval of access token. It&#39;s kind of confusing. Generally when I needed to get access token from java I just manually constructed the HTTP call - see https://stackoverflow.com/questions/52144721/how-to-get-access-token-using-client-credentials-using-java-code for instance.","body":"Authentication API, which is what that SDK covers, for some reason does not contain authorization and retrieval of access token. It&#39;s kind of confusing. Generally when I needed to get access token from java I just manually constructed the HTTP call - see <a href=\"https://stackoverflow.com/questions/52144721/how-to-get-access-token-using-client-credentials-using-java-code\" title=\"how to get access token using client credentials using java code\">stackoverflow.com/questions/52144721/&hellip;</a> for instance."}],"owner":{"account_id":5331956,"reputation":6999,"user_id":4252320,"accept_rate":59,"display_name":"ergonaut"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":211,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677510154,"creation_date":1677510154,"question_id":75582102,"body_markdown":"I managed to get a session token, but I believe I need to get an access token instead in order to start querying data from the server.  How do I convert this in Java?\r\n\r\nI believe I&#39;m looking for the /oauth2/default/v1/authorize equivalent in the okta-authn-sdk-api.jar libraries but I don&#39;t see it.  I&#39;m looking for an example of this being done somewhere but I cannot find one.","title":"How do I get an access token from OKTA?","body":"<p>I managed to get a session token, but I believe I need to get an access token instead in order to start querying data from the server.  How do I convert this in Java?</p>\n<p>I believe I'm looking for the /oauth2/default/v1/authorize equivalent in the okta-authn-sdk-api.jar libraries but I don't see it.  I'm looking for an example of this being done somewhere but I cannot find one.</p>\n"},{"tags":["java","maven","java-8","java-11"],"comments":[{"owner":{"account_id":5835327,"reputation":968,"user_id":4598583,"accept_rate":57,"display_name":"Graham Leggett"},"score":0,"creation_date":1688895433,"post_id":68892633,"comment_id":135133162,"body_markdown":"The question doesn&#39;t match the description. &quot;javax.xml.bind&quot; and &quot;javax.xml.bind.annotation&quot; are different packages, and the answers are not interchangeable.","body":"The question doesn&#39;t match the description. &quot;javax.xml.bind&quot; and &quot;javax.xml.bind.annotation&quot; are different packages, and the answers are not interchangeable."}],"answers":[{"comments":[{"owner":{"account_id":17784143,"reputation":91,"user_id":12914623,"display_name":"Ana"},"score":1,"creation_date":1629721829,"post_id":68892688,"comment_id":121754042,"body_markdown":"and after adding should I directly retry running the mvn clean install command?","body":"and after adding should I directly retry running the mvn clean install command?"},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1629724397,"post_id":68892688,"comment_id":121755216,"body_markdown":"Sure. Possibly you will have to add more dependencies and some more setting. You did not present your pom.xml and other essential settings","body":"Sure. Possibly you will have to add more dependencies and some more setting. You did not present your pom.xml and other essential settings"},{"owner":{"account_id":3366514,"reputation":380,"user_id":2826961,"display_name":"Ameer Ul Islam"},"score":0,"creation_date":1649620011,"post_id":68892688,"comment_id":126916105,"body_markdown":"and I had to do this as well otherwise my test was failing `mvn clean install -DskipTests`...\nI&#39;m not a java developer so I don&#39;t know if skipping these tests were a good idea.","body":"and I had to do this as well otherwise my test was failing <code>mvn clean install -DskipTests</code>... I&#39;m not a java developer so I don&#39;t know if skipping these tests were a good idea."}],"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"comment_count":3,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1677510050,"creation_date":1629721541,"answer_id":68892688,"question_id":68892633,"body_markdown":"Try adding\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n    &lt;version&gt;2.3.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\ninto your pom.xml file","title":"package javax.xml.bind.annotation does not exist error","body":"<p>Try adding</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n    &lt;version&gt;2.3.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>into your pom.xml file</p>\n"},{"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":2,"creation_date":1629724987,"post_id":68892798,"comment_id":121755518,"body_markdown":"That&#39;s the reason why Maven exist to prevent such things.","body":"That&#39;s the reason why Maven exist to prevent such things."}],"tags":[],"owner":{"account_id":20554779,"reputation":59,"user_id":15086634,"display_name":"epithite32"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1629722028,"creation_date":1629722028,"answer_id":68892798,"question_id":68892633,"body_markdown":"Download jaxb API jar file, and add it as an external jar to the Java build path.","title":"package javax.xml.bind.annotation does not exist error","body":"<p>Download jaxb API jar file, and add it as an external jar to the Java build path.</p>\n"},{"tags":[],"owner":{"account_id":22066749,"reputation":3758,"user_id":16328516,"display_name":"TriS"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1629722571,"creation_date":1629722571,"answer_id":68892935,"question_id":68892633,"body_markdown":"The library `javax.xml.bind` has been removed from Java 11 release.&lt;br/&gt;\r\n[Release Notes][1] &lt;br/&gt;\r\nFor fixing this you have add those dependencies explicitly in your POM file or add it to your classpath accordingly.\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n      &lt;version&gt;2.3.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\r\n      &lt;version&gt;2.3.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n      &lt;version&gt;2.3.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAfter adding it to your POM you can build the maven project. First time you can skip tests.\r\n\r\n    mvn clean install -DskipTests\r\n\r\n  [1]: https://www.oracle.com/java/technologies/javase/11-relnote-issues.html#JDK-8190378\r\n","title":"package javax.xml.bind.annotation does not exist error","body":"<p>The library <code>javax.xml.bind</code> has been removed from Java 11 release.<br/>\n<a href=\"https://www.oracle.com/java/technologies/javase/11-relnote-issues.html#JDK-8190378\" rel=\"nofollow noreferrer\">Release Notes</a> <br/>\nFor fixing this you have add those dependencies explicitly in your POM file or add it to your classpath accordingly.</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n  &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n  &lt;version&gt;2.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n  &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\n  &lt;version&gt;2.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n  &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n  &lt;version&gt;2.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>After adding it to your POM you can build the maven project. First time you can skip tests.</p>\n<pre><code>mvn clean install -DskipTests\n</code></pre>\n"}],"owner":{"account_id":17784143,"reputation":91,"user_id":12914623,"display_name":"Ana"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35659,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"closed_date":1629740879,"answer_count":3,"score":2,"last_activity_date":1677510050,"creation_date":1629721344,"question_id":68892633,"body_markdown":"I am trying to run &quot;**mvn clean install**&quot; command, but I get the following error:\r\n\r\n&gt; java:[42,22] package javax.xml.bind does not exist\r\n\r\nDo you have any idea why?","title":"package javax.xml.bind.annotation does not exist error","body":"<p>I am trying to run &quot;<strong>mvn clean install</strong>&quot; command, but I get the following error:</p>\n<blockquote>\n<p>java:[42,22] package javax.xml.bind does not exist</p>\n</blockquote>\n<p>Do you have any idea why?</p>\n"},{"tags":["java","distribution"],"answers":[{"comments":[{"owner":{"account_id":354298,"reputation":5638,"user_id":692560,"accept_rate":86,"display_name":"Vala"},"score":1,"creation_date":1319715921,"post_id":7915336,"comment_id":9667107,"body_markdown":"I&#39;m not convinced. By the sounds of things the ideal solution would provide separate packages per OS that will run without Java and offer to install a JRE if not currently present as well as having an OS specific way of launching the software. Can you do something anything like that with web start?","body":"I&#39;m not convinced. By the sounds of things the ideal solution would provide separate packages per OS that will run without Java and offer to install a JRE if not currently present as well as having an OS specific way of launching the software. Can you do something anything like that with web start?"},{"owner":{"account_id":60900,"reputation":4415,"user_id":181766,"accept_rate":88,"display_name":"jjchiw"},"score":0,"creation_date":1319716402,"post_id":7915336,"comment_id":9667226,"body_markdown":"Don&#39;t really understad the comment, well....why would you need separate packages per OS, java is like do it once run it everywhere with JRE, if you want something OS independent, do two java apps..\n\nWith java web start you can choose to run the application locally or run it from the web...","body":"Don&#39;t really understad the comment, well....why would you need separate packages per OS, java is like do it once run it everywhere with JRE, if you want something OS independent, do two java apps..  With java web start you can choose to run the application locally or run it from the web..."},{"owner":{"account_id":354298,"reputation":5638,"user_id":692560,"accept_rate":86,"display_name":"Vala"},"score":0,"creation_date":1319716632,"post_id":7915336,"comment_id":9667290,"body_markdown":"Well you don&#39;t need a separate package per OS if JWS integrates in and looks like a native program. I didn&#39;t think it would run without having Java previously installed however (in which case you need native code, hence separate packages per OS). If JWS can run without a JVM on the client then that&#39;s fine.","body":"Well you don&#39;t need a separate package per OS if JWS integrates in and looks like a native program. I didn&#39;t think it would run without having Java previously installed however (in which case you need native code, hence separate packages per OS). If JWS can run without a JVM on the client then that&#39;s fine."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1319720361,"post_id":7915336,"comment_id":9668206,"body_markdown":"Great answer!  There are some more handy links available in the [JWS info. page](http://stackoverflow.com/tags/java-web-start/info).  BTW - just discovered that link to the Developers Guide is available in the Java 7 docs. and updated the link.  The pages are slightly different as well.","body":"Great answer!  There are some more handy links available in the <a href=\"http://stackoverflow.com/tags/java-web-start/info\">JWS info. page</a>.  BTW - just discovered that link to the Developers Guide is available in the Java 7 docs. and updated the link.  The pages are slightly different as well."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1592528632,"post_id":7915336,"comment_id":110465493,"body_markdown":"*Java Web Start* is being phased out by Oracle. See their white paper, [*Java Client Roadmap Update*](https://www.oracle.com/technetwork/java/javase/javaclientroadmapupdatev2020may-6548840.pdf) dated 2020-05-11. You may be interested in the open-source implementation of Java Web Start known as the [*OpenWebStart*](https://openwebstart.com) project.","body":"<i>Java Web Start</i> is being phased out by Oracle. See their white paper, <a href=\"https://www.oracle.com/technetwork/java/javase/javaclientroadmapupdatev2020may-6548840.pdf\" rel=\"nofollow noreferrer\"><i>Java Client Roadmap Update</i></a> dated 2020-05-11. You may be interested in the open-source implementation of Java Web Start known as the <a href=\"https://openwebstart.com\" rel=\"nofollow noreferrer\"><i>OpenWebStart</i></a> project."}],"tags":[],"owner":{"account_id":60900,"reputation":4415,"user_id":181766,"accept_rate":88,"display_name":"jjchiw"},"comment_count":5,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1592596251,"creation_date":1319715627,"answer_id":7915336,"question_id":7915315,"body_markdown":"[Java Web Start][1] I think is the option you&#39;re looking for...\n\n**Edit**\n\n  Comment from Basil Bourque @ 2020:\n&gt; Java Web Start is being phased out by Oracle. See their white paper,\n&gt; [*Java Client Roadmap Update*][2] dated 2020-05-11. You may be interested in\n&gt; the open-source implementation of Java Web Start known as the\n&gt; [*OpenWebStart*][3] project.\n\n\n  [1]: http://download.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/contents.html\n  [2]: https://www.oracle.com/technetwork/java/javase/javaclientroadmapupdatev2020may-6548840.pdf\n  [3]: https://openwebstart.com/","title":"How can I package a Java desktop application?","body":"<p><a href=\"http://download.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/contents.html\" rel=\"nofollow noreferrer\">Java Web Start</a> I think is the option you're looking for...</p>\n<p><strong>Edit</strong></p>\n<p>Comment from Basil Bourque @ 2020:</p>\n<blockquote>\n<p>Java Web Start is being phased out by Oracle. See their white paper,\n<a href=\"https://www.oracle.com/technetwork/java/javase/javaclientroadmapupdatev2020may-6548840.pdf\" rel=\"nofollow noreferrer\"><em>Java Client Roadmap Update</em></a> dated 2020-05-11. You may be interested in\nthe open-source implementation of Java Web Start known as the\n<a href=\"https://openwebstart.com/\" rel=\"nofollow noreferrer\"><em>OpenWebStart</em></a> project.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":252475,"reputation":8006,"user_id":530543,"accept_rate":79,"display_name":"Rohan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1319715650,"creation_date":1319715650,"answer_id":7915339,"question_id":7915315,"body_markdown":"Are you looking for something like this: \r\n\r\nhttp://www.regexlab.com/en/jar2exe/\r\n\r\n?\r\n\r\nThat allows the enduser to run the .exe without installing.","title":"How can I package a Java desktop application?","body":"<p>Are you looking for something like this: </p>\n\n<p><a href=\"http://www.regexlab.com/en/jar2exe/\" rel=\"nofollow\">http://www.regexlab.com/en/jar2exe/</a></p>\n\n<p>?</p>\n\n<p>That allows the enduser to run the .exe without installing.</p>\n"},{"tags":[],"owner":{"account_id":348869,"reputation":1910,"user_id":683825,"accept_rate":100,"display_name":"Paul Cager"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1319715891,"creation_date":1319715891,"answer_id":7915373,"question_id":7915315,"body_markdown":"There are a number of options - Java web Start, 3rd party installer, etc.\r\n\r\nHave a look at http://mindprod.com/jgloss/installer.html for an explanation.","title":"How can I package a Java desktop application?","body":"<p>There are a number of options - Java web Start, 3rd party installer, etc.</p>\n\n<p>Have a look at <a href=\"http://mindprod.com/jgloss/installer.html\" rel=\"nofollow\">http://mindprod.com/jgloss/installer.html</a> for an explanation.</p>\n"},{"tags":[],"owner":{"account_id":98681,"reputation":12022,"user_id":266978,"accept_rate":100,"display_name":"Baltasarq"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1319716150,"creation_date":1319716150,"answer_id":7915420,"question_id":7915315,"body_markdown":"I think that you&#39;re looking for [IzPak][1]. There is even a GUI available called [PackJacket][2]\r\n\r\n\r\n  [1]: http://izpack.org/\r\n  [2]: http://packjacket.sourceforge.net/","title":"How can I package a Java desktop application?","body":"<p>I think that you're looking for <a href=\"http://izpack.org/\" rel=\"nofollow\">IzPak</a>. There is even a GUI available called <a href=\"http://packjacket.sourceforge.net/\" rel=\"nofollow\">PackJacket</a></p>\n"},{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1592528775,"post_id":7915425,"comment_id":110465528,"body_markdown":"Update: *Java Web Start* is being phased out by Oracle. See their white paper, [*Java Client Roadmap Update*](https://www.oracle.com/technetwork/java/javase/javaclientroadmapupdatev2020may-6548840.pdf) dated 2020-05-11. One alternative is the open-source implementation of Java Web Start known as the [*OpenWebStart*](https://openwebstart.com) project.","body":"Update: <i>Java Web Start</i> is being phased out by Oracle. See their white paper, <a href=\"https://www.oracle.com/technetwork/java/javase/javaclientroadmapupdatev2020may-6548840.pdf\" rel=\"nofollow noreferrer\"><i>Java Client Roadmap Update</i></a> dated 2020-05-11. One alternative is the open-source implementation of Java Web Start known as the <a href=\"https://openwebstart.com\" rel=\"nofollow noreferrer\"><i>OpenWebStart</i></a> project."}],"tags":[],"owner":{"account_id":365809,"reputation":4497,"user_id":710951,"accept_rate":75,"display_name":"Alba Mendez"},"comment_count":1,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1569775372,"creation_date":1319716177,"answer_id":7915425,"question_id":7915315,"body_markdown":"Users of your Java app **must have the JRE installed** in order to run it.  \r\nYou can either tell them to install Java first, or **distribute JRE with your app**, as [Processing](http://processing.org/) does.  \r\nNote, however, that your packaged program will be heavy if you include JRE with it. And, if you want to do that, users will need to download the appropiate package for their platform.\r\n\r\n## Executable Java Wrappers ##\r\n\r\nThey take your Java app as input and _wrap_ them in an executable (for a specified platform). You can customize them as you like;\r\nand if the user doesn&#39;t have Java installed, the download page will open.\r\n\r\nSome examples are [Launch4J](http://launch4j.sourceforge.net/), [JSmooth](http://jsmooth.sourceforge.net/) and [Jar2EXE](http://www.regexlab.com/en/jar2exe/).  \r\n&amp;nbsp;\r\n\r\n## Installers ##\r\n\r\nThey are independent applications configured to _copy_ your app files to the user&#39;s computer and (optionally) create a shortcut.\r\n\r\nSome installers are written in Java, so they&#39;re multiplatform. In this case, the installer is a `.jar`.  \r\nSome others are platform-dependent, but you have the advantage that you don&#39;t need to wrap them.\r\n\r\n**Java installers:** [IzPack](http://izpack.org/), [Packlet](http://packlet.sourceforge.net/), [PackJacket](http://packjacket.sourceforge.net/), [Antigen](http://antigen.sourceforge.net/), &amp;hellip;  \r\n&amp;nbsp;\r\n\r\n## Java Web Start ##\r\n\r\nIt&#39;s a Java feature that allows you users to easily run your apps. You give them a `.jnpl` file,  \r\nthey open it, and Java downloads the latest version of your app and runs it. No packaging troubles!\r\n\r\n---\r\n\r\nSee the complete list of resources [here](http://java-source.net/open-source/installer-generators).","title":"How can I package a Java desktop application?","body":"<p>Users of your Java app <strong>must have the JRE installed</strong> in order to run it.<br>\nYou can either tell them to install Java first, or <strong>distribute JRE with your app</strong>, as <a href=\"http://processing.org/\" rel=\"noreferrer\">Processing</a> does.<br>\nNote, however, that your packaged program will be heavy if you include JRE with it. And, if you want to do that, users will need to download the appropiate package for their platform.</p>\n\n<h2>Executable Java Wrappers</h2>\n\n<p>They take your Java app as input and <em>wrap</em> them in an executable (for a specified platform). You can customize them as you like;\nand if the user doesn't have Java installed, the download page will open.</p>\n\n<p>Some examples are <a href=\"http://launch4j.sourceforge.net/\" rel=\"noreferrer\">Launch4J</a>, <a href=\"http://jsmooth.sourceforge.net/\" rel=\"noreferrer\">JSmooth</a> and <a href=\"http://www.regexlab.com/en/jar2exe/\" rel=\"noreferrer\">Jar2EXE</a>.<br>\n&nbsp;</p>\n\n<h2>Installers</h2>\n\n<p>They are independent applications configured to <em>copy</em> your app files to the user's computer and (optionally) create a shortcut.</p>\n\n<p>Some installers are written in Java, so they're multiplatform. In this case, the installer is a <code>.jar</code>.<br>\nSome others are platform-dependent, but you have the advantage that you don't need to wrap them.</p>\n\n<p><strong>Java installers:</strong> <a href=\"http://izpack.org/\" rel=\"noreferrer\">IzPack</a>, <a href=\"http://packlet.sourceforge.net/\" rel=\"noreferrer\">Packlet</a>, <a href=\"http://packjacket.sourceforge.net/\" rel=\"noreferrer\">PackJacket</a>, <a href=\"http://antigen.sourceforge.net/\" rel=\"noreferrer\">Antigen</a>, &hellip;<br>\n&nbsp;</p>\n\n<h2>Java Web Start</h2>\n\n<p>It's a Java feature that allows you users to easily run your apps. You give them a <code>.jnpl</code> file,<br>\nthey open it, and Java downloads the latest version of your app and runs it. No packaging troubles!</p>\n\n<hr>\n\n<p>See the complete list of resources <a href=\"http://java-source.net/open-source/installer-generators\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1619229902,"creation_date":1319720196,"answer_id":7916150,"question_id":7915315,"body_markdown":"**Edit:** The Java Plug-In, required for both applets and Java Web Start, was deprecated in Java 9 and removed from browsers around the same time. So this answer is obsolete. Only leaving it here to warn people against following this path.\r\n\r\n---\r\n\r\nThe optimal installation for a cross-platform app. with a GUI is to be found in [Java Web Start](https://stackoverflow.com/tags/java-web-start/info).  To quote the linked document in part:\r\n\r\n&gt; JWS provides many appealing features including, but not limited to, splash screens, **desktop integration,** file associations, automatic update ..\r\n\r\n## Other matters\r\n\r\n&gt; ..an OS specific way of launching the software.\r\n\r\nAdding a shortcut (with icon) to the desktop or start/program menu (desktop integration) is about as platform specific as you can get.\r\n\r\n&gt; ..will run without Java and offer to install a JRE if not currently present \r\n\r\nUse `deployJava.js`, linked in the 2&lt;sup&gt;nd&lt;/sup&gt; last list item under &#39;See also:&#39;.\r\n\r\n&gt; Well you don&#39;t need a separate package per OS if JWS integrates in and looks like a native program.\r\n\r\nUsing the native PLAF would be a good start.","title":"How can I package a Java desktop application?","body":"<p><strong>Edit:</strong> The Java Plug-In, required for both applets and Java Web Start, was deprecated in Java 9 and removed from browsers around the same time. So this answer is obsolete. Only leaving it here to warn people against following this path.</p>\n<hr />\n<p>The optimal installation for a cross-platform app. with a GUI is to be found in <a href=\"https://stackoverflow.com/tags/java-web-start/info\">Java Web Start</a>.  To quote the linked document in part:</p>\n<blockquote>\n<p>JWS provides many appealing features including, but not limited to, splash screens, <strong>desktop integration,</strong> file associations, automatic update ..</p>\n</blockquote>\n<h2>Other matters</h2>\n<blockquote>\n<p>..an OS specific way of launching the software.</p>\n</blockquote>\n<p>Adding a shortcut (with icon) to the desktop or start/program menu (desktop integration) is about as platform specific as you can get.</p>\n<blockquote>\n<p>..will run without Java and offer to install a JRE if not currently present</p>\n</blockquote>\n<p>Use <code>deployJava.js</code>, linked in the 2<sup>nd</sup> last list item under 'See also:'.</p>\n<blockquote>\n<p>Well you don't need a separate package per OS if JWS integrates in and looks like a native program.</p>\n</blockquote>\n<p>Using the native PLAF would be a good start.</p>\n"},{"comments":[{"owner":{"account_id":102134,"reputation":18322,"user_id":274354,"accept_rate":68,"display_name":"mydoghasworms"},"score":0,"creation_date":1621429276,"post_id":62461826,"comment_id":119492510,"body_markdown":"Just out of curiosity: (I am not so familiar with Java) how big is the JVM that you bundle with a desktop application this way? Is there a way to trim down the bundled JRE libraries to only those needed by the app? I seem to remember this being a general complaint, that bundling the JRE makes app packages laughably massive.","body":"Just out of curiosity: (I am not so familiar with Java) how big is the JVM that you bundle with a desktop application this way? Is there a way to trim down the bundled JRE libraries to only those needed by the app? I seem to remember this being a general complaint, that bundling the JRE makes app packages laughably massive."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1621438974,"post_id":62461826,"comment_id":119497457,"body_markdown":"@mydoghasworms Use `jlink` (mentioned in Answer) to omit many of the 75 modules bundled with a JVM, if not needed by your particular app. As for size, I’ve seen reports of the runtime being about 40 megs, a seven-fold reduction from a full JDK — though your mileage may vary.","body":"@mydoghasworms Use <code>jlink</code> (mentioned in Answer) to omit many of the 75 modules bundled with a JVM, if not needed by your particular app. As for size, I’ve seen reports of the runtime being about 40 megs, a seven-fold reduction from a full JDK — though your mileage may vary."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1645014585,"creation_date":1592529692,"answer_id":62461826,"question_id":7915315,"body_markdown":"# Bundle JVM within your app\r\n\r\nThe modern solution to deploying a Java-based desktop app is to bundle a [JVM][1] with your app, delivered to the user as a double-clickable package just like other &quot;normal&quot; apps. Think of the JVM as another dependency to be incorporated within your final app.\r\n\r\nLearn about:\r\n\r\n - [*Java Platform Module System*](https://en.wikipedia.org/wiki/Java_Platform_Module_System)\r\n - *jlink* ([JEP 282](https://openjdk.java.net/jeps/282))\r\n - [*JEP 220: Modular Run-Time Images*](https://openjdk.java.net/jeps/220)\r\n - *jpackage* ([JEP 343](https://openjdk.java.net/jeps/343))\r\n\r\n\r\nYou could ship a [JavaFX][2] ([OpenJFX][3]) app this way, as well as a [Swing][4] app (the predecessor to JavaFX). \r\n\r\nOne advantage of this approach is that you know exactly what JVM is being used to run your particular app. Of course it also means you must release a new version of your app when a JVM update contains a relevant fix. Your users no longer are concerned with downloading, installing, and upgrading a JVM, as that chore is now the responsibility of the developer. \r\n\r\nOne disadvantage of this approach is that you must build, test, and distribute separate binaries of your app, one for each platform (macOS, MS Windows, BSD, Linux, and so on). \r\n\r\nSee also [my Answer][5] on a related Question, [*How to use jdk without jre in Java 11*](https://stackoverflow.com/q/52584888/642706).\r\n\r\nSee the [Answer by Will Iverson][6] for what looks like some useful tooling.\r\n\r\n# Compiled native app\r\n\r\n## GraalVM\r\n\r\nA cutting-edge variation of this approach is to build an ahead-of-time-compiled (versus [JIT][7]) native-code version of your app using [GraalVM][8] and its [native image generator][9].\r\n\r\n## Project Leyden\r\n\r\nPossibly related: Oracle&#39;s Project Leyden. See initial [announcement by Mark Reinhold][10], and see [this article][11], 2020-05-07.\r\n\r\n\r\n\r\n# *Java Web Start* phase-out\r\n\r\nSome other Answers discuss *Java Web Start*. Be aware that *Java Web Start* and *Java Applets* technologies are both being phased out by Oracle. See their white paper, [*Java Client Roadmap Update*](https://www.oracle.com/technetwork/java/javase/javaclientroadmapupdatev2020may-6548840.pdf) dated 2020-05-11. \r\n\r\nA possible alternative is the open-source implementation of Java Web Start known as the [*OpenWebStart*](https://openwebstart.com) project.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_virtual_machine\r\n  [2]: https://en.wikipedia.org/wiki/JavaFX\r\n  [3]: https://openjfx.io\r\n  [4]: https://en.wikipedia.org/wiki/Swing_(Java)\r\n  [5]: https://stackoverflow.com/a/54737656/642706\r\n  [6]: https://stackoverflow.com/a/67237971/642706\r\n  [7]: https://en.wikipedia.org/wiki/Just-in-time_compilation\r\n  [8]: https://www.graalvm.org\r\n  [9]: https://www.graalvm.org/reference-manual/native-image/\r\n  [10]: https://mail.openjdk.java.net/pipermail/discuss/2020-April/005429.html\r\n  [11]: https://www.theserverside.com/news/252482853/Oracles-Project-Leyden-uses-static-images-to-ease-Java-pain","title":"How can I package a Java desktop application?","body":"<h1>Bundle JVM within your app</h1>\n<p>The modern solution to deploying a Java-based desktop app is to bundle a <a href=\"https://en.wikipedia.org/wiki/Java_virtual_machine\" rel=\"nofollow noreferrer\">JVM</a> with your app, delivered to the user as a double-clickable package just like other &quot;normal&quot; apps. Think of the JVM as another dependency to be incorporated within your final app.</p>\n<p>Learn about:</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_Platform_Module_System\" rel=\"nofollow noreferrer\"><em>Java Platform Module System</em></a></li>\n<li><em>jlink</em> (<a href=\"https://openjdk.java.net/jeps/282\" rel=\"nofollow noreferrer\">JEP 282</a>)</li>\n<li><a href=\"https://openjdk.java.net/jeps/220\" rel=\"nofollow noreferrer\"><em>JEP 220: Modular Run-Time Images</em></a></li>\n<li><em>jpackage</em> (<a href=\"https://openjdk.java.net/jeps/343\" rel=\"nofollow noreferrer\">JEP 343</a>)</li>\n</ul>\n<p>You could ship a <a href=\"https://en.wikipedia.org/wiki/JavaFX\" rel=\"nofollow noreferrer\">JavaFX</a> (<a href=\"https://openjfx.io\" rel=\"nofollow noreferrer\">OpenJFX</a>) app this way, as well as a <a href=\"https://en.wikipedia.org/wiki/Swing_(Java)\" rel=\"nofollow noreferrer\">Swing</a> app (the predecessor to JavaFX).</p>\n<p>One advantage of this approach is that you know exactly what JVM is being used to run your particular app. Of course it also means you must release a new version of your app when a JVM update contains a relevant fix. Your users no longer are concerned with downloading, installing, and upgrading a JVM, as that chore is now the responsibility of the developer.</p>\n<p>One disadvantage of this approach is that you must build, test, and distribute separate binaries of your app, one for each platform (macOS, MS Windows, BSD, Linux, and so on).</p>\n<p>See also <a href=\"https://stackoverflow.com/a/54737656/642706\">my Answer</a> on a related Question, <a href=\"https://stackoverflow.com/q/52584888/642706\"><em>How to use jdk without jre in Java 11</em></a>.</p>\n<p>See the <a href=\"https://stackoverflow.com/a/67237971/642706\">Answer by Will Iverson</a> for what looks like some useful tooling.</p>\n<h1>Compiled native app</h1>\n<h2>GraalVM</h2>\n<p>A cutting-edge variation of this approach is to build an ahead-of-time-compiled (versus <a href=\"https://en.wikipedia.org/wiki/Just-in-time_compilation\" rel=\"nofollow noreferrer\">JIT</a>) native-code version of your app using <a href=\"https://www.graalvm.org\" rel=\"nofollow noreferrer\">GraalVM</a> and its <a href=\"https://www.graalvm.org/reference-manual/native-image/\" rel=\"nofollow noreferrer\">native image generator</a>.</p>\n<h2>Project Leyden</h2>\n<p>Possibly related: Oracle's Project Leyden. See initial <a href=\"https://mail.openjdk.java.net/pipermail/discuss/2020-April/005429.html\" rel=\"nofollow noreferrer\">announcement by Mark Reinhold</a>, and see <a href=\"https://www.theserverside.com/news/252482853/Oracles-Project-Leyden-uses-static-images-to-ease-Java-pain\" rel=\"nofollow noreferrer\">this article</a>, 2020-05-07.</p>\n<h1><em>Java Web Start</em> phase-out</h1>\n<p>Some other Answers discuss <em>Java Web Start</em>. Be aware that <em>Java Web Start</em> and <em>Java Applets</em> technologies are both being phased out by Oracle. See their white paper, <a href=\"https://www.oracle.com/technetwork/java/javase/javaclientroadmapupdatev2020may-6548840.pdf\" rel=\"nofollow noreferrer\"><em>Java Client Roadmap Update</em></a> dated 2020-05-11.</p>\n<p>A possible alternative is the open-source implementation of Java Web Start known as the <a href=\"https://openwebstart.com\" rel=\"nofollow noreferrer\"><em>OpenWebStart</em></a> project.</p>\n"},{"tags":[],"owner":{"account_id":119626,"reputation":2009,"user_id":311440,"display_name":"Will Iverson"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1619221075,"creation_date":1619221075,"answer_id":67237971,"question_id":7915315,"body_markdown":"If you are using Java 16, jlink and jpackage will do what you need - build a desktop application and installer.\r\n\r\nHere is a GitHub template that uses Maven to build a small / reduced JVM + JavaFX application. It uses Java modules and jlink to produce the small JVM, but uses the normal class path for running your application. GitHub Actions are used to produce the installers for macOS, Windows, and Linux.\r\n\r\nhttps://github.com/wiverson/maven-jpackage-template\r\n\r\nHere is another (WIP) version of the template with a small Swing UI and Spring Boot underneath - no JavaFX.\r\n\r\nhttps://github.com/wiverson/desktop-spring-boot\r\n\r\n","title":"How can I package a Java desktop application?","body":"<p>If you are using Java 16, jlink and jpackage will do what you need - build a desktop application and installer.</p>\n<p>Here is a GitHub template that uses Maven to build a small / reduced JVM + JavaFX application. It uses Java modules and jlink to produce the small JVM, but uses the normal class path for running your application. GitHub Actions are used to produce the installers for macOS, Windows, and Linux.</p>\n<p><a href=\"https://github.com/wiverson/maven-jpackage-template\" rel=\"nofollow noreferrer\">https://github.com/wiverson/maven-jpackage-template</a></p>\n<p>Here is another (WIP) version of the template with a small Swing UI and Spring Boot underneath - no JavaFX.</p>\n<p><a href=\"https://github.com/wiverson/desktop-spring-boot\" rel=\"nofollow noreferrer\">https://github.com/wiverson/desktop-spring-boot</a></p>\n"},{"tags":[],"owner":{"account_id":2594612,"reputation":1443,"user_id":2248578,"display_name":"Mike Hearn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677509740,"creation_date":1677509740,"answer_id":75582026,"question_id":7915315,"body_markdown":"As of 2022 there is a new option, [Hydraulic Conveyor](https://hydraulic.software/). It&#39;s got a bunch of features that are useful for shipping JVM desktop apps:\r\n\r\n* It creates self-updating packages for Windows/Mac/Linux, using MSIX on Windows and Sparkle on macOS and native package managers on Linux.\r\n* It can ship for every OS from any OS i.e. you can ship to Mac/Windows from Linux, or Windows/Linux from Mac etc.\r\n* It runs jlink for you for each OS.\r\n* It provides binary launchers (no batch files or shell scripts) which set up the JVM environment in useful ways, like with computed system properties for your install dir, your update site URL.\r\n* Apps can update in the background or for Mac/Windows installs you can force the app to update automatically on startup if there&#39;s a new version available, like a web app would.\r\n* It handles code signing and notarization for you.\r\n* It generates a download page for your users and can use GitHub Releases as a download and update site.\r\n\r\nSo, if you want to ship a JVM desktop app it&#39;s got you covered. There&#39;s also samples showing how to ship apps that use JavaFX and Jetpack Compose for Desktop.","title":"How can I package a Java desktop application?","body":"<p>As of 2022 there is a new option, <a href=\"https://hydraulic.software/\" rel=\"nofollow noreferrer\">Hydraulic Conveyor</a>. It's got a bunch of features that are useful for shipping JVM desktop apps:</p>\n<ul>\n<li>It creates self-updating packages for Windows/Mac/Linux, using MSIX on Windows and Sparkle on macOS and native package managers on Linux.</li>\n<li>It can ship for every OS from any OS i.e. you can ship to Mac/Windows from Linux, or Windows/Linux from Mac etc.</li>\n<li>It runs jlink for you for each OS.</li>\n<li>It provides binary launchers (no batch files or shell scripts) which set up the JVM environment in useful ways, like with computed system properties for your install dir, your update site URL.</li>\n<li>Apps can update in the background or for Mac/Windows installs you can force the app to update automatically on startup if there's a new version available, like a web app would.</li>\n<li>It handles code signing and notarization for you.</li>\n<li>It generates a download page for your users and can use GitHub Releases as a download and update site.</li>\n</ul>\n<p>So, if you want to ship a JVM desktop app it's got you covered. There's also samples showing how to ship apps that use JavaFX and Jetpack Compose for Desktop.</p>\n"}],"owner":{"account_id":36285,"reputation":1026,"user_id":103373,"accept_rate":90,"display_name":"Niklas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20048,"favorite_count":0,"down_vote_count":1,"up_vote_count":16,"accepted_answer_id":7915425,"answer_count":9,"score":15,"last_activity_date":1677509740,"creation_date":1319715487,"question_id":7915315,"body_markdown":"I am working on a simple desktop java application. I would like to make it as seamless to install for end users as possible. E.g. similar to how Minecraft is distributed - a simple executable for OS X and an EXE file for Windows.\r\n\r\nWhat tool should I use?","title":"How can I package a Java desktop application?","body":"<p>I am working on a simple desktop java application. I would like to make it as seamless to install for end users as possible. E.g. similar to how Minecraft is distributed - a simple executable for OS X and an EXE file for Windows.</p>\n\n<p>What tool should I use?</p>\n"},{"tags":["java","android","string","kotlin"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1561053729,"post_id":56691472,"comment_id":99948541,"body_markdown":"Why not use the alternative recommended in the error? `someObject::class.java.simpleName`","body":"Why not use the alternative recommended in the error? <code>someObject::class.java.simpleName</code>"},{"owner":{"account_id":373519,"reputation":7626,"user_id":2127950,"accept_rate":84,"display_name":"portfoliobuilder"},"score":0,"creation_date":1561053916,"post_id":56691472,"comment_id":99948623,"body_markdown":"I am new to Kotlin, so was unaware. Also, I just tried it and I am receiving &quot;unresolved reference: java&quot;. EDIT: Clean project cleared that up! Can you add as answer, I will accept.","body":"I am new to Kotlin, so was unaware. Also, I just tried it and I am receiving &quot;unresolved reference: java&quot;. EDIT: Clean project cleared that up! Can you add as answer, I will accept."}],"answers":[{"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1561054160,"post_id":56691631,"comment_id":99948731,"body_markdown":"None of those seem to quite line up with `simpleName`, though. They all are for the canonical name.","body":"None of those seem to quite line up with <code>simpleName</code>, though. They all are for the canonical name."},{"owner":{"account_id":373519,"reputation":7626,"user_id":2127950,"accept_rate":84,"display_name":"portfoliobuilder"},"score":2,"creation_date":1561054345,"post_id":56691631,"comment_id":99948801,"body_markdown":"@CommonsWare solution is correct. Thanks for your response Edgar. I&#39;m sure you addressed some other concerns from others who are learning Kotlin and following along and reading this thread.","body":"@CommonsWare solution is correct. Thanks for your response Edgar. I&#39;m sure you addressed some other concerns from others who are learning Kotlin and following along and reading this thread."}],"tags":[],"owner":{"account_id":9020610,"reputation":1498,"user_id":6721828,"display_name":"Edhar Khimich"},"comment_count":2,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1561054044,"creation_date":1561054044,"answer_id":56691631,"question_id":56691472,"body_markdown":"There is couple ways to do this in Kotlin\r\nYou can receive the name via property - *KClass.qualifiedName*\r\n\r\n    val name = AClass::class.qualifiedName;\r\n\r\nor through the *Class.getName*\r\n\r\n    val name = AClass::class.java.getName();\r\n\r\nor you can try with *Class.name*\r\n\r\n    val name = AClass::class.java.name;\r\n\r\nor *Class.canonicalName*\r\n\r\n    var name = AClass::class.java.canonicalName as String\r\n\r\n","title":"Getting simpleName() after getClass() in Kotlin","body":"<p>There is couple ways to do this in Kotlin\nYou can receive the name via property - <em>KClass.qualifiedName</em></p>\n\n<pre><code>val name = AClass::class.qualifiedName;\n</code></pre>\n\n<p>or through the <em>Class.getName</em></p>\n\n<pre><code>val name = AClass::class.java.getName();\n</code></pre>\n\n<p>or you can try with <em>Class.name</em></p>\n\n<pre><code>val name = AClass::class.java.name;\n</code></pre>\n\n<p>or <em>Class.canonicalName</em></p>\n\n<pre><code>var name = AClass::class.java.canonicalName as String\n</code></pre>\n"},{"tags":[],"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"comment_count":0,"down_vote_count":0,"up_vote_count":42,"is_accepted":true,"score":42,"last_activity_date":1561054192,"creation_date":1561054192,"answer_id":56691680,"question_id":56691472,"body_markdown":"Use `someObject::class.java.simpleName`.","title":"Getting simpleName() after getClass() in Kotlin","body":"<p>Use <code>someObject::class.java.simpleName</code>.</p>\n"},{"tags":[],"owner":{"account_id":5020620,"reputation":738,"user_id":4034209,"display_name":"Kashif Anwaar"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1587568711,"creation_date":1587568711,"answer_id":61368709,"question_id":56691472,"body_markdown":"Lot of answers ask you to enter type your class name, well I have the shortest solution for you.\r\n\r\n    javaClass.simpleName\r\n\r\nYou can use the above line anywhere to get the class name, it will return your current class name.","title":"Getting simpleName() after getClass() in Kotlin","body":"<p>Lot of answers ask you to enter type your class name, well I have the shortest solution for you.</p>\n\n<pre><code>javaClass.simpleName\n</code></pre>\n\n<p>You can use the above line anywhere to get the class name, it will return your current class name.</p>\n"},{"tags":[],"owner":{"account_id":16095525,"reputation":147,"user_id":12669956,"display_name":"Abhyam Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677509717,"creation_date":1677509717,"answer_id":75582020,"question_id":56691472,"body_markdown":"Suppose you are in the same class or activity, then to get the name of the activity or class you can call.\r\n\r\n    this::class.simpleName\r\n\r\nLet&#39;s say your activity/class name is `LoginActivityV2` then you can also use \r\n\r\n`this@LoginActivityV2::class.simplename`","title":"Getting simpleName() after getClass() in Kotlin","body":"<p>Suppose you are in the same class or activity, then to get the name of the activity or class you can call.</p>\n<pre><code>this::class.simpleName\n</code></pre>\n<p>Let's say your activity/class name is <code>LoginActivityV2</code> then you can also use</p>\n<p><code>this@LoginActivityV2::class.simplename</code></p>\n"}],"owner":{"account_id":373519,"reputation":7626,"user_id":2127950,"accept_rate":84,"display_name":"portfoliobuilder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14864,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":56691680,"answer_count":4,"score":21,"last_activity_date":1677509717,"creation_date":1561053278,"question_id":56691472,"body_markdown":"In java, I am able to use getClass() and then retrieve simpleName from that class object without any issues.\r\n\r\n    String tag = someObject.getClass().getSimpleName(); // java code\r\n\r\nBut when converting to Kotlin, this causes warnings\r\n\r\n&gt; Call uses reflection API which is not found in compilation classpath.\r\n&gt; Make sure you have kotlin-reflect.jar in the classpath\r\n\r\nThe kotlin code is\r\n\r\n    someObject::class.simpleName!! // kotlin code\r\n\r\nWhat is the proper way of avoiding\r\n\r\n&gt; kotlin.jvm.KotlinReflectionNotSupportedError ? Needs additional\r\n&gt; dependency to kotlin-reflect.jar. Maybe would be better use\r\n&gt; ::class.java.simpleName\r\n\r\n","title":"Getting simpleName() after getClass() in Kotlin","body":"<p>In java, I am able to use getClass() and then retrieve simpleName from that class object without any issues.</p>\n\n<pre><code>String tag = someObject.getClass().getSimpleName(); // java code\n</code></pre>\n\n<p>But when converting to Kotlin, this causes warnings</p>\n\n<blockquote>\n  <p>Call uses reflection API which is not found in compilation classpath.\n  Make sure you have kotlin-reflect.jar in the classpath</p>\n</blockquote>\n\n<p>The kotlin code is</p>\n\n<pre><code>someObject::class.simpleName!! // kotlin code\n</code></pre>\n\n<p>What is the proper way of avoiding</p>\n\n<blockquote>\n  <p>kotlin.jvm.KotlinReflectionNotSupportedError ? Needs additional\n  dependency to kotlin-reflect.jar. Maybe would be better use\n  ::class.java.simpleName</p>\n</blockquote>\n"},{"tags":["java","sql","hibernate","sentry"],"answers":[{"comments":[{"owner":{"account_id":3174200,"reputation":2396,"user_id":2682472,"accept_rate":90,"display_name":"Florian Baierl"},"score":1,"creation_date":1677669107,"post_id":75582003,"comment_id":133382082,"body_markdown":"Thanks, this helped us finding our problem (ManyToOne associations that are eagerly-fetched by default).","body":"Thanks, this helped us finding our problem (ManyToOne associations that are eagerly-fetched by default)."}],"tags":[],"owner":{"account_id":3449881,"reputation":3520,"user_id":2889760,"display_name":"Gavin King"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677509606,"creation_date":1677509606,"answer_id":75582003,"question_id":75581913,"body_markdown":"&gt; Is there any good way how we can get better insights into our problem?\r\n\r\nWell, yes, of course the very first step is to log the actual SQL executed by Hibernate, either by setting the properties:\r\n\r\n```xml\r\n&lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\r\n&lt;property name=&quot;hibernate.format_sql&quot;&gt;true&lt;/property&gt;\r\n&lt;property name=&quot;hibernate.highlight_sql&quot;&gt;true&lt;/property&gt;\r\n```\r\n\r\nOr by setting the log category `org.hibernate.SQL` to `debug`.\r\n\r\nYou absolutely cannot possibly analyze the performance of data access code by treating a Spring repository thingy as a black box. Nor is any Java monitoring or profiling tool likely to be very useful, since what you really need to do is minimize roundtrips to the database server.\r\n","title":"How to analyze JPA/Hibernate database queries for efficiency","body":"<blockquote>\n<p>Is there any good way how we can get better insights into our problem?</p>\n</blockquote>\n<p>Well, yes, of course the very first step is to log the actual SQL executed by Hibernate, either by setting the properties:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\n&lt;property name=&quot;hibernate.format_sql&quot;&gt;true&lt;/property&gt;\n&lt;property name=&quot;hibernate.highlight_sql&quot;&gt;true&lt;/property&gt;\n</code></pre>\n<p>Or by setting the log category <code>org.hibernate.SQL</code> to <code>debug</code>.</p>\n<p>You absolutely cannot possibly analyze the performance of data access code by treating a Spring repository thingy as a black box. Nor is any Java monitoring or profiling tool likely to be very useful, since what you really need to do is minimize roundtrips to the database server.</p>\n"}],"owner":{"account_id":3174200,"reputation":2396,"user_id":2682472,"accept_rate":90,"display_name":"Florian Baierl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":414,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75582003,"answer_count":1,"score":0,"last_activity_date":1677509606,"creation_date":1677508979,"question_id":75581913,"body_markdown":"We are using Spring Boot with Hibernate to connect to a postgresql database and noticed that some queries are much slower than expected. Are there any good tools or methods to find out why this is happening? We are using [Sentry][1], so I have some insight into which statements are the problem, e.g. here:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nWe can see that `BookingLegRepository.findByStartTimewindowStartBetweenAndDistributorId` takes a long time and the other repository fetches are quite fast. `ScheduledLegRepository.findByStartTimeBetweenAndAssignment_Distributor_Id` fetches a similar amount of objects.\r\n\r\nNow, I am wondering if this is because the query is not efficiently defined:\r\n\r\n```\r\n@Query(&quot;select b from BookingLegEntity b left join fetch b.belongsTo where b.startTimewindowStart between ?1 and ?2 and b.distributor.id = ?3&quot;)\r\nList&lt;BookingLegEntity&gt; findByStartTimewindowStartBetweenAndDistributorId(Instant from, Instant to, UUID distributorId);\r\n```\r\n\r\nor if this is because of some caching Hibernate does in the background which make the subsequent calls faster (scheduled-legs and booking-legs are associated with each other).\r\n\r\nAlso, I cannot imagine that the database itself is the reason for the slow query, so I have been wondering if it is the creation of the Java objects by Hibernate that takes too much time.\r\n\r\nIs there any good way how we can get better insights into our problem?\r\n\r\n\r\n  [1]: https://sentry.io\r\n  [2]: https://i.stack.imgur.com/iYTpy.png","title":"How to analyze JPA/Hibernate database queries for efficiency","body":"<p>We are using Spring Boot with Hibernate to connect to a postgresql database and noticed that some queries are much slower than expected. Are there any good tools or methods to find out why this is happening? We are using <a href=\"https://sentry.io\" rel=\"nofollow noreferrer\">Sentry</a>, so I have some insight into which statements are the problem, e.g. here:</p>\n<p><a href=\"https://i.stack.imgur.com/iYTpy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iYTpy.png\" alt=\"enter image description here\" /></a></p>\n<p>We can see that <code>BookingLegRepository.findByStartTimewindowStartBetweenAndDistributorId</code> takes a long time and the other repository fetches are quite fast. <code>ScheduledLegRepository.findByStartTimeBetweenAndAssignment_Distributor_Id</code> fetches a similar amount of objects.</p>\n<p>Now, I am wondering if this is because the query is not efficiently defined:</p>\n<pre><code>@Query(&quot;select b from BookingLegEntity b left join fetch b.belongsTo where b.startTimewindowStart between ?1 and ?2 and b.distributor.id = ?3&quot;)\nList&lt;BookingLegEntity&gt; findByStartTimewindowStartBetweenAndDistributorId(Instant from, Instant to, UUID distributorId);\n</code></pre>\n<p>or if this is because of some caching Hibernate does in the background which make the subsequent calls faster (scheduled-legs and booking-legs are associated with each other).</p>\n<p>Also, I cannot imagine that the database itself is the reason for the slow query, so I have been wondering if it is the creation of the Java objects by Hibernate that takes too much time.</p>\n<p>Is there any good way how we can get better insights into our problem?</p>\n"},{"tags":["java","unit-testing","elasticsearch","elasticsearch-painless"],"answers":[{"tags":[],"owner":{"account_id":2292899,"reputation":530,"user_id":2015169,"display_name":"JVS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677509003,"creation_date":1677509003,"answer_id":75581917,"question_id":70401445,"body_markdown":"One way to test is to use docker to bring up an elasticsearch instance, setup indices with seed data, and run tests using the scripts.\r\nWe found additional benefits of the DB setup scripts being tested on a new ES instance. \r\nDownside is its slower because its integration tests, and slows down the CI pipeline. But better than deploying manually tested code with string scripts.","title":"How to write unit test for Elasticsearch painless scripts using Java","body":"<p>One way to test is to use docker to bring up an elasticsearch instance, setup indices with seed data, and run tests using the scripts.\nWe found additional benefits of the DB setup scripts being tested on a new ES instance.\nDownside is its slower because its integration tests, and slows down the CI pipeline. But better than deploying manually tested code with string scripts.</p>\n"}],"owner":{"account_id":1469313,"reputation":5983,"user_id":1381266,"accept_rate":46,"display_name":"Galet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1677509003,"creation_date":1639808852,"question_id":70401445,"body_markdown":"Here is my sample painles script used in Elasticsearch. I want to write a unit test for this. How can I achieve it?\r\n\r\n    {\r\n      &quot;script&quot;: {\r\n        &quot;source&quot;: &quot;&quot;&quot;\r\n           for(param in params.entrySet()) {\r\n             ctx.source.put(param.getKey(), param.getValue())\r\n          }\r\n        &quot;lang&quot;: &quot;painless&quot;,\r\n        &quot;params&quot;: {\r\n          &quot;sold_cost&quot;: 26\r\n        }\r\n      }\r\n    }","title":"How to write unit test for Elasticsearch painless scripts using Java","body":"<p>Here is my sample painles script used in Elasticsearch. I want to write a unit test for this. How can I achieve it?</p>\n<pre><code>{\n  &quot;script&quot;: {\n    &quot;source&quot;: &quot;&quot;&quot;\n       for(param in params.entrySet()) {\n         ctx.source.put(param.getKey(), param.getValue())\n      }\n    &quot;lang&quot;: &quot;painless&quot;,\n    &quot;params&quot;: {\n      &quot;sold_cost&quot;: 26\n    }\n  }\n}\n</code></pre>\n"},{"tags":["java","liquibase"],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1678033397,"post_id":75581901,"comment_id":133450611,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75581901/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27891749,"reputation":1,"user_id":21297988,"display_name":"user21297988"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677508935,"creation_date":1677508935,"answer_id":75581901,"question_id":75466709,"body_markdown":"Try \r\n\r\n```java\r\n new Liquibase(\r\n                changeLofFile,\r\n                new SearchPathResourceAccessor(getBasePath()),\r\n                database);\r\n```","title":"Liquibase: setting searchPath for Java API","body":"<p>Try</p>\n<pre class=\"lang-java prettyprint-override\"><code> new Liquibase(\n                changeLofFile,\n                new SearchPathResourceAccessor(getBasePath()),\n                database);\n</code></pre>\n"}],"owner":{"account_id":27798015,"reputation":11,"user_id":21223001,"display_name":"SKMDC"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":347,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677508935,"creation_date":1676507183,"question_id":75466709,"body_markdown":"In liquibase v4.13 you need to configure a &quot;searchPath&quot; to look up files, and I&#39;m wondering the best way to achieve this when using the java API\r\n\r\nPrior to v4, I could simply use this code and it worked\r\n\r\n```\r\nLiquibase liquibase = new liquibase.Liquibase(&quot;path/to/changelog.xml&quot;, new ClassLoaderResourceAccessor(), database);\r\n\r\nliquibase.update(new Contexts(), new LabelExpression());\r\n```\r\n\r\nwhich in latest version (was testing against v4.17.0 first, then increased to v4.19.0) resulted in the error\r\n&gt; The file path/to/changelog.xml was not found in the configured search path:\r\n&gt; More locations can be added with the &#39;searchPath&#39; parameter.\r\n\r\nSo how should I configure &quot;searchPath&quot; here?\r\n\r\nTried this to same error result\r\n\r\n```\r\nMap&lt;String, Object&gt; config = new HashMap&lt;&gt;();\r\nconfig.put(&quot;liquibase.searchPath&quot;, &quot;/&quot;);\r\n\r\nScope.child(config, () -&gt; {\r\n\r\n  Liquibase liquibase = new liquibase.Liquibase(&quot;path/to/changelog.xml&quot;, new ClassLoaderResourceAccessor(), database);\r\n\r\n  liquibase.update(new Contexts(), new LabelExpression());\r\n});\r\n```\r\n","title":"Liquibase: setting searchPath for Java API","body":"<p>In liquibase v4.13 you need to configure a &quot;searchPath&quot; to look up files, and I'm wondering the best way to achieve this when using the java API</p>\n<p>Prior to v4, I could simply use this code and it worked</p>\n<pre><code>Liquibase liquibase = new liquibase.Liquibase(&quot;path/to/changelog.xml&quot;, new ClassLoaderResourceAccessor(), database);\n\nliquibase.update(new Contexts(), new LabelExpression());\n</code></pre>\n<p>which in latest version (was testing against v4.17.0 first, then increased to v4.19.0) resulted in the error</p>\n<blockquote>\n<p>The file path/to/changelog.xml was not found in the configured search path:\nMore locations can be added with the 'searchPath' parameter.</p>\n</blockquote>\n<p>So how should I configure &quot;searchPath&quot; here?</p>\n<p>Tried this to same error result</p>\n<pre><code>Map&lt;String, Object&gt; config = new HashMap&lt;&gt;();\nconfig.put(&quot;liquibase.searchPath&quot;, &quot;/&quot;);\n\nScope.child(config, () -&gt; {\n\n  Liquibase liquibase = new liquibase.Liquibase(&quot;path/to/changelog.xml&quot;, new ClassLoaderResourceAccessor(), database);\n\n  liquibase.update(new Contexts(), new LabelExpression());\n});\n</code></pre>\n"},{"tags":["java","spring-security","azure-active-directory","spring-security-saml2"],"answers":[{"comments":[{"owner":{"account_id":369687,"reputation":56616,"user_id":717214,"accept_rate":86,"display_name":"Aleks G"},"score":0,"creation_date":1677510014,"post_id":75581898,"comment_id":133346601,"body_markdown":"Thanks for your answer, but the times are correct. The server is auto-allocated Azure VM, with time on it automatically synced against this same AD.","body":"Thanks for your answer, but the times are correct. The server is auto-allocated Azure VM, with time on it automatically synced against this same AD."}],"tags":[],"owner":{"account_id":27891746,"reputation":3,"user_id":21297986,"display_name":"GitGood"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677508921,"creation_date":1677508921,"answer_id":75581898,"question_id":75580535,"body_markdown":"Normally this type of error occurs when your server time is different than AAD time. Please check the time set in your server and see if because of some recent patching or some activity it has changed.","title":"SAML authentication with Azure AD returns expired token","body":"<p>Normally this type of error occurs when your server time is different than AAD time. Please check the time set in your server and see if because of some recent patching or some activity it has changed.</p>\n"}],"owner":{"account_id":369687,"reputation":56616,"user_id":717214,"accept_rate":86,"display_name":"Aleks G"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677508921,"creation_date":1677501120,"question_id":75580535,"body_markdown":"I have a java spring security app that authenticates against Azure AD with SAML. With default settings, when the token is returned from MS back to my apps, the &quot;notOnOrAfter&quot; date is in the past, regardless when the user actually logged into their Microsoft account.\r\n\r\nI have added `forceAuthN=true` parameter - this solved the issue of expired tokens, however at the expense of having to re-enter the username/password on every login request. Now the users are asking why they have to re-login in for my app when this works seamlessly for other apps they use that authenticate to Azure AD.\r\n\r\nI tried playing around with different values for `forceAuthN` and `passive` - but still no luck.\r\n\r\nIs there anything I can do (either in my application or in the setup of then enterprise application in Azure AD) to get seamless login working?","title":"SAML authentication with Azure AD returns expired token","body":"<p>I have a java spring security app that authenticates against Azure AD with SAML. With default settings, when the token is returned from MS back to my apps, the &quot;notOnOrAfter&quot; date is in the past, regardless when the user actually logged into their Microsoft account.</p>\n<p>I have added <code>forceAuthN=true</code> parameter - this solved the issue of expired tokens, however at the expense of having to re-enter the username/password on every login request. Now the users are asking why they have to re-login in for my app when this works seamlessly for other apps they use that authenticate to Azure AD.</p>\n<p>I tried playing around with different values for <code>forceAuthN</code> and <code>passive</code> - but still no luck.</p>\n<p>Is there anything I can do (either in my application or in the setup of then enterprise application in Azure AD) to get seamless login working?</p>\n"},{"tags":["java","spring-boot","apache-kafka","mockito","testcontainers"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1677508889,"post_id":75576510,"comment_id":133346208,"body_markdown":"Spring-kafka already offers embedded kafka class for testing, why do you need containers? Also, where is your test actually using the listener?","body":"Spring-kafka already offers embedded kafka class for testing, why do you need containers? Also, where is your test actually using the listener?"}],"answers":[{"comments":[{"owner":{"account_id":6433608,"reputation":927,"user_id":4985852,"accept_rate":62,"display_name":"Zichen Ma"},"score":0,"creation_date":1677505175,"post_id":75577305,"comment_id":133344974,"body_markdown":"Hi , Ken Chan, thanks a lot for the explanation. I just tried to use @MockBean, but but still got same error.","body":"Hi , Ken Chan, thanks a lot for the explanation. I just tried to use @MockBean, but but still got same error."},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":1,"creation_date":1677514424,"post_id":75577305,"comment_id":133348250,"body_markdown":"Are you sure `HelloKafkaListener` is really configured properly such that it can deserailize the message into `ExampleEvent` ? Would you add some log at the beginning of the `@KafkaListener` method to verify it is really get called ? If it is not called , it is more than the configuration problem of `HelloKafkaListener` rather than the `HelloKafkaService`","body":"Are you sure <code>HelloKafkaListener</code> is really configured properly such that it can deserailize the message into <code>ExampleEvent</code> ? Would you add some log at the beginning of the <code>@KafkaListener</code> method to verify it is really get called ? If it is not called , it is more than the configuration problem of <code>HelloKafkaListener</code> rather than the <code>HelloKafkaService</code>"},{"owner":{"account_id":6433608,"reputation":927,"user_id":4985852,"accept_rate":62,"display_name":"Zichen Ma"},"score":0,"creation_date":1677515396,"post_id":75577305,"comment_id":133348575,"body_markdown":"Hi, Ken Chan, you are right. Looks like HelloKafkaListener has not been called. Let me check the configuration","body":"Hi, Ken Chan, you are right. Looks like HelloKafkaListener has not been called. Let me check the configuration"},{"owner":{"account_id":6433608,"reputation":927,"user_id":4985852,"accept_rate":62,"display_name":"Zichen Ma"},"score":0,"creation_date":1677774185,"post_id":75577305,"comment_id":133407976,"body_markdown":"Hi, Ken Chan, now if config a Kafka consumer (private KafkaConsumer&lt;String, ExampleEvent&gt; kafkaConsumer;) and use it in my test like this: var records = kafkaConsumer.poll(Duration.ofSeconds(20)); which I can see it works (verified the value in records). However, I still not able to trigger the HelloKafkaListener. I found another post you made: https://stackoverflow.com/questions/52783066/how-to-write-unit-test-for-kafkalistener followed the steps, but no luck as well. I am just wondering what&#39;s the relationship between my kafkaConsumer and HelloKafkaListener? are they the singleton?","body":"Hi, Ken Chan, now if config a Kafka consumer (private KafkaConsumer&lt;String, ExampleEvent&gt; kafkaConsumer;) and use it in my test like this: var records = kafkaConsumer.poll(Duration.ofSeconds(20)); which I can see it works (verified the value in records). However, I still not able to trigger the HelloKafkaListener. I found another post you made: <a href=\"https://stackoverflow.com/questions/52783066/how-to-write-unit-test-for-kafkalistener\" title=\"how to write unit test for kafkalistener\">stackoverflow.com/questions/52783066/&hellip;</a> followed the steps, but no luck as well. I am just wondering what&#39;s the relationship between my kafkaConsumer and HelloKafkaListener? are they the singleton?"},{"owner":{"account_id":6433608,"reputation":927,"user_id":4985852,"accept_rate":62,"display_name":"Zichen Ma"},"score":0,"creation_date":1677784054,"post_id":75577305,"comment_id":133410708,"body_markdown":"I should say in my case, I use Testcontainers but your post uses EmbeddedKafka, does this cause the issue?","body":"I should say in my case, I use Testcontainers but your post uses EmbeddedKafka, does this cause the issue?"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1677861537,"post_id":75577305,"comment_id":133426918,"body_markdown":"`kafkaConsumer ` is the raw kafka client. `KafkaListener` uses it under the cover , and it should be singleton. I feel like your  `@KafkaListener` is not configured properly such that it may not connect to the kafka container created by `Testcontainers`.  I would try to set the breakpoint at `ConcurrentKafkaListenerContainerFactory#createContainerInstance()` to trobleshoot from there. To be honest , i don&#39;t have any clue actually.","body":"<code>kafkaConsumer </code> is the raw kafka client. <code>KafkaListener</code> uses it under the cover , and it should be singleton. I feel like your  <code>@KafkaListener</code> is not configured properly such that it may not connect to the kafka container created by <code>Testcontainers</code>.  I would try to set the breakpoint at <code>ConcurrentKafkaListenerContainerFactory#createContainerInsta&zwnj;&#8203;nce()</code> to trobleshoot from there. To be honest , i don&#39;t have any clue actually."},{"owner":{"account_id":6433608,"reputation":927,"user_id":4985852,"accept_rate":62,"display_name":"Zichen Ma"},"score":1,"creation_date":1678045702,"post_id":75577305,"comment_id":133452885,"body_markdown":"Hi Ken Chan, I did check it again and your are right, I couldn&#39;t configure my kafka consumer correctly, since couldn&#39;t understand clearly the relationship between kafka consumer and listener. Now, it works after update the consumer configuration. So appreciated your help!","body":"Hi Ken Chan, I did check it again and your are right, I couldn&#39;t configure my kafka consumer correctly, since couldn&#39;t understand clearly the relationship between kafka consumer and listener. Now, it works after update the consumer configuration. So appreciated your help!"}],"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677484036,"creation_date":1677478964,"answer_id":75577305,"question_id":75576510,"body_markdown":"Because `@Mock` just create a mocked instance but this instance will not be managed by the spring context. So `HelloKafkaService` inside `HelloKafkaListener` is still the actual instance but not the mocked one. \r\n\r\nYou have to use `@MockBean`. The difference is that it will create a mocked instance and also replace the actual bean instance in the spring context with it.  \r\n\r\nSo change to the following should fix the problem :\r\n\r\n```java \r\n@SpringBootTest\r\n@Testcontainers\r\npublic class HelloKafkaListenerTestIT {\r\n  \r\n  @MockBean\r\n  private HelloKafkaService helloKafkaService;\r\n\r\n}\r\n\r\n```\r\n","title":"Test Kafka consumer with Testcontainers and Mockito couldn&#39;t invoke consumer in SpringBoot","body":"<p>Because <code>@Mock</code> just create a mocked instance but this instance will not be managed by the spring context. So <code>HelloKafkaService</code> inside <code>HelloKafkaListener</code> is still the actual instance but not the mocked one.</p>\n<p>You have to use <code>@MockBean</code>. The difference is that it will create a mocked instance and also replace the actual bean instance in the spring context with it.</p>\n<p>So change to the following should fix the problem :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\n@Testcontainers\npublic class HelloKafkaListenerTestIT {\n  \n  @MockBean\n  private HelloKafkaService helloKafkaService;\n\n}\n\n</code></pre>\n"}],"owner":{"account_id":6433608,"reputation":927,"user_id":4985852,"accept_rate":62,"display_name":"Zichen Ma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":889,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677508918,"creation_date":1677468047,"question_id":75576510,"body_markdown":"I am trying to setup a kafka consumer and test it with Testcontainers and Mickito. It looks like the producer works fine but the consumer has not been triggered and always gives me:  \r\n\r\n    Wanted but not invoked:\r\n    helloKafkaService.handleMessage(\r\n        &lt;Capturing argument&gt;\r\n    );\r\n    -&gt; at com.my.kafka.HelloKafkaListenerTestIT.helloKafkaListenerTest\r\n    Actually, there were zero interactions with this mock.\r\n\r\nHere is my service interface HelloKafkaService.java:\r\n\r\n    @Service\r\n    public interface HelloKafkaService {\r\n      public void handleMessage(ExampleEvent exampleEvent);\r\n    }\r\nMy consumer: HelloKafkaListener.java\r\n\r\n    @Component\r\n    public class HelloKafkaListener {\r\n      private static final Logger log = LoggerFactory.getLogger(HelloKafkaListener.class);\r\n      \r\n      private final HelloKafkaService helloKafkaService;\r\n      \r\n      public HelloKafkaListener(HelloKafkaService helloKafkaService) {\r\n        this.helloKafkaService = helloKafkaService;\r\n      }\r\n      \r\n      @KafkaListener(\r\n          topics = &quot;my-topic&quot;,\r\n          groupId = &quot;my-topic:HelloKafkaListener&quot;)\r\n      public void process(ExampleEvent event) {\r\n        this.helloKafkaService.handleMessage(event);\r\n        log.info(&quot;Processing event: &quot; + event.getExampleField());\r\n      }\r\n    }\r\n\r\nMy test HelloKafkaListenerTestIT.java:\r\n\r\n    @SpringBootTest\r\n    @Testcontainers\r\n    public class HelloKafkaListenerTestIT {\r\n      \r\n      @Container\r\n      public static KafkaContainer kafkaContainer = new KafkaContainer(DockerImageName.parse(&quot;confluentinc/cp-kafka:7.0.5&quot;));\r\n      \r\n      @Mock\r\n      private HelloKafkaService helloKafkaService;\r\n      \r\n      @Autowired\r\n      private KafkaTemplate&lt;String, ExampleEvent&gt; kafkaTemplate;\r\n      \r\n      @DynamicPropertySource\r\n      static void kafkaProperties(DynamicPropertyRegistry registry) {\r\n        registry.add(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaContainer::getBootstrapServers);\r\n        registry.add(ProducerConfig.CLIENT_ID_CONFIG, () -&gt; &quot;test-id&quot;);\r\n        registry.add(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, () -&gt; StringSerializer.class.getName());\r\n        registry.add(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, () -&gt; KafkaAvroSerializer.class.getName());\r\n      }\r\n      \r\n      @BeforeEach\r\n      public void setUp() {\r\n        Serializer keySerializer;\r\n        Serializer valueSerializer;\r\n      \r\n        var avroConfig = Map.of(\r\n            KafkaAvroSerializerConfig.SCHEMA_REGISTRY_URL_CONFIG, &quot;http://localhost:8081&quot;,\r\n            KafkaAvroSerializerConfig.AUTO_REGISTER_SCHEMAS, true,\r\n            KafkaAvroSerializerConfig.USE_LATEST_VERSION, true\r\n        );\r\n      \r\n        keySerializer = new StringSerializer();\r\n      \r\n        valueSerializer = new SpecificAvroSerializer&lt;ExampleEvent&gt;();\r\n        valueSerializer.configure(avroConfig, false);\r\n      \r\n        Map&lt;String, Object&gt; config = new HashMap&lt;&gt;();\r\n        config.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaContainer.getBootstrapServers());\r\n        config.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\r\n        config.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, KafkaAvroSerializer.class);\r\n        config.put(ProducerConfig.CLIENT_ID_CONFIG, &quot;test-id&quot;);\r\n        config.put(&quot;schema.registry.url&quot;, &quot;http://localhost:8081&quot;);\r\n\r\n      \r\n        DefaultKafkaProducerFactory&lt;String, ExampleEvent&gt; producerFactory =\r\n            new DefaultKafkaProducerFactory&lt;&gt;(config, keySerializer, valueSerializer);\r\n        this.kafkaTemplate = new KafkaTemplate&lt;&gt;(producerFactory);\r\n     \r\n      }\r\n      \r\n      static {\r\n        kafkaContainer.start();\r\n      }\r\n      \r\n      \r\n      @Test\r\n      public void helloKafkaListenerTest() {\r\n        ArgumentCaptor&lt;ExampleEvent&gt; captor = ArgumentCaptor.forClass(ExampleEvent.class);\r\n        ExampleEvent exampleEvent = new ExampleEvent(&quot;Hello World!&quot;);\r\n        // Confirmed this.kafkaTemplate.send works well\r\n        this.kafkaTemplate.send(&quot;my-topic&quot;, &quot;key&quot;, exampleEvent);\r\n        // Throw the error here:\r\n        verify(helloKafkaService, timeout(5000)).handleMessage(captor.capture());\r\n        assertNotNull(captor.getValue());\r\n        assertEquals(&quot;Hello World!&quot;, captor.getValue().getExampleField());\r\n      }\r\n      \r\n      @AfterAll\r\n      static void tearDown() {\r\n        kafkaContainer.stop();\r\n      }\r\n\r\nevent.avsc:\r\n\r\n    {\r\n      &quot;namespace&quot;: &quot;my.namespace&quot;,\r\n      &quot;type&quot;: &quot;record&quot;,\r\n      &quot;name&quot;: &quot;ExampleEvent&quot;,\r\n      &quot;doc&quot;: &quot;A sample event&quot;,\r\n      &quot;fields&quot;: [\r\n        {\r\n          &quot;name&quot;: &quot;exampleField&quot;,\r\n          &quot;type&quot;: &quot;string&quot;\r\n        }\r\n      ]\r\n    }\r\n\r\nWhy can the consumer not be triggered, if using `@Mock` and `verify`? Is there a better idea to test this?","title":"Test Kafka consumer with Testcontainers and Mockito couldn&#39;t invoke consumer in SpringBoot","body":"<p>I am trying to setup a kafka consumer and test it with Testcontainers and Mickito. It looks like the producer works fine but the consumer has not been triggered and always gives me:</p>\n<pre><code>Wanted but not invoked:\nhelloKafkaService.handleMessage(\n    &lt;Capturing argument&gt;\n);\n-&gt; at com.my.kafka.HelloKafkaListenerTestIT.helloKafkaListenerTest\nActually, there were zero interactions with this mock.\n</code></pre>\n<p>Here is my service interface HelloKafkaService.java:</p>\n<pre><code>@Service\npublic interface HelloKafkaService {\n  public void handleMessage(ExampleEvent exampleEvent);\n}\n</code></pre>\n<p>My consumer: HelloKafkaListener.java</p>\n<pre><code>@Component\npublic class HelloKafkaListener {\n  private static final Logger log = LoggerFactory.getLogger(HelloKafkaListener.class);\n  \n  private final HelloKafkaService helloKafkaService;\n  \n  public HelloKafkaListener(HelloKafkaService helloKafkaService) {\n    this.helloKafkaService = helloKafkaService;\n  }\n  \n  @KafkaListener(\n      topics = &quot;my-topic&quot;,\n      groupId = &quot;my-topic:HelloKafkaListener&quot;)\n  public void process(ExampleEvent event) {\n    this.helloKafkaService.handleMessage(event);\n    log.info(&quot;Processing event: &quot; + event.getExampleField());\n  }\n}\n</code></pre>\n<p>My test HelloKafkaListenerTestIT.java:</p>\n<pre><code>@SpringBootTest\n@Testcontainers\npublic class HelloKafkaListenerTestIT {\n  \n  @Container\n  public static KafkaContainer kafkaContainer = new KafkaContainer(DockerImageName.parse(&quot;confluentinc/cp-kafka:7.0.5&quot;));\n  \n  @Mock\n  private HelloKafkaService helloKafkaService;\n  \n  @Autowired\n  private KafkaTemplate&lt;String, ExampleEvent&gt; kafkaTemplate;\n  \n  @DynamicPropertySource\n  static void kafkaProperties(DynamicPropertyRegistry registry) {\n    registry.add(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaContainer::getBootstrapServers);\n    registry.add(ProducerConfig.CLIENT_ID_CONFIG, () -&gt; &quot;test-id&quot;);\n    registry.add(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, () -&gt; StringSerializer.class.getName());\n    registry.add(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, () -&gt; KafkaAvroSerializer.class.getName());\n  }\n  \n  @BeforeEach\n  public void setUp() {\n    Serializer keySerializer;\n    Serializer valueSerializer;\n  \n    var avroConfig = Map.of(\n        KafkaAvroSerializerConfig.SCHEMA_REGISTRY_URL_CONFIG, &quot;http://localhost:8081&quot;,\n        KafkaAvroSerializerConfig.AUTO_REGISTER_SCHEMAS, true,\n        KafkaAvroSerializerConfig.USE_LATEST_VERSION, true\n    );\n  \n    keySerializer = new StringSerializer();\n  \n    valueSerializer = new SpecificAvroSerializer&lt;ExampleEvent&gt;();\n    valueSerializer.configure(avroConfig, false);\n  \n    Map&lt;String, Object&gt; config = new HashMap&lt;&gt;();\n    config.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaContainer.getBootstrapServers());\n    config.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n    config.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, KafkaAvroSerializer.class);\n    config.put(ProducerConfig.CLIENT_ID_CONFIG, &quot;test-id&quot;);\n    config.put(&quot;schema.registry.url&quot;, &quot;http://localhost:8081&quot;);\n\n  \n    DefaultKafkaProducerFactory&lt;String, ExampleEvent&gt; producerFactory =\n        new DefaultKafkaProducerFactory&lt;&gt;(config, keySerializer, valueSerializer);\n    this.kafkaTemplate = new KafkaTemplate&lt;&gt;(producerFactory);\n \n  }\n  \n  static {\n    kafkaContainer.start();\n  }\n  \n  \n  @Test\n  public void helloKafkaListenerTest() {\n    ArgumentCaptor&lt;ExampleEvent&gt; captor = ArgumentCaptor.forClass(ExampleEvent.class);\n    ExampleEvent exampleEvent = new ExampleEvent(&quot;Hello World!&quot;);\n    // Confirmed this.kafkaTemplate.send works well\n    this.kafkaTemplate.send(&quot;my-topic&quot;, &quot;key&quot;, exampleEvent);\n    // Throw the error here:\n    verify(helloKafkaService, timeout(5000)).handleMessage(captor.capture());\n    assertNotNull(captor.getValue());\n    assertEquals(&quot;Hello World!&quot;, captor.getValue().getExampleField());\n  }\n  \n  @AfterAll\n  static void tearDown() {\n    kafkaContainer.stop();\n  }\n</code></pre>\n<p>event.avsc:</p>\n<pre><code>{\n  &quot;namespace&quot;: &quot;my.namespace&quot;,\n  &quot;type&quot;: &quot;record&quot;,\n  &quot;name&quot;: &quot;ExampleEvent&quot;,\n  &quot;doc&quot;: &quot;A sample event&quot;,\n  &quot;fields&quot;: [\n    {\n      &quot;name&quot;: &quot;exampleField&quot;,\n      &quot;type&quot;: &quot;string&quot;\n    }\n  ]\n}\n</code></pre>\n<p>Why can the consumer not be triggered, if using <code>@Mock</code> and <code>verify</code>? Is there a better idea to test this?</p>\n"},{"tags":["java","docker","automated-tests","playwright","alpine-linux"],"answers":[{"tags":[],"owner":{"account_id":23506,"reputation":7505,"user_id":58962,"accept_rate":65,"display_name":"Michael B&#246;ckling"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1677508592,"creation_date":1677508592,"answer_id":75581837,"question_id":75581790,"body_markdown":"In your Alpine image, install `nodejs` and `chromium` from Alpine repositories and set env vars that tell Playwright to use them instead of its own drivers:\r\n\r\n    echo &quot;https://dl-cdn.alpinelinux.org/alpine/edge/main&quot; &gt; /etc/apk/repositories \\\r\n        &amp;&amp; echo &quot;https://dl-cdn.alpinelinux.org/alpine/edge/community&quot; &gt;&gt; /etc/apk/repositories \\\r\n        &amp;&amp; echo &quot;https://dl-cdn.alpinelinux.org/alpine/edge/testing&quot; &gt;&gt; /etc/apk/repositories \\\r\n        &amp;&amp; echo &quot;https://dl-cdn.alpinelinux.org/alpine/v3.16/main&quot; &gt;&gt; /etc/apk/repositories \\\r\n        &amp;&amp; echo &quot;https://dl-cdn.alpinelinux.org/alpine/v3.16/community&quot; \\\r\n        &amp;&amp; apk upgrade -U -a \\\r\n        &amp;&amp; apk add \\\r\n        libstdc++ \\\r\n        chromium \\\r\n        harfbuzz \\\r\n        nss \\\r\n        freetype \\\r\n        ttf-freefont \\\r\n        font-noto-emoji \\\r\n        wqy-zenhei \\\r\n        nodejs \\\r\n        &amp;&amp; rm -rf /var/cache/* \\\r\n        &amp;&amp; mkdir /var/cache/apk\r\n    \r\n    export PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD=1\r\n    export PLAYWRIGHT_CHROMIUM_EXECUTABLE_PATH=/usr/bin/chromium-browser\r\n    export PLAYWRIGHT_NODEJS_PATH=/usr/bin/node\r\n\r\nThen, in your Java or Kotlin code you have to handle the custom browser location yourself:\r\n\r\n    abstract class AbstractBrowserTest(private val headless: Boolean = true) {\r\n    \r\n        private val playwright: Playwright = Playwright.create()\r\n        private val browser: Browser = launchBrowser()\r\n    \r\n        private fun launchBrowser(): Browser {\r\n            val env = System.getenv(&quot;PLAYWRIGHT_CHROMIUM_EXECUTABLE_PATH&quot;)\r\n            return if (env != null &amp;&amp; env.isNotBlank()) {\r\n                playwright.chromium().launch(LaunchOptions().setHeadless(true).setExecutablePath(Paths.get(env)))\r\n            } else {\r\n                playwright.chromium().launch(LaunchOptions().setHeadless(headless))\r\n            }\r\n        }\r\n    }\r\n\r\nProps to https://github.com/fivemru/playwright-docker-alpine for inspiration!","title":"How to get Playwright browser tests running on Alpine Docker container?","body":"<p>In your Alpine image, install <code>nodejs</code> and <code>chromium</code> from Alpine repositories and set env vars that tell Playwright to use them instead of its own drivers:</p>\n<pre><code>echo &quot;https://dl-cdn.alpinelinux.org/alpine/edge/main&quot; &gt; /etc/apk/repositories \\\n    &amp;&amp; echo &quot;https://dl-cdn.alpinelinux.org/alpine/edge/community&quot; &gt;&gt; /etc/apk/repositories \\\n    &amp;&amp; echo &quot;https://dl-cdn.alpinelinux.org/alpine/edge/testing&quot; &gt;&gt; /etc/apk/repositories \\\n    &amp;&amp; echo &quot;https://dl-cdn.alpinelinux.org/alpine/v3.16/main&quot; &gt;&gt; /etc/apk/repositories \\\n    &amp;&amp; echo &quot;https://dl-cdn.alpinelinux.org/alpine/v3.16/community&quot; \\\n    &amp;&amp; apk upgrade -U -a \\\n    &amp;&amp; apk add \\\n    libstdc++ \\\n    chromium \\\n    harfbuzz \\\n    nss \\\n    freetype \\\n    ttf-freefont \\\n    font-noto-emoji \\\n    wqy-zenhei \\\n    nodejs \\\n    &amp;&amp; rm -rf /var/cache/* \\\n    &amp;&amp; mkdir /var/cache/apk\n\nexport PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD=1\nexport PLAYWRIGHT_CHROMIUM_EXECUTABLE_PATH=/usr/bin/chromium-browser\nexport PLAYWRIGHT_NODEJS_PATH=/usr/bin/node\n</code></pre>\n<p>Then, in your Java or Kotlin code you have to handle the custom browser location yourself:</p>\n<pre><code>abstract class AbstractBrowserTest(private val headless: Boolean = true) {\n\n    private val playwright: Playwright = Playwright.create()\n    private val browser: Browser = launchBrowser()\n\n    private fun launchBrowser(): Browser {\n        val env = System.getenv(&quot;PLAYWRIGHT_CHROMIUM_EXECUTABLE_PATH&quot;)\n        return if (env != null &amp;&amp; env.isNotBlank()) {\n            playwright.chromium().launch(LaunchOptions().setHeadless(true).setExecutablePath(Paths.get(env)))\n        } else {\n            playwright.chromium().launch(LaunchOptions().setHeadless(headless))\n        }\n    }\n}\n</code></pre>\n<p>Props to <a href=\"https://github.com/fivemru/playwright-docker-alpine\" rel=\"noreferrer\">https://github.com/fivemru/playwright-docker-alpine</a> for inspiration!</p>\n"}],"owner":{"account_id":23506,"reputation":7505,"user_id":58962,"accept_rate":65,"display_name":"Michael B&#246;ckling"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1707,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1677508592,"creation_date":1677508285,"question_id":75581790,"body_markdown":"The Java drivers that come with Playwright don&#39;t work with Alpine, because they don&#39;t use statically linked MUSL builds.","title":"How to get Playwright browser tests running on Alpine Docker container?","body":"<p>The Java drivers that come with Playwright don't work with Alpine, because they don't use statically linked MUSL builds.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":3,"creation_date":1677504397,"post_id":75581068,"comment_id":133344704,"body_markdown":"&quot;*not guaranteed to*&quot; does not mean &quot;*in the current implementation, does not*&quot;. It is probably the case that `findAny` will in practice take the first element, but you should not rely on it.","body":"&quot;<i>not guaranteed to</i>&quot; does not mean &quot;<i>in the current implementation, does not</i>&quot;. It is probably the case that <code>findAny</code> will in practice take the first element, but you should not rely on it."},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1677504792,"post_id":75581068,"comment_id":133344838,"body_markdown":"&quot;*Is it something like Random class used*&quot; Probably not, because that would be hit to performance for no real reason. That said, some of the &quot;new&quot; immutable collections, e.g. `Map.of`, do basically do a random shuffling to make sure you&#39;re not dependent on iteration order. See https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/ImmutableCollections.java#L53 so the idea of using randomness to strong-arm clients into respecting your (lack of) guarantees isn&#39;t without precedent.","body":"&quot;<i>Is it something like Random class used</i>&quot; Probably not, because that would be hit to performance for no real reason. That said, some of the &quot;new&quot; immutable collections, e.g. <code>Map.of</code>, do basically do a random shuffling to make sure you&#39;re not dependent on iteration order. See <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/ImmutableCollections.java#L53\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk/blob/master/src/java.base/share/class&zwnj;&#8203;es/&hellip;</a> so the idea of using randomness to strong-arm clients into respecting your (lack of) guarantees isn&#39;t without precedent."}],"answers":[{"tags":[],"owner":{"account_id":16657935,"reputation":834,"user_id":13927534,"display_name":"Miss Skooter"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677506907,"creation_date":1677505509,"answer_id":75581283,"question_id":75581068,"body_markdown":"I think the findAny() javadoc answers both questions:\r\n\r\n&gt; Returns an Optional describing some element of the stream, or an empty Optional if the stream is empty.\r\nThis is a short-circuiting terminal operation.\r\n**The behavior of this operation is explicitly nondeterministic;** it is free to select any element in the stream. This is to allow for maximal performance in parallel operations; the cost is that multiple invocations on the same source may not return the same result. (If a stable result is desired, use findFirst() instead.)\r\n\r\n1- no, it is intentionally and explicitly nondeterministic, apparently for performance reasons and better parallel implementation.\r\n\r\n2- also no, if you&#39;re talking about `.parallelStream()` specifically, it&#39;s not that it finds all matches and picks one randomly. Realistically it stops after finding a match but must complete the processing of any part of the stream in other threads before exiting safely. [This answer](https://stackoverflow.com/a/52425269/13927534) explains the parallel behavior more thoroughly.\r\n\r\n","title":"How findAny() selects an element in Java stream?","body":"<p>I think the findAny() javadoc answers both questions:</p>\n<blockquote>\n<p>Returns an Optional describing some element of the stream, or an empty Optional if the stream is empty.\nThis is a short-circuiting terminal operation.\n<strong>The behavior of this operation is explicitly nondeterministic;</strong> it is free to select any element in the stream. This is to allow for maximal performance in parallel operations; the cost is that multiple invocations on the same source may not return the same result. (If a stable result is desired, use findFirst() instead.)</p>\n</blockquote>\n<p>1- no, it is intentionally and explicitly nondeterministic, apparently for performance reasons and better parallel implementation.</p>\n<p>2- also no, if you're talking about <code>.parallelStream()</code> specifically, it's not that it finds all matches and picks one randomly. Realistically it stops after finding a match but must complete the processing of any part of the stream in other threads before exiting safely. <a href=\"https://stackoverflow.com/a/52425269/13927534\">This answer</a> explains the parallel behavior more thoroughly.</p>\n"}],"owner":{"account_id":15903012,"reputation":191,"user_id":11521880,"display_name":"bridgemnc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75581283,"answer_count":1,"score":0,"last_activity_date":1677506907,"creation_date":1677504302,"question_id":75581068,"body_markdown":"I read in OCP 17 book that findAny on serial stream is not guaranteed to return first element and for parallelStream results are likely to be more random.  \r\n1. Can I somehow achieve such state in which findAny() on serial stream will return element that is not first? Is it possible to achieve this while using standard JDK implementation of the Stream classes? \r\n2. Is it something like Random class used to pick an element in case of findAny() for parallel stream?\r\n","title":"How findAny() selects an element in Java stream?","body":"<p>I read in OCP 17 book that findAny on serial stream is not guaranteed to return first element and for parallelStream results are likely to be more random.</p>\n<ol>\n<li>Can I somehow achieve such state in which findAny() on serial stream will return element that is not first? Is it possible to achieve this while using standard JDK implementation of the Stream classes?</li>\n<li>Is it something like Random class used to pick an element in case of findAny() for parallel stream?</li>\n</ol>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"score":0,"creation_date":1677505910,"post_id":75581300,"comment_id":133345237,"body_markdown":"It&#39;s impossible to detect all instances of unreachable code, so the language specification has to spell out which cases cause an error and which do not.","body":"It&#39;s impossible to detect all instances of unreachable code, so the language specification has to spell out which cases cause an error and which do not."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1677506338,"post_id":75581300,"comment_id":133345369,"body_markdown":"BTW this question was certainly asked before... :- | e.g [Why does compiler recognize while(true) at compile time but not if(true)](https://stackoverflow.com/questions/30711897/why-does-compiler-recognize-whiletrue-at-compile-time-but-not-iftrue)","body":"BTW this question was certainly asked before... :- | e.g <a href=\"https://stackoverflow.com/questions/30711897/why-does-compiler-recognize-whiletrue-at-compile-time-but-not-iftrue\">Why does compiler recognize while(true) at compile time but not if(true)</a>"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1677506471,"post_id":75581300,"comment_id":133345411,"body_markdown":"@JohannKexel the question is about why this is **NOT** an &quot;unreachable code&quot; compilation error.","body":"@JohannKexel the question is about why this is <b>NOT</b> an &quot;unreachable code&quot; compilation error."},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1677513116,"post_id":75581300,"comment_id":133347772,"body_markdown":"Does this answer your question? [Why Java identifies unreachable code only in case of while loop?](https://stackoverflow.com/questions/23977508/why-java-identifies-unreachable-code-only-in-case-of-while-loop)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/23977508/why-java-identifies-unreachable-code-only-in-case-of-while-loop\">Why Java identifies unreachable code only in case of while loop?</a>"}],"answers":[{"tags":[],"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677506031,"creation_date":1677506031,"answer_id":75581365,"question_id":75581300,"body_markdown":"It is practically speaking unreachable, but the Java language designers to decide to permit it to allow for the use of feature flags. So it&#39;s not considered &quot;unreachable&quot; for the purposes of throwing a compiler error, but for the purposes of the JIT compiler or something, it might get treated as if it were.\r\n\r\n[As per the JLS](https://docs.oracle.com/javase/specs/jls/se9/html/jls-14.html#jls-14.21)\r\n\r\n&gt; The rationale for this differing treatment is to allow programmers to\r\n&gt; define &quot;flag&quot; variables such as:\r\n&gt; \r\n&gt;     static final boolean DEBUG = false;\r\n&gt;\r\n&gt; and then write code such as:\r\n&gt; \r\n&gt;     if (DEBUG) { x=3; }\r\n&gt;\r\n&gt; The idea is that it should be possible to change\r\n&gt; the value of `DEBUG` from `false` to `true` or from `true` to `false` and then\r\n&gt; compile the code correctly with no other changes to the program text.","title":"Why this is not an unreachable statement for the Java compiler?","body":"<p>It is practically speaking unreachable, but the Java language designers to decide to permit it to allow for the use of feature flags. So it's not considered &quot;unreachable&quot; for the purposes of throwing a compiler error, but for the purposes of the JIT compiler or something, it might get treated as if it were.</p>\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se9/html/jls-14.html#jls-14.21\" rel=\"nofollow noreferrer\">As per the JLS</a></p>\n<blockquote>\n<p>The rationale for this differing treatment is to allow programmers to\ndefine &quot;flag&quot; variables such as:</p>\n<pre><code>static final boolean DEBUG = false;\n</code></pre>\n<p>and then write code such as:</p>\n<pre><code>if (DEBUG) { x=3; }\n</code></pre>\n<p>The idea is that it should be possible to change\nthe value of <code>DEBUG</code> from <code>false</code> to <code>true</code> or from <code>true</code> to <code>false</code> and then\ncompile the code correctly with no other changes to the program text.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1677506034,"creation_date":1677506034,"answer_id":75581367,"question_id":75581300,"body_markdown":"Because `if (true)` and `if (false)` are a special case.  The compiler specifically allows them, by design, because often developers will want to temporarily enable or disable code.  It’s kind of like Java’s version of `#ifdef` in C.\r\n\r\nFrom [the Unreachable Statements section](https://docs.oracle.com/javase/specs/jls/se17/html/jls-14.html#jls-14.22) of the Java Language Specification:\r\n\r\n&gt;…the superficially similar case:\r\n&gt;\r\n&gt;     if (false) { x=3; }\r\n&gt;\r\n&gt;does not result in a compile-time error. An optimizing compiler may realize that the statement x=3; will never be executed and may choose to omit the code for that statement from the generated class file, but the statement x=3; is not regarded as &quot;unreachable&quot; in the technical sense specified here.\r\n&gt;\r\n&gt;The rationale for this differing treatment is to allow programmers to define &quot;flag&quot; variables such as:\r\n&gt;\r\n&gt;     static final boolean DEBUG = false;\r\n&gt;\r\n&gt;and then write code such as:\r\n&gt;\r\n&gt;     if (DEBUG) { x=3; }\r\n&gt;\r\n&gt;The idea is that it should be possible to change the value of DEBUG from false to true or from true to false and then compile the code correctly with no other changes to the program text. \r\n","title":"Why this is not an unreachable statement for the Java compiler?","body":"<p>Because <code>if (true)</code> and <code>if (false)</code> are a special case.  The compiler specifically allows them, by design, because often developers will want to temporarily enable or disable code.  It’s kind of like Java’s version of <code>#ifdef</code> in C.</p>\n<p>From <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-14.html#jls-14.22\" rel=\"nofollow noreferrer\">the Unreachable Statements section</a> of the Java Language Specification:</p>\n<blockquote>\n<p>…the superficially similar case:</p>\n<pre><code>if (false) { x=3; }\n</code></pre>\n<p>does not result in a compile-time error. An optimizing compiler may realize that the statement x=3; will never be executed and may choose to omit the code for that statement from the generated class file, but the statement x=3; is not regarded as &quot;unreachable&quot; in the technical sense specified here.</p>\n<p>The rationale for this differing treatment is to allow programmers to define &quot;flag&quot; variables such as:</p>\n<pre><code>static final boolean DEBUG = false;\n</code></pre>\n<p>and then write code such as:</p>\n<pre><code>if (DEBUG) { x=3; }\n</code></pre>\n<p>The idea is that it should be possible to change the value of DEBUG from false to true or from true to false and then compile the code correctly with no other changes to the program text.</p>\n</blockquote>\n"}],"owner":{"account_id":27891215,"reputation":13,"user_id":21297550,"display_name":"Peter Orgovan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75581365,"answer_count":2,"score":0,"last_activity_date":1677506345,"creation_date":1677505587,"question_id":75581300,"body_markdown":"\r\n```\r\npublic class Main\r\n{\r\n    static String test(){\r\n\t\t if(true){\r\n\t\t     return &quot;true&quot;;\r\n\t\t }\r\n\t\t else{\r\n\t\t     return &quot;false&quot;;\t// Why this is not an unreachable code?\r\n\t\t }\r\n\t }\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.out.println(test());\r\n\t}\r\n}\r\n```\r\n\r\nI tried to compile this code example and was expecting an &quot;unreachable code&quot; compiler error. Why doesn&#39;t that happen?","title":"Why this is not an unreachable statement for the Java compiler?","body":"<pre><code>public class Main\n{\n    static String test(){\n         if(true){\n             return &quot;true&quot;;\n         }\n         else{\n             return &quot;false&quot;;    // Why this is not an unreachable code?\n         }\n     }\n    public static void main(String[] args) {\n        System.out.println(test());\n    }\n}\n</code></pre>\n<p>I tried to compile this code example and was expecting an &quot;unreachable code&quot; compiler error. Why doesn't that happen?</p>\n"},{"tags":["java","jpa","playframework"],"owner":{"account_id":26925944,"reputation":13,"user_id":20499242,"display_name":"Ciube"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677506035,"creation_date":1677506035,"question_id":75581368,"body_markdown":"In my controller I have this named query:\r\n\r\n```\r\n        List result = JPAEntityManager.createNamedNativeQuery(&quot;findUserUpdateByID&quot;).setParameter(&quot;userId&quot;,userId).getResultList();\r\n```\r\n\r\nIn my User Entity I have declared this named native query in this way:\r\n\r\n```\r\n        @NamedNativeQuery(\r\n                name = &quot;findUserUpdateByID&quot;,\r\n                query = &quot;select update from user_table where user_id = :userId; &quot;)\r\n```\r\n\r\nSo all others query works properly, but only for this I receive this error:\r\n\r\nplay.api.Application$$anon$1: Execution exception[[IllegalArgumentException: Parameter with that name [userId] did not exist]]\r\n        at play.api.Application$class.handleError(Application.scala:296) ~[play_2.11-2.3.10.jar:2.3.10]\r\n\r\nHow is it possible? In the user_table the field is named as user_id and I have a lot of query that works properly...\r\n\r\n\r\nI tried different query sintax approach, with or not with parameter... Works wituout parameters but with the param stil not works","title":"play framework jpa namednative query Parameter with that name [userId] did not exist]]","body":"<p>In my controller I have this named query:</p>\n<pre><code>        List result = JPAEntityManager.createNamedNativeQuery(&quot;findUserUpdateByID&quot;).setParameter(&quot;userId&quot;,userId).getResultList();\n</code></pre>\n<p>In my User Entity I have declared this named native query in this way:</p>\n<pre><code>        @NamedNativeQuery(\n                name = &quot;findUserUpdateByID&quot;,\n                query = &quot;select update from user_table where user_id = :userId; &quot;)\n</code></pre>\n<p>So all others query works properly, but only for this I receive this error:</p>\n<p>play.api.Application$$anon$1: Execution exception[[IllegalArgumentException: Parameter with that name [userId] did not exist]]\nat play.api.Application$class.handleError(Application.scala:296) ~[play_2.11-2.3.10.jar:2.3.10]</p>\n<p>How is it possible? In the user_table the field is named as user_id and I have a lot of query that works properly...</p>\n<p>I tried different query sintax approach, with or not with parameter... Works wituout parameters but with the param stil not works</p>\n"},{"tags":["java","amazon-dynamodb"],"comments":[{"owner":{"account_id":12262,"reputation":103384,"user_id":24054,"accept_rate":86,"display_name":"kgiannakakis"},"score":1,"creation_date":1637149040,"post_id":70002644,"comment_id":123746699,"body_markdown":"Create table if not exists isn&#39;t supported by DynamoDB, if this is what you are asking for. See https://stackoverflow.com/questions/37330575/dynamodb-createtable-if-not-exists for some options.","body":"Create table if not exists isn&#39;t supported by DynamoDB, if this is what you are asking for. See <a href=\"https://stackoverflow.com/questions/37330575/dynamodb-createtable-if-not-exists\" title=\"dynamodb createtable if not exists\">stackoverflow.com/questions/37330575/&hellip;</a> for some options."},{"owner":{"account_id":20168591,"reputation":58,"user_id":14791907,"display_name":"Grigor"},"score":0,"creation_date":1637149894,"post_id":70002644,"comment_id":123747015,"body_markdown":"https://stackoverflow.com/users/24054/kgiannakakis.     No for example when I use postgreSql I use migartion with sql to keep orders like delete update etc,I want to do the same with dynamodb","body":"<a href=\"https://stackoverflow.com/users/24054/kgiannakakis\">stackoverflow.com/users/24054/kgiannakakis</a>.     No for example when I use postgreSql I use migartion with sql to keep orders like delete update etc,I want to do the same with dynamodb"}],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637268408,"creation_date":1637268408,"answer_id":70026544,"question_id":70002644,"body_markdown":"DynamoDB is a NoSQL database, meaning you are out of luck if you want a simple query language to interact with it.\r\n\r\nSee reference: https://stackoverflow.com/questions/68194113/automating-dynamodb-scripts\r\n\r\nNow there might be good news, (If you know `Javascript`) :)\r\n\r\n`DynamoDB` offers a simple `SDK` for `Javascript`, that you could create an `xyz.js JavaScript` file, and run this script using `node`\r\n\r\nExample for Adding Entries:\r\n\r\n    // Load the AWS SDK for Node.js\r\n    var AWS = require(&#39;aws-sdk&#39;);\r\n    // Load credentials and set Region from JSON file\r\n    AWS.config.loadFromPath(&#39;./config.json&#39;);\r\n    \r\n    // Create DynamoDB service object\r\n    var ddb = new AWS.DynamoDB({apiVersion: &#39;2012-08-10&#39;});\r\n    \r\n    var myTable = &#39;TABLE_NAME&#39;;\r\n    \r\n    // Add the four results for spades\r\n    var params = {\r\n      TableName: myTable,\r\n      Item: {&#39;slotPosition&#39; : {N: &#39;0&#39;}, &#39;imageFile&#39; : {S: &#39;spad_a.png&#39;}\r\n      }\r\n    };\r\n    post();\r\n    \r\n    var params = {\r\n      TableName: myTable,\r\n      Item: {&#39;slotPosition&#39; : {N: &#39;1&#39;}, &#39;imageFile&#39; : {S: &#39;spad_k.png&#39;}\r\n      }\r\n    };\r\n    post();\r\n    \r\n    var params = {\r\n      TableName: myTable,\r\n      Item: {&#39;slotPosition&#39; : {N: &#39;2&#39;}, &#39;imageFile&#39; : {S: &#39;spad_q.png&#39;}\r\n      }\r\n    };\r\n    post();\r\n    \r\n    var params = {\r\n      TableName: myTable,\r\n      Item: {&#39;slotPosition&#39; : {N: &#39;3&#39;}, &#39;imageFile&#39; : {S: &#39;spad_j.png&#39;}\r\n      }\r\n    };\r\n    post();\r\n    \r\n    // Add the four results for hearts\r\n    .\r\n    .\r\n    .\r\n    \r\n    // Add the four results for diamonds\r\n    .\r\n    .\r\n    .\r\n    \r\n    // Add the four results for clubs\r\n    var params = {\r\n      TableName: myTable,\r\n      Item: {&#39;slotPosition&#39; : {N: &#39;12&#39;}, &#39;imageFile&#39; : {S: &#39;club_a.png&#39;}\r\n      }\r\n    };\r\n    post();\r\n    \r\n    var params = {\r\n      TableName: myTable,\r\n      Item: {&#39;slotPosition&#39; : {N: &#39;13&#39;}, &#39;imageFile&#39; : {S: &#39;club_k.png&#39;}\r\n      }\r\n    };\r\n    post();\r\n    \r\n    var params = {\r\n      TableName: myTable,\r\n      Item: {&#39;slotPosition&#39; : {N: &#39;14&#39;}, &#39;imageFile&#39; : {S: &#39;club_q.png&#39;}\r\n      }\r\n    };\r\n    post();\r\n    \r\n    var params = {\r\n      TableName: myTable,\r\n      Item: {&#39;slotPosition&#39; : {N: &#39;15&#39;}, &#39;imageFile&#39; : {S: &#39;club_j.png&#39;}\r\n      }\r\n    };\r\n    post();\r\n    \r\n    \r\n    function post () {\r\n      ddb.putItem(params, function(err, data) {\r\n        if (err) {\r\n          console.log(&quot;Error&quot;, err);\r\n        } else {\r\n          console.log(&quot;Success&quot;, data);\r\n        }\r\n      });\r\n    }\r\n\r\nFor reference: https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/using-lambda-ddb-setup.html","title":"How to perform DynamoDB table creation and updates with script similar to PostgreSQL migrations?","body":"<p>DynamoDB is a NoSQL database, meaning you are out of luck if you want a simple query language to interact with it.</p>\n<p>See reference: <a href=\"https://stackoverflow.com/questions/68194113/automating-dynamodb-scripts\">Automating dynamodb scripts</a></p>\n<p>Now there might be good news, (If you know <code>Javascript</code>) :)</p>\n<p><code>DynamoDB</code> offers a simple <code>SDK</code> for <code>Javascript</code>, that you could create an <code>xyz.js JavaScript</code> file, and run this script using <code>node</code></p>\n<p>Example for Adding Entries:</p>\n<pre><code>// Load the AWS SDK for Node.js\nvar AWS = require('aws-sdk');\n// Load credentials and set Region from JSON file\nAWS.config.loadFromPath('./config.json');\n\n// Create DynamoDB service object\nvar ddb = new AWS.DynamoDB({apiVersion: '2012-08-10'});\n\nvar myTable = 'TABLE_NAME';\n\n// Add the four results for spades\nvar params = {\n  TableName: myTable,\n  Item: {'slotPosition' : {N: '0'}, 'imageFile' : {S: 'spad_a.png'}\n  }\n};\npost();\n\nvar params = {\n  TableName: myTable,\n  Item: {'slotPosition' : {N: '1'}, 'imageFile' : {S: 'spad_k.png'}\n  }\n};\npost();\n\nvar params = {\n  TableName: myTable,\n  Item: {'slotPosition' : {N: '2'}, 'imageFile' : {S: 'spad_q.png'}\n  }\n};\npost();\n\nvar params = {\n  TableName: myTable,\n  Item: {'slotPosition' : {N: '3'}, 'imageFile' : {S: 'spad_j.png'}\n  }\n};\npost();\n\n// Add the four results for hearts\n.\n.\n.\n\n// Add the four results for diamonds\n.\n.\n.\n\n// Add the four results for clubs\nvar params = {\n  TableName: myTable,\n  Item: {'slotPosition' : {N: '12'}, 'imageFile' : {S: 'club_a.png'}\n  }\n};\npost();\n\nvar params = {\n  TableName: myTable,\n  Item: {'slotPosition' : {N: '13'}, 'imageFile' : {S: 'club_k.png'}\n  }\n};\npost();\n\nvar params = {\n  TableName: myTable,\n  Item: {'slotPosition' : {N: '14'}, 'imageFile' : {S: 'club_q.png'}\n  }\n};\npost();\n\nvar params = {\n  TableName: myTable,\n  Item: {'slotPosition' : {N: '15'}, 'imageFile' : {S: 'club_j.png'}\n  }\n};\npost();\n\n\nfunction post () {\n  ddb.putItem(params, function(err, data) {\n    if (err) {\n      console.log(&quot;Error&quot;, err);\n    } else {\n      console.log(&quot;Success&quot;, data);\n    }\n  });\n}\n</code></pre>\n<p>For reference: <a href=\"https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/using-lambda-ddb-setup.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/using-lambda-ddb-setup.html</a></p>\n"}],"owner":{"account_id":20168591,"reputation":58,"user_id":14791907,"display_name":"Grigor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":792,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70026544,"answer_count":1,"score":1,"last_activity_date":1677505961,"creation_date":1637144757,"question_id":70002644,"body_markdown":"&lt;h1&gt;DynamoDB&lt;/h1&gt;  \r\n\r\n     ArrayList&lt;AttributeDefinition&gt; attributeDefinitions = new \r\n            ArrayList&lt;&gt;();\r\n            attributeDefinitions.add(new AttributeDefinition()\r\n                        .withAttributeName(&quot;ID&quot;).withAttributeType(&quot;S&quot;));\r\n         \r\n           ArrayList&lt;KeySchemaElement&gt; keySchema = new ArrayList&lt;&gt;();\r\n           keySchema.add(new KeySchemaElement()\r\n                        .withAttributeName(&quot;ID&quot;).withKeyType(KeyType.HASH));\r\n         \r\n           CreateTableRequest createTableReq = new CreateTableRequest()\r\n                        .withTableName(&quot;Product&quot;)\r\n                        .withAttributeDefinitions(attributeDefinitions)\r\n                        .withKeySchema(keySchema)\r\n                        .withProvisionedThroughput(new \r\n                         ProvisionedThroughput()\r\n                                .withReadCapacityUnits(10L)\r\n                                .withWriteCapacityUnits(5L));\r\n           CreateTableResult result =  dynamodb.createTable(createTableReq);\r\n           System.out.println(result.toString());\r\n\r\n&gt; If I want to create a table like this where can I put this code to work just once, is there any migration script tool or something like that?\r\n\r\n","title":"How to perform DynamoDB table creation and updates with script similar to PostgreSQL migrations?","body":"<h1>DynamoDB</h1>  \n<pre><code> ArrayList&lt;AttributeDefinition&gt; attributeDefinitions = new \n        ArrayList&lt;&gt;();\n        attributeDefinitions.add(new AttributeDefinition()\n                    .withAttributeName(&quot;ID&quot;).withAttributeType(&quot;S&quot;));\n     \n       ArrayList&lt;KeySchemaElement&gt; keySchema = new ArrayList&lt;&gt;();\n       keySchema.add(new KeySchemaElement()\n                    .withAttributeName(&quot;ID&quot;).withKeyType(KeyType.HASH));\n     \n       CreateTableRequest createTableReq = new CreateTableRequest()\n                    .withTableName(&quot;Product&quot;)\n                    .withAttributeDefinitions(attributeDefinitions)\n                    .withKeySchema(keySchema)\n                    .withProvisionedThroughput(new \n                     ProvisionedThroughput()\n                            .withReadCapacityUnits(10L)\n                            .withWriteCapacityUnits(5L));\n       CreateTableResult result =  dynamodb.createTable(createTableReq);\n       System.out.println(result.toString());\n</code></pre>\n<blockquote>\n<p>If I want to create a table like this where can I put this code to work just once, is there any migration script tool or something like that?</p>\n</blockquote>\n"},{"tags":["java","jar"],"comments":[{"owner":{"account_id":10491815,"reputation":26310,"user_id":7733418,"display_name":"Yunnosch"},"score":0,"creation_date":1597081057,"post_id":63345226,"comment_id":112011262,"body_markdown":"Hmm, I am not sure whether you don&#39;t actually want to start your net beans from cmd, i.e. the other way around. Please confirm or deny, with reason.","body":"Hmm, I am not sure whether you don&#39;t actually want to start your net beans from cmd, i.e. the other way around. Please confirm or deny, with reason."},{"owner":{"account_id":19705285,"reputation":160,"user_id":20654602,"display_name":"Rishon_JR"},"score":0,"creation_date":1677252350,"post_id":63345226,"comment_id":133306895,"body_markdown":"You can do `Runtime.getRuntime().exec(&quot;&quot;);`. Or if you want to run multiple times you can do `Runtime rn = Runtime.getRuntime(); rn.exec(&quot;&quot;);` ...(and so on). The runtime class is present in the `java.awt` package.","body":"You can do <code>Runtime.getRuntime().exec(&quot;&quot;);</code>. Or if you want to run multiple times you can do <code>Runtime rn = Runtime.getRuntime(); rn.exec(&quot;&quot;);</code> ...(and so on). The runtime class is present in the <code>java.awt</code> package."}],"answers":[{"tags":[],"owner":{"account_id":2758758,"reputation":813,"user_id":2376087,"display_name":"sercheo_87"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677505705,"creation_date":1597081292,"answer_id":63345307,"question_id":63345226,"body_markdown":"Use **ProcessBuilder** to execute commands on the OS. Please see this example on [How to execute a shell command from Java][1]. \r\n\r\n\r\n  [1]: https://mkyong.com/java/how-to-execute-shell-command-from-java/","title":"Open Cmd with a jar file and execute the program","body":"<p>Use <strong>ProcessBuilder</strong> to execute commands on the OS. Please see this example on <a href=\"https://mkyong.com/java/how-to-execute-shell-command-from-java/\" rel=\"nofollow noreferrer\">How to execute a shell command from Java</a>.</p>\n"}],"owner":{"account_id":18771222,"reputation":175,"user_id":13687989,"display_name":"Holis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1677505705,"creation_date":1597080923,"question_id":63345226,"body_markdown":"Hi I want to open mi cmd program from the jar file of NetBeans\r\n\r\nWe will call the program &quot;Super_Program&quot;. The program should be run on the cmd but I have a jar file so how can I open cmd from a code in the jar file that also executes it","title":"Open Cmd with a jar file and execute the program","body":"<p>Hi I want to open mi cmd program from the jar file of NetBeans</p>\n<p>We will call the program &quot;Super_Program&quot;. The program should be run on the cmd but I have a jar file so how can I open cmd from a code in the jar file that also executes it</p>\n"},{"tags":["java","spring-boot","swagger","http-post"],"answers":[{"tags":[],"owner":{"account_id":17627308,"reputation":76,"user_id":12792134,"display_name":"Lucca Biagi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677346338,"creation_date":1677346338,"answer_id":75567194,"question_id":75566954,"body_markdown":"I think that the problem here is your RequestBody import. It is using the one from swagger, not from spring! \r\nIt should be\r\n\r\n    org.springframework.web.bind.annotation.RequestBody;\r\n\r\nAnd if I may, I&#39;d suggest you to change from [springfox to springdoc][1] as there is [some good things about this change.][2]\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-rest-openapi-documentation\r\n  [2]: https://stackoverflow.com/questions/72479827/are-there-any-advantages-of-using-migrating-to-springdoc-openapi-from-springfox","title":"My @RequestBody returns my object with null variables","body":"<p>I think that the problem here is your RequestBody import. It is using the one from swagger, not from spring!\nIt should be</p>\n<pre><code>org.springframework.web.bind.annotation.RequestBody;\n</code></pre>\n<p>And if I may, I'd suggest you to change from <a href=\"https://www.baeldung.com/spring-rest-openapi-documentation\" rel=\"nofollow noreferrer\">springfox to springdoc</a> as there is <a href=\"https://stackoverflow.com/questions/72479827/are-there-any-advantages-of-using-migrating-to-springdoc-openapi-from-springfox\">some good things about this change.</a></p>\n"}],"owner":{"account_id":27878074,"reputation":13,"user_id":21287171,"display_name":"user21287171"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":676,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75567194,"answer_count":1,"score":1,"last_activity_date":1677505645,"creation_date":1677343981,"question_id":75566954,"body_markdown":"I&#39;m currently doing a backend service in Java and Springboot allowing to create users in a MongoDB database. I use Swagger to make it easier to test my queries. Currently, I have a UserController that allows to create a user in my database.\r\n\r\nUserController:\r\n\r\n```\r\npackage demomongo;\r\n\r\nimport org.springframework.data.mongodb.core.MongoTemplate;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RequestMethod;\r\nimport org.springframework.web.bind.annotation.RestController;\r\nimport io.swagger.v3.oas.annotations.parameters.RequestBody;\r\n\r\n@RestController@RequestMapping(&quot;/api/users&quot;)\r\npublic class UserController {\r\n\r\nprivate final MongoTemplate mongoTemplate;\r\n\r\npublic UserController(MongoTemplate mongoTemplate) {\r\n\tthis.mongoTemplate = mongoTemplate;\r\n}\r\n\r\n@RequestMapping(value = &quot;/createUser&quot;, headers = {\r\n\t\t&quot;content-type=application/json&quot; }, consumes = MediaType.APPLICATION_JSON_VALUE, method = RequestMethod.POST)\r\npublic ResponseEntity&lt;UserToto&gt; createUser(@RequestBody UserToto user) {\r\n\t// Sauvegarde l&#39;utilisateur dans la base de donn&#233;es\r\n\tmongoTemplate.save(user, &quot;users&quot;);\r\n\r\n\t// Retourne l&#39;utilisateur sauvegard&#233; avec le code de statut 201 (Created)\r\n\tResponseEntity&lt;UserToto&gt; responseEntity = ResponseEntity.status(HttpStatus.CREATED).body(user);\r\n\treturn responseEntity;\r\n}\r\n}\r\n```\r\n\r\nAll the information I provide is lost in the @RequestBody.\r\n\r\nThis is my User class:\r\n\r\n```\r\npackage demomongo;\r\n\r\nimport org.springframework.data.annotation.Id;\r\nimport org.springframework.data.mongodb.core.mapping.Document;\r\nimport org.springframework.data.mongodb.core.mapping.Field;\r\n\r\n@Document(collection = &quot;users&quot;)\r\npublic class UserToto {\r\n\r\n\t@Id\r\n\tpublic String id;\r\n\r\n\t@Field(&quot;username&quot;)\r\n\tpublic String username;\r\n\r\n\t@Field(&quot;password&quot;)\r\n\tpublic String password;\r\n\r\n\t@Field(&quot;email&quot;)\r\n\tpublic String email;\r\n\r\n\t@Field(&quot;role&quot;)\r\n\tpublic ERole role;\r\n\r\n\tpublic UserToto() {\r\n\t\t// TODO Auto-generated constructor stub\r\n\t}\r\n\r\n\tpublic UserToto(String username, String password, String email, ERole role) {\r\n\t\tthis.username = username;\r\n\t\tthis.password = password;\r\n\t\tthis.email = email;\r\n\t\tthis.role = role;\r\n\t}\r\n\r\n\tpublic String getUsername() {\r\n\t\treturn username;\r\n\t}\r\n\r\n\tpublic void setUsername(String username) {\r\n\t\tthis.username = username;\r\n\t}\r\n\r\n\tpublic String getPassword() {\r\n\t\treturn password;\r\n\t}\r\n\r\n\tpublic void setPassword(String password) {\r\n\t\tthis.password = password;\r\n\t}\r\n\r\n\tpublic String getEmail() {\r\n\t\treturn email;\r\n\t}\r\n\r\n\tpublic void setEmail(String email) {\r\n\t\tthis.email = email;\r\n\t}\r\n\r\n\tpublic ERole getRole() {\r\n\t\treturn role;\r\n\t}\r\n\r\n\tpublic void setRole(ERole role) {\r\n\t\tthis.role = role;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nAnd I see this when I run a query in the console (I am in debug) :\r\n\r\n```\r\n\r\nCookie: _ga=GA1.1.1509338151.1640108306; _ga_635PSCWLD2=GS1.1.1640358628.4.1.1640361429.0\r\n\r\n{\r\n  &quot;id&quot;: &quot;string&quot;,\r\n  &quot;username&quot;: &quot;qqzqdqz&quot;,\r\n  &quot;password&quot;: &quot;qqzsqz&quot;,\r\n  &quot;email&quot;: &quot;string&quot;,\r\n  &quot;role&quot;: &quot;ADMIN&quot;\r\n}]\r\n2023-02-25 17:48:34.000 DEBUG 3176 --- [nio-8080-exec-3] o.a.t.util.http.Rfc6265CookieProcessor   : Cookies: Parsing b[]: _ga=GA1.1.1509338151.1640108306; _ga_635PSCWLD2=GS1.1.1640358628.4.1.1640361429.0\r\n2023-02-25 17:48:34.000 DEBUG 3176 --- [nio-8080-exec-3] o.a.c.authenticator.AuthenticatorBase    : Security checking request POST /api/users/createUser\r\n2023-02-25 17:48:34.000 DEBUG 3176 --- [nio-8080-exec-3] org.apache.catalina.realm.RealmBase      :   No applicable constraints defined\r\n2023-02-25 17:48:34.000 DEBUG 3176 --- [nio-8080-exec-3] o.a.c.authenticator.AuthenticatorBase    : Not subject to any constraint\r\n2023-02-25 17:48:34.001 DEBUG 3176 --- [nio-8080-exec-3] org.apache.tomcat.util.http.Parameters   : Set encoding to UTF-8\r\n2023-02-25 17:48:34.001 DEBUG 3176 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST &quot;/api/users/createUser&quot;, parameters={}\r\n2023-02-25 17:48:34.001 DEBUG 3176 --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to demomongo.UserController#createUser(UserToto)\r\n2023-02-25 17:48:34.002 DEBUG 3176 --- [nio-8080-exec-3] o.s.data.mongodb.core.MongoTemplate      : Saving Document containing fields: [_class]\r\n2023-02-25 17:48:34.002 DEBUG 3176 --- [nio-8080-exec-3] org.mongodb.driver.operation             : retryWrites set to true but the server is a standalone server.\r\n2023-02-25 17:48:34.003 DEBUG 3176 --- [nio-8080-exec-3] org.mongodb.driver.protocol.command      : Sending command &#39;{&quot;insert&quot;: &quot;users&quot;, &quot;ordered&quot;: true, &quot;$db&quot;: &quot;local&quot;, &quot;lsid&quot;: {&quot;id&quot;: {&quot;$binary&quot;: {&quot;base64&quot;: &quot;ZqkevgwVRNW11lq6aFInlg==&quot;, &quot;subType&quot;: &quot;04&quot;}}}, &quot;documents&quot;: [{&quot;_id&quot;: {&quot;$oid&quot;: &quot;63fa3be2d71e155ac3ed737a&quot;}, &quot;_class&quot;: &quot;demomongo.UserToto&quot;}]}&#39; with request id 130 to database local on connection [connectionId{localValue:3, serverValue:361}] to server localhost:27017\r\n2023-02-25 17:48:34.003 DEBUG 3176 --- [nio-8080-exec-3] org.mongodb.driver.protocol.command      : Execution of command with request id 130 completed successfully in 1.03 ms on connection [connectionId{localValue:3, serverValue:361}] to server localhost:27017\r\n2023-02-25 17:48:34.004 DEBUG 3176 --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using &#39;application/json&#39;, given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]\r\n2023-02-25 17:48:34.004 DEBUG 3176 --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [demomongo.UserToto@446d6913]\r\n2023-02-25 17:48:34.005 DEBUG 3176 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED\r\n2023-02-25 17:48:34.006 DEBUG 3176 --- [nio-8080-exec-3] o.a.coyote.http11.Http11InputBuffer      : Before fill(): \r\n```\r\n\r\nHere is my POM and my Run class :\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.5.0&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;groupId&gt;demomongo&lt;/groupId&gt;\r\n    &lt;artifactId&gt;demomongo&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n        &lt;springfox.version&gt;3.0.0&lt;/springfox.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n            &lt;version&gt;4.0.1&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\r\n            &lt;version&gt;${springfox.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n            &lt;version&gt;${springfox.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.6.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n```\r\npackage demomongo;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.CommandLineRunner;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\nimport springfox.documentation.swagger2.annotations.EnableSwagger2;\r\n\r\n@EnableSwagger2\r\n@SpringBootApplication\r\npublic class Run implements CommandLineRunner {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(Run.class, args);\r\n\t}\r\n\r\n\tpublic void run(String... args) throws Exception {\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\nI hope I was clear enough... thanks to all","title":"My @RequestBody returns my object with null variables","body":"<p>I'm currently doing a backend service in Java and Springboot allowing to create users in a MongoDB database. I use Swagger to make it easier to test my queries. Currently, I have a UserController that allows to create a user in my database.</p>\n<p>UserController:</p>\n<pre><code>package demomongo;\n\nimport org.springframework.data.mongodb.core.MongoTemplate;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\nimport io.swagger.v3.oas.annotations.parameters.RequestBody;\n\n@RestController@RequestMapping(&quot;/api/users&quot;)\npublic class UserController {\n\nprivate final MongoTemplate mongoTemplate;\n\npublic UserController(MongoTemplate mongoTemplate) {\n    this.mongoTemplate = mongoTemplate;\n}\n\n@RequestMapping(value = &quot;/createUser&quot;, headers = {\n        &quot;content-type=application/json&quot; }, consumes = MediaType.APPLICATION_JSON_VALUE, method = RequestMethod.POST)\npublic ResponseEntity&lt;UserToto&gt; createUser(@RequestBody UserToto user) {\n    // Sauvegarde l'utilisateur dans la base de données\n    mongoTemplate.save(user, &quot;users&quot;);\n\n    // Retourne l'utilisateur sauvegardé avec le code de statut 201 (Created)\n    ResponseEntity&lt;UserToto&gt; responseEntity = ResponseEntity.status(HttpStatus.CREATED).body(user);\n    return responseEntity;\n}\n}\n</code></pre>\n<p>All the information I provide is lost in the @RequestBody.</p>\n<p>This is my User class:</p>\n<pre><code>package demomongo;\n\nimport org.springframework.data.annotation.Id;\nimport org.springframework.data.mongodb.core.mapping.Document;\nimport org.springframework.data.mongodb.core.mapping.Field;\n\n@Document(collection = &quot;users&quot;)\npublic class UserToto {\n\n    @Id\n    public String id;\n\n    @Field(&quot;username&quot;)\n    public String username;\n\n    @Field(&quot;password&quot;)\n    public String password;\n\n    @Field(&quot;email&quot;)\n    public String email;\n\n    @Field(&quot;role&quot;)\n    public ERole role;\n\n    public UserToto() {\n        // TODO Auto-generated constructor stub\n    }\n\n    public UserToto(String username, String password, String email, ERole role) {\n        this.username = username;\n        this.password = password;\n        this.email = email;\n        this.role = role;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public ERole getRole() {\n        return role;\n    }\n\n    public void setRole(ERole role) {\n        this.role = role;\n    }\n\n}\n</code></pre>\n<p>And I see this when I run a query in the console (I am in debug) :</p>\n<pre><code>\nCookie: _ga=GA1.1.1509338151.1640108306; _ga_635PSCWLD2=GS1.1.1640358628.4.1.1640361429.0\n\n{\n  &quot;id&quot;: &quot;string&quot;,\n  &quot;username&quot;: &quot;qqzqdqz&quot;,\n  &quot;password&quot;: &quot;qqzsqz&quot;,\n  &quot;email&quot;: &quot;string&quot;,\n  &quot;role&quot;: &quot;ADMIN&quot;\n}]\n2023-02-25 17:48:34.000 DEBUG 3176 --- [nio-8080-exec-3] o.a.t.util.http.Rfc6265CookieProcessor   : Cookies: Parsing b[]: _ga=GA1.1.1509338151.1640108306; _ga_635PSCWLD2=GS1.1.1640358628.4.1.1640361429.0\n2023-02-25 17:48:34.000 DEBUG 3176 --- [nio-8080-exec-3] o.a.c.authenticator.AuthenticatorBase    : Security checking request POST /api/users/createUser\n2023-02-25 17:48:34.000 DEBUG 3176 --- [nio-8080-exec-3] org.apache.catalina.realm.RealmBase      :   No applicable constraints defined\n2023-02-25 17:48:34.000 DEBUG 3176 --- [nio-8080-exec-3] o.a.c.authenticator.AuthenticatorBase    : Not subject to any constraint\n2023-02-25 17:48:34.001 DEBUG 3176 --- [nio-8080-exec-3] org.apache.tomcat.util.http.Parameters   : Set encoding to UTF-8\n2023-02-25 17:48:34.001 DEBUG 3176 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST &quot;/api/users/createUser&quot;, parameters={}\n2023-02-25 17:48:34.001 DEBUG 3176 --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to demomongo.UserController#createUser(UserToto)\n2023-02-25 17:48:34.002 DEBUG 3176 --- [nio-8080-exec-3] o.s.data.mongodb.core.MongoTemplate      : Saving Document containing fields: [_class]\n2023-02-25 17:48:34.002 DEBUG 3176 --- [nio-8080-exec-3] org.mongodb.driver.operation             : retryWrites set to true but the server is a standalone server.\n2023-02-25 17:48:34.003 DEBUG 3176 --- [nio-8080-exec-3] org.mongodb.driver.protocol.command      : Sending command '{&quot;insert&quot;: &quot;users&quot;, &quot;ordered&quot;: true, &quot;$db&quot;: &quot;local&quot;, &quot;lsid&quot;: {&quot;id&quot;: {&quot;$binary&quot;: {&quot;base64&quot;: &quot;ZqkevgwVRNW11lq6aFInlg==&quot;, &quot;subType&quot;: &quot;04&quot;}}}, &quot;documents&quot;: [{&quot;_id&quot;: {&quot;$oid&quot;: &quot;63fa3be2d71e155ac3ed737a&quot;}, &quot;_class&quot;: &quot;demomongo.UserToto&quot;}]}' with request id 130 to database local on connection [connectionId{localValue:3, serverValue:361}] to server localhost:27017\n2023-02-25 17:48:34.003 DEBUG 3176 --- [nio-8080-exec-3] org.mongodb.driver.protocol.command      : Execution of command with request id 130 completed successfully in 1.03 ms on connection [connectionId{localValue:3, serverValue:361}] to server localhost:27017\n2023-02-25 17:48:34.004 DEBUG 3176 --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]\n2023-02-25 17:48:34.004 DEBUG 3176 --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [demomongo.UserToto@446d6913]\n2023-02-25 17:48:34.005 DEBUG 3176 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED\n2023-02-25 17:48:34.006 DEBUG 3176 --- [nio-8080-exec-3] o.a.coyote.http11.Http11InputBuffer      : Before fill(): \n</code></pre>\n<p>Here is my POM and my Run class :</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.5.0&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;groupId&gt;demomongo&lt;/groupId&gt;\n    &lt;artifactId&gt;demomongo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;springfox.version&gt;3.0.0&lt;/springfox.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;version&gt;2.5.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n            &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n            &lt;version&gt;${springfox.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n            &lt;version&gt;${springfox.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n        &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n            &lt;version&gt;1.6.4&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<pre><code>package demomongo;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\nimport springfox.documentation.swagger2.annotations.EnableSwagger2;\n\n@EnableSwagger2\n@SpringBootApplication\npublic class Run implements CommandLineRunner {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Run.class, args);\n    }\n\n    public void run(String... args) throws Exception {\n\n    }\n\n}\n</code></pre>\n<p>I hope I was clear enough... thanks to all</p>\n"},{"tags":["java","android","android-intent","android-activity"],"owner":{"account_id":27891163,"reputation":1,"user_id":21297506,"display_name":"JefferyC"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677505422,"creation_date":1677505329,"question_id":75581258,"body_markdown":"On Android Version 4.4.2:\r\n\r\nI have this code inside an `onResume()` method.\r\n```\r\n\r\n      if (paid) {\r\n            Intent intent = new Intent(this, EventsActivity.class);\r\n            startActivity(intent);\r\n       } \r\n```\r\n\r\nI am calling this from the `ProductsActivity.class`,and there already exists an instance/task of the EventsActivity.\r\n\r\n`ProductsActivity` and `EventsActivity` are both `singleInstance`.\r\n\r\nNothing happens when this part of the code is ran.\r\n\r\nOn my other device with Android Version 5.1.1, this all works as intended, it is only on this specific device with Android Version 4.4.2, it doesn&#39;t take me to the `EventsActivity`.\r\n\r\n\r\n\r\nI have tried:\r\n\r\n```\r\n    Intent intent = new Intent(ProductsActivity.this, EventsActivity.class);\r\n    startActivity(intent);\r\n```\r\n\r\nas well as adding Flags to the intent but nothing worked.\r\n\r\nI had a look at the Activity Stack with `adb shell dumpsys activity activities` as well but cannot find the problem of why `EventsActivity` is not being shown.","title":"startActivity not adding/moving activity to foreground","body":"<p>On Android Version 4.4.2:</p>\n<p>I have this code inside an <code>onResume()</code> method.</p>\n<pre><code>\n      if (paid) {\n            Intent intent = new Intent(this, EventsActivity.class);\n            startActivity(intent);\n       } \n</code></pre>\n<p>I am calling this from the <code>ProductsActivity.class</code>,and there already exists an instance/task of the EventsActivity.</p>\n<p><code>ProductsActivity</code> and <code>EventsActivity</code> are both <code>singleInstance</code>.</p>\n<p>Nothing happens when this part of the code is ran.</p>\n<p>On my other device with Android Version 5.1.1, this all works as intended, it is only on this specific device with Android Version 4.4.2, it doesn't take me to the <code>EventsActivity</code>.</p>\n<p>I have tried:</p>\n<pre><code>    Intent intent = new Intent(ProductsActivity.this, EventsActivity.class);\n    startActivity(intent);\n</code></pre>\n<p>as well as adding Flags to the intent but nothing worked.</p>\n<p>I had a look at the Activity Stack with <code>adb shell dumpsys activity activities</code> as well but cannot find the problem of why <code>EventsActivity</code> is not being shown.</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1677506385,"post_id":75581261,"comment_id":133345384,"body_markdown":"A `List&lt;String&gt;` is not a `List&lt;Object&gt;` and a `Stream&lt;EntityVersion&lt;Product&gt;&gt;` is not a `Stream&lt;EntityVersion&lt;? extends BaseEntity&gt;&gt;`. But there’s no sense in storing a Stream anyway.","body":"A <code>List&lt;String&gt;</code> is not a <code>List&lt;Object&gt;</code> and a <code>Stream&lt;EntityVersion&lt;Product&gt;&gt;</code> is not a <code>Stream&lt;EntityVersion&lt;? extends BaseEntity&gt;&gt;</code>. But there’s no sense in storing a Stream anyway."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1677506677,"post_id":75581261,"comment_id":133345482,"body_markdown":"Even though `EntityVersion&lt;Product&gt;` is a subtype of `EntityVersion&lt;? extends BaseEntity&gt;`, that does not mean `Stream&lt;EntityVersion&lt;Product&gt;&gt;` is a subtype of `Stream&lt;EntityVersion&lt;? extends BaseEntity&gt;&gt;`, in the same way that `Stream&lt;Dog&gt;` is not a subtype of `Stream&lt;Animal&gt;`. See also [this recent question I answered](https://stackoverflow.com/q/75332666/5133585), which is also about the subtyping of nested generics. They follow the same rules as a single layer of generics, really.","body":"Even though <code>EntityVersion&lt;Product&gt;</code> is a subtype of <code>EntityVersion&lt;? extends BaseEntity&gt;</code>, that does not mean <code>Stream&lt;EntityVersion&lt;Product&gt;&gt;</code> is a subtype of <code>Stream&lt;EntityVersion&lt;? extends BaseEntity&gt;&gt;</code>, in the same way that <code>Stream&lt;Dog&gt;</code> is not a subtype of <code>Stream&lt;Animal&gt;</code>. See also <a href=\"https://stackoverflow.com/q/75332666/5133585\">this recent question I answered</a>, which is also about the subtyping of nested generics. They follow the same rules as a single layer of generics, really."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1677506781,"post_id":75581261,"comment_id":133345506,"body_markdown":"Rather, `Stream&lt;EntityVersion&lt;Product&gt;&gt;` is a subtype of `Stream&lt;? extends EntityVersion&lt;? extends BaseEntity&gt;&gt;`.","body":"Rather, <code>Stream&lt;EntityVersion&lt;Product&gt;&gt;</code> is a subtype of <code>Stream&lt;? extends EntityVersion&lt;? extends BaseEntity&gt;&gt;</code>."}],"owner":{"account_id":133693,"reputation":627,"user_id":335258,"accept_rate":100,"display_name":"Francesco Papagno"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677505385,"creation_date":1677505385,"question_id":75581261,"body_markdown":"I&#39;m interested in understanding why, in the example given below, the row instantiating `wrapper2` gives a compilation error:\r\n```\r\njava: incompatible types: inference variable V has incompatible bounds\r\n    equality constraints: java.util.stream.Stream&lt;EntityVersion&lt;? extends BaseEntity&gt;&gt;\r\n    lower bounds: java.util.stream.Stream&lt;EntityVersion&lt;Product&gt;&gt;\r\n```\r\n\r\nExample:\r\n```\r\nimport java.util.Map;\r\nimport java.util.UUID;\r\nimport java.util.stream.Stream;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Data;\r\nimport lombok.val;\r\n\r\n@Data\r\nclass BaseEntity {\r\n    UUID id;\r\n}\r\n\r\n@Data\r\n@AllArgsConstructor\r\nclass Product extends BaseEntity {\r\n    String name;\r\n};\r\n\r\n@Data\r\n@AllArgsConstructor\r\nclass EntityVersion&lt;T extends BaseEntity&gt; {\r\n    String status;\r\n    T entity;\r\n}\r\n\r\nrecord EntityVersions(Map&lt;String, Stream&lt;EntityVersion&lt;? extends BaseEntity&gt;&gt;&gt; entityVersions) {}\r\n\r\nclass Main {\r\n    \r\n    public static void main(String[]args){\r\n        EntityVersion&lt;Product&gt; product = new EntityVersion&lt;&gt;(&quot;new&quot;, new Product(&quot;Product 1&quot;));\r\n                \r\n        Stream&lt;EntityVersion&lt;? extends BaseEntity&gt;&gt; products1 = Stream.of(product);\r\n        val wrapper1 = new EntityVersions(Map.of(&quot;products&quot;, products1));\r\n        \r\n        Stream&lt;EntityVersion&lt;Product&gt;&gt; products2 = Stream.of(product);\r\n        val wrapper2 = new EntityVersions(Map.of(&quot;products&quot;, products2));\r\n    }\r\n}\r\n\r\n\r\n```","title":"Unexpected behaviour of generics wildcard","body":"<p>I'm interested in understanding why, in the example given below, the row instantiating <code>wrapper2</code> gives a compilation error:</p>\n<pre><code>java: incompatible types: inference variable V has incompatible bounds\n    equality constraints: java.util.stream.Stream&lt;EntityVersion&lt;? extends BaseEntity&gt;&gt;\n    lower bounds: java.util.stream.Stream&lt;EntityVersion&lt;Product&gt;&gt;\n</code></pre>\n<p>Example:</p>\n<pre><code>import java.util.Map;\nimport java.util.UUID;\nimport java.util.stream.Stream;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.val;\n\n@Data\nclass BaseEntity {\n    UUID id;\n}\n\n@Data\n@AllArgsConstructor\nclass Product extends BaseEntity {\n    String name;\n};\n\n@Data\n@AllArgsConstructor\nclass EntityVersion&lt;T extends BaseEntity&gt; {\n    String status;\n    T entity;\n}\n\nrecord EntityVersions(Map&lt;String, Stream&lt;EntityVersion&lt;? extends BaseEntity&gt;&gt;&gt; entityVersions) {}\n\nclass Main {\n    \n    public static void main(String[]args){\n        EntityVersion&lt;Product&gt; product = new EntityVersion&lt;&gt;(&quot;new&quot;, new Product(&quot;Product 1&quot;));\n                \n        Stream&lt;EntityVersion&lt;? extends BaseEntity&gt;&gt; products1 = Stream.of(product);\n        val wrapper1 = new EntityVersions(Map.of(&quot;products&quot;, products1));\n        \n        Stream&lt;EntityVersion&lt;Product&gt;&gt; products2 = Stream.of(product);\n        val wrapper2 = new EntityVersions(Map.of(&quot;products&quot;, products2));\n    }\n}\n\n\n</code></pre>\n"},{"tags":["java","openssl","spring-webclient"],"comments":[{"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"score":1,"creation_date":1677685704,"post_id":75581151,"comment_id":133387456,"body_markdown":"Make sure required CA is added to the JVM trust store. In addition, you can use `-Djavax.net.debug=all` system property to troubleshoot TLS https://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/ReadDebug.html","body":"Make sure required CA is added to the JVM trust store. In addition, you can use <code>-Djavax.net.debug=all</code> system property to troubleshoot TLS <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/ReadDebug.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/technotes/guides/security/jsse&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":9885814,"reputation":1371,"user_id":7320372,"display_name":"Thomas Lang"},"score":0,"creation_date":1677824279,"post_id":75581151,"comment_id":133417165,"body_markdown":"The &quot;problem&quot; on adding it to the truststore is that we have several stage machines (deploy, test, dev, prod) where it would have been to be added to. Besides that we are forced to change certificates yearly. So this means a lot of work. In the meantime i got it to work by this suggestion: https://stackoverflow.com/a/53147631/7320372","body":"The &quot;problem&quot; on adding it to the truststore is that we have several stage machines (deploy, test, dev, prod) where it would have been to be added to. Besides that we are forced to change certificates yearly. So this means a lot of work. In the meantime i got it to work by this suggestion: <a href=\"https://stackoverflow.com/a/53147631/7320372\">stackoverflow.com/a/53147631/7320372</a>"}],"owner":{"account_id":9885814,"reputation":1371,"user_id":7320372,"display_name":"Thomas Lang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":306,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677505274,"creation_date":1677504794,"question_id":75581151,"body_markdown":"I&#180;m facing a strange issue. \r\n\r\nWe have a valid certificate from a trusted root CA - in concrete USERTrust RSA Certification Authority for server-01.\r\n\r\nWhen i visit the API in the browser for server-01, everything`s fine.   \r\nWe have a certificate chain with the above root CA und then a intermediate one.\r\n\r\nWhen i use this code:\r\n```java\r\nreturn reactiveWebClient\r\n\t\t\t\t.get()\r\n\t\t\t\t.uri(uri.toString())\r\n\t\t\t\t.retrieve()\r\n\t\t\t\t.bodyToFlux(IncomingMessage.class);\r\n\r\n```\r\nIt fails with this exception:   `org.springframework.web.reactive.function.client.WebClientRequestException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path`\r\n\r\nWhen i try another server-02 in our infrastructure the above `reactiveWebClient` works.  \r\nThis server-02 has also a valid certificate but from another issuer CA.\r\n\r\nThe intermediate CA from server-01 is:  \r\nGEANT OV RSA CA 4\r\n\r\nThe intermediate CA from server-02 is:  \r\nDFN-Verein Certification Authority 2\r\n\r\n**Please note:** \r\n\r\nBoth server have valid certificates.\r\n`openssl` command verifies this.\r\n\r\nFor my understanding somethings wrong with the first server-01 intermediate certificate.\r\n\r\nHow can i handle this?\r\n\r\n**Please note:** \r\n\r\nI don&#180;t want to install the whole cert in the JDK&#180;s trusted certificates as we have to exchange all server certificates on a yearly basis.","title":"Spring WebClient fails on intermediate certificate","body":"<p>I´m facing a strange issue.</p>\n<p>We have a valid certificate from a trusted root CA - in concrete USERTrust RSA Certification Authority for server-01.</p>\n<p>When i visit the API in the browser for server-01, everything`s fine.<br />\nWe have a certificate chain with the above root CA und then a intermediate one.</p>\n<p>When i use this code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>return reactiveWebClient\n                .get()\n                .uri(uri.toString())\n                .retrieve()\n                .bodyToFlux(IncomingMessage.class);\n\n</code></pre>\n<p>It fails with this exception:   <code>org.springframework.web.reactive.function.client.WebClientRequestException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path</code></p>\n<p>When i try another server-02 in our infrastructure the above <code>reactiveWebClient</code> works.<br />\nThis server-02 has also a valid certificate but from another issuer CA.</p>\n<p>The intermediate CA from server-01 is:<br />\nGEANT OV RSA CA 4</p>\n<p>The intermediate CA from server-02 is:<br />\nDFN-Verein Certification Authority 2</p>\n<p><strong>Please note:</strong></p>\n<p>Both server have valid certificates.\n<code>openssl</code> command verifies this.</p>\n<p>For my understanding somethings wrong with the first server-01 intermediate certificate.</p>\n<p>How can i handle this?</p>\n<p><strong>Please note:</strong></p>\n<p>I don´t want to install the whole cert in the JDK´s trusted certificates as we have to exchange all server certificates on a yearly basis.</p>\n"},{"tags":["java","xml","jackson"],"comments":[{"owner":{"account_id":1726806,"reputation":13951,"user_id":4790924,"accept_rate":67,"display_name":"Sharon Ben Asher"},"score":0,"creation_date":1677315304,"post_id":75557088,"comment_id":133316687,"body_markdown":"`Company` has no `address` and `contacts` instance variables","body":"<code>Company</code> has no <code>address</code> and <code>contacts</code> instance variables"},{"owner":{"account_id":25427262,"reputation":3,"user_id":19232284,"display_name":"Estudio Tademan"},"score":0,"creation_date":1677505113,"post_id":75557088,"comment_id":133344947,"body_markdown":"I already edit the code. I had to make an adaptation from existing code to make things more clear .Thank you.","body":"I already edit the code. I had to make an adaptation from existing code to make things more clear .Thank you."}],"answers":[{"comments":[{"owner":{"account_id":25427262,"reputation":3,"user_id":19232284,"display_name":"Estudio Tademan"},"score":0,"creation_date":1677504989,"post_id":75564441,"comment_id":133344913,"body_markdown":"Thanks ! The problem with that ,is that Company do not have a List of Child like you added. If you look my example,it says &quot;     public List&lt;Parent&gt; childs; &quot; . So ,i can not use a harcoded name (    @JacksonXmlProperty(localName = &quot;my_child&quot;)) . Because ,each child is gonna have its own name (    @JsonTypeName(&quot;my_child&quot;) . Maybe i have another class extending from Parent with the following root annotation (    @JsonTypeName(&quot;my_child_2&quot;)","body":"Thanks ! The problem with that ,is that Company do not have a List of Child like you added. If you look my example,it says &quot;     public List&lt;Parent&gt; childs; &quot; . So ,i can not use a harcoded name (    @JacksonXmlProperty(localName = &quot;my_child&quot;)) . Because ,each child is gonna have its own name (    @JsonTypeName(&quot;my_child&quot;) . Maybe i have another class extending from Parent with the following root annotation (    @JsonTypeName(&quot;my_child_2&quot;)"},{"owner":{"account_id":25427262,"reputation":3,"user_id":19232284,"display_name":"Estudio Tademan"},"score":0,"creation_date":1677505216,"post_id":75564441,"comment_id":133344990,"body_markdown":"And the output with my above commente ,should be  \n&lt;my_child&gt;\n    &lt;street&gt;a&lt;/street&gt;\n    &lt;state&gt;b&lt;/state&gt;\n    &lt;city&gt;c&lt;/city&gt;\n  &lt;/my_child&gt;\n  &lt;my_child_2&gt;\n    &lt;street&gt;d&lt;/street&gt;\n    &lt;state&gt;e&lt;/state&gt;\n    &lt;city&gt;f&lt;/city&gt;\n  &lt;/my_child_2&gt;","body":"And the output with my above commente ,should be   &lt;my_child&gt;     &lt;street&gt;a&lt;/street&gt;     &lt;state&gt;b&lt;/state&gt;     &lt;city&gt;c&lt;/city&gt;   &lt;/my_child&gt;   &lt;my_child_2&gt;     &lt;street&gt;d&lt;/street&gt;     &lt;state&gt;e&lt;/state&gt;     &lt;city&gt;f&lt;/city&gt;   &lt;/my_child_2&gt;"}],"tags":[],"owner":{"account_id":1726806,"reputation":13951,"user_id":4790924,"accept_rate":67,"display_name":"Sharon Ben Asher"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677317312,"creation_date":1677317312,"answer_id":75564441,"question_id":75557088,"body_markdown":"before I specify the solution, I would like to point out several problems with the code:\r\n\r\n 1. It doesn&#39;t compile (`Company` class has no `address` and `contacts` instance variables that are specified in constructor). I removed these properties.\r\n 1. `Company` class holds list of `Parent` items, but `Parent` is an empty class with no relation to `Child`. I removed `Parent`.\r\n\r\nThe solution is to specify two Jackson xml annotations for `List&lt;Child&gt;` instance variable of `Company`:\r\n\r\n 1. the obvious `@JacksonXmlElementWrapper(useWrapping = false)`\r\n 1. `@JacksonXmlProperty(localName = &quot;my_child&quot;)` tells Jackson what to name the list item\r\n 1. no annotations are required for `Child` class itself. \r\n\r\n`Company` class looks like this \r\n\r\n\t@JacksonXmlRootElement(localName = &quot;my_company&quot;)\r\n\tpublic class Company {\r\n\t\r\n\t\t//Creating properties of Company class\r\n\t\tpublic String comName;\r\n\t\tpublic String comEmail;\r\n\t\r\n\t\t@JacksonXmlElementWrapper(useWrapping = false)\r\n\t\t@JacksonXmlProperty(localName = &quot;my_child&quot;)\r\n\t\tpublic List&lt;Child&gt; childs;\r\n\r\n\t\t// constructor ... \r\n\r\ntest method\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tList&lt;Company.Child&gt; childs = List.of(\r\n\t\t\t\tnew Company.Child(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;),\r\n\t\t\t\tnew Company.Child(&quot;d&quot;, &quot;e&quot;, &quot;f&quot;)\r\n\t\t);\r\n\t\tCompany company = new Company(&quot;A&quot;, &quot;ema&quot;, childs);\r\n\t\ttry {\r\n\t\t\tXmlMapper mapper = new XmlMapper();\r\n\t\t\tmapper.writerWithDefaultPrettyPrinter().writeValue(System.out, company);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\noutput \r\n\r\n```\r\n&lt;my_company&gt;\r\n  &lt;comName&gt;A&lt;/comName&gt;\r\n  &lt;comEmail&gt;ema&lt;/comEmail&gt;\r\n  &lt;my_child&gt;\r\n    &lt;street&gt;a&lt;/street&gt;\r\n    &lt;state&gt;b&lt;/state&gt;\r\n    &lt;city&gt;c&lt;/city&gt;\r\n  &lt;/my_child&gt;\r\n  &lt;my_child&gt;\r\n    &lt;street&gt;d&lt;/street&gt;\r\n    &lt;state&gt;e&lt;/state&gt;\r\n    &lt;city&gt;f&lt;/city&gt;\r\n  &lt;/my_child&gt;\r\n&lt;/my_company&gt;\r\n\r\n```\r\n","title":"Jackson transfor POJO to XML avoid list Wrapper","body":"<p>before I specify the solution, I would like to point out several problems with the code:</p>\n<ol>\n<li>It doesn't compile (<code>Company</code> class has no <code>address</code> and <code>contacts</code> instance variables that are specified in constructor). I removed these properties.</li>\n<li><code>Company</code> class holds list of <code>Parent</code> items, but <code>Parent</code> is an empty class with no relation to <code>Child</code>. I removed <code>Parent</code>.</li>\n</ol>\n<p>The solution is to specify two Jackson xml annotations for <code>List&lt;Child&gt;</code> instance variable of <code>Company</code>:</p>\n<ol>\n<li>the obvious <code>@JacksonXmlElementWrapper(useWrapping = false)</code></li>\n<li><code>@JacksonXmlProperty(localName = &quot;my_child&quot;)</code> tells Jackson what to name the list item</li>\n<li>no annotations are required for <code>Child</code> class itself.</li>\n</ol>\n<p><code>Company</code> class looks like this</p>\n<pre><code>@JacksonXmlRootElement(localName = &quot;my_company&quot;)\npublic class Company {\n\n    //Creating properties of Company class\n    public String comName;\n    public String comEmail;\n\n    @JacksonXmlElementWrapper(useWrapping = false)\n    @JacksonXmlProperty(localName = &quot;my_child&quot;)\n    public List&lt;Child&gt; childs;\n\n    // constructor ... \n</code></pre>\n<p>test method</p>\n<pre><code>public static void main(String[] args) {\n\n    List&lt;Company.Child&gt; childs = List.of(\n            new Company.Child(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;),\n            new Company.Child(&quot;d&quot;, &quot;e&quot;, &quot;f&quot;)\n    );\n    Company company = new Company(&quot;A&quot;, &quot;ema&quot;, childs);\n    try {\n        XmlMapper mapper = new XmlMapper();\n        mapper.writerWithDefaultPrettyPrinter().writeValue(System.out, company);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>output</p>\n<pre><code>&lt;my_company&gt;\n  &lt;comName&gt;A&lt;/comName&gt;\n  &lt;comEmail&gt;ema&lt;/comEmail&gt;\n  &lt;my_child&gt;\n    &lt;street&gt;a&lt;/street&gt;\n    &lt;state&gt;b&lt;/state&gt;\n    &lt;city&gt;c&lt;/city&gt;\n  &lt;/my_child&gt;\n  &lt;my_child&gt;\n    &lt;street&gt;d&lt;/street&gt;\n    &lt;state&gt;e&lt;/state&gt;\n    &lt;city&gt;f&lt;/city&gt;\n  &lt;/my_child&gt;\n&lt;/my_company&gt;\n\n</code></pre>\n"}],"owner":{"account_id":25427262,"reputation":3,"user_id":19232284,"display_name":"Estudio Tademan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677505069,"creation_date":1677244996,"question_id":75557088,"body_markdown":"I am trying to get an output without a root node for a list.\r\nI will simplify my code with a more simple idea :\r\n\r\n\r\n```\r\n    @JacksonXmlRootElement(localName = &quot;my_company&quot;)\r\n    public class Company {\r\n\r\n     //Creating properties of Company class\r\n     public String comName;\r\n     public String comEmail;\r\n\r\n     @JacksonXmlElementWrapper(useWrapping = false)\r\n     public List&lt;Parent&gt; childs;\r\n\r\n     // constructor\r\n     Company(String comName, String comEmail, List&lt;Parent&gt; childs) {\r\n        this.comName = comName;\r\n        this.comEmail = comEmail;\r\n        this.childs = childs;\r\n     }\r\n\r\n    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.WRAPPER_OBJECT)\r\n    class Parent{\r\n\r\n    }\r\n    @JsonTypeName(&quot;my_child&quot;)\r\n     class Child extends Parent{\r\n      public String street;\r\n      public String state;\r\n      public String city;\r\n\r\n      Child(String street, String state, String city){\r\n         this.street = street;\r\n         this.state = state;\r\n         this.city = city;\r\n     }\r\n  }\r\n```\r\n  This is the result i get :\r\n\r\n```\r\n   &lt;my_company&gt;\r\n       &lt;comName&gt;A&lt;/comName&gt;\r\n       &lt;comEmail&gt;ema&lt;/comEmail&gt;\r\n       &lt;childs&gt;\r\n         &lt;my_child&gt;\r\n           &lt;street&gt;a&lt;/street&gt;\r\n           &lt;state&gt;b&lt;/state&gt;\r\n          &lt;city&gt;c&lt;/city&gt;\r\n        &lt;/my_child&gt;\r\n       &lt;/childs&gt;\r\n       &lt;childs&gt;\r\n        &lt;my_child&gt;\r\n          &lt;street&gt;a&lt;/street&gt;\r\n          &lt;state&gt;b&lt;/state&gt;\r\n          &lt;city&gt;c&lt;/city&gt;\r\n        &lt;/my_child&gt;\r\n       &lt;/childs&gt;\r\n   &lt;/my_company&gt;\r\n```\r\nI dont want that , I need to remove &quot;childs&quot; tag ,i wanna this :\r\n```\r\n    &lt;my_company&gt;\r\n        &lt;comName&gt;A&lt;/comName&gt;\r\n        &lt;comEmail&gt;ema&lt;/comEmail&gt;\r\n          &lt;my_child&gt;\r\n             &lt;street&gt;a&lt;/street&gt;\r\n             &lt;state&gt;b&lt;/state&gt;\r\n             &lt;city&gt;c&lt;/city&gt;\r\n          &lt;/my_child&gt;\r\n         &lt;my_child&gt;\r\n            &lt;street&gt;a&lt;/street&gt;\r\n            &lt;state&gt;b&lt;/state&gt;\r\n            &lt;city&gt;c&lt;/city&gt;\r\n         &lt;/my_child&gt;\r\n    &lt;/my_company&gt;\r\n```\r\n ***@JacksonXmlElementWrapper(useWrapping = false)*** should do the trick,but i tried 1 millon different combinations,documentation,forum,etc. Thanks in advance.\r\n\r\n\r\n","title":"Jackson transfor POJO to XML avoid list Wrapper","body":"<p>I am trying to get an output without a root node for a list.\nI will simplify my code with a more simple idea :</p>\n<pre><code>    @JacksonXmlRootElement(localName = &quot;my_company&quot;)\n    public class Company {\n\n     //Creating properties of Company class\n     public String comName;\n     public String comEmail;\n\n     @JacksonXmlElementWrapper(useWrapping = false)\n     public List&lt;Parent&gt; childs;\n\n     // constructor\n     Company(String comName, String comEmail, List&lt;Parent&gt; childs) {\n        this.comName = comName;\n        this.comEmail = comEmail;\n        this.childs = childs;\n     }\n\n    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.WRAPPER_OBJECT)\n    class Parent{\n\n    }\n    @JsonTypeName(&quot;my_child&quot;)\n     class Child extends Parent{\n      public String street;\n      public String state;\n      public String city;\n\n      Child(String street, String state, String city){\n         this.street = street;\n         this.state = state;\n         this.city = city;\n     }\n  }\n</code></pre>\n<p>This is the result i get :</p>\n<pre><code>   &lt;my_company&gt;\n       &lt;comName&gt;A&lt;/comName&gt;\n       &lt;comEmail&gt;ema&lt;/comEmail&gt;\n       &lt;childs&gt;\n         &lt;my_child&gt;\n           &lt;street&gt;a&lt;/street&gt;\n           &lt;state&gt;b&lt;/state&gt;\n          &lt;city&gt;c&lt;/city&gt;\n        &lt;/my_child&gt;\n       &lt;/childs&gt;\n       &lt;childs&gt;\n        &lt;my_child&gt;\n          &lt;street&gt;a&lt;/street&gt;\n          &lt;state&gt;b&lt;/state&gt;\n          &lt;city&gt;c&lt;/city&gt;\n        &lt;/my_child&gt;\n       &lt;/childs&gt;\n   &lt;/my_company&gt;\n</code></pre>\n<p>I dont want that , I need to remove &quot;childs&quot; tag ,i wanna this :</p>\n<pre><code>    &lt;my_company&gt;\n        &lt;comName&gt;A&lt;/comName&gt;\n        &lt;comEmail&gt;ema&lt;/comEmail&gt;\n          &lt;my_child&gt;\n             &lt;street&gt;a&lt;/street&gt;\n             &lt;state&gt;b&lt;/state&gt;\n             &lt;city&gt;c&lt;/city&gt;\n          &lt;/my_child&gt;\n         &lt;my_child&gt;\n            &lt;street&gt;a&lt;/street&gt;\n            &lt;state&gt;b&lt;/state&gt;\n            &lt;city&gt;c&lt;/city&gt;\n         &lt;/my_child&gt;\n    &lt;/my_company&gt;\n</code></pre>\n<p><em><strong>@JacksonXmlElementWrapper(useWrapping = false)</strong></em> should do the trick,but i tried 1 millon different combinations,documentation,forum,etc. Thanks in advance.</p>\n"},{"tags":["java","sql-server","postgresql","amazon-web-services","babelfish"],"owner":{"account_id":2928702,"reputation":771,"user_id":2509520,"display_name":"Peter Tarlos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677504874,"creation_date":1657124969,"question_id":72887000,"body_markdown":"We recently converted our SQL Server database to AWS Aurora PostgreSQL(v.13.6).\r\n\r\nWe&#39;re using [Babelfish][1] for Aurora PostgreSQL to connect to the database with Java 8 &amp; JDBC &amp; SQL Server driver.  While testing, we discovered that Babelfish does NOT return generated row id on SQL insert statements (code below).  **How can this be fixed?**  \r\n\r\nSQL Server driver:\r\n&lt;!-- language: lang-xml --&gt;\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\r\n\t&lt;version&gt;10.2.1.jre8&lt;/version&gt;\r\n &lt;/dependency&gt;\r\n```\r\n\r\nHowever, the same test code works when using the PostgreSQL URL &amp; postgres driver.  (returns the generated row id)\r\n\r\nPostgres driver:\r\n&lt;!-- language: lang-xml --&gt;\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t&lt;version&gt;42.4.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nTest code:\r\n&lt;!-- language: lang-java --&gt;\r\n```\r\n\tprivate void testInsert(String dbUrl, String sql) {\r\n\t\tlogger.debug(&quot;dbUrl: {}&quot;, dbUrl);\r\n\t\ttry (Connection conn = DriverManager.getConnection(\r\n\t\t\t\tdbUrl, DBUtil.DB_USERNAME, DBUtil.DB_PASSWORD);\r\n             PreparedStatement ps = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {\r\n\t\t\tsetValues(ps);\r\n\t\t\tconn.setAutoCommit(false); // begin Transaction\r\n\t\t\tlogger.debug(&quot;executeUpdate: {}&quot;, sql);\r\n\r\n            int rows = ps.executeUpdate();\r\n\r\n            logger.debug(&quot;rows: {}&quot;, rows);\r\n            \r\n            try (ResultSet rs = ps.getGeneratedKeys()) {\r\n            \tlogger.debug(&quot;rs: {}&quot;, rs);\r\n                if (rs.next()) {\r\n                    Long id = rs.getLong(1);\r\n                    logger.debug(&quot;id: {}&quot;, id);\r\n                }\r\n                else {\r\n                    logger.debug(&quot;ResultSet is empty&quot;);\r\n                }\r\n            }\r\n          \r\n            conn.rollback();\r\n //           conn.commit();\r\n        } catch (SQLException e) {\r\n            logger.error(null, e);\r\n        }\r\n\t}\r\n```\r\n\r\nOutput:\r\n```\r\n# results with Babelfish URL &amp; SQL Server driver: (returns 0 for row ID)\r\nrows: 1\r\nrs: SQLServerResultSet:1\r\nid: 0\r\n\r\n# results with PostgreSQL URL &amp; postgres driver: (returns the row ID)\r\nrows: 1\r\nrs: org.postgresql.jdbc.PgResultSet@2aceadd4\r\nid: 1548\r\n```\r\n\r\n\r\n  [1]: https://aws.amazon.com/rds/aurora/babelfish/","title":"Babelfish for Aurora PostgreSQL not returning generated row id","body":"<p>We recently converted our SQL Server database to AWS Aurora PostgreSQL(v.13.6).</p>\n<p>We're using <a href=\"https://aws.amazon.com/rds/aurora/babelfish/\" rel=\"nofollow noreferrer\">Babelfish</a> for Aurora PostgreSQL to connect to the database with Java 8 &amp; JDBC &amp; SQL Server driver.  While testing, we discovered that Babelfish does NOT return generated row id on SQL insert statements (code below).  <strong>How can this be fixed?</strong></p>\n<p>SQL Server driver:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n    &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n    &lt;version&gt;10.2.1.jre8&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n<p>However, the same test code works when using the PostgreSQL URL &amp; postgres driver.  (returns the generated row id)</p>\n<p>Postgres driver:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n    &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n    &lt;version&gt;42.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Test code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private void testInsert(String dbUrl, String sql) {\n        logger.debug(&quot;dbUrl: {}&quot;, dbUrl);\n        try (Connection conn = DriverManager.getConnection(\n                dbUrl, DBUtil.DB_USERNAME, DBUtil.DB_PASSWORD);\n             PreparedStatement ps = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {\n            setValues(ps);\n            conn.setAutoCommit(false); // begin Transaction\n            logger.debug(&quot;executeUpdate: {}&quot;, sql);\n\n            int rows = ps.executeUpdate();\n\n            logger.debug(&quot;rows: {}&quot;, rows);\n            \n            try (ResultSet rs = ps.getGeneratedKeys()) {\n                logger.debug(&quot;rs: {}&quot;, rs);\n                if (rs.next()) {\n                    Long id = rs.getLong(1);\n                    logger.debug(&quot;id: {}&quot;, id);\n                }\n                else {\n                    logger.debug(&quot;ResultSet is empty&quot;);\n                }\n            }\n          \n            conn.rollback();\n //           conn.commit();\n        } catch (SQLException e) {\n            logger.error(null, e);\n        }\n    }\n</code></pre>\n<p>Output:</p>\n<pre><code># results with Babelfish URL &amp; SQL Server driver: (returns 0 for row ID)\nrows: 1\nrs: SQLServerResultSet:1\nid: 0\n\n# results with PostgreSQL URL &amp; postgres driver: (returns the row ID)\nrows: 1\nrs: org.postgresql.jdbc.PgResultSet@2aceadd4\nid: 1548\n</code></pre>\n"},{"tags":["java","scala","bdd","scalatest","junit-jupiter"],"owner":{"account_id":13517282,"reputation":11,"user_id":9751497,"display_name":"Tsiry.MANANKASINA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677504725,"creation_date":1677504725,"question_id":75581137,"body_markdown":"I&#39;m using : \r\n- scala 2.12.15\r\n-  Java 17\r\n-  scalatest_2.12:3.2.15\r\n-  JUnit 5\r\n-  Gradle\r\n\r\nWith this very simple codes in my test folder: \r\n  \r\n```\r\nimport org.scalatest.flatspec.AnyFlatSpec\r\n\r\n\r\nclass MyTestSpec extends AnyFlatSpec {\r\n\r\n  &quot;An empty Set&quot; should &quot;have size 0&quot; in {\r\n    assert(Set.empty.size === 0)\r\n  }\r\n}\r\n```\r\nwhen I try to execute this test, I have : **No tests found...**\r\n\r\nWhen I Use Junit 4, it&#39;s OK, but with Junit 5, KO.\r\n\r\n**remark **: \r\nIn my gradle, I have : \r\n\r\n```\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n```\r\n\r\nIs AnyFlatSpec don&#39;t support JUnit 5 ? Is there another solution ?\r\n\r\nThanks for your help !\r\n","title":"BDD : Test using Sclatest - AnyFlatSpec and Junit 5 not detected","body":"<p>I'm using :</p>\n<ul>\n<li>scala 2.12.15</li>\n<li>Java 17</li>\n<li>scalatest_2.12:3.2.15</li>\n<li>JUnit 5</li>\n<li>Gradle</li>\n</ul>\n<p>With this very simple codes in my test folder:</p>\n<pre><code>import org.scalatest.flatspec.AnyFlatSpec\n\n\nclass MyTestSpec extends AnyFlatSpec {\n\n  &quot;An empty Set&quot; should &quot;have size 0&quot; in {\n    assert(Set.empty.size === 0)\n  }\n}\n</code></pre>\n<p>when I try to execute this test, I have : <strong>No tests found...</strong></p>\n<p>When I Use Junit 4, it's OK, but with Junit 5, KO.</p>\n<p>**remark **:\nIn my gradle, I have :</p>\n<pre><code>test {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>Is AnyFlatSpec don't support JUnit 5 ? Is there another solution ?</p>\n<p>Thanks for your help !</p>\n"},{"tags":["java","docker","jar","jboss","keycloak"],"owner":{"account_id":27239616,"reputation":1,"user_id":20765995,"display_name":"Evgeny Baranovsky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":350,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677504256,"creation_date":1677504256,"question_id":75581059,"body_markdown":"I have a keycloak SPI jar (overwriting provider). To put this SPI into /deployments folder inside container, I added following lines to my dockerfile:\r\n\r\n```\r\nCOPY --chown=jboss:jboss keycloak-spi-1.0.0.jar /opt/jboss/keycloak/standalone/deployments\r\nRUN touch /opt/jboss/keycloak/standalone/deployments/keycloak-spi-1.0.0.jar.dodeploy\r\nRUN echo &quot;keycloak-spi-1.0.0.jar&quot; &gt;&gt; /opt/jboss/keycloak/standalone/deployments/keycloak-spi-1.0.0.jar.dodeploy\r\n```\r\nKeycloak seems to be picking up on deployment, however, somewhy this time it fails with following stack trace:\r\n\r\n```\r\n13:17:36,485 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC000001: Failed to start service jboss.deployment.unit.&quot;keycloak-spi-1.0.0.jar&quot;.STRUCTURE: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;keycloak-spi-1.0.0.jar&quot;.STRUCTURE: WFLYSRV0153: Failed to process phase STRUCTURE of deployment &quot;keycloak-spi-1.0.0.jar&quot;\r\n        at org.jboss.as.server@15.0.1.Final//org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:189)\r\n        at org.jboss.msc@1.4.12.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1739)\r\n        at org.jboss.msc@1.4.12.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1701)\r\n        at org.jboss.msc@1.4.12.Final//org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1559)\r\n        at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n        at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n        at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n        at java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: WFLYSRV0160: Failed to mount deployment content\r\n        at org.jboss.as.server@15.0.1.Final//org.jboss.as.server.deployment.module.DeploymentRootMountProcessor.deploy(DeploymentRootMountProcessor.java:95)\r\n        at org.jboss.as.server@15.0.1.Final//org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:182)\r\n        ... 8 more\r\nCaused by: java.util.zip.ZipException: zip END header not found\r\n        at java.base/java.util.zip.ZipFile$Source.zerror(ZipFile.java:1607)\r\n        at java.base/java.util.zip.ZipFile$Source.findEND(ZipFile.java:1497)\r\n        at java.base/java.util.zip.ZipFile$Source.initCEN(ZipFile.java:1504)\r\n        at java.base/java.util.zip.ZipFile$Source.&lt;init&gt;(ZipFile.java:1308)\r\n        at java.base/java.util.zip.ZipFile$Source.get(ZipFile.java:1271)\r\n        at java.base/java.util.zip.ZipFile$CleanableResource.&lt;init&gt;(ZipFile.java:733)\r\n        at java.base/java.util.zip.ZipFile$CleanableResource.get(ZipFile.java:850)\r\n        at java.base/java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:248)\r\n        at java.base/java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:177)\r\n        at java.base/java.util.jar.JarFile.&lt;init&gt;(JarFile.java:348)\r\n        at java.base/java.util.jar.JarFile.&lt;init&gt;(JarFile.java:319)\r\n        at java.base/java.util.jar.JarFile.&lt;init&gt;(JarFile.java:285)\r\n        at org.jboss.vfs@3.2.15.Final//org.jboss.vfs.spi.JavaZipFileSystem.&lt;init&gt;(JavaZipFileSystem.java:90)\r\n        at org.jboss.vfs@3.2.15.Final//org.jboss.vfs.spi.JavaZipFileSystem.&lt;init&gt;(JavaZipFileSystem.java:77)\r\n        at org.jboss.vfs@3.2.15.Final//org.jboss.vfs.VFS.mountZip(VFS.java:386)\r\n        at org.jboss.vfs@3.2.15.Final//org.jboss.vfs.VFS.mountZip(VFS.java:410)\r\n        at org.jboss.as.server@15.0.1.Final//org.jboss.as.server.deployment.DeploymentMountProvider$Factory$ServerDeploymentRepositoryImpl.mountDeploymentContent(DeploymentMountProvider.java:108)\r\n        at org.jboss.as.server@15.0.1.Final//org.jboss.as.server.deployment.module.DeploymentRootMountProcessor.deploy(DeploymentRootMountProcessor.java:91)\r\n        ... 9 more\r\n```\r\n\r\n```\r\n13:17:46,342 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;deploy&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;keycloak-spi-1.0.0.jar&quot;)]) - failure description: {&quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.deployment.unit.\\&quot;keycloak-spi-1.0.0.jar\\&quot;.STRUCTURE&quot; =&gt; &quot;WFLYSRV0153: Failed to process phase STRUCTURE of deployment \\&quot;keycloak-spi-1.0.0.jar\\&quot;\r\n    Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: WFLYSRV0160: Failed to mount deployment content\r\n    Caused by: java.util.zip.ZipException: zip END header not found&quot;}}\r\n```\r\n\r\nHere is the structure of SPI jar:\r\n\r\n```\r\n&gt;&gt; jar tf keycloak-spi-1.0.0.jar\r\nMETA-INF/\r\nMETA-INF/MANIFEST.MF\r\nmy/\r\nmy/package/\r\nmy/package/project/\r\nmy/package/project/be/\r\nMETA-INF/services/\r\nmy/package/project/be/MyServiceProvider.class\r\nmy/package/project/be/MyServiceProviderFactory.class\r\nMETA-INF/services/org.keycloak.email.EmailSenderProviderFactory\r\nMETA-INF/maven/\r\nMETA-INF/maven/my.package.project/\r\nMETA-INF/maven/my.package.project/keycloak-spi/\r\nMETA-INF/maven/my.package.project/keycloak-spi/pom.xml\r\nMETA-INF/maven/my.package.project/keycloak-spi/pom.properties\r\n\r\n```\r\n\r\n\r\n\r\n When I deploy it using docker-compose.yaml (see below what I added to do it), I deploy it successfully\r\n\r\n```\r\n    volumes:\r\n      - ../localSetup/providers/keycloak-spi-1.0.0.jar:/opt/jboss/keycloak/standalone/deployments/keycloak-spi-1.0.0.jar\r\n```\r\n\r\nMeanwhile, if I use compose, everything deploys just fine. However, I am unable to use compose on production, so I need to do something while creating image. Please send help.","title":"Unable to deploy keycloak SPI via docker (dockerfile)","body":"<p>I have a keycloak SPI jar (overwriting provider). To put this SPI into /deployments folder inside container, I added following lines to my dockerfile:</p>\n<pre><code>COPY --chown=jboss:jboss keycloak-spi-1.0.0.jar /opt/jboss/keycloak/standalone/deployments\nRUN touch /opt/jboss/keycloak/standalone/deployments/keycloak-spi-1.0.0.jar.dodeploy\nRUN echo &quot;keycloak-spi-1.0.0.jar&quot; &gt;&gt; /opt/jboss/keycloak/standalone/deployments/keycloak-spi-1.0.0.jar.dodeploy\n</code></pre>\n<p>Keycloak seems to be picking up on deployment, however, somewhy this time it fails with following stack trace:</p>\n<pre><code>13:17:36,485 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC000001: Failed to start service jboss.deployment.unit.&quot;keycloak-spi-1.0.0.jar&quot;.STRUCTURE: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;keycloak-spi-1.0.0.jar&quot;.STRUCTURE: WFLYSRV0153: Failed to process phase STRUCTURE of deployment &quot;keycloak-spi-1.0.0.jar&quot;\n        at org.jboss.as.server@15.0.1.Final//org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:189)\n        at org.jboss.msc@1.4.12.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1739)\n        at org.jboss.msc@1.4.12.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1701)\n        at org.jboss.msc@1.4.12.Final//org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1559)\n        at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n        at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n        at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n        at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n        at java.base/java.lang.Thread.run(Thread.java:829)\nCaused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: WFLYSRV0160: Failed to mount deployment content\n        at org.jboss.as.server@15.0.1.Final//org.jboss.as.server.deployment.module.DeploymentRootMountProcessor.deploy(DeploymentRootMountProcessor.java:95)\n        at org.jboss.as.server@15.0.1.Final//org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:182)\n        ... 8 more\nCaused by: java.util.zip.ZipException: zip END header not found\n        at java.base/java.util.zip.ZipFile$Source.zerror(ZipFile.java:1607)\n        at java.base/java.util.zip.ZipFile$Source.findEND(ZipFile.java:1497)\n        at java.base/java.util.zip.ZipFile$Source.initCEN(ZipFile.java:1504)\n        at java.base/java.util.zip.ZipFile$Source.&lt;init&gt;(ZipFile.java:1308)\n        at java.base/java.util.zip.ZipFile$Source.get(ZipFile.java:1271)\n        at java.base/java.util.zip.ZipFile$CleanableResource.&lt;init&gt;(ZipFile.java:733)\n        at java.base/java.util.zip.ZipFile$CleanableResource.get(ZipFile.java:850)\n        at java.base/java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:248)\n        at java.base/java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:177)\n        at java.base/java.util.jar.JarFile.&lt;init&gt;(JarFile.java:348)\n        at java.base/java.util.jar.JarFile.&lt;init&gt;(JarFile.java:319)\n        at java.base/java.util.jar.JarFile.&lt;init&gt;(JarFile.java:285)\n        at org.jboss.vfs@3.2.15.Final//org.jboss.vfs.spi.JavaZipFileSystem.&lt;init&gt;(JavaZipFileSystem.java:90)\n        at org.jboss.vfs@3.2.15.Final//org.jboss.vfs.spi.JavaZipFileSystem.&lt;init&gt;(JavaZipFileSystem.java:77)\n        at org.jboss.vfs@3.2.15.Final//org.jboss.vfs.VFS.mountZip(VFS.java:386)\n        at org.jboss.vfs@3.2.15.Final//org.jboss.vfs.VFS.mountZip(VFS.java:410)\n        at org.jboss.as.server@15.0.1.Final//org.jboss.as.server.deployment.DeploymentMountProvider$Factory$ServerDeploymentRepositoryImpl.mountDeploymentContent(DeploymentMountProvider.java:108)\n        at org.jboss.as.server@15.0.1.Final//org.jboss.as.server.deployment.module.DeploymentRootMountProcessor.deploy(DeploymentRootMountProcessor.java:91)\n        ... 9 more\n</code></pre>\n<pre><code>13:17:46,342 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;deploy&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;keycloak-spi-1.0.0.jar&quot;)]) - failure description: {&quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.deployment.unit.\\&quot;keycloak-spi-1.0.0.jar\\&quot;.STRUCTURE&quot; =&gt; &quot;WFLYSRV0153: Failed to process phase STRUCTURE of deployment \\&quot;keycloak-spi-1.0.0.jar\\&quot;\n    Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: WFLYSRV0160: Failed to mount deployment content\n    Caused by: java.util.zip.ZipException: zip END header not found&quot;}}\n</code></pre>\n<p>Here is the structure of SPI jar:</p>\n<pre><code>&gt;&gt; jar tf keycloak-spi-1.0.0.jar\nMETA-INF/\nMETA-INF/MANIFEST.MF\nmy/\nmy/package/\nmy/package/project/\nmy/package/project/be/\nMETA-INF/services/\nmy/package/project/be/MyServiceProvider.class\nmy/package/project/be/MyServiceProviderFactory.class\nMETA-INF/services/org.keycloak.email.EmailSenderProviderFactory\nMETA-INF/maven/\nMETA-INF/maven/my.package.project/\nMETA-INF/maven/my.package.project/keycloak-spi/\nMETA-INF/maven/my.package.project/keycloak-spi/pom.xml\nMETA-INF/maven/my.package.project/keycloak-spi/pom.properties\n\n</code></pre>\n<p>When I deploy it using docker-compose.yaml (see below what I added to do it), I deploy it successfully</p>\n<pre><code>    volumes:\n      - ../localSetup/providers/keycloak-spi-1.0.0.jar:/opt/jboss/keycloak/standalone/deployments/keycloak-spi-1.0.0.jar\n</code></pre>\n<p>Meanwhile, if I use compose, everything deploys just fine. However, I am unable to use compose on production, so I need to do something while creating image. Please send help.</p>\n"},{"tags":["java","reflection","lambda","java-8"],"comments":[{"owner":{"account_id":4251195,"reputation":379,"user_id":3478229,"display_name":"ddan"},"score":0,"creation_date":1396189757,"post_id":19845213,"comment_id":99182558,"body_markdown":"Looks like it might be possible after all, by using a proxy to record which method gets called. https://stackoverflow.com/a/22745127/3478229","body":"Looks like it might be possible after all, by using a proxy to record which method gets called. <a href=\"https://stackoverflow.com/a/22745127/3478229\">stackoverflow.com/a/22745127/3478229</a>"},{"owner":{"account_id":68627,"reputation":1498,"user_id":200130,"accept_rate":90,"display_name":"Rafal"},"score":0,"creation_date":1396332793,"post_id":19845213,"comment_id":99182560,"body_markdown":"It is possible, but this puts constraints on proxied class. For example, it cannot be final and need to have default public or protected constructor. Moreover this will not work for final methods.","body":"It is possible, but this puts constraints on proxied class. For example, it cannot be final and need to have default public or protected constructor. Moreover this will not work for final methods."},{"owner":{"account_id":25463,"reputation":19710,"user_id":65458,"accept_rate":88,"display_name":"Piotr Findeisen"},"score":0,"creation_date":1477768523,"post_id":19845213,"comment_id":99182561,"body_markdown":"Accepting caveats (we can&#39;t distinguish lambdas, and a lambda can contain IFs fooling us), this is a good approach and useful in APIs -- you can grab a ready impl https://github.com/joj-io/joj-reflect/blob/master/src/main/java/io/joj/reflect/MethodReferences.java if you wish.","body":"Accepting caveats (we can&#39;t distinguish lambdas, and a lambda can contain IFs fooling us), this is a good approach and useful in APIs -- you can grab a ready impl <a href=\"https://github.com/joj-io/joj-reflect/blob/master/src/main/java/io/joj/reflect/MethodReferences.java\" rel=\"nofollow noreferrer\">github.com/joj-io/joj-reflect/blob/master/src/main/java/io/j&zwnj;&#8203;oj/&hellip;</a> if you wish."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1529532545,"post_id":19845213,"comment_id":88912886,"body_markdown":"I keep wanting to do this as well.  The &quot;Correct&quot; way to do it in most cases would be to create a custom annotation and tag that method via the annotation, but that gets cumbersome pretty fast.","body":"I keep wanting to do this as well.  The &quot;Correct&quot; way to do it in most cases would be to create a custom annotation and tag that method via the annotation, but that gets cumbersome pretty fast."},{"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":0,"creation_date":1558645855,"post_id":19845213,"comment_id":99179928,"body_markdown":"Possible duplicate of [How to get Method object in Java without using method string names](https://stackoverflow.com/questions/9864300/how-to-get-method-object-in-java-without-using-method-string-names). It doesn&#39;t mention method reference but has several reasonable answers, unlike this question here.","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/9864300/how-to-get-method-object-in-java-without-using-method-string-names\">How to get Method object in Java without using method string names</a>. It doesn&#39;t mention method reference but has several reasonable answers, unlike this question here."}],"answers":[{"tags":[],"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1383853872,"creation_date":1383853872,"answer_id":19845303,"question_id":19845213,"body_markdown":"Though I haven&#39;t tried it myself, I think the answer is &quot;no,&quot; since [a method reference is semantically the same as a lambda.](http://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html)","title":"How to get the MethodInfo of a Java 8 method reference?","body":"<p>Though I haven't tried it myself, I think the answer is \"no,\" since <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"noreferrer\">a method reference is semantically the same as a lambda.</a></p>\n"},{"comments":[{"owner":{"account_id":937438,"reputation":8861,"user_id":966104,"accept_rate":70,"display_name":"Yona Appletree"},"score":34,"creation_date":1390257146,"post_id":19845393,"comment_id":32005258,"body_markdown":"I am curious if there is any official conversation about this limitation. It seems to me that having type-safe method references would be incredibly valuable in Java. This seems like the perfect time to add them and it would be a shame to see this opportunity to (significantly) improve java&#39;s meta-programming be lost.","body":"I am curious if there is any official conversation about this limitation. It seems to me that having type-safe method references would be incredibly valuable in Java. This seems like the perfect time to add them and it would be a shame to see this opportunity to (significantly) improve java&#39;s meta-programming be lost."},{"owner":{"account_id":1416522,"reputation":91364,"user_id":3553087,"display_name":"Brian Goetz"},"score":17,"creation_date":1399432042,"post_id":19845393,"comment_id":36054089,"body_markdown":"This is not a limitation; it is simply you are looking for a different feature, _method literals_.  This is a different beast from _method references_.","body":"This is not a limitation; it is simply you are looking for a different feature, <i>method literals</i>.  This is a different beast from <i>method references</i>."},{"owner":{"account_id":47948,"reputation":7983,"user_id":142239,"accept_rate":56,"display_name":"Siu Ching Pong -Asuka Kenji-"},"score":1,"creation_date":1420089034,"post_id":19845393,"comment_id":43868710,"body_markdown":"In your example, `MyClass::myMethod` is just a syntactic sugar of `new Action() { @Override public void invoke() { MyClass.myMethod(); } }`. It is unfortunate that Java wasn&#39;t made to have &quot;real&quot; method references, like in C#, as to maintain some VM / binary compatibility. If it wasn&#39;t a concern, I think they&#39;d make `java.lang.reflect.Method` generic, so it behaves more like `java.lang.Class` and so `java.util.function.Function` would be unnecessary. But then, &quot;variadic generics&quot; (varargs in generic parameters) must also be introduced, like in C++ 11, to include all possible method signatures.","body":"In your example, <code>MyClass::myMethod</code> is just a syntactic sugar of <code>new Action() { @Override public void invoke() { MyClass.myMethod(); } }</code>. It is unfortunate that Java wasn&#39;t made to have &quot;real&quot; method references, like in C#, as to maintain some VM / binary compatibility. If it wasn&#39;t a concern, I think they&#39;d make <code>java.lang.reflect.Method</code> generic, so it behaves more like <code>java.lang.Class</code> and so <code>java.util.function.Function</code> would be unnecessary. But then, &quot;variadic generics&quot; (varargs in generic parameters) must also be introduced, like in C++ 11, to include all possible method signatures."},{"owner":{"account_id":47948,"reputation":7983,"user_id":142239,"accept_rate":56,"display_name":"Siu Ching Pong -Asuka Kenji-"},"score":0,"creation_date":1420089308,"post_id":19845393,"comment_id":43868737,"body_markdown":"Then, `MyClass::myMethod` would have been of the type `Method&lt;Void, Void&gt;` or alike, and it could be used like `java.util.function.Function` as well as for obtaining meta information. But, unfortunately, they did not make it this way...","body":"Then, <code>MyClass::myMethod</code> would have been of the type <code>Method&lt;Void, Void&gt;</code> or alike, and it could be used like <code>java.util.function.Function</code> as well as for obtaining meta information. But, unfortunately, they did not make it this way..."},{"owner":{"account_id":187459,"reputation":613,"user_id":425523,"accept_rate":100,"display_name":"kd8azz"},"score":4,"creation_date":1429992280,"post_id":19845393,"comment_id":47865173,"body_markdown":"It looks like your answer is incorrect.  It&#39;s possible, though not straightforward.  http://benjiweber.co.uk/blog/2013/12/28/typesafe-database-interaction-with-java-8/","body":"It looks like your answer is incorrect.  It&#39;s possible, though not straightforward.  <a href=\"http://benjiweber.co.uk/blog/2013/12/28/typesafe-database-interaction-with-java-8/\" rel=\"nofollow noreferrer\">benjiweber.co.uk/blog/2013/12/28/&hellip;</a>"},{"owner":{"account_id":1117076,"reputation":2818,"user_id":1106178,"accept_rate":50,"display_name":"dexter meyers"},"score":3,"creation_date":1434967104,"post_id":19845393,"comment_id":49984595,"body_markdown":"@BrianGoetz +100 for method literals and while at it property literals. I&#39;m sure your colleagues at the JPA spec team would be internally thankful ;)","body":"@BrianGoetz +100 for method literals and while at it property literals. I&#39;m sure your colleagues at the JPA spec team would be internally thankful ;)"},{"owner":{"account_id":1031543,"reputation":4922,"user_id":1039774,"accept_rate":25,"display_name":"Devabc"},"score":0,"creation_date":1453298273,"post_id":19845393,"comment_id":57540034,"body_markdown":"No, as some already said, it is possible. See http://stackoverflow.com/questions/31178103/how-can-i-find-the-target-of-a-java8-method-reference and http://benjiweber.co.uk/blog/2013/12/28/typesafe-database-interaction-with-java-8/","body":"No, as some already said, it is possible. See <a href=\"http://stackoverflow.com/questions/31178103/how-can-i-find-the-target-of-a-java8-method-reference\" title=\"how can i find the target of a java8 method reference\">stackoverflow.com/questions/31178103/&hellip;</a> and <a href=\"http://benjiweber.co.uk/blog/2013/12/28/typesafe-database-interaction-with-java-8/\" rel=\"nofollow noreferrer\">benjiweber.co.uk/blog/2013/12/28/&hellip;</a>"},{"owner":{"account_id":58477,"reputation":25235,"user_id":175070,"display_name":"Mike Strobel"},"score":2,"creation_date":1453312874,"post_id":19845393,"comment_id":57550499,"body_markdown":"@Devabc Of course it may be *possible* in some situations, but there is no supported API that is equivalent to the C# example provided by the OP.  I think that is reasonable basis for my answer, and I stand by it.  Other possibilities, like using proxies or even analyzing the bootstrap method arguments in the bytecode, are either unreliable or impose additional restrictions.  Are they worth mentioning in a separate answer?  Sure.  Do they make my answer *incorrect* or worthy of a downvote?  I do not see how.  That said, I did rephrase my answer to sound less absolute.","body":"@Devabc Of course it may be <i>possible</i> in some situations, but there is no supported API that is equivalent to the C# example provided by the OP.  I think that is reasonable basis for my answer, and I stand by it.  Other possibilities, like using proxies or even analyzing the bootstrap method arguments in the bytecode, are either unreliable or impose additional restrictions.  Are they worth mentioning in a separate answer?  Sure.  Do they make my answer <i>incorrect</i> or worthy of a downvote?  I do not see how.  That said, I did rephrase my answer to sound less absolute."},{"owner":{"account_id":1983565,"reputation":4164,"user_id":1779504,"accept_rate":69,"display_name":"csharpfolk"},"score":1,"creation_date":1508610597,"post_id":19845393,"comment_id":80680657,"body_markdown":"If you don&#39;t mind using ugly hacks there is a way. Right now lambdas are generated using ASM library - so they are represented as regular JVM/Java classes. You must inspect generated bytecode to find you which method will be called and read value of private field to find out on which object. You may also access lambda closure this way. There is already library on GitHub that does exactly that but I cannot recall it&#39;s name right now...","body":"If you don&#39;t mind using ugly hacks there is a way. Right now lambdas are generated using ASM library - so they are represented as regular JVM/Java classes. You must inspect generated bytecode to find you which method will be called and read value of private field to find out on which object. You may also access lambda closure this way. There is already library on GitHub that does exactly that but I cannot recall it&#39;s name right now..."},{"owner":{"account_id":4529684,"reputation":71,"user_id":3680557,"display_name":"YSavanier"},"score":0,"creation_date":1613380732,"post_id":19845393,"comment_id":117047677,"body_markdown":"To mitigate the unreliability argument, I personaly found the cglib dummy proxification to get the otherwise erased type (like in https://stackoverflow.com/questions/19845213/how-to-get-the-methodinfo-of-a-java-8-method-reference/49998151#49998151 answer) to be the more elegant and simple way to do this as cglib is commonly used in production environments. Bytebuddy might be a reasonnable approach to as it is getting more and more leverage today.","body":"To mitigate the unreliability argument, I personaly found the cglib dummy proxification to get the otherwise erased type (like in <a href=\"https://stackoverflow.com/questions/19845213/how-to-get-the-methodinfo-of-a-java-8-method-reference/49998151#49998151\" title=\"how to get the methodinfo of a java 8 method reference\">stackoverflow.com/questions/19845213/&hellip;</a> answer) to be the more elegant and simple way to do this as cglib is commonly used in production environments. Bytebuddy might be a reasonnable approach to as it is getting more and more leverage today."}],"tags":[],"owner":{"account_id":58477,"reputation":25235,"user_id":175070,"display_name":"Mike Strobel"},"comment_count":10,"down_vote_count":1,"up_vote_count":42,"is_accepted":true,"score":41,"last_activity_date":1453312229,"creation_date":1383854118,"answer_id":19845393,"question_id":19845213,"body_markdown":"No, there is no reliable, supported way to do this.  You assign a method reference to an instance of a functional interface, but that instance is cooked up by `LambdaMetaFactory`, and there is no way to drill into it to find the method you originally bound to.\r\n\r\nLambdas and method references in Java work quite differently than delegates in C#.  For some interesting background, read up on `invokedynamic`.\r\n\r\nOther answers and comments here show that it may currently be possible to retrieve the bound method with some additional work, but make sure you understand the caveats.","title":"How to get the MethodInfo of a Java 8 method reference?","body":"<p>No, there is no reliable, supported way to do this.  You assign a method reference to an instance of a functional interface, but that instance is cooked up by <code>LambdaMetaFactory</code>, and there is no way to drill into it to find the method you originally bound to.</p>\n\n<p>Lambdas and method references in Java work quite differently than delegates in C#.  For some interesting background, read up on <code>invokedynamic</code>.</p>\n\n<p>Other answers and comments here show that it may currently be possible to retrieve the bound method with some additional work, but make sure you understand the caveats.</p>\n"},{"tags":[],"owner":{"account_id":35892,"reputation":30826,"user_id":102008,"accept_rate":37,"display_name":"user102008"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1429395243,"creation_date":1429395243,"answer_id":29723489,"question_id":19845213,"body_markdown":"If you can make the interface `Action` extend `Serializable`, then [this answer][1] from another question seems to provide a solution (at least on some compilers and runtimes).\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/21879031/86989","title":"How to get the MethodInfo of a Java 8 method reference?","body":"<p>If you can make the interface <code>Action</code> extend <code>Serializable</code>, then <a href=\"https://stackoverflow.com/a/21879031/86989\">this answer</a> from another question seems to provide a solution (at least on some compilers and runtimes).</p>\n"},{"comments":[{"owner":{"account_id":201208,"reputation":3985,"user_id":447503,"accept_rate":61,"display_name":"basin"},"score":0,"creation_date":1535619243,"post_id":37631164,"comment_id":91135680,"body_markdown":"Thanks, BTW, instead of Mockito we can oblige the developers to extend bean classes themselves (and implement `String getMethod()` in their mocks)","body":"Thanks, BTW, instead of Mockito we can oblige the developers to extend bean classes themselves (and implement <code>String getMethod()</code> in their mocks)"},{"owner":{"account_id":3347267,"reputation":781,"user_id":2812189,"display_name":"fbastien"},"score":0,"creation_date":1641369580,"post_id":37631164,"comment_id":124784157,"body_markdown":"Nice solution! BTW, if you write `Class&lt;T&gt;` instead of `Class&lt;?&gt;` in the signature of your `getMethodName` method, then there&#39;s no more need for casting `Mockito.mock()` to `(T)` nor having `@SuppressWarnings(&quot;unchecked&quot;)`","body":"Nice solution! BTW, if you write <code>Class&lt;T&gt;</code> instead of <code>Class&lt;?&gt;</code> in the signature of your <code>getMethodName</code> method, then there&#39;s no more need for casting <code>Mockito.mock()</code> to <code>(T)</code> nor having <code>@SuppressWarnings(&quot;unchecked&quot;)</code>"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1644274610,"post_id":37631164,"comment_id":125558054,"body_markdown":"@fbastien unfortunately that wouldn’t work because the type of `object.getClass()` is not `Class&lt;? extends T&gt;` but simply `Class&lt;?&gt;` because of the generics. Consider for example the case of `T` being `List&lt;String&gt;`, `getClass()` could return e.g. `ArrayList.class`, which is not a subtype of `List&lt;String&gt;`. See also the note on the actual return type in [Object.getClass()’s javadoc](https://cr.openjdk.java.net/~iris/se/11/latestSpec/api/java.base/java/lang/Object.html#getClass()).","body":"@fbastien unfortunately that wouldn’t work because the type of <code>object.getClass()</code> is not <code>Class&lt;? extends T&gt;</code> but simply <code>Class&lt;?&gt;</code> because of the generics. Consider for example the case of <code>T</code> being <code>List&lt;String&gt;</code>, <code>getClass()</code> could return e.g. <code>ArrayList.class</code>, which is not a subtype of <code>List&lt;String&gt;</code>. See also the note on the actual return type in <a href=\"https://cr.openjdk.java.net/~iris/se/11/latestSpec/api/java.base/java/lang/Object.html#getClass()\" rel=\"nofollow noreferrer\">Object.getClass()’s javadoc</a>."}],"tags":[],"owner":{"account_id":129028,"reputation":39302,"user_id":327301,"accept_rate":66,"display_name":"yankee"},"comment_count":3,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1465049149,"creation_date":1465049149,"answer_id":37631164,"question_id":19845213,"body_markdown":"In my case I was looking for a way to get rid of this in unit tests:\r\n\r\n    Point p = getAPoint();\r\n    assertEquals(p.getX(), 4, &quot;x&quot;);\r\n    assertEquals(p.getY(), 6, &quot;x&quot;);\r\n\r\nAs you can see someone is testing Method `getAPoint` and checks that the coordinates are as expected, but in the description of each assert was copied and is not in sync with what is checked. Better would be to write this only once.\r\n\r\nFrom the ideas by @ddan I built a proxy solution using Mockito:\r\n\r\n    private&lt;T&gt; void assertPropertyEqual(final T object, final Function&lt;T, ?&gt; getter, final Object expected) {\r\n        final String methodName = getMethodName(object.getClass(), getter);\r\n        assertEquals(getter.apply(object), expected, methodName);\r\n    }\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    private&lt;T&gt; String getMethodName(final Class&lt;?&gt; clazz, final Function&lt;T, ?&gt; getter) {\r\n        final Method[] method = new Method[1];\r\n        getter.apply((T)Mockito.mock(clazz, Mockito.withSettings().invocationListeners(methodInvocationReport -&gt; {\r\n            method[0] = ((InvocationOnMock) methodInvocationReport.getInvocation()).getMethod();\r\n        })));\r\n        return method[0].getName();\r\n    }\r\n\r\nNo I can simply use\r\n\r\n    assertPropertyEqual(p, Point::getX, 4);\r\n    assertPropertyEqual(p, Point::getY, 6);\r\n\r\nand the description of the assert is guaranteed to be in sync with the code.\r\n\r\nDownside:\r\n\r\n- Will be slightly slower than above\r\n- Needs Mockito to work\r\n- Hardly useful to anything but the usecase above.\r\n\r\nHowever it does show a way how it could be done.","title":"How to get the MethodInfo of a Java 8 method reference?","body":"<p>In my case I was looking for a way to get rid of this in unit tests:</p>\n\n<pre><code>Point p = getAPoint();\nassertEquals(p.getX(), 4, \"x\");\nassertEquals(p.getY(), 6, \"x\");\n</code></pre>\n\n<p>As you can see someone is testing Method <code>getAPoint</code> and checks that the coordinates are as expected, but in the description of each assert was copied and is not in sync with what is checked. Better would be to write this only once.</p>\n\n<p>From the ideas by @ddan I built a proxy solution using Mockito:</p>\n\n<pre><code>private&lt;T&gt; void assertPropertyEqual(final T object, final Function&lt;T, ?&gt; getter, final Object expected) {\n    final String methodName = getMethodName(object.getClass(), getter);\n    assertEquals(getter.apply(object), expected, methodName);\n}\n\n@SuppressWarnings(\"unchecked\")\nprivate&lt;T&gt; String getMethodName(final Class&lt;?&gt; clazz, final Function&lt;T, ?&gt; getter) {\n    final Method[] method = new Method[1];\n    getter.apply((T)Mockito.mock(clazz, Mockito.withSettings().invocationListeners(methodInvocationReport -&gt; {\n        method[0] = ((InvocationOnMock) methodInvocationReport.getInvocation()).getMethod();\n    })));\n    return method[0].getName();\n}\n</code></pre>\n\n<p>No I can simply use</p>\n\n<pre><code>assertPropertyEqual(p, Point::getX, 4);\nassertPropertyEqual(p, Point::getY, 6);\n</code></pre>\n\n<p>and the description of the assert is guaranteed to be in sync with the code.</p>\n\n<p>Downside:</p>\n\n<ul>\n<li>Will be slightly slower than above</li>\n<li>Needs Mockito to work</li>\n<li>Hardly useful to anything but the usecase above.</li>\n</ul>\n\n<p>However it does show a way how it could be done.</p>\n"},{"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":4,"creation_date":1501082293,"post_id":45330587,"comment_id":77623952,"body_markdown":"Please add some words of explanation to your answer. Furthermore, the OP does not want the name of a method currently called but of a method a reference to which is forwarded.","body":"Please add some words of explanation to your answer. Furthermore, the OP does not want the name of a method currently called but of a method a reference to which is forwarded."}],"tags":[],"owner":{"account_id":3819917,"reputation":71,"user_id":3168221,"display_name":"Asghar Nemati"},"comment_count":1,"down_vote_count":7,"up_vote_count":2,"is_accepted":false,"score":-5,"last_activity_date":1501080913,"creation_date":1501080913,"answer_id":45330587,"question_id":19845213,"body_markdown":"Try this\r\n\r\n    Thread.currentThread().getStackTrace()[2].getMethodName();","title":"How to get the MethodInfo of a Java 8 method reference?","body":"<p>Try this</p>\n\n<pre><code>Thread.currentThread().getStackTrace()[2].getMethodName();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3641223,"reputation":2385,"user_id":3035247,"accept_rate":0,"display_name":"xiaohuo"},"score":0,"creation_date":1527069532,"post_id":47302814,"comment_id":87983587,"body_markdown":"Is very limited, not a general solution","body":"Is very limited, not a general solution"},{"owner":{"account_id":694325,"reputation":413,"user_id":571792,"display_name":"rumatoest"},"score":0,"creation_date":1573458422,"post_id":47302814,"comment_id":103875420,"body_markdown":"And also it depends on Unsafe and can not be used on modern JDKs","body":"And also it depends on Unsafe and can not be used on modern JDKs"},{"owner":{"account_id":3044,"reputation":12486,"user_id":4308,"accept_rate":84,"display_name":"Benedikt Waldvogel"},"score":1,"creation_date":1573494377,"post_id":47302814,"comment_id":103892167,"body_markdown":"@rumatoest: reflection-util supports modern JDKs. Could you file an issue on GitHub for the use-case that doesn’t work for you?","body":"@rumatoest: reflection-util supports modern JDKs. Could you file an issue on GitHub for the use-case that doesn’t work for you?"},{"owner":{"account_id":4529684,"reputation":71,"user_id":3680557,"display_name":"YSavanier"},"score":0,"creation_date":1613379936,"post_id":47302814,"comment_id":117047395,"body_markdown":"This only works for methods without an argument nor a return type, useless for most cases...","body":"This only works for methods without an argument nor a return type, useless for most cases..."},{"owner":{"account_id":3044,"reputation":12486,"user_id":4308,"accept_rate":84,"display_name":"Benedikt Waldvogel"},"score":0,"creation_date":1613584345,"post_id":47302814,"comment_id":117122343,"body_markdown":"@YSavanier: In reflection-util 2.9.0 we introduced ClassUtils.getMethodName(…) which allows you to capture methods with a return type. I’ve updated my answer accordingly.\nBut yes, the implementation is certainly no silver bullet and some cases are not (yet) supported.\nAnyway, having a solution for *some* cases could be interesting for *some* people…","body":"@YSavanier: In reflection-util 2.9.0 we introduced ClassUtils.getMethodName(…) which allows you to capture methods with a return type. I’ve updated my answer accordingly. But yes, the implementation is certainly no silver bullet and some cases are not (yet) supported. Anyway, having a solution for <i>some</i> cases could be interesting for <i>some</i> people…"}],"tags":[],"owner":{"account_id":3044,"reputation":12486,"user_id":4308,"accept_rate":84,"display_name":"Benedikt Waldvogel"},"comment_count":5,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1613584293,"creation_date":1510735234,"answer_id":47302814,"question_id":19845213,"body_markdown":"We have published the small library [reflection-util][1] that can be used to capture a method name.\r\n\r\nExample:\r\n\r\n\tclass MyClass {\r\n\r\n        private int value;\r\n\r\n\t\tpublic void myMethod() {\r\n\t\t}\r\n\r\n\t\tpublic int getValue() {\r\n            return value;\r\n\t\t}\r\n\r\n\t}\r\n\r\n    String methodName = ClassUtils.getMethodName(MyClass.class, MyClass::myMethod);\r\n    System.out.println(methodName); // prints &quot;myMethod&quot;\r\n\r\n    String getterName = ClassUtils.getMethodName(MyClass.class, MyClass::getValue);\r\n    System.out.println(getterName); // prints &quot;getValue&quot;\r\n\r\nImplementation details: A Proxy subclass of `MyClass` is created with [ByteBuddy][2] and a call to the method is captured to retrieve its name.\r\n`ClassUtils` caches the information such that we do not need to create a new proxy on every invocation.\r\n\r\nPlease note that this approach is *no silver bullet* and there are some known cases that don’t work:\r\n- It doesn’t work for **static** methods.\r\n- It doesn’t work if the class is **final**.\r\n- We currently do not support all potential method signatures. It should work for methods that do not take an argument such as a getter method.\r\n\r\n[1]: https://github.com/cronn/reflection-util\r\n[2]: https://bytebuddy.net","title":"How to get the MethodInfo of a Java 8 method reference?","body":"<p>We have published the small library <a href=\"https://github.com/cronn/reflection-util\" rel=\"nofollow noreferrer\">reflection-util</a> that can be used to capture a method name.</p>\n<p>Example:</p>\n<pre><code>class MyClass {\n\n    private int value;\n\n    public void myMethod() {\n    }\n\n    public int getValue() {\n        return value;\n    }\n\n}\n\nString methodName = ClassUtils.getMethodName(MyClass.class, MyClass::myMethod);\nSystem.out.println(methodName); // prints &quot;myMethod&quot;\n\nString getterName = ClassUtils.getMethodName(MyClass.class, MyClass::getValue);\nSystem.out.println(getterName); // prints &quot;getValue&quot;\n</code></pre>\n<p>Implementation details: A Proxy subclass of <code>MyClass</code> is created with <a href=\"https://bytebuddy.net\" rel=\"nofollow noreferrer\">ByteBuddy</a> and a call to the method is captured to retrieve its name.\n<code>ClassUtils</code> caches the information such that we do not need to create a new proxy on every invocation.</p>\n<p>Please note that this approach is <em>no silver bullet</em> and there are some known cases that don’t work:</p>\n<ul>\n<li>It doesn’t work for <strong>static</strong> methods.</li>\n<li>It doesn’t work if the class is <strong>final</strong>.</li>\n<li>We currently do not support all potential method signatures. It should work for methods that do not take an argument such as a getter method.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1370627,"reputation":495,"user_id":1305930,"display_name":"vivimice"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1510897114,"creation_date":1510897114,"answer_id":47343958,"question_id":19845213,"body_markdown":"There may not be a reliable way, but under some circumstances:\r\n\r\n1. your `MyClass` is not final, and has an accessible constructor (limitation of cglib)\r\n2. your `myMethod` is not overloaded, and not static\r\n\r\nThe you can try using cglib to create a proxy of `MyClass`, then using an `MethodInterceptor` to report the `Method` while the method reference is invoked in a following trial run.\r\n\r\nExample code:\r\n\r\n    public static void main(String[] args) {\r\n        Method m = MethodReferenceUtils.getReferencedMethod(ArrayList.class, ArrayList::contains);\r\n        System.out.println(m);\r\n    }\r\n\r\nYou will see the following output:\r\n\r\n    public boolean java.util.ArrayList.contains(java.lang.Object)\r\n\r\nWhile:\r\n\r\n\tpublic class MethodReferenceUtils {\r\n\t\r\n\t\t@FunctionalInterface\r\n\t\tpublic static interface MethodRefWith1Arg&lt;T, A1&gt; {\r\n\t\t\tvoid call(T t, A1 a1);\r\n\t\t}\r\n\t\r\n\t\tpublic static &lt;T, A1&gt; Method getReferencedMethod(Class&lt;T&gt; clazz, MethodRefWith1Arg&lt;T, A1&gt; methodRef) {\r\n\t\t\treturn findReferencedMethod(clazz, t -&gt; methodRef.call(t, null));\r\n\t\t}\r\n\t\r\n\t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t\tprivate static &lt;T&gt; Method findReferencedMethod(Class&lt;T&gt; clazz, Consumer&lt;T&gt; invoker) {\r\n\t\t\tAtomicReference&lt;Method&gt; ref = new AtomicReference&lt;&gt;();\r\n\t\t\tEnhancer enhancer = new Enhancer();\r\n\t\t\tenhancer.setSuperclass(clazz);\r\n\t\t\tenhancer.setCallback(new MethodInterceptor() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic Object intercept(Object obj, Method method, Object[] args, MethodProxy proxy) throws Throwable {\r\n\t\t\t\t\tref.set(method);\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\ttry {\r\n\t\t\t\tinvoker.accept((T) enhancer.create());\r\n\t\t\t} catch (ClassCastException e) {\r\n\t\t\t\tthrow new IllegalArgumentException(String.format(&quot;Invalid method reference on class [%s]&quot;, clazz));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tMethod method = ref.get();\r\n\t\t\tif (method == null) {\r\n\t\t\t\tthrow new IllegalArgumentException(String.format(&quot;Invalid method reference on class [%s]&quot;, clazz));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn method;\r\n\t\t}\r\n\t}\r\n\r\nIn the above code, `MethodRefWith1Arg` is just a syntax sugar for you to reference an non-static method with one arguments. You can create as many as `MethodRefWithXArgs` for referencing your other methods.\r\n","title":"How to get the MethodInfo of a Java 8 method reference?","body":"<p>There may not be a reliable way, but under some circumstances:</p>\n\n<ol>\n<li>your <code>MyClass</code> is not final, and has an accessible constructor (limitation of cglib)</li>\n<li>your <code>myMethod</code> is not overloaded, and not static</li>\n</ol>\n\n<p>The you can try using cglib to create a proxy of <code>MyClass</code>, then using an <code>MethodInterceptor</code> to report the <code>Method</code> while the method reference is invoked in a following trial run.</p>\n\n<p>Example code:</p>\n\n<pre><code>public static void main(String[] args) {\n    Method m = MethodReferenceUtils.getReferencedMethod(ArrayList.class, ArrayList::contains);\n    System.out.println(m);\n}\n</code></pre>\n\n<p>You will see the following output:</p>\n\n<pre><code>public boolean java.util.ArrayList.contains(java.lang.Object)\n</code></pre>\n\n<p>While:</p>\n\n<pre><code>public class MethodReferenceUtils {\n\n    @FunctionalInterface\n    public static interface MethodRefWith1Arg&lt;T, A1&gt; {\n        void call(T t, A1 a1);\n    }\n\n    public static &lt;T, A1&gt; Method getReferencedMethod(Class&lt;T&gt; clazz, MethodRefWith1Arg&lt;T, A1&gt; methodRef) {\n        return findReferencedMethod(clazz, t -&gt; methodRef.call(t, null));\n    }\n\n    @SuppressWarnings(\"unchecked\")\n    private static &lt;T&gt; Method findReferencedMethod(Class&lt;T&gt; clazz, Consumer&lt;T&gt; invoker) {\n        AtomicReference&lt;Method&gt; ref = new AtomicReference&lt;&gt;();\n        Enhancer enhancer = new Enhancer();\n        enhancer.setSuperclass(clazz);\n        enhancer.setCallback(new MethodInterceptor() {\n            @Override\n            public Object intercept(Object obj, Method method, Object[] args, MethodProxy proxy) throws Throwable {\n                ref.set(method);\n                return null;\n            }\n        });\n        try {\n            invoker.accept((T) enhancer.create());\n        } catch (ClassCastException e) {\n            throw new IllegalArgumentException(String.format(\"Invalid method reference on class [%s]\", clazz));\n        }\n\n        Method method = ref.get();\n        if (method == null) {\n            throw new IllegalArgumentException(String.format(\"Invalid method reference on class [%s]\", clazz));\n        }\n\n        return method;\n    }\n}\n</code></pre>\n\n<p>In the above code, <code>MethodRefWith1Arg</code> is just a syntax sugar for you to reference an non-static method with one arguments. You can create as many as <code>MethodRefWithXArgs</code> for referencing your other methods.</p>\n"},{"comments":[{"owner":{"account_id":68627,"reputation":1498,"user_id":200130,"accept_rate":90,"display_name":"Rafal"},"score":0,"creation_date":1524719079,"post_id":47398463,"comment_id":87086348,"body_markdown":"Oh... yes, it is to risky for production ;-)","body":"Oh... yes, it is to risky for production ;-)"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1644276370,"post_id":47398463,"comment_id":125558495,"body_markdown":"While this is an interesting approach, it will only work in Java 8 due to the `sun.*` imports (hence, I guess, the downvotes). You may want to update it for more recent versions of Java and describe the limitations.","body":"While this is an interesting approach, it will only work in Java 8 due to the <code>sun.*</code> imports (hence, I guess, the downvotes). You may want to update it for more recent versions of Java and describe the limitations."}],"tags":[],"owner":{"account_id":10057552,"reputation":47,"user_id":7435294,"display_name":"Dmitriy V."},"comment_count":2,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1511201329,"creation_date":1511201329,"answer_id":47398463,"question_id":19845213,"body_markdown":"So, I play with this code\r\n\r\n    import sun.reflect.ConstantPool;\r\n    \r\n    import java.lang.reflect.Method;\r\n    import java.util.function.Consumer;\r\n    \r\n    public class Main {\r\n        private Consumer&lt;String&gt; consumer;\r\n    \r\n        Main() {\r\n            consumer = this::test;\r\n        }\r\n    \r\n        public void test(String val) {\r\n            System.out.println(&quot;val = &quot; + val);\r\n        }\r\n    \r\n        public void run() throws Exception {\r\n            ConstantPool oa = sun.misc.SharedSecrets.getJavaLangAccess().getConstantPool(consumer.getClass());\r\n            for (int i = 0; i &lt; oa.getSize(); i++) {\r\n                try {\r\n                    Object v = oa.getMethodAt(i);\r\n                    if (v instanceof Method) {\r\n                        System.out.println(&quot;index = &quot; + i + &quot;, method = &quot; + v);\r\n                    }\r\n                } catch (Exception e) {\r\n                }\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            new Main().run();\r\n        }\r\n    }\r\n\r\noutput of this code is:\r\n\r\n    index = 30, method = public void Main.test(java.lang.String)\r\nAnd as I notice index of referenced method is always 30.\r\nFinal code may look like\r\n\r\n    public Method unreference(Object methodRef) {\r\n            ConstantPool constantPool = sun.misc.SharedSecrets.getJavaLangAccess().getConstantPool(methodRef.getClass());\r\n            try {\r\n                Object method = constantPool.getMethodAt(30);\r\n                if (method instanceof Method) {\r\n                    return (Method) method;\r\n                }\r\n            }catch (Exception ignored) {\r\n            }\r\n            throw new IllegalArgumentException(&quot;Not a method reference.&quot;);\r\n        }\r\n\r\n**Be careful with this code in production!**","title":"How to get the MethodInfo of a Java 8 method reference?","body":"<p>So, I play with this code</p>\n\n<pre><code>import sun.reflect.ConstantPool;\n\nimport java.lang.reflect.Method;\nimport java.util.function.Consumer;\n\npublic class Main {\n    private Consumer&lt;String&gt; consumer;\n\n    Main() {\n        consumer = this::test;\n    }\n\n    public void test(String val) {\n        System.out.println(\"val = \" + val);\n    }\n\n    public void run() throws Exception {\n        ConstantPool oa = sun.misc.SharedSecrets.getJavaLangAccess().getConstantPool(consumer.getClass());\n        for (int i = 0; i &lt; oa.getSize(); i++) {\n            try {\n                Object v = oa.getMethodAt(i);\n                if (v instanceof Method) {\n                    System.out.println(\"index = \" + i + \", method = \" + v);\n                }\n            } catch (Exception e) {\n            }\n        }\n    }\n\n    public static void main(String[] args) throws Exception {\n        new Main().run();\n    }\n}\n</code></pre>\n\n<p>output of this code is:</p>\n\n<pre><code>index = 30, method = public void Main.test(java.lang.String)\n</code></pre>\n\n<p>And as I notice index of referenced method is always 30.\nFinal code may look like</p>\n\n<pre><code>public Method unreference(Object methodRef) {\n        ConstantPool constantPool = sun.misc.SharedSecrets.getJavaLangAccess().getConstantPool(methodRef.getClass());\n        try {\n            Object method = constantPool.getMethodAt(30);\n            if (method instanceof Method) {\n                return (Method) method;\n            }\n        }catch (Exception ignored) {\n        }\n        throw new IllegalArgumentException(\"Not a method reference.\");\n    }\n</code></pre>\n\n<p><strong>Be careful with this code in production!</strong></p>\n"},{"comments":[{"owner":{"account_id":68627,"reputation":1498,"user_id":200130,"accept_rate":90,"display_name":"Rafal"},"score":2,"creation_date":1524719031,"post_id":49998151,"comment_id":87086332,"body_markdown":"I&#39;ve checked. It doesn&#39;t work for final methods, nor final classes nor static methods.","body":"I&#39;ve checked. It doesn&#39;t work for final methods, nor final classes nor static methods."},{"owner":{"account_id":10594124,"reputation":4488,"user_id":7803527,"accept_rate":75,"display_name":"Dean Xu"},"score":1,"creation_date":1524720190,"post_id":49998151,"comment_id":87086700,"body_markdown":"@Rafal Yes, it is. I had written in the doc. But Your downvote does not make sense . First, your question has no that restriction. I&#39;m going here to give you a solution only for your question. Second, I checked 4 answers above who gives solution and have more than 1 upvote. 3 of them can&#39;t work for final/static methods. Third, it&#39;s rare to reflect a static method, why you need that?","body":"@Rafal Yes, it is. I had written in the doc. But Your downvote does not make sense . First, your question has no that restriction. I&#39;m going here to give you a solution only for your question. Second, I checked 4 answers above who gives solution and have more than 1 upvote. 3 of them can&#39;t work for final/static methods. Third, it&#39;s rare to reflect a static method, why you need that?"},{"owner":{"account_id":68627,"reputation":1498,"user_id":200130,"accept_rate":90,"display_name":"Rafal"},"score":0,"creation_date":1524810638,"post_id":49998151,"comment_id":87129439,"body_markdown":"I can change downvote, but you have to edit you answer to let me do that (due to Stackoveflow restriction). Upvotes for other questions has been made not by me. My question has no restrictions... yes... so I expect answer which covers all cases or at least it is clear which are not covered.","body":"I can change downvote, but you have to edit you answer to let me do that (due to Stackoveflow restriction). Upvotes for other questions has been made not by me. My question has no restrictions... yes... so I expect answer which covers all cases or at least it is clear which are not covered."},{"owner":{"account_id":10594124,"reputation":4488,"user_id":7803527,"accept_rate":75,"display_name":"Dean Xu"},"score":0,"creation_date":1524810880,"post_id":49998151,"comment_id":87129576,"body_markdown":"@Rafal Thank you, sir. It doesn&#39;t matter. If you see me somewhere else, please don&#39;t downvote carelessly :)","body":"@Rafal Thank you, sir. It doesn&#39;t matter. If you see me somewhere else, please don&#39;t downvote carelessly :)"},{"owner":{"account_id":69636,"reputation":3071,"user_id":202504,"display_name":"jmiserez"},"score":3,"creation_date":1548693268,"post_id":49998151,"comment_id":95623558,"body_markdown":"The crucial piece of info is missing here, i.e. *how* your library works. If Github goes down then this answer is useless. The other answers at least link to some relevant code on StackOverflow.","body":"The crucial piece of info is missing here, i.e. <i>how</i> your library works. If Github goes down then this answer is useless. The other answers at least link to some relevant code on StackOverflow."},{"owner":{"account_id":4529684,"reputation":71,"user_id":3680557,"display_name":"YSavanier"},"score":0,"creation_date":1613379513,"post_id":49998151,"comment_id":117047201,"body_markdown":"Thank you so much for you piece of code, this is the only simple way I found to do this java&#39;s lifehack. Such great idea of using cglib as a temporary proxification in order to get the otherwise erased genericity you are my hero ! :D","body":"Thank you so much for you piece of code, this is the only simple way I found to do this java&#39;s lifehack. Such great idea of using cglib as a temporary proxification in order to get the otherwise erased genericity you are my hero ! :D"}],"tags":[],"owner":{"account_id":10594124,"reputation":4488,"user_id":7803527,"accept_rate":75,"display_name":"Dean Xu"},"comment_count":6,"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1524562391,"creation_date":1524562391,"answer_id":49998151,"question_id":19845213,"body_markdown":"You can use my library [`Reflect Without String`][1]\r\n\r\n    Method myMethod = ReflectWithoutString.methodGetter(MyClass.class).getMethod(MyClass::myMethod);\r\n\r\n\r\n  [1]: https://github.com/XDean/ReflectWithoutString","title":"How to get the MethodInfo of a Java 8 method reference?","body":"<p>You can use my library <a href=\"https://github.com/XDean/ReflectWithoutString\" rel=\"nofollow noreferrer\"><code>Reflect Without String</code></a></p>\n\n<pre><code>Method myMethod = ReflectWithoutString.methodGetter(MyClass.class).getMethod(MyClass::myMethod);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5705055,"reputation":1872,"user_id":4508899,"accept_rate":75,"display_name":"Jonas_Hess"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677504025,"creation_date":1676310972,"answer_id":75439570,"question_id":19845213,"body_markdown":"Another solution using Mockito:\r\n\r\n**pom.xml:**\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n      &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n      &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**Test code:**\r\n\r\n    @Test\r\n    void testMethodNameGetter() {\r\n        final var invocations = MethodUtil.getMethodFromGetter(DummyClass.class, DummyClass::getTestString);\r\n        Assertions.assertEquals(&quot;getTestString&quot;, invocations.get(0).getMethod().getName());\r\n    }\r\n    @Test\r\n    void testMethodNameSetter() {\r\n        final var invocations = MethodUtil.getMethodFromSetter(DummyClass.class, DummyClass::setTestString);\r\n        Assertions.assertEquals(&quot;setTestString&quot;, invocations.get(0).getMethod().getName());\r\n    }\r\n\r\n**java code:**\r\n\r\n    public class MethodUtil {\r\n\r\n    @Getter\r\n    @AllArgsConstructor\r\n    public static class MethodInvocation {\r\n        private Method method;\r\n        private Object[] arguments;\r\n    }\r\n\r\n    private MethodUtil() {\r\n        // static class\r\n    }\r\n\r\n    public static &lt;T&gt; List&lt;MethodInvocation&gt; getMethodFromGetter(final Class&lt;T&gt; clazz, final Function&lt;T, ?&gt; getter) {\r\n        return captureMethodOnInvocation(clazz, getter::apply);\r\n    }\r\n\r\n    public static &lt;\r\n            T,\r\n            V&gt; List&lt;MethodInvocation&gt; getMethodFromSetter(final Class&lt;T&gt; clazz, final BiConsumer&lt;T, V&gt; setter) {\r\n        return captureMethodOnInvocation(clazz, (T mock) -&gt; {\r\n\r\n            final BiConsumer setterGeneric = setter;\r\n            tryOneByOneUntilSuccess(\r\n                    () -&gt; setterGeneric.accept(mock, 0),\r\n                    () -&gt; setterGeneric.accept(mock, false),\r\n                    () -&gt; setterGeneric.accept(mock, 0D),\r\n                    () -&gt; setterGeneric.accept(mock, 0F),\r\n                    () -&gt; setterGeneric.accept(mock, null));\r\n        });\r\n    }\r\n\r\n    private static void tryOneByOneUntilSuccess(final Runnable... runnableArray) {\r\n        for (int i = 0, runnableArrayLength = runnableArray.length; i &lt; runnableArrayLength; i++) {\r\n            final Runnable runnable = runnableArray[i];\r\n            try {\r\n                runnable.run();\r\n                break;\r\n            } catch (final NullPointerException | ClassCastException e) {\r\n                if (i == runnableArrayLength - 1) {\r\n                    throw e;\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private static &lt;\r\n            T&gt; List&lt;MethodInvocation&gt; captureMethodOnInvocation(final Class&lt;T&gt; clazz, final Consumer&lt;T&gt; invokeMock) {\r\n        try {\r\n            final List&lt;MethodInvocation&gt; methodReferences = new ArrayList&lt;&gt;();\r\n            final InvocationListener invocationListener = new InvocationListener() {\r\n                @Override\r\n                public void reportInvocation(final MethodInvocationReport methodInvocationReport) {\r\n                    final InvocationOnMock invocation = (InvocationOnMock) methodInvocationReport.getInvocation();\r\n\r\n                    final Method method = invocation.getMethod();\r\n                    final Object[] arguments = invocation.getArguments();\r\n                    methodReferences.add(new MethodInvocation(method, arguments));\r\n                }\r\n            };\r\n            final MockSettings mockSettings = Mockito.withSettings().invocationListeners(invocationListener);\r\n            final T mock = Mockito.mock(clazz, mockSettings);\r\n            invokeMock.accept(mock);\r\n            return methodReferences;\r\n\r\n        } catch (final Exception e) {\r\n            throw new RuntimeException(&quot;Method could not be captured at runtime.&quot;, e);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n","title":"How to get the MethodInfo of a Java 8 method reference?","body":"<p>Another solution using Mockito:</p>\n<p><strong>pom.xml:</strong></p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n  &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n  &lt;scope&gt;compile&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>Test code:</strong></p>\n<pre><code>@Test\nvoid testMethodNameGetter() {\n    final var invocations = MethodUtil.getMethodFromGetter(DummyClass.class, DummyClass::getTestString);\n    Assertions.assertEquals(&quot;getTestString&quot;, invocations.get(0).getMethod().getName());\n}\n@Test\nvoid testMethodNameSetter() {\n    final var invocations = MethodUtil.getMethodFromSetter(DummyClass.class, DummyClass::setTestString);\n    Assertions.assertEquals(&quot;setTestString&quot;, invocations.get(0).getMethod().getName());\n}\n</code></pre>\n<p><strong>java code:</strong></p>\n<pre><code>public class MethodUtil {\n\n@Getter\n@AllArgsConstructor\npublic static class MethodInvocation {\n    private Method method;\n    private Object[] arguments;\n}\n\nprivate MethodUtil() {\n    // static class\n}\n\npublic static &lt;T&gt; List&lt;MethodInvocation&gt; getMethodFromGetter(final Class&lt;T&gt; clazz, final Function&lt;T, ?&gt; getter) {\n    return captureMethodOnInvocation(clazz, getter::apply);\n}\n\npublic static &lt;\n        T,\n        V&gt; List&lt;MethodInvocation&gt; getMethodFromSetter(final Class&lt;T&gt; clazz, final BiConsumer&lt;T, V&gt; setter) {\n    return captureMethodOnInvocation(clazz, (T mock) -&gt; {\n\n        final BiConsumer setterGeneric = setter;\n        tryOneByOneUntilSuccess(\n                () -&gt; setterGeneric.accept(mock, 0),\n                () -&gt; setterGeneric.accept(mock, false),\n                () -&gt; setterGeneric.accept(mock, 0D),\n                () -&gt; setterGeneric.accept(mock, 0F),\n                () -&gt; setterGeneric.accept(mock, null));\n    });\n}\n\nprivate static void tryOneByOneUntilSuccess(final Runnable... runnableArray) {\n    for (int i = 0, runnableArrayLength = runnableArray.length; i &lt; runnableArrayLength; i++) {\n        final Runnable runnable = runnableArray[i];\n        try {\n            runnable.run();\n            break;\n        } catch (final NullPointerException | ClassCastException e) {\n            if (i == runnableArrayLength - 1) {\n                throw e;\n            }\n        }\n    }\n\n}\n\nprivate static &lt;\n        T&gt; List&lt;MethodInvocation&gt; captureMethodOnInvocation(final Class&lt;T&gt; clazz, final Consumer&lt;T&gt; invokeMock) {\n    try {\n        final List&lt;MethodInvocation&gt; methodReferences = new ArrayList&lt;&gt;();\n        final InvocationListener invocationListener = new InvocationListener() {\n            @Override\n            public void reportInvocation(final MethodInvocationReport methodInvocationReport) {\n                final InvocationOnMock invocation = (InvocationOnMock) methodInvocationReport.getInvocation();\n\n                final Method method = invocation.getMethod();\n                final Object[] arguments = invocation.getArguments();\n                methodReferences.add(new MethodInvocation(method, arguments));\n            }\n        };\n        final MockSettings mockSettings = Mockito.withSettings().invocationListeners(invocationListener);\n        final T mock = Mockito.mock(clazz, mockSettings);\n        invokeMock.accept(mock);\n        return methodReferences;\n\n    } catch (final Exception e) {\n        throw new RuntimeException(&quot;Method could not be captured at runtime.&quot;, e);\n    }\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":68627,"reputation":1498,"user_id":200130,"accept_rate":90,"display_name":"Rafal"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38307,"favorite_count":0,"down_vote_count":0,"up_vote_count":100,"accepted_answer_id":19845393,"answer_count":10,"score":100,"last_activity_date":1677504025,"creation_date":1383853579,"question_id":19845213,"body_markdown":"Please have a look at the following code:\r\n\r\n    Method methodInfo = MyClass.class.getMethod(&quot;myMethod&quot;);\r\n\r\nThis works, but the method name is passed as a string, so this will compile even if myMethod does not exist.\r\n\r\nOn the other hand, Java 8 introduces a method reference feature. It is checked at compile time. It is possible to use this feature to get method info?\r\n\r\n    printMethodName(MyClass::myMethod);\r\n\r\nFull example:\r\n\r\n    @FunctionalInterface\r\n    private interface Action {\r\n        \r\n        void invoke();\r\n    }\r\n    \r\n    private static class MyClass {\r\n        \r\n        public static void myMethod() {\r\n        }\r\n    }\r\n    \r\n    private static void printMethodName(Action action) {\r\n    }\r\n\r\n    public static void main(String[] args) throws NoSuchMethodException {\r\n        // This works, but method name is passed as a string, so this will compile\r\n        // even if myMethod does not exist\r\n        Method methodInfo = MyClass.class.getMethod(&quot;myMethod&quot;);\r\n        \r\n        // Here we pass reference to a method. It is somehow possible to\r\n        // obtain java.lang.reflect.Method for myMethod inside printMethodName?\r\n        printMethodName(MyClass::myMethod);\r\n    }\r\n\r\nIn other words I would like to have a code which is the equivalent of the following C# code:\r\n\r\n        private static class InnerClass\r\n        {\r\n            public static void MyMethod()\r\n            {\r\n                Console.WriteLine(&quot;Hello&quot;);\r\n            }\r\n        }\r\n\r\n        static void PrintMethodName(Action action)\r\n        {\r\n            // Can I get java.lang.reflect.Method in the same way?\r\n            MethodInfo methodInfo = action.GetMethodInfo();\r\n        }\r\n\r\n        static void Main()\r\n        {\r\n            PrintMethodName(InnerClass.MyMethod);\r\n        }\r\n","title":"How to get the MethodInfo of a Java 8 method reference?","body":"<p>Please have a look at the following code:</p>\n\n<pre><code>Method methodInfo = MyClass.class.getMethod(\"myMethod\");\n</code></pre>\n\n<p>This works, but the method name is passed as a string, so this will compile even if myMethod does not exist.</p>\n\n<p>On the other hand, Java 8 introduces a method reference feature. It is checked at compile time. It is possible to use this feature to get method info?</p>\n\n<pre><code>printMethodName(MyClass::myMethod);\n</code></pre>\n\n<p>Full example:</p>\n\n<pre><code>@FunctionalInterface\nprivate interface Action {\n\n    void invoke();\n}\n\nprivate static class MyClass {\n\n    public static void myMethod() {\n    }\n}\n\nprivate static void printMethodName(Action action) {\n}\n\npublic static void main(String[] args) throws NoSuchMethodException {\n    // This works, but method name is passed as a string, so this will compile\n    // even if myMethod does not exist\n    Method methodInfo = MyClass.class.getMethod(\"myMethod\");\n\n    // Here we pass reference to a method. It is somehow possible to\n    // obtain java.lang.reflect.Method for myMethod inside printMethodName?\n    printMethodName(MyClass::myMethod);\n}\n</code></pre>\n\n<p>In other words I would like to have a code which is the equivalent of the following C# code:</p>\n\n<pre><code>    private static class InnerClass\n    {\n        public static void MyMethod()\n        {\n            Console.WriteLine(\"Hello\");\n        }\n    }\n\n    static void PrintMethodName(Action action)\n    {\n        // Can I get java.lang.reflect.Method in the same way?\n        MethodInfo methodInfo = action.GetMethodInfo();\n    }\n\n    static void Main()\n    {\n        PrintMethodName(InnerClass.MyMethod);\n    }\n</code></pre>\n"},{"tags":["java","android","kotlin","android-activity"],"comments":[{"owner":{"account_id":10698530,"reputation":592,"user_id":7874746,"display_name":"Abdullah Javed"},"score":2,"creation_date":1677501861,"post_id":75580367,"comment_id":133343912,"body_markdown":"Call method in onStop() as app is still running in the background and activity is not destroyed. For multiple activities you can make a base class for this purpose.","body":"Call method in onStop() as app is still running in the background and activity is not destroyed. For multiple activities you can make a base class for this purpose."}],"answers":[{"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1677506758,"post_id":75580838,"comment_id":133345502,"body_markdown":"It’s also called when a dialog box appears on the screen or the user pulls down the notification bar, so it might not be suitable for the OP&#39;s use case.","body":"It’s also called when a dialog box appears on the screen or the user pulls down the notification bar, so it might not be suitable for the OP&#39;s use case."}],"tags":[],"owner":{"account_id":14562608,"reputation":198,"user_id":10518289,"display_name":"janithcooray"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677502960,"creation_date":1677502960,"answer_id":75580838,"question_id":75580367,"body_markdown":"You didn&#39;t state if you were doing this with JAVA or Kotlin, but not a big deal.\r\ntry onPause() This is called when the user presses the home button and the activity is no longer in the foreground.\r\n\r\n```\r\n    @Override\r\n    protected void onPause(){\r\n        super.onPause();\r\n        something();\r\n    }\r\n```","title":"Android : Call function when user close app from any activity","body":"<p>You didn't state if you were doing this with JAVA or Kotlin, but not a big deal.\ntry onPause() This is called when the user presses the home button and the activity is no longer in the foreground.</p>\n<pre><code>    @Override\n    protected void onPause(){\n        super.onPause();\n        something();\n    }\n</code></pre>\n"}],"owner":{"account_id":14622815,"reputation":257,"user_id":10560949,"display_name":"Jay Panchal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677503776,"creation_date":1677500024,"question_id":75580367,"body_markdown":"I want to call one function when the user closes the app from any activity. For e.g. the user opens the app and uses it for some time and then clicks on the home button and closes the app at that time I want to call one method.\r\n\r\n\r\nHow can I archive this.?\r\n\r\nCurrently I used onDestroy method for the call function but seems like it does work for me","title":"Android : Call function when user close app from any activity","body":"<p>I want to call one function when the user closes the app from any activity. For e.g. the user opens the app and uses it for some time and then clicks on the home button and closes the app at that time I want to call one method.</p>\n<p>How can I archive this.?</p>\n<p>Currently I used onDestroy method for the call function but seems like it does work for me</p>\n"},{"tags":["java","jboss","wildfly"],"answers":[{"comments":[{"owner":{"account_id":13092570,"reputation":127,"user_id":9459527,"display_name":"mikedoy"},"score":0,"creation_date":1677189945,"post_id":75537920,"comment_id":133294564,"body_markdown":"Thank you I will try that when I get a chance. I hit more pressing issues at the moment. I will mark as accepted.","body":"Thank you I will try that when I get a chance. I hit more pressing issues at the moment. I will mark as accepted."}],"tags":[],"owner":{"account_id":24460312,"reputation":16,"user_id":18381413,"display_name":"fischey"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677503298,"creation_date":1677098284,"answer_id":75537920,"question_id":75516296,"body_markdown":"You need to add the Module to the standalone.xml configuration File, so that the Wildfly will load the module. See here: http://www.mastertheboss.com/jbossas/jboss-configuration/configuring-global-modules-and-directories-in-wildfly/?amp=1 section global modules\r\n\r\nIn your example it should look like this:\r\n\r\n````\r\n    &lt;subsystem xmlns=&quot;urn:jboss:domain:ee:1.0&quot; &gt;            \r\n      &lt;global-modules&gt;\r\n        &lt;module name=com.acme.bouncy&quot; slot=&quot;main&quot; /&gt;            \r\n      &lt;/global-modules&gt; \r\n    &lt;/subsystem&gt;\r\n````\r\n\r\nYou could also use the jboss-cli to add the module.\r\n````\r\nsubsystem=ee/:write-attribute(name=global-modules,value=[{&quot;name&quot; =&gt; &quot;com.acme.bouncy&quot;,&quot;slot&quot; =&gt; &quot;main&quot;}])\r\n````","title":"wildfly 21 -- add bouncy castle provider without changing JDK configuration","body":"<p>You need to add the Module to the standalone.xml configuration File, so that the Wildfly will load the module. See here: <a href=\"http://www.mastertheboss.com/jbossas/jboss-configuration/configuring-global-modules-and-directories-in-wildfly/?amp=1\" rel=\"nofollow noreferrer\">http://www.mastertheboss.com/jbossas/jboss-configuration/configuring-global-modules-and-directories-in-wildfly/?amp=1</a> section global modules</p>\n<p>In your example it should look like this:</p>\n<pre><code>    &lt;subsystem xmlns=&quot;urn:jboss:domain:ee:1.0&quot; &gt;            \n      &lt;global-modules&gt;\n        &lt;module name=com.acme.bouncy&quot; slot=&quot;main&quot; /&gt;            \n      &lt;/global-modules&gt; \n    &lt;/subsystem&gt;\n</code></pre>\n<p>You could also use the jboss-cli to add the module.</p>\n<pre><code>subsystem=ee/:write-attribute(name=global-modules,value=[{&quot;name&quot; =&gt; &quot;com.acme.bouncy&quot;,&quot;slot&quot; =&gt; &quot;main&quot;}])\n</code></pre>\n"}],"owner":{"account_id":13092570,"reputation":127,"user_id":9459527,"display_name":"mikedoy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":310,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75537920,"answer_count":1,"score":0,"last_activity_date":1677503298,"creation_date":1676953599,"question_id":75516296,"body_markdown":"I tried creating a module with the provider jar \r\nThis is the module:\r\n```\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;module xmlns=&quot;urn:jboss:module:1.3&quot; name=&quot;com.acme.bouncy&quot;&gt;\r\n        &lt;resources&gt;\r\n            &lt;resource-root path=&quot;bcprovider.jar&quot;/&gt;\r\n        &lt;/resources&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;module name=&quot;javax.api&quot;/&gt;\r\n            &lt;module name=&quot;javax.transaction.api&quot;/&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/module&gt;\r\n```\r\nI added the option to change security file to wildfly.conf which adds the provider\r\n```\r\nJAVA_OPTS=&quot;$JAVA_OPTS -Djava.security.properties=/var/opt/acme/bcprops.security&quot;\r\n```\r\nbut I still get this error unless the jar file is added to jre/lib/ext (which I don&#39;t want to do):\r\n```\r\n2023-02-21 03:42:47,014 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC000001: Failed to start service org.wildfly.security.credential-store.mastercs: org.jboss.msc.service.StartException in service org.wildfly.security.credential-store.mastercs: WFLYELY00004: Unable to start the service.\r\n\tat org.wildfly.extension.elytron.CredentialStoreService.start(CredentialStoreService.java:132)\r\n\tat org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1739)\r\n\tat org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1701)\r\n\tat org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1559)\r\n\tat org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n\tat org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1363)\r\n\tat java.lang.Thread.run(Thread.java:750)\r\nCaused by: org.wildfly.security.credential.store.CredentialStoreException: ELY09514: Unable to initialize credential store\r\n\tat org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.getKeyStoreInstance(KeyStoreCredentialStore.java:953)\r\n\tat org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.setupExternalStorage(KeyStoreCredentialStore.java:962)\r\n\tat org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.load(KeyStoreCredentialStore.java:841)\r\n\tat org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.initialize(KeyStoreCredentialStore.java:223)\r\n\tat org.wildfly.security.credential.store.CredentialStore.initialize(CredentialStore.java:160)\r\n\tat org.wildfly.extension.elytron.CredentialStoreService.start(CredentialStoreService.java:123)\r\n\t... 8 more\r\nCaused by: java.security.KeyStoreException: BKS not found\r\n\tat java.security.KeyStore.getInstance(KeyStore.java:851)\r\n\tat org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.getKeyStoreInstance(KeyStoreCredentialStore.java:949)\r\n\t... 13 more\r\nCaused by: java.security.NoSuchAlgorithmException: BKS KeyStore not available\r\n\tat sun.security.jca.GetInstance.getInstance(GetInstance.java:159)\r\n\tat java.security.Security.getImpl(Security.java:695)\r\n\tat java.security.KeyStore.getInstance(KeyStore.java:848)\r\n\t... 14 more\r\n```","title":"wildfly 21 -- add bouncy castle provider without changing JDK configuration","body":"<p>I tried creating a module with the provider jar\nThis is the module:</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n    &lt;module xmlns=&quot;urn:jboss:module:1.3&quot; name=&quot;com.acme.bouncy&quot;&gt;\n        &lt;resources&gt;\n            &lt;resource-root path=&quot;bcprovider.jar&quot;/&gt;\n        &lt;/resources&gt;\n        &lt;dependencies&gt;\n            &lt;module name=&quot;javax.api&quot;/&gt;\n            &lt;module name=&quot;javax.transaction.api&quot;/&gt;\n        &lt;/dependencies&gt;\n    &lt;/module&gt;\n</code></pre>\n<p>I added the option to change security file to wildfly.conf which adds the provider</p>\n<pre><code>JAVA_OPTS=&quot;$JAVA_OPTS -Djava.security.properties=/var/opt/acme/bcprops.security&quot;\n</code></pre>\n<p>but I still get this error unless the jar file is added to jre/lib/ext (which I don't want to do):</p>\n<pre><code>2023-02-21 03:42:47,014 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC000001: Failed to start service org.wildfly.security.credential-store.mastercs: org.jboss.msc.service.StartException in service org.wildfly.security.credential-store.mastercs: WFLYELY00004: Unable to start the service.\n    at org.wildfly.extension.elytron.CredentialStoreService.start(CredentialStoreService.java:132)\n    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1739)\n    at org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1701)\n    at org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1559)\n    at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1363)\n    at java.lang.Thread.run(Thread.java:750)\nCaused by: org.wildfly.security.credential.store.CredentialStoreException: ELY09514: Unable to initialize credential store\n    at org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.getKeyStoreInstance(KeyStoreCredentialStore.java:953)\n    at org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.setupExternalStorage(KeyStoreCredentialStore.java:962)\n    at org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.load(KeyStoreCredentialStore.java:841)\n    at org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.initialize(KeyStoreCredentialStore.java:223)\n    at org.wildfly.security.credential.store.CredentialStore.initialize(CredentialStore.java:160)\n    at org.wildfly.extension.elytron.CredentialStoreService.start(CredentialStoreService.java:123)\n    ... 8 more\nCaused by: java.security.KeyStoreException: BKS not found\n    at java.security.KeyStore.getInstance(KeyStore.java:851)\n    at org.wildfly.security.credential.store.impl.KeyStoreCredentialStore.getKeyStoreInstance(KeyStoreCredentialStore.java:949)\n    ... 13 more\nCaused by: java.security.NoSuchAlgorithmException: BKS KeyStore not available\n    at sun.security.jca.GetInstance.getInstance(GetInstance.java:159)\n    at java.security.Security.getImpl(Security.java:695)\n    at java.security.KeyStore.getInstance(KeyStore.java:848)\n    ... 14 more\n</code></pre>\n"},{"tags":["java","spring","xsd","dependencies"],"owner":{"account_id":22804956,"reputation":1,"user_id":18894094,"display_name":"Владимир Хейфец"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1677503010,"answer_count":0,"score":0,"last_activity_date":1677503297,"creation_date":1677498838,"question_id":75580146,"body_markdown":"Lately Spring moved some of their XSD files. Because of it our product just stops working.\r\n\r\nCan you make me some advice, what is better solution to avoid such kind of problems. Should we have our versions of dependencies that relates only on locally stored files? What is best way to store them? \r\n\r\nWe are very small region software company and I&#39;ll be really appreciated to hear some best practices from more experienced developers from bigger companies.\r\n\r\nNow we just change some jar files and links in them to existed XSD. ","title":"Where to store XSD and how to avoid strong dependencies to external links?","body":"<p>Lately Spring moved some of their XSD files. Because of it our product just stops working.</p>\n<p>Can you make me some advice, what is better solution to avoid such kind of problems. Should we have our versions of dependencies that relates only on locally stored files? What is best way to store them?</p>\n<p>We are very small region software company and I'll be really appreciated to hear some best practices from more experienced developers from bigger companies.</p>\n<p>Now we just change some jar files and links in them to existed XSD.</p>\n"},{"tags":["java","database","hibernate","jpa","h2"],"comments":[{"owner":{"account_id":2077773,"reputation":133288,"user_id":1850609,"display_name":"acdcjunior"},"score":0,"creation_date":1367291959,"post_id":16289804,"comment_id":23320296,"body_markdown":"I take Hibernate is generating the schema, right?","body":"I take Hibernate is generating the schema, right?"},{"owner":{"account_id":161745,"reputation":49245,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"score":1,"creation_date":1367297791,"post_id":16289804,"comment_id":23321482,"body_markdown":"If the column is created without precision and scale, then H2 doesn&#39;t truncate. So either the column is created with precision / scale, or Hibernate, or your application truncates the value. I can&#39;t say which one it is however.","body":"If the column is created without precision and scale, then H2 doesn&#39;t truncate. So either the column is created with precision / scale, or Hibernate, or your application truncates the value. I can&#39;t say which one it is however."},{"owner":{"account_id":161745,"reputation":49245,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"score":0,"creation_date":1367390165,"post_id":16289804,"comment_id":23359043,"body_markdown":"Could you get the schema of this database, by executing the SQL statement `SCRIPT` in the H2 database?","body":"Could you get the schema of this database, by executing the SQL statement <code>SCRIPT</code> in the H2 database?"},{"owner":{"account_id":371567,"reputation":1694,"user_id":720163,"accept_rate":73,"display_name":"Matej Tymes"},"score":0,"creation_date":1367413896,"post_id":16289804,"comment_id":23367261,"body_markdown":"I assume it will be the creation script (thanks for now), will verify it soon","body":"I assume it will be the creation script (thanks for now), will verify it soon"},{"owner":{"account_id":309306,"reputation":5033,"user_id":621686,"accept_rate":71,"display_name":"bvulaj"},"score":0,"creation_date":1439998239,"post_id":16289804,"comment_id":52094008,"body_markdown":"Ever find an answer to this?  We&#39;re also experiencing this problem.","body":"Ever find an answer to this?  We&#39;re also experiencing this problem."},{"owner":{"account_id":9478211,"reputation":387,"user_id":7046953,"display_name":"Scar Coder"},"score":0,"creation_date":1483569105,"post_id":16289804,"comment_id":70154576,"body_markdown":"I found a helpful answer here:\nhttp://stackoverflow.com/questions/15568048/play-framework-ebean-bigdecimal-fraction","body":"I found a helpful answer here: <a href=\"http://stackoverflow.com/questions/15568048/play-framework-ebean-bigdecimal-fraction\" title=\"play framework ebean bigdecimal fraction\">stackoverflow.com/questions/15568048/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1014607,"reputation":4573,"user_id":1026453,"accept_rate":83,"display_name":"DuncanKinnear"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1391737894,"creation_date":1391737894,"answer_id":21617841,"question_id":16289804,"body_markdown":"Even though you don&#39;t know the precision/scale up-front, I think you still need to define the *maximum* precision and scale in the `@Column` annotation. You need to have a look at the database schema generated to see how Hibernate is defining the column.\r\n\r\nBy the way, I can tell you that the creation of the `BigDecimal` value coming back from the database is done by the proprietary JDBC driver&#39;s implementation of the `getBigDecimal` method of the database-specific `ResultSet` sub-class.\r\n\r\nI found this out by stepping thru the Hibernate source code with a debugger, while trying to find the answer to [my own question][1].\r\n\r\nIt seems that some implementations of the `getBigDecimal` method will either use the precision/scale defined in the database schema, or will try to optimise the `BigDecimal` returned by only defining the minimum precision/scale required to hold the value retrieved.\r\n\r\nSee also [my question here][1] and this [other question][2].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/21568693/hibernate-bigdecimal-column-mapping-for-custom-dialect\r\n  [2]: https://stackoverflow.com/questions/6544232/how-do-i-map-a-bigdecimal-in-hibernate-so-i-get-back-the-same-scale-i-put-in","title":"lost precision when storing BigDecimal into H2 using Hibernate","body":"<p>Even though you don't know the precision/scale up-front, I think you still need to define the <em>maximum</em> precision and scale in the <code>@Column</code> annotation. You need to have a look at the database schema generated to see how Hibernate is defining the column.</p>\n\n<p>By the way, I can tell you that the creation of the <code>BigDecimal</code> value coming back from the database is done by the proprietary JDBC driver's implementation of the <code>getBigDecimal</code> method of the database-specific <code>ResultSet</code> sub-class.</p>\n\n<p>I found this out by stepping thru the Hibernate source code with a debugger, while trying to find the answer to <a href=\"https://stackoverflow.com/questions/21568693/hibernate-bigdecimal-column-mapping-for-custom-dialect\">my own question</a>.</p>\n\n<p>It seems that some implementations of the <code>getBigDecimal</code> method will either use the precision/scale defined in the database schema, or will try to optimise the <code>BigDecimal</code> returned by only defining the minimum precision/scale required to hold the value retrieved.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/21568693/hibernate-bigdecimal-column-mapping-for-custom-dialect\">my question here</a> and this <a href=\"https://stackoverflow.com/questions/6544232/how-do-i-map-a-bigdecimal-in-hibernate-so-i-get-back-the-same-scale-i-put-in\">other question</a>.</p>\n"},{"tags":[],"owner":{"account_id":5729160,"reputation":185,"user_id":4525240,"display_name":"James Matlik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1440005852,"creation_date":1440005852,"answer_id":32102104,"question_id":16289804,"body_markdown":"We ran into a situation very similar to what is described here, but the problem was partly due to how we manage our environment.  We are using Spring Data JPA (uses Hibernate) but manage our schema migrations using Flyway.\r\n\r\nWhen interacting with Postgres, everything was fine, but when using H2 for testing, all our DECIMAL types were persisted into the database with only two digits of rounded (half up) scale with no obvious reason.\r\n\r\nIn our case, the problem was resolved by setting this flag in our Spring Boot application.properties:\r\n\r\n`spring.jpa.hibernate.ddl-auto=none`\r\n\r\nSo, the root cause was incomplete JPA definitions for DDL generation being applied by Hibernate.  Our solution was to disable the automatic DDL generation because we are taking care of it with SQL scripts, but this should also be fixable via a more complete JPA definition.","title":"lost precision when storing BigDecimal into H2 using Hibernate","body":"<p>We ran into a situation very similar to what is described here, but the problem was partly due to how we manage our environment.  We are using Spring Data JPA (uses Hibernate) but manage our schema migrations using Flyway.</p>\n\n<p>When interacting with Postgres, everything was fine, but when using H2 for testing, all our DECIMAL types were persisted into the database with only two digits of rounded (half up) scale with no obvious reason.</p>\n\n<p>In our case, the problem was resolved by setting this flag in our Spring Boot application.properties:</p>\n\n<p><code>spring.jpa.hibernate.ddl-auto=none</code></p>\n\n<p>So, the root cause was incomplete JPA definitions for DDL generation being applied by Hibernate.  Our solution was to disable the automatic DDL generation because we are taking care of it with SQL scripts, but this should also be fixable via a more complete JPA definition.</p>\n"},{"tags":[],"owner":{"account_id":332311,"reputation":3167,"user_id":657525,"display_name":"womd"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677503295,"creation_date":1677502746,"answer_id":75580799,"question_id":16289804,"body_markdown":"ran into this, trying to store values like: 0.08559, 0.000000012, would be stored as 0.00.\r\nOne has to use scale + precision attribute on the Entity definition \r\neg:\r\n\r\n    @Column(scale = 15, precision = 30)\r\n    private BigDecimal myValue;\r\n\r\nremember: Precision specifies total number of digits in a number\r\nscale specifies number of digits after the decimal point.\r\n","title":"lost precision when storing BigDecimal into H2 using Hibernate","body":"<p>ran into this, trying to store values like: 0.08559, 0.000000012, would be stored as 0.00.\nOne has to use scale + precision attribute on the Entity definition\neg:</p>\n<pre><code>@Column(scale = 15, precision = 30)\nprivate BigDecimal myValue;\n</code></pre>\n<p>remember: Precision specifies total number of digits in a number\nscale specifies number of digits after the decimal point.</p>\n"}],"owner":{"account_id":371567,"reputation":1694,"user_id":720163,"accept_rate":73,"display_name":"Matej Tymes"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7541,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1677503295,"creation_date":1367277517,"question_id":16289804,"body_markdown":"We are using H2 database for testing purposes, but when I store BigDecimal value into it using Hibernate and then load it back the value is truncated to two decimal places:\r\n\r\nThe field definition looks like this\r\n\r\n    @Column(name = &quot;Rate&quot;, nullable = true)\r\n    private BigDecimal rate;\r\n\r\nso 1.456 is truncated into 1.46.\r\n\r\nI don&#39;t know the precision upfront (it is different for every entity), so I can&#39;t define them on the annotation.\r\n\r\nIs there some way how to resolve this?","title":"lost precision when storing BigDecimal into H2 using Hibernate","body":"<p>We are using H2 database for testing purposes, but when I store BigDecimal value into it using Hibernate and then load it back the value is truncated to two decimal places:</p>\n\n<p>The field definition looks like this</p>\n\n<pre><code>@Column(name = \"Rate\", nullable = true)\nprivate BigDecimal rate;\n</code></pre>\n\n<p>so 1.456 is truncated into 1.46.</p>\n\n<p>I don't know the precision upfront (it is different for every entity), so I can't define them on the annotation.</p>\n\n<p>Is there some way how to resolve this?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":9596641,"reputation":873,"user_id":7125557,"display_name":"dimirsen Z"},"score":0,"creation_date":1677501558,"post_id":75580502,"comment_id":133343823,"body_markdown":"Do you use the value returned by save()?","body":"Do you use the value returned by save()?"},{"owner":{"account_id":27558404,"reputation":23,"user_id":21032025,"display_name":"Frosty Nah"},"score":0,"creation_date":1677501772,"post_id":75580502,"comment_id":133343877,"body_markdown":"Ughh, I&#39;m not sure that I understand what you excalty mean, If you dont mind, be more specific, sorry","body":"Ughh, I&#39;m not sure that I understand what you excalty mean, If you dont mind, be more specific, sorry"},{"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"score":0,"creation_date":1677501888,"post_id":75580502,"comment_id":133343921,"body_markdown":"It looks like you’re overwriting the transaction with the one in the database before you call the method to update `transaction = transactionService.getTransactionById(transactionId);`","body":"It looks like you’re overwriting the transaction with the one in the database before you call the method to update <code>transaction = transactionService.getTransactionById(transactionId);</code>"},{"owner":{"account_id":27558404,"reputation":23,"user_id":21032025,"display_name":"Frosty Nah"},"score":0,"creation_date":1677502108,"post_id":75580502,"comment_id":133343980,"body_markdown":"When I remove that line result is same","body":"When I remove that line result is same"},{"owner":{"account_id":27558404,"reputation":23,"user_id":21032025,"display_name":"Frosty Nah"},"score":0,"creation_date":1677502229,"post_id":75580502,"comment_id":133344031,"body_markdown":"Also, just to mention, you can see that In transaction table I have field as `note` and when i try to edit that field its also as for `amount`, new values are not recieved","body":"Also, just to mention, you can see that In transaction table I have field as <code>note</code> and when i try to edit that field its also as for <code>amount</code>, new values are not recieved"},{"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"score":0,"creation_date":1677502452,"post_id":75580502,"comment_id":133344099,"body_markdown":"You’re doing the same thing in both controller and service. You take in the `Transaction` object, but then overwrite it when you fetch the existing from the database. I suggest making a new object such as `Transaction existing = transactionService.getTransactionById(transactionId);`, then overwrite it’s data with the new fields from `transaction` and call `save(existing);`","body":"You’re doing the same thing in both controller and service. You take in the <code>Transaction</code> object, but then overwrite it when you fetch the existing from the database. I suggest making a new object such as <code>Transaction existing = transactionService.getTransactionById(transactionId);</code>, then overwrite it’s data with the new fields from <code>transaction</code> and call <code>save(existing);</code>"},{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1677502478,"post_id":75580502,"comment_id":133344105,"body_markdown":"Both `amount` and `note` are not annotated as `@Column`","body":"Both <code>amount</code> and <code>note</code> are not annotated as <code>@Column</code>"},{"owner":{"account_id":27558404,"reputation":23,"user_id":21032025,"display_name":"Frosty Nah"},"score":0,"creation_date":1677503085,"post_id":75580502,"comment_id":133344287,"body_markdown":"@CalvinP. Can you be a bit more specific? Like where I need to create new `existing` object? In controller?","body":"@CalvinP. Can you be a bit more specific? Like where I need to create new <code>existing</code> object? In controller?"},{"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"score":0,"creation_date":1677503512,"post_id":75580502,"comment_id":133344418,"body_markdown":"@Frosty I would recommend creating it in the service actually, as traditionally this is where most of your business logic should lie.","body":"@Frosty I would recommend creating it in the service actually, as traditionally this is where most of your business logic should lie."}],"answers":[{"comments":[{"owner":{"account_id":27558404,"reputation":23,"user_id":21032025,"display_name":"Frosty Nah"},"score":0,"creation_date":1677503419,"post_id":75580881,"comment_id":133344389,"body_markdown":"Yeah, that is fine, I tried like you but its look like I missed something. By the way, I mentioined above that I also have a `note` column inside transaction table, but when I update it its not changed, look like same problem like for amount before","body":"Yeah, that is fine, I tried like you but its look like I missed something. By the way, I mentioined above that I also have a <code>note</code> column inside transaction table, but when I update it its not changed, look like same problem like for amount before"},{"owner":{"account_id":27558404,"reputation":23,"user_id":21032025,"display_name":"Frosty Nah"},"score":0,"creation_date":1677504215,"post_id":75580881,"comment_id":133344633,"body_markdown":"Hi, I made it, I just have one question regardles amount field, if you have a time to give me advice about it","body":"Hi, I made it, I just have one question regardles amount field, if you have a time to give me advice about it"},{"owner":{"account_id":17857092,"reputation":26,"user_id":12971433,"display_name":"Navid Mahbub"},"score":0,"creation_date":1677562521,"post_id":75580881,"comment_id":133357665,"body_markdown":"To solve the `note` problem update the `transaction` variable and save the `transaction` variable instead of `existingTransactionInDb`. Also, don&#39;t forget to check if `transaction` and `existingTransactionInDb` primaryId same and not null. otherwise it will create a new one","body":"To solve the <code>note</code> problem update the <code>transaction</code> variable and save the <code>transaction</code> variable instead of <code>existingTransactionInDb</code>. Also, don&#39;t forget to check if <code>transaction</code> and <code>existingTransactionInDb</code> primaryId same and not null. otherwise it will create a new one"}],"tags":[],"owner":{"account_id":17857092,"reputation":26,"user_id":12971433,"display_name":"Navid Mahbub"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677503245,"creation_date":1677503245,"answer_id":75580881,"question_id":75580502,"body_markdown":"&gt; transaction = transactionService.getTransactionById(transactionId);\r\n\r\nThe problem is in the above as you reused the variable. The incoming new `transaction` with value 15 is getting overwritten by an already existing `transaction` with initialValue 1;\r\n\r\nThe following should work now:\r\n\r\n    @PostMapping(&quot;/updateIncome/{transactionId}&quot;)\r\n\tpublic String updateIncome(@PathVariable(value = &quot;transactionId&quot;) long transactionId, @Valid Transaction transaction, BindingResult result, Model model) {\r\n\r\n\t\tAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n\t\tUserDetailsImpl user = (UserDetailsImpl) authentication.getPrincipal();\r\n\t\tlong userId = user.getId();\r\n\r\n\t\tboolean thereAreErrors = result.hasErrors();\r\n\t\tif (thereAreErrors) {\r\n\t\t\tmodel.addAttribute(&quot;incomeCategories&quot;, IncomeCategories.values());\r\n\t\t\treturn &quot;income_transaction&quot;;\r\n\t\t}\r\n\r\n\t\ttransactionService.updateIncome(transaction, transactionId);\r\n\t\treturn &quot;redirect:/api/wallet/userWallet/balance/&quot; + userId;\r\n\t}\r\n\r\n\r\n    @Override\r\n\tpublic void updateIncome(Transaction transaction, Long transactionId) {\r\n\t\tTransaction existingTransactionInDb = getTransactionById(transactionId);\r\n\t\tdouble amount = transaction.getAmount();\r\n\t\tSystem.out.println(transaction.getAmount());\r\n\t\texistingTransactionInDb.getWallet().setInitialBalance(existingTransactionInDb.getWallet().getInitialBalance() + amount);\r\n\t\tthis.transactionRepository.save(existingTransactionInDb);\r\n\t}","title":"Value is always same when try to update data from table","body":"<blockquote>\n<p>transaction = transactionService.getTransactionById(transactionId);</p>\n</blockquote>\n<p>The problem is in the above as you reused the variable. The incoming new <code>transaction</code> with value 15 is getting overwritten by an already existing <code>transaction</code> with initialValue 1;</p>\n<p>The following should work now:</p>\n<pre><code>@PostMapping(&quot;/updateIncome/{transactionId}&quot;)\npublic String updateIncome(@PathVariable(value = &quot;transactionId&quot;) long transactionId, @Valid Transaction transaction, BindingResult result, Model model) {\n\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n    UserDetailsImpl user = (UserDetailsImpl) authentication.getPrincipal();\n    long userId = user.getId();\n\n    boolean thereAreErrors = result.hasErrors();\n    if (thereAreErrors) {\n        model.addAttribute(&quot;incomeCategories&quot;, IncomeCategories.values());\n        return &quot;income_transaction&quot;;\n    }\n\n    transactionService.updateIncome(transaction, transactionId);\n    return &quot;redirect:/api/wallet/userWallet/balance/&quot; + userId;\n}\n\n\n@Override\npublic void updateIncome(Transaction transaction, Long transactionId) {\n    Transaction existingTransactionInDb = getTransactionById(transactionId);\n    double amount = transaction.getAmount();\n    System.out.println(transaction.getAmount());\n    existingTransactionInDb.getWallet().setInitialBalance(existingTransactionInDb.getWallet().getInitialBalance() + amount);\n    this.transactionRepository.save(existingTransactionInDb);\n}\n</code></pre>\n"}],"owner":{"account_id":27558404,"reputation":23,"user_id":21032025,"display_name":"Frosty Nah"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75580881,"answer_count":1,"score":-1,"last_activity_date":1677503245,"creation_date":1677500911,"question_id":75580502,"body_markdown":"I have two tables that are connected, `Wallets` and `Transaction`. Now, Each transaction is connected with wallet and this are entites:\r\n\r\n`Wallets:`\r\n\r\n    @Entity\r\n    @Table(name = &quot;wallet&quot;)\r\n    public class Wallet {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;wallet_id&quot;)\r\n    private Long id;\r\n\r\n    @NotBlank(message = &quot;Please, insert a wallet name&quot;)\r\n    private String walletName;\r\n\r\n    @NotNull(message = &quot;Please, insert a amount&quot;)\r\n    private Double initialBalance;\r\n\r\n    @Transient\r\n    private double totalBalance;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n    @JoinColumn(name = &quot;user_id&quot;, nullable = false, referencedColumnName = &quot;user_id&quot;, insertable = false, updatable = false)\r\n    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    @JsonIgnore\r\n    private User user;\r\n\r\n    @Column(name = &quot;user_id&quot;, nullable = false)\r\n    private Long userId;\r\n\r\n    @OneToMany(mappedBy = &quot;wallet&quot;, cascade = {\r\n            CascadeType.ALL})\r\n    private Set&lt;Transaction&gt; transactions;\r\n\r\n`Transactions:`\r\n\r\n    @Entity\r\n    @Table(name = &quot;transaction&quot;)\r\n    public class Transaction {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;transaction_id&quot;)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;user_id&quot;, nullable = false)\r\n    private Long userId;\r\n\r\n    @Column(name = &quot;wallet_name&quot;, nullable = false)\r\n    private String walletName;\r\n\r\n    @NotNull(message = &quot;Please, insert a amount&quot;)\r\n    @Min(value = 0, message = &quot;Please, insert a positive amount&quot;)\r\n    private Double amount;\r\n\r\n    private String note;\r\n\r\n    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n    @Column(name = &quot;date&quot;)\r\n    private LocalDate date;\r\n\r\n    @ManyToOne\r\n    @OnDelete(action = OnDeleteAction.NO_ACTION)\r\n    @JoinColumn(name = &quot;wallet_id&quot;, nullable = false)\r\n    private Wallet wallet;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;transaction_type&quot;, columnDefinition = &quot;ENUM(&#39;EXPENSE&#39;, &#39;INCOME&#39;)&quot;)\r\n    private TransactionType transactionType;\r\n\r\n    @Nullable\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;expense_categories&quot;, columnDefinition = &quot;ENUM(&#39;FOOD_AND_DRINK&#39;, &#39;SHOPPING&#39;, &#39;TRANSPORT&#39;, &#39;HOME&#39;,&quot; +\r\n            &quot; &#39;BILLS_AND_FEES&#39;, &#39;ENTERTAINMENT&#39;, &#39;CAR&#39;, &#39;TRAVEL&#39;, &#39;FAMILY_AND_PERSONAL&#39;, &#39;HEALTHCARE&#39;,&quot; +\r\n            &quot; &#39;EDUCATION&#39;, &#39;GROCERIES&#39;, &#39;GIFTS&#39;, &#39;BEAUTY&#39;, &#39;WORK&#39;, &#39;SPORTS_AND_HOBBIES&#39;, &#39;OTHER&#39;)&quot;)\r\n    private ExpenseCategories expenseCategories;\r\n\r\n    @Nullable\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;income_categories&quot;, columnDefinition = &quot;ENUM(&#39;SALARY&#39;, &#39;BUSINESS&#39;, &#39;GIFTS&#39;, &#39;EXTRA_INCOME&#39;, &#39;LOAN&#39;, &#39;PARENTAL_LEAVE&#39;, &#39;INSURANCE_PAYOUT&#39;, &#39;OTHER&#39;)&quot;)\r\n    private IncomeCategories incomeCategories;\r\n\r\nThis is service to update table:\r\n\r\n    @Override\r\n    public void updateIncome(Transaction transaction, Long transactionId) {\r\n        transaction = getTransactionById(transactionId);\r\n        double amount = transaction.getAmount();\r\n        System.out.println(transaction.getAmount());\r\n        transaction.getWallet().setInitialBalance(transaction.getWallet().getInitialBalance() + amount);\r\n        this.transactionRepository.save(transaction);\r\n    }\r\n\r\nThis is `controller:`\r\n\r\n      @PostMapping(&quot;/updateIncome/{transactionId}&quot;)\r\n    public String updateIncome(@PathVariable(value = &quot;transactionId&quot;) long transactionId, @Valid Transaction transaction, BindingResult result, Model model) {\r\n\r\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n        UserDetailsImpl user = (UserDetailsImpl) authentication.getPrincipal();\r\n        long userId = user.getId();\r\n\r\n        transaction = transactionService.getTransactionById(transactionId);\r\n\r\n        boolean thereAreErrors = result.hasErrors();\r\n        if (thereAreErrors) {\r\n            model.addAttribute(&quot;incomeCategories&quot;, IncomeCategories.values());\r\n            return &quot;income_transaction&quot;;\r\n        }\r\n\r\n        transactionService.updateIncome(transaction, transactionId);\r\n        return &quot;redirect:/api/wallet/userWallet/balance/&quot; + userId;\r\n    }\r\n\r\nAnd what is the problem?\r\n\r\nYou see here:\r\n\r\n     double amount = transaction.getAmount();\r\n     System.out.println(transaction.getAmount());\r\n\r\nThat is now `1` because initally transaction is created and amount is set to `1`, but when I open the page and change amount field to `15` for example so I&#39;m actually updating it there, and submit form its still `1` and here `transaction.getWallet().setInitialBalance(transaction.getWallet().getInitialBalance() + amount);` is also `+ 1 (1 as amount)` instead of `15` as a new value because I&#39;m updating it.\r\n\r\nWhat Im doing wrong? I&#39;m trying to update transaction data by Id that is related to wallet but have trouble","title":"Value is always same when try to update data from table","body":"<p>I have two tables that are connected, <code>Wallets</code> and <code>Transaction</code>. Now, Each transaction is connected with wallet and this are entites:</p>\n<p><code>Wallets:</code></p>\n<pre><code>@Entity\n@Table(name = &quot;wallet&quot;)\npublic class Wallet {\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name = &quot;wallet_id&quot;)\nprivate Long id;\n\n@NotBlank(message = &quot;Please, insert a wallet name&quot;)\nprivate String walletName;\n\n@NotNull(message = &quot;Please, insert a amount&quot;)\nprivate Double initialBalance;\n\n@Transient\nprivate double totalBalance;\n\n@ManyToOne(fetch = FetchType.LAZY, optional = false)\n@JoinColumn(name = &quot;user_id&quot;, nullable = false, referencedColumnName = &quot;user_id&quot;, insertable = false, updatable = false)\n@OnDelete(action = OnDeleteAction.CASCADE)\n@JsonIgnore\nprivate User user;\n\n@Column(name = &quot;user_id&quot;, nullable = false)\nprivate Long userId;\n\n@OneToMany(mappedBy = &quot;wallet&quot;, cascade = {\n        CascadeType.ALL})\nprivate Set&lt;Transaction&gt; transactions;\n</code></pre>\n<p><code>Transactions:</code></p>\n<pre><code>@Entity\n@Table(name = &quot;transaction&quot;)\npublic class Transaction {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name = &quot;transaction_id&quot;)\nprivate Long id;\n\n@Column(name = &quot;user_id&quot;, nullable = false)\nprivate Long userId;\n\n@Column(name = &quot;wallet_name&quot;, nullable = false)\nprivate String walletName;\n\n@NotNull(message = &quot;Please, insert a amount&quot;)\n@Min(value = 0, message = &quot;Please, insert a positive amount&quot;)\nprivate Double amount;\n\nprivate String note;\n\n@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\n@Column(name = &quot;date&quot;)\nprivate LocalDate date;\n\n@ManyToOne\n@OnDelete(action = OnDeleteAction.NO_ACTION)\n@JoinColumn(name = &quot;wallet_id&quot;, nullable = false)\nprivate Wallet wallet;\n\n@Enumerated(EnumType.STRING)\n@Column(name = &quot;transaction_type&quot;, columnDefinition = &quot;ENUM('EXPENSE', 'INCOME')&quot;)\nprivate TransactionType transactionType;\n\n@Nullable\n@Enumerated(EnumType.STRING)\n@Column(name = &quot;expense_categories&quot;, columnDefinition = &quot;ENUM('FOOD_AND_DRINK', 'SHOPPING', 'TRANSPORT', 'HOME',&quot; +\n        &quot; 'BILLS_AND_FEES', 'ENTERTAINMENT', 'CAR', 'TRAVEL', 'FAMILY_AND_PERSONAL', 'HEALTHCARE',&quot; +\n        &quot; 'EDUCATION', 'GROCERIES', 'GIFTS', 'BEAUTY', 'WORK', 'SPORTS_AND_HOBBIES', 'OTHER')&quot;)\nprivate ExpenseCategories expenseCategories;\n\n@Nullable\n@Enumerated(EnumType.STRING)\n@Column(name = &quot;income_categories&quot;, columnDefinition = &quot;ENUM('SALARY', 'BUSINESS', 'GIFTS', 'EXTRA_INCOME', 'LOAN', 'PARENTAL_LEAVE', 'INSURANCE_PAYOUT', 'OTHER')&quot;)\nprivate IncomeCategories incomeCategories;\n</code></pre>\n<p>This is service to update table:</p>\n<pre><code>@Override\npublic void updateIncome(Transaction transaction, Long transactionId) {\n    transaction = getTransactionById(transactionId);\n    double amount = transaction.getAmount();\n    System.out.println(transaction.getAmount());\n    transaction.getWallet().setInitialBalance(transaction.getWallet().getInitialBalance() + amount);\n    this.transactionRepository.save(transaction);\n}\n</code></pre>\n<p>This is <code>controller:</code></p>\n<pre><code>  @PostMapping(&quot;/updateIncome/{transactionId}&quot;)\npublic String updateIncome(@PathVariable(value = &quot;transactionId&quot;) long transactionId, @Valid Transaction transaction, BindingResult result, Model model) {\n\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n    UserDetailsImpl user = (UserDetailsImpl) authentication.getPrincipal();\n    long userId = user.getId();\n\n    transaction = transactionService.getTransactionById(transactionId);\n\n    boolean thereAreErrors = result.hasErrors();\n    if (thereAreErrors) {\n        model.addAttribute(&quot;incomeCategories&quot;, IncomeCategories.values());\n        return &quot;income_transaction&quot;;\n    }\n\n    transactionService.updateIncome(transaction, transactionId);\n    return &quot;redirect:/api/wallet/userWallet/balance/&quot; + userId;\n}\n</code></pre>\n<p>And what is the problem?</p>\n<p>You see here:</p>\n<pre><code> double amount = transaction.getAmount();\n System.out.println(transaction.getAmount());\n</code></pre>\n<p>That is now <code>1</code> because initally transaction is created and amount is set to <code>1</code>, but when I open the page and change amount field to <code>15</code> for example so I'm actually updating it there, and submit form its still <code>1</code> and here <code>transaction.getWallet().setInitialBalance(transaction.getWallet().getInitialBalance() + amount);</code> is also <code>+ 1 (1 as amount)</code> instead of <code>15</code> as a new value because I'm updating it.</p>\n<p>What Im doing wrong? I'm trying to update transaction data by Id that is related to wallet but have trouble</p>\n"},{"tags":["java","spring","tomcat","tomcat9"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1677500849,"post_id":75580464,"comment_id":133343643,"body_markdown":"`jakarta.*` vs. `javax.*`","body":"<code>jakarta.*</code> vs. <code>javax.*</code>"},{"owner":{"account_id":19504668,"reputation":21,"user_id":14269959,"display_name":"Cheese"},"score":0,"creation_date":1677501190,"post_id":75580464,"comment_id":133343737,"body_markdown":"Idk why you downgraded my question? And youR comment doesn&#39;t explain much.","body":"Idk why you downgraded my question? And youR comment doesn&#39;t explain much."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1677501432,"post_id":75580464,"comment_id":133343797,"body_markdown":"from the  [tomcat 10 migration guide](https://tomcat.apache.org/migration-10.html) *The Java package has changed from javax.servlet to jakarta.servlet.* You import javax.servlet in your project. You have tochange the libraries","body":"from the  <a href=\"https://tomcat.apache.org/migration-10.html\" rel=\"nofollow noreferrer\">tomcat 10 migration guide</a> <i>The Java package has changed from javax.servlet to jakarta.servlet.</i> You import javax.servlet in your project. You have tochange the libraries"},{"owner":{"account_id":19504668,"reputation":21,"user_id":14269959,"display_name":"Cheese"},"score":0,"creation_date":1677501917,"post_id":75580464,"comment_id":133343928,"body_markdown":"I&#39;m using Tomcat 9 and I import javax.*, so it should work...","body":"I&#39;m using Tomcat 9 and I import javax.*, so it should work..."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1677501983,"post_id":75580464,"comment_id":133343944,"body_markdown":"You are mixing Spring 6 with Spring 5 jars. That isn&#39;t going to work. Either use all the same Spring 5 versions and use Tomcat 9 (JavaE) **or** use all Spring 6 versions and use Tomcat10 (JakartaEE). Currently you are mixing, which is always a bad idea.","body":"You are mixing Spring 6 with Spring 5 jars. That isn&#39;t going to work. Either use all the same Spring 5 versions and use Tomcat 9 (JavaE) <b>or</b> use all Spring 6 versions and use Tomcat10 (JakartaEE). Currently you are mixing, which is always a bad idea."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1677502005,"post_id":75580464,"comment_id":133343951,"body_markdown":"There must be one place where your project refer to jakartax. Can you please share the complete stacktrace?","body":"There must be one place where your project refer to jakartax. Can you please share the complete stacktrace?"},{"owner":{"account_id":19504668,"reputation":21,"user_id":14269959,"display_name":"Cheese"},"score":0,"creation_date":1677502525,"post_id":75580464,"comment_id":133344115,"body_markdown":"@M.Deinum That was the problem, now it works!","body":"@M.Deinum That was the problem, now it works!"}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677502783,"creation_date":1677502783,"answer_id":75580806,"question_id":75580464,"body_markdown":"The problem is your dependencies you are mixing jars from different versions of a framework. In this case the framework is Spring and you are mixing jars from version 5.3.25 and 6.0.5. Never mix jars from different versions of a framework (regardless the framework) as that is trouble waiting to happen. \r\n\r\nFix the versions to all match. \r\n\r\n**PRO-TIP:** Use the `dependencyManagement` section and import the Spring Framework BOM so you only need to define 1 version instead of for each module. \r\n\r\n```xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-mvc-demo&lt;/artifactId&gt;\r\n  &lt;packaging&gt;war&lt;/packaging&gt;\r\n  &lt;properties&gt;\r\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n  &lt;name&gt;spring-mvc-demo Maven Webapp&lt;/name&gt;\r\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n  &lt;dependencyManagement&gt;\r\n    &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-framework-bom&lt;/artifactId&gt;\r\n        &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;scope&gt;import&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n  &lt;/dependencyManagement&gt;\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;3.8.1&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-instrument&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-context-indexer&lt;/artifactId&gt;\r\n      &lt;scope&gt;optional&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-instrument&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-jms&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-messaging&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-r2dbc&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-webflux&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-websocket&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n      &lt;version&gt;4.0.0&lt;/version&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\r\n      &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;\r\n      &lt;version&gt;2.3.0&lt;/version&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  &lt;/dependencies&gt;\r\n  &lt;build&gt;\r\n    &lt;finalName&gt;spring-mvc-demo&lt;/finalName&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```","title":"java.lang.ClassNotFoundException: jakarta.servlet.ServletException: Spring MVC Web App","body":"<p>The problem is your dependencies you are mixing jars from different versions of a framework. In this case the framework is Spring and you are mixing jars from version 5.3.25 and 6.0.5. Never mix jars from different versions of a framework (regardless the framework) as that is trouble waiting to happen.</p>\n<p>Fix the versions to all match.</p>\n<p><strong>PRO-TIP:</strong> Use the <code>dependencyManagement</code> section and import the Spring Framework BOM so you only need to define 1 version instead of for each module.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-mvc-demo&lt;/artifactId&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;spring-mvc-demo Maven Webapp&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n  &lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-framework-bom&lt;/artifactId&gt;\n        &lt;version&gt;5.3.25&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n        &lt;scope&gt;import&lt;/scope&gt;\n      &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n  &lt;/dependencyManagement&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-instrument&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-context-indexer&lt;/artifactId&gt;\n      &lt;scope&gt;optional&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-instrument&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-jms&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-messaging&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-r2dbc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-webflux&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-websocket&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n      &lt;version&gt;4.0.0&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n      &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;\n      &lt;version&gt;2.3.0&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;finalName&gt;spring-mvc-demo&lt;/finalName&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"}],"owner":{"account_id":19504668,"reputation":21,"user_id":14269959,"display_name":"Cheese"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":872,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1677502783,"creation_date":1677500701,"question_id":75580464,"body_markdown":"I&#39;m developing a Spring MVC Web app, using Maven(Webapp archetype), Spring 5, Java 17 and Tomcat 9.0;\r\n\r\nWhen I&#39;m tryin&#39; to deploy my artefact, I get java.lang.ClassNotFoundException: jakarta.servlet.ServletException and I can&#39;t understand why, given the fact that I&#39;m using Tomcat 9.0 which makes use of javax packages.\r\n\r\nBut when I deploy on Tomcat 10.x, it is working perfectly fine.\r\n\r\nThis is my pom.xml:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-mvc-demo&lt;/artifactId&gt;\r\n      &lt;packaging&gt;war&lt;/packaging&gt;\r\n      &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n      &lt;/properties&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;spring-mvc-demo Maven Webapp&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-instrument&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context-support --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context-indexer --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-context-indexer&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n          &lt;scope&gt;optional&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-expression --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-instrument --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-instrument&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jms --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-jms&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-messaging --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-messaging&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-orm --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-oxm --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-r2dbc --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-r2dbc&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-test --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-tx --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-web --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webflux --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-webflux&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-websocket --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-websocket&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n          &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n          &lt;version&gt;4.0.0&lt;/version&gt;\r\n          &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\r\n          &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;\r\n          &lt;version&gt;2.3.0&lt;/version&gt;\r\n          &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n      &lt;/dependencies&gt;\r\n      &lt;build&gt;\r\n        &lt;finalName&gt;spring-mvc-demo&lt;/finalName&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n","title":"java.lang.ClassNotFoundException: jakarta.servlet.ServletException: Spring MVC Web App","body":"<p>I'm developing a Spring MVC Web app, using Maven(Webapp archetype), Spring 5, Java 17 and Tomcat 9.0;</p>\n<p>When I'm tryin' to deploy my artefact, I get java.lang.ClassNotFoundException: jakarta.servlet.ServletException and I can't understand why, given the fact that I'm using Tomcat 9.0 which makes use of javax packages.</p>\n<p>But when I deploy on Tomcat 10.x, it is working perfectly fine.</p>\n<p>This is my pom.xml:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-mvc-demo&lt;/artifactId&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;spring-mvc-demo Maven Webapp&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-instrument&lt;/artifactId&gt;\n      &lt;version&gt;6.0.5&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context-support --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context-indexer --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-context-indexer&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n      &lt;scope&gt;optional&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-expression --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-instrument --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-instrument&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jms --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-jms&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-messaging --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-messaging&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-orm --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-oxm --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-r2dbc --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-r2dbc&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-test --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-tx --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-web --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n      &lt;version&gt;6.0.5&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webflux --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-webflux&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-websocket --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-websocket&lt;/artifactId&gt;\n      &lt;version&gt;5.3.25&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n      &lt;version&gt;4.0.0&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n      &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;\n      &lt;version&gt;2.3.0&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;finalName&gt;spring-mvc-demo&lt;/finalName&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","jsoup"],"owner":{"account_id":25230704,"reputation":19,"user_id":19065902,"display_name":"Ganesh Mandapati"},"comment_count":0,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1677502539,"answer_count":0,"score":0,"last_activity_date":1677502359,"creation_date":1677501738,"question_id":75580626,"body_markdown":"```\r\nDocument doc = Jsoup.parse(body);\r\n\r\ndoc.selectFirst(&quot;head&quot;).child(0).before(&quot;&lt;meta charset=\\&quot;utf-8\\&quot;/&gt;&quot;);\r\n```\r\nIn final HTML It is coming like this \r\n\r\n```\r\n&lt;meta charset=&quot;utf-8&quot;&gt;\r\n\r\n```\r\nI&#39;m Expecting like this\r\n\r\n```\r\n&lt;meta charset=&quot;utf-8&quot; /&gt;.\r\n```","title":"Not able to add self closing tag to meta in jsoup","body":"<pre><code>Document doc = Jsoup.parse(body);\n\ndoc.selectFirst(&quot;head&quot;).child(0).before(&quot;&lt;meta charset=\\&quot;utf-8\\&quot;/&gt;&quot;);\n</code></pre>\n<p>In final HTML It is coming like this</p>\n<pre><code>&lt;meta charset=&quot;utf-8&quot;&gt;\n\n</code></pre>\n<p>I'm Expecting like this</p>\n<pre><code>&lt;meta charset=&quot;utf-8&quot; /&gt;.\n</code></pre>\n"},{"tags":["java","algorithm","sorting","quicksort"],"comments":[{"owner":{"account_id":17000499,"reputation":48417,"user_id":12299000,"display_name":"kaya3"},"score":2,"creation_date":1575649539,"post_id":59216784,"comment_id":104649652,"body_markdown":"*&quot;the array is not being properly sorted and the end is not decrementing&quot;* - how have you determined this? Give an example of an input, expected result and actual result. See [ask] and [mcve].","body":"<i>&quot;the array is not being properly sorted and the end is not decrementing&quot;</i> - how have you determined this? Give an example of an input, expected result and actual result. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":4503838,"reputation":955,"user_id":3661738,"display_name":"Tyler"},"score":0,"creation_date":1575649725,"post_id":59216784,"comment_id":104649734,"body_markdown":"The inner while loop (`while(a[start]&lt;=pivot)`) goes out of bounds in this example, because it does not get caught by the outer start&lt;end loop","body":"The inner while loop (<code>while(a[start]&lt;=pivot)</code>) goes out of bounds in this example, because it does not get caught by the outer start&lt;end loop"},{"owner":{"account_id":6136522,"reputation":76953,"user_id":4785185,"display_name":"Prune"},"score":0,"creation_date":1575658139,"post_id":59216784,"comment_id":104653027,"body_markdown":"Welcome to StackOverflow. See [minimal, reproducible example](https://stackoverflow.com/help/minimal-reproducible-example). We cannot effectively help you until you post your MRE code and accurately specify the problem. We should be able to paste your posted code into a text file and reproduce the problem you specified.","body":"Welcome to StackOverflow. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal, reproducible example</a>. We cannot effectively help you until you post your MRE code and accurately specify the problem. We should be able to paste your posted code into a text file and reproduce the problem you specified."}],"answers":[{"tags":[],"owner":{"account_id":14601312,"reputation":21,"user_id":10545665,"display_name":"user607464"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1575895787,"creation_date":1575895787,"answer_id":59249272,"question_id":59216784,"body_markdown":"        class QuickSort \r\n    { \r\n    \tint partition(int arr[], int low, int high) \r\n    \t{ \r\n    \t\tint pivot = arr[high]; \r\n    \t\tint i = (low-1); // index of smaller element \r\n    \t\tfor (int j=low; j&lt;high; j++) \r\n    \t\t{ \r\n    \t\t\t// If current element is smaller than the pivot \r\n    \t\t\tif (arr[j] &lt; pivot) \r\n    \t\t\t{ \r\n    \t\t\t\ti++; \r\n    \r\n    \t\t\t\t// swap arr[i] and arr[j] \r\n    \t\t\t\tint temp = arr[i]; \r\n    \t\t\t\tarr[i] = arr[j]; \r\n    \t\t\t\tarr[j] = temp; \r\n    \t\t\t} \r\n    \t\t} \r\n    \r\n    \t\t// swap arr[i+1] and arr[high] (or pivot) \r\n    \t\tint temp = arr[i+1]; \r\n    \t\tarr[i+1] = arr[high]; \r\n    \t\tarr[high] = temp; \r\n    \r\n    \t\treturn i+1; \r\n    \t} \r\n    \r\n    \tvoid sort(int arr[], int low, int high) \r\n    \t{ \r\n    \t\tif (low &lt; high) \r\n    \t\t{ \r\n    \t\t\t/* pi is partitioning index, arr[pi] is \r\n    \t\t\tnow at right place */\r\n    \t\t\tint pi = partition(arr, low, high); \r\n    \r\n    \t\t\t// Recursively sort elements before \r\n    \t\t\t// partition and after partition \r\n    \t\t\tsort(arr, low, pi-1); \r\n    \t\t\tsort(arr, pi+1, high); \r\n    \t\t} \r\n    \t} \r\n    \r\n    \t/* A utility function to print array of size n */\r\n    \tstatic void printArray(int arr[]) \r\n    \t{ \r\n    \t\tint n = arr.length; \r\n    \t\tfor (int i=0; i&lt;n; ++i) \r\n    \t\t\tSystem.out.print(arr[i]+&quot; &quot;); \r\n    \t\tSystem.out.println(); \r\n    \t} \r\n    \r\n    \t// Driver program \r\n    \tpublic static void main(String args[]) \r\n    \t{ \r\n    \t\tint arr[] = {4,5,6,3,10,12,45,17}; \r\n    \t\tint n = arr.length; \r\n    \r\n    \t\tQuickSort ob = new QuickSort(); \r\n    \t\tob.sort(arr, 0, n-1); \r\n    \r\n    \t\tSystem.out.println(&quot;sorted array&quot;); \r\n    \t\tprintArray(arr); \r\n    \t} \r\n    } \r\n\r\nOUTPUT:\r\nsorted array\r\n3 4 5 6 10 12 17 45\r\n\r\nthe above code works for the array you have defined you can use this code,If you still have confusing about quick sort you are free to ask in comments.\r\n\r\n","title":"quicksort code in java is not running properly?","body":"<pre><code>    class QuickSort \n{ \n    int partition(int arr[], int low, int high) \n    { \n        int pivot = arr[high]; \n        int i = (low-1); // index of smaller element \n        for (int j=low; j&lt;high; j++) \n        { \n            // If current element is smaller than the pivot \n            if (arr[j] &lt; pivot) \n            { \n                i++; \n\n                // swap arr[i] and arr[j] \n                int temp = arr[i]; \n                arr[i] = arr[j]; \n                arr[j] = temp; \n            } \n        } \n\n        // swap arr[i+1] and arr[high] (or pivot) \n        int temp = arr[i+1]; \n        arr[i+1] = arr[high]; \n        arr[high] = temp; \n\n        return i+1; \n    } \n\n    void sort(int arr[], int low, int high) \n    { \n        if (low &lt; high) \n        { \n            /* pi is partitioning index, arr[pi] is \n            now at right place */\n            int pi = partition(arr, low, high); \n\n            // Recursively sort elements before \n            // partition and after partition \n            sort(arr, low, pi-1); \n            sort(arr, pi+1, high); \n        } \n    } \n\n    /* A utility function to print array of size n */\n    static void printArray(int arr[]) \n    { \n        int n = arr.length; \n        for (int i=0; i&lt;n; ++i) \n            System.out.print(arr[i]+\" \"); \n        System.out.println(); \n    } \n\n    // Driver program \n    public static void main(String args[]) \n    { \n        int arr[] = {4,5,6,3,10,12,45,17}; \n        int n = arr.length; \n\n        QuickSort ob = new QuickSort(); \n        ob.sort(arr, 0, n-1); \n\n        System.out.println(\"sorted array\"); \n        printArray(arr); \n    } \n} \n</code></pre>\n\n<p>OUTPUT:\nsorted array\n3 4 5 6 10 12 17 45</p>\n\n<p>the above code works for the array you have defined you can use this code,If you still have confusing about quick sort you are free to ask in comments.</p>\n"},{"tags":[],"owner":{"account_id":26813232,"reputation":11,"user_id":20403505,"display_name":"Harshwardhan Deshmukh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677502314,"creation_date":1677502314,"answer_id":75580725,"question_id":59216784,"body_markdown":"In the partition function, along with the condition a[start]&lt;= pivot add the condition start&lt;=ub and in the a[end]&gt;pivot add the condition end&gt;=lb\r\nIt will not give  ArrayOutOfBounds error.\r\nThe above code works logic works fine in C but in java you require these 2 conditions in Java.","title":"quicksort code in java is not running properly?","body":"<p>In the partition function, along with the condition a[start]&lt;= pivot add the condition start&lt;=ub and in the a[end]&gt;pivot add the condition end&gt;=lb\nIt will not give  ArrayOutOfBounds error.\nThe above code works logic works fine in C but in java you require these 2 conditions in Java.</p>\n"}],"owner":{"account_id":16475846,"reputation":108,"user_id":11903852,"display_name":"Aquib Shaikh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":451,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1677502314,"creation_date":1575649239,"question_id":59216784,"body_markdown":"I am stuck on this from a while now... the array is not being properly sorted and the end is not decrementing can someone help out on what mistake I am exactly making here?\r\nI tried and looked for hours but cannot find the bug exactly. You can clearly see in the output that end is not decrementing and the sorting of the array is not proper as 17 is last and 45 is second last element. Also there is Error of ArrayOutOfBounds. \r\n\r\n\r\n\r\n\r\n\r\n\r\ncode:\r\n\r\n         public class Program{\r\n\r\n\t    public static void main(String[] args) {\r\n\t    int [] ar={4,5,6,3,10,12,45,17};\r\n\t    int l=0;\r\n\t    int h=ar.length-1;\r\n\t \r\n\t    quickSort(ar,l,h);\r\n\t    \r\n\t\t\r\n\t}\r\n\t\tstatic void quickSort(int [] arr,int lb,int ub){\r\n\t    int z;\r\n\t    if(lb&lt;ub){\r\n\t    z=partition(arr,lb,ub);\r\n\t    quickSort(arr,lb,z-1);\r\n\t    quickSort(arr,z+1,ub);\r\n\t    }\r\n\t    \r\n\t    for(int i=0;i&lt;arr.length;i++){\r\n\t        System.out.println(arr[i]);\r\n\t    }\r\n\t}\r\n\t\r\n\t\r\n\tstatic int partition(int [] a,int lb,int ub){\r\n\t    int pivot=a[lb];\r\n\t    int start=lb;\r\n\t    int end=ub;\r\n       //If I put end=ub-1 here then it shows index-1. \r\n       //so I have not options left to do that the Error is coming eitherway.\r\n\t    System.out.println(&quot;start is &quot;+start);\r\n\t    System.out.println(&quot;End is &quot;+end);\r\n\r\n\t    while(start&lt;end){\r\n\t        while(a[start]&lt;=pivot){\r\n\t            start++;\r\n\t        }\r\n\t        while(a[end]&gt;pivot){\r\n\t            end--;\r\n\t        }\r\n\t        if(start&lt;end){\r\n\t        int temp0=a[start];\r\n\t        int temp1=a[end];\r\n\t        a[start]=temp1;\r\n\t        a[end]=temp0;\r\n\t        }\r\n\r\n\t    }\r\n\t    \tint temp2=a[lb];\r\n\t        int temp3=a[end];\r\n\t        a[lb]=temp3;\r\n\t        a[end]=temp2;\r\n\t        return end;\r\n\t}\r\n    }\r\n\r\n    output:\r\n    start is 0\r\n    End is 7\r\n    3\r\n    4\r\n    6\r\n    5\r\n    10\r\n    12\r\n    45\r\n    17\r\n    start is 2\r\n    End is 7\r\n    3\r\n    4\r\n    5\r\n    6\r\n    10\r\n    12\r\n    45\r\n    17\r\n    start is 4\r\n    End is 7\r\n    3\r\n    4\r\n    5\r\n    6\r\n    10\r\n    12\r\n    45\r\n    17\r\n    start is 5\r\n    End is 7\r\n    3\r\n    4\r\n    5\r\n    6\r\n    10\r\n    12\r\n    45\r\n    17\r\n    start is 6\r\n    End is 7\r\n    \r\n    \r\n    Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: Index 8 out of bounds for length 8\r\n    \tat Program.partition(Program.java:35)\r\n    \tat Program.quickSort(Program.java:16)\r\n    \tat Program.quickSort(Program.java:18)\r\n    \tat Program.quickSort(Program.java:18)\r\n    \tat Program.quickSort(Program.java:18)\r\n    \tat Program.quickSort(Program.java:18)\r\n    \tat Program.main(Program.java:9)\r\n\t \r\n\t    \r\n\r\n\r\n","title":"quicksort code in java is not running properly?","body":"<p>I am stuck on this from a while now... the array is not being properly sorted and the end is not decrementing can someone help out on what mistake I am exactly making here?\nI tried and looked for hours but cannot find the bug exactly. You can clearly see in the output that end is not decrementing and the sorting of the array is not proper as 17 is last and 45 is second last element. Also there is Error of ArrayOutOfBounds. </p>\n\n<p>code:</p>\n\n<pre><code>     public class Program{\n\n    public static void main(String[] args) {\n    int [] ar={4,5,6,3,10,12,45,17};\n    int l=0;\n    int h=ar.length-1;\n\n    quickSort(ar,l,h);\n\n\n}\n    static void quickSort(int [] arr,int lb,int ub){\n    int z;\n    if(lb&lt;ub){\n    z=partition(arr,lb,ub);\n    quickSort(arr,lb,z-1);\n    quickSort(arr,z+1,ub);\n    }\n\n    for(int i=0;i&lt;arr.length;i++){\n        System.out.println(arr[i]);\n    }\n}\n\n\nstatic int partition(int [] a,int lb,int ub){\n    int pivot=a[lb];\n    int start=lb;\n    int end=ub;\n   //If I put end=ub-1 here then it shows index-1. \n   //so I have not options left to do that the Error is coming eitherway.\n    System.out.println(\"start is \"+start);\n    System.out.println(\"End is \"+end);\n\n    while(start&lt;end){\n        while(a[start]&lt;=pivot){\n            start++;\n        }\n        while(a[end]&gt;pivot){\n            end--;\n        }\n        if(start&lt;end){\n        int temp0=a[start];\n        int temp1=a[end];\n        a[start]=temp1;\n        a[end]=temp0;\n        }\n\n    }\n        int temp2=a[lb];\n        int temp3=a[end];\n        a[lb]=temp3;\n        a[end]=temp2;\n        return end;\n}\n}\n\noutput:\nstart is 0\nEnd is 7\n3\n4\n6\n5\n10\n12\n45\n17\nstart is 2\nEnd is 7\n3\n4\n5\n6\n10\n12\n45\n17\nstart is 4\nEnd is 7\n3\n4\n5\n6\n10\n12\n45\n17\nstart is 5\nEnd is 7\n3\n4\n5\n6\n10\n12\n45\n17\nstart is 6\nEnd is 7\n\n\nException in thread \"main\" java.lang.ArrayIndexOutOfBoundsException: Index 8 out of bounds for length 8\n    at Program.partition(Program.java:35)\n    at Program.quickSort(Program.java:16)\n    at Program.quickSort(Program.java:18)\n    at Program.quickSort(Program.java:18)\n    at Program.quickSort(Program.java:18)\n    at Program.quickSort(Program.java:18)\n    at Program.main(Program.java:9)\n</code></pre>\n"},{"tags":["java","http","web-services","http-status-code-401","dynamics-business-central"],"answers":[{"comments":[{"owner":{"account_id":21497696,"reputation":15,"user_id":15842461,"display_name":"MTM"},"score":0,"creation_date":1621500135,"post_id":67598279,"comment_id":119516319,"body_markdown":"Thanks for replying.\nI already created the key and tested it with postman, accessing with the Authentication on the header manually. It works.\nThe problem is that it doesn&#39;t work on my code, and I don&#39;t know if I am missing anything.\nThank you!","body":"Thanks for replying. I already created the key and tested it with postman, accessing with the Authentication on the header manually. It works. The problem is that it doesn&#39;t work on my code, and I don&#39;t know if I am missing anything. Thank you!"},{"owner":{"account_id":21497696,"reputation":15,"user_id":15842461,"display_name":"MTM"},"score":0,"creation_date":1622193336,"post_id":67598279,"comment_id":119727278,"body_markdown":"Yes I am really sorry that I didn&#39;t put the code correctly, as I&#39;ve tried already so many things, I didn&#39;t change it... However, still didn&#39;t do the trick for it. You have my vote anyways","body":"Yes I am really sorry that I didn&#39;t put the code correctly, as I&#39;ve tried already so many things, I didn&#39;t change it... However, still didn&#39;t do the trick for it. You have my vote anyways"}],"tags":[],"owner":{"account_id":810469,"reputation":16247,"user_id":913935,"accept_rate":80,"display_name":"kaspermoerch"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621514104,"creation_date":1621407220,"answer_id":67598279,"question_id":67582919,"body_markdown":"You need to make sure that the user you are trying to authenticate with has a Web Services Access Key.\r\n\r\nThen you must use the Web Services Access Key as the password when authenticating.\r\n\r\n----------\r\n\r\nIt does also appear that you are missing a `space` after `Basic` in this line of code:\r\n\r\n    hd.addHeader(&quot;Authorization&quot;, &quot;Basic&quot; + authEncBytes);\r\n\r\nIt should probably be\r\n\r\n    hd.addHeader(&quot;Authorization&quot;, &quot;Basic &quot; + authEncBytes);","title":"How can I consume web service from business central (Java)?","body":"<p>You need to make sure that the user you are trying to authenticate with has a Web Services Access Key.</p>\n<p>Then you must use the Web Services Access Key as the password when authenticating.</p>\n<hr />\n<p>It does also appear that you are missing a <code>space</code> after <code>Basic</code> in this line of code:</p>\n<pre><code>hd.addHeader(&quot;Authorization&quot;, &quot;Basic&quot; + authEncBytes);\n</code></pre>\n<p>It should probably be</p>\n<pre><code>hd.addHeader(&quot;Authorization&quot;, &quot;Basic &quot; + authEncBytes);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21497696,"reputation":15,"user_id":15842461,"display_name":"MTM"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1622193394,"creation_date":1622193394,"answer_id":67736119,"question_id":67582919,"body_markdown":"**SOLUTION**\r\n\r\nOkay so after receiving a course, they told me that Basic Authorization is deprecated and they use now OAuth 2...\r\n\r\nThanks for replying\r\n\r\nGreetings","title":"How can I consume web service from business central (Java)?","body":"<p><strong>SOLUTION</strong></p>\n<p>Okay so after receiving a course, they told me that Basic Authorization is deprecated and they use now OAuth 2...</p>\n<p>Thanks for replying</p>\n<p>Greetings</p>\n"}],"owner":{"account_id":21497696,"reputation":15,"user_id":15842461,"display_name":"MTM"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":324,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":67736119,"answer_count":2,"score":-1,"last_activity_date":1677501830,"creation_date":1621327844,"question_id":67582919,"body_markdown":"I want to consume Business Central Web service so I can add it to an existing web application. \r\n\r\nI have tried:\r\n\r\n - Testing with Postman using Authorization header (works)\r\n - Testing SoapUI (works)\r\n\r\nBut I am getting this error:\r\n\r\n     com.sun.xml.messaging.saaj.client.p2p.HttpSOAPConnection post\r\n    SEVERE: SAAJ0008: Bad Response; Unauthorized\r\n    Exception in thread &quot;main&quot; com.sun.xml.messaging.saaj.SOAPExceptionImpl: java.security.PrivilegedActionException: com.sun.xml.messaging.saaj.SOAPExceptionImpl: Bad response: (401Unauthorized\r\n     at com.sun.xml.messaging.saaj.client.p2p.HttpSOAPConnection.call(HttpSOAPConnection.java:171)\r\n\r\n\r\nCode:\r\n\r\n```java\r\nString webPage = &quot;https://api.businesscentral.dynamics.com/v2.0/&lt;tenant&gt;/...&quot;;\r\nString name = &quot;username&quot;;\r\nString password = &quot;password&quot;;\r\nString authString = name + &quot;:&quot; + password;\r\n\r\nString authEncBytes = new String(Base64.getEncoder().encode(authString.getBytes(StandardCharsets.UTF_8)));\r\nString authStringEnc = new String(authEncBytes);\r\n\r\nURL url = new URL(webPage);\r\nURLConnection urlConnection = url.openConnection();\r\nurlConnection.setRequestProperty(&quot;Authorization&quot;, &quot;Basic &quot; + authStringEnc);\r\nMessageFactory messageFactory = MessageFactory.newInstance();\r\nSOAPMessage soapMessage = messageFactory.createMessage();\r\nSOAPPart soapPart = soapMessage.getSOAPPart();\r\n\r\n// SOAP Envelope\r\nSOAPEnvelope envelope = soapPart.getEnvelope();\r\nenvelope.getHeader().detachNode();\r\nenvelope.addHeader();\r\nMimeHeaders hd = soapMessage.getMimeHeaders();\r\nhd.addHeader(&quot;Authorization&quot;, &quot;Basic &quot; + authEncBytes);\r\nSOAPBody soapBodytxaber = envelope.getBody();\r\nenvelope.addNamespaceDeclaration(&quot;myNamespace&quot;, &quot;uri&quot;);\r\nSOAPElement soapBodyElem0txa = soapBodytxaber.addChildElement(&quot;Read&quot;, &quot;myNamespace&quot;);\r\nSOAPElement soapBodyElem1txa = soapBodyElem0txa.addChildElement(&quot;No&quot;, &quot;myNamespace&quot;);\r\nsoapBodyElem1txa.addTextNode(&quot;00000058&quot;);\r\n\r\nSOAPConnectionFactory soapConnectionFactory = OAPConnectionFactory.newInstance();\r\nSOAPConnection soapConnection = soapConnectionFactory.createConnection();\r\nsoapMessage.saveChanges();\r\n\r\nSOAPMessage soapResponse = soapConnection.call(soapMessage, url);\r\n```\r\n","title":"How can I consume web service from business central (Java)?","body":"<p>I want to consume Business Central Web service so I can add it to an existing web application.</p>\n<p>I have tried:</p>\n<ul>\n<li>Testing with Postman using Authorization header (works)</li>\n<li>Testing SoapUI (works)</li>\n</ul>\n<p>But I am getting this error:</p>\n<pre><code> com.sun.xml.messaging.saaj.client.p2p.HttpSOAPConnection post\nSEVERE: SAAJ0008: Bad Response; Unauthorized\nException in thread &quot;main&quot; com.sun.xml.messaging.saaj.SOAPExceptionImpl: java.security.PrivilegedActionException: com.sun.xml.messaging.saaj.SOAPExceptionImpl: Bad response: (401Unauthorized\n at com.sun.xml.messaging.saaj.client.p2p.HttpSOAPConnection.call(HttpSOAPConnection.java:171)\n</code></pre>\n<p>Code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String webPage = &quot;https://api.businesscentral.dynamics.com/v2.0/&lt;tenant&gt;/...&quot;;\nString name = &quot;username&quot;;\nString password = &quot;password&quot;;\nString authString = name + &quot;:&quot; + password;\n\nString authEncBytes = new String(Base64.getEncoder().encode(authString.getBytes(StandardCharsets.UTF_8)));\nString authStringEnc = new String(authEncBytes);\n\nURL url = new URL(webPage);\nURLConnection urlConnection = url.openConnection();\nurlConnection.setRequestProperty(&quot;Authorization&quot;, &quot;Basic &quot; + authStringEnc);\nMessageFactory messageFactory = MessageFactory.newInstance();\nSOAPMessage soapMessage = messageFactory.createMessage();\nSOAPPart soapPart = soapMessage.getSOAPPart();\n\n// SOAP Envelope\nSOAPEnvelope envelope = soapPart.getEnvelope();\nenvelope.getHeader().detachNode();\nenvelope.addHeader();\nMimeHeaders hd = soapMessage.getMimeHeaders();\nhd.addHeader(&quot;Authorization&quot;, &quot;Basic &quot; + authEncBytes);\nSOAPBody soapBodytxaber = envelope.getBody();\nenvelope.addNamespaceDeclaration(&quot;myNamespace&quot;, &quot;uri&quot;);\nSOAPElement soapBodyElem0txa = soapBodytxaber.addChildElement(&quot;Read&quot;, &quot;myNamespace&quot;);\nSOAPElement soapBodyElem1txa = soapBodyElem0txa.addChildElement(&quot;No&quot;, &quot;myNamespace&quot;);\nsoapBodyElem1txa.addTextNode(&quot;00000058&quot;);\n\nSOAPConnectionFactory soapConnectionFactory = OAPConnectionFactory.newInstance();\nSOAPConnection soapConnection = soapConnectionFactory.createConnection();\nsoapMessage.saveChanges();\n\nSOAPMessage soapResponse = soapConnection.call(soapMessage, url);\n</code></pre>\n"},{"tags":["java","oracle","date"],"answers":[{"comments":[{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1677501836,"post_id":75577803,"comment_id":133343901,"body_markdown":"*&quot;All this has been covered many times on Stack Overflow&quot;* and yet there&#39;s no duplicate? Either close as dupe, or if there is none then remove this statement. It makes indeed no sense to repeat the same thing over and over.","body":"<i>&quot;All this has been covered many times on Stack Overflow&quot;</i> and yet there&#39;s no duplicate? Either close as dupe, or if there is none then remove this statement. It makes indeed no sense to repeat the same thing over and over."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677488054,"creation_date":1677483401,"answer_id":75577803,"question_id":75577203,"body_markdown":"# Avoid legacy classes\r\n\r\nNever use either `Date` class. Both are part of the terrible date-time legacy classes that were years ago supplanted by the modern *java.time* classes defined in JSR 310.\r\n\r\n# `LocalDate`\r\n\r\nFor a date-only value, use `LocalDate` class.\r\n\r\nYour input string complies with the “basic” variation of the [ISO 8601][1] standard format, YYYYMMDD. So use the predefined formatter, [`DateTimeFormatter.BASIC_ISO_DATE`][2].\r\n\r\n    String input = &quot;19990715&quot; ;\r\n    LocalDate birthDate = LocalDate.parse( input , DateTimeFormatter.BASIC_ISO_DATE ) ;\r\n\r\nWrite your SQL like the following. \r\n\r\nTip: Use trailing underscore in all your database naming to avoid collision with reserved keywords. The SQL standard promises explicitly to never use a trailing underscore. See [this Answer](https://stackoverflow.com/a/67351829/642706) by me.\r\n\r\nAnother tip: Use [text blocks][3] for your embedded SQL code.\r\n\r\n```java\r\nString sql  =\r\n        &quot;&quot;&quot;\r\n        INSERT INTO member_ ( id_ , birth_date_ ) \r\n        VALUES ( ? , ? ) \r\n        ;\r\n        &quot;&quot;&quot;;\r\n```\r\n\r\nExchange the `LocalDate` object for writing to database.\r\n\r\n    myPreparedStatement.setObject( 2 , birthDate ) ;\r\n\r\nWhen retrieving the data value from the database.\r\n\r\n    LocalDate birthDate = myResultSet.getObject( … , LocalDate.class ) ;\r\n\r\nAll this has been covered many times on Stack Overflow. Search to learn more. You will find complete source code for example apps that create a table, insert rows, and retrieve rows.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/ISO_8601\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/format/DateTimeFormatter.html#BASIC_ISO_DATE\r\n  [3]: https://openjdk.org/jeps/378","title":"How to insert a String into Oracle as a date type","body":"<h1>Avoid legacy classes</h1>\n<p>Never use either <code>Date</code> class. Both are part of the terrible date-time legacy classes that were years ago supplanted by the modern <em>java.time</em> classes defined in JSR 310.</p>\n<h1><code>LocalDate</code></h1>\n<p>For a date-only value, use <code>LocalDate</code> class.</p>\n<p>Your input string complies with the “basic” variation of the <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> standard format, YYYYMMDD. So use the predefined formatter, <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/format/DateTimeFormatter.html#BASIC_ISO_DATE\" rel=\"nofollow noreferrer\"><code>DateTimeFormatter.BASIC_ISO_DATE</code></a>.</p>\n<pre><code>String input = &quot;19990715&quot; ;\nLocalDate birthDate = LocalDate.parse( input , DateTimeFormatter.BASIC_ISO_DATE ) ;\n</code></pre>\n<p>Write your SQL like the following.</p>\n<p>Tip: Use trailing underscore in all your database naming to avoid collision with reserved keywords. The SQL standard promises explicitly to never use a trailing underscore. See <a href=\"https://stackoverflow.com/a/67351829/642706\">this Answer</a> by me.</p>\n<p>Another tip: Use <a href=\"https://openjdk.org/jeps/378\" rel=\"nofollow noreferrer\">text blocks</a> for your embedded SQL code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String sql  =\n        &quot;&quot;&quot;\n        INSERT INTO member_ ( id_ , birth_date_ ) \n        VALUES ( ? , ? ) \n        ;\n        &quot;&quot;&quot;;\n</code></pre>\n<p>Exchange the <code>LocalDate</code> object for writing to database.</p>\n<pre><code>myPreparedStatement.setObject( 2 , birthDate ) ;\n</code></pre>\n<p>When retrieving the data value from the database.</p>\n<pre><code>LocalDate birthDate = myResultSet.getObject( … , LocalDate.class ) ;\n</code></pre>\n<p>All this has been covered many times on Stack Overflow. Search to learn more. You will find complete source code for example apps that create a table, insert rows, and retrieve rows.</p>\n"}],"owner":{"account_id":27887655,"reputation":1,"user_id":21294714,"display_name":"gm4"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677501684,"creation_date":1677477818,"question_id":75577203,"body_markdown":"I have a birthdate as string\r\n\r\n```\r\nString memBirthDate = &quot;19990715&quot;;\r\n```\r\n\r\nand I tried to insert this into oracle by using query below.\r\n\r\n```\r\n&lt;entry key=&quot;insertMember&quot;&gt;\r\n\tINSERT INTO MEMBER\r\n          (\r\n       MEM_BIRTHDATE\r\n           )\r\n      VALUES (\r\n            (TO_DATE)?\r\n             )\r\n           &lt;/entry&gt;\r\n```\r\n\r\nBut it doesn&#39;t work.  I think there&#39;s some problem in my oracle query but I&#39;m not sure.\r\n\r\nWhat should I do?\r\n","title":"How to insert a String into Oracle as a date type","body":"<p>I have a birthdate as string</p>\n<pre><code>String memBirthDate = &quot;19990715&quot;;\n</code></pre>\n<p>and I tried to insert this into oracle by using query below.</p>\n<pre><code>&lt;entry key=&quot;insertMember&quot;&gt;\n    INSERT INTO MEMBER\n          (\n       MEM_BIRTHDATE\n           )\n      VALUES (\n            (TO_DATE)?\n             )\n           &lt;/entry&gt;\n</code></pre>\n<p>But it doesn't work.  I think there's some problem in my oracle query but I'm not sure.</p>\n<p>What should I do?</p>\n"},{"tags":["java","tomcat","java-11","tomcat9"],"comments":[{"owner":{"account_id":5718675,"reputation":1905,"user_id":4517895,"accept_rate":69,"display_name":"Mikhail Chibel"},"score":1,"creation_date":1659670393,"post_id":73231054,"comment_id":129354397,"body_markdown":"I have similar issues in Wildfly 16, exactly after upgrading to 11.0.16.","body":"I have similar issues in Wildfly 16, exactly after upgrading to 11.0.16."},{"owner":{"account_id":310261,"reputation":21,"user_id":623144,"display_name":"zezuha"},"score":0,"creation_date":1660233056,"post_id":73231054,"comment_id":129489702,"body_markdown":"It is very likely that the answer is here: https://stackoverflow.com/a/71585718/623144","body":"It is very likely that the answer is here: <a href=\"https://stackoverflow.com/a/71585718/623144\">stackoverflow.com/a/71585718/623144</a>"}],"answers":[{"comments":[{"owner":{"account_id":19812774,"reputation":83,"user_id":14511185,"display_name":"Hitesh Kirtane"},"score":0,"creation_date":1664496820,"post_id":73876858,"comment_id":130491402,"body_markdown":"Thanks for the information. I see the new patch with JDK version 11.0.16.1 has been released for JDK now, so I guess we can use this JDK version to get this issue resolved.","body":"Thanks for the information. I see the new patch with JDK version 11.0.16.1 has been released for JDK now, so I guess we can use this JDK version to get this issue resolved."}],"tags":[],"owner":{"account_id":16357633,"reputation":21,"user_id":11814223,"display_name":"Kritarth Bisht"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664345232,"creation_date":1664345232,"answer_id":73876858,"question_id":73231054,"body_markdown":"The error is from the java side, as in jdk-11.0.16 they have made some changes in cgroups metric calls. As the Cgroups detection logic used JDK-11.0.16 not right on systems which support cgroups v1, but don&#39;t have controllers mounted on a cgroups v1 hierarchy. This issue will be resolved in jdk-11.0.17.","title":"Tomcat Exception: java.lang.reflect.InvocationTargetException after jdk uplift from 11.0.15.1 to 11.0.16","body":"<p>The error is from the java side, as in jdk-11.0.16 they have made some changes in cgroups metric calls. As the Cgroups detection logic used JDK-11.0.16 not right on systems which support cgroups v1, but don't have controllers mounted on a cgroups v1 hierarchy. This issue will be resolved in jdk-11.0.17.</p>\n"}],"owner":{"account_id":16357633,"reputation":21,"user_id":11814223,"display_name":"Kritarth Bisht"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1234,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73876858,"answer_count":1,"score":1,"last_activity_date":1677501272,"creation_date":1659593446,"question_id":73231054,"body_markdown":"While uplifting the jdk from 11.0.15.1 to 11.0.16 facing following error in the tomcat logs.\r\n**For 11.0.15.1 the tomcat (9.0.65) was working fine with no jdk related error.**\r\n\r\n```Exception in thread &quot;main&quot; java.lang.InternalError: java.lang.reflect.InvocationTargetException\r\n        at java.base/jdk.internal.platform.Metrics.systemMetrics(Metrics.java:67)\r\n        at java.base/jdk.internal.platform.Container.metrics(Container.java:43)\r\n        at jdk.management/com.sun.management.internal.OperatingSystemImpl.&lt;init&gt;(OperatingSystemImpl.java:182)\r\n        at jdk.management/com.sun.management.internal.PlatformMBeanProviderImpl.getOperatingSystemMXBean(PlatformMBeanProviderImpl.java:281)\r\n        at jdk.management/com.sun.management.internal.PlatformMBeanProviderImpl$3.nameToMBeanMap(PlatformMBeanProviderImpl.java:198)\r\n        at java.management/java.lang.management.ManagementFactory.lambda$getPlatformMBeanServer$0(ManagementFactory.java:487)\r\n        at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:271)\r\n        at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\r\n        at java.base/java.util.HashMap$ValueSpliterator.forEachRemaining(HashMap.java:1692)\r\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n        at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n        at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)\r\n        at java.management/java.lang.management.ManagementFactory.getPlatformMBeanServer(ManagementFactory.java:488)\r\n        at org.apache.tomcat.util.modeler.Registry.getMBeanServer(Registry.java:463)\r\n        at org.apache.catalina.util.LifecycleMBeanBase.initInternal(LifecycleMBeanBase.java:55)\r\n        at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:997)\r\n        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:136)\r\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:724)\r\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:746)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:305)\r\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:475)\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n        at java.base/jdk.internal.platform.Metrics.systemMetrics(Metrics.java:63)\r\n        ... 27 more\r\nCaused by: java.lang.ExceptionInInitializerError\r\n        at java.base/jdk.internal.platform.CgroupSubsystemFactory.create(CgroupSubsystemFactory.java:94)\r\n        at java.base/jdk.internal.platform.CgroupMetrics.getInstance(CgroupMetrics.java:167)\r\n        ... 32 more\r\nCaused by: java.lang.ArrayIndexOutOfBoundsException: Index 4 out of bounds for length 1\r\n        at java.base/jdk.internal.platform.cgroupv2.CgroupV2Subsystem.initSubsystem(CgroupV2Subsystem.java:72)\r\n        at java.base/jdk.internal.platform.cgroupv2.CgroupV2Subsystem.&lt;clinit&gt;(CgroupV2Subsystem.java:43)\r\n        ... 34 more\r\n```\r\nCan someone please tell how to resolve the same?","title":"Tomcat Exception: java.lang.reflect.InvocationTargetException after jdk uplift from 11.0.15.1 to 11.0.16","body":"<p>While uplifting the jdk from 11.0.15.1 to 11.0.16 facing following error in the tomcat logs.\n<strong>For 11.0.15.1 the tomcat (9.0.65) was working fine with no jdk related error.</strong></p>\n<pre><code>        at java.base/jdk.internal.platform.Metrics.systemMetrics(Metrics.java:67)\n        at java.base/jdk.internal.platform.Container.metrics(Container.java:43)\n        at jdk.management/com.sun.management.internal.OperatingSystemImpl.&lt;init&gt;(OperatingSystemImpl.java:182)\n        at jdk.management/com.sun.management.internal.PlatformMBeanProviderImpl.getOperatingSystemMXBean(PlatformMBeanProviderImpl.java:281)\n        at jdk.management/com.sun.management.internal.PlatformMBeanProviderImpl$3.nameToMBeanMap(PlatformMBeanProviderImpl.java:198)\n        at java.management/java.lang.management.ManagementFactory.lambda$getPlatformMBeanServer$0(ManagementFactory.java:487)\n        at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:271)\n        at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\n        at java.base/java.util.HashMap$ValueSpliterator.forEachRemaining(HashMap.java:1692)\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n        at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\n        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n        at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)\n        at java.management/java.lang.management.ManagementFactory.getPlatformMBeanServer(ManagementFactory.java:488)\n        at org.apache.tomcat.util.modeler.Registry.getMBeanServer(Registry.java:463)\n        at org.apache.catalina.util.LifecycleMBeanBase.initInternal(LifecycleMBeanBase.java:55)\n        at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:997)\n        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:136)\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:724)\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:746)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:305)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:475)\nCaused by: java.lang.reflect.InvocationTargetException\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at java.base/jdk.internal.platform.Metrics.systemMetrics(Metrics.java:63)\n        ... 27 more\nCaused by: java.lang.ExceptionInInitializerError\n        at java.base/jdk.internal.platform.CgroupSubsystemFactory.create(CgroupSubsystemFactory.java:94)\n        at java.base/jdk.internal.platform.CgroupMetrics.getInstance(CgroupMetrics.java:167)\n        ... 32 more\nCaused by: java.lang.ArrayIndexOutOfBoundsException: Index 4 out of bounds for length 1\n        at java.base/jdk.internal.platform.cgroupv2.CgroupV2Subsystem.initSubsystem(CgroupV2Subsystem.java:72)\n        at java.base/jdk.internal.platform.cgroupv2.CgroupV2Subsystem.&lt;clinit&gt;(CgroupV2Subsystem.java:43)\n        ... 34 more\n</code></pre>\n<p>Can someone please tell how to resolve the same?</p>\n"},{"tags":["java","spring","spring-boot","mariadb","flyway"],"answers":[{"comments":[{"owner":{"account_id":4487116,"reputation":429,"user_id":3649352,"accept_rate":67,"display_name":"Kunal Varpe"},"score":0,"creation_date":1671345518,"post_id":74838127,"comment_id":132077221,"body_markdown":"Do you have reference doc where above path changes are mentioned w.r.t spring boot version. I have checked the flyway, spring boot documentations and spring boot migrations documentation but nowhere able to find this change.","body":"Do you have reference doc where above path changes are mentioned w.r.t spring boot version. I have checked the flyway, spring boot documentations and spring boot migrations documentation but nowhere able to find this change."},{"owner":{"account_id":2101627,"reputation":3199,"user_id":1869090,"accept_rate":87,"display_name":"t777"},"score":0,"creation_date":1671463166,"post_id":74838127,"comment_id":132098687,"body_markdown":"@KunalVarpe It is NOT a spring boot 3 problem. It was a problem, that occurred while copying my spring boot 2.7 project to my spring boot 3 project.","body":"@KunalVarpe It is NOT a spring boot 3 problem. It was a problem, that occurred while copying my spring boot 2.7 project to my spring boot 3 project."},{"owner":{"account_id":2101627,"reputation":3199,"user_id":1869090,"accept_rate":87,"display_name":"t777"},"score":0,"creation_date":1671463365,"post_id":74838127,"comment_id":132098774,"body_markdown":"I have edited my answer to make the problem clearer","body":"I have edited my answer to make the problem clearer"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1671463859,"post_id":74838127,"comment_id":132098938,"body_markdown":"If the steps here resolve your problem, please accept your own answer instead of editing the title of the question","body":"If the steps here resolve your problem, please accept your own answer instead of editing the title of the question"},{"owner":{"account_id":2802711,"reputation":1786,"user_id":2410641,"accept_rate":95,"display_name":"ashu"},"score":1,"creation_date":1671466268,"post_id":74838127,"comment_id":132099818,"body_markdown":"Perhaps it is best to specify `spring.flyway.locations` in `application.properties` to avoid situations exactly like this one.","body":"Perhaps it is best to specify <code>spring.flyway.locations</code> in <code>application.properties</code> to avoid situations exactly like this one."},{"owner":{"account_id":2101627,"reputation":3199,"user_id":1869090,"accept_rate":87,"display_name":"t777"},"score":0,"creation_date":1671563966,"post_id":74838127,"comment_id":132125105,"body_markdown":"@cyberbrain I have done. (It takes some time until it is possible ;))","body":"@cyberbrain I have done. (It takes some time until it is possible ;))"}],"tags":[],"owner":{"account_id":2101627,"reputation":3199,"user_id":1869090,"accept_rate":87,"display_name":"t777"},"comment_count":6,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671463281,"creation_date":1671319129,"answer_id":74838127,"question_id":74838077,"body_markdown":"It was a folder problem:\r\n\r\n-&gt; My current folder-structure (file-system) of Spring Boot 2.7.6 project:\r\n`../src/main/resources/db/migration/`\r\n\r\n-&gt; My current folder-structure (file-system) of Spring Boot 3.0.0 project:\r\n`../src/main/resources/db.migration/`\r\n\r\nAfter setting the folder structure of the Spring Boot 3.0.0 project to the one of the Spring Boot 2.7.7 project, it works well, even with Spring Boot 3.0.0 :)\r\n\r\nSo, the problem, was not a spring boot migration problem, just a path problem.","title":"flyway migrations not found with spring boot 3","body":"<p>It was a folder problem:</p>\n<p>-&gt; My current folder-structure (file-system) of Spring Boot 2.7.6 project:\n<code>../src/main/resources/db/migration/</code></p>\n<p>-&gt; My current folder-structure (file-system) of Spring Boot 3.0.0 project:\n<code>../src/main/resources/db.migration/</code></p>\n<p>After setting the folder structure of the Spring Boot 3.0.0 project to the one of the Spring Boot 2.7.7 project, it works well, even with Spring Boot 3.0.0 :)</p>\n<p>So, the problem, was not a spring boot migration problem, just a path problem.</p>\n"}],"owner":{"account_id":2101627,"reputation":3199,"user_id":1869090,"accept_rate":87,"display_name":"t777"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2989,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74838127,"answer_count":1,"score":2,"last_activity_date":1677501054,"creation_date":1671318352,"question_id":74838077,"body_markdown":"There is a SQL script `V1.0.0_01__Init_from_ddl.sql` in `/src/main/resources/db/migration` which initializes my database.\r\n\r\n-&gt; Running **Spring Boot 2.7.6**, this migration script is completely executed without any error.\r\n\r\n-&gt; Running **Spring Boot 3.0.0**, it says: `No migrations found. Are your locations set up correctly?`\r\n\r\nI have not changed any properties regarding flyway. My database connection (MariaDB 10.6) is fine.\r\n\r\nI have tried to rename the file to `V1__Init.sql` or `V1_0_0__Init.sql` (any many more tries) without any success.\r\n\r\nAny ideas, what is going wrong?","title":"flyway migrations not found with spring boot 3","body":"<p>There is a SQL script <code>V1.0.0_01__Init_from_ddl.sql</code> in <code>/src/main/resources/db/migration</code> which initializes my database.</p>\n<p>-&gt; Running <strong>Spring Boot 2.7.6</strong>, this migration script is completely executed without any error.</p>\n<p>-&gt; Running <strong>Spring Boot 3.0.0</strong>, it says: <code>No migrations found. Are your locations set up correctly?</code></p>\n<p>I have not changed any properties regarding flyway. My database connection (MariaDB 10.6) is fine.</p>\n<p>I have tried to rename the file to <code>V1__Init.sql</code> or <code>V1_0_0__Init.sql</code> (any many more tries) without any success.</p>\n<p>Any ideas, what is going wrong?</p>\n"},{"tags":["java","jwt","quarkus"],"owner":{"account_id":27832094,"reputation":11,"user_id":21250315,"display_name":"Roberto Galindos Perez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677501009,"creation_date":1677501009,"question_id":75580517,"body_markdown":"**I have a publickey.pem file located inside the resource folder of a Jar library**. I have a dependency with that library in my project and I use that file indicating it in the property\r\n\r\n`mp.jwt.verify.publickey.location=publickey.pem`\r\n\r\nIn **Quarkus version 2.13 it worked fine** and I could find the file, but **after upgrading to version 2.16 it stopped working** and I got this error: \r\n\r\n`SRJWT02002: Failed to read the public key content from &#39;mp.jwt.verify.publickey.location&#39;`\r\n\r\nI haven&#39;t changed anything else in the code, and if I switch back to version 2.13 it works again.\r\n\r\nDo you know if anything has changed between these versions and I need to add some new property or something?\r\n\r\n\r\nI have tried to copy the publickey.pem file to the resource folder of the project and it works in Quarkus 2.16. But if it is in the resource folder of a jar library it does not find it. In Quarkus 2.13 it did find it.","title":"Error: &quot;SRJWT02002: Failed to read the public key content from &#39;mp.jwt.verify.publickey.location&#39;&quot; with the file inside a Jar","body":"<p><strong>I have a publickey.pem file located inside the resource folder of a Jar library</strong>. I have a dependency with that library in my project and I use that file indicating it in the property</p>\n<p><code>mp.jwt.verify.publickey.location=publickey.pem</code></p>\n<p>In <strong>Quarkus version 2.13 it worked fine</strong> and I could find the file, but <strong>after upgrading to version 2.16 it stopped working</strong> and I got this error:</p>\n<p><code>SRJWT02002: Failed to read the public key content from 'mp.jwt.verify.publickey.location'</code></p>\n<p>I haven't changed anything else in the code, and if I switch back to version 2.13 it works again.</p>\n<p>Do you know if anything has changed between these versions and I need to add some new property or something?</p>\n<p>I have tried to copy the publickey.pem file to the resource folder of the project and it works in Quarkus 2.16. But if it is in the resource folder of a jar library it does not find it. In Quarkus 2.13 it did find it.</p>\n"},{"tags":["java","sql","spring-data-jpa"],"comments":[{"owner":{"account_id":20873194,"reputation":31568,"user_id":15332650,"display_name":"Stu"},"score":3,"creation_date":1677366421,"post_id":75568929,"comment_id":133324531,"body_markdown":"I would suggest you properly normalise your data, storing delimited data is a common anti-pattern making your solution harder and poor performing than it need be.","body":"I would suggest you properly normalise your data, storing delimited data is a common anti-pattern making your solution harder and poor performing than it need be."},{"owner":{"account_id":24165,"reputation":274981,"user_id":61305,"display_name":"Aaron Bertrand"},"score":1,"creation_date":1677368068,"post_id":75568929,"comment_id":133324728,"body_markdown":"What version of SQL Server are you using? Don&#39;t make us guess, it just makes it harder to help you.","body":"What version of SQL Server are you using? Don&#39;t make us guess, it just makes it harder to help you."},{"owner":{"display_name":"anon"},"score":0,"creation_date":1677396757,"post_id":75568929,"comment_id":133327018,"body_markdown":"@AaronBertrand i do not use SQL server, actually i am Java developer using Java and Spring data framework, i wanted to find a logical SQL query at the first step then i should convert it for Java, so you can consider i am using SQL 2016 and later versions","body":"@AaronBertrand i do not use SQL server, actually i am Java developer using Java and Spring data framework, i wanted to find a logical SQL query at the first step then i should convert it for Java, so you can consider i am using SQL 2016 and later versions"},{"owner":{"account_id":24165,"reputation":274981,"user_id":61305,"display_name":"Aaron Bertrand"},"score":0,"creation_date":1677444694,"post_id":75568929,"comment_id":133334521,"body_markdown":"I don&#39;t understand - you don&#39;t use SQL Server? Why is it tagged SQL Server?","body":"I don&#39;t understand - you don&#39;t use SQL Server? Why is it tagged SQL Server?"},{"owner":{"display_name":"anon"},"score":0,"creation_date":1677500342,"post_id":75568929,"comment_id":133343497,"body_markdown":"@AaronBertrand you are right, i fixed the tags","body":"@AaronBertrand you are right, i fixed the tags"}],"answers":[{"tags":[],"owner":{"account_id":24165,"reputation":274981,"user_id":61305,"display_name":"Aaron Bertrand"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677368963,"creation_date":1677368963,"answer_id":75569166,"question_id":75568929,"body_markdown":"You want to split both sides and match; assuming SQL Server 2016 or above:\r\n\r\n    SELECT tconst, directors, writers\r\n    FROM dbo.whoknows AS wk\r\n    WHERE EXISTS\r\n    (\r\n      SELECT 1 FROM dbo.whoknows AS t\r\n      CROSS APPLY STRING_SPLIT(directors,&#39;,&#39;) AS d\r\n      CROSS APPLY STRING_SPLIT(writers,  &#39;,&#39;) AS w\r\n      WHERE LTRIM(RTRIM(d.value)) = LTRIM(RTRIM(w.value))\r\n      AND t.tconst = wk.tconst\r\n    );\r\n\r\n(Or properly normalize your tables, as Stu suggested. You shouldn&#39;t combine two names in a single column unless you never, ever, ever need to query against individual names like this.)\r\n\r\n| tconst | directors | writers |\r\n| :------|:---------|:-------|\r\n| 0002 | tom kaver                 | tom kaver                 |\r\n| 0003 | bob marley                | bob marley, nicole jamine |\r\n\r\n- [Working db&lt;&gt;fiddle example](https://dbfiddle.uk/TIBYmby8?hide=4).","title":"Query to find all equal values from 2 list of string columns","body":"<p>You want to split both sides and match; assuming SQL Server 2016 or above:</p>\n<pre><code>SELECT tconst, directors, writers\nFROM dbo.whoknows AS wk\nWHERE EXISTS\n(\n  SELECT 1 FROM dbo.whoknows AS t\n  CROSS APPLY STRING_SPLIT(directors,',') AS d\n  CROSS APPLY STRING_SPLIT(writers,  ',') AS w\n  WHERE LTRIM(RTRIM(d.value)) = LTRIM(RTRIM(w.value))\n  AND t.tconst = wk.tconst\n);\n</code></pre>\n<p>(Or properly normalize your tables, as Stu suggested. You shouldn't combine two names in a single column unless you never, ever, ever need to query against individual names like this.)</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">tconst</th>\n<th style=\"text-align: left;\">directors</th>\n<th style=\"text-align: left;\">writers</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">0002</td>\n<td style=\"text-align: left;\">tom kaver</td>\n<td style=\"text-align: left;\">tom kaver</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">0003</td>\n<td style=\"text-align: left;\">bob marley</td>\n<td style=\"text-align: left;\">bob marley, nicole jamine</td>\n</tr>\n</tbody>\n</table>\n</div>\n<ul>\n<li><a href=\"https://dbfiddle.uk/TIBYmby8?hide=4\" rel=\"nofollow noreferrer\">Working db&lt;&gt;fiddle example</a>.</li>\n</ul>\n"}],"owner":{"display_name":"anon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1677500831,"creation_date":1677365418,"question_id":75568929,"body_markdown":"I have this data:\r\n\r\n    tconst   directors                    writers\r\n    0001     gorge miller, johny amido    sarah blake\r\n    0002,    tom kaver                    tom kaver\r\n    0003,    bob marley                   bob marley, nicole jamine\r\n\r\nI want to write a query to find all items (between directors and writers columns) that its directors and writers are the same or at the least exist one common item, for example, I want to write a query to give me  items: 0002 and 0003 from my table:\r\n   \r\n\r\n    0002,    tom kaver                    tom kaver\r\n    0003,    bob marley                   bob marley, nicole jamine\r\n\r\nThanks for your help.\r\n","title":"Query to find all equal values from 2 list of string columns","body":"<p>I have this data:</p>\n<pre><code>tconst   directors                    writers\n0001     gorge miller, johny amido    sarah blake\n0002,    tom kaver                    tom kaver\n0003,    bob marley                   bob marley, nicole jamine\n</code></pre>\n<p>I want to write a query to find all items (between directors and writers columns) that its directors and writers are the same or at the least exist one common item, for example, I want to write a query to give me  items: 0002 and 0003 from my table:</p>\n<pre><code>0002,    tom kaver                    tom kaver\n0003,    bob marley                   bob marley, nicole jamine\n</code></pre>\n<p>Thanks for your help.</p>\n"},{"tags":["java","spring","mongodb","spring-boot","spring-mongodb"],"comments":[{"owner":{"account_id":8218454,"reputation":762,"user_id":6183889,"display_name":"Tom Elias"},"score":0,"creation_date":1677497943,"post_id":75579957,"comment_id":133342890,"body_markdown":"what indexes are defined on the collection? what is the @Id field on the document? please share the entire document code","body":"what indexes are defined on the collection? what is the @Id field on the document? please share the entire document code"},{"owner":{"account_id":22565756,"reputation":185,"user_id":16752809,"display_name":"gs97ahn"},"score":0,"creation_date":1677498394,"post_id":75579957,"comment_id":133342992,"body_markdown":"I&#39;ve updated it to my quesiton.","body":"I&#39;ve updated it to my quesiton."},{"owner":{"account_id":22565756,"reputation":185,"user_id":16752809,"display_name":"gs97ahn"},"score":0,"creation_date":1677498711,"post_id":75579957,"comment_id":133343072,"body_markdown":"I don&#39;t think it has to do with the @Id field.","body":"I don&#39;t think it has to do with the @Id field."},{"owner":{"account_id":8218454,"reputation":762,"user_id":6183889,"display_name":"Tom Elias"},"score":1,"creation_date":1677499266,"post_id":75579957,"comment_id":133343204,"body_markdown":"do you have an index defined on designer.username? that is the reason mongo is giving you an error. what annotations are on the User class?","body":"do you have an index defined on designer.username? that is the reason mongo is giving you an error. what annotations are on the User class?"},{"owner":{"account_id":8218454,"reputation":762,"user_id":6183889,"display_name":"Tom Elias"},"score":0,"creation_date":1677500762,"post_id":75579957,"comment_id":133343612,"body_markdown":"then please accept my anwser and mark the question as solved.","body":"then please accept my anwser and mark the question as solved."}],"answers":[{"tags":[],"owner":{"account_id":8218454,"reputation":762,"user_id":6183889,"display_name":"Tom Elias"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677500742,"creation_date":1677500742,"answer_id":75580472,"question_id":75579957,"body_markdown":"your collection has an index defined on the designer.username field. remove it or provide a unique value to the username, or allow non-unique option on the index.","title":"How do I allow duplicate key for MongoDB in Spring Boot Project?","body":"<p>your collection has an index defined on the designer.username field. remove it or provide a unique value to the username, or allow non-unique option on the index.</p>\n"}],"owner":{"account_id":22565756,"reputation":185,"user_id":16752809,"display_name":"gs97ahn"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":269,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75580472,"answer_count":1,"score":1,"last_activity_date":1677500742,"creation_date":1677497709,"question_id":75579957,"body_markdown":"This is how my document looks like\r\n\r\n```java\r\n@Getter\r\n@Document(collection = &quot;team&quot;)\r\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\r\npublic class Team extends BaseTimeEntity {\r\n    ....\r\n    private List&lt;User&gt; designers = new ArrayList&lt;&gt;();\r\n    ....\r\n}\r\n```\r\n\r\nThe `BaseTimeEntity`, which is extending from this class, looks like this.\r\n\r\n```java\r\n@Getter\r\npublic abstract class BaseTimeEntity {\r\n\r\n    @MongoId\r\n    private ObjectId id;\r\n\r\n    @CreatedDate\r\n    @Field(name = &quot;created_date&quot;)\r\n    private LocalDateTime createdDate;\r\n\r\n    @LastModifiedDate\r\n    @Field(name = &quot;modified_date&quot;)\r\n    private LocalDateTime modifiedDate;\r\n\r\n    @Field(name = &quot;is_deleted&quot;)\r\n    protected Boolean isDeleted;\r\n\r\n    @Field(name = &quot;schema_version&quot;)\r\n    protected String schemaVersion = &quot;1.0&quot;;\r\n}\r\n```\r\n\r\nAfter adding a single `Team` data into the database. When I try to create a new data with this class, leaving the `designers` list blank again, I get `org.springframework.dao.DuplicateKeyException`.\r\n\r\nThis is the error msg that I get.\r\n\r\n```\r\norg.springframework.dao.DuplicateKeyException: Write operation error on server \r\nlocalhost:27017. Write error: WriteError{code=11000, message=&#39;E11000 duplicate key error \r\ncollection: gabojait.team index: designer.username dup key: { designer.username: null }&#39;, \r\ndetails={}}.; nested exception is com.mongodb.MongoWriteException: Write operation error \r\non server localhost:27017. Write error: WriteError{code=11000, message=&#39;E11000 duplicate \r\nkey error collection: gabojait.team index: designer.username dup key: { \r\ndesigner.username: null }&#39;, details={}}.\r\n```\r\n\r\n**How do I fix this problem?**","title":"How do I allow duplicate key for MongoDB in Spring Boot Project?","body":"<p>This is how my document looks like</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Document(collection = &quot;team&quot;)\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\npublic class Team extends BaseTimeEntity {\n    ....\n    private List&lt;User&gt; designers = new ArrayList&lt;&gt;();\n    ....\n}\n</code></pre>\n<p>The <code>BaseTimeEntity</code>, which is extending from this class, looks like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\npublic abstract class BaseTimeEntity {\n\n    @MongoId\n    private ObjectId id;\n\n    @CreatedDate\n    @Field(name = &quot;created_date&quot;)\n    private LocalDateTime createdDate;\n\n    @LastModifiedDate\n    @Field(name = &quot;modified_date&quot;)\n    private LocalDateTime modifiedDate;\n\n    @Field(name = &quot;is_deleted&quot;)\n    protected Boolean isDeleted;\n\n    @Field(name = &quot;schema_version&quot;)\n    protected String schemaVersion = &quot;1.0&quot;;\n}\n</code></pre>\n<p>After adding a single <code>Team</code> data into the database. When I try to create a new data with this class, leaving the <code>designers</code> list blank again, I get <code>org.springframework.dao.DuplicateKeyException</code>.</p>\n<p>This is the error msg that I get.</p>\n<pre><code>org.springframework.dao.DuplicateKeyException: Write operation error on server \nlocalhost:27017. Write error: WriteError{code=11000, message='E11000 duplicate key error \ncollection: gabojait.team index: designer.username dup key: { designer.username: null }', \ndetails={}}.; nested exception is com.mongodb.MongoWriteException: Write operation error \non server localhost:27017. Write error: WriteError{code=11000, message='E11000 duplicate \nkey error collection: gabojait.team index: designer.username dup key: { \ndesigner.username: null }', details={}}.\n</code></pre>\n<p><strong>How do I fix this problem?</strong></p>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-sqs","sqslistener"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1669025871,"post_id":74517284,"comment_id":131540899,"body_markdown":"And your server and worker instances are running the same jar even though they do very different things!?","body":"And your server and worker instances are running the same jar even though they do very different things!?"},{"owner":{"account_id":3737568,"reputation":71,"user_id":3108171,"display_name":"akhil"},"score":0,"creation_date":1669028270,"post_id":74517284,"comment_id":131541686,"body_markdown":"Yes, they are running the same jar. Only the yaml/properties file could be different for server and worker instances","body":"Yes, they are running the same jar. Only the yaml/properties file could be different for server and worker instances"}],"answers":[{"tags":[],"owner":{"account_id":3737568,"reputation":71,"user_id":3108171,"display_name":"akhil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677500617,"creation_date":1677500617,"answer_id":75580448,"question_id":74517284,"body_markdown":"I have figured out a way to do it. I have created 2 separate YAML files for server and worker instances and configured a variable `cloud.aws.sqs.autoStart` in both the YAML files. I have kept the value of autoStart as True on the worker instance and as False on the server instance.\r\n\r\nWhile creating the `SimpleMessageListenerContainerFactory` I am using this variable like this:\r\n```\r\n    @Bean\r\n    public SimpleMessageListenerContainerFactory simpleMessageListenerContainerFactory(AmazonSQSAsync amazonSqs) {\r\n        SimpleMessageListenerContainerFactory factory = new SimpleMessageListenerContainerFactory();\r\n        factory.setAmazonSqs(amazonSqs);\r\n        factory.setAutoStartup(autoStart);\r\n        factory.setMaxNumberOfMessages(5);\r\n\r\n\r\n        return factory;\r\n    }\r\n```\r\n","title":"Disable SqsListener on specific instances","body":"<p>I have figured out a way to do it. I have created 2 separate YAML files for server and worker instances and configured a variable <code>cloud.aws.sqs.autoStart</code> in both the YAML files. I have kept the value of autoStart as True on the worker instance and as False on the server instance.</p>\n<p>While creating the <code>SimpleMessageListenerContainerFactory</code> I am using this variable like this:</p>\n<pre><code>    @Bean\n    public SimpleMessageListenerContainerFactory simpleMessageListenerContainerFactory(AmazonSQSAsync amazonSqs) {\n        SimpleMessageListenerContainerFactory factory = new SimpleMessageListenerContainerFactory();\n        factory.setAmazonSqs(amazonSqs);\n        factory.setAutoStartup(autoStart);\n        factory.setMaxNumberOfMessages(5);\n\n\n        return factory;\n    }\n</code></pre>\n"}],"owner":{"account_id":3737568,"reputation":71,"user_id":3108171,"display_name":"akhil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":420,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677500617,"creation_date":1669025579,"question_id":74517284,"body_markdown":"I have a spring boot application where i am using SQS for some async tasks.\r\nI want to configure 2 types of instances in this application:\r\n\r\n 1. Server instance: responsible for pushing message to SQS queue.\r\n2. Worker instance: responsible for listening messages from SQS queue.\r\n\r\nFor listening messages I am using `@SqsListener` annotation like this:\r\n```    \r\n    @SqsListener(&quot;queue_name&quot;)\r\n    public void loadMessagesFromQueue(Object message) {\r\n        log.info(&quot;inside loadMessagesFromQueue&quot;);\r\n        log.info(&quot;Queue Messages: &quot; + message);\r\n    }\r\n```\r\nThe ask here is that i want to disable this `SqsListener` on the server instance and just want it to run on the worker instance. How do I achieve this? I have tried searching if there is a way to disable it using some config variable but didn&#39;t find anything","title":"Disable SqsListener on specific instances","body":"<p>I have a spring boot application where i am using SQS for some async tasks.\nI want to configure 2 types of instances in this application:</p>\n<ol>\n<li>Server instance: responsible for pushing message to SQS queue.</li>\n<li>Worker instance: responsible for listening messages from SQS queue.</li>\n</ol>\n<p>For listening messages I am using <code>@SqsListener</code> annotation like this:</p>\n<pre><code>    @SqsListener(&quot;queue_name&quot;)\n    public void loadMessagesFromQueue(Object message) {\n        log.info(&quot;inside loadMessagesFromQueue&quot;);\n        log.info(&quot;Queue Messages: &quot; + message);\n    }\n</code></pre>\n<p>The ask here is that i want to disable this <code>SqsListener</code> on the server instance and just want it to run on the worker instance. How do I achieve this? I have tried searching if there is a way to disable it using some config variable but didn't find anything</p>\n"},{"tags":["java","cmd","environment-variables","java-home","java-17"],"comments":[{"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"score":0,"creation_date":1677071465,"post_id":75532644,"comment_id":133264453,"body_markdown":"4. It&#39;s not valid because I copy pasted it from console. In java is ```String cmd = &quot;java -jar \\&quot;duk/DUKIntegrator.jar\\&quot; -s&quot;;\n        cmd = cmd.concat(&quot; &quot; + msg.form + &quot; \\&quot;duk/&quot; + msg.form + &quot;.xml\\&quot; \\&quot;duk/&quot; + msg.form + &quot;-err.txt\\&quot; 0 0 $ $&quot;);\n        cmd = cmd.concat(&quot; &quot; + Objects.requireNonNull(certType.getSelectedItem()));\n        cmd = cmd.concat(&quot; &quot; + comboBox.getSelectedIndex());```","body":"4. It&#39;s not valid because I copy pasted it from console. In java is <code>String cmd = &quot;java -jar \\&quot;duk&#47;DUKIntegrator.jar\\&quot; -s&quot;;         cmd = cmd.concat(&quot; &quot; + msg.form + &quot; \\&quot;duk&#47;&quot; + msg.form + &quot;.xml\\&quot; \\&quot;duk&#47;&quot; + msg.form + &quot;-err.txt\\&quot; 0 0 $ $&quot;);         cmd = cmd.concat(&quot; &quot; + Objects.requireNonNull(certType.getSelectedItem()));         cmd = cmd.concat(&quot; &quot; + comboBox.getSelectedIndex());</code>"},{"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"score":0,"creation_date":1677072922,"post_id":75532644,"comment_id":133264945,"body_markdown":"Minus for what?","body":"Minus for what?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1677075747,"post_id":75532644,"comment_id":133265841,"body_markdown":"The `JAVA_HOME` variable has no relevance. Further, there’s no need to use `cmd /c` when launching `java.exe`. Just `path\\to\\java\\bin\\java.exe -jar path\\to\\jar` is enough.","body":"The <code>JAVA_HOME</code> variable has no relevance. Further, there’s no need to use <code>cmd &#47;c</code> when launching <code>java.exe</code>. Just <code>path\\to\\java\\bin\\java.exe -jar path\\to\\jar</code> is enough."}],"answers":[{"tags":[],"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677500590,"creation_date":1677072135,"answer_id":75533294,"question_id":75532644,"body_markdown":"Damn I&#39;m stupid. I just needed to use another java.exe than &quot;java -jar&quot;\r\n\r\nThe solution is: \r\n```\r\n.\\\\duk\\\\jre6\\\\bin\\\\java.exe -jar \\&quot;duk/DUKIntegrator.jar\\&quot; -s\r\n```","title":"Execute &quot;java -jar&quot; from another JAR but using different java versions xD","body":"<p>Damn I'm stupid. I just needed to use another java.exe than &quot;java -jar&quot;</p>\n<p>The solution is:</p>\n<pre><code>.\\\\duk\\\\jre6\\\\bin\\\\java.exe -jar \\&quot;duk/DUKIntegrator.jar\\&quot; -s\n</code></pre>\n"}],"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75533294,"answer_count":1,"score":-1,"last_activity_date":1677500590,"creation_date":1677068638,"question_id":75532644,"body_markdown":"My project is made using JDK 17. From this JAR I need to exec another JAR (by a cmd command). The problem is that for the second JAR I need JRE &lt; 1.8\r\nI&#39;ve tried with Runtime.getRuntime().exec(cmd); and with ProcessBuilder but I can&#39;t make it work. CMD command used is below. I&#39;ve tried to temporarily set JAVA_HOME to 1.6 but I guess cmd.exe takes the java used by the Parent JAR. The second JAR is not made by me and I can&#39;t edit it ... so I need to use &lt;1.8 for it.\r\n\r\n```\r\nString cmd = &quot;set JAVA_HOME=&quot;C:\\ExtensieImpoziteYCS\\duk\\jre6\\bin&quot; &amp; java -jar &quot;duk/DUKIntegrator.jar&quot; -s P2000 &quot;duk/P2000.xml&quot; &quot;duk/P2000-err.txt&quot; 0 0 $ $ aladdin 5&quot;;\r\nProcess duk = Runtime.getRuntime().exec(cmd);\r\nduk.waitFor();\r\nduk.destroy();\r\n```\r\n\r\n```\r\nProcessBuilder processBuilder = new ProcessBuilder();\r\n        try {\r\n            Map&lt;String, String&gt; env = processBuilder.environment();\r\n            env.put(&quot;JAVA_HOME&quot;, &quot;C:\\\\ExtensieImpoziteYCS\\\\duk\\\\jre6\\\\bin\\&quot;&quot;);\r\n            processBuilder.command(&quot;cmd.exe&quot;, &quot;/c&quot;, cmd);\r\n            Process process = processBuilder.start();\r\n\r\n            StringBuilder output = new StringBuilder();\r\n\r\n            BufferedReader reader = new BufferedReader(\r\n                    new InputStreamReader(process.getInputStream()));\r\n\r\n            String line;\r\n            while ((line = reader.readLine()) != null) {\r\n                output.append(line + &quot;\\n&quot;);\r\n            }\r\n\r\n            int exitVal = process.waitFor();\r\n            if (exitVal == 0) {\r\n                System.out.println(&quot;Success!&quot;);\r\n                System.out.println(output);\r\n                System.exit(0);\r\n            } else {\r\n                System.out.println(output);\r\n            }\r\n\r\n        } catch (IOException | InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n```\r\n\r\nThe second JAR is used to digitally sign a PDF and because of the old JRE used for it, on the new JDK I get this error: \r\n\r\n```\r\njava.lang.IllegalAccessException: class pdf.Sign cannot access class sun.security.mscapi.SunMSCAPI (in module jdk.crypto.mscapi) because module jdk.crypto.mscapi does not export sun.security.mscapi to unnamed module @16022d9d\r\n```\r\n\r\nUsing JRE 1.6 directly from CMD works perfectly...","title":"Execute &quot;java -jar&quot; from another JAR but using different java versions xD","body":"<p>My project is made using JDK 17. From this JAR I need to exec another JAR (by a cmd command). The problem is that for the second JAR I need JRE &lt; 1.8\nI've tried with Runtime.getRuntime().exec(cmd); and with ProcessBuilder but I can't make it work. CMD command used is below. I've tried to temporarily set JAVA_HOME to 1.6 but I guess cmd.exe takes the java used by the Parent JAR. The second JAR is not made by me and I can't edit it ... so I need to use &lt;1.8 for it.</p>\n<pre><code>String cmd = &quot;set JAVA_HOME=&quot;C:\\ExtensieImpoziteYCS\\duk\\jre6\\bin&quot; &amp; java -jar &quot;duk/DUKIntegrator.jar&quot; -s P2000 &quot;duk/P2000.xml&quot; &quot;duk/P2000-err.txt&quot; 0 0 $ $ aladdin 5&quot;;\nProcess duk = Runtime.getRuntime().exec(cmd);\nduk.waitFor();\nduk.destroy();\n</code></pre>\n<pre><code>ProcessBuilder processBuilder = new ProcessBuilder();\n        try {\n            Map&lt;String, String&gt; env = processBuilder.environment();\n            env.put(&quot;JAVA_HOME&quot;, &quot;C:\\\\ExtensieImpoziteYCS\\\\duk\\\\jre6\\\\bin\\&quot;&quot;);\n            processBuilder.command(&quot;cmd.exe&quot;, &quot;/c&quot;, cmd);\n            Process process = processBuilder.start();\n\n            StringBuilder output = new StringBuilder();\n\n            BufferedReader reader = new BufferedReader(\n                    new InputStreamReader(process.getInputStream()));\n\n            String line;\n            while ((line = reader.readLine()) != null) {\n                output.append(line + &quot;\\n&quot;);\n            }\n\n            int exitVal = process.waitFor();\n            if (exitVal == 0) {\n                System.out.println(&quot;Success!&quot;);\n                System.out.println(output);\n                System.exit(0);\n            } else {\n                System.out.println(output);\n            }\n\n        } catch (IOException | InterruptedException e) {\n            e.printStackTrace();\n        }\n</code></pre>\n<p>The second JAR is used to digitally sign a PDF and because of the old JRE used for it, on the new JDK I get this error:</p>\n<pre><code>java.lang.IllegalAccessException: class pdf.Sign cannot access class sun.security.mscapi.SunMSCAPI (in module jdk.crypto.mscapi) because module jdk.crypto.mscapi does not export sun.security.mscapi to unnamed module @16022d9d\n</code></pre>\n<p>Using JRE 1.6 directly from CMD works perfectly...</p>\n"},{"tags":["java","hibernate","criteria-api"],"answers":[{"tags":[],"owner":{"account_id":14753782,"reputation":49,"user_id":10655039,"display_name":"Wojtek"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1543393741,"creation_date":1543393741,"answer_id":53515114,"question_id":53510981,"body_markdown":"It works after forcing **countQuery** to add root:\r\n\r\n    ((QueryStructure)((CriteriaQueryImpl)countQuery).queryStructure).roots.add(root)","title":"Criteria api - illegalStateException","body":"<p>It works after forcing <strong>countQuery</strong> to add root:</p>\n\n<pre><code>((QueryStructure)((CriteriaQueryImpl)countQuery).queryStructure).roots.add(root)\n</code></pre>\n"}],"owner":{"account_id":14753782,"reputation":49,"user_id":10655039,"display_name":"Wojtek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":742,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":53515114,"answer_count":1,"score":0,"last_activity_date":1677500504,"creation_date":1543370343,"question_id":53510981,"body_markdown":"I&#39;ve written following code by using Criteria Api:\r\n\r\n    CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\r\n    \r\n    CriteriaQuery&lt;Entity&gt; criteriaQuery = criteriaBuilder.createQuery(Entity.class);\r\n    Root&lt;Entity&gt; root = criteriaQuery.from(Entity.class);\r\n    criteriaQuery.select(root);\r\n    \r\n    CriteriaQuery&lt;Long&gt; countQuery = criteriaBuilder.createQuery(Long.class);\r\n    countQuery.select(criteriaBuilder.count(root));\r\n    \r\n    Long countOfRows = entityManager.createQuery(countQuery).getSingleResult();\r\n\r\nAs a result I get an exception:\r\n\r\n&gt; java.lang.IllegalStateException: No criteria query roots were\r\n&gt; specified\r\n\r\n\r\nThe exception is thrown by **getSingleResult** method (last line of the code). Thank you for help!","title":"Criteria api - illegalStateException","body":"<p>I've written following code by using Criteria Api:</p>\n\n<pre><code>CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\n\nCriteriaQuery&lt;Entity&gt; criteriaQuery = criteriaBuilder.createQuery(Entity.class);\nRoot&lt;Entity&gt; root = criteriaQuery.from(Entity.class);\ncriteriaQuery.select(root);\n\nCriteriaQuery&lt;Long&gt; countQuery = criteriaBuilder.createQuery(Long.class);\ncountQuery.select(criteriaBuilder.count(root));\n\nLong countOfRows = entityManager.createQuery(countQuery).getSingleResult();\n</code></pre>\n\n<p>As a result I get an exception:</p>\n\n<blockquote>\n  <p>java.lang.IllegalStateException: No criteria query roots were\n  specified</p>\n</blockquote>\n\n<p>The exception is thrown by <strong>getSingleResult</strong> method (last line of the code). Thank you for help!</p>\n"},{"tags":["java","spring-boot","exceptionhandler"],"answers":[{"tags":[],"owner":{"account_id":1310803,"reputation":2557,"user_id":1258838,"accept_rate":68,"display_name":"Juliyanage Silva"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677496064,"creation_date":1677496064,"answer_id":75579677,"question_id":75579551,"body_markdown":"For an interceptor to work, You need to throw your DataIntegrityViolationException exception from the code. But you were handling that by yourself. Exceptions need to propagate to the top to be handled by your interceptor.\r\nAdditional tip: Add a custom message when you throw your exception from code and get the same from interceptor class. ","title":"Question about @ExceptionHandler(Exception.class)","body":"<p>For an interceptor to work, You need to throw your DataIntegrityViolationException exception from the code. But you were handling that by yourself. Exceptions need to propagate to the top to be handled by your interceptor.\nAdditional tip: Add a custom message when you throw your exception from code and get the same from interceptor class.</p>\n"},{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677500439,"creation_date":1677500439,"answer_id":75580427,"question_id":75579551,"body_markdown":"The @ControllerAdvice will look for the most appropriate @ExceptionHandler. To do this, it will use the class of the exception which is being thrown and it will check if any of the handlers are going to match it. If not, it will repeat the process with the parent of your class, then it will do it with the parent of its parent, and so on until it finds a handler.\r\n\r\nIn this particular case, it will initially look for:\r\n`@ExceptionHandler(DataIntegrityViolationException.class)`\r\nthen for `@ExceptionHandler(NonTransientDataAccessException.class)`\r\nthen for `@ExceptionHandler(DataAccessException.class)`\r\n...\r\nand, lastly, for `@ExceptionHandler(Exception.class)`","title":"Question about @ExceptionHandler(Exception.class)","body":"<p>The @ControllerAdvice will look for the most appropriate @ExceptionHandler. To do this, it will use the class of the exception which is being thrown and it will check if any of the handlers are going to match it. If not, it will repeat the process with the parent of your class, then it will do it with the parent of its parent, and so on until it finds a handler.</p>\n<p>In this particular case, it will initially look for:\n<code>@ExceptionHandler(DataIntegrityViolationException.class)</code>\nthen for <code>@ExceptionHandler(NonTransientDataAccessException.class)</code>\nthen for <code>@ExceptionHandler(DataAccessException.class)</code>\n...\nand, lastly, for <code>@ExceptionHandler(Exception.class)</code></p>\n"}],"owner":{"account_id":9013194,"reputation":220,"user_id":10663941,"display_name":"The Prototype"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":224,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75580427,"answer_count":2,"score":0,"last_activity_date":1677500439,"creation_date":1677495374,"question_id":75579551,"body_markdown":"There is an exception interceptor:\r\n```\r\n    @ControllerAdvice\r\n    public class RestExceptionHandler extends ResponseEntityExceptionHandler {\r\n\r\n        @ExceptionHandler\r\n        public ResponseEntity&lt;ApiExceptionDTO&gt; handleDataIntegrityViolationException(DataIntegrityViolationException ex) {\r\n            // return ResponseEntity&lt;ApiExceptionDTO&gt; with user friendly error message\r\n        }\r\n\r\n        // ... other @ExceptionHandler\r\n        \r\n        @ExceptionHandler(Exception.class)\r\n        public ResponseEntity&lt;ApiExceptionDTO&gt; handleException(Exception ex) {\r\n            // return ResponseEntity&lt;ApiExceptionDTO&gt;\r\n        }\r\n\r\n    }\r\n```\r\n\r\nI was tasked with returning a friendly error message to the user if he tries to delete an object from the database that violates the integrity constraint.\r\n\r\nI caught the `DataIntegrityViolationException` exception and implemented the task.\r\n\r\nI expected it to fail because of `@ExceptionHandler(Exception.class)`, since it will intercept the error first.\r\n\r\nMy question is, why did it work the way I expected?\r\nWhy `@ExceptionHandler(Exception.class)` didn&#39;t catch this exception first?\r\n\r\nAnd in general, the question is what to do in the case when `@ExceptionHandler(Exception.class)` intercepts exceptions that should have hit another interceptor? Or is it possible only if somewhere in another interceptor there is a similar construction `@ExceptionHandler(Exception.class)` ?\r\n\r\nSpringBoot version: 2.1.9.RELEASE","title":"Question about @ExceptionHandler(Exception.class)","body":"<p>There is an exception interceptor:</p>\n<pre><code>    @ControllerAdvice\n    public class RestExceptionHandler extends ResponseEntityExceptionHandler {\n\n        @ExceptionHandler\n        public ResponseEntity&lt;ApiExceptionDTO&gt; handleDataIntegrityViolationException(DataIntegrityViolationException ex) {\n            // return ResponseEntity&lt;ApiExceptionDTO&gt; with user friendly error message\n        }\n\n        // ... other @ExceptionHandler\n        \n        @ExceptionHandler(Exception.class)\n        public ResponseEntity&lt;ApiExceptionDTO&gt; handleException(Exception ex) {\n            // return ResponseEntity&lt;ApiExceptionDTO&gt;\n        }\n\n    }\n</code></pre>\n<p>I was tasked with returning a friendly error message to the user if he tries to delete an object from the database that violates the integrity constraint.</p>\n<p>I caught the <code>DataIntegrityViolationException</code> exception and implemented the task.</p>\n<p>I expected it to fail because of <code>@ExceptionHandler(Exception.class)</code>, since it will intercept the error first.</p>\n<p>My question is, why did it work the way I expected?\nWhy <code>@ExceptionHandler(Exception.class)</code> didn't catch this exception first?</p>\n<p>And in general, the question is what to do in the case when <code>@ExceptionHandler(Exception.class)</code> intercepts exceptions that should have hit another interceptor? Or is it possible only if somewhere in another interceptor there is a similar construction <code>@ExceptionHandler(Exception.class)</code> ?</p>\n<p>SpringBoot version: 2.1.9.RELEASE</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9609,"page":616,"page_size":100}
