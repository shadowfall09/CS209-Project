{"items":[{"tags":["java","postgresql","jpa"],"comments":[{"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"score":0,"creation_date":1676017038,"post_id":75407748,"comment_id":133055992,"body_markdown":"What version of Postgres dialect is configured for your dataSource? You probably should configure dialect to be 8.2+ version (where UUID support was introduced) or create custom UUID type converter, because by default UUID is being converted to `byte[]` which is not what you want","body":"What version of Postgres dialect is configured for your dataSource? You probably should configure dialect to be 8.2+ version (where UUID support was introduced) or create custom UUID type converter, because by default UUID is being converted to <code>byte[]</code> which is not what you want"},{"owner":{"account_id":3456301,"reputation":1630,"user_id":2894742,"accept_rate":63,"display_name":"Selva"},"score":0,"creation_date":1676018609,"post_id":75407748,"comment_id":133056405,"body_markdown":"I am using postgres version 42.4.1. I am facing issue only with jpa native queries. If I directly update entity(repository.save) or hql its working fine. I can update non null value only the issue with updating null","body":"I am using postgres version 42.4.1. I am facing issue only with jpa native queries. If I directly update entity(repository.save) or hql its working fine. I can update non null value only the issue with updating null"}],"owner":{"account_id":3456301,"reputation":1630,"user_id":2894742,"accept_rate":63,"display_name":"Selva"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676018696,"creation_date":1676011640,"question_id":75407748,"body_markdown":"\r\nI am trying to update with null value in uuid column in postgres db using jpa\r\n\r\nHere is my code:\r\n\r\n\t\r\n\r\n    @Transactional\r\n        @Modifying\r\n        @Query(value = &quot;update student set teacher_id=:teacherId where studentId=:studentId&quot;, nativeQuery = true)\r\n        void updateTeacherUUID(@Param(&quot;teacherId&quot;) UUID teacherId, @Param(&quot;studentId&quot;) UUID studentId);\r\n\t\r\n    @Data\r\n    @Entity\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Table(name = &quot;student&quot;)\r\n    public class Student {\r\n    \r\n       @Id\r\n       UUID studentId;\r\n       \r\n       @Type(type = &quot;org.hibernate.type.PostgresUUIDType&quot;)\r\n       @Column(name = &quot;teacher_id&quot;, columnDefinition = &quot;uuid&quot;)\r\n       UUID teacherId;\r\n    }\r\n\r\nI am getting below error when I try to update\r\n\r\n    o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 42804\r\n    o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: column &quot;teacher_id&quot; is of type uuid but expression is of type bytea\r\n      Hint: You will need to rewrite or cast the expression.\r\n      \r\nNote: This issue occurring only in jpa native queries If I update directly using repository.update or hql its working fine\r\n\r\nCan anyone please help me on this\r\n\r\n","title":"Unable to update null value in UUID column postrgres via jpa native query","body":"<p>I am trying to update with null value in uuid column in postgres db using jpa</p>\n<p>Here is my code:</p>\n<pre><code>@Transactional\n    @Modifying\n    @Query(value = &quot;update student set teacher_id=:teacherId where studentId=:studentId&quot;, nativeQuery = true)\n    void updateTeacherUUID(@Param(&quot;teacherId&quot;) UUID teacherId, @Param(&quot;studentId&quot;) UUID studentId);\n\n@Data\n@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(name = &quot;student&quot;)\npublic class Student {\n\n   @Id\n   UUID studentId;\n   \n   @Type(type = &quot;org.hibernate.type.PostgresUUIDType&quot;)\n   @Column(name = &quot;teacher_id&quot;, columnDefinition = &quot;uuid&quot;)\n   UUID teacherId;\n}\n</code></pre>\n<p>I am getting below error when I try to update</p>\n<pre><code>o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 42804\no.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: column &quot;teacher_id&quot; is of type uuid but expression is of type bytea\n  Hint: You will need to rewrite or cast the expression.\n  \n</code></pre>\n<p>Note: This issue occurring only in jpa native queries If I update directly using repository.update or hql its working fine</p>\n<p>Can anyone please help me on this</p>\n"},{"tags":["java","arrays","collections","guava","colt"],"comments":[{"owner":{"account_id":982231,"reputation":3261,"user_id":1001686,"accept_rate":94,"display_name":"Zach Latta"},"score":0,"creation_date":1362300582,"post_id":15183982,"comment_id":21390451,"body_markdown":"Are you trying to intersect the values of a list of int arrays? What do you mean by &quot;straight forward way&quot;?","body":"Are you trying to intersect the values of a list of int arrays? What do you mean by &quot;straight forward way&quot;?"},{"owner":{"account_id":152622,"reputation":490044,"user_id":367273,"accept_rate":96,"display_name":"NPE"},"score":0,"creation_date":1362300919,"post_id":15183982,"comment_id":21390516,"body_markdown":"&quot;Common&quot; meaning that they appear in *every* list, or in *more than one* list?","body":"&quot;Common&quot; meaning that they appear in <i>every</i> list, or in <i>more than one</i> list?"},{"owner":{"account_id":2225983,"reputation":2712,"user_id":1964750,"accept_rate":59,"display_name":"ravindrab"},"score":0,"creation_date":1362301736,"post_id":15183982,"comment_id":21390679,"body_markdown":"I meant by &quot;straight forward way&quot; a method in some kind of library like apache commons, colt, guava etc.","body":"I meant by &quot;straight forward way&quot; a method in some kind of library like apache commons, colt, guava etc."},{"owner":{"account_id":1988950,"reputation":209,"user_id":1783460,"display_name":"Mike"},"score":1,"creation_date":1362301988,"post_id":15183982,"comment_id":21390730,"body_markdown":"You can iterate through all elements in each array and populate Map. Where key is your integer value and value is counter of how many times this element is met.","body":"You can iterate through all elements in each array and populate Map. Where key is your integer value and value is counter of how many times this element is met."}],"answers":[{"tags":[],"owner":{"account_id":2439364,"reputation":5868,"user_id":2128327,"display_name":"Khaled.K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1363931195,"creation_date":1362302199,"answer_id":15184202,"question_id":15183982,"body_markdown":"If you are looking for a function that returns elements that exist in all lists,\r\n\r\nthen the straight forward &amp; simple way is building a statistic { &lt; member, occurences &gt; }\r\n\r\nThe condition here is no duplicates among the same list,\r\n\r\n\r\n\r\n    private Set&lt;Integer&gt; getCommonElements(ArrayList&lt;Integer[]&gt; idList)\r\n    {\r\n\r\n        MapList&lt;Integer,Short&gt; stat = new MapList&lt;Integer,Short&gt;();\r\n\r\n        // Here we count how many times each value occur\r\n        for (int i = 0; i &lt; idList.size(); i++)\r\n        {\r\n            for (int j = 0; j &lt; idList.get(i).size; j++)\r\n            {\r\n                if (stat.containsKey(idList.get(i)[j]))\r\n                {\r\n                    stat.set(idList.get(i)[j], stat.get(idList.get(i)[j])+1);\r\n                }\r\n                else\r\n                {\r\n                    stat.add(idList.get(i)[j], 1);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Here we only keep value that occured in all lists\r\n        for (int i = 0; i &lt; stat.size(); i++)\r\n        {\r\n            if (stat.get(i) &lt; idList.size())\r\n            {\r\n                stat.remove(i);\r\n                i--;\r\n            }\r\n        }\r\n\r\n        return stat.keySet();\r\n    }","title":"Is there a way to find common elements in multiple lists?","body":"<p>If you are looking for a function that returns elements that exist in all lists,</p>\n\n<p>then the straight forward &amp; simple way is building a statistic { &lt; member, occurences > }</p>\n\n<p>The condition here is no duplicates among the same list,</p>\n\n<pre><code>private Set&lt;Integer&gt; getCommonElements(ArrayList&lt;Integer[]&gt; idList)\n{\n\n    MapList&lt;Integer,Short&gt; stat = new MapList&lt;Integer,Short&gt;();\n\n    // Here we count how many times each value occur\n    for (int i = 0; i &lt; idList.size(); i++)\n    {\n        for (int j = 0; j &lt; idList.get(i).size; j++)\n        {\n            if (stat.containsKey(idList.get(i)[j]))\n            {\n                stat.set(idList.get(i)[j], stat.get(idList.get(i)[j])+1);\n            }\n            else\n            {\n                stat.add(idList.get(i)[j], 1);\n            }\n        }\n    }\n\n    // Here we only keep value that occured in all lists\n    for (int i = 0; i &lt; stat.size(); i++)\n    {\n        if (stat.get(i) &lt; idList.size())\n        {\n            stat.remove(i);\n            i--;\n        }\n    }\n\n    return stat.keySet();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1970166,"reputation":2148,"user_id":1769353,"accept_rate":88,"display_name":"Amir Kost"},"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1362304476,"creation_date":1362304476,"answer_id":15184473,"question_id":15183982,"body_markdown":"You can transform the lists to sets, and then use `Set.retainAll` method for intersection between the different sets.\r\nOnce you intersect all sets, you are left with the common elements, and you can transform the resulting set back to a list.","title":"Is there a way to find common elements in multiple lists?","body":"<p>You can transform the lists to sets, and then use <code>Set.retainAll</code> method for intersection between the different sets.\nOnce you intersect all sets, you are left with the common elements, and you can transform the resulting set back to a list.</p>\n"},{"tags":[],"owner":{"account_id":908333,"reputation":1660,"user_id":942772,"accept_rate":80,"display_name":"Oussama Zoghlami"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1501279146,"creation_date":1362481679,"answer_id":15222223,"question_id":15183982,"body_markdown":"You can use Set&#39;s intersection method offered by [Guava](http://code.google.com/p/guava-libraries/), Here is a little example : \r\n\r\n    public &lt;T&gt; Set&lt;T&gt; intersection(List&lt;T&gt;... list) {\r\n    \tSet&lt;T&gt; result = Sets.newHashSet(list[0]);\r\n    \tfor (List&lt;T&gt; numbers : list) {\r\n    \t\tresult = Sets.intersection(result, Sets.newHashSet(numbers));\r\n    \t}\r\n    \treturn result;\r\n    }\r\n\r\nHope that could help you","title":"Is there a way to find common elements in multiple lists?","body":"<p>You can use Set's intersection method offered by <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">Guava</a>, Here is a little example : </p>\n\n<pre><code>public &lt;T&gt; Set&lt;T&gt; intersection(List&lt;T&gt;... list) {\n    Set&lt;T&gt; result = Sets.newHashSet(list[0]);\n    for (List&lt;T&gt; numbers : list) {\n        result = Sets.intersection(result, Sets.newHashSet(numbers));\n    }\n    return result;\n}\n</code></pre>\n\n<p>Hope that could help you</p>\n"},{"tags":[],"owner":{"account_id":4041930,"reputation":3,"user_id":3324510,"display_name":"ArunKR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1403861164,"creation_date":1403861164,"answer_id":24448355,"question_id":15183982,"body_markdown":"    public class ArrayListImpl{\r\n      public static void main(String s[]){\r\n        ArrayList&lt;Integer&gt; al1=new ArrayList&lt;Integer&gt;();\r\n         al1.add(21);al1.add(23);al1.add(25);al1.add(26);\r\n        ArrayList&lt;Integer&gt; al2=new ArrayList&lt;Integer&gt;();\r\n         al2.add(15);al2.add(16);al2.add(23);al2.add(25);\r\n         ArrayList Al3=new ArrayList&lt;Integer&gt;();\r\n         al3.addAll(al1);\r\n          System.out.println(&quot;Al3 Elements :&quot;+al3);\r\n         al3.retainAll(al2); //Keeps common elements of (al1 &amp; al2) &amp; removes remaining elements\r\n           System.out.println(&quot;Common Elements Between Two Array List:&quot;+al3);  \r\n    }\r\n    }","title":"Is there a way to find common elements in multiple lists?","body":"<pre><code>public class ArrayListImpl{\n  public static void main(String s[]){\n    ArrayList&lt;Integer&gt; al1=new ArrayList&lt;Integer&gt;();\n     al1.add(21);al1.add(23);al1.add(25);al1.add(26);\n    ArrayList&lt;Integer&gt; al2=new ArrayList&lt;Integer&gt;();\n     al2.add(15);al2.add(16);al2.add(23);al2.add(25);\n     ArrayList Al3=new ArrayList&lt;Integer&gt;();\n     al3.addAll(al1);\n      System.out.println(\"Al3 Elements :\"+al3);\n     al3.retainAll(al2); //Keeps common elements of (al1 &amp; al2) &amp; removes remaining elements\n       System.out.println(\"Common Elements Between Two Array List:\"+al3);  \n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":441194,"reputation":471,"user_id":831157,"accept_rate":83,"display_name":"Han Tuzun"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1412173305,"creation_date":1412173305,"answer_id":26143622,"question_id":15183982,"body_markdown":"We can use [`retainAll` method of Collections][1]. I initialised my `commons` arraylist with the first array list and called this for each remaining arraylists.\r\n\r\n\t\tList&lt;List&lt;Integer&gt;&gt; lists = new ArrayList&lt;List&lt;Integer&gt;&gt;();\r\n\t\tlists.add(new ArrayList&lt;Integer&gt;(Arrays.asList(1, 3, 5)));\r\n\t\tlists.add(new ArrayList&lt;Integer&gt;(Arrays.asList(1, 6, 7, 9, 3)));\r\n\t\tlists.add(new ArrayList&lt;Integer&gt;(Arrays.asList(1, 3, 10, 11)));\r\n\r\n\t\tList&lt;Integer&gt; commons = new ArrayList&lt;Integer&gt;();\r\n\t\tcommons.addAll(lists.get(1));\r\n\t\tfor (ListIterator&lt;List&lt;Integer&gt;&gt; iter = lists.listIterator(1); iter.hasNext(); ) {\r\n\t\t\tcommons.retainAll(iter.next());\r\n\t\t}\r\n\r\n\t\tSystem.out.println(commons);\r\n\t\tSystem.out.println(lists.get(1));\r\n\r\n\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#retainAll(java.util.Collection)","title":"Is there a way to find common elements in multiple lists?","body":"<p>We can use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#retainAll(java.util.Collection)\" rel=\"noreferrer\"><code>retainAll</code> method of Collections</a>. I initialised my <code>commons</code> arraylist with the first array list and called this for each remaining arraylists.</p>\n\n<pre><code>    List&lt;List&lt;Integer&gt;&gt; lists = new ArrayList&lt;List&lt;Integer&gt;&gt;();\n    lists.add(new ArrayList&lt;Integer&gt;(Arrays.asList(1, 3, 5)));\n    lists.add(new ArrayList&lt;Integer&gt;(Arrays.asList(1, 6, 7, 9, 3)));\n    lists.add(new ArrayList&lt;Integer&gt;(Arrays.asList(1, 3, 10, 11)));\n\n    List&lt;Integer&gt; commons = new ArrayList&lt;Integer&gt;();\n    commons.addAll(lists.get(1));\n    for (ListIterator&lt;List&lt;Integer&gt;&gt; iter = lists.listIterator(1); iter.hasNext(); ) {\n        commons.retainAll(iter.next());\n    }\n\n    System.out.println(commons);\n    System.out.println(lists.get(1));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6865601,"reputation":2052,"user_id":5278172,"display_name":"Rohit Jain"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1595746370,"creation_date":1538521379,"answer_id":52617572,"question_id":15183982,"body_markdown":"with Java 8 \r\n\r\n    ArrayList retain = list1.stream()\r\n                         .filter(list2::contains).filter(list3::contains).collect(toList())","title":"Is there a way to find common elements in multiple lists?","body":"<p>with Java 8</p>\n<pre><code>ArrayList retain = list1.stream()\n                     .filter(list2::contains).filter(list3::contains).collect(toList())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20844342,"reputation":1,"user_id":15310217,"display_name":"Pratik Mungalpara"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1614643086,"creation_date":1614634511,"answer_id":66430018,"question_id":15183982,"body_markdown":"    public class commonvalue {\r\n    \r\n      \r\n       Public static void MyMethod(){\r\n            \r\n           Set&lt;integer&gt; S1 = new set&lt;integer&gt;{1,3,5};\r\n            Set&lt;integer&gt; S2 = new set&lt;integer&gt;{1,6,7,9,3};\r\n            Set&lt;integer&gt; S3 = new set&lt;integer&gt;{1,3,10,11};\r\n               \r\n                s2.retainall(s1);\r\n                s3.retainall(s2);\r\n           \r\n           system.debug(s3);\r\n    }\r\n    }\r\n\r\n","title":"Is there a way to find common elements in multiple lists?","body":"<pre><code>public class commonvalue {\n\n  \n   Public static void MyMethod(){\n        \n       Set&lt;integer&gt; S1 = new set&lt;integer&gt;{1,3,5};\n        Set&lt;integer&gt; S2 = new set&lt;integer&gt;{1,6,7,9,3};\n        Set&lt;integer&gt; S3 = new set&lt;integer&gt;{1,3,10,11};\n           \n            s2.retainall(s1);\n            s3.retainall(s2);\n       \n       system.debug(s3);\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11260582,"reputation":102,"user_id":8259045,"display_name":"T4puSD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674638497,"creation_date":1674638497,"answer_id":75231851,"question_id":15183982,"body_markdown":"If you are using JAVA 8 streams. Then using stream reduce operation we can achieve the same.\r\n\r\nConsidering your example: Let&#39;s say\r\na = [1,3,5], b = [1,6,7,9,3] and c = [1,3,10,11]\r\n\r\n```java\r\n    List&lt;Integer&gt; commonElements = Stream.of(a,b,c)\r\n         .reduce((s1,s2) -&gt; {\r\n              s1.retainAll(s2); \r\n              return s1;\r\n          }).orElse(Collections.emptyList());\r\n```\r\nKeep in mind that after running this operation `a` will get modified with common values as well. So you will lose the actual value of `a`.\r\n\r\nSo elements of `a` and the result elements of `commonElements` will be essentially the same after running this operation.","title":"Is there a way to find common elements in multiple lists?","body":"<p>If you are using JAVA 8 streams. Then using stream reduce operation we can achieve the same.</p>\n<p>Considering your example: Let's say\na = [1,3,5], b = [1,6,7,9,3] and c = [1,3,10,11]</p>\n<pre class=\"lang-java prettyprint-override\"><code>    List&lt;Integer&gt; commonElements = Stream.of(a,b,c)\n         .reduce((s1,s2) -&gt; {\n              s1.retainAll(s2); \n              return s1;\n          }).orElse(Collections.emptyList());\n</code></pre>\n<p>Keep in mind that after running this operation <code>a</code> will get modified with common values as well. So you will lose the actual value of <code>a</code>.</p>\n<p>So elements of <code>a</code> and the result elements of <code>commonElements</code> will be essentially the same after running this operation.</p>\n"},{"tags":[],"owner":{"account_id":2023117,"reputation":8402,"user_id":1808829,"accept_rate":80,"display_name":"Ayaz Alifov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676018047,"creation_date":1676018047,"answer_id":75408633,"question_id":15183982,"body_markdown":"Giving some another alternative code using retainAll capability of Set\r\n\r\n    public List getCommonItems(List... lists) {\r\n        Set&lt;Integer&gt; result = new HashSet&lt;&gt;(lists[0]);\r\n\r\n        for (List list : lists) {\r\n            result.retainAll(new HashSet&lt;&gt;(list));\r\n        }\r\n\r\n        return new ArrayList&lt;&gt;(result);;\r\n    }\r\n\r\n\r\n\r\nUsage:\r\n       \r\n     List list1 = [1, 2, 3]\r\n     List list2 = [3, 2, 1]\r\n     List list3 = [2, 5, 1]\r\n    \r\n     List commonItems = getCommonItems(list1, list2, list3)\r\n     System.out.println(&quot;Common items: &quot; + result);\r\n\r\n\r\nResult: \r\n\r\n    commonItems: [1, 2]","title":"Is there a way to find common elements in multiple lists?","body":"<p>Giving some another alternative code using retainAll capability of Set</p>\n<pre><code>public List getCommonItems(List... lists) {\n    Set&lt;Integer&gt; result = new HashSet&lt;&gt;(lists[0]);\n\n    for (List list : lists) {\n        result.retainAll(new HashSet&lt;&gt;(list));\n    }\n\n    return new ArrayList&lt;&gt;(result);;\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code> List list1 = [1, 2, 3]\n List list2 = [3, 2, 1]\n List list3 = [2, 5, 1]\n\n List commonItems = getCommonItems(list1, list2, list3)\n System.out.println(&quot;Common items: &quot; + result);\n</code></pre>\n<p>Result:</p>\n<pre><code>commonItems: [1, 2]\n</code></pre>\n"}],"owner":{"account_id":2225983,"reputation":2712,"user_id":1964750,"accept_rate":59,"display_name":"ravindrab"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43915,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":15184473,"answer_count":9,"score":21,"last_activity_date":1676018047,"creation_date":1362300255,"question_id":15183982,"body_markdown":"I have a list of integer arrays. I need to find the common elements between those. What I can think of is an extension of what is listed in  [**Common elements in two lists**][1]\r\n\r\n    Example would be \r\n    [1,3,5],\r\n    [1,6,7,9,3],\r\n    [1,3,10,11]\r\n\r\n    should result in [1,3]\r\n\r\n**There are no duplicates in the arrays as well.**\r\n\r\nIs there a straight forward way to do this? \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5943330/common-elements-in-two-lists","title":"Is there a way to find common elements in multiple lists?","body":"<p>I have a list of integer arrays. I need to find the common elements between those. What I can think of is an extension of what is listed in  <a href=\"https://stackoverflow.com/questions/5943330/common-elements-in-two-lists\"><strong>Common elements in two lists</strong></a></p>\n\n<pre><code>Example would be \n[1,3,5],\n[1,6,7,9,3],\n[1,3,10,11]\n\nshould result in [1,3]\n</code></pre>\n\n<p><strong>There are no duplicates in the arrays as well.</strong></p>\n\n<p>Is there a straight forward way to do this? </p>\n"},{"tags":["java","junit","mockito","entitymanager"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1675948015,"post_id":75398991,"comment_id":133039781,"body_markdown":"Are you using Spring Boot? Did you try anything with [`@DataJpaTest`](https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/orm/jpa/DataJpaTest.html)?","body":"Are you using Spring Boot? Did you try anything with <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/orm/jpa/DataJpaTest.html\" rel=\"nofollow noreferrer\"><code>@DataJpaTest</code></a>?"},{"owner":{"account_id":25780920,"reputation":25,"user_id":19526554,"display_name":"Marcos"},"score":0,"creation_date":1675948560,"post_id":75398991,"comment_id":133039941,"body_markdown":"@dan1st no, I didn&#39;t. I&#39;m going to try it.","body":"@dan1st no, I didn&#39;t. I&#39;m going to try it."}],"answers":[{"tags":[],"owner":{"account_id":25780920,"reputation":25,"user_id":19526554,"display_name":"Marcos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676018019,"creation_date":1676018019,"answer_id":75408628,"question_id":75398991,"body_markdown":"I don&#39;t know if it&#39;s a good solution, but I obtain 100% coverage.\r\n\r\n\r\n\r\n\t\r\n\t@Mock\r\n\tEntityManager entityManager;\r\n\t\r\n\t@Mock\r\n\tQuery query;\r\n\t\r\n\t@InjectMocks\r\n\tThSwapDaoImpl daoImpl;\r\n\r\n\t@BeforeEach\r\n\tvoid setUp() throws Exception {\r\n\t}\r\n\r\n\t@Test\r\n\tvoid test() {\r\n\t\t\r\n\t\twhen(entityManager.createNativeQuery(anyString())).thenReturn(query);\r\n\t\twhen(query.executeUpdate()).thenReturn(1);\r\n\t\tassertEquals(daoImpl.sendToHistorical(), 1);\r\n\t\r\n\t}\r\n\r\n","title":"Test EntityManager with JUnit and Mockito","body":"<p>I don't know if it's a good solution, but I obtain 100% coverage.</p>\n<pre><code>@Mock\nEntityManager entityManager;\n\n@Mock\nQuery query;\n\n@InjectMocks\nThSwapDaoImpl daoImpl;\n\n@BeforeEach\nvoid setUp() throws Exception {\n}\n\n@Test\nvoid test() {\n    \n    when(entityManager.createNativeQuery(anyString())).thenReturn(query);\n    when(query.executeUpdate()).thenReturn(1);\n    assertEquals(daoImpl.sendToHistorical(), 1);\n\n}\n</code></pre>\n"}],"owner":{"account_id":25780920,"reputation":25,"user_id":19526554,"display_name":"Marcos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75408628,"answer_count":1,"score":0,"last_activity_date":1676018019,"creation_date":1675947815,"question_id":75398991,"body_markdown":"I have tried to test the following class, but I have been unsuccessful.\r\n\r\n```\r\n    @PersistenceContext\r\n    private EntityManager em;\r\n\r\n    @Transactional\r\n    public int sendToTableOne()\r\n    {\r\n        return em.createNativeQuery(&quot;INSERT INTO TABLE_ONE&quot;\r\n                        + &quot; SELECT * FROM TABLE_TWO&quot;)\r\n                .executeUpdate();\r\n    }\r\n```\r\n\r\n\r\n\r\nHow can I test this class?\r\n\r\nI&#39;m using JUnit Jupiter on Spring framework.\r\n\r\n","title":"Test EntityManager with JUnit and Mockito","body":"<p>I have tried to test the following class, but I have been unsuccessful.</p>\n<pre><code>    @PersistenceContext\n    private EntityManager em;\n\n    @Transactional\n    public int sendToTableOne()\n    {\n        return em.createNativeQuery(&quot;INSERT INTO TABLE_ONE&quot;\n                        + &quot; SELECT * FROM TABLE_TWO&quot;)\n                .executeUpdate();\n    }\n</code></pre>\n<p>How can I test this class?</p>\n<p>I'm using JUnit Jupiter on Spring framework.</p>\n"},{"tags":["java","sonarqube","sonarlint"],"comments":[{"owner":{"account_id":1912441,"reputation":2961,"user_id":1725871,"accept_rate":88,"display_name":"JoSSte"},"score":2,"creation_date":1576068957,"post_id":59283655,"comment_id":104777788,"body_markdown":"try `boolean outcome = !(count &gt; 0)`","body":"try <code>boolean outcome = !(count &gt; 0)</code>"},{"owner":{"account_id":1912441,"reputation":2961,"user_id":1725871,"accept_rate":88,"display_name":"JoSSte"},"score":2,"creation_date":1576068997,"post_id":59283655,"comment_id":104777813,"body_markdown":"The issue is that you are doing extra gymnastics on an operation that already produces a boolean.","body":"The issue is that you are doing extra gymnastics on an operation that already produces a boolean."},{"owner":{"account_id":10378344,"reputation":231,"user_id":7653889,"accept_rate":86,"display_name":"Dangerous Hamster"},"score":0,"creation_date":1576069076,"post_id":59283655,"comment_id":104777858,"body_markdown":"Thank you ! Not sure why could not think of that","body":"Thank you ! Not sure why could not think of that"},{"owner":{"account_id":1912441,"reputation":2961,"user_id":1725871,"accept_rate":88,"display_name":"JoSSte"},"score":0,"creation_date":1576069175,"post_id":59283655,"comment_id":104777905,"body_markdown":"The shorthand `if` sentence is still a complete if in the eye of the compiler, and that is what sonarqube is complaining about.","body":"The shorthand <code>if</code> sentence is still a complete if in the eye of the compiler, and that is what sonarqube is complaining about."}],"answers":[{"tags":[],"owner":{"account_id":1912441,"reputation":2961,"user_id":1725871,"accept_rate":88,"display_name":"JoSSte"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1676017754,"creation_date":1576069108,"answer_id":59286384,"question_id":59283655,"body_markdown":"The issue is that you are doing *extra gymnastics* on an operation that already produces a `boolean`.\r\n\r\nIf I write out what you have coded in full syntax:\r\n\r\n    boolean outcome;\r\n    \r\n    if(count &gt; 0){\r\n      outcome = false;\r\n    } else {\r\n     outcome = true;\r\n    }\r\n\r\nessentially, you are reversing the `count &gt; 0`\r\n\r\nSo try \r\n```java \r\nboolean outcome = !(count &gt; 0)\r\n```  \r\nor even better \r\n```java \r\nboolean outcome = count &lt;= 0\r\n```","title":"Sonarqube : Boolean literals should not be redundant","body":"<p>The issue is that you are doing <em>extra gymnastics</em> on an operation that already produces a <code>boolean</code>.</p>\n<p>If I write out what you have coded in full syntax:</p>\n<pre><code>boolean outcome;\n\nif(count &gt; 0){\n  outcome = false;\n} else {\n outcome = true;\n}\n</code></pre>\n<p>essentially, you are reversing the <code>count &gt; 0</code></p>\n<p>So try</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean outcome = !(count &gt; 0)\n</code></pre>\n<p>or even better</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean outcome = count &lt;= 0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10378344,"reputation":231,"user_id":7653889,"accept_rate":86,"display_name":"Dangerous Hamster"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596008124,"creation_date":1596008124,"answer_id":63148572,"question_id":59283655,"body_markdown":"For reference to others I was being dumb and SonarQube correct in reporting the above as it&#39;s doing more than needed. Correct code is:\r\n\r\n    boolean outcome = count &gt; 0;\r\n\r\nyou do not need the ternary statement the result of count &gt; 0 is a true/false value...\r\n\r\nSo as stated above to reverse that outcome is simple\r\n\r\n     boolean outcome = !(count &gt; 0);","title":"Sonarqube : Boolean literals should not be redundant","body":"<p>For reference to others I was being dumb and SonarQube correct in reporting the above as it's doing more than needed. Correct code is:</p>\n<pre><code>boolean outcome = count &gt; 0;\n</code></pre>\n<p>you do not need the ternary statement the result of count &gt; 0 is a true/false value...</p>\n<p>So as stated above to reverse that outcome is simple</p>\n<pre><code> boolean outcome = !(count &gt; 0);\n</code></pre>\n"}],"owner":{"account_id":10378344,"reputation":231,"user_id":7653889,"accept_rate":86,"display_name":"Dangerous Hamster"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9701,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59286384,"answer_count":2,"score":1,"last_activity_date":1676017754,"creation_date":1576060047,"question_id":59283655,"body_markdown":"I have the following nice one liner : \r\n\r\n    boolean outcome = count &gt; 0 ? false : true;\r\n\r\nBut from sonaqube I get &#39;Remove the literal &quot;false&quot; boolean value&#39;\r\n\r\nThe [solution][1] seems to assume you can re-write as a function \r\n\r\nBut even that function will have that simple one liner and put me in the same position, I don&#39;t quite understand how to fix ? Ideas ?\r\n\r\n\r\n  [1]: https://rules.sonarsource.com/java/tag/clumsy/RSPEC-1125","title":"Sonarqube : Boolean literals should not be redundant","body":"<p>I have the following nice one liner : </p>\n\n<pre><code>boolean outcome = count &gt; 0 ? false : true;\n</code></pre>\n\n<p>But from sonaqube I get 'Remove the literal \"false\" boolean value'</p>\n\n<p>The <a href=\"https://rules.sonarsource.com/java/tag/clumsy/RSPEC-1125\" rel=\"nofollow noreferrer\">solution</a> seems to assume you can re-write as a function </p>\n\n<p>But even that function will have that simple one liner and put me in the same position, I don't quite understand how to fix ? Ideas ?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1614819400,"post_id":66456025,"comment_id":117504305,"body_markdown":"its spring boot autoconfiguration https://docs.spring.io/spring-security/site/docs/current/reference/html5/#servlet-hello-auto-configuration also i suggest you switch out jjwt for https://docs.spring.io/spring-security/site/docs/current/reference/html5/#spring-security-oauth2-jose as spring has default support for JOSE.","body":"its spring boot autoconfiguration <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#servlet-hello-auto-configuration\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/site/docs/current/reference/&hellip;</a> also i suggest you switch out jjwt for <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#spring-security-oauth2-jose\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/site/docs/current/reference/&hellip;</a> as spring has default support for JOSE."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1614819505,"post_id":66456025,"comment_id":117504325,"body_markdown":"also spring boot has default support for jwt with already a built in jwt filter so no need to register your own custom jwt filter. https://docs.spring.io/spring-security/site/docs/current/reference/html5/#oauth2resourceserver-jwt-architecture which means that if you want to use JWT all you need to to do is to register some beans , and then each application can define what endpoints they want JWT authentication on and they will get your bean. No nead to register a filter and build a custom filter chain.","body":"also spring boot has default support for jwt with already a built in jwt filter so no need to register your own custom jwt filter. <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#oauth2resourceserver-jwt-architecture\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/site/docs/current/reference/&hellip;</a> which means that if you want to use JWT all you need to to do is to register some beans , and then each application can define what endpoints they want JWT authentication on and they will get your bean. No nead to register a filter and build a custom filter chain."}],"answers":[{"tags":[],"owner":{"account_id":9020444,"reputation":305,"user_id":6721713,"accept_rate":40,"display_name":"Vlad  Yurevich"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1614877489,"creation_date":1614877489,"answer_id":66479661,"question_id":66456025,"body_markdown":"Initially, the default `SecurityFilterChain` are disabled if there is any `WebSecurityConfigurerAdapter`. However, it doesn&#39;t work if the priority of the spring security auto-configuration is higher than auto-configuration with your `WebSecurityConfigurerAdapter`.\r\n\r\n**Solution**: I added `@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)` above the auto-configuration class. There is no default security filter chain any longer :)\r\n\r\nAbout `@EnableGlobalMethodSecurity`... It was about caches. Suddenly, it got fixed.","title":"Can&#39;t use WebSecurityConfigurerAdapter in a custom spring boot starter","body":"<p>Initially, the default <code>SecurityFilterChain</code> are disabled if there is any <code>WebSecurityConfigurerAdapter</code>. However, it doesn't work if the priority of the spring security auto-configuration is higher than auto-configuration with your <code>WebSecurityConfigurerAdapter</code>.</p>\n<p><strong>Solution</strong>: I added <code>@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</code> above the auto-configuration class. There is no default security filter chain any longer :)</p>\n<p>About <code>@EnableGlobalMethodSecurity</code>... It was about caches. Suddenly, it got fixed.</p>\n"},{"tags":[],"owner":{"account_id":7972361,"reputation":80,"user_id":6016579,"display_name":"mabreu0"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633990227,"creation_date":1633990227,"answer_id":69532969,"question_id":66456025,"body_markdown":"Take a look at project structure, there might be a securityFilterChain coming from xml configuration rather than class extension. XML with http tag.","title":"Can&#39;t use WebSecurityConfigurerAdapter in a custom spring boot starter","body":"<p>Take a look at project structure, there might be a securityFilterChain coming from xml configuration rather than class extension. XML with http tag.</p>\n"},{"tags":[],"owner":{"account_id":6554205,"reputation":8514,"user_id":5067493,"accept_rate":81,"display_name":"Shree Krishna"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1650255179,"creation_date":1650255179,"answer_id":71907533,"question_id":66456025,"body_markdown":"For googlers\r\n\r\nYou can&#39;t use \r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http)...\r\nwhile extending `WebSecurityConfigurerAdapter`.\r\n\r\nEither choose above one or only override \r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http)\r\n\r\n","title":"Can&#39;t use WebSecurityConfigurerAdapter in a custom spring boot starter","body":"<p>For googlers</p>\n<p>You can't use</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http)...\n</code></pre>\n<p>while extending <code>WebSecurityConfigurerAdapter</code>.</p>\n<p>Either choose above one or only override</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27749009,"reputation":1,"user_id":21183810,"display_name":"marichibo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676017556,"creation_date":1675987664,"answer_id":75405718,"question_id":66456025,"body_markdown":"I resolved same error by changing order of servlets in web.xml.\r\n↓ no problem order xxx -&gt; yyy 〇  　yyy -&gt; xxx &#215;   \r\n\r\n\r\n    &lt;servlet&gt;\r\n       &lt;servlet-name&gt;xxxServlet&lt;/servlet-name&gt;\r\n       &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n       … ommit\r\n    &lt;/servlet&gt;\r\n    &lt;servlet-mapping&gt;\r\n       &lt;servlet-name&gt;xxxServlet&lt;/servlet-name&gt;\r\n       &lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n    &lt;servlet&gt; \r\n        &lt;servlet-name&gt;yyyServlet&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n       … ommit\r\n    &lt;/servlet&gt;\r\n    &lt;servlet-mapping&gt;\r\n         &lt;servlet-name&gt;yyyServlet&lt;/servlet-name&gt;\r\n         &lt;url-pattern&gt;/yyy/*&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;","title":"Can&#39;t use WebSecurityConfigurerAdapter in a custom spring boot starter","body":"<p>I resolved same error by changing order of servlets in web.xml.\n↓ no problem order xxx -&gt; yyy 〇  　yyy -&gt; xxx ×</p>\n<pre><code>&lt;servlet&gt;\n   &lt;servlet-name&gt;xxxServlet&lt;/servlet-name&gt;\n   &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n   … ommit\n&lt;/servlet&gt;\n&lt;servlet-mapping&gt;\n   &lt;servlet-name&gt;xxxServlet&lt;/servlet-name&gt;\n   &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n&lt;servlet&gt; \n    &lt;servlet-name&gt;yyyServlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n   … ommit\n&lt;/servlet&gt;\n&lt;servlet-mapping&gt;\n     &lt;servlet-name&gt;yyyServlet&lt;/servlet-name&gt;\n     &lt;url-pattern&gt;/yyy/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n"}],"owner":{"account_id":9020444,"reputation":305,"user_id":6721713,"accept_rate":40,"display_name":"Vlad  Yurevich"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10990,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":4,"score":6,"last_activity_date":1676017556,"creation_date":1614770554,"question_id":66456025,"body_markdown":"I&#39;m trying to create my own spring boot starter for my custom security configuration (LDAP + JWT) via defining configuration class which extends from `WebSecurityConfigurerAdapter`. However, when I launch my application with this starter I get:\r\n\r\n    IllegalStateException: Found WebSecurityConfigurerAdapter as well as SecurityFilterChain.\r\n    Please select just one.\r\n\r\nI found out that it&#39;s not possible any longer to do that due to [this issue of the spring security][1]. There is an assertion in WebSecurityConfiguration of the spring:\r\n\r\n[![Snapshot from WebSecurityConfiguration.java][2]][2]\r\n\r\n**I solved this** adding to the starter the following (according to the issue):\r\n\r\n    @Bean\r\n    @Order(1) //Explanation for this below\r\n    open fun filterChain(http: HttpSecurity, jwtHelper: JwtHelper): SecurityFilterChain {\r\n        return http.authorizeRequests()\r\n               ...\r\n                   .addFilterBefore(JwtAuthenticationFilter(jwtHelper), UsernamePasswordAuthenticationFilter::class.java)\r\n                   .and().build()\r\n    }\r\n    \r\n    @Bean\r\n    open fun authenticationProvider(ldapConfig: LdapConfig): ActiveDirectoryLdapAuthenticationProvider {\r\n        return ActiveDirectoryLdapAuthenticationProvider(...)\r\n    }\r\n\r\nI added `@Order(1)` because there are two `securityFilterChains`: mine (defined in the configurartion above) and another one from an unknown source. I suppose, the latter is the reason of impossibility of using `WebSecurityConfigurerAdapter`.\r\n## The main problem is that I can&#39;t find where that comes from. ##\r\n&lt;br/&gt;\r\n\r\nBreakpoint from `WebSecurityConfiguration`... just in case:\r\n[![Break point from WebSecurityConfiguration][3]][3]\r\n\r\nI assume, because of that I can&#39;t use `@EnableGlobalMethodSecurity(prePostEnabled = true)` \r\nas well. It says:\r\n\r\n    Cannot apply org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration$EnableGlobalAuthenticationAutowiredConfigurer\r\n    to already built object\r\n\r\n---\r\nHere is list of my dependencies:\r\n\r\n1) Module with models which is used by the starter (name: my-ldap-security-model):\r\n\r\n```\r\ndependencies {\r\n    compileOnly &#39;org.springframework.security:spring-security-core&#39;\r\n    compileOnly &#39;org.springframework:spring-web&#39;\r\n    compileOnly &#39;javax.servlet:javax.servlet-api&#39;\r\n    api &#39;jakarta.xml.bind:jakarta.xml.bind-api&#39;\r\n    api &#39;org.glassfish.jaxb:jaxb-runtime&#39;\r\n    api &#39;io.jsonwebtoken:jjwt&#39;\r\n}\r\n```\r\n2) Module with models which is used by the starter (name: my-ldap-security-spring-boot-starter):\r\n\r\n```\r\ndependencies {\r\n    compile project(&#39;:my-ldap-security-model&#39;)\r\n    compileOnly &#39;javax.servlet:javax.servlet-api&#39;\r\n    api &#39;org.springframework.security:spring-security-core&#39;\r\n    api &#39;org.springframework.security:spring-security-config&#39;\r\n    api &#39;org.springframework.security:spring-security-web&#39;\r\n    api &#39;org.springframework:spring-web&#39;\r\n    api &#39;org.springframework.security:spring-security-ldap&#39;\r\n}\r\n```\r\n3) App project:\r\n\r\n```\r\ndependencies {\r\n    implementation(&#39;org.springframework.boot:spring-boot-starter-web&#39;)\r\n    implementation(&#39;com.demo.boot:my-ldap-security-spring-boot-starter:0.0.1&#39;)\r\n}\r\n```\r\n\r\n\r\n## Please, help me find out the root of that filter. ##\r\n\r\n  [1]: https://github.com/spring-projects/spring-security/issues/8804\r\n  [2]: https://i.stack.imgur.com/pMPBr.png\r\n  [3]: https://i.stack.imgur.com/dmYQL.png","title":"Can&#39;t use WebSecurityConfigurerAdapter in a custom spring boot starter","body":"<p>I'm trying to create my own spring boot starter for my custom security configuration (LDAP + JWT) via defining configuration class which extends from <code>WebSecurityConfigurerAdapter</code>. However, when I launch my application with this starter I get:</p>\n<pre><code>IllegalStateException: Found WebSecurityConfigurerAdapter as well as SecurityFilterChain.\nPlease select just one.\n</code></pre>\n<p>I found out that it's not possible any longer to do that due to <a href=\"https://github.com/spring-projects/spring-security/issues/8804\" rel=\"noreferrer\">this issue of the spring security</a>. There is an assertion in WebSecurityConfiguration of the spring:</p>\n<p><a href=\"https://i.stack.imgur.com/pMPBr.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/pMPBr.png\" alt=\"Snapshot from WebSecurityConfiguration.java\" /></a></p>\n<p><strong>I solved this</strong> adding to the starter the following (according to the issue):</p>\n<pre><code>@Bean\n@Order(1) //Explanation for this below\nopen fun filterChain(http: HttpSecurity, jwtHelper: JwtHelper): SecurityFilterChain {\n    return http.authorizeRequests()\n           ...\n               .addFilterBefore(JwtAuthenticationFilter(jwtHelper), UsernamePasswordAuthenticationFilter::class.java)\n               .and().build()\n}\n\n@Bean\nopen fun authenticationProvider(ldapConfig: LdapConfig): ActiveDirectoryLdapAuthenticationProvider {\n    return ActiveDirectoryLdapAuthenticationProvider(...)\n}\n</code></pre>\n<p>I added <code>@Order(1)</code> because there are two <code>securityFilterChains</code>: mine (defined in the configurartion above) and another one from an unknown source. I suppose, the latter is the reason of impossibility of using <code>WebSecurityConfigurerAdapter</code>.</p>\n<h2>The main problem is that I can't find where that comes from.</h2>\n<br/>\n<p>Breakpoint from <code>WebSecurityConfiguration</code>... just in case:\n<a href=\"https://i.stack.imgur.com/dmYQL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/dmYQL.png\" alt=\"Break point from WebSecurityConfiguration\" /></a></p>\n<p>I assume, because of that I can't use <code>@EnableGlobalMethodSecurity(prePostEnabled = true)</code>\nas well. It says:</p>\n<pre><code>Cannot apply org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration$EnableGlobalAuthenticationAutowiredConfigurer\nto already built object\n</code></pre>\n<hr />\n<p>Here is list of my dependencies:</p>\n<ol>\n<li>Module with models which is used by the starter (name: my-ldap-security-model):</li>\n</ol>\n<pre><code>dependencies {\n    compileOnly 'org.springframework.security:spring-security-core'\n    compileOnly 'org.springframework:spring-web'\n    compileOnly 'javax.servlet:javax.servlet-api'\n    api 'jakarta.xml.bind:jakarta.xml.bind-api'\n    api 'org.glassfish.jaxb:jaxb-runtime'\n    api 'io.jsonwebtoken:jjwt'\n}\n</code></pre>\n<ol start=\"2\">\n<li>Module with models which is used by the starter (name: my-ldap-security-spring-boot-starter):</li>\n</ol>\n<pre><code>dependencies {\n    compile project(':my-ldap-security-model')\n    compileOnly 'javax.servlet:javax.servlet-api'\n    api 'org.springframework.security:spring-security-core'\n    api 'org.springframework.security:spring-security-config'\n    api 'org.springframework.security:spring-security-web'\n    api 'org.springframework:spring-web'\n    api 'org.springframework.security:spring-security-ldap'\n}\n</code></pre>\n<ol start=\"3\">\n<li>App project:</li>\n</ol>\n<pre><code>dependencies {\n    implementation('org.springframework.boot:spring-boot-starter-web')\n    implementation('com.demo.boot:my-ldap-security-spring-boot-starter:0.0.1')\n}\n</code></pre>\n<h2>Please, help me find out the root of that filter.</h2>\n"},{"tags":["java","spring","junit","spring-boot","spring-data"],"answers":[{"tags":[],"owner":{"account_id":9045259,"reputation":5321,"user_id":6737860,"display_name":"Thomas K&#229;sene"},"down_vote_count":0,"up_vote_count":348,"is_accepted":true,"score":348,"last_activity_date":1471888686,"creation_date":1471884960,"answer_id":39084906,"question_id":39084491,"body_markdown":"Indeed, Spring Boot does set itself up for the most part. You can probably already get rid of a lot of the code you posted, especially in `Application`.\r\n\r\nI wish you had included the package names of all your classes, or at least the ones for `Application` and `JpaTest`. The thing about `@DataJpaTest` and a few other annotations is that they look for a `@SpringBootConfiguration` annotation in the current package, and if they cannot find it there, they traverse the package hierarchy until they find it.\r\n\r\nFor example, if the fully qualified name for your test class was `com.example.test.JpaTest` and the one for your application was `com.example.Application`, then your test class would be able to find the `@SpringBootApplication` (and therein, the `@SpringBootConfiguration`).\r\n\r\nIf the application resided in a different branch of the package hierarchy, however, like `com.example.application.Application`, it would *not* find it.\r\n\r\nExample\r\n-------\r\n\r\nConsider the following Maven project:\r\n\r\n    my-test-project\r\n      +--pom.xml\r\n      +--src\r\n        +--main\r\n          +--com\r\n            +--example\r\n              +--Application.java\r\n        +--test\r\n          +--com\r\n            +--example\r\n              +--test\r\n                +--JpaTest.java\r\n\r\nAnd then the following content in `Application.java`:\r\n\r\n    package com.example;\r\n\r\n    @SpringBootApplication\r\n    public class Application {\r\n\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(Application.class, args);\r\n        }\r\n    }\r\n\r\nFollowed by the contents of `JpaTest.java`:\r\n\r\n    package com.example.test;\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @DataJpaTest\r\n    public class JpaTest {\r\n    \r\n        @Test\r\n        public void testDummy() {\r\n        }\r\n    }\r\n\r\nEverything should be working. If you create a new folder inside `src/main/com/example` called `app`, and then put your `Application.java` inside it (and update the `package` declaration inside the file), running the test will give you the following error:\r\n\r\n&gt; java.lang.IllegalStateException: Unable to find a @SpringBootConfiguration, you need to use @ContextConfiguration or @SpringBootTest(classes=...) with your test","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<p>Indeed, Spring Boot does set itself up for the most part. You can probably already get rid of a lot of the code you posted, especially in <code>Application</code>.</p>\n\n<p>I wish you had included the package names of all your classes, or at least the ones for <code>Application</code> and <code>JpaTest</code>. The thing about <code>@DataJpaTest</code> and a few other annotations is that they look for a <code>@SpringBootConfiguration</code> annotation in the current package, and if they cannot find it there, they traverse the package hierarchy until they find it.</p>\n\n<p>For example, if the fully qualified name for your test class was <code>com.example.test.JpaTest</code> and the one for your application was <code>com.example.Application</code>, then your test class would be able to find the <code>@SpringBootApplication</code> (and therein, the <code>@SpringBootConfiguration</code>).</p>\n\n<p>If the application resided in a different branch of the package hierarchy, however, like <code>com.example.application.Application</code>, it would <em>not</em> find it.</p>\n\n<h2>Example</h2>\n\n<p>Consider the following Maven project:</p>\n\n<pre><code>my-test-project\n  +--pom.xml\n  +--src\n    +--main\n      +--com\n        +--example\n          +--Application.java\n    +--test\n      +--com\n        +--example\n          +--test\n            +--JpaTest.java\n</code></pre>\n\n<p>And then the following content in <code>Application.java</code>:</p>\n\n<pre><code>package com.example;\n\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n\n<p>Followed by the contents of <code>JpaTest.java</code>:</p>\n\n<pre><code>package com.example.test;\n\n@RunWith(SpringRunner.class)\n@DataJpaTest\npublic class JpaTest {\n\n    @Test\n    public void testDummy() {\n    }\n}\n</code></pre>\n\n<p>Everything should be working. If you create a new folder inside <code>src/main/com/example</code> called <code>app</code>, and then put your <code>Application.java</code> inside it (and update the <code>package</code> declaration inside the file), running the test will give you the following error:</p>\n\n<blockquote>\n  <p>java.lang.IllegalStateException: Unable to find a @SpringBootConfiguration, you need to use @ContextConfiguration or @SpringBootTest(classes=...) with your test</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2685016,"reputation":1542,"user_id":2319588,"display_name":"Cameron Gagnon"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1496862273,"creation_date":1496862273,"answer_id":44420852,"question_id":39084491,"body_markdown":"In addition to what Thomas K&#229;sene said, you can also add\r\n\r\n    @SpringBootTest(classes=com.package.path.class)\r\n\r\nto the test annotation to specify where it should look for the other class if you didn&#39;t want to refactor your file hierarchy. This is what the error message hints at by saying:\r\n\r\n&gt;     Unable to find a @SpringBootConfiguration, you need to use \r\n&gt;     @ContextConfiguration or @SpringBootTest(classes=...) ...\r\n\r\n\r\n","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<p>In addition to what Thomas Kåsene said, you can also add</p>\n\n<pre><code>@SpringBootTest(classes=com.package.path.class)\n</code></pre>\n\n<p>to the test annotation to specify where it should look for the other class if you didn't want to refactor your file hierarchy. This is what the error message hints at by saying:</p>\n\n<blockquote>\n<pre><code>Unable to find a @SpringBootConfiguration, you need to use \n@ContextConfiguration or @SpringBootTest(classes=...) ...\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1948237,"reputation":2616,"user_id":1752917,"accept_rate":14,"display_name":"Mohammed Rafeeq"},"down_vote_count":1,"up_vote_count":28,"is_accepted":false,"score":27,"last_activity_date":1521460123,"creation_date":1507712030,"answer_id":46683917,"question_id":39084491,"body_markdown":"It is worth to check if you have refactored package name of your main class annotated with `@SpringBootApplication`. In that case the testcase should be in an appropriate package otherwise it will be looking for it in the older package . this was the case for me.","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<p>It is worth to check if you have refactored package name of your main class annotated with <code>@SpringBootApplication</code>. In that case the testcase should be in an appropriate package otherwise it will be looking for it in the older package . this was the case for me.</p>\n"},{"tags":[],"owner":{"account_id":94872,"reputation":17207,"user_id":258772,"display_name":"mrts"},"down_vote_count":0,"up_vote_count":150,"is_accepted":false,"score":150,"last_activity_date":1602767741,"creation_date":1509379975,"answer_id":47019765,"question_id":39084491,"body_markdown":"Configuration is attached to the application class, so the following will set up everything correctly:\r\n\r\n    @SpringBootTest(classes = Application.class)\r\n\r\nExample from the JHipster project [here](https://github.com/jhipster/jhipster-sample-app/blob/e1fa8653cde8e1e7c4af88f223ae7b4c91513ad9/src/test/java/io/github/jhipster/sample/service/MailServiceIT.java).","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<p>Configuration is attached to the application class, so the following will set up everything correctly:</p>\n<pre><code>@SpringBootTest(classes = Application.class)\n</code></pre>\n<p>Example from the JHipster project <a href=\"https://github.com/jhipster/jhipster-sample-app/blob/e1fa8653cde8e1e7c4af88f223ae7b4c91513ad9/src/test/java/io/github/jhipster/sample/service/MailServiceIT.java\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":480584,"reputation":8226,"user_id":893898,"accept_rate":42,"display_name":"Hantsy"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1515984689,"creation_date":1515816443,"answer_id":48236834,"question_id":39084491,"body_markdown":"The **test slice** provided in Spring Boot 1.4 brought **feature** oriented test capabilities. \r\n\r\nFor example, \r\n\r\n**@JsonTest** provides a simple Jackson environment to test the json serialization and deserialization.\r\n\r\n**@WebMvcTest** provides a mock web environment, it can specify the controller class for test and inject the MockMvc in the test.\r\n\r\n\t@WebMvcTest(PostController.class)\r\n\tpublic class PostControllerMvcTest{\r\n\r\n\t\t@Inject MockMvc mockMvc;\r\n\r\n\t}\r\n\r\n**@DataJpaTest** will prepare an embedded database and provides basic JPA environment for the test.\r\n\r\n**@RestClientTest** provides REST client environment for the test, esp the RestTemplateBuilder etc.\r\n\r\nThese annotations are not composed with SpringBootTest, they are combined with a series of `AutoconfigureXXX` and a `@TypeExcludesFilter` annotations.\r\n\r\nHave a look at `@DataJpaTest`.\r\n\r\n\t@Target(ElementType.TYPE)\r\n\t@Retention(RetentionPolicy.RUNTIME)\r\n\t@Documented\r\n\t@Inherited\r\n\t@BootstrapWith(SpringBootTestContextBootstrapper.class)\r\n\t@OverrideAutoConfiguration(enabled = false)\r\n\t@TypeExcludeFilters(DataJpaTypeExcludeFilter.class)\r\n\t@Transactional\r\n\t@AutoConfigureCache\r\n\t@AutoConfigureDataJpa\r\n\t@AutoConfigureTestDatabase\r\n\t@AutoConfigureTestEntityManager\r\n\t@ImportAutoConfiguration\r\n\tpublic @interface DataJpaTest {}\r\n\r\nYou can add your @AutoconfigureXXX annotation to override the default config.\r\n\r\n    @AutoConfigureTestDatabase(replace=NONE)\r\n    @DataJpaTest\r\n    public class TestClass{\r\n    }\r\n\t\r\nLet&#39;s have a look at your problem,\r\n\r\n1. Do not mix `@DataJpaTest` and `@SpringBootTest`, as said above `@DataJpaTest` will build the configuration in its own way(eg. by default, it will try to prepare an embedded H2 instead) from the application configuration inheritance. `@DataJpaTest` is designated for **test slice**.\r\n2. If you want to customize the configuration of `@DataJpaTest`, please read [this official blog entry](https://spring.io/blog/2016/08/30/custom-test-slice-with-spring-boot-1-4) from Spring.io for this topic,(a little tedious).\r\n3. Split the configurations in `Application` into smaller configurations by features, such as `WebConfig`, `DataJpaConfig` etc. A **full featured configuration**(mixed web, data, security etc) also caused your **test slice** based tests to be failed. Check the [test samples](https://github.com/hantsy/angularjs-springmvc-sample-boot/tree/master/src/test/java/com/hantsylabs/restexample/springmvc/test/slice) in  [my sample](https://github.com/hantsy/angularjs-springmvc-sample-boot).\r\n","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<p>The <strong>test slice</strong> provided in Spring Boot 1.4 brought <strong>feature</strong> oriented test capabilities. </p>\n\n<p>For example, </p>\n\n<p><strong>@JsonTest</strong> provides a simple Jackson environment to test the json serialization and deserialization.</p>\n\n<p><strong>@WebMvcTest</strong> provides a mock web environment, it can specify the controller class for test and inject the MockMvc in the test.</p>\n\n<pre><code>@WebMvcTest(PostController.class)\npublic class PostControllerMvcTest{\n\n    @Inject MockMvc mockMvc;\n\n}\n</code></pre>\n\n<p><strong>@DataJpaTest</strong> will prepare an embedded database and provides basic JPA environment for the test.</p>\n\n<p><strong>@RestClientTest</strong> provides REST client environment for the test, esp the RestTemplateBuilder etc.</p>\n\n<p>These annotations are not composed with SpringBootTest, they are combined with a series of <code>AutoconfigureXXX</code> and a <code>@TypeExcludesFilter</code> annotations.</p>\n\n<p>Have a look at <code>@DataJpaTest</code>.</p>\n\n<pre><code>@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Inherited\n@BootstrapWith(SpringBootTestContextBootstrapper.class)\n@OverrideAutoConfiguration(enabled = false)\n@TypeExcludeFilters(DataJpaTypeExcludeFilter.class)\n@Transactional\n@AutoConfigureCache\n@AutoConfigureDataJpa\n@AutoConfigureTestDatabase\n@AutoConfigureTestEntityManager\n@ImportAutoConfiguration\npublic @interface DataJpaTest {}\n</code></pre>\n\n<p>You can add your @AutoconfigureXXX annotation to override the default config.</p>\n\n<pre><code>@AutoConfigureTestDatabase(replace=NONE)\n@DataJpaTest\npublic class TestClass{\n}\n</code></pre>\n\n<p>Let's have a look at your problem,</p>\n\n<ol>\n<li>Do not mix <code>@DataJpaTest</code> and <code>@SpringBootTest</code>, as said above <code>@DataJpaTest</code> will build the configuration in its own way(eg. by default, it will try to prepare an embedded H2 instead) from the application configuration inheritance. <code>@DataJpaTest</code> is designated for <strong>test slice</strong>.</li>\n<li>If you want to customize the configuration of <code>@DataJpaTest</code>, please read <a href=\"https://spring.io/blog/2016/08/30/custom-test-slice-with-spring-boot-1-4\" rel=\"noreferrer\">this official blog entry</a> from Spring.io for this topic,(a little tedious).</li>\n<li>Split the configurations in <code>Application</code> into smaller configurations by features, such as <code>WebConfig</code>, <code>DataJpaConfig</code> etc. A <strong>full featured configuration</strong>(mixed web, data, security etc) also caused your <strong>test slice</strong> based tests to be failed. Check the <a href=\"https://github.com/hantsy/angularjs-springmvc-sample-boot/tree/master/src/test/java/com/hantsylabs/restexample/springmvc/test/slice\" rel=\"noreferrer\">test samples</a> in  <a href=\"https://github.com/hantsy/angularjs-springmvc-sample-boot\" rel=\"noreferrer\">my sample</a>.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3680017,"reputation":3,"user_id":3065164,"display_name":"Umesh G"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1539774468,"creation_date":1539774468,"answer_id":52853425,"question_id":39084491,"body_markdown":"    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\r\n    import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureWebMvc;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    import org.springframework.test.context.junit4.SpringRunner;\r\n    \r\n    \r\n    \r\n    @RunWith(SpringRunner.class)\r\n    @DataJpaTest\r\n    @SpringBootTest\r\n    @AutoConfigureWebMvc\r\n    public class RepoTest {\r\n    \t\r\n    \t@Autowired\r\n    \tprivate ThingShiftDetailsRepository thingShiftDetailsRepo;\r\n    \t\r\n    \t@Test\r\n    \tpublic void findThingShiftDetails() {\r\n    \t\t\tShiftDetails details = new ShiftDetails();\r\n    \t\t\tdetails.setThingId(1);\r\n    \t\t\t\r\n    \t\t\tthingShiftDetailsRepo.save(details);\r\n    \t\t\t\r\n    \t\t\tShiftDetails dbDetails = thingShiftDetailsRepo.findByThingId(1);\r\n    \t\t\tSystem.out.println(dbDetails);\r\n    \t}\r\n    }\r\n\r\n\r\nAbove annotations worked well for me. I am using spring boot with JPA. ","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<pre><code>import org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureWebMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.junit4.SpringRunner;\n\n\n\n@RunWith(SpringRunner.class)\n@DataJpaTest\n@SpringBootTest\n@AutoConfigureWebMvc\npublic class RepoTest {\n\n    @Autowired\n    private ThingShiftDetailsRepository thingShiftDetailsRepo;\n\n    @Test\n    public void findThingShiftDetails() {\n            ShiftDetails details = new ShiftDetails();\n            details.setThingId(1);\n\n            thingShiftDetailsRepo.save(details);\n\n            ShiftDetails dbDetails = thingShiftDetailsRepo.findByThingId(1);\n            System.out.println(dbDetails);\n    }\n}\n</code></pre>\n\n<p>Above annotations worked well for me. I am using spring boot with JPA. </p>\n"},{"tags":[],"owner":{"account_id":2439515,"reputation":1653,"user_id":2128439,"accept_rate":77,"display_name":"silver"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1542119767,"creation_date":1542119767,"answer_id":53283358,"question_id":39084491,"body_markdown":"I think that the best solution for this issue is to align your tests folders structure with the application folder structure.\r\n\r\nI had the same issue which was caused by duplicating my project from a different folder structure project.\r\n\r\nif your test project and your application project will have the same structure you will not be required to add any special annotations to your tests classes and everything will work as is.","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<p>I think that the best solution for this issue is to align your tests folders structure with the application folder structure.</p>\n\n<p>I had the same issue which was caused by duplicating my project from a different folder structure project.</p>\n\n<p>if your test project and your application project will have the same structure you will not be required to add any special annotations to your tests classes and everything will work as is.</p>\n"},{"tags":[],"owner":{"account_id":4245916,"reputation":338,"user_id":3474613,"display_name":"Nick"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1553039363,"creation_date":1553039363,"answer_id":55251590,"question_id":39084491,"body_markdown":"In my case the packages were different between the Application and Test classes\r\n\r\n    package com.example.abc;\r\n    ...\r\n    @SpringBootApplication\r\n    public class ProducerApplication {\r\n\r\nand\r\n\r\n    package com.example.abc_etc;\r\n    ...\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n    public class ProducerApplicationTest {\r\n\r\nAfter making them agree the tests ran correctly.","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<p>In my case the packages were different between the Application and Test classes</p>\n\n<pre><code>package com.example.abc;\n...\n@SpringBootApplication\npublic class ProducerApplication {\n</code></pre>\n\n<p>and</p>\n\n<pre><code>package com.example.abc_etc;\n...\n@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class ProducerApplicationTest {\n</code></pre>\n\n<p>After making them agree the tests ran correctly.</p>\n"},{"tags":[],"owner":{"account_id":10091232,"reputation":431,"user_id":7458156,"display_name":"hang gao"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1562032654,"creation_date":1562032654,"answer_id":56844368,"question_id":39084491,"body_markdown":"It work fo me \r\n\r\nthe package name of the above test class is changed to the same as the package name of the normal class. \r\n\r\n![](https://static.oschina.net/uploads/space/2018/0111/102730_tlKv_2885163.png)\r\n\r\nchange to this\r\n\r\n![](https://static.oschina.net/uploads/space/2018/0111/103001_vJoi_2885163.png)","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<p>It work fo me </p>\n\n<p>the package name of the above test class is changed to the same as the package name of the normal class. </p>\n\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0111/102730_tlKv_2885163.png\" alt=\"\"></p>\n\n<p>change to this</p>\n\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0111/103001_vJoi_2885163.png\" alt=\"\"></p>\n"},{"tags":[],"owner":{"account_id":4660831,"reputation":99,"user_id":3775160,"display_name":"SumataPatil"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1582642561,"creation_date":1571390701,"answer_id":58447859,"question_id":39084491,"body_markdown":"When all the classes were in same package, test classes were working. As soon as I moved all the java classes to different package to maintain proper project structure I was getting the same error.\r\n\r\nI solved it by providing my main class name in the test class like below.\r\n\r\n    @SpringBootTest(classes=JunitBasicsApplication.class)\r\n","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<p>When all the classes were in same package, test classes were working. As soon as I moved all the java classes to different package to maintain proper project structure I was getting the same error.</p>\n\n<p>I solved it by providing my main class name in the test class like below.</p>\n\n<pre><code>@SpringBootTest(classes=JunitBasicsApplication.class)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2043778,"reputation":17800,"user_id":1824361,"accept_rate":80,"display_name":"Ahmed Nabil"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1588549961,"creation_date":1588549961,"answer_id":61583141,"question_id":39084491,"body_markdown":"In my case  \r\nMake sure your (**`test package` name**) of `YourApplicationTests` is equivalent to the (**`main package` name**). ","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<p>In my case<br>\nMake sure your (<strong><code>test package</code> name</strong>) of <code>YourApplicationTests</code> is equivalent to the (<strong><code>main package</code> name</strong>). </p>\n"},{"tags":[],"owner":{"account_id":159637,"reputation":2203,"user_id":379173,"display_name":"Enrico Giurin"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1592491572,"creation_date":1592491572,"answer_id":62452708,"question_id":39084491,"body_markdown":"I had the same issue and I solved by adding an empty class annotated with `SpringBootApplication` in the root package of the folder *src/test/java*\r\n\r\n    package org.enricogiurin.core;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class CoreTestConfiguration {}\r\n\r\n","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<p>I had the same issue and I solved by adding an empty class annotated with <code>SpringBootApplication</code> in the root package of the folder <em>src/test/java</em></p>\n\n<pre><code>package org.enricogiurin.core;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class CoreTestConfiguration {}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1118295,"reputation":2570,"user_id":1107129,"accept_rate":76,"display_name":"happy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600252360,"creation_date":1600252360,"answer_id":63918145,"question_id":39084491,"body_markdown":"In my case I was using the Test class from wrong package.\r\nwhen I replaced `import org.junit.Test;` with import `org.junit.jupiter.api.Test;` it worked.","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<p>In my case I was using the Test class from wrong package.\nwhen I replaced <code>import org.junit.Test;</code> with import <code>org.junit.jupiter.api.Test;</code> it worked.</p>\n"},{"tags":[],"owner":{"account_id":5500955,"reputation":876,"user_id":10783374,"display_name":"Edor Linus"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1600279929,"creation_date":1600279929,"answer_id":63925729,"question_id":39084491,"body_markdown":"Make sure the test class is in a sub-package of your main spring boot class\r\n","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<p>Make sure the test class is in a sub-package of your main spring boot class</p>\n"},{"tags":[],"owner":{"account_id":4427596,"reputation":887,"user_id":3605642,"display_name":"Michal Lonski"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1604057042,"creation_date":1604057042,"answer_id":64607445,"question_id":39084491,"body_markdown":"This is more the the error itself, not answering the original question:\r\n\r\nWe were migrating from java 8 to java 11. Application compiled successfully, but the errors `Unable to find a @SpringBootConfiguration` started to appear in the integration tests when ran from command line using maven (from IntelliJ it worked). \r\n\r\nIt appeared that `maven-failsafe-plugin` stopped seeing the classes on classpath, we fixed that by telling failsafe plugin to include the classes manually:\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;additionalClasspathElements&gt;\r\n                        &lt;additionalClasspathElement&gt;${basedir}/target/classes&lt;/additionalClasspathElement&gt;\r\n                    &lt;/additionalClasspathElements&gt;\r\n                &lt;/configuration&gt;\r\n                ...\r\n            &lt;/plugin&gt;\r\n","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<p>This is more the the error itself, not answering the original question:</p>\n<p>We were migrating from java 8 to java 11. Application compiled successfully, but the errors <code>Unable to find a @SpringBootConfiguration</code> started to appear in the integration tests when ran from command line using maven (from IntelliJ it worked).</p>\n<p>It appeared that <code>maven-failsafe-plugin</code> stopped seeing the classes on classpath, we fixed that by telling failsafe plugin to include the classes manually:</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;additionalClasspathElements&gt;\n                    &lt;additionalClasspathElement&gt;${basedir}/target/classes&lt;/additionalClasspathElement&gt;\n                &lt;/additionalClasspathElements&gt;\n            &lt;/configuration&gt;\n            ...\n        &lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3006965,"reputation":4976,"user_id":2551287,"accept_rate":89,"display_name":"young-ceo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676017512,"creation_date":1675989491,"answer_id":75405865,"question_id":39084491,"body_markdown":"None of the suggested solutions worked because I don&#39;t have `@SpringBootApplication` in the system.  But I figured it out - this is how I fixed:\r\n\r\n```java\r\n// AppConfig.java\r\n@Configuration\r\n@ComponentScan(&quot;foo&quot;)\r\n@ConfigurationPropertiesScan\r\npublic class AppConfig {\r\n    // ...\r\n}\r\n\r\n// HelloWorld.java\r\n@Service\r\npublic class HelloWorld {\r\n    public void foo() {\r\n        // ...\r\n    }\r\n}\r\n\r\n// HelloWorldTest.java\r\n@SpringBootTest(classes = { AppConfig.class, HelloWorld.class })\r\npublic class HelloWorldTest {\r\n    @Autowired private HelloWorld helloWorld;\r\n\r\n    @Test\r\n    public testFoo() {\r\n        this.helloWorld.foo(); // Testing logic\r\n    }\r\n}\r\n```\r\n\r\nThe key is including both `AppConfig.class` and `HelloWorld.class` in `@SpringBootTest`.","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<p>None of the suggested solutions worked because I don't have <code>@SpringBootApplication</code> in the system.  But I figured it out - this is how I fixed:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// AppConfig.java\n@Configuration\n@ComponentScan(&quot;foo&quot;)\n@ConfigurationPropertiesScan\npublic class AppConfig {\n    // ...\n}\n\n// HelloWorld.java\n@Service\npublic class HelloWorld {\n    public void foo() {\n        // ...\n    }\n}\n\n// HelloWorldTest.java\n@SpringBootTest(classes = { AppConfig.class, HelloWorld.class })\npublic class HelloWorldTest {\n    @Autowired private HelloWorld helloWorld;\n\n    @Test\n    public testFoo() {\n        this.helloWorld.foo(); // Testing logic\n    }\n}\n</code></pre>\n<p>The key is including both <code>AppConfig.class</code> and <code>HelloWorld.class</code> in <code>@SpringBootTest</code>.</p>\n"}],"owner":{"account_id":2654100,"reputation":2391,"user_id":2295156,"accept_rate":83,"display_name":"Thomas Billet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":282988,"favorite_count":0,"down_vote_count":0,"up_vote_count":235,"accepted_answer_id":39084906,"answer_count":16,"score":235,"last_activity_date":1676017512,"creation_date":1471883402,"question_id":39084491,"body_markdown":"I&#39;m trying to run a simple Junit test to see if my CrudRepositories are indeed working.\r\n\r\nThe error I keep getting is:\r\n\r\n&gt; Unable to find a @SpringBootConfiguration, you need to use @ContextConfiguration or @SpringBootTest(classes=...) with your test\r\njava.lang.IllegalStateException\r\n\r\n\r\nDoesn&#39;t Spring Boot configure itself?\r\n\r\nMy Test Class:\r\n\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @DataJpaTest\r\n    @SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)\r\n    public class JpaTest {\r\n    \r\n    @Autowired\r\n    private AccountRepository repository;\r\n    \r\n    @After\r\n    public void clearDb(){\r\n        repository.deleteAll();\r\n    }\r\n    \r\n     @Test\r\n     public void createAccount(){\r\n         long id = 12;\r\n         Account u = new Account(id,&quot;Tim Viz&quot;);\r\n         repository.save(u);\r\n          \r\n         assertEquals(repository.findOne(id),u);\r\n          \r\n     }\r\n      \r\n      \r\n     @Test\r\n     public void findAccountByUsername(){\r\n         long id = 12;\r\n         String username = &quot;Tim Viz&quot;;\r\n         Account u = new Account(id,username);\r\n         repository.save(u);\r\n          \r\n         assertEquals(repository.findByUsername(username),u);\r\n          \r\n     }\r\n      \r\nMy Spring Boot application starter:\r\n\r\n    @SpringBootApplication\r\n    @EnableJpaRepositories(basePackages = {&quot;domain.repositories&quot;})\r\n    @ComponentScan(basePackages = {&quot;controllers&quot;,&quot;domain&quot;})\r\n    @EnableWebMvc\r\n    @PropertySources(value    {@PropertySource(&quot;classpath:application.properties&quot;)})\r\n        @EntityScan(basePackages={&quot;domain&quot;})\r\n        public class Application extends SpringBootServletInitializer {\r\n            public static void main(String[] args) {\r\n                ApplicationContext ctx = SpringApplication.run(Application.class, args);         \r\n     \r\n            }\r\n        }\r\n\r\n \r\nMy Repository:\r\n\r\n    public interface AccountRepository extends CrudRepository&lt;Account,Long&gt; {\r\n    \r\n        public Account findByUsername(String username);\r\n    \r\n        }\r\n    }","title":"Unable to find a @SpringBootConfiguration when doing a JpaTest","body":"<p>I'm trying to run a simple Junit test to see if my CrudRepositories are indeed working.</p>\n<p>The error I keep getting is:</p>\n<blockquote>\n<p>Unable to find a @SpringBootConfiguration, you need to use @ContextConfiguration or @SpringBootTest(classes=...) with your test\njava.lang.IllegalStateException</p>\n</blockquote>\n<p>Doesn't Spring Boot configure itself?</p>\n<p>My Test Class:</p>\n<pre><code>@RunWith(SpringRunner.class)\n@DataJpaTest\n@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)\npublic class JpaTest {\n\n@Autowired\nprivate AccountRepository repository;\n\n@After\npublic void clearDb(){\n    repository.deleteAll();\n}\n\n @Test\n public void createAccount(){\n     long id = 12;\n     Account u = new Account(id,&quot;Tim Viz&quot;);\n     repository.save(u);\n      \n     assertEquals(repository.findOne(id),u);\n      \n }\n  \n  \n @Test\n public void findAccountByUsername(){\n     long id = 12;\n     String username = &quot;Tim Viz&quot;;\n     Account u = new Account(id,username);\n     repository.save(u);\n      \n     assertEquals(repository.findByUsername(username),u);\n      \n }\n  \n</code></pre>\n<p>My Spring Boot application starter:</p>\n<pre><code>@SpringBootApplication\n@EnableJpaRepositories(basePackages = {&quot;domain.repositories&quot;})\n@ComponentScan(basePackages = {&quot;controllers&quot;,&quot;domain&quot;})\n@EnableWebMvc\n@PropertySources(value    {@PropertySource(&quot;classpath:application.properties&quot;)})\n    @EntityScan(basePackages={&quot;domain&quot;})\n    public class Application extends SpringBootServletInitializer {\n        public static void main(String[] args) {\n            ApplicationContext ctx = SpringApplication.run(Application.class, args);         \n \n        }\n    }\n</code></pre>\n<p>My Repository:</p>\n<pre><code>public interface AccountRepository extends CrudRepository&lt;Account,Long&gt; {\n\n    public Account findByUsername(String username);\n\n    }\n}\n</code></pre>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1676018986,"post_id":75408509,"comment_id":133056513,"body_markdown":"I figured out once I set prefferedSize to the desktop the InternalFrames are showing and the desktoppane itself as well. But what I am actually after is to adjust the size based on its content (the InternalFrames) once they get added. Is there any way to do this, as I dont want to initially set a size of the desktopPane when there is nothing inside of it.","body":"I figured out once I set prefferedSize to the desktop the InternalFrames are showing and the desktoppane itself as well. But what I am actually after is to adjust the size based on its content (the InternalFrames) once they get added. Is there any way to do this, as I dont want to initially set a size of the desktopPane when there is nothing inside of it."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1676029254,"post_id":75408509,"comment_id":133059518,"body_markdown":"[mcve] please ..","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please .."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1676041098,"post_id":75408509,"comment_id":133063226,"body_markdown":"*I dont want to initially set a size of the desktopPane when there is nothing inside of it.* -  Add a `ContainerListener` to the desktop pane and handle the two events to set the preferred size as requirement. You would then need to `revalidate()` to make sure the layout manager is invoked.","body":"<i>I dont want to initially set a size of the desktopPane when there is nothing inside of it.</i> -  Add a <code>ContainerListener</code> to the desktop pane and handle the two events to set the preferred size as requirement. You would then need to <code>revalidate()</code> to make sure the layout manager is invoked."}],"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676017258,"creation_date":1676017258,"question_id":75408509,"body_markdown":"I have a class that is extending JInternalFrame which also holds a JDesktopPane that should hold another JInternalFrame which can be added on a button click.\r\n\r\nI can log that the JInternalFrame is constructed, but it is not shown on its parent JInternalFrame and I dont know why.\r\n\r\nHere are the relevant sections:\r\n\r\nParent class\r\n\r\n        this.add(topPanel,BorderLayout.NORTH);\r\n        this.add(tableScrollpane, BorderLayout.CENTER);\r\n        this.add(desktop,BorderLayout.SOUTH);       //The parents Desktop pane to which I want to add internalframes on button click\r\n\r\n\r\nThe method that should add a new JInternalFrame to the desktop (JDesktopPane of parent)\r\n\r\n     private void addChart(Market market){\r\n        this.desktop.add(new Chart(market.getSymbol(),this.quoteMarket, Indicators.convertToTa4JBarSeries(market.getSymbol(),market.getCandles())));\r\n    }\r\n\r\n\r\nThe JInternalFrame class that should be created and visible on the parents desktop pane. The constructor gets called, I can see that in the log section.\r\n\r\n    public class Chart extends JInternalFrame {\r\n    public Chart(String title, String quoteMarket,BarSeries barSeries){\r\n        System.out.println(&quot;Chart created&quot;);\r\n        setTitle(title + &quot; &quot; + quoteMarket);\r\n        setSize(500,500);\r\n        setMaximizable(true);\r\n        setIconifiable(true);\r\n        setClosable(true);\r\n        setResizable(true);\r\n        setLayout(new GridLayout(0,1));\r\n        this.displayChart(title,quoteMarket,barSeries);\r\n        this.pack();\r\n        this.show();\r\n        this.setVisible(true);\r\n    }","title":"JInternalFrame inside JInternal frame not shown","body":"<p>I have a class that is extending JInternalFrame which also holds a JDesktopPane that should hold another JInternalFrame which can be added on a button click.</p>\n<p>I can log that the JInternalFrame is constructed, but it is not shown on its parent JInternalFrame and I dont know why.</p>\n<p>Here are the relevant sections:</p>\n<p>Parent class</p>\n<pre><code>    this.add(topPanel,BorderLayout.NORTH);\n    this.add(tableScrollpane, BorderLayout.CENTER);\n    this.add(desktop,BorderLayout.SOUTH);       //The parents Desktop pane to which I want to add internalframes on button click\n</code></pre>\n<p>The method that should add a new JInternalFrame to the desktop (JDesktopPane of parent)</p>\n<pre><code> private void addChart(Market market){\n    this.desktop.add(new Chart(market.getSymbol(),this.quoteMarket, Indicators.convertToTa4JBarSeries(market.getSymbol(),market.getCandles())));\n}\n</code></pre>\n<p>The JInternalFrame class that should be created and visible on the parents desktop pane. The constructor gets called, I can see that in the log section.</p>\n<pre><code>public class Chart extends JInternalFrame {\npublic Chart(String title, String quoteMarket,BarSeries barSeries){\n    System.out.println(&quot;Chart created&quot;);\n    setTitle(title + &quot; &quot; + quoteMarket);\n    setSize(500,500);\n    setMaximizable(true);\n    setIconifiable(true);\n    setClosable(true);\n    setResizable(true);\n    setLayout(new GridLayout(0,1));\n    this.displayChart(title,quoteMarket,barSeries);\n    this.pack();\n    this.show();\n    this.setVisible(true);\n}\n</code></pre>\n"},{"tags":["java","docker","maven","caching","dockerfile"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1487002058,"post_id":42208442,"comment_id":71578057,"body_markdown":"Make a data container which contains the downloaded artifacts...How many modules are you building? How many tests do you run? Cause 20 minutes sounds very long?","body":"Make a data container which contains the downloaded artifacts...How many modules are you building? How many tests do you run? Cause 20 minutes sounds very long?"},{"owner":{"account_id":1704246,"reputation":3539,"user_id":1563654,"accept_rate":42,"display_name":"Daniel Watrous"},"score":0,"creation_date":1487002888,"post_id":42208442,"comment_id":71578600,"body_markdown":"Can you explain what you mean by data container? I thought I would end up with a maven image that had that data. Doesn&#39;t &quot;mvn dependency:go-offline&quot; save those dependencies on the local filesystem?","body":"Can you explain what you mean by data container? I thought I would end up with a maven image that had that data. Doesn&#39;t &quot;mvn dependency:go-offline&quot; save those dependencies on the local filesystem?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1487003514,"post_id":42208442,"comment_id":71579021,"body_markdown":"If you have changes on the local file system those will be thrown away if you restart your container...","body":"If you have changes on the local file system those will be thrown away if you restart your container..."},{"owner":{"account_id":1704246,"reputation":3539,"user_id":1563654,"accept_rate":42,"display_name":"Daniel Watrous"},"score":2,"creation_date":1487003703,"post_id":42208442,"comment_id":71579166,"body_markdown":"I get that, but I&#39;m not talking about a container. I&#39;m talking about the docker build process. My understanding is that the state of the filesystem at the end of docker build is part of the image.","body":"I get that, but I&#39;m not talking about a container. I&#39;m talking about the docker build process. My understanding is that the state of the filesystem at the end of docker build is part of the image."},{"owner":{"account_id":1050176,"reputation":8253,"user_id":1054322,"accept_rate":64,"display_name":"MatrixManAtYrService"},"score":0,"creation_date":1524027330,"post_id":42208442,"comment_id":86798428,"body_markdown":"You might consider this: https://stackoverflow.com/a/49891339/1054322","body":"You might consider this: <a href=\"https://stackoverflow.com/a/49891339/1054322\">stackoverflow.com/a/49891339/1054322</a>"},{"owner":{"account_id":4497676,"reputation":491,"user_id":3657087,"display_name":"andriosr"},"score":0,"creation_date":1531927597,"post_id":42208442,"comment_id":89782502,"body_markdown":"Might be helpful: https://medium.com/pismolabs/reducing-image-sizes-and-caching-maven-dependencies-in-docker-builds-b388d3f7aa88","body":"Might be helpful: <a href=\"https://medium.com/pismolabs/reducing-image-sizes-and-caching-maven-dependencies-in-docker-builds-b388d3f7aa88\" rel=\"nofollow noreferrer\">medium.com/pismolabs/&hellip;</a>"},{"owner":{"account_id":2032571,"reputation":1623,"user_id":1815832,"display_name":"csanchez"},"score":0,"creation_date":1546507069,"post_id":42208442,"comment_id":94874703,"body_markdown":"this will work as you expect as the `VOLUME` declaration was removed since Dec&#39;17 https://github.com/carlossg/docker-maven/pull/57","body":"this will work as you expect as the <code>VOLUME</code> declaration was removed since Dec&#39;17 <a href=\"https://github.com/carlossg/docker-maven/pull/57\" rel=\"nofollow noreferrer\">github.com/carlossg/docker-maven/pull/57</a>"},{"owner":{"account_id":172479,"reputation":2348,"user_id":400544,"accept_rate":83,"display_name":"pgpb.padilla"},"score":0,"creation_date":1629217257,"post_id":42208442,"comment_id":121626614,"body_markdown":"Similar to: https://stackoverflow.com/q/68808252/400544","body":"Similar to: <a href=\"https://stackoverflow.com/q/68808252/400544\">stackoverflow.com/q/68808252/400544</a>"}],"answers":[{"tags":[],"owner":{"account_id":5109832,"reputation":297,"user_id":4096809,"display_name":"vstrom coder"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1487002200,"creation_date":1487002200,"answer_id":42208538,"question_id":42208442,"body_markdown":"If the dependencies are downloaded after the container is already up, then you need to commit the changes on this container and create a new image with the downloaded artifacts.","title":"Maven docker cache dependencies","body":"<p>If the dependencies are downloaded after the container is already up, then you need to commit the changes on this container and create a new image with the downloaded artifacts.</p>\n"},{"tags":[],"owner":{"account_id":1543266,"reputation":1581,"user_id":2938149,"accept_rate":77,"display_name":"Bruno9779"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1487012515,"creation_date":1487012515,"answer_id":42211566,"question_id":42208442,"body_markdown":"I had this issue just a litle while ago. The are many solutions on the web, but the one that worked for me is simply mount a volume for the maven modules directory:\r\n\r\n    mkdir /opt/myvolumes/m2\r\n\r\nthen in the Dockerfile:\r\n\r\n    ...\r\n    VOLUME /opt/myvolumes/m2:/root/.m2\r\n    ...\r\n\r\nThere are better solutions, but not as straightforward.\r\n\r\nThis blog post goes the extra mile in helping you to cache everything:\r\n\r\nhttps://keyholesoftware.com/2015/01/05/caching-for-maven-docker-builds/\r\n\r\n","title":"Maven docker cache dependencies","body":"<p>I had this issue just a litle while ago. The are many solutions on the web, but the one that worked for me is simply mount a volume for the maven modules directory:</p>\n\n<pre><code>mkdir /opt/myvolumes/m2\n</code></pre>\n\n<p>then in the Dockerfile:</p>\n\n<pre><code>...\nVOLUME /opt/myvolumes/m2:/root/.m2\n...\n</code></pre>\n\n<p>There are better solutions, but not as straightforward.</p>\n\n<p>This blog post goes the extra mile in helping you to cache everything:</p>\n\n<p><a href=\"https://keyholesoftware.com/2015/01/05/caching-for-maven-docker-builds/\" rel=\"nofollow noreferrer\">https://keyholesoftware.com/2015/01/05/caching-for-maven-docker-builds/</a></p>\n"},{"tags":[],"owner":{"account_id":1704246,"reputation":3539,"user_id":1563654,"accept_rate":42,"display_name":"Daniel Watrous"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1487017466,"creation_date":1487017466,"answer_id":42212884,"question_id":42208442,"body_markdown":"It turns out the image I&#39;m using as a base has a parent image which defines \r\n\r\n    VOLUME &quot;$USER_HOME_DIR/.m2&quot;\r\n\r\nsee: https://github.com/carlossg/docker-maven/blob/322d0dff5d0531ccaf47bf49338cb3e294fd66c8/jdk-8/Dockerfile\r\n\r\nThe result is that during the build, all the files are written to `$USER_HOME_DIR/.m2`, but because it is expected to be a volume, none of those files are persisted with the container image. \r\n\r\nCurrently in Docker there isn&#39;t any way to unregister that volume definition, so it would be necessary to build a separate maven image, rather than use the official maven image.","title":"Maven docker cache dependencies","body":"<p>It turns out the image I'm using as a base has a parent image which defines </p>\n\n<pre><code>VOLUME \"$USER_HOME_DIR/.m2\"\n</code></pre>\n\n<p>see: <a href=\"https://github.com/carlossg/docker-maven/blob/322d0dff5d0531ccaf47bf49338cb3e294fd66c8/jdk-8/Dockerfile\" rel=\"noreferrer\">https://github.com/carlossg/docker-maven/blob/322d0dff5d0531ccaf47bf49338cb3e294fd66c8/jdk-8/Dockerfile</a></p>\n\n<p>The result is that during the build, all the files are written to <code>$USER_HOME_DIR/.m2</code>, but because it is expected to be a volume, none of those files are persisted with the container image. </p>\n\n<p>Currently in Docker there isn't any way to unregister that volume definition, so it would be necessary to build a separate maven image, rather than use the official maven image.</p>\n"},{"tags":[],"owner":{"account_id":5957847,"reputation":5155,"user_id":4683849,"accept_rate":58,"display_name":"Kim"},"down_vote_count":1,"up_vote_count":68,"is_accepted":false,"score":67,"last_activity_date":1564068971,"creation_date":1504162883,"answer_id":45975194,"question_id":42208442,"body_markdown":"Usually, there&#39;s no change in `pom.xml` file but just some other source code changes when you&#39;re attempting to start docker image build. In such circumstance you can do this:\r\n\r\n&lt;b&gt;FYI:&lt;/b&gt;\r\n    \r\n    FROM maven:3-jdk-8\r\n    \r\n    ENV HOME=/home/usr/app\r\n    \r\n    RUN mkdir -p $HOME\r\n    \r\n    WORKDIR $HOME\r\n    \r\n    # 1. add pom.xml only here\r\n\r\n    ADD pom.xml $HOME\r\n    \r\n    # 2. start downloading dependencies\r\n\r\n    RUN [&quot;/usr/local/bin/mvn-entrypoint.sh&quot;, &quot;mvn&quot;, &quot;verify&quot;, &quot;clean&quot;, &quot;--fail-never&quot;]\r\n\r\n    # 3. add all source code and start compiling\r\n    \r\n    ADD . $HOME\r\n    \r\n    RUN [&quot;mvn&quot;, &quot;package&quot;]\r\n    \r\n    EXPOSE 8005\r\n    \r\n    CMD [&quot;java&quot;, &quot;-jar&quot;, &quot;./target/dist.jar&quot;]\r\n\r\nSo the key is: \r\n\r\n1. add `pom.xml` file.\r\n\r\n2. then `mvn verify --fail-never` it, it will download maven dependencies.\r\n\r\n3. add all your source file then, and start your compilation(`mvn package`).\r\n\r\n**When there are changes in your `pom.xml` file or you are running this script for the first time, docker will do 1 -&gt; 2 -&gt; 3. When there are no changes in `pom.xml` file, docker will skip step 1、2 and do 3 directly.**\r\n\r\nThis simple trick can be used in many other package management circumstances(gradle、yarn、npm、pip).\r\n\r\n**Edit:**\r\n\r\nYou should also consider using `mvn dependency:resolve` or `mvn dependency:go-offline` accordingly as other comments &amp; answers suggest.","title":"Maven docker cache dependencies","body":"<p>Usually, there's no change in <code>pom.xml</code> file but just some other source code changes when you're attempting to start docker image build. In such circumstance you can do this:</p>\n\n<p><b>FYI:</b></p>\n\n<pre><code>FROM maven:3-jdk-8\n\nENV HOME=/home/usr/app\n\nRUN mkdir -p $HOME\n\nWORKDIR $HOME\n\n# 1. add pom.xml only here\n\nADD pom.xml $HOME\n\n# 2. start downloading dependencies\n\nRUN [\"/usr/local/bin/mvn-entrypoint.sh\", \"mvn\", \"verify\", \"clean\", \"--fail-never\"]\n\n# 3. add all source code and start compiling\n\nADD . $HOME\n\nRUN [\"mvn\", \"package\"]\n\nEXPOSE 8005\n\nCMD [\"java\", \"-jar\", \"./target/dist.jar\"]\n</code></pre>\n\n<p>So the key is: </p>\n\n<ol>\n<li><p>add <code>pom.xml</code> file.</p></li>\n<li><p>then <code>mvn verify --fail-never</code> it, it will download maven dependencies.</p></li>\n<li><p>add all your source file then, and start your compilation(<code>mvn package</code>).</p></li>\n</ol>\n\n<p><strong>When there are changes in your <code>pom.xml</code> file or you are running this script for the first time, docker will do 1 -> 2 -> 3. When there are no changes in <code>pom.xml</code> file, docker will skip step 1、2 and do 3 directly.</strong></p>\n\n<p>This simple trick can be used in many other package management circumstances(gradle、yarn、npm、pip).</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>You should also consider using <code>mvn dependency:resolve</code> or <code>mvn dependency:go-offline</code> accordingly as other comments &amp; answers suggest.</p>\n"},{"tags":[],"owner":{"account_id":297392,"reputation":817,"user_id":602899,"display_name":"Filip Proch&#225;zka"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1527089304,"creation_date":1527087165,"answer_id":50491489,"question_id":42208442,"body_markdown":"@Kim is closest, but it&#39;s not quite there yet. I don&#39;t think adding `--fail-never` is correct, even through it get&#39;s the job done.\r\n\r\nThe `verify` command causes a lot of plugins to execute which is a problem (for me) - I don&#39;t think they should be executing when all I want is to install dependencies! I also have a multi-module build and a javascript sub-build so this further complicates the setup.\r\n\r\nBut running only `verify` is not enough, because if you run `install` in the following commands, there will be more plugins used - which means more dependencies to download - maven refuses to download them otherwise. Relevant read: [Maven: Introduction to the Build Lifecycle][1]\r\n\r\nYou basically have to find what properties disable each plugin and add them one-by-one, so they don&#39;t break your build.\r\n\r\n    WORKDIR /srv\r\n    \r\n    # cache Maven dependencies\r\n    ADD cli/pom.xml /srv/cli/\r\n    ADD core/pom.xml /srv/core/\r\n    ADD parent/pom.xml /srv/parent/\r\n    ADD rest-api/pom.xml /srv/rest-api/\r\n    ADD web-admin/pom.xml /srv/web-admin/\r\n    ADD pom.xml /srv/\r\n    RUN mvn -B clean install -DskipTests -Dcheckstyle.skip -Dasciidoctor.skip -Djacoco.skip -Dmaven.gitcommitid.skip -Dspring-boot.repackage.skip -Dmaven.exec.skip=true -Dmaven.install.skip -Dmaven.resources.skip\r\n    \r\n    # cache YARN dependencies\r\n    ADD ./web-admin/package.json ./web-admin/yarn.lock /srv/web-admin/\r\n    RUN yarn --non-interactive --frozen-lockfile --no-progress --cwd /srv/web-admin install\r\n\r\n    # build the project\r\n    ADD . /srv\r\n    RUN mvn -B clean install\r\n\r\nbut some plugins are not that easily skipped - I&#39;m not a maven expert (so I don&#39;t know why it ignores the cli option - it might be a bug), but the following works as expected for `org.codehaus.mojo:exec-maven-plugin`\r\n\r\n    &lt;project&gt;\r\n        &lt;properties&gt;\r\n            &lt;maven.exec.skip&gt;false&lt;/maven.exec.skip&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.3.2&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;yarn install&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;exec&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;phase&gt;initialize&lt;/phase&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;executable&gt;yarn&lt;/executable&gt;\r\n                                &lt;arguments&gt;\r\n                                    &lt;argument&gt;install&lt;/argument&gt;\r\n                                &lt;/arguments&gt;\r\n                                &lt;skip&gt;${maven.exec.skip}&lt;/skip&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;yarn run build&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;exec&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;phase&gt;compile&lt;/phase&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;executable&gt;yarn&lt;/executable&gt;\r\n                                &lt;arguments&gt;\r\n                                    &lt;argument&gt;run&lt;/argument&gt;\r\n                                    &lt;argument&gt;build&lt;/argument&gt;\r\n                                &lt;/arguments&gt;\r\n                                &lt;skip&gt;${maven.exec.skip}&lt;/skip&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nplease notice the explicit `&lt;skip&gt;${maven.exec.skip}&lt;/skip&gt;` - other plugins pick this up from the cli params but not this one (neither `-Dmaven.exec.skip=true` nor `-Dexec.skip=true` work by itself)\r\n\r\nHope this helps\r\n\r\n\r\n  [1]: https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html","title":"Maven docker cache dependencies","body":"<p>@Kim is closest, but it's not quite there yet. I don't think adding <code>--fail-never</code> is correct, even through it get's the job done.</p>\n\n<p>The <code>verify</code> command causes a lot of plugins to execute which is a problem (for me) - I don't think they should be executing when all I want is to install dependencies! I also have a multi-module build and a javascript sub-build so this further complicates the setup.</p>\n\n<p>But running only <code>verify</code> is not enough, because if you run <code>install</code> in the following commands, there will be more plugins used - which means more dependencies to download - maven refuses to download them otherwise. Relevant read: <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html\" rel=\"noreferrer\">Maven: Introduction to the Build Lifecycle</a></p>\n\n<p>You basically have to find what properties disable each plugin and add them one-by-one, so they don't break your build.</p>\n\n<pre><code>WORKDIR /srv\n\n# cache Maven dependencies\nADD cli/pom.xml /srv/cli/\nADD core/pom.xml /srv/core/\nADD parent/pom.xml /srv/parent/\nADD rest-api/pom.xml /srv/rest-api/\nADD web-admin/pom.xml /srv/web-admin/\nADD pom.xml /srv/\nRUN mvn -B clean install -DskipTests -Dcheckstyle.skip -Dasciidoctor.skip -Djacoco.skip -Dmaven.gitcommitid.skip -Dspring-boot.repackage.skip -Dmaven.exec.skip=true -Dmaven.install.skip -Dmaven.resources.skip\n\n# cache YARN dependencies\nADD ./web-admin/package.json ./web-admin/yarn.lock /srv/web-admin/\nRUN yarn --non-interactive --frozen-lockfile --no-progress --cwd /srv/web-admin install\n\n# build the project\nADD . /srv\nRUN mvn -B clean install\n</code></pre>\n\n<p>but some plugins are not that easily skipped - I'm not a maven expert (so I don't know why it ignores the cli option - it might be a bug), but the following works as expected for <code>org.codehaus.mojo:exec-maven-plugin</code></p>\n\n<pre><code>&lt;project&gt;\n    &lt;properties&gt;\n        &lt;maven.exec.skip&gt;false&lt;/maven.exec.skip&gt;\n    &lt;/properties&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.3.2&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;yarn install&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;exec&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;phase&gt;initialize&lt;/phase&gt;\n                        &lt;configuration&gt;\n                            &lt;executable&gt;yarn&lt;/executable&gt;\n                            &lt;arguments&gt;\n                                &lt;argument&gt;install&lt;/argument&gt;\n                            &lt;/arguments&gt;\n                            &lt;skip&gt;${maven.exec.skip}&lt;/skip&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;yarn run build&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;exec&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;configuration&gt;\n                            &lt;executable&gt;yarn&lt;/executable&gt;\n                            &lt;arguments&gt;\n                                &lt;argument&gt;run&lt;/argument&gt;\n                                &lt;argument&gt;build&lt;/argument&gt;\n                            &lt;/arguments&gt;\n                            &lt;skip&gt;${maven.exec.skip}&lt;/skip&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>please notice the explicit <code>&lt;skip&gt;${maven.exec.skip}&lt;/skip&gt;</code> - other plugins pick this up from the cli params but not this one (neither <code>-Dmaven.exec.skip=true</code> nor <code>-Dexec.skip=true</code> work by itself)</p>\n\n<p>Hope this helps</p>\n"},{"tags":[],"owner":{"account_id":340518,"reputation":496,"user_id":5125817,"display_name":"ikandars"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1539564523,"creation_date":1539563853,"answer_id":52808343,"question_id":42208442,"body_markdown":"Similar with @Kim answer but I use `dependency:resolve` mvn command. So here&#39;s my complete Dockerfile:\r\n\r\n    FROM maven:3.5.0-jdk-8-alpine\r\n\r\n    WORKDIR /usr/src/app\r\n    \r\n    # First copy only the pom file. This is the file with less change\r\n    COPY ./pom.xml .\r\n\r\n    # Download the package and make it cached in docker image\r\n    RUN mvn -B -f ./pom.xml -s /usr/share/maven/ref/settings-docker.xml dependency:resolve\r\n\r\n    # Copy the actual code\r\n    COPY ./ .\r\n\r\n    # Then build the code\r\n    RUN mvn -B -f ./pom.xml -s /usr/share/maven/ref/settings-docker.xml package\r\n\r\n    # The rest is same as usual\r\n    EXPOSE 8888\r\n\r\n    CMD [&quot;java&quot;, &quot;-jar&quot;, &quot;./target/YOUR-APP.jar&quot;]","title":"Maven docker cache dependencies","body":"<p>Similar with @Kim answer but I use <code>dependency:resolve</code> mvn command. So here's my complete Dockerfile:</p>\n\n<pre><code>FROM maven:3.5.0-jdk-8-alpine\n\nWORKDIR /usr/src/app\n\n# First copy only the pom file. This is the file with less change\nCOPY ./pom.xml .\n\n# Download the package and make it cached in docker image\nRUN mvn -B -f ./pom.xml -s /usr/share/maven/ref/settings-docker.xml dependency:resolve\n\n# Copy the actual code\nCOPY ./ .\n\n# Then build the code\nRUN mvn -B -f ./pom.xml -s /usr/share/maven/ref/settings-docker.xml package\n\n# The rest is same as usual\nEXPOSE 8888\n\nCMD [\"java\", \"-jar\", \"./target/YOUR-APP.jar\"]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":269882,"reputation":1247,"user_id":559495,"display_name":"Krzysztof Czelusniak"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1555103712,"creation_date":1553792656,"answer_id":55403241,"question_id":42208442,"body_markdown":"I don&#39;t think the other answers here are optimal. For example, the [`mvn verify`][1] answer executes the following phases, and does a lot more than just resolving dependencies:\n\n&gt; validate - validate the project is correct and all necessary information is available\n&gt;\n&gt; compile - compile the source code of the project\n&gt;\n&gt; test - test the compiled source code using a suitable unit testing framework. These tests should not require the code be packaged or deployed\n&gt;\n&gt; package - take the compiled code and package it in its distributable format, such as a JAR.\n&gt;\n&gt; verify - run any checks on results of integration tests to ensure quality criteria are met\n\nAll of these phases and their associated goals don&#39;t need to be ran if you only want to resolve dependencies.\n\nIf you only want to resolve dependencies, you can use the [`dependency:go-offline`][2] goal:\n\n    FROM maven:3-jdk-12\n    WORKDIR /tmp/example/\n\n    COPY pom.xml .\n    RUN mvn dependency:go-offline\n\n    COPY src/ src/\n    RUN mvn package\n\n\n  [1]: https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#A_Build_Lifecycle_is_Made_Up_of_Phases\n  [2]: https://maven.apache.org/plugins/maven-dependency-plugin/go-offline-mojo.html","title":"Maven docker cache dependencies","body":"<p>I don't think the other answers here are optimal. For example, the <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#A_Build_Lifecycle_is_Made_Up_of_Phases\" rel=\"noreferrer\"><code>mvn verify</code></a> answer executes the following phases, and does a lot more than just resolving dependencies:</p>\n<blockquote>\n<p>validate - validate the project is correct and all necessary information is available</p>\n<p>compile - compile the source code of the project</p>\n<p>test - test the compiled source code using a suitable unit testing framework. These tests should not require the code be packaged or deployed</p>\n<p>package - take the compiled code and package it in its distributable format, such as a JAR.</p>\n<p>verify - run any checks on results of integration tests to ensure quality criteria are met</p>\n</blockquote>\n<p>All of these phases and their associated goals don't need to be ran if you only want to resolve dependencies.</p>\n<p>If you only want to resolve dependencies, you can use the <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/go-offline-mojo.html\" rel=\"noreferrer\"><code>dependency:go-offline</code></a> goal:</p>\n<pre><code>FROM maven:3-jdk-12\nWORKDIR /tmp/example/\n\nCOPY pom.xml .\nRUN mvn dependency:go-offline\n\nCOPY src/ src/\nRUN mvn package\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11342404,"reputation":307,"user_id":8315994,"display_name":"Calvin Zhou"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1557395352,"creation_date":1557395352,"answer_id":56056728,"question_id":42208442,"body_markdown":"After a few days of struggling, I managed to do this caching later using intermediate contrainer, and I&#39;d like to summarize my findings here as this topic is so useful and being frequently shown in Google search frontpage:\r\n\r\n1. Kim&#39;s answer is only working to a certain condition: pom.xml cannot be changed, plus Maven do a regular update daily basis by default\r\n2. mvn dependency:go-offline -B --fail-never has a similar drawback, so if you need to pull fresh code from repo, high chances are Maven will trigger a full checkout every time \r\n3. Mount volume is not working as well because we need to resolve the dependencies during image being built \r\n4. Finally, I have a workable solution combined(May be not working to others):\r\n- Build an image to resolve all the dependencies first(Not intermediate image)\r\n- Create another Dockerfile with intermediate image, sample dockerfiles like this: \r\n\r\n```#dependencies.dockerfile\r\n#docker build -t dependencies .\r\nFrom ubuntu\r\nCOPY pom.xml pom.xml\r\nRUN mvn dependency:go-offline -B --fail-never\r\n```\r\n```#package.dockerfile\r\nFrom dependencies as intermediate\r\n\r\nFrom tomcat\r\nRUN git pull repo.git (whatsoever)\r\nRUN mvn package\r\n```\r\n\r\nThe idea is to keep all the dependencies in a different image that Maven can use immediately \r\n\r\nIt could be other scenarios I haven&#39;t encountered yet, but this solution relief me a bit from download 3GB rubbish every time\r\nI cannot imagine why Java became such a fat whale in today&#39;s lean world ","title":"Maven docker cache dependencies","body":"<p>After a few days of struggling, I managed to do this caching later using intermediate contrainer, and I'd like to summarize my findings here as this topic is so useful and being frequently shown in Google search frontpage:</p>\n\n<ol>\n<li>Kim's answer is only working to a certain condition: pom.xml cannot be changed, plus Maven do a regular update daily basis by default</li>\n<li>mvn dependency:go-offline -B --fail-never has a similar drawback, so if you need to pull fresh code from repo, high chances are Maven will trigger a full checkout every time </li>\n<li>Mount volume is not working as well because we need to resolve the dependencies during image being built </li>\n<li>Finally, I have a workable solution combined(May be not working to others):\n\n<ul>\n<li>Build an image to resolve all the dependencies first(Not intermediate image)</li>\n<li>Create another Dockerfile with intermediate image, sample dockerfiles like this: </li>\n</ul></li>\n</ol>\n\n<pre><code>#docker build -t dependencies .\nFrom ubuntu\nCOPY pom.xml pom.xml\nRUN mvn dependency:go-offline -B --fail-never\n</code></pre>\n\n<pre><code>From dependencies as intermediate\n\nFrom tomcat\nRUN git pull repo.git (whatsoever)\nRUN mvn package\n</code></pre>\n\n<p>The idea is to keep all the dependencies in a different image that Maven can use immediately </p>\n\n<p>It could be other scenarios I haven't encountered yet, but this solution relief me a bit from download 3GB rubbish every time\nI cannot imagine why Java became such a fat whale in today's lean world </p>\n"},{"tags":[],"owner":{"account_id":189124,"reputation":2471,"user_id":428272,"accept_rate":50,"display_name":"Omri Spector"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1566831263,"creation_date":1566831263,"answer_id":57660331,"question_id":42208442,"body_markdown":"There are two ways to cache maven dependencies:\r\n\r\n 1. Execute &quot;mvn verify&quot; as part of a container execution, NOT build, and make sure you mount .m2 from a volume.\r\n\r\n  This is efficient but it does not play well with cloud build and multiple build slaves\r\n 2. Use a &quot;dependencies cache container&quot;, and update it periodically. Here is how:\r\n\r\n a. Create a Dockerfile that copies the pom and build offline dependencies:\r\n\r\n        FROM maven:3.5.3-jdk-8-alpine\r\n        WORKDIR /build\r\n        COPY pom.xml .\r\n        RUN mvn dependency:go-offline\r\n b. Build it periodically (e.g. nightly) as &quot;Deps:latest&quot;\r\n\r\n c. Create another Dockerfile to actually build the system per commit (preferably use multi-stage) - and make sure it is FROM Deps.\r\n\r\nUsing this system you will have fast, reconstruct-able builds with a mostly good-enough cache.\r\n\r\n","title":"Maven docker cache dependencies","body":"<p>There are two ways to cache maven dependencies:</p>\n\n<ol>\n<li><p>Execute \"mvn verify\" as part of a container execution, NOT build, and make sure you mount .m2 from a volume.</p>\n\n<p>This is efficient but it does not play well with cloud build and multiple build slaves</p></li>\n<li><p>Use a \"dependencies cache container\", and update it periodically. Here is how:</p>\n\n<p>a. Create a Dockerfile that copies the pom and build offline dependencies:</p>\n\n<pre><code>FROM maven:3.5.3-jdk-8-alpine\nWORKDIR /build\nCOPY pom.xml .\nRUN mvn dependency:go-offline\n</code></pre>\n\n<p>b. Build it periodically (e.g. nightly) as \"Deps:latest\"</p>\n\n<p>c. Create another Dockerfile to actually build the system per commit (preferably use multi-stage) - and make sure it is FROM Deps.</p></li>\n</ol>\n\n<p>Using this system you will have fast, reconstruct-able builds with a mostly good-enough cache.</p>\n"},{"tags":[],"owner":{"account_id":4887223,"reputation":2488,"user_id":3939318,"accept_rate":86,"display_name":"Farzad Vertigo"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1626784952,"creation_date":1567569966,"answer_id":57781332,"question_id":42208442,"body_markdown":"### Using BuildKit\r\n\r\nFrom `Docker v18.03` onwards you can use [BuildKit](https://docs.docker.com/develop/develop-images/build_enhancements/) instead of volumes that were mentioned in the other answers. It allows mounting caches that can persist between builds and you can avoid downloading contents of the corresponding `.m2/repository` every time. \r\n\r\nAssuming that the Dockerfile is in the root of your project:\r\n\r\n    # syntax = docker/dockerfile:1.0-experimental\r\n    \r\n    FROM maven:3.6.0-jdk-11-slim AS build\r\n    COPY . /home/build\r\n    RUN mkdir /home/.m2\r\n    WORKDIR /home/.m2\r\n    USER root\r\n    RUN --mount=type=cache,target=/root/.m2 mvn -f /home/build/pom.xml clean compile\r\n\r\n`target=/root/.m2` mounts cache to the specified place in maven image Dockerfile [docs](https://hub.docker.com/_/maven).\r\n\r\nFor building you can run the following command:\r\n\r\n    DOCKER_BUILDKIT=1 docker build --rm --no-cache  .   \r\n\r\nMore info on BuildKit can be found [here](https://github.com/moby/buildkit/blob/master/frontend/dockerfile/docs/syntax.md).\r\n\r\n\r\n","title":"Maven docker cache dependencies","body":"<h3 id=\"using-buildkit-6mku\">Using BuildKit</h3>\n<p>From <code>Docker v18.03</code> onwards you can use <a href=\"https://docs.docker.com/develop/develop-images/build_enhancements/\" rel=\"noreferrer\">BuildKit</a> instead of volumes that were mentioned in the other answers. It allows mounting caches that can persist between builds and you can avoid downloading contents of the corresponding <code>.m2/repository</code> every time.</p>\n<p>Assuming that the Dockerfile is in the root of your project:</p>\n<pre><code># syntax = docker/dockerfile:1.0-experimental\n\nFROM maven:3.6.0-jdk-11-slim AS build\nCOPY . /home/build\nRUN mkdir /home/.m2\nWORKDIR /home/.m2\nUSER root\nRUN --mount=type=cache,target=/root/.m2 mvn -f /home/build/pom.xml clean compile\n</code></pre>\n<p><code>target=/root/.m2</code> mounts cache to the specified place in maven image Dockerfile <a href=\"https://hub.docker.com/_/maven\" rel=\"noreferrer\">docs</a>.</p>\n<p>For building you can run the following command:</p>\n<pre><code>DOCKER_BUILDKIT=1 docker build --rm --no-cache  .   \n</code></pre>\n<p>More info on BuildKit can be found <a href=\"https://github.com/moby/buildkit/blob/master/frontend/dockerfile/docs/syntax.md\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":2087167,"reputation":400,"user_id":1857860,"accept_rate":60,"display_name":"Valevalorin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1583951203,"creation_date":1583951203,"answer_id":60642407,"question_id":42208442,"body_markdown":"I think the general game plan presented among the other answers is the right idea:\r\n\r\n 1. Copy pom.xml\r\n 2. Get dependencies\r\n 3. Copy source\r\n 4. Build \r\n\r\nHowever, exactly how you do step #2 is the real key. For me, using the same command I used for building to fetch dependencies was the right solution:\r\n\r\n    FROM java/java:latest\r\n    \r\n    # Work dir\r\n    WORKDIR /app\r\n    RUN mkdir -p .\r\n    # Copy pom and get dependencies\r\n    COPY pom.xml pom.xml\r\n    RUN mvn -Dmaven.repo.local=./.m2 install assembly:single\r\n    \r\n    # Copy and build source\r\n    COPY . .\r\n    RUN mvn -Dmaven.repo.local=./.m2 install assembly:single\r\n\r\nAny other command used to fetch dependencies resulted in many things needing to be download during the build step. It makes sense the running the exact command you plan on running will you get you the closest to everything you need to actually run that command.","title":"Maven docker cache dependencies","body":"<p>I think the general game plan presented among the other answers is the right idea:</p>\n\n<ol>\n<li>Copy pom.xml</li>\n<li>Get dependencies</li>\n<li>Copy source</li>\n<li>Build </li>\n</ol>\n\n<p>However, exactly how you do step #2 is the real key. For me, using the same command I used for building to fetch dependencies was the right solution:</p>\n\n<pre><code>FROM java/java:latest\n\n# Work dir\nWORKDIR /app\nRUN mkdir -p .\n# Copy pom and get dependencies\nCOPY pom.xml pom.xml\nRUN mvn -Dmaven.repo.local=./.m2 install assembly:single\n\n# Copy and build source\nCOPY . .\nRUN mvn -Dmaven.repo.local=./.m2 install assembly:single\n</code></pre>\n\n<p>Any other command used to fetch dependencies resulted in many things needing to be download during the build step. It makes sense the running the exact command you plan on running will you get you the closest to everything you need to actually run that command.</p>\n"},{"tags":[],"owner":{"account_id":15686480,"reputation":1043,"user_id":11319016,"display_name":"aballaci"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591106323,"creation_date":1591065500,"answer_id":62143925,"question_id":42208442,"body_markdown":"A local Nexus 3 Image running in Docker and acting as a local Proxy is an acceptable solution:\r\n\r\nThe idea is similar to Dockerize an apt-cacher-ng service [apt-cacher-ng](https://docs.docker.com/engine/examples/apt-cacher-ng/)\r\n\r\nhere you can find a comprehensive step by step. [github repo](https://github.com/aballaci/maven-docker-proxy)\r\n\r\nIts really fast.\r\n","title":"Maven docker cache dependencies","body":"<p>A local Nexus 3 Image running in Docker and acting as a local Proxy is an acceptable solution:</p>\n\n<p>The idea is similar to Dockerize an apt-cacher-ng service <a href=\"https://docs.docker.com/engine/examples/apt-cacher-ng/\" rel=\"nofollow noreferrer\">apt-cacher-ng</a></p>\n\n<p>here you can find a comprehensive step by step. <a href=\"https://github.com/aballaci/maven-docker-proxy\" rel=\"nofollow noreferrer\">github repo</a></p>\n\n<p>Its really fast.</p>\n"},{"tags":[],"owner":{"account_id":71015,"reputation":5191,"user_id":205463,"accept_rate":71,"display_name":"Vahid Hashemi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1613556370,"creation_date":1613556370,"answer_id":66239723,"question_id":42208442,"body_markdown":"Another Solution would be using a repository manger such as Sonar Nexus or Artifactory. You can set a maven proxy inside the registry then use the registry as your source of maven repositories.","title":"Maven docker cache dependencies","body":"<p>Another Solution would be using a repository manger such as Sonar Nexus or Artifactory. You can set a maven proxy inside the registry then use the registry as your source of maven repositories.</p>\n"},{"tags":[],"owner":{"account_id":183306,"reputation":9428,"user_id":418599,"accept_rate":52,"display_name":"Antonio Petricca"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1644523746,"creation_date":1644500428,"answer_id":71066133,"question_id":42208442,"body_markdown":"I had to deal with the same issue.\r\n\r\nUnfortunately, as just said by another contributor, `dependency:go-offline` and the other goals, don&#39;t fully solve the problem: many dependencies are not downloaded.\r\n\r\nI found a working solution as follow.\r\n\r\n```dockerfile\r\n# Cache dependencies\r\n\r\nADD settings.xml .\r\nADD pom.xml .\r\n\r\nRUN mvn -B -s settings.xml -Ddocker.build.skip=true package test\r\n\r\n# Build artifact\r\n\r\nADD src .\r\nRUN mvn -B -s settings.xml -DskipTests package\r\n```\r\n\r\nThe trick is to do a full build without sources, which produces a full dependency scan.\r\n\r\nIn order to avoid errors on some plugins (for example: **OpenAPI maven generator plugin** or **Spring Boot maven plugin**) I had to skip its goals, but letting it to download all the dependencies by adding for each one a configuration settings like follow:\r\n\r\n```xml\r\n&lt;configuration&gt;\r\n    &lt;skip&gt;${docker.build.skip}&lt;/skip&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nRegards.","title":"Maven docker cache dependencies","body":"<p>I had to deal with the same issue.</p>\n<p>Unfortunately, as just said by another contributor, <code>dependency:go-offline</code> and the other goals, don't fully solve the problem: many dependencies are not downloaded.</p>\n<p>I found a working solution as follow.</p>\n<pre><code># Cache dependencies\n\nADD settings.xml .\nADD pom.xml .\n\nRUN mvn -B -s settings.xml -Ddocker.build.skip=true package test\n\n# Build artifact\n\nADD src .\nRUN mvn -B -s settings.xml -DskipTests package\n</code></pre>\n<p>The trick is to do a full build without sources, which produces a full dependency scan.</p>\n<p>In order to avoid errors on some plugins (for example: <strong>OpenAPI maven generator plugin</strong> or <strong>Spring Boot maven plugin</strong>) I had to skip its goals, but letting it to download all the dependencies by adding for each one a configuration settings like follow:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt;\n    &lt;skip&gt;${docker.build.skip}&lt;/skip&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>Regards.</p>\n"},{"tags":[],"owner":{"account_id":3613538,"reputation":31,"user_id":3013994,"display_name":"pesso82"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658739962,"creation_date":1658669525,"answer_id":73098845,"question_id":42208442,"body_markdown":"Here my working solution.\r\nThe tricks are:\r\n\r\n- use docker multi-stage build\r\n- don&#39;t copy the project source in the image created in the first stage, but only pom (or poms in case your project is multi-module)\r\n\r\nHere my solution for a multi-module project using openjdk11\r\n\r\n    ## stage 1\r\n    FROM adoptopenjdk/maven-openjdk11 as dependencies\r\n    ENV HOME=/usr/maven\r\n    ENV MVN_REPO=/usr/maven/.m3/repository\r\n    RUN mkdir -p $HOME\r\n    RUN mkdir -p $MVN_REPO\r\n    WORKDIR $HOME\r\n    ## copy all pom files of the modules tree with the same directory tree of the project\r\n    #reactor\r\n    ADD pom.xml $HOME\r\n    ## api module\r\n    RUN mkdir -p $HOME/api\r\n    ADD api/pom.xml $HOME/api\r\n    ## application module\r\n    RUN mkdir -p $HOME/application\r\n    ADD application/pom.xml $HOME/application\r\n    ## domain module\r\n    RUN mkdir -p $HOME/domain\r\n    ADD domain/pom.xml $HOME/domain\r\n    ## service module\r\n    RUN mkdir -p $HOME/service\r\n    ADD service/pom.xml $HOME/service\r\n\r\n    ## download all dependencies in this docker image. The goal &quot;test&quot; is needed to avoid download of dependencies with &lt;scope&gt;test&lt;/scope&gt; in the second stage\r\n    RUN mvn -Dmaven.repo.local=$MVN_REPO dependency:go-offline test\r\n    \r\n    ## stage 2\r\n    FROM adoptopenjdk/maven-openjdk11 as executable\r\n    ENV APP_HOME=/usr/app\r\n    ENV MVN_REPO=/usr/maven/.m3/repository\r\n    ENV APP_MVN_REPO=$MVN_REPO\r\n    RUN mkdir -p $APP_HOME\r\n    RUN mkdir -p $APP_MVN_REPO\r\n    WORKDIR $APP_HOME\r\n    ADD . $APP_HOME\r\n    ## copy the dependecies tree from &quot;stage 1&quot; dependencies image to this image\r\n    COPY --from=dependencies $MVN_REPO $APP_MVN_REPO\r\n    ## package the application, skipping test\r\n    RUN mvn -Dmaven.repo.local=$APP_MVN_REPO package -DskipTests\r\n    ## set ENV values\r\n    ENV NAME=VALUE\r\n\r\n    ## copy the jar in the WORKDIR folder\r\n    RUN cp $APP_HOME/application/target/*.jar $APP_HOME/my-final-jar-0.0.1-SNAPSHOT.jar\r\n    EXPOSE 8080\r\n    ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;,&quot;/usr/app/my-final-jar-0.0.1-SNAPSHOT.jar&quot; ,&quot;--spring.profiles.active=docker&quot;]","title":"Maven docker cache dependencies","body":"<p>Here my working solution.\nThe tricks are:</p>\n<ul>\n<li>use docker multi-stage build</li>\n<li>don't copy the project source in the image created in the first stage, but only pom (or poms in case your project is multi-module)</li>\n</ul>\n<p>Here my solution for a multi-module project using openjdk11</p>\n<pre><code>## stage 1\nFROM adoptopenjdk/maven-openjdk11 as dependencies\nENV HOME=/usr/maven\nENV MVN_REPO=/usr/maven/.m3/repository\nRUN mkdir -p $HOME\nRUN mkdir -p $MVN_REPO\nWORKDIR $HOME\n## copy all pom files of the modules tree with the same directory tree of the project\n#reactor\nADD pom.xml $HOME\n## api module\nRUN mkdir -p $HOME/api\nADD api/pom.xml $HOME/api\n## application module\nRUN mkdir -p $HOME/application\nADD application/pom.xml $HOME/application\n## domain module\nRUN mkdir -p $HOME/domain\nADD domain/pom.xml $HOME/domain\n## service module\nRUN mkdir -p $HOME/service\nADD service/pom.xml $HOME/service\n\n## download all dependencies in this docker image. The goal &quot;test&quot; is needed to avoid download of dependencies with &lt;scope&gt;test&lt;/scope&gt; in the second stage\nRUN mvn -Dmaven.repo.local=$MVN_REPO dependency:go-offline test\n\n## stage 2\nFROM adoptopenjdk/maven-openjdk11 as executable\nENV APP_HOME=/usr/app\nENV MVN_REPO=/usr/maven/.m3/repository\nENV APP_MVN_REPO=$MVN_REPO\nRUN mkdir -p $APP_HOME\nRUN mkdir -p $APP_MVN_REPO\nWORKDIR $APP_HOME\nADD . $APP_HOME\n## copy the dependecies tree from &quot;stage 1&quot; dependencies image to this image\nCOPY --from=dependencies $MVN_REPO $APP_MVN_REPO\n## package the application, skipping test\nRUN mvn -Dmaven.repo.local=$APP_MVN_REPO package -DskipTests\n## set ENV values\nENV NAME=VALUE\n\n## copy the jar in the WORKDIR folder\nRUN cp $APP_HOME/application/target/*.jar $APP_HOME/my-final-jar-0.0.1-SNAPSHOT.jar\nEXPOSE 8080\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;,&quot;/usr/app/my-final-jar-0.0.1-SNAPSHOT.jar&quot; ,&quot;--spring.profiles.active=docker&quot;]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27749937,"reputation":1,"user_id":21184536,"display_name":"MangYudh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676017134,"creation_date":1676001318,"answer_id":75406779,"question_id":42208442,"body_markdown":"This one did the trick very well for me:\r\n\r\nedit config.toml \r\n\r\n    [runner.docker]\r\n    ...\r\n    volumes = [&quot;/cache&quot;,&quot;m2:/root/.m2&quot;]\r\n    ...\r\n\r\nit will create &quot;m2&quot; volume that will persists across builds and you guys knows the rest :)\r\n ","title":"Maven docker cache dependencies","body":"<p>This one did the trick very well for me:</p>\n<p>edit config.toml</p>\n<pre><code>[runner.docker]\n...\nvolumes = [&quot;/cache&quot;,&quot;m2:/root/.m2&quot;]\n...\n</code></pre>\n<p>it will create &quot;m2&quot; volume that will persists across builds and you guys knows the rest :)</p>\n"}],"owner":{"account_id":1704246,"reputation":3539,"user_id":1563654,"accept_rate":42,"display_name":"Daniel Watrous"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68288,"favorite_count":0,"down_vote_count":0,"up_vote_count":72,"answer_count":16,"score":72,"last_activity_date":1676017134,"creation_date":1487001964,"question_id":42208442,"body_markdown":"I&#39;m trying to use docker to automate maven builds. The project I want to build takes nearly 20 minutes to download all the dependencies, so I tried to build a docker image that would cache these dependencies, but it doesn&#39;t seem to save it. My Dockerfile is\r\n\r\n    FROM maven:alpine\r\n    RUN mkdir -p /usr/src/app\r\n    WORKDIR /usr/src/app\r\n    ADD pom.xml /usr/src/app\r\n    RUN mvn dependency:go-offline\r\n\r\nThe image builds, and it does download everything. However, the resulting image is the same size as the base `maven:alpine` image, so it doesn&#39;t seem to have cached the dependencies in the image. When I try to use the image to `mvn compile` it goes through the full 20 minutes of redownloading everything.\r\n\r\nIs it possible to build a maven image that caches my dependencies so they don&#39;t have to download everytime I use the image to perform a build?\r\n\r\nI&#39;m running the following commands:\r\n\r\n    docker build -t my-maven .\r\n\r\n    docker run -it --rm --name my-maven-project -v &quot;$PWD&quot;:/usr/src/mymaven -w /usr/src/mymaven my-maven mvn compile\r\n\r\nMy understanding is that whatever `RUN` does during the docker build process becomes part of the resulting image.","title":"Maven docker cache dependencies","body":"<p>I'm trying to use docker to automate maven builds. The project I want to build takes nearly 20 minutes to download all the dependencies, so I tried to build a docker image that would cache these dependencies, but it doesn't seem to save it. My Dockerfile is</p>\n\n<pre><code>FROM maven:alpine\nRUN mkdir -p /usr/src/app\nWORKDIR /usr/src/app\nADD pom.xml /usr/src/app\nRUN mvn dependency:go-offline\n</code></pre>\n\n<p>The image builds, and it does download everything. However, the resulting image is the same size as the base <code>maven:alpine</code> image, so it doesn't seem to have cached the dependencies in the image. When I try to use the image to <code>mvn compile</code> it goes through the full 20 minutes of redownloading everything.</p>\n\n<p>Is it possible to build a maven image that caches my dependencies so they don't have to download everytime I use the image to perform a build?</p>\n\n<p>I'm running the following commands:</p>\n\n<pre><code>docker build -t my-maven .\n\ndocker run -it --rm --name my-maven-project -v \"$PWD\":/usr/src/mymaven -w /usr/src/mymaven my-maven mvn compile\n</code></pre>\n\n<p>My understanding is that whatever <code>RUN</code> does during the docker build process becomes part of the resulting image.</p>\n"},{"tags":["java","websocket","signalr"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1676026460,"post_id":75408492,"comment_id":133058736,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":24276369,"reputation":11,"user_id":18223622,"display_name":"Funkjus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1676017125,"creation_date":1676017125,"question_id":75408492,"body_markdown":"I have a client server application. The server is on .core 6.0 and WinForm clients connect to it via SignalR. I want to re-release the same server in Java only. Is it possible to configure a java websocket to behave like a SignalR server on dot.net so that I can connect to it from my Winform SignalR clients? And how to do it?\r\n\r\n\r\nI tried to look in the Microsoft documentation[ https://learn.microsoft.com/en-us/aspnet/core/signalr/java-client?view=aspnetcore-7.0](https://www.stackoverflow.com/), but I understand that this is a solution how to organize a java client and not a server part","title":"How to accept a SignalR client connection on a Java websocket server and call client methods?","body":"<p>I have a client server application. The server is on .core 6.0 and WinForm clients connect to it via SignalR. I want to re-release the same server in Java only. Is it possible to configure a java websocket to behave like a SignalR server on dot.net so that I can connect to it from my Winform SignalR clients? And how to do it?</p>\n<p>I tried to look in the Microsoft documentation<a href=\"https://www.stackoverflow.com/\"> https://learn.microsoft.com/en-us/aspnet/core/signalr/java-client?view=aspnetcore-7.0</a>, but I understand that this is a solution how to organize a java client and not a server part</p>\n"},{"tags":["java","json","http","rest","backbone.js"],"comments":[{"owner":{"account_id":236891,"reputation":7221,"user_id":504685,"accept_rate":50,"display_name":"Charlie"},"score":1,"creation_date":1322497815,"post_id":8294265,"comment_id":10223561,"body_markdown":"Could you go into more detail about your potential use cases and why the HTTP status code and setting appropriate response headers wouldn&#39;t be suitable?","body":"Could you go into more detail about your potential use cases and why the HTTP status code and setting appropriate response headers wouldn&#39;t be suitable?"}],"answers":[{"tags":[],"owner":{"account_id":163776,"reputation":1446,"user_id":386128,"display_name":"maxl0rd"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1322510862,"creation_date":1322510862,"answer_id":8301672,"question_id":8294265,"body_markdown":"We had the same use case, in which we needed to add pagination metadata to a JSON response. We ended up creating a collection type in Backbone that could handle this data, and a lightweight wrapper on the Rails side. This example just adds the meta data to the collection object for reference by the view.\r\n\r\nSo we created a Backbone Collection class something like this\r\n\r\n    // Example response:\r\n    // { num_pages: 4, limit_value: 25, current_page: 1, total_count: 97\r\n    //   records: [{...}, {...}] }\r\n\r\n    PageableCollection = Backbone.Collection.extend({\r\n      parse: function(resp, xhr)  {\r\n        this.numPages = resp.num_pages;\r\n        this.limitValue = resp.limit_value;\r\n        this.currentPage = resp.current_page;\r\n        this.totalCount = resp.total_count;\r\n        return resp.records;\r\n      }  \r\n    });\r\n\r\nAnd then we created this simple class on the Rails side, to emit the meta data when paginated with Kaminari\r\n\r\n    class PageableCollection\r\n      def initialize (collection)\r\n        @collection = collection\r\n      end\r\n      def as_json(opts = {})\r\n        {\r\n          :num_pages =&gt; @collection.num_pages \r\n          :limit_value =&gt; @collection.limit_value \r\n          :current_page =&gt; @collection.current_page,\r\n          :total_count =&gt; @collection.total_count\r\n          :records =&gt; @collection.to_a.as_json(opts)\r\n        }\r\n      end\r\n    end\r\n\r\nYou use it in a controller like this\r\n\r\n    class ThingsController &lt; ApplicationController\r\n      def index \r\n        @things = Thing.all.page params[:page]\r\n        render :json =&gt; PageableCollection.new(@things)\r\n      end\r\n    end\r\n\r\nEnjoy. Hope you find it useful.","title":"What are the best practices to add metadata to a RESTful JSON response?","body":"<p>We had the same use case, in which we needed to add pagination metadata to a JSON response. We ended up creating a collection type in Backbone that could handle this data, and a lightweight wrapper on the Rails side. This example just adds the meta data to the collection object for reference by the view.</p>\n\n<p>So we created a Backbone Collection class something like this</p>\n\n<pre><code>// Example response:\n// { num_pages: 4, limit_value: 25, current_page: 1, total_count: 97\n//   records: [{...}, {...}] }\n\nPageableCollection = Backbone.Collection.extend({\n  parse: function(resp, xhr)  {\n    this.numPages = resp.num_pages;\n    this.limitValue = resp.limit_value;\n    this.currentPage = resp.current_page;\n    this.totalCount = resp.total_count;\n    return resp.records;\n  }  \n});\n</code></pre>\n\n<p>And then we created this simple class on the Rails side, to emit the meta data when paginated with Kaminari</p>\n\n<pre><code>class PageableCollection\n  def initialize (collection)\n    @collection = collection\n  end\n  def as_json(opts = {})\n    {\n      :num_pages =&gt; @collection.num_pages \n      :limit_value =&gt; @collection.limit_value \n      :current_page =&gt; @collection.current_page,\n      :total_count =&gt; @collection.total_count\n      :records =&gt; @collection.to_a.as_json(opts)\n    }\n  end\nend\n</code></pre>\n\n<p>You use it in a controller like this</p>\n\n<pre><code>class ThingsController &lt; ApplicationController\n  def index \n    @things = Thing.all.page params[:page]\n    render :json =&gt; PageableCollection.new(@things)\n  end\nend\n</code></pre>\n\n<p>Enjoy. Hope you find it useful.</p>\n"},{"tags":[],"owner":{"account_id":108818,"reputation":6363,"user_id":288672,"accept_rate":85,"display_name":"Jacob Oscarson"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1322556083,"creation_date":1322556083,"answer_id":8307910,"question_id":8294265,"body_markdown":"Along the lines of @Charlie&#39;s comment: for the pagination part of your question you still need to bake the metadata into the response somhow, but the `status` and `message` attributes here are somewhat redundant, since they are already covered by the `HTTP` protocol itself (status `200` - model found, `404` - model not found, `403` - insufficient privs, you get the idea) (see [spec](http://www.w3.org/Protocols/rfc2616/rfc2616.html)). Even if your server returns an error condition you can still send the `message` part as the response body. These two fields will cover quite much of your metadata needs.\r\n\r\nPersonally, I have tended towards (ab)using custom HTTP headers for smaller pieces of metadata (with an `X-` prefix), but I guess the limit where that gets unpractical is pretty low.\r\n\r\nI&#39;ve [expanded](https://stackoverflow.com/questions/8161879/backbone-js-error-handling-how-do-you-do-it/8168505#8168505) a bit about this in a question with a smaller scope, but I think the points are still valid for this question.","title":"What are the best practices to add metadata to a RESTful JSON response?","body":"<p>Along the lines of @Charlie's comment: for the pagination part of your question you still need to bake the metadata into the response somhow, but the <code>status</code> and <code>message</code> attributes here are somewhat redundant, since they are already covered by the <code>HTTP</code> protocol itself (status <code>200</code> - model found, <code>404</code> - model not found, <code>403</code> - insufficient privs, you get the idea) (see <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616.html\" rel=\"nofollow noreferrer\">spec</a>). Even if your server returns an error condition you can still send the <code>message</code> part as the response body. These two fields will cover quite much of your metadata needs.</p>\n\n<p>Personally, I have tended towards (ab)using custom HTTP headers for smaller pieces of metadata (with an <code>X-</code> prefix), but I guess the limit where that gets unpractical is pretty low.</p>\n\n<p>I've <a href=\"https://stackoverflow.com/questions/8161879/backbone-js-error-handling-how-do-you-do-it/8168505#8168505\">expanded</a> a bit about this in a question with a smaller scope, but I think the points are still valid for this question.</p>\n"},{"tags":[],"owner":{"account_id":755023,"reputation":6091,"user_id":873641,"accept_rate":86,"display_name":"Daniel Cerecedo"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1392374428,"creation_date":1392374428,"answer_id":21777095,"question_id":8294265,"body_markdown":"You have several means to pass metadata in a RESTful API:\r\n\r\n 1. Http Status Code\r\n 2. Headers\r\n 3. Response Body\r\n\r\nFor the metadata.status, use the Http Status Code, that&#39;s what&#39;s for!\r\nIf metadata is refers to the whole response you could add it as header fields.\r\nIf metadata refers only to part of the response, you will have to embed the metadata as part of the object.**DON&#39;T** wrap the whole response in an artifical envelope and split the wrapper in data and metadata.\r\n\r\nAnd finally, **be consistent across your API** with the choices you make.\r\n\r\nA good example is a GET on a whole collection with pagination. GET /items\r\nYou could return the collection size, and current page in custom headers. And pagination links in standard Link Header:\r\n\r\n    Link: &lt;https://api.mydomain.com/v1/items?limit=25&amp;offset=25&gt;; rel=next\r\n\r\nThe problem with this approach is when you need to add metadata referencing specific elements in the response. In that case just embed it in the object itself. And to have a consistent approach...add always all metadata to response. So coming back to the GET /items, imagine that each item has created and updated metadata:\r\n\r\n    {\r\n      items:[\r\n        {\r\n          &quot;id&quot;:&quot;w67e87898dnkwu4752igd&quot;,\r\n          &quot;message&quot; : &quot;some content&quot;,\r\n          &quot;_created&quot;: &quot;2014-02-14T10:07:39.574Z&quot;,\r\n          &quot;_updated&quot;: &quot;2014-02-14T10:07:39.574Z&quot;\r\n        },\r\n        ......\r\n        {\r\n          &quot;id&quot;:&quot;asjdfiu3748hiuqdh&quot;,\r\n          &quot;message&quot; : &quot;some other content&quot;,\r\n          &quot;_created&quot;: &quot;2014-02-14T10:07:39.574Z&quot;,\r\n          &quot;_updated&quot;: &quot;2014-02-14T10:07:39.574Z&quot;\r\n        }\r\n      ],\r\n      &quot;_total&quot; :133,\r\n      &quot;_links&quot; :[\r\n         {\r\n            &quot;next&quot; :{\r\n               href : &quot;https://api.mydomain.com/v1/items?limit=25&amp;offset=25&quot;\r\n             } \r\n       ]\r\n    }\r\n\r\nNote that a collection response is an special case. If you add metadata to a collection, the collection can no longer be returned as an array, it must be an object with an array in it. Why an object? because you want to add some metadata attributes.\r\n\r\nCompare with the metadata in the individual items. Nothing close to wrapping the entity. You just add some attributes to the resource.\r\n\r\nOne convention is to differentiate control or metadata fields. You could prefix those fields with an underscore.","title":"What are the best practices to add metadata to a RESTful JSON response?","body":"<p>You have several means to pass metadata in a RESTful API:</p>\n\n<ol>\n<li>Http Status Code</li>\n<li>Headers</li>\n<li>Response Body</li>\n</ol>\n\n<p>For the metadata.status, use the Http Status Code, that's what's for!\nIf metadata is refers to the whole response you could add it as header fields.\nIf metadata refers only to part of the response, you will have to embed the metadata as part of the object.<strong>DON'T</strong> wrap the whole response in an artifical envelope and split the wrapper in data and metadata.</p>\n\n<p>And finally, <strong>be consistent across your API</strong> with the choices you make.</p>\n\n<p>A good example is a GET on a whole collection with pagination. GET /items\nYou could return the collection size, and current page in custom headers. And pagination links in standard Link Header:</p>\n\n<pre><code>Link: &lt;https://api.mydomain.com/v1/items?limit=25&amp;offset=25&gt;; rel=next\n</code></pre>\n\n<p>The problem with this approach is when you need to add metadata referencing specific elements in the response. In that case just embed it in the object itself. And to have a consistent approach...add always all metadata to response. So coming back to the GET /items, imagine that each item has created and updated metadata:</p>\n\n<pre><code>{\n  items:[\n    {\n      \"id\":\"w67e87898dnkwu4752igd\",\n      \"message\" : \"some content\",\n      \"_created\": \"2014-02-14T10:07:39.574Z\",\n      \"_updated\": \"2014-02-14T10:07:39.574Z\"\n    },\n    ......\n    {\n      \"id\":\"asjdfiu3748hiuqdh\",\n      \"message\" : \"some other content\",\n      \"_created\": \"2014-02-14T10:07:39.574Z\",\n      \"_updated\": \"2014-02-14T10:07:39.574Z\"\n    }\n  ],\n  \"_total\" :133,\n  \"_links\" :[\n     {\n        \"next\" :{\n           href : \"https://api.mydomain.com/v1/items?limit=25&amp;offset=25\"\n         } \n   ]\n}\n</code></pre>\n\n<p>Note that a collection response is an special case. If you add metadata to a collection, the collection can no longer be returned as an array, it must be an object with an array in it. Why an object? because you want to add some metadata attributes.</p>\n\n<p>Compare with the metadata in the individual items. Nothing close to wrapping the entity. You just add some attributes to the resource.</p>\n\n<p>One convention is to differentiate control or metadata fields. You could prefix those fields with an underscore.</p>\n"},{"tags":[],"owner":{"account_id":67104,"reputation":17847,"user_id":196526,"accept_rate":95,"display_name":"Bastien Vandamme"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1554977039,"creation_date":1554977039,"answer_id":55629860,"question_id":8294265,"body_markdown":"I suggest you to read this page https://www.odata.org/ You are not forced to use OData but the way they do the work is a good example of good practice with REST.","title":"What are the best practices to add metadata to a RESTful JSON response?","body":"<p>I suggest you to read this page <a href=\"https://www.odata.org/\" rel=\"nofollow noreferrer\">https://www.odata.org/</a> You are not forced to use OData but the way they do the work is a good example of good practice with REST.</p>\n"},{"tags":[],"owner":{"account_id":2636118,"reputation":3517,"user_id":2280741,"accept_rate":62,"display_name":"Rui Martins"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618489940,"creation_date":1618489378,"answer_id":67108379,"question_id":8294265,"body_markdown":"How about returning directly the object that you want in data, like return:\r\n```json\r\n{\r\n    &quot;id&quot;: 1001,\r\n    &quot;name&quot;: &quot;Bob&quot;\r\n}\r\n```\r\n\r\nAnd return in headers the metadata.\r\n\r\nOption 1 (one header for all metadata JSON):\r\n```text\r\nX-METADATA = &#39;{&quot;status&quot;: 200|500,&quot;msg&quot;: &quot;Some message here&quot;,&quot;next&quot;: &quot;http://api.domain.com/users/10/20&quot;...}&#39;\r\n```\r\n\r\nOption 2 (one header per each metadata field):\r\n```text\r\nX-METADATA-STATUS = 200|500\r\nX-METADATA-MSG = &quot;Some message here&quot;,\r\nX-METADATA-NEXT = &quot;http://api.domain.com/users/10/20&quot;\r\n...\r\n```\r\n\r\nUntil now I was using like you, a complex JSON with two fields, one for data and one for metadata. But I&#39;m thinking in starting using this way that I suggested, I think it will be more easy.\r\n\r\n---\r\n\r\nRemind that some server have size limit for HTTP headers, like this example: https://www.tutorialspoint.com/What-is-the-maximum-size-of-HTTP-header-values\r\n","title":"What are the best practices to add metadata to a RESTful JSON response?","body":"<p>How about returning directly the object that you want in data, like return:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;id&quot;: 1001,\n    &quot;name&quot;: &quot;Bob&quot;\n}\n</code></pre>\n<p>And return in headers the metadata.</p>\n<p>Option 1 (one header for all metadata JSON):</p>\n<pre><code>X-METADATA = '{&quot;status&quot;: 200|500,&quot;msg&quot;: &quot;Some message here&quot;,&quot;next&quot;: &quot;http://api.domain.com/users/10/20&quot;...}'\n</code></pre>\n<p>Option 2 (one header per each metadata field):</p>\n<pre><code>X-METADATA-STATUS = 200|500\nX-METADATA-MSG = &quot;Some message here&quot;,\nX-METADATA-NEXT = &quot;http://api.domain.com/users/10/20&quot;\n...\n</code></pre>\n<p>Until now I was using like you, a complex JSON with two fields, one for data and one for metadata. But I'm thinking in starting using this way that I suggested, I think it will be more easy.</p>\n<hr />\n<p>Remind that some server have size limit for HTTP headers, like this example: <a href=\"https://www.tutorialspoint.com/What-is-the-maximum-size-of-HTTP-header-values\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/What-is-the-maximum-size-of-HTTP-header-values</a></p>\n"},{"tags":[],"owner":{"account_id":106010,"reputation":30256,"user_id":282601,"accept_rate":81,"display_name":"cweiske"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676017026,"creation_date":1676017026,"answer_id":75408471,"question_id":8294265,"body_markdown":"[JSON:API][1] solves this by defining top-level `meta` and `data` properties.\r\n\r\n\r\n  [1]: https://jsonapi.org/format/","title":"What are the best practices to add metadata to a RESTful JSON response?","body":"<p><a href=\"https://jsonapi.org/format/\" rel=\"nofollow noreferrer\">JSON:API</a> solves this by defining top-level <code>meta</code> and <code>data</code> properties.</p>\n"}],"owner":{"display_name":"user920041"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43384,"favorite_count":0,"down_vote_count":0,"up_vote_count":48,"answer_count":6,"score":48,"last_activity_date":1676017026,"creation_date":1322475023,"question_id":8294265,"body_markdown":"**Background**\r\n\r\nWe are building a Restful API that should return data objects as JSON. In most of the cases it fine just to return the data object, but in some cases, f.ex. pagination or validation, we need to add some metadata to the response.\r\n\r\n**What we have so far**\r\n\r\nWe have wrapped all json responses like this example:\r\n\r\n    {\r\n        &quot;metadata&quot; :{\r\n            &quot;status&quot;: 200|500,\r\n            &quot;msg&quot;: &quot;Some message here&quot;,\r\n            &quot;next&quot;: &quot;http://api.domain.com/users/10/20&quot;\r\n            ...\r\n        },\r\n        &quot;data&quot; :{\r\n            &quot;id&quot;: 1001,\r\n            &quot;name&quot;: &quot;Bob&quot;\r\n        }\r\n    }\r\n\r\n**Pros**\r\n\r\n - We can add helpful metadata to the response\r\n\r\n \r\n**Cons**\r\n\r\n - In most cases we don&#39;t need the metadata field, and it adds complexity to the json format\r\n - Since it&#39;s not a data object any more, but more like a enveloped response, we can not use the response right away in f.ex backbone.js without extracting the data object.\r\n\r\n**Question**\r\n\r\nWhat is the best practices to add metadata to a json response?\r\n\r\n**UPDATE**\r\n\r\nWhat I&#39;ve got so far from answers below:\r\n\r\n - Remove the `metadata.status` an return the http response code in the\r\n   http protocol instead (200, 500 ...)\r\n - Add error msg to body of an http 500 repsonse \r\n - For pagination i natural to have some metadata telling about the pagination structure, and the data nested in that structure\r\n - Small amount of meta data can be added to http header (X-something)\r\n\r\n","title":"What are the best practices to add metadata to a RESTful JSON response?","body":"<p><strong>Background</strong></p>\n\n<p>We are building a Restful API that should return data objects as JSON. In most of the cases it fine just to return the data object, but in some cases, f.ex. pagination or validation, we need to add some metadata to the response.</p>\n\n<p><strong>What we have so far</strong></p>\n\n<p>We have wrapped all json responses like this example:</p>\n\n<pre><code>{\n    \"metadata\" :{\n        \"status\": 200|500,\n        \"msg\": \"Some message here\",\n        \"next\": \"http://api.domain.com/users/10/20\"\n        ...\n    },\n    \"data\" :{\n        \"id\": 1001,\n        \"name\": \"Bob\"\n    }\n}\n</code></pre>\n\n<p><strong>Pros</strong></p>\n\n<ul>\n<li>We can add helpful metadata to the response</li>\n</ul>\n\n<p><strong>Cons</strong></p>\n\n<ul>\n<li>In most cases we don't need the metadata field, and it adds complexity to the json format</li>\n<li>Since it's not a data object any more, but more like a enveloped response, we can not use the response right away in f.ex backbone.js without extracting the data object.</li>\n</ul>\n\n<p><strong>Question</strong></p>\n\n<p>What is the best practices to add metadata to a json response?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>What I've got so far from answers below:</p>\n\n<ul>\n<li>Remove the <code>metadata.status</code> an return the http response code in the\nhttp protocol instead (200, 500 ...)</li>\n<li>Add error msg to body of an http 500 repsonse </li>\n<li>For pagination i natural to have some metadata telling about the pagination structure, and the data nested in that structure</li>\n<li>Small amount of meta data can be added to http header (X-something)</li>\n</ul>\n"},{"tags":["java","macos","server","automation","minecraft"],"answers":[{"tags":[],"owner":{"account_id":22166369,"reputation":198,"user_id":16412496,"display_name":"baggiogiacomo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676016942,"creation_date":1676016942,"answer_id":75408455,"question_id":75402049,"body_markdown":"You can try something like that:\r\n\r\n```\r\nwhile true; do\r\n  ping -c 1 -W 1 your_server_IP\r\n  if [ $? -eq 0 ]; then\r\n    echo &quot;Server is up&quot;\r\n  else\r\n    echo &quot;Server is down, restarting...&quot;\r\n    # Add your server restart command here\r\n    /path/to/restart/command\r\n  fi\r\n  sleep 60\r\ndone\r\n```\r\n\r\nThe `ping -c 1 -W 1 your_server_IP` command sends one Echo Request packet to `your_server_IP`, and waits for a response for 1 second. If a response is received, it means the server is up and running. If no response is received, it means the server is down.\r\n\r\nYou have to save this file as a `.command` file and add it to your PATH.\r\n\r\nLet me know if it works or you&#39;re getting errors! I&#39;ll be happy to help :)","title":"I need help making a terminal command on my M1 Mac Mini to restart my minecraft server if it crashes","body":"<p>You can try something like that:</p>\n<pre><code>while true; do\n  ping -c 1 -W 1 your_server_IP\n  if [ $? -eq 0 ]; then\n    echo &quot;Server is up&quot;\n  else\n    echo &quot;Server is down, restarting...&quot;\n    # Add your server restart command here\n    /path/to/restart/command\n  fi\n  sleep 60\ndone\n</code></pre>\n<p>The <code>ping -c 1 -W 1 your_server_IP</code> command sends one Echo Request packet to <code>your_server_IP</code>, and waits for a response for 1 second. If a response is received, it means the server is up and running. If no response is received, it means the server is down.</p>\n<p>You have to save this file as a <code>.command</code> file and add it to your PATH.</p>\n<p>Let me know if it works or you're getting errors! I'll be happy to help :)</p>\n"}],"owner":{"account_id":27746464,"reputation":9,"user_id":21181844,"display_name":"Isna Owo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1676016942,"creation_date":1675962381,"question_id":75402049,"body_markdown":"I have been looking for a long time to see if anyone has had an answer to my issue, but it doesn&#39;t seem to exist. I recently found I rarely used M1 Mac Mini. Since I had barely used it, I decided to turn it into a functioning server that runs 24/7. The only issue is that sometimes while I&#39;m sleeping and my friends are playing, the server crashes, and there&#39;s no way of starting it back up unless I&#39;m awake. So I&#39;m looking for help on how to make a .command file that either A.) It Pings the server every minute, and if it senses it&#39;s down, it terminates the current terminal and restarts the start command. B.) Once the server crashes and the terminal ends, it restarts. I prefer to go with option A, but I&#39;ll take any help that I get! Thank you so much in advance, everyone!\r\n\r\nI tried a script online, and one of them goes like this.\r\n\r\n```\r\nwhile true\r\ndo\r\ncd Desktop\r\ncd server\r\n/Library/Internet_Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java -Xmx7G -Xms7G -jar forgeserver.jar\r\n\r\necho &quot;If you want to completely stop the server process now, press Ctrl+C before\r\nthe time is up!&quot;\r\necho &quot;Rebooting in:&quot;\r\nfor i in 5 4 3 2 1\r\necho &quot;$i...&quot;\r\nsleep 1\r\ndone\r\necho &quot;Rebooting now!&quot;\r\ndone \r\n```\r\n\r\nHowever I am met with this error\r\n\r\n```\r\nLast login: Thu Feb  9 02:37:12 on ttys001\r\n/Users/myname/Desktop/start.command ; exit;                                  \r\ndavidking@Davids-Mac-mini ~ % /Users/myname/Desktop/start.command ; exit;\r\n/Users/davidking/Desktop/start.command: line 11: syntax error near unexpected token `echo&#39;\r\n&#39;Users/davidking/Desktop/start.command: line 11: `echo &quot;$i...&quot;\r\n\r\nSaving session...\r\n...copying shared history...\r\n...saving history...truncating history files...\r\n...completed.\r\n\r\n[Process completed]\r\n\r\n```","title":"I need help making a terminal command on my M1 Mac Mini to restart my minecraft server if it crashes","body":"<p>I have been looking for a long time to see if anyone has had an answer to my issue, but it doesn't seem to exist. I recently found I rarely used M1 Mac Mini. Since I had barely used it, I decided to turn it into a functioning server that runs 24/7. The only issue is that sometimes while I'm sleeping and my friends are playing, the server crashes, and there's no way of starting it back up unless I'm awake. So I'm looking for help on how to make a .command file that either A.) It Pings the server every minute, and if it senses it's down, it terminates the current terminal and restarts the start command. B.) Once the server crashes and the terminal ends, it restarts. I prefer to go with option A, but I'll take any help that I get! Thank you so much in advance, everyone!</p>\n<p>I tried a script online, and one of them goes like this.</p>\n<pre><code>while true\ndo\ncd Desktop\ncd server\n/Library/Internet_Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java -Xmx7G -Xms7G -jar forgeserver.jar\n\necho &quot;If you want to completely stop the server process now, press Ctrl+C before\nthe time is up!&quot;\necho &quot;Rebooting in:&quot;\nfor i in 5 4 3 2 1\necho &quot;$i...&quot;\nsleep 1\ndone\necho &quot;Rebooting now!&quot;\ndone \n</code></pre>\n<p>However I am met with this error</p>\n<pre><code>Last login: Thu Feb  9 02:37:12 on ttys001\n/Users/myname/Desktop/start.command ; exit;                                  \ndavidking@Davids-Mac-mini ~ % /Users/myname/Desktop/start.command ; exit;\n/Users/davidking/Desktop/start.command: line 11: syntax error near unexpected token `echo'\n'Users/davidking/Desktop/start.command: line 11: `echo &quot;$i...&quot;\n\nSaving session...\n...copying shared history...\n...saving history...truncating history files...\n...completed.\n\n[Process completed]\n\n</code></pre>\n"},{"tags":["java","android","firebase","google-cloud-platform","google-cloud-firestore"],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675958366,"creation_date":1675958366,"answer_id":75401196,"question_id":75401090,"body_markdown":"It looks like your `List (HashMap)` may have multiple child objects, and you want to search across all of those for a specific ID value.\r\n\r\nThere is no way to search across all objects in a map field in Firestore. If you want to search across all ID values, add an additional **array** field with just this values, e.g.\r\n```\r\nListIDs: [&quot;UQx4CWRgnVLOdKEY3AKJ&quot;, ...]\r\n```\r\n\r\nWith that field in place, you can then use the [`array-contains` operator](https://firebase.google.com/docs/firestore/query-data/queries#array_membership) to query for matching documents.","title":"How to Retrieve Firestore Documents with a Specific Hashmap Field Value?","body":"<p>It looks like your <code>List (HashMap)</code> may have multiple child objects, and you want to search across all of those for a specific ID value.</p>\n<p>There is no way to search across all objects in a map field in Firestore. If you want to search across all ID values, add an additional <strong>array</strong> field with just this values, e.g.</p>\n<pre><code>ListIDs: [&quot;UQx4CWRgnVLOdKEY3AKJ&quot;, ...]\n</code></pre>\n<p>With that field in place, you can then use the <a href=\"https://firebase.google.com/docs/firestore/query-data/queries#array_membership\" rel=\"nofollow noreferrer\"><code>array-contains</code> operator</a> to query for matching documents.</p>\n"},{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676016515,"creation_date":1676016515,"answer_id":75408411,"question_id":75401090,"body_markdown":"If I understand correctly, the `List` field inside the user document is a `Map` which contains only String values. So if your database schema looks **exactly** like this:\r\n\r\n    db\r\n    |\r\n    --- Users (collection)\r\n         |\r\n         --- $uid (document)\r\n              |\r\n              --- List (map) //&#128072;\r\n                   |\r\n                   --- ID: &quot;UQx4CWRgnVLOdKEY3AKJ&quot;\r\n                   |\r\n                   --- NAME: &quot;Taha Sami&quot;\r\n\r\nTo get all users where the `ID` field within the `List` holds the value of `UQx4CWRgnVLOdKEY3AKJ`, a query like this will do the trick:\r\n\r\n    Query queryByListId = db.collection(&quot;Users&quot;).whereEqualTo(&quot;List.ID&quot;, &quot;UQx4CWRgnVLOdKEY3AKJ&quot;);\r\n    //                                                            &#128070;","title":"How to Retrieve Firestore Documents with a Specific Hashmap Field Value?","body":"<p>If I understand correctly, the <code>List</code> field inside the user document is a <code>Map</code> which contains only String values. So if your database schema looks <strong>exactly</strong> like this:</p>\n<pre><code>db\n|\n--- Users (collection)\n     |\n     --- $uid (document)\n          |\n          --- List (map) //👈\n               |\n               --- ID: &quot;UQx4CWRgnVLOdKEY3AKJ&quot;\n               |\n               --- NAME: &quot;Taha Sami&quot;\n</code></pre>\n<p>To get all users where the <code>ID</code> field within the <code>List</code> holds the value of <code>UQx4CWRgnVLOdKEY3AKJ</code>, a query like this will do the trick:</p>\n<pre><code>Query queryByListId = db.collection(&quot;Users&quot;).whereEqualTo(&quot;List.ID&quot;, &quot;UQx4CWRgnVLOdKEY3AKJ&quot;);\n//                                                            👆\n</code></pre>\n"}],"owner":{"account_id":10115449,"reputation":1615,"user_id":7474282,"accept_rate":75,"display_name":"Taha Sami"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75408411,"answer_count":2,"score":0,"last_activity_date":1676016540,"creation_date":1675957760,"question_id":75401090,"body_markdown":"    --- Users (Collection)\r\n        |\r\n        --- p0A1fXH4l2TpvGE2lo0x\r\n            |\r\n            --- List (HashMap)\r\n                |\r\n                --- ID (String) (Value: UQx4CWRgnVLOdKEY3AKJ)\r\n                --- NAME (String) (Value: ...)\r\n\r\nIn Firestore, how can I find the documents that have a list ID equal to `UQx4CWRgnVLOdKEY3AKJ`? Before deleting the list, I need to remove it from the users who have used it. How can I determine which documents are using this list ID so I can delete them?","title":"How to Retrieve Firestore Documents with a Specific Hashmap Field Value?","body":"<pre><code>--- Users (Collection)\n    |\n    --- p0A1fXH4l2TpvGE2lo0x\n        |\n        --- List (HashMap)\n            |\n            --- ID (String) (Value: UQx4CWRgnVLOdKEY3AKJ)\n            --- NAME (String) (Value: ...)\n</code></pre>\n<p>In Firestore, how can I find the documents that have a list ID equal to <code>UQx4CWRgnVLOdKEY3AKJ</code>? Before deleting the list, I need to remove it from the users who have used it. How can I determine which documents are using this list ID so I can delete them?</p>\n"},{"tags":["java","html","vaadin"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1676013521,"post_id":75407887,"comment_id":133055190,"body_markdown":"Does States implement equals/hashCode?","body":"Does States implement equals/hashCode?"},{"owner":{"account_id":84086,"reputation":2341,"user_id":10900045,"display_name":"John Doe"},"score":0,"creation_date":1676018515,"post_id":75407887,"comment_id":133056378,"body_markdown":"No, but after the implementation this works.","body":"No, but after the implementation this works."}],"answers":[{"tags":[],"owner":{"account_id":4430906,"reputation":3990,"user_id":3608089,"display_name":"ollitietavainen"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1676016467,"creation_date":1676014881,"answer_id":75408177,"question_id":75407887,"body_markdown":"It&#39;s not possible to tell based on the code you have shared. Quite likely the `States` object returned by `location.getLocationState().get()` does not share the same object identity with a value returned by `facade.stateService().findAllStates()`. This can happen even if the properties (such as the &quot;name&quot;) of the objects are the same. Typically the answer is to implement the `hashCode` and `equals` methods in the class in a way that identity depends only on the id of the entity.","title":"Setting value for select element is not showing in UI","body":"<p>It's not possible to tell based on the code you have shared. Quite likely the <code>States</code> object returned by <code>location.getLocationState().get()</code> does not share the same object identity with a value returned by <code>facade.stateService().findAllStates()</code>. This can happen even if the properties (such as the &quot;name&quot;) of the objects are the same. Typically the answer is to implement the <code>hashCode</code> and <code>equals</code> methods in the class in a way that identity depends only on the id of the entity.</p>\n"}],"owner":{"account_id":84086,"reputation":2341,"user_id":10900045,"display_name":"John Doe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75408177,"answer_count":1,"score":0,"last_activity_date":1676016467,"creation_date":1676012670,"question_id":75407887,"body_markdown":"I am using vaadin select to display a select menu with states.\r\n\r\n```\r\nprivate Select&lt;States&gt; states = new Select&lt;&gt;();\r\n```\r\n\r\n```\r\nstates.setLabel(&quot;State&quot;);\r\nstates.setItems(facade.stateService().findAllStates());\r\nstates.setItemLabelGenerator(States::getName);\r\n```\r\n\r\n```\r\nOptional&lt;States&gt; state = facade.stateService().findByCode(location.getLocationState());\r\nif (state.isPresent()) {\r\n    states.setValue(state.get());    // this is not working\r\n}\r\n```\r\n\r\nI am getting the state value and setting it using `states.setValue()` but the select is not displaying the updated state. The method is getting called. How to make select the menu selected? Thanks.","title":"Setting value for select element is not showing in UI","body":"<p>I am using vaadin select to display a select menu with states.</p>\n<pre><code>private Select&lt;States&gt; states = new Select&lt;&gt;();\n</code></pre>\n<pre><code>states.setLabel(&quot;State&quot;);\nstates.setItems(facade.stateService().findAllStates());\nstates.setItemLabelGenerator(States::getName);\n</code></pre>\n<pre><code>Optional&lt;States&gt; state = facade.stateService().findByCode(location.getLocationState());\nif (state.isPresent()) {\n    states.setValue(state.get());    // this is not working\n}\n</code></pre>\n<p>I am getting the state value and setting it using <code>states.setValue()</code> but the select is not displaying the updated state. The method is getting called. How to make select the menu selected? Thanks.</p>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-elastic-beanstalk"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1675985776,"post_id":75405437,"comment_id":133051315,"body_markdown":"Are there any logs? If so, can you share them?","body":"Are there any logs? If so, can you share them?"},{"owner":{"account_id":33230,"reputation":21479,"user_id":92837,"accept_rate":97,"display_name":"Sathyajith Bhat"},"score":0,"creation_date":1675989648,"post_id":75405437,"comment_id":133051927,"body_markdown":"your beanstalk link to the logs is not accessible to public","body":"your beanstalk link to the logs is not accessible to public"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1675990008,"post_id":75405437,"comment_id":133051988,"body_markdown":"@SathyajithBhat I revised the link. Can you look through it?","body":"@SathyajithBhat I revised the link. Can you look through it?"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1675991120,"post_id":75405437,"comment_id":133052151,"body_markdown":"@dan1st I shared the logs through the link","body":"@dan1st I shared the logs through the link"},{"owner":{"account_id":4963513,"reputation":549,"user_id":3993742,"display_name":"Santiago Medina"},"score":0,"creation_date":1675995282,"post_id":75405437,"comment_id":133052717,"body_markdown":"Have you tried accessing the URL through the standard http/https port? I remember that beanstalk puts a nginx server in front of the application, so the port you configure for the application remains internal, and the exposed one is the nginx port.","body":"Have you tried accessing the URL through the standard http/https port? I remember that beanstalk puts a nginx server in front of the application, so the port you configure for the application remains internal, and the exposed one is the nginx port."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1676003195,"post_id":75405437,"comment_id":133053706,"body_markdown":"@SantiagoMedina My issue is that the app cannot be deployed as I get &quot;severe&quot; issue even if I defined SERVER_PORT as 5000 in its environment.","body":"@SantiagoMedina My issue is that the app cannot be deployed as I get &quot;severe&quot; issue even if I defined SERVER_PORT as 5000 in its environment."},{"owner":{"account_id":4963513,"reputation":549,"user_id":3993742,"display_name":"Santiago Medina"},"score":0,"creation_date":1676004309,"post_id":75405437,"comment_id":133053863,"body_markdown":"Understood. I see many requests to / in your logs made by ELB-HealthChecker with response 404. Seems that EB performs a GET to your base path expecting a 200 to consider your application as healthy deployed, but gets 404. Try implementing that response programmatically, or putting a index.html under src/main/resources/static, or configuring EB to do the health check against a different URL.","body":"Understood. I see many requests to / in your logs made by ELB-HealthChecker with response 404. Seems that EB performs a GET to your base path expecting a 200 to consider your application as healthy deployed, but gets 404. Try implementing that response programmatically, or putting a index.html under src/main/resources/static, or configuring EB to do the health check against a different URL."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1676005316,"post_id":75405437,"comment_id":133053989,"body_markdown":"@SantiagoMedina I shared the causes. Even if I tried to deploy it many times with selecting Java and coretto 17,11 and 8, I still got the same issue. There is no issue when I run this command `mvn clean install` as I get a message as `Build Success`","body":"@SantiagoMedina I shared the causes. Even if I tried to deploy it many times with selecting Java and coretto 17,11 and 8, I still got the same issue. There is no issue when I run this command <code>mvn clean install</code> as I get a message as <code>Build Success</code>"},{"owner":{"account_id":4963513,"reputation":549,"user_id":3993742,"display_name":"Santiago Medina"},"score":0,"creation_date":1676006088,"post_id":75405437,"comment_id":133054097,"body_markdown":"Yes, I know your application builds OK, and starts OK. But ELB health checker expects a 200 OK response when sending a GET to your base path, but the application don&#39;t provide any response on that path (404-not found). You have only a controller listening to /api/.., but nothing on the root. Then ELB believe it&#39;s not up. That&#39;s why I suggested adding a response through a home static page (index.html), or programmatically with a controller, or changing the EB health check configuration to check a different path.","body":"Yes, I know your application builds OK, and starts OK. But ELB health checker expects a 200 OK response when sending a GET to your base path, but the application don&#39;t provide any response on that path (404-not found). You have only a controller listening to /api/.., but nothing on the root. Then ELB believe it&#39;s not up. That&#39;s why I suggested adding a response through a home static page (index.html), or programmatically with a controller, or changing the EB health check configuration to check a different path."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1676006270,"post_id":75405437,"comment_id":133054120,"body_markdown":"@SantiagoMedina How can I define the root programmatically with a controller instead of creating a static page (index.html)?","body":"@SantiagoMedina How can I define the root programmatically with a controller instead of creating a static page (index.html)?"},{"owner":{"account_id":4963513,"reputation":549,"user_id":3993742,"display_name":"Santiago Medina"},"score":0,"creation_date":1676007056,"post_id":75405437,"comment_id":133054216,"body_markdown":"Change (a) for @\n(a)RestController\npublic class HealthController {\n\n    (a)GetMapping\n    public String healthCheck() {\n        return &quot;Application is UP&quot;;\n    }\n}","body":"Change (a) for @ (a)RestController public class HealthController {      (a)GetMapping     public String healthCheck() {         return &quot;Application is UP&quot;;     } }"},{"owner":{"account_id":4963513,"reputation":549,"user_id":3993742,"display_name":"Santiago Medina"},"score":0,"creation_date":1676007375,"post_id":75405437,"comment_id":133054250,"body_markdown":"You could also use the spring boot actuator module, that implements a health endpoint, but not in the root, so you would need to change the ELB config to check the health in the actuator path (/actuator/health)","body":"You could also use the spring boot actuator module, that implements a health endpoint, but not in the root, so you would need to change the ELB config to check the health in the actuator path (/actuator/health)"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1676011404,"post_id":75405437,"comment_id":133054785,"body_markdown":"@SantiagoMedina What should I do after adding its dependency?","body":"@SantiagoMedina What should I do after adding its dependency?"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1676013870,"post_id":75405437,"comment_id":133055255,"body_markdown":"@SantiagoMedina I tried to define endpoints in the browser and it work but there is a problem in root path. How can I fix it? How can I define it in configuration?","body":"@SantiagoMedina I tried to define endpoints in the browser and it work but there is a problem in root path. How can I fix it? How can I define it in configuration?"},{"owner":{"account_id":4963513,"reputation":549,"user_id":3993742,"display_name":"Santiago Medina"},"score":0,"creation_date":1676029825,"post_id":75405437,"comment_id":133059672,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/251787/discussion-between-santiago-medina-and-s-n).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/251787/discussion-between-santiago-medina-and-s-n\">continue this discussion in chat</a>."}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":693,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1676016101,"creation_date":1675984505,"question_id":75405437,"body_markdown":"\r\nI have a problem to deploy my **Spring Boot 3** with **Swagger** to **AWS**.\r\n\r\nAfter creating the environment from **elastic beanstalk** and defining **jar** file of the project, I complete the process.\r\n\r\nI get this message &quot;**Severe**&quot; for the instance after waiting a certain of time.\r\n\r\nI also changed `server.port= 5000` and define `SERVER_PORT 5000` for the environment of the software configuration but nothing changed.\r\n\r\nHere is the image shown below\r\n\r\n[![Link][1]][1]\r\n\r\nHere is the health overview information shown below.\r\n\r\n    Severe\r\n    \r\n    Environment health has transitioned from Ok to Severe. 100.0 % of the requests are erroring with HTTP 4xx. Insufficient request rate (12.0 requests/min) to determine application health. ELB processes are not healthy on all instances. ELB health is failing or not available for all instances.\r\n\r\nHow can I fix the issue?\r\n\r\nThe **local URL** is `http://localhost:5000/swagger-ui/index.html`\r\n\r\n\r\nHere is the **link** showing **logs** : [Link][2]\r\n\r\nHere is the **repo** : [Link][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3Zwma.png\r\n  [2]: https://drive.google.com/file/d/1ObPKRXvlGmNMeCVQIF8-r_uSV-6W2R_Q/view?usp=share_link\r\n  [3]: https://github.com/Rapter1990/DepremApi","title":"Spring Boot 3 App with Swagger cannot deployed with AWS (Severe Issue)","body":"<p>I have a problem to deploy my <strong>Spring Boot 3</strong> with <strong>Swagger</strong> to <strong>AWS</strong>.</p>\n<p>After creating the environment from <strong>elastic beanstalk</strong> and defining <strong>jar</strong> file of the project, I complete the process.</p>\n<p>I get this message &quot;<strong>Severe</strong>&quot; for the instance after waiting a certain of time.</p>\n<p>I also changed <code>server.port= 5000</code> and define <code>SERVER_PORT 5000</code> for the environment of the software configuration but nothing changed.</p>\n<p>Here is the image shown below</p>\n<p><a href=\"https://i.stack.imgur.com/3Zwma.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3Zwma.png\" alt=\"Link\" /></a></p>\n<p>Here is the health overview information shown below.</p>\n<pre><code>Severe\n\nEnvironment health has transitioned from Ok to Severe. 100.0 % of the requests are erroring with HTTP 4xx. Insufficient request rate (12.0 requests/min) to determine application health. ELB processes are not healthy on all instances. ELB health is failing or not available for all instances.\n</code></pre>\n<p>How can I fix the issue?</p>\n<p>The <strong>local URL</strong> is <code>http://localhost:5000/swagger-ui/index.html</code></p>\n<p>Here is the <strong>link</strong> showing <strong>logs</strong> : <a href=\"https://drive.google.com/file/d/1ObPKRXvlGmNMeCVQIF8-r_uSV-6W2R_Q/view?usp=share_link\" rel=\"nofollow noreferrer\">Link</a></p>\n<p>Here is the <strong>repo</strong> : <a href=\"https://github.com/Rapter1990/DepremApi\" rel=\"nofollow noreferrer\">Link</a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1675983857,"post_id":75405269,"comment_id":133050991,"body_markdown":"You need to keep a reference to `maxCharge` and `totalDrain` in your class.  Remaining charge = maximum charge - total drain.","body":"You need to keep a reference to <code>maxCharge</code> and <code>totalDrain</code> in your class.  Remaining charge = maximum charge - total drain."},{"owner":{"account_id":27748688,"reputation":1,"user_id":21183557,"display_name":"tennisplayer97"},"score":0,"creation_date":1675984181,"post_id":75405269,"comment_id":133051060,"body_markdown":"Thank you! I figured out I could also use Math.min. Thank you for your response!","body":"Thank you! I figured out I could also use Math.min. Thank you for your response!"}],"answers":[{"tags":[],"owner":{"account_id":17531877,"reputation":1654,"user_id":12715723,"display_name":"Jordy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675988243,"creation_date":1675988243,"answer_id":75405761,"question_id":75405269,"body_markdown":"To keep the `batteryCharge` value when subtracting a larger value, you can use the ternary operator ([source](https://www.w3schools.com/java/java_conditions_shorthand.asp)) representing `if/else`. If `batteryCharge - drain` is less than 0 then keep that value, otherwise save the substraction value. Instead use this:\r\n```\r\nbatteryCharge = Math.max(batteryCharge - drain, 0);\r\n```\r\nTry this:\r\n```\r\nbatteryCharge = batteryCharge - drain &lt; 0 ? batteryCharge : batteryCharge - drain;\r\n```","title":"Java function to calculate difference in charge?","body":"<p>To keep the <code>batteryCharge</code> value when subtracting a larger value, you can use the ternary operator (<a href=\"https://www.w3schools.com/java/java_conditions_shorthand.asp\" rel=\"nofollow noreferrer\">source</a>) representing <code>if/else</code>. If <code>batteryCharge - drain</code> is less than 0 then keep that value, otherwise save the substraction value. Instead use this:</p>\n<pre><code>batteryCharge = Math.max(batteryCharge - drain, 0);\n</code></pre>\n<p>Try this:</p>\n<pre><code>batteryCharge = batteryCharge - drain &lt; 0 ? batteryCharge : batteryCharge - drain;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676015430,"creation_date":1675988263,"answer_id":75405762,"question_id":75405269,"body_markdown":"The amount drained cannot be greater than the battery&#39;s remaining charge:\r\n\r\n```java\r\ndouble drain = Math.min(batteryCharge, cameraPowerConsumption * minutes);\r\n```\r\n\r\nAfter making that adjustment to your code, the rest is simple:\r\n\r\n```java\r\ndouble drain = Math.min(batteryCharge, cameraPowerConsumption * minutes);\r\nbatteryCharge -= drain;\r\ntotalDrain += drain;\r\nreturn drain;\r\n```\r\n\r\n","title":"Java function to calculate difference in charge?","body":"<p>The amount drained cannot be greater than the battery's remaining charge:</p>\n<pre class=\"lang-java prettyprint-override\"><code>double drain = Math.min(batteryCharge, cameraPowerConsumption * minutes);\n</code></pre>\n<p>After making that adjustment to your code, the rest is simple:</p>\n<pre class=\"lang-java prettyprint-override\"><code>double drain = Math.min(batteryCharge, cameraPowerConsumption * minutes);\nbatteryCharge -= drain;\ntotalDrain += drain;\nreturn drain;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7474452,"reputation":101,"user_id":5681287,"display_name":"taismile"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676016079,"creation_date":1676016079,"answer_id":75408342,"question_id":75405269,"body_markdown":"Just simple \r\n\r\n    public double drain(double minutes) {\r\n        double drain = cameraPowerConsumption * minutes;\r\n        if (drain &gt; batteryCharge){\r\n            totalDrain +=batteryCharge;\r\n            return batteryCharge;\r\n        }\r\n        totalDrain +=drain;\r\n        return (batteryCharge - drain);\r\n    }","title":"Java function to calculate difference in charge?","body":"<p>Just simple</p>\n<pre><code>public double drain(double minutes) {\n    double drain = cameraPowerConsumption * minutes;\n    if (drain &gt; batteryCharge){\n        totalDrain +=batteryCharge;\n        return batteryCharge;\n    }\n    totalDrain +=drain;\n    return (batteryCharge - drain);\n}\n</code></pre>\n"}],"owner":{"account_id":27748688,"reputation":1,"user_id":21183557,"display_name":"tennisplayer97"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75405762,"answer_count":3,"score":0,"last_activity_date":1676016079,"creation_date":1675983108,"question_id":75405269,"body_markdown":"This object has a max charge of 1000. And when you drain 100, and then drain 1000, the second drain is supposed to return 900. What function to use that will allow me to return 900 because that is that max amount that can be drained as you can&#39;t drain a negative number?\r\n\r\nI tried,\r\n\t    \r\n```\r\npublic double drain(double minutes) {\r\n\t    double drain = cameraPowerConsumption * minutes;\r\n\t    batteryCharge = Math.max(batteryCharge - drain, 0);\r\n\t    totalDrain += drain;\r\n        return drain;\r\n```\r\n\r\nbut it returns 1000 instead of 900, after already draining 100. I think the drain variable needs to be changed. Without conditionals if that matters.","title":"Java function to calculate difference in charge?","body":"<p>This object has a max charge of 1000. And when you drain 100, and then drain 1000, the second drain is supposed to return 900. What function to use that will allow me to return 900 because that is that max amount that can be drained as you can't drain a negative number?</p>\n<p>I tried,</p>\n<pre><code>public double drain(double minutes) {\n        double drain = cameraPowerConsumption * minutes;\n        batteryCharge = Math.max(batteryCharge - drain, 0);\n        totalDrain += drain;\n        return drain;\n</code></pre>\n<p>but it returns 1000 instead of 900, after already draining 100. I think the drain variable needs to be changed. Without conditionals if that matters.</p>\n"},{"tags":["java","javafx","installation"],"comments":[{"owner":{"account_id":5392262,"reputation":4671,"user_id":4294399,"display_name":"General Grievance"},"score":3,"creation_date":1675966337,"post_id":75402727,"comment_id":133046504,"body_markdown":"Have you been through https://openjfx.io/openjfx-docs/?","body":"Have you been through <a href=\"https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\">openjfx.io/openjfx-docs</a>?"},{"owner":{"account_id":15219362,"reputation":712,"user_id":10981696,"display_name":"ice-wind"},"score":0,"creation_date":1675966568,"post_id":75402727,"comment_id":133046583,"body_markdown":"@GeneralGrievance Yes and I can&#39;t find how to install the thing as a user in there","body":"@GeneralGrievance Yes and I can&#39;t find how to install the thing as a user in there"},{"owner":{"account_id":5392262,"reputation":4671,"user_id":4294399,"display_name":"General Grievance"},"score":0,"creation_date":1675966746,"post_id":75402727,"comment_id":133046624,"body_markdown":"Click &quot;I have Java installed&quot;. The page should say what to do with that downloaded folder.","body":"Click &quot;I have Java installed&quot;. The page should say what to do with that downloaded folder."},{"owner":{"account_id":2848514,"reputation":10932,"user_id":2446208,"accept_rate":69,"display_name":"blacktide"},"score":2,"creation_date":1675966848,"post_id":75402727,"comment_id":133046662,"body_markdown":"The [Zulu JDK builds](https://www.azul.com/downloads/?version=java-19-sts&amp;os=macos&amp;package=jdk) have JavaFX built into them, just download the version for your OS.","body":"The <a href=\"https://www.azul.com/downloads/?version=java-19-sts&amp;os=macos&amp;package=jdk\" rel=\"nofollow noreferrer\">Zulu JDK builds</a> have JavaFX built into them, just download the version for your OS."},{"owner":{"account_id":200481,"reputation":5195,"user_id":446357,"accept_rate":64,"display_name":"MTilsted"},"score":0,"creation_date":1675966884,"post_id":75402727,"comment_id":133046673,"body_markdown":"The thing that might confuse you, is that you don&#39;t really need to install anything as such. You just unpack the folder and then run your software with the command line as described in the &quot;I have java&quot; link above.","body":"The thing that might confuse you, is that you don&#39;t really need to install anything as such. You just unpack the folder and then run your software with the command line as described in the &quot;I have java&quot; link above."},{"owner":{"account_id":15219362,"reputation":712,"user_id":10981696,"display_name":"ice-wind"},"score":0,"creation_date":1675966971,"post_id":75402727,"comment_id":133046712,"body_markdown":"`&gt; java --module-path ~/Downloads/javafx-sdk-19.0.2.1/ --add-modules javafx.controls mcaselector-2.1.jar` results in\n`Error occurred during initialization of boot layer\njava.lang.module.FindException: Module javafx.controls not found`","body":"<code>&gt; java --module-path ~&#47;Downloads&#47;javafx-sdk-19.0.2.1&#47; --add-modules javafx.controls mcaselector-2.1.jar</code> results in <code>Error occurred during initialization of boot layer java.lang.module.FindException: Module javafx.controls not found</code>"},{"owner":{"account_id":15219362,"reputation":712,"user_id":10981696,"display_name":"ice-wind"},"score":0,"creation_date":1675967610,"post_id":75402727,"comment_id":133046940,"body_markdown":"@MTilsted Is there no way to just double click the jar and have it find javafx ?","body":"@MTilsted Is there no way to just double click the jar and have it find javafx ?"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1675971790,"post_id":75402727,"comment_id":133048159,"body_markdown":"*&quot;Is there no way to just double click the jar and have it find javafx ?&quot;* -&gt; yes if you use the **Zulu JDK FX** build recommended by @blacktide.  It includes JavaFX in the base Java runtime image, so you can create a jar that you could run which uses JavaFX from the runtime image which will work *as long as you know all of your users are doing the same thing...*","body":"<i>&quot;Is there no way to just double click the jar and have it find javafx ?&quot;</i> -&gt; yes if you use the <b>Zulu JDK FX</b> build recommended by @blacktide.  It includes JavaFX in the base Java runtime image, so you can create a jar that you could run which uses JavaFX from the runtime image which will work <i>as long as you know all of your users are doing the same thing...</i>"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1675985955,"post_id":75402727,"comment_id":133051342,"body_markdown":"StackOverflow is a [site for programming and software development](https://stackoverflow.com/help/on-topic).  Questions not related to that are off-topic (e.g. &quot;I need to run a thing, not code with the library&quot;).  This, I think, is why you have a mismatch between the answer and comments you received and your expectations.","body":"StackOverflow is a <a href=\"https://stackoverflow.com/help/on-topic\">site for programming and software development</a>.  Questions not related to that are off-topic (e.g. &quot;I need to run a thing, not code with the library&quot;).  This, I think, is why you have a mismatch between the answer and comments you received and your expectations."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1676349569,"post_id":75402727,"comment_id":133114648,"body_markdown":"To allow double-click execution, you can [create a batch file (windows)](https://stackoverflow.com/a/2879843/1155209) or shell script (Linux or MacOS), that runs the app, then double click the batch file to run.  Or you can contact the provider of the app and request they make an installer using something like jpackage.","body":"To allow double-click execution, you can <a href=\"https://stackoverflow.com/a/2879843/1155209\">create a batch file (windows)</a> or shell script (Linux or MacOS), that runs the app, then double click the batch file to run.  Or you can contact the provider of the app and request they make an installer using something like jpackage."}],"answers":[{"tags":[],"owner":{"account_id":15219362,"reputation":712,"user_id":10981696,"display_name":"ice-wind"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1675968988,"creation_date":1675968584,"answer_id":75403148,"question_id":75402727,"body_markdown":"I found how to do it, so here&#39;s a guide :\r\n\r\n 1. Download the JDK for your java version from [JavaFX][1]\r\n 2. Open `/Library/Java/JavaVirtualMachines/openjdk.jdk/Contents/Home`\r\n 3. Move everything from the `lib` and `legal` folders you downloaded to the respective subfolders where we just opened\r\n 4. **Delete** jrt-fs.jar\r\n 5. Run your program with `java --module-path $JAVA_HOME/lib --add-modules javafx.controls -jar Program_Name_Here.jar`\r\n\r\n **Bonus**: If you don&#39;t want to have to type out that command every time, run :\r\n\r\n`echo _JAVA_OPTIONS=&quot;--module-path=$JAVA_HOME/lib --add-modules=ALL-MODULE-PATH&quot; &gt;&gt; ~/.bash_profile` \r\n\r\nin your terminal. The modules will all be loaded by default when running java programs (I have no idea if there are any side effects, I don&#39;t understand anything about Java).\r\n\r\nPlease note that the program still won&#39;t work when double-clicking it directly, because of java magic or something.\r\n\r\n  [1]: https://openjfx.io/","title":"Installing JavaFX (with no java knowledge whatsoever)","body":"<p>I found how to do it, so here's a guide :</p>\n<ol>\n<li>Download the JDK for your java version from <a href=\"https://openjfx.io/\" rel=\"nofollow noreferrer\">JavaFX</a></li>\n<li>Open <code>/Library/Java/JavaVirtualMachines/openjdk.jdk/Contents/Home</code></li>\n<li>Move everything from the <code>lib</code> and <code>legal</code> folders you downloaded to the respective subfolders where we just opened</li>\n<li><strong>Delete</strong> jrt-fs.jar</li>\n<li>Run your program with <code>java --module-path $JAVA_HOME/lib --add-modules javafx.controls -jar Program_Name_Here.jar</code></li>\n</ol>\n<p><strong>Bonus</strong>: If you don't want to have to type out that command every time, run :</p>\n<p><code>echo _JAVA_OPTIONS=&quot;--module-path=$JAVA_HOME/lib --add-modules=ALL-MODULE-PATH&quot; &gt;&gt; ~/.bash_profile</code></p>\n<p>in your terminal. The modules will all be loaded by default when running java programs (I have no idea if there are any side effects, I don't understand anything about Java).</p>\n<p>Please note that the program still won't work when double-clicking it directly, because of java magic or something.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1676016007,"creation_date":1675975988,"answer_id":75404320,"question_id":75402727,"body_markdown":"[JavaFX][1] is implemented as open-source in the [OpenJFX][2] sub-project on the [OpenJDK][3] project. OpenJFX is led by the [Gluon][4] company, in cooperation with Oracle Corp.\r\n\r\nOpenJFX is simply a few libraries, a collection of Java JAR files. You need to obtain a copy of the libraries, and make them available to your app. You can do this in one of three ways:\r\n\r\n - Install a copy of the libraries as **part of your app**.\r\n - Install a copy of the libraries in a place that will appear **on the [Classpath][5]** of your app. For example, [on macOS][6]: `/Library/Java/Extensions`.\r\n - Install a **JDK that comes bundled** with the libraries. I know of two vendors that make an edition of their JDK products to include the libraries: *ZuluFX* by Azul Systems, and *LibericaFX* by BellSoft.\r\n\r\nBy “install” I mean simply making the JAR files available: (1) download, (2) move to the right folder location. There is no need to run an installer app. There is simply not anything complicated enough about this to require an installer.\r\n\r\n&#128073; The last of those three (a JDK with libraries bundled) is the easiest if you are new to programming.\r\n\r\nIf you will be doing serious work with Java and JavaFX, I strongly recommend learning to use a dependency management tool such as [Apache Maven][7] or Apache Gradle. Such a tool automates the chore of locating, downloading, and installing libraries such as OpenJFX.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/JavaFX\r\n  [2]: https://openjfx.io/\r\n  [3]: https://en.wikipedia.org/wiki/OpenJDK\r\n  [4]: https://gluonhq.com/\r\n  [5]: https://en.wikipedia.org/wiki/Classpath\r\n  [6]: https://stackoverflow.com/q/1675765/642706\r\n  [7]: https://en.wikipedia.org/wiki/Apache_Maven","title":"Installing JavaFX (with no java knowledge whatsoever)","body":"<p><a href=\"https://en.wikipedia.org/wiki/JavaFX\" rel=\"nofollow noreferrer\">JavaFX</a> is implemented as open-source in the <a href=\"https://openjfx.io/\" rel=\"nofollow noreferrer\">OpenJFX</a> sub-project on the <a href=\"https://en.wikipedia.org/wiki/OpenJDK\" rel=\"nofollow noreferrer\">OpenJDK</a> project. OpenJFX is led by the <a href=\"https://gluonhq.com/\" rel=\"nofollow noreferrer\">Gluon</a> company, in cooperation with Oracle Corp.</p>\n<p>OpenJFX is simply a few libraries, a collection of Java JAR files. You need to obtain a copy of the libraries, and make them available to your app. You can do this in one of three ways:</p>\n<ul>\n<li>Install a copy of the libraries as <strong>part of your app</strong>.</li>\n<li>Install a copy of the libraries in a place that will appear <strong>on the <a href=\"https://en.wikipedia.org/wiki/Classpath\" rel=\"nofollow noreferrer\">Classpath</a></strong> of your app. For example, <a href=\"https://stackoverflow.com/q/1675765/642706\">on macOS</a>: <code>/Library/Java/Extensions</code>.</li>\n<li>Install a <strong>JDK that comes bundled</strong> with the libraries. I know of two vendors that make an edition of their JDK products to include the libraries: <em>ZuluFX</em> by Azul Systems, and <em>LibericaFX</em> by BellSoft.</li>\n</ul>\n<p>By “install” I mean simply making the JAR files available: (1) download, (2) move to the right folder location. There is no need to run an installer app. There is simply not anything complicated enough about this to require an installer.</p>\n<p>👉 The last of those three (a JDK with libraries bundled) is the easiest if you are new to programming.</p>\n<p>If you will be doing serious work with Java and JavaFX, I strongly recommend learning to use a dependency management tool such as <a href=\"https://en.wikipedia.org/wiki/Apache_Maven\" rel=\"nofollow noreferrer\">Apache Maven</a> or Apache Gradle. Such a tool automates the chore of locating, downloading, and installing libraries such as OpenJFX.</p>\n"}],"owner":{"account_id":15219362,"reputation":712,"user_id":10981696,"display_name":"ice-wind"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1675993949,"answer_count":2,"score":-3,"last_activity_date":1676016007,"creation_date":1675966065,"question_id":75402727,"body_markdown":"I haven&#39;t found an answer yet fitting a knucklehead such as me, so I&#39;ll ask for myself : I&#39;m on macOS 13.1 and I have openJDK 19.0.2 installed already ; how am I supposed to install [JavaFX][1] ? The only downloads there just spit out a folder, which I have no idea what to do with.\r\n\r\nThere are no installation instructions that I could find, the site juste says that &quot;The JavaFX runtime is available as a platform-specific SDK, [and] as a number of jmods&quot; which isn&#39;t very useful if you have no idea what a jmod even is. What am I supposed to do ?\r\n\r\nI don&#39;t know if that makes any difference, but I&#39;m trying to install the *runtime* part of it I guess. I need to run a thing, not code with the library. I don&#39;t even know if there&#39;s a difference in the Java world though ?\r\n\r\n  [1]: https://openjfx.io","title":"Installing JavaFX (with no java knowledge whatsoever)","body":"<p>I haven't found an answer yet fitting a knucklehead such as me, so I'll ask for myself : I'm on macOS 13.1 and I have openJDK 19.0.2 installed already ; how am I supposed to install <a href=\"https://openjfx.io\" rel=\"nofollow noreferrer\">JavaFX</a> ? The only downloads there just spit out a folder, which I have no idea what to do with.</p>\n<p>There are no installation instructions that I could find, the site juste says that &quot;The JavaFX runtime is available as a platform-specific SDK, [and] as a number of jmods&quot; which isn't very useful if you have no idea what a jmod even is. What am I supposed to do ?</p>\n<p>I don't know if that makes any difference, but I'm trying to install the <em>runtime</em> part of it I guess. I need to run a thing, not code with the library. I don't even know if there's a difference in the Java world though ?</p>\n"},{"tags":["java","math","java.util.scanner"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1675871558,"post_id":75388197,"comment_id":133021997,"body_markdown":"From the compiler&#39;s point of view you don&#39;t return a value in all possible paths in `sub()` and `divide()` methods. Use `else` instead of the second `if`.","body":"From the compiler&#39;s point of view you don&#39;t return a value in all possible paths in <code>sub()</code> and <code>divide()</code> methods. Use <code>else</code> instead of the second <code>if</code>."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1675871764,"post_id":75388197,"comment_id":133022077,"body_markdown":"`Scanner` does not have method `getInt()`. Did you perhaps meant `Scanner.nextInt()`, or maybe `GetData.getInt()`?","body":"<code>Scanner</code> does not have method <code>getInt()</code>. Did you perhaps meant <code>Scanner.nextInt()</code>, or maybe <code>GetData.getInt()</code>?"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1675871767,"post_id":75388197,"comment_id":133022082,"body_markdown":"Don&#39;t correct the expression based on comparisons.  A negative number  for subtraction is a valid answer and so is a reciprocal (e.g. a/b vs b/a).  Most folks understand that it is `a op b` and they need to deal with it.  But you can check for bad things like division by zero and provide a message or let the calculator display the exception.  Also, you divide method is missing parameters.","body":"Don&#39;t correct the expression based on comparisons.  A negative number  for subtraction is a valid answer and so is a reciprocal (e.g. a/b vs b/a).  Most folks understand that it is <code>a op b</code> and they need to deal with it.  But you can check for bad things like division by zero and provide a message or let the calculator display the exception.  Also, you divide method is missing parameters."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1675873348,"post_id":75388197,"comment_id":133022692,"body_markdown":"Regarding my previous comment, correcting the expressions will also make your calculator pretty useless.","body":"Regarding my previous comment, correcting the expressions will also make your calculator pretty useless."},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1675876041,"post_id":75388197,"comment_id":133023629,"body_markdown":"Can you provide a sample user interaction?  How does the user interact with your program?  Do they enter input like  5 + 2?  Does your app display a menu for user to pick what operations to perform?  Without this knowledge, you can&#39;t write your program (main class).","body":"Can you provide a sample user interaction?  How does the user interact with your program?  Do they enter input like  5 + 2?  Does your app display a menu for user to pick what operations to perform?  Without this knowledge, you can&#39;t write your program (main class)."}],"answers":[{"tags":[],"owner":{"account_id":250292,"reputation":436,"user_id":526910,"display_name":"lbarowski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676015982,"creation_date":1676015982,"answer_id":75408324,"question_id":75388197,"body_markdown":"As an aside, note that x &gt;= y and y &gt;= x will both be false if either x or y is Double.NaN, and you can enter NaN as a double value with the Scanner class (and also Infinity and -Infinity). So unless you check the values ahead of time to rule out NaN, you can&#39;t assume that at least one of those two conditions will be true.\r\n\r\nYou also can&#39;t assume that if x &gt; y and y &gt; x are false, then x == y, because for NaN all of those are false. And, if you have just assigned x = y, you can&#39;t assume that x == y, since if y was NaN that will be false.","title":"Making a Calculator using multiple classes","body":"<p>As an aside, note that x &gt;= y and y &gt;= x will both be false if either x or y is Double.NaN, and you can enter NaN as a double value with the Scanner class (and also Infinity and -Infinity). So unless you check the values ahead of time to rule out NaN, you can't assume that at least one of those two conditions will be true.</p>\n<p>You also can't assume that if x &gt; y and y &gt; x are false, then x == y, because for NaN all of those are false. And, if you have just assigned x = y, you can't assume that x == y, since if y was NaN that will be false.</p>\n"}],"owner":{"account_id":27686750,"reputation":1,"user_id":21134366,"display_name":"LCDIgnited"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1676015982,"creation_date":1675870848,"question_id":75388197,"body_markdown":"I&#39;ve been trying to make a calculator with multiple classes, however I am not that experienced with classes. I&#39;ve been having a few problems with it.\r\n\r\nThis is the user input section, doesn&#39;t seem to have any problems\r\n\r\n```java  \r\nimport java.util.Scanner;\r\npublic class GetData \r\n    {    \r\n    Scanner getdata = new Scanner(System.in);\r\n    public double intx;\r\n    public double inty;\r\n                \r\n    public void getInt() {\r\n       System.out.print(&quot;Enter a number&quot;);\r\n       double intx = getdata.nextDouble(); \r\n    }\r\n           \r\n   public void getDouble() {\r\n      System.out.print(&quot;Enter a double&quot;);\r\n      double inty = getdata.nextDouble(); \r\n   }\r\n}\r\n```\r\n\r\nThis is the operation section, the most problems are happening here, as said in the error there are missing error statements,\r\n\r\n```java\r\n    import java.util.Scanner;\r\n\r\n  public class MathOps {\r\n     \r\n         Scanner mathops = new Scanner(System.in);\r\n         public double x; \r\n         public double y;\r\n         public double answer;\r\n     \r\n        public double add(int x, int y) {\r\n           System.out.println(&quot;Adding &quot; + x + &quot;and &quot; + y);\r\n           return x + y;\r\n        }\r\n    \r\n        public double multiply(int x, int y) {\r\n           System.out.println(&quot;Multiplying &quot; + x + &quot;and &quot; + y);\r\n           return x * y;\r\n        }\r\n    \r\n        public double sub(int x, int y) {\r\n           System.out.println(&quot;Subtracting &quot; + x + &quot;and &quot; + y);\r\n           if(x &gt;= y) {\r\n              return x - y; }\r\n           if(y &gt;= x) {\r\n              return y - x; }\r\n        } \r\n    \r\n        public double divide() {\r\n           System.out.println(&quot;Dividing &quot; + x + &quot;and &quot; + y);\r\n           if(x &gt;= y) {\r\n              return x / y; }\r\n           if(y &gt;= x) {\r\n              return y / x; }\r\n        }\r\n      } \r\n```\r\n\r\n&gt; ```none\r\n&gt; ----jGRASP exec: javac -g MathOps.java\r\n&gt;     MathOps.java:27: error: missing return statement\r\n&gt;                 }\r\n&gt;                 ^\r\n&gt;     MathOps.java:35: error: missing return statement\r\n&gt;                 }\r\n&gt;                 ^\r\n&gt;     2 errors\r\n&gt; \r\n&gt;  ----jGRASP wedge2: exit code for process is 1.  ----jGRASP: operation\r\n&gt; complete. \r\n&gt; ```\r\n\r\nThis is were I&#39;m putting it all together, also has problems\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class L3Operations\r\n{\r\n   int geti;\r\n   int getd;\r\n   \r\n    public static void main(String[] args)\r\n       {\r\n          //instatnate\r\n         Scanner a = new Scanner(System.in);\r\n     \r\n         int x1 = a.getInt();\r\n       }\r\n}\r\n```","title":"Making a Calculator using multiple classes","body":"<p>I've been trying to make a calculator with multiple classes, however I am not that experienced with classes. I've been having a few problems with it.</p>\n<p>This is the user input section, doesn't seem to have any problems</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\npublic class GetData \n    {    \n    Scanner getdata = new Scanner(System.in);\n    public double intx;\n    public double inty;\n                \n    public void getInt() {\n       System.out.print(&quot;Enter a number&quot;);\n       double intx = getdata.nextDouble(); \n    }\n           \n   public void getDouble() {\n      System.out.print(&quot;Enter a double&quot;);\n      double inty = getdata.nextDouble(); \n   }\n}\n</code></pre>\n<p>This is the operation section, the most problems are happening here, as said in the error there are missing error statements,</p>\n<pre class=\"lang-java prettyprint-override\"><code>    import java.util.Scanner;\n\n  public class MathOps {\n     \n         Scanner mathops = new Scanner(System.in);\n         public double x; \n         public double y;\n         public double answer;\n     \n        public double add(int x, int y) {\n           System.out.println(&quot;Adding &quot; + x + &quot;and &quot; + y);\n           return x + y;\n        }\n    \n        public double multiply(int x, int y) {\n           System.out.println(&quot;Multiplying &quot; + x + &quot;and &quot; + y);\n           return x * y;\n        }\n    \n        public double sub(int x, int y) {\n           System.out.println(&quot;Subtracting &quot; + x + &quot;and &quot; + y);\n           if(x &gt;= y) {\n              return x - y; }\n           if(y &gt;= x) {\n              return y - x; }\n        } \n    \n        public double divide() {\n           System.out.println(&quot;Dividing &quot; + x + &quot;and &quot; + y);\n           if(x &gt;= y) {\n              return x / y; }\n           if(y &gt;= x) {\n              return y / x; }\n        }\n      } \n</code></pre>\n<blockquote>\n<pre class=\"lang-none prettyprint-override\"><code>----jGRASP exec: javac -g MathOps.java\n    MathOps.java:27: error: missing return statement\n                }\n                ^\n    MathOps.java:35: error: missing return statement\n                }\n                ^\n    2 errors\n\n ----jGRASP wedge2: exit code for process is 1.  ----jGRASP: operation\ncomplete. \n</code></pre>\n</blockquote>\n<p>This is were I'm putting it all together, also has problems</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class L3Operations\n{\n   int geti;\n   int getd;\n   \n    public static void main(String[] args)\n       {\n          //instatnate\n         Scanner a = new Scanner(System.in);\n     \n         int x1 = a.getInt();\n       }\n}\n</code></pre>\n"},{"tags":["java","cassandra","spring-data","datastax-java-driver","spring-data-cassandra"],"answers":[{"tags":[],"owner":{"account_id":2360824,"reputation":17691,"user_id":2067527,"display_name":"mp911de"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1542362631,"creation_date":1542362631,"answer_id":53335492,"question_id":53322089,"body_markdown":"Yes, there are multiple approaches:\r\n\r\n1. If you use Spring Data for Apache Cassandra version 2.0 or higher, then you can use your logging configuration to activate CQL logging. Set the log level of `org.springframework.data.cassandra.core.cql.CqlTemplate` to `DEBUG`.\r\n2. In any other case (or instead of 1.), use `QueryLogger` that is directly attached to your `Cluster` object. See https://stackoverflow.com/questions/40683371/what-is-a-good-way-to-discover-all-queries-made-by-a-cassandra-java-app/40684084#40684084 for further details.","title":"Log queries executed by Spring Data Cassandra","body":"<p>Yes, there are multiple approaches:</p>\n\n<ol>\n<li>If you use Spring Data for Apache Cassandra version 2.0 or higher, then you can use your logging configuration to activate CQL logging. Set the log level of <code>org.springframework.data.cassandra.core.cql.CqlTemplate</code> to <code>DEBUG</code>.</li>\n<li>In any other case (or instead of 1.), use <code>QueryLogger</code> that is directly attached to your <code>Cluster</code> object. See <a href=\"https://stackoverflow.com/questions/40683371/what-is-a-good-way-to-discover-all-queries-made-by-a-cassandra-java-app/40684084#40684084\">What is a good way to discover all queries made by a Cassandra java app?</a> for further details.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":16118113,"reputation":19,"user_id":11634681,"display_name":"saikiran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676015837,"creation_date":1676015534,"answer_id":75408257,"question_id":53322089,"body_markdown":"There are ways to achieve this \r\n\r\n***1) Setting the cassandra logging level to DEBUG***\r\n\r\n\r\n ***logging.level.org.springframework.data.cassandra.core.cql.CqlTemplate=DEBUG***\r\n\r\n  \r\n\r\nBy enabling the debug logs you can see the queries , but you may see the java objects instead of actual queries . For that you can use logback , logback has conversionRule  to convert the log line  and log them as we want . So we will use conversionRule to convert the java object to queries\r\n\r\nFirst thing is to setup few loggers and appenders by creating logback.xml\r\n    \r\n     \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;configuration&gt;\r\n        &lt;conversionRule conversionWord=&quot;cql&quot; converterClass=&quot;com.converter.CqlQueryExtractor&quot; /&gt;\r\n\r\n        &lt;appender name=&quot;CONSOLE_CQL&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot; &gt;\r\n            &lt;encoder&gt;\r\n                &lt;pattern&gt;\r\n                     %d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %cql%n\r\n                &lt;/pattern&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n\r\n        &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot; &gt;\r\n            &lt;encoder&gt;\r\n                &lt;pattern&gt;\r\n                    %X{Nonce} - %d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n\r\n                &lt;/pattern&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n\r\n\r\n        &lt;logger name=&quot;org.springframework.data.cassandra&quot; additivity=&quot;false&quot; level=&quot;DEBUG&quot; &gt;\r\n            &lt;appender-ref ref=&quot;CONSOLE_CQL&quot; /&gt;\r\n        &lt;/logger&gt;\r\n\r\n        &lt;root level=&quot;INFO&quot; &gt;\r\n            &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\r\n        &lt;/root&gt;\r\n    &lt;/configuration&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n  Now create converter the we referred in xml file \r\n    \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class CqlQueryExtractor extends ClassicConverter {\r\n\r\n\r\n        @Override\r\n        public String convert(ILoggingEvent iLoggingEvent) {\r\n            Object[] args = iLoggingEvent.getArgumentArray();\r\n            for(Object arg : args){\r\n                if(arg instanceof SimpleStatement){\r\n                    return ((SimpleStatement)arg).getQuery();\r\n                }\r\n            }\r\n            return iLoggingEvent.toString();\r\n\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n***2) Using QueryLogger*** \r\n\r\nThe **`QueryLogger`** provides clients with the ability to log queries executed by the driver, and especially, it allows client to track slow queries, i.e. queries that take longer to complete than a configured threshold in milliseconds.\r\n\r\n   \r\n\r\n     \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    Cluster cluster = ...\r\n    QueryLogger queryLogger = QueryLogger.builder(cluster)\r\n        .withConstantThreshold(...)\r\n        .withMaxQueryStringLength(...)\r\n    .build();\r\n    cluster.register(queryLogger);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nFollow the official Docs for more [docs][1]\r\n\r\n\r\n  [1]: https://docs.datastax.com/en/developer/java-driver/2.1/manual/logging/#logging-query-latencies\r\n","title":"Log queries executed by Spring Data Cassandra","body":"<p>There are ways to achieve this</p>\n<p><em><strong>1) Setting the cassandra logging level to DEBUG</strong></em></p>\n<p><em><strong>logging.level.org.springframework.data.cassandra.core.cql.CqlTemplate=DEBUG</strong></em></p>\n<p>By enabling the debug logs you can see the queries , but you may see the java objects instead of actual queries . For that you can use logback , logback has conversionRule  to convert the log line  and log them as we want . So we will use conversionRule to convert the java object to queries</p>\n<p>First thing is to setup few loggers and appenders by creating logback.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt;\n    &lt;conversionRule conversionWord=&quot;cql&quot; converterClass=&quot;com.converter.CqlQueryExtractor&quot; /&gt;\n\n    &lt;appender name=&quot;CONSOLE_CQL&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot; &gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;\n                 %d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %cql%n\n            &lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot; &gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;\n                %X{Nonce} - %d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n\n            &lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n\n    &lt;logger name=&quot;org.springframework.data.cassandra&quot; additivity=&quot;false&quot; level=&quot;DEBUG&quot; &gt;\n        &lt;appender-ref ref=&quot;CONSOLE_CQL&quot; /&gt;\n    &lt;/logger&gt;\n\n    &lt;root level=&quot;INFO&quot; &gt;\n        &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>Now create converter the we referred in xml file</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CqlQueryExtractor extends ClassicConverter {\n\n\n    @Override\n    public String convert(ILoggingEvent iLoggingEvent) {\n        Object[] args = iLoggingEvent.getArgumentArray();\n        for(Object arg : args){\n            if(arg instanceof SimpleStatement){\n                return ((SimpleStatement)arg).getQuery();\n            }\n        }\n        return iLoggingEvent.toString();\n\n    }\n}\n</code></pre>\n<p><em><strong>2) Using QueryLogger</strong></em></p>\n<p>The <strong><code>QueryLogger</code></strong> provides clients with the ability to log queries executed by the driver, and especially, it allows client to track slow queries, i.e. queries that take longer to complete than a configured threshold in milliseconds.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Cluster cluster = ...\nQueryLogger queryLogger = QueryLogger.builder(cluster)\n    .withConstantThreshold(...)\n    .withMaxQueryStringLength(...)\n.build();\ncluster.register(queryLogger);\n</code></pre>\n<p>Follow the official Docs for more <a href=\"https://docs.datastax.com/en/developer/java-driver/2.1/manual/logging/#logging-query-latencies\" rel=\"nofollow noreferrer\">docs</a></p>\n"}],"owner":{"account_id":9899447,"reputation":431,"user_id":7329898,"accept_rate":0,"display_name":"venkat g"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2467,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1676015837,"creation_date":1542293515,"question_id":53322089,"body_markdown":"We are using `AbstractCassandraConfiguration` to configure `cassandra entities`, is there a way to log queries executed by the application using `application.properties`?\r\n\r\nThanks.","title":"Log queries executed by Spring Data Cassandra","body":"<p>We are using <code>AbstractCassandraConfiguration</code> to configure <code>cassandra entities</code>, is there a way to log queries executed by the application using <code>application.properties</code>?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","elasticsearch","elastic-stack","spring-data-elasticsearch"],"comments":[{"owner":{"account_id":3633664,"reputation":2409,"user_id":3029337,"display_name":"glenacota"},"score":0,"creation_date":1676730968,"post_id":75408278,"comment_id":133198178,"body_markdown":"some questions: (1) What is the response time of the native query? (2) how many results do you need to visualize? (3) do you need to include all fields in the response? (4) what&#39;s the version of the library? (you&#39;re using an API which is now deprecated)","body":"some questions: (1) What is the response time of the native query? (2) how many results do you need to visualize? (3) do you need to include all fields in the response? (4) what&#39;s the version of the library? (you&#39;re using an API which is now deprecated)"}],"owner":{"account_id":26579158,"reputation":7,"user_id":20204076,"display_name":"Java2Avaj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676015691,"creation_date":1676015691,"question_id":75408278,"body_markdown":"We have an elasticsearch that contains millions of records and we are using it for a global searching. However, our query takes 2-4 seconds to return result. Can somebody help or advice how to further optimize the following query:\r\n\r\n        NativeSearchQueryBuilder query = new NativeSearchQueryBuilder()\r\n        .withQuery(QueryBuilders.boolQuery()\r\n            .should(QueryBuilders.termQuery(&quot;name&quot;, searchText))\r\n            .should(QueryBuilders.termQuery(&quot;key&quot;, searchText))\r\n            .should(QueryBuilders.termQuery(&quot;sort_alpha&quot;, searchText))\r\n            .should(QueryBuilders.termQuery(&quot;sort_number&quot;, searchText))\r\n        ).withPageable(PageRequest.of(0, 100))\r\n        .withHighlightFields(new HighlightBuilder.Field(&quot;name&quot;),\r\n            new HighlightBuilder.Field(&quot;key&quot;),\r\n            new HighlightBuilder.Field(&quot;sort_alpha&quot;),\r\n            new HighlightBuilder.Field(&quot;sort_number&quot;)\r\n        .build();","title":"Elasticsearch + Java - Can you further optimize this query?","body":"<p>We have an elasticsearch that contains millions of records and we are using it for a global searching. However, our query takes 2-4 seconds to return result. Can somebody help or advice how to further optimize the following query:</p>\n<pre><code>    NativeSearchQueryBuilder query = new NativeSearchQueryBuilder()\n    .withQuery(QueryBuilders.boolQuery()\n        .should(QueryBuilders.termQuery(&quot;name&quot;, searchText))\n        .should(QueryBuilders.termQuery(&quot;key&quot;, searchText))\n        .should(QueryBuilders.termQuery(&quot;sort_alpha&quot;, searchText))\n        .should(QueryBuilders.termQuery(&quot;sort_number&quot;, searchText))\n    ).withPageable(PageRequest.of(0, 100))\n    .withHighlightFields(new HighlightBuilder.Field(&quot;name&quot;),\n        new HighlightBuilder.Field(&quot;key&quot;),\n        new HighlightBuilder.Field(&quot;sort_alpha&quot;),\n        new HighlightBuilder.Field(&quot;sort_number&quot;)\n    .build();\n</code></pre>\n"},{"tags":["java","spring","oracle","jdbc","spring-jdbc"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1676014892,"post_id":75408161,"comment_id":133055480,"body_markdown":"SUM(X) and X are not the same, so my guess: your problem is here: .totalNumbersOfCard(rs.getString(&quot;SUMCARD&quot;)) (and the others like it). adjust your query to: SUM(SUMCARD) AS SUMCARD","body":"SUM(X) and X are not the same, so my guess: your problem is here: .totalNumbersOfCard(rs.getString(&quot;SUMCARD&quot;)) (and the others like it). adjust your query to: SUM(SUMCARD) AS SUMCARD"},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1676014979,"post_id":75408161,"comment_id":133055499,"body_markdown":"Please specify the DBMS you&#39;re using. Your query doesn&#39;t have columns `SUMCARD`, `SUMERRORTXN` and `SUMERRORTXNCARD`, or at least, not all DBMSes alias `SUM` columns with the name of the column that is summed, so you should alias them explicitly, e.g. `SUM(TEMP.SUMCARD) AS SUMCARD`.","body":"Please specify the DBMS you&#39;re using. Your query doesn&#39;t have columns <code>SUMCARD</code>, <code>SUMERRORTXN</code> and <code>SUMERRORTXNCARD</code>, or at least, not all DBMSes alias <code>SUM</code> columns with the name of the column that is summed, so you should alias them explicitly, e.g. <code>SUM(TEMP.SUMCARD) AS SUMCARD</code>."},{"owner":{"account_id":26492073,"reputation":1,"user_id":20130333,"display_name":"xprop"},"score":0,"creation_date":1676015198,"post_id":75408161,"comment_id":133055542,"body_markdown":"@MarkRotteveel sorry I forget to tell, It is PLSQL","body":"@MarkRotteveel sorry I forget to tell, It is PLSQL"},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1676015221,"post_id":75408161,"comment_id":133055546,"body_markdown":"You mean Oracle?","body":"You mean Oracle?"},{"owner":{"account_id":26492073,"reputation":1,"user_id":20130333,"display_name":"xprop"},"score":0,"creation_date":1676015362,"post_id":75408161,"comment_id":133055592,"body_markdown":"@MarkRotteveel yes it is oracle","body":"@MarkRotteveel yes it is oracle"}],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676015576,"creation_date":1676015576,"answer_id":75408259,"question_id":75408161,"body_markdown":"The problem is that your query doesn&#39;t actually have columns `SUMCARD`, `SUMERRORTXN` and `SUMERRORTXNCARD`. Although there are DBMSes that alias `SUM` columns with the name of the column that is summed, Oracle is not one of them. IIRC, Oracle aliases it as, for example, `&quot;SUM(SUMCARD)&quot;` or maybe `&quot;SUM(TEMP.SUMCARD)&quot;`. However, that is an implementation detail you should not rely on in my opinion. \r\n\r\nTo get the name you want to use, you need to alias your `SUM` columns explicitly, e.g. `SUM(TEMP.SUMCARD) AS SUMCARD`. ","title":"RowMapper invalid column name error in Java","body":"<p>The problem is that your query doesn't actually have columns <code>SUMCARD</code>, <code>SUMERRORTXN</code> and <code>SUMERRORTXNCARD</code>. Although there are DBMSes that alias <code>SUM</code> columns with the name of the column that is summed, Oracle is not one of them. IIRC, Oracle aliases it as, for example, <code>&quot;SUM(SUMCARD)&quot;</code> or maybe <code>&quot;SUM(TEMP.SUMCARD)&quot;</code>. However, that is an implementation detail you should not rely on in my opinion.</p>\n<p>To get the name you want to use, you need to alias your <code>SUM</code> columns explicitly, e.g. <code>SUM(TEMP.SUMCARD) AS SUMCARD</code>.</p>\n"}],"owner":{"account_id":26492073,"reputation":1,"user_id":20130333,"display_name":"xprop"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":232,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75408259,"answer_count":1,"score":0,"last_activity_date":1676015576,"creation_date":1676014756,"question_id":75408161,"body_markdown":"I have a query and it works well on the database. However, when I tried to take them as a Java object by using RowMapper, I get an invalid column name error. I checked everything, but I don&#39;t understand the reason why this error happening.\r\n\r\nMy query: \r\n```sql\r\nSELECT TEMP.SUMALLTXN, SUM(TEMP.SUMCARD), SUM(TEMP.SUMERRORTXN), SUM(TEMP.SUMERRORTXNCARD)\r\nFROM\r\n(SELECT\r\nSUM(COUNT(*)) OVER() AS SUMALLTXN,\r\n\r\nCOUNT(mdmtxn.BIN) OVER (PARTITION BY mdmtxn.BIN) AS SUMCARD,\r\n\r\nSUM(case when mdmtxn.MDSTATUS NOT IN (&#39;1&#39;,&#39;9&#39;, &#39;60&#39;) then 1 else 0 end) AS SUMERRORTXN,\r\n\r\nSUM(case when mdmtxn.MDSTATUS NOT IN (&#39;1&#39;,&#39;9&#39;, &#39;60&#39;) then 1 else 0 end) OVER (PARTITION BY mdmtxn.BIN) AS SUMERRORTXNCARD\r\n\r\nFROM MDM59.MDMTRANSACTION2 mdmtxn WHERE\r\n    mdmtxn.CREATEDDATE &lt; TO_CHAR(SYSDATE - INTERVAL &#39;:initialMinuteParameterValue&#39; MINUTE ,&#39;YYYYMMDD HH24:MI:SS&#39;) AND\r\n    mdmtxn.CREATEDDATE &gt; TO_CHAR(SYSDATE - INTERVAL &#39;:intervalMinuteParameterValue&#39; MINUTE ,&#39;YYYYMMDD HH24:MI:SS&#39;)\r\nGROUP BY mdmtxn.MDSTATUS, mdmtxn.BIN\r\n) TEMP\r\nGROUP BY TEMP.SUMALLTXN\r\n```\r\nMy RowMapper:\r\n```java\r\n@Component\r\npublic class TotalTransactionsReportRw implements RowMapper&lt;TotalTransactionsReportDto&gt; {\r\n\r\n    @Override\r\n    public TotalTransactionsReportDto mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n        return TotalTransactionsReportDto.builder()\r\n                .totalNumbersOfTransactions(rs.getString(&quot;SUMALLTXN&quot;))\r\n                .totalNumbersOfCard(rs.getString(&quot;SUMCARD&quot;))\r\n                .totalNumbersOfErrorTransactions(rs.getString(&quot;SUMERRORTXN&quot;))\r\n                .totalNumbersOfErrorCard(rs.getString(&quot;SUMERRORTXNCARD&quot;))\r\n                .build();\r\n    }\r\n\r\n    private static class TotalTransactionsDetailRwHolder {\r\n        private static final TotalTransactionsReportRw INSTANCE = new TotalTransactionsReportRw();\r\n    }\r\n\r\n    public static TotalTransactionsReportRw getInstance() {\r\n        return TotalTransactionsReportRw.TotalTransactionsDetailRwHolder.INSTANCE;\r\n    }\r\n}\r\n```\r\n\r\nMy Dto:\r\n\r\n  \r\n```java\r\n@Value\r\n@Builder\r\n@Data\r\npublic class TotalTransactionsReportDto {\r\n    private String totalNumbersOfTransactions;\r\n    private String totalNumbersOfCard;\r\n    private String totalNumbersOfErrorTransactions;\r\n    private String totalNumbersOfErrorCard;\r\n}\r\n```\r\n\r\nAnd in my tasklet class I created a list to get all data from rowmapper:\r\n\r\n```java\r\n@Slf4j\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class NotificationTasklet implements Tasklet {\r\n\r\n    private final PofPostOfficeServiceClient pofPostOfficeServiceClient;\r\n    private final SequenceSysGuid sequenceSysGuid;\r\n    private final BatchProps batchProps;\r\n    private JdbcTemplate jdbcTemplate;\r\n    private String notificationMailSql;\r\n    private String totalTransactionsSql;\r\n    private String endOfHtmlString = &quot;&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;&quot;;\r\n    private String endOfTableString = &quot;&lt;/table&gt;&quot;;\r\n    private String jobName = &quot;vpos-notification&quot;;\r\n    private String tdClose = &quot;&lt;/td&gt;&quot;;`\r\n\r\n    @Override\r\n    public RepeatStatus execute(StepContribution stepContribution, ChunkContext chunkContext) throws Exception {\r\n\r\n        List&lt;VposNotificationBatchDto&gt; notificationList = getNotificationList();\r\n\r\n        List&lt;TotalTransactionsReportDto&gt; totalTransactionsList = getTotalTransactionsList();\r\n\r\n        AlertMailDto alertMailDto = createAlertMailDto(notificationList,totalTransactionsList);\r\n\r\n        if (!(notificationList.isEmpty())) {\r\n            sendMail(alertMailDto);\r\n        }\r\n\r\n        return RepeatStatus.FINISHED;\r\n    }\r\n\r\n    List&lt;TotalTransactionsReportDto&gt; getTotalTransactionsList() {\r\n        return jdbcTemplate.query(\r\n                totalTransactionsSql,\r\n                new TotalTransactionsReportRw());\r\n    }\r\n\r\n    @Autowired\r\n    public void     setTotalTransactionsSql(@Value(&quot;classpath:sql/vposnotification/select_total_transactions_data.sql&quot;)\r\n                                               Resource res) {\r\n        int intervalnext = batchProps.getJobProps()\r\n                .get(jobName).getAlertProps().getIntervalMinuteParameterValue();\r\n        String intervalMinutes = String.valueOf(intervalnext);\r\n\r\n        int initialMinuteParameterValue = batchProps.getJobProps()\r\n                .get(jobName).getAlertProps().getInitialMinuteParameterValue();\r\n        String initialMinutes = String.valueOf(initialMinuteParameterValue);\r\n\r\n        this.totalTransactionsSql = SqlUtils.readSql(res);\r\n             this.totalTransactionsSql = this.totalTransactionsSql.replace(&quot;:initialMinuteParameterValue&quot;,          initialMinutes);\r\n              this.totalTransactionsSql = this.totalTransactionsSql.replace(&quot;:intervalMinuteParameterValue&quot;,     intervalMinutes);\r\n    }\r\n\r\n    @Autowired\r\n    public void setJdbcTemplate(JdbcTemplate jdbcTemplate) {\r\n         this.jdbcTemplate = jdbcTemplate;\r\n    }\r\n```\r\n\r\n\r\n\r\n","title":"RowMapper invalid column name error in Java","body":"<p>I have a query and it works well on the database. However, when I tried to take them as a Java object by using RowMapper, I get an invalid column name error. I checked everything, but I don't understand the reason why this error happening.</p>\n<p>My query:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT TEMP.SUMALLTXN, SUM(TEMP.SUMCARD), SUM(TEMP.SUMERRORTXN), SUM(TEMP.SUMERRORTXNCARD)\nFROM\n(SELECT\nSUM(COUNT(*)) OVER() AS SUMALLTXN,\n\nCOUNT(mdmtxn.BIN) OVER (PARTITION BY mdmtxn.BIN) AS SUMCARD,\n\nSUM(case when mdmtxn.MDSTATUS NOT IN ('1','9', '60') then 1 else 0 end) AS SUMERRORTXN,\n\nSUM(case when mdmtxn.MDSTATUS NOT IN ('1','9', '60') then 1 else 0 end) OVER (PARTITION BY mdmtxn.BIN) AS SUMERRORTXNCARD\n\nFROM MDM59.MDMTRANSACTION2 mdmtxn WHERE\n    mdmtxn.CREATEDDATE &lt; TO_CHAR(SYSDATE - INTERVAL ':initialMinuteParameterValue' MINUTE ,'YYYYMMDD HH24:MI:SS') AND\n    mdmtxn.CREATEDDATE &gt; TO_CHAR(SYSDATE - INTERVAL ':intervalMinuteParameterValue' MINUTE ,'YYYYMMDD HH24:MI:SS')\nGROUP BY mdmtxn.MDSTATUS, mdmtxn.BIN\n) TEMP\nGROUP BY TEMP.SUMALLTXN\n</code></pre>\n<p>My RowMapper:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class TotalTransactionsReportRw implements RowMapper&lt;TotalTransactionsReportDto&gt; {\n\n    @Override\n    public TotalTransactionsReportDto mapRow(ResultSet rs, int rowNum) throws SQLException {\n        return TotalTransactionsReportDto.builder()\n                .totalNumbersOfTransactions(rs.getString(&quot;SUMALLTXN&quot;))\n                .totalNumbersOfCard(rs.getString(&quot;SUMCARD&quot;))\n                .totalNumbersOfErrorTransactions(rs.getString(&quot;SUMERRORTXN&quot;))\n                .totalNumbersOfErrorCard(rs.getString(&quot;SUMERRORTXNCARD&quot;))\n                .build();\n    }\n\n    private static class TotalTransactionsDetailRwHolder {\n        private static final TotalTransactionsReportRw INSTANCE = new TotalTransactionsReportRw();\n    }\n\n    public static TotalTransactionsReportRw getInstance() {\n        return TotalTransactionsReportRw.TotalTransactionsDetailRwHolder.INSTANCE;\n    }\n}\n</code></pre>\n<p>My Dto:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Value\n@Builder\n@Data\npublic class TotalTransactionsReportDto {\n    private String totalNumbersOfTransactions;\n    private String totalNumbersOfCard;\n    private String totalNumbersOfErrorTransactions;\n    private String totalNumbersOfErrorCard;\n}\n</code></pre>\n<p>And in my tasklet class I created a list to get all data from rowmapper:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Component\n@RequiredArgsConstructor\npublic class NotificationTasklet implements Tasklet {\n\n    private final PofPostOfficeServiceClient pofPostOfficeServiceClient;\n    private final SequenceSysGuid sequenceSysGuid;\n    private final BatchProps batchProps;\n    private JdbcTemplate jdbcTemplate;\n    private String notificationMailSql;\n    private String totalTransactionsSql;\n    private String endOfHtmlString = &quot;&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;&quot;;\n    private String endOfTableString = &quot;&lt;/table&gt;&quot;;\n    private String jobName = &quot;vpos-notification&quot;;\n    private String tdClose = &quot;&lt;/td&gt;&quot;;`\n\n    @Override\n    public RepeatStatus execute(StepContribution stepContribution, ChunkContext chunkContext) throws Exception {\n\n        List&lt;VposNotificationBatchDto&gt; notificationList = getNotificationList();\n\n        List&lt;TotalTransactionsReportDto&gt; totalTransactionsList = getTotalTransactionsList();\n\n        AlertMailDto alertMailDto = createAlertMailDto(notificationList,totalTransactionsList);\n\n        if (!(notificationList.isEmpty())) {\n            sendMail(alertMailDto);\n        }\n\n        return RepeatStatus.FINISHED;\n    }\n\n    List&lt;TotalTransactionsReportDto&gt; getTotalTransactionsList() {\n        return jdbcTemplate.query(\n                totalTransactionsSql,\n                new TotalTransactionsReportRw());\n    }\n\n    @Autowired\n    public void     setTotalTransactionsSql(@Value(&quot;classpath:sql/vposnotification/select_total_transactions_data.sql&quot;)\n                                               Resource res) {\n        int intervalnext = batchProps.getJobProps()\n                .get(jobName).getAlertProps().getIntervalMinuteParameterValue();\n        String intervalMinutes = String.valueOf(intervalnext);\n\n        int initialMinuteParameterValue = batchProps.getJobProps()\n                .get(jobName).getAlertProps().getInitialMinuteParameterValue();\n        String initialMinutes = String.valueOf(initialMinuteParameterValue);\n\n        this.totalTransactionsSql = SqlUtils.readSql(res);\n             this.totalTransactionsSql = this.totalTransactionsSql.replace(&quot;:initialMinuteParameterValue&quot;,          initialMinutes);\n              this.totalTransactionsSql = this.totalTransactionsSql.replace(&quot;:intervalMinuteParameterValue&quot;,     intervalMinutes);\n    }\n\n    @Autowired\n    public void setJdbcTemplate(JdbcTemplate jdbcTemplate) {\n         this.jdbcTemplate = jdbcTemplate;\n    }\n</code></pre>\n"},{"tags":["java","object","casting","formatting","numbers"],"comments":[{"owner":{"account_id":5111197,"reputation":882,"user_id":4097712,"accept_rate":57,"display_name":"Tonny Tc"},"score":0,"creation_date":1675941509,"post_id":75396205,"comment_id":133037878,"body_markdown":"Would you identify the library used for transferring a Java object to JSON string?","body":"Would you identify the library used for transferring a Java object to JSON string?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1675941541,"post_id":75396205,"comment_id":133037891,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":25791289,"reputation":1,"user_id":19535325,"display_name":"Dmitry"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676015500,"creation_date":1675932778,"question_id":75396205,"body_markdown":"I have Map&lt;String, Object&gt; where Object is List&lt;Object&gt; and one them - Double. **Debugger show [0.0](https://i.stack.imgur.com/UNd7E.png) **,\r\n but **result in Swagger [0](https://i.stack.imgur.com/HCw5O.png)**. Can I save fractional part like a number (not String) with the same structure? \r\n\r\nI tried DecimalFormat and so on, but they gave string format response, I need numeric format.","title":"Java always trim a zero fractional part in an Object class?","body":"<p>I have Map&lt;String, Object&gt; where Object is List and one them - Double. **Debugger show <a href=\"https://i.stack.imgur.com/UNd7E.png\" rel=\"nofollow noreferrer\">0.0</a> **,\nbut <strong>result in Swagger <a href=\"https://i.stack.imgur.com/HCw5O.png\" rel=\"nofollow noreferrer\">0</a></strong>. Can I save fractional part like a number (not String) with the same structure?</p>\n<p>I tried DecimalFormat and so on, but they gave string format response, I need numeric format.</p>\n"},{"tags":["java","html","css","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":306604,"reputation":37084,"user_id":617450,"accept_rate":61,"display_name":"Ripon Al Wasim"},"score":0,"creation_date":1459752244,"post_id":23220575,"comment_id":60408773,"body_markdown":"Your code looks you are using java","body":"Your code looks you are using java"},{"owner":{"account_id":6629323,"reputation":2067,"user_id":5118465,"accept_rate":75,"display_name":"Henning Luther"},"score":0,"creation_date":1532359001,"post_id":23220575,"comment_id":89933063,"body_markdown":"do u now know how to get the actual rendered color with a font?","body":"do u now know how to get the actual rendered color with a font?"}],"answers":[{"tags":[],"owner":{"account_id":2922082,"reputation":3729,"user_id":2504101,"accept_rate":86,"display_name":"olyv"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1398192100,"creation_date":1398187105,"answer_id":23226168,"question_id":23220575,"body_markdown":"With XPath you can try to search by attribute. For example `//div[@style=&#39;background: red&#39;]`. If you want to get color then for CSS I would use method [getCSSValue()][1]\r\n\r\n\r\n  [1]: http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html#getCssValue%28java.lang.String%29","title":"How to get element color with Selenium","body":"<p>With XPath you can try to search by attribute. For example <code>//div[@style='background: red']</code>. If you want to get color then for CSS I would use method <a href=\"http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html#getCssValue%28java.lang.String%29\" rel=\"nofollow\">getCSSValue()</a></p>\n"},{"tags":[],"owner":{"account_id":306604,"reputation":37084,"user_id":617450,"accept_rate":61,"display_name":"Ripon Al Wasim"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1459754369,"creation_date":1459754369,"answer_id":36396654,"question_id":23220575,"body_markdown":"You can get the element color(Background color of element) by:\r\n\r\n    element.getCssValue(&quot;background-color&quot;);\r\n\r\nYou can get the element text/caption color by:\r\n\r\n    element.getCssValue(&quot;color&quot;);\r\n\r\nFor example if you want to get the background and text color of &quot;Sign in&quot; button for LinkedIn, the code is as follows:\r\n\r\n    driver.get(&quot;https://www.linkedin.com/&quot;);\r\n    \t    String buttonColor = driver.findElement(By.name(&quot;submit&quot;)).getCssValue(&quot;background-color&quot;);\r\n    \t    String buttonTextColor = driver.findElement(By.name(&quot;submit&quot;)).getCssValue(&quot;color&quot;);\r\n    \t    System.out.println(&quot;Button color: &quot; + buttonColor);\r\n    \t    System.out.println(&quot;Text color &quot; + buttonTextColor);","title":"How to get element color with Selenium","body":"<p>You can get the element color(Background color of element) by:</p>\n\n<pre><code>element.getCssValue(\"background-color\");\n</code></pre>\n\n<p>You can get the element text/caption color by:</p>\n\n<pre><code>element.getCssValue(\"color\");\n</code></pre>\n\n<p>For example if you want to get the background and text color of \"Sign in\" button for LinkedIn, the code is as follows:</p>\n\n<pre><code>driver.get(\"https://www.linkedin.com/\");\n        String buttonColor = driver.findElement(By.name(\"submit\")).getCssValue(\"background-color\");\n        String buttonTextColor = driver.findElement(By.name(\"submit\")).getCssValue(\"color\");\n        System.out.println(\"Button color: \" + buttonColor);\n        System.out.println(\"Text color \" + buttonTextColor);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10737218,"reputation":151,"user_id":7901526,"display_name":"Fai Hasan"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1513358364,"creation_date":1496837031,"answer_id":44412145,"question_id":23220575,"body_markdown":"try this, worked perfect for me:\r\n\r\n    import org.openqa.selenium.support.Color;\r\n    \r\n    String color = driver.findElement(By.xpath(&quot;xpath_value&quot;)).getCssValue(&quot;color&quot;);\r\n    System.out.println(color);\r\n    String hex = Color.fromString(color).asHex();\r\n    System.out.println(hex);\r\n\r\nSo you can get color using `getCssValue(&quot;color&quot;);` and  `getCssValue(&quot;background-color&quot;);`.\r\nHowever, that would be in RGB, so you need to convert to hex. With hex code you can then compare the value and print it out so that you can see what you are getting after each `getCssValue`.","title":"How to get element color with Selenium","body":"<p>try this, worked perfect for me:</p>\n\n<pre><code>import org.openqa.selenium.support.Color;\n\nString color = driver.findElement(By.xpath(\"xpath_value\")).getCssValue(\"color\");\nSystem.out.println(color);\nString hex = Color.fromString(color).asHex();\nSystem.out.println(hex);\n</code></pre>\n\n<p>So you can get color using <code>getCssValue(\"color\");</code> and  <code>getCssValue(\"background-color\");</code>.\nHowever, that would be in RGB, so you need to convert to hex. With hex code you can then compare the value and print it out so that you can see what you are getting after each <code>getCssValue</code>.</p>\n"},{"tags":[],"owner":{"account_id":2425876,"reputation":700,"user_id":2117814,"display_name":"Nagarjuna Yalamanchili"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580969482,"creation_date":1580969482,"answer_id":60088700,"question_id":23220575,"body_markdown":"**Try below code**\r\n\r\n    public String ColorVerify(String cssSelector, String cssValue)\r\n\t{\r\n\t\t/* This method used to verify color code*/\r\n\t\tWebElement target = driver.findElement(By.cssSelector(cssSelector));\r\n\t\tString colorCode= target.getCssValue(cssValue);\r\n\t\tString hexacolor = Color.fromString(colorCode).asHex();\r\n\t\treturn hexacolor;\t\r\n\t}","title":"How to get element color with Selenium","body":"<p><strong>Try below code</strong></p>\n\n<pre><code>public String ColorVerify(String cssSelector, String cssValue)\n{\n    /* This method used to verify color code*/\n    WebElement target = driver.findElement(By.cssSelector(cssSelector));\n    String colorCode= target.getCssValue(cssValue);\n    String hexacolor = Color.fromString(colorCode).asHex();\n    return hexacolor;   \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15095197,"reputation":1792,"user_id":10893827,"display_name":"Norayr Sargsyan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676015039,"creation_date":1676015039,"answer_id":75408195,"question_id":23220575,"body_markdown":"If you want to validate with selenium the color by Name, you can add this class in your utils files and use it in your tests for color validation.\r\n\r\n    import java.awt.*;\r\n    import java.lang.reflect.Field;\r\n    import java.util.ArrayList;\r\n    \r\n    public class ColorUtils {\r\n\r\n    private static ArrayList&lt;ColorName&gt; initColorList() {\r\n        ArrayList&lt;ColorName&gt; colorList = new ArrayList&lt;&gt;();\r\n        colorList.add(new ColorName(&quot;AliceBlue&quot;, 0xF0, 0xF8, 0xFF));\r\n        colorList.add(new ColorName(&quot;AntiqueWhite&quot;, 0xFA, 0xEB, 0xD7));\r\n        colorList.add(new ColorName(&quot;Aqua&quot;, 0x00, 0xFF, 0xFF));\r\n        colorList.add(new ColorName(&quot;Aquamarine&quot;, 0x7F, 0xFF, 0xD4));\r\n        colorList.add(new ColorName(&quot;Azure&quot;, 0xF0, 0xFF, 0xFF));\r\n        colorList.add(new ColorName(&quot;Beige&quot;, 0xF5, 0xF5, 0xDC));\r\n        colorList.add(new ColorName(&quot;Bisque&quot;, 0xFF, 0xE4, 0xC4));\r\n        colorList.add(new ColorName(&quot;Black&quot;, 0x00, 0x00, 0x00));\r\n        colorList.add(new ColorName(&quot;BlanchedAlmond&quot;, 0xFF, 0xEB, 0xCD));\r\n        colorList.add(new ColorName(&quot;Blue&quot;, 0x00, 0x00, 0xFF));\r\n        colorList.add(new ColorName(&quot;BlueViolet&quot;, 0x8A, 0x2B, 0xE2));\r\n        colorList.add(new ColorName(&quot;Brown&quot;, 0xA5, 0x2A, 0x2A));\r\n        colorList.add(new ColorName(&quot;BurlyWood&quot;, 0xDE, 0xB8, 0x87));\r\n        colorList.add(new ColorName(&quot;CadetBlue&quot;, 0x5F, 0x9E, 0xA0));\r\n        colorList.add(new ColorName(&quot;Chartreuse&quot;, 0x7F, 0xFF, 0x00));\r\n        colorList.add(new ColorName(&quot;Chocolate&quot;, 0xD2, 0x69, 0x1E));\r\n        colorList.add(new ColorName(&quot;Coral&quot;, 0xFF, 0x7F, 0x50));\r\n        colorList.add(new ColorName(&quot;CornflowerBlue&quot;, 0x64, 0x95, 0xED));\r\n        colorList.add(new ColorName(&quot;Cornsilk&quot;, 0xFF, 0xF8, 0xDC));\r\n        colorList.add(new ColorName(&quot;Crimson&quot;, 0xDC, 0x14, 0x3C));\r\n        colorList.add(new ColorName(&quot;Cyan&quot;, 0x00, 0xFF, 0xFF));\r\n        colorList.add(new ColorName(&quot;DarkBlue&quot;, 0x00, 0x00, 0x8B));\r\n        colorList.add(new ColorName(&quot;DarkCyan&quot;, 0x00, 0x8B, 0x8B));\r\n        colorList.add(new ColorName(&quot;DarkGoldenRod&quot;, 0xB8, 0x86, 0x0B));\r\n        colorList.add(new ColorName(&quot;DarkGray&quot;, 0xA9, 0xA9, 0xA9));\r\n        colorList.add(new ColorName(&quot;DarkGreen&quot;, 0x00, 0x64, 0x00));\r\n        colorList.add(new ColorName(&quot;DarkKhaki&quot;, 0xBD, 0xB7, 0x6B));\r\n        colorList.add(new ColorName(&quot;DarkMagenta&quot;, 0x8B, 0x00, 0x8B));\r\n        colorList.add(new ColorName(&quot;DarkOliveGreen&quot;, 0x55, 0x6B, 0x2F));\r\n        colorList.add(new ColorName(&quot;DarkOrange&quot;, 0xFF, 0x8C, 0x00));\r\n        colorList.add(new ColorName(&quot;DarkOrchid&quot;, 0x99, 0x32, 0xCC));\r\n        colorList.add(new ColorName(&quot;DarkRed&quot;, 0x8B, 0x00, 0x00));\r\n        colorList.add(new ColorName(&quot;DarkSalmon&quot;, 0xE9, 0x96, 0x7A));\r\n        colorList.add(new ColorName(&quot;DarkSeaGreen&quot;, 0x8F, 0xBC, 0x8F));\r\n        colorList.add(new ColorName(&quot;DarkSlateBlue&quot;, 0x48, 0x3D, 0x8B));\r\n        colorList.add(new ColorName(&quot;DarkSlateGray&quot;, 0x2F, 0x4F, 0x4F));\r\n        colorList.add(new ColorName(&quot;DarkTurquoise&quot;, 0x00, 0xCE, 0xD1));\r\n        colorList.add(new ColorName(&quot;DarkViolet&quot;, 0x94, 0x00, 0xD3));\r\n        colorList.add(new ColorName(&quot;DeepPink&quot;, 0xFF, 0x14, 0x93));\r\n        colorList.add(new ColorName(&quot;DeepSkyBlue&quot;, 0x00, 0xBF, 0xFF));\r\n        colorList.add(new ColorName(&quot;DimGray&quot;, 0x69, 0x69, 0x69));\r\n        colorList.add(new ColorName(&quot;DodgerBlue&quot;, 0x1E, 0x90, 0xFF));\r\n        colorList.add(new ColorName(&quot;FireBrick&quot;, 0xB2, 0x22, 0x22));\r\n        colorList.add(new ColorName(&quot;FloralWhite&quot;, 0xFF, 0xFA, 0xF0));\r\n        colorList.add(new ColorName(&quot;ForestGreen&quot;, 0x22, 0x8B, 0x22));\r\n        colorList.add(new ColorName(&quot;Fuchsia&quot;, 0xFF, 0x00, 0xFF));\r\n        colorList.add(new ColorName(&quot;Gainsboro&quot;, 0xDC, 0xDC, 0xDC));\r\n        colorList.add(new ColorName(&quot;GhostWhite&quot;, 0xF8, 0xF8, 0xFF));\r\n        colorList.add(new ColorName(&quot;Gold&quot;, 0xFF, 0xD7, 0x00));\r\n        colorList.add(new ColorName(&quot;GoldenRod&quot;, 0xDA, 0xA5, 0x20));\r\n        colorList.add(new ColorName(&quot;Gray&quot;, 0x80, 0x80, 0x80));\r\n        colorList.add(new ColorName(&quot;Green&quot;, 0x00, 0x80, 0x00));\r\n        colorList.add(new ColorName(&quot;GreenYellow&quot;, 0xAD, 0xFF, 0x2F));\r\n        colorList.add(new ColorName(&quot;HoneyDew&quot;, 0xF0, 0xFF, 0xF0));\r\n        colorList.add(new ColorName(&quot;HotPink&quot;, 0xFF, 0x69, 0xB4));\r\n        colorList.add(new ColorName(&quot;IndianRed&quot;, 0xCD, 0x5C, 0x5C));\r\n        colorList.add(new ColorName(&quot;Indigo&quot;, 0x4B, 0x00, 0x82));\r\n        colorList.add(new ColorName(&quot;Ivory&quot;, 0xFF, 0xFF, 0xF0));\r\n        colorList.add(new ColorName(&quot;Khaki&quot;, 0xF0, 0xE6, 0x8C));\r\n        colorList.add(new ColorName(&quot;Lavender&quot;, 0xE6, 0xE6, 0xFA));\r\n        colorList.add(new ColorName(&quot;LavenderBlush&quot;, 0xFF, 0xF0, 0xF5));\r\n        colorList.add(new ColorName(&quot;LawnGreen&quot;, 0x7C, 0xFC, 0x00));\r\n        colorList.add(new ColorName(&quot;LemonChiffon&quot;, 0xFF, 0xFA, 0xCD));\r\n        colorList.add(new ColorName(&quot;LightBlue&quot;, 0xAD, 0xD8, 0xE6));\r\n        colorList.add(new ColorName(&quot;LightCoral&quot;, 0xF0, 0x80, 0x80));\r\n        colorList.add(new ColorName(&quot;LightCyan&quot;, 0xE0, 0xFF, 0xFF));\r\n        colorList.add(new ColorName(&quot;LightGoldenRodYellow&quot;, 0xFA, 0xFA, 0xD2));\r\n        colorList.add(new ColorName(&quot;LightGray&quot;, 0xD3, 0xD3, 0xD3));\r\n        colorList.add(new ColorName(&quot;LightGreen&quot;, 0x90, 0xEE, 0x90));\r\n        colorList.add(new ColorName(&quot;LightPink&quot;, 0xFF, 0xB6, 0xC1));\r\n        colorList.add(new ColorName(&quot;LightSalmon&quot;, 0xFF, 0xA0, 0x7A));\r\n        colorList.add(new ColorName(&quot;LightSeaGreen&quot;, 0x20, 0xB2, 0xAA));\r\n        colorList.add(new ColorName(&quot;LightSkyBlue&quot;, 0x87, 0xCE, 0xFA));\r\n        colorList.add(new ColorName(&quot;LightSlateGray&quot;, 0x77, 0x88, 0x99));\r\n        colorList.add(new ColorName(&quot;LightSteelBlue&quot;, 0xB0, 0xC4, 0xDE));\r\n        colorList.add(new ColorName(&quot;LightYellow&quot;, 0xFF, 0xFF, 0xE0));\r\n        colorList.add(new ColorName(&quot;Lime&quot;, 0x00, 0xFF, 0x00));\r\n        colorList.add(new ColorName(&quot;LimeGreen&quot;, 0x32, 0xCD, 0x32));\r\n        colorList.add(new ColorName(&quot;Linen&quot;, 0xFA, 0xF0, 0xE6));\r\n        colorList.add(new ColorName(&quot;Magenta&quot;, 0xFF, 0x00, 0xFF));\r\n        colorList.add(new ColorName(&quot;Maroon&quot;, 0x80, 0x00, 0x00));\r\n        colorList.add(new ColorName(&quot;MediumAquaMarine&quot;, 0x66, 0xCD, 0xAA));\r\n        colorList.add(new ColorName(&quot;MediumBlue&quot;, 0x00, 0x00, 0xCD));\r\n        colorList.add(new ColorName(&quot;MediumOrchid&quot;, 0xBA, 0x55, 0xD3));\r\n        colorList.add(new ColorName(&quot;MediumPurple&quot;, 0x93, 0x70, 0xDB));\r\n        colorList.add(new ColorName(&quot;MediumSeaGreen&quot;, 0x3C, 0xB3, 0x71));\r\n        colorList.add(new ColorName(&quot;MediumSlateBlue&quot;, 0x7B, 0x68, 0xEE));\r\n        colorList.add(new ColorName(&quot;MediumSpringGreen&quot;, 0x00, 0xFA, 0x9A));\r\n        colorList.add(new ColorName(&quot;MediumTurquoise&quot;, 0x48, 0xD1, 0xCC));\r\n        colorList.add(new ColorName(&quot;MediumVioletRed&quot;, 0xC7, 0x15, 0x85));\r\n        colorList.add(new ColorName(&quot;MidnightBlue&quot;, 0x19, 0x19, 0x70));\r\n        colorList.add(new ColorName(&quot;MintCream&quot;, 0xF5, 0xFF, 0xFA));\r\n        colorList.add(new ColorName(&quot;MistyRose&quot;, 0xFF, 0xE4, 0xE1));\r\n        colorList.add(new ColorName(&quot;Moccasin&quot;, 0xFF, 0xE4, 0xB5));\r\n        colorList.add(new ColorName(&quot;NavajoWhite&quot;, 0xFF, 0xDE, 0xAD));\r\n        colorList.add(new ColorName(&quot;Navy&quot;, 0x00, 0x00, 0x80));\r\n        colorList.add(new ColorName(&quot;OldLace&quot;, 0xFD, 0xF5, 0xE6));\r\n        colorList.add(new ColorName(&quot;Olive&quot;, 0x80, 0x80, 0x00));\r\n        colorList.add(new ColorName(&quot;OliveDrab&quot;, 0x6B, 0x8E, 0x23));\r\n        colorList.add(new ColorName(&quot;Orange&quot;, 0xFF, 0xA5, 0x00));\r\n        colorList.add(new ColorName(&quot;OrangeRed&quot;, 0xFF, 0x45, 0x00));\r\n        colorList.add(new ColorName(&quot;Orchid&quot;, 0xDA, 0x70, 0xD6));\r\n        colorList.add(new ColorName(&quot;PaleGoldenRod&quot;, 0xEE, 0xE8, 0xAA));\r\n        colorList.add(new ColorName(&quot;PaleGreen&quot;, 0x98, 0xFB, 0x98));\r\n        colorList.add(new ColorName(&quot;PaleTurquoise&quot;, 0xAF, 0xEE, 0xEE));\r\n        colorList.add(new ColorName(&quot;PaleVioletRed&quot;, 0xDB, 0x70, 0x93));\r\n        colorList.add(new ColorName(&quot;PapayaWhip&quot;, 0xFF, 0xEF, 0xD5));\r\n        colorList.add(new ColorName(&quot;PeachPuff&quot;, 0xFF, 0xDA, 0xB9));\r\n        colorList.add(new ColorName(&quot;Peru&quot;, 0xCD, 0x85, 0x3F));\r\n        colorList.add(new ColorName(&quot;Pink&quot;, 0xFF, 0xC0, 0xCB));\r\n        colorList.add(new ColorName(&quot;Plum&quot;, 0xDD, 0xA0, 0xDD));\r\n        colorList.add(new ColorName(&quot;PowderBlue&quot;, 0xB0, 0xE0, 0xE6));\r\n        colorList.add(new ColorName(&quot;Purple&quot;, 0x80, 0x00, 0x80));\r\n        colorList.add(new ColorName(&quot;Red&quot;, 0xFF, 0x00, 0x00));\r\n        colorList.add(new ColorName(&quot;RosyBrown&quot;, 0xBC, 0x8F, 0x8F));\r\n        colorList.add(new ColorName(&quot;RoyalBlue&quot;, 0x41, 0x69, 0xE1));\r\n        colorList.add(new ColorName(&quot;SaddleBrown&quot;, 0x8B, 0x45, 0x13));\r\n        colorList.add(new ColorName(&quot;Salmon&quot;, 0xFA, 0x80, 0x72));\r\n        colorList.add(new ColorName(&quot;SandyBrown&quot;, 0xF4, 0xA4, 0x60));\r\n        colorList.add(new ColorName(&quot;SeaGreen&quot;, 0x2E, 0x8B, 0x57));\r\n        colorList.add(new ColorName(&quot;SeaShell&quot;, 0xFF, 0xF5, 0xEE));\r\n        colorList.add(new ColorName(&quot;Sienna&quot;, 0xA0, 0x52, 0x2D));\r\n        colorList.add(new ColorName(&quot;Silver&quot;, 0xC0, 0xC0, 0xC0));\r\n        colorList.add(new ColorName(&quot;SkyBlue&quot;, 0x87, 0xCE, 0xEB));\r\n        colorList.add(new ColorName(&quot;SlateBlue&quot;, 0x6A, 0x5A, 0xCD));\r\n        colorList.add(new ColorName(&quot;SlateGray&quot;, 0x70, 0x80, 0x90));\r\n        colorList.add(new ColorName(&quot;Snow&quot;, 0xFF, 0xFA, 0xFA));\r\n        colorList.add(new ColorName(&quot;SpringGreen&quot;, 0x00, 0xFF, 0x7F));\r\n        colorList.add(new ColorName(&quot;SteelBlue&quot;, 0x46, 0x82, 0xB4));\r\n        colorList.add(new ColorName(&quot;Tan&quot;, 0xD2, 0xB4, 0x8C));\r\n        colorList.add(new ColorName(&quot;Teal&quot;, 0x00, 0x80, 0x80));\r\n        colorList.add(new ColorName(&quot;Thistle&quot;, 0xD8, 0xBF, 0xD8));\r\n        colorList.add(new ColorName(&quot;Tomato&quot;, 0xFF, 0x63, 0x47));\r\n        colorList.add(new ColorName(&quot;Turquoise&quot;, 0x40, 0xE0, 0xD0));\r\n        colorList.add(new ColorName(&quot;Violet&quot;, 0xEE, 0x82, 0xEE));\r\n        colorList.add(new ColorName(&quot;Wheat&quot;, 0xF5, 0xDE, 0xB3));\r\n        colorList.add(new ColorName(&quot;White&quot;, 0xFF, 0xFF, 0xFF));\r\n        colorList.add(new ColorName(&quot;WhiteSmoke&quot;, 0xF5, 0xF5, 0xF5));\r\n        colorList.add(new ColorName(&quot;Yellow&quot;, 0xFF, 0xFF, 0x00));\r\n        colorList.add(new ColorName(&quot;YellowGreen&quot;, 0x9A, 0xCD, 0x32));\r\n        return colorList;\r\n    }\r\n\r\n    public static String getColorNameFromRgb(int r, int g, int b) {\r\n        ArrayList&lt;ColorName&gt; colorList = initColorList();\r\n        ColorName closestMatch = null;\r\n        int minMSE = Integer.MAX_VALUE;\r\n        int mse;\r\n        for (ColorName c : colorList) {\r\n            mse = c.computeMSE(r, g, b);\r\n            if (mse &lt; minMSE) {\r\n                minMSE = mse;\r\n                closestMatch = c;\r\n            }\r\n        }\r\n\r\n        if (closestMatch != null) {\r\n            return closestMatch.getName();\r\n        } else {\r\n            return &quot;No matched color name.&quot;;\r\n        }\r\n    }\r\n\r\n    public static String getColorNameFromColor(Color color) {\r\n        return getColorNameFromRgb(color.getRed(), color.getGreen(),\r\n                color.getBlue());\r\n    }\r\n\r\n    public static Color stringToColor(final String value) {\r\n        if (value == null) {\r\n            return Color.black;\r\n        }\r\n        try {\r\n            return Color.decode(value);\r\n        } catch (NumberFormatException nfe) {\r\n            try {\r\n                final Field f = Color.class.getField(value);\r\n                return (Color) f.get(null);\r\n            } catch (Exception ce) {\r\n                return Color.black;\r\n            }\r\n        }\r\n    }\r\n\r\n    public static class ColorName {\r\n        public int r, g, b;\r\n        public String name;\r\n\r\n    public ColorName(String name, int r, int g, int b) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n        this.name = name;\r\n    }\r\n\r\n    public int computeMSE(int pixR, int pixG, int pixB) {\r\n        return ((pixR - r) * (pixR - r) + (pixG - g) * (pixG - g) + (pixB - b)\r\n                * (pixB - b)) / 3;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n}\r\n}`\r\n\r\nAn example of the usage of this class.\r\n\r\n    public String getElementColor(WebElement element) {\r\n    \r\n        String color = element.getCssValue(&quot;color&quot;);\r\n        String hex = Color.fromString(color).asHex();\r\n        java.awt.Color c = stringToColor(hex);\r\n        return getColorNameFromColor(c);\r\n    }\r\n\r\n","title":"How to get element color with Selenium","body":"<p>If you want to validate with selenium the color by Name, you can add this class in your utils files and use it in your tests for color validation.</p>\n<pre><code>import java.awt.*;\nimport java.lang.reflect.Field;\nimport java.util.ArrayList;\n\npublic class ColorUtils {\n\nprivate static ArrayList&lt;ColorName&gt; initColorList() {\n    ArrayList&lt;ColorName&gt; colorList = new ArrayList&lt;&gt;();\n    colorList.add(new ColorName(&quot;AliceBlue&quot;, 0xF0, 0xF8, 0xFF));\n    colorList.add(new ColorName(&quot;AntiqueWhite&quot;, 0xFA, 0xEB, 0xD7));\n    colorList.add(new ColorName(&quot;Aqua&quot;, 0x00, 0xFF, 0xFF));\n    colorList.add(new ColorName(&quot;Aquamarine&quot;, 0x7F, 0xFF, 0xD4));\n    colorList.add(new ColorName(&quot;Azure&quot;, 0xF0, 0xFF, 0xFF));\n    colorList.add(new ColorName(&quot;Beige&quot;, 0xF5, 0xF5, 0xDC));\n    colorList.add(new ColorName(&quot;Bisque&quot;, 0xFF, 0xE4, 0xC4));\n    colorList.add(new ColorName(&quot;Black&quot;, 0x00, 0x00, 0x00));\n    colorList.add(new ColorName(&quot;BlanchedAlmond&quot;, 0xFF, 0xEB, 0xCD));\n    colorList.add(new ColorName(&quot;Blue&quot;, 0x00, 0x00, 0xFF));\n    colorList.add(new ColorName(&quot;BlueViolet&quot;, 0x8A, 0x2B, 0xE2));\n    colorList.add(new ColorName(&quot;Brown&quot;, 0xA5, 0x2A, 0x2A));\n    colorList.add(new ColorName(&quot;BurlyWood&quot;, 0xDE, 0xB8, 0x87));\n    colorList.add(new ColorName(&quot;CadetBlue&quot;, 0x5F, 0x9E, 0xA0));\n    colorList.add(new ColorName(&quot;Chartreuse&quot;, 0x7F, 0xFF, 0x00));\n    colorList.add(new ColorName(&quot;Chocolate&quot;, 0xD2, 0x69, 0x1E));\n    colorList.add(new ColorName(&quot;Coral&quot;, 0xFF, 0x7F, 0x50));\n    colorList.add(new ColorName(&quot;CornflowerBlue&quot;, 0x64, 0x95, 0xED));\n    colorList.add(new ColorName(&quot;Cornsilk&quot;, 0xFF, 0xF8, 0xDC));\n    colorList.add(new ColorName(&quot;Crimson&quot;, 0xDC, 0x14, 0x3C));\n    colorList.add(new ColorName(&quot;Cyan&quot;, 0x00, 0xFF, 0xFF));\n    colorList.add(new ColorName(&quot;DarkBlue&quot;, 0x00, 0x00, 0x8B));\n    colorList.add(new ColorName(&quot;DarkCyan&quot;, 0x00, 0x8B, 0x8B));\n    colorList.add(new ColorName(&quot;DarkGoldenRod&quot;, 0xB8, 0x86, 0x0B));\n    colorList.add(new ColorName(&quot;DarkGray&quot;, 0xA9, 0xA9, 0xA9));\n    colorList.add(new ColorName(&quot;DarkGreen&quot;, 0x00, 0x64, 0x00));\n    colorList.add(new ColorName(&quot;DarkKhaki&quot;, 0xBD, 0xB7, 0x6B));\n    colorList.add(new ColorName(&quot;DarkMagenta&quot;, 0x8B, 0x00, 0x8B));\n    colorList.add(new ColorName(&quot;DarkOliveGreen&quot;, 0x55, 0x6B, 0x2F));\n    colorList.add(new ColorName(&quot;DarkOrange&quot;, 0xFF, 0x8C, 0x00));\n    colorList.add(new ColorName(&quot;DarkOrchid&quot;, 0x99, 0x32, 0xCC));\n    colorList.add(new ColorName(&quot;DarkRed&quot;, 0x8B, 0x00, 0x00));\n    colorList.add(new ColorName(&quot;DarkSalmon&quot;, 0xE9, 0x96, 0x7A));\n    colorList.add(new ColorName(&quot;DarkSeaGreen&quot;, 0x8F, 0xBC, 0x8F));\n    colorList.add(new ColorName(&quot;DarkSlateBlue&quot;, 0x48, 0x3D, 0x8B));\n    colorList.add(new ColorName(&quot;DarkSlateGray&quot;, 0x2F, 0x4F, 0x4F));\n    colorList.add(new ColorName(&quot;DarkTurquoise&quot;, 0x00, 0xCE, 0xD1));\n    colorList.add(new ColorName(&quot;DarkViolet&quot;, 0x94, 0x00, 0xD3));\n    colorList.add(new ColorName(&quot;DeepPink&quot;, 0xFF, 0x14, 0x93));\n    colorList.add(new ColorName(&quot;DeepSkyBlue&quot;, 0x00, 0xBF, 0xFF));\n    colorList.add(new ColorName(&quot;DimGray&quot;, 0x69, 0x69, 0x69));\n    colorList.add(new ColorName(&quot;DodgerBlue&quot;, 0x1E, 0x90, 0xFF));\n    colorList.add(new ColorName(&quot;FireBrick&quot;, 0xB2, 0x22, 0x22));\n    colorList.add(new ColorName(&quot;FloralWhite&quot;, 0xFF, 0xFA, 0xF0));\n    colorList.add(new ColorName(&quot;ForestGreen&quot;, 0x22, 0x8B, 0x22));\n    colorList.add(new ColorName(&quot;Fuchsia&quot;, 0xFF, 0x00, 0xFF));\n    colorList.add(new ColorName(&quot;Gainsboro&quot;, 0xDC, 0xDC, 0xDC));\n    colorList.add(new ColorName(&quot;GhostWhite&quot;, 0xF8, 0xF8, 0xFF));\n    colorList.add(new ColorName(&quot;Gold&quot;, 0xFF, 0xD7, 0x00));\n    colorList.add(new ColorName(&quot;GoldenRod&quot;, 0xDA, 0xA5, 0x20));\n    colorList.add(new ColorName(&quot;Gray&quot;, 0x80, 0x80, 0x80));\n    colorList.add(new ColorName(&quot;Green&quot;, 0x00, 0x80, 0x00));\n    colorList.add(new ColorName(&quot;GreenYellow&quot;, 0xAD, 0xFF, 0x2F));\n    colorList.add(new ColorName(&quot;HoneyDew&quot;, 0xF0, 0xFF, 0xF0));\n    colorList.add(new ColorName(&quot;HotPink&quot;, 0xFF, 0x69, 0xB4));\n    colorList.add(new ColorName(&quot;IndianRed&quot;, 0xCD, 0x5C, 0x5C));\n    colorList.add(new ColorName(&quot;Indigo&quot;, 0x4B, 0x00, 0x82));\n    colorList.add(new ColorName(&quot;Ivory&quot;, 0xFF, 0xFF, 0xF0));\n    colorList.add(new ColorName(&quot;Khaki&quot;, 0xF0, 0xE6, 0x8C));\n    colorList.add(new ColorName(&quot;Lavender&quot;, 0xE6, 0xE6, 0xFA));\n    colorList.add(new ColorName(&quot;LavenderBlush&quot;, 0xFF, 0xF0, 0xF5));\n    colorList.add(new ColorName(&quot;LawnGreen&quot;, 0x7C, 0xFC, 0x00));\n    colorList.add(new ColorName(&quot;LemonChiffon&quot;, 0xFF, 0xFA, 0xCD));\n    colorList.add(new ColorName(&quot;LightBlue&quot;, 0xAD, 0xD8, 0xE6));\n    colorList.add(new ColorName(&quot;LightCoral&quot;, 0xF0, 0x80, 0x80));\n    colorList.add(new ColorName(&quot;LightCyan&quot;, 0xE0, 0xFF, 0xFF));\n    colorList.add(new ColorName(&quot;LightGoldenRodYellow&quot;, 0xFA, 0xFA, 0xD2));\n    colorList.add(new ColorName(&quot;LightGray&quot;, 0xD3, 0xD3, 0xD3));\n    colorList.add(new ColorName(&quot;LightGreen&quot;, 0x90, 0xEE, 0x90));\n    colorList.add(new ColorName(&quot;LightPink&quot;, 0xFF, 0xB6, 0xC1));\n    colorList.add(new ColorName(&quot;LightSalmon&quot;, 0xFF, 0xA0, 0x7A));\n    colorList.add(new ColorName(&quot;LightSeaGreen&quot;, 0x20, 0xB2, 0xAA));\n    colorList.add(new ColorName(&quot;LightSkyBlue&quot;, 0x87, 0xCE, 0xFA));\n    colorList.add(new ColorName(&quot;LightSlateGray&quot;, 0x77, 0x88, 0x99));\n    colorList.add(new ColorName(&quot;LightSteelBlue&quot;, 0xB0, 0xC4, 0xDE));\n    colorList.add(new ColorName(&quot;LightYellow&quot;, 0xFF, 0xFF, 0xE0));\n    colorList.add(new ColorName(&quot;Lime&quot;, 0x00, 0xFF, 0x00));\n    colorList.add(new ColorName(&quot;LimeGreen&quot;, 0x32, 0xCD, 0x32));\n    colorList.add(new ColorName(&quot;Linen&quot;, 0xFA, 0xF0, 0xE6));\n    colorList.add(new ColorName(&quot;Magenta&quot;, 0xFF, 0x00, 0xFF));\n    colorList.add(new ColorName(&quot;Maroon&quot;, 0x80, 0x00, 0x00));\n    colorList.add(new ColorName(&quot;MediumAquaMarine&quot;, 0x66, 0xCD, 0xAA));\n    colorList.add(new ColorName(&quot;MediumBlue&quot;, 0x00, 0x00, 0xCD));\n    colorList.add(new ColorName(&quot;MediumOrchid&quot;, 0xBA, 0x55, 0xD3));\n    colorList.add(new ColorName(&quot;MediumPurple&quot;, 0x93, 0x70, 0xDB));\n    colorList.add(new ColorName(&quot;MediumSeaGreen&quot;, 0x3C, 0xB3, 0x71));\n    colorList.add(new ColorName(&quot;MediumSlateBlue&quot;, 0x7B, 0x68, 0xEE));\n    colorList.add(new ColorName(&quot;MediumSpringGreen&quot;, 0x00, 0xFA, 0x9A));\n    colorList.add(new ColorName(&quot;MediumTurquoise&quot;, 0x48, 0xD1, 0xCC));\n    colorList.add(new ColorName(&quot;MediumVioletRed&quot;, 0xC7, 0x15, 0x85));\n    colorList.add(new ColorName(&quot;MidnightBlue&quot;, 0x19, 0x19, 0x70));\n    colorList.add(new ColorName(&quot;MintCream&quot;, 0xF5, 0xFF, 0xFA));\n    colorList.add(new ColorName(&quot;MistyRose&quot;, 0xFF, 0xE4, 0xE1));\n    colorList.add(new ColorName(&quot;Moccasin&quot;, 0xFF, 0xE4, 0xB5));\n    colorList.add(new ColorName(&quot;NavajoWhite&quot;, 0xFF, 0xDE, 0xAD));\n    colorList.add(new ColorName(&quot;Navy&quot;, 0x00, 0x00, 0x80));\n    colorList.add(new ColorName(&quot;OldLace&quot;, 0xFD, 0xF5, 0xE6));\n    colorList.add(new ColorName(&quot;Olive&quot;, 0x80, 0x80, 0x00));\n    colorList.add(new ColorName(&quot;OliveDrab&quot;, 0x6B, 0x8E, 0x23));\n    colorList.add(new ColorName(&quot;Orange&quot;, 0xFF, 0xA5, 0x00));\n    colorList.add(new ColorName(&quot;OrangeRed&quot;, 0xFF, 0x45, 0x00));\n    colorList.add(new ColorName(&quot;Orchid&quot;, 0xDA, 0x70, 0xD6));\n    colorList.add(new ColorName(&quot;PaleGoldenRod&quot;, 0xEE, 0xE8, 0xAA));\n    colorList.add(new ColorName(&quot;PaleGreen&quot;, 0x98, 0xFB, 0x98));\n    colorList.add(new ColorName(&quot;PaleTurquoise&quot;, 0xAF, 0xEE, 0xEE));\n    colorList.add(new ColorName(&quot;PaleVioletRed&quot;, 0xDB, 0x70, 0x93));\n    colorList.add(new ColorName(&quot;PapayaWhip&quot;, 0xFF, 0xEF, 0xD5));\n    colorList.add(new ColorName(&quot;PeachPuff&quot;, 0xFF, 0xDA, 0xB9));\n    colorList.add(new ColorName(&quot;Peru&quot;, 0xCD, 0x85, 0x3F));\n    colorList.add(new ColorName(&quot;Pink&quot;, 0xFF, 0xC0, 0xCB));\n    colorList.add(new ColorName(&quot;Plum&quot;, 0xDD, 0xA0, 0xDD));\n    colorList.add(new ColorName(&quot;PowderBlue&quot;, 0xB0, 0xE0, 0xE6));\n    colorList.add(new ColorName(&quot;Purple&quot;, 0x80, 0x00, 0x80));\n    colorList.add(new ColorName(&quot;Red&quot;, 0xFF, 0x00, 0x00));\n    colorList.add(new ColorName(&quot;RosyBrown&quot;, 0xBC, 0x8F, 0x8F));\n    colorList.add(new ColorName(&quot;RoyalBlue&quot;, 0x41, 0x69, 0xE1));\n    colorList.add(new ColorName(&quot;SaddleBrown&quot;, 0x8B, 0x45, 0x13));\n    colorList.add(new ColorName(&quot;Salmon&quot;, 0xFA, 0x80, 0x72));\n    colorList.add(new ColorName(&quot;SandyBrown&quot;, 0xF4, 0xA4, 0x60));\n    colorList.add(new ColorName(&quot;SeaGreen&quot;, 0x2E, 0x8B, 0x57));\n    colorList.add(new ColorName(&quot;SeaShell&quot;, 0xFF, 0xF5, 0xEE));\n    colorList.add(new ColorName(&quot;Sienna&quot;, 0xA0, 0x52, 0x2D));\n    colorList.add(new ColorName(&quot;Silver&quot;, 0xC0, 0xC0, 0xC0));\n    colorList.add(new ColorName(&quot;SkyBlue&quot;, 0x87, 0xCE, 0xEB));\n    colorList.add(new ColorName(&quot;SlateBlue&quot;, 0x6A, 0x5A, 0xCD));\n    colorList.add(new ColorName(&quot;SlateGray&quot;, 0x70, 0x80, 0x90));\n    colorList.add(new ColorName(&quot;Snow&quot;, 0xFF, 0xFA, 0xFA));\n    colorList.add(new ColorName(&quot;SpringGreen&quot;, 0x00, 0xFF, 0x7F));\n    colorList.add(new ColorName(&quot;SteelBlue&quot;, 0x46, 0x82, 0xB4));\n    colorList.add(new ColorName(&quot;Tan&quot;, 0xD2, 0xB4, 0x8C));\n    colorList.add(new ColorName(&quot;Teal&quot;, 0x00, 0x80, 0x80));\n    colorList.add(new ColorName(&quot;Thistle&quot;, 0xD8, 0xBF, 0xD8));\n    colorList.add(new ColorName(&quot;Tomato&quot;, 0xFF, 0x63, 0x47));\n    colorList.add(new ColorName(&quot;Turquoise&quot;, 0x40, 0xE0, 0xD0));\n    colorList.add(new ColorName(&quot;Violet&quot;, 0xEE, 0x82, 0xEE));\n    colorList.add(new ColorName(&quot;Wheat&quot;, 0xF5, 0xDE, 0xB3));\n    colorList.add(new ColorName(&quot;White&quot;, 0xFF, 0xFF, 0xFF));\n    colorList.add(new ColorName(&quot;WhiteSmoke&quot;, 0xF5, 0xF5, 0xF5));\n    colorList.add(new ColorName(&quot;Yellow&quot;, 0xFF, 0xFF, 0x00));\n    colorList.add(new ColorName(&quot;YellowGreen&quot;, 0x9A, 0xCD, 0x32));\n    return colorList;\n}\n\npublic static String getColorNameFromRgb(int r, int g, int b) {\n    ArrayList&lt;ColorName&gt; colorList = initColorList();\n    ColorName closestMatch = null;\n    int minMSE = Integer.MAX_VALUE;\n    int mse;\n    for (ColorName c : colorList) {\n        mse = c.computeMSE(r, g, b);\n        if (mse &lt; minMSE) {\n            minMSE = mse;\n            closestMatch = c;\n        }\n    }\n\n    if (closestMatch != null) {\n        return closestMatch.getName();\n    } else {\n        return &quot;No matched color name.&quot;;\n    }\n}\n\npublic static String getColorNameFromColor(Color color) {\n    return getColorNameFromRgb(color.getRed(), color.getGreen(),\n            color.getBlue());\n}\n\npublic static Color stringToColor(final String value) {\n    if (value == null) {\n        return Color.black;\n    }\n    try {\n        return Color.decode(value);\n    } catch (NumberFormatException nfe) {\n        try {\n            final Field f = Color.class.getField(value);\n            return (Color) f.get(null);\n        } catch (Exception ce) {\n            return Color.black;\n        }\n    }\n}\n\npublic static class ColorName {\n    public int r, g, b;\n    public String name;\n\npublic ColorName(String name, int r, int g, int b) {\n    this.r = r;\n    this.g = g;\n    this.b = b;\n    this.name = name;\n}\n\npublic int computeMSE(int pixR, int pixG, int pixB) {\n    return ((pixR - r) * (pixR - r) + (pixG - g) * (pixG - g) + (pixB - b)\n            * (pixB - b)) / 3;\n}\n\npublic String getName() {\n    return name;\n}\n</code></pre>\n<p>}\n}`</p>\n<p>An example of the usage of this class.</p>\n<pre><code>public String getElementColor(WebElement element) {\n\n    String color = element.getCssValue(&quot;color&quot;);\n    String hex = Color.fromString(color).asHex();\n    java.awt.Color c = stringToColor(hex);\n    return getColorNameFromColor(c);\n}\n</code></pre>\n"}],"owner":{"account_id":443730,"reputation":307,"user_id":835132,"accept_rate":0,"display_name":"user835132"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117216,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":5,"score":14,"last_activity_date":1676015039,"creation_date":1398172086,"question_id":23220575,"body_markdown":"I want to check the color of an element in an html page. \r\nThe color of this element is set with a javascript, look at the image [![enter image description here][1]][1]\r\n\r\nThe element with div-id &quot;Ab_banco_M1T1_switch&quot; can assume 4 values, of course only one of them is displayed according to the value of &quot;val&quot; variable. \r\nThe val variable is set from the server somehow, it seemes the script polls the server every X-seconds and update the value of val. \r\n\r\nI&#39;ve tried to get the color of the element as follow: \r\n\r\n\r\n    WebElement element = wait.until(ExpectedConditions.presenceOfElementLocated(By.id(&quot;Ab_banco_M1T1_switch&quot;)));\r\n\r\n    element.getAttribute(&quot;background&quot;)\r\n    element.getAttribute(&quot;style&quot;)\r\n    element.getAttribute(&quot;background-color&quot;) \r\n    element.getCssValue(&quot;style&quot;)\r\n    element.getCssValue(&quot;color&quot;)\r\n\r\n\r\nwith no success, they return &quot;null&quot; or the backgorund-color of the page.\r\n\r\n\r\nThe only way to get the color is to use the Xpath\r\n    `/html/body/div/div[2]/div[2]/div[2]/div/div/div/div[3]/div (for red, if I want the green \r\n   /html/body/div/div[2]/div[2]/div[2]/div/div/div/div[2]/div)`\r\n\r\nBut it is not what I want. Indeed, the Xpath localizes the element, but it doesn&#39;t tell me if the color displayed is red or another one, I can know it only by looking at the web page. \r\n\r\n\r\nIn other words, I would like to access the  current displayed color as Firebug does, look at the panel on right side, you can see that `element.style -&gt;background-Color = red`. \r\n\r\n\r\nWhen I invoke element,`getCssCValue(&quot;background-color&quot;)` I get the backgorund-color of `#body_right_div`. \r\n\r\nThank you in advance. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KbQOB.png","title":"How to get element color with Selenium","body":"<p>I want to check the color of an element in an html page. \nThe color of this element is set with a javascript, look at the image <a href=\"https://i.stack.imgur.com/KbQOB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/KbQOB.png\" alt=\"enter image description here\"></a></p>\n\n<p>The element with div-id \"Ab_banco_M1T1_switch\" can assume 4 values, of course only one of them is displayed according to the value of \"val\" variable. \nThe val variable is set from the server somehow, it seemes the script polls the server every X-seconds and update the value of val. </p>\n\n<p>I've tried to get the color of the element as follow: </p>\n\n<pre><code>WebElement element = wait.until(ExpectedConditions.presenceOfElementLocated(By.id(\"Ab_banco_M1T1_switch\")));\n\nelement.getAttribute(\"background\")\nelement.getAttribute(\"style\")\nelement.getAttribute(\"background-color\") \nelement.getCssValue(\"style\")\nelement.getCssValue(\"color\")\n</code></pre>\n\n<p>with no success, they return \"null\" or the backgorund-color of the page.</p>\n\n<p>The only way to get the color is to use the Xpath\n    <code>/html/body/div/div[2]/div[2]/div[2]/div/div/div/div[3]/div (for red, if I want the green \n   /html/body/div/div[2]/div[2]/div[2]/div/div/div/div[2]/div)</code></p>\n\n<p>But it is not what I want. Indeed, the Xpath localizes the element, but it doesn't tell me if the color displayed is red or another one, I can know it only by looking at the web page. </p>\n\n<p>In other words, I would like to access the  current displayed color as Firebug does, look at the panel on right side, you can see that <code>element.style -&gt;background-Color = red</code>. </p>\n\n<p>When I invoke element,<code>getCssCValue(\"background-color\")</code> I get the backgorund-color of <code>#body_right_div</code>. </p>\n\n<p>Thank you in advance. </p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1645974044,"creation_date":1645974044,"answer_id":71285831,"question_id":71285670,"body_markdown":"If the key actually has data, you shouldn&#39;t be using `Serdes.Void()` or `KStream&lt;Void,`","title":"Kafka Streams: java.lang.IllegalArgumentException: Data should be null for a VoidDeserializer","body":"<p>If the key actually has data, you shouldn't be using <code>Serdes.Void()</code> or <code>KStream&lt;Void,</code></p>\n"},{"tags":[],"owner":{"account_id":20110160,"reputation":31,"user_id":14746718,"display_name":"Akshay Patil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676014910,"creation_date":1675618559,"answer_id":75354221,"question_id":71285670,"body_markdown":"Changing Void to String will make the stream work in the example\r\n\r\n    KStream&lt;String, String&gt; stream = builder.stream(&quot;users&quot;);\r\n    \r\n    config.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass());","title":"Kafka Streams: java.lang.IllegalArgumentException: Data should be null for a VoidDeserializer","body":"<p>Changing Void to String will make the stream work in the example</p>\n<pre><code>KStream&lt;String, String&gt; stream = builder.stream(&quot;users&quot;);\n\nconfig.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass());\n</code></pre>\n"}],"owner":{"account_id":244890,"reputation":14524,"user_id":518012,"accept_rate":66,"display_name":"Eugene Goldberg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":630,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71285831,"answer_count":2,"score":0,"last_activity_date":1676014910,"creation_date":1645972883,"question_id":71285670,"body_markdown":"I am working through my first sample of Kafka Streams:\r\n\r\n    package com.example;\r\n    \r\n    import java.util.Properties;\r\n    import org.apache.kafka.clients.consumer.ConsumerConfig;\r\n    import org.apache.kafka.common.serialization.Serdes;\r\n    import org.apache.kafka.streams.KafkaStreams;\r\n    import org.apache.kafka.streams.StreamsBuilder;\r\n    import org.apache.kafka.streams.StreamsConfig;\r\n    import org.apache.kafka.streams.kstream.KStream;\r\n    \r\n    class DslExample {\r\n    \r\n      public static void main(String[] args) {\r\n        // the builder is used to construct the topology\r\n        StreamsBuilder builder = new StreamsBuilder();\r\n    \r\n        // read from the source topic, &quot;users&quot;\r\n        KStream&lt;Void, String&gt; stream = builder.stream(&quot;users&quot;);\r\n    \r\n        // for each record that appears in the source topic,\r\n        // print the value\r\n        stream.foreach(\r\n            (key, value) -&gt; {\r\n              System.out.println(&quot;(DSL) Hello, &quot; + value);\r\n            });\r\n    \r\n        // you can also print using the `print` operator\r\n        // stream.print(Printed.&lt;String, String&gt;toSysOut().withLabel(&quot;source&quot;));\r\n    \r\n        // set the required properties for running Kafka Streams\r\n        Properties config = new Properties();\r\n        config.put(StreamsConfig.APPLICATION_ID_CONFIG, &quot;dev1&quot;);\r\n        config.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;10.0.0.24:29092&quot;);\r\n        config.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\r\n        config.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.Void().getClass());\r\n        config.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass());\r\n    \r\n        // build the topology and start streaming\r\n        KafkaStreams streams = new KafkaStreams(builder.build(), config);\r\n        streams.start();\r\n    \r\n        // close Kafka Streams when the JVM shuts down (e.g. SIGTERM)\r\n        Runtime.getRuntime().addShutdownHook(new Thread(streams::close));\r\n      }\r\n    }\r\n\r\nWhen I attempt to run it I get this error:\r\n\r\n    Caused by: java.lang.IllegalArgumentException: Data should be null for a VoidDeserializer.\r\n\r\nThis is a sample message from the &quot;users&quot; topic:\r\n\r\nValue:\r\n\r\n    {\r\n      &quot;registertime&quot;: 1517518703752,\r\n      &quot;userid&quot;: &quot;User_8&quot;,\r\n      &quot;regionid&quot;: &quot;Region_7&quot;,\r\n      &quot;gender&quot;: &quot;OTHER&quot;\r\n    }\r\n\r\nHeader:\r\n\r\n    [\r\n      {\r\n        &quot;key&quot;: &quot;task.generation&quot;,\r\n        &quot;stringValue&quot;: &quot;0&quot;\r\n      },\r\n      {\r\n        &quot;key&quot;: &quot;task.id&quot;,\r\n        &quot;stringValue&quot;: &quot;0&quot;\r\n      },\r\n      {\r\n        &quot;key&quot;: &quot;current.iteration&quot;,\r\n        &quot;stringValue&quot;: &quot;86144&quot;\r\n      }\r\n    ]\r\n\r\nKey:\r\n\r\n    User_8\r\n\r\n\r\nWhat should I do to avoid this problem?\r\n","title":"Kafka Streams: java.lang.IllegalArgumentException: Data should be null for a VoidDeserializer","body":"<p>I am working through my first sample of Kafka Streams:</p>\n<pre><code>package com.example;\n\nimport java.util.Properties;\nimport org.apache.kafka.clients.consumer.ConsumerConfig;\nimport org.apache.kafka.common.serialization.Serdes;\nimport org.apache.kafka.streams.KafkaStreams;\nimport org.apache.kafka.streams.StreamsBuilder;\nimport org.apache.kafka.streams.StreamsConfig;\nimport org.apache.kafka.streams.kstream.KStream;\n\nclass DslExample {\n\n  public static void main(String[] args) {\n    // the builder is used to construct the topology\n    StreamsBuilder builder = new StreamsBuilder();\n\n    // read from the source topic, &quot;users&quot;\n    KStream&lt;Void, String&gt; stream = builder.stream(&quot;users&quot;);\n\n    // for each record that appears in the source topic,\n    // print the value\n    stream.foreach(\n        (key, value) -&gt; {\n          System.out.println(&quot;(DSL) Hello, &quot; + value);\n        });\n\n    // you can also print using the `print` operator\n    // stream.print(Printed.&lt;String, String&gt;toSysOut().withLabel(&quot;source&quot;));\n\n    // set the required properties for running Kafka Streams\n    Properties config = new Properties();\n    config.put(StreamsConfig.APPLICATION_ID_CONFIG, &quot;dev1&quot;);\n    config.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;10.0.0.24:29092&quot;);\n    config.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\n    config.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.Void().getClass());\n    config.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass());\n\n    // build the topology and start streaming\n    KafkaStreams streams = new KafkaStreams(builder.build(), config);\n    streams.start();\n\n    // close Kafka Streams when the JVM shuts down (e.g. SIGTERM)\n    Runtime.getRuntime().addShutdownHook(new Thread(streams::close));\n  }\n}\n</code></pre>\n<p>When I attempt to run it I get this error:</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Data should be null for a VoidDeserializer.\n</code></pre>\n<p>This is a sample message from the &quot;users&quot; topic:</p>\n<p>Value:</p>\n<pre><code>{\n  &quot;registertime&quot;: 1517518703752,\n  &quot;userid&quot;: &quot;User_8&quot;,\n  &quot;regionid&quot;: &quot;Region_7&quot;,\n  &quot;gender&quot;: &quot;OTHER&quot;\n}\n</code></pre>\n<p>Header:</p>\n<pre><code>[\n  {\n    &quot;key&quot;: &quot;task.generation&quot;,\n    &quot;stringValue&quot;: &quot;0&quot;\n  },\n  {\n    &quot;key&quot;: &quot;task.id&quot;,\n    &quot;stringValue&quot;: &quot;0&quot;\n  },\n  {\n    &quot;key&quot;: &quot;current.iteration&quot;,\n    &quot;stringValue&quot;: &quot;86144&quot;\n  }\n]\n</code></pre>\n<p>Key:</p>\n<pre><code>User_8\n</code></pre>\n<p>What should I do to avoid this problem?</p>\n"},{"tags":["java","treeset"],"comments":[{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1676014302,"post_id":75407820,"comment_id":133055345,"body_markdown":"Note that some implementations might actually consider rebalancing the tree upon modification, which can yield a worse performance. But this will only be necessary _sometimes_ and not always. Yielding a proper **amortized** complexity of `O(log n)`, while the non-amortized is maybe `O(n)` in some implementations.","body":"Note that some implementations might actually consider rebalancing the tree upon modification, which can yield a worse performance. But this will only be necessary <i>sometimes</i> and not always. Yielding a proper <b>amortized</b> complexity of <code>O(log n)</code>, while the non-amortized is maybe <code>O(n)</code> in some implementations."}],"answers":[{"tags":[],"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676014500,"creation_date":1676013206,"answer_id":75407960,"question_id":75407820,"body_markdown":"It **is** O(log N) according to the [JavaDocs for TreeSet:][1]\r\n\r\n&gt; This implementation provides guaranteed log(n) time cost for the basic\r\n&gt; operations (add, remove and contains).\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/TreeSet.html","title":"Why is TreeSet.remove&#39;s time complexity O(in N)?","body":"<p>It <strong>is</strong> O(log N) according to the <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/TreeSet.html\" rel=\"nofollow noreferrer\">JavaDocs for TreeSet:</a></p>\n<blockquote>\n<p>This implementation provides guaranteed log(n) time cost for the basic\noperations (add, remove and contains).</p>\n</blockquote>\n"}],"owner":{"account_id":17863533,"reputation":33,"user_id":12976429,"display_name":"Joseph Jang"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":190,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75407960,"answer_count":1,"score":0,"last_activity_date":1676014500,"creation_date":1676012151,"question_id":75407820,"body_markdown":"A treeset is already sorted... so why isn&#39;t the time complexity to remove an object O(Log N) through binary search? Am I missing something?","title":"Why is TreeSet.remove&#39;s time complexity O(in N)?","body":"<p>A treeset is already sorted... so why isn't the time complexity to remove an object O(Log N) through binary search? Am I missing something?</p>\n"},{"tags":["java","json","spring-boot","bitbucket","bitbucket-api"],"answers":[{"tags":[],"owner":{"account_id":11454153,"reputation":99,"user_id":11023170,"display_name":"Udhav Mohata"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676014294,"creation_date":1676014294,"answer_id":75408095,"question_id":73791252,"body_markdown":"I was able fix this issue, by using [Unirest][1]\r\n\r\nThe following syntax was used \r\n\r\n    String url = &quot;https://bitbucket.domain.com/rest/api/1.0/projects/my-project/repos/my-repo/browse/path/to/meta.json&quot;;\r\n    HttpResponse&lt;T&gt; response = Unirest.get(url).headers(headers).asObject(responseClass);\r\n    JsonNode bucketData = response.getBody();\r\n\r\n  [1]: http://kong.github.io/unirest-java/","title":"Retrieve Text file content using Bitbucket server rest APIs in Java JsonNode format","body":"<p>I was able fix this issue, by using <a href=\"http://kong.github.io/unirest-java/\" rel=\"nofollow noreferrer\">Unirest</a></p>\n<p>The following syntax was used</p>\n<pre><code>String url = &quot;https://bitbucket.domain.com/rest/api/1.0/projects/my-project/repos/my-repo/browse/path/to/meta.json&quot;;\nHttpResponse&lt;T&gt; response = Unirest.get(url).headers(headers).asObject(responseClass);\nJsonNode bucketData = response.getBody();\n</code></pre>\n"}],"owner":{"account_id":11454153,"reputation":99,"user_id":11023170,"display_name":"Udhav Mohata"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":600,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75408095,"answer_count":1,"score":0,"last_activity_date":1676014294,"creation_date":1663699022,"question_id":73791252,"body_markdown":"I am trying to use the bitbucket server rest API to fetch file content(.json file) from a bitbucket repository in a Java spring boot Application but the response is not as expected.\r\n\r\n**Content in the file *meta.json***\r\n\r\n    {\r\n      &quot;key1&quot;: &quot;value1&quot;,\r\n      &quot;key2&quot;: &quot;value2&quot;\r\n    }\r\n\r\n**API used**\r\nhttps://bitbucket.domain.com/rest/api/1.0/projects/my-project/repos/my-repo/browse/path/to/meta.json\r\n\r\n**Java snippet used to get file content**\r\n\r\n    String url = &quot;https://bitbucket.domain.com/rest/api/1.0/projects/my-project/repos/my-repo/browse/path/to/meta.json&quot;;\r\n    JsonNode bucketData = restTemplate.exchange(url, HttpMethod.GET, entity, JsonNode.class).getBody();\r\n\r\n**Actual output:**\r\n\r\n    {\r\n        &quot;lines&quot;: [\r\n            {\r\n                &quot;text&quot;: &quot;{&quot;\r\n            },\r\n            {\r\n                &quot;text&quot;: &quot;  \\&quot;key1\\&quot;: \\&quot;value1\\&quot;,&quot;\r\n            },\r\n            {\r\n                &quot;text&quot;: &quot;  \\&quot;key2\\&quot;: \\&quot;value2\\&quot;&quot;\r\n            },\r\n            {\r\n                &quot;text&quot;: &quot;}&quot;\r\n            }\r\n        ],\r\n        &quot;start&quot;: 0,\r\n        &quot;size&quot;: 4,\r\n        &quot;isLastPage&quot;: true\r\n    }\r\n\r\nWhereas the output I want is the following\r\n\r\n    {\r\n      &quot;key1&quot;: &quot;value1&quot;,\r\n      &quot;key2&quot;: &quot;value2&quot;\r\n    }\r\n\r\nSo I can convert it to JsonNode and use it.\r\n\r\n**Observation**\r\n\r\nWhile hitting the repo url with *?raw* param (https://bitbucket.domain.com/projects/my-project/repos/my-repo/browse/path/to/meta.json?raw) I was getting the excepted output in text format, not json format. I also tried using the same url in my spring boot application but that didnt work either.\r\n\r\nAny suggestion on how can I get the expected output?\r\n","title":"Retrieve Text file content using Bitbucket server rest APIs in Java JsonNode format","body":"<p>I am trying to use the bitbucket server rest API to fetch file content(.json file) from a bitbucket repository in a Java spring boot Application but the response is not as expected.</p>\n<p><strong>Content in the file <em>meta.json</em></strong></p>\n<pre><code>{\n  &quot;key1&quot;: &quot;value1&quot;,\n  &quot;key2&quot;: &quot;value2&quot;\n}\n</code></pre>\n<p><strong>API used</strong>\n<a href=\"https://bitbucket.domain.com/rest/api/1.0/projects/my-project/repos/my-repo/browse/path/to/meta.json\" rel=\"nofollow noreferrer\">https://bitbucket.domain.com/rest/api/1.0/projects/my-project/repos/my-repo/browse/path/to/meta.json</a></p>\n<p><strong>Java snippet used to get file content</strong></p>\n<pre><code>String url = &quot;https://bitbucket.domain.com/rest/api/1.0/projects/my-project/repos/my-repo/browse/path/to/meta.json&quot;;\nJsonNode bucketData = restTemplate.exchange(url, HttpMethod.GET, entity, JsonNode.class).getBody();\n</code></pre>\n<p><strong>Actual output:</strong></p>\n<pre><code>{\n    &quot;lines&quot;: [\n        {\n            &quot;text&quot;: &quot;{&quot;\n        },\n        {\n            &quot;text&quot;: &quot;  \\&quot;key1\\&quot;: \\&quot;value1\\&quot;,&quot;\n        },\n        {\n            &quot;text&quot;: &quot;  \\&quot;key2\\&quot;: \\&quot;value2\\&quot;&quot;\n        },\n        {\n            &quot;text&quot;: &quot;}&quot;\n        }\n    ],\n    &quot;start&quot;: 0,\n    &quot;size&quot;: 4,\n    &quot;isLastPage&quot;: true\n}\n</code></pre>\n<p>Whereas the output I want is the following</p>\n<pre><code>{\n  &quot;key1&quot;: &quot;value1&quot;,\n  &quot;key2&quot;: &quot;value2&quot;\n}\n</code></pre>\n<p>So I can convert it to JsonNode and use it.</p>\n<p><strong>Observation</strong></p>\n<p>While hitting the repo url with <em>?raw</em> param (<a href=\"https://bitbucket.domain.com/projects/my-project/repos/my-repo/browse/path/to/meta.json?raw\" rel=\"nofollow noreferrer\">https://bitbucket.domain.com/projects/my-project/repos/my-repo/browse/path/to/meta.json?raw</a>) I was getting the excepted output in text format, not json format. I also tried using the same url in my spring boot application but that didnt work either.</p>\n<p>Any suggestion on how can I get the expected output?</p>\n"},{"tags":["java","xml","dom","sax","root-element"],"owner":{"account_id":1013180,"reputation":757,"user_id":1025317,"accept_rate":49,"display_name":"pankaj_ar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676013662,"creation_date":1676013662,"question_id":75408008,"body_markdown":"I have some bigger XMLs to process and based on the root node I will get the type of content XML contains. Accordingly I will redirect XML files to their specific processor.\r\n\r\nRight now I am using DOM parser but trying to avoid unnecessary memory and time overhead.\r\n\r\n    Node node=doc.getDocumentElement();\r\n    if (node.getNodeName().equals(&quot;Settings&quot;))\r\n        submitFileToSettingsProcessor(file);\r\n    else if (node.getNodeName().equals(&quot;Data&quot;))\r\n        submitFileToDataProcessor(file);\r\n    // and so on . . .\r\n\r\nAny other best way to read just the root element and avoid hefty code of DocumentBuilderFactory or SAXParserFactory.","title":"Java XML parser get root node only","body":"<p>I have some bigger XMLs to process and based on the root node I will get the type of content XML contains. Accordingly I will redirect XML files to their specific processor.</p>\n<p>Right now I am using DOM parser but trying to avoid unnecessary memory and time overhead.</p>\n<pre><code>Node node=doc.getDocumentElement();\nif (node.getNodeName().equals(&quot;Settings&quot;))\n    submitFileToSettingsProcessor(file);\nelse if (node.getNodeName().equals(&quot;Data&quot;))\n    submitFileToDataProcessor(file);\n// and so on . . .\n</code></pre>\n<p>Any other best way to read just the root element and avoid hefty code of DocumentBuilderFactory or SAXParserFactory.</p>\n"},{"tags":["java","xml","serialization","jaxb","xmlelement"],"owner":{"account_id":17160138,"reputation":1,"user_id":21185280,"display_name":"Andrey Mokeev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676013653,"creation_date":1676013131,"question_id":75407947,"body_markdown":"When I try to marshall to XML with nulls for Field1.code and Field2.description I have strange result.\r\n\r\n```\r\nimport javax.xml.bind.annotation.\\*;\r\n\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\n@XmlType(propOrder = {\r\n&quot;id&quot;,\r\n&quot;fields&quot;,\r\n&quot;result&quot;,\r\n&quot;comment&quot;\r\n})\r\n@XmlRootElement(name = &quot;response&quot;)\r\npublic class MyXML {\r\n\r\n@XmlElement(required = true)\r\nprivate String id;\r\n@XmlElement(required = true)\r\nprivate MyXML.Fields fields;\r\n\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\n@XmlType(propOrder = {\r\n        &quot;field1&quot;,\r\n        &quot;field2&quot;\r\n})\r\npublic static class Fields {\r\n\r\n    @XmlElement(required = true)\r\n    private MyXML.Fields.Field1 field1;\r\n    @XmlElement(required = true)\r\n    private MyXML.Fields.Field2 field2;\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(propOrder = {\r\n            &quot;code&quot;\r\n    })\r\n    public static class Field1 {\r\n\r\n        @XmlValue\r\n        private Integer code;\r\n\r\n        @XmlAttribute\r\n        private String name;\r\n\r\n\r\n    }\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(propOrder = {\r\n            &quot;description&quot;\r\n    })\r\n    public static class Field2 {\r\n\r\n        @XmlValue\r\n        private String description;\r\n\r\n        @XmlAttribute\r\n        private String name;\r\n\r\n    }\r\n\r\n}\r\n\r\n}\r\n\r\n```\r\nResult:\r\n\r\n \r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n    &lt;response&gt;\r\n        &lt;id&gt;12345&lt;/id&gt;\r\n        &lt;fields&gt;\r\n            &lt;field1 name=&quot;name1&quot;/&gt;\r\n            &lt;field2 name=&quot;name2&quot;&gt;null&lt;/field2&gt;\r\n        &lt;/fields&gt;\r\n    &lt;/response&gt;\r\n```\r\n\r\nFor some reason JAXB serialize null for String type and doesnt serialize null for Integer.\r\nI want to see null in field1 as on field2.\r\n\r\nI tried to set nillable=true, but it didn&#39;t help.","title":"JAXB null/empty field","body":"<p>When I try to marshall to XML with nulls for Field1.code and Field2.description I have strange result.</p>\n<pre><code>import javax.xml.bind.annotation.\\*;\n\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(propOrder = {\n&quot;id&quot;,\n&quot;fields&quot;,\n&quot;result&quot;,\n&quot;comment&quot;\n})\n@XmlRootElement(name = &quot;response&quot;)\npublic class MyXML {\n\n@XmlElement(required = true)\nprivate String id;\n@XmlElement(required = true)\nprivate MyXML.Fields fields;\n\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(propOrder = {\n        &quot;field1&quot;,\n        &quot;field2&quot;\n})\npublic static class Fields {\n\n    @XmlElement(required = true)\n    private MyXML.Fields.Field1 field1;\n    @XmlElement(required = true)\n    private MyXML.Fields.Field2 field2;\n\n    @XmlAccessorType(XmlAccessType.FIELD)\n    @XmlType(propOrder = {\n            &quot;code&quot;\n    })\n    public static class Field1 {\n\n        @XmlValue\n        private Integer code;\n\n        @XmlAttribute\n        private String name;\n\n\n    }\n\n    @XmlAccessorType(XmlAccessType.FIELD)\n    @XmlType(propOrder = {\n            &quot;description&quot;\n    })\n    public static class Field2 {\n\n        @XmlValue\n        private String description;\n\n        @XmlAttribute\n        private String name;\n\n    }\n\n}\n\n}\n\n</code></pre>\n<p>Result:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n    &lt;response&gt;\n        &lt;id&gt;12345&lt;/id&gt;\n        &lt;fields&gt;\n            &lt;field1 name=&quot;name1&quot;/&gt;\n            &lt;field2 name=&quot;name2&quot;&gt;null&lt;/field2&gt;\n        &lt;/fields&gt;\n    &lt;/response&gt;\n</code></pre>\n<p>For some reason JAXB serialize null for String type and doesnt serialize null for Integer.\nI want to see null in field1 as on field2.</p>\n<p>I tried to set nillable=true, but it didn't help.</p>\n"},{"tags":["java","spring-boot","inheritance","design-patterns","factory-pattern"],"comments":[{"owner":{"account_id":222726,"reputation":3846,"user_id":481528,"accept_rate":67,"display_name":"selalerer"},"score":0,"creation_date":1676013901,"post_id":75065501,"comment_id":133055262,"body_markdown":"You&#39;re presenting a problem in Spring but other than `@Autowired` there is nothing springy about the code. Either that is exactly the problem (this is not a spring application) or you left out the relevant parts","body":"You&#39;re presenting a problem in Spring but other than <code>@Autowired</code> there is nothing springy about the code. Either that is exactly the problem (this is not a spring application) or you left out the relevant parts"}],"answers":[{"tags":[],"owner":{"account_id":1816046,"reputation":1389,"user_id":1651107,"accept_rate":100,"display_name":"Piro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676013454,"creation_date":1676013454,"answer_id":75407990,"question_id":75065501,"body_markdown":"In your example env is null because you need to initialize spring boot first. For example this works:\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.core.env.Environment;\r\n    \r\n    import jakarta.annotation.PostConstruct;\r\n    \r\n    public class NotificationService {\r\n    \t@Autowired\r\n    \tEnvironment env;\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(NotificationService.class, args);\r\n    \t}\r\n    \t\r\n    \t@PostConstruct\r\n    \tpublic void testNotifications() {\r\n    \t\tSystem.out.println(env);\r\n    \t\tNotificationFactory notificationFactory = new NotificationFactory();\r\n    \t\tNotification notification = notificationFactory.createNotification(&quot;SMS&quot;);\r\n    \t\tnotification.notifyUser();\r\n    \t}\r\n    }\r\n\r\nNow env is not null before creating NotificationFactory.\r\n\r\n&gt; ApplicationEnvironment {activeProfiles=[],\r\n&gt; defaultProfiles=[default],... \r\n&gt; \r\n&gt; Sending an SMS notification\r\n\r\nSo now you can pass env to NotificationFactory/Notification.\r\n\r\nIf you do not want to pass env to notifyUser method you could also do autowiring manually. Here I pass DefaultListableBeanFactory that does the job on each created Notification:\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.beans.factory.support.DefaultListableBeanFactory;\r\n    import org.springframework.boot.SpringApplication;\r\n    \r\n    import jakarta.annotation.PostConstruct;\r\n    \r\n    public class NotificationService {\r\n    \t\r\n    \t@Autowired\r\n    \tprivate DefaultListableBeanFactory beanFactory;\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(NotificationService.class, args);\r\n    \t}\r\n    \t\r\n    \t@PostConstruct\r\n    \tpublic void testNotifications() {\r\n    \t\tNotificationFactory notificationFactory = new NotificationFactory(beanFactory);\r\n    \t\tNotification notification = notificationFactory.createNotification(&quot;SMS&quot;);\r\n    \t\tnotification.notifyUser();\r\n    \t}\r\n    }\r\n\r\n    public class NotificationFactory {\r\n    \tprivate final DefaultListableBeanFactory beanFactory;\r\n    \t\r\n    \tpublic NotificationFactory(DefaultListableBeanFactory beanFactory) {\r\n    \t\tthis.beanFactory = beanFactory;\r\n    \t}\r\n        public Notification createNotification(String channel){\r\n            if (channel == null || channel.isEmpty()) {\r\n            \treturn null;\r\n            }\r\n            final Notification notification;\r\n            switch (channel) {\r\n            case &quot;SMS&quot;:\r\n            \tnotification = new SMSNotification();\r\n            \tbreak;\r\n            case &quot;EMAIL&quot;:\r\n            \tnotification = new EmailNotification();\r\n            \tbreak;\r\n            case &quot;PUSH&quot;:\r\n            \tnotification = new PushNotification();\r\n            \tbreak;\r\n            default:\r\n                throw new IllegalArgumentException(&quot;Unknown channel &quot;+channel);\r\n            }\r\n    \t\tbeanFactory.autowireBeanProperties(notification, AutowireCapableBeanFactory.AUTOWIRE_BY_NAME, false);\r\n    \t\treturn notification;\r\n        }\r\n    }\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.core.env.Environment;\r\n    \r\n    public class SMSNotification implements Notification {\r\n    \t\r\n    \t@Autowired\r\n    \tEnvironment env;\r\n        \r\n        @Override\r\n        public void notifyUser(){\r\n            System.out.println(&quot;Sending an SMS notification &quot; + env);\r\n        }\r\n    }\r\n\r\nThis will print:\r\n\r\n&gt; Sending an SMS notification ApplicationEnvironment {activeProfiles=[],\r\n&gt; defaultProfiles=[default],\r\n&gt; propertySources=[ConfigurationPropertySourcesPropertySource...\r\n\r\nWith this you can just autowire additional fields as needed without changing interface","title":"Unable to autowire Spring Boot components while using factory pattern","body":"<p>In your example env is null because you need to initialize spring boot first. For example this works:</p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.core.env.Environment;\n\nimport jakarta.annotation.PostConstruct;\n\npublic class NotificationService {\n    @Autowired\n    Environment env;\n\n    public static void main(String[] args) {\n        SpringApplication.run(NotificationService.class, args);\n    }\n    \n    @PostConstruct\n    public void testNotifications() {\n        System.out.println(env);\n        NotificationFactory notificationFactory = new NotificationFactory();\n        Notification notification = notificationFactory.createNotification(&quot;SMS&quot;);\n        notification.notifyUser();\n    }\n}\n</code></pre>\n<p>Now env is not null before creating NotificationFactory.</p>\n<blockquote>\n<p>ApplicationEnvironment {activeProfiles=[],\ndefaultProfiles=[default],...</p>\n<p>Sending an SMS notification</p>\n</blockquote>\n<p>So now you can pass env to NotificationFactory/Notification.</p>\n<p>If you do not want to pass env to notifyUser method you could also do autowiring manually. Here I pass DefaultListableBeanFactory that does the job on each created Notification:</p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.support.DefaultListableBeanFactory;\nimport org.springframework.boot.SpringApplication;\n\nimport jakarta.annotation.PostConstruct;\n\npublic class NotificationService {\n    \n    @Autowired\n    private DefaultListableBeanFactory beanFactory;\n\n    public static void main(String[] args) {\n        SpringApplication.run(NotificationService.class, args);\n    }\n    \n    @PostConstruct\n    public void testNotifications() {\n        NotificationFactory notificationFactory = new NotificationFactory(beanFactory);\n        Notification notification = notificationFactory.createNotification(&quot;SMS&quot;);\n        notification.notifyUser();\n    }\n}\n\npublic class NotificationFactory {\n    private final DefaultListableBeanFactory beanFactory;\n    \n    public NotificationFactory(DefaultListableBeanFactory beanFactory) {\n        this.beanFactory = beanFactory;\n    }\n    public Notification createNotification(String channel){\n        if (channel == null || channel.isEmpty()) {\n            return null;\n        }\n        final Notification notification;\n        switch (channel) {\n        case &quot;SMS&quot;:\n            notification = new SMSNotification();\n            break;\n        case &quot;EMAIL&quot;:\n            notification = new EmailNotification();\n            break;\n        case &quot;PUSH&quot;:\n            notification = new PushNotification();\n            break;\n        default:\n            throw new IllegalArgumentException(&quot;Unknown channel &quot;+channel);\n        }\n        beanFactory.autowireBeanProperties(notification, AutowireCapableBeanFactory.AUTOWIRE_BY_NAME, false);\n        return notification;\n    }\n}\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.core.env.Environment;\n\npublic class SMSNotification implements Notification {\n    \n    @Autowired\n    Environment env;\n    \n    @Override\n    public void notifyUser(){\n        System.out.println(&quot;Sending an SMS notification &quot; + env);\n    }\n}\n</code></pre>\n<p>This will print:</p>\n<blockquote>\n<p>Sending an SMS notification ApplicationEnvironment {activeProfiles=[],\ndefaultProfiles=[default],\npropertySources=[ConfigurationPropertySourcesPropertySource...</p>\n</blockquote>\n<p>With this you can just autowire additional fields as needed without changing interface</p>\n"}],"owner":{"account_id":10482525,"reputation":31,"user_id":9952551,"display_name":"Soph_dev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":400,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1676013454,"creation_date":1673325137,"question_id":75065501,"body_markdown":"I&#39;m not able to inject Environment dependencies in the classes that extend the base interface in a factory pattern. My architect advised me to pass the dependency through method parameters, but now the requirement has changed to add more dependencies. I don&#39;t feel comfortable in adding more parameters to the same function anymore. The parameter change in one function has to be updated in base interface along with all the classes implementing it. Please suggest a better way of solving this issue.\r\n\r\nI tried to add more parameters in the function to accommodate new dependencies, but this doesn&#39;t look like a scalable and clean approach.\r\n\r\nTaking the example of this NotifierFactory:\r\n\r\n\r\n```\r\n\r\npublic interface Notification {\r\n    void notifyUser();\r\n}\r\n\r\npublic class SMSNotification implements Notification {\r\n \r\n    @Override\r\n    public void notifyUser()\r\n    {\r\n        // TODO Auto-generated method stub\r\n        System.out.println(&quot;Sending an SMS notification&quot;);\r\n    }\r\n}\r\n\r\npublic class EmailNotification implements Notification {\r\n \r\n    @Override\r\n    public void notifyUser()\r\n    {\r\n        // TODO Auto-generated method stub\r\n        System.out.println(&quot;Sending an e-mail notification&quot;);\r\n    }\r\n}\r\n\r\npublic class PushNotification implements Notification {\r\n \r\n    @Override\r\n    public void notifyUser()\r\n    {\r\n        // TODO Auto-generated method stub\r\n        System.out.println(&quot;Sending a push notification&quot;);\r\n    }\r\n}\r\n\r\npublic class NotificationFactory {\r\n    public Notification createNotification(String channel)\r\n    {\r\n        if (channel == null || channel.isEmpty())\r\n            return null;\r\n        switch (channel) {\r\n        case &quot;SMS&quot;:\r\n            return new SMSNotification();\r\n        case &quot;EMAIL&quot;:\r\n            return new EmailNotification();\r\n        case &quot;PUSH&quot;:\r\n            return new PushNotification();\r\n        default:\r\n            throw new IllegalArgumentException(&quot;Unknown channel &quot;+channel);\r\n        }\r\n    }\r\n}\r\n\r\npublic class NotificationService {\r\n@Autowired\r\nEnvironment env;\r\n    public static void main(String[] args)\r\n    {\r\n        NotificationFactory notificationFactory = new NotificationFactory();\r\n        Notification notification = notificationFactory.createNotification(&quot;SMS&quot;);\r\n        notification.notifyUser();\r\n    }\r\n}\r\n\r\n```\r\n\r\nNow, say I need to use the Environment bean that is autowired in NotificationService inside notifyUser() method of EmailNotification class. If I try to do simple autowiring, the value of env is resolved to null. So the workaround I used was to pass env in notifiyUser() function like, notifyUser(env). The drawback of this approach is that now I need to change the definition of notifyUser() method in all classes implementing Notfication class, even though the env dependency is not used there. And in future, if I need to add more such dependencies, every time the function signature will change.","title":"Unable to autowire Spring Boot components while using factory pattern","body":"<p>I'm not able to inject Environment dependencies in the classes that extend the base interface in a factory pattern. My architect advised me to pass the dependency through method parameters, but now the requirement has changed to add more dependencies. I don't feel comfortable in adding more parameters to the same function anymore. The parameter change in one function has to be updated in base interface along with all the classes implementing it. Please suggest a better way of solving this issue.</p>\n<p>I tried to add more parameters in the function to accommodate new dependencies, but this doesn't look like a scalable and clean approach.</p>\n<p>Taking the example of this NotifierFactory:</p>\n<pre><code>\npublic interface Notification {\n    void notifyUser();\n}\n\npublic class SMSNotification implements Notification {\n \n    @Override\n    public void notifyUser()\n    {\n        // TODO Auto-generated method stub\n        System.out.println(&quot;Sending an SMS notification&quot;);\n    }\n}\n\npublic class EmailNotification implements Notification {\n \n    @Override\n    public void notifyUser()\n    {\n        // TODO Auto-generated method stub\n        System.out.println(&quot;Sending an e-mail notification&quot;);\n    }\n}\n\npublic class PushNotification implements Notification {\n \n    @Override\n    public void notifyUser()\n    {\n        // TODO Auto-generated method stub\n        System.out.println(&quot;Sending a push notification&quot;);\n    }\n}\n\npublic class NotificationFactory {\n    public Notification createNotification(String channel)\n    {\n        if (channel == null || channel.isEmpty())\n            return null;\n        switch (channel) {\n        case &quot;SMS&quot;:\n            return new SMSNotification();\n        case &quot;EMAIL&quot;:\n            return new EmailNotification();\n        case &quot;PUSH&quot;:\n            return new PushNotification();\n        default:\n            throw new IllegalArgumentException(&quot;Unknown channel &quot;+channel);\n        }\n    }\n}\n\npublic class NotificationService {\n@Autowired\nEnvironment env;\n    public static void main(String[] args)\n    {\n        NotificationFactory notificationFactory = new NotificationFactory();\n        Notification notification = notificationFactory.createNotification(&quot;SMS&quot;);\n        notification.notifyUser();\n    }\n}\n\n</code></pre>\n<p>Now, say I need to use the Environment bean that is autowired in NotificationService inside notifyUser() method of EmailNotification class. If I try to do simple autowiring, the value of env is resolved to null. So the workaround I used was to pass env in notifiyUser() function like, notifyUser(env). The drawback of this approach is that now I need to change the definition of notifyUser() method in all classes implementing Notfication class, even though the env dependency is not used there. And in future, if I need to add more such dependencies, every time the function signature will change.</p>\n"},{"tags":["java","serialization","rabbitmq","spring-cloud-stream"],"comments":[{"owner":{"account_id":14505927,"reputation":472,"user_id":10477712,"display_name":"Raheela Aslam"},"score":1,"creation_date":1542696146,"post_id":53387516,"comment_id":93650506,"body_markdown":"Can you please try this \n\nreturn new ObjectMapper().configure(JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES, true);","body":"Can you please try this   return new ObjectMapper().configure(JsonParser.Feature.ALLOW_UNQUOTED_F&zwnj;&#8203;IELD_NAMES, true);"},{"owner":{"account_id":4851105,"reputation":2446,"user_id":3913366,"accept_rate":79,"display_name":"Shubham A."},"score":0,"creation_date":1542696459,"post_id":53387516,"comment_id":93650625,"body_markdown":"Sorry I missed that I tried this as well. Let me add this to the OP.","body":"Sorry I missed that I tried this as well. Let me add this to the OP."},{"owner":{"account_id":14505927,"reputation":472,"user_id":10477712,"display_name":"Raheela Aslam"},"score":0,"creation_date":1542696791,"post_id":53387516,"comment_id":93650747,"body_markdown":"Can you please check your JSON is vaild. Please also have a look into https://stackoverflow.com/questions/4815231/allow-unquoted-field-names-in-jackon-json-library","body":"Can you please check your JSON is vaild. Please also have a look into <a href=\"https://stackoverflow.com/questions/4815231/allow-unquoted-field-names-in-jackon-json-library\" title=\"allow unquoted field names in jackon json library\">stackoverflow.com/questions/4815231/&hellip;</a>"},{"owner":{"account_id":4851105,"reputation":2446,"user_id":3913366,"accept_rate":79,"display_name":"Shubham A."},"score":0,"creation_date":1542696928,"post_id":53387516,"comment_id":93650794,"body_markdown":"Yes it is. I mean publisher publishes it as a POJO so it is internally converted into JSON and consumer accepts the object as `AppMessageEnvelope` and no problem happens there. The problem is when it tries to convert internal object.","body":"Yes it is. I mean publisher publishes it as a POJO so it is internally converted into JSON and consumer accepts the object as <code>AppMessageEnvelope</code> and no problem happens there. The problem is when it tries to convert internal object."},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1542697608,"post_id":53387516,"comment_id":93651061,"body_markdown":"What is printed when you print `messageEnvelope.getMessageBody().toString()` and `messageEnvelope.getMessageBody().getClass()`?","body":"What is printed when you print <code>messageEnvelope.getMessageBody().toString()</code> and <code>messageEnvelope.getMessageBody().getClass()</code>?"},{"owner":{"account_id":445335,"reputation":5970,"user_id":837717,"display_name":"Oleg Zhurakousky"},"score":0,"creation_date":1542715465,"post_id":53387516,"comment_id":93660483,"body_markdown":"I actually have few questions. \n1. Why do you have a custom message structure (`AppMessageEnvelope -&gt; Job`) when Spring Message gives you everything you need? I am actually having a hard time understanding what the actual JSON for your object looks like given it&#39;s complexity which I don&#39;t think is justified. Perhaps you can post it as suggested by @JBNizer. \n2. Why do you explicitly send message to Source.OUTPUT and then returning AppMessageEnvelope? Do you realize that you effectively sending two messages? You don&#39;t need to interact with Source in any explicit way.","body":"I actually have few questions.  1. Why do you have a custom message structure (<code>AppMessageEnvelope -&gt; Job</code>) when Spring Message gives you everything you need? I am actually having a hard time understanding what the actual JSON for your object looks like given it&#39;s complexity which I don&#39;t think is justified. Perhaps you can post it as suggested by @JBNizer.  2. Why do you explicitly send message to Source.OUTPUT and then returning AppMessageEnvelope? Do you realize that you effectively sending two messages? You don&#39;t need to interact with Source in any explicit way."},{"owner":{"account_id":11047599,"reputation":140,"user_id":8113107,"display_name":"RaRa"},"score":0,"creation_date":1548567531,"post_id":53387516,"comment_id":95584053,"body_markdown":"As already suggested, the issue seems to be with `messageEnvelope.getMessageBody().toString()` which you are assuming will give a JSON string. (Error also points out the same, i.e. JSON property not starting with &quot;) Can you print this value and validate the same.\nAlso, you can use ObjectMapper to get a JSON string from `messageEnvelope.getMessageBody()` and then map it to the desired pojo.","body":"As already suggested, the issue seems to be with <code>messageEnvelope.getMessageBody().toString()</code> which you are assuming will give a JSON string. (Error also points out the same, i.e. JSON property not starting with &quot;) Can you print this value and validate the same. Also, you can use ObjectMapper to get a JSON string from <code>messageEnvelope.getMessageBody()</code> and then map it to the desired pojo."}],"answers":[{"tags":[],"owner":{"account_id":1781396,"reputation":6599,"user_id":1624035,"accept_rate":65,"display_name":"UdayKiran Pulipati"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1565705209,"creation_date":1565705209,"answer_id":57479513,"question_id":53387516,"body_markdown":"Use below json conversion to convert JSON to Model / Entity\r\n\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n\tJob job = objectMapper.convertValue(messageEnvelope.getMessageBody().toString(), Job.class);","title":"JsonParseException: Unexpected character (&#39;i&#39; (code 105)): was expecting double-quote","body":"<p>Use below json conversion to convert JSON to Model / Entity</p>\n\n<pre><code>ObjectMapper objectMapper = new ObjectMapper();\nJob job = objectMapper.convertValue(messageEnvelope.getMessageBody().toString(), Job.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15310186,"reputation":1,"user_id":11045708,"display_name":"krishna kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618056874,"creation_date":1618056874,"answer_id":67034256,"question_id":53387516,"body_markdown":"This may be funny error please copy your json and past into online json [formatter][1].\r\nif the validation wrong please rewrite the json manually or encode it.\r\n\r\nError cause: character encoding issue at time of copy from various sources\r\n \r\n\r\n\r\n  [1]: https://jsonformatter.curiousconcept.com/","title":"JsonParseException: Unexpected character (&#39;i&#39; (code 105)): was expecting double-quote","body":"<p>This may be funny error please copy your json and past into online json <a href=\"https://jsonformatter.curiousconcept.com/\" rel=\"nofollow noreferrer\">formatter</a>.\nif the validation wrong please rewrite the json manually or encode it.</p>\n<p>Error cause: character encoding issue at time of copy from various sources</p>\n"},{"tags":[],"owner":{"account_id":14284138,"reputation":1,"user_id":10317918,"display_name":"chad liu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676013308,"creation_date":1676013308,"answer_id":75407973,"question_id":53387516,"body_markdown":"Here the problem:\r\nJob job = objectMapper.readValue(messageEnvelope.getMessageBody().toString(), mapType);\r\nJust like this:\r\nJob job = objectMapper.readValue(objectMapper.writeValueAsString(messageEnvelope.getMessageBody()), mapType);\r\n\r\n\r\n\r\n","title":"JsonParseException: Unexpected character (&#39;i&#39; (code 105)): was expecting double-quote","body":"<p>Here the problem:\nJob job = objectMapper.readValue(messageEnvelope.getMessageBody().toString(), mapType);\nJust like this:\nJob job = objectMapper.readValue(objectMapper.writeValueAsString(messageEnvelope.getMessageBody()), mapType);</p>\n"}],"owner":{"account_id":4851105,"reputation":2446,"user_id":3913366,"accept_rate":79,"display_name":"Shubham A."},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18451,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1676013308,"creation_date":1542695807,"question_id":53387516,"body_markdown":"I am trying to integrate Spring Cloud streams and publishing a custom Java Object across services with RabbitMQ as broker. The object I am publishing looks like:\r\n\r\n    public class AppMessageEnvelope implements Serializable {\r\n      ...\r\n      private Object messageBody;\r\n      private Date sentAt = new Date();\r\n      ...\r\n\r\n      // setters and getters\r\n    }\r\nThis is just a wrapper object and the original object is put in `messageBody`. The object I am putting in `messageBody` looks like:\r\n\r\n    public class Job {\r\n        ...\r\n        private String message;\r\n        private Map&lt;MyEnum, String&gt; myMap;\r\n        ...\r\n    }\r\n\r\nNote that both `AppMessageEnvelope` and `Job` are in a different **model** project which is imported as a Maven dependency in the publisher and subscriber Spring Boot projects, so models are exactly the same.\r\n\r\nIn producer, I publish the object as:\r\n\r\n    @EnableBinding(Source.class)\r\n    public class JobDistributor {\r\n\r\n        private final Source jobQueue;\r\n\r\n        @Autowired\r\n        public JobDistributor(Source jobQueue) {\r\n            this.jobQueue = jobQueue;\r\n        }\r\n\r\n        public AppMessageEnvelope publishJob(AppMessageEnvelope message) {\r\n            LOG.info(&quot;Sending message: {}.&quot;, message);\r\n            jobQueue.output().send(MessageBuilder.withPayload(message).build());\r\n            return message;\r\n        }\r\n    }\r\nIn consumer, I get the message as:\r\n\r\n    @Component\r\n    @EnableBinding(Sink.class)\r\n    public class JobConsumer {\r\n\r\n        private final JobManager jobManager;\r\n        private final ObjectMapper objectMapper;\r\n\r\n        @Autowired\r\n        public JobConsumer(\r\n                JobManager jobManager, ObjectMapper objectMapper) {\r\n            this.jobManager = jobManager;\r\n            this.objectMapper = objectMapper;\r\n        }\r\n\r\n        @StreamListener(target = Sink.INPUT)\r\n        public void processData(AppMessageEnvelope messageEnvelope) {\r\n            LOG.info(&quot;Envelope received: {}.&quot;, messageEnvelope);\r\n\r\n            try {\r\n                TypeReference&lt;Job&gt; mapType = new TypeReference&lt;Job&gt;() {};\r\n                Job job = objectMapper.readValue(messageEnvelope.getMessageBody().toString(), mapType);\r\n                jobManager.processRequest(job);\r\n            } catch (Exception ex) {\r\n                LOG.error(&quot;Couldn&#39;t convert to correct object for processing: {}.&quot;, ex);\r\n            }\r\n        }\r\n    }\r\nI try to use `TypeReference` to convert the internal object into a correct object but I get an error as:\r\n\r\n    JobConsumer - Couldn&#39;t convert to correct object for processing: {}.\r\n        com.fasterxml.jackson.core.JsonParseException: Unexpected character (&#39;i&#39; (code 105)): was expecting double-quote to start field name\r\n        at [Source: (StringReader); line: 1, column: 3]\r\n\r\nBefore the message is converted, I log it:\r\n\r\n    JobConsumer - Envelope received: AppMessageEnvelope{..., messageBody={id=5bf3a7302dbe9c7cf9927c60, jobId=8c0bfcb0b21248e694b5cd52337a1f9e, submittedAt=2018-11-20T06:18:24+0000, lastUpdatedOn=null, message=null, ..., fileContentMap={FILE_BYTES=JVBERi0xLjUKJb/3ov}}, sentAt=Tue Nov 20 11:48:24 IST 2018}\r\n\r\nI tried configuring `ObjectMapper` as:\r\n\r\n    @Autowired\r\n    private ObjectMapper objectMapper() {\r\n        JsonFactory factory = new JsonFactory();\r\n        factory.enable(JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES);\r\n        return new ObjectMapper(factory);\r\n    }\r\nI tried enabling unquoting fields with this too:\r\n\r\n    objectMapper.configure(JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES, true);\r\n\r\nI tried solutions provided by [this blog][1] and some similar SO problem but nothing solved. What am I missing?\r\n\r\n  [1]: https://www.mkyong.com/java/jackson-was-expecting-double-quote-to-start-field-name/","title":"JsonParseException: Unexpected character (&#39;i&#39; (code 105)): was expecting double-quote","body":"<p>I am trying to integrate Spring Cloud streams and publishing a custom Java Object across services with RabbitMQ as broker. The object I am publishing looks like:</p>\n\n<pre><code>public class AppMessageEnvelope implements Serializable {\n  ...\n  private Object messageBody;\n  private Date sentAt = new Date();\n  ...\n\n  // setters and getters\n}\n</code></pre>\n\n<p>This is just a wrapper object and the original object is put in <code>messageBody</code>. The object I am putting in <code>messageBody</code> looks like:</p>\n\n<pre><code>public class Job {\n    ...\n    private String message;\n    private Map&lt;MyEnum, String&gt; myMap;\n    ...\n}\n</code></pre>\n\n<p>Note that both <code>AppMessageEnvelope</code> and <code>Job</code> are in a different <strong>model</strong> project which is imported as a Maven dependency in the publisher and subscriber Spring Boot projects, so models are exactly the same.</p>\n\n<p>In producer, I publish the object as:</p>\n\n<pre><code>@EnableBinding(Source.class)\npublic class JobDistributor {\n\n    private final Source jobQueue;\n\n    @Autowired\n    public JobDistributor(Source jobQueue) {\n        this.jobQueue = jobQueue;\n    }\n\n    public AppMessageEnvelope publishJob(AppMessageEnvelope message) {\n        LOG.info(\"Sending message: {}.\", message);\n        jobQueue.output().send(MessageBuilder.withPayload(message).build());\n        return message;\n    }\n}\n</code></pre>\n\n<p>In consumer, I get the message as:</p>\n\n<pre><code>@Component\n@EnableBinding(Sink.class)\npublic class JobConsumer {\n\n    private final JobManager jobManager;\n    private final ObjectMapper objectMapper;\n\n    @Autowired\n    public JobConsumer(\n            JobManager jobManager, ObjectMapper objectMapper) {\n        this.jobManager = jobManager;\n        this.objectMapper = objectMapper;\n    }\n\n    @StreamListener(target = Sink.INPUT)\n    public void processData(AppMessageEnvelope messageEnvelope) {\n        LOG.info(\"Envelope received: {}.\", messageEnvelope);\n\n        try {\n            TypeReference&lt;Job&gt; mapType = new TypeReference&lt;Job&gt;() {};\n            Job job = objectMapper.readValue(messageEnvelope.getMessageBody().toString(), mapType);\n            jobManager.processRequest(job);\n        } catch (Exception ex) {\n            LOG.error(\"Couldn't convert to correct object for processing: {}.\", ex);\n        }\n    }\n}\n</code></pre>\n\n<p>I try to use <code>TypeReference</code> to convert the internal object into a correct object but I get an error as:</p>\n\n<pre><code>JobConsumer - Couldn't convert to correct object for processing: {}.\n    com.fasterxml.jackson.core.JsonParseException: Unexpected character ('i' (code 105)): was expecting double-quote to start field name\n    at [Source: (StringReader); line: 1, column: 3]\n</code></pre>\n\n<p>Before the message is converted, I log it:</p>\n\n<pre><code>JobConsumer - Envelope received: AppMessageEnvelope{..., messageBody={id=5bf3a7302dbe9c7cf9927c60, jobId=8c0bfcb0b21248e694b5cd52337a1f9e, submittedAt=2018-11-20T06:18:24+0000, lastUpdatedOn=null, message=null, ..., fileContentMap={FILE_BYTES=JVBERi0xLjUKJb/3ov}}, sentAt=Tue Nov 20 11:48:24 IST 2018}\n</code></pre>\n\n<p>I tried configuring <code>ObjectMapper</code> as:</p>\n\n<pre><code>@Autowired\nprivate ObjectMapper objectMapper() {\n    JsonFactory factory = new JsonFactory();\n    factory.enable(JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES);\n    return new ObjectMapper(factory);\n}\n</code></pre>\n\n<p>I tried enabling unquoting fields with this too:</p>\n\n<pre><code>objectMapper.configure(JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES, true);\n</code></pre>\n\n<p>I tried solutions provided by <a href=\"https://www.mkyong.com/java/jackson-was-expecting-double-quote-to-start-field-name/\" rel=\"nofollow noreferrer\">this blog</a> and some similar SO problem but nothing solved. What am I missing?</p>\n"},{"tags":["java","spring","spring-boot","spring-boot-test","component-scan"],"comments":[{"owner":{"account_id":11512222,"reputation":87,"user_id":8436642,"display_name":"Nico S."},"score":0,"creation_date":1675962574,"post_id":75402029,"comment_id":133045296,"body_markdown":"Is the bean part of a component u scanned?","body":"Is the bean part of a component u scanned?"},{"owner":{"account_id":222726,"reputation":3846,"user_id":481528,"accept_rate":67,"display_name":"selalerer"},"score":0,"creation_date":1675972926,"post_id":75402029,"comment_id":133048422,"body_markdown":"@NicoS. Do you mean a dependency of a component I scan or a return value of a `@Bean` method?","body":"@NicoS. Do you mean a dependency of a component I scan or a return value of a <code>@Bean</code> method?"},{"owner":{"account_id":11512222,"reputation":87,"user_id":8436642,"display_name":"Nico S."},"score":0,"creation_date":1676005889,"post_id":75402029,"comment_id":133054079,"body_markdown":"i mean a dependency of a component you scan. Do you use intellij ultimate ?","body":"i mean a dependency of a component you scan. Do you use intellij ultimate ?"},{"owner":{"account_id":222726,"reputation":3846,"user_id":481528,"accept_rate":67,"display_name":"selalerer"},"score":0,"creation_date":1676013155,"post_id":75402029,"comment_id":133055106,"body_markdown":"@NicoS. As far as I know, it is not a dependency of any of my components (but maybe I&#39;m and there is some path to it). If it is a dependency of a component I would expect to see a missing dependency error and not that it will just try to create it","body":"@NicoS. As far as I know, it is not a dependency of any of my components (but maybe I&#39;m and there is some path to it). If it is a dependency of a component I would expect to see a missing dependency error and not that it will just try to create it"}],"owner":{"account_id":222726,"reputation":3846,"user_id":481528,"accept_rate":67,"display_name":"selalerer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1676013223,"creation_date":1675962242,"question_id":75402029,"body_markdown":"I have a `@SpringBootTest` that use a `@Configuration` class with `@ComponentScan`:\r\n```\r\n@SpringBootTest(classes = BaseTest.Conf.class)\r\npublic class SocGenTest extends BaseTest {\r\n```\r\nAnd the configuration class:\r\n```\r\npublic class BaseTest {\r\n\r\n    @Configuration\r\n    @ComponentScan(basePackages = {\r\n            &quot;com.capitolis.novation&quot;,\r\n            &quot;com.capitolis.generated&quot;,\r\n            &quot;com.capitolis.trade&quot;\r\n    },\r\n    excludeFilters = {\r\n            @ComponentScan.Filter(type = FilterType.REGEX, pattern = &quot;com.capitolis.trade.resolve.clients.*&quot;)\r\n    })\r\n    public static class Conf {\r\n\r\n    }\r\n```\r\nBut when I run the test it complains about a missing dependency for a component that is not in one of the scanned packages and shouldn&#39;t be created at all:\r\n```\r\nUnsatisfiedDependencyException: Error creating bean with name &#39;pageReplacerModelConverter&#39;\r\n```\r\nThis class is in another package:\r\n```\r\npackage com.capitolis.springboot.openapi;\r\n\r\n@Component\r\npublic class PageReplacerModelConverter extends AbstractModelConverter {\r\n```\r\n\r\n* Anybody knows of a reason this component is being created?\r\n* Is there some other thing in my project that may cause my test to try load things from outside of the packages I defined?\r\n* Is there a way to turn on tracing of the component scan so I can maybe understand why it is trying to create this component?\r\n\r\nThank you","title":"Why does SpringBootTest ComponentScan finds a bean outside of the basePackages and tries to create it?","body":"<p>I have a <code>@SpringBootTest</code> that use a <code>@Configuration</code> class with <code>@ComponentScan</code>:</p>\n<pre><code>@SpringBootTest(classes = BaseTest.Conf.class)\npublic class SocGenTest extends BaseTest {\n</code></pre>\n<p>And the configuration class:</p>\n<pre><code>public class BaseTest {\n\n    @Configuration\n    @ComponentScan(basePackages = {\n            &quot;com.capitolis.novation&quot;,\n            &quot;com.capitolis.generated&quot;,\n            &quot;com.capitolis.trade&quot;\n    },\n    excludeFilters = {\n            @ComponentScan.Filter(type = FilterType.REGEX, pattern = &quot;com.capitolis.trade.resolve.clients.*&quot;)\n    })\n    public static class Conf {\n\n    }\n</code></pre>\n<p>But when I run the test it complains about a missing dependency for a component that is not in one of the scanned packages and shouldn't be created at all:</p>\n<pre><code>UnsatisfiedDependencyException: Error creating bean with name 'pageReplacerModelConverter'\n</code></pre>\n<p>This class is in another package:</p>\n<pre><code>package com.capitolis.springboot.openapi;\n\n@Component\npublic class PageReplacerModelConverter extends AbstractModelConverter {\n</code></pre>\n<ul>\n<li>Anybody knows of a reason this component is being created?</li>\n<li>Is there some other thing in my project that may cause my test to try load things from outside of the packages I defined?</li>\n<li>Is there a way to turn on tracing of the component scan so I can maybe understand why it is trying to create this component?</li>\n</ul>\n<p>Thank you</p>\n"},{"tags":["java","spring-boot","state-machine"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1676014294,"post_id":75407927,"comment_id":133055344,"body_markdown":"You need to show the full stack trace of the exception and how you create your service.","body":"You need to show the full stack trace of the exception and how you create your service."}],"owner":{"account_id":13474613,"reputation":157,"user_id":9722013,"display_name":"Divya Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1676029928,"answer_count":0,"score":0,"last_activity_date":1676012954,"creation_date":1676012954,"question_id":75407927,"body_markdown":"I am trying to implement stateMachine using java spring boot,I am using this to perform change the status, I haven&#39;t implemented any logic as of now all i want is that stateMachine should start, but i am getting following error when i hit the patch api.\r\n\r\nError:\r\n \r\n\r\n    Cannot invoke &quot;org.springframework.statemachine.config.StateMachineFactory.getStateMachine(String)&quot; because &quot;this.stateMachineFactory&quot; is null\r\n\r\ncontroller file:\r\n\r\n     @PatchMapping(value = &quot;/updateStatus&quot;, consumes = MediaType.APPLICATION_JSON_VALUE,produces = MediaType.APPLICATION_JSON_VALUE)\r\n    public ResponseEntity&lt;String&gt; updateOrderStatus(@Valid @RequestBody OrderStatusUpdateDTO orderStatusUpdateDTO) throws Exception  {\r\n\t\t\treturn ResponseEntity.ok().body(orderService.updateOrderStatus1(orderStatusUpdateDTO));\r\n\r\n    }\r\n\r\nService implementation\r\n\r\n       private StateMachineFactory  &lt;OrderStates, OrderEvents&gt; stateMachineFactory;\r\n\r\n\r\n       public StateMachine&lt;OrderStates,OrderEvents&gt; updateOrderStatus1(OrderStatusUpdateDTO orderDto){\r\n        var stateMachine =  stateMachineFactory.getStateMachine(orderDto.getOrderUuid().toString());\r\n        stateMachine.start();\r\n        return stateMachine;\r\n    }\r\n\r\nSateMachine config class\r\n\r\n    @Configuration\r\n    @EnableStateMachine\r\n    public class SimpleStateMachineConfiguration extends \r\n      StateMachineConfigurerAdapter&lt;OrderStates, OrderEvents&gt; {\r\n\r\n    @Override\r\n    public void configure(StateMachineStateConfigurer&lt;OrderStates, OrderEvents&gt; states) throws Exception {\r\n        states.withStates()\r\n                .initial(OrderStates.NEW)\r\n                .state(OrderStates.SCHEDULED)\r\n                .state(OrderStates.DISPATCHED)\r\n                .end(OrderStates.FULFILLED)\r\n                .end(OrderStates.CANCELLED   );\r\n    }\r\n\r\n    @Override\r\n    public void configure(StateMachineTransitionConfigurer&lt;OrderStates,\r\n                OrderEvents&gt; transitions) throws Exception {\r\n        transitions\r\n                .withExternal()\r\n                .source(OrderStates.NEW)\r\n                .target(OrderStates.SCHEDULED)\r\n                .event(OrderEvents.SCHEDULED)\r\n                .guard(ctx -&gt; {\r\n                    System.out.println(&quot;This PAID handler where we can perform some logging&quot;);\r\n                    return true;\r\n                })\r\n                .and()\r\n                .withExternal()\r\n                .source(OrderStates.DISPATCHED)\r\n                .target(OrderStates.FULFILLED)\r\n                .event(OrderEvents.FULFILLED)\r\n                .action(ctx -&gt; {\r\n                    System.out.println(&quot;This SUBMITTED handler where we can perform some logging&quot;);\r\n                });\r\n    }}\r\n\r\n\r\n\r\n\r\n\r\n","title":"Error: Cannot invok org.springframework.statemachine.config.StateMachineFactory.getStateMachine(String)","body":"<p>I am trying to implement stateMachine using java spring boot,I am using this to perform change the status, I haven't implemented any logic as of now all i want is that stateMachine should start, but i am getting following error when i hit the patch api.</p>\n<p>Error:</p>\n<pre><code>Cannot invoke &quot;org.springframework.statemachine.config.StateMachineFactory.getStateMachine(String)&quot; because &quot;this.stateMachineFactory&quot; is null\n</code></pre>\n<p>controller file:</p>\n<pre><code> @PatchMapping(value = &quot;/updateStatus&quot;, consumes = MediaType.APPLICATION_JSON_VALUE,produces = MediaType.APPLICATION_JSON_VALUE)\npublic ResponseEntity&lt;String&gt; updateOrderStatus(@Valid @RequestBody OrderStatusUpdateDTO orderStatusUpdateDTO) throws Exception  {\n        return ResponseEntity.ok().body(orderService.updateOrderStatus1(orderStatusUpdateDTO));\n\n}\n</code></pre>\n<p>Service implementation</p>\n<pre><code>   private StateMachineFactory  &lt;OrderStates, OrderEvents&gt; stateMachineFactory;\n\n\n   public StateMachine&lt;OrderStates,OrderEvents&gt; updateOrderStatus1(OrderStatusUpdateDTO orderDto){\n    var stateMachine =  stateMachineFactory.getStateMachine(orderDto.getOrderUuid().toString());\n    stateMachine.start();\n    return stateMachine;\n}\n</code></pre>\n<p>SateMachine config class</p>\n<pre><code>@Configuration\n@EnableStateMachine\npublic class SimpleStateMachineConfiguration extends \n  StateMachineConfigurerAdapter&lt;OrderStates, OrderEvents&gt; {\n\n@Override\npublic void configure(StateMachineStateConfigurer&lt;OrderStates, OrderEvents&gt; states) throws Exception {\n    states.withStates()\n            .initial(OrderStates.NEW)\n            .state(OrderStates.SCHEDULED)\n            .state(OrderStates.DISPATCHED)\n            .end(OrderStates.FULFILLED)\n            .end(OrderStates.CANCELLED   );\n}\n\n@Override\npublic void configure(StateMachineTransitionConfigurer&lt;OrderStates,\n            OrderEvents&gt; transitions) throws Exception {\n    transitions\n            .withExternal()\n            .source(OrderStates.NEW)\n            .target(OrderStates.SCHEDULED)\n            .event(OrderEvents.SCHEDULED)\n            .guard(ctx -&gt; {\n                System.out.println(&quot;This PAID handler where we can perform some logging&quot;);\n                return true;\n            })\n            .and()\n            .withExternal()\n            .source(OrderStates.DISPATCHED)\n            .target(OrderStates.FULFILLED)\n            .event(OrderEvents.FULFILLED)\n            .action(ctx -&gt; {\n                System.out.println(&quot;This SUBMITTED handler where we can perform some logging&quot;);\n            });\n}}\n</code></pre>\n"},{"tags":["java","jfreechart"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1675949705,"post_id":75398095,"comment_id":133040322,"body_markdown":"Try `setRange()`, for [example](https://stackoverflow.com/a/67230096/230513).","body":"Try <code>setRange()</code>, for <a href=\"https://stackoverflow.com/a/67230096/230513\">example</a>."},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1675977780,"post_id":75398095,"comment_id":133049711,"body_markdown":"But what would the range be?","body":"But what would the range be?"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1675982666,"post_id":75398095,"comment_id":133050791,"body_markdown":"The range you choose, typically based on values in your dataset; if you have trouble, please [edit] your question to include a [mre] that shows your revised approach with a small subset of data.","body":"The range you choose, typically based on values in your dataset; if you have trouble, please <a href=\"https://stackoverflow.com/posts/75398095/edit\">edit</a> your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that shows your revised approach with a small subset of data."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1676036673,"post_id":75398095,"comment_id":133061717,"body_markdown":"I&#39;m not sure where your code goes awry; the example cited also uses dates; I don&#39;t see your sample data or call to `setRange()`.","body":"I&#39;m not sure where your code goes awry; the example cited also uses dates; I don&#39;t see your sample data or call to <code>setRange()</code>."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1679007226,"post_id":75398095,"comment_id":133648442,"body_markdown":"A related example is seen [here](https://stackoverflow.com/q/75726661/230513).","body":"A related example is seen <a href=\"https://stackoverflow.com/q/75726661/230513\">here</a>."}],"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676012743,"creation_date":1675942940,"question_id":75398095,"body_markdown":"I have an app and I somehow successfully managed to get a candlestick chart visible. However, once the chart is displayed, it shows all the candles (can be several hundred) which causes the chart to be very tiny and zoomed out. What I actually want is, the chart to be zoomed into the range of the last N candles so it looks more visible to the eye.\r\n\r\nHere is how my charts look once they get created\r\n[![enter image description here][1]][1]\r\n\r\nI tried working with setRange, the Range on the Date Axis returns values in the format of [09.02.2023, 23:21:02 --&gt; 10.02.2023, 08:29:56]\r\n\r\nI dont seem to get how to make the chart like zoom in to a range of for example range.length-100 -&gt; range.length. Whatever I tried, I always end up somewhere randomly without any data really shown.\r\n\r\nIs there a way to define the last n entries on the range and set the dateAxis to start showing this range?\r\n \r\nWhat I actually want to see after creation is something like this\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TvMDU.png\r\n  [2]: https://i.stack.imgur.com/W7wcQ.png\r\n\r\n     private  void displayChart(String title, String quoteMarket, BarSeries series) {\r\n        OHLCDataset dataSet = createOHLCDataset(title,series);\r\n        JFreeChart chart = ChartFactory.createCandlestickChart(\r\n              title,\r\n                &quot;Time&quot;,\r\n                quoteMarket,\r\n                dataSet,\r\n                false);\r\n        chart.setBackgroundPaint(new Color(28, 39, 57));\r\n        chart.setBorderVisible(false);\r\n        chart.getTitle().setPaint(Color.WHITE);\r\n        // Candlestick rendering\r\n        CandlestickRenderer renderer = new CandlestickRenderer();\r\n        renderer.setAutoWidthMethod(CandlestickRenderer.WIDTHMETHOD_INTERVALDATA);\r\n        renderer.setUpPaint(new Color(0, 214, 110));\r\n        renderer.setDownPaint(new Color(196, 19, 30));\r\n        renderer.setSeriesPaint(0,new Color(211, 211, 211));\r\n        renderer.setCandleWidth(3.0);\r\n        XYPlot plot = chart.getXYPlot();\r\n        plot.setRenderer(renderer);\r\n        plot.setRangeGridlinePaint(Color.lightGray);\r\n        plot.setBackgroundPaint(new Color(28, 39, 57));\r\n        plot.setDomainGridlinesVisible( false );\r\n        plot.setRangeGridlinesVisible( false );\r\n\r\n        NumberAxis numberAxis = (NumberAxis) plot.getRangeAxis();\r\n        numberAxis.setAutoRangeIncludesZero(false);\r\n        numberAxis.setLabelPaint(Color.WHITE);\r\n        numberAxis.setTickLabelPaint(Color.WHITE);\r\n        numberAxis.setAutoRangeIncludesZero(false);\r\n\r\n\r\n        DateAxis dateAxis = (DateAxis) plot.getDomainAxis();\r\n\r\n        dateAxis.setAutoRange(true);\r\n        dateAxis.setLabelPaint(Color.WHITE);\r\n        dateAxis.setTickLabelPaint(Color.WHITE);\r\n        dateAxis.setTickMarkPosition(DateTickMarkPosition.MIDDLE);\r\n        plot.setDatasetRenderingOrder(DatasetRenderingOrder.FORWARD);\r\n        ChartPanel panel = new ChartPanel(chart);\r\n\r\n        panel.setMouseWheelEnabled(true);\r\n        panel.setMouseZoomable(true);\r\n        panel.setRangeZoomable(true);\r\n        panel.setDomainZoomable(true);\r\n        this.add(panel);\r\n\r\n        System.out.println(dateAxis.getRange());\r\n    }","title":"JFreeChart Candlestick zoom into last n candles on creation","body":"<p>I have an app and I somehow successfully managed to get a candlestick chart visible. However, once the chart is displayed, it shows all the candles (can be several hundred) which causes the chart to be very tiny and zoomed out. What I actually want is, the chart to be zoomed into the range of the last N candles so it looks more visible to the eye.</p>\n<p>Here is how my charts look once they get created\n<a href=\"https://i.stack.imgur.com/TvMDU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TvMDU.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried working with setRange, the Range on the Date Axis returns values in the format of [09.02.2023, 23:21:02 --&gt; 10.02.2023, 08:29:56]</p>\n<p>I dont seem to get how to make the chart like zoom in to a range of for example range.length-100 -&gt; range.length. Whatever I tried, I always end up somewhere randomly without any data really shown.</p>\n<p>Is there a way to define the last n entries on the range and set the dateAxis to start showing this range?</p>\n<p>What I actually want to see after creation is something like this\n<a href=\"https://i.stack.imgur.com/W7wcQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W7wcQ.png\" alt=\"enter image description here\" /></a></p>\n<pre><code> private  void displayChart(String title, String quoteMarket, BarSeries series) {\n    OHLCDataset dataSet = createOHLCDataset(title,series);\n    JFreeChart chart = ChartFactory.createCandlestickChart(\n          title,\n            &quot;Time&quot;,\n            quoteMarket,\n            dataSet,\n            false);\n    chart.setBackgroundPaint(new Color(28, 39, 57));\n    chart.setBorderVisible(false);\n    chart.getTitle().setPaint(Color.WHITE);\n    // Candlestick rendering\n    CandlestickRenderer renderer = new CandlestickRenderer();\n    renderer.setAutoWidthMethod(CandlestickRenderer.WIDTHMETHOD_INTERVALDATA);\n    renderer.setUpPaint(new Color(0, 214, 110));\n    renderer.setDownPaint(new Color(196, 19, 30));\n    renderer.setSeriesPaint(0,new Color(211, 211, 211));\n    renderer.setCandleWidth(3.0);\n    XYPlot plot = chart.getXYPlot();\n    plot.setRenderer(renderer);\n    plot.setRangeGridlinePaint(Color.lightGray);\n    plot.setBackgroundPaint(new Color(28, 39, 57));\n    plot.setDomainGridlinesVisible( false );\n    plot.setRangeGridlinesVisible( false );\n\n    NumberAxis numberAxis = (NumberAxis) plot.getRangeAxis();\n    numberAxis.setAutoRangeIncludesZero(false);\n    numberAxis.setLabelPaint(Color.WHITE);\n    numberAxis.setTickLabelPaint(Color.WHITE);\n    numberAxis.setAutoRangeIncludesZero(false);\n\n\n    DateAxis dateAxis = (DateAxis) plot.getDomainAxis();\n\n    dateAxis.setAutoRange(true);\n    dateAxis.setLabelPaint(Color.WHITE);\n    dateAxis.setTickLabelPaint(Color.WHITE);\n    dateAxis.setTickMarkPosition(DateTickMarkPosition.MIDDLE);\n    plot.setDatasetRenderingOrder(DatasetRenderingOrder.FORWARD);\n    ChartPanel panel = new ChartPanel(chart);\n\n    panel.setMouseWheelEnabled(true);\n    panel.setMouseZoomable(true);\n    panel.setRangeZoomable(true);\n    panel.setDomainZoomable(true);\n    this.add(panel);\n\n    System.out.println(dateAxis.getRange());\n}\n</code></pre>\n"},{"tags":["java","hibernate","jpa","spring-data","spring-data-jpa"],"comments":[{"owner":{"account_id":4667026,"reputation":10199,"user_id":3779853,"accept_rate":85,"display_name":"phil294"},"score":4,"creation_date":1533649815,"post_id":22688402,"comment_id":90417425,"body_markdown":"did you ever find a solution to this? same problem in very latest spring version also. according to mysql log table, no deletion statement is ever issued, no error message available.","body":"did you ever find a solution to this? same problem in very latest spring version also. according to mysql log table, no deletion statement is ever issued, no error message available."},{"owner":{"account_id":1910474,"reputation":1273,"user_id":1724420,"display_name":"userspaced"},"score":1,"creation_date":1533661479,"post_id":22688402,"comment_id":90424821,"body_markdown":"Unfortunately no. I no longer had a need to do it here anymore and the other places I had to do it seemed to work fine. I don&#39;t know what was so special about this case.","body":"Unfortunately no. I no longer had a need to do it here anymore and the other places I had to do it seemed to work fine. I don&#39;t know what was so special about this case."},{"owner":{"account_id":4095196,"reputation":1305,"user_id":3362191,"accept_rate":70,"display_name":"Taugenichts"},"score":0,"creation_date":1563226057,"post_id":22688402,"comment_id":100622127,"body_markdown":"you should consider posting that @Modifying delete statement as an answer. It was the only way I could resolve it as well. I upvoted the question, but I&#39;d upvote that answer as well.","body":"you should consider posting that @Modifying delete statement as an answer. It was the only way I could resolve it as well. I upvoted the question, but I&#39;d upvote that answer as well."},{"owner":{"account_id":9143806,"reputation":324,"user_id":6800811,"display_name":"Brunaldo"},"score":2,"creation_date":1592927614,"post_id":22688402,"comment_id":110597689,"body_markdown":"overriding the delete method(s) solved it for me as well, not sure why this happened (upgrading from spring boot 2.1.5 to 2.1.6)","body":"overriding the delete method(s) solved it for me as well, not sure why this happened (upgrading from spring boot 2.1.5 to 2.1.6)"},{"owner":{"account_id":4458992,"reputation":1216,"user_id":3628421,"accept_rate":67,"display_name":"JRA_TLL"},"score":1,"creation_date":1623055194,"post_id":22688402,"comment_id":119959423,"body_markdown":"Same problem here on a most simple entity using no relations. save then delete in one transaction, e.g. test method works no longer with Spring 2.1.6.\nWe use Spring 2.4.1 now, but downgrade spring-data to 2.1.8.RELEASE to overcome it. Hibernate remains unchanged 5.4.25.","body":"Same problem here on a most simple entity using no relations. save then delete in one transaction, e.g. test method works no longer with Spring 2.1.6. We use Spring 2.4.1 now, but downgrade spring-data to 2.1.8.RELEASE to overcome it. Hibernate remains unchanged 5.4.25."}],"answers":[{"tags":[],"owner":{"account_id":2760657,"reputation":1996,"user_id":2377629,"display_name":"Bitman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1395927449,"creation_date":1395926938,"answer_id":22689134,"question_id":22688402,"body_markdown":"Your initial value for id is 500. That means your id starts with 500\r\n\r\n    @SequenceGenerator(name = &quot;seqToken&quot;, sequenceName = &quot;SEQ_TOKEN&quot;,\r\n    initialValue = 500, allocationSize = 1)\r\n\r\n\r\nAnd you select one item with id 1 here\r\n\r\n     Token deleted = tokenRepository.findOne(1L);\r\n\r\nSo check your database to clarify that","title":"Delete Not Working with JpaRepository","body":"<p>Your initial value for id is 500. That means your id starts with 500</p>\n\n<pre><code>@SequenceGenerator(name = \"seqToken\", sequenceName = \"SEQ_TOKEN\",\ninitialValue = 500, allocationSize = 1)\n</code></pre>\n\n<p>And you select one item with id 1 here</p>\n\n<pre><code> Token deleted = tokenRepository.findOne(1L);\n</code></pre>\n\n<p>So check your database to clarify that</p>\n"},{"tags":[],"owner":{"account_id":1957494,"reputation":717,"user_id":1760142,"accept_rate":43,"display_name":"Davi Arimateia"},"down_vote_count":0,"up_vote_count":49,"is_accepted":false,"score":49,"last_activity_date":1421276268,"creation_date":1421276268,"answer_id":27954027,"question_id":22688402,"body_markdown":"I had the same problem\r\n\r\nPerhaps your UserAccount entity has an @OneToMany with Cascade on some attribute.\r\n\r\nI&#39;ve just remove the cascade, than it could persist when deleting...\r\n","title":"Delete Not Working with JpaRepository","body":"<p>I had the same problem</p>\n\n<p>Perhaps your UserAccount entity has an @OneToMany with Cascade on some attribute.</p>\n\n<p>I've just remove the cascade, than it could persist when deleting...</p>\n"},{"tags":[],"owner":{"account_id":1354657,"reputation":3826,"user_id":1293320,"accept_rate":80,"display_name":"Lucas Holt"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1431641658,"creation_date":1431641658,"answer_id":30248348,"question_id":22688402,"body_markdown":"I just went through this too. In my case, I had to make the child table have a nullable foreign key field and then remove the parent from the relationship by setting null, then calling save and delete and flush. \r\n\r\nI didn&#39;t see a delete in the log or any exception prior to doing this. ","title":"Delete Not Working with JpaRepository","body":"<p>I just went through this too. In my case, I had to make the child table have a nullable foreign key field and then remove the parent from the relationship by setting null, then calling save and delete and flush. </p>\n\n<p>I didn't see a delete in the log or any exception prior to doing this. </p>\n"},{"tags":[],"owner":{"account_id":3526599,"reputation":670,"user_id":2947505,"display_name":"Eruvanos"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1462370555,"creation_date":1462370555,"answer_id":37030089,"question_id":22688402,"body_markdown":"If you use an newer version of Spring Data, you could use deleteBy syntax...so you are able to remove one of your annotations :P\r\n\r\nthe next thing is, that the behaviour is already tract by a Jira ticket:\r\nhttps://jira.spring.io/browse/DATAJPA-727\r\n\r\n\r\n\r\n","title":"Delete Not Working with JpaRepository","body":"<p>If you use an newer version of Spring Data, you could use deleteBy syntax...so you are able to remove one of your annotations :P</p>\n\n<p>the next thing is, that the behaviour is already tract by a Jira ticket:\n<a href=\"https://jira.spring.io/browse/DATAJPA-727\" rel=\"nofollow\">https://jira.spring.io/browse/DATAJPA-727</a></p>\n"},{"tags":[],"owner":{"account_id":1749061,"reputation":559,"user_id":1598592,"accept_rate":60,"display_name":"Taimur"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1504712257,"creation_date":1488987541,"answer_id":42675619,"question_id":22688402,"body_markdown":"You need to add PreRemove function ,in the class where you have many object as attribute e.g in Education Class which have relation with UserProfile\r\nEducation.java\r\n\t\r\n\r\n    private Set&lt;UserProfile&gt; userProfiles = new HashSet&lt;UserProfile&gt;(0);\r\n\r\n\t@ManyToMany(fetch = FetchType.EAGER, mappedBy = &quot;educations&quot;)\r\n\tpublic Set&lt;UserProfile&gt; getUserProfiles() {\r\n\t\treturn this.userProfiles;\r\n\t}\r\n\r\n\t@PreRemove\r\n\tprivate void removeEducationFromUsersProfile() {\r\n\t    for (UsersProfile u : usersProfiles) {\r\n\t    \tu.getEducationses().remove(this);\r\n\t    }\r\n\t}","title":"Delete Not Working with JpaRepository","body":"<p>You need to add PreRemove function ,in the class where you have many object as attribute e.g in Education Class which have relation with UserProfile\nEducation.java</p>\n\n<pre><code>private Set&lt;UserProfile&gt; userProfiles = new HashSet&lt;UserProfile&gt;(0);\n\n@ManyToMany(fetch = FetchType.EAGER, mappedBy = \"educations\")\npublic Set&lt;UserProfile&gt; getUserProfiles() {\n    return this.userProfiles;\n}\n\n@PreRemove\nprivate void removeEducationFromUsersProfile() {\n    for (UsersProfile u : usersProfiles) {\n        u.getEducationses().remove(this);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4271002,"reputation":2019,"user_id":3492805,"accept_rate":72,"display_name":"pzeszko"},"down_vote_count":0,"up_vote_count":100,"is_accepted":false,"score":100,"last_activity_date":1573898815,"creation_date":1537990971,"answer_id":52525033,"question_id":22688402,"body_markdown":"Most probably such behaviour occurs when you have bidirectional relationship and you&#39;re not synchronizing both sides WHILE having both parent and child persisted (attached to the current session). \r\n\r\nThis is tricky and I&#39;m gonna explain this with the following example.\r\n\r\n    @Entity\r\n    public class Parent {\r\n        @Id\r\n        @GeneratedValue(strategy = IDENTITY)\r\n        @Column(name = &quot;id&quot;, unique = true, nullable = false)\r\n        private Long id;\r\n\r\n        @OneToMany(cascade = CascadeType.PERSIST, mappedBy = &quot;parent&quot;)\r\n        private Set&lt;Child&gt; children = new HashSet&lt;&gt;(0);\r\n\r\n        public void setChildren(Set&lt;Child&gt; children) {\r\n            this.children = children;\r\n            this.children.forEach(child -&gt; child.setParent(this));\r\n        }\r\n    }\r\n    @Entity\r\n    public class Child {\r\n        @Id\r\n        @GeneratedValue(strategy = IDENTITY)\r\n        @Column(name = &quot;id&quot;, unique = true, nullable = false)\r\n        private Long id;\r\n\r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;parent_id&quot;)\r\n        private Parent parent;\r\n\r\n        public void setParent(Parent parent) {\r\n            this.parent = parent;\r\n        }\r\n    }\r\n\r\nLet&#39;s write a test (a transactional one btw)\r\n\r\n    public class ParentTest extends IntegrationTestSpec {\r\n\r\n        @Autowired\r\n        private ParentRepository parentRepository;\r\n\r\n        @Autowired\r\n        private ChildRepository childRepository;\r\n\r\n        @Autowired\r\n        private ParentFixture parentFixture;\r\n\r\n        @Test\r\n        public void test() {\r\n            Parent parent = new Parent();\r\n            Child child = new Child();\r\n\r\n            parent.setChildren(Set.of(child));\r\n            parentRepository.save(parent);\r\n\r\n            Child fetchedChild = childRepository.findAll().get(0);\r\n            childRepository.delete(fetchedChild);\r\n\r\n            assertEquals(1, parentRepository.count());\r\n            assertEquals(0, childRepository.count()); // FAILS!!! childRepostitory.counts() returns 1\r\n        }\r\n    }\r\n\r\nPretty simple test right? We&#39;re creating parent and child, save it to database, then fetching a child from database, removing it and at last making sure everything works just as expected. And it&#39;s not.\r\n\r\nThe delete here didn&#39;t work because we didn&#39;t synchronized the other part of relationship which is PERSISTED IN CURRENT SESSION. If Parent wasn&#39;t associated with current session our test would pass, i.e.\r\n\r\n    @Component\r\n    public class ParentFixture {\r\n        ...\r\n        @Transactional(propagation = Propagation.REQUIRES_NEW)\r\n        public void thereIsParentWithChildren() {\r\n            Parent parent = new Parent();\r\n            Child child = new Child();\r\n            parent.setChildren(Set.of(child));\r\n  \r\n            parentRepository.save(parent);\r\n        }\r\n    } \r\n\r\nand\r\n\r\n    @Test\r\n    public void test() {\r\n        parentFixture.thereIsParentWithChildren(); // we&#39;re saving Child and Parent in seperate transaction\r\n\r\n        Child fetchedChild = childRepository.findAll().get(0);\r\n        childRepository.delete(fetchedChild);\r\n\r\n        assertEquals(1, parentRepository.count());\r\n        assertEquals(0, childRepository.count()); // WORKS!\r\n    }\r\n\r\nOf course it only proves my point and explains the behaviour OP faced. The proper way to go is obviously keeping in sync both parts of relationship which means:\r\n\r\n    class Parent {\r\n        ...\r\n         public void dismissChild(Child child) {\r\n             this.children.remove(child);\r\n         }\r\n\r\n         public void dismissChildren() {\r\n            this.children.forEach(child -&gt; child.dismissParent()); // SYNCHRONIZING THE OTHER SIDE OF RELATIONSHIP \r\n            this.children.clear();\r\n         }\r\n\r\n    }\r\n\r\n    class Child {\r\n        ...\r\n        public void dismissParent() {\r\n            this.parent.dismissChild(this); //SYNCHRONIZING THE OTHER SIDE OF RELATIONSHIP\r\n            this.parent = null;\r\n        }\r\n    }\r\n\r\nObviously `@PreRemove` could be used here.\r\n","title":"Delete Not Working with JpaRepository","body":"<p>Most probably such behaviour occurs when you have bidirectional relationship and you're not synchronizing both sides WHILE having both parent and child persisted (attached to the current session). </p>\n\n<p>This is tricky and I'm gonna explain this with the following example.</p>\n\n<pre><code>@Entity\npublic class Parent {\n    @Id\n    @GeneratedValue(strategy = IDENTITY)\n    @Column(name = \"id\", unique = true, nullable = false)\n    private Long id;\n\n    @OneToMany(cascade = CascadeType.PERSIST, mappedBy = \"parent\")\n    private Set&lt;Child&gt; children = new HashSet&lt;&gt;(0);\n\n    public void setChildren(Set&lt;Child&gt; children) {\n        this.children = children;\n        this.children.forEach(child -&gt; child.setParent(this));\n    }\n}\n@Entity\npublic class Child {\n    @Id\n    @GeneratedValue(strategy = IDENTITY)\n    @Column(name = \"id\", unique = true, nullable = false)\n    private Long id;\n\n    @ManyToOne\n    @JoinColumn(name = \"parent_id\")\n    private Parent parent;\n\n    public void setParent(Parent parent) {\n        this.parent = parent;\n    }\n}\n</code></pre>\n\n<p>Let's write a test (a transactional one btw)</p>\n\n<pre><code>public class ParentTest extends IntegrationTestSpec {\n\n    @Autowired\n    private ParentRepository parentRepository;\n\n    @Autowired\n    private ChildRepository childRepository;\n\n    @Autowired\n    private ParentFixture parentFixture;\n\n    @Test\n    public void test() {\n        Parent parent = new Parent();\n        Child child = new Child();\n\n        parent.setChildren(Set.of(child));\n        parentRepository.save(parent);\n\n        Child fetchedChild = childRepository.findAll().get(0);\n        childRepository.delete(fetchedChild);\n\n        assertEquals(1, parentRepository.count());\n        assertEquals(0, childRepository.count()); // FAILS!!! childRepostitory.counts() returns 1\n    }\n}\n</code></pre>\n\n<p>Pretty simple test right? We're creating parent and child, save it to database, then fetching a child from database, removing it and at last making sure everything works just as expected. And it's not.</p>\n\n<p>The delete here didn't work because we didn't synchronized the other part of relationship which is PERSISTED IN CURRENT SESSION. If Parent wasn't associated with current session our test would pass, i.e.</p>\n\n<pre><code>@Component\npublic class ParentFixture {\n    ...\n    @Transactional(propagation = Propagation.REQUIRES_NEW)\n    public void thereIsParentWithChildren() {\n        Parent parent = new Parent();\n        Child child = new Child();\n        parent.setChildren(Set.of(child));\n\n        parentRepository.save(parent);\n    }\n} \n</code></pre>\n\n<p>and</p>\n\n<pre><code>@Test\npublic void test() {\n    parentFixture.thereIsParentWithChildren(); // we're saving Child and Parent in seperate transaction\n\n    Child fetchedChild = childRepository.findAll().get(0);\n    childRepository.delete(fetchedChild);\n\n    assertEquals(1, parentRepository.count());\n    assertEquals(0, childRepository.count()); // WORKS!\n}\n</code></pre>\n\n<p>Of course it only proves my point and explains the behaviour OP faced. The proper way to go is obviously keeping in sync both parts of relationship which means:</p>\n\n<pre><code>class Parent {\n    ...\n     public void dismissChild(Child child) {\n         this.children.remove(child);\n     }\n\n     public void dismissChildren() {\n        this.children.forEach(child -&gt; child.dismissParent()); // SYNCHRONIZING THE OTHER SIDE OF RELATIONSHIP \n        this.children.clear();\n     }\n\n}\n\nclass Child {\n    ...\n    public void dismissParent() {\n        this.parent.dismissChild(this); //SYNCHRONIZING THE OTHER SIDE OF RELATIONSHIP\n        this.parent = null;\n    }\n}\n</code></pre>\n\n<p>Obviously <code>@PreRemove</code> could be used here.</p>\n"},{"tags":[],"owner":{"account_id":4564521,"reputation":177,"user_id":3705883,"accept_rate":70,"display_name":"venge"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1542990742,"creation_date":1542990742,"answer_id":53450191,"question_id":22688402,"body_markdown":"One way is to use `cascade = CascadeType.ALL` like this in your userAccount service:\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL)\r\n    private List&lt;Token&gt; tokens;\r\n\r\nThen do something like the following (or similar logic)\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    @Transactional\r\n    public void deleteUserToken(Token token){\r\n        userAccount.getTokens().remove(token);\r\n    }\r\n\r\nNotice the `@Transactional` annotation. This will allow Spring (Hibernate) to know if you want to either persist, merge, or whatever it is you are doing in the method. AFAIK the example above *should* work as if you had no CascadeType set, and call `JPARepository.delete(token)`.\r\n","title":"Delete Not Working with JpaRepository","body":"<p>One way is to use <code>cascade = CascadeType.ALL</code> like this in your userAccount service:\n</p>\n\n<pre><code>@OneToMany(cascade = CascadeType.ALL)\nprivate List&lt;Token&gt; tokens;\n</code></pre>\n\n<p>Then do something like the following (or similar logic)\n</p>\n\n<pre><code>@Transactional\npublic void deleteUserToken(Token token){\n    userAccount.getTokens().remove(token);\n}\n</code></pre>\n\n<p>Notice the <code>@Transactional</code> annotation. This will allow Spring (Hibernate) to know if you want to either persist, merge, or whatever it is you are doing in the method. AFAIK the example above <em>should</em> work as if you had no CascadeType set, and call <code>JPARepository.delete(token)</code>.</p>\n"},{"tags":[],"owner":{"account_id":9628037,"reputation":43,"user_id":7147007,"display_name":"Federico Quaglia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1556609980,"creation_date":1556609980,"answer_id":55916042,"question_id":22688402,"body_markdown":"I&#39;ve the same problem, test is ok but on db row isn&#39;t deleted.\r\n\r\nhave you added the @Transactional annotation to method? for me this change makes it work ","title":"Delete Not Working with JpaRepository","body":"<p>I've the same problem, test is ok but on db row isn't deleted.</p>\n\n<p>have you added the @Transactional annotation to method? for me this change makes it work </p>\n"},{"tags":[],"owner":{"account_id":12114036,"reputation":471,"user_id":9950567,"display_name":"Sham Fiorin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565010169,"creation_date":1565010169,"answer_id":57359176,"question_id":22688402,"body_markdown":"In my case was the CASCADE.PERSIST, i changed for CASCADE.ALL, and made the change through the cascade (changing the father object).\r\n\r\n","title":"Delete Not Working with JpaRepository","body":"<p>In my case was the CASCADE.PERSIST, i changed for CASCADE.ALL, and made the change through the cascade (changing the father object).</p>\n"},{"tags":[],"owner":{"account_id":1058465,"reputation":353,"user_id":1060619,"display_name":"Dejan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1566888797,"creation_date":1566888797,"answer_id":57669102,"question_id":22688402,"body_markdown":"CascadeType.PERSIST and orphanRemoval=true doesn&#39;t work together.","title":"Delete Not Working with JpaRepository","body":"<p>CascadeType.PERSIST and orphanRemoval=true doesn't work together.</p>\n"},{"tags":[],"owner":{"account_id":95669,"reputation":3983,"user_id":260411,"accept_rate":88,"display_name":"Toribio"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1587048181,"creation_date":1587048181,"answer_id":61253080,"question_id":22688402,"body_markdown":"This is for anyone coming from Google on why their delete method is not working in **Spring Boot/Hibernate**, whether it&#39;s used from the JpaRepository/CrudRepository&#39;s `delete` or from a custom repository calling `session.delete(entity)` or `entityManager.remove(entity)`.\r\n\r\nI was upgrading from Spring Boot 1.5 to version 2.2.6 (and Hibernate 5.4.13) and had been using a custom configuration for `transactionManager`, something like this:\r\n\r\n    @Bean\r\n    public HibernateTransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\r\n        return new HibernateTransactionManager(entityManagerFactory.unwrap(SessionFactory.class));\r\n    }\r\n\r\n**And I managed to solve it by using `@EnableTransactionManagement` and deleting the custom \r\n`transactionManager` bean definition above.**\r\n\r\nIf you still have to use a custom transaction manager of sorts, changing the bean definition to the code below may also work:\r\n\r\n    @Bean\r\n    public PlatformTransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\r\n        return new JpaTransactionManager(entityManagerFactory);\r\n    }\r\n\r\nAs a final note, remember to enable Spring Boot&#39;s auto-configuration so the `entityManagerFactory` bean can be created automatically, and also remove any `sessionFactory` bean if you&#39;re upgrading to `entityManager` (otherwise Spring Boot won&#39;t do the auto-configuration properly). And lastly, ensure that your methods are `@Transactional` if you&#39;re not dealing with transactions manually.","title":"Delete Not Working with JpaRepository","body":"<p>This is for anyone coming from Google on why their delete method is not working in <strong>Spring Boot/Hibernate</strong>, whether it's used from the JpaRepository/CrudRepository's <code>delete</code> or from a custom repository calling <code>session.delete(entity)</code> or <code>entityManager.remove(entity)</code>.</p>\n\n<p>I was upgrading from Spring Boot 1.5 to version 2.2.6 (and Hibernate 5.4.13) and had been using a custom configuration for <code>transactionManager</code>, something like this:</p>\n\n<pre><code>@Bean\npublic HibernateTransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\n    return new HibernateTransactionManager(entityManagerFactory.unwrap(SessionFactory.class));\n}\n</code></pre>\n\n<p><strong>And I managed to solve it by using <code>@EnableTransactionManagement</code> and deleting the custom \n<code>transactionManager</code> bean definition above.</strong></p>\n\n<p>If you still have to use a custom transaction manager of sorts, changing the bean definition to the code below may also work:</p>\n\n<pre><code>@Bean\npublic PlatformTransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\n    return new JpaTransactionManager(entityManagerFactory);\n}\n</code></pre>\n\n<p>As a final note, remember to enable Spring Boot's auto-configuration so the <code>entityManagerFactory</code> bean can be created automatically, and also remove any <code>sessionFactory</code> bean if you're upgrading to <code>entityManager</code> (otherwise Spring Boot won't do the auto-configuration properly). And lastly, ensure that your methods are <code>@Transactional</code> if you're not dealing with transactions manually.</p>\n"},{"tags":[],"owner":{"account_id":10228606,"reputation":71,"user_id":7550229,"display_name":"M Shafaghi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1597666981,"creation_date":1597666981,"answer_id":63450739,"question_id":22688402,"body_markdown":"   \r\n    @Transactional\r\n    int deleteAuthorByName(String name);\r\n\r\n\r\nyou should write @Transactional in Repository extends JpaRepository","title":"Delete Not Working with JpaRepository","body":"<pre><code>@Transactional\nint deleteAuthorByName(String name);\n</code></pre>\n<p>you should write @Transactional in Repository extends JpaRepository</p>\n"},{"tags":[],"owner":{"account_id":16224731,"reputation":101,"user_id":11715400,"display_name":"Dhawal Kamdar"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1645129813,"creation_date":1645030730,"answer_id":71146102,"question_id":22688402,"body_markdown":"I was facing the similar issue.\r\n\r\n# Solution 1:\r\n\r\nThe reason why the records are not being deleted could be that the entities are still attached. So we&#39;ve to detach them first and then try to delete them.\r\n\r\nHere is my code example:\r\n\r\n`User Entity:`\r\n\r\n    @Entity\r\n    public class User {\r\n    \t@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;user&quot;)\r\n        private List&lt;Contact&gt; contacts = new ArrayList&lt;&gt;();\r\n    }\r\n\r\n`Contact Entity:`\r\n\r\n    @Entity\r\n    public class Contact {\r\n    \t@Id\r\n        private int cId;\r\n    \t\r\n    \t@ManyToOne\r\n        private User user;\r\n    }\r\n\r\n`Delete Code:`\r\n\r\n    user.getContacts().removeIf(c -&gt; c.getcId() == contact.getcId());\r\n    this.userRepository.save(user);\r\n    this.contactRepository.delete(contact);\r\n\r\nHere we are first removing the Contact object (which we want to delete) from the User&#39;s contacts ArrayList, and then we are using the delete() method.\r\n\r\n# Solution 2:\r\n\r\nHere we are using the **orphanRemoval** attribute, which is used to delete orphaned entities from the database. An entity that is no longer attached to its parent is known as an orphaned entity.\r\n\r\nCode example:\r\n\r\n`User Entity:`\r\n\r\n    @Entity\r\n    public class User {\r\n    \t@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;user&quot;, orphanRemoval = true)\r\n        private List&lt;Contact&gt; contacts = new ArrayList&lt;&gt;();\r\n    }\r\n\r\n\r\n`Contact Entity:`\r\n\r\n    @Entity\r\n    public class Contact {\r\n    \t@Id\r\n        private int cId;\r\n    \t\r\n    \t@ManyToOne\r\n        private User user;\r\n    }\r\n\r\n\r\n`Delete Code:`\r\n\r\n    user.getContacts().removeIf(c -&gt; c.getcId() == contact.getcId());\r\n    this.userRepository.save(user);\r\n\r\nHere, as the Contact entity is no longer attached to its parent, it is an orphaned entity and will be deleted from the database.","title":"Delete Not Working with JpaRepository","body":"<p>I was facing the similar issue.</p>\n<h1>Solution 1:</h1>\n<p>The reason why the records are not being deleted could be that the entities are still attached. So we've to detach them first and then try to delete them.</p>\n<p>Here is my code example:</p>\n<p><code>User Entity:</code></p>\n<pre><code>@Entity\npublic class User {\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;user&quot;)\n    private List&lt;Contact&gt; contacts = new ArrayList&lt;&gt;();\n}\n</code></pre>\n<p><code>Contact Entity:</code></p>\n<pre><code>@Entity\npublic class Contact {\n    @Id\n    private int cId;\n    \n    @ManyToOne\n    private User user;\n}\n</code></pre>\n<p><code>Delete Code:</code></p>\n<pre><code>user.getContacts().removeIf(c -&gt; c.getcId() == contact.getcId());\nthis.userRepository.save(user);\nthis.contactRepository.delete(contact);\n</code></pre>\n<p>Here we are first removing the Contact object (which we want to delete) from the User's contacts ArrayList, and then we are using the delete() method.</p>\n<h1>Solution 2:</h1>\n<p>Here we are using the <strong>orphanRemoval</strong> attribute, which is used to delete orphaned entities from the database. An entity that is no longer attached to its parent is known as an orphaned entity.</p>\n<p>Code example:</p>\n<p><code>User Entity:</code></p>\n<pre><code>@Entity\npublic class User {\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;user&quot;, orphanRemoval = true)\n    private List&lt;Contact&gt; contacts = new ArrayList&lt;&gt;();\n}\n</code></pre>\n<p><code>Contact Entity:</code></p>\n<pre><code>@Entity\npublic class Contact {\n    @Id\n    private int cId;\n    \n    @ManyToOne\n    private User user;\n}\n</code></pre>\n<p><code>Delete Code:</code></p>\n<pre><code>user.getContacts().removeIf(c -&gt; c.getcId() == contact.getcId());\nthis.userRepository.save(user);\n</code></pre>\n<p>Here, as the Contact entity is no longer attached to its parent, it is an orphaned entity and will be deleted from the database.</p>\n"},{"tags":[],"owner":{"account_id":10150878,"reputation":26,"user_id":7497544,"display_name":"Adam Botha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676012589,"creation_date":1676012589,"answer_id":75407879,"question_id":22688402,"body_markdown":"Try calling `deleteById` instead of `delete` on the repository. I also noticed that you are providing an `Optional` entity to the `delete` (since findOne returns an `Optional` entity). It is actually strange that you are not getting any compilation errors because of this. Anyways, my thinking is that the repository is not finding the entity to delete.\r\n\r\nTry this instead:\r\n\r\n```\r\n@Test\r\npublic void testDeleteToken() {\r\n    assertThat(tokenRepository.findAll().size(), is(2));\r\n\r\n    Optional&lt;Token&gt; toDelete = tokenRepository.findOne(1L);\r\n    toDelete.ifExists(toDeleteThatExists -&gt; tokenRepository.deleteById(toDeleteThatExists.getId()))\r\n\r\n    tokenRepository.flush();\r\n    assertThat(tokenRepository.findAll().size(), is(1));\r\n}\r\n```\r\n\r\nBy doing the above, you can avoid having to add the `@Modifying` query to your repository (since what you are implementing in that `@Modifying` query is essentially the same as calling `deleteById`, which already exists on the JpaRepository interface).\r\n\r\n","title":"Delete Not Working with JpaRepository","body":"<p>Try calling <code>deleteById</code> instead of <code>delete</code> on the repository. I also noticed that you are providing an <code>Optional</code> entity to the <code>delete</code> (since findOne returns an <code>Optional</code> entity). It is actually strange that you are not getting any compilation errors because of this. Anyways, my thinking is that the repository is not finding the entity to delete.</p>\n<p>Try this instead:</p>\n<pre><code>@Test\npublic void testDeleteToken() {\n    assertThat(tokenRepository.findAll().size(), is(2));\n\n    Optional&lt;Token&gt; toDelete = tokenRepository.findOne(1L);\n    toDelete.ifExists(toDeleteThatExists -&gt; tokenRepository.deleteById(toDeleteThatExists.getId()))\n\n    tokenRepository.flush();\n    assertThat(tokenRepository.findAll().size(), is(1));\n}\n</code></pre>\n<p>By doing the above, you can avoid having to add the <code>@Modifying</code> query to your repository (since what you are implementing in that <code>@Modifying</code> query is essentially the same as calling <code>deleteById</code>, which already exists on the JpaRepository interface).</p>\n"}],"owner":{"account_id":1910474,"reputation":1273,"user_id":1724420,"display_name":"userspaced"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157351,"favorite_count":0,"down_vote_count":0,"up_vote_count":107,"answer_count":14,"score":107,"last_activity_date":1676012589,"creation_date":1395925170,"question_id":22688402,"body_markdown":"I have a spring 4 app where I&#39;m trying to delete an instance of an entity from my database.  I have the following entity:\r\n\r\n    @Entity\r\n    public class Token implements Serializable {\r\n      \r\n        @Id\r\n        @SequenceGenerator(name = &quot;seqToken&quot;, sequenceName = &quot;SEQ_TOKEN&quot;, initialValue = 500, allocationSize = 1)\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;seqToken&quot;)\r\n        @Column(name = &quot;TOKEN_ID&quot;, nullable = false, precision = 19, scale = 0)\r\n        private Long id;\r\n    \r\n        @NotNull\r\n        @Column(name = &quot;VALUE&quot;, unique = true)\r\n        private String value;\r\n    \r\n        @ManyToOne(fetch = FetchType.EAGER)\r\n        @JoinColumn(name = &quot;USER_ACCOUNT_ID&quot;, nullable = false)\r\n        private UserAccount userAccount;\r\n        \r\n        @Temporal(TemporalType.TIMESTAMP)\r\n        @Column(name = &quot;EXPIRES&quot;, length = 11)\r\n        private Date expires;\r\n        \r\n        ...\r\n        // getters and setters omitted to keep it simple\r\n    }\r\n\r\nI have a JpaRepository interface defined:\r\n\r\n    public interface TokenRepository extends JpaRepository&lt;Token, Long&gt; {\r\n    \r\n        Token findByValue(@Param(&quot;value&quot;) String value);\r\n    \r\n    }\r\n\r\nI have a unit test setup that works with an in memory database (H2) and I am pre-filling the database with two tokens:\r\n\r\n    @Test\r\n    public void testDeleteToken() {\r\n        assertThat(tokenRepository.findAll().size(), is(2));\r\n        Token deleted = tokenRepository.findOne(1L);\r\n        tokenRepository.delete(deleted);\r\n        tokenRepository.flush();\r\n        assertThat(tokenRepository.findAll().size(), is(1));\r\n    }\r\n\r\nThe first assertion passes, the second fails.  I tried another test that changes the token value and saves that to the database and it does indeed work, so I&#39;m not sure why delete isn&#39;t working.  It doesn&#39;t throw any exceptions either, just doesn&#39;t persist it to the database.  It doesn&#39;t work against my oracle database either.\r\n\r\n\r\n----------\r\n\r\n\r\n**Edit**\r\n========\r\n\r\nStill having this issue. I was able to get the delete to persist to the database by adding this to my TokenRepository interface:\r\n\r\n    @Modifying\r\n    @Query(&quot;delete from Token t where t.id = ?1&quot;)\r\n    void delete(Long entityId);\r\n\r\nHowever this is not an ideal solution. Any ideas as to what I need to do to get it working without this extra method?","title":"Delete Not Working with JpaRepository","body":"<p>I have a spring 4 app where I'm trying to delete an instance of an entity from my database.  I have the following entity:</p>\n\n<pre><code>@Entity\npublic class Token implements Serializable {\n\n    @Id\n    @SequenceGenerator(name = \"seqToken\", sequenceName = \"SEQ_TOKEN\", initialValue = 500, allocationSize = 1)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"seqToken\")\n    @Column(name = \"TOKEN_ID\", nullable = false, precision = 19, scale = 0)\n    private Long id;\n\n    @NotNull\n    @Column(name = \"VALUE\", unique = true)\n    private String value;\n\n    @ManyToOne(fetch = FetchType.EAGER)\n    @JoinColumn(name = \"USER_ACCOUNT_ID\", nullable = false)\n    private UserAccount userAccount;\n\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = \"EXPIRES\", length = 11)\n    private Date expires;\n\n    ...\n    // getters and setters omitted to keep it simple\n}\n</code></pre>\n\n<p>I have a JpaRepository interface defined:</p>\n\n<pre><code>public interface TokenRepository extends JpaRepository&lt;Token, Long&gt; {\n\n    Token findByValue(@Param(\"value\") String value);\n\n}\n</code></pre>\n\n<p>I have a unit test setup that works with an in memory database (H2) and I am pre-filling the database with two tokens:</p>\n\n<pre><code>@Test\npublic void testDeleteToken() {\n    assertThat(tokenRepository.findAll().size(), is(2));\n    Token deleted = tokenRepository.findOne(1L);\n    tokenRepository.delete(deleted);\n    tokenRepository.flush();\n    assertThat(tokenRepository.findAll().size(), is(1));\n}\n</code></pre>\n\n<p>The first assertion passes, the second fails.  I tried another test that changes the token value and saves that to the database and it does indeed work, so I'm not sure why delete isn't working.  It doesn't throw any exceptions either, just doesn't persist it to the database.  It doesn't work against my oracle database either.</p>\n\n<hr>\n\n<h1><strong>Edit</strong></h1>\n\n<p>Still having this issue. I was able to get the delete to persist to the database by adding this to my TokenRepository interface:</p>\n\n<pre><code>@Modifying\n@Query(\"delete from Token t where t.id = ?1\")\nvoid delete(Long entityId);\n</code></pre>\n\n<p>However this is not an ideal solution. Any ideas as to what I need to do to get it working without this extra method?</p>\n"},{"tags":["java","android","google-api","firebase","firebase-realtime-database"],"answers":[{"tags":[],"owner":{"account_id":3891523,"reputation":1159,"user_id":3221576,"accept_rate":86,"display_name":"KCE"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1465770376,"creation_date":1465770376,"answer_id":37779681,"question_id":37652328,"body_markdown":"I think what you want to do is check the list of running apps before initializing your app. Each of the SDKs have a method for getting this array, in android it&#39;s `getApps`:\r\n\r\nhttps://firebase.google.com/docs/reference/android/com/google/firebase/FirebaseApp.html\r\n\r\nThen you can check to see if your app is already initialized.\r\n\r\nIn my case I just ended up checking the length of the array (I&#39;m using the javascript / web sdk so I&#39;m sure it&#39;s a little different for Android) and initializing a new app if it is 0.","title":"How to check if a Firebase App is already initialized on Android","body":"<p>I think what you want to do is check the list of running apps before initializing your app. Each of the SDKs have a method for getting this array, in android it's <code>getApps</code>:</p>\n\n<p><a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/FirebaseApp.html\" rel=\"noreferrer\">https://firebase.google.com/docs/reference/android/com/google/firebase/FirebaseApp.html</a></p>\n\n<p>Then you can check to see if your app is already initialized.</p>\n\n<p>In my case I just ended up checking the length of the array (I'm using the javascript / web sdk so I'm sure it's a little different for Android) and initializing a new app if it is 0.</p>\n"},{"tags":[],"owner":{"account_id":1911513,"reputation":2638,"user_id":1725215,"display_name":"Daniel Laurindo"},"down_vote_count":3,"up_vote_count":229,"is_accepted":true,"score":226,"last_activity_date":1581522567,"creation_date":1481059099,"answer_id":41005100,"question_id":37652328,"body_markdown":"On firebase web, you check if already initialized with:\r\n\r\n    if (firebase.apps.length === 0) {\r\n        firebase.initializeApp({});\r\n    }\r\n","title":"How to check if a Firebase App is already initialized on Android","body":"<p>On firebase web, you check if already initialized with:</p>\n\n<pre><code>if (firebase.apps.length === 0) {\n    firebase.initializeApp({});\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6577381,"reputation":185,"user_id":5082866,"display_name":"Harendra Kr. Jadon"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1507709634,"creation_date":1507709634,"answer_id":46683124,"question_id":37652328,"body_markdown":"I faced the similar issue, I resolved it as following:\r\n\r\n 1. Create a var for the application and initialize it with null\r\n 2. Take reference of the application while initialization\r\n 3. Check before initializing it again\r\n\r\n\r\n----------\r\n\r\n\r\n    //global variable\r\n    var firebaseResumeDownloadAdd = null;\r\n    \r\n    //inside function check before initializing\r\n    if(firebaseResumeDownloadAdd==null){\r\n       firebaseResumeDownloadAdd =\r\n       firebase.initializeApp(functions.config().firebase);\r\n    }","title":"How to check if a Firebase App is already initialized on Android","body":"<p>I faced the similar issue, I resolved it as following:</p>\n\n<ol>\n<li>Create a var for the application and initialize it with null</li>\n<li>Take reference of the application while initialization</li>\n<li>Check before initializing it again</li>\n</ol>\n\n<hr>\n\n<pre><code>//global variable\nvar firebaseResumeDownloadAdd = null;\n\n//inside function check before initializing\nif(firebaseResumeDownloadAdd==null){\n   firebaseResumeDownloadAdd =\n   firebase.initializeApp(functions.config().firebase);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9248166,"reputation":69,"user_id":6869438,"display_name":"Manoj Pathak"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1513659776,"creation_date":1513659776,"answer_id":47880299,"question_id":37652328,"body_markdown":"I faced the similar issue.\r\nI solved the following problem by deleting the already initialized app.\r\n\r\n        // Access your firebase app\r\n        let app = firebase.app();\r\n        // Delete your app.\r\n        app.delete(app);\r\n\r\nSolution works for web.","title":"How to check if a Firebase App is already initialized on Android","body":"<p>I faced the similar issue.\nI solved the following problem by deleting the already initialized app.</p>\n\n<pre><code>    // Access your firebase app\n    let app = firebase.app();\n    // Delete your app.\n    app.delete(app);\n</code></pre>\n\n<p>Solution works for web.</p>\n"},{"tags":[],"owner":{"account_id":610458,"reputation":5834,"user_id":333381,"display_name":"Jorge Arimany"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1513790424,"creation_date":1513790424,"answer_id":47911300,"question_id":37652328,"body_markdown":"You can try to get the Firebase app instance, in it&#39;s code firebase checks if it&#39;s initialized, if not it throws an `IllegalStateException`.\r\n\r\n        try{\r\n\t\t\tFirebaseApp.getInstance();\r\n\t\t}\r\n\t\tcatch (IllegalStateException e)\r\n\t\t{\r\n\t\t\t//Firebase not initialized automatically, do it manually\r\n\t\t\tFirebaseApp.initializeApp(this);\r\n\t\t}\r\n\r\n\r\n","title":"How to check if a Firebase App is already initialized on Android","body":"<p>You can try to get the Firebase app instance, in it's code firebase checks if it's initialized, if not it throws an <code>IllegalStateException</code>.</p>\n\n<pre><code>    try{\n        FirebaseApp.getInstance();\n    }\n    catch (IllegalStateException e)\n    {\n        //Firebase not initialized automatically, do it manually\n        FirebaseApp.initializeApp(this);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":960314,"reputation":20995,"user_id":984830,"accept_rate":93,"display_name":"Nick Cardoso"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1528198635,"creation_date":1528198635,"answer_id":50699136,"question_id":37652328,"body_markdown":"For those wondering how to do the same as the accepted answer, in Android:\r\n\r\n\r\n    if (FirebaseApp.getApps(context).isEmpty()) {\r\n        FirebaseApp.initializeApp(context);\r\n    }\r\n\r\nand in an instrumented test environment, use this context:\r\n\r\n    InstrumentationRegistry.getContext()","title":"How to check if a Firebase App is already initialized on Android","body":"<p>For those wondering how to do the same as the accepted answer, in Android:</p>\n\n<pre><code>if (FirebaseApp.getApps(context).isEmpty()) {\n    FirebaseApp.initializeApp(context);\n}\n</code></pre>\n\n<p>and in an instrumented test environment, use this context:</p>\n\n<pre><code>InstrumentationRegistry.getContext()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1394569,"reputation":110,"user_id":1324612,"display_name":"razorRun"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1580625177,"creation_date":1580625177,"answer_id":60023793,"question_id":37652328,"body_markdown":"Not sure in android, but how about using a singleton method. In JS you can do this. Hope this helps someone \r\n\r\n    // Config file\r\n    import * as firebase from &quot;firebase&quot;;\r\n\r\n    const config = {...};\r\n    \r\n    export default !firebase.apps.length ? firebase.initializeApp(config) : firebase.app();\r\n    \r\n    // Other file\r\n    import firebase from &#39;../firebase&#39;;\r\n\r\n","title":"How to check if a Firebase App is already initialized on Android","body":"<p>Not sure in android, but how about using a singleton method. In JS you can do this. Hope this helps someone </p>\n\n<pre><code>// Config file\nimport * as firebase from \"firebase\";\n\nconst config = {...};\n\nexport default !firebase.apps.length ? firebase.initializeApp(config) : firebase.app();\n\n// Other file\nimport firebase from '../firebase';\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3198933,"reputation":169,"user_id":2701425,"display_name":"edyrkaj"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1584148052,"creation_date":1584148052,"answer_id":60678870,"question_id":37652328,"body_markdown":"If you are using Nativescript to build an hybrid mobile app for Android | iOS you can use this script:\r\n\r\n\r\n```\r\nimport * as firebase from &#39;nativescript-plugin-firebase&#39;;\r\n\r\n_initFirebase(): Promise&lt;any&gt; {\r\n    if (!(firebase as any).initialized) {\r\n      return firebase.init({}).then(\r\n        () =&gt; {\r\n          console.info(&#39;firebase started...&#39;);\r\n        },\r\n        (error) =&gt; console.error(error)\r\n      );\r\n    }\r\n  }\r\n\r\n\r\n```","title":"How to check if a Firebase App is already initialized on Android","body":"<p>If you are using Nativescript to build an hybrid mobile app for Android | iOS you can use this script:</p>\n\n<pre><code>import * as firebase from 'nativescript-plugin-firebase';\n\n_initFirebase(): Promise&lt;any&gt; {\n    if (!(firebase as any).initialized) {\n      return firebase.init({}).then(\n        () =&gt; {\n          console.info('firebase started...');\n        },\n        (error) =&gt; console.error(error)\n      );\n    }\n  }\n\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":355005,"reputation":7146,"user_id":693687,"accept_rate":50,"display_name":"J&#252;rgen Brandstetter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604577920,"creation_date":1604577920,"answer_id":64696853,"question_id":37652328,"body_markdown":"```\r\nimport * as firebase from &quot;firebase/app&quot;;\r\nfirebase.apps.map(e =&gt; e.name); // Give you an array of initialized apps\r\n```","title":"How to check if a Firebase App is already initialized on Android","body":"<pre><code>import * as firebase from &quot;firebase/app&quot;;\nfirebase.apps.map(e =&gt; e.name); // Give you an array of initialized apps\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6919146,"reputation":5271,"user_id":5312371,"accept_rate":82,"display_name":"Mina Farid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616924696,"creation_date":1616924387,"answer_id":66840056,"question_id":37652328,"body_markdown":"in Android, depending on **Daniel Laurindo&#39;s** answer:\r\n\r\n    if (FirebaseApp.getApps(context).size != 0) {\r\n\r\n    } ","title":"How to check if a Firebase App is already initialized on Android","body":"<p>in Android, depending on <strong>Daniel Laurindo's</strong> answer:</p>\n<pre><code>if (FirebaseApp.getApps(context).size != 0) {\n\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1732135,"reputation":7337,"user_id":1585523,"accept_rate":60,"display_name":"Nitin"},"down_vote_count":0,"up_vote_count":58,"is_accepted":false,"score":58,"last_activity_date":1618704249,"creation_date":1618704249,"answer_id":67144062,"question_id":37652328,"body_markdown":"In v9, Firebase has been modularized for better tree shaking. So we can no longer import entire app and check the `apps` property AFAIK. The below approach can be used instead.\r\n\r\n```js\r\nimport { initializeApp, getApps, getApp } from &quot;firebase/app&quot;;\r\ngetApps().length === 0 ? initializeApp(firebaseConfig) : getApp();\r\n```\r\n\r\nhttps://firebase.google.com/docs/reference/js/v9/app.md#getapps for documentation","title":"How to check if a Firebase App is already initialized on Android","body":"<p>In v9, Firebase has been modularized for better tree shaking. So we can no longer import entire app and check the <code>apps</code> property AFAIK. The below approach can be used instead.</p>\n<pre class=\"lang-js prettyprint-override\"><code>import { initializeApp, getApps, getApp } from &quot;firebase/app&quot;;\ngetApps().length === 0 ? initializeApp(firebaseConfig) : getApp();\n</code></pre>\n<p><a href=\"https://firebase.google.com/docs/reference/js/v9/app.md#getapps\" rel=\"noreferrer\">https://firebase.google.com/docs/reference/js/v9/app.md#getapps</a> for documentation</p>\n"},{"tags":[],"owner":{"account_id":2458519,"reputation":7657,"user_id":2143128,"display_name":"Ratul Sharker"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1621196894,"creation_date":1621196894,"answer_id":67561308,"question_id":37652328,"body_markdown":"In firebase admin SDK for java, initialize the app if and only if there is no app.\r\n\r\n```java\r\nif (FirebaseApp.getApps().isEmpty()) {\r\n    FirebaseApp.initializeApp();\r\n}\r\n```","title":"How to check if a Firebase App is already initialized on Android","body":"<p>In firebase admin SDK for java, initialize the app if and only if there is no app.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (FirebaseApp.getApps().isEmpty()) {\n    FirebaseApp.initializeApp();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2847621,"reputation":135,"user_id":2445583,"accept_rate":100,"display_name":"mr3mo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623678420,"creation_date":1623678420,"answer_id":67971436,"question_id":37652328,"body_markdown":"A cleaner solution for ES6+ is \r\n\r\n```javascript\r\n\r\nif (!firebase.apps.length) {\r\n ...\r\n}\r\n```","title":"How to check if a Firebase App is already initialized on Android","body":"<p>A cleaner solution for ES6+ is</p>\n<pre class=\"lang-js prettyprint-override\"><code>\nif (!firebase.apps.length) {\n ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7352334,"reputation":1090,"user_id":5598044,"display_name":"Max Ma"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1625271969,"creation_date":1625271969,"answer_id":68232389,"question_id":37652328,"body_markdown":"Firebase Version 9\r\n\r\n```javascript\r\nimport { initializeApp, getApp } from &quot;firebase/app&quot;;\r\n\r\nconst createFirebaseApp = (config = {}) =&gt; {\r\n  try {\r\n    return getApp();\r\n  } catch () {\r\n    return initializeApp(config);\r\n  }\r\n};\r\n\r\nconst firebaseApp = createFirebaseApp({/* your config */})\r\n```","title":"How to check if a Firebase App is already initialized on Android","body":"<p>Firebase Version 9</p>\n<pre class=\"lang-js prettyprint-override\"><code>import { initializeApp, getApp } from &quot;firebase/app&quot;;\n\nconst createFirebaseApp = (config = {}) =&gt; {\n  try {\n    return getApp();\n  } catch () {\n    return initializeApp(config);\n  }\n};\n\nconst firebaseApp = createFirebaseApp({/* your config */})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4066076,"reputation":2498,"user_id":3340968,"accept_rate":43,"display_name":"Yasir Shabbir Choudhary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625561941,"creation_date":1625561941,"answer_id":68267496,"question_id":37652328,"body_markdown":"Simple use Java 8 Stream and Optional featured.\r\n\r\nCode below as \r\n\r\n    FirebaseApp.getApps()\r\n    .stream()\r\n    .filter(firebaseApp -&gt; \r\n        firebaseApp.getName().equals(&quot;APP_NAME&quot;))\r\n       .findFirst()\r\n       .orElseGet(() -&gt; FirebaseApp.initializeApp(firebaseOptions, &quot;APP_NAME&quot;));","title":"How to check if a Firebase App is already initialized on Android","body":"<p>Simple use Java 8 Stream and Optional featured.</p>\n<p>Code below as</p>\n<pre><code>FirebaseApp.getApps()\n.stream()\n.filter(firebaseApp -&gt; \n    firebaseApp.getName().equals(&quot;APP_NAME&quot;))\n   .findFirst()\n   .orElseGet(() -&gt; FirebaseApp.initializeApp(firebaseOptions, &quot;APP_NAME&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9964271,"reputation":843,"user_id":9108471,"display_name":"Zeeshan Ahmad Khalil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627362870,"creation_date":1627362870,"answer_id":68539299,"question_id":37652328,"body_markdown":"For those who are using dotNet FirebaseAdmin SDK\r\n\r\n    if (FirebaseApp.GetInstance(&quot;[DEFAULT]&quot;) == null)\r\n    {\r\n        var createdApp = FirebaseApp.Create(new AppOptions()\r\n        {\r\n            Credential = GoogleCredential.FromFile(&quot;private-key.json&quot;)\r\n        });\r\n    }","title":"How to check if a Firebase App is already initialized on Android","body":"<p>For those who are using dotNet FirebaseAdmin SDK</p>\n<pre><code>if (FirebaseApp.GetInstance(&quot;[DEFAULT]&quot;) == null)\n{\n    var createdApp = FirebaseApp.Create(new AppOptions()\n    {\n        Credential = GoogleCredential.FromFile(&quot;private-key.json&quot;)\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22063450,"reputation":1,"user_id":16325695,"display_name":"awes0m"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649320268,"creation_date":1649320268,"answer_id":71778788,"question_id":37652328,"body_markdown":"Th\r\nUse Platform check to initialize according to environment\r\n\r\nOn firebase web, you check if already initialized with\r\n\r\nuse the below snippet while launching MYAPP()\r\n\r\n    import &#39;dart:io&#39;;\r\n\r\n    void main() async {\r\n\r\n  WidgetsFlutterBinding.ensureInitialized();\r\n\r\n  if (Platform.isAndroid || Platform.isIOS) {\r\n\r\n    await Firebase.initializeApp();\r\n\r\n  } else {\r\n\r\n    if (Firebase.apps.isEmpty) {\r\n\r\n      await Firebase.initializeApp(\r\n\r\n          // connect for web to firebase\r\n          options:firebaseOptions\r\n\r\n    }\r\n\r\n  }\r\n  runApp(const MyApp());\r\n\r\n}\r\n","title":"How to check if a Firebase App is already initialized on Android","body":"<p>Th\nUse Platform check to initialize according to environment</p>\n<p>On firebase web, you check if already initialized with</p>\n<p>use the below snippet while launching MYAPP()</p>\n<pre><code>import 'dart:io';\n\nvoid main() async {\n</code></pre>\n<p>WidgetsFlutterBinding.ensureInitialized();</p>\n<p>if (Platform.isAndroid || Platform.isIOS) {</p>\n<pre><code>await Firebase.initializeApp();\n</code></pre>\n<p>} else {</p>\n<pre><code>if (Firebase.apps.isEmpty) {\n\n  await Firebase.initializeApp(\n\n      // connect for web to firebase\n      options:firebaseOptions\n\n}\n</code></pre>\n<p>}\nrunApp(const MyApp());</p>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":22659108,"reputation":169,"user_id":16832516,"display_name":"RaySun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669110530,"creation_date":1669110530,"answer_id":74530546,"question_id":37652328,"body_markdown":"    const app = !getApps().length ? initializeApp(firebaseConfig) : getApp();","title":"How to check if a Firebase App is already initialized on Android","body":"<pre><code>const app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25747385,"reputation":1,"user_id":19500414,"display_name":"ronthetech"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673620615,"creation_date":1673620615,"answer_id":75110624,"question_id":37652328,"body_markdown":"For web, you could use:\r\n```\r\nimport { getApp, initializeApp } from &quot;firebase/app&quot;\r\n\r\nconst firebaseConfig = {/* YOUR CONFIG */}\r\n\r\nfunction createFirebaseApp(config) {\r\n\ttry {\r\n\t\treturn getApp()\r\n\t} catch {\r\n\t\treturn initializeApp(config)\r\n\t}\r\n}\r\n\r\nconst firebaseApp = createFirebaseApp(firebaseConfig)\r\n```","title":"How to check if a Firebase App is already initialized on Android","body":"<p>For web, you could use:</p>\n<pre><code>import { getApp, initializeApp } from &quot;firebase/app&quot;\n\nconst firebaseConfig = {/* YOUR CONFIG */}\n\nfunction createFirebaseApp(config) {\n    try {\n        return getApp()\n    } catch {\n        return initializeApp(config)\n    }\n}\n\nconst firebaseApp = createFirebaseApp(firebaseConfig)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27750503,"reputation":1,"user_id":21185004,"display_name":"Explorer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676012585,"creation_date":1676012353,"answer_id":75407842,"question_id":37652328,"body_markdown":"As of now, I Do not have access to comments or likes. But I think this point is important to make.\r\n\r\nMany good answers here, but it is also essential to talk about the best answers and performance. \r\n\r\nIdeally, you want to minimize code that goes into your production and also want to make sure that there are no unnecessary pieces out there. Thus, a tree-shaking solution is best.\r\n\r\nI do following\r\n```\r\nimport { initializeApp, getApps, cert } from &quot;firebase-admin/app&quot;;\r\n\r\nconst secret = JSON.parse(process.env.FIREBASE_SECRET || &quot;{}&quot;);\r\n\r\nif (!getApps().length) initializeApp({ credential: cert(secret) });\r\n```\r\n\r\n","title":"How to check if a Firebase App is already initialized on Android","body":"<p>As of now, I Do not have access to comments or likes. But I think this point is important to make.</p>\n<p>Many good answers here, but it is also essential to talk about the best answers and performance.</p>\n<p>Ideally, you want to minimize code that goes into your production and also want to make sure that there are no unnecessary pieces out there. Thus, a tree-shaking solution is best.</p>\n<p>I do following</p>\n<pre><code>import { initializeApp, getApps, cert } from &quot;firebase-admin/app&quot;;\n\nconst secret = JSON.parse(process.env.FIREBASE_SECRET || &quot;{}&quot;);\n\nif (!getApps().length) initializeApp({ credential: cert(secret) });\n</code></pre>\n"}],"owner":{"account_id":3428175,"reputation":8022,"user_id":2873357,"accept_rate":65,"display_name":"Relm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101335,"favorite_count":0,"down_vote_count":0,"up_vote_count":102,"accepted_answer_id":41005100,"answer_count":20,"score":102,"last_activity_date":1676012585,"creation_date":1465200128,"question_id":37652328,"body_markdown":"With the following, the first time it&#39;s called it works, but then fails on subsequent calls with &quot;FirebaseApp name [DEFAULT] already exists!&quot;\r\n\r\n    \r\n    public FirebaseDatabase conn(Context c) {\r\n             FirebaseOptions options = new FirebaseOptions.Builder()\r\n                    .setApiKey(&quot;key&quot;)\r\n                    .setDatabaseUrl(&quot;url&quot;)\r\n                    .setApplicationId(&quot;ID&quot;)\r\n                    .build();\r\n    \r\n\r\n            /////I tried Try and Catch with no success//////\r\n            FirebaseApp app = FirebaseApp.initializeApp(c, options);\r\n\r\n            /// for this : FirebaseApp app = FirebaseApp.initializeApp(c, options, &quot;some_app&quot;);\r\n            //// will fail with &quot;FirebaseApp name some_app already exists!&quot;\r\n            return FirebaseDatabase.getInstance(app);\r\n    }\r\n\r\nAll of the above is an attempt to connect to a second Firebase App. ","title":"How to check if a Firebase App is already initialized on Android","body":"<p>With the following, the first time it's called it works, but then fails on subsequent calls with \"FirebaseApp name [DEFAULT] already exists!\"</p>\n\n<pre><code>public FirebaseDatabase conn(Context c) {\n         FirebaseOptions options = new FirebaseOptions.Builder()\n                .setApiKey(\"key\")\n                .setDatabaseUrl(\"url\")\n                .setApplicationId(\"ID\")\n                .build();\n\n\n        /////I tried Try and Catch with no success//////\n        FirebaseApp app = FirebaseApp.initializeApp(c, options);\n\n        /// for this : FirebaseApp app = FirebaseApp.initializeApp(c, options, \"some_app\");\n        //// will fail with \"FirebaseApp name some_app already exists!\"\n        return FirebaseDatabase.getInstance(app);\n}\n</code></pre>\n\n<p>All of the above is an attempt to connect to a second Firebase App. </p>\n"},{"tags":["java","postgresql","spring-boot","api"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1675929257,"post_id":75395633,"comment_id":133034181,"body_markdown":"That highly depends on your requirements. If each value of `kode_coa` must every exist only once in the DB you should use a unique constraint. If that only applies to testing you might use a query to check if it returns something for the value you&#39;re looking for.","body":"That highly depends on your requirements. If each value of <code>kode_coa</code> must every exist only once in the DB you should use a unique constraint. If that only applies to testing you might use a query to check if it returns something for the value you&#39;re looking for."},{"owner":{"account_id":101001,"reputation":119798,"user_id":271959,"display_name":"Frank Heikens"},"score":1,"creation_date":1675929387,"post_id":75395633,"comment_id":133034208,"body_markdown":"Create a unique constraint on the table (-s) involved. Your application can&#39;t see uncommitted data and thus it will miss all data that has not been committed yet.","body":"Create a unique constraint on the table (-s) involved. Your application can&#39;t see uncommitted data and thus it will miss all data that has not been committed yet."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1675929464,"post_id":75395633,"comment_id":133034226,"body_markdown":"Btw, that code looks problematic since it doesn&#39;t follow the Java beans conventions which state the getter for `nominal` should be `getNominal()` instead of `getnominal()`. Many frameworks use this and if your getters look different they might run into problems. Also, you should do yourself a favor and read up and stick to the Java code conventions, e.g. class names should start with an uppercase character. You might also look up some best practices, e.g. those published by Google.","body":"Btw, that code looks problematic since it doesn&#39;t follow the Java beans conventions which state the getter for <code>nominal</code> should be <code>getNominal()</code> instead of <code>getnominal()</code>. Many frameworks use this and if your getters look different they might run into problems. Also, you should do yourself a favor and read up and stick to the Java code conventions, e.g. class names should start with an uppercase character. You might also look up some best practices, e.g. those published by Google."},{"owner":{"account_id":17531877,"reputation":1654,"user_id":12715723,"display_name":"Jordy"},"score":0,"creation_date":1675929498,"post_id":75395633,"comment_id":133034231,"body_markdown":"See this [https://stackoverflow.com/a/469553/12715723](https://stackoverflow.com/a/469553/12715723) to set unique value on spesific column.","body":"See this <a href=\"https://stackoverflow.com/a/469553/12715723\">https://stackoverflow.com/a/469553/12715723</a> to set unique value on spesific column."},{"owner":{"account_id":20987194,"reputation":23,"user_id":15420727,"display_name":"Timothy Justin William"},"score":0,"creation_date":1675930332,"post_id":75395633,"comment_id":133034459,"body_markdown":"This is actually an API that was converted from PHP to Java, so I need to follow the naming. Anyway what if I just want to make a function that return a value of true or false depending if the data already exist inside the database or not since I need to return an error message if the data already exist to the user","body":"This is actually an API that was converted from PHP to Java, so I need to follow the naming. Anyway what if I just want to make a function that return a value of true or false depending if the data already exist inside the database or not since I need to return an error message if the data already exist to the user"},{"owner":{"account_id":23201300,"reputation":3123,"user_id":17296084,"display_name":"Ramin Faracov"},"score":0,"creation_date":1675931443,"post_id":75395633,"comment_id":133034776,"body_markdown":"This is not the correct approach - [if a value in the POST request is already in the database] All http requests work async. For example, you can convert all post methods to sync for waiting results. Result may be succussing or failing. But duplicates are controlled by unique indexes on the DB side.","body":"This is not the correct approach - [if a value in the POST request is already in the database] All http requests work async. For example, you can convert all post methods to sync for waiting results. Result may be succussing or failing. But duplicates are controlled by unique indexes on the DB side."}],"owner":{"account_id":20987194,"reputation":23,"user_id":15420727,"display_name":"Timothy Justin William"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676012460,"creation_date":1675929116,"question_id":75395633,"body_markdown":"So I&#39;m making an API using Java Spring-boot and JBDC with PostgreSQL as the database and Postman for testing. All the basic CRUD function is already implemented, but I&#39;m trying to validates if a value in the POST request is already in the database or not so there are no duplicate data.\r\n\r\nHere&#39;s the model:\r\n```\r\npackage com.akuntansi.akuntansi.model;\r\n\r\nimport java.sql.Timestamp;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\n\r\npublic class mAkuntansi {\r\n    private Integer id_md_jurnal_Integer;\r\n    private Integer id_dd_wilayah_kerja;\r\n    private String kode_file;\r\n    private String file_id;\r\n    private String tanggal;\r\n    private String debet_kredit;\r\n    private String kode_coa;\r\n    private long nominal;\r\n    private Integer flag;\r\n    private Integer id_akmt_subledger;\r\n    private Integer id_referensi;\r\n    private String no_bukti;\r\n    private Timestamp created_date;\r\n\r\n    public mAkuntansi(){}\r\n\r\n    public mAkuntansi(Integer id_md_jurnal_Integer, Integer id_dd_wilayah_kerja, String kode_file, String file_id, String tanggal, String debet_kredit, String kode_coa, \r\n    long nominal, Integer flag, Integer id_akmt_subledger, Integer id_referensi, String no_bukti, Timestamp created_date){\r\n        this.id_md_jurnal_Integer = id_md_jurnal_Integer;\r\n        this.id_dd_wilayah_kerja = id_dd_wilayah_kerja;\r\n        this.kode_file = kode_file;\r\n        this.file_id = file_id;\r\n        this.tanggal = tanggal;\r\n        this.debet_kredit = debet_kredit;\r\n        this.kode_coa = kode_coa;\r\n        this.nominal = nominal;\r\n        this.flag = flag;\r\n        this.id_akmt_subledger = id_akmt_subledger;\r\n        this.id_referensi = id_referensi;\r\n        this.no_bukti = no_bukti;\r\n        this.created_date = created_date;\r\n    }\r\n\r\n    public mAkuntansi(Integer id_dd_wilayah_kerja, String kode_file, String file_id, String tanggal, String debet_kredit, String kode_coa, \r\n    long nominal, Integer flag, Integer id_akmt_subledger, Integer id_referensi, String no_bukti, Timestamp created_date){\r\n        this.id_dd_wilayah_kerja = id_dd_wilayah_kerja;\r\n        this.kode_file = kode_file;\r\n        this.file_id = file_id;\r\n        this.tanggal = tanggal;\r\n        this.debet_kredit = debet_kredit;\r\n        this.kode_coa = kode_coa;\r\n        this.nominal = nominal;\r\n        this.flag = flag;\r\n        this.id_akmt_subledger = id_akmt_subledger;\r\n        this.id_referensi = id_referensi;\r\n        this.no_bukti = no_bukti;\r\n        this.created_date = created_date;\r\n    }\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    public Integer getid_md_jurnal_int(){\r\n        return id_md_jurnal_Integer;\r\n    }\r\n\r\n    public void setid_md_jurnal_int(Integer id_md_jurnal_Integer){\r\n        this.id_md_jurnal_Integer = id_md_jurnal_Integer;\r\n    }\r\n\r\n    public Integer getid_dd_wilayah_kerja(){\r\n        return id_dd_wilayah_kerja;\r\n    }\r\n\r\n    public void setid_dd_wilayah_kerja(Integer id_dd_wilayah_kerja){\r\n        this.id_dd_wilayah_kerja = id_dd_wilayah_kerja;\r\n    }\r\n\r\n    public String getkode_file(){\r\n        return kode_file;\r\n    }\r\n\r\n    public void setkode_file(String kode_file){\r\n        this.kode_file = kode_file;\r\n    }\r\n\r\n    public String getfile_id(){\r\n        return file_id;\r\n    }\r\n\r\n    public void setfile_id(String file_id){\r\n        this.file_id = file_id;\r\n    }\r\n\r\n    public String gettanggal(){\r\n        return tanggal;\r\n    }\r\n\r\n    public void settanggal(String tanggal){\r\n        this.tanggal = tanggal;\r\n    }\r\n\r\n    public String getdebet_kredit(){\r\n        return debet_kredit;\r\n    }\r\n\r\n    public void setdebet_kredit(String debet_kredit){\r\n        this.debet_kredit = debet_kredit;\r\n    }\r\n\r\n    public String getkode_coa(){\r\n        return kode_coa;\r\n    }\r\n\r\n    public void setkode_coa(String kode_coa){\r\n        this.kode_coa = kode_coa;\r\n    }\r\n\r\n    public long getnominal(){\r\n        return nominal;\r\n    }\r\n\r\n    public void setnominal(long nominal){\r\n        this.nominal = nominal;\r\n    }\r\n\r\n    public Integer getflag(){\r\n        return flag;\r\n    }\r\n\r\n    public void setflag(Integer flag){\r\n        this.flag = flag;\r\n    }\r\n\r\n    public Integer getid_akmt_subledger(){\r\n        return id_akmt_subledger;\r\n    }\r\n\r\n    public void setid_akmt_subledger(Integer id_akmt_subledger){\r\n        this.id_akmt_subledger = id_akmt_subledger;\r\n    }\r\n\r\n    public Integer getid_referensi(){\r\n        return id_referensi;\r\n    }\r\n\r\n    public void setid_referensi(Integer id_refrensi){\r\n        this.id_referensi = id_refrensi;\r\n    }\r\n\r\n    public String getno_bukti(){\r\n        return no_bukti;\r\n    }\r\n\r\n    public void setno_bukti(String no_bukti){\r\n        this.no_bukti = no_bukti;\r\n    }\r\n\r\n    public Timestamp getcreated_date(){\r\n        return created_date;\r\n    }\r\n\r\n    public void setcreated_date(Timestamp created_date){\r\n        this.created_date = created_date;\r\n    }\r\n\r\n}\r\n```\r\n\r\nLet say for example I want to validates the `kode_coa`. There&#39;s a POST request with `kode_coa` of `K1` but in the database, a data with value `K1` already exist, how do you prevent a duplicate data from getting inserted into the database?","title":"How to make a Java function that checks if data from a POST request is already in the database?","body":"<p>So I'm making an API using Java Spring-boot and JBDC with PostgreSQL as the database and Postman for testing. All the basic CRUD function is already implemented, but I'm trying to validates if a value in the POST request is already in the database or not so there are no duplicate data.</p>\n<p>Here's the model:</p>\n<pre><code>package com.akuntansi.akuntansi.model;\n\nimport java.sql.Timestamp;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\n\npublic class mAkuntansi {\n    private Integer id_md_jurnal_Integer;\n    private Integer id_dd_wilayah_kerja;\n    private String kode_file;\n    private String file_id;\n    private String tanggal;\n    private String debet_kredit;\n    private String kode_coa;\n    private long nominal;\n    private Integer flag;\n    private Integer id_akmt_subledger;\n    private Integer id_referensi;\n    private String no_bukti;\n    private Timestamp created_date;\n\n    public mAkuntansi(){}\n\n    public mAkuntansi(Integer id_md_jurnal_Integer, Integer id_dd_wilayah_kerja, String kode_file, String file_id, String tanggal, String debet_kredit, String kode_coa, \n    long nominal, Integer flag, Integer id_akmt_subledger, Integer id_referensi, String no_bukti, Timestamp created_date){\n        this.id_md_jurnal_Integer = id_md_jurnal_Integer;\n        this.id_dd_wilayah_kerja = id_dd_wilayah_kerja;\n        this.kode_file = kode_file;\n        this.file_id = file_id;\n        this.tanggal = tanggal;\n        this.debet_kredit = debet_kredit;\n        this.kode_coa = kode_coa;\n        this.nominal = nominal;\n        this.flag = flag;\n        this.id_akmt_subledger = id_akmt_subledger;\n        this.id_referensi = id_referensi;\n        this.no_bukti = no_bukti;\n        this.created_date = created_date;\n    }\n\n    public mAkuntansi(Integer id_dd_wilayah_kerja, String kode_file, String file_id, String tanggal, String debet_kredit, String kode_coa, \n    long nominal, Integer flag, Integer id_akmt_subledger, Integer id_referensi, String no_bukti, Timestamp created_date){\n        this.id_dd_wilayah_kerja = id_dd_wilayah_kerja;\n        this.kode_file = kode_file;\n        this.file_id = file_id;\n        this.tanggal = tanggal;\n        this.debet_kredit = debet_kredit;\n        this.kode_coa = kode_coa;\n        this.nominal = nominal;\n        this.flag = flag;\n        this.id_akmt_subledger = id_akmt_subledger;\n        this.id_referensi = id_referensi;\n        this.no_bukti = no_bukti;\n        this.created_date = created_date;\n    }\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    public Integer getid_md_jurnal_int(){\n        return id_md_jurnal_Integer;\n    }\n\n    public void setid_md_jurnal_int(Integer id_md_jurnal_Integer){\n        this.id_md_jurnal_Integer = id_md_jurnal_Integer;\n    }\n\n    public Integer getid_dd_wilayah_kerja(){\n        return id_dd_wilayah_kerja;\n    }\n\n    public void setid_dd_wilayah_kerja(Integer id_dd_wilayah_kerja){\n        this.id_dd_wilayah_kerja = id_dd_wilayah_kerja;\n    }\n\n    public String getkode_file(){\n        return kode_file;\n    }\n\n    public void setkode_file(String kode_file){\n        this.kode_file = kode_file;\n    }\n\n    public String getfile_id(){\n        return file_id;\n    }\n\n    public void setfile_id(String file_id){\n        this.file_id = file_id;\n    }\n\n    public String gettanggal(){\n        return tanggal;\n    }\n\n    public void settanggal(String tanggal){\n        this.tanggal = tanggal;\n    }\n\n    public String getdebet_kredit(){\n        return debet_kredit;\n    }\n\n    public void setdebet_kredit(String debet_kredit){\n        this.debet_kredit = debet_kredit;\n    }\n\n    public String getkode_coa(){\n        return kode_coa;\n    }\n\n    public void setkode_coa(String kode_coa){\n        this.kode_coa = kode_coa;\n    }\n\n    public long getnominal(){\n        return nominal;\n    }\n\n    public void setnominal(long nominal){\n        this.nominal = nominal;\n    }\n\n    public Integer getflag(){\n        return flag;\n    }\n\n    public void setflag(Integer flag){\n        this.flag = flag;\n    }\n\n    public Integer getid_akmt_subledger(){\n        return id_akmt_subledger;\n    }\n\n    public void setid_akmt_subledger(Integer id_akmt_subledger){\n        this.id_akmt_subledger = id_akmt_subledger;\n    }\n\n    public Integer getid_referensi(){\n        return id_referensi;\n    }\n\n    public void setid_referensi(Integer id_refrensi){\n        this.id_referensi = id_refrensi;\n    }\n\n    public String getno_bukti(){\n        return no_bukti;\n    }\n\n    public void setno_bukti(String no_bukti){\n        this.no_bukti = no_bukti;\n    }\n\n    public Timestamp getcreated_date(){\n        return created_date;\n    }\n\n    public void setcreated_date(Timestamp created_date){\n        this.created_date = created_date;\n    }\n\n}\n</code></pre>\n<p>Let say for example I want to validates the <code>kode_coa</code>. There's a POST request with <code>kode_coa</code> of <code>K1</code> but in the database, a data with value <code>K1</code> already exist, how do you prevent a duplicate data from getting inserted into the database?</p>\n"},{"tags":["java","android","tensorflow","tensorflow-lite","tflite"],"owner":{"account_id":21101320,"reputation":362,"user_id":15511159,"display_name":"Faizan Ahmad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676011829,"creation_date":1676011829,"question_id":75407774,"body_markdown":"I am working on an app where I have to pass an image to my own TFLite model. It will then return me result containing different values.\r\nInput is an image\r\n\r\n**Sample output is:**\r\n\r\n     [\r\n      {\r\n       &quot;points&quot;: {\r\n       &quot;left&quot;: -5.070770263671875,\r\n       &quot;top&quot;: 6.558062851428986,\r\n       &quot;width&quot;: 994.1088562011719,\r\n       &quot;height&quot;: 627.7321452498436\r\n      },\r\n      &quot;type&quot;: &quot;Doc&quot;,\r\n      &quot;score&quot;: 0.998\r\n     }\r\n    ]\r\n\r\n\r\nMy code to run tflite model is:\r\n\r\n    protected Interpreter tflite;\r\n    private TensorImage inputImageBuffer;\r\n    private  int imageSizeX;\r\n    private  int imageSizeY;\r\n    private TensorBuffer outputProbabilityBuffer;\r\n    private static final float PROBABILITY_MEAN = 0.0f;\r\n    private static final float PROBABILITY_STD = 1.0f;\r\n    Context context;\r\n    ResultBitmap resultBitmap;\r\n    Bitmap bitmap;\r\n    String modelName;\r\n    public void run(Context context, ResultBitmap resultBitmap, Bitmap bitmap, String modelName) {\r\n        this.context=context;\r\n        this.resultBitmap= resultBitmap;\r\n        this.bitmap=bitmap;\r\n        this.modelName=modelName;\r\n        try{\r\n            tflite=new Interpreter(loadmodelfile((Activity) context));\r\n        }catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        int imageTensorIndex = 0;\r\n        int[] imageShape = tflite.getInputTensor(imageTensorIndex).shape();\r\n        imageSizeY = imageShape[1];\r\n        imageSizeX = imageShape[2];\r\n        DataType imageDataType = tflite.getInputTensor(imageTensorIndex).dataType();\r\n        int probabilityTensorIndex = 0;\r\n        int[] probabilityShape = tflite.getOutputTensor(probabilityTensorIndex).shape();\r\n        DataType probabilityDataType = tflite.getOutputTensor(probabilityTensorIndex).dataType();\r\n        inputImageBuffer = new TensorImage(imageDataType);\r\n        outputProbabilityBuffer = TensorBuffer.createFixedSize(probabilityShape, probabilityDataType);\r\n        inputImageBuffer = loadImage(bitmap);\r\n        tflite.run(inputImageBuffer.getBuffer(),outputProbabilityBuffer.getBuffer().rewind());\r\n    // here I want to get output\r\n    }\r\n    private TensorImage loadImage(final Bitmap bitmap) {\r\n        inputImageBuffer.load(bitmap);\r\n        ImageProcessor imageProcessor =\r\n                new ImageProcessor.Builder()\r\n                        .add(new ResizeOp(imageSizeX, imageSizeY, ResizeOp.ResizeMethod.BILINEAR))\r\n                        .add(new NormalizeOp(0, 255))\r\n                        .add(new CastOp(DataType.UINT8))\r\n                        .build();\r\n        return imageProcessor.process(inputImageBuffer);\r\n    }\r\n    private MappedByteBuffer loadmodelfile(Activity activity) throws IOException {\r\n        AssetFileDescriptor fileDescriptor=activity.getAssets().openFd(modelName);\r\n        FileInputStream inputStream=new FileInputStream(fileDescriptor.getFileDescriptor());\r\n        FileChannel fileChannel=inputStream.getChannel();\r\n        long startoffset = fileDescriptor.getStartOffset();\r\n        long declaredLength=fileDescriptor.getDeclaredLength();\r\n        return fileChannel.map(FileChannel.MapMode.READ_ONLY,startoffset,declaredLength);\r\n    }\r\n\r\n\r\nI want to get output (as sample output) after running this model.","title":"How to get JsonArray/JsonObject output from TFLite model in android (java)?","body":"<p>I am working on an app where I have to pass an image to my own TFLite model. It will then return me result containing different values.\nInput is an image</p>\n<p><strong>Sample output is:</strong></p>\n<pre><code> [\n  {\n   &quot;points&quot;: {\n   &quot;left&quot;: -5.070770263671875,\n   &quot;top&quot;: 6.558062851428986,\n   &quot;width&quot;: 994.1088562011719,\n   &quot;height&quot;: 627.7321452498436\n  },\n  &quot;type&quot;: &quot;Doc&quot;,\n  &quot;score&quot;: 0.998\n }\n]\n</code></pre>\n<p>My code to run tflite model is:</p>\n<pre><code>protected Interpreter tflite;\nprivate TensorImage inputImageBuffer;\nprivate  int imageSizeX;\nprivate  int imageSizeY;\nprivate TensorBuffer outputProbabilityBuffer;\nprivate static final float PROBABILITY_MEAN = 0.0f;\nprivate static final float PROBABILITY_STD = 1.0f;\nContext context;\nResultBitmap resultBitmap;\nBitmap bitmap;\nString modelName;\npublic void run(Context context, ResultBitmap resultBitmap, Bitmap bitmap, String modelName) {\n    this.context=context;\n    this.resultBitmap= resultBitmap;\n    this.bitmap=bitmap;\n    this.modelName=modelName;\n    try{\n        tflite=new Interpreter(loadmodelfile((Activity) context));\n    }catch (Exception e) {\n        e.printStackTrace();\n    }\n    int imageTensorIndex = 0;\n    int[] imageShape = tflite.getInputTensor(imageTensorIndex).shape();\n    imageSizeY = imageShape[1];\n    imageSizeX = imageShape[2];\n    DataType imageDataType = tflite.getInputTensor(imageTensorIndex).dataType();\n    int probabilityTensorIndex = 0;\n    int[] probabilityShape = tflite.getOutputTensor(probabilityTensorIndex).shape();\n    DataType probabilityDataType = tflite.getOutputTensor(probabilityTensorIndex).dataType();\n    inputImageBuffer = new TensorImage(imageDataType);\n    outputProbabilityBuffer = TensorBuffer.createFixedSize(probabilityShape, probabilityDataType);\n    inputImageBuffer = loadImage(bitmap);\n    tflite.run(inputImageBuffer.getBuffer(),outputProbabilityBuffer.getBuffer().rewind());\n// here I want to get output\n}\nprivate TensorImage loadImage(final Bitmap bitmap) {\n    inputImageBuffer.load(bitmap);\n    ImageProcessor imageProcessor =\n            new ImageProcessor.Builder()\n                    .add(new ResizeOp(imageSizeX, imageSizeY, ResizeOp.ResizeMethod.BILINEAR))\n                    .add(new NormalizeOp(0, 255))\n                    .add(new CastOp(DataType.UINT8))\n                    .build();\n    return imageProcessor.process(inputImageBuffer);\n}\nprivate MappedByteBuffer loadmodelfile(Activity activity) throws IOException {\n    AssetFileDescriptor fileDescriptor=activity.getAssets().openFd(modelName);\n    FileInputStream inputStream=new FileInputStream(fileDescriptor.getFileDescriptor());\n    FileChannel fileChannel=inputStream.getChannel();\n    long startoffset = fileDescriptor.getStartOffset();\n    long declaredLength=fileDescriptor.getDeclaredLength();\n    return fileChannel.map(FileChannel.MapMode.READ_ONLY,startoffset,declaredLength);\n}\n</code></pre>\n<p>I want to get output (as sample output) after running this model.</p>\n"},{"tags":["java","spring","jwt"],"answers":[{"tags":[],"owner":{"account_id":24323550,"reputation":1,"user_id":18263470,"display_name":"user18263470"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676011796,"creation_date":1676011796,"answer_id":75407766,"question_id":75405312,"body_markdown":"    private static final String TOKEN_SECRET = &quot;jwtToken&quot;;        \r\n    Map&lt;String, Object&gt; claimMaps = new HashMap&lt;&gt;();\r\n    claimMaps.put(&quot;id&quot;, &quot;123123123&quot;);\r\n    String jws = Jwts.builder().signWith(SignatureAlgorithm.HS512, TOKEN_SECRET).setClaims(claimMaps).setSubject(&quot;wahaha&quot;).compact();\r\n    System.out.println(jws);\r\n    Claims decoded = Jwts.parser().setSigningKey(TOKEN_SECRET).parseClaimsJws(jws).getBody();\r\n    System.out.printf(&quot;decoded: %s&quot;, decoded);\r\n\r\nconsole output\r\n\r\n    eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJ3YWhhaGEiLCJpZCI6IjEyMzEyMzEyMyJ9.VtYAMdh1J9HxnLD3P6jKmY2018K_f0HUqsXxcy39em8LCTbZpwtAoj46lHcPFyfCWPi8knsIw1zWdayyjVeLcA\r\ndecoded: {sub=wahaha, id=123123123}","title":"&quot;Unsigned plaintext JWTs are not supported&quot; java spring","body":"<pre><code>private static final String TOKEN_SECRET = &quot;jwtToken&quot;;        \nMap&lt;String, Object&gt; claimMaps = new HashMap&lt;&gt;();\nclaimMaps.put(&quot;id&quot;, &quot;123123123&quot;);\nString jws = Jwts.builder().signWith(SignatureAlgorithm.HS512, TOKEN_SECRET).setClaims(claimMaps).setSubject(&quot;wahaha&quot;).compact();\nSystem.out.println(jws);\nClaims decoded = Jwts.parser().setSigningKey(TOKEN_SECRET).parseClaimsJws(jws).getBody();\nSystem.out.printf(&quot;decoded: %s&quot;, decoded);\n</code></pre>\n<p>console output</p>\n<pre><code>eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJ3YWhhaGEiLCJpZCI6IjEyMzEyMzEyMyJ9.VtYAMdh1J9HxnLD3P6jKmY2018K_f0HUqsXxcy39em8LCTbZpwtAoj46lHcPFyfCWPi8knsIw1zWdayyjVeLcA\n</code></pre>\n<p>decoded: {sub=wahaha, id=123123123}</p>\n"}],"owner":{"account_id":25743094,"reputation":13,"user_id":19496782,"display_name":"noxi3534"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":400,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676011796,"creation_date":1675983379,"question_id":75405312,"body_markdown":"I&#39;m using `io.jsonwebtoken.Jwts` in my java spring app.\r\nI&#39;m trying to generate a JWT token and decode it immediately (for testing purposes) but it results in an error:\r\n```\r\nio.jsonwebtoken.UnsupportedJwtException: Unsigned plaintext JWTs are not supported.\r\n```\r\n\r\nmy code:\r\n```java\r\n        String jws = Jwts.builder().setSubject(user.getId()).compact();\r\n        String decoded = Jwts.parserBuilder().build().parseClaimsJws(jws).getBody().getSubject();\r\n        System.out.printf(&quot;decoded: %s&quot;, decoded);\r\n```\r\nIf I use .setSigningKey() then the error changes to:\r\n`Signed plaintext JWSs are not supported.`","title":"&quot;Unsigned plaintext JWTs are not supported&quot; java spring","body":"<p>I'm using <code>io.jsonwebtoken.Jwts</code> in my java spring app.\nI'm trying to generate a JWT token and decode it immediately (for testing purposes) but it results in an error:</p>\n<pre><code>io.jsonwebtoken.UnsupportedJwtException: Unsigned plaintext JWTs are not supported.\n</code></pre>\n<p>my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        String jws = Jwts.builder().setSubject(user.getId()).compact();\n        String decoded = Jwts.parserBuilder().build().parseClaimsJws(jws).getBody().getSubject();\n        System.out.printf(&quot;decoded: %s&quot;, decoded);\n</code></pre>\n<p>If I use .setSigningKey() then the error changes to:\n<code>Signed plaintext JWSs are not supported.</code></p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":4076695,"reputation":424,"user_id":3348195,"accept_rate":70,"display_name":"ctrlmaniac"},"score":0,"creation_date":1675879010,"post_id":75389015,"comment_id":133024703,"body_markdown":"My client is postman, it seems that jsessionid is set","body":"My client is postman, it seems that jsessionid is set"},{"owner":{"account_id":1074107,"reputation":238,"user_id":1072625,"display_name":"Neeraj"},"score":0,"creation_date":1675886988,"post_id":75389015,"comment_id":133026952,"body_markdown":"At a high level you need spring security to intercept all the requests and validate them for authorization, in your above example it only does for &quot;&quot; url. You need to customize some spring filters in your SecurityFilterChain based on your auth needs e.g. form based auth or basic etc etc and provide a way to lookup the user that is being authenticated... e.g. https://howtodoinjava.com/spring5/security/login-form-example/","body":"At a high level you need spring security to intercept all the requests and validate them for authorization, in your above example it only does for &quot;&quot; url. You need to customize some spring filters in your SecurityFilterChain based on your auth needs e.g. form based auth or basic etc etc and provide a way to lookup the user that is being authenticated... e.g. <a href=\"https://howtodoinjava.com/spring5/security/login-form-example/\" rel=\"nofollow noreferrer\">howtodoinjava.com/spring5/security/login-form-example</a>"},{"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":2,"creation_date":1675896106,"post_id":75389015,"comment_id":133029162,"body_markdown":"Yes, you are missing. If you are on Spring Security 6 you have to explicit save the `SecurityContext` https://docs.spring.io/spring-security/reference/5.8/migration/servlet/session-management.html#_require_explicit_saving_of_securitycontextrepository","body":"Yes, you are missing. If you are on Spring Security 6 you have to explicit save the <code>SecurityContext</code> <a href=\"https://docs.spring.io/spring-security/reference/5.8/migration/servlet/session-management.html#_require_explicit_saving_of_securitycontextrepository\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/5.8/migration/servl&zwnj;&#8203;et/&hellip;</a>"},{"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1675975715,"post_id":75389015,"comment_id":133049183,"body_markdown":"@MarcusHertdaCoregio If you post that as an answer, you have my upvote.","body":"@MarcusHertdaCoregio If you post that as an answer, you have my upvote."},{"owner":{"account_id":4076695,"reputation":424,"user_id":3348195,"accept_rate":70,"display_name":"ctrlmaniac"},"score":0,"creation_date":1676011193,"post_id":75389015,"comment_id":133054758,"body_markdown":"@MarcusHertdaCoregio I&#39;ve updated my answer according to the documentation you&#39;ve provided me. is it correct in this way?","body":"@MarcusHertdaCoregio I&#39;ve updated my answer according to the documentation you&#39;ve provided me. is it correct in this way?"}],"answers":[{"tags":[],"owner":{"account_id":4076695,"reputation":424,"user_id":3348195,"accept_rate":70,"display_name":"ctrlmaniac"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1676011145,"creation_date":1675888531,"answer_id":75391468,"question_id":75389015,"body_markdown":"UPDATED:\r\n\r\nAs @MarcusHertdaCoregio said I had to save the context with the securitycontextrepository. Here&#39;s the code:\r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n\r\n\t@Bean\r\n\tSecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\t\thttp = http.csrf().disable();\r\n\r\n\t\thttp = http.authorizeHttpRequests((requests) -&gt; requests\r\n\t\t\t\t.requestMatchers(&quot;/api/auth/**&quot;).permitAll()\r\n\t\t\t\t.requestMatchers(&quot;/api/aziende/exists&quot;).permitAll()\r\n\t\t\t\t.requestMatchers(&quot;/api&quot;, &quot;/api/**&quot;).authenticated()\r\n\t\t\t\t.requestMatchers(&quot;/app&quot;, &quot;/app/**&quot;).authenticated()\r\n\t\t\t\t.requestMatchers(&quot;/admin&quot;, &quot;/admin/**&quot;).hasAnyAuthority(&quot;ROLE_ADMIN&quot;)\r\n\t\t\t\t.requestMatchers(&quot;/&quot;, &quot;/**&quot;).permitAll()\r\n\r\n\t\t);\r\n\r\n\t\thttp = http.formLogin((form) -&gt; form.loginPage(&quot;/accedi&quot;).permitAll());\r\n\r\n\t\thttp = http.logout((logout) -&gt; logout.logoutUrl(&quot;/esci&quot;).logoutSuccessUrl(&quot;/&quot;).permitAll());\r\n\r\n\t\thttp = http.securityContext((securityContext) -&gt; securityContext\r\n\t\t\t\t.requireExplicitSave(true));\r\n\r\n\t\treturn http.build();\r\n\t}\r\n\r\n\t@Bean\r\n\tPasswordEncoder passwordEncoder() {\r\n\t\treturn new BCryptPasswordEncoder();\r\n\t}\r\n\r\n\t@Bean\r\n\tAuthenticationManager authenticationManager(\r\n\t\t\tAuthenticationConfiguration configuration) throws Exception {\r\n\t\treturn configuration.getAuthenticationManager();\r\n\t}\r\n\r\n\t@Bean\r\n\tSecurityContextRepository securityContextRepository() {\r\n\t\treturn new HttpSessionSecurityContextRepository();\r\n\t}\r\n}\r\n```\r\n\r\n```java\r\n\t@PostMapping(&quot;/login&quot;)\r\n\tpublic ResponseEntity&lt;?&gt; login(@RequestBody Login payload, HttpServletRequest request,\r\n\t\t\tHttpServletResponse response) {\r\n\t\tSecurityContext context = SecurityContextHolder.createEmptyContext();\r\n\r\n\t\ttry {\r\n\t\t\tUsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(payload.getEmail(),\r\n\t\t\t\t\tpayload.getPassword());\r\n\r\n\t\t\tAuthentication auth = authManager.authenticate(token);\r\n\r\n\t\t\tif (auth.isAuthenticated()) {\r\n\t\t\t\tcontext.setAuthentication(auth);\r\n\t\t\t\tSecurityContextHolder.setContext(context);\r\n\r\n\t\t\t\tsecurityContextRepository.saveContext(context, request, response);\r\n\r\n\t\t\t\treturn ResponseEntity.ok(&quot;utente autenticato&quot;);\r\n\t\t\t} else {\r\n\t\t\t\treturn ResponseEntity.status(401).body(&quot;credenziali non valide&quot;);\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\treturn ResponseEntity.status(401).body(e.getMessage());\r\n\t\t}\r\n\t}\r\n```","title":"Spring SecurityContextHolder doesn&#39;t mantain authentication","body":"<p>UPDATED:</p>\n<p>As @MarcusHertdaCoregio said I had to save the context with the securitycontextrepository. Here's the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    @Bean\n    SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http = http.csrf().disable();\n\n        http = http.authorizeHttpRequests((requests) -&gt; requests\n                .requestMatchers(&quot;/api/auth/**&quot;).permitAll()\n                .requestMatchers(&quot;/api/aziende/exists&quot;).permitAll()\n                .requestMatchers(&quot;/api&quot;, &quot;/api/**&quot;).authenticated()\n                .requestMatchers(&quot;/app&quot;, &quot;/app/**&quot;).authenticated()\n                .requestMatchers(&quot;/admin&quot;, &quot;/admin/**&quot;).hasAnyAuthority(&quot;ROLE_ADMIN&quot;)\n                .requestMatchers(&quot;/&quot;, &quot;/**&quot;).permitAll()\n\n        );\n\n        http = http.formLogin((form) -&gt; form.loginPage(&quot;/accedi&quot;).permitAll());\n\n        http = http.logout((logout) -&gt; logout.logoutUrl(&quot;/esci&quot;).logoutSuccessUrl(&quot;/&quot;).permitAll());\n\n        http = http.securityContext((securityContext) -&gt; securityContext\n                .requireExplicitSave(true));\n\n        return http.build();\n    }\n\n    @Bean\n    PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    AuthenticationManager authenticationManager(\n            AuthenticationConfiguration configuration) throws Exception {\n        return configuration.getAuthenticationManager();\n    }\n\n    @Bean\n    SecurityContextRepository securityContextRepository() {\n        return new HttpSessionSecurityContextRepository();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>    @PostMapping(&quot;/login&quot;)\n    public ResponseEntity&lt;?&gt; login(@RequestBody Login payload, HttpServletRequest request,\n            HttpServletResponse response) {\n        SecurityContext context = SecurityContextHolder.createEmptyContext();\n\n        try {\n            UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(payload.getEmail(),\n                    payload.getPassword());\n\n            Authentication auth = authManager.authenticate(token);\n\n            if (auth.isAuthenticated()) {\n                context.setAuthentication(auth);\n                SecurityContextHolder.setContext(context);\n\n                securityContextRepository.saveContext(context, request, response);\n\n                return ResponseEntity.ok(&quot;utente autenticato&quot;);\n            } else {\n                return ResponseEntity.status(401).body(&quot;credenziali non valide&quot;);\n            }\n        } catch (Exception e) {\n            return ResponseEntity.status(401).body(e.getMessage());\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":4076695,"reputation":424,"user_id":3348195,"accept_rate":70,"display_name":"ctrlmaniac"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":902,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1676011145,"creation_date":1675874683,"question_id":75389015,"body_markdown":"I&#39;m trying to manually authenticate to Spring Security through REST API. I&#39;ve managed to open an endpoint where users can perfom the authentication. The endpoint works only whithin itself. If I try to get data from other secured endpoints the authentication is not provided. It seems that the user is authenticated but not remembered. Am I missing some steps?\r\n\r\nHere&#39;s my endpoint where users can login:\r\n\r\n```java\r\n@RestController\r\n@RequestMapping(&quot;/api/account/login&quot;)\r\npublic class LoginRestController {\r\n\r\n\t@Autowired\r\n\tAuthenticationManager authenticationManager;\r\n\r\n\t@PostMapping(&quot;&quot;)\r\n\tpublic ResponseEntity&lt;String&gt; login(@RequestBody LoginPayload payload) {\r\n\t\ttry {\r\n\t\t\tAuthentication auth = authenticationManager\r\n\t\t\t\t\t.authenticate(new UsernamePasswordAuthenticationToken(payload.getEmail(), payload.getPassword()));\r\n\r\n\t\t\tSecurityContextHolder.getContext().setAuthentication(auth);\r\n\t\t\treturn new ResponseEntity&lt;&gt;(&quot;Utente autenticato&quot;, HttpStatus.OK);\r\n\t\t} catch (Exception e) {\r\n\t\t\tSecurityContextHolder.getContext().setAuthentication(null);\r\n\t\t\treturn new ResponseEntity&lt;&gt;(e.getMessage(), HttpStatus.UNAUTHORIZED);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nhere&#39;s my configuration:\r\n\r\n```java\r\n@Configuration\r\npublic class SecurityConfig {\r\n\r\n\t@Bean\r\n\tSecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\t\thttp.csrf().disable()\r\n\t\t\t\t.authorizeHttpRequests((requests) -&gt; requests\r\n\t\t\t\t\t\t.requestMatchers(&quot;/api/account/register&quot;, &quot;/api/account/register/**&quot;).permitAll()\r\n\t\t\t\t\t\t.requestMatchers(&quot;/api/account/login&quot;).permitAll()\r\n\t\t\t\t\t\t.requestMatchers(&quot;/api/aziende/exists&quot;).permitAll()\r\n\t\t\t\t\t\t.requestMatchers(&quot;/api&quot;, &quot;/api/**&quot;).authenticated()\r\n\t\t\t\t\t\t.requestMatchers(&quot;/app&quot;, &quot;/app/**&quot;).authenticated()\r\n\t\t\t\t\t\t.requestMatchers(&quot;/&quot;, &quot;/**&quot;).permitAll()\r\n\r\n\t\t\t\t)\r\n\t\t\t\t.formLogin((form) -&gt; form.loginPage(&quot;/accedi&quot;).permitAll())\r\n\t\t\t\t.logout((logout) -&gt; logout.logoutUrl(&quot;/esci&quot;).permitAll());\r\n\r\n\t\treturn http.build();\r\n\t}\r\n\r\n\t@Bean\r\n\tPasswordEncoder passwordEncoder() {\r\n\t\treturn new BCryptPasswordEncoder();\r\n\t}\r\n\r\n\t@Bean\r\n\tAuthenticationManager authenticationManager(\r\n\t\t\tAuthenticationConfiguration configuration) throws Exception {\r\n\t\treturn configuration.getAuthenticationManager();\r\n\t}\r\n}\r\n```\r\n","title":"Spring SecurityContextHolder doesn&#39;t mantain authentication","body":"<p>I'm trying to manually authenticate to Spring Security through REST API. I've managed to open an endpoint where users can perfom the authentication. The endpoint works only whithin itself. If I try to get data from other secured endpoints the authentication is not provided. It seems that the user is authenticated but not remembered. Am I missing some steps?</p>\n<p>Here's my endpoint where users can login:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;/api/account/login&quot;)\npublic class LoginRestController {\n\n    @Autowired\n    AuthenticationManager authenticationManager;\n\n    @PostMapping(&quot;&quot;)\n    public ResponseEntity&lt;String&gt; login(@RequestBody LoginPayload payload) {\n        try {\n            Authentication auth = authenticationManager\n                    .authenticate(new UsernamePasswordAuthenticationToken(payload.getEmail(), payload.getPassword()));\n\n            SecurityContextHolder.getContext().setAuthentication(auth);\n            return new ResponseEntity&lt;&gt;(&quot;Utente autenticato&quot;, HttpStatus.OK);\n        } catch (Exception e) {\n            SecurityContextHolder.getContext().setAuthentication(null);\n            return new ResponseEntity&lt;&gt;(e.getMessage(), HttpStatus.UNAUTHORIZED);\n        }\n    }\n}\n</code></pre>\n<p>here's my configuration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class SecurityConfig {\n\n    @Bean\n    SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.csrf().disable()\n                .authorizeHttpRequests((requests) -&gt; requests\n                        .requestMatchers(&quot;/api/account/register&quot;, &quot;/api/account/register/**&quot;).permitAll()\n                        .requestMatchers(&quot;/api/account/login&quot;).permitAll()\n                        .requestMatchers(&quot;/api/aziende/exists&quot;).permitAll()\n                        .requestMatchers(&quot;/api&quot;, &quot;/api/**&quot;).authenticated()\n                        .requestMatchers(&quot;/app&quot;, &quot;/app/**&quot;).authenticated()\n                        .requestMatchers(&quot;/&quot;, &quot;/**&quot;).permitAll()\n\n                )\n                .formLogin((form) -&gt; form.loginPage(&quot;/accedi&quot;).permitAll())\n                .logout((logout) -&gt; logout.logoutUrl(&quot;/esci&quot;).permitAll());\n\n        return http.build();\n    }\n\n    @Bean\n    PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    AuthenticationManager authenticationManager(\n            AuthenticationConfiguration configuration) throws Exception {\n        return configuration.getAuthenticationManager();\n    }\n}\n</code></pre>\n"},{"tags":["java","excel","xml","kotlin","apache-poi"],"comments":[{"owner":{"account_id":1327194,"reputation":1809,"user_id":1271785,"accept_rate":67,"display_name":"pfurbacher"},"score":0,"creation_date":1675984103,"post_id":75401317,"comment_id":133051040,"body_markdown":"I don&#39;t think you can apply this kind of mapping to what appears to be a spreadsheet of different types of data mashed together. Your snippet of XML output kind of proves this -- most rows don&#39;t have titles, and the few that do don&#39;t have sections. My guess is that you have to parse the spreadsheet and create the respective XML manually. You could filter for rows that have `name` values and extract the data. Then then filter for rows with `code2` values, and extract that data. From that, you would construct your XML in the format you have shown above.","body":"I don&#39;t think you can apply this kind of mapping to what appears to be a spreadsheet of different types of data mashed together. Your snippet of XML output kind of proves this -- most rows don&#39;t have titles, and the few that do don&#39;t have sections. My guess is that you have to parse the spreadsheet and create the respective XML manually. You could filter for rows that have <code>name</code> values and extract the data. Then then filter for rows with <code>code2</code> values, and extract that data. From that, you would construct your XML in the format you have shown above."},{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":0,"creation_date":1676042130,"post_id":75401317,"comment_id":133063562,"body_markdown":"On approach would be to create JavaBeans that represent the structure you need to represent your required XML. You can create an instance of your JavaBean and fill in the data that you need. POI is a good way to get the data but it up to you to write the code to take the Sheet/Row/Cell data and fill in the fields on your JavaBeans. You can use something like jackson-dataformat-xml to deserialize your top level JavaBean instance as XML.","body":"On approach would be to create JavaBeans that represent the structure you need to represent your required XML. You can create an instance of your JavaBean and fill in the data that you need. POI is a good way to get the data but it up to you to write the code to take the Sheet/Row/Cell data and fill in the fields on your JavaBeans. You can use something like jackson-dataformat-xml to deserialize your top level JavaBean instance as XML."},{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":0,"creation_date":1676042239,"post_id":75401317,"comment_id":133063594,"body_markdown":"Another approach is to use XSSFExportToXml and use something like XSLT to transform the XML generated by XSSFExportToXml into the XML of the form you need.","body":"Another approach is to use XSSFExportToXml and use something like XSLT to transform the XML generated by XSSFExportToXml into the XML of the form you need."},{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":0,"creation_date":1676042391,"post_id":75401317,"comment_id":133063647,"body_markdown":"Or you could copy https://github.com/apache/poi/blob/trunk/poi-ooxml/src/main/java/org/apache/poi/xssf/extractor/XSSFExportToXml.java and customise the code to change the names of the XML elements it produces.","body":"Or you could copy <a href=\"https://github.com/apache/poi/blob/trunk/poi-ooxml/src/main/java/org/apache/poi/xssf/extractor/XSSFExportToXml.java\" rel=\"nofollow noreferrer\">github.com/apache/poi/blob/trunk/poi-ooxml/src/main/java/org&zwnj;&#8203;/&hellip;</a> and customise the code to change the names of the XML elements it produces."}],"owner":{"account_id":27745879,"reputation":1,"user_id":21181399,"display_name":"Вадим Козенков"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676010735,"creation_date":1675958921,"question_id":75401317,"body_markdown":"Need to create xml file from excel (source xml).\r\n\r\nI have excel map.\r\n\r\n[1]:https://i.stack.imgur.com/kW6Ny.png\r\n\r\n![1]\r\n\r\nI need to get the following xml file.\r\n\r\n\r\n```\r\n&lt;report code=&quot;&quot; form=&quot;&quot; format-version=&quot;&quot; period=&quot;&quot; shifr=&quot;&quot; version=&quot;&quot; year=&quot;&quot;&gt;\r\n    &lt;title&gt;\r\n        &lt;item name=&quot;okpo&quot; value=&quot;&quot;/&gt;\r\n        &lt;item name=&quot;name&quot; value=&quot;&quot;/&gt;\r\n        &lt;item name=&quot;leader_fio&quot; value=&quot;&quot;/&gt;\r\n        &lt;item name=&quot;responsible_post&quot; value=&quot;&quot;/&gt;\r\n        &lt;item name=&quot;responsible_fio&quot; value=&quot;&quot;/&gt;\r\n        &lt;item name=&quot;phone&quot; value=&quot;&quot;/&gt;\r\n        &lt;item name=&quot;mail&quot; value=&quot;&quot;/&gt;\r\n    &lt;/title&gt;\r\n    &lt;sections&gt;\r\n        &lt;section code=&quot;1&quot;&gt;\r\n            &lt;row code=&quot;1&quot; s1=&quot;&quot;&gt;\r\n                &lt;col code=&quot;1&quot;&gt;189451&lt;/col&gt;\r\n                &lt;col code=&quot;2&quot;&gt;4562&lt;/col&gt;\r\n                &lt;col code=&quot;3&quot;&gt;184037&lt;/col&gt;\r\n                &lt;col code=&quot;4&quot;&gt;852&lt;/col&gt;\r\n                &lt;col code=&quot;5&quot;&gt;0&lt;/col&gt;\r\n                &lt;col code=&quot;6&quot;&gt;0&lt;/col&gt;\r\n                &lt;col code=&quot;7&quot;&gt;31424&lt;/col&gt;\r\n            &lt;/row&gt;\r\n            &lt;row code=&quot;2&quot; s1=&quot;&quot;&gt;\r\n                &lt;col code=&quot;1&quot;&gt;0&lt;/col&gt;\r\n                &lt;col code=&quot;2&quot;&gt;0&lt;/col&gt;\r\n                &lt;col code=&quot;3&quot;&gt;0&lt;/col&gt;\r\n                &lt;col code=&quot;4&quot;&gt;0&lt;/col&gt;\r\n                &lt;col code=&quot;5&quot;&gt;0&lt;/col&gt;\r\n                &lt;col code=&quot;6&quot;&gt;0&lt;/col&gt;\r\n                &lt;col code=&quot;7&quot;&gt;0&lt;/col&gt;\r\n            &lt;/row&gt;\r\n        &lt;/section&gt;\r\n        &lt;section code=&quot;2&quot;&gt;\r\n            &lt;row code=&quot;1&quot; s1=&quot;&quot;&gt;\r\n                &lt;col code=&quot;1&quot;&gt;189451&lt;/col&gt;\r\n                &lt;col code=&quot;2&quot;&gt;4562&lt;/col&gt;\r\n                &lt;col code=&quot;3&quot;&gt;184037&lt;/col&gt;\r\n                &lt;col code=&quot;4&quot;&gt;852&lt;/col&gt;\r\n                &lt;col code=&quot;5&quot;&gt;0&lt;/col&gt;\r\n                &lt;col code=&quot;6&quot;&gt;0&lt;/col&gt;\r\n                &lt;col code=&quot;7&quot;&gt;31424&lt;/col&gt;\r\n            &lt;/row&gt;\r\n            &lt;row code=&quot;2&quot; s1=&quot;&quot;&gt;\r\n                &lt;col code=&quot;1&quot;&gt;0&lt;/col&gt;\r\n                &lt;col code=&quot;2&quot;&gt;0&lt;/col&gt;\r\n                &lt;col code=&quot;3&quot;&gt;0&lt;/col&gt;\r\n                &lt;col code=&quot;4&quot;&gt;0&lt;/col&gt;\r\n                &lt;col code=&quot;5&quot;&gt;0&lt;/col&gt;\r\n                &lt;col code=&quot;6&quot;&gt;0&lt;/col&gt;\r\n                &lt;col code=&quot;7&quot;&gt;0&lt;/col&gt;\r\n            &lt;/row&gt;\r\n        &lt;/section&gt;\r\n    &lt;/sections&gt;\r\n&lt;/report&gt;\r\n\r\n```\r\n\r\n\r\nNow i try use Apache poi.\r\n\r\n```\r\ntry {\r\n            val wb = XSSFWorkbook(&quot;C:\\\\Users\\\\Vadim\\\\IdeaProjects\\\\forep2\\\\data\\\\templates\\\\xmlTest.XLSX&quot;)\r\n\r\n            for (map in wb.customXMLMappings) {\r\n                val exporter = XSSFExportToXml(map)\r\n\r\n                val os = ByteArrayOutputStream()\r\n                exporter.exportToXML(os, true)\r\n                val xml = os.toString(&quot;UTF-8&quot;)\r\n                println(xml)\r\n            }\r\n        } catch (ex: Exception) {\r\n            println(ex.message)\r\n        }\r\n```\r\n\r\nBut instead of what I want, I get only one element of the nested collection.\r\n\r\n\r\n```\r\n&lt;report code=&quot;606010005012&quot; form=&quot;5&quot; format-version=&quot;1.3&quot; period=&quot;2&quot; shifr=&quot;un_p4&quot; version=&quot;21-01-2021&quot; year=&quot;2022&quot;&gt;\r\n    &lt;title&gt;\r\n        &lt;item name=&quot;&quot; value=&quot;&quot;/&gt;\r\n    &lt;/title&gt;\r\n    &lt;sections&gt;\r\n        &lt;section code=&quot;2&quot;&gt;\r\n            &lt;row code=&quot;2&quot; s1=&quot;&quot;&gt;\r\n                &lt;col code=&quot;7&quot;&gt;0&lt;/col&gt;\r\n            &lt;/row&gt;\r\n        &lt;/section&gt;\r\n    &lt;/sections&gt;\r\n&lt;/report&gt;\r\n```\r\n\r\n\r\nI try to use method exportToXML. But instead of a nested collection, I get one root element of each node. ","title":"How to export xml from excel (xml source) with apache poi (ready to use other libs). Java, Kotlin","body":"<p>Need to create xml file from excel (source xml).</p>\n<p>I have excel map.</p>\n<p><img src=\"https://i.stack.imgur.com/kW6Ny.png\" alt=\"1\" /></p>\n<p>I need to get the following xml file.</p>\n<pre><code>&lt;report code=&quot;&quot; form=&quot;&quot; format-version=&quot;&quot; period=&quot;&quot; shifr=&quot;&quot; version=&quot;&quot; year=&quot;&quot;&gt;\n    &lt;title&gt;\n        &lt;item name=&quot;okpo&quot; value=&quot;&quot;/&gt;\n        &lt;item name=&quot;name&quot; value=&quot;&quot;/&gt;\n        &lt;item name=&quot;leader_fio&quot; value=&quot;&quot;/&gt;\n        &lt;item name=&quot;responsible_post&quot; value=&quot;&quot;/&gt;\n        &lt;item name=&quot;responsible_fio&quot; value=&quot;&quot;/&gt;\n        &lt;item name=&quot;phone&quot; value=&quot;&quot;/&gt;\n        &lt;item name=&quot;mail&quot; value=&quot;&quot;/&gt;\n    &lt;/title&gt;\n    &lt;sections&gt;\n        &lt;section code=&quot;1&quot;&gt;\n            &lt;row code=&quot;1&quot; s1=&quot;&quot;&gt;\n                &lt;col code=&quot;1&quot;&gt;189451&lt;/col&gt;\n                &lt;col code=&quot;2&quot;&gt;4562&lt;/col&gt;\n                &lt;col code=&quot;3&quot;&gt;184037&lt;/col&gt;\n                &lt;col code=&quot;4&quot;&gt;852&lt;/col&gt;\n                &lt;col code=&quot;5&quot;&gt;0&lt;/col&gt;\n                &lt;col code=&quot;6&quot;&gt;0&lt;/col&gt;\n                &lt;col code=&quot;7&quot;&gt;31424&lt;/col&gt;\n            &lt;/row&gt;\n            &lt;row code=&quot;2&quot; s1=&quot;&quot;&gt;\n                &lt;col code=&quot;1&quot;&gt;0&lt;/col&gt;\n                &lt;col code=&quot;2&quot;&gt;0&lt;/col&gt;\n                &lt;col code=&quot;3&quot;&gt;0&lt;/col&gt;\n                &lt;col code=&quot;4&quot;&gt;0&lt;/col&gt;\n                &lt;col code=&quot;5&quot;&gt;0&lt;/col&gt;\n                &lt;col code=&quot;6&quot;&gt;0&lt;/col&gt;\n                &lt;col code=&quot;7&quot;&gt;0&lt;/col&gt;\n            &lt;/row&gt;\n        &lt;/section&gt;\n        &lt;section code=&quot;2&quot;&gt;\n            &lt;row code=&quot;1&quot; s1=&quot;&quot;&gt;\n                &lt;col code=&quot;1&quot;&gt;189451&lt;/col&gt;\n                &lt;col code=&quot;2&quot;&gt;4562&lt;/col&gt;\n                &lt;col code=&quot;3&quot;&gt;184037&lt;/col&gt;\n                &lt;col code=&quot;4&quot;&gt;852&lt;/col&gt;\n                &lt;col code=&quot;5&quot;&gt;0&lt;/col&gt;\n                &lt;col code=&quot;6&quot;&gt;0&lt;/col&gt;\n                &lt;col code=&quot;7&quot;&gt;31424&lt;/col&gt;\n            &lt;/row&gt;\n            &lt;row code=&quot;2&quot; s1=&quot;&quot;&gt;\n                &lt;col code=&quot;1&quot;&gt;0&lt;/col&gt;\n                &lt;col code=&quot;2&quot;&gt;0&lt;/col&gt;\n                &lt;col code=&quot;3&quot;&gt;0&lt;/col&gt;\n                &lt;col code=&quot;4&quot;&gt;0&lt;/col&gt;\n                &lt;col code=&quot;5&quot;&gt;0&lt;/col&gt;\n                &lt;col code=&quot;6&quot;&gt;0&lt;/col&gt;\n                &lt;col code=&quot;7&quot;&gt;0&lt;/col&gt;\n            &lt;/row&gt;\n        &lt;/section&gt;\n    &lt;/sections&gt;\n&lt;/report&gt;\n\n</code></pre>\n<p>Now i try use Apache poi.</p>\n<pre><code>try {\n            val wb = XSSFWorkbook(&quot;C:\\\\Users\\\\Vadim\\\\IdeaProjects\\\\forep2\\\\data\\\\templates\\\\xmlTest.XLSX&quot;)\n\n            for (map in wb.customXMLMappings) {\n                val exporter = XSSFExportToXml(map)\n\n                val os = ByteArrayOutputStream()\n                exporter.exportToXML(os, true)\n                val xml = os.toString(&quot;UTF-8&quot;)\n                println(xml)\n            }\n        } catch (ex: Exception) {\n            println(ex.message)\n        }\n</code></pre>\n<p>But instead of what I want, I get only one element of the nested collection.</p>\n<pre><code>&lt;report code=&quot;606010005012&quot; form=&quot;5&quot; format-version=&quot;1.3&quot; period=&quot;2&quot; shifr=&quot;un_p4&quot; version=&quot;21-01-2021&quot; year=&quot;2022&quot;&gt;\n    &lt;title&gt;\n        &lt;item name=&quot;&quot; value=&quot;&quot;/&gt;\n    &lt;/title&gt;\n    &lt;sections&gt;\n        &lt;section code=&quot;2&quot;&gt;\n            &lt;row code=&quot;2&quot; s1=&quot;&quot;&gt;\n                &lt;col code=&quot;7&quot;&gt;0&lt;/col&gt;\n            &lt;/row&gt;\n        &lt;/section&gt;\n    &lt;/sections&gt;\n&lt;/report&gt;\n</code></pre>\n<p>I try to use method exportToXML. But instead of a nested collection, I get one root element of each node.</p>\n"},{"tags":["java","android","android-layout"],"comments":[{"owner":{"account_id":7495697,"reputation":1501,"user_id":5696047,"display_name":"jayesh gurudayalani"},"score":0,"creation_date":1675586569,"post_id":75351028,"comment_id":132958121,"body_markdown":"Kindly add your code in question as without that , no one can figure out what is wrong there ?","body":"Kindly add your code in question as without that , no one can figure out what is wrong there ?"},{"owner":{"account_id":27707096,"reputation":13,"user_id":21150501,"display_name":"Kmor Keltas"},"score":0,"creation_date":1675587092,"post_id":75351028,"comment_id":132958187,"body_markdown":"All right ı will thank you","body":"All right ı will thank you"},{"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"score":0,"creation_date":1675723811,"post_id":75351028,"comment_id":132987044,"body_markdown":"Show us the error after crashing, u can find it on logcat","body":"Show us the error after crashing, u can find it on logcat"}],"answers":[{"tags":[],"owner":{"account_id":15483805,"reputation":242,"user_id":11170352,"display_name":"Mokhtar Abdelhalim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675609569,"creation_date":1675609569,"answer_id":75353236,"question_id":75351028,"body_markdown":"I try to guess, in some place of your code you are calling some convert method like `Double.parseDouble`, and you pass as argument your `editText.getText()`.\r\n\r\nSo when trying to convert your `String` to `Double`, it will crash because your text is **Empty**, and you can&#39;t convert **Empty** text to **Double**.\r\n\r\n\r\n&gt; **Solution 1** : Try to surround your Convert Method with `try/catch`.\r\n&gt; \r\n&gt; **Solution 2** : Try to use ***Input Control***, for example: Check if all your fields are not **Empty**, after that you do your stuff\r\n","title":"Android empty edittext and button","body":"<p>I try to guess, in some place of your code you are calling some convert method like <code>Double.parseDouble</code>, and you pass as argument your <code>editText.getText()</code>.</p>\n<p>So when trying to convert your <code>String</code> to <code>Double</code>, it will crash because your text is <strong>Empty</strong>, and you can't convert <strong>Empty</strong> text to <strong>Double</strong>.</p>\n<blockquote>\n<p><strong>Solution 1</strong> : Try to surround your Convert Method with <code>try/catch</code>.</p>\n<p><strong>Solution 2</strong> : Try to use <em><strong>Input Control</strong></em>, for example: Check if all your fields are not <strong>Empty</strong>, after that you do your stuff</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":10780313,"reputation":192,"user_id":7931023,"display_name":"Ashfaque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676010145,"creation_date":1676010145,"answer_id":75407578,"question_id":75351028,"body_markdown":"when trying to convert your String to Double, it will crash because your text is Empty, and you can&#39;t convert Empty text to Double.\r\n\r\nTry below code for every editText:-\r\n\r\n    //init EditText\r\n     EditText editText1=findViewById(R.id.t1);\r\n     EditText editText2=findViewById(R.id.t2);\r\n     EditText editText3=findViewById(R.id.t3);\r\n     ...\r\n     \r\n     //set value\r\n     double value1 = Double.parseDouble(!String.valueOf(editText1.getText()).isEmpty() ? String.valueOf(editText1.getText()) : &quot;0&quot;);\r\n     double value2 = Double.parseDouble(!String.valueOf(editText2.getText()).isEmpty() ? String.valueOf(editText2.getText()) : &quot;0&quot;);\r\n     double value3 = Double.parseDouble(!String.valueOf(editText3.getText()).isEmpty() ? String.valueOf(editText3.getText()) : &quot;0&quot;);\r\n     ...\r\n\r\nIn the above code. when editText is Empty that time it will assign a Zero( 0 ) otherwise is set a editText Value","title":"Android empty edittext and button","body":"<p>when trying to convert your String to Double, it will crash because your text is Empty, and you can't convert Empty text to Double.</p>\n<p>Try below code for every editText:-</p>\n<pre><code>//init EditText\n EditText editText1=findViewById(R.id.t1);\n EditText editText2=findViewById(R.id.t2);\n EditText editText3=findViewById(R.id.t3);\n ...\n \n //set value\n double value1 = Double.parseDouble(!String.valueOf(editText1.getText()).isEmpty() ? String.valueOf(editText1.getText()) : &quot;0&quot;);\n double value2 = Double.parseDouble(!String.valueOf(editText2.getText()).isEmpty() ? String.valueOf(editText2.getText()) : &quot;0&quot;);\n double value3 = Double.parseDouble(!String.valueOf(editText3.getText()).isEmpty() ? String.valueOf(editText3.getText()) : &quot;0&quot;);\n ...\n</code></pre>\n<p>In the above code. when editText is Empty that time it will assign a Zero( 0 ) otherwise is set a editText Value</p>\n"}],"owner":{"account_id":27707096,"reputation":13,"user_id":21150501,"display_name":"Kmor Keltas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75407578,"answer_count":2,"score":1,"last_activity_date":1676010145,"creation_date":1675586517,"question_id":75351028,"body_markdown":"I have a problem about button clicking. I have 7 edittext covered with double value. When I dont enter at least one edittext and after click button app crashes. Also when enter all values app runs well. \r\n\r\nWhats the problem ı dont know and ı am really beginner at programing. Thanks for help from now\r\n\r\nI tried toast message set eror message if else statements but nothing works.\r\n\r\n**This Is My Main Activity Code**\r\n\r\n     @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n    }\r\n\r\n    public void baslat (View view) {\r\n        TableLayout resultLayout = findViewById(R.id.resultLayout);\r\n        resultLayout.setVisibility(View.VISIBLE);\r\n\r\n        // Keyboard hide kısmı //\r\n            InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);\r\n            imm.hideSoftInputFromWindow(resultLayout.getWindowToken(), 0);\r\n\r\n            //Virg&#252;lden sonraki basamak sayısını ayarlayan kısım //\r\n        NumberFormat sonUmut = NumberFormat.getNumberInstance();\r\n        sonUmut.setMaximumFractionDigits(3);\r\n\r\n\r\n\r\n\r\n                // T1 Hedef Hesaplama Kısmı //\r\n\r\n        EditText t1 = findViewById(R.id.t1);\r\n        EditText yapilan = findViewById(R.id.yapilan);\r\n        EditText ayGun = findViewById(R.id.ayGun);\r\n        EditText bugun = findViewById(R.id.bugun);\r\n        TextView t1Sonuc = findViewById(R.id.t1Sonuc);\r\n\r\n        double t1Veri = Double.parseDouble(t1.getText().toString());\r\n\r\n        double yapilanVeri = Double.parseDouble(yapilan.getText().toString()); //MULTI USE\r\n        double ayGunVeri = Double.parseDouble(ayGun.getText().toString()); //MULTI USE\r\n        double bugunVeri = Double.parseDouble(bugun.getText().toString()); //MULTI USE\r\n\r\n\r\n\r\n        double t1Formul = (t1Veri - yapilanVeri) / (ayGunVeri - bugunVeri);\r\n        String t1Formula = sonUmut.format(t1Formul);\r\n        t1Sonuc.setText(&quot;&quot;+t1Formula+&quot;&quot;);\r\n\r\n\r\n\r\n                // T1 Hedef Hesaplama Kısmı //\r\n\r\n                          // // // //\r\n\r\n                // T2 Hedef Hesaplama Kısmı //\r\n\r\n        EditText t2 = findViewById(R.id.t2);\r\n        TextView t2Sonuc = findViewById(R.id.t2Sonuc);\r\n\r\n        double t2Veri = Double.parseDouble(t2.getText().toString());\r\n\r\n        double t2Formul = (t2Veri - yapilanVeri) / (ayGunVeri - bugunVeri);\r\n        String t2Formula = sonUmut.format(t2Formul);\r\n        t2Sonuc.setText(&quot;&quot;+t2Formula+&quot;&quot;);\r\n\r\n                // T2 Hedef Hesaplama Kısmı //\r\n\r\n                        // // // //\r\n\r\n                // Adet Hedef Hesaplama Kısmı //\r\n\r\n        EditText adet = findViewById(R.id.adet);\r\n        TextView adetSonuc = findViewById(R.id.adetSonuc);\r\n\r\n        double adetVeri = Double.parseDouble(adet.getText().toString());\r\n\r\n        double adetFormul = t2Formul / (yapilanVeri / adetVeri);\r\n        String adetFormula = sonUmut.format(adetFormul);\r\n        adetSonuc.setText(&quot;&quot;+adetFormula+&quot;&quot;);\r\n\r\n                // Adet Hedef Hesaplama Kısmı //\r\n\r\n                        // // // //\r\n\r\n                // TL Verim Hesaplama Kısmı //\r\n\r\n        EditText saat = findViewById(R.id.saat);\r\n        TextView tlVerimSonuc = findViewById(R.id.tlVerimSonuc);\r\n\r\n        double saatVeri = Double.parseDouble(saat.getText().toString());\r\n\r\n        double tlVerimFormul = (t2Formul / saatVeri);\r\n        String tlVerimFormula = sonUmut.format(tlVerimFormul);\r\n        tlVerimSonuc.setText(&quot;&quot;+tlVerimFormula+&quot;&quot;);\r\n\r\n                // TL Verim Hesaplama Kısmı //\r\n\r\n                        // // // //\r\n\r\n            // Adet Verim Hesaplama Kısmı //\r\n\r\n        TextView adetVerimSonuc = findViewById(R.id.adetVerimSonuc);\r\n\r\n        double adetVerimFormul = (adetFormul / saatVeri);\r\n        String adetVerimFormula = sonUmut.format(adetVerimFormul);\r\n        adetVerimSonuc.setText(&quot;&quot;+adetVerimFormula+&quot;&quot;);\r\n\r\n            // Adet Verim Hesaplama Kısmı //\r\n\r\n                    // // // //\r\n\r\n            //  T1 Tamamlanan Kısmı //\r\n\r\n            TextView t1TamamlananSonuc = findViewById(R.id.t1Tam);\r\n\r\n            double t1TamFormul = (yapilanVeri / t1Veri) * 100;\r\n\r\n            String t1TamFormula = sonUmut.format(t1TamFormul);\r\n            t1TamamlananSonuc.setText(&quot;% &quot; + &quot;&quot;+t1TamFormula+&quot;&quot;);\r\n\r\n            //  T1 Tamamlanan Kısmı //\r\n\r\n                    // // // //\r\n\r\n            //  T2 Tamamlanan Kısmı //\r\n\r\n            TextView t2TamamlananSonuc = findViewById(R.id.t2Tam);\r\n\r\n            double t2TamFormul = (yapilanVeri / t2Veri) * 100;\r\n\r\n            String t2TamFormula = sonUmut.format(t2TamFormul);\r\n            t2TamamlananSonuc.setText(&quot;% &quot; + &quot;&quot;+t2TamFormula+&quot;&quot;);\r\n\r\n            //  T2 Tamamlanan Kısmı //\r\n\r\n                    // // // //\r\n\r\n            // Ay Tamamlanan Kısmı //\r\n\r\n\r\n            TextView ayTamamlananSonuc = findViewById(R.id.ayTam);\r\n\r\n            double ayTamFormul = ((bugunVeri - 1) / ayGunVeri) * 100;\r\n\r\n            String ayTamFormula = sonUmut.format(ayTamFormul);\r\n            ayTamamlananSonuc.setText(&quot;% &quot; + &quot;&quot;+ayTamFormula+&quot;&quot;);\r\n\r\n\r\n\r\n        }\r\n\r\n    }\r\n","title":"Android empty edittext and button","body":"<p>I have a problem about button clicking. I have 7 edittext covered with double value. When I dont enter at least one edittext and after click button app crashes. Also when enter all values app runs well.</p>\n<p>Whats the problem ı dont know and ı am really beginner at programing. Thanks for help from now</p>\n<p>I tried toast message set eror message if else statements but nothing works.</p>\n<p><strong>This Is My Main Activity Code</strong></p>\n<pre><code> @Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n}\n\npublic void baslat (View view) {\n    TableLayout resultLayout = findViewById(R.id.resultLayout);\n    resultLayout.setVisibility(View.VISIBLE);\n\n    // Keyboard hide kısmı //\n        InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);\n        imm.hideSoftInputFromWindow(resultLayout.getWindowToken(), 0);\n\n        //Virgülden sonraki basamak sayısını ayarlayan kısım //\n    NumberFormat sonUmut = NumberFormat.getNumberInstance();\n    sonUmut.setMaximumFractionDigits(3);\n\n\n\n\n            // T1 Hedef Hesaplama Kısmı //\n\n    EditText t1 = findViewById(R.id.t1);\n    EditText yapilan = findViewById(R.id.yapilan);\n    EditText ayGun = findViewById(R.id.ayGun);\n    EditText bugun = findViewById(R.id.bugun);\n    TextView t1Sonuc = findViewById(R.id.t1Sonuc);\n\n    double t1Veri = Double.parseDouble(t1.getText().toString());\n\n    double yapilanVeri = Double.parseDouble(yapilan.getText().toString()); //MULTI USE\n    double ayGunVeri = Double.parseDouble(ayGun.getText().toString()); //MULTI USE\n    double bugunVeri = Double.parseDouble(bugun.getText().toString()); //MULTI USE\n\n\n\n    double t1Formul = (t1Veri - yapilanVeri) / (ayGunVeri - bugunVeri);\n    String t1Formula = sonUmut.format(t1Formul);\n    t1Sonuc.setText(&quot;&quot;+t1Formula+&quot;&quot;);\n\n\n\n            // T1 Hedef Hesaplama Kısmı //\n\n                      // // // //\n\n            // T2 Hedef Hesaplama Kısmı //\n\n    EditText t2 = findViewById(R.id.t2);\n    TextView t2Sonuc = findViewById(R.id.t2Sonuc);\n\n    double t2Veri = Double.parseDouble(t2.getText().toString());\n\n    double t2Formul = (t2Veri - yapilanVeri) / (ayGunVeri - bugunVeri);\n    String t2Formula = sonUmut.format(t2Formul);\n    t2Sonuc.setText(&quot;&quot;+t2Formula+&quot;&quot;);\n\n            // T2 Hedef Hesaplama Kısmı //\n\n                    // // // //\n\n            // Adet Hedef Hesaplama Kısmı //\n\n    EditText adet = findViewById(R.id.adet);\n    TextView adetSonuc = findViewById(R.id.adetSonuc);\n\n    double adetVeri = Double.parseDouble(adet.getText().toString());\n\n    double adetFormul = t2Formul / (yapilanVeri / adetVeri);\n    String adetFormula = sonUmut.format(adetFormul);\n    adetSonuc.setText(&quot;&quot;+adetFormula+&quot;&quot;);\n\n            // Adet Hedef Hesaplama Kısmı //\n\n                    // // // //\n\n            // TL Verim Hesaplama Kısmı //\n\n    EditText saat = findViewById(R.id.saat);\n    TextView tlVerimSonuc = findViewById(R.id.tlVerimSonuc);\n\n    double saatVeri = Double.parseDouble(saat.getText().toString());\n\n    double tlVerimFormul = (t2Formul / saatVeri);\n    String tlVerimFormula = sonUmut.format(tlVerimFormul);\n    tlVerimSonuc.setText(&quot;&quot;+tlVerimFormula+&quot;&quot;);\n\n            // TL Verim Hesaplama Kısmı //\n\n                    // // // //\n\n        // Adet Verim Hesaplama Kısmı //\n\n    TextView adetVerimSonuc = findViewById(R.id.adetVerimSonuc);\n\n    double adetVerimFormul = (adetFormul / saatVeri);\n    String adetVerimFormula = sonUmut.format(adetVerimFormul);\n    adetVerimSonuc.setText(&quot;&quot;+adetVerimFormula+&quot;&quot;);\n\n        // Adet Verim Hesaplama Kısmı //\n\n                // // // //\n\n        //  T1 Tamamlanan Kısmı //\n\n        TextView t1TamamlananSonuc = findViewById(R.id.t1Tam);\n\n        double t1TamFormul = (yapilanVeri / t1Veri) * 100;\n\n        String t1TamFormula = sonUmut.format(t1TamFormul);\n        t1TamamlananSonuc.setText(&quot;% &quot; + &quot;&quot;+t1TamFormula+&quot;&quot;);\n\n        //  T1 Tamamlanan Kısmı //\n\n                // // // //\n\n        //  T2 Tamamlanan Kısmı //\n\n        TextView t2TamamlananSonuc = findViewById(R.id.t2Tam);\n\n        double t2TamFormul = (yapilanVeri / t2Veri) * 100;\n\n        String t2TamFormula = sonUmut.format(t2TamFormul);\n        t2TamamlananSonuc.setText(&quot;% &quot; + &quot;&quot;+t2TamFormula+&quot;&quot;);\n\n        //  T2 Tamamlanan Kısmı //\n\n                // // // //\n\n        // Ay Tamamlanan Kısmı //\n\n\n        TextView ayTamamlananSonuc = findViewById(R.id.ayTam);\n\n        double ayTamFormul = ((bugunVeri - 1) / ayGunVeri) * 100;\n\n        String ayTamFormula = sonUmut.format(ayTamFormul);\n        ayTamamlananSonuc.setText(&quot;% &quot; + &quot;&quot;+ayTamFormula+&quot;&quot;);\n\n\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","google-chrome","svg","render","echarts"],"answers":[{"tags":[],"owner":{"account_id":9306921,"reputation":8081,"user_id":6910253,"display_name":"Badacadabra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675982806,"creation_date":1675982806,"answer_id":75405232,"question_id":75401552,"body_markdown":"First of all, I think your first tag is wrong. You are talking about **JavaScript**, right?\r\n\r\nI am not sure to fully understand your question, but if you want to get the **SVG** code behind a chart, you have to make sure that developers you work with do not use the **Canvas** API.\r\n\r\n**Echarts** has two renderers: `canvas` and `svg`. See [Canvas vs. SVG - Best Practices - Handbook - Apache ECharts][1]. If you want to use the **SVG renderer**, charts should be [initialized][2] like this:\r\n\r\n```javascript\r\nlet myChart = echarts.init(document.getElementById(&#39;main&#39;), null, { renderer: &#39;svg&#39; });\r\n```\r\n\r\nNow, to export your chart to SVG, you can:\r\n\r\n - Configure the **toolbox** (see [`toolbox.feature.saveAsImage.type`][3]). A download button will appear in the top right corner of the main container.\r\n - Copy/paste the code using **browser developer tools**.\r\n\r\nHere is an example ([JSFiddle][4]):\r\n\r\n```javascript\r\nlet option = {\r\n  toolbox: {\r\n    feature: {\r\n      saveAsImage: {\r\n        type: &#39;svg&#39; // &lt;--- HERE\r\n      }\r\n    }\r\n  },\r\n  xAxis: {\r\n    type: &#39;category&#39;,\r\n    data: [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;]\r\n  },\r\n  yAxis: {\r\n    type: &#39;value&#39;\r\n  },\r\n  series: [\r\n    {\r\n      data: [10, 20, 15],\r\n      type: &#39;bar&#39;\r\n    }\r\n  ]\r\n};\r\n\r\nlet myChart = echarts.init(document.getElementById(&#39;main&#39;), null, { renderer: &#39;svg&#39; });\r\nmyChart.setOption(option);\r\n```\r\n\r\n```css\r\n#main {\r\n  width: 350px;\r\n  height: 350px;\r\n}\r\n```\r\n\r\n```html\r\n&lt;script src=&quot;https://cdn.jsdelivr.net/npm/echarts@5.4.1/dist/echarts.min.js&quot;&gt;&lt;/script&gt;\r\n\r\n&lt;div id=&quot;main&quot;&gt;&lt;/div&gt;\r\n```\r\n  [1]: https://apache.github.io/echarts-handbook/en/best-practices/canvas-vs-svg/#\r\n  [2]: https://echarts.apache.org/en/api.html#echarts.init\r\n  [3]: https://echarts.apache.org/en/option.html#toolbox.feature.saveAsImage.type\r\n  [4]: https://jsfiddle.net/Badacadabra/gvtz0745/","title":"Using Apache &quot;echarts&quot; code to render a chart as svg for offline use?","body":"<p>First of all, I think your first tag is wrong. You are talking about <strong>JavaScript</strong>, right?</p>\n<p>I am not sure to fully understand your question, but if you want to get the <strong>SVG</strong> code behind a chart, you have to make sure that developers you work with do not use the <strong>Canvas</strong> API.</p>\n<p><strong>Echarts</strong> has two renderers: <code>canvas</code> and <code>svg</code>. See <a href=\"https://apache.github.io/echarts-handbook/en/best-practices/canvas-vs-svg/#\" rel=\"nofollow noreferrer\">Canvas vs. SVG - Best Practices - Handbook - Apache ECharts</a>. If you want to use the <strong>SVG renderer</strong>, charts should be <a href=\"https://echarts.apache.org/en/api.html#echarts.init\" rel=\"nofollow noreferrer\">initialized</a> like this:</p>\n<pre class=\"lang-js prettyprint-override\"><code>let myChart = echarts.init(document.getElementById('main'), null, { renderer: 'svg' });\n</code></pre>\n<p>Now, to export your chart to SVG, you can:</p>\n<ul>\n<li>Configure the <strong>toolbox</strong> (see <a href=\"https://echarts.apache.org/en/option.html#toolbox.feature.saveAsImage.type\" rel=\"nofollow noreferrer\"><code>toolbox.feature.saveAsImage.type</code></a>). A download button will appear in the top right corner of the main container.</li>\n<li>Copy/paste the code using <strong>browser developer tools</strong>.</li>\n</ul>\n<p>Here is an example (<a href=\"https://jsfiddle.net/Badacadabra/gvtz0745/\" rel=\"nofollow noreferrer\">JSFiddle</a>):</p>\n<pre class=\"lang-js prettyprint-override\"><code>let option = {\n  toolbox: {\n    feature: {\n      saveAsImage: {\n        type: 'svg' // &lt;--- HERE\n      }\n    }\n  },\n  xAxis: {\n    type: 'category',\n    data: ['A', 'B', 'C']\n  },\n  yAxis: {\n    type: 'value'\n  },\n  series: [\n    {\n      data: [10, 20, 15],\n      type: 'bar'\n    }\n  ]\n};\n\nlet myChart = echarts.init(document.getElementById('main'), null, { renderer: 'svg' });\nmyChart.setOption(option);\n</code></pre>\n<pre class=\"lang-css prettyprint-override\"><code>#main {\n  width: 350px;\n  height: 350px;\n}\n</code></pre>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/echarts@5.4.1/dist/echarts.min.js&quot;&gt;&lt;/script&gt;\n\n&lt;div id=&quot;main&quot;&gt;&lt;/div&gt;\n</code></pre>\n"}],"owner":{"account_id":27736951,"reputation":1,"user_id":21174314,"display_name":"Aidos98"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2025,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676009833,"creation_date":1675960011,"question_id":75401552,"body_markdown":"Apologies, I&#39;m not a programmer so this is a new world for me.\r\n\r\nIs at all possible to pull element data from the java or css code on a website thats being used to generate a chart through apache echarts and convert it to an svg for later use?\r\nPart of my job is animating charts and data and having access to the individual shapes, lines and numbers rather than just a &quot;baked&quot; .png would be invaluable for my work.\r\n\r\nThis is an example of the code in question\r\n\r\n[1]:https://i.stack.imgur.com/qMYN5.png\r\n\r\n![1]\r\n\r\nI&#39;ve asked a few web developers who couldn&#39;t help so if anyone has any ideas or can point me in the right direction I&#39;d be extremely grateful. \r\n\r\nCheers.\r\n\r\n\r\nI have yet to try anything as I&#39;m pretty lost, as above several web developers have been unable to help so far.","title":"Using Apache &quot;echarts&quot; code to render a chart as svg for offline use?","body":"<p>Apologies, I'm not a programmer so this is a new world for me.</p>\n<p>Is at all possible to pull element data from the java or css code on a website thats being used to generate a chart through apache echarts and convert it to an svg for later use?\nPart of my job is animating charts and data and having access to the individual shapes, lines and numbers rather than just a &quot;baked&quot; .png would be invaluable for my work.</p>\n<p>This is an example of the code in question</p>\n<p><img src=\"https://i.stack.imgur.com/qMYN5.png\" alt=\"1\" /></p>\n<p>I've asked a few web developers who couldn't help so if anyone has any ideas or can point me in the right direction I'd be extremely grateful.</p>\n<p>Cheers.</p>\n<p>I have yet to try anything as I'm pretty lost, as above several web developers have been unable to help so far.</p>\n"},{"tags":["java","json","gson","objectmapper"],"answers":[{"tags":[],"owner":{"account_id":25726754,"reputation":3,"user_id":19482987,"display_name":"SneakyFoxy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676009202,"creation_date":1676008997,"answer_id":75407464,"question_id":75406239,"body_markdown":"Just unquote special character \\n\r\n```\r\n      String body = &quot;{\\&quot;provision\\&quot; : \\&quot;purpose of usefuleness.\\\\n\\\\n shall not use personal-provided facilities.\\\\n\\\\nWe shall not be required to pay you.\\&quot;}&quot;;\r\n      ObjectMapper mapper = new ObjectMapper();\r\n      String result = null;\r\n      try {\r\n        JsonNode node = mapper.readTree(body);\r\n        result = mapper.writerWithDefaultPrettyPrinter().writeValueAsString(node);\r\n      } catch (IOException e) {\r\n        e.printStackTrace();\r\n      }\r\n      System.out.println(result);\r\n```\r\n```\r\n{\r\n  &quot;provision&quot; : &quot;purpose of usefuleness.\\n\\n shall not use personal-provided facilities.\\n\\nWe shall not be required to pay you.&quot;\r\n}\r\n```","title":"Java JsonObject: Converting to invalid string","body":"<p>Just unquote special character \\n</p>\n<pre><code>      String body = &quot;{\\&quot;provision\\&quot; : \\&quot;purpose of usefuleness.\\\\n\\\\n shall not use personal-provided facilities.\\\\n\\\\nWe shall not be required to pay you.\\&quot;}&quot;;\n      ObjectMapper mapper = new ObjectMapper();\n      String result = null;\n      try {\n        JsonNode node = mapper.readTree(body);\n        result = mapper.writerWithDefaultPrettyPrinter().writeValueAsString(node);\n      } catch (IOException e) {\n        e.printStackTrace();\n      }\n      System.out.println(result);\n</code></pre>\n<pre><code>{\n  &quot;provision&quot; : &quot;purpose of usefuleness.\\n\\n shall not use personal-provided facilities.\\n\\nWe shall not be required to pay you.&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":5879597,"reputation":838,"user_id":4629427,"display_name":"Rocky4Ever"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676009202,"creation_date":1675994116,"question_id":75406239,"body_markdown":"I am using objectMapper to convert object as string. While converting mappper is creating invalid string. How can I keep `JsonNode`/`JsonObject` string intact while using object mapper.\r\n\r\nJsonObject:\r\n\r\n    {\r\n    \t&quot;provision&quot;: &quot; purpose of usefuleness.\\n\\n shall not use personal-provided facilities.\\n\\nWe shall not be required to pay you. \r\n    }\r\n\r\n\r\nIs Converted to\r\n\r\n    {\r\n        \t&quot;provision&quot;: &quot; purpose of usefuleness.\r\n     \\shall not use personal-provided facilities.\r\n    \\We shall not be required to pay you. \r\n    }\r\n\r\nUsed:\r\n\r\n    new ObjectMapper().writeValuesAsString(json);\r\n\r\nHow can keep the original String intact.\r\nwith \r\n\r\n    new JsonObject(String)\r\n\r\nor\r\nwhen using\r\n\r\n     new ObjectMapper().writeValuesAsString(json);\r\n\r\n","title":"Java JsonObject: Converting to invalid string","body":"<p>I am using objectMapper to convert object as string. While converting mappper is creating invalid string. How can I keep <code>JsonNode</code>/<code>JsonObject</code> string intact while using object mapper.</p>\n<p>JsonObject:</p>\n<pre><code>{\n    &quot;provision&quot;: &quot; purpose of usefuleness.\\n\\n shall not use personal-provided facilities.\\n\\nWe shall not be required to pay you. \n}\n</code></pre>\n<p>Is Converted to</p>\n<pre><code>{\n        &quot;provision&quot;: &quot; purpose of usefuleness.\n \\shall not use personal-provided facilities.\n\\We shall not be required to pay you. \n}\n</code></pre>\n<p>Used:</p>\n<pre><code>new ObjectMapper().writeValuesAsString(json);\n</code></pre>\n<p>How can keep the original String intact.\nwith</p>\n<pre><code>new JsonObject(String)\n</code></pre>\n<p>or\nwhen using</p>\n<pre><code> new ObjectMapper().writeValuesAsString(json);\n</code></pre>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1675514133,"post_id":75343597,"comment_id":132947668,"body_markdown":"You&#39;re focusing on the caret, but you&#39;re describing the desired behavior of a Swing component.  Are you using a `JTextArea`, a `JEditorPane`, or a `JTextPane`?  Either way, you&#39;ll have to add this additional text editing behavior with your application code.","body":"You&#39;re focusing on the caret, but you&#39;re describing the desired behavior of a Swing component.  Are you using a <code>JTextArea</code>, a <code>JEditorPane</code>, or a <code>JTextPane</code>?  Either way, you&#39;ll have to add this additional text editing behavior with your application code."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1675516044,"post_id":75343597,"comment_id":132947997,"body_markdown":"I think you need to look into [editor kits](https://stackoverflow.com/questions/23414137/what-are-editorkits-in-jtextcomponents-and-what-is-their-job) and also maybe [key bindings](https://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html).","body":"I think you need to look into <a href=\"https://stackoverflow.com/questions/23414137/what-are-editorkits-in-jtextcomponents-and-what-is-their-job\">editor kits</a> and also maybe <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html\" rel=\"nofollow noreferrer\">key bindings</a>."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1675525120,"post_id":75343597,"comment_id":132949593,"body_markdown":"To the best of my knowldege, items 1 and 4 are not “standard caret behavior.”  I have never seen any editor or program exhibit that behavior except Word.  Item 3 does work in Swing when I try it.","body":"To the best of my knowldege, items 1 and 4 are not “standard caret behavior.”  I have never seen any editor or program exhibit that behavior except Word.  Item 3 does work in Swing when I try it."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1675548997,"post_id":75343597,"comment_id":132954183,"body_markdown":"@VGR Item 4 is surprisingly common. It works in Mac&#39;s TextEdit, Windows&#39; WordPad, in most Browsers, excluding Edge. I just tried it in Chrome and it works regardless of whether the text is editable. It seems to work everywhere the triple-click works. Item 1 works everywhere I&#39;ve tried it except for Windows Notepad, including all those I just mentioned. As for Item 3 in Swing, it selects the entire line, rather than the paragraph. Lines are delimited by soft line breaks rather than hard ones.","body":"@VGR Item 4 is surprisingly common. It works in Mac&#39;s TextEdit, Windows&#39; WordPad, in most Browsers, excluding Edge. I just tried it in Chrome and it works regardless of whether the text is editable. It seems to work everywhere the triple-click works. Item 1 works everywhere I&#39;ve tried it except for Windows Notepad, including all those I just mentioned. As for Item 3 in Swing, it selects the entire line, rather than the paragraph. Lines are delimited by soft line breaks rather than hard ones."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1675549072,"post_id":75343597,"comment_id":132954192,"body_markdown":"@GilbertLeBlanc The selection is controlled by the Caret. The code to do this is in `JTextComponent`, which is the common ancestor of `JTextArea`, `JEditorPane`, and `JTextPane`, as well as `JTextField`. That&#39;s where this would be done.","body":"@GilbertLeBlanc The selection is controlled by the Caret. The code to do this is in <code>JTextComponent</code>, which is the common ancestor of <code>JTextArea</code>, <code>JEditorPane</code>, and <code>JTextPane</code>, as well as <code>JTextField</code>. That&#39;s where this would be done."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1675549508,"post_id":75343597,"comment_id":132954263,"body_markdown":"@Abra Editor kits are for making changes to a file, which is a different topic. All of the behaviors I&#39;ve described work the same whether or not the component is editable. Key bindings do also affect the selection, but they communicate with the Caret class, because that&#39;s what controls the selection.","body":"@Abra Editor kits are for making changes to a file, which is a different topic. All of the behaviors I&#39;ve described work the same whether or not the component is editable. Key bindings do also affect the selection, but they communicate with the Caret class, because that&#39;s what controls the selection."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1697491163,"post_id":75343597,"comment_id":136284173,"body_markdown":"There are features I described above that don&#39;t work in Edge. Except, with my version of Edge, on my Mac, they now work. I&#39;m delighted.","body":"There are features I described above that don&#39;t work in Edge. Except, with my version of Edge, on my Mac, they now work. I&#39;m delighted."}],"answers":[{"tags":[],"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675762116,"creation_date":1675762116,"answer_id":75371306,"question_id":75343597,"body_markdown":"Here&#39;s a class I wrote to address these issues. It addresses issues 1 and 2. As far as triple-clicks go, it doesn&#39;t change the behavior of selecting the line instead the paragraph, but it addresses issue 4 on the selected line, consistent with the triple-click behavior. It doesn&#39;t address issue 5.\r\n\r\nThis class also has two factory methods that will do trouble-free installations of this caret into your text components.\r\n\r\n    import java.awt.Point;\r\n    import java.awt.Rectangle;\r\n    import java.awt.event.MouseEvent;\r\n    import java.beans.PropertyChangeListener;\r\n    import javax.swing.SwingUtilities;\r\n    import javax.swing.text.BadLocationException;\r\n    import javax.swing.text.Caret;\r\n    import javax.swing.text.DefaultCaret;\r\n    import javax.swing.text.JTextComponent;\r\n    import javax.swing.text.Position;\r\n    import javax.swing.text.Utilities;\r\n    \r\n    /**\r\n     * &lt;p&gt;Implements Standard rules for extending the selection, consistent with the standard\r\n     * behavior for extending the selection in all word processors, browsers, and other text\r\n     * editing tools, on all platforms. Without this, Swing&#39;s behavior on extending the\r\n     * selection is inconsistent with all other text editing tools.\r\n     * &lt;/p&gt;&lt;p&gt;\r\n     * Swing components don&#39;t handle selectByWord the way most UI text components do. If you\r\n     * double-click on a word, they will all select the entire word. But if you do a \r\n     * click-and-drag, most components will (a) select the entire clicked word, and\r\n     * (b) extend the selection a word at a time as the user drags across the text. And if\r\n     * you double- click on a word and follow that with a shift-click, most components will\r\n     * also extend the selection a word at a time.  Swing components handle a double-clicked\r\n     * word the standard way, but do not handle click-and-drag or shift-click correctly. This\r\n     * caret, which replaces the standard DefaultCaret, fixes this.&lt;/p&gt;\r\n     * &lt;p&gt;Created by IntelliJ IDEA.&lt;/p&gt;\r\n     * &lt;p&gt;Date: 2/23/20&lt;/p&gt;\r\n     * &lt;p&gt;Time: 10:58 PM&lt;/p&gt;\r\n     *\r\n     * @author Miguel Mu\\u00f1oz\r\n     */\r\n    public class StandardCaret extends DefaultCaret {\r\n      // In the event of a double-click, these are the positions of the low end and high end\r\n      // of the word that was clicked.\r\n      private int highMark;\r\n      private int lowMark;\r\n      private boolean selectingByWord = false; // true when the last selection was done by word.\r\n      private boolean selectingByRow = false; // true when the last selection was done by paragraph. \r\n    \r\n      /**\r\n       * Instantiate an EnhancedCaret.\r\n       */\r\n      public StandardCaret() {\r\n        super();\r\n      }\r\n    \r\n      /**\r\n       * &lt;p&gt;Install this Caret into a JTextComponent. Carets may not be shared among multiple\r\n       * components.&lt;/p&gt;\r\n       * @param component The component to use the EnhancedCaret.\r\n       */\r\n      public void installInto(JTextComponent component) {\r\n        replaceCaret(component, this);\r\n      }\r\n\r\n      /**\r\n       * Install a new StandardCaret into a JTextComponent, such as a JTextField or\r\n       * JTextArea, and starts the Caret blinking using the same blink-rate as the\r\n       * previous Caret.\r\n       *\r\n       * @param component The JTextComponent subclass\r\n       */\r\n      public static void installStandardCaret(JTextComponent component) {\r\n        replaceCaret(component, new StandardCaret());\r\n      }\r\n\r\n      /**\r\n       * Installs the specified Caret into the JTextComponent, and starts the Caret blinking\r\n       * using the same blink-rate as the previous Caret. This works with any Caret\r\n       *\r\n       * @param component The text component to get the new Caret\r\n       * @param caret     The new Caret to install\r\n       */\r\n      public static void replaceCaret(final JTextComponent component, final Caret caret) {\r\n        final Caret priorCaret = component.getCaret();\r\n        int blinkRate = priorCaret.getBlinkRate();\r\n        if (priorCaret instanceof PropertyChangeListener) {\r\n          // For example, com.apple.laf.AquaCaret, the troublemaker, installs this listener\r\n          // which doesn&#39;t get removed when the Caret gets uninstalled.\r\n          component.removePropertyChangeListener((PropertyChangeListener) priorCaret);\r\n        }\r\n        component.setCaret(caret);\r\n        caret.setBlinkRate(blinkRate); // Starts the new caret blinking.\r\n      }\r\n\r\n      @Override\r\n      public void mousePressed(final MouseEvent e) {\r\n        // if user is doing a shift-click. Construct a new MouseEvent that happened at one\r\n        // end of the word, and send that to super.mousePressed().\r\n        boolean isExtended = isExtendSelection(e);\r\n        if (selectingByWord &amp;&amp; isExtended) {\r\n          MouseEvent alternateEvent = getRevisedMouseEvent(e, Utilities::getWordStart, Utilities::getWordEnd);\r\n          super.mousePressed(alternateEvent);\r\n        } else if (selectingByRow &amp;&amp; isExtended) {\r\n          MouseEvent alternateEvent = getRevisedMouseEvent(e, Utilities::getRowStart, Utilities::getRowEnd);\r\n          super.mousePressed(alternateEvent);\r\n        } else  {\r\n          if (!isExtended) {\r\n            int clickCount = e.getClickCount();\r\n            selectingByWord = clickCount == 2;\r\n            selectingByRow = clickCount == 3;\r\n          }\r\n          super.mousePressed(e); // let the system select the clicked word\r\n          // save the low end of the selected word.\r\n          lowMark = getMark();\r\n          if (selectingByWord || selectingByRow) {\r\n            // User did a double- or triple-click...\r\n            // They&#39;ve selected the whole word. Record the high end.\r\n            highMark = getDot();\r\n          } else {\r\n            // Not a double-click.\r\n            highMark = lowMark;\r\n          }\r\n        }\r\n      }\r\n    \r\n      @Override\r\n      public void mouseClicked(final MouseEvent e) {\r\n        super.mouseClicked(e);\r\n        if (selectingByRow) {\r\n          int mark = getMark();\r\n          int dot = getDot();\r\n          lowMark = Math.min(mark, dot);\r\n          highMark = Math.max(mark, dot);\r\n        }\r\n      }\r\n    \r\n      private MouseEvent getRevisedMouseEvent(final MouseEvent e, final BiTextFunction getStart, final BiTextFunction getEnd) {\r\n        int newPos;\r\n        int pos = getPos(e);\r\n        final JTextComponent textComponent = getComponent();\r\n        try {\r\n          if (pos &gt; highMark) {\r\n            newPos = getEnd.loc(textComponent, pos);\r\n            setDot(lowMark);\r\n          } else if (pos &lt; lowMark) {\r\n            newPos = getStart.loc(textComponent, pos);\r\n            setDot(highMark);\r\n          } else {\r\n            if (getMark() == lowMark) {\r\n              newPos = getEnd.loc(textComponent, pos);\r\n            } else {\r\n              newPos = getStart.loc(textComponent, pos);\r\n            }\r\n            pos = -1; // ensure we make a new event\r\n          }\r\n        } catch (BadLocationException ex) {\r\n          throw new IllegalStateException(ex);\r\n        }\r\n        MouseEvent alternateEvent;\r\n        if (newPos == pos) {\r\n          alternateEvent = e;\r\n        } else {\r\n          alternateEvent = makeNewEvent(e, newPos);\r\n        }\r\n        return alternateEvent;\r\n      }\r\n    \r\n      private boolean isExtendSelection(MouseEvent e) {\r\n        // We extend the selection when the shift is down but control is not. Other modifiers don&#39;t matter.\r\n        int modifiers = e.getModifiersEx();\r\n        int shiftAndControlDownMask = MouseEvent.SHIFT_DOWN_MASK | MouseEvent.CTRL_DOWN_MASK;\r\n        return (modifiers &amp; shiftAndControlDownMask) == MouseEvent.SHIFT_DOWN_MASK;\r\n      }\r\n    \r\n      @Override\r\n      public void setDot(final int dot, final Position.Bias dotBias) {\r\n        super.setDot(dot, dotBias);\r\n      }\r\n    \r\n      @Override\r\n      public void mouseDragged(final MouseEvent e) {\r\n        if (!selectingByWord &amp;&amp; !selectingByRow) {\r\n          super.mouseDragged(e);\r\n        } else {\r\n          BiTextFunction getStart;\r\n          BiTextFunction getEnd;\r\n          if (selectingByWord) {\r\n            getStart = Utilities::getWordStart;\r\n            getEnd = Utilities::getWordEnd;\r\n          } else {\r\n            // selecting by paragraph\r\n            getStart = Utilities::getRowStart;\r\n            getEnd = Utilities::getRowEnd;\r\n          }\r\n          // super.mouseDragged just calls moveDot() after getting the position. We can do\r\n          // the same thing...\r\n          // There&#39;s no &quot;setMark()&quot; method. You can set the mark by calling setDot(). It sets\r\n          // both the mark and the dot to the same place. Then you can call moveDot() to put\r\n          // the dot somewhere else.\r\n          if ((!e.isConsumed()) &amp;&amp; SwingUtilities.isLeftMouseButton(e)) {\r\n            int pos = getPos(e);\r\n            JTextComponent component = getComponent();\r\n            try {\r\n              if (pos &gt; highMark) {\r\n                int wordEnd = getEnd.loc(component, pos);\r\n                setDot(lowMark);\r\n                moveDot(wordEnd);\r\n              } else if (pos &lt; lowMark) {\r\n                int wordStart = getStart.loc(component, pos);\r\n                setDot(wordStart); // Sets the mark, too\r\n                moveDot(highMark);\r\n              } else {\r\n                setDot(lowMark);\r\n                moveDot(highMark);\r\n              }\r\n            } catch (BadLocationException ex) {\r\n              ex.printStackTrace();\r\n            }\r\n          }\r\n        }\r\n      }\r\n    \r\n      private int getPos(final MouseEvent e) {\r\n        JTextComponent component = getComponent();\r\n        Point pt = new Point(e.getX(), e.getY());\r\n        Position.Bias[] biasRet = new Position.Bias[1];\r\n        return component.getUI().viewToModel(component, pt, biasRet);\r\n      }\r\n      \r\n      private MouseEvent makeNewEvent(MouseEvent e, int pos) {\r\n        JTextComponent component = getComponent();\r\n        try {\r\n          Rectangle rect = component.getUI().modelToView(component, pos);\r\n          return new MouseEvent(\r\n              component,\r\n              e.getID(),\r\n              e.getWhen(),\r\n              e.getModifiers(),\r\n              rect.x,\r\n              rect.y,\r\n              e.getClickCount(),\r\n              e.isPopupTrigger(),\r\n              e.getButton()\r\n          );\r\n        } catch (BadLocationException ev) {\r\n          ev.printStackTrace();\r\n          throw new IllegalStateException(ev);\r\n        }\r\n      }\r\n    \r\n    // For eventual use by a &quot;select paragraph&quot; feature:\r\n    //  private static final char NEW_LINE = &#39;\\n&#39;;\r\n    //  private static int getParagraphStart(JTextComponent component, int position) {\r\n    //    return component.getText().substring(0, position).lastIndexOf(NEW_LINE);\r\n    //  }\r\n    //  \r\n    //  private static int getParagraphEnd(JTextComponent component, int position) {\r\n    //    return component.getText().indexOf(NEW_LINE, position);\r\n    //  }\r\n\r\n      /**\r\n       * Don&#39;t use this. I should throw CloneNotSupportedException, but it won&#39;t compile if I\r\n       * do. Changing the access to protected doesn&#39;t help. If you don&#39;t believe me, try it\r\n       * yourself.\r\n       * @return A bad clone of this.\r\n       */      \r\n      @SuppressWarnings({&quot;CloneReturnsClassType&quot;, &quot;UseOfClone&quot;})\r\n      @Override\r\n      public Object clone() {\r\n        return super.clone();\r\n      }\r\n      \r\n      @FunctionalInterface\r\n      private interface BiTextFunction {\r\n        int loc(JTextComponent component, int position) throws BadLocationException;\r\n      }\r\n    }\r\n","title":"How do I get standard Caret behavior in Java Swing?","body":"<p>Here's a class I wrote to address these issues. It addresses issues 1 and 2. As far as triple-clicks go, it doesn't change the behavior of selecting the line instead the paragraph, but it addresses issue 4 on the selected line, consistent with the triple-click behavior. It doesn't address issue 5.</p>\n<p>This class also has two factory methods that will do trouble-free installations of this caret into your text components.</p>\n<pre><code>import java.awt.Point;\nimport java.awt.Rectangle;\nimport java.awt.event.MouseEvent;\nimport java.beans.PropertyChangeListener;\nimport javax.swing.SwingUtilities;\nimport javax.swing.text.BadLocationException;\nimport javax.swing.text.Caret;\nimport javax.swing.text.DefaultCaret;\nimport javax.swing.text.JTextComponent;\nimport javax.swing.text.Position;\nimport javax.swing.text.Utilities;\n\n/**\n * &lt;p&gt;Implements Standard rules for extending the selection, consistent with the standard\n * behavior for extending the selection in all word processors, browsers, and other text\n * editing tools, on all platforms. Without this, Swing's behavior on extending the\n * selection is inconsistent with all other text editing tools.\n * &lt;/p&gt;&lt;p&gt;\n * Swing components don't handle selectByWord the way most UI text components do. If you\n * double-click on a word, they will all select the entire word. But if you do a \n * click-and-drag, most components will (a) select the entire clicked word, and\n * (b) extend the selection a word at a time as the user drags across the text. And if\n * you double- click on a word and follow that with a shift-click, most components will\n * also extend the selection a word at a time.  Swing components handle a double-clicked\n * word the standard way, but do not handle click-and-drag or shift-click correctly. This\n * caret, which replaces the standard DefaultCaret, fixes this.&lt;/p&gt;\n * &lt;p&gt;Created by IntelliJ IDEA.&lt;/p&gt;\n * &lt;p&gt;Date: 2/23/20&lt;/p&gt;\n * &lt;p&gt;Time: 10:58 PM&lt;/p&gt;\n *\n * @author Miguel Mu\\u00f1oz\n */\npublic class StandardCaret extends DefaultCaret {\n  // In the event of a double-click, these are the positions of the low end and high end\n  // of the word that was clicked.\n  private int highMark;\n  private int lowMark;\n  private boolean selectingByWord = false; // true when the last selection was done by word.\n  private boolean selectingByRow = false; // true when the last selection was done by paragraph. \n\n  /**\n   * Instantiate an EnhancedCaret.\n   */\n  public StandardCaret() {\n    super();\n  }\n\n  /**\n   * &lt;p&gt;Install this Caret into a JTextComponent. Carets may not be shared among multiple\n   * components.&lt;/p&gt;\n   * @param component The component to use the EnhancedCaret.\n   */\n  public void installInto(JTextComponent component) {\n    replaceCaret(component, this);\n  }\n\n  /**\n   * Install a new StandardCaret into a JTextComponent, such as a JTextField or\n   * JTextArea, and starts the Caret blinking using the same blink-rate as the\n   * previous Caret.\n   *\n   * @param component The JTextComponent subclass\n   */\n  public static void installStandardCaret(JTextComponent component) {\n    replaceCaret(component, new StandardCaret());\n  }\n\n  /**\n   * Installs the specified Caret into the JTextComponent, and starts the Caret blinking\n   * using the same blink-rate as the previous Caret. This works with any Caret\n   *\n   * @param component The text component to get the new Caret\n   * @param caret     The new Caret to install\n   */\n  public static void replaceCaret(final JTextComponent component, final Caret caret) {\n    final Caret priorCaret = component.getCaret();\n    int blinkRate = priorCaret.getBlinkRate();\n    if (priorCaret instanceof PropertyChangeListener) {\n      // For example, com.apple.laf.AquaCaret, the troublemaker, installs this listener\n      // which doesn't get removed when the Caret gets uninstalled.\n      component.removePropertyChangeListener((PropertyChangeListener) priorCaret);\n    }\n    component.setCaret(caret);\n    caret.setBlinkRate(blinkRate); // Starts the new caret blinking.\n  }\n\n  @Override\n  public void mousePressed(final MouseEvent e) {\n    // if user is doing a shift-click. Construct a new MouseEvent that happened at one\n    // end of the word, and send that to super.mousePressed().\n    boolean isExtended = isExtendSelection(e);\n    if (selectingByWord &amp;&amp; isExtended) {\n      MouseEvent alternateEvent = getRevisedMouseEvent(e, Utilities::getWordStart, Utilities::getWordEnd);\n      super.mousePressed(alternateEvent);\n    } else if (selectingByRow &amp;&amp; isExtended) {\n      MouseEvent alternateEvent = getRevisedMouseEvent(e, Utilities::getRowStart, Utilities::getRowEnd);\n      super.mousePressed(alternateEvent);\n    } else  {\n      if (!isExtended) {\n        int clickCount = e.getClickCount();\n        selectingByWord = clickCount == 2;\n        selectingByRow = clickCount == 3;\n      }\n      super.mousePressed(e); // let the system select the clicked word\n      // save the low end of the selected word.\n      lowMark = getMark();\n      if (selectingByWord || selectingByRow) {\n        // User did a double- or triple-click...\n        // They've selected the whole word. Record the high end.\n        highMark = getDot();\n      } else {\n        // Not a double-click.\n        highMark = lowMark;\n      }\n    }\n  }\n\n  @Override\n  public void mouseClicked(final MouseEvent e) {\n    super.mouseClicked(e);\n    if (selectingByRow) {\n      int mark = getMark();\n      int dot = getDot();\n      lowMark = Math.min(mark, dot);\n      highMark = Math.max(mark, dot);\n    }\n  }\n\n  private MouseEvent getRevisedMouseEvent(final MouseEvent e, final BiTextFunction getStart, final BiTextFunction getEnd) {\n    int newPos;\n    int pos = getPos(e);\n    final JTextComponent textComponent = getComponent();\n    try {\n      if (pos &gt; highMark) {\n        newPos = getEnd.loc(textComponent, pos);\n        setDot(lowMark);\n      } else if (pos &lt; lowMark) {\n        newPos = getStart.loc(textComponent, pos);\n        setDot(highMark);\n      } else {\n        if (getMark() == lowMark) {\n          newPos = getEnd.loc(textComponent, pos);\n        } else {\n          newPos = getStart.loc(textComponent, pos);\n        }\n        pos = -1; // ensure we make a new event\n      }\n    } catch (BadLocationException ex) {\n      throw new IllegalStateException(ex);\n    }\n    MouseEvent alternateEvent;\n    if (newPos == pos) {\n      alternateEvent = e;\n    } else {\n      alternateEvent = makeNewEvent(e, newPos);\n    }\n    return alternateEvent;\n  }\n\n  private boolean isExtendSelection(MouseEvent e) {\n    // We extend the selection when the shift is down but control is not. Other modifiers don't matter.\n    int modifiers = e.getModifiersEx();\n    int shiftAndControlDownMask = MouseEvent.SHIFT_DOWN_MASK | MouseEvent.CTRL_DOWN_MASK;\n    return (modifiers &amp; shiftAndControlDownMask) == MouseEvent.SHIFT_DOWN_MASK;\n  }\n\n  @Override\n  public void setDot(final int dot, final Position.Bias dotBias) {\n    super.setDot(dot, dotBias);\n  }\n\n  @Override\n  public void mouseDragged(final MouseEvent e) {\n    if (!selectingByWord &amp;&amp; !selectingByRow) {\n      super.mouseDragged(e);\n    } else {\n      BiTextFunction getStart;\n      BiTextFunction getEnd;\n      if (selectingByWord) {\n        getStart = Utilities::getWordStart;\n        getEnd = Utilities::getWordEnd;\n      } else {\n        // selecting by paragraph\n        getStart = Utilities::getRowStart;\n        getEnd = Utilities::getRowEnd;\n      }\n      // super.mouseDragged just calls moveDot() after getting the position. We can do\n      // the same thing...\n      // There's no &quot;setMark()&quot; method. You can set the mark by calling setDot(). It sets\n      // both the mark and the dot to the same place. Then you can call moveDot() to put\n      // the dot somewhere else.\n      if ((!e.isConsumed()) &amp;&amp; SwingUtilities.isLeftMouseButton(e)) {\n        int pos = getPos(e);\n        JTextComponent component = getComponent();\n        try {\n          if (pos &gt; highMark) {\n            int wordEnd = getEnd.loc(component, pos);\n            setDot(lowMark);\n            moveDot(wordEnd);\n          } else if (pos &lt; lowMark) {\n            int wordStart = getStart.loc(component, pos);\n            setDot(wordStart); // Sets the mark, too\n            moveDot(highMark);\n          } else {\n            setDot(lowMark);\n            moveDot(highMark);\n          }\n        } catch (BadLocationException ex) {\n          ex.printStackTrace();\n        }\n      }\n    }\n  }\n\n  private int getPos(final MouseEvent e) {\n    JTextComponent component = getComponent();\n    Point pt = new Point(e.getX(), e.getY());\n    Position.Bias[] biasRet = new Position.Bias[1];\n    return component.getUI().viewToModel(component, pt, biasRet);\n  }\n  \n  private MouseEvent makeNewEvent(MouseEvent e, int pos) {\n    JTextComponent component = getComponent();\n    try {\n      Rectangle rect = component.getUI().modelToView(component, pos);\n      return new MouseEvent(\n          component,\n          e.getID(),\n          e.getWhen(),\n          e.getModifiers(),\n          rect.x,\n          rect.y,\n          e.getClickCount(),\n          e.isPopupTrigger(),\n          e.getButton()\n      );\n    } catch (BadLocationException ev) {\n      ev.printStackTrace();\n      throw new IllegalStateException(ev);\n    }\n  }\n\n// For eventual use by a &quot;select paragraph&quot; feature:\n//  private static final char NEW_LINE = '\\n';\n//  private static int getParagraphStart(JTextComponent component, int position) {\n//    return component.getText().substring(0, position).lastIndexOf(NEW_LINE);\n//  }\n//  \n//  private static int getParagraphEnd(JTextComponent component, int position) {\n//    return component.getText().indexOf(NEW_LINE, position);\n//  }\n\n  /**\n   * Don't use this. I should throw CloneNotSupportedException, but it won't compile if I\n   * do. Changing the access to protected doesn't help. If you don't believe me, try it\n   * yourself.\n   * @return A bad clone of this.\n   */      \n  @SuppressWarnings({&quot;CloneReturnsClassType&quot;, &quot;UseOfClone&quot;})\n  @Override\n  public Object clone() {\n    return super.clone();\n  }\n  \n  @FunctionalInterface\n  private interface BiTextFunction {\n    int loc(JTextComponent component, int position) throws BadLocationException;\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":75371306,"answer_count":1,"score":1,"last_activity_date":1676008844,"creation_date":1675495485,"question_id":75343597,"body_markdown":"The Swing Text components, all of which extend `JTextComponent`, when the user selects some text, the `JTextComponent` class delegates the work of handling selected text to an instance of the `Caret` interface, called `DefaultCaret`. This interface not only shows the blinking caret, it keeps track of whatever text the user has selected, and response to mouse and keyboard events that changes the selection range.\r\n\r\nThe Swing `DefaultCaret` has most of the behavior of a standard caret, but some of my high-end users have pointed out what it doesn&#39;t do. Here are their issues:\r\n\r\n(Note: These examples have trouble in Microsoft Edge because, when you select text, it puts up a &quot;...&quot; menu. In these examples, if you&#39;re using Edge, you need to type the escape key to get rid of that menu before going on to the next step.)\r\n\r\n 1. If I double-click on a word, it should select the entire word. Java Swing&#39;s Caret does this. But, after doubling-clicking on a word, if I then try to extend the selection by shift-clicking on a second word, a standard caret extends the selection to include the entire second word. To illustrate, in the example text below, if I double-click after the o in clock, it selects the word clock, as it should. But if I then hold down the shift key and click after the o in wound, it should extend the selection all the way to the d. It does so on this page, but not in Java Swing. In Swing, it still extends the selection, but only to the location of the mouse-click.\r\n\r\n    Example: The clock has been wound too tight.\r\n\r\n 2. If I try to select a block of text by doing a full click, then drag, it should extend the selection by an entire word at a time as I drag through the text. (By &quot;full click, then drag, I mean the following events done quickly on the same spot: mouseDown, mouseUp, mouseDown, mouseMove. This is like a double-click without the final mouse-up event.) You can try it on this page, and it will work, but it won&#39;t work in Java Swing. In Swing it will still extend the selection, but only to the position of the mouse.\r\n\r\n 3. If I triple-click on some text, it will select the whole paragraph. (This doesn&#39;t work in Microsoft Edge, but it works in most browsers and editors) This doesn&#39;t work in Swing.\r\n\r\n 4. If, after triple-clicking to select a paragraph, I then do a shift-click on a different paragraph, it should extend the selection to include the entire new paragraph.\r\n\r\n 5. Like the full-click and drag example in item 2, if you do a full double-click and drag, it should first select the entire paragraph, then extend the selection one paragraph at a time. (Again, this doesn&#39;t work in Edge.) This behavior is less standard than the others, but it&#39;s still pretty common.\r\n\r\nSome of my power users want to be able to use these in the Java Swing application that I maintain, and I want to give it to them. The whole point of my application is to speed up the processing of their data, and these changes will help with that. How can I do this?","title":"How do I get standard Caret behavior in Java Swing?","body":"<p>The Swing Text components, all of which extend <code>JTextComponent</code>, when the user selects some text, the <code>JTextComponent</code> class delegates the work of handling selected text to an instance of the <code>Caret</code> interface, called <code>DefaultCaret</code>. This interface not only shows the blinking caret, it keeps track of whatever text the user has selected, and response to mouse and keyboard events that changes the selection range.</p>\n<p>The Swing <code>DefaultCaret</code> has most of the behavior of a standard caret, but some of my high-end users have pointed out what it doesn't do. Here are their issues:</p>\n<p>(Note: These examples have trouble in Microsoft Edge because, when you select text, it puts up a &quot;...&quot; menu. In these examples, if you're using Edge, you need to type the escape key to get rid of that menu before going on to the next step.)</p>\n<ol>\n<li><p>If I double-click on a word, it should select the entire word. Java Swing's Caret does this. But, after doubling-clicking on a word, if I then try to extend the selection by shift-clicking on a second word, a standard caret extends the selection to include the entire second word. To illustrate, in the example text below, if I double-click after the o in clock, it selects the word clock, as it should. But if I then hold down the shift key and click after the o in wound, it should extend the selection all the way to the d. It does so on this page, but not in Java Swing. In Swing, it still extends the selection, but only to the location of the mouse-click.</p>\n<p>Example: The clock has been wound too tight.</p>\n</li>\n<li><p>If I try to select a block of text by doing a full click, then drag, it should extend the selection by an entire word at a time as I drag through the text. (By &quot;full click, then drag, I mean the following events done quickly on the same spot: mouseDown, mouseUp, mouseDown, mouseMove. This is like a double-click without the final mouse-up event.) You can try it on this page, and it will work, but it won't work in Java Swing. In Swing it will still extend the selection, but only to the position of the mouse.</p>\n</li>\n<li><p>If I triple-click on some text, it will select the whole paragraph. (This doesn't work in Microsoft Edge, but it works in most browsers and editors) This doesn't work in Swing.</p>\n</li>\n<li><p>If, after triple-clicking to select a paragraph, I then do a shift-click on a different paragraph, it should extend the selection to include the entire new paragraph.</p>\n</li>\n<li><p>Like the full-click and drag example in item 2, if you do a full double-click and drag, it should first select the entire paragraph, then extend the selection one paragraph at a time. (Again, this doesn't work in Edge.) This behavior is less standard than the others, but it's still pretty common.</p>\n</li>\n</ol>\n<p>Some of my power users want to be able to use these in the Java Swing application that I maintain, and I want to give it to them. The whole point of my application is to speed up the processing of their data, and these changes will help with that. How can I do this?</p>\n"},{"tags":["java","json","concatenation"],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676008615,"creation_date":1676008615,"answer_id":75407426,"question_id":75390657,"body_markdown":"Usually you use a third-party library for parsing JSON. There are several. The below code uses [Gson][1].\r\n\r\nNote that the below code is not terribly robust, it assumes that there are no nested elements and that the values are all primitives. That is what you specifically asked for, i.e. specific input and specific output, and I am posting a solution that achieves what you specifically asked for.\r\n```java\r\nimport com.google.gson.JsonElement;\r\nimport com.google.gson.JsonObject;\r\nimport com.google.gson.JsonParser;\r\nimport com.google.gson.JsonPrimitive;\r\n\r\nimport java.util.Map;\r\nimport java.util.Set;\r\n\r\npublic class GsonTst0 {\r\n\r\n    public static void main(String[] args) {\r\n        String json = &quot;{ \\&quot;Id\\&quot;: 200, \\&quot;TimeStamp\\&quot;: 1596466800, \\&quot;Animal\\&quot;: \\&quot;cat\\&quot;}&quot;;\r\n        JsonElement root = JsonParser.parseString(json);\r\n        if (root.isJsonObject()) {\r\n            JsonObject jsonObj = root.getAsJsonObject();\r\n            Set&lt;Map.Entry&lt;String, JsonElement&gt;&gt; entries = jsonObj.entrySet();\r\n            StringBuilder sb = new StringBuilder();\r\n            for (Map.Entry&lt;String, JsonElement&gt; entry : entries) {\r\n                sb.append(entry.getKey());\r\n                JsonElement elem = entry.getValue();\r\n                JsonPrimitive prim = elem.getAsJsonPrimitive();\r\n                if (prim.isNumber()) {\r\n                    sb.append(prim.getAsBigDecimal());\r\n                }\r\n                else {\r\n                    sb.append(prim.getAsString());\r\n                }\r\n            }\r\n            System.out.println(sb);\r\n        }\r\n    }\r\n}\r\n```\r\nRunning the above code prints the following:\r\n```none\r\nId200TimeStamp1596466800Animalcat\r\n```\r\n\r\n\r\n  [1]: https://github.com/google/gson","title":"Concatenate all JSON key-value pairs into a String","body":"<p>Usually you use a third-party library for parsing JSON. There are several. The below code uses <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">Gson</a>.</p>\n<p>Note that the below code is not terribly robust, it assumes that there are no nested elements and that the values are all primitives. That is what you specifically asked for, i.e. specific input and specific output, and I am posting a solution that achieves what you specifically asked for.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.google.gson.JsonElement;\nimport com.google.gson.JsonObject;\nimport com.google.gson.JsonParser;\nimport com.google.gson.JsonPrimitive;\n\nimport java.util.Map;\nimport java.util.Set;\n\npublic class GsonTst0 {\n\n    public static void main(String[] args) {\n        String json = &quot;{ \\&quot;Id\\&quot;: 200, \\&quot;TimeStamp\\&quot;: 1596466800, \\&quot;Animal\\&quot;: \\&quot;cat\\&quot;}&quot;;\n        JsonElement root = JsonParser.parseString(json);\n        if (root.isJsonObject()) {\n            JsonObject jsonObj = root.getAsJsonObject();\n            Set&lt;Map.Entry&lt;String, JsonElement&gt;&gt; entries = jsonObj.entrySet();\n            StringBuilder sb = new StringBuilder();\n            for (Map.Entry&lt;String, JsonElement&gt; entry : entries) {\n                sb.append(entry.getKey());\n                JsonElement elem = entry.getValue();\n                JsonPrimitive prim = elem.getAsJsonPrimitive();\n                if (prim.isNumber()) {\n                    sb.append(prim.getAsBigDecimal());\n                }\n                else {\n                    sb.append(prim.getAsString());\n                }\n            }\n            System.out.println(sb);\n        }\n    }\n}\n</code></pre>\n<p>Running the above code prints the following:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Id200TimeStamp1596466800Animalcat\n</code></pre>\n"}],"owner":{"account_id":27737989,"reputation":1,"user_id":21175108,"display_name":"Aliaksandr Rybin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":1,"score":-4,"last_activity_date":1676008615,"creation_date":1675883576,"question_id":75390657,"body_markdown":"I have input:\r\n{\r\n  &quot;Id&quot;: 200,\r\n  &quot;TimeStamp&quot;: 1596466800,\r\n  &quot;Animal&quot;: &quot;cat&quot;\r\n}\r\n\r\nI need to concatenate all key-value pairs in one String\r\n\r\nI need output:\r\n&quot;Id200Timestamp1596466800Animalcat&quot;","title":"Concatenate all JSON key-value pairs into a String","body":"<p>I have input:\n{\n&quot;Id&quot;: 200,\n&quot;TimeStamp&quot;: 1596466800,\n&quot;Animal&quot;: &quot;cat&quot;\n}</p>\n<p>I need to concatenate all key-value pairs in one String</p>\n<p>I need output:\n&quot;Id200Timestamp1596466800Animalcat&quot;</p>\n"},{"tags":["java","memory","footprint"],"answers":[{"tags":[],"owner":{"account_id":2391,"reputation":36935,"user_id":3320,"accept_rate":100,"display_name":"Mendelt"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1225700777,"creation_date":1225700777,"answer_id":258124,"question_id":258120,"body_markdown":"No, registering an object takes a bit of memory too. 100 objects with 1 attribute will take up more memory.","title":"What is the memory consumption of an object in Java?","body":"<p>No, registering an object takes a bit of memory too. 100 objects with 1 attribute will take up more memory.</p>\n"},{"tags":[],"owner":{"account_id":7406,"reputation":14638,"user_id":12860,"accept_rate":98,"display_name":"Burkhard"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1225700832,"creation_date":1225700832,"answer_id":258127,"question_id":258120,"body_markdown":"no, 100 small objects needs more information (memory) than one big.","title":"What is the memory consumption of an object in Java?","body":"<p>no, 100 small objects needs more information (memory) than one big.</p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1295850187,"creation_date":1225701592,"answer_id":258143,"question_id":258120,"body_markdown":"Each object has a certain overhead for its associated monitor and type information, as well as the fields themselves. Beyond that, fields can be laid out pretty much however the JVM sees fit (I believe) - but as [shown in another answer][1], at least *some* JVMs will pack fairly tightly. Consider a class like this:\r\n\r\n    public class SingleByte\r\n    {\r\n        private byte b;\r\n    }\r\n\r\nvs\r\n\r\n    public class OneHundredBytes\r\n    {\r\n        private byte b00, b01, ..., b99;\r\n    }\r\n\r\nOn a 32-bit JVM, I&#39;d expect 100 instances of `SingleByte` to take 1200 bytes (8 bytes of overhead + 4 bytes for the field due to padding/alignment). I&#39;d expect one instance of `OneHundredBytes` to take 108 bytes - the overhead, and then 100 bytes, packed. It can certainly vary by JVM though - one implementation may decide not to pack the fields in `OneHundredBytes`, leading to it taking 408 bytes (= 8 bytes overhead + 4 * 100 aligned/padded bytes). On a 64 bit JVM the overhead may well be bigger too (not sure).\r\n\r\nEDIT: See the comment below; apparently HotSpot pads to 8 byte boundaries instead of 32, so each instance of `SingleByte` would take 16 bytes.\r\n\r\nEither way, the &quot;single large object&quot; will be at least as efficient as multiple small objects - for simple cases like this.\r\n\r\n  [1]: https://stackoverflow.com/questions/229886/size-of-a-byte-in-memory-java#230063\r\n\r\n","title":"What is the memory consumption of an object in Java?","body":"<p>Each object has a certain overhead for its associated monitor and type information, as well as the fields themselves. Beyond that, fields can be laid out pretty much however the JVM sees fit (I believe) - but as <a href=\"https://stackoverflow.com/questions/229886/size-of-a-byte-in-memory-java#230063\">shown in another answer</a>, at least <em>some</em> JVMs will pack fairly tightly. Consider a class like this:</p>\n\n<pre><code>public class SingleByte\n{\n    private byte b;\n}\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>public class OneHundredBytes\n{\n    private byte b00, b01, ..., b99;\n}\n</code></pre>\n\n<p>On a 32-bit JVM, I'd expect 100 instances of <code>SingleByte</code> to take 1200 bytes (8 bytes of overhead + 4 bytes for the field due to padding/alignment). I'd expect one instance of <code>OneHundredBytes</code> to take 108 bytes - the overhead, and then 100 bytes, packed. It can certainly vary by JVM though - one implementation may decide not to pack the fields in <code>OneHundredBytes</code>, leading to it taking 408 bytes (= 8 bytes overhead + 4 * 100 aligned/padded bytes). On a 64 bit JVM the overhead may well be bigger too (not sure).</p>\n\n<p>EDIT: See the comment below; apparently HotSpot pads to 8 byte boundaries instead of 32, so each instance of <code>SingleByte</code> would take 16 bytes.</p>\n\n<p>Either way, the \"single large object\" will be at least as efficient as multiple small objects - for simple cases like this.</p>\n"},{"tags":[],"owner":{"account_id":4243,"reputation":1301840,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":200,"is_accepted":false,"score":200,"last_activity_date":1457134801,"creation_date":1225701739,"answer_id":258150,"question_id":258120,"body_markdown":"[Mindprod][12] points out that this is not a straightforward question to answer:\r\n\r\n&gt; A JVM is free to store data any way it pleases internally, big or little endian, with any amount of padding or overhead, though primitives must behave as if they had the official sizes.  \r\nFor example, the JVM or native compiler might decide to store a `boolean[]` in 64-bit long chunks like a `BitSet`. It does not have to tell you, so long as the program gives the same answers.\r\n\r\n&gt; - It might allocate some temporary Objects on the stack. \r\n&gt; - It may optimize some variables or method calls totally out of existence replacing them with constants. \r\n&gt; - It might version methods or loops, i.e. compile two versions of a method, each optimized for a certain situation, then decide up front which one to call. \r\n\r\n&gt; Then of course the hardware and OS have multilayer caches, on chip-cache, SRAM cache, DRAM cache, ordinary RAM working set and backing store on disk. Your data may be duplicated at every cache level. All this complexity means you can only very roughly predict RAM consumption. \r\n\r\n## Measurement methods\r\n\r\nYou can use [`Instrumentation.getObjectSize()`][10] to obtain an estimate of the storage consumed by an object.\r\n\r\nTo visualize the *actual* object layout, footprint, and references, you can use the [JOL (Java Object Layout) tool][5].\r\n\r\n## Object headers and Object references\r\n\r\nIn a modern 64-bit JDK, an object has a 12-byte header, padded to a multiple of 8 bytes, so the minimum object size is 16 bytes.  For 32-bit JVMs, the overhead is 8 bytes, padded to a multiple of 4 bytes.  _(From [Dmitry Spikhalskiy&#39;s answer][2], [Jayen&#39;s answer][4], and [JavaWorld][9].)_\r\n\r\nTypically, references are 4 bytes on 32bit platforms or on 64bit platforms up to `-Xmx32G`; and 8 bytes above 32Gb (`-Xmx32G`).  _(See [compressed object references][13].)_\r\n\r\nAs a result, a 64-bit JVM would typically require 30-50% more heap space. _([Should I use a 32- or a 64-bit JVM?][7], 2012, JDK 1.7)_\r\n\r\n## Boxed types, arrays, and strings\r\n\r\nBoxed wrappers have overhead compared to primitive types (from [JavaWorld][9]):\r\n\r\n&gt; - **`Integer`**: The 16-byte result is a little worse than I expected because an `int` value can fit into just 4 extra bytes. Using an `Integer` costs me a 300 percent memory overhead compared to when I can store the value as a primitive type\r\n&gt; \r\n&gt; - **`Long`**: 16 bytes also: Clearly, actual object size on the heap is subject to low-level memory alignment done by a particular JVM implementation for a particular CPU type. It looks like a `Long` is 8 bytes of Object overhead, plus 8 bytes more for the actual long value. In contrast, `Integer` had an unused 4-byte hole, most likely because the JVM I use forces object alignment on an 8-byte word boundary. \r\n\r\nOther containers are costly too:\r\n\r\n&gt; - **Multidimensional arrays**: it offers another surprise.  \r\nDevelopers commonly employ constructs like `int[dim1][dim2]` in numerical and scientific computing.\r\n&gt; \r\n&gt;   In an `int[dim1][dim2]` array instance, every nested `int[dim2]` array is an `Object` in its own right. Each adds the usual 16-byte array overhead. When I don&#39;t need a triangular or ragged array, that represents pure overhead. The impact grows when array dimensions greatly differ.\r\n&gt; \r\n&gt;   For example, a `int[128][2]` instance takes 3,600 bytes. Compared to the 1,040 bytes an `int[256]` instance uses (which has the same capacity), 3,600 bytes represent a 246 percent overhead. In the extreme case of `byte[256][1]`, the overhead factor is almost 19! Compare that to the C/C++ situation in which the same syntax does not add any storage overhead. \r\n&gt; \r\n&gt; - **`String`**: a `String`&#39;s memory growth tracks its internal char array&#39;s growth. However, the `String` class adds another 24 bytes of overhead.\r\n&gt; \r\n&gt;   For a nonempty `String` of size 10 characters or less, the added overhead cost relative to useful payload (2 bytes for each char plus 4 bytes for the length), ranges from 100 to 400 percent. \r\n\r\n## Alignment\r\n\r\nConsider this [example object][8]:\r\n\r\n    class X {                      // 8 bytes for reference to the class definition\r\n       int a;                      // 4 bytes\r\n       byte b;                     // 1 byte\r\n       Integer c = new Integer();  // 4 bytes for a reference\r\n    }\r\n\r\nA na&#239;ve sum would suggest that an instance of `X` would use 17 bytes.  However, due to alignment (also called padding), the JVM allocates the memory in multiples of 8 bytes, so instead of 17 bytes it would allocate 24 bytes.\r\n\r\n\r\n  [2]: https://stackoverflow.com/a/32224498/6309\r\n  [4]: https://stackoverflow.com/a/35407947/6309\r\n  [5]: http://openjdk.java.net/projects/code-tools/jol/\r\n  [6]: http://hg.openjdk.java.net/code-tools/jol/\r\n  [7]: http://www.javacodegeeks.com/2012/12/should-i-use-a-32-or-a-64-bit-jvm.html\r\n  [8]: https://plumbr.eu/blog/memory-leaks/how-much-memory-do-i-need-part-2-what-is-shallow-heap\r\n  [9]: http://www.javaworld.com/javaworld/javatips/jw-javatip130.html\r\n  [10]: https://docs.oracle.com/javase/8/docs/api/java/lang/instrument/Instrumentation.html#getObjectSize-java.lang.Object-\r\n  [12]: http://mindprod.com/jgloss/sizeof.html\r\n  [13]: http://www.lowtek.ca/roo/2008/java-performance-in-64bit-land/","title":"What is the memory consumption of an object in Java?","body":"<p><a href=\"http://mindprod.com/jgloss/sizeof.html\" rel=\"noreferrer\">Mindprod</a> points out that this is not a straightforward question to answer:</p>\n\n<blockquote>\n  <p>A JVM is free to store data any way it pleases internally, big or little endian, with any amount of padding or overhead, though primitives must behave as if they had the official sizes.<br>\n  For example, the JVM or native compiler might decide to store a <code>boolean[]</code> in 64-bit long chunks like a <code>BitSet</code>. It does not have to tell you, so long as the program gives the same answers.</p>\n  \n  <ul>\n  <li>It might allocate some temporary Objects on the stack. </li>\n  <li>It may optimize some variables or method calls totally out of existence replacing them with constants. </li>\n  <li>It might version methods or loops, i.e. compile two versions of a method, each optimized for a certain situation, then decide up front which one to call. </li>\n  </ul>\n  \n  <p>Then of course the hardware and OS have multilayer caches, on chip-cache, SRAM cache, DRAM cache, ordinary RAM working set and backing store on disk. Your data may be duplicated at every cache level. All this complexity means you can only very roughly predict RAM consumption. </p>\n</blockquote>\n\n<h2>Measurement methods</h2>\n\n<p>You can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/instrument/Instrumentation.html#getObjectSize-java.lang.Object-\" rel=\"noreferrer\"><code>Instrumentation.getObjectSize()</code></a> to obtain an estimate of the storage consumed by an object.</p>\n\n<p>To visualize the <em>actual</em> object layout, footprint, and references, you can use the <a href=\"http://openjdk.java.net/projects/code-tools/jol/\" rel=\"noreferrer\">JOL (Java Object Layout) tool</a>.</p>\n\n<h2>Object headers and Object references</h2>\n\n<p>In a modern 64-bit JDK, an object has a 12-byte header, padded to a multiple of 8 bytes, so the minimum object size is 16 bytes.  For 32-bit JVMs, the overhead is 8 bytes, padded to a multiple of 4 bytes.  <em>(From <a href=\"https://stackoverflow.com/a/32224498/6309\">Dmitry Spikhalskiy's answer</a>, <a href=\"https://stackoverflow.com/a/35407947/6309\">Jayen's answer</a>, and <a href=\"http://www.javaworld.com/javaworld/javatips/jw-javatip130.html\" rel=\"noreferrer\">JavaWorld</a>.)</em></p>\n\n<p>Typically, references are 4 bytes on 32bit platforms or on 64bit platforms up to <code>-Xmx32G</code>; and 8 bytes above 32Gb (<code>-Xmx32G</code>).  <em>(See <a href=\"http://www.lowtek.ca/roo/2008/java-performance-in-64bit-land/\" rel=\"noreferrer\">compressed object references</a>.)</em></p>\n\n<p>As a result, a 64-bit JVM would typically require 30-50% more heap space. <em>(<a href=\"http://www.javacodegeeks.com/2012/12/should-i-use-a-32-or-a-64-bit-jvm.html\" rel=\"noreferrer\">Should I use a 32- or a 64-bit JVM?</a>, 2012, JDK 1.7)</em></p>\n\n<h2>Boxed types, arrays, and strings</h2>\n\n<p>Boxed wrappers have overhead compared to primitive types (from <a href=\"http://www.javaworld.com/javaworld/javatips/jw-javatip130.html\" rel=\"noreferrer\">JavaWorld</a>):</p>\n\n<blockquote>\n  <ul>\n  <li><p><strong><code>Integer</code></strong>: The 16-byte result is a little worse than I expected because an <code>int</code> value can fit into just 4 extra bytes. Using an <code>Integer</code> costs me a 300 percent memory overhead compared to when I can store the value as a primitive type</p></li>\n  <li><p><strong><code>Long</code></strong>: 16 bytes also: Clearly, actual object size on the heap is subject to low-level memory alignment done by a particular JVM implementation for a particular CPU type. It looks like a <code>Long</code> is 8 bytes of Object overhead, plus 8 bytes more for the actual long value. In contrast, <code>Integer</code> had an unused 4-byte hole, most likely because the JVM I use forces object alignment on an 8-byte word boundary. </p></li>\n  </ul>\n</blockquote>\n\n<p>Other containers are costly too:</p>\n\n<blockquote>\n  <ul>\n  <li><p><strong>Multidimensional arrays</strong>: it offers another surprise.<br>\n  Developers commonly employ constructs like <code>int[dim1][dim2]</code> in numerical and scientific computing.</p>\n  \n  <p>In an <code>int[dim1][dim2]</code> array instance, every nested <code>int[dim2]</code> array is an <code>Object</code> in its own right. Each adds the usual 16-byte array overhead. When I don't need a triangular or ragged array, that represents pure overhead. The impact grows when array dimensions greatly differ.</p>\n  \n  <p>For example, a <code>int[128][2]</code> instance takes 3,600 bytes. Compared to the 1,040 bytes an <code>int[256]</code> instance uses (which has the same capacity), 3,600 bytes represent a 246 percent overhead. In the extreme case of <code>byte[256][1]</code>, the overhead factor is almost 19! Compare that to the C/C++ situation in which the same syntax does not add any storage overhead. </p></li>\n  <li><p><strong><code>String</code></strong>: a <code>String</code>'s memory growth tracks its internal char array's growth. However, the <code>String</code> class adds another 24 bytes of overhead.</p>\n  \n  <p>For a nonempty <code>String</code> of size 10 characters or less, the added overhead cost relative to useful payload (2 bytes for each char plus 4 bytes for the length), ranges from 100 to 400 percent. </p></li>\n  </ul>\n</blockquote>\n\n<h2>Alignment</h2>\n\n<p>Consider this <a href=\"https://plumbr.eu/blog/memory-leaks/how-much-memory-do-i-need-part-2-what-is-shallow-heap\" rel=\"noreferrer\">example object</a>:</p>\n\n<pre><code>class X {                      // 8 bytes for reference to the class definition\n   int a;                      // 4 bytes\n   byte b;                     // 1 byte\n   Integer c = new Integer();  // 4 bytes for a reference\n}\n</code></pre>\n\n<p>A naïve sum would suggest that an instance of <code>X</code> would use 17 bytes.  However, due to alignment (also called padding), the JVM allocates the memory in multiples of 8 bytes, so instead of 17 bytes it would allocate 24 bytes.</p>\n"},{"tags":[],"owner":{"account_id":15824,"reputation":4589,"user_id":33836,"accept_rate":92,"display_name":"Matt Passell"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1225762050,"creation_date":1225762050,"answer_id":260545,"question_id":258120,"body_markdown":"I&#39;ve gotten very good results from the [java.lang.instrument.Instrumentation][1] approach mentioned in another answer.  For good examples of its use, see the entry, *[Instrumentation Memory Counter][2]* from the JavaSpecialists&#39; Newsletter and the [java.sizeOf][3] library on SourceForge.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/instrument/Instrumentation.html\r\n  [2]: http://www.javaspecialists.eu/archive/Issue142.html\r\n  [3]: https://sourceforge.net/projects/sizeof/","title":"What is the memory consumption of an object in Java?","body":"<p>I've gotten very good results from the <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/instrument/Instrumentation.html\" rel=\"nofollow noreferrer\">java.lang.instrument.Instrumentation</a> approach mentioned in another answer.  For good examples of its use, see the entry, <em><a href=\"http://www.javaspecialists.eu/archive/Issue142.html\" rel=\"nofollow noreferrer\">Instrumentation Memory Counter</a></em> from the JavaSpecialists' Newsletter and the <a href=\"https://sourceforge.net/projects/sizeof/\" rel=\"nofollow noreferrer\">java.sizeOf</a> library on SourceForge.</p>\n"},{"tags":[],"owner":{"account_id":13068,"reputation":2596,"user_id":26056,"accept_rate":0,"display_name":"kohlerm"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1314180105,"creation_date":1226564292,"answer_id":286504,"question_id":258120,"body_markdown":"The rules about how much memory is consumed depend on the JVM implementation and the CPU architecture (32 bit versus 64 bit for example). \r\n\r\nFor the detailed rules for the SUN JVM check [my old blog](http://www.sdn.sap.com/irj/scn/weblogs?blog=/pub/wlg/5163)\r\n\r\nRegards,\r\n[Markus][2]\r\n\r\n\r\n  [1]: https://www.sdn.sap.com/irj/scn/weblogs?blog=/pub/wlg/5163\r\n  [2]: http://kohlerm.blogspot.com/","title":"What is the memory consumption of an object in Java?","body":"<p>The rules about how much memory is consumed depend on the JVM implementation and the CPU architecture (32 bit versus 64 bit for example). </p>\n\n<p>For the detailed rules for the SUN JVM check <a href=\"http://www.sdn.sap.com/irj/scn/weblogs?blog=/pub/wlg/5163\" rel=\"nofollow noreferrer\">my old blog</a></p>\n\n<p>Regards,\n<a href=\"http://kohlerm.blogspot.com/\" rel=\"nofollow noreferrer\">Markus</a></p>\n"},{"tags":[],"owner":{"account_id":20470,"reputation":21695,"user_id":48933,"accept_rate":90,"display_name":"Neil Coffey"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1239124251,"creation_date":1239124251,"answer_id":726709,"question_id":258120,"body_markdown":"In case it&#39;s useful to anyone, you can download from my web site a small [Java agent for querying the memory usage of an object][1]. It&#39;ll let you query &quot;deep&quot; memory usage as well.\r\n\r\n  [1]: http://www.javamex.com/classmexer/","title":"What is the memory consumption of an object in Java?","body":"<p>In case it's useful to anyone, you can download from my web site a small <a href=\"http://www.javamex.com/classmexer/\" rel=\"nofollow noreferrer\">Java agent for querying the memory usage of an object</a>. It'll let you query \"deep\" memory usage as well.</p>\n"},{"tags":[],"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1608569118,"creation_date":1359032132,"answer_id":14501891,"question_id":258120,"body_markdown":"The total used / free memory of a program can be obtained in the program via \r\n\r\n    java.lang.Runtime.getRuntime();\r\n\r\nThe runtime has several methods which relate to the memory. The following coding example demonstrates its usage.\r\n\r\n     public class PerformanceTest {\r\n         private static final long MEGABYTE = 1024L * 1024L;\r\n    \r\n         public static long bytesToMegabytes(long bytes) {\r\n             return bytes / MEGABYTE;\r\n         }\r\n    \r\n         public static void main(String[] args) {\r\n             // I assume you will know how to create an object Person yourself...\r\n             List &lt;Person&gt; list = new ArrayList &lt;Person&gt; ();\r\n             for (int i = 0; i &lt;= 100_000; i++) {\r\n                 list.add(new Person(&quot;Jim&quot;, &quot;Knopf&quot;));\r\n             }\r\n\r\n             // Get the Java runtime\r\n             Runtime runtime = Runtime.getRuntime();\r\n\r\n             // Run the garbage collector\r\n             runtime.gc();\r\n\r\n             // Calculate the used memory\r\n             long memory = runtime.totalMemory() - runtime.freeMemory();\r\n             System.out.println(&quot;Used memory is bytes: &quot; + memory);\r\n             System.out.println(&quot;Used memory is megabytes: &quot; + bytesToMegabytes(memory));\r\n         }\r\n     }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#getRuntime()","title":"What is the memory consumption of an object in Java?","body":"<p>The total used / free memory of a program can be obtained in the program via</p>\n<pre><code>java.lang.Runtime.getRuntime();\n</code></pre>\n<p>The runtime has several methods which relate to the memory. The following coding example demonstrates its usage.</p>\n<pre><code> public class PerformanceTest {\n     private static final long MEGABYTE = 1024L * 1024L;\n\n     public static long bytesToMegabytes(long bytes) {\n         return bytes / MEGABYTE;\n     }\n\n     public static void main(String[] args) {\n         // I assume you will know how to create an object Person yourself...\n         List &lt;Person&gt; list = new ArrayList &lt;Person&gt; ();\n         for (int i = 0; i &lt;= 100_000; i++) {\n             list.add(new Person(&quot;Jim&quot;, &quot;Knopf&quot;));\n         }\n\n         // Get the Java runtime\n         Runtime runtime = Runtime.getRuntime();\n\n         // Run the garbage collector\n         runtime.gc();\n\n         // Calculate the used memory\n         long memory = runtime.totalMemory() - runtime.freeMemory();\n         System.out.println(&quot;Used memory is bytes: &quot; + memory);\n         System.out.println(&quot;Used memory is megabytes: &quot; + bytesToMegabytes(memory));\n     }\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1299099,"reputation":26248,"user_id":2218452,"accept_rate":36,"display_name":"Nikhil Agrawal"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1368886998,"creation_date":1368886998,"answer_id":16625324,"question_id":258120,"body_markdown":"The question will be a very broad one.\r\n\r\nIt depends on the class variable or you may call as states memory usage in java.\r\n\r\nIt also has some additional memory requirement for headers and referencing.\r\n\r\n**The heap memory used by a Java object includes**\r\n \r\n\r\n - memory for primitive fields, according to their size (see below for Sizes of primitive types); \r\n\r\n - memory for reference fields (4 bytes each); \r\n\r\n - an object header, consisting of a few bytes of &quot;housekeeping&quot; information; \r\n\r\nObjects in java also requires some &quot;housekeeping&quot; information, such as recording an object&#39;s class, ID and status flags such as whether the object is currently reachable, currently synchronization-locked etc. \r\n\r\nJava object header size varies on 32 and 64 bit jvm.\r\n\r\nAlthough these are the main memory consumers jvm also requires additional fields sometimes like for alignment of the code e.t.c.\r\n\r\n**Sizes of primitive types**\r\n\r\n**boolean\t&amp; byte** -- 1\r\n\r\n**char &amp; short** -- 2\r\n\r\n**int &amp; float** -- 4\r\n\r\n**long &amp; double** -- 8  ","title":"What is the memory consumption of an object in Java?","body":"<p>The question will be a very broad one.</p>\n\n<p>It depends on the class variable or you may call as states memory usage in java.</p>\n\n<p>It also has some additional memory requirement for headers and referencing.</p>\n\n<p><strong>The heap memory used by a Java object includes</strong></p>\n\n<ul>\n<li><p>memory for primitive fields, according to their size (see below for Sizes of primitive types); </p></li>\n<li><p>memory for reference fields (4 bytes each); </p></li>\n<li><p>an object header, consisting of a few bytes of \"housekeeping\" information; </p></li>\n</ul>\n\n<p>Objects in java also requires some \"housekeeping\" information, such as recording an object's class, ID and status flags such as whether the object is currently reachable, currently synchronization-locked etc. </p>\n\n<p>Java object header size varies on 32 and 64 bit jvm.</p>\n\n<p>Although these are the main memory consumers jvm also requires additional fields sometimes like for alignment of the code e.t.c.</p>\n\n<p><strong>Sizes of primitive types</strong></p>\n\n<p><strong>boolean   &amp; byte</strong> -- 1</p>\n\n<p><strong>char &amp; short</strong> -- 2</p>\n\n<p><strong>int &amp; float</strong> -- 4</p>\n\n<p><strong>long &amp; double</strong> -- 8  </p>\n"},{"tags":[],"owner":{"account_id":104023,"reputation":19959,"user_id":278326,"accept_rate":72,"display_name":"Arun"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1430862566,"creation_date":1430862566,"answer_id":30063849,"question_id":258120,"body_markdown":"It appears that every object has an overhead of 16 bytes on 32-bit systems (and 24-byte on 64-bit systems).\r\n\r\nhttp://algs4.cs.princeton.edu/14analysis/ is a good source of information. One example among many good ones is the following.\r\n\r\n![enter image description here][1]\r\n\r\nhttp://www.cs.virginia.edu/kim/publicity/pldi09tutorials/memory-efficient-java-tutorial.pdf is also very informative, for example:\r\n\r\n![enter image description here][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/d5jNj.png\r\n  [2]: http://i.stack.imgur.com/E8l6J.png","title":"What is the memory consumption of an object in Java?","body":"<p>It appears that every object has an overhead of 16 bytes on 32-bit systems (and 24-byte on 64-bit systems).</p>\n\n<p><a href=\"http://algs4.cs.princeton.edu/14analysis/\" rel=\"noreferrer\">http://algs4.cs.princeton.edu/14analysis/</a> is a good source of information. One example among many good ones is the following.</p>\n\n<p><img src=\"https://i.stack.imgur.com/d5jNj.png\" alt=\"enter image description here\"></p>\n\n<p><a href=\"http://www.cs.virginia.edu/kim/publicity/pldi09tutorials/memory-efficient-java-tutorial.pdf\" rel=\"noreferrer\">http://www.cs.virginia.edu/kim/publicity/pldi09tutorials/memory-efficient-java-tutorial.pdf</a> is also very informative, for example:</p>\n\n<p><img src=\"https://i.stack.imgur.com/E8l6J.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":249267,"reputation":5487,"user_id":525203,"accept_rate":86,"display_name":"Dmitry Spikhalskiy"},"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1676008430,"creation_date":1440585836,"answer_id":32224498,"question_id":258120,"body_markdown":"It depends on the CPU architecture and JDK. For a modern JDK and 64-bit architecture, an object has 12-byte header and padding of 8 bytes - so the minimum object size is 16 bytes. You can use a tool called [Java Object Layout][1] to determine a size and get details about any entity&#39;s object layout and internal structure or guess this information by class reference. Example of output for `Integer` instance on my environment:\r\n\r\n    Running 64-bit HotSpot VM.\r\n    Using compressed oop with 3-bit shift.\r\n    Using compressed klass with 3-bit shift.\r\n    Objects are 8 bytes aligned.\r\n    Field sizes by type: 4, 1, 1, 2, 2, 4, 4, 8, 8 [bytes]\r\n    Array element sizes: 4, 1, 1, 2, 2, 4, 4, 8, 8 [bytes]\r\n    \r\n    java.lang.Integer object internals:\r\n     OFFSET  SIZE  TYPE DESCRIPTION                    VALUE\r\n          0    12       (object header)                N/A\r\n         12     4   int Integer.value                  N/A\r\n    Instance size: 16 bytes (estimated, the sample instance is not available)\r\n    Space losses: 0 bytes internal + 0 bytes external = 0 bytes total\r\n\r\nFor `Integer`, the instance size is 16 bytes: 4-bytes int is placed in place right after the 12-byte header. And it doesn&#39;t need any additional &quot;padding&quot;, because 16 is a multiple of 8 (which is a RAM word size on 64-bits architecture) without remainder.\r\n\r\nCode sample:\r\n\r\n    import org.openjdk.jol.info.ClassLayout;\r\n    import org.openjdk.jol.util.VMSupport;\r\n\r\n    public static void main(String[] args) {\r\n        System.out.println(VMSupport.vmDetails());\r\n        System.out.println(ClassLayout.parseClass(Integer.class).toPrintable());\r\n    }\r\n\r\nIf you use maven, to get JOL:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.openjdk.jol&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jol-core&lt;/artifactId&gt;\r\n        &lt;version&gt;0.3.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  [1]: http://openjdk.java.net/projects/code-tools/jol/\r\n","title":"What is the memory consumption of an object in Java?","body":"<p>It depends on the CPU architecture and JDK. For a modern JDK and 64-bit architecture, an object has 12-byte header and padding of 8 bytes - so the minimum object size is 16 bytes. You can use a tool called <a href=\"http://openjdk.java.net/projects/code-tools/jol/\" rel=\"nofollow noreferrer\">Java Object Layout</a> to determine a size and get details about any entity's object layout and internal structure or guess this information by class reference. Example of output for <code>Integer</code> instance on my environment:</p>\n<pre><code>Running 64-bit HotSpot VM.\nUsing compressed oop with 3-bit shift.\nUsing compressed klass with 3-bit shift.\nObjects are 8 bytes aligned.\nField sizes by type: 4, 1, 1, 2, 2, 4, 4, 8, 8 [bytes]\nArray element sizes: 4, 1, 1, 2, 2, 4, 4, 8, 8 [bytes]\n\njava.lang.Integer object internals:\n OFFSET  SIZE  TYPE DESCRIPTION                    VALUE\n      0    12       (object header)                N/A\n     12     4   int Integer.value                  N/A\nInstance size: 16 bytes (estimated, the sample instance is not available)\nSpace losses: 0 bytes internal + 0 bytes external = 0 bytes total\n</code></pre>\n<p>For <code>Integer</code>, the instance size is 16 bytes: 4-bytes int is placed in place right after the 12-byte header. And it doesn't need any additional &quot;padding&quot;, because 16 is a multiple of 8 (which is a RAM word size on 64-bits architecture) without remainder.</p>\n<p>Code sample:</p>\n<pre><code>import org.openjdk.jol.info.ClassLayout;\nimport org.openjdk.jol.util.VMSupport;\n\npublic static void main(String[] args) {\n    System.out.println(VMSupport.vmDetails());\n    System.out.println(ClassLayout.parseClass(Integer.class).toPrintable());\n}\n</code></pre>\n<p>If you use maven, to get JOL:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.openjdk.jol&lt;/groupId&gt;\n    &lt;artifactId&gt;jol-core&lt;/artifactId&gt;\n    &lt;version&gt;0.3.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":65542,"reputation":5762,"user_id":192798,"accept_rate":48,"display_name":"Jayen"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1561602003,"creation_date":1455534975,"answer_id":35407947,"question_id":258120,"body_markdown":"&gt; Is the memory space consumed by one object with 100 attributes the same as that of 100 objects, with one attribute each?\r\n\r\nNo.\r\n\r\n&gt; How much memory is allocated for an object?\r\n\r\n* The overhead is 8 bytes on 32-bit, 12 bytes on 64-bit;  and then rounded up to a multiple of 4 bytes (32-bit) or 8 bytes (64-bit).\r\n\r\n&gt; How much additional space is used when adding an attribute?\r\n\r\n* Attributes range from 1 byte (byte) to 8 bytes (long/double), but references are either 4 bytes or 8 bytes depending *not* on whether it&#39;s 32bit or 64bit, but rather whether -Xmx is &lt; 32Gb or &gt;= 32Gb:  typical 64-bit JVM&#39;s have an optimisation called &quot;-UseCompressedOops&quot; which compress references to 4 bytes if the heap is below 32Gb.\r\n\r\n","title":"What is the memory consumption of an object in Java?","body":"<blockquote>\n  <p>Is the memory space consumed by one object with 100 attributes the same as that of 100 objects, with one attribute each?</p>\n</blockquote>\n\n<p>No.</p>\n\n<blockquote>\n  <p>How much memory is allocated for an object?</p>\n</blockquote>\n\n<ul>\n<li>The overhead is 8 bytes on 32-bit, 12 bytes on 64-bit;  and then rounded up to a multiple of 4 bytes (32-bit) or 8 bytes (64-bit).</li>\n</ul>\n\n<blockquote>\n  <p>How much additional space is used when adding an attribute?</p>\n</blockquote>\n\n<ul>\n<li>Attributes range from 1 byte (byte) to 8 bytes (long/double), but references are either 4 bytes or 8 bytes depending <em>not</em> on whether it's 32bit or 64bit, but rather whether -Xmx is &lt; 32Gb or >= 32Gb:  typical 64-bit JVM's have an optimisation called \"-UseCompressedOops\" which compress references to 4 bytes if the heap is below 32Gb.</li>\n</ul>\n"}],"owner":{"display_name":"manuel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148417,"favorite_count":0,"down_vote_count":0,"up_vote_count":245,"answer_count":12,"score":245,"last_activity_date":1676008430,"creation_date":1225700688,"question_id":258120,"body_markdown":"Is the memory space consumed by one object with 100 attributes the same as that of 100 objects, with one attribute each?\r\n\r\nHow much memory is allocated for an object?  \r\nHow much additional space is used when adding an attribute?","title":"What is the memory consumption of an object in Java?","body":"<p>Is the memory space consumed by one object with 100 attributes the same as that of 100 objects, with one attribute each?</p>\n\n<p>How much memory is allocated for an object?<br>\nHow much additional space is used when adding an attribute?</p>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":3,"creation_date":1675986914,"post_id":75405591,"comment_id":133051490,"body_markdown":"`int i = 0; for (int a : A) while (a &gt; 0) System.out.println(a + &quot;-&quot; + B[i] + &quot;=&quot; + (a -= B[i++]));`","body":"<code>int i = 0; for (int a : A) while (a &gt; 0) System.out.println(a + &quot;-&quot; + B[i] + &quot;=&quot; + (a -= B[i++]));</code>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1675991049,"post_id":75405591,"comment_id":133052145,"body_markdown":"Is there a guarantee the sum of numbers in one list will be equal to the sum of numbers in the other list?","body":"Is there a guarantee the sum of numbers in one list will be equal to the sum of numbers in the other list?"},{"owner":{"account_id":1707439,"reputation":236096,"user_id":1566221,"accept_rate":86,"display_name":"rici"},"score":0,"creation_date":1675995914,"post_id":75405591,"comment_id":133052792,"body_markdown":"@OldDogProgrammer: even if there is such a guarantee, the problem is equivalent to the knapsack problem, so it&#39;s NP complete. It certainly does not have a simple greedy solution. (Unless you&#39;re allowed to split a value in List B between two or more values in List A.)","body":"@OldDogProgrammer: even if there is such a guarantee, the problem is equivalent to the knapsack problem, so it&#39;s NP complete. It certainly does not have a simple greedy solution. (Unless you&#39;re allowed to split a value in List B between two or more values in List A.)"},{"owner":{"account_id":4127333,"reputation":34381,"user_id":3386109,"display_name":"user3386109"},"score":0,"creation_date":1676009806,"post_id":75405591,"comment_id":133054547,"body_markdown":"@rici I also thought this was a hard problem until I saw the first comment. Maybe the exercise really is that trivial, i.e. the prefix subarray of B will always add to the first element of A. In other words, maybe this is an &quot;Introduction to Coding&quot; homework problem, and not a coding contest question.","body":"@rici I also thought this was a hard problem until I saw the first comment. Maybe the exercise really is that trivial, i.e. the prefix subarray of B will always add to the first element of A. In other words, maybe this is an &quot;Introduction to Coding&quot; homework problem, and not a coding contest question."},{"owner":{"account_id":1707439,"reputation":236096,"user_id":1566221,"accept_rate":86,"display_name":"rici"},"score":0,"creation_date":1676086814,"post_id":75405591,"comment_id":133072379,"body_markdown":"@OldDogProgrammer: I think I understood your question. But it&#39;s not sufficient for the sums to be equal. Consider A={11, 9}, B={2, 4, 6, 8}. No solution even though both sum to 20. Or change A to {10, 10}. Now there&#39;s a solution, but the greedy algorithm won&#39;t find it; you need an algorithm which can backtrack.","body":"@OldDogProgrammer: I think I understood your question. But it&#39;s not sufficient for the sums to be equal. Consider A={11, 9}, B={2, 4, 6, 8}. No solution even though both sum to 20. Or change A to {10, 10}. Now there&#39;s a solution, but the greedy algorithm won&#39;t find it; you need an algorithm which can backtrack."}],"answers":[{"tags":[],"owner":{"account_id":6402640,"reputation":17528,"user_id":4964822,"display_name":"nice_dev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676008362,"creation_date":1676008362,"answer_id":75407405,"question_id":75405591,"body_markdown":"You can make your logic more simpler with early breaks if `a` becomes `0` before subtracting from all elements in `B`. Also, it looks like you wish to subtract them in a circular manner until `a` becomes `0`. \r\n\r\n**Snippet:**\r\n\r\n    for(int a : A){\r\n        int ptr = 0;\r\n        while(a &gt; 0){\r\n            System.out.println(a + &quot; - &quot; + B.get(ptr) + &quot; = &quot; + (a - B.get(ptr)));\r\n            a -= B.get(ptr);\r\n            ptr = (ptr + 1) % B.size();\r\n        }\r\n    }\r\n\r\n\r\n[**Online Demo**](https://onecompiler.com/java/3yxg29d3v)\r\n\r\n**Note:** Not every element subtraction leads to the beautiful 0, but that is how your array is kept in the first place. \r\n\r\nAlso, there is no other optimized way looking at your current requirements since you will have to loop through each one and show the subtraction steps. ","title":"How to substract a list of numbers from another list of numbers until 0 in java","body":"<p>You can make your logic more simpler with early breaks if <code>a</code> becomes <code>0</code> before subtracting from all elements in <code>B</code>. Also, it looks like you wish to subtract them in a circular manner until <code>a</code> becomes <code>0</code>.</p>\n<p><strong>Snippet:</strong></p>\n<pre><code>for(int a : A){\n    int ptr = 0;\n    while(a &gt; 0){\n        System.out.println(a + &quot; - &quot; + B.get(ptr) + &quot; = &quot; + (a - B.get(ptr)));\n        a -= B.get(ptr);\n        ptr = (ptr + 1) % B.size();\n    }\n}\n</code></pre>\n<p><a href=\"https://onecompiler.com/java/3yxg29d3v\" rel=\"nofollow noreferrer\"><strong>Online Demo</strong></a></p>\n<p><strong>Note:</strong> Not every element subtraction leads to the beautiful 0, but that is how your array is kept in the first place.</p>\n<p>Also, there is no other optimized way looking at your current requirements since you will have to loop through each one and show the subtraction steps.</p>\n"}],"owner":{"account_id":15465429,"reputation":9,"user_id":11156919,"display_name":"Azfar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1676008362,"creation_date":1675986192,"question_id":75405591,"body_markdown":"I have 2 lists of numbers. I need to subtract the second list from the first in a way that shows the balance until the first list equals 0. \r\nFor example \r\n\r\n    List A = [10,9] \r\n    List B - [1,2,3,4,5,4]\r\n\r\nI need to show \r\n\r\n    10-1=9\r\n    9-2=7\r\n    7-3=4\r\n    4-4=0\r\n    9-5=4\r\n    4-4=0\r\n\r\nI tried\r\n\r\n     for (int a : List A){\r\n            do {\r\n                for (int b : List B){\r\n                    a = -b\r\n                }\r\n            } while (a &gt;= 0)\r\n        }\r\n\r\nI don&#39;t think the logic is sound enough and could use a few pointers.   \r\n  ","title":"How to substract a list of numbers from another list of numbers until 0 in java","body":"<p>I have 2 lists of numbers. I need to subtract the second list from the first in a way that shows the balance until the first list equals 0.\nFor example</p>\n<pre><code>List A = [10,9] \nList B - [1,2,3,4,5,4]\n</code></pre>\n<p>I need to show</p>\n<pre><code>10-1=9\n9-2=7\n7-3=4\n4-4=0\n9-5=4\n4-4=0\n</code></pre>\n<p>I tried</p>\n<pre><code> for (int a : List A){\n        do {\n            for (int b : List B){\n                a = -b\n            }\n        } while (a &gt;= 0)\n    }\n</code></pre>\n<p>I don't think the logic is sound enough and could use a few pointers.</p>\n"},{"tags":["java","spring-boot","maven","amazon-s3"],"answers":[{"tags":[],"owner":{"account_id":27505610,"reputation":101,"user_id":20988418,"display_name":"arjunrawal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676007993,"creation_date":1676007993,"answer_id":75407383,"question_id":75403752,"body_markdown":"For buckets created in regions outside of us-east-1 (N. Virginia) a location constraint is required. See https://docs.aws.amazon.com/cli/latest/reference/s3api/create-bucket.html for more details\r\n\r\n&gt;LocationConstraint -&gt; (string)\r\nSpecifies the Region where the bucket will be created. If you don&#39;t specify a Region, the bucket is created in the US East (N. Virginia) Region (us-east-1).\r\n","title":"Java AWS SDK problem with me-central-1 region","body":"<p>For buckets created in regions outside of us-east-1 (N. Virginia) a location constraint is required. See <a href=\"https://docs.aws.amazon.com/cli/latest/reference/s3api/create-bucket.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/cli/latest/reference/s3api/create-bucket.html</a> for more details</p>\n<blockquote>\n<p>LocationConstraint -&gt; (string)\nSpecifies the Region where the bucket will be created. If you don't specify a Region, the bucket is created in the US East (N. Virginia) Region (us-east-1).</p>\n</blockquote>\n"}],"owner":{"account_id":5271602,"reputation":23,"user_id":4209691,"display_name":"Marco Simone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676007993,"creation_date":1675972304,"question_id":75403752,"body_markdown":"i&#39;m trying to use the aws sdk for java (it&#39;s not the first time and it&#39;s always worked) but i&#39;m getting this error: \r\n\r\n**com.amazonaws.services.s3.model.AmazonS3Exception: The unspecified location constraint is incompatible for the region specific endpoint this request was sent to**\r\n\r\nIn my pom i have this maven dependency\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.12.402&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand this is my code to instantiate the s3 client:\r\n\r\n    @Bean\r\n    public AmazonS3 amazonS3() {\r\n        AWSCredentials cred = new BasicAWSCredentials(accesskey, secretkey);\r\n        AWSCredentialsProvider credProvider = new AWSStaticCredentialsProvider(cred);\r\n        return AmazonS3Client.builder()\r\n        \t\t.withRegion(Regions.ME_CENTRAL_1)\r\n        \t\t//.withCredentials(credProvider)\r\n        \t\t.withCredentials(DefaultAWSCredentialsProviderChain.getInstance())\r\n        \t\t.build();\r\n    }\r\n\r\nAs you can see I tried two different AWSCredentialsProviders, but I always get the same error","title":"Java AWS SDK problem with me-central-1 region","body":"<p>i'm trying to use the aws sdk for java (it's not the first time and it's always worked) but i'm getting this error:</p>\n<p><strong>com.amazonaws.services.s3.model.AmazonS3Exception: The unspecified location constraint is incompatible for the region specific endpoint this request was sent to</strong></p>\n<p>In my pom i have this maven dependency</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n    &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\n    &lt;version&gt;1.12.402&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and this is my code to instantiate the s3 client:</p>\n<pre><code>@Bean\npublic AmazonS3 amazonS3() {\n    AWSCredentials cred = new BasicAWSCredentials(accesskey, secretkey);\n    AWSCredentialsProvider credProvider = new AWSStaticCredentialsProvider(cred);\n    return AmazonS3Client.builder()\n            .withRegion(Regions.ME_CENTRAL_1)\n            //.withCredentials(credProvider)\n            .withCredentials(DefaultAWSCredentialsProviderChain.getInstance())\n            .build();\n}\n</code></pre>\n<p>As you can see I tried two different AWSCredentialsProviders, but I always get the same error</p>\n"},{"tags":["java","settings","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"down_vote_count":0,"up_vote_count":57,"is_accepted":true,"score":57,"last_activity_date":1280742080,"creation_date":1280742080,"answer_id":3386565,"question_id":3385232,"body_markdown":"New | Java Class, **Create New Class** dialog appears, in this dialog you can choose **Kind** between one of the following:\r\n\r\n - Class\r\n - Interface\r\n - Enum\r\n - Annotation\r\n\r\n(tested with IDEA 9.0.3)\r\n\r\nIf you want Interface directly in the New list, then you have to add new template in Settings | File Templates, name it something like **Java Interface** and copy the contents of the **Interface** template into this one.","title":"Intellij: Adding &#39;Interface&#39; to my context menu in the Project Pane","body":"<p>New | Java Class, <strong>Create New Class</strong> dialog appears, in this dialog you can choose <strong>Kind</strong> between one of the following:</p>\n\n<ul>\n<li>Class</li>\n<li>Interface</li>\n<li>Enum</li>\n<li>Annotation</li>\n</ul>\n\n<p>(tested with IDEA 9.0.3)</p>\n\n<p>If you want Interface directly in the New list, then you have to add new template in Settings | File Templates, name it something like <strong>Java Interface</strong> and copy the contents of the <strong>Interface</strong> template into this one.</p>\n"},{"tags":[],"owner":{"account_id":5715909,"reputation":15062,"user_id":4516110,"accept_rate":81,"display_name":"Mehraj Malik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1542007228,"creation_date":1542007228,"answer_id":53257468,"question_id":3385232,"body_markdown":"Also you can create a shortcut to save some secs.\r\n\r\n`Alt+Ctr+S` -&gt; `Keymap` -&gt; in search box type &#39;`create new`&#39; and select `Java class` and then assign any shortcut like `Ctrl+N`.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LeNBN.png","title":"Intellij: Adding &#39;Interface&#39; to my context menu in the Project Pane","body":"<p>Also you can create a shortcut to save some secs.</p>\n\n<p><code>Alt+Ctr+S</code> -> <code>Keymap</code> -> in search box type '<code>create new</code>' and select <code>Java class</code> and then assign any shortcut like <code>Ctrl+N</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/LeNBN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LeNBN.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":10053537,"reputation":83,"user_id":7432544,"display_name":"Yekta &#214;zdemir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584652581,"creation_date":1584652581,"answer_id":60765175,"question_id":3385232,"body_markdown":"It&#39;s under the New Java Class menu.","title":"Intellij: Adding &#39;Interface&#39; to my context menu in the Project Pane","body":"<p>It's under the New Java Class menu.</p>\n"},{"tags":[],"owner":{"account_id":7959412,"reputation":1,"user_id":6007657,"display_name":"vjaidegavi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641539945,"creation_date":1641539945,"answer_id":70617786,"question_id":3385232,"body_markdown":"Yes its available in Class menu : New--&gt; Java class  --&gt; Interface .\r\n","title":"Intellij: Adding &#39;Interface&#39; to my context menu in the Project Pane","body":"<p>Yes its available in Class menu : New--&gt; Java class  --&gt; Interface .</p>\n"},{"tags":[],"owner":{"account_id":23297249,"reputation":94,"user_id":17394517,"display_name":"shanaka prince"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676007645,"creation_date":1676007645,"answer_id":75407354,"question_id":3385232,"body_markdown":"create a package and then select create new class from that select interface and give a name.\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IvmrR.png\r\n\r\nthen; you need to import the references files.\r\n","title":"Intellij: Adding &#39;Interface&#39; to my context menu in the Project Pane","body":"<p>create a package and then select create new class from that select interface and give a name.\n<a href=\"https://i.stack.imgur.com/IvmrR.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>then; you need to import the references files.</p>\n"}],"owner":{"account_id":14730,"reputation":22485,"user_id":30563,"accept_rate":97,"display_name":"digiarnie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39378,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":3386565,"answer_count":5,"score":29,"last_activity_date":1676007645,"creation_date":1280726916,"question_id":3385232,"body_markdown":"Currently in IntelliJ, if I right-click a package in the Project pane, I can see things such as:\r\n\r\n    new &gt; Java class\r\n    new &gt; File\r\n    new &gt; Package\r\n\r\nI want to add some new menu items in the &#39;new&#39; context menu such as Interface and Enum.  Does anyone know how to do this?\r\n\r\nI&#39;ve been playing around in the &lt;b&gt;Settings &gt; Menus and Toolbars&lt;/b&gt; without any luck.\r\n\r\nEdit: The funny thing is if I right click a package and choose &lt;b&gt;New &gt; Edit File Templates...&lt;/b&gt;, I can see the template for an Interface and in the description it actually says:\r\n\r\n    This is a built-in template used by IDEA each time you create a new Java interface, by selecting New | Interface from the popup menu in one of the project views.\r\n\r\nUnless I need to look at a different pane other than &lt;b&gt;Project&lt;/b&gt;, I can&#39;t seem to find any context menu that lets me choose &lt;b&gt;New &gt; Interface&lt;/b&gt; as suggested by the above description.","title":"Intellij: Adding &#39;Interface&#39; to my context menu in the Project Pane","body":"<p>Currently in IntelliJ, if I right-click a package in the Project pane, I can see things such as:</p>\n\n<pre><code>new &gt; Java class\nnew &gt; File\nnew &gt; Package\n</code></pre>\n\n<p>I want to add some new menu items in the 'new' context menu such as Interface and Enum.  Does anyone know how to do this?</p>\n\n<p>I've been playing around in the <b>Settings > Menus and Toolbars</b> without any luck.</p>\n\n<p>Edit: The funny thing is if I right click a package and choose <b>New > Edit File Templates...</b>, I can see the template for an Interface and in the description it actually says:</p>\n\n<pre><code>This is a built-in template used by IDEA each time you create a new Java interface, by selecting New | Interface from the popup menu in one of the project views.\n</code></pre>\n\n<p>Unless I need to look at a different pane other than <b>Project</b>, I can't seem to find any context menu that lets me choose <b>New > Interface</b> as suggested by the above description.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4563475,"reputation":27298,"user_id":3705127,"accept_rate":52,"display_name":"sprinter"},"score":2,"creation_date":1675998720,"post_id":75406485,"comment_id":133053144,"body_markdown":"Here&#39;s an obvious one for you: if the first time you call `addLast` it is with an array with less than 3 elements then you will get a `IndexOutOfBounds` Exception.","body":"Here&#39;s an obvious one for you: if the first time you call <code>addLast</code> it is with an array with less than 3 elements then you will get a <code>IndexOutOfBounds</code> Exception."},{"owner":{"account_id":6929680,"reputation":574,"user_id":5319542,"accept_rate":50,"display_name":"chk.buddi"},"score":0,"creation_date":1675999156,"post_id":75406485,"comment_id":133053194,"body_markdown":"Yes, I also noticed that. But it provides more than 3 elements.","body":"Yes, I also noticed that. But it provides more than 3 elements."},{"owner":{"account_id":4563475,"reputation":27298,"user_id":3705127,"accept_rate":52,"display_name":"sprinter"},"score":2,"creation_date":1675999693,"post_id":75406485,"comment_id":133053255,"body_markdown":"How do you know the test cases provide more than 3 elements? The question says that you don&#39;t have the test scenarios.","body":"How do you know the test cases provide more than 3 elements? The question says that you don&#39;t have the test scenarios."},{"owner":{"account_id":11095946,"reputation":315,"user_id":8146089,"display_name":"Dennis LLopis"},"score":0,"creation_date":1676000780,"post_id":75406485,"comment_id":133053373,"body_markdown":"&quot; ( I don&#39;t have the the exact test cases) &quot; Doesn&#39;t hurt to add in those edge cases that @sprinter mentioned... returning false when not enough elements are present is a good start to see if you pass testcases.","body":"&quot; ( I don&#39;t have the the exact test cases) &quot; Doesn&#39;t hurt to add in those edge cases that @sprinter mentioned... returning false when not enough elements are present is a good start to see if you pass testcases."},{"owner":{"account_id":6929680,"reputation":574,"user_id":5319542,"accept_rate":50,"display_name":"chk.buddi"},"score":0,"creation_date":1676002943,"post_id":75406485,"comment_id":133053673,"body_markdown":"Hi @DennisLLopis, yes, I will handle his point and see. thanks","body":"Hi @DennisLLopis, yes, I will handle his point and see. thanks"}],"answers":[{"tags":[],"owner":{"account_id":4563475,"reputation":27298,"user_id":3705127,"accept_rate":52,"display_name":"sprinter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676007067,"creation_date":1676007067,"answer_id":75407302,"question_id":75406485,"body_markdown":"I generated large random collections of integers and couldn&#39;t find any obvious cases your code fails for beyond the insufficient elements. Incidentally, the function I wrote to check if a list has any consecutive n elements that sum to a given value was:\r\n\r\n    public static boolean containsSum(List&lt;Integer&gt; list, int sum, int n) {\r\n        return IntStream.range(0, list.size() - n + 1)\r\n                .anyMatch(i -&gt; list.subList(i, i + n).stream()\r\n                        .reduce(0, Integer::sum) == sum);\r\n    }\r\n\r\nI can&#39;t see any reason for your code that keeps all the list of lists: the space / time tradeoff doesn&#39;t make a lot of sense. I suggest you could simplify `addLast` to just add the elements to `mergeList`. There are a bunch of stylistic issues with your code but I&#39;m sure you&#39;ll work those out in your own time.","title":"Find sum of subsequent 3 elements of an array","body":"<p>I generated large random collections of integers and couldn't find any obvious cases your code fails for beyond the insufficient elements. Incidentally, the function I wrote to check if a list has any consecutive n elements that sum to a given value was:</p>\n<pre><code>public static boolean containsSum(List&lt;Integer&gt; list, int sum, int n) {\n    return IntStream.range(0, list.size() - n + 1)\n            .anyMatch(i -&gt; list.subList(i, i + n).stream()\n                    .reduce(0, Integer::sum) == sum);\n}\n</code></pre>\n<p>I can't see any reason for your code that keeps all the list of lists: the space / time tradeoff doesn't make a lot of sense. I suggest you could simplify <code>addLast</code> to just add the elements to <code>mergeList</code>. There are a bunch of stylistic issues with your code but I'm sure you'll work those out in your own time.</p>\n"}],"owner":{"account_id":6929680,"reputation":574,"user_id":5319542,"accept_rate":50,"display_name":"chk.buddi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75407302,"answer_count":1,"score":0,"last_activity_date":1676007067,"creation_date":1675997652,"question_id":75406485,"body_markdown":"I need to sum the three consecutive elements of an array when appending numbers to the same array dynamically and return true if the sum is equal to the argument value. I have already written the code below and it all return required output but it fails for some test cases( I don&#39;t have the the exact test cases), Can anybody tell me what exact scenario which my programme can be failed?\r\n\r\n    import java.util.LinkedList;\r\n    import java.util.List;\r\n    \r\n    public class Test {\r\n        List&lt;Integer&gt; mergeList = new LinkedList&lt;Integer&gt;();\r\n        List&lt;List&lt;Integer&gt;&gt; allList = new LinkedList&lt;List&lt;Integer&gt;&gt;();\r\n        List&lt;Integer&gt; tail;\r\n        int from = 0;\r\n        int to = 0;\r\n\r\n        public void addLast(int[] list) {\r\n            allList.removeAll(allList);\r\n\r\n            for(int i : list) {\r\n                mergeList.add(i);\r\n            }\r\n\r\n            if (mergeList.size() &gt; 0) {\r\n                int j = 0;\r\n    \r\n                while(to &lt; mergeList.size()){\r\n                    from = j;\r\n                    to = j + 3;\r\n                    tail = mergeList.subList(from, to);\r\n                    j++;\r\n                    allList.add(tail);\r\n                }\r\n            }\r\n        }\r\n    \r\n        public boolean containsSum3(int sum) {\r\n            boolean retVal = false;\r\n            \r\n            for (List&lt;Integer&gt; sum3List : allList) {\r\n                if (sum3List.stream().mapToInt(Integer::intValue).sum() == sum) {\r\n                    retVal = true;\r\n                }\r\n            }\r\n\r\n            return retVal;\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            Test s = new Test();\r\n    \r\n            s.addLast(new int[] { 1, 2, 3 });\r\n            System.out.println(s.containsSum3(6));\r\n            System.out.println(s.containsSum3(9));\r\n    \r\n            s.addLast(new int[] { 4 });\r\n            System.out.println(s.containsSum3(9));\r\n\r\n            s.addLast(new int[] { 5, 2});\r\n            System.out.println(s.containsSum3(11));\r\n            \r\n            s.addLast(new int[] { 0, -1 });\r\n            System.out.println(s.containsSum3(7));\r\n            System.out.println(s.containsSum3(2));\r\n        }\r\n    }\r\n\r\nOutput:\r\n \r\n\r\n    true\r\n    false\r\n    true\r\n    true\r\n    true\r\n    false","title":"Find sum of subsequent 3 elements of an array","body":"<p>I need to sum the three consecutive elements of an array when appending numbers to the same array dynamically and return true if the sum is equal to the argument value. I have already written the code below and it all return required output but it fails for some test cases( I don't have the the exact test cases), Can anybody tell me what exact scenario which my programme can be failed?</p>\n<pre><code>import java.util.LinkedList;\nimport java.util.List;\n\npublic class Test {\n    List&lt;Integer&gt; mergeList = new LinkedList&lt;Integer&gt;();\n    List&lt;List&lt;Integer&gt;&gt; allList = new LinkedList&lt;List&lt;Integer&gt;&gt;();\n    List&lt;Integer&gt; tail;\n    int from = 0;\n    int to = 0;\n\n    public void addLast(int[] list) {\n        allList.removeAll(allList);\n\n        for(int i : list) {\n            mergeList.add(i);\n        }\n\n        if (mergeList.size() &gt; 0) {\n            int j = 0;\n\n            while(to &lt; mergeList.size()){\n                from = j;\n                to = j + 3;\n                tail = mergeList.subList(from, to);\n                j++;\n                allList.add(tail);\n            }\n        }\n    }\n\n    public boolean containsSum3(int sum) {\n        boolean retVal = false;\n        \n        for (List&lt;Integer&gt; sum3List : allList) {\n            if (sum3List.stream().mapToInt(Integer::intValue).sum() == sum) {\n                retVal = true;\n            }\n        }\n\n        return retVal;\n    }\n\n    public static void main(String[] args) {\n        Test s = new Test();\n\n        s.addLast(new int[] { 1, 2, 3 });\n        System.out.println(s.containsSum3(6));\n        System.out.println(s.containsSum3(9));\n\n        s.addLast(new int[] { 4 });\n        System.out.println(s.containsSum3(9));\n\n        s.addLast(new int[] { 5, 2});\n        System.out.println(s.containsSum3(11));\n        \n        s.addLast(new int[] { 0, -1 });\n        System.out.println(s.containsSum3(7));\n        System.out.println(s.containsSum3(2));\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>true\nfalse\ntrue\ntrue\ntrue\nfalse\n</code></pre>\n"},{"tags":["java","switch-statement","pattern-matching"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":3,"creation_date":1655825181,"post_id":72703351,"comment_id":128420812,"body_markdown":"You can recompile the interface and add new values which doesn&#39;t break binary compatibility, but does break compile time safety without a default case.","body":"You can recompile the interface and add new values which doesn&#39;t break binary compatibility, but does break compile time safety without a default case."},{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":1,"creation_date":1655831473,"post_id":72703351,"comment_id":128423092,"body_markdown":"@clay did you try to remove generics from the example? Does it work when you do so?","body":"@clay did you try to remove generics from the example? Does it work when you do so?"},{"owner":{"account_id":1888553,"reputation":18649,"user_id":1767106,"accept_rate":78,"display_name":"clay"},"score":0,"creation_date":1656631869,"post_id":72703351,"comment_id":128626506,"body_markdown":"@PanagiotisBougioukos, if I remove generics, it works. I&#39;m not doing some exotic edge case, this seems a very simple example. I presume they will fix this closer to the GA release.","body":"@PanagiotisBougioukos, if I remove generics, it works. I&#39;m not doing some exotic edge case, this seems a very simple example. I presume they will fix this closer to the GA release."},{"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"score":0,"creation_date":1656655008,"post_id":72703351,"comment_id":128629752,"body_markdown":"JDK is in rampdown so I&#39;d suggest posting this on the compiler issue list as soon as possible, otherwise if this is a bug, it won&#39;t be fixed until 20.","body":"JDK is in rampdown so I&#39;d suggest posting this on the compiler issue list as soon as possible, otherwise if this is a bug, it won&#39;t be fixed until 20."},{"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"score":1,"creation_date":1657873426,"post_id":72703351,"comment_id":128917854,"body_markdown":"Either @BrianGoetz article is wrong or javac has a bug.","body":"Either @BrianGoetz article is wrong or javac has a bug."}],"answers":[{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1655833411,"creation_date":1655832192,"answer_id":72704820,"question_id":72703351,"body_markdown":"[JDK 19][1] has only Early-Access Builds available now. \r\n\r\nI think I have found the important part for this question in the [JEPS 427 documentation][2]\r\n\r\nThe progress of **Pattern Matching (Third Preview)** could also be tracked from [here][3].\r\n\r\nAccording to the following JEPS example, I would expect this to work, so I think that you should wait first for the first **JDK 19 build for general availability** and try again. If it still not works then I think you should proceed and report it as a bug.\r\n\r\n\r\n&gt; Some extra care is needed when a permitted direct subclass only\r\n&gt; implements a specific parameterization of a (**generic**) sealed\r\n&gt; superclass. For example:\r\n\r\n    sealed interface I&lt;T&gt; permits A, B {}\r\n    final class A&lt;X&gt; implements I&lt;String&gt; {}\r\n    final class B&lt;Y&gt; implements I&lt;Y&gt; {}\r\n    \r\n    static int testGenericSealedExhaustive(I&lt;Integer&gt; i) {\r\n        return switch (i) {\r\n            // Exhaustive as no A case possible!\r\n            case B&lt;Integer&gt; bi -&gt; 42;\r\n        }\r\n    }\r\n\r\n&gt; The only permitted subclasses of I are A and B, but the compiler can\r\n&gt; detect that the switch block need only cover the class B to be\r\n&gt; exhaustive since the selector expression is of type I&lt;Integer&gt;.\r\n&gt; \r\n\r\nI also think that the comment from @**Kayaman** is not the case here as it is explicitly stated in the documentation how this case is handled to be safe.\r\n\r\n\r\n&gt; **To defend against incompatible separate compilation, in this case of a\r\n&gt; switch over a sealed class where the switch block is exhaustive and\r\n&gt; there is no match-all case, the compiler automatically adds a default\r\n&gt; label whose code throws an IncompatibleClassChangeError. This label\r\n&gt; will only be reached if the sealed interface is changed and the switch\r\n&gt; code is not recompiled.** In effect, the compiler hardens your code for\r\n&gt; you.\r\n&gt; \r\n\r\n\r\n  [1]: https://jdk.java.net/19/\r\n  [2]: https://openjdk.org/jeps/427\r\n  [3]: https://bugs.openjdk.org/browse/JDK-8282272","title":"Java 19 Pattern Matching Compilation Error: &quot;the switch statement does not cover all possible input values&quot;","body":"<p><a href=\"https://jdk.java.net/19/\" rel=\"nofollow noreferrer\">JDK 19</a> has only Early-Access Builds available now.</p>\n<p>I think I have found the important part for this question in the <a href=\"https://openjdk.org/jeps/427\" rel=\"nofollow noreferrer\">JEPS 427 documentation</a></p>\n<p>The progress of <strong>Pattern Matching (Third Preview)</strong> could also be tracked from <a href=\"https://bugs.openjdk.org/browse/JDK-8282272\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>According to the following JEPS example, I would expect this to work, so I think that you should wait first for the first <strong>JDK 19 build for general availability</strong> and try again. If it still not works then I think you should proceed and report it as a bug.</p>\n<blockquote>\n<p>Some extra care is needed when a permitted direct subclass only\nimplements a specific parameterization of a (<strong>generic</strong>) sealed\nsuperclass. For example:</p>\n</blockquote>\n<pre><code>sealed interface I&lt;T&gt; permits A, B {}\nfinal class A&lt;X&gt; implements I&lt;String&gt; {}\nfinal class B&lt;Y&gt; implements I&lt;Y&gt; {}\n\nstatic int testGenericSealedExhaustive(I&lt;Integer&gt; i) {\n    return switch (i) {\n        // Exhaustive as no A case possible!\n        case B&lt;Integer&gt; bi -&gt; 42;\n    }\n}\n</code></pre>\n<blockquote>\n<p>The only permitted subclasses of I are A and B, but the compiler can\ndetect that the switch block need only cover the class B to be\nexhaustive since the selector expression is of type I.</p>\n</blockquote>\n<p>I also think that the comment from @<strong>Kayaman</strong> is not the case here as it is explicitly stated in the documentation how this case is handled to be safe.</p>\n<blockquote>\n<p><strong>To defend against incompatible separate compilation, in this case of a\nswitch over a sealed class where the switch block is exhaustive and\nthere is no match-all case, the compiler automatically adds a default\nlabel whose code throws an IncompatibleClassChangeError. This label\nwill only be reached if the sealed interface is changed and the switch\ncode is not recompiled.</strong> In effect, the compiler hardens your code for\nyou.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1888553,"reputation":18649,"user_id":1767106,"accept_rate":78,"display_name":"clay"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1676006990,"creation_date":1665077485,"answer_id":73977879,"question_id":72703351,"body_markdown":"This is a known bug in Java 19. This was confirmed by Brian Goetz himself on the amber-dev mailing list.\r\n\r\n**UPDATE**: This issue is completely fixed in Java 20.","title":"Java 19 Pattern Matching Compilation Error: &quot;the switch statement does not cover all possible input values&quot;","body":"<p>This is a known bug in Java 19. This was confirmed by Brian Goetz himself on the amber-dev mailing list.</p>\n<p><strong>UPDATE</strong>: This issue is completely fixed in Java 20.</p>\n"}],"owner":{"account_id":1888553,"reputation":18649,"user_id":1767106,"accept_rate":78,"display_name":"clay"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":981,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":73977879,"answer_count":2,"score":9,"last_activity_date":1676006990,"creation_date":1655824820,"question_id":72703351,"body_markdown":"Using the Brian Goetz article: https://www.infoq.com/articles/data-oriented-programming-java/\r\n\r\n```java\r\nsealed interface Opt&lt;T&gt; { \r\n    record Some&lt;T&gt;(T value) implements Opt&lt;T&gt; { }\r\n    record None&lt;T&gt;() implements Opt&lt;T&gt; { }\r\n}\r\n```\r\n\r\nThis compiles and runs as expected. The exhaustive pattern matching works:\r\n\r\n```java\r\nOpt&lt;String&gt; optValue = doCalc(value);\r\nswitch (optValue) {\r\n  case Opt.Some&lt;String&gt; some -&gt; System.out.printf(&quot;got string: %s%n&quot;, some.value());\r\n  case Opt.None&lt;String&gt; none -&gt; System.out.printf(&quot;got none%n&quot;);\r\n};\r\n```\r\n\r\nThis variation where I use the new Record patterns preview feature, breaks the exhaustive pattern matching, where this won&#39;t compile without adding a default case statement:\r\n\r\n```java\r\nOpt&lt;String&gt; optValue = doCalc(value);\r\nswitch (optValue) {\r\n    case Opt.Some&lt;String&gt;(String v) -&gt; System.out.printf(&quot;got string: %s%n&quot;, v);\r\n    case Opt.None&lt;String&gt; none -&gt; System.out.printf(&quot;got none%n&quot;);\r\n};\r\n```\r\n\r\nWith `OpenJDK Runtime Environment (build 19-ea+32-2220)`, I get the compilation error: `the switch statement does not cover all possible input values`.\r\n\r\nWhen I add a default case statement, and the program works, but I don&#39;t get exhaustive pattern matching.\r\n\r\nIf I remove the record pattern matching, the program works.\r\n\r\nIf I create a variation of this without generics, that uses sealed classes, exhaustive pattern matching, and record patterns, it works.\r\n\r\nHowever, it seems the combination of record patterns, generics and exhaustive pattern matching does not work.","title":"Java 19 Pattern Matching Compilation Error: &quot;the switch statement does not cover all possible input values&quot;","body":"<p>Using the Brian Goetz article: <a href=\"https://www.infoq.com/articles/data-oriented-programming-java/\" rel=\"nofollow noreferrer\">https://www.infoq.com/articles/data-oriented-programming-java/</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>sealed interface Opt&lt;T&gt; { \n    record Some&lt;T&gt;(T value) implements Opt&lt;T&gt; { }\n    record None&lt;T&gt;() implements Opt&lt;T&gt; { }\n}\n</code></pre>\n<p>This compiles and runs as expected. The exhaustive pattern matching works:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Opt&lt;String&gt; optValue = doCalc(value);\nswitch (optValue) {\n  case Opt.Some&lt;String&gt; some -&gt; System.out.printf(&quot;got string: %s%n&quot;, some.value());\n  case Opt.None&lt;String&gt; none -&gt; System.out.printf(&quot;got none%n&quot;);\n};\n</code></pre>\n<p>This variation where I use the new Record patterns preview feature, breaks the exhaustive pattern matching, where this won't compile without adding a default case statement:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Opt&lt;String&gt; optValue = doCalc(value);\nswitch (optValue) {\n    case Opt.Some&lt;String&gt;(String v) -&gt; System.out.printf(&quot;got string: %s%n&quot;, v);\n    case Opt.None&lt;String&gt; none -&gt; System.out.printf(&quot;got none%n&quot;);\n};\n</code></pre>\n<p>With <code>OpenJDK Runtime Environment (build 19-ea+32-2220)</code>, I get the compilation error: <code>the switch statement does not cover all possible input values</code>.</p>\n<p>When I add a default case statement, and the program works, but I don't get exhaustive pattern matching.</p>\n<p>If I remove the record pattern matching, the program works.</p>\n<p>If I create a variation of this without generics, that uses sealed classes, exhaustive pattern matching, and record patterns, it works.</p>\n<p>However, it seems the combination of record patterns, generics and exhaustive pattern matching does not work.</p>\n"},{"tags":["java","javadoc"],"owner":{"account_id":2028428,"reputation":423,"user_id":1812810,"accept_rate":41,"display_name":"kakoli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676006849,"creation_date":1676003562,"question_id":75406973,"body_markdown":"Till jdk1.8 atleast, the downloaded javadoc.zip once inflated could be opened like this :\r\n\r\nhttps://drive.google.com/file/d/1NUbuIrgOydKaepWquLUt0yFlekhz7a-R/view?usp=share_link\r\n\r\nHowever with jdk17, it is not having the left pane with all packages and classes. This was very useful if we do not know the exact class name and just want to browse through some of the packages.\r\nAny suggestions?","title":"jdk17 javadoc viewing issue","body":"<p>Till jdk1.8 atleast, the downloaded javadoc.zip once inflated could be opened like this :</p>\n<p><a href=\"https://drive.google.com/file/d/1NUbuIrgOydKaepWquLUt0yFlekhz7a-R/view?usp=share_link\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/1NUbuIrgOydKaepWquLUt0yFlekhz7a-R/view?usp=share_link</a></p>\n<p>However with jdk17, it is not having the left pane with all packages and classes. This was very useful if we do not know the exact class name and just want to browse through some of the packages.\nAny suggestions?</p>\n"},{"tags":["java","arrays","multidimensional-array"],"comments":[{"owner":{"account_id":117125,"reputation":13617,"user_id":306855,"accept_rate":73,"display_name":"Emil"},"score":4,"creation_date":1313742215,"post_id":7118178,"comment_id":8529995,"body_markdown":"@Caroline:If you are trying to initialize the 2d array with 0,u need not do so as it is already initialized with 0 when you allocate the array,and you cannot initialize any array without using a loop.You can just hide the loop in a function just as Arrays.fill does.","body":"@Caroline:If you are trying to initialize the 2d array with 0,u need not do so as it is already initialized with 0 when you allocate the array,and you cannot initialize any array without using a loop.You can just hide the loop in a function just as Arrays.fill does."},{"owner":{"account_id":3389528,"reputation":4700,"user_id":2844702,"accept_rate":82,"display_name":"Number945"},"score":2,"creation_date":1482736139,"post_id":7118178,"comment_id":69858755,"body_markdown":"Hey guys don&#39;t exaggerate it now. All he wanted was some method in Java API to initialize multidimensional arrays to some default value in single step. That&#39;s what he wanted to say without a loop.","body":"Hey guys don&#39;t exaggerate it now. All he wanted was some method in Java API to initialize multidimensional arrays to some default value in single step. That&#39;s what he wanted to say without a loop."},{"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"score":2,"creation_date":1593419354,"post_id":7118178,"comment_id":110763900,"body_markdown":"@Number945 I believe Caroline is a feminine name.","body":"@Number945 I believe Caroline is a feminine name."}],"answers":[{"tags":[],"owner":{"account_id":113969,"reputation":120826,"user_id":299924,"accept_rate":94,"display_name":"trojanfoe"},"down_vote_count":10,"up_vote_count":103,"is_accepted":false,"score":93,"last_activity_date":1313739798,"creation_date":1313738383,"answer_id":7118208,"question_id":7118178,"body_markdown":"    double[][] arr = new double[20][4];\r\n    Arrays.fill(arr[0], 0);\r\n    Arrays.fill(arr[1], 0);\r\n    Arrays.fill(arr[2], 0);\r\n    Arrays.fill(arr[3], 0);\r\n    Arrays.fill(arr[4], 0);\r\n    Arrays.fill(arr[5], 0);\r\n    Arrays.fill(arr[6], 0);\r\n    Arrays.fill(arr[7], 0);\r\n    Arrays.fill(arr[8], 0);\r\n    Arrays.fill(arr[9], 0);\r\n    Arrays.fill(arr[10], 0);\r\n    Arrays.fill(arr[11], 0);\r\n    Arrays.fill(arr[12], 0);\r\n    Arrays.fill(arr[13], 0);\r\n    Arrays.fill(arr[14], 0);\r\n    Arrays.fill(arr[15], 0);\r\n    Arrays.fill(arr[16], 0);\r\n    Arrays.fill(arr[17], 0);\r\n    Arrays.fill(arr[18], 0);\r\n    Arrays.fill(arr[19], 0);\r\n","title":"Arrays.fill with multidimensional array in Java","body":"<pre><code>double[][] arr = new double[20][4];\nArrays.fill(arr[0], 0);\nArrays.fill(arr[1], 0);\nArrays.fill(arr[2], 0);\nArrays.fill(arr[3], 0);\nArrays.fill(arr[4], 0);\nArrays.fill(arr[5], 0);\nArrays.fill(arr[6], 0);\nArrays.fill(arr[7], 0);\nArrays.fill(arr[8], 0);\nArrays.fill(arr[9], 0);\nArrays.fill(arr[10], 0);\nArrays.fill(arr[11], 0);\nArrays.fill(arr[12], 0);\nArrays.fill(arr[13], 0);\nArrays.fill(arr[14], 0);\nArrays.fill(arr[15], 0);\nArrays.fill(arr[16], 0);\nArrays.fill(arr[17], 0);\nArrays.fill(arr[18], 0);\nArrays.fill(arr[19], 0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"down_vote_count":3,"up_vote_count":132,"is_accepted":false,"score":129,"last_activity_date":1313742241,"creation_date":1313738445,"answer_id":7118214,"question_id":7118178,"body_markdown":"This is because a `double[][]` is an array of `double[]` which you can&#39;t assign `0.0` to (it would be like doing `double[] vector = 0.0`). In fact, Java has no true multidimensional arrays.\r\n\r\nAs it happens, **`0.0` is the default value for doubles** in Java, thus the matrix will actually already be filled with zeros when you get it from `new`. However, if you wanted to fill it with, say, `1.0` you could do the following:\r\n\r\nI don&#39;t believe the API provides a method to solve this without using a loop. It&#39;s simple enough however to do it with a for-each loop.\r\n\r\n    double[][] matrix = new double[20][4];\r\n    \r\n    // Fill each row with 1.0\r\n    for (double[] row: matrix)\r\n        Arrays.fill(row, 1.0);\r\n        ","title":"Arrays.fill with multidimensional array in Java","body":"<p>This is because a <code>double[][]</code> is an array of <code>double[]</code> which you can't assign <code>0.0</code> to (it would be like doing <code>double[] vector = 0.0</code>). In fact, Java has no true multidimensional arrays.</p>\n\n<p>As it happens, <strong><code>0.0</code> is the default value for doubles</strong> in Java, thus the matrix will actually already be filled with zeros when you get it from <code>new</code>. However, if you wanted to fill it with, say, <code>1.0</code> you could do the following:</p>\n\n<p>I don't believe the API provides a method to solve this without using a loop. It's simple enough however to do it with a for-each loop.</p>\n\n<pre><code>double[][] matrix = new double[20][4];\n\n// Fill each row with 1.0\nfor (double[] row: matrix)\n    Arrays.fill(row, 1.0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1313739084,"creation_date":1313739084,"answer_id":7118321,"question_id":7118178,"body_markdown":"&gt;how can I fill a multidimensional array in Java without using a loop?\r\n\r\nMultidimensional arrays are just arrays of arrays and `fill(...)` doesn&#39;t check the type of the array and the value you pass in (this responsibility is upon the developer). \r\n\r\nThus you can&#39;t fill a multidimensional array reasonably well without using a loop.\r\n\r\nBe aware of the fact that, unlike languages like C or C++, Java arrays are objects and in multidimensional arrays all but the last level contain references to other `Array` objects. I&#39;m not 100% sure about this, but most likely they are distributed in memory, thus you can&#39;t just fill a contiguous block without a loop, like C/C++ would allow you to do.","title":"Arrays.fill with multidimensional array in Java","body":"<blockquote>\n  <p>how can I fill a multidimensional array in Java without using a loop?</p>\n</blockquote>\n\n<p>Multidimensional arrays are just arrays of arrays and <code>fill(...)</code> doesn't check the type of the array and the value you pass in (this responsibility is upon the developer). </p>\n\n<p>Thus you can't fill a multidimensional array reasonably well without using a loop.</p>\n\n<p>Be aware of the fact that, unlike languages like C or C++, Java arrays are objects and in multidimensional arrays all but the last level contain references to other <code>Array</code> objects. I'm not 100% sure about this, but most likely they are distributed in memory, thus you can't just fill a contiguous block without a loop, like C/C++ would allow you to do.</p>\n"},{"tags":[],"owner":{"account_id":441661,"reputation":86528,"user_id":831878,"accept_rate":92,"display_name":"Ray Toal"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1313739655,"creation_date":1313739655,"answer_id":7118404,"question_id":7118178,"body_markdown":"The OP asked how to solve this problem _without a loop_!  For some reason it is fashionable these days to avoid loops.  Why is this?  Probably there is a realization that using `map`, `reduce`, `filter`, and friends, and methods like `each` hide loops and cut down on program verbage and are kind of cool.  The same goes for really sweet Unix pipelines.  Or jQuery code.  Things just look great without loops.\r\n\r\nBut does Java have a `map` method?  Not really, but we could define one with a `Function` interface with an `eval` or `exec` method.  It isn&#39;t too hard and would be a good exercise.  It might be expensive and not used in practice.\r\n\r\nAnother way to do this *without a loop* is to use tail recursion.  Yes, it is kind of silly and no one would use it in practice either, but it does show, maybe, that loops are fine in this case.  Nevertheless, just to show &quot;yet another loop free example&quot; and to have fun, here is:\r\n\r\n    import java.util.Arrays;\r\n    public class FillExample {\r\n        private static void fillRowsWithZeros(double[][] a, int rows, int cols) {\r\n            if (rows &gt;= 0) {\r\n                double[] row = new double[cols];\r\n                Arrays.fill(row, 0.0);\r\n                a[rows] = row;\r\n                fillRowsWithZeros(a, rows - 1, cols);\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            double[][] arr = new double[20][4];\r\n            fillRowsWithZeros(arr, arr.length - 1, arr[0].length);\r\n            System.out.println(Arrays.deepToString(arr));\r\n        }\r\n    }\r\n\r\nIt isn&#39;t pretty, but in answer to the OP&#39;s question, there are no _explicit_ loops.\r\n\r\n\r\n","title":"Arrays.fill with multidimensional array in Java","body":"<p>The OP asked how to solve this problem <em>without a loop</em>!  For some reason it is fashionable these days to avoid loops.  Why is this?  Probably there is a realization that using <code>map</code>, <code>reduce</code>, <code>filter</code>, and friends, and methods like <code>each</code> hide loops and cut down on program verbage and are kind of cool.  The same goes for really sweet Unix pipelines.  Or jQuery code.  Things just look great without loops.</p>\n\n<p>But does Java have a <code>map</code> method?  Not really, but we could define one with a <code>Function</code> interface with an <code>eval</code> or <code>exec</code> method.  It isn't too hard and would be a good exercise.  It might be expensive and not used in practice.</p>\n\n<p>Another way to do this <em>without a loop</em> is to use tail recursion.  Yes, it is kind of silly and no one would use it in practice either, but it does show, maybe, that loops are fine in this case.  Nevertheless, just to show \"yet another loop free example\" and to have fun, here is:</p>\n\n<pre><code>import java.util.Arrays;\npublic class FillExample {\n    private static void fillRowsWithZeros(double[][] a, int rows, int cols) {\n        if (rows &gt;= 0) {\n            double[] row = new double[cols];\n            Arrays.fill(row, 0.0);\n            a[rows] = row;\n            fillRowsWithZeros(a, rows - 1, cols);\n        }\n    }\n\n    public static void main(String[] args) {\n        double[][] arr = new double[20][4];\n        fillRowsWithZeros(arr, arr.length - 1, arr[0].length);\n        System.out.println(Arrays.deepToString(arr));\n    }\n}\n</code></pre>\n\n<p>It isn't pretty, but in answer to the OP's question, there are no <em>explicit</em> loops.</p>\n"},{"tags":[],"owner":{"account_id":2699789,"reputation":509,"user_id":2499830,"display_name":"k3yz101"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1371623559,"creation_date":1371623559,"answer_id":17184344,"question_id":7118178,"body_markdown":"As an extension to the answer, I found this post but was looking to fill a 4 dimensional array.\r\nThe original example is only a two dimensional array, but the question says &quot;multidimensional&quot;. I didn&#39;t want to post a new question for this...\r\n\r\nYou can use the same method, but you have to nest them so that you eventually get to a single dimensional array.\r\n\r\n    fourDArray = new float[10][10][10][1];\r\n    // Fill each row with null\r\n    for (float[][][] row: fourDArray)\r\n    {\r\n    \tfor (float[][] innerRow: row)\r\n    \t{\r\n    \t\tfor (float[] innerInnerRow: innerRow)\r\n    \t\t{\r\n    \t\tArrays.fill(innerInnerRow, -1000);\r\n    \t\t}\r\n    \t}\r\n    };\r\n","title":"Arrays.fill with multidimensional array in Java","body":"<p>As an extension to the answer, I found this post but was looking to fill a 4 dimensional array.\nThe original example is only a two dimensional array, but the question says \"multidimensional\". I didn't want to post a new question for this...</p>\n\n<p>You can use the same method, but you have to nest them so that you eventually get to a single dimensional array.</p>\n\n<pre><code>fourDArray = new float[10][10][10][1];\n// Fill each row with null\nfor (float[][][] row: fourDArray)\n{\n    for (float[][] innerRow: row)\n    {\n        for (float[] innerInnerRow: innerRow)\n        {\n        Arrays.fill(innerInnerRow, -1000);\n        }\n    }\n};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1596019,"reputation":1,"user_id":1478124,"display_name":"watereater"},"down_vote_count":10,"up_vote_count":0,"is_accepted":false,"score":-10,"last_activity_date":1403661237,"creation_date":1380987939,"answer_id":19199560,"question_id":7118178,"body_markdown":"    Arrays.fill(arr, new double[4]);","title":"Arrays.fill with multidimensional array in Java","body":"<pre><code>Arrays.fill(arr, new double[4]);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1454150156,"creation_date":1454150156,"answer_id":35100713,"question_id":7118178,"body_markdown":"Don&#39;t we all sometimes wish there was a  \r\n`&lt;T&gt;void java.util.Arrays.deepFill(T[]…multiDimensional)`. Problems start with  \r\n`Object threeByThree[][] = new Object[3][3];`  \r\n`threeByThree[1] = null;` and  \r\n`threeByThree[2][1] = new int[]{42};` being perfectly legal.  \r\n(If only `Object twoDim[]final[]` was legal and well defined…)  \r\n(Using one of the public methods from below keeps loops from the calling source code.  \r\nIf you insist on using no loops at all, substitute the loops and the call to `Arrays.fill()`(!) using recursion.)\r\n\r\n    /** Fills matrix {@code m} with {@code value}.\r\n     * @return {@code m}&#39;s dimensionality.\r\n     * @throws java.lang.ArrayStoreException if the component type\r\n     *  of a subarray of non-zero length at the bottom level\r\n     *  doesn&#39;t agree with {@code value}&#39;s type. */\r\n    public static &lt;T&gt;int deepFill(Object[] m, T value) {\r\n   \t\tClass&lt;?&gt; components; \r\n       \tif (null == m ||\r\n            null == (components = m.getClass().getComponentType()))\r\n            return 0;\r\n       \tint dim = 0;\r\n       \tdo\r\n       \t\tdim++;\r\n       \twhile (null != (components = components.getComponentType()));\r\n       \tfiller((Object[][])m, value, dim);\r\n       \treturn dim;\r\n    }\r\n    /** Fills matrix {@code m} with {@code value}.\r\n     * @throws java.lang.ArrayStoreException if the component type\r\n     *  of a subarray of non-zero length at level {@code dimensions}\r\n     *  doesn&#39;t agree with {@code value}&#39;s type. */\r\n    public static &lt;T&gt;void fill(Object[] m, T value, int dimensions) {\r\n    \tif (null != m)\r\n    \t\tfiller(m, value, dimensions);\r\n    }\r\n    \r\n    static &lt;T&gt;void filler(Object[] m, T value, int toGo) {\r\n    \tif (--toGo &lt;= 0)\r\n    \t\tjava.util.Arrays.fill(m, value);\r\n    \telse\r\n    \t\tfor (Object[] subArray : (Object[][])m)\r\n    \t\t\tif (null != subArray)\r\n    \t\t\t\tfiller(subArray, value, toGo);\r\n    }","title":"Arrays.fill with multidimensional array in Java","body":"<p>Don't we all sometimes wish there was a<br>\n<code>&lt;T&gt;void java.util.Arrays.deepFill(T[]…multiDimensional)</code>. Problems start with<br>\n<code>Object threeByThree[][] = new Object[3][3];</code><br>\n<code>threeByThree[1] = null;</code> and<br>\n<code>threeByThree[2][1] = new int[]{42};</code> being perfectly legal.<br>\n(If only <code>Object twoDim[]final[]</code> was legal and well defined…)<br>\n(Using one of the public methods from below keeps loops from the calling source code.<br>\nIf you insist on using no loops at all, substitute the loops and the call to <code>Arrays.fill()</code>(!) using recursion.)</p>\n\n<pre><code>/** Fills matrix {@code m} with {@code value}.\n * @return {@code m}'s dimensionality.\n * @throws java.lang.ArrayStoreException if the component type\n *  of a subarray of non-zero length at the bottom level\n *  doesn't agree with {@code value}'s type. */\npublic static &lt;T&gt;int deepFill(Object[] m, T value) {\n    Class&lt;?&gt; components; \n    if (null == m ||\n        null == (components = m.getClass().getComponentType()))\n        return 0;\n    int dim = 0;\n    do\n        dim++;\n    while (null != (components = components.getComponentType()));\n    filler((Object[][])m, value, dim);\n    return dim;\n}\n/** Fills matrix {@code m} with {@code value}.\n * @throws java.lang.ArrayStoreException if the component type\n *  of a subarray of non-zero length at level {@code dimensions}\n *  doesn't agree with {@code value}'s type. */\npublic static &lt;T&gt;void fill(Object[] m, T value, int dimensions) {\n    if (null != m)\n        filler(m, value, dimensions);\n}\n\nstatic &lt;T&gt;void filler(Object[] m, T value, int toGo) {\n    if (--toGo &lt;= 0)\n        java.util.Arrays.fill(m, value);\n    else\n        for (Object[] subArray : (Object[][])m)\n            if (null != subArray)\n                filler(subArray, value, toGo);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7079337,"reputation":323,"user_id":5418289,"display_name":"Ahmed Mazher"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1457416027,"creation_date":1457416027,"answer_id":35859915,"question_id":7118178,"body_markdown":"    public static Object[] fillArray(Object[] arr,Object item){\r\n        Arrays.fill(arr, item);\r\n        return arr;\r\n    }\r\n    Character[][] maze = new Character[10][10];\r\n        fillArray(maze, fillArray(maze[0], &#39;?&#39;));\r\n        \r\n        for(int i = 0;i&lt;10;i++){\r\n            System.out.println();\r\n            for(int j = 0;j&lt;10;j++){\r\n                System.out.print(maze[i][j]);\r\n            }\r\n        }\r\ni hope this do well","title":"Arrays.fill with multidimensional array in Java","body":"<pre><code>public static Object[] fillArray(Object[] arr,Object item){\n    Arrays.fill(arr, item);\n    return arr;\n}\nCharacter[][] maze = new Character[10][10];\n    fillArray(maze, fillArray(maze[0], '?'));\n\n    for(int i = 0;i&lt;10;i++){\n        System.out.println();\n        for(int j = 0;j&lt;10;j++){\n            System.out.print(maze[i][j]);\n        }\n    }\n</code></pre>\n\n<p>i hope this do well</p>\n"},{"tags":[],"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1502780073,"creation_date":1502768126,"answer_id":45686121,"question_id":7118178,"body_markdown":"Using Java 8, you can declare and initialize a two-dimensional array without using a (explicit) loop as follows:\r\n\r\n    int x = 20; // first dimension\r\n    int y = 4; // second dimension\r\n\r\n    double[][] a = IntStream.range(0, x)\r\n                            .mapToObj(i -&gt; new double[y])\r\n                            .toArray(i -&gt; new double[x][]);\r\n\r\nThis will initialize the arrays with default values (`0.0` in the case of `double`).\r\n\r\nIn case you want to explicitly define the fill value to be used, You can add in a `DoubleStream`:\r\n\r\n    int x = 20; // first dimension\r\n    int y = 4; // second dimension\r\n    double v = 5.0; // fill value\r\n\r\n    double[][] a = IntStream\r\n            .range(0, x)\r\n            .mapToObj(i -&gt; DoubleStream.generate(() -&gt; v).limit(y).toArray())\r\n            .toArray(i -&gt; new double[x][]);","title":"Arrays.fill with multidimensional array in Java","body":"<p>Using Java 8, you can declare and initialize a two-dimensional array without using a (explicit) loop as follows:</p>\n\n<pre><code>int x = 20; // first dimension\nint y = 4; // second dimension\n\ndouble[][] a = IntStream.range(0, x)\n                        .mapToObj(i -&gt; new double[y])\n                        .toArray(i -&gt; new double[x][]);\n</code></pre>\n\n<p>This will initialize the arrays with default values (<code>0.0</code> in the case of <code>double</code>).</p>\n\n<p>In case you want to explicitly define the fill value to be used, You can add in a <code>DoubleStream</code>:</p>\n\n<pre><code>int x = 20; // first dimension\nint y = 4; // second dimension\ndouble v = 5.0; // fill value\n\ndouble[][] a = IntStream\n        .range(0, x)\n        .mapToObj(i -&gt; DoubleStream.generate(() -&gt; v).limit(y).toArray())\n        .toArray(i -&gt; new double[x][]);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13478834,"reputation":2234,"user_id":9724820,"display_name":"Sanjeev Guglani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538193550,"creation_date":1538193550,"answer_id":52564974,"question_id":7118178,"body_markdown":"**In simple words java donot provide such an API.\r\nYou need to iterate through loop and using fill method you can fill 2D array with one loop.**\r\n\r\n          int row = 5;\r\n    \t  int col = 6;\r\n    \t  int cache[][]=new int[row][col];\r\n    \t  for(int i=0;i&lt;=row;i++){\r\n    \t      Arrays.fill(cache[i]);\r\n    \t  }","title":"Arrays.fill with multidimensional array in Java","body":"<p><strong>In simple words java donot provide such an API.\nYou need to iterate through loop and using fill method you can fill 2D array with one loop.</strong></p>\n\n<pre><code>      int row = 5;\n      int col = 6;\n      int cache[][]=new int[row][col];\n      for(int i=0;i&lt;=row;i++){\n          Arrays.fill(cache[i]);\n      }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2479594,"reputation":707,"user_id":2159344,"display_name":"Bipool"},"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1647310115,"creation_date":1546116015,"answer_id":53973186,"question_id":7118178,"body_markdown":"As Per Java 8, we can use this way. \r\n\r\n```java\r\ndouble[][] arr = new double[20][4];\r\nArrays.stream(arr).forEach(a -&gt; Arrays.fill(a, 0));\r\n```\r\n\r\nWe can initialize a value in multidimensional array in a nicer and smart way. ","title":"Arrays.fill with multidimensional array in Java","body":"<p>As Per Java 8, we can use this way.</p>\n<pre class=\"lang-java prettyprint-override\"><code>double[][] arr = new double[20][4];\nArrays.stream(arr).forEach(a -&gt; Arrays.fill(a, 0));\n</code></pre>\n<p>We can initialize a value in multidimensional array in a nicer and smart way.</p>\n"},{"tags":[],"owner":{"account_id":17015507,"reputation":258,"user_id":12309508,"display_name":"PHPoenX"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1591858758,"creation_date":1581793926,"answer_id":60242227,"question_id":7118178,"body_markdown":"Arrays.fill works only with one-dimensional array\r\n\r\nSource of java.util.Arrays:\r\n```\r\npublic static void fill(Object[] a, Object val) {\r\n        int i = 0;\r\n\r\n        for(int len = a.length; i &lt; len; ++i) {\r\n            a[i] = val;\r\n        }\r\n```\r\nUse own loops for initialization array","title":"Arrays.fill with multidimensional array in Java","body":"<p>Arrays.fill works only with one-dimensional array</p>\n\n<p>Source of java.util.Arrays:</p>\n\n<pre><code>public static void fill(Object[] a, Object val) {\n        int i = 0;\n\n        for(int len = a.length; i &lt; len; ++i) {\n            a[i] = val;\n        }\n</code></pre>\n\n<p>Use own loops for initialization array</p>\n"},{"tags":[],"owner":{"account_id":6840936,"reputation":619,"user_id":5261352,"display_name":"Ashish Bhosle"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1584627616,"creation_date":1584627616,"answer_id":60759068,"question_id":7118178,"body_markdown":"Arrays.fill works with single dimensional array, so to fill two dimensional array we can do below\r\n\r\n    for (int i = 0, len = arr.length; i &lt; len; i++)\r\n    \tArrays.fill(arr[i], 0);","title":"Arrays.fill with multidimensional array in Java","body":"<p>Arrays.fill works with single dimensional array, so to fill two dimensional array we can do below</p>\n\n<pre><code>for (int i = 0, len = arr.length; i &lt; len; i++)\n    Arrays.fill(arr[i], 0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19963901,"reputation":1,"user_id":14630887,"display_name":"Vineeth Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626364609,"creation_date":1624108256,"answer_id":68047100,"question_id":7118178,"body_markdown":"Recursive Solution\r\n-------   \r\n A simple Recursive Solution to fill every row of a 2d array with any given value.\r\n\r\n\r\n    double[][] arr = new double[20][4];\r\n    int n=arr.length;\r\n    fillArrRecursively(arr, n-1, 10); //Recursion call\r\n\r\n\r\n\r\n   \r\n\r\n\r\n----------\r\n\r\n\r\n \r\n\r\n    //Recursive method to fill every row of &#39;arr&#39; with the passed variable &#39;val&#39;\r\n\r\n\tpublic static int fillArrRecursively(double arr[][], int n, int val){\r\n\t    if(n&lt;0) return 1;\r\n\t    Arrays.fill(arr[n], val);\r\n\t    return fillArrRecursively(arr, n-1, val);\r\n\t}\r\n\r\n","title":"Arrays.fill with multidimensional array in Java","body":"<h2 id=\"recursive-solution\">Recursive Solution</h2>\n<p>A simple Recursive Solution to fill every row of a 2d array with any given value.</p>\n<pre><code>double[][] arr = new double[20][4];\nint n=arr.length;\nfillArrRecursively(arr, n-1, 10); //Recursion call\n</code></pre>\n<hr />\n<pre><code>//Recursive method to fill every row of 'arr' with the passed variable 'val'\n\npublic static int fillArrRecursively(double arr[][], int n, int val){\n    if(n&lt;0) return 1;\n    Arrays.fill(arr[n], val);\n    return fillArrRecursively(arr, n-1, val);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23563494,"reputation":1,"user_id":17604557,"display_name":"R..V"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1676006781,"creation_date":1676006781,"answer_id":75407273,"question_id":7118178,"body_markdown":"         int dis[][]=new int[n][n];\r\n         for(int x[]:dis)\r\n            Arrays.fill(x,-1);\r\n         ","title":"Arrays.fill with multidimensional array in Java","body":"<pre><code>     int dis[][]=new int[n][n];\n     for(int x[]:dis)\n        Arrays.fill(x,-1);\n     \n</code></pre>\n"}],"owner":{"account_id":751581,"reputation":929,"user_id":901978,"display_name":"Caroline"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":223730,"favorite_count":0,"down_vote_count":1,"up_vote_count":93,"answer_count":15,"score":92,"last_activity_date":1676006781,"creation_date":1313738189,"question_id":7118178,"body_markdown":"How can I fill a multidimensional array in Java without using a loop? I&#39;ve tried:\r\n\r\n    double[][] arr = new double[20][4];\r\n    Arrays.fill(arr, 0);\r\n\r\nThis results in `java.lang.ArrayStoreException: java.lang.Double`","title":"Arrays.fill with multidimensional array in Java","body":"<p>How can I fill a multidimensional array in Java without using a loop? I've tried:</p>\n\n<pre><code>double[][] arr = new double[20][4];\nArrays.fill(arr, 0);\n</code></pre>\n\n<p>This results in <code>java.lang.ArrayStoreException: java.lang.Double</code></p>\n"},{"tags":["java","spring","rest","server","cloud"],"comments":[{"owner":{"account_id":15195949,"reputation":406,"user_id":11282562,"display_name":"Saarthak Gupta"},"score":0,"creation_date":1675911846,"post_id":75393705,"comment_id":133031414,"body_markdown":"I tried your web app. Something looks buggy in the way you have routed your login page. I believe the issue is present in the login page only. Can you please post the code snippet of how you are routing to the pages?","body":"I tried your web app. Something looks buggy in the way you have routed your login page. I believe the issue is present in the login page only. Can you please post the code snippet of how you are routing to the pages?"},{"owner":{"account_id":26079322,"reputation":23,"user_id":19777784,"display_name":"Jay Wu"},"score":0,"creation_date":1675912710,"post_id":75393705,"comment_id":133031525,"body_markdown":"@SaarthakGupta this happens to all the actions that I do in my App actually. I just added the routing codes","body":"@SaarthakGupta this happens to all the actions that I do in my App actually. I just added the routing codes"}],"answers":[{"tags":[],"owner":{"account_id":15195949,"reputation":406,"user_id":11282562,"display_name":"Saarthak Gupta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676006145,"creation_date":1676005400,"answer_id":75407152,"question_id":75393705,"body_markdown":"I believe this is due to the configuration of the front-end server (nginx or Apache etc...) on which you have deployed your Vue app. That&#39;s the reason, it is working on your local &amp; not working when you deploy it.\r\nYou might need to configure your frontend deployed server configuration.\r\n\r\nPlease check this link out: https://stackoverflow.com/questions/36399319/vue-router-return-404-when-revisit-to-the-url\r\n\r\nI can help you out more if you provide me with your deployed frontend server details.","title":"My Web App on Render keep showing Not Found after performing &quot;GET&quot;","body":"<p>I believe this is due to the configuration of the front-end server (nginx or Apache etc...) on which you have deployed your Vue app. That's the reason, it is working on your local &amp; not working when you deploy it.\nYou might need to configure your frontend deployed server configuration.</p>\n<p>Please check this link out: <a href=\"https://stackoverflow.com/questions/36399319/vue-router-return-404-when-revisit-to-the-url\">Vue Router return 404 when revisit to the url</a></p>\n<p>I can help you out more if you provide me with your deployed frontend server details.</p>\n"}],"owner":{"account_id":26079322,"reputation":23,"user_id":19777784,"display_name":"Jay Wu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1390,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75407152,"answer_count":1,"score":2,"last_activity_date":1676006145,"creation_date":1675910988,"question_id":75393705,"body_markdown":"So I have finally deployed my full stack Java Spring Boot app (my backend server) and frontend on Render, with database runing on Railway.\r\n\r\nHere is the link:\r\nhttps://shoppinglistapp-k7td.onrender.com/\r\n\r\nMy problem is the app runs fine on my local machine but after delpoyed, almost all the buttons that I clinck lead to a &quot;Not Found&quot; page. I have to go back, refresh, click the button again to see the content. \r\n\r\nFor example, after logging in, if you click logout, it should take you back to the login page but instead, it takes you to a &quot;Not Found&quot; page. You have to go back and refresh, otherwise the login page wont load.\r\n\r\n\r\nI am only a recent graduate and I would love to get some help.\r\n \r\n\r\nI have tried upgrading my free Render webservice to a paid plan as I thought it was because the server was responding too slow, but the problem remains. \r\n\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    const router = new Router({\r\n      mode: &#39;history&#39;,\r\n      base: process.env.BASE_URL,\r\n      routes: [\r\n      {\r\n          path: &#39;/&#39;,\r\n          name: &#39;home&#39;,\r\n          component: Home,\r\n          meta: {\r\n            requiresAuth: true\r\n          }\r\n        },\r\n        {\r\n          path: &quot;/login&quot;,\r\n          name: &quot;login&quot;,\r\n          component: Login,\r\n          meta: {\r\n            requiresAuth: false\r\n          }\r\n        },\r\n        {\r\n          path: &quot;/logout&quot;,\r\n          name: &quot;logout&quot;,\r\n          component: Logout,\r\n          meta: {\r\n            requiresAuth: false\r\n          }\r\n        }\r\n     ]\r\n    })\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"My Web App on Render keep showing Not Found after performing &quot;GET&quot;","body":"<p>So I have finally deployed my full stack Java Spring Boot app (my backend server) and frontend on Render, with database runing on Railway.</p>\n<p>Here is the link:\n<a href=\"https://shoppinglistapp-k7td.onrender.com/\" rel=\"nofollow noreferrer\">https://shoppinglistapp-k7td.onrender.com/</a></p>\n<p>My problem is the app runs fine on my local machine but after delpoyed, almost all the buttons that I clinck lead to a &quot;Not Found&quot; page. I have to go back, refresh, click the button again to see the content.</p>\n<p>For example, after logging in, if you click logout, it should take you back to the login page but instead, it takes you to a &quot;Not Found&quot; page. You have to go back and refresh, otherwise the login page wont load.</p>\n<p>I am only a recent graduate and I would love to get some help.</p>\n<p>I have tried upgrading my free Render webservice to a paid plan as I thought it was because the server was responding too slow, but the problem remains.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>const router = new Router({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: [\n  {\n      path: '/',\n      name: 'home',\n      component: Home,\n      meta: {\n        requiresAuth: true\n      }\n    },\n    {\n      path: \"/login\",\n      name: \"login\",\n      component: Login,\n      meta: {\n        requiresAuth: false\n      }\n    },\n    {\n      path: \"/logout\",\n      name: \"logout\",\n      component: Logout,\n      meta: {\n        requiresAuth: false\n      }\n    }\n ]\n})</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","android","android-fragments","fragment","swiperefreshlayout"],"comments":[{"owner":{"account_id":5212777,"reputation":20542,"user_id":4168607,"accept_rate":28,"display_name":"ADM"},"score":0,"creation_date":1676005875,"post_id":75407072,"comment_id":133054074,"body_markdown":"You should refresh your data only . You don&#39;t remove and add same fragment again.  Move all data loading call inside a method and call that method on refresh .","body":"You should refresh your data only . You don&#39;t remove and add same fragment again.  Move all data loading call inside a method and call that method on refresh ."},{"owner":{"account_id":27326609,"reputation":15,"user_id":20839486,"display_name":"Shakthi"},"score":0,"creation_date":1676006431,"post_id":75407072,"comment_id":133054138,"body_markdown":"@ADM This method was one of the accepted answer for similar question like this... that&#39;s why I tried it and I need to refresh entire fragment not just the data.That&#39;s my task","body":"@ADM This method was one of the accepted answer for similar question like this... that&#39;s why I tried it and I need to refresh entire fragment not just the data.That&#39;s my task"}],"answers":[{"tags":[],"owner":{"account_id":27441711,"reputation":1,"user_id":20936463,"display_name":"Harshal Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676005817,"creation_date":1676005817,"answer_id":75407193,"question_id":75407072,"body_markdown":"first check that you have added dependencies in build.gradle file\r\ni.e implementation &quot;androidx.swiperefreshlayout:swiperefreshlayout:1.1.0&quot;\r\n\r\nSecondly swipe to refresh layout tag should start from start instead of fragment\r\nfor eg :\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout \r\n     xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n     xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n     android:id=&quot;@+id/swipe&quot;\r\n     android:layout_width=&quot;match_parent&quot;\r\n     android:layout_height=&quot;match_parent&quot;\r\n     android:background=&quot;@drawable/gradient_drawable&quot;\r\n     android:padding=&quot;10dp&quot;\r\n     xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n     tools:context=&quot;.Fragment_1&quot;&gt;\r\n   \r\n     &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n        &lt;ProgressBar\r\n            android:id=&quot;@+id/progress&quot;\r\n            android:layout_width=&quot;76dp&quot;\r\n            android:layout_height=&quot;64dp&quot;\r\n            android:elevation=&quot;10dp&quot;\r\n            android:foregroundGravity=&quot;center&quot;\r\n            android:indeterminateTint=&quot;@color/black&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.84&quot; /&gt;\r\n\r\n        &lt;androidx.recyclerview.widget.RecyclerView\r\n            android:id=&quot;@+id/listview&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            android:padding=&quot;5dp&quot;/&gt;\r\n      &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;    \r\n    &lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout&gt;\r\n\r\nthird then write swipeRefreshLayout.setOnRefreshListener code in java file\r\n\r\n","title":"How to Refresh Fragments with swipe to refresh widget?","body":"<p>first check that you have added dependencies in build.gradle file\ni.e implementation &quot;androidx.swiperefreshlayout:swiperefreshlayout:1.1.0&quot;</p>\n<p>Secondly swipe to refresh layout tag should start from start instead of fragment\nfor eg :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout \n xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n android:id=&quot;@+id/swipe&quot;\n android:layout_width=&quot;match_parent&quot;\n android:layout_height=&quot;match_parent&quot;\n android:background=&quot;@drawable/gradient_drawable&quot;\n android:padding=&quot;10dp&quot;\n xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n tools:context=&quot;.Fragment_1&quot;&gt;\n\n &lt;androidx.constraintlayout.widget.ConstraintLayout\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;ProgressBar\n        android:id=&quot;@+id/progress&quot;\n        android:layout_width=&quot;76dp&quot;\n        android:layout_height=&quot;64dp&quot;\n        android:elevation=&quot;10dp&quot;\n        android:foregroundGravity=&quot;center&quot;\n        android:indeterminateTint=&quot;@color/black&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.84&quot; /&gt;\n\n    &lt;androidx.recyclerview.widget.RecyclerView\n        android:id=&quot;@+id/listview&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        android:padding=&quot;5dp&quot;/&gt;\n  &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;    \n&lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout&gt;\n</code></pre>\n<p>third then write swipeRefreshLayout.setOnRefreshListener code in java file</p>\n"}],"owner":{"account_id":27326609,"reputation":15,"user_id":20839486,"display_name":"Shakthi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1676005817,"creation_date":1676004559,"question_id":75407072,"body_markdown":"I wanted to refresh my fragment with SwipeToRefresh widget.\r\n\r\nThis is my **XML Code**\r\n\r\n``` \r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:background=&quot;@drawable/gradient_drawable&quot;\r\n    android:padding=&quot;10dp&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    tools:context=&quot;.Fragment_1&quot;&gt;\r\n    &lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout\r\n        android:id=&quot;@+id/swipe&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n   \r\n     &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n        &lt;ProgressBar\r\n            android:id=&quot;@+id/progress&quot;\r\n            android:layout_width=&quot;76dp&quot;\r\n            android:layout_height=&quot;64dp&quot;\r\n            android:elevation=&quot;10dp&quot;\r\n            android:foregroundGravity=&quot;center&quot;\r\n            android:indeterminateTint=&quot;@color/black&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.84&quot; /&gt;\r\n\r\n        &lt;androidx.recyclerview.widget.RecyclerView\r\n            android:id=&quot;@+id/listview&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            android:padding=&quot;5dp&quot;/&gt;\r\n\r\n\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n    &lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout&gt;\r\n\r\n&lt;/FrameLayout&gt;\r\n``` \r\nand this is my **JAVA code**\r\n\r\n```\r\n @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n\r\n        View view=inflater.inflate(R.layout.fragment_1, container, false);\r\n\r\n        newconfig= getResources().getConfiguration();\r\n        db=new DBHandler(getActivity());\r\n        swipeRefreshLayout=view.findViewById(R.id.swipe);\r\n        recyclerView=view.findViewById(R.id.listview);\r\n        progressBar=view.findViewById(R.id.progress);\r\n        if(book.size()==0) {\r\n            book = db.readCourses();\r\n        }\r\n        progressBar.setVisibility(View.GONE);\r\n        BookFragAdapter adapter = new BookFragAdapter(Fragment_land1.this,book);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(getActivity(),RecyclerView.VERTICAL,false));\r\n        recyclerView.setAdapter(adapter);\r\n        swipeRefreshLayout.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() {\r\n            @Override\r\n            public void onRefresh() {\r\n               this.onRefresh();\r\n                getFragmentManager().beginTransaction().detach(Fragment_land1.this).attach(Fragment_land1.this).commit();\r\n                swipeRefreshLayout.setRefreshing(false);\r\n            }\r\n        });\r\n\r\n\r\n        return view;\r\n    }\r\n```\r\nWhen I try to refresh it doesn&#39;t refresh and the widget doesn&#39;t stops after 250ms. I assume that the code inside **onRefreshListener** is not actually executing therefore the next line is ignored. I don&#39;t know how change it with. I surfed in **Stackoverflow** and **Developer.android** none of the answers solved my problem. Can anyone help me? ","title":"How to Refresh Fragments with swipe to refresh widget?","body":"<p>I wanted to refresh my fragment with SwipeToRefresh widget.</p>\n<p>This is my <strong>XML Code</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:background=&quot;@drawable/gradient_drawable&quot;\n    android:padding=&quot;10dp&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    tools:context=&quot;.Fragment_1&quot;&gt;\n    &lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout\n        android:id=&quot;@+id/swipe&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;&gt;\n   \n     &lt;androidx.constraintlayout.widget.ConstraintLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;&gt;\n\n        &lt;ProgressBar\n            android:id=&quot;@+id/progress&quot;\n            android:layout_width=&quot;76dp&quot;\n            android:layout_height=&quot;64dp&quot;\n            android:elevation=&quot;10dp&quot;\n            android:foregroundGravity=&quot;center&quot;\n            android:indeterminateTint=&quot;@color/black&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\n            app:layout_constraintVertical_bias=&quot;0.84&quot; /&gt;\n\n        &lt;androidx.recyclerview.widget.RecyclerView\n            android:id=&quot;@+id/listview&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\n            android:padding=&quot;5dp&quot;/&gt;\n\n\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n    &lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout&gt;\n\n&lt;/FrameLayout&gt;\n</code></pre>\n<p>and this is my <strong>JAVA code</strong></p>\n<pre><code> @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n\n        View view=inflater.inflate(R.layout.fragment_1, container, false);\n\n        newconfig= getResources().getConfiguration();\n        db=new DBHandler(getActivity());\n        swipeRefreshLayout=view.findViewById(R.id.swipe);\n        recyclerView=view.findViewById(R.id.listview);\n        progressBar=view.findViewById(R.id.progress);\n        if(book.size()==0) {\n            book = db.readCourses();\n        }\n        progressBar.setVisibility(View.GONE);\n        BookFragAdapter adapter = new BookFragAdapter(Fragment_land1.this,book);\n        recyclerView.setLayoutManager(new LinearLayoutManager(getActivity(),RecyclerView.VERTICAL,false));\n        recyclerView.setAdapter(adapter);\n        swipeRefreshLayout.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() {\n            @Override\n            public void onRefresh() {\n               this.onRefresh();\n                getFragmentManager().beginTransaction().detach(Fragment_land1.this).attach(Fragment_land1.this).commit();\n                swipeRefreshLayout.setRefreshing(false);\n            }\n        });\n\n\n        return view;\n    }\n</code></pre>\n<p>When I try to refresh it doesn't refresh and the widget doesn't stops after 250ms. I assume that the code inside <strong>onRefreshListener</strong> is not actually executing therefore the next line is ignored. I don't know how change it with. I surfed in <strong>Stackoverflow</strong> and <strong>Developer.android</strong> none of the answers solved my problem. Can anyone help me?</p>\n"},{"tags":["java","postgresql","jdbc","rowmapper"],"comments":[{"owner":{"account_id":2195832,"reputation":4154,"user_id":1941545,"accept_rate":83,"display_name":"Refugnic Eternium"},"score":0,"creation_date":1675837318,"post_id":75381996,"comment_id":133011676,"body_markdown":"I am not an expert, but to my understanding you get the data from the database as string. As such, you could run your serialized list through a parser (something as simple as &#39;split&#39; might already do and you&#39;ll get your list back.","body":"I am not an expert, but to my understanding you get the data from the database as string. As such, you could run your serialized list through a parser (something as simple as &#39;split&#39; might already do and you&#39;ll get your list back."}],"answers":[{"tags":[],"owner":{"account_id":26534196,"reputation":36,"user_id":20165976,"display_name":"Manali Lakhani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676005455,"creation_date":1675839417,"answer_id":75382304,"question_id":75381996,"body_markdown":"I have tried it and working fine. You can try the below code what I have understand from your description.\r\n\r\n\tString firstName = rs.getString(&quot;name&quot;);\r\n\tString lastName =  rs.getString(&quot;lastName&quot;);\r\n\tList&lt;String&gt; list  =  rs.getObject(&quot;habits&quot;);\r\n\r\nif you get compilation error, it will work definitly\r\n\r\nList&lt;String&gt; stringList = new ArrayList&lt;String&gt;;\r\nList&lt;Object&gt; objectList = stringList;// this does compile only if List&lt;String&gt; where subtypes of List&lt;Object&gt;\r\nobjectList.add(new Object());\r\nString s = stringList.get(0);\r\n\r\nit should work. \r\nLet me know if you facing still issue","title":"Create ArrayList from Postgresql query","body":"<p>I have tried it and working fine. You can try the below code what I have understand from your description.</p>\n<pre><code>String firstName = rs.getString(&quot;name&quot;);\nString lastName =  rs.getString(&quot;lastName&quot;);\nList&lt;String&gt; list  =  rs.getObject(&quot;habits&quot;);\n</code></pre>\n<p>if you get compilation error, it will work definitly</p>\n<p>List stringList = new ArrayList;\nList objectList = stringList;// this does compile only if List where subtypes of List\nobjectList.add(new Object());\nString s = stringList.get(0);</p>\n<p>it should work.\nLet me know if you facing still issue</p>\n"},{"tags":[],"owner":{"account_id":27610560,"reputation":3,"user_id":21073780,"display_name":"Vasek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675950193,"creation_date":1675950193,"answer_id":75399477,"question_id":75381996,"body_markdown":"Found an answer\r\n\r\n\r\nThe code below is working fine\r\n\r\n\r\n```\r\nString[] habits;\r\n        try {\r\n            habits = objectMapper.readValue(rs.getString(&quot;habits&quot;), String[].class);\r\n        } catch (JsonProcessingException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        List&lt;String&gt; habitsList = Arrays.stream(habits).toList();\r\n```","title":"Create ArrayList from Postgresql query","body":"<p>Found an answer</p>\n<p>The code below is working fine</p>\n<pre><code>String[] habits;\n        try {\n            habits = objectMapper.readValue(rs.getString(&quot;habits&quot;), String[].class);\n        } catch (JsonProcessingException e) {\n            throw new RuntimeException(e);\n        }\n        List&lt;String&gt; habitsList = Arrays.stream(habits).toList();\n</code></pre>\n"}],"owner":{"account_id":27610560,"reputation":3,"user_id":21073780,"display_name":"Vasek"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1676005455,"creation_date":1675837085,"question_id":75381996,"body_markdown":"I have following class:\r\n\r\n```\r\npublic class Person {\r\n\r\n private String firstName;\r\n private String lastName;\r\n private List&lt;String&gt; habits;\r\n}\r\n```\r\n\r\nI have Postgres query which returns me following result using inner join from 2 tables\r\n\r\n```\r\nname | lastname|      habits\r\n--------------------------------------      \r\nJohn | Smith   | [&quot;walking&quot;, &quot;eating&quot;]\r\n\r\n```\r\n\r\n\r\n\r\nI am trying to write RowMapper as following:\r\n\r\n```\r\nprivate final RowMapper&lt;Person&gt; rowMapper = (rs, rowNum) -&gt; {\r\n\r\n String firstName = rs.getString(&quot;name&quot;);\r\n String lastName =  rs.getString(&quot;lastName&quot;);\r\n}\r\n\r\n```\r\n\r\nI am not sure how to create List&lt;String&gt; habits from &quot;habits column in my result table&quot;\r\n\r\nPlease advise\r\n\r\nThanks","title":"Create ArrayList from Postgresql query","body":"<p>I have following class:</p>\n<pre><code>public class Person {\n\n private String firstName;\n private String lastName;\n private List&lt;String&gt; habits;\n}\n</code></pre>\n<p>I have Postgres query which returns me following result using inner join from 2 tables</p>\n<pre><code>name | lastname|      habits\n--------------------------------------      \nJohn | Smith   | [&quot;walking&quot;, &quot;eating&quot;]\n\n</code></pre>\n<p>I am trying to write RowMapper as following:</p>\n<pre><code>private final RowMapper&lt;Person&gt; rowMapper = (rs, rowNum) -&gt; {\n\n String firstName = rs.getString(&quot;name&quot;);\n String lastName =  rs.getString(&quot;lastName&quot;);\n}\n\n</code></pre>\n<p>I am not sure how to create List habits from &quot;habits column in my result table&quot;</p>\n<p>Please advise</p>\n<p>Thanks</p>\n"},{"tags":["java","android","eclipse","user-interface","wizard"],"comments":[{"owner":{"account_id":417862,"reputation":16972,"user_id":794088,"display_name":"petey"},"score":1,"creation_date":1360425814,"post_id":14789905,"comment_id":20710204,"body_markdown":"most of these implement some kind of viewpager as in this article : http://developer.android.com/training/animation/screen-slide.html","body":"most of these implement some kind of viewpager as in this article : <a href=\"http://developer.android.com/training/animation/screen-slide.html\" rel=\"nofollow noreferrer\">developer.android.com/training/animation/screen-slide.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":2081438,"reputation":67,"user_id":1853344,"display_name":"AhmedRed"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1360426155,"creation_date":1360426155,"answer_id":14789964,"question_id":14789905,"body_markdown":"The best way to do this is using Shared Preferences in android. \r\nhttp://developer.android.com/reference/android/content/SharedPreferences.html\r\nYou just need to check if the value is not already set then show your setup wizard else proceed straight to the application. \r\n\r\nYou can also show the wizard in dialog box or the other way is just develop a separate activity along with UI.","title":"Creating setup wizard on Android","body":"<p>The best way to do this is using Shared Preferences in android. \n<a href=\"http://developer.android.com/reference/android/content/SharedPreferences.html\" rel=\"nofollow\">http://developer.android.com/reference/android/content/SharedPreferences.html</a>\nYou just need to check if the value is not already set then show your setup wizard else proceed straight to the application. </p>\n\n<p>You can also show the wizard in dialog box or the other way is just develop a separate activity along with UI.</p>\n"},{"tags":[],"owner":{"account_id":1070763,"reputation":16795,"user_id":1070117,"accept_rate":86,"display_name":"Leandros"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1384178740,"creation_date":1360426223,"answer_id":14789972,"question_id":14789905,"body_markdown":"Creating a wizard is explained here, also: https://plus.google.com/113735310430199015092/posts/6cVymZvn3f4\r\n\r\nYou can get the code here:\r\nhttps://github.com/romannurik/android-wizardpager","title":"Creating setup wizard on Android","body":"<p>Creating a wizard is explained here, also: <a href=\"https://plus.google.com/113735310430199015092/posts/6cVymZvn3f4\" rel=\"noreferrer\">https://plus.google.com/113735310430199015092/posts/6cVymZvn3f4</a></p>\n\n<p>You can get the code here:\n<a href=\"https://github.com/romannurik/android-wizardpager\" rel=\"noreferrer\">https://github.com/romannurik/android-wizardpager</a></p>\n"}],"owner":{"account_id":1336768,"reputation":4924,"user_id":1279334,"accept_rate":59,"display_name":"MikkoP"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15950,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1676005410,"creation_date":1360425752,"question_id":14789905,"body_markdown":"In my application I need to ask the user some information in the beginning. Like Google asks users when they first launch the phone. \r\n\r\nUsing Java and Android, how do I make the same kind of setup wizard for my application? I could create multiple activities and when moving to the next page in the wizard I&#39;d launch that. That doesn&#39;t seem a good way to do it. \r\n\r\nI&#39;d like to use Eclipse&#39;s GUI builder to design it.","title":"Creating setup wizard on Android","body":"<p>In my application I need to ask the user some information in the beginning. Like Google asks users when they first launch the phone. </p>\n\n<p>Using Java and Android, how do I make the same kind of setup wizard for my application? I could create multiple activities and when moving to the next page in the wizard I'd launch that. That doesn't seem a good way to do it. </p>\n\n<p>I'd like to use Eclipse's GUI builder to design it.</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":18716710,"reputation":1336,"user_id":14291243,"display_name":"Abhishek Dutt"},"score":0,"creation_date":1676002252,"post_id":75406826,"comment_id":133053592,"body_markdown":"I think you should refer [this](https://firebase.google.com/docs/database/android/read-and-write) document before asking the question.","body":"I think you should refer <a href=\"https://firebase.google.com/docs/database/android/read-and-write\" rel=\"nofollow noreferrer\">this</a> document before asking the question."}],"answers":[{"tags":[],"owner":{"account_id":25739271,"reputation":653,"user_id":19493508,"display_name":"Hanif Shaikh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676005142,"creation_date":1676005142,"answer_id":75407131,"question_id":75406826,"body_markdown":"For Continuously observe data firebase is refer to use **addValueEventListener()**\r\n\r\n        ValueEventListener postListener = new ValueEventListener() {\r\n        @Override\r\n        public void onDataChange(DataSnapshot dataSnapshot) {\r\n            // Get Post object and use the values to update the UI\r\n            Post post = dataSnapshot.getValue(Post.class);\r\n            // ..\r\n        }\r\n    \r\n        @Override\r\n        public void onCancelled(DatabaseError databaseError) {\r\n            // Getting Post failed, log a message\r\n            Log.w(TAG, &quot;loadPost:onCancelled&quot;, databaseError.toException());\r\n        }\r\n    };\r\n    mPostReference.addValueEventListener(postListener);\r\n\r\n[Documentation Reference][1] also There are many video tutorial available on youtube \r\n\r\n\r\n  [1]: https://firebase.google.com/docs/database/android/read-and-write#java_4","title":"Accessing real-time firebase database in Android Studio","body":"<p>For Continuously observe data firebase is refer to use <strong>addValueEventListener()</strong></p>\n<pre><code>    ValueEventListener postListener = new ValueEventListener() {\n    @Override\n    public void onDataChange(DataSnapshot dataSnapshot) {\n        // Get Post object and use the values to update the UI\n        Post post = dataSnapshot.getValue(Post.class);\n        // ..\n    }\n\n    @Override\n    public void onCancelled(DatabaseError databaseError) {\n        // Getting Post failed, log a message\n        Log.w(TAG, &quot;loadPost:onCancelled&quot;, databaseError.toException());\n    }\n};\nmPostReference.addValueEventListener(postListener);\n</code></pre>\n<p><a href=\"https://firebase.google.com/docs/database/android/read-and-write#java_4\" rel=\"nofollow noreferrer\">Documentation Reference</a> also There are many video tutorial available on youtube</p>\n"}],"owner":{"account_id":27749915,"reputation":1,"user_id":21184520,"display_name":"Muhammad Jawad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1676005142,"creation_date":1676001814,"question_id":75406826,"body_markdown":"I am currently working on a project where we have to access the real-time firebase database data in Android Studio. The data stored in the real-time d[enter image description here](https://i.stack.imgur.com/Rzycu.jpg)atabase is in this Format.\r\n\r\nHow do we access this data in Android Studio Continuously?","title":"Accessing real-time firebase database in Android Studio","body":"<p>I am currently working on a project where we have to access the real-time firebase database data in Android Studio. The data stored in the real-time d<a href=\"https://i.stack.imgur.com/Rzycu.jpg\" rel=\"nofollow noreferrer\">enter image description here</a>atabase is in this Format.</p>\n<p>How do we access this data in Android Studio Continuously?</p>\n"},{"tags":["java","spring-boot","kubernetes","spring-cloud","spring-cloud-kubernetes"],"comments":[{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1676700332,"post_id":75407008,"comment_id":133194577,"body_markdown":"can you try our latest `3.x.x` dependencies in spring-cloud-kubernetes please?","body":"can you try our latest <code>3.x.x</code> dependencies in spring-cloud-kubernetes please?"},{"owner":{"account_id":8306240,"reputation":462,"user_id":6243160,"accept_rate":29,"display_name":"Columb1a"},"score":0,"creation_date":1678199260,"post_id":75407008,"comment_id":133484169,"body_markdown":"Did you mean to start using Spring Boot 3.x.x dependencies? That won&#39;t be possible as that deserves first a proper migration of dependencies. Also, if that is what you meant, why to do so? I don&#39;t see any reason as that is not part of the instructions in the documentation to try to reload the configmap.","body":"Did you mean to start using Spring Boot 3.x.x dependencies? That won&#39;t be possible as that deserves first a proper migration of dependencies. Also, if that is what you meant, why to do so? I don&#39;t see any reason as that is not part of the instructions in the documentation to try to reload the configmap."},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1678199788,"post_id":75407008,"comment_id":133484353,"body_markdown":"I only recently (1.5 years) been working in the `3.x.x` branches (as a spring-cloud-kubernetes contributor) that is why I was suggesting to try that. But if that is not an option, you can go to the github repo and open a defect. But without a minimal, reproducible example that we can see this in action, the chances of helping you are rather slim.","body":"I only recently (1.5 years) been working in the <code>3.x.x</code> branches (as a spring-cloud-kubernetes contributor) that is why I was suggesting to try that. But if that is not an option, you can go to the github repo and open a defect. But without a minimal, reproducible example that we can see this in action, the chances of helping you are rather slim."}],"owner":{"account_id":8306240,"reputation":462,"user_id":6243160,"accept_rate":29,"display_name":"Columb1a"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":255,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676005064,"creation_date":1676003879,"question_id":75407008,"body_markdown":"I have a spring boot (2.7.0) with spring-cloud-depependencies (2021.0.3) under GKE, where since I noticed Kubernetes api client is failing to connect but just few milliseconds later succeeding (And I can&#39;t figure out the reason why yet, although one detail is GKE cluster was upgraded, but that is another story), I rather on the meantime to fail fast the spring boot application and try to wait till the configmap is ready to be read.\r\n\r\nIn order to do so, I configured my bootstrap as follows:\r\n\r\n``` spring:\r\n  profiles: some-profile\r\n  cloud:\r\n    kubernetes:\r\n      config:\r\n        retry:\r\n          initial-interval: 1000\r\n          max-attempts: 6\r\n          max-interval: 2000\r\n          multiplier: 1.1\r\n        fail-fast: true\r\n        enabled: true\r\n        enableApi: true\r\n        namespace: some-namespace\r\n        name: someConfigmapName\r\n      reload:\r\n        enabled: true\r\n        monitoring-config-maps: true\r\n        mode: event\r\n        strategy: refresh \r\n```\r\nI added the respective dependencies as well:\r\n```\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.retry&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-retry&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n```\r\n\r\nAs those are the steps declared here: https://docs.spring.io/spring-cloud-kubernetes/docs/current/reference/html/#configmap-propertysource\r\n\r\n&gt; You can also make your application retry loading ConfigMap property sources on a failure. First, you need to set spring.cloud.kubernetes.config.fail-fast=true. Then you need to add spring-retry and spring-boot-starter-aop to your classpath. You can configure retry properties such as the maximum number of attempts, backoff options like initial interval, multiplier, max interval by setting the spring.cloud.kubernetes.config.retry.* properties.\r\n\r\nBut I&#39;m getting as an error:\r\n\r\n``` ***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nA component required a bean named &#39;configServerRetryInterceptor&#39; that could not be found.\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean named &#39;configServerRetryInterceptor&#39; in your configuration.\r\n ```\r\n\r\n\r\nWhy should I add the `configServerRetryInterceptor` bean? shouldn&#39;t that one instantiated automatically based on the steps declared in the the documentation? Regardless if that, if I create such a `@bean` in a class annotated with `@Configuration` it doesn&#39;t work either.\r\n\r\nWhat step am I missing? ","title":"Spring Boot with GKE: Retry loading ConfigMap not working as expected by spring cloud kubernetes documentation","body":"<p>I have a spring boot (2.7.0) with spring-cloud-depependencies (2021.0.3) under GKE, where since I noticed Kubernetes api client is failing to connect but just few milliseconds later succeeding (And I can't figure out the reason why yet, although one detail is GKE cluster was upgraded, but that is another story), I rather on the meantime to fail fast the spring boot application and try to wait till the configmap is ready to be read.</p>\n<p>In order to do so, I configured my bootstrap as follows:</p>\n<pre><code>  profiles: some-profile\n  cloud:\n    kubernetes:\n      config:\n        retry:\n          initial-interval: 1000\n          max-attempts: 6\n          max-interval: 2000\n          multiplier: 1.1\n        fail-fast: true\n        enabled: true\n        enableApi: true\n        namespace: some-namespace\n        name: someConfigmapName\n      reload:\n        enabled: true\n        monitoring-config-maps: true\n        mode: event\n        strategy: refresh \n</code></pre>\n<p>I added the respective dependencies as well:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.retry&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-retry&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>As those are the steps declared here: <a href=\"https://docs.spring.io/spring-cloud-kubernetes/docs/current/reference/html/#configmap-propertysource\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-cloud-kubernetes/docs/current/reference/html/#configmap-propertysource</a></p>\n<blockquote>\n<p>You can also make your application retry loading ConfigMap property sources on a failure. First, you need to set spring.cloud.kubernetes.config.fail-fast=true. Then you need to add spring-retry and spring-boot-starter-aop to your classpath. You can configure retry properties such as the maximum number of attempts, backoff options like initial interval, multiplier, max interval by setting the spring.cloud.kubernetes.config.retry.* properties.</p>\n</blockquote>\n<p>But I'm getting as an error:</p>\n<pre><code>APPLICATION FAILED TO START\n***************************\n\nDescription:\n\nA component required a bean named 'configServerRetryInterceptor' that could not be found.\n\n\nAction:\n\nConsider defining a bean named 'configServerRetryInterceptor' in your configuration.\n</code></pre>\n<p>Why should I add the <code>configServerRetryInterceptor</code> bean? shouldn't that one instantiated automatically based on the steps declared in the the documentation? Regardless if that, if I create such a <code>@bean</code> in a class annotated with <code>@Configuration</code> it doesn't work either.</p>\n<p>What step am I missing?</p>\n"},{"tags":["java","spring","spring-boot"],"owner":{"account_id":24519139,"reputation":23,"user_id":19894782,"display_name":"Borka192"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676004026,"creation_date":1676004026,"question_id":75407028,"body_markdown":"\r\n\r\n**AuthenticationFilter**\r\n\r\n     public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\r\n\r\n        ServerHttpRequest request = exchange.getRequest();\r\n        \r\n        final List&lt;String&gt; apiEndpoints = List.of(&quot;/code&quot;, &quot;/login&quot;);\r\n\r\n        Predicate&lt;ServerHttpRequest&gt; isApiSecured = r -&gt; apiEndpoints.stream()\r\n                .noneMatch(uri -&gt; r.getURI().getPath().contains(uri));\r\n\r\n\r\n        if (isApiSecured.test(request) &amp;&amp; !request.getPath().value().contains(&quot;/auth/token/&quot;)) {\r\n            ServerHttpResponse response = exchange.getResponse();\r\n\r\n            if (!request.getHeaders().containsKey(&quot;Authorization&quot;)) {\r\n                response.setStatusCode(HttpStatus.UNAUTHORIZED);\r\n\r\n                return response.setComplete();\r\n            }\r\n\r\n            final String token = request.getHeaders().getOrEmpty(&quot;Authorization&quot;).get(0);\r\n\r\n            try {\r\n                jwtUtil.validateToken(token);\r\n            } catch (SignatureException ex) {\r\n                throw new UnauthorizedExceptions(&quot;Invalid JWT signature&quot;);\r\n            } catch (MalformedJwtException ex) {\r\n                throw new UnauthorizedExceptions(&quot;Invalid JWT token&quot;);\r\n            } catch (ExpiredJwtException ex) {\r\n                throw new TimeOutException(&quot;Expired JWT token&quot;);\r\n            } catch (UnsupportedJwtException ex) {\r\n                throw new UnauthorizedExceptions(&quot;Unsupported JWT token&quot;);\r\n            }\r\n\r\n            Claims claims = jwtUtil.getClaims(token);\r\n\r\n            exchange.getRequest()\r\n                    .mutate()\r\n                    .header(&quot;id&quot;, String.valueOf(claims.get(&quot;id&quot;)))\r\n                    .build();\r\n\r\n        }\r\n\r\n\r\n\r\nI need to get the request body before authorization in the getway api using serverWebExchange , request.getBody = WebFlux?need to pull out the user&#39;s login before authorization and write it to the logs.How can i do it? ","title":"Get Request Body from api-gateway","body":"<p><strong>AuthenticationFilter</strong></p>\n<pre><code> public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n\n    ServerHttpRequest request = exchange.getRequest();\n    \n    final List&lt;String&gt; apiEndpoints = List.of(&quot;/code&quot;, &quot;/login&quot;);\n\n    Predicate&lt;ServerHttpRequest&gt; isApiSecured = r -&gt; apiEndpoints.stream()\n            .noneMatch(uri -&gt; r.getURI().getPath().contains(uri));\n\n\n    if (isApiSecured.test(request) &amp;&amp; !request.getPath().value().contains(&quot;/auth/token/&quot;)) {\n        ServerHttpResponse response = exchange.getResponse();\n\n        if (!request.getHeaders().containsKey(&quot;Authorization&quot;)) {\n            response.setStatusCode(HttpStatus.UNAUTHORIZED);\n\n            return response.setComplete();\n        }\n\n        final String token = request.getHeaders().getOrEmpty(&quot;Authorization&quot;).get(0);\n\n        try {\n            jwtUtil.validateToken(token);\n        } catch (SignatureException ex) {\n            throw new UnauthorizedExceptions(&quot;Invalid JWT signature&quot;);\n        } catch (MalformedJwtException ex) {\n            throw new UnauthorizedExceptions(&quot;Invalid JWT token&quot;);\n        } catch (ExpiredJwtException ex) {\n            throw new TimeOutException(&quot;Expired JWT token&quot;);\n        } catch (UnsupportedJwtException ex) {\n            throw new UnauthorizedExceptions(&quot;Unsupported JWT token&quot;);\n        }\n\n        Claims claims = jwtUtil.getClaims(token);\n\n        exchange.getRequest()\n                .mutate()\n                .header(&quot;id&quot;, String.valueOf(claims.get(&quot;id&quot;)))\n                .build();\n\n    }\n</code></pre>\n<p>I need to get the request body before authorization in the getway api using serverWebExchange , request.getBody = WebFlux?need to pull out the user's login before authorization and write it to the logs.How can i do it?</p>\n"},{"tags":["java","tomcat","servlets","http-status-code-404"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1676009613,"post_id":75407003,"comment_id":133054514,"body_markdown":"(1) Apache Tomcat/10.0.23  use `jakarta.servlet` not `javax.servlet` (2) Check all log files under the tomcat/logs directory for error messages?","body":"(1) Apache Tomcat/10.0.23  use <code>jakarta.servlet</code> not <code>javax.servlet</code> (2) Check all log files under the tomcat/logs directory for error messages?"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1676019312,"post_id":75407003,"comment_id":133056596,"body_markdown":"your web.xml is config  `com.example.servlets.TestServlet`,  but in TestServlet.java package is `com.fourdcontrols.servlets`. Maybe you can change your web.xml config to correct servlet:  `com.fourdcontrols.servlets.TestServlet`","body":"your web.xml is config  <code>com.example.servlets.TestServlet</code>,  but in TestServlet.java package is <code>com.fourdcontrols.servlets</code>. Maybe you can change your web.xml config to correct servlet:  <code>com.fourdcontrols.servlets.TestServlet</code>"}],"owner":{"account_id":26958837,"reputation":75,"user_id":20526798,"display_name":"Stewart LloydJones"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1676026434,"answer_count":0,"score":1,"last_activity_date":1676003832,"creation_date":1676003832,"question_id":75407003,"body_markdown":"After deploying the webapp to a remote server all servlets return HTTP Status 404 but index.jsp works fine.\r\nAll servlets work on localhost, running the same version of tomcat. Logs are:\r\n\r\ncatalina.out\r\n\r\n```\r\n10-Feb-2023 04:19:42.728 INFO [ajp-nio-127.0.0.1-8009-exec-86] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [/bitnami/tomcat/webapps/test-api.war]\r\n10-Feb-2023 04:19:43.296 INFO [ajp-nio-127.0.0.1-8009-exec-86] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\n10-Feb-2023 04:19:43.306 INFO [ajp-nio-127.0.0.1-8009-exec-86] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [/bitnami/tomcat/webapps/test-api.war] has finished in [577] ms\r\n```\r\nlocalhost_access_log\r\n\r\n```\r\n- [10/Feb/2023:04:08:03 +0000] &quot;GET /test-api/test HTTP/1.1&quot; 404 778\r\n- [10/Feb/2023:04:19:54 +0000] &quot;GET /test-api/test-two HTTP/1.1&quot; 404 772\r\n```\r\n\r\n\r\n\r\n\r\nweb.xml\r\n```\r\ntype he&lt;web-app xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;\r\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee\r\n                      http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;\r\n  version=&quot;3.0&quot;&gt;\r\n\r\n  &lt;display-name&gt;Test API&lt;/display-name&gt;\r\n\r\n  &lt;context-param&gt;\r\n    &lt;param-name&gt;contextPath&lt;/param-name&gt;\r\n    &lt;param-value&gt;/test-api&lt;/param-value&gt;\r\n  &lt;/context-param&gt;\r\n\r\n  &lt;servlet&gt;\r\n    &lt;servlet-name&gt;TestServlet&lt;/servlet-name&gt;\r\n    &lt;servlet-class&gt;com.example.servlets.TestServlet&lt;/servlet-class&gt;\r\n  &lt;/servlet&gt;\r\n  &lt;servlet-mapping&gt;\r\n    &lt;servlet-name&gt;TestServlet&lt;/servlet-name&gt;\r\n    &lt;url-pattern&gt;/test&lt;/url-pattern&gt;\r\n  &lt;/servlet-mapping&gt;\r\n\r\n&lt;servlet&gt;\r\n    &lt;servlet-name&gt;TestServlet&lt;/servlet-name&gt;\r\n    &lt;servlet-class&gt;com.example.servlets.TestServlet&lt;/servlet-class&gt;\r\n  &lt;/servlet&gt;\r\n  &lt;servlet-mapping&gt;\r\n    &lt;servlet-name&gt;TestServletTwo&lt;/servlet-name&gt;\r\n    &lt;url-pattern&gt;/test-two&lt;/url-pattern&gt;\r\n  &lt;/servlet-mapping&gt;\r\n\r\n&lt;/web-app&gt;\r\n```\r\n\r\nTestServlet.java\r\n\r\n```\r\npackage com.fourdcontrols.servlets;\r\n\r\nimport java.io.IOException;\r\n\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.annotation.WebServlet;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\n\r\n@WebServlet(&quot;/test&quot;)\r\npublic class TestServlet extends HttpServlet {\r\n\r\n    @Override\r\n    protected void doGet(HttpServletRequest request, HttpServletResponse response)\r\n            throws ServletException, IOException {\r\n        response.getWriter().write(&quot;Testing?&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n","title":"Apache Tomcat/10.0.23 Servlet HTTP Status 404 – Not Found but works on localhost","body":"<p>After deploying the webapp to a remote server all servlets return HTTP Status 404 but index.jsp works fine.\nAll servlets work on localhost, running the same version of tomcat. Logs are:</p>\n<p>catalina.out</p>\n<pre><code>10-Feb-2023 04:19:42.728 INFO [ajp-nio-127.0.0.1-8009-exec-86] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [/bitnami/tomcat/webapps/test-api.war]\n10-Feb-2023 04:19:43.296 INFO [ajp-nio-127.0.0.1-8009-exec-86] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n10-Feb-2023 04:19:43.306 INFO [ajp-nio-127.0.0.1-8009-exec-86] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [/bitnami/tomcat/webapps/test-api.war] has finished in [577] ms\n</code></pre>\n<p>localhost_access_log</p>\n<pre><code>- [10/Feb/2023:04:08:03 +0000] &quot;GET /test-api/test HTTP/1.1&quot; 404 778\n- [10/Feb/2023:04:19:54 +0000] &quot;GET /test-api/test-two HTTP/1.1&quot; 404 772\n</code></pre>\n<p>web.xml</p>\n<pre><code>type he&lt;web-app xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee\n                      http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;\n  version=&quot;3.0&quot;&gt;\n\n  &lt;display-name&gt;Test API&lt;/display-name&gt;\n\n  &lt;context-param&gt;\n    &lt;param-name&gt;contextPath&lt;/param-name&gt;\n    &lt;param-value&gt;/test-api&lt;/param-value&gt;\n  &lt;/context-param&gt;\n\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;TestServlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;com.example.servlets.TestServlet&lt;/servlet-class&gt;\n  &lt;/servlet&gt;\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;TestServlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/test&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n\n&lt;servlet&gt;\n    &lt;servlet-name&gt;TestServlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;com.example.servlets.TestServlet&lt;/servlet-class&gt;\n  &lt;/servlet&gt;\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;TestServletTwo&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/test-two&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n<p>TestServlet.java</p>\n<pre><code>package com.fourdcontrols.servlets;\n\nimport java.io.IOException;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n@WebServlet(&quot;/test&quot;)\npublic class TestServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n        response.getWriter().write(&quot;Testing?&quot;);\n    }\n\n}\n</code></pre>\n"},{"tags":["java","cucumber","karate"],"answers":[{"tags":[],"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676003022,"creation_date":1676003022,"answer_id":75406926,"question_id":75404348,"body_markdown":"I think you are expecting Karate to work like Cucumber, no that&#39;s not how it works. There&#39;s no such thing as a `DataTable` in Karate.\r\n\r\nPlease spend some time how Karate uses JSON arrays where you want to loop over a data source: https://github.com/karatelabs/karate#data-driven-features\r\n\r\nAnd there is a way to do dynamic scenario outlines, look it up: https://github.com/karatelabs/karate#setup","title":"Karate: How to use a datatable in a java function?","body":"<p>I think you are expecting Karate to work like Cucumber, no that's not how it works. There's no such thing as a <code>DataTable</code> in Karate.</p>\n<p>Please spend some time how Karate uses JSON arrays where you want to loop over a data source: <a href=\"https://github.com/karatelabs/karate#data-driven-features\" rel=\"nofollow noreferrer\">https://github.com/karatelabs/karate#data-driven-features</a></p>\n<p>And there is a way to do dynamic scenario outlines, look it up: <a href=\"https://github.com/karatelabs/karate#setup\" rel=\"nofollow noreferrer\">https://github.com/karatelabs/karate#setup</a></p>\n"}],"owner":{"account_id":17627317,"reputation":127,"user_id":12792142,"display_name":"TestingCodes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75406926,"answer_count":1,"score":1,"last_activity_date":1676003022,"creation_date":1675976277,"question_id":75404348,"body_markdown":"I have a feature file that looks like:\r\n\r\n    * def javaFunction = Java.type(&#39;my.javaClass&#39;);\r\n    * def generateFile = new javaFunction().functionName(???)\r\n\r\nAnd my function looks like\r\n\r\n    public String functionName(DataTable dm){\r\n      for (DataModel aDataModel : dm) {\r\n          String username = aDataModel.user;\r\n          String password = aDataModel.password;\r\n      }\r\n    }\r\n\r\nI want to use a Data table that looks like this but I&#39;m not sure how to call it in the functionName(???) in my .feature file\r\n\r\n    |user       |password |\r\n    |cucumber1  |cucumber |\r\n    |cucumber2  |cucumber |","title":"Karate: How to use a datatable in a java function?","body":"<p>I have a feature file that looks like:</p>\n<pre><code>* def javaFunction = Java.type('my.javaClass');\n* def generateFile = new javaFunction().functionName(???)\n</code></pre>\n<p>And my function looks like</p>\n<pre><code>public String functionName(DataTable dm){\n  for (DataModel aDataModel : dm) {\n      String username = aDataModel.user;\n      String password = aDataModel.password;\n  }\n}\n</code></pre>\n<p>I want to use a Data table that looks like this but I'm not sure how to call it in the functionName(???) in my .feature file</p>\n<pre><code>|user       |password |\n|cucumber1  |cucumber |\n|cucumber2  |cucumber |\n</code></pre>\n"},{"tags":["java","testng","multipartform-data","rest-assured"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1676003264,"post_id":75406411,"comment_id":133053719,"body_markdown":"Why are you manually specifying the mimetype when the whole point of the [multiPart methods](https://www.javadoc.io/static/com.jayway.restassured/rest-assured/2.9.0/com/jayway/restassured/specification/RequestSpecification.html) is to perform a multipart form post already?","body":"Why are you manually specifying the mimetype when the whole point of the <a href=\"https://www.javadoc.io/static/com.jayway.restassured/rest-assured/2.9.0/com/jayway/restassured/specification/RequestSpecification.html\" rel=\"nofollow noreferrer\">multiPart methods</a> is to perform a multipart form post already?"}],"owner":{"account_id":1611797,"reputation":81,"user_id":1490512,"accept_rate":25,"display_name":"Lakshmi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676002833,"creation_date":1675996519,"question_id":75406411,"body_markdown":"I am trying to hit an API which consumes MULTIPART_FORM_DATA and reads a file from the request. i am using below rest assured code to hit my API. it gives me error. but the same works with POSTMAN.\r\n\r\n\t\thttpRequest.baseUri(&quot;**URI***&quot;); \r\n\t\tResponse response = httpRequest.multiPart(&quot;file&quot;,uploadFile,&quot;application/zip&quot;).header(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;).log().all().when().post();\r\n\r\ni get the error:\r\n\r\nUnexpected line in MIMEpart header: Content-Transfer-Encoding: binary\r\n\r\n","title":"unable to upload ZIP using rest assured","body":"<p>I am trying to hit an API which consumes MULTIPART_FORM_DATA and reads a file from the request. i am using below rest assured code to hit my API. it gives me error. but the same works with POSTMAN.</p>\n<pre><code>    httpRequest.baseUri(&quot;**URI***&quot;); \n    Response response = httpRequest.multiPart(&quot;file&quot;,uploadFile,&quot;application/zip&quot;).header(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;).log().all().when().post();\n</code></pre>\n<p>i get the error:</p>\n<p>Unexpected line in MIMEpart header: Content-Transfer-Encoding: binary</p>\n"},{"tags":["java","spring","spring-boot","spring-cloud-gateway"],"owner":{"account_id":14237543,"reputation":295,"user_id":10284940,"display_name":"Ismail Dogan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":312,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676002491,"creation_date":1676002491,"question_id":75406884,"body_markdown":"I have a spring-boot project with spring-cloud gateway. When I make a http request, I am getting this error. I have been working on trying to solve this issue for days, but I could not manage to solve it.\r\n\r\n    java.lang.ClassCastException: class org.springframework.core.io.buffer.DefaultDataBufferFactory cannot be cast to class org.springframework.core.io.buffer.NettyDataBufferFactory (org.springframework.core.io.buffer.DefaultDataBufferFactory and org.springframework.core.io.buffer.NettyDataBufferFactory are in unnamed module of loader &#39;app&#39;)\r\n\r\nThese are versions which I am using for the apllication.\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\nThis is my pom.xml for the service. \r\n\r\n     &lt;properties&gt;\r\n        &lt;!-- Spring --&gt;\r\n        &lt;spring-cloud.version&gt;Hoxton.SR10&lt;/spring-cloud.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;!-- Spring --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-sleuth&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\nThis is how I am modifying gateway filter.\r\n\r\n    @Slf4j\r\n    public class ModifyHttpMethodGatewayFilter extends \r\n    AbstractGatewayFilterFactory&lt;ModifyHttpMethodGatewayFilter.Config&gt; {\r\n\r\n    public ModifyHttpMethodGatewayFilter() {\r\n        super(ModifyHttpMethodGatewayFilter.Config.class);\r\n    }\r\n\r\n    @Override\r\n    public GatewayFilter apply(ModifyHttpMethodGatewayFilter.Config config) {\r\n        return (exchange, chain) -&gt; {\r\n\r\n            ServerHttpRequest.Builder builder = exchange.getRequest().mutate();\r\n            builder.method(config.getMethod());\r\n            ServerHttpRequest request = builder.build();\r\n\r\n            if (!config.getMethod().equals(HttpMethod.GET)) {\r\n\r\n                // Create request body if missing from a GET request\r\n                String bodyString = getRequestBody(request);\r\n                DataBuffer bodyDataBuffer = stringDataBuffer(bodyString);\r\n                HttpHeaders headers = request.getHeaders();\r\n                Flux&lt;DataBuffer&gt; bodyFlux = Flux.just(bodyDataBuffer);\r\n                request = new ServerHttpRequestDecorator(request) {\r\n                    @Override\r\n                    public Flux&lt;DataBuffer&gt; getBody() {\r\n                        return bodyFlux;\r\n                    }\r\n\r\n                    @Override\r\n                    public HttpHeaders getHeaders() {\r\n                        return headers;\r\n                    }\r\n                };\r\n            }\r\n\r\n            return chain.filter(exchange.mutate().request(request).build());\r\n        };\r\n    }\r\n\r\n    public static class Config {\r\n\r\n        @NotEmpty\r\n        protected HttpMethod method;\r\n\r\n        public HttpMethod getMethod() {\r\n            return method;\r\n        }\r\n\r\n        public Config setMethod(HttpMethod method) {\r\n            this.method = method;\r\n            return this;\r\n        }\r\n    }\r\n  }\r\n\r\nstringDataBuffer method. \r\n\r\n      public static DataBuffer stringDataBuffer(String value) {\r\n        byte[] bytes = value.getBytes(StandardCharsets.UTF_8);\r\n\r\n        NettyDataBufferFactory nettyDataBufferFactory = new NettyDataBufferFactory(ByteBufAllocator.DEFAULT);\r\n        DataBuffer buffer = nettyDataBufferFactory.allocateBuffer(bytes.length);\r\n        buffer.write(bytes);\r\n\r\n        return buffer;\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bOtNX.png","title":"DefaultDataBufferFactory cannot be cast to class NettyDataBufferFactory","body":"<p>I have a spring-boot project with spring-cloud gateway. When I make a http request, I am getting this error. I have been working on trying to solve this issue for days, but I could not manage to solve it.</p>\n<pre><code>java.lang.ClassCastException: class org.springframework.core.io.buffer.DefaultDataBufferFactory cannot be cast to class org.springframework.core.io.buffer.NettyDataBufferFactory (org.springframework.core.io.buffer.DefaultDataBufferFactory and org.springframework.core.io.buffer.NettyDataBufferFactory are in unnamed module of loader 'app')\n</code></pre>\n<p>These are versions which I am using for the apllication.</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\n&lt;/parent&gt;\n</code></pre>\n<p>This is my pom.xml for the service.</p>\n<pre><code> &lt;properties&gt;\n    &lt;!-- Spring --&gt;\n    &lt;spring-cloud.version&gt;Hoxton.SR10&lt;/spring-cloud.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n\n&lt;dependencies&gt;\n    &lt;!-- Spring --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter-sleuth&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>This is how I am modifying gateway filter.</p>\n<pre><code>@Slf4j\npublic class ModifyHttpMethodGatewayFilter extends \nAbstractGatewayFilterFactory&lt;ModifyHttpMethodGatewayFilter.Config&gt; {\n\npublic ModifyHttpMethodGatewayFilter() {\n    super(ModifyHttpMethodGatewayFilter.Config.class);\n}\n\n@Override\npublic GatewayFilter apply(ModifyHttpMethodGatewayFilter.Config config) {\n    return (exchange, chain) -&gt; {\n\n        ServerHttpRequest.Builder builder = exchange.getRequest().mutate();\n        builder.method(config.getMethod());\n        ServerHttpRequest request = builder.build();\n\n        if (!config.getMethod().equals(HttpMethod.GET)) {\n\n            // Create request body if missing from a GET request\n            String bodyString = getRequestBody(request);\n            DataBuffer bodyDataBuffer = stringDataBuffer(bodyString);\n            HttpHeaders headers = request.getHeaders();\n            Flux&lt;DataBuffer&gt; bodyFlux = Flux.just(bodyDataBuffer);\n            request = new ServerHttpRequestDecorator(request) {\n                @Override\n                public Flux&lt;DataBuffer&gt; getBody() {\n                    return bodyFlux;\n                }\n\n                @Override\n                public HttpHeaders getHeaders() {\n                    return headers;\n                }\n            };\n        }\n\n        return chain.filter(exchange.mutate().request(request).build());\n    };\n}\n\npublic static class Config {\n\n    @NotEmpty\n    protected HttpMethod method;\n\n    public HttpMethod getMethod() {\n        return method;\n    }\n\n    public Config setMethod(HttpMethod method) {\n        this.method = method;\n        return this;\n    }\n}\n</code></pre>\n<p>}</p>\n<p>stringDataBuffer method.</p>\n<pre><code>  public static DataBuffer stringDataBuffer(String value) {\n    byte[] bytes = value.getBytes(StandardCharsets.UTF_8);\n\n    NettyDataBufferFactory nettyDataBufferFactory = new NettyDataBufferFactory(ByteBufAllocator.DEFAULT);\n    DataBuffer buffer = nettyDataBufferFactory.allocateBuffer(bytes.length);\n    buffer.write(bytes);\n\n    return buffer;\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/bOtNX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bOtNX.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","xml","gridview"],"comments":[{"owner":{"account_id":8761889,"reputation":1281,"user_id":6551624,"display_name":"Kruti Parekh"},"score":0,"creation_date":1526143831,"post_id":50308536,"comment_id":87633120,"body_markdown":"Please post your grid_item file","body":"Please post your grid_item file"},{"owner":{"account_id":9280154,"reputation":57862,"user_id":6891563,"accept_rate":75,"display_name":"Khemraj Sharma"},"score":0,"creation_date":1526144205,"post_id":50308536,"comment_id":87633240,"body_markdown":"This error says  `Binary XML file line #24:` and you did not post xml class, how will some tell solution?","body":"This error says  <code>Binary XML file line #24:</code> and you did not post xml class, how will some tell solution?"},{"owner":{"account_id":10977881,"reputation":79,"user_id":8066029,"display_name":"johnson"},"score":0,"creation_date":1526145079,"post_id":50308536,"comment_id":87633504,"body_markdown":"I posted the code of grid_item and activity_gridview","body":"I posted the code of grid_item and activity_gridview"},{"owner":{"account_id":8761889,"reputation":1281,"user_id":6551624,"display_name":"Kruti Parekh"},"score":0,"creation_date":1526146851,"post_id":50308536,"comment_id":87633976,"body_markdown":"In grid_item file, `View` should be capital","body":"In grid_item file, <code>View</code> should be capital"}],"answers":[{"tags":[],"owner":{"account_id":8469613,"reputation":2411,"user_id":6352712,"accept_rate":89,"display_name":"Serg Burlaka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1526145299,"creation_date":1526145299,"answer_id":50308818,"question_id":50308536,"body_markdown":"Maby You need to overide you methods \r\n\r\n   \r\n\r\n      @Override\r\n        public Object getItem(int position) {\r\n            // TODO Auto-generated method stub\r\n            return web[position];\r\n        }\r\n\r\n     @Override\r\n        public long getItemId(int position) {\r\n            // TODO Auto-generated method stub\r\n            return Imageid[position];\r\n        }","title":"android.view.InflateException: GridAdapter","body":"<p>Maby You need to overide you methods </p>\n\n<pre><code>  @Override\n    public Object getItem(int position) {\n        // TODO Auto-generated method stub\n        return web[position];\n    }\n\n @Override\n    public long getItemId(int position) {\n        // TODO Auto-generated method stub\n        return Imageid[position];\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":245021,"reputation":376,"user_id":9781571,"display_name":"Cody W."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1526146895,"creation_date":1526146895,"answer_id":50309048,"question_id":50308536,"body_markdown":"Try using View element instead of view in your grid_item.xml at line #24.","title":"android.view.InflateException: GridAdapter","body":"<p>Try using View element instead of view in your grid_item.xml at line #24.</p>\n"}],"owner":{"account_id":10977881,"reputation":79,"user_id":8066029,"display_name":"johnson"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1526148256,"answer_count":2,"score":-2,"last_activity_date":1676002253,"creation_date":1526143435,"question_id":50308536,"body_markdown":"I am working with a gridview and i want to show images and text in gridview using adapter and I can&#39;t understand why it&#39;s crashing.\r\nThere is a error in GridAdapter.java.and\r\nI don&#39;t know why this code give me NullPointerException with a gridview\r\n\r\nBelow is my code:\r\n\r\nGridAdapter.java\r\n\r\n        public class GridAdapter extends BaseAdapter {\r\n        private Context mContext;\r\n        private final String[] web;\r\n        private final int[] Imageid;\r\n    \r\n        public GridAdapter(Context c,String[] web,int[] Imageid ) {\r\n            mContext = c;\r\n            this.Imageid = Imageid;\r\n            this.web = web;\r\n        }\r\n    \r\n        @Override\r\n        public int getCount() {\r\n            // TODO Auto-generated method stub\r\n            return web.length;\r\n        }\r\n    \r\n        @Override\r\n        public Object getItem(int position) {\r\n            // TODO Auto-generated method stub\r\n            return null;\r\n        }\r\n    \r\n        @Override\r\n        public long getItemId(int position) {\r\n            // TODO Auto-generated method stub\r\n            return 0;\r\n        }\r\n    \r\n        @Override\r\n        public View getView(int position, View convertView, ViewGroup parent) {\r\n            // TODO Auto-generated method stub\r\n            View grid;\r\n            LayoutInflater inflater = (LayoutInflater) mContext\r\n                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n    \r\n            if (convertView == null) {\r\n    \r\n                grid = new View(mContext);\r\n                grid = inflater.inflate(R.layout.grid_item, null);\r\n                TextView textView = (TextView) grid.findViewById(R.id.product_name);\r\n                ImageView imageView = (ImageView)grid.findViewById(R.id.pic);\r\n                textView.setText(web[position]);\r\n                imageView.setImageResource(Imageid[position]);\r\n            } else {\r\n                grid = (View) convertView;\r\n            }\r\n    \r\n            return grid;\r\n        }\r\n    }\r\n\r\nGridActivity.java\r\n\r\n    public class GridActivity extends Activity {\r\n    GridView simpleGrid;\r\n    String[] web = {&quot;Google&quot;, &quot;Github&quot;, &quot;Instagram&quot;, &quot;Facebook&quot;} ;\r\n    int[] imageId = {R.drawable.product_imag,R.drawable.product_imag,R.drawable.product_imag,R.drawable.product_imag};\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_gridview);\r\n        simpleGrid = (GridView) findViewById(R.id.gv);\r\n\r\n        GridAdapter adapter = new GridAdapter(GridActivity.this, web, imageId);\r\n        simpleGrid.setAdapter(adapter);\r\n        simpleGrid.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view,\r\n                                    int position, long id) {\r\n                Toast.makeText(GridActivity.this, &quot;You Clicked at &quot; +web[+ position], Toast.LENGTH_SHORT).show();\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n}\r\n\r\nEDIT Griditem.xml\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:background=&quot;#e6e6e6&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:padding=&quot;1dp&quot;&gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:orientation=&quot;vertical&quot;\r\n            android:padding=&quot;1.5dp&quot;&gt;\r\n    \r\n            &lt;ImageView\r\n                android:id=&quot;@+id/pic&quot;\r\n                android:layout_width=&quot;150dp&quot;\r\n                android:layout_height=&quot;250dp&quot;\r\n                android:layout_gravity=&quot;top|center&quot;\r\n                android:padding=&quot;5dp&quot;\r\n                android:src=&quot;@drawable/product_imag&quot;/&gt;\r\n    \r\n            &lt;view\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;1.5dp&quot;\r\n                android:background=&quot;#e6e6e6&quot;/&gt;\r\n    \r\n            &lt;RelativeLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_gravity=&quot;bottom|center_horizontal&quot;&gt;\r\n    \r\n                &lt;TextView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/product_name&quot;\r\n                    android:layout_alignParentLeft=&quot;true&quot;\r\n                    android:layout_alignParentStart=&quot;true&quot;\r\n                    android:layout_alignParentTop=&quot;true&quot;\r\n                    android:layout_marginTop=&quot;2dp&quot;\r\n                    android:text=&quot;New text&quot;/&gt;\r\n    \r\n                &lt;TextView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/product_price&quot;\r\n                    android:layout_alignParentEnd=&quot;true&quot;\r\n                    android:layout_alignParentRight=&quot;true&quot;\r\n                    android:layout_alignParentTop=&quot;true&quot;\r\n                    android:text=&quot;New Text&quot;/&gt;\r\n    \r\n                &lt;TextView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/product_other&quot;\r\n                    android:layout_alignParentLeft=&quot;true&quot;\r\n                    android:layout_alignParentStart=&quot;true&quot;\r\n                    android:layout_below=&quot;@+id/product_name&quot;\r\n                    android:text=&quot;New Text&quot; /&gt;\r\n            &lt;/RelativeLayout&gt;\r\n        &lt;/LinearLayout&gt;\r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\nactivity_gridview.xml\r\n\r\n \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout  xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:id=&quot;@+id/activity_main&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n        &lt;!-- Vertical space between grid items --&gt;\r\n        &lt;GridView\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:columnWidth=&quot;100dp&quot;\r\n            android:numColumns=&quot;2&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:paddingBottom=&quot;5dp&quot;\r\n            android:paddingLeft=&quot;10dp&quot;\r\n            android:paddingRight=&quot;10dp&quot;\r\n            android:paddingTop=&quot;5dp&quot;\r\n            android:stretchMode=&quot;columnWidth&quot;\r\n            android:horizontalSpacing=&quot;10dp&quot;\r\n            android:id=&quot;@+id/gv&quot;\r\n            android:verticalSpacing=&quot;50dp&quot;&gt;&lt;/GridView&gt;\r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\nThis is my LogCat\r\n\r\n    FATAL EXCEPTION: main\r\n    Process: android.mendonca.averdapp, PID: 6640\r\n\r\n    android.view.InflateException: Binary XML file line #24: Attempt to invoke virtual method &#39;boolean java.lang.String.equals(java.lang.Object)&#39; on a null object reference\r\n    Caused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;boolean java.lang.String.equals(java.lang.Object)&#39; on a null object reference\r\n    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:761)\r\n    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:727)\r\n    at android.view.LayoutInflater.rInflate(LayoutInflater.java:858)\r\n    at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:821)\r\n    at android.view.LayoutInflater.rInflate(LayoutInflater.java:861)\r\n    at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:821) \r\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:518)\r\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:426)\r\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:377)\r\n    at android.mendonca.averdapp.activity.GridAdapter.getView(GridAdapter.java:55)\r\n    at android.widget.AbsListView.obtainView(AbsListView.java:2427)\r\n    at android.widget.GridView.onMeasure(GridView.java:1065)\r\n    at android.view.View.measure(View.java:19881)\r\n                                                                           \r\n\r\n","title":"android.view.InflateException: GridAdapter","body":"<p>I am working with a gridview and i want to show images and text in gridview using adapter and I can't understand why it's crashing.\nThere is a error in GridAdapter.java.and\nI don't know why this code give me NullPointerException with a gridview</p>\n\n<p>Below is my code:</p>\n\n<p>GridAdapter.java</p>\n\n<pre><code>    public class GridAdapter extends BaseAdapter {\n    private Context mContext;\n    private final String[] web;\n    private final int[] Imageid;\n\n    public GridAdapter(Context c,String[] web,int[] Imageid ) {\n        mContext = c;\n        this.Imageid = Imageid;\n        this.web = web;\n    }\n\n    @Override\n    public int getCount() {\n        // TODO Auto-generated method stub\n        return web.length;\n    }\n\n    @Override\n    public Object getItem(int position) {\n        // TODO Auto-generated method stub\n        return null;\n    }\n\n    @Override\n    public long getItemId(int position) {\n        // TODO Auto-generated method stub\n        return 0;\n    }\n\n    @Override\n    public View getView(int position, View convertView, ViewGroup parent) {\n        // TODO Auto-generated method stub\n        View grid;\n        LayoutInflater inflater = (LayoutInflater) mContext\n                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n\n        if (convertView == null) {\n\n            grid = new View(mContext);\n            grid = inflater.inflate(R.layout.grid_item, null);\n            TextView textView = (TextView) grid.findViewById(R.id.product_name);\n            ImageView imageView = (ImageView)grid.findViewById(R.id.pic);\n            textView.setText(web[position]);\n            imageView.setImageResource(Imageid[position]);\n        } else {\n            grid = (View) convertView;\n        }\n\n        return grid;\n    }\n}\n</code></pre>\n\n<p>GridActivity.java</p>\n\n<pre><code>public class GridActivity extends Activity {\nGridView simpleGrid;\nString[] web = {\"Google\", \"Github\", \"Instagram\", \"Facebook\"} ;\nint[] imageId = {R.drawable.product_imag,R.drawable.product_imag,R.drawable.product_imag,R.drawable.product_imag};\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_gridview);\n    simpleGrid = (GridView) findViewById(R.id.gv);\n\n    GridAdapter adapter = new GridAdapter(GridActivity.this, web, imageId);\n    simpleGrid.setAdapter(adapter);\n    simpleGrid.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n\n        @Override\n        public void onItemClick(AdapterView&lt;?&gt; parent, View view,\n                                int position, long id) {\n            Toast.makeText(GridActivity.this, \"You Clicked at \" +web[+ position], Toast.LENGTH_SHORT).show();\n\n        }\n    });\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>EDIT Griditem.xml</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"#e6e6e6\"\n    android:orientation=\"vertical\"\n    android:padding=\"1dp\"&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:background=\"@color/white\"\n        android:orientation=\"vertical\"\n        android:padding=\"1.5dp\"&gt;\n\n        &lt;ImageView\n            android:id=\"@+id/pic\"\n            android:layout_width=\"150dp\"\n            android:layout_height=\"250dp\"\n            android:layout_gravity=\"top|center\"\n            android:padding=\"5dp\"\n            android:src=\"@drawable/product_imag\"/&gt;\n\n        &lt;view\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"1.5dp\"\n            android:background=\"#e6e6e6\"/&gt;\n\n        &lt;RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"bottom|center_horizontal\"&gt;\n\n            &lt;TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:id=\"@+id/product_name\"\n                android:layout_alignParentLeft=\"true\"\n                android:layout_alignParentStart=\"true\"\n                android:layout_alignParentTop=\"true\"\n                android:layout_marginTop=\"2dp\"\n                android:text=\"New text\"/&gt;\n\n            &lt;TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:id=\"@+id/product_price\"\n                android:layout_alignParentEnd=\"true\"\n                android:layout_alignParentRight=\"true\"\n                android:layout_alignParentTop=\"true\"\n                android:text=\"New Text\"/&gt;\n\n            &lt;TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:id=\"@+id/product_other\"\n                android:layout_alignParentLeft=\"true\"\n                android:layout_alignParentStart=\"true\"\n                android:layout_below=\"@+id/product_name\"\n                android:text=\"New Text\" /&gt;\n        &lt;/RelativeLayout&gt;\n    &lt;/LinearLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>activity_gridview.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout  xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/activity_main\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;!-- Vertical space between grid items --&gt;\n    &lt;GridView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:columnWidth=\"100dp\"\n        android:numColumns=\"2\"\n        android:gravity=\"center\"\n        android:paddingBottom=\"5dp\"\n        android:paddingLeft=\"10dp\"\n        android:paddingRight=\"10dp\"\n        android:paddingTop=\"5dp\"\n        android:stretchMode=\"columnWidth\"\n        android:horizontalSpacing=\"10dp\"\n        android:id=\"@+id/gv\"\n        android:verticalSpacing=\"50dp\"&gt;&lt;/GridView&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>This is my LogCat</p>\n\n<pre><code>FATAL EXCEPTION: main\nProcess: android.mendonca.averdapp, PID: 6640\n\nandroid.view.InflateException: Binary XML file line #24: Attempt to invoke virtual method 'boolean java.lang.String.equals(java.lang.Object)' on a null object reference\nCaused by: java.lang.NullPointerException: Attempt to invoke virtual method 'boolean java.lang.String.equals(java.lang.Object)' on a null object reference\nat android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:761)\nat android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:727)\nat android.view.LayoutInflater.rInflate(LayoutInflater.java:858)\nat android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:821)\nat android.view.LayoutInflater.rInflate(LayoutInflater.java:861)\nat android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:821) \nat android.view.LayoutInflater.inflate(LayoutInflater.java:518)\nat android.view.LayoutInflater.inflate(LayoutInflater.java:426)\nat android.view.LayoutInflater.inflate(LayoutInflater.java:377)\nat android.mendonca.averdapp.activity.GridAdapter.getView(GridAdapter.java:55)\nat android.widget.AbsListView.obtainView(AbsListView.java:2427)\nat android.widget.GridView.onMeasure(GridView.java:1065)\nat android.view.View.measure(View.java:19881)\n</code></pre>\n"},{"tags":["java","text","qr-code"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1674137518,"post_id":75173568,"comment_id":132653920,"body_markdown":"what do you mean &quot;with some text&quot;?","body":"what do you mean &quot;with some text&quot;?"},{"owner":{"account_id":26846254,"reputation":13,"user_id":20431957,"display_name":"Thilinna Nirmal"},"score":0,"creation_date":1674147411,"post_id":75173568,"comment_id":132657640,"body_markdown":"can you check the image I attached. It shows how I want to generate the QR code. sorry I couldn&#39;t post it conveniently.","body":"can you check the image I attached. It shows how I want to generate the QR code. sorry I couldn&#39;t post it conveniently."}],"answers":[{"tags":[],"owner":{"account_id":13886806,"reputation":87,"user_id":10025765,"display_name":"Ngirimana Safari Schadrack"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1674138047,"creation_date":1674137756,"answer_id":75173638,"question_id":75173568,"body_markdown":"To generate a QR code in Java, we need to use a third-party library named ZXing (Zebra Crossing). It is a popular API that allows us to process with QR code. With the help of the library, we can easily generate and read the QR code. Before moving towards the Java program, we need to add the ZXing library to the project. We can download it from the official site.\r\n\r\n - zxing core-3.3.0.jar\r\n- zxing javase-3.3.0.jar\r\n\r\nAfter downloading, add it to the classpath. Or add the following dependency in pom.xml file.\r\n\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;dependencies&gt;  \r\n    &lt;dependency&gt;  \r\n    &lt;groupId&gt;com.google.zxing&lt;/groupId&gt;  \r\n    &lt;artifactId&gt;core&lt;/artifactId&gt;  \r\n    &lt;version&gt;3.3.0&lt;/version&gt;  \r\n    &lt;/dependency&gt;  \r\n    &lt;dependency&gt;  \r\n    &lt;groupId&gt;com.google.zxing&lt;/groupId&gt;  \r\n    &lt;artifactId&gt;javase&lt;/artifactId&gt;  \r\n    &lt;version&gt;3.3.0&lt;/version&gt;  \r\n    &lt;/dependency&gt;  \r\n    &lt;/dependencies&gt;  \r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nLet&#39;s create a Java program that generates a QR code.\r\n\r\nGenerateQrCode.java\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    import java.io.File;  \r\n    import java.io.IOException;  \r\n    import java.util.HashMap;  \r\n    import java.util.Map;  \r\n    import com.google.zxing.BarcodeFormat;  \r\n    import com.google.zxing.EncodeHintType;  \r\n    import com.google.zxing.MultiFormatWriter;  \r\n    import com.google.zxing.NotFoundException;  \r\n    import com.google.zxing.WriterException;  \r\n    import com.google.zxing.client.j2se.MatrixToImageWriter;  \r\n    import com.google.zxing.common.BitMatrix;  \r\n    import com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;  \r\n    public class GenerateQRCode  \r\n    {  \r\n    //static function that creates QR Code  \r\n    public static void generateQRcode(String data, String path, String charset, Map map, int h, int w) throws WriterException, IOException  \r\n    {  \r\n    //the BitMatrix class represents the 2D matrix of bits  \r\n    //MultiFormatWriter is a factory class that finds the appropriate Writer subclass for the BarcodeFormat requested and encodes the barcode with the supplied contents.  \r\n    BitMatrix matrix = new MultiFormatWriter().encode(new String(data.getBytes(charset), charset), BarcodeFormat.QR_CODE, w, h);  \r\n    MatrixToImageWriter.writeToFile(matrix, path.substring(path.lastIndexOf(&#39;.&#39;) + 1), new File(path));  \r\n    }  \r\n    //main() method  \r\n    public static void main(String args[]) throws WriterException, IOException, NotFoundException  \r\n    {  \r\n    //data that we want to store in the QR code  \r\n    String str= &quot;THE HABIT OF PERSISTENCE IS THE HABIT OF VICTORY.&quot;;  \r\n    //path where we want to get QR Code  \r\n    String path = &quot;C:\\\\Users\\\\Anubhav\\\\Desktop\\\\QRDemo\\\\Quote.png&quot;;  \r\n    //Encoding charset to be used  \r\n    String charset = &quot;UTF-8&quot;;  \r\n    Map&lt;EncodeHintType, ErrorCorrectionLevel&gt; hashMap = new HashMap&lt;EncodeHintType, ErrorCorrectionLevel&gt;();  \r\n    //generates QR code with Low level(L) error correction capability  \r\n    hashMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);  \r\n    //invoking the user-defined method that creates the QR code  \r\n    generateQRcode(str, path, charset, hashMap, 200, 200);//increase or decrease height and width accodingly   \r\n    //prints if the QR code is generated   \r\n    System.out.println(&quot;QR Code created successfully.&quot;);  \r\n    }  \r\n    }  \r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How to generate QR code with some text using JAVA?","body":"<p>To generate a QR code in Java, we need to use a third-party library named ZXing (Zebra Crossing). It is a popular API that allows us to process with QR code. With the help of the library, we can easily generate and read the QR code. Before moving towards the Java program, we need to add the ZXing library to the project. We can download it from the official site.</p>\n<ul>\n<li>zxing core-3.3.0.jar</li>\n<li>zxing javase-3.3.0.jar</li>\n</ul>\n<p>After downloading, add it to the classpath. Or add the following dependency in pom.xml file.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;dependencies&gt;  \n&lt;dependency&gt;  \n&lt;groupId&gt;com.google.zxing&lt;/groupId&gt;  \n&lt;artifactId&gt;core&lt;/artifactId&gt;  \n&lt;version&gt;3.3.0&lt;/version&gt;  \n&lt;/dependency&gt;  \n&lt;dependency&gt;  \n&lt;groupId&gt;com.google.zxing&lt;/groupId&gt;  \n&lt;artifactId&gt;javase&lt;/artifactId&gt;  \n&lt;version&gt;3.3.0&lt;/version&gt;  \n&lt;/dependency&gt;  \n&lt;/dependencies&gt;  </code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Let's create a Java program that generates a QR code.</p>\n<p>GenerateQrCode.java</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>import java.io.File;  \nimport java.io.IOException;  \nimport java.util.HashMap;  \nimport java.util.Map;  \nimport com.google.zxing.BarcodeFormat;  \nimport com.google.zxing.EncodeHintType;  \nimport com.google.zxing.MultiFormatWriter;  \nimport com.google.zxing.NotFoundException;  \nimport com.google.zxing.WriterException;  \nimport com.google.zxing.client.j2se.MatrixToImageWriter;  \nimport com.google.zxing.common.BitMatrix;  \nimport com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;  \npublic class GenerateQRCode  \n{  \n//static function that creates QR Code  \npublic static void generateQRcode(String data, String path, String charset, Map map, int h, int w) throws WriterException, IOException  \n{  \n//the BitMatrix class represents the 2D matrix of bits  \n//MultiFormatWriter is a factory class that finds the appropriate Writer subclass for the BarcodeFormat requested and encodes the barcode with the supplied contents.  \nBitMatrix matrix = new MultiFormatWriter().encode(new String(data.getBytes(charset), charset), BarcodeFormat.QR_CODE, w, h);  \nMatrixToImageWriter.writeToFile(matrix, path.substring(path.lastIndexOf('.') + 1), new File(path));  \n}  \n//main() method  \npublic static void main(String args[]) throws WriterException, IOException, NotFoundException  \n{  \n//data that we want to store in the QR code  \nString str= \"THE HABIT OF PERSISTENCE IS THE HABIT OF VICTORY.\";  \n//path where we want to get QR Code  \nString path = \"C:\\\\Users\\\\Anubhav\\\\Desktop\\\\QRDemo\\\\Quote.png\";  \n//Encoding charset to be used  \nString charset = \"UTF-8\";  \nMap&lt;EncodeHintType, ErrorCorrectionLevel&gt; hashMap = new HashMap&lt;EncodeHintType, ErrorCorrectionLevel&gt;();  \n//generates QR code with Low level(L) error correction capability  \nhashMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);  \n//invoking the user-defined method that creates the QR code  \ngenerateQRcode(str, path, charset, hashMap, 200, 200);//increase or decrease height and width accodingly   \n//prints if the QR code is generated   \nSystem.out.println(\"QR Code created successfully.\");  \n}  \n}  </code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":8515340,"reputation":783,"user_id":6383966,"display_name":"Dheeraj Malik"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1676001888,"creation_date":1676001888,"answer_id":75406831,"question_id":75173568,"body_markdown":"You can generate a QR code with text in Java using Free Spire.Barcode for Java API. First, download the API&#39;s jar from [this link][1] or install it from Maven Repository:\r\n\r\n        &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;com.e-iceblue&lt;/id&gt;\r\n            &lt;name&gt;e-iceblue&lt;/name&gt;\r\n            &lt;url&gt;https://repo.e-iceblue.com/nexus/content/groups/public/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;e-iceblue&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spire.barcode.free&lt;/artifactId&gt;\r\n            &lt;version&gt;5.1.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\nNext, refer to the following code sample:\r\n\r\n    import com.spire.barcode.BarCodeGenerator;\r\n    import com.spire.barcode.BarCodeType;\r\n    import com.spire.barcode.BarcodeSettings;\r\n    import com.spire.barcode.QRCodeECL;\r\n    \r\n    import javax.imageio.ImageIO;\r\n    import java.awt.image.BufferedImage;\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    \r\n    public class GenerateQRCode {\r\n        public static void main(String []args) throws IOException {\r\n            //Instantiate a BarcodeSettings object\r\n            BarcodeSettings settings = new BarcodeSettings();\r\n            //Set barcode type\r\n            settings.setType(BarCodeType.QR_Code);\r\n            //Set barcode data\r\n            String data = &quot;https://stackoverflow.com/&quot;;\r\n            settings.setData(data);\r\n            //Set barcode module width\r\n            settings.setX(2);\r\n            //Set error correction level\r\n            settings.setQRCodeECL(QRCodeECL.M);\r\n    \r\n            //Set top text\r\n            settings.setTopText(&quot;User Name&quot;);\r\n            //Set bottom text\r\n            settings.setBottomText(&quot;Event Name&quot;);\r\n    \r\n            //Set text visibility\r\n            settings.setShowText(false);\r\n            settings.setShowTopText(true);\r\n            settings.setShowBottomText(true);\r\n    \r\n            //Set border visibility\r\n            settings.hasBorder(false);\r\n    \r\n            //Instantiate a BarCodeGenerator object based on the specific settings\r\n            BarCodeGenerator barCodeGenerator = new BarCodeGenerator(settings);\r\n            //Generate QR code image\r\n            BufferedImage bufferedImage = barCodeGenerator.generateImage();\r\n            //save the image to a .png file\r\n            ImageIO.write(bufferedImage,&quot;png&quot;,new File(&quot;QR_Code.png&quot;));\r\n        }\r\n    }\r\nThe following is the generated QR code image with text:\r\n\r\n[![Generate QR Code with Text in Java][2]][2]\r\n\r\n\r\n  [1]: https://www.e-iceblue.com/Download/barcode-for-java-free.html\r\n  [2]: https://i.stack.imgur.com/Y2hc7.png","title":"How to generate QR code with some text using JAVA?","body":"<p>You can generate a QR code with text in Java using Free Spire.Barcode for Java API. First, download the API's jar from <a href=\"https://www.e-iceblue.com/Download/barcode-for-java-free.html\" rel=\"nofollow noreferrer\">this link</a> or install it from Maven Repository:</p>\n<pre><code>    &lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;com.e-iceblue&lt;/id&gt;\n        &lt;name&gt;e-iceblue&lt;/name&gt;\n        &lt;url&gt;https://repo.e-iceblue.com/nexus/content/groups/public/&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;e-iceblue&lt;/groupId&gt;\n        &lt;artifactId&gt;spire.barcode.free&lt;/artifactId&gt;\n        &lt;version&gt;5.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>Next, refer to the following code sample:</p>\n<pre><code>import com.spire.barcode.BarCodeGenerator;\nimport com.spire.barcode.BarCodeType;\nimport com.spire.barcode.BarcodeSettings;\nimport com.spire.barcode.QRCodeECL;\n\nimport javax.imageio.ImageIO;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.IOException;\n\npublic class GenerateQRCode {\n    public static void main(String []args) throws IOException {\n        //Instantiate a BarcodeSettings object\n        BarcodeSettings settings = new BarcodeSettings();\n        //Set barcode type\n        settings.setType(BarCodeType.QR_Code);\n        //Set barcode data\n        String data = &quot;https://stackoverflow.com/&quot;;\n        settings.setData(data);\n        //Set barcode module width\n        settings.setX(2);\n        //Set error correction level\n        settings.setQRCodeECL(QRCodeECL.M);\n\n        //Set top text\n        settings.setTopText(&quot;User Name&quot;);\n        //Set bottom text\n        settings.setBottomText(&quot;Event Name&quot;);\n\n        //Set text visibility\n        settings.setShowText(false);\n        settings.setShowTopText(true);\n        settings.setShowBottomText(true);\n\n        //Set border visibility\n        settings.hasBorder(false);\n\n        //Instantiate a BarCodeGenerator object based on the specific settings\n        BarCodeGenerator barCodeGenerator = new BarCodeGenerator(settings);\n        //Generate QR code image\n        BufferedImage bufferedImage = barCodeGenerator.generateImage();\n        //save the image to a .png file\n        ImageIO.write(bufferedImage,&quot;png&quot;,new File(&quot;QR_Code.png&quot;));\n    }\n}\n</code></pre>\n<p>The following is the generated QR code image with text:</p>\n<p><a href=\"https://i.stack.imgur.com/Y2hc7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y2hc7.png\" alt=\"Generate QR Code with Text in Java\" /></a></p>\n"}],"owner":{"account_id":26846254,"reputation":13,"user_id":20431957,"display_name":"Thilinna Nirmal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3554,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75406831,"answer_count":2,"score":1,"last_activity_date":1676001888,"creation_date":1674137481,"question_id":75173568,"body_markdown":"[I want to generate QR code **with some text** using JAVA like this.\r\nplease check this image. This is how I want to generate my QR code.][1]\r\n(with user name and event name text)\r\n\r\n\r\nThis is my code and this generate only (QR) code, (not any additional text). If anyone know how to generate QR code with text please help me.\r\n\r\n```\r\nimport java.io.File;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport com.google.zxing.BarcodeFormat;\r\nimport com.google.zxing.EncodeHintType;\r\nimport com.google.zxing.MultiFormatWriter;\r\nimport com.google.zxing.client.j2se.MatrixToImageWriter;\r\nimport com.google.zxing.common.BitMatrix;\r\nimport com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;\r\npublic class Create_QR {\r\n    public static void main(String[] args) {\r\n        try {\r\n            String qrCodeData = &quot;This is the text&quot;;\r\n            String filePath = &quot;C:\\\\Users\\\\Nirmalw\\\\Desktop\\\\Projects\\\\QR\\\\test\\\\test_img\\\\my_QR.png&quot;;\r\n            String charset = &quot;UTF-8&quot;; // or &quot;ISO-8859-1&quot;\r\n\r\n            Map &lt; EncodeHintType, ErrorCorrectionLevel &gt; hintMap = new HashMap &lt; EncodeHintType, ErrorCorrectionLevel &gt; ();\r\n\r\n            hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);\r\n\r\n            BitMatrix matrix = new MultiFormatWriter().encode(new String(qrCodeData.getBytes(charset), charset),\r\n                    BarcodeFormat.QR_CODE, 500, 500, hintMap);\r\n\r\n            MatrixToImageWriter.writeToFile (matrix, filePath.substring(filePath.lastIndexOf(&#39;.&#39;) + 1), new File(filePath));\r\n\r\n            System.out.println(&quot;QR Code created successfully!&quot;);\r\n        } catch (Exception e) {\r\n            System.err.println(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vEnwz.png","title":"How to generate QR code with some text using JAVA?","body":"<p><a href=\"https://i.stack.imgur.com/vEnwz.png\" rel=\"nofollow noreferrer\">I want to generate QR code <strong>with some text</strong> using JAVA like this.\nplease check this image. This is how I want to generate my QR code.</a>\n(with user name and event name text)</p>\n<p>This is my code and this generate only (QR) code, (not any additional text). If anyone know how to generate QR code with text please help me.</p>\n<pre><code>import java.io.File;\nimport java.util.HashMap;\nimport java.util.Map;\nimport com.google.zxing.BarcodeFormat;\nimport com.google.zxing.EncodeHintType;\nimport com.google.zxing.MultiFormatWriter;\nimport com.google.zxing.client.j2se.MatrixToImageWriter;\nimport com.google.zxing.common.BitMatrix;\nimport com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;\npublic class Create_QR {\n    public static void main(String[] args) {\n        try {\n            String qrCodeData = &quot;This is the text&quot;;\n            String filePath = &quot;C:\\\\Users\\\\Nirmalw\\\\Desktop\\\\Projects\\\\QR\\\\test\\\\test_img\\\\my_QR.png&quot;;\n            String charset = &quot;UTF-8&quot;; // or &quot;ISO-8859-1&quot;\n\n            Map &lt; EncodeHintType, ErrorCorrectionLevel &gt; hintMap = new HashMap &lt; EncodeHintType, ErrorCorrectionLevel &gt; ();\n\n            hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);\n\n            BitMatrix matrix = new MultiFormatWriter().encode(new String(qrCodeData.getBytes(charset), charset),\n                    BarcodeFormat.QR_CODE, 500, 500, hintMap);\n\n            MatrixToImageWriter.writeToFile (matrix, filePath.substring(filePath.lastIndexOf('.') + 1), new File(filePath));\n\n            System.out.println(&quot;QR Code created successfully!&quot;);\n        } catch (Exception e) {\n            System.err.println(e);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","cookies","session-cookies"],"comments":[{"owner":{"account_id":13692434,"reputation":478,"user_id":9879898,"display_name":"sge"},"score":0,"creation_date":1676007787,"post_id":75406823,"comment_id":133054302,"body_markdown":"did you check if the browser reported some errors? e.g. chrome requires some additional attributes in the cookie otherwise it will be blocked.","body":"did you check if the browser reported some errors? e.g. chrome requires some additional attributes in the cookie otherwise it will be blocked."},{"owner":{"account_id":20319777,"reputation":13,"user_id":14904745,"display_name":"LazyCoder"},"score":0,"creation_date":1676008520,"post_id":75406823,"comment_id":133054370,"body_markdown":"@sge, I just wanted to know if its the correct way or not to send cuz I&#39;m using angular as my frontend tool and I still haven&#39;t figured out how to accept the cookie in it. Did a lot of research but google just keeps recommending the same one that doesn&#39;t work.","body":"@sge, I just wanted to know if its the correct way or not to send cuz I&#39;m using angular as my frontend tool and I still haven&#39;t figured out how to accept the cookie in it. Did a lot of research but google just keeps recommending the same one that doesn&#39;t work."}],"owner":{"account_id":20319777,"reputation":13,"user_id":14904745,"display_name":"LazyCoder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":349,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676001807,"creation_date":1676001807,"question_id":75406823,"body_markdown":"So, I&#39;m trying to send cookies to my frontend and I&#39;m not using spring security. When the user enter their name and click submit button, I want that info to be send to my spring and then I want to return the info of the user and cookie. I implemented the logic like this \r\n\r\n    @PostMapping(&quot;/addUser&quot;)\r\n    public User addUser(@RequestBody String name, HttpServletRequest request, HttpServletResponse response) {\r\n    \r\n    HttpSession getSession = (HttpSession) request.getAttribute(&quot;session&quot;);\r\n    Cookie cookie = new Cookie(&quot;sessionId&quot;, getSession.getId());\r\n    response.addCookie(cookie);\r\n\r\n    sessionService.addSession(getSession);\r\n\r\n    String session = (String) getSession.getId();\r\n    System.out.println(&quot;Session id is &quot; + session);\r\n    User newUser = new User(name, session);\r\n    userService.addUser(newUser);\r\n\r\n    return newUser;\r\n}\r\n\r\nto check if cookie is working correctly, I&#39;m using this method\r\n\r\n    @PostMapping(&quot;/noOfUsers&quot;)\r\n    public int userCount(@RequestBody String sessionId, HttpServletRequest request, HttpServletResponse response) {\r\n        System.out.println(request.getSession().getId());\r\n         Cookie[] cookies = request.getCookies();\r\n         if (cookies != null) {\r\n                for (Cookie cookie : cookies) {\r\n                  if (cookie.getName().equals(&quot;sessionId&quot;)) {\r\n                     System.out.println(cookie.getValue());\r\n                  }\r\n                }\r\n              }\r\n    \r\n    \r\n        return this.userService.noOfUser();\r\n    }\r\n\r\nI know you people might say &quot;use get mapping&quot; well I want to send my user account too when checking that&#39;s why I&#39;m using postmapping where I will be sending my username too.\r\n\r\nSo, coming back to question. Well, I did try using postman and it worked I got the cookie value as I should have but when working with frontend, it just didn&#39;t worked which made me question am I doing it in right way??","title":"Sending cookies using spring-boot","body":"<p>So, I'm trying to send cookies to my frontend and I'm not using spring security. When the user enter their name and click submit button, I want that info to be send to my spring and then I want to return the info of the user and cookie. I implemented the logic like this</p>\n<pre><code>@PostMapping(&quot;/addUser&quot;)\npublic User addUser(@RequestBody String name, HttpServletRequest request, HttpServletResponse response) {\n\nHttpSession getSession = (HttpSession) request.getAttribute(&quot;session&quot;);\nCookie cookie = new Cookie(&quot;sessionId&quot;, getSession.getId());\nresponse.addCookie(cookie);\n\nsessionService.addSession(getSession);\n\nString session = (String) getSession.getId();\nSystem.out.println(&quot;Session id is &quot; + session);\nUser newUser = new User(name, session);\nuserService.addUser(newUser);\n\nreturn newUser;\n</code></pre>\n<p>}</p>\n<p>to check if cookie is working correctly, I'm using this method</p>\n<pre><code>@PostMapping(&quot;/noOfUsers&quot;)\npublic int userCount(@RequestBody String sessionId, HttpServletRequest request, HttpServletResponse response) {\n    System.out.println(request.getSession().getId());\n     Cookie[] cookies = request.getCookies();\n     if (cookies != null) {\n            for (Cookie cookie : cookies) {\n              if (cookie.getName().equals(&quot;sessionId&quot;)) {\n                 System.out.println(cookie.getValue());\n              }\n            }\n          }\n\n\n    return this.userService.noOfUser();\n}\n</code></pre>\n<p>I know you people might say &quot;use get mapping&quot; well I want to send my user account too when checking that's why I'm using postmapping where I will be sending my username too.</p>\n<p>So, coming back to question. Well, I did try using postman and it worked I got the cookie value as I should have but when working with frontend, it just didn't worked which made me question am I doing it in right way??</p>\n"},{"tags":["java","android","xml","android-layout"],"comments":[{"owner":{"account_id":5226322,"reputation":2046,"user_id":4178262,"display_name":"Mark Stewart"},"score":0,"creation_date":1496684473,"post_id":44374416,"comment_id":75750199,"body_markdown":"It is kind of hard to tell from the second screenshot where the progress bar is and where you want it, with the other content in the screensot","body":"It is kind of hard to tell from the second screenshot where the progress bar is and where you want it, with the other content in the screensot"}],"answers":[{"tags":[],"owner":{"account_id":4571218,"reputation":12646,"user_id":3710865,"accept_rate":54,"display_name":"sasikumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1496684073,"creation_date":1496684073,"answer_id":44374521,"question_id":44374416,"body_markdown":"Add in your ProgressBar\r\n\r\n    android:layout_gravity=&quot;center_vertical|center_horizontal&quot;\r\n    android:layout_centerInParent=&quot;true&quot;\r\n\r\n\r\nso your ProgressBar should be\r\n\r\n    &lt;ProgressBar\r\n    android:id=&quot;@+id/progressBar&quot;\r\n    android:minHeight=&quot;2dip&quot;\r\n    android:maxHeight=&quot;2dip&quot;\r\n    android:progressDrawable=&quot;@drawable/bg_progress_bar_webview&quot;\r\n    android:layout_width=&quot;fill_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:layout_gravity=&quot;center_vertical|center_horizontal&quot;\r\n    android:layout_centerInParent=&quot;true&quot;\r\n    style=&quot;@android:style/Widget.ProgressBar.Horizontal&quot; /&gt;","title":"how to align progress bar in webview Android?","body":"<p>Add in your ProgressBar</p>\n\n<pre><code>android:layout_gravity=\"center_vertical|center_horizontal\"\nandroid:layout_centerInParent=\"true\"\n</code></pre>\n\n<p>so your ProgressBar should be</p>\n\n<pre><code>&lt;ProgressBar\nandroid:id=\"@+id/progressBar\"\nandroid:minHeight=\"2dip\"\nandroid:maxHeight=\"2dip\"\nandroid:progressDrawable=\"@drawable/bg_progress_bar_webview\"\nandroid:layout_width=\"fill_parent\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_gravity=\"center_vertical|center_horizontal\"\nandroid:layout_centerInParent=\"true\"\nstyle=\"@android:style/Widget.ProgressBar.Horizontal\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7441167,"reputation":1764,"user_id":5658915,"display_name":"Jonathan Aste"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1496755087,"creation_date":1496684105,"answer_id":44374528,"question_id":44374416,"body_markdown":"add `android:layout_centerInParent=&quot;true&quot;` to your progressBar layout\r\n\r\nlike this:\r\n\r\n    &lt;ProgressBar\r\n    android:id=&quot;@+id/progressBar&quot;\r\n    android:minHeight=&quot;2dip&quot;\r\n    android:maxHeight=&quot;2dip&quot;\r\n    android:progressDrawable=&quot;@drawable/bg_progress_bar_webview&quot;\r\n    android:layout_width=&quot;wrap_content&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:layout_centerHorizontal=&quot;true&quot;\r\n    style=&quot;@android:style/Widget.ProgressBar.Horizontal&quot; /&gt;\r\n\r\n","title":"how to align progress bar in webview Android?","body":"<p>add <code>android:layout_centerInParent=\"true\"</code> to your progressBar layout</p>\n\n<p>like this:</p>\n\n<pre><code>&lt;ProgressBar\nandroid:id=\"@+id/progressBar\"\nandroid:minHeight=\"2dip\"\nandroid:maxHeight=\"2dip\"\nandroid:progressDrawable=\"@drawable/bg_progress_bar_webview\"\nandroid:layout_width=\"wrap_content\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_centerHorizontal=\"true\"\nstyle=\"@android:style/Widget.ProgressBar.Horizontal\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10977881,"reputation":79,"user_id":8066029,"display_name":"johnson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1496721992,"creation_date":1496721992,"answer_id":44381259,"question_id":44374416,"body_markdown":"I did little hack on this the answer is modifying the activity_xml\r\n\r\n   \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;android.support.design.widget.CoordinatorLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:fitsSystemWindows=&quot;true&quot;\r\n    tools:context=&quot;com.app.superdeveloper.weblc.learncoding.MainActivity&quot;&gt;\r\n\r\n    &lt;android.support.design.widget.AppBarLayout\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:theme=&quot;@style/AppTheme.AppBarOverlay&quot;&gt;\r\n\r\n        &lt;android.support.v7.widget.Toolbar\r\n            android:id=&quot;@+id/toolbar&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;?attr/actionBarSize&quot;\r\n            android:background=&quot;?attr/colorPrimary&quot;\r\n            app:popupTheme=&quot;@style/AppTheme.PopupOverlay&quot; /&gt;\r\n        &lt;ProgressBar\r\n            android:id=&quot;@+id/progressBar&quot;\r\n            android:minHeight=&quot;2dip&quot;\r\n            android:maxHeight=&quot;2dip&quot;\r\n            android:progressDrawable=&quot;@drawable/bg_progress_bar_webview&quot;\r\n            android:layout_width=&quot;fill_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            style=&quot;@android:style/Widget.ProgressBar.Horizontal&quot; /&gt;\r\n\r\n    &lt;/android.support.design.widget.AppBarLayout&gt;\r\n\r\n    &lt;include layout=&quot;@layout/content_main&quot;/&gt;\r\n\r\n    &lt;android.support.design.widget.FloatingActionButton\r\n        android:id=&quot;@+id/fab&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_gravity=&quot;bottom|end&quot;\r\n        android:layout_margin=&quot;@dimen/fab_margin&quot;\r\n        app:srcCompat=&quot;@android:drawable/ic_dialog_email&quot; /&gt;&lt;/android.support.design.widget.CoordinatorLayout&gt;\r\n\r\nNow it works\r\n","title":"how to align progress bar in webview Android?","body":"<p>I did little hack on this the answer is modifying the activity_xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;android.support.design.widget.CoordinatorLayout\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\nandroid:fitsSystemWindows=\"true\"\ntools:context=\"com.app.superdeveloper.weblc.learncoding.MainActivity\"&gt;\n\n&lt;android.support.design.widget.AppBarLayout\n    android:layout_height=\"wrap_content\"\n    android:layout_width=\"match_parent\"\n    android:theme=\"@style/AppTheme.AppBarOverlay\"&gt;\n\n    &lt;android.support.v7.widget.Toolbar\n        android:id=\"@+id/toolbar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"?attr/actionBarSize\"\n        android:background=\"?attr/colorPrimary\"\n        app:popupTheme=\"@style/AppTheme.PopupOverlay\" /&gt;\n    &lt;ProgressBar\n        android:id=\"@+id/progressBar\"\n        android:minHeight=\"2dip\"\n        android:maxHeight=\"2dip\"\n        android:progressDrawable=\"@drawable/bg_progress_bar_webview\"\n        android:layout_width=\"fill_parent\"\n        android:layout_height=\"wrap_content\"\n        style=\"@android:style/Widget.ProgressBar.Horizontal\" /&gt;\n\n&lt;/android.support.design.widget.AppBarLayout&gt;\n\n&lt;include layout=\"@layout/content_main\"/&gt;\n\n&lt;android.support.design.widget.FloatingActionButton\n    android:id=\"@+id/fab\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_gravity=\"bottom|end\"\n    android:layout_margin=\"@dimen/fab_margin\"\n    app:srcCompat=\"@android:drawable/ic_dialog_email\" /&gt;&lt;/android.support.design.widget.CoordinatorLayout&gt;\n</code></pre>\n\n<p>Now it works</p>\n"}],"owner":{"account_id":10977881,"reputation":79,"user_id":8066029,"display_name":"johnson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1676001572,"creation_date":1496683749,"question_id":44374416,"body_markdown":"I wrote simple web view application in android but the **progress bar** is showing the very top of the application click\r\n[here][2] to view the image.\r\nactually, I want to do like this click [here][1] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UU6eQ.png\r\n  [2]: https://i.stack.imgur.com/pSOaG.png\r\nThis is my \r\n**Main activity**\r\n\r\n    public class MainActivity extends AppCompatActivity implements MyWebChromeClient.ProgressListener {\r\n\r\n    WebView wv;\r\n    private ProgressBar mProgressBar;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        wv=(WebView) findViewById(R.id.webview);\r\n        WebSettings settings = wv.getSettings();\r\n        settings.setJavaScriptEnabled(true);\r\n        settings.getLoadsImagesAutomatically();\r\n        settings.getBuiltInZoomControls();\r\n        settings.setSaveFormData(true);\r\n        settings.setEnableSmoothTransition(true);\r\n        settings.setNeedInitialFocus(true);\r\n        settings.setSavePassword(true);\r\n        settings.setDomStorageEnabled(true);\r\n        settings.setPluginState(WebSettings.PluginState.ON);\r\n        // add progress bar\r\n        mProgressBar = (ProgressBar) findViewById(R.id.progressBar);\r\n        wv.loadUrl(&quot;https://www.w3schools.com/&quot;);\r\n        wv.setWebChromeClient(new MyWebChromeClient(this));\r\n        wv.setWebViewClient(new WebViewClient(){\r\n            public boolean shouldOverrideUrlLoading(WebView view, String url) {\r\n                view.loadUrl(url);\r\n                return true;\r\n            }\r\n\r\n            @Override\r\n            public void onPageStarted(WebView view, String url, Bitmap favicon) {\r\n                super.onPageStarted(view, url, favicon);\r\n                mProgressBar.setVisibility(View.VISIBLE);\r\n            }\r\n\r\n            @Override\r\n            public void onPageFinished(WebView view, String url) {\r\n                super.onPageFinished(view, url);\r\n                mProgressBar.setVisibility(View.GONE);\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        if(wv.canGoBack()){\r\n\r\n            wv.goBack();\r\n        }\r\n        else{\r\n            super.onBackPressed();\r\n        }\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onUpdateProgress(int progressValue) {\r\n        mProgressBar.setProgress(progressValue);\r\n        if (progressValue == 100) {\r\n            mProgressBar.setVisibility(View.INVISIBLE);\r\n        }\r\n    }}\r\n\r\nIn this layout i added webview and progressbar.&lt;br/&gt;\r\n**activity_main.xml**\r\n\r\n     &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:id=&quot;@+id/activity_main&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;com.johnson.apple.MainActivity&quot;&gt;\r\n        &lt;WebView\r\n            android:id=&quot;@+id/webview&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_centerVertical=&quot;true&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot; /&gt;\r\n        &lt;ProgressBar\r\n            android:id=&quot;@+id/progressBar&quot;\r\n            android:minHeight=&quot;2dip&quot;\r\n            android:maxHeight=&quot;2dip&quot;\r\n            android:progressDrawable=&quot;@drawable/bg_progress_bar_webview&quot;\r\n            android:layout_width=&quot;fill_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            style=&quot;@android:style/Widget.ProgressBar.Horizontal&quot; /&gt;\r\n    &lt;/RelativeLayout&gt;\r\n\r\nHope anyone can help me\r\nThnaks in advance\r\n\r\n\r\n\r\n\r\n\r\n","title":"how to align progress bar in webview Android?","body":"<p>I wrote simple web view application in android but the <strong>progress bar</strong> is showing the very top of the application click\n<a href=\"https://i.stack.imgur.com/pSOaG.png\" rel=\"nofollow noreferrer\">here</a> to view the image.\nactually, I want to do like this click <a href=\"https://i.stack.imgur.com/UU6eQ.png\" rel=\"nofollow noreferrer\">here</a></p>\n<p>This is my\n<strong>Main activity</strong></p>\n<pre><code>public class MainActivity extends AppCompatActivity implements MyWebChromeClient.ProgressListener {\n\nWebView wv;\nprivate ProgressBar mProgressBar;\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    wv=(WebView) findViewById(R.id.webview);\n    WebSettings settings = wv.getSettings();\n    settings.setJavaScriptEnabled(true);\n    settings.getLoadsImagesAutomatically();\n    settings.getBuiltInZoomControls();\n    settings.setSaveFormData(true);\n    settings.setEnableSmoothTransition(true);\n    settings.setNeedInitialFocus(true);\n    settings.setSavePassword(true);\n    settings.setDomStorageEnabled(true);\n    settings.setPluginState(WebSettings.PluginState.ON);\n    // add progress bar\n    mProgressBar = (ProgressBar) findViewById(R.id.progressBar);\n    wv.loadUrl(&quot;https://www.w3schools.com/&quot;);\n    wv.setWebChromeClient(new MyWebChromeClient(this));\n    wv.setWebViewClient(new WebViewClient(){\n        public boolean shouldOverrideUrlLoading(WebView view, String url) {\n            view.loadUrl(url);\n            return true;\n        }\n\n        @Override\n        public void onPageStarted(WebView view, String url, Bitmap favicon) {\n            super.onPageStarted(view, url, favicon);\n            mProgressBar.setVisibility(View.VISIBLE);\n        }\n\n        @Override\n        public void onPageFinished(WebView view, String url) {\n            super.onPageFinished(view, url);\n            mProgressBar.setVisibility(View.GONE);\n\n        }\n    });\n}\n\n@Override\npublic void onBackPressed() {\n    if(wv.canGoBack()){\n\n        wv.goBack();\n    }\n    else{\n        super.onBackPressed();\n    }\n}\n\n\n@Override\npublic void onUpdateProgress(int progressValue) {\n    mProgressBar.setProgress(progressValue);\n    if (progressValue == 100) {\n        mProgressBar.setVisibility(View.INVISIBLE);\n    }\n}}\n</code></pre>\n<p>In this layout i added webview and progressbar.<br/>\n<strong>activity_main.xml</strong></p>\n<pre><code> &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/activity_main&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;com.johnson.apple.MainActivity&quot;&gt;\n    &lt;WebView\n        android:id=&quot;@+id/webview&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_centerVertical=&quot;true&quot;\n        android:layout_centerHorizontal=&quot;true&quot; /&gt;\n    &lt;ProgressBar\n        android:id=&quot;@+id/progressBar&quot;\n        android:minHeight=&quot;2dip&quot;\n        android:maxHeight=&quot;2dip&quot;\n        android:progressDrawable=&quot;@drawable/bg_progress_bar_webview&quot;\n        android:layout_width=&quot;fill_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        style=&quot;@android:style/Widget.ProgressBar.Horizontal&quot; /&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>Hope anyone can help me\nThnaks in advance</p>\n"},{"tags":["java","android","unity-game-engine","screen-capture","flag-secure"],"owner":{"account_id":1664268,"reputation":474,"user_id":1532008,"accept_rate":56,"display_name":"kashif789us"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1676001345,"creation_date":1676001345,"question_id":75406784,"body_markdown":"I wanted to restrict screenshots and screen recording in my Unity game. So, I Googled and found that I need to extend \r\n\r\n&gt; UnityPlayerActivity\r\n\r\n and add a FLAG_SECURE in it&#39;s OnCreate method. So, I did it:\r\n\r\n    public class KTExtendedActivity extends UnityPlayerActivity {\r\n    protected void onCreate (Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        getWindow().setFlags(WindowManager.LayoutParams.FLAG_SECURE,\r\n                WindowManager.LayoutParams.FLAG_SECURE);\r\n    }\r\n}\r\n\r\nI exported it as an AAR and added it to Unity game&#39;s Manifest.\r\n\r\nNow the problem I am facing is that it is blocking screenshots on every device without any problem. But screen recording is exhibiting different behaviours. On Google Pixel 5 running Android 13, the screen recording is black as expected. But on couple of other Android devices running Android 11 and 12, screen recording is not black. It is recording everything although it is blocking screenshots.\r\n\r\nIf I extend a native activity with my custom created one inside Android Studio, the screen recordings are black for all devices. But not when I add it in Unity.\r\n\r\nWhat could be the problem? ","title":"Unexpected FLAG_SECURE behaviour while extending UnityPlayerActivity","body":"<p>I wanted to restrict screenshots and screen recording in my Unity game. So, I Googled and found that I need to extend</p>\n<blockquote>\n<p>UnityPlayerActivity</p>\n</blockquote>\n<p>and add a FLAG_SECURE in it's OnCreate method. So, I did it:</p>\n<pre><code>public class KTExtendedActivity extends UnityPlayerActivity {\nprotected void onCreate (Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    getWindow().setFlags(WindowManager.LayoutParams.FLAG_SECURE,\n            WindowManager.LayoutParams.FLAG_SECURE);\n}\n</code></pre>\n<p>}</p>\n<p>I exported it as an AAR and added it to Unity game's Manifest.</p>\n<p>Now the problem I am facing is that it is blocking screenshots on every device without any problem. But screen recording is exhibiting different behaviours. On Google Pixel 5 running Android 13, the screen recording is black as expected. But on couple of other Android devices running Android 11 and 12, screen recording is not black. It is recording everything although it is blocking screenshots.</p>\n<p>If I extend a native activity with my custom created one inside Android Studio, the screen recordings are black for all devices. But not when I add it in Unity.</p>\n<p>What could be the problem?</p>\n"},{"tags":["java","spring","spring-cloud-gateway"],"answers":[{"tags":[],"owner":{"account_id":231416,"reputation":35,"user_id":495642,"display_name":"hutushen222"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1676001282,"creation_date":1676001282,"answer_id":75406775,"question_id":73860073,"body_markdown":"Try to change the dependency `spring-cloud-starter-circuitbreaker-resilience4j` to `spring-cloud-starter-circuitbreaker-reactor-resilience4j`.","title":"Spring cloud gateway guide fails","body":"<p>Try to change the dependency <code>spring-cloud-starter-circuitbreaker-resilience4j</code> to <code>spring-cloud-starter-circuitbreaker-reactor-resilience4j</code>.</p>\n"}],"owner":{"account_id":5321617,"reputation":23,"user_id":4244910,"display_name":"techieIntern"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":461,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1676001282,"creation_date":1664227339,"question_id":73860073,"body_markdown":"I am attempting to follow the guide here: https://spring.io/guides/gs/gateway/#scratch but it fails on the circuit breaker step. \r\n\r\nSpecifically when adding the code: \r\n\r\n    @Bean\r\n    public RouteLocator myRoutes(RouteLocatorBuilder builder) {\r\n        return builder.routes()\r\n            .route(p -&gt; p\r\n                .path(&quot;/get&quot;)\r\n                .filters(f -&gt; f.addRequestHeader(&quot;Hello&quot;, &quot;World&quot;))\r\n                .uri(&quot;http://httpbin.org:80&quot;))\r\n            .route(p -&gt; p\r\n                .host(&quot;*.circuitbreaker.com&quot;)\r\n                .filters(f -&gt; f.circuitBreaker(config -&gt; config.setName(&quot;mycmd&quot;)))\r\n                .uri(&quot;http://httpbin.org:80&quot;)).\r\n            build();\r\n    }\r\n\r\nWhen I attempt to run the application now, if fails with:\r\n\r\n\r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Method myRoutes in com.example.springcloudgatewaypoc.Application required a bean of type &#39;org.springframework.cloud.gateway.filter.factory.SpringCloudCircuitBreakerFilterFactory&#39; that could not be found.\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider defining a bean of type &#39;org.springframework.cloud.gateway.filter.factory.SpringCloudCircuitBreakerFilterFactory&#39; in your configuration.\r\n\r\nI used the spring starter the guide gave and tried different versions of java (8 and 17).\r\n\r\nThe first of the guide, just adding the Hello World filter worked.\r\n\r\nHere is my full working code:\r\n\r\n    package com.example.springcloudgatewaypoc;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.cloud.gateway.route.RouteLocator;\r\n    import org.springframework.cloud.gateway.route.builder.RouteLocatorBuilder;\r\n    import org.springframework.context.annotation.Bean;\r\n    \r\n    @SpringBootApplication\r\n    public class Application {\r\n    \r\n      @Bean\r\n      public RouteLocator myRoutes(RouteLocatorBuilder builder) {\r\n        return builder.routes()\r\n            .route(p -&gt; p\r\n                .path(&quot;/get&quot;)\r\n                .filters(f -&gt; f.addRequestHeader(&quot;Hello&quot;, &quot;World&quot;))\r\n                .uri(&quot;http://httpbin.org:80&quot;))\r\n            .route(p -&gt; p\r\n                .host(&quot;*.circuitbreaker.com&quot;)\r\n                .filters(f -&gt; f.circuitBreaker(config -&gt; config.setName(&quot;mycmd&quot;)))\r\n                .uri(&quot;http://httpbin.org:80&quot;)).\r\n            build();\r\n      }\r\n    \r\n      public static void main(String[] args) {\r\n        SpringApplication.run(Application.class, args);\r\n      }\r\n    }\r\n\r\nAnd pom (1.8):\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.7.4&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-cloud-gateway-poc&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;spring-cloud-gateway-poc&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Cloud Gateway&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t\t&lt;spring-cloud.version&gt;2021.0.4&lt;/spring-cloud.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-circuitbreaker-resilience4j&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-contract-stub-runner&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;dependencyManagement&gt;\r\n    \t\t&lt;dependencies&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n    \t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-cloud-starter-circuitbreaker-reactor-resilience4j&lt;/artifactId&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t&lt;/dependencies&gt;\r\n    \t&lt;/dependencyManagement&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.7.4&lt;/version&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n","title":"Spring cloud gateway guide fails","body":"<p>I am attempting to follow the guide here: <a href=\"https://spring.io/guides/gs/gateway/#scratch\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/gateway/#scratch</a> but it fails on the circuit breaker step.</p>\n<p>Specifically when adding the code:</p>\n<pre><code>@Bean\npublic RouteLocator myRoutes(RouteLocatorBuilder builder) {\n    return builder.routes()\n        .route(p -&gt; p\n            .path(&quot;/get&quot;)\n            .filters(f -&gt; f.addRequestHeader(&quot;Hello&quot;, &quot;World&quot;))\n            .uri(&quot;http://httpbin.org:80&quot;))\n        .route(p -&gt; p\n            .host(&quot;*.circuitbreaker.com&quot;)\n            .filters(f -&gt; f.circuitBreaker(config -&gt; config.setName(&quot;mycmd&quot;)))\n            .uri(&quot;http://httpbin.org:80&quot;)).\n        build();\n}\n</code></pre>\n<p>When I attempt to run the application now, if fails with:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nMethod myRoutes in com.example.springcloudgatewaypoc.Application required a bean of type 'org.springframework.cloud.gateway.filter.factory.SpringCloudCircuitBreakerFilterFactory' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'org.springframework.cloud.gateway.filter.factory.SpringCloudCircuitBreakerFilterFactory' in your configuration.\n</code></pre>\n<p>I used the spring starter the guide gave and tried different versions of java (8 and 17).</p>\n<p>The first of the guide, just adding the Hello World filter worked.</p>\n<p>Here is my full working code:</p>\n<pre><code>package com.example.springcloudgatewaypoc;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.gateway.route.RouteLocator;\nimport org.springframework.cloud.gateway.route.builder.RouteLocatorBuilder;\nimport org.springframework.context.annotation.Bean;\n\n@SpringBootApplication\npublic class Application {\n\n  @Bean\n  public RouteLocator myRoutes(RouteLocatorBuilder builder) {\n    return builder.routes()\n        .route(p -&gt; p\n            .path(&quot;/get&quot;)\n            .filters(f -&gt; f.addRequestHeader(&quot;Hello&quot;, &quot;World&quot;))\n            .uri(&quot;http://httpbin.org:80&quot;))\n        .route(p -&gt; p\n            .host(&quot;*.circuitbreaker.com&quot;)\n            .filters(f -&gt; f.circuitBreaker(config -&gt; config.setName(&quot;mycmd&quot;)))\n            .uri(&quot;http://httpbin.org:80&quot;)).\n        build();\n  }\n\n  public static void main(String[] args) {\n    SpringApplication.run(Application.class, args);\n  }\n}\n</code></pre>\n<p>And pom (1.8):</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-gateway-poc&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;spring-cloud-gateway-poc&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Cloud Gateway&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2021.0.4&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-circuitbreaker-resilience4j&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-contract-stub-runner&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-starter-circuitbreaker-reactor-resilience4j&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.7.4&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","logging","logback","slf4j"],"comments":[{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1675802532,"post_id":75378294,"comment_id":133006344,"body_markdown":"Fixing lazy question asker&#39;s oversight: They are talking about the `guard` field in [the UnsynchronizedAppenderBase class](https://github.com/qos-ch/logback/blob/d40aa0a2c68eb72c51d9bfb113ba4462661a42e7/logback-core/src/main/java/ch/qos/logback/core/UnsynchronizedAppenderBase.java).","body":"Fixing lazy question asker&#39;s oversight: They are talking about the <code>guard</code> field in <a href=\"https://github.com/qos-ch/logback/blob/d40aa0a2c68eb72c51d9bfb113ba4462661a42e7/logback-core/src/main/java/ch/qos/logback/core/UnsynchronizedAppenderBase.java\" rel=\"nofollow noreferrer\">the UnsynchronizedAppenderBase class</a>."},{"owner":{"account_id":47518,"reputation":21228,"user_id":140803,"accept_rate":78,"display_name":"Blessed Geek"},"score":0,"creation_date":1675805341,"post_id":75378294,"comment_id":133007026,"body_markdown":"She is referring to the recursion prevention check in AppenderBase (as well as UnsynchronizedAppenderBase), i.e., in the appender base classes.","body":"She is referring to the recursion prevention check in AppenderBase (as well as UnsynchronizedAppenderBase), i.e., in the appender base classes."}],"answers":[{"tags":[],"owner":{"account_id":2826194,"reputation":10795,"user_id":2428802,"display_name":"jmehrens"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1676000737,"creation_date":1676000051,"answer_id":75406672,"question_id":75378294,"body_markdown":"&gt; Under what circumstances would doAppend call back on itself?\r\n\r\nAnytime the Appender::append creates logging events that feedback into the appender itself.  This is any Appender makes method calls against a 3rd party library which in itself uses a logging framework that uses slf4j or can be bridged to logback/slf4j.\r\n\r\nTake the SMTPAppender as an example.  Per the [docs][1]:\r\n\r\n&gt; The SMTPAppender relies on the JavaMail API.\r\n\r\nIf the following statements are true then you have a feedback loop:\r\n\r\n 1. An ancestor of the JavaMail logger namespace has an attached SMTPAppender, say the root logger for example.\r\n 2. JavaMail session debugging has been enabled which will generate JUL log records on SMTP send.\r\n 3. The sl4fj JUL bridge handler is installed and is redirecting the JUL log records to the already attached SMTPAppender in point 1.\r\n 4. There is a running thread that tries to generate the first log message.\r\n 5. The SMTPAppender attempts to send email message.  This action will generate more messages that feedback into logger in point 1.\r\n\r\nWhen all of this is true, your application log message that you wanted to send via email ended up creating X number of log message debug statements from JavaMail. Those X number of message now end up calling SMTPAppender::append and so on.\r\n\r\n\r\nThis same type of example could be applied to the [DBAppender][2] which requires a JDBC driver that could be directly logging to slf4j.  Same rules for any custom appenders applies here too.\r\n\r\nIn general, you don&#39;t what your application logs to be mixed with this appender generated log information or create some sort of feedback loop that takes down your server.\r\n\r\n\r\n  [1]: https://logback.qos.ch/manual/appenders.html\r\n  [2]: https://logback.qos.ch/manual/appenders.html#DBAppender","title":"ThreadLocal guard in Logback appender base classes","body":"<blockquote>\n<p>Under what circumstances would doAppend call back on itself?</p>\n</blockquote>\n<p>Anytime the Appender::append creates logging events that feedback into the appender itself.  This is any Appender makes method calls against a 3rd party library which in itself uses a logging framework that uses slf4j or can be bridged to logback/slf4j.</p>\n<p>Take the SMTPAppender as an example.  Per the <a href=\"https://logback.qos.ch/manual/appenders.html\" rel=\"nofollow noreferrer\">docs</a>:</p>\n<blockquote>\n<p>The SMTPAppender relies on the JavaMail API.</p>\n</blockquote>\n<p>If the following statements are true then you have a feedback loop:</p>\n<ol>\n<li>An ancestor of the JavaMail logger namespace has an attached SMTPAppender, say the root logger for example.</li>\n<li>JavaMail session debugging has been enabled which will generate JUL log records on SMTP send.</li>\n<li>The sl4fj JUL bridge handler is installed and is redirecting the JUL log records to the already attached SMTPAppender in point 1.</li>\n<li>There is a running thread that tries to generate the first log message.</li>\n<li>The SMTPAppender attempts to send email message.  This action will generate more messages that feedback into logger in point 1.</li>\n</ol>\n<p>When all of this is true, your application log message that you wanted to send via email ended up creating X number of log message debug statements from JavaMail. Those X number of message now end up calling SMTPAppender::append and so on.</p>\n<p>This same type of example could be applied to the <a href=\"https://logback.qos.ch/manual/appenders.html#DBAppender\" rel=\"nofollow noreferrer\">DBAppender</a> which requires a JDBC driver that could be directly logging to slf4j.  Same rules for any custom appenders applies here too.</p>\n<p>In general, you don't what your application logs to be mixed with this appender generated log information or create some sort of feedback loop that takes down your server.</p>\n"}],"owner":{"account_id":47518,"reputation":21228,"user_id":140803,"accept_rate":78,"display_name":"Blessed Geek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75406672,"answer_count":1,"score":1,"last_activity_date":1676000737,"creation_date":1675799224,"question_id":75378294,"body_markdown":"ThreadLocal guard is utilized in doAppend method of Logback base appenders to prevent calling back on itself.\r\n\r\nUnder what circumstances would doAppend call back on itself?","title":"ThreadLocal guard in Logback appender base classes","body":"<p>ThreadLocal guard is utilized in doAppend method of Logback base appenders to prevent calling back on itself.</p>\n<p>Under what circumstances would doAppend call back on itself?</p>\n"},{"tags":["java","anylogic"],"answers":[{"tags":[],"owner":{"account_id":10397300,"reputation":962,"user_id":7666708,"display_name":"Florian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1554987745,"creation_date":1554987745,"answer_id":55633150,"question_id":55628768,"body_markdown":"I assume you have a collection &quot;locations&quot; of type ArrayList&lt;GISPoint&gt; containing all your GISPoints, here is what you do:\r\n\r\n   \r\n\r\n    //create a new GIS network and attach it to your map element\r\n    GISNetwork network = new GISNetwork(map,&quot;myNetwork&quot;);\r\n    \r\n    //add all GISPoints to this network\r\n    for(GISPoint p:locations){\r\n    \tnetwork.add(p);\r\n    }\r\n    \r\n    //somehow iterate through your points to create Routes between them (here just connect one after another, no cross connections)\r\n    for(int i=0;i&lt;locations.size()-1;i++){\r\n    \t\r\n    \t//create segment (neccessary for Curve)\r\n    \tGISMarkupSegment segment = new GISMarkupSegmentLine(locations.get(i).getLatitude(), locations.get(i).getLongitude(), locations.get(i+1).getLatitude(), locations.get(i+1).getLongitude());\r\n    \r\n    \t//create curves (neccessary for the GISRoutes)\r\n    \tCurve&lt;GISMarkupSegment&gt; curve = new Curve&lt;&gt;();\r\n    \r\n    \tcurve.addSegment(segment);\t\r\n    \tcurve.initialize();\r\n    \tnetwork.add(new GISRoute(map,curve,locations.get(i), locations.get(i+1), true));\r\n    }\r\n    network.initialize(); ","title":"Custom GIS Routes","body":"<p>I assume you have a collection \"locations\" of type ArrayList containing all your GISPoints, here is what you do:</p>\n\n<pre><code>//create a new GIS network and attach it to your map element\nGISNetwork network = new GISNetwork(map,\"myNetwork\");\n\n//add all GISPoints to this network\nfor(GISPoint p:locations){\n    network.add(p);\n}\n\n//somehow iterate through your points to create Routes between them (here just connect one after another, no cross connections)\nfor(int i=0;i&lt;locations.size()-1;i++){\n\n    //create segment (neccessary for Curve)\n    GISMarkupSegment segment = new GISMarkupSegmentLine(locations.get(i).getLatitude(), locations.get(i).getLongitude(), locations.get(i+1).getLatitude(), locations.get(i+1).getLongitude());\n\n    //create curves (neccessary for the GISRoutes)\n    Curve&lt;GISMarkupSegment&gt; curve = new Curve&lt;&gt;();\n\n    curve.addSegment(segment);  \n    curve.initialize();\n    network.add(new GISRoute(map,curve,locations.get(i), locations.get(i+1), true));\n}\nnetwork.initialize(); \n</code></pre>\n"}],"owner":{"account_id":11336692,"reputation":3,"user_id":8312304,"display_name":"Greta Quadrati"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":55633150,"answer_count":1,"score":0,"last_activity_date":1676000680,"creation_date":1554973826,"question_id":55628768,"body_markdown":"I have a list of GIS point that creates a route network. \r\n\r\nMy goal is to let agents move from a point to another using ONLY the network I provided. \r\nI don&#39;t want to use all the possible routes from a point A to a point B, just the ones that I can follow based on my own network.\r\n\r\nI know that it should be possible by implementing a custom RouteProvider,  but I was not able to figure out how to do it. \r\n\r\nThank you very much for your help!","title":"Custom GIS Routes","body":"<p>I have a list of GIS point that creates a route network. </p>\n\n<p>My goal is to let agents move from a point to another using ONLY the network I provided. \nI don't want to use all the possible routes from a point A to a point B, just the ones that I can follow based on my own network.</p>\n\n<p>I know that it should be possible by implementing a custom RouteProvider,  but I was not able to figure out how to do it. </p>\n\n<p>Thank you very much for your help!</p>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1676000270,"creation_date":1676000270,"answer_id":75406692,"question_id":75406668,"body_markdown":"You&#39;ve got the regular expression and the string that&#39;s being searched the wrong way round.  Instead of \r\n\r\n    Pattern pattern = Pattern.compile(naming);\r\n    Matcher matcher = pattern.matcher(&quot;[^a-zA-Z]&quot;);\r\n\r\nYou need something like\r\n\r\n    Pattern pattern = Pattern.compile(&quot;[^a-zA-Z]&quot;);\r\n    Matcher matcher = pattern.matcher(naming);\r\n\r\n","title":"Why isn&#39;t my code looking for non-letters? (Regular expressions)","body":"<p>You've got the regular expression and the string that's being searched the wrong way round.  Instead of</p>\n<pre><code>Pattern pattern = Pattern.compile(naming);\nMatcher matcher = pattern.matcher(&quot;[^a-zA-Z]&quot;);\n</code></pre>\n<p>You need something like</p>\n<pre><code>Pattern pattern = Pattern.compile(&quot;[^a-zA-Z]&quot;);\nMatcher matcher = pattern.matcher(naming);\n</code></pre>\n"}],"owner":{"account_id":27749763,"reputation":11,"user_id":21184396,"display_name":"Jool"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1676031455,"accepted_answer_id":75406692,"answer_count":1,"score":0,"last_activity_date":1676000308,"creation_date":1676000011,"question_id":75406668,"body_markdown":"```\r\nimport java.util.Scanner;\r\nimport java.util.regex.Pattern;\r\nimport java.util.regex.Matcher;\r\n\r\nclass Main { \r\n  public static void main(String[] args) {\r\n    String naming;\r\n\r\n    Scanner input = new Scanner(System.in);\r\n    System.out.print(&quot;What is your name: &quot;);\r\n    naming = input.nextLine();  \r\n    input.close();\r\n\r\n    //**\r\n    Pattern pattern = Pattern.compile(naming);\r\n    Matcher matcher = pattern.matcher(&quot;[^a-zA-Z]&quot;);\r\n    boolean check = matcher.find();\r\n    if (check) {\r\n      System.out.println(&quot;Invalid name entered&quot;);\r\n      //**\r\n    } else {\r\n      System.out.print(&quot;continue&quot;);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nBetween the `**` is the part I&#39;m stuck on. This program is supposed to ask for your name, and if you enter anything that&#39;s not a letter, then it will say &quot;Invalid name entered.&quot; But instead it just says &quot;continue&quot;. What am I doing wrong? Also, I want to make the program `break` under the `System.out.println(&quot;Invalid name entered&quot;);` line, but repl.it tells me &quot;break cannot be used outside of a loop or switch&quot;. I have to use regular expressions here by the way.\r\n\r\nI&#39;m not sure what to do. `Pattern pattern = Pattern.compile(naming);` is supposed to set the name to a pattern, then `Matcher matcher = pattern.matcher(&quot;[^a-zA-Z]&quot;);` is supposed to look for non-letters. Finally, \r\n```\r\nboolean check = matcher.find();\r\n   if (check) {\r\n      System.out.println(&quot;Invalid name entered&quot;);\r\n   } else {\r\n      System.out.print(&quot;continue&quot;);\r\n```\r\n\r\nis supposed to print &quot;Invalid name entered&quot; if non-letters are found, but it just ignores that and prints &quot;continue&quot; instead.","title":"Why isn&#39;t my code looking for non-letters? (Regular expressions)","body":"<pre><code>import java.util.Scanner;\nimport java.util.regex.Pattern;\nimport java.util.regex.Matcher;\n\nclass Main { \n  public static void main(String[] args) {\n    String naming;\n\n    Scanner input = new Scanner(System.in);\n    System.out.print(&quot;What is your name: &quot;);\n    naming = input.nextLine();  \n    input.close();\n\n    //**\n    Pattern pattern = Pattern.compile(naming);\n    Matcher matcher = pattern.matcher(&quot;[^a-zA-Z]&quot;);\n    boolean check = matcher.find();\n    if (check) {\n      System.out.println(&quot;Invalid name entered&quot;);\n      //**\n    } else {\n      System.out.print(&quot;continue&quot;);\n    }\n  }\n}\n</code></pre>\n<p>Between the <code>**</code> is the part I'm stuck on. This program is supposed to ask for your name, and if you enter anything that's not a letter, then it will say &quot;Invalid name entered.&quot; But instead it just says &quot;continue&quot;. What am I doing wrong? Also, I want to make the program <code>break</code> under the <code>System.out.println(&quot;Invalid name entered&quot;);</code> line, but repl.it tells me &quot;break cannot be used outside of a loop or switch&quot;. I have to use regular expressions here by the way.</p>\n<p>I'm not sure what to do. <code>Pattern pattern = Pattern.compile(naming);</code> is supposed to set the name to a pattern, then <code>Matcher matcher = pattern.matcher(&quot;[^a-zA-Z]&quot;);</code> is supposed to look for non-letters. Finally,</p>\n<pre><code>boolean check = matcher.find();\n   if (check) {\n      System.out.println(&quot;Invalid name entered&quot;);\n   } else {\n      System.out.print(&quot;continue&quot;);\n</code></pre>\n<p>is supposed to print &quot;Invalid name entered&quot; if non-letters are found, but it just ignores that and prints &quot;continue&quot; instead.</p>\n"},{"tags":["java","spring-boot","bufferedimage","graphics2d","watermark"],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675990837,"creation_date":1675990837,"answer_id":75405991,"question_id":75404463,"body_markdown":"You can use an `AffineTransform` to rotate the Graphics.\r\n\r\nFor example:\r\n\r\n    import java.awt.*;\r\n    import java.awt.geom.*;\r\n    import javax.swing.*;\r\n    \r\n    public class Rotate extends JPanel\r\n    {\r\n    \t@Override\r\n        public void paintComponent(Graphics g)\r\n        {\r\n        \tsuper.paintComponent(g);\r\n    \r\n            Graphics2D g2 = (Graphics2D)g.create();\r\n    \r\n            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON );\r\n            g2.setFont( new Font( &quot;Helvetica&quot;, Font.BOLD, 12 ) );\r\n    \r\n            for( double angle = 0; angle &lt;= 90; angle+=30 )\r\n            {\r\n                String text = &quot;Rotate angle is &quot; + (int)angle;\r\n                AffineTransform af = new AffineTransform();\r\n                af.translate(50, 50);\r\n                af.rotate( Math.toRadians( angle ) );\r\n                g2.setTransform( af );\r\n    \r\n                g2.setColor( Color.black );\r\n                g2.drawString(text, 50, 0);\r\n                g2.setColor( Color.red );\r\n                g2.drawLine(0, 0, 200, 0 );\r\n            }\r\n    \r\n    \t\tg2.dispose();\r\n        }\r\n    \r\n    \t@Override\r\n    \tpublic Dimension getPreferredSize()\r\n    \t{\r\n    \t\treturn new Dimension(300, 300);\r\n    \t}\r\n    \r\n    \tprivate static void createAndShowGUI()\r\n    \t{\r\n    \t\tJFrame frame = new JFrame(&quot;Rotate&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\tframe.add(new Rotate());\r\n            frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform( true );\r\n    \t\tframe.setVisible( true );\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) throws Exception\r\n    \t{\r\n    \t\tjava.awt.EventQueue.invokeLater( () -&gt; createAndShowGUI() );\r\n    \t}\r\n    }\r\n\r\n","title":"Add rotated watermark text with background to image in Java","body":"<p>You can use an <code>AffineTransform</code> to rotate the Graphics.</p>\n<p>For example:</p>\n<pre><code>import java.awt.*;\nimport java.awt.geom.*;\nimport javax.swing.*;\n\npublic class Rotate extends JPanel\n{\n    @Override\n    public void paintComponent(Graphics g)\n    {\n        super.paintComponent(g);\n\n        Graphics2D g2 = (Graphics2D)g.create();\n\n        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON );\n        g2.setFont( new Font( &quot;Helvetica&quot;, Font.BOLD, 12 ) );\n\n        for( double angle = 0; angle &lt;= 90; angle+=30 )\n        {\n            String text = &quot;Rotate angle is &quot; + (int)angle;\n            AffineTransform af = new AffineTransform();\n            af.translate(50, 50);\n            af.rotate( Math.toRadians( angle ) );\n            g2.setTransform( af );\n\n            g2.setColor( Color.black );\n            g2.drawString(text, 50, 0);\n            g2.setColor( Color.red );\n            g2.drawLine(0, 0, 200, 0 );\n        }\n\n        g2.dispose();\n    }\n\n    @Override\n    public Dimension getPreferredSize()\n    {\n        return new Dimension(300, 300);\n    }\n\n    private static void createAndShowGUI()\n    {\n        JFrame frame = new JFrame(&quot;Rotate&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.add(new Rotate());\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        frame.pack();\n        frame.setLocationByPlatform( true );\n        frame.setVisible( true );\n    }\n\n    public static void main(String[] args) throws Exception\n    {\n        java.awt.EventQueue.invokeLater( () -&gt; createAndShowGUI() );\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3006965,"reputation":4976,"user_id":2551287,"accept_rate":89,"display_name":"young-ceo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":75405991,"answer_count":1,"score":-2,"last_activity_date":1676000303,"creation_date":1675977228,"question_id":75404463,"body_markdown":"I am using Java 8 (Spring Boot), and I want to add text (as watermark) to an image like this:\r\n\r\n[![example][1]][1]\r\n\r\n[1]: https://i.stack.imgur.com/6UFFW.png\r\n\r\nAs you see, the text `HELLO WORLD!` is **rotated 90 degrees**, and it has **black background color** (the grey background is a source image).\r\n\r\nHere is my current Java code that adds text to an image in center (no background, not rotated):\r\n\r\n```java\r\npublic BufferedImage AddTextWatermarkInCenter(BufferedImage targetImg, String watermarkText) {\r\n    Graphics2D targetImgGraphics = (Graphics2D)targetImg.getGraphics();\r\n    \r\n    // Init graphic properties\r\n    AlphaComposite alphaComposite = AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 1.0f);\r\n    targetImgGraphics.setComposite(alphaComposite);\r\n    targetImgGraphics.setColor(Color.BLACK);\r\n    targetImgGraphics.setFont(WatermarkImageHelper.AcquireWatermarkFont());\r\n    \r\n    FontMetrics targetImgFontMetrics = targetImgGraphics.getFontMetrics();\r\n    Rectangle2D targetImgRectangle = targetImgFontMetrics.getStringBounds(watermarkText, targetImgGraphics);\r\n    \r\n    // Calculates the coordinate where the text is painted\r\n    int centerX = ((targetImg.getWidth() - (int)targetImgRectangle.getWidth()) / 2);\r\n    int centerY = (targetImg.getHeight() / 2);\r\n    \r\n    // Paints the textual watermark\r\n    targetImgGraphics.drawString(watermarkText, centerX, centerY);\r\n    \r\n    targetImgGraphics.dispose();\r\n    \r\n    return targetImg;\r\n}\r\n```\r\n\r\nHow do I draw watermark text as the example image?","title":"Add rotated watermark text with background to image in Java","body":"<p>I am using Java 8 (Spring Boot), and I want to add text (as watermark) to an image like this:</p>\n<p><a href=\"https://i.stack.imgur.com/6UFFW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6UFFW.png\" alt=\"example\" /></a></p>\n<p>As you see, the text <code>HELLO WORLD!</code> is <strong>rotated 90 degrees</strong>, and it has <strong>black background color</strong> (the grey background is a source image).</p>\n<p>Here is my current Java code that adds text to an image in center (no background, not rotated):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public BufferedImage AddTextWatermarkInCenter(BufferedImage targetImg, String watermarkText) {\n    Graphics2D targetImgGraphics = (Graphics2D)targetImg.getGraphics();\n    \n    // Init graphic properties\n    AlphaComposite alphaComposite = AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 1.0f);\n    targetImgGraphics.setComposite(alphaComposite);\n    targetImgGraphics.setColor(Color.BLACK);\n    targetImgGraphics.setFont(WatermarkImageHelper.AcquireWatermarkFont());\n    \n    FontMetrics targetImgFontMetrics = targetImgGraphics.getFontMetrics();\n    Rectangle2D targetImgRectangle = targetImgFontMetrics.getStringBounds(watermarkText, targetImgGraphics);\n    \n    // Calculates the coordinate where the text is painted\n    int centerX = ((targetImg.getWidth() - (int)targetImgRectangle.getWidth()) / 2);\n    int centerY = (targetImg.getHeight() / 2);\n    \n    // Paints the textual watermark\n    targetImgGraphics.drawString(watermarkText, centerX, centerY);\n    \n    targetImgGraphics.dispose();\n    \n    return targetImg;\n}\n</code></pre>\n<p>How do I draw watermark text as the example image?</p>\n"},{"tags":["java","xml","xpath","rss","javax.xml"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1675961063,"post_id":75401684,"comment_id":133044760,"body_markdown":"Change `//Reason` to `.//Reason`.  Starting the expression with a slash searches from the root of the document, not relative to the node.","body":"Change <code>&#47;&#47;Reason</code> to <code>.&#47;&#47;Reason</code>.  Starting the expression with a slash searches from the root of the document, not relative to the node."},{"owner":{"account_id":9238852,"reputation":55,"user_id":6862621,"display_name":"Noman Ellahi"},"score":0,"creation_date":1675961669,"post_id":75401684,"comment_id":133044974,"body_markdown":"Thanks, but I&#39;m just confused when I&#39;m passing a specific node to evaluate why it&#39;s considering complete document.","body":"Thanks, but I&#39;m just confused when I&#39;m passing a specific node to evaluate why it&#39;s considering complete document."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":3,"creation_date":1675961932,"post_id":75401684,"comment_id":133045065,"body_markdown":"Because that’s what starting an expression with a slash means.  File names work the same way:  `data.txt` is a file relative to the current directory, but `/data.txt` is always located in the root of the file system.  In general, starting a path with a slash is an absolute path, and any other path string is a relative path.","body":"Because that’s what starting an expression with a slash means.  File names work the same way:  <code>data.txt</code> is a file relative to the current directory, but <code>&#47;data.txt</code> is always located in the root of the file system.  In general, starting a path with a slash is an absolute path, and any other path string is a relative path."},{"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":1,"creation_date":1675972954,"post_id":75401684,"comment_id":133048430,"body_markdown":"&quot;why it&#39;s considering complete document.&quot;: you might only want to look at the subtree for your use case but XPath is more powerful and let&#39;s you navigator to sibling, ancestors, preceding or following elements, the root, as that is useful for other cases.","body":"&quot;why it&#39;s considering complete document.&quot;: you might only want to look at the subtree for your use case but XPath is more powerful and let&#39;s you navigator to sibling, ancestors, preceding or following elements, the root, as that is useful for other cases."},{"owner":{"account_id":9238852,"reputation":55,"user_id":6862621,"display_name":"Noman Ellahi"},"score":0,"creation_date":1676027476,"post_id":75401684,"comment_id":133059049,"body_markdown":"Thanks @MartinHonnen, that&#39;s the thing cnfusing me. Thanks for clarification.","body":"Thanks @MartinHonnen, that&#39;s the thing cnfusing me. Thanks for clarification."}],"answers":[{"tags":[],"owner":{"account_id":226259,"reputation":2571,"user_id":7372462,"display_name":"Conal Tuohy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676000259,"creation_date":1676000259,"answer_id":75406690,"question_id":75401684,"body_markdown":"There&#39;s no need to execute the loop in Java; you can do it in the XPath expression itself:\r\n\r\n```xpath\r\n//Transaction[Reason]\r\n```\r\n\r\nThat XPath will return you all the `Transaction` elements which have a child `Reason` element.\r\n\r\nIf you want to get the `Reason` elements which are children of a `Transaction` element, then use this XPath:\r\n\r\n```xpath\r\n//Transaction/Reason\r\n```\r\n\r\nIf you want to get all the text nodes which are children of `Reason` elements which are children of a `Transaction` element, then use this XPath:\r\n\r\n```xpath\r\n//Transaction/Reason/text()\r\n```\r\n","title":"Get XML child node from parent node using XPATH java","body":"<p>There's no need to execute the loop in Java; you can do it in the XPath expression itself:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>//Transaction[Reason]\n</code></pre>\n<p>That XPath will return you all the <code>Transaction</code> elements which have a child <code>Reason</code> element.</p>\n<p>If you want to get the <code>Reason</code> elements which are children of a <code>Transaction</code> element, then use this XPath:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>//Transaction/Reason\n</code></pre>\n<p>If you want to get all the text nodes which are children of <code>Reason</code> elements which are children of a <code>Transaction</code> element, then use this XPath:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>//Transaction/Reason/text()\n</code></pre>\n"}],"owner":{"account_id":9238852,"reputation":55,"user_id":6862621,"display_name":"Noman Ellahi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":266,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1676000259,"creation_date":1675960561,"question_id":75401684,"body_markdown":"I&#39;m trying to get specific child node from list of nodes using xpath.\r\n\r\nHere is my xml input\r\n\r\n    &lt;root&gt;\r\n        &lt;Transaction&gt;\r\n    \t\t&lt;code&gt; 123 &lt;/code&gt;\r\n    \t\t&lt;Reason&gt; test1 &lt;/Reason&gt;\r\n    \t&lt;/Transaction&gt;\r\n    \t&lt;Transaction&gt;\r\n    \t\t&lt;code&gt; 456 &lt;/code&gt;\r\n    \t&lt;/Transaction&gt;\r\n    \t&lt;Transaction&gt;\r\n    \t\t&lt;code&gt; 789 &lt;/code&gt;\r\n    \t\t&lt;Reason&gt; test2 &lt;/Reason&gt;\r\n    \t&lt;/Transaction&gt;\r\n    &lt;/root&gt; \r\n\r\nI&#39;m trying to get all the transactions as node list and then check one by one inside each trancation either it has reason or not all using Xpath. Here is my sample code.\r\n\r\n\t\tDocument document = builder.parse(new FileInputStream(file));\r\n\r\n\t\tXPath xPath = XPathFactory.newInstance().newXPath();\r\n\r\n        //Get all the transactions\r\n\t\tNodeList nodeList = (NodeList) xPath.evaluate(&quot;//Transaction&quot;, document, XPathConstants.NODESET);\r\n\t\t\r\n\t\t\r\n\t\tfor (int temp = 0; temp &lt; nodeList.getLength(); temp++) {\r\n\r\n\t\t\tNode node = nodeList.item(temp);\r\n\t\t\tElement element = (Element) node;\r\n\t\t\t\r\n\t\t\tif (node.getNodeType() == Node.ELEMENT_NODE) {\r\n\t\t\t\tXPath xPath2 = XPathFactory.newInstance().newXPath();\r\n\t\t\t\t\r\n                //This one always return first value\r\n\t\t\t\tNode child = (Node) xPath2.evaluate(&quot;//Reason&quot;, node, XPathConstants.NODE);\r\n\t\t\t\t\r\n\t\t\t\tif(child != null) {\r\n\t\t\t\t\tSystem.out.println(child.getTextContent());\r\n\t\t\t\t}\r\n\t\t\t\t\r\n                //This is working as expected\r\n\t\t\t\tif(element.getElementsByTagName(&quot;Reason&quot;).getLength() &gt; 0) {\r\n\t\t\t\t\tSystem.out.println(element.getElementsByTagName(&quot;Reason&quot;).item(0).getTextContent());\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\nIf I cast the node to element and try to get child element by tag name it&#39;s working fine. But when I try to do it using X-PAth it returns all the values from other nodes as well. ","title":"Get XML child node from parent node using XPATH java","body":"<p>I'm trying to get specific child node from list of nodes using xpath.</p>\n<p>Here is my xml input</p>\n<pre><code>&lt;root&gt;\n    &lt;Transaction&gt;\n        &lt;code&gt; 123 &lt;/code&gt;\n        &lt;Reason&gt; test1 &lt;/Reason&gt;\n    &lt;/Transaction&gt;\n    &lt;Transaction&gt;\n        &lt;code&gt; 456 &lt;/code&gt;\n    &lt;/Transaction&gt;\n    &lt;Transaction&gt;\n        &lt;code&gt; 789 &lt;/code&gt;\n        &lt;Reason&gt; test2 &lt;/Reason&gt;\n    &lt;/Transaction&gt;\n&lt;/root&gt; \n</code></pre>\n<p>I'm trying to get all the transactions as node list and then check one by one inside each trancation either it has reason or not all using Xpath. Here is my sample code.</p>\n<pre><code>    Document document = builder.parse(new FileInputStream(file));\n\n    XPath xPath = XPathFactory.newInstance().newXPath();\n\n    //Get all the transactions\n    NodeList nodeList = (NodeList) xPath.evaluate(&quot;//Transaction&quot;, document, XPathConstants.NODESET);\n    \n    \n    for (int temp = 0; temp &lt; nodeList.getLength(); temp++) {\n\n        Node node = nodeList.item(temp);\n        Element element = (Element) node;\n        \n        if (node.getNodeType() == Node.ELEMENT_NODE) {\n            XPath xPath2 = XPathFactory.newInstance().newXPath();\n            \n            //This one always return first value\n            Node child = (Node) xPath2.evaluate(&quot;//Reason&quot;, node, XPathConstants.NODE);\n            \n            if(child != null) {\n                System.out.println(child.getTextContent());\n            }\n            \n            //This is working as expected\n            if(element.getElementsByTagName(&quot;Reason&quot;).getLength() &gt; 0) {\n                System.out.println(element.getElementsByTagName(&quot;Reason&quot;).item(0).getTextContent());\n            }\n\n        }\n    }\n</code></pre>\n<p>If I cast the node to element and try to get child element by tag name it's working fine. But when I try to do it using X-PAth it returns all the values from other nodes as well.</p>\n"},{"tags":["java","zip"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1675938750,"post_id":75397163,"comment_id":133037047,"body_markdown":"If you want to zip multiple files just start a new zip file when the size is exceeded (you might want to revert the last entry or calculate the size before adding the entry). If you want to zip a &quot;30 MB file&quot; you might need to split that file somehow - if and how this can be done depends on the content of this file (e.g. you couldn&#39;t easily split a compressed image).","body":"If you want to zip multiple files just start a new zip file when the size is exceeded (you might want to revert the last entry or calculate the size before adding the entry). If you want to zip a &quot;30 MB file&quot; you might need to split that file somehow - if and how this can be done depends on the content of this file (e.g. you couldn&#39;t easily split a compressed image)."},{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1675946550,"post_id":75397163,"comment_id":133039377,"body_markdown":"You may consider to use Apache Commons Compress which is able to create multivolume ZIP archives. See https://commons.apache.org/proper/commons-compress/zip.html","body":"You may consider to use Apache Commons Compress which is able to create multivolume ZIP archives. See <a href=\"https://commons.apache.org/proper/commons-compress/zip.html\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-compress/zip.html</a>"}],"owner":{"account_id":27742692,"reputation":1,"user_id":21178842,"display_name":"codingmoc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675999348,"creation_date":1675937945,"question_id":75397163,"body_markdown":"I need to zip a 30MB file into different zip files which have a limit of 5MB per zip file.\r\nMy work will stop to zip after the size is larger than the limit now. I referenced and tried some examples but made me feel confused.\r\nPlease give me suggestions. Thank you.\r\n\r\n    public static void zipDirectory(File dir, File zipFile, boolean contentOnly)\r\n    \t\tthrows IOException {\r\n    \tsynchronized (syncObj) {\r\n    \t\tFileOutputStream fout = new FileOutputStream(zipFile);\r\n    \t\tZipOutputStream zout = new ZipOutputStream(fout);\r\n    \t\tif (contentOnly)\r\n    \t\t\tzipSubDirectory(&quot;&quot;, dir, zout);\r\n    \t\telse\r\n    \t\t\tzipSubDirectory(dir.getName() + &quot;/&quot;, dir, zout);\r\n    \t\tzout.close();\r\n    \t}\r\n    }\r\n    \r\n    private static void zipSubDirectory(String basePath, File dir,\r\n    \t\t\t\t\t\t\t\t\t\t\t  ZipOutputStream zout) throws IOException {\r\n    \r\n    \t\tsynchronized (syncObj) {\r\n    \r\n    \t\t\tbyte[] buffer = new byte[4096];\r\n    \t\t\tfinal long MAX_ZIP_SIZE = 5000000; \r\n    \t\t\tlong currentSize = 0;\r\n    \t\t\tint zipSplitCount = 0;\r\n    \t\t\tZipEntry zipEntry;\r\n    \t\t\tFileInputStream entryFile;\r\n    \t\t\tFile[] files = dir.listFiles();\r\n    \t\t\tfor (File file : files) {\r\n    \t\t\t\tzipEntry = new ZipEntry(basePath + file.getName());\r\n    \t\t\t\tif (file.isDirectory()) {\r\n    \t\t\t\t\tString path = basePath + file.getName() + &quot;/&quot;;\r\n    \t\t\t\t\tzout.putNextEntry(new ZipEntry(path));\r\n    \t\t\t\t\tzipSubDirectory(path, file, zout);\r\n    \t\t\t\t\tzout.closeEntry();\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tif (currentSize &gt;= MAX_ZIP_SIZE) {\r\n    \t\t\t\t\t\tzipSplitCount++;\r\n    \t\t\t\t\t\tzout.close();\r\n    \t\t\t\t\t\tzout = new ZipOutputStream(new FileOutputStream(file.getName().replace(&quot;.zip&quot;, &quot;.zip.&quot; + zipSplitCount)));\r\n    \t\t\t\t\t\tcurrentSize = 0;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tzout.putNextEntry(zipEntry);\r\n    \t\t\t\t\tFileInputStream fin = new FileInputStream(file);\r\n    \t\t\t\t\tint length;\r\n    \t\t\t\t\twhile ((length = fin.read(buffer)) &gt; 0) {\r\n    \t\t\t\t\t\tzout.write(buffer, 0, length);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tzout.closeEntry();\r\n    \t\t\t\t\tfin.close();\r\n    \t\t\t\t}\r\n    \t\t\t\tcurrentSize += zipEntry.getCompressedSize();\r\n    \t\t\t}\r\n    \r\n    \t\t}\r\n    \t}\r\n    ","title":"How to zip a file and split with a max size limit using java","body":"<p>I need to zip a 30MB file into different zip files which have a limit of 5MB per zip file.\nMy work will stop to zip after the size is larger than the limit now. I referenced and tried some examples but made me feel confused.\nPlease give me suggestions. Thank you.</p>\n<pre><code>public static void zipDirectory(File dir, File zipFile, boolean contentOnly)\n        throws IOException {\n    synchronized (syncObj) {\n        FileOutputStream fout = new FileOutputStream(zipFile);\n        ZipOutputStream zout = new ZipOutputStream(fout);\n        if (contentOnly)\n            zipSubDirectory(&quot;&quot;, dir, zout);\n        else\n            zipSubDirectory(dir.getName() + &quot;/&quot;, dir, zout);\n        zout.close();\n    }\n}\n\nprivate static void zipSubDirectory(String basePath, File dir,\n                                              ZipOutputStream zout) throws IOException {\n\n        synchronized (syncObj) {\n\n            byte[] buffer = new byte[4096];\n            final long MAX_ZIP_SIZE = 5000000; \n            long currentSize = 0;\n            int zipSplitCount = 0;\n            ZipEntry zipEntry;\n            FileInputStream entryFile;\n            File[] files = dir.listFiles();\n            for (File file : files) {\n                zipEntry = new ZipEntry(basePath + file.getName());\n                if (file.isDirectory()) {\n                    String path = basePath + file.getName() + &quot;/&quot;;\n                    zout.putNextEntry(new ZipEntry(path));\n                    zipSubDirectory(path, file, zout);\n                    zout.closeEntry();\n                } else {\n                    if (currentSize &gt;= MAX_ZIP_SIZE) {\n                        zipSplitCount++;\n                        zout.close();\n                        zout = new ZipOutputStream(new FileOutputStream(file.getName().replace(&quot;.zip&quot;, &quot;.zip.&quot; + zipSplitCount)));\n                        currentSize = 0;\n                    }\n                    zout.putNextEntry(zipEntry);\n                    FileInputStream fin = new FileInputStream(file);\n                    int length;\n                    while ((length = fin.read(buffer)) &gt; 0) {\n                        zout.write(buffer, 0, length);\n                    }\n                    zout.closeEntry();\n                    fin.close();\n                }\n                currentSize += zipEntry.getCompressedSize();\n            }\n\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","encryption","bouncycastle"],"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1676043324,"post_id":75406102,"comment_id":133063960,"body_markdown":"Are you performing tests on the same data all the time? I guess it could be a bug in the internal buffer handling, but it seems far fetched.","body":"Are you performing tests on the same data all the time? I guess it could be a bug in the internal buffer handling, but it seems far fetched."},{"owner":{"account_id":6235501,"reputation":3140,"user_id":4850949,"accept_rate":57,"display_name":"not2savvy"},"score":0,"creation_date":1676049341,"post_id":75406102,"comment_id":133065951,"body_markdown":"Did you use the same JDK? Can you post the full relevant part if your test code?","body":"Did you use the same JDK? Can you post the full relevant part if your test code?"},{"owner":{"account_id":18736751,"reputation":27,"user_id":13660931,"display_name":"Sam"},"score":0,"creation_date":1676058916,"post_id":75406102,"comment_id":133068315,"body_markdown":"I am performing test against same data but not parallel. I run both separately. Same JDK is used in both tests.","body":"I am performing test against same data but not parallel. I run both separately. Same JDK is used in both tests."}],"owner":{"account_id":18736751,"reputation":27,"user_id":13660931,"display_name":"Sam"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675998905,"creation_date":1675992044,"question_id":75406102,"body_markdown":"I just upgraded the Spring boot app. I was using bouncyCastle version 1.66 in my older app, no other bouncyCastle related dependecy.\r\n\r\n    compile (&quot;org.bouncycastle:bcpg-jdk15on:1.66&quot;)\r\n\r\nPGPUtil.getDecoderStream() works fine before but now it&#39;s returning 0&#39;s:\r\n\r\n    InputStream inputStream = PGPUtil.getDecoderStream(inputStream);\r\nbefore upgrade:\r\ninputStream &gt; buf \r\n    `[-88, 3, 80, 71, 80, -63, -64, .. +8,092 more]`\r\n\r\nafter upgrade:\r\ninputStream &gt; buf \r\n    `[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 +8,092 more]`\r\n\r\nPlease help me to resolve this issue, thanks\r\n\r\n\r\nI run the app locally and it&#39;s unable to decrypt the data","title":"BouncyCastle pulling related dependency with different versions","body":"<p>I just upgraded the Spring boot app. I was using bouncyCastle version 1.66 in my older app, no other bouncyCastle related dependecy.</p>\n<pre><code>compile (&quot;org.bouncycastle:bcpg-jdk15on:1.66&quot;)\n</code></pre>\n<p>PGPUtil.getDecoderStream() works fine before but now it's returning 0's:</p>\n<pre><code>InputStream inputStream = PGPUtil.getDecoderStream(inputStream);\n</code></pre>\n<p>before upgrade:\ninputStream &gt; buf\n<code>[-88, 3, 80, 71, 80, -63, -64, .. +8,092 more]</code></p>\n<p>after upgrade:\ninputStream &gt; buf\n<code>[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 +8,092 more]</code></p>\n<p>Please help me to resolve this issue, thanks</p>\n<p>I run the app locally and it's unable to decrypt the data</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1675995460,"post_id":75406180,"comment_id":133052743,"body_markdown":"Suggestion:  Add [gridbaglayout] tag to the question, and possibly the [swing] tag.","body":"Suggestion:  Add [gridbaglayout] tag to the question, and possibly the [swing] tag."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1675996550,"post_id":75406180,"comment_id":133052865,"body_markdown":"Also, best to post code that we can *fully* run, meaning a [mre] code post, also with additional text that tells the details of the code.","body":"Also, best to post code that we can <i>fully</i> run, meaning a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> code post, also with additional text that tells the details of the code."}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675998425,"creation_date":1675997962,"answer_id":75406516,"question_id":75406180,"body_markdown":"    c.weighty = 1;\r\n    c.gridy = 0;\r\n    panel.add(image,c);\r\n    c.gridy = 1;\r\n    panel.add(title, c);\r\n\r\nYou don&#39;t reset the &quot;weighty&quot; constraint so it is used for both components. Therefore, the &quot;extra&quot; space in the frame is allocated equally to each component. So you see the extra space between the two components. \r\n\r\nAdd a Border to each component and you will see the actual size of each component. \r\n\r\nThe solution is to assign set the &quot;weighty&quot; constraint to only the second component so the first component is displayed at its preferred size.\r\n\r\n    //c.weighty = 1;\r\n    c.gridy = 0;\r\n    panel.add(image,c);\r\n    c.gridy = 1;\r\n    c.weighty = 1;\r\n    panel.add(title, c);\r\n\r\n","title":"components are separated when they are suppose to be in succession vertically","body":"<pre><code>c.weighty = 1;\nc.gridy = 0;\npanel.add(image,c);\nc.gridy = 1;\npanel.add(title, c);\n</code></pre>\n<p>You don't reset the &quot;weighty&quot; constraint so it is used for both components. Therefore, the &quot;extra&quot; space in the frame is allocated equally to each component. So you see the extra space between the two components.</p>\n<p>Add a Border to each component and you will see the actual size of each component.</p>\n<p>The solution is to assign set the &quot;weighty&quot; constraint to only the second component so the first component is displayed at its preferred size.</p>\n<pre><code>//c.weighty = 1;\nc.gridy = 0;\npanel.add(image,c);\nc.gridy = 1;\nc.weighty = 1;\npanel.add(title, c);\n</code></pre>\n"}],"owner":{"account_id":27749219,"reputation":11,"user_id":21183973,"display_name":"PuckBoltGoldie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1675998425,"creation_date":1675993299,"question_id":75406180,"body_markdown":"I want the image and the title (JLabel) to both me centered and be at the top of the page but instead the image is at the top of the page and centered but the title is 3/4ths of the way down the page and centered.\r\n\r\n\t\tGridBagConstraints c = new GridBagConstraints();\r\n\t\tc.anchor = GridBagConstraints.NORTH;\r\n\t\tc.insets = new  Insets(10, 0, 0, 0);\r\n\t\tc.weighty = 1;\r\n\t\tc.gridy = 0;\r\n\t\tpanel.add(image,c);\r\n\t\tc.gridy = 1;\r\n\t\tpanel.add(title, c);","title":"components are separated when they are suppose to be in succession vertically","body":"<p>I want the image and the title (JLabel) to both me centered and be at the top of the page but instead the image is at the top of the page and centered but the title is 3/4ths of the way down the page and centered.</p>\n<pre><code>    GridBagConstraints c = new GridBagConstraints();\n    c.anchor = GridBagConstraints.NORTH;\n    c.insets = new  Insets(10, 0, 0, 0);\n    c.weighty = 1;\n    c.gridy = 0;\n    panel.add(image,c);\n    c.gridy = 1;\n    panel.add(title, c);\n</code></pre>\n"},{"tags":["java","jakarta-ee","memory-leaks","ejb","ejb-3.1"],"answers":[{"tags":[],"owner":{"account_id":4468566,"reputation":56,"user_id":3635428,"display_name":"Hien Nguyen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675998011,"creation_date":1675998011,"answer_id":75406523,"question_id":75406408,"body_markdown":"Your &quot;myDTO&quot; instances will be garbage collected as soon as there are no reference to them from the caller to this stateless bean. Stateless bean in general does not keep any reference to the objects created locally inside of its method. It&#39;s depend on how you use them from the caller of this method.\r\nYour code look good and should not have any issue with Out of Memory error.","title":"Do I need to clear the reference of return object from EJB Stateless Bean?","body":"<p>Your &quot;myDTO&quot; instances will be garbage collected as soon as there are no reference to them from the caller to this stateless bean. Stateless bean in general does not keep any reference to the objects created locally inside of its method. It's depend on how you use them from the caller of this method.\nYour code look good and should not have any issue with Out of Memory error.</p>\n"}],"owner":{"account_id":1249752,"reputation":357,"user_id":1210397,"accept_rate":33,"display_name":"MFH"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75406523,"answer_count":1,"score":0,"last_activity_date":1675998011,"creation_date":1675996449,"question_id":75406408,"body_markdown":"Hi I am little confused with stateless session bean&#39;s pool mechanism and internal object lifecycle. According to the spec, I understood that the container creates stateless session beans and put them in the pool. The pool may contains multiple stateless session bean instances for reusing purpose.\r\n\r\nI have read few books. Books do not say anything about clean up procedure after returning newly created object from EJB stateless bean.\r\n\r\nI have to create new instance inside the method of stateless session bean, populate the instance and return the instance to the caller. For example:\r\n\r\n    @Stateless\r\n    public class MyStatelessBean implements MyLocal{\r\n       public MyDTO myMethod(){\r\n          MyDTO myDTO = new MyDTO();\r\n          ...\r\n          ...\r\n          return myDTO;   \r\n       }\r\n     }\r\n\r\nSuppose, the MyStatelessBean.myMethod is invoked 10 times, then we have 10 myDTO instances. If I call myMethod 10 times again then the method will create 10 more myDTO instances and total will be 20 because instance of stateless bean will stay in the pool. GC may not clean up the references of myDTO instances because beans are still alive in the pool. If myMethod is call continuously, I will probably receive Out Of Memory error at one point. Is my assumption correct? Or I do not need to clear the reference of returned object in the caller class?\r\n\r\n\r\n\r\n","title":"Do I need to clear the reference of return object from EJB Stateless Bean?","body":"<p>Hi I am little confused with stateless session bean's pool mechanism and internal object lifecycle. According to the spec, I understood that the container creates stateless session beans and put them in the pool. The pool may contains multiple stateless session bean instances for reusing purpose.</p>\n<p>I have read few books. Books do not say anything about clean up procedure after returning newly created object from EJB stateless bean.</p>\n<p>I have to create new instance inside the method of stateless session bean, populate the instance and return the instance to the caller. For example:</p>\n<pre><code>@Stateless\npublic class MyStatelessBean implements MyLocal{\n   public MyDTO myMethod(){\n      MyDTO myDTO = new MyDTO();\n      ...\n      ...\n      return myDTO;   \n   }\n }\n</code></pre>\n<p>Suppose, the MyStatelessBean.myMethod is invoked 10 times, then we have 10 myDTO instances. If I call myMethod 10 times again then the method will create 10 more myDTO instances and total will be 20 because instance of stateless bean will stay in the pool. GC may not clean up the references of myDTO instances because beans are still alive in the pool. If myMethod is call continuously, I will probably receive Out Of Memory error at one point. Is my assumption correct? Or I do not need to clear the reference of returned object in the caller class?</p>\n"},{"tags":["java","spring","spring-boot","maven","jar"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1656570811,"post_id":72808261,"comment_id":128606194,"body_markdown":"You are using profiles, do you by any change have the maven jar plugin configured as well? Or another `spring-boot-maven-plugin` in the regular build section? In short it appears that there is too little information here, please add your full build file. And try with Spring Boot 2.7.1 (which was released a while ago).","body":"You are using profiles, do you by any change have the maven jar plugin configured as well? Or another <code>spring-boot-maven-plugin</code> in the regular build section? In short it appears that there is too little information here, please add your full build file. And try with Spring Boot 2.7.1 (which was released a while ago)."}],"answers":[{"tags":[],"owner":{"account_id":7633746,"reputation":1,"user_id":5787929,"display_name":"qing-hao liang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675997976,"creation_date":1675997924,"answer_id":75406512,"question_id":72808261,"body_markdown":"Please generate the Maven effective POM and search for repackage, you can find two executions with repackage goal but different execution id, which means repackage will be executed twice thus those spring boot classes will be packaged 2 times. During the second execution, it will treat those spring boot classes added by the first run as normal application classes and adds them into BOOT-INF/classes.\r\n\r\nThis shouldn&#39;t happen if you use spring-boot-starter-parent version 2.1.0 or later, the repackage id was pre-defined since version 2.1.0. The goal will be run only once because you refer the same id in your POM. Before version 2.1.0, there&#39;s a repackage goal pre-configured but no repackage id configured, therefore 2 repackage goals will be run in 2 executions.\r\n\r\nConsidering that you&#39;re using 2.7.0, likely some dependency in your POM introduced the extra repackage goal but with a different execution id.\r\n\r\nYou can refer Spring Boot Maven plugin document https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#packaging\r\n ","title":"Spring repackage is adding a duplicate copy of all spring jars in BOOT-INF/classes","body":"<p>Please generate the Maven effective POM and search for repackage, you can find two executions with repackage goal but different execution id, which means repackage will be executed twice thus those spring boot classes will be packaged 2 times. During the second execution, it will treat those spring boot classes added by the first run as normal application classes and adds them into BOOT-INF/classes.</p>\n<p>This shouldn't happen if you use spring-boot-starter-parent version 2.1.0 or later, the repackage id was pre-defined since version 2.1.0. The goal will be run only once because you refer the same id in your POM. Before version 2.1.0, there's a repackage goal pre-configured but no repackage id configured, therefore 2 repackage goals will be run in 2 executions.</p>\n<p>Considering that you're using 2.7.0, likely some dependency in your POM introduced the extra repackage goal but with a different execution id.</p>\n<p>You can refer Spring Boot Maven plugin document <a href=\"https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#packaging\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#packaging</a></p>\n"}],"owner":{"account_id":3600664,"reputation":2545,"user_id":3004041,"accept_rate":34,"display_name":"covfefe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675997976,"creation_date":1656539596,"question_id":72808261,"body_markdown":"I recently upgraded my project to `spring-boot` version 2.7.0. After this upgrade, when I run the jar of my maven profile, it gives me an `invocationTargetException`:\r\n\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n            at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:498)\r\n            at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\r\n            at org.springframework.boot.loader.Launcher.launch(Launcher.java:108)\r\n            at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\r\n            at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\r\n\r\nI noticed that my built jar now contained a duplicate copy of all `org/springframework/boot/loader/` libraries inside the `BOOT-INF/classes` directory. This is what I see when I look inside the jar file by running `jar tvf jarfile`:\r\n\r\n\r\n    0 Wed Jun 29 20:06:28 PDT 2022 META-INF/\r\n       492 Wed Jun 29 20:06:28 PDT 2022 META-INF/MANIFEST.MF\r\n         0 Fri Feb 01 00:00:00 PST 1980 org/\r\n         0 Fri Feb 01 00:00:00 PST 1980 org/springframework/\r\n         0 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/\r\n         0 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/loader/\r\n      5871 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/loader/ClassPathIndexFile.class\r\n      7675 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/loader/ExecutableArchiveLauncher.class\r\n      2551 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/loader/JarLauncher.class\r\n      1483 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/loader/LaunchedURLClassLoader$DefinePackageCallType.class\r\n      1535 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/loader/LaunchedURLClassLoader$UseFastConnectionExceptionsEnumeration.class\r\n     11154 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/loader/LaunchedURLClassLoader.class\r\n      5932 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/loader/Launcher.class\r\n    \r\n    ...\r\n    \r\n         0 Wed Jun 29 20:06:28 PDT 2022 BOOT-INF/\r\n         0 Wed Jun 29 20:06:28 PDT 2022 BOOT-INF/classes/\r\n         0 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/\r\n         0 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/\r\n         0 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/\r\n         0 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/loader/\r\n      5871 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/loader/ClassPathIndexFile.class\r\n      7675 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/loader/ExecutableArchiveLauncher.class\r\n      2551 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/loader/JarLauncher.class\r\n      1483 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/loader/LaunchedURLClassLoader$DefinePackageCallType.class\r\n      1535 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/loader/LaunchedURLClassLoader$UseFastConnectionExceptionsEnumeration.class\r\n     11154 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/loader/LaunchedURLClassLoader.class\r\n      5932 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/loader/Launcher.class\r\n\r\n\r\nIn my `pom.xml`, I have a repackage step for a particular profile:\r\n\r\n    &lt;profile&gt;\r\n                &lt;id&gt;profileName&lt;/id&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;executions&gt;\r\n                      &lt;execution&gt;\r\n                        &lt;id&gt;repackage&lt;/id&gt;\r\n                        &lt;configuration&gt;\r\n                           &lt;classifier&gt;someName&lt;/classifier&gt;\r\n                        &lt;/configuration&gt;\r\n                      &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n    &lt;/profile&gt;\r\n\r\nThis profile gives me the corrupted jar. Before the spring upgrade, it was working even with the repackage step so something must have changed. How can I avoid the duplicate spring boot libraries in my jar?\r\n","title":"Spring repackage is adding a duplicate copy of all spring jars in BOOT-INF/classes","body":"<p>I recently upgraded my project to <code>spring-boot</code> version 2.7.0. After this upgrade, when I run the jar of my maven profile, it gives me an <code>invocationTargetException</code>:</p>\n<pre><code>Caused by: java.lang.reflect.InvocationTargetException\n        at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:108)\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\n</code></pre>\n<p>I noticed that my built jar now contained a duplicate copy of all <code>org/springframework/boot/loader/</code> libraries inside the <code>BOOT-INF/classes</code> directory. This is what I see when I look inside the jar file by running <code>jar tvf jarfile</code>:</p>\n<pre><code>0 Wed Jun 29 20:06:28 PDT 2022 META-INF/\n   492 Wed Jun 29 20:06:28 PDT 2022 META-INF/MANIFEST.MF\n     0 Fri Feb 01 00:00:00 PST 1980 org/\n     0 Fri Feb 01 00:00:00 PST 1980 org/springframework/\n     0 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/\n     0 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/loader/\n  5871 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/loader/ClassPathIndexFile.class\n  7675 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/loader/ExecutableArchiveLauncher.class\n  2551 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/loader/JarLauncher.class\n  1483 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/loader/LaunchedURLClassLoader$DefinePackageCallType.class\n  1535 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/loader/LaunchedURLClassLoader$UseFastConnectionExceptionsEnumeration.class\n 11154 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/loader/LaunchedURLClassLoader.class\n  5932 Fri Feb 01 00:00:00 PST 1980 org/springframework/boot/loader/Launcher.class\n\n...\n\n     0 Wed Jun 29 20:06:28 PDT 2022 BOOT-INF/\n     0 Wed Jun 29 20:06:28 PDT 2022 BOOT-INF/classes/\n     0 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/\n     0 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/\n     0 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/\n     0 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/loader/\n  5871 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/loader/ClassPathIndexFile.class\n  7675 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/loader/ExecutableArchiveLauncher.class\n  2551 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/loader/JarLauncher.class\n  1483 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/loader/LaunchedURLClassLoader$DefinePackageCallType.class\n  1535 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/loader/LaunchedURLClassLoader$UseFastConnectionExceptionsEnumeration.class\n 11154 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/loader/LaunchedURLClassLoader.class\n  5932 Fri Feb 01 00:00:00 PST 1980 BOOT-INF/classes/org/springframework/boot/loader/Launcher.class\n</code></pre>\n<p>In my <code>pom.xml</code>, I have a repackage step for a particular profile:</p>\n<pre><code>&lt;profile&gt;\n            &lt;id&gt;profileName&lt;/id&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                  &lt;execution&gt;\n                    &lt;id&gt;repackage&lt;/id&gt;\n                    &lt;configuration&gt;\n                       &lt;classifier&gt;someName&lt;/classifier&gt;\n                    &lt;/configuration&gt;\n                  &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n&lt;/profile&gt;\n</code></pre>\n<p>This profile gives me the corrupted jar. Before the spring upgrade, it was working even with the repackage step so something must have changed. How can I avoid the duplicate spring boot libraries in my jar?</p>\n"},{"tags":["java","perforce","perforce-integrate"],"comments":[{"owner":{"account_id":4694586,"reputation":68750,"user_id":3799759,"display_name":"Samwise"},"score":0,"creation_date":1676039879,"post_id":75406515,"comment_id":133062867,"body_markdown":"Global options are implemented by the client, not the server.  The various client APIs all have API functions that implement the features provided by global options in the CLI -- in this case `setUserName` takes the place of the `-u` global option.","body":"Global options are implemented by the client, not the server.  The various client APIs all have API functions that implement the features provided by global options in the CLI -- in this case <code>setUserName</code> takes the place of the <code>-u</code> global option."}],"owner":{"account_id":7119088,"reputation":95,"user_id":5444294,"accept_rate":40,"display_name":"Cuong Nguyen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1676039916,"answer_count":0,"score":0,"last_activity_date":1675997944,"creation_date":1675997944,"question_id":75406515,"body_markdown":"I want to execute a command to perforce server from java application, but there is no API support adding global value\r\n- Command to get all files from specific workspace `p4 -c P4CLIENT files //P4CLIENT/...@123456`\r\n- Current solution to execute a p4 cmd **WITHOUT** global value as below:\r\n```\r\nIOptionsServer server = ServerFactory.getOptionsServer(uri, defaultProps);\r\nserver.connect();\r\nserver.setUserName(username);\r\nserver.login(password);\r\n\r\nserver.execMapCmd(String string, String[] strings, Map&lt;String, Object&gt; map) \r\n\r\n```\r\nIs there anyway or other API can usse option `-c P4CLIENT`?","title":"How to execute command line with perforce java that included global options","body":"<p>I want to execute a command to perforce server from java application, but there is no API support adding global value</p>\n<ul>\n<li>Command to get all files from specific workspace <code>p4 -c P4CLIENT files //P4CLIENT/...@123456</code></li>\n<li>Current solution to execute a p4 cmd <strong>WITHOUT</strong> global value as below:</li>\n</ul>\n<pre><code>IOptionsServer server = ServerFactory.getOptionsServer(uri, defaultProps);\nserver.connect();\nserver.setUserName(username);\nserver.login(password);\n\nserver.execMapCmd(String string, String[] strings, Map&lt;String, Object&gt; map) \n\n</code></pre>\n<p>Is there anyway or other API can usse option <code>-c P4CLIENT</code>?</p>\n"},{"tags":["java","inheritance","dependency-injection","cdi","quarkus"],"comments":[{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":0,"creation_date":1676007366,"post_id":75406452,"comment_id":133054249,"body_markdown":"*&quot;I tried creating a public constructor method [...] I do not want to allow that class to be instantiated without receiving a repository&quot;*. According to the CDI spec, the no parameters constructor must be there but it is sufficient to be non-private (See &quot;Unproxyable bean types&quot; in CDI spec). Try adding the constructor as above, but making its visibility package-private.","body":"<i>&quot;I tried creating a public constructor method [...] I do not want to allow that class to be instantiated without receiving a repository&quot;</i>. According to the CDI spec, the no parameters constructor must be there but it is sufficient to be non-private (See &quot;Unproxyable bean types&quot; in CDI spec). Try adding the constructor as above, but making its visibility package-private."},{"owner":{"account_id":385127,"reputation":6284,"user_id":742081,"display_name":"Ladicek"},"score":1,"creation_date":1676016624,"post_id":75406452,"comment_id":133055888,"body_markdown":"Do you need the bean to be `@ApplicationScoped`? If `@Singleton` is fine for you (see here for differences: https://quarkus.io/guides/cdi#applicationscoped-and-singleton-look-very-similar-which-one-should-i-choose-for-my-quarkus-application), you can use that. `@Singleton` is not a normal scope and so doesn&#39;t require a zero-parameter constructor.","body":"Do you need the bean to be <code>@ApplicationScoped</code>? If <code>@Singleton</code> is fine for you (see here for differences: <a href=\"https://quarkus.io/guides/cdi#applicationscoped-and-singleton-look-very-similar-which-one-should-i-choose-for-my-quarkus-application\" rel=\"nofollow noreferrer\">quarkus.io/guides/&hellip;</a>), you can use that. <code>@Singleton</code> is not a normal scope and so doesn&#39;t require a zero-parameter constructor."},{"owner":{"account_id":6963528,"reputation":6523,"user_id":5342297,"display_name":"Siliarus"},"score":2,"creation_date":1676026739,"post_id":75406452,"comment_id":133058828,"body_markdown":"`@Singleton` is definitely an option, in majority of cases you needn&#39;t differentiate between having and not having client proxy in place. Otherwise, according to CDI spec, you need to have a no-arg constructor for any beans requiring client proxy. The workaround Quarkus does with generating one for you is only (currently) for a simple scenario without inheritance - it doesn&#39;t inspect/change the whole hierarchy,","body":"<code>@Singleton</code> is definitely an option, in majority of cases you needn&#39;t differentiate between having and not having client proxy in place. Otherwise, according to CDI spec, you need to have a no-arg constructor for any beans requiring client proxy. The workaround Quarkus does with generating one for you is only (currently) for a simple scenario without inheritance - it doesn&#39;t inspect/change the whole hierarchy,"},{"owner":{"account_id":9749450,"reputation":15,"user_id":7228219,"display_name":"Rafael F N Xavier"},"score":0,"creation_date":1676084986,"post_id":75406452,"comment_id":133072251,"body_markdown":"I would like to express my gratitude to everyone for their comments. Thanks to them, I now have a clearer understanding of all the ways to solve my problem. I&#39;ll be following the suggestions of both Ladicek and Siliarus and incorporating the use of @Singleton in this case.","body":"I would like to express my gratitude to everyone for their comments. Thanks to them, I now have a clearer understanding of all the ways to solve my problem. I&#39;ll be following the suggestions of both Ladicek and Siliarus and incorporating the use of @Singleton in this case."}],"owner":{"account_id":9749450,"reputation":15,"user_id":7228219,"display_name":"Rafael F N Xavier"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":905,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675997232,"creation_date":1675997154,"question_id":75406452,"body_markdown":"I am attempting to implement dependency injection in a class that is inherited from a base abstract class, and I get the following error: *&quot;**javax.enterprise.inject.spi.DeploymentException**: It&#39;s not possible to automatically add a synthetic no-args constructor to an unproxyable bean class. You need to manually add a non-private no-args constructor to com...ExampleIntegrationProvider in order to fulfill the requirements for normal scoped/intercepted/decorated beans.&quot;*\r\n\r\nFrom what I researched, it seems that this happens because classes that are annotated with normal scoped beans such as `@ApplicationScoped` for example, need a non-private constructor without arguments, so that CDI can create a proxy of that class when it is injected in **lazy** mode. I was a bit surprised to find out, as I&#39;ve never had problems with code like this:\r\n  \r\n\r\n\r\n```java\r\n@ApplicationScoped\r\npublic class UserService {\r\n\r\n    private final UserRepository userRepository;\r\n\r\n    @Inject\r\n    public UserUseCase(UserRepository userRepository) {\r\n        this.userRepository = userRepository;\r\n    }\r\n\r\n    public User findById(long id) { ... }\r\n}\r\n```\r\n  \r\n\r\nEven though Quarkus magically adds a synthetic no-args constructor, how could it overcome the **final** field *UserRepository*? There would be a problem with its initialization  as it needs to receive a value, I imagine it might end up being passed a null value..\r\n\r\nAnyway, going straight to my case, here&#39;s an example of my current situation, with 3 important base classes and 1 implementation for a &quot;Example&quot; partner:\r\n  \r\n\r\n**PartnerIntegration.java**\r\n```java\r\n@MappedSuperclass\r\npublic abstract class PartnerIntegration {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n\r\n     // other common fields ...\r\n}\r\n```\r\n  \r\n\r\n**PartnerIntegrationRepository.java**\r\n```java\r\npublic interface PartnerIntegrationRepository&lt;I extends PartnerIntegration&gt; extends PanacheRepository&lt;I&gt; {\r\n    // common methods ...\r\n}\r\n```\r\n  \r\n\r\n**PartnerIntegrationProvider.java**\r\n```java\r\npublic abstract class PartnerIntegrationProvider&lt;I extends PartnerIntegration&gt; {\r\n\r\n    protected final PartnerIntegrationRepository&lt;I&gt; partnerIntegrationRepository;\r\n\r\n    protected PartnerIntegrationProvider(PartnerIntegrationRepository&lt;I&gt; partnerIntegrationRepository) {\r\n        this.partnerIntegrationRepository = partnerIntegrationRepository;\r\n    }\r\n\r\n    // code ...\r\n}\r\n```\r\n  \r\n\r\nAnd finally the final implementation **ExampleIntegrationProvider.java**:\r\n```java\r\n@ApplicationScoped\r\npublic class ExampleIntegrationProvider extends PartnerIntegrationProvider&lt;ExampleIntegration&gt; {\r\n\r\n    @Inject\r\n    public ExampleIntegrationProvider(ExampleIntegrationRepository  exampleIntegrationRepository) {\r\n        super(exampleIntegrationRepository);\r\n    }\r\n\r\n    // code ...\r\n}\r\n```\r\n  \r\n\r\nThe abstract class `PartnerIntegrationProvider` is not annotated with any scope as I did not consider it necessary since it only receives the `PartnerIntegrationRepository` interface and not a concrete repository. But `ExampleIntegrationProvider` receives a concrete repository that is implementing that interface, so I annotated it with `@ApplicationScoped` to be able to inject the concrete repository with `@Inject`. But this generated that error.\r\n\r\nI tried creating a public constructor method that passes the null parameter to the parent class, and the error disappeared, but this ends up polluting my code, since I do not want to allow that class to be instantiated without receiving a repository, so I removed the `@ApplicationScoped` and `@Inject` annotations from `ExampleIntegrationProvider` and created that class to produce the instance that will be injected from it:\r\n\r\n**ExampleIntegrationProviderBean.java**\r\n```java\r\n@Dependent\r\npublic class ExampleIntegrationProviderBean {\r\n\r\n    private static ExampleIntegrationProvider INSTANCE;\r\n\r\n    private final ExampleIntegrationRepository exampleIntegrationRepository;\r\n\r\n    @Inject\r\n    public ExampleIntegrationProviderBean(ExampleIntegrationRepository exampleIntegrationRepository) {\r\n        this.exampleIntegrationRepository = exampleIntegrationRepository;\r\n    }\r\n\r\n    @Produces\r\n    public ExampleIntegrationProvider exampleIntegrationProvider() {\r\n        return INSTANCE == null ?\r\n                (INSTANCE = new ExampleIntegrationProvider(exampleIntegrationRepository)) : INSTANCE;\r\n    }\r\n}\r\n```\r\n\r\nBut the number of partners may grow quickly, I wouldn&#39;t like to have to create other classes like this one to produce the instances, and even if it was just one partner, it doesn&#39;t seem like a very elegant solution...\r\n\r\nDoes anyone have any ideas on how I can resolve this in a better way?","title":"Error with Quarkus CDI, Injection of inherited class","body":"<p>I am attempting to implement dependency injection in a class that is inherited from a base abstract class, and I get the following error: <em>&quot;<strong>javax.enterprise.inject.spi.DeploymentException</strong>: It's not possible to automatically add a synthetic no-args constructor to an unproxyable bean class. You need to manually add a non-private no-args constructor to com...ExampleIntegrationProvider in order to fulfill the requirements for normal scoped/intercepted/decorated beans.&quot;</em></p>\n<p>From what I researched, it seems that this happens because classes that are annotated with normal scoped beans such as <code>@ApplicationScoped</code> for example, need a non-private constructor without arguments, so that CDI can create a proxy of that class when it is injected in <strong>lazy</strong> mode. I was a bit surprised to find out, as I've never had problems with code like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ApplicationScoped\npublic class UserService {\n\n    private final UserRepository userRepository;\n\n    @Inject\n    public UserUseCase(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    public User findById(long id) { ... }\n}\n</code></pre>\n<p>Even though Quarkus magically adds a synthetic no-args constructor, how could it overcome the <strong>final</strong> field <em>UserRepository</em>? There would be a problem with its initialization  as it needs to receive a value, I imagine it might end up being passed a null value..</p>\n<p>Anyway, going straight to my case, here's an example of my current situation, with 3 important base classes and 1 implementation for a &quot;Example&quot; partner:</p>\n<p><strong>PartnerIntegration.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@MappedSuperclass\npublic abstract class PartnerIntegration {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n     // other common fields ...\n}\n</code></pre>\n<p><strong>PartnerIntegrationRepository.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface PartnerIntegrationRepository&lt;I extends PartnerIntegration&gt; extends PanacheRepository&lt;I&gt; {\n    // common methods ...\n}\n</code></pre>\n<p><strong>PartnerIntegrationProvider.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class PartnerIntegrationProvider&lt;I extends PartnerIntegration&gt; {\n\n    protected final PartnerIntegrationRepository&lt;I&gt; partnerIntegrationRepository;\n\n    protected PartnerIntegrationProvider(PartnerIntegrationRepository&lt;I&gt; partnerIntegrationRepository) {\n        this.partnerIntegrationRepository = partnerIntegrationRepository;\n    }\n\n    // code ...\n}\n</code></pre>\n<p>And finally the final implementation <strong>ExampleIntegrationProvider.java</strong>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ApplicationScoped\npublic class ExampleIntegrationProvider extends PartnerIntegrationProvider&lt;ExampleIntegration&gt; {\n\n    @Inject\n    public ExampleIntegrationProvider(ExampleIntegrationRepository  exampleIntegrationRepository) {\n        super(exampleIntegrationRepository);\n    }\n\n    // code ...\n}\n</code></pre>\n<p>The abstract class <code>PartnerIntegrationProvider</code> is not annotated with any scope as I did not consider it necessary since it only receives the <code>PartnerIntegrationRepository</code> interface and not a concrete repository. But <code>ExampleIntegrationProvider</code> receives a concrete repository that is implementing that interface, so I annotated it with <code>@ApplicationScoped</code> to be able to inject the concrete repository with <code>@Inject</code>. But this generated that error.</p>\n<p>I tried creating a public constructor method that passes the null parameter to the parent class, and the error disappeared, but this ends up polluting my code, since I do not want to allow that class to be instantiated without receiving a repository, so I removed the <code>@ApplicationScoped</code> and <code>@Inject</code> annotations from <code>ExampleIntegrationProvider</code> and created that class to produce the instance that will be injected from it:</p>\n<p><strong>ExampleIntegrationProviderBean.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Dependent\npublic class ExampleIntegrationProviderBean {\n\n    private static ExampleIntegrationProvider INSTANCE;\n\n    private final ExampleIntegrationRepository exampleIntegrationRepository;\n\n    @Inject\n    public ExampleIntegrationProviderBean(ExampleIntegrationRepository exampleIntegrationRepository) {\n        this.exampleIntegrationRepository = exampleIntegrationRepository;\n    }\n\n    @Produces\n    public ExampleIntegrationProvider exampleIntegrationProvider() {\n        return INSTANCE == null ?\n                (INSTANCE = new ExampleIntegrationProvider(exampleIntegrationRepository)) : INSTANCE;\n    }\n}\n</code></pre>\n<p>But the number of partners may grow quickly, I wouldn't like to have to create other classes like this one to produce the instances, and even if it was just one partner, it doesn't seem like a very elegant solution...</p>\n<p>Does anyone have any ideas on how I can resolve this in a better way?</p>\n"},{"tags":["java","spring","transactions"],"answers":[{"tags":[],"owner":{"account_id":1474276,"reputation":4564,"user_id":1385087,"display_name":"Konstantin V. Salikhov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1418209858,"creation_date":1418209392,"answer_id":27399380,"question_id":27397911,"body_markdown":"Actually you can look at the sources of [JdbcTemplate][1].\r\n\r\nYou can see there that it doesn&#39;t get connections directly from datasource but does `Connection con = DataSourceUtils.getConnection(getDataSource());` instead.\r\n\r\nThese [DataSourceUtils][2] are responsible for getting current transaction connection from Spring thread-local [connection holder][3] or instantiation of new Connection from DataSource and registering it in the holder if it was first request in transaction for example.\r\n\r\nP.S. And you [can&#39;t][4] get single transaction running across multiple threads with Spring transaction mechanism in any easy way.\r\n\r\n\r\n  [1]: http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-jdbc/3.0.1.RELEASE/org/springframework/jdbc/core/JdbcTemplate.java\r\n  [2]: http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-jdbc/3.0.1.RELEASE/org/springframework/jdbc/datasource/DataSourceUtils.java#DataSourceUtils\r\n  [3]: http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-jdbc/3.0.1.RELEASE/org/springframework/jdbc/datasource/ConnectionHolder.java#ConnectionHolder\r\n  [4]: https://stackoverflow.com/questions/10407301/how-to-use-spring-transaction-in-multithread","title":"Java Spring transaction management","body":"<p>Actually you can look at the sources of <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-jdbc/3.0.1.RELEASE/org/springframework/jdbc/core/JdbcTemplate.java\" rel=\"nofollow noreferrer\">JdbcTemplate</a>.</p>\n\n<p>You can see there that it doesn't get connections directly from datasource but does <code>Connection con = DataSourceUtils.getConnection(getDataSource());</code> instead.</p>\n\n<p>These <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-jdbc/3.0.1.RELEASE/org/springframework/jdbc/datasource/DataSourceUtils.java#DataSourceUtils\" rel=\"nofollow noreferrer\">DataSourceUtils</a> are responsible for getting current transaction connection from Spring thread-local <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-jdbc/3.0.1.RELEASE/org/springframework/jdbc/datasource/ConnectionHolder.java#ConnectionHolder\" rel=\"nofollow noreferrer\">connection holder</a> or instantiation of new Connection from DataSource and registering it in the holder if it was first request in transaction for example.</p>\n\n<p>P.S. And you <a href=\"https://stackoverflow.com/questions/10407301/how-to-use-spring-transaction-in-multithread\">can't</a> get single transaction running across multiple threads with Spring transaction mechanism in any easy way.</p>\n"}],"owner":{"account_id":1577239,"reputation":63,"user_id":1463382,"display_name":"user1463382"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1094,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":27399380,"answer_count":1,"score":4,"last_activity_date":1675996808,"creation_date":1418205226,"question_id":27397911,"body_markdown":"Please excuse if this or similar question has been asked before. I&#39;m a novice to Spring. My question is how comes that transaction manager and JdbcTemplate are using the same DB connection. In all the documenation and books I could lay my hands on it&#39; said that both beans (transaction manager and JDBC template) are given a data source. Let it be Apache Commons BasicDataSource. As far as I understand, both objects when instantiated will call method getConnection() of the data source and will be given different connections. After that JDBC template&#39;s update will be performed on one connection while transaction manager&#39;s commit on another. Definitely no transactional behavior will occur.\r\n\r\nWhere am I wrong?\r\n\r\nActually my program is a bit more complicated. It is multithreaded and it manages a connection pool. Initially each thread gets &quot;connection&quot; (actually JdbcTemplate object) and then uses it until termination. During its life it performs a series of database update &quot;batches&quot; which must be transactional. But attempt to use @Transactional annotation fails - if there are two insert operations in a batch and the second one fails, then the first one is not rolled back.\r\n\r\nBoth DataSourceTransactionManager and JdbcTemplate refer to the same BasicDataSource in beans.xml.\r\n\r\nIt&#39;s obvious that somewhere I&#39;m terribly wrong in my understanding oа transaction management mecahism in Spring because other people use it happily. But where indeed?","title":"Java Spring transaction management","body":"<p>Please excuse if this or similar question has been asked before. I'm a novice to Spring. My question is how comes that transaction manager and JdbcTemplate are using the same DB connection. In all the documenation and books I could lay my hands on it' said that both beans (transaction manager and JDBC template) are given a data source. Let it be Apache Commons BasicDataSource. As far as I understand, both objects when instantiated will call method getConnection() of the data source and will be given different connections. After that JDBC template's update will be performed on one connection while transaction manager's commit on another. Definitely no transactional behavior will occur.</p>\n\n<p>Where am I wrong?</p>\n\n<p>Actually my program is a bit more complicated. It is multithreaded and it manages a connection pool. Initially each thread gets \"connection\" (actually JdbcTemplate object) and then uses it until termination. During its life it performs a series of database update \"batches\" which must be transactional. But attempt to use @Transactional annotation fails - if there are two insert operations in a batch and the second one fails, then the first one is not rolled back.</p>\n\n<p>Both DataSourceTransactionManager and JdbcTemplate refer to the same BasicDataSource in beans.xml.</p>\n\n<p>It's obvious that somewhere I'm terribly wrong in my understanding oа transaction management mecahism in Spring because other people use it happily. But where indeed?</p>\n"},{"tags":["java","jvm","instrumentation","javaagents"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1675964547,"post_id":75398646,"comment_id":133045957,"body_markdown":"If your transformer throws, the instrumentation API will silently discard the exception.","body":"If your transformer throws, the instrumentation API will silently discard the exception."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":1,"creation_date":1675964703,"post_id":75398646,"comment_id":133046002,"body_markdown":"Also, you use the ASM Api in an unsupported way: `visitCode` has to be called before `visitFieldInsn`. You call it after, which may or may not result in problems. And... depending on other factors, there might not be enough stack space in the target method - so pass `ClassWriter.COMPUTE_MAX` to the `ClassWriter` constructor.","body":"Also, you use the ASM Api in an unsupported way: <code>visitCode</code> has to be called before <code>visitFieldInsn</code>. You call it after, which may or may not result in problems. And... depending on other factors, there might not be enough stack space in the target method - so pass <code>ClassWriter.COMPUTE_MAX</code> to the <code>ClassWriter</code> constructor."},{"owner":{"account_id":20261253,"reputation":373,"user_id":14859549,"display_name":"Frank Yang"},"score":0,"creation_date":1675997207,"post_id":75398646,"comment_id":133052959,"body_markdown":"@JohannesKuhn Thanks for pointing out the problem with the ASM Api usage. I had a look at the source code and indeed, the internal implementation catches the exception thrown by the transformer and ignores it, but in my case the transformer won&#39;t throw. The doc says `retransformClasses` will throw a exception if the transformer returns malformed bytecode, but when my transformer just returns something like `new byte[0]`, nothing happens. Why?","body":"@JohannesKuhn Thanks for pointing out the problem with the ASM Api usage. I had a look at the source code and indeed, the internal implementation catches the exception thrown by the transformer and ignores it, but in my case the transformer won&#39;t throw. The doc says <code>retransformClasses</code> will throw a exception if the transformer returns malformed bytecode, but when my transformer just returns something like <code>new byte[0]</code>, nothing happens. Why?"}],"owner":{"account_id":20261253,"reputation":373,"user_id":14859549,"display_name":"Frank Yang"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675996726,"creation_date":1675945916,"question_id":75398646,"body_markdown":"I&#39;m trying to retransform classes with java instrumentation. The code below runs just fine, it prints `Hello World!!`. \r\n\r\n```java\r\npublic class Main {\r\n    public static void main(String[] args) throws Throwable {\r\n        var inst = MyAgent.getInstrumentation();\r\n        inst.addTransformer(new ClassFileTransformer() {\r\n            @Override\r\n            public byte[] transform(ClassLoader loader, String name, Class&lt;?&gt; c, ProtectionDomain pd, byte[] b) {\r\n                if (c != Main.class) return null;\r\n                var cr = new ClassReader(b);\r\n                var cw = new ClassWriter(cr, ClassWriter.COMPUTE_MAXS);\r\n                cr.accept(new ClassVisitor(ASM9, cw) {\r\n                    @Override\r\n                    public MethodVisitor visitMethod(int acc, String name, String desc, String sig, String[] exc) {\r\n                        var mv = super.visitMethod(acc, name, desc, sig, exc);\r\n                        if (&quot;foo&quot;.equals(name)) {\r\n                            return new MethodVisitor(ASM9, mv) {\r\n                                @Override\r\n                                public void visitCode() {\r\n                                    super.visitCode();\r\n                                    visitFieldInsn(GETSTATIC, &quot;java/lang/System&quot;, &quot;out&quot;, &quot;Ljava/io/PrintStream;&quot;);\r\n                                    visitLdcInsn(&quot;Hello &quot;);\r\n                                    visitMethodInsn(INVOKEVIRTUAL, &quot;java/io/PrintStream&quot;, &quot;print&quot;, &quot;(Ljava/lang/String;)V&quot;, false);\r\n                                }\r\n                            };\r\n                        }\r\n                        return mv;\r\n                    }\r\n                }, 0);\r\n                return cw.toByteArray();\r\n            }\r\n        }, true);\r\n        inst.retransformClasses(Main.class);\r\n        foo();\r\n    }\r\n\r\n    public static void foo() {\r\n        System.out.println(&quot;World!!&quot;);\r\n    }\r\n}\r\n```\r\n\r\nHowever, when the `ClassFileTranformer` returns invalid bytecode, or when it just returns `new byte[0]`, the retransformation fails silently. No exceptions are thrown and no changes are done. According to the official [documentation][1], if invalid bytes are provided, the method should throw a exception. The doc says:\r\n&gt; The class file bytes are not checked, verified and installed until after the transformations have been applied, if the resultant bytes are in error this method will throw an exception.\r\n\r\nUsing the instrumentation object outside the java agent doesn&#39;t seem to be a problem, I tried to put the retransformation code in the agent and the behaviours are exactly the same. I&#39;m using GraalVM EE (the version is shown below). I tried OpenJDK as well and it still fails silently.\r\n\r\n```\r\njava version &quot;17.0.6&quot; 2023-01-17 LTS\r\nJava(TM) SE Runtime Environment GraalVM EE 22.3.1 (build 17.0.6+9-LTS-jvmci-22.3-b11)\r\nJava HotSpot(TM) 64-Bit Server VM GraalVM EE 22.3.1 (build 17.0.6+9-LTS-jvmci-22.3-b11, mixed mode, sharing)\r\n```\r\n\r\nWhy it fails silently? Is it because I&#39;m using instrumentation in a wrong way? How can I get a exception when the bytecode is malformed? Thanks in advance.\r\n\r\n(Thanks to Johannes Kuhn, corrected the unsupported use of ASM Api)\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.instrument/java/lang/instrument/Instrumentation.html#retransformClasses(java.lang.Class...)","title":"Why would retransformClasses fail silently?","body":"<p>I'm trying to retransform classes with java instrumentation. The code below runs just fine, it prints <code>Hello World!!</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n    public static void main(String[] args) throws Throwable {\n        var inst = MyAgent.getInstrumentation();\n        inst.addTransformer(new ClassFileTransformer() {\n            @Override\n            public byte[] transform(ClassLoader loader, String name, Class&lt;?&gt; c, ProtectionDomain pd, byte[] b) {\n                if (c != Main.class) return null;\n                var cr = new ClassReader(b);\n                var cw = new ClassWriter(cr, ClassWriter.COMPUTE_MAXS);\n                cr.accept(new ClassVisitor(ASM9, cw) {\n                    @Override\n                    public MethodVisitor visitMethod(int acc, String name, String desc, String sig, String[] exc) {\n                        var mv = super.visitMethod(acc, name, desc, sig, exc);\n                        if (&quot;foo&quot;.equals(name)) {\n                            return new MethodVisitor(ASM9, mv) {\n                                @Override\n                                public void visitCode() {\n                                    super.visitCode();\n                                    visitFieldInsn(GETSTATIC, &quot;java/lang/System&quot;, &quot;out&quot;, &quot;Ljava/io/PrintStream;&quot;);\n                                    visitLdcInsn(&quot;Hello &quot;);\n                                    visitMethodInsn(INVOKEVIRTUAL, &quot;java/io/PrintStream&quot;, &quot;print&quot;, &quot;(Ljava/lang/String;)V&quot;, false);\n                                }\n                            };\n                        }\n                        return mv;\n                    }\n                }, 0);\n                return cw.toByteArray();\n            }\n        }, true);\n        inst.retransformClasses(Main.class);\n        foo();\n    }\n\n    public static void foo() {\n        System.out.println(&quot;World!!&quot;);\n    }\n}\n</code></pre>\n<p>However, when the <code>ClassFileTranformer</code> returns invalid bytecode, or when it just returns <code>new byte[0]</code>, the retransformation fails silently. No exceptions are thrown and no changes are done. According to the official <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.instrument/java/lang/instrument/Instrumentation.html#retransformClasses(java.lang.Class...)\" rel=\"nofollow noreferrer\">documentation</a>, if invalid bytes are provided, the method should throw a exception. The doc says:</p>\n<blockquote>\n<p>The class file bytes are not checked, verified and installed until after the transformations have been applied, if the resultant bytes are in error this method will throw an exception.</p>\n</blockquote>\n<p>Using the instrumentation object outside the java agent doesn't seem to be a problem, I tried to put the retransformation code in the agent and the behaviours are exactly the same. I'm using GraalVM EE (the version is shown below). I tried OpenJDK as well and it still fails silently.</p>\n<pre><code>java version &quot;17.0.6&quot; 2023-01-17 LTS\nJava(TM) SE Runtime Environment GraalVM EE 22.3.1 (build 17.0.6+9-LTS-jvmci-22.3-b11)\nJava HotSpot(TM) 64-Bit Server VM GraalVM EE 22.3.1 (build 17.0.6+9-LTS-jvmci-22.3-b11, mixed mode, sharing)\n</code></pre>\n<p>Why it fails silently? Is it because I'm using instrumentation in a wrong way? How can I get a exception when the bytecode is malformed? Thanks in advance.</p>\n<p>(Thanks to Johannes Kuhn, corrected the unsupported use of ASM Api)</p>\n"},{"tags":["java","turtle-graphics"],"comments":[{"owner":{"account_id":8306545,"reputation":47696,"user_id":6243352,"display_name":"ggorlen"},"score":0,"creation_date":1675818141,"post_id":75380447,"comment_id":133009331,"body_markdown":"`strUserName =` -&gt; `String strUserName =`?","body":"<code>strUserName =</code> -&gt; <code>String strUserName =</code>?"},{"owner":{"account_id":27712220,"reputation":1,"user_id":21154661,"display_name":"Argreon"},"score":0,"creation_date":1675858695,"post_id":75380447,"comment_id":133017453,"body_markdown":"nope! tried it with just normal text and it still doesn&#39;t work, but good catch!","body":"nope! tried it with just normal text and it still doesn&#39;t work, but good catch!"},{"owner":{"account_id":8306545,"reputation":47696,"user_id":6243352,"display_name":"ggorlen"},"score":0,"creation_date":1675876682,"post_id":75380447,"comment_id":133023846,"body_markdown":"Can you [edit] the post to show your new code and eliminate this first error? Thanks.","body":"Can you <a href=\"https://stackoverflow.com/posts/75380447/edit\">edit</a> the post to show your new code and eliminate this first error? Thanks."}],"owner":{"account_id":27712220,"reputation":1,"user_id":21154661,"display_name":"Argreon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675996581,"creation_date":1675817970,"question_id":75380447,"body_markdown":"I am trying to write text in the World window using Turtle Graphics and Java, however I have been reciving a couple different errors (such as the ones below) that are seemingly useless.\r\n\r\n\r\n```\r\ninvalid character constant\r\n```\r\n```\r\nThe method write(String) is undefined for the type Turtle\r\n```\r\n\r\n\r\nMy code is pretty short and simple (shown below), so I don&#39;t see how anything could get messed up. The final line is the one that\r\n\r\n\r\n```\r\nimport java.util.Scanner; //scanner\r\nimport javax.swing.JOptionPane; //dialog boxes\r\n\r\n\r\npublic class ProjectTwo_Ponyville2 {\r\npublic static void main(String[] args) {\r\n\r\n//declare world and turtle\r\nWorld w = new World(800, 600); //world\r\nTurtle t = new Turtle(w); //turtle\r\n\r\n//ask user for name\r\nString strUserName = JOptionPane.showInputDialog(&quot;Enter your name&quot;);\r\nSystem.out.println(strUserName);\r\n\r\n//print user name in world\r\nt.write(&#39;&quot; + strUserName + &quot;&#39;);\r\n\r\n\t}\r\n}\r\n```\r\n\r\n\r\nFair warning I&#39;m new to both Turtle Graphics and Java, so it may just be something simple I missed. All the online information I&#39;ve found about Turtle Graphics uses Python, so nothing&#39;s been of much help. Hoping Stack Overflow can solve this for me!","title":"How to write text in the World using Turtle Graphics?","body":"<p>I am trying to write text in the World window using Turtle Graphics and Java, however I have been reciving a couple different errors (such as the ones below) that are seemingly useless.</p>\n<pre><code>invalid character constant\n</code></pre>\n<pre><code>The method write(String) is undefined for the type Turtle\n</code></pre>\n<p>My code is pretty short and simple (shown below), so I don't see how anything could get messed up. The final line is the one that</p>\n<pre><code>import java.util.Scanner; //scanner\nimport javax.swing.JOptionPane; //dialog boxes\n\n\npublic class ProjectTwo_Ponyville2 {\npublic static void main(String[] args) {\n\n//declare world and turtle\nWorld w = new World(800, 600); //world\nTurtle t = new Turtle(w); //turtle\n\n//ask user for name\nString strUserName = JOptionPane.showInputDialog(&quot;Enter your name&quot;);\nSystem.out.println(strUserName);\n\n//print user name in world\nt.write('&quot; + strUserName + &quot;');\n\n    }\n}\n</code></pre>\n<p>Fair warning I'm new to both Turtle Graphics and Java, so it may just be something simple I missed. All the online information I've found about Turtle Graphics uses Python, so nothing's been of much help. Hoping Stack Overflow can solve this for me!</p>\n"},{"tags":["java","xsd","jaxb"],"answers":[{"tags":[],"owner":{"account_id":890308,"reputation":47359,"user_id":928711,"accept_rate":60,"display_name":"Guillaume Polet"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1396664124,"creation_date":1331110224,"answer_id":9598292,"question_id":9598028,"body_markdown":"You need to use a binding file indicating jaxB how it should handle this name collision. For example, put something like this in a file named something like bindings.xjb:\r\n\r\n    &lt;jaxb:bindings version=&quot;2.1&quot; xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot;\r\n        xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot; xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot;\r\n        xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:com.fnf=&quot;http://www.fnf.com/xes&quot;&gt;\r\n      &lt;jaxb:bindings schemaLocation=&quot;your schema location here&quot; node=&quot;/xs:schema&quot;&gt;\r\n        &lt;jaxb:bindings node=&quot;//XPath selector&quot;&gt;\r\n          &lt;jaxb:property name=&quot;HereIsTheProblem2&quot; /&gt;\r\n        &lt;/jaxb:bindings&gt;\r\n      &lt;/jaxb:bindings&gt;\r\n    &lt;/jaxb:bindings&gt;\r\n\r\nCan&#39;t provide you a complete solution without a complete schema","title":"How to handle elements &amp; attributes having same name in xsd while generating pojos using jaxb?","body":"<p>You need to use a binding file indicating jaxB how it should handle this name collision. For example, put something like this in a file named something like bindings.xjb:</p>\n\n<pre><code>&lt;jaxb:bindings version=\"2.1\" xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\"\n    xmlns:xjc=\"http://java.sun.com/xml/ns/jaxb/xjc\" xmlns:jaxb=\"http://java.sun.com/xml/ns/jaxb\"\n    xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:com.fnf=\"http://www.fnf.com/xes\"&gt;\n  &lt;jaxb:bindings schemaLocation=\"your schema location here\" node=\"/xs:schema\"&gt;\n    &lt;jaxb:bindings node=\"//XPath selector\"&gt;\n      &lt;jaxb:property name=\"HereIsTheProblem2\" /&gt;\n    &lt;/jaxb:bindings&gt;\n  &lt;/jaxb:bindings&gt;\n&lt;/jaxb:bindings&gt;\n</code></pre>\n\n<p>Can't provide you a complete solution without a complete schema</p>\n"},{"tags":[],"owner":{"account_id":4862292,"reputation":73,"user_id":3921544,"accept_rate":40,"display_name":"Chatura Mohotti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675996064,"creation_date":1675996064,"answer_id":75406380,"question_id":9598028,"body_markdown":"Also we can modify the XSD as below.\r\n\r\n        &lt;xs:complexType&gt;\r\n        &lt;xs:sequence minOccurs=&quot;0&quot;&gt;\r\n            &lt;xs:element ref=&quot;HereIsTheProblem&quot;/&gt;\r\n            &lt;xs:element ref=&quot;blaBla&quot;/&gt;\r\n        &lt;/xs:sequence&gt;\r\n        &lt;xs:attribute name=&quot;something&quot; type=&quot;xs:string&quot; use=&quot;required&quot;&gt;\r\n            &lt;xs:annotation/&gt;\r\n        &lt;/xs:attribute&gt;\r\n        &lt;xs:attribute name=&quot;somethingElse&quot; type=&quot;xs:string&quot;&gt;\r\n            &lt;xs:annotation/&gt;\r\n        &lt;/xs:attribute&gt;\r\n        &lt;xs:attribute name=&quot;HereIsTheProblem&quot; type=&quot;xs:string&quot;&gt;\r\n            &lt;xs:annotation&gt;\r\n                &lt;xs:appinfo&gt;\r\n                    &lt;jaxb:property name=&quot;HereIsTheProblemAttr&quot;/&gt;\r\n                &lt;/xs:appinfo&gt;\r\n            &lt;/xs:annotation&gt;\r\n        &lt;/xs:attribute&gt;\r\n    &lt;/xs:complexType&gt;\r\n\r\n\r\nThe main issue is inside the pojo class, if we have the element and the attribute with the same name, it will try to create variables with the same name which is not allowed in simple java principles. So we can define the variable name to be different from one another like above.","title":"How to handle elements &amp; attributes having same name in xsd while generating pojos using jaxb?","body":"<p>Also we can modify the XSD as below.</p>\n<pre><code>    &lt;xs:complexType&gt;\n    &lt;xs:sequence minOccurs=&quot;0&quot;&gt;\n        &lt;xs:element ref=&quot;HereIsTheProblem&quot;/&gt;\n        &lt;xs:element ref=&quot;blaBla&quot;/&gt;\n    &lt;/xs:sequence&gt;\n    &lt;xs:attribute name=&quot;something&quot; type=&quot;xs:string&quot; use=&quot;required&quot;&gt;\n        &lt;xs:annotation/&gt;\n    &lt;/xs:attribute&gt;\n    &lt;xs:attribute name=&quot;somethingElse&quot; type=&quot;xs:string&quot;&gt;\n        &lt;xs:annotation/&gt;\n    &lt;/xs:attribute&gt;\n    &lt;xs:attribute name=&quot;HereIsTheProblem&quot; type=&quot;xs:string&quot;&gt;\n        &lt;xs:annotation&gt;\n            &lt;xs:appinfo&gt;\n                &lt;jaxb:property name=&quot;HereIsTheProblemAttr&quot;/&gt;\n            &lt;/xs:appinfo&gt;\n        &lt;/xs:annotation&gt;\n    &lt;/xs:attribute&gt;\n&lt;/xs:complexType&gt;\n</code></pre>\n<p>The main issue is inside the pojo class, if we have the element and the attribute with the same name, it will try to create variables with the same name which is not allowed in simple java principles. So we can define the variable name to be different from one another like above.</p>\n"}],"owner":{"account_id":1144334,"reputation":902,"user_id":1127443,"accept_rate":93,"display_name":"Rahul Thakur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5621,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":9598292,"answer_count":2,"score":7,"last_activity_date":1675996064,"creation_date":1331108887,"question_id":9598028,"body_markdown":"I have a xsd that contains something like:\r\n\r\n    &lt;xs:complexType&gt;\r\n      &lt;xs:sequence minOccurs=&quot;0&quot;&gt;\r\n        &lt;xs:element ref=&quot;HereIsTheProblem&quot;/&gt;\r\n        &lt;xs:element ref=&quot;blaBla&quot;/&gt;\r\n      &lt;/xs:sequence&gt;\r\n      &lt;xs:attribute name=&quot;something&quot; type=&quot;xs:string&quot; use=&quot;required&quot;&gt;\r\n        &lt;xs:annotation/&gt;\r\n      &lt;/xs:attribute&gt;\r\n      &lt;xs:attribute name=&quot;somethingElse&quot; type=&quot;xs:string&quot;&gt;\r\n        &lt;xs:annotation/&gt;\r\n      &lt;/xs:attribute&gt;\r\n      &lt;xs:attribute name=&quot;HereIsTheProblem&quot; type=&quot;xs:string&quot;&gt;\r\n        &lt;xs:annotation/&gt;\r\n      &lt;/xs:attribute&gt;\r\n    &lt;/xs:complexType&gt;\r\n\r\nnow when i try to parse the schema using jaxb to generate java classes it fails:\r\n\r\n    [ERROR] Element &quot;{http://something.somemorething.com/etc/}HereIsTheProblem&quot; shows up in more than one properties.\r\n\r\nhow to resolve this without making any modification in the schema?\r\n\r\nPS:my jaxb version is 2.1.13","title":"How to handle elements &amp; attributes having same name in xsd while generating pojos using jaxb?","body":"<p>I have a xsd that contains something like:</p>\n\n<pre><code>&lt;xs:complexType&gt;\n  &lt;xs:sequence minOccurs=\"0\"&gt;\n    &lt;xs:element ref=\"HereIsTheProblem\"/&gt;\n    &lt;xs:element ref=\"blaBla\"/&gt;\n  &lt;/xs:sequence&gt;\n  &lt;xs:attribute name=\"something\" type=\"xs:string\" use=\"required\"&gt;\n    &lt;xs:annotation/&gt;\n  &lt;/xs:attribute&gt;\n  &lt;xs:attribute name=\"somethingElse\" type=\"xs:string\"&gt;\n    &lt;xs:annotation/&gt;\n  &lt;/xs:attribute&gt;\n  &lt;xs:attribute name=\"HereIsTheProblem\" type=\"xs:string\"&gt;\n    &lt;xs:annotation/&gt;\n  &lt;/xs:attribute&gt;\n&lt;/xs:complexType&gt;\n</code></pre>\n\n<p>now when i try to parse the schema using jaxb to generate java classes it fails:</p>\n\n<pre><code>[ERROR] Element \"{http://something.somemorething.com/etc/}HereIsTheProblem\" shows up in more than one properties.\n</code></pre>\n\n<p>how to resolve this without making any modification in the schema?</p>\n\n<p>PS:my jaxb version is 2.1.13</p>\n"},{"tags":["java","api","rest-assured"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1657030753,"post_id":72868970,"comment_id":128709308,"body_markdown":"Does this answer your question? [RESTAssured Multipart content-type](https://stackoverflow.com/questions/46531172/restassured-multipart-content-type)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/46531172/restassured-multipart-content-type\">RESTAssured Multipart content-type</a>"},{"owner":{"account_id":4515002,"reputation":25,"user_id":3670127,"display_name":"user3670127"},"score":0,"creation_date":1657270952,"post_id":72868970,"comment_id":128775970,"body_markdown":"No, it doesn&#39;t. It deals with the conten-type in the header of the request, and not the Content-Transfer-Encoding in the body which is what is causing my problems","body":"No, it doesn&#39;t. It deals with the conten-type in the header of the request, and not the Content-Transfer-Encoding in the body which is what is causing my problems"},{"owner":{"account_id":15371775,"reputation":514,"user_id":11089623,"display_name":"cheparsky"},"score":0,"creation_date":1658780352,"post_id":72868970,"comment_id":129132430,"body_markdown":"Postman add an additional header to your request, compare those headers with yours and add missing to your RA code","body":"Postman add an additional header to your request, compare those headers with yours and add missing to your RA code"},{"owner":{"account_id":1611797,"reputation":81,"user_id":1490512,"accept_rate":25,"display_name":"Lakshmi"},"score":0,"creation_date":1676289696,"post_id":72868970,"comment_id":133100891,"body_markdown":"any resolution , u found for this?","body":"any resolution , u found for this?"},{"owner":{"account_id":4515002,"reputation":25,"user_id":3670127,"display_name":"user3670127"},"score":0,"creation_date":1679479154,"post_id":72868970,"comment_id":133727962,"body_markdown":"Yeah, it just started working one day and I still don&#39;t know why","body":"Yeah, it just started working one day and I still don&#39;t know why"}],"owner":{"account_id":4515002,"reputation":25,"user_id":3670127,"display_name":"user3670127"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":408,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675996026,"creation_date":1657021948,"question_id":72868970,"body_markdown":"I&#39;m currently testing a very specific API, that refuses to accept a request which has Content-Transfer-Encoding: binary. I throws a 415 - unsupported media type error. However, when I send the same file and build the same request using postman, it accepts it without issues. Looking at the logs of what is received in the service, the only difference in the two requests is that the restassured one has Content-Transfer-Encoding: binary in the body. Here&#39;s how it looks:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ooDuV.png\r\n\r\nSo for the sake of debugging and pinpointing if this is indeed the cause of the request failing, I would like to remove Content-Transfer-Encoding: binary from the body. yet I have no idea how. I tried using the following code, yet the request still arrives with it present. Here is the code I&#39;m using:\r\n\r\n    request = given()\r\n                .header(&quot;Authorization&quot;, &quot;Bearer &quot; + LoginSteps.accessToken)\r\n                .queryParam(&quot;memberId&quot;, memberId)\r\n                .multiPart(&quot;receipt&quot;, new File(receiptFilePath), &quot;image/jpeg&quot;)\r\n                .urlEncodingEnabled(false)\r\n                .config(RestAssuredConfig.config()\r\n                        .encoderConfig(EncoderConfig\r\n                                .encoderConfig()\r\n                                .appendDefaultContentCharsetToContentTypeIfUndefined(false)\r\n                                .encodeContentTypeAs(&quot;image/jpeg&quot;, io.restassured.http.ContentType.ANY)));\r\n\r\n    request.post(baseUrl + endpoint);\r\n\r\nCan anyone tell me how to get rid of Content-Transfer-Encoding from this request?","title":"Java+restassured remove Content-Transfer-Encoding: binary from multipart request","body":"<p>I'm currently testing a very specific API, that refuses to accept a request which has Content-Transfer-Encoding: binary. I throws a 415 - unsupported media type error. However, when I send the same file and build the same request using postman, it accepts it without issues. Looking at the logs of what is received in the service, the only difference in the two requests is that the restassured one has Content-Transfer-Encoding: binary in the body. Here's how it looks:</p>\n<p><a href=\"https://i.stack.imgur.com/ooDuV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ooDuV.png\" alt=\"enter image description here\" /></a></p>\n<p>So for the sake of debugging and pinpointing if this is indeed the cause of the request failing, I would like to remove Content-Transfer-Encoding: binary from the body. yet I have no idea how. I tried using the following code, yet the request still arrives with it present. Here is the code I'm using:</p>\n<pre><code>request = given()\n            .header(&quot;Authorization&quot;, &quot;Bearer &quot; + LoginSteps.accessToken)\n            .queryParam(&quot;memberId&quot;, memberId)\n            .multiPart(&quot;receipt&quot;, new File(receiptFilePath), &quot;image/jpeg&quot;)\n            .urlEncodingEnabled(false)\n            .config(RestAssuredConfig.config()\n                    .encoderConfig(EncoderConfig\n                            .encoderConfig()\n                            .appendDefaultContentCharsetToContentTypeIfUndefined(false)\n                            .encodeContentTypeAs(&quot;image/jpeg&quot;, io.restassured.http.ContentType.ANY)));\n\nrequest.post(baseUrl + endpoint);\n</code></pre>\n<p>Can anyone tell me how to get rid of Content-Transfer-Encoding from this request?</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":21488921,"reputation":4715,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":0,"creation_date":1675923350,"post_id":75394671,"comment_id":133032994,"body_markdown":"Please share what version of spring you are using. Also, did you recently upgrade versions? Lastly, please share relevant trace logs if able so we can see the flow.","body":"Please share what version of spring you are using. Also, did you recently upgrade versions? Lastly, please share relevant trace logs if able so we can see the flow."},{"owner":{"account_id":13176203,"reputation":195,"user_id":9517076,"display_name":"I have 10 fingers"},"score":0,"creation_date":1675928306,"post_id":75394671,"comment_id":133033962,"body_markdown":"@SteveRiesenberg Thank you for your quick comment! As you said i added some additional info.","body":"@SteveRiesenberg Thank you for your quick comment! As you said i added some additional info."}],"owner":{"account_id":13176203,"reputation":195,"user_id":9517076,"display_name":"I have 10 fingers"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":357,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675995214,"creation_date":1675921511,"question_id":75394671,"body_markdown":"I&#39;m using spring security with oauth client also spring session data redis to store session data in redis storage. so when i attempting to authenticate with oauth the corresponding request data stored in redis. The data looks like this \r\n\r\n```json\r\n{\r\n   &quot;authorizationUri&quot;:&quot;https://accounts.google.com/o/oauth2/v2/auth&quot;,\r\n   &quot;responseType&quot;:&quot;code&quot;,\r\n   &quot;clientId&quot;:&quot;***.apps.googleusercontent.com&quot;,\r\n   &quot;redirectUri&quot;:&quot;http://localhost:8080/login/oauth2/code/google&quot;,\r\n   &quot;scopes&quot;:[\r\n      &quot;openid&quot;,\r\n      &quot;profile&quot;,\r\n      &quot;email&quot;\r\n   ],\r\n   &quot;state&quot;:&quot;y829XucK_617Xrl5O4QEk8EfpvuWkaE7G8MUN0HV5ok=&quot;,\r\n   &quot;additionalParameters&quot;:{\r\n      &quot;nonce&quot;:&quot;Z00EwZrkziuO31XVt4RK1tkApUEOjTG4SpzHp94ASxE&quot;\r\n   },\r\n   &quot;authorizationRequestUri&quot;:&quot;https://accounts.google.com/o/oauth2/v2/auth?response_type=code&amp;client_id=***.apps.googleusercontent.com&amp;scope=openid%20profile%20email&amp;state=y829XucK_617Xrl5O4QEk8EfpvuWkaE7G8MUN0HV5ok%3D&amp;redirect_uri=http://localhost:8080/login/oauth2/code/google&amp;nonce=Z00EwZrkziuO31XVt4RK1tkApUEOjTG4SpzHp94ASxE&quot;,\r\n   &quot;attributes&quot;:{\r\n      &quot;registration_id&quot;:&quot;google&quot;,\r\n      &quot;nonce&quot;:&quot;86o0mT1_uDmbcwDHciWPsxft2Vlo0WyHXZRda2N9a0a00yb7puxLhPqIUNOov--PUt-HRlqb5rpVYXTahlGsCzPTn6wm7ZaD2gNI13HMPqN-IX4oRfAmWbKpi4-7TbPV&quot;\r\n   },\r\n   &quot;grantType&quot;:{\r\n      &quot;value&quot;:&quot;authorization_code&quot;\r\n   }\r\n}\r\n```\r\nalong with the authenticating process there is `HttpSessionOAuth2AuthorizationRequestRepository` class and the method `removeAuthorizationRequest` which cause my problem that always returning null value\r\n\r\n```java\r\n@Override\r\npublic OAuth2AuthorizationRequest removeAuthorizationRequest(HttpServletRequest request) {\r\n\tAssert.notNull(request, &quot;request cannot be null&quot;);\r\n\tString stateParameter = this.getStateParameter(request);\r\n\tif (stateParameter == null) {\r\n\t\treturn null;\r\n\t}\r\n\tMap&lt;String, OAuth2AuthorizationRequest&gt; authorizationRequests = this.getAuthorizationRequests(request);\r\n\tOAuth2AuthorizationRequest originalRequest = authorizationRequests.remove(stateParameter);\r\n\tif (authorizationRequests.size() == 0) {\r\n\t\trequest.getSession().removeAttribute(this.sessionAttributeName);\r\n\t}\r\n\telse if (authorizationRequests.size() == 1) {\r\n\t\trequest.getSession().setAttribute(this.sessionAttributeName,\r\n\t\t\t\tauthorizationRequests.values().iterator().next());\r\n\t}\r\n\telse {\r\n\t\trequest.getSession().setAttribute(this.sessionAttributeName, authorizationRequests);\r\n\t}\r\n\treturn originalRequest;\r\n}\r\n```\r\n\r\nAs you can see the 2nd statement retrieve the state value so it would be `String stateParameter = &quot;y829XucK_617Xrl5O4QEk8EfpvuWkaE7G8MUN0HV5ok=&quot;` and the variable `authorizationRequests` in 6 lines has the same value as the json data above but as map type. right next statement it try to execute remove some value but as i said the parameter `stateParameter` is not `key` it is `value` so the result of this statement is always `null`.\r\n\r\nAnd the caller part of this method looks like this\r\n```java\r\n@Override\r\npublic Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response)\r\n\t\tthrows AuthenticationException {\r\n\tMultiValueMap&lt;String, String&gt; params = OAuth2AuthorizationResponseUtils.toMultiMap(request.getParameterMap());\r\n\tif (!OAuth2AuthorizationResponseUtils.isAuthorizationResponse(params)) {\r\n\t\tOAuth2Error oauth2Error = new OAuth2Error(OAuth2ErrorCodes.INVALID_REQUEST);\r\n\t\tthrow new OAuth2AuthenticationException(oauth2Error, oauth2Error.toString());\r\n\t}\r\n\tOAuth2AuthorizationRequest authorizationRequest = this.authorizationRequestRepository\r\n\t\t\t.removeAuthorizationRequest(request, response);\r\n\tif (authorizationRequest == null) {\r\n\t\tOAuth2Error oauth2Error = new OAuth2Error(AUTHORIZATION_REQUEST_NOT_FOUND_ERROR_CODE);\r\n\t\tthrow new OAuth2AuthenticationException(oauth2Error, oauth2Error.toString());\r\n\t}\r\n    // The rest of code...\r\n}\r\n```\r\nAs you can see if the `authorizationRequest` is null then it always throws exception...\r\nI don&#39;t think the code has problem because i couldn&#39;t find any similar issues in the whole web.\r\n\r\nIf you guys know about anything similar with my issues please let me know how i can resolve this issue...&#128591;\r\n\r\nAnd here is my setup\r\n```gradle\r\nplugins {\r\n    id &#39;org.springframework.boot&#39; version &#39;2.7.5&#39;\r\n}\r\n\r\nsourceCompatibility = &#39;11&#39;\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-redis&#39;\r\n    implementation(&#39;org.springframework.session:spring-session-data-redis&#39;) {\r\n        exclude group: &#39;org.springframework.data&#39;, module: &#39;spring-data-redis&#39;\r\n    }\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-oauth2-client&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n}\r\n```\r\n\r\nThis is stack trace\r\n```\r\n2023-02-09 16:35:07.947  WARN 59793 --- [nio-8080-exec-2] l.g.c.CustomAuthenticationFailureHandler : [authorization_request_not_found] \r\norg.springframework.security.oauth2.core.OAuth2AuthenticationException: [authorization_request_not_found] \r\n\tat org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter.attemptAuthentication(OAuth2LoginAuthenticationFilter.java:173)\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:217)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\r\n\tat org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\r\n\tat org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\r\n\tat org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:142)\r\n\tat org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:82)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n```\r\n\r\nHere is reproducible repository\r\n[sample repository](https://github.com/Y-k-Y/spring-security-test)\r\n\r\n**EDIT**\r\n- Added spring boot version and java version\r\n- Added stack trace\r\n- This is my initial setup no upgrade\r\n- Added sample reproducible repository","title":"Spring Security removeAuthorizationRequest of HttpSessionOAuth2AuthorizationRequestRepository always return null","body":"<p>I'm using spring security with oauth client also spring session data redis to store session data in redis storage. so when i attempting to authenticate with oauth the corresponding request data stored in redis. The data looks like this</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n   &quot;authorizationUri&quot;:&quot;https://accounts.google.com/o/oauth2/v2/auth&quot;,\n   &quot;responseType&quot;:&quot;code&quot;,\n   &quot;clientId&quot;:&quot;***.apps.googleusercontent.com&quot;,\n   &quot;redirectUri&quot;:&quot;http://localhost:8080/login/oauth2/code/google&quot;,\n   &quot;scopes&quot;:[\n      &quot;openid&quot;,\n      &quot;profile&quot;,\n      &quot;email&quot;\n   ],\n   &quot;state&quot;:&quot;y829XucK_617Xrl5O4QEk8EfpvuWkaE7G8MUN0HV5ok=&quot;,\n   &quot;additionalParameters&quot;:{\n      &quot;nonce&quot;:&quot;Z00EwZrkziuO31XVt4RK1tkApUEOjTG4SpzHp94ASxE&quot;\n   },\n   &quot;authorizationRequestUri&quot;:&quot;https://accounts.google.com/o/oauth2/v2/auth?response_type=code&amp;client_id=***.apps.googleusercontent.com&amp;scope=openid%20profile%20email&amp;state=y829XucK_617Xrl5O4QEk8EfpvuWkaE7G8MUN0HV5ok%3D&amp;redirect_uri=http://localhost:8080/login/oauth2/code/google&amp;nonce=Z00EwZrkziuO31XVt4RK1tkApUEOjTG4SpzHp94ASxE&quot;,\n   &quot;attributes&quot;:{\n      &quot;registration_id&quot;:&quot;google&quot;,\n      &quot;nonce&quot;:&quot;86o0mT1_uDmbcwDHciWPsxft2Vlo0WyHXZRda2N9a0a00yb7puxLhPqIUNOov--PUt-HRlqb5rpVYXTahlGsCzPTn6wm7ZaD2gNI13HMPqN-IX4oRfAmWbKpi4-7TbPV&quot;\n   },\n   &quot;grantType&quot;:{\n      &quot;value&quot;:&quot;authorization_code&quot;\n   }\n}\n</code></pre>\n<p>along with the authenticating process there is <code>HttpSessionOAuth2AuthorizationRequestRepository</code> class and the method <code>removeAuthorizationRequest</code> which cause my problem that always returning null value</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic OAuth2AuthorizationRequest removeAuthorizationRequest(HttpServletRequest request) {\n    Assert.notNull(request, &quot;request cannot be null&quot;);\n    String stateParameter = this.getStateParameter(request);\n    if (stateParameter == null) {\n        return null;\n    }\n    Map&lt;String, OAuth2AuthorizationRequest&gt; authorizationRequests = this.getAuthorizationRequests(request);\n    OAuth2AuthorizationRequest originalRequest = authorizationRequests.remove(stateParameter);\n    if (authorizationRequests.size() == 0) {\n        request.getSession().removeAttribute(this.sessionAttributeName);\n    }\n    else if (authorizationRequests.size() == 1) {\n        request.getSession().setAttribute(this.sessionAttributeName,\n                authorizationRequests.values().iterator().next());\n    }\n    else {\n        request.getSession().setAttribute(this.sessionAttributeName, authorizationRequests);\n    }\n    return originalRequest;\n}\n</code></pre>\n<p>As you can see the 2nd statement retrieve the state value so it would be <code>String stateParameter = &quot;y829XucK_617Xrl5O4QEk8EfpvuWkaE7G8MUN0HV5ok=&quot;</code> and the variable <code>authorizationRequests</code> in 6 lines has the same value as the json data above but as map type. right next statement it try to execute remove some value but as i said the parameter <code>stateParameter</code> is not <code>key</code> it is <code>value</code> so the result of this statement is always <code>null</code>.</p>\n<p>And the caller part of this method looks like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response)\n        throws AuthenticationException {\n    MultiValueMap&lt;String, String&gt; params = OAuth2AuthorizationResponseUtils.toMultiMap(request.getParameterMap());\n    if (!OAuth2AuthorizationResponseUtils.isAuthorizationResponse(params)) {\n        OAuth2Error oauth2Error = new OAuth2Error(OAuth2ErrorCodes.INVALID_REQUEST);\n        throw new OAuth2AuthenticationException(oauth2Error, oauth2Error.toString());\n    }\n    OAuth2AuthorizationRequest authorizationRequest = this.authorizationRequestRepository\n            .removeAuthorizationRequest(request, response);\n    if (authorizationRequest == null) {\n        OAuth2Error oauth2Error = new OAuth2Error(AUTHORIZATION_REQUEST_NOT_FOUND_ERROR_CODE);\n        throw new OAuth2AuthenticationException(oauth2Error, oauth2Error.toString());\n    }\n    // The rest of code...\n}\n</code></pre>\n<p>As you can see if the <code>authorizationRequest</code> is null then it always throws exception...\nI don't think the code has problem because i couldn't find any similar issues in the whole web.</p>\n<p>If you guys know about anything similar with my issues please let me know how i can resolve this issue...🙏</p>\n<p>And here is my setup</p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.7.5'\n}\n\nsourceCompatibility = '11'\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-data-redis'\n    implementation('org.springframework.session:spring-session-data-redis') {\n        exclude group: 'org.springframework.data', module: 'spring-data-redis'\n    }\n    implementation 'org.springframework.boot:spring-boot-starter-oauth2-client'\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n}\n</code></pre>\n<p>This is stack trace</p>\n<pre><code>2023-02-09 16:35:07.947  WARN 59793 --- [nio-8080-exec-2] l.g.c.CustomAuthenticationFailureHandler : [authorization_request_not_found] \norg.springframework.security.oauth2.core.OAuth2AuthenticationException: [authorization_request_not_found] \n    at org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter.attemptAuthentication(OAuth2LoginAuthenticationFilter.java:173)\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:217)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\n    at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\n    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\n    at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:142)\n    at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:82)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n</code></pre>\n<p>Here is reproducible repository\n<a href=\"https://github.com/Y-k-Y/spring-security-test\" rel=\"nofollow noreferrer\">sample repository</a></p>\n<p><strong>EDIT</strong></p>\n<ul>\n<li>Added spring boot version and java version</li>\n<li>Added stack trace</li>\n<li>This is my initial setup no upgrade</li>\n<li>Added sample reproducible repository</li>\n</ul>\n"},{"tags":["java","visual-studio-code","junit","test-runner","visual-studio-test-runner"],"comments":[{"owner":{"account_id":15396644,"reputation":25755,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1675972664,"post_id":75400833,"comment_id":133048357,"body_markdown":"Please show more of the code so that others can reproduce the problem.","body":"Please show more of the code so that others can reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675995097,"creation_date":1675995097,"answer_id":75406303,"question_id":75400833,"body_markdown":"&gt; The [Test Runner for Java][1] extension supports the following test frameworks:\r\n&gt; \r\n&gt; - [JUnit 4][2] (v4.8.0+)\r\n&gt; - [JUnit 5][3] (v5.1.0+)\r\n&gt; - [TestNG][4] (v6.9.13.3+)\r\n\r\nYou must first [enable testing and adding test framework JARs to your project][5]. Then in the ***Testing*** panel on the left, you can see the test list of the project and test it. A Test button is also displayed to the left of the test script.\r\n\r\n[![enter image description here][6]][6]\r\n\r\n*There are more details you can look at this [document][7]*.\r\n\r\n\r\n  [1]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-test\r\n  [2]: https://junit.org/junit4/\r\n  [3]: https://junit.org/junit5/\r\n  [4]: https://testng.org/doc/\r\n  [5]: https://code.visualstudio.com/docs/java/java-testing#_enable-testing-and-adding-test-framework-jars-to-your-project\r\n  [6]: https://i.stack.imgur.com/CryuH.png\r\n  [7]: https://code.visualstudio.com/docs/java/java-testing","title":"In VSCode, how do I use Test Runner to run a Java JUnit test within the editor?","body":"<blockquote>\n<p>The <a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-test\" rel=\"nofollow noreferrer\">Test Runner for Java</a> extension supports the following test frameworks:</p>\n<ul>\n<li><a href=\"https://junit.org/junit4/\" rel=\"nofollow noreferrer\">JUnit 4</a> (v4.8.0+)</li>\n<li><a href=\"https://junit.org/junit5/\" rel=\"nofollow noreferrer\">JUnit 5</a> (v5.1.0+)</li>\n<li><a href=\"https://testng.org/doc/\" rel=\"nofollow noreferrer\">TestNG</a> (v6.9.13.3+)</li>\n</ul>\n</blockquote>\n<p>You must first <a href=\"https://code.visualstudio.com/docs/java/java-testing#_enable-testing-and-adding-test-framework-jars-to-your-project\" rel=\"nofollow noreferrer\">enable testing and adding test framework JARs to your project</a>. Then in the <em><strong>Testing</strong></em> panel on the left, you can see the test list of the project and test it. A Test button is also displayed to the left of the test script.</p>\n<p><a href=\"https://i.stack.imgur.com/CryuH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CryuH.png\" alt=\"enter image description here\" /></a></p>\n<p><em>There are more details you can look at this <a href=\"https://code.visualstudio.com/docs/java/java-testing\" rel=\"nofollow noreferrer\">document</a></em>.</p>\n"}],"owner":{"account_id":952905,"reputation":15132,"user_id":1235929,"accept_rate":68,"display_name":"Dave"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":711,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675995097,"creation_date":1675956641,"question_id":75400833,"body_markdown":"I have a Java project on VSCode for Windows and I have installed the Test Runner plugin ...\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI would like to be able to run a test file from the editor and see the results.  In Eclipse, I can right click on the test file but when I open the test file in the editor\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nI don&#39;t see any option to right click and run my test file and I don&#39;t see any &quot;Run Test&quot; text hovering above my test file class, as some other posts seem to suggest.  What is the right way to run a test from the editor?  I&#39;m not tied to Test Runner for Java.  I&#39;m open to using other extensions.\r\n\r\n  [1]: https://i.stack.imgur.com/vGdjw.png\r\n  [2]: https://i.stack.imgur.com/6zMlx.png","title":"In VSCode, how do I use Test Runner to run a Java JUnit test within the editor?","body":"<p>I have a Java project on VSCode for Windows and I have installed the Test Runner plugin ...</p>\n<p><a href=\"https://i.stack.imgur.com/vGdjw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vGdjw.png\" alt=\"enter image description here\" /></a></p>\n<p>I would like to be able to run a test file from the editor and see the results.  In Eclipse, I can right click on the test file but when I open the test file in the editor</p>\n<p><a href=\"https://i.stack.imgur.com/6zMlx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6zMlx.png\" alt=\"enter image description here\" /></a></p>\n<p>I don't see any option to right click and run my test file and I don't see any &quot;Run Test&quot; text hovering above my test file class, as some other posts seem to suggest.  What is the right way to run a test from the editor?  I'm not tied to Test Runner for Java.  I'm open to using other extensions.</p>\n"},{"tags":["java","spring-boot","email","jakarta-mail","forgot-password"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1675946449,"post_id":75398226,"comment_id":133039348,"body_markdown":"please show full `pom.xml`","body":"please show full <code>pom.xml</code>"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1675946456,"post_id":75398226,"comment_id":133039351,"body_markdown":"If `int otp = 1`, what will your `&lt;h1&gt; OTP : &quot;+otp+&quot; &lt;/h1&gt;&quot;;` show? Will the OTP show `0001` or `1`?","body":"If <code>int otp = 1</code>, what will your <code>&lt;h1&gt; OTP : &quot;+otp+&quot; &lt;&#47;h1&gt;&quot;;</code> show? Will the OTP show <code>0001</code> or <code>1</code>?"},{"owner":{"account_id":27410620,"reputation":19,"user_id":20910591,"display_name":"Vishal Srivastava"},"score":0,"creation_date":1675946896,"post_id":75398226,"comment_id":133039488,"body_markdown":"Updated the full pom.xml &amp; otp will start from 1000(min)-9999(max)","body":"Updated the full pom.xml &amp; otp will start from 1000(min)-9999(max)"}],"owner":{"account_id":27410620,"reputation":19,"user_id":20910591,"display_name":"Vishal Srivastava"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":396,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675993507,"creation_date":1675943668,"question_id":75398226,"body_markdown":"I&#39;m trying to send an OTP over email using the mail service in Spring boot, but getting error-\r\n\r\nfailed to access class com.sun.activation.registries.LogSupport from class javax.activation.MailcapCommandMap (com.sun.activation.registries.LogSupport and javax.activation.MailcapCommandMap are in unnamed module of loader &#39;app&#39;)\r\n\r\nAdded below dependency in pom.xml-\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.1&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.smart&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;smartcontactmanager&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;smartcontactmanager&lt;/name&gt;\r\n\t&lt;description&gt;Smart Contact Manager&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-security --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.sun.mail/javax.mail --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.mail&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.6.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/javax.validation/validation-api --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.1.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-validator --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;8.0.0.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nController-\r\n\r\n```\r\n@PostMapping(&quot;/send-otp&quot;)\r\npublic String sendOtp(@RequestParam(&quot;email&quot;) String email,Model model, HttpSession session) {\r\n\r\n\t\tSystem.out.println(&quot;Email: &quot; + email);\r\n\t\tmodel.addAttribute(&quot;email&quot;, email);\r\n\r\n\t\t// Generating 4 digit OTP\r\n\r\n\t\tint otp = random.nextInt(9999);\r\n\t\tSystem.out.println(&quot;OTP: &quot; + otp);\r\n\t\t\r\n\t\t//Code to send OTP to email\r\n\t\t\r\n\t\tString subject=&quot;OTP from Smart Contact Manager&quot;;\r\n\t\tString message=&quot;&lt;h1&gt; OTP : &quot;+otp+&quot; &lt;/h1&gt;&quot;;\r\n\t\tString to=email;\r\n\t\t\r\n\t\tboolean flag = this.emailService.sendEmail(subject, message, to);\r\n\t\t\r\n\t\tif(flag) {\r\n\t\t\treturn &quot;verify_otp&quot;;\r\n\t\t}else {\r\n\t\t\tsession.setAttribute(&quot;message&quot;, &quot;Please verify your email address!&quot;);\r\n\t\t\treturn &quot;forgot_email_form&quot;;\r\n\t\t}\r\n\r\n\t\t\r\n}\r\n\r\n\r\nEmailService.java Class-\r\n\r\npackage com.smart.service;\r\n\r\nimport java.util.Properties;\r\n\r\nimport javax.mail.Authenticator;\r\nimport javax.mail.Message;\r\nimport javax.mail.PasswordAuthentication;\r\nimport javax.mail.Session;\r\nimport javax.mail.Transport;\r\nimport javax.mail.internet.InternetAddress;\r\nimport javax.mail.internet.MimeMessage;\r\n\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\npublic class EmailService {\r\n\r\n\tpublic boolean sendEmail(String subject, String message, String to) {\r\n\r\n\t\tboolean f = false;\r\n\r\n\t\tString from = &quot;vishalsrivi123@gmail.com&quot;;\r\n\r\n\t\t// variable for Gmail host\r\n\t\tString host = &quot;smtp.gmail.com&quot;;\r\n\r\n\t\t// Get the system properties\r\n\t\tProperties properties = System.getProperties();\r\n\t\tSystem.out.println(&quot;System Properties: &quot; + properties);\r\n\r\n\t\t// Set Host\r\n\t\tproperties.put(&quot;mail.smtp.host&quot;, host);\r\n\t\tproperties.put(&quot;mail.smtp.port&quot;, &quot;465&quot;);\r\n\t\tproperties.put(&quot;mail.smtp.ssl.enable&quot;, &quot;true&quot;);\r\n\t\tproperties.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n\r\n\t\t// Step-1: To get the session object\r\n\t\tSession session = Session.getInstance(properties, new Authenticator() {\r\n\r\n\t\t\t@Override\r\n\t\t\tprotected PasswordAuthentication getPasswordAuthentication() {\r\n\t\t\t\treturn new PasswordAuthentication(&quot;vishalsrivi123@gmail.com&quot;, &quot;zykpcbzkjcuedoju&quot;);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tsession.setDebug(true);\r\n\r\n\t\t// Step-2: Compose the Message[text, multimedia]\r\n\t\tMimeMessage m = new MimeMessage(session);\r\n\r\n\t\ttry {\r\n\r\n\t\t\t// From email\r\n\t\t\tm.setFrom(from);\r\n\r\n\t\t\t// Adding recipient to mail\r\n\t\t\tm.addRecipient(Message.RecipientType.TO, new InternetAddress(to));\r\n\r\n\t\t\t// Adding subject to mail\r\n\t\t\tm.setSubject(subject);\r\n\r\n\t\t\t// Adding text to mail\r\n\t\t\tm.setText(message);\r\n\r\n\t\t\t// Step-3: Send mail\r\n\t\t\tTransport.send(m);\r\n\r\n\t\t\tSystem.out.println(&quot;Mail sent successfully&quot;);\r\n\t\t\tf = true;\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n}\r\n```","title":"failed to access class com.sun.activation.registries.LogSupport from class javax.activation.MailcapCommandMap- Spring boot","body":"<p>I'm trying to send an OTP over email using the mail service in Spring boot, but getting error-</p>\n<p>failed to access class com.sun.activation.registries.LogSupport from class javax.activation.MailcapCommandMap (com.sun.activation.registries.LogSupport and javax.activation.MailcapCommandMap are in unnamed module of loader 'app')</p>\n<p>Added below dependency in pom.xml-</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.smart&lt;/groupId&gt;\n    &lt;artifactId&gt;smartcontactmanager&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;smartcontactmanager&lt;/name&gt;\n    &lt;description&gt;Smart Contact Manager&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-security --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/com.sun.mail/javax.mail --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.mail&lt;/artifactId&gt;\n            &lt;version&gt;1.6.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/javax.validation/validation-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-validator --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;8.0.0.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>Controller-</p>\n<pre><code>@PostMapping(&quot;/send-otp&quot;)\npublic String sendOtp(@RequestParam(&quot;email&quot;) String email,Model model, HttpSession session) {\n\n        System.out.println(&quot;Email: &quot; + email);\n        model.addAttribute(&quot;email&quot;, email);\n\n        // Generating 4 digit OTP\n\n        int otp = random.nextInt(9999);\n        System.out.println(&quot;OTP: &quot; + otp);\n        \n        //Code to send OTP to email\n        \n        String subject=&quot;OTP from Smart Contact Manager&quot;;\n        String message=&quot;&lt;h1&gt; OTP : &quot;+otp+&quot; &lt;/h1&gt;&quot;;\n        String to=email;\n        \n        boolean flag = this.emailService.sendEmail(subject, message, to);\n        \n        if(flag) {\n            return &quot;verify_otp&quot;;\n        }else {\n            session.setAttribute(&quot;message&quot;, &quot;Please verify your email address!&quot;);\n            return &quot;forgot_email_form&quot;;\n        }\n\n        \n}\n\n\nEmailService.java Class-\n\npackage com.smart.service;\n\nimport java.util.Properties;\n\nimport javax.mail.Authenticator;\nimport javax.mail.Message;\nimport javax.mail.PasswordAuthentication;\nimport javax.mail.Session;\nimport javax.mail.Transport;\nimport javax.mail.internet.InternetAddress;\nimport javax.mail.internet.MimeMessage;\n\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class EmailService {\n\n    public boolean sendEmail(String subject, String message, String to) {\n\n        boolean f = false;\n\n        String from = &quot;vishalsrivi123@gmail.com&quot;;\n\n        // variable for Gmail host\n        String host = &quot;smtp.gmail.com&quot;;\n\n        // Get the system properties\n        Properties properties = System.getProperties();\n        System.out.println(&quot;System Properties: &quot; + properties);\n\n        // Set Host\n        properties.put(&quot;mail.smtp.host&quot;, host);\n        properties.put(&quot;mail.smtp.port&quot;, &quot;465&quot;);\n        properties.put(&quot;mail.smtp.ssl.enable&quot;, &quot;true&quot;);\n        properties.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\n\n        // Step-1: To get the session object\n        Session session = Session.getInstance(properties, new Authenticator() {\n\n            @Override\n            protected PasswordAuthentication getPasswordAuthentication() {\n                return new PasswordAuthentication(&quot;vishalsrivi123@gmail.com&quot;, &quot;zykpcbzkjcuedoju&quot;);\n            }\n\n        });\n\n        session.setDebug(true);\n\n        // Step-2: Compose the Message[text, multimedia]\n        MimeMessage m = new MimeMessage(session);\n\n        try {\n\n            // From email\n            m.setFrom(from);\n\n            // Adding recipient to mail\n            m.addRecipient(Message.RecipientType.TO, new InternetAddress(to));\n\n            // Adding subject to mail\n            m.setSubject(subject);\n\n            // Adding text to mail\n            m.setText(message);\n\n            // Step-3: Send mail\n            Transport.send(m);\n\n            System.out.println(&quot;Mail sent successfully&quot;);\n            f = true;\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return true;\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","vert.x"],"owner":{"account_id":21433393,"reputation":1,"user_id":15789309,"display_name":"FUJINO"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675993158,"creation_date":1675993158,"question_id":75406170,"body_markdown":"Please advise.\r\nIt is possible to download one file as shown below.\r\nHowever, it is unclear how to download two or more files.\r\nI searched for a way to download more than two files but could not find one.\r\nThere was no information in the official references.\r\n\r\n[https://vertx.io/](https://vertx.io/)\r\n\r\n\r\n`rc.response().putHeader(HttpHeaders.CONTENT_TYPE, &quot;text/plain&quot;)\r\n                          .putHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot;&quot; + &quot;test.jar&quot;)\r\n                          .putHeader(HttpHeaders.TRANSFER_ENCODING, &quot;chunked&quot;).sendFile(filePath);`\r\n","title":"How to implement multiple file download function in WebAPI created with vert.x","body":"<p>Please advise.\nIt is possible to download one file as shown below.\nHowever, it is unclear how to download two or more files.\nI searched for a way to download more than two files but could not find one.\nThere was no information in the official references.</p>\n<p><a href=\"https://vertx.io/\" rel=\"nofollow noreferrer\">https://vertx.io/</a></p>\n<p><code>rc.response().putHeader(HttpHeaders.CONTENT_TYPE, &quot;text/plain&quot;) .putHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot;&quot; + &quot;test.jar&quot;) .putHeader(HttpHeaders.TRANSFER_ENCODING, &quot;chunked&quot;).sendFile(filePath);</code></p>\n"},{"tags":["java","package","extends"],"owner":{"account_id":22753019,"reputation":3,"user_id":16912892,"display_name":"anonymous"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675991827,"creation_date":1675991827,"question_id":75406075,"body_markdown":"My professor gave me these classes but when I try to run them it seems that AnimationNoApplet cannot find NoApplet the title is the error I receive. I have both files in the same folder and have tried switching the package names to be identical but no success. \r\nThis is AnimationNoApplet:\r\n\r\n```\r\n package noapplet.example;\r\n\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\nimport java.awt.Graphics;\r\nimport javax.swing.Timer;\r\n\r\nimport noapplet.NoApplet;\r\n\r\n/** Reusable class implementing the animation idiom. */\r\n@SuppressWarnings(&quot;serial&quot;)\r\npublic abstract class AnimationNoApplet extends NoApplet {\r\n```\r\n\r\nThis is NoApplet\r\n\r\n```\r\n package noapplet;\r\n@SuppressWarnings(&quot;serial&quot;)\r\npublic class NoApplet extends JPanel {\r\n\r\n```\r\n\r\nThere is many lines to the two files but I believe this is the root of the problem. Another thing that I noticed was the class made for AnimationNoApplet was NoApplet$1.class. I&#39;m not sure if this is relevant information but I thought I should call it out. The last thing I want to call out is that this is on visual studio code I have not used another editor.  ","title":"error: cannot find symbol import noapplet.NoApplet;","body":"<p>My professor gave me these classes but when I try to run them it seems that AnimationNoApplet cannot find NoApplet the title is the error I receive. I have both files in the same folder and have tried switching the package names to be identical but no success.\nThis is AnimationNoApplet:</p>\n<pre><code> package noapplet.example;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\nimport javax.swing.Timer;\n\nimport noapplet.NoApplet;\n\n/** Reusable class implementing the animation idiom. */\n@SuppressWarnings(&quot;serial&quot;)\npublic abstract class AnimationNoApplet extends NoApplet {\n</code></pre>\n<p>This is NoApplet</p>\n<pre><code> package noapplet;\n@SuppressWarnings(&quot;serial&quot;)\npublic class NoApplet extends JPanel {\n\n</code></pre>\n<p>There is many lines to the two files but I believe this is the root of the problem. Another thing that I noticed was the class made for AnimationNoApplet was NoApplet$1.class. I'm not sure if this is relevant information but I thought I should call it out. The last thing I want to call out is that this is on visual studio code I have not used another editor.</p>\n"},{"tags":["java","instruments","javaagents"],"answers":[{"tags":[],"owner":{"account_id":27740049,"reputation":1,"user_id":21176706,"display_name":"hxxx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675991635,"creation_date":1675991635,"answer_id":75406063,"question_id":75393488,"body_markdown":"I guess I&#39;ve found the reason：\r\nthe paratemers of &quot;properties&quot; transfer to aim JVM cannot be too long in:\r\nvm.loadAgent(attachJarPath, properties);\r\nbecause of the limit of attach Ti support;\r\n\r\nyou can use a file to transfer your data","title":"attach failed with error： java.io.IOException: Premature EOF","body":"<p>I guess I've found the reason：\nthe paratemers of &quot;properties&quot; transfer to aim JVM cannot be too long in:\nvm.loadAgent(attachJarPath, properties);\nbecause of the limit of attach Ti support;</p>\n<p>you can use a file to transfer your data</p>\n"}],"owner":{"account_id":27740049,"reputation":1,"user_id":21176706,"display_name":"hxxx"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75406063,"answer_count":1,"score":0,"last_activity_date":1675991635,"creation_date":1675908194,"question_id":75393488,"body_markdown":"while I try to attach a process with code like:\r\n\r\n    vm = VirtualMachine.attach(pid);\r\n    vm.loadAgent(attachJarPath, properties);\r\n\r\nI got this error:\r\n\r\n```\r\njava.io.IOException: Premature EOF\r\nat sun.tools.attach.HotSpotVirtualMachine.readInt(HotSpotVirtualMachine.java:248)\r\nat sun.tools.attach.LinuxVirtualMachine.execute(LinuxVirtualMachine.java:199)\r\nat sun.tools.attach.HotSpotVirtualMachine.loadAgentLibrary(HotSpotVirtualMachine.java:58)\r\nat sun.tools.attach.HotSpotVirtualMachine.loadAgentLibrary(HotSpotVirtualMachine.java:79)\r\nat sun.tools.attach.HotSpotVirtualMachine.loadAgent(HotSpotVirtualMachine.java:103)\r\n```\r\n\r\nwhat can i do to fix this error?","title":"attach failed with error： java.io.IOException: Premature EOF","body":"<p>while I try to attach a process with code like:</p>\n<pre><code>vm = VirtualMachine.attach(pid);\nvm.loadAgent(attachJarPath, properties);\n</code></pre>\n<p>I got this error:</p>\n<pre><code>java.io.IOException: Premature EOF\nat sun.tools.attach.HotSpotVirtualMachine.readInt(HotSpotVirtualMachine.java:248)\nat sun.tools.attach.LinuxVirtualMachine.execute(LinuxVirtualMachine.java:199)\nat sun.tools.attach.HotSpotVirtualMachine.loadAgentLibrary(HotSpotVirtualMachine.java:58)\nat sun.tools.attach.HotSpotVirtualMachine.loadAgentLibrary(HotSpotVirtualMachine.java:79)\nat sun.tools.attach.HotSpotVirtualMachine.loadAgent(HotSpotVirtualMachine.java:103)\n</code></pre>\n<p>what can i do to fix this error?</p>\n"},{"tags":["java","exception","java-stream","completable-future"],"comments":[{"owner":{"account_id":5168089,"reputation":26671,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":1,"creation_date":1675954650,"post_id":75400036,"comment_id":133042308,"body_markdown":"You would need to call `join` on the CompletionStage returned by `doSomething`. Right now you are ignoring its result.","body":"You would need to call <code>join</code> on the CompletionStage returned by <code>doSomething</code>. Right now you are ignoring its result."},{"owner":{"account_id":27641,"reputation":9774,"user_id":73137,"accept_rate":89,"display_name":"SyncMaster"},"score":0,"creation_date":1675955902,"post_id":75400036,"comment_id":133042746,"body_markdown":"Thanks! Is it fine to `return null` the way I am doing in `doSomething`? Because I want to do `doSomething().toCompletableFuture().join()` and this shouldn&#39;t run into a NPE.","body":"Thanks! Is it fine to <code>return null</code> the way I am doing in <code>doSomething</code>? Because I want to do <code>doSomething().toCompletableFuture().join()</code> and this shouldn&#39;t run into a NPE."},{"owner":{"account_id":5168089,"reputation":26671,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":1,"creation_date":1675956223,"post_id":75400036,"comment_id":133042866,"body_markdown":"If `someCondition` is false, then that would throw an NPE. You could instead return a completed future to avoid that, like this: `CompletableFuture.&lt;Void&gt;completedFuture(null);`.","body":"If <code>someCondition</code> is false, then that would throw an NPE. You could instead return a completed future to avoid that, like this: <code>CompletableFuture.&lt;Void&gt;completedFuture(null);</code>."}],"answers":[{"tags":[],"owner":{"account_id":27641,"reputation":9774,"user_id":73137,"accept_rate":89,"display_name":"SyncMaster"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675990873,"creation_date":1675990873,"answer_id":75405993,"question_id":75400036,"body_markdown":"Adding to @marstran&#39;s suggestion, an alternate way to do this would be to use `thenCompose` to convert `Result` into `CompletationStage&lt;Result&gt;`. \r\n\r\n    public CompletionStage&lt;Result&gt; computeResult() {\r\n        return CompletableFuture.allOf(a, b)\r\n            .thenCompose(ignore -&gt; { // Use thenCompose here\r\n                final aValue = a.join();\r\n                final bValue = b.join();\r\n    \r\n                return doSomething()\r\n                    .thenApply(ignore -&gt;\r\n                        buildResult());\r\n            });\r\n    }\r\n\r\n    private CompletionStage&lt;Void&gt; doSomething() {\r\n    \r\n        if (someCondition) {\r\n            return anotherService.shouldPerformTask()\r\n            .thenApply(shouldPerform -&gt; {\r\n                // Do something\r\n                if (someCheck) {\r\n                    throw new RuntimeException(&quot;message&quot;);  \r\n                }\r\n            return null;\r\n            });\r\n        }\r\n        return completedFuture(null);\r\n    }","title":"Throw exception from CompletableFuture thenApply","body":"<p>Adding to @marstran's suggestion, an alternate way to do this would be to use <code>thenCompose</code> to convert <code>Result</code> into <code>CompletationStage&lt;Result&gt;</code>.</p>\n<pre><code>public CompletionStage&lt;Result&gt; computeResult() {\n    return CompletableFuture.allOf(a, b)\n        .thenCompose(ignore -&gt; { // Use thenCompose here\n            final aValue = a.join();\n            final bValue = b.join();\n\n            return doSomething()\n                .thenApply(ignore -&gt;\n                    buildResult());\n        });\n}\n\nprivate CompletionStage&lt;Void&gt; doSomething() {\n\n    if (someCondition) {\n        return anotherService.shouldPerformTask()\n        .thenApply(shouldPerform -&gt; {\n            // Do something\n            if (someCheck) {\n                throw new RuntimeException(&quot;message&quot;);  \n            }\n        return null;\n        });\n    }\n    return completedFuture(null);\n}\n</code></pre>\n"}],"owner":{"account_id":27641,"reputation":9774,"user_id":73137,"accept_rate":89,"display_name":"SyncMaster"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":317,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75405993,"answer_count":1,"score":0,"last_activity_date":1675990873,"creation_date":1675952798,"question_id":75400036,"body_markdown":"Say I have the following code. I want to throw an exception from within a `thenApply` block to the parent. I want to make sure I am returning and throwing the correct values from the sub-function `doSomething` and handling it properly in the caller. Because if I write a simple unit test, I don&#39;t get the exception from `doSomething`.\r\n\r\nA function that does the main work and returns a `CompletionStage&lt;Result&gt;`\r\n\r\n    public CompletionStage&lt;Result&gt; computeResult() {\r\n    \treturn CompletableFuture.allOf(a, b)\r\n    \t\t.thenApply(ignore -&gt; {\r\n    \t\t\tfinal aValue = a.join();\r\n    \t\t\tfinal bValue = b.join();\r\n    \r\n    \t\t\tdoSomething()\r\n    \t\t\t\t.thenApply(ignore -&gt;\r\n    \t\t\t\t\tbuildResult());\r\n    \r\n    \t\t\treturn null;\r\n    \t\t});\r\n    \t\r\n    }\r\n\r\n\r\nA private function that does some validations by calling another API and throws an exception or returns nothing\r\n\r\n    private CompletionStage&lt;Void&gt; doSomething() {\r\n    \r\n    \tif (someCondition) {\r\n    \t\treturn anotherService.shouldPerformTask()\r\n    \t\t.thenApply(shouldPerform -&gt; {\r\n    \t\t\t// Do something\r\n    \t\t\tif (someCheck) {\r\n    \t\t\t\tthrow new RuntimeException(&quot;message&quot;);  // How to make sure this exception gets returned all the up to &quot;completableFuture.allOf&quot;?\r\n    \t\t\t}\r\n    \t\treturn null;\r\n    \t\t});\r\n    \t}\r\n    \treturn null;\r\n    }\r\n\r\nThis is the function signature of buildResult\r\n\r\n    private Result buildResult();\r\n\r\nThis is how the other API call looks\r\n\r\n    anotherService:\r\n    CompletionStage&lt;Boolean&gt; shouldPerformTask()\r\n\r\nI am expecting the following assertion to work. i.e. I want `computeResult` to throw a CompletionException with cause and message as `new RuntimeException(&quot;message&quot;)`\r\n\r\n```\r\nCompletionException e = assertThrows(CompletionException.class, \r\n\t\t() -&gt; testClass.computeResult()\r\n\t\t\t.toCompletableFuture().join());\r\nassertTrue(e.getMessage().contains(&quot;message&quot;));\r\n```\r\n\r\n","title":"Throw exception from CompletableFuture thenApply","body":"<p>Say I have the following code. I want to throw an exception from within a <code>thenApply</code> block to the parent. I want to make sure I am returning and throwing the correct values from the sub-function <code>doSomething</code> and handling it properly in the caller. Because if I write a simple unit test, I don't get the exception from <code>doSomething</code>.</p>\n<p>A function that does the main work and returns a <code>CompletionStage&lt;Result&gt;</code></p>\n<pre><code>public CompletionStage&lt;Result&gt; computeResult() {\n    return CompletableFuture.allOf(a, b)\n        .thenApply(ignore -&gt; {\n            final aValue = a.join();\n            final bValue = b.join();\n\n            doSomething()\n                .thenApply(ignore -&gt;\n                    buildResult());\n\n            return null;\n        });\n    \n}\n</code></pre>\n<p>A private function that does some validations by calling another API and throws an exception or returns nothing</p>\n<pre><code>private CompletionStage&lt;Void&gt; doSomething() {\n\n    if (someCondition) {\n        return anotherService.shouldPerformTask()\n        .thenApply(shouldPerform -&gt; {\n            // Do something\n            if (someCheck) {\n                throw new RuntimeException(&quot;message&quot;);  // How to make sure this exception gets returned all the up to &quot;completableFuture.allOf&quot;?\n            }\n        return null;\n        });\n    }\n    return null;\n}\n</code></pre>\n<p>This is the function signature of buildResult</p>\n<pre><code>private Result buildResult();\n</code></pre>\n<p>This is how the other API call looks</p>\n<pre><code>anotherService:\nCompletionStage&lt;Boolean&gt; shouldPerformTask()\n</code></pre>\n<p>I am expecting the following assertion to work. i.e. I want <code>computeResult</code> to throw a CompletionException with cause and message as <code>new RuntimeException(&quot;message&quot;)</code></p>\n<pre><code>CompletionException e = assertThrows(CompletionException.class, \n        () -&gt; testClass.computeResult()\n            .toCompletableFuture().join());\nassertTrue(e.getMessage().contains(&quot;message&quot;));\n</code></pre>\n"},{"tags":["java","arrays","string"],"comments":[{"owner":{"account_id":27540947,"reputation":983,"user_id":21017714,"display_name":"Enowneb"},"score":1,"creation_date":1675904743,"post_id":75392593,"comment_id":133030507,"body_markdown":"You have to take a look to these lines: ```return &quot;-1&quot;;```, ```return word.substring(index) + word.substring(0, index) + &quot;ay&quot;;```. Return within a for-loop does not mean it will continue with the loop, but your function is finished immediately and with that value returned.","body":"You have to take a look to these lines: <code>return &quot;-1&quot;;</code>, <code>return word.substring(index) + word.substring(0, index) + &quot;ay&quot;;</code>. Return within a for-loop does not mean it will continue with the loop, but your function is finished immediately and with that value returned."},{"owner":{"account_id":23753638,"reputation":3,"user_id":21176096,"display_name":"RETERON"},"score":0,"creation_date":1675974511,"post_id":75392593,"comment_id":133048819,"body_markdown":"@Enowneb Thank you, as I didn&#39;t know this about loops, but is there a way to get around this? Or maybe a way to replace using returns inside of the loop?","body":"@Enowneb Thank you, as I didn&#39;t know this about loops, but is there a way to get around this? Or maybe a way to replace using returns inside of the loop?"}],"answers":[{"tags":[],"owner":{"account_id":27540947,"reputation":983,"user_id":21017714,"display_name":"Enowneb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675990619,"creation_date":1675990619,"answer_id":75405967,"question_id":75392593,"body_markdown":"The reason why the code will just return the first word and stop processing the remaining lies here:\r\n```java\r\nString[] words = oldWord.split(&quot; &quot;);\r\nfor (String word : words) {\r\n    int len = word.length();\r\n    int index = -1;\r\n    for (int i = 0; i &lt; len; i++) {\r\n        if (isVowel(word.charAt(i))) {\r\n            index = i;\r\n            break;\r\n        }\r\n    }\r\n    if (index == -1)\r\n        return &quot;-1&quot;; // Stop processing anymore\r\n    return word.substring(index) + word.substring(0, index) + &quot;ay&quot;; // Stop processing anymore\r\n}\r\n```\r\nThe above is the for-loop that processes all the separate words from your sentence. However, a ```return``` statement will stop proceeding your ```pigLatin()``` function further and directly returns that value. So if you want to process all words from the sentence, you must not call ```return``` within the for-loop.\r\n\r\nSo what you can do, is to create another variable to hold your processed words. Like:\r\n```java\r\nString[] words = oldWord.split(&quot; &quot;);\r\n// Create another String array to hold your processed words\r\nString[] pigLatinWords = new String[words.length];\r\nint wordCounter = 0;\r\nfor (String word : words) {\r\n    int len = word.length();\r\n    int index = -1;\r\n    for (int i = 0; i &lt; len; i++) {\r\n        if (isVowel(word.charAt(i))) {\r\n            index = i;\r\n            break;\r\n        }\r\n    }\r\n    if (index == -1) {\r\n        // Store the processed word in this new Array\r\n        pigLatinWords[wordCounter++] = word;\r\n        // Continue with the for-loop without processing the code below\r\n        continue;\r\n    }\r\n    // Store the processed word in this new Array\r\n    pigLatinWords[wordCounter++] = word.substring(index) + word.substring(0, index) + &quot;ay&quot;;\r\n}\r\n```\r\nAnd at the end you should call return like:\r\n```java\r\nreturn String.join(&quot; &quot;, pigLatinWords);\r\n```\r\nOr you should refer to [this](https://stackoverflow.com/questions/5283444/convert-array-of-strings-into-a-string-in-java) to implement your own concatenation function if you are using *Java 7 or below*.\r\n\r\nChanging the above code should produce a result matching with your expectation:  \r\n&gt; What sentance should I translate?  \r\n&gt; graphic graphic  \r\n&gt;  \r\n&gt; ...  \r\n&gt;  \r\n&gt; Your sentance in Pig Latin is: aphicgray aphicgray\r\n\r\nAnd note that you should not call ```toString()``` on ```String[]```, or you will end up having something like the hexadecimal hashcode of ```String[]``` printed:\r\n&gt; Your sentance in Pig Latin is: [Ljava.lang.String;@7a79be86","title":"What changes do I make to my code to allow more than one word to be translated to Pig Latin and printed?","body":"<p>The reason why the code will just return the first word and stop processing the remaining lies here:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[] words = oldWord.split(&quot; &quot;);\nfor (String word : words) {\n    int len = word.length();\n    int index = -1;\n    for (int i = 0; i &lt; len; i++) {\n        if (isVowel(word.charAt(i))) {\n            index = i;\n            break;\n        }\n    }\n    if (index == -1)\n        return &quot;-1&quot;; // Stop processing anymore\n    return word.substring(index) + word.substring(0, index) + &quot;ay&quot;; // Stop processing anymore\n}\n</code></pre>\n<p>The above is the for-loop that processes all the separate words from your sentence. However, a <code>return</code> statement will stop proceeding your <code>pigLatin()</code> function further and directly returns that value. So if you want to process all words from the sentence, you must not call <code>return</code> within the for-loop.</p>\n<p>So what you can do, is to create another variable to hold your processed words. Like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[] words = oldWord.split(&quot; &quot;);\n// Create another String array to hold your processed words\nString[] pigLatinWords = new String[words.length];\nint wordCounter = 0;\nfor (String word : words) {\n    int len = word.length();\n    int index = -1;\n    for (int i = 0; i &lt; len; i++) {\n        if (isVowel(word.charAt(i))) {\n            index = i;\n            break;\n        }\n    }\n    if (index == -1) {\n        // Store the processed word in this new Array\n        pigLatinWords[wordCounter++] = word;\n        // Continue with the for-loop without processing the code below\n        continue;\n    }\n    // Store the processed word in this new Array\n    pigLatinWords[wordCounter++] = word.substring(index) + word.substring(0, index) + &quot;ay&quot;;\n}\n</code></pre>\n<p>And at the end you should call return like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>return String.join(&quot; &quot;, pigLatinWords);\n</code></pre>\n<p>Or you should refer to <a href=\"https://stackoverflow.com/questions/5283444/convert-array-of-strings-into-a-string-in-java\">this</a> to implement your own concatenation function if you are using <em>Java 7 or below</em>.</p>\n<p>Changing the above code should produce a result matching with your expectation:</p>\n<blockquote>\n<p>What sentance should I translate?<br />\ngraphic graphic</p>\n<p>...</p>\n<p>Your sentance in Pig Latin is: aphicgray aphicgray</p>\n</blockquote>\n<p>And note that you should not call <code>toString()</code> on <code>String[]</code>, or you will end up having something like the hexadecimal hashcode of <code>String[]</code> printed:</p>\n<blockquote>\n<p>Your sentance in Pig Latin is: [Ljava.lang.String;@7a79be86</p>\n</blockquote>\n"}],"owner":{"account_id":23753638,"reputation":3,"user_id":21176096,"display_name":"RETERON"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75405967,"answer_count":1,"score":0,"last_activity_date":1675990619,"creation_date":1675897610,"question_id":75392593,"body_markdown":"I made a Java Script that took word input and turned it into a Pig Latin version of said word:\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\nclass Main {\r\n  static Scanner myObj = new Scanner(System.in);\r\n\r\n  static boolean isVowel(char c) {\r\n    return (c == &#39;A&#39; || c == &#39;a&#39; || c == &#39;E&#39; || c == &#39;e&#39; || c == &#39;I&#39; || c == &#39;i&#39; || c == &#39;O&#39; || c == &#39;o&#39; || c == &#39;U&#39;\r\n        || c == &#39;u&#39;);\r\n  }\r\n\r\n  static String pigLatin(String oldWord) {\r\n    System.out.println(&quot;\\r\\n&quot;);\r\n    System.out.println(&quot;What word should I translate?&quot;);\r\n    oldWord = myObj.nextLine();\r\n    System.out.println(&quot;&quot;);\r\n    try {\r\n      Thread.sleep(800);\r\n    } catch (InterruptedException e) {\r\n      System.out.println(e);\r\n    }\r\n    System.out.print(&quot;.&quot;);\r\n    try {\r\n      Thread.sleep(500);\r\n    } catch (InterruptedException e) {\r\n      System.out.println(e);\r\n    }\r\n    System.out.print(&quot;.&quot;);\r\n    try {\r\n      Thread.sleep(500);\r\n    } catch (InterruptedException e) {\r\n      System.out.println(e);\r\n    }\r\n    System.out.print(&quot;.&quot;);\r\n    try {\r\n      Thread.sleep(500);\r\n    } catch (InterruptedException e) {\r\n      System.out.println(e);\r\n    }\r\n    System.out.print(&quot;\\r\\n&quot;);\r\n    System.out.print(&quot;\\r\\n&quot;);\r\n    try {\r\n      Thread.sleep(500);\r\n    } catch (InterruptedException e) {\r\n      System.out.println(e);\r\n    }\r\n    int len = oldWord.length();\r\n    int index = -1;\r\n    for (int i = 0; i &lt; len; i++) {\r\n      if (isVowel(oldWord.charAt(i))) {\r\n        index = i;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (index == -1)\r\n      return &quot;-1&quot;;\r\n\r\n    return oldWord.substring(index) + oldWord.substring(0, index) + &quot;ay&quot;;\r\n  }\r\n\r\n  public static void main(String[] args) {\r\n    String newWord = pigLatin(&quot;graphic&quot;);\r\n    if (newWord == &quot;-1&quot;)\r\n      System.out.print(&quot;No vowels found. Pig Latin not possible&quot;);\r\n    else {\r\n      System.out.print(&quot;Your word in Pig Latin is: \\033[1m&quot; + newWord + &quot;\\033[0m&quot;);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThis takes whatever is typed, moves all characters before the first vowel to the end, and then adds &quot;ay&quot; to it. I am now trying to change this to make it translate a sentence instead, so I decided to try using a string array for this, but I probably did something stupid or missed something important because I ended up with this code:\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\nclass Main {\r\n  static Scanner myObj = new Scanner(System.in);\r\n\r\n  static boolean isVowel(char c) {\r\n    return (c == &#39;A&#39; || c == &#39;a&#39; || c == &#39;E&#39; || c == &#39;e&#39; || c == &#39;I&#39; || c == &#39;i&#39; || c == &#39;O&#39; || c == &#39;o&#39; || c == &#39;U&#39;\r\n        || c == &#39;u&#39;);\r\n  }\r\n\r\n  static String pigLatin(String sentance) {\r\n    System.out.println(&quot;\\r\\n&quot;);\r\n    System.out.println(&quot;What sentance should I translate?&quot;);\r\n    String oldWord = myObj.nextLine();\r\n    System.out.println(&quot;&quot;);\r\n    try {\r\n      Thread.sleep(800);\r\n    } catch (InterruptedException e) {\r\n      System.out.println(e);\r\n    }\r\n    System.out.print(&quot;.&quot;);\r\n    try {\r\n      Thread.sleep(500);\r\n    } catch (InterruptedException e) {\r\n      System.out.println(e);\r\n    }\r\n    System.out.print(&quot;.&quot;);\r\n    try {\r\n      Thread.sleep(500);\r\n    } catch (InterruptedException e) {\r\n      System.out.println(e);\r\n    }\r\n    System.out.print(&quot;.&quot;);\r\n    try {\r\n      Thread.sleep(500);\r\n    } catch (InterruptedException e) {\r\n      System.out.println(e);\r\n    }\r\n    System.out.print(&quot;\\r\\n&quot;);\r\n    System.out.print(&quot;\\r\\n&quot;);\r\n    try {\r\n      Thread.sleep(500);\r\n    } catch (InterruptedException e) {\r\n      System.out.println(e);\r\n    }\r\n    \r\n    String[] words = oldWord.split(&quot; &quot;);\r\n    for (String word : words) {\r\n      int len = word.length();\r\n      int index = -1;\r\n      for (int i = 0; i &lt; len; i++) {\r\n        if (isVowel(word.charAt(i))) {\r\n          index = i;\r\n          break;\r\n        }\r\n      }\r\n      if (index == -1)\r\n        return &quot;-1&quot;;\r\n      return word.substring(index) + word.substring(0, index) + &quot;ay&quot;;\r\n    }\r\n    return words.toString();\r\n  }\r\n\r\n  public static void main(String[] args) {\r\n    String newWord = pigLatin(&quot;graphic&quot;);\r\n    System.out.print(&quot;Your sentance in Pig Latin is: \\033[1m&quot; + newWord + &quot;\\033[0m&quot;);\r\n  }\r\n}\r\n```\r\n\r\nWhich just made it only translate the first word and delete the rest. I&#39;m still new to Java, and I have no idea how to fix this problem.","title":"What changes do I make to my code to allow more than one word to be translated to Pig Latin and printed?","body":"<p>I made a Java Script that took word input and turned it into a Pig Latin version of said word:</p>\n<pre><code>import java.util.Scanner;\n\nclass Main {\n  static Scanner myObj = new Scanner(System.in);\n\n  static boolean isVowel(char c) {\n    return (c == 'A' || c == 'a' || c == 'E' || c == 'e' || c == 'I' || c == 'i' || c == 'O' || c == 'o' || c == 'U'\n        || c == 'u');\n  }\n\n  static String pigLatin(String oldWord) {\n    System.out.println(&quot;\\r\\n&quot;);\n    System.out.println(&quot;What word should I translate?&quot;);\n    oldWord = myObj.nextLine();\n    System.out.println(&quot;&quot;);\n    try {\n      Thread.sleep(800);\n    } catch (InterruptedException e) {\n      System.out.println(e);\n    }\n    System.out.print(&quot;.&quot;);\n    try {\n      Thread.sleep(500);\n    } catch (InterruptedException e) {\n      System.out.println(e);\n    }\n    System.out.print(&quot;.&quot;);\n    try {\n      Thread.sleep(500);\n    } catch (InterruptedException e) {\n      System.out.println(e);\n    }\n    System.out.print(&quot;.&quot;);\n    try {\n      Thread.sleep(500);\n    } catch (InterruptedException e) {\n      System.out.println(e);\n    }\n    System.out.print(&quot;\\r\\n&quot;);\n    System.out.print(&quot;\\r\\n&quot;);\n    try {\n      Thread.sleep(500);\n    } catch (InterruptedException e) {\n      System.out.println(e);\n    }\n    int len = oldWord.length();\n    int index = -1;\n    for (int i = 0; i &lt; len; i++) {\n      if (isVowel(oldWord.charAt(i))) {\n        index = i;\n        break;\n      }\n    }\n\n    if (index == -1)\n      return &quot;-1&quot;;\n\n    return oldWord.substring(index) + oldWord.substring(0, index) + &quot;ay&quot;;\n  }\n\n  public static void main(String[] args) {\n    String newWord = pigLatin(&quot;graphic&quot;);\n    if (newWord == &quot;-1&quot;)\n      System.out.print(&quot;No vowels found. Pig Latin not possible&quot;);\n    else {\n      System.out.print(&quot;Your word in Pig Latin is: \\033[1m&quot; + newWord + &quot;\\033[0m&quot;);\n    }\n  }\n}\n</code></pre>\n<p>This takes whatever is typed, moves all characters before the first vowel to the end, and then adds &quot;ay&quot; to it. I am now trying to change this to make it translate a sentence instead, so I decided to try using a string array for this, but I probably did something stupid or missed something important because I ended up with this code:</p>\n<pre><code>import java.util.Scanner;\n\nclass Main {\n  static Scanner myObj = new Scanner(System.in);\n\n  static boolean isVowel(char c) {\n    return (c == 'A' || c == 'a' || c == 'E' || c == 'e' || c == 'I' || c == 'i' || c == 'O' || c == 'o' || c == 'U'\n        || c == 'u');\n  }\n\n  static String pigLatin(String sentance) {\n    System.out.println(&quot;\\r\\n&quot;);\n    System.out.println(&quot;What sentance should I translate?&quot;);\n    String oldWord = myObj.nextLine();\n    System.out.println(&quot;&quot;);\n    try {\n      Thread.sleep(800);\n    } catch (InterruptedException e) {\n      System.out.println(e);\n    }\n    System.out.print(&quot;.&quot;);\n    try {\n      Thread.sleep(500);\n    } catch (InterruptedException e) {\n      System.out.println(e);\n    }\n    System.out.print(&quot;.&quot;);\n    try {\n      Thread.sleep(500);\n    } catch (InterruptedException e) {\n      System.out.println(e);\n    }\n    System.out.print(&quot;.&quot;);\n    try {\n      Thread.sleep(500);\n    } catch (InterruptedException e) {\n      System.out.println(e);\n    }\n    System.out.print(&quot;\\r\\n&quot;);\n    System.out.print(&quot;\\r\\n&quot;);\n    try {\n      Thread.sleep(500);\n    } catch (InterruptedException e) {\n      System.out.println(e);\n    }\n    \n    String[] words = oldWord.split(&quot; &quot;);\n    for (String word : words) {\n      int len = word.length();\n      int index = -1;\n      for (int i = 0; i &lt; len; i++) {\n        if (isVowel(word.charAt(i))) {\n          index = i;\n          break;\n        }\n      }\n      if (index == -1)\n        return &quot;-1&quot;;\n      return word.substring(index) + word.substring(0, index) + &quot;ay&quot;;\n    }\n    return words.toString();\n  }\n\n  public static void main(String[] args) {\n    String newWord = pigLatin(&quot;graphic&quot;);\n    System.out.print(&quot;Your sentance in Pig Latin is: \\033[1m&quot; + newWord + &quot;\\033[0m&quot;);\n  }\n}\n</code></pre>\n<p>Which just made it only translate the first word and delete the rest. I'm still new to Java, and I have no idea how to fix this problem.</p>\n"},{"tags":["java","opengl","glsl"],"owner":{"account_id":997984,"reputation":428,"user_id":1013477,"accept_rate":33,"display_name":"Box Very"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675990203,"creation_date":1675990203,"question_id":75405930,"body_markdown":"I copied exact code snippet from book - **Computer Graphics Programming in OpenGL with JAVA** (3rd edition).\r\n\r\nHowever, the GLSL code seems doesn&#39;t load/run. It just show white point in the middle, it suppose to be blue point.\r\n\r\nI don&#39;t think any typo in the code, I use JDK11, I noticed there are some warning before running the program:\r\n\r\n&gt;WARNING: An illegal reflective access operation has occurred&lt;br/&gt;\r\nWARNING: Illegal reflective access by com.jogamp.common.os.NativeLibrary$3 (file:/D:/JOGL/jogamp-all-platforms/jar/gluegen.jar) to method java.lang.ClassLoader.findLibrary(java.lang.String)&lt;br/&gt;\r\nWARNING: Please consider reporting this to the maintainers of com.jogamp.common.os.NativeLibrary$3&lt;br/&gt;\r\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations&lt;br/&gt;\r\nWARNING: All illegal access operations will be denied in a future release\r\n\r\nHowever, I don&#39;t think it related with GLSL can&#39;t render. Any idea?\r\n\r\nJust attached the code and the final screenshot.\r\n[![Final Window Show][1]][1]\r\n\r\n```\r\nimport javax.swing.JFrame;\r\nimport static com.jogamp.opengl.GL4.*;\r\nimport com.jogamp.opengl.*;\r\nimport com.jogamp.opengl.awt.GLCanvas;\r\n\r\npublic class Code extends JFrame implements GLEventListener {\r\n\tprivate GLCanvas myCanvas;\r\n\t\r\n\tprivate int renderingProgram;\r\n\tprivate int vao[]=new int[1];\r\n\t\r\n\tpublic Code() {\r\n\t\tsetTitle(&quot;Chapter- &quot;);\r\n\t\tsetSize(600,400);\r\n\t\tsetLocation(200,200);\r\n\t\tmyCanvas=new GLCanvas();\r\n\t\tmyCanvas.addGLEventListener(this);\r\n\t\tadd(myCanvas);\t\t\r\n\t\tsetVisible(true);\r\n\t}\r\n\t\r\n\tpublic void display(GLAutoDrawable drawable) {\r\n\t\tGL4 gl=(GL4) GLContext.getCurrentGL();\r\n\t\tgl.glClearColor(1.0f, 0.0f, 0.0f, 1.0f);\r\n\t\tgl.glClear(GL_COLOR_BUFFER_BIT);\r\n\t\tgl.glUseProgram(renderingProgram);\r\n\t\tgl.glPointSize(30.0f);\r\n\t\tgl.glDrawArrays(GL_POINTS, 0, 1);\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tnew Code();\r\n\t}\r\n\t\r\n\tpublic void init(GLAutoDrawable drawable) {\r\n\t\tGL4 gl=(GL4)GLContext.getCurrentGL();\r\n\t\trenderingProgram=createShaderProgram();\r\n\t\tgl.glGenVertexArrays(vao.length,vao,0);\r\n\t\tgl.glBindVertexArray(vao[0]);\r\n\t}\r\n\t\r\n\tprivate int createShaderProgram() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tGL4 gl =(GL4)GLContext.getCurrentGL();\r\n\t\tString vshaderSource[]= {\r\n\t\t\t\t&quot;#version 430 \\n&quot;,\r\n\t\t\t\t&quot;void main(void)\\n&quot;,\r\n\t\t\t\t&quot;{ gl_Position=vec4(0.0,0.0,0.0,1,0); }\\n&quot;,\r\n\t\t};\r\n\t\t\r\n\r\n\t\tString fshaderSource[]= {\r\n\t\t\t&quot;#version 430 \\n&quot;,\r\n\t\t\t&quot;out vec4 color; \\n&quot;,\r\n\t\t\t&quot;void main(void) \\n&quot;,\r\n\t\t\t&quot;{ color=vec4(0.0,0.0,1.0,1.0);}\\n&quot;,\r\n\t\t}; //blue color\r\n\t\t\r\n\t\tint vShader=gl.glCreateShader(GL_VERTEX_SHADER);\r\n\t\tgl.glShaderSource(vShader,3,vshaderSource,null,0);\r\n\t\tgl.glCompileShader(vShader);\r\n\t\t\r\n\t\tint fShader=gl.glCreateShader(GL_FRAGMENT_SHADER);\r\n\t\tgl.glShaderSource(fShader,4,fshaderSource,null,0);\r\n\t\tgl.glCompileShader(fShader);\r\n\t\t\r\n\t\tint vfProgram=gl.glCreateProgram();\r\n\t\tgl.glAttachShader(vfProgram, vShader);\r\n\t\tgl.glAttachShader(vfProgram, fShader);\r\n\t\tgl.glLinkProgram(vfProgram);\r\n\t\t\r\n\t\tgl.glDeleteShader(vShader);\r\n\t\tgl.glDeleteShader(fShader);\r\n\t\treturn vfProgram;\r\n\t}\r\n\r\n\tpublic void reshape(GLAutoDrawable drawable, int x, int y, int width, int height) {}\r\n\tpublic void dispose(GLAutoDrawable drawable) {}\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TKocC.png","title":"Can&#39;t get GLSL run in Java JOGL example code","body":"<p>I copied exact code snippet from book - <strong>Computer Graphics Programming in OpenGL with JAVA</strong> (3rd edition).</p>\n<p>However, the GLSL code seems doesn't load/run. It just show white point in the middle, it suppose to be blue point.</p>\n<p>I don't think any typo in the code, I use JDK11, I noticed there are some warning before running the program:</p>\n<blockquote>\n<p>WARNING: An illegal reflective access operation has occurred<br/>\nWARNING: Illegal reflective access by com.jogamp.common.os.NativeLibrary$3 (file:/D:/JOGL/jogamp-all-platforms/jar/gluegen.jar) to method java.lang.ClassLoader.findLibrary(java.lang.String)<br/>\nWARNING: Please consider reporting this to the maintainers of com.jogamp.common.os.NativeLibrary$3<br/>\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations<br/>\nWARNING: All illegal access operations will be denied in a future release</p>\n</blockquote>\n<p>However, I don't think it related with GLSL can't render. Any idea?</p>\n<p>Just attached the code and the final screenshot.\n<a href=\"https://i.stack.imgur.com/TKocC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TKocC.png\" alt=\"Final Window Show\" /></a></p>\n<pre><code>import javax.swing.JFrame;\nimport static com.jogamp.opengl.GL4.*;\nimport com.jogamp.opengl.*;\nimport com.jogamp.opengl.awt.GLCanvas;\n\npublic class Code extends JFrame implements GLEventListener {\n    private GLCanvas myCanvas;\n    \n    private int renderingProgram;\n    private int vao[]=new int[1];\n    \n    public Code() {\n        setTitle(&quot;Chapter- &quot;);\n        setSize(600,400);\n        setLocation(200,200);\n        myCanvas=new GLCanvas();\n        myCanvas.addGLEventListener(this);\n        add(myCanvas);      \n        setVisible(true);\n    }\n    \n    public void display(GLAutoDrawable drawable) {\n        GL4 gl=(GL4) GLContext.getCurrentGL();\n        gl.glClearColor(1.0f, 0.0f, 0.0f, 1.0f);\n        gl.glClear(GL_COLOR_BUFFER_BIT);\n        gl.glUseProgram(renderingProgram);\n        gl.glPointSize(30.0f);\n        gl.glDrawArrays(GL_POINTS, 0, 1);\n    }\n    \n    public static void main(String[] args) {\n        new Code();\n    }\n    \n    public void init(GLAutoDrawable drawable) {\n        GL4 gl=(GL4)GLContext.getCurrentGL();\n        renderingProgram=createShaderProgram();\n        gl.glGenVertexArrays(vao.length,vao,0);\n        gl.glBindVertexArray(vao[0]);\n    }\n    \n    private int createShaderProgram() {\n        // TODO Auto-generated method stub\n        GL4 gl =(GL4)GLContext.getCurrentGL();\n        String vshaderSource[]= {\n                &quot;#version 430 \\n&quot;,\n                &quot;void main(void)\\n&quot;,\n                &quot;{ gl_Position=vec4(0.0,0.0,0.0,1,0); }\\n&quot;,\n        };\n        \n\n        String fshaderSource[]= {\n            &quot;#version 430 \\n&quot;,\n            &quot;out vec4 color; \\n&quot;,\n            &quot;void main(void) \\n&quot;,\n            &quot;{ color=vec4(0.0,0.0,1.0,1.0);}\\n&quot;,\n        }; //blue color\n        \n        int vShader=gl.glCreateShader(GL_VERTEX_SHADER);\n        gl.glShaderSource(vShader,3,vshaderSource,null,0);\n        gl.glCompileShader(vShader);\n        \n        int fShader=gl.glCreateShader(GL_FRAGMENT_SHADER);\n        gl.glShaderSource(fShader,4,fshaderSource,null,0);\n        gl.glCompileShader(fShader);\n        \n        int vfProgram=gl.glCreateProgram();\n        gl.glAttachShader(vfProgram, vShader);\n        gl.glAttachShader(vfProgram, fShader);\n        gl.glLinkProgram(vfProgram);\n        \n        gl.glDeleteShader(vShader);\n        gl.glDeleteShader(fShader);\n        return vfProgram;\n    }\n\n    public void reshape(GLAutoDrawable drawable, int x, int y, int width, int height) {}\n    public void dispose(GLAutoDrawable drawable) {}\n}\n</code></pre>\n"},{"tags":["java","android","android-studio","robolectric","robolectric-gradle-plugin"],"comments":[{"owner":{"account_id":12292022,"reputation":849,"user_id":8968956,"display_name":"trinadh thatakula"},"score":5,"creation_date":1571812289,"post_id":58516687,"comment_id":103359710,"body_markdown":"android doesn&#39;t support android 9 yet you can use older version of Robolectric","body":"android doesn&#39;t support android 9 yet you can use older version of Robolectric"},{"owner":{"account_id":10357681,"reputation":826,"user_id":7639056,"display_name":"Kaushik Burkule"},"score":3,"creation_date":1571812295,"post_id":58516687,"comment_id":103359713,"body_markdown":"Take a look at this https://stackoverflow.com/a/47627603/7639056","body":"Take a look at this <a href=\"https://stackoverflow.com/a/47627603/7639056\">stackoverflow.com/a/47627603/7639056</a>"},{"owner":{"account_id":12292022,"reputation":849,"user_id":8968956,"display_name":"trinadh thatakula"},"score":1,"creation_date":1571812499,"post_id":58516687,"comment_id":103359802,"body_markdown":"yes android itself doesn&#39;t support JDK9 yet but studio can as it is built over IntelliJ IDE","body":"yes android itself doesn&#39;t support JDK9 yet but studio can as it is built over IntelliJ IDE"}],"answers":[{"tags":[],"owner":{"account_id":5966678,"reputation":3016,"user_id":4690298,"display_name":"Amjad Alwareh"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1667041352,"creation_date":1571812354,"answer_id":58516755,"question_id":58516687,"body_markdown":"You can&#39;t use Java 9, Android only supports till Java 8.\r\n\r\nYou should use the JDK version that comes with Android Studio, no need for side alone JDK. The current JDK version is based on OpenJDK 8.","title":"How to add Java 9 to Android Studio?","body":"<p>You can't use Java 9, Android only supports till Java 8.</p>\n<p>You should use the JDK version that comes with Android Studio, no need for side alone JDK. The current JDK version is based on OpenJDK 8.</p>\n"},{"tags":[],"owner":{"account_id":12292022,"reputation":849,"user_id":8968956,"display_name":"trinadh thatakula"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1571812878,"creation_date":1571812878,"answer_id":58516861,"question_id":58516687,"body_markdown":"I don&#39;t guarantee that it will work but you can set JDK to any version from the project Structure Option \r\nFile&gt;Project Structure&gt;SDK Location&gt;&#39;change JDK location here&#39;\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nsorry but it&#39;s not working either i have tried to select JDK9 but i got a prompt like this[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MJg57.png\r\n  [2]: https://i.stack.imgur.com/kkJsB.png","title":"How to add Java 9 to Android Studio?","body":"<p>I don't guarantee that it will work but you can set JDK to any version from the project Structure Option \nFile>Project Structure>SDK Location>'change JDK location here'</p>\n\n<p><a href=\"https://i.stack.imgur.com/MJg57.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MJg57.png\" alt=\"enter image description here\"></a></p>\n\n<p>sorry but it's not working either i have tried to select JDK9 but i got a prompt like this<a href=\"https://i.stack.imgur.com/kkJsB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kkJsB.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1571813253,"creation_date":1571813253,"answer_id":58516946,"question_id":58516687,"body_markdown":"So far Android doesn&#39;t support Java 9. As per [documentation][1], Android supports all Java 7 features and a part of Java 8 features.\r\n\r\n&gt; When developing apps for Android, using Java 8 language features is\r\n&gt; optional. You can keep your project&#39;s source and target compatibility\r\n&gt; values set to Java 7, but you still need to compile using JDK 8.\r\n\r\n\r\n  [1]: https://developer.android.com/studio/write/java8-support","title":"How to add Java 9 to Android Studio?","body":"<p>So far Android doesn't support Java 9. As per <a href=\"https://developer.android.com/studio/write/java8-support\" rel=\"nofollow noreferrer\">documentation</a>, Android supports all Java 7 features and a part of Java 8 features.</p>\n\n<blockquote>\n  <p>When developing apps for Android, using Java 8 language features is\n  optional. You can keep your project's source and target compatibility\n  values set to Java 7, but you still need to compile using JDK 8.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":261539,"reputation":19938,"user_id":981715,"accept_rate":74,"display_name":"Eugen Martynov"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1571894136,"creation_date":1571894136,"answer_id":58534552,"question_id":58516687,"body_markdown":"The only workaround to run Robolectric test in the Android Studio is to change JRE for the test task.\r\n\r\nSelect IDE menu Run -&gt; Edit Configuration and then change the option from the picture to the location of JDK9:\r\n\r\n[![screenshot][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JeBCx.png","title":"How to add Java 9 to Android Studio?","body":"<p>The only workaround to run Robolectric test in the Android Studio is to change JRE for the test task.</p>\n\n<p>Select IDE menu Run -> Edit Configuration and then change the option from the picture to the location of JDK9:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JeBCx.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/JeBCx.png\" alt=\"screenshot\"></a></p>\n"},{"tags":[],"owner":{"account_id":9721711,"reputation":4590,"user_id":7210237,"display_name":"Jenea Vranceanu"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1592166094,"creation_date":1588016791,"answer_id":61467224,"question_id":58516687,"body_markdown":"# Tests can run on prior versions as a temporary workaround\r\n\r\nYou will not be able to run Robolectric against SDK 29 for now (27 April 2020), but this will likely be updated in the future. Currently, as all of the answers before me pointed out, there is no support of Java 9 or later in Android Studio.\r\n\r\nBut **if you are here to make your Robolectic tests run** you could simply avoid SDK 29 by setting the Robolectric `@Config` annotation for your class. Robolectric will simply run your tests against all of the supported SDK versions of your app except 29.\r\n\r\n## Implement\r\nSet the `maxSdk` and `minSdk` versions to run on. This can be based on the app&#39;s min and max SDK versions, or set to one version like below in order to make tests faster.\r\n\r\n```\r\nimport androidx.test.ext.junit.runners.AndroidJUnit4\r\nimport org.robolectric.annotation.Config\r\nimport org.junit.runner.RunWith\r\nimport android.os.Build\r\n\r\n@RunWith(AndroidJUnit4::class)\r\n@Config(maxSdk = Build.VERSION_CODES.P, minSdk = Build.VERSION_CODES.P) // Value of Build.VERSION_CODES.P is 28\r\nclass TestClass {\r\n...\r\n}\r\n```\r\n\r\nOf course it is just another &quot;ugly&quot; patch, but it will get you going until you&#39;ll be able to run tests against all of the desired SDKs, or at least SDK 29 and all below. \r\n\r\n","title":"How to add Java 9 to Android Studio?","body":"<h1>Tests can run on prior versions as a temporary workaround</h1>\n\n<p>You will not be able to run Robolectric against SDK 29 for now (27 April 2020), but this will likely be updated in the future. Currently, as all of the answers before me pointed out, there is no support of Java 9 or later in Android Studio.</p>\n\n<p>But <strong>if you are here to make your Robolectic tests run</strong> you could simply avoid SDK 29 by setting the Robolectric <code>@Config</code> annotation for your class. Robolectric will simply run your tests against all of the supported SDK versions of your app except 29.</p>\n\n<h2>Implement</h2>\n\n<p>Set the <code>maxSdk</code> and <code>minSdk</code> versions to run on. This can be based on the app's min and max SDK versions, or set to one version like below in order to make tests faster.</p>\n\n<pre><code>import androidx.test.ext.junit.runners.AndroidJUnit4\nimport org.robolectric.annotation.Config\nimport org.junit.runner.RunWith\nimport android.os.Build\n\n@RunWith(AndroidJUnit4::class)\n@Config(maxSdk = Build.VERSION_CODES.P, minSdk = Build.VERSION_CODES.P) // Value of Build.VERSION_CODES.P is 28\nclass TestClass {\n...\n}\n</code></pre>\n\n<p>Of course it is just another \"ugly\" patch, but it will get you going until you'll be able to run tests against all of the desired SDKs, or at least SDK 29 and all below. </p>\n"},{"tags":[],"owner":{"account_id":4705887,"reputation":71,"user_id":3808056,"display_name":"Booo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670100854,"creation_date":1670100854,"answer_id":74670635,"question_id":58516687,"body_markdown":"In Android Studio, under &quot;Build, Execution, Deployment =&gt; Gradle =&gt; Gradle JDK&quot;, you can choose the JDK version. In newer versions of Android Studio like  Artic Fox, it comes with JDK11.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/QNV8X.png","title":"How to add Java 9 to Android Studio?","body":"<p>In Android Studio, under &quot;Build, Execution, Deployment =&gt; Gradle =&gt; Gradle JDK&quot;, you can choose the JDK version. In newer versions of Android Studio like  Artic Fox, it comes with JDK11.</p>\n<p><a href=\"https://i.stack.imgur.com/QNV8X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QNV8X.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":8269656,"reputation":1123,"user_id":6217764,"display_name":"Varun A M"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12697,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":6,"score":16,"last_activity_date":1675989994,"creation_date":1571812058,"question_id":58516687,"body_markdown":"I am using Robolectric library and the latest version of it v4.3.1 requires Java 9 to run. I am trying to point JRE on edit configurations but I am not finding Java 9 in the drop-down, even though I have already installed it. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nPlease check Java 9 installed.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n  [1]: https://i.stack.imgur.com/ErOPk.png\r\n  [2]: https://i.stack.imgur.com/U5TKc.png","title":"How to add Java 9 to Android Studio?","body":"<p>I am using Robolectric library and the latest version of it v4.3.1 requires Java 9 to run. I am trying to point JRE on edit configurations but I am not finding Java 9 in the drop-down, even though I have already installed it.</p>\n<p><a href=\"https://i.stack.imgur.com/ErOPk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ErOPk.png\" alt=\"enter image description here\" /></a></p>\n<p>Please check Java 9 installed.</p>\n<p><a href=\"https://i.stack.imgur.com/U5TKc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U5TKc.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","mysql","spring","spring-boot"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1675956548,"post_id":75400458,"comment_id":133042983,"body_markdown":"Please read https://www.baeldung.com/spring-boot-configure-multiple-datasources","body":"Please read <a href=\"https://www.baeldung.com/spring-boot-configure-multiple-datasources\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-configure-multiple-datasources</a>"}],"answers":[{"tags":[],"owner":{"account_id":13068865,"reputation":357,"user_id":9443176,"display_name":"Max Aminov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675957738,"creation_date":1675957738,"answer_id":75401084,"question_id":75400458,"body_markdown":"You should not use *@Primary* annotation in this case.\r\n\r\nWhen you mark bean with @Primary, it will be selected for dependency injection\r\nMarking your beans with @Qualifier would be enough to select concrete bean.\r\n","title":"Java Spring boot multiple databases, repository is using the wrong database","body":"<p>You should not use <em>@Primary</em> annotation in this case.</p>\n<p>When you mark bean with @Primary, it will be selected for dependency injection\nMarking your beans with @Qualifier would be enough to select concrete bean.</p>\n"},{"tags":[],"owner":{"account_id":27745405,"reputation":21,"user_id":21181012,"display_name":"Ajiva"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675989743,"creation_date":1675989743,"answer_id":75405890,"question_id":75400458,"body_markdown":"I ended up using an existing project. I cloned [this repo][1], changed some names and values and it was ready to use in my own project.\r\n\r\n\r\n  [1]: https://github.com/camelya58/multiple-databases","title":"Java Spring boot multiple databases, repository is using the wrong database","body":"<p>I ended up using an existing project. I cloned <a href=\"https://github.com/camelya58/multiple-databases\" rel=\"nofollow noreferrer\">this repo</a>, changed some names and values and it was ready to use in my own project.</p>\n"}],"owner":{"account_id":27745405,"reputation":21,"user_id":21181012,"display_name":"Ajiva"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":454,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75401084,"answer_count":2,"score":1,"last_activity_date":1675989878,"creation_date":1675954813,"question_id":75400458,"body_markdown":"(help to create multiple databases in spring boot in my answer)\r\n\r\nI want to make a spring boot application for different games. The data of each game is placed in a separate database. I have been trying to connect a secondary database to my existing application, but the controller/repository keeps using the primary database.\r\n\r\nThis is what the controller for the second database looks like:\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/valorant&quot;)\r\n@CrossOrigin\r\npublic class UserController {\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;valorantDataSource&quot;)\r\n    private DataSource valorantDataSource;\r\n\r\n    @GetMapping(&quot;/users&quot;)\r\n    public Iterable&lt;User&gt; getUsers() {\r\n        return userRepository.findAll();\r\n    }\r\n}\r\n```\r\n\r\nThis is the repository that should take the data from the second database:\r\n\r\n```\r\n@Repository\r\n@Qualifier(&quot;valorantDataSource&quot;)\r\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {\r\n}\r\n\r\n```\r\n\r\nI have defined the datasources in a different file. (Adding .url(), .username() and .password() to the datasourcebuilder did not help)\r\n\r\n```\r\n@Configuration\r\npublic class DatasourceConfig {\r\n\r\n    @Primary\r\n    @Bean(name = &quot;apexDataSource&quot;)\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\r\n    public DataSource dataSource() {\r\n        return DataSourceBuilder.create().build();\r\n    }\r\n\r\n    @Bean(name = &quot;valorantDataSource&quot;)\r\n    @ConfigurationProperties(prefix = &quot;spring.second-datasource&quot;)\r\n    public DataSource valorantDataSource() {\r\n        return DataSourceBuilder.create()\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\n```\r\n# First database\r\nspring.datasource.jdbc-url=jdbc:mysql://localhost:3306/apex\r\nspring.datasource.username=root\r\nspring.datasource.password=\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n\r\n# Second database\r\nspring.second-datasource.jdbc-url=jdbc:mysql://localhost:3306/valorant\r\nspring.second-datasource.username=root\r\nspring.second-datasource.password=\r\nspring.second-datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n\r\n```\r\n\r\n\r\nWhen I used postman to go to http://localhost:8080/valorant/users, i got the error: \r\n&gt; java.sql.SQLSyntaxErrorException: Table &#39;apex.user&#39; doesn&#39;t exist\r\n\r\nSo it seems like the application is trying to look in the wrong database.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThanks in advance.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NDs0E.png","title":"Java Spring boot multiple databases, repository is using the wrong database","body":"<p>(help to create multiple databases in spring boot in my answer)</p>\n<p>I want to make a spring boot application for different games. The data of each game is placed in a separate database. I have been trying to connect a secondary database to my existing application, but the controller/repository keeps using the primary database.</p>\n<p>This is what the controller for the second database looks like:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/valorant&quot;)\n@CrossOrigin\npublic class UserController {\n    @Autowired\n    private UserRepository userRepository;\n\n    @Autowired\n    @Qualifier(&quot;valorantDataSource&quot;)\n    private DataSource valorantDataSource;\n\n    @GetMapping(&quot;/users&quot;)\n    public Iterable&lt;User&gt; getUsers() {\n        return userRepository.findAll();\n    }\n}\n</code></pre>\n<p>This is the repository that should take the data from the second database:</p>\n<pre><code>@Repository\n@Qualifier(&quot;valorantDataSource&quot;)\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {\n}\n\n</code></pre>\n<p>I have defined the datasources in a different file. (Adding .url(), .username() and .password() to the datasourcebuilder did not help)</p>\n<pre><code>@Configuration\npublic class DatasourceConfig {\n\n    @Primary\n    @Bean(name = &quot;apexDataSource&quot;)\n    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\n    public DataSource dataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Bean(name = &quot;valorantDataSource&quot;)\n    @ConfigurationProperties(prefix = &quot;spring.second-datasource&quot;)\n    public DataSource valorantDataSource() {\n        return DataSourceBuilder.create()\n                .build();\n    }\n}\n</code></pre>\n<pre><code># First database\nspring.datasource.jdbc-url=jdbc:mysql://localhost:3306/apex\nspring.datasource.username=root\nspring.datasource.password=\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n\n# Second database\nspring.second-datasource.jdbc-url=jdbc:mysql://localhost:3306/valorant\nspring.second-datasource.username=root\nspring.second-datasource.password=\nspring.second-datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n\n</code></pre>\n<p>When I used postman to go to http://localhost:8080/valorant/users, i got the error:</p>\n<blockquote>\n<p>java.sql.SQLSyntaxErrorException: Table 'apex.user' doesn't exist</p>\n</blockquote>\n<p>So it seems like the application is trying to look in the wrong database.</p>\n<p><a href=\"https://i.stack.imgur.com/NDs0E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NDs0E.png\" alt=\"enter image description here\" /></a></p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","ssl","java-6","tls1.2"],"comments":[{"owner":{"account_id":301110,"reputation":98844,"user_id":608639,"accept_rate":64,"display_name":"jww"},"score":0,"creation_date":1478539052,"post_id":33364100,"comment_id":68186055,"body_markdown":"Java 6 is also stuck at 1024-bit DH moduli, IIRC. After [logjam](http://stackoverflow.com/a/30706878), it probably won&#39;t be able to connect to a well configured server. If possible, you should probably move on to another client platform.","body":"Java 6 is also stuck at 1024-bit DH moduli, IIRC. After <a href=\"http://stackoverflow.com/a/30706878\">logjam</a>, it probably won&#39;t be able to connect to a well configured server. If possible, you should probably move on to another client platform."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1520243766,"post_id":33364100,"comment_id":85220092,"body_markdown":"Actually, Java 6 &amp; 7 now support for DH ephemeral keys up to 2048 bits, starting with JRE 6U105 (aka1.6.0_105) and 7u91 (aka 1.7.0_91).  (Source: https://github.com/mozilla/server-side-tls/issues/107)","body":"Actually, Java 6 &amp; 7 now support for DH ephemeral keys up to 2048 bits, starting with JRE 6U105 (aka1.6.0_105) and 7u91 (aka 1.7.0_91).  (Source: <a href=\"https://github.com/mozilla/server-side-tls/issues/107\" rel=\"nofollow noreferrer\">github.com/mozilla/server-side-tls/issues/107</a>)"},{"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"score":0,"creation_date":1664898222,"post_id":33364100,"comment_id":130572937,"body_markdown":"Java 6?  **Don&#39;t**.  Just **DON&#39;T**.  Using it on any public-facing system is **reckless**.  There are 25 or so known **easily-exploitable REMOTE** vulnerabilities in the last publicly-available version of Java 1.6:  https://web.archive.org/web/20160422142813/http://www.cvedetails.com/vulnerability-list/vendor_id-93/product_id-19117/version_id-147025/Oracle-JRE-1.6.0.html  And there are probably **more** than that because Java 6 went out of public support almost a decade ago.","body":"Java 6?  <b>Don&#39;t</b>.  Just <b>DON&#39;T</b>.  Using it on any public-facing system is <b>reckless</b>.  There are 25 or so known <b>easily-exploitable REMOTE</b> vulnerabilities in the last publicly-available version of Java 1.6:  <a href=\"https://web.archive.org/web/20160422142813/http://www.cvedetails.com/vulnerability-list/vendor_id-93/product_id-19117/version_id-147025/Oracle-JRE-1.6.0.html\" rel=\"nofollow noreferrer\">web.archive.org/web/20160422142813/http://www.cvedetails.com&zwnj;&#8203;/&hellip;</a>  And there are probably <b>more</b> than that because Java 6 went out of public support almost a decade ago."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1592622031,"creation_date":1445943889,"answer_id":33366289,"question_id":33364100,"body_markdown":"Public Oracle Java 6 releases do not support TLSv1.2.  Paid-for releases of Java 6 (post-EOL) might. (**UPDATE** - TLSv1.1 is available for Java 1.6 from update 111 onwards; [source][1]) \r\n\r\nContact Oracle sales.\r\n\r\nOther alternatives are:\r\n\r\n  - Use an alternative JCE implementation such as Bouncy Castle.  See [this answer][2] for details on how to do it.  It changes the default `SSLSocketFactory` implementation, so that your application will use BC transparently.  (Other answers show how to use the BC `SSLSocketFactory` implementation explicitly, but that approach will entail modifying application or library code that that is opening sockets.)\r\n\r\n  - Use an IBM Java 6 ... if available for your platform.  According to [&quot;IBM SDK, Java Technology Edition fixes to mitigate against the POODLE security vulnerability (CVE-2014-3566)&quot;][3]:\r\n\r\n    &gt; &quot;TLSv1.1 and TLSv1.2 are available only for Java 6 service refresh 10, Java 6.0.1 service refresh 1 (J9 VM2.6), and later releases.&quot;\r\n\r\n----------\r\n\r\nHowever, I&#39;d advise upgrading to a Java 11 (now).  Java 6 was EOL&#39;d in Feb 2013, and continuing to use it is potentially risky.  Free Oracle Java 8 is EOL for many use-cases.  (Tell or remind the boss / the client.  They need to know.)\r\n\r\n\r\n  [1]: https://blogs.oracle.com/java-platform-group/entry/diagnosing_tls_ssl_and_https\r\n  [2]: https://stackoverflow.com/a/61115302/139985\r\n  [3]: http://www-01.ibm.com/support/docview.wss?uid=swg21688165","title":"How to use TLS 1.2 in Java 6","body":"<p>Public Oracle Java 6 releases do not support TLSv1.2.  Paid-for releases of Java 6 (post-EOL) might. (<strong>UPDATE</strong> - TLSv1.1 is available for Java 1.6 from update 111 onwards; <a href=\"https://blogs.oracle.com/java-platform-group/entry/diagnosing_tls_ssl_and_https\" rel=\"noreferrer\">source</a>) </p>\n\n<p>Contact Oracle sales.</p>\n\n<p>Other alternatives are:</p>\n\n<ul>\n<li><p>Use an alternative JCE implementation such as Bouncy Castle.  See <a href=\"https://stackoverflow.com/a/61115302/139985\">this answer</a> for details on how to do it.  It changes the default <code>SSLSocketFactory</code> implementation, so that your application will use BC transparently.  (Other answers show how to use the BC <code>SSLSocketFactory</code> implementation explicitly, but that approach will entail modifying application or library code that that is opening sockets.)</p></li>\n<li><p>Use an IBM Java 6 ... if available for your platform.  According to <a href=\"http://www-01.ibm.com/support/docview.wss?uid=swg21688165\" rel=\"noreferrer\">\"IBM SDK, Java Technology Edition fixes to mitigate against the POODLE security vulnerability (CVE-2014-3566)\"</a>:</p>\n\n<blockquote>\n  <p>\"TLSv1.1 and TLSv1.2 are available only for Java 6 service refresh 10, Java 6.0.1 service refresh 1 (J9 VM2.6), and later releases.\"</p>\n</blockquote></li>\n</ul>\n\n<hr>\n\n<p>However, I'd advise upgrading to a Java 11 (now).  Java 6 was EOL'd in Feb 2013, and continuing to use it is potentially risky.  Free Oracle Java 8 is EOL for many use-cases.  (Tell or remind the boss / the client.  They need to know.)</p>\n"},{"tags":[],"owner":{"account_id":1305153,"reputation":1252,"user_id":1254265,"accept_rate":12,"display_name":"Azimuts"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1501536809,"creation_date":1445970029,"answer_id":33375677,"question_id":33364100,"body_markdown":"You must create your own SSLSocketFactory based on Bouncy Castle. After to use it, pass to the common HttpsConnextion for using this customized SocketFactory.\n\n\n**1. First : Create a TLSConnectionFactory**\n\n   Here one  tips: \n\n1.1 Extend SSLConnectionFactory \n\n1.2 Override this method :\n  \n\n        \n\n    @Override \n    public Socket createSocket(Socket socket, final String host, int port, boolean arg3)\n\n  This method will call the next internal method, \n  \n   \n\n1.3 Implement an internal method  _createSSLSocket(host, tlsClientProtocol);\n\nHere you must create a Socket using TlsClientProtocol . The trick is override ...startHandshake() method calling TlsClientProtocol\n\n     private SSLSocket _createSSLSocket(final String host , final TlsClientProtocol tlsClientProtocol) {\n         return new SSLSocket() {    \n           .... Override and implement SSLSocket methods,  particulary: \n                startHandshake() {\n                 }    \n         }\n\n         \n\nImportant : The full sample how to use TLS Client Protocol is well explained here: https://stackoverflow.com/questions/8171802/using-bouncycastle-for-a-simple-https-query \n\n\n\n\n\n**2. Second : Use this Customized  SSLConnextionFactory on common HTTPSConnection.**\n\n  This is important !  In other samples you can see into the web , u see hard-coded HTTP Commands....so with a customized SSLConnectionFactory u don&#39;t need nothing more...\n \n      URL myurl = new URL( &quot;http:// ...URL tha only Works in TLS 1.2);\n      HttpsURLConnection  con = (HttpsURLConnection )myurl.openConnection();\n      con.setSSLSocketFactory(new TSLSocketConnectionFactory());\n","title":"How to use TLS 1.2 in Java 6","body":"<p>You must create your own SSLSocketFactory based on Bouncy Castle. After to use it, pass to the common HttpsConnextion for using this customized SocketFactory.</p>\n<p><strong>1. First : Create a TLSConnectionFactory</strong></p>\n<p>Here one  tips:</p>\n<p>1.1 Extend SSLConnectionFactory</p>\n<p>1.2 Override this method :</p>\n<pre><code>@Override \npublic Socket createSocket(Socket socket, final String host, int port, boolean arg3)\n</code></pre>\n<p>This method will call the next internal method,</p>\n<p>1.3 Implement an internal method  _createSSLSocket(host, tlsClientProtocol);</p>\n<p>Here you must create a Socket using TlsClientProtocol . The trick is override ...startHandshake() method calling TlsClientProtocol</p>\n<pre><code> private SSLSocket _createSSLSocket(final String host , final TlsClientProtocol tlsClientProtocol) {\n     return new SSLSocket() {    \n       .... Override and implement SSLSocket methods,  particulary: \n            startHandshake() {\n             }    \n     }\n\n     \n</code></pre>\n<p>Important : The full sample how to use TLS Client Protocol is well explained here: <a href=\"https://stackoverflow.com/questions/8171802/using-bouncycastle-for-a-simple-https-query\">Using BouncyCastle for a simple HTTPS query</a></p>\n<p><strong>2. Second : Use this Customized  SSLConnextionFactory on common HTTPSConnection.</strong></p>\n<p>This is important !  In other samples you can see into the web , u see hard-coded HTTP Commands....so with a customized SSLConnectionFactory u don't need nothing more...</p>\n<pre><code>  URL myurl = new URL( &quot;http:// ...URL tha only Works in TLS 1.2);\n  HttpsURLConnection  con = (HttpsURLConnection )myurl.openConnection();\n  con.setSSLSocketFactory(new TSLSocketConnectionFactory());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1305153,"reputation":1252,"user_id":1254265,"accept_rate":12,"display_name":"Azimuts"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1525420388,"creation_date":1446544317,"answer_id":33495988,"question_id":33364100,"body_markdown":"Here a TLSConnection Factory: \r\n\r\n    package test.connection;\r\n    \r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.DataOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    import java.net.InetAddress;\r\n    import java.net.InetSocketAddress;\r\n    import java.net.Socket;\r\n    import java.net.UnknownHostException;\r\n    import java.security.Principal;\r\n    import java.security.SecureRandom;\r\n    import java.security.Security;\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.CertificateFactory;\r\n    import java.util.Hashtable;\r\n    import java.util.LinkedList;\r\n    import java.util.List;\r\n    \r\n    import javax.net.ssl.HandshakeCompletedEvent;\r\n    import javax.net.ssl.HandshakeCompletedListener;\r\n    import javax.net.ssl.SSLPeerUnverifiedException;\r\n    import javax.net.ssl.SSLSession;\r\n    import javax.net.ssl.SSLSessionContext;\r\n    import javax.net.ssl.SSLSocket;\r\n    import javax.net.ssl.SSLSocketFactory;\r\n    import javax.security.cert.X509Certificate;\r\n    \r\n    import org.bouncycastle.crypto.tls.Certificate;\r\n    import org.bouncycastle.crypto.tls.CertificateRequest;\r\n    import org.bouncycastle.crypto.tls.DefaultTlsClient;\r\n    import org.bouncycastle.crypto.tls.ExtensionType;\r\n    import org.bouncycastle.crypto.tls.TlsAuthentication;\r\n    import org.bouncycastle.crypto.tls.TlsClientProtocol;\r\n    import org.bouncycastle.crypto.tls.TlsCredentials;\r\n    import org.bouncycastle.jce.provider.BouncyCastleProvider;\r\n    \r\n    /**\r\n     * This Class enables TLS V1.2  connection based on BouncyCastle Providers.\r\n     * Just to use: \r\n     * URL myurl = new URL( &quot;http:// ...URL tha only Works in TLS 1.2);\r\n       HttpsURLConnection  con = (HttpsURLConnection )myurl.openConnection();\r\n       con.setSSLSocketFactory(new TSLSocketConnectionFactory());  \r\n     * @author AZIMUTS\r\n     *\r\n     */\r\n    public class TSLSocketConnectionFactory extends SSLSocketFactory {\t\r\n    \t\r\n    \r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    //Adding Custom BouncyCastleProvider\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\t\r\n       static {\r\n    \tif (Security.getProvider(BouncyCastleProvider.PROVIDER_NAME) == null)\r\n    \t\tSecurity.addProvider(new BouncyCastleProvider());\r\n    \t}\t\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    //HANDSHAKE LISTENER\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\t\r\n    \tpublic class TLSHandshakeListener implements HandshakeCompletedListener {\r\n    \t\t@Override\r\n    \t\tpublic void handshakeCompleted(HandshakeCompletedEvent event) {\t\r\n    \t\t\t  \r\n    \t\t}\r\n    \t}\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    //SECURE RANDOM\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\t\r\n        private SecureRandom _secureRandom = new SecureRandom();\r\n    \r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    //Adding Custom BouncyCastleProvider\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\t\r\n    \t@Override\r\n    \tpublic Socket createSocket(Socket socket, final String host, int port, boolean arg3)\r\n    \t\t\tthrows IOException {\r\n    \t    if (socket == null) {\r\n                socket = new Socket();\r\n            }\r\n            if (!socket.isConnected()) {\r\n                socket.connect(new InetSocketAddress(host, port));\r\n            }\r\n    \r\n            final TlsClientProtocol tlsClientProtocol = new TlsClientProtocol(socket.getInputStream(), socket.getOutputStream(), _secureRandom);\r\n            return _createSSLSocket(host, tlsClientProtocol);\r\n           \r\n    \t\r\n          }\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // SOCKET FACTORY  METHODS\t\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    \t@Override\r\n    \tpublic String[] getDefaultCipherSuites() {\t\t\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String[] getSupportedCipherSuites(){\t\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Socket createSocket(String host, int port) throws IOException,UnknownHostException{\t\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Socket createSocket(InetAddress host, int port) throws IOException {\t\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Socket createSocket(String host, int port, InetAddress localHost,\r\n    \t\t\tint localPort) throws IOException, UnknownHostException {\t\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Socket createSocket(InetAddress address, int port,\r\n    \t\t\tInetAddress localAddress, int localPort) throws IOException{\t\r\n    \t\treturn null;\r\n    \t}\r\n    \t\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    //SOCKET CREATION\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    \r\n    \tprivate SSLSocket _createSSLSocket(final String host , final TlsClientProtocol tlsClientProtocol) {\r\n    \t return new SSLSocket() {            \r\n         \tprivate java.security.cert.Certificate[] peertCerts;\r\n             \r\n         \t @Override\r\n              public InputStream getInputStream() throws IOException {\r\n                  return tlsClientProtocol.getInputStream();\r\n              }\r\n    \r\n              @Override\r\n              public OutputStream getOutputStream() throws IOException {\r\n                  return tlsClientProtocol.getOutputStream();\r\n              }\r\n    \r\n              @Override\r\n              public synchronized void close() throws IOException {         \r\n                 tlsClientProtocol.close();\r\n              }\r\n    \r\n    \t\t   @Override\r\n    \t\t   public void addHandshakeCompletedListener(HandshakeCompletedListener arg0) {\t\t\t\r\n    \t\t\t \r\n    \t\t   }\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic boolean getEnableSessionCreation() {\t\t\t\r\n    \t\t\t\treturn false;\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic String[] getEnabledCipherSuites() {\t\t\t\r\n    \t\t\t\treturn null;\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic String[] getEnabledProtocols() {\r\n    \t\t\t\t// TODO Auto-generated method stub\r\n    \t\t\t\treturn null;\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic boolean getNeedClientAuth(){\t\t\t\r\n    \t\t\t\treturn false;\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic SSLSession getSession() {\r\n    \t\t\t\t   return new SSLSession() {\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic int getApplicationBufferSize() {\t\t\t\t\t\r\n    \t\t\t\t\t\treturn 0;\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic String getCipherSuite() {\r\n    \t\t\t\t\t\t throw new UnsupportedOperationException();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic long getCreationTime() {\r\n    \t\t\t\t\t\t throw new UnsupportedOperationException();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic byte[] getId() {\r\n    \t\t\t\t\t\t throw new UnsupportedOperationException();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic long getLastAccessedTime() {\r\n    \t\t\t\t\t\t throw new UnsupportedOperationException();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic java.security.cert.Certificate[] getLocalCertificates() {\r\n    \t\t\t\t\t\t throw new UnsupportedOperationException();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic Principal getLocalPrincipal() {\r\n    \t\t\t\t\t\t throw new UnsupportedOperationException();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic int getPacketBufferSize() {\r\n    \t\t\t\t\t\t throw new UnsupportedOperationException();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic X509Certificate[] getPeerCertificateChain()\r\n    \t\t\t\t\t\t\tthrows SSLPeerUnverifiedException {\r\n    \t\t\t\t\t\t// TODO Auto-generated method stub\r\n    \t\t\t\t\t\treturn null;\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic java.security.cert.Certificate[] getPeerCertificates()throws SSLPeerUnverifiedException {\r\n    \t\t\t\t\t\t return peertCerts;\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic String getPeerHost() {\r\n    \t\t\t\t\t\t throw new UnsupportedOperationException();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic int getPeerPort() {\t\t\t\t\t\t\r\n    \t\t\t\t\t\treturn 0;\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic Principal getPeerPrincipal()\tthrows SSLPeerUnverifiedException {\r\n    \t\t\t\t\t  return null;\r\n    \t\t\t\t\t\t //throw new UnsupportedOperationException();\r\n    \t\t\t\t\t\t \r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic String getProtocol() {\r\n    \t\t\t\t\t\t throw new UnsupportedOperationException();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic SSLSessionContext getSessionContext() {\r\n    \t\t\t\t\t\t throw new UnsupportedOperationException();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic Object getValue(String arg0) {\r\n    \t\t\t\t\t\t throw new UnsupportedOperationException();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic String[] getValueNames() {\r\n    \t\t\t\t\t\t throw new UnsupportedOperationException();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic void invalidate() {\r\n    \t\t\t\t\t\t throw new UnsupportedOperationException();\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic boolean isValid() {\r\n    \t\t\t\t\t\t throw new UnsupportedOperationException();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic void putValue(String arg0, Object arg1) {\r\n    \t\t\t\t\t\t throw new UnsupportedOperationException();\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic void removeValue(String arg0) {\r\n    \t\t\t\t\t\t throw new UnsupportedOperationException();\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\t   \r\n    \t\t\t\t   };\r\n    \t\t\t}\r\n    \r\n    \t\t\r\n    \t\t\t@Override\r\n    \t\t\tpublic String[] getSupportedProtocols() {\t\t\r\n    \t\t\t\treturn null;\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic boolean getUseClientMode() {\t\t\t\t\r\n    \t\t\t\treturn false;\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic boolean getWantClientAuth() {\r\n    \t\t\t\t\r\n    \t\t\t\treturn false;\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void removeHandshakeCompletedListener(HandshakeCompletedListener arg0) {\t\t\t\t\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void setEnableSessionCreation(boolean arg0) {\r\n    \t\t\t\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void setEnabledCipherSuites(String[] arg0) {\t\t\t\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void setEnabledProtocols(String[] arg0) {\r\n    \t\t\t\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void setNeedClientAuth(boolean arg0) {\t\t\t\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void setUseClientMode(boolean arg0) {\t\t\t\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void setWantClientAuth(boolean arg0) {\t\t\t\t\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic String[] getSupportedCipherSuites() {\t\t\t\r\n    \t\t\t\treturn null;\r\n    \t\t\t}\r\n    \t\t\t@Override\r\n    \t\t\tpublic void startHandshake() throws IOException {\r\n    \t\t\t\t  tlsClientProtocol.connect(new DefaultTlsClient() {\t\t\t\t\t   \r\n    \t\t\t\t\t     @Override\r\n    \t\t                  public Hashtable&lt;Integer, byte[]&gt; getClientExtensions() throws IOException {\r\n    \t\t                        Hashtable&lt;Integer, byte[]&gt; clientExtensions = super.getClientExtensions();\r\n    \t\t                        if (clientExtensions == null) {\r\n    \t\t                            clientExtensions = new Hashtable&lt;Integer, byte[]&gt;();\r\n    \t\t                        }\r\n    \r\n    \t\t                        //Add host_name\r\n    \t\t                        byte[] host_name = host.getBytes();\r\n    \r\n    \t\t                        final ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n    \t\t                        final DataOutputStream dos = new DataOutputStream(baos);\r\n    \t\t                        dos.writeShort(host_name.length + 3); // entry size\r\n    \t\t                        dos.writeByte(0); // name type = hostname\r\n    \t\t                        dos.writeShort(host_name.length);\r\n    \t\t                        dos.write(host_name);\r\n    \t\t                        dos.close();\r\n    \t\t                        clientExtensions.put(ExtensionType.server_name, baos.toByteArray());\r\n    \t\t                        return clientExtensions;\r\n    \t\t                }\r\n    \r\n    \t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\tpublic TlsAuthentication getAuthentication()\r\n    \t\t\t\t\t\t\t\tthrows IOException {\r\n    \t\t\t\t\t\t\treturn new TlsAuthentication() {\r\n    \r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\t\t\tpublic void notifyServerCertificate(Certificate serverCertificate) throws IOException {\r\n    \t\t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\t  try {\r\n    \t                                    CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\r\n    \t                                    List&lt;java.security.cert.Certificate&gt; certs = new LinkedList&lt;java.security.cert.Certificate&gt;();\r\n    \t                                    for ( org.bouncycastle.asn1.x509.Certificate c : serverCertificate.getCertificateList()) {\t\t                                    \r\n    \t                                        certs.add(cf.generateCertificate(new ByteArrayInputStream(c.getEncoded())));\r\n    \t                                    }\r\n    \t                                    peertCerts = certs.toArray(new java.security.cert.Certificate[0]);\r\n    \t                                } catch (CertificateException e) {\t                                 \r\n    \t                                   System.out.println( &quot;Failed to cache server certs&quot;+ e);\r\n    \t                                   throw new IOException(e);\r\n    \t                                }\r\n    \t\t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\t\t\tpublic TlsCredentials getClientCredentials(CertificateRequest arg0)\r\n    \t\t\t\t\t\t\t\t\t\tthrows IOException {\t\t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\t\treturn null;\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t};\r\n    \r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t   \r\n    \t\t\t\t   });\r\n    \t\t\t\r\n    \t\t\t\r\n    \t\t\t\r\n    \t\t\t}\r\n    \r\n    \t\t\r\n    \t\t\t\r\n        \r\n         };//Socket\r\n    \t\r\n    \t}\r\n    }\r\n\r\n\r\nRemember that to prove this is, the best is to test against a website that exposes ONLY TLS 1.2. If the web exposes TLS 1.0, TLS 1.1 depending on the Java implementation will connect using tls 1.0, tls 1.1. Test it against a site that only exposes TLS 1.2. An example can be the NIST secure site https://www.nist.gov","title":"How to use TLS 1.2 in Java 6","body":"<p>Here a TLSConnection Factory: </p>\n\n<pre><code>package test.connection;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.DataOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.net.InetAddress;\nimport java.net.InetSocketAddress;\nimport java.net.Socket;\nimport java.net.UnknownHostException;\nimport java.security.Principal;\nimport java.security.SecureRandom;\nimport java.security.Security;\nimport java.security.cert.CertificateException;\nimport java.security.cert.CertificateFactory;\nimport java.util.Hashtable;\nimport java.util.LinkedList;\nimport java.util.List;\n\nimport javax.net.ssl.HandshakeCompletedEvent;\nimport javax.net.ssl.HandshakeCompletedListener;\nimport javax.net.ssl.SSLPeerUnverifiedException;\nimport javax.net.ssl.SSLSession;\nimport javax.net.ssl.SSLSessionContext;\nimport javax.net.ssl.SSLSocket;\nimport javax.net.ssl.SSLSocketFactory;\nimport javax.security.cert.X509Certificate;\n\nimport org.bouncycastle.crypto.tls.Certificate;\nimport org.bouncycastle.crypto.tls.CertificateRequest;\nimport org.bouncycastle.crypto.tls.DefaultTlsClient;\nimport org.bouncycastle.crypto.tls.ExtensionType;\nimport org.bouncycastle.crypto.tls.TlsAuthentication;\nimport org.bouncycastle.crypto.tls.TlsClientProtocol;\nimport org.bouncycastle.crypto.tls.TlsCredentials;\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\n\n/**\n * This Class enables TLS V1.2  connection based on BouncyCastle Providers.\n * Just to use: \n * URL myurl = new URL( \"http:// ...URL tha only Works in TLS 1.2);\n   HttpsURLConnection  con = (HttpsURLConnection )myurl.openConnection();\n   con.setSSLSocketFactory(new TSLSocketConnectionFactory());  \n * @author AZIMUTS\n *\n */\npublic class TSLSocketConnectionFactory extends SSLSocketFactory {  \n\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//Adding Custom BouncyCastleProvider\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////// \n   static {\n    if (Security.getProvider(BouncyCastleProvider.PROVIDER_NAME) == null)\n        Security.addProvider(new BouncyCastleProvider());\n    }   \n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//HANDSHAKE LISTENER\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////// \n    public class TLSHandshakeListener implements HandshakeCompletedListener {\n        @Override\n        public void handshakeCompleted(HandshakeCompletedEvent event) { \n\n        }\n    }\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//SECURE RANDOM\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////// \n    private SecureRandom _secureRandom = new SecureRandom();\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//Adding Custom BouncyCastleProvider\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////// \n    @Override\n    public Socket createSocket(Socket socket, final String host, int port, boolean arg3)\n            throws IOException {\n        if (socket == null) {\n            socket = new Socket();\n        }\n        if (!socket.isConnected()) {\n            socket.connect(new InetSocketAddress(host, port));\n        }\n\n        final TlsClientProtocol tlsClientProtocol = new TlsClientProtocol(socket.getInputStream(), socket.getOutputStream(), _secureRandom);\n        return _createSSLSocket(host, tlsClientProtocol);\n\n\n      }\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// SOCKET FACTORY  METHODS  \n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    @Override\n    public String[] getDefaultCipherSuites() {      \n        return null;\n    }\n\n    @Override\n    public String[] getSupportedCipherSuites(){ \n        return null;\n    }\n\n    @Override\n    public Socket createSocket(String host, int port) throws IOException,UnknownHostException{  \n        return null;\n    }\n\n    @Override\n    public Socket createSocket(InetAddress host, int port) throws IOException { \n        return null;\n    }\n\n    @Override\n    public Socket createSocket(String host, int port, InetAddress localHost,\n            int localPort) throws IOException, UnknownHostException {   \n        return null;\n    }\n\n    @Override\n    public Socket createSocket(InetAddress address, int port,\n            InetAddress localAddress, int localPort) throws IOException{    \n        return null;\n    }\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//SOCKET CREATION\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private SSLSocket _createSSLSocket(final String host , final TlsClientProtocol tlsClientProtocol) {\n     return new SSLSocket() {            \n        private java.security.cert.Certificate[] peertCerts;\n\n         @Override\n          public InputStream getInputStream() throws IOException {\n              return tlsClientProtocol.getInputStream();\n          }\n\n          @Override\n          public OutputStream getOutputStream() throws IOException {\n              return tlsClientProtocol.getOutputStream();\n          }\n\n          @Override\n          public synchronized void close() throws IOException {         \n             tlsClientProtocol.close();\n          }\n\n           @Override\n           public void addHandshakeCompletedListener(HandshakeCompletedListener arg0) {         \n\n           }\n\n            @Override\n            public boolean getEnableSessionCreation() {         \n                return false;\n            }\n\n            @Override\n            public String[] getEnabledCipherSuites() {          \n                return null;\n            }\n\n            @Override\n            public String[] getEnabledProtocols() {\n                // TODO Auto-generated method stub\n                return null;\n            }\n\n            @Override\n            public boolean getNeedClientAuth(){         \n                return false;\n            }\n\n            @Override\n            public SSLSession getSession() {\n                   return new SSLSession() {\n\n                    @Override\n                    public int getApplicationBufferSize() {                 \n                        return 0;\n                    }\n\n                    @Override\n                    public String getCipherSuite() {\n                         throw new UnsupportedOperationException();\n                    }\n\n                    @Override\n                    public long getCreationTime() {\n                         throw new UnsupportedOperationException();\n                    }\n\n                    @Override\n                    public byte[] getId() {\n                         throw new UnsupportedOperationException();\n                    }\n\n                    @Override\n                    public long getLastAccessedTime() {\n                         throw new UnsupportedOperationException();\n                    }\n\n                    @Override\n                    public java.security.cert.Certificate[] getLocalCertificates() {\n                         throw new UnsupportedOperationException();\n                    }\n\n                    @Override\n                    public Principal getLocalPrincipal() {\n                         throw new UnsupportedOperationException();\n                    }\n\n                    @Override\n                    public int getPacketBufferSize() {\n                         throw new UnsupportedOperationException();\n                    }\n\n                    @Override\n                    public X509Certificate[] getPeerCertificateChain()\n                            throws SSLPeerUnverifiedException {\n                        // TODO Auto-generated method stub\n                        return null;\n                    }\n\n                    @Override\n                    public java.security.cert.Certificate[] getPeerCertificates()throws SSLPeerUnverifiedException {\n                         return peertCerts;\n                    }\n\n                    @Override\n                    public String getPeerHost() {\n                         throw new UnsupportedOperationException();\n                    }\n\n                    @Override\n                    public int getPeerPort() {                      \n                        return 0;\n                    }\n\n                    @Override\n                    public Principal getPeerPrincipal() throws SSLPeerUnverifiedException {\n                      return null;\n                         //throw new UnsupportedOperationException();\n\n                    }\n\n                    @Override\n                    public String getProtocol() {\n                         throw new UnsupportedOperationException();\n                    }\n\n                    @Override\n                    public SSLSessionContext getSessionContext() {\n                         throw new UnsupportedOperationException();\n                    }\n\n                    @Override\n                    public Object getValue(String arg0) {\n                         throw new UnsupportedOperationException();\n                    }\n\n                    @Override\n                    public String[] getValueNames() {\n                         throw new UnsupportedOperationException();\n                    }\n\n                    @Override\n                    public void invalidate() {\n                         throw new UnsupportedOperationException();\n\n                    }\n\n                    @Override\n                    public boolean isValid() {\n                         throw new UnsupportedOperationException();\n                    }\n\n                    @Override\n                    public void putValue(String arg0, Object arg1) {\n                         throw new UnsupportedOperationException();\n\n                    }\n\n                    @Override\n                    public void removeValue(String arg0) {\n                         throw new UnsupportedOperationException();\n\n                    }\n\n                   };\n            }\n\n\n            @Override\n            public String[] getSupportedProtocols() {       \n                return null;\n            }\n\n            @Override\n            public boolean getUseClientMode() {             \n                return false;\n            }\n\n            @Override\n            public boolean getWantClientAuth() {\n\n                return false;\n            }\n\n            @Override\n            public void removeHandshakeCompletedListener(HandshakeCompletedListener arg0) {             \n\n            }\n\n            @Override\n            public void setEnableSessionCreation(boolean arg0) {\n\n\n            }\n\n            @Override\n            public void setEnabledCipherSuites(String[] arg0) {         \n\n            }\n\n            @Override\n            public void setEnabledProtocols(String[] arg0) {\n\n\n            }\n\n            @Override\n            public void setNeedClientAuth(boolean arg0) {           \n\n            }\n\n            @Override\n            public void setUseClientMode(boolean arg0) {            \n\n            }\n\n            @Override\n            public void setWantClientAuth(boolean arg0) {               \n\n            }\n\n            @Override\n            public String[] getSupportedCipherSuites() {            \n                return null;\n            }\n            @Override\n            public void startHandshake() throws IOException {\n                  tlsClientProtocol.connect(new DefaultTlsClient() {                       \n                         @Override\n                          public Hashtable&lt;Integer, byte[]&gt; getClientExtensions() throws IOException {\n                                Hashtable&lt;Integer, byte[]&gt; clientExtensions = super.getClientExtensions();\n                                if (clientExtensions == null) {\n                                    clientExtensions = new Hashtable&lt;Integer, byte[]&gt;();\n                                }\n\n                                //Add host_name\n                                byte[] host_name = host.getBytes();\n\n                                final ByteArrayOutputStream baos = new ByteArrayOutputStream();\n                                final DataOutputStream dos = new DataOutputStream(baos);\n                                dos.writeShort(host_name.length + 3); // entry size\n                                dos.writeByte(0); // name type = hostname\n                                dos.writeShort(host_name.length);\n                                dos.write(host_name);\n                                dos.close();\n                                clientExtensions.put(ExtensionType.server_name, baos.toByteArray());\n                                return clientExtensions;\n                        }\n\n                        @Override\n                        public TlsAuthentication getAuthentication()\n                                throws IOException {\n                            return new TlsAuthentication() {\n\n\n                                @Override\n                                public void notifyServerCertificate(Certificate serverCertificate) throws IOException {\n\n                                  try {\n                                        CertificateFactory cf = CertificateFactory.getInstance(\"X.509\");\n                                        List&lt;java.security.cert.Certificate&gt; certs = new LinkedList&lt;java.security.cert.Certificate&gt;();\n                                        for ( org.bouncycastle.asn1.x509.Certificate c : serverCertificate.getCertificateList()) {                                          \n                                            certs.add(cf.generateCertificate(new ByteArrayInputStream(c.getEncoded())));\n                                        }\n                                        peertCerts = certs.toArray(new java.security.cert.Certificate[0]);\n                                    } catch (CertificateException e) {                                   \n                                       System.out.println( \"Failed to cache server certs\"+ e);\n                                       throw new IOException(e);\n                                    }\n\n                                }\n\n                                @Override\n                                public TlsCredentials getClientCredentials(CertificateRequest arg0)\n                                        throws IOException {                                    \n                                    return null;\n                                }\n\n                            };\n\n                        }\n\n                   });\n\n\n\n            }\n\n\n\n\n     };//Socket\n\n    }\n}\n</code></pre>\n\n<p>Remember that to prove this is, the best is to test against a website that exposes ONLY TLS 1.2. If the web exposes TLS 1.0, TLS 1.1 depending on the Java implementation will connect using tls 1.0, tls 1.1. Test it against a site that only exposes TLS 1.2. An example can be the NIST secure site <a href=\"https://www.nist.gov\" rel=\"noreferrer\">https://www.nist.gov</a></p>\n"},{"tags":[],"owner":{"account_id":9364724,"reputation":179,"user_id":6950019,"display_name":"David"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1476113848,"creation_date":1476113848,"answer_id":39961836,"question_id":33364100,"body_markdown":"Java 6, now support TLS 1.2, check out below\r\n\r\nhttp://www.oracle.com/technetwork/java/javase/overview-156328.html#R160_121","title":"How to use TLS 1.2 in Java 6","body":"<p>Java 6, now support TLS 1.2, check out below</p>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/javase/overview-156328.html#R160_121\" rel=\"noreferrer\">http://www.oracle.com/technetwork/java/javase/overview-156328.html#R160_121</a></p>\n"},{"tags":[],"owner":{"account_id":1693760,"reputation":9824,"user_id":1555615,"accept_rate":62,"display_name":"Marinos An"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663227439,"creation_date":1548089586,"answer_id":54294490,"question_id":33364100,"body_markdown":"In case you need to access a specific set of remote services you could use an **intermediate reverse-proxy, to perform tls1.2** for you. This would save you from trying to patch or upgrade java1.6.\r\n\r\ne.g.\r\n**app -&gt; proxy:http(5500)[tls-1.2] -&gt; remote:https(443)**\r\n\r\nConfiguration in its simplest form (one port per service) for apache httpd is:\r\n\r\n    Listen 127.0.0.1:5000\r\n    &lt;VirtualHost *:5500&gt;\r\n        SSLProxyEngine On\r\n        ProxyPass / https://remote-domain/\r\n        ProxyPassReverse / https://remote-domain/\r\n    &lt;/VirtualHost&gt;\r\n\r\nThen instead of accessing https://remote-domain/ you access http://localhost:5500/\r\n\r\n\r\n**Note: In case you cannot change the service-client code/config** so that it targets the `localhost` domain, you can always play with `hosts` file and translate the the remote domain to the proxy&#39;s ip. But this has a catch. The reverse-proxy specifically will need to resolve the same domain to the original service ip. You can achieve this by moving the proxy to a different machine (with no hosts file entry) or by [dockerizing](https://hub.docker.com/_/httpd) it and utilizing the [`--add-host` feature](https://docs.docker.com/engine/reference/commandline/run/#add-entries-to-container-hosts-file---add-host) (or [`extra_hosts`](https://docs.docker.com/compose/compose-file/compose-file-v3/#extra_hosts) in [docker-compose](https://docs.docker.com/compose/) ).\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to use TLS 1.2 in Java 6","body":"<p>In case you need to access a specific set of remote services you could use an <strong>intermediate reverse-proxy, to perform tls1.2</strong> for you. This would save you from trying to patch or upgrade java1.6.</p>\n<p>e.g.\n<strong>app -&gt; proxy:http(5500)[tls-1.2] -&gt; remote:https(443)</strong></p>\n<p>Configuration in its simplest form (one port per service) for apache httpd is:</p>\n<pre><code>Listen 127.0.0.1:5000\n&lt;VirtualHost *:5500&gt;\n    SSLProxyEngine On\n    ProxyPass / https://remote-domain/\n    ProxyPassReverse / https://remote-domain/\n&lt;/VirtualHost&gt;\n</code></pre>\n<p>Then instead of accessing https://remote-domain/ you access http://localhost:5500/</p>\n<p><strong>Note: In case you cannot change the service-client code/config</strong> so that it targets the <code>localhost</code> domain, you can always play with <code>hosts</code> file and translate the the remote domain to the proxy's ip. But this has a catch. The reverse-proxy specifically will need to resolve the same domain to the original service ip. You can achieve this by moving the proxy to a different machine (with no hosts file entry) or by <a href=\"https://hub.docker.com/_/httpd\" rel=\"nofollow noreferrer\">dockerizing</a> it and utilizing the <a href=\"https://docs.docker.com/engine/reference/commandline/run/#add-entries-to-container-hosts-file---add-host\" rel=\"nofollow noreferrer\"><code>--add-host</code> feature</a> (or <a href=\"https://docs.docker.com/compose/compose-file/compose-file-v3/#extra_hosts\" rel=\"nofollow noreferrer\"><code>extra_hosts</code></a> in <a href=\"https://docs.docker.com/compose/\" rel=\"nofollow noreferrer\">docker-compose</a> ).</p>\n"},{"tags":[],"owner":{"account_id":8690730,"reputation":61,"user_id":6503697,"display_name":"Salvatore Iamundo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1570807085,"creation_date":1570807085,"answer_id":58344218,"question_id":33364100,"body_markdown":"I think that the solution of @Azimuts (https://stackoverflow.com/a/33375677/6503697) is for HTTP only connection. \r\nFor FTPS connection you can use Bouncy Castle with org.apache.commons.net.ftp.FTPSClient without the need for rewrite FTPS protocol.\r\n\r\nI have a program running on JRE 1.6.0_04 and I can not update the JRE. \r\n\r\nThe program has to connect to an FTPS server that work only with TLS 1.2 (IIS server).\r\n\r\nI struggled for days and finally I have understood that there are few versions of bouncy castle library right in my use case: bctls-jdk15on-1.60.jar and bcprov-jdk15on-1.60.jar are ok, but 1.64 versions are not.\r\n\r\nThe version of apache commons-net is 3.1 .\r\n\r\nFollowing is a small snippet of code that should work:\r\n\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.security.SecureRandom;\r\n    import java.security.Security;\r\n\r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.TrustManager;\r\n    import javax.net.ssl.X509TrustManager;\r\n\r\n    import org.apache.commons.net.ftp.FTP;\r\n    import org.apache.commons.net.ftp.FTPReply;\r\n    import org.apache.commons.net.ftp.FTPSClient;\r\n    import org.bouncycastle.jce.provider.BouncyCastleProvider;\r\n    import org.bouncycastle.jsse.provider.BouncyCastleJsseProvider;\r\n    import org.junit.Test;\r\n\r\n\r\n    public class FtpsTest {\r\n\r\n\t// Create a trust manager that does not validate certificate chains\r\n\tTrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {\r\n\r\n\t\tpublic java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType) {\r\n\t\t}\r\n\r\n\t\tpublic void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType) {\r\n\t\t}\r\n\t} };\r\n\r\n\t@Test public void test() throws Exception {\r\n\r\n\r\n\t\tSecurity.insertProviderAt(new BouncyCastleProvider(), 1);\r\n\t\tSecurity.addProvider(new BouncyCastleJsseProvider());\r\n\r\n\r\n\t\tSSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;, new BouncyCastleJsseProvider());\r\n\t\tsslContext.init(null, trustAllCerts, new SecureRandom());\r\n\t\torg.apache.commons.net.ftp.FTPSClient ftpClient = new FTPSClient(sslContext);\r\n\t\tByteArrayOutputStream out = null;\r\n\t\ttry {\r\n\r\n\t\t\tftpClient.connect(&quot;hostaname&quot;, 21);\r\n\t\t\tif (!FTPReply.isPositiveCompletion(ftpClient.getReplyCode())) {\r\n\t\t\t\tString msg = &quot;Il server ftp ha rifiutato la connessione.&quot;;\r\n\t\t\t\tthrow new Exception(msg);\r\n\t\t\t}\r\n\t\t\tif (!ftpClient.login(&quot;username&quot;, &quot;pwd&quot;)) {\r\n\t\t\t\tString msg = &quot;Il server ftp ha rifiutato il login con username:  username  e pwd:  password  .&quot;;\r\n\t\t\t\tftpClient.disconnect();\r\n\t\t\t\tthrow new Exception(msg);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tftpClient.enterLocalPassiveMode();\r\n\t\t\tftpClient.setFileType(FTP.BINARY_FILE_TYPE);\r\n\t\t\tftpClient.setDataTimeout(60000);\r\n\t\t\tftpClient.execPBSZ(0); // Set protection buffer size\r\n\t\t\tftpClient.execPROT(&quot;P&quot;); // Set data channel protection to private\r\n\t\t\tint bufSize = 1024 * 1024; // 1MB\r\n\t\t\tftpClient.setBufferSize(bufSize);\r\n\t\t\tout = new ByteArrayOutputStream(bufSize);\r\n\t\t\tftpClient.retrieveFile(&quot;remoteFileName&quot;, out);\r\n\t\t\tout.toByteArray();\r\n\t\t}\r\n\t\tfinally {\r\n\t\t\tif (out != null) {\r\n\t\t\t\tout.close();\r\n\t\t\t}\r\n\t\t\tftpClient.disconnect();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\n","title":"How to use TLS 1.2 in Java 6","body":"<p>I think that the solution of @Azimuts (<a href=\"https://stackoverflow.com/a/33375677/6503697\">https://stackoverflow.com/a/33375677/6503697</a>) is for HTTP only connection. \nFor FTPS connection you can use Bouncy Castle with org.apache.commons.net.ftp.FTPSClient without the need for rewrite FTPS protocol.</p>\n\n<p>I have a program running on JRE 1.6.0_04 and I can not update the JRE. </p>\n\n<p>The program has to connect to an FTPS server that work only with TLS 1.2 (IIS server).</p>\n\n<p>I struggled for days and finally I have understood that there are few versions of bouncy castle library right in my use case: bctls-jdk15on-1.60.jar and bcprov-jdk15on-1.60.jar are ok, but 1.64 versions are not.</p>\n\n<p>The version of apache commons-net is 3.1 .</p>\n\n<p>Following is a small snippet of code that should work:</p>\n\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.security.SecureRandom;\nimport java.security.Security;\n\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.TrustManager;\nimport javax.net.ssl.X509TrustManager;\n\nimport org.apache.commons.net.ftp.FTP;\nimport org.apache.commons.net.ftp.FTPReply;\nimport org.apache.commons.net.ftp.FTPSClient;\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\nimport org.bouncycastle.jsse.provider.BouncyCastleJsseProvider;\nimport org.junit.Test;\n\n\npublic class FtpsTest {\n\n// Create a trust manager that does not validate certificate chains\nTrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {\n\n    public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n        return null;\n    }\n\n    public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType) {\n    }\n\n    public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType) {\n    }\n} };\n\n@Test public void test() throws Exception {\n\n\n    Security.insertProviderAt(new BouncyCastleProvider(), 1);\n    Security.addProvider(new BouncyCastleJsseProvider());\n\n\n    SSLContext sslContext = SSLContext.getInstance(\"TLS\", new BouncyCastleJsseProvider());\n    sslContext.init(null, trustAllCerts, new SecureRandom());\n    org.apache.commons.net.ftp.FTPSClient ftpClient = new FTPSClient(sslContext);\n    ByteArrayOutputStream out = null;\n    try {\n\n        ftpClient.connect(\"hostaname\", 21);\n        if (!FTPReply.isPositiveCompletion(ftpClient.getReplyCode())) {\n            String msg = \"Il server ftp ha rifiutato la connessione.\";\n            throw new Exception(msg);\n        }\n        if (!ftpClient.login(\"username\", \"pwd\")) {\n            String msg = \"Il server ftp ha rifiutato il login con username:  username  e pwd:  password  .\";\n            ftpClient.disconnect();\n            throw new Exception(msg);\n        }\n\n\n        ftpClient.enterLocalPassiveMode();\n        ftpClient.setFileType(FTP.BINARY_FILE_TYPE);\n        ftpClient.setDataTimeout(60000);\n        ftpClient.execPBSZ(0); // Set protection buffer size\n        ftpClient.execPROT(\"P\"); // Set data channel protection to private\n        int bufSize = 1024 * 1024; // 1MB\n        ftpClient.setBufferSize(bufSize);\n        out = new ByteArrayOutputStream(bufSize);\n        ftpClient.retrieveFile(\"remoteFileName\", out);\n        out.toByteArray();\n    }\n    finally {\n        if (out != null) {\n            out.close();\n        }\n        ftpClient.disconnect();\n\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":3230954,"reputation":2240,"user_id":2726223,"accept_rate":11,"display_name":"Wellington Souza"},"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1675989491,"creation_date":1586414307,"answer_id":61115302,"question_id":33364100,"body_markdown":"After a few hours of playing with the Oracle JDK 1.6, I was able to make it work without any code change. The magic is done by Bouncy Castle to handle SSL and allow JDK 1.6 to run with TLSv1.2 by default. In theory, it could also be applied to older Java versions with eventual adjustments.\r\n\r\n 1. Download the latest Java 1.6 version from the [Java Archive Oracle website][2]\r\n 2. Uncompress it on your preferred path and set your JAVA_HOME environment variable\r\n 3. Update the JDK with the latest [Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files 6][5]\r\n 4. Download the Bounce Castle jar files [bcprov-jdk15to18-1.71.jar][3] and [bctls-jdk15to18-1.71.jar][4] and copy them into your `${JAVA_HOME}/jre/lib/ext` folder\r\n 5. Modify the file `${JAVA_HOME}/jre/lib/security/java.security` commenting out the providers section and adding some extra lines\r\n\r\n``` \r\n    # Original security providers (just comment it)\r\n    # security.provider.1=sun.security.provider.Sun\r\n    # security.provider.2=sun.security.rsa.SunRsaSign\r\n    # security.provider.3=com.sun.net.ssl.internal.ssl.Provider\r\n    # security.provider.4=com.sun.crypto.provider.SunJCE\r\n    # security.provider.5=sun.security.jgss.SunProvider\r\n    # security.provider.6=com.sun.security.sasl.Provider\r\n    # security.provider.7=org.jcp.xml.dsig.internal.dom.XMLDSigRI\r\n    # security.provider.8=sun.security.smartcardio.SunPCSC\r\n\r\n    # Add the Bouncy Castle security providers with higher priority\r\n    security.provider.1=org.bouncycastle.jce.provider.BouncyCastleProvider\r\n    security.provider.2=org.bouncycastle.jsse.provider.BouncyCastleJsseProvider\r\n    \r\n    # Original security providers with different priorities\r\n    security.provider.3=sun.security.provider.Sun\r\n    security.provider.4=sun.security.rsa.SunRsaSign\r\n    security.provider.5=com.sun.net.ssl.internal.ssl.Provider\r\n    security.provider.6=com.sun.crypto.provider.SunJCE \r\n    security.provider.7=sun.security.jgss.SunProvider\r\n    security.provider.8=com.sun.security.sasl.Provider\r\n    security.provider.9=org.jcp.xml.dsig.internal.dom.XMLDSigRI\r\n    security.provider.10=sun.security.smartcardio.SunPCSC\r\n\r\n    # Here we are changing the default SSLSocketFactory implementation\r\n    ssl.SocketFactory.provider=org.bouncycastle.jsse.provider.SSLSocketFactoryImpl\r\n\r\n```\r\n\r\nJust to make sure it&#39;s working let&#39;s make a simple Java program to download files from one URL using https.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    import java.io.*;\r\n    import java.net.*;\r\n\r\n\r\n    public class DownloadWithHttps {\r\n\r\n        public static void main(String[] args) {\r\n            try {\r\n                URL url = new URL(args[0]);\r\n                System.out.println(&quot;File to Download: &quot; + url);\r\n                String filename = url.getFile();\r\n                File f = new File(filename);\r\n                System.out.println(&quot;Output File: &quot; + f.getName());\r\n                BufferedInputStream in = new BufferedInputStream(url.openStream());\r\n                FileOutputStream fileOutputStream = new FileOutputStream(f.getName());\r\n                int bytesRead;\r\n                byte dataBuffer[] = new byte[1024];\r\n\r\n                while ((bytesRead = in.read(dataBuffer, 0, 1024)) != -1) {\r\n                    fileOutputStream.write(dataBuffer, 0, bytesRead);\r\n                }\r\n                fileOutputStream.close();\r\n\r\n            } catch (Exception ex) {\r\n                ex.printStackTrace();\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\nNow, just compile the DownloadWithHttps.java program and execute it with your Java 1.6\r\n\r\n```\r\n\r\n${JAVA_HOME}/bin/javac DownloadWithHttps.java\r\n${JAVA_HOME}/bin/java DownloadWithHttps https://repo1.maven.org/maven2/org/apache/commons/commons-lang3/3.10/commons-lang3-3.10.jar\r\n\r\n```\r\n\r\n**Important note for Windows users**: This solution was tested in a Linux OS, if you are using Windows, please replace the `${JAVA_HOME}` by `%JAVA_HOME%`.\r\n\r\n  [1]: https://www.bouncycastle.org/\r\n  [2]: https://www.oracle.com/java/technologies/javase-java-archive-javase6-downloads.html\r\n  [3]: https://repo1.maven.org/maven2/org/bouncycastle/bcprov-jdk15to18/1.71/bcprov-jdk15to18-1.71.jar\r\n  [4]: https://repo1.maven.org/maven2/org/bouncycastle/bctls-jdk15to18/1.71/bctls-jdk15to18-1.71.jar\r\n  [5]: https://www.oracle.com/java/technologies/jce-6-download.html","title":"How to use TLS 1.2 in Java 6","body":"<p>After a few hours of playing with the Oracle JDK 1.6, I was able to make it work without any code change. The magic is done by Bouncy Castle to handle SSL and allow JDK 1.6 to run with TLSv1.2 by default. In theory, it could also be applied to older Java versions with eventual adjustments.</p>\n<ol>\n<li>Download the latest Java 1.6 version from the <a href=\"https://www.oracle.com/java/technologies/javase-java-archive-javase6-downloads.html\" rel=\"nofollow noreferrer\">Java Archive Oracle website</a></li>\n<li>Uncompress it on your preferred path and set your JAVA_HOME environment variable</li>\n<li>Update the JDK with the latest <a href=\"https://www.oracle.com/java/technologies/jce-6-download.html\" rel=\"nofollow noreferrer\">Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files 6</a></li>\n<li>Download the Bounce Castle jar files <a href=\"https://repo1.maven.org/maven2/org/bouncycastle/bcprov-jdk15to18/1.71/bcprov-jdk15to18-1.71.jar\" rel=\"nofollow noreferrer\">bcprov-jdk15to18-1.71.jar</a> and <a href=\"https://repo1.maven.org/maven2/org/bouncycastle/bctls-jdk15to18/1.71/bctls-jdk15to18-1.71.jar\" rel=\"nofollow noreferrer\">bctls-jdk15to18-1.71.jar</a> and copy them into your <code>${JAVA_HOME}/jre/lib/ext</code> folder</li>\n<li>Modify the file <code>${JAVA_HOME}/jre/lib/security/java.security</code> commenting out the providers section and adding some extra lines</li>\n</ol>\n<pre><code>    # Original security providers (just comment it)\n    # security.provider.1=sun.security.provider.Sun\n    # security.provider.2=sun.security.rsa.SunRsaSign\n    # security.provider.3=com.sun.net.ssl.internal.ssl.Provider\n    # security.provider.4=com.sun.crypto.provider.SunJCE\n    # security.provider.5=sun.security.jgss.SunProvider\n    # security.provider.6=com.sun.security.sasl.Provider\n    # security.provider.7=org.jcp.xml.dsig.internal.dom.XMLDSigRI\n    # security.provider.8=sun.security.smartcardio.SunPCSC\n\n    # Add the Bouncy Castle security providers with higher priority\n    security.provider.1=org.bouncycastle.jce.provider.BouncyCastleProvider\n    security.provider.2=org.bouncycastle.jsse.provider.BouncyCastleJsseProvider\n    \n    # Original security providers with different priorities\n    security.provider.3=sun.security.provider.Sun\n    security.provider.4=sun.security.rsa.SunRsaSign\n    security.provider.5=com.sun.net.ssl.internal.ssl.Provider\n    security.provider.6=com.sun.crypto.provider.SunJCE \n    security.provider.7=sun.security.jgss.SunProvider\n    security.provider.8=com.sun.security.sasl.Provider\n    security.provider.9=org.jcp.xml.dsig.internal.dom.XMLDSigRI\n    security.provider.10=sun.security.smartcardio.SunPCSC\n\n    # Here we are changing the default SSLSocketFactory implementation\n    ssl.SocketFactory.provider=org.bouncycastle.jsse.provider.SSLSocketFactoryImpl\n\n</code></pre>\n<p>Just to make sure it's working let's make a simple Java program to download files from one URL using https.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.*;\nimport java.net.*;\n\n\npublic class DownloadWithHttps {\n\n    public static void main(String[] args) {\n        try {\n            URL url = new URL(args[0]);\n            System.out.println(&quot;File to Download: &quot; + url);\n            String filename = url.getFile();\n            File f = new File(filename);\n            System.out.println(&quot;Output File: &quot; + f.getName());\n            BufferedInputStream in = new BufferedInputStream(url.openStream());\n            FileOutputStream fileOutputStream = new FileOutputStream(f.getName());\n            int bytesRead;\n            byte dataBuffer[] = new byte[1024];\n\n            while ((bytesRead = in.read(dataBuffer, 0, 1024)) != -1) {\n                fileOutputStream.write(dataBuffer, 0, bytesRead);\n            }\n            fileOutputStream.close();\n\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n\n    }\n}\n</code></pre>\n<p>Now, just compile the DownloadWithHttps.java program and execute it with your Java 1.6</p>\n<pre><code>\n${JAVA_HOME}/bin/javac DownloadWithHttps.java\n${JAVA_HOME}/bin/java DownloadWithHttps https://repo1.maven.org/maven2/org/apache/commons/commons-lang3/3.10/commons-lang3-3.10.jar\n\n</code></pre>\n<p><strong>Important note for Windows users</strong>: This solution was tested in a Linux OS, if you are using Windows, please replace the <code>${JAVA_HOME}</code> by <code>%JAVA_HOME%</code>.</p>\n"},{"tags":[],"owner":{"account_id":14177617,"reputation":21,"user_id":10242333,"display_name":"Tran Hao"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1601943245,"creation_date":1601940427,"answer_id":64217440,"question_id":33364100,"body_markdown":"I also got a similar error when forced to use TLS1.2 for java 6.\r\nAnd I handled it thanks to this library:\r\n1. Clone Source Code:\r\nhttps://github.com/tobszarny/ssl-provider-jvm16\r\n\r\n2. Add Main Class:\r\n   ```\r\n   public static void main(String[] args) throws Exception {\r\n       try {\r\n           String apiUrl = &quot;https://domain/api/query?test=123&quot;;\r\n\r\n           URL myurl = new URL(apiUrl);\r\n           HttpsURLConnection con = (HttpsURLConnection) myurl.openConnection();\r\n           con.setSSLSocketFactory(new TSLSocketConnectionFactory());\r\n           int responseCode = con.getResponseCode();\r\n           System.out.println(&quot;GET Response Code :: &quot; + responseCode);\r\n       } catch (Exception ex) {\r\n           ex.printStackTrace();\r\n       }\r\n   }\r\n   ```","title":"How to use TLS 1.2 in Java 6","body":"<p>I also got a similar error when forced to use TLS1.2 for java 6.\nAnd I handled it thanks to this library:</p>\n<ol>\n<li><p>Clone Source Code:\n<a href=\"https://github.com/tobszarny/ssl-provider-jvm16\" rel=\"nofollow noreferrer\">https://github.com/tobszarny/ssl-provider-jvm16</a></p>\n</li>\n<li><p>Add Main Class:</p>\n<pre><code>public static void main(String[] args) throws Exception {\n    try {\n        String apiUrl = &quot;https://domain/api/query?test=123&quot;;\n\n        URL myurl = new URL(apiUrl);\n        HttpsURLConnection con = (HttpsURLConnection) myurl.openConnection();\n        con.setSSLSocketFactory(new TSLSocketConnectionFactory());\n        int responseCode = con.getResponseCode();\n        System.out.println(&quot;GET Response Code :: &quot; + responseCode);\n    } catch (Exception ex) {\n        ex.printStackTrace();\n    }\n}\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":23092573,"reputation":1,"user_id":17203225,"display_name":"Marcos Meneses"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661203963,"creation_date":1634745242,"answer_id":69649281,"question_id":33364100,"body_markdown":"another BouncyCastle example. Just using `bcprov-jdk15to18`, `bctls-jdk15to18`, `bcutil-jdk15to18`, did the work for our old 1.6 client application. **UPDATE**: BC version `1.71` \r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        //put BC providers in runtime context\r\n        if (Security.getProvider(BouncyCastleProvider.PROVIDER_NAME) == null) {\r\n            Security.insertProviderAt(new BouncyCastleProvider(), 1);\r\n            Security.insertProviderAt(new BouncyCastleJsseProvider(), 2);\r\n        }\r\n\r\n        //create an empty trust manager\r\n        TrustManager[] trustManager = new TrustManager[] { new X509TrustManager() {\r\n            public java.security.cert.X509Certificate[] getAcceptedIssuers() { return new X509Certificate[0]; }\r\n            public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType) {}\r\n            public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType) {}\r\n        } };\r\n\r\n        //initialize SSLContext \r\n        SSLContext sslContext = SSLContext.getInstance(&quot;TLSv1.2&quot;);        \r\n        sslContext.init(null, trustManager, new SecureRandom());\r\n        \r\n        //connect and print data\r\n        URL url = new URL(&quot;https://stackoverflow.com&quot;);\r\n        HttpsURLConnection connection = (HttpsURLConnection) url.openConnection();\r\n        connection.setSSLSocketFactory(sslContext.getSocketFactory());        \r\n        connection.setRequestMethod(&quot;GET&quot;);\r\n        InputStream returnStream = connection.getInputStream();        \r\n        for (int ch; (ch = returnStream.read()) != -1; ) {\r\n            System.out.print((char) ch);\r\n        }\r\n        returnStream.close();\r\n        connection.disconnect();\r\n    }","title":"How to use TLS 1.2 in Java 6","body":"<p>another BouncyCastle example. Just using <code>bcprov-jdk15to18</code>, <code>bctls-jdk15to18</code>, <code>bcutil-jdk15to18</code>, did the work for our old 1.6 client application. <strong>UPDATE</strong>: BC version <code>1.71</code></p>\n<pre><code>public static void main(String[] args) throws Exception {\n\n    //put BC providers in runtime context\n    if (Security.getProvider(BouncyCastleProvider.PROVIDER_NAME) == null) {\n        Security.insertProviderAt(new BouncyCastleProvider(), 1);\n        Security.insertProviderAt(new BouncyCastleJsseProvider(), 2);\n    }\n\n    //create an empty trust manager\n    TrustManager[] trustManager = new TrustManager[] { new X509TrustManager() {\n        public java.security.cert.X509Certificate[] getAcceptedIssuers() { return new X509Certificate[0]; }\n        public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType) {}\n        public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType) {}\n    } };\n\n    //initialize SSLContext \n    SSLContext sslContext = SSLContext.getInstance(&quot;TLSv1.2&quot;);        \n    sslContext.init(null, trustManager, new SecureRandom());\n    \n    //connect and print data\n    URL url = new URL(&quot;https://stackoverflow.com&quot;);\n    HttpsURLConnection connection = (HttpsURLConnection) url.openConnection();\n    connection.setSSLSocketFactory(sslContext.getSocketFactory());        \n    connection.setRequestMethod(&quot;GET&quot;);\n    InputStream returnStream = connection.getInputStream();        \n    for (int ch; (ch = returnStream.read()) != -1; ) {\n        System.out.print((char) ch);\n    }\n    returnStream.close();\n    connection.disconnect();\n}\n</code></pre>\n"}],"owner":{"account_id":1083913,"reputation":497,"user_id":1080110,"display_name":"alex"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":193179,"favorite_count":0,"down_vote_count":0,"up_vote_count":50,"answer_count":9,"score":50,"last_activity_date":1675989491,"creation_date":1445938030,"question_id":33364100,"body_markdown":"It seems that Java 6 supports TLS up to v1.0, is there any way to use TLS 1.2 in Java 6?\r\n\r\nMaybe a patch or a particular update of Java 6 will have support for it?","title":"How to use TLS 1.2 in Java 6","body":"<p>It seems that Java 6 supports TLS up to v1.0, is there any way to use TLS 1.2 in Java 6?</p>\n\n<p>Maybe a patch or a particular update of Java 6 will have support for it?</p>\n"},{"tags":["java","github","github-actions","github-pages","javadoc"],"comments":[{"owner":{"account_id":4228050,"reputation":1228,"user_id":3461120,"display_name":"prashant.kr.mod"},"score":0,"creation_date":1671250347,"post_id":72565540,"comment_id":132064534,"body_markdown":"this question is duplicate:\nhttps://stackoverflow.com/questions/70991706/publish-automatically-javadoc-with-github-actions","body":"this question is duplicate: <a href=\"https://stackoverflow.com/questions/70991706/publish-automatically-javadoc-with-github-actions\" title=\"publish automatically javadoc with github actions\">stackoverflow.com/questions/70991706/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":20683611,"reputation":1177,"user_id":15186569,"display_name":"ThrowsError"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1675989443,"creation_date":1654806551,"answer_id":72566314,"question_id":72565540,"body_markdown":"## Generate automatically a JavaDoc to a web page with GitHub Page\r\n\r\nYes is possible, with this code on your GitHub Actions :\r\n\r\n```yaml\r\nname: Deploy Javadoc\r\n\r\non:\r\n  push:\r\n    branches:\r\n      - master\r\n      - main\r\n\r\njobs:\r\n  publish:\r\n    runs-on: ubuntu-latest\r\n    steps:\r\n      - name: Deploy JavaDoc &#128640;\r\n        uses: MathieuSoysal/Javadoc-publisher.yml@v2.3.2\r\n        with:\r\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\r\n          javadoc-branch: javadoc\r\n          java-version: 17\r\n          target-folder: javadoc\r\n          project: maven # or gradle \r\n```\r\nCredit: https://github.com/MathieuSoysal/Javadoc-publisher.yml\r\nhttps://github.com/marketplace/actions/deploy-javadoc\r\n\r\nThis code publishes JavaDoc automatically when you publish your code to *&quot;master&quot;* branch, your JavaDoc is pushed on *javadoc* branch, and deployed with GitHub Page.\r\n\r\n*don&#39;t forget to enable GitHub page on your GitHub repo settings* \r\n_____\r\n\r\n## Create a GitHub Actions inside your GitHub repository\r\n\r\nTo create a GitHub Actions you need to simply add this yaml file on `/.github/workflows/&lt;your-file&gt;.yaml` inside your GitHub repository.\r\n","title":"How to generate automatically a JavaDoc on a web page","body":"<h2>Generate automatically a JavaDoc to a web page with GitHub Page</h2>\n<p>Yes is possible, with this code on your GitHub Actions :</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>name: Deploy Javadoc\n\non:\n  push:\n    branches:\n      - master\n      - main\n\njobs:\n  publish:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Deploy JavaDoc 🚀\n        uses: MathieuSoysal/Javadoc-publisher.yml@v2.3.2\n        with:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          javadoc-branch: javadoc\n          java-version: 17\n          target-folder: javadoc\n          project: maven # or gradle \n</code></pre>\n<p>Credit: <a href=\"https://github.com/MathieuSoysal/Javadoc-publisher.yml\" rel=\"nofollow noreferrer\">https://github.com/MathieuSoysal/Javadoc-publisher.yml</a>\n<a href=\"https://github.com/marketplace/actions/deploy-javadoc\" rel=\"nofollow noreferrer\">https://github.com/marketplace/actions/deploy-javadoc</a></p>\n<p>This code publishes JavaDoc automatically when you publish your code to <em>&quot;master&quot;</em> branch, your JavaDoc is pushed on <em>javadoc</em> branch, and deployed with GitHub Page.</p>\n<p><em>don't forget to enable GitHub page on your GitHub repo settings</em></p>\n<hr />\n<h2>Create a GitHub Actions inside your GitHub repository</h2>\n<p>To create a GitHub Actions you need to simply add this yaml file on <code>/.github/workflows/&lt;your-file&gt;.yaml</code> inside your GitHub repository.</p>\n"},{"tags":[],"owner":{"account_id":4228050,"reputation":1228,"user_id":3461120,"display_name":"prashant.kr.mod"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1671052111,"creation_date":1671052111,"answer_id":74804196,"question_id":72565540,"body_markdown":"We can use javadoc tool:  \r\nWith a maven plugin: **maven-javadoc-plugin**\r\n```\r\nttys000:am ➜  ~ javadoc -d doc src\\*\r\n```\r\nJavadoc alternatives:  \r\n**...**  \r\n**MkDocs. Free • Open Source.**  \r\n**Doxygen. Free • Open Source.**  \r\n**Slate API Docs Generator. Free • Open Source.**  \r\n**DocFX. Free • Open Source.**  \r\n**Sandcastle.**  \r\n**phpDocumentor**  \r\n**NDoc**  \r\n**DoxyS**  \r\n","title":"How to generate automatically a JavaDoc on a web page","body":"<p>We can use javadoc tool:<br />\nWith a maven plugin: <strong>maven-javadoc-plugin</strong></p>\n<pre><code>ttys000:am ➜  ~ javadoc -d doc src\\*\n</code></pre>\n<p>Javadoc alternatives:<br />\n<strong>...</strong><br />\n<strong>MkDocs. Free • Open Source.</strong><br />\n<strong>Doxygen. Free • Open Source.</strong><br />\n<strong>Slate API Docs Generator. Free • Open Source.</strong><br />\n<strong>DocFX. Free • Open Source.</strong><br />\n<strong>Sandcastle.</strong><br />\n<strong>phpDocumentor</strong><br />\n<strong>NDoc</strong><br />\n<strong>DoxyS</strong></p>\n"}],"owner":{"account_id":24663336,"reputation":128,"user_id":18559336,"display_name":"Poporii"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":658,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"closed_date":1671277418,"accepted_answer_id":72566314,"answer_count":2,"score":9,"last_activity_date":1675989443,"creation_date":1654802213,"question_id":72565540,"body_markdown":"I am currently working on a Java project in GitHub and I need on every update to manually generate JavaDoc and upload it on GitHub Page. But it’s very tedious.\r\n\r\nAnd I wondering if is possible to automatise this with a CI?\r\n","title":"How to generate automatically a JavaDoc on a web page","body":"<p>I am currently working on a Java project in GitHub and I need on every update to manually generate JavaDoc and upload it on GitHub Page. But it’s very tedious.</p>\n<p>And I wondering if is possible to automatise this with a CI?</p>\n"},{"tags":["java","layout","android-wrap-content"],"owner":{"account_id":26170532,"reputation":1,"user_id":19855570,"display_name":"GG Gamer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675987582,"creation_date":1675970321,"question_id":75403430,"body_markdown":"```java\r\nFrameLayout.LayoutParams params = new FrameLayout.LayoutParams(400, 400);\r\nparams.gravity = Gravity.TOP|Gravity.RIGHT;\r\nlinearLayout.setLayoutParams(params);\r\n```\r\n\r\nI am using this code but I want that I am using this code but I want that 400, replace with `wrap_content`.\r\n\r\nI want to replace 400 to `wrap_content` using Java code","title":"How can I set wrap_content layout using this code?","body":"<pre class=\"lang-java prettyprint-override\"><code>FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(400, 400);\nparams.gravity = Gravity.TOP|Gravity.RIGHT;\nlinearLayout.setLayoutParams(params);\n</code></pre>\n<p>I am using this code but I want that I am using this code but I want that 400, replace with <code>wrap_content</code>.</p>\n<p>I want to replace 400 to <code>wrap_content</code> using Java code</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9333,"page":659,"page_size":100}
