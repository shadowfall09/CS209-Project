{"items":[{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1673001745,"post_id":75029870,"comment_id":132404533,"body_markdown":"Not without seeing your code/configuration. If it is called twice, it is probably instantiated twice.","body":"Not without seeing your code/configuration. If it is called twice, it is probably instantiated twice."},{"owner":{"account_id":17692946,"reputation":43,"user_id":12844319,"display_name":"mehdi"},"score":0,"creation_date":1673077621,"post_id":75029870,"comment_id":132420743,"body_markdown":"thank you @M.Deinum , i added code to this question","body":"thank you @M.Deinum , i added code to this question"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1673080299,"post_id":75029870,"comment_id":132421021,"body_markdown":"Don&#39;t make your `@Configuration` a `BeanPostProcessor` make that a separate bean. Also is it **really** called twice? Or do you think it is called twice? The `LocalSessionFactoryBean` is a `FactoryBean` that produces another bean (the `SessionFactory`). So what I think you are seeing is one invocation for the `LocalSessionFactoryBean` and one for the `SessionFactory`.","body":"Don&#39;t make your <code>@Configuration</code> a <code>BeanPostProcessor</code> make that a separate bean. Also is it <b>really</b> called twice? Or do you think it is called twice? The <code>LocalSessionFactoryBean</code> is a <code>FactoryBean</code> that produces another bean (the <code>SessionFactory</code>). So what I think you are seeing is one invocation for the <code>LocalSessionFactoryBean</code> and one for the <code>SessionFactory</code>."},{"owner":{"account_id":17692946,"reputation":43,"user_id":12844319,"display_name":"mehdi"},"score":0,"creation_date":1673084907,"post_id":75029870,"comment_id":132421602,"body_markdown":"yes,it called twice ,","body":"yes,it called twice ,"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1673177056,"post_id":75029870,"comment_id":132435369,"body_markdown":"And you only answered the first part of the question/comment. Why do people always stop reading after the first sentence?","body":"And you only answered the first part of the question/comment. Why do people always stop reading after the first sentence?"},{"owner":{"account_id":17692946,"reputation":43,"user_id":12844319,"display_name":"mehdi"},"score":0,"creation_date":1673248627,"post_id":75029870,"comment_id":132447055,"body_markdown":"dear @M.Deinum , you only ask question in first part and i agree with you for the second part","body":"dear @M.Deinum , you only ask question in first part and i agree with you for the second part"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1673249251,"post_id":75029870,"comment_id":132447171,"body_markdown":"Instead of only printing the `beanName` print the type `bean.getClass()` as well. That gives you more information (and probably explain for which bean stuff is being invoked, probably proving my second point).","body":"Instead of only printing the <code>beanName</code> print the type <code>bean.getClass()</code> as well. That gives you more information (and probably explain for which bean stuff is being invoked, probably proving my second point)."}],"owner":{"account_id":17692946,"reputation":43,"user_id":12844319,"display_name":"mehdi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673089119,"creation_date":1673001613,"question_id":75029870,"body_markdown":"**can somebody tell me why postProcessAfterInitialization method called twice for creating Session Factory in spring and hibernate**\r\n\r\ni expected that method called once\r\n\r\nthis is configuration part of my code and using annotation instead of xml base config\r\n\r\ncode:\r\n\r\n------\r\n```\r\npackage org.example.excel.Configuration;\r\n\r\nimport org.example.excel.ClassFactory.ClassBuilderFactory;\r\nimport org.springframework.beans.BeansException;\r\nimport org.springframework.beans.factory.InitializingBean;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.config.BeanPostProcessor;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.jdbc.datasource.DriverManagerDataSource;\r\nimport org.springframework.orm.hibernate5.HibernateTransactionManager;\r\nimport org.springframework.orm.hibernate5.LocalSessionFactoryBean;\r\nimport org.springframework.transaction.PlatformTransactionManager;\r\nimport javax.sql.DataSource;\r\nimport java.util.Properties;\r\n\r\n@Configuration\r\npublic class HibernateConfig implements BeanPostProcessor {\r\n\r\n    private ClassBuilderFactory classBuilderFactory;\r\n\r\n    @Autowired\r\n    public HibernateConfig(ClassBuilderFactory classBuilderFactory) {\r\n        this.classBuilderFactory = classBuilderFactory;\r\n    }\r\n\r\n    @Bean\r\n    public LocalSessionFactoryBean sessionFactoryBean() {\r\n        LocalSessionFactoryBean sessionFactoryBean = new LocalSessionFactoryBean();\r\n        sessionFactoryBean.setDataSource(dataSource());\r\n        sessionFactoryBean.setHibernateProperties(hibernateProperties());\r\n        sessionFactoryBean.setPackagesToScan(&quot;org.example.excel.Model&quot;);\r\n        return sessionFactoryBean;\r\n    }\r\n\r\n    @Bean\r\n    public DataSource dataSource() {\r\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n        dataSource.setDriverClassName(&quot;oracle.jdbc.OracleDriver&quot;);\r\n        dataSource.setUrl(&quot;jdbc:oracle:thin:@localhost:1521:xe&quot;);\r\n        dataSource.setUsername(&quot;Test&quot;);\r\n        dataSource.setPassword(&quot;1234&quot;);\r\n        return dataSource;\r\n    }\r\n\r\n    public Properties hibernateProperties() {\r\n        Properties properties = new Properties();\r\n        properties.setProperty(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.Oracle10gDialect&quot;);\r\n        properties.setProperty(&quot;hibernate.hbm2ddl.auto&quot;, &quot;update&quot;);\r\n        properties.setProperty(&quot;hibernate.current_session_context_class&quot;, &quot;org.hibernate.context.internal.JTASessionContext&quot;);\r\n        properties.setProperty(&quot;hibernate.show_sql&quot;, &quot;true&quot;);\r\n        return properties;\r\n    }\r\n\r\n    @Bean\r\n    public PlatformTransactionManager hibernateTransactionManager() {\r\n        HibernateTransactionManager tr = new HibernateTransactionManager();\r\n        tr.setSessionFactory(sessionFactoryBean().getObject());\r\n        return tr;\r\n    }\r\n    @Override\r\n    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\r\n        System.out.println(&quot;in before&quot; + beanName);\r\n        return bean;\r\n    }\r\n\r\n    @Override\r\n    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\r\n        System.out.println(&quot;in after &quot; + beanName);\r\n        return bean;\r\n\r\n    }\r\n}\r\n```\r\n----\r\npostProcessAfterInitialization method called once for every bean but called twice for sessionfactory\r\nwhy?\r\n\r\n","title":"postProcessAfterInitialization called twice for sessionFactory","body":"<p><strong>can somebody tell me why postProcessAfterInitialization method called twice for creating Session Factory in spring and hibernate</strong></p>\n<p>i expected that method called once</p>\n<p>this is configuration part of my code and using annotation instead of xml base config</p>\n<p>code:</p>\n<hr />\n<pre><code>package org.example.excel.Configuration;\n\nimport org.example.excel.ClassFactory.ClassBuilderFactory;\nimport org.springframework.beans.BeansException;\nimport org.springframework.beans.factory.InitializingBean;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.config.BeanPostProcessor;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.jdbc.datasource.DriverManagerDataSource;\nimport org.springframework.orm.hibernate5.HibernateTransactionManager;\nimport org.springframework.orm.hibernate5.LocalSessionFactoryBean;\nimport org.springframework.transaction.PlatformTransactionManager;\nimport javax.sql.DataSource;\nimport java.util.Properties;\n\n@Configuration\npublic class HibernateConfig implements BeanPostProcessor {\n\n    private ClassBuilderFactory classBuilderFactory;\n\n    @Autowired\n    public HibernateConfig(ClassBuilderFactory classBuilderFactory) {\n        this.classBuilderFactory = classBuilderFactory;\n    }\n\n    @Bean\n    public LocalSessionFactoryBean sessionFactoryBean() {\n        LocalSessionFactoryBean sessionFactoryBean = new LocalSessionFactoryBean();\n        sessionFactoryBean.setDataSource(dataSource());\n        sessionFactoryBean.setHibernateProperties(hibernateProperties());\n        sessionFactoryBean.setPackagesToScan(&quot;org.example.excel.Model&quot;);\n        return sessionFactoryBean;\n    }\n\n    @Bean\n    public DataSource dataSource() {\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        dataSource.setDriverClassName(&quot;oracle.jdbc.OracleDriver&quot;);\n        dataSource.setUrl(&quot;jdbc:oracle:thin:@localhost:1521:xe&quot;);\n        dataSource.setUsername(&quot;Test&quot;);\n        dataSource.setPassword(&quot;1234&quot;);\n        return dataSource;\n    }\n\n    public Properties hibernateProperties() {\n        Properties properties = new Properties();\n        properties.setProperty(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.Oracle10gDialect&quot;);\n        properties.setProperty(&quot;hibernate.hbm2ddl.auto&quot;, &quot;update&quot;);\n        properties.setProperty(&quot;hibernate.current_session_context_class&quot;, &quot;org.hibernate.context.internal.JTASessionContext&quot;);\n        properties.setProperty(&quot;hibernate.show_sql&quot;, &quot;true&quot;);\n        return properties;\n    }\n\n    @Bean\n    public PlatformTransactionManager hibernateTransactionManager() {\n        HibernateTransactionManager tr = new HibernateTransactionManager();\n        tr.setSessionFactory(sessionFactoryBean().getObject());\n        return tr;\n    }\n    @Override\n    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\n        System.out.println(&quot;in before&quot; + beanName);\n        return bean;\n    }\n\n    @Override\n    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\n        System.out.println(&quot;in after &quot; + beanName);\n        return bean;\n\n    }\n}\n</code></pre>\n<hr />\n<p>postProcessAfterInitialization method called once for every bean but called twice for sessionfactory\nwhy?</p>\n"},{"tags":["java","spring-boot","deployment","diagram"],"answers":[{"tags":[],"owner":{"account_id":8354342,"reputation":76,"user_id":6275236,"display_name":"Roland J."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673088038,"creation_date":1673088038,"answer_id":75039661,"question_id":75039432,"body_markdown":"Here are some remarks:\r\n 1. I am not sure if you really need a deployment diagram or a component diagram, or a mixture. That depends on the target audience.\r\n 2. The deployment diagram shows the physical deployment (where is the software executed?). The dependency arrows can be used, but keep in mind that a consumer and producer do not necessarily mean that a consumer depends on the producer (dependency injection and inversion of control).\r\nhttps://www.softwareideas.net/a/1580/e-commerce-microservices-uml-deployment-diagram-\r\n 3. The UML component diagram shows the functionality in terms of the implementation (structural aspects). Here, consumers and producers (APIs) can be modeled (usually with the lollipop notaton), e.g.\r\nhttps://www.researchgate.net/publication/242960303_Mobile_Agents_A_Key_for_Eectiv_e_Pervasive_Computing\r\n 4. A JVM is a component from the software development perspective but also an artifact (you need to install the Java runtime system on a device/VM).\r\n 5. Please check your dependency from the Tomcat server to the browser: Does the Web server really depends on a client PC? This is highly unlikely.","title":"Deployment Diagram for Spring Boot application","body":"<p>Here are some remarks:</p>\n<ol>\n<li>I am not sure if you really need a deployment diagram or a component diagram, or a mixture. That depends on the target audience.</li>\n<li>The deployment diagram shows the physical deployment (where is the software executed?). The dependency arrows can be used, but keep in mind that a consumer and producer do not necessarily mean that a consumer depends on the producer (dependency injection and inversion of control).\n<a href=\"https://www.softwareideas.net/a/1580/e-commerce-microservices-uml-deployment-diagram-\" rel=\"nofollow noreferrer\">https://www.softwareideas.net/a/1580/e-commerce-microservices-uml-deployment-diagram-</a></li>\n<li>The UML component diagram shows the functionality in terms of the implementation (structural aspects). Here, consumers and producers (APIs) can be modeled (usually with the lollipop notaton), e.g.\n<a href=\"https://www.researchgate.net/publication/242960303_Mobile_Agents_A_Key_for_Eectiv_e_Pervasive_Computing\" rel=\"nofollow noreferrer\">https://www.researchgate.net/publication/242960303_Mobile_Agents_A_Key_for_Eectiv_e_Pervasive_Computing</a></li>\n<li>A JVM is a component from the software development perspective but also an artifact (you need to install the Java runtime system on a device/VM).</li>\n<li>Please check your dependency from the Tomcat server to the browser: Does the Web server really depends on a client PC? This is highly unlikely.</li>\n</ol>\n"}],"owner":{"account_id":21615266,"reputation":19,"user_id":15941368,"display_name":"PrettyCoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":558,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1673088038,"creation_date":1673085446,"question_id":75039432,"body_markdown":"I have a simple Spring Boot application that uses local PostgresSQL database and I only run this application locally. \r\n\r\nFor it, I need to create a deployment diagram, but I do not quite understand what components should be present.\r\n\r\nI managed to create the following diagram, but I suspect that it is very far from ideal:\r\n[![enter image description here][1]][1]\r\n\r\nPerhaps I also need to add some component related to Maven or JVM?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1YhfI.png","title":"Deployment Diagram for Spring Boot application","body":"<p>I have a simple Spring Boot application that uses local PostgresSQL database and I only run this application locally.</p>\n<p>For it, I need to create a deployment diagram, but I do not quite understand what components should be present.</p>\n<p>I managed to create the following diagram, but I suspect that it is very far from ideal:\n<a href=\"https://i.stack.imgur.com/1YhfI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1YhfI.png\" alt=\"enter image description here\" /></a></p>\n<p>Perhaps I also need to add some component related to Maven or JVM?</p>\n"},{"tags":["java","policy","minio"],"answers":[{"tags":[],"owner":{"account_id":19211326,"reputation":55,"user_id":14037079,"display_name":"Mert Uygur"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673087709,"creation_date":1673087709,"answer_id":75039629,"question_id":74810155,"body_markdown":"Minio admin client have the methods that you are looking for.\r\n\r\nhttps://github.com/minio/minio-java/blob/master/adminapi/src/main/java/io/minio/admin/MinioAdminClient.java\r\n\r\nYou can achieve what you described with the following functions in the client.\r\n\r\naddUser(..)\r\naddCannedPolicy(..)\r\nsetPolicy(...)","title":"Is there way to setup user(!) policy using Minio Java Client API?","body":"<p>Minio admin client have the methods that you are looking for.</p>\n<p><a href=\"https://github.com/minio/minio-java/blob/master/adminapi/src/main/java/io/minio/admin/MinioAdminClient.java\" rel=\"nofollow noreferrer\">https://github.com/minio/minio-java/blob/master/adminapi/src/main/java/io/minio/admin/MinioAdminClient.java</a></p>\n<p>You can achieve what you described with the following functions in the client.</p>\n<p>addUser(..)\naddCannedPolicy(..)\nsetPolicy(...)</p>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":349,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75039629,"answer_count":1,"score":1,"last_activity_date":1673087709,"creation_date":1671100389,"question_id":74810155,"body_markdown":"I want to have an ability to setup user policy using Minio java SDK.\r\n\r\nBased on MINIO UI console I can achieve it by:\r\n 1. Add user\r\n 2. Add policy\r\n 3. Assign policy to user\r\n\r\nIs there way to achieve it using Minio Java Client API ?","title":"Is there way to setup user(!) policy using Minio Java Client API?","body":"<p>I want to have an ability to setup user policy using Minio java SDK.</p>\n<p>Based on MINIO UI console I can achieve it by:</p>\n<ol>\n<li>Add user</li>\n<li>Add policy</li>\n<li>Assign policy to user</li>\n</ol>\n<p>Is there way to achieve it using Minio Java Client API ?</p>\n"},{"tags":["java","cors","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":2021661,"reputation":61998,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1673087467,"creation_date":1672964947,"answer_id":75025792,"question_id":75022849,"body_markdown":"[The `allowedMethods` method](https://github.com/spring-projects/spring-framework/blob/e2832ea596908322d35f2ed3aceb300368373d8a/spring-webflux/src/main/java/org/springframework/web/reactive/config/CorsRegistration.java#L83) is a variadic method and expects method names to be specified one at a time, not all of them separated by commas in a single string argument. Instead of\r\n\r\n```java\r\nallowedMethods(&quot;GET,POST,DELETE,PUT,OPTIONS&quot;)\r\n```\r\n\r\nyou should write\r\n\r\n```java\r\nallowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;DELETE&quot;, &quot;PUT&quot;, &quot;OPTIONS&quot;)\r\n```\r\n\r\n(Incidentally, contrary to popular belief, `OPTIONS` need not be listed here for CORS preflight to work.)\r\n\r\nSimilar remark about [the `allowHeaders` method](https://github.com/spring-projects/spring-framework/blob/e2832ea596908322d35f2ed3aceb300368373d8a/spring-webflux/src/main/java/org/springframework/web/reactive/config/CorsRegistration.java#L97). This is an easy mistake to make, as Spring&#39;s CORS middleware performs no validation on user-specified method and header names.\r\n\r\n----------\r\n\r\nThis second point is unrelated to your issue but deserves to be mentioned: the Fetch standard lists all the following names as [forbidden request headers](https://fetch.spec.whatwg.org/#forbidden-request-header):\r\n\r\n* Accept-Encoding\r\n* Access-Control-Request-Method\r\n* Access-Control-Request-Headers\r\n* Connection\r\n* Host\r\n* Origin\r\n* Referer\r\n\r\nTherefore, you don&#39;t need to list any of them as allowed headers in your CORS configuration. You can simplify your call to `allowedHeaders` to\r\n\r\n```java\r\nallowedHeaders(\r\n  &quot;User-Agent&quot;,\r\n  &quot;Cache-Control&quot;,\r\n  &quot;X-Requested-With&quot;,\r\n  &quot;Content-Type&quot;,\r\n  &quot;Accept&quot;,\r\n  &quot;Accept-Encoding&quot;,\r\n  &quot;Accept-Language&quot;,\r\n  &quot;Authorization&quot;)\r\n```","title":"Webflux CORS No Access-Control-Allow-Origin","body":"<p><a href=\"https://github.com/spring-projects/spring-framework/blob/e2832ea596908322d35f2ed3aceb300368373d8a/spring-webflux/src/main/java/org/springframework/web/reactive/config/CorsRegistration.java#L83\" rel=\"nofollow noreferrer\">The <code>allowedMethods</code> method</a> is a variadic method and expects method names to be specified one at a time, not all of them separated by commas in a single string argument. Instead of</p>\n<pre class=\"lang-java prettyprint-override\"><code>allowedMethods(&quot;GET,POST,DELETE,PUT,OPTIONS&quot;)\n</code></pre>\n<p>you should write</p>\n<pre class=\"lang-java prettyprint-override\"><code>allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;DELETE&quot;, &quot;PUT&quot;, &quot;OPTIONS&quot;)\n</code></pre>\n<p>(Incidentally, contrary to popular belief, <code>OPTIONS</code> need not be listed here for CORS preflight to work.)</p>\n<p>Similar remark about <a href=\"https://github.com/spring-projects/spring-framework/blob/e2832ea596908322d35f2ed3aceb300368373d8a/spring-webflux/src/main/java/org/springframework/web/reactive/config/CorsRegistration.java#L97\" rel=\"nofollow noreferrer\">the <code>allowHeaders</code> method</a>. This is an easy mistake to make, as Spring's CORS middleware performs no validation on user-specified method and header names.</p>\n<hr />\n<p>This second point is unrelated to your issue but deserves to be mentioned: the Fetch standard lists all the following names as <a href=\"https://fetch.spec.whatwg.org/#forbidden-request-header\" rel=\"nofollow noreferrer\">forbidden request headers</a>:</p>\n<ul>\n<li>Accept-Encoding</li>\n<li>Access-Control-Request-Method</li>\n<li>Access-Control-Request-Headers</li>\n<li>Connection</li>\n<li>Host</li>\n<li>Origin</li>\n<li>Referer</li>\n</ul>\n<p>Therefore, you don't need to list any of them as allowed headers in your CORS configuration. You can simplify your call to <code>allowedHeaders</code> to</p>\n<pre class=\"lang-java prettyprint-override\"><code>allowedHeaders(\n  &quot;User-Agent&quot;,\n  &quot;Cache-Control&quot;,\n  &quot;X-Requested-With&quot;,\n  &quot;Content-Type&quot;,\n  &quot;Accept&quot;,\n  &quot;Accept-Encoding&quot;,\n  &quot;Accept-Language&quot;,\n  &quot;Authorization&quot;)\n</code></pre>\n"}],"owner":{"account_id":25569534,"reputation":43,"user_id":19350126,"display_name":"datta900"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":351,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75025792,"answer_count":1,"score":0,"last_activity_date":1673087467,"creation_date":1672943265,"question_id":75022849,"body_markdown":"I&#39;ve made a project using webflux and i&#39;m new to this.\r\nI&#39;m trying to implement the configuration of CORS request but I&#39;m getting this exception:  \r\n\r\n`Access to XMLHttpRequest at &#39;&lt;url of my server&gt;&#39; from origin &#39;http://localhost:8100/&#39; has been blocked by CORS policy: Response to preflight request doesn&#39;t pass access control check: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.`\r\n\r\nMy configuration is:\r\n\r\n```java\r\n@Configuration\r\n@EnableWebFlux\r\npublic class CorsGlobalConfiguration implements WebFluxConfigurer {\r\n\r\n    @Override\r\n    public void addCorsMappings(CorsRegistry corsRegistry) {\r\n        corsRegistry.addMapping(&quot;/**&quot;)\r\n                .allowedOrigins(&quot;*&quot;)\r\n                .allowedMethods(&quot;GET,POST,DELETE,PUT,OPTIONS&quot;)\r\n                .allowedHeaders(&quot;User-Agent,Referer,Origin,Host,Connection,Access-Control-Request-Method,&quot; +\r\n                        &quot;Access-Control-Request-Headers,Cache-Control,Origin,X-Requested-With,Content-Type,Accept,&quot; +\r\n                        &quot;Accept-Encoding,Accept-Language, Authorization&quot;)\r\n                .maxAge(3600);\r\n    }\r\n}\r\n```\r\n\r\nPS: I&#39;ve read that the best way to handle CORS is through the use of a filter? Is it true?\r\n\r\n\r\nThis configuration is pretty similar to the non - reactive webflux project","title":"Webflux CORS No Access-Control-Allow-Origin","body":"<p>I've made a project using webflux and i'm new to this.\nI'm trying to implement the configuration of CORS request but I'm getting this exception:</p>\n<p><code>Access to XMLHttpRequest at '&lt;url of my server&gt;' from origin 'http://localhost:8100/' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.</code></p>\n<p>My configuration is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebFlux\npublic class CorsGlobalConfiguration implements WebFluxConfigurer {\n\n    @Override\n    public void addCorsMappings(CorsRegistry corsRegistry) {\n        corsRegistry.addMapping(&quot;/**&quot;)\n                .allowedOrigins(&quot;*&quot;)\n                .allowedMethods(&quot;GET,POST,DELETE,PUT,OPTIONS&quot;)\n                .allowedHeaders(&quot;User-Agent,Referer,Origin,Host,Connection,Access-Control-Request-Method,&quot; +\n                        &quot;Access-Control-Request-Headers,Cache-Control,Origin,X-Requested-With,Content-Type,Accept,&quot; +\n                        &quot;Accept-Encoding,Accept-Language, Authorization&quot;)\n                .maxAge(3600);\n    }\n}\n</code></pre>\n<p>PS: I've read that the best way to handle CORS is through the use of a filter? Is it true?</p>\n<p>This configuration is pretty similar to the non - reactive webflux project</p>\n"},{"tags":["java","stax"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1507200336,"post_id":46582395,"comment_id":80120237,"body_markdown":"Could you maybe show us the XML around the point where the error happens?  Otherwise, all anyone can do is guess what&#39;s going on.","body":"Could you maybe show us the XML around the point where the error happens?  Otherwise, all anyone can do is guess what&#39;s going on."},{"owner":{"account_id":11328012,"reputation":167,"user_id":8306286,"display_name":"Shireen"},"score":0,"creation_date":1507216017,"post_id":46582395,"comment_id":80131142,"body_markdown":"It stops in the middle of the topic (as i mentioned it&#39;s a wikipedia article) precisely in the middle of a &quot;word&quot; and the text is persian so I&#39;m not sure if showing it is helpful. Is it possible that it&#39;s a memory problem? Because it&#39;s a big article. -@DawoodibnKareem","body":"It stops in the middle of the topic (as i mentioned it&#39;s a wikipedia article) precisely in the middle of a &quot;word&quot; and the text is persian so I&#39;m not sure if showing it is helpful. Is it possible that it&#39;s a memory problem? Because it&#39;s a big article. -@DawoodibnKareem"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1507230654,"post_id":46582395,"comment_id":80139229,"body_markdown":"I really doubt whether it&#39;s a memory problem.  It&#39;s far more likely to be some kind of invalid XML, right in the middle of the document.  It would be really good if you can identify where in the document this happens, then take a look at the XML and see if you can see anything wrong.  To help you identify where it happens, you could try removing half of the document, then half of what remains, and so on, until you can find the problem happening in a manageable portion of the document.","body":"I really doubt whether it&#39;s a memory problem.  It&#39;s far more likely to be some kind of invalid XML, right in the middle of the document.  It would be really good if you can identify where in the document this happens, then take a look at the XML and see if you can see anything wrong.  To help you identify where it happens, you could try removing half of the document, then half of what remains, and so on, until you can find the problem happening in a manageable portion of the document."}],"answers":[{"tags":[],"owner":{"account_id":11328012,"reputation":167,"user_id":8306286,"display_name":"Shireen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1511164686,"creation_date":1511164686,"answer_id":47387376,"question_id":46582395,"body_markdown":"Well, I figured it out!\r\n\r\nI add another condition **reader.hasText()** to final &#39;if&#39; and then everything was fine. Here is the code:\r\n\r\n    case &quot;text&quot;:\r\n        reader.next();\r\n        if(reader != null &amp;&amp; !&quot;&quot;.equals(reader.toString()) &amp;&amp; reader.hasText())                     \r\n        writer1.println(&quot;Text: &quot; + reader.getText());\r\n        break;\r\n\r\n","title":"Current state END_ELEMENT is not among the statesCHARACTERS, COMMENT, CDATA, SPACE, ENTITY_REFERENCE, DTD valid for getText()","body":"<p>Well, I figured it out!</p>\n\n<p>I add another condition <strong>reader.hasText()</strong> to final 'if' and then everything was fine. Here is the code:</p>\n\n<pre><code>case \"text\":\n    reader.next();\n    if(reader != null &amp;&amp; !\"\".equals(reader.toString()) &amp;&amp; reader.hasText())                     \n    writer1.println(\"Text: \" + reader.getText());\n    break;\n</code></pre>\n"}],"owner":{"account_id":11328012,"reputation":167,"user_id":8306286,"display_name":"Shireen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2493,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":47387376,"answer_count":1,"score":0,"last_activity_date":1673087430,"creation_date":1507196292,"question_id":46582395,"body_markdown":"I&#39;m so new to java but I&#39;m doing this project for school. I have a 4GB XML file (it&#39;s a wikipedia dump) need to parse. I use StAX and my code run succsefully for more than 400,000 lines (almost 50MB) but then I get this error. \r\n \r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.IllegalStateException: Current\r\n&gt; state END_ELEMENT is not among the statesCHARACTERS, COMMENT, CDATA,\r\n&gt; SPACE, ENTITY_REFERENCE, DTD valid for getText()  \tat\r\n&gt; com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.getText(XMLStreamReaderImpl.java:1081)\r\n&gt; \tat tagremoving1.TagRemoving1.main(TagRemoving1.java:65)\r\n\r\nI read somewhere when I use getText() I shoul check for null or empty elements so I did. Then it goes further but stops again with the same error. I looked up almost everywhere. I don&#39;t know what&#39;s wrong. \r\nThis is my code:\r\n\r\n    XMLInputFactory factory = XMLInputFactory.newInstance();\r\n         File file = new File(&quot;source.xml&quot;);\r\n         FileInputStream fileReader = new FileInputStream(file);    \r\n         factory.setProperty(XMLInputFactory.IS_COALESCING, true);\r\n                factory.setProperty(XMLInputFactory.IS_REPLACING_ENTITY_REFERENCES,true);\r\n                factory.setProperty(XMLInputFactory.IS_SUPPORTING_EXTERNAL_ENTITIES,false);\r\n         PrintWriter writer1 = new PrintWriter(&quot;result.txt&quot;, &quot;UTF-8&quot;);   \r\n     \r\n        XMLStreamReader reader = factory.createXMLStreamReader(fileReader);\r\n        int counter = 1;\r\n        while(reader.hasNext()){\r\n            \r\n            if(reader.next() == 1){ //If it is START_ELEMENT\r\n                String name = reader.getLocalName();\r\n                switch(name){\r\n                    case &quot;page&quot;:\r\n                        writer1.println(&quot;\\r\\npage&quot; + counter + &quot;:&quot;);  \r\n                        counter++;\r\n                        break;\r\n\r\n                    case &quot;title&quot;:\r\n                        reader.next();\r\n                        if(reader != null &amp;&amp; !&quot;&quot;.equals(reader.toString())) \r\n                                writer1.println(&quot;Title: &quot; + reader.getText());\r\n                        break;\r\n\r\n                    case &quot;text&quot;:\r\n                        reader.next();\r\n                        if(reader != null &amp;&amp; !&quot;&quot;.equals(reader.toString()))\r\n                            writer1.println(&quot;Text: &quot; + reader.getText());\r\n                        break;\r\n\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n\r\n        }\r\n        writer1.flush();\r\n        writer1.close();\r\n\r\nAny suggestion?","title":"Current state END_ELEMENT is not among the statesCHARACTERS, COMMENT, CDATA, SPACE, ENTITY_REFERENCE, DTD valid for getText()","body":"<p>I'm so new to java but I'm doing this project for school. I have a 4GB XML file (it's a wikipedia dump) need to parse. I use StAX and my code run succsefully for more than 400,000 lines (almost 50MB) but then I get this error. </p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.IllegalStateException: Current\n  state END_ELEMENT is not among the statesCHARACTERS, COMMENT, CDATA,\n  SPACE, ENTITY_REFERENCE, DTD valid for getText()      at\n  com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.getText(XMLStreamReaderImpl.java:1081)\n    at tagremoving1.TagRemoving1.main(TagRemoving1.java:65)</p>\n</blockquote>\n\n<p>I read somewhere when I use getText() I shoul check for null or empty elements so I did. Then it goes further but stops again with the same error. I looked up almost everywhere. I don't know what's wrong. \nThis is my code:</p>\n\n<pre><code>XMLInputFactory factory = XMLInputFactory.newInstance();\n     File file = new File(\"source.xml\");\n     FileInputStream fileReader = new FileInputStream(file);    \n     factory.setProperty(XMLInputFactory.IS_COALESCING, true);\n            factory.setProperty(XMLInputFactory.IS_REPLACING_ENTITY_REFERENCES,true);\n            factory.setProperty(XMLInputFactory.IS_SUPPORTING_EXTERNAL_ENTITIES,false);\n     PrintWriter writer1 = new PrintWriter(\"result.txt\", \"UTF-8\");   \n\n    XMLStreamReader reader = factory.createXMLStreamReader(fileReader);\n    int counter = 1;\n    while(reader.hasNext()){\n\n        if(reader.next() == 1){ //If it is START_ELEMENT\n            String name = reader.getLocalName();\n            switch(name){\n                case \"page\":\n                    writer1.println(\"\\r\\npage\" + counter + \":\");  \n                    counter++;\n                    break;\n\n                case \"title\":\n                    reader.next();\n                    if(reader != null &amp;&amp; !\"\".equals(reader.toString())) \n                            writer1.println(\"Title: \" + reader.getText());\n                    break;\n\n                case \"text\":\n                    reader.next();\n                    if(reader != null &amp;&amp; !\"\".equals(reader.toString()))\n                        writer1.println(\"Text: \" + reader.getText());\n                    break;\n\n                default:\n                    break;\n            }\n        }\n\n    }\n    writer1.flush();\n    writer1.close();\n</code></pre>\n\n<p>Any suggestion?</p>\n"},{"tags":["java","selenium","selenium-webdriver","webdriver","fluentwait"],"comments":[{"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"score":1,"creation_date":1487255237,"post_id":42275658,"comment_id":71709563,"body_markdown":"Did you try the example out of the docs? https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html","body":"Did you try the example out of the docs? <a href=\"https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html\" rel=\"nofollow noreferrer\">seleniumhq.github.io/selenium/docs/api/java/org/openqa/selen&zwnj;&#8203;ium/&hellip;</a>"},{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1487306336,"post_id":42275658,"comment_id":71735240,"body_markdown":"@JeffC Thanks. I can see some difference between the documentation provided by  selenium-java-2.53.1 src code and the documentation provided in the URL you shared. While in selenium-java-2.53.1 src code the creating an object is &lt;&lt;-- Wait&lt;WebDriver&gt; wait = new FluentWait&lt;WebDriver&gt;(driver) --&gt;&gt; but the link documentation says it as &lt;&lt;-- Wait wait = new FluentWait(driver)  --&gt;&gt;","body":"@JeffC Thanks. I can see some difference between the documentation provided by  selenium-java-2.53.1 src code and the documentation provided in the URL you shared. While in selenium-java-2.53.1 src code the creating an object is &lt;&lt;-- Wait&lt;WebDriver&gt; wait = new FluentWait&lt;WebDriver&gt;(driver) --&gt;&gt; but the link documentation says it as &lt;&lt;-- Wait wait = new FluentWait(driver)  --&gt;&gt;"}],"answers":[{"tags":[],"owner":{"account_id":10050954,"reputation":134,"user_id":7574493,"display_name":"Dharam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1526501024,"creation_date":1487262821,"answer_id":42279666,"question_id":42275658,"body_markdown":"You need to specify expected condition inside the wait below is the modified code that could solve your problem.\r\n\r\nCode:\r\n\r\n    import java.util.concurrent.TimeUnit;\r\n    import org.junit.Test;\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.NoSuchElementException;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.support.ui.ExpectedConditions;\r\n    import org.openqa.selenium.support.ui.FluentWait;\r\n    import org.openqa.selenium.support.ui.Wait;\r\n    \r\n    public class DummyClass\r\n    {\r\n    \tWebDriver driver;\r\n    \t@Test\r\n    \tpublic void test()\r\n        {\r\n            Wait&lt;WebDriver&gt; wait = new FluentWait&lt;WebDriver&gt;(driver)\r\n    \t        .withTimeout(30, TimeUnit.SECONDS)\r\n    \t        .pollingEvery(5, TimeUnit.SECONDS)\r\n    \t        .ignoring(NoSuchElementException.class);\r\n\r\n            until(new Function&lt;WebElement, Boolean&gt;() \r\n    \t\t{\r\n                public Boolean apply(WebElement element)\r\n                {\r\n                    return element.getText().endsWith(&quot;04&quot;);\r\n                }\r\n\r\n                private void until(Function&lt;WebElement, Boolean&gt; function)\r\n                {\r\n                    driver.findElement(By.linkText(&quot;Sample Post2&quot;));\r\n                }\r\n            }\r\n        }\r\n    }","title":"The type FluentWait is not generic; it cannot be parameterized with arguments &lt;WebDriver&gt; error for FluentWait Class through Selenium and Java","body":"<p>You need to specify expected condition inside the wait below is the modified code that could solve your problem.</p>\n\n<p>Code:</p>\n\n<pre><code>import java.util.concurrent.TimeUnit;\nimport org.junit.Test;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.NoSuchElementException;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.FluentWait;\nimport org.openqa.selenium.support.ui.Wait;\n\npublic class DummyClass\n{\n    WebDriver driver;\n    @Test\n    public void test()\n    {\n        Wait&lt;WebDriver&gt; wait = new FluentWait&lt;WebDriver&gt;(driver)\n            .withTimeout(30, TimeUnit.SECONDS)\n            .pollingEvery(5, TimeUnit.SECONDS)\n            .ignoring(NoSuchElementException.class);\n\n        until(new Function&lt;WebElement, Boolean&gt;() \n        {\n            public Boolean apply(WebElement element)\n            {\n                return element.getText().endsWith(\"04\");\n            }\n\n            private void until(Function&lt;WebElement, Boolean&gt; function)\n            {\n                driver.findElement(By.linkText(\"Sample Post2\"));\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1579796536,"creation_date":1523010445,"answer_id":49690732,"question_id":42275658,"body_markdown":"With the availability of _Selenium v3.11.0_ the constructor of [FluentWait](http://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html) have changed. Now the argument type for `withTimeout` and `pollingEvery` is [Duration](https://docs.oracle.com/javase/9/docs/api/java/time/Duration.html). Here is the modified implementation :\r\n\r\n\timport java.time.Duration;\r\n\r\n\timport org.openqa.selenium.By;\r\n\timport org.openqa.selenium.NoSuchElementException;\r\n\timport org.openqa.selenium.WebDriver;\r\n\timport org.openqa.selenium.WebElement;\r\n\timport org.openqa.selenium.firefox.FirefoxDriver;\r\n\timport org.openqa.selenium.support.ui.FluentWait;\r\n\timport org.openqa.selenium.support.ui.Wait;\r\n\r\n\timport com.google.common.base.Function;\r\n\r\n\tpublic class Fluent_Wait {\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\r\n\r\n\t\t\tSystem.setProperty(&quot;webdriver.gecko.driver&quot;, &quot;C:\\\\Utility\\\\BrowserDrivers\\\\geckodriver.exe&quot;);\r\n\t\t\tWebDriver driver = new FirefoxDriver();\r\n\t\t    \tdriver.get(&quot;https://www.google.com&quot;);\r\n\t\t    \t// Waiting 30 seconds for an element to be present on the page, checking\r\n\t\t    \t// for its presence once every 500 milliseconds.\r\n\t\t    \tWait&lt;WebDriver&gt; wait = new FluentWait&lt;WebDriver&gt;(driver)\r\n\t\t\t\t.withTimeout(Duration.ofSeconds(30))\r\n\t\t\t\t.pollingEvery(Duration.ofMillis(500))\r\n\t\t\t\t.ignoring(NoSuchElementException.class);\r\n\r\n\t\t    \tWebElement foo = wait.until(new Function&lt;WebDriver, WebElement&gt;() {\r\n\t\t\t\tpublic WebElement apply(WebDriver driver) {\r\n\t\t\t\t\treturn driver.findElement(By.name(&quot;q&quot;));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\t}","title":"The type FluentWait is not generic; it cannot be parameterized with arguments &lt;WebDriver&gt; error for FluentWait Class through Selenium and Java","body":"<p>With the availability of <em>Selenium v3.11.0</em> the constructor of <a href=\"http://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html\" rel=\"nofollow noreferrer\">FluentWait</a> have changed. Now the argument type for <code>withTimeout</code> and <code>pollingEvery</code> is <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/Duration.html\" rel=\"nofollow noreferrer\">Duration</a>. Here is the modified implementation :</p>\n\n<pre><code>import java.time.Duration;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.NoSuchElementException;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.firefox.FirefoxDriver;\nimport org.openqa.selenium.support.ui.FluentWait;\nimport org.openqa.selenium.support.ui.Wait;\n\nimport com.google.common.base.Function;\n\npublic class Fluent_Wait {\n\n    public static void main(String[] args) {\n\n\n        System.setProperty(\"webdriver.gecko.driver\", \"C:\\\\Utility\\\\BrowserDrivers\\\\geckodriver.exe\");\n        WebDriver driver = new FirefoxDriver();\n            driver.get(\"https://www.google.com\");\n            // Waiting 30 seconds for an element to be present on the page, checking\n            // for its presence once every 500 milliseconds.\n            Wait&lt;WebDriver&gt; wait = new FluentWait&lt;WebDriver&gt;(driver)\n            .withTimeout(Duration.ofSeconds(30))\n            .pollingEvery(Duration.ofMillis(500))\n            .ignoring(NoSuchElementException.class);\n\n            WebElement foo = wait.until(new Function&lt;WebDriver, WebElement&gt;() {\n            public WebElement apply(WebDriver driver) {\n                return driver.findElement(By.name(\"q\"));\n            }\n        });\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10576161,"reputation":2214,"user_id":7791423,"display_name":"Amado Saladino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543062518,"creation_date":1543062518,"answer_id":53458142,"question_id":42275658,"body_markdown":"The simplest solution is to use the other method implementation:\r\n\r\n    withTimeout(Duration.ofSeconds(10))\r\n\t\t\t\t.pollingEvery(Duration.ofSeconds(2))\r\n\r\nThe form `withTimeout(Duration timeOut)`\r\nis still used and non-deprecated one","title":"The type FluentWait is not generic; it cannot be parameterized with arguments &lt;WebDriver&gt; error for FluentWait Class through Selenium and Java","body":"<p>The simplest solution is to use the other method implementation:</p>\n\n<pre><code>withTimeout(Duration.ofSeconds(10))\n            .pollingEvery(Duration.ofSeconds(2))\n</code></pre>\n\n<p>The form <code>withTimeout(Duration timeOut)</code>\nis still used and non-deprecated one</p>\n"},{"tags":[],"owner":{"account_id":21541616,"reputation":21,"user_id":15879265,"display_name":"Rahul Sardar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1620628136,"creation_date":1620572639,"answer_id":67459178,"question_id":42275658,"body_markdown":"I was also facing the same error, later I noticed that I was using the class name as `fluentwait`. After changing the class name it was working fine.","title":"The type FluentWait is not generic; it cannot be parameterized with arguments &lt;WebDriver&gt; error for FluentWait Class through Selenium and Java","body":"<p>I was also facing the same error, later I noticed that I was using the class name as <code>fluentwait</code>. After changing the class name it was working fine.</p>\n"},{"tags":[],"owner":{"account_id":910157,"reputation":4964,"user_id":944190,"accept_rate":54,"display_name":"a Learner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641141845,"creation_date":1641141845,"answer_id":70557816,"question_id":42275658,"body_markdown":"I was also facing same error that `The type FluentWait is not generic; it cannot be parameterized with arguments &lt;WebDriver&gt;` but i noticed a silly mistake that my main class was also named as FuentWait and it was not generic. I changed its name and error went away.","title":"The type FluentWait is not generic; it cannot be parameterized with arguments &lt;WebDriver&gt; error for FluentWait Class through Selenium and Java","body":"<p>I was also facing same error that <code>The type FluentWait is not generic; it cannot be parameterized with arguments &lt;WebDriver&gt;</code> but i noticed a silly mistake that my main class was also named as FuentWait and it was not generic. I changed its name and error went away.</p>\n"},{"tags":[],"owner":{"account_id":27460747,"reputation":1,"user_id":20951367,"display_name":"ShubhAm Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673087096,"creation_date":1673087096,"answer_id":75039577,"question_id":42275658,"body_markdown":"I got the same error since I named the class &#39;FluentWait&#39; that I created in eclipse to implement fluent wait. Try renaming the class to a different name.","title":"The type FluentWait is not generic; it cannot be parameterized with arguments &lt;WebDriver&gt; error for FluentWait Class through Selenium and Java","body":"<p>I got the same error since I named the class 'FluentWait' that I created in eclipse to implement fluent wait. Try renaming the class to a different name.</p>\n"}],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6703,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":42279666,"answer_count":6,"score":1,"last_activity_date":1673087096,"creation_date":1487252571,"question_id":42275658,"body_markdown":"I am working with `Selenium Standalone Server 3.0.1`. I am trying to add an `Explicit Wait` to my code to detect an element through xpath when the element becomes visible. In order to get some Java help I looked out for the source code for  `Selenium Standalone Server 3.0.1` but was unable to find it. I found the source code in `selenium-java-2.53.1` release. I downloaded it and found `selenium-java-2.53.1-srcs` and added to my `Eclipse IDE`. From the help of `FluentWait`, I simply copy pasted the code in my `Eclipse IDE` and changed the variable names. \r\n\r\nThe sample code in documentation is like:\r\n\r\n   \r\n\r\n       // Waiting 30 seconds for an element to be present on the page, checking\r\n       // for its presence once every 5 seconds.\r\n        Wait&lt;WebDriver&gt; wait = new FluentWait&lt;WebDriver&gt;(driver)\r\n           .withTimeout(30, SECONDS)\r\n           .pollingEvery(5, SECONDS)\r\n           .ignoring(NoSuchElementException.class);\r\n    \r\n        WebElement foo = wait.until(new Function&lt;WebDriver, WebElement&gt;() {\r\n         public WebElement apply(WebDriver driver) {\r\n           return driver.findElement(By.id(&quot;foo&quot;));\r\n          }\r\n        });\r\n\r\nBut when I implement this code, simply copy pasting it:\r\n\r\n\t\t   Wait&lt;WebDriver&gt; wait = new FluentWait&lt;WebDriver&gt;(driver)\r\n\t\t       .withTimeout(30, TimeUnit.SECONDS)\r\n\t\t       .pollingEvery(5, TimeUnit.SECONDS)\r\n\t\t       .ignoring(NoSuchElementException.class);\r\n\r\n\t\t   WebElement element = wait.until(new Function&lt;WebDriver, WebElement&gt;()        {\r\n\t\t     public WebElement apply(WebDriver driver) {\r\n\t\t       return driver.findElement(By.xpath(&quot;//p[text()=&#39;WebDriver&#39;]&quot;));\r\n\t\t     }\r\n\t\t   });\r\n\r\n\r\n I am getting an error on `FluentWait` Class as `The type FluentWait is not generic; it cannot be parameterized with arguments &lt;WebDriver&gt;`\r\n\r\nHere is the list of my imports:\r\n\r\n        import java.util.concurrent.TimeUnit;\r\n        import org.apache.log4j.Logger;\r\n        import org.apache.log4j.PropertyConfigurator;\r\n        import org.openqa.selenium.By;\r\n        import org.openqa.selenium.NoSuchElementException;\r\n        import org.openqa.selenium.WebDriver;\r\n        import org.openqa.selenium.WebElement;\r\n        import org.openqa.selenium.chrome.ChromeDriver;\r\n        import org.openqa.selenium.support.ui.Wait;\r\n        import com.google.common.base.Function;\r\n\r\nCan anyone help me out please?\r\n\r\n\r\n----------\r\nUpdate\r\n------\r\nAdded an [answer](https://stackoverflow.com/questions/42275658/selenium-webdriver-3-0-1-eclipse-java-chrome-selenium-showing-error-for-fluen/49690732#49690732) with respect to the modified constructor of **FluentWait** in **Selenium v3.11.0**","title":"The type FluentWait is not generic; it cannot be parameterized with arguments &lt;WebDriver&gt; error for FluentWait Class through Selenium and Java","body":"<p>I am working with <code>Selenium Standalone Server 3.0.1</code>. I am trying to add an <code>Explicit Wait</code> to my code to detect an element through xpath when the element becomes visible. In order to get some Java help I looked out for the source code for  <code>Selenium Standalone Server 3.0.1</code> but was unable to find it. I found the source code in <code>selenium-java-2.53.1</code> release. I downloaded it and found <code>selenium-java-2.53.1-srcs</code> and added to my <code>Eclipse IDE</code>. From the help of <code>FluentWait</code>, I simply copy pasted the code in my <code>Eclipse IDE</code> and changed the variable names. </p>\n\n<p>The sample code in documentation is like:</p>\n\n<pre><code>   // Waiting 30 seconds for an element to be present on the page, checking\n   // for its presence once every 5 seconds.\n    Wait&lt;WebDriver&gt; wait = new FluentWait&lt;WebDriver&gt;(driver)\n       .withTimeout(30, SECONDS)\n       .pollingEvery(5, SECONDS)\n       .ignoring(NoSuchElementException.class);\n\n    WebElement foo = wait.until(new Function&lt;WebDriver, WebElement&gt;() {\n     public WebElement apply(WebDriver driver) {\n       return driver.findElement(By.id(\"foo\"));\n      }\n    });\n</code></pre>\n\n<p>But when I implement this code, simply copy pasting it:</p>\n\n<pre><code>       Wait&lt;WebDriver&gt; wait = new FluentWait&lt;WebDriver&gt;(driver)\n           .withTimeout(30, TimeUnit.SECONDS)\n           .pollingEvery(5, TimeUnit.SECONDS)\n           .ignoring(NoSuchElementException.class);\n\n       WebElement element = wait.until(new Function&lt;WebDriver, WebElement&gt;()        {\n         public WebElement apply(WebDriver driver) {\n           return driver.findElement(By.xpath(\"//p[text()='WebDriver']\"));\n         }\n       });\n</code></pre>\n\n<p>I am getting an error on <code>FluentWait</code> Class as <code>The type FluentWait is not generic; it cannot be parameterized with arguments &lt;WebDriver&gt;</code></p>\n\n<p>Here is the list of my imports:</p>\n\n<pre><code>    import java.util.concurrent.TimeUnit;\n    import org.apache.log4j.Logger;\n    import org.apache.log4j.PropertyConfigurator;\n    import org.openqa.selenium.By;\n    import org.openqa.selenium.NoSuchElementException;\n    import org.openqa.selenium.WebDriver;\n    import org.openqa.selenium.WebElement;\n    import org.openqa.selenium.chrome.ChromeDriver;\n    import org.openqa.selenium.support.ui.Wait;\n    import com.google.common.base.Function;\n</code></pre>\n\n<p>Can anyone help me out please?</p>\n\n<hr>\n\n<h2>Update</h2>\n\n<p>Added an <a href=\"https://stackoverflow.com/questions/42275658/selenium-webdriver-3-0-1-eclipse-java-chrome-selenium-showing-error-for-fluen/49690732#49690732\">answer</a> with respect to the modified constructor of <strong>FluentWait</strong> in <strong>Selenium v3.11.0</strong></p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1673040943,"post_id":75036245,"comment_id":132416288,"body_markdown":"Questions about optimizing running code  is better asked at [CodeReview.se]","body":"Questions about optimizing running code  is better asked at <a href=\"https://codereview.stackexchange.com\">Code Review</a>"}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673087001,"creation_date":1673041185,"answer_id":75036323,"question_id":75036245,"body_markdown":"Map to a new class and reduce that, then use the reduced value to compute the final result. This will work for Java 8+. Something like:\r\n\r\n```\r\n@Data\r\n@RequiredArgsConstructor\r\npublic class ResultAccumulator {\r\n    public static final ResultAccumulator ZERO = new ResultAccumulator(BigDecimal.ZERO, BigDecimal.ZERO);\r\n\r\n    private final BigDecimal weightedValue;\r\n    private final BigDecimal weightSum;\r\n\r\n    public static ResultAccumulator fromMeasurement(final Measurement measurement) {\r\n        return new ResultAccumulator(\r\n                measurement.getRawValue().multiply(measurement.getWeighting()),\r\n                measurement.getWeighting());\r\n    }\r\n\r\n    public ResultAccumulator merge(final ResultAccumulator other) {\r\n        return new ResultAccumulator(\r\n                getWeightedValue().add(other.getWeightedValue()),\r\n                getWeightSum().add(other.getWeightSum()));\r\n    }\r\n\r\n    public BigDecimal getFinalResult() {\r\n        return getWeightedValue().divide(getWeightSum(), 3, RoundingMode.DOWN);\r\n    }\r\n}\r\n\r\npublic BigDecimal calculateWeightedAverage() {\r\n    final ResultAccumulator result = measurements.stream()\r\n            .map(ResultAccumulator::fromMeasurement)\r\n            .reduce(\r\n                    ResultAccumulator.ZERO,\r\n                    ResultAccumulator::merge);\r\n    return result.getFinalResult();\r\n}\r\n```\r\n\r\nOr do it quick and dirty and reduce your original `Measurement` by storing the &quot;weighted value&quot; in `rawValue` and the sum of weights in `weight`. The structure of both classes is the same, but using two classes is less confusing to others and yourself in 2 weeks.","title":"Calculate weighted average from objects with Java stream","body":"<p>Map to a new class and reduce that, then use the reduced value to compute the final result. This will work for Java 8+. Something like:</p>\n<pre><code>@Data\n@RequiredArgsConstructor\npublic class ResultAccumulator {\n    public static final ResultAccumulator ZERO = new ResultAccumulator(BigDecimal.ZERO, BigDecimal.ZERO);\n\n    private final BigDecimal weightedValue;\n    private final BigDecimal weightSum;\n\n    public static ResultAccumulator fromMeasurement(final Measurement measurement) {\n        return new ResultAccumulator(\n                measurement.getRawValue().multiply(measurement.getWeighting()),\n                measurement.getWeighting());\n    }\n\n    public ResultAccumulator merge(final ResultAccumulator other) {\n        return new ResultAccumulator(\n                getWeightedValue().add(other.getWeightedValue()),\n                getWeightSum().add(other.getWeightSum()));\n    }\n\n    public BigDecimal getFinalResult() {\n        return getWeightedValue().divide(getWeightSum(), 3, RoundingMode.DOWN);\n    }\n}\n\npublic BigDecimal calculateWeightedAverage() {\n    final ResultAccumulator result = measurements.stream()\n            .map(ResultAccumulator::fromMeasurement)\n            .reduce(\n                    ResultAccumulator.ZERO,\n                    ResultAccumulator::merge);\n    return result.getFinalResult();\n}\n</code></pre>\n<p>Or do it quick and dirty and reduce your original <code>Measurement</code> by storing the &quot;weighted value&quot; in <code>rawValue</code> and the sum of weights in <code>weight</code>. The structure of both classes is the same, but using two classes is less confusing to others and yourself in 2 weeks.</p>\n"},{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673043143,"creation_date":1673043143,"answer_id":75036548,"question_id":75036245,"body_markdown":"Assuming you are using Java 12 or higher, to avoid to have to stream over the list twice, you can use the [teeing][1] collector. In addition to the docs here is an article about it [the-teeing-collector][2]\r\n\r\n    public BigDecimal calculateWeightedAverage() {\r\n        return measurements.stream()\r\n                    .collect(Collectors.teeing(\r\n                            Collectors.reducing(BigDecimal.ZERO, m -&gt; m.getRawValue().multiply(m.getWeighting()), BigDecimal::add),\r\n                            Collectors.reducing(BigDecimal.ZERO, Measurement::getWeighting, BigDecimal::add ),\r\n                            (weightedRawValues , totalWeighting) -&gt; weightedRawValues.divide(totalWeighting, 3, RoundingMode.DOWN)));\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/stream/Collectors.html#teeing(java.util.stream.Collector,java.util.stream.Collector,java.util.function.BiFunction)\r\n  [2]: https://dzone.com/articles/java-12-the-teeing-collector","title":"Calculate weighted average from objects with Java stream","body":"<p>Assuming you are using Java 12 or higher, to avoid to have to stream over the list twice, you can use the <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/stream/Collectors.html#teeing(java.util.stream.Collector,java.util.stream.Collector,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\">teeing</a> collector. In addition to the docs here is an article about it <a href=\"https://dzone.com/articles/java-12-the-teeing-collector\" rel=\"nofollow noreferrer\">the-teeing-collector</a></p>\n<pre><code>public BigDecimal calculateWeightedAverage() {\n    return measurements.stream()\n                .collect(Collectors.teeing(\n                        Collectors.reducing(BigDecimal.ZERO, m -&gt; m.getRawValue().multiply(m.getWeighting()), BigDecimal::add),\n                        Collectors.reducing(BigDecimal.ZERO, Measurement::getWeighting, BigDecimal::add ),\n                        (weightedRawValues , totalWeighting) -&gt; weightedRawValues.divide(totalWeighting, 3, RoundingMode.DOWN)));\n}\n</code></pre>\n"}],"owner":{"account_id":220794,"reputation":12257,"user_id":478406,"accept_rate":82,"display_name":"Robert Strauch"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":293,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75036548,"answer_count":2,"score":1,"last_activity_date":1673087001,"creation_date":1673040676,"question_id":75036245,"body_markdown":"Given a simple `Measurement` class:\r\n\r\n```java\r\n@Getter\r\n@AllArgsConstructor\r\npublic class Measurement {\r\n    private BigDecimal rawValue;\r\n    private BigDecimal weighting;\r\n}\r\n```\r\n\r\nThe service processes a `List&lt;Measurement&gt;` and shall calculate a weighted average by applying the following steps:\r\n\r\n1. Multiply each `rawValue` with its `weighting`.\r\n2. Build the sum of all weighted raw values from (1).\r\n3. Divide the sum (2) by the sum of all weightings.\r\n\r\n**Example**\r\n\r\n`(1.0 * 5.0) + (2.0 * 2.0) + (3.0 * 7.0) / 14`\r\n\r\nHere is my current implementation:\r\n\r\n```java\r\npublic class MeasurementService {\r\n\r\n    private List&lt;Measurement&gt; measurements = new ArrayList&lt;&gt;();\r\n\r\n    public MeasurementService() {\r\n        Measurement m1 = new Measurement(new BigDecimal(&quot;1.0&quot;), new BigDecimal(&quot;5.0&quot;));\r\n        Measurement m2 = new Measurement(new BigDecimal(&quot;2.0&quot;), new BigDecimal(&quot;2.0&quot;));\r\n        Measurement m3 = new Measurement(new BigDecimal(&quot;3.0&quot;), new BigDecimal(&quot;7.0&quot;));\r\n        measurements.add(m1);\r\n        measurements.add(m2);\r\n        measurements.add(m3);\r\n    }\r\n\r\n    public BigDecimal calculateWeightedAverage() {\r\n        final BigDecimal totalWeighting = measurements.stream()\r\n                .map(measurement -&gt; measurement.getWeighting())\r\n                .reduce(BigDecimal.ZERO, BigDecimal::add);\r\n        return measurements.stream()\r\n                .map(measurement -&gt; measurement.getRawValue().multiply(measurement.getWeighting()))\r\n                .reduce(BigDecimal.ZERO, BigDecimal::add)\r\n                .divide(totalWeighting, 3, RoundingMode.DOWN);\r\n    }\r\n}\r\n```\r\n\r\nWhile this is working, I don&#39;t like using the stream of `measurements` twice and I bet there is a better way. Unfortunately, I couldn&#39;t come up with one so far.\r\n\r\nDo you have any idea how to simplify the `calculateWeightedAverage` method?\r\n\r\nI&#39;m using Java 17.","title":"Calculate weighted average from objects with Java stream","body":"<p>Given a simple <code>Measurement</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@AllArgsConstructor\npublic class Measurement {\n    private BigDecimal rawValue;\n    private BigDecimal weighting;\n}\n</code></pre>\n<p>The service processes a <code>List&lt;Measurement&gt;</code> and shall calculate a weighted average by applying the following steps:</p>\n<ol>\n<li>Multiply each <code>rawValue</code> with its <code>weighting</code>.</li>\n<li>Build the sum of all weighted raw values from (1).</li>\n<li>Divide the sum (2) by the sum of all weightings.</li>\n</ol>\n<p><strong>Example</strong></p>\n<p><code>(1.0 * 5.0) + (2.0 * 2.0) + (3.0 * 7.0) / 14</code></p>\n<p>Here is my current implementation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MeasurementService {\n\n    private List&lt;Measurement&gt; measurements = new ArrayList&lt;&gt;();\n\n    public MeasurementService() {\n        Measurement m1 = new Measurement(new BigDecimal(&quot;1.0&quot;), new BigDecimal(&quot;5.0&quot;));\n        Measurement m2 = new Measurement(new BigDecimal(&quot;2.0&quot;), new BigDecimal(&quot;2.0&quot;));\n        Measurement m3 = new Measurement(new BigDecimal(&quot;3.0&quot;), new BigDecimal(&quot;7.0&quot;));\n        measurements.add(m1);\n        measurements.add(m2);\n        measurements.add(m3);\n    }\n\n    public BigDecimal calculateWeightedAverage() {\n        final BigDecimal totalWeighting = measurements.stream()\n                .map(measurement -&gt; measurement.getWeighting())\n                .reduce(BigDecimal.ZERO, BigDecimal::add);\n        return measurements.stream()\n                .map(measurement -&gt; measurement.getRawValue().multiply(measurement.getWeighting()))\n                .reduce(BigDecimal.ZERO, BigDecimal::add)\n                .divide(totalWeighting, 3, RoundingMode.DOWN);\n    }\n}\n</code></pre>\n<p>While this is working, I don't like using the stream of <code>measurements</code> twice and I bet there is a better way. Unfortunately, I couldn't come up with one so far.</p>\n<p>Do you have any idea how to simplify the <code>calculateWeightedAverage</code> method?</p>\n<p>I'm using Java 17.</p>\n"},{"tags":["java","android","delete-file"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1673086082,"post_id":75038600,"comment_id":132421730,"body_markdown":"Use file.canWrite() too before you try to delete.","body":"Use file.canWrite() too before you try to delete."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1673086110,"post_id":75038600,"comment_id":132421735,"body_markdown":"How did that file land on your device?","body":"How did that file land on your device?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1673086133,"post_id":75038600,"comment_id":132421738,"body_markdown":"Android version of used device?","body":"Android version of used device?"},{"owner":{"account_id":6746145,"reputation":4817,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673086629,"post_id":75038600,"comment_id":132421801,"body_markdown":"Im trying on android 11 and 11+ devices","body":"Im trying on android 11 and 11+ devices"},{"owner":{"account_id":6746145,"reputation":4817,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673086639,"post_id":75038600,"comment_id":132421804,"body_markdown":"10 and below 10 working fine bro","body":"10 and below 10 working fine bro"},{"owner":{"account_id":6746145,"reputation":4817,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673086705,"post_id":75038600,"comment_id":132421815,"body_markdown":"I manually downloaded the file","body":"I manually downloaded the file"},{"owner":{"account_id":4745410,"reputation":971,"user_id":3836908,"accept_rate":98,"display_name":"sanoj lawrence"},"score":0,"creation_date":1674039530,"post_id":75038600,"comment_id":132628288,"body_markdown":"@ have you found any solution. solution kedachudha bro..","body":"@ have you found any solution. solution kedachudha bro.."},{"owner":{"account_id":6746145,"reputation":4817,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1674102814,"post_id":75038600,"comment_id":132644690,"body_markdown":"@sanojlawrence We cannot delete files automatically on android 11+ devices bro","body":"@sanojlawrence We cannot delete files automatically on android 11+ devices bro"},{"owner":{"account_id":6746145,"reputation":4817,"user_id":5197712,"display_name":"Anand"},"score":1,"creation_date":1674102945,"post_id":75038600,"comment_id":132644700,"body_markdown":"https://stackoverflow.com/a/68080701/5197712 Check this answer bro @sanojlawrence","body":"<a href=\"https://stackoverflow.com/a/68080701/5197712\">stackoverflow.com/a/68080701/5197712</a> Check this answer bro @sanojlawrence"}],"owner":{"account_id":6746145,"reputation":4817,"user_id":5197712,"display_name":"Anand"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1673094485,"answer_count":0,"score":1,"last_activity_date":1673086682,"creation_date":1673074471,"question_id":75038600,"body_markdown":"I&#39;m trying to delete a file in android storage. But the file is not getting deleted. \r\nI trapped on this issue almost 3 days. I tired all the solution as of my knowledge, but nothing hellps. Your help will be highly useful to me thanks in advance.\r\n\r\nI used the below code to delete\r\n\r\n     String path = &quot;/storage/emulated/0/Recordings/Call/Two.mp3&quot;;\r\n            File fdelete = new File(path);\r\n            if (fdelete.exists()) {\r\n              boolean  b = fdelete.delete();\r\n              if (b) {\r\n                 System.out.println(&quot;file Deleted :&quot; + path);\r\n              } else {\r\n                 System.out.println(&quot;file not Deleted :&quot; + path);\r\n         }\r\n    }\r\nAnd the permission I used in manifest are\r\n\r\n   \r\n\r\n        &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.STORAGE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.WRITE_INTERNAL_STORAGE&quot; /&gt;","title":"file.delete() Always returns false in Android java(Android 11+ deives)?","body":"<p>I'm trying to delete a file in android storage. But the file is not getting deleted.\nI trapped on this issue almost 3 days. I tired all the solution as of my knowledge, but nothing hellps. Your help will be highly useful to me thanks in advance.</p>\n<p>I used the below code to delete</p>\n<pre><code> String path = &quot;/storage/emulated/0/Recordings/Call/Two.mp3&quot;;\n        File fdelete = new File(path);\n        if (fdelete.exists()) {\n          boolean  b = fdelete.delete();\n          if (b) {\n             System.out.println(&quot;file Deleted :&quot; + path);\n          } else {\n             System.out.println(&quot;file not Deleted :&quot; + path);\n     }\n}\n</code></pre>\n<p>And the permission I used in manifest are</p>\n<pre><code>    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_INTERNAL_STORAGE&quot; /&gt;\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"display_name":"user20951271"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1673086505,"creation_date":1673086505,"answer_id":75039524,"question_id":75039457,"body_markdown":"\r\n\r\n    AssetManager assetManager = context.getAssets();\r\n\r\n    GifDrawable drawable = null;\r\n    try {\r\n        drawable = new GifDrawable(context.getAssets(), path);\r\n        button.setCompoundDrawablesWithIntrinsicBounds(drawable, null, null, null);\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\nHey, hope this helps you with your question, you could add this to your .gradle file.\r\n\r\n","title":"Display GIF as button compound drawable programmatically","body":"<pre><code>AssetManager assetManager = context.getAssets();\n\nGifDrawable drawable = null;\ntry {\n    drawable = new GifDrawable(context.getAssets(), path);\n    button.setCompoundDrawablesWithIntrinsicBounds(drawable, null, null, null);\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>Hey, hope this helps you with your question, you could add this to your .gradle file.</p>\n"}],"owner":{"display_name":"user17802442"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75039524,"answer_count":1,"score":0,"last_activity_date":1673086505,"creation_date":1673085774,"question_id":75039457,"body_markdown":"For the past few days, I am trying to set the icon of one of my Buttons as a GIF file programmatically. My GIF is located in my assets.\r\n\r\nThis is the code that I tried. It partially works, but the GIF seems to be stopped and is not playing, like just an ordinary PNG file.\r\n\r\n    AssetManager assetManager = context.getAssets();\r\n    Drawable drawable = null;\r\n        try {\r\n            drawable = Drawable.createFromStream(context.getAssets().open(&quot;test.gif&quot;), null);\r\n            button.setCompoundDrawablesWithIntrinsicBounds(drawable, 0, 0, 0)\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\nI am expecting the drawable to be playing, just like a GIF.\r\n\r\nAny help is appreciated. Thank you.","title":"Display GIF as button compound drawable programmatically","body":"<p>For the past few days, I am trying to set the icon of one of my Buttons as a GIF file programmatically. My GIF is located in my assets.</p>\n<p>This is the code that I tried. It partially works, but the GIF seems to be stopped and is not playing, like just an ordinary PNG file.</p>\n<pre><code>AssetManager assetManager = context.getAssets();\nDrawable drawable = null;\n    try {\n        drawable = Drawable.createFromStream(context.getAssets().open(&quot;test.gif&quot;), null);\n        button.setCompoundDrawablesWithIntrinsicBounds(drawable, 0, 0, 0)\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n<p>I am expecting the drawable to be playing, just like a GIF.</p>\n<p>Any help is appreciated. Thank you.</p>\n"},{"tags":["java","android","firebase","firebase-storage"],"comments":[{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1672756749,"post_id":74991017,"comment_id":132343241,"body_markdown":"As far as I can tell from [here](https://firebase.google.com/docs/storage/android/list-files) and [here](https://cloud.google.com/storage/docs/json_api/v1/objects/list) the `listAll()` call should be returning the files in lexicographical order. Is that not happening for you? Specifically: if you log the `listResult.getItems()` **without download their data**, does it show the results in the order you expect them in?","body":"As far as I can tell from <a href=\"https://firebase.google.com/docs/storage/android/list-files\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://cloud.google.com/storage/docs/json_api/v1/objects/list\" rel=\"nofollow noreferrer\">here</a> the <code>listAll()</code> call should be returning the files in lexicographical order. Is that not happening for you? Specifically: if you log the <code>listResult.getItems()</code> <b>without download their data</b>, does it show the results in the order you expect them in?"}],"answers":[{"tags":[],"owner":{"account_id":24326117,"reputation":2235,"user_id":18265638,"display_name":"Sathi Aiswarya"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1672823593,"creation_date":1672739970,"answer_id":74991717,"question_id":74991017,"body_markdown":"According to the Firebase documentation given by frank, `listAll() `call should be returning the files in lexicographical order.\r\n\r\nSeems order of the files in the list is being changed by the `for` loop that iterates through the list. Maybe you should try sorting the list before iterating through it.\r\n\r\n`listAll()` method is being called inside a `for` loop that iterates over the `SignNameList`. If the elements in the SignNameList array are in chronological order, then the `listAll()` method will return the files in chronological order as well.\r\n\r\nAs also mentioned [here][1], Consistency of the result is not guaranteed if objects are inserted or removed while this operation is executing.\r\n\r\n[1]:https://firebase.google.com/docs/reference/android/com/google/firebase/storage/StorageReference#listAll()\r\n","title":"Firebase not sorting files alphabetically in android studio,?","body":"<p>According to the Firebase documentation given by frank, <code>listAll() </code>call should be returning the files in lexicographical order.</p>\n<p>Seems order of the files in the list is being changed by the <code>for</code> loop that iterates through the list. Maybe you should try sorting the list before iterating through it.</p>\n<p><code>listAll()</code> method is being called inside a <code>for</code> loop that iterates over the <code>SignNameList</code>. If the elements in the SignNameList array are in chronological order, then the <code>listAll()</code> method will return the files in chronological order as well.</p>\n<p>As also mentioned <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/storage/StorageReference#listAll()\" rel=\"nofollow noreferrer\">here</a>, Consistency of the result is not guaranteed if objects are inserted or removed while this operation is executing.</p>\n"},{"tags":[],"owner":{"account_id":21898238,"reputation":29,"user_id":16184232,"display_name":"Sheraz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673086380,"creation_date":1673086380,"answer_id":75039512,"question_id":74991017,"body_markdown":"thanks for answer\r\nbut error has resolved from here in data base helper ORDER BY ASC\r\n\r\n            Cursor cursor = db.rawQuery(&quot;SELECT * FROM &quot; + TABLE_SIGNS +&quot; ORDER BY fileName ASC&quot;, null);\r\n","title":"Firebase not sorting files alphabetically in android studio,?","body":"<p>thanks for answer\nbut error has resolved from here in data base helper ORDER BY ASC</p>\n<pre><code>        Cursor cursor = db.rawQuery(&quot;SELECT * FROM &quot; + TABLE_SIGNS +&quot; ORDER BY fileName ASC&quot;, null);\n</code></pre>\n"}],"owner":{"account_id":21898238,"reputation":29,"user_id":16184232,"display_name":"Sheraz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1673086380,"creation_date":1672735936,"question_id":74991017,"body_markdown":"I am using firebase storage for saving images, when I retrieve them on application, files are not sorting alphabetically.\r\nFirebase sorting files by date time, first upload showing on first then second.\r\nI have a lot of files and cannot upload these files one by one.\r\nIs there any way to sort files by alphabetically.\r\nlike \r\n\r\n    001.png\r\n    002.png\r\n    003.png\r\n    004.png\r\n    005.png\r\n\r\n\r\n\r\n`\r\n```\r\nprivate void saveAllSigns() {\r\n    showDialog();\r\n    for (int i = 0; i &lt; SignNameList.length; i++) {\r\n        StorageReference storageReference = FirebaseStorage.getInstance().getReference().child(SignNameList[i]);\r\n        int finalI1 = i;\r\n        storageReference.listAll().addOnSuccessListener(new OnSuccessListener&lt;ListResult&gt;() {\r\n            @Override\r\n            public void onSuccess(ListResult listResult) {\r\n                List&lt;StorageReference&gt; list = listResult.getItems();\r\n                for (StorageReference str : list) {\r\n                    long SIZE = 1024 * 1024;\r\n                    str.getBytes(SIZE).addOnSuccessListener(new OnSuccessListener&lt;byte[]&gt;() {\r\n                        @Override\r\n                        public void onSuccess(byte[] bytes) {\r\n                            saveData(bytes, str.getName(), finalI1);\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n                            Log.d(&quot;SlashLog&quot;, &quot;Firebase Exception: &quot; + e.getMessage());\r\n\r\n                        }\r\n```\r\n`\r\n\r\nlooking for solution\r\n","title":"Firebase not sorting files alphabetically in android studio,?","body":"<p>I am using firebase storage for saving images, when I retrieve them on application, files are not sorting alphabetically.\nFirebase sorting files by date time, first upload showing on first then second.\nI have a lot of files and cannot upload these files one by one.\nIs there any way to sort files by alphabetically.\nlike</p>\n<pre><code>001.png\n002.png\n003.png\n004.png\n005.png\n</code></pre>\n<p></p>\n<p>`</p>\n<pre><code>private void saveAllSigns() {\n    showDialog();\n    for (int i = 0; i &lt; SignNameList.length; i++) {\n        StorageReference storageReference = FirebaseStorage.getInstance().getReference().child(SignNameList[i]);\n        int finalI1 = i;\n        storageReference.listAll().addOnSuccessListener(new OnSuccessListener&lt;ListResult&gt;() {\n            @Override\n            public void onSuccess(ListResult listResult) {\n                List&lt;StorageReference&gt; list = listResult.getItems();\n                for (StorageReference str : list) {\n                    long SIZE = 1024 * 1024;\n                    str.getBytes(SIZE).addOnSuccessListener(new OnSuccessListener&lt;byte[]&gt;() {\n                        @Override\n                        public void onSuccess(byte[] bytes) {\n                            saveData(bytes, str.getName(), finalI1);\n                        }\n                    }).addOnFailureListener(new OnFailureListener() {\n                        @Override\n                        public void onFailure(@NonNull Exception e) {\n                            Log.d(&quot;SlashLog&quot;, &quot;Firebase Exception: &quot; + e.getMessage());\n\n                        }\n</code></pre>\n<p>`</p>\n<p>looking for solution</p>\n"},{"tags":["java","kotlin","gradle","gradle-kotlin-dsl"],"answers":[{"tags":[],"owner":{"account_id":18697201,"reputation":147,"user_id":13727252,"display_name":"Dahl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673086295,"creation_date":1673086295,"answer_id":75039508,"question_id":75037348,"body_markdown":"I figured it out. And it was easier than i thought. Keep in mind i am using Kotlin. \r\n\r\n(All code snippets are inside the build.gradle.kts file of the project / module you are creating the sources .jar for)\r\n\r\n\r\nFirst off you need to include either the java or java-library plugin:\r\n\r\n```\r\nplugins {\r\n    `java-library`\r\n}\r\n```\r\n\r\nAnd as far as i know, also this plugin extension:\r\n\r\n```\r\njava {\r\n    withSourcesJar()\r\n}\r\n```\r\n\r\nThis makes the sourcesJar task available (task used to create the sources jar), and you can modify it like so:\r\n\r\n```\r\ntasks.sourcesJar {\r\n    from(project(&quot;:common&quot;).sourceSets.main.get().allSource)\r\n    from(zipTree(&quot;../libs/tinylog-2.5.0/tinylog-api-2.5.0-sources.jar&quot;))\r\n}\r\n```\r\n\r\nThe first line inside the brackets includes my &quot;common&quot; module source code to the output .jar.\r\n\r\nThe second line adds the .java files inside the tinylog sources .jar to the output .jar.\r\n\r\n\r\n","title":"How can you add dependency source code to sourceJar task output?","body":"<p>I figured it out. And it was easier than i thought. Keep in mind i am using Kotlin.</p>\n<p>(All code snippets are inside the build.gradle.kts file of the project / module you are creating the sources .jar for)</p>\n<p>First off you need to include either the java or java-library plugin:</p>\n<pre><code>plugins {\n    `java-library`\n}\n</code></pre>\n<p>And as far as i know, also this plugin extension:</p>\n<pre><code>java {\n    withSourcesJar()\n}\n</code></pre>\n<p>This makes the sourcesJar task available (task used to create the sources jar), and you can modify it like so:</p>\n<pre><code>tasks.sourcesJar {\n    from(project(&quot;:common&quot;).sourceSets.main.get().allSource)\n    from(zipTree(&quot;../libs/tinylog-2.5.0/tinylog-api-2.5.0-sources.jar&quot;))\n}\n</code></pre>\n<p>The first line inside the brackets includes my &quot;common&quot; module source code to the output .jar.</p>\n<p>The second line adds the .java files inside the tinylog sources .jar to the output .jar.</p>\n"}],"owner":{"account_id":18697201,"reputation":147,"user_id":13727252,"display_name":"Dahl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":338,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673086295,"creation_date":1673052226,"question_id":75037348,"body_markdown":"If you got a multi-project gradle build. And one module depends on another.\r\n\r\nHow could you add the dependency module source code to the output jar\r\n\r\nNow i am using this:\r\n\r\n```\r\njava {\r\n    withSourcesJar()\r\n}\r\n```\r\n\r\nI am new to gradle builds and i don&#39;t know any **kotlin**.\r\n\r\nAnd if you have the source code of a dependency as a .jar file. Could you also add that\r\nto the output?\r\n\r\nSo I have a project module:\r\n\r\ndependencies:\r\n  - project module\r\n  - local .jar\r\n\r\n\r\n**What i want:**\r\n\r\nOne .jar of the project (including other modules and dependencies) compiled code: \r\n\r\n**project-0.5.0.jar**\r\n\r\n..and one .jar of the source code (including other modules and dependencies)\r\n\r\n**project-0.5.0-sources.jar**\r\n\r\nI have all source code of dependencies stored locally as .jar files\r\n\r\n**Edit**\r\n\r\nMy project conventions (global for all modules):\r\n\r\n    plugins {\r\n    `java-library`\r\n    }\r\n\r\n    java {\r\n        withSourcesJar()\r\n    }\r\n\r\nHow I am currently creating the project &quot;fat&quot;.jar with compiled code:\r\n(inside the build script)\r\n\r\n```\r\ntasks.jar {\r\n    //manifest.attributes[&quot;Main-Class&quot;] = &quot;com.example.MyMainClass&quot;\r\n    val dependencies = configurations\r\n        .runtimeClasspath\r\n        .get()\r\n        .map(::zipTree) // OR .map { zipTree(it) }\r\n    from(dependencies)\r\n    duplicatesStrategy = DuplicatesStrategy.EXCLUDE\r\n}\r\n```\r\n\r\nI have figured out how to add a project moduleA to another moduleB output sources .jar like so (inside moduleB&#39;s build-script):\r\n\r\n```\r\ntasks.sourcesJar {\r\n    from(project(&quot;:moduleA&quot;).sourceSets.main.get().allSource)\r\n}\r\n```\r\n\r\nNow I need to figure out how to include source code from a dependency .jar\r\n\r\n```\r\nfrom(file(&quot;../path/dependency-1.0.0-sources.jar&quot;))\r\n```\r\n\r\nThis packs the .jar as it is. I need it&#39;s files.\r\n\r\n\r\n","title":"How can you add dependency source code to sourceJar task output?","body":"<p>If you got a multi-project gradle build. And one module depends on another.</p>\n<p>How could you add the dependency module source code to the output jar</p>\n<p>Now i am using this:</p>\n<pre><code>java {\n    withSourcesJar()\n}\n</code></pre>\n<p>I am new to gradle builds and i don't know any <strong>kotlin</strong>.</p>\n<p>And if you have the source code of a dependency as a .jar file. Could you also add that\nto the output?</p>\n<p>So I have a project module:</p>\n<p>dependencies:</p>\n<ul>\n<li>project module</li>\n<li>local .jar</li>\n</ul>\n<p><strong>What i want:</strong></p>\n<p>One .jar of the project (including other modules and dependencies) compiled code:</p>\n<p><strong>project-0.5.0.jar</strong></p>\n<p>..and one .jar of the source code (including other modules and dependencies)</p>\n<p><strong>project-0.5.0-sources.jar</strong></p>\n<p>I have all source code of dependencies stored locally as .jar files</p>\n<p><strong>Edit</strong></p>\n<p>My project conventions (global for all modules):</p>\n<pre><code>plugins {\n`java-library`\n}\n\njava {\n    withSourcesJar()\n}\n</code></pre>\n<p>How I am currently creating the project &quot;fat&quot;.jar with compiled code:\n(inside the build script)</p>\n<pre><code>tasks.jar {\n    //manifest.attributes[&quot;Main-Class&quot;] = &quot;com.example.MyMainClass&quot;\n    val dependencies = configurations\n        .runtimeClasspath\n        .get()\n        .map(::zipTree) // OR .map { zipTree(it) }\n    from(dependencies)\n    duplicatesStrategy = DuplicatesStrategy.EXCLUDE\n}\n</code></pre>\n<p>I have figured out how to add a project moduleA to another moduleB output sources .jar like so (inside moduleB's build-script):</p>\n<pre><code>tasks.sourcesJar {\n    from(project(&quot;:moduleA&quot;).sourceSets.main.get().allSource)\n}\n</code></pre>\n<p>Now I need to figure out how to include source code from a dependency .jar</p>\n<pre><code>from(file(&quot;../path/dependency-1.0.0-sources.jar&quot;))\n</code></pre>\n<p>This packs the .jar as it is. I need it's files.</p>\n"},{"tags":["java","sqlite","geotools"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1673014503,"post_id":75027601,"comment_id":132408254,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":195980,"reputation":10228,"user_id":439194,"accept_rate":100,"display_name":"Ian Turton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673085922,"creation_date":1673085922,"answer_id":75039477,"question_id":75027601,"body_markdown":"The `gt-swing` module is really only intended for simple demonstrations. If you intend to use it in production you should add in off screen buffering to allow &quot;fast&quot; refreshes of the map without rereading all the displayed data.","title":"Map image blinks while adding more layers to it","body":"<p>The <code>gt-swing</code> module is really only intended for simple demonstrations. If you intend to use it in production you should add in off screen buffering to allow &quot;fast&quot; refreshes of the map without rereading all the displayed data.</p>\n"}],"owner":{"account_id":26195458,"reputation":1,"user_id":19876617,"display_name":"Aarti Rakhe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673085922,"creation_date":1672985962,"question_id":75027601,"body_markdown":"I have an application in java swing and geotools. I have displayed a map image and trying to add images as layers to it. When it adds layer it blinks and after some time at the call to addLayer function map image and other few layers disappear for some time. How to stop this? I am loging all the information at the same time in SQLite and then to my own customised file. \r\n\r\nI have stopped trying refreshing all after addLayer function call. The all process should work smoothly without blinking and disappearing. Please Help.","title":"Map image blinks while adding more layers to it","body":"<p>I have an application in java swing and geotools. I have displayed a map image and trying to add images as layers to it. When it adds layer it blinks and after some time at the call to addLayer function map image and other few layers disappear for some time. How to stop this? I am loging all the information at the same time in SQLite and then to my own customised file.</p>\n<p>I have stopped trying refreshing all after addLayer function call. The all process should work smoothly without blinking and disappearing. Please Help.</p>\n"},{"tags":["java","spring-boot","java-resources"],"comments":[{"owner":{"account_id":13033096,"reputation":775,"user_id":9418902,"display_name":"Csisanyi"},"score":0,"creation_date":1673058482,"post_id":75037651,"comment_id":132419064,"body_markdown":"This might help https://stackoverflow.com/questions/28673651/how-to-get-the-path-of-src-test-resources-directory-in-junit","body":"This might help <a href=\"https://stackoverflow.com/questions/28673651/how-to-get-the-path-of-src-test-resources-directory-in-junit\" title=\"how to get the path of src test resources directory in junit\">stackoverflow.com/questions/28673651/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":22066749,"reputation":3758,"user_id":16328516,"display_name":"TriS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673085580,"creation_date":1673085033,"answer_id":75039394,"question_id":75037651,"body_markdown":"As mentioned in the Spring Documentation for [ResourceUtils][1]\r\n\r\n&gt; Utility methods for resolving resource locations to files in the file\r\n&gt; system. **Mainly for internal use within the framework**. **Consider using\r\n&gt; Spring&#39;s Resource abstraction in the core package for handling all\r\n&gt; kinds of file resources in a uniform manner**. ResourceLoader&#39;s\r\n&gt; getResource() method can resolve any location to a Resource object,\r\n&gt; which in turn allows one to obtain a java.io.File in the file system\r\n&gt; through its getFile() method.\r\n\r\nIn the JavaDoc of [ResourceUtils][2] it says\r\n\r\n&gt; Does not check whether the file actually exists; simply returns the\r\n&gt; File that the given location would correspond.\r\n\r\nSo using ResourceUtils is not recommended. There are many ways to getting the files. You can use  Spring&#39;s **ResourceLoader** if you want spring implementation\r\n```\r\n@Autowired\r\nResourceLoader resourceLoader;\r\n```\r\nAnd in the method you can use\r\n```\r\nResource  resource = resourceLoader.getResource(&quot;classpath:smoke/test-file.txt&quot;);\r\nif(resource.exists()){\r\n System.out.println(resource.getFile().getAbsolutePath());\r\n}\r\n```   \r\nOr you can use ClassLoader\r\n```\r\nClassLoader classLoader = getClass().getClassLoader();\r\nFile file = new File(classLoader.getResource(resourceName).getFile());\r\nString absolutePath = file.getAbsolutePath();\r\n``` \r\n\r\nIf you use Spring Boot then this should give a path with in the target folder.This is because the ClassLoader looks for the resources on the classpath. In Maven, the compiled classes and resources are put in the /target/ directory. That&#39;s why this time, we get a path to a classpath resource.   \r\nE.g.` D:\\file-tester\\target\\classes\\smoke\\test-file.txt`\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/ResourceUtils.html\r\n  [2]: https://github.com/spring-projects/spring-framework/blob/main/spring-core/src/main/java/org/springframework/util/ResourceUtils.java#L159","title":"Spring ResourceUtils showing strange behavior loading a test resource as a File","body":"<p>As mentioned in the Spring Documentation for <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/ResourceUtils.html\" rel=\"nofollow noreferrer\">ResourceUtils</a></p>\n<blockquote>\n<p>Utility methods for resolving resource locations to files in the file\nsystem. <strong>Mainly for internal use within the framework</strong>. <strong>Consider using\nSpring's Resource abstraction in the core package for handling all\nkinds of file resources in a uniform manner</strong>. ResourceLoader's\ngetResource() method can resolve any location to a Resource object,\nwhich in turn allows one to obtain a java.io.File in the file system\nthrough its getFile() method.</p>\n</blockquote>\n<p>In the JavaDoc of <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-core/src/main/java/org/springframework/util/ResourceUtils.java#L159\" rel=\"nofollow noreferrer\">ResourceUtils</a> it says</p>\n<blockquote>\n<p>Does not check whether the file actually exists; simply returns the\nFile that the given location would correspond.</p>\n</blockquote>\n<p>So using ResourceUtils is not recommended. There are many ways to getting the files. You can use  Spring's <strong>ResourceLoader</strong> if you want spring implementation</p>\n<pre><code>@Autowired\nResourceLoader resourceLoader;\n</code></pre>\n<p>And in the method you can use</p>\n<pre><code>Resource  resource = resourceLoader.getResource(&quot;classpath:smoke/test-file.txt&quot;);\nif(resource.exists()){\n System.out.println(resource.getFile().getAbsolutePath());\n}\n</code></pre>\n<p>Or you can use ClassLoader</p>\n<pre><code>ClassLoader classLoader = getClass().getClassLoader();\nFile file = new File(classLoader.getResource(resourceName).getFile());\nString absolutePath = file.getAbsolutePath();\n</code></pre>\n<p>If you use Spring Boot then this should give a path with in the target folder.This is because the ClassLoader looks for the resources on the classpath. In Maven, the compiled classes and resources are put in the /target/ directory. That's why this time, we get a path to a classpath resource.<br />\nE.g.<code> D:\\file-tester\\target\\classes\\smoke\\test-file.txt</code></p>\n"}],"owner":{"account_id":6802882,"reputation":195,"user_id":5235665,"display_name":"hotmeatballsoup"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":228,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75039394,"answer_count":1,"score":0,"last_activity_date":1673085580,"creation_date":1673057039,"question_id":75037651,"body_markdown":"Java 11 and Spring Boot here. I have the following project directory structure:\r\n```\r\nmyapp/\r\n  application.yml\r\n  app/\r\n    src/\r\n      main/\r\n        java/\r\n        resources/\r\n      test/\r\n        java/\r\n        resources/\r\n          smoke/\r\n            file1.txt\r\n```\r\n\r\nI have some code:\r\n```\r\nFile resourceFile = org.springframework.util.ResourceUtils.getFile(&quot;smoke/file1.txt&quot;);\r\nString filePath = resourceFile.getAbsolutePath();\r\n```\r\n\r\nAt runtime, `filePath` has a value of:\r\n```\r\n/Users/myuser/workspace/myapp/app/checksum-tests/test-file.txt\r\n```\r\n\r\nWhen it _should_ be:\r\n```\r\n/Users/myuser/workspace/myapp/app/src/test/resources/checksum-tests/test-file.txt\r\n```\r\n\r\nWhy is this? And more importantly, how can I use `ResourceUtils` or something similar in Spring-land to fetch a valid (exists on the file system) `File` to a test resource?","title":"Spring ResourceUtils showing strange behavior loading a test resource as a File","body":"<p>Java 11 and Spring Boot here. I have the following project directory structure:</p>\n<pre><code>myapp/\n  application.yml\n  app/\n    src/\n      main/\n        java/\n        resources/\n      test/\n        java/\n        resources/\n          smoke/\n            file1.txt\n</code></pre>\n<p>I have some code:</p>\n<pre><code>File resourceFile = org.springframework.util.ResourceUtils.getFile(&quot;smoke/file1.txt&quot;);\nString filePath = resourceFile.getAbsolutePath();\n</code></pre>\n<p>At runtime, <code>filePath</code> has a value of:</p>\n<pre><code>/Users/myuser/workspace/myapp/app/checksum-tests/test-file.txt\n</code></pre>\n<p>When it <em>should</em> be:</p>\n<pre><code>/Users/myuser/workspace/myapp/app/src/test/resources/checksum-tests/test-file.txt\n</code></pre>\n<p>Why is this? And more importantly, how can I use <code>ResourceUtils</code> or something similar in Spring-land to fetch a valid (exists on the file system) <code>File</code> to a test resource?</p>\n"},{"tags":["java","spring","postgresql","resttemplate"],"comments":[{"owner":{"display_name":"user330315"},"score":1,"creation_date":1673035477,"post_id":75034181,"comment_id":132414865,"body_markdown":"In my experience, in 9 out of 10 cases, this is caused by bad encoding in the HTTP transport (and RestTemplate uses HTTP)","body":"In my experience, in 9 out of 10 cases, this is caused by bad encoding in the HTTP transport (and RestTemplate uses HTTP)"},{"owner":{"account_id":533485,"reputation":2992,"user_id":903885,"accept_rate":87,"display_name":"Hasan Can Saral"},"score":0,"creation_date":1673085188,"post_id":75034181,"comment_id":132421628,"body_markdown":"@a_horse_with_no_name This was one of such 9 cases. Thank you.","body":"@a_horse_with_no_name This was one of such 9 cases. Thank you."}],"answers":[{"tags":[],"owner":{"account_id":533485,"reputation":2992,"user_id":903885,"accept_rate":87,"display_name":"Hasan Can Saral"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1673085292,"creation_date":1673085292,"answer_id":75039416,"question_id":75034181,"body_markdown":"It was caused by the bad encoding in HTTP transport, credit to [a_horse_with_no_name](https://stackoverflow.com/users/330315/a-horse-with-no-name) Fixed by:\r\n\r\n```\r\n final String response = new RestTemplateBuilder()\r\n                    .messageConverters(new StringHttpMessageConverter(StandardCharsets.UTF_8))\r\n                    .build()\r\n                    .getForObject(&quot;someURL&quot;, String.class);\r\n```","title":"Broken characters with Java/Postgres 14","body":"<p>It was caused by the bad encoding in HTTP transport, credit to <a href=\"https://stackoverflow.com/users/330315/a-horse-with-no-name\">a_horse_with_no_name</a> Fixed by:</p>\n<pre><code> final String response = new RestTemplateBuilder()\n                    .messageConverters(new StringHttpMessageConverter(StandardCharsets.UTF_8))\n                    .build()\n                    .getForObject(&quot;someURL&quot;, String.class);\n</code></pre>\n"}],"owner":{"account_id":533485,"reputation":2992,"user_id":903885,"accept_rate":87,"display_name":"Hasan Can Saral"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75039416,"answer_count":1,"score":2,"last_activity_date":1673085320,"creation_date":1673025973,"question_id":75034181,"body_markdown":"I&#39;m consuming this XML:\r\n\r\n```\r\n&lt;SomePerson&gt;\r\n  &lt;Number&gt;1&lt;/Number&gt;\r\n  &lt;Name&gt;&lt;/Name&gt;\r\n  &lt;Surname&gt;&lt;/Surname&gt;\r\n  &lt;Patronomic&gt;&lt;/Patronomic&gt;\r\n  &lt;DataBirth&gt;13.05.1987&lt;/DataBirth&gt;\r\n  &lt;PlaceBirth&gt; ,  &lt;/PlaceBirth&gt;\r\n  &lt;BasicInclusion&gt;     25.09.2017 .&lt;/BasicInclusion&gt;\r\n  &lt;CategoryPerson&gt;&lt;/CategoryPerson&gt;\r\n  &lt;DateInclusion&gt;2018-05-21&lt;/DateInclusion&gt;\r\n&lt;/SomePerson&gt;\r\n```\r\n\r\nas follows:\r\n\r\n```\r\n\r\n final String response = new RestTemplateBuilder()\r\n                    .build()\r\n                    .getForObject(&quot;someURL&quot;, String.class);\r\n\r\n// Do something with string response\r\n\r\nfinal JAXBContext jaxbContext = JAXBContext.newInstance(MyClass.class);\r\n\r\nfinal Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\r\n\r\nfinal JAXBElement&lt;MyClass&gt; sanctionList = jaxbUnmarshaller.unmarshal(new StreamSource(new ByteArrayInputStream(response.getBytes(StandardCharsets.UTF_8))), MyClass.class);\r\n```\r\n\r\nBut all I see in the database:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nand in my JSON api/frontend is:\r\n\r\n```\r\n&#208;&#209;&#208;&#187;&#208;&#183;&#208;&#184;&#208;&#189;&#208;&#176;\t&#208;&#208;&#176;&#209;&#208;&#186;&#209;&#208;&#189;&#208;&#190;&#208;&#178;&#208;&#189;&#208;&#176; &#208;&#209;&#208;&#190;&#208;&#183;&#208;&#177;&#208;&#181;&#208;&#186;&#208;&#190;&#208;&#178;&#208;&#176;\t\r\n&#208;&#168;&#208;&#190;&#209;&#208;&#190;&#208;&#177;&#208;&#184;&#208;&#180;&#208;&#184;&#208;&#189;\t&#208;&#168;&#208;&#176;&#209;&#208;&#176;&#208;&#177;&#208;&#184;&#208;&#180;&#208;&#184;&#208;&#189;&#208;&#190;&#208;&#178;&#208;&#184;&#209; &#208;&#209;&#209;&#208;&#188;&#208;&#176;&#209;&#208;&#190;&#208;&#178;\t\r\n&#208;&#162;&#208;&#176;&#208;&#187;&#208;&#176;&#208;&#189;&#209;&#208;&#177;&#208;&#181;&#208;&#186;\t&#208;&#168;&#208;&#176;&#209;&#208;&#184;&#208;&#191;&#208;&#182;&#208;&#176;&#208;&#189;&#208;&#190;&#208;&#178;&#208;&#184;&#209; &#208;&#209;&#208;&#188;&#208;&#190;&#208;&#189;&#208;&#190;&#208;&#178;\t\r\n&#208;&#208;&#184;&#208;&#177;&#208;&#181;&#208;&#186;\t&#208;&#173;&#209;&#208;&#186;&#208;&#184;&#208;&#189;&#208;&#177;&#208;&#181;&#208;&#186;&#208;&#190;&#208;&#178;&#208;&#189;&#208;&#176; &#208;&#208;&#188;&#209;&#209;&#208;&#186;&#209;&#208;&#187;&#208;&#190;&#208;&#178;&#208;&#176;\r\n```\r\n\r\nI&#39;ve tried using `ru_RU.UTF-8` encoding for my Postgres database, and got the same result with `UTF-8`. What is causing this? Is this database related or the client/Java related or even Spring&#39;s `RestTemplate` related? \r\n\r\n  [1]: https://i.stack.imgur.com/VJMfW.png","title":"Broken characters with Java/Postgres 14","body":"<p>I'm consuming this XML:</p>\n<pre><code>&lt;SomePerson&gt;\n  &lt;Number&gt;1&lt;/Number&gt;\n  &lt;Name&gt;&lt;/Name&gt;\n  &lt;Surname&gt;&lt;/Surname&gt;\n  &lt;Patronomic&gt;&lt;/Patronomic&gt;\n  &lt;DataBirth&gt;13.05.1987&lt;/DataBirth&gt;\n  &lt;PlaceBirth&gt; ,  &lt;/PlaceBirth&gt;\n  &lt;BasicInclusion&gt;     25.09.2017 .&lt;/BasicInclusion&gt;\n  &lt;CategoryPerson&gt;&lt;/CategoryPerson&gt;\n  &lt;DateInclusion&gt;2018-05-21&lt;/DateInclusion&gt;\n&lt;/SomePerson&gt;\n</code></pre>\n<p>as follows:</p>\n<pre><code>\n final String response = new RestTemplateBuilder()\n                    .build()\n                    .getForObject(&quot;someURL&quot;, String.class);\n\n// Do something with string response\n\nfinal JAXBContext jaxbContext = JAXBContext.newInstance(MyClass.class);\n\nfinal Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\n\nfinal JAXBElement&lt;MyClass&gt; sanctionList = jaxbUnmarshaller.unmarshal(new StreamSource(new ByteArrayInputStream(response.getBytes(StandardCharsets.UTF_8))), MyClass.class);\n</code></pre>\n<p>But all I see in the database:</p>\n<p><a href=\"https://i.stack.imgur.com/VJMfW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VJMfW.png\" alt=\"enter image description here\" /></a></p>\n<p>and in my JSON api/frontend is:</p>\n<pre><code>      \n     \n    \n   \n</code></pre>\n<p>I've tried using <code>ru_RU.UTF-8</code> encoding for my Postgres database, and got the same result with <code>UTF-8</code>. What is causing this? Is this database related or the client/Java related or even Spring's <code>RestTemplate</code> related?</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":8664592,"reputation":9965,"user_id":6485651,"accept_rate":65,"display_name":"Zephyr"},"score":0,"creation_date":1549604473,"post_id":54586581,"comment_id":95969646,"body_markdown":"What is your question? Please take the [tour] to better understand why StackOverflow exists.","body":"What is your question? Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> to better understand why StackOverflow exists."}],"answers":[{"tags":[],"owner":{"account_id":4233390,"reputation":2124,"user_id":3465242,"accept_rate":57,"display_name":"Ashu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1549605027,"creation_date":1549605027,"answer_id":54586686,"question_id":54586581,"body_markdown":"Problem is with the condition, you are only skipping words below the length of 10 but not considering the words with exact of 10 length. \r\n\r\n     if(words[j].length()&lt;=10)\r\n     {\r\n            System.out.print(words[j]);\r\n     }\r\nChange the condition it should work.  \r\n","title":"Way too long words","body":"<p>Problem is with the condition, you are only skipping words below the length of 10 but not considering the words with exact of 10 length. </p>\n\n<pre><code> if(words[j].length()&lt;=10)\n {\n        System.out.print(words[j]);\n }\n</code></pre>\n\n<p>Change the condition it should work.  </p>\n"},{"tags":[],"owner":{"account_id":7103315,"reputation":357,"user_id":5433943,"display_name":"Aritro Sen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549605272,"creation_date":1549605272,"answer_id":54586714,"question_id":54586581,"body_markdown":"Inside the for loop for int j do something like this -\r\n\r\n    if(words[j].length()&lt;=10) //boundary check\r\n            {\r\n                System.out.print(words[j]);\r\n            }\r\n\r\n            else\r\n            {\r\n                System.out.println(words[j].charAt(0).toString() + words[j].length()-2 + words[j].charAt(words[j].length()-1).toString());\r\n            }","title":"Way too long words","body":"<p>Inside the for loop for int j do something like this -</p>\n\n<pre><code>if(words[j].length()&lt;=10) //boundary check\n        {\n            System.out.print(words[j]);\n        }\n\n        else\n        {\n            System.out.println(words[j].charAt(0).toString() + words[j].length()-2 + words[j].charAt(words[j].length()-1).toString());\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10392325,"reputation":30,"user_id":7663172,"display_name":"mansi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549607095,"creation_date":1549607095,"answer_id":54587020,"question_id":54586581,"body_markdown":"    Because where r you entering string in your program. Once you run, you will get to know.\r\n    Btw this is the solution of actual problem.\r\n     public static void main(String[] args){\r\n    String str=null;\r\n    \t\tint count=0;\r\n    \t\tScanner scanner= new Scanner(System.in);\r\n    \t\tSystem.out.println(&quot;enter string :&quot;);\r\n    \t\tstr=scanner.nextLine();\r\n    \t\tfor(int i=0; i&lt;str.length(); i++) {\r\n    \t\t\tcount ++;\r\n    \t\t}\r\n    \t\tchar first=str.charAt(0);\r\n    \t\tchar last=str.charAt(count-1);\r\n    \t\tint num=count-2;\r\n    \t\tSystem.out.println(&quot;abbreviation is :&quot; +first+num+last); \r\n    }","title":"Way too long words","body":"<pre><code>Because where r you entering string in your program. Once you run, you will get to know.\nBtw this is the solution of actual problem.\n public static void main(String[] args){\nString str=null;\n        int count=0;\n        Scanner scanner= new Scanner(System.in);\n        System.out.println(\"enter string :\");\n        str=scanner.nextLine();\n        for(int i=0; i&lt;str.length(); i++) {\n            count ++;\n        }\n        char first=str.charAt(0);\n        char last=str.charAt(count-1);\n        int num=count-2;\n        System.out.println(\"abbreviation is :\" +first+num+last); \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19977073,"reputation":1,"user_id":14641092,"display_name":"Shashwat SIngh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607932664,"creation_date":1607932664,"answer_id":65285432,"question_id":54586581,"body_markdown":"    #include&lt;iostream&gt;\r\n    #include&lt;string&gt;\r\n    #include&lt;sstream&gt; \r\n    using namespace std;\r\n    \r\n    string change_abb(string str)\r\n    {\r\n        string result;\r\n      if(str.length()&gt;10)\r\n      {\r\n          int k=str.length()-2;\r\n          stringstream ss;  \r\n          ss&lt;&lt;k;  \r\n          string s;  \r\n          ss&gt;&gt;s;\r\n        result+=str[0];\r\n        result+=s;\r\n        result+=str[str.length()-1];\r\n      }\r\n      else\r\n      {\r\n          result=str;\r\n      }\r\n      return result;\r\n    }\r\n    \r\n    int main()\r\n    {\r\n      string in_str;\r\n      int n;\r\n      cin&gt;&gt;n;\r\n      for(int i=0;i&lt;n;i++)\r\n      {\r\n        cin&gt;&gt;in_str;\r\n        cout&lt;&lt;change_abb(in_str)&lt;&lt;endl;\r\n      }\r\n    }","title":"Way too long words","body":"<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;sstream&gt; \nusing namespace std;\n\nstring change_abb(string str)\n{\n    string result;\n  if(str.length()&gt;10)\n  {\n      int k=str.length()-2;\n      stringstream ss;  \n      ss&lt;&lt;k;  \n      string s;  \n      ss&gt;&gt;s;\n    result+=str[0];\n    result+=s;\n    result+=str[str.length()-1];\n  }\n  else\n  {\n      result=str;\n  }\n  return result;\n}\n\nint main()\n{\n  string in_str;\n  int n;\n  cin&gt;&gt;n;\n  for(int i=0;i&lt;n;i++)\n  {\n    cin&gt;&gt;in_str;\n    cout&lt;&lt;change_abb(in_str)&lt;&lt;endl;\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16596358,"reputation":1,"user_id":11993124,"display_name":"Krishnendu Biswas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616512745,"creation_date":1616489686,"answer_id":66759941,"question_id":54586581,"body_markdown":"Here is my answer in Python 3 ([Answer accepted by Codeforces][1])\r\n\r\n    n = int(input())\r\n    p=&quot;&quot;\r\n    for i in range(n):\r\n        s = input()\r\n        if len(s)&gt;10:\r\n            p = s[0]+str((len(s)-2))+s[len(s)-1]\r\n        else:\r\n            p=s\r\n        print(p)\r\n\r\n\r\n  [1]: https://codeforces.com/problemset/submission/71/110795636","title":"Way too long words","body":"<p>Here is my answer in Python 3 (<a href=\"https://codeforces.com/problemset/submission/71/110795636\" rel=\"nofollow noreferrer\">Answer accepted by Codeforces</a>)</p>\n<pre><code>n = int(input())\np=&quot;&quot;\nfor i in range(n):\n    s = input()\n    if len(s)&gt;10:\n        p = s[0]+str((len(s)-2))+s[len(s)-1]\n    else:\n        p=s\n    print(p)\n</code></pre>\n"}],"owner":{"account_id":14581161,"reputation":1,"user_id":10531553,"display_name":"minseo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3351,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":54586686,"answer_count":5,"score":-3,"last_activity_date":1673084622,"creation_date":1549604386,"question_id":54586581,"body_markdown":"This is my solution to the &quot;way too long words&quot; problem on codeforces.\r\nEven though I am getting correct output, but still it has been reported as the wrong answer to a question by codeforces.\r\n\r\nhttps://codeforces.com/problemset/problem/71/A \r\n(link to the question)\r\n\r\n\r\n    import java.util.Scanner;\r\n    \r\n    \r\n    public class Main {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\t//charAt() is an inbuilt method which can read a string letter by letter\r\n    \t\tScanner input=new Scanner(System.in);\r\n    \t\tint n;\r\n    \t\t//System.out.println(&quot;how many words do you wish to enter?&quot;);\r\n    \t\tn=input.nextInt();\r\n    \t\tString[] words=new String[n+1];\r\n    \t\tfor(int i=0;i&lt;n+1;i++)\r\n    \t\t{\r\n    \t\t\twords[i]=input.nextLine();\r\n    \t\t}\r\n    \t\r\n    \t\tfor(int j=0;j&lt;n+1;j++)\r\n    \t\t{\r\n    \t\t\tif(words[j].length()&lt;10)\r\n    \t\t\t{\r\n    \t\t\t\tSystem.out.print(words[j]);\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\telse\r\n    \t\t\t{\r\n    \t\t\t\tSystem.out.print(words[j].charAt(0));\r\n    \t\t\t\tSystem.out.print(words[j].length()-2);\r\n    \t\t\t\tSystem.out.print(words[j].charAt(words[j].length()-1));\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tSystem.out.print(&quot;\\n&quot;);\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Way too long words","body":"<p>This is my solution to the \"way too long words\" problem on codeforces.\nEven though I am getting correct output, but still it has been reported as the wrong answer to a question by codeforces.</p>\n\n<p><a href=\"https://codeforces.com/problemset/problem/71/A\" rel=\"nofollow noreferrer\">https://codeforces.com/problemset/problem/71/A</a> \n(link to the question)</p>\n\n<pre><code>import java.util.Scanner;\n\n\npublic class Main {\n\n    public static void main(String[] args) {\n\n        //charAt() is an inbuilt method which can read a string letter by letter\n        Scanner input=new Scanner(System.in);\n        int n;\n        //System.out.println(\"how many words do you wish to enter?\");\n        n=input.nextInt();\n        String[] words=new String[n+1];\n        for(int i=0;i&lt;n+1;i++)\n        {\n            words[i]=input.nextLine();\n        }\n\n        for(int j=0;j&lt;n+1;j++)\n        {\n            if(words[j].length()&lt;10)\n            {\n                System.out.print(words[j]);\n            }\n\n            else\n            {\n                System.out.print(words[j].charAt(0));\n                System.out.print(words[j].length()-2);\n                System.out.print(words[j].charAt(words[j].length()-1));\n            }\n\n            System.out.print(\"\\n\");\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","android","android-launcher"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1673084309,"post_id":75039319,"comment_id":132421516,"body_markdown":"Ref https://github.com/jasondelport/AndroidKioskMode","body":"Ref <a href=\"https://github.com/jasondelport/AndroidKioskMode\" rel=\"nofollow noreferrer\">github.com/jasondelport/AndroidKioskMode</a>"},{"owner":{"account_id":970863,"reputation":389,"user_id":993463,"accept_rate":62,"display_name":"Lonko"},"score":0,"creation_date":1673121665,"post_id":75039319,"comment_id":132428715,"body_markdown":"@life888888 i know of immersive mode and i also override back and hide the nav and status bar, my app also starts when boot is completed, but the problem i have is that boot completed does not happen immediately and until the app receives boot completed nav and status bars are visible and user can in that short amount of time go into for example settings. I want to prevent interaction of nav and status bar from the start if that is possible.","body":"@life888888 i know of immersive mode and i also override back and hide the nav and status bar, my app also starts when boot is completed, but the problem i have is that boot completed does not happen immediately and until the app receives boot completed nav and status bars are visible and user can in that short amount of time go into for example settings. I want to prevent interaction of nav and status bar from the start if that is possible."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1673151714,"post_id":75039319,"comment_id":132432423,"body_markdown":"Maybe this https://stackoverflow.com/questions/37753464/android-how-to-create-auto-launch-app-at-android-startup-for-kiosk-mode , user7716600 , `create an own home screen app called launcher` , `This HomeActivity should be the first activity that is displayed when the device boots.`","body":"Maybe this <a href=\"https://stackoverflow.com/questions/37753464/android-how-to-create-auto-launch-app-at-android-startup-for-kiosk-mode\" title=\"android how to create auto launch app at android startup for kiosk mode\">stackoverflow.com/questions/37753464/&hellip;</a> , user7716600 , <code>create an own home screen app called launcher</code> , <code>This HomeActivity should be the first activity that is displayed when the device boots.</code>"},{"owner":{"account_id":970863,"reputation":389,"user_id":993463,"accept_rate":62,"display_name":"Lonko"},"score":0,"creation_date":1673201303,"post_id":75039319,"comment_id":132440180,"body_markdown":"@life888888 thanks i will check it out. And write the results","body":"@life888888 thanks i will check it out. And write the results"}],"owner":{"account_id":970863,"reputation":389,"user_id":993463,"accept_rate":62,"display_name":"Lonko"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673084098,"creation_date":1673084098,"question_id":75039319,"body_markdown":"I have an application for unattended use to develop on android device which needs to start when the device boots, now i have already created my app as an launcher but before my app starts i still can see navigation bar. In that moment when the nav bar is present user can still click on nav bar or pull the status bar down and make mess on the device.\r\n\r\nIs there any programtical or configurational way to prevent any use until the launcher app starts ?\r\n\r\nWhat i am trying to achieve is that ALL user interaction is disabled until the app is started, meaning not malicius intent from user is possible.\r\n\r\nAre there any good aproaches for solving this?\r\n\r\nWith kind regards!","title":"Starting kiosk application without any navigation bar or status bar while booting","body":"<p>I have an application for unattended use to develop on android device which needs to start when the device boots, now i have already created my app as an launcher but before my app starts i still can see navigation bar. In that moment when the nav bar is present user can still click on nav bar or pull the status bar down and make mess on the device.</p>\n<p>Is there any programtical or configurational way to prevent any use until the launcher app starts ?</p>\n<p>What i am trying to achieve is that ALL user interaction is disabled until the app is started, meaning not malicius intent from user is possible.</p>\n<p>Are there any good aproaches for solving this?</p>\n<p>With kind regards!</p>\n"},{"tags":["java","sql","pojo","spring-data-r2dbc","r2dbc-mysql"],"answers":[{"tags":[],"owner":{"account_id":24934734,"reputation":36,"user_id":18801459,"display_name":"Unbreathable"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673083470,"creation_date":1673083470,"answer_id":75039266,"question_id":75038092,"body_markdown":"You can&#39;t link the `tags` table directly in R2DBC. Another way of doing it is executing two queries at once. Since I have no idea what your endpoint looks like here is my implementation of it:\r\n\r\nTagRepository:\r\n\r\n``` lang-java\r\npublic interface TagRepository extends ReactiveCrudRepository&lt;Tag, Integer&gt; {\r\n    Flux&lt;Tag&gt; getTagsByPostId(@Param(&quot;post_id&quot;) Integer postId);\r\n}\r\n```\r\n\r\nPostRepository:\r\n\r\n``` lang-java\r\npublic interface PostRepository extends ReactiveCrudRepository&lt;Post, Integer&gt; {\r\n}\r\n```\r\n\r\nThen to get a posts tags you can just execute two queries at once when you have the post id:\r\n\r\n``` lang-java\r\nMono.zip(tagRepository.getTagsByPostId(postID).collectList(),\r\npostRepository.findById(postID));\r\n```\r\n\r\nAfter doing that the `Mono.zip` function returns a `Tuple&lt;List&lt;Tag&gt;, Post&gt;`. You can then use `tuple.getT1()` to get the list of tags and `tuple.getT2()` to get the post.","title":"how to insert multi values into one column?","body":"<p>You can't link the <code>tags</code> table directly in R2DBC. Another way of doing it is executing two queries at once. Since I have no idea what your endpoint looks like here is my implementation of it:</p>\n<p>TagRepository:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface TagRepository extends ReactiveCrudRepository&lt;Tag, Integer&gt; {\n    Flux&lt;Tag&gt; getTagsByPostId(@Param(&quot;post_id&quot;) Integer postId);\n}\n</code></pre>\n<p>PostRepository:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface PostRepository extends ReactiveCrudRepository&lt;Post, Integer&gt; {\n}\n</code></pre>\n<p>Then to get a posts tags you can just execute two queries at once when you have the post id:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Mono.zip(tagRepository.getTagsByPostId(postID).collectList(),\npostRepository.findById(postID));\n</code></pre>\n<p>After doing that the <code>Mono.zip</code> function returns a <code>Tuple&lt;List&lt;Tag&gt;, Post&gt;</code>. You can then use <code>tuple.getT1()</code> to get the list of tags and <code>tuple.getT2()</code> to get the post.</p>\n"}],"owner":{"account_id":4750876,"reputation":1347,"user_id":3840940,"accept_rate":87,"display_name":"Joseph Hwang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75039266,"answer_count":1,"score":1,"last_activity_date":1673083470,"creation_date":1673065291,"question_id":75038092,"body_markdown":"I have a question of mysql java pojo. I try to insert multi values into one column. But the code throws null values. These sql queries are used not on jpa, but r2dbc spring webflux. As you know table realtionship is not supported in r2dbc driver, so I try to insert the values directly to each tables.\r\nFirst I make pojo codes.\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Builder\r\n    @Table\r\n    public class Post {\r\n     \r\n     \t@Id\r\n     \t@Column(&quot;post_id&quot;)\r\n     \tprivate Long postId;\r\n     \t\r\n     \t@Column\r\n     \tprivate String title;\r\n      \r\n     \t@Column\r\n     \tprivate String body;\r\n     \t\r\n     \t@Column(&quot;tag_id&quot;)\r\n     \tprivate Collection&lt;Long&gt; tagId;  // value of tagId is null\r\n    }\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Builder\r\n    @Table\r\n    public class Tag {\r\n      \r\n     \t@Id\r\n     \t@Column(&quot;tag_id&quot;)\r\n    \tprivate Long tagId;\r\n    \r\n    \t@Column\r\n     \tprivate String body;\r\n     \t\r\n     \t@Column(&quot;post_id&quot;)\r\n     \tprivate Long postId;\r\n    }\r\n\r\nAnd I execute the bleow SQL statments\r\n\r\n    CREATE TABLE IF NOT EXISTS post (\r\n    \tpost_id BIGINT NOT NULL AUTO_INCREMENT,\r\n    \ttitle VARCHAR(30) NOT NULL,\r\n    \tbody TEXT,\r\n    \t\r\n    \tPRIMARY KEY (post_id)\r\n    );\r\n    \r\n    CREATE TABLE IF NOT EXISTS tag (\r\n    \ttag_id BIGINT NOT NULL AUTO_INCREMENT,\r\n    \tbody VARCHAR(255),\r\n    \tpost_id BIGINT NOT NULL,\r\n    \r\n    \tPRIMARY KEY (tag_id),\r\n    \tCONSTRAINT tag_ibfk_1 FOREIGN KEY (post_id) REFERENCES post (post_id) ON DELETE CASCADE\r\n    );\r\n\r\nThe table relationship of post and tag table is one to many, Below codes are the sql insert codes.\r\n\r\n    INSERT INTO post (post_id, title, body) VALUES (1, 2, &#39;Title 1&#39;, &#39;post #1 body&#39;);\r\n    INSERT INTO post (post_id, title, body) VALUES (2, 2, &#39;Title 2&#39;, &#39;post #2 body&#39;);\r\n    \r\n    INSERT INTO tag (tag_id, post_id, body) VALUES (1, 1, &#39;first tag&#39;);\r\n    INSERT INTO tag (tag_id, post_id, body) VALUES (2, 1, &#39;second tag&#39;);\r\n    INSERT INTO tag (tag_id, post_id, body) VALUES (3, 2, &#39;third tag&#39;);\r\n    INSERT INTO tag (tag_id, post_id, body) VALUES (4, 2, &#39;last tag&#39;);\r\n\r\nThe above SQL statements are executed when the project starts. \r\nThe &#39;tagId&#39; member variable of &#39;post&#39; java class has java Collection&lt;Long&gt; type which means having multi tag values.\r\nBut when the response of reactive web returns, the tag values are null.\r\n\r\n    http://localhost:8080/route/post/all\r\n\r\n    [{&quot;postId&quot;:1,&quot;title&quot;:&quot;Title 1&quot;,&quot;body&quot;:&quot;post #1 body&quot;,&quot;tagId&quot;:null},{&quot;postId&quot;:2,&quot;title&quot;:&quot;Title 2&quot;,&quot;body&quot;:&quot;post #2 body&quot;,&quot;tagId&quot;:null}]\r\n\r\nHow can I insert multiple tag_id values of tag class into post.tagId? Any idea?","title":"how to insert multi values into one column?","body":"<p>I have a question of mysql java pojo. I try to insert multi values into one column. But the code throws null values. These sql queries are used not on jpa, but r2dbc spring webflux. As you know table realtionship is not supported in r2dbc driver, so I try to insert the values directly to each tables.\nFirst I make pojo codes.</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\n@Table\npublic class Post {\n \n    @Id\n    @Column(&quot;post_id&quot;)\n    private Long postId;\n    \n    @Column\n    private String title;\n  \n    @Column\n    private String body;\n    \n    @Column(&quot;tag_id&quot;)\n    private Collection&lt;Long&gt; tagId;  // value of tagId is null\n}\n\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\n@Table\npublic class Tag {\n  \n    @Id\n    @Column(&quot;tag_id&quot;)\n    private Long tagId;\n\n    @Column\n    private String body;\n    \n    @Column(&quot;post_id&quot;)\n    private Long postId;\n}\n</code></pre>\n<p>And I execute the bleow SQL statments</p>\n<pre><code>CREATE TABLE IF NOT EXISTS post (\n    post_id BIGINT NOT NULL AUTO_INCREMENT,\n    title VARCHAR(30) NOT NULL,\n    body TEXT,\n    \n    PRIMARY KEY (post_id)\n);\n\nCREATE TABLE IF NOT EXISTS tag (\n    tag_id BIGINT NOT NULL AUTO_INCREMENT,\n    body VARCHAR(255),\n    post_id BIGINT NOT NULL,\n\n    PRIMARY KEY (tag_id),\n    CONSTRAINT tag_ibfk_1 FOREIGN KEY (post_id) REFERENCES post (post_id) ON DELETE CASCADE\n);\n</code></pre>\n<p>The table relationship of post and tag table is one to many, Below codes are the sql insert codes.</p>\n<pre><code>INSERT INTO post (post_id, title, body) VALUES (1, 2, 'Title 1', 'post #1 body');\nINSERT INTO post (post_id, title, body) VALUES (2, 2, 'Title 2', 'post #2 body');\n\nINSERT INTO tag (tag_id, post_id, body) VALUES (1, 1, 'first tag');\nINSERT INTO tag (tag_id, post_id, body) VALUES (2, 1, 'second tag');\nINSERT INTO tag (tag_id, post_id, body) VALUES (3, 2, 'third tag');\nINSERT INTO tag (tag_id, post_id, body) VALUES (4, 2, 'last tag');\n</code></pre>\n<p>The above SQL statements are executed when the project starts.\nThe 'tagId' member variable of 'post' java class has java Collection type which means having multi tag values.\nBut when the response of reactive web returns, the tag values are null.</p>\n<pre><code>http://localhost:8080/route/post/all\n\n[{&quot;postId&quot;:1,&quot;title&quot;:&quot;Title 1&quot;,&quot;body&quot;:&quot;post #1 body&quot;,&quot;tagId&quot;:null},{&quot;postId&quot;:2,&quot;title&quot;:&quot;Title 2&quot;,&quot;body&quot;:&quot;post #2 body&quot;,&quot;tagId&quot;:null}]\n</code></pre>\n<p>How can I insert multiple tag_id values of tag class into post.tagId? Any idea?</p>\n"},{"tags":["java","file","fileoutputstream"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1673080784,"post_id":75038999,"comment_id":132421085,"body_markdown":"Is this code running on Windows by any chance? Colons aren&#39;t allowed in Windows filenames (as they&#39;re used for drive letters). I strongly suspect that your `fileName` variable is something like &quot;2023-01-31T12:34:56.123-encryptedText.txt&quot;. You need to decide what *valid* filename you want to use instead. (You could just remove the colons, for example.)","body":"Is this code running on Windows by any chance? Colons aren&#39;t allowed in Windows filenames (as they&#39;re used for drive letters). I strongly suspect that your <code>fileName</code> variable is something like &quot;2023-01-31T12:34:56.123-encryptedText.txt&quot;. You need to decide what <i>valid</i> filename you want to use instead. (You could just remove the colons, for example.)"}],"answers":[{"tags":[],"owner":{"display_name":"user19443549"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673082763,"creation_date":1673082629,"answer_id":75039181,"question_id":75038999,"body_markdown":"you can&#39;t use local date time object directly in file name, it will give you text value like - 2023-01-07T14:38:00.502959700 so you can&#39;t create file name with colon(:) in it.\r\n\r\nYou need to format your local date time object in any permissible format then it will work. You can try below code -\r\n\r\n        String subfolder = &quot;Encryption&quot; + File.separator + &quot;txt&quot;;\r\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd_HHmmss&quot;);\r\n        String fileName = localDateTime.format(formatter) + &quot;-encryptedText.txt&quot;;\r\n        File file = new File(subfolder, fileName);\r\n        FileOutputStream outStream = new FileOutputStream(file);","title":"Naming a text file with a date and time parameter + a string","body":"<p>you can't use local date time object directly in file name, it will give you text value like - 2023-01-07T14:38:00.502959700 so you can't create file name with colon(:) in it.</p>\n<p>You need to format your local date time object in any permissible format then it will work. You can try below code -</p>\n<pre><code>    String subfolder = &quot;Encryption&quot; + File.separator + &quot;txt&quot;;\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd_HHmmss&quot;);\n    String fileName = localDateTime.format(formatter) + &quot;-encryptedText.txt&quot;;\n    File file = new File(subfolder, fileName);\n    FileOutputStream outStream = new FileOutputStream(file);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7673069,"reputation":25,"user_id":5814683,"display_name":"CUB5"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673083011,"creation_date":1673083011,"answer_id":75039224,"question_id":75038999,"body_markdown":"I think you should call dateFormat.format(localDateTime), or something like that, and get an string to add to the &quot;-encryptedText.txt&quot;, to sum up, you need to add an string to another string, you can not add a string to an object ","title":"Naming a text file with a date and time parameter + a string","body":"<p>I think you should call dateFormat.format(localDateTime), or something like that, and get an string to add to the &quot;-encryptedText.txt&quot;, to sum up, you need to add an string to another string, you can not add a string to an object</p>\n"},{"tags":[],"owner":{"account_id":5008620,"reputation":1,"user_id":4025484,"display_name":"Coder Bb"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1673083317,"creation_date":1673083317,"answer_id":75039246,"question_id":75038999,"body_markdown":"HH:mm:ss is invaild for filename,so this filename is filtered","title":"Naming a text file with a date and time parameter + a string","body":"<p>HH:mm:ss is invaild for filename,so this filename is filtered</p>\n"}],"owner":{"account_id":12534084,"reputation":41,"user_id":9121266,"display_name":"Yasiru Ruwantha Weerakoon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75039181,"answer_count":3,"score":0,"last_activity_date":1673083317,"creation_date":1673080068,"question_id":75038999,"body_markdown":"in my project I have to encrypt some notes of patients what i do is I get the &quot;LocalDateTime dateTime&quot; through a parameter and create a file with that name + &quot;Encryptedtxt&quot; + &quot;.txt&quot;. And additionally I wanted to add the doctors id too but first of all I need to do the first part. So i attempted the task but it&#39;s not working as I&#39;m expecting. This is the part where I&#39;m creating the file,\r\n\r\n\r\n\r\n\r\n```\r\n    public void txtEncrypt(String text, LocalDateTime localDateTime) throws IOException, InvalidKeyException, NoSuchAlgorithmException, NoSuchPaddingException {\r\n        try {\r\n\r\n            String subfolder = &quot;Encryption&quot; + File.separator + &quot;txt&quot;;\r\n            String fileName = localDateTime + &quot;-encryptedText.txt&quot;;\r\n            File file = new File(subfolder, fileName);\r\n            FileOutputStream outStream = new FileOutputStream(file);\r\n```\r\n\r\nThis only works partially. This is the output\r\n\r\n[![This only adds the localDate time &quot;-encryptedText.txt&quot; is missing](https://i.stack.imgur.com/k9iW0.png)](https://i.stack.imgur.com/k9iW0.png)\r\n\r\n\r\n\r\nThis only adds the localDate time &quot;.  -encryptedText.txt&quot; is missing.\r\nCan someone kindly help me out in this one?","title":"Naming a text file with a date and time parameter + a string","body":"<p>in my project I have to encrypt some notes of patients what i do is I get the &quot;LocalDateTime dateTime&quot; through a parameter and create a file with that name + &quot;Encryptedtxt&quot; + &quot;.txt&quot;. And additionally I wanted to add the doctors id too but first of all I need to do the first part. So i attempted the task but it's not working as I'm expecting. This is the part where I'm creating the file,</p>\n<pre><code>    public void txtEncrypt(String text, LocalDateTime localDateTime) throws IOException, InvalidKeyException, NoSuchAlgorithmException, NoSuchPaddingException {\n        try {\n\n            String subfolder = &quot;Encryption&quot; + File.separator + &quot;txt&quot;;\n            String fileName = localDateTime + &quot;-encryptedText.txt&quot;;\n            File file = new File(subfolder, fileName);\n            FileOutputStream outStream = new FileOutputStream(file);\n</code></pre>\n<p>This only works partially. This is the output</p>\n<p><a href=\"https://i.stack.imgur.com/k9iW0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k9iW0.png\" alt=\"This only adds the localDate time &quot;-encryptedText.txt&quot; is missing\" /></a></p>\n<p>This only adds the localDate time &quot;.  -encryptedText.txt&quot; is missing.\nCan someone kindly help me out in this one?</p>\n"},{"tags":["java","algorithm"],"owner":{"account_id":27460341,"reputation":1,"user_id":20951021,"display_name":"mkilim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673082929,"creation_date":1673082891,"question_id":75039210,"body_markdown":"I made a game that can buy a house per user. &lt;br&gt;\r\nif user buy a house, save user index in db. &lt;br&gt;\r\nFor example, It&#39;s db.\r\n\r\n| Index | PlayerUUID |\r\n| -------- | -------- |\r\n| 1 | UUID_1 |\r\n| 2 | UUID_2 |\r\n| 3 | UUID_3 |\r\n| n | UUID_n |\r\n\r\nso, I need the distance between (0, 0) and user index.\r\n\r\nFor Example, User Index is 1, the output is (0, 0)\r\n```\r\n[\r\n  [1]\r\n]\r\n```\r\nFor Example, User Index is 10, the output is (-1, -2)&lt;br&gt;\r\nbecause index of 10 is [3][0], index of 1(center) is [1, 1] ==&gt; index of 1 - index of 10 ==&gt; (1, 1) - (3, 0) ==&gt; (-3, -1)\r\n```\r\n[\r\n  [7, 6, 5, 16]\r\n  [8, 1, 4, 15]\r\n  [9, 2, 3, 14]\r\n  [10, 11, 12, 13]\r\n]\r\n```\r\nFor Example, User Index is 17, the output is (2, 2)&lt;br&gt;\r\nbecause index of 17 is [0][4], index of 1(center) is [2, 2] ==&gt; index of 1 - index of 17 ==&gt; (2, 2) - (0, 4) ==&gt; (2, 2)\r\n```\r\n[\r\n  [21, 20, 19, 18, 17, 36]\r\n  [22, 7, 6, 5, 16, 35]\r\n  [23, 8, 1, 4, 15, 34]\r\n  [24, 9, 2, 3, 14, 33]\r\n  [25, 10, 11, 12, 13, 32]\r\n  [26, 27, 28, 29, 30, 31]\r\n]\r\n```\r\n\r\nI tried . :\r\n```java\r\nint n = (int) Math.ceil(Math.sqrt(index));\r\n\r\nint[][] arr = new int[n][n];\r\n\r\nint a = 0, b = 0, c = n-1, d = n-1;\r\nint num = (int) Math.pow(n, 2);\r\n\r\nwhile (num &gt; 0) {\r\n  for (int i = b; num &gt; 0 &amp;&amp; i &lt;= d; i++)\r\n    arr[i][c] = num--;\r\n  c--;\r\n\r\n  for (int i = c; num &gt; 0 &amp;&amp; i &gt;= a; i--)\r\n    arr[d][i] = num--;\r\n  d--;\r\n\r\n  for (int i = d; num &gt; 0 &amp;&amp; i &gt;= b; i--)\r\n    arr[i][a] = num--;\r\n  a++;\r\n\r\n  for (int i = a; num &gt; 0 &amp;&amp; i &lt;= c; i++)\r\n    arr[b][i] = num--;\r\n  b++;\r\n}\r\n\r\nint center = Math.max(n / 2 - (n % 2 == 1 ? 0 : 1), 0);\r\n```","title":"get location from center in snake sort","body":"<p>I made a game that can buy a house per user. <br>\nif user buy a house, save user index in db. <br>\nFor example, It's db.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Index</th>\n<th>PlayerUUID</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>UUID_1</td>\n</tr>\n<tr>\n<td>2</td>\n<td>UUID_2</td>\n</tr>\n<tr>\n<td>3</td>\n<td>UUID_3</td>\n</tr>\n<tr>\n<td>n</td>\n<td>UUID_n</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>so, I need the distance between (0, 0) and user index.</p>\n<p>For Example, User Index is 1, the output is (0, 0)</p>\n<pre><code>[\n  [1]\n]\n</code></pre>\n<p>For Example, User Index is 10, the output is (-1, -2)<br>\nbecause index of 10 is [3][0], index of 1(center) is [1, 1] ==&gt; index of 1 - index of 10 ==&gt; (1, 1) - (3, 0) ==&gt; (-3, -1)</p>\n<pre><code>[\n  [7, 6, 5, 16]\n  [8, 1, 4, 15]\n  [9, 2, 3, 14]\n  [10, 11, 12, 13]\n]\n</code></pre>\n<p>For Example, User Index is 17, the output is (2, 2)<br>\nbecause index of 17 is [0][4], index of 1(center) is [2, 2] ==&gt; index of 1 - index of 17 ==&gt; (2, 2) - (0, 4) ==&gt; (2, 2)</p>\n<pre><code>[\n  [21, 20, 19, 18, 17, 36]\n  [22, 7, 6, 5, 16, 35]\n  [23, 8, 1, 4, 15, 34]\n  [24, 9, 2, 3, 14, 33]\n  [25, 10, 11, 12, 13, 32]\n  [26, 27, 28, 29, 30, 31]\n]\n</code></pre>\n<p>I tried . :</p>\n<pre class=\"lang-java prettyprint-override\"><code>int n = (int) Math.ceil(Math.sqrt(index));\n\nint[][] arr = new int[n][n];\n\nint a = 0, b = 0, c = n-1, d = n-1;\nint num = (int) Math.pow(n, 2);\n\nwhile (num &gt; 0) {\n  for (int i = b; num &gt; 0 &amp;&amp; i &lt;= d; i++)\n    arr[i][c] = num--;\n  c--;\n\n  for (int i = c; num &gt; 0 &amp;&amp; i &gt;= a; i--)\n    arr[d][i] = num--;\n  d--;\n\n  for (int i = d; num &gt; 0 &amp;&amp; i &gt;= b; i--)\n    arr[i][a] = num--;\n  a++;\n\n  for (int i = a; num &gt; 0 &amp;&amp; i &lt;= c; i++)\n    arr[b][i] = num--;\n  b++;\n}\n\nint center = Math.max(n / 2 - (n % 2 == 1 ? 0 : 1), 0);\n</code></pre>\n"},{"tags":["java","arrays","swing","jbutton","actionlistener"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1350097334,"post_id":12869523,"comment_id":17421486,"body_markdown":"1) *&quot;I&#39;ve made my own button class (because I wanted some specific settings and I thought it would be easier)&quot;* If by &#39;settings&#39; you mean &#39;attributes&#39;, use a factory method or a PLAF instead.  2) For better help sooner, post an [SSCCE](http://sscce.org/).","body":"1) <i>&quot;I&#39;ve made my own button class (because I wanted some specific settings and I thought it would be easier)&quot;</i> If by &#39;settings&#39; you mean &#39;attributes&#39;, use a factory method or a PLAF instead.  2) For better help sooner, post an <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a>."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1350116784,"post_id":12869523,"comment_id":17424335,"body_markdown":"See also this [example](http://stackoverflow.com/a/7706684/230513).","body":"See also this <a href=\"http://stackoverflow.com/a/7706684/230513\">example</a>."},{"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"score":0,"creation_date":1433721107,"post_id":12869523,"comment_id":49457379,"body_markdown":"@AndrewThompson PLAF?","body":"@AndrewThompson PLAF?"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1433728436,"post_id":12869523,"comment_id":49458667,"body_markdown":"@JohnnyCoder  Google?","body":"@JohnnyCoder  Google?"},{"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"score":0,"creation_date":1433728745,"post_id":12869523,"comment_id":49458727,"body_markdown":"@AndrewThompson Fine?","body":"@AndrewThompson Fine?"},{"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"score":0,"creation_date":1433728791,"post_id":12869523,"comment_id":49458733,"body_markdown":"@AndrewThompson People&#39;s Liberation Armed Forces?","body":"@AndrewThompson People&#39;s Liberation Armed Forces?"},{"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"score":0,"creation_date":1433728833,"post_id":12869523,"comment_id":49458741,"body_markdown":"or Pluggable Look And Feel?","body":"or Pluggable Look And Feel?"}],"answers":[{"tags":[],"owner":{"account_id":325446,"reputation":17129,"user_id":646634,"accept_rate":100,"display_name":"Brian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1433860223,"creation_date":1350097147,"answer_id":12869552,"question_id":12869523,"body_markdown":"To call a method on the source, you have to cast it first. If you&#39;re never adding your `ActionListener` to anything but an instance of your special `MyButton` with its x and y variables, you can do this:\r\n\r\n    MyButton button = (MyButton) event.getSource();\r\n    int x = button.getXPos();\r\n    int y = button.getYPos();\r\n\r\nThen `MyButton` contains the x and y:\r\n\r\n    public class MyButton extends JButton {\r\n\r\n        private int xPos;\r\n        private int yPos;\r\n\r\n        // ...\r\n\r\n        public int getXPos() {\r\n            return xPos;\r\n        }\r\n\r\n        public int getYPos() {\r\n            return yPos;\r\n        }\r\n    }\r\n\r\nAnd make sure you&#39;re always adding your listener to instances of `MyButton`:\r\n\r\n    MyButton myButton = new MyButton();\r\n    // ...\r\n    myButton.addActionListener(new ActionListener() {\r\n        public void actionPerformed(ActionEvent e) {\r\n            MyButton button = (MyButton) e.getSource();\r\n            int xPos = button.getXPos();\r\n            int yPos = button.getYPos();\r\n            // Do something with x and y\r\n        }\r\n    });","title":"Find index of button in 2D Array Java?","body":"<p>To call a method on the source, you have to cast it first. If you're never adding your <code>ActionListener</code> to anything but an instance of your special <code>MyButton</code> with its x and y variables, you can do this:</p>\n\n<pre><code>MyButton button = (MyButton) event.getSource();\nint x = button.getXPos();\nint y = button.getYPos();\n</code></pre>\n\n<p>Then <code>MyButton</code> contains the x and y:</p>\n\n<pre><code>public class MyButton extends JButton {\n\n    private int xPos;\n    private int yPos;\n\n    // ...\n\n    public int getXPos() {\n        return xPos;\n    }\n\n    public int getYPos() {\n        return yPos;\n    }\n}\n</code></pre>\n\n<p>And make sure you're always adding your listener to instances of <code>MyButton</code>:</p>\n\n<pre><code>MyButton myButton = new MyButton();\n// ...\nmyButton.addActionListener(new ActionListener() {\n    public void actionPerformed(ActionEvent e) {\n        MyButton button = (MyButton) e.getSource();\n        int xPos = button.getXPos();\n        int yPos = button.getYPos();\n        // Do something with x and y\n    }\n});\n</code></pre>\n"}],"owner":{"account_id":1296769,"reputation":465,"user_id":1247629,"accept_rate":72,"display_name":"Scott"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2713,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":12869552,"answer_count":1,"score":1,"last_activity_date":1673082485,"creation_date":1350096707,"question_id":12869523,"body_markdown":"I just have a question on the following. I&#39;ve got a 2D array of buttons that require me to run another method when I click on them. My current method relies on the following input, a String (which I can get from the user easily) and two integer values. These are dictated by the buttons position in the array.\r\n\r\nI have a button listener attached to these buttons but I am not too sure how I can work out what the button&#39;s position actually is. I&#39;ve made my own button class (because I wanted some specific settings and I thought it would be easier) and when making it I implemented a method called getXPos and getYPos which basically hold the values for the actual button in the array when it was created. Thing is I don&#39;t know how to retrieve these values now as the listener doesn&#39;t actually know what button is being pressed does it?\r\n\r\nI can use the getSource() method but I then don&#39;t know how to invoke that source&#39;s methods. For example I tried to do the following.\r\n\r\nint x = event.getSource().getXPos(); but I am unable to do this. Is there any way of telling what button I have pressed so I can access it&#39;s internal methods or something similar? Thanks!","title":"Find index of button in 2D Array Java?","body":"<p>I just have a question on the following. I've got a 2D array of buttons that require me to run another method when I click on them. My current method relies on the following input, a String (which I can get from the user easily) and two integer values. These are dictated by the buttons position in the array.</p>\n\n<p>I have a button listener attached to these buttons but I am not too sure how I can work out what the button's position actually is. I've made my own button class (because I wanted some specific settings and I thought it would be easier) and when making it I implemented a method called getXPos and getYPos which basically hold the values for the actual button in the array when it was created. Thing is I don't know how to retrieve these values now as the listener doesn't actually know what button is being pressed does it?</p>\n\n<p>I can use the getSource() method but I then don't know how to invoke that source's methods. For example I tried to do the following.</p>\n\n<p>int x = event.getSource().getXPos(); but I am unable to do this. Is there any way of telling what button I have pressed so I can access it's internal methods or something similar? Thanks!</p>\n"},{"tags":["java","spring-boot","cglib","spring-framework-beans"],"answers":[{"tags":[],"owner":{"account_id":515852,"reputation":174,"user_id":1347695,"display_name":"Sreko Toroman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1673082130,"creation_date":1673082130,"answer_id":75039143,"question_id":75036649,"body_markdown":"Will try to help, but let me preface by saying I&#39;m not an expert on Spring or anything close to it. \r\n\r\nWhen using `@Autowired` and `@Lazy` (or `@Inject` and `@Lazy`), Spring will not inject the requested instance itself, naturally since you want it to be lazily initialized. Instead, it creates a &quot;lazy proxy&quot; object for it. The purpose of the proxy is defer the initialization of the real dependency for as long as possible.\r\n\r\nThink of a Lazy proxy as a Mockito spy, or a `java.lang.reflect.Proxy`. It has the same interface as the original object that it is proxying to. It also has a bit of &quot;middleware&quot; in it (a.k.a `InvocationHandler` implementation), which is responsible for initializing the &quot;real dependency&quot; as soon as the first invocation is made on the proxy. From that point on, all method calls on the proxy are simply forwarded to the downstream dependency.\r\n\r\nFor some good reason I suppose, Spring has its own Proxy implementation at https://github.com/spring-projects/spring-framework/blob/main/spring-core/src/main/java/org/springframework/cglib/proxy/Proxy.java (rather than using Java&#39;s built-in Proxy). This is the &quot;CGLIB&quot; stuff you were referring to. Browse around that class, the whole module, as well as the parent module, to learn more about it.\r\n\r\nCheck out the docs on the Java built-in Proxy too https://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html\r\n\r\nA better alternative to using `@Lazy` is probably to use `Provider&lt;Foo&gt; fooProvider` or similar, rather than `@Lazy @Autowired Foo foo`. The downside is that you have to call `fooProvider.get()` or such but the advantage is that you don&#39;t need to explain anyone how on earth `@Lazy` even works.\r\n\r\nFinally, the hashCodes and toStrings questions you posed - the `@Lazy` injected instance (proxy) probably proxies the `toString()` call to the downstream dependency, but does not proxy the `hashCode()` and `equals()` methods. Not entirely sure why they would choose to do that, but, that&#39;s what it looks like to me.\r\n\r\nHope it helps lead you toward the real answer, cheers!","title":"Why is Lazy creation of beans leading to classes with different References/hashCodes in SpringBoot?","body":"<p>Will try to help, but let me preface by saying I'm not an expert on Spring or anything close to it.</p>\n<p>When using <code>@Autowired</code> and <code>@Lazy</code> (or <code>@Inject</code> and <code>@Lazy</code>), Spring will not inject the requested instance itself, naturally since you want it to be lazily initialized. Instead, it creates a &quot;lazy proxy&quot; object for it. The purpose of the proxy is defer the initialization of the real dependency for as long as possible.</p>\n<p>Think of a Lazy proxy as a Mockito spy, or a <code>java.lang.reflect.Proxy</code>. It has the same interface as the original object that it is proxying to. It also has a bit of &quot;middleware&quot; in it (a.k.a <code>InvocationHandler</code> implementation), which is responsible for initializing the &quot;real dependency&quot; as soon as the first invocation is made on the proxy. From that point on, all method calls on the proxy are simply forwarded to the downstream dependency.</p>\n<p>For some good reason I suppose, Spring has its own Proxy implementation at <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-core/src/main/java/org/springframework/cglib/proxy/Proxy.java\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-framework/blob/main/spring-core/src/main/java/org/springframework/cglib/proxy/Proxy.java</a> (rather than using Java's built-in Proxy). This is the &quot;CGLIB&quot; stuff you were referring to. Browse around that class, the whole module, as well as the parent module, to learn more about it.</p>\n<p>Check out the docs on the Java built-in Proxy too <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html</a></p>\n<p>A better alternative to using <code>@Lazy</code> is probably to use <code>Provider&lt;Foo&gt; fooProvider</code> or similar, rather than <code>@Lazy @Autowired Foo foo</code>. The downside is that you have to call <code>fooProvider.get()</code> or such but the advantage is that you don't need to explain anyone how on earth <code>@Lazy</code> even works.</p>\n<p>Finally, the hashCodes and toStrings questions you posed - the <code>@Lazy</code> injected instance (proxy) probably proxies the <code>toString()</code> call to the downstream dependency, but does not proxy the <code>hashCode()</code> and <code>equals()</code> methods. Not entirely sure why they would choose to do that, but, that's what it looks like to me.</p>\n<p>Hope it helps lead you toward the real answer, cheers!</p>\n"}],"owner":{"account_id":7936944,"reputation":179,"user_id":5992555,"display_name":"Luv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":75039143,"answer_count":1,"score":4,"last_activity_date":1673082130,"creation_date":1673044145,"question_id":75036649,"body_markdown":"Why do bean of classes created using @Lazy annotation have different reference compared to the normal Autowired objects of the same class. I am aware that @Lazy provides bean instance when it is required but i thought it would always be the same reference.\r\n\r\nI have written below tests to demonstrate the same.\r\n\r\nA simple counter service : \r\n```java\r\n@Service\r\npublic class CounterService {\r\n\r\n  private final AtomicInteger counter = new AtomicInteger();\r\n\r\n\r\n  public void inc() {\r\n    counter.incrementAndGet();\r\n  }\r\n\r\n  public int getCounter() {\r\n    return counter.get();\r\n  }\r\n\r\n}\r\n```\r\nTests without use of Lazy : \r\n```java\r\npublic class CounterServiceTest extends BaseITTest {\r\n\r\n  @Autowired\r\n  private CounterService counterService;\r\n  @Autowired\r\n  private ApplicationContext context;\r\n\r\n  @Test\r\n  void testBeansReference() {\r\n    CounterService contextCounterService = context.getBean(CounterService.class);\r\n\r\n    counterService.inc();\r\n    contextCounterService.inc();\r\n\r\n    System.out.println(counterService.getCounter() + &quot; / &quot; + contextCounterService.getCounter());\r\n    System.out.println(&quot;counterService --&gt; obj: &quot; + counterService + &quot;, hashCode: &quot; + counterService.hashCode());\r\n    System.out.println(&quot;contextCounterService --&gt; obj: &quot; + contextCounterService + &quot;, hashCode: &quot; + contextCounterService.hashCode());\r\n    System.out.println(&quot;== Check: &quot; + (counterService == contextCounterService));\r\n    System.out.println(&quot;.equals() Check: &quot; + (counterService.equals(contextCounterService)));\r\n  }\r\n  \r\n}\r\n```\r\nOutput : \r\n```\r\n2 / 2\r\ncounterService --&gt; obj: com.flock.appointment.service.CounterService@750c23a3, hashCode: 1963729827\r\ncontextCounterService --&gt; obj: com.flock.appointment.service.CounterService@750c23a3, hashCode: 1963729827\r\n== Check: true\r\n.equals() Check: true\r\n```\r\n\r\nTests without use of Lazy : \r\n```java\r\npublic class CounterServiceLazyTest extends BaseITTest {\r\n\r\n  @Lazy\r\n  @Autowired\r\n  private CounterService counterService;\r\n  @Autowired\r\n  private ApplicationContext context;\r\n\r\n  @Test\r\n  void testBeansReference() {\r\n    CounterService contextCounterService = context.getBean(CounterService.class);\r\n\r\n    counterService.inc();\r\n    contextCounterService.inc();\r\n\r\n    System.out.println(counterService.getCounter() + &quot; / &quot; + contextCounterService.getCounter());\r\n    System.out.println(&quot;counterService --&gt; obj: &quot; + counterService + &quot;, hashCode: &quot; + counterService.hashCode());\r\n    System.out.println(&quot;contextCounterService --&gt; obj: &quot; + contextCounterService + &quot;, hashCode: &quot; + contextCounterService.hashCode());\r\n    System.out.println(&quot;== Check: &quot; + (counterService == contextCounterService));\r\n    System.out.println(&quot;.equals() Check: &quot; + (counterService.equals(contextCounterService)));\r\n  }\r\n\r\n}\r\n```\r\nOutput : \r\n```\r\n2 / 2\r\ncounterService --&gt; obj: com.flock.appointment.service.CounterService@259c6ab8, hashCode: -1833445830\r\ncontextCounterService --&gt; obj: com.flock.appointment.service.CounterService@259c6ab8, hashCode: 631007928\r\n== Check: false\r\n.equals() Check: false\r\n```\r\n\r\n- Note that output in second test(with  lazy) is 2, which proves that even though reference is different, the classes are still singleton which is expected as other wise output of wouldn&#39;t be 2/2.\r\n- I am also not sure in second test why object.toString() are producing same outputs even though hashCode is different and also == checks says false. Isn&#39;t number in end of toString() hex of hashCode, and that hex should be different as hashCodes printed are different ?\r\n- I had observed the instance of counterService in test 2 in debugger and the instance was enhanced by CGLIB, I read about CGLIB and it made me think most of the things are due to it but I did not understand it properly how all of this is happening, Also I would like to know in detail exactly how is spring internally doing this.","title":"Why is Lazy creation of beans leading to classes with different References/hashCodes in SpringBoot?","body":"<p>Why do bean of classes created using @Lazy annotation have different reference compared to the normal Autowired objects of the same class. I am aware that @Lazy provides bean instance when it is required but i thought it would always be the same reference.</p>\n<p>I have written below tests to demonstrate the same.</p>\n<p>A simple counter service :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class CounterService {\n\n  private final AtomicInteger counter = new AtomicInteger();\n\n\n  public void inc() {\n    counter.incrementAndGet();\n  }\n\n  public int getCounter() {\n    return counter.get();\n  }\n\n}\n</code></pre>\n<p>Tests without use of Lazy :</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CounterServiceTest extends BaseITTest {\n\n  @Autowired\n  private CounterService counterService;\n  @Autowired\n  private ApplicationContext context;\n\n  @Test\n  void testBeansReference() {\n    CounterService contextCounterService = context.getBean(CounterService.class);\n\n    counterService.inc();\n    contextCounterService.inc();\n\n    System.out.println(counterService.getCounter() + &quot; / &quot; + contextCounterService.getCounter());\n    System.out.println(&quot;counterService --&gt; obj: &quot; + counterService + &quot;, hashCode: &quot; + counterService.hashCode());\n    System.out.println(&quot;contextCounterService --&gt; obj: &quot; + contextCounterService + &quot;, hashCode: &quot; + contextCounterService.hashCode());\n    System.out.println(&quot;== Check: &quot; + (counterService == contextCounterService));\n    System.out.println(&quot;.equals() Check: &quot; + (counterService.equals(contextCounterService)));\n  }\n  \n}\n</code></pre>\n<p>Output :</p>\n<pre><code>2 / 2\ncounterService --&gt; obj: com.flock.appointment.service.CounterService@750c23a3, hashCode: 1963729827\ncontextCounterService --&gt; obj: com.flock.appointment.service.CounterService@750c23a3, hashCode: 1963729827\n== Check: true\n.equals() Check: true\n</code></pre>\n<p>Tests without use of Lazy :</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CounterServiceLazyTest extends BaseITTest {\n\n  @Lazy\n  @Autowired\n  private CounterService counterService;\n  @Autowired\n  private ApplicationContext context;\n\n  @Test\n  void testBeansReference() {\n    CounterService contextCounterService = context.getBean(CounterService.class);\n\n    counterService.inc();\n    contextCounterService.inc();\n\n    System.out.println(counterService.getCounter() + &quot; / &quot; + contextCounterService.getCounter());\n    System.out.println(&quot;counterService --&gt; obj: &quot; + counterService + &quot;, hashCode: &quot; + counterService.hashCode());\n    System.out.println(&quot;contextCounterService --&gt; obj: &quot; + contextCounterService + &quot;, hashCode: &quot; + contextCounterService.hashCode());\n    System.out.println(&quot;== Check: &quot; + (counterService == contextCounterService));\n    System.out.println(&quot;.equals() Check: &quot; + (counterService.equals(contextCounterService)));\n  }\n\n}\n</code></pre>\n<p>Output :</p>\n<pre><code>2 / 2\ncounterService --&gt; obj: com.flock.appointment.service.CounterService@259c6ab8, hashCode: -1833445830\ncontextCounterService --&gt; obj: com.flock.appointment.service.CounterService@259c6ab8, hashCode: 631007928\n== Check: false\n.equals() Check: false\n</code></pre>\n<ul>\n<li>Note that output in second test(with  lazy) is 2, which proves that even though reference is different, the classes are still singleton which is expected as other wise output of wouldn't be 2/2.</li>\n<li>I am also not sure in second test why object.toString() are producing same outputs even though hashCode is different and also == checks says false. Isn't number in end of toString() hex of hashCode, and that hex should be different as hashCodes printed are different ?</li>\n<li>I had observed the instance of counterService in test 2 in debugger and the instance was enhanced by CGLIB, I read about CGLIB and it made me think most of the things are due to it but I did not understand it properly how all of this is happening, Also I would like to know in detail exactly how is spring internally doing this.</li>\n</ul>\n"},{"tags":["java","api","github","clone"],"comments":[{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1517824736,"post_id":48619755,"comment_id":84236315,"body_markdown":"You tagged your question with &quot;github&quot;, does that mean that you want to know for a repository on github? Because you don&#39;t need jgit for that, URL/URLConnection can handle it for you. Otherwise, if there is no web interface on the repository, it&#39;s hard. Check out https://stackoverflow.com/questions/1125476/retrieve-a-single-file-from-a-repository","body":"You tagged your question with &quot;github&quot;, does that mean that you want to know for a repository on github? Because you don&#39;t need jgit for that, URL/URLConnection can handle it for you. Otherwise, if there is no web interface on the repository, it&#39;s hard. Check out <a href=\"https://stackoverflow.com/questions/1125476/retrieve-a-single-file-from-a-repository\" title=\"retrieve a single file from a repository\">stackoverflow.com/questions/1125476/&hellip;</a>"},{"owner":{"account_id":7758885,"reputation":69,"user_id":5872256,"accept_rate":45,"display_name":"user5872256"},"score":0,"creation_date":1517825736,"post_id":48619755,"comment_id":84236893,"body_markdown":"I know the repository. But I want to do it with jGit","body":"I know the repository. But I want to do it with jGit"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":1,"creation_date":1517826719,"post_id":48619755,"comment_id":84237455,"body_markdown":"@user5872256 Erwin is asking you **why** you put up the *github* tag. Only use tags that really matter for your question. And for the record: you understand that **cloning** a repository basically means to **download** the complete content? git is **not** like SVN where you can (easily) do sparse checkouts and end up with just **one** single file (there is always a .git directory, that contains your **full** repository).","body":"@user5872256 Erwin is asking you <b>why</b> you put up the <i>github</i> tag. Only use tags that really matter for your question. And for the record: you understand that <b>cloning</b> a repository basically means to <b>download</b> the complete content? git is <b>not</b> like SVN where you can (easily) do sparse checkouts and end up with just <b>one</b> single file (there is always a .git directory, that contains your <b>full</b> repository)."},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":1,"creation_date":1517827855,"post_id":48619755,"comment_id":84238164,"body_markdown":"You have accepted an answer that looks like (on my phone so cant verify) it clones and downloads the entire repository and then gives you the contents of a single file in it - let me know if Im mistaken about that. If its true though, that doesnt answer your question about downloading just a single file.","body":"You have accepted an answer that looks like (on my phone so cant verify) it clones and downloads the entire repository and then gives you the contents of a single file in it - let me know if Im mistaken about that. If its true though, that doesnt answer your question about downloading just a single file."}],"answers":[{"tags":[],"owner":{"account_id":1399854,"reputation":940,"user_id":1328828,"display_name":"Boris Chistov"},"down_vote_count":3,"up_vote_count":2,"is_accepted":true,"score":-1,"last_activity_date":1517825961,"creation_date":1517825961,"answer_id":48620268,"question_id":48619755,"body_markdown":"you just need to walk the file tree to find file you need\r\nHere is a code sample\r\n\r\n    // Clone remote repository\r\n    CloneCommand cloneCommand = Git.cloneRepository();\r\n    cloneCommand.setDirectory(localRepository.toFile());\r\n    cloneCommand.setBare(false);\r\n    cloneCommand.setURI(remoteRepository.toString());\r\n    cloneCommand.setTransportConfigCallback(transportConfigCallback);\r\n    Repository repository = cloneCommand.call().getRepository();\r\n    ObjectId ref = repository.resolve(&quot;your commit or branch&quot;);\r\n    // Resolve commit hash\r\n    RevWalk revWalk = new RevWalk(repository);\r\n    RevCommit revCommit = revWalk.parseCommit(ref);\r\n    Commit commit = new Commit(revCommit);\r\n    TreeWalk tree = new TreeWalk(repository);\r\n    tree.addTree(revCommit.getTree());\r\n    tree.setRecursive(true);\r\n    // Set path filter, to show files on matching path\r\n    tree.setFilter(PathFilter.create(&quot;path to file&quot;));\r\n    \r\n    try (ObjectReader objectReader = repository.newObjectReader()) {\r\n        while (tree.next()) {\r\n            String fileName = tree.getPathString();\r\n            byte[] fileBytes = objectReader.open(tree.getObjectId(0)).getBytes();        \r\n        }\r\n    }\r\n    return paths;","title":"How to clone a single file with jGit?","body":"<p>you just need to walk the file tree to find file you need\nHere is a code sample</p>\n\n<pre><code>// Clone remote repository\nCloneCommand cloneCommand = Git.cloneRepository();\ncloneCommand.setDirectory(localRepository.toFile());\ncloneCommand.setBare(false);\ncloneCommand.setURI(remoteRepository.toString());\ncloneCommand.setTransportConfigCallback(transportConfigCallback);\nRepository repository = cloneCommand.call().getRepository();\nObjectId ref = repository.resolve(\"your commit or branch\");\n// Resolve commit hash\nRevWalk revWalk = new RevWalk(repository);\nRevCommit revCommit = revWalk.parseCommit(ref);\nCommit commit = new Commit(revCommit);\nTreeWalk tree = new TreeWalk(repository);\ntree.addTree(revCommit.getTree());\ntree.setRecursive(true);\n// Set path filter, to show files on matching path\ntree.setFilter(PathFilter.create(\"path to file\"));\n\ntry (ObjectReader objectReader = repository.newObjectReader()) {\n    while (tree.next()) {\n        String fileName = tree.getPathString();\n        byte[] fileBytes = objectReader.open(tree.getObjectId(0)).getBytes();        \n    }\n}\nreturn paths;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7447228,"reputation":856,"user_id":5663017,"display_name":"KLHauser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673081898,"creation_date":1673081898,"answer_id":75039129,"question_id":48619755,"body_markdown":"1. Create an empty local git repository\r\n2. Add remote to the repo where the file is you want\r\n3. Fetch the remote repository\r\n4. Do a checkout addressing your file\r\n\r\nThis code is working for me:\r\n```\r\nGit git = Git.init().setDirectory(targetDirectory).call();\r\n\r\nFetchCommand fetchCommand = git.fetch().setTransportConfigCallback((transport -&gt; {\r\n\tSshTransport sshTransport = (SshTransport)transport;\r\n\tsshTransport.setSshSessionFactory(sshSessionFactory);\r\n}));\r\n\r\nRemoteAddCommand remoteAddCommand = git.remoteAdd();\r\nremoteAddCommand.setName(&quot;fork&quot;);\r\nremoteAddCommand.setUri(new URIish(repoUrl));\r\nremoteAddCommand.call();\r\n\r\nfetchCommand.setRemote(&quot;fork&quot;).setInitialBranch(branchName).setDepth(1).call();\r\n\r\nCheckoutCommand checkoutCommand = git.checkout()\r\n\t\t\t\t\t\t\t\t\t .addPaths(Arrays.asList(&quot;&lt;your file&gt;&quot;))\r\n\t\t\t\t\t\t\t\t\t .setCreateBranch(true)\r\n\t\t\t\t\t\t\t\t\t .setName(&quot;fork_branch&quot;)\r\n\t\t\t\t\t\t\t\t\t .setUpstreamMode(CreateBranchCommand.SetupUpstreamMode.TRACK)\r\n\t\t\t\t\t\t\t\t\t .setStartPoint(&quot;fork/&quot; + branchName);\r\ncheckoutCommand.call();\r\n\r\nworkingDirectoryUtils.forceDeleteDirectory(new File(targetDirectory, &quot;/.git&quot;));\r\ngit.close();\r\n```","title":"How to clone a single file with jGit?","body":"<ol>\n<li>Create an empty local git repository</li>\n<li>Add remote to the repo where the file is you want</li>\n<li>Fetch the remote repository</li>\n<li>Do a checkout addressing your file</li>\n</ol>\n<p>This code is working for me:</p>\n<pre><code>Git git = Git.init().setDirectory(targetDirectory).call();\n\nFetchCommand fetchCommand = git.fetch().setTransportConfigCallback((transport -&gt; {\n    SshTransport sshTransport = (SshTransport)transport;\n    sshTransport.setSshSessionFactory(sshSessionFactory);\n}));\n\nRemoteAddCommand remoteAddCommand = git.remoteAdd();\nremoteAddCommand.setName(&quot;fork&quot;);\nremoteAddCommand.setUri(new URIish(repoUrl));\nremoteAddCommand.call();\n\nfetchCommand.setRemote(&quot;fork&quot;).setInitialBranch(branchName).setDepth(1).call();\n\nCheckoutCommand checkoutCommand = git.checkout()\n                                     .addPaths(Arrays.asList(&quot;&lt;your file&gt;&quot;))\n                                     .setCreateBranch(true)\n                                     .setName(&quot;fork_branch&quot;)\n                                     .setUpstreamMode(CreateBranchCommand.SetupUpstreamMode.TRACK)\n                                     .setStartPoint(&quot;fork/&quot; + branchName);\ncheckoutCommand.call();\n\nworkingDirectoryUtils.forceDeleteDirectory(new File(targetDirectory, &quot;/.git&quot;));\ngit.close();\n</code></pre>\n"}],"owner":{"account_id":7758885,"reputation":69,"user_id":5872256,"accept_rate":45,"display_name":"user5872256"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2112,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":48620268,"answer_count":2,"score":1,"last_activity_date":1673081898,"creation_date":1517824403,"question_id":48619755,"body_markdown":"I am working with jGit in Java and I have managed to clone an entire repository. But I can not find a way to download a single file inside a repository. I have tried:\r\n\r\n- Change the URL specifying the path of the file.\r\n- Change the URL by specifying a subdirectory.\r\n\r\nNeither of them worked.\r\n\r\nMy code (clone whole repository) is as follows:\r\n\r\n\tpublic File cloneRepository(String url, String path) throws GitAPIException {\r\n\r\n\t\tFile download = new File (path);\r\n\t\tif (download.exists()){\r\n\t\t\tSystem.out.println(&quot;Error&quot;);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tCloneCommand clone = Git.cloneRepository()\t\t\r\n\t\t\t\t\t.setURI(url)\r\n\t\t\t\t\t.setDirectory(download);\r\n\t\t\ttry (Git repositorio = clone.call()) {\r\n\t\t\t\treturn repositorio.getRepository().getWorkTree();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nHow could it be changed to download a single file?","title":"How to clone a single file with jGit?","body":"<p>I am working with jGit in Java and I have managed to clone an entire repository. But I can not find a way to download a single file inside a repository. I have tried:</p>\n\n<ul>\n<li>Change the URL specifying the path of the file.</li>\n<li>Change the URL by specifying a subdirectory.</li>\n</ul>\n\n<p>Neither of them worked.</p>\n\n<p>My code (clone whole repository) is as follows:</p>\n\n<pre><code>public File cloneRepository(String url, String path) throws GitAPIException {\n\n    File download = new File (path);\n    if (download.exists()){\n        System.out.println(\"Error\");\n        return null;\n    }\n    else{\n        CloneCommand clone = Git.cloneRepository()      \n                .setURI(url)\n                .setDirectory(download);\n        try (Git repositorio = clone.call()) {\n            return repositorio.getRepository().getWorkTree();\n        }\n    }\n}\n</code></pre>\n\n<p>How could it be changed to download a single file?</p>\n"},{"tags":["java","spring","mongodb","spring-boot","docker"],"comments":[{"owner":{"account_id":5823420,"reputation":785,"user_id":6656833,"display_name":"Pavel"},"score":0,"creation_date":1673077776,"post_id":75038793,"comment_id":132420750,"body_markdown":"what error it gives you? you have not specified network in your docker file, the default network is bridge I believe, you are trying to access the port on the host, so I think you should set the network to host","body":"what error it gives you? you have not specified network in your docker file, the default network is bridge I believe, you are trying to access the port on the host, so I think you should set the network to host"},{"owner":{"account_id":5823420,"reputation":785,"user_id":6656833,"display_name":"Pavel"},"score":0,"creation_date":1673077840,"post_id":75038793,"comment_id":132420756,"body_markdown":"or change spring.data.mongodb.host to point to the mongo db container through docker network, so spring.data.mongodb.host=docker-mongo","body":"or change spring.data.mongodb.host to point to the mongo db container through docker network, so spring.data.mongodb.host=docker-mongo"},{"owner":{"account_id":12174601,"reputation":93,"user_id":8888065,"display_name":"Vishal Poddar"},"score":0,"creation_date":1673079601,"post_id":75038793,"comment_id":132420949,"body_markdown":"Yes, i am using the default network.","body":"Yes, i am using the default network."},{"owner":{"account_id":12174601,"reputation":93,"user_id":8888065,"display_name":"Vishal Poddar"},"score":0,"creation_date":1673081502,"post_id":75038793,"comment_id":132421175,"body_markdown":"2023-01-07 08:50:03.146  INFO 1 --- [localhost:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server localhost:27017\nwacaj         | \nwacaj         | com.mongodb.MongoSocketOpenException: Exception opening socket\nwacaj         |         at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:70) ~[mongodb-driver-core-4.6.1.jar!/:na]","body":"2023-01-07 08:50:03.146  INFO 1 --- [localhost:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server localhost:27017 wacaj         |  wacaj         | com.mongodb.MongoSocketOpenException: Exception opening socket wacaj         |         at com.mongodb.internal.connection.SocketStream.open(SocketStre&zwnj;&#8203;am.java:70) ~[mongodb-driver-core-4.6.1.jar!/:na]"},{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1673093628,"post_id":75038793,"comment_id":132422922,"body_markdown":"@Pavel A Compose file with no `networks:` blocks is a good setup: Compose creates a network named `default` and all of the normal container networking features work fine.  You should _not_ need host networking for this case.  Also see [Networking in Compose](https://docs.docker.com/compose/networking/) in the Docker documentation.","body":"@Pavel A Compose file with no <code>networks:</code> blocks is a good setup: Compose creates a network named <code>default</code> and all of the normal container networking features work fine.  You should <i>not</i> need host networking for this case.  Also see <a href=\"https://docs.docker.com/compose/networking/\" rel=\"nofollow noreferrer\">Networking in Compose</a> in the Docker documentation."},{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1673093737,"post_id":75038793,"comment_id":132422943,"body_markdown":"This question seems very similar to [SpringBoot in Docker not connecting to Mongo in Docker](https://stackoverflow.com/questions/56938511/springboot-in-docker-not-connecting-to-mongo-in-docker), though it seems somewhat inconclusive.  Definitely `localhost` (&quot;the current container&quot;) is wrong and `spring.data.mongodb.host=mongo` is right (maybe set in an environment variable).","body":"This question seems very similar to <a href=\"https://stackoverflow.com/questions/56938511/springboot-in-docker-not-connecting-to-mongo-in-docker\">SpringBoot in Docker not connecting to Mongo in Docker</a>, though it seems somewhat inconclusive.  Definitely <code>localhost</code> (&quot;the current container&quot;) is wrong and <code>spring.data.mongodb.host=mongo</code> is right (maybe set in an environment variable)."}],"answers":[{"tags":[],"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673079017,"creation_date":1673079017,"answer_id":75038937,"question_id":75038793,"body_markdown":"You need to change the hostname:\r\n```\r\nspring.data.mongodb.host=mongo\r\n```\r\nDocker makes every service in a docker compose setup available under its service name, in your case `mongo` and `wacaj_docker`.\r\n\r\nPlease refer to the [docs][1] for further details.\r\n\r\n\r\n  [1]: https://docs.docker.com/compose/networking/","title":"Spring-boot application in docker container is unable to connect to mongodb docker container","body":"<p>You need to change the hostname:</p>\n<pre><code>spring.data.mongodb.host=mongo\n</code></pre>\n<p>Docker makes every service in a docker compose setup available under its service name, in your case <code>mongo</code> and <code>wacaj_docker</code>.</p>\n<p>Please refer to the <a href=\"https://docs.docker.com/compose/networking/\" rel=\"nofollow noreferrer\">docs</a> for further details.</p>\n"}],"owner":{"account_id":12174601,"reputation":93,"user_id":8888065,"display_name":"Vishal Poddar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":647,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75038937,"answer_count":1,"score":2,"last_activity_date":1673081651,"creation_date":1673077174,"question_id":75038793,"body_markdown":"When I trying to run my spring-boot application on docker , it is not able to connect to the Mongodb container running in docker.\r\n\r\nApplication.properties\r\n```\r\nspring.data.mongodb.port=27017\r\nspring.data.mongodb.host=localhost\r\n```\r\nDockerfile for spring application \r\n```\r\nFROM openjdk\r\nCOPY target/*.jar app.jar\r\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]\r\n```\r\n\r\ndocker-compose.yaml\r\n```\r\nversion: &#39;3&#39;\r\nservices:\r\n  mongo:\r\n    image: mongo:latest\r\n    container_name: docker-mongo\r\n    ports:\r\n      - &quot;27017:27017&quot;\r\n  wacaj_docker:\r\n    image: wacaj\r\n    depends_on:\r\n      - mongo\r\n    container_name: wacaj\r\n    build: .\r\n    ports:\r\n      - &quot;8080:8080&quot;\r\n```\r\n\r\nI am able to connect to the mongodb container from my local system , but the spring-application container is not able to connect to mongo container.\r\nAnd also if I run the spring application in local it is able to connect to the mongo runneing in docker container.\r\nI am unable to troubleshoot the problem.\r\n\r\nI tried changing hostname to both servicename i.e. mongo\r\n and container name i.e. docker-mongo, but it is still not working.\r\n```\r\n2023-01-07 08:50:03.146  INFO 1 --- [localhost:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server localhost:27017\r\nwacaj         | \r\nwacaj         | com.mongodb.MongoSocketOpenException: Exception opening socket\r\nwacaj         |         at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:70) ~[mongodb-driver-core-4.6.1.jar!/:na]\r\nwacaj         |         at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:180) ~[mongodb-driver-core-4.6.1.jar!/:na]\r\nwacaj         |         at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:193) ~[mongodb-driver-core-4.6.1.jar!/:na]\r\nwacaj         |         at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:157) ~[mongodb-driver-core-4.6.1.jar!/:na]\r\nwacaj         |         at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\nwacaj         | Caused by: java.net.ConnectException: Connection refused\r\nwacaj         |         at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]\r\nwacaj         |         at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[na:na]\r\nwacaj         |         at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:539) ~[na:na]\r\nwacaj         |         at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:594) ~[na:na]\r\nwacaj         |         at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\r\nwacaj         |         at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\r\nwacaj         |         at com.mongodb.internal.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:107) ~[mongodb-driver-core-4.6.1.jar!/:na]\r\nwacaj         |         at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:79) ~[mongodb-driver-core-4.6.1.jar!/:na]\r\nwacaj         |         at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:65) ~[mongodb-driver-core-4.6.1.jar!/:na]\r\n```\r\n","title":"Spring-boot application in docker container is unable to connect to mongodb docker container","body":"<p>When I trying to run my spring-boot application on docker , it is not able to connect to the Mongodb container running in docker.</p>\n<p>Application.properties</p>\n<pre><code>spring.data.mongodb.port=27017\nspring.data.mongodb.host=localhost\n</code></pre>\n<p>Dockerfile for spring application</p>\n<pre><code>FROM openjdk\nCOPY target/*.jar app.jar\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]\n</code></pre>\n<p>docker-compose.yaml</p>\n<pre><code>version: '3'\nservices:\n  mongo:\n    image: mongo:latest\n    container_name: docker-mongo\n    ports:\n      - &quot;27017:27017&quot;\n  wacaj_docker:\n    image: wacaj\n    depends_on:\n      - mongo\n    container_name: wacaj\n    build: .\n    ports:\n      - &quot;8080:8080&quot;\n</code></pre>\n<p>I am able to connect to the mongodb container from my local system , but the spring-application container is not able to connect to mongo container.\nAnd also if I run the spring application in local it is able to connect to the mongo runneing in docker container.\nI am unable to troubleshoot the problem.</p>\n<p>I tried changing hostname to both servicename i.e. mongo\nand container name i.e. docker-mongo, but it is still not working.</p>\n<pre><code>2023-01-07 08:50:03.146  INFO 1 --- [localhost:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server localhost:27017\nwacaj         | \nwacaj         | com.mongodb.MongoSocketOpenException: Exception opening socket\nwacaj         |         at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:70) ~[mongodb-driver-core-4.6.1.jar!/:na]\nwacaj         |         at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:180) ~[mongodb-driver-core-4.6.1.jar!/:na]\nwacaj         |         at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:193) ~[mongodb-driver-core-4.6.1.jar!/:na]\nwacaj         |         at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:157) ~[mongodb-driver-core-4.6.1.jar!/:na]\nwacaj         |         at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\nwacaj         | Caused by: java.net.ConnectException: Connection refused\nwacaj         |         at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]\nwacaj         |         at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[na:na]\nwacaj         |         at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:539) ~[na:na]\nwacaj         |         at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:594) ~[na:na]\nwacaj         |         at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\nwacaj         |         at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\nwacaj         |         at com.mongodb.internal.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:107) ~[mongodb-driver-core-4.6.1.jar!/:na]\nwacaj         |         at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:79) ~[mongodb-driver-core-4.6.1.jar!/:na]\nwacaj         |         at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:65) ~[mongodb-driver-core-4.6.1.jar!/:na]\n</code></pre>\n"},{"tags":["java","spring","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673081270,"creation_date":1673079137,"answer_id":75038945,"question_id":75032478,"body_markdown":"**The only reliable approach** to prevent duplicates in DB is to create unique index, in your particular case that should be [filtered](https://learn.microsoft.com/en-us/sql/relational-databases/indexes/create-filtered-indexes?view=sql-server-ver16) unique index:\r\n\r\n```sql\r\nCREATE UNIQUE NONCLUSTERED INDEX CUSTOMERS_UK  \r\nON CUSTOMERS(insuranceNumber)  \r\nWHERE status IN (&#39;PROSPECTIVE&#39;,&#39;PARTICIPANT&#39;)\r\n```\r\n\r\nAnother options are:\r\n- [application locks in MSSQL](https://learn.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-getapplock-transact-sql?view=sql-server-ver16)\r\n- [`lock by a key`](https://stackoverflow.com/a/50549978/3426309) in Java,  however, that won&#39;t work in case of multiple instance deployment","title":"Thread and DB Transaction issue - make a check in Java db safe for multiple threads","body":"<p><strong>The only reliable approach</strong> to prevent duplicates in DB is to create unique index, in your particular case that should be <a href=\"https://learn.microsoft.com/en-us/sql/relational-databases/indexes/create-filtered-indexes?view=sql-server-ver16\" rel=\"nofollow noreferrer\">filtered</a> unique index:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE UNIQUE NONCLUSTERED INDEX CUSTOMERS_UK  \nON CUSTOMERS(insuranceNumber)  \nWHERE status IN ('PROSPECTIVE','PARTICIPANT')\n</code></pre>\n<p>Another options are:</p>\n<ul>\n<li><a href=\"https://learn.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-getapplock-transact-sql?view=sql-server-ver16\" rel=\"nofollow noreferrer\">application locks in MSSQL</a></li>\n<li><a href=\"https://stackoverflow.com/a/50549978/3426309\"><code>lock by a key</code></a> in Java,  however, that won't work in case of multiple instance deployment</li>\n</ul>\n"}],"owner":{"account_id":3904164,"reputation":2111,"user_id":3276902,"accept_rate":83,"display_name":"timguy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75038945,"answer_count":1,"score":0,"last_activity_date":1673081270,"creation_date":1673016646,"question_id":75032478,"body_markdown":"**Context**:\r\n- Spring Boot application with Spring JPA and MS SQL DB.\r\n- User registration process with insuranceNumber\r\n- insuranceNumber is not unique in DB but only for certain status (PROSPECTIVE, PARTICIPANT)\r\n- there is a duplication check in a service to check this\r\n\r\n```\r\n    REST Controller -&gt; \r\n    \t\tRegistrationService  (@Transactional)\r\n    \t\t\t- do duplicate check (select * from customer where status in (PROSPECTIVE,PARTICIPANT) and insuranceNumber = XYZ -&gt; no results good)\r\n    \t\t\t- insert new customer to DB\r\n```\r\n\r\n**Issue**:\r\n- If tested, the duplication checks works but sometimes I have duplicates of insuranceNumber in PROSPECTIVE status\r\n- Assumption: \r\n\t- due to multiple REST requests in short time I have multiple threads (let&#39;s assume 3)\r\n\t- Thread 1 &quot;duplicate check&quot; - all fine\r\n\t- Thread 2 &quot;duplicate check&quot; - all fine (Thread 1 is not comitted yet)\r\n\t- Thread 1 insert do DB, commit TX\r\n\t- Thread 2 insert do DB, commit TX  ## the issue, now customer with same insurance number in same status\r\n\t- Thread 3 &quot;duplicate check&quot; - fails - als expected\r\n\t\r\n**Possible Solutions:**\r\n - Frontend: prevent this multiple requests. Out of scope. I want to be sure from backend\r\n - DB: create something on DB site (database trigger) to do the same duplication check again. Feels wrong as it duplicates the logic of the duplication check. Would also raise a different exception than if raised in Java already\r\n - Java code: RegistrationService with synchronized method. Would slow down registration for everybody. For me it would be enough that only one insurance number is allowed to enter the registration method.\r\n\r\nAre there **more ideas?**\r\nPlay around with isolation levels for the DB?\r\nPrevent to enter the registration method if one thread has already entered the method with same insurance number?","title":"Thread and DB Transaction issue - make a check in Java db safe for multiple threads","body":"<p><strong>Context</strong>:</p>\n<ul>\n<li>Spring Boot application with Spring JPA and MS SQL DB.</li>\n<li>User registration process with insuranceNumber</li>\n<li>insuranceNumber is not unique in DB but only for certain status (PROSPECTIVE, PARTICIPANT)</li>\n<li>there is a duplication check in a service to check this</li>\n</ul>\n<pre><code>    REST Controller -&gt; \n            RegistrationService  (@Transactional)\n                - do duplicate check (select * from customer where status in (PROSPECTIVE,PARTICIPANT) and insuranceNumber = XYZ -&gt; no results good)\n                - insert new customer to DB\n</code></pre>\n<p><strong>Issue</strong>:</p>\n<ul>\n<li>If tested, the duplication checks works but sometimes I have duplicates of insuranceNumber in PROSPECTIVE status</li>\n<li>Assumption:\n<ul>\n<li>due to multiple REST requests in short time I have multiple threads (let's assume 3)</li>\n<li>Thread 1 &quot;duplicate check&quot; - all fine</li>\n<li>Thread 2 &quot;duplicate check&quot; - all fine (Thread 1 is not comitted yet)</li>\n<li>Thread 1 insert do DB, commit TX</li>\n<li>Thread 2 insert do DB, commit TX  ## the issue, now customer with same insurance number in same status</li>\n<li>Thread 3 &quot;duplicate check&quot; - fails - als expected</li>\n</ul>\n</li>\n</ul>\n<p><strong>Possible Solutions:</strong></p>\n<ul>\n<li>Frontend: prevent this multiple requests. Out of scope. I want to be sure from backend</li>\n<li>DB: create something on DB site (database trigger) to do the same duplication check again. Feels wrong as it duplicates the logic of the duplication check. Would also raise a different exception than if raised in Java already</li>\n<li>Java code: RegistrationService with synchronized method. Would slow down registration for everybody. For me it would be enough that only one insurance number is allowed to enter the registration method.</li>\n</ul>\n<p>Are there <strong>more ideas?</strong>\nPlay around with isolation levels for the DB?\nPrevent to enter the registration method if one thread has already entered the method with same insurance number?</p>\n"},{"tags":["java","android","battery"],"comments":[{"owner":{"account_id":68774,"reputation":54239,"user_id":200477,"accept_rate":98,"display_name":"Mohit Deshpande"},"score":0,"creation_date":1279640811,"post_id":3291655,"comment_id":111598023,"body_markdown":"After some MORE researching, I found BatteryManager.EXTRA_LEVEL.","body":"After some MORE researching, I found BatteryManager.EXTRA_LEVEL."}],"answers":[{"tags":[],"owner":{"account_id":168316,"reputation":41796,"user_id":393701,"display_name":"SirDarius"},"down_vote_count":2,"up_vote_count":153,"is_accepted":true,"score":151,"last_activity_date":1664916002,"creation_date":1279640846,"answer_id":3291822,"question_id":3291655,"body_markdown":"[Tutorial For Android][1] has a code sample that explains how to get battery information.\r\n\r\nTo sum it up, a broadcast receiver for the `ACTION_BATTERY_CHANGED` intent is set up dynamically, because it can not be received through components declared in manifests, only by explicitly registering for it with `Context.registerReceiver()`.\r\n\r\n    public class Main extends Activity {\r\n      private TextView batteryTxt;\r\n      private BroadcastReceiver mBatInfoReceiver = new BroadcastReceiver(){\r\n        @Override\r\n        public void onReceive(Context ctxt, Intent intent) {\r\n          int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);\r\n          int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);\r\n          float batteryPct = level * 100 / (float)scale;\r\n          batteryTxt.setText(String.valueOf(batteryPct) + &quot;%&quot;);\r\n        }\r\n      };\r\n    \r\n      @Override\r\n      public void onCreate(Bundle b) {\r\n        super.onCreate(b);\r\n        setContentView(R.layout.main);\r\n        batteryTxt = (TextView) this.findViewById(R.id.batteryTxt);\r\n        this.registerReceiver(this.mBatInfoReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));\r\n      }\r\n    }\r\n\r\n\r\n  [1]: https://web.archive.org/web/20200721185308/http://www.tutorialforandroid.com:80/2009/01/getting-battery-information-on-android.html","title":"Get battery level and state in Android","body":"<p><a href=\"https://web.archive.org/web/20200721185308/http://www.tutorialforandroid.com:80/2009/01/getting-battery-information-on-android.html\" rel=\"noreferrer\">Tutorial For Android</a> has a code sample that explains how to get battery information.</p>\n<p>To sum it up, a broadcast receiver for the <code>ACTION_BATTERY_CHANGED</code> intent is set up dynamically, because it can not be received through components declared in manifests, only by explicitly registering for it with <code>Context.registerReceiver()</code>.</p>\n<pre><code>public class Main extends Activity {\n  private TextView batteryTxt;\n  private BroadcastReceiver mBatInfoReceiver = new BroadcastReceiver(){\n    @Override\n    public void onReceive(Context ctxt, Intent intent) {\n      int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);\n      int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);\n      float batteryPct = level * 100 / (float)scale;\n      batteryTxt.setText(String.valueOf(batteryPct) + &quot;%&quot;);\n    }\n  };\n\n  @Override\n  public void onCreate(Bundle b) {\n    super.onCreate(b);\n    setContentView(R.layout.main);\n    batteryTxt = (TextView) this.findViewById(R.id.batteryTxt);\n    this.registerReceiver(this.mBatInfoReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3066037,"reputation":6008,"user_id":2597706,"accept_rate":50,"display_name":"reza.cse08"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1446757961,"creation_date":1446757961,"answer_id":33554878,"question_id":3291655,"body_markdown":"You can use this to get remaining charged in percentage.\r\n\r\n    private void batteryLevel() {\r\n            BroadcastReceiver batteryLevelReceiver = new BroadcastReceiver() {\r\n                public void onReceive(Context context, Intent intent) {\r\n                    context.unregisterReceiver(this);\r\n                    int rawlevel = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);\r\n                    int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);\r\n                    int level = -1;\r\n                    if (rawlevel &gt;= 0 &amp;&amp; scale &gt; 0) {\r\n                        level = (rawlevel * 100) / scale;\r\n                    }\r\n                    batterLevel.setText(&quot;Battery Level Remaining: &quot; + level + &quot;%&quot;);\r\n                }\r\n            };\r\n            IntentFilter batteryLevelFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\r\n            registerReceiver(batteryLevelReceiver, batteryLevelFilter);\r\n        }","title":"Get battery level and state in Android","body":"<p>You can use this to get remaining charged in percentage.</p>\n\n<pre><code>private void batteryLevel() {\n        BroadcastReceiver batteryLevelReceiver = new BroadcastReceiver() {\n            public void onReceive(Context context, Intent intent) {\n                context.unregisterReceiver(this);\n                int rawlevel = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);\n                int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);\n                int level = -1;\n                if (rawlevel &gt;= 0 &amp;&amp; scale &gt; 0) {\n                    level = (rawlevel * 100) / scale;\n                }\n                batterLevel.setText(\"Battery Level Remaining: \" + level + \"%\");\n            }\n        };\n        IntentFilter batteryLevelFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\n        registerReceiver(batteryLevelReceiver, batteryLevelFilter);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5862240,"reputation":360,"user_id":5018911,"display_name":"Hardip"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1465469000,"creation_date":1465469000,"answer_id":37723702,"question_id":3291655,"body_markdown":"    private void batteryLevel() {\r\n            BroadcastReceiver batteryLevelReceiver = new BroadcastReceiver() {\r\n                public void onReceive(Context context, Intent intent) {\r\n                    context.unregisterReceiver(this);\r\n                    int rawlevel = intent.getIntExtra(&quot;level&quot;, -1);\r\n                    int scale = intent.getIntExtra(&quot;scale&quot;, -1);\r\n                    int level = -1;\r\n                    if (rawlevel &gt;= 0 &amp;&amp; scale &gt; 0) {\r\n                        level = (rawlevel * 100) / scale;\r\n                    }\r\n                    mBtn.setText(&quot;Battery Level Remaining: &quot; + level + &quot;%&quot;);\r\n                }\r\n            };\r\n            IntentFilter batteryLevelFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\r\n            registerReceiver(batteryLevelReceiver, batteryLevelFilter);\r\n        }","title":"Get battery level and state in Android","body":"<pre><code>private void batteryLevel() {\n        BroadcastReceiver batteryLevelReceiver = new BroadcastReceiver() {\n            public void onReceive(Context context, Intent intent) {\n                context.unregisterReceiver(this);\n                int rawlevel = intent.getIntExtra(\"level\", -1);\n                int scale = intent.getIntExtra(\"scale\", -1);\n                int level = -1;\n                if (rawlevel &gt;= 0 &amp;&amp; scale &gt; 0) {\n                    level = (rawlevel * 100) / scale;\n                }\n                mBtn.setText(\"Battery Level Remaining: \" + level + \"%\");\n            }\n        };\n        IntentFilter batteryLevelFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\n        registerReceiver(batteryLevelReceiver, batteryLevelFilter);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":560190,"reputation":3364,"user_id":922339,"display_name":"Mark"},"down_vote_count":0,"up_vote_count":155,"is_accepted":false,"score":155,"last_activity_date":1598721400,"creation_date":1469116816,"answer_id":38509011,"question_id":3291655,"body_markdown":"Since `SDK 21` `LOLLIPOP` it is possible to use the following to get current battery level as a percentage:\r\n\r\n    BatteryManager bm = (BatteryManager) context.getSystemService(BATTERY_SERVICE);\r\n    int batLevel = bm.getIntProperty(BatteryManager.BATTERY_PROPERTY_CAPACITY);\r\n\r\nRead [BatteryManager &#160;|&#160; Android Developers - BATTERY_PROPERTY_CAPACITY](https://developer.android.com/reference/android/os/BatteryManager.html#BATTERY_PROPERTY_CAPACITY)","title":"Get battery level and state in Android","body":"<p>Since <code>SDK 21</code> <code>LOLLIPOP</code> it is possible to use the following to get current battery level as a percentage:</p>\n<pre><code>BatteryManager bm = (BatteryManager) context.getSystemService(BATTERY_SERVICE);\nint batLevel = bm.getIntProperty(BatteryManager.BATTERY_PROPERTY_CAPACITY);\n</code></pre>\n<p>Read <a href=\"https://developer.android.com/reference/android/os/BatteryManager.html#BATTERY_PROPERTY_CAPACITY\" rel=\"noreferrer\">BatteryManager | Android Developers - BATTERY_PROPERTY_CAPACITY</a></p>\n"},{"tags":[],"owner":{"account_id":149141,"reputation":3052,"user_id":361413,"display_name":"bk138"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1475258291,"creation_date":1475258291,"answer_id":39797400,"question_id":3291655,"body_markdown":"You don&#39;t have to register an actual BroadcastReceiver as Android&#39;s BatteryManager is using a sticky Intent:\r\n\r\n    IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\r\n    Intent batteryStatus = registerReceiver(null, ifilter);\r\n\r\n    int level = batteryStatus.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);\r\n    int scale = batteryStatus.getIntExtra(BatteryManager.EXTRA_SCALE, -1);\r\n\r\n    float batteryPct = level / (float)scale;\r\n\r\n    return (int)(batteryPct*100);\r\n\r\nThis is from the official docs over at https://developer.android.com/training/monitoring-device-state/battery-monitoring.html.","title":"Get battery level and state in Android","body":"<p>You don't have to register an actual BroadcastReceiver as Android's BatteryManager is using a sticky Intent:</p>\n\n<pre><code>IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\nIntent batteryStatus = registerReceiver(null, ifilter);\n\nint level = batteryStatus.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);\nint scale = batteryStatus.getIntExtra(BatteryManager.EXTRA_SCALE, -1);\n\nfloat batteryPct = level / (float)scale;\n\nreturn (int)(batteryPct*100);\n</code></pre>\n\n<p>This is from the official docs over at <a href=\"https://developer.android.com/training/monitoring-device-state/battery-monitoring.html\" rel=\"noreferrer\">https://developer.android.com/training/monitoring-device-state/battery-monitoring.html</a>.</p>\n"},{"tags":[],"owner":{"account_id":1447779,"reputation":5253,"user_id":2268466,"accept_rate":64,"display_name":"blueware"},"down_vote_count":0,"up_vote_count":99,"is_accepted":false,"score":99,"last_activity_date":1612959138,"creation_date":1487508925,"answer_id":42327441,"question_id":3291655,"body_markdown":"Based on [official android docs][1], you can use this method in a Helper or Util class to get current battery percentage:\r\n\r\n**Java version:**\r\n\r\n    public static int getBatteryPercentage(Context context) {\r\n    \r\n        if (Build.VERSION.SDK_INT &gt;= 21) {\r\n    \r\n             BatteryManager bm = (BatteryManager) context.getSystemService(BATTERY_SERVICE);\r\n             return bm.getIntProperty(BatteryManager.BATTERY_PROPERTY_CAPACITY);\r\n    \r\n        } else {\r\n    \r\n             IntentFilter iFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\r\n             Intent batteryStatus = context.registerReceiver(null, iFilter);\r\n    \r\n             int level = batteryStatus != null ? batteryStatus.getIntExtra(BatteryManager.EXTRA_LEVEL, -1) : -1;\r\n             int scale = batteryStatus != null ? batteryStatus.getIntExtra(BatteryManager.EXTRA_SCALE, -1) : -1;\r\n    \r\n             double batteryPct = level / (double) scale;\r\n    \r\n             return (int) (batteryPct * 100);\r\n       }\r\n    }\r\n\r\n**Kotlin version:**\r\n\r\n    fun getBatteryPercentage(context: Context): Int {\r\n        return if (Build.VERSION.SDK_INT &gt;= 21) {\r\n            val bm = context.getSystemService(BATTERY_SERVICE) as BatteryManager\r\n            bm.getIntProperty(BatteryManager.BATTERY_PROPERTY_CAPACITY)\r\n        \r\n        } else {\r\n            val iFilter = IntentFilter(Intent.ACTION_BATTERY_CHANGED)\r\n            val batteryStatus: Intent = context.registerReceiver(null, iFilter)\r\n            val level = batteryStatus?.getIntExtra(BatteryManager.EXTRA_LEVEL, -1)\r\n            val scale = batteryStatus?.getIntExtra(BatteryManager.EXTRA_SCALE, -1)\r\n            val batteryPct = level / scale.toDouble()\r\n            (batteryPct * 100).toInt()\r\n        }\r\n    }\r\n\r\n  [1]: https://developer.android.com/training/monitoring-device-state/battery-monitoring.html#MonitorLevel","title":"Get battery level and state in Android","body":"<p>Based on <a href=\"https://developer.android.com/training/monitoring-device-state/battery-monitoring.html#MonitorLevel\" rel=\"noreferrer\">official android docs</a>, you can use this method in a Helper or Util class to get current battery percentage:</p>\n<p><strong>Java version:</strong></p>\n<pre><code>public static int getBatteryPercentage(Context context) {\n\n    if (Build.VERSION.SDK_INT &gt;= 21) {\n\n         BatteryManager bm = (BatteryManager) context.getSystemService(BATTERY_SERVICE);\n         return bm.getIntProperty(BatteryManager.BATTERY_PROPERTY_CAPACITY);\n\n    } else {\n\n         IntentFilter iFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\n         Intent batteryStatus = context.registerReceiver(null, iFilter);\n\n         int level = batteryStatus != null ? batteryStatus.getIntExtra(BatteryManager.EXTRA_LEVEL, -1) : -1;\n         int scale = batteryStatus != null ? batteryStatus.getIntExtra(BatteryManager.EXTRA_SCALE, -1) : -1;\n\n         double batteryPct = level / (double) scale;\n\n         return (int) (batteryPct * 100);\n   }\n}\n</code></pre>\n<p><strong>Kotlin version:</strong></p>\n<pre><code>fun getBatteryPercentage(context: Context): Int {\n    return if (Build.VERSION.SDK_INT &gt;= 21) {\n        val bm = context.getSystemService(BATTERY_SERVICE) as BatteryManager\n        bm.getIntProperty(BatteryManager.BATTERY_PROPERTY_CAPACITY)\n    \n    } else {\n        val iFilter = IntentFilter(Intent.ACTION_BATTERY_CHANGED)\n        val batteryStatus: Intent = context.registerReceiver(null, iFilter)\n        val level = batteryStatus?.getIntExtra(BatteryManager.EXTRA_LEVEL, -1)\n        val scale = batteryStatus?.getIntExtra(BatteryManager.EXTRA_SCALE, -1)\n        val batteryPct = level / scale.toDouble()\n        (batteryPct * 100).toInt()\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11007169,"reputation":860,"user_id":9821661,"display_name":"milan pithadia"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1530358348,"creation_date":1530358348,"answer_id":51114508,"question_id":3291655,"body_markdown":"try this function no need permisson or any reciver\r\n\r\n\r\n    void getBattery_percentage()\r\n    {\r\n          IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\r\n          Intent batteryStatus = getApplicationContext().registerReceiver(null, ifilter);\r\n          int level = batteryStatus.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);\r\n          int scale = batteryStatus.getIntExtra(BatteryManager.EXTRA_SCALE, -1);\r\n          float batteryPct = level / (float)scale;\r\n          float p = batteryPct * 100;\r\n          \r\n          Log.d(&quot;Battery percentage&quot;,String.valueOf(Math.round(p)));\r\n      }\r\n\r\n","title":"Get battery level and state in Android","body":"<p>try this function no need permisson or any reciver</p>\n\n<pre><code>void getBattery_percentage()\n{\n      IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\n      Intent batteryStatus = getApplicationContext().registerReceiver(null, ifilter);\n      int level = batteryStatus.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);\n      int scale = batteryStatus.getIntExtra(BatteryManager.EXTRA_SCALE, -1);\n      float batteryPct = level / (float)scale;\n      float p = batteryPct * 100;\n\n      Log.d(\"Battery percentage\",String.valueOf(Math.round(p)));\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2548155,"reputation":1220,"user_id":2212515,"display_name":"user2212515"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1533390186,"creation_date":1533390186,"answer_id":51686187,"question_id":3291655,"body_markdown":"one mistake in official docs, you must use double instead float. Because 0.53F * 100F = 52F\r\n\r\n    int level = batteryStatus != null ? \r\n    batteryStatus.getIntExtra(BatteryManager.EXTRA_LEVEL, -1) : -1; int scale = \r\n    batteryStatus != null ? batteryStatus.getIntExtra(BatteryManager.EXTRA_SCALE, -1) : -1; \r\n    double batteryPct = (double) level / (double) scale; int percent = (int) (batteryPct * 100D);","title":"Get battery level and state in Android","body":"<p>one mistake in official docs, you must use double instead float. Because 0.53F * 100F = 52F</p>\n\n<pre><code>int level = batteryStatus != null ? \nbatteryStatus.getIntExtra(BatteryManager.EXTRA_LEVEL, -1) : -1; int scale = \nbatteryStatus != null ? batteryStatus.getIntExtra(BatteryManager.EXTRA_SCALE, -1) : -1; \ndouble batteryPct = (double) level / (double) scale; int percent = (int) (batteryPct * 100D);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1038775,"reputation":9724,"user_id":1045296,"accept_rate":100,"display_name":"Code Spy"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1545298910,"creation_date":1545298910,"answer_id":53865970,"question_id":3291655,"body_markdown":"To check battery percentage we use **BatteryManager**, the following method will return battery percentage.\r\n\r\n**Source [Link][1]**\r\n\r\n\r\n    public static float getBatteryLevel(Context context, Intent intent) {\r\n        Intent batteryStatus = context.registerReceiver(null,\r\n                new IntentFilter(Intent.ACTION_BATTERY_CHANGED));\r\n        int batteryLevel = -1;\r\n        int batteryScale = 1;\r\n        if (batteryStatus != null) {\r\n            batteryLevel = batteryStatus.getIntExtra(BatteryManager.EXTRA_LEVEL, batteryLevel);\r\n            batteryScale = batteryStatus.getIntExtra(BatteryManager.EXTRA_SCALE, batteryScale);\r\n        }\r\n        return batteryLevel / (float) batteryScale * 100;\r\n    }\r\n\r\n\r\n\r\n\r\n  [1]: https://www.freakyjolly.com/android-useful-methods-and-functions/#5method","title":"Get battery level and state in Android","body":"<p>To check battery percentage we use <strong>BatteryManager</strong>, the following method will return battery percentage.</p>\n\n<p><strong>Source <a href=\"https://www.freakyjolly.com/android-useful-methods-and-functions/#5method\" rel=\"nofollow noreferrer\">Link</a></strong></p>\n\n<pre><code>public static float getBatteryLevel(Context context, Intent intent) {\n    Intent batteryStatus = context.registerReceiver(null,\n            new IntentFilter(Intent.ACTION_BATTERY_CHANGED));\n    int batteryLevel = -1;\n    int batteryScale = 1;\n    if (batteryStatus != null) {\n        batteryLevel = batteryStatus.getIntExtra(BatteryManager.EXTRA_LEVEL, batteryLevel);\n        batteryScale = batteryStatus.getIntExtra(BatteryManager.EXTRA_SCALE, batteryScale);\n    }\n    return batteryLevel / (float) batteryScale * 100;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":286887,"reputation":1175,"user_id":7429464,"accept_rate":86,"display_name":"FindOutIslamNow"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1574657184,"creation_date":1574657184,"answer_id":59025376,"question_id":3291655,"body_markdown":"Other answers didn&#39;t mention how to [access battery status][1] (chraging or not).\r\n\r\n    IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\r\n    Intent batteryStatus = context.registerReceiver(null, ifilter);\r\n\r\n    // Are we charging / charged?\r\n    int status = batteryStatus.getIntExtra(BatteryManager.EXTRA_STATUS, -1);\r\n    boolean isCharging = status == BatteryManager.BATTERY_STATUS_CHARGING ||\r\n                         status == BatteryManager.BATTERY_STATUS_FULL;\r\n    \r\n    // How are we charging?\r\n    int chargePlug = batteryStatus.getIntExtra(BatteryManager.EXTRA_PLUGGED, -1);\r\n    boolean usbCharge = chargePlug == BatteryManager.BATTERY_PLUGGED_USB;\r\n    boolean acCharge = chargePlug == BatteryManager.BATTERY_PLUGGED_AC;\r\n\r\n\r\n  [1]: https://developer.android.com/training/monitoring-device-state/battery-monitoring.html#DetermineChargeState","title":"Get battery level and state in Android","body":"<p>Other answers didn't mention how to <a href=\"https://developer.android.com/training/monitoring-device-state/battery-monitoring.html#DetermineChargeState\" rel=\"noreferrer\">access battery status</a> (chraging or not).</p>\n\n<pre><code>IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\nIntent batteryStatus = context.registerReceiver(null, ifilter);\n\n// Are we charging / charged?\nint status = batteryStatus.getIntExtra(BatteryManager.EXTRA_STATUS, -1);\nboolean isCharging = status == BatteryManager.BATTERY_STATUS_CHARGING ||\n                     status == BatteryManager.BATTERY_STATUS_FULL;\n\n// How are we charging?\nint chargePlug = batteryStatus.getIntExtra(BatteryManager.EXTRA_PLUGGED, -1);\nboolean usbCharge = chargePlug == BatteryManager.BATTERY_PLUGGED_USB;\nboolean acCharge = chargePlug == BatteryManager.BATTERY_PLUGGED_AC;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23088962,"reputation":61,"user_id":17200097,"display_name":"Mohammad Reza"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671566233,"creation_date":1671563815,"answer_id":74867896,"question_id":3291655,"body_markdown":"get battery level in Android-Kotlin:\r\n\r\n    class MainActivity : AppCompatActivity() {\r\n        private lateinit var binding: ActivityMainBinding\r\n    \r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            binding = ActivityMainBinding.inflate(layoutInflater)\r\n            setContentView(binding.root)\r\n    \r\n            registerReceiver(this.broadcastReceiver, IntentFilter(Intent.ACTION_BATTERY_CHANGED))\r\n        }\r\n    \r\n        private val broadcastReceiver: BroadcastReceiver = object : BroadcastReceiver() {\r\n            @SuppressLint(&quot;SetTextI18n&quot;)\r\n            override fun onReceive(context: Context?, intent: Intent) {\r\n                \r\n                val level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, 0)\r\n                binding.txtShowBatteryLevel.text = &quot;Battery level: %$level&quot;\r\n                \r\n            }\r\n        }\r\n    \r\n    }","title":"Get battery level and state in Android","body":"<p>get battery level in Android-Kotlin:</p>\n<pre><code>class MainActivity : AppCompatActivity() {\n    private lateinit var binding: ActivityMainBinding\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        binding = ActivityMainBinding.inflate(layoutInflater)\n        setContentView(binding.root)\n\n        registerReceiver(this.broadcastReceiver, IntentFilter(Intent.ACTION_BATTERY_CHANGED))\n    }\n\n    private val broadcastReceiver: BroadcastReceiver = object : BroadcastReceiver() {\n        @SuppressLint(&quot;SetTextI18n&quot;)\n        override fun onReceive(context: Context?, intent: Intent) {\n            \n            val level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, 0)\n            binding.txtShowBatteryLevel.text = &quot;Battery level: %$level&quot;\n            \n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7282863,"reputation":186,"user_id":5551975,"display_name":"dcarl661"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673081110,"creation_date":1673042684,"answer_id":75036492,"question_id":3291655,"body_markdown":"Based on these great answers I modified the getBatteryPercentage. Btw I used &quot;Carlson Notation&quot; code formatting because it&#39;s just plain easier to read fast.\r\n\r\n    public static String getBatteryPercentage(Context context)\r\n    {\r\n        String bstatus       = &quot;isChrg=false usbChrg=false acChrg=false wlChrg=false 0% t=70&#176;F&quot;;\r\n        IntentFilter iFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\r\n        Intent batteryStatus = context.registerReceiver(null, iFilter);\r\n        int status           = batteryStatus.getIntExtra(BatteryManager.EXTRA_STATUS, -1);\r\n        boolean isCharging   = status == BatteryManager.BATTERY_STATUS_CHARGING ||\r\n                               status == BatteryManager.BATTERY_STATUS_FULL;\r\n        int level            = batteryStatus.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);\r\n        int scale            = batteryStatus.getIntExtra(BatteryManager.EXTRA_SCALE, -1);\r\n        float batteryPct     = level * 100 / (float)scale;\r\n        //How are we charging?\r\n        int chargePlug       = batteryStatus.getIntExtra(BatteryManager.EXTRA_PLUGGED, -1);\r\n        boolean usbCharge    = chargePlug == BatteryManager.BATTERY_PLUGGED_USB;\r\n        boolean acCharge     = chargePlug == BatteryManager.BATTERY_PLUGGED_AC;\r\n        boolean wlCharge     = chargePlug == BatteryManager.BATTERY_PLUGGED_WIRELESS;\r\n        int temp             = batteryStatus.getIntExtra(BatteryManager.EXTRA_TEMPERATURE,0);\r\n        float tempTwo        = ((float) temp) / 10;\r\n        double d             = CelsiusToFahrenheit(tempTwo);\r\n        bstatus              = String.format(Locale.US, &quot;isChrg=%b usbChrg=%b acChrg=%b wlChrg=%b %.0f%% t=%.2f&#176;F&quot;,\r\n                               isCharging,\r\n                               usbCharge,\r\n                               acCharge,\r\n                               wlCharge,\r\n                               batteryPct,\r\n                               d);\r\n        return bstatus;\r\n    }\r\n","title":"Get battery level and state in Android","body":"<p>Based on these great answers I modified the getBatteryPercentage. Btw I used &quot;Carlson Notation&quot; code formatting because it's just plain easier to read fast.</p>\n<pre><code>public static String getBatteryPercentage(Context context)\n{\n    String bstatus       = &quot;isChrg=false usbChrg=false acChrg=false wlChrg=false 0% t=70F&quot;;\n    IntentFilter iFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\n    Intent batteryStatus = context.registerReceiver(null, iFilter);\n    int status           = batteryStatus.getIntExtra(BatteryManager.EXTRA_STATUS, -1);\n    boolean isCharging   = status == BatteryManager.BATTERY_STATUS_CHARGING ||\n                           status == BatteryManager.BATTERY_STATUS_FULL;\n    int level            = batteryStatus.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);\n    int scale            = batteryStatus.getIntExtra(BatteryManager.EXTRA_SCALE, -1);\n    float batteryPct     = level * 100 / (float)scale;\n    //How are we charging?\n    int chargePlug       = batteryStatus.getIntExtra(BatteryManager.EXTRA_PLUGGED, -1);\n    boolean usbCharge    = chargePlug == BatteryManager.BATTERY_PLUGGED_USB;\n    boolean acCharge     = chargePlug == BatteryManager.BATTERY_PLUGGED_AC;\n    boolean wlCharge     = chargePlug == BatteryManager.BATTERY_PLUGGED_WIRELESS;\n    int temp             = batteryStatus.getIntExtra(BatteryManager.EXTRA_TEMPERATURE,0);\n    float tempTwo        = ((float) temp) / 10;\n    double d             = CelsiusToFahrenheit(tempTwo);\n    bstatus              = String.format(Locale.US, &quot;isChrg=%b usbChrg=%b acChrg=%b wlChrg=%b %.0f%% t=%.2fF&quot;,\n                           isCharging,\n                           usbCharge,\n                           acCharge,\n                           wlCharge,\n                           batteryPct,\n                           d);\n    return bstatus;\n}\n</code></pre>\n"}],"owner":{"account_id":68774,"reputation":54239,"user_id":200477,"accept_rate":98,"display_name":"Mohit Deshpande"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183257,"favorite_count":0,"down_vote_count":0,"up_vote_count":146,"accepted_answer_id":3291822,"answer_count":12,"score":146,"last_activity_date":1673081110,"creation_date":1279639968,"question_id":3291655,"body_markdown":"How can I get battery level and state (plugged in, discharging, charging, etc)? I researched the developer docs and I found a BatteryManager class. But it doesn&#39;t contain any methods, just constants. How do I even use it?","title":"Get battery level and state in Android","body":"<p>How can I get battery level and state (plugged in, discharging, charging, etc)? I researched the developer docs and I found a BatteryManager class. But it doesn't contain any methods, just constants. How do I even use it?</p>\n"},{"tags":["java","swing","user-interface","jbutton","actionlistener"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1673063274,"post_id":75037974,"comment_id":132419504,"body_markdown":"I suspect that they are, but you&#39;ve shadowed your instance variables with local ones (ie `b1` is declared twice).  Instance of using the object instance, perhaps you should consider making use of the `actionCommand` support","body":"I suspect that they are, but you&#39;ve shadowed your instance variables with local ones (ie <code>b1</code> is declared twice).  Instance of using the object instance, perhaps you should consider making use of the <code>actionCommand</code> support"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1673076413,"post_id":75037974,"comment_id":132420638,"body_markdown":"in addition to the comment by @MadProgrammer: you are using different instances of hangman for each button","body":"in addition to the comment by @MadProgrammer: you are using different instances of hangman for each button"}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673079185,"creation_date":1673079185,"answer_id":75038950,"question_id":75037974,"body_markdown":"The [comment][1], by @MadProgrammer, is telling you why nothing happens when you click on any of the [buttons][2], namely that your code contains [shadowing][3] (not to be confused with [hiding][4]). In other words, you have local variables with the same declaration as [member variables][5].\r\n\r\nI don&#39;t know how you are learning *Swing* but it is a vast API and the quintessential tutorial is this one:  \r\n&gt;[Creating a GUI With Swing][6]  \r\n\r\nwhich is part of Oracle&#39;s Java tutorials.\r\n\r\nThere are also several books devoted entirely to *Swing*.\r\n```java\r\nmainPanel.setLayout(null);\r\n```\r\nYou usually don&#39;t need to use a null layout. I believe that [FlowLayout][7] is appropriate for displaying your buttons.\r\n\r\nAlso, since Java 8, you can implement [ActionListener][8] with a [method reference][9].\r\n\r\nHere is my rewrite of your code which aims to show you several other features of *Swing*, apart from fixing your problem whereby clicking on any of the buttons does nothing.\r\n```java\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Dimension;\r\nimport java.awt.EventQueue;\r\nimport java.awt.FlowLayout;\r\nimport java.awt.Image;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.awt.event.KeyEvent;\r\nimport java.io.IOException;\r\nimport java.net.URL;\r\n\r\nimport javax.imageio.ImageIO;\r\nimport javax.swing.BorderFactory;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\n\r\npublic class HangmanB {\r\n\r\n    private void buildAndShowGui() {\r\n        JFrame frame = new JFrame(&quot;Hangman&quot;);\r\n        URL url = getClass().getResource(&quot;hangman16.png&quot;);\r\n        try {\r\n            Image img = ImageIO.read(url);\r\n            frame.setIconImage(img);\r\n        }\r\n        catch (IOException xIo) {\r\n            xIo.printStackTrace();\r\n        }\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.add(createButtonsPanel(), BorderLayout.PAGE_START);\r\n        frame.setSize(900, 500);\r\n        frame.setLocationByPlatform(true);\r\n        frame.setVisible(true);\r\n    }\r\n\r\n    private JButton createButton(String text, int mnemonic, ActionListener listener) {\r\n        JButton b = new JButton(text);\r\n        b.setPreferredSize(new Dimension(90, 90));\r\n        b.setMnemonic(mnemonic);\r\n        b.addActionListener(listener);\r\n        return b;\r\n    }\r\n\r\n    private JPanel createButtonsPanel() {\r\n        JPanel panel = new JPanel(new FlowLayout(FlowLayout.LEADING, 20, 5));\r\n        panel.setBorder(BorderFactory.createEmptyBorder(12, 8, 0, 0));\r\n        panel.add(createButton(&quot;1&quot;, KeyEvent.VK_1, this::handleButton1));\r\n        panel.add(createButton(&quot;2&quot;, KeyEvent.VK_2, this::handleButton2));\r\n        panel.add(createButton(&quot;3&quot;, KeyEvent.VK_3, this::handleButton3));\r\n        return panel;\r\n    }\r\n\r\n    private void handleButton1(ActionEvent event) {\r\n        System.out.println(&quot;button 1 was clicked&quot;);\r\n    }\r\n\r\n    private void handleButton2(ActionEvent event) {\r\n        System.out.println(&quot;button 2 was clicked&quot;);\r\n    }\r\n\r\n    private void handleButton3(ActionEvent event) {\r\n        System.out.println(&quot;button 3 was clicked&quot;);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        EventQueue.invokeLater(() -&gt; new HangmanB().buildAndShowGui());\r\n    }\r\n}\r\n```\r\nHere is a screen capture of the GUI when I run the above code:\r\n\r\n[![screen capture][10]][10]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/75037974/why-are-my-jbuttons-not-responding-when-clicked#comment132419504_75037974\r\n  [2]: https://docs.oracle.com/javase/tutorial/uiswing/components/button.html\r\n  [3]: https://www.geeksforgeeks.org/shadowing-in-java/\r\n  [4]: https://www.scaler.com/topics/java/variable-hiding-and-variable-shadowing-in-java/\r\n  [5]: https://docs.oracle.com/javase/tutorial/java/javaOO/variables.html\r\n  [6]: https://docs.oracle.com/javase/tutorial/uiswing/index.html\r\n  [7]: https://docs.oracle.com/javase/tutorial/uiswing/layout/flow.html\r\n  [8]: https://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html\r\n  [9]: https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\r\n  [10]: https://i.stack.imgur.com/TWE0s.png","title":"Why are my JButtons not responding when clicked?","body":"<p>The <a href=\"https://stackoverflow.com/questions/75037974/why-are-my-jbuttons-not-responding-when-clicked#comment132419504_75037974\">comment</a>, by @MadProgrammer, is telling you why nothing happens when you click on any of the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/button.html\" rel=\"nofollow noreferrer\">buttons</a>, namely that your code contains <a href=\"https://www.geeksforgeeks.org/shadowing-in-java/\" rel=\"nofollow noreferrer\">shadowing</a> (not to be confused with <a href=\"https://www.scaler.com/topics/java/variable-hiding-and-variable-shadowing-in-java/\" rel=\"nofollow noreferrer\">hiding</a>). In other words, you have local variables with the same declaration as <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/variables.html\" rel=\"nofollow noreferrer\">member variables</a>.</p>\n<p>I don't know how you are learning <em>Swing</em> but it is a vast API and the quintessential tutorial is this one:</p>\n<blockquote>\n<p><a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a></p>\n</blockquote>\n<p>which is part of Oracle's Java tutorials.</p>\n<p>There are also several books devoted entirely to <em>Swing</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>mainPanel.setLayout(null);\n</code></pre>\n<p>You usually don't need to use a null layout. I believe that <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/flow.html\" rel=\"nofollow noreferrer\">FlowLayout</a> is appropriate for displaying your buttons.</p>\n<p>Also, since Java 8, you can implement <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html\" rel=\"nofollow noreferrer\">ActionListener</a> with a <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">method reference</a>.</p>\n<p>Here is my rewrite of your code which aims to show you several other features of <em>Swing</em>, apart from fixing your problem whereby clicking on any of the buttons does nothing.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.FlowLayout;\nimport java.awt.Image;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.KeyEvent;\nimport java.io.IOException;\nimport java.net.URL;\n\nimport javax.imageio.ImageIO;\nimport javax.swing.BorderFactory;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\n\npublic class HangmanB {\n\n    private void buildAndShowGui() {\n        JFrame frame = new JFrame(&quot;Hangman&quot;);\n        URL url = getClass().getResource(&quot;hangman16.png&quot;);\n        try {\n            Image img = ImageIO.read(url);\n            frame.setIconImage(img);\n        }\n        catch (IOException xIo) {\n            xIo.printStackTrace();\n        }\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.add(createButtonsPanel(), BorderLayout.PAGE_START);\n        frame.setSize(900, 500);\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    private JButton createButton(String text, int mnemonic, ActionListener listener) {\n        JButton b = new JButton(text);\n        b.setPreferredSize(new Dimension(90, 90));\n        b.setMnemonic(mnemonic);\n        b.addActionListener(listener);\n        return b;\n    }\n\n    private JPanel createButtonsPanel() {\n        JPanel panel = new JPanel(new FlowLayout(FlowLayout.LEADING, 20, 5));\n        panel.setBorder(BorderFactory.createEmptyBorder(12, 8, 0, 0));\n        panel.add(createButton(&quot;1&quot;, KeyEvent.VK_1, this::handleButton1));\n        panel.add(createButton(&quot;2&quot;, KeyEvent.VK_2, this::handleButton2));\n        panel.add(createButton(&quot;3&quot;, KeyEvent.VK_3, this::handleButton3));\n        return panel;\n    }\n\n    private void handleButton1(ActionEvent event) {\n        System.out.println(&quot;button 1 was clicked&quot;);\n    }\n\n    private void handleButton2(ActionEvent event) {\n        System.out.println(&quot;button 2 was clicked&quot;);\n    }\n\n    private void handleButton3(ActionEvent event) {\n        System.out.println(&quot;button 3 was clicked&quot;);\n    }\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(() -&gt; new HangmanB().buildAndShowGui());\n    }\n}\n</code></pre>\n<p>Here is a screen capture of the GUI when I run the above code:</p>\n<p><a href=\"https://i.stack.imgur.com/TWE0s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TWE0s.png\" alt=\"screen capture\" /></a></p>\n"}],"owner":{"account_id":27458342,"reputation":1,"user_id":20949375,"display_name":"Bobel Studios"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1673092911,"answer_count":1,"score":-2,"last_activity_date":1673079457,"creation_date":1673062935,"question_id":75037974,"body_markdown":"I&#39;m trying to use the `actionPerformed` method to print a message to the corresponding buttons (in this case `b1`/`b2`/`b3`). I have no idea where exactly in the code the issue lies.\r\n```java\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\n\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\n\r\npublic class B_HangMan implements ActionListener {\r\n    JButton b1;\r\n    JButton b2;\r\n    JButton b3;\r\n\r\n    public static void main(String[] args) {\r\n        JPanel mainPanel = new JPanel();\r\n        JFrame frame1 = new JFrame();\r\n        frame1.setSize(900, 500);\r\n        frame1.setLocation(500, 200);\r\n        frame1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame1.setVisible(true);\r\n        frame1.add(mainPanel);\r\n        mainPanel.setLayout(null);\r\n\r\n        // button 1\r\n        JButton b1 = new JButton(&quot;1&quot;);\r\n        b1.setBounds(20, 20, 90, 90);\r\n        b1.addActionListener(new B_HangMan());\r\n        mainPanel.add(b1);\r\n\r\n        // button 2\r\n        JButton b2 = new JButton(&quot;2&quot;);\r\n        b2.setBounds(130, 20, 90, 90);\r\n        b2.addActionListener(new B_HangMan());\r\n        mainPanel.add(b2);\r\n\r\n        // button 3\r\n        JButton b3 = new JButton(&quot;3&quot;);\r\n        b3.setBounds(240, 20, 90, 90);\r\n        b3.addActionListener(new B_HangMan());\r\n        mainPanel.add(b3);\r\n    }\r\n\r\n    @Override\r\n    public void actionPerformed(ActionEvent e) {\r\n        if (e.getSource() == b1) {\r\n            System.out.println(&quot;button 1 was clicked&quot;);\r\n        }\r\n        if (e.getSource() == b2) {\r\n            System.out.println(&quot;button 2 was clicked&quot;);\r\n        }\r\n        if (e.getSource() == b3) {\r\n            System.out.println(&quot;button 3 was clicked&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\nThe console should display which one was pressed when clicking on the different buttons. Nothing happens instead.","title":"Why are my JButtons not responding when clicked?","body":"<p>I'm trying to use the <code>actionPerformed</code> method to print a message to the corresponding buttons (in this case <code>b1</code>/<code>b2</code>/<code>b3</code>). I have no idea where exactly in the code the issue lies.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\n\npublic class B_HangMan implements ActionListener {\n    JButton b1;\n    JButton b2;\n    JButton b3;\n\n    public static void main(String[] args) {\n        JPanel mainPanel = new JPanel();\n        JFrame frame1 = new JFrame();\n        frame1.setSize(900, 500);\n        frame1.setLocation(500, 200);\n        frame1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame1.setVisible(true);\n        frame1.add(mainPanel);\n        mainPanel.setLayout(null);\n\n        // button 1\n        JButton b1 = new JButton(&quot;1&quot;);\n        b1.setBounds(20, 20, 90, 90);\n        b1.addActionListener(new B_HangMan());\n        mainPanel.add(b1);\n\n        // button 2\n        JButton b2 = new JButton(&quot;2&quot;);\n        b2.setBounds(130, 20, 90, 90);\n        b2.addActionListener(new B_HangMan());\n        mainPanel.add(b2);\n\n        // button 3\n        JButton b3 = new JButton(&quot;3&quot;);\n        b3.setBounds(240, 20, 90, 90);\n        b3.addActionListener(new B_HangMan());\n        mainPanel.add(b3);\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        if (e.getSource() == b1) {\n            System.out.println(&quot;button 1 was clicked&quot;);\n        }\n        if (e.getSource() == b2) {\n            System.out.println(&quot;button 2 was clicked&quot;);\n        }\n        if (e.getSource() == b3) {\n            System.out.println(&quot;button 3 was clicked&quot;);\n        }\n    }\n}\n</code></pre>\n<p>The console should display which one was pressed when clicking on the different buttons. Nothing happens instead.</p>\n"},{"tags":["java","spring","spring-boot","yaml"],"comments":[{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1672994865,"post_id":75028710,"comment_id":132402597,"body_markdown":"you are missing &quot;collie&quot; prefix in your yaml example btw, and try to quote the values: `intervalInMinute: &quot;0.5&quot;`","body":"you are missing &quot;collie&quot; prefix in your yaml example btw, and try to quote the values: <code>intervalInMinute: &quot;0.5&quot;</code>"},{"owner":{"account_id":21208230,"reputation":1,"user_id":15597407,"display_name":"dreamck"},"score":0,"creation_date":1672995148,"post_id":75028710,"comment_id":132402661,"body_markdown":"yes,hh,i just fix it . But i still get this error when i  quote the values.  Reason: For input string: &quot;0.5&quot;","body":"yes,hh,i just fix it . But i still get this error when i  quote the values.  Reason: For input string: &quot;0.5&quot;"},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1672995186,"post_id":75028710,"comment_id":132402667,"body_markdown":"`0.5` != Long, is it?","body":"<code>0.5</code> != Long, is it?"}],"answers":[{"tags":[],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672995242,"creation_date":1672995242,"answer_id":75028778,"question_id":75028710,"body_markdown":"`0.5` is not a `Long`, and can&#39;t be converted. Changing to a `double` should work. ","title":"How accept both long and double in Spring @ConfigurationProperties annotation?","body":"<p><code>0.5</code> is not a <code>Long</code>, and can't be converted. Changing to a <code>double</code> should work.</p>\n"},{"tags":[],"owner":{"account_id":2324765,"reputation":3694,"user_id":2039546,"display_name":"smail Y."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672996768,"creation_date":1672996768,"answer_id":75028993,"question_id":75028710,"body_markdown":"The value `0.5` is an invalid long value. You could parse the double value first:\r\n\r\n```java\r\npublic void setIntervalInMinute(String intervalInMinute) {\r\n    this.intervalInMinute = (long) Double.parseDouble(intervalInMinute);\r\n}\r\n```","title":"How accept both long and double in Spring @ConfigurationProperties annotation?","body":"<p>The value <code>0.5</code> is an invalid long value. You could parse the double value first:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void setIntervalInMinute(String intervalInMinute) {\n    this.intervalInMinute = (long) Double.parseDouble(intervalInMinute);\n}\n</code></pre>\n"}],"owner":{"account_id":21208230,"reputation":1,"user_id":15597407,"display_name":"dreamck"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":259,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1673077834,"creation_date":1672994747,"question_id":75028710,"body_markdown":"Here is my `yaml` file:\r\n\r\n```yml\r\ncollie:\r\n    crontask:\r\n        command: echo ok\r\n        intervalInMinute: 0.5\r\n```\r\n\r\nHere is the code:\r\n\r\n```java\r\n@Configuration\r\n@ConfigurationProperties(prefix = &quot;collie.crontask&quot;)\r\n@Data\r\npublic class CronTaskConfig {\r\n\r\n    private String command;\r\n\r\n    private Long intervalInMinute;\r\n\r\n    public void setIntervalInMinute(String intervalInMinute) {\r\n        this.intervalInMinute = Long.parseLong(intervalInMinute);\r\n    }\r\n}\r\n```\r\nBut I got this error:\r\n\r\n```\r\nFailed to bind properties under &#39;collie.crontask&#39; to com.xx.union.collie.worker.config.CronTaskConfig$$EnhancerBySpringCGLIB$$e4948fd7:\r\n\r\n    Property: collie.crontask.intervalinminute\r\n    Value: 0.5\r\n    Origin: class path resource [application.yaml]:45:23\r\n    Reason: For input string: &quot;0.5&quot;\r\n\r\nAction:\r\n\r\nUpdate your application&#39;s configuration`\r\nand :\r\n org.springframework.boot.context.properties.ConfigurationPropertiesBindException: Error creating bean with name &#39;cronTaskConfig&#39;: Could not bind properties to &#39;CronTaskConfig&#39;\r\n```\r\n\r\nBut when I set `intervalInMinute: 1`, it works.\r\n  \r\nIt looks like the problem is the type of value.\r\n\r\nCan anyone help me to solve this problem?","title":"How accept both long and double in Spring @ConfigurationProperties annotation?","body":"<p>Here is my <code>yaml</code> file:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>collie:\n    crontask:\n        command: echo ok\n        intervalInMinute: 0.5\n</code></pre>\n<p>Here is the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@ConfigurationProperties(prefix = &quot;collie.crontask&quot;)\n@Data\npublic class CronTaskConfig {\n\n    private String command;\n\n    private Long intervalInMinute;\n\n    public void setIntervalInMinute(String intervalInMinute) {\n        this.intervalInMinute = Long.parseLong(intervalInMinute);\n    }\n}\n</code></pre>\n<p>But I got this error:</p>\n<pre><code>Failed to bind properties under 'collie.crontask' to com.xx.union.collie.worker.config.CronTaskConfig$$EnhancerBySpringCGLIB$$e4948fd7:\n\n    Property: collie.crontask.intervalinminute\n    Value: 0.5\n    Origin: class path resource [application.yaml]:45:23\n    Reason: For input string: &quot;0.5&quot;\n\nAction:\n\nUpdate your application's configuration`\nand :\n org.springframework.boot.context.properties.ConfigurationPropertiesBindException: Error creating bean with name 'cronTaskConfig': Could not bind properties to 'CronTaskConfig'\n</code></pre>\n<p>But when I set <code>intervalInMinute: 1</code>, it works.</p>\n<p>It looks like the problem is the type of value.</p>\n<p>Can anyone help me to solve this problem?</p>\n"},{"tags":["java","android","firebase"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1673091607,"post_id":75038790,"comment_id":132422602,"body_markdown":"I think that this [resource](https://medium.com/firebase-tips-tricks/how-to-install-and-use-trigger-email-extension-from-firebase-f6f9763c8088) might help.","body":"I think that this <a href=\"https://medium.com/firebase-tips-tricks/how-to-install-and-use-trigger-email-extension-from-firebase-f6f9763c8088\" rel=\"nofollow noreferrer\">resource</a> might help."},{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1673104431,"post_id":75038790,"comment_id":132425095,"body_markdown":"And this example from Firebase: https://github.com/firebase/functions-samples/tree/main/email-confirmation","body":"And this example from Firebase: <a href=\"https://github.com/firebase/functions-samples/tree/main/email-confirmation\" rel=\"nofollow noreferrer\">github.com/firebase/functions-samples/tree/main/&hellip;</a>"}],"owner":{"account_id":26101556,"reputation":13,"user_id":19796907,"display_name":"AttiL4682"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673077161,"creation_date":1673077161,"question_id":75038790,"body_markdown":"I am trying to make some code to automaticly send an email to my adress if new values from my application were added to firebase database. \r\nIt has to be something like feedback, but google canceled sending emails from android studio applications as an uknown source.\r\nIs there any solution for my problem ? \r\n\r\nAnd sorry for my english ;D\r\n\r\nI tried send email from android studio to email address but it didn&#39;t work.","title":"Send email if new values were added from android app to firebase","body":"<p>I am trying to make some code to automaticly send an email to my adress if new values from my application were added to firebase database.\nIt has to be something like feedback, but google canceled sending emails from android studio applications as an uknown source.\nIs there any solution for my problem ?</p>\n<p>And sorry for my english ;D</p>\n<p>I tried send email from android studio to email address but it didn't work.</p>\n"},{"tags":["java","kotlin","pre-signed-url","gcs"],"owner":{"account_id":2615800,"reputation":317,"user_id":2264863,"accept_rate":100,"display_name":"Pampapathi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673077040,"creation_date":1673077040,"question_id":75038781,"body_markdown":"I have searched enough on the web, but couldn&#39;t find the solution yet.\r\n1. Creating a Signed upload URL with an expiry of 1 hour.\r\n\r\n    ```val blobInfo = BlobInfo.newBuilder(BlobId.of(DEV_BUCKET, objectPath)).setContentType(&quot;application/octet-stream&quot;).build()\r\n        val extensionHeaders: MutableMap&lt;String, String&gt; = HashMap()\r\n        extensionHeaders[&quot;Content-Type&quot;] = &quot;application/octet-stream&quot;\r\n        val url: URL? = storage?.signUrl(\r\n            blobInfo,\r\n            60,\r\n            TimeUnit.MINUTES,\r\n            Storage.SignUrlOption.httpMethod(HttpMethod.PUT),\r\n            Storage.SignUrlOption.withExtHeaders(extensionHeaders),\r\n            Storage.SignUrlOption.withV4Signature()\r\n        )\r\n2. Trying to upload using the signed URL. *As I know, to upload a file using the signed URL we must POST an empty request as shown below*.\r\n\r\n```\r\ncurl -v -X &#39;POST&#39; \\\r\n   -H &#39;content-type: application/octet-stream&#39; \\\r\n   -H &#39;x-goog-resumable:start&#39;  \\\r\n   -d &#39;&#39; \\\r\n   &#39;https://storage.googleapis.com/path/some_jar_file.jar?X-Goog-Algorithm=GOOG4-RSA-SHA256&amp;X-Goog-Credential=sa-p.iam.gserviceaccount.com%2F20230107%2Fauto%2Fstorage%2Fgoog4_request&amp;X-Goog-Date=20230107T071742Z&amp;X-Goog-Expires=3600&amp;X-Goog-SignedHeaders=content-type%3Bhost&amp;X-Goog-Signature=629e30c352a3c241cbe7b37c0d79dba8804c489ace423c43b55ea7e561e02f745b356eb9d7979e0b183870f8683613725d4f67fe4d8fbffa4529a1c433753918b692d033be7ac2f609992e30793570db08dce5250d78e5bef1e7458f56d7ee88c5f502855766cb68047423691ab30aa7a14c1f396d64a08053040925c4e70f58cec78bfba2b4fda11603aa1ee246c02492ee1f8ffc30c767cab944d0d0ffea8c407142c46f8d8be872e467a047b68c718a21134d6dc19b9415dda74c6728b1e70273737122a3a44110308d880bc3ad30cd18aa2ebe324ff5caaa7987b8339fe8fe63189f5acdc7cd11563f5997a5d89f2b1ba2ed6473134d1661ab8bdd624c89&#39;\r\n```\r\n\r\nI am getting below error.\r\n\r\n```\r\n&lt; HTTP/2 403 \r\n&lt; x-guploader-uploadid: ADPycdsLHvii2xdFRxOEJxWwwvRqVW8N6eqrfGFIbQFxASjN3-mAKhLR8t9EAcp66HEQLiEQSiB1fqtBnDeHzQe0yVfkzg\r\n&lt; content-type: application/xml; charset=UTF-8\r\n&lt; content-length: 950\r\n&lt; date: Sat, 07 Jan 2023 07:19:18 GMT\r\n&lt; server: UploadServer\r\n&lt; alt-svc: h3=&quot;:443&quot;; ma=2592000,h3-29=&quot;:443&quot;; ma=2592000,h3-Q050=&quot;:443&quot;; ma=2592000,h3-Q046=&quot;:443&quot;; ma=2592000,h3-Q043=&quot;:443&quot;; ma=2592000,quic=&quot;:443&quot;; ma=2592000; v=&quot;46,43&quot;\r\n&lt; \r\n* TLSv1.2 (IN), TLS header, Supplemental data (23):\r\n&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;&lt;Error&gt;&lt;Code&gt;SignatureDoesNotMatch&lt;/Code&gt;&lt;Message&gt;The request signature we calculated does not match the signature you provided. Check your Google secret key and signing method.&lt;/Message&gt;&lt;StringToSign&gt;GOOG4-RSA-SHA256\r\n20230107T071742Z\r\n20230107/auto/storage/goog4_request\r\n746ce8eb1510cb4496849f391a89f924ad83720ac1b3e96a9d743c4b2fbdc818&lt;/StringToSign&gt;&lt;UnsignedSensitiveHeaders&gt;x-goog-resumable&lt;/UnsignedSensitiveHeaders&gt;&lt;CanonicalRequest&gt;POST\r\n/path/some_jar_file.jar\r\nX-Goog-Algorithm=GOOG4-RSA-SHA256&amp;amp;X-Goog-Credential=sa-p.iam.gserviceaccount.com%2F20230107%2Fauto%2Fstorage%2Fgoog4_request&amp;amp;X-Goog-Date=20230107T071742Z&amp;amp;X-Goog-Expires=3600&amp;amp;X-Goog-SignedHeaders=content-type%3Bhost\r\ncontent-type:application/octet-stream\r\nhost:storage.googleapis.com\r\n\r\ncontent-type;host\r\n* TLSv1.2 (IN), TLS header, Supplemental data (23):\r\n* Connection #0 to host storage.googleapis.com left intact\r\nUNSIGNED-PAYLOAD&lt;/CanonicalRequest&gt;&lt;/Error&gt;\r\n```\r\n\r\nPlease help.\r\n\r\n\r\n \r\n","title":"Not able to upload a file on GCS using signed URL using kotlin","body":"<p>I have searched enough on the web, but couldn't find the solution yet.</p>\n<ol>\n<li><p>Creating a Signed upload URL with an expiry of 1 hour.</p>\n<pre><code>    val extensionHeaders: MutableMap&lt;String, String&gt; = HashMap()\n    extensionHeaders[&quot;Content-Type&quot;] = &quot;application/octet-stream&quot;\n    val url: URL? = storage?.signUrl(\n        blobInfo,\n        60,\n        TimeUnit.MINUTES,\n        Storage.SignUrlOption.httpMethod(HttpMethod.PUT),\n        Storage.SignUrlOption.withExtHeaders(extensionHeaders),\n        Storage.SignUrlOption.withV4Signature()\n    )\n</code></pre>\n</li>\n<li><p>Trying to upload using the signed URL. <em>As I know, to upload a file using the signed URL we must POST an empty request as shown below</em>.</p>\n</li>\n</ol>\n<pre><code>curl -v -X 'POST' \\\n   -H 'content-type: application/octet-stream' \\\n   -H 'x-goog-resumable:start'  \\\n   -d '' \\\n   'https://storage.googleapis.com/path/some_jar_file.jar?X-Goog-Algorithm=GOOG4-RSA-SHA256&amp;X-Goog-Credential=sa-p.iam.gserviceaccount.com%2F20230107%2Fauto%2Fstorage%2Fgoog4_request&amp;X-Goog-Date=20230107T071742Z&amp;X-Goog-Expires=3600&amp;X-Goog-SignedHeaders=content-type%3Bhost&amp;X-Goog-Signature=629e30c352a3c241cbe7b37c0d79dba8804c489ace423c43b55ea7e561e02f745b356eb9d7979e0b183870f8683613725d4f67fe4d8fbffa4529a1c433753918b692d033be7ac2f609992e30793570db08dce5250d78e5bef1e7458f56d7ee88c5f502855766cb68047423691ab30aa7a14c1f396d64a08053040925c4e70f58cec78bfba2b4fda11603aa1ee246c02492ee1f8ffc30c767cab944d0d0ffea8c407142c46f8d8be872e467a047b68c718a21134d6dc19b9415dda74c6728b1e70273737122a3a44110308d880bc3ad30cd18aa2ebe324ff5caaa7987b8339fe8fe63189f5acdc7cd11563f5997a5d89f2b1ba2ed6473134d1661ab8bdd624c89'\n</code></pre>\n<p>I am getting below error.</p>\n<pre><code>&lt; HTTP/2 403 \n&lt; x-guploader-uploadid: ADPycdsLHvii2xdFRxOEJxWwwvRqVW8N6eqrfGFIbQFxASjN3-mAKhLR8t9EAcp66HEQLiEQSiB1fqtBnDeHzQe0yVfkzg\n&lt; content-type: application/xml; charset=UTF-8\n&lt; content-length: 950\n&lt; date: Sat, 07 Jan 2023 07:19:18 GMT\n&lt; server: UploadServer\n&lt; alt-svc: h3=&quot;:443&quot;; ma=2592000,h3-29=&quot;:443&quot;; ma=2592000,h3-Q050=&quot;:443&quot;; ma=2592000,h3-Q046=&quot;:443&quot;; ma=2592000,h3-Q043=&quot;:443&quot;; ma=2592000,quic=&quot;:443&quot;; ma=2592000; v=&quot;46,43&quot;\n&lt; \n* TLSv1.2 (IN), TLS header, Supplemental data (23):\n&lt;?xml version='1.0' encoding='UTF-8'?&gt;&lt;Error&gt;&lt;Code&gt;SignatureDoesNotMatch&lt;/Code&gt;&lt;Message&gt;The request signature we calculated does not match the signature you provided. Check your Google secret key and signing method.&lt;/Message&gt;&lt;StringToSign&gt;GOOG4-RSA-SHA256\n20230107T071742Z\n20230107/auto/storage/goog4_request\n746ce8eb1510cb4496849f391a89f924ad83720ac1b3e96a9d743c4b2fbdc818&lt;/StringToSign&gt;&lt;UnsignedSensitiveHeaders&gt;x-goog-resumable&lt;/UnsignedSensitiveHeaders&gt;&lt;CanonicalRequest&gt;POST\n/path/some_jar_file.jar\nX-Goog-Algorithm=GOOG4-RSA-SHA256&amp;amp;X-Goog-Credential=sa-p.iam.gserviceaccount.com%2F20230107%2Fauto%2Fstorage%2Fgoog4_request&amp;amp;X-Goog-Date=20230107T071742Z&amp;amp;X-Goog-Expires=3600&amp;amp;X-Goog-SignedHeaders=content-type%3Bhost\ncontent-type:application/octet-stream\nhost:storage.googleapis.com\n\ncontent-type;host\n* TLSv1.2 (IN), TLS header, Supplemental data (23):\n* Connection #0 to host storage.googleapis.com left intact\nUNSIGNED-PAYLOAD&lt;/CanonicalRequest&gt;&lt;/Error&gt;\n</code></pre>\n<p>Please help.</p>\n"},{"tags":["java","apache-poi"],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673076738,"creation_date":1673076738,"answer_id":75038760,"question_id":75038162,"body_markdown":"Seems [void setFillForegroundColor(Color color)](https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/CellStyle.html#setFillForegroundColor-org.apache.poi.ss.usermodel.Color-) does not work properly for `HSSFColor`.\r\n\r\nIn the binary Excel file format (`*.xls`, `HSSF`) all colors need to be indexed in a color palette. So a custom color needs overwriting a default palette color. And to set the fill foreground color, the index should be used rather than the color itself. So [void setFillForegroundColor(short bg)](https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/CellStyle.html#setFillForegroundColor-short-) should be used for `HSSF`.\r\n\r\nFollowing code works to set custom fill foreground color for `XSSF` as well as for `HSSF`. For `HSSF` it overwrites the `HSSFColor.HSSFColorPredefined.LIME` color in palette.\r\n\r\n    import java.io.FileOutputStream;\r\n    \r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.hssf.usermodel.*;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    import org.apache.poi.hssf.util.HSSFColor;\r\n    \r\n    public class CreateExcelCellFillCustomColor {\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      byte[] rgb = new byte[]{(byte) 60, (byte) 120, (byte) 216};\r\n    \r\n      Workbook workbook = new HSSFWorkbook(); String filePath = &quot;./Excel.xls&quot;;\r\n      //Workbook workbook = new XSSFWorkbook(); String filePath = &quot;./Excel.xlsx&quot;;\r\n    \r\n      CellStyle cellStyle = workbook.createCellStyle();\r\n      cellStyle.setFillPattern(FillPatternType.SOLID_FOREGROUND);\r\n      if (workbook instanceof XSSFWorkbook) {\r\n       XSSFColor color = new XSSFColor(rgb, null);\r\n       cellStyle.setFillForegroundColor(color);\r\n      } else if (workbook instanceof HSSFWorkbook) {\r\n       HSSFWorkbook hssfworkbook = (HSSFWorkbook)workbook;\r\n       HSSFPalette palette = hssfworkbook.getCustomPalette();\r\n       palette.setColorAtIndex(HSSFColor.HSSFColorPredefined.LIME.getIndex(), rgb[0], rgb[1], rgb[2]);\r\n       HSSFColor color = palette.findSimilarColor(rgb[0], rgb[1], rgb[2]);\r\n       //cellStyle.setFillForegroundColor(color); // does not work correctly for HSSF\r\n       cellStyle.setFillForegroundColor(color.getIndex());   \r\n      }\r\n      \r\n      Sheet sheet = workbook.createSheet();\r\n      Cell cell = sheet.createRow(0).createCell(0);\r\n      cell.setCellStyle(cellStyle);\r\n      cell.setCellValue(&quot;test&quot;);\r\n    \r\n      FileOutputStream out = new FileOutputStream(filePath);\r\n      workbook.write(out);\r\n      out.close();\r\n      workbook.close();\r\n    \r\n     }\r\n    \r\n    }\r\n\r\n","title":"How to set a custom color to a HSSCell using POI?","body":"<p>Seems <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/CellStyle.html#setFillForegroundColor-org.apache.poi.ss.usermodel.Color-\" rel=\"nofollow noreferrer\">void setFillForegroundColor(Color color)</a> does not work properly for <code>HSSFColor</code>.</p>\n<p>In the binary Excel file format (<code>*.xls</code>, <code>HSSF</code>) all colors need to be indexed in a color palette. So a custom color needs overwriting a default palette color. And to set the fill foreground color, the index should be used rather than the color itself. So <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/CellStyle.html#setFillForegroundColor-short-\" rel=\"nofollow noreferrer\">void setFillForegroundColor(short bg)</a> should be used for <code>HSSF</code>.</p>\n<p>Following code works to set custom fill foreground color for <code>XSSF</code> as well as for <code>HSSF</code>. For <code>HSSF</code> it overwrites the <code>HSSFColor.HSSFColorPredefined.LIME</code> color in palette.</p>\n<pre><code>import java.io.FileOutputStream;\n\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.hssf.usermodel.*;\nimport org.apache.poi.xssf.usermodel.*;\nimport org.apache.poi.hssf.util.HSSFColor;\n\npublic class CreateExcelCellFillCustomColor {\n\n public static void main(String[] args) throws Exception {\n\n  byte[] rgb = new byte[]{(byte) 60, (byte) 120, (byte) 216};\n\n  Workbook workbook = new HSSFWorkbook(); String filePath = &quot;./Excel.xls&quot;;\n  //Workbook workbook = new XSSFWorkbook(); String filePath = &quot;./Excel.xlsx&quot;;\n\n  CellStyle cellStyle = workbook.createCellStyle();\n  cellStyle.setFillPattern(FillPatternType.SOLID_FOREGROUND);\n  if (workbook instanceof XSSFWorkbook) {\n   XSSFColor color = new XSSFColor(rgb, null);\n   cellStyle.setFillForegroundColor(color);\n  } else if (workbook instanceof HSSFWorkbook) {\n   HSSFWorkbook hssfworkbook = (HSSFWorkbook)workbook;\n   HSSFPalette palette = hssfworkbook.getCustomPalette();\n   palette.setColorAtIndex(HSSFColor.HSSFColorPredefined.LIME.getIndex(), rgb[0], rgb[1], rgb[2]);\n   HSSFColor color = palette.findSimilarColor(rgb[0], rgb[1], rgb[2]);\n   //cellStyle.setFillForegroundColor(color); // does not work correctly for HSSF\n   cellStyle.setFillForegroundColor(color.getIndex());   \n  }\n  \n  Sheet sheet = workbook.createSheet();\n  Cell cell = sheet.createRow(0).createCell(0);\n  cell.setCellStyle(cellStyle);\n  cell.setCellValue(&quot;test&quot;);\n\n  FileOutputStream out = new FileOutputStream(filePath);\n  workbook.write(out);\n  out.close();\n  workbook.close();\n\n }\n\n}\n</code></pre>\n"}],"owner":{"account_id":405356,"reputation":31601,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":586,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75038760,"answer_count":1,"score":1,"last_activity_date":1673076738,"creation_date":1673066610,"question_id":75038162,"body_markdown":"I would like to set a custom color to a `CellStyle` in POI, but it doesn&#39;t seem to be getting applied.\r\n\r\nI have the following code:\r\n\r\n```\r\nHSSFWorkbook workBook = new HSSFWorkbook();\r\nHSSFSheet sheet = workBook.createSheet(&quot;Bank Statement&quot;);\r\n\r\nHSSFPalette palette = workBook.getCustomPalette();\r\npalette.setColorAtIndex((short) 1, (byte) 60, (byte) 120, (byte) 216);\r\n\r\nHSSFColor color = palette.findSimilarColor(60, 120, 216);\r\n\r\nCellStyle cellStyleHeader = workBook.createCellStyle();\r\ncellStyleHeader.setFillPattern(FillPatternType.SOLID_FOREGROUND);\r\ncellStyleHeader.setFillForegroundColor(color);\r\ncellStyleHeader.setFont(createHeaderFont(workBook));\r\n\r\nHSSFCell cell = row.createCell(cellIndex);\r\ncell.setCellType(CellType.STRING);\r\ncell.setCellValue(&quot;Date&quot;);\r\ncell.setCellStyle(style);\r\n```\r\n\r\nNo background color is being applied. The color is white. The value of `color` is non null, but is not the same color (when run via a debugger):\r\n[![enter image description here][1]][1]\r\n\r\nWhat&#39;s the correct way to set a custom color?\r\n\r\n  [1]: https://i.stack.imgur.com/ti0qD.png","title":"How to set a custom color to a HSSCell using POI?","body":"<p>I would like to set a custom color to a <code>CellStyle</code> in POI, but it doesn't seem to be getting applied.</p>\n<p>I have the following code:</p>\n<pre><code>HSSFWorkbook workBook = new HSSFWorkbook();\nHSSFSheet sheet = workBook.createSheet(&quot;Bank Statement&quot;);\n\nHSSFPalette palette = workBook.getCustomPalette();\npalette.setColorAtIndex((short) 1, (byte) 60, (byte) 120, (byte) 216);\n\nHSSFColor color = palette.findSimilarColor(60, 120, 216);\n\nCellStyle cellStyleHeader = workBook.createCellStyle();\ncellStyleHeader.setFillPattern(FillPatternType.SOLID_FOREGROUND);\ncellStyleHeader.setFillForegroundColor(color);\ncellStyleHeader.setFont(createHeaderFont(workBook));\n\nHSSFCell cell = row.createCell(cellIndex);\ncell.setCellType(CellType.STRING);\ncell.setCellValue(&quot;Date&quot;);\ncell.setCellStyle(style);\n</code></pre>\n<p>No background color is being applied. The color is white. The value of <code>color</code> is non null, but is not the same color (when run via a debugger):\n<a href=\"https://i.stack.imgur.com/ti0qD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ti0qD.png\" alt=\"enter image description here\" /></a></p>\n<p>What's the correct way to set a custom color?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5728914,"reputation":533,"user_id":4525068,"accept_rate":25,"display_name":"VLEFF"},"score":2,"creation_date":1466678648,"post_id":37989317,"comment_id":63422478,"body_markdown":"put all the BigInteger in a list, and then loop for adding them all","body":"put all the BigInteger in a list, and then loop for adding them all"},{"owner":{"account_id":6979720,"reputation":5387,"user_id":5353128,"accept_rate":73,"display_name":"Kaushal28"},"score":0,"creation_date":1466678717,"post_id":37989317,"comment_id":63422516,"body_markdown":"make an array of BigDecimals and add them","body":"make an array of BigDecimals and add them"},{"owner":{"account_id":290959,"reputation":865,"user_id":592817,"display_name":"tsohr"},"score":0,"creation_date":1466678723,"post_id":37989317,"comment_id":63422518,"body_markdown":"looking for this one? http://stackoverflow.com/a/1846918/592817","body":"looking for this one? <a href=\"http://stackoverflow.com/a/1846918/592817\">stackoverflow.com/a/1846918/592817</a>"},{"owner":{"account_id":5553664,"reputation":794,"user_id":4405881,"display_name":"saml"},"score":1,"creation_date":1466678757,"post_id":37989317,"comment_id":63422546,"body_markdown":"You could use the streams API?  Pass them in as a list, filter for null and then reduce","body":"You could use the streams API?  Pass them in as a list, filter for null and then reduce"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1466678868,"post_id":37989317,"comment_id":63422631,"body_markdown":"Make sure their values are not null by intializing them as zero first?","body":"Make sure their values are not null by intializing them as zero first?"}],"answers":[{"tags":[],"owner":{"account_id":8507114,"reputation":7828,"user_id":6378311,"display_name":"SCouto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466678809,"creation_date":1466678809,"answer_id":37989433,"question_id":37989317,"body_markdown":"If you have a fixed (and little) amount of numbers you can do as follows:\r\n\r\n                total = total.add(item1 ==null ? BigDecimal.ZERO : item1).add(item2 ==null ? BigDecimal.ZERO : item2).add(item3 ==null ? BigDecimal.ZERO : item3);\r\n\r\n\r\nAdding 0 if the item is null and the item itself otherwise. IF you have a variable amount of items, then you need to iterate over them in a array or something like this:\r\n\r\n    for (BigDecimal current : myBigDecimalArray){\r\n       total = total.add(current ==null ? BigDecimal.ZERO : current );\r\n    }","title":"How to sum BigDecimal properties in java","body":"<p>If you have a fixed (and little) amount of numbers you can do as follows:</p>\n\n<pre><code>            total = total.add(item1 ==null ? BigDecimal.ZERO : item1).add(item2 ==null ? BigDecimal.ZERO : item2).add(item3 ==null ? BigDecimal.ZERO : item3);\n</code></pre>\n\n<p>Adding 0 if the item is null and the item itself otherwise. IF you have a variable amount of items, then you need to iterate over them in a array or something like this:</p>\n\n<pre><code>for (BigDecimal current : myBigDecimalArray){\n   total = total.add(current ==null ? BigDecimal.ZERO : current );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":947184,"reputation":48994,"user_id":974186,"accept_rate":79,"display_name":"Ren&#233; Link"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1466679067,"creation_date":1466679067,"answer_id":37989511,"question_id":37989317,"body_markdown":"Use a `List&lt;BigDecimal&gt;`\r\n\r\n    public BigDecimal getTotal(){\r\n        List&lt;BigDecimal&gt; values =  Arrays.asList(item1, item2, item3, item4, item5)\r\n\r\n        BigDecimal total = BigDecimal.ZERO;\r\n        for (BigDecimal value : values) {\r\n            if(value != null) {\r\n                total = total.add(value);\r\n            }\r\n        }\r\n        return total;\r\n    }","title":"How to sum BigDecimal properties in java","body":"<p>Use a <code>List&lt;BigDecimal&gt;</code></p>\n\n<pre><code>public BigDecimal getTotal(){\n    List&lt;BigDecimal&gt; values =  Arrays.asList(item1, item2, item3, item4, item5)\n\n    BigDecimal total = BigDecimal.ZERO;\n    for (BigDecimal value : values) {\n        if(value != null) {\n            total = total.add(value);\n        }\n    }\n    return total;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1300126,"reputation":3092,"user_id":1250229,"display_name":"Mifmif"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1467039439,"creation_date":1466679187,"answer_id":37989548,"question_id":37989317,"body_markdown":"You can use a loop to make your code simple : \r\n \r\n\r\n    import java.util.Arrays;\r\n    \r\n    ...\r\n    \r\n    public BigDecimal getTotal(){\r\n       BigDecimal total = BigDecimal.ZERO; \r\n       for(BigDecimal bd: Arrays.asList(item1,item2,item3,item4,item5)){\r\n            if(null != bd){\r\n                total =total .add(bd);\r\n               }\r\n    \t}\r\n    }\r\n     ","title":"How to sum BigDecimal properties in java","body":"<p>You can use a loop to make your code simple : </p>\n\n<pre><code>import java.util.Arrays;\n\n...\n\npublic BigDecimal getTotal(){\n   BigDecimal total = BigDecimal.ZERO; \n   for(BigDecimal bd: Arrays.asList(item1,item2,item3,item4,item5)){\n        if(null != bd){\n            total =total .add(bd);\n           }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":34247,"reputation":1973,"user_id":96617,"accept_rate":78,"display_name":"Lluis Martinez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637684494,"creation_date":1637684494,"answer_id":70084323,"question_id":37989317,"body_markdown":"If you don&#39;t mind using reflection:\r\n\r\n    public static BigDecimal sum(Object instance, String... fields) {\r\n    \tBigDecimal total = BigDecimal.ZERO;\r\n    \tfor (String field : fields) {\r\n    \t\tBigDecimal value = getProperty(instance, field);\r\n    \t\tif (value != null) {\r\n    \t\t\ttotal = total.add(value);\r\n    \t\t}\r\n    \t}\r\n    \treturn total;\r\n    }\r\n\r\nSample:\r\n\r\n    \tannex.setOrTot(ReflectionUtils.sum(annex, &quot;orEstadoOrg&quot;, &quot;orSs&quot;, &quot;orCcaa&quot;, &quot;orCorpLoc&quot;, &quot;orResto&quot;));\r\n    \tannex.setIdpTot(ReflectionUtils.sum(annex, &quot;idpEstadoOrg&quot;, &quot;idpSs&quot;, &quot;idpCcaa&quot;, &quot;idpCorpLoc&quot;, &quot;idpResto&quot;));\r\n    \tannex.setDrTot(ReflectionUtils.sum(annex, &quot;drEstadoOrg&quot;, &quot;drSs&quot;, &quot;drCcaa&quot;, &quot;drCorPloc&quot;, &quot;drResto&quot;));\r\n    \tannex.setIdcTot(ReflectionUtils.sum(annex, &quot;idcEstadoOrg&quot;, &quot;idcSS&quot;, &quot;idcCcaa&quot;, &quot;idcCorPloc&quot;, &quot;idCresto&quot;));\r\n\r\n","title":"How to sum BigDecimal properties in java","body":"<p>If you don't mind using reflection:</p>\n<pre><code>public static BigDecimal sum(Object instance, String... fields) {\n    BigDecimal total = BigDecimal.ZERO;\n    for (String field : fields) {\n        BigDecimal value = getProperty(instance, field);\n        if (value != null) {\n            total = total.add(value);\n        }\n    }\n    return total;\n}\n</code></pre>\n<p>Sample:</p>\n<pre><code>    annex.setOrTot(ReflectionUtils.sum(annex, &quot;orEstadoOrg&quot;, &quot;orSs&quot;, &quot;orCcaa&quot;, &quot;orCorpLoc&quot;, &quot;orResto&quot;));\n    annex.setIdpTot(ReflectionUtils.sum(annex, &quot;idpEstadoOrg&quot;, &quot;idpSs&quot;, &quot;idpCcaa&quot;, &quot;idpCorpLoc&quot;, &quot;idpResto&quot;));\n    annex.setDrTot(ReflectionUtils.sum(annex, &quot;drEstadoOrg&quot;, &quot;drSs&quot;, &quot;drCcaa&quot;, &quot;drCorPloc&quot;, &quot;drResto&quot;));\n    annex.setIdcTot(ReflectionUtils.sum(annex, &quot;idcEstadoOrg&quot;, &quot;idcSS&quot;, &quot;idcCcaa&quot;, &quot;idcCorPloc&quot;, &quot;idCresto&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4272837,"reputation":11,"user_id":3494268,"display_name":"suxiaolin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673076338,"creation_date":1673076338,"answer_id":75038732,"question_id":37989317,"body_markdown":"java 8+, could use stream api\r\n\r\n    BigDecimal total = itemList.stream().reduce(BigDecimal.ZERO, BigDecimal::add);\r\n\r\n","title":"How to sum BigDecimal properties in java","body":"<p>java 8+, could use stream api</p>\n<pre><code>BigDecimal total = itemList.stream().reduce(BigDecimal.ZERO, BigDecimal::add);\n</code></pre>\n"}],"owner":{"account_id":5512449,"reputation":507,"user_id":4378304,"accept_rate":33,"display_name":"phani"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12339,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1673076338,"creation_date":1466678492,"question_id":37989317,"body_markdown":"Let&#39;s get a simple example:\r\n\r\n     Class Foo{\r\n         private BigDecimal item1;\r\n         private BigDecimal item2;\r\n         private BigDecimal item3;\r\n         private BigDecimal item4;\r\n         private BigDecimal item5;\r\n    //setters and getters\r\n       public BigDecimal getTotal(){\r\n           BigDecimal total = BigDecimal.ZERO;\r\n    \t\tif(null != item1){\r\n    \t\t\ttotal =total .add(item1);\r\n    \t\t   }\r\n    \t\tif(null != item2){\r\n    \t\t\ttotal =total .add(item2);\r\n    \t\t   }\r\n              ...\r\n              ...\r\n    }\r\n        }\r\n\r\nI am summing in entity level. this is correct way or not?\r\n\r\ncan any one give me better code for getting total Value ","title":"How to sum BigDecimal properties in java","body":"<p>Let's get a simple example:</p>\n\n<pre><code> Class Foo{\n     private BigDecimal item1;\n     private BigDecimal item2;\n     private BigDecimal item3;\n     private BigDecimal item4;\n     private BigDecimal item5;\n//setters and getters\n   public BigDecimal getTotal(){\n       BigDecimal total = BigDecimal.ZERO;\n        if(null != item1){\n            total =total .add(item1);\n           }\n        if(null != item2){\n            total =total .add(item2);\n           }\n          ...\n          ...\n}\n    }\n</code></pre>\n\n<p>I am summing in entity level. this is correct way or not?</p>\n\n<p>can any one give me better code for getting total Value </p>\n"},{"tags":["java","netbeans","collision"],"comments":[{"owner":{"account_id":24301499,"reputation":24385,"user_id":18244921,"display_name":"katniss"},"score":3,"creation_date":1673037507,"post_id":75035868,"comment_id":132415414,"body_markdown":"java !== javascript - tag your questions appropriately so they go to the right people.","body":"java !== javascript - tag your questions appropriately so they go to the right people."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1673054981,"post_id":75035868,"comment_id":132418675,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":2322191,"reputation":141,"user_id":2037608,"accept_rate":100,"display_name":"gemorra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1673076291,"creation_date":1673045266,"answer_id":75036792,"question_id":75035868,"body_markdown":"I will try to answer in a way to let you find your way to implement what you want. There are several frameworks out there which will help you with this and as you are new to programming there are a lot of things you could change/do better. But I will ignore these things.\r\n\r\nI think your are trying to check if one 5x5 bullet intersects with another 5x5 bullet.\r\n\r\nTo make it easy let us asume your **bullets are squares**:\r\n\r\nIn your hitByBullet you should check your square centers (i asume that are x,y of your bullets) distance in both dimensions:\r\n\r\nSth. like this should check the collision:\r\n\r\n\r\n    if(Math.abs(bullets.get(i).getY() - bulletsEnemy.get(j).getY()) &lt; 5 &amp;&amp; \r\n        Math.abs(bullets.get(i).getX() - bulletsEnemy.get(j).getX()) &lt; 5) { \r\n           return i;\r\n    }\r\n\r\nDepending of the size of your bullets you need to change the distance check ( &lt;=5). If your bullets have a size of 5 px it should be &lt; 10. If your bullets are 10x10 you should check against &lt; 20 ...\r\n\r\n\r\nRegarding a more realistic scenario, that your **bullets are circles** (e.g. resulting of a 5x5 square px or a radius r=5):\r\n\r\n\r\nYou need to check if the distance between your two bullet centers is smaller than the bullet radius * 2.\r\n\r\nThat will bring you to use the theorem of pythagoras:\r\n\r\n[![theorem of pythagoras][1]][1]\r\n\r\n\r\n[https://en.wikipedia.org/wiki/Pythagorean_theorem][2]\r\n\r\nThe distance between your bullet centers is c. a is the distance in dimensional x and b the distance in dimensional y. You don&#39;t need to take care about negative dimensional values cause you need pow them by 2 which will always give you a positive value.\r\n\r\nTo check for collision you should calculate the distance c as follows:\r\n\r\nc = SquareRootOf(a^2+b^2)\r\n\r\n    Math.sqrt(Math.pow(bullets.get(i).getX() - bulletsEnemy.get(j).getX()),2) + Math.pow(bullets.get(i).getY() - bulletsEnemy.get(j).getY(),2)) &lt; 10\r\n\r\n\r\nI think you should read basics about collision detection and geometry. Just two possible points of information:\r\n\r\nAn easy to start example with code:\r\n\r\n[https://zetcode.com/javagames/collision/][3]\r\n\r\nCircle intersection:\r\n\r\n[https://www.geeksforgeeks.org/check-two-given-circles-touch-intersect/][4]\r\n\r\n\r\nRegarding **the removal of the bullets** I asume you have some kind of game loop in which you frequently draw the bullets and calculate the collision (call the bulletsHit method):\r\n\r\nI will make an assumption to make things easier: The movement speed of your bullets is not faster than one pixel per loop. Otherwise I think you need to take care of your loop circle time and calculate the positions of all elements and also take care about bullets that won&#39;t intersect in one loop circle because they could have passed by from one loop circle to the next loop circle.  I&#39;m not familiar with game dev, so maybe there are more things to cover.\r\n\r\nRegarding this you should change things:\r\n\r\n 1. The method hitByBullet() will only return one collision per call.\r\n You could store your collidedBullets in two sets and after removing them from your bullets and bulletsEnemy list clear these temporary sets. \r\n\r\n 2. I don&#39;t understand what you are doing with &quot;this&quot; and your result of\r\n    hitByBullet.\r\n\r\n \r\nI would do it like this\r\n\r\n    public void hitByBullet(){\r\n      for(int i=0; i&lt;bullets.size(); i++){\r\n       for(int j= 0;j&lt; bulletsEnemy.size(); j++){\r\n          if( Math.sqrt(Math.pow(bullets.get(i).getX() - bulletsEnemy.get(j).getX()),2) + Math.pow(bullets.get(i).getY() - bulletsEnemy.get(j).getY(),2)) &lt; 10){ \r\n             bulletsToDelete.add(bullets.get(i));\r\n             bulletsEnemyToDelete.add(bulletsEnemy.get(j));\r\n           }\r\n         }\r\n       }\r\n    }\r\n\r\n    public boolean bulletsHit(){\r\n       hitByBullet();\r\n       bulletsToDelete.forEach(bullet -&gt; bullets.remove(bullet);\r\n       bulletsEnemyToDelete.forEach(bullet -&gt; bulletsEnemy.remove(bullet);\r\n       boolean bulletsHit = !bulletsToDelete.isEmpty();\r\n       bulletsToDelete.clear();\r\n       bulletsEnemyToDelete.clear();\r\n       return bulletsHit;\r\n    }\r\n    \r\n\r\nAs I mentioned before there are a lots of things you should improve:\r\n\r\n - general structure of your code\r\n - naming of your method (e.g. bulletsHit sounds like only checking if bullets are hit but you are also removing them)\r\n - double checking of bullets\r\n\r\nGreetings\r\n   \r\n  [1]: https://i.stack.imgur.com/cZQWb.png\r\n  [2]: https://en.wikipedia.org/wiki/Pythagorean_theorem\r\n  [3]: https://zetcode.com/javagames/collision/\r\n  [4]: https://www.geeksforgeeks.org/check-two-given-circles-touch-intersect/\r\n\r\n","title":"How do you make sure the 2 balls are removed after the collision?","body":"<p>I will try to answer in a way to let you find your way to implement what you want. There are several frameworks out there which will help you with this and as you are new to programming there are a lot of things you could change/do better. But I will ignore these things.</p>\n<p>I think your are trying to check if one 5x5 bullet intersects with another 5x5 bullet.</p>\n<p>To make it easy let us asume your <strong>bullets are squares</strong>:</p>\n<p>In your hitByBullet you should check your square centers (i asume that are x,y of your bullets) distance in both dimensions:</p>\n<p>Sth. like this should check the collision:</p>\n<pre><code>if(Math.abs(bullets.get(i).getY() - bulletsEnemy.get(j).getY()) &lt; 5 &amp;&amp; \n    Math.abs(bullets.get(i).getX() - bulletsEnemy.get(j).getX()) &lt; 5) { \n       return i;\n}\n</code></pre>\n<p>Depending of the size of your bullets you need to change the distance check ( &lt;=5). If your bullets have a size of 5 px it should be &lt; 10. If your bullets are 10x10 you should check against &lt; 20 ...</p>\n<p>Regarding a more realistic scenario, that your <strong>bullets are circles</strong> (e.g. resulting of a 5x5 square px or a radius r=5):</p>\n<p>You need to check if the distance between your two bullet centers is smaller than the bullet radius * 2.</p>\n<p>That will bring you to use the theorem of pythagoras:</p>\n<p><a href=\"https://i.stack.imgur.com/cZQWb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cZQWb.png\" alt=\"theorem of pythagoras\" /></a></p>\n<p><a href=\"https://en.wikipedia.org/wiki/Pythagorean_theorem\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Pythagorean_theorem</a></p>\n<p>The distance between your bullet centers is c. a is the distance in dimensional x and b the distance in dimensional y. You don't need to take care about negative dimensional values cause you need pow them by 2 which will always give you a positive value.</p>\n<p>To check for collision you should calculate the distance c as follows:</p>\n<p>c = SquareRootOf(a^2+b^2)</p>\n<pre><code>Math.sqrt(Math.pow(bullets.get(i).getX() - bulletsEnemy.get(j).getX()),2) + Math.pow(bullets.get(i).getY() - bulletsEnemy.get(j).getY(),2)) &lt; 10\n</code></pre>\n<p>I think you should read basics about collision detection and geometry. Just two possible points of information:</p>\n<p>An easy to start example with code:</p>\n<p><a href=\"https://zetcode.com/javagames/collision/\" rel=\"nofollow noreferrer\">https://zetcode.com/javagames/collision/</a></p>\n<p>Circle intersection:</p>\n<p><a href=\"https://www.geeksforgeeks.org/check-two-given-circles-touch-intersect/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/check-two-given-circles-touch-intersect/</a></p>\n<p>Regarding <strong>the removal of the bullets</strong> I asume you have some kind of game loop in which you frequently draw the bullets and calculate the collision (call the bulletsHit method):</p>\n<p>I will make an assumption to make things easier: The movement speed of your bullets is not faster than one pixel per loop. Otherwise I think you need to take care of your loop circle time and calculate the positions of all elements and also take care about bullets that won't intersect in one loop circle because they could have passed by from one loop circle to the next loop circle.  I'm not familiar with game dev, so maybe there are more things to cover.</p>\n<p>Regarding this you should change things:</p>\n<ol>\n<li><p>The method hitByBullet() will only return one collision per call.\nYou could store your collidedBullets in two sets and after removing them from your bullets and bulletsEnemy list clear these temporary sets.</p>\n</li>\n<li><p>I don't understand what you are doing with &quot;this&quot; and your result of\nhitByBullet.</p>\n</li>\n</ol>\n<p>I would do it like this</p>\n<pre><code>public void hitByBullet(){\n  for(int i=0; i&lt;bullets.size(); i++){\n   for(int j= 0;j&lt; bulletsEnemy.size(); j++){\n      if( Math.sqrt(Math.pow(bullets.get(i).getX() - bulletsEnemy.get(j).getX()),2) + Math.pow(bullets.get(i).getY() - bulletsEnemy.get(j).getY(),2)) &lt; 10){ \n         bulletsToDelete.add(bullets.get(i));\n         bulletsEnemyToDelete.add(bulletsEnemy.get(j));\n       }\n     }\n   }\n}\n\npublic boolean bulletsHit(){\n   hitByBullet();\n   bulletsToDelete.forEach(bullet -&gt; bullets.remove(bullet);\n   bulletsEnemyToDelete.forEach(bullet -&gt; bulletsEnemy.remove(bullet);\n   boolean bulletsHit = !bulletsToDelete.isEmpty();\n   bulletsToDelete.clear();\n   bulletsEnemyToDelete.clear();\n   return bulletsHit;\n}\n</code></pre>\n<p>As I mentioned before there are a lots of things you should improve:</p>\n<ul>\n<li>general structure of your code</li>\n<li>naming of your method (e.g. bulletsHit sounds like only checking if bullets are hit but you are also removing them)</li>\n<li>double checking of bullets</li>\n</ul>\n<p>Greetings</p>\n"}],"owner":{"account_id":27456500,"reputation":13,"user_id":20947844,"display_name":"Uri Singh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":75036792,"answer_count":1,"score":-1,"last_activity_date":1673076291,"creation_date":1673037464,"question_id":75035868,"body_markdown":"I am a beginner and I am making a space shooter game in Netbeans. I want if the spacecraft&#39;s bullet hits the enemy&#39;s bullet that the 2 bullets are removed. I have created an Arraylist of bullets and bulletsEnemy. Then I created a method hitByBullet that should ensure that I can search for the bullets that collided. Then in the method bulletsHit (), the bullets should be removed. \r\n\r\nMy enemies shoot in a loop and don&#39;t move. My problem is that the bullets go through each other. The radius of the bullets is 5.\r\n\r\n\r\n  **These is the 2 methods that I have written**\r\n\r\n\r\n&#39;&#39;&#39;\r\n\r\n    public int hitByBullet(){\r\n       for(int i=0; i&lt;bullets.size(); i++){\r\n           for(int j= 0;j&lt; bulletsEnemy.size(); j++){\r\n              if( bullets.get(i).getY() - bulletsEnemy.get(j).getY()&lt;= 5)\r\n               if(bullets.get(i).getX() -bulletsEnemy.get(j).getX()&lt;= 5){ \r\n               return i;\r\n               }\r\n           }\r\n            \r\n       }\r\n       return -1;\r\n    }\r\n\r\n&#39;&#39;&#39;\r\n\r\n\r\n    public boolean bulletsHit(){\r\n         if (hitByBullet()!= -1){               \r\n             bullets.remove(this);  //with &#39;this&#39; I refer too &#39;i&#39;\r\n             bulletsEnemy.remove(this);\r\n             return true;\r\n         }\r\n         return false;\r\n    }\r\n\r\n&#39;&#39;&#39;\r\n\r\n    \r\n\r\n    [This is how it looks like] (https://i.stack.imgur.com/4XsCR.png)","title":"How do you make sure the 2 balls are removed after the collision?","body":"<p>I am a beginner and I am making a space shooter game in Netbeans. I want if the spacecraft's bullet hits the enemy's bullet that the 2 bullets are removed. I have created an Arraylist of bullets and bulletsEnemy. Then I created a method hitByBullet that should ensure that I can search for the bullets that collided. Then in the method bulletsHit (), the bullets should be removed.</p>\n<p>My enemies shoot in a loop and don't move. My problem is that the bullets go through each other. The radius of the bullets is 5.</p>\n<p><strong>These is the 2 methods that I have written</strong></p>\n<p>'''</p>\n<pre><code>public int hitByBullet(){\n   for(int i=0; i&lt;bullets.size(); i++){\n       for(int j= 0;j&lt; bulletsEnemy.size(); j++){\n          if( bullets.get(i).getY() - bulletsEnemy.get(j).getY()&lt;= 5)\n           if(bullets.get(i).getX() -bulletsEnemy.get(j).getX()&lt;= 5){ \n           return i;\n           }\n       }\n        \n   }\n   return -1;\n}\n</code></pre>\n<p>'''</p>\n<pre><code>public boolean bulletsHit(){\n     if (hitByBullet()!= -1){               \n         bullets.remove(this);  //with 'this' I refer too 'i'\n         bulletsEnemy.remove(this);\n         return true;\n     }\n     return false;\n}\n</code></pre>\n<p>'''</p>\n<pre><code>[This is how it looks like] (https://i.stack.imgur.com/4XsCR.png)\n</code></pre>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1673073096,"post_id":75038511,"comment_id":132420326,"body_markdown":"I think this would be a lot easier (both to read and to write) if you *don&#39;t* use streams. How about doing the mapping and concatenating part with array lists instead?","body":"I think this would be a lot easier (both to read and to write) if you <i>don&#39;t</i> use streams. How about doing the mapping and concatenating part with array lists instead?"},{"owner":{"account_id":10309761,"reputation":944,"user_id":7605967,"display_name":"Keshavram Kuduwa"},"score":0,"creation_date":1673073599,"post_id":75038511,"comment_id":132420377,"body_markdown":"@Sweeper we are dealing with huge amount of data, so streaming is necessary here.","body":"@Sweeper we are dealing with huge amount of data, so streaming is necessary here."}],"answers":[{"tags":[],"owner":{"account_id":14191656,"reputation":44,"user_id":17802067,"display_name":"Razumov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673075692,"creation_date":1673075692,"answer_id":75038690,"question_id":75038511,"body_markdown":"Java does not allow you to alter collections while iterating over them, so what you want to do is not possible.\r\n\r\nI would suggest first processing the headers with `limit(1)` and then proceed to concatenate that with the remaining processed items using `skip(1)`.\r\n\r\nRoughly:\r\n\r\n    Stream&lt;String&gt; headerStream = newResponseStream.limit(1).getHeaders()\r\n    Stream&lt;String[]&gt; valueStream = newResponseStream.skip(1).getRows()\r\n\r\n    Stream&lt;String[]&gt; dataStream = Stream.concat(headerStream, valueStream);\r\n    return TextDataUtils.sample(dataStream, Collections.emptyMap(), request.getLimit(), false);\r\n\r\nNote that you cannot reuse the starting response stream.  This will still be efficient if the underlying stream is properly lazily fetching.\r\n\r\nAs a side note, I would avoid writing map functions with side effects.  It make the code more difficult to reason about.","title":"Add the first element to the Stream from the same Stream","body":"<p>Java does not allow you to alter collections while iterating over them, so what you want to do is not possible.</p>\n<p>I would suggest first processing the headers with <code>limit(1)</code> and then proceed to concatenate that with the remaining processed items using <code>skip(1)</code>.</p>\n<p>Roughly:</p>\n<pre><code>Stream&lt;String&gt; headerStream = newResponseStream.limit(1).getHeaders()\nStream&lt;String[]&gt; valueStream = newResponseStream.skip(1).getRows()\n\nStream&lt;String[]&gt; dataStream = Stream.concat(headerStream, valueStream);\nreturn TextDataUtils.sample(dataStream, Collections.emptyMap(), request.getLimit(), false);\n</code></pre>\n<p>Note that you cannot reuse the starting response stream.  This will still be efficient if the underlying stream is properly lazily fetching.</p>\n<p>As a side note, I would avoid writing map functions with side effects.  It make the code more difficult to reason about.</p>\n"}],"owner":{"account_id":10309761,"reputation":944,"user_id":7605967,"display_name":"Keshavram Kuduwa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1673075692,"creation_date":1673072794,"question_id":75038511,"body_markdown":"I have a Stream of JsonNode that I want to convert to Stream&lt;String[]&gt; like CSV, where the first row is headers and then we have values. The `TextDataUtils.sample` is expecting the same. I&#39;m currently using `Stream.concat` to achieve this but the first row will always be `[]` because I&#39;m extracting headers only after we start processing the values stream.\r\n\r\n```java\r\n    GoogleAdsGetValuesResponse getValuesResponse = client.getValues(getValuesRequest);\r\n    AtomicLong consumedRows = new AtomicLong();\r\n    List&lt;String&gt; headers = new ArrayList&lt;&gt;();\r\n    Stream&lt;String[]&gt; valueStream =\r\n        getValuesResponse\r\n            .getValuesStream()\r\n            .limit(request.getLimit())\r\n            .map(\r\n                rowNode -&gt; {\r\n                  if (consumedRows.get() == 0) {\r\n                    extractAllKeys(rowNode, &quot;&quot;, headers);\r\n                    headers.removeIf(header -&gt; !header.contains(&quot;.&quot;));\r\n                  }\r\n                  String[] row =\r\n                      headers.stream()\r\n                          .map(header -&gt; rowNode.at(getJsonPointerString(header)).asText())\r\n                          .toArray(String[]::new);\r\n                  consumedRows.getAndIncrement();\r\n                  return row;\r\n                });\r\n\r\n    Stream&lt;String[]&gt; headerStream = Stream.of(headers.toArray(String[]::new), new String[] {});\r\n    Stream&lt;String[]&gt; dataStream = Stream.concat(headerStream, valueStream);\r\n    return TextDataUtils.sample(dataStream, Collections.emptyMap(), request.getLimit(), false);\r\n```\r\n\r\nHow do I achieve this? Add the first element to the Stream from the same Stream. Appreciate any suggestions. I really appreciate any help you can provide. ","title":"Add the first element to the Stream from the same Stream","body":"<p>I have a Stream of JsonNode that I want to convert to Stream&lt;String[]&gt; like CSV, where the first row is headers and then we have values. The <code>TextDataUtils.sample</code> is expecting the same. I'm currently using <code>Stream.concat</code> to achieve this but the first row will always be <code>[]</code> because I'm extracting headers only after we start processing the values stream.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    GoogleAdsGetValuesResponse getValuesResponse = client.getValues(getValuesRequest);\n    AtomicLong consumedRows = new AtomicLong();\n    List&lt;String&gt; headers = new ArrayList&lt;&gt;();\n    Stream&lt;String[]&gt; valueStream =\n        getValuesResponse\n            .getValuesStream()\n            .limit(request.getLimit())\n            .map(\n                rowNode -&gt; {\n                  if (consumedRows.get() == 0) {\n                    extractAllKeys(rowNode, &quot;&quot;, headers);\n                    headers.removeIf(header -&gt; !header.contains(&quot;.&quot;));\n                  }\n                  String[] row =\n                      headers.stream()\n                          .map(header -&gt; rowNode.at(getJsonPointerString(header)).asText())\n                          .toArray(String[]::new);\n                  consumedRows.getAndIncrement();\n                  return row;\n                });\n\n    Stream&lt;String[]&gt; headerStream = Stream.of(headers.toArray(String[]::new), new String[] {});\n    Stream&lt;String[]&gt; dataStream = Stream.concat(headerStream, valueStream);\n    return TextDataUtils.sample(dataStream, Collections.emptyMap(), request.getLimit(), false);\n</code></pre>\n<p>How do I achieve this? Add the first element to the Stream from the same Stream. Appreciate any suggestions. I really appreciate any help you can provide.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":8646729,"reputation":275,"user_id":6473711,"display_name":"Avvappa Hegadyal"},"score":0,"creation_date":1673073200,"post_id":75038494,"comment_id":132420336,"body_markdown":"Can you please share complete code ?","body":"Can you please share complete code ?"}],"answers":[{"tags":[],"owner":{"account_id":8646729,"reputation":275,"user_id":6473711,"display_name":"Avvappa Hegadyal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1673074408,"creation_date":1673073859,"answer_id":75038575,"question_id":75038494,"body_markdown":"       FileInputStream fis = new FileInputStream(wantsUploadFile);\r\n       int chunkIndex = 0;\r\n       do{\r\n           byte[] chunkBytes = new byte[89432];\r\n           chunkIndex = fis.read(chunkBytes);\r\n           // read file logic\r\n           Log.e(&quot;XXX&quot;,&quot;loop is triggered&quot;)\r\n           ...\r\n        }while (chunkIndex != -1)\r\n\r\nOR \r\n\r\n    FileInputStream fis = new FileInputStream(wantsUploadFile);\r\n    byte[] chunkBytes = new byte[89432];\r\n    int chunkIndex = 0;\r\n    while (fis.read(chunkBytes , 0, chunkBytes.length) != -1){\r\n        chunkIndex++;\r\n        chunkBytes=new byte[89432] ;\r\n       // read file logic\r\n       Log.e(&quot;XXX&quot;,&quot;loop is triggered&quot;)\r\n       ...\r\n    } fis.close();","title":"FileInputStream.read() method loop trigger several times","body":"<pre><code>   FileInputStream fis = new FileInputStream(wantsUploadFile);\n   int chunkIndex = 0;\n   do{\n       byte[] chunkBytes = new byte[89432];\n       chunkIndex = fis.read(chunkBytes);\n       // read file logic\n       Log.e(&quot;XXX&quot;,&quot;loop is triggered&quot;)\n       ...\n    }while (chunkIndex != -1)\n</code></pre>\n<p>OR</p>\n<pre><code>FileInputStream fis = new FileInputStream(wantsUploadFile);\nbyte[] chunkBytes = new byte[89432];\nint chunkIndex = 0;\nwhile (fis.read(chunkBytes , 0, chunkBytes.length) != -1){\n    chunkIndex++;\n    chunkBytes=new byte[89432] ;\n   // read file logic\n   Log.e(&quot;XXX&quot;,&quot;loop is triggered&quot;)\n   ...\n} fis.close();\n</code></pre>\n"}],"owner":{"account_id":19677870,"reputation":5,"user_id":14405582,"display_name":"ErrorCodes"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75038575,"answer_count":1,"score":-1,"last_activity_date":1673075471,"creation_date":1673072557,"question_id":75038494,"body_markdown":"I want to read a file **(89432 bytes)**, I have wrote code:\r\n\r\n```\r\nFileInputStream fis = new FileInputStream(wantsUploadFile);\r\nbyte[] chunkBytes = new byte[89432];\r\nint chunkIndex = 0;\r\nwhile (fis.read(chunkBytes) != -1){\r\n  // read file logic\r\n  Log.e(&quot;XXX&quot;,&quot;loop is triggered&quot;)\r\n  ...\r\n}\r\n```\r\nBut I find The ```while``` loop will trigger several times(times&gt;10+).But when I debug this error is not appear.\r\nWhy does this happen?T_T\r\n&lt;br&gt;&lt;br&gt;\r\nThe Complated code :\r\n```\r\n                        FileInputStream fis = new FileInputStream(wantsUploadFile);\r\n\r\n                        byte[] chunkBytes = new byte[uploadEntity.getFile().length()&lt;=uploadEntity.getChunkSize()? (int)uploadEntity.getFile().length() : uploadEntity.getChunkSize()];\r\n                        int chunkIndex = 0;\r\n                        while (fis.read(chunkBytes) != -1){\r\n                            OkHttpClient okHttpClient = new OkHttpClient();\r\n                            RequestBody requestBody = RequestBody.create(MediaType.parse(&quot;application/octet-stream&quot;),chunkBytes);\r\n                            int finalChunkIndex = chunkIndex;\r\n                            ProgressRequestBody progressRequestBody = new ProgressRequestBody(requestBody, chunkIndex, new ProgressRequestBody.OnUploadSizeChangedListener() {\r\n                                @Override\r\n                                public void chunkChanged(int uploadedSize) {\r\n                                    if (onProgressChangeListener != null){\r\n                                        int chunkTotalSize = uploadEntity.getChunkSize();\r\n                                        UploadEntity wantsModifiedEntity = tasks.get(key);\r\n                                        wantsModifiedEntity.setUploadedSize(wantsModifiedEntity.getUploadedSize() + uploadedSize);\r\n                                        tasks.put(key,wantsModifiedEntity);\r\n                                        int progressPresent =  (uploadedSize / chunkTotalSize) * 100;\r\n                                        if (onProgressChangeListener != null){\r\n                                            onProgressChangeListener.chunkChanged(uploadEntity.getTaskId(), finalChunkIndex,progressPresent);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            });\r\n                            long contentLength = uploadEntity.getChunkSize() &lt;= uploadEntity.getTotalSize() ? uploadEntity.getChunkSize():uploadEntity.getTotalSize();\r\n                            Request request = new Request.Builder()\r\n                                    .url(uploadEntity.getChunkUrls().get(chunkIndex))\r\n                                    .post(progressRequestBody)\r\n                                    .header(&quot;Cookie&quot;, GlobalRunningConfiguration.authentication_cookie_token)\r\n                                    .header(&quot;content-length&quot;,String.valueOf(contentLength- 1))\r\n                                    .build();\r\n                            int finalChunkIndex1 = chunkIndex;\r\n                            okHttpClient.newCall(request).enqueue(new Callback() {\r\n                                @Override\r\n                                public void onFailure(Call call, IOException e) {\r\n                                    Log.e(LOG_TAG,&quot;chunkIndex=&quot;+finalChunkIndex1);\r\n                                    if (onProgressChangeListener != null) onProgressChangeListener.chunkFinished(uploadEntity.getTaskId(), finalChunkIndex1,true);\r\n                                    // \r\n                                    tasks.remove(key);\r\n                                }\r\n\r\n                                @Override\r\n                                public void onResponse(Call call, Response response) throws IOException {\r\n                                    Log.e(LOG_TAG,&quot;[&quot;+ finalChunkIndex1 +&quot;] response= &quot;+response.body().string());\r\n                                    if (onProgressChangeListener != null){\r\n                                        onProgressChangeListener.chunkFinished(uploadEntity.getTaskId(), finalChunkIndex1,false);\r\n                                    }\r\n                                    tasks.remove(key);\r\n                                }\r\n                            });\r\n\r\n                            // chunk add\r\n                            chunkIndex ++;\r\n                            Log.e(LOG_TAG,&quot;LOOP EXED&quot;);\r\n\r\n                        }\r\n```\r\nThis is log :\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kia1V.png","title":"FileInputStream.read() method loop trigger several times","body":"<p>I want to read a file <strong>(89432 bytes)</strong>, I have wrote code:</p>\n<pre><code>FileInputStream fis = new FileInputStream(wantsUploadFile);\nbyte[] chunkBytes = new byte[89432];\nint chunkIndex = 0;\nwhile (fis.read(chunkBytes) != -1){\n  // read file logic\n  Log.e(&quot;XXX&quot;,&quot;loop is triggered&quot;)\n  ...\n}\n</code></pre>\n<p>But I find The <code>while</code> loop will trigger several times(times&gt;10+).But when I debug this error is not appear.\nWhy does this happen?T_T\n<br><br>\nThe Complated code :</p>\n<pre><code>                        FileInputStream fis = new FileInputStream(wantsUploadFile);\n\n                        byte[] chunkBytes = new byte[uploadEntity.getFile().length()&lt;=uploadEntity.getChunkSize()? (int)uploadEntity.getFile().length() : uploadEntity.getChunkSize()];\n                        int chunkIndex = 0;\n                        while (fis.read(chunkBytes) != -1){\n                            OkHttpClient okHttpClient = new OkHttpClient();\n                            RequestBody requestBody = RequestBody.create(MediaType.parse(&quot;application/octet-stream&quot;),chunkBytes);\n                            int finalChunkIndex = chunkIndex;\n                            ProgressRequestBody progressRequestBody = new ProgressRequestBody(requestBody, chunkIndex, new ProgressRequestBody.OnUploadSizeChangedListener() {\n                                @Override\n                                public void chunkChanged(int uploadedSize) {\n                                    if (onProgressChangeListener != null){\n                                        int chunkTotalSize = uploadEntity.getChunkSize();\n                                        UploadEntity wantsModifiedEntity = tasks.get(key);\n                                        wantsModifiedEntity.setUploadedSize(wantsModifiedEntity.getUploadedSize() + uploadedSize);\n                                        tasks.put(key,wantsModifiedEntity);\n                                        int progressPresent =  (uploadedSize / chunkTotalSize) * 100;\n                                        if (onProgressChangeListener != null){\n                                            onProgressChangeListener.chunkChanged(uploadEntity.getTaskId(), finalChunkIndex,progressPresent);\n                                        }\n                                    }\n                                }\n                            });\n                            long contentLength = uploadEntity.getChunkSize() &lt;= uploadEntity.getTotalSize() ? uploadEntity.getChunkSize():uploadEntity.getTotalSize();\n                            Request request = new Request.Builder()\n                                    .url(uploadEntity.getChunkUrls().get(chunkIndex))\n                                    .post(progressRequestBody)\n                                    .header(&quot;Cookie&quot;, GlobalRunningConfiguration.authentication_cookie_token)\n                                    .header(&quot;content-length&quot;,String.valueOf(contentLength- 1))\n                                    .build();\n                            int finalChunkIndex1 = chunkIndex;\n                            okHttpClient.newCall(request).enqueue(new Callback() {\n                                @Override\n                                public void onFailure(Call call, IOException e) {\n                                    Log.e(LOG_TAG,&quot;chunkIndex=&quot;+finalChunkIndex1);\n                                    if (onProgressChangeListener != null) onProgressChangeListener.chunkFinished(uploadEntity.getTaskId(), finalChunkIndex1,true);\n                                    // \n                                    tasks.remove(key);\n                                }\n\n                                @Override\n                                public void onResponse(Call call, Response response) throws IOException {\n                                    Log.e(LOG_TAG,&quot;[&quot;+ finalChunkIndex1 +&quot;] response= &quot;+response.body().string());\n                                    if (onProgressChangeListener != null){\n                                        onProgressChangeListener.chunkFinished(uploadEntity.getTaskId(), finalChunkIndex1,false);\n                                    }\n                                    tasks.remove(key);\n                                }\n                            });\n\n                            // chunk add\n                            chunkIndex ++;\n                            Log.e(LOG_TAG,&quot;LOOP EXED&quot;);\n\n                        }\n</code></pre>\n<p>This is log :\n<a href=\"https://i.stack.imgur.com/kia1V.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","spring","spring-boot","oauth-2.0","apache-camel"],"answers":[{"tags":[],"owner":{"account_id":943935,"reputation":1636,"user_id":971566,"display_name":"Oscerd"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673074977,"creation_date":1673004463,"answer_id":75030347,"question_id":75025945,"body_markdown":"We added a component specific for that: https://camel.apache.org/components/3.20.x/others/mail-microsoft-oauth.html\r\n\r\nAnd for the Spring Boot starter you can look at spring boot starter related to this component.","title":"Hi how do I implement OAuth 2.0 for Microsoft exchange in spring boot application","body":"<p>We added a component specific for that: <a href=\"https://camel.apache.org/components/3.20.x/others/mail-microsoft-oauth.html\" rel=\"nofollow noreferrer\">https://camel.apache.org/components/3.20.x/others/mail-microsoft-oauth.html</a></p>\n<p>And for the Spring Boot starter you can look at spring boot starter related to this component.</p>\n"}],"owner":{"account_id":27333646,"reputation":1,"user_id":20845414,"display_name":"Sourabh Bidikar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1673074977,"creation_date":1672966907,"question_id":75025945,"body_markdown":"The springboot application uses camel configuration and I want to implement OAuth 2.0 for connecting to mailbox of different application through Microsoft exchang using IMAPS protocol. How do I implement it.\r\n\r\nI have the tenant id, client id, token value and token id.","title":"Hi how do I implement OAuth 2.0 for Microsoft exchange in spring boot application","body":"<p>The springboot application uses camel configuration and I want to implement OAuth 2.0 for connecting to mailbox of different application through Microsoft exchang using IMAPS protocol. How do I implement it.</p>\n<p>I have the tenant id, client id, token value and token id.</p>\n"},{"tags":["java","android","nfc"],"answers":[{"tags":[],"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673074865,"creation_date":1673074865,"answer_id":75038634,"question_id":75038505,"body_markdown":"The issue that you are seeing is that most Tags don&#39;t come setup for storing ``Ndef` data on them, you need to format them first.\r\n\r\nThere is a lot of other problems with the code but when you `get` a Tag you should check the return is not `Null` which indicates that the Tag is not the type your are trying to get.\r\n\r\nIn your case code like should fix this problem:-\r\n\r\n``` lang-java\r\nNdef ndef = Ndef.get(tag);\r\nif (ndef != null) {\r\n    // It&#39;s a Ndef formatted Tag\r\n    ndef.connect();\r\n    ndef.writeNdefMessage(message);\r\n    ndef.close();\r\n} else {\r\n    NdefFormatable ndefFormatable = NdefFormatable.get(tag);\r\n    if (ndefFormatable != null) {\r\n        // Format tag and write message\r\n        ndefFormatable.connect();\r\n        ndefFormatable.format(message);\r\n        ndefFormatable.close();\r\n    } else {\r\n        // Throw an error message\r\n        // Saying wrong type of Tag\r\n    }\r\n}\r\n\r\n```\r\n\r\n","title":"Write NFC tag (using NTAG215)","body":"<p>The issue that you are seeing is that most Tags don't come setup for storing ``Ndef` data on them, you need to format them first.</p>\n<p>There is a lot of other problems with the code but when you <code>get</code> a Tag you should check the return is not <code>Null</code> which indicates that the Tag is not the type your are trying to get.</p>\n<p>In your case code like should fix this problem:-</p>\n<pre class=\"lang-java prettyprint-override\"><code>Ndef ndef = Ndef.get(tag);\nif (ndef != null) {\n    // It's a Ndef formatted Tag\n    ndef.connect();\n    ndef.writeNdefMessage(message);\n    ndef.close();\n} else {\n    NdefFormatable ndefFormatable = NdefFormatable.get(tag);\n    if (ndefFormatable != null) {\n        // Format tag and write message\n        ndefFormatable.connect();\n        ndefFormatable.format(message);\n        ndefFormatable.close();\n    } else {\n        // Throw an error message\n        // Saying wrong type of Tag\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":27224533,"reputation":5,"user_id":20753230,"display_name":"Student Progg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1673084283,"accepted_answer_id":75038634,"answer_count":1,"score":0,"last_activity_date":1673074865,"creation_date":1673072726,"question_id":75038505,"body_markdown":"I&#39;m currently working with android app that uses NFC technology. I&#39;m new to this so a help would be appreciated. I am currently using NTAG215. Here&#39;s my main activity\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    NfcAdapter adapter;\r\n    PendingIntent pendingIntent;\r\n    IntentFilter writeTagFilters[];\r\n    boolean writeMode;\r\n    Tag myTag;\r\n    Context ctx;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        ctx=this;\r\n        Button btnWrite = (Button) findViewById(R.id.button);\r\n        final TextView name = (TextView)findViewById(R.id.name);\r\n\r\n        btnWrite.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v) {\r\n                try {\r\n                    if(myTag==null){\r\n                        Toast.makeText(ctx, ctx.getString(R.string.error_detected), Toast.LENGTH_LONG ).show();\r\n                    }else{\r\n                        write(name.getText().toString(),myTag);\r\n                        Toast.makeText(ctx, ctx.getString(R.string.ok_writing), Toast.LENGTH_LONG ).show();\r\n                    }\r\n                } catch (IOException e) {\r\n                    Toast.makeText(ctx, ctx.getString(R.string.error_writing), Toast.LENGTH_LONG ).show();\r\n                    e.printStackTrace();\r\n                } catch (FormatException e) {\r\n                    Toast.makeText(ctx, ctx.getString(R.string.error_writing) , Toast.LENGTH_LONG ).show();\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        });\r\n\r\n        adapter = NfcAdapter.getDefaultAdapter(this);\r\n        pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);\r\n        IntentFilter tagDetected = new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED);\r\n        tagDetected.addCategory(Intent.CATEGORY_DEFAULT);\r\n        writeTagFilters = new IntentFilter[] { tagDetected };\r\n\r\n    }\r\n\r\n\r\n\r\n    private void write(String text, Tag tag) throws IOException, FormatException {\r\n\r\n        NdefRecord[] records = { createRecord(text) };\r\n        NdefMessage message = new NdefMessage(records);\r\n        Ndef ndef = Ndef.get(tag);\r\n        ndef.connect();\r\n        ndef.writeNdefMessage(message);\r\n        ndef.close();\r\n    }\r\n\r\n\r\n\r\n    private NdefRecord createRecord(String text) throws UnsupportedEncodingException {\r\n        String lang       = &quot;en&quot;;\r\n        byte[] textBytes  = text.getBytes();\r\n        byte[] langBytes  = lang.getBytes(&quot;US-ASCII&quot;);\r\n        int    langLength = langBytes.length;\r\n        int    textLength = textBytes.length;\r\n        byte[] payload    = new byte[1 + langLength + textLength];\r\n\r\n        payload[0] = (byte) langLength;\r\n\r\n        System.arraycopy(langBytes, 0, payload, 1,              langLength);\r\n        System.arraycopy(textBytes, 0, payload, 1 + langLength, textLength);\r\n\r\n        NdefRecord recordNFC = new NdefRecord(NdefRecord.TNF_WELL_KNOWN,  NdefRecord.RTD_TEXT,  new byte[0], payload);\r\n\r\n        return recordNFC;\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onNewIntent(Intent intent) {\r\n        super.onNewIntent(intent);\r\n        if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(intent.getAction())) {\r\n            myTag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);\r\n            Toast.makeText(this, this.getString(R.string.ok_detection) + myTag.toString(), Toast.LENGTH_LONG).show();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onPause(){\r\n        super.onPause();\r\n        WriteModeOff();\r\n    }\r\n\r\n    @Override\r\n    public void onResume(){\r\n        super.onResume();\r\n        WriteModeOn();\r\n    }\r\n\r\n    private void WriteModeOn(){\r\n        writeMode = true;\r\n        adapter.enableForegroundDispatch(this, pendingIntent, writeTagFilters, null);\r\n    }\r\n\r\n    private void WriteModeOff(){\r\n        writeMode = false;\r\n        adapter.disableForegroundDispatch(this);\r\n    }\r\n\r\n}\r\nWhen I run it, after I input text and click the button &quot;Write&quot; the app display this [error message](https://i.stack.imgur.com/HWIDx.jpg) If the writing was error atleast it will have display a error text that I made right? so Idk what is this anymore.\r\nI try to read some of the work and asked question here but some of the is either not answered or not updated. and most of them are written on kotlin which I do not know a lot. I also heard \r\n```enableforgrondDispatch``` i can use  ```enableReaderMode``` dont know if that is correct. \r\nIdk if the code was never a working one or if my tag tech has different format\r\nif you have a code suggestion you can leave it. also if you happen to know these tag technology that will suffice this project, let me know.\r\n**If you know what was going on here, please let me know. thanks**\r\nplease help me with this one guys. \r\n","title":"Write NFC tag (using NTAG215)","body":"<p>I'm currently working with android app that uses NFC technology. I'm new to this so a help would be appreciated. I am currently using NTAG215. Here's my main activity\npublic class MainActivity extends AppCompatActivity {</p>\n<pre><code>NfcAdapter adapter;\nPendingIntent pendingIntent;\nIntentFilter writeTagFilters[];\nboolean writeMode;\nTag myTag;\nContext ctx;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    ctx=this;\n    Button btnWrite = (Button) findViewById(R.id.button);\n    final TextView name = (TextView)findViewById(R.id.name);\n\n    btnWrite.setOnClickListener(new View.OnClickListener()\n    {\n        @Override\n        public void onClick(View v) {\n            try {\n                if(myTag==null){\n                    Toast.makeText(ctx, ctx.getString(R.string.error_detected), Toast.LENGTH_LONG ).show();\n                }else{\n                    write(name.getText().toString(),myTag);\n                    Toast.makeText(ctx, ctx.getString(R.string.ok_writing), Toast.LENGTH_LONG ).show();\n                }\n            } catch (IOException e) {\n                Toast.makeText(ctx, ctx.getString(R.string.error_writing), Toast.LENGTH_LONG ).show();\n                e.printStackTrace();\n            } catch (FormatException e) {\n                Toast.makeText(ctx, ctx.getString(R.string.error_writing) , Toast.LENGTH_LONG ).show();\n                e.printStackTrace();\n            }\n        }\n    });\n\n    adapter = NfcAdapter.getDefaultAdapter(this);\n    pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);\n    IntentFilter tagDetected = new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED);\n    tagDetected.addCategory(Intent.CATEGORY_DEFAULT);\n    writeTagFilters = new IntentFilter[] { tagDetected };\n\n}\n\n\n\nprivate void write(String text, Tag tag) throws IOException, FormatException {\n\n    NdefRecord[] records = { createRecord(text) };\n    NdefMessage message = new NdefMessage(records);\n    Ndef ndef = Ndef.get(tag);\n    ndef.connect();\n    ndef.writeNdefMessage(message);\n    ndef.close();\n}\n\n\n\nprivate NdefRecord createRecord(String text) throws UnsupportedEncodingException {\n    String lang       = &quot;en&quot;;\n    byte[] textBytes  = text.getBytes();\n    byte[] langBytes  = lang.getBytes(&quot;US-ASCII&quot;);\n    int    langLength = langBytes.length;\n    int    textLength = textBytes.length;\n    byte[] payload    = new byte[1 + langLength + textLength];\n\n    payload[0] = (byte) langLength;\n\n    System.arraycopy(langBytes, 0, payload, 1,              langLength);\n    System.arraycopy(textBytes, 0, payload, 1 + langLength, textLength);\n\n    NdefRecord recordNFC = new NdefRecord(NdefRecord.TNF_WELL_KNOWN,  NdefRecord.RTD_TEXT,  new byte[0], payload);\n\n    return recordNFC;\n}\n\n\n@Override\nprotected void onNewIntent(Intent intent) {\n    super.onNewIntent(intent);\n    if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(intent.getAction())) {\n        myTag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);\n        Toast.makeText(this, this.getString(R.string.ok_detection) + myTag.toString(), Toast.LENGTH_LONG).show();\n    }\n}\n\n@Override\npublic void onPause(){\n    super.onPause();\n    WriteModeOff();\n}\n\n@Override\npublic void onResume(){\n    super.onResume();\n    WriteModeOn();\n}\n\nprivate void WriteModeOn(){\n    writeMode = true;\n    adapter.enableForegroundDispatch(this, pendingIntent, writeTagFilters, null);\n}\n\nprivate void WriteModeOff(){\n    writeMode = false;\n    adapter.disableForegroundDispatch(this);\n}\n</code></pre>\n<p>}\nWhen I run it, after I input text and click the button &quot;Write&quot; the app display this <a href=\"https://i.stack.imgur.com/HWIDx.jpg\" rel=\"nofollow noreferrer\">error message</a> If the writing was error atleast it will have display a error text that I made right? so Idk what is this anymore.\nI try to read some of the work and asked question here but some of the is either not answered or not updated. and most of them are written on kotlin which I do not know a lot. I also heard\n<code>enableforgrondDispatch</code> i can use  <code>enableReaderMode</code> dont know if that is correct.\nIdk if the code was never a working one or if my tag tech has different format\nif you have a code suggestion you can leave it. also if you happen to know these tag technology that will suffice this project, let me know.\n<strong>If you know what was going on here, please let me know. thanks</strong>\nplease help me with this one guys.</p>\n"},{"tags":["java","spring","intellij-idea","h2","h2-console"],"answers":[{"tags":[],"owner":{"account_id":8361573,"reputation":573,"user_id":6279677,"display_name":"Suchandra T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673074299,"creation_date":1673074299,"answer_id":75038592,"question_id":75020347,"body_markdown":"Kindly paste your Java program as well. \r\n\r\n  \r\n     stmt.executeUpdate(&quot;INSERT INTO CUSTOMER (ID,NAME,AGE,ADDRESS,SALARY) VALUES (1, &#39;Ramesh&#39;, 32, &#39;Ahmedabad&#39;, 2000.00 );&quot;);\r\n\r\nPasting the working SQL query in my current system, Thanks.","title":"how H2 in intellij without installed H2","body":"<p>Kindly paste your Java program as well.</p>\n<pre><code> stmt.executeUpdate(&quot;INSERT INTO CUSTOMER (ID,NAME,AGE,ADDRESS,SALARY) VALUES (1, 'Ramesh', 32, 'Ahmedabad', 2000.00 );&quot;);\n</code></pre>\n<p>Pasting the working SQL query in my current system, Thanks.</p>\n"}],"owner":{"account_id":23585933,"reputation":1,"user_id":17624375,"display_name":"sunwon24"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673074299,"creation_date":1672930519,"question_id":75020347,"body_markdown":"i&#39;m army\r\narmy computer can install intellij, but can not install H2.\r\ntest need h2 or other database program.\r\n\r\ni wish know h2 use with &#39;localhost:8080/h2-console&#39;\r\n\r\nthank you for read.\r\n\r\n\r\n```\r\n2023-01-05T23:47:23.106+09:00  INFO 6156 --- \\[  restartedMain\\] anyway.sunwon.SunwonApplication          : Starting SunwonApplication using Java 19.0.1 with PID 6156 (C:\\\\Users\\\\CKIRUser\\\\Desktop\\\\sunwon\\\\out\\\\production\\\\classes started by CKIRUser in C:\\\\Users\\\\CKIRUser\\\\Desktop\\\\sunwon)\r\n2023-01-05T23:47:23.111+09:00  INFO 6156 --- \\[  restartedMain\\] anyway.sunwon.SunwonApplication          : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-01-05T23:47:23.187+09:00  INFO 6156 --- \\[  restartedMain\\] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set &#39;spring.devtools.add-properties&#39; to &#39;false&#39; to disable\r\n2023-01-05T23:47:23.187+09:00  INFO 6156 --- \\[  restartedMain\\] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the &#39;logging.level.web&#39; property to &#39;DEBUG&#39;\r\n2023-01-05T23:47:25.137+09:00  INFO 6156 --- \\[  restartedMain\\] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2023-01-05T23:47:25.225+09:00  INFO 6156 --- \\[  restartedMain\\] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 1 JPA repository interfaces.\r\n2023-01-05T23:47:26.289+09:00  INFO 6156 --- \\[  restartedMain\\] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2023-01-05T23:47:26.306+09:00  INFO 6156 --- \\[  restartedMain\\] o.apache.catalina.core.StandardService   : Starting service \\[Tomcat\\]\r\n2023-01-05T23:47:26.306+09:00  INFO 6156 --- \\[  restartedMain\\] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: \\[Apache Tomcat/10.1.4\\]\r\n2023-01-05T23:47:26.404+09:00  INFO 6156 --- \\[  restartedMain\\] o.a.c.c.C.\\[Tomcat\\].\\[localhost\\].\\[/\\]       : Initializing Spring embedded WebApplicationContext\r\n2023-01-05T23:47:26.406+09:00  INFO 6156 --- \\[  restartedMain\\] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3217 ms\r\n2023-01-05T23:47:26.509+09:00  INFO 6156 --- \\[  restartedMain\\] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2023-01-05T23:47:27.118+09:00  INFO 6156 --- \\[  restartedMain\\] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA\r\n2023-01-05T23:47:27.120+09:00  INFO 6156 --- \\[  restartedMain\\] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n2023-01-05T23:47:27.129+09:00  INFO 6156 --- \\[  restartedMain\\] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at &#39;/h2-console&#39;. Database available at &#39;jdbc:h2:mem:testdb&#39;\r\n2023-01-05T23:47:27.392+09:00  INFO 6156 --- \\[  restartedMain\\] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo \\[name: default\\]\r\n2023-01-05T23:47:27.459+09:00  INFO 6156 --- \\[  restartedMain\\] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.6.Final\r\n2023-01-05T23:47:27.638+09:00  WARN 6156 --- \\[  restartedMain\\] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting \\[javax.persistence.sharedCache.mode\\], use \\[jakarta.persistence.sharedCache.mode\\] instead\r\n2023-01-05T23:47:27.895+09:00  INFO 6156 --- \\[  restartedMain\\] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect\r\n2023-01-05T23:47:28.487+09:00  INFO 6156 --- \\[  restartedMain\\] o.h.m.i.EntityInstantiatorPojoStandard   : HHH000182: No default (no-argument) constructor for class: anyway.sunwon.domain.Book (class must be instantiated by Interceptor)\r\n2023-01-05T23:47:28.746+09:00  INFO 6156 --- \\[  restartedMain\\] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: \\[org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform\\]\r\n2023-01-05T23:47:28.760+09:00  INFO 6156 --- \\[  restartedMain\\] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2023-01-05T23:47:29.060+09:00  WARN 6156 --- \\[  restartedMain\\] ocalVariableTableParameterNameDiscoverer : Using deprecated &#39;-debug&#39; fallback for parameter name resolution. Compile the affected code with &#39;-parameters&#39; instead or avoid its introspection: anyway.sunwon.repository.AdminUserRepository\r\n2023-01-05T23:47:29.178+09:00  WARN 6156 --- \\[  restartedMain\\] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n2023-01-05T23:47:29.491+09:00  INFO 6156 --- \\[  restartedMain\\] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with \\[org.springframework.security.web.session.DisableEncodeUrlFilter@7eec5f21, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@79825521, org.springframework.security.web.context.SecurityContextHolderFilter@440b0657, org.springframework.security.web.header.HeaderWriterFilter@67a9dd22, org.springframework.security.web.csrf.CsrfFilter@619d188, org.springframework.security.web.authentication.logout.LogoutFilter@5d875af3, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@1fcb3a64, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@166bfb26, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3beb7681, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4632b036, org.springframework.security.web.access.ExceptionTranslationFilter@76fd6789, org.springframework.security.web.access.intercept.AuthorizationFilter@21e50fa\\]\r\n2023-01-05T23:47:29.689+09:00  INFO 6156 --- \\[  restartedMain\\] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729\r\n2023-01-05T23:47:29.746+09:00  INFO 6156 --- \\[  restartedMain\\] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\r\n2023-01-05T23:47:29.760+09:00  INFO 6156 --- \\[  restartedMain\\] anyway.sunwon.SunwonApplication          : Started SunwonApplication in 7.529 seconds (process running for 8.562)\r\nHikariProxyConnection@1662029991 wrapping conn0: url=jdbc:h2:mem:testdb user=SA\r\njdbc:h2:mem:testdb\r\nSA\r\n2023-01-05T23:47:29.792+09:00  INFO 6156 --- \\[  restartedMain\\] .s.b.a.l.ConditionEvaluationReportLogger :\r\n\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n2023-01-05T23:47:29.814+09:00 ERROR 6156 --- \\[  restartedMain\\] o.s.boot.SpringApplication               : Application run failed\r\n\r\njava.lang.IllegalStateException: Failed to execute ApplicationRunner\r\nat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:761) \\~\\[spring-boot-3.0.1.jar:3.0.1\\]\r\nat org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:748) \\~\\[spring-boot-3.0.1.jar:3.0.1\\]\r\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:315) \\~\\[spring-boot-3.0.1.jar:3.0.1\\]\r\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) \\~\\[spring-boot-3.0.1.jar:3.0.1\\]\r\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) \\~\\[spring-boot-3.0.1.jar:3.0.1\\]\r\nat anyway.sunwon.SunwonApplication.main(SunwonApplication.java:10) \\~\\[classes/:na\\]\r\nat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) \\~\\[na:na\\]\r\nat java.base/java.lang.reflect.Method.invoke(Method.java:578) \\~\\[na:na\\]\r\nat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) \\~\\[spring-boot-devtools-3.0.1.jar:3.0.1\\]\r\nCaused by: org.springframework.jdbc.BadSqlGrammarException: StatementCallback; bad SQL grammar \\[INSERT INTO USER VALUES(1, &#39;testuser&#39;)\\]\r\nat org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:101) \\~\\[spring-jdbc-6.0.3.jar:6.0.3\\]\r\nat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70) \\~\\[spring-jdbc-6.0.3.jar:6.0.3\\]\r\nat org.springframework.jdbc.core.JdbcTemplate.translateException(JdbcTemplate.java:1538) \\~\\[spring-jdbc-6.0.3.jar:6.0.3\\]\r\nat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:393) \\~\\[spring-jdbc-6.0.3.jar:6.0.3\\]\r\nat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:431) \\~\\[spring-jdbc-6.0.3.jar:6.0.3\\]\r\nat anyway.sunwon.H2Runner.run(H2Runner.java:37) \\~\\[classes/:na\\]\r\nat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:758) \\~\\[spring-boot-3.0.1.jar:3.0.1\\]\r\n... 8 common frames omitted\r\nCaused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement &quot;INSERT INTO \\[\\*\\]USER VALUES(1, &#39;testuser&#39;)&quot;; expected &quot;identifier&quot;; SQL statement:\r\nINSERT INTO USER VALUES(1, &#39;testuser&#39;) \\[42001-214\\]\r\nat org.h2.message.DbException.getJdbcSQLException(DbException.java:502) \\~\\[h2-2.1.214.jar:2.1.214\\]\r\nat org.h2.message.DbException.getJdbcSQLException(DbException.java:477) \\~\\[h2-2.1.214.jar:2.1.214\\]\r\nat org.h2.message.DbException.getSyntaxError(DbException.java:261) \\~\\[h2-2.1.214.jar:2.1.214\\]\r\nat org.h2.command.Parser.readIdentifier(Parser.java:5656) \\~\\[h2-2.1.214.jar:2.1.214\\]\r\nat org.h2.command.Parser.readIdentifierWithSchema(Parser.java:5616) \\~\\[h2-2.1.214.jar:2.1.214\\]\r\nat org.h2.command.Parser.readTableOrView(Parser.java:8328) \\~\\[h2-2.1.214.jar:2.1.214\\]\r\nat org.h2.command.Parser.parseInsert(Parser.java:1632) \\~\\[h2-2.1.214.jar:2.1.214\\]\r\nat org.h2.command.Parser.parsePrepared(Parser.java:814) \\~\\[h2-2.1.214.jar:2.1.214\\]\r\nat org.h2.command.Parser.parse(Parser.java:689) \\~\\[h2-2.1.214.jar:2.1.214\\]\r\nat org.h2.command.Parser.parse(Parser.java:661) \\~\\[h2-2.1.214.jar:2.1.214\\]\r\nat org.h2.command.Parser.prepareCommand(Parser.java:569) \\~\\[h2-2.1.214.jar:2.1.214\\]\r\nat org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631) \\~\\[h2-2.1.214.jar:2.1.214\\]\r\nat org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554) \\~\\[h2-2.1.214.jar:2.1.214\\]\r\nat org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116) \\~\\[h2-2.1.214.jar:2.1.214\\]\r\nat org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237) \\~\\[h2-2.1.214.jar:2.1.214\\]\r\nat org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223) \\~\\[h2-2.1.214.jar:2.1.214\\]\r\nat com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) \\~\\[HikariCP-5.0.1.jar:na\\]\r\nat com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) \\~\\[HikariCP-5.0.1.jar:na\\]\r\nat org.springframework.jdbc.core.JdbcTemplate$1ExecuteStatementCallback.doInStatement(JdbcTemplate.java:422) \\~\\[spring-jdbc-6.0.3.jar:6.0.3\\]\r\nat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:381) \\~\\[spring-jdbc-6.0.3.jar:6.0.3\\]\r\n... 11 common frames omitted\r\n\r\n2023-01-05T23:47:29.853+09:00  INFO 6156 --- \\[  restartedMain\\] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2023-01-05T23:47:30.061+09:00  WARN 6156 --- \\[  restartedMain\\] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name &#39;inMemoryDatabaseShutdownExecutor&#39;: org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add &quot;;DB_CLOSE_ON_EXIT=FALSE&quot; to the db URL) \\[90121-214\\]\r\n2023-01-05T23:47:30.062+09:00  INFO 6156 --- \\[  restartedMain\\] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\r\n2023-01-05T23:47:30.066+09:00  INFO 6156 --- \\[  restartedMain\\] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\r\n\r\nProcess finished with exit code 0\r\n```","title":"how H2 in intellij without installed H2","body":"<p>i'm army\narmy computer can install intellij, but can not install H2.\ntest need h2 or other database program.</p>\n<p>i wish know h2 use with 'localhost:8080/h2-console'</p>\n<p>thank you for read.</p>\n<pre><code>2023-01-05T23:47:23.106+09:00  INFO 6156 --- \\[  restartedMain\\] anyway.sunwon.SunwonApplication          : Starting SunwonApplication using Java 19.0.1 with PID 6156 (C:\\\\Users\\\\CKIRUser\\\\Desktop\\\\sunwon\\\\out\\\\production\\\\classes started by CKIRUser in C:\\\\Users\\\\CKIRUser\\\\Desktop\\\\sunwon)\n2023-01-05T23:47:23.111+09:00  INFO 6156 --- \\[  restartedMain\\] anyway.sunwon.SunwonApplication          : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-01-05T23:47:23.187+09:00  INFO 6156 --- \\[  restartedMain\\] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable\n2023-01-05T23:47:23.187+09:00  INFO 6156 --- \\[  restartedMain\\] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'\n2023-01-05T23:47:25.137+09:00  INFO 6156 --- \\[  restartedMain\\] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-01-05T23:47:25.225+09:00  INFO 6156 --- \\[  restartedMain\\] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 1 JPA repository interfaces.\n2023-01-05T23:47:26.289+09:00  INFO 6156 --- \\[  restartedMain\\] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2023-01-05T23:47:26.306+09:00  INFO 6156 --- \\[  restartedMain\\] o.apache.catalina.core.StandardService   : Starting service \\[Tomcat\\]\n2023-01-05T23:47:26.306+09:00  INFO 6156 --- \\[  restartedMain\\] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: \\[Apache Tomcat/10.1.4\\]\n2023-01-05T23:47:26.404+09:00  INFO 6156 --- \\[  restartedMain\\] o.a.c.c.C.\\[Tomcat\\].\\[localhost\\].\\[/\\]       : Initializing Spring embedded WebApplicationContext\n2023-01-05T23:47:26.406+09:00  INFO 6156 --- \\[  restartedMain\\] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3217 ms\n2023-01-05T23:47:26.509+09:00  INFO 6156 --- \\[  restartedMain\\] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-01-05T23:47:27.118+09:00  INFO 6156 --- \\[  restartedMain\\] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA\n2023-01-05T23:47:27.120+09:00  INFO 6156 --- \\[  restartedMain\\] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-01-05T23:47:27.129+09:00  INFO 6156 --- \\[  restartedMain\\] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'\n2023-01-05T23:47:27.392+09:00  INFO 6156 --- \\[  restartedMain\\] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo \\[name: default\\]\n2023-01-05T23:47:27.459+09:00  INFO 6156 --- \\[  restartedMain\\] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.6.Final\n2023-01-05T23:47:27.638+09:00  WARN 6156 --- \\[  restartedMain\\] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting \\[javax.persistence.sharedCache.mode\\], use \\[jakarta.persistence.sharedCache.mode\\] instead\n2023-01-05T23:47:27.895+09:00  INFO 6156 --- \\[  restartedMain\\] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect\n2023-01-05T23:47:28.487+09:00  INFO 6156 --- \\[  restartedMain\\] o.h.m.i.EntityInstantiatorPojoStandard   : HHH000182: No default (no-argument) constructor for class: anyway.sunwon.domain.Book (class must be instantiated by Interceptor)\n2023-01-05T23:47:28.746+09:00  INFO 6156 --- \\[  restartedMain\\] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: \\[org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform\\]\n2023-01-05T23:47:28.760+09:00  INFO 6156 --- \\[  restartedMain\\] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2023-01-05T23:47:29.060+09:00  WARN 6156 --- \\[  restartedMain\\] ocalVariableTableParameterNameDiscoverer : Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: anyway.sunwon.repository.AdminUserRepository\n2023-01-05T23:47:29.178+09:00  WARN 6156 --- \\[  restartedMain\\] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2023-01-05T23:47:29.491+09:00  INFO 6156 --- \\[  restartedMain\\] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with \\[org.springframework.security.web.session.DisableEncodeUrlFilter@7eec5f21, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@79825521, org.springframework.security.web.context.SecurityContextHolderFilter@440b0657, org.springframework.security.web.header.HeaderWriterFilter@67a9dd22, org.springframework.security.web.csrf.CsrfFilter@619d188, org.springframework.security.web.authentication.logout.LogoutFilter@5d875af3, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@1fcb3a64, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@166bfb26, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3beb7681, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4632b036, org.springframework.security.web.access.ExceptionTranslationFilter@76fd6789, org.springframework.security.web.access.intercept.AuthorizationFilter@21e50fa\\]\n2023-01-05T23:47:29.689+09:00  INFO 6156 --- \\[  restartedMain\\] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729\n2023-01-05T23:47:29.746+09:00  INFO 6156 --- \\[  restartedMain\\] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2023-01-05T23:47:29.760+09:00  INFO 6156 --- \\[  restartedMain\\] anyway.sunwon.SunwonApplication          : Started SunwonApplication in 7.529 seconds (process running for 8.562)\nHikariProxyConnection@1662029991 wrapping conn0: url=jdbc:h2:mem:testdb user=SA\njdbc:h2:mem:testdb\nSA\n2023-01-05T23:47:29.792+09:00  INFO 6156 --- \\[  restartedMain\\] .s.b.a.l.ConditionEvaluationReportLogger :\n\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-01-05T23:47:29.814+09:00 ERROR 6156 --- \\[  restartedMain\\] o.s.boot.SpringApplication               : Application run failed\n\njava.lang.IllegalStateException: Failed to execute ApplicationRunner\nat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:761) \\~\\[spring-boot-3.0.1.jar:3.0.1\\]\nat org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:748) \\~\\[spring-boot-3.0.1.jar:3.0.1\\]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:315) \\~\\[spring-boot-3.0.1.jar:3.0.1\\]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) \\~\\[spring-boot-3.0.1.jar:3.0.1\\]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) \\~\\[spring-boot-3.0.1.jar:3.0.1\\]\nat anyway.sunwon.SunwonApplication.main(SunwonApplication.java:10) \\~\\[classes/:na\\]\nat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) \\~\\[na:na\\]\nat java.base/java.lang.reflect.Method.invoke(Method.java:578) \\~\\[na:na\\]\nat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) \\~\\[spring-boot-devtools-3.0.1.jar:3.0.1\\]\nCaused by: org.springframework.jdbc.BadSqlGrammarException: StatementCallback; bad SQL grammar \\[INSERT INTO USER VALUES(1, 'testuser')\\]\nat org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:101) \\~\\[spring-jdbc-6.0.3.jar:6.0.3\\]\nat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70) \\~\\[spring-jdbc-6.0.3.jar:6.0.3\\]\nat org.springframework.jdbc.core.JdbcTemplate.translateException(JdbcTemplate.java:1538) \\~\\[spring-jdbc-6.0.3.jar:6.0.3\\]\nat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:393) \\~\\[spring-jdbc-6.0.3.jar:6.0.3\\]\nat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:431) \\~\\[spring-jdbc-6.0.3.jar:6.0.3\\]\nat anyway.sunwon.H2Runner.run(H2Runner.java:37) \\~\\[classes/:na\\]\nat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:758) \\~\\[spring-boot-3.0.1.jar:3.0.1\\]\n... 8 common frames omitted\nCaused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement &quot;INSERT INTO \\[\\*\\]USER VALUES(1, 'testuser')&quot;; expected &quot;identifier&quot;; SQL statement:\nINSERT INTO USER VALUES(1, 'testuser') \\[42001-214\\]\nat org.h2.message.DbException.getJdbcSQLException(DbException.java:502) \\~\\[h2-2.1.214.jar:2.1.214\\]\nat org.h2.message.DbException.getJdbcSQLException(DbException.java:477) \\~\\[h2-2.1.214.jar:2.1.214\\]\nat org.h2.message.DbException.getSyntaxError(DbException.java:261) \\~\\[h2-2.1.214.jar:2.1.214\\]\nat org.h2.command.Parser.readIdentifier(Parser.java:5656) \\~\\[h2-2.1.214.jar:2.1.214\\]\nat org.h2.command.Parser.readIdentifierWithSchema(Parser.java:5616) \\~\\[h2-2.1.214.jar:2.1.214\\]\nat org.h2.command.Parser.readTableOrView(Parser.java:8328) \\~\\[h2-2.1.214.jar:2.1.214\\]\nat org.h2.command.Parser.parseInsert(Parser.java:1632) \\~\\[h2-2.1.214.jar:2.1.214\\]\nat org.h2.command.Parser.parsePrepared(Parser.java:814) \\~\\[h2-2.1.214.jar:2.1.214\\]\nat org.h2.command.Parser.parse(Parser.java:689) \\~\\[h2-2.1.214.jar:2.1.214\\]\nat org.h2.command.Parser.parse(Parser.java:661) \\~\\[h2-2.1.214.jar:2.1.214\\]\nat org.h2.command.Parser.prepareCommand(Parser.java:569) \\~\\[h2-2.1.214.jar:2.1.214\\]\nat org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631) \\~\\[h2-2.1.214.jar:2.1.214\\]\nat org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554) \\~\\[h2-2.1.214.jar:2.1.214\\]\nat org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116) \\~\\[h2-2.1.214.jar:2.1.214\\]\nat org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237) \\~\\[h2-2.1.214.jar:2.1.214\\]\nat org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223) \\~\\[h2-2.1.214.jar:2.1.214\\]\nat com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) \\~\\[HikariCP-5.0.1.jar:na\\]\nat com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) \\~\\[HikariCP-5.0.1.jar:na\\]\nat org.springframework.jdbc.core.JdbcTemplate$1ExecuteStatementCallback.doInStatement(JdbcTemplate.java:422) \\~\\[spring-jdbc-6.0.3.jar:6.0.3\\]\nat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:381) \\~\\[spring-jdbc-6.0.3.jar:6.0.3\\]\n... 11 common frames omitted\n\n2023-01-05T23:47:29.853+09:00  INFO 6156 --- \\[  restartedMain\\] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'\n2023-01-05T23:47:30.061+09:00  WARN 6156 --- \\[  restartedMain\\] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add &quot;;DB_CLOSE_ON_EXIT=FALSE&quot; to the db URL) \\[90121-214\\]\n2023-01-05T23:47:30.062+09:00  INFO 6156 --- \\[  restartedMain\\] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\n2023-01-05T23:47:30.066+09:00  INFO 6156 --- \\[  restartedMain\\] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\n\nProcess finished with exit code 0\n</code></pre>\n"},{"tags":["java","android","date","time"],"comments":[{"owner":{"account_id":336705,"reputation":9153,"user_id":664512,"accept_rate":93,"display_name":"Varundroid"},"score":0,"creation_date":1446281456,"post_id":33449737,"comment_id":54686654,"body_markdown":"You need a server and an endpoint that returns you the correct date as device can only give you the device time.","body":"You need a server and an endpoint that returns you the correct date as device can only give you the device time."},{"owner":{"account_id":4964416,"reputation":3103,"user_id":4497248,"accept_rate":82,"display_name":"Hossein Rashno"},"score":0,"creation_date":1446281564,"post_id":33449737,"comment_id":54686677,"body_markdown":"@Varundroid So in that case if user was offline, he cant save the task","body":"@Varundroid So in that case if user was offline, he cant save the task"}],"answers":[{"tags":[],"owner":{"account_id":4964416,"reputation":3103,"user_id":4497248,"accept_rate":82,"display_name":"Hossein Rashno"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1604228060,"creation_date":1468131482,"answer_id":38289197,"question_id":33449737,"body_markdown":"**So I end up with a scenario for which a user at most will connect to internet just once per every device reboot.**\r\n\r\nI try to connect to a NTP server when user boots (`BOOT_COMPLETED BroadcastReceiver`) or Network states changed (`CONNECTIVITY_CHANGE and WIFI_STATE_CHANGED BroadcastReceiver`) and then I store that date and `SystemClock.elapsedRealtime()` in the database. After that when ever I want to have the correct date, I just get new `SystemClock.elapsedRealtime()` and calculate the difference of this value and the elapsedRealtime value from database and add that difference to date that I store in database. ","title":"How can I get correct current date and time for android device while device is offline","body":"<p><strong>So I end up with a scenario for which a user at most will connect to internet just once per every device reboot.</strong></p>\n<p>I try to connect to a NTP server when user boots (<code>BOOT_COMPLETED BroadcastReceiver</code>) or Network states changed (<code>CONNECTIVITY_CHANGE and WIFI_STATE_CHANGED BroadcastReceiver</code>) and then I store that date and <code>SystemClock.elapsedRealtime()</code> in the database. After that when ever I want to have the correct date, I just get new <code>SystemClock.elapsedRealtime()</code> and calculate the difference of this value and the elapsedRealtime value from database and add that difference to date that I store in database.</p>\n"},{"tags":[],"owner":{"account_id":6643996,"reputation":1451,"user_id":5128831,"display_name":"Homayoon Ahmadi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673074122,"creation_date":1673074122,"answer_id":75038584,"question_id":33449737,"body_markdown":"For others who have the same problem, there is a powerful library named TrueTime. To use it add it to your project dependencies:\r\n\r\n    implementation &#39;com.github.instacart.truetime-android:library-extension-rx:3.5&#39;\r\n\r\nin onCreate method of your `Application` class [if you use RxJava]:\r\n\r\n    TrueTimeRx.build()\r\n            .withLoggingEnabled(true)\r\n            .withSharedPreferencesCache(this)\r\n            .initializeRx(&quot;1.us.pool.ntp.org&quot;)\r\n            .subscribeOn(Schedulers.io())\r\n            .subscribe(date -&gt; Log.v(&quot;TrueTime&quot;, &quot;TrueTime initialized, time: &quot; + date),\r\n                    throwable -&gt; Log.e(&quot;TrueTime&quot;, &quot;TrueTime exception: &quot;, throwable)\r\n            );\r\n\r\nAnd for use:\r\n\r\n    if (TrueTimeRx.isInitialized()) {\r\n        Date reliableDateNow = TrueTimeRx.now();\r\n        // use the current date\r\n    }\r\n\r\nHow it works:\r\n\r\nIt uses NTP protocol to initialize datetime from network only once. And calculates datetime using SystemClock.elapsedRealtime(). If device is rebooted it will reinit the time using specified NTP servers.\r\n\r\nGithub repository:\r\nhttps://github.com/instacart/truetime-android/","title":"How can I get correct current date and time for android device while device is offline","body":"<p>For others who have the same problem, there is a powerful library named TrueTime. To use it add it to your project dependencies:</p>\n<pre><code>implementation 'com.github.instacart.truetime-android:library-extension-rx:3.5'\n</code></pre>\n<p>in onCreate method of your <code>Application</code> class [if you use RxJava]:</p>\n<pre><code>TrueTimeRx.build()\n        .withLoggingEnabled(true)\n        .withSharedPreferencesCache(this)\n        .initializeRx(&quot;1.us.pool.ntp.org&quot;)\n        .subscribeOn(Schedulers.io())\n        .subscribe(date -&gt; Log.v(&quot;TrueTime&quot;, &quot;TrueTime initialized, time: &quot; + date),\n                throwable -&gt; Log.e(&quot;TrueTime&quot;, &quot;TrueTime exception: &quot;, throwable)\n        );\n</code></pre>\n<p>And for use:</p>\n<pre><code>if (TrueTimeRx.isInitialized()) {\n    Date reliableDateNow = TrueTimeRx.now();\n    // use the current date\n}\n</code></pre>\n<p>How it works:</p>\n<p>It uses NTP protocol to initialize datetime from network only once. And calculates datetime using SystemClock.elapsedRealtime(). If device is rebooted it will reinit the time using specified NTP servers.</p>\n<p>Github repository:\n<a href=\"https://github.com/instacart/truetime-android/\" rel=\"nofollow noreferrer\">https://github.com/instacart/truetime-android/</a></p>\n"}],"owner":{"account_id":4964416,"reputation":3103,"user_id":4497248,"accept_rate":82,"display_name":"Hossein Rashno"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2548,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":38289197,"answer_count":2,"score":6,"last_activity_date":1673074122,"creation_date":1446281293,"question_id":33449737,"body_markdown":"I create an android app and in this app, users can save some tasks. Those tasks are saved in device and when user go online, tasks will be sync to server.\r\nI need to know the correct date and time when user save the task. Codes like `Calendar.getInstance()` or `new Date()` return device time and if device time was not correct, task save with wrong date. It&#39;s important for this app to work offline. And Because of bushiness of this app, It is possible that user change device time in purpose.","title":"How can I get correct current date and time for android device while device is offline","body":"<p>I create an android app and in this app, users can save some tasks. Those tasks are saved in device and when user go online, tasks will be sync to server.\nI need to know the correct date and time when user save the task. Codes like <code>Calendar.getInstance()</code> or <code>new Date()</code> return device time and if device time was not correct, task save with wrong date. It's important for this app to work offline. And Because of bushiness of this app, It is possible that user change device time in purpose.</p>\n"},{"tags":["java","android","cloudinary"],"comments":[{"owner":{"account_id":16445032,"reputation":131,"user_id":11880075,"display_name":"Michalk"},"score":0,"creation_date":1590495483,"post_id":62003857,"comment_id":109695316,"body_markdown":"The initialization should take place only once, you should call the init() function on the application level and not on an activity level.","body":"The initialization should take place only once, you should call the init() function on the application level and not on an activity level."},{"owner":{"account_id":9942935,"reputation":2114,"user_id":7358866,"display_name":"Darotudeen"},"score":0,"creation_date":1590527751,"post_id":62003857,"comment_id":109712567,"body_markdown":"thank you @Michalk","body":"thank you @Michalk"}],"answers":[{"tags":[],"owner":{"account_id":20794926,"reputation":1,"user_id":15272171,"display_name":"Ronak Thakkar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673073616,"creation_date":1673073616,"answer_id":75038563,"question_id":62003857,"body_markdown":"**KOTLIN**\r\ni fixed it by making a static object and making a function to start thr Instance if not initialized.\r\n\r\n **The Object **\r\n```\r\nobject ApplicationObject{\r\n    private var mediaManager: Any? = null\r\n\r\n    fun startMediaManager(context:Context){\r\n        if (mediaManager == null){\r\n            val config = HashMap&lt;String, Any&gt;()\r\n            config[&quot;cloud_name&quot;] = &quot;socialseller&quot;\r\n            config[&quot;secure&quot;] = false\r\n\r\n            mediaManager = MediaManager.init(context, config)\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nNote: Pass Application Context Only \r\n**In Activity** \r\n```\r\nApplicationObject.startMediaManager(this.applicationContext)\r\n```\r\n**In Fragment** \r\n```\r\nApplicationObject.startMediaManager(requireContext().applicationContext)\r\n```","title":"MediaManager is already initialized","body":"<p><strong>KOTLIN</strong>\ni fixed it by making a static object and making a function to start thr Instance if not initialized.</p>\n<p>**The Object **</p>\n<pre><code>object ApplicationObject{\n    private var mediaManager: Any? = null\n\n    fun startMediaManager(context:Context){\n        if (mediaManager == null){\n            val config = HashMap&lt;String, Any&gt;()\n            config[&quot;cloud_name&quot;] = &quot;socialseller&quot;\n            config[&quot;secure&quot;] = false\n\n            mediaManager = MediaManager.init(context, config)\n        }\n    }\n}\n</code></pre>\n<p>Note: Pass Application Context Only\n<strong>In Activity</strong></p>\n<pre><code>ApplicationObject.startMediaManager(this.applicationContext)\n</code></pre>\n<p><strong>In Fragment</strong></p>\n<pre><code>ApplicationObject.startMediaManager(requireContext().applicationContext)\n</code></pre>\n"}],"owner":{"account_id":9942935,"reputation":2114,"user_id":7358866,"display_name":"Darotudeen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":542,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1673073616,"creation_date":1590414812,"question_id":62003857,"body_markdown":"I want to upload image to Cloudinary. I have done this with firebase and it works well. But, the client wants Cloudinary. \r\n\r\nI am passing byte-array as seen below\r\n\r\n```\r\n    val outputStream = ByteArrayOutputStream()\r\n    capture.compress(Bitmap.CompressFormat.JPEG, 100, outputStream)\r\n    val data = outputStream.toByteArray()\r\n\r\n    val config = HashMap&lt;String, String&gt;()\r\n    config.put(&quot;cloud_name&quot;, &quot;carflux&quot;)\r\n    MediaManager.init(requireContext(), config)\r\n\r\n    val uploadRequest = MediaManager.get().upload(data).unsigned(&quot;of6bplnq&quot;)\r\n        .option(&quot;resource_type&quot;, &quot;image&quot;)\r\n        .maxFileSize(5 * 1024 * 1024)\r\n    uploadRequest.dispatch(requireContext())\r\n```\r\nI get the error ```MediaManager is already initialized```\r\n\r\nI have checked thoroughly I have only initialized it at a place.\r\n\r\nIs there something else I&#39;m doing wrong?","title":"MediaManager is already initialized","body":"<p>I want to upload image to Cloudinary. I have done this with firebase and it works well. But, the client wants Cloudinary. </p>\n\n<p>I am passing byte-array as seen below</p>\n\n<pre><code>    val outputStream = ByteArrayOutputStream()\n    capture.compress(Bitmap.CompressFormat.JPEG, 100, outputStream)\n    val data = outputStream.toByteArray()\n\n    val config = HashMap&lt;String, String&gt;()\n    config.put(\"cloud_name\", \"carflux\")\n    MediaManager.init(requireContext(), config)\n\n    val uploadRequest = MediaManager.get().upload(data).unsigned(\"of6bplnq\")\n        .option(\"resource_type\", \"image\")\n        .maxFileSize(5 * 1024 * 1024)\n    uploadRequest.dispatch(requireContext())\n</code></pre>\n\n<p>I get the error <code>MediaManager is already initialized</code></p>\n\n<p>I have checked thoroughly I have only initialized it at a place.</p>\n\n<p>Is there something else I'm doing wrong?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":967624,"reputation":10828,"user_id":990750,"accept_rate":50,"display_name":"Tarik"},"score":0,"creation_date":1673069150,"post_id":75038277,"comment_id":132419955,"body_markdown":"Did you input a place?","body":"Did you input a place?"},{"owner":{"account_id":18655,"reputation":4922,"user_id":42962,"accept_rate":71,"display_name":"hooknc"},"score":1,"creation_date":1673069491,"post_id":75038277,"comment_id":132419986,"body_markdown":"`System.out.print` vs `System.out.println` and/or adding and extra blank `System.out.println(&quot;&quot;);` here or there should help out a bit...","body":"<code>System.out.print</code> vs <code>System.out.println</code> and/or adding and extra blank <code>System.out.println(&quot;&quot;);</code> here or there should help out a bit..."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1673072940,"post_id":75038277,"comment_id":132420310,"body_markdown":"Does this answer your question? [Scanner is skipping nextLine() after using next() or nextFoo()?](https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo\">Scanner is skipping nextLine() after using next() or nextFoo()?</a>"}],"answers":[{"tags":[],"owner":{"account_id":11084453,"reputation":211,"user_id":8138689,"display_name":"Satyajit Bhatt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673071357,"creation_date":1673071054,"answer_id":75038400,"question_id":75038277,"body_markdown":"Try below snippet it will definitely work :\r\n\r\n    public static void main(String[] args) {\r\n            Scanner keyboard = new Scanner(System.in);\r\n            System.out.print(&quot;Enter a name: &quot;);\r\n            String name = keyboard.nextLine();\r\n    \r\n            System.out.print(&quot;Enter a number: &quot;);\r\n            int number = keyboard.nextInt();\r\n    \r\n            System.out.print(&quot;Enter a place: &quot;);\r\n            keyboard.next();\r\n            String place = keyboard.nextLine();\r\n    \r\n            System.out.print(&quot;Enter a college: &quot;);\r\n            keyboard.next();\r\n            String college = keyboard.nextLine();\r\n    \r\n            System.out.print(&quot;Enter a profession: &quot;);\r\n            String profession = keyboard.nextLine();\r\n    \r\n            System.out.print(&quot;Enter a animal: &quot;);\r\n            String animal = keyboard.nextLine();\r\n    \r\n            System.out.print(&quot;Enter a pet name: &quot;);\r\n            String petName = keyboard.nextLine();\r\n        }","title":"Learning Java, why is the scanner printing two of the questions on the same line?","body":"<p>Try below snippet it will definitely work :</p>\n<pre><code>public static void main(String[] args) {\n        Scanner keyboard = new Scanner(System.in);\n        System.out.print(&quot;Enter a name: &quot;);\n        String name = keyboard.nextLine();\n\n        System.out.print(&quot;Enter a number: &quot;);\n        int number = keyboard.nextInt();\n\n        System.out.print(&quot;Enter a place: &quot;);\n        keyboard.next();\n        String place = keyboard.nextLine();\n\n        System.out.print(&quot;Enter a college: &quot;);\n        keyboard.next();\n        String college = keyboard.nextLine();\n\n        System.out.print(&quot;Enter a profession: &quot;);\n        String profession = keyboard.nextLine();\n\n        System.out.print(&quot;Enter a animal: &quot;);\n        String animal = keyboard.nextLine();\n\n        System.out.print(&quot;Enter a pet name: &quot;);\n        String petName = keyboard.nextLine();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27459396,"reputation":1,"user_id":20950250,"display_name":"Tulasiram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673072112,"creation_date":1673072112,"answer_id":75038463,"question_id":75038277,"body_markdown":"The nextLine() method of java.util.Scanner class advances this scanner past the current line and returns the input that was skipped. This function prints the rest of the current line, leaving out the line separator at the end.\r\n\r\n    enter code here\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            String name, place, college, profession, animal, petName;\r\n            int number;\r\n    \r\n            Scanner keyboard = new Scanner(System.in);\r\n    \r\n            System.out.print(&quot;Enter a name: &quot;);\r\n            name = keyboard.nextLine();\r\n    \r\n            System.out.print(&quot;Enter a number: &quot;);\r\n            number = keyboard.nextInt();\r\n    \r\n            System.out.print(&quot;Enter a place: &quot;);\r\n            place = keyboard.nextLine();\r\n            keyboard.nextLine(); //brings to next line\r\n    \r\n            System.out.print(&quot;Enter a college: &quot;);\r\n            college = keyboard.nextLine();\r\n    \r\n            System.out.print(&quot;Enter a profession: &quot;);\r\n            profession = keyboard.nextLine();\r\n    \r\n            System.out.print(&quot;Enter a animal: &quot;);\r\n            animal = keyboard.nextLine();\r\n    \r\n            System.out.print(&quot;Enter a pet name: &quot;);\r\n            petName = keyboard.nextLine();\r\n    \r\n            keyboard.close();\r\n    \r\n        }\r\n    }","title":"Learning Java, why is the scanner printing two of the questions on the same line?","body":"<p>The nextLine() method of java.util.Scanner class advances this scanner past the current line and returns the input that was skipped. This function prints the rest of the current line, leaving out the line separator at the end.</p>\n<pre><code>enter code here\n\nimport java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        String name, place, college, profession, animal, petName;\n        int number;\n\n        Scanner keyboard = new Scanner(System.in);\n\n        System.out.print(&quot;Enter a name: &quot;);\n        name = keyboard.nextLine();\n\n        System.out.print(&quot;Enter a number: &quot;);\n        number = keyboard.nextInt();\n\n        System.out.print(&quot;Enter a place: &quot;);\n        place = keyboard.nextLine();\n        keyboard.nextLine(); //brings to next line\n\n        System.out.print(&quot;Enter a college: &quot;);\n        college = keyboard.nextLine();\n\n        System.out.print(&quot;Enter a profession: &quot;);\n        profession = keyboard.nextLine();\n\n        System.out.print(&quot;Enter a animal: &quot;);\n        animal = keyboard.nextLine();\n\n        System.out.print(&quot;Enter a pet name: &quot;);\n        petName = keyboard.nextLine();\n\n        keyboard.close();\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":14375951,"reputation":1,"user_id":10384391,"display_name":"Kieran_M"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1673072112,"creation_date":1673068871,"question_id":75038277,"body_markdown":"```\r\nimport java.util.Scanner;\r\n\r\npublic class MadLibs {\r\n    public static void main(String[] args) {\r\n        String name, place, college, profession, animal, petName;\r\n        int number;\r\n\r\n        Scanner keyboard = new Scanner(System.in);\r\n\r\n        System.out.print(&quot;Enter a name: &quot;);\r\n        name = keyboard.nextLine();\r\n\r\n        System.out.print(&quot;Enter a number: &quot;);\r\n        number = keyboard.nextInt();\r\n\r\n        System.out.print(&quot;Enter a place: &quot;);\r\n        place = keyboard.nextLine();\r\n\r\n        System.out.print(&quot;Enter a college: &quot;);\r\n        college = keyboard.nextLine();\r\n\r\n        System.out.print(&quot;Enter a profession: &quot;);\r\n        profession = keyboard.nextLine();\r\n\r\n        System.out.print(&quot;Enter a animal: &quot;);\r\n        animal = keyboard.nextLine();\r\n\r\n        System.out.print(&quot;Enter a pet name: &quot;);\r\n        petName = keyboard.nextLine();\r\n\r\n        keyboard.close();\r\n\r\n    }\r\n}\r\n```\r\n[console results](https://i.stack.imgur.com/vdLmE.png)\r\n\r\nCan&#39;t figure out why &quot;enter a college&quot; and &quot;enter a place&quot; are printing on the same line and not acting as separate inputs. ","title":"Learning Java, why is the scanner printing two of the questions on the same line?","body":"<pre><code>import java.util.Scanner;\n\npublic class MadLibs {\n    public static void main(String[] args) {\n        String name, place, college, profession, animal, petName;\n        int number;\n\n        Scanner keyboard = new Scanner(System.in);\n\n        System.out.print(&quot;Enter a name: &quot;);\n        name = keyboard.nextLine();\n\n        System.out.print(&quot;Enter a number: &quot;);\n        number = keyboard.nextInt();\n\n        System.out.print(&quot;Enter a place: &quot;);\n        place = keyboard.nextLine();\n\n        System.out.print(&quot;Enter a college: &quot;);\n        college = keyboard.nextLine();\n\n        System.out.print(&quot;Enter a profession: &quot;);\n        profession = keyboard.nextLine();\n\n        System.out.print(&quot;Enter a animal: &quot;);\n        animal = keyboard.nextLine();\n\n        System.out.print(&quot;Enter a pet name: &quot;);\n        petName = keyboard.nextLine();\n\n        keyboard.close();\n\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/vdLmE.png\" rel=\"nofollow noreferrer\">console results</a></p>\n<p>Can't figure out why &quot;enter a college&quot; and &quot;enter a place&quot; are printing on the same line and not acting as separate inputs.</p>\n"},{"tags":["java","string","data-structures","fixed"],"comments":[{"owner":{"account_id":16400961,"reputation":814,"user_id":11846953,"display_name":"John Bayko"},"score":0,"creation_date":1673074506,"post_id":75038459,"comment_id":132420467,"body_markdown":"It depends on how you will use `Message`. I&#39;m of the opinion that any input should be parsed immediately to an internally useful form, and formatting occur only upon output. So if message fields mean something, define fields with proper names and types (`int`, `String`, `SomeEnum`, etc.). Otherwise if you just need to move the contents around blindly, a `Map` of `Pair`s would be fine.","body":"It depends on how you will use <code>Message</code>. I&#39;m of the opinion that any input should be parsed immediately to an internally useful form, and formatting occur only upon output. So if message fields mean something, define fields with proper names and types (<code>int</code>, <code>String</code>, <code>SomeEnum</code>, etc.). Otherwise if you just need to move the contents around blindly, a <code>Map</code> of <code>Pair</code>s would be fine."},{"owner":{"account_id":17498998,"reputation":33,"user_id":12689697,"display_name":"ICC"},"score":0,"creation_date":1673278160,"post_id":75038459,"comment_id":132457039,"body_markdown":"Problem with proper names and types is that the information carried by a field needs to contain : it&#39;s name, an id and a value.\nBesides using Pair, I would declare my own type that has an id and a value, but that will be very similar to a Pair.","body":"Problem with proper names and types is that the information carried by a field needs to contain : it&#39;s name, an id and a value. Besides using Pair, I would declare my own type that has an id and a value, but that will be very similar to a Pair."},{"owner":{"account_id":16400961,"reputation":814,"user_id":11846953,"display_name":"John Bayko"},"score":0,"creation_date":1673325577,"post_id":75038459,"comment_id":132467846,"body_markdown":"My other suggestion was a `Map` to map the names to pairs, but again, that depends on how you use them in the end. Without knowing that, that&#39;s the best I can suggest.","body":"My other suggestion was a <code>Map</code> to map the names to pairs, but again, that depends on how you use them in the end. Without knowing that, that&#39;s the best I can suggest."}],"owner":{"account_id":17498998,"reputation":33,"user_id":12689697,"display_name":"ICC"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673072068,"creation_date":1673072068,"question_id":75038459,"body_markdown":"I have a requirement to send a message to another system.\r\nThe message is in the form of a string made of multiple key-value pairs. It&#39;s what&#39;s called a fixed message.They key is predefined int and the value a string,int,float etc \r\n\r\nEq:\r\n```\r\n   beginKey=XA#|key1=value1|key2=value2 ... \r\n```\r\n\r\nSome of these fields have default, some are static, some get modified or computed when the object is build.\r\n\r\nI thought of using a simple pojo with each field being a Pair&lt;Integer,String&gt; trying to have in this way all the information : the key, value and the name of the field. \r\nI also thought providing a builder that can set some defaults as well. \r\n\r\nHow would you model an object to keep this data and interact with it in a clean way. \r\n\r\nAny idea to make this better is appreciated ? \r\nThanks\r\n\r\n```\r\n@Builder\r\npublic class Message {\r\n\r\n@Builder.Default\r\nprivate Pair&lt;Integer, String&gt; beginKey = Pair.of(123,&quot;XA#&quot;);\r\nprivate Pair&lt;Integer, String&gt; key1;\r\nprivate Pair&lt;Integer, String&gt; key2;\r\n...\r\n\r\npublic String toString() {\r\n\r\n  StringJoiner formattedString = new StringJoiner(&quot;|&quot;);\r\n  formattedString.add(beginKey);\r\n  formattedString.add(key1);\r\n  formattedString.add(key2);\r\n  \r\n  return formattedString.toString();\r\n}\r\n```","title":"Appropriate data structure for a long string made of key - value pairs","body":"<p>I have a requirement to send a message to another system.\nThe message is in the form of a string made of multiple key-value pairs. It's what's called a fixed message.They key is predefined int and the value a string,int,float etc</p>\n<p>Eq:</p>\n<pre><code>   beginKey=XA#|key1=value1|key2=value2 ... \n</code></pre>\n<p>Some of these fields have default, some are static, some get modified or computed when the object is build.</p>\n<p>I thought of using a simple pojo with each field being a Pair&lt;Integer,String&gt; trying to have in this way all the information : the key, value and the name of the field.\nI also thought providing a builder that can set some defaults as well.</p>\n<p>How would you model an object to keep this data and interact with it in a clean way.</p>\n<p>Any idea to make this better is appreciated ?\nThanks</p>\n<pre><code>@Builder\npublic class Message {\n\n@Builder.Default\nprivate Pair&lt;Integer, String&gt; beginKey = Pair.of(123,&quot;XA#&quot;);\nprivate Pair&lt;Integer, String&gt; key1;\nprivate Pair&lt;Integer, String&gt; key2;\n...\n\npublic String toString() {\n\n  StringJoiner formattedString = new StringJoiner(&quot;|&quot;);\n  formattedString.add(beginKey);\n  formattedString.add(key1);\n  formattedString.add(key2);\n  \n  return formattedString.toString();\n}\n</code></pre>\n"},{"tags":["java","maven","class","build"],"comments":[{"owner":{"account_id":5445861,"reputation":339,"user_id":4332437,"display_name":"Claudio Corsi"},"score":0,"creation_date":1472580755,"post_id":39234157,"comment_id":65805872,"body_markdown":"This is probably what you are looking for http://stackoverflow.com/questions/1729054/including-dependencies-in-a-jar-with-maven","body":"This is probably what you are looking for <a href=\"http://stackoverflow.com/questions/1729054/including-dependencies-in-a-jar-with-maven\" title=\"including dependencies in a jar with maven\">stackoverflow.com/questions/1729054/&hellip;</a>"},{"owner":{"account_id":6934575,"reputation":1610,"user_id":6278404,"accept_rate":43,"display_name":"tsaebeht"},"score":0,"creation_date":1472582325,"post_id":39234157,"comment_id":65806699,"body_markdown":"I tried that dude. Same errpr","body":"I tried that dude. Same errpr"}],"answers":[{"tags":[],"owner":{"account_id":4500635,"reputation":3691,"user_id":3659226,"accept_rate":36,"display_name":"RITZ XAVI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472583100,"creation_date":1472583100,"answer_id":39235044,"question_id":39234157,"body_markdown":"You will have to use the maven shade plugin. For Eg.\r\n\r\n    &lt;plugin&gt;\r\n\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.4.3&lt;/version&gt;\r\n\t\t&lt;executions&gt;\r\n\t\t\t&lt;execution&gt;\r\n\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t&lt;goal&gt;shade&lt;/goal&gt;\r\n\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;createDendencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;      // this is optional\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/execution&gt;\r\n\t\t&lt;/executions&gt;\r\n\t&lt;/plugin&gt;\r\n\r\nWhat this will do is, it will create one single jar which would contain your compiled java code as well as the contents of all the jar dependencies that you mention in you pom. \r\nThis is almost like you extracting all the jars in some location and creating one single jar out of this location.","title":"Maven build failing after adding classpath and dependencies in lib folder in pom.xml NoClassDefFoundError","body":"<p>You will have to use the maven shade plugin. For Eg.</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.4.3&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;shade&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;createDendencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;      // this is optional\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>What this will do is, it will create one single jar which would contain your compiled java code as well as the contents of all the jar dependencies that you mention in you pom. \nThis is almost like you extracting all the jars in some location and creating one single jar out of this location.</p>\n"},{"tags":[],"owner":{"account_id":7815129,"reputation":3299,"user_id":5910091,"display_name":"ujulu"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1472584593,"creation_date":1472584593,"answer_id":39235447,"question_id":39234157,"body_markdown":"Here is the JavaDoc for the `NoClassDefFoundException`:\r\n\r\n&gt; Thrown if the Java Virtual Machine or a &lt;code&gt;ClassLoader&lt;/code&gt; instance\r\n tries to load in the definition of a class (as part of a normal method call\r\n or as part of creating a new instance using the &lt;code&gt;new&lt;/code&gt; expression)\r\n and no definition of the class could be found. \r\n&lt;p&gt;\r\n  The searched-for class definition existed when the currently\r\n  executing class was compiled, but the definition can no longer be\r\n  found.\r\n\r\nand the scope `provided` means that the JDK or the container provide the dependency. As you are trying to execute your program as standalone on Java SE and if your library is not part of JDK your dependency will not be available at runtime, and hence throwing this exception.\r\n\r\nSo either remove the `&lt;scope&gt;provided&lt;/scope&gt;` so that the default applies or change it to `compile` instead.","title":"Maven build failing after adding classpath and dependencies in lib folder in pom.xml NoClassDefFoundError","body":"<p>Here is the JavaDoc for the <code>NoClassDefFoundException</code>:</p>\n\n<blockquote>\n  <p>Thrown if the Java Virtual Machine or a <code>ClassLoader</code> instance\n   tries to load in the definition of a class (as part of a normal method call\n   or as part of creating a new instance using the <code>new</code> expression)\n   and no definition of the class could be found. \n  <p>\n    The searched-for class definition existed when the currently\n    executing class was compiled, but the definition can no longer be\n    found.</p>\n</blockquote>\n\n<p>and the scope <code>provided</code> means that the JDK or the container provide the dependency. As you are trying to execute your program as standalone on Java SE and if your library is not part of JDK your dependency will not be available at runtime, and hence throwing this exception.</p>\n\n<p>So either remove the <code>&lt;scope&gt;provided&lt;/scope&gt;</code> so that the default applies or change it to <code>compile</code> instead.</p>\n"}],"owner":{"account_id":6934575,"reputation":1610,"user_id":6278404,"accept_rate":43,"display_name":"tsaebeht"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1421,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":39235447,"answer_count":2,"score":0,"last_activity_date":1673071315,"creation_date":1472579934,"question_id":39234157,"body_markdown":"I have an app I built in Java and successfully compiled in Maven. After building I go to the target folder and run `java -jar *projectfilename*.jar` and I get the following error:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/jibble/pircbot/PircBot\r\n        at java.lang.ClassLoader.defineClass1(Native Method)\r\n        at java.lang.ClassLoader.defineClass(ClassLoader.java:763)\r\n        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n        at java.net.URLClassLoader.defineClass(URLClassLoader.java:467)\r\n        at java.net.URLClassLoader.access$100(URLClassLoader.java:73)\r\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:368)\r\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:362)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:361)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n        at io.github.bholagabbar.Main.setupIRCBot(Main.java:9)\r\n        at io.github.bholagabbar.Main.main(Main.java:27) Caused by: java.lang.ClassNotFoundException: org.jibble.pircbot.PircBot\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n\r\nNow `org/jibble/pircbot/PircBot` which was not found is actually one of my dependencies in my pom.xml.\r\n```xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;io.github.pixrat&lt;/groupId&gt;\r\n  &lt;artifactId&gt;gallurdo&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0&lt;/version&gt;\r\n  &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n  &lt;name&gt;gallurdo&lt;/name&gt;\r\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;copy&lt;/id&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n              &lt;outputDirectory&gt;\r\n                ${project.build.directory}/lib\r\n              &lt;/outputDirectory&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.2&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;archive&gt;\r\n            &lt;manifest&gt;\r\n              &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n              &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\r\n              &lt;mainClass&gt;io.github.pixrat.Main&lt;/mainClass&gt;\r\n            &lt;/manifest&gt;\r\n          &lt;/archive&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n\r\n  &lt;repositories&gt;\r\n    &lt;repository&gt;\r\n      &lt;id&gt;jitpack.io&lt;/id&gt;\r\n      &lt;url&gt;https://jitpack.io&lt;/url&gt;\r\n    &lt;/repository&gt;\r\n  &lt;/repositories&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;3.8.1&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;pircbot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;pircbot&lt;/artifactId&gt;\r\n      &lt;version&gt;1.5.0&lt;/version&gt;\r\n      &lt;type&gt;jar&lt;/type&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.github.Ullink&lt;/groupId&gt;\r\n      &lt;artifactId&gt;simple-slack-api&lt;/artifactId&gt;\r\n      &lt;version&gt;0.5.1&lt;/version&gt;\r\n      &lt;type&gt;jar&lt;/type&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\nI have referred to answer here [Maven: NoClassDefFoundError in the main thread](https://stackoverflow.com/questions/5797860/maven-noclassdeffounderror-in-the-main-thread), [Maven: NoClassDefFoundError in the main thread](https://stackoverflow.com/questions/5797860/maven-noclassdeffounderror-in-the-main-thread) and many other places but in vain. I&#39;d appreciate some help thanks\r\n\r\n","title":"Maven build failing after adding classpath and dependencies in lib folder in pom.xml NoClassDefFoundError","body":"<p>I have an app I built in Java and successfully compiled in Maven. After building I go to the target folder and run <code>java -jar *projectfilename*.jar</code> and I get the following error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/jibble/pircbot/PircBot\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:763)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:467)\n    at java.net.URLClassLoader.access$100(URLClassLoader.java:73)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:368)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:362)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:361)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    at io.github.bholagabbar.Main.setupIRCBot(Main.java:9)\n    at io.github.bholagabbar.Main.main(Main.java:27) Caused by: java.lang.ClassNotFoundException: org.jibble.pircbot.PircBot\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n</code></pre>\n<p>Now <code>org/jibble/pircbot/PircBot</code> which was not found is actually one of my dependencies in my pom.xml.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;io.github.pixrat&lt;/groupId&gt;\n  &lt;artifactId&gt;gallurdo&lt;/artifactId&gt;\n  &lt;version&gt;1.0&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n\n  &lt;name&gt;gallurdo&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;copy&lt;/id&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n              &lt;outputDirectory&gt;\n                ${project.build.directory}/lib\n              &lt;/outputDirectory&gt;\n            &lt;/configuration&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.3.2&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;archive&gt;\n            &lt;manifest&gt;\n              &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n              &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n              &lt;mainClass&gt;io.github.pixrat.Main&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n          &lt;/archive&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n\n  &lt;repositories&gt;\n    &lt;repository&gt;\n      &lt;id&gt;jitpack.io&lt;/id&gt;\n      &lt;url&gt;https://jitpack.io&lt;/url&gt;\n    &lt;/repository&gt;\n  &lt;/repositories&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;pircbot&lt;/groupId&gt;\n      &lt;artifactId&gt;pircbot&lt;/artifactId&gt;\n      &lt;version&gt;1.5.0&lt;/version&gt;\n      &lt;type&gt;jar&lt;/type&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.github.Ullink&lt;/groupId&gt;\n      &lt;artifactId&gt;simple-slack-api&lt;/artifactId&gt;\n      &lt;version&gt;0.5.1&lt;/version&gt;\n      &lt;type&gt;jar&lt;/type&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I have referred to answer here <a href=\"https://stackoverflow.com/questions/5797860/maven-noclassdeffounderror-in-the-main-thread\">Maven: NoClassDefFoundError in the main thread</a>, <a href=\"https://stackoverflow.com/questions/5797860/maven-noclassdeffounderror-in-the-main-thread\">Maven: NoClassDefFoundError in the main thread</a> and many other places but in vain. I'd appreciate some help thanks</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":0,"creation_date":1648174927,"post_id":71611438,"comment_id":126563828,"body_markdown":"You&#39;re starting at index `0` and reading up to `&lt; length`, so yeah, *&quot;[...]  in this program it reads the binary number from left to right [...]&quot;*.","body":"You&#39;re starting at index <code>0</code> and reading up to <code>&lt; length</code>, so yeah, <i>&quot;[...]  in this program it reads the binary number from left to right [...]&quot;</i>."},{"owner":{"account_id":20965832,"reputation":1,"user_id":15404131,"display_name":"hey world"},"score":2,"creation_date":1648175177,"post_id":71611438,"comment_id":126563881,"body_markdown":"I think I got an answer to my problem. The .charAt() returns a char not an integer. and that char which is 49 for representing 1 and 50 for 0 is being calculated as an int of value 50 or 49. \nActually, when the variable is being dealt with like an integer, it&#39;s 49 or 50. When as string it is 1 or 0;","body":"I think I got an answer to my problem. The .charAt() returns a char not an integer. and that char which is 49 for representing 1 and 50 for 0 is being calculated as an int of value 50 or 49.  Actually, when the variable is being dealt with like an integer, it&#39;s 49 or 50. When as string it is 1 or 0;"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1648206559,"post_id":71611438,"comment_id":126571424,"body_markdown":"You dont need to remember the Unicode numbers. Just use the right syntax: `if(currentChar != &#39;0&#39; &amp;&amp; currentChar != &#39;1&#39;) { /* invalid */ }` note that the character is not only invalid when it is bigger than `1`, it is also invalid when it is smaller than `0`, as theres no guaranty that the user only entered digits. Of course, you also have to convert the character to a number, e.g. `currentChar - &#39;0&#39;`. But thats only for educational purposes, use [`Character.digit(currentChar, 2)`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Character.html#digit(char,int)) instead","body":"You dont need to remember the Unicode numbers. Just use the right syntax: <code>if(currentChar != &#39;0&#39; &amp;&amp; currentChar != &#39;1&#39;) { &#47;* invalid *&#47; }</code> note that the character is not only invalid when it is bigger than <code>1</code>, it is also invalid when it is smaller than <code>0</code>, as theres no guaranty that the user only entered digits. Of course, you also have to convert the character to a number, e.g. <code>currentChar - &#39;0&#39;</code>. But thats only for educational purposes, use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Character.html#digit(char,int)\" rel=\"nofollow noreferrer\"><code>Character.digit(currentChar, 2)</code></a> instead"}],"owner":{"account_id":20965832,"reputation":1,"user_id":15404131,"display_name":"hey world"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673071017,"creation_date":1648174511,"question_id":71611438,"body_markdown":"![problem description][1]\r\n\r\nI included the image with the problem I have to solve;\r\nI thought it should be easy. And expected my code to work. Yet it didn&#39;t...\r\nI don&#39;t car a a lot about a solution as much as knowing what I did wrong\r\n\r\nI know I need to start from right to left in reading the simple binary number (no encoding and not including negative values) as the power of 2 increases, but in this program it reads the binary number from left to right (like as a string)\r\n\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tScanner myScanner = new Scanner(System.in);\r\n\t\t\r\n\t\tSystem.out.println(&quot;Enter a 5-digit integer made of 0s and 1s:&quot;);\r\n\t\tString binaryNumber = myScanner.nextLine();\r\n\t\t\r\n\t\tint length = binaryNumber.length();\r\n\t\tint index = 0;\r\n\t\tint powerOfTwo = 1; // 2^0\r\n\t\tint decimalNumber = 0;\r\n\t\tint currentChar = 0;\r\n\t\tboolean isValid = true;\r\n\t\twhile(index &lt; length &amp;&amp; isValid) {\r\n\t\t\tcurrentChar = binaryNumber.charAt(index);\r\n\t\t\tif(currentChar &gt; 1 /*Therefore not a 0 or 1*/) {\r\n\t\t\t\tisValid = false;\r\n\t\t\t\tSystem.out.println(&quot;Error at index &quot;+index+&quot; which is &quot;+binaryNumber.charAt(index));\r\n\t\t\t}\r\n\t\t\tdecimalNumber += (binaryNumber.charAt(index) * powerOfTwo);\r\n\t\t  \tpowerOfTwo *= 2;\r\n\t\t  \tindex++;\r\n\t\t}\r\n\t\tif(isValid) {\r\n            System.out.println(binaryNumber+&quot; in decimal is &quot;+decimalNumber);\r\n\t\t} else {\r\n\t\t\tSystem.out.println(binaryNumber+&quot; is not valid &quot;);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nI tried removing where the script checks if a character is a (0 or 1) or not.\r\n```java\r\nif (currentChar \\&gt; 1 /\\**Therefore not a 0 or 1\\**/){....\r\n```\r\nThen it started calculating binary numbers like 0000 to be more than 0.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0LGWe.png","title":"Why is my java code here behaving this way where it returns true while it should return false? why if I remove the bool expression it still not work?","body":"<p><img src=\"https://i.stack.imgur.com/0LGWe.png\" alt=\"problem description\" /></p>\n<p>I included the image with the problem I have to solve;\nI thought it should be easy. And expected my code to work. Yet it didn't...\nI don't car a a lot about a solution as much as knowing what I did wrong</p>\n<p>I know I need to start from right to left in reading the simple binary number (no encoding and not including negative values) as the power of 2 increases, but in this program it reads the binary number from left to right (like as a string)</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        Scanner myScanner = new Scanner(System.in);\n        \n        System.out.println(&quot;Enter a 5-digit integer made of 0s and 1s:&quot;);\n        String binaryNumber = myScanner.nextLine();\n        \n        int length = binaryNumber.length();\n        int index = 0;\n        int powerOfTwo = 1; // 2^0\n        int decimalNumber = 0;\n        int currentChar = 0;\n        boolean isValid = true;\n        while(index &lt; length &amp;&amp; isValid) {\n            currentChar = binaryNumber.charAt(index);\n            if(currentChar &gt; 1 /*Therefore not a 0 or 1*/) {\n                isValid = false;\n                System.out.println(&quot;Error at index &quot;+index+&quot; which is &quot;+binaryNumber.charAt(index));\n            }\n            decimalNumber += (binaryNumber.charAt(index) * powerOfTwo);\n            powerOfTwo *= 2;\n            index++;\n        }\n        if(isValid) {\n            System.out.println(binaryNumber+&quot; in decimal is &quot;+decimalNumber);\n        } else {\n            System.out.println(binaryNumber+&quot; is not valid &quot;);\n        }\n    }\n}\n</code></pre>\n<p>I tried removing where the script checks if a character is a (0 or 1) or not.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (currentChar \\&gt; 1 /\\**Therefore not a 0 or 1\\**/){....\n</code></pre>\n<p>Then it started calculating binary numbers like 0000 to be more than 0.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1673102263,"post_id":75038256,"comment_id":132424575,"body_markdown":"Read [the documentation](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/System.html#arraycopy(java.lang.Object,int,java.lang.Object,int,int)).  If youre going to copy 1280 bytes, you need to make sure the destination array (`outputData`) is large enough to hold at least 1280 bytes.","body":"Read <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/System.html#arraycopy(java.lang.Object,int,java.lang.Object,int,int)\" rel=\"nofollow noreferrer\">the documentation</a>.  If youre going to copy 1280 bytes, you need to make sure the destination array (<code>outputData</code>) is large enough to hold at least 1280 bytes."}],"answers":[{"tags":[],"owner":{"account_id":8354342,"reputation":76,"user_id":6275236,"display_name":"Roland J."},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1673069694,"creation_date":1673069694,"answer_id":75038322,"question_id":75038256,"body_markdown":"I tried to reproduce your error with this code, but there is no exception\r\n\r\n    import org.junit.jupiter.api.Test;\r\n    \r\n    public class ByteArray {\r\n    \r\n        public byte[] exampleFunction() {\r\n            byte[] inputData = {0, 1, 2, 3, 4, 5, 6, 7};\r\n            byte[] outputData = new byte[8];\r\n            System.arraycopy(inputData, 0, outputData, 0, inputData.length);\r\n            return outputData;\r\n        }\r\n    \r\n        @Test\r\n        public void test() {\r\n            byte[] byteArray = exampleFunction();\r\n            for (int i = 0; i &lt; byteArray.length; i++) {\r\n                System.out.println(byteArray[i]);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nI don&#39;t know what `Codec2Link.codec2Decode` does. If you provide an executable version of your code it would be easier to help.","title":"Return byte[] by reference with System.arraycopy in Java","body":"<p>I tried to reproduce your error with this code, but there is no exception</p>\n<pre><code>import org.junit.jupiter.api.Test;\n\npublic class ByteArray {\n\n    public byte[] exampleFunction() {\n        byte[] inputData = {0, 1, 2, 3, 4, 5, 6, 7};\n        byte[] outputData = new byte[8];\n        System.arraycopy(inputData, 0, outputData, 0, inputData.length);\n        return outputData;\n    }\n\n    @Test\n    public void test() {\n        byte[] byteArray = exampleFunction();\n        for (int i = 0; i &lt; byteArray.length; i++) {\n            System.out.println(byteArray[i]);\n        }\n    }\n}\n</code></pre>\n<p>I don't know what <code>Codec2Link.codec2Decode</code> does. If you provide an executable version of your code it would be easier to help.</p>\n"}],"owner":{"account_id":3039928,"reputation":66,"user_id":2577210,"display_name":"mAyA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75038322,"answer_count":1,"score":0,"last_activity_date":1673069694,"creation_date":1673068527,"question_id":75038256,"body_markdown":"I am trying to return a byte array in a function parameter by reference. Here is my code:\r\n\r\n```\r\n@Override\r\npublic int exampleFunction(byte[] inputData, int inputDataSize, byte[] outputData) {\r\n        synchronized (mutex) {\r\n                try {\r\n                    byte[] received = Codec2Link.codec2Decode(inputData, inputData.length); //Returns byte array of length 640\r\n                    if (received.length == 640) {\r\n                        byte[] upperBytes = ByteUtils.convertUpper(received); //Returns byte array of length 1280\r\n                        System.arraycopy(upperBytes, 0, outputData, 0, upperBytes.length);\r\n                    } else\r\n                        System.out.println(&quot;Failed!&quot;);\r\n                } catch (Exception ex) {\r\n                    System.out.println(&quot;Error in Java!&quot;);\r\n                    ex.printStackTrace();\r\n                }\r\n\r\n            return 1280;\r\n        }\r\n    }\r\n```\r\n\r\nMy question, is it possible to pass the value in outputData by System.arraycopy? I have already tried. It gave me &quot;java.lang.ArrayIndexOutOfBoundsException&quot; at the time of System.arraycopy. What am I doing wrong here?","title":"Return byte[] by reference with System.arraycopy in Java","body":"<p>I am trying to return a byte array in a function parameter by reference. Here is my code:</p>\n<pre><code>@Override\npublic int exampleFunction(byte[] inputData, int inputDataSize, byte[] outputData) {\n        synchronized (mutex) {\n                try {\n                    byte[] received = Codec2Link.codec2Decode(inputData, inputData.length); //Returns byte array of length 640\n                    if (received.length == 640) {\n                        byte[] upperBytes = ByteUtils.convertUpper(received); //Returns byte array of length 1280\n                        System.arraycopy(upperBytes, 0, outputData, 0, upperBytes.length);\n                    } else\n                        System.out.println(&quot;Failed!&quot;);\n                } catch (Exception ex) {\n                    System.out.println(&quot;Error in Java!&quot;);\n                    ex.printStackTrace();\n                }\n\n            return 1280;\n        }\n    }\n</code></pre>\n<p>My question, is it possible to pass the value in outputData by System.arraycopy? I have already tried. It gave me &quot;java.lang.ArrayIndexOutOfBoundsException&quot; at the time of System.arraycopy. What am I doing wrong here?</p>\n"},{"tags":["java","dictionary","stream","sum","reduce"],"answers":[{"tags":[],"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1672982990,"creation_date":1672982990,"answer_id":75027254,"question_id":75027081,"body_markdown":"Your approach using *reduce* is (almost) correct. It should look like the second code snippet where you multiply the neuron&#39;s `output` with the value from the map (`inputConnections.get(..)`)\r\n\r\n```\r\ninputConnections.entrySet()\r\n        .stream()\r\n        .reduce(0f,\r\n                (result, entry) -&gt; result + entry.getKey().getOutput() * entry.getValue(),\r\n                Float::sum);\r\n```","title":"How to use Java streams and reduce() to get the sum of calculations with the key and value of the Map?","body":"<p>Your approach using <em>reduce</em> is (almost) correct. It should look like the second code snippet where you multiply the neuron's <code>output</code> with the value from the map (<code>inputConnections.get(..)</code>)</p>\n<pre><code>inputConnections.entrySet()\n        .stream()\n        .reduce(0f,\n                (result, entry) -&gt; result + entry.getKey().getOutput() * entry.getValue(),\n                Float::sum);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5823420,"reputation":785,"user_id":6656833,"display_name":"Pavel"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1672983287,"creation_date":1672983287,"answer_id":75027286,"question_id":75027081,"body_markdown":"you can also achieve the same with map and sum \r\n```java\r\ninputConnections.entrySet().stream().mapToDouble(entry -&gt; entry.getKey().getOutput() * entry.getValue()).sum()\r\n```","title":"How to use Java streams and reduce() to get the sum of calculations with the key and value of the Map?","body":"<p>you can also achieve the same with map and sum</p>\n<pre class=\"lang-java prettyprint-override\"><code>inputConnections.entrySet().stream().mapToDouble(entry -&gt; entry.getKey().getOutput() * entry.getValue()).sum()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8354342,"reputation":76,"user_id":6275236,"display_name":"Roland J."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673068789,"creation_date":1672988256,"answer_id":75027878,"question_id":75027081,"body_markdown":"You can also use [parallel streams][1] (be careful: only makes sense with huge datasets). In case you need some statistics additional to the `sum`, the collector `summarizingDouble` is helpful:\r\n\r\n    DoubleSummaryStatistics sumStat = connections.entrySet().parallelStream()\r\n                    .map(entry -&gt; Double.valueOf(entry.getKey().getOutput() * entry.getValue()))\r\n                    .collect(Collectors.summarizingDouble(Double::doubleValue));\r\n    System.out.println(sumStat);\r\n\r\nExample output: \r\nDoubleSummaryStatistics{count=3, sum=18.000000, min=4.000000, average=6.000000, max=8.000000}\r\n\r\n\r\nHere is a shorter version (thank you [Rob][2] for your comment):\r\n\r\n    sumStat = connections.entrySet().parallelStream()\r\n            .mapToDouble(entry -&gt; entry.getKey().getOutput() * entry.getValue())\r\n            .summaryStatistics();\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/collections/streams/parallelism.html#executing_streams_in_parallel\r\n  [2]: https://stackoverflow.com/users/1180351/rob-spoor","title":"How to use Java streams and reduce() to get the sum of calculations with the key and value of the Map?","body":"<p>You can also use <a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/parallelism.html#executing_streams_in_parallel\" rel=\"nofollow noreferrer\">parallel streams</a> (be careful: only makes sense with huge datasets). In case you need some statistics additional to the <code>sum</code>, the collector <code>summarizingDouble</code> is helpful:</p>\n<pre><code>DoubleSummaryStatistics sumStat = connections.entrySet().parallelStream()\n                .map(entry -&gt; Double.valueOf(entry.getKey().getOutput() * entry.getValue()))\n                .collect(Collectors.summarizingDouble(Double::doubleValue));\nSystem.out.println(sumStat);\n</code></pre>\n<p>Example output:\nDoubleSummaryStatistics{count=3, sum=18.000000, min=4.000000, average=6.000000, max=8.000000}</p>\n<p>Here is a shorter version (thank you <a href=\"https://stackoverflow.com/users/1180351/rob-spoor\">Rob</a> for your comment):</p>\n<pre><code>sumStat = connections.entrySet().parallelStream()\n        .mapToDouble(entry -&gt; entry.getKey().getOutput() * entry.getValue())\n        .summaryStatistics();\n</code></pre>\n"}],"owner":{"account_id":25219685,"reputation":87,"user_id":19056337,"display_name":"Wewius"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":359,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1673068789,"creation_date":1672981114,"question_id":75027081,"body_markdown":"I&#39;ll try to keep it as brief as possible.\r\n\r\nI hava this map: Map&lt;Neuron,Float&gt; connections. It contains a Neuron-Objekt as Key and the weight of the connection as value.\r\n\r\nThe Neuron class has a method &quot;getOutput&quot; to get the output-Value of the neuron.\r\n\r\nWhat I want to do is to go over every neuron in the map, calculate neuron.getOutput * connections.get(neuron) and sum all of that into one variable together.\r\n\r\nIs there an elegant way to do this with Java-Streams? Maybe with reduce? I tried it but couldn&#39;t get it to work properly.\r\n\r\n    inputConnections.keySet().stream().reduce(\r\n                0f,\r\n                (accumulatedFloat, inputNeuron) -&gt; accumulatedFloat + inputConnections.get(inputNeuron),\r\n                Float::sum);\r\n\r\nI guess the 0f results in everything getting multiplied with 0.\r\n\r\nThis code seems to work, but I&#39;d like a more elegant solution.\r\n\r\n    AtomicReference&lt;Float&gt; tmp = new AtomicReference&lt;&gt;(0f);\r\n        inputConnections.keySet().forEach(inputNeuron -&gt; {\r\n            tmp.updateAndGet(v -&gt; new Float((float) (v + inputNeuron.getOutput() * inputConnections.get(inputNeuron))));\r\n        });","title":"How to use Java streams and reduce() to get the sum of calculations with the key and value of the Map?","body":"<p>I'll try to keep it as brief as possible.</p>\n<p>I hava this map: Map&lt;Neuron,Float&gt; connections. It contains a Neuron-Objekt as Key and the weight of the connection as value.</p>\n<p>The Neuron class has a method &quot;getOutput&quot; to get the output-Value of the neuron.</p>\n<p>What I want to do is to go over every neuron in the map, calculate neuron.getOutput * connections.get(neuron) and sum all of that into one variable together.</p>\n<p>Is there an elegant way to do this with Java-Streams? Maybe with reduce? I tried it but couldn't get it to work properly.</p>\n<pre><code>inputConnections.keySet().stream().reduce(\n            0f,\n            (accumulatedFloat, inputNeuron) -&gt; accumulatedFloat + inputConnections.get(inputNeuron),\n            Float::sum);\n</code></pre>\n<p>I guess the 0f results in everything getting multiplied with 0.</p>\n<p>This code seems to work, but I'd like a more elegant solution.</p>\n<pre><code>AtomicReference&lt;Float&gt; tmp = new AtomicReference&lt;&gt;(0f);\n    inputConnections.keySet().forEach(inputNeuron -&gt; {\n        tmp.updateAndGet(v -&gt; new Float((float) (v + inputNeuron.getOutput() * inputConnections.get(inputNeuron))));\n    });\n</code></pre>\n"},{"tags":["java","android","mpandroidchart"],"comments":[{"owner":{"account_id":27419285,"reputation":3,"user_id":20917993,"display_name":"Alexis BLANC"},"score":0,"creation_date":1673042236,"post_id":74991862,"comment_id":132416641,"body_markdown":"Oh you&#39;ve right this work well when you use the right param... Big thanks","body":"Oh you&#39;ve right this work well when you use the right param... Big thanks"}],"answers":[{"tags":[],"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1673068597,"creation_date":1673068597,"answer_id":75038260,"question_id":74991862,"body_markdown":"You never use `value` in `getFormattedValue`. The string you construct there should be based on `value` or it will show the same thing for every axis entry. \r\n\r\nSomething like this:\r\n\r\n```java\r\n@Override\r\npublic String getFormattedValue(float value) {\r\n   return makeDateStringAt(value);\r\n}\r\n```\r\n\r\nFor example, if you have a chart with axis values at 0, 1, 2, 3 then `getFormattedValue` will be called 4 times with `0f`, `1f`, `1f`, and `3f` as its arguments and you should use those inputs to create the appropriate string to show at those positions on the axis.\r\n","title":"MPAndroid Chart set X in a realtime graph","body":"<p>You never use <code>value</code> in <code>getFormattedValue</code>. The string you construct there should be based on <code>value</code> or it will show the same thing for every axis entry.</p>\n<p>Something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic String getFormattedValue(float value) {\n   return makeDateStringAt(value);\n}\n</code></pre>\n<p>For example, if you have a chart with axis values at 0, 1, 2, 3 then <code>getFormattedValue</code> will be called 4 times with <code>0f</code>, <code>1f</code>, <code>1f</code>, and <code>3f</code> as its arguments and you should use those inputs to create the appropriate string to show at those positions on the axis.</p>\n"}],"owner":{"account_id":27419285,"reputation":3,"user_id":20917993,"display_name":"Alexis BLANC"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75038260,"answer_count":1,"score":0,"last_activity_date":1673068597,"creation_date":1672740756,"question_id":74991862,"body_markdown":"I work for my school project on MPAndroidChart especially a realtime graph, i would like to display Time of the value.\r\n\r\nI set a IndexAxisValueFormatter with a &quot;getFormattedValue&quot;, it work but refresh every label and not just the last, I try to have for each entry in my graph a XLabel who show the time, I really don&#39;t know how to do that you&#39;re help would be welcome.\r\n\r\n\r\nCode for create an entry and display it :\r\n\r\n```\r\nvoid creaGraph() {\r\n    ArrayList&lt;ILineDataSet&gt; dataSets = new ArrayList&lt;&gt;();\r\n    if (boxCO2.isChecked()) {\r\n        A_CO2.add(new Entry(indice, listData.recup_data(indice - 1).getCO2()));\r\n        LineDataSet setCO2 = new LineDataSet(A_CO2, &quot;CO2&quot;);\r\n        setCO2.setAxisDependency(YAxis.AxisDependency.LEFT);\r\n        paramSet(setCO2);\r\n\r\n        setCO2.setColor(Color.RED);\r\n        setCO2.setCircleColor(Color.RED);\r\n        dataSets.add(setCO2);\r\n    }\r\n\r\n    LineData data = new LineData(dataSets);\r\n    graph.setData(data);\r\n    data.notifyDataChanged();\r\n    graph.notifyDataSetChanged();\r\n    graph.invalidate();\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nThe override of getFormattedValue\r\n```\r\n\r\n@Override\r\n  public String getFormattedValue(float value) {\r\n      return listData.recup_data(GraphPage.indice - 1).getTemps();\r\n\r\n  }\r\n\r\n```\r\n\r\nAnd a picture of my issue\r\n[Every label are refresh when a new entry come](https://i.stack.imgur.com/I1SmX.png)\r\n\r\nAlso, I see after the 7th values entry no longer have a time values","title":"MPAndroid Chart set X in a realtime graph","body":"<p>I work for my school project on MPAndroidChart especially a realtime graph, i would like to display Time of the value.</p>\n<p>I set a IndexAxisValueFormatter with a &quot;getFormattedValue&quot;, it work but refresh every label and not just the last, I try to have for each entry in my graph a XLabel who show the time, I really don't know how to do that you're help would be welcome.</p>\n<p>Code for create an entry and display it :</p>\n<pre><code>void creaGraph() {\n    ArrayList&lt;ILineDataSet&gt; dataSets = new ArrayList&lt;&gt;();\n    if (boxCO2.isChecked()) {\n        A_CO2.add(new Entry(indice, listData.recup_data(indice - 1).getCO2()));\n        LineDataSet setCO2 = new LineDataSet(A_CO2, &quot;CO2&quot;);\n        setCO2.setAxisDependency(YAxis.AxisDependency.LEFT);\n        paramSet(setCO2);\n\n        setCO2.setColor(Color.RED);\n        setCO2.setCircleColor(Color.RED);\n        dataSets.add(setCO2);\n    }\n\n    LineData data = new LineData(dataSets);\n    graph.setData(data);\n    data.notifyDataChanged();\n    graph.notifyDataSetChanged();\n    graph.invalidate();\n\n}\n</code></pre>\n<p>The override of getFormattedValue</p>\n<pre><code>\n@Override\n  public String getFormattedValue(float value) {\n      return listData.recup_data(GraphPage.indice - 1).getTemps();\n\n  }\n\n</code></pre>\n<p>And a picture of my issue\n<a href=\"https://i.stack.imgur.com/I1SmX.png\" rel=\"nofollow noreferrer\">Every label are refresh when a new entry come</a></p>\n<p>Also, I see after the 7th values entry no longer have a time values</p>\n"},{"tags":["java","apache-poi","xlsx"],"comments":[{"owner":{"account_id":8467156,"reputation":3,"user_id":16933671,"display_name":"Renan Ofugi"},"score":0,"creation_date":1672956507,"post_id":75024840,"comment_id":132396273,"body_markdown":"The value **Jan-17** is obtained when using formatters","body":"The value <b>Jan-17</b> is obtained when using formatters"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1673027136,"post_id":75024840,"comment_id":132412540,"body_markdown":"This is not an error but is how Microsoft Excel localizes the date formats. The file always stores formats in en_US locale. That is `mmm-yy` for this format. The Excel GUI then interprets that format different dependent on the Excel and/or Windows locale settings. So the question is: What  Excel and/or Windows locale settings are you using which interprets the en_US date format `mmm-yy` so, that it shows Jan/17?","body":"This is not an error but is how Microsoft Excel localizes the date formats. The file always stores formats in en_US locale. That is <code>mmm-yy</code> for this format. The Excel GUI then interprets that format different dependent on the Excel and/or Windows locale settings. So the question is: What  Excel and/or Windows locale settings are you using which interprets the en_US date format <code>mmm-yy</code> so, that it shows Jan/17?"},{"owner":{"account_id":8467156,"reputation":3,"user_id":16933671,"display_name":"Renan Ofugi"},"score":0,"creation_date":1673040284,"post_id":75024840,"comment_id":132416119,"body_markdown":"so changing the locale in the excel settings would solve it?","body":"so changing the locale in the excel settings would solve it?"}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1673067775,"creation_date":1673065051,"answer_id":75038086,"question_id":75024840,"body_markdown":"This is not an error but is how Microsoft Excel localizes the date formats. Excel files always store formats in en_US locale. That is `mmm-yy` for this format.  It is the Excel built-in format with ID 17 (0x11, &quot;mmm-yy&quot;). See [BuiltinFormats](https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/BuiltinFormats.html). It gets applied when user inputs only month and year in a cell. For example: 1/17, which is month 1 in year 17.\r\n\r\nIn my German Excel this looks like so using German Windows locale:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\nThe Excel GUI then interprets that format different dependent on the Excel and/or Windows locale settings. For example, if I change the Windows locale settings to Portuguese (Brasil) in Control Panel - Time and Region:\r\n\r\n[![enter image description here][2]][2]\r\n \r\nthen it looks like so:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nNote, nothing has changed in Excel file. Only Windows locale settings have changed.\r\n\r\nUnfortunately Apache POI `DataFormatter` fails to interpret locale settings exactly like Excel does. \r\n\r\nFollowing code interprets the Excel built-in format with ID 17 (0x11, &quot;mmm-yy&quot;) as `mmm-yy` = Jan-17 using en_US locale. This is correct. But it interprets it as `mmm.-yy` = Jan.-17 using de_DE locale. This is wrong, should be `mmm yy` = Jan 17 like in Excel. And using pt_BR locale it interprets it as `mmm.-yy`= jan.-17. This is wrong too, should be `mmm/yy` = jan/17 like in Excel.\r\n\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import java.io.FileInputStream;\r\n    \r\n    class ReadExcel {\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      Workbook workbook = WorkbookFactory.create(new FileInputStream(&quot;./ExcelExampleIn.xlsx&quot;));\r\n      \r\n      // up to apache poi 5.1.0 a FormulaEvaluator is needed to evaluate the formulas while using DataFormatter\r\n      FormulaEvaluator evaluator = workbook.getCreationHelper().createFormulaEvaluator();  \r\n      \r\n      //DataFormatter dataFormatter = new DataFormatter(new java.util.Locale(&quot;en&quot;, &quot;US&quot;));\r\n      //DataFormatter dataFormatter = new DataFormatter(new java.util.Locale(&quot;de&quot;, &quot;DE&quot;));\r\n      DataFormatter dataFormatter = new DataFormatter(new java.util.Locale(&quot;pt&quot;, &quot;BR&quot;));\r\n      // from 5.2.0 on the DataFormatter can set to use cached values for formula cells\r\n      dataFormatter.setUseCachedValuesForFormulaCells(true);\r\n      \r\n      Sheet sheet = workbook.getSheetAt(0);\r\n      for (Row row : sheet) {\r\n       for (Cell cell : row) {\r\n        String pattern = cell.getCellStyle().getDataFormatString();\r\n     \tSystem.out.println(pattern);   \r\n        //String value = dataFormatter.formatCellValue(cell, evaluator); // up to apache poi 5.1.0\r\n        String value = dataFormatter.formatCellValue(cell); // from apache poi 5.2.0 on \r\n    \tSystem.out.println(value);\r\n       }\r\n      }\r\n      workbook.close();\r\n     }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yZk9I.png\r\n  [2]: https://i.stack.imgur.com/sspMj.png\r\n  [3]: https://i.stack.imgur.com/LrvGc.png\r\n\r\n\r\nTo overcome this incorrectness in Apache POI, one could add a special data format for the `mmm-yy` to the `DataFormatter` dependent on used locale. This can be achieved using [public void addFormat(java.lang.String excelFormatStr, java.text.Format format)](https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/DataFormatter.html#addFormat-java.lang.String-java.text.Format-).\r\n\r\nComplete example again:\r\n\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.util.LocaleUtil;\r\n    import java.io.FileInputStream;\r\n    \r\n    class ReadExcel {\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      Workbook workbook = WorkbookFactory.create(new FileInputStream(&quot;./ExcelExampleIn.xlsx&quot;));\r\n      \r\n      // up to apache poi 5.1.0 a FormulaEvaluator is needed to evaluate the formulas while using DataFormatter\r\n      FormulaEvaluator evaluator = workbook.getCreationHelper().createFormulaEvaluator();  \r\n      \r\n      //LocaleUtil.setUserLocale(new java.util.Locale(&quot;en&quot;, &quot;US&quot;));\r\n      //LocaleUtil.setUserLocale(new java.util.Locale(&quot;de&quot;, &quot;DE&quot;));\r\n      LocaleUtil.setUserLocale(new java.util.Locale(&quot;pt&quot;, &quot;BR&quot;));\r\n    \r\n      DataFormatter dataFormatter = new DataFormatter(); // uses user locale set\r\n      // from 5.2.0 on the DataFormatter can set to use cached values for formula cells\r\n      dataFormatter.setUseCachedValuesForFormulaCells(true);\r\n      \r\n      if (LocaleUtil.getUserLocale().equals(new java.util.Locale(&quot;de&quot;, &quot;DE&quot;))) {\r\n       dataFormatter.addFormat(&quot;mmm-yy&quot;, new java.text.SimpleDateFormat(&quot;MMM yy&quot;, new java.util.Locale(&quot;en&quot;, &quot;US&quot;)));\r\n      } else if (LocaleUtil.getUserLocale().equals(new java.util.Locale(&quot;en&quot;, &quot;US&quot;))) {\r\n       dataFormatter.addFormat(&quot;mmm-yy&quot;, new java.text.SimpleDateFormat(&quot;MMM-yy&quot;, new java.util.Locale(&quot;en&quot;, &quot;US&quot;)));\r\n      } else if (LocaleUtil.getUserLocale().equals(new java.util.Locale(&quot;pt&quot;, &quot;BR&quot;))) {\r\n       dataFormatter.addFormat(&quot;mmm-yy&quot;, new java.text.SimpleDateFormat(&quot;MMM/yy&quot;, new java.util.Locale(&quot;en&quot;, &quot;US&quot;)));\r\n      }\r\n      \r\n      Sheet sheet = workbook.getSheetAt(0);\r\n      for (Row row : sheet) {\r\n       for (Cell cell : row) {\r\n        String pattern = cell.getCellStyle().getDataFormatString();\r\n     \tSystem.out.println(pattern);   \r\n        //String value = dataFormatter.formatCellValue(cell, evaluator); // up to apache poi 5.1.0\r\n        String value = dataFormatter.formatCellValue(cell); // from apache poi 5.2.0 on \r\n    \tSystem.out.println(value);\r\n       }\r\n      }\r\n      workbook.close();\r\n     }\r\n    }\r\n\r\nNote, the `java.text.SimpleDateFormat` always gets created usig en_US locale. Else, month abbreviations may be followed by a dot. For example: Jan. 17 or Jan./17.\r\n","title":"Date cell mask doesn&#39;t come correctly","body":"<p>This is not an error but is how Microsoft Excel localizes the date formats. Excel files always store formats in en_US locale. That is <code>mmm-yy</code> for this format.  It is the Excel built-in format with ID 17 (0x11, &quot;mmm-yy&quot;). See <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/BuiltinFormats.html\" rel=\"nofollow noreferrer\">BuiltinFormats</a>. It gets applied when user inputs only month and year in a cell. For example: 1/17, which is month 1 in year 17.</p>\n<p>In my German Excel this looks like so using German Windows locale:</p>\n<p><a href=\"https://i.stack.imgur.com/yZk9I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yZk9I.png\" alt=\"enter image description here\" /></a></p>\n<p>The Excel GUI then interprets that format different dependent on the Excel and/or Windows locale settings. For example, if I change the Windows locale settings to Portuguese (Brasil) in Control Panel - Time and Region:</p>\n<p><a href=\"https://i.stack.imgur.com/sspMj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sspMj.png\" alt=\"enter image description here\" /></a></p>\n<p>then it looks like so:</p>\n<p><a href=\"https://i.stack.imgur.com/LrvGc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LrvGc.png\" alt=\"enter image description here\" /></a></p>\n<p>Note, nothing has changed in Excel file. Only Windows locale settings have changed.</p>\n<p>Unfortunately Apache POI <code>DataFormatter</code> fails to interpret locale settings exactly like Excel does.</p>\n<p>Following code interprets the Excel built-in format with ID 17 (0x11, &quot;mmm-yy&quot;) as <code>mmm-yy</code> = Jan-17 using en_US locale. This is correct. But it interprets it as <code>mmm.-yy</code> = Jan.-17 using de_DE locale. This is wrong, should be <code>mmm yy</code> = Jan 17 like in Excel. And using pt_BR locale it interprets it as <code>mmm.-yy</code>= jan.-17. This is wrong too, should be <code>mmm/yy</code> = jan/17 like in Excel.</p>\n<pre><code>import org.apache.poi.ss.usermodel.*;\nimport java.io.FileInputStream;\n\nclass ReadExcel {\n\n public static void main(String[] args) throws Exception {\n\n  Workbook workbook = WorkbookFactory.create(new FileInputStream(&quot;./ExcelExampleIn.xlsx&quot;));\n  \n  // up to apache poi 5.1.0 a FormulaEvaluator is needed to evaluate the formulas while using DataFormatter\n  FormulaEvaluator evaluator = workbook.getCreationHelper().createFormulaEvaluator();  \n  \n  //DataFormatter dataFormatter = new DataFormatter(new java.util.Locale(&quot;en&quot;, &quot;US&quot;));\n  //DataFormatter dataFormatter = new DataFormatter(new java.util.Locale(&quot;de&quot;, &quot;DE&quot;));\n  DataFormatter dataFormatter = new DataFormatter(new java.util.Locale(&quot;pt&quot;, &quot;BR&quot;));\n  // from 5.2.0 on the DataFormatter can set to use cached values for formula cells\n  dataFormatter.setUseCachedValuesForFormulaCells(true);\n  \n  Sheet sheet = workbook.getSheetAt(0);\n  for (Row row : sheet) {\n   for (Cell cell : row) {\n    String pattern = cell.getCellStyle().getDataFormatString();\n    System.out.println(pattern);   \n    //String value = dataFormatter.formatCellValue(cell, evaluator); // up to apache poi 5.1.0\n    String value = dataFormatter.formatCellValue(cell); // from apache poi 5.2.0 on \n    System.out.println(value);\n   }\n  }\n  workbook.close();\n }\n}\n</code></pre>\n<p>To overcome this incorrectness in Apache POI, one could add a special data format for the <code>mmm-yy</code> to the <code>DataFormatter</code> dependent on used locale. This can be achieved using <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/DataFormatter.html#addFormat-java.lang.String-java.text.Format-\" rel=\"nofollow noreferrer\">public void addFormat(java.lang.String excelFormatStr, java.text.Format format)</a>.</p>\n<p>Complete example again:</p>\n<pre><code>import org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.util.LocaleUtil;\nimport java.io.FileInputStream;\n\nclass ReadExcel {\n\n public static void main(String[] args) throws Exception {\n\n  Workbook workbook = WorkbookFactory.create(new FileInputStream(&quot;./ExcelExampleIn.xlsx&quot;));\n  \n  // up to apache poi 5.1.0 a FormulaEvaluator is needed to evaluate the formulas while using DataFormatter\n  FormulaEvaluator evaluator = workbook.getCreationHelper().createFormulaEvaluator();  \n  \n  //LocaleUtil.setUserLocale(new java.util.Locale(&quot;en&quot;, &quot;US&quot;));\n  //LocaleUtil.setUserLocale(new java.util.Locale(&quot;de&quot;, &quot;DE&quot;));\n  LocaleUtil.setUserLocale(new java.util.Locale(&quot;pt&quot;, &quot;BR&quot;));\n\n  DataFormatter dataFormatter = new DataFormatter(); // uses user locale set\n  // from 5.2.0 on the DataFormatter can set to use cached values for formula cells\n  dataFormatter.setUseCachedValuesForFormulaCells(true);\n  \n  if (LocaleUtil.getUserLocale().equals(new java.util.Locale(&quot;de&quot;, &quot;DE&quot;))) {\n   dataFormatter.addFormat(&quot;mmm-yy&quot;, new java.text.SimpleDateFormat(&quot;MMM yy&quot;, new java.util.Locale(&quot;en&quot;, &quot;US&quot;)));\n  } else if (LocaleUtil.getUserLocale().equals(new java.util.Locale(&quot;en&quot;, &quot;US&quot;))) {\n   dataFormatter.addFormat(&quot;mmm-yy&quot;, new java.text.SimpleDateFormat(&quot;MMM-yy&quot;, new java.util.Locale(&quot;en&quot;, &quot;US&quot;)));\n  } else if (LocaleUtil.getUserLocale().equals(new java.util.Locale(&quot;pt&quot;, &quot;BR&quot;))) {\n   dataFormatter.addFormat(&quot;mmm-yy&quot;, new java.text.SimpleDateFormat(&quot;MMM/yy&quot;, new java.util.Locale(&quot;en&quot;, &quot;US&quot;)));\n  }\n  \n  Sheet sheet = workbook.getSheetAt(0);\n  for (Row row : sheet) {\n   for (Cell cell : row) {\n    String pattern = cell.getCellStyle().getDataFormatString();\n    System.out.println(pattern);   \n    //String value = dataFormatter.formatCellValue(cell, evaluator); // up to apache poi 5.1.0\n    String value = dataFormatter.formatCellValue(cell); // from apache poi 5.2.0 on \n    System.out.println(value);\n   }\n  }\n  workbook.close();\n }\n}\n</code></pre>\n<p>Note, the <code>java.text.SimpleDateFormat</code> always gets created usig en_US locale. Else, month abbreviations may be followed by a dot. For example: Jan. 17 or Jan./17.</p>\n"}],"owner":{"account_id":8467156,"reputation":3,"user_id":16933671,"display_name":"Renan Ofugi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75038086,"answer_count":1,"score":0,"last_activity_date":1673067775,"creation_date":1672956281,"question_id":75024840,"body_markdown":"I&#39;m reading an .xlsx file with Apache POI that has a cell with the following value: **Jan/17**.\r\n\r\nBut when I do check the cell variable with \r\n\r\n```java\r\nString pattern = cell.getCellStyle().getDataFormatString()\r\n```\r\npattern return wrong mask: **mmm-yy** and wrong value **Jan-17**.\r\n\r\n\r\n* I tried to use DataFormatter, but return the same error\r\n* I tried to use CellDateFormatter, but return the same error too\r\n* Replace the character &quot;-&quot; to &quot;/&quot; is not an option because it can be used &quot;-&quot; in file.","title":"Date cell mask doesn&#39;t come correctly","body":"<p>I'm reading an .xlsx file with Apache POI that has a cell with the following value: <strong>Jan/17</strong>.</p>\n<p>But when I do check the cell variable with</p>\n<pre class=\"lang-java prettyprint-override\"><code>String pattern = cell.getCellStyle().getDataFormatString()\n</code></pre>\n<p>pattern return wrong mask: <strong>mmm-yy</strong> and wrong value <strong>Jan-17</strong>.</p>\n<ul>\n<li>I tried to use DataFormatter, but return the same error</li>\n<li>I tried to use CellDateFormatter, but return the same error too</li>\n<li>Replace the character &quot;-&quot; to &quot;/&quot; is not an option because it can be used &quot;-&quot; in file.</li>\n</ul>\n"},{"tags":["java","jackson","localdatetime"],"comments":[{"owner":{"account_id":6501856,"reputation":6516,"user_id":5032339,"display_name":"Roman"},"score":0,"creation_date":1673053026,"post_id":75037138,"comment_id":132418439,"body_markdown":"Are you sure you can get `LocalDateTime` from `&quot;2021-10-15&quot;`? It doesn&#39;t have the &quot;time&quot; part.","body":"Are you sure you can get <code>LocalDateTime</code> from <code>&quot;2021-10-15&quot;</code>? It doesn&#39;t have the &quot;time&quot; part."},{"owner":{"account_id":5879019,"reputation":1195,"user_id":4629025,"display_name":"Raushan Kumar"},"score":1,"creation_date":1673053160,"post_id":75037138,"comment_id":132418456,"body_markdown":"LocalDateTime will not respected here either you can change it to LocalDate, or change  pattern = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&quot;","body":"LocalDateTime will not respected here either you can change it to LocalDate, or change  pattern = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&quot;"},{"owner":{"account_id":387508,"reputation":433,"user_id":745894,"display_name":"Jeff Vincent"},"score":0,"creation_date":1673286537,"post_id":75037138,"comment_id":132460240,"body_markdown":"@Roman, I realized I was conflating the output of an existing LocalDateTime with Deserialization.  Sorry for that (too early for my brain apparently).  It make sense now.  I deleted my previous comment.","body":"@Roman, I realized I was conflating the output of an existing LocalDateTime with Deserialization.  Sorry for that (too early for my brain apparently).  It make sense now.  I deleted my previous comment."}],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673067631,"creation_date":1673067631,"answer_id":75038210,"question_id":75037138,"body_markdown":"Since `java.time` API fails to construct `LocalDateTime` objects from strings with missing time part (there are obvious defaults though), you have following options:\r\n\r\n1. take advantage of getters and setters in order to perform `LocalDate` -&gt; `LocalDateTime` conversion and vice versa:\r\n\r\n```java\r\n@JsonIgnore\r\nprivate LocalDateTime created;\r\n\r\n@JsonProperty(&quot;created&quot;)\r\n@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\r\npublic LocalDate getCreatedJson() {\r\n    return Optional.ofNullable(created)\r\n            .map(LocalDateTime::toLocalDate)\r\n            .orElse(null);\r\n}\r\n\r\n@JsonProperty(&quot;created&quot;)\r\n@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\r\npublic void setCreatedJson(LocalDate localDate) {\r\n    created = Optional.ofNullable(localDate)\r\n            .map(LocalDate::atStartOfDay)\r\n            .orElse(null);\r\n}\r\n```\r\n\r\n2. use `@JsonDeserialize#converter` feature of `jackson`:\r\n\r\n&gt; Which helper object (if any) is to be used to convert from Jackson-bound intermediate type (source type of converter) into actual property type (which must be same as result type of converter). This is often used for two-step deserialization; Jackson binds data into suitable intermediate type (like Tree representation), and converter then builds actual property type.\r\n\r\n\r\n```java\r\npublic class LocalDateTimeConverter extends StdConverter &lt;LocalDate, LocalDateTime&gt; {\r\n\r\n    @Override\r\n    public LocalDateTime convert(LocalDate localDate) {\r\n        return localDate.atStartOfDay();\r\n    }\r\n}\r\n\r\n...\r\n\r\n@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\r\n@JsonDeserialize(converter = LocalDateTimeConverter.class)\r\nprivate LocalDateTime created;\r\n\r\n```\r\n\r\n3. create your own deserializer, for example:\r\n\r\n```java\r\npublic class EnhancedLocalDateTimeDeserializer extends LocalDateTimeDeserializer {\r\n        \r\n    protected EnhancedLocalDateTimeDeserializer() {\r\n        this(DateTimeFormatter.ISO_LOCAL_DATE_TIME);\r\n    }\r\n\r\n    public EnhancedLocalDateTimeDeserializer(DateTimeFormatter formatter) {\r\n        super(new DateTimeFormatterBuilder()\r\n                .append(formatter)\r\n                .parseDefaulting(HOUR_OF_DAY, 0)\r\n                .parseDefaulting(MINUTE_OF_HOUR, 0)\r\n                .parseDefaulting(SECOND_OF_MINUTE, 0)\r\n                .parseDefaulting(NANO_OF_SECOND, 0)\r\n                .toFormatter());\r\n    }\r\n\r\n    protected EnhancedLocalDateTimeDeserializer(EnhancedLocalDateTimeDeserializer base, Boolean leniency) {\r\n        super(base, leniency);\r\n    }\r\n\r\n    @Override\r\n    protected EnhancedLocalDateTimeDeserializer withDateFormat(DateTimeFormatter formatter) {\r\n        return new EnhancedLocalDateTimeDeserializer(formatter);\r\n    }\r\n\r\n    @Override\r\n    protected EnhancedLocalDateTimeDeserializer withLeniency(Boolean leniency) {\r\n        return new EnhancedLocalDateTimeDeserializer(this, leniency);\r\n    }\r\n\r\n    @Override\r\n    protected EnhancedLocalDateTimeDeserializer withShape(JsonFormat.Shape shape) {\r\n        return this;\r\n    }\r\n\r\n}\r\n```\r\n\r\n4. use `LocalDate` instead of `LocalDateTime`","title":"Jackson deserialization of LocalDateTime with custom format in Java 11","body":"<p>Since <code>java.time</code> API fails to construct <code>LocalDateTime</code> objects from strings with missing time part (there are obvious defaults though), you have following options:</p>\n<ol>\n<li>take advantage of getters and setters in order to perform <code>LocalDate</code> -&gt; <code>LocalDateTime</code> conversion and vice versa:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonIgnore\nprivate LocalDateTime created;\n\n@JsonProperty(&quot;created&quot;)\n@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\npublic LocalDate getCreatedJson() {\n    return Optional.ofNullable(created)\n            .map(LocalDateTime::toLocalDate)\n            .orElse(null);\n}\n\n@JsonProperty(&quot;created&quot;)\n@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\npublic void setCreatedJson(LocalDate localDate) {\n    created = Optional.ofNullable(localDate)\n            .map(LocalDate::atStartOfDay)\n            .orElse(null);\n}\n</code></pre>\n<ol start=\"2\">\n<li>use <code>@JsonDeserialize#converter</code> feature of <code>jackson</code>:</li>\n</ol>\n<blockquote>\n<p>Which helper object (if any) is to be used to convert from Jackson-bound intermediate type (source type of converter) into actual property type (which must be same as result type of converter). This is often used for two-step deserialization; Jackson binds data into suitable intermediate type (like Tree representation), and converter then builds actual property type.</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>public class LocalDateTimeConverter extends StdConverter &lt;LocalDate, LocalDateTime&gt; {\n\n    @Override\n    public LocalDateTime convert(LocalDate localDate) {\n        return localDate.atStartOfDay();\n    }\n}\n\n...\n\n@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\n@JsonDeserialize(converter = LocalDateTimeConverter.class)\nprivate LocalDateTime created;\n\n</code></pre>\n<ol start=\"3\">\n<li>create your own deserializer, for example:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public class EnhancedLocalDateTimeDeserializer extends LocalDateTimeDeserializer {\n        \n    protected EnhancedLocalDateTimeDeserializer() {\n        this(DateTimeFormatter.ISO_LOCAL_DATE_TIME);\n    }\n\n    public EnhancedLocalDateTimeDeserializer(DateTimeFormatter formatter) {\n        super(new DateTimeFormatterBuilder()\n                .append(formatter)\n                .parseDefaulting(HOUR_OF_DAY, 0)\n                .parseDefaulting(MINUTE_OF_HOUR, 0)\n                .parseDefaulting(SECOND_OF_MINUTE, 0)\n                .parseDefaulting(NANO_OF_SECOND, 0)\n                .toFormatter());\n    }\n\n    protected EnhancedLocalDateTimeDeserializer(EnhancedLocalDateTimeDeserializer base, Boolean leniency) {\n        super(base, leniency);\n    }\n\n    @Override\n    protected EnhancedLocalDateTimeDeserializer withDateFormat(DateTimeFormatter formatter) {\n        return new EnhancedLocalDateTimeDeserializer(formatter);\n    }\n\n    @Override\n    protected EnhancedLocalDateTimeDeserializer withLeniency(Boolean leniency) {\n        return new EnhancedLocalDateTimeDeserializer(this, leniency);\n    }\n\n    @Override\n    protected EnhancedLocalDateTimeDeserializer withShape(JsonFormat.Shape shape) {\n        return this;\n    }\n\n}\n</code></pre>\n<ol start=\"4\">\n<li>use <code>LocalDate</code> instead of <code>LocalDateTime</code></li>\n</ol>\n"}],"owner":{"account_id":387508,"reputation":433,"user_id":745894,"display_name":"Jeff Vincent"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":811,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75038210,"answer_count":1,"score":0,"last_activity_date":1673067631,"creation_date":1673049284,"question_id":75037138,"body_markdown":"I think I&#39;ve read every past post on this issue and it still isn&#39;t working for me.  My setup:\r\n\r\nOpenJDK 64-Bit 11.0.14.1+1\r\nJackson module version 2.14.1\r\n\r\nI have the following Jackson modules included:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-module-parameter-names&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-datatype-jdk8&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\nMy mapper is instantiated as such having all the relevant Java dependencies above:\r\n\r\n    ObjectMapper jsonObjectMapper = new ObjectMapper()\r\n            .registerModule(new ParameterNamesModule())\r\n            .registerModule(new Jdk8Module())\r\n            .registerModule(new JavaTimeModule());\r\n\r\nAnd my Java objects have various LocalDateTime properties defined as follows with the relevant annotations:\r\n\r\n    @JsonProperty(&quot;created&quot;)\r\n    @JsonFormat(shape = Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\r\n    @JsonDeserialize(using= LocalDateTimeDeserializer.class) //Tried with and without this line\r\n    private LocalDateTime created;\r\n\r\nBut when it parses I get the error:\r\n\r\n    Cannot deserialize value of type `java.time.LocalDateTime` from String &quot;2021-10-15&quot;: \r\n    Failed to deserialize java.time.LocalDateTime: (java.time.format.DateTimeParseException) \r\n    Text &#39;2021-10-15&#39; could not be parsed: Unable to obtain LocalDateTime from \r\n    TemporalAccessor: {},ISO resolved to 2021-10-15 of type java.time.format.Parsed\r\n\r\nSo it seems to not be using the custom formatter.  I then tried adding DateTimeFormatter directly using the following:\r\n\r\n    JavaTimeModule jtm = new JavaTimeModule();\r\n    jtm.addSerializer(LocalDateTime.class, new LocalDateTimeSerializer(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;)));\r\n    ObjectMapper mapper = new ObjectMapper()\r\n      .registerModule(new ParameterNamesModule())\r\n      .registerModule(new Jdk8Module())\r\n      .registerModule(jtm);\r\n\r\nBut that didn&#39;t help.  What am I missing?","title":"Jackson deserialization of LocalDateTime with custom format in Java 11","body":"<p>I think I've read every past post on this issue and it still isn't working for me.  My setup:</p>\n<p>OpenJDK 64-Bit 11.0.14.1+1\nJackson module version 2.14.1</p>\n<p>I have the following Jackson modules included:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-module-parameter-names&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-datatype-jdk8&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>My mapper is instantiated as such having all the relevant Java dependencies above:</p>\n<pre><code>ObjectMapper jsonObjectMapper = new ObjectMapper()\n        .registerModule(new ParameterNamesModule())\n        .registerModule(new Jdk8Module())\n        .registerModule(new JavaTimeModule());\n</code></pre>\n<p>And my Java objects have various LocalDateTime properties defined as follows with the relevant annotations:</p>\n<pre><code>@JsonProperty(&quot;created&quot;)\n@JsonFormat(shape = Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\n@JsonDeserialize(using= LocalDateTimeDeserializer.class) //Tried with and without this line\nprivate LocalDateTime created;\n</code></pre>\n<p>But when it parses I get the error:</p>\n<pre><code>Cannot deserialize value of type `java.time.LocalDateTime` from String &quot;2021-10-15&quot;: \nFailed to deserialize java.time.LocalDateTime: (java.time.format.DateTimeParseException) \nText '2021-10-15' could not be parsed: Unable to obtain LocalDateTime from \nTemporalAccessor: {},ISO resolved to 2021-10-15 of type java.time.format.Parsed\n</code></pre>\n<p>So it seems to not be using the custom formatter.  I then tried adding DateTimeFormatter directly using the following:</p>\n<pre><code>JavaTimeModule jtm = new JavaTimeModule();\njtm.addSerializer(LocalDateTime.class, new LocalDateTimeSerializer(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;)));\nObjectMapper mapper = new ObjectMapper()\n  .registerModule(new ParameterNamesModule())\n  .registerModule(new Jdk8Module())\n  .registerModule(jtm);\n</code></pre>\n<p>But that didn't help.  What am I missing?</p>\n"},{"tags":["java","sockets","ssl","networking","tls1.2"],"answers":[{"tags":[],"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673066964,"creation_date":1673066964,"answer_id":75038183,"question_id":75037436,"body_markdown":"&gt; How do keystores really work? From my understanding, you generate a keystore with the `keytool` command and that generates a keystore file that is like a small database(?) that contains a self-signed certificate and a public/private key pair.\r\n\r\nWell preferably a certificate chain with a leaf and one or more CA certificates; self signed certificates are usually just a way to &quot;get it working&quot; without a lot of key management. And the certificate contains the public key, so you only need to store the chain + the private key of the server certificate.\r\n\r\n&gt; We then create a truststore that&#39;s like a keystore but where we only import the self-signed certificate and the public key and this is what the client uses to connect to the server (I don&#39;t really understand this very last part).\r\n\r\nNo, again, the public key doesn&#39;t need to store separately, it is already included. And you don&#39;t need to have the truststore to connect, you need it to verify the *trust path* to a *trust anchor*. Usually that is a known root certificate, but for self-signed certificates it is just the one certificate.\r\n\r\n&gt; How do we actually use these keys that we generated inside our code? What is the recommended/secure way to do it? I have a feeling that setting system properties and typing a password in plain text in the class isn&#39;t the right way to do it but this might be the way to do it.\r\n\r\nUsually you try and store the private key in the least accessible way possible while you are still able to use it economically. Banks store private keys in HSM&#39;s, hardware security modules. Generally, if you just have a computer, you try to store it in the most secure place possible, e.g. in a system provided key store.\r\n\r\nUsing a key store based on password based encryption (PKCS#12 or PFX keystores and the Java JKS key stores) are indeed not the most secure options. Better choose a *very secure password* to at least not leak the private key if the store gets stolen.\r\n\r\nNote that Java does contain a PKCS#11 provider that works with HSM&#39;s as well as providers to use the Windows certificates / keys.\r\n\r\n&gt; If I were to develop an app that uses TLS how would I go about storing the keys in the Client? Would it be possible to pack the key inside the jar file that I&#39;d release for the users to download?\r\n\r\nYes, it certainly can be a resource that is packed with the program, but you might need to update your program if you want it to remain current. Actually, that is exactly how most browsers get the trust store; the certificates are delivered with the updates of Firefox and Chrome.\r\n\r\nFor others they are part of OS updates such as with Edge, and you may also have a network specific method of distributing trusted certificates such as the Group Policy in the Windows ecosystem.\r\n\r\n&gt; Like I said, I followed the tutorial from the docs and combining that with some knowledge I got from other stackoverflow posts I managed to make it work but I&#39;d like to understand how everything really works.\r\n\r\nWell, PKIX and TLS operation is a lot of information to take in and understand for sure. One way of making sure that you get the right information is to simply [read the X.509 standard](https://www.rfc-editor.org/rfc/rfc5280). There are many tutorials on the Internet as well.","title":"How to securely set up a TLS/SSL Socket connection in Java","body":"<blockquote>\n<p>How do keystores really work? From my understanding, you generate a keystore with the <code>keytool</code> command and that generates a keystore file that is like a small database(?) that contains a self-signed certificate and a public/private key pair.</p>\n</blockquote>\n<p>Well preferably a certificate chain with a leaf and one or more CA certificates; self signed certificates are usually just a way to &quot;get it working&quot; without a lot of key management. And the certificate contains the public key, so you only need to store the chain + the private key of the server certificate.</p>\n<blockquote>\n<p>We then create a truststore that's like a keystore but where we only import the self-signed certificate and the public key and this is what the client uses to connect to the server (I don't really understand this very last part).</p>\n</blockquote>\n<p>No, again, the public key doesn't need to store separately, it is already included. And you don't need to have the truststore to connect, you need it to verify the <em>trust path</em> to a <em>trust anchor</em>. Usually that is a known root certificate, but for self-signed certificates it is just the one certificate.</p>\n<blockquote>\n<p>How do we actually use these keys that we generated inside our code? What is the recommended/secure way to do it? I have a feeling that setting system properties and typing a password in plain text in the class isn't the right way to do it but this might be the way to do it.</p>\n</blockquote>\n<p>Usually you try and store the private key in the least accessible way possible while you are still able to use it economically. Banks store private keys in HSM's, hardware security modules. Generally, if you just have a computer, you try to store it in the most secure place possible, e.g. in a system provided key store.</p>\n<p>Using a key store based on password based encryption (PKCS#12 or PFX keystores and the Java JKS key stores) are indeed not the most secure options. Better choose a <em>very secure password</em> to at least not leak the private key if the store gets stolen.</p>\n<p>Note that Java does contain a PKCS#11 provider that works with HSM's as well as providers to use the Windows certificates / keys.</p>\n<blockquote>\n<p>If I were to develop an app that uses TLS how would I go about storing the keys in the Client? Would it be possible to pack the key inside the jar file that I'd release for the users to download?</p>\n</blockquote>\n<p>Yes, it certainly can be a resource that is packed with the program, but you might need to update your program if you want it to remain current. Actually, that is exactly how most browsers get the trust store; the certificates are delivered with the updates of Firefox and Chrome.</p>\n<p>For others they are part of OS updates such as with Edge, and you may also have a network specific method of distributing trusted certificates such as the Group Policy in the Windows ecosystem.</p>\n<blockquote>\n<p>Like I said, I followed the tutorial from the docs and combining that with some knowledge I got from other stackoverflow posts I managed to make it work but I'd like to understand how everything really works.</p>\n</blockquote>\n<p>Well, PKIX and TLS operation is a lot of information to take in and understand for sure. One way of making sure that you get the right information is to simply <a href=\"https://www.rfc-editor.org/rfc/rfc5280\" rel=\"nofollow noreferrer\">read the X.509 standard</a>. There are many tutorials on the Internet as well.</p>\n"}],"owner":{"account_id":19969013,"reputation":13,"user_id":14634944,"display_name":"vkdltjs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":609,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1673067766,"accepted_answer_id":75038183,"answer_count":1,"score":0,"last_activity_date":1673066964,"creation_date":1673053554,"question_id":75037436,"body_markdown":"**TLDR**: I&#39;ve managed to set up a server and a client that exchange information through sockets with TLS in Java but I&#39;m not entirely sure if the way I did it is good/secure + I&#39;d like to get deeper understanding on how it really works.\r\n\r\nI&#39;ll walk through the proccess that I followed and I&#39;ll ask my questions at the end. I started with a normal client/server set up that exchanged information through sockets locally.\r\n\r\nServer:\r\n```\r\npublic class Server {\r\n\t\r\n\tpublic static final int PORT = 9999;\r\n\tpublic ServerSocket serverSocket;\r\n\t\r\n\tpublic Server() {\r\n\t\ttry {\r\n\t\t\tthis.serverSocket = new ServerSocket(PORT);\r\n\t\t\t\r\n\t\t\tstartServer();\r\n\t\t\t\r\n\t\t} catch (IOException e) {\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void startServer() {\r\n\r\n\t\tSystem.out.println(&quot;[SERVER] Server running on port: &quot; + PORT);\r\n\t\t\r\n\t\twhile (!serverSocket.isClosed()) {\r\n\t\t\ttry {\r\n\t\t\t\tSocket socket = serverSocket.accept();\r\n\t\t\t\t\r\n\t\t\t\tClientHandler clientHandler = new ClientHandler(socket);\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t. . .\r\n```\r\n\r\nClient:\r\n```\r\npublic class Client {\r\n\t\r\n\tpublic static final String HOST = &quot;localhost&quot;;\r\n\tpublic Socket socket;\r\n\tpublic ObjectOutputStream oos;\r\n\tpublic ObjectInputStream ois;\r\n\tpublic User user;\r\n\t\r\n\tpublic Client(User user) {\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.socket = new Socket(HOST, Server.PORT);\r\n\t\t\tthis.oos = new ObjectOutputStream(socket.getOutputStream());\r\n\t\t\tthis.ois = new ObjectInputStream(socket.getInputStream());\r\n\t\t\t\r\n\t\t\toos.writeObject(user);\r\n\t\t\t\r\n\t\t\tlistener();\r\n\t\t\t\r\n\t\t} catch (IOException e) {\r\n\t\t}\r\n\t}\r\n\t\r\n\t. . .\r\n```\r\n\r\nIn order to upgrade the Client and the Server to use TLS I generated a keystore using `keytool` and modified the Server and the Client classes to:\r\n\r\nServer:\r\n```\r\npublic Server() {\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tSystem.setProperty(&quot;javax.net.ssl.keyStore&quot;, &quot;keys/server.keystore&quot;);\r\n\t\t\tSystem.setProperty(&quot;javax.net.ssl.keyStorePassword&quot;, &quot;password&quot;);\r\n\t\t\t\r\n\t        this.sslServerSocketFactory = (SSLServerSocketFactory) SSLServerSocketFactory.getDefault();\r\n\t         \r\n\t        this.sslServerSocket = (SSLServerSocket) sslServerSocketFactory.createServerSocket(PORT);\r\n\t\t\t\r\n\t\t\tstartServer();\r\n\t\t\t\r\n\t\t} catch (IOException e) {\r\n\t\t}\r\n\t}\r\n\r\n        . . .\r\n\r\n```\r\n\r\nClient:\r\n```\r\npublic Client(User user) {\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tthis.user = user;\r\n\t\t\t\r\n\t\t\tSystem.setProperty(&quot;javax.net.ssl.trustStore&quot;,&quot;keys/client.keystore&quot;);\r\n\t\t\tSystem.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;,&quot;password&quot;);\r\n\t\t\t\r\n\t\t\tthis.sslSocketFactory = (SSLSocketFactory) SSLSocketFactory.getDefault();\r\n             \r\n                        this.sslSocket = (SSLSocket) sslSocketFactory.createSocket(HOST, Server.PORT);\r\n            \r\n\t\t\tthis.oos = new ObjectOutputStream(sslSocket.getOutputStream());\r\n\t\t\tthis.ois = new ObjectInputStream(sslSocket.getInputStream());\r\n\t\t\t\r\n\t\t\toos.writeObject(user);\r\n\t\t\t\r\n\t\t\tlistenForMessage();\r\n\t\t\t\r\n\t\t} catch (IOException e) {\r\n\t\t}\r\n\t}\r\n\r\n        . . .\r\n```\r\n\r\nHow do keystores really work? From my understanding, you generate a keystore with the `keytool` command and that generates a keystore file that is like a small database(?) that contains a self-signed certificate and a public/private key pair. We then create a truststore that&#39;s like a keystore but where we only import the self-signed certificate and the public key and this is what the client uses to connect to the server (I don&#39;t really understand this very last part).\r\n\r\nHow do we actually use these keys that we generated inside our code? What is the recommended/secure way to do it? I have a feeling that setting system properties and typing a password in plain text in the class isn&#39;t the right way to do it but this might be the way to do it.\r\n\r\nIf I were to develop an app that uses TLS how would I go about storing the keys in the Client? Would it be possible to pack the key inside the jar file that I&#39;d release for the users to download?\r\n\r\nReferences:\r\nI googled A LOT trying to find answers, found some other stackoverflow posts and tried to understand how it works, and also kind of followed [this tutorial](https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html) from the docs.\r\n\r\nLike I said, I followed the tutorial from the docs and combining that with some knowledge I got from other stackoverflow posts I managed to make it work but I&#39;d like to understand how everything really works.","title":"How to securely set up a TLS/SSL Socket connection in Java","body":"<p><strong>TLDR</strong>: I've managed to set up a server and a client that exchange information through sockets with TLS in Java but I'm not entirely sure if the way I did it is good/secure + I'd like to get deeper understanding on how it really works.</p>\n<p>I'll walk through the proccess that I followed and I'll ask my questions at the end. I started with a normal client/server set up that exchanged information through sockets locally.</p>\n<p>Server:</p>\n<pre><code>public class Server {\n    \n    public static final int PORT = 9999;\n    public ServerSocket serverSocket;\n    \n    public Server() {\n        try {\n            this.serverSocket = new ServerSocket(PORT);\n            \n            startServer();\n            \n        } catch (IOException e) {\n        }\n    }\n    \n    public void startServer() {\n\n        System.out.println(&quot;[SERVER] Server running on port: &quot; + PORT);\n        \n        while (!serverSocket.isClosed()) {\n            try {\n                Socket socket = serverSocket.accept();\n                \n                ClientHandler clientHandler = new ClientHandler(socket);\n            } catch (IOException e) {\n            }\n        }\n    }\n\n    . . .\n</code></pre>\n<p>Client:</p>\n<pre><code>public class Client {\n    \n    public static final String HOST = &quot;localhost&quot;;\n    public Socket socket;\n    public ObjectOutputStream oos;\n    public ObjectInputStream ois;\n    public User user;\n    \n    public Client(User user) {\n        try {\n            \n            this.user = user;\n            this.socket = new Socket(HOST, Server.PORT);\n            this.oos = new ObjectOutputStream(socket.getOutputStream());\n            this.ois = new ObjectInputStream(socket.getInputStream());\n            \n            oos.writeObject(user);\n            \n            listener();\n            \n        } catch (IOException e) {\n        }\n    }\n    \n    . . .\n</code></pre>\n<p>In order to upgrade the Client and the Server to use TLS I generated a keystore using <code>keytool</code> and modified the Server and the Client classes to:</p>\n<p>Server:</p>\n<pre><code>public Server() {\n        try {\n            \n            System.setProperty(&quot;javax.net.ssl.keyStore&quot;, &quot;keys/server.keystore&quot;);\n            System.setProperty(&quot;javax.net.ssl.keyStorePassword&quot;, &quot;password&quot;);\n            \n            this.sslServerSocketFactory = (SSLServerSocketFactory) SSLServerSocketFactory.getDefault();\n             \n            this.sslServerSocket = (SSLServerSocket) sslServerSocketFactory.createServerSocket(PORT);\n            \n            startServer();\n            \n        } catch (IOException e) {\n        }\n    }\n\n        . . .\n\n</code></pre>\n<p>Client:</p>\n<pre><code>public Client(User user) {\n        try {\n            \n            this.user = user;\n            \n            System.setProperty(&quot;javax.net.ssl.trustStore&quot;,&quot;keys/client.keystore&quot;);\n            System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;,&quot;password&quot;);\n            \n            this.sslSocketFactory = (SSLSocketFactory) SSLSocketFactory.getDefault();\n             \n                        this.sslSocket = (SSLSocket) sslSocketFactory.createSocket(HOST, Server.PORT);\n            \n            this.oos = new ObjectOutputStream(sslSocket.getOutputStream());\n            this.ois = new ObjectInputStream(sslSocket.getInputStream());\n            \n            oos.writeObject(user);\n            \n            listenForMessage();\n            \n        } catch (IOException e) {\n        }\n    }\n\n        . . .\n</code></pre>\n<p>How do keystores really work? From my understanding, you generate a keystore with the <code>keytool</code> command and that generates a keystore file that is like a small database(?) that contains a self-signed certificate and a public/private key pair. We then create a truststore that's like a keystore but where we only import the self-signed certificate and the public key and this is what the client uses to connect to the server (I don't really understand this very last part).</p>\n<p>How do we actually use these keys that we generated inside our code? What is the recommended/secure way to do it? I have a feeling that setting system properties and typing a password in plain text in the class isn't the right way to do it but this might be the way to do it.</p>\n<p>If I were to develop an app that uses TLS how would I go about storing the keys in the Client? Would it be possible to pack the key inside the jar file that I'd release for the users to download?</p>\n<p>References:\nI googled A LOT trying to find answers, found some other stackoverflow posts and tried to understand how it works, and also kind of followed <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html\" rel=\"nofollow noreferrer\">this tutorial</a> from the docs.</p>\n<p>Like I said, I followed the tutorial from the docs and combining that with some knowledge I got from other stackoverflow posts I managed to make it work but I'd like to understand how everything really works.</p>\n"},{"tags":["java","android","keyboard","android-softkeyboard","ime"],"comments":[{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":0,"creation_date":1673071572,"post_id":75038131,"comment_id":132420151,"body_markdown":"Did you see: [How can you make a custom keyboard in Android?](https://stackoverflow.com/q/9577304/295004)","body":"Did you see: <a href=\"https://stackoverflow.com/q/9577304/295004\">How can you make a custom keyboard in Android?</a>"},{"owner":{"account_id":6989591,"reputation":3250,"user_id":5359340,"display_name":"FGH"},"score":0,"creation_date":1673073286,"post_id":75038131,"comment_id":132420343,"body_markdown":"my question is different, thank you for your reply","body":"my question is different, thank you for your reply"},{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":0,"creation_date":1673074772,"post_id":75038131,"comment_id":132420490,"body_markdown":"To me you question seems like you want to create different layouts than what is supported by `&lt;Keyboard/&gt;` in which case you are doing a custom keyboard and may be interested in the `Going On` section  of [this answer](https://stackoverflow.com/a/44939816/295004) at the bottom.","body":"To me you question seems like you want to create different layouts than what is supported by <code>&lt;Keyboard&#47;&gt;</code> in which case you are doing a custom keyboard and may be interested in the <code>Going On</code> section  of <a href=\"https://stackoverflow.com/a/44939816/295004\">this answer</a> at the bottom."},{"owner":{"account_id":6989591,"reputation":3250,"user_id":5359340,"display_name":"FGH"},"score":0,"creation_date":1673076836,"post_id":75038131,"comment_id":132420680,"body_markdown":"in that answer also they are using `Keyboard`, but in my case, I want to create a custom layout file, I&#39;m expecting to create a class and extend the KeyboardPreview and passing the created layout file, but in this approach I&#39;m facing some issue","body":"in that answer also they are using <code>Keyboard</code>, but in my case, I want to create a custom layout file, I&#39;m expecting to create a class and extend the KeyboardPreview and passing the created layout file, but in this approach I&#39;m facing some issue"},{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":0,"creation_date":1673078364,"post_id":75038131,"comment_id":132420801,"body_markdown":"I don&#39;t think you can use custom layouts with [KeyboardView](https://developer.android.com/reference/android/inputmethodservice/KeyboardView) as it has been [deprecated](https://stackoverflow.com/q/60316785/295004). So you&#39;ll have to take the [AOSP source](https://github.com/aosp-mirror/platform_frameworks_base/blob/master/core/java/android/inputmethodservice/KeyboardView.java) and make your own.","body":"I don&#39;t think you can use custom layouts with <a href=\"https://developer.android.com/reference/android/inputmethodservice/KeyboardView\" rel=\"nofollow noreferrer\">KeyboardView</a> as it has been <a href=\"https://stackoverflow.com/q/60316785/295004\">deprecated</a>. So you&#39;ll have to take the <a href=\"https://github.com/aosp-mirror/platform_frameworks_base/blob/master/core/java/android/inputmethodservice/KeyboardView.java\" rel=\"nofollow noreferrer\">AOSP source</a> and make your own."}],"owner":{"account_id":6989591,"reputation":3250,"user_id":5359340,"display_name":"FGH"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":239,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673065963,"creation_date":1673065963,"question_id":75038131,"body_markdown":"I&#39;m creating a custom keyboard in android but in android to create a custom keyboard we need to pass the keyboard XML to generate the keyboard view(XML code below). I want to design my own keyboard using layouts that should like to support the KeyboardView&#39;s `setKeyboard()` and `setOnKeyboardActionListener()`, How can I do that?  Thanks in Advance\r\n\r\n \r\n\r\n    @Override\r\n        public View onCreateInputView() {\r\n    \r\n            KeyboardView keyboardView=(KeyboardView) getLayoutInflater().inflate(R.layout.keyboard_view,null);\r\n    \r\n            Keyboard keyboard=new Keyboard(this,R.xml.numberpad);\r\n            keyboardView.setKeyboard(keyboard);\r\n            keyboardView.setOnKeyboardActionListener(this);\r\n    \r\n            return keyboardView;\r\n    }\r\n\r\ncurrent XML numberpad\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;Keyboard xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:keyWidth=&quot;10%p&quot;\r\n        android:horizontalGap=&quot;2dp&quot;\r\n        android:verticalGap=&quot;2dp&quot;\r\n        android:keyHeight=&quot;55dp&quot;\r\n        android:keyTextColor=&quot;@color/design_default_color_primary&quot;\r\n        android:keyBackground=&quot;@drawable/ic_baseline_keyboard_24&quot;&gt;\r\n        &lt;Row&gt;\r\n            &lt;Key android:codes=&quot;49&quot; android:keyLabel=&quot;1&quot; android:keyEdgeFlags=&quot;left&quot;/&gt;\r\n            &lt;Key android:codes=&quot;50&quot; android:keyLabel=&quot;2&quot;/&gt;\r\n            &lt;Key android:codes=&quot;51&quot; android:keyLabel=&quot;3&quot;/&gt;\r\n            &lt;Key android:codes=&quot;52&quot; android:keyLabel=&quot;4&quot;/&gt;\r\n            &lt;Key android:codes=&quot;53&quot; android:keyLabel=&quot;5&quot;/&gt;\r\n            &lt;Key android:codes=&quot;54&quot; android:keyLabel=&quot;6&quot;/&gt;\r\n            &lt;Key android:codes=&quot;55&quot; android:keyLabel=&quot;7&quot;/&gt;\r\n            &lt;Key android:codes=&quot;56&quot; android:keyLabel=&quot;8&quot;/&gt;\r\n            &lt;Key android:codes=&quot;57&quot; android:keyLabel=&quot;9&quot;/&gt;\r\n            &lt;Key android:codes=&quot;48&quot; android:keyLabel=&quot;0&quot;/&gt;\r\n        &lt;/Row&gt;\r\n    \r\n    &lt;/Keyboard&gt;","title":"Android IME, use custom layout instead of Keyboard and support KeyboardView&#39;s setKeyboard and setOnKeyboardActionListener listeners","body":"<p>I'm creating a custom keyboard in android but in android to create a custom keyboard we need to pass the keyboard XML to generate the keyboard view(XML code below). I want to design my own keyboard using layouts that should like to support the KeyboardView's <code>setKeyboard()</code> and <code>setOnKeyboardActionListener()</code>, How can I do that?  Thanks in Advance</p>\n<pre><code>@Override\n    public View onCreateInputView() {\n\n        KeyboardView keyboardView=(KeyboardView) getLayoutInflater().inflate(R.layout.keyboard_view,null);\n\n        Keyboard keyboard=new Keyboard(this,R.xml.numberpad);\n        keyboardView.setKeyboard(keyboard);\n        keyboardView.setOnKeyboardActionListener(this);\n\n        return keyboardView;\n}\n</code></pre>\n<p>current XML numberpad</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;Keyboard xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:keyWidth=&quot;10%p&quot;\n    android:horizontalGap=&quot;2dp&quot;\n    android:verticalGap=&quot;2dp&quot;\n    android:keyHeight=&quot;55dp&quot;\n    android:keyTextColor=&quot;@color/design_default_color_primary&quot;\n    android:keyBackground=&quot;@drawable/ic_baseline_keyboard_24&quot;&gt;\n    &lt;Row&gt;\n        &lt;Key android:codes=&quot;49&quot; android:keyLabel=&quot;1&quot; android:keyEdgeFlags=&quot;left&quot;/&gt;\n        &lt;Key android:codes=&quot;50&quot; android:keyLabel=&quot;2&quot;/&gt;\n        &lt;Key android:codes=&quot;51&quot; android:keyLabel=&quot;3&quot;/&gt;\n        &lt;Key android:codes=&quot;52&quot; android:keyLabel=&quot;4&quot;/&gt;\n        &lt;Key android:codes=&quot;53&quot; android:keyLabel=&quot;5&quot;/&gt;\n        &lt;Key android:codes=&quot;54&quot; android:keyLabel=&quot;6&quot;/&gt;\n        &lt;Key android:codes=&quot;55&quot; android:keyLabel=&quot;7&quot;/&gt;\n        &lt;Key android:codes=&quot;56&quot; android:keyLabel=&quot;8&quot;/&gt;\n        &lt;Key android:codes=&quot;57&quot; android:keyLabel=&quot;9&quot;/&gt;\n        &lt;Key android:codes=&quot;48&quot; android:keyLabel=&quot;0&quot;/&gt;\n    &lt;/Row&gt;\n\n&lt;/Keyboard&gt;\n</code></pre>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":3277649,"reputation":545,"user_id":2759161,"display_name":"Kevin"},"score":0,"creation_date":1571068913,"post_id":58379215,"comment_id":103109101,"body_markdown":"where did you saw the recommendation?","body":"where did you saw the recommendation?"}],"answers":[{"tags":[],"owner":{"account_id":3277649,"reputation":545,"user_id":2759161,"display_name":"Kevin"},"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1571068285,"creation_date":1571068285,"answer_id":58380168,"question_id":58379215,"body_markdown":"The [official doc][1] says:\r\n&gt; **Set the JDK version**\r\n\r\n&gt; A copy of the latest OpenJDK comes bundled with Android Studio 2.2 and higher, and this is the JDK version we recommend you use for your Android projects. To use the bundled JDK, do the following:\r\n\r\n&gt; 1. Open your project in Android Studio and select File &gt; Project Structure in the menu bar.\r\n2. In the SDK Location page and under JDK location, check the Use embedded JDK checkbox.\r\n3. Click OK.\r\n\r\nSo there is no need to install a standalone JDK if you are not planning to do Java Devs other than Android App.\r\n\r\n  [1]: https://developer.android.com/studio/intro/studio-config#jdk","title":"Which Java JDK should I install for the use of Android Studio","body":"<p>The <a href=\"https://developer.android.com/studio/intro/studio-config#jdk\" rel=\"noreferrer\">official doc</a> says:</p>\n\n<blockquote>\n  <p><strong>Set the JDK version</strong></p>\n  \n  <p>A copy of the latest OpenJDK comes bundled with Android Studio 2.2 and higher, and this is the JDK version we recommend you use for your Android projects. To use the bundled JDK, do the following:</p>\n  \n  <ol>\n  <li>Open your project in Android Studio and select File > Project Structure in the menu bar.</li>\n  <li>In the SDK Location page and under JDK location, check the Use embedded JDK checkbox.</li>\n  <li>Click OK.</li>\n  </ol>\n</blockquote>\n\n<p>So there is no need to install a standalone JDK if you are not planning to do Java Devs other than Android App.</p>\n"},{"tags":[],"owner":{"account_id":8852563,"reputation":501,"user_id":6665113,"display_name":"Eugene Kartoyev"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1571069189,"creation_date":1571069189,"answer_id":58380387,"question_id":58379215,"body_markdown":"Android is behind the Java development. \r\n\r\nIt uses most of **Java 7**&#39;s features with _some_ features of **Java 8** (like click listeners using lambdas). \r\n\r\nTo make Android Studio &quot;understand&quot; Java 8, you have to add the following options to your app&#39;s build.gradle android section:\r\n\r\n```\r\n compileOptions{\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n```\r\n\r\nSo, if you would like to be able to copy-paste code from your java applications to Android ones, it is better to stick to Java 8.","title":"Which Java JDK should I install for the use of Android Studio","body":"<p>Android is behind the Java development. </p>\n\n<p>It uses most of <strong>Java 7</strong>'s features with <em>some</em> features of <strong>Java 8</strong> (like click listeners using lambdas). </p>\n\n<p>To make Android Studio \"understand\" Java 8, you have to add the following options to your app's build.gradle android section:</p>\n\n<pre><code> compileOptions{\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n</code></pre>\n\n<p>So, if you would like to be able to copy-paste code from your java applications to Android ones, it is better to stick to Java 8.</p>\n"},{"tags":[],"owner":{"account_id":7217470,"reputation":61,"user_id":5509360,"display_name":"Shawon Barua"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1571199464,"creation_date":1571199464,"answer_id":58405689,"question_id":58379215,"body_markdown":"You can use Java 8 or java 7  for the android studio 3 or later versions. I was having some problem with java 13 . After some research i found it , [Android Studio 3.0 and later supports all Java 7 language features and a subset of Java 8 language features][1]\r\n\r\n\r\n  [1]: https://developer.android.com/studio/write/java8-support\r\nHope it helps :)","title":"Which Java JDK should I install for the use of Android Studio","body":"<p>You can use Java 8 or java 7  for the android studio 3 or later versions. I was having some problem with java 13 . After some research i found it , <a href=\"https://developer.android.com/studio/write/java8-support\" rel=\"nofollow noreferrer\">Android Studio 3.0 and later supports all Java 7 language features and a subset of Java 8 language features</a></p>\n\n<p>Hope it helps :)</p>\n"},{"tags":[],"owner":{"account_id":9457696,"reputation":1,"user_id":8356882,"display_name":"HoundCat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640497358,"creation_date":1640497358,"answer_id":70484450,"question_id":58379215,"body_markdown":"Unfortunately, the Chromebook installation doesn&#39;t properly install and configure if installing on one with &#39;aarch64&#39; and the Mediatek processor.  There are many hoops that must be jumped through, and installing and configuring a JDK beforehand, making sure that the JAVA_HOME environment variable and corresponding files and directories are all set up and working can reduce the headaches involved with the bundled version in this quirky, hard-enough to get working situation.  In most cases, the above recommendations hold true, but some of us always have to tackle the &#39;impossible.&#39;","title":"Which Java JDK should I install for the use of Android Studio","body":"<p>Unfortunately, the Chromebook installation doesn't properly install and configure if installing on one with 'aarch64' and the Mediatek processor.  There are many hoops that must be jumped through, and installing and configuring a JDK beforehand, making sure that the JAVA_HOME environment variable and corresponding files and directories are all set up and working can reduce the headaches involved with the bundled version in this quirky, hard-enough to get working situation.  In most cases, the above recommendations hold true, but some of us always have to tackle the 'impossible.'</p>\n"},{"tags":[],"owner":{"account_id":404144,"reputation":7059,"user_id":772295,"display_name":"superarts.org"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673064606,"creation_date":1673064606,"answer_id":75038062,"question_id":58379215,"body_markdown":"You shouldn&#39;t need to install a standalone JDK in most use cases, but sometimes things are more complicated, for example KMM - the plugin doesn&#39;t help you sort out your environment problem obviously, so you need to either set up everything manually using the build-in JDK (mentioned in the accepted answer), or you can `brew install oracle-jdk` which works fine for me.","title":"Which Java JDK should I install for the use of Android Studio","body":"<p>You shouldn't need to install a standalone JDK in most use cases, but sometimes things are more complicated, for example KMM - the plugin doesn't help you sort out your environment problem obviously, so you need to either set up everything manually using the build-in JDK (mentioned in the accepted answer), or you can <code>brew install oracle-jdk</code> which works fine for me.</p>\n"}],"owner":{"account_id":11005051,"reputation":439,"user_id":8084209,"display_name":"Loeli"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33665,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":58380168,"answer_count":5,"score":25,"last_activity_date":1673064606,"creation_date":1571064545,"question_id":58379215,"body_markdown":"I want to install Android Studio and I saw that it is recommended to also install the Java JDK. The thing that I don&#39;t understand is that a lot of people are recommending the Java SE Development Kit 8 but the latest one is 13. Why would I use 8 instead of 13? Can anyone tell me the exact version of JDK that should be used for Android Studio? \r\n\r\nThanks in advance.","title":"Which Java JDK should I install for the use of Android Studio","body":"<p>I want to install Android Studio and I saw that it is recommended to also install the Java JDK. The thing that I don't understand is that a lot of people are recommending the Java SE Development Kit 8 but the latest one is 13. Why would I use 8 instead of 13? Can anyone tell me the exact version of JDK that should be used for Android Studio? </p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","connection","txt","ftp-server","apache-ftpserver"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1672996723,"post_id":75021938,"comment_id":132403071,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":27444630,"reputation":1,"user_id":20938652,"display_name":"Camila Delgado"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673063813,"creation_date":1672938102,"question_id":75021938,"body_markdown":"I am using apache ftp server to set up an ftp server in a LAN environment, for this server I have to keep track of the users that connect, that is, the server must capture a user when connecting and save his nickname, the date and time it was connected and save it to a .txt file.\r\n\r\nThe problem lies in how to capture this connection. \r\n\r\nI have been investigating but the alternatives appear in other technologies, and I still do not have much progress in ftp server.\r\n\r\nI&#39;m new to the world of servers so I&#39;m a bit lost.\r\n\r\nI would greatly appreciate your help.","title":"Connection log on apache FTP server","body":"<p>I am using apache ftp server to set up an ftp server in a LAN environment, for this server I have to keep track of the users that connect, that is, the server must capture a user when connecting and save his nickname, the date and time it was connected and save it to a .txt file.</p>\n<p>The problem lies in how to capture this connection.</p>\n<p>I have been investigating but the alternatives appear in other technologies, and I still do not have much progress in ftp server.</p>\n<p>I'm new to the world of servers so I'm a bit lost.</p>\n<p>I would greatly appreciate your help.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":199370,"reputation":19629,"user_id":444639,"accept_rate":84,"display_name":"Rylander"},"score":0,"creation_date":1367615976,"post_id":16367651,"comment_id":23453501,"body_markdown":"try writing your comparators as `(10=&lt;a &amp;&amp; a&lt;=20)`, it makes it easier to read and spot errors.","body":"try writing your comparators as <code>(10=&lt;a &amp;&amp; a&lt;=20)</code>, it makes it easier to read and spot errors."},{"owner":{"account_id":2637133,"reputation":90,"user_id":2281527,"display_name":"user2281527"},"score":0,"creation_date":1367616148,"post_id":16367651,"comment_id":23453561,"body_markdown":"after you check for range, you look for max of the two numbers\n\nexample 21,19  19 is within the range but 21 isn&#39;t, your if condition passes but you return max of the two which is 21. please note 21 is not in the range.","body":"after you check for range, you look for max of the two numbers  example 21,19  19 is within the range but 21 isn&#39;t, your if condition passes but you return max of the two which is 21. please note 21 is not in the range."},{"owner":{"account_id":2010759,"reputation":5533,"user_id":1799237,"accept_rate":100,"display_name":"SOfanatic"},"score":0,"creation_date":1367616159,"post_id":16367651,"comment_id":23453567,"body_markdown":"I don&#39;t know if you missed it while writing it here, but there should be an `else` before the second `if` . There are other problems, but you should resolve that one first.","body":"I don&#39;t know if you missed it while writing it here, but there should be an <code>else</code> before the second <code>if</code> . There are other problems, but you should resolve that one first."}],"answers":[{"tags":[],"owner":{"account_id":1888343,"reputation":176607,"user_id":1707091,"display_name":"rgettman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1367615977,"creation_date":1367615977,"answer_id":16367711,"question_id":16367651,"body_markdown":"Your logic basically says:\r\n\r\n - If `a` or `b` is in range, and `a` is greater than or equal to `b`, then return `a`.\r\n - If `a` or `b` is in range, and `b` is greater than or equal to `a`, then return `b`.\r\n - Return 0.\r\n\r\nSo if `a` is in range but `b` is greater (and out of range), then `b` is still returned.\r\n\r\nChange your logic to:\r\n\r\n - If `a` is in range and `a` is greater than or equal to `b`, then return `a`.\r\n - If `b` is in range and `b` is greater than or equal to `a`, then return `b`.\r\n - Return 0.","title":"Finding larger number within a range","body":"<p>Your logic basically says:</p>\n\n<ul>\n<li>If <code>a</code> or <code>b</code> is in range, and <code>a</code> is greater than or equal to <code>b</code>, then return <code>a</code>.</li>\n<li>If <code>a</code> or <code>b</code> is in range, and <code>b</code> is greater than or equal to <code>a</code>, then return <code>b</code>.</li>\n<li>Return 0.</li>\n</ul>\n\n<p>So if <code>a</code> is in range but <code>b</code> is greater (and out of range), then <code>b</code> is still returned.</p>\n\n<p>Change your logic to:</p>\n\n<ul>\n<li>If <code>a</code> is in range and <code>a</code> is greater than or equal to <code>b</code>, then return <code>a</code>.</li>\n<li>If <code>b</code> is in range and <code>b</code> is greater than or equal to <code>a</code>, then return <code>b</code>.</li>\n<li>Return 0.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1968644,"reputation":32046,"user_id":1768232,"accept_rate":81,"display_name":"durron597"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1367616046,"creation_date":1367616046,"answer_id":16367725,"question_id":16367651,"body_markdown":"Lets walk through them.\r\n\r\n    (10,21):\r\n\r\n    if(((10 &gt;= 10 &amp;&amp; 10 &lt;= 20) || (21&gt;=10 &amp;&amp; 21&lt;=20)) &amp;&amp; 10&gt;=21)\r\n      (((true and true) || (true and false)) &amp;&amp; false)\r\n      ((true) &amp;&amp; false)\r\n      false\r\n\r\nOkay, not that one.\r\n\r\n    if(((10 &gt;= 10 &amp;&amp; 10 &lt;= 20) || (21&gt;=10 &amp;&amp; 21&lt;=20)) &amp;&amp; 21&gt;=10)\r\n      (((true and true) || (true and false)) &amp;&amp; false)\r\n      ((true) and true)\r\n      true\r\n\r\n    -&gt; return 21\r\n\r\nOkay why does that happen? Because your logic says &quot;if either value is in the range, then return the larger value, EVEN IF the larger value is not in the range&quot;.\r\n\r\nInstead, if a value is outside the range, don&#39;t even consider it. Here&#39;s one possible start:\r\n\r\n    if(a &lt; 10 &amp;&amp; a &gt; 20) {\r\n        // do something with only b. This is where you would return zero, too.\r\n    } else if(b &lt; 10 &amp;&amp; b &gt; 20) {\r\n        // do something with only a\r\n    } else {\r\n        // do something with both\r\n    }","title":"Finding larger number within a range","body":"<p>Lets walk through them.</p>\n\n<pre><code>(10,21):\n\nif(((10 &gt;= 10 &amp;&amp; 10 &lt;= 20) || (21&gt;=10 &amp;&amp; 21&lt;=20)) &amp;&amp; 10&gt;=21)\n  (((true and true) || (true and false)) &amp;&amp; false)\n  ((true) &amp;&amp; false)\n  false\n</code></pre>\n\n<p>Okay, not that one.</p>\n\n<pre><code>if(((10 &gt;= 10 &amp;&amp; 10 &lt;= 20) || (21&gt;=10 &amp;&amp; 21&lt;=20)) &amp;&amp; 21&gt;=10)\n  (((true and true) || (true and false)) &amp;&amp; false)\n  ((true) and true)\n  true\n\n-&gt; return 21\n</code></pre>\n\n<p>Okay why does that happen? Because your logic says \"if either value is in the range, then return the larger value, EVEN IF the larger value is not in the range\".</p>\n\n<p>Instead, if a value is outside the range, don't even consider it. Here's one possible start:</p>\n\n<pre><code>if(a &lt; 10 &amp;&amp; a &gt; 20) {\n    // do something with only b. This is where you would return zero, too.\n} else if(b &lt; 10 &amp;&amp; b &gt; 20) {\n    // do something with only a\n} else {\n    // do something with both\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":199370,"reputation":19629,"user_id":444639,"accept_rate":84,"display_name":"Rylander"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1367873873,"creation_date":1367616283,"answer_id":16367761,"question_id":16367651,"body_markdown":"Your code returns the larger value if either value is in range. \r\n\r\nGiven the nature of these questions you should try a [test driven approach](http://en.wikipedia.org/wiki/Test-driven_development) to develop your method, this also assures that your code behaves as you intended it to. A test similar to what is below is probably what is testing you code when you submit it on CodingBat.\r\n\r\n    public class SandBox {\r\n        public int max1020(int a, int b) {\r\n            if (10 &lt;= a &amp;&amp; a &lt;= 20) { // if a is in range\r\n                if (a &gt;= b || b &gt; 20) { // if a is greater than B or B is out of range\r\n                    return a;\r\n                }\r\n            }\r\n    \r\n            //\r\n            if (10 &lt;= b &amp;&amp; b &lt;= 20) { // if b is in range\r\n                return b;\r\n            }\r\n    \r\n            return 0;\r\n        }\r\n    }\r\n\r\nTests\r\n\r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n    \r\n    import static org.hamcrest.MatcherAssert.assertThat;\r\n    import static org.hamcrest.Matchers.is;\r\n    \r\n    public class SandBoxTest {\r\n        SandBox sand;\r\n    \r\n        @Before\r\n        public void given(){\r\n            sand = new SandBox();\r\n        }\r\n    \r\n        @Test\r\n        public void testOne(){\r\n            int i = sand.max1020(1, 2);\r\n            assertThat(i, is(0));\r\n        }\r\n    \r\n        @Test\r\n        public void testTwo(){\r\n            int i = sand.max1020(2, 1);\r\n            assertThat(i, is(0));\r\n        }\r\n    \r\n        @Test\r\n        public void testThree(){\r\n            int i = sand.max1020(5, 10);\r\n            assertThat(i, is(10));\r\n        }\r\n    \r\n        @Test\r\n        public void testFour(){\r\n            int i = sand.max1020(10, 5);\r\n            assertThat(i, is(10));\r\n        }\r\n    \r\n        @Test\r\n        public void testFive(){\r\n            int i = sand.max1020(11, 15);\r\n            assertThat(i, is(15));\r\n        }\r\n    \r\n        @Test\r\n        public void testSix(){\r\n            int i = sand.max1020(15, 11);\r\n            assertThat(i, is(15));\r\n        }\r\n    \r\n        @Test\r\n        public void testSeven(){\r\n            int i = sand.max1020(20, 23);\r\n            assertThat(i, is(20));\r\n        }\r\n    \r\n        @Test\r\n        public void testEight(){\r\n            int i = sand.max1020(23, 20);\r\n            assertThat(i, is(20));\r\n        }\r\n    \r\n        @Test\r\n        public void testNine(){\r\n            int i = sand.max1020(33, 25);\r\n            assertThat(i, is(0));\r\n        }\r\n    \r\n        @Test\r\n        public void testTen(){\r\n            int i = sand.max1020(25, 33);\r\n            assertThat(i, is(0));\r\n        }\r\n    }\r\n","title":"Finding larger number within a range","body":"<p>Your code returns the larger value if either value is in range. </p>\n\n<p>Given the nature of these questions you should try a <a href=\"http://en.wikipedia.org/wiki/Test-driven_development\" rel=\"nofollow\">test driven approach</a> to develop your method, this also assures that your code behaves as you intended it to. A test similar to what is below is probably what is testing you code when you submit it on CodingBat.</p>\n\n<pre><code>public class SandBox {\n    public int max1020(int a, int b) {\n        if (10 &lt;= a &amp;&amp; a &lt;= 20) { // if a is in range\n            if (a &gt;= b || b &gt; 20) { // if a is greater than B or B is out of range\n                return a;\n            }\n        }\n\n        //\n        if (10 &lt;= b &amp;&amp; b &lt;= 20) { // if b is in range\n            return b;\n        }\n\n        return 0;\n    }\n}\n</code></pre>\n\n<p>Tests</p>\n\n<pre><code>import org.junit.Before;\nimport org.junit.Test;\n\nimport static org.hamcrest.MatcherAssert.assertThat;\nimport static org.hamcrest.Matchers.is;\n\npublic class SandBoxTest {\n    SandBox sand;\n\n    @Before\n    public void given(){\n        sand = new SandBox();\n    }\n\n    @Test\n    public void testOne(){\n        int i = sand.max1020(1, 2);\n        assertThat(i, is(0));\n    }\n\n    @Test\n    public void testTwo(){\n        int i = sand.max1020(2, 1);\n        assertThat(i, is(0));\n    }\n\n    @Test\n    public void testThree(){\n        int i = sand.max1020(5, 10);\n        assertThat(i, is(10));\n    }\n\n    @Test\n    public void testFour(){\n        int i = sand.max1020(10, 5);\n        assertThat(i, is(10));\n    }\n\n    @Test\n    public void testFive(){\n        int i = sand.max1020(11, 15);\n        assertThat(i, is(15));\n    }\n\n    @Test\n    public void testSix(){\n        int i = sand.max1020(15, 11);\n        assertThat(i, is(15));\n    }\n\n    @Test\n    public void testSeven(){\n        int i = sand.max1020(20, 23);\n        assertThat(i, is(20));\n    }\n\n    @Test\n    public void testEight(){\n        int i = sand.max1020(23, 20);\n        assertThat(i, is(20));\n    }\n\n    @Test\n    public void testNine(){\n        int i = sand.max1020(33, 25);\n        assertThat(i, is(0));\n    }\n\n    @Test\n    public void testTen(){\n        int i = sand.max1020(25, 33);\n        assertThat(i, is(0));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2730908,"reputation":1,"user_id":2354723,"display_name":"user2354723"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1367845207,"creation_date":1367845207,"answer_id":16399316,"question_id":16367651,"body_markdown":"    Boolean aInRange = (a &gt;= 10 &amp;&amp; a &lt;= 20)\r\n    \r\n    Boolean bInRange = (b &gt;= 10 &amp;&amp; b &lt;= 20)\r\n    \r\n    int max = 0;\r\n    \r\n    if (aInRange &amp;&amp; bInRange) {\r\n      \r\n        if(a &gt;= b)\r\n            max = a;\r\n        else {\r\n            max = b;\r\n        }\r\n    } else if (!bInRange &amp;&amp; aInRange) {\r\n        max = a;\r\n    }\r\n    else if (bInRange &amp;&amp; !aInRange) {\r\n        max = b;\r\n    }\r\n    return max;","title":"Finding larger number within a range","body":"<pre><code>Boolean aInRange = (a &gt;= 10 &amp;&amp; a &lt;= 20)\n\nBoolean bInRange = (b &gt;= 10 &amp;&amp; b &lt;= 20)\n\nint max = 0;\n\nif (aInRange &amp;&amp; bInRange) {\n\n    if(a &gt;= b)\n        max = a;\n    else {\n        max = b;\n    }\n} else if (!bInRange &amp;&amp; aInRange) {\n    max = a;\n}\nelse if (bInRange &amp;&amp; !aInRange) {\n    max = b;\n}\nreturn max;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21138486,"reputation":116,"user_id":15541450,"display_name":"Liemannen loop"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660537617,"creation_date":1660537617,"answer_id":73356909,"question_id":16367651,"body_markdown":"I was wondering how other people have solved and this is what I came up with, that includes ternary and a little of Math.abs + Math.max methods:\r\n\r\n```java\r\npublic int max1020(int a, int b) {\r\n  if(Math.abs(a - 15) &lt;= 5 &amp; Math.abs(b - 15) &lt;= 5)\r\n    return Math.max(a, b);\r\n  if(Math.abs(a - 15) &gt; 5)\r\n    return Math.abs(b - 15) &lt;= 5 ? b : 0;\r\n  \r\n  return a;\r\n}\r\n```\r\n","title":"Finding larger number within a range","body":"<p>I was wondering how other people have solved and this is what I came up with, that includes ternary and a little of Math.abs + Math.max methods:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public int max1020(int a, int b) {\n  if(Math.abs(a - 15) &lt;= 5 &amp; Math.abs(b - 15) &lt;= 5)\n    return Math.max(a, b);\n  if(Math.abs(a - 15) &gt; 5)\n    return Math.abs(b - 15) &lt;= 5 ? b : 0;\n  \n  return a;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27458721,"reputation":1,"user_id":20949691,"display_name":"mary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673062067,"creation_date":1673062067,"answer_id":75037930,"question_id":16367651,"body_markdown":"Here is the solution I&#39;ve come up with as an algorithm to find the max value in array but with additional condition to be within a specific range. I think it is much more flexible and easier to read)\r\n```\r\npublic int max1020(int a, int b) {\r\n    int max = 0;\r\n    int[] numbers= {a,b};\r\n    for (int i  = 0; i &lt; numbers.length; i++) {\r\n      if (numbers[i] &gt; max &amp;&amp;  numbers[i] &gt;=10 &amp;&amp; numbers[i] &lt;=20 ) {\r\n        max = numbers[i];\r\n      }\r\n    }\r\n    return max;\r\n\r\n}\r\n```","title":"Finding larger number within a range","body":"<p>Here is the solution I've come up with as an algorithm to find the max value in array but with additional condition to be within a specific range. I think it is much more flexible and easier to read)</p>\n<pre><code>public int max1020(int a, int b) {\n    int max = 0;\n    int[] numbers= {a,b};\n    for (int i  = 0; i &lt; numbers.length; i++) {\n      if (numbers[i] &gt; max &amp;&amp;  numbers[i] &gt;=10 &amp;&amp; numbers[i] &lt;=20 ) {\n        max = numbers[i];\n      }\n    }\n    return max;\n\n}\n</code></pre>\n"}],"owner":{"account_id":2614599,"reputation":336,"user_id":2263951,"accept_rate":100,"display_name":"LearnIT"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1864,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":16367725,"answer_count":6,"score":1,"last_activity_date":1673062067,"creation_date":1367615655,"question_id":16367651,"body_markdown":"I have kept at these CodingBat questions and I ran into another problem.\r\n\r\nThe assignment was this:\r\n\r\n&gt;Given 2 positive int values, return the larger value that is in the range 10..20 inclusive, or return 0 if neither is in that range.\r\n\r\n\r\nSome Examples: \r\n\r\n - max1020(11, 19)  19\r\n - max1020(19, 11)  19\r\n - max1020(11, 9)  11\r\n\r\n\r\nMy solution is:\r\n\r\n    public int max1020(int a, int b) {\r\n        if (((a &gt;= 10 &amp;&amp; a &lt;= 20) || (b &gt;= 10 &amp;&amp; b &lt;= 20)) &amp;&amp; a &gt;= b) {\r\n            return a;\r\n        }\r\n        \r\n        if (((a &gt;= 10 &amp;&amp; a &lt;= 20) || (b &gt;= 10 &amp;&amp; b &lt;= 20)) &amp;&amp; b &gt;= a) {\r\n            return b;\r\n        } else {\r\n            return 0;\r\n        }\r\n    }\r\n\r\nThe code returned the correct output more than half of the time, but it did not work as expected in certain scenarios. The scenarios are when the input was (10,21),(21,10),(23,10).\r\n\r\nThis is weird because I explicitly excluded #&gt;20 yet it returns 21, 21, and 23 respectively for the above three scenarios.\r\n\r\nWhere did I make a mistake?","title":"Finding larger number within a range","body":"<p>I have kept at these CodingBat questions and I ran into another problem.</p>\n\n<p>The assignment was this:</p>\n\n<blockquote>\n  <p>Given 2 positive int values, return the larger value that is in the range 10..20 inclusive, or return 0 if neither is in that range.</p>\n</blockquote>\n\n<p>Some Examples: </p>\n\n<ul>\n<li>max1020(11, 19)  19</li>\n<li>max1020(19, 11)  19</li>\n<li>max1020(11, 9)  11</li>\n</ul>\n\n<p>My solution is:</p>\n\n<pre><code>public int max1020(int a, int b) {\n    if (((a &gt;= 10 &amp;&amp; a &lt;= 20) || (b &gt;= 10 &amp;&amp; b &lt;= 20)) &amp;&amp; a &gt;= b) {\n        return a;\n    }\n\n    if (((a &gt;= 10 &amp;&amp; a &lt;= 20) || (b &gt;= 10 &amp;&amp; b &lt;= 20)) &amp;&amp; b &gt;= a) {\n        return b;\n    } else {\n        return 0;\n    }\n}\n</code></pre>\n\n<p>The code returned the correct output more than half of the time, but it did not work as expected in certain scenarios. The scenarios are when the input was (10,21),(21,10),(23,10).</p>\n\n<p>This is weird because I explicitly excluded #>20 yet it returns 21, 21, and 23 respectively for the above three scenarios.</p>\n\n<p>Where did I make a mistake?</p>\n"},{"tags":["java","eclipse","ecj"],"comments":[{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1576788082,"post_id":59416574,"comment_id":105020624,"body_markdown":"What site is that? The official site For Eclipse 2019-12 project downloads is [here](https://download.eclipse.org/eclipse/downloads/drops4/R-4.14-201912100610/).  This was a new release yesterday and includes a standalone ecj","body":"What site is that? The official site For Eclipse 2019-12 project downloads is <a href=\"https://download.eclipse.org/eclipse/downloads/drops4/R-4.14-201912100610/\" rel=\"nofollow noreferrer\">here</a>.  This was a new release yesterday and includes a standalone ecj"},{"owner":{"account_id":166827,"reputation":14145,"user_id":391227,"accept_rate":62,"display_name":"Gelin Luo"},"score":0,"creation_date":1576878424,"post_id":59416574,"comment_id":105049157,"body_markdown":"Here is the site: https://search.maven.org/","body":"Here is the site: <a href=\"https://search.maven.org/\" rel=\"nofollow noreferrer\">search.maven.org</a>"}],"answers":[{"tags":[],"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1576886999,"creation_date":1576886507,"answer_id":59432516,"question_id":59416574,"body_markdown":"The official coordinates of `ecj` in Maven are indeed: `org.eclipse.jdt:ecj`.\r\n\r\nAs you can see, this artifact exists in all release versions since `3.12.3` (corresponding to Neon.3).\r\n\r\nArtifacts in other groups may have mistakenly used the version number of the Eclipse release, not that of ecj itself, thus appearing to be newer even if they are (a lot) older.\r\n\r\n(_When Eclipse SDK was bumped up from 3.x to 4.x this was due to breaking changes in the UI part of the code. ecj, however, remained compatible and thus stayed at 3.x_)\r\n\r\nIn case of doubt, run the following to see the real version of `ecj`:\r\n\r\n    $ java -jar ecj.jar -version\r\n\r\nThe latest release version will answer\r\n\r\n    Eclipse Compiler for Java(TM) v20191203-2131, 3.20.0, Copyright IBM Corp 2000, 2015. All rights reserved.\r\n","title":"Is the standalone ecj (Eclipse Java Compiler) package no longer maintained?","body":"<p>The official coordinates of <code>ecj</code> in Maven are indeed: <code>org.eclipse.jdt:ecj</code>.</p>\n\n<p>As you can see, this artifact exists in all release versions since <code>3.12.3</code> (corresponding to Neon.3).</p>\n\n<p>Artifacts in other groups may have mistakenly used the version number of the Eclipse release, not that of ecj itself, thus appearing to be newer even if they are (a lot) older.</p>\n\n<p>(<em>When Eclipse SDK was bumped up from 3.x to 4.x this was due to breaking changes in the UI part of the code. ecj, however, remained compatible and thus stayed at 3.x</em>)</p>\n\n<p>In case of doubt, run the following to see the real version of <code>ecj</code>:</p>\n\n<pre><code>$ java -jar ecj.jar -version\n</code></pre>\n\n<p>The latest release version will answer</p>\n\n<pre><code>Eclipse Compiler for Java(TM) v20191203-2131, 3.20.0, Copyright IBM Corp 2000, 2015. All rights reserved.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4243,"reputation":1301840,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673061261,"creation_date":1673061261,"answer_id":75037875,"question_id":59416574,"body_markdown":"That will change with [Eclipse 4.27 (2023-03 release)][1]:\r\n\r\n&gt; ## ECJ separated from JDT Core\r\n&gt; \t\r\n&gt; Historically the code for ECJ was always in the same `org.eclipse.jdt.core` project that also contained the code for the Java support in the IDE, just in a different source folder. \r\n&gt;\r\n&gt; The well known standalone ECJ compiler library that could be used outside of Eclipse (for compilation with external tooling) was generated out of this core bundle at build time and was not included in the default SDK (because it contained subset of packages and classes provided by `org.eclipse.jdt.core`).\r\n&gt;\r\n&gt; This lead to few issues, with both Eclipse / standalone use of the ECJ compiler. \r\n&gt;\r\n&gt; - The (non-JDT) code inside Eclipse that required &quot;default&quot; `javax.tools.JavaCompiler` API implementation and had no need for full JDT / workspace support was not able to use `org.eclipse.jdt.core` without pulling in `org.eclipse.core.resources` bundle and so the dependency to the workspace. \r\n&gt; - Another interesting side effect of hosting ECJ code next to IDE code inside same `org.eclipse.jdt.core` bundle was that developers couldn&#39;t see if the ECJ code per mistake got some dependency to the IDE.\r\n&gt;\r\n&gt; To resolve these (and other) problems, **the ECJ code is moved from org.eclipse.jdt.core to dedicated `org.eclipse.jdt.core.compiler.batch` project** and will be deployed as a separated bundle.  \r\n&gt;\r\n&gt; The `org.eclipse.jdt.core.compiler.batch` is now included in SDK as a regular Eclipse bundle and can be compiled / deployed / used separately from `org.eclipse.jdt.core bundle`. \r\n&gt;\r\n&gt; All of ECJ packages are re-exported by `org.eclipse.jdt.core`, therefore from OSGI point of view, all 3rd party code that used some compiler related API from `org.eclipse.jdt.core` doesn&#39;t require any change.  \r\nThe `org.eclipse.jdt.core.compiler.batch` bundle itself doesn&#39;t have any dependencies and so can be used in Eclipse products that do not use workspace concepts.\r\n&gt;\r\n&gt; However, no change is without side effects.\r\n&gt;\r\n&gt; ### Known problems with the split of the ECJ from core bundle\r\n&gt;\r\n&gt; - As part of the `org.eclipse.jdt.core.compiler.batch` code separation from `org.eclipse.jdt.core`, the two fragments of `org.eclipse.jdt.core` - `org.eclipse.jdt.compiler.apt` and `org.eclipse.jdt.compiler.tool` were merged into `org.eclipse.jdt.core.compiler.batch`.  \r\nSo if some target definition, launch configuration or build file referenced the two fragments, these references can and should be removed now.\r\n&gt; - Another issue might affect standalone (non OSGI based) applications that were using `org.eclipse.jdt.core` as a &quot;simple&quot; Java library (which `jdt.core` never was).  \r\nSo for example code that had `org.eclipse.jdt.core_XYZ.jar` on classpath and tried to call this outside Eclipse:\r\n&gt;\r\n&gt;       ASTParser parser = ASTParser.newParser(AST.getJLSLatest());\r\n&gt;\r\n&gt;   would fail now with:\r\n&gt;\r\n&gt;       NoClassDefFoundError: org.eclipse.jdt.internal.compiler.env.ICompilationUnit\r\n&gt;\r\n&gt;   because `org.eclipse.jdt.core.dom.ASTParser` uses internally ECJ APIs and they are now ... surprise ... moved to `org.eclipse.jdt.core.compiler.batch` jar.  \r\n  To fix this error, `org.eclipse.jdt.core.compiler.batch` library should be added to the application classpath.\r\n\r\n  [1]: https://www.eclipse.org/eclipse/news/4.27/jdt.php#ecj-separated-from-core","title":"Is the standalone ecj (Eclipse Java Compiler) package no longer maintained?","body":"<p>That will change with <a href=\"https://www.eclipse.org/eclipse/news/4.27/jdt.php#ecj-separated-from-core\" rel=\"nofollow noreferrer\">Eclipse 4.27 (2023-03 release)</a>:</p>\n<blockquote>\n<h2>ECJ separated from JDT Core</h2>\n<p>Historically the code for ECJ was always in the same <code>org.eclipse.jdt.core</code> project that also contained the code for the Java support in the IDE, just in a different source folder.</p>\n<p>The well known standalone ECJ compiler library that could be used outside of Eclipse (for compilation with external tooling) was generated out of this core bundle at build time and was not included in the default SDK (because it contained subset of packages and classes provided by <code>org.eclipse.jdt.core</code>).</p>\n<p>This lead to few issues, with both Eclipse / standalone use of the ECJ compiler.</p>\n<ul>\n<li>The (non-JDT) code inside Eclipse that required &quot;default&quot; <code>javax.tools.JavaCompiler</code> API implementation and had no need for full JDT / workspace support was not able to use <code>org.eclipse.jdt.core</code> without pulling in <code>org.eclipse.core.resources</code> bundle and so the dependency to the workspace.</li>\n<li>Another interesting side effect of hosting ECJ code next to IDE code inside same <code>org.eclipse.jdt.core</code> bundle was that developers couldn't see if the ECJ code per mistake got some dependency to the IDE.</li>\n</ul>\n<p>To resolve these (and other) problems, <strong>the ECJ code is moved from org.eclipse.jdt.core to dedicated <code>org.eclipse.jdt.core.compiler.batch</code> project</strong> and will be deployed as a separated bundle.</p>\n<p>The <code>org.eclipse.jdt.core.compiler.batch</code> is now included in SDK as a regular Eclipse bundle and can be compiled / deployed / used separately from <code>org.eclipse.jdt.core bundle</code>.</p>\n<p>All of ECJ packages are re-exported by <code>org.eclipse.jdt.core</code>, therefore from OSGI point of view, all 3rd party code that used some compiler related API from <code>org.eclipse.jdt.core</code> doesn't require any change.<br />\nThe <code>org.eclipse.jdt.core.compiler.batch</code> bundle itself doesn't have any dependencies and so can be used in Eclipse products that do not use workspace concepts.</p>\n<p>However, no change is without side effects.</p>\n<h3>Known problems with the split of the ECJ from core bundle</h3>\n<ul>\n<li><p>As part of the <code>org.eclipse.jdt.core.compiler.batch</code> code separation from <code>org.eclipse.jdt.core</code>, the two fragments of <code>org.eclipse.jdt.core</code> - <code>org.eclipse.jdt.compiler.apt</code> and <code>org.eclipse.jdt.compiler.tool</code> were merged into <code>org.eclipse.jdt.core.compiler.batch</code>.<br />\nSo if some target definition, launch configuration or build file referenced the two fragments, these references can and should be removed now.</p>\n</li>\n<li><p>Another issue might affect standalone (non OSGI based) applications that were using <code>org.eclipse.jdt.core</code> as a &quot;simple&quot; Java library (which <code>jdt.core</code> never was).<br />\nSo for example code that had <code>org.eclipse.jdt.core_XYZ.jar</code> on classpath and tried to call this outside Eclipse:</p>\n<pre><code>ASTParser parser = ASTParser.newParser(AST.getJLSLatest());\n</code></pre>\n<p>would fail now with:</p>\n<pre><code>NoClassDefFoundError: org.eclipse.jdt.internal.compiler.env.ICompilationUnit\n</code></pre>\n<p>because <code>org.eclipse.jdt.core.dom.ASTParser</code> uses internally ECJ APIs and they are now ... surprise ... moved to <code>org.eclipse.jdt.core.compiler.batch</code> jar.<br />\nTo fix this error, <code>org.eclipse.jdt.core.compiler.batch</code> library should be added to the application classpath.</p>\n</li>\n</ul>\n</blockquote>\n"}],"owner":{"account_id":166827,"reputation":14145,"user_id":391227,"accept_rate":62,"display_name":"Gelin Luo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":975,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":59432516,"answer_count":2,"score":3,"last_activity_date":1673061261,"creation_date":1576787573,"question_id":59416574,"body_markdown":"We are using `ecj` from `org.eclipse.jdt.core.compiler` in our project, however it looks like the package is not updated since 07-Oct-2016. Is it no longer maintained?\r\n\r\n[![enter image description here][1]][1]\r\n\r\nOr should I switch to the `ecj` from `org.eclipse.jdt`? Looks like the version number (3.20.0) is older than the former: `4.6.1`?\r\n\r\n  [1]: https://i.stack.imgur.com/OanK3.png","title":"Is the standalone ecj (Eclipse Java Compiler) package no longer maintained?","body":"<p>We are using <code>ecj</code> from <code>org.eclipse.jdt.core.compiler</code> in our project, however it looks like the package is not updated since 07-Oct-2016. Is it no longer maintained?</p>\n\n<p><a href=\"https://i.stack.imgur.com/OanK3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OanK3.png\" alt=\"enter image description here\"></a></p>\n\n<p>Or should I switch to the <code>ecj</code> from <code>org.eclipse.jdt</code>? Looks like the version number (3.20.0) is older than the former: <code>4.6.1</code>?</p>\n"},{"tags":["java","spring-boot","http-headers"],"comments":[{"owner":{"account_id":5823420,"reputation":785,"user_id":6656833,"display_name":"Pavel"},"score":1,"creation_date":1673068050,"post_id":75037800,"comment_id":132419876,"body_markdown":"this might be helpful https://stackoverflow.com/questions/9779860/using-json-string-in-the-http-header","body":"this might be helpful <a href=\"https://stackoverflow.com/questions/9779860/using-json-string-in-the-http-header\" title=\"using json string in the http header\">stackoverflow.com/questions/9779860/&hellip;</a>"},{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1673086739,"post_id":75037800,"comment_id":132421822,"body_markdown":"From description of the task taken literally it seems you have to convert your object to its json representation and after insert it in the request header, the link suggested by @Pavel seems me very helpful.","body":"From description of the task taken literally it seems you have to convert your object to its json representation and after insert it in the request header, the link suggested by @Pavel seems me very helpful."},{"owner":{"account_id":27359768,"reputation":1,"user_id":20867570,"display_name":"recklessbull47"},"score":0,"creation_date":1674484055,"post_id":75037800,"comment_id":132717576,"body_markdown":"@Pavel &amp; dariosicily thank you! This was helpful and insightful","body":"@Pavel &amp; dariosicily thank you! This was helpful and insightful"}],"owner":{"account_id":27359768,"reputation":1,"user_id":20867570,"display_name":"recklessbull47"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":267,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673060020,"creation_date":1673060020,"question_id":75037800,"body_markdown":"Forgive my ignorance - a jr developer here. I&#39;m trying to make a **PUT** call to a client API. In the documentation it shows the request headers have an object in them. I thought headers could only have a *String* value. How can I add an object to my HttpHeaders object?\r\n\r\n*Request Model from API Documentation*\r\n\r\n```\r\nrequestHeader {\r\n  &quot;headerA&quot;: &quot;valueA&quot;,\r\n  &quot;headerB&quot;: {\r\n    &quot;headerB1&quot;: &quot;valueB1&quot;,\r\n    &quot;headerB2&quot;: &quot;valueB2&quot;\r\n  },\r\n  &quot;headerC&quot;: &quot;valueC&quot;\r\n}\r\n\r\nrequestBody { \r\n  &quot;object&quot;: { \r\n              &quot;variable1&quot;: 12345, \r\n              &quot;variable2&quot;: 54321 \r\n  }, \r\n  &quot;sameNums&quot;: false }\r\n```\r\n\r\nI&#39;m using HttpHeaders from package org.springframework.http - the set() and add() methods take Strings as parameters. How can I add an object as a header value? ","title":"Is it possible to store an object in HttpHeaders in Java?","body":"<p>Forgive my ignorance - a jr developer here. I'm trying to make a <strong>PUT</strong> call to a client API. In the documentation it shows the request headers have an object in them. I thought headers could only have a <em>String</em> value. How can I add an object to my HttpHeaders object?</p>\n<p><em>Request Model from API Documentation</em></p>\n<pre><code>requestHeader {\n  &quot;headerA&quot;: &quot;valueA&quot;,\n  &quot;headerB&quot;: {\n    &quot;headerB1&quot;: &quot;valueB1&quot;,\n    &quot;headerB2&quot;: &quot;valueB2&quot;\n  },\n  &quot;headerC&quot;: &quot;valueC&quot;\n}\n\nrequestBody { \n  &quot;object&quot;: { \n              &quot;variable1&quot;: 12345, \n              &quot;variable2&quot;: 54321 \n  }, \n  &quot;sameNums&quot;: false }\n</code></pre>\n<p>I'm using HttpHeaders from package org.springframework.http - the set() and add() methods take Strings as parameters. How can I add an object as a header value?</p>\n"},{"tags":["java","neovim","eclipse-jdt"],"comments":[{"owner":{"account_id":4279282,"reputation":1525,"user_id":3499168,"display_name":"Mike"},"score":0,"creation_date":1671499268,"post_id":74844019,"comment_id":132108144,"body_markdown":"The command `:LspLog` has info. Any errors?\n\nLSP Zero (VonHeikemen/lsp-zero.nvim) uses mason.nvim (williamboman/mason.nvim) for managing LSP servers. Which has an extension (williamboman/mason-lspconfig.nvim) to work with (neovim/nvim-lspconfig). The doc/server_configurations.md#jdtls says `IMPORTANT: If you want all the features jdtls has to offer, nvim-jdtls is highly recommended. If all you need is diagnostics, completion, imports, gotos and formatting and some code actions you can keep reading here.` You should probably follow the setup here https://github.com/mfussenegger/nvim-jdtls.","body":"The command <code>:LspLog</code> has info. Any errors?  LSP Zero (VonHeikemen/lsp-zero.nvim) uses mason.nvim (williamboman/mason.nvim) for managing LSP servers. Which has an extension (williamboman/mason-lspconfig.nvim) to work with (neovim/nvim-lspconfig). The doc/server_configurations.md#jdtls says <code>IMPORTANT: If you want all the features jdtls has to offer, nvim-jdtls is highly recommended. If all you need is diagnostics, completion, imports, gotos and formatting and some code actions you can keep reading here.</code> You should probably follow the setup here <a href=\"https://github.com/mfussenegger/nvim-jdtls\" rel=\"nofollow noreferrer\">github.com/mfussenegger/nvim-jdtls</a>."},{"owner":{"account_id":4279282,"reputation":1525,"user_id":3499168,"display_name":"Mike"},"score":0,"creation_date":1671499656,"post_id":74844019,"comment_id":132108223,"body_markdown":"Also, what version of Java are you running? \n\neclipse.jdt.ls requires at least Java 17 (see https://github.com/mfussenegger/nvim-jdtls/blob/2773a6b2f6518c14bbbc2b8367d56a36db2889c4/README.md?plain=1#L69)","body":"Also, what version of Java are you running?   eclipse.jdt.ls requires at least Java 17 (see <a href=\"https://github.com/mfussenegger/nvim-jdtls/blob/2773a6b2f6518c14bbbc2b8367d56a36db2889c4/README.md?plain=1#L69\" rel=\"nofollow noreferrer\">github.com/mfussenegger/nvim-jdtls/blob/&hellip;</a>)"},{"owner":{"account_id":3085397,"reputation":2842,"user_id":2612651,"accept_rate":78,"display_name":"nerdlyist"},"score":1,"creation_date":1671500117,"post_id":74844019,"comment_id":132108290,"body_markdown":"@Mike I am running 17. The important part is if I want the additional features and currently I do not. I just want what jdtls has to offer to see if it is practical to start moving my workflow over. `:LspLog` has nothing in it (I cleared it out for some config typos that I had earlier on). `LspInfo` shows that it seems to know that it should be jdtls but it has `root directory:    Not found.` Not sure what that means.","body":"@Mike I am running 17. The important part is if I want the additional features and currently I do not. I just want what jdtls has to offer to see if it is practical to start moving my workflow over. <code>:LspLog</code> has nothing in it (I cleared it out for some config typos that I had earlier on). <code>LspInfo</code> shows that it seems to know that it should be jdtls but it has <code>root directory:    Not found.</code> Not sure what that means."},{"owner":{"account_id":4279282,"reputation":1525,"user_id":3499168,"display_name":"Mike"},"score":0,"creation_date":1671501584,"post_id":74844019,"comment_id":132108472,"body_markdown":"Is your `JAVA_HOME` environment variable set and exported? I have had issues where even though it appears correct, I&#39;ll explicitly `export JAVA_HOME=&quot;&lt;yourhomehere&gt;&quot;` before opening neovim and it works.","body":"Is your <code>JAVA_HOME</code> environment variable set and exported? I have had issues where even though it appears correct, I&#39;ll explicitly <code>export JAVA_HOME=&quot;&lt;yourhomehere&gt;&quot;</code> before opening neovim and it works."},{"owner":{"account_id":3085397,"reputation":2842,"user_id":2612651,"accept_rate":78,"display_name":"nerdlyist"},"score":0,"creation_date":1671502633,"post_id":74844019,"comment_id":132108631,"body_markdown":"@Mike I do indeed. I had a trailing slash that I never noticed but removing it did nothing for me.","body":"@Mike I do indeed. I had a trailing slash that I never noticed but removing it did nothing for me."},{"owner":{"account_id":24782384,"reputation":236,"user_id":18665782,"display_name":"Remicaster"},"score":0,"creation_date":1671529007,"post_id":74844019,"comment_id":132113540,"body_markdown":"I believe LSP log has nothing to do with your issue as I mentioned in the comments in the answer given by someone else, jdtls does not require attachment on your LSP. Just go modify the `ftplugin/java.lua` file. You can refer to my configurations (windows) https://github.com/Kuon-dev/dotfiles/blob/main/nvim/ftplugin/java.lua","body":"I believe LSP log has nothing to do with your issue as I mentioned in the comments in the answer given by someone else, jdtls does not require attachment on your LSP. Just go modify the <code>ftplugin&#47;java.lua</code> file. You can refer to my configurations (windows) <a href=\"https://github.com/Kuon-dev/dotfiles/blob/main/nvim/ftplugin/java.lua\" rel=\"nofollow noreferrer\">github.com/Kuon-dev/dotfiles/blob/main/nvim/ftplugin/java.lu&zwnj;&#8203;a</a>"},{"owner":{"account_id":3085397,"reputation":2842,"user_id":2612651,"accept_rate":78,"display_name":"nerdlyist"},"score":0,"creation_date":1671546225,"post_id":74844019,"comment_id":132119124,"body_markdown":"@Remicaster it does but I am getting nothing in it. I am starting to think that jdtls is not starting.","body":"@Remicaster it does but I am getting nothing in it. I am starting to think that jdtls is not starting."},{"owner":{"account_id":3085397,"reputation":2842,"user_id":2612651,"accept_rate":78,"display_name":"nerdlyist"},"score":0,"creation_date":1681486043,"post_id":74844019,"comment_id":134069252,"body_markdown":"There was a bug in the way that file paths were parsed on window https://github.com/neovim/nvim-lspconfig/issues/2341 newer versions of neovim do not appear to suffer from this.","body":"There was a bug in the way that file paths were parsed on window <a href=\"https://github.com/neovim/nvim-lspconfig/issues/2341\" rel=\"nofollow noreferrer\">github.com/neovim/nvim-lspconfig/issues/2341</a> newer versions of neovim do not appear to suffer from this."}],"answers":[{"tags":[],"owner":{"account_id":22789266,"reputation":301,"user_id":16943869,"display_name":"Saheed"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671410543,"creation_date":1671410543,"answer_id":74845408,"question_id":74844019,"body_markdown":"First, include java path to your `bashrc`. And retry the installation using `Mason.nvim`\r\n\r\nElse: Do below\r\n\r\n1. Install [eclipse.jdt.ls](https://github.com/eclipse/eclipse.jdt.ls) by following their [Installation instructions](https://github.com/eclipse/eclipse.jdt.ls#installation).\r\n\r\n2. Add the plugin: \r\n -  vim-plug: Plug `mfussenegger/nvim-jdtls`\r\n -  packer.nvim: use `mfussenegger/nvim-jdtls`\r\n\r\n3. To solve this you&#39;d have to create your personal jdlts config file in your plugins directory like so\r\n\r\n```lua\r\n\r\n-- Java.lua\r\n\r\nlocal config = {\r\n    cmd = {\r\n        --\r\n        &quot;java&quot;, -- Or the absolute path &#39;/path/to/java11_or_newer/bin/java&#39;\r\n        &quot;-Declipse.application=org.eclipse.jdt.ls.core.id1&quot;,\r\n        &quot;-Dosgi.bundles.defaultStartLevel=4&quot;,\r\n        &quot;-Declipse.product=org.eclipse.jdt.ls.core.product&quot;,\r\n        &quot;-Dlog.protocol=true&quot;,\r\n        &quot;-Dlog.level=ALL&quot;,\r\n        &quot;-Xms1g&quot;,\r\n        &quot;--add-modules=ALL-SYSTEM&quot;,\r\n        &quot;--add-opens&quot;,\r\n        &quot;java.base/java.util=ALL-UNNAMED&quot;,\r\n        &quot;--add-opens&quot;,\r\n        &quot;java.base/java.lang=ALL-UNNAMED&quot;,\r\n        --\r\n        &quot;-jar&quot;,\r\n        &quot;/path/to/jdtls_install_location/plugins/org.eclipse.equinox.launcher_VERSION_NUMBER.jar&quot;,\r\n        &quot;-configuration&quot;, &quot;/path/to/jdtls_install_location/config_SYSTEM&quot;,\r\n        &quot;-data&quot;, &quot;/Users/YOUR_MACHINE_NAME/local/share/nvim/java&quot;\r\n    },\r\n    settings = {\r\n        java = {\r\n            signatureHelp = {enabled = true},\r\n            import = {enabled = true},\r\n            rename = {enabled = true}\r\n        }\r\n    },\r\n    init_options = {\r\n        bundles = {}\r\n    }\r\n}\r\n\r\n```\r\n\r\nSource the new config and open any java file.","title":"Neovim setting up jdtls with lsp-zero/mason","body":"<p>First, include java path to your <code>bashrc</code>. And retry the installation using <code>Mason.nvim</code></p>\n<p>Else: Do below</p>\n<ol>\n<li><p>Install <a href=\"https://github.com/eclipse/eclipse.jdt.ls\" rel=\"nofollow noreferrer\">eclipse.jdt.ls</a> by following their <a href=\"https://github.com/eclipse/eclipse.jdt.ls#installation\" rel=\"nofollow noreferrer\">Installation instructions</a>.</p>\n</li>\n<li><p>Add the plugin:</p>\n</li>\n</ol>\n<ul>\n<li>vim-plug: Plug <code>mfussenegger/nvim-jdtls</code></li>\n<li>packer.nvim: use <code>mfussenegger/nvim-jdtls</code></li>\n</ul>\n<ol start=\"3\">\n<li>To solve this you'd have to create your personal jdlts config file in your plugins directory like so</li>\n</ol>\n<pre class=\"lang-lua prettyprint-override\"><code>\n-- Java.lua\n\nlocal config = {\n    cmd = {\n        --\n        &quot;java&quot;, -- Or the absolute path '/path/to/java11_or_newer/bin/java'\n        &quot;-Declipse.application=org.eclipse.jdt.ls.core.id1&quot;,\n        &quot;-Dosgi.bundles.defaultStartLevel=4&quot;,\n        &quot;-Declipse.product=org.eclipse.jdt.ls.core.product&quot;,\n        &quot;-Dlog.protocol=true&quot;,\n        &quot;-Dlog.level=ALL&quot;,\n        &quot;-Xms1g&quot;,\n        &quot;--add-modules=ALL-SYSTEM&quot;,\n        &quot;--add-opens&quot;,\n        &quot;java.base/java.util=ALL-UNNAMED&quot;,\n        &quot;--add-opens&quot;,\n        &quot;java.base/java.lang=ALL-UNNAMED&quot;,\n        --\n        &quot;-jar&quot;,\n        &quot;/path/to/jdtls_install_location/plugins/org.eclipse.equinox.launcher_VERSION_NUMBER.jar&quot;,\n        &quot;-configuration&quot;, &quot;/path/to/jdtls_install_location/config_SYSTEM&quot;,\n        &quot;-data&quot;, &quot;/Users/YOUR_MACHINE_NAME/local/share/nvim/java&quot;\n    },\n    settings = {\n        java = {\n            signatureHelp = {enabled = true},\n            import = {enabled = true},\n            rename = {enabled = true}\n        }\n    },\n    init_options = {\n        bundles = {}\n    }\n}\n\n</code></pre>\n<p>Source the new config and open any java file.</p>\n"},{"tags":[],"owner":{"account_id":2348910,"reputation":81,"user_id":2284852,"display_name":"JayBoCC2"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1673059536,"creation_date":1673059222,"answer_id":75037753,"question_id":74844019,"body_markdown":"I recommend using [mfussenegger/nvim-jdtls][1] to run and configure the language server.\r\n\r\nIts simply a matter of setting up a FTPlugin for java that calls `jdtls.start_or_attach(jdtls_config)` whenever a java file/repo is opened which will start the language server and attach it to your buffer which can be verified by `:LspInfo`.\r\n\r\nftplugin/java.lua:\r\n```\r\nlocal jdtls_config = require(&quot;myconfig.lsp.jdtls&quot;).setup()\r\nlocal pkg_status, jdtls = pcall(require,&quot;jdtls&quot;)\r\nif not pkg_status then\r\n  vim.notify(&quot;unable to load nvim-jdtls&quot;, &quot;error&quot;)\r\n  return\r\nend\r\njdtls.start_or_attach(jdtls_config)\r\n```\r\n\r\nand the corresponding config using jdtls (installed via mason)\r\nYou may want to provide your own capabilities and on_attach functions but otherwise it should give you a good nudge in the right direction.\r\n\r\nmyconfig/lsp/jdtls.lua\r\n```\r\nlocal opts = {\r\n  cmd = {},\r\n  settings = {\r\n    java = {\r\n      signatureHelp = { enabled = true },\r\n      completion = {\r\n        favoriteStaticMembers = {},\r\n        filteredTypes = {\r\n          -- &quot;com.sun.*&quot;,\r\n          -- &quot;io.micrometer.shaded.*&quot;,\r\n          -- &quot;java.awt.*&quot;,\r\n          -- &quot;jdk.*&quot;,\r\n          -- &quot;sun.*&quot;,\r\n        },\r\n      },\r\n      sources = {\r\n        organizeImports = {\r\n          starThreshold = 9999,\r\n          staticStarThreshold = 9999,\r\n        },\r\n      },\r\n      codeGeneration = {\r\n        toString = {\r\n          template = &quot;${object.className}{${member.name()}=${member.value}, ${otherMembers}}&quot;,\r\n        },\r\n        useBlocks = true,\r\n      },\r\n      configuration = {\r\n        runtimes = {\r\n          {\r\n            name = &quot;JavaSE-1.8&quot;,\r\n            path = &quot;/Library/Java/JavaVirtualMachines/amazon-corretto-8.jdk/Contents/Home&quot;,\r\n            default = true,\r\n          },\r\n          {\r\n            name = &quot;JavaSE-17&quot;,\r\n            path = &quot;/Library/Java/JavaVirtualMachines/jdk-17.jdk/Contents/Home&quot;,\r\n          },\r\n          {\r\n            name = &quot;JavaSE-19&quot;,\r\n            path = &quot;/Library/Java/JavaVirtualMachines/jdk-19.jdk/Contents/Home&quot;,\r\n          },\r\n        },\r\n      },\r\n    },\r\n  },\r\n}\r\n\r\nlocal function setup()\r\n  local pkg_status, jdtls = pcall(require,&quot;jdtls&quot;)\r\n  if not pkg_status then\r\n    vim.notify(&quot;unable to load nvim-jdtls&quot;, &quot;error&quot;)\r\n    return {}\r\n  end\r\n\r\n  -- local jdtls_path = vim.fn.stdpath(&quot;data&quot;) .. &quot;/mason/packages/jdtls&quot;\r\n  local jdtls_bin = vim.fn.stdpath(&quot;data&quot;) .. &quot;/mason/bin/jdtls&quot;\r\n\r\n  local root_markers = { &quot;.gradle&quot;, &quot;gradlew&quot;, &quot;.git&quot; }\r\n  local root_dir = jdtls.setup.find_root(root_markers)\r\n  local home = os.getenv(&quot;HOME&quot;)\r\n  local project_name = vim.fn.fnamemodify(root_dir, &quot;:p:h:t&quot;)\r\n  local workspace_dir = home .. &quot;/.cache/jdtls/workspace/&quot; .. project_name\r\n\r\n  opts.cmd = {\r\n    jdtls_bin,\r\n    &quot;-data&quot;,\r\n    workspace_dir,\r\n  }\r\n\r\n\r\n  local on_attach = function(client, bufnr)\r\n    jdtls.setup.add_commands() -- important to ensure you can update configs when build is updated\r\n    -- if you setup DAP according to https://github.com/mfussenegger/nvim-jdtls#nvim-dap-configuration you can uncomment below\r\n    -- jdtls.setup_dap({ hotcodereplace = &quot;auto&quot; })\r\n    -- jdtls.dap.setup_dap_main_class_configs()\r\n\r\n    -- you may want to also run your generic on_attach() function used by your LSP config\r\n  end\r\n\r\n  opts.on_attach = on_attach\r\n  opts.capabilities = vim.lsp.protocol.make_client_capabilities()\r\n\r\n  return opts\r\nend\r\n\r\nreturn { setup = setup }\r\n```\r\n\r\nThese examples are yanked from my [personal neovim config][2] ([jdtls config][3]).  Hope this helps get you rolling.\r\n\r\nAlso make sure you have jdk17+ available for jdtls (i launch neovim with JAVA_HOME set to my jdk17 install)\r\n(your code can still be compiled by and run on jdk8 -- I successfully work on gradle projects that are built with jdk8 no problems w/ this config)\r\n\r\n\r\n  [1]: https://github.com/mfussenegger/nvim-jdtls\r\n  [2]: https://github.com/jaybocc2/dotfiles/pull/3\r\n  [3]: https://github.com/jaybocc2/dotfiles/blob/bf7828b91facf1b0a0e2e442f740cd66830b79ef/nvim/lua/lsp/settings/jdtls.lua","title":"Neovim setting up jdtls with lsp-zero/mason","body":"<p>I recommend using <a href=\"https://github.com/mfussenegger/nvim-jdtls\" rel=\"nofollow noreferrer\">mfussenegger/nvim-jdtls</a> to run and configure the language server.</p>\n<p>Its simply a matter of setting up a FTPlugin for java that calls <code>jdtls.start_or_attach(jdtls_config)</code> whenever a java file/repo is opened which will start the language server and attach it to your buffer which can be verified by <code>:LspInfo</code>.</p>\n<p>ftplugin/java.lua:</p>\n<pre><code>local jdtls_config = require(&quot;myconfig.lsp.jdtls&quot;).setup()\nlocal pkg_status, jdtls = pcall(require,&quot;jdtls&quot;)\nif not pkg_status then\n  vim.notify(&quot;unable to load nvim-jdtls&quot;, &quot;error&quot;)\n  return\nend\njdtls.start_or_attach(jdtls_config)\n</code></pre>\n<p>and the corresponding config using jdtls (installed via mason)\nYou may want to provide your own capabilities and on_attach functions but otherwise it should give you a good nudge in the right direction.</p>\n<p>myconfig/lsp/jdtls.lua</p>\n<pre><code>local opts = {\n  cmd = {},\n  settings = {\n    java = {\n      signatureHelp = { enabled = true },\n      completion = {\n        favoriteStaticMembers = {},\n        filteredTypes = {\n          -- &quot;com.sun.*&quot;,\n          -- &quot;io.micrometer.shaded.*&quot;,\n          -- &quot;java.awt.*&quot;,\n          -- &quot;jdk.*&quot;,\n          -- &quot;sun.*&quot;,\n        },\n      },\n      sources = {\n        organizeImports = {\n          starThreshold = 9999,\n          staticStarThreshold = 9999,\n        },\n      },\n      codeGeneration = {\n        toString = {\n          template = &quot;${object.className}{${member.name()}=${member.value}, ${otherMembers}}&quot;,\n        },\n        useBlocks = true,\n      },\n      configuration = {\n        runtimes = {\n          {\n            name = &quot;JavaSE-1.8&quot;,\n            path = &quot;/Library/Java/JavaVirtualMachines/amazon-corretto-8.jdk/Contents/Home&quot;,\n            default = true,\n          },\n          {\n            name = &quot;JavaSE-17&quot;,\n            path = &quot;/Library/Java/JavaVirtualMachines/jdk-17.jdk/Contents/Home&quot;,\n          },\n          {\n            name = &quot;JavaSE-19&quot;,\n            path = &quot;/Library/Java/JavaVirtualMachines/jdk-19.jdk/Contents/Home&quot;,\n          },\n        },\n      },\n    },\n  },\n}\n\nlocal function setup()\n  local pkg_status, jdtls = pcall(require,&quot;jdtls&quot;)\n  if not pkg_status then\n    vim.notify(&quot;unable to load nvim-jdtls&quot;, &quot;error&quot;)\n    return {}\n  end\n\n  -- local jdtls_path = vim.fn.stdpath(&quot;data&quot;) .. &quot;/mason/packages/jdtls&quot;\n  local jdtls_bin = vim.fn.stdpath(&quot;data&quot;) .. &quot;/mason/bin/jdtls&quot;\n\n  local root_markers = { &quot;.gradle&quot;, &quot;gradlew&quot;, &quot;.git&quot; }\n  local root_dir = jdtls.setup.find_root(root_markers)\n  local home = os.getenv(&quot;HOME&quot;)\n  local project_name = vim.fn.fnamemodify(root_dir, &quot;:p:h:t&quot;)\n  local workspace_dir = home .. &quot;/.cache/jdtls/workspace/&quot; .. project_name\n\n  opts.cmd = {\n    jdtls_bin,\n    &quot;-data&quot;,\n    workspace_dir,\n  }\n\n\n  local on_attach = function(client, bufnr)\n    jdtls.setup.add_commands() -- important to ensure you can update configs when build is updated\n    -- if you setup DAP according to https://github.com/mfussenegger/nvim-jdtls#nvim-dap-configuration you can uncomment below\n    -- jdtls.setup_dap({ hotcodereplace = &quot;auto&quot; })\n    -- jdtls.dap.setup_dap_main_class_configs()\n\n    -- you may want to also run your generic on_attach() function used by your LSP config\n  end\n\n  opts.on_attach = on_attach\n  opts.capabilities = vim.lsp.protocol.make_client_capabilities()\n\n  return opts\nend\n\nreturn { setup = setup }\n</code></pre>\n<p>These examples are yanked from my <a href=\"https://github.com/jaybocc2/dotfiles/pull/3\" rel=\"nofollow noreferrer\">personal neovim config</a> (<a href=\"https://github.com/jaybocc2/dotfiles/blob/bf7828b91facf1b0a0e2e442f740cd66830b79ef/nvim/lua/lsp/settings/jdtls.lua\" rel=\"nofollow noreferrer\">jdtls config</a>).  Hope this helps get you rolling.</p>\n<p>Also make sure you have jdk17+ available for jdtls (i launch neovim with JAVA_HOME set to my jdk17 install)\n(your code can still be compiled by and run on jdk8 -- I successfully work on gradle projects that are built with jdk8 no problems w/ this config)</p>\n"}],"owner":{"account_id":3085397,"reputation":2842,"user_id":2612651,"accept_rate":78,"display_name":"nerdlyist"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13816,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":74845408,"answer_count":2,"score":1,"last_activity_date":1673059536,"creation_date":1671393558,"question_id":74844019,"body_markdown":"As part of the upcoming 2023 new year I wanted to try and move my development environment to vim or neovim. I have gone through a bit of setup already and have go and js/ts setup and appearing to work just fine. Autocomplete, linting and import management.\r\n\r\nTrying to get lsp-zero and java working though is turning out to be a nightmare (because of course java would be a problem child). I opened a java file lsp-zero was baller and asked to install the `jdtls` which appears to have worked and voila nothing... I just have code highlighting. No auto-complete or importing management.\r\n\r\n[![Mason LSP Servers][1]][1] \r\n\r\nI added the following to test \r\n\r\n```\r\n-- configure an individual server\r\nlsp.configure(&#39;jdtls&#39;, {\r\n  flags = {\r\n    debounce_text_changes = 150,\r\n  },\r\n  on_attach = function(client, bufnr)\r\n    print(&#39;lsp server (jdtls) attached&#39;)\r\n  end\r\n})\r\n\r\nlsp.configure(&#39;gopls&#39;, {\r\n  flags = {\r\n    debounce_text_changes = 150,\r\n  },\r\n  on_attach = function(client, bufnr)\r\n    print(&#39;lsp server (gopls) attached&#39;)\r\n  end\r\n})\r\n```\r\n\r\nJava is not picking up the lsp server\r\n[![enter image description here][2]][2]\r\n\r\nGo picks up just fine\r\n[![enter image description here][3]][3]\r\n\r\nDoes anyone know of additional configs that are needed. I am not seeing anything specifically called out.\r\n\r\n--- Config edit ---\r\n\r\nI updated the config to call the windows version of the scripts. I also added a data path and root_dir. The lsp still never triggers.\r\n\r\n```\r\nrequire&#39;lspconfig&#39;.jdtls.setup{\r\n cmd = {\r\n        &#39;jdtls-win.cmd&#39;,\r\n        &quot;-configuration&quot;,\r\n        &quot;C:\\\\Users\\\\Coury\\\\AppData\\\\Local\\\\nvim-data\\\\mason\\\\packages\\\\jdtls\\\\config_win&quot;,\r\n        &quot;-jar&quot;,\r\n        &quot;C:\\\\Users\\\\Coury\\\\AppData\\\\Local\\\\nvim-data\\\\mason\\\\packages\\\\jdtls\\\\plugins\\\\org.eclipse.equinox.launcher_1.6.400.v20210924-0641.jar&quot;,\r\n        &quot;-data&quot;,\r\n        &quot;C:\\\\Users\\\\Coury\\\\Documents\\\\Code\\\\interviews\\\\truleo\\\\app&quot;,\r\n    },\r\n    single_file_support = true,\r\n    root_dir = function() \r\n        return &quot;C:\\\\Users\\\\Coury\\\\Documents\\\\Code\\\\interviews\\\\truleo\\\\app&quot;\r\n    end,\r\n    flags = {\r\n        debounce_text_changes = 150,\r\n    },\r\n    on_attach = function(client, bufnr)\r\n        print(&#39;lsp server (jdtls) attached&#39;)\r\n    end\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CRnNF.png\r\n  [2]: https://i.stack.imgur.com/6gIVQ.png\r\n  [3]: https://i.stack.imgur.com/6EtqU.png","title":"Neovim setting up jdtls with lsp-zero/mason","body":"<p>As part of the upcoming 2023 new year I wanted to try and move my development environment to vim or neovim. I have gone through a bit of setup already and have go and js/ts setup and appearing to work just fine. Autocomplete, linting and import management.</p>\n<p>Trying to get lsp-zero and java working though is turning out to be a nightmare (because of course java would be a problem child). I opened a java file lsp-zero was baller and asked to install the <code>jdtls</code> which appears to have worked and voila nothing... I just have code highlighting. No auto-complete or importing management.</p>\n<p><a href=\"https://i.stack.imgur.com/CRnNF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CRnNF.png\" alt=\"Mason LSP Servers\" /></a></p>\n<p>I added the following to test</p>\n<pre><code>-- configure an individual server\nlsp.configure('jdtls', {\n  flags = {\n    debounce_text_changes = 150,\n  },\n  on_attach = function(client, bufnr)\n    print('lsp server (jdtls) attached')\n  end\n})\n\nlsp.configure('gopls', {\n  flags = {\n    debounce_text_changes = 150,\n  },\n  on_attach = function(client, bufnr)\n    print('lsp server (gopls) attached')\n  end\n})\n</code></pre>\n<p>Java is not picking up the lsp server\n<a href=\"https://i.stack.imgur.com/6gIVQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6gIVQ.png\" alt=\"enter image description here\" /></a></p>\n<p>Go picks up just fine\n<a href=\"https://i.stack.imgur.com/6EtqU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6EtqU.png\" alt=\"enter image description here\" /></a></p>\n<p>Does anyone know of additional configs that are needed. I am not seeing anything specifically called out.</p>\n<p>--- Config edit ---</p>\n<p>I updated the config to call the windows version of the scripts. I also added a data path and root_dir. The lsp still never triggers.</p>\n<pre><code>require'lspconfig'.jdtls.setup{\n cmd = {\n        'jdtls-win.cmd',\n        &quot;-configuration&quot;,\n        &quot;C:\\\\Users\\\\Coury\\\\AppData\\\\Local\\\\nvim-data\\\\mason\\\\packages\\\\jdtls\\\\config_win&quot;,\n        &quot;-jar&quot;,\n        &quot;C:\\\\Users\\\\Coury\\\\AppData\\\\Local\\\\nvim-data\\\\mason\\\\packages\\\\jdtls\\\\plugins\\\\org.eclipse.equinox.launcher_1.6.400.v20210924-0641.jar&quot;,\n        &quot;-data&quot;,\n        &quot;C:\\\\Users\\\\Coury\\\\Documents\\\\Code\\\\interviews\\\\truleo\\\\app&quot;,\n    },\n    single_file_support = true,\n    root_dir = function() \n        return &quot;C:\\\\Users\\\\Coury\\\\Documents\\\\Code\\\\interviews\\\\truleo\\\\app&quot;\n    end,\n    flags = {\n        debounce_text_changes = 150,\n    },\n    on_attach = function(client, bufnr)\n        print('lsp server (jdtls) attached')\n    end\n}\n</code></pre>\n"},{"tags":["java","jaxb","classloader"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":2,"creation_date":1651539486,"post_id":72093691,"comment_id":127383504,"body_markdown":"Are you using a tool such as Maven or Gradle to manage your libraries? I believe there are transitive dependencies which are also needed as well as the `jaxb-api` and `jaxb-runtime` JARs. If you are just adding these 2 JARs to the classpath manually, you may be missing those extra JARs. [example](https://mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime/2.3.4)","body":"Are you using a tool such as Maven or Gradle to manage your libraries? I believe there are transitive dependencies which are also needed as well as the <code>jaxb-api</code> and <code>jaxb-runtime</code> JARs. If you are just adding these 2 JARs to the classpath manually, you may be missing those extra JARs. <a href=\"https://mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime/2.3.4\" rel=\"nofollow noreferrer\">example</a>"},{"owner":{"account_id":35502,"reputation":28362,"user_id":100565,"accept_rate":59,"display_name":"MeBigFatGuy"},"score":0,"creation_date":1651586269,"post_id":72093691,"comment_id":127394796,"body_markdown":"that is a reasonable suggestion, and i expect that may happen later on, but service locator should work fine, and find the correct factory name.","body":"that is a reasonable suggestion, and i expect that may happen later on, but service locator should work fine, and find the correct factory name."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1651587779,"post_id":72093691,"comment_id":127395440,"body_markdown":"Understood. I have not been able to recreate your specific problem. But as a quick test, can you add the old JAXB runtime JAR to your classpath - for example, `jaxb-impl-2.3.1.jar`, downloadable from [this page](https://mvnrepository.com/artifact/com.sun.xml.bind/jaxb-impl/2.3.1). That contains `com.sun.xml.bind.v2.ContextFactory`.","body":"Understood. I have not been able to recreate your specific problem. But as a quick test, can you add the old JAXB runtime JAR to your classpath - for example, <code>jaxb-impl-2.3.1.jar</code>, downloadable from <a href=\"https://mvnrepository.com/artifact/com.sun.xml.bind/jaxb-impl/2.3.1\" rel=\"nofollow noreferrer\">this page</a>. That contains <code>com.sun.xml.bind.v2.ContextFactory</code>."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1651588043,"post_id":72093691,"comment_id":127395542,"body_markdown":"Or, similarly, try the Metro (reference implementation) JAXB runtime JAR (e.g. from [here](https://mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime/2.3.1)).","body":"Or, similarly, try the Metro (reference implementation) JAXB runtime JAR (e.g. from <a href=\"https://mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime/2.3.1\" rel=\"nofollow noreferrer\">here</a>)."}],"answers":[{"tags":[],"owner":{"account_id":4119848,"reputation":46,"user_id":3380516,"display_name":"CosmicEddie"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673056905,"creation_date":1673056905,"answer_id":75037640,"question_id":72093691,"body_markdown":"I just encountered the same issue whilst trying to upgrade a project from Java 8 to Java 17.\r\n\r\nThanks to [this][1] I found what appears to be some very odd behaviour by the JAXB runtime to do with class loaders.\r\n\r\nAs a work-around I have wrapped all my JAXBContext.newInstance calls like this:\r\n\r\n    public interface Util {\r\n\r\n\t// TODO see here: https://stackoverflow.com/questions/64979229/eclipse-osgi-java-11-jaxb-and-the-classloader\r\n\t//  - without this the classloader breaks for Java &gt;=9\r\n\tdefault &lt;T&gt; Unmarshaller getUnmarshaller(Class&lt;T&gt; cl) throws JAXBException {\r\n\t\tThread thread = Thread.currentThread();\r\n\t\tClassLoader classLoader = thread.getContextClassLoader();\r\n\t\ttry {\r\n\t\t\tthread.setContextClassLoader(getClass().getClassLoader());\r\n\t\t\tJAXBContext ctx = JAXBContext.newInstance(cl);\r\n\t\t\treturn ctx.createUnmarshaller();\r\n\t\t} finally {\r\n\t\t\tthread.setContextClassLoader(classLoader);\r\n\t\t}\r\n\t}\r\n\r\nAlso, as described [here][2] you need a file src/main/resources/jaxb.properties:\r\n\r\n    javax.xml.bind.JAXBContextFactory=com.sun.xml.bind.v2.ContextFactory\r\n\r\nI don&#39;t pretend to understand why this is necessary.\r\nIt would be great if someone could explain, and perhaps suggest a better way to fix it.\r\n\r\nHTH\r\n\r\n  [1]: https://stackoverflow.com/questions/64979229/eclipse-osgi-java-11-jaxb-and-the-classloader\r\n  [2]: https://github.com/ControlSystemStudio/cs-studio/issues/2582","title":"Jaxb with jdk17 classloader issues","body":"<p>I just encountered the same issue whilst trying to upgrade a project from Java 8 to Java 17.</p>\n<p>Thanks to <a href=\"https://stackoverflow.com/questions/64979229/eclipse-osgi-java-11-jaxb-and-the-classloader\">this</a> I found what appears to be some very odd behaviour by the JAXB runtime to do with class loaders.</p>\n<p>As a work-around I have wrapped all my JAXBContext.newInstance calls like this:</p>\n<pre><code>public interface Util {\n\n// TODO see here: https://stackoverflow.com/questions/64979229/eclipse-osgi-java-11-jaxb-and-the-classloader\n//  - without this the classloader breaks for Java &gt;=9\ndefault &lt;T&gt; Unmarshaller getUnmarshaller(Class&lt;T&gt; cl) throws JAXBException {\n    Thread thread = Thread.currentThread();\n    ClassLoader classLoader = thread.getContextClassLoader();\n    try {\n        thread.setContextClassLoader(getClass().getClassLoader());\n        JAXBContext ctx = JAXBContext.newInstance(cl);\n        return ctx.createUnmarshaller();\n    } finally {\n        thread.setContextClassLoader(classLoader);\n    }\n}\n</code></pre>\n<p>Also, as described <a href=\"https://github.com/ControlSystemStudio/cs-studio/issues/2582\" rel=\"nofollow noreferrer\">here</a> you need a file src/main/resources/jaxb.properties:</p>\n<pre><code>javax.xml.bind.JAXBContextFactory=com.sun.xml.bind.v2.ContextFactory\n</code></pre>\n<p>I don't pretend to understand why this is necessary.\nIt would be great if someone could explain, and perhaps suggest a better way to fix it.</p>\n<p>HTH</p>\n"}],"owner":{"account_id":35502,"reputation":28362,"user_id":100565,"accept_rate":59,"display_name":"MeBigFatGuy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4543,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75037640,"answer_count":1,"score":0,"last_activity_date":1673056905,"creation_date":1651537554,"question_id":72093691,"body_markdown":"i have an application running in jdk17 that tries to use jaxb, but is failing to load the actual jaxb-runtime.jar, it seems.\r\n\r\nI have added jaxb-api.jar 2.3.1 and jaxb-runtime.jar 2.3.4 to the classpath\r\n\r\nAnd i have this code\r\n\r\n    try (BufferedReader br = new BufferedReader(new java.io.InputStreamReader(getClass().getResourceAsStream(&quot;/META-INF/services/javax.xml.bind.JAXBContext&quot;)))) {\r\n        String cn = br.readLine();\r\n        Class c = Class.forName(cn);\r\n        System.out.println(&quot;Impl class: &quot; + c.getName());\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n     context = JAXBContext.newInstance(getClass());\r\n\r\nWhen run,  i get \r\n\r\n    Impl class: com.sun.xml.bind.v2.ContextFactory\r\n\r\n    Caused by: java.lang.ClassNotFoundException: com.sun.xml.internal bind.v2.ContextFactory\r\n\t    at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:445)\r\n\t    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:587)\r\n\t    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n\t    at javax.xml.bind.ServiceLoaderUtil.nullSafeLoadClass(ServiceLoaderUtil.java:122)\r\n\t    at javax.xml.bind.ServiceLoaderUtil.safeLoadClass(ServiceLoaderUtil.java:155)\r\n\t    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:276)\r\n\r\nSo this tells me that jaxb-runtime.jar is on the classpath, but for some reason, when the jaxb code goes to look for the correct Context Factory, it doesn&#39;t find the service lookup info, and just defaults to the default. (notice the .internal.)\r\n\r\nIf i add a jaxb.properties file and force it to pick my class, then it just CNFEs on com.sun.xml.bind.v2.ContextFactory\r\n\r\nIt&#39;s like there are two classloaders in play or something.\r\n\r\nAnyone have any idea as to how to debug further?\r\n","title":"Jaxb with jdk17 classloader issues","body":"<p>i have an application running in jdk17 that tries to use jaxb, but is failing to load the actual jaxb-runtime.jar, it seems.</p>\n<p>I have added jaxb-api.jar 2.3.1 and jaxb-runtime.jar 2.3.4 to the classpath</p>\n<p>And i have this code</p>\n<pre><code>try (BufferedReader br = new BufferedReader(new java.io.InputStreamReader(getClass().getResourceAsStream(&quot;/META-INF/services/javax.xml.bind.JAXBContext&quot;)))) {\n    String cn = br.readLine();\n    Class c = Class.forName(cn);\n    System.out.println(&quot;Impl class: &quot; + c.getName());\n} catch (Exception e) {\n    e.printStackTrace();\n}\n\n context = JAXBContext.newInstance(getClass());\n</code></pre>\n<p>When run,  i get</p>\n<pre><code>Impl class: com.sun.xml.bind.v2.ContextFactory\n\nCaused by: java.lang.ClassNotFoundException: com.sun.xml.internal bind.v2.ContextFactory\n    at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:445)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:587)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n    at javax.xml.bind.ServiceLoaderUtil.nullSafeLoadClass(ServiceLoaderUtil.java:122)\n    at javax.xml.bind.ServiceLoaderUtil.safeLoadClass(ServiceLoaderUtil.java:155)\n    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:276)\n</code></pre>\n<p>So this tells me that jaxb-runtime.jar is on the classpath, but for some reason, when the jaxb code goes to look for the correct Context Factory, it doesn't find the service lookup info, and just defaults to the default. (notice the .internal.)</p>\n<p>If i add a jaxb.properties file and force it to pick my class, then it just CNFEs on com.sun.xml.bind.v2.ContextFactory</p>\n<p>It's like there are two classloaders in play or something.</p>\n<p>Anyone have any idea as to how to debug further?</p>\n"},{"tags":["java","hash","hashmap","hashtable","hashcode"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1363392478,"post_id":15437345,"comment_id":21848534,"body_markdown":"I doubt that they really say exactly that, and if they do they are wrong. That&#39;s only one way of doing it.","body":"I doubt that they really say exactly that, and if they do they are wrong. That&#39;s only one way of doing it."}],"answers":[{"tags":[],"owner":{"account_id":152622,"reputation":490044,"user_id":367273,"accept_rate":96,"display_name":"NPE"},"down_vote_count":0,"up_vote_count":30,"is_accepted":true,"score":30,"last_activity_date":1363365751,"creation_date":1363364621,"answer_id":15437377,"question_id":15437345,"body_markdown":"Using a power of two effectively masks out top bits of the hash code. Thus a poor-quality hash function might perform particularly badly in this scenario.\r\n\r\nJava&#39;s `HashMap` mitigates this by mistrusting the object&#39;s `hashCode()` implementation and [applying a second level of hashing to its result][1]:\r\n\r\n&gt; Applies a supplemental hash function to a given hashCode, which defends against poor quality hash functions. This is critical because HashMap uses power-of-two length hash tables, that otherwise encounter collisions for hashCodes that do not differ in lower bits. \r\n\r\nIf you have a good hash function, or do something similar to what `HashMap` does, it does not matter whether you use prime numbers etc as the table size.\r\n\r\nIf, on the other hand, the hash function is of unknown or poor quality, then using a prime number would be a safer bet. It will, however, make dynamically-sized tables tricker to implement, since all of a sudden you need to be able to produce prime numbers instead of just multiplying the size by a constant factor.\r\n\r\n\r\n  [1]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java#256","title":"Java: A &quot;prime&quot; number or a &quot;power of two&quot; as HashMap size?","body":"<p>Using a power of two effectively masks out top bits of the hash code. Thus a poor-quality hash function might perform particularly badly in this scenario.</p>\n\n<p>Java's <code>HashMap</code> mitigates this by mistrusting the object's <code>hashCode()</code> implementation and <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java#256\">applying a second level of hashing to its result</a>:</p>\n\n<blockquote>\n  <p>Applies a supplemental hash function to a given hashCode, which defends against poor quality hash functions. This is critical because HashMap uses power-of-two length hash tables, that otherwise encounter collisions for hashCodes that do not differ in lower bits. </p>\n</blockquote>\n\n<p>If you have a good hash function, or do something similar to what <code>HashMap</code> does, it does not matter whether you use prime numbers etc as the table size.</p>\n\n<p>If, on the other hand, the hash function is of unknown or poor quality, then using a prime number would be a safer bet. It will, however, make dynamically-sized tables tricker to implement, since all of a sudden you need to be able to produce prime numbers instead of just multiplying the size by a constant factor.</p>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1363364683,"creation_date":1363364683,"answer_id":15437400,"question_id":15437345,"body_markdown":"The standard HashMap implementation has a `hash` method which rehashes your object&#39;s hashcode to avoid that pitfall. The comment before [the `hash()` method][1] reads:\r\n\r\n    /**\r\n     * Retrieve object hash code and applies a supplemental hash function to the\r\n     * result hash, which defends against poor quality hash functions.  This is\r\n     * critical because HashMap uses power-of-two length hash tables, that\r\n     * otherwise encounter collisions for hashCodes that do not differ\r\n     * in lower bits. Note: Null keys always map to hash 0, thus index 0.\r\n     */\r\n\r\n [1]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/HashMap.java#255","title":"Java: A &quot;prime&quot; number or a &quot;power of two&quot; as HashMap size?","body":"<p>The standard HashMap implementation has a <code>hash</code> method which rehashes your object's hashcode to avoid that pitfall. The comment before <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/HashMap.java#255\" rel=\"noreferrer\">the <code>hash()</code> method</a> reads:</p>\n\n<pre><code>/**\n * Retrieve object hash code and applies a supplemental hash function to the\n * result hash, which defends against poor quality hash functions.  This is\n * critical because HashMap uses power-of-two length hash tables, that\n * otherwise encounter collisions for hashCodes that do not differ\n * in lower bits. Note: Null keys always map to hash 0, thus index 0.\n */\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1155134,"reputation":13311,"user_id":1135954,"accept_rate":68,"display_name":"mtk"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1673054881,"creation_date":1363364867,"answer_id":15437450,"question_id":15437345,"body_markdown":"From a performance/calculation time point of view power-of-two sizes can be calculated with just **bit masking** which is faster than **integer modulo operation** which would be required otherwise.","title":"Java: A &quot;prime&quot; number or a &quot;power of two&quot; as HashMap size?","body":"<p>From a performance/calculation time point of view power-of-two sizes can be calculated with just <strong>bit masking</strong> which is faster than <strong>integer modulo operation</strong> which would be required otherwise.</p>\n"},{"tags":[],"owner":{"account_id":2009857,"reputation":25959,"user_id":1798593,"display_name":"Patricia Shanahan"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1363365390,"creation_date":1363365390,"answer_id":15437629,"question_id":15437345,"body_markdown":"The only way to know which is better between prime and power-of-two is to benchmark it.\r\n\r\nMany years ago, when writing an assembler whose performance depended strongly on symbol talbe lookup, I tested this using a large block of generated identifiers. Even with a naive mapping, I found that power-of-two, as expected, had less even distribution and longer chains than a similar sized prime number of buckets. It still ran faster, because of the speed of bucket selection by bit masking.\r\n\r\nI strongly suspect the java.util developers would not have resorted to the extra hashing and power-of-two without benchmarking it against using a prime number of buckets. It is a really obvious thing to do when designing a hashed data structure. \r\n\r\nFor that reason, I&#39;m sure the rehash and power-of-two size gives better performance for typical Java hash maps than a prime number of buckets.","title":"Java: A &quot;prime&quot; number or a &quot;power of two&quot; as HashMap size?","body":"<p>The only way to know which is better between prime and power-of-two is to benchmark it.</p>\n\n<p>Many years ago, when writing an assembler whose performance depended strongly on symbol talbe lookup, I tested this using a large block of generated identifiers. Even with a naive mapping, I found that power-of-two, as expected, had less even distribution and longer chains than a similar sized prime number of buckets. It still ran faster, because of the speed of bucket selection by bit masking.</p>\n\n<p>I strongly suspect the java.util developers would not have resorted to the extra hashing and power-of-two without benchmarking it against using a prime number of buckets. It is a really obvious thing to do when designing a hashed data structure. </p>\n\n<p>For that reason, I'm sure the rehash and power-of-two size gives better performance for typical Java hash maps than a prime number of buckets.</p>\n"},{"tags":[],"owner":{"account_id":2080670,"reputation":3333,"user_id":1852723,"accept_rate":75,"display_name":"Drunix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1396968082,"creation_date":1396968082,"answer_id":22940397,"question_id":15437345,"body_markdown":"You probably should use prime sized hash tables if you use [quadratic probing][1] for collision resolution. If you have a prime sized table, quadratic probing will hit half of the entries, less if it is not a prime. So you might not find a suitable place to store you entry even if your hash table is less than half full. Since Java hash maps don&#39;t use quadratic probing, there is no need to use primes as size.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Quadratic_probing","title":"Java: A &quot;prime&quot; number or a &quot;power of two&quot; as HashMap size?","body":"<p>You probably should use prime sized hash tables if you use <a href=\"http://en.wikipedia.org/wiki/Quadratic_probing\" rel=\"nofollow\">quadratic probing</a> for collision resolution. If you have a prime sized table, quadratic probing will hit half of the entries, less if it is not a prime. So you might not find a suitable place to store you entry even if your hash table is less than half full. Since Java hash maps don't use quadratic probing, there is no need to use primes as size.</p>\n"}],"owner":{"account_id":1610889,"reputation":11147,"user_id":1737817,"accept_rate":100,"display_name":"Nikunj Banka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7267,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":15437377,"answer_count":5,"score":35,"last_activity_date":1673054881,"creation_date":1363364534,"question_id":15437345,"body_markdown":"Many books and tutorials say that the size of a hash table must be a prime to evenly distribute the keys in all the buckets. But Java&#39;s `HashMap` always uses a size that is a power of two. Shouldn&#39;t it be using a prime? What&#39;s better, a &quot;prime&quot; or a &quot;power of two&quot; as the hash table size?","title":"Java: A &quot;prime&quot; number or a &quot;power of two&quot; as HashMap size?","body":"<p>Many books and tutorials say that the size of a hash table must be a prime to evenly distribute the keys in all the buckets. But Java's <code>HashMap</code> always uses a size that is a power of two. Shouldn't it be using a prime? What's better, a \"prime\" or a \"power of two\" as the hash table size?</p>\n"},{"tags":["java","selenium"],"comments":[{"owner":{"account_id":2129117,"reputation":2148,"user_id":1890387,"display_name":"Mobrockers"},"score":0,"creation_date":1464854412,"post_id":37585627,"comment_id":62657420,"body_markdown":"How do you want to fail? Do you want an exception?","body":"How do you want to fail? Do you want an exception?"},{"owner":{"account_id":8464672,"reputation":119,"user_id":6349153,"accept_rate":67,"display_name":"Haris Z"},"score":0,"creation_date":1464854753,"post_id":37585627,"comment_id":62657640,"body_markdown":"@Mobrockers I want it the end result it will give `Failures:1`","body":"@Mobrockers I want it the end result it will give <code>Failures:1</code>"}],"answers":[{"tags":[],"owner":{"account_id":3447044,"reputation":41737,"user_id":2887618,"display_name":"Florent B."},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1464854603,"creation_date":1464854603,"answer_id":37586012,"question_id":37585627,"body_markdown":"Use `findElements` instead of `findElement` and check the `size`:\r\n\r\n    if(driver.findElements(By.xpath(&quot;//*[@id=&#39;myClass&#39;]/tr[1]&quot;)).size() != 0){\r\n        //passed\r\n    }else{\r\n        //failed\r\n    }\r\n\r\nYou could also catch the exception:\r\n\r\n    try {\r\n         WebElement element = driver.findElement(By.xpath(&quot;//*[@id=&#39;myClass&#39;]/tr[1]&quot;));\r\n        //passed\r\n    } catch (NoSuchElementException ex) {\r\n        //failed\r\n    }","title":"Selenium last conditional fail or pass","body":"<p>Use <code>findElements</code> instead of <code>findElement</code> and check the <code>size</code>:</p>\n\n<pre><code>if(driver.findElements(By.xpath(\"//*[@id='myClass']/tr[1]\")).size() != 0){\n    //passed\n}else{\n    //failed\n}\n</code></pre>\n\n<p>You could also catch the exception:</p>\n\n<pre><code>try {\n     WebElement element = driver.findElement(By.xpath(\"//*[@id='myClass']/tr[1]\"));\n    //passed\n} catch (NoSuchElementException ex) {\n    //failed\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6135411,"reputation":121,"user_id":4784445,"display_name":"Maciek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673054651,"creation_date":1464897809,"answer_id":37601106,"question_id":37585627,"body_markdown":"If you want your test to fail if some conditions weren&#39;t met, try using JUnit Assertions.\r\n\r\n    assertTrue(driver.findElements(By.className(&quot;myClass&quot;)).size() &gt; 0);\r\n\r\nIn this case, the test will fail if no elements with class `myClass` weren&#39;t found.\r\n\r\n","title":"Selenium last conditional fail or pass","body":"<p>If you want your test to fail if some conditions weren't met, try using JUnit Assertions.</p>\n<pre><code>assertTrue(driver.findElements(By.className(&quot;myClass&quot;)).size() &gt; 0);\n</code></pre>\n<p>In this case, the test will fail if no elements with class <code>myClass</code> weren't found.</p>\n"}],"owner":{"account_id":8464672,"reputation":119,"user_id":6349153,"accept_rate":67,"display_name":"Haris Z"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":301,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":37586012,"answer_count":2,"score":0,"last_activity_date":1673054651,"creation_date":1464853486,"question_id":37585627,"body_markdown":"Consider:\r\n\r\n    if(driver.findElement(By.xpath(&quot;//*[@id=&#39;myClass&#39;]/tr[1]&quot;)) != null){\r\n        // Passed\r\n    }\r\n    else{\r\n        // Failed\r\n    }\r\n\r\nWhat should I write to make pass or fail for Selenium? I can do `System.out.println(&quot;failed&quot;);`, but it still shows `Failure = 0` in the end.\r\n\r\n","title":"Selenium last conditional fail or pass","body":"<p>Consider:</p>\n<pre><code>if(driver.findElement(By.xpath(&quot;//*[@id='myClass']/tr[1]&quot;)) != null){\n    // Passed\n}\nelse{\n    // Failed\n}\n</code></pre>\n<p>What should I write to make pass or fail for Selenium? I can do <code>System.out.println(&quot;failed&quot;);</code>, but it still shows <code>Failure = 0</code> in the end.</p>\n"},{"tags":["java","netty","alpine-linux","grpc-java"],"comments":[{"owner":{"account_id":14947494,"reputation":506,"user_id":10792320,"display_name":"San P"},"score":1,"creation_date":1671411032,"post_id":74780497,"comment_id":132087497,"body_markdown":"The problem seems to be with Alpine&#39;s glibc. Can you uninstall alpine-pkg-glibc and install gcompat to see if it works?","body":"The problem seems to be with Alpine&#39;s glibc. Can you uninstall alpine-pkg-glibc and install gcompat to see if it works?"},{"owner":{"account_id":10515447,"reputation":69,"user_id":7749678,"display_name":"K-ous"},"score":0,"creation_date":1672906147,"post_id":74780497,"comment_id":132379481,"body_markdown":"Thanks , i could not do that . But I moved to grpc-netty instead of grpc-netty-shaded and that seemed to work. Still testing the performance though to see if there was any overhead.","body":"Thanks , i could not do that . But I moved to grpc-netty instead of grpc-netty-shaded and that seemed to work. Still testing the performance though to see if there was any overhead."},{"owner":{"account_id":14947494,"reputation":506,"user_id":10792320,"display_name":"San P"},"score":0,"creation_date":1673053916,"post_id":74780497,"comment_id":132420850,"body_markdown":"Can you try the LD_PRELOAD workaround mentioned in https://github.com/grpc/grpc-java/issues/8751#issuecomment-1010408918 ?","body":"Can you try the LD_PRELOAD workaround mentioned in <a href=\"https://github.com/grpc/grpc-java/issues/8751#issuecomment-1010408918\" rel=\"nofollow noreferrer\">github.com/grpc/grpc-java/issues/8751#issuecomment-101040891&zwnj;&#8203;8</a> ?"},{"owner":{"account_id":10515447,"reputation":69,"user_id":7749678,"display_name":"K-ous"},"score":0,"creation_date":1673615080,"post_id":74780497,"comment_id":132544647,"body_markdown":"Sure , i tried that first and it did not work for me. Also the custom alpine I am using has https://github.com/sgerrand/alpine-pkg-glibc installed upstream and I cannot remove that. RUN apk add gcompat gives a conflict with the glibc I have used.","body":"Sure , i tried that first and it did not work for me. Also the custom alpine I am using has <a href=\"https://github.com/sgerrand/alpine-pkg-glibc\" rel=\"nofollow noreferrer\">github.com/sgerrand/alpine-pkg-glibc</a> installed upstream and I cannot remove that. RUN apk add gcompat gives a conflict with the glibc I have used."}],"owner":{"account_id":10515447,"reputation":69,"user_id":7749678,"display_name":"K-ous"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":762,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1673053916,"creation_date":1670910752,"question_id":74780497,"body_markdown":"I am using grpc-netty-shaded version 1.51.0 on Alpine 3.16.2 and have also added netty-tcnative-boringssl-static 2.0.54-Final to my Maven dependencies. I have also installed the sgerrand/alpine-pkg-glibc apk. My JVM crashes with SIGSEGV and the stack as shown below.\r\nI have seen some workarounds to use gcompat at https://wiki.alpinelinux.org/wiki/Running_glibc_programs.\r\nHowever I cannot use it since it conflicts with my installed glibc package with\r\n\r\n*ERROR: gcompat-1.0.0-r4: trying to overwrite lib/ld-linux-x86-64.so.2 owned by glibc-2.35-r0*.\r\n\r\nI cannot move away from alpine which is my limitation here. Any help would be much appreciated.\r\nUsing OpenJDK version &quot;1.8.0_345&quot;\r\n\r\n```\r\nStack: [0x00007facd51a2000,0x00007facd51e2af0],  sp=0x00007facd51dfd28,  free space=247k\r\nNative frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\r\nC  0x00000000000207f6\r\nC  [libio_grpc_netty_shaded_netty_tcnative_linux_x86_646225435557092813446.so+0x26eda]  _init+0x6b6a\r\nC  [libio_grpc_netty_shaded_netty_tcnative_linux_x86_646225435557092813446.so+0x22934]  _init+0x25c4\r\nC  [libio_grpc_netty_shaded_netty_tcnative_linux_x86_646225435557092813446.so+0x2741e]  JNI_OnLoad+0x1e\r\nC  [libjava.so+0xebda]  Java_java_lang_ClassLoader_00024NativeLibrary_load+0xba\r\nj  java.lang.ClassLoader$NativeLibrary.load(Ljava/lang/String;Z)V+0\r\nj  java.lang.ClassLoader.loadLibrary0(Ljava/lang/Class;Ljava/io/File;)Z+328\r\nj  java.lang.ClassLoader.loadLibrary(Ljava/lang/Class;Ljava/lang/String;Z)V+48\r\nj  java.lang.Runtime.load0(Ljava/lang/Class;Ljava/lang/String;)V+57\r\nj  java.lang.System.load(Ljava/lang/String;)V+7\r\nj  io.grpc.netty.shaded.io.netty.util.internal.NativeLibraryUtil.loadLibrary(Ljava/lang/String;Z)V+5\r\nv  ~StubRoutines::call_stub\r\nV  [libjvm.so+0x67340d]  JavaCalls::call_helper(JavaValue*, methodHandle*, JavaCallArguments*, Thread*)+0xc7d\r\nV  [libjvm.so+0x9b56b8]  Reflection::invoke(instanceKlassHandle, methodHandle, Handle, bool, objArrayHandle, BasicType, objArrayHandle, bool, Thread*)+0xb18\r\nV  [libjvm.so+0x9b6902]  Reflection::invoke_method(oopDesc*, Handle, objArrayHandle, Thread*)+0x172\r\nV  [libjvm.so+0x71efb1]  JVM_InvokeMethod+0x241\r\nJ 2506  sun.reflect.NativeMethodAccessorImpl.invoke0(Ljava/lang/reflect/Method;Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; (0 bytes) @ 0x00007face572450d [0x00007face5724420+0xed]\r\nJ 2505 C1 sun.reflect.NativeMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; (104 bytes) @ 0x00007face572734c [0x00007face57261a0+0x11ac]\r\nJ 1910 C1 sun.reflect.DelegatingMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; (10 bytes) @ 0x00007face557d484 [0x00007face557d380+0x104]\r\nJ 1909 C1 java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; (62 bytes) @ 0x00007face557a70c [0x00007face557a320+0x3ec]\r\nj  io.grpc.netty.shaded.io.netty.util.internal.NativeLibraryLoader$1.run()Ljava/lang/Object;+53\r\nv  ~StubRoutines::call_stub\r\nV  [libjvm.so+0x67340d]  JavaCalls::call_helper(JavaValue*, methodHandle*, JavaCallArguments*, Thread*)+0xc7d\r\nV  [libjvm.so+0x722b44]  JVM_DoPrivileged+0x2b4\r\nJ 732  java.security.AccessController.doPrivileged(Ljava/security/PrivilegedAction;)Ljava/lang/Object; (0 bytes) @ 0x00007face52171df [0x00007face5217120+0xbf]\r\nj  io.grpc.netty.shaded.io.netty.util.internal.NativeLibraryLoader.loadLibraryByHelper(Ljava/lang/Class;Ljava/lang/String;Z)V+10\r\nj  io.grpc.netty.shaded.io.netty.util.internal.NativeLibraryLoader.loadLibrary(Ljava/lang/ClassLoader;Ljava/lang/String;Z)V+15\r\nj  io.grpc.netty.shaded.io.netty.util.internal.NativeLibraryLoader.load(Ljava/lang/String;Ljava/lang/ClassLoader;)V+352\r\nj  io.grpc.netty.shaded.io.netty.util.internal.NativeLibraryLoader.loadFirstAvailable(Ljava/lang/ClassLoader;[Ljava/lang/String;)V+33\r\nj  io.grpc.netty.shaded.io.netty.handler.ssl.OpenSsl.loadTcNative()V+307\r\nj  io.grpc.netty.shaded.io.netty.handler.ssl.OpenSsl.&lt;clinit&gt;()V+183\r\nv  ~StubRoutines::call_stub\r\nV  [libjvm.so+0x67340d]  JavaCalls::call_helper(JavaValue*, methodHandle*, JavaCallArguments*, Thread*)+0xc7d\r\nV  [libjvm.so+0x62a7b4]  InstanceKlass::call_class_initializer_impl(instanceKlassHandle, Thread*)+0x154\r\nV  [libjvm.so+0x62acbb]  InstanceKlass::initialize_impl(instanceKlassHandle, Thread*)+0x43b\r\nV  [libjvm.so+0x62afa0]  InstanceKlass::initialize(Thread*)+0x60\r\nV  [libjvm.so+0x808eee]  LinkResolver::resolve_static_call(CallInfo&amp;, KlassHandle&amp;, Symbol*, Symbol*, KlassHandle, bool, bool, Thread*)+0x12e\r\nV  [libjvm.so+0x8097a0]  LinkResolver::resolve_invokestatic(CallInfo&amp;, constantPoolHandle, int, Thread*)+0x210\r\nV  [libjvm.so+0x80a4a5]  LinkResolver::resolve_invoke(CallInfo&amp;, Handle, constantPoolHandle, int, Bytecodes::Code, Thread*)+0x1a5\r\nV  [libjvm.so+0x66ae3f]  InterpreterRuntime::resolve_invoke(JavaThread*, Bytecodes::Code)+0x2cf\r\nj  io.grpc.netty.shaded.io.netty.handler.ssl.SslContext.defaultProvider()Lio/grpc/netty/shaded/io/netty/handler/ssl/SslProvider;+0\r\nj  io.grpc.netty.shaded.io.netty.handler.ssl.SslContext.defaultClientProvider()Lio/grpc/netty/shaded/io/netty/handler/ssl/SslProvider;+0\r\nj  io.grpc.netty.shaded.io.netty.handler.ssl.SslContext.newClientContextInternal(Lio/grpc/netty/shaded/io/netty/handler/ssl/SslProvider;Ljava/security/Provider;[Ljava/security/cert/X509Certificate;Ljavax/net/ssl/TrustManagerFactory;[Ljava/security/cert/X509Certificate;Ljava/security/Pr\r\nivateKey;Ljava/lang/String;Ljavax/net/ssl/KeyManagerFactory;Ljava/lang/Iterable;Lio/grpc/netty/shaded/io/netty/handler/ssl/CipherSuiteFilter;Lio/grpc/netty/shaded/io/netty/handler/ssl/ApplicationProtocolConfig;[Ljava/lang/String;JJZLjava/lang/String;[Ljava/util/Map$Entry;)Lio/grpc/nett\r\ny/shaded/io/netty/handler/ssl/SslContext;+4\r\nj  io.grpc.netty.shaded.io.netty.handler.ssl.SslContextBuilder.build()Lio/grpc/netty/shaded/io/netty/handler/ssl/SslContext;+183\r\n```","title":"Segmentation fault on grpc-netty-shaded libio_grpc_netty_shaded_netty_tcnative_linux_x86_64","body":"<p>I am using grpc-netty-shaded version 1.51.0 on Alpine 3.16.2 and have also added netty-tcnative-boringssl-static 2.0.54-Final to my Maven dependencies. I have also installed the sgerrand/alpine-pkg-glibc apk. My JVM crashes with SIGSEGV and the stack as shown below.\nI have seen some workarounds to use gcompat at <a href=\"https://wiki.alpinelinux.org/wiki/Running_glibc_programs\" rel=\"nofollow noreferrer\">https://wiki.alpinelinux.org/wiki/Running_glibc_programs</a>.\nHowever I cannot use it since it conflicts with my installed glibc package with</p>\n<p><em>ERROR: gcompat-1.0.0-r4: trying to overwrite lib/ld-linux-x86-64.so.2 owned by glibc-2.35-r0</em>.</p>\n<p>I cannot move away from alpine which is my limitation here. Any help would be much appreciated.\nUsing OpenJDK version &quot;1.8.0_345&quot;</p>\n<pre><code>Stack: [0x00007facd51a2000,0x00007facd51e2af0],  sp=0x00007facd51dfd28,  free space=247k\nNative frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\nC  0x00000000000207f6\nC  [libio_grpc_netty_shaded_netty_tcnative_linux_x86_646225435557092813446.so+0x26eda]  _init+0x6b6a\nC  [libio_grpc_netty_shaded_netty_tcnative_linux_x86_646225435557092813446.so+0x22934]  _init+0x25c4\nC  [libio_grpc_netty_shaded_netty_tcnative_linux_x86_646225435557092813446.so+0x2741e]  JNI_OnLoad+0x1e\nC  [libjava.so+0xebda]  Java_java_lang_ClassLoader_00024NativeLibrary_load+0xba\nj  java.lang.ClassLoader$NativeLibrary.load(Ljava/lang/String;Z)V+0\nj  java.lang.ClassLoader.loadLibrary0(Ljava/lang/Class;Ljava/io/File;)Z+328\nj  java.lang.ClassLoader.loadLibrary(Ljava/lang/Class;Ljava/lang/String;Z)V+48\nj  java.lang.Runtime.load0(Ljava/lang/Class;Ljava/lang/String;)V+57\nj  java.lang.System.load(Ljava/lang/String;)V+7\nj  io.grpc.netty.shaded.io.netty.util.internal.NativeLibraryUtil.loadLibrary(Ljava/lang/String;Z)V+5\nv  ~StubRoutines::call_stub\nV  [libjvm.so+0x67340d]  JavaCalls::call_helper(JavaValue*, methodHandle*, JavaCallArguments*, Thread*)+0xc7d\nV  [libjvm.so+0x9b56b8]  Reflection::invoke(instanceKlassHandle, methodHandle, Handle, bool, objArrayHandle, BasicType, objArrayHandle, bool, Thread*)+0xb18\nV  [libjvm.so+0x9b6902]  Reflection::invoke_method(oopDesc*, Handle, objArrayHandle, Thread*)+0x172\nV  [libjvm.so+0x71efb1]  JVM_InvokeMethod+0x241\nJ 2506  sun.reflect.NativeMethodAccessorImpl.invoke0(Ljava/lang/reflect/Method;Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; (0 bytes) @ 0x00007face572450d [0x00007face5724420+0xed]\nJ 2505 C1 sun.reflect.NativeMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; (104 bytes) @ 0x00007face572734c [0x00007face57261a0+0x11ac]\nJ 1910 C1 sun.reflect.DelegatingMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; (10 bytes) @ 0x00007face557d484 [0x00007face557d380+0x104]\nJ 1909 C1 java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; (62 bytes) @ 0x00007face557a70c [0x00007face557a320+0x3ec]\nj  io.grpc.netty.shaded.io.netty.util.internal.NativeLibraryLoader$1.run()Ljava/lang/Object;+53\nv  ~StubRoutines::call_stub\nV  [libjvm.so+0x67340d]  JavaCalls::call_helper(JavaValue*, methodHandle*, JavaCallArguments*, Thread*)+0xc7d\nV  [libjvm.so+0x722b44]  JVM_DoPrivileged+0x2b4\nJ 732  java.security.AccessController.doPrivileged(Ljava/security/PrivilegedAction;)Ljava/lang/Object; (0 bytes) @ 0x00007face52171df [0x00007face5217120+0xbf]\nj  io.grpc.netty.shaded.io.netty.util.internal.NativeLibraryLoader.loadLibraryByHelper(Ljava/lang/Class;Ljava/lang/String;Z)V+10\nj  io.grpc.netty.shaded.io.netty.util.internal.NativeLibraryLoader.loadLibrary(Ljava/lang/ClassLoader;Ljava/lang/String;Z)V+15\nj  io.grpc.netty.shaded.io.netty.util.internal.NativeLibraryLoader.load(Ljava/lang/String;Ljava/lang/ClassLoader;)V+352\nj  io.grpc.netty.shaded.io.netty.util.internal.NativeLibraryLoader.loadFirstAvailable(Ljava/lang/ClassLoader;[Ljava/lang/String;)V+33\nj  io.grpc.netty.shaded.io.netty.handler.ssl.OpenSsl.loadTcNative()V+307\nj  io.grpc.netty.shaded.io.netty.handler.ssl.OpenSsl.&lt;clinit&gt;()V+183\nv  ~StubRoutines::call_stub\nV  [libjvm.so+0x67340d]  JavaCalls::call_helper(JavaValue*, methodHandle*, JavaCallArguments*, Thread*)+0xc7d\nV  [libjvm.so+0x62a7b4]  InstanceKlass::call_class_initializer_impl(instanceKlassHandle, Thread*)+0x154\nV  [libjvm.so+0x62acbb]  InstanceKlass::initialize_impl(instanceKlassHandle, Thread*)+0x43b\nV  [libjvm.so+0x62afa0]  InstanceKlass::initialize(Thread*)+0x60\nV  [libjvm.so+0x808eee]  LinkResolver::resolve_static_call(CallInfo&amp;, KlassHandle&amp;, Symbol*, Symbol*, KlassHandle, bool, bool, Thread*)+0x12e\nV  [libjvm.so+0x8097a0]  LinkResolver::resolve_invokestatic(CallInfo&amp;, constantPoolHandle, int, Thread*)+0x210\nV  [libjvm.so+0x80a4a5]  LinkResolver::resolve_invoke(CallInfo&amp;, Handle, constantPoolHandle, int, Bytecodes::Code, Thread*)+0x1a5\nV  [libjvm.so+0x66ae3f]  InterpreterRuntime::resolve_invoke(JavaThread*, Bytecodes::Code)+0x2cf\nj  io.grpc.netty.shaded.io.netty.handler.ssl.SslContext.defaultProvider()Lio/grpc/netty/shaded/io/netty/handler/ssl/SslProvider;+0\nj  io.grpc.netty.shaded.io.netty.handler.ssl.SslContext.defaultClientProvider()Lio/grpc/netty/shaded/io/netty/handler/ssl/SslProvider;+0\nj  io.grpc.netty.shaded.io.netty.handler.ssl.SslContext.newClientContextInternal(Lio/grpc/netty/shaded/io/netty/handler/ssl/SslProvider;Ljava/security/Provider;[Ljava/security/cert/X509Certificate;Ljavax/net/ssl/TrustManagerFactory;[Ljava/security/cert/X509Certificate;Ljava/security/Pr\nivateKey;Ljava/lang/String;Ljavax/net/ssl/KeyManagerFactory;Ljava/lang/Iterable;Lio/grpc/netty/shaded/io/netty/handler/ssl/CipherSuiteFilter;Lio/grpc/netty/shaded/io/netty/handler/ssl/ApplicationProtocolConfig;[Ljava/lang/String;JJZLjava/lang/String;[Ljava/util/Map$Entry;)Lio/grpc/nett\ny/shaded/io/netty/handler/ssl/SslContext;+4\nj  io.grpc.netty.shaded.io.netty.handler.ssl.SslContextBuilder.build()Lio/grpc/netty/shaded/io/netty/handler/ssl/SslContext;+183\n</code></pre>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":3273652,"reputation":6707,"user_id":10561460,"display_name":"Paresh P."},"score":0,"creation_date":1449347887,"post_id":34110565,"comment_id":55970929,"body_markdown":"Show what you&#39;ve tried so far....","body":"Show what you&#39;ve tried so far...."},{"owner":{"account_id":3273652,"reputation":6707,"user_id":10561460,"display_name":"Paresh P."},"score":0,"creation_date":1449348195,"post_id":34110565,"comment_id":55971038,"body_markdown":"Are you using `Toolbar` using `AppCompatActivity`?","body":"Are you using <code>Toolbar</code> using <code>AppCompatActivity</code>?"},{"owner":{"account_id":6789353,"reputation":235,"user_id":5226995,"accept_rate":58,"display_name":"Craig Gallagher"},"score":0,"creation_date":1449348632,"post_id":34110565,"comment_id":55971201,"body_markdown":"That is the code I have for toolbar  `Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);`","body":"That is the code I have for toolbar  <code>Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);         setSupportActionBar(toolbar);</code>"}],"answers":[{"tags":[],"owner":{"account_id":5735475,"reputation":5343,"user_id":4529790,"accept_rate":81,"display_name":"Michele Lacorte"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1449348166,"creation_date":1449348166,"answer_id":34110626,"question_id":34110565,"body_markdown":" Use this in `onCreate()`\r\n\r\n    ActionBar actionBar = getSupportActionBar();\r\n    actionBar.setHomeButtonEnabled(true);\r\n    actionBar.setDisplayHomeAsUpEnabled(true);\r\n\r\n\r\nThan add this listener in your `MainActivity.java` class\r\n\r\n    protected OnBackPressedListener onBackPressedListener;\r\n    \r\n        public interface OnBackPressedListener {\r\n            void doBack();\r\n        }\r\n    \r\n        public void setOnBackPressedListener(OnBackPressedListener onBackPressedListener) {\r\n            this.onBackPressedListener = onBackPressedListener;\r\n        }\r\n    \r\n        @Override\r\n        public void onBackPressed() {\r\n            if (onBackPressedListener != null)\r\n                onBackPressedListener.doBack();\r\n            else\r\n                super.onBackPressed();\r\n    }\r\n\r\nSo now in your Fragment class you can implements `MainActivity.OnBackPressedListener` and than:\r\n\r\n\r\n    @Override\r\n    public void doBack() {\r\n        //Do on back pressed operation\r\n    }\r\n","title":"How to add back button on ActionBar in Android Studio?","body":"<p>Use this in <code>onCreate()</code></p>\n\n<pre><code>ActionBar actionBar = getSupportActionBar();\nactionBar.setHomeButtonEnabled(true);\nactionBar.setDisplayHomeAsUpEnabled(true);\n</code></pre>\n\n<p>Than add this listener in your <code>MainActivity.java</code> class</p>\n\n<pre><code>protected OnBackPressedListener onBackPressedListener;\n\n    public interface OnBackPressedListener {\n        void doBack();\n    }\n\n    public void setOnBackPressedListener(OnBackPressedListener onBackPressedListener) {\n        this.onBackPressedListener = onBackPressedListener;\n    }\n\n    @Override\n    public void onBackPressed() {\n        if (onBackPressedListener != null)\n            onBackPressedListener.doBack();\n        else\n            super.onBackPressed();\n}\n</code></pre>\n\n<p>So now in your Fragment class you can implements <code>MainActivity.OnBackPressedListener</code> and than:</p>\n\n<pre><code>@Override\npublic void doBack() {\n    //Do on back pressed operation\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":540235,"reputation":635,"user_id":908363,"display_name":"adnbsr"},"down_vote_count":1,"up_vote_count":18,"is_accepted":true,"score":17,"last_activity_date":1449348629,"creation_date":1449348629,"answer_id":34110716,"question_id":34110565,"body_markdown":"Assuming that you have a DetailActivity and you need back button to MainActivity. First change your manifest to for DetailActivity\r\n\r\n    &lt;activity\r\n        android:name=&quot;.DetailActivity&quot;\r\n        android:label=&quot;@string/title_activity_detail&quot;\r\n        android:parentActivityName=&quot;.MainActivity&quot;&gt;\r\n      &lt;meta-data\r\n          android:name=&quot;android.support.PARENT_ACTIVITY&quot;\r\n          android:value=&quot;com.example.MainActivity&quot;/&gt;\r\n    &lt;/activity&gt;\r\n\r\nand in `onCreate` of DetailActivity \r\n\r\n    getSupportActionBar().setDisplayHomeAsUpEnabled(true);\r\n\r\nwill fix things. This is the simplest implementation.","title":"How to add back button on ActionBar in Android Studio?","body":"<p>Assuming that you have a DetailActivity and you need back button to MainActivity. First change your manifest to for DetailActivity</p>\n\n<pre><code>&lt;activity\n    android:name=\".DetailActivity\"\n    android:label=\"@string/title_activity_detail\"\n    android:parentActivityName=\".MainActivity\"&gt;\n  &lt;meta-data\n      android:name=\"android.support.PARENT_ACTIVITY\"\n      android:value=\"com.example.MainActivity\"/&gt;\n&lt;/activity&gt;\n</code></pre>\n\n<p>and in <code>onCreate</code> of DetailActivity </p>\n\n<pre><code>getSupportActionBar().setDisplayHomeAsUpEnabled(true);\n</code></pre>\n\n<p>will fix things. This is the simplest implementation.</p>\n"},{"tags":[],"owner":{"account_id":3273652,"reputation":6707,"user_id":10561460,"display_name":"Paresh P."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1449349289,"creation_date":1449349289,"answer_id":34110834,"question_id":34110565,"body_markdown":"Make your activity to extends `AppCompatACtivity` and then set `navigationIcon` to your `toolbar` along with `clicklistener`\r\n\r\nFor example\r\n\r\n    public class MyActivity extends AppCompatActivity {\r\n    \r\n        Toolbar toolbar;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity);\r\n    \r\n            mToolbar = (Toolbar) findViewById(R.id.toolbar);\r\n    \t\tsetSupportActionBar(toolbar);\r\n    \t\ttoolbar.setNavigationIcon(R.drawable.ic_back_arrow); // Set the icon\r\n    \t\t\r\n            // Icon click listener\r\n            toolbar.setNavigationOnClickListener(new View.OnClickListener() {\r\n    \t\t\t@Override \r\n    \t\t\tpublic void onClick(View v) {\r\n    \t\t\t\tLog.d(&quot;cek&quot;, &quot;home selected&quot;);\r\n    \t\t\t} \r\n    \t\t}); \r\n        }\r\n    }\r\n\r\nMake sure your activity theme is `AppCompat`\r\n\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light&quot;&gt;\r\n    &lt;!-- Customization will goes here --&gt;\r\n    &lt;/style&gt;","title":"How to add back button on ActionBar in Android Studio?","body":"<p>Make your activity to extends <code>AppCompatACtivity</code> and then set <code>navigationIcon</code> to your <code>toolbar</code> along with <code>clicklistener</code></p>\n\n<p>For example</p>\n\n<pre><code>public class MyActivity extends AppCompatActivity {\n\n    Toolbar toolbar;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity);\n\n        mToolbar = (Toolbar) findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);\n        toolbar.setNavigationIcon(R.drawable.ic_back_arrow); // Set the icon\n\n        // Icon click listener\n        toolbar.setNavigationOnClickListener(new View.OnClickListener() {\n            @Override \n            public void onClick(View v) {\n                Log.d(\"cek\", \"home selected\");\n            } \n        }); \n    }\n}\n</code></pre>\n\n<p>Make sure your activity theme is <code>AppCompat</code></p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light\"&gt;\n&lt;!-- Customization will goes here --&gt;\n&lt;/style&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14290659,"reputation":715,"user_id":10322739,"display_name":"Raghib Arshi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1583394908,"creation_date":1583394908,"answer_id":60540537,"question_id":34110565,"body_markdown":"    //In Kotlin\r\n    // go to AndroidManifest.xml file apply this change\r\n    \r\n    &lt;activity android:name=&quot;.PresentActivity&quot;&gt;\r\n                // for adding back button on top\r\n                &lt;meta-data android:name=&quot;android.support.PARENT_ACTIVITY&quot;\r\n                    android:value=&quot;.BackActivity&quot;/&gt;\r\n            &lt;/activity&gt;\r\n    \r\n    // Hope this will work.","title":"How to add back button on ActionBar in Android Studio?","body":"<pre><code>//In Kotlin\n// go to AndroidManifest.xml file apply this change\n\n&lt;activity android:name=\".PresentActivity\"&gt;\n            // for adding back button on top\n            &lt;meta-data android:name=\"android.support.PARENT_ACTIVITY\"\n                android:value=\".BackActivity\"/&gt;\n        &lt;/activity&gt;\n\n// Hope this will work.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25271195,"reputation":1,"user_id":19100512,"display_name":"Rayhan Kompany"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673053678,"creation_date":1673053678,"answer_id":75037446,"question_id":34110565,"body_markdown":" // For add back button on action bar==================\r\n//add this in onCreate method..........\r\n\r\n\r\n        getSupportActionBar().setDisplayShowHomeEnabled(true);\r\n        getSupportActionBar().setDisplayHomeAsUpEnabled(true);\r\n\r\n\r\n//add this below of onCreate Bundle ========\r\n\r\n\r\n         @Override\r\n    public boolean onOptionsItemSelected(@NonNull MenuItem item){\r\n\r\n        if (item.getItemId()==android.R.id.home){\r\n\r\n            this.finish();\r\n        }\r\n        return super.onOptionsItemSelected(item);\r\n    }","title":"How to add back button on ActionBar in Android Studio?","body":"<p>// For add back button on action bar==================\n//add this in onCreate method..........</p>\n<pre><code>    getSupportActionBar().setDisplayShowHomeEnabled(true);\n    getSupportActionBar().setDisplayHomeAsUpEnabled(true);\n</code></pre>\n<p>//add this below of onCreate Bundle ========</p>\n<pre><code>     @Override\npublic boolean onOptionsItemSelected(@NonNull MenuItem item){\n\n    if (item.getItemId()==android.R.id.home){\n\n        this.finish();\n    }\n    return super.onOptionsItemSelected(item);\n}\n</code></pre>\n"}],"owner":{"account_id":6789353,"reputation":235,"user_id":5226995,"accept_rate":58,"display_name":"Craig Gallagher"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40098,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"accepted_answer_id":34110716,"answer_count":5,"score":7,"last_activity_date":1673053678,"creation_date":1449347772,"question_id":34110565,"body_markdown":"I have created an app and wanted a back button on my action bar to navigate back to the previous page using Android Studio. I have looked at a number of examples but keep getting errors under `setDisplayHomeAsUpEnabled`\r\n\r\n    ActionBar actionBar = getActionBar();\r\n    actionBar.setDisplayHomeAsUpEnabled(true);\r\n\r\n\tpublic boolean onOptionsItemSelected(MenuItem item) {\r\n\t\tIntent myIntent = new Intent(getApplicationContext(), MainActivity.class);\r\n\t    startActivityForResult(myIntent, 0);\r\n\t   \r\n\t\t// Handle action bar item clicks here. The action bar will\r\n\t\t// automatically handle clicks on the Home/Up button, so long\r\n\t\t// as you specify a parent activity in AndroidManifest.xml.\r\n\t\tint id = item.getItemId();\r\n\t\tif (id == R.id.action_settings) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn super.onOptionsItemSelected(item);\r\n\t\t\r\n\t}","title":"How to add back button on ActionBar in Android Studio?","body":"<p>I have created an app and wanted a back button on my action bar to navigate back to the previous page using Android Studio. I have looked at a number of examples but keep getting errors under <code>setDisplayHomeAsUpEnabled</code></p>\n\n<pre><code>ActionBar actionBar = getActionBar();\nactionBar.setDisplayHomeAsUpEnabled(true);\n\npublic boolean onOptionsItemSelected(MenuItem item) {\n    Intent myIntent = new Intent(getApplicationContext(), MainActivity.class);\n    startActivityForResult(myIntent, 0);\n\n    // Handle action bar item clicks here. The action bar will\n    // automatically handle clicks on the Home/Up button, so long\n    // as you specify a parent activity in AndroidManifest.xml.\n    int id = item.getItemId();\n    if (id == R.id.action_settings) {\n        return true;\n    }\n    return super.onOptionsItemSelected(item);\n\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","amazon-dynamodb","aws-cdk","aws-java-sdk"],"answers":[{"tags":[],"owner":{"account_id":10749774,"reputation":14475,"user_id":7909676,"display_name":"Leeroy Hannigan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673052485,"creation_date":1672956780,"answer_id":75024904,"question_id":75024487,"body_markdown":"In that case as you do not want to deal with the DynamoDB JSON you should use a [Document Interface](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Programming.SDKs.Interfaces.Document.html).\r\n\r\n&gt; Many AWS SDKs provide a document interface, allowing you to perform data plane operations (create, read, update, delete) on tables and indexes. With a document interface, you do not need to specify Data type descriptors. The data types are implied by the semantics of the data itself. These AWS SDKs also provide methods to easily convert JSON documents to and from native Amazon DynamoDB data types.","title":"Java Displaying DynamoDB Scan AttributeValues in table","body":"<p>In that case as you do not want to deal with the DynamoDB JSON you should use a <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Programming.SDKs.Interfaces.Document.html\" rel=\"nofollow noreferrer\">Document Interface</a>.</p>\n<blockquote>\n<p>Many AWS SDKs provide a document interface, allowing you to perform data plane operations (create, read, update, delete) on tables and indexes. With a document interface, you do not need to specify Data type descriptors. The data types are implied by the semantics of the data itself. These AWS SDKs also provide methods to easily convert JSON documents to and from native Amazon DynamoDB data types.</p>\n</blockquote>\n"}],"owner":{"account_id":10649093,"reputation":109,"user_id":7840726,"accept_rate":75,"display_name":"L2C"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673052485,"creation_date":1672953708,"question_id":75024487,"body_markdown":"I am trying to do a scan of a DynamoDB table and then display user selected fields in a table.\r\nThe problem is how can I do this if data is returned as AttributeValues, since not all values will be a string, and I have no idea what type each value is before hand.\r\n\r\nThe code I have:\r\n\r\n     ScanRequest request =\r\n                ScanRequest\r\n                .builder()\r\n                .tableName(tableName))\r\n                .build();\r\n\r\n        ScanIterable response = client.scanPaginator(request);\r\n        List&lt;Map&lt;String, AttributeValue&gt;&gt; data = new ArrayList&lt;&gt;();\r\n\r\n        for (ScanResponse page : response) {\r\n            for (Map&lt;String, AttributeValue&gt; item : page.items()) {\r\n                data.add(item);\r\n            }\r\n        }\r\n\r\nthen to get the values:\r\n\r\n           for (Map&lt;String, AttributeValue&gt; map : items) {\r\n            for (Map.Entry&lt;String, AttributeValue&gt; entry : map.entrySet()) {\r\n                //get the entry.getValue() and append it to a string\r\n            }\r\n        }\r\nIf I use:\r\n\r\n    entry.getValue().toString()\r\nI will get a string containing the attribute value type and value e.g &#39;N&#39;: &#39;127&#39;\r\nIf I use:\r\n\r\n    entry.getValue().s()\r\nI will get null values when the type is not &#39;S&#39;","title":"Java Displaying DynamoDB Scan AttributeValues in table","body":"<p>I am trying to do a scan of a DynamoDB table and then display user selected fields in a table.\nThe problem is how can I do this if data is returned as AttributeValues, since not all values will be a string, and I have no idea what type each value is before hand.</p>\n<p>The code I have:</p>\n<pre><code> ScanRequest request =\n            ScanRequest\n            .builder()\n            .tableName(tableName))\n            .build();\n\n    ScanIterable response = client.scanPaginator(request);\n    List&lt;Map&lt;String, AttributeValue&gt;&gt; data = new ArrayList&lt;&gt;();\n\n    for (ScanResponse page : response) {\n        for (Map&lt;String, AttributeValue&gt; item : page.items()) {\n            data.add(item);\n        }\n    }\n</code></pre>\n<p>then to get the values:</p>\n<pre><code>       for (Map&lt;String, AttributeValue&gt; map : items) {\n        for (Map.Entry&lt;String, AttributeValue&gt; entry : map.entrySet()) {\n            //get the entry.getValue() and append it to a string\n        }\n    }\n</code></pre>\n<p>If I use:</p>\n<pre><code>entry.getValue().toString()\n</code></pre>\n<p>I will get a string containing the attribute value type and value e.g 'N': '127'\nIf I use:</p>\n<pre><code>entry.getValue().s()\n</code></pre>\n<p>I will get null values when the type is not 'S'</p>\n"},{"tags":["java","multithreading","locking","semaphore","synchronized"],"answers":[{"tags":[],"owner":{"account_id":27458038,"reputation":36,"user_id":20949125,"display_name":"user20949125"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673051102,"creation_date":1673051102,"answer_id":75037272,"question_id":75030932,"body_markdown":"This happens according to the java documentation.\r\n\r\nFrom [the javadoc for `BLOCKED`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.State.html#BLOCKED):\r\n&gt; ... A thread in the blocked state is waiting for a monitor lock to enter a synchronized block/method ...\r\n\r\n`ReentrantLock` and `Semaphore` use `LockSupport.park()` internally, and, according to [this javadoc](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.State.html#WAITING), that corresponds to a `WAITING` thread state:\r\n&gt; A thread is in the waiting state due to calling one of the following methods: \r\n&gt; * Object.wait with no timeout\r\n&gt;  * Thread.join with no timeout\r\n&gt; * LockSupport.park\r\n\r\n\r\n\r\n\r\n\r\n","title":"Why synchronized shows BLOCKED state and Locks and semaphores shows WAITING state of the Threads","body":"<p>This happens according to the java documentation.</p>\n<p>From <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.State.html#BLOCKED\" rel=\"nofollow noreferrer\">the javadoc for <code>BLOCKED</code></a>:</p>\n<blockquote>\n<p>... A thread in the blocked state is waiting for a monitor lock to enter a synchronized block/method ...</p>\n</blockquote>\n<p><code>ReentrantLock</code> and <code>Semaphore</code> use <code>LockSupport.park()</code> internally, and, according to <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.State.html#WAITING\" rel=\"nofollow noreferrer\">this javadoc</a>, that corresponds to a <code>WAITING</code> thread state:</p>\n<blockquote>\n<p>A thread is in the waiting state due to calling one of the following methods:</p>\n<ul>\n<li>Object.wait with no timeout</li>\n<li>Thread.join with no timeout</li>\n<li>LockSupport.park</li>\n</ul>\n</blockquote>\n"}],"owner":{"account_id":19088549,"reputation":75,"user_id":13939277,"display_name":"Adarsh Verma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75037272,"answer_count":1,"score":0,"last_activity_date":1673051102,"creation_date":1673007990,"question_id":75030932,"body_markdown":"When threads are waiting to access the critical section using synchronized block why the threads states show as BLOCKED and when the threads are waiting to access the critical section using Lock or semaphores threads state show as WAITING?","title":"Why synchronized shows BLOCKED state and Locks and semaphores shows WAITING state of the Threads","body":"<p>When threads are waiting to access the critical section using synchronized block why the threads states show as BLOCKED and when the threads are waiting to access the critical section using Lock or semaphores threads state show as WAITING?</p>\n"},{"tags":["java","garbage-collection","anonymous-class"],"answers":[{"tags":[],"owner":{"account_id":32681,"reputation":138933,"user_id":90848,"accept_rate":90,"display_name":"Laurence Gonsalves"},"down_vote_count":0,"up_vote_count":34,"is_accepted":true,"score":34,"last_activity_date":1673051005,"creation_date":1298160479,"answer_id":5054363,"question_id":5054360,"body_markdown":"As of JDK 18, no. [JDK 18 omits enclosing instance fields from inner classes that don&#39;t use it.](https://bugs.openjdk.org/browse/JDK-8271717) \r\n\r\nHowever, prior to JDK 18, yes, instances of anonymous inner classes hold on to a reference to their enclosing instances even if these references are never actually used. For example, this code:\r\n\r\n    public class Outer {\r\n      public Runnable getRunnable() {\r\n        return new Runnable() {\r\n          public void run() {\r\n            System.out.println(&quot;hello&quot;);\r\n          }\r\n        };\r\n      }\r\n    }\r\n\r\n...when compiled with `javac`, generates two class files: `Outer.class` and\r\n`Outer$1.class`. Disassembling the latter, the anonymous inner class,\r\nwith `javap -c` yields:\r\n\r\n    Compiled from &quot;Outer.java&quot;\r\n    class Outer$1 extends java.lang.Object implements java.lang.Runnable{\r\n    final Outer this$0;\r\n\r\n    Outer$1(Outer);\r\n      Code:\r\n       0:   aload_0\r\n       1:   aload_1\r\n       2:   putfield        #1; //Field this$0:LOuter;\r\n       5:   aload_0\r\n       6:   invokespecial   #2; //Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\r\n       9:   return\r\n\r\n    public void run();\r\n      Code:\r\n       0:   getstatic       #3; //Field java/lang/System.out:Ljava/io/PrintStream;\r\n       3:   ldc     #4; //String hello\r\n       5:   invokevirtual   #5; //Method java/io/PrintStream.println:(Ljava/lang/String;)V\r\n       8:   return\r\n\r\n    }\r\n\r\nThe `putfield` line shows that a reference to the enclosing instance is\r\nbeing stored in the field `this$0` (of type `Outer`) by the constructor\r\neven though this field is never used again.\r\n\r\nThis is unfortunate if you&#39;re attempting to create small potentially\r\nlong-lived objects with anonymous inner classes as they&#39;ll hold onto the\r\n(potentially large) enclosing instance. A workaround is to use an instance of a static class (or a top-level class) instead. This is unfortunately more verbose.","title":"Do anonymous classes *always* maintain a reference to their enclosing instance?","body":"<p>As of JDK 18, no. <a href=\"https://bugs.openjdk.org/browse/JDK-8271717\" rel=\"nofollow noreferrer\">JDK 18 omits enclosing instance fields from inner classes that don't use it.</a></p>\n<p>However, prior to JDK 18, yes, instances of anonymous inner classes hold on to a reference to their enclosing instances even if these references are never actually used. For example, this code:</p>\n<pre><code>public class Outer {\n  public Runnable getRunnable() {\n    return new Runnable() {\n      public void run() {\n        System.out.println(&quot;hello&quot;);\n      }\n    };\n  }\n}\n</code></pre>\n<p>...when compiled with <code>javac</code>, generates two class files: <code>Outer.class</code> and\n<code>Outer$1.class</code>. Disassembling the latter, the anonymous inner class,\nwith <code>javap -c</code> yields:</p>\n<pre><code>Compiled from &quot;Outer.java&quot;\nclass Outer$1 extends java.lang.Object implements java.lang.Runnable{\nfinal Outer this$0;\n\nOuter$1(Outer);\n  Code:\n   0:   aload_0\n   1:   aload_1\n   2:   putfield        #1; //Field this$0:LOuter;\n   5:   aload_0\n   6:   invokespecial   #2; //Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\n   9:   return\n\npublic void run();\n  Code:\n   0:   getstatic       #3; //Field java/lang/System.out:Ljava/io/PrintStream;\n   3:   ldc     #4; //String hello\n   5:   invokevirtual   #5; //Method java/io/PrintStream.println:(Ljava/lang/String;)V\n   8:   return\n\n}\n</code></pre>\n<p>The <code>putfield</code> line shows that a reference to the enclosing instance is\nbeing stored in the field <code>this$0</code> (of type <code>Outer</code>) by the constructor\neven though this field is never used again.</p>\n<p>This is unfortunate if you're attempting to create small potentially\nlong-lived objects with anonymous inner classes as they'll hold onto the\n(potentially large) enclosing instance. A workaround is to use an instance of a static class (or a top-level class) instead. This is unfortunately more verbose.</p>\n"},{"tags":[],"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1387327975,"creation_date":1387327975,"answer_id":20647717,"question_id":5054360,"body_markdown":"The static alternative (in this case) is not much larger (1 line):\r\n\r\n    public class Outer {\r\n      static class InnerRunnable implements Runnable {\r\n          public void run() {\r\n            System.out.println(&quot;hello&quot;);\r\n          }\r\n        }\r\n      public Runnable getRunnable() {\r\n        return new InnerRunnable();\r\n      }\r\n    }\r\n\r\nBTW: if you use a Lambda in Java8 there will be no nested class generated. However I am not sure if the `CallSite` objects which get passed around in that case hold an reference to the outer instance (if not needed).","title":"Do anonymous classes *always* maintain a reference to their enclosing instance?","body":"<p>The static alternative (in this case) is not much larger (1 line):</p>\n\n<pre><code>public class Outer {\n  static class InnerRunnable implements Runnable {\n      public void run() {\n        System.out.println(\"hello\");\n      }\n    }\n  public Runnable getRunnable() {\n    return new InnerRunnable();\n  }\n}\n</code></pre>\n\n<p>BTW: if you use a Lambda in Java8 there will be no nested class generated. However I am not sure if the <code>CallSite</code> objects which get passed around in that case hold an reference to the outer instance (if not needed).</p>\n"},{"tags":[],"owner":{"account_id":3936208,"reputation":109,"user_id":3818291,"display_name":"Delphin"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1391075781,"creation_date":1391075781,"answer_id":21453115,"question_id":5054360,"body_markdown":"You can easily turn a nested anonymous-class into a &quot;static&quot; anonymous-class by introducing a static method in your class.\r\n\r\n\timport java.util.ArrayList;\r\n\t\r\n\t\r\n\tpublic class TestGC {\r\n\t\tpublic char[] mem = new char[5000000];\r\n\t\tpublic String str = &quot;toto&quot;;\r\n\t\t\r\n\t\tpublic interface Node {\r\n\t\t\tpublic void print();\r\n\t\t}\r\n\t\t\r\n\t\tpublic Node createNestedNode() {\r\n\t\t\tfinal String str = this.str;\r\n\t\t\treturn new Node() {\r\n\t\t\t\tpublic void print() {\r\n\t\t\t\t\tSystem.out.println(str);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tpublic static Node createStaticNode(TestGC test) {\r\n\t\t\tfinal String str = test.str;\r\n\t\t\treturn new Node() {\r\n\t\t\t\tpublic void print() {\r\n\t\t\t\t\tSystem.out.println(str);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tpublic Node createStaticNode() {\r\n\t\t\treturn createStaticNode(this);\r\n\t\t}\r\n\t\t\r\n\t\tpublic static void main(String... args) throws InterruptedException {\r\n\t\t\tArrayList&lt;Node&gt; nodes = new ArrayList&lt;Node&gt;();\r\n\t\t\tfor (int i=0; i&lt;10; i++) {\r\n\t\t\t\t// Try once with createNestedNode(), then createStaticNode()\r\n\t\t\t\tnodes.add(new TestGC().createStaticNode());\r\n\t\t\t\tSystem.gc();\r\n\t\t\t\t//Thread.sleep(200);\r\n\t\t\t\tSystem.out.printf(&quot;Total mem: %d  Free mem: %d\\n&quot;, Runtime.getRuntime().totalMemory(), Runtime.getRuntime().freeMemory());\r\n\t\t\t}\r\n\t\t\tfor (Node node : nodes)\r\n\t\t\t\tnode.print();\r\n\t\t\tnodes = null;\r\n\t\t\tSystem.gc();\r\n\t\t\t//Thread.sleep(200);\r\n\t\t\tSystem.out.printf(&quot;Total mem: %d  Free mem: %d\\n&quot;, Runtime.getRuntime().totalMemory(), Runtime.getRuntime().freeMemory());\r\n\t\t}\r\n\t}","title":"Do anonymous classes *always* maintain a reference to their enclosing instance?","body":"<p>You can easily turn a nested anonymous-class into a \"static\" anonymous-class by introducing a static method in your class.</p>\n\n<pre><code>import java.util.ArrayList;\n\n\npublic class TestGC {\n    public char[] mem = new char[5000000];\n    public String str = \"toto\";\n\n    public interface Node {\n        public void print();\n    }\n\n    public Node createNestedNode() {\n        final String str = this.str;\n        return new Node() {\n            public void print() {\n                System.out.println(str);\n            }\n        };\n    }\n\n    public static Node createStaticNode(TestGC test) {\n        final String str = test.str;\n        return new Node() {\n            public void print() {\n                System.out.println(str);\n            }\n        };\n    }\n\n    public Node createStaticNode() {\n        return createStaticNode(this);\n    }\n\n    public static void main(String... args) throws InterruptedException {\n        ArrayList&lt;Node&gt; nodes = new ArrayList&lt;Node&gt;();\n        for (int i=0; i&lt;10; i++) {\n            // Try once with createNestedNode(), then createStaticNode()\n            nodes.add(new TestGC().createStaticNode());\n            System.gc();\n            //Thread.sleep(200);\n            System.out.printf(\"Total mem: %d  Free mem: %d\\n\", Runtime.getRuntime().totalMemory(), Runtime.getRuntime().freeMemory());\n        }\n        for (Node node : nodes)\n            node.print();\n        nodes = null;\n        System.gc();\n        //Thread.sleep(200);\n        System.out.printf(\"Total mem: %d  Free mem: %d\\n\", Runtime.getRuntime().totalMemory(), Runtime.getRuntime().freeMemory());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":32681,"reputation":138933,"user_id":90848,"accept_rate":90,"display_name":"Laurence Gonsalves"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9187,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"accepted_answer_id":5054363,"answer_count":3,"score":32,"last_activity_date":1673051005,"creation_date":1298160453,"question_id":5054360,"body_markdown":"I&#39;m working with some code where one object, &quot;foo&quot;, is creating another\r\nobject, &quot;bar&quot;, and passing it a `Callable`. After this foo will return\r\nbar, and then I want foo to become unreachable (ie: available for\r\ngarbage collection).\r\n\r\nMy initial thought was to just create the `Callable` anonymously. eg:\r\n\r\n    class Foo {\r\n      ...\r\n    \r\n      public Bar createBar() {\r\n        final int arg1 = ...\r\n        final int arg2 = ...\r\n        final int arg3 = ...\r\n        return new Callable&lt;Baz&gt;() {\r\n          @Override\r\n          public Baz call() {\r\n            return new Baz(arg1, arg2, arg3);\r\n          }\r\n        };\r\n      }\r\n    }\r\n\r\nIt occurred to me that this might not actually work as desired, however,\r\nas an inner class typically keeps a reference to its enclosing object.\r\nI don&#39;t want a reference to the enclosing class here, because I want the enclosing object to be\r\ncollected while the `Callable` is still reachable.\r\n\r\nOn the other hand,\r\ndetecting that the enclosing instance is never actually referred to\r\nshould be pretty trivial, so perhaps the Java compiler is smart enough\r\nto not include a reference in that case.\r\n\r\nSo... will an instance of an anonymous inner class hold on to a\r\nreference to its enclosing instance even if it never actually uses the\r\nenclosing instance reference?\r\n","title":"Do anonymous classes *always* maintain a reference to their enclosing instance?","body":"<p>I'm working with some code where one object, \"foo\", is creating another\nobject, \"bar\", and passing it a <code>Callable</code>. After this foo will return\nbar, and then I want foo to become unreachable (ie: available for\ngarbage collection).</p>\n\n<p>My initial thought was to just create the <code>Callable</code> anonymously. eg:</p>\n\n<pre><code>class Foo {\n  ...\n\n  public Bar createBar() {\n    final int arg1 = ...\n    final int arg2 = ...\n    final int arg3 = ...\n    return new Callable&lt;Baz&gt;() {\n      @Override\n      public Baz call() {\n        return new Baz(arg1, arg2, arg3);\n      }\n    };\n  }\n}\n</code></pre>\n\n<p>It occurred to me that this might not actually work as desired, however,\nas an inner class typically keeps a reference to its enclosing object.\nI don't want a reference to the enclosing class here, because I want the enclosing object to be\ncollected while the <code>Callable</code> is still reachable.</p>\n\n<p>On the other hand,\ndetecting that the enclosing instance is never actually referred to\nshould be pretty trivial, so perhaps the Java compiler is smart enough\nto not include a reference in that case.</p>\n\n<p>So... will an instance of an anonymous inner class hold on to a\nreference to its enclosing instance even if it never actually uses the\nenclosing instance reference?</p>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1673082257,"post_id":75037219,"comment_id":132421265,"body_markdown":"Sounds like those projects belong into a multi module build....","body":"Sounds like those projects belong into a multi module build...."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1673092223,"post_id":75037219,"comment_id":132422703,"body_markdown":"In Eclipse, this is called Workspace Resolution. I guess IntelliJ does not have such a thing.","body":"In Eclipse, this is called Workspace Resolution. I guess IntelliJ does not have such a thing."}],"owner":{"account_id":297830,"reputation":2265,"user_id":603543,"accept_rate":5,"display_name":"Salil Surendran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1673255323,"answer_count":0,"score":0,"last_activity_date":1673050426,"creation_date":1673050426,"question_id":75037219,"body_markdown":"I have a maven project A that depends on another maven project B. So in the pom of project A there is dependency element that refers to a version of project B. I use IntelliJ, as my IDE and now I want to make changes in project B like add a new method and I want this method to be available immediately in project A. But because project B is a different maven project. I have to make the changes in B and then do a mvn install so that the jar gets created in my local repository before those changes be available for project A. I tried creating a project from existing sources for project A and then &#39;Import Module from Existing Sources&#39; for project B so that all source code for project A and B are in the same IntelliJ window but this doesn&#39;t work. How can I setup IntelliJ such that I have project A refer the source code for project B in the same IntelliJ window rather than going to the local maven repository?","title":"How to work on different interdependent maven modules in IntelliJ","body":"<p>I have a maven project A that depends on another maven project B. So in the pom of project A there is dependency element that refers to a version of project B. I use IntelliJ, as my IDE and now I want to make changes in project B like add a new method and I want this method to be available immediately in project A. But because project B is a different maven project. I have to make the changes in B and then do a mvn install so that the jar gets created in my local repository before those changes be available for project A. I tried creating a project from existing sources for project A and then 'Import Module from Existing Sources' for project B so that all source code for project A and B are in the same IntelliJ window but this doesn't work. How can I setup IntelliJ such that I have project A refer the source code for project B in the same IntelliJ window rather than going to the local maven repository?</p>\n"},{"tags":["java","byte"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1669656382,"post_id":74604316,"comment_id":131686929,"body_markdown":"Do you know what the shift operator does?","body":"Do you know what the shift operator does?"},{"owner":{"account_id":12461004,"reputation":33,"user_id":9157138,"display_name":"r.m.ghimis"},"score":0,"creation_date":1669657149,"post_id":74604316,"comment_id":131687164,"body_markdown":"Moves all the bits to a direction by a given number of bits?","body":"Moves all the bits to a direction by a given number of bits?"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1669665198,"post_id":74604316,"comment_id":131689538,"body_markdown":"Why does the shift operator look strange?","body":"Why does the shift operator look strange?"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1672482701,"post_id":74604316,"comment_id":132296559,"body_markdown":"`value += (0 &amp; 0x000000FF) &lt;&lt; shift;` is the same as `value += 0`, thus a no-op.","body":"<code>value += (0 &amp; 0x000000FF) &lt;&lt; shift;</code> is the same as <code>value += 0</code>, thus a no-op."}],"answers":[{"tags":[],"owner":{"account_id":2056278,"reputation":23340,"user_id":1833961,"accept_rate":54,"display_name":"bvdb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673050135,"creation_date":1673048433,"answer_id":75037073,"question_id":74604316,"body_markdown":"I would call this function `keepFirstXBytes(...)`. It seems to cut out the first part of a `byte[]` and return those bytes as an integer.\r\n\r\n - Like if your input is:  `{ 0x01, 0x02, 0x03 }`, and your length is `2`, then it will output only the first 2 bytes. `0x0102`.\r\n\r\nThere are some caveats. \r\n\r\n - The maximum value of `length` is 4. If you take a longer value, then it will just act as if it was 4. It will just take the first 4 bytes of the array. An integer can hold only 4 bytes after all.\r\n\r\n---\r\n\r\n#### How I would write it:\r\n\r\nI&#39;m wondering if it could be easier to read, if it used an `arraycopy`.\r\n\r\n    byte[] destination = new byte[length];\r\n    System.arraycopy(input, 0, destination, 0, length);\r\n\r\nAnd then finally convert that to an integer. Which is kind of tricky for an array of variable length. So, I would borrow the function which I found [here][1].\r\n\r\n    public static int pareAsBigEndianByteArray(byte[] bytes) {\r\n        int factor = bytes.length - 1;\r\n        int result = 0;\r\n        for (int i = 0; i &lt; bytes.length; i++) {\r\n            if (i == 0) {\r\n                result |= bytes[i] &lt;&lt; (8 * factor--);\r\n            } else {\r\n                result |= bytes[i] &lt;&lt; (8 * factor--);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\nSeems like the code of the function given in your question does those 2 things in one go, which could be more efficient, but it looks really hard to read.\r\n\r\n### EDIT:\r\n\r\nIt&#39;s easier if you just always copy it to an array of length 4.\r\n\r\n    public static int decodeInt(byte[] input, int length) {\r\n        length = java.lang.Math.min(4, length);\r\n        byte[] destination = new byte[4];\r\n        System.arraycopy(input, 0, destination, 4-length, length);\r\n        int value = java.nio.ByteBuffer.wrap(destination).getInt();\r\n        return value;\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/5616052/how-can-i-convert-a-4-byte-array-to-an-integer","title":"Byte array to signed Integer","body":"<p>I would call this function <code>keepFirstXBytes(...)</code>. It seems to cut out the first part of a <code>byte[]</code> and return those bytes as an integer.</p>\n<ul>\n<li>Like if your input is:  <code>{ 0x01, 0x02, 0x03 }</code>, and your length is <code>2</code>, then it will output only the first 2 bytes. <code>0x0102</code>.</li>\n</ul>\n<p>There are some caveats.</p>\n<ul>\n<li>The maximum value of <code>length</code> is 4. If you take a longer value, then it will just act as if it was 4. It will just take the first 4 bytes of the array. An integer can hold only 4 bytes after all.</li>\n</ul>\n<hr />\n<h4>How I would write it:</h4>\n<p>I'm wondering if it could be easier to read, if it used an <code>arraycopy</code>.</p>\n<pre><code>byte[] destination = new byte[length];\nSystem.arraycopy(input, 0, destination, 0, length);\n</code></pre>\n<p>And then finally convert that to an integer. Which is kind of tricky for an array of variable length. So, I would borrow the function which I found <a href=\"https://stackoverflow.com/questions/5616052/how-can-i-convert-a-4-byte-array-to-an-integer\">here</a>.</p>\n<pre><code>public static int pareAsBigEndianByteArray(byte[] bytes) {\n    int factor = bytes.length - 1;\n    int result = 0;\n    for (int i = 0; i &lt; bytes.length; i++) {\n        if (i == 0) {\n            result |= bytes[i] &lt;&lt; (8 * factor--);\n        } else {\n            result |= bytes[i] &lt;&lt; (8 * factor--);\n        }\n    }\n    return result;\n}\n</code></pre>\n<p>Seems like the code of the function given in your question does those 2 things in one go, which could be more efficient, but it looks really hard to read.</p>\n<h3>EDIT:</h3>\n<p>It's easier if you just always copy it to an array of length 4.</p>\n<pre><code>public static int decodeInt(byte[] input, int length) {\n    length = java.lang.Math.min(4, length);\n    byte[] destination = new byte[4];\n    System.arraycopy(input, 0, destination, 4-length, length);\n    int value = java.nio.ByteBuffer.wrap(destination).getInt();\n    return value;\n}\n</code></pre>\n"}],"owner":{"account_id":12461004,"reputation":33,"user_id":9157138,"display_name":"r.m.ghimis"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75037073,"answer_count":1,"score":0,"last_activity_date":1673050135,"creation_date":1669656224,"question_id":74604316,"body_markdown":"I have the fallowing piece of code that I try to understand what it does. I know that extracts an integer value from a byte value, but I don&#39;t really comprehend what it does and how it works:\r\n\r\n\r\n\r\n```\r\npublic int decodeInt(byte[] input, int length) {\r\n\tint value = 0;\r\n    int p = 0;\r\n\tint paddingPositions = 4 - length;\r\n\tfor (int i = 0; i &lt; 4; i++) {\r\n\t\tint shift = (4 - 1 - i) * 8;\r\n\t\tif (paddingPositions-- &gt; 0) {\r\n\t\t\tvalue += (0 &amp; 0x000000FF) &lt;&lt; shift;\r\n\t\t} else {\r\n\t\t    value += (input[p] &amp; 0x000000FF) &lt;&lt; shift;\r\n            p++\r\n\t\t}\r\n\t}\r\n\treturn value;\r\n}\r\n```\r\n\r\n\r\n\r\nIt seems to pad the value to get the high bits and low bits and sum them together somehow(the shift step looks very strange to me).\r\n","title":"Byte array to signed Integer","body":"<p>I have the fallowing piece of code that I try to understand what it does. I know that extracts an integer value from a byte value, but I don't really comprehend what it does and how it works:</p>\n<pre><code>public int decodeInt(byte[] input, int length) {\n    int value = 0;\n    int p = 0;\n    int paddingPositions = 4 - length;\n    for (int i = 0; i &lt; 4; i++) {\n        int shift = (4 - 1 - i) * 8;\n        if (paddingPositions-- &gt; 0) {\n            value += (0 &amp; 0x000000FF) &lt;&lt; shift;\n        } else {\n            value += (input[p] &amp; 0x000000FF) &lt;&lt; shift;\n            p++\n        }\n    }\n    return value;\n}\n</code></pre>\n<p>It seems to pad the value to get the high bits and low bits and sum them together somehow(the shift step looks very strange to me).</p>\n"},{"tags":["java","data-structures","hashmap","complexity-theory"],"comments":[{"owner":{"account_id":162377,"reputation":3987,"user_id":383795,"accept_rate":100,"display_name":"Dr G"},"score":1,"creation_date":1293625223,"post_id":4553624,"comment_id":4992878,"body_markdown":"You might want to look up the concept of amortized complexity. See for instance here: stackoverflow.com/questions/3949217/time-complexity-of-hash-table Worst case complexity is not the most important measure for a hash table","body":"You might want to look up the concept of amortized complexity. See for instance here: stackoverflow.com/questions/3949217/time-complexity-of-hash-&zwnj;&#8203;table Worst case complexity is not the most important measure for a hash table"},{"owner":{"account_id":104686,"reputation":8649,"user_id":279738,"accept_rate":95,"display_name":"Engineer"},"score":3,"creation_date":1388746333,"post_id":4553624,"comment_id":31373468,"body_markdown":"Correct -- it&#39;s _amortized_ O(1) -- never forget that first part and you won&#39;t have these kinds of questions :)","body":"Correct -- it&#39;s <i>amortized</i> O(1) -- never forget that first part and you won&#39;t have these kinds of questions :)"},{"owner":{"account_id":14019000,"reputation":937,"user_id":10125681,"display_name":"Tarun Kolla"},"score":1,"creation_date":1558541715,"post_id":4553624,"comment_id":99138714,"body_markdown":"Time complexity worst case is O(logN) since Java 1.8 if I&#39;m not wrong.","body":"Time complexity worst case is O(logN) since Java 1.8 if I&#39;m not wrong."}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":310,"is_accepted":true,"score":310,"last_activity_date":1451638253,"creation_date":1293621906,"answer_id":4553642,"question_id":4553624,"body_markdown":"It depends on many things. It&#39;s *usually* O(1), with a decent hash which itself is constant time... but you could have a hash which takes a long time to compute, *and* if there are multiple items in the hash map which return the same hash code, `get` will have to iterate over them calling `equals` on each of them to find a match.\r\n\r\nIn the worst case, a `HashMap` has an O(n) lookup due to walking through all entries in the same hash bucket (e.g. if they all have the same hash code). Fortunately, that worst case scenario doesn&#39;t come up very often in real life, in my experience. So no, O(1) certainly isn&#39;t guaranteed - but it&#39;s usually what you should assume when considering which algorithms and data structures to use.\r\n\r\nIn JDK 8, `HashMap` has been tweaked so that if keys can be compared for ordering, then any densely-populated bucket is implemented as a tree, so that even if there are lots of entries with the same hash code, the complexity is O(log n). That can cause issues if you have a key type where equality and ordering are different, of course.\r\n\r\nAnd yes, if you don&#39;t have enough memory for the hash map, you&#39;ll be in trouble... but that&#39;s going to be true whatever data structure you use.","title":"HashMap get/put complexity","body":"<p>It depends on many things. It's <em>usually</em> O(1), with a decent hash which itself is constant time... but you could have a hash which takes a long time to compute, <em>and</em> if there are multiple items in the hash map which return the same hash code, <code>get</code> will have to iterate over them calling <code>equals</code> on each of them to find a match.</p>\n\n<p>In the worst case, a <code>HashMap</code> has an O(n) lookup due to walking through all entries in the same hash bucket (e.g. if they all have the same hash code). Fortunately, that worst case scenario doesn't come up very often in real life, in my experience. So no, O(1) certainly isn't guaranteed - but it's usually what you should assume when considering which algorithms and data structures to use.</p>\n\n<p>In JDK 8, <code>HashMap</code> has been tweaked so that if keys can be compared for ordering, then any densely-populated bucket is implemented as a tree, so that even if there are lots of entries with the same hash code, the complexity is O(log n). That can cause issues if you have a key type where equality and ordering are different, of course.</p>\n\n<p>And yes, if you don't have enough memory for the hash map, you'll be in trouble... but that's going to be true whatever data structure you use.</p>\n"},{"tags":[],"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1293623025,"creation_date":1293623025,"answer_id":4553778,"question_id":4553624,"body_markdown":"I&#39;m not sure the default hashcode is the address - I read the OpenJDK source for hashcode generation a while ago, and I remember it being something a bit more complicated. Still not something that guarantees a good distribution, perhaps. However, that is to some extent moot, as few classes you&#39;d use as keys in a hashmap use the default hashcode - they supply their own implementations, which ought to be good.\r\n\r\nOn top of that, what you may not know (again, this is based in reading source - it&#39;s not guaranteed) is that HashMap stirs the hash before using it, to mix entropy from throughout the word into the bottom bits, which is where it&#39;s needed for all but the hugest hashmaps. That helps deal with hashes that specifically don&#39;t do that themselves, although i can&#39;t think of any common cases where you&#39;d see that.\r\n\r\nFinally, what happens when the table is overloaded is that it degenerates into a set of parallel linked lists - performance becomes O(n). Specifically, the number of links traversed will on average be half the load factor.","title":"HashMap get/put complexity","body":"<p>I'm not sure the default hashcode is the address - I read the OpenJDK source for hashcode generation a while ago, and I remember it being something a bit more complicated. Still not something that guarantees a good distribution, perhaps. However, that is to some extent moot, as few classes you'd use as keys in a hashmap use the default hashcode - they supply their own implementations, which ought to be good.</p>\n\n<p>On top of that, what you may not know (again, this is based in reading source - it's not guaranteed) is that HashMap stirs the hash before using it, to mix entropy from throughout the word into the bottom bits, which is where it's needed for all but the hugest hashmaps. That helps deal with hashes that specifically don't do that themselves, although i can't think of any common cases where you'd see that.</p>\n\n<p>Finally, what happens when the table is overloaded is that it degenerates into a set of parallel linked lists - performance becomes O(n). Specifically, the number of links traversed will on average be half the load factor.</p>\n"},{"tags":[],"owner":{"account_id":71043,"reputation":30960,"user_id":205521,"accept_rate":89,"display_name":"Thomas Ahle"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1485866577,"creation_date":1401453405,"answer_id":23954819,"question_id":4553624,"body_markdown":"It has already been mentioned that hashmaps are `O(n/m)` in average, if `n` is the number of items and `m` is the size. It has also been mentioned that in principle the whole thing could collapse into a singly linked list with `O(n)` query time. (This all assumes that calculating the hash is constant time).\r\n\r\nHowever what isn&#39;t often mentioned is, that with probability at least `1-1/n` (so for 1000 items that&#39;s a 99.9% chance) the largest bucket won&#39;t be filled more than `O(logn)`! Hence matching the average complexity of binary search trees. (And the constant is good, a tighter bound is `(log n)*(m/n) + O(1)`).\r\n\r\nAll that&#39;s required for this theoretical bound is that you use a reasonably good hash function (see Wikipedia: [Universal Hashing][1]. It can be as simple as `a*x&gt;&gt;m`). And of course that the person giving you the values to hash doesn&#39;t know how you have chosen your random constants.\r\n\r\nTL;DR: With Very High Probability the worst case get/put complexity of a hashmap is `O(logn)`.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Universal_hashing","title":"HashMap get/put complexity","body":"<p>It has already been mentioned that hashmaps are <code>O(n/m)</code> in average, if <code>n</code> is the number of items and <code>m</code> is the size. It has also been mentioned that in principle the whole thing could collapse into a singly linked list with <code>O(n)</code> query time. (This all assumes that calculating the hash is constant time).</p>\n\n<p>However what isn't often mentioned is, that with probability at least <code>1-1/n</code> (so for 1000 items that's a 99.9% chance) the largest bucket won't be filled more than <code>O(logn)</code>! Hence matching the average complexity of binary search trees. (And the constant is good, a tighter bound is <code>(log n)*(m/n) + O(1)</code>).</p>\n\n<p>All that's required for this theoretical bound is that you use a reasonably good hash function (see Wikipedia: <a href=\"https://en.wikipedia.org/wiki/Universal_hashing\" rel=\"noreferrer\">Universal Hashing</a>. It can be as simple as <code>a*x&gt;&gt;m</code>). And of course that the person giving you the values to hash doesn't know how you have chosen your random constants.</p>\n\n<p>TL;DR: With Very High Probability the worst case get/put complexity of a hashmap is <code>O(logn)</code>.</p>\n"},{"tags":[],"owner":{"account_id":2760068,"reputation":818,"user_id":2377137,"display_name":"Pranav"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1436774843,"creation_date":1436774843,"answer_id":31378268,"question_id":4553624,"body_markdown":"HashMap operation is dependent factor of hashCode implementation. For the ideal scenario lets say the good hash implementation which provide unique hash code for every object (No hash collision) then the best, worst and average case scenario would be O(1).\r\nLet&#39;s consider a scenario where a bad implementation of hashCode always returns 1 or such hash which has hash collision. In this case the time complexity would be O(n).\r\n\r\nNow coming to the second part of the question about memory, then yes memory constraint would be taken care by JVM.","title":"HashMap get/put complexity","body":"<p>HashMap operation is dependent factor of hashCode implementation. For the ideal scenario lets say the good hash implementation which provide unique hash code for every object (No hash collision) then the best, worst and average case scenario would be O(1).\nLet's consider a scenario where a bad implementation of hashCode always returns 1 or such hash which has hash collision. In this case the time complexity would be O(n).</p>\n\n<p>Now coming to the second part of the question about memory, then yes memory constraint would be taken care by JVM.</p>\n"},{"tags":[],"owner":{"account_id":1716782,"reputation":266,"user_id":1573682,"display_name":"Peter Verhas"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1558211393,"creation_date":1525442577,"answer_id":50176807,"question_id":4553624,"body_markdown":"In practice, it is O(1), but this actually is a terrible and mathematically non-sense simplification. The O() notation says how the algorithm behaves when the size of the problem tends to infinity. Hashmap get/put works like an O(1) algorithm for a limited size. The limit is fairly large from the computer memory and from the addressing point of view, but far from infinity.\r\n\r\nWhen one says that hashmap get/put is O(1) it should really say that the time needed for the get/put is more or less constant and does not depend on the number of elements in the hashmap so far as the hashmap can be presented on the actual computing system. If the problem goes beyond that size and we need larger hashmaps then, after a while, certainly the number of the bits describing one element will also increase as we run out of the possible describable different elements. For example, if we used a hashmap to store 32bit numbers and later we increase the problem size so that we will have more than 2^32 bit elements in the hashmap, then the individual elements will be described with more than 32bits.\r\n\r\nThe number of the bits needed to describe the individual elements is log(N), where N is the maximum number of elements, therefore get and put are really O(log N).\r\n\r\nIf you compare it with a tree set, which is O(log n) then hash set is O(long(max(n)) and we simply feel that this is O(1), because on a certain implementation max(n) is fixed, does not change (the size of the objects we store measured in bits) and the algorithm calculating the hash code is fast.\r\n\r\nFinally, if finding an element in any data structure were O(1) we would create information out of thin air. Having a data structure of n element I can select one element in n different way. With that, I can encode log(n) bit information. If I can encode that in zero bit (that is what O(1) means) then I created an infinitely compressing ZIP algorithm.","title":"HashMap get/put complexity","body":"<p>In practice, it is O(1), but this actually is a terrible and mathematically non-sense simplification. The O() notation says how the algorithm behaves when the size of the problem tends to infinity. Hashmap get/put works like an O(1) algorithm for a limited size. The limit is fairly large from the computer memory and from the addressing point of view, but far from infinity.</p>\n\n<p>When one says that hashmap get/put is O(1) it should really say that the time needed for the get/put is more or less constant and does not depend on the number of elements in the hashmap so far as the hashmap can be presented on the actual computing system. If the problem goes beyond that size and we need larger hashmaps then, after a while, certainly the number of the bits describing one element will also increase as we run out of the possible describable different elements. For example, if we used a hashmap to store 32bit numbers and later we increase the problem size so that we will have more than 2^32 bit elements in the hashmap, then the individual elements will be described with more than 32bits.</p>\n\n<p>The number of the bits needed to describe the individual elements is log(N), where N is the maximum number of elements, therefore get and put are really O(log N).</p>\n\n<p>If you compare it with a tree set, which is O(log n) then hash set is O(long(max(n)) and we simply feel that this is O(1), because on a certain implementation max(n) is fixed, does not change (the size of the objects we store measured in bits) and the algorithm calculating the hash code is fast.</p>\n\n<p>Finally, if finding an element in any data structure were O(1) we would create information out of thin air. Having a data structure of n element I can select one element in n different way. With that, I can encode log(n) bit information. If I can encode that in zero bit (that is what O(1) means) then I created an infinitely compressing ZIP algorithm.</p>\n"},{"tags":[],"owner":{"account_id":3997984,"reputation":4081,"user_id":3294902,"display_name":"Kostas Kryptos"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1609263891,"creation_date":1540149887,"answer_id":52919020,"question_id":4553624,"body_markdown":"I agree with:\r\n\r\n - the general amortized complexity of O(1) \r\n - a bad `hashCode()` implementation could result to multiple collisions, which means that in the worst case every object goes to the same bucket, thus O(*N*) if each bucket is backed by a `List`. \r\n - since Java 8, `HashMap` dynamically replaces the Nodes (linked list) used in each bucket with TreeNodes (red-black tree when a list gets bigger than 8 elements) resulting to a worst performance of O(*logN*).\r\n\r\nBut, this is **not** the full truth if we want to be 100% precise. The implementation of `hashCode()` and the type of key `Object` (immutable/cached or being a Collection) might also affect real time complexity in strict terms.\r\n\r\nLet&#39;s assume the following three cases: \r\n\r\n 1. `HashMap&lt;Integer, V&gt;`\r\n 2. `HashMap&lt;String, V&gt;`\r\n 3. `HashMap&lt;List&lt;E&gt;, V&gt;`\r\n\r\nDo they have the same complexity? Well, the amortised complexity of the 1st one is, as expected, O(1). But, for the rest, we also need to compute `hashCode()` of the lookup element, which means we might have to traverse arrays and lists in our algorithm. \r\n\r\nLets assume that the size of all of the above arrays/lists is *k*.\r\nThen, `HashMap&lt;String, V&gt;` and `HashMap&lt;List&lt;E&gt;, V&gt;` will have O(k) amortised complexity and similarly, O(*k + logN*) worst case in Java8.\r\n\r\n*Note that using a `String` key is a more complex case, because it is immutable and Java caches the result of `hashCode()` in a private variable `hash`, so it&#39;s only computed once.\r\n\r\n    /** Cache the hash code for the string */\r\n        private int hash; // Default to 0\r\n    \r\nBut, the above is also having its own worst case, because Java&#39;s `String.hashCode()` implementation is checking if `hash == 0` before computing `hashCode`. But hey, there are non-empty Strings that output a `hashcode` of zero, such as &quot;f5a5a608&quot;, see [here][1], in which case memoization might not be helpful.\r\n\r\n \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/18746394/can-a-non-empty-string-have-a-hashcode-of-zero","title":"HashMap get/put complexity","body":"<p>I agree with:</p>\n<ul>\n<li>the general amortized complexity of O(1)</li>\n<li>a bad <code>hashCode()</code> implementation could result to multiple collisions, which means that in the worst case every object goes to the same bucket, thus O(<em>N</em>) if each bucket is backed by a <code>List</code>.</li>\n<li>since Java 8, <code>HashMap</code> dynamically replaces the Nodes (linked list) used in each bucket with TreeNodes (red-black tree when a list gets bigger than 8 elements) resulting to a worst performance of O(<em>logN</em>).</li>\n</ul>\n<p>But, this is <strong>not</strong> the full truth if we want to be 100% precise. The implementation of <code>hashCode()</code> and the type of key <code>Object</code> (immutable/cached or being a Collection) might also affect real time complexity in strict terms.</p>\n<p>Let's assume the following three cases:</p>\n<ol>\n<li><code>HashMap&lt;Integer, V&gt;</code></li>\n<li><code>HashMap&lt;String, V&gt;</code></li>\n<li><code>HashMap&lt;List&lt;E&gt;, V&gt;</code></li>\n</ol>\n<p>Do they have the same complexity? Well, the amortised complexity of the 1st one is, as expected, O(1). But, for the rest, we also need to compute <code>hashCode()</code> of the lookup element, which means we might have to traverse arrays and lists in our algorithm.</p>\n<p>Lets assume that the size of all of the above arrays/lists is <em>k</em>.\nThen, <code>HashMap&lt;String, V&gt;</code> and <code>HashMap&lt;List&lt;E&gt;, V&gt;</code> will have O(k) amortised complexity and similarly, O(<em>k + logN</em>) worst case in Java8.</p>\n<p>*Note that using a <code>String</code> key is a more complex case, because it is immutable and Java caches the result of <code>hashCode()</code> in a private variable <code>hash</code>, so it's only computed once.</p>\n<pre><code>/** Cache the hash code for the string */\n    private int hash; // Default to 0\n</code></pre>\n<p>But, the above is also having its own worst case, because Java's <code>String.hashCode()</code> implementation is checking if <code>hash == 0</code> before computing <code>hashCode</code>. But hey, there are non-empty Strings that output a <code>hashcode</code> of zero, such as &quot;f5a5a608&quot;, see <a href=\"https://stackoverflow.com/questions/18746394/can-a-non-empty-string-have-a-hashcode-of-zero\">here</a>, in which case memoization might not be helpful.</p>\n"},{"tags":[],"owner":{"account_id":26989796,"reputation":21,"user_id":20552882,"display_name":"Gokul Kadnar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1668929522,"creation_date":1668928754,"answer_id":74506300,"question_id":4553624,"body_markdown":"In simple word, If each bucket contain only single node then time complexity will be **O(1)**. If bucket contain more than one node them time complexity will be **O(linkedList size)**. which is always efficient than **O(n)**.\r\n\r\nhence we can say on an average case time complexity of put(K,V) function :\r\n\r\n**nodes(n)/buckets(N) =  (lambda)**\r\n\r\nExample : **16/16 = 1**\r\n\r\n**Time complexity will be O(1)**\r\n\r\n","title":"HashMap get/put complexity","body":"<p>In simple word, If each bucket contain only single node then time complexity will be <strong>O(1)</strong>. If bucket contain more than one node them time complexity will be <strong>O(linkedList size)</strong>. which is always efficient than <strong>O(n)</strong>.</p>\n<p>hence we can say on an average case time complexity of put(K,V) function :</p>\n<p><strong>nodes(n)/buckets(N) =  (lambda)</strong></p>\n<p>Example : <strong>16/16 = 1</strong></p>\n<p><strong>Time complexity will be O(1)</strong></p>\n"},{"tags":[],"owner":{"account_id":2043778,"reputation":17800,"user_id":1824361,"accept_rate":80,"display_name":"Ahmed Nabil"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1673050050,"creation_date":1672935384,"answer_id":75021410,"question_id":4553624,"body_markdown":"```\r\nJava HashMap time complexity\r\n--------------------------------\r\nget(key) &amp; contains(key) &amp; remove(key)\t\t\tBest case\tWorst case\t\t\t\t\t\t\t\r\nHashMap before Java 8, using LinkedList buckets\t1\t\t\tO(n)\r\nHashMap after Java 8, using LinkedList\tbuckets\t1\t\t\tO(n)\r\nHashMap after Java 8, using Binary Tree\tbuckets\t1\t\t\tO(log n)\r\n\r\n \r\nput(key, value)\t\t\t\t\t\t\t\t\tBest case\tWorst case\t\t\t\t\t\t\t\r\nHashMap before Java 8, using LinkedList\tbuckets\t1\t\t\t1\r\nHashMap after Java 8, using LinkedList\tbuckets\t1\t\t\t1\r\nHashMap after Java 8, using Binary Tree\tbuckets\t1\t\t\tO(log n)\r\n```\r\n\r\n\r\nHints:\r\n- Before `Java 8`, `HashMap` use `LinkedList` buckets\t\r\n- After `Java 8`, `HashMap` will use either `LinkedList` buckets or `Binary Tree`\tbuckets\taccording to the bucket size.  \r\n\r\n\r\n    if(bucket size &gt; TREEIFY_THRESHOLD[8]): \r\n    &gt; treeifyBin: The bucket will be a Balanced Binary Red-Black Tree\r\n    \r\n    if(bucket size &lt;= UNTREEIFY_THRESHOLD[6]): \r\n    &gt; untreeify: The bucket will be LinkedList (plain mode)\r\n\r\n","title":"HashMap get/put complexity","body":"<pre><code>Java HashMap time complexity\n--------------------------------\nget(key) &amp; contains(key) &amp; remove(key)          Best case   Worst case                          \nHashMap before Java 8, using LinkedList buckets 1           O(n)\nHashMap after Java 8, using LinkedList  buckets 1           O(n)\nHashMap after Java 8, using Binary Tree buckets 1           O(log n)\n\n \nput(key, value)                                 Best case   Worst case                          \nHashMap before Java 8, using LinkedList buckets 1           1\nHashMap after Java 8, using LinkedList  buckets 1           1\nHashMap after Java 8, using Binary Tree buckets 1           O(log n)\n</code></pre>\n<p>Hints:</p>\n<ul>\n<li><p>Before <code>Java 8</code>, <code>HashMap</code> use <code>LinkedList</code> buckets</p>\n</li>\n<li><p>After <code>Java 8</code>, <code>HashMap</code> will use either <code>LinkedList</code> buckets or <code>Binary Tree</code>   buckets according to the bucket size.</p>\n<p>if(bucket size &gt; TREEIFY_THRESHOLD[8]):</p>\n<blockquote>\n<p>treeifyBin: The bucket will be a Balanced Binary Red-Black Tree</p>\n</blockquote>\n<p>if(bucket size &lt;= UNTREEIFY_THRESHOLD[6]):</p>\n<blockquote>\n<p>untreeify: The bucket will be LinkedList (plain mode)</p>\n</blockquote>\n</li>\n</ul>\n"}],"owner":{"account_id":246765,"reputation":41329,"user_id":521070,"accept_rate":72,"display_name":"Michael"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":244198,"favorite_count":0,"down_vote_count":0,"up_vote_count":189,"accepted_answer_id":4553642,"answer_count":8,"score":189,"last_activity_date":1673050050,"creation_date":1293621723,"question_id":4553624,"body_markdown":"We are used to saying that `HashMap` `get/put` operations are O(1). However it depends on the hash implementation. The default object hash is actually the internal address in the JVM heap. Are we sure it is good enough to claim that the `get/put` are O(1)?\r\n\r\nAvailable memory is another issue. As I understand from the javadocs, the `HashMap` load factor should be 0.75. What if we do not have enough memory in JVM and the load factor exceeds the limit?\r\n\r\nSo, it looks like O(1) is not guaranteed. Does it make sense or am I missing something?\r\n\r\n","title":"HashMap get/put complexity","body":"<p>We are used to saying that <code>HashMap</code> <code>get/put</code> operations are O(1). However it depends on the hash implementation. The default object hash is actually the internal address in the JVM heap. Are we sure it is good enough to claim that the <code>get/put</code> are O(1)?</p>\n<p>Available memory is another issue. As I understand from the javadocs, the <code>HashMap</code> load factor should be 0.75. What if we do not have enough memory in JVM and the load factor exceeds the limit?</p>\n<p>So, it looks like O(1) is not guaranteed. Does it make sense or am I missing something?</p>\n"},{"tags":["java","json","null","gson","jsonobjectrequest"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1673048350,"post_id":75037035,"comment_id":132417842,"body_markdown":"Which `JSONObject` are you actually using? gson does not have a class called `JSONObject`, only [`JsonObject`](https://www.javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/JsonObject.html).","body":"Which <code>JSONObject</code> are you actually using? gson does not have a class called <code>JSONObject</code>, only <a href=\"https://www.javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/JsonObject.html\" rel=\"nofollow noreferrer\"><code>JsonObject</code></a>."},{"owner":{"account_id":10072509,"reputation":1,"user_id":7445648,"display_name":"shailesh"},"score":0,"creation_date":1673048443,"post_id":75037035,"comment_id":132417856,"body_markdown":"I am using-&gt;  import org.json.JSONObject;","body":"I am using-&gt;  import org.json.JSONObject;"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1673048547,"post_id":75037035,"comment_id":132417873,"body_markdown":"The [documentation of `JSONObject::get`](https://stleary.github.io/JSON-java/org/json/JSONObject.html#get-java.lang.String-) states that this method does throw an exception when the key is not found.","body":"The <a href=\"https://stleary.github.io/JSON-java/org/json/JSONObject.html#get-java.lang.String-\" rel=\"nofollow noreferrer\">documentation of <code>JSONObject::get</code></a> states that this method does throw an exception when the key is not found."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1673048596,"post_id":75037035,"comment_id":132417879,"body_markdown":"The link to the post does not link to a post.","body":"The link to the post does not link to a post."},{"owner":{"account_id":10072509,"reputation":1,"user_id":7445648,"display_name":"shailesh"},"score":0,"creation_date":1673048644,"post_id":75037035,"comment_id":132417890,"body_markdown":"Here the key is there but the value for it is null. It does throw a JSONException if I was doing `someJsonObjectData.get(&quot;someOtherKey&quot;);  `","body":"Here the key is there but the value for it is null. It does throw a JSONException if I was doing <code>someJsonObjectData.get(&quot;someOtherKey&quot;);  </code>"},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1673048726,"post_id":75037035,"comment_id":132417909,"body_markdown":"Seems like a natural troubleshooting step would be to check what non-null value is in fact retrieved.  Probably it is `JSONObject.NULL` as opposed to a Java `null`.","body":"Seems like a natural troubleshooting step would be to check what non-null value is in fact retrieved.  Probably it is <code>JSONObject.NULL</code> as opposed to a Java <code>null</code>."},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1673048874,"post_id":75037035,"comment_id":132417939,"body_markdown":"What does `System.out.println(someKey.getClass());` print?","body":"What does <code>System.out.println(someKey.getClass());</code> print?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1673048874,"post_id":75037035,"comment_id":132417940,"body_markdown":"Please [edit] the post and add a [MRE]. Looking at the [relevant source code of `JSONObject`](https://github.com/stleary/JSON-java/blob/master/src/main/java/org/json/JSONObject.java#L564), it should throw an exception, even if the key is present, but the value associated is `null`.","body":"Please <a href=\"https://stackoverflow.com/posts/75037035/edit\">edit</a> the post and add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Looking at the <a href=\"https://github.com/stleary/JSON-java/blob/master/src/main/java/org/json/JSONObject.java#L564\" rel=\"nofollow noreferrer\">relevant source code of <code>JSONObject</code></a>, it should throw an exception, even if the key is present, but the value associated is <code>null</code>."}],"answers":[{"tags":[],"owner":{"account_id":10072509,"reputation":1,"user_id":7445648,"display_name":"shailesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1673049387,"creation_date":1673049387,"answer_id":75037149,"question_id":75037035,"body_markdown":"I needed to do the check for \r\n\r\n`JSONObject.NULL` and not `null`\r\nhttps://developer.android.com/reference/org/json/JSONObject.html#NULL. \r\n\r\nPrinting the class of someKey helped. Thank you everyone for your time!!","title":"null check is always evaluating to false","body":"<p>I needed to do the check for</p>\n<p><code>JSONObject.NULL</code> and not <code>null</code>\n<a href=\"https://developer.android.com/reference/org/json/JSONObject.html#NULL\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/org/json/JSONObject.html#NULL</a>.</p>\n<p>Printing the class of someKey helped. Thank you everyone for your time!!</p>\n"},{"tags":[],"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673049445,"creation_date":1673049445,"answer_id":75037154,"question_id":75037035,"body_markdown":"Per [its docs][1], the internal form of the value of a `JSONObject` can contain values of these types: `Boolean`, `JSONArray`, `JSONObject`, `Number`, `String`, **or the `JSONObject.NULL` object**.  Therefore, I would not expect its `get()` method to return `null` for any key.  In your particular case, I would expect `someJsonObjectData.get(&quot;someKey&quot;)` to return `JSONObject.NULL`, which will compare unequal to `null`.\r\n\r\n`JSONObject.NULL` is a specific object, so it should be safe to perform `==` comparisons with it:\r\n```\r\nimport org.json.JSONObject;\r\n\r\n// ...\r\n\r\n    void doSomething() {\r\n        String someStringJsonData = &quot;{\\&quot;someKey\\&quot;: null}&quot;; \r\n        JSONObject someJsonObjectData = new JSONObject(someStringJsonData); \r\n        Object someValue = someJsonObjectData.get(&quot;someKey&quot;);  \r\n\r\n        if (someValue == JSONObject.NULL) {                 \r\n            System.out.println(&quot;someKey&#39;s value is null&quot;);                             \r\n        }\r\n    }\r\n```\r\n\r\n\r\n  [1]: https://stleary.github.io/JSON-java/org/json/JSONObject.html","title":"null check is always evaluating to false","body":"<p>Per <a href=\"https://stleary.github.io/JSON-java/org/json/JSONObject.html\" rel=\"nofollow noreferrer\">its docs</a>, the internal form of the value of a <code>JSONObject</code> can contain values of these types: <code>Boolean</code>, <code>JSONArray</code>, <code>JSONObject</code>, <code>Number</code>, <code>String</code>, <strong>or the <code>JSONObject.NULL</code> object</strong>.  Therefore, I would not expect its <code>get()</code> method to return <code>null</code> for any key.  In your particular case, I would expect <code>someJsonObjectData.get(&quot;someKey&quot;)</code> to return <code>JSONObject.NULL</code>, which will compare unequal to <code>null</code>.</p>\n<p><code>JSONObject.NULL</code> is a specific object, so it should be safe to perform <code>==</code> comparisons with it:</p>\n<pre><code>import org.json.JSONObject;\n\n// ...\n\n    void doSomething() {\n        String someStringJsonData = &quot;{\\&quot;someKey\\&quot;: null}&quot;; \n        JSONObject someJsonObjectData = new JSONObject(someStringJsonData); \n        Object someValue = someJsonObjectData.get(&quot;someKey&quot;);  \n\n        if (someValue == JSONObject.NULL) {                 \n            System.out.println(&quot;someKey's value is null&quot;);                             \n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":10072509,"reputation":1,"user_id":7445648,"display_name":"shailesh"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75037149,"answer_count":2,"score":-1,"last_activity_date":1673049445,"creation_date":1673048040,"question_id":75037035,"body_markdown":"```\r\nimport org.json.JSONObject;\r\n\r\nString someStringJsonData = &quot;{\\&quot;someKey\\&quot;: &quot; + &quot;null&quot; + &quot;}&quot;; \r\nJSONObject someJsonObjectData = new JSONObject(someStringJsonData); \r\nObject someKey = someJsonObjectData.get(&quot;someKey&quot;);  \r\nif (null == someKey) {                 \r\n        System.out.println(&quot;someKey is null&quot;);                             \r\n}\r\n```\r\n\r\nI have the above simple snippet of code. I would expect to see &quot;someKey is null&quot; printed, however, my code never goes in the if loop. I tried printing value of someKey and it shows to be null. Not sure what I am missing. \r\n\r\nI tried different values of the jsonString from this [post](https://stackoverflow.com/questions/21120999/representing-null-in-json) but to no avail. ","title":"null check is always evaluating to false","body":"<pre><code>import org.json.JSONObject;\n\nString someStringJsonData = &quot;{\\&quot;someKey\\&quot;: &quot; + &quot;null&quot; + &quot;}&quot;; \nJSONObject someJsonObjectData = new JSONObject(someStringJsonData); \nObject someKey = someJsonObjectData.get(&quot;someKey&quot;);  \nif (null == someKey) {                 \n        System.out.println(&quot;someKey is null&quot;);                             \n}\n</code></pre>\n<p>I have the above simple snippet of code. I would expect to see &quot;someKey is null&quot; printed, however, my code never goes in the if loop. I tried printing value of someKey and it shows to be null. Not sure what I am missing.</p>\n<p>I tried different values of the jsonString from this <a href=\"https://stackoverflow.com/questions/21120999/representing-null-in-json\">post</a> but to no avail.</p>\n"},{"tags":["java","azure","google-cloud-platform","google-cloud-storage"],"owner":{"account_id":4745766,"reputation":1,"user_id":5142205,"display_name":"AANKIT ROY"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673049149,"creation_date":1672991658,"question_id":75028317,"body_markdown":"I was creating a signed URL for uploading an audio file. Url is used in Android apps. It&#39;s migration from azure to GCP so can write azure code here:\r\n\r\n\t\tString cdnUrl = fileUploadConfig.has(containerName) ? fileUploadConfig.getString(containerName)\r\n\t\t\t\t: Constants.AZURE_STORAGE_URL;\r\n\r\n\t\tBlobServiceClient client = new BlobServiceClientBuilder().connectionString(storageConnectionString)\r\n\t\t\t\t.buildClient();\r\n\t\tBlobClient blobClient = client.getBlobContainerClient(containerName).getBlobClient(key);\r\n\t\tBlobSasPermission blobSasPermission = new BlobSasPermission().setWritePermission(true);\r\n\r\n\t\tOffsetDateTime expiryTime = OffsetDateTime.now().plusDays(1);\r\n\t\tBlobServiceSasSignatureValues values = new BlobServiceSasSignatureValues(expiryTime, blobSasPermission)\r\n\t\t\t\t.setStartTime(OffsetDateTime.now());\r\n\t\tString signature = blobClient.generateSas(values);\r\n\t\tMap&lt;String,String&gt; headerMap = new HashMap&lt;String,String&gt;(){{\r\n\t\t\tput(&quot;x-ms-blob-type&quot;,&quot;BlockBlob&quot;);\r\n\t\t}};\r\n\t\tJSONObject res = new JSONObject();\r\n\t\tSystem.out.println(blobClient.getBlobUrl());\r\n\t\tcdnUrl +=   key;\r\n\t\tres.put(&quot;presignedUrl&quot;, blobClient.getBlobUrl() + &quot;?&quot; + signature);\r\n\t\tres.put(&quot;cdnUrl&quot;, cdnUrl);\r\n\t\tres.put(&quot;header&quot;,new JSONObject(headerMap) );\r\n\t\treturn res.toString();\r\n\r\nWhen I am transforming it into GCP, I am writing the following code:\r\n\r\n\r\n\tString cdnUrl;\r\n\t\ttry {\r\n\t\t\tcdnUrl = KhabriUtils.getSecret(&quot;s3-cdn-mapping-&quot; + containerName);\r\n\t\t} catch (Exception e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\tcdnUrl = Constants.GCP_STORAGE_URL;\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t\tStorage storage = StorageOptions.newBuilder().setProjectId(Constants.GCP_PROJECT_ID).build().getService();\r\n\r\n\t\t// Define resource\r\n\t\tBlobInfo blobInfo = BlobInfo.newBuilder(BlobId.of(containerName, key)).build();\r\n\r\n\t\t // Generate Signed URL\r\n\t    Map&lt;String, String&gt; extensionHeaders = new HashMap&lt;&gt;();\r\n\t    extensionHeaders.put(&quot;Content-Type&quot;, &quot;application/octet-stream&quot;);\r\n\t    \r\n\t\tURL url =\r\n\t\t\t        storage.signUrl(\r\n\t\t\t            blobInfo,\r\n\t\t\t            15,\r\n\t\t\t            TimeUnit.MINUTES,\r\n\t\t\t            Storage.SignUrlOption.httpMethod(HttpMethod.PUT),\r\n\t\t\t            Storage.SignUrlOption.withExtHeaders(extensionHeaders),\r\n\t\t\t            Storage.SignUrlOption.withV4Signature());\r\n\t\t\r\n\t\t\r\n\t\tJSONObject res = new JSONObject();\r\n\t\tcdnUrl += key;\r\n\t\tres.put(&quot;presignedUrl&quot;, url);\r\n\t\tres.put(&quot;cdnUrl&quot;, cdnUrl);\r\n\t\tres.put(&quot;header&quot;, new JSONObject(extensionHeaders));\r\n\t\treturn res.toString();\r\n\r\nIt is giving me an error\r\nServer response: code 403, body &lt;? XML version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;&lt;Error&gt;&lt;Code&gt;SignatureDoesNotMatch&lt;/Code&gt;&lt;Message&gt;The request signature we calculated does not match the signature you provided. Check your Google secret key and signing method.&lt;/Message&gt;&lt;StringToSign&gt;GOOG4-RSA-SHA256\r\n\r\nTried to see if there is any permission missing.","title":"Signed URL to upload audio files in GCP","body":"<p>I was creating a signed URL for uploading an audio file. Url is used in Android apps. It's migration from azure to GCP so can write azure code here:</p>\n<pre><code>    String cdnUrl = fileUploadConfig.has(containerName) ? fileUploadConfig.getString(containerName)\n            : Constants.AZURE_STORAGE_URL;\n\n    BlobServiceClient client = new BlobServiceClientBuilder().connectionString(storageConnectionString)\n            .buildClient();\n    BlobClient blobClient = client.getBlobContainerClient(containerName).getBlobClient(key);\n    BlobSasPermission blobSasPermission = new BlobSasPermission().setWritePermission(true);\n\n    OffsetDateTime expiryTime = OffsetDateTime.now().plusDays(1);\n    BlobServiceSasSignatureValues values = new BlobServiceSasSignatureValues(expiryTime, blobSasPermission)\n            .setStartTime(OffsetDateTime.now());\n    String signature = blobClient.generateSas(values);\n    Map&lt;String,String&gt; headerMap = new HashMap&lt;String,String&gt;(){{\n        put(&quot;x-ms-blob-type&quot;,&quot;BlockBlob&quot;);\n    }};\n    JSONObject res = new JSONObject();\n    System.out.println(blobClient.getBlobUrl());\n    cdnUrl +=   key;\n    res.put(&quot;presignedUrl&quot;, blobClient.getBlobUrl() + &quot;?&quot; + signature);\n    res.put(&quot;cdnUrl&quot;, cdnUrl);\n    res.put(&quot;header&quot;,new JSONObject(headerMap) );\n    return res.toString();\n</code></pre>\n<p>When I am transforming it into GCP, I am writing the following code:</p>\n<pre><code>String cdnUrl;\n    try {\n        cdnUrl = KhabriUtils.getSecret(&quot;s3-cdn-mapping-&quot; + containerName);\n    } catch (Exception e) {\n        // TODO Auto-generated catch block\n        cdnUrl = Constants.GCP_STORAGE_URL;\n        e.printStackTrace();\n    }\n\n    Storage storage = StorageOptions.newBuilder().setProjectId(Constants.GCP_PROJECT_ID).build().getService();\n\n    // Define resource\n    BlobInfo blobInfo = BlobInfo.newBuilder(BlobId.of(containerName, key)).build();\n\n     // Generate Signed URL\n    Map&lt;String, String&gt; extensionHeaders = new HashMap&lt;&gt;();\n    extensionHeaders.put(&quot;Content-Type&quot;, &quot;application/octet-stream&quot;);\n    \n    URL url =\n                storage.signUrl(\n                    blobInfo,\n                    15,\n                    TimeUnit.MINUTES,\n                    Storage.SignUrlOption.httpMethod(HttpMethod.PUT),\n                    Storage.SignUrlOption.withExtHeaders(extensionHeaders),\n                    Storage.SignUrlOption.withV4Signature());\n    \n    \n    JSONObject res = new JSONObject();\n    cdnUrl += key;\n    res.put(&quot;presignedUrl&quot;, url);\n    res.put(&quot;cdnUrl&quot;, cdnUrl);\n    res.put(&quot;header&quot;, new JSONObject(extensionHeaders));\n    return res.toString();\n</code></pre>\n<p>It is giving me an error\nServer response: code 403, body <Code>SignatureDoesNotMatch</Code>The request signature we calculated does not match the signature you provided. Check your Google secret key and signing method.GOOG4-RSA-SHA256</p>\n<p>Tried to see if there is any permission missing.</p>\n"},{"tags":["java","maven","hadoop","nullpointerexception"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673049071,"creation_date":1673049071,"answer_id":75037125,"question_id":75023997,"body_markdown":"Looking at the stacktrace line `FilterFileSystem.mkdirs`, this is likely because arguments from `String[] args` are null. You need to edit the Run Configurations in the IDE to pass two file paths. \r\n\r\nOtherwise, replace `args[0]` and `args[1]` with hard-coded Strings for filepaths. \r\n\r\nWorth mentioning, no one really writes Mapreduce code like this, and rather uses frameworks like Spark or Flink, which can also be ran in IntelliJ (with much less code to do wordcount). \r\n\r\nYou should also stay up-to-date with at least Java 11 and Hadoop 3.x release","title":"Apache hadoop on intellij","body":"<p>Looking at the stacktrace line <code>FilterFileSystem.mkdirs</code>, this is likely because arguments from <code>String[] args</code> are null. You need to edit the Run Configurations in the IDE to pass two file paths.</p>\n<p>Otherwise, replace <code>args[0]</code> and <code>args[1]</code> with hard-coded Strings for filepaths.</p>\n<p>Worth mentioning, no one really writes Mapreduce code like this, and rather uses frameworks like Spark or Flink, which can also be ran in IntelliJ (with much less code to do wordcount).</p>\n<p>You should also stay up-to-date with at least Java 11 and Hadoop 3.x release</p>\n"}],"owner":{"account_id":25206511,"reputation":1,"user_id":19044774,"display_name":"Aris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673049071,"creation_date":1672950425,"question_id":75023997,"body_markdown":"this is my first time using java and hadoop. I am trying to run a wordcount program.\r\nI have made sure to install maven,hadoop(2.7.2), java 1.8 jdk. No error is shown in my code but when I try to run it I get this error :\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.NullPointerException\r\nat java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1092)\r\nat java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1073)\r\nat org.apache.hadoop.util.Shell.runCommand(Shell.java:483)\r\nat org.apache.hadoop.util.Shell.run(Shell.java:456)\r\nat org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:722)\r\nat org.apache.hadoop.util.Shell.execCommand(Shell.java:815)\r\nat org.apache.hadoop.util.Shell.execCommand(Shell.java:798)\r\nat org.apache.hadoop.fs.RawLocalFileSystem.setPermission(RawLocalFileSystem.java:731)\r\nat org.apache.hadoop.fs.RawLocalFileSystem.mkOneDirWithMode(RawLocalFileSystem.java:489)\r\nat org.apache.hadoop.fs.RawLocalFileSystem.mkdirsWithOptionalPermission(RawLocalFileSystem.java:530)\r\nat org.apache.hadoop.fs.RawLocalFileSystem.mkdirs(RawLocalFileSystem.java:507)\r\nat org.apache.hadoop.fs.FilterFileSystem.mkdirs(FilterFileSystem.java:305)\r\nat org.apache.hadoop.mapreduce.JobSubmissionFiles.getStagingDir(JobSubmissionFiles.java:133)\r\nat org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:144)\r\nat org.apache.hadoop.mapreduce.Job$10.run(Job.java:1290)\r\nat org.apache.hadoop.mapreduce.Job$10.run(Job.java:1287)\r\nat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\r\nat java.base/javax.security.auth.Subject.doAs(Subject.java:533)\r\nat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1657)\r\nat org.apache.hadoop.mapreduce.Job.submit(Job.java:1287)\r\nat org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:1308)\r\nat tn.insat.tp1.WordCount.main(WordCount.java:23)\r\n```\r\n\r\n\r\nHere is layout of my different classes :\r\n[Layout of different classes](https://i.stack.imgur.com/pnc9t.png)\r\n\r\n**pom.xml** file :\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;hadoop.mapreduce&lt;/groupId&gt;\r\n    &lt;artifactId&gt;wordcount&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hadoop-common&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-mapreduce-client-core --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hadoop-mapreduce-client-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-hdfs --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hadoop-hdfs&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hadoop-mapreduce-client-common&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n\r\n\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n**TokenizerMapper.java** :\r\n\r\n```\r\npackage tn.insat.tp1;\r\n\r\nimport org.apache.hadoop.io.IntWritable;\r\nimport org.apache.hadoop.io.Text;\r\nimport org.apache.hadoop.mapreduce.Mapper;\r\n\r\nimport java.io.IOException;\r\nimport java.util.StringTokenizer;\r\n\r\npublic class TokenizerMapper\r\n        extends Mapper&lt;Object, Text, Text, IntWritable&gt;{\r\n\r\n    private final static IntWritable one = new IntWritable(1);\r\n    private Text word = new Text();\r\n\r\n    public void map(Object key, Text value, Mapper.Context context\r\n    ) throws IOException, InterruptedException {\r\n        StringTokenizer itr = new StringTokenizer(value.toString());\r\n        while (itr.hasMoreTokens()) {\r\n            word.set(itr.nextToken());\r\n            context.write(word, one);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n**IntSumReducer.java** :\r\n\r\n```\r\npackage tn.insat.tp1;\r\n\r\nimport org.apache.hadoop.io.IntWritable;\r\nimport org.apache.hadoop.io.Text;\r\nimport org.apache.hadoop.mapreduce.Reducer;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class IntSumReducer\r\n        extends Reducer&lt;Text,IntWritable,Text,IntWritable&gt; {\r\n\r\n    private IntWritable result = new IntWritable();\r\n\r\n    public void reduce(Text key, Iterable&lt;IntWritable&gt; values,\r\n                       Context context\r\n    ) throws IOException, InterruptedException {\r\n        int sum = 0;\r\n        for (IntWritable val : values) {\r\n            System.out.println(&quot;value: &quot;+val.get());\r\n            sum += val.get();\r\n        }\r\n        System.out.println(&quot;--&gt; Sum = &quot;+sum);\r\n        result.set(sum);\r\n        context.write(key, result);\r\n    }\r\n}\r\n```\r\n\r\n**WordCount.java** :\r\n\r\n```\r\npackage tn.insat.tp1;\r\n\r\nimport org.apache.hadoop.conf.Configuration;\r\nimport org.apache.hadoop.fs.Path;\r\nimport org.apache.hadoop.io.IntWritable;\r\nimport org.apache.hadoop.io.Text;\r\nimport org.apache.hadoop.mapreduce.Job;\r\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\r\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\r\n\r\npublic class WordCount {\r\n    public static void main(String[] args) throws Exception {\r\n        Configuration conf = new Configuration();\r\n        Job job = Job.getInstance(conf, &quot;word count&quot;);\r\n        job.setJarByClass(WordCount.class);\r\n        job.setMapperClass(TokenizerMapper.class);\r\n        job.setCombinerClass(IntSumReducer.class);\r\n        job.setReducerClass(IntSumReducer.class);\r\n        job.setOutputKeyClass(Text.class);\r\n        job.setOutputValueClass(IntWritable.class);\r\n        FileInputFormat.addInputPath(job, new Path(args[0]));\r\n        FileOutputFormat.setOutputPath(job, new Path(args[1]));\r\n        System.exit(job.waitForCompletion(true) ? 0 : 1);}}\r\n```\r\n\r\n\r\nAny help would be very appreciated.\r\nThank you very much!\r\n","title":"Apache hadoop on intellij","body":"<p>this is my first time using java and hadoop. I am trying to run a wordcount program.\nI have made sure to install maven,hadoop(2.7.2), java 1.8 jdk. No error is shown in my code but when I try to run it I get this error :</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NullPointerException\nat java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1092)\nat java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1073)\nat org.apache.hadoop.util.Shell.runCommand(Shell.java:483)\nat org.apache.hadoop.util.Shell.run(Shell.java:456)\nat org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:722)\nat org.apache.hadoop.util.Shell.execCommand(Shell.java:815)\nat org.apache.hadoop.util.Shell.execCommand(Shell.java:798)\nat org.apache.hadoop.fs.RawLocalFileSystem.setPermission(RawLocalFileSystem.java:731)\nat org.apache.hadoop.fs.RawLocalFileSystem.mkOneDirWithMode(RawLocalFileSystem.java:489)\nat org.apache.hadoop.fs.RawLocalFileSystem.mkdirsWithOptionalPermission(RawLocalFileSystem.java:530)\nat org.apache.hadoop.fs.RawLocalFileSystem.mkdirs(RawLocalFileSystem.java:507)\nat org.apache.hadoop.fs.FilterFileSystem.mkdirs(FilterFileSystem.java:305)\nat org.apache.hadoop.mapreduce.JobSubmissionFiles.getStagingDir(JobSubmissionFiles.java:133)\nat org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:144)\nat org.apache.hadoop.mapreduce.Job$10.run(Job.java:1290)\nat org.apache.hadoop.mapreduce.Job$10.run(Job.java:1287)\nat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\nat java.base/javax.security.auth.Subject.doAs(Subject.java:533)\nat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1657)\nat org.apache.hadoop.mapreduce.Job.submit(Job.java:1287)\nat org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:1308)\nat tn.insat.tp1.WordCount.main(WordCount.java:23)\n</code></pre>\n<p>Here is layout of my different classes :\n<a href=\"https://i.stack.imgur.com/pnc9t.png\" rel=\"nofollow noreferrer\">Layout of different classes</a></p>\n<p><strong>pom.xml</strong> file :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;hadoop.mapreduce&lt;/groupId&gt;\n    &lt;artifactId&gt;wordcount&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n            &lt;artifactId&gt;hadoop-common&lt;/artifactId&gt;\n            &lt;version&gt;2.7.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-mapreduce-client-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n            &lt;artifactId&gt;hadoop-mapreduce-client-core&lt;/artifactId&gt;\n            &lt;version&gt;2.7.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-hdfs --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n            &lt;artifactId&gt;hadoop-hdfs&lt;/artifactId&gt;\n            &lt;version&gt;2.7.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n            &lt;artifactId&gt;hadoop-mapreduce-client-common&lt;/artifactId&gt;\n            &lt;version&gt;2.7.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n\n\n&lt;/project&gt;\n\n</code></pre>\n<p><strong>TokenizerMapper.java</strong> :</p>\n<pre><code>package tn.insat.tp1;\n\nimport org.apache.hadoop.io.IntWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Mapper;\n\nimport java.io.IOException;\nimport java.util.StringTokenizer;\n\npublic class TokenizerMapper\n        extends Mapper&lt;Object, Text, Text, IntWritable&gt;{\n\n    private final static IntWritable one = new IntWritable(1);\n    private Text word = new Text();\n\n    public void map(Object key, Text value, Mapper.Context context\n    ) throws IOException, InterruptedException {\n        StringTokenizer itr = new StringTokenizer(value.toString());\n        while (itr.hasMoreTokens()) {\n            word.set(itr.nextToken());\n            context.write(word, one);\n        }\n    }\n}\n\n</code></pre>\n<p><strong>IntSumReducer.java</strong> :</p>\n<pre><code>package tn.insat.tp1;\n\nimport org.apache.hadoop.io.IntWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Reducer;\n\nimport java.io.IOException;\n\npublic class IntSumReducer\n        extends Reducer&lt;Text,IntWritable,Text,IntWritable&gt; {\n\n    private IntWritable result = new IntWritable();\n\n    public void reduce(Text key, Iterable&lt;IntWritable&gt; values,\n                       Context context\n    ) throws IOException, InterruptedException {\n        int sum = 0;\n        for (IntWritable val : values) {\n            System.out.println(&quot;value: &quot;+val.get());\n            sum += val.get();\n        }\n        System.out.println(&quot;--&gt; Sum = &quot;+sum);\n        result.set(sum);\n        context.write(key, result);\n    }\n}\n</code></pre>\n<p><strong>WordCount.java</strong> :</p>\n<pre><code>package tn.insat.tp1;\n\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.IntWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\n\npublic class WordCount {\n    public static void main(String[] args) throws Exception {\n        Configuration conf = new Configuration();\n        Job job = Job.getInstance(conf, &quot;word count&quot;);\n        job.setJarByClass(WordCount.class);\n        job.setMapperClass(TokenizerMapper.class);\n        job.setCombinerClass(IntSumReducer.class);\n        job.setReducerClass(IntSumReducer.class);\n        job.setOutputKeyClass(Text.class);\n        job.setOutputValueClass(IntWritable.class);\n        FileInputFormat.addInputPath(job, new Path(args[0]));\n        FileOutputFormat.setOutputPath(job, new Path(args[1]));\n        System.exit(job.waitForCompletion(true) ? 0 : 1);}}\n</code></pre>\n<p>Any help would be very appreciated.\nThank you very much!</p>\n"},{"tags":["java","python","python-3.x","oop","polymorphism"],"comments":[{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":1,"creation_date":1586513932,"post_id":61138173,"comment_id":108159450,"body_markdown":"Your question is about method overloading. To me it has nothing to do with polymorphism (but maybe that concept is not strictly defined).","body":"Your question is about method overloading. To me it has nothing to do with polymorphism (but maybe that concept is not strictly defined)."},{"owner":{"account_id":6582356,"reputation":10292,"user_id":5086255,"display_name":"sahasrara62"},"score":2,"creation_date":1586514141,"post_id":61138173,"comment_id":108159542,"body_markdown":"why did you think polymorphism is universal defined in every language same way?","body":"why did you think polymorphism is universal defined in every language same way?"},{"owner":{"account_id":15958275,"reputation":5311,"user_id":11516012,"display_name":"h4z3"},"score":2,"creation_date":1586514384,"post_id":61138173,"comment_id":108159656,"body_markdown":"https://en.wikipedia.org/wiki/Polymorphism_(computer_science) Polymorphism = interfaces/inheritance in Java, multi-inheritance and duck-typing in Python. What you do is what Wiki called &quot;ad hoc polymorphism&quot;, and it&#39;s not usually called polymorphism at all - Wikipedia also says &quot;The term &quot;ad hoc&quot; in this context is not intended to be pejorative; it refers simply to the fact that this type of polymorphism is not a fundamental feature of the type system&quot; + &quot;In dynamically typed languages the situation can be more complex[...]&quot;","body":"<a href=\"https://en.wikipedia.org/wiki/Polymorphism_(computer_science)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Polymorphism_(computer_science)</a> Polymorphism = interfaces/inheritance in Java, multi-inheritance and duck-typing in Python. What you do is what Wiki called &quot;ad hoc polymorphism&quot;, and it&#39;s not usually called polymorphism at all - Wikipedia also says &quot;The term &quot;ad hoc&quot; in this context is not intended to be pejorative; it refers simply to the fact that this type of polymorphism is not a fundamental feature of the type system&quot; + &quot;In dynamically typed languages the situation can be more complex[...]&quot;"},{"owner":{"account_id":12570978,"reputation":1684,"user_id":9145082,"display_name":"Ravi"},"score":0,"creation_date":1586514777,"post_id":61138173,"comment_id":108159800,"body_markdown":"@sahasrara62, I got your point.","body":"@sahasrara62, I got your point."},{"owner":{"account_id":12570978,"reputation":1684,"user_id":9145082,"display_name":"Ravi"},"score":0,"creation_date":1586515417,"post_id":61138173,"comment_id":108160074,"body_markdown":"@Olivier, please see the article [here] (https://www.geeksforgeeks.org/polymorphism-in-java/). Polymophism can be demonstrated in two ways. 1. Method overloading, 2. Operator overloading.","body":"@Olivier, please see the article [here] (<a href=\"https://www.geeksforgeeks.org/polymorphism-in-java/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/polymorphism-in-java</a>). Polymophism can be demonstrated in two ways. 1. Method overloading, 2. Operator overloading."},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":1,"creation_date":1586515648,"post_id":61138173,"comment_id":108160189,"body_markdown":"Well as h4z3 pointed out, method overloading can be considered &quot;ad hoc polymorphism&quot;. But honestly that&#39;s not what people usually mean by &quot;polymorphism&quot;.","body":"Well as h4z3 pointed out, method overloading can be considered &quot;ad hoc polymorphism&quot;. But honestly that&#39;s not what people usually mean by &quot;polymorphism&quot;."},{"owner":{"account_id":6582356,"reputation":10292,"user_id":5086255,"display_name":"sahasrara62"},"score":0,"creation_date":1586515880,"post_id":61138173,"comment_id":108160279,"body_markdown":"in python you can do both overloadings at same time in a function as it is not strongly typed as java, so stop wasting your time comparing the polymori... in java and python and understand them individually, though the concept remains same","body":"in python you can do both overloadings at same time in a function as it is not strongly typed as java, so stop wasting your time comparing the polymori... in java and python and understand them individually, though the concept remains same"},{"owner":{"account_id":12570978,"reputation":1684,"user_id":9145082,"display_name":"Ravi"},"score":0,"creation_date":1586516383,"post_id":61138173,"comment_id":108160494,"body_markdown":"@sahasrara62, I don&#39;t think I&#39;m wasting my time. Trying to learn something. As programmers we have to deal with multiple progrmming languages. I have to do comparison of concepts between the languages.  If you say &quot;concept is same but approach and implementation is different&quot; and many agree that then it is a new learning for me. If go for interviews and if they ask questions like this then I should know some convincing point. Anyhow thanks for your answer.","body":"@sahasrara62, I don&#39;t think I&#39;m wasting my time. Trying to learn something. As programmers we have to deal with multiple progrmming languages. I have to do comparison of concepts between the languages.  If you say &quot;concept is same but approach and implementation is different&quot; and many agree that then it is a new learning for me. If go for interviews and if they ask questions like this then I should know some convincing point. Anyhow thanks for your answer."},{"owner":{"account_id":12570978,"reputation":1684,"user_id":9145082,"display_name":"Ravi"},"score":0,"creation_date":1586516667,"post_id":61138173,"comment_id":108160610,"body_markdown":"@h4z3, I think the wiki is very much informative. Thanks for sharing it.","body":"@h4z3, I think the wiki is very much informative. Thanks for sharing it."},{"owner":{"account_id":6582356,"reputation":10292,"user_id":5086255,"display_name":"sahasrara62"},"score":1,"creation_date":1586517024,"post_id":61138173,"comment_id":108160763,"body_markdown":"@RaviKumarB just focus on DSA , people in Bangalore dont care about language command","body":"@RaviKumarB just focus on DSA , people in Bangalore dont care about language command"},{"owner":{"account_id":12570978,"reputation":1684,"user_id":9145082,"display_name":"Ravi"},"score":0,"creation_date":1586517214,"post_id":61138173,"comment_id":108160835,"body_markdown":"@sahasrara62, yeah sure. Thanks again","body":"@sahasrara62, yeah sure. Thanks again"}],"answers":[{"tags":[],"owner":{"account_id":18076496,"reputation":201,"user_id":13139607,"display_name":"Snorik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586516594,"creation_date":1586514824,"answer_id":61138451,"question_id":61138173,"body_markdown":"The way I have always understood this:\r\n\r\nPolymorphism is a concept that basically says it looks like the same but does things differently, depending on context.\r\n\r\n1. if you have a method of the same name which has a different amount of arguments, this is method overloading.\r\n\r\n2. if you have a method of the same name with the same amount of arguments, but does a different thing depending on the class, this is method overriding.\r\n\r\nNote: I say amount of arguments, as for dynamically typed languages, the type does only matter at run time. For Java, for instance, it is not only the number of arguments, but also the type, of course.\r\n\r\nBoth are concrete ways to deal with polymorphism.\r\nIn detail, depending on the language you are using, the concept might be implemented and sometimes even interpreted differently.","title":"Polymorphism in Python VS Polymorphism in JAVA","body":"<p>The way I have always understood this:</p>\n\n<p>Polymorphism is a concept that basically says it looks like the same but does things differently, depending on context.</p>\n\n<ol>\n<li><p>if you have a method of the same name which has a different amount of arguments, this is method overloading.</p></li>\n<li><p>if you have a method of the same name with the same amount of arguments, but does a different thing depending on the class, this is method overriding.</p></li>\n</ol>\n\n<p>Note: I say amount of arguments, as for dynamically typed languages, the type does only matter at run time. For Java, for instance, it is not only the number of arguments, but also the type, of course.</p>\n\n<p>Both are concrete ways to deal with polymorphism.\nIn detail, depending on the language you are using, the concept might be implemented and sometimes even interpreted differently.</p>\n"},{"tags":[],"owner":{"account_id":18192138,"reputation":74,"user_id":13237815,"display_name":"epilif3sotnas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586524651,"creation_date":1586524651,"answer_id":61141111,"question_id":61138173,"body_markdown":"By what i understand in java even you have the same name of the method, you have different method, while in python when you have:\r\n\r\n    class TestPolymorphism:\r\n    def add(self,a,b):\r\n        return (a+b)\r\n    def add(self,a,b,c):\r\n        return (a+b+c)\r\nthe last add that you write override the last ones.\r\n\r\nIn conclusion, when you have add with different arguments the best option add(self, a,b,c==None, ..., n=None) and if...","title":"Polymorphism in Python VS Polymorphism in JAVA","body":"<p>By what i understand in java even you have the same name of the method, you have different method, while in python when you have:</p>\n\n<pre><code>class TestPolymorphism:\ndef add(self,a,b):\n    return (a+b)\ndef add(self,a,b,c):\n    return (a+b+c)\n</code></pre>\n\n<p>the last add that you write override the last ones.</p>\n\n<p>In conclusion, when you have add with different arguments the best option add(self, a,b,c==None, ..., n=None) and if...</p>\n"},{"tags":[],"owner":{"account_id":27073677,"reputation":11,"user_id":20623968,"display_name":"Matthew Chukwuelue"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1673048813,"creation_date":1672956051,"answer_id":75024809,"question_id":61138173,"body_markdown":"Well from my understanding of polymorphism, it means one thing in many forms, and that can be illustrated using user app interface.\r\nA python code could be implemented such that at runtime, a draw method could be used to change the user app interface from drop-down list to textbox. etc.\r\ndef draw(controls):\r\n    for control in controls:\r\nI hope you get the point.\r\n","title":"Polymorphism in Python VS Polymorphism in JAVA","body":"<p>Well from my understanding of polymorphism, it means one thing in many forms, and that can be illustrated using user app interface.\nA python code could be implemented such that at runtime, a draw method could be used to change the user app interface from drop-down list to textbox. etc.\ndef draw(controls):\nfor control in controls:\nI hope you get the point.</p>\n"}],"owner":{"account_id":12570978,"reputation":1684,"user_id":9145082,"display_name":"Ravi"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":964,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":3,"score":0,"last_activity_date":1673048813,"creation_date":1586513796,"question_id":61138173,"body_markdown":"I&#39;m trying to understand the polymorphism in python. Gone through lot of article but there is one doubt still there in my mind. When I compare with java it is little bit confusing for me in Python.\r\n\r\nAs per my knowledge polymorphism is &quot;one thing in many forms&quot;. Polymorphism can be demonstrated using operator overloading, and method overloading. Let&#39;s take method overloading as a means to demonstrate Polymorphism concept. In java we can write it without use of inheritance. See below code.\r\n\r\n     public class Main{\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.out.println(add(1,2));;\r\n    \t\tSystem.out.println(add(1,2,3));\r\n    \t}\r\n    \tpublic static int add(int a,int b){\r\n    \t    return a+b;\r\n    \t}\r\n    \tpublic static int add(int a,int b,int c){\r\n    \t    return a+b+c;\r\n    \t} \t\r\n    }\r\n\r\nPython code:\r\n\r\n    class TestPolymorphism:\r\n        def add(self,a,b):\r\n            return (a+b)\r\n        def add(self,a,b,c):\r\n            return (a+b+c)\r\n    \r\n    obj = TestPolymorphism()\r\n    print(obj.add(1,2)) #will get an error\r\n    print(obj.add(1,2,3))\r\n\r\nThe same method overloading works in java but not in python. Why there is difference?. If I want it to work then I have to change my python code as below:\r\n\r\n    class TestPolymorphism:\r\n        def add(self,a,b,c=None):\r\n            if c ==None:\r\n                sum  = a+b\r\n                return sum\r\n            else:\r\n                sum = a+b+c\r\n                return sum\r\n    \r\n    obj = TestPolymorphism()\r\n    print(obj.add(1,2))\r\n    print(obj.add(1,2,3))\r\n\r\nI&#39;m not getting convinced that above the code is an example of Polymorphism. There are article like [this][1] not giving me convincing point.\r\n\r\ncan anyone give me theory behind the polymorphism in python?\r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/polymorphism-in-python/","title":"Polymorphism in Python VS Polymorphism in JAVA","body":"<p>I'm trying to understand the polymorphism in python. Gone through lot of article but there is one doubt still there in my mind. When I compare with java it is little bit confusing for me in Python.</p>\n\n<p>As per my knowledge polymorphism is \"one thing in many forms\". Polymorphism can be demonstrated using operator overloading, and method overloading. Let's take method overloading as a means to demonstrate Polymorphism concept. In java we can write it without use of inheritance. See below code.</p>\n\n<pre><code> public class Main{\n    public static void main(String[] args) {\n        System.out.println(add(1,2));;\n        System.out.println(add(1,2,3));\n    }\n    public static int add(int a,int b){\n        return a+b;\n    }\n    public static int add(int a,int b,int c){\n        return a+b+c;\n    }   \n}\n</code></pre>\n\n<p>Python code:</p>\n\n<pre><code>class TestPolymorphism:\n    def add(self,a,b):\n        return (a+b)\n    def add(self,a,b,c):\n        return (a+b+c)\n\nobj = TestPolymorphism()\nprint(obj.add(1,2)) #will get an error\nprint(obj.add(1,2,3))\n</code></pre>\n\n<p>The same method overloading works in java but not in python. Why there is difference?. If I want it to work then I have to change my python code as below:</p>\n\n<pre><code>class TestPolymorphism:\n    def add(self,a,b,c=None):\n        if c ==None:\n            sum  = a+b\n            return sum\n        else:\n            sum = a+b+c\n            return sum\n\nobj = TestPolymorphism()\nprint(obj.add(1,2))\nprint(obj.add(1,2,3))\n</code></pre>\n\n<p>I'm not getting convinced that above the code is an example of Polymorphism. There are article like <a href=\"https://www.geeksforgeeks.org/polymorphism-in-python/\" rel=\"nofollow noreferrer\">this</a> not giving me convincing point.</p>\n\n<p>can anyone give me theory behind the polymorphism in python?</p>\n"},{"tags":["java","micronaut","micronaut-data"],"owner":{"account_id":3314513,"reputation":3779,"user_id":2787184,"accept_rate":65,"display_name":"2787184"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":207,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1673048790,"creation_date":1672650451,"question_id":74980575,"body_markdown":"With Micronaut version upgrade to 3.7.5/3.8.0 custom @Query in Repository with sql-IN clause not working when list is having single element. Below is the stack trace logs, this is still working in older version on micronaut:3.5.4 and micronaut-data-processor:3.4.3. \r\n\r\nStacktrace:\r\n\r\n    java.lang.ClassCastException: class java.lang.String cannot be cast to class java.util.Collection (java.lang.String and java.util.Collection are in module java.base of loader &#39;bootstrap&#39;)\r\n    \r\n    at io.micronaut.data.hibernate.operations.AbstractHibernateOperations$2.bindOne(AbstractHibernateOperations.java:403)\r\n    at io.micronaut.data.runtime.operations.internal.query.DefaultBindableParametersStoredQuery.bindParameter(DefaultBindableParametersStoredQuery.java:172)\r\n    at io.micronaut.data.runtime.operations.internal.query.DefaultBindableParametersStoredQuery.bindParameters(DefaultBindableParametersStoredQuery.java:84)\r\n    at io.micronaut.data.runtime.operations.internal.query.DefaultBindableParametersPreparedQuery.bindParameters(DefaultBindableParametersPreparedQuery.java:82)\r\n    at io.micronaut.data.runtime.operations.internal.query.BindableParametersPreparedQuery.bindParameters(BindableParametersPreparedQuery.java:51)\r\n    at io.micronaut.data.hibernate.operations.AbstractHibernateOperations.bindParameters(AbstractHibernateOperations.java:379)\r\n    at io.micronaut.data.hibernate.operations.AbstractHibernateOperations.bindPreparedQuery(AbstractHibernateOperations.java:431)\r\n    at io.micronaut.data.hibernate.operations.AbstractHibernateOperations.collectResults(AbstractHibernateOperations.java:364)\r\n    at io.micronaut.data.hibernate.operations.AbstractHibernateOperations.collectFindAll(AbstractHibernateOperations.java:306)\r\n    at io.micronaut.data.hibernate.operations.HibernateJpaOperations.lambda$findAll$7(HibernateJpaOperations.java:315)\r\n    at io.micronaut.transaction.support.AbstractSynchronousStateTransactionManager.execute(AbstractSynchronousStateTransactionManager.java:145)\r\n    at io.micronaut.transaction.support.AbstractSynchronousStateTransactionManager.executeRead(AbstractSynchronousStateTransactionManager.java:160)\r\n    at io.micronaut.transaction.support.AbstractSynchronousTransactionManager.executeRead(AbstractSynchronousTransactionManager.java:150)\r\n    at io.micronaut.data.hibernate.operations.HibernateJpaOperations.findAll(HibernateJpaOperations.java:313)\r\n    at io.micronaut.data.runtime.intercept.DefaultFindAllInterceptor.intercept(DefaultFindAllInterceptor.java:51)\r\n    at io.micronaut.data.runtime.intercept.DefaultFindAllInterceptor.intercept(DefaultFindAllInterceptor.java:35)\r\n\r\nRepository method\r\n\r\n    @Query(value = &quot;Select * from table a where a.status in (:statuses)&quot;, nativeQuery = true)\r\n    List&lt;Entity&gt; findByStatus(List&lt;String&gt; statuses);\r\n\r\n","title":"Micronaut-data-hibernate&lt;3.8.1&gt; : class java.lang.String cannot be cast to class java.util.Collection","body":"<p>With Micronaut version upgrade to 3.7.5/3.8.0 custom @Query in Repository with sql-IN clause not working when list is having single element. Below is the stack trace logs, this is still working in older version on micronaut:3.5.4 and micronaut-data-processor:3.4.3.</p>\n<p>Stacktrace:</p>\n<pre><code>java.lang.ClassCastException: class java.lang.String cannot be cast to class java.util.Collection (java.lang.String and java.util.Collection are in module java.base of loader 'bootstrap')\n\nat io.micronaut.data.hibernate.operations.AbstractHibernateOperations$2.bindOne(AbstractHibernateOperations.java:403)\nat io.micronaut.data.runtime.operations.internal.query.DefaultBindableParametersStoredQuery.bindParameter(DefaultBindableParametersStoredQuery.java:172)\nat io.micronaut.data.runtime.operations.internal.query.DefaultBindableParametersStoredQuery.bindParameters(DefaultBindableParametersStoredQuery.java:84)\nat io.micronaut.data.runtime.operations.internal.query.DefaultBindableParametersPreparedQuery.bindParameters(DefaultBindableParametersPreparedQuery.java:82)\nat io.micronaut.data.runtime.operations.internal.query.BindableParametersPreparedQuery.bindParameters(BindableParametersPreparedQuery.java:51)\nat io.micronaut.data.hibernate.operations.AbstractHibernateOperations.bindParameters(AbstractHibernateOperations.java:379)\nat io.micronaut.data.hibernate.operations.AbstractHibernateOperations.bindPreparedQuery(AbstractHibernateOperations.java:431)\nat io.micronaut.data.hibernate.operations.AbstractHibernateOperations.collectResults(AbstractHibernateOperations.java:364)\nat io.micronaut.data.hibernate.operations.AbstractHibernateOperations.collectFindAll(AbstractHibernateOperations.java:306)\nat io.micronaut.data.hibernate.operations.HibernateJpaOperations.lambda$findAll$7(HibernateJpaOperations.java:315)\nat io.micronaut.transaction.support.AbstractSynchronousStateTransactionManager.execute(AbstractSynchronousStateTransactionManager.java:145)\nat io.micronaut.transaction.support.AbstractSynchronousStateTransactionManager.executeRead(AbstractSynchronousStateTransactionManager.java:160)\nat io.micronaut.transaction.support.AbstractSynchronousTransactionManager.executeRead(AbstractSynchronousTransactionManager.java:150)\nat io.micronaut.data.hibernate.operations.HibernateJpaOperations.findAll(HibernateJpaOperations.java:313)\nat io.micronaut.data.runtime.intercept.DefaultFindAllInterceptor.intercept(DefaultFindAllInterceptor.java:51)\nat io.micronaut.data.runtime.intercept.DefaultFindAllInterceptor.intercept(DefaultFindAllInterceptor.java:35)\n</code></pre>\n<p>Repository method</p>\n<pre><code>@Query(value = &quot;Select * from table a where a.status in (:statuses)&quot;, nativeQuery = true)\nList&lt;Entity&gt; findByStatus(List&lt;String&gt; statuses);\n</code></pre>\n"},{"tags":["java","exception","assertion"],"answers":[{"tags":[],"owner":{"account_id":75307,"reputation":69271,"user_id":216063,"accept_rate":64,"display_name":"Gregory Pakosz"},"down_vote_count":0,"up_vote_count":188,"is_accepted":false,"score":188,"last_activity_date":1261649000,"creation_date":1261649000,"answer_id":1957656,"question_id":1957645,"body_markdown":"Out of my mind (list may be incomplete, and is too long to fit in a comment), I would say:\r\n\r\n - use exceptions when checking parameters passed to public or protected methods and constructors\r\n - use exceptions when interacting with the user or when you expect the client code to recover from an exceptional situation\r\n - use exceptions to address problems that might occur\r\n - use assertions when checking pre-conditions, post-conditions and invariants of private/internal code\r\n - use assertions to provide feedback to yourself or your developer team\r\n - use assertions when checking for things that are very unlikely to happen otherwise it means that there is a serious aw in your application\r\n - use assertions to state things that you (supposedly) know to be true\r\n\r\nIn other words, exceptions address the robustness of your application while assertions address its correctness.\r\n\r\nAssertions are designed to be cheap to write, you can use them almost everywhere and I&#39;m using this rule of thumb: the more an assertion statement looks stupid, the more valuable it is and the more information it embeds. When debugging a program that does not behave the right way, you will surely check the more obvious failure possibilities based on your experience. Then you will check for problems that just cannot happen: this is exactly when assertions help a lot and save time.","title":"When to use an assertion and when to use an exception","body":"<p>Out of my mind (list may be incomplete, and is too long to fit in a comment), I would say:</p>\n\n<ul>\n<li>use exceptions when checking parameters passed to public or protected methods and constructors</li>\n<li>use exceptions when interacting with the user or when you expect the client code to recover from an exceptional situation</li>\n<li>use exceptions to address problems that might occur</li>\n<li>use assertions when checking pre-conditions, post-conditions and invariants of private/internal code</li>\n<li>use assertions to provide feedback to yourself or your developer team</li>\n<li>use assertions when checking for things that are very unlikely to happen otherwise it means that there is a serious aw in your application</li>\n<li>use assertions to state things that you (supposedly) know to be true</li>\n</ul>\n\n<p>In other words, exceptions address the robustness of your application while assertions address its correctness.</p>\n\n<p>Assertions are designed to be cheap to write, you can use them almost everywhere and I'm using this rule of thumb: the more an assertion statement looks stupid, the more valuable it is and the more information it embeds. When debugging a program that does not behave the right way, you will surely check the more obvious failure possibilities based on your experience. Then you will check for problems that just cannot happen: this is exactly when assertions help a lot and save time.</p>\n"},{"tags":[],"owner":{"account_id":16660,"reputation":19988,"user_id":36537,"accept_rate":74,"display_name":"Phil H"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1261649053,"creation_date":1261649053,"answer_id":1957660,"question_id":1957645,"body_markdown":"Testing for null will only catch nulls causing problems, whereas a try/catch as you have it will catch *any* error.\r\n\r\nBroadly, try/catch is safer, but slightly slower, and you have to be careful that you catch all the kinds of error that may occur. So I would say use try/catch - one day the getGroup code may change, and you just might need that bigger net.","title":"When to use an assertion and when to use an exception","body":"<p>Testing for null will only catch nulls causing problems, whereas a try/catch as you have it will catch <em>any</em> error.</p>\n\n<p>Broadly, try/catch is safer, but slightly slower, and you have to be careful that you catch all the kinds of error that may occur. So I would say use try/catch - one day the getGroup code may change, and you just might need that bigger net.</p>\n"},{"tags":[],"owner":{"account_id":21712,"reputation":4129,"user_id":53009,"accept_rate":80,"display_name":"chburd"},"down_vote_count":1,"up_vote_count":31,"is_accepted":false,"score":30,"last_activity_date":1414980811,"creation_date":1261649089,"answer_id":1957661,"question_id":1957645,"body_markdown":"Remember assertions can be disabled at runtime using parameters, and [are disabled by default][1], so don&#39;t count on them except for debugging purposes.\r\n\r\nAlso you should read the [Oracle article about assert][2] to see more cases where to use - or not to use - assert.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/technotes/tools/windows/java.html\r\n  [2]: http://docs.oracle.com/javase/6/docs/technotes/guides/language/assert.html","title":"When to use an assertion and when to use an exception","body":"<p>Remember assertions can be disabled at runtime using parameters, and <a href=\"http://java.sun.com/javase/6/docs/technotes/tools/windows/java.html\" rel=\"noreferrer\">are disabled by default</a>, so don't count on them except for debugging purposes.</p>\n\n<p>Also you should read the <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/language/assert.html\" rel=\"noreferrer\">Oracle article about assert</a> to see more cases where to use - or not to use - assert.</p>\n"},{"tags":[],"owner":{"account_id":1191,"reputation":58105,"user_id":1585,"accept_rate":73,"display_name":"Marius"},"down_vote_count":16,"up_vote_count":107,"is_accepted":true,"score":91,"last_activity_date":1485263692,"creation_date":1261649113,"answer_id":1957662,"question_id":1957645,"body_markdown":"Assertions should be used to check something that should never happen, while an exception should be used to check something that might happen. \r\n\r\nFor example, a function might divide by 0, so an exception should be used, but an assertion could be used to check that the harddrive suddenly disappears. \r\n\r\nAn assertion would stop the program from running, but an exception would let the program continue running.\r\n\r\n\r\nNote that `if(group != null)` is not an assertion, that is just a conditional.","title":"When to use an assertion and when to use an exception","body":"<p>Assertions should be used to check something that should never happen, while an exception should be used to check something that might happen. </p>\n\n<p>For example, a function might divide by 0, so an exception should be used, but an assertion could be used to check that the harddrive suddenly disappears. </p>\n\n<p>An assertion would stop the program from running, but an exception would let the program continue running.</p>\n\n<p>Note that <code>if(group != null)</code> is not an assertion, that is just a conditional.</p>\n"},{"tags":[],"owner":{"account_id":52629,"reputation":11055,"user_id":157277,"accept_rate":78,"display_name":"rui"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1489142287,"creation_date":1261649190,"answer_id":1957673,"question_id":1957645,"body_markdown":"Well, back at Microsoft, the recommendation was to throw Exceptions in all APIs you make available publicly and use Asserts in all sorts of assumptions you make about code that&#39;s internal. It&#39;s a bit of a loose definition but I guess it&#39;s up to each developer to draw the line.\r\n\r\nRegarding the use of Exceptions, as the name says, their usage should be exceptional so for the code you present above, the `getGroup` call should return `null` if no service exists. Exception should only occur if a network link goes down or something like that.\r\n\r\nI guess the conclusion is that it&#39;s a bit left down to the development team for each application to define the boundaries of assert vs exceptions.","title":"When to use an assertion and when to use an exception","body":"<p>Well, back at Microsoft, the recommendation was to throw Exceptions in all APIs you make available publicly and use Asserts in all sorts of assumptions you make about code that's internal. It's a bit of a loose definition but I guess it's up to each developer to draw the line.</p>\n\n<p>Regarding the use of Exceptions, as the name says, their usage should be exceptional so for the code you present above, the <code>getGroup</code> call should return <code>null</code> if no service exists. Exception should only occur if a network link goes down or something like that.</p>\n\n<p>I guess the conclusion is that it's a bit left down to the development team for each application to define the boundaries of assert vs exceptions.</p>\n"},{"tags":[],"owner":{"account_id":7450,"reputation":269210,"user_id":12960,"display_name":"Brian Agnew"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1414980181,"creation_date":1261651296,"answer_id":1957811,"question_id":1957645,"body_markdown":"I confess I&#39;m a little confused by your question. When an assertion condition is not met, an exception is thrown. Confusingly this is called [AssertionError][1]. Note that it&#39;s unchecked, like (for example) [IllegalArgumentException][2] which is thrown in very similar circumstances.\r\n\r\nSo using assertions in Java\r\n\r\n 1. is a more concise means of writing a condition/throw block\r\n 2. permits you to turn these checks on/off via JVM parameters. Normally I would leave these checks on all the time, unless they impact runtime performance or have a similar penalty.\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/AssertionError.html\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/lang/IllegalArgumentException.html","title":"When to use an assertion and when to use an exception","body":"<p>I confess I'm a little confused by your question. When an assertion condition is not met, an exception is thrown. Confusingly this is called <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/AssertionError.html\" rel=\"nofollow noreferrer\">AssertionError</a>. Note that it's unchecked, like (for example) <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/IllegalArgumentException.html\" rel=\"nofollow noreferrer\">IllegalArgumentException</a> which is thrown in very similar circumstances.</p>\n\n<p>So using assertions in Java</p>\n\n<ol>\n<li>is a more concise means of writing a condition/throw block</li>\n<li>permits you to turn these checks on/off via JVM parameters. Normally I would leave these checks on all the time, unless they impact runtime performance or have a similar penalty.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1340009843,"creation_date":1261664742,"answer_id":1958506,"question_id":1957645,"body_markdown":"Unfortunately asserts can be disabled. When in production you need all the help you can get when tracking down something unforeseen, so asserts disqualify themselves. ","title":"When to use an assertion and when to use an exception","body":"<p>Unfortunately asserts can be disabled. When in production you need all the help you can get when tracking down something unforeseen, so asserts disqualify themselves. </p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1497522939,"creation_date":1261666254,"answer_id":1958582,"question_id":1957645,"body_markdown":"As a general rule:\r\n\r\n   - Use assertions for internal consistency checks where it doesn&#39;t matter at all if someone turns them off.  (Note that the `java` command turns off all assertions by default.)\r\n   - Use regular tests for any kind of checks what shouldn&#39;t be turned off.  This *includes* defensive checks that guard against potential damage cause by bugs, and any validation data / requests / whatever provided by users or external services.\r\n\r\n----------------\r\n\r\nThe following code from your question is bad style *and* potentially buggy\r\n\r\n    try {\r\n        group = service().getGroup(&quot;abc&quot;);\r\n    } catch (Exception e) {\r\n        //i dont log error because i know whenever error occur mean group not found\r\n    }\r\n\r\nThe problem is that you DON&#39;T know that an exception means that the group was not found.  It is also possible that the `service()` call threw an exception, or that it returned `null` which then caused a `NullPointerException`.\r\n\r\nWhen you catch an &quot;expected&quot; exception, you should catch *only* the exception that you are expecting. By catching `java.lang.Exception` (and especially by not logging it), you are making it harder to diagnose / debug the problem, and potentially allowing the app to do more damage.","title":"When to use an assertion and when to use an exception","body":"<p>As a general rule:</p>\n\n<ul>\n<li>Use assertions for internal consistency checks where it doesn't matter at all if someone turns them off.  (Note that the <code>java</code> command turns off all assertions by default.)</li>\n<li>Use regular tests for any kind of checks what shouldn't be turned off.  This <em>includes</em> defensive checks that guard against potential damage cause by bugs, and any validation data / requests / whatever provided by users or external services.</li>\n</ul>\n\n<hr>\n\n<p>The following code from your question is bad style <em>and</em> potentially buggy</p>\n\n<pre><code>try {\n    group = service().getGroup(\"abc\");\n} catch (Exception e) {\n    //i dont log error because i know whenever error occur mean group not found\n}\n</code></pre>\n\n<p>The problem is that you DON'T know that an exception means that the group was not found.  It is also possible that the <code>service()</code> call threw an exception, or that it returned <code>null</code> which then caused a <code>NullPointerException</code>.</p>\n\n<p>When you catch an \"expected\" exception, you should catch <em>only</em> the exception that you are expecting. By catching <code>java.lang.Exception</code> (and especially by not logging it), you are making it harder to diagnose / debug the problem, and potentially allowing the app to do more damage.</p>\n"},{"tags":[],"owner":{"account_id":1491309,"reputation":709,"user_id":1398333,"display_name":"SBTec"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1339407446,"creation_date":1339407446,"answer_id":10977600,"question_id":1957645,"body_markdown":"You can use this simple difference in mind while their usage. Exceptions will be used for checking expected and unexpected errors called checked and unchecked error while assertion is used mainly for debugging purposes at the run time to see whether the assumptions are validated or not. ","title":"When to use an assertion and when to use an exception","body":"<p>You can use this simple difference in mind while their usage. Exceptions will be used for checking expected and unexpected errors called checked and unchecked error while assertion is used mainly for debugging purposes at the run time to see whether the assumptions are validated or not. </p>\n"},{"tags":[],"owner":{"account_id":1648676,"reputation":9,"user_id":1519670,"display_name":"Phil"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1414980192,"creation_date":1342067744,"answer_id":11445071,"question_id":1957645,"body_markdown":"See section 6.1.2 (Assertions vs. other error code) of Sun&#39;s documentation at the following link. \r\n\r\nhttp://www.oracle.com/technetwork/articles/javase/javapch06.pdf\r\n\r\nThis document gives the best advice I&#39;ve seen on when to use assertions. Quoting from the document:\r\n\r\n&quot;A good rule of thumb is that you should use an assertion for exceptional cases that you would like to forget about. An assertion is the quickest way to deal with, and forget, a condition or state that you dont expect to have to deal with.&quot;\r\n","title":"When to use an assertion and when to use an exception","body":"<p>See section 6.1.2 (Assertions vs. other error code) of Sun's documentation at the following link. </p>\n\n<p><a href=\"http://www.oracle.com/technetwork/articles/javase/javapch06.pdf\" rel=\"nofollow\">http://www.oracle.com/technetwork/articles/javase/javapch06.pdf</a></p>\n\n<p>This document gives the best advice I've seen on when to use assertions. Quoting from the document:</p>\n\n<p>\"A good rule of thumb is that you should use an assertion for exceptional cases that you would like to forget about. An assertion is the quickest way to deal with, and forget, a condition or state that you dont expect to have to deal with.\"</p>\n"},{"tags":[],"owner":{"account_id":298767,"reputation":1026,"user_id":604964,"accept_rate":29,"display_name":"cesarsalgado"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1414980702,"creation_date":1350941463,"answer_id":13020213,"question_id":1957645,"body_markdown":"According to this doc http://docs.oracle.com/javase/6/docs/technotes/guides/language/assert.html#design-faq-general, &quot;The assert statement is appropriate for nonpublic precondition, postcondition and class invariant checking. Public precondition checking should still be performed by checks inside methods that result in particular, documented exceptions, such as IllegalArgumentException and IllegalStateException.&quot;\r\n\r\nIf you want to know more about precondition, postcondition and class invariant, check this doc: http://docs.oracle.com/javase/6/docs/technotes/guides/language/assert.html#usage-conditions. It also contains with examples of assertions usage.","title":"When to use an assertion and when to use an exception","body":"<p>According to this doc <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/language/assert.html#design-faq-general\" rel=\"nofollow\">http://docs.oracle.com/javase/6/docs/technotes/guides/language/assert.html#design-faq-general</a>, \"The assert statement is appropriate for nonpublic precondition, postcondition and class invariant checking. Public precondition checking should still be performed by checks inside methods that result in particular, documented exceptions, such as IllegalArgumentException and IllegalStateException.\"</p>\n\n<p>If you want to know more about precondition, postcondition and class invariant, check this doc: <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/language/assert.html#usage-conditions\" rel=\"nofollow\">http://docs.oracle.com/javase/6/docs/technotes/guides/language/assert.html#usage-conditions</a>. It also contains with examples of assertions usage.</p>\n"},{"tags":[],"owner":{"account_id":1911430,"reputation":2483,"user_id":1725151,"accept_rate":67,"display_name":"Guildenstern"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673048372,"creation_date":1673047713,"answer_id":75037016,"question_id":1957645,"body_markdown":"Im not experienced with Java asserts but I think the answer here naturally follows from what Java asserts _are_:\r\n\r\n1. Code that is only run if enabled\r\n2. Disabled by default\r\n\r\nThus we can surmise that assertions should never be used to implement application logic: it should only be used as optional (because of the on/off feature) sanity checks/explicit assumptions. The correctness of your app (modulo bugs!) cannot depend on a runtime flag which is turned off by default.\r\n\r\nSo only use assertions to check internal assumptions (your own code _only_, not things that are out of your control like user input). But on the other hand you might sometimes want to use _exceptions_ to check your assumptions; if you want to always check a certain assumption then you dont need the on/off feature that assertions provide.\r\n\r\nFor the task of checking assumptions, it seems that assertions excel when:\r\n\r\n1. The check might be costly so you want the option of disabling it\r\n2. Using if-or-throw would be too much noise but you can bear the cost of one little `assert &lt;expr&gt;`\r\n3. You want to leave a little comment which merely states something like:\r\n\r\n   ```\r\n   // NOTE we KNOW that `x` is not null!\r\n   x.doWork();\r\n   ```\r\n\r\n   Then [the Java folks][1] say that you should always replace that line with:\r\n\r\n   ```\r\n   assert x != null;\r\n   x.doWork();\r\n   ```\r\n\r\n   Or (in my opinion) if you prefer:\r\n\r\n   ```\r\n   if (x == null) {\r\n       throw new IllegalStateException(&quot;shouldnt be null&quot;);\r\n   }\r\n   x.doWork();\r\n   ```\r\n\r\n## Things that follow from these principles\r\n\r\nI think we can immediately expand on [related principles (sibling answer)][1] by using this optional principle (my gloss in cursive):\r\n\r\n- use exceptions when checking parameters passed to public or protected methods and constructors\r\n  - _Because you are checking things outside your code: code coming into your module_\r\n- use exceptions when interacting with the user or when you expect the client code to recover from an exceptional situation\r\n  - _Because the input is from the user and has nothing to do with your code. Also assertions are not really something you are supposed to recover from.(1)_\r\n- use exceptions to address problems that might occur\r\n  - _I.e. errors that happen as a matter of course: not bugs in your code_\r\n- use assertions when checking pre-conditions, post-conditions and invariants of private/internal code\r\n  - _Because its your own code: problems inside your own code are self-caused_\r\n- use assertions to provide feedback to yourself or your developer team\r\n  - _Bugs are for developers to deal with_\r\n- use assertions when checking for things that are very unlikely to happen otherwise it means that there is a serious aw in your application\r\n  - _Key word serious flaw in your application_\r\n- use assertions to state things that you (supposedly) know to be true\r\n  - _Checking assumptions_\r\n\r\n## Notes\r\n\r\n1. I think this is a general opinion. See [also][3] (my bold):\r\n\r\n   &gt; _Why is AssertionError a subclass of Error rather than RuntimeException?_  \r\n   &gt; This issue was controversial. The expert group discussed it at length, and came to the conclusion that Error was more appropriate **to discourage programmers from attempting to recover from assertion failures**.\r\n\r\n[1]: https://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html#Postconditions\r\n[2]: https://stackoverflow.com/a/1957656/1725151\r\n[3]: https://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html#design-faq","title":"When to use an assertion and when to use an exception","body":"<p>Im not experienced with Java asserts but I think the answer here naturally follows from what Java asserts <em>are</em>:</p>\n<ol>\n<li>Code that is only run if enabled</li>\n<li>Disabled by default</li>\n</ol>\n<p>Thus we can surmise that assertions should never be used to implement application logic: it should only be used as optional (because of the on/off feature) sanity checks/explicit assumptions. The correctness of your app (modulo bugs!) cannot depend on a runtime flag which is turned off by default.</p>\n<p>So only use assertions to check internal assumptions (your own code <em>only</em>, not things that are out of your control like user input). But on the other hand you might sometimes want to use <em>exceptions</em> to check your assumptions; if you want to always check a certain assumption then you dont need the on/off feature that assertions provide.</p>\n<p>For the task of checking assumptions, it seems that assertions excel when:</p>\n<ol>\n<li><p>The check might be costly so you want the option of disabling it</p>\n</li>\n<li><p>Using if-or-throw would be too much noise but you can bear the cost of one little <code>assert &lt;expr&gt;</code></p>\n</li>\n<li><p>You want to leave a little comment which merely states something like:</p>\n<pre><code>// NOTE we KNOW that `x` is not null!\nx.doWork();\n</code></pre>\n<p>Then <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html#Postconditions\" rel=\"nofollow noreferrer\">the Java folks</a> say that you should always replace that line with:</p>\n<pre><code>assert x != null;\nx.doWork();\n</code></pre>\n<p>Or (in my opinion) if you prefer:</p>\n<pre><code>if (x == null) {\n    throw new IllegalStateException(&quot;shouldnt be null&quot;);\n}\nx.doWork();\n</code></pre>\n</li>\n</ol>\n<h2>Things that follow from these principles</h2>\n<p>I think we can immediately expand on <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html#Postconditions\" rel=\"nofollow noreferrer\">related principles (sibling answer)</a> by using this optional principle (my gloss in cursive):</p>\n<ul>\n<li>use exceptions when checking parameters passed to public or protected methods and constructors\n<ul>\n<li><em>Because you are checking things outside your code: code coming into your module</em></li>\n</ul>\n</li>\n<li>use exceptions when interacting with the user or when you expect the client code to recover from an exceptional situation\n<ul>\n<li><em>Because the input is from the user and has nothing to do with your code. Also assertions are not really something you are supposed to recover from.(1)</em></li>\n</ul>\n</li>\n<li>use exceptions to address problems that might occur\n<ul>\n<li><em>I.e. errors that happen as a matter of course: not bugs in your code</em></li>\n</ul>\n</li>\n<li>use assertions when checking pre-conditions, post-conditions and invariants of private/internal code\n<ul>\n<li><em>Because its your own code: problems inside your own code are self-caused</em></li>\n</ul>\n</li>\n<li>use assertions to provide feedback to yourself or your developer team\n<ul>\n<li><em>Bugs are for developers to deal with</em></li>\n</ul>\n</li>\n<li>use assertions when checking for things that are very unlikely to happen otherwise it means that there is a serious aw in your application\n<ul>\n<li><em>Key word serious flaw in your application</em></li>\n</ul>\n</li>\n<li>use assertions to state things that you (supposedly) know to be true\n<ul>\n<li><em>Checking assumptions</em></li>\n</ul>\n</li>\n</ul>\n<h2>Notes</h2>\n<ol>\n<li><p>I think this is a general opinion. See <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html#design-faq\" rel=\"nofollow noreferrer\">also</a> (my bold):</p>\n<blockquote>\n<p><em>Why is AssertionError a subclass of Error rather than RuntimeException?</em><br />\nThis issue was controversial. The expert group discussed it at length, and came to the conclusion that Error was more appropriate <strong>to discourage programmers from attempting to recover from assertion failures</strong>.</p>\n</blockquote>\n</li>\n</ol>\n"}],"owner":{"account_id":38002,"reputation":35251,"user_id":108869,"accept_rate":83,"display_name":"cometta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54498,"favorite_count":0,"down_vote_count":1,"up_vote_count":134,"accepted_answer_id":1957662,"answer_count":12,"score":133,"last_activity_date":1673048372,"creation_date":1261648844,"question_id":1957645,"body_markdown":"Most of the time I will use an exception to check for a condition in my code, I wonder when it is an appropriate time to use an assertion?\r\n\r\nFor instance,\r\n\r\n    Group group=null;\r\n    try{\r\n        group = service().getGroup(&quot;abc&quot;);\r\n    }catch(Exception e){\r\n        //I dont log error because I know whenever error occur mean group not found\r\n    }\r\n    \r\n    if(group !=null)\r\n    {\r\n        //do something\r\n    }\r\n\r\nCould you indicate how an assertion fits in here? Should I use an assertion?\r\n\r\nIt seems like I never use assertions in production code and only see assertions in unit tests. I do know that in most cases, I can just use exception to do the checking like above, but I want to know appropriate way to do it &quot;professionally&quot;.","title":"When to use an assertion and when to use an exception","body":"<p>Most of the time I will use an exception to check for a condition in my code, I wonder when it is an appropriate time to use an assertion?</p>\n\n<p>For instance,</p>\n\n<pre><code>Group group=null;\ntry{\n    group = service().getGroup(\"abc\");\n}catch(Exception e){\n    //I dont log error because I know whenever error occur mean group not found\n}\n\nif(group !=null)\n{\n    //do something\n}\n</code></pre>\n\n<p>Could you indicate how an assertion fits in here? Should I use an assertion?</p>\n\n<p>It seems like I never use assertions in production code and only see assertions in unit tests. I do know that in most cases, I can just use exception to do the checking like above, but I want to know appropriate way to do it \"professionally\".</p>\n"},{"tags":["java","garbage-collection"],"answers":[{"tags":[],"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1488638839,"creation_date":1488638839,"answer_id":42597313,"question_id":42593061,"body_markdown":"`ParallelGCThreads` controls the parallelism of all stop-the-world GC phases, which should include parallel reference processing.\r\n\r\nIts default is calculated based on your current machine, you can see it via\r\n\r\n    java -XX:+Use????GC -XX:+PrintFlagsFinal | grep ParallelGCThreads\r\n\r\n(fill in the GC you&#39;re using, defaults may vary)\r\n\r\nNote that GC reference processing is not the same as finalization or `Cleaner` execution, which happens outside GC pauses.","title":"ParallelRefProcEnabled Default Number of Threads","body":"<p><code>ParallelGCThreads</code> controls the parallelism of all stop-the-world GC phases, which should include parallel reference processing.</p>\n\n<p>Its default is calculated based on your current machine, you can see it via</p>\n\n<pre><code>java -XX:+Use????GC -XX:+PrintFlagsFinal | grep ParallelGCThreads\n</code></pre>\n\n<p>(fill in the GC you're using, defaults may vary)</p>\n\n<p>Note that GC reference processing is not the same as finalization or <code>Cleaner</code> execution, which happens outside GC pauses.</p>\n"},{"tags":[],"owner":{"account_id":2760598,"reputation":538,"user_id":2377579,"display_name":"Erik Ostermueller"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673047817,"creation_date":1673047465,"answer_id":75037002,"question_id":42593061,"body_markdown":"The very first line of this Open JDK Release Note [1] says: \r\n\r\n&gt; By default, G1 now determines the optimal number of threads\r\n\r\nThe Release Note does not say how to change it.\r\nSo to answer your question, the default number of threads used is calculated by G1 at runtime.\r\n\r\nIt also says \r\n\r\n &gt; The change improves this phase of the garbage collection pause significantly on machines with more than one thread available for garbage collection.\r\n\r\n...although it does not say how it determines the count of available threads.\r\n\r\nLink [2] provides more specifics, and refers to this as &quot;dynamic number of thread\r\nsizing&quot; and this is also suggests that the dynamic allocation is sometimes limited to avoid slowdowns in previous implementations:\r\n\r\n&gt;  Threads are by default automatically limited by the functionality\r\nintroduced with JDK-8043575 to avoid actually being slower than before\r\nif using too many threads.\r\n\r\n[1]  https://bugs.openjdk.org/browse/JDK-8205328\r\n[2]  https://mail.openjdk.org/pipermail/hotspot-gc-dev/2018-June/022381.html","title":"ParallelRefProcEnabled Default Number of Threads","body":"<p>The very first line of this Open JDK Release Note [1] says:</p>\n<blockquote>\n<p>By default, G1 now determines the optimal number of threads</p>\n</blockquote>\n<p>The Release Note does not say how to change it.\nSo to answer your question, the default number of threads used is calculated by G1 at runtime.</p>\n<p>It also says</p>\n<blockquote>\n<p>The change improves this phase of the garbage collection pause significantly on machines with more than one thread available for garbage collection.</p>\n</blockquote>\n<p>...although it does not say how it determines the count of available threads.</p>\n<p>Link [2] provides more specifics, and refers to this as &quot;dynamic number of thread\nsizing&quot; and this is also suggests that the dynamic allocation is sometimes limited to avoid slowdowns in previous implementations:</p>\n<blockquote>\n<p>Threads are by default automatically limited by the functionality\nintroduced with JDK-8043575 to avoid actually being slower than before\nif using too many threads.</p>\n</blockquote>\n<p>[1]  <a href=\"https://bugs.openjdk.org/browse/JDK-8205328\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8205328</a>\n[2]  <a href=\"https://mail.openjdk.org/pipermail/hotspot-gc-dev/2018-June/022381.html\" rel=\"nofollow noreferrer\">https://mail.openjdk.org/pipermail/hotspot-gc-dev/2018-June/022381.html</a></p>\n"}],"owner":{"display_name":"user3778137"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4830,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":42597313,"answer_count":2,"score":3,"last_activity_date":1673047817,"creation_date":1488610071,"question_id":42593061,"body_markdown":"What are default number of threads the JVM assigns when the option    -XX:+ParallelRefProcEnabled    ? Is there a way we can control the number of threads that do reference processng? If yes, what is the parameter to do this?    ","title":"ParallelRefProcEnabled Default Number of Threads","body":"<p>What are default number of threads the JVM assigns when the option    -XX:+ParallelRefProcEnabled    ? Is there a way we can control the number of threads that do reference processng? If yes, what is the parameter to do this?    </p>\n"},{"tags":["java","apache-kafka","kafka-consumer-api"],"answers":[{"tags":[],"owner":{"account_id":14655333,"reputation":600,"user_id":10584061,"display_name":"ChristDist"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659574854,"creation_date":1659574854,"answer_id":73229284,"question_id":73221858,"body_markdown":"Not sure what are the special cases you are after, that you can include it in your note. Also, how long you want to shutdown your consumer in the runtime.\r\n\r\nIf you are using a **static membership**, the consumer group will not trigger rebalance unless\r\n\r\n- A new member joins\r\n- A leader re-joins (possibly due to topic assignment change)\r\n- An existing member offline time is over session timeout\r\n- Broker receives a leave group request containing a list of `group.instance.id`s\r\n\r\nWhen you set a consumer as static member, it will not send **leave group request** when they go offline (in your case shutdown for a special case), which means we shall only rely on **session.timeout** to trigger group rebalance. Therefore, it is also advised to make the session timeout large enough so that broker side will not trigger rebalance too frequently due to member come and go. \r\n\r\nI believe, close() will become obsolete here.\r\n\r\nAlso, it is important how we are handling the runtime exception scenarios (socket timeout, elapse of max.poll.interval, broker leader unavailability etc) irrespective of static or dynamic memberships, and when a consumer reaching the state of final block.\r\n\r\n    finally\r\n    {\r\n      consumer.close();\r\n    }","title":"Gracefully shutting down Kafka Consumer with static membership","body":"<p>Not sure what are the special cases you are after, that you can include it in your note. Also, how long you want to shutdown your consumer in the runtime.</p>\n<p>If you are using a <strong>static membership</strong>, the consumer group will not trigger rebalance unless</p>\n<ul>\n<li>A new member joins</li>\n<li>A leader re-joins (possibly due to topic assignment change)</li>\n<li>An existing member offline time is over session timeout</li>\n<li>Broker receives a leave group request containing a list of <code>group.instance.id</code>s</li>\n</ul>\n<p>When you set a consumer as static member, it will not send <strong>leave group request</strong> when they go offline (in your case shutdown for a special case), which means we shall only rely on <strong>session.timeout</strong> to trigger group rebalance. Therefore, it is also advised to make the session timeout large enough so that broker side will not trigger rebalance too frequently due to member come and go.</p>\n<p>I believe, close() will become obsolete here.</p>\n<p>Also, it is important how we are handling the runtime exception scenarios (socket timeout, elapse of max.poll.interval, broker leader unavailability etc) irrespective of static or dynamic memberships, and when a consumer reaching the state of final block.</p>\n<pre><code>finally\n{\n  consumer.close();\n}\n</code></pre>\n"}],"owner":{"account_id":4993259,"reputation":814,"user_id":4014778,"accept_rate":75,"display_name":"Lucian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1005,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1673047795,"creation_date":1659530186,"question_id":73221858,"body_markdown":"Given a Kafka Consumer **with a static membership**, what would be the best practice to gracefully shut it down?\r\n\r\nFrom Kafka - the definitive guide: By calling .close()\r\n\r\n&gt; Always close() the consumer before exiting. This will close the\r\n&gt; network connections and sockets. **It will also trigger a rebalance**\r\n&gt; immediately rather than wait for the group coordinator to discover\r\n&gt; that the consumer stopped sending heartbeats and is likely dead, which\r\n&gt; will take longer and therefore result in a longer period of time in\r\n&gt; which consumers cant consume messages from a subset of the\r\n&gt; partitions.\r\n\r\nSo if a static membership is used, close() is not what we really want. Maybe a tweaked version if it to close the network sockets but not causing a rebalance?\r\n\r\nAnother thing to note is that the unsubscribe is not causing a rebalance.\r\n\r\nI am really wondering how others imagine the shutdown mechanism in this special case.\r\n","title":"Gracefully shutting down Kafka Consumer with static membership","body":"<p>Given a Kafka Consumer <strong>with a static membership</strong>, what would be the best practice to gracefully shut it down?</p>\n<p>From Kafka - the definitive guide: By calling .close()</p>\n<blockquote>\n<p>Always close() the consumer before exiting. This will close the\nnetwork connections and sockets. <strong>It will also trigger a rebalance</strong>\nimmediately rather than wait for the group coordinator to discover\nthat the consumer stopped sending heartbeats and is likely dead, which\nwill take longer and therefore result in a longer period of time in\nwhich consumers cant consume messages from a subset of the\npartitions.</p>\n</blockquote>\n<p>So if a static membership is used, close() is not what we really want. Maybe a tweaked version if it to close the network sockets but not causing a rebalance?</p>\n<p>Another thing to note is that the unsubscribe is not causing a rebalance.</p>\n<p>I am really wondering how others imagine the shutdown mechanism in this special case.</p>\n"},{"tags":["java","ios","swift","amazon-web-services","amazon-s3"],"comments":[{"owner":{"account_id":408706,"reputation":19450,"user_id":779527,"accept_rate":88,"display_name":"Scriptable"},"score":1,"creation_date":1536848658,"post_id":52315564,"comment_id":91578978,"body_markdown":"The code shown above is either part of a third party library or custom code. It is not part of Java and there is no built in support for AWS in Swift either. What you are probably looking for is the [AWS iOS SDK](https://github.com/aws/aws-sdk-ios) which you can import into your project and use.","body":"The code shown above is either part of a third party library or custom code. It is not part of Java and there is no built in support for AWS in Swift either. What you are probably looking for is the <a href=\"https://github.com/aws/aws-sdk-ios\" rel=\"nofollow noreferrer\">AWS iOS SDK</a> which you can import into your project and use."},{"owner":{"account_id":14306842,"reputation":51,"user_id":10334478,"display_name":"Micheal Powers"},"score":0,"creation_date":1536870133,"post_id":52315564,"comment_id":91590054,"body_markdown":"This code is from the AWS website so I know this is not custom code. So I am still asking the question I have obviously looked on the AWS Website and have the SDK other wise i wouldn&#39;t be able to use AWS properly with my app","body":"This code is from the AWS website so I know this is not custom code. So I am still asking the question I have obviously looked on the AWS Website and have the SDK other wise i wouldn&#39;t be able to use AWS properly with my app"}],"answers":[{"tags":[],"owner":{"account_id":6521641,"reputation":847,"user_id":5045692,"display_name":"Rohan Dubal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673047548,"creation_date":1536956608,"answer_id":52338814,"question_id":52315564,"body_markdown":"You can use the `AWSS3` client from AWSiOSSDKv2 here: https://github.com/aws/aws-sdk-ios\r\n\r\nThe request which you are looking for is this: https://github.com/aws/aws-sdk-ios/blob/master/AWSS3/AWSS3Model.h#L6618 and can be used be invoked via this API: https://github.com/aws/aws-sdk-ios/blob/master/AWSS3/AWSS3Service.h#L1994\r\n","title":"Are there Low level Swift classes to upload files in AWS S3","body":"<p>You can use the <code>AWSS3</code> client from AWSiOSSDKv2 here: <a href=\"https://github.com/aws/aws-sdk-ios\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-sdk-ios</a></p>\n<p>The request which you are looking for is this: <a href=\"https://github.com/aws/aws-sdk-ios/blob/master/AWSS3/AWSS3Model.h#L6618\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-sdk-ios/blob/master/AWSS3/AWSS3Model.h#L6618</a> and can be used be invoked via this API: <a href=\"https://github.com/aws/aws-sdk-ios/blob/master/AWSS3/AWSS3Service.h#L1994\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-sdk-ios/blob/master/AWSS3/AWSS3Service.h#L1994</a></p>\n"}],"owner":{"account_id":14306842,"reputation":51,"user_id":10334478,"display_name":"Micheal Powers"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673047548,"creation_date":1536847746,"question_id":52315564,"body_markdown":"Here is the same code in Java was wondering if they have a swift equivalent, which\r\nallows you to break up files into parts:\r\n    \r\n            \r\n\r\nlong partSize = 5 * 1024 * 1024; \r\n    \r\n            try {\r\n                AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\r\n                                        .withRegion(clientRegion)\r\n                                        .withCredentials(new ProfileCredentialsProvider())\r\n                                        .build();\r\n                           \r\n                List&lt;PartETag&gt; partETags = new ArrayList&lt;PartETag&gt;();\r\n    \r\n                \r\n                InitiateMultipartUploadRequest initRequest = new InitiateMultipartUploadRequest(bucketName, keyName);\r\n                InitiateMultipartUploadResult initResponse = s3Client.initiateMultipartUpload(initRequest);\r\n    \r\n                long filePosition = 0;\r\n                for (int i = 1; filePosition &lt; contentLength; i++) {\r\n                    partSize = Math.min(partSize, (contentLength - filePosition));\r\n    \r\n                 \r\n                    UploadPartRequest uploadRequest = new UploadPartRequest()\r\n                            .withBucketName(bucketName)\r\n                            .withKey(keyName)\r\n                            .withUploadId(initResponse.getUploadId())\r\n                            .withPartNumber(i)\r\n                            .withFileOffset(filePosition)\r\n                            .withFile(file)\r\n                            .withPartSize(partSize);\r\n    \r\n                    UploadPartResult uploadResult = s3Client.uploadPart(uploadRequest);\r\n                    partETags.add(uploadResult.getPartETag());\r\n    \r\n                    filePosition += partSize;\r\n                }\r\n    \r\n                \r\n                CompleteMultipartUploadRequest compRequest = new CompleteMultipartUploadRequest(bucketName, keyName,\r\n                        initResponse.getUploadId(), partETags);\r\n                s3Client.completeMultipartUpload(compRequest);\r\n            }","title":"Are there Low level Swift classes to upload files in AWS S3","body":"<p>Here is the same code in Java was wondering if they have a swift equivalent, which\nallows you to break up files into parts:</p>\n\n<p>long partSize = 5 * 1024 * 1024; </p>\n\n<pre><code>        try {\n            AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\n                                    .withRegion(clientRegion)\n                                    .withCredentials(new ProfileCredentialsProvider())\n                                    .build();\n\n            List&lt;PartETag&gt; partETags = new ArrayList&lt;PartETag&gt;();\n\n\n            InitiateMultipartUploadRequest initRequest = new InitiateMultipartUploadRequest(bucketName, keyName);\n            InitiateMultipartUploadResult initResponse = s3Client.initiateMultipartUpload(initRequest);\n\n            long filePosition = 0;\n            for (int i = 1; filePosition &lt; contentLength; i++) {\n                partSize = Math.min(partSize, (contentLength - filePosition));\n\n\n                UploadPartRequest uploadRequest = new UploadPartRequest()\n                        .withBucketName(bucketName)\n                        .withKey(keyName)\n                        .withUploadId(initResponse.getUploadId())\n                        .withPartNumber(i)\n                        .withFileOffset(filePosition)\n                        .withFile(file)\n                        .withPartSize(partSize);\n\n                UploadPartResult uploadResult = s3Client.uploadPart(uploadRequest);\n                partETags.add(uploadResult.getPartETag());\n\n                filePosition += partSize;\n            }\n\n\n            CompleteMultipartUploadRequest compRequest = new CompleteMultipartUploadRequest(bucketName, keyName,\n                    initResponse.getUploadId(), partETags);\n            s3Client.completeMultipartUpload(compRequest);\n        }\n</code></pre>\n"},{"tags":["java","compression","byte","huffman-code","extended-ascii"],"comments":[{"owner":{"account_id":535619,"reputation":3374,"user_id":905033,"display_name":"Lew Bloch"},"score":0,"creation_date":1488224132,"post_id":42493948,"comment_id":72127716,"body_markdown":"There&#39;s nothing &quot;special&quot; about characters that are encoded into more than one byte. In fact, there are far more characters that occupy two or more bytes in UTF-8 than occupy one byte. Regardless, if the compression decompresses back to the same byte sequence as it started, it won&#39;t matter how &quot;special&quot; your characters are. Your masking should have worked.","body":"There&#39;s nothing &quot;special&quot; about characters that are encoded into more than one byte. In fact, there are far more characters that occupy two or more bytes in UTF-8 than occupy one byte. Regardless, if the compression decompresses back to the same byte sequence as it started, it won&#39;t matter how &quot;special&quot; your characters are. Your masking should have worked."},{"owner":{"account_id":5677414,"reputation":725,"user_id":4490045,"accept_rate":86,"display_name":"Schytheron"},"score":0,"creation_date":1488225627,"post_id":42493948,"comment_id":72128576,"body_markdown":"But if a character is split into 2 or more bytes when reading it into the byte array, how will I then be able to decompress it correctly since I can&#39;t possibly know that these 2 random bytes in my array actually represent a specific character. The way I see it is that these two bytes now represent 2 completely different characters. For example: If I take the character &quot;&#246;&quot; and read it in my file it will now be represented by 2 different values (191 and 182 or something like that) when its actual ASCII table value is 148. 191 and 182 represent some other completely different characters in ASCII.","body":"But if a character is split into 2 or more bytes when reading it into the byte array, how will I then be able to decompress it correctly since I can&#39;t possibly know that these 2 random bytes in my array actually represent a specific character. The way I see it is that these two bytes now represent 2 completely different characters. For example: If I take the character &quot;&#246;&quot; and read it in my file it will now be represented by 2 different values (191 and 182 or something like that) when its actual ASCII table value is 148. 191 and 182 represent some other completely different characters in ASCII."},{"owner":{"account_id":535619,"reputation":3374,"user_id":905033,"display_name":"Lew Bloch"},"score":1,"creation_date":1488226005,"post_id":42493948,"comment_id":72128773,"body_markdown":"Decompression of a byte stream should create the original byte stream regardless of semantics. Otherwise it wouldn&#39;t work on images or binary files. Forget about characters. Focus on compressing the byte stream. Leave interpretation of contents to processes over the uncompressed stream.","body":"Decompression of a byte stream should create the original byte stream regardless of semantics. Otherwise it wouldn&#39;t work on images or binary files. Forget about characters. Focus on compressing the byte stream. Leave interpretation of contents to processes over the uncompressed stream."},{"owner":{"account_id":5677414,"reputation":725,"user_id":4490045,"accept_rate":86,"display_name":"Schytheron"},"score":1,"creation_date":1488229408,"post_id":42493948,"comment_id":72130636,"body_markdown":"@LewBloch Would you recommend to keep using the int array and using  an &quot;unsigned&quot; byte as index as I currently do or to make a HashMap that uses the bytes as a key. Would I run into any issues by using a HashMap?","body":"@LewBloch Would you recommend to keep using the int array and using  an &quot;unsigned&quot; byte as index as I currently do or to make a HashMap that uses the bytes as a key. Would I run into any issues by using a HashMap?"},{"owner":{"account_id":2567288,"reputation":20405,"user_id":2226988,"display_name":"Tom Blodget"},"score":0,"creation_date":1488233861,"post_id":42493948,"comment_id":72132848,"body_markdown":"If you are reading bytes, you aren&#39;t dealing with the data as textwhich is good because it very well might not be text. Stick with the byte values.","body":"If you are reading bytes, you aren&#39;t dealing with the data as textwhich is good because it very well might not be text. Stick with the byte values."}],"answers":[{"tags":[],"owner":{"account_id":2056278,"reputation":23340,"user_id":1833961,"accept_rate":54,"display_name":"bvdb"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673047381,"creation_date":1673046938,"answer_id":75036959,"question_id":42493948,"body_markdown":"#### Encodings matter\r\n\r\n&gt; If I take the character &quot;&#246;&quot; and read it in my file it will now be\r\n&gt; represented by 2 different values (191 and 182 or something like that)\r\n&gt; when its actual ASCII table value is 148.\r\n\r\nThat really depends, which kind of encoding was used to create your text file. Encodings determine how text messages are stored.\r\n\r\n - In UTF-8 the &#246; is stored as hex `[0xc3, 0xb6]` or `[195, 182]`\r\n - In ISO/IEC 8859-1 (= &quot;Latin-1&quot;) it would be stored as hex `[0xf6]`, or `[246]`\r\n - In Mac OS Central European, it would be hex `[0x9a]` or `[154]`\r\n\r\nPlease note, that the basic ASCII table itself doesn&#39;t really describe anything for that kind of character. ASCII only uses 7 bits, and by doing so only maps 128 codes.\r\n\r\n[![ASCII table][1]][1]\r\n\r\nPart of the problem is that in layman&#39;s terms, &quot;ASCII&quot; is sometimes used to describe extensions of ASCII as well, (e.g. like Latin-1)\r\n\r\n---\r\n\r\n#### History\r\n\r\nThere&#39;s actually a bit of history behind that. Originally ASCII was a very limited set of characters. When those weren&#39;t enough, each region started using the 8th bit to add their language-specific characters. Leading to all kind of compatibility issues.\r\n\r\nThen there was some kind of consortium that made an inventory of all characters in all possible languages (and beyond). That set is called &quot;unicode&quot;. It contains not just 128 or 256 characters, but thousands of them. \r\n\r\nFrom that point on you would need more advanced encodings to cover them. UTF-8 is one of those encodings that covers that entire unicode set, and it does so while being kind-of backwards compatible with ASCII.\r\n\r\nEach ASCII character is still mapped in the same way, but when 1-byte isn&#39;t enough, it will use the 8th bit to indicate that a 2nd byte will follow, which is the case for the `&#246;` character.\r\n\r\n---\r\n\r\n#### Tools\r\n\r\nIf you&#39;re using a more advanced text editor like Notepad++, then you can select your encoding from the drop-down menu.\r\n\r\n[![Notepad++][2]][2]\r\n\r\n---\r\n\r\n#### In programming\r\n\r\nHaving said that, your current java source reads bytes, it&#39;s not reading characters. And I would think that it&#39;s a plus when it works on byte-level, because then it can support all encodings. Maybe you don&#39;t need to work on character level at all.\r\n\r\nHowever, if it does matter for your specific algorithm. Let&#39;s say you&#39;ve written an algorithm that is only supposed to handle Latin-1 encoding. So, then it&#39;s really going to work on &quot;character-level&quot; and not on &quot;byte-level&quot;. In that case, consider reading directly to `String` or `char[]`. \r\n\r\nJava can do the heavy-lifting for you in that case. There are readers in java that will let you read a text-file directly to Strings/char[]. However, in those cases you should of course specify an encoding when you use them. Internally a single java character can contain up to 2 bytes of data.\r\n\r\nTrying to convert bytes to characters manually is a tricky business. Unless you&#39;re working with plain old ASCII of course. The moment you see a value above 0x7F (127), (which are presented by negative values in `byte`) you&#39;re no longer working with simple ASCII. Then consider using something like: `new String(bytes, StandardCharsets.UTF_8)`. There&#39;s no need to write a decoding algorithm from scratch.\r\n\r\n  [1]: https://i.stack.imgur.com/hjiO2.png\r\n  [2]: https://i.stack.imgur.com/D6NIE.png","title":"Java - How to handle special characters when compressing bytes (Huffman encoding)?","body":"<h4>Encodings matter</h4>\n<blockquote>\n<p>If I take the character &quot;&quot; and read it in my file it will now be\nrepresented by 2 different values (191 and 182 or something like that)\nwhen its actual ASCII table value is 148.</p>\n</blockquote>\n<p>That really depends, which kind of encoding was used to create your text file. Encodings determine how text messages are stored.</p>\n<ul>\n<li>In UTF-8 the  is stored as hex <code>[0xc3, 0xb6]</code> or <code>[195, 182]</code></li>\n<li>In ISO/IEC 8859-1 (= &quot;Latin-1&quot;) it would be stored as hex <code>[0xf6]</code>, or <code>[246]</code></li>\n<li>In Mac OS Central European, it would be hex <code>[0x9a]</code> or <code>[154]</code></li>\n</ul>\n<p>Please note, that the basic ASCII table itself doesn't really describe anything for that kind of character. ASCII only uses 7 bits, and by doing so only maps 128 codes.</p>\n<p><a href=\"https://i.stack.imgur.com/hjiO2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hjiO2.png\" alt=\"ASCII table\" /></a></p>\n<p>Part of the problem is that in layman's terms, &quot;ASCII&quot; is sometimes used to describe extensions of ASCII as well, (e.g. like Latin-1)</p>\n<hr />\n<h4>History</h4>\n<p>There's actually a bit of history behind that. Originally ASCII was a very limited set of characters. When those weren't enough, each region started using the 8th bit to add their language-specific characters. Leading to all kind of compatibility issues.</p>\n<p>Then there was some kind of consortium that made an inventory of all characters in all possible languages (and beyond). That set is called &quot;unicode&quot;. It contains not just 128 or 256 characters, but thousands of them.</p>\n<p>From that point on you would need more advanced encodings to cover them. UTF-8 is one of those encodings that covers that entire unicode set, and it does so while being kind-of backwards compatible with ASCII.</p>\n<p>Each ASCII character is still mapped in the same way, but when 1-byte isn't enough, it will use the 8th bit to indicate that a 2nd byte will follow, which is the case for the <code></code> character.</p>\n<hr />\n<h4>Tools</h4>\n<p>If you're using a more advanced text editor like Notepad++, then you can select your encoding from the drop-down menu.</p>\n<p><a href=\"https://i.stack.imgur.com/D6NIE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/D6NIE.png\" alt=\"Notepad++\" /></a></p>\n<hr />\n<h4>In programming</h4>\n<p>Having said that, your current java source reads bytes, it's not reading characters. And I would think that it's a plus when it works on byte-level, because then it can support all encodings. Maybe you don't need to work on character level at all.</p>\n<p>However, if it does matter for your specific algorithm. Let's say you've written an algorithm that is only supposed to handle Latin-1 encoding. So, then it's really going to work on &quot;character-level&quot; and not on &quot;byte-level&quot;. In that case, consider reading directly to <code>String</code> or <code>char[]</code>.</p>\n<p>Java can do the heavy-lifting for you in that case. There are readers in java that will let you read a text-file directly to Strings/char[]. However, in those cases you should of course specify an encoding when you use them. Internally a single java character can contain up to 2 bytes of data.</p>\n<p>Trying to convert bytes to characters manually is a tricky business. Unless you're working with plain old ASCII of course. The moment you see a value above 0x7F (127), (which are presented by negative values in <code>byte</code>) you're no longer working with simple ASCII. Then consider using something like: <code>new String(bytes, StandardCharsets.UTF_8)</code>. There's no need to write a decoding algorithm from scratch.</p>\n"}],"owner":{"account_id":5677414,"reputation":725,"user_id":4490045,"accept_rate":86,"display_name":"Schytheron"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":993,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":75036959,"answer_count":1,"score":5,"last_activity_date":1673047381,"creation_date":1488222887,"question_id":42493948,"body_markdown":"I am writing a Huffman Compression/Decompression program. I have started writing my compression method and I am stuck. I am trying to read all bytes in the file and then put all of the bytes into a byte array. After putting all bytes into the byte array I create an `int[]` array that will store all the frequencies of each byte (with the index being the ASCII code). \r\n\r\nIt does include the extended ASCII table since the size of the `int` array is 256. However I encounter issues as soon as I read a special character in my file (AKA characters with a higher ASCII value than 127). I understand that a byte is signed and will wrap around to a negative value as soon as it crosses the 127 number limit (and an array index obviously cant be negative) so I tried to counter this by turning it into a signed value when I specify my index for the array (`array[myByte&amp;0xFF]`). \r\n\r\nThis kind of worked but it gave me the wrong ASCII value (for example if the correct ASCII value for the character is 134 I instead got 191 or something). The even more annoying part is that I noticed that special characters are split into 2 separate bytes, which I feel will cause problems later (for example when I try to decompress). \r\n\r\nHow do I make my program compatible with every single type of character (this program is supposed to be able to compress/decompress pictures, mp3&#39;s etc).\r\n\r\nMaybe I am taking the wrong approach to this, but I don&#39;t know what the right approach is. Please give me some tips for structuring this.\r\n\r\nTree:\r\n\r\n    package CompPck;\r\n    \r\n    import java.util.TreeMap;\r\n    \r\n    abstract class Tree implements Comparable&lt;Tree&gt; {\r\n        public final int frequency; // the frequency of this tree\r\n        public Tree(int freq) { frequency = freq; }\r\n     \r\n        // compares on the frequency\r\n        public int compareTo(Tree tree) {\r\n            return frequency - tree.frequency;\r\n        }\r\n    }\r\n     \r\n    class Leaf extends Tree {\r\n        public final int value; // the character this leaf represents\r\n     \r\n        public Leaf(int freq, int val) {\r\n            super(freq);\r\n            value = val;\r\n        }\r\n    }\r\n     \r\n    class Node extends Tree {\r\n        public final Tree left, right; // subtrees\r\n     \r\n        public Node(Tree l, Tree r) {\r\n            super(l.frequency + r.frequency);\r\n            left = l;\r\n            right = r;\r\n        }\r\n    }\r\n     \r\nBuild tree method:\r\n\r\n    public static Tree buildTree(int[] charFreqs) {\r\n            PriorityQueue&lt;Tree&gt; trees = new PriorityQueue&lt;Tree&gt;();\r\n            \r\n            for (int i = 0; i &lt; charFreqs.length; i++){\r\n                if (charFreqs[i] &gt; 0){\r\n                \ttrees.offer(new Leaf(charFreqs[i], i));\r\n                }\r\n            }\r\n     \r\n            //assert trees.size() &gt; 0;\r\n            \r\n            while (trees.size() &gt; 1) {\r\n                Tree a = trees.poll();\r\n                Tree b = trees.poll();\r\n     \r\n                trees.offer(new Node(a, b));\r\n            }\r\n            return trees.poll();\r\n        }\r\n\r\nCompression method:\r\n\r\n    public static void compress(File file){\r\n        \ttry {\r\n        \t\tPath path = Paths.get(file.getAbsolutePath());\r\n        \t    byte[] content = Files.readAllBytes(path);\r\n            \tTreeMap&lt;Integer, String&gt; treeMap = new TreeMap&lt;Integer, String&gt;();\r\n            \tFile nF = new File(file.getName() + &quot;_comp&quot;);\r\n            \tnF.createNewFile();\r\n            \tBitFileWriter bfw = new BitFileWriter(nF);\r\n            \t\r\n                int[] charFreqs = new int[256];\r\n                \r\n                // read each byte and record the frequencies\r\n                for (byte b : content){\r\n                \tcharFreqs[b&amp;0xFF]++;\r\n                \tSystem.out.println(b&amp;0xFF);\r\n                }\r\n                \r\n                // build tree\r\n                Tree tree = buildTree(charFreqs);\r\n                \r\n                // build TreeMap\r\n                fillEncodeMap(tree, new StringBuffer(), treeMap);\r\n                \r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n        }\r\n\r\n","title":"Java - How to handle special characters when compressing bytes (Huffman encoding)?","body":"<p>I am writing a Huffman Compression/Decompression program. I have started writing my compression method and I am stuck. I am trying to read all bytes in the file and then put all of the bytes into a byte array. After putting all bytes into the byte array I create an <code>int[]</code> array that will store all the frequencies of each byte (with the index being the ASCII code). </p>\n\n<p>It does include the extended ASCII table since the size of the <code>int</code> array is 256. However I encounter issues as soon as I read a special character in my file (AKA characters with a higher ASCII value than 127). I understand that a byte is signed and will wrap around to a negative value as soon as it crosses the 127 number limit (and an array index obviously cant be negative) so I tried to counter this by turning it into a signed value when I specify my index for the array (<code>array[myByte&amp;0xFF]</code>). </p>\n\n<p>This kind of worked but it gave me the wrong ASCII value (for example if the correct ASCII value for the character is 134 I instead got 191 or something). The even more annoying part is that I noticed that special characters are split into 2 separate bytes, which I feel will cause problems later (for example when I try to decompress). </p>\n\n<p>How do I make my program compatible with every single type of character (this program is supposed to be able to compress/decompress pictures, mp3's etc).</p>\n\n<p>Maybe I am taking the wrong approach to this, but I don't know what the right approach is. Please give me some tips for structuring this.</p>\n\n<p>Tree:</p>\n\n<pre><code>package CompPck;\n\nimport java.util.TreeMap;\n\nabstract class Tree implements Comparable&lt;Tree&gt; {\n    public final int frequency; // the frequency of this tree\n    public Tree(int freq) { frequency = freq; }\n\n    // compares on the frequency\n    public int compareTo(Tree tree) {\n        return frequency - tree.frequency;\n    }\n}\n\nclass Leaf extends Tree {\n    public final int value; // the character this leaf represents\n\n    public Leaf(int freq, int val) {\n        super(freq);\n        value = val;\n    }\n}\n\nclass Node extends Tree {\n    public final Tree left, right; // subtrees\n\n    public Node(Tree l, Tree r) {\n        super(l.frequency + r.frequency);\n        left = l;\n        right = r;\n    }\n}\n</code></pre>\n\n<p>Build tree method:</p>\n\n<pre><code>public static Tree buildTree(int[] charFreqs) {\n        PriorityQueue&lt;Tree&gt; trees = new PriorityQueue&lt;Tree&gt;();\n\n        for (int i = 0; i &lt; charFreqs.length; i++){\n            if (charFreqs[i] &gt; 0){\n                trees.offer(new Leaf(charFreqs[i], i));\n            }\n        }\n\n        //assert trees.size() &gt; 0;\n\n        while (trees.size() &gt; 1) {\n            Tree a = trees.poll();\n            Tree b = trees.poll();\n\n            trees.offer(new Node(a, b));\n        }\n        return trees.poll();\n    }\n</code></pre>\n\n<p>Compression method:</p>\n\n<pre><code>public static void compress(File file){\n        try {\n            Path path = Paths.get(file.getAbsolutePath());\n            byte[] content = Files.readAllBytes(path);\n            TreeMap&lt;Integer, String&gt; treeMap = new TreeMap&lt;Integer, String&gt;();\n            File nF = new File(file.getName() + \"_comp\");\n            nF.createNewFile();\n            BitFileWriter bfw = new BitFileWriter(nF);\n\n            int[] charFreqs = new int[256];\n\n            // read each byte and record the frequencies\n            for (byte b : content){\n                charFreqs[b&amp;0xFF]++;\n                System.out.println(b&amp;0xFF);\n            }\n\n            // build tree\n            Tree tree = buildTree(charFreqs);\n\n            // build TreeMap\n            fillEncodeMap(tree, new StringBuffer(), treeMap);\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n"},{"tags":["java","android","android-mapview"],"answers":[{"tags":[],"owner":{"account_id":5602739,"reputation":1545,"user_id":4438470,"display_name":"Vitor Hugo Schwaab"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587399158,"creation_date":1587391660,"answer_id":61324479,"question_id":61322765,"body_markdown":"Welcome to StackOverflow!\r\n\r\nI think that the possible pitfall is that you need to call `mapView.onResume(bundle)`, `mapView.onPause()`, etc. in your Fragment/Activity:\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstance) {\r\n        super.onCreate(savedInstance)\r\n        mapView.onCreate(savedInstance)\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onStart() {\r\n        super.onStart();\r\n        mapView.onStart();\r\n    }\r\n\r\n    @Override\r\n    public void onResume() {\r\n        super.onResume();\r\n        mapView.onResume();\r\n    }\r\n\r\n    @Override\r\n    public void onPause() {\r\n        super.onPause();\r\n        mapView.onPause();\r\n    }\r\n\r\n    @Override\r\n    public void onStop() {\r\n        super.onStop();\r\n        mapView.onStop();\r\n    }\r\n\r\n    @Override\r\n    public void onLowMemory() {\r\n        super.onLowMemory();\r\n        mapView.onLowMemory();\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        super.onDestroy();\r\n        mapView.onDestroy();\r\n    }\r\n\r\nYou can read about it in the [MapView&#39;s documentation][1].\r\n\r\nAlso, see the logs. You could see some warnings from Google Maps SDK regarding wrong API Key, or related.\r\n\r\n\r\n  [1]: https://developers.google.com/android/reference/com/google/android/gms/maps/MapView","title":"MapView black screen but no errors in Android","body":"<p>Welcome to StackOverflow!</p>\n\n<p>I think that the possible pitfall is that you need to call <code>mapView.onResume(bundle)</code>, <code>mapView.onPause()</code>, etc. in your Fragment/Activity:</p>\n\n<pre><code>@Override\npublic void onCreate(Bundle savedInstance) {\n    super.onCreate(savedInstance)\n    mapView.onCreate(savedInstance)\n}\n\n\n@Override\npublic void onStart() {\n    super.onStart();\n    mapView.onStart();\n}\n\n@Override\npublic void onResume() {\n    super.onResume();\n    mapView.onResume();\n}\n\n@Override\npublic void onPause() {\n    super.onPause();\n    mapView.onPause();\n}\n\n@Override\npublic void onStop() {\n    super.onStop();\n    mapView.onStop();\n}\n\n@Override\npublic void onLowMemory() {\n    super.onLowMemory();\n    mapView.onLowMemory();\n}\n\n@Override\npublic void onDestroy() {\n    super.onDestroy();\n    mapView.onDestroy();\n}\n</code></pre>\n\n<p>You can read about it in the <a href=\"https://developers.google.com/android/reference/com/google/android/gms/maps/MapView\" rel=\"nofollow noreferrer\">MapView's documentation</a>.</p>\n\n<p>Also, see the logs. You could see some warnings from Google Maps SDK regarding wrong API Key, or related.</p>\n"},{"tags":[],"owner":{"account_id":18031900,"reputation":31,"user_id":13106259,"display_name":"aya lihoum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587393010,"creation_date":1587393010,"answer_id":61324978,"question_id":61322765,"body_markdown":"your API key is not enabled , [visit this site][1] to know how to get a api key\r\n\r\n\r\n  [1]: https://developers.google.com/maps/documentation/javascript/get-api-key","title":"MapView black screen but no errors in Android","body":"<p>your API key is not enabled , <a href=\"https://developers.google.com/maps/documentation/javascript/get-api-key\" rel=\"nofollow noreferrer\">visit this site</a> to know how to get a api key</p>\n"},{"tags":[],"owner":{"account_id":17308794,"reputation":1,"user_id":12536928,"display_name":"unkn0wn.a"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1587467207,"creation_date":1587405885,"answer_id":61329086,"question_id":61322765,"body_markdown":"I stopped trying to implement this as a MapView and switched to a MapAcitvity.\r\nImplementing this is much easier it seems, just create &quot;new-&gt; Google-&gt; Map Activity&quot; in Android Studio\r\n\r\nI think the issue with my approach was that I didn&#39;t know where to put the api key. \r\nalthough it didnt thow an error concerning this... \r\n\r\n\r\nEDIT:\r\n\r\nHere is the solution / an example of how I got it to work:\r\n\r\n    public class MainActivity extends AppCompatActivity implements OnMapReadyCallback {\r\n\r\n    private GoogleMap mMap;\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        MapView mMap = findViewById(R.id.map);\r\n        mMap.onCreate(savedInstanceState);\r\n        mMap.getMapAsync(this);\r\n    }\r\n\r\n    @Override\r\n    public void onStart() {\r\n        MapView mMap = findViewById(R.id.map);\r\n        super.onStart();\r\n        mMap.onStart();\r\n    }\r\n\r\n    @Override\r\n    public void onResume() {\r\n        MapView mMap = findViewById(R.id.map);\r\n        super.onResume();\r\n        mMap.onResume();\r\n    }\r\n\r\n    @Override\r\n    public void onPause() {\r\n        MapView mMap = findViewById(R.id.map);\r\n        super.onPause();\r\n        mMap.onPause();\r\n    }\r\n\r\n    @Override\r\n    public void onStop() {\r\n        MapView mMap = findViewById(R.id.map);\r\n        super.onStop();\r\n        mMap.onStop();\r\n    }\r\n\r\n    @Override\r\n    public void onLowMemory() {\r\n        MapView mMap = findViewById(R.id.map);\r\n        super.onLowMemory();\r\n        mMap.onLowMemory();\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        MapView mMap = findViewById(R.id.map);\r\n        super.onDestroy();\r\n        mMap.onDestroy();\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.M)\r\n    @Override\r\n    public void onMapReady(final GoogleMap googleMap) {\r\n        mMap = googleMap;\r\n        LatLng Test = new LatLng(50, 9);\r\n        mMap.animateCamera(CameraUpdateFactory.newCameraPosition( new CameraPosition.Builder().target(Test).zoom(15.0f).build()),20000, null);\r\n\r\n    }\r\n\r\n\r\n\r\nI won&#39;t include the xml code, as it is just a fill_parent mapView called &quot;map&quot;.  \r\n\r\n\r\nI put the API Key in the AndroidManifest.xml like this:\r\n    \r\n\r\n    &lt;meta-data\r\n     android:name=&quot;com.google.android.geo.API_KEY&quot;\r\n     android:value=&quot;@string/google_maps_key&quot; /&gt;\r\n\r\nI think thats it.\r\nThanks for the help and tips!\r\n    \r\n\r\n\r\n\r\n\r\n\r\n","title":"MapView black screen but no errors in Android","body":"<p>I stopped trying to implement this as a MapView and switched to a MapAcitvity.\nImplementing this is much easier it seems, just create \"new-> Google-> Map Activity\" in Android Studio</p>\n\n<p>I think the issue with my approach was that I didn't know where to put the api key. \nalthough it didnt thow an error concerning this... </p>\n\n<p>EDIT:</p>\n\n<p>Here is the solution / an example of how I got it to work:</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity implements OnMapReadyCallback {\n\nprivate GoogleMap mMap;\n\n@Override\npublic void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    MapView mMap = findViewById(R.id.map);\n    mMap.onCreate(savedInstanceState);\n    mMap.getMapAsync(this);\n}\n\n@Override\npublic void onStart() {\n    MapView mMap = findViewById(R.id.map);\n    super.onStart();\n    mMap.onStart();\n}\n\n@Override\npublic void onResume() {\n    MapView mMap = findViewById(R.id.map);\n    super.onResume();\n    mMap.onResume();\n}\n\n@Override\npublic void onPause() {\n    MapView mMap = findViewById(R.id.map);\n    super.onPause();\n    mMap.onPause();\n}\n\n@Override\npublic void onStop() {\n    MapView mMap = findViewById(R.id.map);\n    super.onStop();\n    mMap.onStop();\n}\n\n@Override\npublic void onLowMemory() {\n    MapView mMap = findViewById(R.id.map);\n    super.onLowMemory();\n    mMap.onLowMemory();\n}\n\n@Override\npublic void onDestroy() {\n    MapView mMap = findViewById(R.id.map);\n    super.onDestroy();\n    mMap.onDestroy();\n}\n\n@RequiresApi(api = Build.VERSION_CODES.M)\n@Override\npublic void onMapReady(final GoogleMap googleMap) {\n    mMap = googleMap;\n    LatLng Test = new LatLng(50, 9);\n    mMap.animateCamera(CameraUpdateFactory.newCameraPosition( new CameraPosition.Builder().target(Test).zoom(15.0f).build()),20000, null);\n\n}\n</code></pre>\n\n<p>I won't include the xml code, as it is just a fill_parent mapView called \"map\".  </p>\n\n<p>I put the API Key in the AndroidManifest.xml like this:</p>\n\n<pre><code>&lt;meta-data\n android:name=\"com.google.android.geo.API_KEY\"\n android:value=\"@string/google_maps_key\" /&gt;\n</code></pre>\n\n<p>I think thats it.\nThanks for the help and tips!</p>\n"},{"tags":[],"owner":{"account_id":6390815,"reputation":1094,"user_id":5963210,"display_name":"alexander ferreras"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673045567,"creation_date":1673045567,"answer_id":75036820,"question_id":61322765,"body_markdown":"You need to to have available Google maps sdk android.\r\nGo to the link and active it .\r\nhttps://console.developers.google.com/apis/library/maps-android-backend.googleapis.com/","title":"MapView black screen but no errors in Android","body":"<p>You need to to have available Google maps sdk android.\nGo to the link and active it .\n<a href=\"https://console.developers.google.com/apis/library/maps-android-backend.googleapis.com/\" rel=\"nofollow noreferrer\">https://console.developers.google.com/apis/library/maps-android-backend.googleapis.com/</a></p>\n"}],"owner":{"account_id":17308794,"reputation":1,"user_id":12536928,"display_name":"unkn0wn.a"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":698,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":61329086,"answer_count":4,"score":0,"last_activity_date":1673045567,"creation_date":1587386483,"question_id":61322765,"body_markdown":"I am trying to display a location with a MapView but I can&#39;t get it to work.\r\nI have already look into all the other threads with the same questions but the solutions don&#39;t work for me.\r\n\r\nHere is what is supposed to work but doesn&#39;t:\r\n\r\n        public void displayMap(){\r\n        final MapView mapView = findViewById(R.id.locationMapView);\r\n        mapView.getMapAsync(new OnMapReadyCallback() {\r\n\r\n            @Override\r\n            public void onMapReady(GoogleMap googleMap) {\r\n                LatLng coordinates = new LatLng(14.0583, 108.2772); //for testing\r\n                googleMap.addMarker(new MarkerOptions().position(coordinates).title(&quot;Test&quot;));\r\n                googleMap.moveCamera(CameraUpdateFactory.newLatLngZoom(coordinates, 15));\r\n            }\r\n        });\r\n    }\r\n\r\n\r\nI am new to Android Studio and just trying things out. \r\nI also already tried to comprehend the reference/documentation but it was not that helpful because I don&#39;t really get where to start. \r\n\r\nI&#39;d be very thankful if someone explained the mistake to me.\r\nOf course, if I missed important information you need I&#39;ll get it for you.\r\n\r\nedit1:\r\n\r\nthis is the logcat\r\n\r\nhttps://pastebin.com/qMKzsQQS\r\n    ","title":"MapView black screen but no errors in Android","body":"<p>I am trying to display a location with a MapView but I can't get it to work.\nI have already look into all the other threads with the same questions but the solutions don't work for me.</p>\n\n<p>Here is what is supposed to work but doesn't:</p>\n\n<pre><code>    public void displayMap(){\n    final MapView mapView = findViewById(R.id.locationMapView);\n    mapView.getMapAsync(new OnMapReadyCallback() {\n\n        @Override\n        public void onMapReady(GoogleMap googleMap) {\n            LatLng coordinates = new LatLng(14.0583, 108.2772); //for testing\n            googleMap.addMarker(new MarkerOptions().position(coordinates).title(\"Test\"));\n            googleMap.moveCamera(CameraUpdateFactory.newLatLngZoom(coordinates, 15));\n        }\n    });\n}\n</code></pre>\n\n<p>I am new to Android Studio and just trying things out. \nI also already tried to comprehend the reference/documentation but it was not that helpful because I don't really get where to start. </p>\n\n<p>I'd be very thankful if someone explained the mistake to me.\nOf course, if I missed important information you need I'll get it for you.</p>\n\n<p>edit1:</p>\n\n<p>this is the logcat</p>\n\n<p><a href=\"https://pastebin.com/qMKzsQQS\" rel=\"nofollow noreferrer\">https://pastebin.com/qMKzsQQS</a></p>\n"},{"tags":["java","android","xml","bundle","android-vectordrawable"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1673021692,"post_id":75033329,"comment_id":132410799,"body_markdown":"If possible, I recommend passing as a URL or file location. Modern OSes are very good at caching file data","body":"If possible, I recommend passing as a URL or file location. Modern OSes are very good at caching file data"}],"answers":[{"tags":[],"owner":{"account_id":4473562,"reputation":1,"user_id":20922855,"display_name":"Luke Mills"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673045027,"creation_date":1673045027,"answer_id":75036772,"question_id":75033329,"body_markdown":"I discovered that you cannot send things back with the putExtra when resuming an activity... I dont know why this is, I thought the onResume() would fix this but apparently not. There is also an onNewIntent() that supposedly also corrects this but I couldn&#39;t get that working either. Same again for startActivityForResult() which has been deprecated...\r\n\r\nAnyways, if you.. future human.. also have this problem I have solved it by saving the data i want as a part of a class in an arraylist of size 1. This is the tutorial I followed, I am using this code elsewhere already so I didnt have to change much, but it might be over the top if you&#39;re looking for a simple solution.\r\n\r\nhttps://www.youtube.com/watch?v=jcliHGR3CHo ","title":"Passing an XML vector image between activities","body":"<p>I discovered that you cannot send things back with the putExtra when resuming an activity... I dont know why this is, I thought the onResume() would fix this but apparently not. There is also an onNewIntent() that supposedly also corrects this but I couldn't get that working either. Same again for startActivityForResult() which has been deprecated...</p>\n<p>Anyways, if you.. future human.. also have this problem I have solved it by saving the data i want as a part of a class in an arraylist of size 1. This is the tutorial I followed, I am using this code elsewhere already so I didnt have to change much, but it might be over the top if you're looking for a simple solution.</p>\n<p><a href=\"https://www.youtube.com/watch?v=jcliHGR3CHo\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=jcliHGR3CHo</a></p>\n"}],"owner":{"account_id":4473562,"reputation":1,"user_id":20922855,"display_name":"Luke Mills"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673045027,"creation_date":1673021269,"question_id":75033329,"body_markdown":"I am trying to pass an icon from an icon selection page, back to my creation activity where I then update the image and object to be created.\r\n\r\nI have tried a few different methods on a half dozen posts and none of them want to work. They are mostly using bitmaps and .pngs so i&#39;m wondering if I have to do anything inherently different for a vector image .xml thats just sitting in my drawable folder. Or if this method just wont work for this file type.\r\n\r\nEach method I have used with putExtra and every kind of getExtra(s) has told me that there is nothing there (bundle = null).\r\n\r\nIcon Page code to return to the main activity with the vector image\r\n```\r\n    public void returnToMainActivity(){\r\n        Intent intent = new Intent(IconPage.this, MainActivity.class);\r\n        intent.putExtra(&quot;image&quot;, R.drawable.icon_trash1_24);\r\n        intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);\r\n        startActivity(intent);\r\n    }\r\n```\r\n\r\nMain activity code to resume activity and get the vector image\r\nwhere tempTask is the object and iconButton is the image button\r\n\r\n```\r\n    @Override\r\n    protected void onResume(){\r\n        super.onResume();\r\n        //get icon from icon page upon resume\r\n        Bundle bundle = getIntent().getExtras();\r\n        if (bundle != null) {\r\n            int picture = bundle.getInt(&quot;image&quot;);\r\n            iconButton.setImageResource(picture);\r\n            tempTask.setIconId(picture);\r\n        }\r\n    }\r\n```\r\n\r\n[Result](https://i.stack.imgur.com/Nz1CH.png)\r\n\r\n\r\nI would prefer not to have to convert it to a bitmap to pass it, because i am using it as an int in my object and everywhere else in my app that works great. Is there a better way to pass a reference to an existing file between activities?\r\n\r\nthanks!","title":"Passing an XML vector image between activities","body":"<p>I am trying to pass an icon from an icon selection page, back to my creation activity where I then update the image and object to be created.</p>\n<p>I have tried a few different methods on a half dozen posts and none of them want to work. They are mostly using bitmaps and .pngs so i'm wondering if I have to do anything inherently different for a vector image .xml thats just sitting in my drawable folder. Or if this method just wont work for this file type.</p>\n<p>Each method I have used with putExtra and every kind of getExtra(s) has told me that there is nothing there (bundle = null).</p>\n<p>Icon Page code to return to the main activity with the vector image</p>\n<pre><code>    public void returnToMainActivity(){\n        Intent intent = new Intent(IconPage.this, MainActivity.class);\n        intent.putExtra(&quot;image&quot;, R.drawable.icon_trash1_24);\n        intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);\n        startActivity(intent);\n    }\n</code></pre>\n<p>Main activity code to resume activity and get the vector image\nwhere tempTask is the object and iconButton is the image button</p>\n<pre><code>    @Override\n    protected void onResume(){\n        super.onResume();\n        //get icon from icon page upon resume\n        Bundle bundle = getIntent().getExtras();\n        if (bundle != null) {\n            int picture = bundle.getInt(&quot;image&quot;);\n            iconButton.setImageResource(picture);\n            tempTask.setIconId(picture);\n        }\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Nz1CH.png\" rel=\"nofollow noreferrer\">Result</a></p>\n<p>I would prefer not to have to convert it to a bitmap to pass it, because i am using it as an int in my object and everywhere else in my app that works great. Is there a better way to pass a reference to an existing file between activities?</p>\n<p>thanks!</p>\n"},{"tags":["java","spring-boot","visual-studio-code","google-cloud-platform","dialogflow-es"],"answers":[{"tags":[],"owner":{"account_id":10877970,"reputation":105,"user_id":7997851,"accept_rate":83,"display_name":"Ninja"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1592339284,"creation_date":1592339284,"answer_id":62417046,"question_id":62415863,"body_markdown":"Solved by running in the terminal:\r\n\r\n    $env:GOOGLE_APPLICATION_CREDENTIALS=&quot;C:\\Users\\user\\Desktop\\*****\\****\\src\\main\\resources\\*****.json&quot;\r\n\r\nIn addition to setting the relevant role in IAM section of GCP since I&#39;ve encountered a  PERMISSION_DENIED Error after","title":"Setting GCP environment variable in Spring boot with vs code","body":"<p>Solved by running in the terminal:</p>\n\n<pre><code>$env:GOOGLE_APPLICATION_CREDENTIALS=\"C:\\Users\\user\\Desktop\\*****\\****\\src\\main\\resources\\*****.json\"\n</code></pre>\n\n<p>In addition to setting the relevant role in IAM section of GCP since I've encountered a  PERMISSION_DENIED Error after</p>\n"},{"tags":[],"owner":{"account_id":5621248,"reputation":996,"user_id":4451010,"display_name":"Ilya Lapitan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1592882777,"creation_date":1592882777,"answer_id":62526818,"question_id":62415863,"body_markdown":"If you have Google Cloud SDK installed you can run this command in the console to set up application default credentials:\r\n\r\n&gt; gcloud auth application-default login\r\n\r\nPlease, see more details in the documentation:\r\nhttps://cloud.google.com/sdk/gcloud/reference/auth/application-default","title":"Setting GCP environment variable in Spring boot with vs code","body":"<p>If you have Google Cloud SDK installed you can run this command in the console to set up application default credentials:</p>\n<blockquote>\n<p>gcloud auth application-default login</p>\n</blockquote>\n<p>Please, see more details in the documentation:\n<a href=\"https://cloud.google.com/sdk/gcloud/reference/auth/application-default\" rel=\"nofollow noreferrer\">https://cloud.google.com/sdk/gcloud/reference/auth/application-default</a></p>\n"}],"owner":{"account_id":10877970,"reputation":105,"user_id":7997851,"accept_rate":83,"display_name":"Ninja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2558,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":62417046,"answer_count":2,"score":0,"last_activity_date":1673044694,"creation_date":1592334445,"question_id":62415863,"body_markdown":"I&#39;m trying to set up GOOGLE_APPLICATION_CREDENTIALS but keep getting this error \r\n\r\n&gt; java.io.IOException: The Application Default Credentials are not available. They are available if running in Google Compute Engine. Otherwise, the environment variable GOOGLE_APPLICATION_CREDENTIALS must be defined pointing to a file defining the credential\r\n\r\nI have defined in my application properties:\r\n\r\n    spring.cloud.gcp.project-id=PROJECT_ID\r\n    spring.cloud.gcp.credentials.location=lasspath:/src/main/resources/key.json\r\n\r\nAdded the dependency in the pom file:\r\n\r\n     &lt;dependency&gt;\r\n         &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n         &lt;artifactId&gt;google-cloud-dialogflow&lt;/artifactId&gt;\r\n         &lt;version&gt;1.0.0&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n\r\nTried to do it from the terminal(windows) as well no luck:\r\n\r\n    &gt; set GOOGLE_APPLICATION_CREDENTIALS=&quot;C:\\Users\\user\\Desktop\\****\\******\\src\\main\\resources\\key.json&quot;","title":"Setting GCP environment variable in Spring boot with vs code","body":"<p>I'm trying to set up GOOGLE_APPLICATION_CREDENTIALS but keep getting this error </p>\n\n<blockquote>\n  <p>java.io.IOException: The Application Default Credentials are not available. They are available if running in Google Compute Engine. Otherwise, the environment variable GOOGLE_APPLICATION_CREDENTIALS must be defined pointing to a file defining the credential</p>\n</blockquote>\n\n<p>I have defined in my application properties:</p>\n\n<pre><code>spring.cloud.gcp.project-id=PROJECT_ID\nspring.cloud.gcp.credentials.location=lasspath:/src/main/resources/key.json\n</code></pre>\n\n<p>Added the dependency in the pom file:</p>\n\n<pre><code> &lt;dependency&gt;\n     &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n     &lt;artifactId&gt;google-cloud-dialogflow&lt;/artifactId&gt;\n     &lt;version&gt;1.0.0&lt;/version&gt;\n  &lt;/dependency&gt;\n</code></pre>\n\n<p>Tried to do it from the terminal(windows) as well no luck:</p>\n\n<pre><code>&gt; set GOOGLE_APPLICATION_CREDENTIALS=\"C:\\Users\\user\\Desktop\\****\\******\\src\\main\\resources\\key.json\"\n</code></pre>\n"},{"tags":["java","sharedpreferences","preferencescreen","android-jetpack-security"],"answers":[{"tags":[],"owner":{"account_id":7422728,"reputation":471,"user_id":5646408,"display_name":"Rikka"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1578650591,"creation_date":1578650591,"answer_id":59679457,"question_id":58515475,"body_markdown":"Use `getPreferenceManager().setPreferenceDataStore(PreferenceDataStore)`. `PreferenceDataStore` provides the ability to change how preference is loaded/saved.\r\n\r\nA simple implementation of `PreferenceDataStore`:\r\n\r\n```\r\npublic class SharedPreferenceDataStore extends PreferenceDataStore {\r\n\r\n    private final SharedPreferences mSharedPreferences;\r\n\r\n    public SharedPreferenceDataStore(@NonNull SharedPreferences sharedPreferences) {\r\n        mSharedPreferences = sharedPreferences;\r\n    }\r\n\r\n    @NonNull\r\n    public SharedPreferences getSharedPreferences() {\r\n        return mSharedPreferences;\r\n    }\r\n\r\n    @Override\r\n    public void putString(String key, @Nullable String value) {\r\n        mSharedPreferences.edit().putString(key, value).apply();\r\n    }\r\n\r\n    @Override\r\n    public void putStringSet(String key, @Nullable Set&lt;String&gt; values) {\r\n        mSharedPreferences.edit().putStringSet(key, values).apply();\r\n    }\r\n\r\n    @Override\r\n    public void putInt(String key, int value) {\r\n        mSharedPreferences.edit().putInt(key, value).apply();\r\n    }\r\n\r\n    @Override\r\n    public void putLong(String key, long value) {\r\n        mSharedPreferences.edit().putLong(key, value).apply();\r\n    }\r\n\r\n    @Override\r\n    public void putFloat(String key, float value) {\r\n        mSharedPreferences.edit().putFloat(key, value).apply();\r\n    }\r\n\r\n    @Override\r\n    public void putBoolean(String key, boolean value) {\r\n        mSharedPreferences.edit().putBoolean(key, value).apply();\r\n    }\r\n\r\n    @Nullable\r\n    @Override\r\n    public String getString(String key, @Nullable String defValue) {\r\n        return mSharedPreferences.getString(key, defValue);\r\n    }\r\n\r\n    @Nullable\r\n    @Override\r\n    public Set&lt;String&gt; getStringSet(String key, @Nullable Set&lt;String&gt; defValues) {\r\n        return mSharedPreferences.getStringSet(key, defValues);\r\n    }\r\n\r\n    @Override\r\n    public int getInt(String key, int defValue) {\r\n        return mSharedPreferences.getInt(key, defValue);\r\n    }\r\n\r\n    @Override\r\n    public long getLong(String key, long defValue) {\r\n        return mSharedPreferences.getLong(key, defValue);\r\n    }\r\n\r\n    @Override\r\n    public float getFloat(String key, float defValue) {\r\n        return mSharedPreferences.getFloat(key, defValue);\r\n    }\r\n\r\n    @Override\r\n    public boolean getBoolean(String key, boolean defValue) {\r\n        return mSharedPreferences.getBoolean(key, defValue);\r\n    }\r\n}\r\n```\r\n\r\n```\r\ngetPreferenceManager().setPreferenceDataStore(new SharedPreferenceDataStore(EncryptedSharedPreferences.create()));\r\n```","title":"Is there a way to integrate EncryptedSharedPreference with PreferenceScreen?","body":"<p>Use <code>getPreferenceManager().setPreferenceDataStore(PreferenceDataStore)</code>. <code>PreferenceDataStore</code> provides the ability to change how preference is loaded/saved.</p>\n\n<p>A simple implementation of <code>PreferenceDataStore</code>:</p>\n\n<pre><code>public class SharedPreferenceDataStore extends PreferenceDataStore {\n\n    private final SharedPreferences mSharedPreferences;\n\n    public SharedPreferenceDataStore(@NonNull SharedPreferences sharedPreferences) {\n        mSharedPreferences = sharedPreferences;\n    }\n\n    @NonNull\n    public SharedPreferences getSharedPreferences() {\n        return mSharedPreferences;\n    }\n\n    @Override\n    public void putString(String key, @Nullable String value) {\n        mSharedPreferences.edit().putString(key, value).apply();\n    }\n\n    @Override\n    public void putStringSet(String key, @Nullable Set&lt;String&gt; values) {\n        mSharedPreferences.edit().putStringSet(key, values).apply();\n    }\n\n    @Override\n    public void putInt(String key, int value) {\n        mSharedPreferences.edit().putInt(key, value).apply();\n    }\n\n    @Override\n    public void putLong(String key, long value) {\n        mSharedPreferences.edit().putLong(key, value).apply();\n    }\n\n    @Override\n    public void putFloat(String key, float value) {\n        mSharedPreferences.edit().putFloat(key, value).apply();\n    }\n\n    @Override\n    public void putBoolean(String key, boolean value) {\n        mSharedPreferences.edit().putBoolean(key, value).apply();\n    }\n\n    @Nullable\n    @Override\n    public String getString(String key, @Nullable String defValue) {\n        return mSharedPreferences.getString(key, defValue);\n    }\n\n    @Nullable\n    @Override\n    public Set&lt;String&gt; getStringSet(String key, @Nullable Set&lt;String&gt; defValues) {\n        return mSharedPreferences.getStringSet(key, defValues);\n    }\n\n    @Override\n    public int getInt(String key, int defValue) {\n        return mSharedPreferences.getInt(key, defValue);\n    }\n\n    @Override\n    public long getLong(String key, long defValue) {\n        return mSharedPreferences.getLong(key, defValue);\n    }\n\n    @Override\n    public float getFloat(String key, float defValue) {\n        return mSharedPreferences.getFloat(key, defValue);\n    }\n\n    @Override\n    public boolean getBoolean(String key, boolean defValue) {\n        return mSharedPreferences.getBoolean(key, defValue);\n    }\n}\n</code></pre>\n\n<pre><code>getPreferenceManager().setPreferenceDataStore(new SharedPreferenceDataStore(EncryptedSharedPreferences.create()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":242769,"reputation":45,"user_id":514527,"display_name":"JaLooNz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1589681823,"creation_date":1589681377,"answer_id":61846108,"question_id":58515475,"body_markdown":"There are a few issues that I encounter with integrating EncryptedSharePreferences with AndroidX Preferences GUI.\r\n\r\n - PreferenceManager is not able to set the default preference data store globally, because it is only possible to retrieve the default shared preferences (un-encrypted variant and tied to application package name) and not set the default shared preferences to the encrypted variant. `PreferenceManager.getDefaultSharedPreferences(context);` does not have a corresponding set method.\r\n - PreferenceManager can only be created by packages with the same library group.\r\n\r\nThe solution I have created is to not depend on SharedPreferences, but to utilise the PreferenceFragmentCompat to write to EncryptedPreferenceDataStore. However, this still comes with the issue that the default values are not initialised until the user enters the Preference screen.\r\n\r\n**Dependencies**\r\n\r\n    dependencies {\r\n        implementation &#39;androidx.preference:preference:1.1.1&#39;\r\n        implementation &#39;androidx.security:security-crypto:1.0.0-rc01&#39;\r\n    }\r\n\r\n**PreferencesFragment**\r\n\r\n    import android.app.Activity;\r\n    import android.app.ActivityManager;\r\n    import android.os.Bundle;\r\n    \r\n    import androidx.preference.Preference;\r\n    import androidx.preference.PreferenceFragmentCompat;\r\n    import androidx.preference.PreferenceManager;\r\n    \r\n    public class PreferencesFragment extends PreferenceFragmentCompat {\r\n    \r\n        @Override\r\n        public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {\r\n            PreferenceManager preferenceManager = getPreferenceManager();\r\n            preferenceManager.setPreferenceDataStore(EncryptedPreferenceDataStore.getInstance(getContext()));\r\n    \r\n            // Load the preferences from an XML resource\r\n            setPreferencesFromResource(R.xml.preferences, rootKey);\r\n        }\r\n\r\n**EncryptedPreferenceDataStore**\r\n\r\n    import android.content.Context;\r\n    import android.content.SharedPreferences;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.annotation.Nullable;\r\n    import androidx.preference.PreferenceDataStore;\r\n    import androidx.security.crypto.EncryptedSharedPreferences;\r\n    \r\n    import java.util.Set;\r\n    \r\n    public class EncryptedPreferenceDataStore extends PreferenceDataStore {\r\n    \r\n        private static final String CONFIG_FILE_NAME = &quot;FileName&quot;;\r\n        private static final String CONFIG_MASTER_KEY_ALIAS = &quot;KeyAlias&quot;;\r\n        private static EncryptedPreferenceDataStore mInstance;\r\n        private SharedPreferences mSharedPreferences;\r\n        private Context mContext;\r\n    \r\n        private EncryptedPreferenceDataStore(Context context) {\r\n            try {\r\n                mContext = context;\r\n                mSharedPreferences = EncryptedSharedPreferences.create(\r\n                        CONFIG_FILE_NAME,\r\n                        CONFIG_MASTER_KEY_ALIAS,\r\n                        context,\r\n                        EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV, //for encrypting Keys\r\n                        EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM ////for encrypting Values\r\n                );\r\n            } catch (Exception e) {\r\n                // Fallback\r\n                mSharedPreferences = context.getSharedPreferences(CONFIG_FILE_NAME, Context.MODE_PRIVATE);\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public void putString(String key, @Nullable String value) {\r\n            mSharedPreferences.edit().putString(key, value).apply();\r\n        }\r\n    \r\n        @Override\r\n        public void putStringSet(String key, @Nullable Set&lt;String&gt; values) {\r\n            mSharedPreferences.edit().putStringSet(key, values).apply();\r\n        }\r\n    \r\n        @Override\r\n        public void putInt(String key, int value) {\r\n            mSharedPreferences.edit().putInt(key, value).apply();\r\n        }\r\n    \r\n        @Override\r\n        public void putLong(String key, long value) {\r\n            mSharedPreferences.edit().putLong(key, value).apply();\r\n        }\r\n    \r\n        @Override\r\n        public void putFloat(String key, float value) {\r\n            mSharedPreferences.edit().putFloat(key, value).apply();\r\n        }\r\n    \r\n        @Override\r\n        public void putBoolean(String key, boolean value) {\r\n            mSharedPreferences.edit().putBoolean(key, value).apply();\r\n        }\r\n    \r\n        @Nullable\r\n        @Override\r\n        public String getString(String key, @Nullable String defValue) {\r\n            return mSharedPreferences.getString(key, defValue);\r\n        }\r\n    \r\n        @Nullable\r\n        @Override\r\n        public Set&lt;String&gt; getStringSet(String key, @Nullable Set&lt;String&gt; defValues) {\r\n            return mSharedPreferences.getStringSet(key, defValues);\r\n        }\r\n    \r\n        @Override\r\n        public int getInt(String key, int defValue) {\r\n            return mSharedPreferences.getInt(key, defValue);\r\n        }\r\n    \r\n        @Override\r\n        public long getLong(String key, long defValue) {\r\n            return mSharedPreferences.getLong(key, defValue);\r\n        }\r\n    \r\n        @Override\r\n        public float getFloat(String key, float defValue) {\r\n            return mSharedPreferences.getFloat(key, defValue);\r\n        }\r\n    \r\n        @Override\r\n        public boolean getBoolean(String key, boolean defValue) {\r\n            return mSharedPreferences.getBoolean(key, defValue);\r\n        }\r\n    }\r\n\r\n**Usage**\r\n\r\n        EncryptedPreferenceDataStore prefs = EncryptedPreferenceDataStore.getInstance(getContext());\r\n        boolean bIsXXX = prefs.getBoolean(getString(R.string.pref_access_xxx), true);","title":"Is there a way to integrate EncryptedSharedPreference with PreferenceScreen?","body":"<p>There are a few issues that I encounter with integrating EncryptedSharePreferences with AndroidX Preferences GUI.</p>\n\n<ul>\n<li>PreferenceManager is not able to set the default preference data store globally, because it is only possible to retrieve the default shared preferences (un-encrypted variant and tied to application package name) and not set the default shared preferences to the encrypted variant. <code>PreferenceManager.getDefaultSharedPreferences(context);</code> does not have a corresponding set method.</li>\n<li>PreferenceManager can only be created by packages with the same library group.</li>\n</ul>\n\n<p>The solution I have created is to not depend on SharedPreferences, but to utilise the PreferenceFragmentCompat to write to EncryptedPreferenceDataStore. However, this still comes with the issue that the default values are not initialised until the user enters the Preference screen.</p>\n\n<p><strong>Dependencies</strong></p>\n\n<pre><code>dependencies {\n    implementation 'androidx.preference:preference:1.1.1'\n    implementation 'androidx.security:security-crypto:1.0.0-rc01'\n}\n</code></pre>\n\n<p><strong>PreferencesFragment</strong></p>\n\n<pre><code>import android.app.Activity;\nimport android.app.ActivityManager;\nimport android.os.Bundle;\n\nimport androidx.preference.Preference;\nimport androidx.preference.PreferenceFragmentCompat;\nimport androidx.preference.PreferenceManager;\n\npublic class PreferencesFragment extends PreferenceFragmentCompat {\n\n    @Override\n    public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {\n        PreferenceManager preferenceManager = getPreferenceManager();\n        preferenceManager.setPreferenceDataStore(EncryptedPreferenceDataStore.getInstance(getContext()));\n\n        // Load the preferences from an XML resource\n        setPreferencesFromResource(R.xml.preferences, rootKey);\n    }\n</code></pre>\n\n<p><strong>EncryptedPreferenceDataStore</strong></p>\n\n<pre><code>import android.content.Context;\nimport android.content.SharedPreferences;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.preference.PreferenceDataStore;\nimport androidx.security.crypto.EncryptedSharedPreferences;\n\nimport java.util.Set;\n\npublic class EncryptedPreferenceDataStore extends PreferenceDataStore {\n\n    private static final String CONFIG_FILE_NAME = \"FileName\";\n    private static final String CONFIG_MASTER_KEY_ALIAS = \"KeyAlias\";\n    private static EncryptedPreferenceDataStore mInstance;\n    private SharedPreferences mSharedPreferences;\n    private Context mContext;\n\n    private EncryptedPreferenceDataStore(Context context) {\n        try {\n            mContext = context;\n            mSharedPreferences = EncryptedSharedPreferences.create(\n                    CONFIG_FILE_NAME,\n                    CONFIG_MASTER_KEY_ALIAS,\n                    context,\n                    EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV, //for encrypting Keys\n                    EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM ////for encrypting Values\n            );\n        } catch (Exception e) {\n            // Fallback\n            mSharedPreferences = context.getSharedPreferences(CONFIG_FILE_NAME, Context.MODE_PRIVATE);\n        }\n    }\n\n    @Override\n    public void putString(String key, @Nullable String value) {\n        mSharedPreferences.edit().putString(key, value).apply();\n    }\n\n    @Override\n    public void putStringSet(String key, @Nullable Set&lt;String&gt; values) {\n        mSharedPreferences.edit().putStringSet(key, values).apply();\n    }\n\n    @Override\n    public void putInt(String key, int value) {\n        mSharedPreferences.edit().putInt(key, value).apply();\n    }\n\n    @Override\n    public void putLong(String key, long value) {\n        mSharedPreferences.edit().putLong(key, value).apply();\n    }\n\n    @Override\n    public void putFloat(String key, float value) {\n        mSharedPreferences.edit().putFloat(key, value).apply();\n    }\n\n    @Override\n    public void putBoolean(String key, boolean value) {\n        mSharedPreferences.edit().putBoolean(key, value).apply();\n    }\n\n    @Nullable\n    @Override\n    public String getString(String key, @Nullable String defValue) {\n        return mSharedPreferences.getString(key, defValue);\n    }\n\n    @Nullable\n    @Override\n    public Set&lt;String&gt; getStringSet(String key, @Nullable Set&lt;String&gt; defValues) {\n        return mSharedPreferences.getStringSet(key, defValues);\n    }\n\n    @Override\n    public int getInt(String key, int defValue) {\n        return mSharedPreferences.getInt(key, defValue);\n    }\n\n    @Override\n    public long getLong(String key, long defValue) {\n        return mSharedPreferences.getLong(key, defValue);\n    }\n\n    @Override\n    public float getFloat(String key, float defValue) {\n        return mSharedPreferences.getFloat(key, defValue);\n    }\n\n    @Override\n    public boolean getBoolean(String key, boolean defValue) {\n        return mSharedPreferences.getBoolean(key, defValue);\n    }\n}\n</code></pre>\n\n<p><strong>Usage</strong></p>\n\n<pre><code>    EncryptedPreferenceDataStore prefs = EncryptedPreferenceDataStore.getInstance(getContext());\n    boolean bIsXXX = prefs.getBoolean(getString(R.string.pref_access_xxx), true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":110558,"reputation":10111,"user_id":292502,"accept_rate":83,"display_name":"Csaba Toth"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1622306543,"creation_date":1597617436,"answer_id":63442567,"question_id":58515475,"body_markdown":"A1: Yes it&#39;s possible.\r\n\r\nA3: You can take advantage of system provided settings the following way.\r\n\r\nSince Kotlin is the preferred first class citizen for a while now I&#39;ll show it in Kotlin, @Rikka has a Java version in another answer. For Kotlin the trick is to still set the `preferencesDataSource`, it goes this way:\r\n\r\n```lang:Kotlin\r\nclass SettingsFragment : PreferenceFragmentCompat() {\r\n    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {\r\n        preferenceManager.preferenceDataStore =\r\n            EncryptedPreferenceDataStore.getInstance(requireContext())\r\n\r\n        // Load the preferences from an XML resource\r\n        setPreferencesFromResource(R.xml.preferences, rootKey)\r\n    }\r\n```\r\n\r\nThe Kotlin version of the `EncryptedPreferenceDataStore`: I&#39;m using the `also` keyword for the singleton, similarly as the Google source code related Room example in https://stackoverflow.com/questions/40398072/singleton-with-parameter-in-kotlin\r\n\r\n```lang:Kotlin\r\nclass EncryptedPreferenceDataStore private constructor(context: Context) : PreferenceDataStore() {\r\n    companion object {\r\n        private const val SHARED_PREFERENCES_NAME = &quot;secret_shared_preferences&quot;\r\n\r\n        @Volatile private var INSTANCE: EncryptedPreferenceDataStore? = null\r\n\r\n        fun getInstance(context: Context): EncryptedPreferenceDataStore =\r\n            INSTANCE ?: synchronized(this) {\r\n                INSTANCE ?: EncryptedPreferenceDataStore(context).also { INSTANCE = it }\r\n            }\r\n    }\r\n\r\n    private var mSharedPreferences: SharedPreferences\r\n    private lateinit var mContext: Context\r\n\r\n    init {\r\n        try {\r\n            mContext = context\r\n            val masterKey = MasterKey.Builder(context, MasterKey.DEFAULT_MASTER_KEY_ALIAS)\r\n                .setKeyScheme(MasterKey.KeyScheme.AES256_GCM)\r\n                .build()\r\n\r\n            mSharedPreferences = EncryptedSharedPreferences.create(\r\n                context,\r\n                SHARED_PREFERENCES_NAME,\r\n                masterKey,\r\n                EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,\r\n                EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM\r\n            )\r\n        } catch (e: Exception) {\r\n            // Fallback, default mode is Context.MODE_PRIVATE!\r\n            mSharedPreferences = PreferenceManager.getDefaultSharedPreferences(context)\r\n        }\r\n    }\r\n\r\n    override fun putString(key: String, value: String?) {\r\n        mSharedPreferences.edit().putString(key, value).apply()\r\n    }\r\n\r\n    override fun putStringSet(key: String, values: Set&lt;String&gt;?) {\r\n        mSharedPreferences.edit().putStringSet(key, values).apply()\r\n    }\r\n\r\n    override fun putInt(key: String, value: Int) {\r\n        mSharedPreferences.edit().putInt(key, value).apply()\r\n    }\r\n\r\n    override fun putLong(key: String, value: Long) {\r\n        mSharedPreferences.edit().putLong(key, value).apply()\r\n    }\r\n\r\n    override fun putFloat(key: String, value: Float) {\r\n        mSharedPreferences.edit().putFloat(key, value).apply()\r\n    }\r\n\r\n    override fun putBoolean(key: String, value: Boolean) {\r\n        mSharedPreferences.edit().putBoolean(key, value).apply()\r\n    }\r\n\r\n    override fun getString(key: String, defValue: String?): String? {\r\n        return mSharedPreferences.getString(key, defValue)\r\n    }\r\n\r\n    override fun getStringSet(key: String, defValues: Set&lt;String&gt;?): Set&lt;String&gt;? {\r\n        return mSharedPreferences.getStringSet(key, defValues)\r\n    }\r\n\r\n    override fun getInt(key: String, defValue: Int): Int {\r\n        return mSharedPreferences.getInt(key, defValue)\r\n    }\r\n\r\n    override fun getLong(key: String, defValue: Long): Long {\r\n        return mSharedPreferences.getLong(key, defValue)\r\n    }\r\n\r\n    override fun getFloat(key: String, defValue: Float): Float {\r\n        return mSharedPreferences.getFloat(key, defValue)\r\n    }\r\n\r\n    override fun getBoolean(key: String, defValue: Boolean): Boolean {\r\n        return mSharedPreferences.getBoolean(key, defValue)\r\n    }\r\n}\r\n```\r\n\r\nMaybe it could be even more thread safe by double synchronized checking?","title":"Is there a way to integrate EncryptedSharedPreference with PreferenceScreen?","body":"<p>A1: Yes it's possible.</p>\n<p>A3: You can take advantage of system provided settings the following way.</p>\n<p>Since Kotlin is the preferred first class citizen for a while now I'll show it in Kotlin, @Rikka has a Java version in another answer. For Kotlin the trick is to still set the <code>preferencesDataSource</code>, it goes this way:</p>\n<pre><code>class SettingsFragment : PreferenceFragmentCompat() {\n    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {\n        preferenceManager.preferenceDataStore =\n            EncryptedPreferenceDataStore.getInstance(requireContext())\n\n        // Load the preferences from an XML resource\n        setPreferencesFromResource(R.xml.preferences, rootKey)\n    }\n</code></pre>\n<p>The Kotlin version of the <code>EncryptedPreferenceDataStore</code>: I'm using the <code>also</code> keyword for the singleton, similarly as the Google source code related Room example in <a href=\"https://stackoverflow.com/questions/40398072/singleton-with-parameter-in-kotlin\">Singleton with parameter in Kotlin</a></p>\n<pre><code>class EncryptedPreferenceDataStore private constructor(context: Context) : PreferenceDataStore() {\n    companion object {\n        private const val SHARED_PREFERENCES_NAME = &quot;secret_shared_preferences&quot;\n\n        @Volatile private var INSTANCE: EncryptedPreferenceDataStore? = null\n\n        fun getInstance(context: Context): EncryptedPreferenceDataStore =\n            INSTANCE ?: synchronized(this) {\n                INSTANCE ?: EncryptedPreferenceDataStore(context).also { INSTANCE = it }\n            }\n    }\n\n    private var mSharedPreferences: SharedPreferences\n    private lateinit var mContext: Context\n\n    init {\n        try {\n            mContext = context\n            val masterKey = MasterKey.Builder(context, MasterKey.DEFAULT_MASTER_KEY_ALIAS)\n                .setKeyScheme(MasterKey.KeyScheme.AES256_GCM)\n                .build()\n\n            mSharedPreferences = EncryptedSharedPreferences.create(\n                context,\n                SHARED_PREFERENCES_NAME,\n                masterKey,\n                EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,\n                EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM\n            )\n        } catch (e: Exception) {\n            // Fallback, default mode is Context.MODE_PRIVATE!\n            mSharedPreferences = PreferenceManager.getDefaultSharedPreferences(context)\n        }\n    }\n\n    override fun putString(key: String, value: String?) {\n        mSharedPreferences.edit().putString(key, value).apply()\n    }\n\n    override fun putStringSet(key: String, values: Set&lt;String&gt;?) {\n        mSharedPreferences.edit().putStringSet(key, values).apply()\n    }\n\n    override fun putInt(key: String, value: Int) {\n        mSharedPreferences.edit().putInt(key, value).apply()\n    }\n\n    override fun putLong(key: String, value: Long) {\n        mSharedPreferences.edit().putLong(key, value).apply()\n    }\n\n    override fun putFloat(key: String, value: Float) {\n        mSharedPreferences.edit().putFloat(key, value).apply()\n    }\n\n    override fun putBoolean(key: String, value: Boolean) {\n        mSharedPreferences.edit().putBoolean(key, value).apply()\n    }\n\n    override fun getString(key: String, defValue: String?): String? {\n        return mSharedPreferences.getString(key, defValue)\n    }\n\n    override fun getStringSet(key: String, defValues: Set&lt;String&gt;?): Set&lt;String&gt;? {\n        return mSharedPreferences.getStringSet(key, defValues)\n    }\n\n    override fun getInt(key: String, defValue: Int): Int {\n        return mSharedPreferences.getInt(key, defValue)\n    }\n\n    override fun getLong(key: String, defValue: Long): Long {\n        return mSharedPreferences.getLong(key, defValue)\n    }\n\n    override fun getFloat(key: String, defValue: Float): Float {\n        return mSharedPreferences.getFloat(key, defValue)\n    }\n\n    override fun getBoolean(key: String, defValue: Boolean): Boolean {\n        return mSharedPreferences.getBoolean(key, defValue)\n    }\n}\n</code></pre>\n<p>Maybe it could be even more thread safe by double synchronized checking?</p>\n"},{"tags":[],"owner":{"account_id":7740347,"reputation":452,"user_id":5860352,"display_name":"Doron Ben-Ari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673044635,"creation_date":1673039868,"answer_id":75036147,"question_id":58515475,"body_markdown":"Took the answers here, added a touch of Kotlin sugar to make it shorter, avoided using unreleased library versions, and here is what came out:\r\n\r\n## Dependencies: ##\r\n```groovy\r\ndependencies {\r\n    implementation &quot;androidx.security:security-crypto:1.0.0&quot;\r\n    implementation &#39;androidx.preference:preference-ktx:1.2.0&#39;\r\n}\r\n```\r\n\r\n## DataStore: ##\r\n```kotlin\r\nlateinit var dataStore: PreferenceDataStore\r\nlateinit var globalPreferences: SharedPreferences\r\n\r\nprivate const val SHARED_PREFERENCES_NAME = &quot;secret_shared_preferences&quot;\r\n\r\nfun prepareDataStore(context: Context) {\r\n\r\n    val masterKey = MasterKeys.getOrCreate(MasterKeys.AES256_GCM_SPEC)\r\n\r\n    globalPreferences = EncryptedSharedPreferences.create(\r\n        SHARED_PREFERENCES_NAME,\r\n        masterKey,\r\n        context,\r\n        EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,\r\n        EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM\r\n    )\r\n\r\n    dataStore = object :\r\n        PreferenceDataStore(), SharedPreferences by globalPreferences {\r\n\r\n        private val editor by lazy { globalPreferences.edit() }\r\n\r\n        override fun putString(key: String, value: String?) =\r\n            editor.putString(key, value).apply()\r\n\r\n        override fun putStringSet(key: String, values: Set&lt;String&gt;?) =\r\n            editor.putStringSet(key, values).apply()\r\n\r\n        override fun putInt(key: String, value: Int) =\r\n            editor.putInt(key, value).apply()\r\n\r\n        override fun putLong(key: String, value: Long) =\r\n            editor.putLong(key, value).apply()\r\n\r\n        override fun putFloat(key: String, value: Float) =\r\n            editor.putFloat(key, value).apply()\r\n\r\n        override fun putBoolean(key: String, value: Boolean) =\r\n            editor.putBoolean(key, value).apply()\r\n\r\n    }\r\n}\r\n```\r\n\r\n## PreferencesFragment: ##\r\n```kotlin\r\n    class PreferencesFragment: PreferenceFragmentCompat() {\r\n\r\n        override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {\r\n            preferenceManager.preferenceDataStore = dataStore\r\n            setPreferencesFromResource(R.xml.root_preferences, rootKey)\r\n\r\n```\r\n\r\n## Usage: ##\r\n```kotlin\r\n    boolean bIsXXX = globalPreferences.getBoolean(getString(R.string.pref_access_xxx), true);\r\n```\r\n\r\nRemarks:\r\n1. The trick for the get... functions could not work for the put... functions by inheriting ``SharedPreferences.Editor``, because the put... functions have different return values than those of ``PreferenceDataStore`` and also require a call to ``apply()``.\r\n2. Not using singleton is my taste about singletons which depend on arguments and ignore the arguments on next calls. But that is a different subject. I suggest calling ``prepareDataStore`` ones from ``class MyApplication : Application()`` and change its ``Context`` parameter to be ``Application`` to make it clear.\r\n","title":"Is there a way to integrate EncryptedSharedPreference with PreferenceScreen?","body":"<p>Took the answers here, added a touch of Kotlin sugar to make it shorter, avoided using unreleased library versions, and here is what came out:</p>\n<h2>Dependencies:</h2>\n<pre><code>dependencies {\n    implementation &quot;androidx.security:security-crypto:1.0.0&quot;\n    implementation 'androidx.preference:preference-ktx:1.2.0'\n}\n</code></pre>\n<h2>DataStore:</h2>\n<pre class=\"lang-kotlin prettyprint-override\"><code>lateinit var dataStore: PreferenceDataStore\nlateinit var globalPreferences: SharedPreferences\n\nprivate const val SHARED_PREFERENCES_NAME = &quot;secret_shared_preferences&quot;\n\nfun prepareDataStore(context: Context) {\n\n    val masterKey = MasterKeys.getOrCreate(MasterKeys.AES256_GCM_SPEC)\n\n    globalPreferences = EncryptedSharedPreferences.create(\n        SHARED_PREFERENCES_NAME,\n        masterKey,\n        context,\n        EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,\n        EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM\n    )\n\n    dataStore = object :\n        PreferenceDataStore(), SharedPreferences by globalPreferences {\n\n        private val editor by lazy { globalPreferences.edit() }\n\n        override fun putString(key: String, value: String?) =\n            editor.putString(key, value).apply()\n\n        override fun putStringSet(key: String, values: Set&lt;String&gt;?) =\n            editor.putStringSet(key, values).apply()\n\n        override fun putInt(key: String, value: Int) =\n            editor.putInt(key, value).apply()\n\n        override fun putLong(key: String, value: Long) =\n            editor.putLong(key, value).apply()\n\n        override fun putFloat(key: String, value: Float) =\n            editor.putFloat(key, value).apply()\n\n        override fun putBoolean(key: String, value: Boolean) =\n            editor.putBoolean(key, value).apply()\n\n    }\n}\n</code></pre>\n<h2>PreferencesFragment:</h2>\n<pre class=\"lang-kotlin prettyprint-override\"><code>    class PreferencesFragment: PreferenceFragmentCompat() {\n\n        override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {\n            preferenceManager.preferenceDataStore = dataStore\n            setPreferencesFromResource(R.xml.root_preferences, rootKey)\n\n</code></pre>\n<h2>Usage:</h2>\n<pre class=\"lang-kotlin prettyprint-override\"><code>    boolean bIsXXX = globalPreferences.getBoolean(getString(R.string.pref_access_xxx), true);\n</code></pre>\n<p>Remarks:</p>\n<ol>\n<li>The trick for the get... functions could not work for the put... functions by inheriting <code>SharedPreferences.Editor</code>, because the put... functions have different return values than those of <code>PreferenceDataStore</code> and also require a call to <code>apply()</code>.</li>\n<li>Not using singleton is my taste about singletons which depend on arguments and ignore the arguments on next calls. But that is a different subject. I suggest calling <code>prepareDataStore</code> ones from <code>class MyApplication : Application()</code> and change its <code>Context</code> parameter to be <code>Application</code> to make it clear.</li>\n</ol>\n"}],"owner":{"account_id":4345610,"reputation":161,"user_id":3547607,"accept_rate":91,"display_name":"Skeiths Chew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1799,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":4,"score":9,"last_activity_date":1673044635,"creation_date":1571804689,"question_id":58515475,"body_markdown":"I am new to android development.\r\nCurrently, I would like to encrypt a custom named Shared Preference and integrate with PreferenceScreen but failed to do so. I am using dependencies:\r\n\r\n1. androidx.security:security-crypto:1.0.0-alpha02 [EncryptedSharedPreference]\r\n2. androidx.preference:preference:1.1.0 [PreferenceScreen]\r\n\r\nI had tried to research the related information about integration of these 2 features but no related information found.\r\n\r\nFrom my testing, I had an existing encrypted shared preference and tested the following API: \r\n\r\n    getPreferenceManager().setSharedPreferencesName(&quot;MyShared&quot;); //MyShared Is custom named preference.\r\n\r\nBut it ended up save the preference in plain value.\r\n\r\nMy Questions:\r\n\r\n1. Is it possible to integrate these 2 features together in current stage?\r\n2. Does PreferenceScreen provide encrypted feature as I am not aware of?\r\n3. If I am insist to use EncryptedSharedPreference, will it be better that I create a custom activity look like preference screen?","title":"Is there a way to integrate EncryptedSharedPreference with PreferenceScreen?","body":"<p>I am new to android development.\nCurrently, I would like to encrypt a custom named Shared Preference and integrate with PreferenceScreen but failed to do so. I am using dependencies:</p>\n\n<ol>\n<li>androidx.security:security-crypto:1.0.0-alpha02 [EncryptedSharedPreference]</li>\n<li>androidx.preference:preference:1.1.0 [PreferenceScreen]</li>\n</ol>\n\n<p>I had tried to research the related information about integration of these 2 features but no related information found.</p>\n\n<p>From my testing, I had an existing encrypted shared preference and tested the following API: </p>\n\n<pre><code>getPreferenceManager().setSharedPreferencesName(\"MyShared\"); //MyShared Is custom named preference.\n</code></pre>\n\n<p>But it ended up save the preference in plain value.</p>\n\n<p>My Questions:</p>\n\n<ol>\n<li>Is it possible to integrate these 2 features together in current stage?</li>\n<li>Does PreferenceScreen provide encrypted feature as I am not aware of?</li>\n<li>If I am insist to use EncryptedSharedPreference, will it be better that I create a custom activity look like preference screen?</li>\n</ol>\n"},{"tags":["java","spring","thymeleaf"],"comments":[{"owner":{"account_id":65396,"reputation":8715,"user_id":192465,"accept_rate":85,"display_name":"riddle_me_this"},"score":0,"creation_date":1498661886,"post_id":44805112,"comment_id":76592105,"body_markdown":"And the two `bla`s are the same in your example?","body":"And the two <code>bla</code>s are the same in your example?"},{"owner":{"account_id":7753673,"reputation":378,"user_id":5868823,"accept_rate":88,"display_name":"Rhadamez Gindri Hercilio"},"score":0,"creation_date":1498666303,"post_id":44805112,"comment_id":76595459,"body_markdown":"No, just a example, they really have another name.","body":"No, just a example, they really have another name."},{"owner":{"account_id":65396,"reputation":8715,"user_id":192465,"accept_rate":85,"display_name":"riddle_me_this"},"score":1,"creation_date":1498667597,"post_id":44805112,"comment_id":76596253,"body_markdown":"Can you post your controller code?  The link looks correct to me.","body":"Can you post your controller code?  The link looks correct to me."},{"owner":{"account_id":7753673,"reputation":378,"user_id":5868823,"accept_rate":88,"display_name":"Rhadamez Gindri Hercilio"},"score":0,"creation_date":1498669106,"post_id":44805112,"comment_id":76597192,"body_markdown":"I add the updates in description.","body":"I add the updates in description."},{"owner":{"account_id":7753673,"reputation":378,"user_id":5868823,"accept_rate":88,"display_name":"Rhadamez Gindri Hercilio"},"score":0,"creation_date":1498671639,"post_id":44805112,"comment_id":76598706,"body_markdown":"I found the problem: an attribute was going null for the database, make no sense in this.","body":"I found the problem: an attribute was going null for the database, make no sense in this."}],"answers":[{"tags":[],"owner":{"account_id":65396,"reputation":8715,"user_id":192465,"accept_rate":85,"display_name":"riddle_me_this"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1498669541,"creation_date":1498667349,"answer_id":44808044,"question_id":44805112,"body_markdown":"Your solution uses the Standard Syntax and looks correct.  You can try this workaround with concatenation:\r\n\r\n`&lt;a th:href=&quot;${&#39;/blah1/&#39; + {object1.id} + &#39;/blah2/&#39; + {object2.id}}&quot;&gt;some link&lt;/a&gt;`\r\n\r\nUPDATE:\r\n\r\nTry changing the name of the variable to something other than `id`.  There&#39;s a [JIRA][1] about this that I suspect may be causing an issue.  You can also annotate with `@ModelAttribute`.  You should also make sure you&#39;re on the latest version of Spring.\r\n\r\nAlso, you can just do `@PostMapping(&quot;/{id}/bla&quot;)`\r\n\r\n  [1]: https://jira.spring.io/browse/SPR-9349","title":"Thymeleaf URL with multiple variables","body":"<p>Your solution uses the Standard Syntax and looks correct.  You can try this workaround with concatenation:</p>\n\n<p><code>&lt;a th:href=\"${'/blah1/' + {object1.id} + '/blah2/' + {object2.id}}\"&gt;some link&lt;/a&gt;</code></p>\n\n<p>UPDATE:</p>\n\n<p>Try changing the name of the variable to something other than <code>id</code>.  There's a <a href=\"https://jira.spring.io/browse/SPR-9349\" rel=\"nofollow noreferrer\">JIRA</a> about this that I suspect may be causing an issue.  You can also annotate with <code>@ModelAttribute</code>.  You should also make sure you're on the latest version of Spring.</p>\n\n<p>Also, you can just do <code>@PostMapping(\"/{id}/bla\")</code></p>\n"},{"tags":[],"owner":{"account_id":7753673,"reputation":378,"user_id":5868823,"accept_rate":88,"display_name":"Rhadamez Gindri Hercilio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1498671810,"creation_date":1498671810,"answer_id":44809319,"question_id":44805112,"body_markdown":"**The real problem:** an attribute was going null for database. Make no sense in this. I fix this.","title":"Thymeleaf URL with multiple variables","body":"<p><strong>The real problem:</strong> an attribute was going null for database. Make no sense in this. I fix this.</p>\n"},{"tags":[],"owner":{"account_id":5518609,"reputation":973,"user_id":4382399,"accept_rate":87,"display_name":"sndu"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1531986376,"creation_date":1531986376,"answer_id":51417080,"question_id":44805112,"body_markdown":"Try this method. It worked for me\r\n\r\n    &lt;a th:href=&quot;@{/this/istheurl(parameter1 = val1, parameter2 = val2) }&quot;&gt;","title":"Thymeleaf URL with multiple variables","body":"<p>Try this method. It worked for me</p>\n\n<pre><code>&lt;a th:href=\"@{/this/istheurl(parameter1 = val1, parameter2 = val2) }\"&gt;\n</code></pre>\n"}],"owner":{"account_id":7753673,"reputation":378,"user_id":5868823,"accept_rate":88,"display_name":"Rhadamez Gindri Hercilio"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17285,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":44808044,"answer_count":3,"score":9,"last_activity_date":1673043481,"creation_date":1498659436,"question_id":44805112,"body_markdown":"I&#39;m using thymeleaf as template engine in my spring project.\r\n\r\n**My Problem is**: I&#39;m trying to submit my form to url that contains two variables, something like: \r\n\r\nmysite/bla/{id}/bla/{id2} (two variables in url). So, I&#39;m trying with this:\r\n\r\n    th:href=&quot;@{/bla/{id}/bla/{id2} (id=${object1.id}, id2=${object2.id})}&quot;\r\n\r\nThe console shows the error:\r\n\r\n*&quot;Skipping URI variable &#39;id&#39; since the request contains a bind value with the same name.&quot;* So, someone has any ideia whats happening?\r\n\r\nUpdate:\r\n\r\nI changed the path to one variable, just to make some tests, and the problem still happening. The controller is very simple:\r\n\r\n    @PostMapping(value = &quot;/{id}/bla&quot;)\r\n    \tpublic ModelAndView salvarBug(MyObject object,\r\n    \t\t\t@PathVariable(&quot;id&quot;) Long idObject1, Principal principal) {\r\n    \t\t\t    objectService.save(object);\r\n    \t\t\t    return new ModelAndView(&quot;redirect:&quot;+idObject1);\r\n    \t}\r\n\r\nI updated the link in html too:\r\n\r\n\t\t\t&lt;form method=&quot;POST&quot; th:object=&quot;${object}&quot;\r\n\t\t\t\tth:action=&quot;@{/{id}/bla (id=${object.id})}&quot;&gt;\r\n\r\n**The real problem:** an attribute was going null for database. Make no sense in this. I fix this.","title":"Thymeleaf URL with multiple variables","body":"<p>I'm using thymeleaf as template engine in my spring project.</p>\n\n<p><strong>My Problem is</strong>: I'm trying to submit my form to url that contains two variables, something like: </p>\n\n<p>mysite/bla/{id}/bla/{id2} (two variables in url). So, I'm trying with this:</p>\n\n<pre><code>th:href=\"@{/bla/{id}/bla/{id2} (id=${object1.id}, id2=${object2.id})}\"\n</code></pre>\n\n<p>The console shows the error:</p>\n\n<p><em>\"Skipping URI variable 'id' since the request contains a bind value with the same name.\"</em> So, someone has any ideia whats happening?</p>\n\n<p>Update:</p>\n\n<p>I changed the path to one variable, just to make some tests, and the problem still happening. The controller is very simple:</p>\n\n<pre><code>@PostMapping(value = \"/{id}/bla\")\n    public ModelAndView salvarBug(MyObject object,\n            @PathVariable(\"id\") Long idObject1, Principal principal) {\n                objectService.save(object);\n                return new ModelAndView(\"redirect:\"+idObject1);\n    }\n</code></pre>\n\n<p>I updated the link in html too:</p>\n\n<pre><code>        &lt;form method=\"POST\" th:object=\"${object}\"\n            th:action=\"@{/{id}/bla (id=${object.id})}\"&gt;\n</code></pre>\n\n<p><strong>The real problem:</strong> an attribute was going null for database. Make no sense in this. I fix this.</p>\n"},{"tags":["java","spring","junit","mockito","reactive-programming"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1673039702,"post_id":75036105,"comment_id":132416004,"body_markdown":"Do you want to mock/replace `runCommand` or the static `from` method?","body":"Do you want to mock/replace <code>runCommand</code> or the static <code>from</code> method?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1673040739,"post_id":75036105,"comment_id":132416224,"body_markdown":"Just mock mongoClient, db and commandResult, with appropriate `when`s.","body":"Just mock mongoClient, db and commandResult, with appropriate <code>when</code>s."},{"owner":{"account_id":9735309,"reputation":101,"user_id":7218740,"display_name":"junelane"},"score":0,"creation_date":1673043376,"post_id":75036105,"comment_id":132416876,"body_markdown":"mocking the db client actually worked!","body":"mocking the db client actually worked!"}],"answers":[{"tags":[],"owner":{"account_id":9735309,"reputation":101,"user_id":7218740,"display_name":"junelane"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673043437,"creation_date":1673043437,"answer_id":75036582,"question_id":75036105,"body_markdown":"Retuning Mono.just() worked\r\n```\r\n@Test\r\n    void initializeDBTest() {\r\n        final Document bsonDoc = Document.parse(isCSResponse);\r\n        Mockito.when(mongoClient.getDatabase(&quot;admin&quot;)).thenReturn(db);\r\n        Mockito.when(db.runCommand(Mockito.any())).thenReturn(Mono.just(bsonDoc));\r\n        manageDB.initializeDB();\r\n    }\r\n```","title":"How to mock Mono.from(commandResult).block();","body":"<p>Retuning Mono.just() worked</p>\n<pre><code>@Test\n    void initializeDBTest() {\n        final Document bsonDoc = Document.parse(isCSResponse);\n        Mockito.when(mongoClient.getDatabase(&quot;admin&quot;)).thenReturn(db);\n        Mockito.when(db.runCommand(Mockito.any())).thenReturn(Mono.just(bsonDoc));\n        manageDB.initializeDB();\n    }\n</code></pre>\n"}],"owner":{"account_id":9735309,"reputation":101,"user_id":7218740,"display_name":"junelane"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":304,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673043437,"creation_date":1673039366,"question_id":75036105,"body_markdown":"I have a class that invokes mongodb using reactive library and am writing a unit test that includes this private method. How to mock `Mono.from(commandResult).block()` using mockito?\r\n\r\n```\r\nprivate Document runCommand(final String command) {\r\n        final MongoDatabase db = mongoClient.getDatabase(&quot;admin&quot;);\r\n        final Bson bsonDocument = Document.parse(command).toBsonDocument();\r\n        final Publisher&lt;Document&gt; commandResult = db.runCommand(bsonDocument);\r\n        return Mono.from(commandResult).block();\r\n    }\r\n```","title":"How to mock Mono.from(commandResult).block();","body":"<p>I have a class that invokes mongodb using reactive library and am writing a unit test that includes this private method. How to mock <code>Mono.from(commandResult).block()</code> using mockito?</p>\n<pre><code>private Document runCommand(final String command) {\n        final MongoDatabase db = mongoClient.getDatabase(&quot;admin&quot;);\n        final Bson bsonDocument = Document.parse(command).toBsonDocument();\n        final Publisher&lt;Document&gt; commandResult = db.runCommand(bsonDocument);\n        return Mono.from(commandResult).block();\n    }\n</code></pre>\n"},{"tags":["java","generics","avro"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1673040945,"post_id":75036224,"comment_id":132416289,"body_markdown":"Please show a [mcve] of inputs and expected outputs","body":"Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of inputs and expected outputs"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1673042607,"post_id":75036224,"comment_id":132416738,"body_markdown":"Thanks for the update, but I was expecting an Avro schema and what `execute()` will actually return","body":"Thanks for the update, but I was expecting an Avro schema and what <code>execute()</code> will actually return"}],"owner":{"account_id":5216100,"reputation":562,"user_id":4170988,"accept_rate":40,"display_name":"Frederick &#193;lvarez"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":428,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673043330,"creation_date":1673040483,"question_id":75036224,"body_markdown":"I&#39;m just starting with avro and beam, I&#39;m working in a `ptransform` that converts a `SpecificRecord` into a Map.\r\n\r\nThe goal is to iterate the field of the SpecificRecord and write the values into a KV structure, the data is coming from Kafka and the `ptransform` will be used to process different kafka topics that contain data encoded in different avro schemas.\r\n\r\n  \r\n\r\n    private static final class FlattenSpecificRecordRecord\r\n          implements SerializableFunction&lt;KV&lt;String, SpecificRecord&gt;, Iterable&lt;ElasticRow&gt;&gt; {\r\n        private final Stream _stream;\r\n    \r\n        FlattenSpecificRecordRecord(Stream stream) {\r\n          this._stream = stream;\r\n        }\r\n    \r\n        public static FlattenSpecificRecordRecord of(Stream stream) {\r\n          return new FlattenSpecificRecordRecord(stream);\r\n        }\r\n    \r\n        @Override\r\n        public Iterable&lt;ElasticRow&gt; apply(KV&lt;String, SpecificRecord&gt; recordKV) {\r\n          // ElasticRow is like a map\r\n          SpecificRecord record = recordKV.getValue()\r\n          // How to traverse this?\r\n          return ???\r\n        }\r\n      }\r\n\r\nTo traverse I was thinking in something like this\r\n\r\n    public class RecordConverter implements Serializable {\r\n      private final String _className;\r\n      private final SpecificRecord _record;\r\n    \r\n      public RecordConverter(String className, SpecificRecord record) {\r\n        this._className = className;\r\n        this._record = record;\r\n      }\r\n    \r\n      public List&lt;Object&gt; execute() {\r\n        List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\r\n        Schema schema = _record.getSchema();\r\n        GenericRecord avroRecord = new GenericData.Record(_record.getSchema());\r\n        Queue&lt;Schema.Field&gt; fields = new LinkedList&lt;&gt;();\r\n        if (schema.getType() == Schema.Type.RECORD) {\r\n          fields.addAll(schema.getFields());\r\n        }\r\n        for (Schema.Field field : fields) {\r\n          if (field.schema().getType() == Schema.Type.RECORD) {\r\n            fields.add(field);\r\n            continue;\r\n          }\r\n          Object obj = avroRecord.get(field.name());\r\n          System.out.println(&quot;This is your value &quot; + obj);\r\n          objects.add(obj);\r\n        }\r\n        return objects;\r\n      }\r\n    }\r\n\r\nwhere the schema could be something like this (nested records)\r\n\r\n    {\r\n      &quot;type&quot;: &quot;record&quot;,\r\n      &quot;name&quot;: &quot;Address&quot;,\r\n      &quot;fields&quot;: [\r\n        {\r\n          &quot;name&quot;: &quot;streetaddress&quot;,\r\n          &quot;type&quot;: &quot;string&quot;\r\n        },\r\n        {\r\n          &quot;name&quot;: &quot;city&quot;,\r\n          &quot;type&quot;: &quot;City&quot;\r\n        }\r\n      ]\r\n    }\r\n\r\nand the output would be a list of all the nested values within the record\r\n\r\n\r\nBut not sure if this will work, I also checked and the doc says that the recommended way to consume a SpecificRecord is using DatumReader.\r\n\r\nAs part of the payload I have access to the scheme name of the class\r\n`com.company.MyAvroObject` in case this simplifies things a bit like creating an instance using reflection.\r\n\r\nAny advice on how to proceed?\r\n\r\n\r\n","title":"How to dynamically parse an SpecificRecord in avro in Java?","body":"<p>I'm just starting with avro and beam, I'm working in a <code>ptransform</code> that converts a <code>SpecificRecord</code> into a Map.</p>\n<p>The goal is to iterate the field of the SpecificRecord and write the values into a KV structure, the data is coming from Kafka and the <code>ptransform</code> will be used to process different kafka topics that contain data encoded in different avro schemas.</p>\n<pre><code>private static final class FlattenSpecificRecordRecord\n      implements SerializableFunction&lt;KV&lt;String, SpecificRecord&gt;, Iterable&lt;ElasticRow&gt;&gt; {\n    private final Stream _stream;\n\n    FlattenSpecificRecordRecord(Stream stream) {\n      this._stream = stream;\n    }\n\n    public static FlattenSpecificRecordRecord of(Stream stream) {\n      return new FlattenSpecificRecordRecord(stream);\n    }\n\n    @Override\n    public Iterable&lt;ElasticRow&gt; apply(KV&lt;String, SpecificRecord&gt; recordKV) {\n      // ElasticRow is like a map\n      SpecificRecord record = recordKV.getValue()\n      // How to traverse this?\n      return ???\n    }\n  }\n</code></pre>\n<p>To traverse I was thinking in something like this</p>\n<pre><code>public class RecordConverter implements Serializable {\n  private final String _className;\n  private final SpecificRecord _record;\n\n  public RecordConverter(String className, SpecificRecord record) {\n    this._className = className;\n    this._record = record;\n  }\n\n  public List&lt;Object&gt; execute() {\n    List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\n    Schema schema = _record.getSchema();\n    GenericRecord avroRecord = new GenericData.Record(_record.getSchema());\n    Queue&lt;Schema.Field&gt; fields = new LinkedList&lt;&gt;();\n    if (schema.getType() == Schema.Type.RECORD) {\n      fields.addAll(schema.getFields());\n    }\n    for (Schema.Field field : fields) {\n      if (field.schema().getType() == Schema.Type.RECORD) {\n        fields.add(field);\n        continue;\n      }\n      Object obj = avroRecord.get(field.name());\n      System.out.println(&quot;This is your value &quot; + obj);\n      objects.add(obj);\n    }\n    return objects;\n  }\n}\n</code></pre>\n<p>where the schema could be something like this (nested records)</p>\n<pre><code>{\n  &quot;type&quot;: &quot;record&quot;,\n  &quot;name&quot;: &quot;Address&quot;,\n  &quot;fields&quot;: [\n    {\n      &quot;name&quot;: &quot;streetaddress&quot;,\n      &quot;type&quot;: &quot;string&quot;\n    },\n    {\n      &quot;name&quot;: &quot;city&quot;,\n      &quot;type&quot;: &quot;City&quot;\n    }\n  ]\n}\n</code></pre>\n<p>and the output would be a list of all the nested values within the record</p>\n<p>But not sure if this will work, I also checked and the doc says that the recommended way to consume a SpecificRecord is using DatumReader.</p>\n<p>As part of the payload I have access to the scheme name of the class\n<code>com.company.MyAvroObject</code> in case this simplifies things a bit like creating an instance using reflection.</p>\n<p>Any advice on how to proceed?</p>\n"},{"tags":["java","return-value","completable-future","autocloseable","closeable"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1673040560,"post_id":75035870,"comment_id":132416178,"body_markdown":"_When_ do you want it to be closed? What does your method execute?","body":"<i>When</i> do you want it to be closed? What does your method execute?"},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1673041047,"post_id":75035870,"comment_id":132416313,"body_markdown":"That&#39;s not possible. You either consume your autoclosable in the try-with-resources block you declare it, or you return it and the client code has to close it. It does seem like a questionable design decision to return a closable in a future tbh.","body":"That&#39;s not possible. You either consume your autoclosable in the try-with-resources block you declare it, or you return it and the client code has to close it. It does seem like a questionable design decision to return a closable in a future tbh."}],"answers":[{"tags":[],"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673042706,"creation_date":1673042706,"answer_id":75036496,"question_id":75035870,"body_markdown":"In general, this is not possible; `CompletableFuture` is not designed for this. As you&#39;ve noted, you can&#39;t close the resource before completing the future, because then it will be closed before any consumers get to act on it. That means the consumer will have to be responsible for closing the resource.\r\n\r\nHowever, if your goal is to only need that `Jedis` instance in the _one_ `whenComplete` call, then perhaps there is an alternative solution. Either modify `execute()` or create a new method that looks something like the following:\r\n\r\n```lang-java\r\n&lt;T&gt; CompletableFuture&lt;T&gt; execute(Function&lt;? super Jedis, ? extends T&gt; func) {\r\n    if (!isServiceActive()) return CompletableFuture.completedFuture(null);\r\n    return CompletableFuture.supplyAsync(() -&gt; {\r\n        try (Jedis jedis = pool.getResource()) {\r\n            return func.apply(jedis);\r\n        } catch (Exception ex) {\r\n            // log exception\r\n            throw new CompletionException(ex);\r\n        }\r\n    }), executor);\r\n}\r\n``` \r\n\r\nThe `Jedis` instance is closed by the time the future completes, but it still lets you do the needed work in the `Function` implementation. Using it would look like:\r\n\r\n```lang-java\r\nexecute(jedis -&gt; {\r\n    // use Jedis instance\r\n    return result;\r\n})\r\n.whenComplete((result, error) -&gt; {\r\n    if (error != null) {\r\n        // process error\r\n    } else {\r\n       // process result\r\n    }\r\n});\r\n```\r\n\r\nThough I don&#39;t know if your code can be modified to use this approach, as I notice your `execute()` method is an override (whether from a class/interface you control, I don&#39;t know). But even if you can&#39;t modify `execute()` directly or supply an overload feasibly, you might still be able to create a utility method that does something similar to the above.\r\n","title":"Return autocloseable object inside a CompletableFuture and use it in whenComplete","body":"<p>In general, this is not possible; <code>CompletableFuture</code> is not designed for this. As you've noted, you can't close the resource before completing the future, because then it will be closed before any consumers get to act on it. That means the consumer will have to be responsible for closing the resource.</p>\n<p>However, if your goal is to only need that <code>Jedis</code> instance in the <em>one</em> <code>whenComplete</code> call, then perhaps there is an alternative solution. Either modify <code>execute()</code> or create a new method that looks something like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;T&gt; CompletableFuture&lt;T&gt; execute(Function&lt;? super Jedis, ? extends T&gt; func) {\n    if (!isServiceActive()) return CompletableFuture.completedFuture(null);\n    return CompletableFuture.supplyAsync(() -&gt; {\n        try (Jedis jedis = pool.getResource()) {\n            return func.apply(jedis);\n        } catch (Exception ex) {\n            // log exception\n            throw new CompletionException(ex);\n        }\n    }), executor);\n}\n</code></pre>\n<p>The <code>Jedis</code> instance is closed by the time the future completes, but it still lets you do the needed work in the <code>Function</code> implementation. Using it would look like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>execute(jedis -&gt; {\n    // use Jedis instance\n    return result;\n})\n.whenComplete((result, error) -&gt; {\n    if (error != null) {\n        // process error\n    } else {\n       // process result\n    }\n});\n</code></pre>\n<p>Though I don't know if your code can be modified to use this approach, as I notice your <code>execute()</code> method is an override (whether from a class/interface you control, I don't know). But even if you can't modify <code>execute()</code> directly or supply an overload feasibly, you might still be able to create a utility method that does something similar to the above.</p>\n"}],"owner":{"account_id":18233830,"reputation":23,"user_id":13272252,"display_name":"renvins"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75036496,"answer_count":1,"score":1,"last_activity_date":1673042706,"creation_date":1673037468,"question_id":75035870,"body_markdown":"I want to return an autocloseable object inside a CompletableFuture and use it in whenComplete without going to close it manually later.\r\n\r\nThis is the code that I&#39;ve tried, but of course it won&#39;t work because it closes automatically when I return Jedis object. I haven&#39;t got any other ideas.\r\n\r\n    @Override\r\n        public CompletableFuture&lt;Jedis&gt; execute() {\r\n           if(!isServiceActive()) return CompletableFuture.completedFuture(null);\r\n           return CompletableFuture.supplyAsync(() -&gt; {\r\n               try (Jedis jedis = pool.getResource()) {\r\n                  return jedis;\r\n              } catch (RuntimeException e) {\r\n                  logger.severe(&quot;Impossibile ottenere una nuova risorsa Jedis!&quot;, e);\r\n                  throw new CompletionException(e);\r\n              }\r\n          }, executor);\r\n      }","title":"Return autocloseable object inside a CompletableFuture and use it in whenComplete","body":"<p>I want to return an autocloseable object inside a CompletableFuture and use it in whenComplete without going to close it manually later.</p>\n<p>This is the code that I've tried, but of course it won't work because it closes automatically when I return Jedis object. I haven't got any other ideas.</p>\n<pre><code>@Override\n    public CompletableFuture&lt;Jedis&gt; execute() {\n       if(!isServiceActive()) return CompletableFuture.completedFuture(null);\n       return CompletableFuture.supplyAsync(() -&gt; {\n           try (Jedis jedis = pool.getResource()) {\n              return jedis;\n          } catch (RuntimeException e) {\n              logger.severe(&quot;Impossibile ottenere una nuova risorsa Jedis!&quot;, e);\n              throw new CompletionException(e);\n          }\n      }, executor);\n  }\n</code></pre>\n"},{"tags":["java","swing","rendering"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1672804900,"post_id":75000755,"comment_id":132354234,"body_markdown":"Id consider looking into using the glassPane","body":"Id consider looking into using the glassPane"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1672807213,"post_id":75000755,"comment_id":132354527,"body_markdown":"*I&#39;d like it to render above everything else in the UI while being dragged.* - Check out: https://stackoverflow.com/questions/6811247/drawing-in-jlayeredpane-over-exising-jpanels/6811800#6811800 for an example that uses a JLayeredPane to drag a JLabel around a chess board.","body":"<i>I&#39;d like it to render above everything else in the UI while being dragged.</i> - Check out: <a href=\"https://stackoverflow.com/questions/6811247/drawing-in-jlayeredpane-over-exising-jpanels/6811800#6811800\" title=\"drawing in jlayeredpane over exising jpanels\">stackoverflow.com/questions/6811247/&hellip;</a> for an example that uses a JLayeredPane to drag a JLabel around a chess board."},{"owner":{"account_id":18870627,"reputation":49,"user_id":13765314,"display_name":"ix0rai"},"score":0,"creation_date":1672890853,"post_id":75000755,"comment_id":132376706,"body_markdown":"that question is a start, but I&#39;m having issues with  \na. setting the correct position while dragging  \nand b. adding to the correct panel after dragging completes","body":"that question is a start, but I&#39;m having issues with   a. setting the correct position while dragging   and b. adding to the correct panel after dragging completes"},{"owner":{"account_id":18870627,"reputation":49,"user_id":13765314,"display_name":"ix0rai"},"score":0,"creation_date":1672890953,"post_id":75000755,"comment_id":132376717,"body_markdown":"the glass pane seems promising though!\nI&#39;ll look into it tomorrow","body":"the glass pane seems promising though! I&#39;ll look into it tomorrow"}],"answers":[{"tags":[],"owner":{"account_id":18870627,"reputation":49,"user_id":13765314,"display_name":"ix0rai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1673042315,"creation_date":1672975391,"answer_id":75026632,"question_id":75000755,"body_markdown":"solved this myself through the usage of a glass pane!\r\nthis code should work in nearly every case, the only issue I&#39;ve found is that the mouse/component position may not be exactly synced if the user has a taskbar position other than bottom.\r\n\r\nthanks to https://stackoverflow.com/users/992484/madprogrammer for suggesting I use swing&#39;s glass pane to fix it.\r\n```java\r\nimport javax.swing.JComponent;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.SwingUtilities;\r\nimport java.awt.Dimension;\r\nimport java.awt.GraphicsEnvironment;\r\nimport java.awt.Rectangle;\r\nimport java.awt.Toolkit;\r\nimport java.awt.event.MouseEvent;\r\nimport java.awt.event.MouseListener;\r\nimport java.awt.event.MouseMotionListener;\r\n\r\npublic class DraggableLabel extends JLabel {\r\n\tprivate JComponent initialParent;\r\n\r\n\tpublic DraggableLabel(String text) {\r\n\t\tsuper(text);\r\n\t\tthis.setOpaque(false);\r\n\r\n\t\tthis.addMouseListener(new MouseListener() {\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseClicked(MouseEvent e) {\r\n\t\t\t\t// no-op\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void mousePressed(MouseEvent e) {\r\n\t\t\t\t// save parent for re-addition after dragging is finished\r\n\t\t\t\tDraggableLabel.this.initialParent = (JComponent) DraggableLabel.this.getParent();\r\n\r\n\t\t\t\t// configure object to be on the glass pane instead of its former pane\r\n\t\t\t\tDraggableLabel.this.setVisible(false);\r\n\t\t\t\tJPanel glassPane = (JPanel) SwingUtilities.getRootPane(DraggableLabel.this).getGlassPane();\r\n\t\t\t\tDraggableLabel.this.initialParent.remove(DraggableLabel.this);\r\n\t\t\t\tglassPane.add(DraggableLabel.this);\r\n\r\n\t\t\t\t// repaint former panel to display removal of element\r\n\t\t\t\tDraggableLabel.this.initialParent.repaint();\r\n\r\n\t\t\t\t// set up glass pane to actually display elements\r\n\t\t\t\tglassPane.setOpaque(false);\r\n\t\t\t\tglassPane.setVisible(true);\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseReleased(MouseEvent e) {\r\n\t\t\t\t// remove from glass pane\r\n\t\t\t\tJPanel glassPane = (JPanel) SwingUtilities.getRootPane(DraggableLabel.this).getGlassPane();\r\n\t\t\t\tglassPane.remove(DraggableLabel.this);\r\n\r\n\t\t\t\t// add to former panel\r\n\t\t\t\tDraggableLabel.this.initialParent.add(DraggableLabel.this);\r\n\t\t\t\tDraggableLabel.this.initialParent.repaint();\r\n\r\n\t\t\t\tDraggableLabel.this.initialParent = null;\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseEntered(MouseEvent e) {\r\n\t\t\t\t// no-op\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseExited(MouseEvent e) {\r\n\t\t\t\t// no-op\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t\tthis.addMouseMotionListener(new MouseMotionListener() {\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseDragged(MouseEvent e) {\r\n\t\t\t\t// get task bar height\r\n\t\t\t\tDimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();\r\n\t\t\t\tRectangle windowSize = GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds();\r\n\t\t\t\tint taskBarHeight = (int) (screenSize.getHeight() - windowSize.getHeight());\r\n\r\n\t\t\t\tint mouseScreenX = e.getXOnScreen();\r\n\t\t\t\tint mouseScreenY = e.getYOnScreen();\r\n\r\n\t\t\t\t// calculate, offsetting y for the task bar\r\n\t\t\t\t// note: task bar offsetting will probably break if people have their taskbar at the top of the screen!\r\n\t\t\t\t// good thing I don&#39;t care!\r\n\t\t\t\tJFrame frame = (JFrame) SwingUtilities.getRoot(DraggableLabel.this);\r\n\t\t\t\tint mouseFrameX = mouseScreenX - frame.getX();\r\n\t\t\t\tint mouseFrameY = mouseScreenY - frame.getY() - taskBarHeight;\r\n\r\n\t\t\t\t// set location and ensure visibility\r\n\t\t\t\tDraggableLabel.this.setLocation(mouseFrameX, mouseFrameY);\r\n\t\t\t\tDraggableLabel.this.setVisible(true);\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseMoved(MouseEvent e) {\r\n\t\t\t\t// no-op\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n```","title":"How can I unconditionally make my swing component render above all others?","body":"<p>solved this myself through the usage of a glass pane!\nthis code should work in nearly every case, the only issue I've found is that the mouse/component position may not be exactly synced if the user has a taskbar position other than bottom.</p>\n<p>thanks to <a href=\"https://stackoverflow.com/users/992484/madprogrammer\">https://stackoverflow.com/users/992484/madprogrammer</a> for suggesting I use swing's glass pane to fix it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.swing.JComponent;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\nimport java.awt.Dimension;\nimport java.awt.GraphicsEnvironment;\nimport java.awt.Rectangle;\nimport java.awt.Toolkit;\nimport java.awt.event.MouseEvent;\nimport java.awt.event.MouseListener;\nimport java.awt.event.MouseMotionListener;\n\npublic class DraggableLabel extends JLabel {\n    private JComponent initialParent;\n\n    public DraggableLabel(String text) {\n        super(text);\n        this.setOpaque(false);\n\n        this.addMouseListener(new MouseListener() {\n            @Override\n            public void mouseClicked(MouseEvent e) {\n                // no-op\n            }\n\n            @Override\n            public void mousePressed(MouseEvent e) {\n                // save parent for re-addition after dragging is finished\n                DraggableLabel.this.initialParent = (JComponent) DraggableLabel.this.getParent();\n\n                // configure object to be on the glass pane instead of its former pane\n                DraggableLabel.this.setVisible(false);\n                JPanel glassPane = (JPanel) SwingUtilities.getRootPane(DraggableLabel.this).getGlassPane();\n                DraggableLabel.this.initialParent.remove(DraggableLabel.this);\n                glassPane.add(DraggableLabel.this);\n\n                // repaint former panel to display removal of element\n                DraggableLabel.this.initialParent.repaint();\n\n                // set up glass pane to actually display elements\n                glassPane.setOpaque(false);\n                glassPane.setVisible(true);\n            }\n\n            @Override\n            public void mouseReleased(MouseEvent e) {\n                // remove from glass pane\n                JPanel glassPane = (JPanel) SwingUtilities.getRootPane(DraggableLabel.this).getGlassPane();\n                glassPane.remove(DraggableLabel.this);\n\n                // add to former panel\n                DraggableLabel.this.initialParent.add(DraggableLabel.this);\n                DraggableLabel.this.initialParent.repaint();\n\n                DraggableLabel.this.initialParent = null;\n            }\n\n            @Override\n            public void mouseEntered(MouseEvent e) {\n                // no-op\n            }\n\n            @Override\n            public void mouseExited(MouseEvent e) {\n                // no-op\n            }\n\n        });\n        this.addMouseMotionListener(new MouseMotionListener() {\n            @Override\n            public void mouseDragged(MouseEvent e) {\n                // get task bar height\n                Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();\n                Rectangle windowSize = GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds();\n                int taskBarHeight = (int) (screenSize.getHeight() - windowSize.getHeight());\n\n                int mouseScreenX = e.getXOnScreen();\n                int mouseScreenY = e.getYOnScreen();\n\n                // calculate, offsetting y for the task bar\n                // note: task bar offsetting will probably break if people have their taskbar at the top of the screen!\n                // good thing I don't care!\n                JFrame frame = (JFrame) SwingUtilities.getRoot(DraggableLabel.this);\n                int mouseFrameX = mouseScreenX - frame.getX();\n                int mouseFrameY = mouseScreenY - frame.getY() - taskBarHeight;\n\n                // set location and ensure visibility\n                DraggableLabel.this.setLocation(mouseFrameX, mouseFrameY);\n                DraggableLabel.this.setVisible(true);\n            }\n\n            @Override\n            public void mouseMoved(MouseEvent e) {\n                // no-op\n            }\n        });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18870627,"reputation":49,"user_id":13765314,"display_name":"ix0rai"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":75026632,"answer_count":1,"score":0,"last_activity_date":1673042315,"creation_date":1672803823,"question_id":75000755,"body_markdown":"I have a `JComponent`, specifically a `JLabel`, that I want to render above all other components in my UI. I&#39;ve made it draggable via [this code](https://gist.github.com/ix0rai/2e075a4df1a1f5d3744f48fea113c976), and I&#39;d like it to render above everything else in the UI while being dragged.\r\n\r\nI&#39;ve attempted to use a `JLayeredPane`, but I couldn&#39;t get it to work with my UI, which is huge and complicated. Ideally there&#39;s some sort of solution that I can simply implement in the component&#39;s `paint(Graphics)` method.","title":"How can I unconditionally make my swing component render above all others?","body":"<p>I have a <code>JComponent</code>, specifically a <code>JLabel</code>, that I want to render above all other components in my UI. I've made it draggable via <a href=\"https://gist.github.com/ix0rai/2e075a4df1a1f5d3744f48fea113c976\" rel=\"nofollow noreferrer\">this code</a>, and I'd like it to render above everything else in the UI while being dragged.</p>\n<p>I've attempted to use a <code>JLayeredPane</code>, but I couldn't get it to work with my UI, which is huge and complicated. Ideally there's some sort of solution that I can simply implement in the component's <code>paint(Graphics)</code> method.</p>\n"},{"tags":["java","sockets","ssl","client-server","tls1.2"],"comments":[{"owner":{"account_id":27393528,"reputation":353,"user_id":20896122,"display_name":"undefined symbol"},"score":2,"creation_date":1672883420,"post_id":75012807,"comment_id":132375659,"body_markdown":"TCP does not have the concept of &#39;message&#39; - it&#39;s just a stream of bytes (i.e. there&#39;s no correlation between the number of &#39;sends&#39; and  the number of &#39;recvs&#39; at the other end) - so if you want &#39;messages&#39; you have to invent them.  TLS invents the &#39;TLS record&#39; via a header which includes the length of the record. [See e.g. Wikipedia](https://en.wikipedia.org/wiki/Transport_Layer_Security#TLS_record).  Your concern about &#39;retriansmissons&#39; is wrong - TCP handles that, not layers above TCP.","body":"TCP does not have the concept of &#39;message&#39; - it&#39;s just a stream of bytes (i.e. there&#39;s no correlation between the number of &#39;sends&#39; and  the number of &#39;recvs&#39; at the other end) - so if you want &#39;messages&#39; you have to invent them.  TLS invents the &#39;TLS record&#39; via a header which includes the length of the record. <a href=\"https://en.wikipedia.org/wiki/Transport_Layer_Security#TLS_record\" rel=\"nofollow noreferrer\">See e.g. Wikipedia</a>.  Your concern about &#39;retriansmissons&#39; is wrong - TCP handles that, not layers above TCP."},{"owner":{"account_id":3058606,"reputation":21,"user_id":2591759,"display_name":"leandro.marques"},"score":0,"creation_date":1672921464,"post_id":75012807,"comment_id":132384310,"body_markdown":"Thanks for the info. I understood TCP is responsible for retransmissions and I don&#39;t need to handle this in the app. However, I do receive half of some TLS record on the way and can not identify it, that is the problem. For example: a TLS record I am waiting has 1000 bytes but I get only 700 bytes in the socket read. The last 300 bytes needs to be received on another read, but I can&#39;t know the size of the current TLS record. Is there any way to do it in Java?","body":"Thanks for the info. I understood TCP is responsible for retransmissions and I don&#39;t need to handle this in the app. However, I do receive half of some TLS record on the way and can not identify it, that is the problem. For example: a TLS record I am waiting has 1000 bytes but I get only 700 bytes in the socket read. The last 300 bytes needs to be received on another read, but I can&#39;t know the size of the current TLS record. Is there any way to do it in Java?"},{"owner":{"account_id":27393528,"reputation":353,"user_id":20896122,"display_name":"undefined symbol"},"score":0,"creation_date":1672922875,"post_id":75012807,"comment_id":132384802,"body_markdown":"As long as you&#39;ve got the TLS header (a fixed size) you can find the TLS record length.  But in the cases I&#39;ve seen, I think an SSLEngine is used to handle such details.","body":"As long as you&#39;ve got the TLS header (a fixed size) you can find the TLS record length.  But in the cases I&#39;ve seen, I think an SSLEngine is used to handle such details."},{"owner":{"account_id":3058606,"reputation":21,"user_id":2591759,"display_name":"leandro.marques"},"score":0,"creation_date":1672923146,"post_id":75012807,"comment_id":132384899,"body_markdown":"The error occurs exactly inside SSLEngine when I try to unwrap an amount of bytes I just read from socket. The SSLEngine returns an exception saying: &quot;SSLException: Unrecognized record version&quot; basically because the TLS record may be incomplete","body":"The error occurs exactly inside SSLEngine when I try to unwrap an amount of bytes I just read from socket. The SSLEngine returns an exception saying: &quot;SSLException: Unrecognized record version&quot; basically because the TLS record may be incomplete"},{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1672936094,"post_id":75012807,"comment_id":132390006,"body_markdown":"If the SSLEngine needs more data it tells you, and then you have to read more data from the socket and give it to the SSLEngine.","body":"If the SSLEngine needs more data it tells you, and then you have to read more data from the socket and give it to the SSLEngine."},{"owner":{"account_id":3058606,"reputation":21,"user_id":2591759,"display_name":"leandro.marques"},"score":0,"creation_date":1672949779,"post_id":75012807,"comment_id":132394439,"body_markdown":"@PresidentJamesK.Polk does the SSLEngine tells it by raising an exception? Or there is any way to check it before handling any exception?","body":"@PresidentJamesK.Polk does the SSLEngine tells it by raising an exception? Or there is any way to check it before handling any exception?"}],"answers":[{"tags":[],"owner":{"account_id":3058606,"reputation":21,"user_id":2591759,"display_name":"leandro.marques"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673042189,"creation_date":1673042189,"answer_id":75036436,"question_id":75012807,"body_markdown":"After getting comments and better understanding TLS protocol, I could work out a solution for the problem by implementing a buffer and getting the exact size of a TLS Record to wait for other TCP reads.\r\n\r\nA TLS record &quot;might be split into multiple TCP fragments or TCP fragments might also contain multiple TLS records in full, in half or whatever. These TCP fragments then might even be cut into multiple IP packets although TCP tries hard to avoid this.&quot;, from [https://stackoverflow.com/questions/59189045/determine-packet-size-of-tls-packet-java-android][1]. However, that post mentions first 2 bytes and it is not right. According to [https://hpbn.co/transport-layer-security-tls/#tls-record-diagram][2]:\r\n\r\n&gt; Maximum TLS record size is 16 KB\r\n&gt; \r\n&gt; **Each record contains a 5-byte header**, a MAC (up to 20 bytes for SSLv3,\r\n&gt; TLS 1.0, TLS 1.1, and up to 32 bytes for TLS 1.2), and padding if a\r\n&gt; block cipher is used.\r\n&gt; \r\n&gt; **To decrypt and verify the record, the entire record must be available.**\r\n\r\nThe TLS record size lies on the 3rd and 4th bytes:\r\n\r\n[![TLS Record Protocol][3]][3]\r\n\r\nThe code ended up being like this:\r\n\r\n    protected synchronized void read(SocketChannel socketChannel, SSLEngine engine) throws IOException {\r\n\r\n        this.peerNetData.clear();\r\n        int bytesRead = socketChannel.read(this.peerNetData);\r\n        if (bytesRead &gt; 0) {\r\n            // TLS records buffering\r\n            this.peerNetData.flip();\r\n            byte[] justRead = new byte[this.peerNetData.limit()];\r\n            this.peerNetData.get(justRead);\r\n            this.tlsRecordsReadBuffer.put(justRead);\r\n            byte[] fullTlsRecord;\r\n\r\n            // Process every TLS record available until buffer is empty or the last record is yet not complete\r\n            while ( (fullTlsRecord = this.getFullTlsRecordFromBufferAndDeleteIt()) != null ) {\r\n                    this.peerNetData.clear();\r\n                    this.peerNetData.put(fullTlsRecord);\r\n                    handleEncryptedTransaction(socketChannel, engine);\r\n            }\r\n        } else if (bytesRead &lt; 0) {\r\n            handleEndOfStream(socketChannel, engine);\r\n        }\r\n    }\r\n\r\n    private synchronized byte[] getFullTlsRecordFromBufferAndDeleteIt() {\r\n        byte[] result = null;\r\n        this.tlsRecordsReadBuffer.flip();\r\n\r\n        if (this.tlsRecordsReadBuffer.limit() &gt; DEFAULT_TLS_HEADER_SIZE) {\r\n            // Read only the first 5 bytes (5 = DEFAULT_TLS_HEADER_SIZE) which contains TLS record length\r\n            byte[] tlsHeader = new byte[DEFAULT_TLS_HEADER_SIZE];\r\n            this.tlsRecordsReadBuffer.get(tlsHeader);\r\n\r\n            **// read 3rd and 4th bytes to get TLS record length in big endian notation\r\n            int tlsRecordSize = ((tlsHeader[3] &amp; 0xff) &lt;&lt; 8) | (tlsHeader[4] &amp; 0xff);**\r\n            // 0xff IS NECESSARY because it removes one-bit negative representation\r\n            // Set  position back to the beginning\r\n            this.tlsRecordsReadBuffer.position(0);\r\n            if (this.tlsRecordsReadBuffer.limit() &gt;= (tlsRecordSize + DEFAULT_TLS_HEADER_SIZE)) {\r\n                // Then we have a complete TLS record\r\n                result = new byte[tlsRecordSize + DEFAULT_TLS_HEADER_SIZE];\r\n                this.tlsRecordsReadBuffer.get(result);\r\n            }\r\n        }\r\n\r\n        // remove record and get back to write mode\r\n        this.tlsRecordsReadBuffer.compact();\r\n        return result;\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/59189045/determine-packet-size-of-tls-packet-java-android\r\n  [2]: https://hpbn.co/transport-layer-security-tls/#tls-record-diagram\r\n  [3]: https://i.stack.imgur.com/JoqjU.png","title":"Handling TCP broken packets over a Secure connections (TLSv2) is failing because I can&#39;t see or decrypt content","body":"<p>After getting comments and better understanding TLS protocol, I could work out a solution for the problem by implementing a buffer and getting the exact size of a TLS Record to wait for other TCP reads.</p>\n<p>A TLS record &quot;might be split into multiple TCP fragments or TCP fragments might also contain multiple TLS records in full, in half or whatever. These TCP fragments then might even be cut into multiple IP packets although TCP tries hard to avoid this.&quot;, from <a href=\"https://stackoverflow.com/questions/59189045/determine-packet-size-of-tls-packet-java-android\">Determine packet size of TLS packet Java/Android</a>. However, that post mentions first 2 bytes and it is not right. According to <a href=\"https://hpbn.co/transport-layer-security-tls/#tls-record-diagram\" rel=\"nofollow noreferrer\">https://hpbn.co/transport-layer-security-tls/#tls-record-diagram</a>:</p>\n<blockquote>\n<p>Maximum TLS record size is 16 KB</p>\n<p><strong>Each record contains a 5-byte header</strong>, a MAC (up to 20 bytes for SSLv3,\nTLS 1.0, TLS 1.1, and up to 32 bytes for TLS 1.2), and padding if a\nblock cipher is used.</p>\n<p><strong>To decrypt and verify the record, the entire record must be available.</strong></p>\n</blockquote>\n<p>The TLS record size lies on the 3rd and 4th bytes:</p>\n<p><a href=\"https://i.stack.imgur.com/JoqjU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JoqjU.png\" alt=\"TLS Record Protocol\" /></a></p>\n<p>The code ended up being like this:</p>\n<pre><code>protected synchronized void read(SocketChannel socketChannel, SSLEngine engine) throws IOException {\n\n    this.peerNetData.clear();\n    int bytesRead = socketChannel.read(this.peerNetData);\n    if (bytesRead &gt; 0) {\n        // TLS records buffering\n        this.peerNetData.flip();\n        byte[] justRead = new byte[this.peerNetData.limit()];\n        this.peerNetData.get(justRead);\n        this.tlsRecordsReadBuffer.put(justRead);\n        byte[] fullTlsRecord;\n\n        // Process every TLS record available until buffer is empty or the last record is yet not complete\n        while ( (fullTlsRecord = this.getFullTlsRecordFromBufferAndDeleteIt()) != null ) {\n                this.peerNetData.clear();\n                this.peerNetData.put(fullTlsRecord);\n                handleEncryptedTransaction(socketChannel, engine);\n        }\n    } else if (bytesRead &lt; 0) {\n        handleEndOfStream(socketChannel, engine);\n    }\n}\n\nprivate synchronized byte[] getFullTlsRecordFromBufferAndDeleteIt() {\n    byte[] result = null;\n    this.tlsRecordsReadBuffer.flip();\n\n    if (this.tlsRecordsReadBuffer.limit() &gt; DEFAULT_TLS_HEADER_SIZE) {\n        // Read only the first 5 bytes (5 = DEFAULT_TLS_HEADER_SIZE) which contains TLS record length\n        byte[] tlsHeader = new byte[DEFAULT_TLS_HEADER_SIZE];\n        this.tlsRecordsReadBuffer.get(tlsHeader);\n\n        **// read 3rd and 4th bytes to get TLS record length in big endian notation\n        int tlsRecordSize = ((tlsHeader[3] &amp; 0xff) &lt;&lt; 8) | (tlsHeader[4] &amp; 0xff);**\n        // 0xff IS NECESSARY because it removes one-bit negative representation\n        // Set  position back to the beginning\n        this.tlsRecordsReadBuffer.position(0);\n        if (this.tlsRecordsReadBuffer.limit() &gt;= (tlsRecordSize + DEFAULT_TLS_HEADER_SIZE)) {\n            // Then we have a complete TLS record\n            result = new byte[tlsRecordSize + DEFAULT_TLS_HEADER_SIZE];\n            this.tlsRecordsReadBuffer.get(result);\n        }\n    }\n\n    // remove record and get back to write mode\n    this.tlsRecordsReadBuffer.compact();\n    return result;\n}\n</code></pre>\n"}],"owner":{"account_id":3058606,"reputation":21,"user_id":2591759,"display_name":"leandro.marques"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673042189,"creation_date":1672879629,"question_id":75012807,"body_markdown":"**I am working on a client application that sends transactions to a server over a TLS connection. The applications sends a given number of bytes and receives 1182 bytes as response. It has been working fine until I started increasing the number of transactions per second**. After that, some response packets started to be broken and cannot be fully received by the client in only read. When I try to unwrap the packet content, it raises an exception and terminates TLS session. \r\n\r\n    javax.net.ssl.SSLException: Unrecognized record version (D)TLS-0.0 , plaintext connection?\r\n    \tat java.base/sun.security.ssl.SSLEngineInputRecord.bytesInCompletePacket(SSLEngineInputRecord.java:98)\r\n    \tat java.base/sun.security.ssl.SSLEngineInputRecord.bytesInCompletePacket(SSLEngineInputRecord.java:64)\r\n    \tat java.base/sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:544)\r\n    \tat java.base/sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:441)\r\n    \tat java.base/sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:420)\r\n    \tat java.base/javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:634)\r\n        at MyClass.handleEncryptedTransaction(MyClass.java:297)\r\n\r\nI tried to use a buffer to accumulate possible broken packages, however I cannot see the packet content before decripting and can only estimate if it is complete based on its size.\r\n\r\n        this.peerNetData.clear();\r\n        int bytesRead = socketChannel.read(this.peerNetData);\r\n        if (bytesRead == DEFAULT_TLS_HANDSHAKE_SIZE) {\r\n            handleEncryptedTransaction(socketChannel, engine);\r\n        } else if (bytesRead &gt; 0) {\r\n            // TLS packet buffering\r\n\r\n            byte[] justRead = new byte[this.peerNetData.position()];\r\n            this.peerNetData.flip();\r\n            this.peerNetData.get(justRead);\r\n            this.incompleteTransactionsBuffer.put(justRead);\r\n\r\n            // DEFAULT_TLS_TRANSACTION_SIZE == 1182\r\n            if (this.incompleteTransactionsBuffer.position() &gt;= DEFAULT_TLS_TRANSACTION_SIZE) {\r\n                this.incompleteTransactionsBuffer.flip(); // flipping to read mode\r\n\r\n                while (this.incompleteTransactionsBuffer.remaining() &gt;= DEFAULT_TLS_TRANSACTION_SIZE) {\r\n                    byte[] fullTransaction = new byte[DEFAULT_TLS_TRANSACTION_SIZE];\r\n\r\n                    this.incompleteTransactionsBuffer.get(fullTransaction, 0, fullTransaction.length);\r\n\r\n                    this.peerNetData.clear();\r\n                    this.peerNetData.put(fullTransaction);\r\n\r\n                    // This method uses this.peerNetData to unwrap data and \r\n                    handleEncryptedTransaction(socketChannel, engine);\r\n                }\r\n                this.incompleteTransactionsBuffer.compact(); // wipe out bytes that had been read and free space of the buffer\r\n            }\r\n        }\r\n\r\n**Is there anyway to check if a TCP packet over TLS is complete?** I tried to read the first 1182 bytes but it doesn&#39;t seem to work. **Interestingly, this code work when I get multiple packets in the response, such as (N * 1182), where N varies from 2 to 7**. Maybe I should wait for another socket read and get another piece of information? \r\n\r\nI suppose this problem occurs because of packet retransmissions caused by heavy traffic. **Is there any other way to deal with TLS packet retransmissions in low level socket connections in Java?**","title":"Handling TCP broken packets over a Secure connections (TLSv2) is failing because I can&#39;t see or decrypt content","body":"<p><strong>I am working on a client application that sends transactions to a server over a TLS connection. The applications sends a given number of bytes and receives 1182 bytes as response. It has been working fine until I started increasing the number of transactions per second</strong>. After that, some response packets started to be broken and cannot be fully received by the client in only read. When I try to unwrap the packet content, it raises an exception and terminates TLS session.</p>\n<pre><code>javax.net.ssl.SSLException: Unrecognized record version (D)TLS-0.0 , plaintext connection?\n    at java.base/sun.security.ssl.SSLEngineInputRecord.bytesInCompletePacket(SSLEngineInputRecord.java:98)\n    at java.base/sun.security.ssl.SSLEngineInputRecord.bytesInCompletePacket(SSLEngineInputRecord.java:64)\n    at java.base/sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:544)\n    at java.base/sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:441)\n    at java.base/sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:420)\n    at java.base/javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:634)\n    at MyClass.handleEncryptedTransaction(MyClass.java:297)\n</code></pre>\n<p>I tried to use a buffer to accumulate possible broken packages, however I cannot see the packet content before decripting and can only estimate if it is complete based on its size.</p>\n<pre><code>    this.peerNetData.clear();\n    int bytesRead = socketChannel.read(this.peerNetData);\n    if (bytesRead == DEFAULT_TLS_HANDSHAKE_SIZE) {\n        handleEncryptedTransaction(socketChannel, engine);\n    } else if (bytesRead &gt; 0) {\n        // TLS packet buffering\n\n        byte[] justRead = new byte[this.peerNetData.position()];\n        this.peerNetData.flip();\n        this.peerNetData.get(justRead);\n        this.incompleteTransactionsBuffer.put(justRead);\n\n        // DEFAULT_TLS_TRANSACTION_SIZE == 1182\n        if (this.incompleteTransactionsBuffer.position() &gt;= DEFAULT_TLS_TRANSACTION_SIZE) {\n            this.incompleteTransactionsBuffer.flip(); // flipping to read mode\n\n            while (this.incompleteTransactionsBuffer.remaining() &gt;= DEFAULT_TLS_TRANSACTION_SIZE) {\n                byte[] fullTransaction = new byte[DEFAULT_TLS_TRANSACTION_SIZE];\n\n                this.incompleteTransactionsBuffer.get(fullTransaction, 0, fullTransaction.length);\n\n                this.peerNetData.clear();\n                this.peerNetData.put(fullTransaction);\n\n                // This method uses this.peerNetData to unwrap data and \n                handleEncryptedTransaction(socketChannel, engine);\n            }\n            this.incompleteTransactionsBuffer.compact(); // wipe out bytes that had been read and free space of the buffer\n        }\n    }\n</code></pre>\n<p><strong>Is there anyway to check if a TCP packet over TLS is complete?</strong> I tried to read the first 1182 bytes but it doesn't seem to work. <strong>Interestingly, this code work when I get multiple packets in the response, such as (N * 1182), where N varies from 2 to 7</strong>. Maybe I should wait for another socket read and get another piece of information?</p>\n<p>I suppose this problem occurs because of packet retransmissions caused by heavy traffic. <strong>Is there any other way to deal with TLS packet retransmissions in low level socket connections in Java?</strong></p>\n"},{"tags":["java","instanceof"],"answers":[{"tags":[],"owner":{"account_id":18069010,"reputation":2524,"user_id":13134095,"display_name":"Manfred"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672685048,"creation_date":1672685048,"answer_id":74985984,"question_id":74985915,"body_markdown":"Application servers often inject [dynamic proxies](https://docs.oracle.com/javase/8/docs/technotes/guides/reflection/proxy.html) for session beans to implement EJB features like transaction handling. Such a proxy only implements the session bean interface, but does not expose other details of the session bean implementation.","title":"Instanceof does not work when I use @EJB, why is that?","body":"<p>Application servers often inject <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/reflection/proxy.html\" rel=\"nofollow noreferrer\">dynamic proxies</a> for session beans to implement EJB features like transaction handling. Such a proxy only implements the session bean interface, but does not expose other details of the session bean implementation.</p>\n"},{"tags":[],"owner":{"account_id":189403,"reputation":303,"user_id":2902165,"accept_rate":10,"display_name":"user2902165"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673042110,"creation_date":1673040339,"answer_id":75036203,"question_id":74985915,"body_markdown":"\r\nIt was a really surprise to me that the app-server did not implement all of the interfaces specified in the session bean in the proxy-implementation.\r\n(It was actually a surprise that it was a proxy and not the bean that was injected, and I have bean in the biz for over 20 years. Wow, new lesson each day)\r\n\r\nI think I solved it pretty good by using Qualifier.\r\nI found this great tutorial:\r\nhttp://buraktas.com/create-qualifiers-cdi-beans/\r\n\r\nUsing that example\r\nI put a Qualifier-annotation class in my interface-project\r\n\r\n    @Qualifier\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target({ElementType.FIELD, ElementType.METHOD, ElementType.TYPE})\r\n    public @interface ExceptionThrowerQualifier {\r\n    }\r\n\r\nI marked a bean with the qualifier in the server-project:\r\n\r\n    @ExceptionThrowerQualifier\r\n    @Stateless\r\n    @TransactionManagement(TransactionManagementType.CONTAINER)\r\n    public class CrudsTransactionSessionBean implements CrudSessionLocal, ExceptionThrower { \r\n\r\nIn my servlet in the web-client-project I Inject it like this:\r\n\r\n\r\n\t@Inject\r\n\t@ExceptionThrowerQualifier\r\n\tprivate CrudSessionLocal crudSessionLocal;\r\n\r\n    protected void doPost(HttpServletRequest request, HttpServletResponse response)\r\n            throws ServletException, IOException {\r\n\r\n        if( crudSessionLocal instanceof ExceptionThrower ) {\r\n            ExceptionThrower exceptionThrower = (ExceptionThrower)crudSessionLocal;\r\n            exceptionThrower.setThrowException(throwException);\r\n        }\r\n\r\n\r\nThe benifit is that the web-client do not need to be aware of the implementation (&quot;loose coupling&quot; between server and web-client, right?). I could just use the interface classes from the web-client\r\nI do not need to implement the ExceptionThrower in the server. This is nice so I could use &quot;instanceof&quot; if I want to.\r\n\r\nBut a big drawback is that at least one class need to be annotated with @ExceptionThrowerQualifier. Else it seems like the app server do not know which class to use for injection. (Perhaps this is only true if there are more then one class that implements the interface CrudSessionLocal.)\r\n\r\nOps, looks like I forgot to mention one thing:\r\n\r\n    @Local\r\n    public interface ExceptionThrower {\r\n\r\nTo make it work this seems to be needed. \r\n\r\nBest regards\r\nFredrik","title":"Instanceof does not work when I use @EJB, why is that?","body":"<p>It was a really surprise to me that the app-server did not implement all of the interfaces specified in the session bean in the proxy-implementation.\n(It was actually a surprise that it was a proxy and not the bean that was injected, and I have bean in the biz for over 20 years. Wow, new lesson each day)</p>\n<p>I think I solved it pretty good by using Qualifier.\nI found this great tutorial:\n<a href=\"http://buraktas.com/create-qualifiers-cdi-beans/\" rel=\"nofollow noreferrer\">http://buraktas.com/create-qualifiers-cdi-beans/</a></p>\n<p>Using that example\nI put a Qualifier-annotation class in my interface-project</p>\n<pre><code>@Qualifier\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.FIELD, ElementType.METHOD, ElementType.TYPE})\npublic @interface ExceptionThrowerQualifier {\n}\n</code></pre>\n<p>I marked a bean with the qualifier in the server-project:</p>\n<pre><code>@ExceptionThrowerQualifier\n@Stateless\n@TransactionManagement(TransactionManagementType.CONTAINER)\npublic class CrudsTransactionSessionBean implements CrudSessionLocal, ExceptionThrower { \n</code></pre>\n<p>In my servlet in the web-client-project I Inject it like this:</p>\n<pre><code>@Inject\n@ExceptionThrowerQualifier\nprivate CrudSessionLocal crudSessionLocal;\n\nprotected void doPost(HttpServletRequest request, HttpServletResponse response)\n        throws ServletException, IOException {\n\n    if( crudSessionLocal instanceof ExceptionThrower ) {\n        ExceptionThrower exceptionThrower = (ExceptionThrower)crudSessionLocal;\n        exceptionThrower.setThrowException(throwException);\n    }\n</code></pre>\n<p>The benifit is that the web-client do not need to be aware of the implementation (&quot;loose coupling&quot; between server and web-client, right?). I could just use the interface classes from the web-client\nI do not need to implement the ExceptionThrower in the server. This is nice so I could use &quot;instanceof&quot; if I want to.</p>\n<p>But a big drawback is that at least one class need to be annotated with @ExceptionThrowerQualifier. Else it seems like the app server do not know which class to use for injection. (Perhaps this is only true if there are more then one class that implements the interface CrudSessionLocal.)</p>\n<p>Ops, looks like I forgot to mention one thing:</p>\n<pre><code>@Local\npublic interface ExceptionThrower {\n</code></pre>\n<p>To make it work this seems to be needed.</p>\n<p>Best regards\nFredrik</p>\n"}],"owner":{"account_id":189403,"reputation":303,"user_id":2902165,"accept_rate":10,"display_name":"user2902165"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1673042110,"creation_date":1672684429,"question_id":74985915,"body_markdown":"I got two interface-classes (actually three) in a maven project called &quot;interface&quot;:\r\n\r\n    @Local\r\n    public interface CrudSessionLocal extends CRUDS {\r\n\t    \r\n    }\r\n\r\n    public interface ExceptionThrower {\r\n\t    \r\n\t    public boolean isThrowException();\r\n\r\n\t    public void setThrowException(boolean throwException);\r\n\r\n    }\r\n\r\nI got a bean in a maven project called &quot;server&quot; (that got dependency to &quot;interface&quot;-project) that implements these interfaces:\r\n\r\n    @Stateless\r\n    @TransactionManagement(TransactionManagementType.CONTAINER)\r\n    public class CrudsTransactionSessionBean implements CrudSessionLocal, ExceptionThrower {\r\n\r\nI got a servlet in a maven project called &quot;web-client&quot; (that got dependency to &quot;interface&quot;-project, but not to &quot;server&quot;-project). The servlet uses the bean like this code below, remark that the declaration uses the interface. \r\n\r\n\t@EJB(beanName = &quot;CrudsTransactionSessionBean&quot;)\r\n\tprivate CrudSessionLocal crudSessionLocal;\r\n\r\n\tprotected void doPost(HttpServletRequest request, HttpServletResponse response)\r\n\t\t\tthrows ServletException, IOException {\r\n\r\n\t\tif( crudSessionLocal instanceof ExceptionThrower ) {\r\n\t\t\tExceptionThrower exceptionThrower = (ExceptionThrower)crudSessionLocal;\r\n\t\t\texceptionThrower.setThrowException(throwException);\r\n\t\t}\r\n\r\n\r\nI thought that use of the interface in the declartion of the bean-member in the servlet is a good practice. For eg I thought that I can reuse the interface.jar and web-client.jar in an other ear but with an other serverlayer like other_server.jar that holds an other bean that does something else as long as the bean is called &quot;CrudsTransactionSessionBean&quot; and implements the interface.\r\n\r\nIn this case the bean also implements the interface ExceptionThrower. The idea is to check in the servlet if the bean is an instanceof ExceptionThrower, then an exception shall be thrown.\r\n\r\nBut to my surprise, at runtime, the member-bean is NOT an instance of ExceptionThrower. It is:\r\n&quot;com.myapp.cruds.server.CrudsTransactionSessionBean_d7q6e8_CrudSessionLocalImpl@617fe9e5&quot; \r\n(That sounds like a CrudsTransactionSessionBean to me and that implements ExceptionThrower)\r\n\r\n\r\nI think I can do it like this, but then I will not acomplish the &quot;loose coupling&quot; between the jar-dependecies.\r\n\r\n\t@EJB(beanName = &quot;CrudsTransactionSessionBean&quot;)\r\n\tprivate CrudsTransactionSessionBean crudSessionLocal;\r\n\r\nDo you guys see why this is happening?\r\nAnd to accomplish the &quot;loose coupling&quot; how should I solve it?\r\n\r\nBtw I use Java 8 and Weblogic 14","title":"Instanceof does not work when I use @EJB, why is that?","body":"<p>I got two interface-classes (actually three) in a maven project called &quot;interface&quot;:</p>\n<pre><code>@Local\npublic interface CrudSessionLocal extends CRUDS {\n    \n}\n\npublic interface ExceptionThrower {\n    \n    public boolean isThrowException();\n\n    public void setThrowException(boolean throwException);\n\n}\n</code></pre>\n<p>I got a bean in a maven project called &quot;server&quot; (that got dependency to &quot;interface&quot;-project) that implements these interfaces:</p>\n<pre><code>@Stateless\n@TransactionManagement(TransactionManagementType.CONTAINER)\npublic class CrudsTransactionSessionBean implements CrudSessionLocal, ExceptionThrower {\n</code></pre>\n<p>I got a servlet in a maven project called &quot;web-client&quot; (that got dependency to &quot;interface&quot;-project, but not to &quot;server&quot;-project). The servlet uses the bean like this code below, remark that the declaration uses the interface.</p>\n<pre><code>@EJB(beanName = &quot;CrudsTransactionSessionBean&quot;)\nprivate CrudSessionLocal crudSessionLocal;\n\nprotected void doPost(HttpServletRequest request, HttpServletResponse response)\n        throws ServletException, IOException {\n\n    if( crudSessionLocal instanceof ExceptionThrower ) {\n        ExceptionThrower exceptionThrower = (ExceptionThrower)crudSessionLocal;\n        exceptionThrower.setThrowException(throwException);\n    }\n</code></pre>\n<p>I thought that use of the interface in the declartion of the bean-member in the servlet is a good practice. For eg I thought that I can reuse the interface.jar and web-client.jar in an other ear but with an other serverlayer like other_server.jar that holds an other bean that does something else as long as the bean is called &quot;CrudsTransactionSessionBean&quot; and implements the interface.</p>\n<p>In this case the bean also implements the interface ExceptionThrower. The idea is to check in the servlet if the bean is an instanceof ExceptionThrower, then an exception shall be thrown.</p>\n<p>But to my surprise, at runtime, the member-bean is NOT an instance of ExceptionThrower. It is:\n&quot;com.myapp.cruds.server.CrudsTransactionSessionBean_d7q6e8_CrudSessionLocalImpl@617fe9e5&quot;\n(That sounds like a CrudsTransactionSessionBean to me and that implements ExceptionThrower)</p>\n<p>I think I can do it like this, but then I will not acomplish the &quot;loose coupling&quot; between the jar-dependecies.</p>\n<pre><code>@EJB(beanName = &quot;CrudsTransactionSessionBean&quot;)\nprivate CrudsTransactionSessionBean crudSessionLocal;\n</code></pre>\n<p>Do you guys see why this is happening?\nAnd to accomplish the &quot;loose coupling&quot; how should I solve it?</p>\n<p>Btw I use Java 8 and Weblogic 14</p>\n"},{"tags":["java","maven","lwjgl"],"answers":[{"tags":[],"owner":{"account_id":2379975,"reputation":891,"user_id":2082195,"accept_rate":80,"display_name":"Valerie Thiesent"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673041888,"creation_date":1673041888,"answer_id":75036402,"question_id":75036298,"body_markdown":"plugins listed under `&lt;pluginManagement&gt;` will only get executed by projects in child directories which have their own `pom.xml`\r\n\r\nplugins for execution in the current project should be listed without `&lt;pluginManagement&gt;`\r\n\r\nto fix remove pluginManagement, or re-organize your plugins to correctly reflect which plugins should be run and which should be used for child projects.\r\n\r\n\r\n```\r\n&lt;build&gt;\r\n  &lt;plugins&gt;\r\n    [...]\r\n  &lt;/plugins&gt;\r\n  &lt;pluginManagement&gt;\r\n    &lt;plugins&gt;\r\n      [...]\r\n    &lt;/plugins&gt;\r\n  &lt;/pluginManagement&gt;\r\n&lt;/build&gt;\r\n```","title":"How do I copy dependencies to output directory with `maven package`","body":"<p>plugins listed under <code>&lt;pluginManagement&gt;</code> will only get executed by projects in child directories which have their own <code>pom.xml</code></p>\n<p>plugins for execution in the current project should be listed without <code>&lt;pluginManagement&gt;</code></p>\n<p>to fix remove pluginManagement, or re-organize your plugins to correctly reflect which plugins should be run and which should be used for child projects.</p>\n<pre><code>&lt;build&gt;\n  &lt;plugins&gt;\n    [...]\n  &lt;/plugins&gt;\n  &lt;pluginManagement&gt;\n    &lt;plugins&gt;\n      [...]\n    &lt;/plugins&gt;\n  &lt;/pluginManagement&gt;\n&lt;/build&gt;\n</code></pre>\n"}],"owner":{"account_id":2379975,"reputation":891,"user_id":2082195,"accept_rate":80,"display_name":"Valerie Thiesent"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":370,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75036402,"answer_count":1,"score":2,"last_activity_date":1673041888,"creation_date":1673041083,"question_id":75036298,"body_markdown":"I have a project which uses LWJGL, and I would like to copy the required jars and related natives to the output directory of the generated jar. I would not like to inject the dependencies into the final jar itself.\r\n\r\nI can run `mvn package` and `mvn dependency:copy-dependencies`, both of which work great.\r\n\r\nMy attempts to run the goal &quot;copy-dependencies&quot; is by adding an execution to the &quot;maven-dependency-plugin&quot; as follows:\r\n\r\n```xml\r\n&lt;executions&gt;\r\n  &lt;execution&gt;\r\n    &lt;id&gt;copy-dependencies&lt;/id&gt;\r\n    &lt;phase&gt;prepare-package&lt;/phase&gt;\r\n    &lt;goals&gt;\r\n      &lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n    &lt;/goals&gt;\r\n    &lt;configuration&gt;\r\n      &lt;outputDirectory&gt;\r\n        ${project.build.directory}/libs\r\n      &lt;/outputDirectory&gt;\r\n    &lt;/configuration&gt;\r\n  &lt;/execution&gt;\r\n&lt;/executions&gt;\r\n```\r\n\r\nand again, as referenced by [this answer](https://stackoverflow.com/a/23986765/2082195), with the same result: packaging completes, creating a jar, but no dependencies beside it. no logging that `prepare-package` is occurring, or the `maven-dependency-plugin` is being run at all.\r\n\r\nI&#39;ve also tried binding to other phases, such as `package`, `validate`, `test`, and none of them will cause an execution to occur. This is the only execution in my `pom.xml`. I have only a handful of plugins:\r\n\r\n```\r\nmaven-clean-plugin\r\nmaven-resources-plugin\r\nmaven-compiler-plugin\r\nmaven-jar-plugin (with a config declaring its manifest, shown below)\r\nmaven-install-plugin\r\nmaven-dependency-plugin\r\n```\r\n\r\nAforementioned config:\r\n```xml\r\n&lt;configuration&gt;\r\n  &lt;archive&gt;\r\n    &lt;manifest&gt;\r\n      &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n      &lt;classpathPrefix&gt;libs/&lt;/classpathPrefix&gt;\r\n      &lt;mainClass&gt;\r\n        xyz.valnet.hadean.HadeanGame\r\n      &lt;/mainClass&gt;\r\n    &lt;/manifest&gt;\r\n  &lt;/archive&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nI additionally have 3 profiles, for selecting which LWJGL natives to use by setting the property `lwjgl-natives` and that being used in the dependencies.\r\n\r\nMy question is mainly: what things could cause this execution to not occur. ","title":"How do I copy dependencies to output directory with `maven package`","body":"<p>I have a project which uses LWJGL, and I would like to copy the required jars and related natives to the output directory of the generated jar. I would not like to inject the dependencies into the final jar itself.</p>\n<p>I can run <code>mvn package</code> and <code>mvn dependency:copy-dependencies</code>, both of which work great.</p>\n<p>My attempts to run the goal &quot;copy-dependencies&quot; is by adding an execution to the &quot;maven-dependency-plugin&quot; as follows:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;executions&gt;\n  &lt;execution&gt;\n    &lt;id&gt;copy-dependencies&lt;/id&gt;\n    &lt;phase&gt;prepare-package&lt;/phase&gt;\n    &lt;goals&gt;\n      &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n    &lt;/goals&gt;\n    &lt;configuration&gt;\n      &lt;outputDirectory&gt;\n        ${project.build.directory}/libs\n      &lt;/outputDirectory&gt;\n    &lt;/configuration&gt;\n  &lt;/execution&gt;\n&lt;/executions&gt;\n</code></pre>\n<p>and again, as referenced by <a href=\"https://stackoverflow.com/a/23986765/2082195\">this answer</a>, with the same result: packaging completes, creating a jar, but no dependencies beside it. no logging that <code>prepare-package</code> is occurring, or the <code>maven-dependency-plugin</code> is being run at all.</p>\n<p>I've also tried binding to other phases, such as <code>package</code>, <code>validate</code>, <code>test</code>, and none of them will cause an execution to occur. This is the only execution in my <code>pom.xml</code>. I have only a handful of plugins:</p>\n<pre><code>maven-clean-plugin\nmaven-resources-plugin\nmaven-compiler-plugin\nmaven-jar-plugin (with a config declaring its manifest, shown below)\nmaven-install-plugin\nmaven-dependency-plugin\n</code></pre>\n<p>Aforementioned config:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt;\n  &lt;archive&gt;\n    &lt;manifest&gt;\n      &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n      &lt;classpathPrefix&gt;libs/&lt;/classpathPrefix&gt;\n      &lt;mainClass&gt;\n        xyz.valnet.hadean.HadeanGame\n      &lt;/mainClass&gt;\n    &lt;/manifest&gt;\n  &lt;/archive&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>I additionally have 3 profiles, for selecting which LWJGL natives to use by setting the property <code>lwjgl-natives</code> and that being used in the dependencies.</p>\n<p>My question is mainly: what things could cause this execution to not occur.</p>\n"},{"tags":["java","security","reflection","private"],"comments":[{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":2,"creation_date":1342268460,"post_id":11483647,"comment_id":15165325,"body_markdown":"Local variables live on the stack, not the heap, so this is a totally different concept. But interesting question anyway.","body":"Local variables live on the stack, not the heap, so this is a totally different concept. But interesting question anyway."},{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1342268533,"post_id":11483647,"comment_id":15165343,"body_markdown":"1. has duplicates all over, for example: http://stackoverflow.com/questions/1555658/is-it-possible-in-java-to-access-private-fields-via-reflection?rq=1","body":"1. has duplicates all over, for example: <a href=\"http://stackoverflow.com/questions/1555658/is-it-possible-in-java-to-access-private-fields-via-reflection?rq=1\" title=\"is it possible in java to access private fields via reflection\">stackoverflow.com/questions/1555658/&hellip;</a>"},{"owner":{"account_id":294022,"reputation":115930,"user_id":597657,"accept_rate":99,"display_name":"Eng.Fouad"},"score":0,"creation_date":1342268675,"post_id":11483647,"comment_id":15165366,"body_markdown":"@Thilo That&#39;s only data members, what about the methods? Is it the same way?","body":"@Thilo That&#39;s only data members, what about the methods? Is it the same way?"},{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1342269056,"post_id":11483647,"comment_id":15165422,"body_markdown":"http://stackoverflow.com/questions/880365/any-way-to-invoke-a-private-method?rq=1","body":"<a href=\"http://stackoverflow.com/questions/880365/any-way-to-invoke-a-private-method?rq=1\" title=\"any way to invoke a private method\">stackoverflow.com/questions/880365/&hellip;</a>"},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":1,"creation_date":1342443216,"post_id":11483647,"comment_id":15200094,"body_markdown":"(You can se a `SecurityManager` to make things behave properly. (And you can access local fields through debugging/tooling interfaces or bytecode injection.))","body":"(You can se a <code>SecurityManager</code> to make things behave properly. (And you can access local fields through debugging/tooling interfaces or bytecode injection.))"}],"answers":[{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1342268543,"creation_date":1342268543,"answer_id":11483702,"question_id":11483647,"body_markdown":"1. Using the method shown in the answer you linked to: [setAccessible(true)][1], which is a method of the superclass of Field, Constructor and Method.\r\n2. No.\r\n3. No, unless the code runs in a JVM you control, where you install a security manager. But if you give someone a jar file, and he uses the classes from this jar file, he&#39;ll be able to access everything.\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28boolean%29","title":"How do I access private methods and private data members via reflection?","body":"<ol>\n<li>Using the method shown in the answer you linked to: <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28boolean%29\">setAccessible(true)</a>, which is a method of the superclass of Field, Constructor and Method.</li>\n<li>No.</li>\n<li>No, unless the code runs in a JVM you control, where you install a security manager. But if you give someone a jar file, and he uses the classes from this jar file, he'll be able to access everything.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":76,"is_accepted":true,"score":76,"last_activity_date":1484336614,"creation_date":1342272592,"answer_id":11484158,"question_id":11483647,"body_markdown":"1) ***How can I access the private methods and the private data members?***\r\n\r\nYou can do it with a little help of the `setAccessible(true)` method:\r\n\r\n    class Dummy{\r\n        private void foo(){\r\n            System.out.println(&quot;hello foo()&quot;);\r\n        }\r\n        private int i = 10;\r\n    }\r\n\r\n    class Test{\r\n        public static void main(String[] args) throws Exception {\r\n            Dummy d = new Dummy();\r\n\r\n            /*---  [INVOKING PRIVATE METHOD]  ---*/\r\n            Method m = Dummy.class.getDeclaredMethod(&quot;foo&quot;);\r\n            //m.invoke(d); // Exception java.lang.IllegalAccessException\r\n            m.setAccessible(true);//Abracadabra\r\n            m.invoke(d); // Now it&#39;s OK\r\n\r\n            /*---  [GETING VALUE FROM PRIVATE FIELD]  ---*/\r\n            Field f = Dummy.class.getDeclaredField(&quot;i&quot;);\r\n            //System.out.println(f.get(d)); // Not accessible now\r\n            f.setAccessible(true); // Abracadabra\r\n            System.out.println(f.get(d)); // Now it&#39;s OK\r\n\r\n            /*---  [SETTING VALUE OF PRIVATE FIELD]  ---*/\r\n            Field f2 = Dummy.class.getDeclaredField(&quot;i&quot;);\r\n            //f2.set(d,20); // Not accessible now\r\n            f2.setAccessible(true); // Abracadabra\r\n            f2.set(d, 20); // Now it&#39;s OK\r\n            System.out.println(f2.get(d));\r\n        }\r\n    }\r\n\r\n2) ***Is it possible to access a local variable via reflection?***\r\n\r\nNo. Local variables cannot be accessed outside of a block in which they were created (someone could say that you can assign such a variable to a field like `field = localVariable;` and later access such a field via reflection, but this way we will be accessing the *value*, not the *variable*).\r\n\r\n3) ***Is there any way to prevent anyone from accessing private constructors, methods, and data members?***\r\n\r\nI think for `constructors` or `methods` you could use stacktrace to check if it was invoked by `Reflection`.\r\n&lt;br/&gt;For fields I can&#39;t find a solution to prevent accessing them via reflection.\r\n\r\n[WARNING: This is not approved by anyone. I just wrote it inspired by your question.]\r\n------------------------------------------------------------------------\r\n\r\n    class Dummy {\r\n        private void safeMethod() {\r\n            StackTraceElement[] st = new Exception().getStackTrace();\r\n            // If a method was invoked by reflection, the stack trace would be similar\r\n            // to something like this:\r\n            /*\r\n            java.lang.Exception\r\n                at package1.b.Dummy.safeMethod(SomeClass.java:38)\r\n                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            -&gt;    at java.lang.reflect.Method.invoke(Method.java:601)\r\n                at package1.b.Test.main(SomeClass.java:65)\r\n            */\r\n            //5th line marked by &quot;-&gt;&quot; is interesting one so I will try to use that info\r\n\r\n            if (st.length &gt; 5 &amp;&amp;\r\n                st[4].getClassName().equals(&quot;java.lang.reflect.Method&quot;))\r\n                throw new RuntimeException(&quot;safeMethod() is accessible only by Dummy object&quot;);\r\n\r\n            // Now normal code of method\r\n            System.out.println(&quot;code of safe method&quot;);\r\n        }\r\n\r\n        // I will check if it is possible to normally use that method inside this class\r\n        public void trySafeMethod(){\r\n            safeMethod();\r\n        }\r\n\r\n        Dummy() {\r\n            safeMethod();\r\n        }\r\n    }\r\n\r\n    class Dummy1 extends Dummy {}\r\n\r\n    class Test {\r\n        public static void main(String[] args) throws Exception {\r\n            Dummy1 d1 = new Dummy1(); // safeMethod can be invoked inside a superclass constructor\r\n            d1.trySafeMethod(); // safeMethod can be invoked inside other Dummy class methods\r\n            System.out.println(&quot;-------------------&quot;);\r\n\r\n            // Let&#39;s check if it is possible to invoke it via reflection\r\n            Method m2 = Dummy.class.getDeclaredMethod(&quot;safeMethod&quot;);\r\n            // m.invoke(d);//exception java.lang.IllegalAccessException\r\n            m2.setAccessible(true);\r\n            m2.invoke(d1);\r\n        }\r\n    }\r\n\r\n**Output from `Test` main method**:\r\n\r\n    code of safe method\r\n    code of safe method\r\n    -------------------\r\n    Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:601)\r\n        at package1.b.Test.main(MyClass2.java:87)\r\n    Caused by: java.lang.RuntimeException: method safeMethod() is accessible only by Dummy object\r\n        at package1.b.Dummy.safeMethod(MyClass2.java:54)\r\n        ... 5 more\r\n","title":"How do I access private methods and private data members via reflection?","body":"<p>1) <strong><em>How can I access the private methods and the private data members?</em></strong></p>\n\n<p>You can do it with a little help of the <code>setAccessible(true)</code> method:</p>\n\n<pre><code>class Dummy{\n    private void foo(){\n        System.out.println(\"hello foo()\");\n    }\n    private int i = 10;\n}\n\nclass Test{\n    public static void main(String[] args) throws Exception {\n        Dummy d = new Dummy();\n\n        /*---  [INVOKING PRIVATE METHOD]  ---*/\n        Method m = Dummy.class.getDeclaredMethod(\"foo\");\n        //m.invoke(d); // Exception java.lang.IllegalAccessException\n        m.setAccessible(true);//Abracadabra\n        m.invoke(d); // Now it's OK\n\n        /*---  [GETING VALUE FROM PRIVATE FIELD]  ---*/\n        Field f = Dummy.class.getDeclaredField(\"i\");\n        //System.out.println(f.get(d)); // Not accessible now\n        f.setAccessible(true); // Abracadabra\n        System.out.println(f.get(d)); // Now it's OK\n\n        /*---  [SETTING VALUE OF PRIVATE FIELD]  ---*/\n        Field f2 = Dummy.class.getDeclaredField(\"i\");\n        //f2.set(d,20); // Not accessible now\n        f2.setAccessible(true); // Abracadabra\n        f2.set(d, 20); // Now it's OK\n        System.out.println(f2.get(d));\n    }\n}\n</code></pre>\n\n<p>2) <strong><em>Is it possible to access a local variable via reflection?</em></strong></p>\n\n<p>No. Local variables cannot be accessed outside of a block in which they were created (someone could say that you can assign such a variable to a field like <code>field = localVariable;</code> and later access such a field via reflection, but this way we will be accessing the <em>value</em>, not the <em>variable</em>).</p>\n\n<p>3) <strong><em>Is there any way to prevent anyone from accessing private constructors, methods, and data members?</em></strong></p>\n\n<p>I think for <code>constructors</code> or <code>methods</code> you could use stacktrace to check if it was invoked by <code>Reflection</code>.\n<br/>For fields I can't find a solution to prevent accessing them via reflection.</p>\n\n<h2>[WARNING: This is not approved by anyone. I just wrote it inspired by your question.]</h2>\n\n<pre><code>class Dummy {\n    private void safeMethod() {\n        StackTraceElement[] st = new Exception().getStackTrace();\n        // If a method was invoked by reflection, the stack trace would be similar\n        // to something like this:\n        /*\n        java.lang.Exception\n            at package1.b.Dummy.safeMethod(SomeClass.java:38)\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        -&gt;    at java.lang.reflect.Method.invoke(Method.java:601)\n            at package1.b.Test.main(SomeClass.java:65)\n        */\n        //5th line marked by \"-&gt;\" is interesting one so I will try to use that info\n\n        if (st.length &gt; 5 &amp;&amp;\n            st[4].getClassName().equals(\"java.lang.reflect.Method\"))\n            throw new RuntimeException(\"safeMethod() is accessible only by Dummy object\");\n\n        // Now normal code of method\n        System.out.println(\"code of safe method\");\n    }\n\n    // I will check if it is possible to normally use that method inside this class\n    public void trySafeMethod(){\n        safeMethod();\n    }\n\n    Dummy() {\n        safeMethod();\n    }\n}\n\nclass Dummy1 extends Dummy {}\n\nclass Test {\n    public static void main(String[] args) throws Exception {\n        Dummy1 d1 = new Dummy1(); // safeMethod can be invoked inside a superclass constructor\n        d1.trySafeMethod(); // safeMethod can be invoked inside other Dummy class methods\n        System.out.println(\"-------------------\");\n\n        // Let's check if it is possible to invoke it via reflection\n        Method m2 = Dummy.class.getDeclaredMethod(\"safeMethod\");\n        // m.invoke(d);//exception java.lang.IllegalAccessException\n        m2.setAccessible(true);\n        m2.invoke(d1);\n    }\n}\n</code></pre>\n\n<p><strong>Output from <code>Test</code> main method</strong>:</p>\n\n<pre><code>code of safe method\ncode of safe method\n-------------------\nException in thread \"main\" java.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:601)\n    at package1.b.Test.main(MyClass2.java:87)\nCaused by: java.lang.RuntimeException: method safeMethod() is accessible only by Dummy object\n    at package1.b.Dummy.safeMethod(MyClass2.java:54)\n    ... 5 more\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2113203,"reputation":9798,"user_id":1878022,"accept_rate":96,"display_name":"VedantK"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1410168090,"creation_date":1410168090,"answer_id":25720945,"question_id":11483647,"body_markdown":"**To access** **a private field** you will need to call the \r\n`Class.getDeclaredField(String name)` or `enter code here` method. \r\n**Check this simple code:**\r\n\r\n    public class PrivateObject {\r\n    \r\n      private String privateString = null;\r\n    \r\n      public PrivateObject(String privateString) {\r\n        this.privateString = privateString;\r\n      }\r\n    }\r\n\r\n    PrivateObject privateObject = new PrivateObject(&quot;The Private Value&quot;);\r\n    \r\n    Field privateStringField = PrivateObject.class.\r\n                getDeclaredField(&quot;privateString&quot;);\r\n    \r\n    privateStringField.setAccessible(true);\r\n    \r\n    String fieldValue = (String) privateStringField.get(privateObject);\r\n    System.out.println(&quot;fieldValue = &quot; + fieldValue\r\n\r\n**To access a private method** you will need to call the Class.getDeclaredMethod(String name, Class[] parameterTypes) or Class.getDeclaredMethods() method.\r\n\r\n**Check this simple code:**\r\n\r\n    public class PrivateObject {\r\n    \r\n      private String privateString = null;\r\n    \r\n      public PrivateObject(String privateString) {\r\n        this.privateString = privateString;\r\n      }\r\n    \r\n      private String getPrivateString(){\r\n        return this.privateString;\r\n      }\r\n    }\r\n    PrivateObject privateObject = new PrivateObject(&quot;The Private Value&quot;);\r\n    \r\n    Method privateStringMethod = PrivateObject.class.\r\n            getDeclaredMethod(&quot;getPrivateString&quot;, null);\r\n    \r\n    privateStringMethod.setAccessible(true);\r\n    \r\n    String returnValue = (String)\r\n            privateStringMethod.invoke(privateObject, null);\r\n    \r\n    System.out.println(&quot;returnValue = &quot; + returnValue);\r\n\r\n Read detail at \r\nhttp://tutorials.jenkov.com/java-reflection/private-fields-and-methods.html\r\n","title":"How do I access private methods and private data members via reflection?","body":"<p><strong>To access</strong> <strong>a private field</strong> you will need to call the \n<code>Class.getDeclaredField(String name)</code> or <code>enter code here</code> method. \n<strong>Check this simple code:</strong></p>\n\n<pre><code>public class PrivateObject {\n\n  private String privateString = null;\n\n  public PrivateObject(String privateString) {\n    this.privateString = privateString;\n  }\n}\n\nPrivateObject privateObject = new PrivateObject(\"The Private Value\");\n\nField privateStringField = PrivateObject.class.\n            getDeclaredField(\"privateString\");\n\nprivateStringField.setAccessible(true);\n\nString fieldValue = (String) privateStringField.get(privateObject);\nSystem.out.println(\"fieldValue = \" + fieldValue\n</code></pre>\n\n<p><strong>To access a private method</strong> you will need to call the Class.getDeclaredMethod(String name, Class[] parameterTypes) or Class.getDeclaredMethods() method.</p>\n\n<p><strong>Check this simple code:</strong></p>\n\n<pre><code>public class PrivateObject {\n\n  private String privateString = null;\n\n  public PrivateObject(String privateString) {\n    this.privateString = privateString;\n  }\n\n  private String getPrivateString(){\n    return this.privateString;\n  }\n}\nPrivateObject privateObject = new PrivateObject(\"The Private Value\");\n\nMethod privateStringMethod = PrivateObject.class.\n        getDeclaredMethod(\"getPrivateString\", null);\n\nprivateStringMethod.setAccessible(true);\n\nString returnValue = (String)\n        privateStringMethod.invoke(privateObject, null);\n\nSystem.out.println(\"returnValue = \" + returnValue);\n</code></pre>\n\n<p>Read detail at \n<a href=\"http://tutorials.jenkov.com/java-reflection/private-fields-and-methods.html\" rel=\"nofollow\">http://tutorials.jenkov.com/java-reflection/private-fields-and-methods.html</a></p>\n"},{"tags":[],"owner":{"account_id":6409015,"reputation":11,"user_id":4969333,"display_name":"Om Deshmukh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1433848407,"creation_date":1433848407,"answer_id":30730421,"question_id":11483647,"body_markdown":"     Area s=(Area)c.newInstance();  \r\n     s.setRadius(10);\r\n     System.out.println(&quot;Area: &quot;+s.calculateArea(4));\r\n     \r\n     Method m[]=c.getDeclaredMethods(); \r\n      Constructor c1[]=c.getConstructors();  \r\n     \r\n     for(int i=0;i&lt;m.length;i++)\r\n    \t System.out.println(&quot;&quot;+m[i]);\r\n     \r\n     for(int i=0;i&lt;c1.length;i++)\r\n    \t System.out.println(&quot;&quot;+c1[i]);\r\n         ","title":"How do I access private methods and private data members via reflection?","body":"<pre><code> Area s=(Area)c.newInstance();  \n s.setRadius(10);\n System.out.println(\"Area: \"+s.calculateArea(4));\n\n Method m[]=c.getDeclaredMethods(); \n  Constructor c1[]=c.getConstructors();  \n\n for(int i=0;i&lt;m.length;i++)\n     System.out.println(\"\"+m[i]);\n\n for(int i=0;i&lt;c1.length;i++)\n     System.out.println(\"\"+c1[i]);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7492594,"reputation":41,"user_id":5693777,"display_name":"Onkar Nevgi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484336766,"creation_date":1459780988,"answer_id":36405804,"question_id":11483647,"body_markdown":"To answer your third question:\r\n\r\n3. Is there a way to prevent anyone from accessing private constructors, methods, and data members?\r\n\r\nAnswer:\r\n\r\nYes, you can restrict the access (you can throw an exception when someone tries to access your private constructor/method/data)\r\n\r\nRefer to the below example:\r\n\r\n    ******JavaSingleton Class******\r\n\r\n    package server;\r\n\r\n    public class JavaSingleton {\r\n\r\n      private static final JavaSingleton INSTANCE = new JavaSingleton();\r\n\r\n      private JavaSingleton() {\r\n        if (INSTANCE != null) {\r\n          throw new IllegalStateException(&quot;Inside JavaSingleton(): JavaSingleton &quot; +\r\n                                                            &quot;instance already created.&quot;);\r\n        }\r\n        System.out.println(&quot;Inside JavaSingleton(): Singleton instance is being created.&quot;);\r\n      }\r\n\r\n      public static final JavaSingleton getInstance() {\r\n        return INSTANCE;\r\n      }\r\n    }\r\n\r\n\r\n    ***Listing 2: JavaSingleton client***\r\n\r\n    import server.JavaSingleton;\r\n    import java.lang.reflect.*;\r\n\r\n    public class TestSingleton {\r\n\r\n      public static void main(String[] args) throws ReflectiveOperationException {\r\n        System.out.println(&quot;Inside main(): Getting the singleton instance using getInstance()...&quot;);\r\n        JavaSingleton s = JavaSingleton.getInstance();\r\n\r\n        System.out.println(&quot;Inside main(): Trying to use reflection to get another instance...&quot;);\r\n        Class&lt;JavaSingleton&gt; clazz = JavaSingleton.class;\r\n        Constructor&lt;JavaSingleton&gt; cons = clazz.getDeclaredConstructor();\r\n        cons.setAccessible(true);\r\n        JavaSingleton s2 = cons.newInstance();\r\n      }\r\n    }\r\n\r\n    Output:\r\n\r\n    C:\\singleton&gt;java TestSingleton\r\n    Inside main(): Getting the singleton instance using getInstance()...\r\n    Inside JavaSingleton(): Singleton instance is being created.\r\n    Inside main(): Trying to use reflection to get another instance...\r\n    Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\r\n      at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n      at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\r\n      at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\r\n      at java.lang.reflect.Constructor.newInstance(Unknown Source)\r\n      at TestSingleton.main(TestSingleton.java:13)\r\n    Caused by: java.lang.IllegalStateException: Inside JavaSingleton(): JavaSingleton instance already created.\r\n      at server.JavaSingleton.&lt;init&gt;(JavaSingleton.java:7)\r\n      ... 5 more\r\n\r\nThis example was for a singleton class (checking in the constructor), but you can still implement this logic for the private methods that you want to prevent access from other classes.\r\n\r\nIn this case you will also declare a static instance and check the value of it in the private method and throw an error in case of any unwanted value.\r\n","title":"How do I access private methods and private data members via reflection?","body":"<p>To answer your third question:</p>\n\n<ol start=\"3\">\n<li>Is there a way to prevent anyone from accessing private constructors, methods, and data members?</li>\n</ol>\n\n<p>Answer:</p>\n\n<p>Yes, you can restrict the access (you can throw an exception when someone tries to access your private constructor/method/data)</p>\n\n<p>Refer to the below example:</p>\n\n<pre><code>******JavaSingleton Class******\n\npackage server;\n\npublic class JavaSingleton {\n\n  private static final JavaSingleton INSTANCE = new JavaSingleton();\n\n  private JavaSingleton() {\n    if (INSTANCE != null) {\n      throw new IllegalStateException(\"Inside JavaSingleton(): JavaSingleton \" +\n                                                        \"instance already created.\");\n    }\n    System.out.println(\"Inside JavaSingleton(): Singleton instance is being created.\");\n  }\n\n  public static final JavaSingleton getInstance() {\n    return INSTANCE;\n  }\n}\n\n\n***Listing 2: JavaSingleton client***\n\nimport server.JavaSingleton;\nimport java.lang.reflect.*;\n\npublic class TestSingleton {\n\n  public static void main(String[] args) throws ReflectiveOperationException {\n    System.out.println(\"Inside main(): Getting the singleton instance using getInstance()...\");\n    JavaSingleton s = JavaSingleton.getInstance();\n\n    System.out.println(\"Inside main(): Trying to use reflection to get another instance...\");\n    Class&lt;JavaSingleton&gt; clazz = JavaSingleton.class;\n    Constructor&lt;JavaSingleton&gt; cons = clazz.getDeclaredConstructor();\n    cons.setAccessible(true);\n    JavaSingleton s2 = cons.newInstance();\n  }\n}\n\nOutput:\n\nC:\\singleton&gt;java TestSingleton\nInside main(): Getting the singleton instance using getInstance()...\nInside JavaSingleton(): Singleton instance is being created.\nInside main(): Trying to use reflection to get another instance...\nException in thread \"main\" java.lang.reflect.InvocationTargetException\n  at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n  at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n  at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n  at java.lang.reflect.Constructor.newInstance(Unknown Source)\n  at TestSingleton.main(TestSingleton.java:13)\nCaused by: java.lang.IllegalStateException: Inside JavaSingleton(): JavaSingleton instance already created.\n  at server.JavaSingleton.&lt;init&gt;(JavaSingleton.java:7)\n  ... 5 more\n</code></pre>\n\n<p>This example was for a singleton class (checking in the constructor), but you can still implement this logic for the private methods that you want to prevent access from other classes.</p>\n\n<p>In this case you will also declare a static instance and check the value of it in the private method and throw an error in case of any unwanted value.</p>\n"},{"tags":[],"owner":{"account_id":7781500,"reputation":7645,"user_id":5887772,"accept_rate":0,"display_name":"kalyani chaudhari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1484336844,"creation_date":1465477300,"answer_id":37726767,"question_id":11483647,"body_markdown":"Example as below:\r\n\r\n    import java.lang.reflect.Constructor;\r\n\r\n    import java.lang.reflect.Field;\r\n\r\n    import java.lang.reflect.InvocationTargetException;\r\n\r\n    import java.lang.reflect.Method;\r\n\r\n    class Test\r\n    {\r\n        private int a = 5;   // Private data member\r\n\r\n        private void call(int n) // Private method\r\n        {\r\n            System.out.println(&quot;in call()  n: &quot; + n);\r\n        }\r\n    }\r\n\r\n    public class Sample\r\n    {\r\n        public static void main(String args[]) throws ClassNotFoundException, NoSuchMethodException, SecurityException, InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException, NoSuchFieldException\r\n        {\r\n            Class c = Class.forName(&quot;Test&quot;);\r\n\r\n            Object obj = c.newInstance();\r\n\r\n            //---- Accessing a private method\r\n            Method m=c.getDeclaredMethod(&quot;call&quot;,new Class[]{int.class});\r\n            m.setAccessible(true);\r\n            m.invoke(obj,7);\r\n\r\n           //---- Accessing a private data member\r\n           Field d = c.getDeclaredField(&quot;a&quot;);\r\n           d.setAccessible(true);\r\n           System.out.println(d.getInt(obj));\r\n        }\r\n    }\r\n\r\n","title":"How do I access private methods and private data members via reflection?","body":"<p>Example as below:</p>\n\n<pre><code>import java.lang.reflect.Constructor;\n\nimport java.lang.reflect.Field;\n\nimport java.lang.reflect.InvocationTargetException;\n\nimport java.lang.reflect.Method;\n\nclass Test\n{\n    private int a = 5;   // Private data member\n\n    private void call(int n) // Private method\n    {\n        System.out.println(\"in call()  n: \" + n);\n    }\n}\n\npublic class Sample\n{\n    public static void main(String args[]) throws ClassNotFoundException, NoSuchMethodException, SecurityException, InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException, NoSuchFieldException\n    {\n        Class c = Class.forName(\"Test\");\n\n        Object obj = c.newInstance();\n\n        //---- Accessing a private method\n        Method m=c.getDeclaredMethod(\"call\",new Class[]{int.class});\n        m.setAccessible(true);\n        m.invoke(obj,7);\n\n       //---- Accessing a private data member\n       Field d = c.getDeclaredField(\"a\");\n       d.setAccessible(true);\n       System.out.println(d.getInt(obj));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":294022,"reputation":115930,"user_id":597657,"accept_rate":99,"display_name":"Eng.Fouad"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66225,"favorite_count":0,"down_vote_count":1,"up_vote_count":28,"accepted_answer_id":11484158,"answer_count":6,"score":27,"last_activity_date":1673041467,"creation_date":1342268098,"question_id":11483647,"body_markdown":"I know that we can access private constructor via reflection as [@Sanjay T. Sharma][1] mentioned in his answer of my question: [Does instanceof Void always return false?][2]\r\n\r\nHowever, [@duffymo][3] [said][4]:\r\n\r\n&gt; you can access private everything with reflection - methods, constructors, data members, everything.\r\n\r\n1. How can I access the private methods and the private data members?\r\n2. Is it possible to access local variable via reflection?\r\n3. Is there a way to prevent anyone from accessing private constructors, methods, and data members?\r\n\r\n  [1]: https://stackoverflow.com/users/193906/sanjay-t-sharma\r\n  [2]: https://stackoverflow.com/questions/6636734/does-instanceof-void-always-return-false\r\n  [3]: https://stackoverflow.com/users/37213/duffymo\r\n  [4]: https://stackoverflow.com/questions/11480181/unit-testing-a-class-with-private-environment-variables/11480226#comment15160872_11480226\r\n","title":"How do I access private methods and private data members via reflection?","body":"<p>I know that we can access private constructor via reflection as <a href=\"https://stackoverflow.com/users/193906/sanjay-t-sharma\">@Sanjay T. Sharma</a> mentioned in his answer of my question: <a href=\"https://stackoverflow.com/questions/6636734/does-instanceof-void-always-return-false\">Does instanceof Void always return false?</a></p>\n\n<p>However, <a href=\"https://stackoverflow.com/users/37213/duffymo\">@duffymo</a> <a href=\"https://stackoverflow.com/questions/11480181/unit-testing-a-class-with-private-environment-variables/11480226#comment15160872_11480226\">said</a>:</p>\n\n<blockquote>\n  <p>you can access private everything with reflection - methods, constructors, data members, everything.</p>\n</blockquote>\n\n<ol>\n<li>How can I access the private methods and the private data members?</li>\n<li>Is it possible to access local variable via reflection?</li>\n<li>Is there a way to prevent anyone from accessing private constructors, methods, and data members?</li>\n</ol>\n"},{"tags":["java","spring","vue.js"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1665559399,"post_id":74037785,"comment_id":130726171,"body_markdown":"In `axios.post(&#39;searchRecord&#39;, this.searchQuery)`, what is `this.searchQuery`?","body":"In <code>axios.post(&#39;searchRecord&#39;, this.searchQuery)</code>, what is <code>this.searchQuery</code>?"},{"owner":{"account_id":26552100,"reputation":470,"user_id":20181249,"display_name":"Sandeep Kumar Nat"},"score":0,"creation_date":1665559520,"post_id":74037785,"comment_id":130726219,"body_markdown":"your request parameter is null right now, which means nothing is going inside parameter from the page .","body":"your request parameter is null right now, which means nothing is going inside parameter from the page ."}],"answers":[{"tags":[],"owner":{"account_id":26564177,"reputation":36,"user_id":20191548,"display_name":"AbhishekVinayak"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1665560619,"creation_date":1665559082,"answer_id":74037857,"question_id":74037785,"body_markdown":"Front end is not sending data to the controller. Try giving default value=null;","title":"Required request parameter &#39;searchQuery&#39; for method parameter type String is not present]","body":"<p>Front end is not sending data to the controller. Try giving default value=null;</p>\n"},{"tags":[],"owner":{"account_id":17489811,"reputation":59,"user_id":12682195,"display_name":"Younis Abbasi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665559747,"creation_date":1665559553,"answer_id":74037962,"question_id":74037785,"body_markdown":"From backend side it seems ok, I think you need to send data in post like that:\r\n\r\n\r\n         searchRecord(){\r\n            axios.post({\r\n               method: &#39;post&#39;,\r\n              url: &#39;/api/searchRecord&#39;,\r\n              data: {\r\n               searchQuery: this.searchQuery\r\n              }\r\n            })\r\n            .then(successResponse =&gt; {\r\n                console.log(successResponse)\r\n                })\r\n                .catch(failResponse =&gt; {\r\n                    alert(&quot;Error(failResponse)&quot;)\r\n                    console.log(failResponse)\r\n                })\r\n\r\n        }\r\n","title":"Required request parameter &#39;searchQuery&#39; for method parameter type String is not present]","body":"<p>From backend side it seems ok, I think you need to send data in post like that:</p>\n<pre><code>     searchRecord(){\n        axios.post({\n           method: 'post',\n          url: '/api/searchRecord',\n          data: {\n           searchQuery: this.searchQuery\n          }\n        })\n        .then(successResponse =&gt; {\n            console.log(successResponse)\n            })\n            .catch(failResponse =&gt; {\n                alert(&quot;Error(failResponse)&quot;)\n                console.log(failResponse)\n            })\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26557785,"reputation":159,"user_id":20186121,"display_name":"Abhishek Kumar Jena"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1665560367,"creation_date":1665560367,"answer_id":74038122,"question_id":74037785,"body_markdown":"basically, it appears when you send no value from the front end but your controller expects some parameter from the frontend side,\r\nto avoid this u can use &quot;required = false&quot; or u can fix a default value based on your requirement to check where you are going wrong.\r\n\r\n    public String searchRecord(@RequestParam(value = &quot;searchQuery&quot;,required = false,defaultValue = &quot;&quot;) String searchQuery) {\r\n    \t\treturn searchRecordService.searchRecordService(searchQuery);\r\n    \t}\r\n\r\n ","title":"Required request parameter &#39;searchQuery&#39; for method parameter type String is not present]","body":"<p>basically, it appears when you send no value from the front end but your controller expects some parameter from the frontend side,\nto avoid this u can use &quot;required = false&quot; or u can fix a default value based on your requirement to check where you are going wrong.</p>\n<pre><code>public String searchRecord(@RequestParam(value = &quot;searchQuery&quot;,required = false,defaultValue = &quot;&quot;) String searchQuery) {\n        return searchRecordService.searchRecordService(searchQuery);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25719058,"reputation":407,"user_id":19476294,"display_name":"Sumit"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1665562173,"creation_date":1665562173,"answer_id":74038487,"question_id":74037785,"body_markdown":"It is not the correct way of sending parameters through axios. \r\nYou can send params by changing your code in frontend to :-\r\n\r\n    axios.post(`api/searchRecord`, null, { params: {\r\n      searchQuery\r\n    }}\r\n\r\nWhich will send the request as :\r\nhttps://localhost:8080/api/searchRecord?searchQuery=valueofsearchtext\r\n\r\n\r\n\r\nKeep your controller as it is as there are no changes required in the backend.\r\n\r\n    @CrossOrigin\r\n        @PostMapping(value = &quot;api/searchRecord&quot;)\r\n        @ResponseBody\r\n        public String searchRecord(@RequestParam(value = &quot;searchQuery&quot;) String searchQuery) {\r\n            System.out.println(searchQuery);\r\n            return searchRecordService.searchRecordService(searchQuery);\r\n        }\r\n\r\n\r\nthis should sort the issue in your code.\r\n\r\n","title":"Required request parameter &#39;searchQuery&#39; for method parameter type String is not present]","body":"<p>It is not the correct way of sending parameters through axios.\nYou can send params by changing your code in frontend to :-</p>\n<pre><code>axios.post(`api/searchRecord`, null, { params: {\n  searchQuery\n}}\n</code></pre>\n<p>Which will send the request as :\nhttps://localhost:8080/api/searchRecord?searchQuery=valueofsearchtext</p>\n<p>Keep your controller as it is as there are no changes required in the backend.</p>\n<pre><code>@CrossOrigin\n    @PostMapping(value = &quot;api/searchRecord&quot;)\n    @ResponseBody\n    public String searchRecord(@RequestParam(value = &quot;searchQuery&quot;) String searchQuery) {\n        System.out.println(searchQuery);\n        return searchRecordService.searchRecordService(searchQuery);\n    }\n</code></pre>\n<p>this should sort the issue in your code.</p>\n"}],"owner":{"account_id":26442209,"reputation":23,"user_id":20086551,"display_name":"bbc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1314,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74038487,"answer_count":4,"score":0,"last_activity_date":1673041118,"creation_date":1665558768,"question_id":74037785,"body_markdown":"I am trying to write a search function, but I encounter a bug when I pass the search query from frontend to backend. I tried most of the solution on Internet but it&#39;s still not ok.\r\n\r\nComplete Error log\r\n&gt; 2022-10-12 15:05:10.575  WARN 21272 --- [nio-8090-exec-2] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter &#39;searchQuery&#39; for method parameter type String is not present]\r\n\r\nfrontend\r\n```\r\n&lt;template&gt;\r\n&lt;div class=&quot;input-group mb-3&quot;&gt;\r\n        &lt;input type=&quot;search&quot; class=&quot;form-control rounded&quot; v-model=&quot;searchQuery&quot; placeholder=&quot;Company name&quot; aria-label=&quot;Search&quot; aria-describedby=&quot;search-addon&quot; /&gt;\r\n        &lt;button type=&quot;button&quot; class=&quot;btn btn-outline-primary&quot; @click=&#39;searchRecord&#39;&gt;Search&lt;/button&gt;\r\n    &lt;/div&gt;\r\n&lt;/template&gt;\r\n&lt;script&gt;\r\nimport axios from &#39;axios&#39;\r\n\r\nexport default {\r\n    name: &#39;RegistrationEnquiry&#39;,\r\n    components: {\r\n\r\n    },\r\n    data() {\r\n        return {\r\n            records: [],\r\n            searchQuery: &#39;&#39;,\r\n        };\r\n    },\r\n    computed: {},\r\n    methods: {\r\n        searchRecord(){\r\n            axios.post(&#39;searchRecord&#39;, this.searchQuery)\r\n            .then(successResponse =&gt; {\r\n                console.log(successResponse)\r\n                })\r\n                .catch(failResponse =&gt; {\r\n                    alert(&quot;Error(failResponse)&quot;)\r\n                    console.log(failResponse)\r\n                })\r\n\r\n        },\r\n    },\r\n}\r\n\r\n&lt;/script&gt;\r\n```\r\n\r\nSearchRecordController.java\r\n```\r\n@Controller\r\npublic class SearchRecordController {\r\n    @Autowired\r\n    SearchRecordService searchRecordService;\r\n\r\n    @CrossOrigin\r\n    @PostMapping(value = &quot;api/searchRecord&quot;)\r\n    @ResponseBody\r\n    public String searchRecord(@RequestParam(value = &quot;searchQuery&quot;) String searchQuery) {\r\n        System.out.println(searchQuery);\r\n        return searchRecordService.searchRecordService(searchQuery);\r\n\t}\r\n}\r\n```\r\n","title":"Required request parameter &#39;searchQuery&#39; for method parameter type String is not present]","body":"<p>I am trying to write a search function, but I encounter a bug when I pass the search query from frontend to backend. I tried most of the solution on Internet but it's still not ok.</p>\n<p>Complete Error log</p>\n<blockquote>\n<p>2022-10-12 15:05:10.575  WARN 21272 --- [nio-8090-exec-2] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'searchQuery' for method parameter type String is not present]</p>\n</blockquote>\n<p>frontend</p>\n<pre><code>&lt;template&gt;\n&lt;div class=&quot;input-group mb-3&quot;&gt;\n        &lt;input type=&quot;search&quot; class=&quot;form-control rounded&quot; v-model=&quot;searchQuery&quot; placeholder=&quot;Company name&quot; aria-label=&quot;Search&quot; aria-describedby=&quot;search-addon&quot; /&gt;\n        &lt;button type=&quot;button&quot; class=&quot;btn btn-outline-primary&quot; @click='searchRecord'&gt;Search&lt;/button&gt;\n    &lt;/div&gt;\n&lt;/template&gt;\n&lt;script&gt;\nimport axios from 'axios'\n\nexport default {\n    name: 'RegistrationEnquiry',\n    components: {\n\n    },\n    data() {\n        return {\n            records: [],\n            searchQuery: '',\n        };\n    },\n    computed: {},\n    methods: {\n        searchRecord(){\n            axios.post('searchRecord', this.searchQuery)\n            .then(successResponse =&gt; {\n                console.log(successResponse)\n                })\n                .catch(failResponse =&gt; {\n                    alert(&quot;Error(failResponse)&quot;)\n                    console.log(failResponse)\n                })\n\n        },\n    },\n}\n\n&lt;/script&gt;\n</code></pre>\n<p>SearchRecordController.java</p>\n<pre><code>@Controller\npublic class SearchRecordController {\n    @Autowired\n    SearchRecordService searchRecordService;\n\n    @CrossOrigin\n    @PostMapping(value = &quot;api/searchRecord&quot;)\n    @ResponseBody\n    public String searchRecord(@RequestParam(value = &quot;searchQuery&quot;) String searchQuery) {\n        System.out.println(searchQuery);\n        return searchRecordService.searchRecordService(searchQuery);\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1673023206,"post_id":75032822,"comment_id":132411291,"body_markdown":"Please describe exactly how the &quot;differences&quot; result is determined and what is &quot;wrong&quot; about your code.","body":"Please describe exactly how the &quot;differences&quot; result is determined and what is &quot;wrong&quot; about your code."},{"owner":{"account_id":3785835,"reputation":7291,"user_id":3143823,"accept_rate":98,"display_name":"tm1701"},"score":0,"creation_date":1673028374,"post_id":75032822,"comment_id":132412937,"body_markdown":"* Differences: see the example. \n* Wrong with my code: it looks very old fashioned. AND to learn more about streaming, lambda, etc from the more experienced ones!","body":"* Differences: see the example.  * Wrong with my code: it looks very old fashioned. AND to learn more about streaming, lambda, etc from the more experienced ones!"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1673045682,"post_id":75032822,"comment_id":132417365,"body_markdown":"Your single example can be arrived at using several algorithms. Either describe in English, or show sufficient examples that cover all edge cases.","body":"Your single example can be arrived at using several algorithms. Either describe in English, or show sufficient examples that cover all edge cases."},{"owner":{"account_id":3785835,"reputation":7291,"user_id":3143823,"accept_rate":98,"display_name":"tm1701"},"score":0,"creation_date":1673114960,"post_id":75032822,"comment_id":132427378,"body_markdown":"Please refer to the very nice answers.","body":"Please refer to the very nice answers."}],"answers":[{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673038456,"creation_date":1673023294,"answer_id":75033714,"question_id":75032822,"body_markdown":"Looks like this is pretty simple algorithm. All you need is group all objects by the value (i.e. create a `Map`) and retreive only these objects, that are single for the given key.\r\n\r\n```java\r\npublic static List&lt;ColValueObject&gt; getUnique(List&lt;ColValueObject&gt; one,\r\n                                             List&lt;ColValueObject&gt; two) {\r\n    // group by value\r\n    Map&lt;String, List&lt;ColValueObject&gt;&gt; map =\r\n            Stream.of(one, two)\r\n                  .flatMap(List::stream)\r\n                  .collect(Collectors.groupingBy(ColValueObject::getValue));\r\n    \r\n    // retreive unique lements only\r\n    return map.values().stream()\r\n              .filter(objs -&gt; objs.size() == 1)\r\n              .map(objs -&gt; objs.get(0))\r\n              .collect(Collectors.toList());\r\n}\r\n```","title":"find differences between lists of objects","body":"<p>Looks like this is pretty simple algorithm. All you need is group all objects by the value (i.e. create a <code>Map</code>) and retreive only these objects, that are single for the given key.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static List&lt;ColValueObject&gt; getUnique(List&lt;ColValueObject&gt; one,\n                                             List&lt;ColValueObject&gt; two) {\n    // group by value\n    Map&lt;String, List&lt;ColValueObject&gt;&gt; map =\n            Stream.of(one, two)\n                  .flatMap(List::stream)\n                  .collect(Collectors.groupingBy(ColValueObject::getValue));\n    \n    // retreive unique lements only\n    return map.values().stream()\n              .filter(objs -&gt; objs.size() == 1)\n              .map(objs -&gt; objs.get(0))\n              .collect(Collectors.toList());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3508935,"reputation":159,"user_id":2933780,"display_name":"galaxy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673023792,"creation_date":1673023792,"answer_id":75033796,"question_id":75032822,"body_markdown":"You could override the `equals` method of your `ColValueObject` type so you can match these objects only by `value`.\r\n\r\nAnd then I recommend using the `removeAll` method which is either in any collection implementing `Collection` ([Java Doc][1]) or in the [CollectionUtils][2] library.\r\n\r\nBasically you would have two resulting lists:\r\n\r\n``` lang-java\r\nList&lt;ColValueObject&gt; result1 = CollectionUtils.removeAll(list2, list1);\r\nList&lt;ColValueObject&gt; result2 = CollectionUtils.removeAll(list1, list2);\r\n```\r\n\r\nFinally you can use the `addAll` method to get the final result list.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#removeAll-java.util.Collection-\r\n  [2]: https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/CollectionUtils.html","title":"find differences between lists of objects","body":"<p>You could override the <code>equals</code> method of your <code>ColValueObject</code> type so you can match these objects only by <code>value</code>.</p>\n<p>And then I recommend using the <code>removeAll</code> method which is either in any collection implementing <code>Collection</code> (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#removeAll-java.util.Collection-\" rel=\"nofollow noreferrer\">Java Doc</a>) or in the <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/CollectionUtils.html\" rel=\"nofollow noreferrer\">CollectionUtils</a> library.</p>\n<p>Basically you would have two resulting lists:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;ColValueObject&gt; result1 = CollectionUtils.removeAll(list2, list1);\nList&lt;ColValueObject&gt; result2 = CollectionUtils.removeAll(list1, list2);\n</code></pre>\n<p>Finally you can use the <code>addAll</code> method to get the final result list.</p>\n"},{"tags":[],"owner":{"account_id":10182598,"reputation":11,"user_id":7518806,"display_name":"Andre_R"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673027099,"creation_date":1673026871,"answer_id":75034329,"question_id":75032822,"body_markdown":"You can first group your list by the rate of each object and count the number of occurences and second filter the resulting stream if the occurences equals 1. Afterwards you have to map the first object of EntrySet to ColValueObject and collect the final list.\r\n\r\n    List&lt;ColValueObject&gt; result = Stream.of(list1, \r\n    list2).flatMap(List::stream).collect(groupingBy(d -&gt; d.getValue())).entrySet().stream().filter(e -&gt; e.getValue().size() == 1).map(e -&gt; e.getValue().get(0)).collect(Collectors.toList());\r\n        System.out.println(result);\r\n\r\nTo use this, the following static import ist necessary:\r\n\r\n    import static java.util.stream.Collectors.groupingBy;","title":"find differences between lists of objects","body":"<p>You can first group your list by the rate of each object and count the number of occurences and second filter the resulting stream if the occurences equals 1. Afterwards you have to map the first object of EntrySet to ColValueObject and collect the final list.</p>\n<pre><code>List&lt;ColValueObject&gt; result = Stream.of(list1, \nlist2).flatMap(List::stream).collect(groupingBy(d -&gt; d.getValue())).entrySet().stream().filter(e -&gt; e.getValue().size() == 1).map(e -&gt; e.getValue().get(0)).collect(Collectors.toList());\n    System.out.println(result);\n</code></pre>\n<p>To use this, the following static import ist necessary:</p>\n<pre><code>import static java.util.stream.Collectors.groupingBy;\n</code></pre>\n"}],"owner":{"account_id":3785835,"reputation":7291,"user_id":3143823,"accept_rate":98,"display_name":"tm1701"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75033714,"answer_count":3,"score":0,"last_activity_date":1673041114,"creation_date":1673018523,"question_id":75032822,"body_markdown":"In Java 11+, is there an elegant way to find the differences between 2 lists of objects? \r\nFiltering should be done on one &#39;value&#39; property of a simple col1, value object. Normally the object will contain at least 2 other properties.\r\n\r\nSuppose I have these 2 lists: \r\n\r\n - List 1:  ( { &quot;left&quot;,&quot;one&quot; }, { &quot;left&quot;,&quot;two&quot; } )\r\n - List 2:  ( { &quot;right&quot;,&quot;two&quot; }, { &quot;right&quot;,&quot;three&quot; } )\r\n\r\nThe result should be a list with: \r\n\r\n - ( { &quot;left&quot;,&quot;one&quot; }, { &quot;right&quot;,&quot;three&quot; } )\r\n\r\nOf course there is a simplistic old way of doing this. That simple program gives: \r\n\r\n&gt; ColValueObject{base=&#39;left&#39;, value=&#39;Value one&#39;}\r\n&gt; ColValueObject{base=&#39;right&#39;, value=&#39;Value four&#39;}\r\n\r\n    public class CompareListOfObjects {\r\n      public static void main(String[] args) {\r\n        List&lt;ColValueObject&gt; list1 = List.of(\r\n                new ColValueObject(&quot;left&quot;, &quot;Value one&quot;),\r\n                new ColValueObject(&quot;left&quot;, &quot;Value two&quot;),\r\n                new ColValueObject(&quot;left&quot;, &quot;Value three&quot;));\r\n        List&lt;ColValueObject&gt; list2 = List.of(\r\n                new ColValueObject(&quot;right&quot;, &quot;Value two&quot;),\r\n                new ColValueObject(&quot;right&quot;, &quot;Value three&quot;),\r\n                new ColValueObject(&quot;right&quot;, &quot;Value four&quot;));\r\n    \r\n        List&lt;ColValueObject&gt; result = findDifferencesBetweenLists(list1, list2);\r\n        result.forEach(System.out::println);\r\n      }\r\n    \r\n      private static List&lt;ColValueObject&gt; findDifferencesBetweenLists(List&lt;ColValueObject&gt; list1, List&lt;ColValueObject&gt; list2) {\r\n        List&lt;ColValueObject&gt; result = new ArrayList&lt;&gt;();\r\n        findUniqueEntriesInList((List&lt;ColValueObject&gt;) list1, (List&lt;ColValueObject&gt;) list2, (List&lt;ColValueObject&gt;) result);\r\n        findUniqueEntriesInList((List&lt;ColValueObject&gt;) list2, (List&lt;ColValueObject&gt;) list1, (List&lt;ColValueObject&gt;) result);\r\n        return result;\r\n      }\r\n    \r\n      private static void findUniqueEntriesInList(List&lt;ColValueObject&gt; list1, List&lt;ColValueObject&gt; list2, List&lt;ColValueObject&gt; result) {\r\n        for (ColValueObject l1 : list1) {\r\n          boolean found = false;\r\n          for (ColValueObject l2 : list2) {\r\n            if (l1.getValue().equals(l2.getValue())) {\r\n              found = true;\r\n              break;\r\n            }\r\n          }\r\n          if (!found) {\r\n            result.add(l1);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    class ColValueObject {\r\n      private String base;\r\n      private String value;\r\n    \r\n      public ColValueObject(String base, String value) {\r\n        this.base = base;\r\n        this.value = value;\r\n      }\r\n    \r\n      public String getBase() {\r\n        return base;\r\n      }\r\n    \r\n      public void setBase(String base) {\r\n        this.base = base;\r\n      }\r\n    \r\n      public String getValue() {\r\n        return value;\r\n      }\r\n    \r\n      public void setValue(String value) {\r\n        this.value = value;\r\n      }\r\n    \r\n      @Override\r\n      public String toString() {\r\n        return &quot;ColValueObject{&quot; +\r\n                &quot;base=&#39;&quot; + base + &#39;\\&#39;&#39; +\r\n                &quot;, value=&#39;&quot; + value + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n      }\r\n    }","title":"find differences between lists of objects","body":"<p>In Java 11+, is there an elegant way to find the differences between 2 lists of objects?\nFiltering should be done on one 'value' property of a simple col1, value object. Normally the object will contain at least 2 other properties.</p>\n<p>Suppose I have these 2 lists:</p>\n<ul>\n<li>List 1:  ( { &quot;left&quot;,&quot;one&quot; }, { &quot;left&quot;,&quot;two&quot; } )</li>\n<li>List 2:  ( { &quot;right&quot;,&quot;two&quot; }, { &quot;right&quot;,&quot;three&quot; } )</li>\n</ul>\n<p>The result should be a list with:</p>\n<ul>\n<li>( { &quot;left&quot;,&quot;one&quot; }, { &quot;right&quot;,&quot;three&quot; } )</li>\n</ul>\n<p>Of course there is a simplistic old way of doing this. That simple program gives:</p>\n<blockquote>\n<p>ColValueObject{base='left', value='Value one'}\nColValueObject{base='right', value='Value four'}</p>\n</blockquote>\n<pre><code>public class CompareListOfObjects {\n  public static void main(String[] args) {\n    List&lt;ColValueObject&gt; list1 = List.of(\n            new ColValueObject(&quot;left&quot;, &quot;Value one&quot;),\n            new ColValueObject(&quot;left&quot;, &quot;Value two&quot;),\n            new ColValueObject(&quot;left&quot;, &quot;Value three&quot;));\n    List&lt;ColValueObject&gt; list2 = List.of(\n            new ColValueObject(&quot;right&quot;, &quot;Value two&quot;),\n            new ColValueObject(&quot;right&quot;, &quot;Value three&quot;),\n            new ColValueObject(&quot;right&quot;, &quot;Value four&quot;));\n\n    List&lt;ColValueObject&gt; result = findDifferencesBetweenLists(list1, list2);\n    result.forEach(System.out::println);\n  }\n\n  private static List&lt;ColValueObject&gt; findDifferencesBetweenLists(List&lt;ColValueObject&gt; list1, List&lt;ColValueObject&gt; list2) {\n    List&lt;ColValueObject&gt; result = new ArrayList&lt;&gt;();\n    findUniqueEntriesInList((List&lt;ColValueObject&gt;) list1, (List&lt;ColValueObject&gt;) list2, (List&lt;ColValueObject&gt;) result);\n    findUniqueEntriesInList((List&lt;ColValueObject&gt;) list2, (List&lt;ColValueObject&gt;) list1, (List&lt;ColValueObject&gt;) result);\n    return result;\n  }\n\n  private static void findUniqueEntriesInList(List&lt;ColValueObject&gt; list1, List&lt;ColValueObject&gt; list2, List&lt;ColValueObject&gt; result) {\n    for (ColValueObject l1 : list1) {\n      boolean found = false;\n      for (ColValueObject l2 : list2) {\n        if (l1.getValue().equals(l2.getValue())) {\n          found = true;\n          break;\n        }\n      }\n      if (!found) {\n        result.add(l1);\n      }\n    }\n  }\n}\n\nclass ColValueObject {\n  private String base;\n  private String value;\n\n  public ColValueObject(String base, String value) {\n    this.base = base;\n    this.value = value;\n  }\n\n  public String getBase() {\n    return base;\n  }\n\n  public void setBase(String base) {\n    this.base = base;\n  }\n\n  public String getValue() {\n    return value;\n  }\n\n  public void setValue(String value) {\n    this.value = value;\n  }\n\n  @Override\n  public String toString() {\n    return &quot;ColValueObject{&quot; +\n            &quot;base='&quot; + base + '\\'' +\n            &quot;, value='&quot; + value + '\\'' +\n            '}';\n  }\n}\n</code></pre>\n"},{"tags":["java","apache-kafka","kafka-consumer-api","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673026433,"creation_date":1673026433,"answer_id":75034256,"question_id":75034076,"body_markdown":"Your `started at time` assumption is not correct. That&#39;s really not a time when concurrent containers are started, but rather the time when they consume records from partitions assigned to them. So, you may just not have any data in the partition to consume at the moment. More over there is no guarantee that all the partitions are assigned to consumers at the same time. So, one consumer may have already started to consume, but other has not obtained assigned to them partitions yet.\r\n\r\nTo evenly distribute data between partitions you need to look into a `messageKey` and `Partitioner` abstraction on the producer side.","title":"Kafka listener concurrency threads taking time to start in parallel?","body":"<p>Your <code>started at time</code> assumption is not correct. That's really not a time when concurrent containers are started, but rather the time when they consume records from partitions assigned to them. So, you may just not have any data in the partition to consume at the moment. More over there is no guarantee that all the partitions are assigned to consumers at the same time. So, one consumer may have already started to consume, but other has not obtained assigned to them partitions yet.</p>\n<p>To evenly distribute data between partitions you need to look into a <code>messageKey</code> and <code>Partitioner</code> abstraction on the producer side.</p>\n"}],"owner":{"account_id":18695929,"reputation":81,"user_id":13629257,"display_name":"prateek jangid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":430,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75034256,"answer_count":1,"score":0,"last_activity_date":1673040985,"creation_date":1673025310,"question_id":75034076,"body_markdown":"I need to process around 50k records(this number can vary from 100 to 50k max) in same topic. Therefore, i used concurrency feature of kafka.Below is my configuration and listener code.\r\n    \r\n    @KafkaListener(topics = {&quot;kafkaTopic&quot;},\r\n                    containerFactory = &quot;abcd&quot;)\r\n            public void consume(\r\n                    @Payload List&lt;String&gt; message,\r\n                    @Header(KafkaHeaders.RECEIVED_TOPIC) String topic\r\n            ) throws IOException {\r\n        \r\n                StopWatch st = new StopWatch();\r\n         DateFormat dateFormat = new SimpleDateFormat(&quot;yyyy/MM/dd HH:mm:ss&quot;);\r\n                Date date = new Date();\r\n                StringBuilder str = new StringBuilder();\r\n                st.start(&quot;threadName-&quot;);\r\n                message.forEach(messages -&gt; {\r\n                    try {\r\n                        Thread.sleep(2500);\r\n                        logger.info(&quot;message is-{}&quot;, messages);\r\n                        str.append(messages);\r\n                        str.append(&quot;,&quot;);\r\n                    } catch (Exception e) {\r\n                        str.append(&quot;exception-{}&quot; + e);\r\n                    }\r\n                });\r\n        \r\n                st.stop();\r\n               \r\n                List data = objectMapper.readValue(getFile(), new TypeReference&lt;List&lt;String&gt;&gt;() {});\r\n        \r\n                str.append(&quot;----thread-&quot; + Thread.currentThread().getName() + &quot;started at time-&quot;+dateFormat.format(date)+&quot; and time taken-&quot; + String.format(&quot;%.2f&quot;, st.getTotalTimeSeconds()));\r\n                str.append(&quot;---&quot;);\r\n                data.add(str);\r\n                objectMapper.writeValue(getFile(),\r\n                        data);\r\n        \r\n            }\r\n    \r\n    \r\n        @Bean(&quot;abcd&quot;)\r\n            public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory() {\r\n                ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n                factory.setConsumerFactory(consumerFactory());\r\n                factory.getContainerProperties().setAckMode(ContainerProperties.AckMode.BATCH);\r\n                factory.setConcurrency(5);\r\n                factory.setBatchListener(true);\r\n                return factory;\r\n            }\r\n        \r\n            @Bean\r\n            public NewTopic syliusDeTopic() {\r\n                return TopicBuilder.name(&quot;kafkaTopic&quot;).partitions(5).replicas(2).build();\r\n            }\r\n\r\n    @Bean\r\n        public ConsumerFactory&lt;String, String&gt; consumerFactory() {\r\n            Map&lt;String, Object&gt; configProps = new HashMap&lt;&gt;();\r\n            configProps.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, server);\r\n            configProps.put(ConsumerConfig.GROUP_ID_CONFIG, consumerGroupId);\r\n            configProps.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n            configProps.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n            configProps.put(ConsumerConfig.PARTITION_ASSIGNMENT_STRATEGY_CONFIG, CustomCooperativeStickyAssignor.class.getName());\r\n            configProps.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG,&quot;500&quot;);\r\n            configProps.put(ConsumerConfig.FETCH_MIN_BYTES_CONFIG,&quot;1&quot;);\r\n            configProps.put(ConsumerConfig.FETCH_MAX_WAIT_MS_CONFIG,&quot;5000&quot;);\r\n            return new DefaultKafkaConsumerFactory&lt;&gt;(configProps);\r\n        }\r\n\r\nBut when i checked the result for sample 100 records, threads did not started at same time. Below is the response for the same.\r\n\r\n    [&quot;test-0,test-1,test-2,----thread-org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1started at time-2023/01/06 22:20:19 and time taken-7.51---&quot;,&quot;test-56,test-57,test-58,test-59,test-60,test-61,----thread-org.springframework.kafka.KafkaListenerEndpointContainer#0-1-C-1started at time-2023/01/06 22:20:26 and time taken-15.02---&quot;,&quot;test-70,test-71,test-72,test-73,test-74,test-75,test-76,test-77,test-78,----thread-org.springframework.kafka.KafkaListenerEndpointContainer#0-3-C-1started at time-2023/01/06 22:20:34 and time taken-22.53---&quot;,&quot;test-62,test-63,test-64,test-65,test-66,test-67,test-68,test-69,test-85,test-86,test-87,test-88,test-89,test-90,test-91,----thread-org.springframework.kafka.KafkaListenerEndpointContainer#0-2-C-1started at time-2023/01/06 22:20:49 and time taken-37.55---&quot;,&quot;test-79,test-80,test-81,test-82,test-83,test-84,test-92,test-93,test-94,test-95,test-96,test-97,test-98,test-99,----thread-org.springframework.kafka.KafkaListenerEndpointContainer#0-1-C-1started at time-2023/01/06 22:21:01 and time taken-35.05---&quot;,&quot;test-3,test-4,test-5,test-6,test-7,test-8,test-9,test-10,test-11,test-12,test-13,test-14,test-15,test-16,test-17,test-18,test-19,test-20,test-21,test-22,test-23,test-24,test-25,test-26,test-27,test-28,test-29,test-30,test-31,test-32,test-33,test-34,test-35,test-36,test-37,test-38,test-39,test-40,test-41,test-42,test-43,test-44,test-45,test-46,test-47,test-48,test-49,test-50,test-51,test-52,test-53,test-54,test-55,----thread-org.springframework.kafka.KafkaListenerEndpointContainer#0-4-C-1started at time-2023/01/06 22:22:24 and time taken-132.69---&quot;]\r\n\r\n\r\nThe started time of threads are different with difference of around &gt;80 secs between first thread and last.\r\n\r\nAny idea how to resolve this.I want the thread to run at almost same time (thread count can increase to max 15) which can improve the ingestion of huge records?\r\n\r\nAlso, data added in partition of varied size.Can it be resolved as well?\r\n\r\n","title":"Kafka listener concurrency threads taking time to start in parallel?","body":"<p>I need to process around 50k records(this number can vary from 100 to 50k max) in same topic. Therefore, i used concurrency feature of kafka.Below is my configuration and listener code.</p>\n<pre><code>@KafkaListener(topics = {&quot;kafkaTopic&quot;},\n                containerFactory = &quot;abcd&quot;)\n        public void consume(\n                @Payload List&lt;String&gt; message,\n                @Header(KafkaHeaders.RECEIVED_TOPIC) String topic\n        ) throws IOException {\n    \n            StopWatch st = new StopWatch();\n     DateFormat dateFormat = new SimpleDateFormat(&quot;yyyy/MM/dd HH:mm:ss&quot;);\n            Date date = new Date();\n            StringBuilder str = new StringBuilder();\n            st.start(&quot;threadName-&quot;);\n            message.forEach(messages -&gt; {\n                try {\n                    Thread.sleep(2500);\n                    logger.info(&quot;message is-{}&quot;, messages);\n                    str.append(messages);\n                    str.append(&quot;,&quot;);\n                } catch (Exception e) {\n                    str.append(&quot;exception-{}&quot; + e);\n                }\n            });\n    \n            st.stop();\n           \n            List data = objectMapper.readValue(getFile(), new TypeReference&lt;List&lt;String&gt;&gt;() {});\n    \n            str.append(&quot;----thread-&quot; + Thread.currentThread().getName() + &quot;started at time-&quot;+dateFormat.format(date)+&quot; and time taken-&quot; + String.format(&quot;%.2f&quot;, st.getTotalTimeSeconds()));\n            str.append(&quot;---&quot;);\n            data.add(str);\n            objectMapper.writeValue(getFile(),\n                    data);\n    \n        }\n\n\n    @Bean(&quot;abcd&quot;)\n        public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory() {\n            ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n            factory.setConsumerFactory(consumerFactory());\n            factory.getContainerProperties().setAckMode(ContainerProperties.AckMode.BATCH);\n            factory.setConcurrency(5);\n            factory.setBatchListener(true);\n            return factory;\n        }\n    \n        @Bean\n        public NewTopic syliusDeTopic() {\n            return TopicBuilder.name(&quot;kafkaTopic&quot;).partitions(5).replicas(2).build();\n        }\n\n@Bean\n    public ConsumerFactory&lt;String, String&gt; consumerFactory() {\n        Map&lt;String, Object&gt; configProps = new HashMap&lt;&gt;();\n        configProps.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, server);\n        configProps.put(ConsumerConfig.GROUP_ID_CONFIG, consumerGroupId);\n        configProps.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n        configProps.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n        configProps.put(ConsumerConfig.PARTITION_ASSIGNMENT_STRATEGY_CONFIG, CustomCooperativeStickyAssignor.class.getName());\n        configProps.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG,&quot;500&quot;);\n        configProps.put(ConsumerConfig.FETCH_MIN_BYTES_CONFIG,&quot;1&quot;);\n        configProps.put(ConsumerConfig.FETCH_MAX_WAIT_MS_CONFIG,&quot;5000&quot;);\n        return new DefaultKafkaConsumerFactory&lt;&gt;(configProps);\n    }\n</code></pre>\n<p>But when i checked the result for sample 100 records, threads did not started at same time. Below is the response for the same.</p>\n<pre><code>[&quot;test-0,test-1,test-2,----thread-org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1started at time-2023/01/06 22:20:19 and time taken-7.51---&quot;,&quot;test-56,test-57,test-58,test-59,test-60,test-61,----thread-org.springframework.kafka.KafkaListenerEndpointContainer#0-1-C-1started at time-2023/01/06 22:20:26 and time taken-15.02---&quot;,&quot;test-70,test-71,test-72,test-73,test-74,test-75,test-76,test-77,test-78,----thread-org.springframework.kafka.KafkaListenerEndpointContainer#0-3-C-1started at time-2023/01/06 22:20:34 and time taken-22.53---&quot;,&quot;test-62,test-63,test-64,test-65,test-66,test-67,test-68,test-69,test-85,test-86,test-87,test-88,test-89,test-90,test-91,----thread-org.springframework.kafka.KafkaListenerEndpointContainer#0-2-C-1started at time-2023/01/06 22:20:49 and time taken-37.55---&quot;,&quot;test-79,test-80,test-81,test-82,test-83,test-84,test-92,test-93,test-94,test-95,test-96,test-97,test-98,test-99,----thread-org.springframework.kafka.KafkaListenerEndpointContainer#0-1-C-1started at time-2023/01/06 22:21:01 and time taken-35.05---&quot;,&quot;test-3,test-4,test-5,test-6,test-7,test-8,test-9,test-10,test-11,test-12,test-13,test-14,test-15,test-16,test-17,test-18,test-19,test-20,test-21,test-22,test-23,test-24,test-25,test-26,test-27,test-28,test-29,test-30,test-31,test-32,test-33,test-34,test-35,test-36,test-37,test-38,test-39,test-40,test-41,test-42,test-43,test-44,test-45,test-46,test-47,test-48,test-49,test-50,test-51,test-52,test-53,test-54,test-55,----thread-org.springframework.kafka.KafkaListenerEndpointContainer#0-4-C-1started at time-2023/01/06 22:22:24 and time taken-132.69---&quot;]\n</code></pre>\n<p>The started time of threads are different with difference of around &gt;80 secs between first thread and last.</p>\n<p>Any idea how to resolve this.I want the thread to run at almost same time (thread count can increase to max 15) which can improve the ingestion of huge records?</p>\n<p>Also, data added in partition of varied size.Can it be resolved as well?</p>\n"},{"tags":["java","arrays","loops","output"],"comments":[{"owner":{"account_id":4728704,"reputation":17022,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1673039286,"post_id":75035986,"comment_id":132415892,"body_markdown":"Can you explain how `((i+1) % 10) == 0` is supposed to fulfill the &quot;10 per line&quot; request? How would you write it if it would says &quot;print only every tenth element&quot;?","body":"Can you explain how <code>((i+1) % 10) == 0</code> is supposed to fulfill the &quot;10 per line&quot; request? How would you write it if it would says &quot;print only every tenth element&quot;?"}],"answers":[{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673039254,"creation_date":1673039254,"answer_id":75036093,"question_id":75035986,"body_markdown":"You have to use a counter and check if it `count % 10 == 0`. If yes, then move to the next line.\r\n\r\n```java\r\npublic static void main(String... args) {\r\n    final IntPredicate odd = value -&gt; value % 2 != 0;\r\n    final IntPredicate even = value -&gt; value % 2 == 0;\r\n\r\n    int[] arr = randomArray(300);\r\n\r\n    System.out.println(&quot;Odd Numbers:&quot;);\r\n    printNumbers(arr, odd);\r\n\r\n    System.out.println();\r\n    System.out.println(&quot;Even Numbers:&quot;);\r\n    printNumbers(arr, even);\r\n}\r\n\r\nprivate static int[] randomArray(int total) {\r\n    Random random = new Random();\r\n\r\n    return IntStream.range(0, total)\r\n                    .map(i -&gt; random.nextInt(500) + 1)\r\n                    .toArray();\r\n}\r\n\r\nprivate static void printNumbers(int[] arr, IntPredicate predicate) {\r\n    int i = 0;\r\n\r\n    for (int value : arr) {\r\n        if (predicate.test(value)) {\r\n            System.out.format(&quot;%3d &quot;, value);\r\n\r\n            if (++i % 10 == 0)\r\n                System.out.println();\r\n        }\r\n    }\r\n\r\n    System.out.println();\r\n}\r\n```","title":"Output all the odd and even numbers in the random numbers array","body":"<p>You have to use a counter and check if it <code>count % 10 == 0</code>. If yes, then move to the next line.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String... args) {\n    final IntPredicate odd = value -&gt; value % 2 != 0;\n    final IntPredicate even = value -&gt; value % 2 == 0;\n\n    int[] arr = randomArray(300);\n\n    System.out.println(&quot;Odd Numbers:&quot;);\n    printNumbers(arr, odd);\n\n    System.out.println();\n    System.out.println(&quot;Even Numbers:&quot;);\n    printNumbers(arr, even);\n}\n\nprivate static int[] randomArray(int total) {\n    Random random = new Random();\n\n    return IntStream.range(0, total)\n                    .map(i -&gt; random.nextInt(500) + 1)\n                    .toArray();\n}\n\nprivate static void printNumbers(int[] arr, IntPredicate predicate) {\n    int i = 0;\n\n    for (int value : arr) {\n        if (predicate.test(value)) {\n            System.out.format(&quot;%3d &quot;, value);\n\n            if (++i % 10 == 0)\n                System.out.println();\n        }\n    }\n\n    System.out.println();\n}\n</code></pre>\n"}],"owner":{"account_id":26592288,"reputation":17,"user_id":20215300,"display_name":"QJack"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673040982,"creation_date":1673038351,"question_id":75035986,"body_markdown":"I declare an integer array of size 300, with random values from 1 to 500. I need to output all the even and odd numbers in the array 10 per line.\r\n\r\nthis is my code but I can&#39;t print 10 numbers per line and it doesn&#39;t print enough even and odd numbers in my array:\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Array {\r\n\r\n   public static void main(String[] args)\r\n   { \r\n      Scanner keyboard=new Scanner(System.in); \r\n   \r\n      \r\n      int[] A = new int[300]; \r\n      for(int i=0;i&lt;A.length;i++)\r\n      {\r\n         A[i]=(int)(Math.random()*500+1);\r\n      }\r\n      \r\n      for(int i=0;i&lt;A.length;i++){\r\n         System.out.print(A[i]+&quot; &quot;);\r\n         if(((i+1) % 10) == 0){\r\n            System.out.println();\r\n         }         \r\n      }\r\n      System.out.println(&quot;Odd Numbers:&quot;); \r\n       \r\n      for(int i=0;i&lt;A.length;i++){  \r\n         if(A[i]%2!=0 &amp;&amp; ((i+1) % 10) == 0){\r\n            System.out.print(A[i]+&quot; &quot;);\r\n         }\r\n      }\r\n      System.out.println();\r\n      System.out.println(&quot;Even Numbers:&quot;); \r\n      for(int i=0;i&lt;A.length;i++){\r\n      \r\n         if(A[i]%2==0 &amp;&amp; ((i+1) % 10) == 0){  \r\n            System.out.print(A[i]+&quot; &quot;);  \r\n         }  \r\n      }\r\n     \r\n   \r\n      \r\n   }\r\n}\r\n```\r\n","title":"Output all the odd and even numbers in the random numbers array","body":"<p>I declare an integer array of size 300, with random values from 1 to 500. I need to output all the even and odd numbers in the array 10 per line.</p>\n<p>this is my code but I can't print 10 numbers per line and it doesn't print enough even and odd numbers in my array:</p>\n<pre><code>import java.util.Scanner;\n\npublic class Array {\n\n   public static void main(String[] args)\n   { \n      Scanner keyboard=new Scanner(System.in); \n   \n      \n      int[] A = new int[300]; \n      for(int i=0;i&lt;A.length;i++)\n      {\n         A[i]=(int)(Math.random()*500+1);\n      }\n      \n      for(int i=0;i&lt;A.length;i++){\n         System.out.print(A[i]+&quot; &quot;);\n         if(((i+1) % 10) == 0){\n            System.out.println();\n         }         \n      }\n      System.out.println(&quot;Odd Numbers:&quot;); \n       \n      for(int i=0;i&lt;A.length;i++){  \n         if(A[i]%2!=0 &amp;&amp; ((i+1) % 10) == 0){\n            System.out.print(A[i]+&quot; &quot;);\n         }\n      }\n      System.out.println();\n      System.out.println(&quot;Even Numbers:&quot;); \n      for(int i=0;i&lt;A.length;i++){\n      \n         if(A[i]%2==0 &amp;&amp; ((i+1) % 10) == 0){  \n            System.out.print(A[i]+&quot; &quot;);  \n         }  \n      }\n     \n   \n      \n   }\n}\n</code></pre>\n"},{"tags":["java","hibernate","jpa","criteriabuilder"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1673041347,"post_id":75036281,"comment_id":132416392,"body_markdown":"jpa works with Entities not with tables","body":"jpa works with Entities not with tables"}],"owner":{"account_id":951443,"reputation":85,"user_id":977516,"accept_rate":0,"display_name":"xibrian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673040965,"creation_date":1673040965,"question_id":75036281,"body_markdown":"I have following code\r\n\r\n```\r\nCriteriaBuilder criteriaBuilder = em.getCriteriaBuilder();\r\nCriteriaQuery&lt;AppUsage&gt; criteriaQuery = criteriaBuilder.createQuery(User.class);\r\nRoot&lt;AppUsage&gt; itemRoot = criteriaQuery.from(User.class);\r\n```\r\nUser entity class has tablename = &quot;user&quot;\r\nIs it possible to change above code so that user can be loaded from different table such as below\r\n``` \r\nString tableName = &quot;generated by logic&quot;\r\nCriteriaBuilder criteriaBuilder = em.getCriteriaBuilder();\r\nCriteriaQuery&lt;AppUsage&gt; criteriaQuery = criteriaBuilder.createQuery(User.class, tableName);\r\nRoot&lt;AppUsage&gt; itemRoot = criteriaQuery.from(User.class,tableName);\r\n``` \r\nI am trying to build the same query so that it can be used to query from different table but with data in different time range. \r\n   ","title":"JPA CriteriaBuilder build with different table name","body":"<p>I have following code</p>\n<pre><code>CriteriaBuilder criteriaBuilder = em.getCriteriaBuilder();\nCriteriaQuery&lt;AppUsage&gt; criteriaQuery = criteriaBuilder.createQuery(User.class);\nRoot&lt;AppUsage&gt; itemRoot = criteriaQuery.from(User.class);\n</code></pre>\n<p>User entity class has tablename = &quot;user&quot;\nIs it possible to change above code so that user can be loaded from different table such as below</p>\n<pre><code>String tableName = &quot;generated by logic&quot;\nCriteriaBuilder criteriaBuilder = em.getCriteriaBuilder();\nCriteriaQuery&lt;AppUsage&gt; criteriaQuery = criteriaBuilder.createQuery(User.class, tableName);\nRoot&lt;AppUsage&gt; itemRoot = criteriaQuery.from(User.class,tableName);\n</code></pre>\n<p>I am trying to build the same query so that it can be used to query from different table but with data in different time range.</p>\n"},{"tags":["java","data-structures","collections","hashmap","maps"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1670216827,"post_id":74683554,"comment_id":131816199,"body_markdown":"`map.values().stream().sorted(Comparator.reverseOrder()).limit(2).forEach(map.values()::remove)`","body":"<code>map.values().stream().sorted(Comparator.reverseOrder()).limi&zwnj;&#8203;t(2).forEach(map.val&zwnj;&#8203;ues()::remove)</code>"},{"owner":{"account_id":18937834,"reputation":151,"user_id":13818534,"display_name":"Jestin Wilson"},"score":0,"creation_date":1670219737,"post_id":74683554,"comment_id":131816690,"body_markdown":"This is more elegant solution.","body":"This is more elegant solution."},{"owner":{"account_id":27116608,"reputation":1,"user_id":20660852,"display_name":"blindflip"},"score":0,"creation_date":1670257563,"post_id":74683554,"comment_id":131829087,"body_markdown":"@shmosel \nThis worked beautifully! Thank you.\n\nAny idea why my original solution wasn&#39;t working?","body":"@shmosel  This worked beautifully! Thank you.  Any idea why my original solution wasn&#39;t working?"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1670273978,"post_id":74683554,"comment_id":131834140,"body_markdown":"Your way doesn&#39;t work because you&#39;re not supposed to modify a collection while iterating it (except via the iterator). The dirty little secret is that my way also violates that rule, and only happens to work because of the [stateful](https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#StreamOps) sort operation. The proper approach would be collecting the items and then removing them afterwards: `Set&lt;Integer&gt; remove = map.values().stream()...collect(toSet()); map.values().removeAll(remove);`","body":"Your way doesn&#39;t work because you&#39;re not supposed to modify a collection while iterating it (except via the iterator). The dirty little secret is that my way also violates that rule, and only happens to work because of the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#StreamOps\" rel=\"nofollow noreferrer\">stateful</a> sort operation. The proper approach would be collecting the items and then removing them afterwards: <code>Set&lt;Integer&gt; remove = map.values().stream()...collect(toSet()); map.values().removeAll(remove);</code>"}],"answers":[{"tags":[],"owner":{"account_id":25332985,"reputation":9,"user_id":19152535,"display_name":"Sam Cousins"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1670216927,"creation_date":1670216927,"answer_id":74683612,"question_id":74683554,"body_markdown":"Using `for(element e : list)` loops uses the iterator of the map&#39;s entry set. This iterator can only exist once at a time. The problem can be fixed by using a traditional `for` loop instead: `for (int i = 0; i &lt; myMap.entrySet().size(); i++)` or similar. ","title":"From a HashMap, how to remove k number of elements with the highest values(Java)?","body":"<p>Using <code>for(element e : list)</code> loops uses the iterator of the map's entry set. This iterator can only exist once at a time. The problem can be fixed by using a traditional <code>for</code> loop instead: <code>for (int i = 0; i &lt; myMap.entrySet().size(); i++)</code> or similar.</p>\n"},{"tags":[],"owner":{"account_id":27147415,"reputation":1,"user_id":20687389,"display_name":"cat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670219624,"creation_date":1670219433,"answer_id":74683878,"question_id":74683554,"body_markdown":"form jdk17 myMap.entrySet() -&gt; hashMap&#39;s implements it will create a new EntryIterator() object,then will use super class HashIterator&#39;s constructors without arguments,  When you use hashMap&#39;s put() or remove() method, modCount will + 1,As a result HashIterator&#39;s nextNode()\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/d6saE.png","title":"From a HashMap, how to remove k number of elements with the highest values(Java)?","body":"<p>form jdk17 myMap.entrySet() -&gt; hashMap's implements it will create a new EntryIterator() object,then will use super class HashIterator's constructors without arguments,  When you use hashMap's put() or remove() method, modCount will + 1,As a result HashIterator's nextNode()\n<a href=\"https://i.stack.imgur.com/d6saE.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":[],"owner":{"account_id":26628653,"reputation":1,"user_id":20246184,"display_name":"RajTechnorama"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673040919,"creation_date":1673040382,"answer_id":75036209,"question_id":74683554,"body_markdown":"There are multiple issues with your approach.\r\n\r\n - It is very inefficient to loop through the values and keep finding the max after each delete\r\n - You are not allowed to modify the source map by calling the remove method from within the forEach loop of it&#39;s entry set. \r\n\r\nInstead, get the keys corresponding to the top ***k*** values in your map and call the **remove** method on the map on each key, such as below..\r\n\r\n    Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(Map.of(1, 3, 2, 2, 3, 6, 4, 8, 5, 2, 6, 1));\r\n\tint k = 3;\r\n\r\n\tmap.entrySet().stream().sorted((e1, e2) -&gt; Integer.compare(e2.getValue(), e1.getValue())).map(e -&gt; e.getKey())\r\n\t\t\t\t.limit(k).forEach(map::remove);\r\n\r\n\tSystem.out.println(map);\r\n\r\nprints: {2=2, 5=2, 6=1}","title":"From a HashMap, how to remove k number of elements with the highest values(Java)?","body":"<p>There are multiple issues with your approach.</p>\n<ul>\n<li>It is very inefficient to loop through the values and keep finding the max after each delete</li>\n<li>You are not allowed to modify the source map by calling the remove method from within the forEach loop of it's entry set.</li>\n</ul>\n<p>Instead, get the keys corresponding to the top <em><strong>k</strong></em> values in your map and call the <strong>remove</strong> method on the map on each key, such as below..</p>\n<pre><code>Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(Map.of(1, 3, 2, 2, 3, 6, 4, 8, 5, 2, 6, 1));\nint k = 3;\n\nmap.entrySet().stream().sorted((e1, e2) -&gt; Integer.compare(e2.getValue(), e1.getValue())).map(e -&gt; e.getKey())\n            .limit(k).forEach(map::remove);\n\nSystem.out.println(map);\n</code></pre>\n<p>prints: {2=2, 5=2, 6=1}</p>\n"}],"owner":{"account_id":27116608,"reputation":1,"user_id":20660852,"display_name":"blindflip"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1673040919,"creation_date":1670216381,"question_id":74683554,"body_markdown":"`myMap = {1=3, 2=2, 3=6, 4=8, 5=2, 6=1}`\r\n\r\n`k = 3`\r\n\r\nso I&#39;ll delete the (3) highest map items with the highest values.\r\n\r\nWhat can I do in Java so the map becomes?\r\n\r\n`myMap = {2=2, 5=2, 6=1}`\r\n\r\n\r\n\r\n\r\nI tried a for loop that iterates (3) times\r\n\r\nand within it, a nested for loop that uses map.entry to get the max value and remove it. I keep getting an error.\r\n\r\n\r\n```\r\n\r\n```\r\n         int k =3; // number of large value pairs to remove\r\n\r\n\t int max = Collections.max(myMap.values()); // find max value\r\n\t   \r\n\r\n\t for(int i =0; i&lt;k ;i++) {  // iterate 3 times to delete (3) sets\r\n\r\n\t    for (Map.Entry&lt;Integer, Integer&gt; entry : myMap.entrySet()) {\r\n\t\t    Integer key = entry.getKey(); // find key associated with current largest value \r\n\t\t    Integer value = entry.getValue();// find largest value \r\n\t\t    if(value==max) { // test retrieved vale with max value \r\n\t\t    \thMap.remove(key);// remove set from HashMap\r\n\t\t    }\r\n\t\t    max = Collections.max(myMap.values()); // find new maximum\r\n\t\t}\t   \r\n\t }\r\n```\r\n\r\n```\r\n\r\nError:\r\n\r\n```\r\nException in thread &quot;main&quot; java.util.ConcurrentModificationException\r\n\tat java.base/java.util.HashMap$HashIterator.nextNode(HashMap.java:XXXX)\r\n\tat java.base/java.util.HashMap$EntryIterator.next(HashMap.java:XXXX)\r\n\tat java.base/java.util.HashMap$EntryIterator.next(HashMap.java:XXXX)\r\n```\r\n","title":"From a HashMap, how to remove k number of elements with the highest values(Java)?","body":"<p><code>myMap = {1=3, 2=2, 3=6, 4=8, 5=2, 6=1}</code></p>\n<p><code>k = 3</code></p>\n<p>so I'll delete the (3) highest map items with the highest values.</p>\n<p>What can I do in Java so the map becomes?</p>\n<p><code>myMap = {2=2, 5=2, 6=1}</code></p>\n<p>I tried a for loop that iterates (3) times</p>\n<p>and within it, a nested for loop that uses map.entry to get the max value and remove it. I keep getting an error.</p>\n<pre><code>\n</code></pre>\n<pre><code>     int k =3; // number of large value pairs to remove\n\n int max = Collections.max(myMap.values()); // find max value\n   \n\n for(int i =0; i&lt;k ;i++) {  // iterate 3 times to delete (3) sets\n\n    for (Map.Entry&lt;Integer, Integer&gt; entry : myMap.entrySet()) {\n        Integer key = entry.getKey(); // find key associated with current largest value \n        Integer value = entry.getValue();// find largest value \n        if(value==max) { // test retrieved vale with max value \n            hMap.remove(key);// remove set from HashMap\n        }\n        max = Collections.max(myMap.values()); // find new maximum\n    }      \n }\n</code></pre>\n<pre><code>\n</code></pre>\n<p>Error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.util.ConcurrentModificationException\n    at java.base/java.util.HashMap$HashIterator.nextNode(HashMap.java:XXXX)\n    at java.base/java.util.HashMap$EntryIterator.next(HashMap.java:XXXX)\n    at java.base/java.util.HashMap$EntryIterator.next(HashMap.java:XXXX)\n</code></pre>\n"},{"tags":["java","oracle","properties","connection"],"comments":[{"owner":{"account_id":45798,"reputation":327462,"user_id":135152,"accept_rate":100,"display_name":"OMG Ponies"},"score":0,"creation_date":1255192851,"post_id":1548400,"comment_id":1405704,"body_markdown":"You&#39;re hoping to distinguish between applications when viewing active sessions?","body":"You&#39;re hoping to distinguish between applications when viewing active sessions?"}],"answers":[{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1255192994,"creation_date":1255192994,"answer_id":1548431,"question_id":1548400,"body_markdown":"You need to define the connection property `v$session.program` in your data source, in such a way that that property will be added to each connection. How you do that depends on your data source implementation. The value you set the property to will appear in oracle&#39;s active session table.","title":"How do I make my Java application identify itself to Oracle on connection?","body":"<p>You need to define the connection property <code>v$session.program</code> in your data source, in such a way that that property will be added to each connection. How you do that depends on your data source implementation. The value you set the property to will appear in oracle's active session table.</p>\n"},{"tags":[],"owner":{"account_id":41192,"reputation":8797,"user_id":119667,"accept_rate":100,"display_name":"Rob van Laarhoven"},"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1430214408,"creation_date":1255204392,"answer_id":1548898,"question_id":1548400,"body_markdown":"    java.util.Properties props = new java.util.Properties();\r\n    props.setProperty(&quot;password&quot;,&quot;mypassword&quot;);\r\n    props.setProperty(&quot;user&quot;,&quot;myusername&quot;);\r\n    props.put(&quot;v$session.osuser&quot;, System.getProperty(&quot;user.name&quot;).toString());\r\n    props.put(&quot;v$session.machine&quot;, InetAddress.getLocalHost().getCanonicalHostName());\r\n    props.put(&quot;v$session.program&quot;, &quot;My Program Name&quot;);\r\n    DriverManager.registerDriver (new oracle.jdbc.OracleDriver());\r\n    Connection conn=\r\n        DriverManager.getConnection(&quot;jdbc:oracle:thin:@myhostname:1521:mysid&quot;, props);\r\n\r\n&lt;foo&gt;\r\n\r\n    SQL&gt;select username,osuser,program,machine\r\n    from v$session\r\n    where username = &#39;ROB&#39;; \r\n     \r\n    USERNAME  OSUSER       PROGRAM             MACHINE\r\n    --------- -----------  ------------------  -----------\r\n    ROB       rmerkw       My Program Name     machine\r\n\r\n\r\n  [1]: http://stackoverflow.com/questions/1548400/how-do-i-make-my-java-application-identify-itself-to-oracle-on-connection/1548898#1548898\r\n\r\n\r\nAt application level you can use the following methods to set *client_info*, *module* and *action* in *v$session*:\r\n\r\n    dbms_application_info.set_client_info\r\n    dbms_application_info.set_module\r\n    dbms_application_info.set_action","title":"How do I make my Java application identify itself to Oracle on connection?","body":"<pre><code>java.util.Properties props = new java.util.Properties();\nprops.setProperty(\"password\",\"mypassword\");\nprops.setProperty(\"user\",\"myusername\");\nprops.put(\"v$session.osuser\", System.getProperty(\"user.name\").toString());\nprops.put(\"v$session.machine\", InetAddress.getLocalHost().getCanonicalHostName());\nprops.put(\"v$session.program\", \"My Program Name\");\nDriverManager.registerDriver (new oracle.jdbc.OracleDriver());\nConnection conn=\n    DriverManager.getConnection(\"jdbc:oracle:thin:@myhostname:1521:mysid\", props);\n</code></pre>\n\n<p></p>\n\n<pre><code>SQL&gt;select username,osuser,program,machine\nfrom v$session\nwhere username = 'ROB'; \n\nUSERNAME  OSUSER       PROGRAM             MACHINE\n--------- -----------  ------------------  -----------\nROB       rmerkw       My Program Name     machine\n</code></pre>\n\n<p>At application level you can use the following methods to set <em>client_info</em>, <em>module</em> and <em>action</em> in <em>v$session</em>:</p>\n\n<pre><code>dbms_application_info.set_client_info\ndbms_application_info.set_module\ndbms_application_info.set_action\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9608,"reputation":17506,"user_id":17832,"display_name":"JeeBee"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1256296478,"creation_date":1256296478,"answer_id":1612773,"question_id":1548400,"body_markdown":"There is also an Oracle function:\r\n\r\n    dbms_application_info.set_client_info(&#39;Client Info&#39;);\r\n\r\nwhich sets the ClientInfo column in v$session.\r\n\r\nThis might be useful if you only have access to the Connection rather than the underlying DataSource or DriverManager.","title":"How do I make my Java application identify itself to Oracle on connection?","body":"<p>There is also an Oracle function:</p>\n\n<pre><code>dbms_application_info.set_client_info('Client Info');\n</code></pre>\n\n<p>which sets the ClientInfo column in v$session.</p>\n\n<p>This might be useful if you only have access to the Connection rather than the underlying DataSource or DriverManager.</p>\n"},{"tags":[],"owner":{"account_id":8434780,"reputation":669,"user_id":6329250,"display_name":"Manuel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1509969266,"creation_date":1509968324,"answer_id":47136132,"question_id":1548400,"body_markdown":"Since oracle jdbc 12.1 you can set some client-info values via jdbc api, i.e. you can do\r\n\r\n    connection.setClientInfo(&quot;OCSID.CLIENTID&quot;, &quot;MyClientId&quot;);\r\nfor properties OCSID...\r\n\r\nACTION, CLIENTID, ECID, MODULE, SEQUENCE_NUMBER and DBOP\r\n\r\nSee https://docs.oracle.com/database/121/JJDBC/jdbcvers.htm#JJDBC29006\r\n\r\nSetting PROGRAM doesn&#39;t work this way, you can do that as described in the accepted answer or somewhat easier by setting the System property &quot;oracle.jdbc.v$session.program&quot;.","title":"How do I make my Java application identify itself to Oracle on connection?","body":"<p>Since oracle jdbc 12.1 you can set some client-info values via jdbc api, i.e. you can do</p>\n\n<pre><code>connection.setClientInfo(\"OCSID.CLIENTID\", \"MyClientId\");\n</code></pre>\n\n<p>for properties OCSID...</p>\n\n<p>ACTION, CLIENTID, ECID, MODULE, SEQUENCE_NUMBER and DBOP</p>\n\n<p>See <a href=\"https://docs.oracle.com/database/121/JJDBC/jdbcvers.htm#JJDBC29006\" rel=\"nofollow noreferrer\">https://docs.oracle.com/database/121/JJDBC/jdbcvers.htm#JJDBC29006</a></p>\n\n<p>Setting PROGRAM doesn't work this way, you can do that as described in the accepted answer or somewhat easier by setting the System property \"oracle.jdbc.v$session.program\".</p>\n"},{"tags":[],"owner":{"account_id":6169361,"reputation":20329,"user_id":4808122,"accept_rate":89,"display_name":"Marmite Bomber"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1568108389,"creation_date":1568108389,"answer_id":57868031,"question_id":1548400,"body_markdown":"Starting with 12.1 the  `setEndToEndMetrics` is deprecated, you may use  `setClientInfo`\r\nsee the documentation for 12.2 [here][1]\r\n\r\n\r\nHere a snippet of the usage\r\n\r\n    // &quot;conn&quot; is an instance of java.sql.Connection:\r\n    conn.setClientInfo(&quot;OCSID.CLIENTID&quot;, &quot;clientID&quot;);\r\n    conn.setClientInfo(&quot;OCSID.MODULE&quot;, &quot;myModule&quot;);\r\n    conn.setClientInfo(&quot;OCSID.ACTION&quot;, &quot;myAction&quot;);\r\n\r\nYou may see the setting in `V$SESSION` with this query of the relevant session\r\n\r\n     select MODULE, ACTION, CLIENT_IDENTIFIER from v$session where ...\r\n\r\n**but only after a next statement is executed with this connection**. The call of `setClientInfo` triggers no extra roundtrip this information is passed whit the next call.\r\n\r\nNote also that you must use the Oracle (unwrapped) conenction - Check [this][2] for reference. \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/database/oracle/oracle-database/19/jjdbc/JDBC-standards-support.html#GUID-1987FAC4-E93A-49A5-9EB4-A78B465E6938\r\n  [2]: https://stackoverflow.com/q/15483356/4808122","title":"How do I make my Java application identify itself to Oracle on connection?","body":"<p>Starting with 12.1 the  <code>setEndToEndMetrics</code> is deprecated, you may use  <code>setClientInfo</code>\nsee the documentation for 12.2 <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/19/jjdbc/JDBC-standards-support.html#GUID-1987FAC4-E93A-49A5-9EB4-A78B465E6938\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Here a snippet of the usage</p>\n\n<pre><code>// \"conn\" is an instance of java.sql.Connection:\nconn.setClientInfo(\"OCSID.CLIENTID\", \"clientID\");\nconn.setClientInfo(\"OCSID.MODULE\", \"myModule\");\nconn.setClientInfo(\"OCSID.ACTION\", \"myAction\");\n</code></pre>\n\n<p>You may see the setting in <code>V$SESSION</code> with this query of the relevant session</p>\n\n<pre><code> select MODULE, ACTION, CLIENT_IDENTIFIER from v$session where ...\n</code></pre>\n\n<p><strong>but only after a next statement is executed with this connection</strong>. The call of <code>setClientInfo</code> triggers no extra roundtrip this information is passed whit the next call.</p>\n\n<p>Note also that you must use the Oracle (unwrapped) conenction - Check <a href=\"https://stackoverflow.com/q/15483356/4808122\">this</a> for reference. </p>\n"}],"owner":{"account_id":790,"reputation":23125,"user_id":1030,"accept_rate":98,"display_name":"ninesided"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10280,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":1548898,"answer_count":5,"score":12,"last_activity_date":1673040719,"creation_date":1255192369,"question_id":1548400,"body_markdown":"When my application connects to an Oracle database I want to be able to see by looking at the active sessions in the database that it is connected. Currently it identifies itself as &quot;JDBC Thin Client&quot; because that&#39;s the driver that I&#39;m using, but other Java based applications that I have are somehow able to set this value to something more meaningful, like &quot;SQL Developer&quot;. I thought it was a property of the `Connection` or the `OracleDataSource`, but I&#39;ve not managed to find one that does the trick. Is this possible? In case it matters, I&#39;m using Java 1.5, with Oracle 10g and the 10g thin driver.","title":"How do I make my Java application identify itself to Oracle on connection?","body":"<p>When my application connects to an Oracle database I want to be able to see by looking at the active sessions in the database that it is connected. Currently it identifies itself as \"JDBC Thin Client\" because that's the driver that I'm using, but other Java based applications that I have are somehow able to set this value to something more meaningful, like \"SQL Developer\". I thought it was a property of the <code>Connection</code> or the <code>OracleDataSource</code>, but I've not managed to find one that does the trick. Is this possible? In case it matters, I'm using Java 1.5, with Oracle 10g and the 10g thin driver.</p>\n"},{"tags":["java","android","android-fusedlocation"],"answers":[{"tags":[],"owner":{"account_id":6914700,"reputation":4797,"user_id":5309419,"display_name":"DmitryArc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1673040328,"creation_date":1673040328,"answer_id":75036200,"question_id":75028605,"body_markdown":"In this line\r\n```\r\nTextView text_longitude = findViewById(R.id.text_longitude);\r\n```\r\nYou are trying to assign the variables to the widgets from the layout with `findViewById()` before actually inflating the Activity&#39;s UI.\r\n\r\nThe proper way is firstly to declare them\r\n```\r\nprivate TextView textLongitude;\r\nprivate TextView textAccuracy;\r\nprivate TextView textAddress;\r\n```\r\nand assign later in `onCreate()` after `setContentView(R.layout.activity_main);` instruction.\r\n```\r\n@Override\r\nprotected void onCreate(@Nullable Bundle savedInstanceState) {\r\n    super.onCreate(savedInstanceState);\r\n    setContentView(R.layout.activity_main);\r\n\r\n    textLongitude = findViewById(R.id.text_longitude);\r\n    textAccuracy = findViewById(R.id.text_accuracy);\r\n    textAddress = findViewById(R.id.text_address);\r\n }\r\n```","title":"Problem: Attempt to invoke virtual method &#39;android.content.pm.ApplicationInfo android.content.Context.getApplicationInfo()&#39; on a null object reference","body":"<p>In this line</p>\n<pre><code>TextView text_longitude = findViewById(R.id.text_longitude);\n</code></pre>\n<p>You are trying to assign the variables to the widgets from the layout with <code>findViewById()</code> before actually inflating the Activity's UI.</p>\n<p>The proper way is firstly to declare them</p>\n<pre><code>private TextView textLongitude;\nprivate TextView textAccuracy;\nprivate TextView textAddress;\n</code></pre>\n<p>and assign later in <code>onCreate()</code> after <code>setContentView(R.layout.activity_main);</code> instruction.</p>\n<pre><code>@Override\nprotected void onCreate(@Nullable Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    textLongitude = findViewById(R.id.text_longitude);\n    textAccuracy = findViewById(R.id.text_accuracy);\n    textAddress = findViewById(R.id.text_address);\n }\n</code></pre>\n"}],"owner":{"account_id":27451158,"reputation":3,"user_id":20943388,"display_name":"Foogles super"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":319,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75036200,"answer_count":1,"score":0,"last_activity_date":1673040328,"creation_date":1672994014,"question_id":75028605,"body_markdown":"Process crashed while executing mainTest(ru.myitschool.lab23.InstrumentedTestGeo):\r\njava.lang.NullPointerException: Attempt to invoke virtual method &#39;android.content.pm.ApplicationInfo android.content.Context.getApplicationInfo()&#39; on a null object reference\r\n\tat android.content.ContextWrapper.getApplicationInfo(ContextWrapper.java:190)\r\n\tat android.view.ContextThemeWrapper.getTheme(ContextThemeWrapper.java:174)\r\n\tat android.content.Context.obtainStyledAttributes(Context.java:809)\r\n\tat androidx.appcompat.app.AppCompatDelegateImpl.createSubDecor(AppCompatDelegateImpl.java:852)\r\n\tat androidx.appcompat.app.AppCompatDelegateImpl.ensureSubDecor(AppCompatDelegateImpl.java:819)\r\n\tat androidx.appcompat.app.AppCompatDelegateImpl.findViewById(AppCompatDelegateImpl.java:640)\r\n\tat androidx.appcompat.app.AppCompatActivity.findViewById(AppCompatActivity.java:261)\r\n\tat ru.myitschool.lab23.MainActivity.(MainActivity.java:26)\r\n\tat java.lang.Class.newInstance(Native Method)\r\n\tat android.app.AppComponentFactory.instantiateActivity(AppComponentFactory.java:95)\r\n\tat androidx.core.app.CoreComponentFactory.instantiateActivity(CoreComponentFactory.java:45)\r\n\tat android.app.Instrumentation.newActivity(Instrumentation.java:1273)\r\n\tat androidx.test.runner.MonitoringInstrumentation.newActivity(MonitoringInstrumentation.java:866)\r\n\tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3901)\r\n\tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:4201)\r\n\tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103)\r\n\tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n\tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n\tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2438)\r\n\tat android.os.Handler.dispatchMessage(Handler.java:106)\r\n\tat android.os.Looper.loopOnce(Looper.java:226)\r\n\tat android.os.Looper.loop(Looper.java:313)\r\n\tat android.app.ActivityThread.main(ActivityThread.java:8669)\r\n\tat java.lang.reflect.Method.invoke(Native Method)\r\n\tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:571)\r\n\tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1135)\r\n\r\n\r\n\r\n\r\nIt is my &quot;homework&quot; and I should to do location provider, but I have minimum 1 problem and my teacher is at \r\nholidays(\r\n\r\n\r\n\r\nMainActivity:\r\n\r\n    import android.annotation.SuppressLint;\r\n    import android.content.pm.PackageManager;\r\n    import android.location.Address;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.widget.TextView;\r\n    import android.location.Geocoder;\r\n\r\n    import androidx.annotation.Nullable;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.core.app.ActivityCompat;\r\n\r\n    import com.google.android.gms.location.FusedLocationProviderClient;\r\n    import com.google.android.gms.location.LocationServices;\r\n\r\n    import java.io.IOException;\r\n    import java.util.List;\r\n    import java.util.Locale;\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n    private FusedLocationProviderClient mFusedLocationClient;\r\n\r\n    TextView text_longitude = findViewById(R.id.text_longitude),\r\n            text_accuracy = findViewById(R.id.text_accuracy), text_address = findViewById(R.id.text_address);\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n\r\n     }\r\n     @SuppressLint(&quot;Range&quot;)\r\n     public void getLoc(View v) {\r\n\r\n\r\n        if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) !=                PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            // TODO: Consider calling\r\n            //    ActivityCompat#requestPermissions\r\n            // here to request the missing permissions, and then overriding\r\n            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n            //                                          int[] grantResults)\r\n            // to handle the case where the user grants the permission. See the documentation\r\n            // for ActivityCompat#requestPermissions for more details.\r\n            return;\r\n        }\r\n              mFusedLocationClient.getLastLocation().addOnSuccessListener(this, location -&gt; {\r\n            if (location != null) {\r\n                text_longitude.setText(String.valueOf(location.getLatitude()));\r\n                text_accuracy.setText(String.valueOf(location.getAccuracy()));\r\n                Geocoder geocoder = new Geocoder(this, Locale.getDefault());\r\n                try {\r\n                    text_address.setText((CharSequence) geocoder.getFromLocation(location.getLatitude(),  location.getAccuracy(), 1));\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n\r\n          }\r\n\r\n\r\n\r\n       }\r\n\r\n\r\n","title":"Problem: Attempt to invoke virtual method &#39;android.content.pm.ApplicationInfo android.content.Context.getApplicationInfo()&#39; on a null object reference","body":"<p>Process crashed while executing mainTest(ru.myitschool.lab23.InstrumentedTestGeo):\njava.lang.NullPointerException: Attempt to invoke virtual method 'android.content.pm.ApplicationInfo android.content.Context.getApplicationInfo()' on a null object reference\nat android.content.ContextWrapper.getApplicationInfo(ContextWrapper.java:190)\nat android.view.ContextThemeWrapper.getTheme(ContextThemeWrapper.java:174)\nat android.content.Context.obtainStyledAttributes(Context.java:809)\nat androidx.appcompat.app.AppCompatDelegateImpl.createSubDecor(AppCompatDelegateImpl.java:852)\nat androidx.appcompat.app.AppCompatDelegateImpl.ensureSubDecor(AppCompatDelegateImpl.java:819)\nat androidx.appcompat.app.AppCompatDelegateImpl.findViewById(AppCompatDelegateImpl.java:640)\nat androidx.appcompat.app.AppCompatActivity.findViewById(AppCompatActivity.java:261)\nat ru.myitschool.lab23.MainActivity.(MainActivity.java:26)\nat java.lang.Class.newInstance(Native Method)\nat android.app.AppComponentFactory.instantiateActivity(AppComponentFactory.java:95)\nat androidx.core.app.CoreComponentFactory.instantiateActivity(CoreComponentFactory.java:45)\nat android.app.Instrumentation.newActivity(Instrumentation.java:1273)\nat androidx.test.runner.MonitoringInstrumentation.newActivity(MonitoringInstrumentation.java:866)\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3901)\nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:4201)\nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103)\nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2438)\nat android.os.Handler.dispatchMessage(Handler.java:106)\nat android.os.Looper.loopOnce(Looper.java:226)\nat android.os.Looper.loop(Looper.java:313)\nat android.app.ActivityThread.main(ActivityThread.java:8669)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:571)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1135)</p>\n<p>It is my &quot;homework&quot; and I should to do location provider, but I have minimum 1 problem and my teacher is at\nholidays(</p>\n<p>MainActivity:</p>\n<pre><code>import android.annotation.SuppressLint;\nimport android.content.pm.PackageManager;\nimport android.location.Address;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.TextView;\nimport android.location.Geocoder;\n\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\n\nimport com.google.android.gms.location.FusedLocationProviderClient;\nimport com.google.android.gms.location.LocationServices;\n\nimport java.io.IOException;\nimport java.util.List;\nimport java.util.Locale;\n\npublic class MainActivity extends AppCompatActivity {\n\nprivate FusedLocationProviderClient mFusedLocationClient;\n\nTextView text_longitude = findViewById(R.id.text_longitude),\n        text_accuracy = findViewById(R.id.text_accuracy), text_address = findViewById(R.id.text_address);\n\n@Override\nprotected void onCreate(@Nullable Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n\n }\n @SuppressLint(&quot;Range&quot;)\n public void getLoc(View v) {\n\n\n    if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) !=                PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n        // TODO: Consider calling\n        //    ActivityCompat#requestPermissions\n        // here to request the missing permissions, and then overriding\n        //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n        //                                          int[] grantResults)\n        // to handle the case where the user grants the permission. See the documentation\n        // for ActivityCompat#requestPermissions for more details.\n        return;\n    }\n          mFusedLocationClient.getLastLocation().addOnSuccessListener(this, location -&gt; {\n        if (location != null) {\n            text_longitude.setText(String.valueOf(location.getLatitude()));\n            text_accuracy.setText(String.valueOf(location.getAccuracy()));\n            Geocoder geocoder = new Geocoder(this, Locale.getDefault());\n            try {\n                text_address.setText((CharSequence) geocoder.getFromLocation(location.getLatitude(),  location.getAccuracy(), 1));\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n\n        }\n    });\n\n\n      }\n\n\n\n   }\n</code></pre>\n"},{"tags":["java","spring-boot","keycloak","spring-cloud","spring-cloud-gateway"],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673040110,"creation_date":1672942034,"answer_id":75022627,"question_id":75022084,"body_markdown":"I wouldn&#39;t configure the gateway as OAuth2 client: I see gateway as a layer abstracting REST APIs which are resource-servers, not clients.\r\n\r\nConfiguring gateway as OAuth2 client can be handy with browser clients which don&#39;t know anything about OAuth2 but has following implications:\r\n- request between browser and gateway **is not OAuth2**: it is secured with sessions, not with an access-token set as Bearer authorization header. As the request is secured with sessions CSRF protection must be enabled. \r\n- gateway links this session to an access-token. You can configure it to set this token as Authorization header before forwarding request to resource-server micro services. But what it expects from incoming requests is a session not an access token. \r\n\r\nIn your case I&#39;d leave gateway transparent to security (nothing related to OAuth2, sessions or login): clients handle login and requests authorization by themself (with the help of [certified client libs][1]) and micro-services are configured as resource-server. In this scenario, two cases for inter micro-services calls:\r\n- request is done without the context of the user who originated the request: serviceA calls serviceB in its own name, then serviceA uses client credentials to get a new access token\r\n- sub-request to serciceB is made on behalf of the user who originated the request, then serviceA just forwards incoming access-token as Authorization header. \r\n\r\n\r\n  [1]: https://openid.net/developers/certified/","title":"How to use Keycloak token between Microservices?","body":"<p>I wouldn't configure the gateway as OAuth2 client: I see gateway as a layer abstracting REST APIs which are resource-servers, not clients.</p>\n<p>Configuring gateway as OAuth2 client can be handy with browser clients which don't know anything about OAuth2 but has following implications:</p>\n<ul>\n<li>request between browser and gateway <strong>is not OAuth2</strong>: it is secured with sessions, not with an access-token set as Bearer authorization header. As the request is secured with sessions CSRF protection must be enabled.</li>\n<li>gateway links this session to an access-token. You can configure it to set this token as Authorization header before forwarding request to resource-server micro services. But what it expects from incoming requests is a session not an access token.</li>\n</ul>\n<p>In your case I'd leave gateway transparent to security (nothing related to OAuth2, sessions or login): clients handle login and requests authorization by themself (with the help of <a href=\"https://openid.net/developers/certified/\" rel=\"nofollow noreferrer\">certified client libs</a>) and micro-services are configured as resource-server. In this scenario, two cases for inter micro-services calls:</p>\n<ul>\n<li>request is done without the context of the user who originated the request: serviceA calls serviceB in its own name, then serviceA uses client credentials to get a new access token</li>\n<li>sub-request to serciceB is made on behalf of the user who originated the request, then serviceA just forwards incoming access-token as Authorization header.</li>\n</ul>\n"}],"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1710,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673040110,"creation_date":1672938897,"question_id":75022084,"body_markdown":"I am building a application which works on microservices and I am authenticating my Gateway using Keycloak my authentication is working fine Gateway is redirecting me to Keycloak login page and login done successfully and I am able to get token Id and I am passing this Id to other Microservices but when I am making rest request to Gateway again from any other Microservice it is getting failed but I am sending token in &quot;Authorization&quot; in Gateway but it is not working. So how to communicate between Microservices once login done?\r\n\r\nThis is My Gateway in which I am getting token in controller:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/aiv&quot;)\r\n    public class UserController {\r\n    \r\n        @Autowired\r\n        DataSource dataSource;\r\n    \r\n        @PostMapping(path = &quot;/authenticate&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n        public String getAuth(@RequestBody Map&lt;String, Object&gt; data, Authentication authentication) {\r\n           // Here it is passing to Other Microservice\r\n            data.put(&quot;Authorization&quot;,((DefaultOidcUser) authentication.getPrincipal()).getIdToken().getTokenValue());\r\n           String responseData = new DefaultAuthenticateImpl().authenticateByPassword(data,dataSource);\r\n           return responseData;\r\n        }\r\n\r\nGateway Security Service:\r\n\r\n    @Configuration\r\n    @EnableWebFluxSecurity\r\n    public class SecurityConfig {\r\n    \r\n        @Bean\r\n        public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http,\r\n                                                                ReactiveClientRegistrationRepository clientRegistrationRepository) {\r\n            // Authenticate through configured OpenID Provider\r\n            http.authorizeExchange()\r\n                    .pathMatchers(&quot;/app/&quot;).authenticated().and().cors().and().oauth2Login();\r\n    \r\n            // Also logout at the OpenID Connect provider\r\n            http.logout(logout -&gt; logout.logoutSuccessHandler(\r\n                    new OidcClientInitiatedServerLogoutSuccessHandler(clientRegistrationRepository)));\r\n    \r\n            // Require authentication for all requests\r\n            http.authorizeExchange().anyExchange().authenticated();\r\n    \r\n            // Allow showing /home within a frame\r\n            http.headers().frameOptions().mode(XFrameOptionsServerHttpHeadersWriter.Mode.SAMEORIGIN);\r\n    \r\n            // Disable CSRF in the gateway to prevent conflicts with proxied service CSRF\r\n            http.csrf().disable();\r\n            return http.build();\r\n        }\r\n    \r\n    }\r\n\r\nAnd yml file configuration is as follow:\r\n\r\n    spring:\r\n      security:\r\n        oauth2:\r\n          client:\r\n            provider:\r\n              keycloak:\r\n                issuer-uri: http://localhost:8280/auth/realms/Default\r\n                user-name-attribute: preferred_username\r\n                user-info-authentication-method: header\r\n            registration:\r\n              keycloak:\r\n                client-id: Default\r\n                client-secret: 8ZRUH62PxicdfsdfsasD82VzWhvqWt03K6\r\n                redirect-uri: http://localhost:9000/login/oauth2/code/keycloak\r\n                scope: openid\r\n\r\nAnd now from another microservice when I am calling again it to Gateway using below rest request:\r\n\r\n      public String getRequest(String stUrl, Map&lt;String, Object&gt; data) {\r\n        try {\r\n            HttpClient httpclient = HttpClients.createDefault();\r\n\r\n            HttpGet httpget = null;\r\n            //Calling again Gateway to get user additional information.\r\n            httpget = new HttpGet(&lt;&lt;Gateway Url&gt;&gt;);\r\n\r\n            Iterator&lt;Map.Entry&lt;String, Object&gt;&gt; entries = data.entrySet().iterator();\r\n            while (entries.hasNext()) {\r\n                Map.Entry&lt;String, Object&gt; entry = entries.next();\r\n                httpget.addHeader(entry.getKey(), entry.getValue().toString());\r\n            }\r\n\r\n           // Here passing Authorization token\r\n            httpget.setHeader(&quot;Authorization&quot;, &lt;&lt;AuthToken&gt;&gt;);\r\n\r\n            ResponseHandler&lt;String&gt; responseHandler = new BasicResponseHandler();\r\n            String resp = httpclient.execute(httpget, responseHandler);\r\n\r\n            return resp;\r\n        } catch (Exception e) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n\r\n\r\nBut this rest request getting failed I am not sure why it is getting failes even after passing &quot;Authorization&quot;. Please help how can we communicate between microservices. ","title":"How to use Keycloak token between Microservices?","body":"<p>I am building a application which works on microservices and I am authenticating my Gateway using Keycloak my authentication is working fine Gateway is redirecting me to Keycloak login page and login done successfully and I am able to get token Id and I am passing this Id to other Microservices but when I am making rest request to Gateway again from any other Microservice it is getting failed but I am sending token in &quot;Authorization&quot; in Gateway but it is not working. So how to communicate between Microservices once login done?</p>\n<p>This is My Gateway in which I am getting token in controller:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/aiv&quot;)\npublic class UserController {\n\n    @Autowired\n    DataSource dataSource;\n\n    @PostMapping(path = &quot;/authenticate&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\n    public String getAuth(@RequestBody Map&lt;String, Object&gt; data, Authentication authentication) {\n       // Here it is passing to Other Microservice\n        data.put(&quot;Authorization&quot;,((DefaultOidcUser) authentication.getPrincipal()).getIdToken().getTokenValue());\n       String responseData = new DefaultAuthenticateImpl().authenticateByPassword(data,dataSource);\n       return responseData;\n    }\n</code></pre>\n<p>Gateway Security Service:</p>\n<pre><code>@Configuration\n@EnableWebFluxSecurity\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http,\n                                                            ReactiveClientRegistrationRepository clientRegistrationRepository) {\n        // Authenticate through configured OpenID Provider\n        http.authorizeExchange()\n                .pathMatchers(&quot;/app/&quot;).authenticated().and().cors().and().oauth2Login();\n\n        // Also logout at the OpenID Connect provider\n        http.logout(logout -&gt; logout.logoutSuccessHandler(\n                new OidcClientInitiatedServerLogoutSuccessHandler(clientRegistrationRepository)));\n\n        // Require authentication for all requests\n        http.authorizeExchange().anyExchange().authenticated();\n\n        // Allow showing /home within a frame\n        http.headers().frameOptions().mode(XFrameOptionsServerHttpHeadersWriter.Mode.SAMEORIGIN);\n\n        // Disable CSRF in the gateway to prevent conflicts with proxied service CSRF\n        http.csrf().disable();\n        return http.build();\n    }\n\n}\n</code></pre>\n<p>And yml file configuration is as follow:</p>\n<pre><code>spring:\n  security:\n    oauth2:\n      client:\n        provider:\n          keycloak:\n            issuer-uri: http://localhost:8280/auth/realms/Default\n            user-name-attribute: preferred_username\n            user-info-authentication-method: header\n        registration:\n          keycloak:\n            client-id: Default\n            client-secret: 8ZRUH62PxicdfsdfsasD82VzWhvqWt03K6\n            redirect-uri: http://localhost:9000/login/oauth2/code/keycloak\n            scope: openid\n</code></pre>\n<p>And now from another microservice when I am calling again it to Gateway using below rest request:</p>\n<pre><code>  public String getRequest(String stUrl, Map&lt;String, Object&gt; data) {\n    try {\n        HttpClient httpclient = HttpClients.createDefault();\n\n        HttpGet httpget = null;\n        //Calling again Gateway to get user additional information.\n        httpget = new HttpGet(&lt;&lt;Gateway Url&gt;&gt;);\n\n        Iterator&lt;Map.Entry&lt;String, Object&gt;&gt; entries = data.entrySet().iterator();\n        while (entries.hasNext()) {\n            Map.Entry&lt;String, Object&gt; entry = entries.next();\n            httpget.addHeader(entry.getKey(), entry.getValue().toString());\n        }\n\n       // Here passing Authorization token\n        httpget.setHeader(&quot;Authorization&quot;, &lt;&lt;AuthToken&gt;&gt;);\n\n        ResponseHandler&lt;String&gt; responseHandler = new BasicResponseHandler();\n        String resp = httpclient.execute(httpget, responseHandler);\n\n        return resp;\n    } catch (Exception e) {\n        return null;\n    }\n}\n</code></pre>\n<p>But this rest request getting failed I am not sure why it is getting failes even after passing &quot;Authorization&quot;. Please help how can we communicate between microservices.</p>\n"},{"tags":["java","android","sql","android-room","android-viewmodel"],"comments":[{"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"score":0,"creation_date":1673046510,"post_id":75036149,"comment_id":132417544,"body_markdown":"I would suggest first negating the WHERE clause so it will definitely select rows e.g. `@Query(&quot;SELECT * FROM payment WHERE payment_date = :date AND teacher_name = :teacherName OR 1&quot;)`. Do you get results now? If not then the issue could be with the view model. If you do get results then issue is with the query in which case you need to edit your question to include the ACTUAL stored data (App Inspection could be used) and the arguments (most likely is the date stored and passed not matching/compatitable).","body":"I would suggest first negating the WHERE clause so it will definitely select rows e.g. <code>@Query(&quot;SELECT * FROM payment WHERE payment_date = :date AND teacher_name = :teacherName OR 1&quot;)</code>. Do you get results now? If not then the issue could be with the view model. If you do get results then issue is with the query in which case you need to edit your question to include the ACTUAL stored data (App Inspection could be used) and the arguments (most likely is the date stored and passed not matching/compatitable)."}],"owner":{"account_id":24274748,"reputation":1,"user_id":18222209,"display_name":"sidali"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673039891,"creation_date":1673039891,"question_id":75036149,"body_markdown":"I have a POJO that am using as an entity that looks like this:\r\n\r\n    public class Payment {\r\n    @PrimaryKey(autoGenerate = true)\r\n    @ColumnInfo(name = &quot;id_payment&quot;)\r\n    int paymentID;\r\n    @Embedded\r\n    @NonNull\r\n    SubjectTeacherCrossRef subjectTeacherCrossRef;\r\n    @NonNull\r\n    @ColumnInfo(name = &quot;teacher_name&quot;)\r\n    String teacherName;\r\n    @NonNull\r\n    @ColumnInfo(name = &quot;payment_date&quot;)\r\n    String paymentDate;\r\n    @NonNull\r\n    @ColumnInfo(name = &quot;hours_teached&quot;)\r\n    int hoursTeached;\r\n    @NonNull\r\n    @ColumnInfo(name = &quot;payment_total&quot;)\r\n    int paymentTotal;\r\n\r\nAnd inside my Dao i have a query that look like this:\r\n\r\n        @Query(&quot;SELECT * FROM payment WHERE payment_date = :date AND teacher_name = :teacherName&quot;)\r\n    public LiveData&lt;Payment&gt; getPaymentByTeacherAndDate(String date,String teacherName);\r\n\r\nI am using a repository and a viewModel in this app as proposed by [official documentation][1] but i don&#39;t think the code there is relevant.\r\n\r\nHere is the class where am calling for the method that&#39;s responsible of fetching the data from the database:\r\n\r\n    public class ReceiptFragment extends Fragment {\r\n    private TextView teacherName, total;\r\n    private RecyclerView recyclerView;\r\n    private ReceiptDetailsAdapter adapter;\r\n    private SchoolViewModel viewModel;\r\n    private int id;\r\n    private List&lt;String&gt; dates;\r\n    private long start, end;\r\n    private SimpleDateFormat simpleDateFormat;\r\n    private List&lt;Payment&gt; payments;\r\n    private String test;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v = inflater.inflate(R.layout.fragment_receipt, container, false);\r\n        teacherName = v.findViewById(R.id.tv_receipt_teacher_name);\r\n        recyclerView = v.findViewById(R.id.rv_payment_details);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));\r\n        recyclerView.setHasFixedSize(true);\r\n        total = v.findViewById(R.id.tv_total_payment);\r\n        adapter = new ReceiptDetailsAdapter();\r\n        recyclerView.setAdapter(adapter);\r\n        test = new String();\r\n        viewModel = new ViewModelProvider(this).get(SchoolViewModel.class);\r\n        payments = new ArrayList&lt;&gt;();\r\n        simpleDateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n        id = getArguments().getInt(&quot;id&quot;);\r\n        start = getArguments().getLong(&quot;start date&quot;);\r\n        end = getArguments().getLong(&quot;end date&quot;);\r\n        List&lt;Payment&gt; datesTest = new ArrayList&lt;&gt;();\r\n\r\n\r\n\r\n        //Setting the Teacher Name\r\n        viewModel.getTeacherByID(id).observe(getViewLifecycleOwner(), new Observer&lt;Teacher&gt;() {\r\n            @Override\r\n            public void onChanged(Teacher teacher) {\r\n                teacherName.setText(teacher.getTeacherName());\r\n            }\r\n        });\r\n\r\n        viewModel.getTeacherByID(id).observe(getViewLifecycleOwner(), new Observer&lt;Teacher&gt;() {\r\n            @Override\r\n            public void onChanged(Teacher teacher) {\r\n                for (long i = start; i &lt;= end; i += 86400000) {\r\n                    String date = simpleDateFormat.format(i);\r\n                    viewModel.getPaymentByTeacherAndDate(date.trim(), teacher.getTeacherName())\r\n                            .observe(getViewLifecycleOwner(), new Observer&lt;Payment&gt;() {\r\n                                @Override\r\n                                public void onChanged(Payment payment) {\r\n                                    if (!(payment == null)) {\r\n                                        payments.add(payment);\r\n                                        adapter.setPaymentsDetails(payments);\r\n                                        adapter.notifyDataSetChanged();\r\n                                    }\r\n                                }\r\n                            });\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        return v;\r\n    }\r\nBoth the parameters that am passing to the method are valid as i have checked if that might be the problem.\r\n\r\nAnd i have already tested the recyclerView using a dummy set and it worked just fine.\r\n\r\nI suppose that the payment object received by the viewModel in some cases can be null because there will be some dates between the first and last dates that has no payments in them, that&#39;s why i created the &quot;null check&quot; before adding it to the list, BUT non of the payment object that i am receiving are valid!\r\n\r\n\r\n  [1]: https://developer.android.com/codelabs/android-room-with-a-view#1","title":"Why is it when i query an object from ROOM database using 2 clauses but it keeps coming up empty?","body":"<p>I have a POJO that am using as an entity that looks like this:</p>\n<pre><code>public class Payment {\n@PrimaryKey(autoGenerate = true)\n@ColumnInfo(name = &quot;id_payment&quot;)\nint paymentID;\n@Embedded\n@NonNull\nSubjectTeacherCrossRef subjectTeacherCrossRef;\n@NonNull\n@ColumnInfo(name = &quot;teacher_name&quot;)\nString teacherName;\n@NonNull\n@ColumnInfo(name = &quot;payment_date&quot;)\nString paymentDate;\n@NonNull\n@ColumnInfo(name = &quot;hours_teached&quot;)\nint hoursTeached;\n@NonNull\n@ColumnInfo(name = &quot;payment_total&quot;)\nint paymentTotal;\n</code></pre>\n<p>And inside my Dao i have a query that look like this:</p>\n<pre><code>    @Query(&quot;SELECT * FROM payment WHERE payment_date = :date AND teacher_name = :teacherName&quot;)\npublic LiveData&lt;Payment&gt; getPaymentByTeacherAndDate(String date,String teacherName);\n</code></pre>\n<p>I am using a repository and a viewModel in this app as proposed by <a href=\"https://developer.android.com/codelabs/android-room-with-a-view#1\" rel=\"nofollow noreferrer\">official documentation</a> but i don't think the code there is relevant.</p>\n<p>Here is the class where am calling for the method that's responsible of fetching the data from the database:</p>\n<pre><code>public class ReceiptFragment extends Fragment {\nprivate TextView teacherName, total;\nprivate RecyclerView recyclerView;\nprivate ReceiptDetailsAdapter adapter;\nprivate SchoolViewModel viewModel;\nprivate int id;\nprivate List&lt;String&gt; dates;\nprivate long start, end;\nprivate SimpleDateFormat simpleDateFormat;\nprivate List&lt;Payment&gt; payments;\nprivate String test;\n\n@Override\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\n                         Bundle savedInstanceState) {\n    // Inflate the layout for this fragment\n    View v = inflater.inflate(R.layout.fragment_receipt, container, false);\n    teacherName = v.findViewById(R.id.tv_receipt_teacher_name);\n    recyclerView = v.findViewById(R.id.rv_payment_details);\n    recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));\n    recyclerView.setHasFixedSize(true);\n    total = v.findViewById(R.id.tv_total_payment);\n    adapter = new ReceiptDetailsAdapter();\n    recyclerView.setAdapter(adapter);\n    test = new String();\n    viewModel = new ViewModelProvider(this).get(SchoolViewModel.class);\n    payments = new ArrayList&lt;&gt;();\n    simpleDateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\n    id = getArguments().getInt(&quot;id&quot;);\n    start = getArguments().getLong(&quot;start date&quot;);\n    end = getArguments().getLong(&quot;end date&quot;);\n    List&lt;Payment&gt; datesTest = new ArrayList&lt;&gt;();\n\n\n\n    //Setting the Teacher Name\n    viewModel.getTeacherByID(id).observe(getViewLifecycleOwner(), new Observer&lt;Teacher&gt;() {\n        @Override\n        public void onChanged(Teacher teacher) {\n            teacherName.setText(teacher.getTeacherName());\n        }\n    });\n\n    viewModel.getTeacherByID(id).observe(getViewLifecycleOwner(), new Observer&lt;Teacher&gt;() {\n        @Override\n        public void onChanged(Teacher teacher) {\n            for (long i = start; i &lt;= end; i += 86400000) {\n                String date = simpleDateFormat.format(i);\n                viewModel.getPaymentByTeacherAndDate(date.trim(), teacher.getTeacherName())\n                        .observe(getViewLifecycleOwner(), new Observer&lt;Payment&gt;() {\n                            @Override\n                            public void onChanged(Payment payment) {\n                                if (!(payment == null)) {\n                                    payments.add(payment);\n                                    adapter.setPaymentsDetails(payments);\n                                    adapter.notifyDataSetChanged();\n                                }\n                            }\n                        });\n            }\n        }\n    });\n\n\n    return v;\n}\n</code></pre>\n<p>Both the parameters that am passing to the method are valid as i have checked if that might be the problem.</p>\n<p>And i have already tested the recyclerView using a dummy set and it worked just fine.</p>\n<p>I suppose that the payment object received by the viewModel in some cases can be null because there will be some dates between the first and last dates that has no payments in them, that's why i created the &quot;null check&quot; before adding it to the list, BUT non of the payment object that i am receiving are valid!</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9244,"page":748,"page_size":100}
