{"items":[{"tags":["java","rabbitmq","amqp","rabbitmq-exchange"],"answers":[{"tags":[],"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697141220,"creation_date":1547852106,"answer_id":54262461,"question_id":54261510,"body_markdown":"&gt; Is it normal to see those increasing consumer tags?\r\n\r\nNo, your code has an error. You need to either just use a long-running consumer or you have to cancel your consumer when you are done with it.\r\n\r\nI can&#39;t see any need to &quot;poll&quot; `receiveMessages` - just let it run on its own and it will add messages to your synchronized queue as you expect.\r\n","title":"RabbitMQ DefaultConsumer causing too many consumer tags","body":"<blockquote>\n<p>Is it normal to see those increasing consumer tags?</p>\n</blockquote>\n<p>No, your code has an error. You need to either just use a long-running consumer or you have to cancel your consumer when you are done with it.</p>\n<p>I can't see any need to &quot;poll&quot; <code>receiveMessages</code> - just let it run on its own and it will add messages to your synchronized queue as you expect.</p>\n"},{"tags":[],"owner":{"account_id":3638239,"reputation":122,"user_id":3033105,"display_name":"guru"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1547871526,"creation_date":1547871526,"answer_id":54264009,"question_id":54261510,"body_markdown":"I finally found a working solution.\r\nAs Luke Bakken highlighted there is no polling required. I just call `receiveMesssages()` only once now. Thereafter my consumer is receiving callbacks as the messages are published into the queue.\r\n\r\n     protected LinkedBlockingQueue&lt;Message&gt; messages = new LinkedBlockingQueue&lt;&gt;();\r\n     public void receiveMessages() {\r\n    \ttry {\r\n    \t\tMessage message = new Message();\r\n    \t\tDeliverCallback deliverCallback = (consumerTag, delivery) -&gt; {\r\n    \t\t\tlong deliveryTag = delivery.getEnvelope().getDeliveryTag();\r\n    \t\t\tString response = new String(delivery.getBody(), &quot;UTF-8&quot;);\r\n    \t\t\tif (response != null) {\r\n    \t\t\t\tmessage.setId(NUID.nextGlobal());\r\n    \t\t\t\tmessage.setPayload(response);\r\n    \t\t\t\tmessage.setDeliveryTag(deliveryTag);\r\n    \t\t\t\tmessages.add(message);\r\n    \t\t\t\tlogger.info(&quot;Message received: &quot;, message.getPayload());\r\n    \t\t    };\r\n    \t\tchannel.basicConsume(queueName, false, deliverCallback, consumerTag -&gt; { });\r\n    \t} catch (Exception e) {\r\n    \t\tlogger.error(&quot;Exception while getting messages from Rabbit &quot;, e);\r\n    \t}\r\n    }\r\n\r\nThe rabbit console now shows only 1 consume tag entry under the bound queue.\r\n","title":"RabbitMQ DefaultConsumer causing too many consumer tags","body":"<p>I finally found a working solution.\nAs Luke Bakken highlighted there is no polling required. I just call <code>receiveMesssages()</code> only once now. Thereafter my consumer is receiving callbacks as the messages are published into the queue.</p>\n\n<pre><code> protected LinkedBlockingQueue&lt;Message&gt; messages = new LinkedBlockingQueue&lt;&gt;();\n public void receiveMessages() {\n    try {\n        Message message = new Message();\n        DeliverCallback deliverCallback = (consumerTag, delivery) -&gt; {\n            long deliveryTag = delivery.getEnvelope().getDeliveryTag();\n            String response = new String(delivery.getBody(), \"UTF-8\");\n            if (response != null) {\n                message.setId(NUID.nextGlobal());\n                message.setPayload(response);\n                message.setDeliveryTag(deliveryTag);\n                messages.add(message);\n                logger.info(\"Message received: \", message.getPayload());\n            };\n        channel.basicConsume(queueName, false, deliverCallback, consumerTag -&gt; { });\n    } catch (Exception e) {\n        logger.error(\"Exception while getting messages from Rabbit \", e);\n    }\n}\n</code></pre>\n\n<p>The rabbit console now shows only 1 consume tag entry under the bound queue.</p>\n"},{"tags":[],"owner":{"account_id":18904291,"reputation":1,"user_id":13791731,"display_name":"user13791731"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592834929,"creation_date":1592827114,"answer_id":62513911,"question_id":54261510,"body_markdown":"```java\r\npublic NotificationConsumerService(ConnectionFactory connectionFactory, String host, Logger logger) {\r\n    this.connectionFactory = connectionFactory;\r\n    this.host = host;\r\n    this.logger = logger;\r\n}\r\n\r\npublic void consumeSliceChangeNotification() {\r\n    connectionFactory.setHost(this.host);\r\n    try (Connection connection = connectionFactory.newConnection();\r\n         Channel channel = connection.createChannel()) {\r\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\r\n\r\n        DeliverCallback deliverCallback = (consumerTag, delivery) -&gt; {\r\n            String message = new String(delivery.getBody(), &quot;UTF-8&quot;);\r\n            JSONObject obj = new JSONObject(message);\r\n            String namespace = obj.getString(&quot;namespace&quot;);\r\n            logger.info(&quot;The latest change notification on the &quot; + namespace +&quot; is available&quot;);\r\n        };\r\n\r\n        channel.basicConsume(QUEUE_NAME, true,deliverCallback, consumerTag -&gt; { } );\r\n    } \r\n    catch (IOException | TimeoutException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n}\r\n```","title":"RabbitMQ DefaultConsumer causing too many consumer tags","body":"<pre class=\"lang-java prettyprint-override\"><code>public NotificationConsumerService(ConnectionFactory connectionFactory, String host, Logger logger) {\n    this.connectionFactory = connectionFactory;\n    this.host = host;\n    this.logger = logger;\n}\n\npublic void consumeSliceChangeNotification() {\n    connectionFactory.setHost(this.host);\n    try (Connection connection = connectionFactory.newConnection();\n         Channel channel = connection.createChannel()) {\n        channel.queueDeclare(QUEUE_NAME, false, false, false, null);\n\n        DeliverCallback deliverCallback = (consumerTag, delivery) -&gt; {\n            String message = new String(delivery.getBody(), &quot;UTF-8&quot;);\n            JSONObject obj = new JSONObject(message);\n            String namespace = obj.getString(&quot;namespace&quot;);\n            logger.info(&quot;The latest change notification on the &quot; + namespace +&quot; is available&quot;);\n        };\n\n        channel.basicConsume(QUEUE_NAME, true,deliverCallback, consumerTag -&gt; { } );\n    } \n    catch (IOException | TimeoutException e) {\n        e.printStackTrace();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":3638239,"reputation":122,"user_id":3033105,"display_name":"guru"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2513,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":54264009,"answer_count":3,"score":0,"last_activity_date":1697141220,"creation_date":1547846094,"question_id":54261510,"body_markdown":"I have a RabbitMQ client application that listens to a specific queue. The client creates and instance of DefaultConsumer and implements the handleDelivery method. Here is the code\r\n\r\n        protected LinkedBlockingQueue&lt;Message&gt; messages = new LinkedBlockingQueue&lt;&gt;();\r\n\r\n        public void receiveMessages() {\r\n            try {\r\n    //            channel.basicQos(pollCount);\r\n                Message message = new Message();\r\n                Consumer consumer = new DefaultConsumer(channel) {\r\n                    @Override\r\n                    public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body)\r\n                            throws IOException {\r\n                        long deliveryTag = envelope.getDeliveryTag();\r\n                        String response = new String(body, &quot;UTF-8&quot;);\r\n                        if (response != null) {\r\n                            message.setId(NUID.nextGlobal());\r\n                            message.setPayload(response);\r\n                            message.setDeliveryTag(deliveryTag);\r\n                            messages.add(message);\r\n                            logger.info(&quot;Message received: &quot;, message.getPayload());\r\n                        }\r\n                    }\r\n                };\r\n            \tlogger.debug(&quot;**********Channel status: &quot; + channel.isOpen());\r\n                channel.basicConsume(queueName, false, consumer);\r\n            } catch (Exception e) {\r\n                logger.error(&quot;Exception while getting messages from Rabbit &quot;, e);\r\n                \r\n            }\r\n        }\r\n\r\nThe method receiveMessages() is called frequently through a thread every 500ms and drains the messages into a different List for consumption. Due to this poll on receiveMessages() I observed that the consumer tags are continuously getting created and growing when viewed through rabbit console like in the picture. Is it normal to see those increasing consumer tags?\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JeMuv.jpg","title":"RabbitMQ DefaultConsumer causing too many consumer tags","body":"<p>I have a RabbitMQ client application that listens to a specific queue. The client creates and instance of DefaultConsumer and implements the handleDelivery method. Here is the code</p>\n\n<pre><code>    protected LinkedBlockingQueue&lt;Message&gt; messages = new LinkedBlockingQueue&lt;&gt;();\n\n    public void receiveMessages() {\n        try {\n//            channel.basicQos(pollCount);\n            Message message = new Message();\n            Consumer consumer = new DefaultConsumer(channel) {\n                @Override\n                public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body)\n                        throws IOException {\n                    long deliveryTag = envelope.getDeliveryTag();\n                    String response = new String(body, \"UTF-8\");\n                    if (response != null) {\n                        message.setId(NUID.nextGlobal());\n                        message.setPayload(response);\n                        message.setDeliveryTag(deliveryTag);\n                        messages.add(message);\n                        logger.info(\"Message received: \", message.getPayload());\n                    }\n                }\n            };\n            logger.debug(\"**********Channel status: \" + channel.isOpen());\n            channel.basicConsume(queueName, false, consumer);\n        } catch (Exception e) {\n            logger.error(\"Exception while getting messages from Rabbit \", e);\n\n        }\n    }\n</code></pre>\n\n<p>The method receiveMessages() is called frequently through a thread every 500ms and drains the messages into a different List for consumption. Due to this poll on receiveMessages() I observed that the consumer tags are continuously getting created and growing when viewed through rabbit console like in the picture. Is it normal to see those increasing consumer tags?\n<a href=\"https://i.stack.imgur.com/JeMuv.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JeMuv.jpg\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","spring","validation","functional-programming","vavr"],"answers":[{"comments":[{"owner":{"account_id":22288724,"reputation":15,"user_id":16515948,"display_name":"SAIKAT CHAKRABORTY"},"score":0,"creation_date":1697146808,"post_id":77283555,"comment_id":136246880,"body_markdown":"For the vavr validation thing, it looks interesting and clean. One of my concern is that the order of the validations must be maintained and it should return on the first error/exception returned from one the functions (short circuit) I am not so sure if that this happens or can be configured for vavr Validation.","body":"For the vavr validation thing, it looks interesting and clean. One of my concern is that the order of the validations must be maintained and it should return on the first error/exception returned from one the functions (short circuit) I am not so sure if that this happens or can be configured for vavr Validation."}],"tags":[],"owner":{"account_id":13606858,"reputation":161,"user_id":9815739,"display_name":"fjavierm"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697141097,"creation_date":1697141097,"answer_id":77283555,"question_id":77282495,"body_markdown":"The `Optional.empty()` seems like an ok idea, but I find the chaining of validation a bit confuse. In this case, maybe a typical series of conditional would be more readable. Something like:\r\n\r\n```\r\nvar result = checkBelongsToGroup(row);\r\n\r\nif (result.isEmpty()) {\r\n    result = checkParentToGroup(row);\r\n}\r\n\r\nif (result.isEmpty()) {\r\n    result = checkLocation(row);\r\n}\r\n\r\nif (!result.isEmpty()) {\r\n    // manage error\r\n}\r\n\r\n// success code\r\n```\r\n\r\nAnother option can be to use a library like Vavr, or implement something similar. The result would look like (or similar, I do not remember the exact syntax):\r\n\r\n```\r\nValidation&lt;ValidationResult, Void&gt; result = Validation.combine(\r\n    checkBelongsToGroup(row),\r\n    checkParentToGroup(row),\r\n    checkLocation(row)\r\n).ap((a, b, c) -&gt; null);\r\n\r\nif (result.isInvalid()) {\r\n    var failure = result.getError();\r\n    // manage error\r\n}\r\n\r\n// success code\r\n```\r\n\r\nA manual implementation, not tested, not much thinking, would maybe look like:\r\n```\r\nStream&lt;Function&lt;Row, ValidationResult&gt;&gt; validators = Stream.of(\r\n    this::checkBelongsToGroup,\r\n    this::checkParentToGroup,\r\n    this::checkLocation\r\n);\r\n\r\nValidationResult failure = validators\r\n    .map(validator -&gt; validator.apply(row))\r\n    .filter(Optional::isPresent)\r\n    .findFirst()\r\n    .orElseGet(Optional::empty);\r\n\r\nif (failure.isPresent()) {\r\n    // manage error\r\n}\r\n\r\n// success code","title":"Simplifying Validation rule sequence in Java","body":"<p>The <code>Optional.empty()</code> seems like an ok idea, but I find the chaining of validation a bit confuse. In this case, maybe a typical series of conditional would be more readable. Something like:</p>\n<pre><code>var result = checkBelongsToGroup(row);\n\nif (result.isEmpty()) {\n    result = checkParentToGroup(row);\n}\n\nif (result.isEmpty()) {\n    result = checkLocation(row);\n}\n\nif (!result.isEmpty()) {\n    // manage error\n}\n\n// success code\n</code></pre>\n<p>Another option can be to use a library like Vavr, or implement something similar. The result would look like (or similar, I do not remember the exact syntax):</p>\n<pre><code>Validation&lt;ValidationResult, Void&gt; result = Validation.combine(\n    checkBelongsToGroup(row),\n    checkParentToGroup(row),\n    checkLocation(row)\n).ap((a, b, c) -&gt; null);\n\nif (result.isInvalid()) {\n    var failure = result.getError();\n    // manage error\n}\n\n// success code\n</code></pre>\n<p>A manual implementation, not tested, not much thinking, would maybe look like:</p>\n<pre><code>Stream&lt;Function&lt;Row, ValidationResult&gt;&gt; validators = Stream.of(\n    this::checkBelongsToGroup,\n    this::checkParentToGroup,\n    this::checkLocation\n);\n\nValidationResult failure = validators\n    .map(validator -&gt; validator.apply(row))\n    .filter(Optional::isPresent)\n    .findFirst()\n    .orElseGet(Optional::empty);\n\nif (failure.isPresent()) {\n    // manage error\n}\n\n// success code\n</code></pre>\n"}],"owner":{"account_id":22288724,"reputation":15,"user_id":16515948,"display_name":"SAIKAT CHAKRABORTY"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697141097,"creation_date":1697129691,"question_id":77282495,"body_markdown":"I have a list of validations on an object now these validation are quite expensive and involve an API call to another service. I need to short circuit the validation chain on the first time we receive a negative validation or a error/exception while calling the validation service. \r\nWhat I have currently, is each validation helper functions would return an Optional&lt;ValidationResult&gt;. This optional is empty when the validation is successful. If the validation failed either due to the response from the service called or an exception is thrown from the service, We just return that ValidationResult, at the end of the chain we return a Valid ValidationResult\r\n\r\nThis is the optional chaining here : \r\n\r\n```\r\nreturn checkBelongsToGroup(row)\r\n                .orElseGet(() -&gt; checkParentToGroup(row)\r\n                        .orElseGet(() -&gt; checkLocation(row)\r\n                                .orElseGet(() -&gt; builder()\r\n                                .outcome(ValidationResult\r\n                                        .Outcome.VALID).build())));\r\n\r\n\r\n\r\n```\r\nNow providing one of the validation functions to give a taste on how it looks:\r\n\r\n```\r\npublic Optional&lt;ValidationResult&gt; checkBelongsToGroup(final Row row) {\r\n        if (Strings.isNullOrEmpty(row.getPreviousId())) {\r\n            return Optional.empty(); //valid\r\n        }\r\n        return Try.of(() -&gt; serviceClient.getassociation(row))\r\n                .toEither()\r\n                .mapLeft(this::getThrowableError)\r\n// helper function to change exception to ValidationResult\r\n                .fold(validationError -&gt;  Optional.of(validationError), getAssociationOutput -&gt; {\r\n                    final Association association = getAssociationOutput.getAssociation();\r\n                    if (association != null &amp;&amp; association.isActive()) {\r\n                        return Optional.empty(); // Success case\r\n                    } else {\r\n                        return Optional.of(builder()\r\n                                .outcome(ValidationResult.Outcome.INVALID)\r\n                                .errorStringId(INVALID)\r\n                                .build()); // Validation failed.\r\n                    }\r\n                });\r\n\r\n    }\r\n\r\n\r\n```\r\n\r\nThe weird part here is that Optional.empty is being used to resemble success case which is semantically wrong. Is there a way to do this kind of chained shortcircuited validation that goes on till the first exception of validation failed. \r\nI was thinking of Validation library from vavr for this but need some help.\r\n","title":"Simplifying Validation rule sequence in Java","body":"<p>I have a list of validations on an object now these validation are quite expensive and involve an API call to another service. I need to short circuit the validation chain on the first time we receive a negative validation or a error/exception while calling the validation service.\nWhat I have currently, is each validation helper functions would return an Optional. This optional is empty when the validation is successful. If the validation failed either due to the response from the service called or an exception is thrown from the service, We just return that ValidationResult, at the end of the chain we return a Valid ValidationResult</p>\n<p>This is the optional chaining here :</p>\n<pre><code>return checkBelongsToGroup(row)\n                .orElseGet(() -&gt; checkParentToGroup(row)\n                        .orElseGet(() -&gt; checkLocation(row)\n                                .orElseGet(() -&gt; builder()\n                                .outcome(ValidationResult\n                                        .Outcome.VALID).build())));\n\n\n\n</code></pre>\n<p>Now providing one of the validation functions to give a taste on how it looks:</p>\n<pre><code>public Optional&lt;ValidationResult&gt; checkBelongsToGroup(final Row row) {\n        if (Strings.isNullOrEmpty(row.getPreviousId())) {\n            return Optional.empty(); //valid\n        }\n        return Try.of(() -&gt; serviceClient.getassociation(row))\n                .toEither()\n                .mapLeft(this::getThrowableError)\n// helper function to change exception to ValidationResult\n                .fold(validationError -&gt;  Optional.of(validationError), getAssociationOutput -&gt; {\n                    final Association association = getAssociationOutput.getAssociation();\n                    if (association != null &amp;&amp; association.isActive()) {\n                        return Optional.empty(); // Success case\n                    } else {\n                        return Optional.of(builder()\n                                .outcome(ValidationResult.Outcome.INVALID)\n                                .errorStringId(INVALID)\n                                .build()); // Validation failed.\n                    }\n                });\n\n    }\n\n\n</code></pre>\n<p>The weird part here is that Optional.empty is being used to resemble success case which is semantically wrong. Is there a way to do this kind of chained shortcircuited validation that goes on till the first exception of validation failed.\nI was thinking of Validation library from vavr for this but need some help.</p>\n"},{"tags":["java","rabbitmq","whitelist","truststore"],"answers":[{"comments":[{"owner":{"account_id":15535211,"reputation":21,"user_id":11207561,"display_name":"PFGX"},"score":0,"creation_date":1552989054,"post_id":55184526,"comment_id":97208952,"body_markdown":"Sorry for the late response, I&#39;ve added a config file in the post. It still passes everything through. I forgot to mention, that the certificates are self-signed.","body":"Sorry for the late response, I&#39;ve added a config file in the post. It still passes everything through. I forgot to mention, that the certificates are self-signed."},{"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"score":0,"creation_date":1553008454,"post_id":55184526,"comment_id":97221566,"body_markdown":"Are you certain your code is connecting to port 5671? Have you tried this without using the trust store?","body":"Are you certain your code is connecting to port 5671? Have you tried this without using the trust store?"},{"owner":{"account_id":15535211,"reputation":21,"user_id":11207561,"display_name":"PFGX"},"score":0,"creation_date":1553071531,"post_id":55184526,"comment_id":97244825,"body_markdown":"5671 is for SSL AMQP, right? I have to use SSL MQTT protocol, therefore i use the 8883 port. I&#39;ve tried connecting with and without trust store plugin, the results are the same - i can connect without any problems (even if the trust store whitelist folder is empty)","body":"5671 is for SSL AMQP, right? I have to use SSL MQTT protocol, therefore i use the 8883 port. I&#39;ve tried connecting with and without trust store plugin, the results are the same - i can connect without any problems (even if the trust store whitelist folder is empty)"},{"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"score":0,"creation_date":1553084446,"post_id":55184526,"comment_id":97252556,"body_markdown":"Have you tried the TLS AMQP port with an AMQP client? I will double-check how to configure TLS for MQTT as I&#39;m surprised it doesn&#39;t also have an `ssl_options` section.","body":"Have you tried the TLS AMQP port with an AMQP client? I will double-check how to configure TLS for MQTT as I&#39;m surprised it doesn&#39;t also have an <code>ssl_options</code> section."},{"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"score":0,"creation_date":1553084641,"post_id":55184526,"comment_id":97252692,"body_markdown":"You should use [these instructions](https://www.rabbitmq.com/troubleshooting-ssl.html) to ensure TLS is configured correctly for all TLS-enabled ports. `openssl` is a useful tool here.","body":"You should use <a href=\"https://www.rabbitmq.com/troubleshooting-ssl.html\" rel=\"nofollow noreferrer\">these instructions</a> to ensure TLS is configured correctly for all TLS-enabled ports. <code>openssl</code> is a useful tool here."},{"owner":{"account_id":15535211,"reputation":21,"user_id":11207561,"display_name":"PFGX"},"score":0,"creation_date":1553085650,"post_id":55184526,"comment_id":97253327,"body_markdown":"I, actually, did try it with SSL AMQP, it still lets everything through. The TLS is configured properly - if i don&#39;t present the certificate, or i do present an invalid one i get connection error from rabbit (handshake_failure) for both AMQP and MQTT.","body":"I, actually, did try it with SSL AMQP, it still lets everything through. The TLS is configured properly - if i don&#39;t present the certificate, or i do present an invalid one i get connection error from rabbit (handshake_failure) for both AMQP and MQTT."},{"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"score":0,"creation_date":1553093259,"post_id":55184526,"comment_id":97258515,"body_markdown":"&quot;The TLS is configured properly - if i don&#39;t present the certificate, or i do present an invalid one i get connection error from rabbit&quot; - this is a new detail that is important. What do you mean by &quot;present an invalid&quot; certificate here? Do you mean invalid as in bad data or invalid as in not signed by your CA? At this point this discussion should go to the mailing list since SO isn&#39;t the right place. Ideally, you would provide certificates that reproduce this issue. I suggest you compare your certs with those generated by [this tool](https://github.com/michaelklishin/tls-gen).","body":"&quot;The TLS is configured properly - if i don&#39;t present the certificate, or i do present an invalid one i get connection error from rabbit&quot; - this is a new detail that is important. What do you mean by &quot;present an invalid&quot; certificate here? Do you mean invalid as in bad data or invalid as in not signed by your CA? At this point this discussion should go to the mailing list since SO isn&#39;t the right place. Ideally, you would provide certificates that reproduce this issue. I suggest you compare your certs with those generated by <a href=\"https://github.com/michaelklishin/tls-gen\" rel=\"nofollow noreferrer\">this tool</a>."},{"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"score":0,"creation_date":1553101335,"post_id":55184526,"comment_id":97264017,"body_markdown":"I have verified that `rabbitmq_trust_store` works as expected for MQTT connections. See complete set of certs and details [here](https://github.com/lukebakken/tls-trust-store-55179047).","body":"I have verified that <code>rabbitmq_trust_store</code> works as expected for MQTT connections. See complete set of certs and details <a href=\"https://github.com/lukebakken/tls-trust-store-55179047\" rel=\"nofollow noreferrer\">here</a>."},{"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"score":0,"creation_date":1553527002,"post_id":55184526,"comment_id":97407028,"body_markdown":"What did you have to change in your environment?","body":"What did you have to change in your environment?"}],"tags":[],"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"comment_count":9,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697140835,"creation_date":1552659144,"answer_id":55184526,"question_id":55179047,"body_markdown":"I&#39;m pretty much guessing based on the limited amount of information provided, but you probably don&#39;t have TLS configured to verify the client&#39;s certificate. You need to use the `verify_peer` RabbitMQ configuration option. We have comprehensive docs that I suggest that you read - https://www.rabbitmq.com/ssl.html, https://www.rabbitmq.com/troubleshooting-ssl.html\r\n\r\nAlso please note that the certificates that you whitelist are the CA certificate(s) used to sign the client certificates that your applications present, not the client certificates themselves.\r\n\r\nFinally, the best way to get help quickly is to provide a set of files that someone can use to run RabbitMQ and a test application to see the problem.\r\n","title":"RabbitMQ - Trust store lets all the connections through","body":"<p>I'm pretty much guessing based on the limited amount of information provided, but you probably don't have TLS configured to verify the client's certificate. You need to use the <code>verify_peer</code> RabbitMQ configuration option. We have comprehensive docs that I suggest that you read - <a href=\"https://www.rabbitmq.com/ssl.html\" rel=\"nofollow noreferrer\">https://www.rabbitmq.com/ssl.html</a>, <a href=\"https://www.rabbitmq.com/troubleshooting-ssl.html\" rel=\"nofollow noreferrer\">https://www.rabbitmq.com/troubleshooting-ssl.html</a></p>\n<p>Also please note that the certificates that you whitelist are the CA certificate(s) used to sign the client certificates that your applications present, not the client certificates themselves.</p>\n<p>Finally, the best way to get help quickly is to provide a set of files that someone can use to run RabbitMQ and a test application to see the problem.</p>\n"}],"owner":{"account_id":15535211,"reputation":21,"user_id":11207561,"display_name":"PFGX"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1715,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1697140835,"creation_date":1552641072,"question_id":55179047,"body_markdown":"I&#39;ve got an issue with RabbitMQ&#39;s Trust Store.\r\nI&#39;ve installed the plugin as shown on github, the plugin loads indeed, it even responds when I drop in the certificates to the whitelist folder (if I drop a bad cert.pem like private key I get an error response that the certificate isn&#39;t a certificate, if I drop a good one i get response like this: trust store: loading certificate &#39;cert.pem&#39;) - and that&#39;s great. \r\nBut, this is where the problems begin. the MQTT and AMQP connections i make with my Java client are passed through, even if there are no certificates present in the whitelist folder. If i understand correctly the idea of the whole plugin, they should be only passed through if there are certificates present in the whitelist folder, otherwise they shouldn&#39;t be.\r\n\r\nAnyone happened to struggle with the same thing?\r\n\r\nTech: RabbitMQ on docker, Java client using bouncycastle library for ssl\r\n\r\n// EDIT\r\nAddon: Rabbitmq.config file\r\n\r\n    [\r\n        { rabbit, [\r\n\t\t{ loopback_users, [ ] },\r\n\t\t{ssl_handshake_timeout, 100000},\r\n                { tcp_listeners, [ 5672 ] },\r\n                { ssl_listeners, [ 5671 ] },\r\n                { ssl_options, [\r\n                        { cacertfile, &quot;/etc/tls/cacert.pem&quot; },\r\n                        { certfile, &quot;/etc/tls/cert.pem&quot; },\r\n\t\t\t{ keyfile, &quot;/etc/tls/key.pem&quot; },\r\n\t\t\t{ verify, verify_peer },\r\n                        { fail_if_no_peer_cert, true },\r\n\t\t\t{ reuse_sessions, false}\r\n                ] },\r\n                { default_pass, &lt;&lt;&quot;guest&quot;&gt;&gt; },\r\n                { default_user, &lt;&lt;&quot;guest&quot;&gt;&gt; },\r\n                { default_vhost, &lt;&lt;&quot;/&quot;&gt;&gt; },\r\n                { hipe_compile, false }\r\n        ] },\r\n        { rabbitmq_management, [ { listener, [\r\n                { port, 15671 },\r\n                { ssl, true },\r\n                { ssl_opts, [\r\n                        { cacertfile, &quot;/etc/tls/cacert.pem&quot; },\r\n                        { certfile, &quot;/etc/tls/cert.pem&quot; },\r\n                        { fail_if_no_peer_cert, false },\r\n                        { keyfile, &quot;/etc/tls/key.pem&quot; },\r\n                        { verify, verify_peer }\r\n                ] }\r\n        ] } ] },\r\n        { rabbitmq_mqtt, [\r\n                { vhost, &lt;&lt;&quot;/&quot;&gt;&gt; },\r\n                { exchange, &lt;&lt;&quot;amq.topic&quot;&gt;&gt; },\r\n                { default_user, &lt;&lt;&quot;guest&quot;&gt;&gt; },\r\n                { default_pass, &lt;&lt;&quot;guest&quot;&gt;&gt; },\r\n                { tcp_listeners, [ 1883 ] },\r\n                { ssl_listeners, [ 8883 ] }\r\n        ] },\r\n\t\t{rabbitmq_trust_store, [\r\n\t\t\t {directory,        &quot;/etc/whitelist&quot;}, \r\n\t\t\t {refresh_interval, {seconds, 30}},\r\n\t\t\t {log_levels, [{connection, debug}, {channel, debug}, {federation, debug}]}\r\n\t\t]}\r\n    ].","title":"RabbitMQ - Trust store lets all the connections through","body":"<p>I've got an issue with RabbitMQ's Trust Store.\nI've installed the plugin as shown on github, the plugin loads indeed, it even responds when I drop in the certificates to the whitelist folder (if I drop a bad cert.pem like private key I get an error response that the certificate isn't a certificate, if I drop a good one i get response like this: trust store: loading certificate 'cert.pem') - and that's great. \nBut, this is where the problems begin. the MQTT and AMQP connections i make with my Java client are passed through, even if there are no certificates present in the whitelist folder. If i understand correctly the idea of the whole plugin, they should be only passed through if there are certificates present in the whitelist folder, otherwise they shouldn't be.</p>\n\n<p>Anyone happened to struggle with the same thing?</p>\n\n<p>Tech: RabbitMQ on docker, Java client using bouncycastle library for ssl</p>\n\n<p>// EDIT\nAddon: Rabbitmq.config file</p>\n\n<pre><code>[\n    { rabbit, [\n    { loopback_users, [ ] },\n    {ssl_handshake_timeout, 100000},\n            { tcp_listeners, [ 5672 ] },\n            { ssl_listeners, [ 5671 ] },\n            { ssl_options, [\n                    { cacertfile, \"/etc/tls/cacert.pem\" },\n                    { certfile, \"/etc/tls/cert.pem\" },\n        { keyfile, \"/etc/tls/key.pem\" },\n        { verify, verify_peer },\n                    { fail_if_no_peer_cert, true },\n        { reuse_sessions, false}\n            ] },\n            { default_pass, &lt;&lt;\"guest\"&gt;&gt; },\n            { default_user, &lt;&lt;\"guest\"&gt;&gt; },\n            { default_vhost, &lt;&lt;\"/\"&gt;&gt; },\n            { hipe_compile, false }\n    ] },\n    { rabbitmq_management, [ { listener, [\n            { port, 15671 },\n            { ssl, true },\n            { ssl_opts, [\n                    { cacertfile, \"/etc/tls/cacert.pem\" },\n                    { certfile, \"/etc/tls/cert.pem\" },\n                    { fail_if_no_peer_cert, false },\n                    { keyfile, \"/etc/tls/key.pem\" },\n                    { verify, verify_peer }\n            ] }\n    ] } ] },\n    { rabbitmq_mqtt, [\n            { vhost, &lt;&lt;\"/\"&gt;&gt; },\n            { exchange, &lt;&lt;\"amq.topic\"&gt;&gt; },\n            { default_user, &lt;&lt;\"guest\"&gt;&gt; },\n            { default_pass, &lt;&lt;\"guest\"&gt;&gt; },\n            { tcp_listeners, [ 1883 ] },\n            { ssl_listeners, [ 8883 ] }\n    ] },\n    {rabbitmq_trust_store, [\n         {directory,        \"/etc/whitelist\"}, \n         {refresh_interval, {seconds, 30}},\n         {log_levels, [{connection, debug}, {channel, debug}, {federation, debug}]}\n    ]}\n].\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","spring-data-jpa"],"answers":[{"comments":[{"owner":{"account_id":9305162,"reputation":1045,"user_id":6909182,"display_name":"this.srivastava"},"score":0,"creation_date":1697133565,"post_id":77282848,"comment_id":136244869,"body_markdown":"IntelliJ is yelling at \\\\:","body":"IntelliJ is yelling at \\\\:"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1697133642,"post_id":77282848,"comment_id":136244885,"body_markdown":"with which message?","body":"with which message?"},{"owner":{"account_id":9305162,"reputation":1045,"user_id":6909182,"display_name":"this.srivastava"},"score":0,"creation_date":1697133669,"post_id":77282848,"comment_id":136244893,"body_markdown":"&#39;)&#39;, &#39;,&#39;, &lt;expression&gt;, &lt;operator&gt;, AT, ISNULL, NOTNULL, OPERATOR, TIME, WITH or &#39;[&#39; expected, got &#39;\\&#39;","body":"&#39;)&#39;, &#39;,&#39;, &lt;expression&gt;, &lt;operator&gt;, AT, ISNULL, NOTNULL, OPERATOR, TIME, WITH or &#39;[&#39; expected, got &#39;\\&#39;"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1697134047,"post_id":77282848,"comment_id":136244965,"body_markdown":"on the first or the second colon?","body":"on the first or the second colon?"},{"owner":{"account_id":9305162,"reputation":1045,"user_id":6909182,"display_name":"this.srivastava"},"score":0,"creation_date":1697134187,"post_id":77282848,"comment_id":136244986,"body_markdown":"1st colon, but anyway I tried to rereun, it didn&#39;t stop the application, but I got different exception this time","body":"1st colon, but anyway I tried to rereun, it didn&#39;t stop the application, but I got different exception this time"},{"owner":{"account_id":9305162,"reputation":1045,"user_id":6909182,"display_name":"this.srivastava"},"score":0,"creation_date":1697134198,"post_id":77282848,"comment_id":136244988,"body_markdown":"Resolved [org.springframework.dao.InvalidDataAccessResourceUsageException: JDBC exception executing SQL [ SELECT id, text_code as textCode, json_data as jsonData&lt;EOL&gt; FROM some_table&lt;EOL&gt; WHERE text_code = ?&lt;EOL&gt;     AND ((data_stream -&gt;&gt; &#39;created&#39;)::timestamp) BETWEEN ? AND ?&lt;EOL&gt;] [ERROR: operator does not exist: timestamp without time zone &gt;= character varying&lt;EOL&gt;  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.&lt;EOL&gt;  Position: 211] [n/a]; SQL [n/a]]","body":"Resolved [org.springframework.dao.InvalidDataAccessResourceUsageExcep&zwnj;&#8203;tion: JDBC exception executing SQL [ SELECT id, text_code as textCode, json_data as jsonData&lt;EOL&gt; FROM some_table&lt;EOL&gt; WHERE text_code = ?&lt;EOL&gt;     AND ((data_stream -&gt;&gt; &#39;created&#39;)::timestamp) BETWEEN ? AND ?&lt;EOL&gt;] [ERROR: operator does not exist: timestamp without time zone &gt;= character varying&lt;EOL&gt;  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.&lt;EOL&gt;  Position: 211] [n/a]; SQL [n/a]]"},{"owner":{"account_id":9305162,"reputation":1045,"user_id":6909182,"display_name":"this.srivastava"},"score":0,"creation_date":1697134233,"post_id":77282848,"comment_id":136244992,"body_markdown":"is it because i&#39;m using triple quotes?","body":"is it because i&#39;m using triple quotes?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1697134265,"post_id":77282848,"comment_id":136244998,"body_markdown":"Maybe, it depends on what you have changed?","body":"Maybe, it depends on what you have changed?"}],"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"comment_count":8,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697134424,"creation_date":1697133448,"answer_id":77282848,"question_id":77282811,"body_markdown":"You have to escape the colons in `::timestamp` because jpa will looking for a placeholder if  it sees a colon:\r\n\r\n    AND ((json_data -&gt;&gt; &#39;created&#39;)\\\\:\\\\:timestamp)\r\n\r\nor if you use text blocks\r\n\r\n    AND ((json_data -&gt;&gt; &#39;created&#39;)\\:\\:timestamp)","title":"Query Postgres JSONB column timestamp property between two timestamps using Spring Data JPA","body":"<p>You have to escape the colons in <code>::timestamp</code> because jpa will looking for a placeholder if  it sees a colon:</p>\n<pre><code>AND ((json_data -&gt;&gt; 'created')\\\\:\\\\:timestamp)\n</code></pre>\n<p>or if you use text blocks</p>\n<pre><code>AND ((json_data -&gt;&gt; 'created')\\:\\:timestamp)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9305162,"reputation":1045,"user_id":6909182,"display_name":"this.srivastava"},"score":0,"creation_date":1697135029,"post_id":77282958,"comment_id":136245111,"body_markdown":"I still get cast related exception","body":"I still get cast related exception"},{"owner":{"account_id":101001,"reputation":119808,"user_id":271959,"display_name":"Frank Heikens"},"score":0,"creation_date":1697135175,"post_id":77282958,"comment_id":136245131,"body_markdown":"@this.srivastava That&#39;s not a very clear nor exact error message... Please post the exact message. And when you do, also post the content of your json and your input.","body":"@this.srivastava That&#39;s not a very clear nor exact error message... Please post the exact message. And when you do, also post the content of your json and your input."},{"owner":{"account_id":101001,"reputation":119808,"user_id":271959,"display_name":"Frank Heikens"},"score":0,"creation_date":1697140782,"post_id":77282958,"comment_id":136246016,"body_markdown":"@this.srivastava See the updated answer, cast your input as well. Because currently is handled as a varchar.","body":"@this.srivastava See the updated answer, cast your input as well. Because currently is handled as a varchar."},{"owner":{"account_id":9305162,"reputation":1045,"user_id":6909182,"display_name":"this.srivastava"},"score":0,"creation_date":1697172992,"post_id":77282958,"comment_id":136249007,"body_markdown":"casting the input made it work","body":"casting the input made it work"}],"tags":[],"owner":{"account_id":101001,"reputation":119808,"user_id":271959,"display_name":"Frank Heikens"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697140747,"creation_date":1697134701,"answer_id":77282958,"question_id":77282811,"body_markdown":"Use CAST() to cast:\r\n\r\n    Query = true,\r\n            value =\r\n                    &quot;&quot;&quot;\r\n                    SELECT id, text_code as textCode, json_data as jsonData\r\n                    FROM some_table\r\n                    WHERE text_code = :textCode\r\n                        AND CAST(json_data -&gt;&gt; &#39;created&#39; AS timestamp) BETWEEN CAST(:startDate AS timestamp) AND CAST(:endDate AS timestamp);&quot;&quot;&quot;)\r\n    List&lt;EntityData&gt; getBetween(\r\n            @Param(&quot;textCode&quot;) String textCode,\r\n            @Param(&quot;startDate&quot;) String startDate,\r\n            @Param(&quot;endDate&quot;) String endDate);\r\n\r\nSimple example that works perfectly fine:\r\n\r\n    SELECT  CAST(x-&gt;&gt;&#39;ts&#39; AS TIMESTAMP)\r\n    FROM ( SELECT  json_build_object(&#39;ts&#39;,&#39;2023-10-12 12:00&#39;)) AS t1(x);\r\n\r\nHowever, an empty string or any other non-valid timestamp will result in an error.","title":"Query Postgres JSONB column timestamp property between two timestamps using Spring Data JPA","body":"<p>Use CAST() to cast:</p>\n<pre><code>Query = true,\n        value =\n                &quot;&quot;&quot;\n                SELECT id, text_code as textCode, json_data as jsonData\n                FROM some_table\n                WHERE text_code = :textCode\n                    AND CAST(json_data -&gt;&gt; 'created' AS timestamp) BETWEEN CAST(:startDate AS timestamp) AND CAST(:endDate AS timestamp);&quot;&quot;&quot;)\nList&lt;EntityData&gt; getBetween(\n        @Param(&quot;textCode&quot;) String textCode,\n        @Param(&quot;startDate&quot;) String startDate,\n        @Param(&quot;endDate&quot;) String endDate);\n</code></pre>\n<p>Simple example that works perfectly fine:</p>\n<pre><code>SELECT  CAST(x-&gt;&gt;'ts' AS TIMESTAMP)\nFROM ( SELECT  json_build_object('ts','2023-10-12 12:00')) AS t1(x);\n</code></pre>\n<p>However, an empty string or any other non-valid timestamp will result in an error.</p>\n"}],"owner":{"account_id":9305162,"reputation":1045,"user_id":6909182,"display_name":"this.srivastava"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77282958,"answer_count":2,"score":0,"last_activity_date":1697140747,"creation_date":1697133130,"question_id":77282811,"body_markdown":"I have a jsonb column which has &#39;created&#39; property and stores timestamp string. I&#39;m able to query in query editor, but I can&#39;t perform the same using Spring Data JPA with nativeQuery as true. Here is what I&#39;m trying to do\r\n\r\nIn pgAdmin/Query Editor I get results:\r\n\r\n    select id, text_code, json_data from some_table where text_code = &#39;7845754645434878&#39; and ((json_data -&gt;&gt; &#39;created&#39;)::timestamp) \r\n\tbetween &#39;2023-10-10:00:00:00&#39; and &#39;2023-10-10:23:59:59&#39;\r\n\r\nUsing code:\r\n\r\n    @Query(\r\n            nativeQuery = true,\r\n            value =\r\n                    &quot;&quot;&quot;\r\n                    SELECT id, text_code as textCode, json_data as jsonData\r\n                    FROM some_table\r\n                    WHERE text_code = :textCode\r\n                        AND ((json_data -&gt;&gt; &#39;created&#39;)::timestamp) BETWEEN :startDate AND :endDate\r\n                   &quot;&quot;&quot;)\r\n    List&lt;EntityData&gt; getBetween(\r\n            @Param(&quot;textCode&quot;) String textCode,\r\n            @Param(&quot;startDate&quot;) String startDate,\r\n            @Param(&quot;endDate&quot;) String endDate);\r\n\r\nI get syntax error\r\n\r\n    ERROR: syntax error at or near &quot;:&quot;\r\n  \r\n\r\n    Position: 198] [n/a]; SQL [n/a]\r\n\r\nI think it is showing error at :timestamp, but I&#39;m not able to resolve this. Can you please help to get a workaround for this?\r\n\r\n**Update:**\r\n\r\nThe data I sent to startDate and endDate is &#39;2023-10-10:00:00:00&#39; and &#39;2023-10-10:23:59:59&#39; respectively.\r\n\r\nIf I do casting, I get\r\n\r\n    m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.InvalidDataAccessResourceUsageException: JDBC exception executing SQL [ SELECT id, text_code as textCode, json_data as jsonData&lt;EOL&gt; FROM some_table&lt;EOL&gt; WHERE text_code = ?&lt;EOL&gt;     AND ((data_stream -&gt;&gt; &#39;created&#39;)::timestamp) BETWEEN ? AND ?&lt;EOL&gt;] [ERROR: operator does not exist: timestamp without time zone &gt;= character varying&lt;EOL&gt;  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.&lt;EOL&gt;  Position: 211] [n/a]; SQL [n/a]]","title":"Query Postgres JSONB column timestamp property between two timestamps using Spring Data JPA","body":"<p>I have a jsonb column which has 'created' property and stores timestamp string. I'm able to query in query editor, but I can't perform the same using Spring Data JPA with nativeQuery as true. Here is what I'm trying to do</p>\n<p>In pgAdmin/Query Editor I get results:</p>\n<pre><code>select id, text_code, json_data from some_table where text_code = '7845754645434878' and ((json_data -&gt;&gt; 'created')::timestamp) \nbetween '2023-10-10:00:00:00' and '2023-10-10:23:59:59'\n</code></pre>\n<p>Using code:</p>\n<pre><code>@Query(\n        nativeQuery = true,\n        value =\n                &quot;&quot;&quot;\n                SELECT id, text_code as textCode, json_data as jsonData\n                FROM some_table\n                WHERE text_code = :textCode\n                    AND ((json_data -&gt;&gt; 'created')::timestamp) BETWEEN :startDate AND :endDate\n               &quot;&quot;&quot;)\nList&lt;EntityData&gt; getBetween(\n        @Param(&quot;textCode&quot;) String textCode,\n        @Param(&quot;startDate&quot;) String startDate,\n        @Param(&quot;endDate&quot;) String endDate);\n</code></pre>\n<p>I get syntax error</p>\n<pre><code>ERROR: syntax error at or near &quot;:&quot;\n\n\nPosition: 198] [n/a]; SQL [n/a]\n</code></pre>\n<p>I think it is showing error at :timestamp, but I'm not able to resolve this. Can you please help to get a workaround for this?</p>\n<p><strong>Update:</strong></p>\n<p>The data I sent to startDate and endDate is '2023-10-10:00:00:00' and '2023-10-10:23:59:59' respectively.</p>\n<p>If I do casting, I get</p>\n<pre><code>m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.InvalidDataAccessResourceUsageException: JDBC exception executing SQL [ SELECT id, text_code as textCode, json_data as jsonData&lt;EOL&gt; FROM some_table&lt;EOL&gt; WHERE text_code = ?&lt;EOL&gt;     AND ((data_stream -&gt;&gt; 'created')::timestamp) BETWEEN ? AND ?&lt;EOL&gt;] [ERROR: operator does not exist: timestamp without time zone &gt;= character varying&lt;EOL&gt;  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.&lt;EOL&gt;  Position: 211] [n/a]; SQL [n/a]]\n</code></pre>\n"},{"tags":["java","sql","jdbc"],"comments":[{"owner":{"account_id":1038635,"reputation":481,"user_id":1045180,"display_name":"Krystian Lieber"},"score":1,"creation_date":1363292934,"post_id":15419485,"comment_id":21804675,"body_markdown":"I think that the JDBC driver is not in the classpath. \nWhat are you using to build your project?","body":"I think that the JDBC driver is not in the classpath.  What are you using to build your project?"},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1363292935,"post_id":15419485,"comment_id":21804676,"body_markdown":"Look at one of the other hundred questions about this on this site. I just commented on another one just a minute ago.","body":"Look at one of the other hundred questions about this on this site. I just commented on another one just a minute ago."}],"answers":[{"tags":[],"owner":{"account_id":55539,"reputation":160139,"user_id":166339,"display_name":"Asaph"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1363292955,"creation_date":1363292955,"answer_id":15419533,"question_id":15419485,"body_markdown":"You need to add the jar file containing the class `com.microsoft.sqlserver.jdbc.SQLServerDriver` to your war file&#39;s `WEB-INF/lib` folder.","title":"java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver","body":"<p>You need to add the jar file containing the class <code>com.microsoft.sqlserver.jdbc.SQLServerDriver</code> to your war file's <code>WEB-INF/lib</code> folder.</p>\n"},{"tags":[],"owner":{"account_id":1038635,"reputation":481,"user_id":1045180,"display_name":"Krystian Lieber"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1363293237,"creation_date":1363293237,"answer_id":15419609,"question_id":15419485,"body_markdown":"Read [Tomcat Documentation about classpath][1] for clarification or just put the sqljdbc.jar in $CATALINA_HOME/lib to access it from all your applications.\r\n\r\n\r\n\r\n\r\n\r\n  [1]: http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html","title":"java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver","body":"<p>Read <a href=\"http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html\" rel=\"nofollow\">Tomcat Documentation about classpath</a> for clarification or just put the sqljdbc.jar in $CATALINA_HOME/lib to access it from all your applications.</p>\n"},{"tags":[],"owner":{"account_id":3821064,"reputation":21,"user_id":3169162,"display_name":"Govardhan Chary"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1389098218,"creation_date":1389098218,"answer_id":20971811,"question_id":15419485,"body_markdown":"Eventhough you have JAR(sqlserverjdbc.jar) in build path You need to add the jar file containing the class. com.microsoft.sqlserver.jdbc.SQLServerDriver to your war file&#39;s WEB-INF/lib folder.\r\n ","title":"java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver","body":"<p>Eventhough you have JAR(sqlserverjdbc.jar) in build path You need to add the jar file containing the class. com.microsoft.sqlserver.jdbc.SQLServerDriver to your war file's WEB-INF/lib folder.</p>\n"},{"tags":[],"owner":{"account_id":3841147,"reputation":797,"user_id":3184171,"display_name":"oraclesoon"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1400145470,"creation_date":1400145470,"answer_id":23674045,"question_id":15419485,"body_markdown":"&gt; May 15, 2014 3:09:43 PM org.apache.tomcat.jdbc.pool.ConnectionPool init\r\nSEVERE: Unable to create initial connections of pool.\r\njava.sql.SQLException: com.microsoft.sqlserver.jdbc.SQLServerDriver\r\n        at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:254)\r\n        at org.apache.tomcat.jdbc.pool.PooledConnection.connect(PooledConnection.java:182)\r\n        at org.apache.tomcat.jdbc.pool.ConnectionPool.createConnection(ConnectionPool.java:701)\r\n        at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:635)\r\n...\r\n\r\nIt is quite puzzling because my web application has **WEB-INF/lib/sqljdbc4.jar**.\r\n\r\nFrom the error message, somehow the jar file is required by Tomcat too.\r\n\r\nAfter I copy the jar file to **CATALINA_HOME/lib/sqljdbc4.jar**, the error is gone.","title":"java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver","body":"<blockquote>\n  <p>May 15, 2014 3:09:43 PM org.apache.tomcat.jdbc.pool.ConnectionPool init\n  SEVERE: Unable to create initial connections of pool.\n  java.sql.SQLException: com.microsoft.sqlserver.jdbc.SQLServerDriver\n          at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:254)\n          at org.apache.tomcat.jdbc.pool.PooledConnection.connect(PooledConnection.java:182)\n          at org.apache.tomcat.jdbc.pool.ConnectionPool.createConnection(ConnectionPool.java:701)\n          at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:635)\n  ...</p>\n</blockquote>\n\n<p>It is quite puzzling because my web application has <strong>WEB-INF/lib/sqljdbc4.jar</strong>.</p>\n\n<p>From the error message, somehow the jar file is required by Tomcat too.</p>\n\n<p>After I copy the jar file to <strong>CATALINA_HOME/lib/sqljdbc4.jar</strong>, the error is gone.</p>\n"},{"tags":[],"owner":{"account_id":3011489,"reputation":1,"user_id":2554899,"display_name":"Tyrone Hed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1425499290,"creation_date":1425499290,"answer_id":28863770,"question_id":15419485,"body_markdown":"Since you&#39;re running a web app, you need to have the MS SQL Server driver--or the driver for any DB--stored in two places. Inside the app that becomes your WAR and then you need a second copy that is stored in the App Server&#39;s LIB directory. So, if you&#39;re running on Tomcat then you would put it /opt/tomcat/lib or C:\\DEV\\tomcat7\\lib.","title":"java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver","body":"<p>Since you're running a web app, you need to have the MS SQL Server driver--or the driver for any DB--stored in two places. Inside the app that becomes your WAR and then you need a second copy that is stored in the App Server's LIB directory. So, if you're running on Tomcat then you would put it /opt/tomcat/lib or C:\\DEV\\tomcat7\\lib.</p>\n"},{"tags":[],"owner":{"account_id":1529851,"reputation":1106,"user_id":9486645,"display_name":"Supercoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697139894,"creation_date":1697139894,"answer_id":77283457,"question_id":15419485,"body_markdown":"I just had the same error running one of my java App from eclipse after uninstalled and re-installed tomcat.  I had to create a new Apache Tomcat Runtime from my Project. \r\n\r\nFrom Eclipse Properties &gt; Project Facets &gt; Runtimes as per the following screenshot:\r\n\r\n**Note:** Also, make sure you have a copy of the jdbc jar file into your tomcat library.\r\nFor example into: C:\\Program Files\\Apache Software Foundation\\Tomcat 9.0\\lib\\mssql-jdbc-8.4.0.jre11.jar\r\n\r\n[![Project Facet New Runtime][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jXMzz.jpg\r\n\r\nEnjoy!","title":"java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver","body":"<p>I just had the same error running one of my java App from eclipse after uninstalled and re-installed tomcat.  I had to create a new Apache Tomcat Runtime from my Project.</p>\n<p>From Eclipse Properties &gt; Project Facets &gt; Runtimes as per the following screenshot:</p>\n<p><strong>Note:</strong> Also, make sure you have a copy of the jdbc jar file into your tomcat library.\nFor example into: C:\\Program Files\\Apache Software Foundation\\Tomcat 9.0\\lib\\mssql-jdbc-8.4.0.jre11.jar</p>\n<p><a href=\"https://i.stack.imgur.com/jXMzz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jXMzz.jpg\" alt=\"Project Facet New Runtime\" /></a></p>\n<p>Enjoy!</p>\n"}],"owner":{"account_id":2494767,"reputation":79,"user_id":2171503,"display_name":"user2171503"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30118,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"answer_count":6,"score":7,"last_activity_date":1697139894,"creation_date":1363292799,"question_id":15419485,"body_markdown":"    java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver\r\n\r\nI got the above exception when i trying to deploying my Application into tomcat. but the weird thing is , i tried with a simple main method and it&#39;s works fine. Any help please ???\r\n\r\nI did the following:\r\n\r\n    Class.forName(&quot;com.microsoft.jdbc.sqlserver.SQLServerDriver&quot;);\r\n    String connectionUrl = &quot;jdbc:microsoft:sqlserver://localhost:1433;&quot; + &quot;database=DBName;&quot; + &quot;user=UserName;&quot; + &quot;password=Password&quot;;\r\n    connection = DriverManager.getConnection(connectionUrl);","title":"java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver","body":"<pre><code>java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver\n</code></pre>\n\n<p>I got the above exception when i trying to deploying my Application into tomcat. but the weird thing is , i tried with a simple main method and it's works fine. Any help please ???</p>\n\n<p>I did the following:</p>\n\n<pre><code>Class.forName(\"com.microsoft.jdbc.sqlserver.SQLServerDriver\");\nString connectionUrl = \"jdbc:microsoft:sqlserver://localhost:1433;\" + \"database=DBName;\" + \"user=UserName;\" + \"password=Password\";\nconnection = DriverManager.getConnection(connectionUrl);\n</code></pre>\n"},{"tags":["java","spring","rabbitmq","amqp","spring-amqp"],"answers":[{"comments":[{"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"score":0,"creation_date":1556982550,"post_id":55978515,"comment_id":98616967,"body_markdown":"There are two errors with this answer. First, the pull API (`basic.get`) is inefficient since it depends on client-side polling. Second, the &quot;push API&quot; (`basic.consume`) does not send messages one at a time unless configured to do so via the prefetch setting.","body":"There are two errors with this answer. First, the pull API (<code>basic.get</code>) is inefficient since it depends on client-side polling. Second, the &quot;push API&quot; (<code>basic.consume</code>) does not send messages one at a time unless configured to do so via the prefetch setting."}],"tags":[],"owner":{"account_id":7445951,"reputation":1905,"user_id":5662105,"display_name":"peekay"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1557041990,"creation_date":1556930092,"answer_id":55978515,"question_id":55977102,"body_markdown":"It might also be worth investigating if an &quot;upstream&quot; producer can provide batches of messages instead of individual ones.\r\n","title":"How to consume 100 messages without ack, then do work and then acknowledge them?","body":"<p>It might also be worth investigating if an \"upstream\" producer can provide batches of messages instead of individual ones.</p>\n"},{"comments":[{"owner":{"account_id":1412542,"reputation":479,"user_id":1338866,"accept_rate":25,"display_name":"Ole Bille"},"score":0,"creation_date":1558983574,"post_id":55983849,"comment_id":99269327,"body_markdown":"I changed the prefetch to 200. Then in my consumer I did like this.\n\n`\n@RabbitListener(queues = &quot;QUEUENAME&quot;)\n    public void recieve(Message message, Channel channel) throws IOException {\n   //Here I add the messages to a list and once there is enough in the list I save them.\n//Afterwards I manually acknowledge them.\n//In spring boot. When you add Channel to the rabbitListener method then it will expect you manually acknowlegde the messages.\n} `\n\nOne thing which would be great would be if I could ask if there was anything more prefetched. Like a way to ask if there will come more.","body":"I changed the prefetch to 200. Then in my consumer I did like this.  ` @RabbitListener(queues = &quot;QUEUENAME&quot;)     public void recieve(Message message, Channel channel) throws IOException {    //Here I add the messages to a list and once there is enough in the list I save them. //Afterwards I manually acknowledge them. //In spring boot. When you add Channel to the rabbitListener method then it will expect you manually acknowlegde the messages. } `  One thing which would be great would be if I could ask if there was anything more prefetched. Like a way to ask if there will come more."},{"owner":{"account_id":1412542,"reputation":479,"user_id":1338866,"accept_rate":25,"display_name":"Ole Bille"},"score":0,"creation_date":1558983930,"post_id":55983849,"comment_id":99269444,"body_markdown":"From my property.yml\n`spring:\n  rabbitmq:\n    listener:\n      direct:\n        prefetch: 200\n      simple:\n        prefetch: 200\n        acknowledgeMode: MANUAL`","body":"From my property.yml <code>spring:   rabbitmq:     listener:       direct:         prefetch: 200       simple:         prefetch: 200         acknowledgeMode: MANUAL</code>"}],"tags":[],"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697139669,"creation_date":1556982417,"answer_id":55983849,"question_id":55977102,"body_markdown":"Don&#39;t use the &quot;pull&quot; API (`basic.get`), it is not nearly as efficient as consuming messages.\r\n\r\nSet prefetch (also known as QoS) to 300, then acknowledge the messages at once when you are done. I am not familiar with Spring but I&#39;m certain there are decorators or other ways to accomplish this.\r\n\r\nThis is all covered in the docs and tutorials - https://www.rabbitmq.com/consumer-prefetch.html\r\n","title":"How to consume 100 messages without ack, then do work and then acknowledge them?","body":"<p>Don't use the &quot;pull&quot; API (<code>basic.get</code>), it is not nearly as efficient as consuming messages.</p>\n<p>Set prefetch (also known as QoS) to 300, then acknowledge the messages at once when you are done. I am not familiar with Spring but I'm certain there are decorators or other ways to accomplish this.</p>\n<p>This is all covered in the docs and tutorials - <a href=\"https://www.rabbitmq.com/consumer-prefetch.html\" rel=\"nofollow noreferrer\">https://www.rabbitmq.com/consumer-prefetch.html</a></p>\n"}],"owner":{"account_id":1412542,"reputation":479,"user_id":1338866,"accept_rate":25,"display_name":"Ole Bille"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1555,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1697139669,"creation_date":1556917469,"question_id":55977102,"body_markdown":"I&#39;m consuming messages from a rabbitmq with spring amqp. \r\nI&#39;m consuming one message at a time and its pretty slow cause I save it to DB. So opening and closing transactions every time.\r\n\r\n\r\nRight now I&#39;ve set up a consumer like this.\r\n\r\n    @RabbitListener(queues = &quot;queuename&quot;)\r\n    public void receive(Message message) {\r\n     someservice.saveToDb(message);\r\n    }\r\n\r\nBut this is really slow. I would like to consume a bunch of messages before I start saving them. Then I can open a transaction. Save 300 and then commit and load the next batch.\r\n\r\nWould something like this work?\r\n\r\n    class MessageChannelTag {\r\n      Message message;\r\n      Channel channel;\r\n      long tag;\r\n    }\r\n    \r\n    @Component\r\n    class ConsumerClass {\r\n    \r\n     List&lt;MessageChannelTag&gt; messagesToSave = new ArrayList&lt;&gt;();\r\n    \r\n     @RabbitListener(queues = &quot;queuename&quot;)\r\n     public void receive(Message message, Channel channel,  @Header(AmqpHeaders.DELIVERY_TAG) long tag)\r\n    \t\t\tthrows IOException {\r\n        messagesToSave.add(new MessageChannelTag(message, channel, tag));\r\n     }\r\n    \r\n     @Scheduled(fixedDelay=500)\r\n     public void saveMessagesToDb() {\r\n        List saveTheese = new ArrayList(messagesToSave);\r\n        messagesToSave.clear();\r\n        service.saveMessages(saveTheese);\r\n        for(MessageChannelTag messageChannelTag:messagesToSave) {\r\n        //In the service I could mark the rows if save succeded or not and\r\n        //then out here I could ack or nack.. \r\n            \r\n     messageChannelTag.getChannel().basicAck(messageChannelTag.getTag(), false);\r\n        }\r\n     }\r\n    }\r\n\r\nOr if there is a simpler solution let me know. I prefer fast, simple and robust =)","title":"How to consume 100 messages without ack, then do work and then acknowledge them?","body":"<p>I'm consuming messages from a rabbitmq with spring amqp. \nI'm consuming one message at a time and its pretty slow cause I save it to DB. So opening and closing transactions every time.</p>\n\n<p>Right now I've set up a consumer like this.</p>\n\n<pre><code>@RabbitListener(queues = \"queuename\")\npublic void receive(Message message) {\n someservice.saveToDb(message);\n}\n</code></pre>\n\n<p>But this is really slow. I would like to consume a bunch of messages before I start saving them. Then I can open a transaction. Save 300 and then commit and load the next batch.</p>\n\n<p>Would something like this work?</p>\n\n<pre><code>class MessageChannelTag {\n  Message message;\n  Channel channel;\n  long tag;\n}\n\n@Component\nclass ConsumerClass {\n\n List&lt;MessageChannelTag&gt; messagesToSave = new ArrayList&lt;&gt;();\n\n @RabbitListener(queues = \"queuename\")\n public void receive(Message message, Channel channel,  @Header(AmqpHeaders.DELIVERY_TAG) long tag)\n            throws IOException {\n    messagesToSave.add(new MessageChannelTag(message, channel, tag));\n }\n\n @Scheduled(fixedDelay=500)\n public void saveMessagesToDb() {\n    List saveTheese = new ArrayList(messagesToSave);\n    messagesToSave.clear();\n    service.saveMessages(saveTheese);\n    for(MessageChannelTag messageChannelTag:messagesToSave) {\n    //In the service I could mark the rows if save succeded or not and\n    //then out here I could ack or nack.. \n\n messageChannelTag.getChannel().basicAck(messageChannelTag.getTag(), false);\n    }\n }\n}\n</code></pre>\n\n<p>Or if there is a simpler solution let me know. I prefer fast, simple and robust =)</p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"score":0,"creation_date":1697138952,"post_id":77283293,"comment_id":136245761,"body_markdown":"Does this answer your question? [Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;](https://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute\">Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;</a>"},{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":0,"creation_date":1697141526,"post_id":77283293,"comment_id":136246122,"body_markdown":"Can you share the content of the jar file? Unzip it and post the contents here.","body":"Can you share the content of the jar file? Unzip it and post the contents here."}],"owner":{"account_id":26395085,"reputation":15,"user_id":20046377,"display_name":"Xpray 935"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697139211,"creation_date":1697138018,"question_id":77283293,"body_markdown":"I&#39;m new to Java, I made a simple code, with a .java file and a .form file and when I try to export to .jar, clicking on build, the file can&#39;t be executed.\r\n\r\nWhen I try to execute:\r\n\r\n```\r\nxpray@xpray:~/.m2/repository/com/couple/1.0$ java -jar couple-1.0\r\nError: Unable to access jarfile couple-1.0\r\nxpray@xpray:~/.m2/repository/com/couple/1.0$ java -jar couple-1.0.jar\r\nno main manifest attribute, in couple-1.0.jar\r\n```\r\n\r\nCan anyone help me? I&#39;m sorry if it&#39;s too basic.\r\n\r\nEdit: I know there are similar issues here, the problem is that I don&#39;t know anything about it, I have no idea how to edit the MANIFEST. MF, and in theory, wasn&#39;t it supposed to work after building NetBeans?\r\n","title":"Can&#39;t execute .jar file compiled by NetBeans","body":"<p>I'm new to Java, I made a simple code, with a .java file and a .form file and when I try to export to .jar, clicking on build, the file can't be executed.</p>\n<p>When I try to execute:</p>\n<pre><code>xpray@xpray:~/.m2/repository/com/couple/1.0$ java -jar couple-1.0\nError: Unable to access jarfile couple-1.0\nxpray@xpray:~/.m2/repository/com/couple/1.0$ java -jar couple-1.0.jar\nno main manifest attribute, in couple-1.0.jar\n</code></pre>\n<p>Can anyone help me? I'm sorry if it's too basic.</p>\n<p>Edit: I know there are similar issues here, the problem is that I don't know anything about it, I have no idea how to edit the MANIFEST. MF, and in theory, wasn't it supposed to work after building NetBeans?</p>\n"},{"tags":["java","encryption","ssh","sshj","javax.crypto"],"answers":[{"comments":[{"owner":{"account_id":44259,"reputation":2595,"user_id":129795,"accept_rate":38,"display_name":"Jigar Shah"},"score":0,"creation_date":1696897304,"post_id":77262078,"comment_id":136208861,"body_markdown":"Well its strange because same application works on another VM. Although java version is different (jdk1.8.0_241). OS is also different. But I guess that should not affect this?  What is happening is, authentication to sftp server is failing from specific VM which was recently upgraded.  I will try to get more detailed error. does sshj / bouncy castle indirectly depend on openssl or any native libraries ?","body":"Well its strange because same application works on another VM. Although java version is different (jdk1.8.0_241). OS is also different. But I guess that should not affect this?  What is happening is, authentication to sftp server is failing from specific VM which was recently upgraded.  I will try to get more detailed error. does sshj / bouncy castle indirectly depend on openssl or any native libraries ?"},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1696982015,"post_id":77262078,"comment_id":136221343,"body_markdown":"Could the other VM have Bouncy installed perhaps in JRE/lib/ext? (j8 was the last version to automatically add that to classpath.) Bouncy is pure Java and never uses any native, but if the protocol is selecting EC crypto _without Bouncy_ (i.e. with SunECC) that sometimes uses native code that may depend on the OS in some platforms or builds. If _authentication_ is failing it&#39;s not a _cipher_ problem anyway -- though it could be _crypto_, and _could_ be your key, unlike the problem you asked about. If you want help with the actual problem, ask a Q about it.","body":"Could the other VM have Bouncy installed perhaps in JRE/lib/ext? (j8 was the last version to automatically add that to classpath.) Bouncy is pure Java and never uses any native, but if the protocol is selecting EC crypto <i>without Bouncy</i> (i.e. with SunECC) that sometimes uses native code that may depend on the OS in some platforms or builds. If <i>authentication</i> is failing it&#39;s not a <i>cipher</i> problem anyway -- though it could be <i>crypto</i>, and <i>could</i> be your key, unlike the problem you asked about. If you want help with the actual problem, ask a Q about it."}],"tags":[],"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696890451,"creation_date":1696890451,"answer_id":77262078,"question_id":77261585,"body_markdown":"No, it&#39;s nothing to do with your (authentication) key.\r\n\r\nThose ciphers have never been included in &#39;standard&#39; Sun/Oracle/OpenJDK Java providers, but they are in BouncyCastle which is [stated as a dependency for sshj](https://github.com/hierynomus/sshj#dependencies). This warning in sshj is poorly designed: even in the past limited-policy was not the only reason for failing to use a cipher, and you are correct that since 8u151 (or at worst 8u161) limited-policy is _never_ the issue -- note sshj did NOT complain about aes192 and aes256, which were the main ones affected by limited-policy. \r\n\r\nYou almost certainly don&#39;t need and can&#39;t even use these ciphers, depending on what you are connecting to -- and nowadays also probably not arcfour/RC4 and blowfish which SunJCE _does_ provide. You could just ignore (or not log) the warning(s), or use Bouncy as specified, or use an explicit configuration to limit the ciphers (and possibly other features) but that would be more work.","title":"java Cannot find any provider supporting Serpent/CTR/NoPadding","body":"<p>No, it's nothing to do with your (authentication) key.</p>\n<p>Those ciphers have never been included in 'standard' Sun/Oracle/OpenJDK Java providers, but they are in BouncyCastle which is <a href=\"https://github.com/hierynomus/sshj#dependencies\" rel=\"nofollow noreferrer\">stated as a dependency for sshj</a>. This warning in sshj is poorly designed: even in the past limited-policy was not the only reason for failing to use a cipher, and you are correct that since 8u151 (or at worst 8u161) limited-policy is <em>never</em> the issue -- note sshj did NOT complain about aes192 and aes256, which were the main ones affected by limited-policy.</p>\n<p>You almost certainly don't need and can't even use these ciphers, depending on what you are connecting to -- and nowadays also probably not arcfour/RC4 and blowfish which SunJCE <em>does</em> provide. You could just ignore (or not log) the warning(s), or use Bouncy as specified, or use an explicit configuration to limit the ciphers (and possibly other features) but that would be more work.</p>\n"},{"tags":[],"owner":{"account_id":44259,"reputation":2595,"user_id":129795,"accept_rate":38,"display_name":"Jigar Shah"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697138981,"creation_date":1697138981,"answer_id":77283389,"question_id":77261585,"body_markdown":"Issue was with new JDK 8 (jdk1.8.0_371). It has unlimited policy but they are not enabled. And if you dont copy unlimited policy to jre legacy location, \r\n\r\njdk1.8.0_371/jre/lib/security \r\n\r\nthen default its limited. \r\n\r\nSo have to add Security.setProperty(&quot;crypto.policy&quot;, &quot;unlimited&quot;);\r\n\r\nI think newer sshj versions have this by default\r\n\r\n\r\n","title":"java Cannot find any provider supporting Serpent/CTR/NoPadding","body":"<p>Issue was with new JDK 8 (jdk1.8.0_371). It has unlimited policy but they are not enabled. And if you dont copy unlimited policy to jre legacy location,</p>\n<p>jdk1.8.0_371/jre/lib/security</p>\n<p>then default its limited.</p>\n<p>So have to add Security.setProperty(&quot;crypto.policy&quot;, &quot;unlimited&quot;);</p>\n<p>I think newer sshj versions have this by default</p>\n"}],"owner":{"account_id":44259,"reputation":2595,"user_id":129795,"accept_rate":38,"display_name":"Jigar Shah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1697138981,"creation_date":1696883019,"question_id":77261585,"body_markdown":"sshj logs\r\n\r\n    Cannot find any provider supporting CAST5/CTR/NoPadding\r\n    Cannot find any provider supporting IDEA/CTR/NoPadding\r\n    Cannot find any provider supporting Serpent/CBC/NoPadding\r\n    Cannot find any provider supporting Serpent/CTR/NoPadding\r\n    Cannot find any provider supporting Twofish/CBC/NoPadding\r\n    Cannot find any provider supporting Twofish/CTR/NoPadding\r\n    Disabling high-strength ciphers: cipher strengths apparently limited by JCE polic\r\n\r\nI have latest jdk1.8.0_371 - I assume this version has unlimited crypto by default ? \r\n\r\n*In Java versions 8u151 and higher, the JCE framework uses the unlimited strength policy files by default.* \r\n\r\nIt works on one VM and fails on another. \r\n\r\nI tried printing supported algo on both. Its same output \r\n\r\n        Set&lt;String&gt; algs = new TreeSet&lt;&gt;();\r\n        for (Provider provider : Security.getProviders()) {\r\n            provider.getServices().stream()\r\n                    .filter(s -&gt; &quot;Cipher&quot;.equals(s.getType()))\r\n                    .map(Provider.Service::getAlgorithm)\r\n                    .forEach(algs::add);\r\n        }\r\n        algs.forEach(System.out::println);\r\n\r\n\r\nHere is output. What am I missing ? is it issue with my key ? \r\n\r\n    AES\r\n    AESWrap\r\n    AESWrap_128\r\n    AESWrap_192\r\n    AESWrap_256\r\n    AES_128/CBC/NoPadding\r\n    AES_128/CFB/NoPadding\r\n    AES_128/ECB/NoPadding\r\n    AES_128/GCM/NoPadding\r\n    AES_128/OFB/NoPadding\r\n    AES_192/CBC/NoPadding\r\n    AES_192/CFB/NoPadding\r\n    AES_192/ECB/NoPadding\r\n    AES_192/GCM/NoPadding\r\n    AES_192/OFB/NoPadding\r\n    AES_256/CBC/NoPadding\r\n    AES_256/CFB/NoPadding\r\n    AES_256/ECB/NoPadding\r\n    AES_256/GCM/NoPadding\r\n    AES_256/OFB/NoPadding\r\n    ARCFOUR\r\n    Blowfish\r\n    DES\r\n    DESede\r\n    DESedeWrap\r\n    PBEWithHmacSHA1AndAES_128\r\n    PBEWithHmacSHA1AndAES_256\r\n    PBEWithHmacSHA224AndAES_128\r\n    PBEWithHmacSHA224AndAES_256\r\n    PBEWithHmacSHA256AndAES_128\r\n    PBEWithHmacSHA256AndAES_256\r\n    PBEWithHmacSHA384AndAES_128\r\n    PBEWithHmacSHA384AndAES_256\r\n    PBEWithHmacSHA512AndAES_128\r\n    PBEWithHmacSHA512AndAES_256\r\n    PBEWithMD5AndDES\r\n    PBEWithMD5AndTripleDES\r\n    PBEWithSHA1AndDESede\r\n    PBEWithSHA1AndRC2_128\r\n    PBEWithSHA1AndRC2_40\r\n    PBEWithSHA1AndRC4_128\r\n    PBEWithSHA1AndRC4_40\r\n    RC2\r\n    RSA\r\n\r\n","title":"java Cannot find any provider supporting Serpent/CTR/NoPadding","body":"<p>sshj logs</p>\n<pre><code>Cannot find any provider supporting CAST5/CTR/NoPadding\nCannot find any provider supporting IDEA/CTR/NoPadding\nCannot find any provider supporting Serpent/CBC/NoPadding\nCannot find any provider supporting Serpent/CTR/NoPadding\nCannot find any provider supporting Twofish/CBC/NoPadding\nCannot find any provider supporting Twofish/CTR/NoPadding\nDisabling high-strength ciphers: cipher strengths apparently limited by JCE polic\n</code></pre>\n<p>I have latest jdk1.8.0_371 - I assume this version has unlimited crypto by default ?</p>\n<p><em>In Java versions 8u151 and higher, the JCE framework uses the unlimited strength policy files by default.</em></p>\n<p>It works on one VM and fails on another.</p>\n<p>I tried printing supported algo on both. Its same output</p>\n<pre><code>    Set&lt;String&gt; algs = new TreeSet&lt;&gt;();\n    for (Provider provider : Security.getProviders()) {\n        provider.getServices().stream()\n                .filter(s -&gt; &quot;Cipher&quot;.equals(s.getType()))\n                .map(Provider.Service::getAlgorithm)\n                .forEach(algs::add);\n    }\n    algs.forEach(System.out::println);\n</code></pre>\n<p>Here is output. What am I missing ? is it issue with my key ?</p>\n<pre><code>AES\nAESWrap\nAESWrap_128\nAESWrap_192\nAESWrap_256\nAES_128/CBC/NoPadding\nAES_128/CFB/NoPadding\nAES_128/ECB/NoPadding\nAES_128/GCM/NoPadding\nAES_128/OFB/NoPadding\nAES_192/CBC/NoPadding\nAES_192/CFB/NoPadding\nAES_192/ECB/NoPadding\nAES_192/GCM/NoPadding\nAES_192/OFB/NoPadding\nAES_256/CBC/NoPadding\nAES_256/CFB/NoPadding\nAES_256/ECB/NoPadding\nAES_256/GCM/NoPadding\nAES_256/OFB/NoPadding\nARCFOUR\nBlowfish\nDES\nDESede\nDESedeWrap\nPBEWithHmacSHA1AndAES_128\nPBEWithHmacSHA1AndAES_256\nPBEWithHmacSHA224AndAES_128\nPBEWithHmacSHA224AndAES_256\nPBEWithHmacSHA256AndAES_128\nPBEWithHmacSHA256AndAES_256\nPBEWithHmacSHA384AndAES_128\nPBEWithHmacSHA384AndAES_256\nPBEWithHmacSHA512AndAES_128\nPBEWithHmacSHA512AndAES_256\nPBEWithMD5AndDES\nPBEWithMD5AndTripleDES\nPBEWithSHA1AndDESede\nPBEWithSHA1AndRC2_128\nPBEWithSHA1AndRC2_40\nPBEWithSHA1AndRC4_128\nPBEWithSHA1AndRC4_40\nRC2\nRSA\n</code></pre>\n"},{"tags":["java","spring","junit","spring-boot","mockito"],"comments":[{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":9,"creation_date":1441054800,"post_id":32319640,"comment_id":52514763,"body_markdown":"What do you want to test exactly? If you want to test that work() does what it&#39;s supposed to do, you can test it like any other method of any other bean: you create an instance of the bean, call the method, and test that it does what it&#39;s supposed to do. If you want to test that the method is indeed invoked by Spring every second, there&#39;s no real point: Spring has tested that for you.","body":"What do you want to test exactly? If you want to test that work() does what it&#39;s supposed to do, you can test it like any other method of any other bean: you create an instance of the bean, call the method, and test that it does what it&#39;s supposed to do. If you want to test that the method is indeed invoked by Spring every second, there&#39;s no real point: Spring has tested that for you."},{"owner":{"account_id":6743454,"reputation":491,"user_id":5195869,"display_name":"S Puddin"},"score":0,"creation_date":1442414073,"post_id":32319640,"comment_id":53073953,"body_markdown":"I agree with you, trying to test the framework&#39;s functionality did not seem necessary to me but I was required to. I found a work around for that by adding a small log message and checking if the expected message was indeed logged for the expected time frame.","body":"I agree with you, trying to test the framework&#39;s functionality did not seem necessary to me but I was required to. I found a work around for that by adding a small log message and checking if the expected message was indeed logged for the expected time frame."},{"owner":{"account_id":914392,"reputation":5655,"user_id":947526,"accept_rate":46,"display_name":"C-Otto"},"score":5,"creation_date":1510234213,"post_id":32319640,"comment_id":81354597,"body_markdown":"Another benefit of testing is to have a failing test if the `@EnableScheduling` annotation is removed.","body":"Another benefit of testing is to have a failing test if the <code>@EnableScheduling</code> annotation is removed."}],"answers":[{"comments":[{"owner":{"account_id":4873489,"reputation":892,"user_id":3929266,"accept_rate":48,"display_name":"rohit"},"score":6,"creation_date":1506175046,"post_id":32319907,"comment_id":79719078,"body_markdown":"Just waiting for the scheduled task is definitely not the way. Should be a trick to play with the clock so that scheduler can respond to it.","body":"Just waiting for the scheduled task is definitely not the way. Should be a trick to play with the clock so that scheduler can respond to it."},{"owner":{"account_id":2166955,"reputation":24093,"user_id":1919879,"accept_rate":92,"display_name":"luboskrnac"},"score":3,"creation_date":1506320242,"post_id":32319907,"comment_id":79754396,"body_markdown":"@rohit, Feel free to post your solution. If you don&#39;t, I assume you don&#39;t have one.","body":"@rohit, Feel free to post your solution. If you don&#39;t, I assume you don&#39;t have one."}],"tags":[],"owner":{"account_id":2166955,"reputation":24093,"user_id":1919879,"accept_rate":92,"display_name":"luboskrnac"},"comment_count":2,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1441054883,"creation_date":1441054883,"answer_id":32319907,"question_id":32319640,"body_markdown":"This is often hard. You may consider to load Spring context during the test and fake some bean from it to be able to verify scheduled invocation.\r\n\r\n[I have such example in my Github repo.][1] There is simple scheduled example tested with described approach.\r\n\r\n\r\n  [1]: https://github.com/lkrnac/book-eiws-code-samples/tree/master/01-async/0103-scheduled-job","title":"How to test Spring @Scheduled","body":"<p>This is often hard. You may consider to load Spring context during the test and fake some bean from it to be able to verify scheduled invocation.</p>\n\n<p><a href=\"https://github.com/lkrnac/book-eiws-code-samples/tree/master/01-async/0103-scheduled-job\" rel=\"nofollow\">I have such example in my Github repo.</a> There is simple scheduled example tested with described approach.</p>\n"},{"comments":[{"owner":{"account_id":1483638,"reputation":1811,"user_id":1392366,"accept_rate":38,"display_name":"LiTTle"},"score":1,"creation_date":1533537644,"post_id":49930983,"comment_id":90364746,"body_markdown":"`verify()` and `times()` functions cannot be found. Could you specify the package?","body":"<code>verify()</code> and <code>times()</code> functions cannot be found. Could you specify the package?"},{"owner":{"account_id":1186616,"reputation":12512,"user_id":1160445,"display_name":"Maciej Walkowiak"},"score":1,"creation_date":1533557862,"post_id":49930983,"comment_id":90375633,"body_markdown":"These functions come from Mockito. The package is: `org.mockito.Mockito#verify` and similar for `times`.","body":"These functions come from Mockito. The package is: <code>org.mockito.Mockito#verify</code> and similar for <code>times</code>."},{"owner":{"account_id":8861922,"reputation":281,"user_id":6617969,"display_name":"Cristian Batista"},"score":1,"creation_date":1548867375,"post_id":49930983,"comment_id":95700560,"body_markdown":"This is not a good solution. This only works for those @Scheduled that are executed in some seconds. What about a weekly execution?","body":"This is not a good solution. This only works for those @Scheduled that are executed in some seconds. What about a weekly execution?"},{"owner":{"account_id":1186616,"reputation":12512,"user_id":1160445,"display_name":"Maciej Walkowiak"},"score":1,"creation_date":1548872363,"post_id":49930983,"comment_id":95703085,"body_markdown":"@CristianBatista &quot;If we assume that your job runs in such a small intervals&quot;. I don&#39;t think it makes much sense to test if job runs but rather the job behaviour. Nevertheless if you really do want to, that&#39;s one of the options I am aware of. You&#39;re welcome to submit your answer too :-)","body":"@CristianBatista &quot;If we assume that your job runs in such a small intervals&quot;. I don&#39;t think it makes much sense to test if job runs but rather the job behaviour. Nevertheless if you really do want to, that&#39;s one of the options I am aware of. You&#39;re welcome to submit your answer too :-)"},{"owner":{"account_id":2775988,"reputation":2874,"user_id":2389570,"accept_rate":62,"display_name":"Niccol&#242;"},"score":3,"creation_date":1578402035,"post_id":49930983,"comment_id":105419729,"body_markdown":"@CristianBatista you can use a different frequency for the cron job in testing, by using a property instead of hardcode it.","body":"@CristianBatista you can use a different frequency for the cron job in testing, by using a property instead of hardcode it."}],"tags":[],"owner":{"account_id":1186616,"reputation":12512,"user_id":1160445,"display_name":"Maciej Walkowiak"},"comment_count":5,"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1524175986,"creation_date":1524175986,"answer_id":49930983,"question_id":32319640,"body_markdown":"If we assume that your job runs in such a small intervals that you really want your test to wait for job to be executed and you just want to test if job is invoked you can use following solution:\r\n\r\nAdd [Awaitility][1] to classpath:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.awaitility&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;awaitility&lt;/artifactId&gt;\r\n    \t&lt;version&gt;3.1.0&lt;/version&gt;\r\n    \t&lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nWrite test similar to:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n    public class DemoApplicationTests {\r\n\r\n        @SpyBean\r\n        private MyTask myTask;\r\n\r\n        @Test\r\n        public void jobRuns() {\r\n            await().atMost(Duration.FIVE_SECONDS)\r\n                   .untilAsserted(() -&gt; verify(myTask, times(1)).work());\r\n        }\r\n    }\r\n\r\n  [1]: https://github.com/awaitility/awaitility","title":"How to test Spring @Scheduled","body":"<p>If we assume that your job runs in such a small intervals that you really want your test to wait for job to be executed and you just want to test if job is invoked you can use following solution:</p>\n\n<p>Add <a href=\"https://github.com/awaitility/awaitility\" rel=\"noreferrer\">Awaitility</a> to classpath:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.awaitility&lt;/groupId&gt;\n    &lt;artifactId&gt;awaitility&lt;/artifactId&gt;\n    &lt;version&gt;3.1.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Write test similar to:</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class DemoApplicationTests {\n\n    @SpyBean\n    private MyTask myTask;\n\n    @Test\n    public void jobRuns() {\n        await().atMost(Duration.FIVE_SECONDS)\n               .untilAsserted(() -&gt; verify(myTask, times(1)).work());\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3121794,"reputation":1037,"user_id":2641426,"display_name":"DependencyHell"},"score":1,"creation_date":1620317397,"post_id":52167381,"comment_id":119171392,"body_markdown":"CronSequenceGenerator is now Deprecated as of 5.3, in favor of CronExpression, check org.springframework.scheduling.support.CronTrigger usage in this example : https://stackoverflow.com/a/33504624/2641426","body":"CronSequenceGenerator is now Deprecated as of 5.3, in favor of CronExpression, check org.springframework.scheduling.support.CronTrigger usage in this example : <a href=\"https://stackoverflow.com/a/33504624/2641426\">stackoverflow.com/a/33504624/2641426</a>"}],"tags":[],"owner":{"account_id":8120335,"reputation":2034,"user_id":6117311,"display_name":"Tiago Medici"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1536067379,"creation_date":1536067379,"answer_id":52167381,"question_id":32319640,"body_markdown":"this class stands for generating schedulers cron using springframework scheduling\r\n\r\n    import org.apache.log4j.Logger;\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.springframework.scheduling.support.CronSequenceGenerator;\r\n    import org.springframework.test.context.ContextConfiguration;\r\n    import org.springframework.test.context.junit4.AbstractJUnit4SpringContextTests;\r\n    import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;\r\n    \r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.PropertySource;\r\n     \r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @Configuration\r\n    @PropertySource(&quot;classpath:application.properties&quot;)\r\n    public class TrimestralReportSenderJobTest extends AbstractJUnit4SpringContextTests {\r\n    \r\n    \tprotected Logger LOG = Logger.getLogger(getClass());\r\n    \r\n    \tprivate static final String DATE_CURRENT_2018_01_01 = &quot;2018-01-01&quot;;\r\n    \tprivate static final String SCHEDULER_TWO_MIN_PERIOD = &quot;2 0/2 * * * *&quot;;\r\n    \tprivate static final String SCHEDULER_QUARTER_SEASON_PERIOD = &quot;0 0 20 1-7 1,4,7,10 FRI&quot;;\r\n    \r\n    \t@Test\r\n    \tpublic void cronSchedulerGenerator_0() {\r\n    \t\tcronSchedulerGenerator(SCHEDULER_QUARTER_SEASON_PERIOD, 100);\r\n    \t}\r\n    \r\n    \t@Test\r\n    \tpublic void cronSchedulerGenerator_1() {\r\n    \t\tcronSchedulerGenerator(SCHEDULER_TWO_MIN_PERIOD, 200);\r\n    \t}\r\n    \r\n    \tpublic void cronSchedulerGenerator(String paramScheduler, int index) {\r\n    \t\tCronSequenceGenerator cronGen = new CronSequenceGenerator(paramScheduler);\r\n    \t\tjava.util.Date date = java.sql.Date.valueOf(DATE_CURRENT_2018_01_01);\r\n    \r\n    \t\tfor (int i = 0; i &lt; index; i++) {\r\n    \t\t\tdate = cronGen.next(date);\r\n    \t\t\tLOG.info(new java.text.SimpleDateFormat(&quot;EEE, MMM d, yyyy &#39;at&#39; hh:mm:ss a&quot;).format(date));\r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n\r\n\r\nhere is the output logging:\r\n\r\n    &lt;com.medici.scheduler.jobs.TrimestralReportSenderJobTest&gt; - lun, gen 1, 2018 at 12:02:02 AM\r\n    &lt;com.medici.scheduler.jobs.TrimestralReportSenderJobTest&gt; - lun, gen 1, 2018 at 03:02:02 AM\r\n    &lt;com.medici.scheduler.jobs.TrimestralReportSenderJobTest&gt; - lun, gen 1, 2018 at 06:02:02 AM\r\n    &lt;com.medici.scheduler.jobs.TrimestralReportSenderJobTest&gt; - lun, gen 1, 2018 at 09:02:02 AM\r\n    &lt;com.medici.scheduler.jobs.TrimestralReportSenderJobTest&gt; - lun, gen 1, 2018 at 12:02:02 PM\r\n\r\n","title":"How to test Spring @Scheduled","body":"<p>this class stands for generating schedulers cron using springframework scheduling</p>\n\n<pre><code>import org.apache.log4j.Logger;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.springframework.scheduling.support.CronSequenceGenerator;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.junit4.AbstractJUnit4SpringContextTests;\nimport org.springframework.test.context.junit4.SpringJUnit4ClassRunner;\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.PropertySource;\n\n@RunWith(SpringJUnit4ClassRunner.class)\n@Configuration\n@PropertySource(\"classpath:application.properties\")\npublic class TrimestralReportSenderJobTest extends AbstractJUnit4SpringContextTests {\n\n    protected Logger LOG = Logger.getLogger(getClass());\n\n    private static final String DATE_CURRENT_2018_01_01 = \"2018-01-01\";\n    private static final String SCHEDULER_TWO_MIN_PERIOD = \"2 0/2 * * * *\";\n    private static final String SCHEDULER_QUARTER_SEASON_PERIOD = \"0 0 20 1-7 1,4,7,10 FRI\";\n\n    @Test\n    public void cronSchedulerGenerator_0() {\n        cronSchedulerGenerator(SCHEDULER_QUARTER_SEASON_PERIOD, 100);\n    }\n\n    @Test\n    public void cronSchedulerGenerator_1() {\n        cronSchedulerGenerator(SCHEDULER_TWO_MIN_PERIOD, 200);\n    }\n\n    public void cronSchedulerGenerator(String paramScheduler, int index) {\n        CronSequenceGenerator cronGen = new CronSequenceGenerator(paramScheduler);\n        java.util.Date date = java.sql.Date.valueOf(DATE_CURRENT_2018_01_01);\n\n        for (int i = 0; i &lt; index; i++) {\n            date = cronGen.next(date);\n            LOG.info(new java.text.SimpleDateFormat(\"EEE, MMM d, yyyy 'at' hh:mm:ss a\").format(date));\n        }\n\n    }\n}\n</code></pre>\n\n<p>here is the output logging:</p>\n\n<pre><code>&lt;com.medici.scheduler.jobs.TrimestralReportSenderJobTest&gt; - lun, gen 1, 2018 at 12:02:02 AM\n&lt;com.medici.scheduler.jobs.TrimestralReportSenderJobTest&gt; - lun, gen 1, 2018 at 03:02:02 AM\n&lt;com.medici.scheduler.jobs.TrimestralReportSenderJobTest&gt; - lun, gen 1, 2018 at 06:02:02 AM\n&lt;com.medici.scheduler.jobs.TrimestralReportSenderJobTest&gt; - lun, gen 1, 2018 at 09:02:02 AM\n&lt;com.medici.scheduler.jobs.TrimestralReportSenderJobTest&gt; - lun, gen 1, 2018 at 12:02:02 PM\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4438528,"reputation":2896,"user_id":3613702,"accept_rate":14,"display_name":"Code Name Jack"},"score":0,"creation_date":1648195402,"post_id":54243063,"comment_id":126567583,"body_markdown":"Yeah the second one, because it is easy to miss the configuration (or not know it properly).","body":"Yeah the second one, because it is easy to miss the configuration (or not know it properly)."}],"tags":[],"owner":{"account_id":204659,"reputation":37559,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"comment_count":1,"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1607010915,"creation_date":1547753641,"answer_id":54243063,"question_id":32319640,"body_markdown":"My question is: &quot;what do you want to test?&quot;\r\n\r\nIf your answer is \r\n&quot;I want to know that Spring runs my scheduled task when I want it to&quot;,\r\nthen you are testing Spring,\r\nnot your code.\r\nThis is not something you need to unit test.\r\n\r\nIf your answer is &quot;I want to know that I configured my task correctly&quot;,\r\nthen write a test app with a frequently running task and verify that\r\nthe task runs when you expect it to run.\r\nThis is not a unit test,\r\nbut will show that you know how to configure your task correctly.\r\n\r\nIf the answer is &quot;I want to know that the task I wrote functions correctly&quot;,\r\nthen you need to unit test the task method.\r\nIn your example,\r\nyou want to unit test the `work()` method.\r\nDo this by writing a unit test that directly calls your task method (`work()`).\r\nFor example,\r\n\r\n    public class TestMyTask\r\n    {\r\n      @InjectMocks\r\n      private MyTask classToTest;\r\n\r\n      // Declare any mocks you need.\r\n      @Mock\r\n      private Blammy mockBlammy;\r\n\r\n      @Before\r\n      public void preTestSetup()\r\n      {\r\n        MockitoAnnotations.initMocks(this);\r\n\r\n        ... any other setup you need.\r\n      }\r\n\r\n      @Test\r\n      public void work_success()\r\n      {\r\n        ... setup for the test.\r\n\r\n\r\n        classToTest.work();\r\n\r\n\r\n        .. asserts to verify that the work method functioned correctly.\r\n      }","title":"How to test Spring @Scheduled","body":"<p>My question is: &quot;what do you want to test?&quot;</p>\n<p>If your answer is\n&quot;I want to know that Spring runs my scheduled task when I want it to&quot;,\nthen you are testing Spring,\nnot your code.\nThis is not something you need to unit test.</p>\n<p>If your answer is &quot;I want to know that I configured my task correctly&quot;,\nthen write a test app with a frequently running task and verify that\nthe task runs when you expect it to run.\nThis is not a unit test,\nbut will show that you know how to configure your task correctly.</p>\n<p>If the answer is &quot;I want to know that the task I wrote functions correctly&quot;,\nthen you need to unit test the task method.\nIn your example,\nyou want to unit test the <code>work()</code> method.\nDo this by writing a unit test that directly calls your task method (<code>work()</code>).\nFor example,</p>\n<pre><code>public class TestMyTask\n{\n  @InjectMocks\n  private MyTask classToTest;\n\n  // Declare any mocks you need.\n  @Mock\n  private Blammy mockBlammy;\n\n  @Before\n  public void preTestSetup()\n  {\n    MockitoAnnotations.initMocks(this);\n\n    ... any other setup you need.\n  }\n\n  @Test\n  public void work_success()\n  {\n    ... setup for the test.\n\n\n    classToTest.work();\n\n\n    .. asserts to verify that the work method functioned correctly.\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6193930,"reputation":2587,"user_id":4825845,"display_name":"Juan Moreno"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1606423522,"creation_date":1549049650,"answer_id":54486096,"question_id":32319640,"body_markdown":"We can use at least two approaches in order to test scheduled tasks with Spring:\r\n\r\n - Integration testing\r\n\r\nIf we use spring boot we gonna need the following dependencies:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n     \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n        &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nWe could add a `count` to the `Task` and increment it inside the `work` method:\r\n\r\n     public class MyTask {\r\n       private final AtomicInteger count = new AtomicInteger(0);\r\n       \r\n       @Scheduled(fixedRate=1000)\r\n       public void work(){\r\n         this.count.incrementAndGet();\r\n       }\r\n\r\n       public int getInvocationCount() {\r\n        return this.count.get();\r\n       }\r\n     }\r\n\r\nThen check the `count`:\r\n\r\n    @SpringJUnitConfig(ScheduledConfig.class)\r\n    public class ScheduledIntegrationTest {\r\n     \r\n        @Autowired\r\n        MyTask task;\r\n    \r\n        @Test\r\n        public void givenSleepBy100ms_whenWork_thenInvocationCountIsGreaterThanZero() \r\n          throws InterruptedException {\r\n            Thread.sleep(2000L);\r\n    \r\n            assertThat(task.getInvocationCount()).isGreaterThan(0);\r\n        }\r\n    }\r\n\r\n - Another alternative is using Awaitility like mentions @maciej-walkowiak. \r\n\r\nIn that case, we need to add the Awaitility dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.awaitility&lt;/groupId&gt;\r\n        &lt;artifactId&gt;awaitility&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.6&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd use its DSL to check the number of invocations of the method `work`:\r\n\r\n    @SpringJUnitConfig(ScheduledConfig.class)\r\n    public class ScheduledAwaitilityIntegrationTest {\r\n    \r\n        @SpyBean \r\n        MyTask task;\r\n    \r\n        @Test\r\n        public void whenWaitOneSecond_thenWorkIsCalledAtLeastThreeTimes() {\r\n            await()\r\n              .atMost(Duration.FIVE_SECONDS)\r\n              .untilAsserted(() -&gt; verify(task, atLeast(3)).work());\r\n        }\r\n    }\r\n\r\nWe need take in count that although they are good **it’s better to focus on the unit testing of the logic inside the work method**.\r\n\r\nI put an example [here][1].\r\n\r\n\r\nAlso, if you need to test the CRON expressions like &quot;*/15 * 1-4 * * *&quot; you can use the [`CronSequenceGenerator`][2] class:\r\n\r\n\t@Test\r\n\tpublic void at50Seconds() {\r\n\t\tassertThat(new CronSequenceGenerator(&quot;*/15 * 1-4 * * *&quot;).next(new Date(2012, 6, 1, 9, 53, 50))).isEqualTo(new Date(2012, 6, 2, 1, 0));\r\n\t}\r\n\r\nYou can find more examples in the [official repository][3]. \r\n\r\n\r\n  [1]: https://github.com/earth001/spring-core-certification-exercises/commit/ab2fb963eb6f504f38a9845c4a5558f83275aca3\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html\r\n  [3]: https://github.com/spring-projects/spring-framework/blob/master/spring-context/src/test/java/org/springframework/scheduling/support/CronSequenceGeneratorTests.java","title":"How to test Spring @Scheduled","body":"<p>We can use at least two approaches in order to test scheduled tasks with Spring:</p>\n<ul>\n<li>Integration testing</li>\n</ul>\n<p>If we use spring boot we gonna need the following dependencies:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n&lt;/dependency&gt;\n \n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>We could add a <code>count</code> to the <code>Task</code> and increment it inside the <code>work</code> method:</p>\n<pre><code> public class MyTask {\n   private final AtomicInteger count = new AtomicInteger(0);\n   \n   @Scheduled(fixedRate=1000)\n   public void work(){\n     this.count.incrementAndGet();\n   }\n\n   public int getInvocationCount() {\n    return this.count.get();\n   }\n }\n</code></pre>\n<p>Then check the <code>count</code>:</p>\n<pre><code>@SpringJUnitConfig(ScheduledConfig.class)\npublic class ScheduledIntegrationTest {\n \n    @Autowired\n    MyTask task;\n\n    @Test\n    public void givenSleepBy100ms_whenWork_thenInvocationCountIsGreaterThanZero() \n      throws InterruptedException {\n        Thread.sleep(2000L);\n\n        assertThat(task.getInvocationCount()).isGreaterThan(0);\n    }\n}\n</code></pre>\n<ul>\n<li>Another alternative is using Awaitility like mentions @maciej-walkowiak.</li>\n</ul>\n<p>In that case, we need to add the Awaitility dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.awaitility&lt;/groupId&gt;\n    &lt;artifactId&gt;awaitility&lt;/artifactId&gt;\n    &lt;version&gt;3.1.6&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And use its DSL to check the number of invocations of the method <code>work</code>:</p>\n<pre><code>@SpringJUnitConfig(ScheduledConfig.class)\npublic class ScheduledAwaitilityIntegrationTest {\n\n    @SpyBean \n    MyTask task;\n\n    @Test\n    public void whenWaitOneSecond_thenWorkIsCalledAtLeastThreeTimes() {\n        await()\n          .atMost(Duration.FIVE_SECONDS)\n          .untilAsserted(() -&gt; verify(task, atLeast(3)).work());\n    }\n}\n</code></pre>\n<p>We need take in count that although they are good <strong>it’s better to focus on the unit testing of the logic inside the work method</strong>.</p>\n<p>I put an example <a href=\"https://github.com/earth001/spring-core-certification-exercises/commit/ab2fb963eb6f504f38a9845c4a5558f83275aca3\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Also, if you need to test the CRON expressions like &quot;*/15 * 1-4 * * *&quot; you can use the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html\" rel=\"nofollow noreferrer\"><code>CronSequenceGenerator</code></a> class:</p>\n<pre><code>@Test\npublic void at50Seconds() {\n    assertThat(new CronSequenceGenerator(&quot;*/15 * 1-4 * * *&quot;).next(new Date(2012, 6, 1, 9, 53, 50))).isEqualTo(new Date(2012, 6, 2, 1, 0));\n}\n</code></pre>\n<p>You can find more examples in the <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-context/src/test/java/org/springframework/scheduling/support/CronSequenceGeneratorTests.java\" rel=\"nofollow noreferrer\">official repository</a>.</p>\n"},{"tags":[],"owner":{"account_id":2314766,"reputation":13150,"user_id":2032064,"accept_rate":100,"display_name":"Mifeet"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1602605776,"creation_date":1602605776,"answer_id":64339153,"question_id":32319640,"body_markdown":"Answer from [@Maciej](https://stackoverflow.com/a/49930983/2032064) solves the problem, but doesn&#39;t tackle the hard part of testing @Scheduled with too long intervals (e.g. hours) as mentioned by @cristian-batista .\r\n\r\nIn order to test @Scheduled independently of the actual scheduling interval, we need to make it parametrizable from tests. Fortunately, Spring has added a `fixedRateString` parameter [for this purpose](https://stackoverflow.com/a/16463403/2032064). \r\n\r\nHere&#39;s a complete example:\r\n\r\n```\r\npublic class MyTask {\r\n     // Control rate with property `task.work.rate` and use 3600000 (1 hour) as a default:\r\n     @Scheduled(fixedRateString = &quot;${task.work.rate:3600000}&quot;)\r\n     public void work() {\r\n         // task execution logic\r\n     }\r\n }\r\n```\r\n\r\nTest with [awaitility](https://github.com/awaitility/awaitility):\r\n\r\n```\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest\r\n// Override the scheduling rate to something really short:\r\n@TestPropertySource(properties = &quot;task.work.rate=100&quot;) \r\npublic class DemoApplicationTests {\r\n\r\n    @SpyBean\r\n    private MyTask myTask;\r\n\r\n    @Test\r\n    public void jobRuns() {\r\n        Awaitility.await().atMost(10, TimeUnit.SECONDS).untilAsserted(() -&gt;\r\n            verify(myTask, Mockito.atLeastOnce()).work()\r\n        );\r\n    }\r\n}\r\n```\r\n\r\n","title":"How to test Spring @Scheduled","body":"<p>Answer from <a href=\"https://stackoverflow.com/a/49930983/2032064\">@Maciej</a> solves the problem, but doesn't tackle the hard part of testing @Scheduled with too long intervals (e.g. hours) as mentioned by @cristian-batista .</p>\n<p>In order to test @Scheduled independently of the actual scheduling interval, we need to make it parametrizable from tests. Fortunately, Spring has added a <code>fixedRateString</code> parameter <a href=\"https://stackoverflow.com/a/16463403/2032064\">for this purpose</a>.</p>\n<p>Here's a complete example:</p>\n<pre><code>public class MyTask {\n     // Control rate with property `task.work.rate` and use 3600000 (1 hour) as a default:\n     @Scheduled(fixedRateString = &quot;${task.work.rate:3600000}&quot;)\n     public void work() {\n         // task execution logic\n     }\n }\n</code></pre>\n<p>Test with <a href=\"https://github.com/awaitility/awaitility\" rel=\"noreferrer\">awaitility</a>:</p>\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\n// Override the scheduling rate to something really short:\n@TestPropertySource(properties = &quot;task.work.rate=100&quot;) \npublic class DemoApplicationTests {\n\n    @SpyBean\n    private MyTask myTask;\n\n    @Test\n    public void jobRuns() {\n        Awaitility.await().atMost(10, TimeUnit.SECONDS).untilAsserted(() -&gt;\n            verify(myTask, Mockito.atLeastOnce()).work()\n        );\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7798354,"reputation":6929,"user_id":5898696,"accept_rate":89,"display_name":"J-Alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697138846,"creation_date":1691244389,"answer_id":76842019,"question_id":32319640,"body_markdown":"First, great answers and comments were posted here, but I&#39;d like to add some summary and one more additional approach you can use.\r\n\r\n *1. Why you might want to test that?* \r\n\r\nIt is true that there&#39;s no reason to test Spring&#39;s mechanisms. However, there&#39;s another side to it. In order for the entire scheduling mechanism to work, you need `@EnableScheduling` annotation on configuration level or and `@Scheduled` annotation + a cron expression. There are many places where it can go wrong. Imagine someone accidentally removes one of the annotations, or puts `@Scheduled` to a wrong method. Cron expression is verified by Spring from a technical point of view, but not from a business angle.\r\n\r\n *2. How you can test that?*\r\n\r\nWe don&#39;t need this test to be complex and test business logic inside it, the business logic it tested in other tests. We will focus on testing the fact of working scheduler.\r\n\r\n**Option 1. Spy Bean and waiting mechanism**\r\n\r\nAdd this dependency:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.awaitility&lt;/groupId&gt;\r\n    &lt;artifactId&gt;awaitility&lt;/artifactId&gt;\r\n    &lt;version&gt;${awaitility.version}&lt;/version&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n\r\n```\r\n\r\n```\r\n package com.myco.tasks;\r\n\r\n public class MyTask {\r\n\r\n     @Scheduled(fixedRate = ${app.scheduler.rate})\r\n     public void work() {\r\n         // task execution logic\r\n     }\r\n }\r\n\r\n@SpringBootTest\r\npublic class SchedulerTest {\r\n\r\n    @SpyBean\r\n    private MyTask myTask;\r\n\r\n    @Test\r\n    public void jobRuns() {\r\n        Awaitility.await()\r\n                .atMost(Durations.FIVE_SECONDS)\r\n                .untilAsserted(() -&gt; Mockito.verify(myTask, Mockito.atLeast(1)).work());\r\n    }\r\n}\r\n```\r\n\r\n`Mockito` spies on the bean here, `Awaitility` makes the polling and sets the timeout. You can use simple `Thread.sleep()` here, but the test will just be slower and flaky, you either need to wait longer, or slowness can just make it fail accidentally.\r\n\r\n**Important note:** you have to use configurable values for the scheduling expressions, if your real config measured in hours or days, the test config should be measured in seconds.\r\n\r\n*Advantages:*\r\n- Simple to write\r\n- Tests actual bean calls\r\n\r\n*Disadvantages:*\r\n- Doesn&#39;t test actual expression, test configuration might be different from real configuration in case of scheduling big intervals.\r\n- Using very short interval might cause disruption in other Spring tests, there&#39;s a probability that scheduler might kick-in. Can be avoided by using a dedicated profile for this test. \r\n\r\n**Option 2. Task Scheduling holders**\r\n\r\n```\r\n package com.myco.tasks;\r\n\r\n public class MyTask {\r\n\r\n     @Scheduled(cron = &quot;${app.scheduler.cron}&quot;)\r\n     public void work() {\r\n         // task execution logic\r\n     }\r\n }\r\n\r\n@SpringBootTest\r\npublic class SchedulerTest {\r\n\r\n    @Value(&quot;${app.scheduler.cron}&quot;)\r\n    private String expectedCronExpression;\r\n\r\n    @Autowired\r\n    private ScheduledTaskHolder taskHolder;\r\n\r\n    @Test\r\n    public void cronTaskIsScheduled() {\r\n        CronTask cronTask = taskHolder.getScheduledTasks()\r\n                .stream()\r\n                .map(ScheduledTask::getTask)\r\n                .filter(CronTask.class::isInstance)\r\n                .map(CronTask.class::cast)\r\n                .filter(task -&gt; task.toString().contains(&quot;tasks.MyTask.work&quot;))\r\n                .findFirst()\r\n                .orElseThrow(() -&gt; new IllegalStateException(&quot;No scheduled tasks&quot;));\r\n\r\n        assertEquals(cronExpression, cronTask.getExpression());\r\n    }\r\n}\r\n```\r\n\r\nInject the task holder and assert if there are scheduled tasks by asserting the expression and Class + method name. This example is given for `CronTask` but can easily be adapted for OP example using `FixedRateTask`.\r\n\r\n**Important note:** `ScheduledTaskHolder` is available since Spring 5.0.2, you can inject `ScheduledAnnotationBeanPostProcessor` directly if you&#39;re using Spring 3 or above.\r\n\r\n*Advantages:*\r\n- Can test the actual exact cron expression\r\n\r\n*Disadvantages:*\r\n- Doesn&#39;t test bean calls\r\n- Harder to refactor: class names, method names (and package, if you include that in your assertion) change should be adjusted manually.\r\n\r\nYou can combine both approaches if you&#39;re testing a very critical scheduler. I&#39;d recommend using different profiles for tests.\r\n\r\n","title":"How to test Spring @Scheduled","body":"<p>First, great answers and comments were posted here, but I'd like to add some summary and one more additional approach you can use.</p>\n<p><em>1. Why you might want to test that?</em></p>\n<p>It is true that there's no reason to test Spring's mechanisms. However, there's another side to it. In order for the entire scheduling mechanism to work, you need <code>@EnableScheduling</code> annotation on configuration level or and <code>@Scheduled</code> annotation + a cron expression. There are many places where it can go wrong. Imagine someone accidentally removes one of the annotations, or puts <code>@Scheduled</code> to a wrong method. Cron expression is verified by Spring from a technical point of view, but not from a business angle.</p>\n<p><em>2. How you can test that?</em></p>\n<p>We don't need this test to be complex and test business logic inside it, the business logic it tested in other tests. We will focus on testing the fact of working scheduler.</p>\n<p><strong>Option 1. Spy Bean and waiting mechanism</strong></p>\n<p>Add this dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.awaitility&lt;/groupId&gt;\n    &lt;artifactId&gt;awaitility&lt;/artifactId&gt;\n    &lt;version&gt;${awaitility.version}&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n<pre><code> package com.myco.tasks;\n\n public class MyTask {\n\n     @Scheduled(fixedRate = ${app.scheduler.rate})\n     public void work() {\n         // task execution logic\n     }\n }\n\n@SpringBootTest\npublic class SchedulerTest {\n\n    @SpyBean\n    private MyTask myTask;\n\n    @Test\n    public void jobRuns() {\n        Awaitility.await()\n                .atMost(Durations.FIVE_SECONDS)\n                .untilAsserted(() -&gt; Mockito.verify(myTask, Mockito.atLeast(1)).work());\n    }\n}\n</code></pre>\n<p><code>Mockito</code> spies on the bean here, <code>Awaitility</code> makes the polling and sets the timeout. You can use simple <code>Thread.sleep()</code> here, but the test will just be slower and flaky, you either need to wait longer, or slowness can just make it fail accidentally.</p>\n<p><strong>Important note:</strong> you have to use configurable values for the scheduling expressions, if your real config measured in hours or days, the test config should be measured in seconds.</p>\n<p><em>Advantages:</em></p>\n<ul>\n<li>Simple to write</li>\n<li>Tests actual bean calls</li>\n</ul>\n<p><em>Disadvantages:</em></p>\n<ul>\n<li>Doesn't test actual expression, test configuration might be different from real configuration in case of scheduling big intervals.</li>\n<li>Using very short interval might cause disruption in other Spring tests, there's a probability that scheduler might kick-in. Can be avoided by using a dedicated profile for this test.</li>\n</ul>\n<p><strong>Option 2. Task Scheduling holders</strong></p>\n<pre><code> package com.myco.tasks;\n\n public class MyTask {\n\n     @Scheduled(cron = &quot;${app.scheduler.cron}&quot;)\n     public void work() {\n         // task execution logic\n     }\n }\n\n@SpringBootTest\npublic class SchedulerTest {\n\n    @Value(&quot;${app.scheduler.cron}&quot;)\n    private String expectedCronExpression;\n\n    @Autowired\n    private ScheduledTaskHolder taskHolder;\n\n    @Test\n    public void cronTaskIsScheduled() {\n        CronTask cronTask = taskHolder.getScheduledTasks()\n                .stream()\n                .map(ScheduledTask::getTask)\n                .filter(CronTask.class::isInstance)\n                .map(CronTask.class::cast)\n                .filter(task -&gt; task.toString().contains(&quot;tasks.MyTask.work&quot;))\n                .findFirst()\n                .orElseThrow(() -&gt; new IllegalStateException(&quot;No scheduled tasks&quot;));\n\n        assertEquals(cronExpression, cronTask.getExpression());\n    }\n}\n</code></pre>\n<p>Inject the task holder and assert if there are scheduled tasks by asserting the expression and Class + method name. This example is given for <code>CronTask</code> but can easily be adapted for OP example using <code>FixedRateTask</code>.</p>\n<p><strong>Important note:</strong> <code>ScheduledTaskHolder</code> is available since Spring 5.0.2, you can inject <code>ScheduledAnnotationBeanPostProcessor</code> directly if you're using Spring 3 or above.</p>\n<p><em>Advantages:</em></p>\n<ul>\n<li>Can test the actual exact cron expression</li>\n</ul>\n<p><em>Disadvantages:</em></p>\n<ul>\n<li>Doesn't test bean calls</li>\n<li>Harder to refactor: class names, method names (and package, if you include that in your assertion) change should be adjusted manually.</li>\n</ul>\n<p>You can combine both approaches if you're testing a very critical scheduler. I'd recommend using different profiles for tests.</p>\n"}],"owner":{"account_id":6743454,"reputation":491,"user_id":5195869,"display_name":"S Puddin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74954,"favorite_count":0,"down_vote_count":0,"up_vote_count":49,"answer_count":7,"score":49,"last_activity_date":1697138846,"creation_date":1441053684,"question_id":32319640,"body_markdown":"How do I test [`@Scheduled`][1] job tasks in my spring-boot application?\r\n\r\n     package com.myco.tasks;\r\n    \r\n     public class MyTask {\r\n         @Scheduled(fixedRate=1000)\r\n         public void work() {\r\n             // task execution logic\r\n         }\r\n     }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/Scheduled.html","title":"How to test Spring @Scheduled","body":"<p>How do I test <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/Scheduled.html\" rel=\"noreferrer\"><code>@Scheduled</code></a> job tasks in my spring-boot application?</p>\n\n<pre><code> package com.myco.tasks;\n\n public class MyTask {\n     @Scheduled(fixedRate=1000)\n     public void work() {\n         // task execution logic\n     }\n }\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot"],"comments":[{"owner":{"account_id":101001,"reputation":119808,"user_id":271959,"display_name":"Frank Heikens"},"score":1,"creation_date":1697135659,"post_id":77282993,"comment_id":136245246,"body_markdown":"Advice: Never ever use UPPER case in your database object names, like table and column names.","body":"Advice: Never ever use UPPER case in your database object names, like table and column names."},{"owner":{"account_id":8633322,"reputation":218433,"user_id":6464308,"display_name":"Laurenz Albe"},"score":0,"creation_date":1697161307,"post_id":77282993,"comment_id":136248176,"body_markdown":"A typo: `widgetid` vs. `widget_id`.","body":"A typo: <code>widgetid</code> vs. <code>widget_id</code>."}],"owner":{"account_id":28730252,"reputation":1,"user_id":22002364,"display_name":"JayaKumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697138360,"creation_date":1697135010,"question_id":77282993,"body_markdown":"i have five columns in table in postgres db \r\n\r\n\r\n\r\nSELECT &quot;widgetId&quot;, spaceurl, section, signingkey\r\n\tFROM gitbook.helpdocs;\r\n\r\nwhere &quot;widgetId&quot; is primarykey\r\n\r\nentity class:\r\n\r\n\r\n    @Id \r\n\t@Column(name = &quot;widgetId&quot;)\r\n\tString widgetId;\r\n\t\r\n\t@Column(name = &quot;spaceurl&quot;)\r\n\tString spaceurl;\r\n\t\r\n\t@Column(name = &quot;section&quot;)\r\n\tString section;\r\n\t\r\n\t@Column(name = &quot;signingkey&quot;)\r\n\tString signingkey;\r\n\r\n\r\nbut it is giving me error:\r\n\r\n ERROR: **column h1_0.widget_id does not exist**\r\n Hint: Perhaps you meant to reference the column &quot;h1_0.widgetId&quot;\r\n\r\nI am giving the correct column name but still getting this mismatch error\r\nI have tried with many options like addingg generation type and changing the case of the text. but\r\nnothing working","title":"Getting column does not exist error when trying to connect with Postgres database","body":"<p>i have five columns in table in postgres db</p>\n<p>SELECT &quot;widgetId&quot;, spaceurl, section, signingkey\nFROM gitbook.helpdocs;</p>\n<p>where &quot;widgetId&quot; is primarykey</p>\n<p>entity class:</p>\n<pre><code>@Id \n@Column(name = &quot;widgetId&quot;)\nString widgetId;\n\n@Column(name = &quot;spaceurl&quot;)\nString spaceurl;\n\n@Column(name = &quot;section&quot;)\nString section;\n\n@Column(name = &quot;signingkey&quot;)\nString signingkey;\n</code></pre>\n<p>but it is giving me error:</p>\n<p>ERROR: <strong>column h1_0.widget_id does not exist</strong>\nHint: Perhaps you meant to reference the column &quot;h1_0.widgetId&quot;</p>\n<p>I am giving the correct column name but still getting this mismatch error\nI have tried with many options like addingg generation type and changing the case of the text. but\nnothing working</p>\n"},{"tags":["java","snowflake-cloud-data-platform","apache-beam"],"owner":{"account_id":29658965,"reputation":1,"user_id":22731046,"display_name":"mybeam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697138286,"creation_date":1697137884,"question_id":77283276,"body_markdown":"As per the document on https://beam.apache.org/documentation/io/built-in/snowflake/#running-main-command-with-pipeline-options, I can only see DirectRunner and DataflowRunner, and I have tested the DirectRunner which is working fine. Just wonder if it supports Flink officially. Any comments are welcomed. Thanks.\r\n\r\n\r\nI tested DirectRunner which is working.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/g1xgY.png","title":"Does SnowflakeIO Connector in Java support Flink?","body":"<p>As per the document on <a href=\"https://beam.apache.org/documentation/io/built-in/snowflake/#running-main-command-with-pipeline-options\" rel=\"nofollow noreferrer\">https://beam.apache.org/documentation/io/built-in/snowflake/#running-main-command-with-pipeline-options</a>, I can only see DirectRunner and DataflowRunner, and I have tested the DirectRunner which is working fine. Just wonder if it supports Flink officially. Any comments are welcomed. Thanks.</p>\n<p>I tested DirectRunner which is working.</p>\n"},{"tags":["java","docker","docker-compose"],"owner":{"account_id":18322279,"reputation":13,"user_id":13342784,"display_name":"NoBug"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697138278,"creation_date":1697136722,"question_id":77283157,"body_markdown":"I have have the following error when compose up the container.\r\n```\r\nmirror-maker  | 360 [main] ERROR org.apache.kafka.common.security.ssl.DefaultSslEngineFactory  - Modification time of key store could not be obtained: &quot;/etc/tmp/key\r\nstore.jks&quot;\r\nmirror-maker  | java.nio.file.NoSuchFileException: &quot;/etc/tmp/keystore.jks&quot;\r\n```\r\n\r\nI exec into the container and found the file does exit with permission 644.\r\n\r\n&gt; -rw-r--r--. 1 appuser appuser   3358 Sep 26 16:10 keystore.jks\r\n\r\n\r\nHere is how I firstly mount and access the volume in docker compose file.\r\n```\r\n    volumes:\r\n      - /home/ec2-user/kafka-mirror-maker/configs:/etc/tmp\r\nenvironment:\r\n    CONNECT_SSL_KEYSTORE_LOCATION=&quot;/etc/tmp/keystore.jks&quot;\r\n```\r\n\r\n\r\nI tested using docker run command which worked surprisely. \r\n\r\n    docker run -d -v /home/ec2-user/kafka-mirror-maker/configs:/etc/tmp \\\r\n    -e CONNECT_SSL_TRUSTSTORE_LOCATION=&quot;/etc/tmp/keystore.jks&quot; \\\r\n\r\n\r\nThen I tried to use named volume and it did not work either.\r\n```\r\n    volumes:\r\n      - configs:/etc/tmp\r\n\r\nvolumes:\r\n  configs:\r\n    driver: local\r\n    driver_opts:\r\n      type: none\r\n      o: bind\r\n      device: /home/ec2-user/kafka-mirror-maker/configs\r\n```\r\n\r\nThanks in advance!","title":"NosuchFileException found when compose up docker","body":"<p>I have have the following error when compose up the container.</p>\n<pre><code>mirror-maker  | 360 [main] ERROR org.apache.kafka.common.security.ssl.DefaultSslEngineFactory  - Modification time of key store could not be obtained: &quot;/etc/tmp/key\nstore.jks&quot;\nmirror-maker  | java.nio.file.NoSuchFileException: &quot;/etc/tmp/keystore.jks&quot;\n</code></pre>\n<p>I exec into the container and found the file does exit with permission 644.</p>\n<blockquote>\n<p>-rw-r--r--. 1 appuser appuser   3358 Sep 26 16:10 keystore.jks</p>\n</blockquote>\n<p>Here is how I firstly mount and access the volume in docker compose file.</p>\n<pre><code>    volumes:\n      - /home/ec2-user/kafka-mirror-maker/configs:/etc/tmp\nenvironment:\n    CONNECT_SSL_KEYSTORE_LOCATION=&quot;/etc/tmp/keystore.jks&quot;\n</code></pre>\n<p>I tested using docker run command which worked surprisely.</p>\n<pre><code>docker run -d -v /home/ec2-user/kafka-mirror-maker/configs:/etc/tmp \\\n-e CONNECT_SSL_TRUSTSTORE_LOCATION=&quot;/etc/tmp/keystore.jks&quot; \\\n</code></pre>\n<p>Then I tried to use named volume and it did not work either.</p>\n<pre><code>    volumes:\n      - configs:/etc/tmp\n\nvolumes:\n  configs:\n    driver: local\n    driver_opts:\n      type: none\n      o: bind\n      device: /home/ec2-user/kafka-mirror-maker/configs\n</code></pre>\n<p>Thanks in advance!</p>\n"},{"tags":["python","java","rabbitmq","cluster-computing"],"answers":[{"tags":[],"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697138239,"creation_date":1581517870,"answer_id":60190649,"question_id":60174822,"body_markdown":"If the queue master node stops, your application will receive a &quot;connection lost&quot; exception. You then act upon this exception to connect to any other node in the cluster.\r\n\r\nYou don&#39;t need to know anything about a &quot;cluster manager&quot;. Just connect to another node.\r\n\r\nThe RabbitMQ Java client library supports automatic recovery for connections and topologies.","title":"Who is rabbitmq cluster manager? How can I get data from cluster?","body":"<p>If the queue master node stops, your application will receive a &quot;connection lost&quot; exception. You then act upon this exception to connect to any other node in the cluster.</p>\n<p>You don't need to know anything about a &quot;cluster manager&quot;. Just connect to another node.</p>\n<p>The RabbitMQ Java client library supports automatic recovery for connections and topologies.</p>\n"},{"tags":[],"owner":{"account_id":1818160,"reputation":26,"user_id":1652835,"display_name":"angelgarcan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634621619,"creation_date":1634621619,"answer_id":69625580,"question_id":60174822,"body_markdown":"There&#39;s not sth like *&quot;cluster manager&quot;*. The nodes in a RabbitMQ cluster use the Raft algorithm for distributed consensus and elect their leader (see http://thesecretlivesofdata.com/raft).\r\n\r\nOn the other hand, RabbitMQ Java Client API already could manage disconnections as in the scenario that you pose. New connections are recoverable by default (see https://www.rabbitmq.com/api-guide.html#connection-recovery).\r\n\r\nYou could use this snippet as an example to create connections to several nodes (each String in the `addressesStr` List should be like `node_ip:port`):\r\n\r\n```\r\n  public Connection crateConnection(final List&lt;String&gt; addressesStr)\r\n      throws IOException, TimeoutException {\r\n    final ConnectionFactory factory = new ConnectionFactory();\r\n    final List&lt;Address&gt; addresses = new ArrayList&lt;&gt;();\r\n\r\n    for (final String address : addressesStr) {\r\n      final String[] addr = address.split(&quot;:&quot;);\r\n      final String host = addr[0];\r\n      final var port = Integer.parseInt(addr[1]);\r\n      addresses.add(new Address(host, port));\r\n    }\r\n\r\n    return factory.newConnection(addresses);\r\n  }\r\n```","title":"Who is rabbitmq cluster manager? How can I get data from cluster?","body":"<p>There's not sth like <em>&quot;cluster manager&quot;</em>. The nodes in a RabbitMQ cluster use the Raft algorithm for distributed consensus and elect their leader (see <a href=\"http://thesecretlivesofdata.com/raft\" rel=\"nofollow noreferrer\">http://thesecretlivesofdata.com/raft</a>).</p>\n<p>On the other hand, RabbitMQ Java Client API already could manage disconnections as in the scenario that you pose. New connections are recoverable by default (see <a href=\"https://www.rabbitmq.com/api-guide.html#connection-recovery\" rel=\"nofollow noreferrer\">https://www.rabbitmq.com/api-guide.html#connection-recovery</a>).</p>\n<p>You could use this snippet as an example to create connections to several nodes (each String in the <code>addressesStr</code> List should be like <code>node_ip:port</code>):</p>\n<pre><code>  public Connection crateConnection(final List&lt;String&gt; addressesStr)\n      throws IOException, TimeoutException {\n    final ConnectionFactory factory = new ConnectionFactory();\n    final List&lt;Address&gt; addresses = new ArrayList&lt;&gt;();\n\n    for (final String address : addressesStr) {\n      final String[] addr = address.split(&quot;:&quot;);\n      final String host = addr[0];\n      final var port = Integer.parseInt(addr[1]);\n      addresses.add(new Address(host, port));\n    }\n\n    return factory.newConnection(addresses);\n  }\n</code></pre>\n"}],"owner":{"account_id":17229129,"reputation":386,"user_id":12474132,"display_name":"newUser"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697138239,"creation_date":1581443749,"question_id":60174822,"body_markdown":"I created rabbitmq cluster. There are three nodes one master two slaves. When master dies, who decides which slave is the new master. Who is cluster manager? And How can I get data from cluster. I can get message from every node from cluster but For example: I am getting data from master node, but when master node is dead, I need to connect to other node manually. But I want to connect to cluster and Whenever master dies, I could get message from another node?","title":"Who is rabbitmq cluster manager? How can I get data from cluster?","body":"<p>I created rabbitmq cluster. There are three nodes one master two slaves. When master dies, who decides which slave is the new master. Who is cluster manager? And How can I get data from cluster. I can get message from every node from cluster but For example: I am getting data from master node, but when master node is dead, I need to connect to other node manually. But I want to connect to cluster and Whenever master dies, I could get message from another node?</p>\n"},{"tags":["java","unit-testing","integration-testing","wiremock"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1632427819,"post_id":69301670,"comment_id":122496945,"body_markdown":"Have you looked at the documentation for how to have test fakes for gRPC services?","body":"Have you looked at the documentation for how to have test fakes for gRPC services?"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1680047350,"post_id":69301670,"comment_id":133829568,"body_markdown":"FYI, Java gRPC has a `InProcessServerBuilder` useful for testing and mocks","body":"FYI, Java gRPC has a <code>InProcessServerBuilder</code> useful for testing and mocks"}],"answers":[{"tags":[],"owner":{"account_id":3177957,"reputation":1440,"user_id":2685402,"accept_rate":53,"display_name":"Wojtek"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1634227447,"creation_date":1634227447,"answer_id":69573887,"question_id":69301670,"body_markdown":"You could use [Wiremock-gRPC][1] or any of the other tools mentioned on the [Wikipedia comparison site][2] such as the [commercial tool Traffic Parrot that supports gRPC][3] or [Camouflage][4].\r\n\r\n\r\n  [1]: https://github.com/Adven27/grpc-wiremock\r\n  [2]: https://en.wikipedia.org/wiki/Comparison_of_API_simulation_tools\r\n  [3]: https://trafficparrot.com/tutorials/mocking-and-simulating-grpc.html\r\n  [4]: https://github.com/testinggospels/camouflage/","title":"How to use WireMock to mock an upstream service with Protobuf (gRPC) response","body":"<p>You could use <a href=\"https://github.com/Adven27/grpc-wiremock\" rel=\"nofollow noreferrer\">Wiremock-gRPC</a> or any of the other tools mentioned on the <a href=\"https://en.wikipedia.org/wiki/Comparison_of_API_simulation_tools\" rel=\"nofollow noreferrer\">Wikipedia comparison site</a> such as the <a href=\"https://trafficparrot.com/tutorials/mocking-and-simulating-grpc.html\" rel=\"nofollow noreferrer\">commercial tool Traffic Parrot that supports gRPC</a> or <a href=\"https://github.com/testinggospels/camouflage/\" rel=\"nofollow noreferrer\">Camouflage</a>.</p>\n"},{"tags":[],"owner":{"account_id":991044,"reputation":3566,"user_id":1008361,"display_name":"Tom"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697138109,"creation_date":1697138109,"answer_id":77283307,"question_id":69301670,"body_markdown":"WireMock now has an official extension that supports gRPC mocking.\r\n\r\nIt works by converting protobuf messages to and from JSON so that WireMock&#39;s JSON matching can be used as normal.\r\n\r\nMatching and responses can be expressed directly as JSON, or Java classes generated by `protoc` can be used via the extension&#39;s DSL:\r\n\r\n```java\r\nmockGreetingService.stubFor(\r\n        method(&quot;greeting&quot;)\r\n            .withRequestMessage(equalToMessage(HelloRequest.newBuilder().setName(&quot;Tom&quot;)))\r\n            .willReturn(message(HelloResponse.newBuilder().setGreeting(&quot;Hi&quot;))));\r\n```","title":"How to use WireMock to mock an upstream service with Protobuf (gRPC) response","body":"<p>WireMock now has an official extension that supports gRPC mocking.</p>\n<p>It works by converting protobuf messages to and from JSON so that WireMock's JSON matching can be used as normal.</p>\n<p>Matching and responses can be expressed directly as JSON, or Java classes generated by <code>protoc</code> can be used via the extension's DSL:</p>\n<pre class=\"lang-java prettyprint-override\"><code>mockGreetingService.stubFor(\n        method(&quot;greeting&quot;)\n            .withRequestMessage(equalToMessage(HelloRequest.newBuilder().setName(&quot;Tom&quot;)))\n            .willReturn(message(HelloResponse.newBuilder().setGreeting(&quot;Hi&quot;))));\n</code></pre>\n"}],"owner":{"account_id":22644881,"reputation":51,"user_id":16820416,"display_name":"StyleBender"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3944,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1697138109,"creation_date":1632406130,"question_id":69301670,"body_markdown":"I am writing integration tests for my Java Service. We are thinking of using WireMock to mock upstream services. However, one of our upstream returns a Protobuf (grpc) response and I can&#39;t seem to understand how to mock a gRPC response using WireMock.\r\nI tried to convert the response to byteArray and use that ,however, wiremock fails to deserialize it to Protobuf Java Object.\r\n\r\nWe have a limitation that we can only use 1 mock server since all our upstream requests are forwarded via a servicemesh sidecar running on a fixed port. \r\n\r\nThanks!","title":"How to use WireMock to mock an upstream service with Protobuf (gRPC) response","body":"<p>I am writing integration tests for my Java Service. We are thinking of using WireMock to mock upstream services. However, one of our upstream returns a Protobuf (grpc) response and I can't seem to understand how to mock a gRPC response using WireMock.\nI tried to convert the response to byteArray and use that ,however, wiremock fails to deserialize it to Protobuf Java Object.</p>\n<p>We have a limitation that we can only use 1 mock server since all our upstream requests are forwarded via a servicemesh sidecar running on a fixed port.</p>\n<p>Thanks!</p>\n"},{"tags":["java","spring","docker","docker-compose","quarkus"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1697034421,"post_id":77273854,"comment_id":136229045,"body_markdown":"if you will try to change url from `quarkus.oidc.auth-server-url=http://keycloak_dev:8080/realms/Test` to `quarkus.oidc.auth-server-url=http://keycloak_dev:9090/realms/Test` will it work ?","body":"if you will try to change url from <code>quarkus.oidc.auth-server-url=http:&#47;&#47;keycloak_dev:8080&#47;realms&zwnj;&#8203;&#47;Test</code> to <code>quarkus.oidc.auth-server-url=http:&#47;&#47;keycloak_dev:9090&#47;realms&zwnj;&#8203;&#47;Test</code> will it work ?"},{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1697035013,"post_id":77273854,"comment_id":136229180,"body_markdown":"&quot;Status code 404&quot; suggests that the connection from one container to the other is successful (the host name and port are correct) but the URL path is wrong.","body":"&quot;Status code 404&quot; suggests that the connection from one container to the other is successful (the host name and port are correct) but the URL path is wrong."},{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1697035049,"post_id":77273854,"comment_id":136229194,"body_markdown":"@AndreiLisa Connections between containers don&#39;t use `ports:` at all.  If the Keycloak service inside its container is listening on port 8080 then that&#39;s the correct port for the cross-service URL, even if it&#39;s being published to the host on a different port.","body":"@AndreiLisa Connections between containers don&#39;t use <code>ports:</code> at all.  If the Keycloak service inside its container is listening on port 8080 then that&#39;s the correct port for the cross-service URL, even if it&#39;s being published to the host on a different port."},{"owner":{"account_id":29648595,"reputation":1,"user_id":22723067,"display_name":"youssuf khaled"},"score":0,"creation_date":1697037312,"post_id":77273854,"comment_id":136229674,"body_markdown":"@AndreiLisa no it didn&#39;t","body":"@AndreiLisa no it didn&#39;t"},{"owner":{"account_id":29648595,"reputation":1,"user_id":22723067,"display_name":"youssuf khaled"},"score":0,"creation_date":1697037444,"post_id":77273854,"comment_id":136229703,"body_markdown":"@DavidMaze what about the client problem I can make the same exact request with the same url in the command line with the curl and it works but i cant through my backend, you can see the log request done by the client and the one done by the curl","body":"@DavidMaze what about the client problem I can make the same exact request with the same url in the command line with the curl and it works but i cant through my backend, you can see the log request done by the client and the one done by the curl"}],"answers":[{"tags":[],"owner":{"account_id":29648595,"reputation":1,"user_id":22723067,"display_name":"youssuf khaled"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697137515,"creation_date":1697137212,"answer_id":77283208,"question_id":77273854,"body_markdown":"The solution to the issue is to change the service name in the Docker Compose file from `keycloak_dev` to `keycloackdev`, removing the underscore.\r\nI found it from this answer: https://stackoverflow.com/a/76991211/22723067","title":"I have two services, both running within a Docker Compose setup and connected to the same network, but they can&#39;t establish a connection","body":"<p>The solution to the issue is to change the service name in the Docker Compose file from <code>keycloak_dev</code> to <code>keycloackdev</code>, removing the underscore.\nI found it from this answer: <a href=\"https://stackoverflow.com/a/76991211/22723067\">https://stackoverflow.com/a/76991211/22723067</a></p>\n"}],"owner":{"account_id":29648595,"reputation":1,"user_id":22723067,"display_name":"youssuf khaled"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697137515,"creation_date":1697033438,"question_id":77273854,"body_markdown":"Connection refused when sending http request from container to another container in the same network\r\n```\r\n jakarta.ws.rs.ProcessingException: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/127.0.0.1:80 \r\n```\r\n\r\nHere is the docker compose configurations:\r\n```\r\nservices:\r\n  keycloak_dev:\r\n    image: quay.io/keycloak/keycloak:latest\r\n    container_name: keycloak_dev\r\n    ports:\r\n      - &quot;9090:8080&quot;\r\n    environment:\r\n      - KEYCLOAK_ADMIN=test\r\n      - KEYCLOAK_ADMIN_PASSWORD=test\r\n\r\n    networks:\r\n      - network1\r\n    command: &quot;start-dev&quot;\r\n  backend:\r\n    image: test-app\r\n    ports:\r\n      - &quot;8080:8080&quot;\r\n    depends_on:\r\n      - keycloak_dev\r\n    networks:\r\n      - network1\r\nnetworks:\r\n  network1:\r\n    name: quarkus-network\r\n    driver: bridge\r\n```\r\nHere is my application.properties: \r\n```\r\nquarkus.oidc.auth-server-url=http://keycloak_dev:8080/realms/Test\r\nkeycloak-client/mp-rest/url=http://keycloak_dev:8080\r\n\r\n```\r\nHere is my KeycloakClient in the backen service:\r\n```\r\n@RegisterRestClient(configKey = &quot;keycloak-client&quot;)\r\n@RegisterProvider(RequestLoggingFilter.class)\r\npublic interface KeycloakClient {\r\n\r\n    @POST\r\n    @Path(&quot;/realms/{realm}/protocol/openid-connect/token&quot;)\r\n    @Consumes(MediaType.APPLICATION_FORM_URLENCODED)\r\n    AccessTokenResponse login(\r\n            @PathParam(&quot;realm&quot;) String realm,\r\n            MultivaluedMap&lt;String, String&gt; formParams\r\n    );\r\n```\r\n When I print the request from RequestLoggingFilter:\r\n```\r\n2023-10-11 12:40:09 test-service-backend-1  | Requesting POST http://keycloak_dev:8080/realms/Test/protocol/openid-connect/token\r\n2023-10-11 12:40:09 test-service-backend-1  | Content-Type: [application/x-www-form-urlencoded]\r\n2023-10-11 12:40:09 test-service-backend-1  | User-Agent: [Resteasy Reactive Client]\r\n2023-10-11 12:40:09 test-service-backend-1  | Request Entity: {password=[test], grant_type=[password], client_secret=[secret], client_id=[quarkus], username=[test]}\r\n```\r\nThe error of Keycloak Client\r\n```\r\njakarta.ws.rs.ProcessingException: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/127.0.0.1:80 \r\n```\r\n\r\n\r\nThe error of oidc:\r\n```\r\n(vert.x-eventloop-thread-1) Discovery has failed, status code: 404\r\n2023-10-11 10:29:51 test-service-backend-1  | 2023-10-11 07:29:51,275 WARN  [io.qua.oid.com.run.OidcCommonUtils] (vert.x-eventloop-thread-1) OIDC Server is not available:: io.quarkus.oidc.common.runtime.OidcEndpointAccessException\r\n 2023-10-11 10:29:52,155 WARN  [io.qua.oid.run.OidcRecorder] (vert.x-eventloop-thread-1) OIDC server is not available at the &#39;http://keycloak_dev:8080/realms/Test&#39; URL. Please make sure it is correct.\r\n```\r\n\r\nMy trials:\r\n\r\n1. I tried changing the hostname keycloak_dev into localhost and it didn&#39;t work\r\n2. I tried to open the command line and make an HTTP request to the Keycloak server from the backend container shell and see if it resolves correctly: by these commands:\r\n     - docker exec -it test-service-backend-1 sh\r\n     - curl -i keycloak_dev:8080\r\nand the result was HTTP 200 OK, and I tried a POST to the keycloak server and it worked successfully with the expected response\r\n3. I tried a completely new service that only had a GET endpoint returning a String, and I replaced it with the Keycloak service to test if it could establish a connection with my backend service. However, it couldn&#39;t.\r\n\r\n\r\nHint: The backend is a quarkus service\r\n\r\n","title":"I have two services, both running within a Docker Compose setup and connected to the same network, but they can&#39;t establish a connection","body":"<p>Connection refused when sending http request from container to another container in the same network</p>\n<pre><code> jakarta.ws.rs.ProcessingException: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/127.0.0.1:80 \n</code></pre>\n<p>Here is the docker compose configurations:</p>\n<pre><code>services:\n  keycloak_dev:\n    image: quay.io/keycloak/keycloak:latest\n    container_name: keycloak_dev\n    ports:\n      - &quot;9090:8080&quot;\n    environment:\n      - KEYCLOAK_ADMIN=test\n      - KEYCLOAK_ADMIN_PASSWORD=test\n\n    networks:\n      - network1\n    command: &quot;start-dev&quot;\n  backend:\n    image: test-app\n    ports:\n      - &quot;8080:8080&quot;\n    depends_on:\n      - keycloak_dev\n    networks:\n      - network1\nnetworks:\n  network1:\n    name: quarkus-network\n    driver: bridge\n</code></pre>\n<p>Here is my application.properties:</p>\n<pre><code>quarkus.oidc.auth-server-url=http://keycloak_dev:8080/realms/Test\nkeycloak-client/mp-rest/url=http://keycloak_dev:8080\n\n</code></pre>\n<p>Here is my KeycloakClient in the backen service:</p>\n<pre><code>@RegisterRestClient(configKey = &quot;keycloak-client&quot;)\n@RegisterProvider(RequestLoggingFilter.class)\npublic interface KeycloakClient {\n\n    @POST\n    @Path(&quot;/realms/{realm}/protocol/openid-connect/token&quot;)\n    @Consumes(MediaType.APPLICATION_FORM_URLENCODED)\n    AccessTokenResponse login(\n            @PathParam(&quot;realm&quot;) String realm,\n            MultivaluedMap&lt;String, String&gt; formParams\n    );\n</code></pre>\n<p>When I print the request from RequestLoggingFilter:</p>\n<pre><code>2023-10-11 12:40:09 test-service-backend-1  | Requesting POST http://keycloak_dev:8080/realms/Test/protocol/openid-connect/token\n2023-10-11 12:40:09 test-service-backend-1  | Content-Type: [application/x-www-form-urlencoded]\n2023-10-11 12:40:09 test-service-backend-1  | User-Agent: [Resteasy Reactive Client]\n2023-10-11 12:40:09 test-service-backend-1  | Request Entity: {password=[test], grant_type=[password], client_secret=[secret], client_id=[quarkus], username=[test]}\n</code></pre>\n<p>The error of Keycloak Client</p>\n<pre><code>jakarta.ws.rs.ProcessingException: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/127.0.0.1:80 \n</code></pre>\n<p>The error of oidc:</p>\n<pre><code>(vert.x-eventloop-thread-1) Discovery has failed, status code: 404\n2023-10-11 10:29:51 test-service-backend-1  | 2023-10-11 07:29:51,275 WARN  [io.qua.oid.com.run.OidcCommonUtils] (vert.x-eventloop-thread-1) OIDC Server is not available:: io.quarkus.oidc.common.runtime.OidcEndpointAccessException\n 2023-10-11 10:29:52,155 WARN  [io.qua.oid.run.OidcRecorder] (vert.x-eventloop-thread-1) OIDC server is not available at the 'http://keycloak_dev:8080/realms/Test' URL. Please make sure it is correct.\n</code></pre>\n<p>My trials:</p>\n<ol>\n<li>I tried changing the hostname keycloak_dev into localhost and it didn't work</li>\n<li>I tried to open the command line and make an HTTP request to the Keycloak server from the backend container shell and see if it resolves correctly: by these commands:\n<ul>\n<li>docker exec -it test-service-backend-1 sh</li>\n<li>curl -i keycloak_dev:8080\nand the result was HTTP 200 OK, and I tried a POST to the keycloak server and it worked successfully with the expected response</li>\n</ul>\n</li>\n<li>I tried a completely new service that only had a GET endpoint returning a String, and I replaced it with the Keycloak service to test if it could establish a connection with my backend service. However, it couldn't.</li>\n</ol>\n<p>Hint: The backend is a quarkus service</p>\n"},{"tags":["java","arrays","search","indexing"],"comments":[{"owner":{"account_id":280439,"reputation":48160,"user_id":576139,"accept_rate":100,"display_name":"Chris Eberle"},"score":16,"creation_date":1306720650,"post_id":6171663,"comment_id":7174753,"body_markdown":"Binary search will never work on an unsorted array.","body":"Binary search will never work on an unsorted array."},{"owner":{"account_id":761513,"reputation":981,"user_id":775629,"display_name":"Jeomark"},"score":0,"creation_date":1306720779,"post_id":6171663,"comment_id":7174760,"body_markdown":"Then can you suggest me something, how should i do it. Because if i sort the array, i loose track of indexes, and i need to know which index the value came from??","body":"Then can you suggest me something, how should i do it. Because if i sort the array, i loose track of indexes, and i need to know which index the value came from??"},{"owner":{"account_id":761513,"reputation":981,"user_id":775629,"display_name":"Jeomark"},"score":0,"creation_date":1306721437,"post_id":6171663,"comment_id":7174833,"body_markdown":"EDIT: i forgot to add, i need to find array index for double values as well.","body":"EDIT: i forgot to add, i need to find array index for double values as well."},{"owner":{"account_id":225030,"reputation":918,"user_id":485274,"accept_rate":73,"display_name":"Jamie Curtis"},"score":1,"creation_date":1306721505,"post_id":6171663,"comment_id":7174843,"body_markdown":"If you don&#39;t want to sort the array, just use a simple for loop to find the value.","body":"If you don&#39;t want to sort the array, just use a simple for loop to find the value."},{"owner":{"display_name":"user166390"},"score":2,"creation_date":1306721534,"post_id":6171663,"comment_id":7174848,"body_markdown":"It is generally good to read documentation of functions :) From `binarySearch`: &quot;Searches the specified array of ... for the specified value using the binary search algorithm. **The array must be sorted** (as by the sort(long[]) method) prior to making this call. *If it is not sorted, the results are undefined.* ...&quot;","body":"It is generally good to read documentation of functions :) From <code>binarySearch</code>: &quot;Searches the specified array of ... for the specified value using the binary search algorithm. <b>The array must be sorted</b> (as by the sort(long[]) method) prior to making this call. <i>If it is not sorted, the results are undefined.</i> ...&quot;"},{"owner":{"account_id":1062360,"reputation":37721,"user_id":1063716,"accept_rate":94,"display_name":"Steve Chambers"},"score":0,"creation_date":1385380208,"post_id":6171663,"comment_id":30104016,"body_markdown":"Possible duplicate of http://stackoverflow.com/questions/3384203/finding-an-element-in-an-array-in-java","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/3384203/finding-an-element-in-an-array-in-java\" title=\"finding an element in an array in java\">stackoverflow.com/questions/3384203/&hellip;</a>"},{"owner":{"account_id":2264450,"reputation":4051,"user_id":1993577,"display_name":"Ruchira Randana"},"score":0,"creation_date":1453958501,"post_id":6171663,"comment_id":57830889,"body_markdown":"You need to have the array sorted to apply binary search.","body":"You need to have the array sorted to apply binary search."}],"answers":[{"comments":[{"owner":{"account_id":761513,"reputation":981,"user_id":775629,"display_name":"Jeomark"},"score":0,"creation_date":1306721370,"post_id":6171675,"comment_id":7174827,"body_markdown":"Thanks but would it work for type double?\nSorry i forgot to mention in the question, but i need to work this for double values as well. It works fine with ints though.","body":"Thanks but would it work for type double? Sorry i forgot to mention in the question, but i need to work this for double values as well. It works fine with ints though."},{"owner":{"account_id":4899,"reputation":103686,"user_id":7595,"accept_rate":70,"display_name":"Pablo Fernandez"},"score":0,"creation_date":1306722768,"post_id":6171675,"comment_id":7174969,"body_markdown":"Yes it would, you don&#39;t have to change anything (but the array type obviously)","body":"Yes it would, you don&#39;t have to change anything (but the array type obviously)"},{"owner":{"account_id":141330,"reputation":228,"user_id":348270,"accept_rate":60,"display_name":"teloon"},"score":64,"creation_date":1352029508,"post_id":6171675,"comment_id":18001555,"body_markdown":"Actually the code doesn&#39;t work. Check [Why is indexOf failing to find the object?](http://stackoverflow.com/questions/9981823/why-is-indexof-failing-to-find-the-object)","body":"Actually the code doesn&#39;t work. Check <a href=\"http://stackoverflow.com/questions/9981823/why-is-indexof-failing-to-find-the-object\">Why is indexOf failing to find the object?</a>"},{"owner":{"account_id":2645652,"reputation":575,"user_id":2288418,"accept_rate":83,"display_name":"Leon Helmsley"},"score":15,"creation_date":1381306240,"post_id":6171675,"comment_id":28523396,"body_markdown":"You need to convert array to Integer[] instead of int[]. primitive arrays are not autoboxed.","body":"You need to convert array to Integer[] instead of int[]. primitive arrays are not autoboxed."},{"owner":{"account_id":1534683,"reputation":10937,"user_id":1431044,"accept_rate":92,"display_name":"Langusten Gustel"},"score":1,"creation_date":1475677498,"post_id":6171675,"comment_id":67039873,"body_markdown":"Is this really threadsafe? When I click through the source the List.asList() creates an ArrayList that is taking the the int array directly as data container (not copying)","body":"Is this really threadsafe? When I click through the source the List.asList() creates an ArrayList that is taking the the int array directly as data container (not copying)"},{"owner":{"account_id":13678404,"reputation":444,"user_id":9869329,"display_name":"Purushotham CK"},"score":0,"creation_date":1612105314,"post_id":6171675,"comment_id":116656823,"body_markdown":"This will not work if primitive int type is a type an array.  In case of primitive array type, box it before using:  List&lt;Integer&gt; list = IntStream.of(array)\n                        .boxed()\n                        .collect(Collectors.toList());   Then, Arrays.asList(array).indexOf(4); will give the correct index.","body":"This will not work if primitive int type is a type an array.  In case of primitive array type, box it before using:  List&lt;Integer&gt; list = IntStream.of(array)                         .boxed()                         .collect(Collectors.toList());   Then, Arrays.asList(array).indexOf(4); will give the correct index."},{"owner":{"account_id":14263739,"reputation":68,"user_id":10303631,"display_name":"Hasan Othman"},"score":0,"creation_date":1635512211,"post_id":6171675,"comment_id":123325029,"body_markdown":"another use case, what if the array has two 4? mean like this {1,2,3,4,5,4,6} , how to get the both indexs fast and clean?","body":"another use case, what if the array has two 4? mean like this {1,2,3,4,5,4,6} , how to get the both indexs fast and clean?"},{"owner":{"account_id":21068258,"reputation":537,"user_id":15485000,"display_name":"Azhar Uddin Sheikh"},"score":0,"creation_date":1648623910,"post_id":6171675,"comment_id":126668346,"body_markdown":"why can&#39;t we use `int []`","body":"why can&#39;t we use <code>int []</code>"}],"tags":[],"owner":{"account_id":4899,"reputation":103686,"user_id":7595,"accept_rate":70,"display_name":"Pablo Fernandez"},"comment_count":8,"down_vote_count":22,"up_vote_count":169,"is_accepted":false,"score":147,"last_activity_date":1458139429,"creation_date":1306720669,"answer_id":6171675,"question_id":6171663,"body_markdown":"\r\n\r\n    Integer[] array = {1,2,3,4,5,6};\r\n    \r\n    Arrays.asList(array).indexOf(4);\r\n\r\nNote that this solution is threadsafe because it creates a new object of type List&lt;Integer&gt;. \r\n\r\nAlso you don&#39;t want to invoke this in a loop or something like that since you would be creating a new object every time","title":"How to find the index of an element in an int array?","body":"<pre><code>Integer[] array = {1,2,3,4,5,6};\n\nArrays.asList(array).indexOf(4);\n</code></pre>\n\n<p>Note that this solution is threadsafe because it creates a new object of type List. </p>\n\n<p>Also you don't want to invoke this in a loop or something like that since you would be creating a new object every time</p>\n"},{"comments":[{"owner":{"account_id":1763012,"reputation":1801,"user_id":1609570,"accept_rate":90,"display_name":"Arjun Sunil Kumar"},"score":1,"creation_date":1532157797,"post_id":6171684,"comment_id":89877223,"body_markdown":"It is Arrays. ie Arrays.asList(array).indexOf(1);","body":"It is Arrays. ie Arrays.asList(array).indexOf(1);"}],"tags":[],"owner":{"account_id":324523,"reputation":13401,"user_id":645132,"accept_rate":91,"display_name":"agmcleod"},"comment_count":1,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1639396797,"creation_date":1306720853,"answer_id":6171684,"question_id":6171663,"body_markdown":"You could convert it to a list, then use the indexOf method:\r\n\r\n    Arrays.asList(array).indexOf(1); \r\n\r\nhttp://download.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#asList(T...)\r\nhttp://download.oracle.com/javase/1.5.0/docs/api/java/util/List.html#indexOf(java.lang.Object)","title":"How to find the index of an element in an int array?","body":"<p>You could convert it to a list, then use the indexOf method:</p>\n<pre><code>Arrays.asList(array).indexOf(1); \n</code></pre>\n<p><a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#asList(T...)\" rel=\"nofollow noreferrer\">http://download.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#asList(T...)</a>\n<a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/util/List.html#indexOf(java.lang.Object)\" rel=\"nofollow noreferrer\">http://download.oracle.com/javase/1.5.0/docs/api/java/util/List.html#indexOf(java.lang.Object)</a></p>\n"},{"comments":[{"owner":{"display_name":"user166390"},"score":0,"creation_date":1306721610,"post_id":6171688,"comment_id":7174858,"body_markdown":"This is one way, yes. However it is *not* the only way. The use of the boolean variable `found` here is useless (and not used) and should be removed. A +1 for showing &quot;the manual loop method&quot; though (stylistic and formatting issues aside).","body":"This is one way, yes. However it is <i>not</i> the only way. The use of the boolean variable <code>found</code> here is useless (and not used) and should be removed. A +1 for showing &quot;the manual loop method&quot; though (stylistic and formatting issues aside)."}],"tags":[],"owner":{"account_id":355044,"reputation":37880,"user_id":693752,"accept_rate":63,"display_name":"Snicolas"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1306734653,"creation_date":1306720911,"answer_id":6171688,"question_id":6171663,"body_markdown":"You need to sort values before using binary search. Otherwise, the manual way is to try all ints in your tab.\r\n\r\n    public int getIndexOf( int toSearch, int[] tab )\r\n    {\r\n      for( int i=0; i&lt; tab.length ; i ++ )\r\n        if( tab[ i ] == toSearch)\r\n         return i;\r\n\r\n      return -1;\r\n    }//met\r\n\r\nAn alternative method could be to map all index for each value in a map&lt;Integer, Integer&gt;. \r\n\r\n    tab[ index ] = value;\r\n    if( map.get( value) == null || map.get( value) &gt; index )\r\n        map.put( value, index );\r\n\r\nand then map.get(value) to get the index.\r\n\r\nRegards,\r\nSt&#233;phane\r\n\r\n@pst, thanks for your comments. Can you post an other alternative method ?","title":"How to find the index of an element in an int array?","body":"<p>You need to sort values before using binary search. Otherwise, the manual way is to try all ints in your tab.</p>\n\n<pre><code>public int getIndexOf( int toSearch, int[] tab )\n{\n  for( int i=0; i&lt; tab.length ; i ++ )\n    if( tab[ i ] == toSearch)\n     return i;\n\n  return -1;\n}//met\n</code></pre>\n\n<p>An alternative method could be to map all index for each value in a map. </p>\n\n<pre><code>tab[ index ] = value;\nif( map.get( value) == null || map.get( value) &gt; index )\n    map.put( value, index );\n</code></pre>\n\n<p>and then map.get(value) to get the index.</p>\n\n<p>Regards,\nStéphane</p>\n\n<p>@pst, thanks for your comments. Can you post an other alternative method ?</p>\n"},{"comments":[{"owner":{"display_name":"user166390"},"score":8,"creation_date":1306721333,"post_id":6171689,"comment_id":7174821,"body_markdown":"+1 However it should be noted that `Arrays.sort` *mutates* the input and the original array will be modified.","body":"+1 However it should be noted that <code>Arrays.sort</code> <i>mutates</i> the input and the original array will be modified."},{"owner":{"account_id":761513,"reputation":981,"user_id":775629,"display_name":"Jeomark"},"score":0,"creation_date":1306726410,"post_id":6171689,"comment_id":7175334,"body_markdown":"thank you, the 2nd method somehow worked me after adding some logic for duplicate values with different indexes.","body":"thank you, the 2nd method somehow worked me after adding some logic for duplicate values with different indexes."}],"tags":[],"owner":{"account_id":225030,"reputation":918,"user_id":485274,"accept_rate":73,"display_name":"Jamie Curtis"},"comment_count":2,"down_vote_count":4,"up_vote_count":23,"is_accepted":false,"score":19,"last_activity_date":1306721673,"creation_date":1306720919,"answer_id":6171689,"question_id":6171663,"body_markdown":"A look at the [API][1] and it says you have to sort the array first \r\n\r\nSo:\r\n\r\n    Arrays.sort(array);\r\n    Arrays.binarySearch(array, value);\r\n\r\nIf you don&#39;t want to sort the array:\r\n\r\n    public int find(double[] array, double value) {\r\n        for(int i=0; i&lt;array.length; i++) \r\n             if(array[i] == value)\r\n                 return i;\r\n    }\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/Arrays.html#binarySearch%28int%5B%5D,%20int%29\r\n","title":"How to find the index of an element in an int array?","body":"<p>A look at the <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Arrays.html#binarySearch%28int%5B%5D,%20int%29\" rel=\"noreferrer\">API</a> and it says you have to sort the array first </p>\n\n<p>So:</p>\n\n<pre><code>Arrays.sort(array);\nArrays.binarySearch(array, value);\n</code></pre>\n\n<p>If you don't want to sort the array:</p>\n\n<pre><code>public int find(double[] array, double value) {\n    for(int i=0; i&lt;array.length; i++) \n         if(array[i] == value)\n             return i;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":250544,"reputation":7921,"user_id":527333,"accept_rate":60,"display_name":"btiernay"},"comment_count":0,"down_vote_count":2,"up_vote_count":29,"is_accepted":false,"score":27,"last_activity_date":1433209395,"creation_date":1350157576,"answer_id":12876378,"question_id":6171663,"body_markdown":"Another option if you are using Guava Collections is [Ints.indexOf][1]\r\n\r\n    // Perfect storm:\r\n    final int needle = 42;\r\n    final int[] haystack = [1, 2, 3, 42];\r\n\r\n    // Spoiler alert: index == 3\r\n    final int index = Ints.indexOf(haystack, needle);\r\n\r\nThis is a great choice when space, time and code reuse are at a premium. It is also very terse.\r\n\r\n\r\n  [1]: http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/primitives/Ints.html#indexOf%28int%5B%5D,%20int%29 &quot;Ints.indexOf&quot;","title":"How to find the index of an element in an int array?","body":"<p>Another option if you are using Guava Collections is <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/primitives/Ints.html#indexOf%28int%5B%5D,%20int%29\">Ints.indexOf</a></p>\n\n<pre><code>// Perfect storm:\nfinal int needle = 42;\nfinal int[] haystack = [1, 2, 3, 42];\n\n// Spoiler alert: index == 3\nfinal int index = Ints.indexOf(haystack, needle);\n</code></pre>\n\n<p>This is a great choice when space, time and code reuse are at a premium. It is also very terse.</p>\n"},{"comments":[{"owner":{"account_id":10730,"reputation":118663,"user_id":20394,"accept_rate":73,"display_name":"Mike Samuel"},"score":0,"creation_date":1385396853,"post_id":16373934,"comment_id":30113985,"body_markdown":"`tab.equals(toSearch)` is comparing an array with an int.  Maybe `tab[i] == toSearch` instead.","body":"<code>tab.equals(toSearch)</code> is comparing an array with an int.  Maybe <code>tab[i] == toSearch</code> instead."},{"owner":{"account_id":1951887,"reputation":172,"user_id":1755797,"accept_rate":57,"display_name":"Andre"},"score":0,"creation_date":1385404354,"post_id":16373934,"comment_id":30118272,"body_markdown":"This works thanks Mike... Google for binary search, some nice articles out there and its an interesting method","body":"This works thanks Mike... Google for binary search, some nice articles out there and its an interesting method"},{"owner":{"account_id":92486,"reputation":45195,"user_id":253468,"accept_rate":79,"display_name":"TWiStErRob"},"score":0,"creation_date":1449420818,"post_id":16373934,"comment_id":55988804,"body_markdown":"@Andre if you&#39;re trying to prove a point give them a level playing field (same order, same control flow): `while (tab[i] != toSearch) i++;` VS `while ((tab[i] ^ toSearch) != 0) i++;`.","body":"@Andre if you&#39;re trying to prove a point give them a level playing field (same order, same control flow): <code>while (tab[i] != toSearch) i++;</code> VS <code>while ((tab[i] ^ toSearch) != 0) i++;</code>."},{"owner":{"account_id":92486,"reputation":45195,"user_id":253468,"accept_rate":79,"display_name":"TWiStErRob"},"score":1,"creation_date":1449420958,"post_id":16373934,"comment_id":55988866,"body_markdown":"In any case the this way of timing doesn&#39;t work, for me `bitSearch` is always faster than `getIndexOf`; while if I simply swap the calls to the two methods `getIndexOf` gets faster than `bitSearch`. This clearly demonstrates that the second one is always faster for some reason of JVM internals. You should be repeating the experiment many times (probably millions), averaging the values, discarding extreme values and doing a warmup that is very similar to the test.","body":"In any case the this way of timing doesn&#39;t work, for me <code>bitSearch</code> is always faster than <code>getIndexOf</code>; while if I simply swap the calls to the two methods <code>getIndexOf</code> gets faster than <code>bitSearch</code>. This clearly demonstrates that the second one is always faster for some reason of JVM internals. You should be repeating the experiment many times (probably millions), averaging the values, discarding extreme values and doing a warmup that is very similar to the test."}],"tags":[],"owner":{"account_id":1951887,"reputation":172,"user_id":1755797,"accept_rate":57,"display_name":"Andre"},"comment_count":4,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1385407729,"creation_date":1367668018,"answer_id":16373934,"question_id":6171663,"body_markdown":"You can do it like this:\r\n\r\n     public class Test {\r\n\r\n\tpublic static int Tab[]  = {33,44,55,66,7,88,44,11,23,45,32,12,95};\r\n\tpublic static int search = 23;\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tlong stop = 0;\r\n\t\tlong time = 0;\r\n\t\tlong start = 0;\r\n\t\tstart = System.nanoTime();\r\n\t\tint index = getIndexOf(search,Tab);\r\n\t\tstop = System.nanoTime();\r\n\t\ttime = stop - start;\r\n\t\tSystem.out.println(&quot;equal to took in nano seconds =&quot;+time);\r\n\t\tSystem.out.println(&quot;Index  of searched value is: &quot;+index);\r\n\t\tSystem.out.println(&quot;De value of Tab with searched index is: &quot;+Tab[index]);\r\n\t\tSystem.out.println(&quot;==========================================================&quot;);\r\n\t\tstart = System.nanoTime();\r\n\t\tint Bindex = bitSearch(search,Tab);\r\n\t\tstop = System.nanoTime();\r\n\t\ttime = stop - start;\r\n\t\tSystem.out.println(&quot;Binary search took nano seconds =&quot;+time);\r\n\t\tSystem.out.println(&quot;Index  of searched value is: &quot;+Bindex);\r\n\t\tSystem.out.println(&quot;De value of Tab with searched index is: &quot;+Tab[Bindex]);\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\tpublic static int getIndexOf( int toSearch, int[] tab ){\r\n\t     int i = 0;\r\n\t     while(!(tab[i] == toSearch) )\r\n\t     {  i++; }\r\n\t       return i; // or return tab[i];\r\n\t   }\r\n\tpublic static int bitSearch(int toSearch, int[] tab){\r\n\t\tint i = 0;\r\n\t\tfor(;(toSearch^tab[i])!=0;i++){\r\n\t\t}\r\n\t\treturn i;\r\n\t\t\r\n\t}\r\n}\r\n\r\n\r\nAdded a XOR :)","title":"How to find the index of an element in an int array?","body":"<p>You can do it like this:</p>\n\n<pre><code> public class Test {\n\npublic static int Tab[]  = {33,44,55,66,7,88,44,11,23,45,32,12,95};\npublic static int search = 23;\n\npublic static void main(String[] args) {\n    long stop = 0;\n    long time = 0;\n    long start = 0;\n    start = System.nanoTime();\n    int index = getIndexOf(search,Tab);\n    stop = System.nanoTime();\n    time = stop - start;\n    System.out.println(\"equal to took in nano seconds =\"+time);\n    System.out.println(\"Index  of searched value is: \"+index);\n    System.out.println(\"De value of Tab with searched index is: \"+Tab[index]);\n    System.out.println(\"==========================================================\");\n    start = System.nanoTime();\n    int Bindex = bitSearch(search,Tab);\n    stop = System.nanoTime();\n    time = stop - start;\n    System.out.println(\"Binary search took nano seconds =\"+time);\n    System.out.println(\"Index  of searched value is: \"+Bindex);\n    System.out.println(\"De value of Tab with searched index is: \"+Tab[Bindex]);\n}\n\n\n\npublic static int getIndexOf( int toSearch, int[] tab ){\n     int i = 0;\n     while(!(tab[i] == toSearch) )\n     {  i++; }\n       return i; // or return tab[i];\n   }\npublic static int bitSearch(int toSearch, int[] tab){\n    int i = 0;\n    for(;(toSearch^tab[i])!=0;i++){\n    }\n    return i;\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Added a XOR :)</p>\n"},{"comments":[{"owner":{"account_id":92486,"reputation":45195,"user_id":253468,"accept_rate":79,"display_name":"TWiStErRob"},"score":0,"creation_date":1447951345,"post_id":17472360,"comment_id":55384534,"body_markdown":"The `clear` and the `new ArrayList` are unnecessary operations. Allocating a new `ArrayList` copies the whole array, which is pointless, because `Arrays.asList` already returns a `List` which has an `indexOf` method. Clearing the copy of the list is unnecessary, GC will take it away anyway.","body":"The <code>clear</code> and the <code>new ArrayList</code> are unnecessary operations. Allocating a new <code>ArrayList</code> copies the whole array, which is pointless, because <code>Arrays.asList</code> already returns a <code>List</code> which has an <code>indexOf</code> method. Clearing the copy of the list is unnecessary, GC will take it away anyway."}],"tags":[],"owner":{"account_id":2610832,"reputation":6512,"user_id":2260963,"display_name":"Manmohan Soni"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372946686,"creation_date":1372946686,"answer_id":17472360,"question_id":6171663,"body_markdown":"\r\n\t\r\n\r\n    /**\r\n    \t * Method to get the index of the given item from the list\r\n    \t * @param stringArray\r\n    \t * @param name\r\n    \t * @return index of the item if item exists else return -1\r\n    \t */\r\n    \tpublic static int getIndexOfItemInArray(String[] stringArray, String name) {\r\n    \t\tif (stringArray != null &amp;&amp; stringArray.length &gt; 0) {\r\n    \t\t\tArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(Arrays.asList(stringArray));\r\n    \t\t\tint index = list.indexOf(name);\r\n    \t\t\tlist.clear();\r\n    \t\t\treturn index;\r\n    \t\t}\r\n    \t\treturn -1;\r\n    \t}","title":"How to find the index of an element in an int array?","body":"<pre><code>/**\n     * Method to get the index of the given item from the list\n     * @param stringArray\n     * @param name\n     * @return index of the item if item exists else return -1\n     */\n    public static int getIndexOfItemInArray(String[] stringArray, String name) {\n        if (stringArray != null &amp;&amp; stringArray.length &gt; 0) {\n            ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(Arrays.asList(stringArray));\n            int index = list.indexOf(name);\n            list.clear();\n            return index;\n        }\n        return -1;\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1063728,"reputation":605,"user_id":1064795,"accept_rate":40,"display_name":"Frank"},"score":0,"creation_date":1696951692,"post_id":34173462,"comment_id":136216836,"body_markdown":"If the value isn&#39;t in the array the original code returns 0, pointing to the first element in the array even though it doesn&#39;t match the first element.\n\nI recommend rather than k=0, use k=-1.  If the value is not found in the array, this will return -1.","body":"If the value isn&#39;t in the array the original code returns 0, pointing to the first element in the array even though it doesn&#39;t match the first element.  I recommend rather than k=0, use k=-1.  If the value is not found in the array, this will return -1."}],"tags":[],"owner":{"account_id":6962250,"reputation":1073,"user_id":5341328,"accept_rate":100,"display_name":"Dalvinder Singh"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1697137514,"creation_date":1449647696,"answer_id":34173462,"question_id":6171663,"body_markdown":"Copy this method into your class \r\n\r\n     public int getArrayIndex(int[] arr,int value) {\r\n            int k = -1;\r\n            for(int i = 0;i &lt; arr.length; i++){\r\n                if(arr[i] == value){\r\n                    k = i;\r\n                    break;\r\n                }\r\n            }\r\n        return k;\r\n    }\r\nCall this method with pass two perameters Array and value and store its return value in a integer variable.\r\n\r\n    int indexNum = getArrayIndex(array,value);\r\nThank you","title":"How to find the index of an element in an int array?","body":"<p>Copy this method into your class</p>\n<pre><code> public int getArrayIndex(int[] arr,int value) {\n        int k = -1;\n        for(int i = 0;i &lt; arr.length; i++){\n            if(arr[i] == value){\n                k = i;\n                break;\n            }\n        }\n    return k;\n}\n</code></pre>\n<p>Call this method with pass two perameters Array and value and store its return value in a integer variable.</p>\n<pre><code>int indexNum = getArrayIndex(array,value);\n</code></pre>\n<p>Thank you</p>\n"},{"tags":[],"owner":{"account_id":472023,"reputation":3798,"user_id":880223,"display_name":"Gil SH"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1471437254,"creation_date":1471437254,"answer_id":38996807,"question_id":6171663,"body_markdown":"Simple:\r\n\r\n    public int getArrayIndex(int[] arr,int value) {\r\n        for(int i=0;i&lt;arr.length;i++)\r\n            if(arr[i]==value) return i;\r\n        return -1;\r\n    }\r\n\r\n","title":"How to find the index of an element in an int array?","body":"<p>Simple:</p>\n\n<pre><code>public int getArrayIndex(int[] arr,int value) {\n    for(int i=0;i&lt;arr.length;i++)\n        if(arr[i]==value) return i;\n    return -1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12216941,"reputation":97,"user_id":8917070,"display_name":"madbeans"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1510282219,"creation_date":1510281027,"answer_id":47214777,"question_id":6171663,"body_markdown":"In the main method using for loops:\r\n-the third for loop in my example is the answer to this question.\r\n-in my example I made an array of 20 random integers, assigned a variable the smallest number, and stopped the loop when the location of the array reached the smallest value while counting the number of loops.\r\n\r\n    import java.util.Random;\r\n    public class scratch {\r\n        public static void main(String[] args){\r\n            Random rnd = new Random();\r\n            int randomIntegers[] = new int[20];\r\n            double smallest = randomIntegers[0];\r\n            int location = 0;\r\n            \r\n            for(int i = 0; i &lt; randomIntegers.length; i++){             // fills array with random integers\r\n                randomIntegers[i] = rnd.nextInt(99) + 1;\r\n                System.out.println(&quot; --&quot; + i + &quot;-- &quot; + randomIntegers[i]);\r\n            }\r\n            \r\n            for (int i = 0; i &lt; randomIntegers.length; i++){            // get the location of smallest number in the array \r\n                if(randomIntegers[i] &lt; smallest){\r\n                    smallest = randomIntegers[i];                 \r\n                }\r\n            }\r\n            \r\n            for (int i = 0; i &lt; randomIntegers.length; i++){                \r\n                if(randomIntegers[i] == smallest){                      //break the loop when array location value == &lt;smallest&gt;\r\n                    break;\r\n                }\r\n                location ++;\r\n            }\r\n            System.out.println(&quot;location: &quot; + location + &quot;\\nsmallest: &quot; + smallest);\r\n        }\r\n    }\r\n\r\nCode outputs all the numbers and their locations, and the location of the smallest number followed by the smallest number.","title":"How to find the index of an element in an int array?","body":"<p>In the main method using for loops:\n-the third for loop in my example is the answer to this question.\n-in my example I made an array of 20 random integers, assigned a variable the smallest number, and stopped the loop when the location of the array reached the smallest value while counting the number of loops.</p>\n\n<pre><code>import java.util.Random;\npublic class scratch {\n    public static void main(String[] args){\n        Random rnd = new Random();\n        int randomIntegers[] = new int[20];\n        double smallest = randomIntegers[0];\n        int location = 0;\n\n        for(int i = 0; i &lt; randomIntegers.length; i++){             // fills array with random integers\n            randomIntegers[i] = rnd.nextInt(99) + 1;\n            System.out.println(\" --\" + i + \"-- \" + randomIntegers[i]);\n        }\n\n        for (int i = 0; i &lt; randomIntegers.length; i++){            // get the location of smallest number in the array \n            if(randomIntegers[i] &lt; smallest){\n                smallest = randomIntegers[i];                 \n            }\n        }\n\n        for (int i = 0; i &lt; randomIntegers.length; i++){                \n            if(randomIntegers[i] == smallest){                      //break the loop when array location value == &lt;smallest&gt;\n                break;\n            }\n            location ++;\n        }\n        System.out.println(\"location: \" + location + \"\\nsmallest: \" + smallest);\n    }\n}\n</code></pre>\n\n<p>Code outputs all the numbers and their locations, and the location of the smallest number followed by the smallest number.</p>\n"},{"tags":[],"owner":{"account_id":8937752,"reputation":85,"user_id":6668010,"display_name":"Deep Shah"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1523634579,"creation_date":1523634579,"answer_id":49820858,"question_id":6171663,"body_markdown":"In case anyone is still looking for the answer-\r\n\r\n 1. You can use ArrayUtils.indexOf() from the [Apache Commons Library][1].\r\n\r\n 2. If you are using Java 8 you can also use the Strean API:\r\n\r\n        public static int indexOf(int[] array, int valueToFind) {\r\n            if (array == null) {\r\n                return -1;\r\n            }\r\n            return IntStream.range(0, array.length)\r\n                    .filter(i -&gt; valueToFind == array[i])\r\n                    .findFirst()\r\n                    .orElse(-1);\r\n        }\r\n\r\n    \r\n      [1]: https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ArrayUtils.html#indexOf(int[],%20int)","title":"How to find the index of an element in an int array?","body":"<p>In case anyone is still looking for the answer-</p>\n\n<ol>\n<li><p>You can use ArrayUtils.indexOf() from the [Apache Commons Library][1].</p></li>\n<li><p>If you are using Java 8 you can also use the Strean API:</p>\n\n<pre><code>public static int indexOf(int[] array, int valueToFind) {\n    if (array == null) {\n        return -1;\n    }\n    return IntStream.range(0, array.length)\n            .filter(i -&gt; valueToFind == array[i])\n            .findFirst()\n            .orElse(-1);\n}\n</code></pre>\n\n<p>[1]: <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ArrayUtils.html#indexOf(int[],%20int)\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ArrayUtils.html#indexOf(int[],%20int)</a></p></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":2925007,"reputation":3574,"user_id":2506522,"accept_rate":23,"display_name":"betontalpfa"},"score":3,"creation_date":1526992986,"post_id":50467843,"comment_id":87949083,"body_markdown":"Duplicated answer.","body":"Duplicated answer."}],"tags":[],"owner":{"account_id":13625136,"reputation":1,"user_id":9828600,"display_name":"vani"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1526996567,"creation_date":1526992428,"answer_id":50467843,"question_id":6171663,"body_markdown":"    Integer[] array = {1, 2, 3, 4, 5, 6};\r\n    \r\n    for (int i = 0; i &lt; array.length; i++) {\r\n        if (array[i] == 4) {\r\n            system.out.println(i);\r\n            break;\r\n        }\r\n    }","title":"How to find the index of an element in an int array?","body":"<pre><code>Integer[] array = {1, 2, 3, 4, 5, 6};\n\nfor (int i = 0; i &lt; array.length; i++) {\n    if (array[i] == 4) {\n        system.out.println(i);\n        break;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":89872,"reputation":2406,"user_id":247684,"display_name":"Guillermo Garcia"},"score":0,"creation_date":1584002761,"post_id":52378010,"comment_id":107303235,"body_markdown":"Great! Thanks for sharing. It helps to learn about the new (optimized) built-in solutions within the language capabilities context.","body":"Great! Thanks for sharing. It helps to learn about the new (optimized) built-in solutions within the language capabilities context."},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":1,"creation_date":1612597199,"post_id":52378010,"comment_id":116821038,"body_markdown":"@Simplicity&#39;s_Strength Your edit was half correct, half incorrect.  Arrays do start at 0, but the [second parameter to `range` is exclusive](https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#range-int-int-).  Good catch on that first bug, though.","body":"@Simplicity&#39;s_Strength Your edit was half correct, half incorrect.  Arrays do start at 0, but the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#range-int-int-\" rel=\"nofollow noreferrer\">second parameter to <code>range</code> is exclusive</a>.  Good catch on that first bug, though."},{"owner":{"account_id":5283174,"reputation":803,"user_id":4217907,"display_name":"Simplicity&#39;s_Strength"},"score":0,"creation_date":1612779374,"post_id":52378010,"comment_id":116863525,"body_markdown":"@RyanM That explains the `java.util.NoSuchElementException` i&#39;ve had using this code.    Well played Sir","body":"@RyanM That explains the <code>java.util.NoSuchElementException</code> i&#39;ve had using this code.    Well played Sir"}],"tags":[],"owner":{"account_id":7167179,"reputation":6034,"user_id":5475941,"display_name":"Mohammad"},"comment_count":3,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1612597113,"creation_date":1537237294,"answer_id":52378010,"question_id":6171663,"body_markdown":"You can use modern Java to solve this problem. Please use the code below:\r\n\r\n    static int findIndexOf(int V, int[] arr) {\r\n        return IntStream.range(0, arr.length)\r\n                        .filter(i-&gt;arr[i]==V)\r\n                        .findFirst()\r\n                        .getAsInt();\r\n    }","title":"How to find the index of an element in an int array?","body":"<p>You can use modern Java to solve this problem. Please use the code below:</p>\n<pre><code>static int findIndexOf(int V, int[] arr) {\n    return IntStream.range(0, arr.length)\n                    .filter(i-&gt;arr[i]==V)\n                    .findFirst()\n                    .getAsInt();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1860439,"reputation":1,"user_id":1685113,"display_name":"Rahul9191"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1540203255,"creation_date":1540203255,"answer_id":52926928,"question_id":6171663,"body_markdown":"\tstatic int[] getIndex(int[] data, int number) {\r\n\t\tint[] positions = new int[data.length];\r\n\t\tif (data.length &gt; 0) {\r\n\t\t\tint counter = 0;\r\n\t\t\tfor(int i =0; i &lt; data.length; i++) {\r\n\t\t\t\tif(data[i] == number){\r\n\t\t\t\t\tpositions[counter] = i;\r\n\t\t\t\t\tcounter++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn positions;\r\n\t}","title":"How to find the index of an element in an int array?","body":"<pre><code>static int[] getIndex(int[] data, int number) {\n    int[] positions = new int[data.length];\n    if (data.length &gt; 0) {\n        int counter = 0;\n        for(int i =0; i &lt; data.length; i++) {\n            if(data[i] == number){\n                positions[counter] = i;\n                counter++;\n            }\n        }\n    }\n    return positions;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2575220,"reputation":3130,"user_id":2233069,"accept_rate":25,"display_name":"djdance"},"score":0,"creation_date":1597826616,"post_id":53855335,"comment_id":112257304,"body_markdown":"Note, array must be Integer[], not int[]. At least, indexOf() works only with Integer","body":"Note, array must be Integer[], not int[]. At least, indexOf() works only with Integer"}],"tags":[],"owner":{"account_id":5145207,"reputation":2728,"user_id":4121405,"accept_rate":0,"display_name":"alok"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1545236713,"creation_date":1545236713,"answer_id":53855335,"question_id":6171663,"body_markdown":"\t\tInteger[] arr = { 0, 1, 1, 2, 3, 5, 8, 13, 21 };\r\n\t\tList&lt;Integer&gt; arrlst = Arrays.asList(arr);\r\n\t\tSystem.out.println(arrlst.lastIndexOf(1));","title":"How to find the index of an element in an int array?","body":"<pre><code>    Integer[] arr = { 0, 1, 1, 2, 3, 5, 8, 13, 21 };\n    List&lt;Integer&gt; arrlst = Arrays.asList(arr);\n    System.out.println(arrlst.lastIndexOf(1));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2767646,"reputation":4657,"user_id":2382964,"accept_rate":67,"display_name":"Tushar Pandey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570269804,"creation_date":1570269804,"answer_id":58247247,"question_id":6171663,"body_markdown":"**Binary search:** Binary search can also be used to find the index of the array element in an array. But the binary search can only be used if the array is sorted. Java provides us with an inbuilt function which can be found in the Arrays library of Java which will rreturn the index if the element is present, else it returns -1. The complexity will be O(log n).\r\nBelow is the implementation of Binary search.\r\n\r\n    public static int findIndex(int arr[], int t) { \r\n       int index = Arrays.binarySearch(arr, t); \r\n       return (index &lt; 0) ? -1 : index; \r\n    } ","title":"How to find the index of an element in an int array?","body":"<p><strong>Binary search:</strong> Binary search can also be used to find the index of the array element in an array. But the binary search can only be used if the array is sorted. Java provides us with an inbuilt function which can be found in the Arrays library of Java which will rreturn the index if the element is present, else it returns -1. The complexity will be O(log n).\nBelow is the implementation of Binary search.</p>\n\n<pre><code>public static int findIndex(int arr[], int t) { \n   int index = Arrays.binarySearch(arr, t); \n   return (index &lt; 0) ? -1 : index; \n} \n</code></pre>\n"},{"comments":[{"owner":{"account_id":14688437,"reputation":5100,"user_id":10607772,"display_name":"double-beep"},"score":3,"creation_date":1576518307,"post_id":59361760,"comment_id":104917477,"body_markdown":"While this code may solve the question, [including an explanation](//meta.stackexchange.com/q/114762) of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please [edit] your answer to add explanations and give an indication of what limitations and assumptions apply.","body":"While this code may solve the question, <a href=\"//meta.stackexchange.com/q/114762\">including an explanation</a> of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please <a href=\"https://stackoverflow.com/posts/59361760/edit\">edit</a> your answer to add explanations and give an indication of what limitations and assumptions apply."},{"owner":{"account_id":2488135,"reputation":1051,"user_id":2166177,"accept_rate":67,"display_name":"steve"},"score":0,"creation_date":1701781951,"post_id":59361760,"comment_id":136815804,"body_markdown":"1) ArrayUtils.indexOf is what I&#39;m looking for. 2) I don&#39;t know what Ints is. 3) Why would I want to convert to a list just to find an index? The code is easy, but terribly inefficient.","body":"1) ArrayUtils.indexOf is what I&#39;m looking for. 2) I don&#39;t know what Ints is. 3) Why would I want to convert to a list just to find an index? The code is easy, but terribly inefficient."}],"tags":[],"owner":{"account_id":16633788,"reputation":99,"user_id":12021012,"display_name":"ashwini chaudhari"},"comment_count":2,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1576518272,"creation_date":1576518146,"answer_id":59361760,"question_id":6171663,"body_markdown":"    ArrayUtils.indexOf(array, value);\r\n    Ints.indexOf(array, value);\r\n    Arrays.asList(array).indexOf(value);","title":"How to find the index of an element in an int array?","body":"<pre><code>ArrayUtils.indexOf(array, value);\nInts.indexOf(array, value);\nArrays.asList(array).indexOf(value);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18431278,"reputation":75,"user_id":13426335,"display_name":"Rafał Pawłowski"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1592997198,"creation_date":1592997198,"answer_id":62553734,"question_id":6171663,"body_markdown":"The easiest way is to iterate. For example we want to find the minimum value of array and it&#39;s index:\r\n\r\n    public static Pair&lt;Integer, Integer&gt; getMinimumAndIndex(int[] array) {\r\n            int min = array[0];\r\n            int index = 0;\r\n            for (int i = 1; i &lt; array.length; i++) {\r\n                if (array[i] &lt; min) {\r\n                    min = array[i];\r\n                    index = i;\r\n                }\r\n    \r\n                return new Pair&lt;min, index&gt;;\r\n\r\nThis way you test all array values and if some of them is minimum you also know minimums index. \r\nIt can work the same with searching some value:\r\n\r\n    public static int indexOfNumber(int[] array) {\r\n            int index = 0;\r\n            for (int i = 0; i &lt; array.length; i++) {\r\n                if (array[i] == 77) {        // here you pass some value for example 77\r\n                    index = i;\r\n                }\r\n            }\r\n            return index;\r\n        }","title":"How to find the index of an element in an int array?","body":"<p>The easiest way is to iterate. For example we want to find the minimum value of array and it's index:</p>\n<pre><code>public static Pair&lt;Integer, Integer&gt; getMinimumAndIndex(int[] array) {\n        int min = array[0];\n        int index = 0;\n        for (int i = 1; i &lt; array.length; i++) {\n            if (array[i] &lt; min) {\n                min = array[i];\n                index = i;\n            }\n\n            return new Pair&lt;min, index&gt;;\n</code></pre>\n<p>This way you test all array values and if some of them is minimum you also know minimums index.\nIt can work the same with searching some value:</p>\n<pre><code>public static int indexOfNumber(int[] array) {\n        int index = 0;\n        for (int i = 0; i &lt; array.length; i++) {\n            if (array[i] == 77) {        // here you pass some value for example 77\n                index = i;\n            }\n        }\n        return index;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17940452,"reputation":383,"user_id":16946039,"display_name":"Hugo Vinhal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667061186,"creation_date":1664487482,"answer_id":73901889,"question_id":6171663,"body_markdown":"I see a lot of solutions here that are not working. The most upvoted solution used an array of **Integer**, instead of offering a solution to an **int** array. It is as simple as this:\r\n\r\n    Arrays.stream(yourArray).boxed().toList().indexOf(number)","title":"How to find the index of an element in an int array?","body":"<p>I see a lot of solutions here that are not working. The most upvoted solution used an array of <strong>Integer</strong>, instead of offering a solution to an <strong>int</strong> array. It is as simple as this:</p>\n<pre><code>Arrays.stream(yourArray).boxed().toList().indexOf(number)\n</code></pre>\n"}],"owner":{"account_id":761513,"reputation":981,"user_id":775629,"display_name":"Jeomark"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":618821,"favorite_count":0,"down_vote_count":0,"up_vote_count":98,"answer_count":19,"score":98,"last_activity_date":1697137514,"creation_date":1306720501,"question_id":6171663,"body_markdown":"How can I find an index of a certain value in a Java array of type `int`?\r\n\r\nI tried using `Arrays.binarySearch` on my unsorted array, it only sometimes gives the correct answer.","title":"How to find the index of an element in an int array?","body":"<p>How can I find an index of a certain value in a Java array of type <code>int</code>?</p>\n\n<p>I tried using <code>Arrays.binarySearch</code> on my unsorted array, it only sometimes gives the correct answer.</p>\n"},{"tags":["java","spring","tomcat","spring-boot"],"comments":[{"owner":{"account_id":7513612,"reputation":1945,"user_id":5707795,"accept_rate":48,"display_name":"Pradeep"},"score":0,"creation_date":1507822134,"post_id":46713392,"comment_id":80373289,"body_markdown":"Hello can you paste your MainClass as well","body":"Hello can you paste your MainClass as well"},{"owner":{"account_id":6964901,"reputation":10403,"user_id":5343269,"accept_rate":45,"display_name":"11thdimension"},"score":0,"creation_date":1507823158,"post_id":46713392,"comment_id":80373968,"body_markdown":"`compile fileTree(dir:&quot;lib&quot;, include:&quot;*.jar&quot;)` what is this part for?","body":"<code>compile fileTree(dir:&quot;lib&quot;, include:&quot;*.jar&quot;)</code> what is this part for?"},{"owner":{"account_id":2000492,"reputation":795,"user_id":1791669,"accept_rate":27,"display_name":"Manisha "},"score":0,"creation_date":1507824423,"post_id":46713392,"comment_id":80374711,"body_markdown":"@11thdimension there are some external jar files in lib dir which i need to include in my project. Hence the dependency","body":"@11thdimension there are some external jar files in lib dir which i need to include in my project. Hence the dependency"},{"owner":{"account_id":11175092,"reputation":45706,"user_id":8200937,"display_name":"glytching"},"score":0,"creation_date":1507824860,"post_id":46713392,"comment_id":80374948,"body_markdown":"@Manisha are there multiple versions of `servlet-api.jar` on the application&#39;s runtime classpath?","body":"@Manisha are there multiple versions of <code>servlet-api.jar</code> on the application&#39;s runtime classpath?"},{"owner":{"account_id":6964901,"reputation":10403,"user_id":5343269,"accept_rate":45,"display_name":"11thdimension"},"score":0,"creation_date":1507825629,"post_id":46713392,"comment_id":80375398,"body_markdown":"Most likely there&#39;s some `servlet-api ` Jar in the external dependencies which is conflicting with tomcat&#39;s version of `servlet-api`","body":"Most likely there&#39;s some <code>servlet-api </code> Jar in the external dependencies which is conflicting with tomcat&#39;s version of <code>servlet-api</code>"},{"owner":{"account_id":3015538,"reputation":4229,"user_id":2557818,"accept_rate":82,"display_name":"Raja Anbazhagan"},"score":0,"creation_date":1582100183,"post_id":46713392,"comment_id":106655991,"body_markdown":"If you are creating a war file, then you should have marked embedded tomcat as provided. I have written a blog on this sometime back. https://springhow.com/convert-spring-boot-jar-in-to-war/","body":"If you are creating a war file, then you should have marked embedded tomcat as provided. I have written a blog on this sometime back. <a href=\"https://springhow.com/convert-spring-boot-jar-in-to-war/\" rel=\"nofollow noreferrer\">springhow.com/convert-spring-boot-jar-in-to-war</a>"}],"answers":[{"tags":[],"owner":{"account_id":2293754,"reputation":226,"user_id":2015795,"accept_rate":59,"display_name":"Neero"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507827231,"creation_date":1507827231,"answer_id":46715050,"question_id":46713392,"body_markdown":"Im not able to comment. So If you are using embedded tomcat you dont need the Tomcat dependency (spring-boot-starter-tomcat) as it is already inbuilt with &quot;spring-boot-starter-web&quot;. Try removing this dependency.","title":"Unable to start embedded tomcat Spring boot","body":"<p>Im not able to comment. So If you are using embedded tomcat you dont need the Tomcat dependency (spring-boot-starter-tomcat) as it is already inbuilt with \"spring-boot-starter-web\". Try removing this dependency.</p>\n"},{"tags":[],"owner":{"account_id":4700821,"reputation":3,"user_id":3804412,"display_name":"MaXi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509621490,"creation_date":1509621490,"answer_id":47074006,"question_id":46713392,"body_markdown":"I had the same problem, solved it by changing of ports.\r\n\r\nWhen I run application as Spring Application, I used normally ports 9000 and 9001 for management, but when I tried to run it on Tomcat, it failed with the same exception you posted. Changing both ports in application.properties to 8080 solved the problem.","title":"Unable to start embedded tomcat Spring boot","body":"<p>I had the same problem, solved it by changing of ports.</p>\n\n<p>When I run application as Spring Application, I used normally ports 9000 and 9001 for management, but when I tried to run it on Tomcat, it failed with the same exception you posted. Changing both ports in application.properties to 8080 solved the problem.</p>\n"},{"tags":[],"owner":{"account_id":7565436,"reputation":1179,"user_id":5741227,"accept_rate":86,"display_name":"iamjoshua"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1558425490,"creation_date":1558425490,"answer_id":56233725,"question_id":46713392,"body_markdown":"In my case, I was running this command\r\n\r\n    mvn spring-boot:run -Dmaven.tomcat.port=8081 -Dspring.config.location=file:[Project Root Dir]\\src\\main\\resources -Dspring.profiles.active=dev -DskipTests &gt; log.log\r\n\r\nTurns out I just forgot to add the backslash at the end of\r\n\r\n    \\src\\main\\resources\r\n\r\nhence it can&#39;t find the configuration files.\r\n\r\nThe Fix for me is just that, so I now have the following code.\r\n\r\n    mvn spring-boot:run -Dmaven.tomcat.port=8081 -Dspring.config.location=file:[Project Root Dir]\\src\\main\\resources\\ -Dspring.profiles.active=dev -DskipTests &gt; log.log","title":"Unable to start embedded tomcat Spring boot","body":"<p>In my case, I was running this command</p>\n\n<pre><code>mvn spring-boot:run -Dmaven.tomcat.port=8081 -Dspring.config.location=file:[Project Root Dir]\\src\\main\\resources -Dspring.profiles.active=dev -DskipTests &gt; log.log\n</code></pre>\n\n<p>Turns out I just forgot to add the backslash at the end of</p>\n\n<pre><code>\\src\\main\\resources\n</code></pre>\n\n<p>hence it can't find the configuration files.</p>\n\n<p>The Fix for me is just that, so I now have the following code.</p>\n\n<pre><code>mvn spring-boot:run -Dmaven.tomcat.port=8081 -Dspring.config.location=file:[Project Root Dir]\\src\\main\\resources\\ -Dspring.profiles.active=dev -DskipTests &gt; log.log\n</code></pre>\n"}],"owner":{"account_id":2000492,"reputation":795,"user_id":1791669,"accept_rate":27,"display_name":"Manisha "},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15782,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1697137465,"creation_date":1507821866,"question_id":46713392,"body_markdown":"I&#39;m working on Spring Boot Gradle application. My app is throwing error when i try to run it as a war by doing booRun. The error says : Unable to start embedded tomcat.\r\nThe contents of build.gradle file :\r\n\r\n        group &#39;com.example&#39;\r\n        version &#39;1.0-SNAPSHOT&#39;\r\n    \r\n    \r\n    \r\n    bootRepackage {\r\n        mainClass = &#39;com.ex.MainClass&#39;\r\n    }\r\n    \r\n    \r\n    apply plugin: &#39;war&#39;\r\n    apply plugin: &#39;propdeps&#39;\r\n    \r\n    war {\r\n        baseName = &#39;abc&#39;\r\n        archiveName &#39;abc.war&#39;\r\n    \r\n    }\r\n    \r\n    repositories{\r\n    //    mavenLocal()\r\n        mavenCentral()\r\n    }\r\n    \r\n    \r\n    dependencies {\r\n    \r\n            compile(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\r\n            compile(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\r\n            compile(&quot;io.springfox:springfox-swagger2:2.7.0&quot;)\r\n            compile(&quot;io.springfox:springfox-swagger-ui:2.7.0&quot;)\r\n            compile fileTree(dir:&quot;lib&quot;, include:&quot;*.jar&quot;)\r\n            compile(&#39;org.springframework.boot:spring-boot-starter-mail&#39;)\r\n            optional(&quot;org.springframework.boot:spring-boot-configuration-processor&quot;)\r\n            compile(&quot;org.springframework.boot:spring-boot-starter-tomcat&quot;)\r\n            compile &quot;io.springfox:springfox-swagger2:2.7.0&quot;\r\n            compile &#39;io.springfox:springfox-swagger-ui:2.7.0&#39;\r\n            compile(&quot;org.springframework.boot:spring-boot-starter-amqp&quot;)\r\n        }\r\n    \r\n       compileJava.dependsOn(processResources)\r\n\r\nThe whole stack trace is given below :\r\n\r\n\r\n    org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:137) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:536) ~[spring-context-4.3.8.RELEASE.jar:4.3.8.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:370) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:314) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1162) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1151) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat com.ex.MainClass.main(MainClass.java:38) [main/:na]\r\n    Caused by: org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\r\n    \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.initialize(TomcatEmbeddedServletContainer.java:123) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.&lt;init&gt;(TomcatEmbeddedServletContainer.java:84) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getTomcatEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:554) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:179) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.createEmbeddedServletContainer(EmbeddedWebApplicationContext.java:164) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:134) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \t... 8 common frames omitted\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardServer[-1]]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \tat org.apache.catalina.startup.Tomcat.start(Tomcat.java:344) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.initialize(TomcatEmbeddedServletContainer.java:99) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \t... 13 common frames omitted\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Tomcat]]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:793) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \t... 15 common frames omitted\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat]]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:422) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \t... 17 common frames omitted\r\n    Caused by: org.apache.catalina.LifecycleException: A child container failed during start\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:947) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:262) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \t... 19 common frames omitted\r\n    \r\n    bootRun FAILED\r\n\r\nEDIT : Adding Main Class definition:\r\n\r\n    @SpringBootApplication\r\n    @EnableAsync\r\n    @EnableCaching\r\n    @EnableScheduling\r\n    public class MainClass extends SpringBootServletInitializer {\r\n    \r\n        public static final Logger logger = LoggerFactory.getLogger(MainClass.class);\r\n    \r\n        @Override\r\n        protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n            return application.sources(MainClass.class);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(MainClass.class, args);\r\n    \r\n        }\r\n    }\r\n\r\n\r\nCan anybody please tell me why my app fails to start on embedded tomcat?\r\n\r\nThanks\r\n\r\n\r\n\r\n\r\n\r\n","title":"Unable to start embedded tomcat Spring boot","body":"<p>I'm working on Spring Boot Gradle application. My app is throwing error when i try to run it as a war by doing booRun. The error says : Unable to start embedded tomcat.\nThe contents of build.gradle file :</p>\n\n<pre><code>    group 'com.example'\n    version '1.0-SNAPSHOT'\n\n\n\nbootRepackage {\n    mainClass = 'com.ex.MainClass'\n}\n\n\napply plugin: 'war'\napply plugin: 'propdeps'\n\nwar {\n    baseName = 'abc'\n    archiveName 'abc.war'\n\n}\n\nrepositories{\n//    mavenLocal()\n    mavenCentral()\n}\n\n\ndependencies {\n\n        compile(\"org.springframework.boot:spring-boot-starter-web\")\n        compile(\"org.springframework.boot:spring-boot-starter-data-jpa\")\n        compile(\"io.springfox:springfox-swagger2:2.7.0\")\n        compile(\"io.springfox:springfox-swagger-ui:2.7.0\")\n        compile fileTree(dir:\"lib\", include:\"*.jar\")\n        compile('org.springframework.boot:spring-boot-starter-mail')\n        optional(\"org.springframework.boot:spring-boot-configuration-processor\")\n        compile(\"org.springframework.boot:spring-boot-starter-tomcat\")\n        compile \"io.springfox:springfox-swagger2:2.7.0\"\n        compile 'io.springfox:springfox-swagger-ui:2.7.0'\n        compile(\"org.springframework.boot:spring-boot-starter-amqp\")\n    }\n\n   compileJava.dependsOn(processResources)\n</code></pre>\n\n<p>The whole stack trace is given below :</p>\n\n<pre><code>org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:137) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:536) ~[spring-context-4.3.8.RELEASE.jar:4.3.8.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:370) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:314) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1162) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1151) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at com.ex.MainClass.main(MainClass.java:38) [main/:na]\nCaused by: org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.initialize(TomcatEmbeddedServletContainer.java:123) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.&lt;init&gt;(TomcatEmbeddedServletContainer.java:84) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getTomcatEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:554) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:179) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.createEmbeddedServletContainer(EmbeddedWebApplicationContext.java:164) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:134) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    ... 8 common frames omitted\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardServer[-1]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    at org.apache.catalina.startup.Tomcat.start(Tomcat.java:344) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.initialize(TomcatEmbeddedServletContainer.java:99) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    ... 13 common frames omitted\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Tomcat]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:793) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    ... 15 common frames omitted\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:422) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    ... 17 common frames omitted\nCaused by: org.apache.catalina.LifecycleException: A child container failed during start\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:947) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:262) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    ... 19 common frames omitted\n\nbootRun FAILED\n</code></pre>\n\n<p>EDIT : Adding Main Class definition:</p>\n\n<pre><code>@SpringBootApplication\n@EnableAsync\n@EnableCaching\n@EnableScheduling\npublic class MainClass extends SpringBootServletInitializer {\n\n    public static final Logger logger = LoggerFactory.getLogger(MainClass.class);\n\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        return application.sources(MainClass.class);\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(MainClass.class, args);\n\n    }\n}\n</code></pre>\n\n<p>Can anybody please tell me why my app fails to start on embedded tomcat?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","spring-boot","spring-webflux","project-reactor","reactor-netty"],"comments":[{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1697146615,"post_id":77282801,"comment_id":136246853,"body_markdown":"Why do you use a sink to process the data? I&#39;m not sure it&#39;s the cause of the unit test problem, but it&#39;s definitely a wrong way to use Reactor","body":"Why do you use a sink to process the data? I&#39;m not sure it&#39;s the cause of the unit test problem, but it&#39;s definitely a wrong way to use Reactor"},{"owner":{"account_id":10594606,"reputation":3598,"user_id":7803797,"display_name":"Chaitanya"},"score":0,"creation_date":1697181950,"post_id":77282801,"comment_id":136250127,"body_markdown":"I have this `connectToWebSocketAndParseMessages ` called from multiple places and I tried to extract it to a class from where I could use this. Hence in an effort to make it generic, I introduced a `sink`. Could you please point out to me the correct way to read from a websocket ? Thanks","body":"I have this <code>connectToWebSocketAndParseMessages </code> called from multiple places and I tried to extract it to a class from where I could use this. Hence in an effort to make it generic, I introduced a <code>sink</code>. Could you please point out to me the correct way to read from a websocket ? Thanks"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1697226348,"post_id":77282801,"comment_id":136258308,"body_markdown":"Ah, sorry, I missed that. Now I see what you&#39;re trying to do.","body":"Ah, sorry, I missed that. Now I see what you&#39;re trying to do."}],"owner":{"account_id":10594606,"reputation":3598,"user_id":7803797,"display_name":"Chaitanya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697137421,"creation_date":1697132902,"question_id":77282801,"body_markdown":"In my Java Spring boot application, I am using reactive libraries to connect and stream from a websocket. I have the following dependencies in my `pom.xml` file\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\r\n            &lt;artifactId&gt;reactor-test&lt;/artifactId&gt;\r\n            &lt;version&gt;3.4.8&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nMy production code to open a websocket connection looks like \r\n\r\n```\r\n@Autowired private ReactorNettyWebSocketClient client;\r\n\r\n public &lt;T&gt; Flux&lt;T&gt; connectToWebSocketAndParseMessages(\r\n      String websocketUrl, Function&lt;String, T&gt; deserializer) {\r\n    return Flux.create(\r\n        sink -&gt; {\r\n          try {\r\n            client\r\n                .execute(new URI(websocketUrl), getWebSocketHandler(deserializer, sink))\r\n                .retryWhen(getRetrySpec())\r\n                .subscribe(); // Subscribe to start the WebSocket connection\r\n          } catch (URISyntaxException e) {\r\n            sink.error(e);\r\n          }\r\n        });\r\n  }\r\n\r\n  @NotNull\r\n  private &lt;T&gt; WebSocketHandler getWebSocketHandler(\r\n      Function&lt;String, T&gt; deserializer, FluxSink&lt;T&gt; sink) {\r\n    return session -&gt; {\r\n      Flux&lt;WebSocketMessage&gt; messageFlux = session.receive();\r\n      return messageFlux\r\n          .map(\r\n              message -&gt; {\r\n                String messagePayload = message.getPayloadAsText();\r\n                try {\r\n                  T model = deserializer.apply(messagePayload);\r\n                  sink.next(model); // Emit the parsed model\r\n                } catch (Exception e) {\r\n                  sink.error(e); // Handle parsing errors by signaling an error\r\n                }\r\n                return messagePayload;\r\n              })\r\n          .then();\r\n    };\r\n  }\r\n```\r\n\r\nNow, I am trying to unit test the method `connectToWebSocketAndParseMessages` and for this, I mock the `ReactorNettyWebSocketClient` and the session created by the client. My test case looks like\r\n\r\n```\r\n@SpringBootTest\r\n@TestPropertySource(locations = &quot;classpath:test.properties&quot;)\r\nclass WebSocketGatewayTest {\r\n\r\n  @Autowired private WebSocketGateway webSocketGateway;\r\n\r\n  @MockBean private ReactorNettyWebSocketClient mockClient;\r\n\r\n  @Test\r\n  public void testConnectToWebSocketAndParseMessages1() {\r\n    // Given\r\n    Function&lt;String, Integer&gt; deserializer = Integer::parseInt;\r\n    String websocketUrl = &quot;ws://example.com&quot;;\r\n    WebSocketSession session = mock(WebSocketSession.class);\r\n    WebSocketMessage message1 = mock(WebSocketMessage.class);\r\n    WebSocketMessage message2 = mock(WebSocketMessage.class);\r\n\r\n    when(mockClient.execute(any(URI.class), any()))\r\n        .thenReturn(Flux.just(session).then())\r\n        .thenAnswer(\r\n            invocation -&gt; {\r\n              WebSocketHandler handler = invocation.getArgument(1);\r\n              handler.handle(session); // Simulate WebSocket session handling\r\n              return Mono.empty();\r\n            });\r\n\r\n    when(session.receive()).thenReturn(Flux.just(message1, message2));\r\n    when(message1.getPayloadAsText()).thenReturn(&quot;42&quot;);\r\n    when(message2.getPayloadAsText()).thenReturn(&quot;100&quot;);\r\n\r\n    // When\r\n    Flux&lt;Integer&gt; result =\r\n        webSocketGateway.connectToWebSocketAndParseMessages(websocketUrl, deserializer);\r\n\r\n    // Then\r\n    StepVerifier.create(result).expectNext(42).expectNext(100).expectComplete().verify();\r\n  }\r\n// remaining tests\r\n```\r\n\r\nNow, once the test runs, it does not complete and keeps on waiting for the message to be received from the websocket. The mock `when(mockClient.execute(any(URI.class), any()))` somehow does not send any message to the websocket and this causes the test to not complete. \r\n\r\nAny ideas here as to how this test can be modified to test the behaviour of reactive websocket connection. Thanks","title":"Unable to send Flux messages to the mock ReactorNettyWebSocketClient","body":"<p>In my Java Spring boot application, I am using reactive libraries to connect and stream from a websocket. I have the following dependencies in my <code>pom.xml</code> file</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n            &lt;version&gt;3.1.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\n            &lt;version&gt;3.1.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\n            &lt;artifactId&gt;reactor-test&lt;/artifactId&gt;\n            &lt;version&gt;3.4.8&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>My production code to open a websocket connection looks like</p>\n<pre><code>@Autowired private ReactorNettyWebSocketClient client;\n\n public &lt;T&gt; Flux&lt;T&gt; connectToWebSocketAndParseMessages(\n      String websocketUrl, Function&lt;String, T&gt; deserializer) {\n    return Flux.create(\n        sink -&gt; {\n          try {\n            client\n                .execute(new URI(websocketUrl), getWebSocketHandler(deserializer, sink))\n                .retryWhen(getRetrySpec())\n                .subscribe(); // Subscribe to start the WebSocket connection\n          } catch (URISyntaxException e) {\n            sink.error(e);\n          }\n        });\n  }\n\n  @NotNull\n  private &lt;T&gt; WebSocketHandler getWebSocketHandler(\n      Function&lt;String, T&gt; deserializer, FluxSink&lt;T&gt; sink) {\n    return session -&gt; {\n      Flux&lt;WebSocketMessage&gt; messageFlux = session.receive();\n      return messageFlux\n          .map(\n              message -&gt; {\n                String messagePayload = message.getPayloadAsText();\n                try {\n                  T model = deserializer.apply(messagePayload);\n                  sink.next(model); // Emit the parsed model\n                } catch (Exception e) {\n                  sink.error(e); // Handle parsing errors by signaling an error\n                }\n                return messagePayload;\n              })\n          .then();\n    };\n  }\n</code></pre>\n<p>Now, I am trying to unit test the method <code>connectToWebSocketAndParseMessages</code> and for this, I mock the <code>ReactorNettyWebSocketClient</code> and the session created by the client. My test case looks like</p>\n<pre><code>@SpringBootTest\n@TestPropertySource(locations = &quot;classpath:test.properties&quot;)\nclass WebSocketGatewayTest {\n\n  @Autowired private WebSocketGateway webSocketGateway;\n\n  @MockBean private ReactorNettyWebSocketClient mockClient;\n\n  @Test\n  public void testConnectToWebSocketAndParseMessages1() {\n    // Given\n    Function&lt;String, Integer&gt; deserializer = Integer::parseInt;\n    String websocketUrl = &quot;ws://example.com&quot;;\n    WebSocketSession session = mock(WebSocketSession.class);\n    WebSocketMessage message1 = mock(WebSocketMessage.class);\n    WebSocketMessage message2 = mock(WebSocketMessage.class);\n\n    when(mockClient.execute(any(URI.class), any()))\n        .thenReturn(Flux.just(session).then())\n        .thenAnswer(\n            invocation -&gt; {\n              WebSocketHandler handler = invocation.getArgument(1);\n              handler.handle(session); // Simulate WebSocket session handling\n              return Mono.empty();\n            });\n\n    when(session.receive()).thenReturn(Flux.just(message1, message2));\n    when(message1.getPayloadAsText()).thenReturn(&quot;42&quot;);\n    when(message2.getPayloadAsText()).thenReturn(&quot;100&quot;);\n\n    // When\n    Flux&lt;Integer&gt; result =\n        webSocketGateway.connectToWebSocketAndParseMessages(websocketUrl, deserializer);\n\n    // Then\n    StepVerifier.create(result).expectNext(42).expectNext(100).expectComplete().verify();\n  }\n// remaining tests\n</code></pre>\n<p>Now, once the test runs, it does not complete and keeps on waiting for the message to be received from the websocket. The mock <code>when(mockClient.execute(any(URI.class), any()))</code> somehow does not send any message to the websocket and this causes the test to not complete.</p>\n<p>Any ideas here as to how this test can be modified to test the behaviour of reactive websocket connection. Thanks</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":14423201,"reputation":840,"user_id":10418725,"display_name":"Jorn Rigter"},"score":0,"creation_date":1697181324,"post_id":77283158,"comment_id":136250036,"body_markdown":"Could you post your entire XML layout? This seems to only be a part of it. Also, [ConstraintLayout might help you](https://developer.android.com/develop/ui/views/layout/constraint-layout)","body":"Could you post your entire XML layout? This seems to only be a part of it. Also, <a href=\"https://developer.android.com/develop/ui/views/layout/constraint-layout\" rel=\"nofollow noreferrer\">ConstraintLayout might help you</a>"}],"owner":{"account_id":8616330,"reputation":25,"user_id":6453020,"display_name":"user6453020"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1697136752,"creation_date":1697136752,"question_id":77283158,"body_markdown":"Please look image below i need to place a textview right of a checkbox.\r\nBut i want to be continue below checkbox when textview has two lines.\r\n\r\n    &lt;RelativeLayout\r\n        android:layout_marginLeft=&quot;5dp&quot;\r\n        android:orientation=&quot;horizontal&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_width=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;androidx.appcompat.widget.AppCompatCheckBox\r\n            android:focusable=&quot;false&quot;\r\n            android:focusableInTouchMode=&quot;false&quot;\r\n            android:layout_width=&quot;30dp&quot;\r\n            android:layout_height=&quot;30dp&quot;\r\n            android:id=&quot;@+id/txtExtrasCheckBox2&quot;\r\n            android:textSize=&quot;22sp&quot;/&gt;\r\n        \r\n    \r\n        &lt;androidx.appcompat.widget.AppCompatTextView\r\n            android:layout_marginLeft=&quot;35dp&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:text=&quot;Εξτρα&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:id=&quot;@+id/txtExtrasName2&quot;\r\n            android:textSize=&quot;22sp&quot;/&gt;\r\n       \r\n    &lt;/RelativeLayout&gt;\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cFSu7.png","title":"Add margin only in first line using xml","body":"<p>Please look image below i need to place a textview right of a checkbox.\nBut i want to be continue below checkbox when textview has two lines.</p>\n<pre><code>&lt;RelativeLayout\n    android:layout_marginLeft=&quot;5dp&quot;\n    android:orientation=&quot;horizontal&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_width=&quot;match_parent&quot;&gt;\n\n    &lt;androidx.appcompat.widget.AppCompatCheckBox\n        android:focusable=&quot;false&quot;\n        android:focusableInTouchMode=&quot;false&quot;\n        android:layout_width=&quot;30dp&quot;\n        android:layout_height=&quot;30dp&quot;\n        android:id=&quot;@+id/txtExtrasCheckBox2&quot;\n        android:textSize=&quot;22sp&quot;/&gt;\n    \n\n    &lt;androidx.appcompat.widget.AppCompatTextView\n        android:layout_marginLeft=&quot;35dp&quot;\n        android:layout_weight=&quot;1&quot;\n        android:text=&quot;Εξτρα&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/txtExtrasName2&quot;\n        android:textSize=&quot;22sp&quot;/&gt;\n   \n&lt;/RelativeLayout&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/cFSu7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cFSu7.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","swagger"],"owner":{"account_id":10118761,"reputation":11,"user_id":7476497,"display_name":"Emerson Diego"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697136286,"creation_date":1697115997,"question_id":77280870,"body_markdown":"I recently migrated a Jakarta EE project to Swagger 3 and added the following dependencies:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.swagger.core.v3&lt;/groupId&gt;\r\n    &lt;artifactId&gt;swagger-jaxrs2-jakarta&lt;/artifactId&gt;\r\n    &lt;version&gt;2.2.15&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.swagger.core.v3&lt;/groupId&gt;\r\n    &lt;artifactId&gt;swagger-annotations-jakarta&lt;/artifactId&gt;\r\n    &lt;version&gt;2.2.15&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI&#39;m facing two issues:\r\n\r\nLarge JSON Responses: When the JSON response from an endpoint is too large, Swagger UI shows the error &quot;Could not render responses_Responses, see the console.&quot; This issue was not present in previous versions. Has anyone encountered this and knows a fix?\r\n\r\nUnwanted &quot;job-id&quot; Endpoints: Alongside the documentation for my actual endpoints, Swagger is also generating documentation for some mysterious &quot;job-id&quot; endpoints (GET, POST, DELETE). I have no idea where these are coming from. Has anyone else experienced this?\r\n\r\nAny help would be greatly appreciated!","title":"Swagger 3: Issues with Large JSON Responses and Unwanted &quot;job-id&quot; Endpoints","body":"<p>I recently migrated a Jakarta EE project to Swagger 3 and added the following dependencies:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.swagger.core.v3&lt;/groupId&gt;\n    &lt;artifactId&gt;swagger-jaxrs2-jakarta&lt;/artifactId&gt;\n    &lt;version&gt;2.2.15&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;io.swagger.core.v3&lt;/groupId&gt;\n    &lt;artifactId&gt;swagger-annotations-jakarta&lt;/artifactId&gt;\n    &lt;version&gt;2.2.15&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I'm facing two issues:</p>\n<p>Large JSON Responses: When the JSON response from an endpoint is too large, Swagger UI shows the error &quot;Could not render responses_Responses, see the console.&quot; This issue was not present in previous versions. Has anyone encountered this and knows a fix?</p>\n<p>Unwanted &quot;job-id&quot; Endpoints: Alongside the documentation for my actual endpoints, Swagger is also generating documentation for some mysterious &quot;job-id&quot; endpoints (GET, POST, DELETE). I have no idea where these are coming from. Has anyone else experienced this?</p>\n<p>Any help would be greatly appreciated!</p>\n"},{"tags":["java","android","custom-keyboard","ime"],"comments":[{"owner":{"account_id":13180915,"reputation":1094,"user_id":9520315,"display_name":"Sujal Kumar"},"score":0,"creation_date":1697349006,"post_id":77279389,"comment_id":136267208,"body_markdown":"What were the ways you have explored so far?","body":"What were the ways you have explored so far?"}],"owner":{"account_id":10963430,"reputation":11,"user_id":8055951,"display_name":"Hamid AK"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1697135472,"creation_date":1697103165,"question_id":77279389,"body_markdown":"I&#39;m building android keyboard application and I want to support modern emojis on the app.\r\nIs there is a library or a simple way to implement emojis with android [KeyboardView](https://developer.android.com/reference/android/inputmethodservice/KeyboardView)\r\n\r\nI&#39;ve tried some ways to implement modern emojis, but I did not find any library to do that","title":"Support modern emojis in a custom android keyboard","body":"<p>I'm building android keyboard application and I want to support modern emojis on the app.\nIs there is a library or a simple way to implement emojis with android <a href=\"https://developer.android.com/reference/android/inputmethodservice/KeyboardView\" rel=\"nofollow noreferrer\">KeyboardView</a></p>\n<p>I've tried some ways to implement modern emojis, but I did not find any library to do that</p>\n"},{"tags":["java","email","jakarta-mail"],"comments":[{"owner":{"account_id":73773,"reputation":11214,"user_id":212275,"display_name":"ZoogieZork"},"score":1,"creation_date":1414434064,"post_id":26594097,"comment_id":41803064,"body_markdown":"To be clear, have you followed the instructions in the link and generated an app-specific password?  i.e., are you getting the error even with an app-specific password?","body":"To be clear, have you followed the instructions in the link and generated an app-specific password?  i.e., are you getting the error even with an app-specific password?"},{"owner":{"account_id":15988,"reputation":872908,"user_id":34397,"accept_rate":87,"display_name":"SLaks"},"score":1,"creation_date":1414434086,"post_id":26594097,"comment_id":41803075,"body_markdown":"Did you read that page?","body":"Did you read that page?"},{"owner":{"account_id":431861,"reputation":430,"user_id":816203,"accept_rate":71,"display_name":"davidjmcclelland"},"score":0,"creation_date":1422735328,"post_id":26594097,"comment_id":44870314,"body_markdown":"On some systems the link to the helpful URL listed above gets munged. That is what led me here- so this is still a helpful question in that context.","body":"On some systems the link to the helpful URL listed above gets munged. That is what led me here- so this is still a helpful question in that context."}],"answers":[{"tags":[],"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1414434143,"creation_date":1414434143,"answer_id":26594244,"question_id":26594097,"body_markdown":"The error message and KB article seems to be quite correct: you need to use an application password for Google Mail server. You can create those throw-away passwords on the Account page of google.","title":"JavaMail Exception javax.mail.AuthenticationFailedException 534-5.7.9 Application-specific password required","body":"<p>The error message and KB article seems to be quite correct: you need to use an application password for Google Mail server. You can create those throw-away passwords on the Account page of google.</p>\n"},{"tags":[],"owner":{"account_id":55539,"reputation":160139,"user_id":166339,"display_name":"Asaph"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1414434204,"creation_date":1414434204,"answer_id":26594262,"question_id":26594097,"body_markdown":"You&#39;re probably trying to send mail through a gmail account in which you&#39;ve enabled 2-factor authentication. A 6-digit authentication token sent to your mobile device as an SMS message or generated through the Google Authenticator app is required to proceed. Alternatively, you can generate app-specific passwords through Google&#39;s web based ui and use that instead when accessing the mail account through your java code. The [link you included][1] in your question walks you through the process.\r\n\r\n\r\n  [1]: http://support.google.com/accounts/bin/answer.py?answer=185833","title":"JavaMail Exception javax.mail.AuthenticationFailedException 534-5.7.9 Application-specific password required","body":"<p>You're probably trying to send mail through a gmail account in which you've enabled 2-factor authentication. A 6-digit authentication token sent to your mobile device as an SMS message or generated through the Google Authenticator app is required to proceed. Alternatively, you can generate app-specific passwords through Google's web based ui and use that instead when accessing the mail account through your java code. The <a href=\"http://support.google.com/accounts/bin/answer.py?answer=185833\" rel=\"nofollow\">link you included</a> in your question walks you through the process.</p>\n"},{"comments":[{"owner":{"account_id":5239392,"reputation":305,"user_id":4186971,"accept_rate":80,"display_name":"Sudhansu Sekhar Nayak"},"score":0,"creation_date":1414434942,"post_id":26594268,"comment_id":41803542,"body_markdown":"Thank You very much for your valuable information.My Problem Solved  mail sent successfully.Thanks Mr.Saket for your quick reply.Thanks","body":"Thank You very much for your valuable information.My Problem Solved  mail sent successfully.Thanks Mr.Saket for your quick reply.Thanks"},{"owner":{"account_id":1469277,"reputation":2289,"user_id":1381241,"accept_rate":80,"display_name":"Sumit"},"score":0,"creation_date":1561158410,"post_id":26594268,"comment_id":99985637,"body_markdown":"Thanks! had been looking for this since last 1 hour!!","body":"Thanks! had been looking for this since last 1 hour!!"}],"tags":[],"owner":{"account_id":1273842,"reputation":3099,"user_id":1229509,"accept_rate":69,"display_name":"Saket"},"comment_count":2,"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1414434240,"creation_date":1414434240,"answer_id":26594268,"question_id":26594097,"body_markdown":"You have enabled [Two phase authentication](https://support.google.com/accounts/answer/180744) for your Google account and as a result applications will not be able to login to your Google account using the actual password. Google expects you to generate a application specific password for each application you use (and give it a name) and then use that password to login to your Google account from your application. This allows you to not give your password to third party application when you have 2-step authentication enabled.\r\n\r\nThe alternate way is for your application to support redirecting to a Google page to authenticate using username and password and code generated by the Google Authenticator app.\r\n\r\nThe [link](http://support.google.com/accounts/bin/answer.py?answer=185833) clearly explains what to do.","title":"JavaMail Exception javax.mail.AuthenticationFailedException 534-5.7.9 Application-specific password required","body":"<p>You have enabled <a href=\"https://support.google.com/accounts/answer/180744\">Two phase authentication</a> for your Google account and as a result applications will not be able to login to your Google account using the actual password. Google expects you to generate a application specific password for each application you use (and give it a name) and then use that password to login to your Google account from your application. This allows you to not give your password to third party application when you have 2-step authentication enabled.</p>\n\n<p>The alternate way is for your application to support redirecting to a Google page to authenticate using username and password and code generated by the Google Authenticator app.</p>\n\n<p>The <a href=\"http://support.google.com/accounts/bin/answer.py?answer=185833\">link</a> clearly explains what to do.</p>\n"},{"comments":[{"owner":{"account_id":1198357,"reputation":1090,"user_id":1169587,"accept_rate":28,"display_name":"user1169587"},"score":0,"creation_date":1660301706,"post_id":65989890,"comment_id":129506126,"body_markdown":"I find the generated 16 digits password can be used by more than one time?","body":"I find the generated 16 digits password can be used by more than one time?"}],"tags":[],"owner":{"account_id":17008218,"reputation":137,"user_id":12528063,"display_name":"LAKSHAY ARORA"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1612170614,"creation_date":1612170614,"answer_id":65989890,"question_id":26594097,"body_markdown":"Just create an App Password for your account and use that password.\r\n\r\nSteps to create password:\r\n\r\nGo to your account settings (https://myaccount.google.com/) --&gt;&gt; Security --&gt;&gt; Under signing in to Google --&gt;&gt; App Password --&gt;&gt; Enter your credentials to login to your account --&gt;&gt; Select &#39;App&#39; and &#39;Device&#39; --&gt;&gt; Generate.\r\n\r\nCopy and paste the password somewhere.\r\n\r\nYou can use this password instead of your account password.","title":"JavaMail Exception javax.mail.AuthenticationFailedException 534-5.7.9 Application-specific password required","body":"<p>Just create an App Password for your account and use that password.</p>\n<p>Steps to create password:</p>\n<p>Go to your account settings (<a href=\"https://myaccount.google.com/\" rel=\"noreferrer\">https://myaccount.google.com/</a>) --&gt;&gt; Security --&gt;&gt; Under signing in to Google --&gt;&gt; App Password --&gt;&gt; Enter your credentials to login to your account --&gt;&gt; Select 'App' and 'Device' --&gt;&gt; Generate.</p>\n<p>Copy and paste the password somewhere.</p>\n<p>You can use this password instead of your account password.</p>\n"},{"comments":[{"owner":{"account_id":11459137,"reputation":198,"user_id":8399284,"display_name":"Rithesh B"},"score":3,"creation_date":1658139589,"post_id":72592946,"comment_id":128968301,"body_markdown":"This approach works at 2022","body":"This approach works at 2022"}],"tags":[],"owner":{"account_id":2720893,"reputation":1730,"user_id":2347210,"accept_rate":67,"display_name":"Vladi"},"comment_count":1,"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1695543167,"creation_date":1655042740,"answer_id":72592946,"question_id":26594097,"body_markdown":"**UPDATED TO 2023**\r\n___________\r\n1) [two steps verification][1]  - You Must this step to continue \r\n\r\n[![enter image description here][2]][2]\r\n \r\n2)login and add a phone number and verify with text messege \r\n\r\nthan will become after green&quot;V&quot; \r\n[![enter image description here][3]][3]\r\n\r\n\r\n\r\n3)press on the &quot;**2-Step Verification**&quot; , \r\ngo down to the end of the list and \r\nclick on &quot;**App passwords**&quot; \r\n\r\n[![enter image description here][4]][4]\r\n\r\n4) then in &quot;Select App&quot; write the name of the app and press &quot;Create&quot;\r\n\r\n [![enter image description here][5]][5]\r\n\r\nwrite a description in the open page and press **genarate**\r\n\r\n5) in the open &quot;Genarated App Password copy the created password and use it in your smpt password as usual password(Check you dont copy spaces) \r\nthat it  \r\n[![enter image description here][6]][6]\r\n\r\n&gt; How to use it\r\nGo to the settings for your Google Account in the application or device you are trying to set up. Replace your password with the 16-character password shown above.\r\nJust like your normal password, this app password grants complete access to your Google Account. You won&#39;t need to remember it, so don&#39;t write it down or share it with anyone.\r\n\r\n  [1]: https://myaccount.google.com/u/0/security?hl=en-GB\r\n  [2]: https://i.stack.imgur.com/YAFfz.png\r\n  [3]: https://i.imgur.com/eny4MU7.png \r\n  [4]: https://i.imgur.com/rSDrCMZ.png\r\n  [5]: https://i.imgur.com/5CqEGJh.png\r\n  [6]: https://i.imgur.com/9UXoipL.png","title":"JavaMail Exception javax.mail.AuthenticationFailedException 534-5.7.9 Application-specific password required","body":"<p><strong>UPDATED TO 2023</strong></p>\n<hr />\n<ol>\n<li><a href=\"https://myaccount.google.com/u/0/security?hl=en-GB\" rel=\"nofollow noreferrer\">two steps verification</a>  - You Must this step to continue</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/YAFfz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YAFfz.png\" alt=\"enter image description here\" /></a></p>\n<p>2)login and add a phone number and verify with text messege</p>\n<p>than will become after green&quot;V&quot;\n<a href=\"https://i.imgur.com/eny4MU7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.imgur.com/eny4MU7.png\" alt=\"enter image description here\" /></a></p>\n<p>3)press on the &quot;<strong>2-Step Verification</strong>&quot; ,\ngo down to the end of the list and\nclick on &quot;<strong>App passwords</strong>&quot;</p>\n<p><a href=\"https://i.imgur.com/rSDrCMZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.imgur.com/rSDrCMZ.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"4\">\n<li>then in &quot;Select App&quot; write the name of the app and press &quot;Create&quot;</li>\n</ol>\n<p><a href=\"https://i.imgur.com/5CqEGJh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.imgur.com/5CqEGJh.png\" alt=\"enter image description here\" /></a></p>\n<p>write a description in the open page and press <strong>genarate</strong></p>\n<ol start=\"5\">\n<li>in the open &quot;Genarated App Password copy the created password and use it in your smpt password as usual password(Check you dont copy spaces)\nthat it<br />\n<a href=\"https://i.imgur.com/9UXoipL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.imgur.com/9UXoipL.png\" alt=\"enter image description here\" /></a></li>\n</ol>\n<blockquote>\n<p>How to use it\nGo to the settings for your Google Account in the application or device you are trying to set up. Replace your password with the 16-character password shown above.\nJust like your normal password, this app password grants complete access to your Google Account. You won't need to remember it, so don't write it down or share it with anyone.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":10987912,"reputation":469,"user_id":8072948,"display_name":"Debayan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687278943,"creation_date":1687278943,"answer_id":76516764,"question_id":26594097,"body_markdown":"If you are not able to find App Password..\r\n1. First turn on two step authentication.\r\n2. Go to Link https://myaccount.google.com/apppasswords and set up the app password.","title":"JavaMail Exception javax.mail.AuthenticationFailedException 534-5.7.9 Application-specific password required","body":"<p>If you are not able to find App Password..</p>\n<ol>\n<li>First turn on two step authentication.</li>\n<li>Go to Link <a href=\"https://myaccount.google.com/apppasswords\" rel=\"nofollow noreferrer\">https://myaccount.google.com/apppasswords</a> and set up the app password.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":7126733,"reputation":1,"user_id":5449422,"display_name":"samir varude"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697135443,"creation_date":1697135443,"answer_id":77283041,"question_id":26594097,"body_markdown":"Gmail Account -&gt; Security - &gt; 2 - Step Verification - &gt; App passwords (Bottom of Page) - Create App Password account (Provide any name) - Save - Password will generated.\r\n\r\nTake password and save it on Password field under &quot;Use SMTP Authentication&quot; section.\r\n\r\nThis is latest one and worked for me.","title":"JavaMail Exception javax.mail.AuthenticationFailedException 534-5.7.9 Application-specific password required","body":"<p>Gmail Account -&gt; Security - &gt; 2 - Step Verification - &gt; App passwords (Bottom of Page) - Create App Password account (Provide any name) - Save - Password will generated.</p>\n<p>Take password and save it on Password field under &quot;Use SMTP Authentication&quot; section.</p>\n<p>This is latest one and worked for me.</p>\n"}],"owner":{"account_id":5239392,"reputation":305,"user_id":4186971,"accept_rate":80,"display_name":"Sudhansu Sekhar Nayak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39038,"favorite_count":0,"down_vote_count":1,"up_vote_count":25,"accepted_answer_id":26594268,"answer_count":7,"score":24,"last_activity_date":1697135443,"creation_date":1414433626,"question_id":26594097,"body_markdown":"I want to send mail using JavaMailAPI\r\n \r\nI have done some coding but it is not working throwing Exception:-\r\n \r\nMessage Sending Failedjavax.mail.AuthenticationFailedException: 534-5.7.9 Application-specific password required. \r\n    \r\n    package com.appreciationcard.service;\r\n\r\n    import java.util.Properties;\r\n\r\n    import javax.mail.Message;\r\n    import javax.mail.MessagingException;\r\n    import javax.mail.PasswordAuthentication;\r\n    import javax.mail.Session;\r\n    import javax.mail.Transport;\r\n    import javax.mail.internet.InternetAddress;\r\n    import javax.mail.internet.MimeMessage;\r\n    import com.appreciationcard.dao.DAOFactory;\r\n    import com.appreciationcard.forms.ComposeForm;\r\n\r\n    public class MailServiceImpl implements MailService {\r\n\r\n\tpublic boolean mailsent(ComposeForm composeForm) {\r\n\t\tString to = composeForm.getTo();\r\n\t\tString from = composeForm.getFrom();\r\n\t\tString cc = composeForm.getCc();\r\n\t\tString bcc = composeForm.getBcc();\r\n\t\tString subject = composeForm.getSubject();\r\n\t\tString messages = composeForm.getMessage();\r\n\t\tProperties props = new Properties();\r\n\t\tprops.put(&quot;mail.smtp.host&quot;, &quot;smtp.gmail.com&quot;);\r\n\t\tprops.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n\t\tprops.put(&quot;mail.smtp.starttls.enable&quot;, true);\r\n\t\tprops.put(&quot;mail.smtp.port&quot;, &quot;587&quot;);\r\n\t\tprops.put(&quot;mail.transport.protocol&quot;, &quot;smtp&quot;);\r\n\t\tprops.put(&quot;mail.debug&quot;, &quot;true&quot;);\r\n\t\tSystem.out.println(&quot;Properties&quot; + props);\r\n\t\tSession session = Session.getDefaultInstance(props,\r\n\t\t\t\tnew javax.mail.Authenticator() {\r\n\t\t\t\t\tprotected PasswordAuthentication getPasswordAuthentication() {\r\n\t\t\t\t\t\treturn new PasswordAuthentication(\r\n\t\t\t\t\t\t\t\t&quot;tosudhansusekhar@gmail.com&quot;, &quot;xxxx&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\ttry {\r\n\t\t\tMimeMessage message = new MimeMessage(session);\r\n\t\t\tmessage.setFrom(new InternetAddress(&quot;dynamicmihir@gmail.com&quot;));\r\n\t\t\tmessage.addRecipient(Message.RecipientType.TO, new InternetAddress(\r\n\t\t\t\t\tto));\r\n\t\t\tmessage.setSubject(subject);\r\n\t\t\tmessage.setText(messages);\r\n\t\t\tTransport.send(message);\r\n\t\t} catch (MessagingException mex) {\r\n\t\t\tSystem.out.println(&quot;Message Sending Failed&quot; + mex);\r\n\t\t\tmex.printStackTrace();\r\n\t\t} \r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\nI am getting Exception on server console \r\n\r\nMessage Sending Failedjavax.mail.AuthenticationFailedException: 534-5.7.9 Application-specific password required.\r\n\r\nLearn more at 534 5.7.9 http://support.google.com/accounts/bin/answer.py?answer=185833 o5sm11464195pdr.50 - gsmtp\r\n\r\n**Will Any one Kindly Help me out to solve this problem.**","title":"JavaMail Exception javax.mail.AuthenticationFailedException 534-5.7.9 Application-specific password required","body":"<p>I want to send mail using JavaMailAPI</p>\n\n<p>I have done some coding but it is not working throwing Exception:-</p>\n\n<p>Message Sending Failedjavax.mail.AuthenticationFailedException: 534-5.7.9 Application-specific password required. </p>\n\n<pre><code>package com.appreciationcard.service;\n\nimport java.util.Properties;\n\nimport javax.mail.Message;\nimport javax.mail.MessagingException;\nimport javax.mail.PasswordAuthentication;\nimport javax.mail.Session;\nimport javax.mail.Transport;\nimport javax.mail.internet.InternetAddress;\nimport javax.mail.internet.MimeMessage;\nimport com.appreciationcard.dao.DAOFactory;\nimport com.appreciationcard.forms.ComposeForm;\n\npublic class MailServiceImpl implements MailService {\n\npublic boolean mailsent(ComposeForm composeForm) {\n    String to = composeForm.getTo();\n    String from = composeForm.getFrom();\n    String cc = composeForm.getCc();\n    String bcc = composeForm.getBcc();\n    String subject = composeForm.getSubject();\n    String messages = composeForm.getMessage();\n    Properties props = new Properties();\n    props.put(\"mail.smtp.host\", \"smtp.gmail.com\");\n    props.put(\"mail.smtp.auth\", \"true\");\n    props.put(\"mail.smtp.starttls.enable\", true);\n    props.put(\"mail.smtp.port\", \"587\");\n    props.put(\"mail.transport.protocol\", \"smtp\");\n    props.put(\"mail.debug\", \"true\");\n    System.out.println(\"Properties\" + props);\n    Session session = Session.getDefaultInstance(props,\n            new javax.mail.Authenticator() {\n                protected PasswordAuthentication getPasswordAuthentication() {\n                    return new PasswordAuthentication(\n                            \"tosudhansusekhar@gmail.com\", \"xxxx\");\n                }\n            });\n    try {\n        MimeMessage message = new MimeMessage(session);\n        message.setFrom(new InternetAddress(\"dynamicmihir@gmail.com\"));\n        message.addRecipient(Message.RecipientType.TO, new InternetAddress(\n                to));\n        message.setSubject(subject);\n        message.setText(messages);\n        Transport.send(message);\n    } catch (MessagingException mex) {\n        System.out.println(\"Message Sending Failed\" + mex);\n        mex.printStackTrace();\n    } \n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I am getting Exception on server console </p>\n\n<p>Message Sending Failedjavax.mail.AuthenticationFailedException: 534-5.7.9 Application-specific password required.</p>\n\n<p>Learn more at 534 5.7.9 <a href=\"http://support.google.com/accounts/bin/answer.py?answer=185833\" rel=\"noreferrer\">http://support.google.com/accounts/bin/answer.py?answer=185833</a> o5sm11464195pdr.50 - gsmtp</p>\n\n<p><strong>Will Any one Kindly Help me out to solve this problem.</strong></p>\n"},{"tags":["java","bluetooth","bluecove"],"answers":[{"tags":[],"owner":{"account_id":11064381,"reputation":1063,"user_id":8124605,"display_name":"Risto"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697128701,"creation_date":1697128701,"answer_id":77282395,"question_id":77282130,"body_markdown":"According to the documentation, the [RemoteDevice](http://www.bluecove.org/bluecove/apidocs/javax/bluetooth/RemoteDevice.html) class does not have a `getUUIDs()` method. I assume that in your code the `device` is a single member of the `devices` array, otherwise there might still be an error in your code.","title":"bluetooth UUID search with Java / bluecove","body":"<p>According to the documentation, the <a href=\"http://www.bluecove.org/bluecove/apidocs/javax/bluetooth/RemoteDevice.html\" rel=\"nofollow noreferrer\">RemoteDevice</a> class does not have a <code>getUUIDs()</code> method. I assume that in your code the <code>device</code> is a single member of the <code>devices</code> array, otherwise there might still be an error in your code.</p>\n"},{"tags":[],"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697134380,"creation_date":1697134380,"answer_id":77282925,"question_id":77282130,"body_markdown":"As already pointed out by others, there is no `getUUID()` method in [RemoteDevice](http://www.bluecove.org/bluecove/apidocs/javax/bluetooth/RemoteDevice.html) class. However, if you need the bluetooth address you can use the [`getBluetoothAddress()`](http://www.bluecove.org/bluecove/apidocs/javax/bluetooth/RemoteDevice.html#getBluetoothAddress()) method like this:\r\n```java\r\npackage org.example;\r\n\r\nimport javax.bluetooth.DiscoveryAgent;\r\nimport javax.bluetooth.LocalDevice;\r\nimport javax.bluetooth.RemoteDevice;\r\nimport java.io.IOException;\r\n\r\npublic class BlueTest {\r\n    public static void main(String[] args) throws IOException {\r\n        LocalDevice localDevice = LocalDevice.getLocalDevice();\r\n        DiscoveryAgent discoveryAgent = localDevice.getDiscoveryAgent();\r\n        RemoteDevice[] devices = discoveryAgent.retrieveDevices(DiscoveryAgent.PREKNOWN);\r\n        for (RemoteDevice device : devices) {\r\n            System.out.println(&quot;Address: &quot; + device.getBluetoothAddress());\r\n            System.out.println(&quot;Name: &quot; + device.getFriendlyName(false));\r\n        }\r\n    }\r\n}\r\n```\r\nHope this helps.","title":"bluetooth UUID search with Java / bluecove","body":"<p>As already pointed out by others, there is no <code>getUUID()</code> method in <a href=\"http://www.bluecove.org/bluecove/apidocs/javax/bluetooth/RemoteDevice.html\" rel=\"nofollow noreferrer\">RemoteDevice</a> class. However, if you need the bluetooth address you can use the <a href=\"http://www.bluecove.org/bluecove/apidocs/javax/bluetooth/RemoteDevice.html#getBluetoothAddress()\" rel=\"nofollow noreferrer\"><code>getBluetoothAddress()</code></a> method like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport javax.bluetooth.DiscoveryAgent;\nimport javax.bluetooth.LocalDevice;\nimport javax.bluetooth.RemoteDevice;\nimport java.io.IOException;\n\npublic class BlueTest {\n    public static void main(String[] args) throws IOException {\n        LocalDevice localDevice = LocalDevice.getLocalDevice();\n        DiscoveryAgent discoveryAgent = localDevice.getDiscoveryAgent();\n        RemoteDevice[] devices = discoveryAgent.retrieveDevices(DiscoveryAgent.PREKNOWN);\n        for (RemoteDevice device : devices) {\n            System.out.println(&quot;Address: &quot; + device.getBluetoothAddress());\n            System.out.println(&quot;Name: &quot; + device.getFriendlyName(false));\n        }\n    }\n}\n</code></pre>\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":962024,"reputation":342,"user_id":986163,"accept_rate":33,"display_name":"George Violettas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1697134380,"creation_date":1697126208,"question_id":77282130,"body_markdown":"In windows, I communicate fine with my bluetooth connected devices. I get the name and address of the device ok. But, the line\r\n\r\n    UUID[] uuids = device.getUUIDs();\r\n\r\n… produces this error:\r\n\r\n&gt;The method getUUIDs() is undefined for the type RemoteDevice\r\n\r\nCode sample\r\n    \r\n    import javax.bluetooth.DiscoveryAgent;\r\n    import javax.bluetooth.LocalDevice;\r\n    import javax.bluetooth.RemoteDevice;\r\n    import javax.bluetooth.UUID;\r\n    //...\r\n    LocalDevice localDevice = LocalDevice.getLocalDevice();\r\n    DiscoveryAgent discoveryAgent = localDevice.getDiscoveryAgent();\r\n    RemoteDevice[] devices = discoveryAgent.retrieveDevices(DiscoveryAgent.PREKNOWN);\r\n    UUID[] uuids = device.getUUIDs();\r\n\r\n\r\n","title":"bluetooth UUID search with Java / bluecove","body":"<p>In windows, I communicate fine with my bluetooth connected devices. I get the name and address of the device ok. But, the line</p>\n<pre><code>UUID[] uuids = device.getUUIDs();\n</code></pre>\n<p>… produces this error:</p>\n<blockquote>\n<p>The method getUUIDs() is undefined for the type RemoteDevice</p>\n</blockquote>\n<p>Code sample</p>\n<pre><code>import javax.bluetooth.DiscoveryAgent;\nimport javax.bluetooth.LocalDevice;\nimport javax.bluetooth.RemoteDevice;\nimport javax.bluetooth.UUID;\n//...\nLocalDevice localDevice = LocalDevice.getLocalDevice();\nDiscoveryAgent discoveryAgent = localDevice.getDiscoveryAgent();\nRemoteDevice[] devices = discoveryAgent.retrieveDevices(DiscoveryAgent.PREKNOWN);\nUUID[] uuids = device.getUUIDs();\n</code></pre>\n"},{"tags":["java","spring-boot","spring-integration"],"answers":[{"comments":[{"owner":{"account_id":7671769,"reputation":123,"user_id":5813771,"display_name":"Eduardo B."},"score":0,"creation_date":1697223842,"post_id":77282866,"comment_id":136257951,"body_markdown":"I understand, thank you for your help","body":"I understand, thank you for your help"}],"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697133690,"creation_date":1697133690,"answer_id":77282866,"question_id":77277208,"body_markdown":"No, it is not possible without some scheduled task to check the system state at some point. Even if such a feature (`IdleEvent` ?) would be implemented in the framework, it still would be based on the scheduler and some interval between active and non-active states.","title":"Create a flow with IntegrationFlow that&#39;s close after certain time if no messages are sends","body":"<p>No, it is not possible without some scheduled task to check the system state at some point. Even if such a feature (<code>IdleEvent</code> ?) would be implemented in the framework, it still would be based on the scheduler and some interval between active and non-active states.</p>\n"}],"owner":{"account_id":7671769,"reputation":123,"user_id":5813771,"display_name":"Eduardo B."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77282866,"answer_count":1,"score":0,"last_activity_date":1697133690,"creation_date":1697074596,"question_id":77277208,"body_markdown":"I&#39;m building a system that&#39;s create flows dynamically, but sometimes messages stop being received. So i wanna make a logic that stop the flow to receive messages or, if it is possible, destroy the flow after some time.\r\n\r\n    IntegrationFlows\r\n    .from(unicastReceivingChannelAdapter)\r\n    .&lt;byte[], String&gt;transform(String::new)\r\n    .handle(e -&gt; processMessage((String)e.getPayload()))\r\n     .get();\r\n\r\nThis is my flow until now. I register the flow using IntegrationFlowContext.register like below:\r\n\r\n    flowContext.registration(integrationFlow).register()\r\n\r\nAnd add in a ArrayList, to use in other parts of the system\r\n\r\n    aircraft.getUdpFlows().add(flowContext.registration(integrationFlow).register())\r\n\r\nIt&#39;s possible to make something like that without using some thread to verify after some time?","title":"Create a flow with IntegrationFlow that&#39;s close after certain time if no messages are sends","body":"<p>I'm building a system that's create flows dynamically, but sometimes messages stop being received. So i wanna make a logic that stop the flow to receive messages or, if it is possible, destroy the flow after some time.</p>\n<pre><code>IntegrationFlows\n.from(unicastReceivingChannelAdapter)\n.&lt;byte[], String&gt;transform(String::new)\n.handle(e -&gt; processMessage((String)e.getPayload()))\n .get();\n</code></pre>\n<p>This is my flow until now. I register the flow using IntegrationFlowContext.register like below:</p>\n<pre><code>flowContext.registration(integrationFlow).register()\n</code></pre>\n<p>And add in a ArrayList, to use in other parts of the system</p>\n<pre><code>aircraft.getUdpFlows().add(flowContext.registration(integrationFlow).register())\n</code></pre>\n<p>It's possible to make something like that without using some thread to verify after some time?</p>\n"},{"tags":["java","android","json","kotlin","moshi"],"comments":[{"owner":{"account_id":16841916,"reputation":66,"user_id":12177115,"display_name":"BeNYaMiN"},"score":3,"creation_date":1697088647,"post_id":77277187,"comment_id":136235846,"body_markdown":"Use it like this: `val mapAdapter = moshi.adapter(Blob::class.java)`.","body":"Use it like this: <code>val mapAdapter = moshi.adapter(Blob::class.java)</code>."},{"owner":{"account_id":1874735,"reputation":8514,"user_id":1696171,"accept_rate":73,"display_name":"Eric Cochran"},"score":0,"creation_date":1697135375,"post_id":77277187,"comment_id":136245184,"body_markdown":"Moshi does have some reified Kotlin extension methods. You might have to paste the import statement manually? `import com.squareup.moshi.adapter`","body":"Moshi does have some reified Kotlin extension methods. You might have to paste the import statement manually? <code>import com.squareup.moshi.adapter</code>"},{"owner":{"account_id":18820878,"reputation":185,"user_id":13726919,"display_name":"Pyr3z"},"score":1,"creation_date":1697234925,"post_id":77277187,"comment_id":136259308,"body_markdown":"@Eric Cochran  - That does work too, _IFF_ I also decorate the scope with `@OptIn(ExperimentalStdlibApi::class)`...  I only have a cursory understanding of Kotlin reification, so in this instance I think I&#39;ll leave the &quot;experimental&quot; APIs to the folks who are more familiar with this lang + env.","body":"@Eric Cochran  - That does work too, <i>IFF</i> I also decorate the scope with <code>@OptIn(ExperimentalStdlibApi::class)</code>...  I only have a cursory understanding of Kotlin reification, so in this instance I think I&#39;ll leave the &quot;experimental&quot; APIs to the folks who are more familiar with this lang + env."}],"answers":[{"tags":[],"owner":{"account_id":18820878,"reputation":185,"user_id":13726919,"display_name":"Pyr3z"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697131849,"creation_date":1697131849,"answer_id":77282714,"question_id":77277187,"body_markdown":"Wow... thank you @BeNYaMiN!\r\n\r\n```kt\r\nval mapAdapter = moshi.adapter(Blob::class.java)\r\n```\r\n\r\nFinally works &#128513;","title":"Using Moshi in Kotlin (Android), Moshi.adapter() signatures seem to differ from the docs","body":"<p>Wow... thank you @BeNYaMiN!</p>\n<pre><code>val mapAdapter = moshi.adapter(Blob::class.java)\n</code></pre>\n<p>Finally works 😁</p>\n"}],"owner":{"account_id":18820878,"reputation":185,"user_id":13726919,"display_name":"Pyr3z"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697132008,"creation_date":1697074118,"question_id":77277187,"body_markdown":"My build.gradle dependencies (for a non-main Android Studio module):\r\n```gradle\r\ndependencies {\r\n    implementation &#39;androidx.core:core-ktx:1.12.0&#39;\r\n    implementation &#39;com.squareup.moshi:moshi-kotlin:1.14.0&#39;\r\n    ksp &#39;com.squareup.moshi:moshi-kotlin-codegen:1.14.0&#39;\r\n\r\n    // (...)\r\n}\r\n```\r\n\r\nThis code doesn&#39;t work despite seeming to be functionally identical to the examples in the docs:\r\n```kt\r\nclass Blob (val string: String);\r\n\r\ninternal object JsonMan {\r\n    @NonNull\r\n    val moshi = Moshi.Builder()\r\n                     .addLast(KotlinJsonAdapterFactory())\r\n                     .build();\r\n\r\n    val mapAdapter = moshi.adapter&lt;Blob&gt;();\r\n                   //      ^^^^^^^ No matching overload found.\r\n}\r\n```\r\n\r\nThe specific Android Studio error message on hover is:\r\n&gt; None of the following functions can be called with the arguments supplied.\r\n\r\n_(removed some details for brevity)_\r\n\r\n- adapter(Class&lt;TypeVariable(T)!&gt;!)\r\n- adapter(Type!)\r\n- adapter(Type!, (MutableSet&lt;out Annotation!&gt;..Set&lt;Annotation!&gt;?))\r\n- adapter(Type!, (MutableSet&lt;out Annotation!&gt;..Set&lt;Annotation!&gt;?), String?)\r\n- adapter(Type!, Class&lt;out Annotation!&gt;!)\r\n- adapter(type: Type!, annotationType: Class&lt;out Annotation!&gt;!)\r\n- adapter(Type!, vararg Class&lt;out Annotation!&gt;!)\r\n- adapter(type: Type!, vararg annotationTypes: Class&lt;out Annotation!&gt;!)\r\n\r\n— basically, **no matching overload found**.\r\n\r\nThings I&#39;ve already tried:\r\n- passing `kotlin.reflect.typeOf&lt;Blob&gt;().javaClass`\r\n- a bunch of nutty rearrangings of the syntax\r\n\r\nI was really hoping that simply following the docs would Just Work ™ – I suppose that one&#39;s on me.\r\n\r\nI&#39;m brand new to Kotlin, so I think I&#39;m probably just ignorant of something that would be obvious to most Moshi-Kotlin users... Any help would be appreciated :)\r\n\r\n### Edit:\r\n\r\nThe comment by @BeNYaMiN did the trick.\r\n\r\nI am a bit salty though that the Kotlin syntax used throughout Moshi&#39;s docs aren&#39;t an actual signature you can use out of the box... I am still suspicious that there has to be _some_ way to get the &quot;official&quot; syntax to compile.  Or is it all because this is Android Kotlin?  If anyone knows, I would still appreciate your knowledge!","title":"Using Moshi in Kotlin (Android), Moshi.adapter() signatures seem to differ from the docs","body":"<p>My build.gradle dependencies (for a non-main Android Studio module):</p>\n<pre><code>dependencies {\n    implementation 'androidx.core:core-ktx:1.12.0'\n    implementation 'com.squareup.moshi:moshi-kotlin:1.14.0'\n    ksp 'com.squareup.moshi:moshi-kotlin-codegen:1.14.0'\n\n    // (...)\n}\n</code></pre>\n<p>This code doesn't work despite seeming to be functionally identical to the examples in the docs:</p>\n<pre><code>class Blob (val string: String);\n\ninternal object JsonMan {\n    @NonNull\n    val moshi = Moshi.Builder()\n                     .addLast(KotlinJsonAdapterFactory())\n                     .build();\n\n    val mapAdapter = moshi.adapter&lt;Blob&gt;();\n                   //      ^^^^^^^ No matching overload found.\n}\n</code></pre>\n<p>The specific Android Studio error message on hover is:</p>\n<blockquote>\n<p>None of the following functions can be called with the arguments supplied.</p>\n</blockquote>\n<p><em>(removed some details for brevity)</em></p>\n<ul>\n<li>adapter(Class&lt;TypeVariable(T)!&gt;!)</li>\n<li>adapter(Type!)</li>\n<li>adapter(Type!, (MutableSet&lt;out Annotation!&gt;..Set&lt;Annotation!&gt;?))</li>\n<li>adapter(Type!, (MutableSet&lt;out Annotation!&gt;..Set&lt;Annotation!&gt;?), String?)</li>\n<li>adapter(Type!, Class&lt;out Annotation!&gt;!)</li>\n<li>adapter(type: Type!, annotationType: Class&lt;out Annotation!&gt;!)</li>\n<li>adapter(Type!, vararg Class&lt;out Annotation!&gt;!)</li>\n<li>adapter(type: Type!, vararg annotationTypes: Class&lt;out Annotation!&gt;!)</li>\n</ul>\n<p>— basically, <strong>no matching overload found</strong>.</p>\n<p>Things I've already tried:</p>\n<ul>\n<li>passing <code>kotlin.reflect.typeOf&lt;Blob&gt;().javaClass</code></li>\n<li>a bunch of nutty rearrangings of the syntax</li>\n</ul>\n<p>I was really hoping that simply following the docs would Just Work ™ – I suppose that one's on me.</p>\n<p>I'm brand new to Kotlin, so I think I'm probably just ignorant of something that would be obvious to most Moshi-Kotlin users... Any help would be appreciated :)</p>\n<h3>Edit:</h3>\n<p>The comment by @BeNYaMiN did the trick.</p>\n<p>I am a bit salty though that the Kotlin syntax used throughout Moshi's docs aren't an actual signature you can use out of the box... I am still suspicious that there has to be <em>some</em> way to get the &quot;official&quot; syntax to compile.  Or is it all because this is Android Kotlin?  If anyone knows, I would still appreciate your knowledge!</p>\n"},{"tags":["java","android","android-studio","bluetooth"],"comments":[{"owner":{"account_id":26136616,"reputation":194,"user_id":19826534,"display_name":"Ozgur Baykal"},"score":0,"creation_date":1697130498,"post_id":77282170,"comment_id":136244259,"body_markdown":"As far as I understand, you cannot even see the devices in the logs when searching with bluetooth, right?","body":"As far as I understand, you cannot even see the devices in the logs when searching with bluetooth, right?"},{"owner":{"account_id":28762514,"reputation":9,"user_id":22028097,"display_name":"SemirAdam"},"score":0,"creation_date":1697131060,"post_id":77282170,"comment_id":136244379,"body_markdown":"Yes, that&#39;s the problem. I&#39;m not very experienced in java and Bluetooth but as far as I know from the official documentation that&#39;s what I need to just display the name of the devices. First I must register a broadcastreceiver and later I can invoque the start discovery function.","body":"Yes, that&#39;s the problem. I&#39;m not very experienced in java and Bluetooth but as far as I know from the official documentation that&#39;s what I need to just display the name of the devices. First I must register a broadcastreceiver and later I can invoque the start discovery function."}],"answers":[{"comments":[{"owner":{"account_id":28762514,"reputation":9,"user_id":22028097,"display_name":"SemirAdam"},"score":0,"creation_date":1697273827,"post_id":77282716,"comment_id":136261447,"body_markdown":"Let me analyze your code thank you. May you please let me know, just to learn, what was exactly my mistake in my original code?","body":"Let me analyze your code thank you. May you please let me know, just to learn, what was exactly my mistake in my original code?"},{"owner":{"account_id":26136616,"reputation":194,"user_id":19826534,"display_name":"Ozgur Baykal"},"score":0,"creation_date":1697275787,"post_id":77282716,"comment_id":136261594,"body_markdown":"@SemirAdam Your Manifest file may be missing. Also, when checking the user&#39;s permissions, if there is no permission, you return directly, I asked the user for permission instead. Also, if the user&#39;s bluetooth is off, I added a code that asks for permission to turn it on. All codes other than that are the same as yours. Maybe it worked because I completed the deficiencies in your Manifest file.  Try adding the manifest and other things I mentioned to your code. As I said, it worked for me, I hope it works for you too.","body":"@SemirAdam Your Manifest file may be missing. Also, when checking the user&#39;s permissions, if there is no permission, you return directly, I asked the user for permission instead. Also, if the user&#39;s bluetooth is off, I added a code that asks for permission to turn it on. All codes other than that are the same as yours. Maybe it worked because I completed the deficiencies in your Manifest file.  Try adding the manifest and other things I mentioned to your code. As I said, it worked for me, I hope it works for you too."}],"tags":[],"owner":{"account_id":26136616,"reputation":194,"user_id":19826534,"display_name":"Ozgur Baykal"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697131868,"creation_date":1697131868,"answer_id":77282716,"question_id":77282170,"body_markdown":"I changed the code and the permission method a bit, tested it on my phone and was able to view the bluetooth devices in the logs.\r\n\r\n```\r\n\r\nprivate ActivityResultLauncher&lt;Intent&gt; enableBluetoothLauncher;\r\n\r\n private static final String[] PERMISSIONS_LOCATION = {\r\n            Manifest.permission.ACCESS_FINE_LOCATION,\r\n            Manifest.permission.ACCESS_COARSE_LOCATION,\r\n            Manifest.permission.ACCESS_LOCATION_EXTRA_COMMANDS,\r\n            Manifest.permission.BLUETOOTH_SCAN,\r\n            Manifest.permission.BLUETOOTH_CONNECT,\r\n            Manifest.permission.BLUETOOTH_PRIVILEGED\r\n    };\r\n\r\nprivate void checkPermissions(){\r\n        int permission2 = ActivityCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_SCAN);\r\n\r\n        if (permission2 != PackageManager.PERMISSION_GRANTED){\r\n            ActivityCompat.requestPermissions(\r\n                    this,\r\n                    PERMISSIONS_LOCATION,\r\n                    1111 //YOUR REQUEST CODE\r\n            );\r\n        }\r\n    }\r\n\r\n@Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        enableBluetoothLauncher = registerForActivityResult(\r\n                new ActivityResultContracts.StartActivityForResult(),\r\n                result -&gt; {\r\n                    if (result.getResultCode() == Activity.RESULT_OK) {\r\n                        // Bluetooth open call func again\r\n                        discover_devices();\r\n                    } else {\r\n                        // The user refused to activate Bluetooth.\r\n                    }\r\n                }\r\n        );\r\n\r\n        button = findViewById(R.id.clickButton);\r\n\r\n        //CLICK BUTTON TO START SCAN\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                    discover_devices();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    private void discover_devices() {\r\n        if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\r\n            checkPermissions();\r\n            return;\r\n        }\r\n\r\n        myBluetoothAdapter= BluetoothAdapter.getDefaultAdapter();\r\n        if (myBluetoothAdapter == null) {\r\n            Toast.makeText(this, &quot;device doesn&#39;t support Bluetooth&quot;, Toast.LENGTH_LONG).show();\r\n        } else {\r\n            if (!myBluetoothAdapter.isEnabled()) {\r\n\r\n                Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\r\n                enableBluetoothLauncher.launch(enableBtIntent);\r\n\r\n            }\r\n        }\r\n\r\n\r\n        if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\r\n            return;\r\n        }\r\n\r\n        Set&lt;BluetoothDevice&gt; pairedDevices = myBluetoothAdapter.getBondedDevices();\r\n        if (pairedDevices.size() &gt; 0) {\r\n            // There are paired devices. Get the name and address of each paired device.\r\n            for (BluetoothDevice device : pairedDevices) {\r\n\r\n                String deviceName = device.getName();\r\n                String deviceHardwareAddress = device.getAddress(); // MAC address\r\n            }\r\n        }\r\n        myBluetoothAdapter.startDiscovery();\r\n\r\n        // Register for broadcasts when a device is discovered.\r\n        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);\r\n        registerReceiver(receiver, filter);\r\n    }\r\n\r\n    // Create a BroadcastReceiver for ACTION_FOUND.\r\n    private final BroadcastReceiver receiver = new BroadcastReceiver() {\r\n        public void onReceive(Context context, Intent intent) {\r\n            String action = intent.getAction();\r\n            if (BluetoothDevice.ACTION_FOUND.equals(action)) {\r\n                // Discovery has found a device. Get the BluetoothDevice\r\n                // object and its info from the Intent.\r\n                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\r\n                if (ActivityCompat.checkSelfPermission(MainActivity.this, android.Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\r\n                    checkPermissions();\r\n                    return;\r\n                }\r\n                String deviceName = device.getName();\r\n                String deviceHardwareAddress = device.getAddress(); // MAC address\r\n                System.out.println(&quot;Discovered: &quot; + deviceName);\r\n            }\r\n        }\r\n    };\r\n```\r\n\r\n\r\n**AndroidManifest.xml:**\r\n```\r\n    &lt;!--BLUETOOTH PERMISSION--&gt;\r\n    &lt;!-- Request legacy Bluetooth permissions on older devices. --&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\r\n    &lt;!-- Needed only if your app looks for Bluetooth devices.\r\n             If your app doesn&#39;t use Bluetooth scan results to derive physical\r\n             location information, you can strongly assert that your app\r\n             doesn&#39;t derive physical location. --&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot; /&gt;\r\n    &lt;!-- Needed only if your app makes the device discoverable to Bluetooth\r\n      devices. --&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADVERTISE&quot; /&gt;\r\n    &lt;!-- Needed only if your app communicates with already-paired Bluetooth\r\n           devices. --&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot; /&gt;\r\n    &lt;!--bibo01 : hardware option--&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot;/&gt;\r\n\r\n    &lt;uses-feature android:name=&quot;android.hardware.bluetooth&quot; android:required=&quot;false&quot;/&gt;\r\n    &lt;uses-feature android:name=&quot;android.hardware.bluetooth_le&quot; android:required=&quot;false&quot;/&gt;\r\n```\r\n\r\n\r\n**And the log I observed when I did the scan:** \r\n\r\n[![Logs][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vFLUF.png\r\n\r\nEverything worked fine for me hope it works for you.","title":"Code to discover Bluetooth devices in Java doesn&#39;t display anything","body":"<p>I changed the code and the permission method a bit, tested it on my phone and was able to view the bluetooth devices in the logs.</p>\n<pre><code>\nprivate ActivityResultLauncher&lt;Intent&gt; enableBluetoothLauncher;\n\n private static final String[] PERMISSIONS_LOCATION = {\n            Manifest.permission.ACCESS_FINE_LOCATION,\n            Manifest.permission.ACCESS_COARSE_LOCATION,\n            Manifest.permission.ACCESS_LOCATION_EXTRA_COMMANDS,\n            Manifest.permission.BLUETOOTH_SCAN,\n            Manifest.permission.BLUETOOTH_CONNECT,\n            Manifest.permission.BLUETOOTH_PRIVILEGED\n    };\n\nprivate void checkPermissions(){\n        int permission2 = ActivityCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_SCAN);\n\n        if (permission2 != PackageManager.PERMISSION_GRANTED){\n            ActivityCompat.requestPermissions(\n                    this,\n                    PERMISSIONS_LOCATION,\n                    1111 //YOUR REQUEST CODE\n            );\n        }\n    }\n\n@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        enableBluetoothLauncher = registerForActivityResult(\n                new ActivityResultContracts.StartActivityForResult(),\n                result -&gt; {\n                    if (result.getResultCode() == Activity.RESULT_OK) {\n                        // Bluetooth open call func again\n                        discover_devices();\n                    } else {\n                        // The user refused to activate Bluetooth.\n                    }\n                }\n        );\n\n        button = findViewById(R.id.clickButton);\n\n        //CLICK BUTTON TO START SCAN\n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                    discover_devices();\n            }\n        });\n\n    }\n\n\n    private void discover_devices() {\n        if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\n            checkPermissions();\n            return;\n        }\n\n        myBluetoothAdapter= BluetoothAdapter.getDefaultAdapter();\n        if (myBluetoothAdapter == null) {\n            Toast.makeText(this, &quot;device doesn't support Bluetooth&quot;, Toast.LENGTH_LONG).show();\n        } else {\n            if (!myBluetoothAdapter.isEnabled()) {\n\n                Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\n                enableBluetoothLauncher.launch(enableBtIntent);\n\n            }\n        }\n\n\n        if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\n            return;\n        }\n\n        Set&lt;BluetoothDevice&gt; pairedDevices = myBluetoothAdapter.getBondedDevices();\n        if (pairedDevices.size() &gt; 0) {\n            // There are paired devices. Get the name and address of each paired device.\n            for (BluetoothDevice device : pairedDevices) {\n\n                String deviceName = device.getName();\n                String deviceHardwareAddress = device.getAddress(); // MAC address\n            }\n        }\n        myBluetoothAdapter.startDiscovery();\n\n        // Register for broadcasts when a device is discovered.\n        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);\n        registerReceiver(receiver, filter);\n    }\n\n    // Create a BroadcastReceiver for ACTION_FOUND.\n    private final BroadcastReceiver receiver = new BroadcastReceiver() {\n        public void onReceive(Context context, Intent intent) {\n            String action = intent.getAction();\n            if (BluetoothDevice.ACTION_FOUND.equals(action)) {\n                // Discovery has found a device. Get the BluetoothDevice\n                // object and its info from the Intent.\n                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\n                if (ActivityCompat.checkSelfPermission(MainActivity.this, android.Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\n                    checkPermissions();\n                    return;\n                }\n                String deviceName = device.getName();\n                String deviceHardwareAddress = device.getAddress(); // MAC address\n                System.out.println(&quot;Discovered: &quot; + deviceName);\n            }\n        }\n    };\n</code></pre>\n<p><strong>AndroidManifest.xml:</strong></p>\n<pre><code>    &lt;!--BLUETOOTH PERMISSION--&gt;\n    &lt;!-- Request legacy Bluetooth permissions on older devices. --&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\n    &lt;!-- Needed only if your app looks for Bluetooth devices.\n             If your app doesn't use Bluetooth scan results to derive physical\n             location information, you can strongly assert that your app\n             doesn't derive physical location. --&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot; /&gt;\n    &lt;!-- Needed only if your app makes the device discoverable to Bluetooth\n      devices. --&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADVERTISE&quot; /&gt;\n    &lt;!-- Needed only if your app communicates with already-paired Bluetooth\n           devices. --&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot; /&gt;\n    &lt;!--bibo01 : hardware option--&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot;/&gt;\n\n    &lt;uses-feature android:name=&quot;android.hardware.bluetooth&quot; android:required=&quot;false&quot;/&gt;\n    &lt;uses-feature android:name=&quot;android.hardware.bluetooth_le&quot; android:required=&quot;false&quot;/&gt;\n</code></pre>\n<p><strong>And the log I observed when I did the scan:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/vFLUF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vFLUF.png\" alt=\"Logs\" /></a></p>\n<p>Everything worked fine for me hope it works for you.</p>\n"}],"owner":{"account_id":28762514,"reputation":9,"user_id":22028097,"display_name":"SemirAdam"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697131868,"creation_date":1697126532,"question_id":77282170,"body_markdown":"I&#39;m adding a piece of code to display bluetooth devices in Java.\r\n\r\nI included the part that enabled the blueooth permisions (this is working as expected).\r\n\r\nHowever, this piece of code seems not working to display the blueooth devices in the same page:\r\n\r\nI can&#39;t see any visible errors in logcat. Also, I didn&#39;t create any specific box in the layout to display anything but at least I should be able to see the devices in the logs.\r\n\r\n```\r\n@SuppressLint(&quot;MissingPermission&quot;)\r\nprivate void btn() {\r\n     btn.setOnClickListener(v -&gt; {\r\n       discover_devices();\r\n       // Register for broadcasts when a device is discovered.\r\n       IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);\r\n       registerReceiver(receiver, filter);\r\n       myBluetoothAdapter.startDiscovery();\r\n     });\r\n}\r\n\r\n private void discover_devices() {\r\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\r\n            return;\r\n        }\r\n        Set&lt;BluetoothDevice&gt; pairedDevices = myBluetoothAdapter.getBondedDevices();\r\n        if (pairedDevices.size() &gt; 0) {\r\n            // There are paired devices. Get the name and address of each paired device.\r\n            for (BluetoothDevice device : pairedDevices) {\r\n                String deviceName = device.getName();\r\n                String deviceHardwareAddress = device.getAddress(); // MAC address\r\n            }\r\n        }\r\n    }\r\n\r\n    // Create a BroadcastReceiver for ACTION_FOUND.\r\n    private final BroadcastReceiver receiver = new BroadcastReceiver() {\r\n        public void onReceive(Context context, Intent intent) {\r\n            String action = intent.getAction();\r\n            if (BluetoothDevice.ACTION_FOUND.equals(action)) {\r\n                // Discovery has found a device. Get the BluetoothDevice\r\n                // object and its info from the Intent.\r\n                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\r\n                if (ActivityCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\r\n                    return;\r\n                }\r\n                String deviceName = device.getName();\r\n                String deviceHardwareAddress = device.getAddress(); // MAC address\r\n                System.out.println(&quot;Discovered: &quot; + deviceName);\r\n                Log.d(&quot;PERMISSIONS&quot;, &quot;Discovered: &quot; + deviceName);\r\n            }\r\n        }\r\n    };\r\n```\r\n\r\nAny advice about this piece of code?\r\n\r\nAndroid studio seems to obligate to check about the permissions in the Bluetooth code but this par of code is only executed after enabling the Bluetooth permissions manually at the beginning of the program. ","title":"Code to discover Bluetooth devices in Java doesn&#39;t display anything","body":"<p>I'm adding a piece of code to display bluetooth devices in Java.</p>\n<p>I included the part that enabled the blueooth permisions (this is working as expected).</p>\n<p>However, this piece of code seems not working to display the blueooth devices in the same page:</p>\n<p>I can't see any visible errors in logcat. Also, I didn't create any specific box in the layout to display anything but at least I should be able to see the devices in the logs.</p>\n<pre><code>@SuppressLint(&quot;MissingPermission&quot;)\nprivate void btn() {\n     btn.setOnClickListener(v -&gt; {\n       discover_devices();\n       // Register for broadcasts when a device is discovered.\n       IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);\n       registerReceiver(receiver, filter);\n       myBluetoothAdapter.startDiscovery();\n     });\n}\n\n private void discover_devices() {\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\n            return;\n        }\n        Set&lt;BluetoothDevice&gt; pairedDevices = myBluetoothAdapter.getBondedDevices();\n        if (pairedDevices.size() &gt; 0) {\n            // There are paired devices. Get the name and address of each paired device.\n            for (BluetoothDevice device : pairedDevices) {\n                String deviceName = device.getName();\n                String deviceHardwareAddress = device.getAddress(); // MAC address\n            }\n        }\n    }\n\n    // Create a BroadcastReceiver for ACTION_FOUND.\n    private final BroadcastReceiver receiver = new BroadcastReceiver() {\n        public void onReceive(Context context, Intent intent) {\n            String action = intent.getAction();\n            if (BluetoothDevice.ACTION_FOUND.equals(action)) {\n                // Discovery has found a device. Get the BluetoothDevice\n                // object and its info from the Intent.\n                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\n                if (ActivityCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\n                    return;\n                }\n                String deviceName = device.getName();\n                String deviceHardwareAddress = device.getAddress(); // MAC address\n                System.out.println(&quot;Discovered: &quot; + deviceName);\n                Log.d(&quot;PERMISSIONS&quot;, &quot;Discovered: &quot; + deviceName);\n            }\n        }\n    };\n</code></pre>\n<p>Any advice about this piece of code?</p>\n<p>Android studio seems to obligate to check about the permissions in the Bluetooth code but this par of code is only executed after enabling the Bluetooth permissions manually at the beginning of the program.</p>\n"},{"tags":["java","android","base64","retrofit2"],"comments":[{"owner":{"account_id":9899349,"reputation":20524,"user_id":7329832,"display_name":"jps"},"score":0,"creation_date":1623337972,"post_id":67923796,"comment_id":120056805,"body_markdown":"What&#39;s the result of your debugging? E.g what does `image2String` return, is `img` the same as what was returned from the `image2String`, how many bytes does `imageByteArray`contain and how large is the jpg file on your disc?","body":"What&#39;s the result of your debugging? E.g what does <code>image2String</code> return, is <code>img</code> the same as what was returned from the <code>image2String</code>, how many bytes does <code>imageByteArray</code>contain and how large is the jpg file on your disc?"},{"owner":{"account_id":20664898,"reputation":155,"user_id":15172005,"display_name":"lLauriix"},"score":0,"creation_date":1623338735,"post_id":67923796,"comment_id":120057170,"body_markdown":"@jps I&#39;m sorry I just added all that new info into the main post.","body":"@jps I&#39;m sorry I just added all that new info into the main post."},{"owner":{"account_id":20664898,"reputation":155,"user_id":15172005,"display_name":"lLauriix"},"score":0,"creation_date":1623339856,"post_id":67923796,"comment_id":120057708,"body_markdown":"@jps I can see that the string its different but i dont know why, I decoded it with `java.util.Base64.getMimeDecoder().decode` just to avoid that possible error","body":"@jps I can see that the string its different but i dont know why, I decoded it with <code>java.util.Base64.getMimeDecoder().decode</code> just to avoid that possible error"},{"owner":{"account_id":9899349,"reputation":20524,"user_id":7329832,"display_name":"jps"},"score":0,"creation_date":1623340109,"post_id":67923796,"comment_id":120057828,"body_markdown":"thanks for quickly updating the post. So you got indeed a valid base64 encoded jpg, the second string is Mime encoded (base64 with linebreaks after 76 characters), so the use of MimeDecoder seems correct. I can&#39;t test that code right now, but with all the details added, I hope someone can help. When you get rid of the `\\n`, the string can be decoded without problems on base64decode.org and you get the original image back. And 2.9k is also correct.","body":"thanks for quickly updating the post. So you got indeed a valid base64 encoded jpg, the second string is Mime encoded (base64 with linebreaks after 76 characters), so the use of MimeDecoder seems correct. I can&#39;t test that code right now, but with all the details added, I hope someone can help. When you get rid of the <code>\\n</code>, the string can be decoded without problems on base64decode.org and you get the original image back. And 2.9k is also correct."},{"owner":{"account_id":9899349,"reputation":20524,"user_id":7329832,"display_name":"jps"},"score":0,"creation_date":1623340701,"post_id":67923796,"comment_id":120058088,"body_markdown":"you&#39;re welcome. See also my comment under the answer.","body":"you&#39;re welcome. See also my comment under the answer."}],"answers":[{"comments":[{"owner":{"account_id":9899349,"reputation":20524,"user_id":7329832,"display_name":"jps"},"score":0,"creation_date":1623340654,"post_id":67924626,"comment_id":120058064,"body_markdown":"can you try without deleting the `\\n`, only removing the quotes? The mimedecoder should handle the `\\n`","body":"can you try without deleting the <code>\\n</code>, only removing the quotes? The mimedecoder should handle the <code>\\n</code>"},{"owner":{"account_id":20664898,"reputation":155,"user_id":15172005,"display_name":"lLauriix"},"score":0,"creation_date":1623341189,"post_id":67924626,"comment_id":120058311,"body_markdown":"Sadly If I dont delete them manually I get the same error","body":"Sadly If I dont delete them manually I get the same error"},{"owner":{"account_id":9899349,"reputation":20524,"user_id":7329832,"display_name":"jps"},"score":0,"creation_date":1623355536,"post_id":67924626,"comment_id":120063675,"body_markdown":"ok, thanks for checking. On the other hand, when you remove the linebreaks you don&#39;t need a mimedecode and can just use normal base64 decode.","body":"ok, thanks for checking. On the other hand, when you remove the linebreaks you don&#39;t need a mimedecode and can just use normal base64 decode."}],"tags":[],"owner":{"account_id":20664898,"reputation":155,"user_id":15172005,"display_name":"lLauriix"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1623543474,"creation_date":1623340500,"answer_id":67924626,"question_id":67923796,"body_markdown":"**EDIT: BETTER WAY**\r\n\r\n**INSTEAD OF EDITING THE STRING IN THE SERVER WE SHOULD ENCODE IN ANDROID THIS WAY**\r\n\r\n`Base64.encodeToString(bytes, Base64.NO_WRAP);`\r\n\r\n**AND GET IT IN THE SERVER THE USUAL WAY WITHOUT EDITING THE STRING**\r\n\r\n\r\n`java.util.Base64.getMimeDecoder().decode(yourByteArray);`\r\n\r\n**PREVIOUS WAY:**\r\n\r\nI just had to edit the String that i was getting in the server by removing the quotes surrounding it with `img.substring(1, img.length() - 1)` and the \\n with `img.replace(&quot;\\\\n&quot;, &quot;&quot;)`.\r\n\r\nThe result code in the server is like this: \r\n\r\n```\r\nString fixed = img.substring(1, img.length() - 1).replace(&quot;\\\\n&quot;, &quot;&quot;);\r\nbyte[] imageByteArray = java.util.Base64.getMimeDecoder().decode(fixed);\r\nFileOutputStream stream = new FileOutputStream(&quot;C:\\\\Users\\\\Lau\\\\Desktop\\\\Folder\\\\test.jpg&quot;);\r\nstream.write(imageByteArray);\r\nstream.close();\r\n```\r\n\r\n**Special thanks to @jps**","title":"Can&#39;t open Base64 encoded image sent from Android to my Intellij server","body":"<p><strong>EDIT: BETTER WAY</strong></p>\n<p><strong>INSTEAD OF EDITING THE STRING IN THE SERVER WE SHOULD ENCODE IN ANDROID THIS WAY</strong></p>\n<p><code>Base64.encodeToString(bytes, Base64.NO_WRAP);</code></p>\n<p><strong>AND GET IT IN THE SERVER THE USUAL WAY WITHOUT EDITING THE STRING</strong></p>\n<p><code>java.util.Base64.getMimeDecoder().decode(yourByteArray);</code></p>\n<p><strong>PREVIOUS WAY:</strong></p>\n<p>I just had to edit the String that i was getting in the server by removing the quotes surrounding it with <code>img.substring(1, img.length() - 1)</code> and the \\n with <code>img.replace(&quot;\\\\n&quot;, &quot;&quot;)</code>.</p>\n<p>The result code in the server is like this:</p>\n<pre><code>String fixed = img.substring(1, img.length() - 1).replace(&quot;\\\\n&quot;, &quot;&quot;);\nbyte[] imageByteArray = java.util.Base64.getMimeDecoder().decode(fixed);\nFileOutputStream stream = new FileOutputStream(&quot;C:\\\\Users\\\\Lau\\\\Desktop\\\\Folder\\\\test.jpg&quot;);\nstream.write(imageByteArray);\nstream.close();\n</code></pre>\n<p><strong>Special thanks to @jps</strong></p>\n"}],"owner":{"account_id":20664898,"reputation":155,"user_id":15172005,"display_name":"lLauriix"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":293,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":67924626,"answer_count":1,"score":0,"last_activity_date":1697131617,"creation_date":1623337273,"question_id":67923796,"body_markdown":"I can&#39;t see my image once I&#39;ve saved it. \r\n\r\n**Image to Base64 method in my Android project**\r\n\r\n```\r\npublic String image2String(ImageView im) {\r\n        Bitmap bitmap = ((BitmapDrawable) im.getDrawable()).getBitmap();\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        bitmap.compress(Bitmap.CompressFormat.JPEG, 90, baos);\r\n        byte[] bytes = baos.toByteArray();\r\n        return Base64.encodeToString(bytes, Base64.DEFAULT);\r\n    }\r\n```\r\n\r\n**Server side method in Intellij for writting in folder**\r\n\r\n```\r\ntry {\r\n            byte[] imageByteArray = java.util.Base64.getMimeDecoder().decode(img);\r\n            FileOutputStream stream = new FileOutputStream(&quot;C:\\\\Users\\\\Lau\\\\Desktop\\\\Folder\\\\test.jpg&quot;);\r\n            stream.write(imageByteArray);\r\n            stream.close();\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n```\r\n\r\nThere is no exception thrown but I can&#39;t open the file in the folder.\r\n\r\n[Window overview][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/I6OrS.png\r\n\r\n\r\n`image2String` returns the following value: \r\n```\r\n/9j/4AAQSkZJRgABAQAAAQABAAD/4gIoSUNDX1BST0ZJTEUAAQEAAAIYAAAAAAIQAABtbnRyUkdC\r\nIFhZWiAAAAAAAAAAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAA\r\nAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlk\r\nZXNjAAAA8AAAAHRyWFlaAAABZAAAABRnWFlaAAABeAAAABRiWFlaAAABjAAAABRyVFJDAAABoAAA\r\nAChnVFJDAAABoAAAAChiVFJDAAABoAAAACh3dHB0AAAByAAAABRjcHJ0AAAB3AAAADxtbHVjAAAA\r\nAAAAAAEAAAAMZW5VUwAAAFgAAAAcAHMAUgBHAEIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\r\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhZWiAA\r\nAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z3Bh\r\ncmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABYWVogAAAAAAAA9tYAAQAAAADT\r\nLW1sdWMAAAAAAAAAAQAAAAxlblVTAAAAIAAAABwARwBvAG8AZwBsAGUAIABJAG4AYwAuACAAMgAw\r\nADEANv/bAEMAAwICAwICAwMDAwQDAwQFCAUFBAQFCgcHBggMCgwMCwoLCw0OEhANDhEOCwsQFhAR\r\nExQVFRUMDxcYFhQYEhQVFP/bAEMBAwQEBQQFCQUFCRQNCw0UFBQUFBQUFBQUFBQUFBQUFBQUFBQU\r\nFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFP/AABEIALQAeQMBIgACEQEDEQH/xAAeAAEAAgID\r\nAQEBAAAAAAAAAAAABQgBBgIEBwkDCv/EAFEQAAEBBQMFCAoOCAcAAAAAAAABAgMEBREGITEHFXGT\r\n0QgSQVFTVJGxExciMjM3YXSB8BQYNTZEcnN1g5KhssHDIyVCRVJVgtIkQ1ZiZJTh/8QAHAEAAQUB\r\nAQEAAAAAAAAAAAAAAAEEBQYHAgMI/8QALREAAgEDAAYLAQEBAAAAAAAAAAECAwQRBQYWITEyEhMU\r\nFTM0QVFSYnFhJEL/2gAMAwEAAhEDEQA/APqQAD1HAAAAExI+c+Cd6SQI6ceBZ8jRX9OeRqfgjIZc\r\nSEn3hXWhSbXEhJ/37rjop89VeUZV+RkSACMIb1AAA6AAAAAAA9bFaA6sxVpmCiGmVVFR20qKmKXH\r\n1wWU7FVM3nmSzeN52+1imFmsavwt/rFF3Cb/AGPTl4biPnC0cM6amgLNY1PhT70vFOLcxinqUaiH\r\njdOBWlK7p54saj/hxUl0I5ZsytJxkJPVq+daFOj7Lfco2n9SnBt629VFbaaapxrU+c51lJYIqpcR\r\nqRaRwAA0GeF7gAAGAAAAAAMhuPW1wOpM13suifkmuo7Z0ZutJfEfJtdR9bt4WSzRWXg8zVahEWqL\r\nfvUxvpQwaplXbadZOJ+8YaaYeMw6qy0yqoqLVBg75L/klVY59Ta6pSt3FjwGN8nGnSUUzvH3/wCO\r\nidc1tM54j+fROua2kVpGfb7advjGfU4no9zj0ekXrRU406QrSJwp0lEs7zDn0TrmtplJvHp8Oidc\r\n1tM02UaWOmMO5fsXsRU406TNU8hRPPUw59E65raYzzMOfxWua2hsp9xO5n8i9tK/+CnxugonniP5\r\n9E65raYzzH8EdFJ9M1tF2U+513N9i9tF4/sHT0FEs8zDn8VrmtozzMOfxWua2irVResw7l+5e2vr\r\nQdPQUSzzMOfxWua2jPMw5/Fa5raLsovmHci+Z9Q0inKpXsrFFw7pDozd+6al8QiPGFXsbV2+TiPN\r\n6JVcKmPXA2qfKzzp8yBqWVvxaWh82XrQ201LK14trQ+bL1oVuXEtUeBTQACHQAAAAAAAAAAAAAAA\r\nAF+mk7pTiZ6OMwU+nrn11Tq+hx3FGpXTlNLANSyt+LS0Pmy9aG2mo5XLsmtofNl60LdF9ZHJd6fK\r\nU2XEwZXEwdHQAAAAAAAAAAAAAAAAF+AAfP8AaY6+L/qM3oeIv0Go5XfFpaHzZetDbjUcrfi3tB5s\r\nvWhvVHHVmiU+QpsuJgftKD1TWN56v0AAFW8TKy0AALgAAAwLuAADAZQAAYDKL8AGaKfOkJunUUvY\r\nzCMnCafsYNWyqQz2Lydz104dtPXrUMqMsMJvlaWqYIhtVFMcPB68ZdY61VoRS6KJ/vmoo8pRlLMT\r\npb8zzC//AIrzYc0srOlSuaI9NMM3sLyLfVVxX1wPyirnSUJC01lq3NaNNxxkZXen6tCi6iitxSJL\r\nJTpf3TG/9dvYfhEWfmUIrPZ4CIc1W7sjppmvShdVFWp5nllXesQC8NGvwLyq7WWykS16uEt0EVvz\r\ndE8i3j/CozbE8i39VTf1xReBTNVPLtLG+3tz8UaAktiuReU+KplJZFL/AJLf1VN9AdpYm3138EaH\r\nmuL5FvoU5Zoi+Sa6DfPXExd5RO0sNvrv4o0TM8XyTQzPF8k0b3dUXcQdpYu3138EWJXKfZTfKqz+\r\nCZ/2q8SqGO2hZOvu/A6xCoKXJTgBgb4lre+Rb7tnWT/1BA6xDPbNspvfd+B1iFQBSpyclvu2dZRf\r\n3/A+h4flFZTrKtOkRmfQa/SFRUREwOSYaCV0W8XMP0i9J+Vn+Fq0ylWYv/XcHrDRspto5VaFzCLL\r\n5g4ildqqNdiarSp4YTVnFXfvdBsLlmKMZlNtYJyl9b1TgpgYAODzAAAXAAACAAABpQMrUwVnZyhn\r\nizeek2wAA2at/dh0gAD3oaDo281Uj6EXpOT7JMEzZzwj3QQxM2c79v0E9ndgxt8cE5wVNHt9lksz\r\nk1j3EHPYxYV8+ddlYRGGmqpVU4EXiN4RaImHpKW7uhre21kDN+9zffrGx1QpqpNJk9oWyhfXCpVO\r\nB7b7bTJ4mE1aX6Fv+04rut8n/wDMm1+ib/tPnymC3KhnHhJbsNM0zZK1/p9A13XNgP5g3qmth3HG\r\n6hsTEu2W3cW8aZW+vY2th876qhucj7mWub6VReHyjavbQpxyiMv9XLa2pqUcl4fbMWOrdEPF/oXY\r\nfr7Y+yfKvPqrsKUMtKjaXVvuUkd+1/ERjjgr0tFUFjBeZrFNBgy1dQxXyjneX5YAFLkpfxj7RMsU\r\nAA5lvW8i9JeUmCZs54R7oIYmbOL+ke6BrwMezh5JwpZu6PfxIfm/8xsuniqlLN3R7+JD83/mNkja\r\neIi36rr/AGplZUwATAFgZvO8G5SRP1W49P4mmm6SW6VONFftGV1yFf0x4SO8z36EpTykWz3yaSTI\r\nJ4KNI+r7zci2ieNK0k6laIt9F7JX7p1Y/cmWhgIGIiW51LGmXLtp4qMo8qqIlbu58hbZaEdaJKyG\r\nYpxwzz7qkLG8qNpGmzsaMU2kfOyIdq5iHrppe6YaVjfM4NUPz+w7EyumMV5HrfWp10vJyLyslZku\r\niwAAfAitJeVn+Al7PLR880EQS9nvDN6BuY9LiieXEpZu6PfxIfm/8xsuomK6Cle7o9/Eh+b/AMxs\r\nkLTxEXDVfzqKypgAmALAzdwbpJvcpx8X8VNLNzk/uW40fiMLrkK/pjwkd5O/TSShFp36aSUIRlIk\r\nf0FnQtF3Nn5kqY+x3n3VAKxT5ka9Pgz55TNlM6RXyzXWp06dygBZ1ylMqcw/YOD54rthVSlapiAd\r\nETpHysz9EwZJWz6d28bqtaJdwAHk+VmRz9SfKX7uZlGrayTg3svup8dsAc2XOiy6seegVgS/yaDL\r\nKXYqAWZcDfHxMm8WeYRqWOKgEde+GVzTfgr9JNh0zv00kj7EY42ukAr7KDU4n//Z\r\n```\r\nWhile the string that I receive on the server is like this:\r\n\r\n```\r\n&quot;/9j/4AAQSkZJRgABAQAAAQABAAD/4gIoSUNDX1BST0ZJTEUAAQEAAAIYAAAAAAIQAABtbnRyUkdC\\nIFhZWiAAAAAAAAAAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAA\\nAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlk\\nZXNjAAAA8AAAAHRyWFlaAAABZAAAABRnWFlaAAABeAAAABRiWFlaAAABjAAAABRyVFJDAAABoAAA\\nAChnVFJDAAABoAAAAChiVFJDAAABoAAAACh3dHB0AAAByAAAABRjcHJ0AAAB3AAAADxtbHVjAAAA\\nAAAAAAEAAAAMZW5VUwAAAFgAAAAcAHMAUgBHAEIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhZWiAA\\nAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z3Bh\\ncmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABYWVogAAAAAAAA9tYAAQAAAADT\\nLW1sdWMAAAAAAAAAAQAAAAxlblVTAAAAIAAAABwARwBvAG8AZwBsAGUAIABJAG4AYwAuACAAMgAw\\nADEANv/bAEMAAwICAwICAwMDAwQDAwQFCAUFBAQFCgcHBggMCgwMCwoLCw0OEhANDhEOCwsQFhAR\\nExQVFRUMDxcYFhQYEhQVFP/bAEMBAwQEBQQFCQUFCRQNCw0UFBQUFBQUFBQUFBQUFBQUFBQUFBQU\\nFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFP/AABEIALQAeQMBIgACEQEDEQH/xAAeAAEAAgID\\nAQEBAAAAAAAAAAAABQgBBgIEBwkDCv/EAFEQAAEBBQMFCAoOCAcAAAAAAAABAgMEBREGITEHFXGT\\n0QgSQVFTVJGxExciMjM3YXSB8BQYNTZEcnN1g5KhssHDIyVCRVJVgtIkQ1ZiZJTh/8QAHAEAAQUB\\nAQEAAAAAAAAAAAAAAAEEBQYHAgMI/8QALREAAgEDAAYLAQEBAAAAAAAAAAECAwQRBQYWITEyEhMU\\nFTM0QVFSYnFhJEL/2gAMAwEAAhEDEQA/APqQAD1HAAAAExI+c+Cd6SQI6ceBZ8jRX9OeRqfgjIZc\\nSEn3hXWhSbXEhJ/37rjop89VeUZV+RkSACMIb1AAA6AAAAAAA9bFaA6sxVpmCiGmVVFR20qKmKXH\\n1wWU7FVM3nmSzeN52+1imFmsavwt/rFF3Cb/AGPTl4biPnC0cM6amgLNY1PhT70vFOLcxinqUaiH\\njdOBWlK7p54saj/hxUl0I5ZsytJxkJPVq+daFOj7Lfco2n9SnBt629VFbaaapxrU+c51lJYIqpcR\\nqRaRwAA0GeF7gAAGAAAAAAMhuPW1wOpM13suifkmuo7Z0ZutJfEfJtdR9bt4WSzRWXg8zVahEWqL\\nfvUxvpQwaplXbadZOJ+8YaaYeMw6qy0yqoqLVBg75L/klVY59Ta6pSt3FjwGN8nGnSUUzvH3/wCO\\nidc1tM54j+fROua2kVpGfb7advjGfU4no9zj0ekXrRU406QrSJwp0lEs7zDn0TrmtplJvHp8Oidc\\n1tM02UaWOmMO5fsXsRU406TNU8hRPPUw59E65raYzzMOfxWua2hsp9xO5n8i9tK/+CnxugonniP5\\n9E65raYzzH8EdFJ9M1tF2U+513N9i9tF4/sHT0FEs8zDn8VrmtozzMOfxWua2irVResw7l+5e2vr\\nQdPQUSzzMOfxWua2jPMw5/Fa5raLsovmHci+Z9Q0inKpXsrFFw7pDozd+6al8QiPGFXsbV2+TiPN\\n6JVcKmPXA2qfKzzp8yBqWVvxaWh82XrQ201LK14trQ+bL1oVuXEtUeBTQACHQAAAAAAAAAAAAAAA\\nAF+mk7pTiZ6OMwU+nrn11Tq+hx3FGpXTlNLANSyt+LS0Pmy9aG2mo5XLsmtofNl60LdF9ZHJd6fK\\nU2XEwZXEwdHQAAAAAAAAAAAAAAAAF+AAfP8AaY6+L/qM3oeIv0Go5XfFpaHzZetDbjUcrfi3tB5s\\nvWhvVHHVmiU+QpsuJgftKD1TWN56v0AAFW8TKy0AALgAAAwLuAADAZQAAYDKL8AGaKfOkJunUUvY\\nzCMnCafsYNWyqQz2Lydz104dtPXrUMqMsMJvlaWqYIhtVFMcPB68ZdY61VoRS6KJ/vmoo8pRlLMT\\npb8zzC//AIrzYc0srOlSuaI9NMM3sLyLfVVxX1wPyirnSUJC01lq3NaNNxxkZXen6tCi6iitxSJL\\nJTpf3TG/9dvYfhEWfmUIrPZ4CIc1W7sjppmvShdVFWp5nllXesQC8NGvwLyq7WWykS16uEt0EVvz\\ndE8i3j/CozbE8i39VTf1xReBTNVPLtLG+3tz8UaAktiuReU+KplJZFL/AJLf1VN9AdpYm3138EaH\\nmuL5FvoU5Zoi+Sa6DfPXExd5RO0sNvrv4o0TM8XyTQzPF8k0b3dUXcQdpYu3138EWJXKfZTfKqz+\\nCZ/2q8SqGO2hZOvu/A6xCoKXJTgBgb4lre+Rb7tnWT/1BA6xDPbNspvfd+B1iFQBSpyclvu2dZRf\\n3/A+h4flFZTrKtOkRmfQa/SFRUREwOSYaCV0W8XMP0i9J+Vn+Fq0ylWYv/XcHrDRspto5VaFzCLL\\n5g4ildqqNdiarSp4YTVnFXfvdBsLlmKMZlNtYJyl9b1TgpgYAODzAAAXAAACAAABpQMrUwVnZyhn\\nizeek2wAA2at/dh0gAD3oaDo281Uj6EXpOT7JMEzZzwj3QQxM2c79v0E9ndgxt8cE5wVNHt9lksz\\nk1j3EHPYxYV8+ddlYRGGmqpVU4EXiN4RaImHpKW7uhre21kDN+9zffrGx1QpqpNJk9oWyhfXCpVO\\nB7b7bTJ4mE1aX6Fv+04rut8n/wDMm1+ib/tPnymC3KhnHhJbsNM0zZK1/p9A13XNgP5g3qmth3HG\\n6hsTEu2W3cW8aZW+vY2th876qhucj7mWub6VReHyjavbQpxyiMv9XLa2pqUcl4fbMWOrdEPF/oXY\\nfr7Y+yfKvPqrsKUMtKjaXVvuUkd+1/ERjjgr0tFUFjBeZrFNBgy1dQxXyjneX5YAFLkpfxj7RMsU\\nAA5lvW8i9JeUmCZs54R7oIYmbOL+ke6BrwMezh5JwpZu6PfxIfm/8xsuniqlLN3R7+JD83/mNkja\\neIi36rr/AGplZUwATAFgZvO8G5SRP1W49P4mmm6SW6VONFftGV1yFf0x4SO8z36EpTykWz3yaSTI\\nJ4KNI+r7zci2ieNK0k6laIt9F7JX7p1Y/cmWhgIGIiW51LGmXLtp4qMo8qqIlbu58hbZaEdaJKyG\\nYpxwzz7qkLG8qNpGmzsaMU2kfOyIdq5iHrppe6YaVjfM4NUPz+w7EyumMV5HrfWp10vJyLyslZku\\niwAAfAitJeVn+Al7PLR880EQS9nvDN6BuY9LiieXEpZu6PfxIfm/8xsuomK6Cle7o9/Eh+b/AMxs\\nkLTxEXDVfzqKypgAmALAzdwbpJvcpx8X8VNLNzk/uW40fiMLrkK/pjwkd5O/TSShFp36aSUIRlIk\\nf0FnQtF3Nn5kqY+x3n3VAKxT5ka9Pgz55TNlM6RXyzXWp06dygBZ1ylMqcw/YOD54rthVSlapiAd\\nETpHysz9EwZJWz6d28bqtaJdwAHk+VmRz9SfKX7uZlGrayTg3svup8dsAc2XOiy6seegVgS/yaDL\\nKXYqAWZcDfHxMm8WeYRqWOKgEde+GVzTfgr9JNh0zv00kj7EY42ukAr7KDU4n//Z\\n&quot;\r\n```\r\n\r\nIn the server `imageByteArray` has a lenght of 2994 bytes and the file on my folder is 2,92 KB (2.994 bytes).\r\n\r\n","title":"Can&#39;t open Base64 encoded image sent from Android to my Intellij server","body":"<p>I can't see my image once I've saved it.</p>\n<p><strong>Image to Base64 method in my Android project</strong></p>\n<pre><code>public String image2String(ImageView im) {\n        Bitmap bitmap = ((BitmapDrawable) im.getDrawable()).getBitmap();\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        bitmap.compress(Bitmap.CompressFormat.JPEG, 90, baos);\n        byte[] bytes = baos.toByteArray();\n        return Base64.encodeToString(bytes, Base64.DEFAULT);\n    }\n</code></pre>\n<p><strong>Server side method in Intellij for writting in folder</strong></p>\n<pre><code>try {\n            byte[] imageByteArray = java.util.Base64.getMimeDecoder().decode(img);\n            FileOutputStream stream = new FileOutputStream(&quot;C:\\\\Users\\\\Lau\\\\Desktop\\\\Folder\\\\test.jpg&quot;);\n            stream.write(imageByteArray);\n            stream.close();\n        } catch (Exception e) {\n            return false;\n        }\n</code></pre>\n<p>There is no exception thrown but I can't open the file in the folder.</p>\n<p><a href=\"https://i.stack.imgur.com/I6OrS.png\" rel=\"nofollow noreferrer\">Window overview</a></p>\n<p><code>image2String</code> returns the following value:</p>\n<pre><code>/9j/4AAQSkZJRgABAQAAAQABAAD/4gIoSUNDX1BST0ZJTEUAAQEAAAIYAAAAAAIQAABtbnRyUkdC\nIFhZWiAAAAAAAAAAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAA\nAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlk\nZXNjAAAA8AAAAHRyWFlaAAABZAAAABRnWFlaAAABeAAAABRiWFlaAAABjAAAABRyVFJDAAABoAAA\nAChnVFJDAAABoAAAAChiVFJDAAABoAAAACh3dHB0AAAByAAAABRjcHJ0AAAB3AAAADxtbHVjAAAA\nAAAAAAEAAAAMZW5VUwAAAFgAAAAcAHMAUgBHAEIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhZWiAA\nAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z3Bh\ncmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABYWVogAAAAAAAA9tYAAQAAAADT\nLW1sdWMAAAAAAAAAAQAAAAxlblVTAAAAIAAAABwARwBvAG8AZwBsAGUAIABJAG4AYwAuACAAMgAw\nADEANv/bAEMAAwICAwICAwMDAwQDAwQFCAUFBAQFCgcHBggMCgwMCwoLCw0OEhANDhEOCwsQFhAR\nExQVFRUMDxcYFhQYEhQVFP/bAEMBAwQEBQQFCQUFCRQNCw0UFBQUFBQUFBQUFBQUFBQUFBQUFBQU\nFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFP/AABEIALQAeQMBIgACEQEDEQH/xAAeAAEAAgID\nAQEBAAAAAAAAAAAABQgBBgIEBwkDCv/EAFEQAAEBBQMFCAoOCAcAAAAAAAABAgMEBREGITEHFXGT\n0QgSQVFTVJGxExciMjM3YXSB8BQYNTZEcnN1g5KhssHDIyVCRVJVgtIkQ1ZiZJTh/8QAHAEAAQUB\nAQEAAAAAAAAAAAAAAAEEBQYHAgMI/8QALREAAgEDAAYLAQEBAAAAAAAAAAECAwQRBQYWITEyEhMU\nFTM0QVFSYnFhJEL/2gAMAwEAAhEDEQA/APqQAD1HAAAAExI+c+Cd6SQI6ceBZ8jRX9OeRqfgjIZc\nSEn3hXWhSbXEhJ/37rjop89VeUZV+RkSACMIb1AAA6AAAAAAA9bFaA6sxVpmCiGmVVFR20qKmKXH\n1wWU7FVM3nmSzeN52+1imFmsavwt/rFF3Cb/AGPTl4biPnC0cM6amgLNY1PhT70vFOLcxinqUaiH\njdOBWlK7p54saj/hxUl0I5ZsytJxkJPVq+daFOj7Lfco2n9SnBt629VFbaaapxrU+c51lJYIqpcR\nqRaRwAA0GeF7gAAGAAAAAAMhuPW1wOpM13suifkmuo7Z0ZutJfEfJtdR9bt4WSzRWXg8zVahEWqL\nfvUxvpQwaplXbadZOJ+8YaaYeMw6qy0yqoqLVBg75L/klVY59Ta6pSt3FjwGN8nGnSUUzvH3/wCO\nidc1tM54j+fROua2kVpGfb7advjGfU4no9zj0ekXrRU406QrSJwp0lEs7zDn0TrmtplJvHp8Oidc\n1tM02UaWOmMO5fsXsRU406TNU8hRPPUw59E65raYzzMOfxWua2hsp9xO5n8i9tK/+CnxugonniP5\n9E65raYzzH8EdFJ9M1tF2U+513N9i9tF4/sHT0FEs8zDn8VrmtozzMOfxWua2irVResw7l+5e2vr\nQdPQUSzzMOfxWua2jPMw5/Fa5raLsovmHci+Z9Q0inKpXsrFFw7pDozd+6al8QiPGFXsbV2+TiPN\n6JVcKmPXA2qfKzzp8yBqWVvxaWh82XrQ201LK14trQ+bL1oVuXEtUeBTQACHQAAAAAAAAAAAAAAA\nAF+mk7pTiZ6OMwU+nrn11Tq+hx3FGpXTlNLANSyt+LS0Pmy9aG2mo5XLsmtofNl60LdF9ZHJd6fK\nU2XEwZXEwdHQAAAAAAAAAAAAAAAAF+AAfP8AaY6+L/qM3oeIv0Go5XfFpaHzZetDbjUcrfi3tB5s\nvWhvVHHVmiU+QpsuJgftKD1TWN56v0AAFW8TKy0AALgAAAwLuAADAZQAAYDKL8AGaKfOkJunUUvY\nzCMnCafsYNWyqQz2Lydz104dtPXrUMqMsMJvlaWqYIhtVFMcPB68ZdY61VoRS6KJ/vmoo8pRlLMT\npb8zzC//AIrzYc0srOlSuaI9NMM3sLyLfVVxX1wPyirnSUJC01lq3NaNNxxkZXen6tCi6iitxSJL\nJTpf3TG/9dvYfhEWfmUIrPZ4CIc1W7sjppmvShdVFWp5nllXesQC8NGvwLyq7WWykS16uEt0EVvz\ndE8i3j/CozbE8i39VTf1xReBTNVPLtLG+3tz8UaAktiuReU+KplJZFL/AJLf1VN9AdpYm3138EaH\nmuL5FvoU5Zoi+Sa6DfPXExd5RO0sNvrv4o0TM8XyTQzPF8k0b3dUXcQdpYu3138EWJXKfZTfKqz+\nCZ/2q8SqGO2hZOvu/A6xCoKXJTgBgb4lre+Rb7tnWT/1BA6xDPbNspvfd+B1iFQBSpyclvu2dZRf\n3/A+h4flFZTrKtOkRmfQa/SFRUREwOSYaCV0W8XMP0i9J+Vn+Fq0ylWYv/XcHrDRspto5VaFzCLL\n5g4ildqqNdiarSp4YTVnFXfvdBsLlmKMZlNtYJyl9b1TgpgYAODzAAAXAAACAAABpQMrUwVnZyhn\nizeek2wAA2at/dh0gAD3oaDo281Uj6EXpOT7JMEzZzwj3QQxM2c79v0E9ndgxt8cE5wVNHt9lksz\nk1j3EHPYxYV8+ddlYRGGmqpVU4EXiN4RaImHpKW7uhre21kDN+9zffrGx1QpqpNJk9oWyhfXCpVO\nB7b7bTJ4mE1aX6Fv+04rut8n/wDMm1+ib/tPnymC3KhnHhJbsNM0zZK1/p9A13XNgP5g3qmth3HG\n6hsTEu2W3cW8aZW+vY2th876qhucj7mWub6VReHyjavbQpxyiMv9XLa2pqUcl4fbMWOrdEPF/oXY\nfr7Y+yfKvPqrsKUMtKjaXVvuUkd+1/ERjjgr0tFUFjBeZrFNBgy1dQxXyjneX5YAFLkpfxj7RMsU\nAA5lvW8i9JeUmCZs54R7oIYmbOL+ke6BrwMezh5JwpZu6PfxIfm/8xsuniqlLN3R7+JD83/mNkja\neIi36rr/AGplZUwATAFgZvO8G5SRP1W49P4mmm6SW6VONFftGV1yFf0x4SO8z36EpTykWz3yaSTI\nJ4KNI+r7zci2ieNK0k6laIt9F7JX7p1Y/cmWhgIGIiW51LGmXLtp4qMo8qqIlbu58hbZaEdaJKyG\nYpxwzz7qkLG8qNpGmzsaMU2kfOyIdq5iHrppe6YaVjfM4NUPz+w7EyumMV5HrfWp10vJyLyslZku\niwAAfAitJeVn+Al7PLR880EQS9nvDN6BuY9LiieXEpZu6PfxIfm/8xsuomK6Cle7o9/Eh+b/AMxs\nkLTxEXDVfzqKypgAmALAzdwbpJvcpx8X8VNLNzk/uW40fiMLrkK/pjwkd5O/TSShFp36aSUIRlIk\nf0FnQtF3Nn5kqY+x3n3VAKxT5ka9Pgz55TNlM6RXyzXWp06dygBZ1ylMqcw/YOD54rthVSlapiAd\nETpHysz9EwZJWz6d28bqtaJdwAHk+VmRz9SfKX7uZlGrayTg3svup8dsAc2XOiy6seegVgS/yaDL\nKXYqAWZcDfHxMm8WeYRqWOKgEde+GVzTfgr9JNh0zv00kj7EY42ukAr7KDU4n//Z\n</code></pre>\n<p>While the string that I receive on the server is like this:</p>\n<pre><code>&quot;/9j/4AAQSkZJRgABAQAAAQABAAD/4gIoSUNDX1BST0ZJTEUAAQEAAAIYAAAAAAIQAABtbnRyUkdC\\nIFhZWiAAAAAAAAAAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAA\\nAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlk\\nZXNjAAAA8AAAAHRyWFlaAAABZAAAABRnWFlaAAABeAAAABRiWFlaAAABjAAAABRyVFJDAAABoAAA\\nAChnVFJDAAABoAAAAChiVFJDAAABoAAAACh3dHB0AAAByAAAABRjcHJ0AAAB3AAAADxtbHVjAAAA\\nAAAAAAEAAAAMZW5VUwAAAFgAAAAcAHMAUgBHAEIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhZWiAA\\nAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z3Bh\\ncmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABYWVogAAAAAAAA9tYAAQAAAADT\\nLW1sdWMAAAAAAAAAAQAAAAxlblVTAAAAIAAAABwARwBvAG8AZwBsAGUAIABJAG4AYwAuACAAMgAw\\nADEANv/bAEMAAwICAwICAwMDAwQDAwQFCAUFBAQFCgcHBggMCgwMCwoLCw0OEhANDhEOCwsQFhAR\\nExQVFRUMDxcYFhQYEhQVFP/bAEMBAwQEBQQFCQUFCRQNCw0UFBQUFBQUFBQUFBQUFBQUFBQUFBQU\\nFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFP/AABEIALQAeQMBIgACEQEDEQH/xAAeAAEAAgID\\nAQEBAAAAAAAAAAAABQgBBgIEBwkDCv/EAFEQAAEBBQMFCAoOCAcAAAAAAAABAgMEBREGITEHFXGT\\n0QgSQVFTVJGxExciMjM3YXSB8BQYNTZEcnN1g5KhssHDIyVCRVJVgtIkQ1ZiZJTh/8QAHAEAAQUB\\nAQEAAAAAAAAAAAAAAAEEBQYHAgMI/8QALREAAgEDAAYLAQEBAAAAAAAAAAECAwQRBQYWITEyEhMU\\nFTM0QVFSYnFhJEL/2gAMAwEAAhEDEQA/APqQAD1HAAAAExI+c+Cd6SQI6ceBZ8jRX9OeRqfgjIZc\\nSEn3hXWhSbXEhJ/37rjop89VeUZV+RkSACMIb1AAA6AAAAAAA9bFaA6sxVpmCiGmVVFR20qKmKXH\\n1wWU7FVM3nmSzeN52+1imFmsavwt/rFF3Cb/AGPTl4biPnC0cM6amgLNY1PhT70vFOLcxinqUaiH\\njdOBWlK7p54saj/hxUl0I5ZsytJxkJPVq+daFOj7Lfco2n9SnBt629VFbaaapxrU+c51lJYIqpcR\\nqRaRwAA0GeF7gAAGAAAAAAMhuPW1wOpM13suifkmuo7Z0ZutJfEfJtdR9bt4WSzRWXg8zVahEWqL\\nfvUxvpQwaplXbadZOJ+8YaaYeMw6qy0yqoqLVBg75L/klVY59Ta6pSt3FjwGN8nGnSUUzvH3/wCO\\nidc1tM54j+fROua2kVpGfb7advjGfU4no9zj0ekXrRU406QrSJwp0lEs7zDn0TrmtplJvHp8Oidc\\n1tM02UaWOmMO5fsXsRU406TNU8hRPPUw59E65raYzzMOfxWua2hsp9xO5n8i9tK/+CnxugonniP5\\n9E65raYzzH8EdFJ9M1tF2U+513N9i9tF4/sHT0FEs8zDn8VrmtozzMOfxWua2irVResw7l+5e2vr\\nQdPQUSzzMOfxWua2jPMw5/Fa5raLsovmHci+Z9Q0inKpXsrFFw7pDozd+6al8QiPGFXsbV2+TiPN\\n6JVcKmPXA2qfKzzp8yBqWVvxaWh82XrQ201LK14trQ+bL1oVuXEtUeBTQACHQAAAAAAAAAAAAAAA\\nAF+mk7pTiZ6OMwU+nrn11Tq+hx3FGpXTlNLANSyt+LS0Pmy9aG2mo5XLsmtofNl60LdF9ZHJd6fK\\nU2XEwZXEwdHQAAAAAAAAAAAAAAAAF+AAfP8AaY6+L/qM3oeIv0Go5XfFpaHzZetDbjUcrfi3tB5s\\nvWhvVHHVmiU+QpsuJgftKD1TWN56v0AAFW8TKy0AALgAAAwLuAADAZQAAYDKL8AGaKfOkJunUUvY\\nzCMnCafsYNWyqQz2Lydz104dtPXrUMqMsMJvlaWqYIhtVFMcPB68ZdY61VoRS6KJ/vmoo8pRlLMT\\npb8zzC//AIrzYc0srOlSuaI9NMM3sLyLfVVxX1wPyirnSUJC01lq3NaNNxxkZXen6tCi6iitxSJL\\nJTpf3TG/9dvYfhEWfmUIrPZ4CIc1W7sjppmvShdVFWp5nllXesQC8NGvwLyq7WWykS16uEt0EVvz\\ndE8i3j/CozbE8i39VTf1xReBTNVPLtLG+3tz8UaAktiuReU+KplJZFL/AJLf1VN9AdpYm3138EaH\\nmuL5FvoU5Zoi+Sa6DfPXExd5RO0sNvrv4o0TM8XyTQzPF8k0b3dUXcQdpYu3138EWJXKfZTfKqz+\\nCZ/2q8SqGO2hZOvu/A6xCoKXJTgBgb4lre+Rb7tnWT/1BA6xDPbNspvfd+B1iFQBSpyclvu2dZRf\\n3/A+h4flFZTrKtOkRmfQa/SFRUREwOSYaCV0W8XMP0i9J+Vn+Fq0ylWYv/XcHrDRspto5VaFzCLL\\n5g4ildqqNdiarSp4YTVnFXfvdBsLlmKMZlNtYJyl9b1TgpgYAODzAAAXAAACAAABpQMrUwVnZyhn\\nizeek2wAA2at/dh0gAD3oaDo281Uj6EXpOT7JMEzZzwj3QQxM2c79v0E9ndgxt8cE5wVNHt9lksz\\nk1j3EHPYxYV8+ddlYRGGmqpVU4EXiN4RaImHpKW7uhre21kDN+9zffrGx1QpqpNJk9oWyhfXCpVO\\nB7b7bTJ4mE1aX6Fv+04rut8n/wDMm1+ib/tPnymC3KhnHhJbsNM0zZK1/p9A13XNgP5g3qmth3HG\\n6hsTEu2W3cW8aZW+vY2th876qhucj7mWub6VReHyjavbQpxyiMv9XLa2pqUcl4fbMWOrdEPF/oXY\\nfr7Y+yfKvPqrsKUMtKjaXVvuUkd+1/ERjjgr0tFUFjBeZrFNBgy1dQxXyjneX5YAFLkpfxj7RMsU\\nAA5lvW8i9JeUmCZs54R7oIYmbOL+ke6BrwMezh5JwpZu6PfxIfm/8xsuniqlLN3R7+JD83/mNkja\\neIi36rr/AGplZUwATAFgZvO8G5SRP1W49P4mmm6SW6VONFftGV1yFf0x4SO8z36EpTykWz3yaSTI\\nJ4KNI+r7zci2ieNK0k6laIt9F7JX7p1Y/cmWhgIGIiW51LGmXLtp4qMo8qqIlbu58hbZaEdaJKyG\\nYpxwzz7qkLG8qNpGmzsaMU2kfOyIdq5iHrppe6YaVjfM4NUPz+w7EyumMV5HrfWp10vJyLyslZku\\niwAAfAitJeVn+Al7PLR880EQS9nvDN6BuY9LiieXEpZu6PfxIfm/8xsuomK6Cle7o9/Eh+b/AMxs\\nkLTxEXDVfzqKypgAmALAzdwbpJvcpx8X8VNLNzk/uW40fiMLrkK/pjwkd5O/TSShFp36aSUIRlIk\\nf0FnQtF3Nn5kqY+x3n3VAKxT5ka9Pgz55TNlM6RXyzXWp06dygBZ1ylMqcw/YOD54rthVSlapiAd\\nETpHysz9EwZJWz6d28bqtaJdwAHk+VmRz9SfKX7uZlGrayTg3svup8dsAc2XOiy6seegVgS/yaDL\\nKXYqAWZcDfHxMm8WeYRqWOKgEde+GVzTfgr9JNh0zv00kj7EY42ukAr7KDU4n//Z\\n&quot;\n</code></pre>\n<p>In the server <code>imageByteArray</code> has a lenght of 2994 bytes and the file on my folder is 2,92 KB (2.994 bytes).</p>\n"},{"tags":["java","android","kotlin"],"answers":[{"tags":[],"owner":{"account_id":14722107,"reputation":5143,"user_id":10632369,"display_name":"tomerpacific"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697115510,"creation_date":1697114898,"answer_id":77280721,"question_id":77280683,"body_markdown":"The top line in the stacktrace states that: **&quot;lateinit property binding has not been initialized&quot;**. \r\nInside the SplashActivity, in the onCreate method, there is no assignment for the binding variable.\r\n\r\nYou could see in the [documentation][1], that you need to use the inflate method to initialize the binding variable.\r\n\r\n\r\n    class SplashActivity : AppCompatActivity() {\r\n    \r\n        private lateinit var binding: ActivitySplashBinding\r\n    \r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            binding = ActivitySplashBinding.inflate(layoutInflater)\r\n            val view = binding.root\r\n            setContentView(view)\r\n       }\r\n    }\r\n\r\n  [1]: https://developer.android.com/topic/libraries/view-binding\r\n\r\n**Also notice that in your original code you are calling setContentView twice.**\r\n","title":"UninitializedPropertyAccessException","body":"<p>The top line in the stacktrace states that: <strong>&quot;lateinit property binding has not been initialized&quot;</strong>.\nInside the SplashActivity, in the onCreate method, there is no assignment for the binding variable.</p>\n<p>You could see in the <a href=\"https://developer.android.com/topic/libraries/view-binding\" rel=\"nofollow noreferrer\">documentation</a>, that you need to use the inflate method to initialize the binding variable.</p>\n<pre><code>class SplashActivity : AppCompatActivity() {\n\n    private lateinit var binding: ActivitySplashBinding\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        binding = ActivitySplashBinding.inflate(layoutInflater)\n        val view = binding.root\n        setContentView(view)\n   }\n}\n</code></pre>\n<p><strong>Also notice that in your original code you are calling setContentView twice.</strong></p>\n"}],"owner":{"account_id":29654094,"reputation":3,"user_id":22727230,"display_name":"Gurasis Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"accepted_answer_id":77280721,"answer_count":1,"score":-4,"last_activity_date":1697131531,"creation_date":1697114588,"question_id":77280683,"body_markdown":"```none\r\nFATAL EXCEPTION: main\r\nProcess: com.example.organizeme, PID: 6281\r\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.organizeme/com.example.organizeme.SplashActivity}: kotlin.UninitializedPropertyAccessException: lateinit property binding has not been initialized\r\n\t  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2646)\r\n\t  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2707)\r\n\t  at android.app.ActivityThread.-wrap12(ActivityThread.java)\r\n\t  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1460)\r\n   \t  at android.os.Handler.dispatchMessage(Handler.java:102)\r\n\t  at android.os.Looper.loop(Looper.java:154)\r\n\t  at android.app.ActivityThread.main(ActivityThread.java:6077)\r\n\t  at java.lang.reflect.Method.invoke(Native Method)\r\n\t  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)\r\n\t  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:756)\r\n  Caused by: kotlin.UninitializedPropertyAccessException: lateinit property binding has not been initialized\r\n\t  at com.example.organizeme.SplashActivity.onCreate(SplashActivity.kt:31)\r\n\t  at android.app.Activity.performCreate(Activity.java:6662)\r\n\t  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1118)\r\n\t  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2599)\r\n\t  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2707)&#160;\r\n\t  at android.app.ActivityThread.-wrap12(ActivityThread.java)&#160;\r\n\t  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1460)&#160;\r\n\t  at android.os.Handler.dispatchMessage(Handler.java:102)&#160;\r\n\t  at android.os.Looper.loop(Looper.java:154)&#160;\r\n\t  at android.app.ActivityThread.main(ActivityThread.java:6077)&#160;\r\n\t  at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n\t  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)&#160; \r\n\t  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:756)\r\n```\r\n\r\nI tried searching online for resolving the errors, but couldn&#39;t get a clear or concise solution to the errors\r\n\r\n***SplashActivity.kt***\r\n```kotlin\r\npackage com.example.organizeme\r\n\r\nimport android.annotation.SuppressLint\r\nimport android.graphics.Typeface\r\nimport android.os.Build\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.view.WindowInsets\r\nimport android.view.WindowManager\r\nimport com.example.organizeme.databinding.ActivitySplashBinding\r\n\r\n@SuppressLint(&quot;CustomSplashScreen&quot;)\r\nclass SplashActivity : AppCompatActivity() {\r\n\r\n    private lateinit var binding: ActivitySplashBinding\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_splash)\r\n\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n            window.insetsController?.hide(WindowInsets.Type.statusBars())\r\n        } else {\r\n            @Suppress(&quot;DEPRECATION&quot;)\r\n            window.setFlags(\r\n                WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n                WindowManager.LayoutParams.FLAG_FULLSCREEN\r\n            )\r\n        }\r\n\r\n        val view = binding.root\r\n\r\n        setContentView(view)\r\n\r\n        val typeFace : Typeface = Typeface.createFromAsset(assets, &quot;carbon bl.otf&quot;)\r\n        binding.tvAppName.typeface = typeFace\r\n    }\r\n}\r\n```\r\n***activity_splash.xml***\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;!--suppress XmlUnusedNamespaceDeclaration --&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:gravity=&quot;center&quot;\r\n    android:background=&quot;@drawable/splash_screen&quot;\r\n    tools:context=&quot;.SplashActivity&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/tvAppName&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:gravity=&quot;center&quot;\r\n        android:text=&quot;@string/app_name&quot;\r\n        android:textColor=&quot;@android:color/white&quot;\r\n        android:textSize=&quot;@dimen/splash_screen_title_text_size&quot;\r\n        android:textStyle=&quot;bold&quot; /&gt;\r\n&lt;/LinearLayout&gt;\r\n```\r\n***AndroidManifest.xml***\r\n\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.OrganizeMe&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.SplashActivity&quot;\r\n            android:screenOrientation=&quot;fullSensor&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:label=&quot;@string/title_activity_splash&quot;\r\n            android:theme=&quot;@style/Theme.OrganizeMe&quot; &gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\n","title":"UninitializedPropertyAccessException","body":"<pre class=\"lang-none prettyprint-override\"><code>FATAL EXCEPTION: main\nProcess: com.example.organizeme, PID: 6281\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.organizeme/com.example.organizeme.SplashActivity}: kotlin.UninitializedPropertyAccessException: lateinit property binding has not been initialized\n      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2646)\n      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2707)\n      at android.app.ActivityThread.-wrap12(ActivityThread.java)\n      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1460)\n      at android.os.Handler.dispatchMessage(Handler.java:102)\n      at android.os.Looper.loop(Looper.java:154)\n      at android.app.ActivityThread.main(ActivityThread.java:6077)\n      at java.lang.reflect.Method.invoke(Native Method)\n      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)\n      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:756)\n  Caused by: kotlin.UninitializedPropertyAccessException: lateinit property binding has not been initialized\n      at com.example.organizeme.SplashActivity.onCreate(SplashActivity.kt:31)\n      at android.app.Activity.performCreate(Activity.java:6662)\n      at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1118)\n      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2599)\n      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2707) \n      at android.app.ActivityThread.-wrap12(ActivityThread.java) \n      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1460) \n      at android.os.Handler.dispatchMessage(Handler.java:102) \n      at android.os.Looper.loop(Looper.java:154) \n      at android.app.ActivityThread.main(ActivityThread.java:6077) \n      at java.lang.reflect.Method.invoke(Native Method) \n      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)  \n      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:756)\n</code></pre>\n<p>I tried searching online for resolving the errors, but couldn't get a clear or concise solution to the errors</p>\n<p><em><strong>SplashActivity.kt</strong></em></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>package com.example.organizeme\n\nimport android.annotation.SuppressLint\nimport android.graphics.Typeface\nimport android.os.Build\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\nimport android.view.WindowInsets\nimport android.view.WindowManager\nimport com.example.organizeme.databinding.ActivitySplashBinding\n\n@SuppressLint(&quot;CustomSplashScreen&quot;)\nclass SplashActivity : AppCompatActivity() {\n\n    private lateinit var binding: ActivitySplashBinding\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_splash)\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n            window.insetsController?.hide(WindowInsets.Type.statusBars())\n        } else {\n            @Suppress(&quot;DEPRECATION&quot;)\n            window.setFlags(\n                WindowManager.LayoutParams.FLAG_FULLSCREEN,\n                WindowManager.LayoutParams.FLAG_FULLSCREEN\n            )\n        }\n\n        val view = binding.root\n\n        setContentView(view)\n\n        val typeFace : Typeface = Typeface.createFromAsset(assets, &quot;carbon bl.otf&quot;)\n        binding.tvAppName.typeface = typeFace\n    }\n}\n</code></pre>\n<p><em><strong>activity_splash.xml</strong></em></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;!--suppress XmlUnusedNamespaceDeclaration --&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:gravity=&quot;center&quot;\n    android:background=&quot;@drawable/splash_screen&quot;\n    tools:context=&quot;.SplashActivity&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/tvAppName&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:gravity=&quot;center&quot;\n        android:text=&quot;@string/app_name&quot;\n        android:textColor=&quot;@android:color/white&quot;\n        android:textSize=&quot;@dimen/splash_screen_title_text_size&quot;\n        android:textStyle=&quot;bold&quot; /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n<p><em><strong>AndroidManifest.xml</strong></em></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.OrganizeMe&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.SplashActivity&quot;\n            android:screenOrientation=&quot;fullSensor&quot;\n            android:exported=&quot;true&quot;\n            android:label=&quot;@string/title_activity_splash&quot;\n            android:theme=&quot;@style/Theme.OrganizeMe&quot; &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n            &lt;/activity&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","spring","mybatis","spring-mybatis","mybatis-mapper"],"comments":[{"owner":{"account_id":1314580,"reputation":3299,"user_id":1261766,"display_name":"ave"},"score":1,"creation_date":1697135210,"post_id":77282654,"comment_id":136245143,"body_markdown":"When `value` is `NULL`, the condition must be `${key} IS NULL`. See this [Q&amp;A](https://stackoverflow.com/q/9581745/1261766) for why.","body":"When <code>value</code> is <code>NULL</code>, the condition must be <code>${key} IS NULL</code>. See this <a href=\"https://stackoverflow.com/q/9581745/1261766\">Q&amp;A</a> for why."}],"owner":{"account_id":19163226,"reputation":3,"user_id":13998552,"display_name":"Lilia Baluk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697131468,"creation_date":1697131332,"question_id":77282654,"body_markdown":"When conditions map contains a null value, record is not deleted.\r\n\r\nmap -&gt; NAME:&quot;Alise&quot; - record deleted\r\n\r\nmap -&gt; NAME:null    - record not deleted\r\n\r\n```\r\n@Delete(&quot;&lt;script&gt;&quot; +\r\n        &quot;DELETE FROM ${dataDestinationName}&quot; +\r\n        &quot; WHERE&quot; +\r\n        &quot;&lt;foreach collection=\\&quot;conditions.entrySet()\\&quot; item=\\&quot;value\\&quot; index=\\&quot;key\\&quot; separator=\\&quot;AND\\&quot;&gt;&quot; +\r\n        &quot;${key}=#{value}&quot; +\r\n        &quot;&lt;/foreach&gt;&quot; +\r\n        &quot;&lt;/script&gt;&quot;)\r\n    void deleteData(@Param(&quot;dataDestinationName&quot;) String dataDestinationName,\r\n                    @Param(&quot;conditions&quot;) HashMap&lt;String, Object&gt; conditions);\r\n```\r\n\r\nI would like to record be deleted in both cases.","title":"Cannot delete a record using Mybatis","body":"<p>When conditions map contains a null value, record is not deleted.</p>\n<p>map -&gt; NAME:&quot;Alise&quot; - record deleted</p>\n<p>map -&gt; NAME:null    - record not deleted</p>\n<pre><code>@Delete(&quot;&lt;script&gt;&quot; +\n        &quot;DELETE FROM ${dataDestinationName}&quot; +\n        &quot; WHERE&quot; +\n        &quot;&lt;foreach collection=\\&quot;conditions.entrySet()\\&quot; item=\\&quot;value\\&quot; index=\\&quot;key\\&quot; separator=\\&quot;AND\\&quot;&gt;&quot; +\n        &quot;${key}=#{value}&quot; +\n        &quot;&lt;/foreach&gt;&quot; +\n        &quot;&lt;/script&gt;&quot;)\n    void deleteData(@Param(&quot;dataDestinationName&quot;) String dataDestinationName,\n                    @Param(&quot;conditions&quot;) HashMap&lt;String, Object&gt; conditions);\n</code></pre>\n<p>I would like to record be deleted in both cases.</p>\n"},{"tags":["java","amazon-web-services","aws-sdk"],"comments":[{"owner":{"account_id":22397,"reputation":417280,"user_id":55159,"accept_rate":79,"display_name":"Quassnoi"},"score":0,"creation_date":1697127443,"post_id":77281791,"comment_id":136243756,"body_markdown":"Somehow, the system property `aws.accessKeyId` is blank by the time Athena client tries to read it. What happens if you set a breakpoint on `submitAthenaQuery` and look at the system properties at that point?","body":"Somehow, the system property <code>aws.accessKeyId</code> is blank by the time Athena client tries to read it. What happens if you set a breakpoint on <code>submitAthenaQuery</code> and look at the system properties at that point?"},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1697129431,"post_id":77281791,"comment_id":136244077,"body_markdown":"Are you using the V2 RdsDataClient object that queries Amazon Aurora Serverless data ?","body":"Are you using the V2 RdsDataClient object that queries Amazon Aurora Serverless data ?"}],"answers":[{"comments":[{"owner":{"account_id":544337,"reputation":1995,"user_id":913749,"accept_rate":64,"display_name":"adbdkb"},"score":0,"creation_date":1697136977,"post_id":77282508,"comment_id":136245452,"body_markdown":"Thank you.  I corrected the code to use the V2 client.  And also disconnected from the VPN ( but connected to wi-fi ) and I was able to get the result.   One question, if I may - how do I find the IP address of my Mac when I am connected to VPN and when I am not ?  &#39;ipconfig getifaddr en0` gives me the router IP.  I should find the public IP in both the above set-ups, right?  So I can see the inbound rules ( with help of someone in the org ), please let me know how do I get those IPs if you know.  Appreciate your help","body":"Thank you.  I corrected the code to use the V2 client.  And also disconnected from the VPN ( but connected to wi-fi ) and I was able to get the result.   One question, if I may - how do I find the IP address of my Mac when I am connected to VPN and when I am not ?  &#39;ipconfig getifaddr en0` gives me the router IP.  I should find the public IP in both the above set-ups, right?  So I can see the inbound rules ( with help of someone in the org ), please let me know how do I get those IPs if you know.  Appreciate your help"},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1697137081,"post_id":77282508,"comment_id":136245466,"body_markdown":"A little tip. Use http://checkip.amazonaws.com/.","body":"A little tip. Use <a href=\"http://checkip.amazonaws.com/\" rel=\"nofollow noreferrer\">checkip.amazonaws.com</a>."}],"tags":[],"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697130651,"creation_date":1697129834,"answer_id":77282508,"question_id":77281791,"body_markdown":"You seem to be using AWS Java SDK V2 but you referenced a 3rd party example that uses V1. \r\n\r\nThe issue you are seeing is your client cannot find your cred keys. Make sure that you specify your creds as specified in the **Java V2 Developer Guide** here: \r\n\r\n[Default credentials provider chain][1]\r\n\r\nNow for your question about using a VPN. That can certainly impact connecting to Aurora database as it can impact your IP address when setting up Inbound Rules. I have come across that many times in the past. If you set your inbound Rules using your IP withot VPN and then connect to VPN, you IP changes. \r\n\r\nFor information about setting up security group inbound rules, see [Controlling Access with Security Groups][2].\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/credentials-chain.html\r\n  [2]: https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Overview.RDSSecurityGroups.html","title":"Unable to connect to AWS Athena from AWS Java SDK, but AWS CLI connection works","body":"<p>You seem to be using AWS Java SDK V2 but you referenced a 3rd party example that uses V1.</p>\n<p>The issue you are seeing is your client cannot find your cred keys. Make sure that you specify your creds as specified in the <strong>Java V2 Developer Guide</strong> here:</p>\n<p><a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/credentials-chain.html\" rel=\"nofollow noreferrer\">Default credentials provider chain</a></p>\n<p>Now for your question about using a VPN. That can certainly impact connecting to Aurora database as it can impact your IP address when setting up Inbound Rules. I have come across that many times in the past. If you set your inbound Rules using your IP withot VPN and then connect to VPN, you IP changes.</p>\n<p>For information about setting up security group inbound rules, see <a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Overview.RDSSecurityGroups.html\" rel=\"nofollow noreferrer\">Controlling Access with Security Groups</a>.</p>\n"}],"owner":{"account_id":544337,"reputation":1995,"user_id":913749,"accept_rate":64,"display_name":"adbdkb"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77282508,"answer_count":1,"score":0,"last_activity_date":1697130651,"creation_date":1697123167,"question_id":77281791,"body_markdown":"I am trying to access Athena tables from Java using AWS Java SDK.  \r\n\r\nI am connected to the corporate VPN and also am behind proxy ( I don&#39;t know, if it makes difference, hence mentioned both )\r\n\r\nI am able to connect to Athena from AWS CLI from the same set-up.\r\n\r\nI am using the [example from here][1] to create a simple java test app.\r\n\r\nI have added below properties in the code \r\n\r\n    public static void main(String[] args) {\r\n        String AWS_ACCESS_KEY = &quot;acces_key_value&quot;;\r\n        String AWS_SECRET_KEY = &quot;secret_key_value&quot;;\r\n        String AWS_SESSION_TOKEN = &quot;session_token_value&quot;;\r\n\r\n        System.setProperty(&quot;aws.accessKeyId&quot;, AWS_ACCESS_KEY);\r\n        System.setProperty(&quot;aws.secretKey&quot;, AWS_SECRET_KEY);\r\n        System.setProperty(&quot;aws.sessionToken&quot;, AWS_SESSION_TOKEN);\r\n        SpringApplication.run(App.class, args);\r\n    }\r\n\r\nWhen I run the app, I get the below error\r\n\r\n    Unable to load credentials from system settings. Access key must be specified either via environment variable (AWS_ACCESS_KEY_ID) or system property (aws.accessKeyId)\r\n\r\nThis is the full stack trace\r\n\r\n    java.lang.IllegalStateException: Failed to execute CommandLineRunner\r\n\t\tat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:782) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\t\tat org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:763) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:318) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1213) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1202) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\t\tat com.contactsunny.poc.SpringBootAmazonAthenaPOC.App.main(App.java:48) ~[classes/:na]\r\n\tCaused by: software.amazon.awssdk.core.exception.SdkClientException: Unable to load credentials from system settings. Access key must be specified either via environment variable (AWS_ACCESS_KEY_ID) or system property (aws.accessKeyId).\r\n\t\tat software.amazon.awssdk.core.exception.SdkClientException$BuilderImpl.build(SdkClientException.java:111) ~[sdk-core-2.20.162.jar:na]\r\n\t\tat software.amazon.awssdk.auth.credentials.internal.SystemSettingsCredentialsProvider.resolveCredentials(SystemSettingsCredentialsProvider.java:58) ~[auth-2.20.162.jar:na]\r\n\t\tat software.amazon.awssdk.core.internal.util.MetricUtils.measureDuration(MetricUtils.java:54) ~[sdk-core-2.20.162.jar:na]\r\n\t\tat software.amazon.awssdk.awscore.internal.authcontext.AwsCredentialsAuthorizationStrategy.resolveCredentials(AwsCredentialsAuthorizationStrategy.java:100) ~[aws-core-2.20.162.jar:na]\r\n\t\tat software.amazon.awssdk.awscore.internal.authcontext.AwsCredentialsAuthorizationStrategy.addCredentialsToExecutionAttributes(AwsCredentialsAuthorizationStrategy.java:77) ~[aws-core-2.20.162.jar:na]\r\n\t\tat software.amazon.awssdk.awscore.internal.AwsExecutionContextBuilder.invokeInterceptorsAndCreateExecutionContext(AwsExecutionContextBuilder.java:125) ~[aws-core-2.20.162.jar:na]\r\n\t\tat software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.invokeInterceptorsAndCreateExecutionContext(AwsSyncClientHandler.java:69) ~[aws-core-2.20.162.jar:na]\r\n\t\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.lambda$execute$1(BaseSyncClientHandler.java:78) ~[sdk-core-2.20.162.jar:na]\r\n\t\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.measureApiCallSuccess(BaseSyncClientHandler.java:179) ~[sdk-core-2.20.162.jar:na]\r\n\t\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:76) ~[sdk-core-2.20.162.jar:na]\r\n\t\tat software.amazon.awssdk.core.client.handler.SdkSyncClientHandler.execute(SdkSyncClientHandler.java:45) ~[sdk-core-2.20.162.jar:na]\r\n\t\tat software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.execute(AwsSyncClientHandler.java:56) ~[aws-core-2.20.162.jar:na]\r\n\t\tat software.amazon.awssdk.services.athena.DefaultAthenaClient.startQueryExecution(DefaultAthenaClient.java:3330) ~[athena-2.20.162.jar:na]\r\n\t\tat com.contactsunny.poc.SpringBootAmazonAthenaPOC.App.submitAthenaQuery(App.java:81) ~[classes/:na]\r\n\t\tat com.contactsunny.poc.SpringBootAmazonAthenaPOC.App.run(App.java:57) ~[classes/:na]\r\n\t\tat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:779) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\t\t... 5 common frames omitted\r\n\r\n\r\nWhat else do I need do to get the Java SDK app to connect to Athena to work?\r\n\r\n\r\n\r\n  [1]: https://contactsunny.medium.com/how-to-query-athena-from-a-spring-boot-application-93a93c013c85","title":"Unable to connect to AWS Athena from AWS Java SDK, but AWS CLI connection works","body":"<p>I am trying to access Athena tables from Java using AWS Java SDK.</p>\n<p>I am connected to the corporate VPN and also am behind proxy ( I don't know, if it makes difference, hence mentioned both )</p>\n<p>I am able to connect to Athena from AWS CLI from the same set-up.</p>\n<p>I am using the <a href=\"https://contactsunny.medium.com/how-to-query-athena-from-a-spring-boot-application-93a93c013c85\" rel=\"nofollow noreferrer\">example from here</a> to create a simple java test app.</p>\n<p>I have added below properties in the code</p>\n<pre><code>public static void main(String[] args) {\n    String AWS_ACCESS_KEY = &quot;acces_key_value&quot;;\n    String AWS_SECRET_KEY = &quot;secret_key_value&quot;;\n    String AWS_SESSION_TOKEN = &quot;session_token_value&quot;;\n\n    System.setProperty(&quot;aws.accessKeyId&quot;, AWS_ACCESS_KEY);\n    System.setProperty(&quot;aws.secretKey&quot;, AWS_SECRET_KEY);\n    System.setProperty(&quot;aws.sessionToken&quot;, AWS_SESSION_TOKEN);\n    SpringApplication.run(App.class, args);\n}\n</code></pre>\n<p>When I run the app, I get the below error</p>\n<pre><code>Unable to load credentials from system settings. Access key must be specified either via environment variable (AWS_ACCESS_KEY_ID) or system property (aws.accessKeyId)\n</code></pre>\n<p>This is the full stack trace</p>\n<pre><code>java.lang.IllegalStateException: Failed to execute CommandLineRunner\n    at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:782) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:763) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:318) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1213) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1202) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at com.contactsunny.poc.SpringBootAmazonAthenaPOC.App.main(App.java:48) ~[classes/:na]\nCaused by: software.amazon.awssdk.core.exception.SdkClientException: Unable to load credentials from system settings. Access key must be specified either via environment variable (AWS_ACCESS_KEY_ID) or system property (aws.accessKeyId).\n    at software.amazon.awssdk.core.exception.SdkClientException$BuilderImpl.build(SdkClientException.java:111) ~[sdk-core-2.20.162.jar:na]\n    at software.amazon.awssdk.auth.credentials.internal.SystemSettingsCredentialsProvider.resolveCredentials(SystemSettingsCredentialsProvider.java:58) ~[auth-2.20.162.jar:na]\n    at software.amazon.awssdk.core.internal.util.MetricUtils.measureDuration(MetricUtils.java:54) ~[sdk-core-2.20.162.jar:na]\n    at software.amazon.awssdk.awscore.internal.authcontext.AwsCredentialsAuthorizationStrategy.resolveCredentials(AwsCredentialsAuthorizationStrategy.java:100) ~[aws-core-2.20.162.jar:na]\n    at software.amazon.awssdk.awscore.internal.authcontext.AwsCredentialsAuthorizationStrategy.addCredentialsToExecutionAttributes(AwsCredentialsAuthorizationStrategy.java:77) ~[aws-core-2.20.162.jar:na]\n    at software.amazon.awssdk.awscore.internal.AwsExecutionContextBuilder.invokeInterceptorsAndCreateExecutionContext(AwsExecutionContextBuilder.java:125) ~[aws-core-2.20.162.jar:na]\n    at software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.invokeInterceptorsAndCreateExecutionContext(AwsSyncClientHandler.java:69) ~[aws-core-2.20.162.jar:na]\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.lambda$execute$1(BaseSyncClientHandler.java:78) ~[sdk-core-2.20.162.jar:na]\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.measureApiCallSuccess(BaseSyncClientHandler.java:179) ~[sdk-core-2.20.162.jar:na]\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:76) ~[sdk-core-2.20.162.jar:na]\n    at software.amazon.awssdk.core.client.handler.SdkSyncClientHandler.execute(SdkSyncClientHandler.java:45) ~[sdk-core-2.20.162.jar:na]\n    at software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.execute(AwsSyncClientHandler.java:56) ~[aws-core-2.20.162.jar:na]\n    at software.amazon.awssdk.services.athena.DefaultAthenaClient.startQueryExecution(DefaultAthenaClient.java:3330) ~[athena-2.20.162.jar:na]\n    at com.contactsunny.poc.SpringBootAmazonAthenaPOC.App.submitAthenaQuery(App.java:81) ~[classes/:na]\n    at com.contactsunny.poc.SpringBootAmazonAthenaPOC.App.run(App.java:57) ~[classes/:na]\n    at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:779) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    ... 5 common frames omitted\n</code></pre>\n<p>What else do I need do to get the Java SDK app to connect to Athena to work?</p>\n"},{"tags":["java","jsp"],"comments":[{"owner":{"account_id":1031279,"reputation":7717,"user_id":1039555,"accept_rate":56,"display_name":"Kartik"},"score":0,"creation_date":1590472166,"post_id":62015316,"comment_id":109683683,"body_markdown":"Does this answer your question? [Efficient method to generate UUID String in JAVA (UUID.randomUUID().toString() without the dashes)](https://stackoverflow.com/questions/3804591/efficient-method-to-generate-uuid-string-in-java-uuid-randomuuid-tostring-w)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/3804591/efficient-method-to-generate-uuid-string-in-java-uuid-randomuuid-tostring-w\">Efficient method to generate UUID String in JAVA (UUID.randomUUID().toString() without the dashes)</a>"},{"owner":{"account_id":16289939,"reputation":49,"user_id":11763658,"display_name":"mahi chauhan"},"score":0,"creation_date":1590640713,"post_id":62015316,"comment_id":109757152,"body_markdown":"I want to generate a HttpSession session id each time a user login into the website so that I can use that session id in getting more details about the user.","body":"I want to generate a HttpSession session id each time a user login into the website so that I can use that session id in getting more details about the user."}],"answers":[{"tags":[],"owner":{"account_id":17369722,"reputation":26,"user_id":12584112,"display_name":"chunlong wang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590473789,"creation_date":1590473789,"answer_id":62015791,"question_id":62015316,"body_markdown":"    public static String getToken() {\r\n    \t\treturn  String.valueOf(System.currentTimeMillis()).substring(8, 13) + UUID.randomUUID().toString().substring(1,10);\r\n    \t}\r\nor\r\n\r\n    public static String getUUID() {\r\n    \t\treturn UUID.randomUUID().toString();\r\n    \t}","title":"How to generate a session id each time a user login into the website?","body":"<pre><code>public static String getToken() {\n        return  String.valueOf(System.currentTimeMillis()).substring(8, 13) + UUID.randomUUID().toString().substring(1,10);\n    }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>public static String getUUID() {\n        return UUID.randomUUID().toString();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13853044,"reputation":33,"user_id":10000517,"display_name":"Jonatas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697130316,"creation_date":1697130316,"answer_id":77282557,"question_id":62015316,"body_markdown":"Normally the server that is going to run your application can handle this. If you&#39;re either using Spring Boot or if you are running your application on a Tomcat server, you can use Tomcat&#39;s embedded session id generator. The class is org.apache.catalina.util.StandardSessionIdGenerator.","title":"How to generate a session id each time a user login into the website?","body":"<p>Normally the server that is going to run your application can handle this. If you're either using Spring Boot or if you are running your application on a Tomcat server, you can use Tomcat's embedded session id generator. The class is org.apache.catalina.util.StandardSessionIdGenerator.</p>\n"}],"owner":{"account_id":16289939,"reputation":49,"user_id":11763658,"display_name":"mahi chauhan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4012,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1697130316,"creation_date":1590471425,"question_id":62015316,"body_markdown":"\r\n```\r\n\r\n    &lt;form action=&quot;&lt;%=request.getContextPath()%&gt;/login&quot; method=&quot;post&quot;&gt;\r\n        Email: &lt;input type=&quot;email&quot; name=&quot;email&quot;&gt;\r\n        Password : &lt;input type=&quot;password&quot; name=&quot;psw&quot;&gt;\r\n        &lt;button type=&quot;submit&quot; value=&quot;submit&quot;&gt;Submit&lt;/button&gt;\r\n    &lt;/form&gt;\r\n\r\n```\r\nI have this login form.After submitting the values, it goes to the controller where the user authentication takes place and after authentication it moves to the home page.I want to generate a session id every time a user login so that, that user id can be used to get other information of the user(i.e some details like mobile no,address etc according to the need) that were filled during the registration.\r\nI am doing all this using jsp and mvc.\r\nThanks in advance.","title":"How to generate a session id each time a user login into the website?","body":"<pre><code>\n    &lt;form action=\"&lt;%=request.getContextPath()%&gt;/login\" method=\"post\"&gt;\n        Email: &lt;input type=\"email\" name=\"email\"&gt;\n        Password : &lt;input type=\"password\" name=\"psw\"&gt;\n        &lt;button type=\"submit\" value=\"submit\"&gt;Submit&lt;/button&gt;\n    &lt;/form&gt;\n\n</code></pre>\n\n<p>I have this login form.After submitting the values, it goes to the controller where the user authentication takes place and after authentication it moves to the home page.I want to generate a session id every time a user login so that, that user id can be used to get other information of the user(i.e some details like mobile no,address etc according to the need) that were filled during the registration.\nI am doing all this using jsp and mvc.\nThanks in advance.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":345995,"reputation":6762,"user_id":679240,"accept_rate":61,"display_name":"Haroldo_OK"},"score":0,"creation_date":1642594170,"post_id":70770266,"comment_id":125110889,"body_markdown":"Does that stack trace come with a `Caused by`? There&#39;s a good chance the actual error is on the `Caused by` part.","body":"Does that stack trace come with a <code>Caused by</code>? There&#39;s a good chance the actual error is on the <code>Caused by</code> part."},{"owner":{"account_id":18485634,"reputation":2328,"user_id":13466689,"display_name":"Faheem azaz Bhanej"},"score":1,"creation_date":1642594934,"post_id":70770266,"comment_id":125111207,"body_markdown":"Produce full stacktrace in your question","body":"Produce full stacktrace in your question"}],"answers":[{"tags":[],"owner":{"account_id":23977205,"reputation":136,"user_id":17965148,"display_name":"Optimizer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642607100,"creation_date":1642607100,"answer_id":70773547,"question_id":70770266,"body_markdown":"I think you may have incompatible version of hibernate-core on the classpath. you can try to update pom.xml or build.gradle to use compatible version. Use spring boot&#39;s dependency management rather than specifying the version yourself.\r\nYou can delete the existing jar and then rebuild your application.\r\n","title":"Failed to introspect Class [org.springframework.boot.autoconfigure.orm.jpa..HibernateJpaConfiguration","body":"<p>I think you may have incompatible version of hibernate-core on the classpath. you can try to update pom.xml or build.gradle to use compatible version. Use spring boot's dependency management rather than specifying the version yourself.\nYou can delete the existing jar and then rebuild your application.</p>\n"}],"owner":{"account_id":14358177,"reputation":21,"user_id":10371390,"display_name":"Jaspreet Matharu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16984,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1697130240,"creation_date":1642593841,"question_id":70770266,"body_markdown":"I have changed my springboot version from 2.5.0 to 2.6.2 and when I run my backend I am getting the following error:\r\n\r\n```java\r\njava.lang.IllegalStateException: Failed to introspect Class [org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@2626b418]\r\n\tat org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:481) ~[spring-core-5.3.14.jar:5.3.14]\r\n\tat org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:358) ~[spring-core-5.3.14.jar:5.3.14]\r\n\tat org.springframework.util.ReflectionUtils.getUniqueDeclaredMethods(ReflectionUtils.java:414) ~[spring-core-5.3.14.jar:5.3.14]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.lambda$getTypeForFactoryMethod$2(AbstractAutowireCapableBeanFactory.java:765) ~[spring-beans-5.3.14.jar:5.3.14]\r\n\tat java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1740) ~[na:na]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryMethod(AbstractAutowireCapableBeanFactory.java:764) ~[spring-beans-5.3.14.jar:5.3.14]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineTargetType(AbstractAutowireCapableBeanFactory.java:703) ~[spring-beans-5.3.14.jar:5.3.14]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:674) ~[spring-beans-5.3.14.jar:5.3.14]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1670) ~[spring-beans-5.3.14.jar:5.3.14]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:570) ~[spring-beans-5.3.14.jar:5.3.14]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:542) ~[spring-beans-5.3.14.jar:5.3.14]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:667) ~[spring-beans-5.3.14.jar:5.3.14]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:659) ~[spring-beans-5.3.14.jar:5.3.14]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1300) ~[spring-context-5.3.14.jar:5.3.14]\r\n\tat org.springframework.boot.SpringApplication.getExitCodeFromMappedException(SpringApplication.java:862) ~[spring-boot-2.6.2.jar:2.6.2]\r\n\tat org.springframework.boot.SpringApplication.getExitCodeFromException(SpringApplication.java:850) ~[spring-boot-2.6.2.jar:2.6.2]\r\n\tat org.springframework.boot.SpringApplication.handleExitCode(SpringApplication.java:837) ~[spring-boot-2.6.2.jar:2.6.2]\r\n\tat org.springframework.boot.SpringApplication.handleRunFailure(SpringApplication.java:778) ~[spring-boot-2.6.2.jar:2.6.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-2.6.2.jar:2.6.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.2.jar:2.6.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1290) ~[spring-boot-2.6.2.jar:2.6.2]\r\n```","title":"Failed to introspect Class [org.springframework.boot.autoconfigure.orm.jpa..HibernateJpaConfiguration","body":"<p>I have changed my springboot version from 2.5.0 to 2.6.2 and when I run my backend I am getting the following error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>java.lang.IllegalStateException: Failed to introspect Class [org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@2626b418]\n    at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:481) ~[spring-core-5.3.14.jar:5.3.14]\n    at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:358) ~[spring-core-5.3.14.jar:5.3.14]\n    at org.springframework.util.ReflectionUtils.getUniqueDeclaredMethods(ReflectionUtils.java:414) ~[spring-core-5.3.14.jar:5.3.14]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.lambda$getTypeForFactoryMethod$2(AbstractAutowireCapableBeanFactory.java:765) ~[spring-beans-5.3.14.jar:5.3.14]\n    at java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1740) ~[na:na]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryMethod(AbstractAutowireCapableBeanFactory.java:764) ~[spring-beans-5.3.14.jar:5.3.14]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineTargetType(AbstractAutowireCapableBeanFactory.java:703) ~[spring-beans-5.3.14.jar:5.3.14]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:674) ~[spring-beans-5.3.14.jar:5.3.14]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1670) ~[spring-beans-5.3.14.jar:5.3.14]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:570) ~[spring-beans-5.3.14.jar:5.3.14]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:542) ~[spring-beans-5.3.14.jar:5.3.14]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:667) ~[spring-beans-5.3.14.jar:5.3.14]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:659) ~[spring-beans-5.3.14.jar:5.3.14]\n    at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1300) ~[spring-context-5.3.14.jar:5.3.14]\n    at org.springframework.boot.SpringApplication.getExitCodeFromMappedException(SpringApplication.java:862) ~[spring-boot-2.6.2.jar:2.6.2]\n    at org.springframework.boot.SpringApplication.getExitCodeFromException(SpringApplication.java:850) ~[spring-boot-2.6.2.jar:2.6.2]\n    at org.springframework.boot.SpringApplication.handleExitCode(SpringApplication.java:837) ~[spring-boot-2.6.2.jar:2.6.2]\n    at org.springframework.boot.SpringApplication.handleRunFailure(SpringApplication.java:778) ~[spring-boot-2.6.2.jar:2.6.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-2.6.2.jar:2.6.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.2.jar:2.6.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1290) ~[spring-boot-2.6.2.jar:2.6.2]\n</code></pre>\n"},{"tags":["java","spring-boot","threadpool","java-21","virtual-threads"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1697130642,"post_id":77282538,"comment_id":136244296,"body_markdown":"As far as I can see, there is no pool in your example, as you’re using a `TaskExecutorAdapter` wrapping a `newVirtualThreadPerTaskExecutor()`. You’re not using a `ThreadPoolTaskExecutor` or such alike. In other words, it looks do me as if you already solved your task.","body":"As far as I can see, there is no pool in your example, as you’re using a <code>TaskExecutorAdapter</code> wrapping a <code>newVirtualThreadPerTaskExecutor()</code>. You’re not using a <code>ThreadPoolTaskExecutor</code> or such alike. In other words, it looks do me as if you already solved your task."},{"owner":{"account_id":24275549,"reputation":21,"user_id":18222899,"display_name":"liang li"},"score":0,"creation_date":1697130997,"post_id":77282538,"comment_id":136244366,"body_markdown":"So, the `newVirtualThreadPerTaskExecutor` is not a traditional thread pool, is that correct?","body":"So, the <code>newVirtualThreadPerTaskExecutor</code> is not a traditional thread pool, is that correct?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1697131123,"post_id":77282538,"comment_id":136244395,"body_markdown":"Exactly. As the name suggests and [the documentation](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executors.html#newVirtualThreadPerTaskExecutor()) says, it creates a new virtual thread for every task.","body":"Exactly. As the name suggests and <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executors.html#newVirtualThreadPerTaskExecutor()\" rel=\"nofollow noreferrer\">the documentation</a> says, it creates a new virtual thread for every task."},{"owner":{"account_id":24275549,"reputation":21,"user_id":18222899,"display_name":"liang li"},"score":0,"creation_date":1697131231,"post_id":77282538,"comment_id":136244416,"body_markdown":"Thank you very much for your response. By the way, do you think this virtual thread approach provides a significant performance boost for handling high-concurrency asynchronous tasks?","body":"Thank you very much for your response. By the way, do you think this virtual thread approach provides a significant performance boost for handling high-concurrency asynchronous tasks?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1697131765,"post_id":77282538,"comment_id":136244543,"body_markdown":"This heavily depends on your starting point. Depending on how you handled concurrency before, they may not add to performance but allow you to write far more maintainable code *or* allow higher concurrency and in turn, higher performance. But it may require replacing some older “best practice” code by new “best practice” code in your application. There’s no general statement possible.","body":"This heavily depends on your starting point. Depending on how you handled concurrency before, they may not add to performance but allow you to write far more maintainable code <i>or</i> allow higher concurrency and in turn, higher performance. But it may require replacing some older “best practice” code by new “best practice” code in your application. There’s no general statement possible."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1697356567,"post_id":77282538,"comment_id":136267667,"body_markdown":"You could also wait until Spring Boot 3.2 releases in November with full virtual thread support and set `spring.threads.virtual.enabled=true` in your `application.properties`","body":"You could also wait until Spring Boot 3.2 releases in November with full virtual thread support and set <code>spring.threads.virtual.enabled=true</code> in your <code>application.properties</code>"}],"owner":{"account_id":24275549,"reputation":21,"user_id":18222899,"display_name":"liang li"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":530,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1697130166,"creation_date":1697130166,"question_id":77282538,"body_markdown":"Java 21 has officially supported the feature of virtual threads, and I am very excited to use this feature in Spring Boot\r\n\r\nI&#39;ve come across a statement: &quot;We should not treat virtual threads the same way as platform threads by using pools to constrain them because they are very lightweight resources that can be discarded once they are used up.&quot;\r\n\r\n\r\nIs there any other way to make Spring Boot&#39;s @Async annotation use virtual threads to handle asynchronous tasks without needing to register a virtual thread pool like the following?\r\n\r\n```java\r\n\r\n@EnableAsync\r\n@Configuration\r\npublic class AsyncThreadConfiguration {\r\n\r\n    @Bean\r\n    public AsyncTaskExecutor asyncTaskExecutor() {\r\n        return new TaskExecutorAdapter(Executors.newVirtualThreadPerTaskExecutor());\r\n    }\r\n\r\n    @Bean\r\n    public TomcatProtocolHandlerCustomizer&lt;?&gt; protocolHandlerVirtualThreadExecutorCustomizer() {\r\n        return protocolHandler -&gt; protocolHandler.setExecutor(Executors.newVirtualThreadPerTaskExecutor());\r\n    }\r\n}\r\n\r\n```\r\n\r\nI look forward to a simple configuration approach that allows the @Async annotation to use virtual threads to execute asynchronous tasks without the need for a thread pool.","title":"How to use non-pooling virtual threads to execute asynchronous tasks in Spring Boot?","body":"<p>Java 21 has officially supported the feature of virtual threads, and I am very excited to use this feature in Spring Boot</p>\n<p>I've come across a statement: &quot;We should not treat virtual threads the same way as platform threads by using pools to constrain them because they are very lightweight resources that can be discarded once they are used up.&quot;</p>\n<p>Is there any other way to make Spring Boot's @Async annotation use virtual threads to handle asynchronous tasks without needing to register a virtual thread pool like the following?</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@EnableAsync\n@Configuration\npublic class AsyncThreadConfiguration {\n\n    @Bean\n    public AsyncTaskExecutor asyncTaskExecutor() {\n        return new TaskExecutorAdapter(Executors.newVirtualThreadPerTaskExecutor());\n    }\n\n    @Bean\n    public TomcatProtocolHandlerCustomizer&lt;?&gt; protocolHandlerVirtualThreadExecutorCustomizer() {\n        return protocolHandler -&gt; protocolHandler.setExecutor(Executors.newVirtualThreadPerTaskExecutor());\n    }\n}\n\n</code></pre>\n<p>I look forward to a simple configuration approach that allows the @Async annotation to use virtual threads to execute asynchronous tasks without the need for a thread pool.</p>\n"},{"tags":["java","testing","junit","junit5"],"owner":{"account_id":29436390,"reputation":1,"user_id":22555150,"display_name":"Question Asker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1697123034,"answer_count":0,"score":0,"last_activity_date":1697129948,"creation_date":1697121987,"question_id":77281633,"body_markdown":"I am attempting to create JUnit tests that can verify what has been printed to the console, for a console-based Java program. \r\n\r\nAs a very simple example:\r\n\r\nIf I had the following function and called it, how would I verify the output to console with JUnit?\r\n\r\n```\r\nvoid printMessage(String mess){\r\n    System.out.println(&quot;Blah blah blah&quot;);\r\n}\r\n```\r\n\r\nI have attempted using StringWriter and PrintWriter to pass byte streams, however, ideally I would not want to have to pass extra parameters to my functions to enable the tests to pass when I would not require the parameters for the function itself to operate.","title":"How to test what has been outputted to the console","body":"<p>I am attempting to create JUnit tests that can verify what has been printed to the console, for a console-based Java program.</p>\n<p>As a very simple example:</p>\n<p>If I had the following function and called it, how would I verify the output to console with JUnit?</p>\n<pre><code>void printMessage(String mess){\n    System.out.println(&quot;Blah blah blah&quot;);\n}\n</code></pre>\n<p>I have attempted using StringWriter and PrintWriter to pass byte streams, however, ideally I would not want to have to pass extra parameters to my functions to enable the tests to pass when I would not require the parameters for the function itself to operate.</p>\n"},{"tags":["java","hibernate","hibernate-mapping"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1697129916,"post_id":77281646,"comment_id":136244156,"body_markdown":"Please provide a [mre] and the full exception stacktrace.","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and the full exception stacktrace."},{"owner":{"account_id":12993876,"reputation":100,"user_id":9392209,"display_name":"Animalz"},"score":0,"creation_date":1697133658,"post_id":77281646,"comment_id":136244889,"body_markdown":"Solved it: The classes property are not allowed to be private !","body":"Solved it: The classes property are not allowed to be private !"}],"owner":{"account_id":12993876,"reputation":100,"user_id":9392209,"display_name":"Animalz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697129899,"creation_date":1697122088,"question_id":77281646,"body_markdown":"I want to persist entities with Hibernate. I got a problem there: when trying to persist an entity, I get the error \r\n\r\n&gt; Could not instantiate persister org.hibernate.persister.entity.SingleTableEntityPersister\r\n\r\nHere is my hibernate.cfg.xml, version 6.0:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n    &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n     &quot;https://hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n\r\n&lt;hibernate-configuration&gt;\r\n    &lt;session-factory&gt;\r\n        &lt;!-- Database connection settings --&gt;\r\n\r\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.microsoft.sqlserver.jdbc.SQLServerDriver&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:sqlserver://localhost:1433;databaseName=PurchaseDatabase;encrypt=true;trustServerCertificate=true&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.SQLServerDialect&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;admin&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;admin&lt;/property&gt;\r\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n\r\n        &lt;!-- Other Hibernate settings --&gt;\r\n\r\n\r\n        &lt;!-- Mapping files --&gt;\r\n        &lt;mapping class=&quot;com.example.purchasedatabase.ErwerbsDatenEinheit&quot;\r\n                 resource=&quot;ErwerbsDatenEinheit.hbm.xml&quot; /&gt;\r\n\r\n    &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\n\r\n\r\nAnd my corresponding *.hbm.xml file:\r\n\r\n ```xml\r\n &lt;?xml version = &quot;1.0&quot; encoding = &quot;utf-8&quot;?&gt;\r\n &lt;!DOCTYPE hibernate-mapping PUBLIC \r\n      &quot;-//Hibernate/Hibernate Mapping DTD//EN&quot;\r\n      &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt; \r\n\r\n  &lt;hibernate-mapping&gt;\r\n    &lt;class name=&quot;com.example.purchasedatabase.ErwerbsDatenEinheit&quot;                                                                                                                                                                                                                                                                      \r\n    table=&quot;ErwerbsDatenEinheiten&quot;&gt;\r\n      \r\n      &lt;meta attribute = &quot;class-description&quot;&gt;\r\n         This class contains the details on the purchases we carry out.\r\n      &lt;/meta&gt;\r\n      \r\n      &lt;id name = &quot;ID&quot; type = &quot;int&quot; column = &quot;ID&quot;&gt;\r\n         &lt;generator class=&quot;native&quot;/&gt;\r\n      &lt;/id&gt;\r\n      \r\n      &lt;property name = &quot;Rechnungsnummer&quot; column = &quot;Rechnungsnummer&quot; type = &quot;text&quot;/&gt;\r\n      &lt;property name = &quot;Name&quot; column = &quot;Name&quot; type = &quot;text&quot;/&gt;\r\n      &lt;property name = &quot;Hersteller&quot; column = &quot;Hersteller&quot; type = &quot;text&quot;/&gt;\r\n      &lt;property name = &quot;DatumKauf&quot; column = &quot;DatumKauf&quot; type = &quot;text&quot;/&gt;\r\n      &lt;property name = &quot;Menge&quot; column = &quot;Menge&quot; type = &quot;Double&quot;/&gt;\r\n      &lt;property name = &quot;Kosten&quot; column = &quot;Kosten&quot; type = &quot;Double&quot;/&gt;\r\n      &lt;property name = &quot;DatumAnkunft&quot; column = &quot;DatumAnkunft&quot; type = &quot;text&quot;/&gt;\r\n      &lt;property name = &quot;Bemerkung&quot; column = &quot;Bemerkung&quot; type = &quot;text&quot;/&gt;\r\n      &lt;property name = &quot;Deaktiviert&quot; column = &quot;Deaktiviert&quot; type = &quot;Boolean&quot;/&gt;\r\n      \r\n    &lt;/class&gt;\r\n  &lt;/hibernate-mapping&gt;\r\n```\r\n\r\nAnd my actual class that should be mapped:\r\n\r\n```java\r\npackage com.example.purchasedatabase;\r\n\r\n//import org.hibernate.annotations.Entity;\r\n//import org.hibernate.annotations.Table;\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\n\r\n\r\n@Entity\r\n@Table(name = &quot;ErwerbsDatenEinheiten&quot;)\r\npublic class ErwerbsDatenEinheit {\r\n\r\n    @Id\r\n    private int ID;\r\n\r\n    @Column\r\n    private String DatumKauf;\r\n\r\n    @Column\r\n    private String Rechnungsnummer;\r\n\r\n    @Column\r\n    private String Hersteller;\r\n\r\n    @Column\r\n    private String Name;\r\n\r\n    @Column\r\n    private double Kosten;\r\n\r\n    @Column\r\n    private double Menge;\r\n\r\n    @Column\r\n    private String DatumAnkunft;\r\n\r\n    @Column\r\n    private String Bemerkung;\r\n\r\n    @Column\r\n    private boolean Deaktiviert;\r\n\r\n\r\n    public ErwerbsDatenEinheit(){\r\n        this.ID = 0;\r\n        this.DatumKauf = &quot;&quot;;\r\n        this.Rechnungsnummer = &quot;&quot;;\r\n        this.Hersteller = &quot;&quot;;\r\n        this.Name = &quot;&quot;;\r\n        this.Kosten = 0;\r\n        this.Menge = 0;\r\n        this.DatumAnkunft = &quot;&quot;;\r\n        this.Bemerkung = &quot;&quot;;\r\n        this.Deaktiviert = false;\r\n    }\r\n\r\n\r\n    public int getID() {\r\n        return ID;\r\n    }\r\n\r\n    public void setID(int ID) {\r\n        this.ID = ID;\r\n    }\r\n\r\n    public String getDatumKauf() {\r\n        return DatumKauf;\r\n    }\r\n\r\n    public void setDatumKauf(String datumKauf) {\r\n        DatumKauf = datumKauf;\r\n    }\r\n\r\n    public String getRechnungsnummer() {\r\n        return Rechnungsnummer;\r\n    }\r\n\r\n    public void setRechnungsnummer(String rechnungsnummer) {\r\n        Rechnungsnummer = rechnungsnummer;\r\n    }\r\n\r\n    public String getHersteller() {\r\n        return Hersteller;\r\n    }\r\n\r\n    public void setHersteller(String hersteller) {\r\n        Hersteller = hersteller;\r\n    }\r\n\r\n    public String getName() {\r\n        return Name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        Name = name;\r\n    }\r\n\r\n    public double getKosten() {\r\n        return Kosten;\r\n    }\r\n\r\n    public void setKosten(double kosten) {\r\n        Kosten = kosten;\r\n    }\r\n\r\n    public double getMenge() {\r\n        return Menge;\r\n    }\r\n\r\n    public void setMenge(double menge) {\r\n        Menge = menge;\r\n    }\r\n\r\n    public String getDatumAnkunft() {\r\n        return DatumAnkunft;\r\n    }\r\n\r\n    public void setDatumAnkunft(String datumAnkunft) {\r\n        DatumAnkunft = datumAnkunft;\r\n    }\r\n\r\n    public String getBemerkung() {\r\n        return Bemerkung;\r\n    }\r\n\r\n\r\n    public void setBemerkung(String bemerkung) {\r\n        Bemerkung = bemerkung;\r\n    }\r\n\r\n    public boolean isDeaktiviert() {\r\n        return Deaktiviert;\r\n    }\r\n\r\n    public void setDeaktiviert(boolean deaktiviert) {\r\n        Deaktiviert = deaktiviert;\r\n    }\r\n}\r\n```\r\n\r\nThe hibernate.cfg.xml gets recognized in a Configuration object.\r\n\r\n","title":"Java Hibernate error persisting entity, why is that?","body":"<p>I want to persist entities with Hibernate. I got a problem there: when trying to persist an entity, I get the error</p>\n<blockquote>\n<p>Could not instantiate persister org.hibernate.persister.entity.SingleTableEntityPersister</p>\n</blockquote>\n<p>Here is my hibernate.cfg.xml, version 6.0:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n    &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n     &quot;https://hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;!-- Database connection settings --&gt;\n\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.microsoft.sqlserver.jdbc.SQLServerDriver&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:sqlserver://localhost:1433;databaseName=PurchaseDatabase;encrypt=true;trustServerCertificate=true&lt;/property&gt;\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.SQLServerDialect&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;admin&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;admin&lt;/property&gt;\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n\n        &lt;!-- Other Hibernate settings --&gt;\n\n\n        &lt;!-- Mapping files --&gt;\n        &lt;mapping class=&quot;com.example.purchasedatabase.ErwerbsDatenEinheit&quot;\n                 resource=&quot;ErwerbsDatenEinheit.hbm.xml&quot; /&gt;\n\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>And my corresponding *.hbm.xml file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version = &quot;1.0&quot; encoding = &quot;utf-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC \n     &quot;-//Hibernate/Hibernate Mapping DTD//EN&quot;\n     &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt; \n\n &lt;hibernate-mapping&gt;\n   &lt;class name=&quot;com.example.purchasedatabase.ErwerbsDatenEinheit&quot;                                                                                                                                                                                                                                                                      \n   table=&quot;ErwerbsDatenEinheiten&quot;&gt;\n     \n     &lt;meta attribute = &quot;class-description&quot;&gt;\n        This class contains the details on the purchases we carry out.\n     &lt;/meta&gt;\n     \n     &lt;id name = &quot;ID&quot; type = &quot;int&quot; column = &quot;ID&quot;&gt;\n        &lt;generator class=&quot;native&quot;/&gt;\n     &lt;/id&gt;\n     \n     &lt;property name = &quot;Rechnungsnummer&quot; column = &quot;Rechnungsnummer&quot; type = &quot;text&quot;/&gt;\n     &lt;property name = &quot;Name&quot; column = &quot;Name&quot; type = &quot;text&quot;/&gt;\n     &lt;property name = &quot;Hersteller&quot; column = &quot;Hersteller&quot; type = &quot;text&quot;/&gt;\n     &lt;property name = &quot;DatumKauf&quot; column = &quot;DatumKauf&quot; type = &quot;text&quot;/&gt;\n     &lt;property name = &quot;Menge&quot; column = &quot;Menge&quot; type = &quot;Double&quot;/&gt;\n     &lt;property name = &quot;Kosten&quot; column = &quot;Kosten&quot; type = &quot;Double&quot;/&gt;\n     &lt;property name = &quot;DatumAnkunft&quot; column = &quot;DatumAnkunft&quot; type = &quot;text&quot;/&gt;\n     &lt;property name = &quot;Bemerkung&quot; column = &quot;Bemerkung&quot; type = &quot;text&quot;/&gt;\n     &lt;property name = &quot;Deaktiviert&quot; column = &quot;Deaktiviert&quot; type = &quot;Boolean&quot;/&gt;\n     \n   &lt;/class&gt;\n &lt;/hibernate-mapping&gt;\n</code></pre>\n<p>And my actual class that should be mapped:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.purchasedatabase;\n\n//import org.hibernate.annotations.Entity;\n//import org.hibernate.annotations.Table;\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\n\n\n@Entity\n@Table(name = &quot;ErwerbsDatenEinheiten&quot;)\npublic class ErwerbsDatenEinheit {\n\n    @Id\n    private int ID;\n\n    @Column\n    private String DatumKauf;\n\n    @Column\n    private String Rechnungsnummer;\n\n    @Column\n    private String Hersteller;\n\n    @Column\n    private String Name;\n\n    @Column\n    private double Kosten;\n\n    @Column\n    private double Menge;\n\n    @Column\n    private String DatumAnkunft;\n\n    @Column\n    private String Bemerkung;\n\n    @Column\n    private boolean Deaktiviert;\n\n\n    public ErwerbsDatenEinheit(){\n        this.ID = 0;\n        this.DatumKauf = &quot;&quot;;\n        this.Rechnungsnummer = &quot;&quot;;\n        this.Hersteller = &quot;&quot;;\n        this.Name = &quot;&quot;;\n        this.Kosten = 0;\n        this.Menge = 0;\n        this.DatumAnkunft = &quot;&quot;;\n        this.Bemerkung = &quot;&quot;;\n        this.Deaktiviert = false;\n    }\n\n\n    public int getID() {\n        return ID;\n    }\n\n    public void setID(int ID) {\n        this.ID = ID;\n    }\n\n    public String getDatumKauf() {\n        return DatumKauf;\n    }\n\n    public void setDatumKauf(String datumKauf) {\n        DatumKauf = datumKauf;\n    }\n\n    public String getRechnungsnummer() {\n        return Rechnungsnummer;\n    }\n\n    public void setRechnungsnummer(String rechnungsnummer) {\n        Rechnungsnummer = rechnungsnummer;\n    }\n\n    public String getHersteller() {\n        return Hersteller;\n    }\n\n    public void setHersteller(String hersteller) {\n        Hersteller = hersteller;\n    }\n\n    public String getName() {\n        return Name;\n    }\n\n    public void setName(String name) {\n        Name = name;\n    }\n\n    public double getKosten() {\n        return Kosten;\n    }\n\n    public void setKosten(double kosten) {\n        Kosten = kosten;\n    }\n\n    public double getMenge() {\n        return Menge;\n    }\n\n    public void setMenge(double menge) {\n        Menge = menge;\n    }\n\n    public String getDatumAnkunft() {\n        return DatumAnkunft;\n    }\n\n    public void setDatumAnkunft(String datumAnkunft) {\n        DatumAnkunft = datumAnkunft;\n    }\n\n    public String getBemerkung() {\n        return Bemerkung;\n    }\n\n\n    public void setBemerkung(String bemerkung) {\n        Bemerkung = bemerkung;\n    }\n\n    public boolean isDeaktiviert() {\n        return Deaktiviert;\n    }\n\n    public void setDeaktiviert(boolean deaktiviert) {\n        Deaktiviert = deaktiviert;\n    }\n}\n</code></pre>\n<p>The hibernate.cfg.xml gets recognized in a Configuration object.</p>\n"},{"tags":["python","java","numpy","djl"],"answers":[{"tags":[],"owner":{"account_id":273623,"reputation":1437,"user_id":565341,"display_name":"Christoph Henkelmann"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697129804,"creation_date":1697129804,"answer_id":77282505,"question_id":77275300,"body_markdown":"Thanks to the great help in the DJL Slack I found the following solution: \r\n\r\nAs of now (v0.23.0) it is possible via a workaround: \r\n\r\nThe method `ai.djl.ndarray.NDSerializer.decodeNumpy` provides this functionality. As it is package private, you need to either call it via reflection or create a new class like this as a workaround: \r\n\r\n```Java\r\n// this is important - we create our own class in the same package \r\npackage ai.djl.ndarray;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\n\r\npublic class NDSerializerSpy {\r\n    public static NDArray decodeNumpy(final NDManager manager, final InputStream is)\r\n    throws IOException {\r\n        return NDSerializer.decodeNumpy(manager, is);\r\n    }\r\n}\r\n```\r\n\r\nHowever, in the next release, DJL will officially support this via the `NDArray.decode`, `NDManager.decode` and `NDList.decode` methods. These methods will autodetect the underlying format and allow for a variety of formats.\r\n","title":"How to load a numpy file (.npy) in DJL?","body":"<p>Thanks to the great help in the DJL Slack I found the following solution:</p>\n<p>As of now (v0.23.0) it is possible via a workaround:</p>\n<p>The method <code>ai.djl.ndarray.NDSerializer.decodeNumpy</code> provides this functionality. As it is package private, you need to either call it via reflection or create a new class like this as a workaround:</p>\n<pre><code>// this is important - we create our own class in the same package \npackage ai.djl.ndarray;\n\nimport java.io.IOException;\nimport java.io.InputStream;\n\npublic class NDSerializerSpy {\n    public static NDArray decodeNumpy(final NDManager manager, final InputStream is)\n    throws IOException {\n        return NDSerializer.decodeNumpy(manager, is);\n    }\n}\n</code></pre>\n<p>However, in the next release, DJL will officially support this via the <code>NDArray.decode</code>, <code>NDManager.decode</code> and <code>NDList.decode</code> methods. These methods will autodetect the underlying format and allow for a variety of formats.</p>\n"}],"owner":{"account_id":273623,"reputation":1437,"user_id":565341,"display_name":"Christoph Henkelmann"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697129804,"creation_date":1697046324,"question_id":77275300,"body_markdown":"I have traced a model in PyTorch and loaded it in successfully in DJL. Now I want to make sure pre/postprocessing works correctly in my JAVA server. I have written the result of the pre- and postprocessing into numpy files (`.npy`), e.g. with ```np.save(&#39;preprocessed.npy&#39;, some_tensor.detach().numpy())```\r\n\r\nHow can I load the `.npy` file in JAVA/DJL into an `NDArray` to test the input/output of my traced model?\r\n\r\nA solution using purely DJL would be preferred, but additional helper libraries are also a possibility.","title":"How to load a numpy file (.npy) in DJL?","body":"<p>I have traced a model in PyTorch and loaded it in successfully in DJL. Now I want to make sure pre/postprocessing works correctly in my JAVA server. I have written the result of the pre- and postprocessing into numpy files (<code>.npy</code>), e.g. with <code>np.save('preprocessed.npy', some_tensor.detach().numpy())</code></p>\n<p>How can I load the <code>.npy</code> file in JAVA/DJL into an <code>NDArray</code> to test the input/output of my traced model?</p>\n<p>A solution using purely DJL would be preferred, but additional helper libraries are also a possibility.</p>\n"},{"tags":["java","list","collections","comparator","comparable"],"comments":[{"owner":{"account_id":2934077,"reputation":664,"user_id":2513492,"display_name":"parthivrshah"},"score":0,"creation_date":1564510434,"post_id":57277475,"comment_id":101052108,"body_markdown":"Updated the question","body":"Updated the question"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1564510553,"post_id":57277475,"comment_id":101052162,"body_markdown":"Does it matter if result will be `A, a, b` instead of `a, A, b`? Should uppercase always be before its corresponding lowercase (like A before a, B before b)?","body":"Does it matter if result will be <code>A, a, b</code> instead of <code>a, A, b</code>? Should uppercase always be before its corresponding lowercase (like A before a, B before b)?"},{"owner":{"account_id":2934077,"reputation":664,"user_id":2513492,"display_name":"parthivrshah"},"score":0,"creation_date":1564510642,"post_id":57277475,"comment_id":101052207,"body_markdown":"Yes, upper case should be first like A, a, B, b","body":"Yes, upper case should be first like A, a, B, b"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":2,"creation_date":1564510661,"post_id":57277475,"comment_id":101052217,"body_markdown":"Your current comparator compares lexicographically, see [Wikipedia](https://en.wikipedia.org/wiki/Lexicographical_order), so it obviously is not what you want. You need a more sophisticated approach for your comparator. For example, first compare based on ignoring the case (for example by lowercasing everything). And if two elements are equal according to that, compare them lexicographically (since that orders uppercase before lowoercase). If done right, the comparator can be probably 1 to 3 lines and also be created using the new modern methods.","body":"Your current comparator compares lexicographically, see <a href=\"https://en.wikipedia.org/wiki/Lexicographical_order\" rel=\"nofollow noreferrer\">Wikipedia</a>, so it obviously is not what you want. You need a more sophisticated approach for your comparator. For example, first compare based on ignoring the case (for example by lowercasing everything). And if two elements are equal according to that, compare them lexicographically (since that orders uppercase before lowoercase). If done right, the comparator can be probably 1 to 3 lines and also be created using the new modern methods."}],"answers":[{"comments":[{"owner":{"account_id":2934077,"reputation":664,"user_id":2513492,"display_name":"parthivrshah"},"score":0,"creation_date":1564512678,"post_id":57278063,"comment_id":101053216,"body_markdown":"Employee e1 = new Employee(1, &quot;Aa&quot;, &quot;dLastName&quot;, 34);\n        Employee e2 = new Employee(2, &quot;b&quot;, &quot;pLastName&quot;, 30);\n        Employee e3 = new Employee(3, &quot;Bb&quot;, &quot;sLastName&quot;, 31);\n        Employee e4 = new Employee(4, &quot;C&quot;, &quot;zLastName&quot;, 25); It is giving me output Aa,b,Bb,C but output should be Aa,Bb,b,C","body":"Employee e1 = new Employee(1, &quot;Aa&quot;, &quot;dLastName&quot;, 34);         Employee e2 = new Employee(2, &quot;b&quot;, &quot;pLastName&quot;, 30);         Employee e3 = new Employee(3, &quot;Bb&quot;, &quot;sLastName&quot;, 31);         Employee e4 = new Employee(4, &quot;C&quot;, &quot;zLastName&quot;, 25); It is giving me output Aa,b,Bb,C but output should be Aa,Bb,b,C"},{"owner":{"account_id":2934077,"reputation":664,"user_id":2513492,"display_name":"parthivrshah"},"score":0,"creation_date":1564512934,"post_id":57278063,"comment_id":101053336,"body_markdown":"I want upper case letter should come first.","body":"I want upper case letter should come first."}],"tags":[],"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1564511567,"creation_date":1564511567,"answer_id":57278063,"question_id":57277475,"body_markdown":"Like @Zabuza mentioned in a comment, the ordering you want is *almost* case-insensitive alphabetical, but not quite, since you want upper &amp; lowercase characters to be grouped together when they&#39;re the same letter.\r\n\r\nYou can accomplish this by adding simply lower-casing the first names and comparing them, with a separate check to revert to a pure lexicographical ordering if the lower-cased check shows a match:\r\n\r\ne.g.\r\n\r\n\tpublic class FirstNameSorter implements Comparator&lt;Employee&gt; {\r\n\t\t@Override\r\n\t\tpublic int compare(Employee o1, Employee o2) {\r\n\t\t\tint precheck = o1.getFirstName().toLowerCase().compareTo(o2.getFirstName().toLowerCase());\r\n\t\t\treturn precheck != 0 ? precheck : o1.getFirstName().compareTo(o2.getFirstName());\r\n\t\t}\r\n\t}\r\n\r\n\r\n","title":"sort results in ascending return in the form A, a, B, b... in Java","body":"<p>Like @Zabuza mentioned in a comment, the ordering you want is <em>almost</em> case-insensitive alphabetical, but not quite, since you want upper &amp; lowercase characters to be grouped together when they're the same letter.</p>\n\n<p>You can accomplish this by adding simply lower-casing the first names and comparing them, with a separate check to revert to a pure lexicographical ordering if the lower-cased check shows a match:</p>\n\n<p>e.g.</p>\n\n<pre><code>public class FirstNameSorter implements Comparator&lt;Employee&gt; {\n    @Override\n    public int compare(Employee o1, Employee o2) {\n        int precheck = o1.getFirstName().toLowerCase().compareTo(o2.getFirstName().toLowerCase());\n        return precheck != 0 ? precheck : o1.getFirstName().compareTo(o2.getFirstName());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2303833,"reputation":843,"user_id":2023533,"accept_rate":57,"display_name":"mmirwaldt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564513130,"creation_date":1564512525,"answer_id":57278280,"question_id":57277475,"body_markdown":"Maybe this works for you:\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            List&lt;String&gt; list = Arrays.asList(&quot;A&quot;, &quot;D&quot;, &quot;a&quot;, &quot;b&quot;, &quot;B&quot;, &quot;T&quot;);\r\n            list.sort(comparator());\r\n            System.out.println(list);\r\n        }\r\n    \r\n        private static Comparator&lt;? super String&gt; comparator() {\r\n            return (Comparator&lt;String&gt;) (leftString, rightString) -&gt; {\r\n                if (leftString.length() == rightString.length()) {\r\n                    for (int index = 0; index &lt; leftString.length(); index++) {\r\n                        final String leftChar = leftString.substring(index, index + 1);\r\n                        final String rightChar = rightString.substring(index, index + 1);\r\n                        if (!leftChar.equals(rightChar)) {\r\n                            if (leftChar.toUpperCase().equals(rightChar.toUpperCase())) {\r\n                                if (leftChar.equals(leftChar.toLowerCase()) &amp;&amp; \r\n                                        rightChar.equals(rightChar.toUpperCase())) {\r\n                                    return 1;\r\n                                } else {\r\n                                    return -1;\r\n                                }\r\n                            } else {\r\n                                return leftChar.toUpperCase()\r\n                                        .compareTo(rightChar.toUpperCase());\r\n                            }\r\n                        }\r\n                    }\r\n                    return 0;\r\n                } else {\r\n                    return (leftString.length() &gt; rightString.length()) ? -1 : +1;\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n    [A, a, B, b, D, T]","title":"sort results in ascending return in the form A, a, B, b... in Java","body":"<p>Maybe this works for you:</p>\n\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        List&lt;String&gt; list = Arrays.asList(\"A\", \"D\", \"a\", \"b\", \"B\", \"T\");\n        list.sort(comparator());\n        System.out.println(list);\n    }\n\n    private static Comparator&lt;? super String&gt; comparator() {\n        return (Comparator&lt;String&gt;) (leftString, rightString) -&gt; {\n            if (leftString.length() == rightString.length()) {\n                for (int index = 0; index &lt; leftString.length(); index++) {\n                    final String leftChar = leftString.substring(index, index + 1);\n                    final String rightChar = rightString.substring(index, index + 1);\n                    if (!leftChar.equals(rightChar)) {\n                        if (leftChar.toUpperCase().equals(rightChar.toUpperCase())) {\n                            if (leftChar.equals(leftChar.toLowerCase()) &amp;&amp; \n                                    rightChar.equals(rightChar.toUpperCase())) {\n                                return 1;\n                            } else {\n                                return -1;\n                            }\n                        } else {\n                            return leftChar.toUpperCase()\n                                    .compareTo(rightChar.toUpperCase());\n                        }\n                    }\n                }\n                return 0;\n            } else {\n                return (leftString.length() &gt; rightString.length()) ? -1 : +1;\n            }\n        };\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[A, a, B, b, D, T]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2934077,"reputation":664,"user_id":2513492,"display_name":"parthivrshah"},"score":0,"creation_date":1564558962,"post_id":57278437,"comment_id":101066255,"body_markdown":"Employee e1 = new Employee(1, &quot;Aa&quot;, &quot;dLastName&quot;, 34);\n        Employee e5 = new Employee(1, &quot;a&quot;, &quot;dLastName&quot;, 34);\n        Employee e2 = new Employee(2, &quot;b&quot;, &quot;pLastName&quot;, 30);\n        Employee e3 = new Employee(3, &quot;Bb&quot;, &quot;sLastName&quot;, 31);\n        Employee e4 = new Employee(4, &quot;C&quot;, &quot;zLastName&quot;, 25); it is giving me output a, Aa, b, Bb, C but I want output Aa, a, Bb, b, C","body":"Employee e1 = new Employee(1, &quot;Aa&quot;, &quot;dLastName&quot;, 34);         Employee e5 = new Employee(1, &quot;a&quot;, &quot;dLastName&quot;, 34);         Employee e2 = new Employee(2, &quot;b&quot;, &quot;pLastName&quot;, 30);         Employee e3 = new Employee(3, &quot;Bb&quot;, &quot;sLastName&quot;, 31);         Employee e4 = new Employee(4, &quot;C&quot;, &quot;zLastName&quot;, 25); it is giving me output a, Aa, b, Bb, C but I want output Aa, a, Bb, b, C"}],"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1564577593,"creation_date":1564513237,"answer_id":57278437,"question_id":57277475,"body_markdown":"## **Update** (bugFix):\n\n**Problem**:  \nOriginal solution using only `caseInsensitiveThenNaturalOrder` would order `a` and `Aa` as `[a, Aa]` instead of expected `[Aa, a]`.  \n\n**Cause**:  \n`String.CASE_INSENSITIVE_ORDER` only considers as equal strings with same length like `a` and `A` OR `aA` and `Aa`, which is condition for later provided by `thenComparing` comparator representing lexical order to work. But since `a` and `Aa` have different length they will not be additionally sorted by that lexical order which would place `Aa` before `a`. \n\n**Solution**:  \nTo fix this problem we can create Comparator which will manually iterate over &quot;common&quot; indexes of two strings and compare their corresponding characters using created earlier `caseInsensitiveThenNaturalOrde` (from original answer below). By comparing single characters we are sure that these will have same length which should solve the problem and let us apply order `A &lt; a &lt; B &lt; b &lt; C &lt; c &lt; ...`:\n\n\n    Comparator&lt;String&gt; myComparator = (s1, s2) -&gt; {\n        for (int i = 0; i &lt; Math.min(s1.length(), s2.length()); i++) {\n            int compare = caseInsensitiveThenNaturalOrder \n                    .compare(s1.substring(i, i + 1), s2.substring(i, i + 1));\n            if (compare != 0) return compare;\n        }\n        return Integer.compare(s1.length(), s2.length());\n    };\n\n    //DEMO:\n    String[] arr = {&quot;a&quot;,&quot;A&quot;,&quot;aA&quot;,&quot;Aa&quot;,&quot;a&quot;,&quot;aA&quot;,&quot;bb&quot;,&quot;b&quot;,&quot;Bb&quot;,&quot;bB&quot;,&quot;aB&quot;};\n    Arrays.sort(arr, myComparator);\n    System.out.println(Arrays.toString(arr));\n\n    //Output:\n    //[A, Aa, a, a, aA, aA, aB, Bb, b, bB, bb]\n\n------\n\n# Original answer\n\nFor English only characters you can use Comparator \n\n    Comparator&lt;String&gt; caseInsensitiveThenNaturalOrder = String\n                .CASE_INSENSITIVE_ORDER\n                .thenComparing(Comparator.naturalOrder());\n\nwhich first sorts words regardless of their case like `b,c,a,A` -&gt; `a,A,b,c`. `.thenComparing` provides way to order elements considered as equal like `a` and `A` in a way where `A` will be placed before `a` (which is natural ordering of string elements)\n\n---\n\nBut if names can hold non-English characters (like in Polish `Ą,ą` which should be placed between `A,a` and `B,b`) we can&#39;t use `String.CASE_INSENSITIVE_ORDER` because it would place non-English characters after English ones. For case like this we need solution described at [Sort List of Strings with Localization](https://stackoverflow.com/q/12889760) like\n\n    Collator coll = Collator.getInstance(new Locale(&quot;pl&quot;, &quot;PL&quot;)); //set locale of supported characters\n    coll.setStrength(Collator.PRIMARY);\n    Comparator&lt;Object&gt; caseInsensitiveThenNaturalOrder = coll\n            .thenComparing((o1, o2) -&gt; o1.toString().compareTo(o2.toString()));\n\nDemo (with support of Polish characters):\n\n    String[] arr = {&quot;cC&quot;,&quot;Cc&quot;,&quot;cc&quot;,&quot;CC&quot;, &quot;ab&quot;,&quot;aB&quot;,&quot;Ab&quot;,&quot;AB&quot;, &quot;ą&quot;, &quot;Ą&quot;};\n    Arrays.sort(arr, caseInsensitiveThenNaturalOrder);\n    System.out.println(Arrays.toString(arr));\n\nOutput: `[AB, Ab, aB, ab, Ą, ą, CC, Cc, cC, cc]`\n\nIf you want to sort collection of `Employee` instances based on property accessed via `getFirstName` you can use `caseInsensitiveThenNaturalOrder` Comparator like\n    \n    Collections.sort(employees, Comparator.comparing(Employee::getFirstName, caseInsensitiveThenNaturalOrder));\n\nwhich can also be written as\n\n    employees.sort(Comparator.comparing(Employee::getFirstName, caseInsensitiveThenNaturalOrder));\n","title":"sort results in ascending return in the form A, a, B, b... in Java","body":"<h2><strong>Update</strong> (bugFix):</h2>\n<p><strong>Problem</strong>:<br />\nOriginal solution using only <code>caseInsensitiveThenNaturalOrder</code> would order <code>a</code> and <code>Aa</code> as <code>[a, Aa]</code> instead of expected <code>[Aa, a]</code>.</p>\n<p><strong>Cause</strong>:<br />\n<code>String.CASE_INSENSITIVE_ORDER</code> only considers as equal strings with same length like <code>a</code> and <code>A</code> OR <code>aA</code> and <code>Aa</code>, which is condition for later provided by <code>thenComparing</code> comparator representing lexical order to work. But since <code>a</code> and <code>Aa</code> have different length they will not be additionally sorted by that lexical order which would place <code>Aa</code> before <code>a</code>.</p>\n<p><strong>Solution</strong>:<br />\nTo fix this problem we can create Comparator which will manually iterate over &quot;common&quot; indexes of two strings and compare their corresponding characters using created earlier <code>caseInsensitiveThenNaturalOrde</code> (from original answer below). By comparing single characters we are sure that these will have same length which should solve the problem and let us apply order <code>A &lt; a &lt; B &lt; b &lt; C &lt; c &lt; ...</code>:</p>\n<pre><code>Comparator&lt;String&gt; myComparator = (s1, s2) -&gt; {\n    for (int i = 0; i &lt; Math.min(s1.length(), s2.length()); i++) {\n        int compare = caseInsensitiveThenNaturalOrder \n                .compare(s1.substring(i, i + 1), s2.substring(i, i + 1));\n        if (compare != 0) return compare;\n    }\n    return Integer.compare(s1.length(), s2.length());\n};\n\n//DEMO:\nString[] arr = {&quot;a&quot;,&quot;A&quot;,&quot;aA&quot;,&quot;Aa&quot;,&quot;a&quot;,&quot;aA&quot;,&quot;bb&quot;,&quot;b&quot;,&quot;Bb&quot;,&quot;bB&quot;,&quot;aB&quot;};\nArrays.sort(arr, myComparator);\nSystem.out.println(Arrays.toString(arr));\n\n//Output:\n//[A, Aa, a, a, aA, aA, aB, Bb, b, bB, bb]\n</code></pre>\n<hr />\n<h1>Original answer</h1>\n<p>For English only characters you can use Comparator</p>\n<pre><code>Comparator&lt;String&gt; caseInsensitiveThenNaturalOrder = String\n            .CASE_INSENSITIVE_ORDER\n            .thenComparing(Comparator.naturalOrder());\n</code></pre>\n<p>which first sorts words regardless of their case like <code>b,c,a,A</code> -&gt; <code>a,A,b,c</code>. <code>.thenComparing</code> provides way to order elements considered as equal like <code>a</code> and <code>A</code> in a way where <code>A</code> will be placed before <code>a</code> (which is natural ordering of string elements)</p>\n<hr />\n<p>But if names can hold non-English characters (like in Polish <code>Ą,ą</code> which should be placed between <code>A,a</code> and <code>B,b</code>) we can't use <code>String.CASE_INSENSITIVE_ORDER</code> because it would place non-English characters after English ones. For case like this we need solution described at <a href=\"https://stackoverflow.com/q/12889760\">Sort List of Strings with Localization</a> like</p>\n<pre><code>Collator coll = Collator.getInstance(new Locale(&quot;pl&quot;, &quot;PL&quot;)); //set locale of supported characters\ncoll.setStrength(Collator.PRIMARY);\nComparator&lt;Object&gt; caseInsensitiveThenNaturalOrder = coll\n        .thenComparing((o1, o2) -&gt; o1.toString().compareTo(o2.toString()));\n</code></pre>\n<p>Demo (with support of Polish characters):</p>\n<pre><code>String[] arr = {&quot;cC&quot;,&quot;Cc&quot;,&quot;cc&quot;,&quot;CC&quot;, &quot;ab&quot;,&quot;aB&quot;,&quot;Ab&quot;,&quot;AB&quot;, &quot;ą&quot;, &quot;Ą&quot;};\nArrays.sort(arr, caseInsensitiveThenNaturalOrder);\nSystem.out.println(Arrays.toString(arr));\n</code></pre>\n<p>Output: <code>[AB, Ab, aB, ab, Ą, ą, CC, Cc, cC, cc]</code></p>\n<p>If you want to sort collection of <code>Employee</code> instances based on property accessed via <code>getFirstName</code> you can use <code>caseInsensitiveThenNaturalOrder</code> Comparator like</p>\n<pre><code>Collections.sort(employees, Comparator.comparing(Employee::getFirstName, caseInsensitiveThenNaturalOrder));\n</code></pre>\n<p>which can also be written as</p>\n<pre><code>employees.sort(Comparator.comparing(Employee::getFirstName, caseInsensitiveThenNaturalOrder));\n</code></pre>\n"}],"owner":{"account_id":2934077,"reputation":664,"user_id":2513492,"display_name":"parthivrshah"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":479,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1697129257,"creation_date":1564509428,"question_id":57277475,"body_markdown":"I want to sort the List&lt;Employee&gt; on name property\r\n\r\nAnd the sort should be in ascending like A, a, B, b ... in java\r\n\r\nIt would be great if someone helps me in this.\r\n\r\nFor example\r\n\r\n    package corejava.compare;\r\n \r\n    import java.util.Comparator;\r\n \r\n    public class FirstNameSorter implements Comparator&lt;Employee&gt;{\r\n \r\n         @Override\r\n         public int compare(Employee o1, Employee o2) {\r\n             return o1.getFirstName().compareTo(o2.getFirstName());\r\n         }\r\n    }\r\nAnd I have used this  comparator as below:\r\n\r\n    Employee e1 = new Employee(1, &quot;aTestName&quot;, &quot;dLastName&quot;, 34);\r\n    Employee e2 = new Employee(2, &quot;A&quot;, &quot;pLastName&quot;, 30);\r\n    Employee e3 = new Employee(3, &quot;T&quot;, &quot;sLastName&quot;, 31);\r\n    Employee e4 = new Employee(4, &quot;D&quot;, &quot;zLastName&quot;, 25);\r\n    Employee e5 = new Employee(5, &quot;b&quot;, &quot;zLastName&quot;, 25);\r\n \r\n    List&lt;Employee&gt; employees = new ArrayList&lt;Employee&gt;();\r\n    employees.add(e2);\r\n    employees.add(e3);\r\n    employees.add(e1);\r\n    employees.add(e4);\r\n    employees.add(e5);\r\n    \r\n    Collections.sort(employees, new FirstNameSorter());\r\n \r\n    // Sorted by firstName\r\n    System.out.println(employees);\r\n\r\nthen I got the following output:\r\n\r\n    A\r\n    D\r\n    T\r\n    b\r\nBut, I want the following output:\r\n\r\n    A\r\n    b\r\n    D\r\n    T","title":"sort results in ascending return in the form A, a, B, b... in Java","body":"<p>I want to sort the List on name property</p>\n\n<p>And the sort should be in ascending like A, a, B, b ... in java</p>\n\n<p>It would be great if someone helps me in this.</p>\n\n<p>For example</p>\n\n<pre><code>package corejava.compare;\n\nimport java.util.Comparator;\n\npublic class FirstNameSorter implements Comparator&lt;Employee&gt;{\n\n     @Override\n     public int compare(Employee o1, Employee o2) {\n         return o1.getFirstName().compareTo(o2.getFirstName());\n     }\n}\n</code></pre>\n\n<p>And I have used this  comparator as below:</p>\n\n<pre><code>Employee e1 = new Employee(1, \"aTestName\", \"dLastName\", 34);\nEmployee e2 = new Employee(2, \"A\", \"pLastName\", 30);\nEmployee e3 = new Employee(3, \"T\", \"sLastName\", 31);\nEmployee e4 = new Employee(4, \"D\", \"zLastName\", 25);\nEmployee e5 = new Employee(5, \"b\", \"zLastName\", 25);\n\nList&lt;Employee&gt; employees = new ArrayList&lt;Employee&gt;();\nemployees.add(e2);\nemployees.add(e3);\nemployees.add(e1);\nemployees.add(e4);\nemployees.add(e5);\n\nCollections.sort(employees, new FirstNameSorter());\n\n// Sorted by firstName\nSystem.out.println(employees);\n</code></pre>\n\n<p>then I got the following output:</p>\n\n<pre><code>A\nD\nT\nb\n</code></pre>\n\n<p>But, I want the following output:</p>\n\n<pre><code>A\nb\nD\nT\n</code></pre>\n"},{"tags":["python","java","c++","computer-science"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1697125550,"post_id":77282057,"comment_id":136243401,"body_markdown":"Generally speaking, the variable now simply contains 4, not 3+1.","body":"Generally speaking, the variable now simply contains 4, not 3+1."},{"owner":{"account_id":9067781,"reputation":30730,"user_id":6752050,"display_name":"273K"},"score":7,"creation_date":1697125761,"post_id":77282057,"comment_id":136243436,"body_markdown":"Pick one language, they are very different. If you have a generic question then ask it on https://cs.stackexchange.com","body":"Pick one language, they are very different. If you have a generic question then ask it on <a href=\"https://cs.stackexchange.com\">cs.stackexchange.com</a>"},{"owner":{"account_id":7195349,"reputation":33494,"user_id":5494370,"display_name":"Alan Birtles"},"score":2,"creation_date":1697125916,"post_id":77282057,"comment_id":136243463,"body_markdown":"Generally scalar variables don&#39;t point to literals, they&#39;re just locations in memory that contain a value, changing the variable changes the value in memory, there&#39;s no change of pointers","body":"Generally scalar variables don&#39;t point to literals, they&#39;re just locations in memory that contain a value, changing the variable changes the value in memory, there&#39;s no change of pointers"},{"owner":{"account_id":3583958,"reputation":80987,"user_id":2991525,"display_name":"fabian"},"score":2,"creation_date":1697125971,"post_id":77282057,"comment_id":136243474,"body_markdown":"&quot;Literal&quot; usually refers to some syntax for hardcoding a value into the code built into the language you&#39;re using. Languages usually have integral, floating point and string literals. It&#39;s left up for the compiler to figure out how to exactly store data at runtime, but you can be almost certain that the data is just stored as is in memory(register/RAM) and no pointers to shared storage are used. (These pointers would take up more memory than the data itself and degrade performance on access because of the indirection.)","body":"&quot;Literal&quot; usually refers to some syntax for hardcoding a value into the code built into the language you&#39;re using. Languages usually have integral, floating point and string literals. It&#39;s left up for the compiler to figure out how to exactly store data at runtime, but you can be almost certain that the data is just stored as is in memory(register/RAM) and no pointers to shared storage are used. (These pointers would take up more memory than the data itself and degrade performance on access because of the indirection.)"},{"owner":{"account_id":3583958,"reputation":80987,"user_id":2991525,"display_name":"fabian"},"score":0,"creation_date":1697126159,"post_id":77282057,"comment_id":136243504,"body_markdown":"Referring to java specifically: Note that there is a difference between `java.lang.Integer` and `int`. There are no literals of type `java.lang.Integer`, but there may be a literal converted to one in your code. Primitive types work a bit different than objects in java...","body":"Referring to java specifically: Note that there is a difference between <code>java.lang.Integer</code> and <code>int</code>. There are no literals of type <code>java.lang.Integer</code>, but there may be a literal converted to one in your code. Primitive types work a bit different than objects in java..."},{"owner":{"account_id":11533617,"reputation":3879,"user_id":8451814,"display_name":"Woodford"},"score":0,"creation_date":1697128348,"post_id":77282057,"comment_id":136243918,"body_markdown":"Does this answer your question? [What does the word &quot;literal&quot; mean?](https://stackoverflow.com/questions/485119/what-does-the-word-literal-mean)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/485119/what-does-the-word-literal-mean\">What does the word &quot;literal&quot; mean?</a>"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1697129337,"post_id":77282057,"comment_id":136244065,"body_markdown":"Doing `x++` doesn&#39;t assign a new literal, it assigns a new _value_. The term literal only refers to occurrences of _literal_ values in the source code, that is a the characters `123` are a literal for the value `123`, while the characters `&quot;a string&quot;` are a literal for a string with the value `a string`, and `5.0` is a literal for a double (64-bit floating point) value, while `5.0f` is a literal for a float (32-bit floating point) value, etc.","body":"Doing <code>x++</code> doesn&#39;t assign a new literal, it assigns a new <i>value</i>. The term literal only refers to occurrences of <i>literal</i> values in the source code, that is a the characters <code>123</code> are a literal for the value <code>123</code>, while the characters <code>&quot;a string&quot;</code> are a literal for a string with the value <code>a string</code>, and <code>5.0</code> is a literal for a double (64-bit floating point) value, while <code>5.0f</code> is a literal for a float (32-bit floating point) value, etc."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1697126892,"creation_date":1697126892,"answer_id":77282211,"question_id":77282057,"body_markdown":"x isn&#39;t a pointer.\r\n\r\nThe JVM spec just says what happens; _how_ it happens is intentionally not specified. So, this answer merely explains how it works on all JVMs I&#39;m aware of. Almost as good. It should certainly clarify matters:\r\n\r\n```\r\nclass Example {\r\n  int x = 3;\r\n\r\n  void foo() {\r\n    x++;\r\n  }\r\n}\r\n```\r\n\r\nHere, any time `new Example()` is executed, some block of memory is reserved for this instance. An instance of an object is simply a block of  memory that holds its basic properties (including that this is an object of type `Example`) and room to store the value of _every_ non-static field. In this case, `int x` - that&#39;s a non-static field.\r\n\r\nPrimitives are special data types: It&#39;s a hard coded list: int, long, short, byte, double, float, boolean, and char. That&#39;s it. That&#39;s the whole list, you can&#39;t add any new types. They are &#39;special&#39; - any value of a primitive type is just the value. __not a pointer__.\r\n\r\nThus, `int x = 3` means that any attempt to make a new Example instance (`new Example()`) will, as mentioned, reserve some space in memory to store the value of the `x` field, and that value is _directly_ 3. It&#39;s not &#39;a pointer to a 3 object&#39;. It&#39;s just.. 3. It&#39;ll take at least 32-bits (as `int` is 32 bits), it might effectively take 64 (CPUs pretty much require that objects are nicely aligned: That they start on a value that is divisible by 64, on 64-bit CPUs).\r\n\r\n`x++` simply finds that memory position with the bit sequence 0000....0000011 (`0011` is binary for &#39;3&#39;), and increments it, turning that into 0000....0000100.\r\n\r\nIn contrast, let&#39;s try with an object - anything that isn&#39;t on that list of primitives is an object, and all such values _are_ pointers. (In java speak, &#39;references&#39;). So, in this very slightly changed code:\r\n\r\n```\r\nclass Example {\r\n  Integer x = 3;\r\n\r\n  void foo() {\r\n    x++;\r\n  }\r\n}\r\n```\r\n\r\nSomething very very different is going on. For starters, auto-boxing: That is syntax sugar and is compiled as if you wrote:\r\n\r\n```\r\nclass Example {\r\n  Integer x = Integer.valueOf(3);\r\n\r\n  void foo() {\r\n    x = Integer.valueOf(x.intValue() + 1);\r\n  }\r\n}\r\n```\r\n\r\nWhy? Because the JLS says so - that&#39;s what happens when you try to `x++` where `x` is a non-primitive type, _but_, is autoboxable to an `int`.\r\n\r\nSo, what happens here? Who knows? Who cares - the code of `valueOf` does what it does. It acts as the spec says it acts, it&#39;s generally not useful to ask _how_. But, if you&#39;re interested:\r\n\r\n`Integer` (the class), upon loading (which it always will, as its such a core class) creates a &#39;cache&#39;, and makes 1 Integer object for each value between -128 and +127. `Integer.valueOf` will return you the value from the cache if possible (i.e. the argument you pass to it is between -128 and +127) otherwise it creates a new Integer object. Given that 3 and 4 fit, you get something like this:\r\n\r\n```\r\npackage java.lang;\r\n\r\npublic class Integer {\r\n  private static final Integer[] cache = new Integer[255];\r\n\r\n  static {\r\n    for (int i = 0; i &lt; 256; i++) {\r\n      cache[i] = new Integer(i - 128);\r\n    }\r\n  }\r\n\r\n  public static Integer valueOf(int v) {\r\n    if (v &gt;= -128 &amp;&amp; v &lt;= 127) return cache[v + 128];\r\n    return new Integer(v);\r\n  }\r\n\r\n  private final int value;\r\n\r\n  public Integer(int v) {\r\n    this.value = v;\r\n  }\r\n\r\n  public int intValue() {\r\n    return v;\r\n  }\r\n}\r\n```\r\n\r\n`x + 1` in java works because the spec says so. It doesn&#39;t have some lookup table that says &#39;3 + 1 is 4&#39;, the concept of adding is baked into CPUs. Forget about pointers and such, computers are binary so numbers can only exist strictly in terms of zeroes and ones. Hence, even -1 is tricky (there&#39;s no &#39;-&#39;. Just zeroes and ones!). However, just because a number is stored in binary doesn&#39;t mean that adding is somehow impossible.\r\n\r\nGiven, say, 5 and 9:\r\n\r\n* 5 = 00000101 in binary\r\n* 9 = 00001001 in binary\r\n\r\nto add them, you do the same thing you&#39;d do when adding 2 decimal numbers. Add each element and make sure to carry any excess. So:\r\n\r\n* the final digits are 1 and 1. Add those together: That&#39;s 0, carry the 1. We have: `???????0`\r\n* The next two digits are 0 and 0. But we did have that carry, so, that&#39;s a 1. So far, we&#39;re at `??????10`.\r\n* The 3rd digit from the left is 1 and 0. Add em up, that&#39;s a 1. We&#39;re at `?????110`.\r\n\r\n... and so on. Arriving at `00001110`. There is no need for lookup tables to do this. Just a repeated application of this trivial table:\r\n\r\n|carry-in|digit1|digit2|output|carry\r\n|----|----|----|----|----|\r\n|0|0|0|0|0\r\n|0|1|0|1|0\r\n|0|0|1|1|0\r\n|0|1|1|0|1\r\n|1|0|0|1|0\r\n|1|1|0|0|1\r\n|1|0|1|0|1\r\n|1|1|1|1|1\r\n\r\nThat logic (that &#39;table&#39; + the logic to repeatedly apply it to every digit) is baked into the silicon of your CPU.\r\n\r\n","title":"The definition of the literal","body":"<p>x isn't a pointer.</p>\n<p>The JVM spec just says what happens; <em>how</em> it happens is intentionally not specified. So, this answer merely explains how it works on all JVMs I'm aware of. Almost as good. It should certainly clarify matters:</p>\n<pre><code>class Example {\n  int x = 3;\n\n  void foo() {\n    x++;\n  }\n}\n</code></pre>\n<p>Here, any time <code>new Example()</code> is executed, some block of memory is reserved for this instance. An instance of an object is simply a block of  memory that holds its basic properties (including that this is an object of type <code>Example</code>) and room to store the value of <em>every</em> non-static field. In this case, <code>int x</code> - that's a non-static field.</p>\n<p>Primitives are special data types: It's a hard coded list: int, long, short, byte, double, float, boolean, and char. That's it. That's the whole list, you can't add any new types. They are 'special' - any value of a primitive type is just the value. <strong>not a pointer</strong>.</p>\n<p>Thus, <code>int x = 3</code> means that any attempt to make a new Example instance (<code>new Example()</code>) will, as mentioned, reserve some space in memory to store the value of the <code>x</code> field, and that value is <em>directly</em> 3. It's not 'a pointer to a 3 object'. It's just.. 3. It'll take at least 32-bits (as <code>int</code> is 32 bits), it might effectively take 64 (CPUs pretty much require that objects are nicely aligned: That they start on a value that is divisible by 64, on 64-bit CPUs).</p>\n<p><code>x++</code> simply finds that memory position with the bit sequence 0000....0000011 (<code>0011</code> is binary for '3'), and increments it, turning that into 0000....0000100.</p>\n<p>In contrast, let's try with an object - anything that isn't on that list of primitives is an object, and all such values <em>are</em> pointers. (In java speak, 'references'). So, in this very slightly changed code:</p>\n<pre><code>class Example {\n  Integer x = 3;\n\n  void foo() {\n    x++;\n  }\n}\n</code></pre>\n<p>Something very very different is going on. For starters, auto-boxing: That is syntax sugar and is compiled as if you wrote:</p>\n<pre><code>class Example {\n  Integer x = Integer.valueOf(3);\n\n  void foo() {\n    x = Integer.valueOf(x.intValue() + 1);\n  }\n}\n</code></pre>\n<p>Why? Because the JLS says so - that's what happens when you try to <code>x++</code> where <code>x</code> is a non-primitive type, <em>but</em>, is autoboxable to an <code>int</code>.</p>\n<p>So, what happens here? Who knows? Who cares - the code of <code>valueOf</code> does what it does. It acts as the spec says it acts, it's generally not useful to ask <em>how</em>. But, if you're interested:</p>\n<p><code>Integer</code> (the class), upon loading (which it always will, as its such a core class) creates a 'cache', and makes 1 Integer object for each value between -128 and +127. <code>Integer.valueOf</code> will return you the value from the cache if possible (i.e. the argument you pass to it is between -128 and +127) otherwise it creates a new Integer object. Given that 3 and 4 fit, you get something like this:</p>\n<pre><code>package java.lang;\n\npublic class Integer {\n  private static final Integer[] cache = new Integer[255];\n\n  static {\n    for (int i = 0; i &lt; 256; i++) {\n      cache[i] = new Integer(i - 128);\n    }\n  }\n\n  public static Integer valueOf(int v) {\n    if (v &gt;= -128 &amp;&amp; v &lt;= 127) return cache[v + 128];\n    return new Integer(v);\n  }\n\n  private final int value;\n\n  public Integer(int v) {\n    this.value = v;\n  }\n\n  public int intValue() {\n    return v;\n  }\n}\n</code></pre>\n<p><code>x + 1</code> in java works because the spec says so. It doesn't have some lookup table that says '3 + 1 is 4', the concept of adding is baked into CPUs. Forget about pointers and such, computers are binary so numbers can only exist strictly in terms of zeroes and ones. Hence, even -1 is tricky (there's no '-'. Just zeroes and ones!). However, just because a number is stored in binary doesn't mean that adding is somehow impossible.</p>\n<p>Given, say, 5 and 9:</p>\n<ul>\n<li>5 = 00000101 in binary</li>\n<li>9 = 00001001 in binary</li>\n</ul>\n<p>to add them, you do the same thing you'd do when adding 2 decimal numbers. Add each element and make sure to carry any excess. So:</p>\n<ul>\n<li>the final digits are 1 and 1. Add those together: That's 0, carry the 1. We have: <code>???????0</code></li>\n<li>The next two digits are 0 and 0. But we did have that carry, so, that's a 1. So far, we're at <code>??????10</code>.</li>\n<li>The 3rd digit from the left is 1 and 0. Add em up, that's a 1. We're at <code>?????110</code>.</li>\n</ul>\n<p>... and so on. Arriving at <code>00001110</code>. There is no need for lookup tables to do this. Just a repeated application of this trivial table:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>carry-in</th>\n<th>digit1</th>\n<th>digit2</th>\n<th>output</th>\n<th>carry</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n</tr>\n<tr>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>0</td>\n</tr>\n<tr>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n</tr>\n<tr>\n<td>1</td>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>That logic (that 'table' + the logic to repeatedly apply it to every digit) is baked into the silicon of your CPU.</p>\n"}],"owner":{"account_id":29421839,"reputation":1,"user_id":22543424,"display_name":"Timur Tynychbekov"},"comment_count":7,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":9,"up_vote_count":0,"closed_date":1697128348,"accepted_answer_id":77282211,"answer_count":1,"score":-9,"last_activity_date":1697129168,"creation_date":1697125448,"question_id":77282057,"body_markdown":"When we do some operation on a variable, we just change pointer to another literal? I am a bit confused understanding the exact meaning of the term &#39;literal&#39;.\r\n\r\nSuppose we have int x = 3; // 3 is literal and immutable , x is variable\r\n\r\nDoing operation for ex: x++\r\n\r\nAnd now x == 4; so our var x is just pointing to a new literal. Does the computer just remember that 3 + 1 is 4?\r\n","title":"The definition of the literal","body":"<p>When we do some operation on a variable, we just change pointer to another literal? I am a bit confused understanding the exact meaning of the term 'literal'.</p>\n<p>Suppose we have int x = 3; // 3 is literal and immutable , x is variable</p>\n<p>Doing operation for ex: x++</p>\n<p>And now x == 4; so our var x is just pointing to a new literal. Does the computer just remember that 3 + 1 is 4?</p>\n"},{"tags":["java","dependencies","coupling"],"comments":[{"owner":{"account_id":196869,"reputation":402550,"user_id":440558,"accept_rate":75,"display_name":"Some programmer dude"},"score":1,"creation_date":1697106920,"post_id":77279811,"comment_id":136239188,"body_markdown":"The examples doesn&#39;t illustrate coupling for object creation, but rather for object usage. In the second example, the internal state and implementation is hidden from the users of the class. How the `Box` class implements the `getVolume()` function is unknown from the outside, and it doesn&#39;t actually matter at all for the users of the class. If the implementation of the `getVolume` function, or how it stores the volume (the `volume` member variable) changes, that doesn&#39;t matter for the users.","body":"The examples doesn&#39;t illustrate coupling for object creation, but rather for object usage. In the second example, the internal state and implementation is hidden from the users of the class. How the <code>Box</code> class implements the <code>getVolume()</code> function is unknown from the outside, and it doesn&#39;t actually matter at all for the users of the class. If the implementation of the <code>getVolume</code> function, or how it stores the volume (the <code>volume</code> member variable) changes, that doesn&#39;t matter for the users."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1697108793,"post_id":77279811,"comment_id":136239590,"body_markdown":"There is a lot of poor quality stuff on Geeks-for-Geeks.  That example is actually an example of strong versus weak encapsulation, IMO.","body":"There is a lot of poor quality stuff on Geeks-for-Geeks.  That example is actually an example of strong versus weak encapsulation, IMO."},{"owner":{"account_id":2090997,"reputation":844,"user_id":7516740,"display_name":"elvis"},"score":0,"creation_date":1697114960,"post_id":77279811,"comment_id":136240788,"body_markdown":"@StephenC where can I find a good example of loosely coupled and tightly coupled? Thank you!","body":"@StephenC where can I find a good example of loosely coupled and tightly coupled? Thank you!"}],"answers":[{"tags":[],"owner":{"account_id":1799526,"reputation":413,"user_id":1638190,"accept_rate":43,"display_name":"kjerins"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697107098,"creation_date":1697107098,"answer_id":77279858,"question_id":77279811,"body_markdown":"Objects have an API - their public-facing parts that anyone can use. If you add some new mandatory thing to the API, or remove some parts, then calling code will most likely have to be updated too. But not all changes to a class have to change the API. For example, consider what happens if you want to store the individual dimensions in your `Box` class, not the volume (you probably don&#39;t want to store both, because that&#39;s unnecessary duplication - if one of the dimensions changes, you will have to recalculate the volume anyway). In the tight coupling scenario, there&#39;s no way to keep `Main` unchanged after that change. In the loose coupling scenario, you&#39;re adding new `private` fields for the dimensions and changing the implementation of `getVolume()`, but `Main` doesn&#39;t care about that and doesn&#39;t change.","title":"Why you don&#39;t need to change the Java class in loosely coupling?","body":"<p>Objects have an API - their public-facing parts that anyone can use. If you add some new mandatory thing to the API, or remove some parts, then calling code will most likely have to be updated too. But not all changes to a class have to change the API. For example, consider what happens if you want to store the individual dimensions in your <code>Box</code> class, not the volume (you probably don't want to store both, because that's unnecessary duplication - if one of the dimensions changes, you will have to recalculate the volume anyway). In the tight coupling scenario, there's no way to keep <code>Main</code> unchanged after that change. In the loose coupling scenario, you're adding new <code>private</code> fields for the dimensions and changing the implementation of <code>getVolume()</code>, but <code>Main</code> doesn't care about that and doesn't change.</p>\n"},{"comments":[{"owner":{"account_id":2090997,"reputation":844,"user_id":7516740,"display_name":"elvis"},"score":0,"creation_date":1697206852,"post_id":77281630,"comment_id":136254687,"body_markdown":"Thank you for explanation! So the loosely coupling ex is less coupled than the tightly coupling ex because some other class can&#39;t assign values to the field volume directly. On the GeekForGeek, there is another ex with Topic and Subject, but without dependency injection, I can&#39;t see much difference, and if we want to change from Topic1 to Topic2 we need to change only the object to Topic2, and the reference variable will remain the same t. Is it a less coupled ex like this without DI (the object is created manually with new keyword) or only when we use DI we could say we have loosely coupling?","body":"Thank you for explanation! So the loosely coupling ex is less coupled than the tightly coupling ex because some other class can&#39;t assign values to the field volume directly. On the GeekForGeek, there is another ex with Topic and Subject, but without dependency injection, I can&#39;t see much difference, and if we want to change from Topic1 to Topic2 we need to change only the object to Topic2, and the reference variable will remain the same t. Is it a less coupled ex like this without DI (the object is created manually with new keyword) or only when we use DI we could say we have loosely coupling?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1697209617,"post_id":77281630,"comment_id":136255313,"body_markdown":"*&quot;So the loosely coupling ex is less coupled than the tightly coupling ex because some other class can&#39;t assign values to the field volume directly.&quot;* - Or access it.  Or depend on it (directly) in any other way.","body":"<i>&quot;So the loosely coupling ex is less coupled than the tightly coupling ex because some other class can&#39;t assign values to the field volume directly.&quot;</i> - Or access it.  Or depend on it (directly) in any other way."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1697209725,"post_id":77281630,"comment_id":136255335,"body_markdown":"I&#39;m not going to talk about another example.  And I&#39;ve already told you what I think of Geeks-for-Geeks as a source of ... knowledge.","body":"I&#39;m not going to talk about another example.  And I&#39;ve already told you what I think of Geeks-for-Geeks as a source of ... knowledge."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697129124,"creation_date":1697121951,"answer_id":77281630,"question_id":77279811,"body_markdown":"The problem with examples of tight (strong) versus weak (loose) coupling is that they tend to conflate the concepts of coupling and data abstraction.  These are related concepts ... but they are not the same thing.\r\n\r\nIn the example you found&lt;sup&gt;1&lt;/sup&gt;, the most important problem with the &quot;tight coupling&quot; case is that the `Box.volume` field is declared as `public`.  This *allows* other code to directly use that field, and it means that the other code can depend on the name and type (and implied semantics) of the field.\r\n\r\nBy contrast, the &quot;loose coupling&quot; case declares that field as `private`, which removes the possibility of other code depending on the actual field.  Of course, we have replaced it with a getter method (`int getVolume()`), and there will still be coupling between the two classes.  But we have removed the possibility of coupling between the actual (now private) field and the classes that consume the volume.  And for the sake of argument, we could change the `Box` class to store the box dimensions and compute the volume on the fly; e.g.\r\n\r\n    class Box { \r\n         private int length, width, height; \r\n         Box (int length, int width, int height) { \r\n             // check the arguments are &gt;= 0 and set the fields  \r\n         }\r\n         public int getVolume() {  \r\n             return length * width * height;    \r\n         } \r\n    }\r\n\r\nBut how does this relate to data abstraction?  Well in the version above with private fields, some other class can&#39;t assign values to the fields directly.  But if they were public, other classes could change the box dimensions ... and even assign nonsense values to them, resulting in (say) the `getVolume` returning a negative volume.\r\n\r\n-----------------------\r\n\r\nNote that in an example like this it is not possible remove all coupling.  And whenever you have *any* coupling at all, that means that *some* changes to a class will inevitably require changes to others.\r\n\r\nYour counter-example seems to be arguing that since adding a 4th parameter (dimension?) to `Box` will entail changing `Volume`.  That is true.  But it does not mean that the &quot;loose coupling&quot; example is invalid.  The proposition was that the &quot;loose&quot; version was less coupled than the &quot;tight&quot; version.  It was NOT that there was no coupling at all.\r\n\r\nAnd indeed, if you add the 4th parameter to `Box` in your &quot;tight&quot; version in the obvious way, the same changes will need to be made to `Volume`.  For &gt;that&lt; change, our reduction in coupling by hiding of the `volume` field is neutral.  But it is not neutral for the change embodied in my version above!\r\n\r\n-----------------------\r\n\r\nTo sum it up, coupling is a matter of degree.  Coupling between modules (classes, whatever) cannot be removed entirely ... if they need to work together.  What you really need to focus on is coupling that makes it harder to understand and maintain a code base; e.g. coupling that is unnecessary, unexpected or hidden from the programmer in some way. \r\n\r\n-----------------------\r\n\r\n&lt;sup&gt;1 - I commented that the example you found is a poor one.  In fact, the real problem is in the explanation that you quoted.  That explanation is simply incorrect.  I don&#39;t recommend Geeks-for-Geeks as a source of information.&lt;/sup&gt;","title":"Why you don&#39;t need to change the Java class in loosely coupling?","body":"<p>The problem with examples of tight (strong) versus weak (loose) coupling is that they tend to conflate the concepts of coupling and data abstraction.  These are related concepts ... but they are not the same thing.</p>\n<p>In the example you found<sup>1</sup>, the most important problem with the &quot;tight coupling&quot; case is that the <code>Box.volume</code> field is declared as <code>public</code>.  This <em>allows</em> other code to directly use that field, and it means that the other code can depend on the name and type (and implied semantics) of the field.</p>\n<p>By contrast, the &quot;loose coupling&quot; case declares that field as <code>private</code>, which removes the possibility of other code depending on the actual field.  Of course, we have replaced it with a getter method (<code>int getVolume()</code>), and there will still be coupling between the two classes.  But we have removed the possibility of coupling between the actual (now private) field and the classes that consume the volume.  And for the sake of argument, we could change the <code>Box</code> class to store the box dimensions and compute the volume on the fly; e.g.</p>\n<pre><code>class Box { \n     private int length, width, height; \n     Box (int length, int width, int height) { \n         // check the arguments are &gt;= 0 and set the fields  \n     }\n     public int getVolume() {  \n         return length * width * height;    \n     } \n}\n</code></pre>\n<p>But how does this relate to data abstraction?  Well in the version above with private fields, some other class can't assign values to the fields directly.  But if they were public, other classes could change the box dimensions ... and even assign nonsense values to them, resulting in (say) the <code>getVolume</code> returning a negative volume.</p>\n<hr />\n<p>Note that in an example like this it is not possible remove all coupling.  And whenever you have <em>any</em> coupling at all, that means that <em>some</em> changes to a class will inevitably require changes to others.</p>\n<p>Your counter-example seems to be arguing that since adding a 4th parameter (dimension?) to <code>Box</code> will entail changing <code>Volume</code>.  That is true.  But it does not mean that the &quot;loose coupling&quot; example is invalid.  The proposition was that the &quot;loose&quot; version was less coupled than the &quot;tight&quot; version.  It was NOT that there was no coupling at all.</p>\n<p>And indeed, if you add the 4th parameter to <code>Box</code> in your &quot;tight&quot; version in the obvious way, the same changes will need to be made to <code>Volume</code>.  For &gt;that&lt; change, our reduction in coupling by hiding of the <code>volume</code> field is neutral.  But it is not neutral for the change embodied in my version above!</p>\n<hr />\n<p>To sum it up, coupling is a matter of degree.  Coupling between modules (classes, whatever) cannot be removed entirely ... if they need to work together.  What you really need to focus on is coupling that makes it harder to understand and maintain a code base; e.g. coupling that is unnecessary, unexpected or hidden from the programmer in some way.</p>\n<hr />\n<p><sup>1 - I commented that the example you found is a poor one.  In fact, the real problem is in the explanation that you quoted.  That explanation is simply incorrect.  I don't recommend Geeks-for-Geeks as a source of information.</sup></p>\n"}],"owner":{"account_id":2090997,"reputation":844,"user_id":7516740,"display_name":"elvis"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77281630,"answer_count":2,"score":0,"last_activity_date":1697129124,"creation_date":1697106606,"question_id":77279811,"body_markdown":"I&#39;m a Java developer and I try to understand the coupling in Java, tightly coupling vs loosely coupling. There are a lot of information and the definition is simple: Coupling – the degree of dependency between the components. If more dependency is there it’s considered tightly coupling, if less dependency is there it’s considered loosely coupling. \r\n\r\nBut when I look at the example I don&#39;t understand it. For ex this website https://www.geeksforgeeks.org/coupling-in-java/\r\n\r\n**tight coupling example** \r\n\r\n    class Volume  \r\n    { \r\n         public static void main(String args[])  \r\n         { \r\n             Box b = new Box(5,5,5); \r\n             System.out.println(b.volume); \r\n         } \r\n    } \r\n    class Box  \r\n    { \r\n         public int volume; \r\n         Box(int length, int width, int height)  \r\n         { \r\n             this.volume = length * width * height; \r\n         } \r\n    } \r\n\r\n&quot;Explanation:In the above example, there is a strong inter-dependency between both the classes. If there is any change in Box class then they reflects in the result of Class Volume.&quot;\r\n\r\n**loose coupling example** \r\n\r\n    class Volume  \r\n    { \r\n         public static void main(String args[])  \r\n         { \r\n             Box b = new Box(5,5,5); \r\n             System.out.println(b.getVolume()); \r\n         } \r\n    } \r\n    final class Box  \r\n    { \r\n         private int volume; \r\n         Box(int length, int width, int height)  \r\n         { \r\n             this.volume = length * width * height; \r\n         } \r\n         public int getVolume()  \r\n         {  \r\n             return volume;  \r\n               \r\n         } \r\n    } \r\n\r\n&quot;Explanation : In the loosely coupling program, there is no dependency between both the classes. If we change anything in the Box classes then we don&#39;t have to change anything in Volume class.&quot;\r\n\r\nBut this is not true, if we change the class Box for ex we add another parameter in the constructor like here:\r\n\r\n     Box(int length, int width, int height, int b)  \r\n     { \r\n         this.volume = length * width * height + b; \r\n     } \r\n\r\nThen we need to change the class Volume otherwise there will be compilation errors:\r\n\r\n         Box b = new Box(5,5,5,3); \r\n\r\nSo, these changes should be done for both examples tightly coupling and also loosely coupling. What are they referring when they are saying you don&#39;t need to change something in the Volume class? Any feedback will be appreciated!\r\n\r\n\r\n","title":"Why you don&#39;t need to change the Java class in loosely coupling?","body":"<p>I'm a Java developer and I try to understand the coupling in Java, tightly coupling vs loosely coupling. There are a lot of information and the definition is simple: Coupling – the degree of dependency between the components. If more dependency is there it’s considered tightly coupling, if less dependency is there it’s considered loosely coupling.</p>\n<p>But when I look at the example I don't understand it. For ex this website <a href=\"https://www.geeksforgeeks.org/coupling-in-java/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/coupling-in-java/</a></p>\n<p><strong>tight coupling example</strong></p>\n<pre><code>class Volume  \n{ \n     public static void main(String args[])  \n     { \n         Box b = new Box(5,5,5); \n         System.out.println(b.volume); \n     } \n} \nclass Box  \n{ \n     public int volume; \n     Box(int length, int width, int height)  \n     { \n         this.volume = length * width * height; \n     } \n} \n</code></pre>\n<p>&quot;Explanation:In the above example, there is a strong inter-dependency between both the classes. If there is any change in Box class then they reflects in the result of Class Volume.&quot;</p>\n<p><strong>loose coupling example</strong></p>\n<pre><code>class Volume  \n{ \n     public static void main(String args[])  \n     { \n         Box b = new Box(5,5,5); \n         System.out.println(b.getVolume()); \n     } \n} \nfinal class Box  \n{ \n     private int volume; \n     Box(int length, int width, int height)  \n     { \n         this.volume = length * width * height; \n     } \n     public int getVolume()  \n     {  \n         return volume;  \n           \n     } \n} \n</code></pre>\n<p>&quot;Explanation : In the loosely coupling program, there is no dependency between both the classes. If we change anything in the Box classes then we don't have to change anything in Volume class.&quot;</p>\n<p>But this is not true, if we change the class Box for ex we add another parameter in the constructor like here:</p>\n<pre><code> Box(int length, int width, int height, int b)  \n { \n     this.volume = length * width * height + b; \n } \n</code></pre>\n<p>Then we need to change the class Volume otherwise there will be compilation errors:</p>\n<pre><code>     Box b = new Box(5,5,5,3); \n</code></pre>\n<p>So, these changes should be done for both examples tightly coupling and also loosely coupling. What are they referring when they are saying you don't need to change something in the Volume class? Any feedback will be appreciated!</p>\n"},{"tags":["java","function","url","input","aws-lambda"],"owner":{"account_id":10167591,"reputation":21,"user_id":7508952,"display_name":"Radek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697128838,"creation_date":1697101685,"question_id":77279218,"body_markdown":"I want to write a simple Lambda function handler in Java which would act as a simple API (based on the input event object it&#39;s going to decide what http method was called (GET/POST/...) and prepare a proper response).\r\nI would like to utilize the &quot;function URL&quot; option which I can set in the Lambda function configuration to make it possible to call the function handler&#39;s endpoint directly (from a browser or Postman).\r\nThe problem is I don&#39;t know what type of data my Java function handler should receive in such case.\r\n\r\nThe following piece of code works fine if the input parameter was an APIGatewayProxyRequestEvent object (which I would receive if the request was sent through API gateway or if I provide an &quot;API gateway API Proxy&quot; event template JSON which comes in various AWS examples).\r\n\r\n    public class LambdaFunctionHandler implements RequestHandler&lt;APIGatewayProxyRequestEvent, APIGatewayProxyResponseEvent&gt; {\r\n    \r\n        public APIGatewayProxyResponseEvent handleRequest(final APIGatewayProxyRequestEvent input, final Context context) {\r\n    \r\n            LambdaLogger logger = context.getLogger();\r\n            logger.log(&quot;aws lambda function invoked&quot;);\r\n    \r\n            logger.log(&quot;input: &quot; + input.getBody());\r\n            logger.log(&quot;log: httpMethod = &quot; + input.getHttpMethod());       // RETURNS null !!!!\r\n            logger.log(&quot;log: path = &quot; + input.getPath());                   // RETURNS null !!!!\r\n            logger.log(&quot;log: queryStringParameters = &quot; + input.getQueryStringParameters());\r\n    \t\t\r\n    \t\t...\r\n\r\nThe problem is that if I deploy such a function handler (with an APIGatewayProxyRequestEvent object as the input parameter) and then try to trigger this function handler by sending a simple request from Postman to the lambda function&#39;s URL, the request data get transformed into an APIGatewayProxyRequestEvent object after all but it&#39;s not populated correctly - the httpMethod or path are both null even though they were correctly set in Postman.\r\nI therefore assume I need to change the input APIGatewayProxyRequestEvent parameter to be of another type, I just don&#39;t know which type it should be and I haven&#39;t been able to find an answer so far.\r\n\r\nI would think it must be quite easy to get a simple request from Postman/curl/browser/... and receive it in the Java function handler with all the request details (including http method or path) so I just must be missing something (most likely the correct input type of the event object)...\r\n\r\nI&#39;ll be grateful for any piece of advice.\r\n\r\n","title":"What is the input parameter type in an AWS Lambda function handler written in Java when using function URL to trigger the Lambda function?","body":"<p>I want to write a simple Lambda function handler in Java which would act as a simple API (based on the input event object it's going to decide what http method was called (GET/POST/...) and prepare a proper response).\nI would like to utilize the &quot;function URL&quot; option which I can set in the Lambda function configuration to make it possible to call the function handler's endpoint directly (from a browser or Postman).\nThe problem is I don't know what type of data my Java function handler should receive in such case.</p>\n<p>The following piece of code works fine if the input parameter was an APIGatewayProxyRequestEvent object (which I would receive if the request was sent through API gateway or if I provide an &quot;API gateway API Proxy&quot; event template JSON which comes in various AWS examples).</p>\n<pre><code>public class LambdaFunctionHandler implements RequestHandler&lt;APIGatewayProxyRequestEvent, APIGatewayProxyResponseEvent&gt; {\n\n    public APIGatewayProxyResponseEvent handleRequest(final APIGatewayProxyRequestEvent input, final Context context) {\n\n        LambdaLogger logger = context.getLogger();\n        logger.log(&quot;aws lambda function invoked&quot;);\n\n        logger.log(&quot;input: &quot; + input.getBody());\n        logger.log(&quot;log: httpMethod = &quot; + input.getHttpMethod());       // RETURNS null !!!!\n        logger.log(&quot;log: path = &quot; + input.getPath());                   // RETURNS null !!!!\n        logger.log(&quot;log: queryStringParameters = &quot; + input.getQueryStringParameters());\n        \n        ...\n</code></pre>\n<p>The problem is that if I deploy such a function handler (with an APIGatewayProxyRequestEvent object as the input parameter) and then try to trigger this function handler by sending a simple request from Postman to the lambda function's URL, the request data get transformed into an APIGatewayProxyRequestEvent object after all but it's not populated correctly - the httpMethod or path are both null even though they were correctly set in Postman.\nI therefore assume I need to change the input APIGatewayProxyRequestEvent parameter to be of another type, I just don't know which type it should be and I haven't been able to find an answer so far.</p>\n<p>I would think it must be quite easy to get a simple request from Postman/curl/browser/... and receive it in the Java function handler with all the request details (including http method or path) so I just must be missing something (most likely the correct input type of the event object)...</p>\n<p>I'll be grateful for any piece of advice.</p>\n"},{"tags":["java","excel","apache-poi"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1697194968,"post_id":77282358,"comment_id":136252448,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":3502195,"reputation":3,"user_id":4799977,"display_name":"Florian Schweitzer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697128356,"creation_date":1697128356,"question_id":77282358,"body_markdown":"Our software employs Apache POI to open Excel workbooks as templates, copy them and fill them with content.\r\nI&#39;ve recently come across the first Excel workbook that employed Sensitivity Labels. \r\n\r\nOur implementation failed to manipulate these since they (at a first glance) don&#39;t seem to be in OOXML format anymore.\r\nI couldn&#39;t match any of the crypto strategies POI offers to these labels.\r\n\r\nI was hoping to still use POI alone to manipulate these and get around employing JNI-libraries to unlock the templates and resign them.\r\n\r\nDoes POI support these? It appears some python libs seem to be able to work with them.\r\nCan anyone point me in the direction or a solution? \r\nAre these labels known by a different technical name?\r\n\r\n","title":"How can Apache POI open/manipulate Excel files that employ sensitivity labels","body":"<p>Our software employs Apache POI to open Excel workbooks as templates, copy them and fill them with content.\nI've recently come across the first Excel workbook that employed Sensitivity Labels.</p>\n<p>Our implementation failed to manipulate these since they (at a first glance) don't seem to be in OOXML format anymore.\nI couldn't match any of the crypto strategies POI offers to these labels.</p>\n<p>I was hoping to still use POI alone to manipulate these and get around employing JNI-libraries to unlock the templates and resign them.</p>\n<p>Does POI support these? It appears some python libs seem to be able to work with them.\nCan anyone point me in the direction or a solution?\nAre these labels known by a different technical name?</p>\n"},{"tags":["java","maven","pom.xml"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1697188542,"post_id":77279404,"comment_id":136251266,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":29637920,"reputation":1,"user_id":22714715,"display_name":"Sagar Mane"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697128036,"creation_date":1697103263,"question_id":77279404,"body_markdown":"getting this error in 1st line of pom.xml\r\n\r\n&gt; Exception java.lang.ExceptionInInitializerError [in thread &quot;Worker-xx: Updating Maven Project&quot;]\r\n\r\nCant understand what is wrong. \r\n\r\nI have tried the following steps -&gt; &#39;Preferences &gt; Maven &gt; Annotation Processing &gt; Do not automatically configure/execute annotation processing from pom.xml&#39; but this did not work for me. what else can be done?","title":"Exception java.lang.ExceptionInInitializerError [in thread &quot;Worker-xx: Updating Maven Project&quot;","body":"<p>getting this error in 1st line of pom.xml</p>\n<blockquote>\n<p>Exception java.lang.ExceptionInInitializerError [in thread &quot;Worker-xx: Updating Maven Project&quot;]</p>\n</blockquote>\n<p>Cant understand what is wrong.</p>\n<p>I have tried the following steps -&gt; 'Preferences &gt; Maven &gt; Annotation Processing &gt; Do not automatically configure/execute annotation processing from pom.xml' but this did not work for me. what else can be done?</p>\n"},{"tags":["java","spring","mockito"],"answers":[{"comments":[{"owner":{"account_id":7399016,"reputation":348,"user_id":5630034,"display_name":"red9350"},"score":1,"creation_date":1554457570,"post_id":55532454,"comment_id":97768384,"body_markdown":"I fall in the third case: ```doThrow(exception).when(mock).someVoidMethod();``` -&gt; ```doReturn(jobList).when(serviceSpy).fetchJob();```","body":"I fall in the third case: <code>doThrow(exception).when(mock).someVoidMethod();</code> -&gt; <code>doReturn(jobList).when(serviceSpy).fetchJob();</code>"},{"owner":{"account_id":10392325,"reputation":30,"user_id":7663172,"display_name":"mansi"},"score":0,"creation_date":1554458432,"post_id":55532454,"comment_id":97768912,"body_markdown":"fetchJob() is private method or public method?... tell me so that I can tell u exact what u want","body":"fetchJob() is private method or public method?... tell me so that I can tell u exact what u want"},{"owner":{"account_id":7399016,"reputation":348,"user_id":5630034,"display_name":"red9350"},"score":0,"creation_date":1554458801,"post_id":55532454,"comment_id":97769142,"body_markdown":"```fetchJob()``` is a ```@Async public CompletableFuture&lt;JobList&gt;``` method","body":"<code>fetchJob()</code> is a <code>@Async public CompletableFuture&lt;JobList&gt;</code> method"}],"tags":[],"owner":{"account_id":10392325,"reputation":30,"user_id":7663172,"display_name":"mansi"},"comment_count":3,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1554457166,"creation_date":1554457166,"answer_id":55532454,"question_id":55531932,"body_markdown":"    UnfinishedStubbingException means you are not mocking properly\r\n    this is not the right way of mocking a method... Mockito.doReturn(jobList).when(serviceSpy).fetchJob();\r\n    You can try below...\r\n    Examples of correct stubbing:\r\n        when(mock.isOk()).thenReturn(true);\r\n        when(mock.isOk()).thenThrow(exception);\r\n        doThrow(exception).when(mock).someVoidMethod();","title":"Mockito SpyBean throws an UnfinishedStubbingException","body":"<pre><code>UnfinishedStubbingException means you are not mocking properly\nthis is not the right way of mocking a method... Mockito.doReturn(jobList).when(serviceSpy).fetchJob();\nYou can try below...\nExamples of correct stubbing:\n    when(mock.isOk()).thenReturn(true);\n    when(mock.isOk()).thenThrow(exception);\n    doThrow(exception).when(mock).someVoidMethod();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11671423,"reputation":7825,"user_id":8546367,"display_name":"reka18"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697127458,"creation_date":1697127458,"answer_id":77282265,"question_id":55531932,"body_markdown":"Looks like spying async methods breaks Mockito. I removed the async from the method as an experiment and immediately Mockito no longer threw those exceptions.","title":"Mockito SpyBean throws an UnfinishedStubbingException","body":"<p>Looks like spying async methods breaks Mockito. I removed the async from the method as an experiment and immediately Mockito no longer threw those exceptions.</p>\n"}],"owner":{"account_id":7399016,"reputation":348,"user_id":5630034,"display_name":"red9350"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1335,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1697127458,"creation_date":1554455483,"question_id":55531932,"body_markdown":"I&#39;m trying to partially mock a service using Mockito&#39;s Spy, overriding a method to make it return consistent data for testing, but said spy throws an UnfinishedStubbingException for no apparent reason.\r\n\r\nThis is my test class:\r\n```\r\n@SpringBootTest\r\n@RunWith(SpringRunner.class)\r\npublic class ApplicationIT {\r\n\r\n    private CompletableFuture&lt;JobList&gt; jobList;\r\n\r\n    @SpyBean\r\n    private Service serviceSpy;\r\n\r\n    @Before\r\n    public void setUp() {\r\n        initMocks(this);\r\n\r\n        jobList = new CompletableFuture&lt;&gt;();\r\n        jobList.complete(jobList.newBuilder()\r\n                .addAllJobs(jobTestData.getTestJob().getJobs()).build()); \r\n \r\n        Mockito.doReturn(jobList).when(serviceSpy).fetchJob();  \r\n        Mockito.doNothing().when(serviceSpy).reportSuccess(Mockito.any());\r\n    }\r\n\r\n    @Test\r\n    public void fetchJobCallTest() {\r\n        Mockito.verify(serviceSpy, timeout(60000).atLeastOnce()).fetchJob();\r\n    }\r\n\r\n    @Test\r\n    public void reportSuccessCallTest() {       \r\n        Mockito.verify(serviceSpy, timeout(60000).atLeastOnce()).reportSuccess(Mockito.any());\r\n    }\r\n}\r\n```\r\n\r\nBoth tests fail with a ```org.mockito.exceptions.misusing.UnfinishedStubbingException``` pointing to ```Mockito.doReturn(jobList).when(serviceSpy).fetchJob();``` at  ```Mockito.doNothing().when(serviceSpy).reportSuccess(Mockito.any());```","title":"Mockito SpyBean throws an UnfinishedStubbingException","body":"<p>I'm trying to partially mock a service using Mockito's Spy, overriding a method to make it return consistent data for testing, but said spy throws an UnfinishedStubbingException for no apparent reason.</p>\n\n<p>This is my test class:</p>\n\n<pre><code>@SpringBootTest\n@RunWith(SpringRunner.class)\npublic class ApplicationIT {\n\n    private CompletableFuture&lt;JobList&gt; jobList;\n\n    @SpyBean\n    private Service serviceSpy;\n\n    @Before\n    public void setUp() {\n        initMocks(this);\n\n        jobList = new CompletableFuture&lt;&gt;();\n        jobList.complete(jobList.newBuilder()\n                .addAllJobs(jobTestData.getTestJob().getJobs()).build()); \n\n        Mockito.doReturn(jobList).when(serviceSpy).fetchJob();  \n        Mockito.doNothing().when(serviceSpy).reportSuccess(Mockito.any());\n    }\n\n    @Test\n    public void fetchJobCallTest() {\n        Mockito.verify(serviceSpy, timeout(60000).atLeastOnce()).fetchJob();\n    }\n\n    @Test\n    public void reportSuccessCallTest() {       \n        Mockito.verify(serviceSpy, timeout(60000).atLeastOnce()).reportSuccess(Mockito.any());\n    }\n}\n</code></pre>\n\n<p>Both tests fail with a <code>org.mockito.exceptions.misusing.UnfinishedStubbingException</code> pointing to <code>Mockito.doReturn(jobList).when(serviceSpy).fetchJob();</code> at  <code>Mockito.doNothing().when(serviceSpy).reportSuccess(Mockito.any());</code></p>\n"},{"tags":["java","gradle"],"owner":{"account_id":24374764,"reputation":33,"user_id":18307259,"display_name":"muntazir halim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697127358,"creation_date":1697127358,"question_id":77282252,"body_markdown":"I updated Flutter SDK to version 3.13 and encountered an issue. I created a new project, and when trying to run it, it takes an unusually long time, approximately an hour, and the application doesn&#39;t build. \r\n\r\nWhen I run &quot;flutter doctor,&quot; it reports everything as normal. \r\n\r\nHere are the versions I&#39;m using:\r\n- Flutter 3.13\r\n- Java 20\r\n- Gradle 7.5\r\nI also tried using Gradle 8.3, but the issue persists. \r\n\r\nI&#39;m facing the problem where it doesn&#39;t build the application even after running the command:\r\n&quot;Launching lib\\main.dart on SM A705FN in debug mode...&quot;\r\n\r\nCan you provide any assistance with this issue?\r\n\r\n\r\n","title":"Launching lib\\main.dart on SM A705FN in debug mode","body":"<p>I updated Flutter SDK to version 3.13 and encountered an issue. I created a new project, and when trying to run it, it takes an unusually long time, approximately an hour, and the application doesn't build.</p>\n<p>When I run &quot;flutter doctor,&quot; it reports everything as normal.</p>\n<p>Here are the versions I'm using:</p>\n<ul>\n<li>Flutter 3.13</li>\n<li>Java 20</li>\n<li>Gradle 7.5\nI also tried using Gradle 8.3, but the issue persists.</li>\n</ul>\n<p>I'm facing the problem where it doesn't build the application even after running the command:\n&quot;Launching lib\\main.dart on SM A705FN in debug mode...&quot;</p>\n<p>Can you provide any assistance with this issue?</p>\n"},{"tags":["java","multithreading","concurrency","sleep","java-17"],"answers":[{"comments":[{"owner":{"account_id":7229617,"reputation":485,"user_id":5516979,"accept_rate":93,"display_name":"deko"},"score":0,"creation_date":1697127412,"post_id":77282112,"comment_id":136243748,"body_markdown":"Much appreciated","body":"Much appreciated"}],"tags":[],"owner":{"account_id":2800812,"reputation":1340,"user_id":2409095,"display_name":"Dhrubajyoti Gogoi"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1697126092,"creation_date":1697126092,"answer_id":77282112,"question_id":77282030,"body_markdown":"You main thread is not waiting for other threads to complete the task. Since you added a delay, the problem becomes more apparent.\r\n\r\nCheck [Thread#join()](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html#join()) and https://stackoverflow.com/questions/1252190/how-to-wait-for-a-number-of-threads-to-complete","title":"Multithreading, concurrency and sleep not working as expected","body":"<p>You main thread is not waiting for other threads to complete the task. Since you added a delay, the problem becomes more apparent.</p>\n<p>Check <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html#join()\" rel=\"noreferrer\">Thread#join()</a> and <a href=\"https://stackoverflow.com/questions/1252190/how-to-wait-for-a-number-of-threads-to-complete\">How to wait for a number of threads to complete?</a></p>\n"}],"owner":{"account_id":7229617,"reputation":485,"user_id":5516979,"accept_rate":93,"display_name":"deko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77282112,"answer_count":1,"score":2,"last_activity_date":1697127013,"creation_date":1697125175,"question_id":77282030,"body_markdown":"I have a very simple scenario. The following method tries to get access to a lock, waits for 1 second and eventually releases the lock.\r\n\r\n    private final Lock lock = new ReentrantLock();\r\n\r\n    public void lockAndWait() {\r\n    \r\n        logger.info(&quot;I {} am here&quot;, Thread.currentThread().getName());\r\n    \r\n        lock.lock();\r\n    \r\n        try {\r\n    \r\n            logger.info(&quot;I {} got the lock&quot;, Thread.currentThread().getName());\r\n    \r\n            try {\r\n                Thread.sleep(1000);\r\n            } catch (InterruptedException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n    \r\n        } finally {\r\n            lock.unlock();\r\n        }\r\n    }\r\n\r\n\r\nI&#39;m running the following test:\r\n\r\n    @Test\r\n    public void lockTest() {\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            new Thread(() -&gt; lockAndWait()).start();\r\n        }\r\n    }\r\n\r\nAnd I&#39;m getting the following log output:\r\n\r\n    12-10-2023 17:11:04 [Thread-2       ] INFO   I Thread-2 am here\r\n    12-10-2023 17:11:04 [Thread-1       ] INFO   I Thread-1 am here\r\n    12-10-2023 17:11:04 [Thread-6       ] INFO   I Thread-6 am here\r\n    12-10-2023 17:11:04 [Thread-4       ] INFO   I Thread-4 am here\r\n    12-10-2023 17:11:04 [Thread-8       ] INFO   I Thread-8 am here\r\n    12-10-2023 17:11:04 [Thread-7       ] INFO   I Thread-7 am here\r\n    12-10-2023 17:11:04 [Thread-5       ] INFO   I Thread-5 am here\r\n    12-10-2023 17:11:04 [Thread-2       ] INFO   I Thread-2 got the lock\r\n    12-10-2023 17:11:04 [Thread-3       ] INFO   I Thread-3 am here\r\n    12-10-2023 17:11:04 [Thread-10      ] INFO   I Thread-10 am here\r\n    12-10-2023 17:11:04 [Thread-9       ] INFO   I Thread-9 am here\r\n\r\nI don&#39;t understand why only one thread, in this case Thread-2, is getting access to the lock. I was expecting the rest of the threads to be waiting on the `lock.lock();` statement and once Thread-2 released the lock, one of them would get it until all threads did. If I remove the `Thread.sleep(1000);` line, what I expect happens, but I don&#39;t understand why.\r\n\r\nWhat am I missing?\r\n\r\n**SOLUTION**\r\n\r\nBased on what Dhrubajyoti Gogoi has answered, I&#39;ve modified my test method and now is working as expected.\r\n\r\n    @Test\r\n    public void policyUsageTest() throws InterruptedException {\r\n\r\n        List&lt;Thread&gt; threads = new ArrayList&lt;&gt;();\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            Thread thread = new Thread(() -&gt; lockAndWait());\r\n            thread.start();\r\n            threads.add(thread);\r\n        }\r\n\r\n        for (Thread thread : threads) {\r\n            thread.join();\r\n        }\r\n    }\r\n\r\n**Output**\r\n\r\n    12-10-2023 18:08:14 [Thread-1       ] INFO   I Thread-1 am here\r\n    12-10-2023 18:08:14 [Thread-5       ] INFO   I Thread-5 am here\r\n    12-10-2023 18:08:14 [Thread-2       ] INFO   I Thread-2 am here\r\n    12-10-2023 18:08:14 [Thread-9       ] INFO   I Thread-9 am here\r\n    12-10-2023 18:08:14 [Thread-4       ] INFO   I Thread-4 am here\r\n    12-10-2023 18:08:14 [Thread-7       ] INFO   I Thread-7 am here\r\n    12-10-2023 18:08:14 [Thread-3       ] INFO   I Thread-3 am here\r\n    12-10-2023 18:08:14 [Thread-8       ] INFO   I Thread-8 am here\r\n    12-10-2023 18:08:14 [Thread-10      ] INFO   I Thread-10 am here\r\n    12-10-2023 18:08:14 [Thread-6       ] INFO   I Thread-6 am here\r\n    12-10-2023 18:08:14 [Thread-1       ] INFO   I Thread-1 got the lock\r\n    12-10-2023 18:08:15 [Thread-2       ] INFO   I Thread-2 got the lock\r\n    12-10-2023 18:08:16 [Thread-9       ] INFO   I Thread-9 got the lock\r\n    12-10-2023 18:08:17 [Thread-5       ] INFO   I Thread-5 got the lock\r\n    12-10-2023 18:08:18 [Thread-4       ] INFO   I Thread-4 got the lock\r\n    12-10-2023 18:08:19 [Thread-3       ] INFO   I Thread-3 got the lock\r\n    12-10-2023 18:08:20 [Thread-7       ] INFO   I Thread-7 got the lock\r\n    12-10-2023 18:08:21 [Thread-8       ] INFO   I Thread-8 got the lock\r\n    12-10-2023 18:08:22 [Thread-10      ] INFO   I Thread-10 got the lock\r\n    12-10-2023 18:08:23 [Thread-6       ] INFO   I Thread-6 got the lock","title":"Multithreading, concurrency and sleep not working as expected","body":"<p>I have a very simple scenario. The following method tries to get access to a lock, waits for 1 second and eventually releases the lock.</p>\n<pre><code>private final Lock lock = new ReentrantLock();\n\npublic void lockAndWait() {\n\n    logger.info(&quot;I {} am here&quot;, Thread.currentThread().getName());\n\n    lock.lock();\n\n    try {\n\n        logger.info(&quot;I {} got the lock&quot;, Thread.currentThread().getName());\n\n        try {\n            Thread.sleep(1000);\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n\n    } finally {\n        lock.unlock();\n    }\n}\n</code></pre>\n<p>I'm running the following test:</p>\n<pre><code>@Test\npublic void lockTest() {\n    for (int i = 0; i &lt; 10; i++) {\n        new Thread(() -&gt; lockAndWait()).start();\n    }\n}\n</code></pre>\n<p>And I'm getting the following log output:</p>\n<pre><code>12-10-2023 17:11:04 [Thread-2       ] INFO   I Thread-2 am here\n12-10-2023 17:11:04 [Thread-1       ] INFO   I Thread-1 am here\n12-10-2023 17:11:04 [Thread-6       ] INFO   I Thread-6 am here\n12-10-2023 17:11:04 [Thread-4       ] INFO   I Thread-4 am here\n12-10-2023 17:11:04 [Thread-8       ] INFO   I Thread-8 am here\n12-10-2023 17:11:04 [Thread-7       ] INFO   I Thread-7 am here\n12-10-2023 17:11:04 [Thread-5       ] INFO   I Thread-5 am here\n12-10-2023 17:11:04 [Thread-2       ] INFO   I Thread-2 got the lock\n12-10-2023 17:11:04 [Thread-3       ] INFO   I Thread-3 am here\n12-10-2023 17:11:04 [Thread-10      ] INFO   I Thread-10 am here\n12-10-2023 17:11:04 [Thread-9       ] INFO   I Thread-9 am here\n</code></pre>\n<p>I don't understand why only one thread, in this case Thread-2, is getting access to the lock. I was expecting the rest of the threads to be waiting on the <code>lock.lock();</code> statement and once Thread-2 released the lock, one of them would get it until all threads did. If I remove the <code>Thread.sleep(1000);</code> line, what I expect happens, but I don't understand why.</p>\n<p>What am I missing?</p>\n<p><strong>SOLUTION</strong></p>\n<p>Based on what Dhrubajyoti Gogoi has answered, I've modified my test method and now is working as expected.</p>\n<pre><code>@Test\npublic void policyUsageTest() throws InterruptedException {\n\n    List&lt;Thread&gt; threads = new ArrayList&lt;&gt;();\n\n    for (int i = 0; i &lt; 10; i++) {\n        Thread thread = new Thread(() -&gt; lockAndWait());\n        thread.start();\n        threads.add(thread);\n    }\n\n    for (Thread thread : threads) {\n        thread.join();\n    }\n}\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>12-10-2023 18:08:14 [Thread-1       ] INFO   I Thread-1 am here\n12-10-2023 18:08:14 [Thread-5       ] INFO   I Thread-5 am here\n12-10-2023 18:08:14 [Thread-2       ] INFO   I Thread-2 am here\n12-10-2023 18:08:14 [Thread-9       ] INFO   I Thread-9 am here\n12-10-2023 18:08:14 [Thread-4       ] INFO   I Thread-4 am here\n12-10-2023 18:08:14 [Thread-7       ] INFO   I Thread-7 am here\n12-10-2023 18:08:14 [Thread-3       ] INFO   I Thread-3 am here\n12-10-2023 18:08:14 [Thread-8       ] INFO   I Thread-8 am here\n12-10-2023 18:08:14 [Thread-10      ] INFO   I Thread-10 am here\n12-10-2023 18:08:14 [Thread-6       ] INFO   I Thread-6 am here\n12-10-2023 18:08:14 [Thread-1       ] INFO   I Thread-1 got the lock\n12-10-2023 18:08:15 [Thread-2       ] INFO   I Thread-2 got the lock\n12-10-2023 18:08:16 [Thread-9       ] INFO   I Thread-9 got the lock\n12-10-2023 18:08:17 [Thread-5       ] INFO   I Thread-5 got the lock\n12-10-2023 18:08:18 [Thread-4       ] INFO   I Thread-4 got the lock\n12-10-2023 18:08:19 [Thread-3       ] INFO   I Thread-3 got the lock\n12-10-2023 18:08:20 [Thread-7       ] INFO   I Thread-7 got the lock\n12-10-2023 18:08:21 [Thread-8       ] INFO   I Thread-8 got the lock\n12-10-2023 18:08:22 [Thread-10      ] INFO   I Thread-10 got the lock\n12-10-2023 18:08:23 [Thread-6       ] INFO   I Thread-6 got the lock\n</code></pre>\n"},{"tags":["java","wildfly","cdi"],"answers":[{"comments":[{"owner":{"account_id":303781,"reputation":3824,"user_id":612925,"accept_rate":67,"display_name":"tomasz-mer"},"score":0,"creation_date":1697439917,"post_id":77282221,"comment_id":136275245,"body_markdown":"JavaAssist works for me in this case.","body":"JavaAssist works for me in this case."}],"tags":[],"owner":{"account_id":6963528,"reputation":6523,"user_id":5342297,"display_name":"Siliarus"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697126972,"creation_date":1697126972,"answer_id":77282221,"question_id":77281343,"body_markdown":"CDI Extensions (Portable extensions in this case) are meant to operate on CDI-discovered types and beans and add/remove/modify CDI-related data.\r\nFurthermore, (meta)data changed this way are only &quot;visible&quot; to CDI, there are no bytecode changes or anything like that. This means that even if such change goes through, introspecting the original class via Java reflections will not show them.\r\n\r\nIf you are therefore trying to add arbitrary annotation to arbitrary class, CDI is not the right tool and you should instead look into some framework manipulating bytecode such as JavaAssist or ByteBuddy or [other alternatives (older question but still relevant in its listings)][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/9167436/dynamic-java-bytecode-manipulation-framework-comparison","title":"Adding class annotations using CDI","body":"<p>CDI Extensions (Portable extensions in this case) are meant to operate on CDI-discovered types and beans and add/remove/modify CDI-related data.\nFurthermore, (meta)data changed this way are only &quot;visible&quot; to CDI, there are no bytecode changes or anything like that. This means that even if such change goes through, introspecting the original class via Java reflections will not show them.</p>\n<p>If you are therefore trying to add arbitrary annotation to arbitrary class, CDI is not the right tool and you should instead look into some framework manipulating bytecode such as JavaAssist or ByteBuddy or <a href=\"https://stackoverflow.com/questions/9167436/dynamic-java-bytecode-manipulation-framework-comparison\">other alternatives (older question but still relevant in its listings)</a>.</p>\n"}],"owner":{"account_id":303781,"reputation":3824,"user_id":612925,"accept_rate":67,"display_name":"tomasz-mer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77282221,"answer_count":1,"score":0,"last_activity_date":1697126972,"creation_date":1697119750,"question_id":77281343,"body_markdown":"I&#39;m trying to use CDI extension event ProcessAnnotatedType to add a new annatioion to the interface of annotated type. Something like that:\r\n\r\n    &lt; T &gt; void processAnnotatedType( @Observes ProcessAnnotatedType&lt; T &gt; pat)\r\n        {\r\n            AnnotatedType&lt; T &gt; annotatedType = pat.getAnnotatedType();\r\n            Arrays.stream( annotatedType.getJavaClass()\r\n                    .getInterfaces() )\r\n                .forEach( aClass -&gt; {\r\n                    // add annotation to interfaces\r\n                } );\r\n    \r\n        }\r\n\r\nIt is easy to add annotation to provided by AnnotatedType abstraction layer between CDI and actual Java class annotation using builder like here:\r\n\r\n    AnnotatedTypeBuilder&lt; T &gt; builder =\r\n                new AnnotatedTypeBuilder&lt; T &gt;().readFromType( annotatedType );\r\n            builder.addToClass( schema );\r\n\r\nBut how to add such annotation somewhere else? Like to interfaces in my case? I was trying to add using Javaassit but get exception in runtime:\r\n\r\n    2023-10-12T13:25:30.324589648Z Caused by: `org.jboss.weld.exceptions.IllegalArgumentException: WELD-001301: Annotation QualifierInstance {....}} is not a qualifier`\r\n\r\n\r\n\r\n","title":"Adding class annotations using CDI","body":"<p>I'm trying to use CDI extension event ProcessAnnotatedType to add a new annatioion to the interface of annotated type. Something like that:</p>\n<pre><code>&lt; T &gt; void processAnnotatedType( @Observes ProcessAnnotatedType&lt; T &gt; pat)\n    {\n        AnnotatedType&lt; T &gt; annotatedType = pat.getAnnotatedType();\n        Arrays.stream( annotatedType.getJavaClass()\n                .getInterfaces() )\n            .forEach( aClass -&gt; {\n                // add annotation to interfaces\n            } );\n\n    }\n</code></pre>\n<p>It is easy to add annotation to provided by AnnotatedType abstraction layer between CDI and actual Java class annotation using builder like here:</p>\n<pre><code>AnnotatedTypeBuilder&lt; T &gt; builder =\n            new AnnotatedTypeBuilder&lt; T &gt;().readFromType( annotatedType );\n        builder.addToClass( schema );\n</code></pre>\n<p>But how to add such annotation somewhere else? Like to interfaces in my case? I was trying to add using Javaassit but get exception in runtime:</p>\n<pre><code>2023-10-12T13:25:30.324589648Z Caused by: `org.jboss.weld.exceptions.IllegalArgumentException: WELD-001301: Annotation QualifierInstance {....}} is not a qualifier`\n</code></pre>\n"},{"tags":["java","hibernate","jpa","orm","hibernate-mapping"],"comments":[{"owner":{"account_id":668476,"reputation":18892,"user_id":504956,"accept_rate":69,"display_name":"V G"},"score":0,"creation_date":1430832468,"post_id":30053647,"comment_id":48223188,"body_markdown":"Use a @ManyTo*-like relationship: if you have a primary key, then you have a new entity.","body":"Use a @ManyTo*-like relationship: if you have a primary key, then you have a new entity."},{"owner":{"account_id":53085,"reputation":171,"user_id":158685,"accept_rate":100,"display_name":"plcstpierre"},"score":1,"creation_date":1430833222,"post_id":30053647,"comment_id":48223754,"body_markdown":"It is kind of annoying to create a new entity only for a set of int.","body":"It is kind of annoying to create a new entity only for a set of int."}],"answers":[{"comments":[{"owner":{"account_id":53085,"reputation":171,"user_id":158685,"accept_rate":100,"display_name":"plcstpierre"},"score":0,"creation_date":1432130550,"post_id":30069012,"comment_id":48796305,"body_markdown":"Do you have any reference for that ?","body":"Do you have any reference for that ?"},{"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"score":0,"creation_date":1432133037,"post_id":30069012,"comment_id":48798344,"body_markdown":"The article I linked in the answer is a good starting point. Then you have to generate the schema manually to create the PK as Hibernate only supports PK on entities.","body":"The article I linked in the answer is a good starting point. Then you have to generate the schema manually to create the PK as Hibernate only supports PK on entities."},{"owner":{"account_id":53085,"reputation":171,"user_id":158685,"accept_rate":100,"display_name":"plcstpierre"},"score":0,"creation_date":1432145481,"post_id":30069012,"comment_id":48806482,"body_markdown":"Oops. It is not a concern of performance, but with MySQL replication, so I do not think @OrderColumn will save me. My real question was : do you have a reference for the restriction on hibernate?","body":"Oops. It is not a concern of performance, but with MySQL replication, so I do not think @OrderColumn will save me. My real question was : do you have a reference for the restriction on hibernate?"},{"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"score":0,"creation_date":1432146530,"post_id":30069012,"comment_id":48807083,"body_markdown":"I don&#39;t have any other reference for this, just what I sent you.","body":"I don&#39;t have any other reference for this, just what I sent you."},{"owner":{"account_id":11111042,"reputation":56,"user_id":8156816,"display_name":"o_nvk"},"score":0,"creation_date":1639597563,"post_id":30069012,"comment_id":124392306,"body_markdown":"What about usage @org.hibernate.annotations.CollectionId in such case?","body":"What about usage @org.hibernate.annotations.CollectionId in such case?"}],"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":5,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1515159025,"creation_date":1430893244,"answer_id":30069012,"question_id":30053647,"body_markdown":"`@ElementCollection` cannot take a primary key, because an `Embeddable` types cannot have an identifier.\r\n\r\nYou can [add an `@OrderColumn`][1] to optimize the generates SQL statements.\r\n\r\nIf you need a primary key, then you should turn the `@ElementCollection` into a `@OneToMany` association.\r\n\r\n\r\n  [1]: http://vladmihalcea.com/how-to-optimize-hibernate-elementcollection-statements/","title":"How to specify a Primary Key on @ElementCollection","body":"<p><code>@ElementCollection</code> cannot take a primary key, because an <code>Embeddable</code> types cannot have an identifier.</p>\n\n<p>You can <a href=\"http://vladmihalcea.com/how-to-optimize-hibernate-elementcollection-statements/\" rel=\"nofollow noreferrer\">add an <code>@OrderColumn</code></a> to optimize the generates SQL statements.</p>\n\n<p>If you need a primary key, then you should turn the <code>@ElementCollection</code> into a <code>@OneToMany</code> association.</p>\n"},{"comments":[{"owner":{"account_id":2524284,"reputation":819,"user_id":2193939,"accept_rate":75,"display_name":"Manuel M"},"score":1,"creation_date":1479984051,"post_id":33833399,"comment_id":68790970,"body_markdown":"Good simple solution. Worked for me.","body":"Good simple solution. Worked for me."},{"owner":{"account_id":2269221,"reputation":9791,"user_id":1997088,"accept_rate":75,"display_name":"Black"},"score":2,"creation_date":1500315946,"post_id":33833399,"comment_id":77271395,"body_markdown":"Not null has to be set using @Column(nullable = false) and no using @NotNull annotation. @Column(nullable = false) is used for indicating database schema details. See [@NotNull vs @Column(nullable = false)](https://stackoverflow.com/a/7439544/1997088) for more details","body":"Not null has to be set using @Column(nullable = false) and no using @NotNull annotation. @Column(nullable = false) is used for indicating database schema details. See <a href=\"https://stackoverflow.com/a/7439544/1997088\">@NotNull vs @Column(nullable = false)</a> for more details"}],"tags":[],"owner":{"account_id":2241,"reputation":44197,"user_id":3093,"accept_rate":83,"display_name":"Dave L."},"comment_count":2,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1527603798,"creation_date":1448043259,"answer_id":33833399,"question_id":30053647,"body_markdown":"If you use a Set and make the element Column be not null, then hibernate will make a primary key with the join column and element column.\r\n\r\nExample:\r\n\r\n    @Column(name = &quot;STRINGS&quot;, nullable = false)\r\n    @ElementCollection\r\n    private Set&lt;String&gt; strings;","title":"How to specify a Primary Key on @ElementCollection","body":"<p>If you use a Set and make the element Column be not null, then hibernate will make a primary key with the join column and element column.</p>\n\n<p>Example:</p>\n\n<pre><code>@Column(name = \"STRINGS\", nullable = false)\n@ElementCollection\nprivate Set&lt;String&gt; strings;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1853929,"reputation":6195,"user_id":1679903,"accept_rate":88,"display_name":"kinjelom"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626855848,"creation_date":1626855848,"answer_id":68466263,"question_id":30053647,"body_markdown":"Tested on Spring Boot / Data JPA 2.5.2, hibernate-core 5.4.32:\r\n```\r\n@Entity\r\n@Table(name = &quot;user&quot;)\r\n@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\r\n@Data\r\n@NoArgsConstructor\r\npublic class User implements Serializable {\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @ElementCollection(fetch = FetchType.EAGER, targetClass = Role.class)\r\n    @Enumerated(EnumType.STRING)\r\n    @CollectionTable(\r\n        name = &quot;user_role&quot;,\r\n        joinColumns = @JoinColumn(name = &quot;user_id&quot;)\r\n    )\r\n    @Column(name = &quot;role&quot;, nullable = false)\r\n    private Set&lt;Role&gt; roles; // public enum Role {ADMIN,USER}\r\n}\r\n```\r\nproduces MySQL table:\r\n```\r\nCREATE TABLE `user_role` (\r\n  `user_id` bigint(20) NOT NULL,\r\n  `role` varchar(255) COLLATE utf8_unicode_ci NOT NULL,\r\n  PRIMARY KEY (`user_id`,`role`),\r\n  CONSTRAINT `FK_random_id` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)\r\n)\r\n```","title":"How to specify a Primary Key on @ElementCollection","body":"<p>Tested on Spring Boot / Data JPA 2.5.2, hibernate-core 5.4.32:</p>\n<pre><code>@Entity\n@Table(name = &quot;user&quot;)\n@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\n@Data\n@NoArgsConstructor\npublic class User implements Serializable {\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ElementCollection(fetch = FetchType.EAGER, targetClass = Role.class)\n    @Enumerated(EnumType.STRING)\n    @CollectionTable(\n        name = &quot;user_role&quot;,\n        joinColumns = @JoinColumn(name = &quot;user_id&quot;)\n    )\n    @Column(name = &quot;role&quot;, nullable = false)\n    private Set&lt;Role&gt; roles; // public enum Role {ADMIN,USER}\n}\n</code></pre>\n<p>produces MySQL table:</p>\n<pre><code>CREATE TABLE `user_role` (\n  `user_id` bigint(20) NOT NULL,\n  `role` varchar(255) COLLATE utf8_unicode_ci NOT NULL,\n  PRIMARY KEY (`user_id`,`role`),\n  CONSTRAINT `FK_random_id` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)\n)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16482688,"reputation":51,"user_id":11909008,"display_name":"Guram Kankava"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697126310,"creation_date":1697126310,"answer_id":77282142,"question_id":30053647,"body_markdown":"This example is from a book java persistence with spring data and hibernate,\r\ndose not work for a Set, but works for java.util.Collection.Collection or List\r\n\r\n@org.hibernate.annotations.GenericGenerator(name = &quot;sequence_gen&quot;, strategy = &quot;sequence&quot;)\r\n    @org.hibernate.annotations.CollectionId(column = @Column(name = &quot;NAME_ID&quot;), type = @Type( type = &quot;long&quot;), generator = &quot;sequence_gen&quot; )\r\n    @CollectionTable(schema = &quot;&quot;, name = &quot;NAMES&quot;, joinColumns = @JoinColumn(name = &quot;ROOT_ID&quot;))\r\n    @ElementCollection\r\n    private List&lt;String&gt; names = new ArrayList&lt;&gt;();","title":"How to specify a Primary Key on @ElementCollection","body":"<p>This example is from a book java persistence with spring data and hibernate,\ndose not work for a Set, but works for java.util.Collection.Collection or List</p>\n<p>@org.hibernate.annotations.GenericGenerator(name = &quot;sequence_gen&quot;, strategy = &quot;sequence&quot;)\n@org.hibernate.annotations.CollectionId(column = @Column(name = &quot;NAME_ID&quot;), type = @Type( type = &quot;long&quot;), generator = &quot;sequence_gen&quot; )\n@CollectionTable(schema = &quot;&quot;, name = &quot;NAMES&quot;, joinColumns = @JoinColumn(name = &quot;ROOT_ID&quot;))\n@ElementCollection\nprivate List names = new ArrayList&lt;&gt;();</p>\n"}],"owner":{"account_id":53085,"reputation":171,"user_id":158685,"accept_rate":100,"display_name":"plcstpierre"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11713,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":33833399,"answer_count":4,"score":11,"last_activity_date":1697126310,"creation_date":1430830590,"question_id":30053647,"body_markdown":"So, there is that behavior with innodb that can cause problem if some tables lack of primary key.\r\n\r\nSo with Hibernate, I am looking for a key to specifies a primary key on a @ElementCollection table with a Set as the underling data structure.\r\n\r\nI found a way to have a primary key with a map, but it is kind of weird because I do not need a map.\r\n\r\nI also found an answer related to @Embeddable, but I do not need that kind of complexities. I am using a Set&lt;Byte&gt; or Set&lt;Integer&gt; as the data structure in my entities.\r\n\r\nAny idea how to achieve that?","title":"How to specify a Primary Key on @ElementCollection","body":"<p>So, there is that behavior with innodb that can cause problem if some tables lack of primary key.</p>\n\n<p>So with Hibernate, I am looking for a key to specifies a primary key on a @ElementCollection table with a Set as the underling data structure.</p>\n\n<p>I found a way to have a primary key with a map, but it is kind of weird because I do not need a map.</p>\n\n<p>I also found an answer related to @Embeddable, but I do not need that kind of complexities. I am using a Set or Set as the data structure in my entities.</p>\n\n<p>Any idea how to achieve that?</p>\n"},{"tags":["python","java","jython","vtk"],"owner":{"account_id":27307181,"reputation":1,"user_id":20822947,"display_name":"anicet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697126308,"creation_date":1697126308,"question_id":77282141,"body_markdown":"I use jython and I&#39;d like to add the vtk library so that I can run my python code (code that uses vtk modules) on eclipse.\r\n\r\nI installed jypthon and then I typed the command jython -m pip install vtk and I got an error ImportError: No module named _winreg","title":"is it possible to add the vtk library to jython 2.7.3 ?(non-native python libraries)","body":"<p>I use jython and I'd like to add the vtk library so that I can run my python code (code that uses vtk modules) on eclipse.</p>\n<p>I installed jypthon and then I typed the command jython -m pip install vtk and I got an error ImportError: No module named _winreg</p>\n"},{"tags":["java","spring-boot","events","groovy","spock"],"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697126263,"creation_date":1697118084,"question_id":77281134,"body_markdown":"I have a spring boot RestController, which calls a Service, which fires a custom ApplicationEvent.\r\n\r\nWhen testing the service, the test is green - the fired event is correctly recognized.\r\n\r\nHowever, when I&#39;m adding a test that tests both controller and service via the HTTP interface, the test is red - the fired event isn&#39;t recognized. When debugging, I can see that SomeService.foo() *is* called. Then why does the test fail?\r\n\r\nI&#39;m aware that the structure of theses tests might not be ideal. This is a reduced example, the real application already has lots of these &quot;let&#39;s test all the layers together&quot; tests and I kind of have to stick to this structure for now.\r\n\r\nVersions: spring-boot 3.1.4, Spock 2.4-M1-groovy-4.0\r\n\r\nThese are controller, service and event:\r\n```java\r\npackage org.example;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/&quot;)\r\n@AllArgsConstructor\r\npublic class SomeController {\r\n    private final SomeService service;\r\n\r\n    @PostMapping(&quot;/&quot;)\r\n    public void foo() {\r\n        service.foo();\r\n    }\r\n}\r\n```\r\n```java\r\npackage org.example;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport org.springframework.context.ApplicationEventPublisher;\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\n@AllArgsConstructor\r\npublic class SomeService {\r\n    private final ApplicationEventPublisher publisher;\r\n\r\n    public void foo() {\r\n        publisher.publishEvent(new SomeEvent(this));\r\n    }\r\n}\r\n```\r\n```java\r\npackage org.example;\r\n\r\nimport org.springframework.context.ApplicationEvent;\r\n\r\npublic class SomeEvent extends ApplicationEvent {\r\n    public SomeEvent(Object source) {\r\n        super(source);\r\n    }\r\n}\r\n```\r\nAnd these are the spock tests:\r\n```java\r\npackage org.example\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired\r\nimport org.springframework.boot.test.context.SpringBootTest\r\nimport org.springframework.boot.test.web.client.TestRestTemplate\r\nimport org.springframework.boot.test.web.server.LocalServerPort\r\nimport org.springframework.http.HttpStatus\r\nimport org.springframework.http.ResponseEntity\r\nimport org.springframework.test.context.event.ApplicationEvents\r\nimport org.springframework.test.context.event.RecordApplicationEvents\r\nimport spock.lang.Specification\r\n\r\n@RecordApplicationEvents\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\nclass SomeControllerTest extends Specification {\r\n    @Autowired\r\n    ApplicationEvents events;\r\n\r\n    @LocalServerPort\r\n    int port\r\n\r\n    TestRestTemplate restTemplate = new TestRestTemplate()\r\n\r\n    def &quot;calling / fires an event&quot;() {\r\n        given:\r\n        String url = sprintf(&quot;http://localhost:${port}/&quot;)\r\n\r\n        when:\r\n        ResponseEntity&lt;Void&gt; response = restTemplate.postForEntity(url, null, Void.class)\r\n\r\n        then:\r\n        response.statusCode == HttpStatus.OK\r\n\r\n        and:\r\n        events.stream(SomeEvent.class).count() == 1\r\n    }\r\n}\r\n```\r\n```java\r\npackage org.example\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired\r\nimport org.springframework.boot.test.context.SpringBootTest\r\nimport org.springframework.test.context.event.ApplicationEvents\r\nimport org.springframework.test.context.event.RecordApplicationEvents\r\nimport spock.lang.Specification\r\n\r\n@RecordApplicationEvents\r\n@SpringBootTest\r\nclass SomeServiceTest extends Specification {\r\n    @Autowired\r\n    ApplicationEvents events;\r\n\r\n    @Autowired\r\n    SomeService uut;\r\n\r\n    def &quot;some service fires some event&quot;() {\r\n        when:\r\n        uut.foo()\r\n\r\n        then:\r\n        events.stream(SomeEvent.class).count() == 1\r\n    }\r\n}\r\n```\r\nThis is the test failure:\r\n```\r\nCondition not satisfied:\r\n\r\nevents.stream(SomeEvent.class).count() == 1\r\n|      |                |      |       |\r\n|      |                |      0       false\r\n|      |                class org.example.SomeEvent\r\n|      &lt;java.util.stream.ReferencePipeline$3@644e6a8e val$mapper=inaccessible this$0=inaccessible sourceStage=inaccessible previousStage=inaccessible sourceOrOpFlags=inaccessible nextStage=inaccessible depth=inaccessible combinedFlags=inaccessible sourceSpliterator=inaccessible sourceSupplier=inaccessible linkedOrConsumed=inaccessible sourceAnyStateful=inaccessible sourceCloseAction=inaccessible parallel=inaccessible&gt;\r\nCurrent ApplicationEvents\r\n\r\n\tat org.example.SomeControllerTest.calling / fires an event(SomeControllerTest.groovy:35)\r\n```","title":"ApplicationEvents claims my event wasn&#39;t fired, when called via TestRestTemplate","body":"<p>I have a spring boot RestController, which calls a Service, which fires a custom ApplicationEvent.</p>\n<p>When testing the service, the test is green - the fired event is correctly recognized.</p>\n<p>However, when I'm adding a test that tests both controller and service via the HTTP interface, the test is red - the fired event isn't recognized. When debugging, I can see that SomeService.foo() <em>is</em> called. Then why does the test fail?</p>\n<p>I'm aware that the structure of theses tests might not be ideal. This is a reduced example, the real application already has lots of these &quot;let's test all the layers together&quot; tests and I kind of have to stick to this structure for now.</p>\n<p>Versions: spring-boot 3.1.4, Spock 2.4-M1-groovy-4.0</p>\n<p>These are controller, service and event:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport lombok.AllArgsConstructor;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(&quot;/&quot;)\n@AllArgsConstructor\npublic class SomeController {\n    private final SomeService service;\n\n    @PostMapping(&quot;/&quot;)\n    public void foo() {\n        service.foo();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport lombok.AllArgsConstructor;\nimport org.springframework.context.ApplicationEventPublisher;\nimport org.springframework.stereotype.Service;\n\n@Service\n@AllArgsConstructor\npublic class SomeService {\n    private final ApplicationEventPublisher publisher;\n\n    public void foo() {\n        publisher.publishEvent(new SomeEvent(this));\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport org.springframework.context.ApplicationEvent;\n\npublic class SomeEvent extends ApplicationEvent {\n    public SomeEvent(Object source) {\n        super(source);\n    }\n}\n</code></pre>\n<p>And these are the spock tests:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example\n\nimport org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.boot.test.context.SpringBootTest\nimport org.springframework.boot.test.web.client.TestRestTemplate\nimport org.springframework.boot.test.web.server.LocalServerPort\nimport org.springframework.http.HttpStatus\nimport org.springframework.http.ResponseEntity\nimport org.springframework.test.context.event.ApplicationEvents\nimport org.springframework.test.context.event.RecordApplicationEvents\nimport spock.lang.Specification\n\n@RecordApplicationEvents\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\nclass SomeControllerTest extends Specification {\n    @Autowired\n    ApplicationEvents events;\n\n    @LocalServerPort\n    int port\n\n    TestRestTemplate restTemplate = new TestRestTemplate()\n\n    def &quot;calling / fires an event&quot;() {\n        given:\n        String url = sprintf(&quot;http://localhost:${port}/&quot;)\n\n        when:\n        ResponseEntity&lt;Void&gt; response = restTemplate.postForEntity(url, null, Void.class)\n\n        then:\n        response.statusCode == HttpStatus.OK\n\n        and:\n        events.stream(SomeEvent.class).count() == 1\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example\n\nimport org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.boot.test.context.SpringBootTest\nimport org.springframework.test.context.event.ApplicationEvents\nimport org.springframework.test.context.event.RecordApplicationEvents\nimport spock.lang.Specification\n\n@RecordApplicationEvents\n@SpringBootTest\nclass SomeServiceTest extends Specification {\n    @Autowired\n    ApplicationEvents events;\n\n    @Autowired\n    SomeService uut;\n\n    def &quot;some service fires some event&quot;() {\n        when:\n        uut.foo()\n\n        then:\n        events.stream(SomeEvent.class).count() == 1\n    }\n}\n</code></pre>\n<p>This is the test failure:</p>\n<pre><code>Condition not satisfied:\n\nevents.stream(SomeEvent.class).count() == 1\n|      |                |      |       |\n|      |                |      0       false\n|      |                class org.example.SomeEvent\n|      &lt;java.util.stream.ReferencePipeline$3@644e6a8e val$mapper=inaccessible this$0=inaccessible sourceStage=inaccessible previousStage=inaccessible sourceOrOpFlags=inaccessible nextStage=inaccessible depth=inaccessible combinedFlags=inaccessible sourceSpliterator=inaccessible sourceSupplier=inaccessible linkedOrConsumed=inaccessible sourceAnyStateful=inaccessible sourceCloseAction=inaccessible parallel=inaccessible&gt;\nCurrent ApplicationEvents\n\n    at org.example.SomeControllerTest.calling / fires an event(SomeControllerTest.groovy:35)\n</code></pre>\n"},{"tags":["java","data-binding","record"],"answers":[{"tags":[],"owner":{"account_id":442668,"reputation":1431,"user_id":833399,"accept_rate":75,"display_name":"Knight Industries"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697126007,"creation_date":1697107529,"answer_id":77279899,"question_id":77279898,"body_markdown":"Although I couldn&#39;t find a common library that could do this in a one-liner, there is a way to configure `BeanUtils` to achieve this with the help of [jackson-databind](https://github.com/FasterXML/jackson-databind):\r\n\r\n```java\r\n//add support for Java records to Apache BeanUtils\r\nvar utils = BeanUtilsBean.getInstance().getPropertyUtils();\r\nutils.addBeanIntrospector(context -&gt; {\r\n  var clazz = context.getTargetClass();\r\n  var recordFieldNames = JDK14Util.getRecordFieldNames(clazz); //helper method from jackson-databind\r\n  if (recordFieldNames == null) {\r\n    return;\r\n  }\r\n  for (String name : recordFieldNames) {\r\n    try {\r\n      var getter = clazz.getDeclaredMethod(name);\r\n      context.addPropertyDescriptor(new PropertyDescriptor(name, getter, null));\r\n    } catch (NoSuchMethodException ignored) {\r\n      //accessor method of record field not found (should not happen)\r\n    }\r\n  }\r\n});\r\n\r\nvar p = new Person(new Address(&quot;Malgudi&quot;));\r\n\r\nutils.getNestedProperty(p, &quot;address.city&quot;); // ✅ Malgudi","title":"Extract nested record fields using reflection","body":"<p>Although I couldn't find a common library that could do this in a one-liner, there is a way to configure <code>BeanUtils</code> to achieve this with the help of <a href=\"https://github.com/FasterXML/jackson-databind\" rel=\"nofollow noreferrer\">jackson-databind</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//add support for Java records to Apache BeanUtils\nvar utils = BeanUtilsBean.getInstance().getPropertyUtils();\nutils.addBeanIntrospector(context -&gt; {\n  var clazz = context.getTargetClass();\n  var recordFieldNames = JDK14Util.getRecordFieldNames(clazz); //helper method from jackson-databind\n  if (recordFieldNames == null) {\n    return;\n  }\n  for (String name : recordFieldNames) {\n    try {\n      var getter = clazz.getDeclaredMethod(name);\n      context.addPropertyDescriptor(new PropertyDescriptor(name, getter, null));\n    } catch (NoSuchMethodException ignored) {\n      //accessor method of record field not found (should not happen)\n    }\n  }\n});\n\nvar p = new Person(new Address(&quot;Malgudi&quot;));\n\nutils.getNestedProperty(p, &quot;address.city&quot;); // ✅ Malgudi\n</code></pre>\n"}],"owner":{"account_id":442668,"reputation":1431,"user_id":833399,"accept_rate":75,"display_name":"Knight Industries"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697126007,"creation_date":1697107529,"question_id":77279898,"body_markdown":"[commons-beanutils](https://commons.apache.org/proper/commons-beanutils/) can retrieve nested values from beans:\r\n\r\n```java\r\npublic class Person {\r\n  Address address;\r\n  public Address getAddress() { return address; }\r\n}\r\npublic class Address {\r\n  String city;\r\n  public String getCity() { return city; }\r\n}\r\n\r\nvar p = new Person();\r\np.address = new Address();\r\np.address.city = &quot;Malgudi&quot;;\r\n\r\nBeanUtils.getNestedProperty(p, &quot;address.city&quot;); // ✅ Malgudi\r\n```\r\n\r\nHow can this be achieved in a similarly compact way when the data types are records?\r\n\r\n`BeanUtils` apparently does not support records:\r\n\r\n```java\r\npublic record Person(Address address) {}\r\npublic record Address(String city) {}\r\n\r\nvar p = new Person(new Address(&quot;Malgudi&quot;));\r\n\r\nBeanUtils.getNestedProperty(p, &quot;address.city&quot;); // ❌ Unknown property &#39;address&#39;\r\n```","title":"Extract nested record fields using reflection","body":"<p><a href=\"https://commons.apache.org/proper/commons-beanutils/\" rel=\"nofollow noreferrer\">commons-beanutils</a> can retrieve nested values from beans:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Person {\n  Address address;\n  public Address getAddress() { return address; }\n}\npublic class Address {\n  String city;\n  public String getCity() { return city; }\n}\n\nvar p = new Person();\np.address = new Address();\np.address.city = &quot;Malgudi&quot;;\n\nBeanUtils.getNestedProperty(p, &quot;address.city&quot;); // ✅ Malgudi\n</code></pre>\n<p>How can this be achieved in a similarly compact way when the data types are records?</p>\n<p><code>BeanUtils</code> apparently does not support records:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record Person(Address address) {}\npublic record Address(String city) {}\n\nvar p = new Person(new Address(&quot;Malgudi&quot;));\n\nBeanUtils.getNestedProperty(p, &quot;address.city&quot;); // ❌ Unknown property 'address'\n</code></pre>\n"},{"tags":["java","android","performance"],"answers":[{"tags":[],"owner":{"account_id":28245335,"reputation":23,"user_id":21592481,"display_name":"Speedy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697125613,"creation_date":1682111402,"answer_id":76076722,"question_id":51956641,"body_markdown":"I believe you can create a white drawable, then use a tint color on top of that.","title":"Performances - Better change the color of drawable or change drawable?","body":"<p>I believe you can create a white drawable, then use a tint color on top of that.</p>\n"}],"owner":{"account_id":7023701,"reputation":85,"user_id":5381986,"display_name":"Leonardo Emili"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1697125613,"creation_date":1534885207,"question_id":51956641,"body_markdown":"I got a big list of elements to display. In each row I got some text in a TextView and an ImageView with a drawable set as background. Since I need to change the drawable (same shape but in a different color) for a lot of them and for other I want to keep the default drawable what I&#39;m wondering is: in order to perform it the most efficient as possible this what&#39;s the best way to do it?\r\n\r\nThanks in advance.","title":"Performances - Better change the color of drawable or change drawable?","body":"<p>I got a big list of elements to display. In each row I got some text in a TextView and an ImageView with a drawable set as background. Since I need to change the drawable (same shape but in a different color) for a lot of them and for other I want to keep the default drawable what I'm wondering is: in order to perform it the most efficient as possible this what's the best way to do it?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","swing","awt"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1697105203,"post_id":77279626,"comment_id":136238896,"body_markdown":"the first step would be to actually add a button","body":"the first step would be to actually add a button"},{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":0,"creation_date":1697105932,"post_id":77279626,"comment_id":136239007,"body_markdown":"Use an appropriate `LayoutManager` in a panel to place objects inside it. Default is `FlowLayout` which is very basic.","body":"Use an appropriate <code>LayoutManager</code> in a panel to place objects inside it. Default is <code>FlowLayout</code> which is very basic."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1697106815,"post_id":77279626,"comment_id":136239168,"body_markdown":"There a number of ways you might do this, one of the better ways would be make a custom component capable of painting an image into itself, independent of any other components, for [example](https://stackoverflow.com/questions/22162398/how-to-set-a-background-picture-in-jpanel/22162430#22162430)","body":"There a number of ways you might do this, one of the better ways would be make a custom component capable of painting an image into itself, independent of any other components, for <a href=\"https://stackoverflow.com/questions/22162398/how-to-set-a-background-picture-in-jpanel/22162430#22162430\">example</a>"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1697106911,"post_id":77279626,"comment_id":136239187,"body_markdown":"If you&#39;re really interested in doing these kind of things, I might suggest taking a closer look at JavaFX instead","body":"If you&#39;re really interested in doing these kind of things, I might suggest taking a closer look at JavaFX instead"},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1697112731,"post_id":77279626,"comment_id":136240318,"body_markdown":"You might want to read this [Connect 4 explanation](https://github.com/ggleblanc2/connect-four#readme) to see all of the steps involved in creating a game.","body":"You might want to read this <a href=\"https://github.com/ggleblanc2/connect-four#readme\" rel=\"nofollow noreferrer\">Connect 4 explanation</a> to see all of the steps involved in creating a game."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1697119266,"post_id":77279626,"comment_id":136241829,"body_markdown":"1) use a GridBagLayout on your background panel. 2) add the button to the background panel. By default the GridBagLayout will center the button.","body":"1) use a GridBagLayout on your background panel. 2) add the button to the background panel. By default the GridBagLayout will center the button."}],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697125315,"creation_date":1697125315,"answer_id":77282048,"question_id":77279626,"body_markdown":"You are on the right track by having a JLayeredPane field.  But your code currently isn’t using it.\r\n\r\nYou’ll want to give that JLayeredPane an [OverlayLayout](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/javax/swing/OverlayLayout.html).  Most other layouts don’t define their behavior when components overlap each other.\r\n\r\nPlace both the background component and the button in that JLayeredPane, then add only the JLayeredPane to your frame:\r\n\r\n    backgroundPanel.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n    backgroundPanel.setAlignmentY(Component.CENTER_ALIGNMENT);\r\n    play.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n    play.setAlignmentY(Component.CENTER_ALIGNMENT);\r\n\r\n    buttonPanel = new JLayeredPane();\r\n    buttonPanel.setLayout(new OverlayLayout(buttonPanel));\r\n\r\n    buttonPanel.setLayer(backgroundPanel, JLayeredPane.DEFAULT_LAYER);\r\n    buttonPanel.setLayer(play, JLayeredPane.PALETTE_LAYER);\r\n\r\n    buttonPanel.add(backgroundPanel);\r\n    buttonPanel.add(play);\r\n\r\n    // ...\r\n\r\n    frame.getContentPane().add(buttonPanel);\r\n","title":"Creating a game interface with java Swing/AWT","body":"<p>You are on the right track by having a JLayeredPane field.  But your code currently isn’t using it.</p>\n<p>You’ll want to give that JLayeredPane an <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/javax/swing/OverlayLayout.html\" rel=\"nofollow noreferrer\">OverlayLayout</a>.  Most other layouts don’t define their behavior when components overlap each other.</p>\n<p>Place both the background component and the button in that JLayeredPane, then add only the JLayeredPane to your frame:</p>\n<pre><code>backgroundPanel.setAlignmentX(Component.CENTER_ALIGNMENT);\nbackgroundPanel.setAlignmentY(Component.CENTER_ALIGNMENT);\nplay.setAlignmentX(Component.CENTER_ALIGNMENT);\nplay.setAlignmentY(Component.CENTER_ALIGNMENT);\n\nbuttonPanel = new JLayeredPane();\nbuttonPanel.setLayout(new OverlayLayout(buttonPanel));\n\nbuttonPanel.setLayer(backgroundPanel, JLayeredPane.DEFAULT_LAYER);\nbuttonPanel.setLayer(play, JLayeredPane.PALETTE_LAYER);\n\nbuttonPanel.add(backgroundPanel);\nbuttonPanel.add(play);\n\n// ...\n\nframe.getContentPane().add(buttonPanel);\n</code></pre>\n"}],"owner":{"account_id":19534654,"reputation":41,"user_id":20582754,"display_name":"Asterix"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697125315,"creation_date":1697105041,"question_id":77279626,"body_markdown":"I started coding a few weeks ago and I am currently trying to create a Java GUI for a game using Swing and AWT. I have created the code below. \r\n\r\n    public class UI {\r\n        JFrame frame = new JFrame();\r\n        JPanel backgroundPanel;\r\n        JLayeredPane buttonPanel;\r\n        JButton play = new JButton(&quot;Play!&quot;);\r\n        JLabel background;\r\n    \r\n        public UI() {\r\n\r\n            backgroundPanel = new JPanel(new BorderLayout());\r\n            ImageIcon imgBackground = new ImageIcon(this.getClass().getResource(&quot;/img/connect4_4.png&quot;));\r\n            background = new JLabel(&quot;&quot;, imgBackground, JLabel.CENTER);\r\n            backgroundPanel.add(background, BorderLayout.CENTER);\r\n            backgroundPanel.add(play, BorderLayout.NORTH);\r\n            frame.add(backgroundPanel);\r\n    \r\n            frame.setTitle(&quot;Connect 4&quot;);\r\n            frame.setSize(450, 450);\r\n            frame.setVisible(true);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        }\r\n    \r\n     \r\n    }\r\n\r\nWith this code I create a panel with a background image and a play button at the top of the screen. However, what I would like to do is center the play button to the center of the image, and that it doesn&#39;t take the full screen size but just a fix size (perhaps 50x50 pixels). How can I do this?\r\n\r\n","title":"Creating a game interface with java Swing/AWT","body":"<p>I started coding a few weeks ago and I am currently trying to create a Java GUI for a game using Swing and AWT. I have created the code below.</p>\n<pre><code>public class UI {\n    JFrame frame = new JFrame();\n    JPanel backgroundPanel;\n    JLayeredPane buttonPanel;\n    JButton play = new JButton(&quot;Play!&quot;);\n    JLabel background;\n\n    public UI() {\n\n        backgroundPanel = new JPanel(new BorderLayout());\n        ImageIcon imgBackground = new ImageIcon(this.getClass().getResource(&quot;/img/connect4_4.png&quot;));\n        background = new JLabel(&quot;&quot;, imgBackground, JLabel.CENTER);\n        backgroundPanel.add(background, BorderLayout.CENTER);\n        backgroundPanel.add(play, BorderLayout.NORTH);\n        frame.add(backgroundPanel);\n\n        frame.setTitle(&quot;Connect 4&quot;);\n        frame.setSize(450, 450);\n        frame.setVisible(true);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }\n\n \n}\n</code></pre>\n<p>With this code I create a panel with a background image and a play button at the top of the screen. However, what I would like to do is center the play button to the center of the image, and that it doesn't take the full screen size but just a fix size (perhaps 50x50 pixels). How can I do this?</p>\n"},{"tags":["java","c","jna"],"comments":[{"owner":{"account_id":1257651,"reputation":12773,"user_id":1216776,"display_name":"stark"},"score":0,"creation_date":1697031011,"post_id":77273445,"comment_id":136228231,"body_markdown":"`prev_size (next_chunk (p)))` possibly error in linked list. How do you know next_chunk is valid?","body":"<code>prev_size (next_chunk (p)))</code> possibly error in linked list. How do you know next_chunk is valid?"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1697035276,"post_id":77273445,"comment_id":136229235,"body_markdown":"Do you have a complete stacktrace before the libc.so call? Please provide a [minimal reproducible example](http://stackoverflow.com/help/minimal-reproducible-example).","body":"Do you have a complete stacktrace before the libc.so call? Please provide a <a href=\"http://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":33772,"reputation":484,"user_id":94841,"accept_rate":67,"display_name":"al."},"score":0,"creation_date":1697103520,"post_id":77273445,"comment_id":136238551,"body_markdown":"@aled I don&#39;t get a stacktrace from Java at all. and the backtrace that I got from gdb goes back to jvm, and not to my code. I&#39;ve updated my post with a minimal example, unfortunately, I don&#39;t get the problem with the example.","body":"@aled I don&#39;t get a stacktrace from Java at all. and the backtrace that I got from gdb goes back to jvm, and not to my code. I&#39;ve updated my post with a minimal example, unfortunately, I don&#39;t get the problem with the example."},{"owner":{"account_id":33772,"reputation":484,"user_id":94841,"accept_rate":67,"display_name":"al."},"score":0,"creation_date":1697103642,"post_id":77273445,"comment_id":136238577,"body_markdown":"@stark I don&#39;t have a linked list in my code and I&#39;m not sure if next_chunk is valid. I guess p points to some invalid memory.","body":"@stark I don&#39;t have a linked list in my code and I&#39;m not sure if next_chunk is valid. I guess p points to some invalid memory."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1697113098,"post_id":77273445,"comment_id":136240391,"body_markdown":"@al. I mean from the native stacktrace you got a single for libc.so. When the JVM can it generates a full native/Java stacktrace. Did you got an hs_err_PID.log file with more details?","body":"@al. I mean from the native stacktrace you got a single for libc.so. When the JVM can it generates a full native/Java stacktrace. Did you got an hs_err_PID.log file with more details?"},{"owner":{"account_id":33772,"reputation":484,"user_id":94841,"accept_rate":67,"display_name":"al."},"score":0,"creation_date":1697116197,"post_id":77273445,"comment_id":136241097,"body_markdown":"no, no stacktrace in the logs. the snippet is all I got from the logs.","body":"no, no stacktrace in the logs. the snippet is all I got from the logs."}],"answers":[{"comments":[{"owner":{"account_id":33772,"reputation":484,"user_id":94841,"accept_rate":67,"display_name":"al."},"score":0,"creation_date":1697104105,"post_id":77275066,"comment_id":136238684,"body_markdown":"Thanks for your help. I&#39;ve gone through my implementation, and I don&#39;t do any memory allocation from either side. I also created a simple example (posted in my original question), to check if the mapping works, and I had n problem at all. Everything is passed by value, and the array that I pass to C is a fixed size array.\n\nI also suspect something with the garbage collect, since the original issue doesn&#39;t occur when I run the test separately. What do you mean by &quot;strong reference&quot;?","body":"Thanks for your help. I&#39;ve gone through my implementation, and I don&#39;t do any memory allocation from either side. I also created a simple example (posted in my original question), to check if the mapping works, and I had n problem at all. Everything is passed by value, and the array that I pass to C is a fixed size array.  I also suspect something with the garbage collect, since the original issue doesn&#39;t occur when I run the test separately. What do you mean by &quot;strong reference&quot;?"},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":1,"creation_date":1697122709,"post_id":77275066,"comment_id":136242724,"body_markdown":"The JNA memory allocation backs the `Structure` as I indicated.  Since you allocated the wrong amount and passed it to native, and native expected more bytes, I expect this is the point where undefined behavior started.  As for a &quot;strong reference&quot; that means making sure the Java object is referenced after the Native call is done with it, or using a `ReachabilityFence`.","body":"The JNA memory allocation backs the <code>Structure</code> as I indicated.  Since you allocated the wrong amount and passed it to native, and native expected more bytes, I expect this is the point where undefined behavior started.  As for a &quot;strong reference&quot; that means making sure the Java object is referenced after the Native call is done with it, or using a <code>ReachabilityFence</code>."},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1697124426,"post_id":77275066,"comment_id":136243172,"body_markdown":"@al. the problem is this assignment: `eContainer.setTwoExamples(exampleList.toArray(ExampleStruct[]::new))`.  When you declared the `ExampleStructsContainer` it internally allocated contiguous memory for the two `ExampleStruct` objects.  However, when you created the new objects individually in a list, they had their own memory allocation that was not the same as the structure&#39;s.  You should use the `Structure.toArray()` method to allocate contiguous memory for an array of structures. Or you could just declare two individual structures inside the container without using an array.","body":"@al. the problem is this assignment: <code>eContainer.setTwoExamples(exampleList.toArray(ExampleStruct[&zwnj;&#8203;]::new))</code>.  When you declared the <code>ExampleStructsContainer</code> it internally allocated contiguous memory for the two <code>ExampleStruct</code> objects.  However, when you created the new objects individually in a list, they had their own memory allocation that was not the same as the structure&#39;s.  You should use the <code>Structure.toArray()</code> method to allocate contiguous memory for an array of structures. Or you could just declare two individual structures inside the container without using an array."},{"owner":{"account_id":33772,"reputation":484,"user_id":94841,"accept_rate":67,"display_name":"al."},"score":0,"creation_date":1697186931,"post_id":77275066,"comment_id":136250986,"body_markdown":"let me just see if I understand correctly:\n\nThe line in ExampleStructsContainer:\n   `public ExampleStruct[] twoExamples = new ExampleStruct[2];`\nallocates contiguous memory.\n\nif that is the case I don&#39;t understand why I get `java.lang.IndexOutOfBoundsException: Bounds exceeds available space : size=16, offset=32` when I create a contiguous array in the test method, fill it with constant values and pass it to the member&#39;s setter. Is this because I need to copy the memory of the newly created contiguous array to the one in the ExampleStructsContainer class?","body":"let me just see if I understand correctly:  The line in ExampleStructsContainer:    <code>public ExampleStruct[] twoExamples = new ExampleStruct[2];</code> allocates contiguous memory.  if that is the case I don&#39;t understand why I get <code>java.lang.IndexOutOfBoundsException: Bounds exceeds available space : size=16, offset=32</code> when I create a contiguous array in the test method, fill it with constant values and pass it to the member&#39;s setter. Is this because I need to copy the memory of the newly created contiguous array to the one in the ExampleStructsContainer class?"},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1697231184,"post_id":77275066,"comment_id":136258931,"body_markdown":"@al. `new ExampleStruct[2];` doesn&#39;t allocate anything by itself, it&#39;s an array of (typed) null... but when the containing structure is instantiated with `new ExampleStructsContainer()`, JNA calculates the memory requirements for a `double` and two `ExampleStruct` objects and allocates that. Each of those has two `int`s and a `double` for 16 bytes, so `ExampleStructsContainer` is now backed by a native 8 + 16 + 16 = 40 byte `Memory` buffer.  However, when you instantiate the inner structs separately with `new ExampleStruct()` they each have their own 16 byte allocations elsewhere in memory...","body":"@al. <code>new ExampleStruct[2];</code> doesn&#39;t allocate anything by itself, it&#39;s an array of (typed) null... but when the containing structure is instantiated with <code>new ExampleStructsContainer()</code>, JNA calculates the memory requirements for a <code>double</code> and two <code>ExampleStruct</code> objects and allocates that. Each of those has two <code>int</code>s and a <code>double</code> for 16 bytes, so <code>ExampleStructsContainer</code> is now backed by a native 8 + 16 + 16 = 40 byte <code>Memory</code> buffer.  However, when you instantiate the inner structs separately with <code>new ExampleStruct()</code> they each have their own 16 byte allocations elsewhere in memory..."},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1697232377,"post_id":77275066,"comment_id":136259061,"body_markdown":"@al. So you should allocate the structure array contiguously using `toArray()`. See [this answer](https://stackoverflow.com/a/63781502/1161484) for an example.  `ExampleStruct[] twoExamples = (ExampleStruct[]) new ExampleStruct().toArray(2);`","body":"@al. So you should allocate the structure array contiguously using <code>toArray()</code>. See <a href=\"https://stackoverflow.com/a/63781502/1161484\">this answer</a> for an example.  <code>ExampleStruct[] twoExamples = (ExampleStruct[]) new ExampleStruct().toArray(2);</code>"}],"tags":[],"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697125220,"creation_date":1697044114,"answer_id":77275066,"question_id":77273445,"body_markdown":"Without seeing your Java implementation it&#39;s difficult to precisely identify the cause, but the error from the native side makes it clear you&#39;re dealing with native memory that you do not own:\r\n```\r\nThread 2 &quot;Test worker&quot; received signal SIGSEGV, Segmentation fault.\r\n0x00007fe3948420ef in unlink_chunk (p=p@entry=0x7fe38caedbe0, av=0x7fe38c000030) at malloc.c:1604\r\n1604      if (chunksize (p) != prev_size (next_chunk (p)))                                                                                                                                                                    \r\n```\r\nThat points to this code:\r\n```c\r\n* Take a chunk off a bin list.  */\r\nstatic void\r\nunlink_chunk (mstate av, mchunkptr p)\r\n{\r\n  if (chunksize (p) != prev_size (next_chunk (p)))\r\n    malloc_printerr (&quot;corrupted size vs. prev_size&quot;);\r\n```\r\nThose macros eventually call `(p)-&gt;mchunk_size` and `(p)-&gt;mchunk_prev_size`; but it&#39;s likely that the Java process does not own the memory associated with `p`, thus the crash.  Possibly you&#39;ve already freed it, or possibly `p` came from some group of bytes it wasn&#39;t supposed to.\r\n\r\nDebugging this requires following the Java/JNA-side and native-side allocation of the memory associated with the native function calls.  If you allocate on the Java side, you have to free on the Java side; if you allocate on the native side, you use the appropriate native API to free that allocation.  You may be doing both.\r\n\r\nA common issue with JNA is that the object containing the memory allocation may be come unreachable at some point, and eligible for garbage collection; the native memory is freed as part of that process.  Make sure you retain a strong reference to any Java objects associated with that memory allocation (`Structure` or `Memory`, etc.). \r\n\r\nAnother potential candidate is stack corruption where you&#39;re sending a pointer address from a set of bytes you didn&#39;t mean to; this can occur with incorrect type mappings in your native function calls.  This could be the culprit here where the call freeing the memory works on its own, but running other tests with it may corrupt the stack.\r\n\r\nWith your updated code, another potential problem is the Structure array.  When you instantiated the `ExampleStructsContainer` object, it had a native memory allocation for the structure array which was contiguous.  However, you instantiated the individual array elements separately yourself, so the Java-side objects did not have the same native memory as the structure.  Combined with the missing fields you indicated in your self-answer, this could also have been a contributing factor.\r\n\r\n","title":"What possible reasons could there be for a JVM crash in an application with JNA?","body":"<p>Without seeing your Java implementation it's difficult to precisely identify the cause, but the error from the native side makes it clear you're dealing with native memory that you do not own:</p>\n<pre><code>Thread 2 &quot;Test worker&quot; received signal SIGSEGV, Segmentation fault.\n0x00007fe3948420ef in unlink_chunk (p=p@entry=0x7fe38caedbe0, av=0x7fe38c000030) at malloc.c:1604\n1604      if (chunksize (p) != prev_size (next_chunk (p)))                                                                                                                                                                    \n</code></pre>\n<p>That points to this code:</p>\n<pre class=\"lang-c prettyprint-override\"><code>* Take a chunk off a bin list.  */\nstatic void\nunlink_chunk (mstate av, mchunkptr p)\n{\n  if (chunksize (p) != prev_size (next_chunk (p)))\n    malloc_printerr (&quot;corrupted size vs. prev_size&quot;);\n</code></pre>\n<p>Those macros eventually call <code>(p)-&gt;mchunk_size</code> and <code>(p)-&gt;mchunk_prev_size</code>; but it's likely that the Java process does not own the memory associated with <code>p</code>, thus the crash.  Possibly you've already freed it, or possibly <code>p</code> came from some group of bytes it wasn't supposed to.</p>\n<p>Debugging this requires following the Java/JNA-side and native-side allocation of the memory associated with the native function calls.  If you allocate on the Java side, you have to free on the Java side; if you allocate on the native side, you use the appropriate native API to free that allocation.  You may be doing both.</p>\n<p>A common issue with JNA is that the object containing the memory allocation may be come unreachable at some point, and eligible for garbage collection; the native memory is freed as part of that process.  Make sure you retain a strong reference to any Java objects associated with that memory allocation (<code>Structure</code> or <code>Memory</code>, etc.).</p>\n<p>Another potential candidate is stack corruption where you're sending a pointer address from a set of bytes you didn't mean to; this can occur with incorrect type mappings in your native function calls.  This could be the culprit here where the call freeing the memory works on its own, but running other tests with it may corrupt the stack.</p>\n<p>With your updated code, another potential problem is the Structure array.  When you instantiated the <code>ExampleStructsContainer</code> object, it had a native memory allocation for the structure array which was contiguous.  However, you instantiated the individual array elements separately yourself, so the Java-side objects did not have the same native memory as the structure.  Combined with the missing fields you indicated in your self-answer, this could also have been a contributing factor.</p>\n"},{"comments":[{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1697125412,"post_id":77280929,"comment_id":136243370,"body_markdown":"Yes, you declared the temporary `r` variable on the native side and then sent it (or a pointer to it, technically) to Java without a persistent native allocation.  So any later reference to any element of the Structure on the Java side was touching native memory that wasn&#39;t allocated.  The standard pattern for results like this is to declare the Result structure on the Java side and pass it as an argument; the native side can then fill the values in it.  Please see my other comment/answer about your structure array allocation as well.","body":"Yes, you declared the temporary <code>r</code> variable on the native side and then sent it (or a pointer to it, technically) to Java without a persistent native allocation.  So any later reference to any element of the Structure on the Java side was touching native memory that wasn&#39;t allocated.  The standard pattern for results like this is to declare the Result structure on the Java side and pass it as an argument; the native side can then fill the values in it.  Please see my other comment/answer about your structure array allocation as well."},{"owner":{"account_id":33772,"reputation":484,"user_id":94841,"accept_rate":67,"display_name":"al."},"score":0,"creation_date":1697187115,"post_id":77280929,"comment_id":136251016,"body_markdown":"`So any later reference to any element of the Structure on the Java side was touching native memory that wasn&#39;t allocated.` \n\nOutside of the Java method where I&#39;m calling the native method or also inside it? \n\nBecause atm I don&#39;t get any problems, when I use the Result object directly in the method, where I&#39;m calling the native method. I&#39;m aware that this doesn&#39;t mean that my implementation is correct from a memory pov.","body":"<code>So any later reference to any element of the Structure on the Java side was touching native memory that wasn&#39;t allocated.</code>   Outside of the Java method where I&#39;m calling the native method or also inside it?   Because atm I don&#39;t get any problems, when I use the Result object directly in the method, where I&#39;m calling the native method. I&#39;m aware that this doesn&#39;t mean that my implementation is correct from a memory pov."},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1697232506,"post_id":77280929,"comment_id":136259076,"body_markdown":"It&#39;s a bit hard to follow where the problem actually is or isn&#39;t using your sample code (which works).  I&#39;m making assumptions that the real code may not be as simple or have such convenient assignments (I think your `ManyStructures` individual assignment may actually &quot;fix&quot; the earlier problem when it gets created but I suspect it&#39;s not actually defined as two single element structures....)","body":"It&#39;s a bit hard to follow where the problem actually is or isn&#39;t using your sample code (which works).  I&#39;m making assumptions that the real code may not be as simple or have such convenient assignments (I think your <code>ManyStructures</code> individual assignment may actually &quot;fix&quot; the earlier problem when it gets created but I suspect it&#39;s not actually defined as two single element structures....)"}],"tags":[],"owner":{"account_id":33772,"reputation":484,"user_id":94841,"accept_rate":67,"display_name":"al."},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697116440,"creation_date":1697116440,"answer_id":77280929,"question_id":77273445,"body_markdown":"I was able to overcome the issue, found some missing fields in the result struct mapping. These fields however were initialized in the C code. My explanation is that the memory for these fields could not be freed, or reallocated because it wasn&#39;t owned by JNA.","title":"What possible reasons could there be for a JVM crash in an application with JNA?","body":"<p>I was able to overcome the issue, found some missing fields in the result struct mapping. These fields however were initialized in the C code. My explanation is that the memory for these fields could not be freed, or reallocated because it wasn't owned by JNA.</p>\n"}],"owner":{"account_id":33772,"reputation":484,"user_id":94841,"accept_rate":67,"display_name":"al."},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697125220,"creation_date":1697030494,"question_id":77273445,"body_markdown":"I&#39;m looking for possible reasons for a strange issue with JNA. I have a Java application which uses bunch of shared libraries, all self made, programmed by me and my colleague. We are using JNA 5.x to expose the C functions from the SOs to java. (Java 11.20 on Linux). We use Gradle 7.4 to build the Java code, the C code is compiled into SOs with cmake. \r\n\r\nThe issue is that JVM crashes, when I build the project with Gradle and execute all the tests in sequence. This started to happen, after I&#39;ve included a unit test that tests a function from one of the libraries. I get the following error:\r\n\r\n```none\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  SIGSEGV (0xb) at pc=0x00007fa08abac0ef, pid=129694, tid=129697\r\n#\r\n# JRE version: OpenJDK Runtime Environment (Red_Hat-11.0.20.0.8-1.fc38) (11.0.20+8) (build 11.0.20+8)\r\n# Java VM: OpenJDK 64-Bit Server VM (Red_Hat-11.0.20.0.8-1.fc38) (11.0.20+8, mixed mode, sharing, tiered, compressed oops, g1 gc, linux-amd64)\r\n# Problematic frame:\r\n# C  [libc.so.6+0x990ef]\r\n```\r\n\r\nSo it must be something within this library or the way I call that particular function from it. What makes the issue hard for me is that when I execute just the one unit test, it is green. No JVM problem, and the results come out as expected.\r\n\r\nGDB gives me no real clues either, or at least I can&#39;t interpret them. When I debug the gradle process, I can see that the function call was successful in the sense that there are correct results in the return value, but after the return of the function is executed I get a problem in libc.\r\n\r\n```none\r\nThread 2 &quot;Test worker&quot; received signal SIGSEGV, Segmentation fault.\r\n0x00007fe3948420ef in unlink_chunk (p=p@entry=0x7fe38caedbe0, av=0x7fe38c000030) at malloc.c:1604\r\n1604      if (chunksize (p) != prev_size (next_chunk (p)))                                                                                                                                                                    \r\n(gdb) c\r\nContinuing.\r\n\r\nThread 2 &quot;Test worker&quot; received signal SIGILL, Illegal instruction.\r\nfutex_wait (private=0, expected=2, futex_word=0x7fe38c000030) at ../sysdeps/nptl/futex-internal.h:146\r\nDownloading source file /usr/src/debug/glibc-2.37-10.fc38.x86_64/nptl/../sysdeps/nptl/futex-internal.h\r\n146       int err = lll_futex_timed_wait (futex_word, expected, NULL, private);                                                                                                                                               \r\n(gdb) n\r\n0x00007fe394317d10 in crash_handler(int, siginfo_t*, void*) () from /usr/lib/jvm/java-11-openjdk-11.0.20.0.8-1.fc38.x86_64/lib/server/libjvm.so\r\n(gdb) n\r\nSingle stepping until exit from function _ZL13crash_handleriP9siginfo_tPv,\r\nwhich has no line number information.\r\n\r\nThread 20 &quot;VM Periodic Tas&quot; received signal SIGABRT, Aborted.\r\n[Switching to Thread 0x7fe365fff6c0 (LWP 131363)]\r\n__pthread_kill_implementation (threadid=&lt;optimized out&gt;, signo=signo@entry=6, no_tid=no_tid@entry=0) at pthread_kill.c:44\r\n44            return INTERNAL_SYSCALL_ERROR_P (ret) ? INTERNAL_SYSCALL_ERRNO (ret) : 0;                                                                                                                                       \r\n(gdb) n\r\nCouldn&#39;t get registers: No such process.\r\n(gdb) [Thread 0x7fe36476d6c0 (LWP 131400) exited]\r\n```\r\n\r\nAny ideas where to look and how to proceed in order to find what the reason for the issue is are much appreciated.\r\n\r\n\r\nUPDATE: I&#39;ve created a simple example based on my real structures and I don&#39;t have the issue.  Here&#39;s the example:\r\n\r\nC code:\r\n\r\n    enum ENUM_TYPE {\r\n        SIMPLE, COMPLEX\r\n    };\r\n    \r\n    typedef struct {\r\n        enum ENUM_TYPE ttype;\r\n        int justANumber;\r\n        double justADouble;\r\n    } exampleStruct;\r\n    \r\n    typedef struct {\r\n        double funnyDouble;\r\n        exampleStruct twoExamples[2];\r\n    } exampleStructsContainer;\r\n    \r\n    typedef struct {\r\n        exampleStructsContainer firstContainer;\r\n        exampleStructsContainer secondContainer;\r\n    } manyContainers;\r\n    \r\n    typedef struct {\r\n        int value;\r\n        double timesTwo;\r\n    } result;\r\n\r\n    #include &lt;stdio.h&gt;\r\n    #include &quot;struct-struct-array.h&quot;\r\n    #include &lt;stdbool.h&gt;\r\n\r\n\r\n    result valueOutOfContainer(manyContainers containers, bool additionalContainer) {\r\n        result r;\r\n        r.value = -1;\r\n    \r\n        if (additionalContainer) {\r\n            exampleStructsContainer containerNumberTwo = containers.secondContainer;\r\n            printf(&quot;Funny double in container number two: %f\\n&quot;, containerNumberTwo.funnyDouble);\r\n            exampleStruct e = containerNumberTwo.twoExamples[1];\r\n            printf(&quot;What&#39;s in the double: %f\\n&quot;, e.justADouble);\r\n            r.value = e.justANumber + 1;\r\n            r.timesTwo = e.justADouble * 2; \r\n        }\r\n        return r;\r\n    }\r\n\r\n\r\nJava Code:\r\n\r\n    @Setter\r\n    public class ExampleStruct extends Structure implements Structure.ByValue {\r\n    \r\n        public int ttype;\r\n        public int justANumber;\r\n        public double justADouble;\r\n    \r\n        @Override\r\n        protected List&lt;String&gt; getFieldOrder() {\r\n            return Arrays.asList(&quot;ttype&quot;, &quot;justANumber&quot;, &quot;justADouble&quot;);\r\n        }\r\n    }\r\n\r\n    @Setter\r\n    public class ExampleStructsContainer extends Structure implements Structure.ByValue {\r\n    \r\n        public double funnyDouble;\r\n        public ExampleStruct[] twoExamples = new ExampleStruct[2];\r\n    \r\n        @Override\r\n        protected List&lt;String&gt; getFieldOrder() {\r\n            return Arrays.asList(&quot;funnyDouble&quot;, &quot;twoExamples&quot;);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n    @Setter\r\n    public class ManyContainers extends Structure implements Structure.ByValue {\r\n    \r\n        public ExampleStructsContainer firstContainer;\r\n        public ExampleStructsContainer secondContainer;\r\n    \r\n        @Override\r\n        protected List&lt;String&gt; getFieldOrder() {\r\n            return Arrays.asList(&quot;firstContainer&quot;, &quot;secondContainer&quot;);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\n    @Getter\r\n    public class Result extends Structure implements Structure.ByValue {\r\n    \r\n        public int value;\r\n        public double timesTwo;\r\n    \r\n        @Override\r\n        protected List&lt;String&gt; getFieldOrder() {\r\n            return Arrays.asList(&quot;value&quot;, &quot;timesTwo&quot;);\r\n        }\r\n    }\r\n\r\n\r\n    public interface ExampleService {\r\n    \r\n        Result test(ManyContainers manyContainers);\r\n    }\r\n\r\n    public class ExampleServiceImpl implements ExampleService {\r\n    \r\n        private ExampleNativeService exampleNativeService = ExampleNativeService.INSTANCE;\r\n        @Override\r\n        public Result test(ManyContainers manyContainers) {\r\n            return exampleNativeService.valueOutOfContainer(manyContainers, true);\r\n        }\r\n    }\r\n\r\n\r\n    public class ExampleServiceImplTest {\r\n    \r\n        @Test\r\n        void testShouldReturnCorrectResult()  {\r\n            final var myContainers = new ManyContainers();\r\n            myContainers.setFirstContainer(container(example(0, 21, 0.123), example(1, 22, 0.123)));\r\n            myContainers.setSecondContainer(container(example(0, 42, 0.123), example(1, 1335, 3.14)));\r\n            final var exampleService = new ExampleServiceImpl();\r\n            final var r = exampleService.test(myContainers);\r\n            assertThat(r.getValue()).isEqualTo(1336);\r\n            assertThat(r.getTimesTwo()).isEqualTo(6.28);\r\n        }\r\n    \r\n        private ExampleStructsContainer container(ExampleStruct e1, ExampleStruct e2) {\r\n            final var exampleList = new ArrayList&lt;ExampleStruct&gt;();\r\n            exampleList.add(e1);\r\n            exampleList.add(e2);\r\n            final var eContainer = new ExampleStructsContainer();\r\n            eContainer.setTwoExamples(exampleList.toArray(ExampleStruct[]::new));\r\n            eContainer.setFunnyDouble(4.3);\r\n            return eContainer;\r\n        }\r\n    \r\n        private ExampleStruct example(int t, int num, double d) {\r\n            final var e = new ExampleStruct();\r\n            e.setTtype(t);\r\n            e.setJustANumber(num);\r\n            e.setJustADouble(d);\r\n            return e;\r\n        }\r\n    \r\n    }\r\n\r\nI think that that means, the problem is somewhere in my original code.\r\n","title":"What possible reasons could there be for a JVM crash in an application with JNA?","body":"<p>I'm looking for possible reasons for a strange issue with JNA. I have a Java application which uses bunch of shared libraries, all self made, programmed by me and my colleague. We are using JNA 5.x to expose the C functions from the SOs to java. (Java 11.20 on Linux). We use Gradle 7.4 to build the Java code, the C code is compiled into SOs with cmake.</p>\n<p>The issue is that JVM crashes, when I build the project with Gradle and execute all the tests in sequence. This started to happen, after I've included a unit test that tests a function from one of the libraries. I get the following error:</p>\n<pre class=\"lang-none prettyprint-override\"><code># A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00007fa08abac0ef, pid=129694, tid=129697\n#\n# JRE version: OpenJDK Runtime Environment (Red_Hat-11.0.20.0.8-1.fc38) (11.0.20+8) (build 11.0.20+8)\n# Java VM: OpenJDK 64-Bit Server VM (Red_Hat-11.0.20.0.8-1.fc38) (11.0.20+8, mixed mode, sharing, tiered, compressed oops, g1 gc, linux-amd64)\n# Problematic frame:\n# C  [libc.so.6+0x990ef]\n</code></pre>\n<p>So it must be something within this library or the way I call that particular function from it. What makes the issue hard for me is that when I execute just the one unit test, it is green. No JVM problem, and the results come out as expected.</p>\n<p>GDB gives me no real clues either, or at least I can't interpret them. When I debug the gradle process, I can see that the function call was successful in the sense that there are correct results in the return value, but after the return of the function is executed I get a problem in libc.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Thread 2 &quot;Test worker&quot; received signal SIGSEGV, Segmentation fault.\n0x00007fe3948420ef in unlink_chunk (p=p@entry=0x7fe38caedbe0, av=0x7fe38c000030) at malloc.c:1604\n1604      if (chunksize (p) != prev_size (next_chunk (p)))                                                                                                                                                                    \n(gdb) c\nContinuing.\n\nThread 2 &quot;Test worker&quot; received signal SIGILL, Illegal instruction.\nfutex_wait (private=0, expected=2, futex_word=0x7fe38c000030) at ../sysdeps/nptl/futex-internal.h:146\nDownloading source file /usr/src/debug/glibc-2.37-10.fc38.x86_64/nptl/../sysdeps/nptl/futex-internal.h\n146       int err = lll_futex_timed_wait (futex_word, expected, NULL, private);                                                                                                                                               \n(gdb) n\n0x00007fe394317d10 in crash_handler(int, siginfo_t*, void*) () from /usr/lib/jvm/java-11-openjdk-11.0.20.0.8-1.fc38.x86_64/lib/server/libjvm.so\n(gdb) n\nSingle stepping until exit from function _ZL13crash_handleriP9siginfo_tPv,\nwhich has no line number information.\n\nThread 20 &quot;VM Periodic Tas&quot; received signal SIGABRT, Aborted.\n[Switching to Thread 0x7fe365fff6c0 (LWP 131363)]\n__pthread_kill_implementation (threadid=&lt;optimized out&gt;, signo=signo@entry=6, no_tid=no_tid@entry=0) at pthread_kill.c:44\n44            return INTERNAL_SYSCALL_ERROR_P (ret) ? INTERNAL_SYSCALL_ERRNO (ret) : 0;                                                                                                                                       \n(gdb) n\nCouldn't get registers: No such process.\n(gdb) [Thread 0x7fe36476d6c0 (LWP 131400) exited]\n</code></pre>\n<p>Any ideas where to look and how to proceed in order to find what the reason for the issue is are much appreciated.</p>\n<p>UPDATE: I've created a simple example based on my real structures and I don't have the issue.  Here's the example:</p>\n<p>C code:</p>\n<pre><code>enum ENUM_TYPE {\n    SIMPLE, COMPLEX\n};\n\ntypedef struct {\n    enum ENUM_TYPE ttype;\n    int justANumber;\n    double justADouble;\n} exampleStruct;\n\ntypedef struct {\n    double funnyDouble;\n    exampleStruct twoExamples[2];\n} exampleStructsContainer;\n\ntypedef struct {\n    exampleStructsContainer firstContainer;\n    exampleStructsContainer secondContainer;\n} manyContainers;\n\ntypedef struct {\n    int value;\n    double timesTwo;\n} result;\n\n#include &lt;stdio.h&gt;\n#include &quot;struct-struct-array.h&quot;\n#include &lt;stdbool.h&gt;\n\n\nresult valueOutOfContainer(manyContainers containers, bool additionalContainer) {\n    result r;\n    r.value = -1;\n\n    if (additionalContainer) {\n        exampleStructsContainer containerNumberTwo = containers.secondContainer;\n        printf(&quot;Funny double in container number two: %f\\n&quot;, containerNumberTwo.funnyDouble);\n        exampleStruct e = containerNumberTwo.twoExamples[1];\n        printf(&quot;What's in the double: %f\\n&quot;, e.justADouble);\n        r.value = e.justANumber + 1;\n        r.timesTwo = e.justADouble * 2; \n    }\n    return r;\n}\n</code></pre>\n<p>Java Code:</p>\n<pre><code>@Setter\npublic class ExampleStruct extends Structure implements Structure.ByValue {\n\n    public int ttype;\n    public int justANumber;\n    public double justADouble;\n\n    @Override\n    protected List&lt;String&gt; getFieldOrder() {\n        return Arrays.asList(&quot;ttype&quot;, &quot;justANumber&quot;, &quot;justADouble&quot;);\n    }\n}\n\n@Setter\npublic class ExampleStructsContainer extends Structure implements Structure.ByValue {\n\n    public double funnyDouble;\n    public ExampleStruct[] twoExamples = new ExampleStruct[2];\n\n    @Override\n    protected List&lt;String&gt; getFieldOrder() {\n        return Arrays.asList(&quot;funnyDouble&quot;, &quot;twoExamples&quot;);\n    }\n\n}\n\n\n@Setter\npublic class ManyContainers extends Structure implements Structure.ByValue {\n\n    public ExampleStructsContainer firstContainer;\n    public ExampleStructsContainer secondContainer;\n\n    @Override\n    protected List&lt;String&gt; getFieldOrder() {\n        return Arrays.asList(&quot;firstContainer&quot;, &quot;secondContainer&quot;);\n    }\n\n}\n\n\n\n@Getter\npublic class Result extends Structure implements Structure.ByValue {\n\n    public int value;\n    public double timesTwo;\n\n    @Override\n    protected List&lt;String&gt; getFieldOrder() {\n        return Arrays.asList(&quot;value&quot;, &quot;timesTwo&quot;);\n    }\n}\n\n\npublic interface ExampleService {\n\n    Result test(ManyContainers manyContainers);\n}\n\npublic class ExampleServiceImpl implements ExampleService {\n\n    private ExampleNativeService exampleNativeService = ExampleNativeService.INSTANCE;\n    @Override\n    public Result test(ManyContainers manyContainers) {\n        return exampleNativeService.valueOutOfContainer(manyContainers, true);\n    }\n}\n\n\npublic class ExampleServiceImplTest {\n\n    @Test\n    void testShouldReturnCorrectResult()  {\n        final var myContainers = new ManyContainers();\n        myContainers.setFirstContainer(container(example(0, 21, 0.123), example(1, 22, 0.123)));\n        myContainers.setSecondContainer(container(example(0, 42, 0.123), example(1, 1335, 3.14)));\n        final var exampleService = new ExampleServiceImpl();\n        final var r = exampleService.test(myContainers);\n        assertThat(r.getValue()).isEqualTo(1336);\n        assertThat(r.getTimesTwo()).isEqualTo(6.28);\n    }\n\n    private ExampleStructsContainer container(ExampleStruct e1, ExampleStruct e2) {\n        final var exampleList = new ArrayList&lt;ExampleStruct&gt;();\n        exampleList.add(e1);\n        exampleList.add(e2);\n        final var eContainer = new ExampleStructsContainer();\n        eContainer.setTwoExamples(exampleList.toArray(ExampleStruct[]::new));\n        eContainer.setFunnyDouble(4.3);\n        return eContainer;\n    }\n\n    private ExampleStruct example(int t, int num, double d) {\n        final var e = new ExampleStruct();\n        e.setTtype(t);\n        e.setJustANumber(num);\n        e.setJustADouble(d);\n        return e;\n    }\n\n}\n</code></pre>\n<p>I think that that means, the problem is somewhere in my original code.</p>\n"},{"tags":["java","android","google-cloud-platform","google-signin","google-one-tap"],"comments":[{"owner":{"account_id":5505460,"reputation":449,"user_id":4373421,"display_name":"Cheolho Jeon"},"score":0,"creation_date":1697132206,"post_id":77282027,"comment_id":136244611,"body_markdown":"It would be better if we could narrow down the scope of the problem. For now, it seems that there are 2 changes from &quot;when it worked&quot;. 1. You deleted the whole project and started over, 2. You changed the button to an ImageButton. My suggestion is, if you can change the button back to a normal `Button`, can you try that and determine if the `Button` is the real source of the trouble?","body":"It would be better if we could narrow down the scope of the problem. For now, it seems that there are 2 changes from &quot;when it worked&quot;. 1. You deleted the whole project and started over, 2. You changed the button to an ImageButton. My suggestion is, if you can change the button back to a normal <code>Button</code>, can you try that and determine if the <code>Button</code> is the real source of the trouble?"},{"owner":{"account_id":5505460,"reputation":449,"user_id":4373421,"display_name":"Cheolho Jeon"},"score":0,"creation_date":1697132441,"post_id":77282027,"comment_id":136244660,"body_markdown":"A. If the `ImageButton` was the source of the problem: I would just use the `Button` class with a drawable background, or just an ImageView with onPressed state (using state selectors). It&#39;s not elegant, but it looks like a imageButton and behaves like a imageButton so ..","body":"A. If the <code>ImageButton</code> was the source of the problem: I would just use the <code>Button</code> class with a drawable background, or just an ImageView with onPressed state (using state selectors). It&#39;s not elegant, but it looks like a imageButton and behaves like a imageButton so .."},{"owner":{"account_id":5505460,"reputation":449,"user_id":4373421,"display_name":"Cheolho Jeon"},"score":0,"creation_date":1697132505,"post_id":77282027,"comment_id":136244672,"body_markdown":"B. If the `ImageButton` was not the source of the problem: look at the config of your project and find the real culprit, and focus on that. You may be looking for an answer to a non-existing problem.","body":"B. If the <code>ImageButton</code> was not the source of the problem: look at the config of your project and find the real culprit, and focus on that. You may be looking for an answer to a non-existing problem."},{"owner":{"account_id":14423201,"reputation":840,"user_id":10418725,"display_name":"Jorn Rigter"},"score":0,"creation_date":1697181588,"post_id":77282027,"comment_id":136250075,"body_markdown":"It seems you set your button&#39;s onClickListener within the ActivityResultLauncher? Maybe try setting the on click listener right after you declare the button through `findViewById()`. ImageButton should work and should _not_ be the issue, we also use an ImageButton in our app for Google SSO. You can easily debug this by setting a breakpoint in the button&#39;s onClickListener and seeing if it gets called. If not, it&#39;s probably the issue mentioned before of declaring the onClickListener in the wrong place","body":"It seems you set your button&#39;s onClickListener within the ActivityResultLauncher? Maybe try setting the on click listener right after you declare the button through <code>findViewById()</code>. ImageButton should work and should <i>not</i> be the issue, we also use an ImageButton in our app for Google SSO. You can easily debug this by setting a breakpoint in the button&#39;s onClickListener and seeing if it gets called. If not, it&#39;s probably the issue mentioned before of declaring the onClickListener in the wrong place"},{"owner":{"account_id":29657644,"reputation":1,"user_id":22730039,"display_name":"A Virk"},"score":0,"creation_date":1699470838,"post_id":77282027,"comment_id":136537106,"body_markdown":"Hi guys, if you even read it anymore. Finally, i might have find the problem. Everytime when i edit .xml file afterwards, i found that google one tap didnt anymore recognize buttons when clicked. Now it has worked one week... Odd.","body":"Hi guys, if you even read it anymore. Finally, i might have find the problem. Everytime when i edit .xml file afterwards, i found that google one tap didnt anymore recognize buttons when clicked. Now it has worked one week... Odd."},{"owner":{"account_id":29657644,"reputation":1,"user_id":22730039,"display_name":"A Virk"},"score":0,"creation_date":1699534067,"post_id":77282027,"comment_id":136545731,"body_markdown":"And its gone again. This time i dont even touch the project, it goes off workin itself. What could be the answer?","body":"And its gone again. This time i dont even touch the project, it goes off workin itself. What could be the answer?"}],"owner":{"account_id":29657644,"reputation":1,"user_id":22730039,"display_name":"A Virk"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697125167,"creation_date":1697125167,"question_id":77282027,"body_markdown":"Problem is that last week Google Sign-in button worked, but i deleted whole project and started all over again.\r\n\r\nOnly thing in code what i changed was that i used \\&lt;ImageButton\\&gt; instead of \\&lt;Button\\&gt;. Can that be the reason or is there something else? When i debug project with my own device via USB, it doesn&#39;t even make &quot;click&quot; noise when ImageButton is clicked.\r\n\r\nManifest.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n    &lt;application\r\n        android:allowBackup=&quot;false&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:usesCleartextTraffic=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.Askola&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.feature.homepage.MainActivity&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.feature.auth.LoginActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\nlogin_activity.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:background=&quot;@color/wine&quot;\r\n    tools:context=&quot;.feature.auth.LoginActivity&quot;&gt;\r\n\r\n    &lt;ImageView\r\n        android:id=&quot;@+id/askolaimg&quot;\r\n        android:contentDescription=&quot;@string/app_name&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:src=&quot;@drawable/askolanega&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n\r\n    &lt;ImageButton\r\n        android:id=&quot;@+id/loginBtn&quot;\r\n        android:layout_width=&quot;273dp&quot;\r\n        android:layout_height=&quot;73dp&quot;\r\n        android:backgroundTint=&quot;@color/wine&quot;\r\n        android:contentDescription=&quot;@string/btnTxt&quot;\r\n        android:scaleType=&quot;fitCenter&quot;\r\n        android:src=&quot;@drawable/google_sign&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.498&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/askolaimg&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.556&quot; /&gt;\r\n\r\n```\r\n\r\nLoginActivity.java\r\n\r\n```\r\npublic class LoginActivity extends AppCompatActivity {\r\n\r\n    SignInClient oneTapClient;\r\n    BeginSignInRequest signInRequest;\r\n    ImageButton button;\r\n\r\n    private static final int REQ_ONE_TAP = 2;  // Can be any integer unique to the Activity.\r\n    private boolean showOneTapUI = true;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login);\r\n\r\n        button = findViewById(R.id.loginBtn);\r\n        oneTapClient = Identity.getSignInClient(this);\r\n        signInRequest = BeginSignInRequest.builder()\r\n                .setGoogleIdTokenRequestOptions(BeginSignInRequest.GoogleIdTokenRequestOptions.builder()\r\n                        .setSupported(true)\r\n                        // Your server&#39;s client ID, not your Android client ID.\r\n                        .setServerClientId(getString(R.string.web_client_id))\r\n                        // Only show accounts previously used to sign in.\r\n                        .setFilterByAuthorizedAccounts(true)\r\n                        .build())\r\n                // Automatically sign in when exactly one credential is retrieved.\r\n                .build();\r\n        ActivityResultLauncher&lt;IntentSenderRequest&gt; activityResultLauncher =\r\n                registerForActivityResult(new ActivityResultContracts.StartIntentSenderForResult(), new ActivityResultCallback&lt;ActivityResult&gt;() {\r\n                            @Override\r\n                            public void onActivityResult(ActivityResult result) {\r\n                                if (result.getResultCode() == Activity.RESULT_OK){\r\n                                    try {\r\n                                        SignInCredential credential = oneTapClient.getSignInCredentialFromIntent(result.getData());\r\n                                        String idToken = credential.getGoogleIdToken();\r\n                                        if (idToken !=  null) {\r\n                                            String email = credential.getId();\r\n                                            Toast.makeText(getApplicationContext(), &quot;Email: &quot;+email, Toast.LENGTH_SHORT).show();\r\n                                        }\r\n                                    } catch (ApiException e) {\r\n                                        e.printStackTrace();\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n                        button.setOnClickListener(new View.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(View view) {\r\n\r\n                                oneTapClient.beginSignIn(signInRequest)\r\n                                        .addOnSuccessListener(LoginActivity.this, new OnSuccessListener&lt;BeginSignInResult&gt;() {\r\n                                            @Override\r\n                                            public void onSuccess(BeginSignInResult result) {\r\n                                                IntentSenderRequest intentSenderRequest =\r\n                                                        new IntentSenderRequest.Builder(result.getPendingIntent().getIntentSender()).build();\r\n                                                activityResultLauncher.launch(intentSenderRequest);\r\n                                            }\r\n                                        })\r\n                                        .addOnFailureListener(LoginActivity.this, new OnFailureListener() {\r\n                                            @Override\r\n                                            public void onFailure(@NonNull Exception e) {\r\n                                                // No Google Accounts found. Just continue presenting the signed-out UI.\r\n                                                Log.d(&quot;TAG&quot;, e.getLocalizedMessage());\r\n                                            }\r\n                                        });\r\n                            }\r\n                        });\r\n    }\r\n}\r\n```\r\n\r\nTried to set intent filters .LAUNCHER and .DEFAULT, android.intent.action.(different commands). Thank you, appreciate already!","title":"Google sign-in not working (is image button reason?)","body":"<p>Problem is that last week Google Sign-in button worked, but i deleted whole project and started all over again.</p>\n<p>Only thing in code what i changed was that i used &lt;ImageButton&gt; instead of &lt;Button&gt;. Can that be the reason or is there something else? When i debug project with my own device via USB, it doesn't even make &quot;click&quot; noise when ImageButton is clicked.</p>\n<p>Manifest.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n    &lt;application\n        android:allowBackup=&quot;false&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:usesCleartextTraffic=&quot;true&quot;\n        android:theme=&quot;@style/Theme.Askola&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.feature.homepage.MainActivity&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.feature.auth.LoginActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>login_activity.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:background=&quot;@color/wine&quot;\n    tools:context=&quot;.feature.auth.LoginActivity&quot;&gt;\n\n    &lt;ImageView\n        android:id=&quot;@+id/askolaimg&quot;\n        android:contentDescription=&quot;@string/app_name&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:src=&quot;@drawable/askolanega&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n\n    &lt;ImageButton\n        android:id=&quot;@+id/loginBtn&quot;\n        android:layout_width=&quot;273dp&quot;\n        android:layout_height=&quot;73dp&quot;\n        android:backgroundTint=&quot;@color/wine&quot;\n        android:contentDescription=&quot;@string/btnTxt&quot;\n        android:scaleType=&quot;fitCenter&quot;\n        android:src=&quot;@drawable/google_sign&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.498&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/askolaimg&quot;\n        app:layout_constraintVertical_bias=&quot;0.556&quot; /&gt;\n\n</code></pre>\n<p>LoginActivity.java</p>\n<pre><code>public class LoginActivity extends AppCompatActivity {\n\n    SignInClient oneTapClient;\n    BeginSignInRequest signInRequest;\n    ImageButton button;\n\n    private static final int REQ_ONE_TAP = 2;  // Can be any integer unique to the Activity.\n    private boolean showOneTapUI = true;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_login);\n\n        button = findViewById(R.id.loginBtn);\n        oneTapClient = Identity.getSignInClient(this);\n        signInRequest = BeginSignInRequest.builder()\n                .setGoogleIdTokenRequestOptions(BeginSignInRequest.GoogleIdTokenRequestOptions.builder()\n                        .setSupported(true)\n                        // Your server's client ID, not your Android client ID.\n                        .setServerClientId(getString(R.string.web_client_id))\n                        // Only show accounts previously used to sign in.\n                        .setFilterByAuthorizedAccounts(true)\n                        .build())\n                // Automatically sign in when exactly one credential is retrieved.\n                .build();\n        ActivityResultLauncher&lt;IntentSenderRequest&gt; activityResultLauncher =\n                registerForActivityResult(new ActivityResultContracts.StartIntentSenderForResult(), new ActivityResultCallback&lt;ActivityResult&gt;() {\n                            @Override\n                            public void onActivityResult(ActivityResult result) {\n                                if (result.getResultCode() == Activity.RESULT_OK){\n                                    try {\n                                        SignInCredential credential = oneTapClient.getSignInCredentialFromIntent(result.getData());\n                                        String idToken = credential.getGoogleIdToken();\n                                        if (idToken !=  null) {\n                                            String email = credential.getId();\n                                            Toast.makeText(getApplicationContext(), &quot;Email: &quot;+email, Toast.LENGTH_SHORT).show();\n                                        }\n                                    } catch (ApiException e) {\n                                        e.printStackTrace();\n                                    }\n                                }\n                            }\n                        });\n                        button.setOnClickListener(new View.OnClickListener() {\n                            @Override\n                            public void onClick(View view) {\n\n                                oneTapClient.beginSignIn(signInRequest)\n                                        .addOnSuccessListener(LoginActivity.this, new OnSuccessListener&lt;BeginSignInResult&gt;() {\n                                            @Override\n                                            public void onSuccess(BeginSignInResult result) {\n                                                IntentSenderRequest intentSenderRequest =\n                                                        new IntentSenderRequest.Builder(result.getPendingIntent().getIntentSender()).build();\n                                                activityResultLauncher.launch(intentSenderRequest);\n                                            }\n                                        })\n                                        .addOnFailureListener(LoginActivity.this, new OnFailureListener() {\n                                            @Override\n                                            public void onFailure(@NonNull Exception e) {\n                                                // No Google Accounts found. Just continue presenting the signed-out UI.\n                                                Log.d(&quot;TAG&quot;, e.getLocalizedMessage());\n                                            }\n                                        });\n                            }\n                        });\n    }\n}\n</code></pre>\n<p>Tried to set intent filters .LAUNCHER and .DEFAULT, android.intent.action.(different commands). Thank you, appreciate already!</p>\n"},{"tags":["java","guice","embedded-jetty","vaadin-flow","vaadin24"],"comments":[{"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"score":0,"creation_date":1697116555,"post_id":77271753,"comment_id":136241176,"body_markdown":"I&#39;ve been meaning to update https://github.com/oliveryasuna/vaadin-jetty-guice to Vaadin 24. I&#39;ll let you know.","body":"I&#39;ve been meaning to update <a href=\"https://github.com/oliveryasuna/vaadin-jetty-guice\" rel=\"nofollow noreferrer\">github.com/oliveryasuna/vaadin-jetty-guice</a> to Vaadin 24. I&#39;ll let you know."}],"answers":[{"comments":[{"owner":{"account_id":18125064,"reputation":13,"user_id":13180659,"display_name":"Sergey Stepin"},"score":0,"creation_date":1697190792,"post_id":77281132,"comment_id":136251726,"body_markdown":"For now, I have found a simplier solution using com.google.inject.Injector inside CustomInstantiator. But you solution is more general and advanced, I will try it, thank you very much!","body":"For now, I have found a simplier solution using com.google.inject.Injector inside CustomInstantiator. But you solution is more general and advanced, I will try it, thank you very much!"}],"tags":[],"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697124595,"creation_date":1697118063,"answer_id":77281132,"question_id":77271753,"body_markdown":"There is a lot of code/configuration necessary to accomplish this, and it is not suited for a post here. However, I published an example a few months ago for Vaadin 23: https://github.com/oliveryasuna/vaadin-jetty-guice. I have been meaning to update it for Vaadin 24, so I just did. It is also published in the Vaadin Directory: https://vaadin.com/directory/component/embedded-jetty--guice-example.","title":"Vaadin 24 with Embedded Jetty and Google Guice","body":"<p>There is a lot of code/configuration necessary to accomplish this, and it is not suited for a post here. However, I published an example a few months ago for Vaadin 23: <a href=\"https://github.com/oliveryasuna/vaadin-jetty-guice\" rel=\"nofollow noreferrer\">https://github.com/oliveryasuna/vaadin-jetty-guice</a>. I have been meaning to update it for Vaadin 24, so I just did. It is also published in the Vaadin Directory: <a href=\"https://vaadin.com/directory/component/embedded-jetty--guice-example\" rel=\"nofollow noreferrer\">https://vaadin.com/directory/component/embedded-jetty--guice-example</a>.</p>\n"}],"owner":{"account_id":18125064,"reputation":13,"user_id":13180659,"display_name":"Sergey Stepin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77281132,"answer_count":1,"score":1,"last_activity_date":1697124595,"creation_date":1697016068,"question_id":77271753,"body_markdown":"I need to use Vaadin framework in an application that already uses Google Guice as DI together with an embedded Jetty as webserver. The main issue is that Vaadin components must use some services bound by Google Guice.\r\n\r\n\r\n\r\nFor that Jetty is configured with WebAppContext:\r\n```\r\nprotected void configureServletHandler(final Server server, final ServletContextHandler handler, final Map&lt;String, Servlet&gt; servlets, final StatisticsHandler statisticsHandler) {\r\n\t\tstatisticsHandler.setHandler(handler);\r\n\t\tserver.setHandler(statisticsHandler);\r\n\r\n\t\ttry {\r\n\t\t\tfinal WebAppContext context = createWebAppContext(servlets);\r\n\t\t\thandler.setHandler(context);\r\n\t\t} catch (IOException e) {\r\n\t\t\tlogger.error(&quot;Cannot create WebAppContext: &quot;, e);\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t\tlogger.info(&quot;WebAppContext is created&quot;);\r\n\r\n\t\thandler.addFilter(GuiceFilter.class, &quot;/*&quot;, EnumSet.allOf(DispatcherType.class));\r\n\t\thandler.addFilter(CrossOriginFilter.class, &quot;/*&quot;, EnumSet.allOf(DispatcherType.class));\r\n\t}\r\n\r\n\t\r\nprivate static WebAppContext createWebAppContext(final Map&lt;String, Servlet&gt; servlets) throws IOException {\r\n\r\n\t\tfinal WebAppContext context = new WebAppContext();\r\n\r\n\t\tcontext.setBaseResource(Resource.newResource(&quot;../../webapp/&quot;));\r\n\r\n\t\tfor (final var e : servlets.entrySet()) {\r\n\t\t\tcontext.addServlet(new ServletHolder(e.getValue()), e.getKey());\r\n\t\t}\r\n\r\n\t\t// this will properly scan the classpath for all @WebListeners,\r\n\t\t// including the most important\r\n\t\t// com.vaadin.flow.server.startup.ServletContextListeners.\r\n\t\t// See also https://mvysny.github.io/vaadin-lookup-vs-instantiator/\r\n\t\tcontext.setAttribute(\r\n\t\t\t\t&quot;org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern&quot;,\r\n\t\t\t\t&quot;.*\\\\.jar|.*/classes/.*&quot;);\r\n\t\tcontext.setConfigurationDiscovered(true);\r\n\t\tcontext.getServletContext().setExtendedListenerTypes(true);\r\n\r\n\t\treturn context;\r\n\t}\t\r\n```\r\n\r\nI tried to adhere an approach describe in Vaadin documentation, customising vaadin Instatiator: \r\nhttps://vaadin.com/docs/latest/advanced/custom-instantiators\r\n\r\nFor the servlet customisation com.vaadin.cdi.util.BeanManagerProvider is used: \r\n```\r\n@WebServlet(urlPatterns = &quot;/*&quot;, asyncSupported = true)\r\npublic class CustomServlet extends VaadinServlet {\r\n\r\n  @Override\r\n  protected VaadinServletService createServletService(DeploymentConfiguration deploymentConfiguration) throws ServiceException {\r\n      BeanManager beanManager = BeanManagerProvider.getInstance().getBeanManager();\r\n      CustomVaadinServletService service = new CustomVaadinServletService(this, deploymentConfiguration, beanManager);\r\n      service.init();\r\n      return service;\r\n  }\r\n}\r\n```\r\n\r\nBut it fails with Exception:\r\n```\r\nCaused by: java.lang.IllegalStateException: No com.vaadin.cdi.util.BeanManagerProvider in place! Please ensure that you configured the CDI implementation of your choice properly. If your setup is correct, please clear all caches and compiled artifacts.\r\n\tat com.vaadin.cdi.util.BeanManagerProvider.getInstance(BeanManagerProvider.java:165) ~[vaadin-cdi-15.0.1.jar:?]\r\n\tat net.bigpoint.batman.core.http.servlet.acp.AcpServlet.createServletService(AcpServlet.java:154) ~[batman-core-1.3.0-SNAPSHOT.jar:?]\r\n\tat com.vaadin.flow.server.VaadinServlet.createServletService(VaadinServlet.java:336) ~[flow-server-24.1.13.jar:24.1.13]\r\n\tat com.vaadin.flow.server.VaadinServlet.init(VaadinServlet.java:132) ~[flow-server-24.1.13.jar:24.1.13]\r\n\tat org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:633) ~[jetty-servlet-11.0.16.jar:11.0.16]\r\n```\r\n\r\nIt seems that before I can use  BeanManagerProvider it must be somehow initialized or provided by Jetty, but I could not found how.\r\n\r\nThe main question: How to combine Vaadin 24 with Guice?\r\n\r\nA sub-question is: If use CustomInstantiator, CustomVaadinServletService and CustomServlet as described in Vaadin doc (see the link above), how to use BeanManagerProvider with Jetty?\r\n","title":"Vaadin 24 with Embedded Jetty and Google Guice","body":"<p>I need to use Vaadin framework in an application that already uses Google Guice as DI together with an embedded Jetty as webserver. The main issue is that Vaadin components must use some services bound by Google Guice.</p>\n<p>For that Jetty is configured with WebAppContext:</p>\n<pre><code>protected void configureServletHandler(final Server server, final ServletContextHandler handler, final Map&lt;String, Servlet&gt; servlets, final StatisticsHandler statisticsHandler) {\n        statisticsHandler.setHandler(handler);\n        server.setHandler(statisticsHandler);\n\n        try {\n            final WebAppContext context = createWebAppContext(servlets);\n            handler.setHandler(context);\n        } catch (IOException e) {\n            logger.error(&quot;Cannot create WebAppContext: &quot;, e);\n            throw new RuntimeException(e);\n        }\n        logger.info(&quot;WebAppContext is created&quot;);\n\n        handler.addFilter(GuiceFilter.class, &quot;/*&quot;, EnumSet.allOf(DispatcherType.class));\n        handler.addFilter(CrossOriginFilter.class, &quot;/*&quot;, EnumSet.allOf(DispatcherType.class));\n    }\n\n    \nprivate static WebAppContext createWebAppContext(final Map&lt;String, Servlet&gt; servlets) throws IOException {\n\n        final WebAppContext context = new WebAppContext();\n\n        context.setBaseResource(Resource.newResource(&quot;../../webapp/&quot;));\n\n        for (final var e : servlets.entrySet()) {\n            context.addServlet(new ServletHolder(e.getValue()), e.getKey());\n        }\n\n        // this will properly scan the classpath for all @WebListeners,\n        // including the most important\n        // com.vaadin.flow.server.startup.ServletContextListeners.\n        // See also https://mvysny.github.io/vaadin-lookup-vs-instantiator/\n        context.setAttribute(\n                &quot;org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern&quot;,\n                &quot;.*\\\\.jar|.*/classes/.*&quot;);\n        context.setConfigurationDiscovered(true);\n        context.getServletContext().setExtendedListenerTypes(true);\n\n        return context;\n    }   \n</code></pre>\n<p>I tried to adhere an approach describe in Vaadin documentation, customising vaadin Instatiator:\n<a href=\"https://vaadin.com/docs/latest/advanced/custom-instantiators\" rel=\"nofollow noreferrer\">https://vaadin.com/docs/latest/advanced/custom-instantiators</a></p>\n<p>For the servlet customisation com.vaadin.cdi.util.BeanManagerProvider is used:</p>\n<pre><code>@WebServlet(urlPatterns = &quot;/*&quot;, asyncSupported = true)\npublic class CustomServlet extends VaadinServlet {\n\n  @Override\n  protected VaadinServletService createServletService(DeploymentConfiguration deploymentConfiguration) throws ServiceException {\n      BeanManager beanManager = BeanManagerProvider.getInstance().getBeanManager();\n      CustomVaadinServletService service = new CustomVaadinServletService(this, deploymentConfiguration, beanManager);\n      service.init();\n      return service;\n  }\n}\n</code></pre>\n<p>But it fails with Exception:</p>\n<pre><code>Caused by: java.lang.IllegalStateException: No com.vaadin.cdi.util.BeanManagerProvider in place! Please ensure that you configured the CDI implementation of your choice properly. If your setup is correct, please clear all caches and compiled artifacts.\n    at com.vaadin.cdi.util.BeanManagerProvider.getInstance(BeanManagerProvider.java:165) ~[vaadin-cdi-15.0.1.jar:?]\n    at net.bigpoint.batman.core.http.servlet.acp.AcpServlet.createServletService(AcpServlet.java:154) ~[batman-core-1.3.0-SNAPSHOT.jar:?]\n    at com.vaadin.flow.server.VaadinServlet.createServletService(VaadinServlet.java:336) ~[flow-server-24.1.13.jar:24.1.13]\n    at com.vaadin.flow.server.VaadinServlet.init(VaadinServlet.java:132) ~[flow-server-24.1.13.jar:24.1.13]\n    at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:633) ~[jetty-servlet-11.0.16.jar:11.0.16]\n</code></pre>\n<p>It seems that before I can use  BeanManagerProvider it must be somehow initialized or provided by Jetty, but I could not found how.</p>\n<p>The main question: How to combine Vaadin 24 with Guice?</p>\n<p>A sub-question is: If use CustomInstantiator, CustomVaadinServletService and CustomServlet as described in Vaadin doc (see the link above), how to use BeanManagerProvider with Jetty?</p>\n"},{"tags":["java","android","pdf","androidpdfviewer"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1633195989,"post_id":69418734,"comment_id":122697272,"body_markdown":"The user can set your app as default while choosing your app from many. It is not to your app.","body":"The user can set your app as default while choosing your app from many. It is not to your app."},{"owner":{"account_id":21665075,"reputation":421,"user_id":15983611,"display_name":"Syed Irfan Hussaini"},"score":0,"creation_date":1633196042,"post_id":69418734,"comment_id":122697279,"body_markdown":"how can i add my app in default app list for opening pdfs","body":"how can i add my app in default app list for opening pdfs"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1633196132,"post_id":69418734,"comment_id":122697294,"body_markdown":"In manifest file add an `&lt;intent-filter&gt;` to the activity that should display the pdf.","body":"In manifest file add an <code>&lt;intent-filter&gt;</code> to the activity that should display the pdf."},{"owner":{"account_id":21665075,"reputation":421,"user_id":15983611,"display_name":"Syed Irfan Hussaini"},"score":0,"creation_date":1633196234,"post_id":69418734,"comment_id":122697315,"body_markdown":"i don&#39;t know about intent-filter can you please show me how? Please I request you Please","body":"i don&#39;t know about intent-filter can you please show me how? Please I request you Please"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1633196848,"post_id":69418734,"comment_id":122697437,"body_markdown":"https://developer.android.com/guide/components/intents-filters#java","body":"<a href=\"https://developer.android.com/guide/components/intents-filters#java\" rel=\"nofollow noreferrer\">developer.android.com/guide/components/intents-filters#java</a>"}],"answers":[{"tags":[],"owner":{"account_id":23268453,"reputation":1,"user_id":17353610,"display_name":"Dahbi Oussama"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697122640,"creation_date":1697122556,"answer_id":77281713,"question_id":69418734,"body_markdown":"Try to use this code in you **Manifest.xml** :\r\n\r\n    &lt;activity  android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.MULTIWINDOW_LAUNCHER&quot;/&gt;\r\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;\r\n                &lt;data android:scheme=&quot;file&quot; /&gt;\r\n                &lt;data android:mimeType=&quot;application/pdf&quot; /&gt;\r\n                &lt;data android:pathPattern=&quot;.*\\\\.pdf&quot; /&gt;\r\n                &lt;data android:host=&quot;*&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\n\r\nand in your **MainActivity.java** :\r\n\r\n     Intent intent = getIntent();\r\n    Uri uri;\r\n\r\n    pdfView = findViewById(R.id.pdfViewer);\r\n    \r\n    if (Intent.ACTION_VIEW.equals(intent.getAction())) {\r\n        uri = intent.getData();\r\n        pdfView.fromUri(uri).load();\r\n    }\r\n    \r\n    if (Intent.ACTION_SEND.equals(intent.getAction())) {\r\n       uri = intent.getParcelableExtra(Intent.EXTRA_STREAM);\r\n       pdfView.fromUri(uri).load();\r\n    }\r\n\r\n \r\n\r\n\r\n\r\n\r\n","title":"How to set app default for opening pdf in Android","body":"<p>Try to use this code in you <strong>Manifest.xml</strong> :</p>\n<pre><code>&lt;activity  android:name=&quot;.MainActivity&quot;\n        android:exported=&quot;true&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;\n\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n        &lt;/intent-filter&gt;\n\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;\n            &lt;category android:name=&quot;android.intent.category.MULTIWINDOW_LAUNCHER&quot;/&gt;\n            &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n            &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;\n            &lt;data android:scheme=&quot;file&quot; /&gt;\n            &lt;data android:mimeType=&quot;application/pdf&quot; /&gt;\n            &lt;data android:pathPattern=&quot;.*\\\\.pdf&quot; /&gt;\n            &lt;data android:host=&quot;*&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n</code></pre>\n<p>and in your <strong>MainActivity.java</strong> :</p>\n<pre><code> Intent intent = getIntent();\nUri uri;\n\npdfView = findViewById(R.id.pdfViewer);\n\nif (Intent.ACTION_VIEW.equals(intent.getAction())) {\n    uri = intent.getData();\n    pdfView.fromUri(uri).load();\n}\n\nif (Intent.ACTION_SEND.equals(intent.getAction())) {\n   uri = intent.getParcelableExtra(Intent.EXTRA_STREAM);\n   pdfView.fromUri(uri).load();\n}\n</code></pre>\n"}],"owner":{"account_id":21665075,"reputation":421,"user_id":15983611,"display_name":"Syed Irfan Hussaini"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":562,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1697122640,"creation_date":1633195803,"question_id":69418734,"body_markdown":"I have build an PDF Reader and i want to open my app to open PDF&#39;s from any where on device\r\n\r\nLike:-\r\n\r\nWhatsapp or File Manager\r\n\r\nI want to set my app default for opening PDF&#39;s \r\n\r\nHelp me please I&#39;m searching it for past 3 hours","title":"How to set app default for opening pdf in Android","body":"<p>I have build an PDF Reader and i want to open my app to open PDF's from any where on device</p>\n<p>Like:-</p>\n<p>Whatsapp or File Manager</p>\n<p>I want to set my app default for opening PDF's</p>\n<p>Help me please I'm searching it for past 3 hours</p>\n"},{"tags":["java","winapi","jna"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1697180390,"post_id":77277162,"comment_id":136249896,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"comments":[{"owner":{"account_id":29644576,"reputation":1,"user_id":22719893,"display_name":"Yoshixi"},"score":0,"creation_date":1697159178,"post_id":77277920,"comment_id":136247988,"body_markdown":"Thank you man, ive seen that page, though only in brief glances. Didn&#39;t know the API can be read like that. Cheers for the help","body":"Thank you man, ive seen that page, though only in brief glances. Didn&#39;t know the API can be read like that. Cheers for the help"}],"tags":[],"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697122637,"creation_date":1697088686,"answer_id":77277920,"question_id":77277162,"body_markdown":"The documentation for [`SetMonitorColorTemperature`][1] says:\r\n&gt; `[in] hMonitor`\r\n&gt;\r\n&gt; Handle to a physical monitor. To get the monitor handle, call [`GetPhysicalMonitorsFromHMONITOR`][2] or [`GetPhysicalMonitorsFromIDirect3DDevice9`][3].\r\n\r\nFurther, it identifies the type of that handle as `HANDLE`.\r\n\r\nIn your code you&#39;ve called [MonitorFromPoint][4] which returns a `HMONITOR`, but you&#39;re simply changing the type of that pointer with your call to `HANDLE hMonitorHandle = new HANDLE(new Pointer(hMonitor));`.\r\n\r\nInstead, you need to use that `HMONITOR` as one of the arguments to `GetPhysicalMonitorsFromHMONITOR` to match it up to a physical monitor.  You&#39;ll get a pointer to a [`PHYSICAL_MONITOR`][5] structure, whose `HANDLE` is what you need to send to `SetMonitorColorTemperature`.  You can see an example of this in the JNA [MonitorInfoDemo][6] class.\r\n\r\nA readability suggestion.  Having `ByValue` in your code without it being obvious it&#39;s a `POINT` is confusing.  And while it won&#39;t change the end result, you might consider using the constructor for `POINT` that takes the parameters instead of assigning them later.  I&#39;d suggest:\r\n```java\r\nPOINT.ByValue pt = new POINT.ByValue(0, 0); \r\n```\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/windows/win32/api/highlevelmonitorconfigurationapi/nf-highlevelmonitorconfigurationapi-setmonitorcolortemperature\r\n  [2]: https://learn.microsoft.com/en-us/windows/desktop/api/physicalmonitorenumerationapi/nf-physicalmonitorenumerationapi-getphysicalmonitorsfromhmonitor\r\n  [3]: https://learn.microsoft.com/en-us/windows/desktop/api/physicalmonitorenumerationapi/nf-physicalmonitorenumerationapi-getphysicalmonitorsfromidirect3ddevice9\r\n  [4]: https://learn.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-monitorfrompoint\r\n  [5]: https://learn.microsoft.com/en-us/windows/win32/api/physicalmonitorenumerationapi/ns-physicalmonitorenumerationapi-physical_monitor\r\n  [6]: https://github.com/java-native-access/jna/blob/master/contrib/monitordemo/src/com/sun/jna/contrib/demo/MonitorInfoDemo.java#L100","title":"Change the color temperature of monitor using java JNA Win32API","body":"<p>The documentation for <a href=\"https://learn.microsoft.com/en-us/windows/win32/api/highlevelmonitorconfigurationapi/nf-highlevelmonitorconfigurationapi-setmonitorcolortemperature\" rel=\"nofollow noreferrer\"><code>SetMonitorColorTemperature</code></a> says:</p>\n<blockquote>\n<p><code>[in] hMonitor</code></p>\n<p>Handle to a physical monitor. To get the monitor handle, call <a href=\"https://learn.microsoft.com/en-us/windows/desktop/api/physicalmonitorenumerationapi/nf-physicalmonitorenumerationapi-getphysicalmonitorsfromhmonitor\" rel=\"nofollow noreferrer\"><code>GetPhysicalMonitorsFromHMONITOR</code></a> or <a href=\"https://learn.microsoft.com/en-us/windows/desktop/api/physicalmonitorenumerationapi/nf-physicalmonitorenumerationapi-getphysicalmonitorsfromidirect3ddevice9\" rel=\"nofollow noreferrer\"><code>GetPhysicalMonitorsFromIDirect3DDevice9</code></a>.</p>\n</blockquote>\n<p>Further, it identifies the type of that handle as <code>HANDLE</code>.</p>\n<p>In your code you've called <a href=\"https://learn.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-monitorfrompoint\" rel=\"nofollow noreferrer\">MonitorFromPoint</a> which returns a <code>HMONITOR</code>, but you're simply changing the type of that pointer with your call to <code>HANDLE hMonitorHandle = new HANDLE(new Pointer(hMonitor));</code>.</p>\n<p>Instead, you need to use that <code>HMONITOR</code> as one of the arguments to <code>GetPhysicalMonitorsFromHMONITOR</code> to match it up to a physical monitor.  You'll get a pointer to a <a href=\"https://learn.microsoft.com/en-us/windows/win32/api/physicalmonitorenumerationapi/ns-physicalmonitorenumerationapi-physical_monitor\" rel=\"nofollow noreferrer\"><code>PHYSICAL_MONITOR</code></a> structure, whose <code>HANDLE</code> is what you need to send to <code>SetMonitorColorTemperature</code>.  You can see an example of this in the JNA <a href=\"https://github.com/java-native-access/jna/blob/master/contrib/monitordemo/src/com/sun/jna/contrib/demo/MonitorInfoDemo.java#L100\" rel=\"nofollow noreferrer\">MonitorInfoDemo</a> class.</p>\n<p>A readability suggestion.  Having <code>ByValue</code> in your code without it being obvious it's a <code>POINT</code> is confusing.  And while it won't change the end result, you might consider using the constructor for <code>POINT</code> that takes the parameters instead of assigning them later.  I'd suggest:</p>\n<pre class=\"lang-java prettyprint-override\"><code>POINT.ByValue pt = new POINT.ByValue(0, 0); \n</code></pre>\n"}],"owner":{"account_id":29644576,"reputation":1,"user_id":22719893,"display_name":"Yoshixi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697122637,"creation_date":1697073603,"question_id":77277162,"body_markdown":"I would like to create a software similar to redshift for linux that gradually shifts the screen color temperature to more red tint. I would like to use java native access and win32 api functions to do this. \r\n\r\n\r\nCurrently Ive tried changing the windows register&#39;s correlating to \r\n&quot;Computer\\HKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\CloudStore\\Store\\DefaultAccount\\Current\\default$windows.data.bluelightreduction.bluelightreductionstate\\windows.data.bluelightreduction.bluelightreductionstate&quot; without much effect. \r\n \r\nIve also tinkered with [Dxva2](https://github.com/java-native-access/jna/blob/237206727cab3cdfd0285ed57035ab3b64179ed4/contrib/platform/src/com/sun/jna/platform/win32/Dxva2.java#L230) SetMonitorColorTemperature() function, but cannot find how I am supposed to get the HANDLE parameter.\r\n\r\nbelow is my code:\r\n\r\n```\r\nimport com.sun.jna.Library;\r\nimport com.sun.jna.platform.win32.User32;\r\nimport com.sun.jna.platform.win32.WinReg;\r\nimport com.sun.jna.Native;\r\nimport com.sun.jna.Platform;\r\nimport com.sun.jna.platform.win32.WinDef.BOOL;\r\nimport com.sun.jna.platform.win32.WinDef.HDC;\r\nimport com.sun.jna.platform.win32.WinUser.HMONITOR;\r\nimport com.sun.jna.platform.win32.Dxva2;\r\nimport com.sun.jna.platform.win32.WinUser;\r\nimport com.sun.jna.platform.win32.HighLevelMonitorConfigurationAPI.MC_COLOR_TEMPERATURE;\r\nimport com.sun.jna.platform.win32.WinNT.HANDLE;\r\nimport com.sun.jna.platform.win32.WinNT.HANDLEByReference;\r\nimport com.sun.jna.platform.win32.WinDef.POINT.ByValue;\r\nimport com.sun.jna.platform.win32.PhysicalMonitorEnumerationAPI.PHYSICAL_MONITOR;\r\nimport com.sun.jna.Pointer;\r\n\r\nclass ChangeColorTemp {\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;helo&quot;);\r\n        ByValue pt = new ByValue(); \r\n        pt.x = 0;\r\n        pt.y = 0;\r\n        int dwFlags = User32.MONITOR_DEFAULTTONEAREST;\r\n        HMONITOR hMonitor = User32.INSTANCE.MonitorFromPoint(pt, dwFlags);\r\n        HANDLE hMonitorHandle = new HANDLE(new Pointer(hMonitor));\r\n        \r\n        Dxva2.INSTANCE.SetMonitorColorTemperature(hMonitorHandle, MC_COLOR_TEMPERATURE.MC_COLOR_TEMPERATURE_4000K);\r\n        \r\n    }\r\n}\r\n```\r\nI would like to know if I am going about this the right way, just to get used to Win32API. \r\nMany thanks.","title":"Change the color temperature of monitor using java JNA Win32API","body":"<p>I would like to create a software similar to redshift for linux that gradually shifts the screen color temperature to more red tint. I would like to use java native access and win32 api functions to do this.</p>\n<p>Currently Ive tried changing the windows register's correlating to\n&quot;Computer\\HKEY_CURRENT_USER\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\CloudStore\\Store\\DefaultAccount\\Current\\default$windows.data.bluelightreduction.bluelightreductionstate\\windows.data.bluelightreduction.bluelightreductionstate&quot; without much effect.</p>\n<p>Ive also tinkered with <a href=\"https://github.com/java-native-access/jna/blob/237206727cab3cdfd0285ed57035ab3b64179ed4/contrib/platform/src/com/sun/jna/platform/win32/Dxva2.java#L230\" rel=\"nofollow noreferrer\">Dxva2</a> SetMonitorColorTemperature() function, but cannot find how I am supposed to get the HANDLE parameter.</p>\n<p>below is my code:</p>\n<pre><code>import com.sun.jna.Library;\nimport com.sun.jna.platform.win32.User32;\nimport com.sun.jna.platform.win32.WinReg;\nimport com.sun.jna.Native;\nimport com.sun.jna.Platform;\nimport com.sun.jna.platform.win32.WinDef.BOOL;\nimport com.sun.jna.platform.win32.WinDef.HDC;\nimport com.sun.jna.platform.win32.WinUser.HMONITOR;\nimport com.sun.jna.platform.win32.Dxva2;\nimport com.sun.jna.platform.win32.WinUser;\nimport com.sun.jna.platform.win32.HighLevelMonitorConfigurationAPI.MC_COLOR_TEMPERATURE;\nimport com.sun.jna.platform.win32.WinNT.HANDLE;\nimport com.sun.jna.platform.win32.WinNT.HANDLEByReference;\nimport com.sun.jna.platform.win32.WinDef.POINT.ByValue;\nimport com.sun.jna.platform.win32.PhysicalMonitorEnumerationAPI.PHYSICAL_MONITOR;\nimport com.sun.jna.Pointer;\n\nclass ChangeColorTemp {\n    public static void main(String[] args) {\n        System.out.println(&quot;helo&quot;);\n        ByValue pt = new ByValue(); \n        pt.x = 0;\n        pt.y = 0;\n        int dwFlags = User32.MONITOR_DEFAULTTONEAREST;\n        HMONITOR hMonitor = User32.INSTANCE.MonitorFromPoint(pt, dwFlags);\n        HANDLE hMonitorHandle = new HANDLE(new Pointer(hMonitor));\n        \n        Dxva2.INSTANCE.SetMonitorColorTemperature(hMonitorHandle, MC_COLOR_TEMPERATURE.MC_COLOR_TEMPERATURE_4000K);\n        \n    }\n}\n</code></pre>\n<p>I would like to know if I am going about this the right way, just to get used to Win32API.\nMany thanks.</p>\n"},{"tags":["java","spring","postgresql","hibernate","jpa"],"answers":[{"comments":[{"owner":{"account_id":7151947,"reputation":773,"user_id":5465648,"accept_rate":22,"display_name":"Yogesh"},"score":0,"creation_date":1480686074,"post_id":40922013,"comment_id":69078105,"body_markdown":"Thanks for reply. Will check the SAVE_UPDATE and check. I was considering a scenario where user can be moved across the group so if once group is deleted the users should remain intact.","body":"Thanks for reply. Will check the SAVE_UPDATE and check. I was considering a scenario where user can be moved across the group so if once group is deleted the users should remain intact."}],"tags":[],"owner":{"account_id":1233122,"reputation":3934,"user_id":1197297,"accept_rate":67,"display_name":"StvnBrkdll"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1480637841,"creation_date":1480633396,"answer_id":40922013,"question_id":40921758,"body_markdown":"You currently to have this annotation in the `User` and `Group` classes:\r\n\r\n    @ManyToMany(cascade=CascadeType.ALL)\r\n\r\nThe [Hibernate docs][1] indicate that this will cause cascading of the following operations: `save, delete, update, evict, lock, replicate, merge, persist`\r\n\r\nSo it makes sense that when you delete the `Group` instance, the delete cascades to the `User` instances.\r\n\r\nConsider changing the annotation to something like:\r\n\r\n    @ManyToMany(cascade=CascadeType.SAVE_UPDATE)\r\n\r\nOr whatever is appropriate for your application.\r\n\r\nOptionally, you can remove the `User` instances from the `Group` prior to deleting the `Group`.\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/4.3/javadocs/org/hibernate/metamodel/binding/CascadeType.html","title":"JPA- ManyToMany relation the delete operation removes all entities from secondary table","body":"<p>You currently to have this annotation in the <code>User</code> and <code>Group</code> classes:</p>\n\n<pre><code>@ManyToMany(cascade=CascadeType.ALL)\n</code></pre>\n\n<p>The <a href=\"https://docs.jboss.org/hibernate/orm/4.3/javadocs/org/hibernate/metamodel/binding/CascadeType.html\" rel=\"nofollow noreferrer\">Hibernate docs</a> indicate that this will cause cascading of the following operations: <code>save, delete, update, evict, lock, replicate, merge, persist</code></p>\n\n<p>So it makes sense that when you delete the <code>Group</code> instance, the delete cascades to the <code>User</code> instances.</p>\n\n<p>Consider changing the annotation to something like:</p>\n\n<pre><code>@ManyToMany(cascade=CascadeType.SAVE_UPDATE)\n</code></pre>\n\n<p>Or whatever is appropriate for your application.</p>\n\n<p>Optionally, you can remove the <code>User</code> instances from the <code>Group</code> prior to deleting the <code>Group</code>.</p>\n"}],"owner":{"account_id":7151947,"reputation":773,"user_id":5465648,"accept_rate":22,"display_name":"Yogesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1715,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697121937,"creation_date":1480632230,"question_id":40921758,"body_markdown":"I am using Spring data JPA and postgres database.\r\nI have two entities namely group and user. \r\nI have created repository using Spring&#39;s CrudRepository inteface. \r\n\r\n    @Entity\r\n    public class Group { \r\n    @ManyToMany(cascade=CascadeType.ALL)\r\n    @JoinTable(\r\n    \t\tname=&quot;group_user_bridge&quot;, \r\n    \t\tjoinColumns=@JoinColumn(name=&quot;joinTbl_groupid&quot;, referencedColumnName=&quot;groupid&quot;), \r\n    \t\tinverseJoinColumns=@JoinColumn(name=&quot;joinTbl_agentid&quot;, referencedColumnName=&quot;userid&quot;)\r\n    \t\t)\r\n    private Set&lt;User&gt; users;\r\n    ....\r\n    }\r\n\r\n\r\nclass User\r\n\r\n    @Entity\r\n    public class User {\r\n    \r\n\t@ManyToMany(mappedBy=&quot;users&quot;,cascade=CascadeType.ALL,fetch=FetchType.EAGER)\r\n\tprivate List&lt;Group&gt; groups;\r\n    .....\r\n     }\r\n\r\nRepository.save : Works fine. \r\n\r\n      @Test\r\n      public void addGroup(){\r\n    \t\tGroup hg = new Group();\r\n    \r\n    \t\tUser h1 = new User();\r\n    \t\tUser h2 = new User();\r\n    \t\tsome setters for user entity object\r\n    \r\n    \t\thg.setName(&quot;testGroup&quot;);\r\n            ... some setters for groups\r\n    \r\n    \t\tHashSet&lt;User&gt; groupMembers = new HashSet&lt;User&gt;();\r\n    \t\tgroupMembers.add(h2);\r\n    \t\tgroupMembers.add(h1);\r\n    \t\thg.setGroupMembers(groupMembers);\r\n    \t\t\r\n    \t\thg = groupRepository.save(hg);\r\n\r\n\r\nQuestion\r\n\r\nWhen I delete the group using groupRepository.delete(groupEntity), it deletes the group, the association of group **and users** from join table.  \r\nbut it also deletes the users from user table. In fact the **users records should not get deleted**. \r\n\r\n**How to prevent user deletion here?**\r\n\r\nI am using @SQLDelete annotation for soft deleting the group and user records. but I am not able to achieve the same for the join table records. **The records in the join table gets hard deleted from the  table which I want to prevent.**\r\n\r\n**How can we prevent hard delete of the join table records?**\r\n\r\n\r\n\r\n\r\n","title":"JPA- ManyToMany relation the delete operation removes all entities from secondary table","body":"<p>I am using Spring data JPA and postgres database.\nI have two entities namely group and user. \nI have created repository using Spring's CrudRepository inteface. </p>\n\n<pre><code>@Entity\npublic class Group { \n@ManyToMany(cascade=CascadeType.ALL)\n@JoinTable(\n        name=\"group_user_bridge\", \n        joinColumns=@JoinColumn(name=\"joinTbl_groupid\", referencedColumnName=\"groupid\"), \n        inverseJoinColumns=@JoinColumn(name=\"joinTbl_agentid\", referencedColumnName=\"userid\")\n        )\nprivate Set&lt;User&gt; users;\n....\n}\n</code></pre>\n\n<p>class User</p>\n\n<pre><code>@Entity\npublic class User {\n\n@ManyToMany(mappedBy=\"users\",cascade=CascadeType.ALL,fetch=FetchType.EAGER)\nprivate List&lt;Group&gt; groups;\n.....\n }\n</code></pre>\n\n<p>Repository.save : Works fine. </p>\n\n<pre><code>  @Test\n  public void addGroup(){\n        Group hg = new Group();\n\n        User h1 = new User();\n        User h2 = new User();\n        some setters for user entity object\n\n        hg.setName(\"testGroup\");\n        ... some setters for groups\n\n        HashSet&lt;User&gt; groupMembers = new HashSet&lt;User&gt;();\n        groupMembers.add(h2);\n        groupMembers.add(h1);\n        hg.setGroupMembers(groupMembers);\n\n        hg = groupRepository.save(hg);\n</code></pre>\n\n<p>Question</p>\n\n<p>When I delete the group using groupRepository.delete(groupEntity), it deletes the group, the association of group <strong>and users</strong> from join table.<br>\nbut it also deletes the users from user table. In fact the <strong>users records should not get deleted</strong>. </p>\n\n<p><strong>How to prevent user deletion here?</strong></p>\n\n<p>I am using @SQLDelete annotation for soft deleting the group and user records. but I am not able to achieve the same for the join table records. <strong>The records in the join table gets hard deleted from the  table which I want to prevent.</strong></p>\n\n<p><strong>How can we prevent hard delete of the join table records?</strong></p>\n"},{"tags":["java","eclipse","selenium-webdriver"],"answers":[{"comments":[{"owner":{"account_id":29655838,"reputation":1,"user_id":22728622,"display_name":"proxyninoxy"},"score":0,"creation_date":1697310815,"post_id":77281624,"comment_id":136264993,"body_markdown":"I did the same thing but it is still not working","body":"I did the same thing but it is still not working"}],"tags":[],"owner":{"account_id":14102497,"reputation":23,"user_id":10187517,"display_name":"Mahbub shaun"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697121912,"creation_date":1697121912,"answer_id":77281624,"question_id":77280063,"body_markdown":"Right click the project --&gt; Select Propertise --&gt; Select JAVA BUILD PATH --&gt; Select &#39;Order &amp; Export&#39; tab --&gt; Select &#39;JRE System library&#39; then &#39;Apply&#39;. After all of that try to run the class[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Zeaf9.png","title":"JAR Selenium files not recognized and test class not running on eclipse","body":"<p>Right click the project --&gt; Select Propertise --&gt; Select JAVA BUILD PATH --&gt; Select 'Order &amp; Export' tab --&gt; Select 'JRE System library' then 'Apply'. After all of that try to run the class<a href=\"https://i.stack.imgur.com/Zeaf9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zeaf9.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29655838,"reputation":1,"user_id":22728622,"display_name":"proxyninoxy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697121912,"creation_date":1697109226,"question_id":77280063,"body_markdown":"I already downloaded the selenium folder for java and changed the build path of my project by adding the JAR files but the test is not running:\r\n\r\nThis is my code:\r\n````\r\npackage seleniumTest;\r\n\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\n\r\npublic class Test1 {\r\n    public static void main(String[] args) {\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Documents\\\\browserdrivers\\\\chromedriver.exe&quot;);\r\n        ChromeDriver driver = new ChromeDriver();\r\n        driver.get(&quot;https://www.google.com&quot;);\r\n    }\r\n}\r\n````\r\nand this is the error that I am getting:\r\n````\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/google/common/io/ByteStreams\r\n\tat org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.service.DriverService$Builder.parseLogOutput(DriverService.java:472)\r\n\tat org.seleniumhq.selenium.chrome_driver/org.openqa.selenium.chrome.ChromeDriverService$Builder.loadSystemProperties(ChromeDriverService.java:257)\r\n\tat org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.service.DriverService$Builder.build(DriverService.java:495)\r\n\tat org.seleniumhq.selenium.chrome_driver/org.openqa.selenium.chrome.ChromeDriverService.createDefaultService(ChromeDriverService.java:137)\r\n\tat org.seleniumhq.selenium.chrome_driver/org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:51)\r\n\tat seleniumTest/seleniumTest.Test1.main(Test1.java:8)\r\nCaused by: java.lang.ClassNotFoundException: com.google.common.io.ByteStreams\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n\t... 6 more\r\n````\r\n\r\n\r\nThrough this code google chrome should have opened","title":"JAR Selenium files not recognized and test class not running on eclipse","body":"<p>I already downloaded the selenium folder for java and changed the build path of my project by adding the JAR files but the test is not running:</p>\n<p>This is my code:</p>\n<pre><code>package seleniumTest;\n\nimport org.openqa.selenium.chrome.ChromeDriver;\n\npublic class Test1 {\n    public static void main(String[] args) {\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Documents\\\\browserdrivers\\\\chromedriver.exe&quot;);\n        ChromeDriver driver = new ChromeDriver();\n        driver.get(&quot;https://www.google.com&quot;);\n    }\n}\n</code></pre>\n<p>and this is the error that I am getting:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/google/common/io/ByteStreams\n    at org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.service.DriverService$Builder.parseLogOutput(DriverService.java:472)\n    at org.seleniumhq.selenium.chrome_driver/org.openqa.selenium.chrome.ChromeDriverService$Builder.loadSystemProperties(ChromeDriverService.java:257)\n    at org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.service.DriverService$Builder.build(DriverService.java:495)\n    at org.seleniumhq.selenium.chrome_driver/org.openqa.selenium.chrome.ChromeDriverService.createDefaultService(ChromeDriverService.java:137)\n    at org.seleniumhq.selenium.chrome_driver/org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:51)\n    at seleniumTest/seleniumTest.Test1.main(Test1.java:8)\nCaused by: java.lang.ClassNotFoundException: com.google.common.io.ByteStreams\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    ... 6 more\n</code></pre>\n<p>Through this code google chrome should have opened</p>\n"},{"tags":["java","image","file","io"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1697122375,"post_id":77281595,"comment_id":136242620,"body_markdown":"At a certain point you can compress stuff any further, unless you reduce quality. And even then there are lower limits.","body":"At a certain point you can compress stuff any further, unless you reduce quality. And even then there are lower limits."},{"owner":{"account_id":15168430,"reputation":173,"user_id":10945276,"display_name":"roediGERhard"},"score":0,"creation_date":1697122475,"post_id":77281595,"comment_id":136242657,"body_markdown":"it is funny that this code even properly exits as I would expect it to never leave the loop when the image is not &quot;compressible&quot; anymore.","body":"it is funny that this code even properly exits as I would expect it to never leave the loop when the image is not &quot;compressible&quot; anymore."}],"owner":{"account_id":29369550,"reputation":79,"user_id":22502444,"display_name":"KripDo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1697121675,"creation_date":1697121675,"question_id":77281595,"body_markdown":"I need to compress an image to 100 kB so that I can upload it to Active Directory. I wrote this code, but it does not work with all image sizes. At some iteration of the loop, it simply leaves the same image size.\r\n\r\n    private static byte[] compressImage(byte[] originalImage) throws IOException {\r\n        ByteArrayInputStream originalImageStream = new ByteArrayInputStream(originalImage);\r\n        ByteArrayOutputStream compressedImageStream = new ByteArrayOutputStream();\r\n\r\n        Thumbnails.of(originalImageStream)\r\n                .scale(1)\r\n                .outputQuality(COMPRESSION_QUALITY)\r\n                .toOutputStream(compressedImageStream);\r\n\r\n        byte[] compressedImageBytes = compressedImageStream.toByteArray();\r\n        if (compressedImageBytes.length &lt;= MAX_SIZE_IN_BYTES) {\r\n            return compressedImageBytes;\r\n        }\r\n        return compressImage(compressedImageBytes);\r\n    }\r\n\r\nI tried to write in pure Java, the same problem arose","title":"Compress image to 100 KB","body":"<p>I need to compress an image to 100 kB so that I can upload it to Active Directory. I wrote this code, but it does not work with all image sizes. At some iteration of the loop, it simply leaves the same image size.</p>\n<pre><code>private static byte[] compressImage(byte[] originalImage) throws IOException {\n    ByteArrayInputStream originalImageStream = new ByteArrayInputStream(originalImage);\n    ByteArrayOutputStream compressedImageStream = new ByteArrayOutputStream();\n\n    Thumbnails.of(originalImageStream)\n            .scale(1)\n            .outputQuality(COMPRESSION_QUALITY)\n            .toOutputStream(compressedImageStream);\n\n    byte[] compressedImageBytes = compressedImageStream.toByteArray();\n    if (compressedImageBytes.length &lt;= MAX_SIZE_IN_BYTES) {\n        return compressedImageBytes;\n    }\n    return compressImage(compressedImageBytes);\n}\n</code></pre>\n<p>I tried to write in pure Java, the same problem arose</p>\n"},{"tags":["java","xml","applet"],"answers":[{"tags":[],"owner":{"account_id":246,"reputation":107903,"user_id":304,"accept_rate":40,"display_name":"McDowell"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1274008329,"creation_date":1274008329,"answer_id":2843481,"question_id":2843134,"body_markdown":"If all you are doing is calling `DocumentBuilderFactory.newInstance();` then this should not cause an error. The posts you link to are not relevant.\r\n\r\n`javax.xml.parsers.FactoryConfigurationError: Provider &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt; not found`\r\n\r\nThis suggests some weird configuration error/bug. The provider should (I think) be the factory class name of the JAXP implementation. Check that you aren&#39;t doing something strange like setting the `javax.xml.parsers.DocumentBuilderFactory` system property or have an invalid `META-INF/services/javax.xml.parsers.DocumentBuilderFactory` file on your Applet classpath.","title":"Create xml document in java applet","body":"<p>If all you are doing is calling <code>DocumentBuilderFactory.newInstance();</code> then this should not cause an error. The posts you link to are not relevant.</p>\n\n<p><code>javax.xml.parsers.FactoryConfigurationError: Provider &lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"&gt; not found</code></p>\n\n<p>This suggests some weird configuration error/bug. The provider should (I think) be the factory class name of the JAXP implementation. Check that you aren't doing something strange like setting the <code>javax.xml.parsers.DocumentBuilderFactory</code> system property or have an invalid <code>META-INF/services/javax.xml.parsers.DocumentBuilderFactory</code> file on your Applet classpath.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1686115758,"post_id":76417859,"comment_id":134753106,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/76417859/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28538177,"reputation":7,"user_id":21844603,"display_name":"BuchuleSidondi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697121525,"creation_date":1686079819,"answer_id":76417859,"question_id":2843134,"body_markdown":"        JAVA FX SERVER\r\n        \r\n        THREAD   \r\n        \r\n        public class ServerThread extends Thread {\r\n            // Server related fields.\r\n            private ObjectOutputStream oos;\r\n            private ObjectInputStream ois;\r\n            private ServerSocket server;\r\n            private Socket connection;\r\n            private int counter = 1;\r\n            private Displayer&lt;String&gt; displayer;\r\n            private Runnable onConnected;\r\n            private Runnable onDisconnected;\r\n        \r\n            public ServerThread(Displayer&lt;String&gt; displayer, Runnable onConnected, Runnable onDisconnected) {\r\n                this.displayer = displayer;\r\n                this.onConnected = onConnected;\r\n                this.onDisconnected = onDisconnected;\r\n            }\r\n        \r\n            protected void display(String message) {\r\n                if(displayer == null) return;\r\n        \r\n                displayer.display(message);\r\n            }\r\n        \r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    // Step 1: Create a ServerSocket.\r\n                    server = new ServerSocket(5001, 100);\r\n                    display(&quot;Started server: &quot; + InetAddress.getLocalHost().getHostAddress());\r\n        \r\n                    while (true) {\r\n                        // Step 2: Wait for a connection.\r\n                        waitForConnection();\r\n        \r\n                        // Step 3: Get input and output streams.\r\n                        getStreams();\r\n        \r\n                        // Step 4: Process connection.\r\n                        readMessages();\r\n        \r\n                        // Step 5: Close connection.\r\n                        closeConnection();\r\n        \r\n                        ++counter;\r\n                    }\r\n                } catch (\r\n                        EOFException eofException) {\r\n                    display(&quot;Client terminated connection&quot;);\r\n        \r\n                } catch (IOException ioException) {\r\n                    ioException.printStackTrace();\r\n                }\r\n            }\r\n        \r\n            // Send message to client\r\n            public void sendMessage(String message) {\r\n                try {\r\n                    message = &quot;SERVER&gt;&gt;&gt; &quot; + message;\r\n        \r\n                    // Send String OBJECT to client.\r\n                    oos.writeObject(message);\r\n                    // Flush to ensure that data is pushed through stream to client.\r\n                    oos.flush();\r\n        \r\n                    display(message);\r\n        \r\n                } catch (IOException ioException) {\r\n                    display(&quot;Error writing object. &quot; + ioException.getMessage());\r\n                }\r\n            }\r\n        \r\n            // Wait for connection to arrive, then display connection info\r\n            private void waitForConnection() throws IOException {\r\n                display(&quot;Waiting for connection...&quot;);\r\n        \r\n                connection = server.accept();\r\n        \r\n                display(&quot;Connection #&quot; + counter + &quot; received from: &quot;\r\n                        + connection.getInetAddress().getHostName());\r\n            }\r\n        \r\n            // Get streams to send and receive data\r\n            private void getStreams() throws IOException {\r\n                oos = new ObjectOutputStream(connection.getOutputStream());\r\n                oos.flush();\r\n        \r\n                ois = new ObjectInputStream(connection.getInputStream());\r\n        \r\n                display(&quot;Got I/O streams.&quot;);\r\n            }\r\n        \r\n            // Process connection with client\r\n            private void readMessages() throws IOException {\r\n                // Send initial message to client.\r\n                String message = &quot;Connection successful. Client #&quot; + counter;\r\n                sendMessage(message);\r\n        \r\n                // Connected\r\n                if(onConnected != null) onConnected.run();\r\n        \r\n                do {\r\n                    try {\r\n                        message = (String) ois.readObject();\r\n                        display(message);\r\n        \r\n                    } catch (ClassNotFoundException classNotFoundException) {\r\n                        display(&quot;Unknown object type received.&quot;);\r\n                    }\r\n        \r\n                } while (!message.equals(&quot;CLIENT&gt;&gt;&gt; TERMINATE&quot;));\r\n            }\r\n        \r\n            // close streams and socket\r\n            private void closeConnection() throws IOException {\r\n                display(&quot;User terminated connection.&quot;);\r\n                oos.close();\r\n                ois.close();\r\n                connection.close();\r\n        \r\n                if(onDisconnected != null) onDisconnected.run();\r\n            }\r\n        }\r\n        MAIN JAVAFX\r\n        \r\n        public class Server2JFX extends Application {\r\n            // Cached references to controls.\r\n            private TextField txtMessage;\r\n            private ObservableList&lt;String&gt; messages\r\n                    = FXCollections.observableArrayList(new ArrayList&lt;String&gt;());\r\n        \r\n            // Thread on which server runs.\r\n            private ServerThread serverThread;\r\n        \r\n            private Scene createScene() {\r\n                // Main container.\r\n                BorderPane bp = new BorderPane();\r\n        \r\n                // The area where the user will enter messages to be\r\n                // sent from the server to the client.\r\n                txtMessage = new TextField();\r\n                // Event handler used to send message to client.\r\n                txtMessage.setOnKeyPressed(event -&gt; {\r\n                    // If not the enter key, do nothing.\r\n                    if(event.getCode() != KeyCode.ENTER) return;\r\n        \r\n                    // Send message to client.\r\n                    String message = txtMessage.getText();\r\n                    new Thread(() -&gt; serverThread.sendMessage(message)).start();\r\n        \r\n                    // Clear text field.\r\n                    txtMessage.setText(&quot;&quot;);\r\n                });\r\n        \r\n                // Area to store messages received.\r\n                ListView&lt;String&gt; lbxMessages = new ListView&lt;&gt;();\r\n                lbxMessages.setItems(messages);\r\n        \r\n                // Add controls to container.\r\n                bp.setTop(txtMessage);\r\n                bp.setCenter(lbxMessages);\r\n        \r\n                // Return a new scene graph.\r\n                return new Scene(bp);\r\n            }\r\n        \r\n            @Override\r\n            public void start(Stage primaryStage) throws Exception {\r\n                // Create scene.\r\n                Scene scene = createScene();\r\n        \r\n                // Set stage details.\r\n                primaryStage.setTitle(&quot;Server 2 (JavaFX front-end)&quot;);\r\n                primaryStage.setWidth(300);\r\n                primaryStage.setMinHeight(500);\r\n                primaryStage.setScene(scene);\r\n        \r\n                // Show stage.\r\n                primaryStage.show();\r\n        \r\n                // Create the server thread.\r\n                serverThread = new ServerThread(\r\n                        message -&gt; Platform.runLater(() -&gt; messages.add(message)), // How to display message.\r\n                        () -&gt; Platform.runLater(() -&gt; txtMessage.setEditable(true)), // What to do when connected (run on UI thread).\r\n                        () -&gt; Platform.runLater(() -&gt; txtMessage.setEditable(false)) // What to do when connected (run on UI thread).\r\n                );\r\n                // Start running the server.\r\n                serverThread.start();\r\n            }\r\n        \r\n            public static void main(String[] args) {\r\n                launch(args);\r\n            }\r\n        }\r\n    \r\n    package nmu.wrpv302.l08;\r\n    \r\n    @FunctionalInterface\r\n    public interface Displayer&lt;T&gt; {\r\n        void display(T value);\r\n    }\r\n\r\n","title":"Create xml document in java applet","body":"<pre><code>    JAVA FX SERVER\n    \n    THREAD   \n    \n    public class ServerThread extends Thread {\n        // Server related fields.\n        private ObjectOutputStream oos;\n        private ObjectInputStream ois;\n        private ServerSocket server;\n        private Socket connection;\n        private int counter = 1;\n        private Displayer&lt;String&gt; displayer;\n        private Runnable onConnected;\n        private Runnable onDisconnected;\n    \n        public ServerThread(Displayer&lt;String&gt; displayer, Runnable onConnected, Runnable onDisconnected) {\n            this.displayer = displayer;\n            this.onConnected = onConnected;\n            this.onDisconnected = onDisconnected;\n        }\n    \n        protected void display(String message) {\n            if(displayer == null) return;\n    \n            displayer.display(message);\n        }\n    \n        @Override\n        public void run() {\n            try {\n                // Step 1: Create a ServerSocket.\n                server = new ServerSocket(5001, 100);\n                display(&quot;Started server: &quot; + InetAddress.getLocalHost().getHostAddress());\n    \n                while (true) {\n                    // Step 2: Wait for a connection.\n                    waitForConnection();\n    \n                    // Step 3: Get input and output streams.\n                    getStreams();\n    \n                    // Step 4: Process connection.\n                    readMessages();\n    \n                    // Step 5: Close connection.\n                    closeConnection();\n    \n                    ++counter;\n                }\n            } catch (\n                    EOFException eofException) {\n                display(&quot;Client terminated connection&quot;);\n    \n            } catch (IOException ioException) {\n                ioException.printStackTrace();\n            }\n        }\n    \n        // Send message to client\n        public void sendMessage(String message) {\n            try {\n                message = &quot;SERVER&gt;&gt;&gt; &quot; + message;\n    \n                // Send String OBJECT to client.\n                oos.writeObject(message);\n                // Flush to ensure that data is pushed through stream to client.\n                oos.flush();\n    \n                display(message);\n    \n            } catch (IOException ioException) {\n                display(&quot;Error writing object. &quot; + ioException.getMessage());\n            }\n        }\n    \n        // Wait for connection to arrive, then display connection info\n        private void waitForConnection() throws IOException {\n            display(&quot;Waiting for connection...&quot;);\n    \n            connection = server.accept();\n    \n            display(&quot;Connection #&quot; + counter + &quot; received from: &quot;\n                    + connection.getInetAddress().getHostName());\n        }\n    \n        // Get streams to send and receive data\n        private void getStreams() throws IOException {\n            oos = new ObjectOutputStream(connection.getOutputStream());\n            oos.flush();\n    \n            ois = new ObjectInputStream(connection.getInputStream());\n    \n            display(&quot;Got I/O streams.&quot;);\n        }\n    \n        // Process connection with client\n        private void readMessages() throws IOException {\n            // Send initial message to client.\n            String message = &quot;Connection successful. Client #&quot; + counter;\n            sendMessage(message);\n    \n            // Connected\n            if(onConnected != null) onConnected.run();\n    \n            do {\n                try {\n                    message = (String) ois.readObject();\n                    display(message);\n    \n                } catch (ClassNotFoundException classNotFoundException) {\n                    display(&quot;Unknown object type received.&quot;);\n                }\n    \n            } while (!message.equals(&quot;CLIENT&gt;&gt;&gt; TERMINATE&quot;));\n        }\n    \n        // close streams and socket\n        private void closeConnection() throws IOException {\n            display(&quot;User terminated connection.&quot;);\n            oos.close();\n            ois.close();\n            connection.close();\n    \n            if(onDisconnected != null) onDisconnected.run();\n        }\n    }\n    MAIN JAVAFX\n    \n    public class Server2JFX extends Application {\n        // Cached references to controls.\n        private TextField txtMessage;\n        private ObservableList&lt;String&gt; messages\n                = FXCollections.observableArrayList(new ArrayList&lt;String&gt;());\n    \n        // Thread on which server runs.\n        private ServerThread serverThread;\n    \n        private Scene createScene() {\n            // Main container.\n            BorderPane bp = new BorderPane();\n    \n            // The area where the user will enter messages to be\n            // sent from the server to the client.\n            txtMessage = new TextField();\n            // Event handler used to send message to client.\n            txtMessage.setOnKeyPressed(event -&gt; {\n                // If not the enter key, do nothing.\n                if(event.getCode() != KeyCode.ENTER) return;\n    \n                // Send message to client.\n                String message = txtMessage.getText();\n                new Thread(() -&gt; serverThread.sendMessage(message)).start();\n    \n                // Clear text field.\n                txtMessage.setText(&quot;&quot;);\n            });\n    \n            // Area to store messages received.\n            ListView&lt;String&gt; lbxMessages = new ListView&lt;&gt;();\n            lbxMessages.setItems(messages);\n    \n            // Add controls to container.\n            bp.setTop(txtMessage);\n            bp.setCenter(lbxMessages);\n    \n            // Return a new scene graph.\n            return new Scene(bp);\n        }\n    \n        @Override\n        public void start(Stage primaryStage) throws Exception {\n            // Create scene.\n            Scene scene = createScene();\n    \n            // Set stage details.\n            primaryStage.setTitle(&quot;Server 2 (JavaFX front-end)&quot;);\n            primaryStage.setWidth(300);\n            primaryStage.setMinHeight(500);\n            primaryStage.setScene(scene);\n    \n            // Show stage.\n            primaryStage.show();\n    \n            // Create the server thread.\n            serverThread = new ServerThread(\n                    message -&gt; Platform.runLater(() -&gt; messages.add(message)), // How to display message.\n                    () -&gt; Platform.runLater(() -&gt; txtMessage.setEditable(true)), // What to do when connected (run on UI thread).\n                    () -&gt; Platform.runLater(() -&gt; txtMessage.setEditable(false)) // What to do when connected (run on UI thread).\n            );\n            // Start running the server.\n            serverThread.start();\n        }\n    \n        public static void main(String[] args) {\n            launch(args);\n        }\n    }\n\npackage nmu.wrpv302.l08;\n\n@FunctionalInterface\npublic interface Displayer&lt;T&gt; {\n    void display(T value);\n}\n</code></pre>\n"}],"owner":{"account_id":33669,"reputation":3529,"user_id":94411,"accept_rate":75,"display_name":"zproxy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697121525,"creation_date":1274000731,"question_id":2843134,"body_markdown":"If I try to create a new xml document in a java applet by this code:\r\n\r\nhttp://java.sun.com/j2se/1.4.2/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#newInstance()\r\n\r\n    DocumentBuilderFactory.newInstance();\r\n\r\nI will get this error:\r\n\r\n\r\n    Java Plug-in 1.6.0_19\r\n    Using JRE version 1.6.0_19-b04 Java HotSpot(TM) Client VM\r\n        \r\n    javax.xml.parsers.FactoryConfigurationError: Provider &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt; not found\r\n        \tat javax.xml.parsers.DocumentBuilderFactory.newInstance(Unknown Source)\r\n\r\nI do not care about DTD&#39;s. \r\n\r\n1. Why is it looking for it?\r\n2. How am I supposed to **create a xml document in java applets**?\r\n3. How can I make it work?\r\n\r\nThe enclosing html document looks like this:\r\n\r\n    &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    &lt;title&gt;Loading...&lt;/title&gt;\r\n    &lt;/head&gt;\r\n\r\n[Can some comment this thread][1]?\r\n\r\n&gt; The problem was with the entity resolver, which points to \r\n&gt; the w3c.org web site. The access to the reference DTDs on \r\n&gt; this site has been restricted for application use. The \r\n&gt; solution was to implement my own entity resolver.\r\n\r\nRelated:\r\n\r\n1. http://forums.sun.com/thread.jspa?threadID=515055\r\n2. https://stackoverflow.com/questions/1016286/org-apache-xerces-jaxp-saxparserfactoryimpl-not-found-when-importing-gears-api-in\r\n3. http://java.itags.org/java-desktop/4839/\r\n\r\n\r\n  [1]: http://forums.sun.com/thread.jspa?threadID=5428124","title":"Create xml document in java applet","body":"<p>If I try to create a new xml document in a java applet by this code:</p>\n\n<p><a href=\"http://java.sun.com/j2se/1.4.2/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#newInstance()\" rel=\"nofollow noreferrer\">http://java.sun.com/j2se/1.4.2/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#newInstance()</a></p>\n\n<pre><code>DocumentBuilderFactory.newInstance();\n</code></pre>\n\n<p>I will get this error:</p>\n\n<pre><code>Java Plug-in 1.6.0_19\nUsing JRE version 1.6.0_19-b04 Java HotSpot(TM) Client VM\n\njavax.xml.parsers.FactoryConfigurationError: Provider &lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"&gt; not found\n        at javax.xml.parsers.DocumentBuilderFactory.newInstance(Unknown Source)\n</code></pre>\n\n<p>I do not care about DTD's. </p>\n\n<ol>\n<li>Why is it looking for it?</li>\n<li>How am I supposed to <strong>create a xml document in java applets</strong>?</li>\n<li>How can I make it work?</li>\n</ol>\n\n<p>The enclosing html document looks like this:</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Loading...&lt;/title&gt;\n&lt;/head&gt;\n</code></pre>\n\n<p><a href=\"http://forums.sun.com/thread.jspa?threadID=5428124\" rel=\"nofollow noreferrer\">Can some comment this thread</a>?</p>\n\n<blockquote>\n  <p>The problem was with the entity resolver, which points to \n  the w3c.org web site. The access to the reference DTDs on \n  this site has been restricted for application use. The \n  solution was to implement my own entity resolver.</p>\n</blockquote>\n\n<p>Related:</p>\n\n<ol>\n<li><a href=\"http://forums.sun.com/thread.jspa?threadID=515055\" rel=\"nofollow noreferrer\">http://forums.sun.com/thread.jspa?threadID=515055</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1016286/org-apache-xerces-jaxp-saxparserfactoryimpl-not-found-when-importing-gears-api-in\">org.apache.xerces.jaxp.SAXParserFactoryImpl not found when importing Gears API in GWT</a></li>\n<li><a href=\"http://java.itags.org/java-desktop/4839/\" rel=\"nofollow noreferrer\">http://java.itags.org/java-desktop/4839/</a></li>\n</ol>\n"},{"tags":["java","intellij-idea","gradle","integration-testing"],"comments":[{"owner":{"account_id":21279,"reputation":20918,"user_id":51577,"accept_rate":62,"display_name":"tddmonkey"},"score":3,"creation_date":1486374615,"post_id":42064377,"comment_id":71300969,"body_markdown":"How did you regenerate your IDEA files after making changes? This should work (and I&#39;ve tested it locally) - try running `$ ./gradlew cleanIdea idea`","body":"How did you regenerate your IDEA files after making changes? This should work (and I&#39;ve tested it locally) - try running <code>$ .&#47;gradlew cleanIdea idea</code>"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1486375318,"post_id":42064377,"comment_id":71301420,"body_markdown":"I&#39;d rather have a solution where Gradle does not generate my Idea config, since there are also non-Gradle projects in the same repo.","body":"I&#39;d rather have a solution where Gradle does not generate my Idea config, since there are also non-Gradle projects in the same repo."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1486480614,"post_id":42064377,"comment_id":71357132,"body_markdown":"@tddmonkey Your solution does generate the correct `.iml` files, but IntelliJ isn&#39;t using them. Do you know how I get it to do that? The Java project is a subfolder of another, and that one is the main project with a `.idea` folder for config.","body":"@tddmonkey Your solution does generate the correct <code>.iml</code> files, but IntelliJ isn&#39;t using them. Do you know how I get it to do that? The Java project is a subfolder of another, and that one is the main project with a <code>.idea</code> folder for config."},{"owner":{"account_id":21279,"reputation":20918,"user_id":51577,"accept_rate":62,"display_name":"tddmonkey"},"score":0,"creation_date":1486481315,"post_id":42064377,"comment_id":71357660,"body_markdown":"How are you opening it? I generally do `$ ./gradlew cleanIdea idea; open &lt;name_of_project&gt;.ipr`","body":"How are you opening it? I generally do <code>$ .&#47;gradlew cleanIdea idea; open &lt;name_of_project&gt;.ipr</code>"}],"answers":[{"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":6,"creation_date":1503315886,"post_id":45791867,"comment_id":78550032,"body_markdown":"Nope, this doesn&#39;t change anything.","body":"Nope, this doesn&#39;t change anything."},{"owner":{"account_id":5929686,"reputation":6955,"user_id":4664558,"accept_rate":86,"display_name":"LazerBanana"},"score":0,"creation_date":1503316192,"post_id":45791867,"comment_id":78550232,"body_markdown":"@Jorn try changing it like I suggested in the edit, not sure about your `file()` but I tend to specify the whole path to the source. As well do you use Idea plugin in Gradle or you use the Gradle integration in IntelliJ IDE?","body":"@Jorn try changing it like I suggested in the edit, not sure about your <code>file()</code> but I tend to specify the whole path to the source. As well do you use Idea plugin in Gradle or you use the Gradle integration in IntelliJ IDE?"},{"owner":{"account_id":5929686,"reputation":6955,"user_id":4664558,"accept_rate":86,"display_name":"LazerBanana"},"score":1,"creation_date":1554891897,"post_id":45791867,"comment_id":97914879,"body_markdown":"@bharal, it does work for others and me in that time so please elaborate, using a gradle plugin with IntelliJ gradle plugin at the same time creates a mix and confusion in few scenarios. Saying `it doesn&#39;t work` doesn&#39;t seems like a programmer approach.","body":"@bharal, it does work for others and me in that time so please elaborate, using a gradle plugin with IntelliJ gradle plugin at the same time creates a mix and confusion in few scenarios. Saying <code>it doesn&#39;t work</code> doesn&#39;t seems like a programmer approach."},{"owner":{"account_id":1059510,"reputation":15581,"user_id":1061426,"accept_rate":69,"display_name":"bharal"},"score":0,"creation_date":1554904607,"post_id":45791867,"comment_id":97922566,"body_markdown":"@LazerBanana idk what you want me to say - this does not work, intellij marks the folder as src, not test src. i&#39;m using the gradle idea plugin - `apply plugin: &#39;idea&#39;` and intellij has the gradle plugin.","body":"@LazerBanana idk what you want me to say - this does not work, intellij marks the folder as src, not test src. i&#39;m using the gradle idea plugin - <code>apply plugin: &#39;idea&#39;</code> and intellij has the gradle plugin."},{"owner":{"account_id":5929686,"reputation":6955,"user_id":4664558,"accept_rate":86,"display_name":"LazerBanana"},"score":0,"creation_date":1554907410,"post_id":45791867,"comment_id":97924268,"body_markdown":"@bharal so this will mean your IntelliJ plugin will probably override the custom iml changed made by the idea gradle plugin. If you use both that&#39;s why it will not work. But im ok with your -1 ;) i will add that explanation for others to see. Thanks","body":"@bharal so this will mean your IntelliJ plugin will probably override the custom iml changed made by the idea gradle plugin. If you use both that&#39;s why it will not work. But im ok with your -1 ;) i will add that explanation for others to see. Thanks"},{"owner":{"account_id":3190388,"reputation":1878,"user_id":2694806,"display_name":"Paul Schwarz"},"score":0,"creation_date":1612618105,"post_id":45791867,"comment_id":116825639,"body_markdown":"It works! \nEveryone couple of weeks I revisit this answer, longing for the day the solution works.\nToday is that day. I noticed the `-=` for `sourceDirs`. So you&#39;re first *removing* &quot;integrationTest&quot; from &quot;sourceDirs&quot; and then adding it to &quot;testSourceDirs&quot;.\nI never really noticed the `-=` before. I guess this is one of those cases where copy/paste is actually the right way to do it.","body":"It works!  Everyone couple of weeks I revisit this answer, longing for the day the solution works. Today is that day. I noticed the <code>-=</code> for <code>sourceDirs</code>. So you&#39;re first <i>removing</i> &quot;integrationTest&quot; from &quot;sourceDirs&quot; and then adding it to &quot;testSourceDirs&quot;. I never really noticed the <code>-=</code> before. I guess this is one of those cases where copy/paste is actually the right way to do it."},{"owner":{"account_id":9346423,"reputation":1452,"user_id":6937584,"display_name":"cdalxndr"},"score":0,"creation_date":1623870769,"post_id":45791867,"comment_id":120204305,"body_markdown":"It doesn&#39;t work if you have a `annotationProcessor` dependency.","body":"It doesn&#39;t work if you have a <code>annotationProcessor</code> dependency."}],"tags":[],"owner":{"account_id":5929686,"reputation":6955,"user_id":4664558,"accept_rate":86,"display_name":"LazerBanana"},"comment_count":7,"down_vote_count":2,"up_vote_count":17,"is_accepted":false,"score":15,"last_activity_date":1554907511,"creation_date":1503301978,"answer_id":45791867,"question_id":42064377,"body_markdown":"You would need to make sure test source  is the only source for this package then\r\n\r\n    idea {\r\n        module {\r\n            sourceDirs -= file(&#39;src/integrationTest/java&#39;)\r\n            testSourceDirs += file(&#39;src/integrationTest/java&#39;)\r\n        }\r\n    }\r\n\r\nand then you would need to `gradle cleanIdea idea` to recreate the IntelliJ files.\r\n\r\n**be sure that you&#39;re not using IDE gradle integration when using idea plugin from gradle, custom changes to iml files will most likely clash with the IDE if the integration is on**\r\n\r\n    sourceSets {\r\n        integrationTest {\r\n            java {\r\n                compileClasspath += main.output + test.output\r\n                runtimeClasspath += main.output + test.output\r\n                srcDir &quot;$projectDir/src/integrationTest/java&quot;\r\n            }\r\n            resources.srcDir &quot;$projectDir/src/integrationTest/resources&quot;\r\n        }\r\n    }\r\n\r\n**EDIT: Gradle 4.7 Idea plugin correctly marks sources now.**\r\n\r\n","title":"Mark Gradle source folder as test source in IntelliJ","body":"<p>You would need to make sure test source  is the only source for this package then</p>\n\n<pre><code>idea {\n    module {\n        sourceDirs -= file('src/integrationTest/java')\n        testSourceDirs += file('src/integrationTest/java')\n    }\n}\n</code></pre>\n\n<p>and then you would need to <code>gradle cleanIdea idea</code> to recreate the IntelliJ files.</p>\n\n<p><strong>be sure that you're not using IDE gradle integration when using idea plugin from gradle, custom changes to iml files will most likely clash with the IDE if the integration is on</strong></p>\n\n<pre><code>sourceSets {\n    integrationTest {\n        java {\n            compileClasspath += main.output + test.output\n            runtimeClasspath += main.output + test.output\n            srcDir \"$projectDir/src/integrationTest/java\"\n        }\n        resources.srcDir \"$projectDir/src/integrationTest/resources\"\n    }\n}\n</code></pre>\n\n<p><strong>EDIT: Gradle 4.7 Idea plugin correctly marks sources now.</strong></p>\n"},{"comments":[{"owner":{"account_id":1059510,"reputation":15581,"user_id":1061426,"accept_rate":69,"display_name":"bharal"},"score":4,"creation_date":1554785886,"post_id":49281550,"comment_id":97868052,"body_markdown":"this does not work. shame nobody from idea can actually help, huh?","body":"this does not work. shame nobody from idea can actually help, huh?"},{"owner":{"account_id":5929686,"reputation":6955,"user_id":4664558,"accept_rate":86,"display_name":"LazerBanana"},"score":0,"creation_date":1554970573,"post_id":49281550,"comment_id":97947202,"body_markdown":"it does but like I said your IntelliJ gradle integration most likely takes over.","body":"it does but like I said your IntelliJ gradle integration most likely takes over."},{"owner":{"account_id":9346423,"reputation":1452,"user_id":6937584,"display_name":"cdalxndr"},"score":0,"creation_date":1623870747,"post_id":49281550,"comment_id":120204292,"body_markdown":"It doesn&#39;t work if you have a `annotationProcessor` dependency.","body":"It doesn&#39;t work if you have a <code>annotationProcessor</code> dependency."},{"owner":{"account_id":4185076,"reputation":2839,"user_id":3429015,"display_name":"Danon"},"score":0,"creation_date":1629820208,"post_id":49281550,"comment_id":121785024,"body_markdown":"Works well for me. If it doesn&#39;t work for you, move your `idea {module` higher in the file, so it gets run first.","body":"Works well for me. If it doesn&#39;t work for you, move your <code>idea {module</code> higher in the file, so it gets run first."}],"tags":[],"owner":{"account_id":539660,"reputation":15051,"user_id":907576,"accept_rate":62,"display_name":"radistao"},"comment_count":4,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1521040884,"creation_date":1521040884,"answer_id":49281550,"question_id":42064377,"body_markdown":"From JetBrains issue:\r\n\r\nhttps://youtrack.jetbrains.com/issue/IDEA-151925#comment=27-2355076\r\n\r\n    apply plugin: &#39;java&#39;\r\n    sourceSets {\r\n      integrationTest\r\n    }\r\n    apply plugin: &#39;idea&#39;\r\n    idea {\r\n      module {\r\n        testSourceDirs += project.sourceSets.integrationTest.java.srcDirs\r\n        testSourceDirs += project.sourceSets.integrationTest.resources.srcDirs\r\n      }\r\n    }","title":"Mark Gradle source folder as test source in IntelliJ","body":"<p>From JetBrains issue:</p>\n\n<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-151925#comment=27-2355076\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-151925#comment=27-2355076</a></p>\n\n<pre><code>apply plugin: 'java'\nsourceSets {\n  integrationTest\n}\napply plugin: 'idea'\nidea {\n  module {\n    testSourceDirs += project.sourceSets.integrationTest.java.srcDirs\n    testSourceDirs += project.sourceSets.integrationTest.resources.srcDirs\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":39078,"reputation":2247,"user_id":112637,"accept_rate":70,"display_name":"Ar3s"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1644579684,"creation_date":1644510001,"answer_id":71068601,"question_id":42064377,"body_markdown":"I know this is old but facing the same problem I found buried somewhere in [this jetbrains ticket][1] something hinting that your test `sourceSet` should be declared in gradle like so :\r\n\r\n    sourceSets {\r\n        integrationTest {\r\n            test{ //&lt;- note this, this is what flags it right for intelliJ to process it correctly\r\n                java {\r\n                    compileClasspath += main.output + test.output\r\n                    runtimeClasspath += main.output + test.output\r\n                    srcDir file(&#39;src/integrationTest/java&#39;)\r\n                    // note that you&#39;ll need to specify the outputDir for it to work\r\n                    // I don&#39;t fully get the reasons for this (but I rarely do when it comes to gradle anyway)\r\n                    outputDir = file(&quot;build/classes/java/integrationTest&quot;)\r\n                }\r\n                resources {\r\n                    srcDir file(&#39;src/integrationTest/resources&#39;)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nDoing so made intelliJ instantly recognize my integration-test folder like the test-source it is ...\r\n\r\n[Small rant] I could not find trace of the appropriate corresponding gradle doc and as often I find info on how it works from retro-engineering or scarce hints in this case trial/error+ IntelliJ youtrack ticket (which says a lot on how poorly gradle is documented in my view ...)\r\n\r\n\r\nNote that I am on\r\n - Intellij : IntelliJ IDEA 2021.3.2 *(Ultimate Edition)* Build #IU-213.6777.52\r\n - Gradle : 6.7.1\r\n\r\n  [1]: https://youtrack.jetbrains.com/issue/IDEA-165647","title":"Mark Gradle source folder as test source in IntelliJ","body":"<p>I know this is old but facing the same problem I found buried somewhere in <a href=\"https://youtrack.jetbrains.com/issue/IDEA-165647\" rel=\"nofollow noreferrer\">this jetbrains ticket</a> something hinting that your test <code>sourceSet</code> should be declared in gradle like so :</p>\n<pre><code>sourceSets {\n    integrationTest {\n        test{ //&lt;- note this, this is what flags it right for intelliJ to process it correctly\n            java {\n                compileClasspath += main.output + test.output\n                runtimeClasspath += main.output + test.output\n                srcDir file('src/integrationTest/java')\n                // note that you'll need to specify the outputDir for it to work\n                // I don't fully get the reasons for this (but I rarely do when it comes to gradle anyway)\n                outputDir = file(&quot;build/classes/java/integrationTest&quot;)\n            }\n            resources {\n                srcDir file('src/integrationTest/resources')\n            }\n        }\n    }\n}\n</code></pre>\n<p>Doing so made intelliJ instantly recognize my integration-test folder like the test-source it is ...</p>\n<p>[Small rant] I could not find trace of the appropriate corresponding gradle doc and as often I find info on how it works from retro-engineering or scarce hints in this case trial/error+ IntelliJ youtrack ticket (which says a lot on how poorly gradle is documented in my view ...)</p>\n<p>Note that I am on</p>\n<ul>\n<li>Intellij : IntelliJ IDEA 2021.3.2 <em>(Ultimate Edition)</em> Build #IU-213.6777.52</li>\n<li>Gradle : 6.7.1</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1697124169,"post_id":77281494,"comment_id":136243120,"body_markdown":"Interesting! I&#39;ll try to remember this the next time I need it","body":"Interesting! I&#39;ll try to remember this the next time I need it"}],"tags":[],"owner":{"account_id":6830764,"reputation":467,"user_id":5254851,"accept_rate":50,"display_name":"Radosław Panuszewski"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697121355,"creation_date":1697120944,"answer_id":77281494,"question_id":42064377,"body_markdown":"With Gradle 7.4+ and Kotlin DSL you can do it like that:\r\n\r\n```kotlin\r\nplugins {\r\n    `idea`\r\n}\r\n\r\nidea {\r\n    module {\r\n        testSources.from(sourceSets.integration.get().allSource.srcDirs)\r\n    }\r\n}\r\n```\r\n\r\nThe above example assumes that you use the [coditory/gradle-integration-test-plugin](https://github.com/coditory/gradle-integration-test-plugin) (which registers the `integration` source set):\r\n```kotlin\r\nplugins {\r\n    id(&quot;com.coditory.integration-test&quot;) version &quot;1.4.5&quot;\r\n}\r\n```\r\nBut should also work if you register your integration test source set in any other way. You may only need to change `sourceSets.integration` to `sourceSets.yourNameOfTheSourceSet`.","title":"Mark Gradle source folder as test source in IntelliJ","body":"<p>With Gradle 7.4+ and Kotlin DSL you can do it like that:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    `idea`\n}\n\nidea {\n    module {\n        testSources.from(sourceSets.integration.get().allSource.srcDirs)\n    }\n}\n</code></pre>\n<p>The above example assumes that you use the <a href=\"https://github.com/coditory/gradle-integration-test-plugin\" rel=\"nofollow noreferrer\">coditory/gradle-integration-test-plugin</a> (which registers the <code>integration</code> source set):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    id(&quot;com.coditory.integration-test&quot;) version &quot;1.4.5&quot;\n}\n</code></pre>\n<p>But should also work if you register your integration test source set in any other way. You may only need to change <code>sourceSets.integration</code> to <code>sourceSets.yourNameOfTheSourceSet</code>.</p>\n"}],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17482,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"answer_count":4,"score":25,"last_activity_date":1697121355,"creation_date":1486373519,"question_id":42064377,"body_markdown":"I have an integration test source folder set up in gradle like so:\r\n\r\n    subprojects {\r\n    \tapply plugin: &#39;java&#39;\r\n    \tapply plugin: &#39;idea&#39;\r\n    \r\n    \tsourceCompatibility = 1.8\r\n    \r\n    \tconfigurations {\r\n    \t\tintegrationTestCompile.extendsFrom testCompile\r\n    \t\tintegrationTestCompileOnly.extendsFrom integrationTestCompile\r\n    \t\tintegrationTestCompileOnly.extendsFrom testCompileOnly\r\n    \t\tintegrationTestRuntime.extendsFrom testRuntime\r\n    \t}\r\n    \r\n    \tsourceSets {\r\n    \t\tintegrationTest {\r\n    \t\t\tjava {\r\n    \t\t\t\tcompileClasspath += main.output + test.output\r\n    \t\t\t\truntimeClasspath += main.output + test.output\r\n    \t\t\t\tsrcDir file(&#39;src/integrationTest/java&#39;)\r\n    \t\t\t}\r\n    \t\t\tresources.srcDir file(&#39;src/integrationTest/resources&#39;)\r\n    \t\t}\r\n    \t}\r\n\r\n    \ttask integrationTest(type:Test) {\r\n    \t\ttestClassesDir = sourceSets.integrationTest.output.classesDir\r\n    \t\tclasspath = sourceSets.integrationTest.runtimeClasspath\r\n    \t\toutputs.upToDateWhen { false }\r\n    \t}\r\n    }\r\n\r\nFor executing the tests, this works perfectly well, but it causes problems with IntelliJ&#39;s inspections, which may change behavior for test code. IntelliJ does not recognize the source folder as test source.\r\n\r\nI tried adding them as such (inside `subprojects`):\r\n\r\n\r\n\tidea {\r\n\t\tmodule {\r\n\t\t\ttestSourceDirs += file(&#39;src/integrationTest/java&#39;)\r\n\t\t}\r\n\t}\r\n\r\nbut that did not help at all. I also tried manually marking them as test source (context menu -&gt; mark directory as -&gt; test sources root), but IntelliJ quickly overrides that back to normal source root.\r\n\r\nHow do I configure this correctly in Gradle?\r\n\r\nI&#39;m using IntelliJ 2016.1.3 and Gradle 2.14.1 on Ubuntu 16.04","title":"Mark Gradle source folder as test source in IntelliJ","body":"<p>I have an integration test source folder set up in gradle like so:</p>\n\n<pre><code>subprojects {\n    apply plugin: 'java'\n    apply plugin: 'idea'\n\n    sourceCompatibility = 1.8\n\n    configurations {\n        integrationTestCompile.extendsFrom testCompile\n        integrationTestCompileOnly.extendsFrom integrationTestCompile\n        integrationTestCompileOnly.extendsFrom testCompileOnly\n        integrationTestRuntime.extendsFrom testRuntime\n    }\n\n    sourceSets {\n        integrationTest {\n            java {\n                compileClasspath += main.output + test.output\n                runtimeClasspath += main.output + test.output\n                srcDir file('src/integrationTest/java')\n            }\n            resources.srcDir file('src/integrationTest/resources')\n        }\n    }\n\n    task integrationTest(type:Test) {\n        testClassesDir = sourceSets.integrationTest.output.classesDir\n        classpath = sourceSets.integrationTest.runtimeClasspath\n        outputs.upToDateWhen { false }\n    }\n}\n</code></pre>\n\n<p>For executing the tests, this works perfectly well, but it causes problems with IntelliJ's inspections, which may change behavior for test code. IntelliJ does not recognize the source folder as test source.</p>\n\n<p>I tried adding them as such (inside <code>subprojects</code>):</p>\n\n<pre><code>idea {\n    module {\n        testSourceDirs += file('src/integrationTest/java')\n    }\n}\n</code></pre>\n\n<p>but that did not help at all. I also tried manually marking them as test source (context menu -> mark directory as -> test sources root), but IntelliJ quickly overrides that back to normal source root.</p>\n\n<p>How do I configure this correctly in Gradle?</p>\n\n<p>I'm using IntelliJ 2016.1.3 and Gradle 2.14.1 on Ubuntu 16.04</p>\n"},{"tags":["java","xml","dom","memory"],"comments":[{"owner":{"account_id":355044,"reputation":37880,"user_id":693752,"accept_rate":63,"display_name":"Snicolas"},"score":0,"creation_date":1313492538,"post_id":7077068,"comment_id":8469118,"body_markdown":"possible duplicate of [How to transform huge xml files in java?](http://stackoverflow.com/questions/2773733/how-to-transform-huge-xml-files-in-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/2773733/how-to-transform-huge-xml-files-in-java\">How to transform huge xml files in java?</a>"}],"answers":[{"comments":[{"owner":{"account_id":772679,"reputation":55,"user_id":896509,"display_name":"Stephen Butler"},"score":1,"creation_date":1313493293,"post_id":7077116,"comment_id":8469321,"body_markdown":"Thanks for the answer :) ... Well, everyone answered but you were first :)","body":"Thanks for the answer :) ... Well, everyone answered but you were first :)"}],"tags":[],"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1313492348,"creation_date":1313492348,"answer_id":7077116,"question_id":7077068,"body_markdown":"It does load the entire file and constructs a tree structure in memory. Thus, every single tag, attribute and any nested tags (no matter how many levels of nesting) will be loaded. It is just that the constructed tree grows bigger the larger the XML file you have.","title":"How does file loading in DOM work?","body":"<p>It does load the entire file and constructs a tree structure in memory. Thus, every single tag, attribute and any nested tags (no matter how many levels of nesting) will be loaded. It is just that the constructed tree grows bigger the larger the XML file you have.</p>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1313492359,"creation_date":1313492359,"answer_id":7077120,"question_id":7077068,"body_markdown":"Yes, DOM reads the whole document, parses it, and places it in memory. ","title":"How does file loading in DOM work?","body":"<p>Yes, DOM reads the whole document, parses it, and places it in memory. </p>\n"},{"tags":[],"owner":{"account_id":77350,"reputation":40747,"user_id":220834,"accept_rate":50,"display_name":"Don Roby"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1313492564,"creation_date":1313492564,"answer_id":7077171,"question_id":7077068,"body_markdown":"If you&#39;re parsing using DOM, you do something similar to this:\r\n\r\n     DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();\r\n     Document doc = builder.parse(file);\r\n\r\n(inside a try/catch)\r\n\r\nThe moment the parse is executed, the `Document doc` variable will contain the entire document represented as a DOM  hierarchy.","title":"How does file loading in DOM work?","body":"<p>If you're parsing using DOM, you do something similar to this:</p>\n\n<pre><code> DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();\n Document doc = builder.parse(file);\n</code></pre>\n\n<p>(inside a try/catch)</p>\n\n<p>The moment the parse is executed, the <code>Document doc</code> variable will contain the entire document represented as a DOM  hierarchy.</p>\n"},{"comments":[{"owner":{"account_id":402733,"reputation":3330,"user_id":770065,"accept_rate":20,"display_name":"Darren Griffith"},"score":0,"creation_date":1686105381,"post_id":76416032,"comment_id":134752243,"body_markdown":"Thanks for the answer! It looks like you took some time to write some code to do something related to what the poster was asking. Having said that, the question is about how the file is processed.","body":"Thanks for the answer! It looks like you took some time to write some code to do something related to what the poster was asking. Having said that, the question is about how the file is processed."}],"tags":[],"owner":{"account_id":28538177,"reputation":7,"user_id":21844603,"display_name":"BuchuleSidondi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697121233,"creation_date":1686064135,"answer_id":76416032,"question_id":7077068,"body_markdown":"    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n    DocumentBuilder builder = factory.newDocumentBuilder();\r\n    File fin = new File(&quot;items.xml&quot;); //getxml\r\n    Document doc = builder.parse(fin); //parse into document/root element\r\n    XPathFactory xpFactory = XPathFactory.newInstance();\r\n    XPath path = xpFactory.newXPath(); //Xpath object used to query &quot;doc&quot;\r\n\r\nFor example:\r\n\r\n    String result = path.evaluate(&quot;/items/item[1]/quantity&quot;, doc);\r\n    System.out.println(&quot;quantity of product[1] = &quot; + result);\r\n\r\n\r\n    package za.nmu.wrpv.example02androidclient;\r\n    //\r\n    NETWORK\r\npackage za.nmu.wrpv.example02androidclient;\r\n\r\n\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n        }\r\n    \r\n        public void onConnectClicked(View view) {\r\n            // Get server address.\r\n            EditText edtServerAddress = findViewById(R.id.edtServerAddress);\r\n            String address = edtServerAddress.getText().toString();\r\n    \r\n            // Start other communication activity, passing server address.\r\n            Intent intent = new Intent(this, CommunicationActivity.class);\r\n            intent.putExtra(&quot;Server Address&quot;, address);\r\n            startActivity(intent);\r\n        }\r\n    }\r\n      \r\n\r\n  \r\n    public class CommunicationActivity extends AppCompatActivity {\r\n        private ArrayAdapter&lt;String&gt; adapter;\r\n        private String serverAddress;\r\n        private CommunicationThread communicationThread = null;\r\n        private ListView lstMessages;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_communication);\r\n    \r\n            // Add event handler for when user presses enter key.\r\n            EditText edtMessage = findViewById(R.id.edtMessage);\r\n            edtMessage.setOnKeyListener((view, i, keyEvent) -&gt; {\r\n                // If not busy communicating, do nothing.\r\n                if(communicationThread == null) return false;\r\n    \r\n                // Did not press the enter key, do nothing.\r\n                if ((keyEvent.getKeyCode() != KeyEvent.KEYCODE_ENTER)\r\n                        || (keyEvent.getAction() != KeyEvent.ACTION_DOWN)) return false;\r\n    \r\n                // Busy communicating with server and pressed enter key, so send message.\r\n                String message = edtMessage.getText().toString();\r\n    \r\n                // Call method to send message on output stream to server. CANNOT be done\r\n                // on the UI thread.\r\n                new Thread(() -&gt; communicationThread.sendMessage(message)).start();\r\n    \r\n                // Clear the edit text.\r\n                edtMessage.setText(&quot;&quot;);\r\n    \r\n                // Done, so indicate processed event.\r\n                return true;\r\n            });\r\n    \r\n            // RecyclerView is the more &quot;current&quot; way of doing it, but the set up code\r\n            // is a LOT longer - so not really worth the effort for this example.\r\n            lstMessages = findViewById(R.id.lstMessages);\r\n            adapter = new ArrayAdapter&lt;String&gt;(this,\r\n                    android.R.layout.simple_list_item_activated_1,\r\n                    android.R.id.text1,\r\n                    new ArrayList&lt;String&gt;());\r\n            lstMessages.setAdapter(adapter);\r\n    \r\n            // Check whether have permission to use the internet.\r\n            boolean hasPermission =\r\n                    checkSelfPermission(Manifest.permission.INTERNET) ==\r\n                            PackageManager.PERMISSION_GRANTED;\r\n    \r\n            // Get server address from intent.\r\n            try {\r\n                serverAddress = getIntent().getExtras().getString(&quot;Server Address&quot;);\r\n            } catch (Exception e) {\r\n                serverAddress = &quot;Undefined&quot;;\r\n            }\r\n    \r\n            // Display initial settings.\r\n            addMessage(&quot;Internet Permission = &quot; + hasPermission\r\n                    + &quot;\\nServer Address = &quot; + serverAddress);\r\n    \r\n            // Open connection.\r\n            openConnection();\r\n        }\r\n    \r\n        private void openConnection() {\r\n            communicationThread = new CommunicationThread(\r\n                    serverAddress, // Address to connect too\r\n                    value -&gt; runOnUiThread(() -&gt; addMessage(value)), // How to display messages.\r\n                    () -&gt; runOnUiThread(() -&gt; finish())); // What to do when connection closed.\r\n            communicationThread.start();\r\n        }\r\n    \r\n        public void addMessage(String message) {\r\n            adapter.add(message);\r\n            lstMessages.setSelection(adapter.getCount() - 1);\r\n        }\r\n    \r\n        @Override\r\n        protected void onDestroy() {\r\n            super.onDestroy();\r\n    \r\n            if (communicationThread == null) return;\r\n    \r\n            // Send message to server to let it know that the connection is to be\r\n            // terminated.\r\n            new Thread(() -&gt; communicationThread.sendMessage(&quot;TERMINATE&quot;)).start();\r\n        }\r\n    }\r\n\r\n    public class CommunicationThread extends Thread {\r\n        // Server IP address.\r\n        private String serverAddress;\r\n        // Displayer function to display messages on...\r\n        private Displayer&lt;String&gt; displayer;\r\n        // Code to call when communication is completed...\r\n        private Runnable onCompleted;\r\n    \r\n        // Network communication fields\r\n        private Socket conn = null;\r\n        private ObjectOutputStream oos = null;\r\n        private ObjectInputStream ois = null;\r\n    \r\n        public CommunicationThread(String serverAddress, Displayer&lt;String&gt; displayer, Runnable onCompleted) {\r\n            super(serverAddress);\r\n            this.serverAddress = serverAddress;\r\n            this.displayer = displayer;\r\n            this.onCompleted = onCompleted;\r\n        }\r\n    \r\n        // Called by another thread to send a message.\r\n        public void sendMessage(String message) {\r\n            try {\r\n                oos.writeObject(&quot;CLIENT&gt;&gt;&gt; &quot; + message);\r\n                oos.flush();\r\n                display(&quot;CLIENT&gt;&gt;&gt;&quot; + message);\r\n            } catch (IOException ioException) {\r\n                display(&quot;ERROR: Error writing object&quot;);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void run() {\r\n            try {\r\n                // Connect to server.\r\n                conn = new Socket(serverAddress, 5001);\r\n                display(&quot;Connecting to: &quot; + conn.getInetAddress().getHostName());\r\n    \r\n                // Get and initialise streams.\r\n                oos = new ObjectOutputStream(conn.getOutputStream());\r\n                oos.flush();\r\n                ois = new ObjectInputStream(conn.getInputStream());\r\n                display(&quot;Got I/O streams&quot;);\r\n    \r\n                // Read messages from server until told to terminate.\r\n                String message = &quot;&quot;;\r\n    \r\n                do {\r\n                    message = (String) ois.readObject();\r\n                    display(message);\r\n                } while (!message.equals(&quot;SERVER&gt;&gt;&gt; TERMINATE&quot;));\r\n    \r\n            } catch (Exception e) {\r\n                display(&quot;ERROR: &quot; + e.getMessage());\r\n    \r\n            } finally {\r\n                // Close connection.\r\n                close();\r\n    \r\n                display(&quot;Disconnected...&quot;);\r\n            }\r\n        }\r\n    \r\n        private void display(String message) {\r\n            // If not displayer provided, do nothing.\r\n            if(displayer == null) return;\r\n    \r\n            // Otherwise, display it.\r\n            displayer.display(message);\r\n        }\r\n    \r\n        private void close() {\r\n            try {\r\n                conn.close();\r\n    \r\n                // Was an onCompleted runnable provided? If so, run it.\r\n                if(onCompleted != null) onCompleted.run();\r\n    \r\n            } catch (Exception e) {\r\n                display(&quot;ERROR: &quot; + e.getMessage());\r\n            }\r\n        }\r\n    }","title":"How does file loading in DOM work?","body":"<pre><code>DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\nDocumentBuilder builder = factory.newDocumentBuilder();\nFile fin = new File(&quot;items.xml&quot;); //getxml\nDocument doc = builder.parse(fin); //parse into document/root element\nXPathFactory xpFactory = XPathFactory.newInstance();\nXPath path = xpFactory.newXPath(); //Xpath object used to query &quot;doc&quot;\n</code></pre>\n<p>For example:</p>\n<pre><code>String result = path.evaluate(&quot;/items/item[1]/quantity&quot;, doc);\nSystem.out.println(&quot;quantity of product[1] = &quot; + result);\n\n\npackage za.nmu.wrpv.example02androidclient;\n//\nNETWORK\n</code></pre>\n<p>package za.nmu.wrpv.example02androidclient;</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n\n    public void onConnectClicked(View view) {\n        // Get server address.\n        EditText edtServerAddress = findViewById(R.id.edtServerAddress);\n        String address = edtServerAddress.getText().toString();\n\n        // Start other communication activity, passing server address.\n        Intent intent = new Intent(this, CommunicationActivity.class);\n        intent.putExtra(&quot;Server Address&quot;, address);\n        startActivity(intent);\n    }\n}\n  \n\n\npublic class CommunicationActivity extends AppCompatActivity {\n    private ArrayAdapter&lt;String&gt; adapter;\n    private String serverAddress;\n    private CommunicationThread communicationThread = null;\n    private ListView lstMessages;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_communication);\n\n        // Add event handler for when user presses enter key.\n        EditText edtMessage = findViewById(R.id.edtMessage);\n        edtMessage.setOnKeyListener((view, i, keyEvent) -&gt; {\n            // If not busy communicating, do nothing.\n            if(communicationThread == null) return false;\n\n            // Did not press the enter key, do nothing.\n            if ((keyEvent.getKeyCode() != KeyEvent.KEYCODE_ENTER)\n                    || (keyEvent.getAction() != KeyEvent.ACTION_DOWN)) return false;\n\n            // Busy communicating with server and pressed enter key, so send message.\n            String message = edtMessage.getText().toString();\n\n            // Call method to send message on output stream to server. CANNOT be done\n            // on the UI thread.\n            new Thread(() -&gt; communicationThread.sendMessage(message)).start();\n\n            // Clear the edit text.\n            edtMessage.setText(&quot;&quot;);\n\n            // Done, so indicate processed event.\n            return true;\n        });\n\n        // RecyclerView is the more &quot;current&quot; way of doing it, but the set up code\n        // is a LOT longer - so not really worth the effort for this example.\n        lstMessages = findViewById(R.id.lstMessages);\n        adapter = new ArrayAdapter&lt;String&gt;(this,\n                android.R.layout.simple_list_item_activated_1,\n                android.R.id.text1,\n                new ArrayList&lt;String&gt;());\n        lstMessages.setAdapter(adapter);\n\n        // Check whether have permission to use the internet.\n        boolean hasPermission =\n                checkSelfPermission(Manifest.permission.INTERNET) ==\n                        PackageManager.PERMISSION_GRANTED;\n\n        // Get server address from intent.\n        try {\n            serverAddress = getIntent().getExtras().getString(&quot;Server Address&quot;);\n        } catch (Exception e) {\n            serverAddress = &quot;Undefined&quot;;\n        }\n\n        // Display initial settings.\n        addMessage(&quot;Internet Permission = &quot; + hasPermission\n                + &quot;\\nServer Address = &quot; + serverAddress);\n\n        // Open connection.\n        openConnection();\n    }\n\n    private void openConnection() {\n        communicationThread = new CommunicationThread(\n                serverAddress, // Address to connect too\n                value -&gt; runOnUiThread(() -&gt; addMessage(value)), // How to display messages.\n                () -&gt; runOnUiThread(() -&gt; finish())); // What to do when connection closed.\n        communicationThread.start();\n    }\n\n    public void addMessage(String message) {\n        adapter.add(message);\n        lstMessages.setSelection(adapter.getCount() - 1);\n    }\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n\n        if (communicationThread == null) return;\n\n        // Send message to server to let it know that the connection is to be\n        // terminated.\n        new Thread(() -&gt; communicationThread.sendMessage(&quot;TERMINATE&quot;)).start();\n    }\n}\n\npublic class CommunicationThread extends Thread {\n    // Server IP address.\n    private String serverAddress;\n    // Displayer function to display messages on...\n    private Displayer&lt;String&gt; displayer;\n    // Code to call when communication is completed...\n    private Runnable onCompleted;\n\n    // Network communication fields\n    private Socket conn = null;\n    private ObjectOutputStream oos = null;\n    private ObjectInputStream ois = null;\n\n    public CommunicationThread(String serverAddress, Displayer&lt;String&gt; displayer, Runnable onCompleted) {\n        super(serverAddress);\n        this.serverAddress = serverAddress;\n        this.displayer = displayer;\n        this.onCompleted = onCompleted;\n    }\n\n    // Called by another thread to send a message.\n    public void sendMessage(String message) {\n        try {\n            oos.writeObject(&quot;CLIENT&gt;&gt;&gt; &quot; + message);\n            oos.flush();\n            display(&quot;CLIENT&gt;&gt;&gt;&quot; + message);\n        } catch (IOException ioException) {\n            display(&quot;ERROR: Error writing object&quot;);\n        }\n    }\n\n    @Override\n    public void run() {\n        try {\n            // Connect to server.\n            conn = new Socket(serverAddress, 5001);\n            display(&quot;Connecting to: &quot; + conn.getInetAddress().getHostName());\n\n            // Get and initialise streams.\n            oos = new ObjectOutputStream(conn.getOutputStream());\n            oos.flush();\n            ois = new ObjectInputStream(conn.getInputStream());\n            display(&quot;Got I/O streams&quot;);\n\n            // Read messages from server until told to terminate.\n            String message = &quot;&quot;;\n\n            do {\n                message = (String) ois.readObject();\n                display(message);\n            } while (!message.equals(&quot;SERVER&gt;&gt;&gt; TERMINATE&quot;));\n\n        } catch (Exception e) {\n            display(&quot;ERROR: &quot; + e.getMessage());\n\n        } finally {\n            // Close connection.\n            close();\n\n            display(&quot;Disconnected...&quot;);\n        }\n    }\n\n    private void display(String message) {\n        // If not displayer provided, do nothing.\n        if(displayer == null) return;\n\n        // Otherwise, display it.\n        displayer.display(message);\n    }\n\n    private void close() {\n        try {\n            conn.close();\n\n            // Was an onCompleted runnable provided? If so, run it.\n            if(onCompleted != null) onCompleted.run();\n\n        } catch (Exception e) {\n            display(&quot;ERROR: &quot; + e.getMessage());\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":772679,"reputation":55,"user_id":896509,"display_name":"Stephen Butler"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":7077116,"answer_count":4,"score":2,"last_activity_date":1697121233,"creation_date":1313492136,"question_id":7077068,"body_markdown":"I&#39;ve been looking at loading XML files with Java and I just can&#39;t seem to decipher a certain part of it.\r\nI understand that SAX is a streaming mechanism, but when talking about DOM, various sites talk about the model &quot;loading in the full file&quot; or &quot;loading in the all tags&quot;, supported by the recommendation to use SAX with large XML files.\r\n\r\nTo what degree does DOM actually load the full file? The second I access the root node, does it allocate program memory for every single byte of the file? Does it only load tags until the lowest level when it loads text contents?\r\n\r\nI&#39;m going to be working with large files, but random access would be useful and editing is a requirement, so I believe DOM is the best choice for me.\r\n\r\nThanks a lot.","title":"How does file loading in DOM work?","body":"<p>I've been looking at loading XML files with Java and I just can't seem to decipher a certain part of it.\nI understand that SAX is a streaming mechanism, but when talking about DOM, various sites talk about the model \"loading in the full file\" or \"loading in the all tags\", supported by the recommendation to use SAX with large XML files.</p>\n\n<p>To what degree does DOM actually load the full file? The second I access the root node, does it allocate program memory for every single byte of the file? Does it only load tags until the lowest level when it loads text contents?</p>\n\n<p>I'm going to be working with large files, but random access would be useful and editing is a requirement, so I believe DOM is the best choice for me.</p>\n\n<p>Thanks a lot.</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1697123600,"post_id":77281510,"comment_id":136242983,"body_markdown":"By default, the shortcut for autocomplete is Ctrl+Space, not Tab.","body":"By default, the shortcut for autocomplete is Ctrl+Space, not Tab."}],"owner":{"account_id":18226112,"reputation":21,"user_id":13265877,"display_name":"Abhishek Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697121061,"creation_date":1697121061,"question_id":77281510,"body_markdown":"My system is MacOS Ventura 13.2.1 (22D68) and eclipse version is : 2023-09 (4.29.0). \r\n\r\nsysout tab doesn&#39;t autocomplete to `System.out.print()` or `System.out.print()`. Also the suggestion code doesn&#39;t autocomplete many a times. Is there any extension in Eclipse Marketplace to smoothen these things?","title":"eclipse IDE autocomplete extensions","body":"<p>My system is MacOS Ventura 13.2.1 (22D68) and eclipse version is : 2023-09 (4.29.0).</p>\n<p>sysout tab doesn't autocomplete to <code>System.out.print()</code> or <code>System.out.print()</code>. Also the suggestion code doesn't autocomplete many a times. Is there any extension in Eclipse Marketplace to smoothen these things?</p>\n"},{"tags":["java","wcf","client","axis"],"answers":[{"comments":[{"owner":{"account_id":213492,"reputation":3369,"user_id":466903,"accept_rate":85,"display_name":"diggingforfire"},"score":1,"creation_date":1325699858,"post_id":3306573,"comment_id":10873237,"body_markdown":"Ws-security is not a Microsoft technology, and it&#39;s definitely possible to consume a WCF service that uses a wsHttpBinding","body":"Ws-security is not a Microsoft technology, and it&#39;s definitely possible to consume a WCF service that uses a wsHttpBinding"},{"owner":{"account_id":2206479,"reputation":1267,"user_id":1949572,"accept_rate":86,"display_name":"Dhawalk"},"score":0,"creation_date":1395687739,"post_id":3306573,"comment_id":34442107,"body_markdown":"the answer above explains how you could tweak the axis client and make it work wsHttp binding","body":"the answer above explains how you could tweak the axis client and make it work wsHttp binding"}],"tags":[],"owner":{"account_id":48546,"reputation":990,"user_id":144290,"accept_rate":75,"display_name":"devson"},"comment_count":2,"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1697120840,"creation_date":1279782946,"answer_id":3306573,"question_id":3299075,"body_markdown":"BasicHttpBinding or webHttpBinidng (REST services) are the only option to interact with non-microsoft technologies.\r\nBasicHttpBinding is only binding which supports the Basic Profile 1.1 for interoperability. \r\n\r\nPlease go through below links and see if they can help you out to understand basic and ws bidning.\r\n\r\nhttp://www.devproconnections.com/article/net-framework2/choosing-the-right-web-service-binding.aspx\r\n\r\n[Link](https://web.archive.org/web/20161223065644/http://geekswithblogs.net/claeyskurt/archive/2008/04/22/121508.aspx)","title":"How to create java client using AXis 1.4 for consuming WCF service using wsHttpBinding","body":"<p>BasicHttpBinding or webHttpBinidng (REST services) are the only option to interact with non-microsoft technologies.\nBasicHttpBinding is only binding which supports the Basic Profile 1.1 for interoperability.</p>\n<p>Please go through below links and see if they can help you out to understand basic and ws bidning.</p>\n<p><a href=\"http://www.devproconnections.com/article/net-framework2/choosing-the-right-web-service-binding.aspx\" rel=\"nofollow noreferrer\">http://www.devproconnections.com/article/net-framework2/choosing-the-right-web-service-binding.aspx</a></p>\n<p><a href=\"https://web.archive.org/web/20161223065644/http://geekswithblogs.net/claeyskurt/archive/2008/04/22/121508.aspx\" rel=\"nofollow noreferrer\">Link</a></p>\n"},{"comments":[{"owner":{"account_id":2206479,"reputation":1267,"user_id":1949572,"accept_rate":86,"display_name":"Dhawalk"},"score":0,"creation_date":1395686890,"post_id":22247791,"comment_id":34441636,"body_markdown":"along with your answer, here&#39;s a very informative link as to why this should be done http://wso2.com/library/tutorials/understand-famous-did-not-understand-mustunderstand-header-s-error/","body":"along with your answer, here&#39;s a very informative link as to why this should be done <a href=\"http://wso2.com/library/tutorials/understand-famous-did-not-understand-mustunderstand-header-s-error/\" rel=\"nofollow noreferrer\">wso2.com/library/tutorials/&hellip;</a>"}],"tags":[],"owner":{"account_id":3869387,"reputation":41,"user_id":3205043,"display_name":"vincent"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1395687874,"creation_date":1394188774,"answer_id":22247791,"question_id":3299075,"body_markdown":"When you use Axis to generate proxy for a WCF service, it generates the  stub that automatically sets the `MustUnderstand` header for `http://www.w3.org/2005/08/addressing`\r\n\r\nThe code below  resets the MustUnderstand flag back to false. for the method being invoked. I had a similar issue today and was able to resolve using the code that&#39;s posted here\r\n\r\n    //maybe someother service stub,i show you a case\r\n        CommentWcfServiceLocator locator =new CommentWcfServiceLocator();\r\n        WSHttpBinding_ICommentServiceStub stub;\r\n        try {\t\t\r\n        //get a stub and set service url\r\n        stub = (WSHttpBinding_ICommentServiceStub)   locator.getWSHttpBinding_ICommentService(new         java.net.URL(&quot;http://www.google.com/CommentWcfService.svc&quot;));\r\n    \r\n        // the key is here , importantest!!! follow this\r\n        // set action, action path,you can find in your java code\r\n        SOAPHeaderElement action = new SOAPHeaderElement(new QName(&quot;wsa:Action&quot;),     &quot;http://tempuri.org/ICommentService/GetCommentSummaryByHotelId&quot;);\r\n        SOAPHeaderElement to = new SOAPHeaderElement(new QName(&quot;wsa:To&quot;),\r\n        stub._getProperty(javax.xml.rpc.Stub.ENDPOINT_ADDRESS_PROPERTY));\r\n    \t\taction.setActor(null);\r\n    \t\taction.setNamespaceURI(&quot;http://www.w3.org/2005/08/addressing&quot;);\r\n    \t\tto.setActor(null);\r\n    \t\tto.setNamespaceURI(&quot;http://www.w3.org/2005/08/addressing&quot;);\r\n    \t\t // set header\r\n                    stub.setHeader(action);\r\n    \t\tstub.setHeader(to);\r\n                    // must set this property\r\n    \t\tstub._setProperty(Call.CHECK_MUST_UNDERSTAND, Boolean.FALSE);\r\n    \t\t\tstub.getCommentSummaryByHotelId(&quot;&quot;,&quot;02201158&quot;, 0);\r\n    \t} \r\n    catch(Exception EX){}\r\n\r\nI found the [this post][1] on MustUnderstand veru helpful. \r\n\r\n\r\n  [1]: http://wso2.com/library/tutorials/understand-famous-did-not-understand-mustunderstand-header-s-error/","title":"How to create java client using AXis 1.4 for consuming WCF service using wsHttpBinding","body":"<p>When you use Axis to generate proxy for a WCF service, it generates the  stub that automatically sets the <code>MustUnderstand</code> header for <code>http://www.w3.org/2005/08/addressing</code></p>\n\n<p>The code below  resets the MustUnderstand flag back to false. for the method being invoked. I had a similar issue today and was able to resolve using the code that's posted here</p>\n\n<pre><code>//maybe someother service stub,i show you a case\n    CommentWcfServiceLocator locator =new CommentWcfServiceLocator();\n    WSHttpBinding_ICommentServiceStub stub;\n    try {       \n    //get a stub and set service url\n    stub = (WSHttpBinding_ICommentServiceStub)   locator.getWSHttpBinding_ICommentService(new         java.net.URL(\"http://www.google.com/CommentWcfService.svc\"));\n\n    // the key is here , importantest!!! follow this\n    // set action, action path,you can find in your java code\n    SOAPHeaderElement action = new SOAPHeaderElement(new QName(\"wsa:Action\"),     \"http://tempuri.org/ICommentService/GetCommentSummaryByHotelId\");\n    SOAPHeaderElement to = new SOAPHeaderElement(new QName(\"wsa:To\"),\n    stub._getProperty(javax.xml.rpc.Stub.ENDPOINT_ADDRESS_PROPERTY));\n        action.setActor(null);\n        action.setNamespaceURI(\"http://www.w3.org/2005/08/addressing\");\n        to.setActor(null);\n        to.setNamespaceURI(\"http://www.w3.org/2005/08/addressing\");\n         // set header\n                stub.setHeader(action);\n        stub.setHeader(to);\n                // must set this property\n        stub._setProperty(Call.CHECK_MUST_UNDERSTAND, Boolean.FALSE);\n            stub.getCommentSummaryByHotelId(\"\",\"02201158\", 0);\n    } \ncatch(Exception EX){}\n</code></pre>\n\n<p>I found the <a href=\"http://wso2.com/library/tutorials/understand-famous-did-not-understand-mustunderstand-header-s-error/\" rel=\"nofollow\">this post</a> on MustUnderstand veru helpful. </p>\n"}],"owner":{"account_id":633423,"reputation":31,"user_id":397924,"display_name":"Deepak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7318,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1697120840,"creation_date":1279714756,"question_id":3299075,"body_markdown":"I have created a java client for consuming WCF service using axis 1.4. If I use basicHttpBinding than everything works fine, but if I use wsHttpBinding than I am getting following error:-\r\n\r\n    Did not understand &quot;MustUnderstand&quot; header(s):{http://www.w3.org/2005/08/addressing}Action\r\n    AxisFault\r\n     faultCode: {http://www.w3.org/2003/05/soap-envelope}MustUnderstand\r\n     faultSubcode: \r\n     faultString: Did not understand &amp;quot;MustUnderstand&amp;quot; header(s):{http://www.w3.org/2005/08/addressing}Action\r\n     faultActor: \r\n     faultNode: \r\n     faultDetail: \r\n    \t{http://xml.apache.org/axis/}stackTrace:\r\n    \tat org.apache.axis.handlers.soap.MustUnderstandChecker.invoke(MustUnderstandChecker.java:96)\r\n    \tat org.apache.axis.client.AxisClient.invoke(AxisClient.java:206)\r\n    \tat org.apache.axis.client.Call.invokeEngine(Call.java:2784)\r\n    \tat org.apache.axis.client.Call.invoke(Call.java:2767)\r\n    \tat org.apache.axis.client.Call.invoke(Call.java:2443)\r\n    \tat org.apache.axis.client.Call.invoke(Call.java:2366)\r\n    \tat org.apache.axis.client.Call.invoke(Call.java:1812)\r\n    \tat org.tempuri.WSHttpBinding_IService1Stub.getData(WSHttpBinding_IService1Stub.java:171)\r\n    \tat Mytes.main(Mytes.java:14)\r\n    \r\n    \t{http://xml.apache.org/axis/}hostname:2207A-H7-SITA\r\n    \r\n    Did not understand &quot;MustUnderstand&quot; header(s):{http://www.w3.org/2005/08/addressing}Action\r\n    \tat org.apache.axis.handlers.soap.MustUnderstandChecker.invoke(MustUnderstandChecker.java:96)\r\n    \tat org.apache.axis.client.AxisClient.invoke(AxisClient.java:206)\r\n    \tat org.apache.axis.client.Call.invokeEngine(Call.java:2784)\r\n    \tat org.apache.axis.client.Call.invoke(Call.java:2767)\r\n    \tat org.apache.axis.client.Call.invoke(Call.java:2443)\r\n    \tat org.apache.axis.client.Call.invoke(Call.java:2366)\r\n    \tat org.apache.axis.client.Call.invoke(Call.java:1812)\r\n    \tat org.tempuri.WSHttpBinding_IService1Stub.getData(WSHttpBinding_IService1Stub.java:171)\r\n    \tat Mytes.main(Mytes.java:14)\r\n\r\nPls let me know how can I resolve this error. Thanks.\r\n","title":"How to create java client using AXis 1.4 for consuming WCF service using wsHttpBinding","body":"<p>I have created a java client for consuming WCF service using axis 1.4. If I use basicHttpBinding than everything works fine, but if I use wsHttpBinding than I am getting following error:-</p>\n\n<pre><code>Did not understand \"MustUnderstand\" header(s):{http://www.w3.org/2005/08/addressing}Action\nAxisFault\n faultCode: {http://www.w3.org/2003/05/soap-envelope}MustUnderstand\n faultSubcode: \n faultString: Did not understand &amp;quot;MustUnderstand&amp;quot; header(s):{http://www.w3.org/2005/08/addressing}Action\n faultActor: \n faultNode: \n faultDetail: \n    {http://xml.apache.org/axis/}stackTrace:\n    at org.apache.axis.handlers.soap.MustUnderstandChecker.invoke(MustUnderstandChecker.java:96)\n    at org.apache.axis.client.AxisClient.invoke(AxisClient.java:206)\n    at org.apache.axis.client.Call.invokeEngine(Call.java:2784)\n    at org.apache.axis.client.Call.invoke(Call.java:2767)\n    at org.apache.axis.client.Call.invoke(Call.java:2443)\n    at org.apache.axis.client.Call.invoke(Call.java:2366)\n    at org.apache.axis.client.Call.invoke(Call.java:1812)\n    at org.tempuri.WSHttpBinding_IService1Stub.getData(WSHttpBinding_IService1Stub.java:171)\n    at Mytes.main(Mytes.java:14)\n\n    {http://xml.apache.org/axis/}hostname:2207A-H7-SITA\n\nDid not understand \"MustUnderstand\" header(s):{http://www.w3.org/2005/08/addressing}Action\n    at org.apache.axis.handlers.soap.MustUnderstandChecker.invoke(MustUnderstandChecker.java:96)\n    at org.apache.axis.client.AxisClient.invoke(AxisClient.java:206)\n    at org.apache.axis.client.Call.invokeEngine(Call.java:2784)\n    at org.apache.axis.client.Call.invoke(Call.java:2767)\n    at org.apache.axis.client.Call.invoke(Call.java:2443)\n    at org.apache.axis.client.Call.invoke(Call.java:2366)\n    at org.apache.axis.client.Call.invoke(Call.java:1812)\n    at org.tempuri.WSHttpBinding_IService1Stub.getData(WSHttpBinding_IService1Stub.java:171)\n    at Mytes.main(Mytes.java:14)\n</code></pre>\n\n<p>Pls let me know how can I resolve this error. Thanks.</p>\n"},{"tags":["java","spring","exception","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1488229067,"creation_date":1264083557,"answer_id":2109828,"question_id":2109476,"body_markdown":"Spring 3 provides two ways of handling this - `HandlerExceptionResolver` in your beans.xml, or `@ExceptionHandler` in your controller. They both do the same thing - they turn the exception into a view to render.\r\n\r\nBoth are documented [here][1].\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-exceptionhandlers","title":"How to handle DataIntegrityViolationException in Spring?","body":"<p>Spring 3 provides two ways of handling this - <code>HandlerExceptionResolver</code> in your beans.xml, or <code>@ExceptionHandler</code> in your controller. They both do the same thing - they turn the exception into a view to render.</p>\n\n<p>Both are documented <a href=\"http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-exceptionhandlers\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"comments":[{"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"score":0,"creation_date":1696978265,"post_id":2110836,"comment_id":136221046,"body_markdown":"Do you have a example of this?","body":"Do you have a example of this?"}],"tags":[],"owner":{"account_id":36208,"reputation":240326,"user_id":103154,"display_name":"axtavt"},"comment_count":1,"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1264902017,"creation_date":1264090897,"answer_id":2110836,"question_id":2109476,"body_markdown":"The problem with showing user-friendly messages in the case of constraint violation is that the constraint name is lost when Hibernate&#39;s `ConstraintViolationException` is being translated into Spring&#39;s `DataIntegrityViolationException`.\r\n\r\nHowever, you can customize this translation logic. If you use `LocalSessionFactoryBean` to access Hibernate, you can supply it with a custom `SQLExceptionTranslator` (see `LocalSessionFactoryBean.jdbcExceptionTranslator`). This exception translator can translate a `ConstraintViolationException` into your own exception class, preserving the constraint name.","title":"How to handle DataIntegrityViolationException in Spring?","body":"<p>The problem with showing user-friendly messages in the case of constraint violation is that the constraint name is lost when Hibernate's <code>ConstraintViolationException</code> is being translated into Spring's <code>DataIntegrityViolationException</code>.</p>\n\n<p>However, you can customize this translation logic. If you use <code>LocalSessionFactoryBean</code> to access Hibernate, you can supply it with a custom <code>SQLExceptionTranslator</code> (see <code>LocalSessionFactoryBean.jdbcExceptionTranslator</code>). This exception translator can translate a <code>ConstraintViolationException</code> into your own exception class, preserving the constraint name.</p>\n"},{"comments":[{"owner":{"account_id":4647161,"reputation":530,"user_id":3765055,"accept_rate":69,"display_name":"LTroya"},"score":0,"creation_date":1488059042,"post_id":42422568,"comment_id":72066034,"body_markdown":"Did you have a different config to get that constraint friendly? My constraint are something like this `UK_6DOTKOTT2KJSP8VW4D0M25FB7_INDEX_4`","body":"Did you have a different config to get that constraint friendly? My constraint are something like this <code>UK_6DOTKOTT2KJSP8VW4D0M25FB7_INDEX_4</code>"},{"owner":{"account_id":263115,"reputation":16960,"user_id":548473,"display_name":"Grigory Kislin"},"score":1,"creation_date":1488380618,"post_id":42422568,"comment_id":72205799,"body_markdown":"There are several way to create readable constraints: 1. In initial SQL script. \n2.  DB auto generation with `uniqueConstraints` parameter in `@Table` annotation, e.g.\n`@Table(name = &quot;meals&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;user_id&quot;, &quot;date_time&quot;}, name = &quot;meals_unique_user_datetime_idx&quot;)})`","body":"There are several way to create readable constraints: 1. In initial SQL script.  2.  DB auto generation with <code>uniqueConstraints</code> parameter in <code>@Table</code> annotation, e.g. <code>@Table(name = &quot;meals&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;user_id&quot;, &quot;date_time&quot;}, name = &quot;meals_unique_user_datetime_idx&quot;)})</code>"}],"tags":[],"owner":{"account_id":263115,"reputation":16960,"user_id":548473,"display_name":"Grigory Kislin"},"comment_count":2,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1697120566,"creation_date":1487871215,"answer_id":42422568,"question_id":2109476,"body_markdown":"I treat `DataIntegrityViolationException` in &lt;a href=&quot;https://github.com/gkislin/topjava/blob/master/src/main/java/ru/javawebinar/topjava/web/ExceptionInfoHandler.java&quot;&gt;`ExceptionInfoHandler`&lt;/a&gt;, finding DB constraints occurrences in root cause message and convert it into i18n message via `constraintCodeMap`:\r\n\r\n    @RestControllerAdvice\r\n    public class ExceptionInfoHandler {\r\n\r\n      @Autowired\r\n      private final MessageSourceAccessor messageSourceAccessor;\r\n\r\n      private static Map&lt;String, String&gt; CONSTRAINS_I18N_MAP = Map.of(\r\n          &quot;users_unique_email_idx&quot;, EXCEPTION_DUPLICATE_EMAIL,\r\n          &quot;meals_unique_user_datetime_idx&quot;, EXCEPTION_DUPLICATE_DATETIME);\r\n\r\n      @ResponseStatus(value = HttpStatus.CONFLICT)  // 409\r\n      @ExceptionHandler(DataIntegrityViolationException.class)\r\n      public ErrorInfo conflict(HttpServletRequest req, DataIntegrityViolationException e) {\r\n        String rootMsg = ValidationUtil.getRootCause(e).getMessage();\r\n        if (rootMsg != null) {\r\n            String lowerCaseMsg = rootMsg.toLowerCase();\r\n            for (Map.Entry&lt;String, String&gt; entry : CONSTRAINS_I18N_MAP.entrySet()) {\r\n                if (lowerCaseMsg.contains(entry.getKey())) {\r\n                    return logAndGetErrorInfo(req, e, VALIDATION_ERROR, messageSourceAccessor.getMessage(entry.getValue()));\r\n                }\r\n            }\r\n        }\r\n        return logAndGetErrorInfo(req, e, DATA_ERROR);\r\n      }\r\n\r\n      //  https://stackoverflow.com/a/65442410/548473\r\n      @NonNull\r\n      private static Throwable getRootCause(@NonNull Throwable t) {\r\n        Throwable rootCause = NestedExceptionUtils.getRootCause(t);\r\n        return rootCause != null ? rootCause : t;\r\n      }\r\n      ...\r\n    }\r\n\r\nCan be simulated in my &lt;a href=&quot;http://topjava.herokuapp.com&quot;&gt;Java Enterprise training application&lt;/a&gt; by adding/editing user with duplicate mail or meal with duplicate dateTime.\r\n\r\n**UPDATE**:\r\n\r\nOther solution: use [Controller Based Exception Handling](https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc#controller-based-exception-handling):\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/ajax/admin/users&quot;)\r\n    public class AdminAjaxController {\r\n\r\n        @ExceptionHandler(DataIntegrityViolationException.class)\r\n        public ResponseEntity&lt;ErrorInfo&gt; duplicateEmailException(HttpServletRequest req, DataIntegrityViolationException e) {\r\n            return exceptionInfoHandler.getErrorInfoResponseEntity(req, e, EXCEPTION_DUPLICATE_EMAIL, HttpStatus.CONFLICT);\r\n        }\r\n","title":"How to handle DataIntegrityViolationException in Spring?","body":"<p>I treat <code>DataIntegrityViolationException</code> in <a href=\"https://github.com/gkislin/topjava/blob/master/src/main/java/ru/javawebinar/topjava/web/ExceptionInfoHandler.java\" rel=\"nofollow noreferrer\"><code>ExceptionInfoHandler</code></a>, finding DB constraints occurrences in root cause message and convert it into i18n message via <code>constraintCodeMap</code>:</p>\n<pre><code>@RestControllerAdvice\npublic class ExceptionInfoHandler {\n\n  @Autowired\n  private final MessageSourceAccessor messageSourceAccessor;\n\n  private static Map&lt;String, String&gt; CONSTRAINS_I18N_MAP = Map.of(\n      &quot;users_unique_email_idx&quot;, EXCEPTION_DUPLICATE_EMAIL,\n      &quot;meals_unique_user_datetime_idx&quot;, EXCEPTION_DUPLICATE_DATETIME);\n\n  @ResponseStatus(value = HttpStatus.CONFLICT)  // 409\n  @ExceptionHandler(DataIntegrityViolationException.class)\n  public ErrorInfo conflict(HttpServletRequest req, DataIntegrityViolationException e) {\n    String rootMsg = ValidationUtil.getRootCause(e).getMessage();\n    if (rootMsg != null) {\n        String lowerCaseMsg = rootMsg.toLowerCase();\n        for (Map.Entry&lt;String, String&gt; entry : CONSTRAINS_I18N_MAP.entrySet()) {\n            if (lowerCaseMsg.contains(entry.getKey())) {\n                return logAndGetErrorInfo(req, e, VALIDATION_ERROR, messageSourceAccessor.getMessage(entry.getValue()));\n            }\n        }\n    }\n    return logAndGetErrorInfo(req, e, DATA_ERROR);\n  }\n\n  //  https://stackoverflow.com/a/65442410/548473\n  @NonNull\n  private static Throwable getRootCause(@NonNull Throwable t) {\n    Throwable rootCause = NestedExceptionUtils.getRootCause(t);\n    return rootCause != null ? rootCause : t;\n  }\n  ...\n}\n</code></pre>\n<p>Can be simulated in my <a href=\"http://topjava.herokuapp.com\" rel=\"nofollow noreferrer\">Java Enterprise training application</a> by adding/editing user with duplicate mail or meal with duplicate dateTime.</p>\n<p><strong>UPDATE</strong>:</p>\n<p>Other solution: use <a href=\"https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc#controller-based-exception-handling\" rel=\"nofollow noreferrer\">Controller Based Exception Handling</a>:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/ajax/admin/users&quot;)\npublic class AdminAjaxController {\n\n    @ExceptionHandler(DataIntegrityViolationException.class)\n    public ResponseEntity&lt;ErrorInfo&gt; duplicateEmailException(HttpServletRequest req, DataIntegrityViolationException e) {\n        return exceptionInfoHandler.getErrorInfoResponseEntity(req, e, EXCEPTION_DUPLICATE_EMAIL, HttpStatus.CONFLICT);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12156027,"reputation":13933,"user_id":8874958,"display_name":"Kishan Solanki"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573128390,"creation_date":1573128390,"answer_id":58748439,"question_id":2109476,"body_markdown":"**1. In your request body class check for not null or not empty like this**\r\n\r\n\r\n    public class CustomerRegisterRequestDto {\r\n        @NotEmpty(message = &quot;first name is empty&quot;)\r\n        @NotNull(message = Constants.EntityValidators.FIRST_NAME_NULL)\r\n        private String first_name;\r\n        //other fields\r\n        //getters and setters\r\n    }\r\n\r\n    \r\n\r\n\r\n**2. Then in your service check for this**\r\n\r\n    ValidatorFactory factory = Validation.buildDefaultValidatorFactory();\r\n        Validator validator = factory.getValidator();\r\n        Set&lt;ConstraintViolation&lt;CustomerRegisterRequestDto&gt;&gt; violations = validator.validate(userDto);\r\n        if (!violations.isEmpty()) {\r\n            //something is wrong in request parameters\r\n            List&lt;String&gt; details = new ArrayList&lt;&gt;();\r\n            for (ConstraintViolation&lt;CustomerRegisterRequestDto&gt; violation : violations) {\r\n                details.add(violation.getMessage());\r\n            }\r\n            ErrorResponse error = new ErrorResponse(Constants.ErrorResponse.REQUEST_PARAM_ERROR, details);\r\n            return new ResponseEntity&lt;&gt;(error, HttpStatus.BAD_REQUEST);\r\n        }\r\n\r\n**3. [Here][1] is your ErrorResponse class**\r\n\r\n\r\n  [1]: https://github.com/lokeshgupta1981/SpringExamples/blob/db5ca189f93de972d592f3864bd9e8fff8a19149/unit-testing/src/main/java/com/howtodoinjava/rest/exception/ErrorResponse.java\r\n","title":"How to handle DataIntegrityViolationException in Spring?","body":"<p><strong>1. In your request body class check for not null or not empty like this</strong></p>\n\n<pre><code>public class CustomerRegisterRequestDto {\n    @NotEmpty(message = \"first name is empty\")\n    @NotNull(message = Constants.EntityValidators.FIRST_NAME_NULL)\n    private String first_name;\n    //other fields\n    //getters and setters\n}\n</code></pre>\n\n<p><strong>2. Then in your service check for this</strong></p>\n\n<pre><code>ValidatorFactory factory = Validation.buildDefaultValidatorFactory();\n    Validator validator = factory.getValidator();\n    Set&lt;ConstraintViolation&lt;CustomerRegisterRequestDto&gt;&gt; violations = validator.validate(userDto);\n    if (!violations.isEmpty()) {\n        //something is wrong in request parameters\n        List&lt;String&gt; details = new ArrayList&lt;&gt;();\n        for (ConstraintViolation&lt;CustomerRegisterRequestDto&gt; violation : violations) {\n            details.add(violation.getMessage());\n        }\n        ErrorResponse error = new ErrorResponse(Constants.ErrorResponse.REQUEST_PARAM_ERROR, details);\n        return new ResponseEntity&lt;&gt;(error, HttpStatus.BAD_REQUEST);\n    }\n</code></pre>\n\n<p><strong>3. <a href=\"https://github.com/lokeshgupta1981/SpringExamples/blob/db5ca189f93de972d592f3864bd9e8fff8a19149/unit-testing/src/main/java/com/howtodoinjava/rest/exception/ErrorResponse.java\" rel=\"nofollow noreferrer\">Here</a> is your ErrorResponse class</strong></p>\n"}],"owner":{"account_id":90778,"reputation":19457,"user_id":249699,"accept_rate":88,"display_name":"Javi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36922,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":2110836,"answer_count":4,"score":25,"last_activity_date":1697120566,"creation_date":1264080347,"question_id":2109476,"body_markdown":"I need to show custom messages in my Spring 3.0 application. I have a database with Hibernate and there are several constraints. I have doubts in how `DataIntegrityViolationException` should be handled in a good way. I wonder if there is a way to map the exception with a message set in a properties file, as it is possible in Constraints validation. Could I handle it automatically in any way or I have to catch this exception in each controller?\r\n","title":"How to handle DataIntegrityViolationException in Spring?","body":"<p>I need to show custom messages in my Spring 3.0 application. I have a database with Hibernate and there are several constraints. I have doubts in how <code>DataIntegrityViolationException</code> should be handled in a good way. I wonder if there is a way to map the exception with a message set in a properties file, as it is possible in Constraints validation. Could I handle it automatically in any way or I have to catch this exception in each controller?</p>\n"},{"tags":["java","ssl","rabbitmq","tls1.2"],"answers":[{"tags":[],"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697120524,"creation_date":1669740348,"answer_id":74617436,"question_id":74611390,"body_markdown":"`unknown ca` means that RabbitMQ/Erlang does not have the expected CA certificate available.\r\n\r\nPlease ensure that the CA that signed your client certificate is availabe to RabbitMQ and that RabbitMQ is configured to use it.\r\n\r\nhttps://www.rabbitmq.com/ssl.html#enabling-tls\r\n\r\nhttps://www.rabbitmq.com/troubleshooting-ssl.html\r\n","title":"Connection reset during TLS certificate verify (java + rabbit mq)","body":"<p><code>unknown ca</code> means that RabbitMQ/Erlang does not have the expected CA certificate available.</p>\n<p>Please ensure that the CA that signed your client certificate is availabe to RabbitMQ and that RabbitMQ is configured to use it.</p>\n<p><a href=\"https://www.rabbitmq.com/ssl.html#enabling-tls\" rel=\"nofollow noreferrer\">https://www.rabbitmq.com/ssl.html#enabling-tls</a></p>\n<p><a href=\"https://www.rabbitmq.com/troubleshooting-ssl.html\" rel=\"nofollow noreferrer\">https://www.rabbitmq.com/troubleshooting-ssl.html</a></p>\n"}],"owner":{"account_id":2232649,"reputation":455,"user_id":1969863,"accept_rate":64,"display_name":"athabaska"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":586,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697120524,"creation_date":1669712150,"question_id":74611390,"body_markdown":"I am developing a java client to consume from rabbitmq (using amqp-client lib). All works fine until I start using ssl protocol. In java log I see \r\n&gt;java.net.SocketException: Connection reset\r\n\r\nAnd in rabbitmq logs there is only \r\n&gt;SSL: certify: ssl_handshake.erl:1490:Fatal error: unknown ca\r\n\r\nI have checked ceriticates, all seem fine. Then I enabled ssl debug in java. Looking at ssl logs it seems that actually server and client are interacting fine. I see that trusted certificate is found, clienthello and serverhello finish correctly, but at certificate verification step the connection is reset:\r\n\r\n    *** CertificateVerify\r\n    Signature Algorithm SHA512withRSA\r\n    [write] MD5 and SHA1 hashes:  len = 264\r\n    0000: 0F 00 01 04 06 01 01 00   60 E9 E3 AE 11 C5 34 76  ........`.....4v\r\n    ...\r\n    0100: A2 41 B2 48 5D DA BE 27                            .A.H]..&#39;\r\n    Thread-0, WRITE: TLSv1.2 Handshake, length = 264\r\n    Thread-0, waiting for close_notify or alert: state 1\r\n    Thread-0, Exception while waiting for close java.net.SocketException: Connection reset\r\n    Thread-0, handling exception: java.net.SocketException: Connection reset\r\n    %% Invalidated:  [Session-1, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256]\r\n    Thread-0, SEND TLSv1.2 ALERT:  fatal, description = unexpected_message\r\n    Thread-0, WRITE: TLSv1.2 Alert, length = 2\r\n    Thread-0, Exception sending alert: java.net.SocketException: Connection reset by peer: socket write error\r\n    Thread-0, called closeSocket()\r\n    Thread-0, called close()\r\n    Thread-0, called closeInternal(true)\r\n    java.net.SocketException: Connection reset\r\n\r\nI am not even sure how to interpret this, out of my depth here. The guides on debugging ssl/tls connections I&#39;ve found are not covering this part.\r\n\r\n-----------UPDATE-----------\r\n\r\nA bit more staring in logs, I noticed that in certificate chains of both server and client Signature Algorithm is SHA256withRSA, while for CertificateVerify message Signature Algorithm is SHA512withRSA. Can it be the reason?","title":"Connection reset during TLS certificate verify (java + rabbit mq)","body":"<p>I am developing a java client to consume from rabbitmq (using amqp-client lib). All works fine until I start using ssl protocol. In java log I see</p>\n<blockquote>\n<p>java.net.SocketException: Connection reset</p>\n</blockquote>\n<p>And in rabbitmq logs there is only</p>\n<blockquote>\n<p>SSL: certify: ssl_handshake.erl:1490:Fatal error: unknown ca</p>\n</blockquote>\n<p>I have checked ceriticates, all seem fine. Then I enabled ssl debug in java. Looking at ssl logs it seems that actually server and client are interacting fine. I see that trusted certificate is found, clienthello and serverhello finish correctly, but at certificate verification step the connection is reset:</p>\n<pre><code>*** CertificateVerify\nSignature Algorithm SHA512withRSA\n[write] MD5 and SHA1 hashes:  len = 264\n0000: 0F 00 01 04 06 01 01 00   60 E9 E3 AE 11 C5 34 76  ........`.....4v\n...\n0100: A2 41 B2 48 5D DA BE 27                            .A.H]..'\nThread-0, WRITE: TLSv1.2 Handshake, length = 264\nThread-0, waiting for close_notify or alert: state 1\nThread-0, Exception while waiting for close java.net.SocketException: Connection reset\nThread-0, handling exception: java.net.SocketException: Connection reset\n%% Invalidated:  [Session-1, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256]\nThread-0, SEND TLSv1.2 ALERT:  fatal, description = unexpected_message\nThread-0, WRITE: TLSv1.2 Alert, length = 2\nThread-0, Exception sending alert: java.net.SocketException: Connection reset by peer: socket write error\nThread-0, called closeSocket()\nThread-0, called close()\nThread-0, called closeInternal(true)\njava.net.SocketException: Connection reset\n</code></pre>\n<p>I am not even sure how to interpret this, out of my depth here. The guides on debugging ssl/tls connections I've found are not covering this part.</p>\n<p>-----------UPDATE-----------</p>\n<p>A bit more staring in logs, I noticed that in certificate chains of both server and client Signature Algorithm is SHA256withRSA, while for CertificateVerify message Signature Algorithm is SHA512withRSA. Can it be the reason?</p>\n"},{"tags":["java","docker","rabbitmq"],"comments":[{"owner":{"account_id":4640113,"reputation":2872,"user_id":3760216,"accept_rate":36,"display_name":"Sachith Muhandiram"},"score":0,"creation_date":1670555662,"post_id":74738515,"comment_id":131906833,"body_markdown":"Did you follow the steps given https://registry.hub.docker.com/_/rabbitmq/ ? setting users/passwords, management plugins etc?","body":"Did you follow the steps given <a href=\"https://registry.hub.docker.com/_/rabbitmq/\" rel=\"nofollow noreferrer\">registry.hub.docker.com/_/rabbitmq</a> ? setting users/passwords, management plugins etc?"},{"owner":{"account_id":16506411,"reputation":1143,"user_id":11926338,"display_name":"Pavel Petrashov"},"score":1,"creation_date":1670555855,"post_id":74738515,"comment_id":131906859,"body_markdown":"@\nSachith Muhandiram Yes, it works with guest/guest on 5672 and 15672 and it works with changed 15673 but doesn&#39;t work with changed 5673. I don&#39;t touch anything except ports mapping","body":"@ Sachith Muhandiram Yes, it works with guest/guest on 5672 and 15672 and it works with changed 15673 but doesn&#39;t work with changed 5673. I don&#39;t touch anything except ports mapping"}],"answers":[{"tags":[],"owner":{"account_id":16506411,"reputation":1143,"user_id":11926338,"display_name":"Pavel Petrashov"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1670556511,"creation_date":1670556511,"answer_id":74738636,"question_id":74738515,"body_markdown":"\r\nI changed the code to this and it works. Thanks, RabbitMQ for so obvious code!\r\n\r\n    \r\n\r\n        ConnectionFactory factory = new ConnectionFactory();\r\n        factory.setPort(5673);\r\n        factory.setHost(&quot;localhost&quot;);\r\n        factory.setUsername(&quot;guest&quot;);\r\n        factory.setPassword(&quot;guest&quot;);\r\n        Connection connection = factory.newConnection();\r\n        Channel channel = connection.createChannel();","title":"RabbitMQ in Docker throws exception when I try to connect from java with custom port","body":"<p>I changed the code to this and it works. Thanks, RabbitMQ for so obvious code!</p>\n<pre><code>    ConnectionFactory factory = new ConnectionFactory();\n    factory.setPort(5673);\n    factory.setHost(&quot;localhost&quot;);\n    factory.setUsername(&quot;guest&quot;);\n    factory.setPassword(&quot;guest&quot;);\n    Connection connection = factory.newConnection();\n    Channel channel = connection.createChannel();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697120421,"creation_date":1670776217,"answer_id":74762547,"question_id":74738515,"body_markdown":"You are using an HTTP URI - `http://localhost:5673`\r\n\r\nYou should be using an AMQP URI - `amqp://localhost:5673`\r\n\r\nI&#39;m kind of surprised the first one worked at all, without a parsing error. My guess is that since the scheme (`http`) was not correct, the client used the default of `localhost:5672`.\r\n\r\nAMQP URIs are documented here - https://www.rabbitmq.com/uri-spec.html\r\n","title":"RabbitMQ in Docker throws exception when I try to connect from java with custom port","body":"<p>You are using an HTTP URI - <code>http://localhost:5673</code></p>\n<p>You should be using an AMQP URI - <code>amqp://localhost:5673</code></p>\n<p>I'm kind of surprised the first one worked at all, without a parsing error. My guess is that since the scheme (<code>http</code>) was not correct, the client used the default of <code>localhost:5672</code>.</p>\n<p>AMQP URIs are documented here - <a href=\"https://www.rabbitmq.com/uri-spec.html\" rel=\"nofollow noreferrer\">https://www.rabbitmq.com/uri-spec.html</a></p>\n"}],"owner":{"account_id":16506411,"reputation":1143,"user_id":11926338,"display_name":"Pavel Petrashov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":232,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1697120421,"creation_date":1670555056,"question_id":74738515,"body_markdown":"I run RabbitMQ in docker using this command:\r\n\r\n    docker run --rm -it --hostname my-rabbit -p 15672:15672 -p 5672:5672 rabbitmq:3-management\r\n\r\nIt works and I can connect to RabitMq from java: \r\n\r\n    ConnectionFactory factory = new ConnectionFactory();\r\n    factory.setUsername(&quot;guest&quot;);\r\n    factory.setPassword(&quot;guest&quot;);\r\n    Connection connection = factory.newConnection(&quot;http://localhost:5672&quot;);\r\n\r\nBut I need to change port and I do this:\r\n\r\n    docker run --rm -it --hostname my-rabbit -p 15673:15672 -p 5673:5672 rabbitmq:3-management\r\n\r\nWhen I open http://localhost:15673/ - it works. I see the admin console. But when I try to connect \r\n\r\n        ConnectionFactory factory = new ConnectionFactory();\r\n        factory.setUsername(&quot;guest&quot;);\r\n        factory.setPassword(&quot;guest&quot;);\r\n        Connection connection = factory.newConnection(&quot;http://localhost:5673&quot;);\r\n\r\nI get an exception:\r\n\r\n    Exception in thread &quot;main&quot; java.net.ConnectException: Connection refused: connect\r\n    \tat java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)\r\n    \tat java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:81)\r\n    \tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:476)\r\n    \tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:218)\r\n    \tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:200)\r\n    \tat java.net.PlainSocketImpl.connect(PlainSocketImpl.java:162)\r\n    \tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:394)\r\n    \tat java.net.Socket.connect(Socket.java:606)\r\n    \tat com.rabbitmq.client.impl.SocketFrameHandlerFactory.create(SocketFrameHandlerFactory.java:59)\r\n    \tat com.rabbitmq.client.impl.recovery.RecoveryAwareAMQConnectionFactory.newConnection(RecoveryAwareAMQConnectionFactory.java:63)\r\n    \tat com.rabbitmq.client.impl.recovery.AutorecoveringConnection.init(AutorecoveringConnection.java:160)\r\n    \tat com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1216)\r\n    \tat com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1173)\r\n    \tat com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1310)\r\n    \tat com.project.Main.main(Main.java:14)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nEDIT: When I use port 5672 without changes I see this (maybe it can help)\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/53NcN.png\r\n  [2]: https://i.stack.imgur.com/BNukx.png","title":"RabbitMQ in Docker throws exception when I try to connect from java with custom port","body":"<p>I run RabbitMQ in docker using this command:</p>\n<pre><code>docker run --rm -it --hostname my-rabbit -p 15672:15672 -p 5672:5672 rabbitmq:3-management\n</code></pre>\n<p>It works and I can connect to RabitMq from java:</p>\n<pre><code>ConnectionFactory factory = new ConnectionFactory();\nfactory.setUsername(&quot;guest&quot;);\nfactory.setPassword(&quot;guest&quot;);\nConnection connection = factory.newConnection(&quot;http://localhost:5672&quot;);\n</code></pre>\n<p>But I need to change port and I do this:</p>\n<pre><code>docker run --rm -it --hostname my-rabbit -p 15673:15672 -p 5673:5672 rabbitmq:3-management\n</code></pre>\n<p>When I open http://localhost:15673/ - it works. I see the admin console. But when I try to connect</p>\n<pre><code>    ConnectionFactory factory = new ConnectionFactory();\n    factory.setUsername(&quot;guest&quot;);\n    factory.setPassword(&quot;guest&quot;);\n    Connection connection = factory.newConnection(&quot;http://localhost:5673&quot;);\n</code></pre>\n<p>I get an exception:</p>\n<pre><code>Exception in thread &quot;main&quot; java.net.ConnectException: Connection refused: connect\n    at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)\n    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:81)\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:476)\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:218)\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:200)\n    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:162)\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:394)\n    at java.net.Socket.connect(Socket.java:606)\n    at com.rabbitmq.client.impl.SocketFrameHandlerFactory.create(SocketFrameHandlerFactory.java:59)\n    at com.rabbitmq.client.impl.recovery.RecoveryAwareAMQConnectionFactory.newConnection(RecoveryAwareAMQConnectionFactory.java:63)\n    at com.rabbitmq.client.impl.recovery.AutorecoveringConnection.init(AutorecoveringConnection.java:160)\n    at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1216)\n    at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1173)\n    at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1310)\n    at com.project.Main.main(Main.java:14)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/53NcN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/53NcN.png\" alt=\"enter image description here\" /></a></p>\n<p>EDIT: When I use port 5672 without changes I see this (maybe it can help)\n<a href=\"https://i.stack.imgur.com/BNukx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BNukx.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":10153177,"reputation":5292,"user_id":7499069,"display_name":"tuhin47"},"score":0,"creation_date":1697135960,"post_id":77281426,"comment_id":136245300,"body_markdown":"You can use Computable Future and Push 5 tasks each second using a Thread sleep in the main Thread.","body":"You can use Computable Future and Push 5 tasks each second using a Thread sleep in the main Thread."},{"owner":{"account_id":13606858,"reputation":161,"user_id":9815739,"display_name":"fjavierm"},"score":1,"creation_date":1697141582,"post_id":77281426,"comment_id":136246138,"body_markdown":"Maybe, take a look to the `RateLimiter` object in the Guava library.","body":"Maybe, take a look to the <code>RateLimiter</code> object in the Guava library."}],"owner":{"account_id":5708598,"reputation":8967,"user_id":4511325,"accept_rate":66,"display_name":"None"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697120389,"creation_date":1697120389,"question_id":77281426,"body_markdown":"I have this code\r\n\r\n      int concurrentCalls = 5;\r\n        ScheduledExecutorService executorService = Executors.newScheduledThreadPool(concurrentCalls);\r\n        AtomicLong time = new AtomicLong(0);\r\n\r\n        try {\r\n            for (Incident incidentOrChangeReq : listIncidentsOrChangeRequests) {\r\n                enforceRateLimit();\r\n\r\n                semaphore.acquire();\r\n                executorService.submit(() -&gt; {\r\n                    Object listDetailsObject = new Object();\r\n                    try {\r\n                        final StopWatch outageDetailsTime = new StopWatch();\r\n                        outageDetailsTime.start();\r\n\r\n                        listDetailsObject = integrationClient.getOutageDetails(accountId, incidentOrChangeReq.getNumber());\r\n\r\n                        outageDetailsTime.stop();\r\n\r\n                        time.addAndGet(outageDetailsTime.getTotalTimeMillis());\r\n                        log.error(&quot;outage details time: &quot; + outageDetailsTime.getTotalTimeMillis());\r\n\r\n                        final StopWatch setJsonTime = new StopWatch();\r\n                        setJsonTime.start();\r\n                        String detailsListJSON = ow.writeValueAsString(listDetailsObject);\r\n                        JSONObject jsonObject1 = new JSONObject(detailsListJSON);\r\n\r\n                        setValues(typeOfExport, jsonObject1, mapper, incidentOrChangeReq);\r\n                        setJsonTime.stop();\r\n                    } catch (Exception e) {\r\n                        log.error(e.getMessage());\r\n                    } finally {\r\n                        semaphore.release(); // Release the permit\r\n                    }\r\n                });\r\n            }\r\n        } catch (InterruptedException e) {\r\n            log.error(&quot;InterruptedException caught: &quot; + e.getMessage());\r\n            Thread.currentThread().interrupt();\r\n        } catch (Exception e) {\r\n            log.error(e.getMessage());\r\n        }\r\n\r\nWhat i want to achive is to call max 5 request per second, that is this part of code\r\n\r\n      listDetailsObject = integrationClient.getOutageDetails(accountId, incidentOrChangeReq.getNumber());\r\n\r\nand if sum of those 5 request is smaller than 1second to wait for that difference and than continue to next 5 request and so on.. Any suggestion?\r\n","title":"Handle max 5 request per second?","body":"<p>I have this code</p>\n<pre><code>  int concurrentCalls = 5;\n    ScheduledExecutorService executorService = Executors.newScheduledThreadPool(concurrentCalls);\n    AtomicLong time = new AtomicLong(0);\n\n    try {\n        for (Incident incidentOrChangeReq : listIncidentsOrChangeRequests) {\n            enforceRateLimit();\n\n            semaphore.acquire();\n            executorService.submit(() -&gt; {\n                Object listDetailsObject = new Object();\n                try {\n                    final StopWatch outageDetailsTime = new StopWatch();\n                    outageDetailsTime.start();\n\n                    listDetailsObject = integrationClient.getOutageDetails(accountId, incidentOrChangeReq.getNumber());\n\n                    outageDetailsTime.stop();\n\n                    time.addAndGet(outageDetailsTime.getTotalTimeMillis());\n                    log.error(&quot;outage details time: &quot; + outageDetailsTime.getTotalTimeMillis());\n\n                    final StopWatch setJsonTime = new StopWatch();\n                    setJsonTime.start();\n                    String detailsListJSON = ow.writeValueAsString(listDetailsObject);\n                    JSONObject jsonObject1 = new JSONObject(detailsListJSON);\n\n                    setValues(typeOfExport, jsonObject1, mapper, incidentOrChangeReq);\n                    setJsonTime.stop();\n                } catch (Exception e) {\n                    log.error(e.getMessage());\n                } finally {\n                    semaphore.release(); // Release the permit\n                }\n            });\n        }\n    } catch (InterruptedException e) {\n        log.error(&quot;InterruptedException caught: &quot; + e.getMessage());\n        Thread.currentThread().interrupt();\n    } catch (Exception e) {\n        log.error(e.getMessage());\n    }\n</code></pre>\n<p>What i want to achive is to call max 5 request per second, that is this part of code</p>\n<pre><code>  listDetailsObject = integrationClient.getOutageDetails(accountId, incidentOrChangeReq.getNumber());\n</code></pre>\n<p>and if sum of those 5 request is smaller than 1second to wait for that difference and than continue to next 5 request and so on.. Any suggestion?</p>\n"},{"tags":["java","rabbitmq"],"answers":[{"tags":[],"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697120320,"creation_date":1675959746,"answer_id":75401503,"question_id":75378109,"body_markdown":"No, there is not at this time. You should configure the default to be greater than the longest expected job duration. Please note that if you are using quorum queues this may cause disk usage growth because the log files can&#39;t be compacted while messages are outstanding.\r\n\r\nWe may make this timeout configurable in a more granular way, so please keep an eye on future RabbitMQ releases for that.\r\n\r\n","title":"Anyway to set RMQ Consumer delivery timeout on per-message level?","body":"<p>No, there is not at this time. You should configure the default to be greater than the longest expected job duration. Please note that if you are using quorum queues this may cause disk usage growth because the log files can't be compacted while messages are outstanding.</p>\n<p>We may make this timeout configurable in a more granular way, so please keep an eye on future RabbitMQ releases for that.</p>\n"}],"owner":{"account_id":8269449,"reputation":67,"user_id":6217646,"display_name":"Wayne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697120320,"creation_date":1675798101,"question_id":75378109,"body_markdown":"We have a use case that holds active jobs in a RabbitMQ job queue.   The Clients, when they are free, pull jobs from this queue.   Pretty normal.   But in our case, we do not ACK the jobs.   We allow them to stay in the Unacked state so if the Client dies, the job goes to a pre-defined DeadLetter queue.   We then have a process that pulls messages from dead-letter, and decides to either requeue message back to original job-queue, or discard.    \r\n\r\nThis has worked well for a long time.    Now, we have upgraded to a newer version of RMQ, and found that we get disconnects with PRECONDITION_FAILED, because the default ack timeout of 30 minutes has expired.\r\n\r\nBeyond removing this from the server, does anyone know a way to configure this on a per-message level?\r\n\r\nWhile some might say just ACK the job, and use a handler to return to DEADLETTER if needed.    Well, sorry, that will not work for us.\r\n\r\nSo, any thoughts?\r\n\r\n","title":"Anyway to set RMQ Consumer delivery timeout on per-message level?","body":"<p>We have a use case that holds active jobs in a RabbitMQ job queue.   The Clients, when they are free, pull jobs from this queue.   Pretty normal.   But in our case, we do not ACK the jobs.   We allow them to stay in the Unacked state so if the Client dies, the job goes to a pre-defined DeadLetter queue.   We then have a process that pulls messages from dead-letter, and decides to either requeue message back to original job-queue, or discard.</p>\n<p>This has worked well for a long time.    Now, we have upgraded to a newer version of RMQ, and found that we get disconnects with PRECONDITION_FAILED, because the default ack timeout of 30 minutes has expired.</p>\n<p>Beyond removing this from the server, does anyone know a way to configure this on a per-message level?</p>\n<p>While some might say just ACK the job, and use a handler to return to DEADLETTER if needed.    Well, sorry, that will not work for us.</p>\n<p>So, any thoughts?</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":22124145,"reputation":137,"user_id":16376831,"display_name":"Unknown Guy"},"score":0,"creation_date":1625409175,"post_id":68245744,"comment_id":120614686,"body_markdown":"Already tried this one but it not populating nested ObjectProperty e.g `details`","body":"Already tried this one but it not populating nested ObjectProperty e.g <code>details</code>"},{"owner":{"account_id":8794729,"reputation":15307,"user_id":6572971,"display_name":"Alien"},"score":0,"creation_date":1625409252,"post_id":68245744,"comment_id":120614706,"body_markdown":"Try serializationUtils which performs deep copy.","body":"Try serializationUtils which performs deep copy."},{"owner":{"account_id":22124145,"reputation":137,"user_id":16376831,"display_name":"Unknown Guy"},"score":0,"creation_date":1625410591,"post_id":68245744,"comment_id":120615110,"body_markdown":"`The method clone(T) in the type SerializationUtils is not applicable for the arguments ` on customerList=SerializationUtils.clone(empList)","body":"<code>The method clone(T) in the type SerializationUtils is not applicable for the arguments </code> on customerList=SerializationUtils.clone(empList)"},{"owner":{"account_id":10487463,"reputation":936,"user_id":7730507,"display_name":"chetan"},"score":0,"creation_date":1645530054,"post_id":68245744,"comment_id":125890297,"body_markdown":"If using org.springframework.beans.BeanUtils then - `BeanUtils.copyProperties(oldObject, newObject );`","body":"If using org.springframework.beans.BeanUtils then - <code>BeanUtils.copyProperties(oldObject, newObject );</code>"}],"tags":[],"owner":{"account_id":8794729,"reputation":15307,"user_id":6572971,"display_name":"Alien"},"comment_count":4,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1625409310,"creation_date":1625409097,"answer_id":68245744,"question_id":68245716,"body_markdown":"You can use [`BeanUtils`](http://commons.apache.org/proper/commons-beanutils):\r\n\r\n \r\n    import org.apache.commons.beanutils.BeanUtils;\r\n\r\n    Employee newObject = new Employee(); \r\n    BeanUtils.copyProperties(newObject, oldObject);\r\n\r\nIf looking for deep copy then Use  [*SerializationUtils.clone*](https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/SerializationUtils.html#clone(T)) method from the [Apache Commons Lang](https://commons.apache.org/proper/commons-lang/). It copies the entire class hierarchy.\r\n\r\n    SerializationUtils.clone(object);\r\n\r\n\r\n","title":"How do copy properties from one object to another in java","body":"<p>You can use <a href=\"http://commons.apache.org/proper/commons-beanutils\" rel=\"noreferrer\"><code>BeanUtils</code></a>:</p>\n<pre><code>import org.apache.commons.beanutils.BeanUtils;\n\nEmployee newObject = new Employee(); \nBeanUtils.copyProperties(newObject, oldObject);\n</code></pre>\n<p>If looking for deep copy then Use  <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/SerializationUtils.html#clone(T)\" rel=\"noreferrer\"><em>SerializationUtils.clone</em></a> method from the <a href=\"https://commons.apache.org/proper/commons-lang/\" rel=\"noreferrer\">Apache Commons Lang</a>. It copies the entire class hierarchy.</p>\n<pre><code>SerializationUtils.clone(object);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697119922,"creation_date":1625415585,"answer_id":68246700,"question_id":68245716,"body_markdown":"Reflection is usually the worst way to accomplish something:\r\n\r\n* Reflection cannot be checked at compile-time for errors.\r\n* Reflection is rarely optimized by the Java runtime.\r\n* Relying on identical property names is invisible to maintainers of either class.\r\n\r\nInstead, you can create an additional constructor:\r\n\r\n    public Customer(Employee source) {\r\n        setCustomerName(source.getEmployeeName());\r\n        setAge(source.getAge());\r\n\r\n        if (source.getDetails() != null) {\r\n            setDetails(new CustomerDetails(source.getDetails()));\r\n        }\r\n    }\r\n\r\nAnd:\r\n\r\n    public CustomerDetails(EmployeeDetails source) {\r\n        setName(source.getName());\r\n        setSalary(source.getSalary());\r\n    }\r\n\r\nThat way, everything is checked for correctness when you compile.  Also, you can be smart about copying mutable child objects.\r\n\r\nBefore you object to how much work it is to write the get- and set-calls by hand, consider that you only have to write the code once.  It won’t really take that much time, will it?\r\n","title":"How do copy properties from one object to another in java","body":"<p>Reflection is usually the worst way to accomplish something:</p>\n<ul>\n<li>Reflection cannot be checked at compile-time for errors.</li>\n<li>Reflection is rarely optimized by the Java runtime.</li>\n<li>Relying on identical property names is invisible to maintainers of either class.</li>\n</ul>\n<p>Instead, you can create an additional constructor:</p>\n<pre><code>public Customer(Employee source) {\n    setCustomerName(source.getEmployeeName());\n    setAge(source.getAge());\n\n    if (source.getDetails() != null) {\n        setDetails(new CustomerDetails(source.getDetails()));\n    }\n}\n</code></pre>\n<p>And:</p>\n<pre><code>public CustomerDetails(EmployeeDetails source) {\n    setName(source.getName());\n    setSalary(source.getSalary());\n}\n</code></pre>\n<p>That way, everything is checked for correctness when you compile.  Also, you can be smart about copying mutable child objects.</p>\n<p>Before you object to how much work it is to write the get- and set-calls by hand, consider that you only have to write the code once.  It won’t really take that much time, will it?</p>\n"}],"owner":{"account_id":22124145,"reputation":137,"user_id":16376831,"display_name":"Unknown Guy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22437,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1697119922,"creation_date":1625408879,"question_id":68245716,"body_markdown":"I am having two objects `Employee` and `Customer` having similar object properties like `name, id etc`  I want to populate objects vice versa from `List&lt;Employee&gt; empList` to `List&lt;Customer&gt; customerList` and vice versa.\r\n\r\n       List&lt;Employee&gt; empList=getEmployeeList();\r\n       // Here is what i am trying so far\r\n       List&lt;Customer&gt; cutomers=new ArrayList&lt;Customer&gt;();\r\n       empList.foreach(e-&gt;{\r\n         Customer customer = new Customer();\r\n         customer.setCustomerName(e.getEmploueeName());//etc\r\n         customers.add(cutomer);\r\n       })\r\n       // what i am looking for\r\n       List&lt;Customer&gt; customers=Utils.getObject(empList,Customer.class);\r\n\r\nHere is java POJO\r\n     \r\n    class Employee {\r\n\r\n     private String employeeName;\r\n\r\n     private int age;\r\n\r\n     private EmployeeDetails details;\r\n     }\r\n\r\n    class EmployeeDetails {\r\n      private String name;\r\n\r\n      private int salary;\r\n     }\r\n\r\n\r\n    class Customer{\r\n\r\n     private String customerName;\r\n\r\n     private int age;\r\n\r\n     private CustomerDetails details;\r\n    }\r\n\r\n    class CustomerDetails {\r\n     private String name;\r\n\r\n     private int salary;\r\n    }\r\n\r\nInstead of populating list from employee to customer and vice versa i want to use any 3rd part library like `Apache Commons` ","title":"How do copy properties from one object to another in java","body":"<p>I am having two objects <code>Employee</code> and <code>Customer</code> having similar object properties like <code>name, id etc</code>  I want to populate objects vice versa from <code>List&lt;Employee&gt; empList</code> to <code>List&lt;Customer&gt; customerList</code> and vice versa.</p>\n<pre><code>   List&lt;Employee&gt; empList=getEmployeeList();\n   // Here is what i am trying so far\n   List&lt;Customer&gt; cutomers=new ArrayList&lt;Customer&gt;();\n   empList.foreach(e-&gt;{\n     Customer customer = new Customer();\n     customer.setCustomerName(e.getEmploueeName());//etc\n     customers.add(cutomer);\n   })\n   // what i am looking for\n   List&lt;Customer&gt; customers=Utils.getObject(empList,Customer.class);\n</code></pre>\n<p>Here is java POJO</p>\n<pre><code>class Employee {\n\n private String employeeName;\n\n private int age;\n\n private EmployeeDetails details;\n }\n\nclass EmployeeDetails {\n  private String name;\n\n  private int salary;\n }\n\n\nclass Customer{\n\n private String customerName;\n\n private int age;\n\n private CustomerDetails details;\n}\n\nclass CustomerDetails {\n private String name;\n\n private int salary;\n}\n</code></pre>\n<p>Instead of populating list from employee to customer and vice versa i want to use any 3rd part library like <code>Apache Commons</code></p>\n"},{"tags":["java","oracle","dll","jdbc","64-bit"],"comments":[{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":2,"creation_date":1326876661,"post_id":8907361,"comment_id":11140876,"body_markdown":"is your jdk 64 bit? Most likely is a 32 bit ( from the error message)","body":"is your jdk 64 bit? Most likely is a 32 bit ( from the error message)"},{"owner":{"account_id":1044371,"reputation":10970,"user_id":1049678,"display_name":"Aviram Segal"},"score":0,"creation_date":1326877183,"post_id":8907361,"comment_id":11141022,"body_markdown":"Seems like you did not set the ORACLE_HOME environment variable to point to where your oracle installation is.\n\n`\\bin\\ocijdbc11.dll` should have been `c:\\xxxxxx\\bin\\ocijdbc11.dll`","body":"Seems like you did not set the ORACLE_HOME environment variable to point to where your oracle installation is.  <code>\\bin\\ocijdbc11.dll</code> should have been <code>c:\\xxxxxx\\bin\\ocijdbc11.dll</code>"},{"owner":{"account_id":1066374,"reputation":31120,"user_id":1066828,"accept_rate":95,"display_name":"Fahim Parkar"},"score":0,"creation_date":1326877776,"post_id":8907361,"comment_id":11141181,"body_markdown":"check if this link helps you\nhttp://www.coderanch.com/t/564587/JBoss/Jboss-Oracle-ocijdbc-dll-find","body":"check if this link helps you <a href=\"http://www.coderanch.com/t/564587/JBoss/Jboss-Oracle-ocijdbc-dll-find\" rel=\"nofollow noreferrer\">coderanch.com/t/564587/JBoss/Jboss-Oracle-ocijdbc-dll-find</a>"},{"owner":{"account_id":1180776,"reputation":71,"user_id":1155744,"display_name":"pun sri"},"score":0,"creation_date":1326878491,"post_id":8907361,"comment_id":11141415,"body_markdown":"My ORACLE_HOME alos points to the dll, still getting the same error.","body":"My ORACLE_HOME alos points to the dll, still getting the same error."},{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":0,"creation_date":1326885014,"post_id":8907361,"comment_id":11143269,"body_markdown":"@Pun Sri : For some reason you application is 32 bit. How are you running the app? Could you check the java path?","body":"@Pun Sri : For some reason you application is 32 bit. How are you running the app? Could you check the java path?"},{"owner":{"account_id":1180776,"reputation":71,"user_id":1155744,"display_name":"pun sri"},"score":0,"creation_date":1326885190,"post_id":8907361,"comment_id":11143309,"body_markdown":"I am running it from eclipse, right click on java program and run as java application.","body":"I am running it from eclipse, right click on java program and run as java application."},{"owner":{"account_id":74042,"reputation":13420,"user_id":212952,"display_name":"Tomas Narros"},"score":1,"creation_date":1326887578,"post_id":8907361,"comment_id":11144018,"body_markdown":"Check at the Eclipse project properties which JDK version is aplied to your project. Also check it at the Run/Debug configuration which you use to start the app. If you have multiple JDKs installed, it&#39;s easy that Eclipse is defaulting to other than the last installed","body":"Check at the Eclipse project properties which JDK version is aplied to your project. Also check it at the Run/Debug configuration which you use to start the app. If you have multiple JDKs installed, it&#39;s easy that Eclipse is defaulting to other than the last installed"}],"answers":[{"tags":[],"owner":{"account_id":74042,"reputation":13420,"user_id":212952,"display_name":"Tomas Narros"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1326877012,"creation_date":1326877012,"answer_id":8907454,"question_id":8907361,"body_markdown":"This error seems to be related with the compatibility of the OCI driver version with your Windows version.  \r\nCheck if your OCI driver is compatible with a 32 bit architecture or else is for a 64 bit (and hence the error).\r\n\r\nHere (https://forums.oracle.com/forums/thread.jspa?threadID=2189215) you can find a close related error (same error, for a different library), which finally was fixed downloading the S.O. specific version of the library and reinstalling it.\r\n\r\n**EDIT**: so, after your edition, it seems that you have to install the 64 bit JDK and run your application on it, as your driver and your OS are aligned (64 bit).\r\n\r\n","title":"Java Exception : java.lang.UnsatisfiedLinkError: ocijdbc11.dll: %1 is not a valid Win32 application","body":"<p>This error seems to be related with the compatibility of the OCI driver version with your Windows version.<br>\nCheck if your OCI driver is compatible with a 32 bit architecture or else is for a 64 bit (and hence the error).</p>\n\n<p>Here (https://forums.oracle.com/forums/thread.jspa?threadID=2189215) you can find a close related error (same error, for a different library), which finally was fixed downloading the S.O. specific version of the library and reinstalling it.</p>\n\n<p><strong>EDIT</strong>: so, after your edition, it seems that you have to install the 64 bit JDK and run your application on it, as your driver and your OS are aligned (64 bit).</p>\n"},{"tags":[],"owner":{"account_id":898371,"reputation":801,"user_id":935154,"accept_rate":100,"display_name":"jcadcell"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1332184032,"creation_date":1332184032,"answer_id":9776327,"question_id":8907361,"body_markdown":"This error may also come from 64 bit version of Java 7 and using 32 bit Oracle drivers.  An application I used was supposed to use 32 bit Java 6, but an administrator installed Java 7, which apparently caused this error.","title":"Java Exception : java.lang.UnsatisfiedLinkError: ocijdbc11.dll: %1 is not a valid Win32 application","body":"<p>This error may also come from 64 bit version of Java 7 and using 32 bit Oracle drivers.  An application I used was supposed to use 32 bit Java 6, but an administrator installed Java 7, which apparently caused this error.</p>\n"},{"tags":[],"owner":{"account_id":6107895,"reputation":966,"user_id":4765125,"display_name":"Javier Rodriguez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489356966,"creation_date":1489356966,"answer_id":42753855,"question_id":8907361,"body_markdown":"This error only happen on windows, to solve just copy your dll&#39;s into C:\\Windows\\System32, it works for me!","title":"Java Exception : java.lang.UnsatisfiedLinkError: ocijdbc11.dll: %1 is not a valid Win32 application","body":"<p>This error only happen on windows, to solve just copy your dll's into C:\\Windows\\System32, it works for me!</p>\n"},{"tags":[],"owner":{"account_id":13128419,"reputation":1,"user_id":19242415,"display_name":"Binam "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675277622,"creation_date":1675277622,"answer_id":75314890,"question_id":8907361,"body_markdown":"Firstly, you should have Oracle client 12 of 64 bit installed.\r\nSecondly, copy ocijdbc11.dll to JDK--&gt; inside bin folder and also to  C:\\Windows\\System32 folder.\r\n\r\nThis should probably work.","title":"Java Exception : java.lang.UnsatisfiedLinkError: ocijdbc11.dll: %1 is not a valid Win32 application","body":"<p>Firstly, you should have Oracle client 12 of 64 bit installed.\nSecondly, copy ocijdbc11.dll to JDK--&gt; inside bin folder and also to  C:\\Windows\\System32 folder.</p>\n<p>This should probably work.</p>\n"},{"tags":[],"owner":{"account_id":13128419,"reputation":1,"user_id":19242415,"display_name":"Binam "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697119911,"creation_date":1697119877,"answer_id":77281359,"question_id":8907361,"body_markdown":"In my case\r\nThis issue was due to 64-bit jdk trying to connect to Oracle client 32-bit.\r\nI was able to fix the issue by downloading Oracle client of 64-bit on my machine which made the connection of 64-bit jdk to 64-bit Oracle.","title":"Java Exception : java.lang.UnsatisfiedLinkError: ocijdbc11.dll: %1 is not a valid Win32 application","body":"<p>In my case\nThis issue was due to 64-bit jdk trying to connect to Oracle client 32-bit.\nI was able to fix the issue by downloading Oracle client of 64-bit on my machine which made the connection of 64-bit jdk to 64-bit Oracle.</p>\n"}],"owner":{"account_id":1180776,"reputation":71,"user_id":1155744,"display_name":"pun sri"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13499,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1697119911,"creation_date":1326876479,"question_id":8907361,"body_markdown":"I am trying to make a connection to oracle through java program. Following is the configuration.\r\n\r\n1. Windows 7, 64 bit.\r\n2. JDK 1.6\r\n3. Oracle client 11g R2, 64 bit.\r\n4. ojdbc6.jar in the class path of my standalone application.\r\n\r\nBut I am getting following exception-\r\n&quot;**java.lang.UnsatisfiedLinkError: &lt;ORA-HONE&gt;\\bin\\ocijdbc11.dll: %1 is not a valid Win32 application**&quot;\r\n\r\nI googled alot but was not able to figure out the solution.\r\n\r\nPlease help me solve this problem.\r\n\r\nThanks in advance.","title":"Java Exception : java.lang.UnsatisfiedLinkError: ocijdbc11.dll: %1 is not a valid Win32 application","body":"<p>I am trying to make a connection to oracle through java program. Following is the configuration.</p>\n\n<ol>\n<li>Windows 7, 64 bit.</li>\n<li>JDK 1.6</li>\n<li>Oracle client 11g R2, 64 bit.</li>\n<li>ojdbc6.jar in the class path of my standalone application.</li>\n</ol>\n\n<p>But I am getting following exception-\n\"<strong>java.lang.UnsatisfiedLinkError: \\bin\\ocijdbc11.dll: %1 is not a valid Win32 application</strong>\"</p>\n\n<p>I googled alot but was not able to figure out the solution.</p>\n\n<p>Please help me solve this problem.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","swing","jtable"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1697102744,"post_id":77278601,"comment_id":136238388,"body_markdown":"How did they get to the right edge on the first? Look at the API docs for JTable and the text alignment field. If you switch between the cell editor and the cell (an inset JLabel) the renderer instance is different and you need to call repaint() after changes and perhaps revalidate() on the component.","body":"How did they get to the right edge on the first? Look at the API docs for JTable and the text alignment field. If you switch between the cell editor and the cell (an inset JLabel) the renderer instance is different and you need to call repaint() after changes and perhaps revalidate() on the component."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1697121025,"post_id":77278601,"comment_id":136242266,"body_markdown":"This question was originally closed as a duplicate of: https://stackoverflow.com/questions/13098846/how-to-color-specific-rows-in-a-jtable which shows how to color an entire row, which was not what the question is asking. That duplicate was removed and replaced with another showing how to change the alignment.","body":"This question was originally closed as a duplicate of: <a href=\"https://stackoverflow.com/questions/13098846/how-to-color-specific-rows-in-a-jtable\" title=\"how to color specific rows in a jtable\">stackoverflow.com/questions/13098846/&hellip;</a> which shows how to color an entire row, which was not what the question is asking. That duplicate was removed and replaced with another showing how to change the alignment."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1697121374,"post_id":77278601,"comment_id":136242344,"body_markdown":"The default renderer aligns the text to the left. In your custom renderer you need to change the alignment to align the text to the right. See the duplicate link for the JLabel method used to set the alignment. You may want to check out [Table Format Renderers](https://tips4java.wordpress.com/2008/10/11/table-format-renderers/) for reusable renderers that allow you to do basic formatting. You could then just extend the NumberRenderer and add your highlighting logic and not worry about the alignment.","body":"The default renderer aligns the text to the left. In your custom renderer you need to change the alignment to align the text to the right. See the duplicate link for the JLabel method used to set the alignment. You may want to check out <a href=\"https://tips4java.wordpress.com/2008/10/11/table-format-renderers/\" rel=\"nofollow noreferrer\">Table Format Renderers</a> for reusable renderers that allow you to do basic formatting. You could then just extend the NumberRenderer and add your highlighting logic and not worry about the alignment."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1697121526,"post_id":77278601,"comment_id":136242383,"body_markdown":"Also note your renderer code should NOT check the column. This renderer should be added to the specific column: `table.getColumnModel().getColumn(???).setCellRenderer(...);`","body":"Also note your renderer code should NOT check the column. This renderer should be added to the specific column: <code>table.getColumnModel().getColumn(???).setCellRenderer(...);</code>"}],"owner":{"account_id":27566231,"reputation":27,"user_id":21038368,"display_name":"wydra__"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1697119974,"answer_count":0,"score":0,"last_activity_date":1697119887,"creation_date":1697096413,"question_id":77278601,"body_markdown":"I have a JTable and in one column I have integers, so they are printed to the right edge, not to the left like strings. Now I want to make it so that if my integer value is greater than x, it is drawn in red. So I did it like this:\r\n\r\n    public class MyTableCellRenderer extends DefaultTableCellRenderer{\r\n\t\r\n    @Override\r\n\tpublic Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)\r\n\t{\r\n\t\tComponent cell = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\r\n\r\n\t\tif (column == 2)\r\n\t\t{\r\n\t\t\tInteger population = (Integer)value;\r\n\r\n\t\t\tif (population &gt; 20_000_000)\r\n\t\t\t\tcell.setForeground(Color.RED);\r\n\t\t\telse\r\n\t\t\t\tcell.setForeground(Color.BLACK);\r\n\t\t}\r\n\t\treturn cell;\r\n\t}}\r\n\r\n    \t...\tthis.setDefaultRenderer(Integer.class, new CountryTableCellRenderer());\r\n\r\n\r\nThe ccolour changes but then my numbers are displayed to the left edge so they are treated as Strings. Is it possible to treat it as a Integers? ","title":"Java JTable, TableCellRender how to change color of the Integer value in the cell","body":"<p>I have a JTable and in one column I have integers, so they are printed to the right edge, not to the left like strings. Now I want to make it so that if my integer value is greater than x, it is drawn in red. So I did it like this:</p>\n<pre><code>public class MyTableCellRenderer extends DefaultTableCellRenderer{\n\n@Override\npublic Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)\n{\n    Component cell = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n\n    if (column == 2)\n    {\n        Integer population = (Integer)value;\n\n        if (population &gt; 20_000_000)\n            cell.setForeground(Color.RED);\n        else\n            cell.setForeground(Color.BLACK);\n    }\n    return cell;\n}}\n\n    ... this.setDefaultRenderer(Integer.class, new CountryTableCellRenderer());\n</code></pre>\n<p>The ccolour changes but then my numbers are displayed to the left edge so they are treated as Strings. Is it possible to treat it as a Integers?</p>\n"},{"tags":["java","dependency-injection","guice"],"answers":[{"comments":[{"owner":{"account_id":445358,"reputation":5145,"user_id":837765,"accept_rate":91,"display_name":"Pier-Alexandre Bouchard"},"score":0,"creation_date":1338581964,"post_id":10856574,"comment_id":14141902,"body_markdown":"I know Singleton is an anti-pattern, but I am not the initial code designer, so I have to work with it!","body":"I know Singleton is an anti-pattern, but I am not the initial code designer, so I have to work with it!"},{"owner":{"account_id":445358,"reputation":5145,"user_id":837765,"accept_rate":91,"display_name":"Pier-Alexandre Bouchard"},"score":0,"creation_date":1338582016,"post_id":10856574,"comment_id":14141918,"body_markdown":"But, using the first way, it&#39;s possible that someone by error, forget about dependency injection and create the singleton instance with the new.. So we sould have, in that case, two singletons instance which is a problem (in my project, by example)","body":"But, using the first way, it&#39;s possible that someone by error, forget about dependency injection and create the singleton instance with the new.. So we sould have, in that case, two singletons instance which is a problem (in my project, by example)"},{"owner":{"account_id":1404268,"reputation":3364,"user_id":1332414,"accept_rate":100,"display_name":"Torious"},"score":0,"creation_date":1338582663,"post_id":10856574,"comment_id":14142097,"body_markdown":"Normally, you would limit the visibility of the implementation (`FooImpl`) to package private or so. Because you&#39;re right: Users should not create instances themselves. See [this link on keeping constructors hidden](http://code.google.com/p/google-guice/wiki/KeepConstructorsHidden). If you&#39;re stuck with `FooImpl` as it is, you&#39;re already beyond the best solution. I suppose binding the instance (your last suggestion) would be the second-best.","body":"Normally, you would limit the visibility of the implementation (<code>FooImpl</code>) to package private or so. Because you&#39;re right: Users should not create instances themselves. See <a href=\"http://code.google.com/p/google-guice/wiki/KeepConstructorsHidden\" rel=\"nofollow noreferrer\">this link on keeping constructors hidden</a>. If you&#39;re stuck with <code>FooImpl</code> as it is, you&#39;re already beyond the best solution. I suppose binding the instance (your last suggestion) would be the second-best."}],"tags":[],"owner":{"account_id":1404268,"reputation":3364,"user_id":1332414,"accept_rate":100,"display_name":"Torious"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1697119539,"creation_date":1338580570,"answer_id":10856574,"question_id":10855937,"body_markdown":"The first approach you suggest is preferred:\r\n\r\n    bind(Foo.class).to(FooImpl.class).in(Scopes.SINGLETON);\r\n\r\nThis allows Guice to perform dependency injection in `FooImpl` as needed. This is *not* possible when manually binding to an instance using `toInstance()` as in your last suggestion.\r\n\r\nFinally, the Singleton design pattern [is an anti-pattern for many reasons](http://misko.hevery.com/2008/08/25/root-cause-of-singletons/). Note that this refers to the implementation using `getInstance()` and so on; having a single instance of a class for the lifetime of your app (like objects in Guice&#39;s `SINGLETON` scope) is *not* bad by any means.\r\n\r\nAlso see [Guice&#39;s page on scopes](https://github.com/google/guice/wiki/Scopes) for some usage guidelines of the singleton scope.","title":"Two singletons instances with dependency injection (Google Guice)","body":"<p>The first approach you suggest is preferred:</p>\n<pre><code>bind(Foo.class).to(FooImpl.class).in(Scopes.SINGLETON);\n</code></pre>\n<p>This allows Guice to perform dependency injection in <code>FooImpl</code> as needed. This is <em>not</em> possible when manually binding to an instance using <code>toInstance()</code> as in your last suggestion.</p>\n<p>Finally, the Singleton design pattern <a href=\"http://misko.hevery.com/2008/08/25/root-cause-of-singletons/\" rel=\"nofollow noreferrer\">is an anti-pattern for many reasons</a>. Note that this refers to the implementation using <code>getInstance()</code> and so on; having a single instance of a class for the lifetime of your app (like objects in Guice's <code>SINGLETON</code> scope) is <em>not</em> bad by any means.</p>\n<p>Also see <a href=\"https://github.com/google/guice/wiki/Scopes\" rel=\"nofollow noreferrer\">Guice's page on scopes</a> for some usage guidelines of the singleton scope.</p>\n"}],"owner":{"account_id":445358,"reputation":5145,"user_id":837765,"accept_rate":91,"display_name":"Pier-Alexandre Bouchard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3463,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":10856574,"answer_count":1,"score":2,"last_activity_date":1697119539,"creation_date":1338577375,"question_id":10855937,"body_markdown":"I am working on a project using Depedency injection Google Guice Framework.\r\n\r\nIt&#39;s possible to bind a class with the singleton scope, in Guice as:\r\n\r\n    bind(Foo.class).to(FooImpl.class).in(Scopes.SINGLETON);\r\n\r\n\r\nIf `FooImpl` class is itself a real singleton class as:\r\n\r\n    public class FooImpl implements Foo{\r\n        public static final FooImpl INSTANCE = new FooImpl();\r\n        public static FooImpl getInstance(){...}\r\n        // ...\r\n    }\r\n\r\nor\r\n\r\n    public class FooImpl implements Foo{\r\n        private FooImpl instance = null;\r\n    \r\n        private FooImpl(){...}\r\n        public static FooImpl getInstance(){\r\n             if(instance == null)\r\n                 instance = new FooImpl();\r\n             return FooImpl();\r\n             // ...\r\n        }\r\n\r\n        // ...\r\n    }\r\n\r\nSo, It&#39;s could be possible to declare two singletons in the project, the first one declared by Guice and the second one by the `getInstance()` traditionnal way.\r\n\r\nGoogle Guice can also bind Interfaces to particular instance with the `toInstance()` method.\r\n\r\nSo, instead binding with the Singleton scope, shouln&#39;t be a better way to bind Singleton, in Java with this declaration:\r\n\r\n    bind(Foo.class).toInstance(FooImpl.getInstance());\r\n\r\ninstead of the first one? Is it more secure? Is it possible to have two singletons instances in that way?\r\n\r\nWhat&#39;s the best way for declaring singletons with Google Guice?","title":"Two singletons instances with dependency injection (Google Guice)","body":"<p>I am working on a project using Depedency injection Google Guice Framework.</p>\n\n<p>It's possible to bind a class with the singleton scope, in Guice as:</p>\n\n<pre><code>bind(Foo.class).to(FooImpl.class).in(Scopes.SINGLETON);\n</code></pre>\n\n<p>If <code>FooImpl</code> class is itself a real singleton class as:</p>\n\n<pre><code>public class FooImpl implements Foo{\n    public static final FooImpl INSTANCE = new FooImpl();\n    public static FooImpl getInstance(){...}\n    // ...\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>public class FooImpl implements Foo{\n    private FooImpl instance = null;\n\n    private FooImpl(){...}\n    public static FooImpl getInstance(){\n         if(instance == null)\n             instance = new FooImpl();\n         return FooImpl();\n         // ...\n    }\n\n    // ...\n}\n</code></pre>\n\n<p>So, It's could be possible to declare two singletons in the project, the first one declared by Guice and the second one by the <code>getInstance()</code> traditionnal way.</p>\n\n<p>Google Guice can also bind Interfaces to particular instance with the <code>toInstance()</code> method.</p>\n\n<p>So, instead binding with the Singleton scope, shouln't be a better way to bind Singleton, in Java with this declaration:</p>\n\n<pre><code>bind(Foo.class).toInstance(FooImpl.getInstance());\n</code></pre>\n\n<p>instead of the first one? Is it more secure? Is it possible to have two singletons instances in that way?</p>\n\n<p>What's the best way for declaring singletons with Google Guice?</p>\n"},{"tags":["java","json","spring","rest","multipartform-data"],"comments":[{"owner":{"account_id":2471950,"reputation":1483,"user_id":2153576,"accept_rate":50,"display_name":"Player_Neo"},"score":0,"creation_date":1505992900,"post_id":44671585,"comment_id":79645039,"body_markdown":"If you&#39;ve  solved would you please share your solution","body":"If you&#39;ve  solved would you please share your solution"}],"answers":[{"comments":[{"owner":{"account_id":10222783,"reputation":634,"user_id":7546450,"accept_rate":57,"display_name":"SFAH"},"score":0,"creation_date":1498036701,"post_id":44671745,"comment_id":76327970,"body_markdown":"and what about  requestBody createRider ?","body":"and what about  requestBody createRider ?"},{"owner":{"account_id":10222783,"reputation":634,"user_id":7546450,"accept_rate":57,"display_name":"SFAH"},"score":0,"creation_date":1498036763,"post_id":44671745,"comment_id":76328000,"body_markdown":"`@RequestBody CreateRider createRider `\n\n\n\nI also want other information name , password etc","body":"<code>@RequestBody CreateRider createRider </code>    I also want other information name , password etc"},{"owner":{"account_id":3454996,"reputation":5649,"user_id":2893693,"accept_rate":83,"display_name":"J-J"},"score":0,"creation_date":1498036807,"post_id":44671745,"comment_id":76328029,"body_markdown":"That you can load using @RequestPart, as mentioned in the answer","body":"That you can load using @RequestPart, as mentioned in the answer"},{"owner":{"account_id":10222783,"reputation":634,"user_id":7546450,"accept_rate":57,"display_name":"SFAH"},"score":0,"creation_date":1498036839,"post_id":44671745,"comment_id":76328058,"body_markdown":"Okay wait let me try","body":"Okay wait let me try"},{"owner":{"account_id":10222783,"reputation":634,"user_id":7546450,"accept_rate":57,"display_name":"SFAH"},"score":0,"creation_date":1498037040,"post_id":44671745,"comment_id":76328211,"body_markdown":"How can I send data from postman ? And what should be the content-type?","body":"How can I send data from postman ? And what should be the content-type?"},{"owner":{"account_id":3454996,"reputation":5649,"user_id":2893693,"accept_rate":83,"display_name":"J-J"},"score":0,"creation_date":1498037100,"post_id":44671745,"comment_id":76328257,"body_markdown":"set key as `file` under form data for uploading files","body":"set key as <code>file</code> under form data for uploading files"},{"owner":{"account_id":10222783,"reputation":634,"user_id":7546450,"accept_rate":57,"display_name":"SFAH"},"score":0,"creation_date":1498037303,"post_id":44671745,"comment_id":76328414,"body_markdown":"Let us [continue this discussion in chat](http://chat.stackoverflow.com/rooms/147236/discussion-between-sfah-and-jobin).","body":"Let us <a href=\"http://chat.stackoverflow.com/rooms/147236/discussion-between-sfah-and-jobin\">continue this discussion in chat</a>."}],"tags":[],"owner":{"account_id":3454996,"reputation":5649,"user_id":2893693,"accept_rate":83,"display_name":"J-J"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1498037184,"creation_date":1498036512,"answer_id":44671745,"question_id":44671585,"body_markdown":"You can get the profile picture as a [MultipartFile][1] by adding the following to the controller\r\n\r\n`@RequestPart(value = &quot;profilePic&quot;, required = false)  MultipartFile profilePic`\r\n\r\nSo the controller method becomes\r\n\r\n    import org.springframework.web.bind.annotation.RequestPart;\r\n    import org.springframework.web.multipart.MultipartFile;\r\n\r\n    @RequestMapping(method = RequestMethod.POST, value = &quot;createRider&quot;)\r\n    public @ResponseBody ResponseEntity&lt;?&gt; createRider(\r\n            @RequestPart CreateRider createRider,Authentication authentication,\r\n            PersistentEntityResourceAssembler assembler, @RequestPart(value = &quot;profilePic&quot;, required = false)  MultipartFile profilePic) {\r\n    \t\r\n    }\r\n\r\n\r\n[1]:http://docs.spring.io/spring-framework/docs/2.5.6/api/org/springframework/web/multipart/MultipartFile.html","title":"Spring Data Rest : how to send Multi-part file with request Body","body":"<p>You can get the profile picture as a <a href=\"http://docs.spring.io/spring-framework/docs/2.5.6/api/org/springframework/web/multipart/MultipartFile.html\" rel=\"nofollow noreferrer\">MultipartFile</a> by adding the following to the controller</p>\n\n<p><code>@RequestPart(value = \"profilePic\", required = false)  MultipartFile profilePic</code></p>\n\n<p>So the controller method becomes</p>\n\n<pre><code>import org.springframework.web.bind.annotation.RequestPart;\nimport org.springframework.web.multipart.MultipartFile;\n\n@RequestMapping(method = RequestMethod.POST, value = \"createRider\")\npublic @ResponseBody ResponseEntity&lt;?&gt; createRider(\n        @RequestPart CreateRider createRider,Authentication authentication,\n        PersistentEntityResourceAssembler assembler, @RequestPart(value = \"profilePic\", required = false)  MultipartFile profilePic) {\n\n}\n</code></pre>\n"}],"owner":{"account_id":10222783,"reputation":634,"user_id":7546450,"accept_rate":57,"display_name":"SFAH"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8865,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1697119395,"creation_date":1498036022,"question_id":44671585,"body_markdown":"I want to construct an API of user signup in which I need user basic information and his/her profile picture also so I am very confuse that how can I achieve this ! I have made a controller and requested for a body But When I access this API it gives me error of `&quot;Unsupported Media Type&quot;` and when I set content Type as `multipart/form-data` then it gives an error of : \r\n`the request was rejected because no multipart boundary was found`\r\n\r\nPlease help How can I send user information and user photo BOTH in SAME request \r\n\r\n\r\n**UPDATED : Controller**\r\n\t\r\n\r\n\t@RequestMapping(method = RequestMethod.POST, value = &quot;createRider&quot;)\r\n\tpublic @ResponseBody ResponseEntity&lt;?&gt; createRider(\r\n\t\t\t@RequestBody CreateRider createRider,Authentication authentication,\r\n\t\t\tPersistentEntityResourceAssembler assembler,@RequestPart(value = &quot;profilePic&quot;, required = false) MultipartFile file) {\r\n\t\r\n\t\tif (authentication != null &amp;&amp; authentication.getPrincipal() != null) {\r\n\t\t\tCollection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities();\r\n\t\t\tboolean authorized = authorities.contains(new SimpleGrantedAuthority(&quot;rights&quot;));\r\n\t\t\tif (authorized==true)\r\n\t\t\t\tuserService.createNewRider(createRider);\r\n\t\t\telse\r\n\t\t\t\treturn  ResponseEntity.status(HttpStatus.SC_CONFLICT).body(&quot;Logged In user is not admin&quot;);\r\n\t\t} else {\r\n\t\t\t// Access denied\r\n\t\t\tthrow new AccessDeniedException(&quot;Not logged in&quot;);\r\n\t\t}\r\n\t\treturn ResponseEntity.ok(&quot;Rider Created&quot;);\r\n\t}\r\n\t\r\n**createRider.java**\r\n\r\n    public class CreateRider {\r\n    \r\n    \tprivate String email;\r\n    \r\n    \tprivate String name;\r\n    \t\r\n    \tprivate String password;\r\n    \t\r\n    \tprivate String contactNumber;\r\n    \t\r\n    \tprivate String cnicNumber;\r\n    \t\r\n    \tprivate String drivingLicense;\r\n    \t\r\n    \tprivate String reference;\r\n    \t\r\n    \tprivate MultipartFile file;\r\n    \t ..getters nad setters \r\n        }\r\n**userService.createNewRider**\r\n\r\n    public void createNewRider(CreateRider createRider) {\r\n    \t\tGroup group=groupRepo.findOne(Constants.RIDER_USER_GROUP);\r\n    \t\tUser user=new User();\r\n    \t\tuser.setGroup(group);\r\n    \t\tuser.setEmail(createRider.getEmail());\r\n    \t\tuser.setName(createRider.getName());\r\n    \t\tuser.setPassword(createRider.getPassword());\r\n    \t\tuser.setContactNumber(createRider.getContactNumber());\r\n    \t\tuser.setCnicNumber(createRider.getCnicNumber());\r\n    \t\tuser.setDrivingLicense(createRider.getDrivingLicense());\r\n    \t\tuser.setReference(createRider.getReference());\r\n    \t\tuserRepo.save(user);\r\n    \t\tRiderLocation riderLocation=new RiderLocation();\r\n    \t\triderLocation.setRider(user);\r\n    \t\triderLocationRepo.save(riderLocation);\r\n    \t\t///User Photo \r\n    \t\t UserPhoto userPhoto=photoService.createUserPhoto(createRider.getFile(), user.getId());\r\n    \t     userPhotoRepo.save(userPhoto);\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t}","title":"Spring Data Rest : how to send Multi-part file with request Body","body":"<p>I want to construct an API of user signup in which I need user basic information and his/her profile picture also so I am very confuse that how can I achieve this ! I have made a controller and requested for a body But When I access this API it gives me error of <code>\"Unsupported Media Type\"</code> and when I set content Type as <code>multipart/form-data</code> then it gives an error of : \n<code>the request was rejected because no multipart boundary was found</code></p>\n\n<p>Please help How can I send user information and user photo BOTH in SAME request </p>\n\n<p><strong>UPDATED : Controller</strong></p>\n\n<pre><code>@RequestMapping(method = RequestMethod.POST, value = \"createRider\")\npublic @ResponseBody ResponseEntity&lt;?&gt; createRider(\n        @RequestBody CreateRider createRider,Authentication authentication,\n        PersistentEntityResourceAssembler assembler,@RequestPart(value = \"profilePic\", required = false) MultipartFile file) {\n\n    if (authentication != null &amp;&amp; authentication.getPrincipal() != null) {\n        Collection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities();\n        boolean authorized = authorities.contains(new SimpleGrantedAuthority(\"rights\"));\n        if (authorized==true)\n            userService.createNewRider(createRider);\n        else\n            return  ResponseEntity.status(HttpStatus.SC_CONFLICT).body(\"Logged In user is not admin\");\n    } else {\n        // Access denied\n        throw new AccessDeniedException(\"Not logged in\");\n    }\n    return ResponseEntity.ok(\"Rider Created\");\n}\n</code></pre>\n\n<p><strong>createRider.java</strong></p>\n\n<pre><code>public class CreateRider {\n\n    private String email;\n\n    private String name;\n\n    private String password;\n\n    private String contactNumber;\n\n    private String cnicNumber;\n\n    private String drivingLicense;\n\n    private String reference;\n\n    private MultipartFile file;\n     ..getters nad setters \n    }\n</code></pre>\n\n<p><strong>userService.createNewRider</strong></p>\n\n<pre><code>public void createNewRider(CreateRider createRider) {\n        Group group=groupRepo.findOne(Constants.RIDER_USER_GROUP);\n        User user=new User();\n        user.setGroup(group);\n        user.setEmail(createRider.getEmail());\n        user.setName(createRider.getName());\n        user.setPassword(createRider.getPassword());\n        user.setContactNumber(createRider.getContactNumber());\n        user.setCnicNumber(createRider.getCnicNumber());\n        user.setDrivingLicense(createRider.getDrivingLicense());\n        user.setReference(createRider.getReference());\n        userRepo.save(user);\n        RiderLocation riderLocation=new RiderLocation();\n        riderLocation.setRider(user);\n        riderLocationRepo.save(riderLocation);\n        ///User Photo \n         UserPhoto userPhoto=photoService.createUserPhoto(createRider.getFile(), user.getId());\n         userPhotoRepo.save(userPhoto);\n\n\n\n    }\n</code></pre>\n"},{"tags":["java","docker","rabbitmq"],"answers":[{"comments":[{"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"score":0,"creation_date":1681909751,"post_id":76048435,"comment_id":134132792,"body_markdown":"This fixes your issue, but is not really the reason for the problem you had using an AMQP URI. Please see [my answer](https://stackoverflow.com/a/76054909/1466825).","body":"This fixes your issue, but is not really the reason for the problem you had using an AMQP URI. Please see <a href=\"https://stackoverflow.com/a/76054909/1466825\">my answer</a>."}],"tags":[],"owner":{"account_id":11475744,"reputation":205,"user_id":8411319,"display_name":"Radu Aramă"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681846340,"creation_date":1681846340,"answer_id":76048435,"question_id":76048349,"body_markdown":"Apparently, I had to specify \r\n\r\n    factory.setPort(5673);\r\n\r\nbefore\r\n\r\n    Connection connection = factory.newConnection(&quot;amqp://guest:guest@localhost:5673&quot;);\r\n\r\nI hope this helps someone.","title":"Not able to connect to rabbitmq instance using Java","body":"<p>Apparently, I had to specify</p>\n<pre><code>factory.setPort(5673);\n</code></pre>\n<p>before</p>\n<pre><code>Connection connection = factory.newConnection(&quot;amqp://guest:guest@localhost:5673&quot;);\n</code></pre>\n<p>I hope this helps someone.</p>\n"},{"tags":[],"owner":{"account_id":1581534,"reputation":9020,"user_id":1466825,"display_name":"Luke Bakken"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697119086,"creation_date":1681909705,"answer_id":76054909,"question_id":76048349,"body_markdown":"You are using the `newConnection` override that specifies a **connection name**: [code](https://github.com/rabbitmq/rabbitmq-java-client/blob/ec58b5078cefd9765e2a30eff422a3b0b97aef4c/src/main/java/com/rabbitmq/client/ConnectionFactory.java#L1293-L1307)\r\n\r\nIf you wish to use an AMQP URI, use the `setUri` method on the `ConnectionFactory` instance: [code](https://github.com/rabbitmq/rabbitmq-java-client/blob/ec58b5078cefd9765e2a30eff422a3b0b97aef4c/src/main/java/com/rabbitmq/client/ConnectionFactory.java#L301-L310)\r\n\r\n","title":"Not able to connect to rabbitmq instance using Java","body":"<p>You are using the <code>newConnection</code> override that specifies a <strong>connection name</strong>: <a href=\"https://github.com/rabbitmq/rabbitmq-java-client/blob/ec58b5078cefd9765e2a30eff422a3b0b97aef4c/src/main/java/com/rabbitmq/client/ConnectionFactory.java#L1293-L1307\" rel=\"nofollow noreferrer\">code</a></p>\n<p>If you wish to use an AMQP URI, use the <code>setUri</code> method on the <code>ConnectionFactory</code> instance: <a href=\"https://github.com/rabbitmq/rabbitmq-java-client/blob/ec58b5078cefd9765e2a30eff422a3b0b97aef4c/src/main/java/com/rabbitmq/client/ConnectionFactory.java#L301-L310\" rel=\"nofollow noreferrer\">code</a></p>\n"}],"owner":{"account_id":11475744,"reputation":205,"user_id":8411319,"display_name":"Radu Aramă"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1697119086,"creation_date":1681845701,"question_id":76048349,"body_markdown":"Currently I have two rabbitmq docker containers in my environment. One of them has the external port set to 5672 and another one is using 5673. From my java program (which is not dockerized) I am trying to connect to the container listening on 5673 by using the amqp-client maven library. \r\nThe code looks something like this:\r\n\r\n    ConnectionFactory factory = new ConnectionFactory();\r\n    Connection connection = factory.newConnection(&quot;amqp://guest:guest@localhost:5673&quot;);\r\n\r\n    Channel channel = connection.createChannel();\r\n    channel.queueDeclare(&quot;region&quot;, true, false, false, null);\r\n\r\n    DefaultConsumer consumer =\r\n        new DefaultConsumer(channel) {\r\n\r\n          @Override\r\n          public void handleConsumeOk(String consumerTag) {\r\n            super.handleConsumeOk(consumerTag);\r\n          }\r\n\r\n          @Override\r\n          public void handleDelivery(\r\n              String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body)\r\n              throws IOException {\r\n            String message = new String(body, StandardCharsets.UTF_8);\r\n            log.info(message);\r\n          }\r\n        };\r\n\r\n    channel.queueBind(&quot;region&quot;, &quot;gas_region&quot;, &quot;&quot;);\r\n    channel.basicConsume(&quot;region&quot;, true, consumer);\r\n\r\nThe problem I have is that my Java program keeps connecting to the 5672 instance instead of the one listening on 5673. I noticed that because I see the created queue in the 5672 instance instead of the other one and also my program doesn&#39;t find the configured exchange in the 5673 instance.\r\nDoes someone have any ideas on what could be the problem? \r\n\r\nThe docker compose configuration for my rabbitmq instances looks like this:\r\n\r\n    input_mb:\r\n        image: rabbitmq:3-management\r\n        hostname: rabbit1\r\n        container_name: input_mb\r\n        ports:\r\n            - 5672:5672\r\n            - 15672:15672\r\n        volumes:\r\n            - &quot;./input_mb/rabbitmq.config:/etc/rabbitmq/rabbitmq.config&quot;\r\n            - &quot;./input_mb/definitions.json:/etc/rabbitmq/definitions.json&quot;\r\n        networks:\r\n            - common_network\r\n\r\n    output_mb:\r\n        image: rabbitmq:3-management\r\n        hostname: rabbit2\r\n        container_name: output_mb\r\n        ports:\r\n            - 5673:5672\r\n            - 15673:15672\r\n        volumes:\r\n            - &quot;./output_mb/rabbitmq.config:/etc/rabbitmq/rabbitmq.config&quot;\r\n            - &quot;./output_mb/definitions.json:/etc/rabbitmq/definitions.json&quot;\r\n        networks:\r\n            - common_network\r\n","title":"Not able to connect to rabbitmq instance using Java","body":"<p>Currently I have two rabbitmq docker containers in my environment. One of them has the external port set to 5672 and another one is using 5673. From my java program (which is not dockerized) I am trying to connect to the container listening on 5673 by using the amqp-client maven library.\nThe code looks something like this:</p>\n<pre><code>ConnectionFactory factory = new ConnectionFactory();\nConnection connection = factory.newConnection(&quot;amqp://guest:guest@localhost:5673&quot;);\n\nChannel channel = connection.createChannel();\nchannel.queueDeclare(&quot;region&quot;, true, false, false, null);\n\nDefaultConsumer consumer =\n    new DefaultConsumer(channel) {\n\n      @Override\n      public void handleConsumeOk(String consumerTag) {\n        super.handleConsumeOk(consumerTag);\n      }\n\n      @Override\n      public void handleDelivery(\n          String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body)\n          throws IOException {\n        String message = new String(body, StandardCharsets.UTF_8);\n        log.info(message);\n      }\n    };\n\nchannel.queueBind(&quot;region&quot;, &quot;gas_region&quot;, &quot;&quot;);\nchannel.basicConsume(&quot;region&quot;, true, consumer);\n</code></pre>\n<p>The problem I have is that my Java program keeps connecting to the 5672 instance instead of the one listening on 5673. I noticed that because I see the created queue in the 5672 instance instead of the other one and also my program doesn't find the configured exchange in the 5673 instance.\nDoes someone have any ideas on what could be the problem?</p>\n<p>The docker compose configuration for my rabbitmq instances looks like this:</p>\n<pre><code>input_mb:\n    image: rabbitmq:3-management\n    hostname: rabbit1\n    container_name: input_mb\n    ports:\n        - 5672:5672\n        - 15672:15672\n    volumes:\n        - &quot;./input_mb/rabbitmq.config:/etc/rabbitmq/rabbitmq.config&quot;\n        - &quot;./input_mb/definitions.json:/etc/rabbitmq/definitions.json&quot;\n    networks:\n        - common_network\n\noutput_mb:\n    image: rabbitmq:3-management\n    hostname: rabbit2\n    container_name: output_mb\n    ports:\n        - 5673:5672\n        - 15673:15672\n    volumes:\n        - &quot;./output_mb/rabbitmq.config:/etc/rabbitmq/rabbitmq.config&quot;\n        - &quot;./output_mb/definitions.json:/etc/rabbitmq/definitions.json&quot;\n    networks:\n        - common_network\n</code></pre>\n"},{"tags":["java","spring-boot","datasource"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697090206,"post_id":77277104,"comment_id":136236026,"body_markdown":"You shouldn&#39;t be using a database lookup. Inject the `ApplicationContext` and just do `applicationContext.getBean(name, DataSource.class)`. The `BeanFactoryDataSourceLookup` would also work if you pre-configure it as a bean and inject it as a dependency.","body":"You shouldn&#39;t be using a database lookup. Inject the <code>ApplicationContext</code> and just do <code>applicationContext.getBean(name, DataSource.class)</code>. The <code>BeanFactoryDataSourceLookup</code> would also work if you pre-configure it as a bean and inject it as a dependency."},{"owner":{"account_id":6508,"reputation":16117,"user_id":10973,"accept_rate":94,"display_name":"Kevin Day"},"score":0,"creation_date":1697118618,"post_id":77277104,"comment_id":136241672,"body_markdown":"@M.Deinum Thanks.  I&#39;ve updated the question with the changes I&#39;ve made per your suggestion.  Now I&#39;m getting errors that the named bean doesn&#39;t exist.  Am I doing something wrong in the application.yml file?","body":"@M.Deinum Thanks.  I&#39;ve updated the question with the changes I&#39;ve made per your suggestion.  Now I&#39;m getting errors that the named bean doesn&#39;t exist.  Am I doing something wrong in the application.yml file?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697118997,"post_id":77277104,"comment_id":136241767,"body_markdown":"Well just adding that information to the yaml doesn&#39;t do anything. You will need to create beans for it, spring will not automatically create beans for you for this.","body":"Well just adding that information to the yaml doesn&#39;t do anything. You will need to create beans for it, spring will not automatically create beans for you for this."},{"owner":{"account_id":6508,"reputation":16117,"user_id":10973,"accept_rate":94,"display_name":"Kevin Day"},"score":0,"creation_date":1697129856,"post_id":77277104,"comment_id":136244143,"body_markdown":"@M.Deinum Thanks for being patient with me (new to Spring .  I think this effectively means that I have to hard code a DataSource bean for every data source...","body":"@M.Deinum Thanks for being patient with me (new to Spring .  I think this effectively means that I have to hard code a DataSource bean for every data source..."}],"owner":{"account_id":6508,"reputation":16117,"user_id":10973,"accept_rate":94,"display_name":"Kevin Day"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697118993,"creation_date":1697071863,"question_id":77277104,"body_markdown":"The top-level question:  How do I use a DataSourceLookup to obtain a named DataSource that is configured in application.yml?\r\n\r\n**Details**\r\n\r\nI am trying to perform jdbc queries against different named datasources in a spring boot application (REST interface).\r\n\r\nThe datasource to execute against is determined at runtime based on parameters passed to the endpoint. The interactions with the datasource are all low level jdbc (no JPA or anything like that).\r\n\r\nI want to be able to configure multiple datasources in application.yml, then obtain a DataSource object using only the name.  I don&#39;t want to explicitly configure container level jndi resources.\r\n\r\nThe connection will have high traffic, so connection pooling, etc... is a requirement (I&#39;m assuming that Spring-Boot configures a reasonable connection pool by default).\r\n\r\napplication.yml:\r\n\r\n```\r\nspring:\r\n  datasource:\r\n    source1:\r\n      driver-class-name: com.mysql.jdbc.Driver\r\n      url:      jdbc:mysql://dbserver.local:3306/source1\r\n      username: myuser\r\n      password: mypass\r\n    source2:\r\n      driver-class-name: com.mysql.jdbc.Driver\r\n      url:      jdbc:mysql://dbserver.local:3306/source2\r\n      username: myuser\r\n      password: mypass\r\n```\r\n\r\nI&#39;m attempting to use a JndiDataSourceLookup bean (I don&#39;t think I should be using JNDI - but I can&#39;t figure out what other DataSourceLookup I should be using), as follows:\r\n\r\n```\r\n@RestController\r\npublic class SQLDataController {\r\n\tstatic final private Logger log = LoggerFactory.getLogger(SQLDataController.class);\r\n\r\n\t@GetMapping(value=&quot;/csv/**&quot;, produces = &quot;text/csv&quot;)\r\n\tpublic void streamCsv(@RequestParam String databaseName, JndiDataSourceLookup lookup) throws Exception {\r\n        DataSource dataSource = lookup.getDataSource(databaseName);\r\n        Connection conn = dataSource.getConnection();\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\nWhen I hit this endpoint, I get the following error:\r\n\r\n```\r\njavax.naming.NoInitialContextException: Need to specify class name in environment or system property, or in an application resource file: java.naming.factory.initial\r\n\tat java.naming/javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:702) ~[na:na]\r\n\tat java.naming/javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:305) ~[na:na]\r\n\tat java.naming/javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:342) ~[na:na]\r\n\tat java.naming/javax.naming.InitialContext.lookup(InitialContext.java:409) ~[na:na]\r\n\tat org.springframework.jndi.JndiTemplate.lambda$lookup$0(JndiTemplate.java:157) ~[spring-context-5.3.30.jar:5.3.30]\r\n\tat org.springframework.jndi.JndiTemplate.execute(JndiTemplate.java:92) ~[spring-context-5.3.30.jar:5.3.30]\r\n\tat org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:157) ~[spring-context-5.3.30.jar:5.3.30]\r\n\tat org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:179) ~[spring-context-5.3.30.jar:5.3.30]\r\n\tat org.springframework.jndi.JndiLocatorSupport.lookup(JndiLocatorSupport.java:105) ~[spring-context-5.3.30.jar:5.3.30]\r\n\tat org.springframework.jdbc.datasource.lookup.JndiDataSourceLookup.getDataSource(JndiDataSourceLookup.java:45) ~[spring-jdbc-5.3.30.jar:5.3.30]\r\n```\r\n\r\n\r\nSo I&#39;m thinking I&#39;m trying to access jndi when jndi isn&#39;t even being used (I don&#39;t really *need* JNDI, I don&#39;t think) - but I&#39;m not sure what other DataSourceLookup I should use or how to initialize it (maybe I should be using BeanFactoryDataSourceLookup somehow?).\r\n\r\nI&#39;m fairly new to Spring, and all of the examples I can find assume a fixed set of datasources that are known at compile time.\r\n\r\n-----------\r\n\r\n**Update: Using BeanFactoryDataSourceLookup**\r\n\r\nPer suggestions, I&#39;m creating a BeanFactoryDataSourceLookup in my app configuration (with singleton scope - not sure if that important or not).\r\n\r\n```\r\n@Configuration\r\npublic class AppConfig {\r\n\t@Bean\r\n\t@Scope(&quot;singleton&quot;)\r\n\tpublic DataSourceLookup createDataSourceLookup() {\r\n\t\treturn new BeanFactoryDataSourceLookup();\r\n\t}\r\n}\r\n```\r\n\r\nAnd I&#39;m injecting it into the controller constructor:\r\n\r\n```\r\n@RestController\r\npublic class SQLDataController {\r\n\tstatic final private Logger log = LoggerFactory.getLogger(SQLDataController.class);\r\n\r\n\tprivate final DataSourceLookup datasourceLookup;\r\n\t\r\n\t@Autowired\r\n\tpublic SQLDataController(ApplicationContext appContext, DataSourceLookup datasourceLookup) {\r\n\t\tthis.datasourceLookup = datasourceLookup;\r\n\t}\r\n\t\r\n\t@GetMapping(value=&quot;/csv/**&quot;, produces = &quot;text/csv&quot;)\r\n\tpublic void streamCsv(@RequestParam String databaseName) throws Exception {\r\n\t\tDataSource dataSource = datasourceLookup.getDataSource(databaseName);\r\n        Connection conn = dataSource.getConnection();\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\nWhen I hit the endpoint, I&#39;m getting error that the named bean doesn&#39;t exist.\r\n\r\n```\r\norg.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;source1&#39; available\r\n```\r\n\r\nThis is making me think that maybe I&#39;m doing something wrong with the application.yml file format...  Or maybe I am misunderstanding this entirely and I have to manually enumerate the datasources and create beans for them myself?","title":"Accessing multiple data sources by name - configured in spring boot application yml","body":"<p>The top-level question:  How do I use a DataSourceLookup to obtain a named DataSource that is configured in application.yml?</p>\n<p><strong>Details</strong></p>\n<p>I am trying to perform jdbc queries against different named datasources in a spring boot application (REST interface).</p>\n<p>The datasource to execute against is determined at runtime based on parameters passed to the endpoint. The interactions with the datasource are all low level jdbc (no JPA or anything like that).</p>\n<p>I want to be able to configure multiple datasources in application.yml, then obtain a DataSource object using only the name.  I don't want to explicitly configure container level jndi resources.</p>\n<p>The connection will have high traffic, so connection pooling, etc... is a requirement (I'm assuming that Spring-Boot configures a reasonable connection pool by default).</p>\n<p>application.yml:</p>\n<pre><code>spring:\n  datasource:\n    source1:\n      driver-class-name: com.mysql.jdbc.Driver\n      url:      jdbc:mysql://dbserver.local:3306/source1\n      username: myuser\n      password: mypass\n    source2:\n      driver-class-name: com.mysql.jdbc.Driver\n      url:      jdbc:mysql://dbserver.local:3306/source2\n      username: myuser\n      password: mypass\n</code></pre>\n<p>I'm attempting to use a JndiDataSourceLookup bean (I don't think I should be using JNDI - but I can't figure out what other DataSourceLookup I should be using), as follows:</p>\n<pre><code>@RestController\npublic class SQLDataController {\n    static final private Logger log = LoggerFactory.getLogger(SQLDataController.class);\n\n    @GetMapping(value=&quot;/csv/**&quot;, produces = &quot;text/csv&quot;)\n    public void streamCsv(@RequestParam String databaseName, JndiDataSourceLookup lookup) throws Exception {\n        DataSource dataSource = lookup.getDataSource(databaseName);\n        Connection conn = dataSource.getConnection();\n    }\n    \n}\n</code></pre>\n<p>When I hit this endpoint, I get the following error:</p>\n<pre><code>javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or in an application resource file: java.naming.factory.initial\n    at java.naming/javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:702) ~[na:na]\n    at java.naming/javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:305) ~[na:na]\n    at java.naming/javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:342) ~[na:na]\n    at java.naming/javax.naming.InitialContext.lookup(InitialContext.java:409) ~[na:na]\n    at org.springframework.jndi.JndiTemplate.lambda$lookup$0(JndiTemplate.java:157) ~[spring-context-5.3.30.jar:5.3.30]\n    at org.springframework.jndi.JndiTemplate.execute(JndiTemplate.java:92) ~[spring-context-5.3.30.jar:5.3.30]\n    at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:157) ~[spring-context-5.3.30.jar:5.3.30]\n    at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:179) ~[spring-context-5.3.30.jar:5.3.30]\n    at org.springframework.jndi.JndiLocatorSupport.lookup(JndiLocatorSupport.java:105) ~[spring-context-5.3.30.jar:5.3.30]\n    at org.springframework.jdbc.datasource.lookup.JndiDataSourceLookup.getDataSource(JndiDataSourceLookup.java:45) ~[spring-jdbc-5.3.30.jar:5.3.30]\n</code></pre>\n<p>So I'm thinking I'm trying to access jndi when jndi isn't even being used (I don't really <em>need</em> JNDI, I don't think) - but I'm not sure what other DataSourceLookup I should use or how to initialize it (maybe I should be using BeanFactoryDataSourceLookup somehow?).</p>\n<p>I'm fairly new to Spring, and all of the examples I can find assume a fixed set of datasources that are known at compile time.</p>\n<hr />\n<p><strong>Update: Using BeanFactoryDataSourceLookup</strong></p>\n<p>Per suggestions, I'm creating a BeanFactoryDataSourceLookup in my app configuration (with singleton scope - not sure if that important or not).</p>\n<pre><code>@Configuration\npublic class AppConfig {\n    @Bean\n    @Scope(&quot;singleton&quot;)\n    public DataSourceLookup createDataSourceLookup() {\n        return new BeanFactoryDataSourceLookup();\n    }\n}\n</code></pre>\n<p>And I'm injecting it into the controller constructor:</p>\n<pre><code>@RestController\npublic class SQLDataController {\n    static final private Logger log = LoggerFactory.getLogger(SQLDataController.class);\n\n    private final DataSourceLookup datasourceLookup;\n    \n    @Autowired\n    public SQLDataController(ApplicationContext appContext, DataSourceLookup datasourceLookup) {\n        this.datasourceLookup = datasourceLookup;\n    }\n    \n    @GetMapping(value=&quot;/csv/**&quot;, produces = &quot;text/csv&quot;)\n    public void streamCsv(@RequestParam String databaseName) throws Exception {\n        DataSource dataSource = datasourceLookup.getDataSource(databaseName);\n        Connection conn = dataSource.getConnection();\n    }\n    \n}\n</code></pre>\n<p>When I hit the endpoint, I'm getting error that the named bean doesn't exist.</p>\n<pre><code>org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'source1' available\n</code></pre>\n<p>This is making me think that maybe I'm doing something wrong with the application.yml file format...  Or maybe I am misunderstanding this entirely and I have to manually enumerate the datasources and create beans for them myself?</p>\n"},{"tags":["java","fast-excel"],"owner":{"account_id":9682089,"reputation":553,"user_id":7183399,"accept_rate":0,"display_name":"Mark Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697118824,"creation_date":1697118824,"question_id":77281226,"body_markdown":"I&#39;m writing data to a spreadsheet using FastExcel/Java using the overloaded method\r\n\r\n    worksheet.value(rowIndex, columnIndex, value);\r\n\r\nOne would expect the celltype is determined by the type of the value.\r\nUnfortunately this is not the case. All celltypes are &#39;Standard.&#39;\r\nThis results in displaying a date as its numerical value and strings consisting of decimals **with** leading zeros as strings **without** leading zeros.\r\nIn poi the value sets the celltype. Somehow this is not the case in FastExcel.\r\nWhat am I missing? Can I explicitly set the celltype?","title":"Celltypes in FastExel: writing data","body":"<p>I'm writing data to a spreadsheet using FastExcel/Java using the overloaded method</p>\n<pre><code>worksheet.value(rowIndex, columnIndex, value);\n</code></pre>\n<p>One would expect the celltype is determined by the type of the value.\nUnfortunately this is not the case. All celltypes are 'Standard.'\nThis results in displaying a date as its numerical value and strings consisting of decimals <strong>with</strong> leading zeros as strings <strong>without</strong> leading zeros.\nIn poi the value sets the celltype. Somehow this is not the case in FastExcel.\nWhat am I missing? Can I explicitly set the celltype?</p>\n"},{"tags":["java","tomcat","file-upload","spring-boot","thymeleaf"],"answers":[{"comments":[{"owner":{"account_id":4623673,"reputation":6002,"user_id":4161471,"display_name":"aSemy"},"score":0,"creation_date":1493805837,"post_id":43746267,"comment_id":74555128,"body_markdown":"I have set these (see paragraph two). While they prevent large files from being uploaded they do not give sensible error messages or user feedback, and there&#39;s no way to validate file type.","body":"I have set these (see paragraph two). While they prevent large files from being uploaded they do not give sensible error messages or user feedback, and there&#39;s no way to validate file type."},{"owner":{"account_id":7442315,"reputation":501,"user_id":6462836,"accept_rate":40,"display_name":"saurabh gupta"},"score":0,"creation_date":1597040134,"post_id":43746267,"comment_id":111993419,"body_markdown":"you might want to update your answers, as I see the properties have been updated to\n&gt; `spring.servlet.multipart.max-file-size=128KB`\n&gt; `spring.servlet.multipart.max-request-size=128KB`","body":"you might want to update your answers, as I see the properties have been updated to &gt; <code>spring.servlet.multipart.max-file-size=128KB</code> &gt; <code>spring.servlet.multipart.max-request-size=128KB</code>"}],"tags":[],"owner":{"account_id":1610757,"reputation":1067,"user_id":1856573,"accept_rate":90,"display_name":"lapadets"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1597136549,"creation_date":1493755206,"answer_id":43746267,"question_id":40355743,"body_markdown":"Try adding the following in your application.properties to set the file size limit:\r\n\r\n    spring.http.multipart.max-file-size=256KB\r\n    spring.http.multipart.max-request-size=256KB\r\n\r\nSource: https://spring.io/guides/gs/uploading-files/\r\n\r\nEDIT: \r\nSince Spring boot 2.0 release, the property names have changed to:\r\n\r\n    spring.servlet.multipart.max-file-size=128KB\r\n    spring.servlet.multipart.max-request-size=128KB\r\n\r\nNote the difference `spring.http.` --&gt; `spring.servlet.`","title":"File upload in Spring Boot: Uploading, validation, and exception handling","body":"<p>Try adding the following in your application.properties to set the file size limit:</p>\n<pre><code>spring.http.multipart.max-file-size=256KB\nspring.http.multipart.max-request-size=256KB\n</code></pre>\n<p>Source: <a href=\"https://spring.io/guides/gs/uploading-files/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/uploading-files/</a></p>\n<p>EDIT:\nSince Spring boot 2.0 release, the property names have changed to:</p>\n<pre><code>spring.servlet.multipart.max-file-size=128KB\nspring.servlet.multipart.max-request-size=128KB\n</code></pre>\n<p>Note the difference <code>spring.http.</code> --&gt; <code>spring.servlet.</code></p>\n"},{"comments":[{"owner":{"account_id":15607679,"reputation":827,"user_id":11259999,"display_name":"soumitra goswami"},"score":1,"creation_date":1591136649,"post_id":48866285,"comment_id":109940502,"body_markdown":"i used your solution with little changes,i am adding `@ValidImage` annotation before the controller method `@RequestParam` , but  the validator is not even getting called, my controller method looks like :public ResponseEntity&lt;MyClass&gt; updateMyObj(`@PathVariable`(&quot;id&quot;) String id, `@Validated` `@RequestParam`(name=&quot;param&quot;, required=true) MyCustomClass request,\n   `@ValidImage` `@RequestParam`(value = &quot;file&quot;, required = false) MultipartFile passport) {...} Also ,in the annotation class `ValidImage` I hv added - `@Target`(value = {ElementType.TYPE, ElementType.METHOD, ElementType.PARAMETER})","body":"i used your solution with little changes,i am adding <code>@ValidImage</code> annotation before the controller method <code>@RequestParam</code> , but  the validator is not even getting called, my controller method looks like :public ResponseEntity&lt;MyClass&gt; updateMyObj(<code>@PathVariable</code>(&quot;id&quot;) String id, <code>@Validated</code> <code>@RequestParam</code>(name=&quot;param&quot;, required=true) MyCustomClass request,    <code>@ValidImage</code> <code>@RequestParam</code>(value = &quot;file&quot;, required = false) MultipartFile passport) {...} Also ,in the annotation class <code>ValidImage</code> I hv added - <code>@Target</code>(value = {ElementType.TYPE, ElementType.METHOD, ElementType.PARAMETER})"},{"owner":{"account_id":15607679,"reputation":827,"user_id":11259999,"display_name":"soumitra goswami"},"score":1,"creation_date":1591139399,"post_id":48866285,"comment_id":109941220,"body_markdown":"Nevermind, i figured out using this answer - https://stackoverflow.com/a/59473176/11259999 , just needed to add @Validated on the Controller class, now the validation method is getting called","body":"Nevermind, i figured out using this answer - <a href=\"https://stackoverflow.com/a/59473176/11259999\">stackoverflow.com/a/59473176/11259999</a> , just needed to add @Validated on the Controller class, now the validation method is getting called"},{"owner":{"account_id":1260896,"reputation":1488,"user_id":1219213,"accept_rate":60,"display_name":"TheRealChx101"},"score":0,"creation_date":1656424946,"post_id":48866285,"comment_id":128565621,"body_markdown":"This can still be bypassed because the content type is from the headers and not the actual file detection itself.","body":"This can still be bypassed because the content type is from the headers and not the actual file detection itself."}],"tags":[],"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"comment_count":3,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1519043477,"creation_date":1519043477,"answer_id":48866285,"question_id":40355743,"body_markdown":"To reply on how to check file types: I have created a custom validator for this.\r\n\r\nFirst, create an annotation:\r\n\r\n    import javax.validation.Constraint;\r\n    import javax.validation.Payload;\r\n    import java.lang.annotation.ElementType;\r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.RetentionPolicy;\r\n    import java.lang.annotation.Target;\r\n    \r\n    @Target(ElementType.FIELD)\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Constraint(validatedBy = {ImageFileValidator.class})\r\n    public @interface ValidImage {\r\n        String message() default &quot;Invalid image file&quot;;\r\n    \r\n        Class&lt;?&gt;[] groups() default {};\r\n    \r\n        Class&lt;? extends Payload&gt;[] payload() default {};\r\n    }\r\n\r\nNext, create the validator itself:\r\n\r\n    import org.springframework.web.multipart.MultipartFile;\r\n    \r\n    import javax.validation.ConstraintValidator;\r\n    import javax.validation.ConstraintValidatorContext;\r\n    \r\n    public class ImageFileValidator implements ConstraintValidator&lt;ValidImage, MultipartFile&gt; {\r\n    \r\n        @Override\r\n        public void initialize(ValidImage constraintAnnotation) {\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public boolean isValid(MultipartFile multipartFile, ConstraintValidatorContext context) {\r\n    \r\n            boolean result = true;\r\n    \r\n            String contentType = multipartFile.getContentType();\r\n            if (!isSupportedContentType(contentType)) {\r\n                context.disableDefaultConstraintViolation();\r\n                context.buildConstraintViolationWithTemplate(\r\n                        &quot;Only PNG or JPG images are allowed.&quot;)\r\n                       .addConstraintViolation();\r\n    \r\n                result = false;\r\n            }\r\n    \r\n            return result;\r\n        }\r\n    \r\n        private boolean isSupportedContentType(String contentType) {\r\n            return contentType.equals(&quot;image/png&quot;)\r\n                    || contentType.equals(&quot;image/jpg&quot;)\r\n                    || contentType.equals(&quot;image/jpeg&quot;);\r\n        }\r\n    }\r\n\r\nFinally, apply the annotation:\r\n\r\n    public class CreateUserParameters {\r\n    \r\n        @NotNull\r\n        @ValidImage\r\n        private MultipartFile image;\r\n    ...\r\n    }\r\n\r\nI have tested this with Spring Boot 1.5.10 (Also with Thymeleaf)\r\n\r\nFor the max file size, I would also like to see a solution that works with the &quot;standard error mechanism&quot; so you can display the error like other field errors and the user can correct his mistake.","title":"File upload in Spring Boot: Uploading, validation, and exception handling","body":"<p>To reply on how to check file types: I have created a custom validator for this.</p>\n\n<p>First, create an annotation:</p>\n\n<pre><code>import javax.validation.Constraint;\nimport javax.validation.Payload;\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Target(ElementType.FIELD)\n@Retention(RetentionPolicy.RUNTIME)\n@Constraint(validatedBy = {ImageFileValidator.class})\npublic @interface ValidImage {\n    String message() default \"Invalid image file\";\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n\n<p>Next, create the validator itself:</p>\n\n<pre><code>import org.springframework.web.multipart.MultipartFile;\n\nimport javax.validation.ConstraintValidator;\nimport javax.validation.ConstraintValidatorContext;\n\npublic class ImageFileValidator implements ConstraintValidator&lt;ValidImage, MultipartFile&gt; {\n\n    @Override\n    public void initialize(ValidImage constraintAnnotation) {\n\n    }\n\n    @Override\n    public boolean isValid(MultipartFile multipartFile, ConstraintValidatorContext context) {\n\n        boolean result = true;\n\n        String contentType = multipartFile.getContentType();\n        if (!isSupportedContentType(contentType)) {\n            context.disableDefaultConstraintViolation();\n            context.buildConstraintViolationWithTemplate(\n                    \"Only PNG or JPG images are allowed.\")\n                   .addConstraintViolation();\n\n            result = false;\n        }\n\n        return result;\n    }\n\n    private boolean isSupportedContentType(String contentType) {\n        return contentType.equals(\"image/png\")\n                || contentType.equals(\"image/jpg\")\n                || contentType.equals(\"image/jpeg\");\n    }\n}\n</code></pre>\n\n<p>Finally, apply the annotation:</p>\n\n<pre><code>public class CreateUserParameters {\n\n    @NotNull\n    @ValidImage\n    private MultipartFile image;\n...\n}\n</code></pre>\n\n<p>I have tested this with Spring Boot 1.5.10 (Also with Thymeleaf)</p>\n\n<p>For the max file size, I would also like to see a solution that works with the \"standard error mechanism\" so you can display the error like other field errors and the user can correct his mistake.</p>\n"},{"tags":[],"owner":{"account_id":11418021,"reputation":4780,"user_id":8370334,"display_name":"Abd Abughazaleh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697118818,"creation_date":1697118818,"answer_id":77281225,"question_id":40355743,"body_markdown":"Spring Boot File Content Type Validation With Annotation:\r\n\r\n**CustomExceptionControllerAdvice.java**\r\n\r\n    @ControllerAdvice\r\n    public class CustomExceptionControllerAdvice {\r\n    \r\n        @ExceptionHandler(MultipartException.class)\r\n        void handleMultipartException(MultipartException ex,HttpServletResponse response) throws IOException {\r\n            response.sendError(HttpStatus.BAD_REQUEST.value(),&quot;Please select a file&quot;);\r\n        }\r\n      \r\n        @ExceptionHandler(ConstraintViolationException.class)\r\n        public void handleConstraintViolationException(ConstraintViolationException ex,HttpServletResponse response) throws IOException {\r\n            response.sendError(HttpStatus.BAD_REQUEST.value());\r\n        }\r\n    \r\n    }\r\n\r\n**FileController.java**\r\n\r\n    @RestController\r\n    @FieldDefaults(level = AccessLevel.PRIVATE,makeFinal=true)\r\n    @RequestMapping(&quot;/versions/1&quot;)\r\n    public class FileController {\r\n    \r\n        \r\n        @PostMapping(&quot;/files&quot;)\r\n        @ResponseStatus(HttpStatus.OK)\r\n        public String createFile(@Validated @ValidFile @RequestPart(&quot;file&quot;) MultipartFile file {\r\n    \r\n            return file.getOriginalFilename()\r\n        }\r\n    \r\n    }\r\n\r\n**FileValidator.java**\r\n\r\n    public class FileValidator implements ConstraintValidator&lt;ValidFile, MultipartFile&gt; {\r\n    \r\n        @Override\r\n        public void initialize(ValidFile constraintAnnotation) {\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public boolean isValid(MultipartFile multipartFile, ConstraintValidatorContext context) {\r\n    \r\n            boolean result = true;\r\n    \r\n            String contentType = multipartFile.getContentType();\r\n            if (!isSupportedContentType(contentType)) {\r\n                result = false;\r\n            }\r\n    \r\n            return result;\r\n        }\r\n    \r\n        private boolean isSupportedContentType(String contentType) {\r\n            return contentType.equals(&quot;text/xml&quot;)\r\n                    || contentType.equals(&quot;application/pdf&quot;)\r\n                    || contentType.equals(&quot;image/png&quot;)\r\n                    || contentType.equals(&quot;image/jpg&quot;)\r\n                    || contentType.equals(&quot;image/jpeg&quot;);\r\n        }\r\n    }\r\n\r\n**ValidFile.java**\r\n\r\n    @Documented\r\n    @Target({ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE, ElementType.CONSTRUCTOR, ElementType.PARAMETER, ElementType.TYPE_USE})\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Constraint(validatedBy = {FileValidator.class})\r\n    public @interface ValidFile {\r\n        String message() default &quot;Only PDF,XML,PNG or JPG images are allowed&quot;;\r\n    \r\n        Class&lt;?&gt;[] groups() default {};\r\n    \r\n        Class&lt;? extends Payload&gt;[] payload() default {};\r\n    }","title":"File upload in Spring Boot: Uploading, validation, and exception handling","body":"<p>Spring Boot File Content Type Validation With Annotation:</p>\n<p><strong>CustomExceptionControllerAdvice.java</strong></p>\n<pre><code>@ControllerAdvice\npublic class CustomExceptionControllerAdvice {\n\n    @ExceptionHandler(MultipartException.class)\n    void handleMultipartException(MultipartException ex,HttpServletResponse response) throws IOException {\n        response.sendError(HttpStatus.BAD_REQUEST.value(),&quot;Please select a file&quot;);\n    }\n  \n    @ExceptionHandler(ConstraintViolationException.class)\n    public void handleConstraintViolationException(ConstraintViolationException ex,HttpServletResponse response) throws IOException {\n        response.sendError(HttpStatus.BAD_REQUEST.value());\n    }\n\n}\n</code></pre>\n<p><strong>FileController.java</strong></p>\n<pre><code>@RestController\n@FieldDefaults(level = AccessLevel.PRIVATE,makeFinal=true)\n@RequestMapping(&quot;/versions/1&quot;)\npublic class FileController {\n\n    \n    @PostMapping(&quot;/files&quot;)\n    @ResponseStatus(HttpStatus.OK)\n    public String createFile(@Validated @ValidFile @RequestPart(&quot;file&quot;) MultipartFile file {\n\n        return file.getOriginalFilename()\n    }\n\n}\n</code></pre>\n<p><strong>FileValidator.java</strong></p>\n<pre><code>public class FileValidator implements ConstraintValidator&lt;ValidFile, MultipartFile&gt; {\n\n    @Override\n    public void initialize(ValidFile constraintAnnotation) {\n\n    }\n\n    @Override\n    public boolean isValid(MultipartFile multipartFile, ConstraintValidatorContext context) {\n\n        boolean result = true;\n\n        String contentType = multipartFile.getContentType();\n        if (!isSupportedContentType(contentType)) {\n            result = false;\n        }\n\n        return result;\n    }\n\n    private boolean isSupportedContentType(String contentType) {\n        return contentType.equals(&quot;text/xml&quot;)\n                || contentType.equals(&quot;application/pdf&quot;)\n                || contentType.equals(&quot;image/png&quot;)\n                || contentType.equals(&quot;image/jpg&quot;)\n                || contentType.equals(&quot;image/jpeg&quot;);\n    }\n}\n</code></pre>\n<p><strong>ValidFile.java</strong></p>\n<pre><code>@Documented\n@Target({ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE, ElementType.CONSTRUCTOR, ElementType.PARAMETER, ElementType.TYPE_USE})\n@Retention(RetentionPolicy.RUNTIME)\n@Constraint(validatedBy = {FileValidator.class})\npublic @interface ValidFile {\n    String message() default &quot;Only PDF,XML,PNG or JPG images are allowed&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n"}],"owner":{"account_id":4623673,"reputation":6002,"user_id":4161471,"display_name":"aSemy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27798,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":3,"score":11,"last_activity_date":1697118818,"creation_date":1477985206,"question_id":40355743,"body_markdown":"I would like to be able to upload images to a server, handling errors and exceptions gracefully, with error messages displayed to the user in the form, and ideally only using an existing barebones Spring Boot and Thymeleaf install. \r\n\r\nUsing the example project [gs-uploading-files][1] I can upload files to a server using Spring Boot and Thymeleaf. In application.properties I set `spring.http.multipart.max-file-size=1MB` and \r\n`spring.http.multipart.max-request-size=1MB`. \r\n However several security and validation issues are unresolved when I upload files larger than 1MB.\r\n\r\n 1. Any file can be uploaded. For example, an html file could be uploaded and thus hosted on the server. How can files be restricted by type? Can they be validated in the page before the request is sent? If I have multiple ways of uploading images how can I validate all MultipartFiles?\r\n\r\n 2. Users can attempt to uploade large files, beyond the default limits of Spring and the embedded Tomcat. This causes a `org.springframework.web.multipart.MultipartException` is not handled by Spring. How can the file size be validated before the upload attempt? In case this is bypassesed can any file upload exceptions caught by Spring, so that a nice error message is displayed?\r\n\r\n 3. The default Spring error page is not used as a fallback for all exceptions. The MultipartException returns a Tomcat exception page with a full stacktrace (see Log 1).\r\n\r\n\r\n----------\r\n\r\nI&#39;ve searched to try and find and implement a set of solutions.\r\n\r\nA step towards fixing number 1 is by amending to `handleFileUpload` check the content type, rejecting files which fail this:  `!file.getContentType().toLowerCase().startsWith(&quot;image&quot;)`. Will this always be valid? Can a malicious user bypass this? And how can I check every MultipartFile, to save having to remember to add this every time?\r\n\r\n    @PostMapping(&quot;/&quot;)\r\n    public String handleFileUpload(@RequestParam(&quot;file&quot;) MultipartFile file, RedirectAttributes redirectAttributes)\r\n    \t\tthrows MultipartException, IllegalStateException {\r\n    \r\n    \tif (file != null &amp;&amp; file.getContentType() != null &amp;&amp; !file.getContentType().toLowerCase().startsWith(&quot;image&quot;))\r\n    \t\tthrow new MultipartException(&quot;not img&quot;);\r\n    \r\n    \tstorageService.store(file);\r\n    \tredirectAttributes.addFlashAttribute(&quot;message&quot;,\r\n    \t\t\t&quot;You successfully uploaded &quot; + file.getOriginalFilename() + &quot;!&quot;);\r\n    \r\n    \treturn &quot;redirect:/&quot;;\r\n    }\r\n\r\nAdding an `@ExceptionHandler` doesn&#39;t work, it simply never gets called.\r\n\r\n\t@ExceptionHandler({ SizeLimitExceededException.class, MultipartException.class,\r\n\t\t\tjava.lang.IllegalStateException.class })\r\n\tpublic ModelAndView handleError(HttpServletRequest req, Exception e) {\r\n\t\t// error(&quot;Request: &quot; + req.getRequestURL() + &quot; raised &quot; + ex);\r\n\r\n\t\tModelAndView mav = new ModelAndView();\r\n\t\tmav.addObject(&quot;exception&quot;, e);\r\n\t\tmav.addObject(&quot;url&quot;, req.getRequestURL());\r\n\t\tmav.addObject(&quot;timestamp&quot;, new Date());\r\n\t\tmav.addObject(&quot;error&quot;, e.getClass());\r\n\t\tmav.addObject(&quot;message&quot;, e.getMessage());\r\n\t\tmav.addObject(&quot;status&quot;, HttpStatus.INTERNAL_SERVER_ERROR);\r\n\t\tmav.setViewName(&quot;error&quot;);\r\n\t\treturn mav;\r\n\t}\r\n\r\nNumber 3 can be resolved by a global exception handler on all Exceptions. (explained in detail in [this post][2]). However, I&#39;m concerned that it may overrule a Controller level handler.\r\n\r\n    package hello;\r\n    \r\n    import java.util.Date;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    \r\n    import org.springframework.core.annotation.AnnotationUtils;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.web.bind.annotation.ControllerAdvice;\r\n    import org.springframework.web.bind.annotation.ExceptionHandler;\r\n    import org.springframework.web.bind.annotation.ResponseStatus;\r\n    import org.springframework.web.servlet.ModelAndView;\r\n    \r\n    @ControllerAdvice\r\n    class GlobalDefaultExceptionHandler {\r\n    \tpublic static final String DEFAULT_ERROR_VIEW = &quot;error&quot;;\r\n    \r\n    \t@ExceptionHandler(value = Exception.class)\r\n    \tpublic ModelAndView defaultErrorHandler(HttpServletRequest req, Exception e) throws Exception {\r\n    \t\t// If the exception is annotated with @ResponseStatus rethrow it and let\r\n    \t\t// the framework handle it - like the OrderNotFoundException example\r\n    \t\t// at the start of this post.\r\n    \t\t// AnnotationUtils is a Spring Framework utility class.\r\n    \t\tif (AnnotationUtils.findAnnotation(e.getClass(), ResponseStatus.class) != null)\r\n    \t\t\tthrow e;\r\n    \r\n    \t\t// Otherwise setup and send the user to a default error-view.\r\n    \t\tModelAndView mav = new ModelAndView();\r\n    \t\tmav.addObject(&quot;exception&quot;, e);\r\n    \t\tmav.addObject(&quot;url&quot;, req.getRequestURL());\r\n    \t\tmav.addObject(&quot;timestamp&quot;, new Date());\r\n    \t\tmav.addObject(&quot;error&quot;, e.getClass());\r\n    \t\tmav.addObject(&quot;message&quot;, e.getMessage());\r\n    \t\tmav.addObject(&quot;status&quot;, HttpStatus.INTERNAL_SERVER_ERROR);\r\n    \t\tmav.setViewName(DEFAULT_ERROR_VIEW);\r\n    \t\treturn mav;\r\n    \t}\r\n    }\r\n\r\n\r\nI&#39;ve attempted [this answer][3], which handles the exception but returns an error page. I&#39;d like to return to the original page and display a nice error message. \r\n\r\n\r\n----------\r\n\r\n\r\nLog 1:\r\n\r\n    HTTP Status 500 - Request processing failed; nested exception is org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)\r\n    \r\n    type Exception report\r\n    \r\n    message Request processing failed; nested exception is org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)\r\n    \r\n    description The server encountered an internal error that prevented it from fulfilling this request.\r\n    \r\n    exception\r\n    \r\n    org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)\r\n    \torg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:982)\r\n    \torg.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:872)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:648)\r\n    \torg.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n    \torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n    \torg.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \torg.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:89)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \torg.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \torg.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    root cause\r\n    \r\n    org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)\r\n    \torg.springframework.web.multipart.support.StandardMultipartHttpServletRequest.parseRequest(StandardMultipartHttpServletRequest.java:111)\r\n    \torg.springframework.web.multipart.support.StandardMultipartHttpServletRequest.&lt;init&gt;(StandardMultipartHttpServletRequest.java:85)\r\n    \torg.springframework.web.multipart.support.StandardServletMultipartResolver.resolveMultipart(StandardServletMultipartResolver.java:76)\r\n    \torg.springframework.web.servlet.DispatcherServlet.checkMultipart(DispatcherServlet.java:1099)\r\n    \torg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:932)\r\n    \torg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)\r\n    \torg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\r\n    \torg.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:872)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:648)\r\n    \torg.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n    \torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n    \torg.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \torg.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:89)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \torg.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \torg.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    root cause\r\n    \r\n    java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)\r\n    \torg.apache.catalina.connector.Request.parseParts(Request.java:2871)\r\n    \torg.apache.catalina.connector.Request.parseParameters(Request.java:3176)\r\n    \torg.apache.catalina.connector.Request.getParameter(Request.java:1110)\r\n    \torg.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:381)\r\n    \torg.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:70)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \torg.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    root cause\r\n    \r\n    org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)\r\n    \torg.apache.tomcat.util.http.fileupload.FileUploadBase$FileItemIteratorImpl.&lt;init&gt;(FileUploadBase.java:811)\r\n    \torg.apache.tomcat.util.http.fileupload.FileUploadBase.getItemIterator(FileUploadBase.java:256)\r\n    \torg.apache.tomcat.util.http.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:280)\r\n    \torg.apache.catalina.connector.Request.parseParts(Request.java:2801)\r\n    \torg.apache.catalina.connector.Request.parseParameters(Request.java:3176)\r\n    \torg.apache.catalina.connector.Request.getParameter(Request.java:1110)\r\n    \torg.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:381)\r\n    \torg.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:70)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \torg.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    note The full stack trace of the root cause is available in the Apache Tomcat/8.5.5 logs.\r\n    \r\n    Apache Tomcat/8.5.5\r\n\r\n\r\n----------\r\n\r\n\r\n  [1]: https://github.com/spring-guides/gs-uploading-files\r\n  [2]: https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc\r\n  [3]: https://stackoverflow.com/questions/29363705/handling-multipartexception-with-spring-boot-and-display-error-page","title":"File upload in Spring Boot: Uploading, validation, and exception handling","body":"<p>I would like to be able to upload images to a server, handling errors and exceptions gracefully, with error messages displayed to the user in the form, and ideally only using an existing barebones Spring Boot and Thymeleaf install. </p>\n\n<p>Using the example project <a href=\"https://github.com/spring-guides/gs-uploading-files\" rel=\"noreferrer\">gs-uploading-files</a> I can upload files to a server using Spring Boot and Thymeleaf. In application.properties I set <code>spring.http.multipart.max-file-size=1MB</code> and \n<code>spring.http.multipart.max-request-size=1MB</code>. \n However several security and validation issues are unresolved when I upload files larger than 1MB.</p>\n\n<ol>\n<li><p>Any file can be uploaded. For example, an html file could be uploaded and thus hosted on the server. How can files be restricted by type? Can they be validated in the page before the request is sent? If I have multiple ways of uploading images how can I validate all MultipartFiles?</p></li>\n<li><p>Users can attempt to uploade large files, beyond the default limits of Spring and the embedded Tomcat. This causes a <code>org.springframework.web.multipart.MultipartException</code> is not handled by Spring. How can the file size be validated before the upload attempt? In case this is bypassesed can any file upload exceptions caught by Spring, so that a nice error message is displayed?</p></li>\n<li><p>The default Spring error page is not used as a fallback for all exceptions. The MultipartException returns a Tomcat exception page with a full stacktrace (see Log 1).</p></li>\n</ol>\n\n<hr>\n\n<p>I've searched to try and find and implement a set of solutions.</p>\n\n<p>A step towards fixing number 1 is by amending to <code>handleFileUpload</code> check the content type, rejecting files which fail this:  <code>!file.getContentType().toLowerCase().startsWith(\"image\")</code>. Will this always be valid? Can a malicious user bypass this? And how can I check every MultipartFile, to save having to remember to add this every time?</p>\n\n<pre><code>@PostMapping(\"/\")\npublic String handleFileUpload(@RequestParam(\"file\") MultipartFile file, RedirectAttributes redirectAttributes)\n        throws MultipartException, IllegalStateException {\n\n    if (file != null &amp;&amp; file.getContentType() != null &amp;&amp; !file.getContentType().toLowerCase().startsWith(\"image\"))\n        throw new MultipartException(\"not img\");\n\n    storageService.store(file);\n    redirectAttributes.addFlashAttribute(\"message\",\n            \"You successfully uploaded \" + file.getOriginalFilename() + \"!\");\n\n    return \"redirect:/\";\n}\n</code></pre>\n\n<p>Adding an <code>@ExceptionHandler</code> doesn't work, it simply never gets called.</p>\n\n<pre><code>@ExceptionHandler({ SizeLimitExceededException.class, MultipartException.class,\n        java.lang.IllegalStateException.class })\npublic ModelAndView handleError(HttpServletRequest req, Exception e) {\n    // error(\"Request: \" + req.getRequestURL() + \" raised \" + ex);\n\n    ModelAndView mav = new ModelAndView();\n    mav.addObject(\"exception\", e);\n    mav.addObject(\"url\", req.getRequestURL());\n    mav.addObject(\"timestamp\", new Date());\n    mav.addObject(\"error\", e.getClass());\n    mav.addObject(\"message\", e.getMessage());\n    mav.addObject(\"status\", HttpStatus.INTERNAL_SERVER_ERROR);\n    mav.setViewName(\"error\");\n    return mav;\n}\n</code></pre>\n\n<p>Number 3 can be resolved by a global exception handler on all Exceptions. (explained in detail in <a href=\"https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc\" rel=\"noreferrer\">this post</a>). However, I'm concerned that it may overrule a Controller level handler.</p>\n\n<pre><code>package hello;\n\nimport java.util.Date;\n\nimport javax.servlet.http.HttpServletRequest;\n\nimport org.springframework.core.annotation.AnnotationUtils;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.ControllerAdvice;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.ResponseStatus;\nimport org.springframework.web.servlet.ModelAndView;\n\n@ControllerAdvice\nclass GlobalDefaultExceptionHandler {\n    public static final String DEFAULT_ERROR_VIEW = \"error\";\n\n    @ExceptionHandler(value = Exception.class)\n    public ModelAndView defaultErrorHandler(HttpServletRequest req, Exception e) throws Exception {\n        // If the exception is annotated with @ResponseStatus rethrow it and let\n        // the framework handle it - like the OrderNotFoundException example\n        // at the start of this post.\n        // AnnotationUtils is a Spring Framework utility class.\n        if (AnnotationUtils.findAnnotation(e.getClass(), ResponseStatus.class) != null)\n            throw e;\n\n        // Otherwise setup and send the user to a default error-view.\n        ModelAndView mav = new ModelAndView();\n        mav.addObject(\"exception\", e);\n        mav.addObject(\"url\", req.getRequestURL());\n        mav.addObject(\"timestamp\", new Date());\n        mav.addObject(\"error\", e.getClass());\n        mav.addObject(\"message\", e.getMessage());\n        mav.addObject(\"status\", HttpStatus.INTERNAL_SERVER_ERROR);\n        mav.setViewName(DEFAULT_ERROR_VIEW);\n        return mav;\n    }\n}\n</code></pre>\n\n<p>I've attempted <a href=\"https://stackoverflow.com/questions/29363705/handling-multipartexception-with-spring-boot-and-display-error-page\">this answer</a>, which handles the exception but returns an error page. I'd like to return to the original page and display a nice error message. </p>\n\n<hr>\n\n<p>Log 1:</p>\n\n<pre><code>HTTP Status 500 - Request processing failed; nested exception is org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)\n\ntype Exception report\n\nmessage Request processing failed; nested exception is org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)\n\ndescription The server encountered an internal error that prevented it from fulfilling this request.\n\nexception\n\norg.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)\n    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:982)\n    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:872)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:648)\n    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:89)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\nroot cause\n\norg.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)\n    org.springframework.web.multipart.support.StandardMultipartHttpServletRequest.parseRequest(StandardMultipartHttpServletRequest.java:111)\n    org.springframework.web.multipart.support.StandardMultipartHttpServletRequest.&lt;init&gt;(StandardMultipartHttpServletRequest.java:85)\n    org.springframework.web.multipart.support.StandardServletMultipartResolver.resolveMultipart(StandardServletMultipartResolver.java:76)\n    org.springframework.web.servlet.DispatcherServlet.checkMultipart(DispatcherServlet.java:1099)\n    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:932)\n    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)\n    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\n    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:872)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:648)\n    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:89)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\nroot cause\n\njava.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)\n    org.apache.catalina.connector.Request.parseParts(Request.java:2871)\n    org.apache.catalina.connector.Request.parseParameters(Request.java:3176)\n    org.apache.catalina.connector.Request.getParameter(Request.java:1110)\n    org.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:381)\n    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:70)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\nroot cause\n\norg.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)\n    org.apache.tomcat.util.http.fileupload.FileUploadBase$FileItemIteratorImpl.&lt;init&gt;(FileUploadBase.java:811)\n    org.apache.tomcat.util.http.fileupload.FileUploadBase.getItemIterator(FileUploadBase.java:256)\n    org.apache.tomcat.util.http.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:280)\n    org.apache.catalina.connector.Request.parseParts(Request.java:2801)\n    org.apache.catalina.connector.Request.parseParameters(Request.java:3176)\n    org.apache.catalina.connector.Request.getParameter(Request.java:1110)\n    org.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:381)\n    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:70)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\nnote The full stack trace of the root cause is available in the Apache Tomcat/8.5.5 logs.\n\nApache Tomcat/8.5.5\n</code></pre>\n\n<hr>\n"},{"tags":["java","macos","swt","jface"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1697124832,"post_id":77281185,"comment_id":136243258,"body_markdown":"Not quite sure what you are asking. It is possible to increase the row height for all rows using the `SWT.MeasureItem` event, but that is a fixed height and applies to all rows. Anything more complicated would require something like [nattable](https://eclipse.dev/nattable/)","body":"Not quite sure what you are asking. It is possible to increase the row height for all rows using the <code>SWT.MeasureItem</code> event, but that is a fixed height and applies to all rows. Anything more complicated would require something like <a href=\"https://eclipse.dev/nattable/\" rel=\"nofollow noreferrer\">nattable</a>"},{"owner":{"account_id":968006,"reputation":135,"user_id":991082,"accept_rate":100,"display_name":"mogilka"},"score":0,"creation_date":1697277173,"post_id":77281185,"comment_id":136261711,"body_markdown":"@greg-449 the fact is that in Linux, table row resizes automatically in accordance with the contents of a biggest cell. But MacOS hides the cell&#39;s content, showing only its first line. It seems that this is a feature of Apple operating system. So I thought, maybe there is some kind of table setting (or redrawing method) in SWT that allows to automatically adjust the cell size after filling the table?","body":"@greg-449 the fact is that in Linux, table row resizes automatically in accordance with the contents of a biggest cell. But MacOS hides the cell&#39;s content, showing only its first line. It seems that this is a feature of Apple operating system. So I thought, maybe there is some kind of table setting (or redrawing method) in SWT that allows to automatically adjust the cell size after filling the table?"},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1697278339,"post_id":77281185,"comment_id":136261780,"body_markdown":"I don&#39;t think the macOS `NSTableView` that SWT uses supports doing this automatically. So as far as I know the SWT.MeasureItem listener is the only way change the row height (for all rows).","body":"I don&#39;t think the macOS <code>NSTableView</code> that SWT uses supports doing this automatically. So as far as I know the SWT.MeasureItem listener is the only way change the row height (for all rows)."},{"owner":{"account_id":968006,"reputation":135,"user_id":991082,"accept_rate":100,"display_name":"mogilka"},"score":0,"creation_date":1697296722,"post_id":77281185,"comment_id":136263437,"body_markdown":"As a basis I took the listener described here http://www.java2s.com/Tutorial/Java/0280__SWT/MultilineTablecell.htm","body":"As a basis I took the listener described here <a href=\"http://www.java2s.com/Tutorial/Java/0280__SWT/MultilineTablecell.htm\" rel=\"nofollow noreferrer\">java2s.com/Tutorial/Java/0280__SWT/MultilineTablecell.htm</a>"}],"owner":{"account_id":968006,"reputation":135,"user_id":991082,"accept_rate":100,"display_name":"mogilka"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697118523,"creation_date":1697118523,"question_id":77281185,"body_markdown":"I have a cross-platform SWT/Jface application with tables. Some table cells may content muli-line values separated by \\n symbol. They display normally under Linux: they are expanded along the column increasing the cell height. But in MacOS they are collapsed and I can see the full contents of a cell only when I hover the mouse over it. See my gif screencast.\r\n\r\nHow to configure a table so that it displays the entire contents of a cell under MacOS?\r\n\r\n    \ttableViewer2 = new TableViewer(group, SWT.BORDER | SWT.FULL_SELECTION);\r\n    \ttableViewer2.setLabelProvider(getLabelProvider());\r\n\t\tTable table = tableViewer2.getTable();\r\n\t\ttable.setHeaderVisible(true);\r\n\t\ttable.setLinesVisible(true);\r\n    \tif (null == data2)\r\n\t\t\ttable.removeAll();\r\n\t\telse {\r\n\t\t\ttableViewer2.setInput(data2);\r\n\t\t\tfor (int i = 0; i &lt; table.getColumnCount(); i++)\r\n\t\t\t\ttable.getColumn(i).pack();\r\n\t\t}\r\n\r\n[![collapsed multi-row table cells in MacOS][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VeXBl.gif","title":"How to make multi-row cell in SWT Table under MacOS","body":"<p>I have a cross-platform SWT/Jface application with tables. Some table cells may content muli-line values separated by \\n symbol. They display normally under Linux: they are expanded along the column increasing the cell height. But in MacOS they are collapsed and I can see the full contents of a cell only when I hover the mouse over it. See my gif screencast.</p>\n<p>How to configure a table so that it displays the entire contents of a cell under MacOS?</p>\n<pre><code>    tableViewer2 = new TableViewer(group, SWT.BORDER | SWT.FULL_SELECTION);\n    tableViewer2.setLabelProvider(getLabelProvider());\n    Table table = tableViewer2.getTable();\n    table.setHeaderVisible(true);\n    table.setLinesVisible(true);\n    if (null == data2)\n        table.removeAll();\n    else {\n        tableViewer2.setInput(data2);\n        for (int i = 0; i &lt; table.getColumnCount(); i++)\n            table.getColumn(i).pack();\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/VeXBl.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VeXBl.gif\" alt=\"collapsed multi-row table cells in MacOS\" /></a></p>\n"},{"tags":["java","tomcat","appfuse"],"comments":[{"owner":{"account_id":1042328,"reputation":7972,"user_id":1048093,"accept_rate":75,"display_name":"wemu"},"score":1,"creation_date":1361133680,"post_id":14925073,"comment_id":20943025,"body_markdown":"if you can upload a JSP file you may print out some info like in this example: http://www.bestdesigns.co.in/blog/check-jsp-tomcat-version","body":"if you can upload a JSP file you may print out some info like in this example: <a href=\"http://www.bestdesigns.co.in/blog/check-jsp-tomcat-version\" rel=\"nofollow noreferrer\">bestdesigns.co.in/blog/check-jsp-tomcat-version</a>"},{"owner":{"account_id":89964,"reputation":9353,"user_id":247869,"accept_rate":85,"display_name":"Yichz"},"score":0,"creation_date":1361135831,"post_id":14925073,"comment_id":20943636,"body_markdown":"right! you got the answer, it&#39;s indeed 7.0.27 which I want. please post it as an answer","body":"right! you got the answer, it&#39;s indeed 7.0.27 which I want. please post it as an answer"}],"answers":[{"comments":[{"owner":{"account_id":89964,"reputation":9353,"user_id":247869,"accept_rate":85,"display_name":"Yichz"},"score":0,"creation_date":1361130304,"post_id":14925114,"comment_id":20942058,"body_markdown":"sorry I forgot to mention, I&#39;m in Windows. but the problem is, I don&#39;t know actually which folder&#39;s tomcat is being ran","body":"sorry I forgot to mention, I&#39;m in Windows. but the problem is, I don&#39;t know actually which folder&#39;s tomcat is being ran"},{"owner":{"account_id":369969,"reputation":21500,"user_id":717630,"display_name":"grepit"},"score":1,"creation_date":1361134906,"post_id":14925114,"comment_id":20943384,"body_markdown":"@Kossel I added more information to check your version but it&#39;s more manual.","body":"@Kossel I added more information to check your version but it&#39;s more manual."},{"owner":{"account_id":303086,"reputation":655,"user_id":611818,"accept_rate":67,"display_name":"Federico Pugnali"},"score":1,"creation_date":1378837077,"post_id":14925114,"comment_id":27595159,"body_markdown":"I found the version in org\\apache\\catalina\\util\\ServerInfo.properties (there were no lib package)","body":"I found the version in org\\apache\\catalina\\util\\ServerInfo.properties (there were no lib package)"}],"tags":[],"owner":{"account_id":369969,"reputation":21500,"user_id":717630,"display_name":"grepit"},"comment_count":3,"down_vote_count":1,"up_vote_count":129,"is_accepted":false,"score":128,"last_activity_date":1455885988,"creation_date":1361129229,"answer_id":14925114,"question_id":14925073,"body_markdown":" 1. Try parsing or executing the Tomcat_home/bin directory and look for\r\n    a script named **version.sh** or **version.bat** depending on your\r\n    operating system.\r\n 2. Execute the script `./version.sh` or `version.bat`\r\n\r\nIf there are no version.bat or version.sh then\r\nuse a tool to unzipping JAR files (\\tomcat\\server\\lib\\catalina.jar) and look in the file org\\apache\\catalina\\util\\lib\\ServerInfo.properties.\r\nthe version defined under &quot;server.info=&quot;.","title":"Tomcat: How to find out running Tomcat version?","body":"<ol>\n<li>Try parsing or executing the Tomcat_home/bin directory and look for\na script named <strong>version.sh</strong> or <strong>version.bat</strong> depending on your\noperating system.</li>\n<li>Execute the script <code>./version.sh</code> or <code>version.bat</code></li>\n</ol>\n\n<p>If there are no version.bat or version.sh then\nuse a tool to unzipping JAR files (\\tomcat\\server\\lib\\catalina.jar) and look in the file org\\apache\\catalina\\util\\lib\\ServerInfo.properties.\nthe version defined under \"server.info=\".</p>\n"},{"comments":[{"owner":{"account_id":89964,"reputation":9353,"user_id":247869,"accept_rate":85,"display_name":"Yichz"},"score":0,"creation_date":1361131943,"post_id":14925427,"comment_id":20942557,"body_markdown":"I went to task manager, the only process showing is java.exe instead of tomcat7w.exe. if I kill java.exe the server dies","body":"I went to task manager, the only process showing is java.exe instead of tomcat7w.exe. if I kill java.exe the server dies"}],"tags":[],"owner":{"account_id":908280,"reputation":6397,"user_id":944070,"accept_rate":71,"display_name":"madlymad"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1361131111,"creation_date":1361131111,"answer_id":14925427,"question_id":14925073,"body_markdown":"Windows task manager &gt; Processes &gt; find tomcat &gt; right click &gt; open file location &gt; if you run Tomcat7w.exe it is visible at description.\r\n\r\nTomcat should running to be visible at Processes if not at Windows Vista/7 go to task manager &gt; tab (services) find tomcat start it and then processes.","title":"Tomcat: How to find out running Tomcat version?","body":"<p>Windows task manager > Processes > find tomcat > right click > open file location > if you run Tomcat7w.exe it is visible at description.</p>\n\n<p>Tomcat should running to be visible at Processes if not at Windows Vista/7 go to task manager > tab (services) find tomcat start it and then processes.</p>\n"},{"tags":[],"owner":{"account_id":1042328,"reputation":7972,"user_id":1048093,"accept_rate":75,"display_name":"wemu"},"comment_count":0,"down_vote_count":4,"up_vote_count":57,"is_accepted":true,"score":53,"last_activity_date":1549441181,"creation_date":1361198567,"answer_id":14938856,"question_id":14925073,"body_markdown":"\t\r\nif you can upload a JSP file you may print out some info like in this example: [bestdesigns.co.in/blog/check-jsp-tomcat-version][1]\r\n\r\nSave this code into a file called tomcat_version.jsp:\r\n\r\n        Tomcat Version : &lt;%= application.getServerInfo() %&gt;&lt;br&gt;    \r\n        Servlet Specification Version : \r\n    &lt;%= application.getMajorVersion() %&gt;.&lt;%= application.getMinorVersion() %&gt; &lt;br&gt;    \r\n        JSP version :\r\n    &lt;%=JspFactory.getDefaultFactory().getEngineInfo().getSpecificationVersion() %&gt;&lt;br&gt;\r\n\r\nWhen you access, http://example.com/tomcat_version.jsp, the output should look similar to:\r\n\r\n    Tomcat Version : Apache Tomcat/5.5.25\r\n    Servlet Specification Version : 2.4\r\n    JSP version: 2.0\r\n\r\n\r\n\r\n\r\n  [1]: http://www.bestdesigns.co.in/blog/check-jsp-tomcat-version\r\n\r\n\r\n","title":"Tomcat: How to find out running Tomcat version?","body":"<p>if you can upload a JSP file you may print out some info like in this example: <a href=\"http://www.bestdesigns.co.in/blog/check-jsp-tomcat-version\" rel=\"noreferrer\">bestdesigns.co.in/blog/check-jsp-tomcat-version</a></p>\n\n<p>Save this code into a file called tomcat_version.jsp:</p>\n\n<pre><code>    Tomcat Version : &lt;%= application.getServerInfo() %&gt;&lt;br&gt;    \n    Servlet Specification Version : \n&lt;%= application.getMajorVersion() %&gt;.&lt;%= application.getMinorVersion() %&gt; &lt;br&gt;    \n    JSP version :\n&lt;%=JspFactory.getDefaultFactory().getEngineInfo().getSpecificationVersion() %&gt;&lt;br&gt;\n</code></pre>\n\n<p>When you access, <a href=\"http://example.com/tomcat_version.jsp\" rel=\"noreferrer\">http://example.com/tomcat_version.jsp</a>, the output should look similar to:</p>\n\n<pre><code>Tomcat Version : Apache Tomcat/5.5.25\nServlet Specification Version : 2.4\nJSP version: 2.0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":541316,"reputation":2128,"user_id":909813,"display_name":"Abdelhameed Mahmoud"},"comment_count":0,"down_vote_count":2,"up_vote_count":46,"is_accepted":false,"score":44,"last_activity_date":1378423955,"creation_date":1378423955,"answer_id":18647569,"question_id":14925073,"body_markdown":"You can simply open `http://localhost:8080/` in your web browser\r\nand this will open Tomcat welcome page that shows running Tomcat version like this:\r\n\r\n    Apache Tomcat/7.0.42\r\n\r\n* I assume that your Tomcat is running on port 8080\r\n","title":"Tomcat: How to find out running Tomcat version?","body":"<p>You can simply open <code>http://localhost:8080/</code> in your web browser\nand this will open Tomcat welcome page that shows running Tomcat version like this:</p>\n\n<pre><code>Apache Tomcat/7.0.42\n</code></pre>\n\n<ul>\n<li>I assume that your Tomcat is running on port 8080</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":51270,"reputation":2250,"user_id":153144,"display_name":"Kai Carver"},"score":11,"creation_date":1458460213,"post_id":21773359,"comment_id":59864164,"body_markdown":"to be a tiny bit more specific, server/lib would be, for example, `/opt/tomcat/lib`","body":"to be a tiny bit more specific, server/lib would be, for example, <code>&#47;opt&#47;tomcat&#47;lib</code>"},{"owner":{"account_id":51270,"reputation":2250,"user_id":153144,"display_name":"Kai Carver"},"score":5,"creation_date":1458460626,"post_id":21773359,"comment_id":59864231,"body_markdown":"or for example on Windows, `C:\\Program Files\\Apache Software Foundation\\Tomcat 8.0\\lib`","body":"or for example on Windows, <code>C:\\Program Files\\Apache Software Foundation\\Tomcat 8.0\\lib</code>"},{"owner":{"account_id":907700,"reputation":806,"user_id":1154292,"display_name":"Matthieu"},"score":15,"creation_date":1486028870,"post_id":21773359,"comment_id":71174302,"body_markdown":"still working in 2017. On my CentOS 7, I need to go to /usr/share/tomcat/lib.","body":"still working in 2017. On my CentOS 7, I need to go to /usr/share/tomcat/lib."},{"owner":{"account_id":1134320,"reputation":537,"user_id":1119716,"accept_rate":92,"display_name":"Say No To Censorship"},"score":0,"creation_date":1504738865,"post_id":21773359,"comment_id":79133040,"body_markdown":"One Solaris 10 server, I get an error &quot;Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: Bad version number in .class file&quot; when I ran the command. On RHEL 7.2 I got the correct output.","body":"One Solaris 10 server, I get an error &quot;Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: Bad version number in .class file&quot; when I ran the command. On RHEL 7.2 I got the correct output."},{"owner":{"account_id":428194,"reputation":13578,"user_id":810358,"accept_rate":71,"display_name":"Venkatesh Laguduva"},"score":0,"creation_date":1504761827,"post_id":21773359,"comment_id":79138453,"body_markdown":"@sv. looks like there is a java version clash in your solaris server. use appropriate java version to invoke.","body":"@sv. looks like there is a java version clash in your solaris server. use appropriate java version to invoke."},{"owner":{"account_id":1134320,"reputation":537,"user_id":1119716,"accept_rate":92,"display_name":"Say No To Censorship"},"score":0,"creation_date":1504797928,"post_id":21773359,"comment_id":79162556,"body_markdown":"You&#39;re right, the default Java on the system was 1.5. After I pointed to 1.7 I get the correct output on Solaris as well.","body":"You&#39;re right, the default Java on the system was 1.5. After I pointed to 1.7 I get the correct output on Solaris as well."},{"owner":{"account_id":7352711,"reputation":193,"user_id":5598314,"display_name":"Itherael"},"score":8,"creation_date":1509558688,"post_id":21773359,"comment_id":81069273,"body_markdown":"This should be tag as the correct answer. I don&#39;t see why you need to write a JSP and deploy it in order to determine the tomcat version. This answer can has wider audience not just programmers, such as system admin just wanting to know exact tomcat version.","body":"This should be tag as the correct answer. I don&#39;t see why you need to write a JSP and deploy it in order to determine the tomcat version. This answer can has wider audience not just programmers, such as system admin just wanting to know exact tomcat version."},{"owner":{"account_id":85546,"reputation":84738,"user_id":238419,"accept_rate":89,"display_name":"BlueRaja - Danny Pflughoeft"},"score":0,"creation_date":1532461510,"post_id":21773359,"comment_id":89981844,"body_markdown":"on Mac, with Tomcat installed via brew, you can find the install location with `brew ls tomcat`.  For me it&#39;s `/usr/local/Cellar/tomcat/`","body":"on Mac, with Tomcat installed via brew, you can find the install location with <code>brew ls tomcat</code>.  For me it&#39;s <code>&#47;usr&#47;local&#47;Cellar&#47;tomcat&#47;</code>"},{"owner":{"account_id":5577204,"reputation":310,"user_id":4420271,"accept_rate":78,"display_name":"philburns"},"score":0,"creation_date":1643728168,"post_id":21773359,"comment_id":125413411,"body_markdown":"Still working for Tomcat 9.0 .","body":"Still working for Tomcat 9.0 ."}],"tags":[],"owner":{"account_id":428194,"reputation":13578,"user_id":810358,"accept_rate":71,"display_name":"Venkatesh Laguduva"},"comment_count":9,"down_vote_count":2,"up_vote_count":646,"is_accepted":false,"score":644,"last_activity_date":1540468336,"creation_date":1392363335,"answer_id":21773359,"question_id":14925073,"body_markdown":"Though this is not recent, I thought, my answer can still help others:\r\n\r\n    cd tomcat/lib \r\n    java -cp catalina.jar org.apache.catalina.util.ServerInfo\r\n\r\nand that&#39;s it.\r\n\r\n    Server version: Apache Tomcat/7.0.30\r\n    Server built:   May 23 2013 02:54:10\r\n    Server number:  7.0.30.0\r\n    OS Name:        Linux\r\n    OS Version:     3.13.0-36-generic\r\n    Architecture:   amd64\r\n    JVM Version:    1.7.0_65-b32\r\n    JVM Vendor:     Oracle Corporation\r\n\r\n\r\n","title":"Tomcat: How to find out running Tomcat version?","body":"<p>Though this is not recent, I thought, my answer can still help others:</p>\n\n<pre><code>cd tomcat/lib \njava -cp catalina.jar org.apache.catalina.util.ServerInfo\n</code></pre>\n\n<p>and that's it.</p>\n\n<pre><code>Server version: Apache Tomcat/7.0.30\nServer built:   May 23 2013 02:54:10\nServer number:  7.0.30.0\nOS Name:        Linux\nOS Version:     3.13.0-36-generic\nArchitecture:   amd64\nJVM Version:    1.7.0_65-b32\nJVM Vendor:     Oracle Corporation\n</code></pre>\n"},{"comments":[{"owner":{"account_id":104555,"reputation":266,"user_id":279478,"accept_rate":100,"display_name":"DannyK"},"score":0,"creation_date":1485787552,"post_id":21812477,"comment_id":71057591,"body_markdown":"Isn&#39;t this only when manager is installed? I know the default is to but we don&#39;t","body":"Isn&#39;t this only when manager is installed? I know the default is to but we don&#39;t"},{"owner":{"account_id":8020484,"reputation":726,"user_id":6049292,"display_name":"louigi600"},"score":0,"creation_date":1638281441,"post_id":21812477,"comment_id":124042744,"body_markdown":"this is the only one that works on older tomcats lice 3.x\nok is says page not found but in the header you get:\nServer: Tomcat Web Server/x.x.x Final","body":"this is the only one that works on older tomcats lice 3.x ok is says page not found but in the header you get: Server: Tomcat Web Server/x.x.x Final"}],"tags":[],"owner":{"account_id":237266,"reputation":406,"user_id":505307,"display_name":"Carlo Ledesma"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1560423692,"creation_date":1392560924,"answer_id":21812477,"question_id":14925073,"body_markdown":"You can find out the server information through its status page:\r\n\r\n    {running-tomcat-url}/manager/status\r\n\r\nOn that page you can see the version of Java on which your Tomcat runs\r\n\r\nNote: I have also pasted this answer on https://stackoverflow.com/questions/17478093/tomcat6-and-jre7-compatibility-issue-unsupported-major-minor-version-51-0/21812446#21812446","title":"Tomcat: How to find out running Tomcat version?","body":"<p>You can find out the server information through its status page:</p>\n\n<pre><code>{running-tomcat-url}/manager/status\n</code></pre>\n\n<p>On that page you can see the version of Java on which your Tomcat runs</p>\n\n<p>Note: I have also pasted this answer on <a href=\"https://stackoverflow.com/questions/17478093/tomcat6-and-jre7-compatibility-issue-unsupported-major-minor-version-51-0/21812446#21812446\">Tomcat6 and JRE7 compatibility issue. Unsupported major.minor version 51.0</a></p>\n"},{"tags":[],"owner":{"account_id":103755,"reputation":21224,"user_id":277740,"accept_rate":51,"display_name":"tokhi"},"comment_count":0,"down_vote_count":0,"up_vote_count":60,"is_accepted":false,"score":60,"last_activity_date":1420711544,"creation_date":1397479360,"answer_id":23060386,"question_id":14925073,"body_markdown":"execute the script in your `tomcat/bin` directory:\r\n\r\n    sh tomcat/bin/version.sh\r\n    \r\n    Server version: Apache Tomcat/7.0.42\r\n    Server built:   Jul 2 2013 08:57:41\r\n    Server number:  7.0.42.0\r\n    OS Name:        Linux\r\n    OS Version:     2.6.32-042stab084.26\r\n    Architecture:   amd64\r\n    JVM Version:    1.7.0_21-b11\r\n    JVM Vendor:     Oracle Corporation","title":"Tomcat: How to find out running Tomcat version?","body":"<p>execute the script in your <code>tomcat/bin</code> directory:</p>\n\n<pre><code>sh tomcat/bin/version.sh\n\nServer version: Apache Tomcat/7.0.42\nServer built:   Jul 2 2013 08:57:41\nServer number:  7.0.42.0\nOS Name:        Linux\nOS Version:     2.6.32-042stab084.26\nArchitecture:   amd64\nJVM Version:    1.7.0_21-b11\nJVM Vendor:     Oracle Corporation\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2017799,"reputation":3789,"user_id":1804661,"accept_rate":50,"display_name":"Christopher Yang"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1429122053,"creation_date":1429122053,"answer_id":29657852,"question_id":14925073,"body_markdown":"If Tomcat is installed as a service, try:\r\n\r\n    sudo /etc/init.d/tomcat version\r\n\r\nSwap out &quot;tomcat&quot; with the actual name of the service.","title":"Tomcat: How to find out running Tomcat version?","body":"<p>If Tomcat is installed as a service, try:</p>\n\n<pre><code>sudo /etc/init.d/tomcat version\n</code></pre>\n\n<p>Swap out \"tomcat\" with the actual name of the service.</p>\n"},{"tags":[],"owner":{"account_id":5950244,"reputation":81,"user_id":4678487,"display_name":"tcat"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1432766093,"creation_date":1432766093,"answer_id":30494268,"question_id":14925073,"body_markdown":"run the following\r\n\r\n    /usr/local/tomcat/bin/catalina.sh version\r\n\r\nits response will be something like:\r\n\r\n    Using CATALINA_BASE:   /usr/local/tomcat\r\n    Using CATALINA_HOME:   /usr/local/tomcat\r\n    Using CATALINA_TMPDIR: /var/tmp/\r\n    Using JRE_HOME:        /usr\r\n    Using CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar\r\n    Using CATALINA_PID:    /var/catalina.pid\r\n    Server version: Apache Tomcat/7.0.30\r\n    Server built:   Sep 27 2012 05:13:37\r\n    Server number:  7.0.30.0\r\n    OS Name:        Linux\r\n    OS Version:     2.6.32-504.3.3.el6.x86_64\r\n    Architecture:   amd64\r\n    JVM Version:    1.7.0_60-b19\r\n    JVM Vendor:     Oracle Corporation","title":"Tomcat: How to find out running Tomcat version?","body":"<p>run the following</p>\n\n<pre><code>/usr/local/tomcat/bin/catalina.sh version\n</code></pre>\n\n<p>its response will be something like:</p>\n\n<pre><code>Using CATALINA_BASE:   /usr/local/tomcat\nUsing CATALINA_HOME:   /usr/local/tomcat\nUsing CATALINA_TMPDIR: /var/tmp/\nUsing JRE_HOME:        /usr\nUsing CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar\nUsing CATALINA_PID:    /var/catalina.pid\nServer version: Apache Tomcat/7.0.30\nServer built:   Sep 27 2012 05:13:37\nServer number:  7.0.30.0\nOS Name:        Linux\nOS Version:     2.6.32-504.3.3.el6.x86_64\nArchitecture:   amd64\nJVM Version:    1.7.0_60-b19\nJVM Vendor:     Oracle Corporation\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4884677,"reputation":116,"user_id":3937470,"display_name":"Alvaro Vicente Le&#243;n Silvano"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1433851964,"creation_date":1433851964,"answer_id":30731740,"question_id":14925073,"body_markdown":"run on terminal of the Unix server\r\n\r\n    w3m http://localhost:8080/\r\n\r\nto quit press q and next y","title":"Tomcat: How to find out running Tomcat version?","body":"<p>run on terminal of the Unix server</p>\n\n<pre><code>w3m http://localhost:8080/\n</code></pre>\n\n<p>to quit press q and next y</p>\n"},{"tags":[],"owner":{"account_id":1092775,"reputation":15668,"user_id":1087040,"display_name":"Nanhe Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1448365205,"creation_date":1448365205,"answer_id":33892701,"question_id":14925073,"body_markdown":"To find out the Tomcat version, find this file – version.sh for *nix or version.bat for Windows. This version.sh file is normally located in the Tomcat bin folder.\r\n\r\n    phpmongodb@kumar:/usr/share/tomcat7/bin$ ./version.sh \r\n\r\n**Note**\r\n\r\nIf you are not sure where is the version.sh file, try this command :\r\n\r\n    sudo find / -name &quot;version.sh&quot;\r\n\r\nFind out everything about Tomcat7.\r\n\r\n    sudo find / -name &quot;tomcat7&quot;\r\n\r\n","title":"Tomcat: How to find out running Tomcat version?","body":"<p>To find out the Tomcat version, find this file – version.sh for *nix or version.bat for Windows. This version.sh file is normally located in the Tomcat bin folder.</p>\n\n<pre><code>phpmongodb@kumar:/usr/share/tomcat7/bin$ ./version.sh \n</code></pre>\n\n<p><strong>Note</strong></p>\n\n<p>If you are not sure where is the version.sh file, try this command :</p>\n\n<pre><code>sudo find / -name \"version.sh\"\n</code></pre>\n\n<p>Find out everything about Tomcat7.</p>\n\n<pre><code>sudo find / -name \"tomcat7\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4812242,"reputation":55062,"user_id":3885376,"accept_rate":64,"display_name":"ROMANIA_engineer"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1455887274,"creation_date":1455886581,"answer_id":35505896,"question_id":14925073,"body_markdown":"## Using the release notes\r\n\r\nIn the main Tomcat folder you can find the **RELEASE-NOTES** file which contains the following lines (~line 20-21):\r\n\r\n&gt;                     Apache Tomcat Version 8.0.22\r\n                            Release Notes\r\n\r\nOr you can get the same information using **command line**:\r\n\r\n* **Windows**:\r\n\r\n        type RELEASE-NOTES | find &quot;Apache Tomcat Version&quot;\r\n Output:\r\n\r\n                     Apache Tomcat Version 8.0.22\r\n\r\n* **Linux**:\r\n\r\n        cat RELEASE-NOTES | grep &quot;Apache Tomcat Version&quot;\r\n Output:\r\n\r\n                     Apache Tomcat Version 8.0.22","title":"Tomcat: How to find out running Tomcat version?","body":"<h2>Using the release notes</h2>\n\n<p>In the main Tomcat folder you can find the <strong>RELEASE-NOTES</strong> file which contains the following lines (~line 20-21):</p>\n\n<blockquote>\n<pre><code>                Apache Tomcat Version 8.0.22\n                        Release Notes\n</code></pre>\n</blockquote>\n\n<p>Or you can get the same information using <strong>command line</strong>:</p>\n\n<ul>\n<li><p><strong>Windows</strong>:</p>\n\n<pre><code>type RELEASE-NOTES | find \"Apache Tomcat Version\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>             Apache Tomcat Version 8.0.22\n</code></pre></li>\n<li><p><strong>Linux</strong>:</p>\n\n<pre><code>cat RELEASE-NOTES | grep \"Apache Tomcat Version\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>             Apache Tomcat Version 8.0.22\n</code></pre></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":451054,"reputation":490,"user_id":846727,"accept_rate":60,"display_name":"Kunal"},"score":0,"creation_date":1554503375,"post_id":35506087,"comment_id":97791377,"body_markdown":"On *nix here. My release notes file was missing. Running the `sudo` command worked for me","body":"On *nix here. My release notes file was missing. Running the <code>sudo</code> command worked for me"}],"tags":[],"owner":{"account_id":2827488,"reputation":403,"user_id":2429821,"display_name":"Mack"},"comment_count":1,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1561974539,"creation_date":1455887181,"answer_id":35506087,"question_id":14925073,"body_markdown":"    For windows machine \r\n    Go to the tomcat directory C:\\apache-tomcat-x.0.xx\\bin\r\n        bin&gt;version.bat\r\n        Using CATALINA_BASE:   &quot;C:\\apache-tomcat-x.0.xx&quot;\r\n        Using CATALINA_HOME:   &quot;C:\\apache-tomcat-x.0.xx&quot;\r\n        Using CATALINA_TMPDIR: &quot;C:\\apache-tomcat-x.0.xx\\temp&quot;\r\n        Using JRE_HOME:        &quot;C:\\Program Files\\Java\\jdk1.8.0_65&quot;\r\n        Using CLASSPATH:       &quot;C:\\apache-tomcat-x.0.xx\\bin\\bootstrap.jar;C:\\apache-tomcat-x.0.xx\\bin\\tomcat-juli.jar&quot;\r\n        Server version: Apache Tomcat/7.0.53\r\n\r\n  \r\n\r\n\r\n\r\n    For Linux Machine \r\n    Go to the tomcat directory /usr/mack/apache-tomcat-x.0.xx/bin\r\n        # ./version.sh\r\n        Using CATALINA_BASE:   /usr/mack/apache-tomcat-x.0.xx\r\n        Using CATALINA_HOME:   /usr/mack/apache-tomcat-x.0.xx\r\n        Using CATALINA_TMPDIR: /usr/mack/apache-tomcat-x.0.xx/temp\r\n        Using JRE_HOME:        /usr/java/jdk1.7.0_71/jre\r\n        Using CLASSPATH:       /usr/mack/apache-tomcat-x.0.xx/bin/bootstrap.jar:/usr/mack/apache-tomcat-x.0.xx/bin/tomcat-juli.jar\r\n        Server version: Apache Tomcat/7.0.56\r\n\r\n \r\n\r\n\r\n\r\n\r\n\r\n  \r\n\r\nIf Tomcat is installed as a service:\r\n\r\n    #sudo /etc/init.d/tomcat version","title":"Tomcat: How to find out running Tomcat version?","body":"<pre><code>For windows machine \nGo to the tomcat directory C:\\apache-tomcat-x.0.xx\\bin\n    bin&gt;version.bat\n    Using CATALINA_BASE:   \"C:\\apache-tomcat-x.0.xx\"\n    Using CATALINA_HOME:   \"C:\\apache-tomcat-x.0.xx\"\n    Using CATALINA_TMPDIR: \"C:\\apache-tomcat-x.0.xx\\temp\"\n    Using JRE_HOME:        \"C:\\Program Files\\Java\\jdk1.8.0_65\"\n    Using CLASSPATH:       \"C:\\apache-tomcat-x.0.xx\\bin\\bootstrap.jar;C:\\apache-tomcat-x.0.xx\\bin\\tomcat-juli.jar\"\n    Server version: Apache Tomcat/7.0.53\n\n\n\n\n\nFor Linux Machine \nGo to the tomcat directory /usr/mack/apache-tomcat-x.0.xx/bin\n    # ./version.sh\n    Using CATALINA_BASE:   /usr/mack/apache-tomcat-x.0.xx\n    Using CATALINA_HOME:   /usr/mack/apache-tomcat-x.0.xx\n    Using CATALINA_TMPDIR: /usr/mack/apache-tomcat-x.0.xx/temp\n    Using JRE_HOME:        /usr/java/jdk1.7.0_71/jre\n    Using CLASSPATH:       /usr/mack/apache-tomcat-x.0.xx/bin/bootstrap.jar:/usr/mack/apache-tomcat-x.0.xx/bin/tomcat-juli.jar\n    Server version: Apache Tomcat/7.0.56\n</code></pre>\n\n<p>If Tomcat is installed as a service:</p>\n\n<pre><code>#sudo /etc/init.d/tomcat version\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1714162,"reputation":1423,"user_id":1608670,"display_name":"Ivan Chau"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1461734571,"creation_date":1461734571,"answer_id":36880954,"question_id":14925073,"body_markdown":"Enter `404.jsp` or `non-existent.jsp`.\r\n\r\nGet Tomcat/JBoss version number at bottom of page.","title":"Tomcat: How to find out running Tomcat version?","body":"<p>Enter <code>404.jsp</code> or <code>non-existent.jsp</code>.</p>\n\n<p>Get Tomcat/JBoss version number at bottom of page.</p>\n"},{"tags":[],"owner":{"account_id":6590,"reputation":13159,"user_id":11142,"accept_rate":49,"display_name":"anjanb"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1467265984,"creation_date":1467265984,"answer_id":38114945,"question_id":14925073,"body_markdown":"For securing Tomcat from hackers, it&#39;s recommended that we try a few steps at hiding the tomcat version information. The OWASP project suggests a few steps. https://www.owasp.org/index.php/Securing_tomcat . If a tomcat installation is thus protected, then only 1 of the above answers will show the version of tomcat. &lt;br&gt;i.e going through the $TOMCAT_HOME\\RELEASE-NOTES file where the version number is clearly announced.\r\n\r\nI had one such protected server and only the RELEASE-NOTES file revealed the version of the tomcat. all other techniques failed to reveal the version info.","title":"Tomcat: How to find out running Tomcat version?","body":"<p>For securing Tomcat from hackers, it's recommended that we try a few steps at hiding the tomcat version information. The OWASP project suggests a few steps. <a href=\"https://www.owasp.org/index.php/Securing_tomcat\" rel=\"nofollow\">https://www.owasp.org/index.php/Securing_tomcat</a> . If a tomcat installation is thus protected, then only 1 of the above answers will show the version of tomcat. <br>i.e going through the $TOMCAT_HOME\\RELEASE-NOTES file where the version number is clearly announced.</p>\n\n<p>I had one such protected server and only the RELEASE-NOTES file revealed the version of the tomcat. all other techniques failed to reveal the version info.</p>\n"},{"tags":[],"owner":{"account_id":1550350,"reputation":1733,"user_id":1442898,"accept_rate":0,"display_name":"Yergalem"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1495719937,"creation_date":1495719578,"answer_id":44182073,"question_id":14925073,"body_markdown":"The version of currently running Tomcat\r\n\r\nIf you set the environtment variable - %CATALINA_HOME%, then\r\nWindows :\r\n\r\n    &gt;&gt; cd %CATALINA_HOME%\\bin\r\n    &gt;&gt; version\r\n\r\nAlternatively, \r\n\r\n    java.exe -cp lib\\catalina.jar org.apache.catalina.util.ServerInfo\r\n\r\n--------------------------------------------------------------------\r\nMY SETTING --- Hope yours will be similar to as follows\r\n\r\n    %CATALINA_HOME% --- C:\\Program Files\\Tomcat\\apache-tomcat-8.0.28\r\n\r\nOUTPUT\r\n\r\nServer version: Apache Tomcat/8.0.28\r\nServer built:   Oct 7 2015 18:25:21 UTC\r\nServer number:  8.0.28.0\r\nOS Name:        Windows 7\r\nOS Version:     6.1\r\nArchitecture:   amd64\r\nJVM Version:    1.8.0_111-b14\r\nJVM Vendor:     Oracle Corporation\r\n\r\n\r\n","title":"Tomcat: How to find out running Tomcat version?","body":"<p>The version of currently running Tomcat</p>\n\n<p>If you set the environtment variable - %CATALINA_HOME%, then\nWindows :</p>\n\n<pre><code>&gt;&gt; cd %CATALINA_HOME%\\bin\n&gt;&gt; version\n</code></pre>\n\n<p>Alternatively, </p>\n\n<pre><code>java.exe -cp lib\\catalina.jar org.apache.catalina.util.ServerInfo\n</code></pre>\n\n<hr>\n\n<p>MY SETTING --- Hope yours will be similar to as follows</p>\n\n<pre><code>%CATALINA_HOME% --- C:\\Program Files\\Tomcat\\apache-tomcat-8.0.28\n</code></pre>\n\n<p>OUTPUT</p>\n\n<p>Server version: Apache Tomcat/8.0.28\nServer built:   Oct 7 2015 18:25:21 UTC\nServer number:  8.0.28.0\nOS Name:        Windows 7\nOS Version:     6.1\nArchitecture:   amd64\nJVM Version:    1.8.0_111-b14\nJVM Vendor:     Oracle Corporation</p>\n"},{"tags":[],"owner":{"account_id":7670388,"reputation":197,"user_id":5812830,"accept_rate":0,"display_name":"Aramis Rodr&#237;guez Blanco"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1497911219,"creation_date":1497911219,"answer_id":44640894,"question_id":14925073,"body_markdown":"I know it is maybe too late for this, but this could be usefull:\r\nIf you try to know Apache Tomcat Server version from Java code, you can use:\r\n\r\nfrom a HttpServlet:\r\n\r\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) {\r\n        getServletContext().getServerInfo()\r\n    }\r\n\r\nfrom a ServletContextListener:\r\n\r\n    public void contextInitialized(ServletContextEvent event)  { \r\n    \tevent.getServletContext().getServerInfo();    \t\r\n    }","title":"Tomcat: How to find out running Tomcat version?","body":"<p>I know it is maybe too late for this, but this could be usefull:\nIf you try to know Apache Tomcat Server version from Java code, you can use:</p>\n\n<p>from a HttpServlet:</p>\n\n<pre><code>protected void doGet(HttpServletRequest request, HttpServletResponse response) {\n    getServletContext().getServerInfo()\n}\n</code></pre>\n\n<p>from a ServletContextListener:</p>\n\n<pre><code>public void contextInitialized(ServletContextEvent event)  { \n    event.getServletContext().getServerInfo();      \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7735988,"reputation":11,"user_id":5857565,"display_name":"kenbrown_ct"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1509459576,"creation_date":1509459576,"answer_id":47037645,"question_id":14925073,"body_markdown":"We are running in a Windows environment and I had to find a way to get the Tomcat version outside of the Java environment.  Without knowing the version, I could not determine the directories.  I finally found the best way was to query the Tomcat service using:\r\n\r\n&gt; C:\\temp&gt;sc query | find /I &quot;tomcat&quot;&lt;br&gt;\r\nSERVICE_NAME: Tomcat6&lt;br&gt;\r\nDISPLAY_NAME: Apache Tomcat 6.0 Tomcat6","title":"Tomcat: How to find out running Tomcat version?","body":"<p>We are running in a Windows environment and I had to find a way to get the Tomcat version outside of the Java environment.  Without knowing the version, I could not determine the directories.  I finally found the best way was to query the Tomcat service using:</p>\n\n<blockquote>\n  <p>C:\\temp>sc query | find /I \"tomcat\"<br>\n  SERVICE_NAME: Tomcat6<br>\n  DISPLAY_NAME: Apache Tomcat 6.0 Tomcat6</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":11985291,"reputation":1373,"user_id":8769958,"display_name":"juergi"},"score":0,"creation_date":1650523733,"post_id":47873621,"comment_id":127138670,"body_markdown":"you will only see this if the manager application is enabled (which is not always the case in production envirenments","body":"you will only see this if the manager application is enabled (which is not always the case in production envirenments"}],"tags":[],"owner":{"account_id":3652290,"reputation":2120,"user_id":3044117,"accept_rate":38,"display_name":"Eduardo"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1513618532,"creation_date":1513618532,"answer_id":47873621,"question_id":14925073,"body_markdown":"Open your tomcat home page (Usually `localhost:8080`)\r\n\r\nYou will see something like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vrzpO.png","title":"Tomcat: How to find out running Tomcat version?","body":"<p>Open your tomcat home page (Usually <code>localhost:8080</code>)</p>\n\n<p>You will see something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vrzpO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vrzpO.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":6359511,"reputation":2076,"user_id":4935444,"display_name":"Harsimranjit Singh Kler"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1531287103,"creation_date":1531287103,"answer_id":51277853,"question_id":14925073,"body_markdown":"Another option is view release notes from tomcat,applicable to linux/window\r\n\r\n    {Tomcat_home}/webapps/ROOT/RELEASE-NOTES.txt","title":"Tomcat: How to find out running Tomcat version?","body":"<p>Another option is view release notes from tomcat,applicable to linux/window</p>\n\n<pre><code>{Tomcat_home}/webapps/ROOT/RELEASE-NOTES.txt\n</code></pre>\n"},{"tags":[],"owner":{"account_id":873159,"reputation":26684,"user_id":923560,"accept_rate":47,"display_name":"Abdull"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1539696073,"creation_date":1539696073,"answer_id":52836452,"question_id":14925073,"body_markdown":"In Unix-like environments, I also recommend checking the actual running process command line:\r\n\r\n\r\n\r\n    $ ps aux | grep java\r\n\r\n    ...\r\n    /usr/lib/jvm/java-8-openjdk-amd64/bin/java -Djava.util.logging.config.file=/srv/tomcat-instances/bla/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.awt.headless=true -Xmx4096M -XX:+UseConcMarkSweepGC -Djdk.tls.ephemeralDHKeySize=2048 -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -agentlib:jdwp=transport=dt_socket,address=8000,server=y,suspend=n -Xmx4096m -Xms4096m -XX:MaxPermSize=2048m -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.port=8090 -Dcom.sun.management.jmxremote.rmi.port=8090 -Djava.rmi.server.hostname=localhost -Djava.endorsed.dirs=/opt/apache-tomcat-8.0.47/endorsed -classpath /opt/apache-tomcat-8.0.47/bin/bootstrap.jar:/opt/apache-tomcat-8.0.47/bin/tomcat-juli.jar -Dcatalina.base=/srv/tomcat-instances/bla -Dcatalina.home=/opt/apache-tomcat-8.0.47 -Djava.io.tmpdir=/tmp/tomcat8-bla-tmp org.apache.catalina.startup.Bootstrap start\r\n    ...\r\nOne can run on subtle weird behaviors due to (operating system) environment variables and (Java) system properties being set to unexpected values. I had a situation where due to an outdated Tomcat `setenv.sh`, A Tomcat 8 started with classes from a Tomcat 7 on the classpath. Make sure that in the process command line options such as `-Dcatalina.base`, `-Dcatalina.home` and `-classpath` make sense.","title":"Tomcat: How to find out running Tomcat version?","body":"<p>In Unix-like environments, I also recommend checking the actual running process command line:</p>\n\n<pre><code>$ ps aux | grep java\n\n...\n/usr/lib/jvm/java-8-openjdk-amd64/bin/java -Djava.util.logging.config.file=/srv/tomcat-instances/bla/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.awt.headless=true -Xmx4096M -XX:+UseConcMarkSweepGC -Djdk.tls.ephemeralDHKeySize=2048 -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -agentlib:jdwp=transport=dt_socket,address=8000,server=y,suspend=n -Xmx4096m -Xms4096m -XX:MaxPermSize=2048m -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.port=8090 -Dcom.sun.management.jmxremote.rmi.port=8090 -Djava.rmi.server.hostname=localhost -Djava.endorsed.dirs=/opt/apache-tomcat-8.0.47/endorsed -classpath /opt/apache-tomcat-8.0.47/bin/bootstrap.jar:/opt/apache-tomcat-8.0.47/bin/tomcat-juli.jar -Dcatalina.base=/srv/tomcat-instances/bla -Dcatalina.home=/opt/apache-tomcat-8.0.47 -Djava.io.tmpdir=/tmp/tomcat8-bla-tmp org.apache.catalina.startup.Bootstrap start\n...\n</code></pre>\n\n<p>One can run on subtle weird behaviors due to (operating system) environment variables and (Java) system properties being set to unexpected values. I had a situation where due to an outdated Tomcat <code>setenv.sh</code>, A Tomcat 8 started with classes from a Tomcat 7 on the classpath. Make sure that in the process command line options such as <code>-Dcatalina.base</code>, <code>-Dcatalina.home</code> and <code>-classpath</code> make sense.</p>\n"},{"tags":[],"owner":{"account_id":14078500,"reputation":11,"user_id":10170145,"display_name":"Shubh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1551941058,"creation_date":1551938415,"answer_id":55037010,"question_id":14925073,"body_markdown":"Simply start tomcat and search for &quot;**Server version name**&quot; in `catalina.logs` and you will get version of your tomcat.\r\nFor example: \r\n&gt;&quot;Mar 07, 2019 11:25:40 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: Server version name:   Apache Tomcat/**9.0.16**&quot;","title":"Tomcat: How to find out running Tomcat version?","body":"<p>Simply start tomcat and search for \"<strong>Server version name</strong>\" in <code>catalina.logs</code> and you will get version of your tomcat.\nFor example: </p>\n\n<blockquote>\n  <p>\"Mar 07, 2019 11:25:40 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: Server version name:   Apache Tomcat/<strong>9.0.16</strong>\"</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1052025,"reputation":5610,"user_id":1055715,"accept_rate":83,"display_name":"Surasin Tancharoen"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1580313710,"creation_date":1557755572,"answer_id":56113852,"question_id":14925073,"body_markdown":"This one command which you can check almost everything:\r\n\r\n    java -cp tomcat/lib/catalina.jar org.apache.catalina.util.ServerInfo\r\n\r\nor \r\n\r\n    tomcat/bin/catalina.sh version\r\n\r\n\r\nAnd the output looks like this\r\n\r\n    Server version: Apache Tomcat/8.5.24\r\n    Server built:   Nov 27 2017 13:05:30 UTC\r\n    Server number:  8.5.24.0\r\n    OS Name:        Linux\r\n    OS Version:     4.4.0-137-generic\r\n    Architecture:   amd64\r\n    JVM Version:    1.8.0_131-b11\r\n    JVM Vendor:     Oracle Corporation\r\n\r\n","title":"Tomcat: How to find out running Tomcat version?","body":"<p>This one command which you can check almost everything:</p>\n\n<pre><code>java -cp tomcat/lib/catalina.jar org.apache.catalina.util.ServerInfo\n</code></pre>\n\n<p>or </p>\n\n<pre><code>tomcat/bin/catalina.sh version\n</code></pre>\n\n<p>And the output looks like this</p>\n\n<pre><code>Server version: Apache Tomcat/8.5.24\nServer built:   Nov 27 2017 13:05:30 UTC\nServer number:  8.5.24.0\nOS Name:        Linux\nOS Version:     4.4.0-137-generic\nArchitecture:   amd64\nJVM Version:    1.8.0_131-b11\nJVM Vendor:     Oracle Corporation\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11883050,"reputation":395,"user_id":8696237,"display_name":"Sandun"},"score":0,"creation_date":1564225768,"post_id":56579001,"comment_id":100966069,"body_markdown":"This works, but you have to use &#39;sudo&#39; every time, right?","body":"This works, but you have to use &#39;sudo&#39; every time, right?"}],"tags":[],"owner":{"account_id":11925857,"reputation":309,"user_id":8727175,"display_name":"Narendra Kumar"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1560423678,"creation_date":1560423636,"answer_id":56579001,"question_id":14925073,"body_markdown":"In Linux to check the tomcat version \r\n\r\n```\r\ncd /opt/tomcat/bin\r\n\r\n./catalina.sh version\r\n```","title":"Tomcat: How to find out running Tomcat version?","body":"<p>In Linux to check the tomcat version </p>\n\n<pre><code>cd /opt/tomcat/bin\n\n./catalina.sh version\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9499339,"reputation":127,"user_id":7061105,"display_name":"Akito"},"score":0,"creation_date":1651049720,"post_id":62367907,"comment_id":127267415,"body_markdown":"Where does it show the exact Tomcat version in that file? It just says the major and minor version. It does not mention the patch version, not to mention a build number or commit hash.","body":"Where does it show the exact Tomcat version in that file? It just says the major and minor version. It does not mention the patch version, not to mention a build number or commit hash."}],"tags":[],"owner":{"account_id":8592069,"reputation":509,"user_id":6436354,"display_name":"gobi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592104053,"creation_date":1592104053,"answer_id":62367907,"question_id":14925073,"body_markdown":"To know exact tomcat version alone, just visit `vi tomcat/BUILDING.txt`","title":"Tomcat: How to find out running Tomcat version?","body":"<p>To know exact tomcat version alone, just visit <code>vi tomcat/BUILDING.txt</code></p>\n"},{"tags":[],"owner":{"account_id":19303765,"reputation":21,"user_id":14111074,"display_name":"jrykowski"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1597511700,"creation_date":1597511317,"answer_id":63428742,"question_id":14925073,"body_markdown":"For Windows PowerShell command-line method of checking running version(s) of Tomcat service:\r\n```\r\n(get-service Tomcat*).DisplayName\r\n```\r\n\r\nSample output...\r\n```\r\nApache Tomcat 8.5 Tomcat8\r\n```\r\n\r\nIf also want to know additional details including the location of folder where service running at:\r\n\r\n```\r\nGet-WmiObject win32_service | Where-Object {$_.Name -like &#39;Tomcat*&#39;} | select Name, DisplayName, State, PathName\r\n```\r\n\r\nSample output...\r\n```\r\nName    DisplayName               State   PathName\r\n----    -----------               -----   --------\r\nTomcat8 Apache Tomcat 8.5 Tomcat8 Running &quot;C:\\Program Files\\Apache Software Foundation\\Tomcat 8.5\\bin\\Tomcat8.exe&quot; /...\r\n```\r\n","title":"Tomcat: How to find out running Tomcat version?","body":"<p>For Windows PowerShell command-line method of checking running version(s) of Tomcat service:</p>\n<pre><code>(get-service Tomcat*).DisplayName\n</code></pre>\n<p>Sample output...</p>\n<pre><code>Apache Tomcat 8.5 Tomcat8\n</code></pre>\n<p>If also want to know additional details including the location of folder where service running at:</p>\n<pre><code>Get-WmiObject win32_service | Where-Object {$_.Name -like 'Tomcat*'} | select Name, DisplayName, State, PathName\n</code></pre>\n<p>Sample output...</p>\n<pre><code>Name    DisplayName               State   PathName\n----    -----------               -----   --------\nTomcat8 Apache Tomcat 8.5 Tomcat8 Running &quot;C:\\Program Files\\Apache Software Foundation\\Tomcat 8.5\\bin\\Tomcat8.exe&quot; /...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1883951,"reputation":2791,"user_id":1707015,"accept_rate":71,"display_name":"qr&#228;bn&#246;"},"score":0,"creation_date":1620989222,"post_id":63813078,"comment_id":119366297,"body_markdown":"Well `sudo updatedb &amp;&amp; sudo locate version.sh` is probably faster then searching your whole disk with find. Upvote anyway! Especially since your version with find also works in containers.","body":"Well <code>sudo updatedb &amp;&amp; sudo locate version.sh</code> is probably faster then searching your whole disk with find. Upvote anyway! Especially since your version with find also works in containers."}],"tags":[],"owner":{"account_id":15115227,"reputation":25341,"user_id":10907864,"display_name":"Promise Preston"},"comment_count":1,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1630617221,"creation_date":1599659283,"answer_id":63813078,"question_id":14925073,"body_markdown":"I had this challenge when working on an Ubuntu 18.04 Linux server.\r\n\r\n**Here&#39;s how I fixed it**:\r\n\r\nRun the command below to determine the location of your `version.sh` file:\r\n\r\n    sudo find / -name &quot;version.sh&quot;\r\n\r\nFor me the output was:\r\n\r\n    /opt/tomcat/bin/version.sh\r\n\r\nThen, using the output, run the file (`version.sh`) as a shell script (`sh`):\r\n\r\n    sh /opt/tomcat/bin/version.sh\r\n\r\nThat&#39;s all.\r\n\r\n**I hope this helps**","title":"Tomcat: How to find out running Tomcat version?","body":"<p>I had this challenge when working on an Ubuntu 18.04 Linux server.</p>\n<p><strong>Here's how I fixed it</strong>:</p>\n<p>Run the command below to determine the location of your <code>version.sh</code> file:</p>\n<pre><code>sudo find / -name &quot;version.sh&quot;\n</code></pre>\n<p>For me the output was:</p>\n<pre><code>/opt/tomcat/bin/version.sh\n</code></pre>\n<p>Then, using the output, run the file (<code>version.sh</code>) as a shell script (<code>sh</code>):</p>\n<pre><code>sh /opt/tomcat/bin/version.sh\n</code></pre>\n<p>That's all.</p>\n<p><strong>I hope this helps</strong></p>\n"},{"tags":[],"owner":{"account_id":3854437,"reputation":11,"user_id":3193759,"display_name":"Steven Baker"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1613647376,"creation_date":1613647376,"answer_id":66258963,"question_id":14925073,"body_markdown":"On Windows just cmd\r\n\r\nC:\\Program Files (x86)\\Extensis\\Portfolio Server\\applications\\tomcat\\bin&gt;version","title":"Tomcat: How to find out running Tomcat version?","body":"<p>On Windows just cmd</p>\n<p>C:\\Program Files (x86)\\Extensis\\Portfolio Server\\applications\\tomcat\\bin&gt;version</p>\n"},{"tags":[],"owner":{"account_id":10982424,"reputation":11,"user_id":8069116,"display_name":"Mark"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644303873,"creation_date":1643940494,"answer_id":70980661,"question_id":14925073,"body_markdown":"check yout tomcat log directory.\r\n\r\n    goto  /var/log/tomcat8/\r\n\r\nview the file: catalina.out\r\nit will show the tomcat version below:\r\n\r\n&gt;Server version name:   Apache Tomcat/8.5.72\r\n04-Feb-2022 04:00:58.537 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:          Oct 28 2021 00:54:01 UTC\r\n04-Feb-2022 04:00:58.537 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version number: 8.5.72.0\r\n04-Feb-2022 04:00:58.537 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name:               Linux\r\n04-Feb-2022 04:00:58.537 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture:          amd64\r\n04-Feb-2022 04:00:58.537 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Version:           1.8.0_312-b07","title":"Tomcat: How to find out running Tomcat version?","body":"<p>check yout tomcat log directory.</p>\n<pre><code>goto  /var/log/tomcat8/\n</code></pre>\n<p>view the file: catalina.out\nit will show the tomcat version below:</p>\n<blockquote>\n<p>Server version name:   Apache Tomcat/8.5.72\n04-Feb-2022 04:00:58.537 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:          Oct 28 2021 00:54:01 UTC\n04-Feb-2022 04:00:58.537 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version number: 8.5.72.0\n04-Feb-2022 04:00:58.537 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name:               Linux\n04-Feb-2022 04:00:58.537 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture:          amd64\n04-Feb-2022 04:00:58.537 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Version:           1.8.0_312-b07</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1652009563,"creation_date":1652009162,"answer_id":72160522,"question_id":14925073,"body_markdown":"These Following 4 ways can be used to find out `Apache Tomcat Version` in `Linux`:\r\n\r\n**1). Linux via Version Script in Tomcat Bin Directory:**\r\n\r\n 1. Locate the Tomcat`s bin Directory that is being used\r\n 2. Check for version.sh script exists, i.e. ll version.sh\r\n 3. Execute the script either way: `sh version.sh` OR `./version.sh`\r\n\r\nThis will output you sample as below:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n**2). Check Tomcat Version in Linux Command Line**\r\n\r\n    ps -ef |grep -i tomcat // this is will output and you will need to eye-ball to find version, sample below\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pObgv.jpg\r\n  [2]: https://i.stack.imgur.com/gT8MY.jpg\r\n\r\n**3). Get Tomcat version via Catalina.jar**\r\n\r\nExecute the following CMD in terminal, you will need to locate Lib folder in Tomcat\r\n\r\n    java -cp tomcat/lib/catalina.jar org.apache.catalina.util.ServerInfo\r\n\r\n**4). Get Tomcat version through JSP**\r\n\r\n 1. Create JSP page with the below code\r\n 2. Then try to open the JSP via Tomcat in the Browser\r\n 3. This will output the Tomcat Version you are running.\r\n\r\n&gt; Tomcat Version : &lt;%= application.getServerInfo() %&gt; &lt;br&gt;     Servlet\r\n&gt; Specification Version : &lt;%= application.getMajorVersion() %&gt;. &lt;%=\r\n&gt; application.getMinorVersion() %&gt;  &lt;br&gt;     JSP version :\r\n&gt; &lt;%=JspFactory.getDefaultFactory().getEngineInfo().getSpecificationVersion()\r\n&gt; %&gt; &lt;br&gt;","title":"Tomcat: How to find out running Tomcat version?","body":"<p>These Following 4 ways can be used to find out <code>Apache Tomcat Version</code> in <code>Linux</code>:</p>\n<p><strong>1). Linux via Version Script in Tomcat Bin Directory:</strong></p>\n<ol>\n<li>Locate the Tomcat`s bin Directory that is being used</li>\n<li>Check for version.sh script exists, i.e. ll version.sh</li>\n<li>Execute the script either way: <code>sh version.sh</code> OR <code>./version.sh</code></li>\n</ol>\n<p>This will output you sample as below:</p>\n<p><a href=\"https://i.stack.imgur.com/pObgv.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pObgv.jpg\" alt=\"enter image description here\" /></a></p>\n<p><strong>2). Check Tomcat Version in Linux Command Line</strong></p>\n<pre><code>ps -ef |grep -i tomcat // this is will output and you will need to eye-ball to find version, sample below\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/gT8MY.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gT8MY.jpg\" alt=\"enter image description here\" /></a></p>\n<p><strong>3). Get Tomcat version via Catalina.jar</strong></p>\n<p>Execute the following CMD in terminal, you will need to locate Lib folder in Tomcat</p>\n<pre><code>java -cp tomcat/lib/catalina.jar org.apache.catalina.util.ServerInfo\n</code></pre>\n<p><strong>4). Get Tomcat version through JSP</strong></p>\n<ol>\n<li>Create JSP page with the below code</li>\n<li>Then try to open the JSP via Tomcat in the Browser</li>\n<li>This will output the Tomcat Version you are running.</li>\n</ol>\n<blockquote>\n<p>Tomcat Version : &lt;%= application.getServerInfo() %&gt; <br>     Servlet\nSpecification Version : &lt;%= application.getMajorVersion() %&gt;. &lt;%=\napplication.getMinorVersion() %&gt;  <br>     JSP version :\n&lt;%=JspFactory.getDefaultFactory().getEngineInfo().getSpecificationVersion()\n%&gt; <br></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8329980,"reputation":947,"user_id":6258747,"display_name":"igorpcholkin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660657122,"creation_date":1660657122,"answer_id":73374934,"question_id":14925073,"body_markdown":"Sometimes the bin/version.sh script in tomcat directory still doesn&#39;t show a numerical version. E.g. it can just show: &quot;Server version: WebServer&quot;. And other mentioned opportunities (checking path, checking logs, release notes, tomcat root page output) don&#39;t work neither.\r\nIn that case (you should still have read access to tomcat&#39;s directory):\r\n1. take catalina.jar from tomcat&#39;s lib directory.\r\n2. extract it \r\n3. take a look inside org/apache/catalina/util/ServerInfo.properties\r\n\r\nit can contain what you expect (server.info and server.number fields)","title":"Tomcat: How to find out running Tomcat version?","body":"<p>Sometimes the bin/version.sh script in tomcat directory still doesn't show a numerical version. E.g. it can just show: &quot;Server version: WebServer&quot;. And other mentioned opportunities (checking path, checking logs, release notes, tomcat root page output) don't work neither.\nIn that case (you should still have read access to tomcat's directory):</p>\n<ol>\n<li>take catalina.jar from tomcat's lib directory.</li>\n<li>extract it</li>\n<li>take a look inside org/apache/catalina/util/ServerInfo.properties</li>\n</ol>\n<p>it can contain what you expect (server.info and server.number fields)</p>\n"},{"tags":[],"owner":{"account_id":19303012,"reputation":19,"user_id":14110479,"display_name":"You"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697118150,"creation_date":1697115798,"answer_id":77280842,"question_id":14925073,"body_markdown":"    apt show tomcat9       # Pour Debian/Ubuntu\r\n    # or\r\n    yum info tomcat        # Pour CentOS/RedHat\r\n    ...\r\n    Name        : tomcat\r\n    Arch        : noarch\r\n    Version     : 7.0.76\r\n    # first locate your catalina.sh like : \r\n    locate catalina.sh\r\n    /opt/tomcat/bin/catalina.sh\r\n    #and \r\n    /opt/tomcat/bin/catalina.sh version\r\n    ...\r\n    Server version: Apache Tomcat/9.0.30\r\n    ...\r\n    Server number:  9.0.30.0\r\n    OS Name:        Linux\r\n    OS Version:     3.10.0-1160.95.1.el7.x86_64\r\n    Architecture:   amd64\r\n    ...\r\n   \r\n    # or \r\n    systemctl status tomcat\r\n    ● tomcat.service - Apache Tomcat 9\r\n    Loaded: loaded (/etc/systemd/system/tomcat.service; enabled; vendor             \r\n    preset: disabled)\r\n    Active: active (running) since Tue 2023-09-12 08:26:34 CEST; 4 weeks 2     \r\n    days ago\r\n    Process: 961 ExecStart=/opt/tomcat/bin/startup.sh (code=exited,     \r\n    status=0/SUCCESS)\r\n    Main PID: 1041 (java)\r\n    CGroup: /system.slice/tomcat.service\r\n           └─1041 /usr/bin/java - \r\n    Djava.util.logging.config.file=/opt/tomcat/conf/\r\n\r\n","title":"Tomcat: How to find out running Tomcat version?","body":"<pre><code>apt show tomcat9       # Pour Debian/Ubuntu\n# or\nyum info tomcat        # Pour CentOS/RedHat\n...\nName        : tomcat\nArch        : noarch\nVersion     : 7.0.76\n# first locate your catalina.sh like : \nlocate catalina.sh\n/opt/tomcat/bin/catalina.sh\n#and \n/opt/tomcat/bin/catalina.sh version\n...\nServer version: Apache Tomcat/9.0.30\n...\nServer number:  9.0.30.0\nOS Name:        Linux\nOS Version:     3.10.0-1160.95.1.el7.x86_64\nArchitecture:   amd64\n...\n\n# or \nsystemctl status tomcat\n● tomcat.service - Apache Tomcat 9\nLoaded: loaded (/etc/systemd/system/tomcat.service; enabled; vendor             \npreset: disabled)\nActive: active (running) since Tue 2023-09-12 08:26:34 CEST; 4 weeks 2     \ndays ago\nProcess: 961 ExecStart=/opt/tomcat/bin/startup.sh (code=exited,     \nstatus=0/SUCCESS)\nMain PID: 1041 (java)\nCGroup: /system.slice/tomcat.service\n       └─1041 /usr/bin/java - \nDjava.util.logging.config.file=/opt/tomcat/conf/\n</code></pre>\n"}],"owner":{"account_id":89964,"reputation":9353,"user_id":247869,"accept_rate":85,"display_name":"Yichz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":748124,"favorite_count":0,"down_vote_count":0,"up_vote_count":234,"accepted_answer_id":14938856,"answer_count":32,"score":234,"last_activity_date":1697118150,"creation_date":1361128940,"question_id":14925073,"body_markdown":"I&#39;m trying to get Appfuse + Tomcat + jRebel working.\r\n\r\nAppfuse by default uses Cargo to download tomcat (ver. 7.0.33) and deploy the application to it. I wish to use an already installed tomcat (ver. 7.0.27) instead of the downloaded one. I made the change following the [appfuse FAQ][1].\r\n\r\nAfter deploying with `mvn cargo:run`, how can I know that the actual running tomcat is indeed 7.0.27? \r\n\r\nI used to type a wrong URL (ex. *localhost:8080/dfsfsdf*) to see it in the error page, but now it shows nothing.\r\n\r\nMy `$CATALINA_HOME` points to my own tomcat 7.0.27.\r\nsorry forgot to mention, it&#39;s for Windows.\r\n\r\n\r\nUpdate:\r\n\r\nSince this question had become somehow popular, I would like to explain why that accepted answer. simple, it was the first one which solved my problem. \r\n\r\nI am looking at the title of the question,  [@Tech Junkie][2] and [@CPU 100][3] really have the best answer, but not for the scenario I was encountered. (I was wanting to know if `mvn cargo:run` runs my installed tomcat or a &quot;project embeded&quot; tomcat)  `:)`\r\n\r\n\r\n  [1]: http://appfuse.org/display/APF/FAQ#FAQ-useexistingtomcat\r\n  [2]: https://stackoverflow.com/a/21773359/247869\r\n  [3]: https://stackoverflow.com/a/14925114/247869","title":"Tomcat: How to find out running Tomcat version?","body":"<p>I'm trying to get Appfuse + Tomcat + jRebel working.</p>\n<p>Appfuse by default uses Cargo to download tomcat (ver. 7.0.33) and deploy the application to it. I wish to use an already installed tomcat (ver. 7.0.27) instead of the downloaded one. I made the change following the <a href=\"http://appfuse.org/display/APF/FAQ#FAQ-useexistingtomcat\" rel=\"noreferrer\">appfuse FAQ</a>.</p>\n<p>After deploying with <code>mvn cargo:run</code>, how can I know that the actual running tomcat is indeed 7.0.27?</p>\n<p>I used to type a wrong URL (ex. <em>localhost:8080/dfsfsdf</em>) to see it in the error page, but now it shows nothing.</p>\n<p>My <code>$CATALINA_HOME</code> points to my own tomcat 7.0.27.\nsorry forgot to mention, it's for Windows.</p>\n<p>Update:</p>\n<p>Since this question had become somehow popular, I would like to explain why that accepted answer. simple, it was the first one which solved my problem.</p>\n<p>I am looking at the title of the question,  <a href=\"https://stackoverflow.com/a/21773359/247869\">@Tech Junkie</a> and <a href=\"https://stackoverflow.com/a/14925114/247869\">@CPU 100</a> really have the best answer, but not for the scenario I was encountered. (I was wanting to know if <code>mvn cargo:run</code> runs my installed tomcat or a &quot;project embeded&quot; tomcat)  <code>:)</code></p>\n"},{"tags":["java","maven","plugins","jboss","pom.xml"],"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1697211511,"post_id":77280628,"comment_id":136255743,"body_markdown":"I&#39;d suggest using the [`wildfly-maven-plugin`](https://docs.wildfly.org/wildfly-maven-plugin). It works with EAP 7 and really EAP 6 if you tweak the management port. Version 3.0.2 supports Java 8. 4+ requires Java 11.","body":"I&#39;d suggest using the <a href=\"https://docs.wildfly.org/wildfly-maven-plugin\" rel=\"nofollow noreferrer\"><code>wildfly-maven-plugin</code></a>. It works with EAP 7 and really EAP 6 if you tweak the management port. Version 3.0.2 supports Java 8. 4+ requires Java 11."},{"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"score":0,"creation_date":1697259928,"post_id":77280628,"comment_id":136260617,"body_markdown":"how can i tweak management port? And the question is also for the plugin you mentioned","body":"how can i tweak management port? And the question is also for the plugin you mentioned"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1697379422,"post_id":77280628,"comment_id":136269893,"body_markdown":"Which goal are you using? It should be &lt;port&gt; though. For EAP 6 the default is 9999. For EAP 7 the default is 9990. The wildfly-maven-plugin uses 9990 by default.","body":"Which goal are you using? It should be &lt;port&gt; though. For EAP 6 the default is 9999. For EAP 7 the default is 9990. The wildfly-maven-plugin uses 9990 by default."}],"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697117723,"creation_date":1697114107,"question_id":77280628,"body_markdown":"I am using `jboss-as-maven-plugin` into the `pom.xml`. I can find online some documentation, but not about the configuration...\r\n\r\nFor example, I have this:\r\n\r\n```java\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.jboss.as.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jboss-as-maven-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;7.8.Final&lt;/version&gt;\r\n    &lt;configuration&gt;\r\n        &lt;!--\r\n             In produzione c&#39;e&#39; JBoss EAP 6.3 =&gt; JBoss AS 7.4.0.Final\r\n             ma tale release non e&#39; disponibile nei repo Maven\r\n             quindi usiamo la versione piu&#39; simile disponibile\r\n          --&gt;\r\n        &lt;version&gt;7.4.0.Final-redhat-4&lt;/version&gt;\r\n        &lt;jvmArgs&gt;-Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true\r\n            -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000\r\n            -Dsun.rmi.dgc.server.gcInterval=3600000\r\n            -Djboss.socket.binding.port-offset=100\r\n            -Djboss.server.config.dir=${project.build.testOutputDirectory}/configuration\r\n            ${jacocoAgent}\r\n        &lt;!--    &amp;lt;!&amp;ndash;per eseguire il debug remoto rimuovere il commento dalla riga sottostante--&gt;\r\n        &lt;!--    -Xrunjdwp:transport=dt_socket,address=33333,server=y,suspend=y--&gt;\r\n        &lt;/jvmArgs&gt;\r\n        &lt;port&gt;10099&lt;/port&gt;\r\n    &lt;/configuration&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;start&lt;/id&gt;\r\n            &lt;phase&gt;pre-integration-test&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;start&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n                &lt;startup-timeout&gt;120&lt;/startup-timeout&gt;\r\n            &lt;/configuration&gt;\r\n        &lt;/execution&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;avoid-console-logging&lt;/id&gt;\r\n            &lt;phase&gt;pre-integration-test&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;execute-commands&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n                &lt;execute-commands&gt;\r\n                    &lt;commands&gt;\r\n                        &lt;command&gt;/subsystem=logging/root-logger=ROOT:root-logger-unassign-handler(name=&quot;CONSOLE&quot;)&lt;/command&gt;\r\n                    &lt;/commands&gt;\r\n                &lt;/execute-commands&gt;\r\n            &lt;/configuration&gt;\r\n        &lt;/execution&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;deploy&lt;/id&gt;\r\n            &lt;phase&gt;pre-integration-test&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;deploy&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;stop&lt;/id&gt;\r\n            &lt;phase&gt;post-integration-test&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;undeploy&lt;/goal&gt;&lt;!-- Per eseguire &quot;mvn verify&quot; e non solo &quot;mvn clean verify&quot; --&gt;\r\n                &lt;goal&gt;shutdown&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nWhere I can find the meaning and purpose of all tags, and of all the tags of the plugin I haven&#39;t used in this example?","title":"jboss-as-maven-plugin pom configuration","body":"<p>I am using <code>jboss-as-maven-plugin</code> into the <code>pom.xml</code>. I can find online some documentation, but not about the configuration...</p>\n<p>For example, I have this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.jboss.as.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;jboss-as-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;7.8.Final&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;!--\n             In produzione c'e' JBoss EAP 6.3 =&gt; JBoss AS 7.4.0.Final\n             ma tale release non e' disponibile nei repo Maven\n             quindi usiamo la versione piu' simile disponibile\n          --&gt;\n        &lt;version&gt;7.4.0.Final-redhat-4&lt;/version&gt;\n        &lt;jvmArgs&gt;-Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true\n            -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000\n            -Dsun.rmi.dgc.server.gcInterval=3600000\n            -Djboss.socket.binding.port-offset=100\n            -Djboss.server.config.dir=${project.build.testOutputDirectory}/configuration\n            ${jacocoAgent}\n        &lt;!--    &amp;lt;!&amp;ndash;per eseguire il debug remoto rimuovere il commento dalla riga sottostante--&gt;\n        &lt;!--    -Xrunjdwp:transport=dt_socket,address=33333,server=y,suspend=y--&gt;\n        &lt;/jvmArgs&gt;\n        &lt;port&gt;10099&lt;/port&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;start&lt;/id&gt;\n            &lt;phase&gt;pre-integration-test&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;start&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;startup-timeout&gt;120&lt;/startup-timeout&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n        &lt;execution&gt;\n            &lt;id&gt;avoid-console-logging&lt;/id&gt;\n            &lt;phase&gt;pre-integration-test&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;execute-commands&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;execute-commands&gt;\n                    &lt;commands&gt;\n                        &lt;command&gt;/subsystem=logging/root-logger=ROOT:root-logger-unassign-handler(name=&quot;CONSOLE&quot;)&lt;/command&gt;\n                    &lt;/commands&gt;\n                &lt;/execute-commands&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n        &lt;execution&gt;\n            &lt;id&gt;deploy&lt;/id&gt;\n            &lt;phase&gt;pre-integration-test&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;deploy&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n        &lt;execution&gt;\n            &lt;id&gt;stop&lt;/id&gt;\n            &lt;phase&gt;post-integration-test&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;undeploy&lt;/goal&gt;&lt;!-- Per eseguire &quot;mvn verify&quot; e non solo &quot;mvn clean verify&quot; --&gt;\n                &lt;goal&gt;shutdown&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Where I can find the meaning and purpose of all tags, and of all the tags of the plugin I haven't used in this example?</p>\n"},{"tags":["java","spring","postgresql","migration","flyway"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1697116887,"post_id":77280812,"comment_id":136241254,"body_markdown":"Does this answer your question? [A placeholder for &quot;the entity&quot; in Spring Data JPA custom queries](https://stackoverflow.com/questions/59359694/a-placeholder-for-the-entity-in-spring-data-jpa-custom-queries)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/59359694/a-placeholder-for-the-entity-in-spring-data-jpa-custom-queries\">A placeholder for &quot;the entity&quot; in Spring Data JPA custom queries</a>"},{"owner":{"account_id":15689318,"reputation":21,"user_id":11320951,"display_name":"maria_so"},"score":0,"creation_date":1697117376,"post_id":77280812,"comment_id":136241379,"body_markdown":"Unfortunately, no. I have access only on sql and properties/yaml files.","body":"Unfortunately, no. I have access only on sql and properties/yaml files."}],"answers":[{"comments":[{"owner":{"account_id":15689318,"reputation":21,"user_id":11320951,"display_name":"maria_so"},"score":0,"creation_date":1697117692,"post_id":77281051,"comment_id":136241457,"body_markdown":"Since I have access only on sql and properties/yaml files, I would have wanted to solve it this way but I will take into consideration your approach using Java. Thank you.","body":"Since I have access only on sql and properties/yaml files, I would have wanted to solve it this way but I will take into consideration your approach using Java. Thank you."}],"tags":[],"owner":{"account_id":4868030,"reputation":1930,"user_id":3925552,"accept_rate":40,"display_name":"HassanUsman"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697117407,"creation_date":1697117407,"answer_id":77281051,"question_id":77280812,"body_markdown":"First define your `placeholders` in your `application.properties` file like\r\n\r\n    spring.flyway.placeholders.first=FirstValue\r\n    spring.flyway.placeholders.second=SecondValue\r\n    spring.flyway.placeholders.third=ThirdValue\r\n\r\nAnd in your `SQL migration script`, you can use these placeholders as follows:\r\n\r\n    INSERT INTO your_table (column_name) VALUES (&#39;${first}&#39;);\r\n    INSERT INTO your_table (column_name) VALUES (&#39;${second}&#39;);\r\n    INSERT INTO your_table (column_name) VALUES (&#39;${third}&#39;);\r\n\r\nHowever, if you want to loop through a `dynamic list` and `insert values` into the database based on that list, it&#39;s generally not possible in a `Flyway migration script` using placeholders, as SQL scripts are typically static. \r\n\r\nInstead, you would typically use a programming language `(like Java or a scripting language)` to loop through the list and execute the necessary SQL statements.","title":"Loop through a list of spring flyway placeholders","body":"<p>First define your <code>placeholders</code> in your <code>application.properties</code> file like</p>\n<pre><code>spring.flyway.placeholders.first=FirstValue\nspring.flyway.placeholders.second=SecondValue\nspring.flyway.placeholders.third=ThirdValue\n</code></pre>\n<p>And in your <code>SQL migration script</code>, you can use these placeholders as follows:</p>\n<pre><code>INSERT INTO your_table (column_name) VALUES ('${first}');\nINSERT INTO your_table (column_name) VALUES ('${second}');\nINSERT INTO your_table (column_name) VALUES ('${third}');\n</code></pre>\n<p>However, if you want to loop through a <code>dynamic list</code> and <code>insert values</code> into the database based on that list, it's generally not possible in a <code>Flyway migration script</code> using placeholders, as SQL scripts are typically static.</p>\n<p>Instead, you would typically use a programming language <code>(like Java or a scripting language)</code> to loop through the list and execute the necessary SQL statements.</p>\n"}],"owner":{"account_id":15689318,"reputation":21,"user_id":11320951,"display_name":"maria_so"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697117407,"creation_date":1697115531,"question_id":77280812,"body_markdown":"I have a list of strings and I want to loop through it and insert in the database based on those values.\r\n\r\nIs it possible to have a list of values for spring.flyway.placeholders in order to loop through it in a sql script? \r\n\r\nfor ex:\r\n```\r\nspring.flyway.placeholders.values=[first, second, third]\r\n```","title":"Loop through a list of spring flyway placeholders","body":"<p>I have a list of strings and I want to loop through it and insert in the database based on those values.</p>\n<p>Is it possible to have a list of values for spring.flyway.placeholders in order to loop through it in a sql script?</p>\n<p>for ex:</p>\n<pre><code>spring.flyway.placeholders.values=[first, second, third]\n</code></pre>\n"},{"tags":["java","json","jakarta-ee","java-ee-7"],"comments":[{"owner":{"account_id":7896148,"reputation":820,"user_id":5964741,"display_name":"Ebuzer Taha KANAT"},"score":0,"creation_date":1697114379,"post_id":77280424,"comment_id":136240656,"body_markdown":"@BalusC its good to see a legend commenting on my question but same exception thrown even when i did your suggestion.","body":"@BalusC its good to see a legend commenting on my question but same exception thrown even when i did your suggestion."},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":1,"creation_date":1697114996,"post_id":77280424,"comment_id":136240799,"body_markdown":"Right. That method was introduced in JSONP 1.1. You&#39;ll need a JSONP 1.1 compatible implementation.","body":"Right. That method was introduced in JSONP 1.1. You&#39;ll need a JSONP 1.1 compatible implementation."},{"owner":{"account_id":7896148,"reputation":820,"user_id":5964741,"display_name":"Ebuzer Taha KANAT"},"score":0,"creation_date":1697116183,"post_id":77280424,"comment_id":136241093,"body_markdown":"@BalusC here is the relevant part of pom \n\t\t&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;javax.json&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;javax.json-api&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;1.1&lt;/version&gt;\n\t\t&lt;/dependency&gt;\n\t\t&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;javax.json.bind&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;javax.json.bind-api&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;1.0&lt;/version&gt;\n\t\t&lt;/dependency&gt;\n\t\t&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;org.eclipse&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;yasson&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;2.0.1&lt;/version&gt;\n\t\t&lt;/dependency&gt;\n\t\t&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;org.glassfish&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;javax.json&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;1.1.2&lt;/version&gt;\n\t\t&lt;/dependency&gt;","body":"@BalusC here is the relevant part of pom  \t\t&lt;dependency&gt; \t\t\t&lt;groupId&gt;javax.json&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;javax.json-api&lt;/artifactId&gt; \t\t\t&lt;version&gt;1.1&lt;/version&gt; \t\t&lt;/dependency&gt; \t\t&lt;dependency&gt; \t\t\t&lt;groupId&gt;javax.json.bind&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;javax.json.bind-api&lt;/artifactId&gt; \t\t\t&lt;version&gt;1.0&lt;/version&gt; \t\t&lt;/dependency&gt; \t\t&lt;dependency&gt; \t\t\t&lt;groupId&gt;org.eclipse&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;yasson&lt;/artifactId&gt; \t\t\t&lt;version&gt;2.0.1&lt;/version&gt; \t\t&lt;/dependency&gt; \t\t&lt;dependency&gt; \t\t\t&lt;groupId&gt;org.glassfish&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;javax.json&lt;/artifactId&gt; \t\t\t&lt;version&gt;1.1.2&lt;/version&gt; \t\t&lt;/dependency&gt;"},{"owner":{"account_id":7896148,"reputation":820,"user_id":5964741,"display_name":"Ebuzer Taha KANAT"},"score":0,"creation_date":1697116248,"post_id":77280424,"comment_id":136241105,"body_markdown":"and here is the new exception should i open a new question \n\n16:02:32,312 WARN  [io.smallrye.graphql.execution.ExecutionService] (default task-1) Could not close Jsonb object\n16:02:32,312 ERROR [io.undertow.request] (default task-1) UT005023: Exception handling request to /deneme2-web/graphql/graphql: java.lang.NullPointerException: Value in JsonObjects name/value pair cannot be null\n\tat org.glassfish.json.JsonObjectBuilderImpl.validateValue(JsonObjectBuilderImpl.java:164)\n\tat org.glassfish.json.JsonObjectBuilderImpl.add(JsonObjectBuilderImpl.java:67)\n\t...","body":"and here is the new exception should i open a new question   16:02:32,312 WARN  [io.smallrye.graphql.execution.ExecutionService] (default task-1) Could not close Jsonb object 16:02:32,312 ERROR [io.undertow.request] (default task-1) UT005023: Exception handling request to /deneme2-web/graphql/graphql: java.lang.NullPointerException: Value in JsonObjects name/value pair cannot be null \tat org.glassfish.json.JsonObjectBuilderImpl.validateValue(JsonO&zwnj;&#8203;bjectBuilderImpl.jav&zwnj;&#8203;a:164) \tat org.glassfish.json.JsonObjectBuilderImpl.add(JsonObjectBuild&zwnj;&#8203;erImpl.java:67) \t..."}],"owner":{"account_id":7896148,"reputation":820,"user_id":5964741,"display_name":"Ebuzer Taha KANAT"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1697116807,"creation_date":1697112322,"question_id":77280424,"body_markdown":"I&#39;m trying to deploy a simple graphql service to java ee 7 server to prove it can be done.\r\nI managed the work for jakarta ee 10 version but java ee 7 one deploys and run but when i test the web service with\r\n\r\n      curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;query&quot;: &quot;query { hello }&quot;}&#39; http://localhost:8080/deneme2-web/graphql/graphql\r\n\r\nIt spits this stacktrace at runtime \r\n\r\n    14:50:54,878 SEVERE [org.eclipse.yasson.internal.Marshaller] (default task-2) Generating incomplete JSON\r\n    14:50:54,881 ERROR [io.undertow.request] (default task-2) UT005023: Exception handling request to /deneme2-web/graphql/graphql: java.lang.NoSuchMethodError: javax.json.stream.JsonGenerator.writeKey(Ljava/lang/String;)Ljavax/json/stream/JsonGenerator;\r\n    \tat org.eclipse.yasson.internal.serializer.MapSerializer.serializeInternal(MapSerializer.java:56)\r\n    \tat org.eclipse.yasson.internal.serializer.MapSerializer.serializeInternal(MapSerializer.java:32)\r\n    \tat org.eclipse.yasson.internal.serializer.AbstractContainerSerializer.serialize(AbstractContainerSerializer.java:64)\r\n    \tat org.eclipse.yasson.internal.Marshaller.serializeRoot(Marshaller.java:119)\r\n    \tat org.eclipse.yasson.internal.Marshaller.marshall(Marshaller.java:75)\r\n    \tat org.eclipse.yasson.internal.JsonBinding.toJson(JsonBinding.java:98)\r\n    \tat io.smallrye.graphql.execution.ExecutionService.toJsonValue(ExecutionService.java:119)\r\n    \tat io.smallrye.graphql.execution.ExecutionService.addDataToResponse(ExecutionService.java:92)\r\n    \tat io.smallrye.graphql.execution.ExecutionService.addDataToResponse(ExecutionService.java:87)\r\n    \tat io.smallrye.graphql.execution.ExecutionService.execute(ExecutionService.java:75)\r\n    \tat io.smallrye.graphql.servlet.ExecutionServlet.handleInput(ExecutionServlet.java:79)\r\n    \tat io.smallrye.graphql.servlet.ExecutionServlet.doPost(ExecutionServlet.java:64)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:707)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\r\n    \tat io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\r\n    \tat io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\r\n    \tat io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\r\n    \tat io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\r\n    \tat org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132)\r\n    \tat io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\r\n    \tat io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\r\n    \tat io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\r\n    \tat io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\r\n    \tat io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\r\n    \tat io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:292)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:81)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:138)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:135)\r\n    \tat io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\r\n    \tat io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n    \tat org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:272)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:81)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:104)\r\n    \tat io.undertow.server.Connectors.executeRootHandler(Connectors.java:360)\r\n    \tat io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830)\r\n    \tat org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n    \tat org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)\r\n    \tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)\r\n    \tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)\r\n    \tat java.lang.Thread.run(Thread.java:750)\r\n\r\nAlso here is my pom file:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;parent&gt;\r\n    \t\t&lt;artifactId&gt;deneme2&lt;/artifactId&gt;\r\n    \t\t&lt;groupId&gt;deneme2&lt;/groupId&gt;\r\n    \t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;artifactId&gt;deneme2-web&lt;/artifactId&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \r\n    \t&lt;name&gt;deneme2: WAR Module&lt;/name&gt;\r\n    \r\n    \t&lt;url&gt;http://wildfly.org&lt;/url&gt;\r\n    \t&lt;licenses&gt;\r\n    \t\t&lt;license&gt;\r\n    \t\t\t&lt;name&gt;Apache License, Version 2.0&lt;/name&gt;\r\n    \t\t\t&lt;distribution&gt;repo&lt;/distribution&gt;\r\n    \t\t\t&lt;url&gt;http://www.apache.org/licenses/LICENSE-2.0.html&lt;/url&gt;\r\n    \t\t&lt;/license&gt;\r\n    \t&lt;/licenses&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \r\n    \t\t&lt;!-- Dependency on the EJB module so we can use it&#39;s services if needed --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;deneme2&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;deneme2-ejb&lt;/artifactId&gt;\r\n    \t\t\t&lt;type&gt;ejb&lt;/type&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;7.0&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.json.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.json.bind-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.eclipse&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;yasson&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.0.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.glassfish&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.json&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.1.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.eclipse.microprofile.graphql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;microprofile-graphql-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.1.0&lt;/version&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;parent&gt;\r\n    \t\t&lt;artifactId&gt;deneme2&lt;/artifactId&gt;\r\n    \t\t&lt;groupId&gt;deneme2&lt;/groupId&gt;\r\n    \t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;artifactId&gt;deneme2-web&lt;/artifactId&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \r\n    \t&lt;name&gt;deneme2: WAR Module&lt;/name&gt;\r\n    \r\n    \t&lt;url&gt;http://wildfly.org&lt;/url&gt;\r\n    \t&lt;licenses&gt;\r\n    \t\t&lt;license&gt;\r\n    \t\t\t&lt;name&gt;Apache License, Version 2.0&lt;/name&gt;\r\n    \t\t\t&lt;distribution&gt;repo&lt;/distribution&gt;\r\n    \t\t\t&lt;url&gt;http://www.apache.org/licenses/LICENSE-2.0.html&lt;/url&gt;\r\n    \t\t&lt;/license&gt;\r\n    \t&lt;/licenses&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \r\n    \t\t&lt;!-- Dependency on the EJB module so we can use it&#39;s services if needed --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;deneme2&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;deneme2-ejb&lt;/artifactId&gt;\r\n    \t\t\t&lt;type&gt;ejb&lt;/type&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;7.0&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.json.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.json.bind-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.eclipse&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;yasson&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.0.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.glassfish&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.json&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.1.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.eclipse.microprofile.graphql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;microprofile-graphql-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.1.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!--\r\n    \t\thttps://mvnrepository.com/artifact/org.eclipse.microprofile.config/microprofile-config-api --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.eclipse.microprofile.config&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;microprofile-config-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/io.smallrye/smallrye-config --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.smallrye&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;smallrye-config&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.4.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/io.smallrye/smallrye-graphql-api --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.smallrye&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;smallrye-graphql-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.0.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!--\r\n    \t\thttps://mvnrepository.com/artifact/io.smallrye/smallrye-graphql-servlet --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.smallrye&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;smallrye-graphql-servlet&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.0.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.smallrye&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;smallrye-graphql&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.0.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${version.war.plugin}&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;!-- Java EE 7 doesn&#39;t require web.xml, Maven needs to catch\r\n    \t\t\t\t\tup! --&gt;\r\n    \t\t\t\t\t&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!--\r\n    \t\thttps://mvnrepository.com/artifact/org.eclipse.microprofile.config/microprofile-config-api --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.eclipse.microprofile.config&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;microprofile-config-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/io.smallrye/smallrye-config --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.smallrye&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;smallrye-config&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.4.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/io.smallrye/smallrye-graphql-api --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.smallrye&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;smallrye-graphql-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.0.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!--\r\n    \t\thttps://mvnrepository.com/artifact/io.smallrye/smallrye-graphql-servlet --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.smallrye&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;smallrye-graphql-servlet&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.0.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.smallrye&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;smallrye-graphql&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.0.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${version.war.plugin}&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;!-- Java EE 7 doesn&#39;t require web.xml, Maven needs to catch\r\n    \t\t\t\t\tup! --&gt;\r\n    \t\t\t\t\t&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\nHere is reproducer for brave souls: https://github.com/urbandroid/graphql-jakarta/tree/javaee7","title":"java.lang.NoSuchMethodError: javax.json.stream.JsonGenerator.writeKey(Ljava/lang/String;)Ljavax/json/stream/JsonGenerator;","body":"<p>I'm trying to deploy a simple graphql service to java ee 7 server to prove it can be done.\nI managed the work for jakarta ee 10 version but java ee 7 one deploys and run but when i test the web service with</p>\n<pre><code>  curl -X POST -H &quot;Content-Type: application/json&quot; -d '{&quot;query&quot;: &quot;query { hello }&quot;}' http://localhost:8080/deneme2-web/graphql/graphql\n</code></pre>\n<p>It spits this stacktrace at runtime</p>\n<pre><code>14:50:54,878 SEVERE [org.eclipse.yasson.internal.Marshaller] (default task-2) Generating incomplete JSON\n14:50:54,881 ERROR [io.undertow.request] (default task-2) UT005023: Exception handling request to /deneme2-web/graphql/graphql: java.lang.NoSuchMethodError: javax.json.stream.JsonGenerator.writeKey(Ljava/lang/String;)Ljavax/json/stream/JsonGenerator;\n    at org.eclipse.yasson.internal.serializer.MapSerializer.serializeInternal(MapSerializer.java:56)\n    at org.eclipse.yasson.internal.serializer.MapSerializer.serializeInternal(MapSerializer.java:32)\n    at org.eclipse.yasson.internal.serializer.AbstractContainerSerializer.serialize(AbstractContainerSerializer.java:64)\n    at org.eclipse.yasson.internal.Marshaller.serializeRoot(Marshaller.java:119)\n    at org.eclipse.yasson.internal.Marshaller.marshall(Marshaller.java:75)\n    at org.eclipse.yasson.internal.JsonBinding.toJson(JsonBinding.java:98)\n    at io.smallrye.graphql.execution.ExecutionService.toJsonValue(ExecutionService.java:119)\n    at io.smallrye.graphql.execution.ExecutionService.addDataToResponse(ExecutionService.java:92)\n    at io.smallrye.graphql.execution.ExecutionService.addDataToResponse(ExecutionService.java:87)\n    at io.smallrye.graphql.execution.ExecutionService.execute(ExecutionService.java:75)\n    at io.smallrye.graphql.servlet.ExecutionServlet.handleInput(ExecutionServlet.java:79)\n    at io.smallrye.graphql.servlet.ExecutionServlet.doPost(ExecutionServlet.java:64)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n    at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\n    at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\n    at io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\n    at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\n    at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132)\n    at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\n    at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\n    at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\n    at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\n    at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\n    at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:292)\n    at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:81)\n    at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:138)\n    at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:135)\n    at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\n    at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n    at org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1514)\n    at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:272)\n    at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:81)\n    at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:104)\n    at io.undertow.server.Connectors.executeRootHandler(Connectors.java:360)\n    at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830)\n    at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)\n    at java.lang.Thread.run(Thread.java:750)\n</code></pre>\n<p>Also here is my pom file:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;parent&gt;\n        &lt;artifactId&gt;deneme2&lt;/artifactId&gt;\n        &lt;groupId&gt;deneme2&lt;/groupId&gt;\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;artifactId&gt;deneme2-web&lt;/artifactId&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;name&gt;deneme2: WAR Module&lt;/name&gt;\n\n    &lt;url&gt;http://wildfly.org&lt;/url&gt;\n    &lt;licenses&gt;\n        &lt;license&gt;\n            &lt;name&gt;Apache License, Version 2.0&lt;/name&gt;\n            &lt;distribution&gt;repo&lt;/distribution&gt;\n            &lt;url&gt;http://www.apache.org/licenses/LICENSE-2.0.html&lt;/url&gt;\n        &lt;/license&gt;\n    &lt;/licenses&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;!-- Dependency on the EJB module so we can use it's services if needed --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;deneme2&lt;/groupId&gt;\n            &lt;artifactId&gt;deneme2-ejb&lt;/artifactId&gt;\n            &lt;type&gt;ejb&lt;/type&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax&lt;/groupId&gt;\n            &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\n            &lt;version&gt;7.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.json.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.json.bind-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse&lt;/groupId&gt;\n            &lt;artifactId&gt;yasson&lt;/artifactId&gt;\n            &lt;version&gt;1.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.json&lt;/artifactId&gt;\n            &lt;version&gt;1.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.microprofile.graphql&lt;/groupId&gt;\n            &lt;artifactId&gt;microprofile-graphql-api&lt;/artifactId&gt;\n            &lt;version&gt;1.1.0&lt;/version&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;parent&gt;\n        &lt;artifactId&gt;deneme2&lt;/artifactId&gt;\n        &lt;groupId&gt;deneme2&lt;/groupId&gt;\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;artifactId&gt;deneme2-web&lt;/artifactId&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;name&gt;deneme2: WAR Module&lt;/name&gt;\n\n    &lt;url&gt;http://wildfly.org&lt;/url&gt;\n    &lt;licenses&gt;\n        &lt;license&gt;\n            &lt;name&gt;Apache License, Version 2.0&lt;/name&gt;\n            &lt;distribution&gt;repo&lt;/distribution&gt;\n            &lt;url&gt;http://www.apache.org/licenses/LICENSE-2.0.html&lt;/url&gt;\n        &lt;/license&gt;\n    &lt;/licenses&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;!-- Dependency on the EJB module so we can use it's services if needed --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;deneme2&lt;/groupId&gt;\n            &lt;artifactId&gt;deneme2-ejb&lt;/artifactId&gt;\n            &lt;type&gt;ejb&lt;/type&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax&lt;/groupId&gt;\n            &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\n            &lt;version&gt;7.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.json.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.json.bind-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse&lt;/groupId&gt;\n            &lt;artifactId&gt;yasson&lt;/artifactId&gt;\n            &lt;version&gt;1.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.json&lt;/artifactId&gt;\n            &lt;version&gt;1.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.microprofile.graphql&lt;/groupId&gt;\n            &lt;artifactId&gt;microprofile-graphql-api&lt;/artifactId&gt;\n            &lt;version&gt;1.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!--\n        https://mvnrepository.com/artifact/org.eclipse.microprofile.config/microprofile-config-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.microprofile.config&lt;/groupId&gt;\n            &lt;artifactId&gt;microprofile-config-api&lt;/artifactId&gt;\n            &lt;version&gt;1.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/io.smallrye/smallrye-config --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.smallrye&lt;/groupId&gt;\n            &lt;artifactId&gt;smallrye-config&lt;/artifactId&gt;\n            &lt;version&gt;1.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;!-- https://mvnrepository.com/artifact/io.smallrye/smallrye-graphql-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.smallrye&lt;/groupId&gt;\n            &lt;artifactId&gt;smallrye-graphql-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--\n        https://mvnrepository.com/artifact/io.smallrye/smallrye-graphql-servlet --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.smallrye&lt;/groupId&gt;\n            &lt;artifactId&gt;smallrye-graphql-servlet&lt;/artifactId&gt;\n            &lt;version&gt;1.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.smallrye&lt;/groupId&gt;\n            &lt;artifactId&gt;smallrye-graphql&lt;/artifactId&gt;\n            &lt;version&gt;1.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${version.war.plugin}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;!-- Java EE 7 doesn't require web.xml, Maven needs to catch\n                    up! --&gt;\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n        &lt;/dependency&gt;\n\n        &lt;!--\n        https://mvnrepository.com/artifact/org.eclipse.microprofile.config/microprofile-config-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.microprofile.config&lt;/groupId&gt;\n            &lt;artifactId&gt;microprofile-config-api&lt;/artifactId&gt;\n            &lt;version&gt;1.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/io.smallrye/smallrye-config --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.smallrye&lt;/groupId&gt;\n            &lt;artifactId&gt;smallrye-config&lt;/artifactId&gt;\n            &lt;version&gt;1.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;!-- https://mvnrepository.com/artifact/io.smallrye/smallrye-graphql-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.smallrye&lt;/groupId&gt;\n            &lt;artifactId&gt;smallrye-graphql-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--\n        https://mvnrepository.com/artifact/io.smallrye/smallrye-graphql-servlet --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.smallrye&lt;/groupId&gt;\n            &lt;artifactId&gt;smallrye-graphql-servlet&lt;/artifactId&gt;\n            &lt;version&gt;1.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.smallrye&lt;/groupId&gt;\n            &lt;artifactId&gt;smallrye-graphql&lt;/artifactId&gt;\n            &lt;version&gt;1.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${version.war.plugin}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;!-- Java EE 7 doesn't require web.xml, Maven needs to catch\n                    up! --&gt;\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Here is reproducer for brave souls: <a href=\"https://github.com/urbandroid/graphql-jakarta/tree/javaee7\" rel=\"nofollow noreferrer\">https://github.com/urbandroid/graphql-jakarta/tree/javaee7</a></p>\n"},{"tags":["java","ssl","ssl-certificate","tls1.2","truststore"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697107761,"post_id":77279191,"comment_id":136239393,"body_markdown":"Surely you can just redeploy the truststore?","body":"Surely you can just redeploy the truststore?"},{"owner":{"account_id":23996629,"reputation":47,"user_id":17982071,"display_name":"HK15"},"score":0,"creation_date":1697112839,"post_id":77279191,"comment_id":136240338,"body_markdown":"@user207421he truststore is embedded into the Docker image when the application is built from the pipeline","body":"@user207421he truststore is embedded into the Docker image when the application is built from the pipeline"}],"owner":{"account_id":23996629,"reputation":47,"user_id":17982071,"display_name":"HK15"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697116096,"creation_date":1697101456,"question_id":77279191,"body_markdown":"I have a Spring Boot application who connects to several remote resources like: AWS DocumentDB, Salesforce, Outlook.com etc.\r\n\r\nTo interact with these remote services through TLS I had to install their certificates in a custom trust store (JKS) loaded by the Java application at startup.\r\n\r\nMy question is: what happen when one (or more) of these certificates expire? The application stops to connect with the specific service or continues to run logging a warning?\r\n\r\nThe JKS file is loaded into the application with:\r\n\r\n    -Djavax.net.ssl.trustStore=path_to_truststore.jks\r\n\r\nin a Docker container deployed into a AWS ECS cluster.\r\n\r\nI read some online articles and posts on Stackoverflow but I&#39;m still confused.\r\n\r\nHere: https://softwareengineering.stackexchange.com/a/308538\r\nseems that the application still works even if the certificate is expired.\r\n\r\n&gt; Keep in mind, this certificate may not even be technically valid or it\r\n&gt; can EVEN be self signed and not validated by a Root CA, but if it\r\n&gt; exists on the specified Truststore that has been loaded into the Java\r\n&gt; application then it will still trust it.\r\n&gt; \r\n&gt; What you didn&#39;t describe is if this certificate is for a network\r\n&gt; resource that you are providing as a server or a network resource that\r\n&gt; you require as a client. I**f the latter then you might get a warning\r\n&gt; about the certificate being expired, but it will still work because it\r\n&gt; is in your trust store.**\r\n\r\nBut here: https://stackoverflow.com/a/22324010/17982071\r\n\r\nI read a different thing.\r\n\r\n&gt; If a certificate in the trust store expires, and is not replaces with\r\n&gt; an updated version with the same subject and key, it will be discarded\r\n&gt; for the purpose of building the certification path, so you&#39;ll get an\r\n&gt; javax.net.ssl.SSLHandshakeException (coming from &quot;PKIX path building\r\n&gt; failed...&quot;).\r\n\r\nThanks.","title":"How the Java trust manager handles expired TLS certificates","body":"<p>I have a Spring Boot application who connects to several remote resources like: AWS DocumentDB, Salesforce, Outlook.com etc.</p>\n<p>To interact with these remote services through TLS I had to install their certificates in a custom trust store (JKS) loaded by the Java application at startup.</p>\n<p>My question is: what happen when one (or more) of these certificates expire? The application stops to connect with the specific service or continues to run logging a warning?</p>\n<p>The JKS file is loaded into the application with:</p>\n<pre><code>-Djavax.net.ssl.trustStore=path_to_truststore.jks\n</code></pre>\n<p>in a Docker container deployed into a AWS ECS cluster.</p>\n<p>I read some online articles and posts on Stackoverflow but I'm still confused.</p>\n<p>Here: <a href=\"https://softwareengineering.stackexchange.com/a/308538\">https://softwareengineering.stackexchange.com/a/308538</a>\nseems that the application still works even if the certificate is expired.</p>\n<blockquote>\n<p>Keep in mind, this certificate may not even be technically valid or it\ncan EVEN be self signed and not validated by a Root CA, but if it\nexists on the specified Truststore that has been loaded into the Java\napplication then it will still trust it.</p>\n<p>What you didn't describe is if this certificate is for a network\nresource that you are providing as a server or a network resource that\nyou require as a client. I<strong>f the latter then you might get a warning\nabout the certificate being expired, but it will still work because it\nis in your trust store.</strong></p>\n</blockquote>\n<p>But here: <a href=\"https://stackoverflow.com/a/22324010/17982071\">https://stackoverflow.com/a/22324010/17982071</a></p>\n<p>I read a different thing.</p>\n<blockquote>\n<p>If a certificate in the trust store expires, and is not replaces with\nan updated version with the same subject and key, it will be discarded\nfor the purpose of building the certification path, so you'll get an\njavax.net.ssl.SSLHandshakeException (coming from &quot;PKIX path building\nfailed...&quot;).</p>\n</blockquote>\n<p>Thanks.</p>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1697115301,"post_id":77280677,"comment_id":136240864,"body_markdown":"Why are you using `@Spy` on the tested service? Don&#39;t do that.","body":"Why are you using <code>@Spy</code> on the tested service? Don&#39;t do that."},{"owner":{"account_id":29363187,"reputation":5,"user_id":22497476,"display_name":"Tommy"},"score":0,"creation_date":1697116204,"post_id":77280677,"comment_id":136241099,"body_markdown":"sure, thanks for advice, I will read more about that","body":"sure, thanks for advice, I will read more about that"}],"answers":[{"comments":[{"owner":{"account_id":29363187,"reputation":5,"user_id":22497476,"display_name":"Tommy"},"score":0,"creation_date":1697116162,"post_id":77280742,"comment_id":136241089,"body_markdown":"omg, I missclicked and import was org.hunit.Test, I have changed annotation to @org.junit.jupiter.api.Test and it works, tysm!!!!!","body":"omg, I missclicked and import was org.hunit.Test, I have changed annotation to @org.junit.jupiter.api.Test and it works, tysm!!!!!"}],"tags":[],"owner":{"account_id":29656477,"reputation":26,"user_id":22729138,"display_name":"Grigland ___"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697115626,"creation_date":1697115054,"answer_id":77280742,"question_id":77280677,"body_markdown":"try \r\n```\r\nwhen(taskRepository.finById(anyInt()).thenReturn(Optional.of(task))\r\n```\r\non the test method with annotation @org.junit.jupiter.api.Test\r\n\r\nto improve your test method, thy this template\r\n```\r\n@Test\r\nvoid testGetTaskById() {\r\n        // given\r\n        var anyId = 8\r\n        var expected = new Task();\r\n        expected.setId(4);\r\n        expected.setStatus(StatusEnum.IN_PROGRESS);\r\n        expected.setDescription(&quot;amazing task&quot;);\r\n\r\n        // when\r\n        when(taskRepository.finById(anyInt())).thenReturn(Optional.of(expected));\r\n\r\n        // then\r\n        Task actual = taskService.findById(8);\r\n        org.assertj.core.api.Assertions.assertThat(actual)\r\n                .usingRecursiveComparison()\r\n                .isEqualTo(expected);\r\n}\r\n```","title":"Mockito returns Optional.empty instead of object for tests","body":"<p>try</p>\n<pre><code>when(taskRepository.finById(anyInt()).thenReturn(Optional.of(task))\n</code></pre>\n<p>on the test method with annotation @org.junit.jupiter.api.Test</p>\n<p>to improve your test method, thy this template</p>\n<pre><code>@Test\nvoid testGetTaskById() {\n        // given\n        var anyId = 8\n        var expected = new Task();\n        expected.setId(4);\n        expected.setStatus(StatusEnum.IN_PROGRESS);\n        expected.setDescription(&quot;amazing task&quot;);\n\n        // when\n        when(taskRepository.finById(anyInt())).thenReturn(Optional.of(expected));\n\n        // then\n        Task actual = taskService.findById(8);\n        org.assertj.core.api.Assertions.assertThat(actual)\n                .usingRecursiveComparison()\n                .isEqualTo(expected);\n}\n</code></pre>\n"}],"owner":{"account_id":29363187,"reputation":5,"user_id":22497476,"display_name":"Tommy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77280742,"answer_count":1,"score":0,"last_activity_date":1697115626,"creation_date":1697114517,"question_id":77280677,"body_markdown":"Java 18, spring boot starter parent 3.0.4, junit 4.13.2\r\n\r\nDebug shows me, that everywhere is the same mock for repository. &quot;Evaluate expression&quot; on `taskRepository.findById(id)` at service method shows that object is null instead of my created `task` object at `init()`.\r\n\r\n**Code:**\r\n\r\n**TaskRepository extends JpaRepository**\r\n\r\n\r\n**My service method:**\r\n```\r\n@Transactional\r\n    public Task getTaskById(Integer id){\r\n        Optional&lt;Task&gt; taskById = taskRepository.findById(id);\r\n        if(taskById.isPresent()){\r\n            return taskById.get();\r\n        }\r\n\r\n        throw new RuntimeException(&quot;Task not found with id : &quot; + id);\r\n    }\r\n```\r\n\r\n**My test class:**\r\n\r\n```\r\n@TestInstance(TestInstance.Lifecycle.PER_CLASS)\r\n@RunWith(MockitoJUnitRunner.class)\r\npublic class TaskServiceTestWithoutSpring {\r\n\r\n    @Mock\r\n    public TaskRepository taskRepository;\r\n\r\n    @Spy\r\n    @InjectMocks\r\n    public TaskService taskService;\r\n\r\n    @BeforeEach\r\n    public void init(){\r\n        MockitoAnnotations.openMocks(this);\r\n        Task task = new Task();\r\n        task.setId(4);\r\n        task.setStatus(StatusEnum.IN_PROGRESS);\r\n        task.setDescription(&quot;amazing task&quot;);\r\n\r\n        doReturn(Optional.of(task)).when(taskRepository).findById(anyInt());\r\n    }\r\n}\r\n```\r\n\r\nI have tried change @Mock by @MockBean, call `when(taskRepository.findById(anyInt())).thenReturn(Optional.of(task));` instead of current code, change `anyInt()` parameter to various mockito parameters\r\n\r\nAny advices, please.\r\nThanks in advance","title":"Mockito returns Optional.empty instead of object for tests","body":"<p>Java 18, spring boot starter parent 3.0.4, junit 4.13.2</p>\n<p>Debug shows me, that everywhere is the same mock for repository. &quot;Evaluate expression&quot; on <code>taskRepository.findById(id)</code> at service method shows that object is null instead of my created <code>task</code> object at <code>init()</code>.</p>\n<p><strong>Code:</strong></p>\n<p><strong>TaskRepository extends JpaRepository</strong></p>\n<p><strong>My service method:</strong></p>\n<pre><code>@Transactional\n    public Task getTaskById(Integer id){\n        Optional&lt;Task&gt; taskById = taskRepository.findById(id);\n        if(taskById.isPresent()){\n            return taskById.get();\n        }\n\n        throw new RuntimeException(&quot;Task not found with id : &quot; + id);\n    }\n</code></pre>\n<p><strong>My test class:</strong></p>\n<pre><code>@TestInstance(TestInstance.Lifecycle.PER_CLASS)\n@RunWith(MockitoJUnitRunner.class)\npublic class TaskServiceTestWithoutSpring {\n\n    @Mock\n    public TaskRepository taskRepository;\n\n    @Spy\n    @InjectMocks\n    public TaskService taskService;\n\n    @BeforeEach\n    public void init(){\n        MockitoAnnotations.openMocks(this);\n        Task task = new Task();\n        task.setId(4);\n        task.setStatus(StatusEnum.IN_PROGRESS);\n        task.setDescription(&quot;amazing task&quot;);\n\n        doReturn(Optional.of(task)).when(taskRepository).findById(anyInt());\n    }\n}\n</code></pre>\n<p>I have tried change @Mock by @MockBean, call <code>when(taskRepository.findById(anyInt())).thenReturn(Optional.of(task));</code> instead of current code, change <code>anyInt()</code> parameter to various mockito parameters</p>\n<p>Any advices, please.\nThanks in advance</p>\n"},{"tags":["java","dependency-injection","guice"],"answers":[{"tags":[],"owner":{"account_id":330208,"reputation":11005,"user_id":654187,"accept_rate":100,"display_name":"John Ericksen"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1697115595,"creation_date":1328489073,"answer_id":9154502,"question_id":9154410,"body_markdown":"You could use assisted injection to provide the text through a factory, along with the message sender instantiated by Guice:\r\n\r\n    public class Message {\r\n      private String text;\r\n      private MessageSender sender;\r\n    \r\n      @Inject\r\n      public Message(@Assisted String text, MessageSender sender) {\r\n        this.text = text;\r\n        this.sender = sender;\r\n      }\r\n    \r\n      public void send(Person recipient) {\r\n        this.sender.send(recipient, this.text);\r\n      }\r\n    }\r\n\r\nFactory:\r\n\r\n    public interface MessageFactory{\r\n        Message buildMessage(String text);\r\n    }\r\n\r\nModule:\r\n\r\n    public class MessageSenderModule extends AbstractModule {\r\n      @Override \r\n      protected void configure() {\r\n        bind(MessageSender.class).to(EmailBasedMessageSender.class);\r\n        FactoryModuleBuilder factoryModuleBuilder = new FactoryModuleBuilder();\r\n        install(factoryModuleBuilder.build(MessageFactory.class));\r\n      }\r\n    }\r\n\r\nusage:\r\n\r\n    @Inject MessageFactory messageFactory;\r\n    \r\n    void test(Recipient recipient){\r\n      Message message = messageFactory.buildMessage(&quot;hey there&quot;);\r\n      message.send(recipient);\r\n    }\r\n\r\n[Assisted Injection Wiki][1]\r\n\r\n\r\n  [1]: https://github.com/google/guice/wiki/AssistedInject","title":"Guice injecting only some of the constructor","body":"<p>You could use assisted injection to provide the text through a factory, along with the message sender instantiated by Guice:</p>\n<pre><code>public class Message {\n  private String text;\n  private MessageSender sender;\n\n  @Inject\n  public Message(@Assisted String text, MessageSender sender) {\n    this.text = text;\n    this.sender = sender;\n  }\n\n  public void send(Person recipient) {\n    this.sender.send(recipient, this.text);\n  }\n}\n</code></pre>\n<p>Factory:</p>\n<pre><code>public interface MessageFactory{\n    Message buildMessage(String text);\n}\n</code></pre>\n<p>Module:</p>\n<pre><code>public class MessageSenderModule extends AbstractModule {\n  @Override \n  protected void configure() {\n    bind(MessageSender.class).to(EmailBasedMessageSender.class);\n    FactoryModuleBuilder factoryModuleBuilder = new FactoryModuleBuilder();\n    install(factoryModuleBuilder.build(MessageFactory.class));\n  }\n}\n</code></pre>\n<p>usage:</p>\n<pre><code>@Inject MessageFactory messageFactory;\n\nvoid test(Recipient recipient){\n  Message message = messageFactory.buildMessage(&quot;hey there&quot;);\n  message.send(recipient);\n}\n</code></pre>\n<p><a href=\"https://github.com/google/guice/wiki/AssistedInject\" rel=\"nofollow noreferrer\">Assisted Injection Wiki</a></p>\n"}],"owner":{"account_id":82337,"reputation":30115,"user_id":231588,"accept_rate":82,"display_name":"grautur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5683,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":9154502,"answer_count":1,"score":12,"last_activity_date":1697115595,"creation_date":1328488181,"question_id":9154410,"body_markdown":"Suppose I have some `Message` class like the following. (This is a made-up class for simplicity.)\r\n\r\n    public class Message {\r\n      private String text;\r\n\r\n      public Message(String text) {\r\n        this.text = text;\r\n      }\r\n\r\n      public void send(Person recipient) {\r\n        // I think I should be Guice-injecting the sender.\r\n        MessageSender sender = new EmailBasedMessageSender();\r\n        sender.send(recipient, this.text);\r\n      }\r\n    }\r\n\r\nSince I have different `MessageSender` implementations, and might want to unit test this sending ability, I think I should be injecting the `MessageSender` in `Message`&#39;s `send()` method. But how do I do this?\r\n\r\nAll the Guice examples I&#39;ve seen and that I understand seem to do the injection in the constructor:\r\n\r\n    public class Message {\r\n      private String text;\r\n      private MessageSender sender;\r\n\r\n      // ??? I don&#39;t know what to do here, since the `text` argument shouldn&#39;t be injected.\r\n      @Inject\r\n      public Message(String text, MessageSender sender) {\r\n        this.text = text;\r\n        this.sender = sender;\r\n      }\r\n\r\n      public void send(Person recipient) {\r\n        this.sender.send(recipient, this.text);\r\n      }\r\n    }\r\n\r\n    public class MessageSenderModule extends AbstractModule {\r\n      @Override \r\n      protected void configure() {\r\n        bind(MessageSender.class).to(EmailBasedMessageSender.class);\r\n      }\r\n    }\r\n\r\nBut my `Message` class takes in a `text` argument in its constructor, which I don&#39;t want to inject. So what am I supposed to do instead?\r\n\r\n(Note: I&#39;m a complete Google Guice noob. I think I understand dependency injection, but I don&#39;t understand how to actually implement it with Guice.)","title":"Guice injecting only some of the constructor","body":"<p>Suppose I have some <code>Message</code> class like the following. (This is a made-up class for simplicity.)</p>\n\n<pre><code>public class Message {\n  private String text;\n\n  public Message(String text) {\n    this.text = text;\n  }\n\n  public void send(Person recipient) {\n    // I think I should be Guice-injecting the sender.\n    MessageSender sender = new EmailBasedMessageSender();\n    sender.send(recipient, this.text);\n  }\n}\n</code></pre>\n\n<p>Since I have different <code>MessageSender</code> implementations, and might want to unit test this sending ability, I think I should be injecting the <code>MessageSender</code> in <code>Message</code>'s <code>send()</code> method. But how do I do this?</p>\n\n<p>All the Guice examples I've seen and that I understand seem to do the injection in the constructor:</p>\n\n<pre><code>public class Message {\n  private String text;\n  private MessageSender sender;\n\n  // ??? I don't know what to do here, since the `text` argument shouldn't be injected.\n  @Inject\n  public Message(String text, MessageSender sender) {\n    this.text = text;\n    this.sender = sender;\n  }\n\n  public void send(Person recipient) {\n    this.sender.send(recipient, this.text);\n  }\n}\n\npublic class MessageSenderModule extends AbstractModule {\n  @Override \n  protected void configure() {\n    bind(MessageSender.class).to(EmailBasedMessageSender.class);\n  }\n}\n</code></pre>\n\n<p>But my <code>Message</code> class takes in a <code>text</code> argument in its constructor, which I don't want to inject. So what am I supposed to do instead?</p>\n\n<p>(Note: I'm a complete Google Guice noob. I think I understand dependency injection, but I don't understand how to actually implement it with Guice.)</p>\n"},{"tags":["java","spring","validation","hibernate-validator"],"answers":[{"tags":[],"owner":{"account_id":3119072,"reputation":620,"user_id":2639229,"display_name":"seralex.vi"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1375468961,"creation_date":1375468961,"answer_id":18023986,"question_id":18023870,"body_markdown":"Add constructor without parameters: \r\n\r\n    public class User {\r\n      ...\r\n      public User() {}\r\n      ...\r\n    }","title":"java.lang.NoSuchMethodException: userAuth.User.&lt;init&gt;()","body":"<p>Add constructor without parameters: </p>\n\n<pre><code>public class User {\n  ...\n  public User() {}\n  ...\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":15398978,"reputation":316,"user_id":11109119,"display_name":"Guy_g23"},"score":0,"creation_date":1681382975,"post_id":18024061,"comment_id":134048900,"body_markdown":"Good and straight-forward explanation. What about constructor visibility restrictions?","body":"Good and straight-forward explanation. What about constructor visibility restrictions?"},{"owner":{"account_id":11288679,"reputation":923,"user_id":8278630,"display_name":"Farkhod Abdukodirov"},"score":0,"creation_date":1685925401,"post_id":18024061,"comment_id":134724604,"body_markdown":"really helpful (in my case)","body":"really helpful (in my case)"}],"tags":[],"owner":{"account_id":1129042,"reputation":48154,"user_id":1115554,"accept_rate":100,"display_name":"micha"},"comment_count":2,"down_vote_count":0,"up_vote_count":145,"is_accepted":true,"score":145,"last_activity_date":1387736220,"creation_date":1375469225,"answer_id":18024061,"question_id":18023870,"body_markdown":"The message `java.lang.NoSuchMethodException: userAuth.User.&lt;init&gt;()` means that someone tried to call a constructor without any parameters. Adding a default constructor should solve this problem:\r\n\r\n    public class User {\r\n    \r\n        public User() {\r\n    \r\n        }\r\n    \r\n        ..\r\n    }","title":"java.lang.NoSuchMethodException: userAuth.User.&lt;init&gt;()","body":"<p>The message <code>java.lang.NoSuchMethodException: userAuth.User.&lt;init&gt;()</code> means that someone tried to call a constructor without any parameters. Adding a default constructor should solve this problem:</p>\n\n<pre><code>public class User {\n\n    public User() {\n\n    }\n\n    ..\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":17276704,"reputation":390,"user_id":12512406,"display_name":"deadLock"},"score":1,"creation_date":1606333876,"post_id":44868905,"comment_id":114936336,"body_markdown":"In my case, other access modes still cause the error. So had to go with the public mode only. Surprisingly, Intellij IDEA recommends me to remove no args constructor.","body":"In my case, other access modes still cause the error. So had to go with the public mode only. Surprisingly, Intellij IDEA recommends me to remove no args constructor."},{"owner":{"account_id":3013537,"reputation":7735,"user_id":3322533,"accept_rate":65,"display_name":"User1291"},"score":0,"creation_date":1606847327,"post_id":44868905,"comment_id":115084494,"body_markdown":"A similar issue, as noted by https://stackoverflow.com/a/27580043/3322533 , a *private* static class will have a non-public default constructor.","body":"A similar issue, as noted by <a href=\"https://stackoverflow.com/a/27580043/3322533\">stackoverflow.com/a/27580043/3322533</a> , a <i>private</i> static class will have a non-public default constructor."}],"tags":[],"owner":{"account_id":7007162,"reputation":939,"user_id":5371168,"display_name":"D. Lawrence"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1498984589,"creation_date":1498984589,"answer_id":44868905,"question_id":18023870,"body_markdown":"I think the answer of adding a default no-args constructor is clear. However, one must also think about the visibility of the latter constructor. The previous answers show the use of a **public** no-args default constructor. Is the **public** visibility relevant with respect to the class&#39; logic?\r\n\r\nAs a matter of fact, Hibernate doesn&#39;t require a **public** no-args constructor. One can still choose its visibility.\r\n\r\nI would therefore recommend to take great care of the constructor&#39;s visibility (private/public/protected/default). Choose the adequate one. For example, if no one should be able to call this no args constructor, choose a **private** visibility like so:\r\n    \r\n    public class User {\r\n      ...\r\n      private User() {}\r\n      ...\r\n    }","title":"java.lang.NoSuchMethodException: userAuth.User.&lt;init&gt;()","body":"<p>I think the answer of adding a default no-args constructor is clear. However, one must also think about the visibility of the latter constructor. The previous answers show the use of a <strong>public</strong> no-args default constructor. Is the <strong>public</strong> visibility relevant with respect to the class' logic?</p>\n\n<p>As a matter of fact, Hibernate doesn't require a <strong>public</strong> no-args constructor. One can still choose its visibility.</p>\n\n<p>I would therefore recommend to take great care of the constructor's visibility (private/public/protected/default). Choose the adequate one. For example, if no one should be able to call this no args constructor, choose a <strong>private</strong> visibility like so:</p>\n\n<pre><code>public class User {\n  ...\n  private User() {}\n  ...\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":294765,"reputation":3209,"user_id":598824,"accept_rate":62,"display_name":"Muthu Ganapathy Nathan"},"score":2,"creation_date":1528980565,"post_id":46295874,"comment_id":88718389,"body_markdown":"Great! This is my exact problem!","body":"Great! This is my exact problem!"},{"owner":{"account_id":448941,"reputation":4335,"user_id":843443,"accept_rate":91,"display_name":"Jeff"},"score":0,"creation_date":1530192331,"post_id":46295874,"comment_id":89156514,"body_markdown":"I had to make my constructor public.","body":"I had to make my constructor public."},{"owner":{"account_id":445071,"reputation":165,"user_id":837285,"accept_rate":60,"display_name":"pkramaric"},"score":3,"creation_date":1531323067,"post_id":46295874,"comment_id":89556464,"body_markdown":"Had the same problem, once I took the non-static inner class out and made it a separate class it worked fine for me","body":"Had the same problem, once I took the non-static inner class out and made it a separate class it worked fine for me"}],"tags":[],"owner":{"account_id":403268,"reputation":906,"user_id":770927,"accept_rate":40,"display_name":"zovits"},"comment_count":3,"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1505810823,"creation_date":1505810823,"answer_id":46295874,"question_id":18023870,"body_markdown":"If the User class is a non-static inner class of another class (e.g. UserAuth), then the message could arise if the User class is attempted to be instantiated before the external class is instantiated. In this case the null-arg constructor might be there in the code but will not be found, since the external class does not exist yet. A solution could be to extract the inner class into an independent class, to make it static or to ensure the initialization of the external class happens before that of the inner class.","title":"java.lang.NoSuchMethodException: userAuth.User.&lt;init&gt;()","body":"<p>If the User class is a non-static inner class of another class (e.g. UserAuth), then the message could arise if the User class is attempted to be instantiated before the external class is instantiated. In this case the null-arg constructor might be there in the code but will not be found, since the external class does not exist yet. A solution could be to extract the inner class into an independent class, to make it static or to ensure the initialization of the external class happens before that of the inner class.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1662395077,"post_id":73566273,"comment_id":129991272,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/73566273/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":13804297,"reputation":31,"user_id":9963592,"display_name":"Charles Singh"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1662020621,"creation_date":1662020621,"answer_id":73566273,"question_id":18023870,"body_markdown":"Bean should have a no argument constructor.","title":"java.lang.NoSuchMethodException: userAuth.User.&lt;init&gt;()","body":"<p>Bean should have a no argument constructor.</p>\n"},{"tags":[],"owner":{"account_id":26158800,"reputation":21,"user_id":19845689,"display_name":"Karim Diawara"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697115422,"creation_date":1697115422,"answer_id":77280797,"question_id":18023870,"body_markdown":"If you&#39;re using Lombok, you can use the annotation above the class, @AllArgsConstructor and @NoArgsConstructor\r\n\r\n`@AllArgsConstructor\r\n@NoArgsConstructor\r\n public class User {\r\n  ...\r\n}\r\n`","title":"java.lang.NoSuchMethodException: userAuth.User.&lt;init&gt;()","body":"<p>If you're using Lombok, you can use the annotation above the class, @AllArgsConstructor and @NoArgsConstructor</p>\n<p><code>@AllArgsConstructor @NoArgsConstructor public class User { ... } </code></p>\n"}],"owner":{"account_id":1060328,"reputation":1340,"user_id":1062103,"accept_rate":86,"display_name":"Lesya Makhova"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118831,"favorite_count":0,"down_vote_count":0,"up_vote_count":56,"accepted_answer_id":18024061,"answer_count":6,"score":56,"last_activity_date":1697115422,"creation_date":1375468521,"question_id":18023870,"body_markdown":"I have the class with validation:\r\n    \r\n   \r\n\r\n    public class User {\r\n    \t@Size(min=3, max=20, message=&quot;User name must be between 3 and 20 characters long&quot;)\r\n    \t@Pattern(regexp=&quot;^[a-zA-Z0-9]+$&quot;, message=&quot;User name must be alphanumeric with no spaces&quot;)\r\n    \tprivate String name;\r\n    \t\r\n    \t@Size(min=6, max=20, message=&quot;Password must be between 6 and 20 characters long&quot;)\r\n    \t@Pattern(regexp=&quot;^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$&quot;, message=&quot;Password must contains at least one number&quot;)\r\n    \tprivate String password;\r\n    \t\r\n    \tpublic User(String _name, String _password){\r\n    \t\tsuper();\r\n    \t\tname = _name;\r\n    \t\tpassword = _password;\r\n    \t}\r\n    \t\r\n    \tpublic String getName(){\r\n    \t\treturn name;\r\n    \t}\r\n    \t\r\n    \tpublic String getPassword(){\r\n    \t\treturn password;\r\n    \t}\r\n    \t\r\n    \tpublic void setPassword(String newPassword){\r\n    \t\tpassword = newPassword;\r\n    \t}\r\n    \r\n    }\r\n\r\nwhen I validate values, I got the message:\r\n\r\n    SEVERE: Servlet.service() for servlet osAppServlet threw exception\r\n    java.lang.NoSuchMethodException: userAuth.User.&lt;init&gt;()\r\n\r\nwhere is the problem?","title":"java.lang.NoSuchMethodException: userAuth.User.&lt;init&gt;()","body":"<p>I have the class with validation:</p>\n\n<pre><code>public class User {\n    @Size(min=3, max=20, message=\"User name must be between 3 and 20 characters long\")\n    @Pattern(regexp=\"^[a-zA-Z0-9]+$\", message=\"User name must be alphanumeric with no spaces\")\n    private String name;\n\n    @Size(min=6, max=20, message=\"Password must be between 6 and 20 characters long\")\n    @Pattern(regexp=\"^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$\", message=\"Password must contains at least one number\")\n    private String password;\n\n    public User(String _name, String _password){\n        super();\n        name = _name;\n        password = _password;\n    }\n\n    public String getName(){\n        return name;\n    }\n\n    public String getPassword(){\n        return password;\n    }\n\n    public void setPassword(String newPassword){\n        password = newPassword;\n    }\n\n}\n</code></pre>\n\n<p>when I validate values, I got the message:</p>\n\n<pre><code>SEVERE: Servlet.service() for servlet osAppServlet threw exception\njava.lang.NoSuchMethodException: userAuth.User.&lt;init&gt;()\n</code></pre>\n\n<p>where is the problem?</p>\n"},{"tags":["java","jar"],"comments":[{"owner":{"account_id":6495599,"reputation":2923,"user_id":5028333,"display_name":"Raman Shrivastava"},"score":0,"creation_date":1568665333,"post_id":57963224,"comment_id":102338902,"body_markdown":"Possible duplicate of [How to use JarOutputStream to create a JAR file?](https://stackoverflow.com/questions/1281229/how-to-use-jaroutputstream-to-create-a-jar-file)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/1281229/how-to-use-jaroutputstream-to-create-a-jar-file\">How to use JarOutputStream to create a JAR file?</a>"},{"owner":{"account_id":1363265,"reputation":1946,"user_id":1300224,"accept_rate":70,"display_name":"spaghettifunk"},"score":0,"creation_date":1568702857,"post_id":57963224,"comment_id":102347686,"body_markdown":"Actually it&#39;s not a duplicate. My question is more specific. I am able to create a Jar, but I am missing the dependencies, hence a fat-jar. The code above is based on that question.","body":"Actually it&#39;s not a duplicate. My question is more specific. I am able to create a Jar, but I am missing the dependencies, hence a fat-jar. The code above is based on that question."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1568703164,"post_id":57963224,"comment_id":102347823,"body_markdown":"The only real question here is whether `/org/company/bla/bla.class` is in the JAR file, and if not why not.","body":"The only real question here is whether <code>&#47;org&#47;company&#47;bla&#47;bla.class</code> is in the JAR file, and if not why not."},{"owner":{"account_id":1363265,"reputation":1946,"user_id":1300224,"accept_rate":70,"display_name":"spaghettifunk"},"score":0,"creation_date":1568703631,"post_id":57963224,"comment_id":102348010,"body_markdown":"I have a maven project and in the `pom.xml` I add a dependency (let&#39;s say kafka consumer). Now, when I create the JAR with the code above, the `kafka consumer` dependency is not in there. If I create the JAR with `mvn package` then the dependency is in there. But as I said in the question, I&#39;d like to achieve the same result programmatically and not with the CLI.","body":"I have a maven project and in the <code>pom.xml</code> I add a dependency (let&#39;s say kafka consumer). Now, when I create the JAR with the code above, the <code>kafka consumer</code> dependency is not in there. If I create the JAR with <code>mvn package</code> then the dependency is in there. But as I said in the question, I&#39;d like to achieve the same result programmatically and not with the CLI."},{"owner":{"account_id":8238403,"reputation":127,"user_id":6196751,"accept_rate":40,"display_name":"Avinash"},"score":0,"creation_date":1663160083,"post_id":57963224,"comment_id":130173186,"body_markdown":"@spaghettifunk -   Have you got the answer of it ?? Even I am trying to create one similar to that.","body":"@spaghettifunk -   Have you got the answer of it ?? Even I am trying to create one similar to that."}],"answers":[{"tags":[],"owner":{"account_id":1869609,"reputation":3387,"user_id":1692179,"accept_rate":76,"display_name":"bobmarksie"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697115200,"creation_date":1696956167,"answer_id":77267613,"question_id":57963224,"body_markdown":"Creating an Uber / Shadow JAR implies either Maven or Gradle is also used to handle all the library dependancies. \r\n\r\nIf so, one solution is to run either the Maven or Gradle build command-line arg from Java (using `Runtime.exec()` command). \r\n\r\nA use-case for doing this programmatically is as part of a Java integration test where the Uber Jar is required (see https://stackoverflow.com/questions/77128033/testing-custom-kafka-connect-smt-using-test-containers for an example).\r\n\r\nThe following solution supports both Gradle / Maven.\r\n\r\n## Maven\r\n\r\nEnsure the `pom.xml` includes  the [Maven Shade Plugin](https://maven.apache.org/plugins/maven-shade-plugin/) plugin e.g.\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;test&lt;/groupId&gt;\r\n    &lt;artifactId&gt;helloworld&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n        &lt;jdk.version&gt;1.11&lt;/jdk.version&gt;\r\n        &lt;maven.compiler.plugin.version&gt;3.8.1&lt;/maven.compiler.plugin.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n            &lt;version&gt;3.13.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n            &lt;version&gt;5.8.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n            &lt;version&gt;5.8.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.assertj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\r\n            &lt;version&gt;3.24.2&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.5.1&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;shade&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nAlso useful to have the [Maven wrapper ](https://maven.apache.org/wrapper/) installed on the project (e.g. run `mvn wrapper:wrapper`).\r\n\r\nTo test, run `./mvnw package` ...\r\n\r\n```\r\n$ ./mvnw package\r\n\r\n[INFO] Scanning for projects...\r\n...\r\n[INFO] Replacing original artifact with shaded artifact.\r\n[INFO] Replacing /Users/bobmarks/code/test/fatjar/target/helloworld-1.0.jar with /Users/bobmarks/code/test/fatjar/target/helloworld-1.0-shaded.jar\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  1.129 s\r\n[INFO] Finished at: 2023-10-12T12:05:04+01:00\r\n[INFO] ------------------------------------------------------------------------\r\n```\r\n\r\n... and ensure file exists in `target` folder:\r\n\r\n```shell\r\n$ ls -al target/*.jar \r\n\r\n-rw-r--r--@ 1 user  group  1336348 Oct 12 12:05 target/helloworld-1.0.jar\r\n-rw-r--r--@ 1 user  group     1675 Oct 12 12:05 target/original-helloworld-1.0.jar\r\n```\r\n\r\n&gt; Note, the larger file (`helloworld-1.0.jar`) is the Uber Jar.\r\n\r\n## Gradle\r\n\r\nFor Gradle we should ensure the [Gradle Shadow](https://github.com/johnrengelman/shadow) plugin exists in the `plugins` section of the `build.gradle` file e.g.\r\n\r\n```java\r\nplugins {\r\n    id(&quot;com.github.johnrengelman.shadow&quot;) version &quot;6.0.0&quot;\r\n}\r\n\r\napply plugin: &#39;java&#39;\r\n\r\njava {\r\n    sourceCompatibility = 1.11\r\n    targetCompatibility = 1.11\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.apache.commons:commons-lang3:3.13.0&#39;\r\n\r\n    testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:5.8.0&#39;\r\n    testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.8.0&#39;\r\n    testImplementation &#39;org.assertj:assertj-core:3.24.2&#39;\r\n}\r\n```\r\n\r\n... and `settings.gradle` ...\r\n\r\n```java\r\nrootProject.name = &#39;helloworld&#39;\r\n```\r\n\r\nAlso useful to have the [Gradle wrapper](https://docs.gradle.org/current/userguide/gradle_wrapper.html)\r\n (e.g. run `gradle wrapper`).\r\n\r\nTo test, run `./gradlew shadowJar` ...\r\n\r\n```\r\n$ ./gradlew shadowJar\r\n\r\nBUILD SUCCESSFUL in 554ms\r\n2 actionable tasks: 1 executed, 1 up-to-date\r\n```\r\n\r\n... and ensure file exists in `build/libs` folder:\r\n\r\n```shell\r\n$ ls -al build/libs/*.jar \r\n\r\n-rw-r--r--@ 1 user  group  632280 Oct 12 12:39 build/libs/helloworld-all.jar\r\n```\r\n\r\n\r\n## Create Jar Files Programatically using Java\r\n\r\nThe code for creating the UberJars is as follows:\r\n\r\n```java\r\nimport java.io.IOException;\r\nimport java.util.Scanner;\r\n\r\npublic class UberJar {\r\n\r\n    public static void createUberJarMaven() {\r\n        createUberJar(&quot;mvnw.cmd&quot;, &quot;./mvnw&quot;, &quot;package -DskipTests&quot;, &quot;BUILD SUCCESS&quot;);\r\n    }\r\n\r\n    public static void createUberJarGradle() {\r\n        createUberJar(&quot;gradlew.bat&quot;, &quot;./gradlew&quot;, &quot;shadowJar&quot;, &quot;BUILD SUCCESSFUL&quot;);\r\n    }\r\n\r\n    private static void createUberJar(String cmdWindows, String cmdLinux, String cmdBuild, String outputSuccess) {\r\n        String cmd = isWindows() ? cmdWindows : cmdLinux;\r\n        String output = execCmd(cmd + &quot; &quot; + cmdBuild);\r\n        if (output == null || !output.contains(outputSuccess)) {\r\n            throw new RuntimeException(&quot;Ubar JAR creation unsuccessful\\n\\n&quot; + output);\r\n        }\r\n    }\r\n\r\n    private static String execCmd(String cmd) {\r\n        try {\r\n            Scanner s = new Scanner(Runtime.getRuntime().exec(cmd).getInputStream()).useDelimiter(&quot;\\\\A&quot;);\r\n            return s.hasNext() ? s.next() : &quot;&quot;;\r\n        } catch (IOException ioEx) {\r\n            throw new RuntimeException(&quot;Error executing: &quot; + cmd, ioEx);\r\n        }\r\n    }\r\n\r\n    private static boolean isWindows() {\r\n        return System.getProperty(&quot;os.name&quot;).toLowerCase().startsWith(&quot;windows&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nA unit test to test both of these is as follows:\r\n\r\n```java\r\nimport org.junit.jupiter.api.BeforeAll;\r\nimport org.junit.jupiter.api.Test;\r\nimport java.io.File;\r\nimport static org.assertj.core.api.Assertions.assertThat;\r\n\r\npublic class UbarJarTest {\r\n\r\n    private static final File MAVEN_UBER_FILE = new File(&quot;target/helloworld-1.0.jar&quot;);\r\n    private static final File GRADLE_UBER_FILE = new File(&quot;build/libs/helloworld-all.jar&quot;);\r\n\r\n    @BeforeAll\r\n    public static void setup() {\r\n        if (MAVEN_UBER_FILE.exists()) {\r\n            MAVEN_UBER_FILE.delete();\r\n        }\r\n        if (GRADLE_UBER_FILE.exists()) {\r\n            GRADLE_UBER_FILE.delete();\r\n        }\r\n    }\r\n\r\n    @Test\r\n    public void should_create_uber_jar_maven() {\r\n        assertThat(MAVEN_UBER_FILE).doesNotExist();\r\n\r\n        UberJar.createUberJarMaven();\r\n\r\n        assertThat(MAVEN_UBER_FILE).exists();\r\n    }\r\n\r\n    @Test\r\n    public void should_create_uber_jar_gradle() {\r\n        assertThat(GRADLE_UBER_FILE).doesNotExist();\r\n\r\n        UberJar.createUberJarGradle();\r\n\r\n        assertThat(GRADLE_UBER_FILE).exists();\r\n    }\r\n\r\n}\r\n```","title":"Create a Fat-Jar Programmatically","body":"<p>Creating an Uber / Shadow JAR implies either Maven or Gradle is also used to handle all the library dependancies.</p>\n<p>If so, one solution is to run either the Maven or Gradle build command-line arg from Java (using <code>Runtime.exec()</code> command).</p>\n<p>A use-case for doing this programmatically is as part of a Java integration test where the Uber Jar is required (see <a href=\"https://stackoverflow.com/questions/77128033/testing-custom-kafka-connect-smt-using-test-containers\">Testing custom Kafka Connect SMT using Test Containers</a> for an example).</p>\n<p>The following solution supports both Gradle / Maven.</p>\n<h2>Maven</h2>\n<p>Ensure the <code>pom.xml</code> includes  the <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/\" rel=\"nofollow noreferrer\">Maven Shade Plugin</a> plugin e.g.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;test&lt;/groupId&gt;\n    &lt;artifactId&gt;helloworld&lt;/artifactId&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;jdk.version&gt;1.11&lt;/jdk.version&gt;\n        &lt;maven.compiler.plugin.version&gt;3.8.1&lt;/maven.compiler.plugin.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.13.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;5.8.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;5.8.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.assertj&lt;/groupId&gt;\n            &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\n            &lt;version&gt;3.24.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.5.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Also useful to have the <a href=\"https://maven.apache.org/wrapper/\" rel=\"nofollow noreferrer\">Maven wrapper </a> installed on the project (e.g. run <code>mvn wrapper:wrapper</code>).</p>\n<p>To test, run <code>./mvnw package</code> ...</p>\n<pre><code>$ ./mvnw package\n\n[INFO] Scanning for projects...\n...\n[INFO] Replacing original artifact with shaded artifact.\n[INFO] Replacing /Users/bobmarks/code/test/fatjar/target/helloworld-1.0.jar with /Users/bobmarks/code/test/fatjar/target/helloworld-1.0-shaded.jar\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  1.129 s\n[INFO] Finished at: 2023-10-12T12:05:04+01:00\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<p>... and ensure file exists in <code>target</code> folder:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ ls -al target/*.jar \n\n-rw-r--r--@ 1 user  group  1336348 Oct 12 12:05 target/helloworld-1.0.jar\n-rw-r--r--@ 1 user  group     1675 Oct 12 12:05 target/original-helloworld-1.0.jar\n</code></pre>\n<blockquote>\n<p>Note, the larger file (<code>helloworld-1.0.jar</code>) is the Uber Jar.</p>\n</blockquote>\n<h2>Gradle</h2>\n<p>For Gradle we should ensure the <a href=\"https://github.com/johnrengelman/shadow\" rel=\"nofollow noreferrer\">Gradle Shadow</a> plugin exists in the <code>plugins</code> section of the <code>build.gradle</code> file e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>plugins {\n    id(&quot;com.github.johnrengelman.shadow&quot;) version &quot;6.0.0&quot;\n}\n\napply plugin: 'java'\n\njava {\n    sourceCompatibility = 1.11\n    targetCompatibility = 1.11\n}\n\nrepositories {\n    mavenCentral()\n}\n\ntest {\n    useJUnitPlatform()\n}\n\ndependencies {\n    implementation 'org.apache.commons:commons-lang3:3.13.0'\n\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.0'\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.0'\n    testImplementation 'org.assertj:assertj-core:3.24.2'\n}\n</code></pre>\n<p>... and <code>settings.gradle</code> ...</p>\n<pre class=\"lang-java prettyprint-override\"><code>rootProject.name = 'helloworld'\n</code></pre>\n<p>Also useful to have the <a href=\"https://docs.gradle.org/current/userguide/gradle_wrapper.html\" rel=\"nofollow noreferrer\">Gradle wrapper</a>\n(e.g. run <code>gradle wrapper</code>).</p>\n<p>To test, run <code>./gradlew shadowJar</code> ...</p>\n<pre><code>$ ./gradlew shadowJar\n\nBUILD SUCCESSFUL in 554ms\n2 actionable tasks: 1 executed, 1 up-to-date\n</code></pre>\n<p>... and ensure file exists in <code>build/libs</code> folder:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ ls -al build/libs/*.jar \n\n-rw-r--r--@ 1 user  group  632280 Oct 12 12:39 build/libs/helloworld-all.jar\n</code></pre>\n<h2>Create Jar Files Programatically using Java</h2>\n<p>The code for creating the UberJars is as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.util.Scanner;\n\npublic class UberJar {\n\n    public static void createUberJarMaven() {\n        createUberJar(&quot;mvnw.cmd&quot;, &quot;./mvnw&quot;, &quot;package -DskipTests&quot;, &quot;BUILD SUCCESS&quot;);\n    }\n\n    public static void createUberJarGradle() {\n        createUberJar(&quot;gradlew.bat&quot;, &quot;./gradlew&quot;, &quot;shadowJar&quot;, &quot;BUILD SUCCESSFUL&quot;);\n    }\n\n    private static void createUberJar(String cmdWindows, String cmdLinux, String cmdBuild, String outputSuccess) {\n        String cmd = isWindows() ? cmdWindows : cmdLinux;\n        String output = execCmd(cmd + &quot; &quot; + cmdBuild);\n        if (output == null || !output.contains(outputSuccess)) {\n            throw new RuntimeException(&quot;Ubar JAR creation unsuccessful\\n\\n&quot; + output);\n        }\n    }\n\n    private static String execCmd(String cmd) {\n        try {\n            Scanner s = new Scanner(Runtime.getRuntime().exec(cmd).getInputStream()).useDelimiter(&quot;\\\\A&quot;);\n            return s.hasNext() ? s.next() : &quot;&quot;;\n        } catch (IOException ioEx) {\n            throw new RuntimeException(&quot;Error executing: &quot; + cmd, ioEx);\n        }\n    }\n\n    private static boolean isWindows() {\n        return System.getProperty(&quot;os.name&quot;).toLowerCase().startsWith(&quot;windows&quot;);\n    }\n\n}\n</code></pre>\n<p>A unit test to test both of these is as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.jupiter.api.BeforeAll;\nimport org.junit.jupiter.api.Test;\nimport java.io.File;\nimport static org.assertj.core.api.Assertions.assertThat;\n\npublic class UbarJarTest {\n\n    private static final File MAVEN_UBER_FILE = new File(&quot;target/helloworld-1.0.jar&quot;);\n    private static final File GRADLE_UBER_FILE = new File(&quot;build/libs/helloworld-all.jar&quot;);\n\n    @BeforeAll\n    public static void setup() {\n        if (MAVEN_UBER_FILE.exists()) {\n            MAVEN_UBER_FILE.delete();\n        }\n        if (GRADLE_UBER_FILE.exists()) {\n            GRADLE_UBER_FILE.delete();\n        }\n    }\n\n    @Test\n    public void should_create_uber_jar_maven() {\n        assertThat(MAVEN_UBER_FILE).doesNotExist();\n\n        UberJar.createUberJarMaven();\n\n        assertThat(MAVEN_UBER_FILE).exists();\n    }\n\n    @Test\n    public void should_create_uber_jar_gradle() {\n        assertThat(GRADLE_UBER_FILE).doesNotExist();\n\n        UberJar.createUberJarGradle();\n\n        assertThat(GRADLE_UBER_FILE).exists();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":1363265,"reputation":1946,"user_id":1300224,"accept_rate":70,"display_name":"spaghettifunk"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":284,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697115200,"creation_date":1568661784,"question_id":57963224,"body_markdown":"I am trying to create a **fat-jar** programmatically. So far, I managed to create a Jar file with my code inside. The problem is that, if I run this, I receive an exception saying `Cannot load user class: org.company.bla.bla`.\r\n\r\nHere is my code\r\n\r\n```java\r\n    private static void createJar() throws IOException {\r\n\r\n        Manifest manifest = new Manifest();\r\n        manifest.getMainAttributes().put(Attributes.Name.MANIFEST_VERSION, &quot;1.0&quot;);\r\n        JarOutputStream target = new JarOutputStream(new FileOutputStream(&quot;events.jar&quot;), manifest);\r\n\r\n        Path root = Paths.get(&quot;.&quot;).normalize().toAbsolutePath();\r\n        System.out.println(root.toString());\r\n\r\n        Files.walk(root).forEach(f -&gt; add(f.toFile(), target));\r\n\r\n        target.close();\r\n    }\r\n\r\n    private static void add(File source, JarOutputStream target)\r\n    {\r\n        BufferedInputStream in = null;\r\n        try {\r\n            if (source.isDirectory()) {\r\n                String name = source.getPath().replace(&quot;\\\\&quot;, &quot;/&quot;);\r\n                if (!name.isEmpty()) {\r\n                    if (!name.endsWith(&quot;/&quot;))\r\n                        name += &quot;/&quot;;\r\n                    JarEntry entry = new JarEntry(name);\r\n                    entry.setTime(source.lastModified());\r\n                    target.putNextEntry(entry);\r\n                    target.closeEntry();\r\n                }\r\n                for (File nestedFile: source.listFiles())\r\n                    add(nestedFile, target);\r\n                return;\r\n            }\r\n\r\n            JarEntry entry = new JarEntry(source.getPath().replace(&quot;\\\\&quot;, &quot;/&quot;));\r\n            entry.setTime(source.lastModified());\r\n            target.putNextEntry(entry);\r\n            in = new BufferedInputStream(new FileInputStream(source));\r\n\r\n            byte[] buffer = new byte[1024];\r\n            while (true) {\r\n                int count = in.read(buffer);\r\n                if (count == -1)\r\n                    break;\r\n                target.write(buffer, 0, count);\r\n            }\r\n            target.closeEntry();\r\n        } catch (FileNotFoundException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            if (in != null) {\r\n                try {\r\n                    in.close();\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nHow can I also add the dependencies to this Jar? Or where is the path where the dependencies are so I can include them?","title":"Create a Fat-Jar Programmatically","body":"<p>I am trying to create a <strong>fat-jar</strong> programmatically. So far, I managed to create a Jar file with my code inside. The problem is that, if I run this, I receive an exception saying <code>Cannot load user class: org.company.bla.bla</code>.</p>\n\n<p>Here is my code</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    private static void createJar() throws IOException {\n\n        Manifest manifest = new Manifest();\n        manifest.getMainAttributes().put(Attributes.Name.MANIFEST_VERSION, \"1.0\");\n        JarOutputStream target = new JarOutputStream(new FileOutputStream(\"events.jar\"), manifest);\n\n        Path root = Paths.get(\".\").normalize().toAbsolutePath();\n        System.out.println(root.toString());\n\n        Files.walk(root).forEach(f -&gt; add(f.toFile(), target));\n\n        target.close();\n    }\n\n    private static void add(File source, JarOutputStream target)\n    {\n        BufferedInputStream in = null;\n        try {\n            if (source.isDirectory()) {\n                String name = source.getPath().replace(\"\\\\\", \"/\");\n                if (!name.isEmpty()) {\n                    if (!name.endsWith(\"/\"))\n                        name += \"/\";\n                    JarEntry entry = new JarEntry(name);\n                    entry.setTime(source.lastModified());\n                    target.putNextEntry(entry);\n                    target.closeEntry();\n                }\n                for (File nestedFile: source.listFiles())\n                    add(nestedFile, target);\n                return;\n            }\n\n            JarEntry entry = new JarEntry(source.getPath().replace(\"\\\\\", \"/\"));\n            entry.setTime(source.lastModified());\n            target.putNextEntry(entry);\n            in = new BufferedInputStream(new FileInputStream(source));\n\n            byte[] buffer = new byte[1024];\n            while (true) {\n                int count = in.read(buffer);\n                if (count == -1)\n                    break;\n                target.write(buffer, 0, count);\n            }\n            target.closeEntry();\n        } catch (FileNotFoundException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            if (in != null) {\n                try {\n                    in.close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n    }\n</code></pre>\n\n<p>How can I also add the dependencies to this Jar? Or where is the path where the dependencies are so I can include them?</p>\n"},{"tags":["java","nexus","sonatype"],"answers":[{"tags":[],"owner":{"account_id":22604872,"reputation":2005,"user_id":16785907,"display_name":"Mikhail2048"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697114997,"creation_date":1697114997,"answer_id":77280730,"question_id":77280126,"body_markdown":"I think the thing you are really looking for is [Sonatype Nexus REST Api][1]. [There is a specific assets API][2], that allows you to list artifacts in the specific repository. That seems to be what you want.  \r\n\r\n\r\n  [1]: https://help.sonatype.com/repomanager3/integrations/rest-and-integration-api\r\n  [2]: https://help.sonatype.com/repomanager3/integrations/rest-and-integration-api/assets-api#AssetsAPI-Endpoints","title":"Polling a raw Nexus Repository periodically from Java Code","body":"<p>I think the thing you are really looking for is <a href=\"https://help.sonatype.com/repomanager3/integrations/rest-and-integration-api\" rel=\"nofollow noreferrer\">Sonatype Nexus REST Api</a>. <a href=\"https://help.sonatype.com/repomanager3/integrations/rest-and-integration-api/assets-api#AssetsAPI-Endpoints\" rel=\"nofollow noreferrer\">There is a specific assets API</a>, that allows you to list artifacts in the specific repository. That seems to be what you want.</p>\n"}],"owner":{"account_id":6637358,"reputation":116,"user_id":5124138,"accept_rate":50,"display_name":"Harshit Gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697114997,"creation_date":1697109861,"question_id":77280126,"body_markdown":"I have deployed a RAW Nexus Repository. Assume repo name as - `sampleRepo` and inside that the folder structure or group is like /test/files/. I have files inside /test/files folder. I need to poll this repo periodically using some REST API that Nexus offers. What are the APIs that can be used for this purpose? I thought of using the &quot;**Search**&quot; API. All I need to check for any addition or deletion of assets in this repo using Java. I am planning to maintain a DB for this purpose. Is my approach correct? Or anyone can suggest a better approach?","title":"Polling a raw Nexus Repository periodically from Java Code","body":"<p>I have deployed a RAW Nexus Repository. Assume repo name as - <code>sampleRepo</code> and inside that the folder structure or group is like /test/files/. I have files inside /test/files folder. I need to poll this repo periodically using some REST API that Nexus offers. What are the APIs that can be used for this purpose? I thought of using the &quot;<strong>Search</strong>&quot; API. All I need to check for any addition or deletion of assets in this repo using Java. I am planning to maintain a DB for this purpose. Is my approach correct? Or anyone can suggest a better approach?</p>\n"},{"tags":["java","spring","annotations"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1697055343,"post_id":77276141,"comment_id":136232875,"body_markdown":"Does [this](https://stackoverflow.com/a/15394872/8681) answer your question?","body":"Does <a href=\"https://stackoverflow.com/a/15394872/8681\">this</a> answer your question?"},{"owner":{"account_id":147796,"reputation":2101,"user_id":359170,"accept_rate":62,"display_name":"Hamed"},"score":0,"creation_date":1697056200,"post_id":77276141,"comment_id":136232981,"body_markdown":"@Jorn, No, the Value annotation does the cast itself.","body":"@Jorn, No, the Value annotation does the cast itself."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1697056330,"post_id":77276141,"comment_id":136233005,"body_markdown":"Wait, is the type of the annotation value `fixedRate` a `long` itself? Then this is never going to work. You cannot use a Spring property to provide that value.","body":"Wait, is the type of the annotation value <code>fixedRate</code> a <code>long</code> itself? Then this is never going to work. You cannot use a Spring property to provide that value."},{"owner":{"account_id":147796,"reputation":2101,"user_id":359170,"accept_rate":62,"display_name":"Hamed"},"score":0,"creation_date":1697056456,"post_id":77276141,"comment_id":136233022,"body_markdown":"exactly. The field is long. I&#39;m looking for a solution to it. There should be a solution. It doesn&#39;t make sense that this feature is only implemented for String values!!","body":"exactly. The field is long. I&#39;m looking for a solution to it. There should be a solution. It doesn&#39;t make sense that this feature is only implemented for String values!!"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1697056536,"post_id":77276141,"comment_id":136233038,"body_markdown":"What doesn&#39;t make sense is trying to assign a `String` to a `long` and expecting Spring to magically fix it.","body":"What doesn&#39;t make sense is trying to assign a <code>String</code> to a <code>long</code> and expecting Spring to magically fix it."},{"owner":{"account_id":147796,"reputation":2101,"user_id":359170,"accept_rate":62,"display_name":"Hamed"},"score":0,"creation_date":1697056833,"post_id":77276141,"comment_id":136233087,"body_markdown":"I&#39;m not expecting to Spring fix it. I&#39;m looking for a solution. If you have a solution for it, I will give you a bounty.","body":"I&#39;m not expecting to Spring fix it. I&#39;m looking for a solution. If you have a solution for it, I will give you a bounty."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1697056995,"post_id":77276141,"comment_id":136233109,"body_markdown":"I already gave you the answer. Refusing to accept it won&#39;t help anyone.","body":"I already gave you the answer. Refusing to accept it won&#39;t help anyone."},{"owner":{"account_id":147796,"reputation":2101,"user_id":359170,"accept_rate":62,"display_name":"Hamed"},"score":0,"creation_date":1697057161,"post_id":77276141,"comment_id":136233137,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/255590/discussion-between-hamed-and-jorn).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/255590/discussion-between-hamed-and-jorn\">continue this discussion in chat</a>."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697089845,"post_id":77276141,"comment_id":136235988,"body_markdown":"You cannot, there is no work around. Period. There is nothing that Spring can do as it simply isn&#39;t allowed by the Java specification. Values in annotations need to be constants (i.e. not dynamic as in your case). Which is the reason why there is the `fixedRateString` which allows a String and thus an expression which is resolved at runtime. However this is a Spring solution. For annotations that don&#39;t have a workaround like this there is simply no solution.","body":"You cannot, there is no work around. Period. There is nothing that Spring can do as it simply isn&#39;t allowed by the Java specification. Values in annotations need to be constants (i.e. not dynamic as in your case). Which is the reason why there is the <code>fixedRateString</code> which allows a String and thus an expression which is resolved at runtime. However this is a Spring solution. For annotations that don&#39;t have a workaround like this there is simply no solution."}],"answers":[{"comments":[{"owner":{"account_id":147796,"reputation":2101,"user_id":359170,"accept_rate":62,"display_name":"Hamed"},"score":0,"creation_date":1697058247,"post_id":77276347,"comment_id":136233310,"body_markdown":"Thank you for your answer, but my point is how to use variables from the application.yml as integer and long. The `Scheduled` annotation is an example.","body":"Thank you for your answer, but my point is how to use variables from the application.yml as integer and long. The <code>Scheduled</code> annotation is an example."}],"tags":[],"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697057644,"creation_date":1697057644,"answer_id":77276347,"question_id":77276141,"body_markdown":"The `@Scheduled` annotation also has a `fixedRateString` property:\r\n```\r\n\t/**\r\n\t * Execute the annotated method with a fixed period between invocations.\r\n\t * &lt;p&gt;The time unit is milliseconds by default but can be overridden via\r\n\t * {@link #timeUnit}.\r\n\t * @return the period as a String value &amp;mdash; for example, a placeholder\r\n\t * or a {@link java.time.Duration#parse java.time.Duration} compliant value\r\n\t * @since 3.2.2\r\n\t */\r\n\tString fixedRateString() default &quot;&quot;;\r\n```\r\n","title":"Spring: How to inject Integer and long values from configuration file in annotations","body":"<p>The <code>@Scheduled</code> annotation also has a <code>fixedRateString</code> property:</p>\n<pre><code>    /**\n     * Execute the annotated method with a fixed period between invocations.\n     * &lt;p&gt;The time unit is milliseconds by default but can be overridden via\n     * {@link #timeUnit}.\n     * @return the period as a String value &amp;mdash; for example, a placeholder\n     * or a {@link java.time.Duration#parse java.time.Duration} compliant value\n     * @since 3.2.2\n     */\n    String fixedRateString() default &quot;&quot;;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":147796,"reputation":2101,"user_id":359170,"accept_rate":62,"display_name":"Hamed"},"score":0,"creation_date":1697068775,"post_id":77276486,"comment_id":136234330,"body_markdown":"So `Strings` are not compile time constraints? and we can&#39;t define Integer and long in application.yml?","body":"So <code>Strings</code> are not compile time constraints? and we can&#39;t define Integer and long in application.yml?"},{"owner":{"account_id":7098080,"reputation":930,"user_id":5430811,"accept_rate":83,"display_name":"Semaphor"},"score":0,"creation_date":1697094228,"post_id":77276486,"comment_id":136236642,"body_markdown":"Strings are compile time constant. But they get resolved at runtime by spring, the resolved value could also be an integer or a long. What you want is something like a preprocessor, which replaces the string by the actual value before the code gets compiled but such a preprocessor does not exist and is also not possible, as the actual value cannot be determined during compile time as values for a property might be supplied during runtime.","body":"Strings are compile time constant. But they get resolved at runtime by spring, the resolved value could also be an integer or a long. What you want is something like a preprocessor, which replaces the string by the actual value before the code gets compiled but such a preprocessor does not exist and is also not possible, as the actual value cannot be determined during compile time as values for a property might be supplied during runtime."},{"owner":{"account_id":7098080,"reputation":930,"user_id":5430811,"accept_rate":83,"display_name":"Semaphor"},"score":0,"creation_date":1697114776,"post_id":77276486,"comment_id":136240743,"body_markdown":"I edited my comment and tried to explain what Spring actually does which might help to understand why its not possible what you want.","body":"I edited my comment and tried to explain what Spring actually does which might help to understand why its not possible what you want."}],"tags":[],"owner":{"account_id":7098080,"reputation":930,"user_id":5430811,"accept_rate":83,"display_name":"Semaphor"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697114718,"creation_date":1697059688,"answer_id":77276486,"question_id":77276141,"body_markdown":"To understand why it is not possible we need to understand how and what Spring does when you do something like this:\r\n```\r\n@Scheduled(fixedRateString = &quot;${scheduler.fixedrate:10}&quot;)\r\npublic void init(){}\r\n```\r\nThe string `${scheduler.fixedrate:10}` was assigned to `fixedRateString` and won&#39;t get replaced by the value in your application.yml. You maybe thought `fixedRateString` would get the actual value from your application.yml which is not the case, it simply gets the value you configured.\r\n\r\nNow when your application starts, Spring will interpret this string and then resolves it to your value in the application.yml and use it to setup scheduling, so this replacement happens at runtime and NOT at compile-time, this is the key point.\r\n\r\nYou wrote *There should be a solution. It doesn&#39;t make sense that this feature is only implemented for String values.* which is not entirely correct. It is not tied to string values, just the key of the property you define in the annotation is a string but the actual value of the property can be of any type.\r\n\r\n**Preprocessors**\r\nWhat you probably want is a preprocessor which processes the source files before they get compiled (like C has one). But Java has no such preprocessor. Furthermore, it would not be possible for Spring, to implement such a preprocessor if Java would provide such a possibilty. The reason is, that values of properties are determined at runtime, as the application.yml is not the only place where one can configure properties. So event if Java would support preprocessors, there is no way to replace the key with the actual value as the value cannot be determined at compile time.","title":"Spring: How to inject Integer and long values from configuration file in annotations","body":"<p>To understand why it is not possible we need to understand how and what Spring does when you do something like this:</p>\n<pre><code>@Scheduled(fixedRateString = &quot;${scheduler.fixedrate:10}&quot;)\npublic void init(){}\n</code></pre>\n<p>The string <code>${scheduler.fixedrate:10}</code> was assigned to <code>fixedRateString</code> and won't get replaced by the value in your application.yml. You maybe thought <code>fixedRateString</code> would get the actual value from your application.yml which is not the case, it simply gets the value you configured.</p>\n<p>Now when your application starts, Spring will interpret this string and then resolves it to your value in the application.yml and use it to setup scheduling, so this replacement happens at runtime and NOT at compile-time, this is the key point.</p>\n<p>You wrote <em>There should be a solution. It doesn't make sense that this feature is only implemented for String values.</em> which is not entirely correct. It is not tied to string values, just the key of the property you define in the annotation is a string but the actual value of the property can be of any type.</p>\n<p><strong>Preprocessors</strong>\nWhat you probably want is a preprocessor which processes the source files before they get compiled (like C has one). But Java has no such preprocessor. Furthermore, it would not be possible for Spring, to implement such a preprocessor if Java would provide such a possibilty. The reason is, that values of properties are determined at runtime, as the application.yml is not the only place where one can configure properties. So event if Java would support preprocessors, there is no way to replace the key with the actual value as the value cannot be determined at compile time.</p>\n"},{"tags":[],"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697090064,"creation_date":1697090064,"answer_id":77278008,"question_id":77276141,"body_markdown":"There is no solution, simply because the specification doesn&#39;t allow it. In short that is how annotations work. The values for attributes have to adhere to the type they are defined in, and a `String` isn&#39;t a `long`. \r\n\r\nThe value substition is a Spring feature and which is why for certain annotations there is also a `*String` parameter to work around this. Which is why the `@Scheduled` has the `fixedRateString` property to work around this. It is a `String` and the `String` is parsed by Spring as an expression and thus you can resolve the value **at runtime** to the value you want to use. \r\n\r\nThis all is build into Spring for annotations that are created by Spring, it will **not work** for annotations not under the control of Spring or simply for values that aren&#39;t of type `String`. \r\n\r\nSo the basic answer to your question is there is no solution! Not the answer you wanted to hear but the answer nonetheless. ","title":"Spring: How to inject Integer and long values from configuration file in annotations","body":"<p>There is no solution, simply because the specification doesn't allow it. In short that is how annotations work. The values for attributes have to adhere to the type they are defined in, and a <code>String</code> isn't a <code>long</code>.</p>\n<p>The value substition is a Spring feature and which is why for certain annotations there is also a <code>*String</code> parameter to work around this. Which is why the <code>@Scheduled</code> has the <code>fixedRateString</code> property to work around this. It is a <code>String</code> and the <code>String</code> is parsed by Spring as an expression and thus you can resolve the value <strong>at runtime</strong> to the value you want to use.</p>\n<p>This all is build into Spring for annotations that are created by Spring, it will <strong>not work</strong> for annotations not under the control of Spring or simply for values that aren't of type <code>String</code>.</p>\n<p>So the basic answer to your question is there is no solution! Not the answer you wanted to hear but the answer nonetheless.</p>\n"}],"owner":{"account_id":147796,"reputation":2101,"user_id":359170,"accept_rate":62,"display_name":"Hamed"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1697114718,"creation_date":1697055121,"question_id":77276141,"body_markdown":"I&#39;m struggling to use the configuration variables in the spring project to inject values other than String in the annotations. Is there a way to inject them?    \r\nThe annotations require Integer and long values, but when injecting from application.yml, it is considered as String.\r\n\r\nSee the example below:   \r\n\r\n    \r\n    @Scheduled(fixedRate = &quot;${scheduler.fixedrate:10}&quot;)\r\n    public void init(){}\r\n\r\nThe error is: \r\n\r\n&gt; Incompatible types. Found: &#39;java.lang.String&#39;, required: &#39;long&#39;\r\n\r\nAny solution?","title":"Spring: How to inject Integer and long values from configuration file in annotations","body":"<p>I'm struggling to use the configuration variables in the spring project to inject values other than String in the annotations. Is there a way to inject them?<br />\nThe annotations require Integer and long values, but when injecting from application.yml, it is considered as String.</p>\n<p>See the example below:</p>\n<pre><code>@Scheduled(fixedRate = &quot;${scheduler.fixedrate:10}&quot;)\npublic void init(){}\n</code></pre>\n<p>The error is:</p>\n<blockquote>\n<p>Incompatible types. Found: 'java.lang.String', required: 'long'</p>\n</blockquote>\n<p>Any solution?</p>\n"},{"tags":["java","maven","plugins","jboss","pom.xml"],"comments":[{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1697098183,"post_id":77278689,"comment_id":136237406,"body_markdown":"What&#39;s the source for &quot;version 7.8 is associated with JBoss 6.3&quot;?  The pom of any 7.x version of the plugin says &quot;JBoss AS7 Deployment Plugin&quot;.","body":"What&#39;s the source for &quot;version 7.8 is associated with JBoss 6.3&quot;?  The pom of any 7.x version of the plugin says &quot;JBoss AS7 Deployment Plugin&quot;."},{"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"score":0,"creation_date":1697100342,"post_id":77278689,"comment_id":136237916,"body_markdown":"my version deploys 6.3...","body":"my version deploys 6.3..."},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1697160231,"post_id":77278689,"comment_id":136248078,"body_markdown":"Do you need to associate the server version for some reason? What goals do you typlically run?","body":"Do you need to associate the server version for some reason? What goals do you typlically run?"},{"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"score":0,"creation_date":1697182042,"post_id":77278689,"comment_id":136250138,"body_markdown":"It&#39;s a request from the customer","body":"It&#39;s a request from the customer"}],"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697114178,"creation_date":1697097139,"question_id":77278689,"body_markdown":"How can I associate jboss-maven-plugin version with undelying server version?\r\n\r\nFor example:\r\n\r\n      &lt;groupId&gt;org.jboss.as.plugins&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jboss-as-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;7.8.Final&lt;/version&gt;\r\n\r\nis associated with 6.3 JBoss server. But I can&#39;t find a reference for other versions. Some help?","title":"Association of jboss-maven-plugin with jboss as server version","body":"<p>How can I associate jboss-maven-plugin version with undelying server version?</p>\n<p>For example:</p>\n<pre><code>  &lt;groupId&gt;org.jboss.as.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;jboss-as-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;7.8.Final&lt;/version&gt;\n</code></pre>\n<p>is associated with 6.3 JBoss server. But I can't find a reference for other versions. Some help?</p>\n"},{"tags":["java","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1697111929,"post_id":77280308,"comment_id":136240149,"body_markdown":"I&#39;m trying to understand your question better. Do you want to enforce developers to use the `@PreAuthorize` annotation on each controller method and if else, give some kind of error?","body":"I&#39;m trying to understand your question better. Do you want to enforce developers to use the <code>@PreAuthorize</code> annotation on each controller method and if else, give some kind of error?"},{"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"score":0,"creation_date":1697112155,"post_id":77280308,"comment_id":136240203,"body_markdown":"Sorry for confusion. Yes, I want Spring to return AccessDeniedException for all requests, unless there is @PreAuthorize annotation at controller method level, that evaluates to true.","body":"Sorry for confusion. Yes, I want Spring to return AccessDeniedException for all requests, unless there is @PreAuthorize annotation at controller method level, that evaluates to true."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1697112655,"post_id":77280308,"comment_id":136240310,"body_markdown":"See this -&gt; https://www.baeldung.com/spring-deny-access. What you are wanting is there :)","body":"See this -&gt; <a href=\"https://www.baeldung.com/spring-deny-access\" rel=\"nofollow noreferrer\">baeldung.com/spring-deny-access</a>. What you are wanting is there :)"},{"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"score":1,"creation_date":1697112920,"post_id":77280308,"comment_id":136240356,"body_markdown":"Thanks for the link. I am still deciding if I love or hate their solution :-D","body":"Thanks for the link. I am still deciding if I love or hate their solution :-D"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1697113359,"post_id":77280308,"comment_id":136240442,"body_markdown":"@LeosLiterak LOL :D","body":"@LeosLiterak LOL :D"}],"answers":[{"comments":[{"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"score":0,"creation_date":1697115424,"post_id":77280594,"comment_id":136240892,"body_markdown":"nice approach, thanks","body":"nice approach, thanks"}],"tags":[],"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697114075,"creation_date":1697113768,"answer_id":77280594,"question_id":77280308,"body_markdown":"This cannot easily be checked with Spring Security as far as I know, and would likely require some (ugly) reflection (which can be seen in [this article](https://www.baeldung.com/spring-deny-access)). \r\n\r\nAn alternative is to write a unit test for this with [ArchUnit](https://www.archunit.org/). ArchUnit has a clean(er) API, and has the benefit that you can run this during your test-phase rather than having to run or deploy your application first, and then rely on end users noticing some forbidden error.\r\n\r\nSuch a test would look something like this:\r\n\r\n```java\r\n@Test\r\nvoid ensureEachControllerHasPreAuthorize() {\r\n    JavaClasses importedClasses = new ClassFileImporter().importPackages(&quot;com.example.demo&quot;);\r\n    ArchRule rule = methods().that()\r\n        .areMetaAnnotatedWith(RequestMapping.class)\r\n        .and().areDeclaredInClassesThat().areMetaAnnotatedWith(Controller.class)\r\n        .should().beAnnotatedWith(PreAuthorize.class)\r\n        .orShould().beDeclaredInClassesThat().areAnnotatedWith(PreAuthorize.class);\r\n    rule.check(importedClasses);\r\n}\r\n```\r\n\r\nSome remarks:\r\n\r\n* The `areMetaAnnotatedWith(RequestMapping.class)` includes both `@RequestMapping` and variants like `@GetMapping`, `@PostMapping`, ... .\r\n* Same applies to the `areMetaAnnotatedWith(Controller.class)` which includes both `@Controller` and `@RestController`.\r\n* I&#39;m allowing both controller methods and classes to be annotated with `@PreAuthorize`. If you only want to pass the test if `@PreAuthorize` is applied on method-level and not at class-level, then you can remove the line that starts with `orShould()`.\r\n* ArchUnit isn&#39;t included by default in any of the Spring Boot starters. You&#39;ll have to include the dependency by yourself.","title":"Deny all URLs unless enabled by annotation","body":"<p>This cannot easily be checked with Spring Security as far as I know, and would likely require some (ugly) reflection (which can be seen in <a href=\"https://www.baeldung.com/spring-deny-access\" rel=\"nofollow noreferrer\">this article</a>).</p>\n<p>An alternative is to write a unit test for this with <a href=\"https://www.archunit.org/\" rel=\"nofollow noreferrer\">ArchUnit</a>. ArchUnit has a clean(er) API, and has the benefit that you can run this during your test-phase rather than having to run or deploy your application first, and then rely on end users noticing some forbidden error.</p>\n<p>Such a test would look something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid ensureEachControllerHasPreAuthorize() {\n    JavaClasses importedClasses = new ClassFileImporter().importPackages(&quot;com.example.demo&quot;);\n    ArchRule rule = methods().that()\n        .areMetaAnnotatedWith(RequestMapping.class)\n        .and().areDeclaredInClassesThat().areMetaAnnotatedWith(Controller.class)\n        .should().beAnnotatedWith(PreAuthorize.class)\n        .orShould().beDeclaredInClassesThat().areAnnotatedWith(PreAuthorize.class);\n    rule.check(importedClasses);\n}\n</code></pre>\n<p>Some remarks:</p>\n<ul>\n<li>The <code>areMetaAnnotatedWith(RequestMapping.class)</code> includes both <code>@RequestMapping</code> and variants like <code>@GetMapping</code>, <code>@PostMapping</code>, ... .</li>\n<li>Same applies to the <code>areMetaAnnotatedWith(Controller.class)</code> which includes both <code>@Controller</code> and <code>@RestController</code>.</li>\n<li>I'm allowing both controller methods and classes to be annotated with <code>@PreAuthorize</code>. If you only want to pass the test if <code>@PreAuthorize</code> is applied on method-level and not at class-level, then you can remove the line that starts with <code>orShould()</code>.</li>\n<li>ArchUnit isn't included by default in any of the Spring Boot starters. You'll have to include the dependency by yourself.</li>\n</ul>\n"}],"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697114075,"creation_date":1697111350,"question_id":77280308,"body_markdown":"I want to deny all requests in Spring boot app unless their method level annotation is fulfilled. \r\n\r\n    @Bean\r\n    public SecurityFilterChain configure(final HttpSecurity http) throws Exception {\r\n        return http.cors(withDefaults())\r\n                .csrf(AbstractHttpConfigurer::disable)\r\n                .authorizeHttpRequests()\r\n                .antMatchers(&quot;/login&quot;).permitAll()\r\n                .anyRequest().denyAll()\r\n                .and()\r\n                .sessionManagement((session) -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .addFilterBefore(bamRequestFilter, UsernamePasswordAuthenticationFilter.class)\r\n                .build();\r\n    }\r\n\r\n    @PutMapping(path = &quot;/getInfo&quot;)\r\n    @PreAuthorize(&quot;hasAnyAuthority(&#39;GET&#39;)&quot;)\r\n    public ActionResult getInfo(@RequestBody Map&lt;String, String&gt; input) {\r\n        return service.getInfo(input);\r\n    }\r\n\r\nThis actually denies the correct user. When I change `.anyRequest().denyAll()` to `.anyRequest().authenticated()` then this controller works, but other controllers are allowed. I want all developers to explicitly configure the security at individual methods.\r\n","title":"Deny all URLs unless enabled by annotation","body":"<p>I want to deny all requests in Spring boot app unless their method level annotation is fulfilled.</p>\n<pre><code>@Bean\npublic SecurityFilterChain configure(final HttpSecurity http) throws Exception {\n    return http.cors(withDefaults())\n            .csrf(AbstractHttpConfigurer::disable)\n            .authorizeHttpRequests()\n            .antMatchers(&quot;/login&quot;).permitAll()\n            .anyRequest().denyAll()\n            .and()\n            .sessionManagement((session) -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n            .addFilterBefore(bamRequestFilter, UsernamePasswordAuthenticationFilter.class)\n            .build();\n}\n\n@PutMapping(path = &quot;/getInfo&quot;)\n@PreAuthorize(&quot;hasAnyAuthority('GET')&quot;)\npublic ActionResult getInfo(@RequestBody Map&lt;String, String&gt; input) {\n    return service.getInfo(input);\n}\n</code></pre>\n<p>This actually denies the correct user. When I change <code>.anyRequest().denyAll()</code> to <code>.anyRequest().authenticated()</code> then this controller works, but other controllers are allowed. I want all developers to explicitly configure the security at individual methods.</p>\n"},{"tags":["java","spring","maven","jboss"],"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1697211572,"post_id":77280587,"comment_id":136255762,"body_markdown":"What container are you running in?","body":"What container are you running in?"},{"owner":{"account_id":29656346,"reputation":1,"user_id":22729028,"display_name":"DeepFuel3734"},"score":0,"creation_date":1697713808,"post_id":77280587,"comment_id":136315838,"body_markdown":"I can now successfully start the jboss server without any error. My jar file should not have a dependent library but need to declare the dependecies in module.xml.","body":"I can now successfully start the jboss server without any error. My jar file should not have a dependent library but need to declare the dependecies in module.xml."}],"owner":{"account_id":29656346,"reputation":1,"user_id":22729028,"display_name":"DeepFuel3734"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697113732,"creation_date":1697113732,"question_id":77280587,"body_markdown":"I have provided a JAR file to the client and then they put it in their server. Whenever they tried to start the JBoss server, this error occurs. But when we do a rollback, all is fine.\r\n\r\n[enter image description here](https://i.stack.imgur.com/KcZBb.png)\r\n\r\n\r\n\r\nThe JAR file I have provided was tested in my laptop using the java -jar (name).jar to make sure that my JAR is not encountering an error upon execution.","title":"com/fasterxml/jackson/module/jaxb/JaxbAnnotationModule is not assignable to com/fasterxml/jackson/databind/module","body":"<p>I have provided a JAR file to the client and then they put it in their server. Whenever they tried to start the JBoss server, this error occurs. But when we do a rollback, all is fine.</p>\n<p><a href=\"https://i.stack.imgur.com/KcZBb.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>The JAR file I have provided was tested in my laptop using the java -jar (name).jar to make sure that my JAR is not encountering an error upon execution.</p>\n"},{"tags":["java","ssh","sftp","jsch"],"comments":[{"owner":{"account_id":4492754,"reputation":103,"user_id":3653457,"display_name":"jonesk"},"score":0,"creation_date":1697138040,"post_id":77280584,"comment_id":136245616,"body_markdown":"The error occurs sporadically, which makes me think maybe its something with the server its trying to connect to.","body":"The error occurs sporadically, which makes me think maybe its something with the server its trying to connect to."}],"owner":{"account_id":4492754,"reputation":103,"user_id":3653457,"display_name":"jonesk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697113714,"creation_date":1697113714,"question_id":77280584,"body_markdown":"&gt; java.lang.NullPointerException at\r\n&gt; com.jcraft.jsch.KeyExchange.verify(KeyExchange.java:368) at\r\n&gt; com.jcraft.jsch.DHECN.next(DHECN.java:178) at\r\n&gt; com.jcraft.jsch.Session.connect(Session.java:330)\r\n\r\n\r\n            JSch jsch = new JSch();\r\n            \r\n            if (sshKeyData != null) {\r\n                jsch.addIdentity(null, sshKeyData.getBytes(), null, sshPassphrase != null ? sshPassphrase.getBytes() : null);\r\n            } else if (sshKeyPath != null) {\r\n                jsch.addIdentity(sshKeyPath, sshPassphrase != null ? sshPassphrase.getBytes() : null);\r\n            }\r\n            \r\n            session = jsch.getSession(userName, host, port);\r\n            if (password != null) {\r\n                session.setPassword(password);\r\n            }\r\n            session.setConfig(&quot;kex&quot;, JSCH_COMPAT_KEX);\r\n            session.setConfig(&quot;server_host_key&quot;, JSCH_COMPAT_SERVER_HOST_KEY);\r\n            session.setConfig(&quot;cipher.s2c&quot;, JSCH_COMPAT_CIPHER_S2C);\r\n            session.setConfig(&quot;cipher.c2s&quot;, JSCH_COMPAT_CIPHER_C2S);\r\n            session.setConfig(&quot;mac.s2c&quot;, JSCH_COMPAT_MAC_S2C);\r\n            session.setConfig(&quot;mac.c2s&quot;, JSCH_COMPAT_MAC_C2S);\r\n            session.setConfig(&quot;CheckCiphers&quot;, JSCH_COMPAT_CHECK_CIPHERS);\r\n            session.setConfig(&quot;CheckSignatures&quot;, JSCH_COMPAT_CHECK_SIGNATURES);\r\n            session.setConfig(&quot;CheckKexes&quot;, JSCH_COMPAT_CHECK_KEX);\r\n            session.setConfig(&quot;CheckMacs&quot;, JSCH_COMPAT_CHECK_MACS);\r\n            session.setConfig(&quot;PreferredAuthentications&quot;, &quot;publickey,keyboard-interactive,password&quot;);            \r\n            session.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\r\n            session.connect(60000);","title":"What would cause com.jcraft.jsch.KeyExchange.verify throws null pointer when calling session.connect()","body":"<blockquote>\n<p>java.lang.NullPointerException at\ncom.jcraft.jsch.KeyExchange.verify(KeyExchange.java:368) at\ncom.jcraft.jsch.DHECN.next(DHECN.java:178) at\ncom.jcraft.jsch.Session.connect(Session.java:330)</p>\n</blockquote>\n<pre><code>        JSch jsch = new JSch();\n        \n        if (sshKeyData != null) {\n            jsch.addIdentity(null, sshKeyData.getBytes(), null, sshPassphrase != null ? sshPassphrase.getBytes() : null);\n        } else if (sshKeyPath != null) {\n            jsch.addIdentity(sshKeyPath, sshPassphrase != null ? sshPassphrase.getBytes() : null);\n        }\n        \n        session = jsch.getSession(userName, host, port);\n        if (password != null) {\n            session.setPassword(password);\n        }\n        session.setConfig(&quot;kex&quot;, JSCH_COMPAT_KEX);\n        session.setConfig(&quot;server_host_key&quot;, JSCH_COMPAT_SERVER_HOST_KEY);\n        session.setConfig(&quot;cipher.s2c&quot;, JSCH_COMPAT_CIPHER_S2C);\n        session.setConfig(&quot;cipher.c2s&quot;, JSCH_COMPAT_CIPHER_C2S);\n        session.setConfig(&quot;mac.s2c&quot;, JSCH_COMPAT_MAC_S2C);\n        session.setConfig(&quot;mac.c2s&quot;, JSCH_COMPAT_MAC_C2S);\n        session.setConfig(&quot;CheckCiphers&quot;, JSCH_COMPAT_CHECK_CIPHERS);\n        session.setConfig(&quot;CheckSignatures&quot;, JSCH_COMPAT_CHECK_SIGNATURES);\n        session.setConfig(&quot;CheckKexes&quot;, JSCH_COMPAT_CHECK_KEX);\n        session.setConfig(&quot;CheckMacs&quot;, JSCH_COMPAT_CHECK_MACS);\n        session.setConfig(&quot;PreferredAuthentications&quot;, &quot;publickey,keyboard-interactive,password&quot;);            \n        session.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\n        session.connect(60000);\n</code></pre>\n"},{"tags":["java","apache-spark","join","multiple-columns","apache-spark-dataset"],"comments":[{"owner":{"account_id":11741096,"reputation":9150,"user_id":8593414,"display_name":"Srinivas"},"score":0,"creation_date":1697113623,"post_id":77279946,"comment_id":136240484,"body_markdown":"Please add sample input &amp; expected output .. it will helpful to answer your question clearly.","body":"Please add sample input &amp; expected output .. it will helpful to answer your question clearly."}],"owner":{"account_id":27242510,"reputation":31,"user_id":20768437,"display_name":"Raging Horse"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697113568,"creation_date":1697108017,"question_id":77279946,"body_markdown":"I have a dataframe of a csv file ```Dataset&lt;Row&gt; fileDf ``` that looks like -\r\n```lang-none\r\n|COUNTRY_ID|COUNTRY_NAME|REGION_ID|\r\n|----------|------------|---------|\r\n|AR        |Argentina   |        2|\r\n|AU        |Australia   |        3|\r\n|BE        |Belgium     |        1|\r\n|BR        |Brazil      |        2|\r\n```\r\nI will have multiple single column dataframes (each dataframe corresponds to a single column values) from other csv files\r\n```Dataset&lt;Row&gt; singleColumnDf1```\r\n```lang-none\r\n|NAMES                   |\r\n|------------------------|\r\n|Argentina               |\r\n|Australia               |\r\n|Belgium                 |\r\n|Brazil                  |\r\n```\r\n```Dataset&lt;Row&gt; singleColumnDf2 ```\r\n```lang-none\r\n|IDs      |\r\n|---------|\r\n|        2|\r\n|        3|\r\n|        1|\r\n|        2|\r\n```\r\nand so on.\r\nI want to take singleColumnDf1 and do join operation with fileDf and find out what columns contains the values from singleColumnDf1 and display the column names. Similarly I want to do the same with singleColumnDf2 and so on. \r\nAs the fileDf will be constant I want to make join only once beacuse I dont want the overhead, because my main focus is performance and then get the matched column names and I want the result that tells me what columns from fileDf are matched what columns of singleColumnDfs.\r\n```\r\nFor Example I want the final result to be-&gt;\r\n\r\n*for singleColumnDf1 the matched column is COUNTRY_NAME,*\r\n\r\n*for singleColumnDf2 the matched column is COUNTRY_ID*\r\n```\r\nIs this possible to do in spark can i combine the two singleColumnDfs together and do join once with fileDf and get the results using keys do differentiate the results? Or should I do join for each and every singleColumnDf?","title":"How to compare all columns values in a csv file with multiple other column values by doing join only once in spark java","body":"<p>I have a dataframe of a csv file <code>Dataset&lt;Row&gt; fileDf </code> that looks like -</p>\n<pre class=\"lang-none prettyprint-override\"><code>|COUNTRY_ID|COUNTRY_NAME|REGION_ID|\n|----------|------------|---------|\n|AR        |Argentina   |        2|\n|AU        |Australia   |        3|\n|BE        |Belgium     |        1|\n|BR        |Brazil      |        2|\n</code></pre>\n<p>I will have multiple single column dataframes (each dataframe corresponds to a single column values) from other csv files\n<code>Dataset&lt;Row&gt; singleColumnDf1</code></p>\n<pre class=\"lang-none prettyprint-override\"><code>|NAMES                   |\n|------------------------|\n|Argentina               |\n|Australia               |\n|Belgium                 |\n|Brazil                  |\n</code></pre>\n<p><code>Dataset&lt;Row&gt; singleColumnDf2 </code></p>\n<pre class=\"lang-none prettyprint-override\"><code>|IDs      |\n|---------|\n|        2|\n|        3|\n|        1|\n|        2|\n</code></pre>\n<p>and so on.\nI want to take singleColumnDf1 and do join operation with fileDf and find out what columns contains the values from singleColumnDf1 and display the column names. Similarly I want to do the same with singleColumnDf2 and so on.\nAs the fileDf will be constant I want to make join only once beacuse I dont want the overhead, because my main focus is performance and then get the matched column names and I want the result that tells me what columns from fileDf are matched what columns of singleColumnDfs.</p>\n<pre><code>For Example I want the final result to be-&gt;\n\n*for singleColumnDf1 the matched column is COUNTRY_NAME,*\n\n*for singleColumnDf2 the matched column is COUNTRY_ID*\n</code></pre>\n<p>Is this possible to do in spark can i combine the two singleColumnDfs together and do join once with fileDf and get the results using keys do differentiate the results? Or should I do join for each and every singleColumnDf?</p>\n"},{"tags":["java","jax-ws"],"answers":[{"tags":[],"owner":{"account_id":8405686,"reputation":764,"user_id":6309242,"display_name":"Dave The Dane"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697113105,"creation_date":1697113105,"answer_id":77280516,"question_id":77271201,"body_markdown":"ok, the solution was...\r\n\r\n    HttpsURLConnection.setDefaultSSLSocketFactory(getCustomSSLSocketFactory());\r\n\r\n`getCustomSSLSocketFactory()` wasn&#39;t too long-winded either.\r\n\r\nHere&#39;s a working example:\r\n\r\n    package uk.co.sslws6001.server;\r\n    \r\n    import java.io.FileInputStream;\r\n    import java.net.InetSocketAddress;\r\n    import java.net.Socket;\r\n    import java.net.URL;\r\n    import java.security.KeyStore;\r\n    import java.security.SecureRandom;\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.CertificateFactory;\r\n    import java.security.cert.X509Certificate;\r\n    import java.util.Date;\r\n    import java.util.HexFormat;\r\n    import java.util.LinkedList;\r\n    import java.util.Optional;\r\n    \r\n    import javax.net.ssl.HttpsURLConnection;\r\n    import javax.net.ssl.KeyManagerFactory;\r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.SSLEngine;\r\n    import javax.net.ssl.SSLSocketFactory;\r\n    import javax.net.ssl.TrustManager;\r\n    import javax.net.ssl.TrustManagerFactory;\r\n    import javax.net.ssl.X509ExtendedTrustManager;\r\n    import javax.xml.namespace.QName;\r\n    \r\n    import com.sun.net.httpserver.HttpsConfigurator;\r\n    import com.sun.net.httpserver.HttpsServer;\r\n    \r\n    import jakarta.jws.WebParam;\r\n    import jakarta.jws.WebService;\r\n    import jakarta.xml.ws.Endpoint;\r\n    import jakarta.xml.ws.Service;\r\n    \r\n    public class WS {\r\n    \t@WebService\r\n    \tpublic interface MyWebService {\r\n    \t\tpublic String             toHexDigits(@WebParam(name=&quot;intValue&quot;) final int intValue);\r\n    \t}\r\n    \t@WebService(endpointInterface=                       &quot;uk.co.sslws6001.server.WS$MyWebService&quot;)\r\n    \tpublic static final class MyWebServiceImpl implements uk.co.sslws6001.server.WS.MyWebService {\r\n    \t\t@Override\r\n    \t\tpublic String             toHexDigits(final int intValue) {\r\n    \t\t\treturn HexFormat.of().toHexDigits(          intValue);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t/*\r\n    \t * Keystore &amp; Certificate created thus:\r\n    \t * keytool.exe  -genkeypair  -alias self_signed  -keystore keystore.password.p12  -storepass password  -keypass password  -keyalg RSA  -validity 99999  -storetype PKCS12\r\n    \t * keytool.exe  -export      -alias self_signed  -keystore keystore.password.p12  -storepass password  -file keystore.password.cer\r\n    \t */\r\n    \tprivate static HttpsServer createHttpsServer() throws Exception {\r\n    \r\n    \t\tfinal     var pw  =                      &quot;password&quot;.toCharArray();\r\n    \t\tfinal     var ks  = KeyStore.getInstance(&quot;pkcs12&quot;);\r\n    \r\n    \t\ttry(final var fis = new FileInputStream (&quot;keystore.password.p12&quot;)) {\r\n    \t\t\t;         ks.load(fis, pw);\r\n    \t\t}\r\n    \t\tfinal     var kmf = KeyManagerFactory  .getInstance(&quot;SunX509&quot;);\r\n    \t\t;             kmf.init(ks, pw);\r\n    \r\n    \t\tfinal     var tmf = TrustManagerFactory.getInstance(&quot;SunX509&quot;);\r\n    \t\t;             tmf.init(ks);\r\n    \r\n    \t\tfinal     var sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n    \t\t;             sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);\r\n    \r\n    \t\tfinal     var httpsServer =  HttpsServer.create(new InetSocketAddress(&quot;localhost&quot;, 6001), 0);\r\n    \t\t;             httpsServer.setHttpsConfigurator (new HttpsConfigurator(sslContext));\r\n    \r\n    \t\treturn        httpsServer;\r\n    \t}\r\n    \r\n    \tpublic  static void main(final String[] args) throws Exception {\r\n    \r\n    \t\tfinal var httpsAddress  = &quot;/uk/co/sslws6001/server/MyWebService&quot;;\r\n    \t\tfinal var implementor   = new MyWebServiceImpl();\r\n    \r\n    \t\tSystem.out.println(&quot;publishing.........: &quot; + httpsAddress + &quot;\\t-&gt; &quot; + implementor);\r\n    \r\n    \t\tfinal var httpsServer   = createHttpsServer();\r\n    \r\n    \t\tfinal var httpsContext  = httpsServer.createContext(httpsAddress);\r\n    \t\tfinal var httpsEndpoint = Endpoint.create(implementor);\r\n    \t\t;         httpsEndpoint.publish(httpsContext);\r\n    \t\ttry {\r\n    \t\t\thttpsServer.start();\r\n    \r\n    \t\t\tSystem.out.println(&quot;https Server up....: &quot; + httpsServer);\r\n    \r\n    \t\t\ttestClient();\r\n    \t\t}\r\n    \t\tfinally {\r\n    \t\t\thttpsServer.stop(3);\r\n    \t\t\tSystem.out.println(&quot;https Server DOWN...&quot;);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate static void testClient() throws Exception {\r\n    \t\tSystem.out.println(&quot;Test Client.........&quot;);\r\n    \r\n    \t\tHttpsURLConnection.setDefaultSSLSocketFactory(getCustomSSLSocketFactory());\r\n    \r\n    \t\tfinal var serviceQName   = new QName(&quot;http://server.sslws6001.co.uk/&quot;, &quot;MyWebServiceImplService&quot;);\r\n    \r\n    \t\tfinal var serviceWsdlURL = new URL  (&quot;https://localhost:6001/uk/co/sslws6001/server/MyWebService?wsdl&quot;);\r\n    \r\n    \t\tfinal var service        = Service.create(serviceWsdlURL, serviceQName);\r\n    \t\tfinal var serviceProxy   = service.getPort(uk.co.sslws6001.server.WS.MyWebService.class);\r\n    \r\n    \t\tSystem.out.println(&quot;Service............: &quot; + service);\r\n    \t\tSystem.out.println(&quot;Service Proxy......: &quot; + serviceProxy);\r\n    \r\n    \t\tSystem.out.println(&quot;Result Hex Digits..: &quot; + serviceProxy.toHexDigits((int) System.currentTimeMillis()));\r\n    \t}\r\n    \r\n    \tprivate static SSLSocketFactory getCustomSSLSocketFactory() throws Exception {\r\n    \r\n    \t\tfinal var sslContext    = SSLContext.getInstance(&quot;TLS&quot;);\r\n    \t\t;         sslContext.init(null, new TrustManager[] {getCustomTrustManager()}, new SecureRandom());\r\n    \r\n    \t\tfinal var socketFactory = sslContext.getSocketFactory();\r\n    \r\n    \t\tSystem.out.println(&quot;Custom SockFactory.: &quot; + socketFactory);\r\n    \r\n    \t\treturn    socketFactory;\r\n    \t}\r\n    \r\n    \tprivate static X509ExtendedTrustManager getCustomTrustManager() {\r\n    \r\n    \t\tfinal var okCerts = new LinkedList&lt;X509Certificate&gt;();\r\n    \r\n    \t\tgetServerPublicCertificate().ifPresent(okCerts :: add);\r\n    \r\n    \t\treturn new X509ExtendedTrustManager() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic X509Certificate[] getAcceptedIssuers() {\r\n    \t\t\t\treturn new java.security.cert.X509Certificate[0];\r\n    \t\t\t}\r\n    \t\t\t@Override\r\n    \t\t\tpublic void checkClientTrusted(final X509Certificate[] chain, final String authType)                         throws CertificateException {\r\n    \t\t\t\tthrow new UnsupportedOperationException();\r\n    \t\t\t}\r\n    \t\t\t@Override\r\n    \t\t\tpublic void checkServerTrusted(final X509Certificate[] chain, final String authType)                         throws CertificateException {\r\n    \t\t\t\tthrow new UnsupportedOperationException();\r\n    \t\t\t}\r\n    \t\t\t@Override\r\n    \t\t\tpublic void checkClientTrusted(final X509Certificate[] chain, final String authType, final Socket socket)    throws CertificateException {\r\n    \t\t\t\tthrow new UnsupportedOperationException();\r\n    \t\t\t}\r\n    \t\t\t@Override\r\n    \t\t\tpublic void checkServerTrusted(final X509Certificate[] chain, final String authType, final Socket socket)    throws CertificateException {\r\n    \t\t\t\tSystem.out.println(&quot;checkServerTrusted.: chain=&quot; + chain + &quot; authType=&quot; + authType + &quot; socket=&quot; + socket);\r\n    \r\n    \t\t\t\tfor (    final var suppliedCert : chain) {\r\n    \t\t\t\t\tfor (final var okCert       : okCerts) {\r\n    \r\n    \t\t\t\t\t\tif (suppliedCert.equals(okCert)) {\r\n    \t\t\t\t\t\t\tSystem.out.println(&quot;Certificate ok.....: id=&quot; + suppliedCert.getSerialNumber());\r\n    \t\t\t\t\t\t\treturn;\r\n    \t\t\t\t\t\t} else {\r\n    \t\t\t\t\t\t\tSystem.out.println(&quot;Certificate BAD....: id=&quot; + suppliedCert.getSerialNumber());\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\tthrow new CertificateException(&quot;Bad Karma!&quot;);\r\n    \t\t\t}\r\n    \t\t\t@Override\r\n    \t\t\tpublic void checkClientTrusted(final X509Certificate[] chain, final String authType, final SSLEngine engine) throws CertificateException {\r\n    \t\t\t\tthrow new UnsupportedOperationException();\r\n    \t\t\t}\r\n    \t\t\t@Override\r\n    \t\t\tpublic void checkServerTrusted(final X509Certificate[] chain, final String authType, final SSLEngine engine) throws CertificateException {\r\n    \t\t\t\tthrow new UnsupportedOperationException();\r\n    \t\t\t}\r\n    \t\t};\r\n    \t}\r\n    \r\n    \tprivate static Optional&lt;X509Certificate&gt; getServerPublicCertificate() {\r\n    \r\n    \t\ttry(final var is   = new FileInputStream(&quot;keystore.password.cer&quot;)) {\r\n    \r\n    \t\t\tfinal var fac  = CertificateFactory.getInstance(&quot;X509&quot;);\r\n    \t\t\tfinal var cert = (X509Certificate) fac.generateCertificate(is);\r\n    \r\n    \t\t\tSystem.out.print  (&quot;Server Public Cert.: sn=&quot; + cert.getSerialNumber());\r\n    \t\t\tSystem.out.println(      &quot; -&gt; Validity.: &quot; + cert.getNotBefore() + &quot; to &quot; + cert.getNotAfter());\r\n    \r\n    \t\t\tfinal var now = new Date();\r\n    \r\n    \t\t\tif (now.before(cert.getNotBefore())\r\n    \t\t\t||  now.after (cert.getNotAfter())) {\r\n    \t\t\t\tSystem.out.println(&quot;Certificate INVALID: sn=&quot; + cert.getSerialNumber());\r\n    \t\t\t\treturn Optional.empty();\r\n    \t\t\t}\r\n    \t\t\treturn     Optional.of(cert);\r\n    \t\t}\r\n    \t\tcatch (final Exception e) {\r\n    \t\t\treturn     Optional.empty();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n","title":"Simple Config for POJO https Client using JAX WS","body":"<p>ok, the solution was...</p>\n<pre><code>HttpsURLConnection.setDefaultSSLSocketFactory(getCustomSSLSocketFactory());\n</code></pre>\n<p><code>getCustomSSLSocketFactory()</code> wasn't too long-winded either.</p>\n<p>Here's a working example:</p>\n<pre><code>package uk.co.sslws6001.server;\n\nimport java.io.FileInputStream;\nimport java.net.InetSocketAddress;\nimport java.net.Socket;\nimport java.net.URL;\nimport java.security.KeyStore;\nimport java.security.SecureRandom;\nimport java.security.cert.CertificateException;\nimport java.security.cert.CertificateFactory;\nimport java.security.cert.X509Certificate;\nimport java.util.Date;\nimport java.util.HexFormat;\nimport java.util.LinkedList;\nimport java.util.Optional;\n\nimport javax.net.ssl.HttpsURLConnection;\nimport javax.net.ssl.KeyManagerFactory;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.SSLEngine;\nimport javax.net.ssl.SSLSocketFactory;\nimport javax.net.ssl.TrustManager;\nimport javax.net.ssl.TrustManagerFactory;\nimport javax.net.ssl.X509ExtendedTrustManager;\nimport javax.xml.namespace.QName;\n\nimport com.sun.net.httpserver.HttpsConfigurator;\nimport com.sun.net.httpserver.HttpsServer;\n\nimport jakarta.jws.WebParam;\nimport jakarta.jws.WebService;\nimport jakarta.xml.ws.Endpoint;\nimport jakarta.xml.ws.Service;\n\npublic class WS {\n    @WebService\n    public interface MyWebService {\n        public String             toHexDigits(@WebParam(name=&quot;intValue&quot;) final int intValue);\n    }\n    @WebService(endpointInterface=                       &quot;uk.co.sslws6001.server.WS$MyWebService&quot;)\n    public static final class MyWebServiceImpl implements uk.co.sslws6001.server.WS.MyWebService {\n        @Override\n        public String             toHexDigits(final int intValue) {\n            return HexFormat.of().toHexDigits(          intValue);\n        }\n    }\n\n    /*\n     * Keystore &amp; Certificate created thus:\n     * keytool.exe  -genkeypair  -alias self_signed  -keystore keystore.password.p12  -storepass password  -keypass password  -keyalg RSA  -validity 99999  -storetype PKCS12\n     * keytool.exe  -export      -alias self_signed  -keystore keystore.password.p12  -storepass password  -file keystore.password.cer\n     */\n    private static HttpsServer createHttpsServer() throws Exception {\n\n        final     var pw  =                      &quot;password&quot;.toCharArray();\n        final     var ks  = KeyStore.getInstance(&quot;pkcs12&quot;);\n\n        try(final var fis = new FileInputStream (&quot;keystore.password.p12&quot;)) {\n            ;         ks.load(fis, pw);\n        }\n        final     var kmf = KeyManagerFactory  .getInstance(&quot;SunX509&quot;);\n        ;             kmf.init(ks, pw);\n\n        final     var tmf = TrustManagerFactory.getInstance(&quot;SunX509&quot;);\n        ;             tmf.init(ks);\n\n        final     var sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n        ;             sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);\n\n        final     var httpsServer =  HttpsServer.create(new InetSocketAddress(&quot;localhost&quot;, 6001), 0);\n        ;             httpsServer.setHttpsConfigurator (new HttpsConfigurator(sslContext));\n\n        return        httpsServer;\n    }\n\n    public  static void main(final String[] args) throws Exception {\n\n        final var httpsAddress  = &quot;/uk/co/sslws6001/server/MyWebService&quot;;\n        final var implementor   = new MyWebServiceImpl();\n\n        System.out.println(&quot;publishing.........: &quot; + httpsAddress + &quot;\\t-&gt; &quot; + implementor);\n\n        final var httpsServer   = createHttpsServer();\n\n        final var httpsContext  = httpsServer.createContext(httpsAddress);\n        final var httpsEndpoint = Endpoint.create(implementor);\n        ;         httpsEndpoint.publish(httpsContext);\n        try {\n            httpsServer.start();\n\n            System.out.println(&quot;https Server up....: &quot; + httpsServer);\n\n            testClient();\n        }\n        finally {\n            httpsServer.stop(3);\n            System.out.println(&quot;https Server DOWN...&quot;);\n        }\n    }\n\n    private static void testClient() throws Exception {\n        System.out.println(&quot;Test Client.........&quot;);\n\n        HttpsURLConnection.setDefaultSSLSocketFactory(getCustomSSLSocketFactory());\n\n        final var serviceQName   = new QName(&quot;http://server.sslws6001.co.uk/&quot;, &quot;MyWebServiceImplService&quot;);\n\n        final var serviceWsdlURL = new URL  (&quot;https://localhost:6001/uk/co/sslws6001/server/MyWebService?wsdl&quot;);\n\n        final var service        = Service.create(serviceWsdlURL, serviceQName);\n        final var serviceProxy   = service.getPort(uk.co.sslws6001.server.WS.MyWebService.class);\n\n        System.out.println(&quot;Service............: &quot; + service);\n        System.out.println(&quot;Service Proxy......: &quot; + serviceProxy);\n\n        System.out.println(&quot;Result Hex Digits..: &quot; + serviceProxy.toHexDigits((int) System.currentTimeMillis()));\n    }\n\n    private static SSLSocketFactory getCustomSSLSocketFactory() throws Exception {\n\n        final var sslContext    = SSLContext.getInstance(&quot;TLS&quot;);\n        ;         sslContext.init(null, new TrustManager[] {getCustomTrustManager()}, new SecureRandom());\n\n        final var socketFactory = sslContext.getSocketFactory();\n\n        System.out.println(&quot;Custom SockFactory.: &quot; + socketFactory);\n\n        return    socketFactory;\n    }\n\n    private static X509ExtendedTrustManager getCustomTrustManager() {\n\n        final var okCerts = new LinkedList&lt;X509Certificate&gt;();\n\n        getServerPublicCertificate().ifPresent(okCerts :: add);\n\n        return new X509ExtendedTrustManager() {\n            @Override\n            public X509Certificate[] getAcceptedIssuers() {\n                return new java.security.cert.X509Certificate[0];\n            }\n            @Override\n            public void checkClientTrusted(final X509Certificate[] chain, final String authType)                         throws CertificateException {\n                throw new UnsupportedOperationException();\n            }\n            @Override\n            public void checkServerTrusted(final X509Certificate[] chain, final String authType)                         throws CertificateException {\n                throw new UnsupportedOperationException();\n            }\n            @Override\n            public void checkClientTrusted(final X509Certificate[] chain, final String authType, final Socket socket)    throws CertificateException {\n                throw new UnsupportedOperationException();\n            }\n            @Override\n            public void checkServerTrusted(final X509Certificate[] chain, final String authType, final Socket socket)    throws CertificateException {\n                System.out.println(&quot;checkServerTrusted.: chain=&quot; + chain + &quot; authType=&quot; + authType + &quot; socket=&quot; + socket);\n\n                for (    final var suppliedCert : chain) {\n                    for (final var okCert       : okCerts) {\n\n                        if (suppliedCert.equals(okCert)) {\n                            System.out.println(&quot;Certificate ok.....: id=&quot; + suppliedCert.getSerialNumber());\n                            return;\n                        } else {\n                            System.out.println(&quot;Certificate BAD....: id=&quot; + suppliedCert.getSerialNumber());\n                        }\n                    }\n                }\n                throw new CertificateException(&quot;Bad Karma!&quot;);\n            }\n            @Override\n            public void checkClientTrusted(final X509Certificate[] chain, final String authType, final SSLEngine engine) throws CertificateException {\n                throw new UnsupportedOperationException();\n            }\n            @Override\n            public void checkServerTrusted(final X509Certificate[] chain, final String authType, final SSLEngine engine) throws CertificateException {\n                throw new UnsupportedOperationException();\n            }\n        };\n    }\n\n    private static Optional&lt;X509Certificate&gt; getServerPublicCertificate() {\n\n        try(final var is   = new FileInputStream(&quot;keystore.password.cer&quot;)) {\n\n            final var fac  = CertificateFactory.getInstance(&quot;X509&quot;);\n            final var cert = (X509Certificate) fac.generateCertificate(is);\n\n            System.out.print  (&quot;Server Public Cert.: sn=&quot; + cert.getSerialNumber());\n            System.out.println(      &quot; -&gt; Validity.: &quot; + cert.getNotBefore() + &quot; to &quot; + cert.getNotAfter());\n\n            final var now = new Date();\n\n            if (now.before(cert.getNotBefore())\n            ||  now.after (cert.getNotAfter())) {\n                System.out.println(&quot;Certificate INVALID: sn=&quot; + cert.getSerialNumber());\n                return Optional.empty();\n            }\n            return     Optional.of(cert);\n        }\n        catch (final Exception e) {\n            return     Optional.empty();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":8405686,"reputation":764,"user_id":6309242,"display_name":"Dave The Dane"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77280516,"answer_count":1,"score":-1,"last_activity_date":1697113105,"creation_date":1697011335,"question_id":77271201,"body_markdown":"I&#39;m trying to get a simple POJO https Client/Server implementation running with JAX-WS.\r\n\r\nThe Server side seems to be running fine &amp; was fairly simple, but I haven&#39;t found how to configure the Client in a simple fashion.\r\n\r\nI&#39;ve got it to work with a couple of Properties to include the Servers Keystore.&lt;br&gt;\r\nBut, of course, that&#39;s only good for testing.\r\n\r\nAny ideas?\r\n\r\nI&#39;m using JDK 17 with Eclipse 2023-09.\r\n\r\nSee comments in Source for details of Keystore &amp; Certificate.\r\n\r\nFor convenience, I&#39;ve posted them to paste.c-net.org:&lt;br&gt;\r\n[Keystore keystore.password.p12][1]&lt;br&gt;\r\n[Certificate keystore.password.cer][2]\r\n\r\nHere&#39;s the source:\r\n\r\n    package uk.co.sslws6001.server;\r\n    \r\n    import java.io.FileInputStream;\r\n    import java.net.InetSocketAddress;\r\n    import java.net.URL;\r\n    import java.security.KeyStore;\r\n    import java.util.HexFormat;\r\n    \r\n    import javax.net.ssl.KeyManagerFactory;\r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.TrustManagerFactory;\r\n    import javax.xml.namespace.QName;\r\n    \r\n    import com.sun.net.httpserver.HttpsConfigurator;\r\n    import com.sun.net.httpserver.HttpsServer;\r\n    \r\n    import jakarta.jws.WebParam;\r\n    import jakarta.jws.WebService;\r\n    import jakarta.xml.ws.Endpoint;\r\n    import jakarta.xml.ws.Service;\r\n    \r\n    public class WS {\r\n    \t@WebService\r\n    \tpublic interface MyWebService {\r\n    \t\tpublic String             toHexDigits(@WebParam(name=&quot;intValue&quot;) final int intValue);\r\n    \t}\r\n    \t@WebService(endpointInterface=                       &quot;uk.co.sslws6001.server.WS$MyWebService&quot;)\r\n    \tpublic static final class MyWebServiceImpl implements uk.co.sslws6001.server.WS.MyWebService {\r\n    \t\t@Override\r\n    \t\tpublic String             toHexDigits(final int intValue) {\r\n    \t\t\treturn HexFormat.of().toHexDigits(          intValue);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t/*\r\n    \t * Keystore &amp; Certificate created thus:\r\n    \t * keytool.exe  -genkeypair  -alias self_signed  -keystore keystore.password.p12  -storepass password  -keypass password  -keyalg RSA  -validity 99999  -storetype PKCS12\r\n    \t * keytool.exe  -export      -alias self_signed  -keystore keystore.password.p12  -storepass password  -file keystore.password.cer\r\n    \t */\r\n    \tprivate static HttpsServer createHttpsServer() throws Exception {\r\n    \r\n    \t\tfinal     var pw  =                      &quot;password&quot;.toCharArray();\r\n    \t\tfinal     var ks  = KeyStore.getInstance(&quot;pkcs12&quot;);\r\n    \r\n    \t\ttry(final var fis = new FileInputStream (&quot;keystore.password.p12&quot;)) {\r\n    \t\t\t;         ks.load(fis, pw);\r\n    \t\t}\r\n    \t\tfinal     var kmf = KeyManagerFactory  .getInstance(&quot;SunX509&quot;);\r\n    \t\t;             kmf.init(ks, pw);\r\n    \r\n    \t\tfinal     var tmf = TrustManagerFactory.getInstance(&quot;SunX509&quot;);\r\n    \t\t;             tmf.init(ks);\r\n    \r\n    \t\tfinal     var sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n    \t\t;             sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);\r\n    \r\n    \t\tfinal     var httpsServer =  HttpsServer.create(new InetSocketAddress(&quot;localhost&quot;, 6001), 0);\r\n    \t\t;             httpsServer.setHttpsConfigurator (new HttpsConfigurator(sslContext));\r\n    \r\n    \t\treturn        httpsServer;\r\n    \t}\r\n    \r\n    \tpublic  static void main(final String[] args) throws Exception {\r\n    \r\n    \t\tfinal var httpsAddress  = &quot;/uk/co/sslws6001/server/MyWebService&quot;;\r\n    \t\tfinal var implementor   = new MyWebServiceImpl();\r\n    \r\n    \t\tSystem.out.println(&quot;publishing.........: &quot; + httpsAddress + &quot;\\t-&gt; &quot; + implementor);\r\n    \r\n    \t\tfinal var httpsServer   = createHttpsServer();\r\n    \r\n    \t\tfinal var httpsContext  = httpsServer.createContext(httpsAddress);\r\n    \t\tfinal var httpsEndpoint = Endpoint.create(implementor);\r\n    \t\t;         httpsEndpoint.publish(httpsContext);\r\n    \t\ttry {\r\n    \t\t\thttpsServer.start();\r\n    \r\n    \t\t\tSystem.out.println(&quot;https Server up....: &quot; + httpsServer);\r\n    \r\n    \t\t\ttestClient();\r\n    \t\t}\r\n    \t\tfinally {\r\n    \t\t\thttpsServer.stop(3);\r\n    \t\t\tSystem.out.println(&quot;https Server DOWN...&quot;);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate static void testClient() throws Exception {\r\n    \t\tSystem.out.println(&quot;Test Client.........&quot;);\r\n    \r\n    \t\t/*\r\n    \t\t * TODO get https Client to work WITHOUT following 2 lines (Servers private!! Keystore)...\r\n    \t\t * ...: i.e. use the Servers exported Certificate (&quot;keystore.password.cer&quot;) instead.\r\n    \t\t */\r\n    \t\tSystem.getProperties().put(&quot;javax.net.ssl.trustStore&quot;,         &quot;keystore.password.p12&quot;);  \r\n    \t\tSystem.getProperties().put(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;password&quot;);\r\n    \r\n    \t\tfinal var serviceQName   = new QName(&quot;http://server.sslws6001.co.uk/&quot;, &quot;MyWebServiceImplService&quot;);\r\n    \r\n    \t\tfinal var serviceWsdlURL = new URL  (&quot;https://localhost:6001/uk/co/sslws6001/server/MyWebService?wsdl&quot;);\r\n    \r\n    \t\tfinal var service        = Service.create(serviceWsdlURL, serviceQName);\r\n    \t\tfinal var serviceProxy   = service.getPort(uk.co.sslws6001.server.WS.MyWebService.class);\r\n    \r\n    \t\tSystem.out.println(&quot;Service............: &quot; + service);\r\n    \t\tSystem.out.println(&quot;Service Proxy......: &quot; + serviceProxy);\r\n    \r\n    \t\tSystem.out.println(&quot;Result Hex Digits..: &quot; + serviceProxy.toHexDigits((int) System.currentTimeMillis()));\r\n    \t}\r\n    }\r\n\r\nAnd here&#39;s the POM:\r\n\r\n    &lt;project\r\n    \t\txmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    \t\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \t\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;groupId&gt;uk.co.sslws6001&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;client.server&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n    \t\t&lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jaxws-ri&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.0.1&lt;/version&gt;\r\n    \t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\n  [1]: https://paste.c-net.org/ReynoldsSecurity\r\n  [2]: https://paste.c-net.org/SquidTowels","title":"Simple Config for POJO https Client using JAX WS","body":"<p>I'm trying to get a simple POJO https Client/Server implementation running with JAX-WS.</p>\n<p>The Server side seems to be running fine &amp; was fairly simple, but I haven't found how to configure the Client in a simple fashion.</p>\n<p>I've got it to work with a couple of Properties to include the Servers Keystore.<br>\nBut, of course, that's only good for testing.</p>\n<p>Any ideas?</p>\n<p>I'm using JDK 17 with Eclipse 2023-09.</p>\n<p>See comments in Source for details of Keystore &amp; Certificate.</p>\n<p>For convenience, I've posted them to paste.c-net.org:<br>\n<a href=\"https://paste.c-net.org/ReynoldsSecurity\" rel=\"nofollow noreferrer\">Keystore keystore.password.p12</a><br>\n<a href=\"https://paste.c-net.org/SquidTowels\" rel=\"nofollow noreferrer\">Certificate keystore.password.cer</a></p>\n<p>Here's the source:</p>\n<pre><code>package uk.co.sslws6001.server;\n\nimport java.io.FileInputStream;\nimport java.net.InetSocketAddress;\nimport java.net.URL;\nimport java.security.KeyStore;\nimport java.util.HexFormat;\n\nimport javax.net.ssl.KeyManagerFactory;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.TrustManagerFactory;\nimport javax.xml.namespace.QName;\n\nimport com.sun.net.httpserver.HttpsConfigurator;\nimport com.sun.net.httpserver.HttpsServer;\n\nimport jakarta.jws.WebParam;\nimport jakarta.jws.WebService;\nimport jakarta.xml.ws.Endpoint;\nimport jakarta.xml.ws.Service;\n\npublic class WS {\n    @WebService\n    public interface MyWebService {\n        public String             toHexDigits(@WebParam(name=&quot;intValue&quot;) final int intValue);\n    }\n    @WebService(endpointInterface=                       &quot;uk.co.sslws6001.server.WS$MyWebService&quot;)\n    public static final class MyWebServiceImpl implements uk.co.sslws6001.server.WS.MyWebService {\n        @Override\n        public String             toHexDigits(final int intValue) {\n            return HexFormat.of().toHexDigits(          intValue);\n        }\n    }\n\n    /*\n     * Keystore &amp; Certificate created thus:\n     * keytool.exe  -genkeypair  -alias self_signed  -keystore keystore.password.p12  -storepass password  -keypass password  -keyalg RSA  -validity 99999  -storetype PKCS12\n     * keytool.exe  -export      -alias self_signed  -keystore keystore.password.p12  -storepass password  -file keystore.password.cer\n     */\n    private static HttpsServer createHttpsServer() throws Exception {\n\n        final     var pw  =                      &quot;password&quot;.toCharArray();\n        final     var ks  = KeyStore.getInstance(&quot;pkcs12&quot;);\n\n        try(final var fis = new FileInputStream (&quot;keystore.password.p12&quot;)) {\n            ;         ks.load(fis, pw);\n        }\n        final     var kmf = KeyManagerFactory  .getInstance(&quot;SunX509&quot;);\n        ;             kmf.init(ks, pw);\n\n        final     var tmf = TrustManagerFactory.getInstance(&quot;SunX509&quot;);\n        ;             tmf.init(ks);\n\n        final     var sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n        ;             sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);\n\n        final     var httpsServer =  HttpsServer.create(new InetSocketAddress(&quot;localhost&quot;, 6001), 0);\n        ;             httpsServer.setHttpsConfigurator (new HttpsConfigurator(sslContext));\n\n        return        httpsServer;\n    }\n\n    public  static void main(final String[] args) throws Exception {\n\n        final var httpsAddress  = &quot;/uk/co/sslws6001/server/MyWebService&quot;;\n        final var implementor   = new MyWebServiceImpl();\n\n        System.out.println(&quot;publishing.........: &quot; + httpsAddress + &quot;\\t-&gt; &quot; + implementor);\n\n        final var httpsServer   = createHttpsServer();\n\n        final var httpsContext  = httpsServer.createContext(httpsAddress);\n        final var httpsEndpoint = Endpoint.create(implementor);\n        ;         httpsEndpoint.publish(httpsContext);\n        try {\n            httpsServer.start();\n\n            System.out.println(&quot;https Server up....: &quot; + httpsServer);\n\n            testClient();\n        }\n        finally {\n            httpsServer.stop(3);\n            System.out.println(&quot;https Server DOWN...&quot;);\n        }\n    }\n\n    private static void testClient() throws Exception {\n        System.out.println(&quot;Test Client.........&quot;);\n\n        /*\n         * TODO get https Client to work WITHOUT following 2 lines (Servers private!! Keystore)...\n         * ...: i.e. use the Servers exported Certificate (&quot;keystore.password.cer&quot;) instead.\n         */\n        System.getProperties().put(&quot;javax.net.ssl.trustStore&quot;,         &quot;keystore.password.p12&quot;);  \n        System.getProperties().put(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;password&quot;);\n\n        final var serviceQName   = new QName(&quot;http://server.sslws6001.co.uk/&quot;, &quot;MyWebServiceImplService&quot;);\n\n        final var serviceWsdlURL = new URL  (&quot;https://localhost:6001/uk/co/sslws6001/server/MyWebService?wsdl&quot;);\n\n        final var service        = Service.create(serviceWsdlURL, serviceQName);\n        final var serviceProxy   = service.getPort(uk.co.sslws6001.server.WS.MyWebService.class);\n\n        System.out.println(&quot;Service............: &quot; + service);\n        System.out.println(&quot;Service Proxy......: &quot; + serviceProxy);\n\n        System.out.println(&quot;Result Hex Digits..: &quot; + serviceProxy.toHexDigits((int) System.currentTimeMillis()));\n    }\n}\n</code></pre>\n<p>And here's the POM:</p>\n<pre><code>&lt;project\n        xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n        xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;uk.co.sslws6001&lt;/groupId&gt;\n    &lt;artifactId&gt;client.server&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxws-ri&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","android","npm","sdk","appium"],"comments":[{"owner":{"account_id":29648378,"reputation":1,"user_id":22722896,"display_name":"Abhihshek"},"score":0,"creation_date":1697223806,"post_id":77273183,"comment_id":136257944,"body_markdown":"Hello All, Above issue is resolved after using 8.6.0 Java-Client for Appium 2.1.3 version.","body":"Hello All, Above issue is resolved after using 8.6.0 Java-Client for Appium 2.1.3 version."}],"owner":{"account_id":29648378,"reputation":1,"user_id":22722896,"display_name":"Abhihshek"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697112872,"creation_date":1697028295,"question_id":77273183,"body_markdown":"Here is My Code:\r\n\r\n``` java\r\npackage abhishekmaurya.appium;\r\n\r\nimport org.testng.annotations.Test;\r\n\r\nimport java.net.MalformedURLException;\r\nimport java.net.URL;\r\n\r\nimport io.appium.java_client.android.AndroidDriver;\r\nimport io.appium.java_client.android.options.UiAutomator2Options;\r\n\r\npublic class AppiumBasics {\r\n\t\r\n\t@Test\r\n\tpublic void AppiumTest() throws MalformedURLException {\r\n\t\t\r\n\t\tUiAutomator2Options Options = new UiAutomator2Options();\r\n\t\tOptions.setDeviceName(&quot;abhishekphone&quot;);\r\n\t\tOptions.setApp(&quot;C:\\\\Users\\\\abhshm\\\\eclipse-workspace\\\\appium\\\\src\\\\test\\\\java\\\\resources\\\\resources\\\\ApiDemos-debug.apk&quot;);\t\t\r\n\t\tAndroidDriver driver = new AndroidDriver(new URL(&quot;http://127.0.0.1:4723&quot;), Options);\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\n}\r\n```\r\n\r\nAlso this code is for opening a app in Android SDK Emulator . that&#39;s also not working\r\n\r\nOnly this is shown in Console Output:\r\n\r\n![enter image description here](https://i.stack.imgur.com/4BChQ.png)\r\n\r\nBelow is My Environment Variable Snippet:\r\n\r\n![enter image description here](https://i.stack.imgur.com/mdHKF.png)\r\n\r\n![image](https://i.stack.imgur.com/yybXF.png)\r\n\r\n\r\n\r\n\r\n","title":"I am not seeing the Appium Server Log over CMD Console","body":"<p>Here is My Code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package abhishekmaurya.appium;\n\nimport org.testng.annotations.Test;\n\nimport java.net.MalformedURLException;\nimport java.net.URL;\n\nimport io.appium.java_client.android.AndroidDriver;\nimport io.appium.java_client.android.options.UiAutomator2Options;\n\npublic class AppiumBasics {\n    \n    @Test\n    public void AppiumTest() throws MalformedURLException {\n        \n        UiAutomator2Options Options = new UiAutomator2Options();\n        Options.setDeviceName(&quot;abhishekphone&quot;);\n        Options.setApp(&quot;C:\\\\Users\\\\abhshm\\\\eclipse-workspace\\\\appium\\\\src\\\\test\\\\java\\\\resources\\\\resources\\\\ApiDemos-debug.apk&quot;);      \n        AndroidDriver driver = new AndroidDriver(new URL(&quot;http://127.0.0.1:4723&quot;), Options);\n        \n        \n    }\n\n}\n</code></pre>\n<p>Also this code is for opening a app in Android SDK Emulator . that's also not working</p>\n<p>Only this is shown in Console Output:</p>\n<p><img src=\"https://i.stack.imgur.com/4BChQ.png\" alt=\"enter image description here\" /></p>\n<p>Below is My Environment Variable Snippet:</p>\n<p><img src=\"https://i.stack.imgur.com/mdHKF.png\" alt=\"enter image description here\" /></p>\n<p><img src=\"https://i.stack.imgur.com/yybXF.png\" alt=\"image\" /></p>\n"},{"tags":["java","jpa","spring-data-jpa","h2"],"comments":[{"owner":{"account_id":16577411,"reputation":74,"user_id":11978873,"display_name":"xTheProgrammer"},"score":0,"creation_date":1697713004,"post_id":77279047,"comment_id":136315665,"body_markdown":"i answered the question here: https://stackoverflow.com/a/77321415/11978873","body":"i answered the question here: <a href=\"https://stackoverflow.com/a/77321415/11978873\">stackoverflow.com/a/77321415/11978873</a>"}],"answers":[{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697102845,"creation_date":1697102845,"answer_id":77279357,"question_id":77279047,"body_markdown":"Don&#39;t use H2 for testing when you run MySql in production. \r\nUse Testcontainers instead.\r\n\r\nIf you really want to keep you approach you could alter the byte code using a [Java Agent][1].\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-instrumentation","title":"@Table annotation and the need set catalog or schemas for test and production code","body":"<p>Don't use H2 for testing when you run MySql in production.\nUse Testcontainers instead.</p>\n<p>If you really want to keep you approach you could alter the byte code using a <a href=\"https://www.baeldung.com/java-instrumentation\" rel=\"nofollow noreferrer\">Java Agent</a>.</p>\n"}],"owner":{"account_id":16577411,"reputation":74,"user_id":11978873,"display_name":"xTheProgrammer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697112728,"creation_date":1697100260,"question_id":77279047,"body_markdown":"Basically i have the same question as:\r\nhttps://stackoverflow.com/questions/46003817/table-annotation-and-the-need-set-catalog-or-schemas-for-development-or-deploym\r\n\r\nHowever I tried a few more approaches on how to solve this which I wanted to add here. The original question is more than 6 years old without an answer...\r\n\r\nOne approach i tried which felt actually ok:\r\nSetting the code catalog / schema manually on startup via reflection. There it&#39;s clear if i am in the test environment and therefore need to set the catalog or if i&#39;m in a non-test environment and i need to set the schema.\r\nI tried different approaches for this. One would be:\r\n\r\n    @Component\r\n    public class TableAnnotationEventListener implements ApplicationListener&lt;ContextRefreshedEvent&gt; {\r\n\r\n    @Profile(&quot;test&quot;)\r\n    @Override\r\n    public void onApplicationEvent(ContextRefreshedEvent event) {\r\n        if (event.getApplicationContext().getEnvironment().acceptsProfiles(&quot;test&quot;)) {\r\n            adjustTableAnnotations();\r\n        }\r\n    }\r\n\r\n    private void adjustTableAnnotations() {\r\n        Table tableAnnotation = EntityClass.class.getAnnotation(Table.class);\r\n        if (tableAnnotation != null) {\r\n            String schemaOrCatalog = &quot;your_h2_schema&quot;; // Set the schema for H2 or catalog for MySQL\r\n            try {\r\n                Field schemaField = Table.class.getDeclaredField(&quot;schema&quot;);\r\n                schemaField.setAccessible(true);\r\n                Field catalogField = Table.class.getDeclaredField(&quot;catalog&quot;);\r\n                catalogField.setAccessible(true);\r\n\r\n                // Set the schema or catalog based on the active profile\r\n                if (activeProfile.equals(&quot;test&quot;)) {\r\n                    schemaField.set(tableAnnotation, schemaOrCatalog);\r\n                    catalogField.set(tableAnnotation, &quot;&quot;); // Empty string for catalog\r\n                } else {\r\n                    schemaField.set(tableAnnotation, &quot;&quot;);\r\n                    catalogField.set(tableAnnotation, schemaOrCatalog);\r\n                }\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(&quot;Error updating @Table annotation&quot;, e);\r\n            }\r\n        }\r\n    }\r\n\r\nHowever this is still to late somehow. I never enter the code before the error occurs, that the table can&#39;t be found on startup.\r\nSo, maybe someone has a solution / idea on how to do this smoothly.\r\n\r\n","title":"@Table annotation and the need set catalog or schemas for test and production code","body":"<p>Basically i have the same question as:\n<a href=\"https://stackoverflow.com/questions/46003817/table-annotation-and-the-need-set-catalog-or-schemas-for-development-or-deploym\">@Table annotation and the need set catalog or schemas for development or deployment</a></p>\n<p>However I tried a few more approaches on how to solve this which I wanted to add here. The original question is more than 6 years old without an answer...</p>\n<p>One approach i tried which felt actually ok:\nSetting the code catalog / schema manually on startup via reflection. There it's clear if i am in the test environment and therefore need to set the catalog or if i'm in a non-test environment and i need to set the schema.\nI tried different approaches for this. One would be:</p>\n<pre><code>@Component\npublic class TableAnnotationEventListener implements ApplicationListener&lt;ContextRefreshedEvent&gt; {\n\n@Profile(&quot;test&quot;)\n@Override\npublic void onApplicationEvent(ContextRefreshedEvent event) {\n    if (event.getApplicationContext().getEnvironment().acceptsProfiles(&quot;test&quot;)) {\n        adjustTableAnnotations();\n    }\n}\n\nprivate void adjustTableAnnotations() {\n    Table tableAnnotation = EntityClass.class.getAnnotation(Table.class);\n    if (tableAnnotation != null) {\n        String schemaOrCatalog = &quot;your_h2_schema&quot;; // Set the schema for H2 or catalog for MySQL\n        try {\n            Field schemaField = Table.class.getDeclaredField(&quot;schema&quot;);\n            schemaField.setAccessible(true);\n            Field catalogField = Table.class.getDeclaredField(&quot;catalog&quot;);\n            catalogField.setAccessible(true);\n\n            // Set the schema or catalog based on the active profile\n            if (activeProfile.equals(&quot;test&quot;)) {\n                schemaField.set(tableAnnotation, schemaOrCatalog);\n                catalogField.set(tableAnnotation, &quot;&quot;); // Empty string for catalog\n            } else {\n                schemaField.set(tableAnnotation, &quot;&quot;);\n                catalogField.set(tableAnnotation, schemaOrCatalog);\n            }\n        } catch (Exception e) {\n            throw new RuntimeException(&quot;Error updating @Table annotation&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p>However this is still to late somehow. I never enter the code before the error occurs, that the table can't be found on startup.\nSo, maybe someone has a solution / idea on how to do this smoothly.</p>\n"},{"tags":["java","kubernetes","grpc","ioexception"],"comments":[{"owner":{"account_id":14947494,"reputation":506,"user_id":10792320,"display_name":"San P"},"score":0,"creation_date":1697058965,"post_id":77274611,"comment_id":136233397,"body_markdown":"You seem to be using an old gRPC version (1.34.1). Can you switch to the latest version? Also the error seems to have been generated in a different component (`cn.vpclub.sd.framework.grpc.client.proxy.ManageChannelProxy`) so something to do with channel management by this component.","body":"You seem to be using an old gRPC version (1.34.1). Can you switch to the latest version? Also the error seems to have been generated in a different component (<code>cn.vpclub.sd.framework.grpc.client.proxy.ManageChannelProxy</code>&zwnj;&#8203;) so something to do with channel management by this component."}],"owner":{"account_id":29649627,"reputation":1,"user_id":22723860,"display_name":"wripzx"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697112407,"creation_date":1697039580,"question_id":77274611,"body_markdown":"i used grpc in java program and it work very well in the test env.But when we deployed in the production env it sometimes occurs exception with stack trace:\r\n\r\n```\r\nio.grpc.StatusRuntimeException: UNAVAILABLE: io exception\r\n        at io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:262) ~[grpc-stub-1.34.1.jar!/:1.34.1]\r\n        at io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:243) ~[grpc-stub-1.34.1.jar!/:1.34.1]\r\n        at io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:123) ~[grpc-stub-1.34.1.jar!/:1.34.1]\r\n        at cn.vpclub.sd.framework.grpc.client.proxy.ManageChannelProxy.invoke(ManageChannelProxy.java:107) ~[vpsd-grpc-1.3.0-cmpm-SNAPSHOT.jar!/:1.3.0-cmpm-SNAPSHOT]\r\n        at org.springframework.cglib.proxy.Proxy$ProxyImpl$$EnhancerByCGLIB$$83232b9b.orderSyncFromBoss(&lt;generated&gt;) [spring-core-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\r\n        at cn.vpclub.cmpm.capacity.central.bff.api.ordersync.service.OrderSyncFromBossService.orderSyncFromBoss(OrderSyncFromBossService.java:121) [classes!/:1.0-SNAPSHOT]\r\n        at cn.vpclub.cmpm.capacity.central.bff.api.ordersync.controller.OrderSyncFromController.orderSync(OrderSyncFromController.java:45) [classes!/:1.0-SNAPSHOT]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]\r\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]\r\n        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) [spring-web-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\r\n        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) [spring-web-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\r\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105) [spring-webmvc-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\r\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878) [spring-webmvc-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\r\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792) [spring-webmvc-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\r\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) [spring-webmvc-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\r\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040) [spring-webmvc-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\r\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) [spring-webmvc-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\r\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\r\n[enter image description here](https://i.stack.imgur.com/IAIQX.jpg)\r\n```\r\n\r\ni build the ManagedChannel as this:\r\n\r\n```\r\nthis.channelNetty = NettyChannelBuilder.forAddress(channelProperty.getHost(), channelProperty.getPort())\r\n                .usePlaintext()\r\n                .proxyDetector(proxyDetector)\r\n                .maxInboundMessageSize(channelProperty.getMaxInboundMessageSize())\r\n                .intercept(new GrpcClientInterceptor())\r\n                .keepAliveTime(5, TimeUnit.MINUTES)\r\n                .keepAliveTimeout(channelProperty.getDeadline(), TimeUnit.SECONDS)\r\n                .build();\r\n```\r\n\r\nand the tcp keepalive is like this[tcp keepalive]\r\n\r\n(https://i.stack.imgur.com/0GzKS.png)\r\n\r\nwe deploy in k8s and the grpc port is 50051,what can i do to solve this problem","title":"grpc io exception in k8s prod env","body":"<p>i used grpc in java program and it work very well in the test env.But when we deployed in the production env it sometimes occurs exception with stack trace:</p>\n<pre><code>io.grpc.StatusRuntimeException: UNAVAILABLE: io exception\n        at io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:262) ~[grpc-stub-1.34.1.jar!/:1.34.1]\n        at io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:243) ~[grpc-stub-1.34.1.jar!/:1.34.1]\n        at io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:123) ~[grpc-stub-1.34.1.jar!/:1.34.1]\n        at cn.vpclub.sd.framework.grpc.client.proxy.ManageChannelProxy.invoke(ManageChannelProxy.java:107) ~[vpsd-grpc-1.3.0-cmpm-SNAPSHOT.jar!/:1.3.0-cmpm-SNAPSHOT]\n        at org.springframework.cglib.proxy.Proxy$ProxyImpl$$EnhancerByCGLIB$$83232b9b.orderSyncFromBoss(&lt;generated&gt;) [spring-core-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\n        at cn.vpclub.cmpm.capacity.central.bff.api.ordersync.service.OrderSyncFromBossService.orderSyncFromBoss(OrderSyncFromBossService.java:121) [classes!/:1.0-SNAPSHOT]\n        at cn.vpclub.cmpm.capacity.central.bff.api.ordersync.controller.OrderSyncFromController.orderSync(OrderSyncFromController.java:45) [classes!/:1.0-SNAPSHOT]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]\n        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) [spring-web-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\n        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) [spring-web-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105) [spring-webmvc-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878) [spring-webmvc-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792) [spring-webmvc-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) [spring-webmvc-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040) [spring-webmvc-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) [spring-webmvc-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.2.15.RELEASE.jar!/:5.2.15.RELEASE]\n[enter image description here](https://i.stack.imgur.com/IAIQX.jpg)\n</code></pre>\n<p>i build the ManagedChannel as this:</p>\n<pre><code>this.channelNetty = NettyChannelBuilder.forAddress(channelProperty.getHost(), channelProperty.getPort())\n                .usePlaintext()\n                .proxyDetector(proxyDetector)\n                .maxInboundMessageSize(channelProperty.getMaxInboundMessageSize())\n                .intercept(new GrpcClientInterceptor())\n                .keepAliveTime(5, TimeUnit.MINUTES)\n                .keepAliveTimeout(channelProperty.getDeadline(), TimeUnit.SECONDS)\n                .build();\n</code></pre>\n<p>and the tcp keepalive is like this[tcp keepalive]</p>\n<p>(<a href=\"https://i.stack.imgur.com/0GzKS.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/0GzKS.png</a>)</p>\n<p>we deploy in k8s and the grpc port is 50051,what can i do to solve this problem</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9788,"page":129,"page_size":100}
