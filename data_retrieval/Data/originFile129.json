{"items":[{"tags":["java","command","code-injection","processbuilder","fortify"],"comments":[{"owner":{"account_id":115767,"reputation":42976,"user_id":303810,"accept_rate":84,"display_name":"lexicore"},"score":0,"creation_date":1525300760,"post_id":50144532,"comment_id":87307295,"body_markdown":"Where does `execCommand` or `cmd1` come from?","body":"Where does <code>execCommand</code> or <code>cmd1</code> come from?"},{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":0,"creation_date":1525301041,"post_id":50144532,"comment_id":87307381,"body_markdown":"You&#39;re writing code that allows the execution of arbitrary commands, so you get a warning about that. What do you want to fix exactly?","body":"You&#39;re writing code that allows the execution of arbitrary commands, so you get a warning about that. What do you want to fix exactly?"},{"owner":{"account_id":11663426,"reputation":43,"user_id":8540891,"display_name":"Vamshi"},"score":0,"creation_date":1525447465,"post_id":50144532,"comment_id":87373890,"body_markdown":"I want to fix it. I just want to know hostname and that too this application runs only on linux. any kind of ideas is really appreciated.","body":"I want to fix it. I just want to know hostname and that too this application runs only on linux. any kind of ideas is really appreciated."}],"answers":[{"tags":[],"owner":{"account_id":1382751,"reputation":4828,"user_id":1315419,"accept_rate":44,"display_name":"Vasan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525302603,"creation_date":1525302292,"answer_id":50144739,"question_id":50144532,"body_markdown":"Usually this is because you&#39;re using user input to frame the command string, wherein user can inject malicious code to manipulate what command is being run ultimately (even if you add validation there will be ways to circumvent that). \r\n\r\nIn your case you seem to be hardcoding the command so this shouldn&#39;t be a problem, however, see the OWASP page on [hardcoded command invocation](https://www.owasp.org/index.php/Command_Injection#Example_4) (emphasis mine):\r\n\r\n&gt; Unlike the previous examples, the command in this example is\r\n&gt; hardcoded, so an attacker cannot control the argument passed to\r\n&gt; system(). However, since the program does not specify an absolute path\r\n&gt; for make, and does not scrub any environment variables prior to\r\n&gt; invoking the command, the attacker can modify their $PATH variable to\r\n&gt; point to a malicious binary named make and execute the CGI script from\r\n&gt; a shell prompt. And since the program has been installed setuid root,\r\n&gt; the attacker&#39;s version of make now runs with root privileges.\r\n&gt; \r\n&gt; The environment plays a powerful role in the execution of system\r\n&gt; commands within programs. **Functions like system() and exec() use the\r\n&gt; environment of the program that calls them, and therefore attackers\r\n&gt; have a potential opportunity to influence the behavior of these calls**.\r\n\r\nResolution:\r\n\r\n1. Use native Java APIs / libraries to achieve what you want, instead of running a command - this is probably the best option. Use commands only when unavoidable, eg: 3rd party tools which do not have a Java client library. This approach has the added advantage of being more portable and in most cases, more efficient too. [This](https://stackoverflow.com/a/41536695) library might help your scenario.\r\n2. If you *have* to run a command, ensure you do not use user-supplied or external data even indirectly to construct it.\r\n3. Or if you&#39;re hardcoding the command to run from the code, use absolute path to the command and do not use environment variables as part of it. For `hostname` (assuming you use the built-in command) this is usually `/usr/bin/hostname` but you can find the command path for your environment using `which hostname`.","title":"Fortify issue - Command Injection","body":"<p>Usually this is because you're using user input to frame the command string, wherein user can inject malicious code to manipulate what command is being run ultimately (even if you add validation there will be ways to circumvent that). </p>\n\n<p>In your case you seem to be hardcoding the command so this shouldn't be a problem, however, see the OWASP page on <a href=\"https://www.owasp.org/index.php/Command_Injection#Example_4\" rel=\"nofollow noreferrer\">hardcoded command invocation</a> (emphasis mine):</p>\n\n<blockquote>\n  <p>Unlike the previous examples, the command in this example is\n  hardcoded, so an attacker cannot control the argument passed to\n  system(). However, since the program does not specify an absolute path\n  for make, and does not scrub any environment variables prior to\n  invoking the command, the attacker can modify their $PATH variable to\n  point to a malicious binary named make and execute the CGI script from\n  a shell prompt. And since the program has been installed setuid root,\n  the attacker's version of make now runs with root privileges.</p>\n  \n  <p>The environment plays a powerful role in the execution of system\n  commands within programs. <strong>Functions like system() and exec() use the\n  environment of the program that calls them, and therefore attackers\n  have a potential opportunity to influence the behavior of these calls</strong>.</p>\n</blockquote>\n\n<p>Resolution:</p>\n\n<ol>\n<li>Use native Java APIs / libraries to achieve what you want, instead of running a command - this is probably the best option. Use commands only when unavoidable, eg: 3rd party tools which do not have a Java client library. This approach has the added advantage of being more portable and in most cases, more efficient too. <a href=\"https://stackoverflow.com/a/41536695\">This</a> library might help your scenario.</li>\n<li>If you <em>have</em> to run a command, ensure you do not use user-supplied or external data even indirectly to construct it.</li>\n<li>Or if you're hardcoding the command to run from the code, use absolute path to the command and do not use environment variables as part of it. For <code>hostname</code> (assuming you use the built-in command) this is usually <code>/usr/bin/hostname</code> but you can find the command path for your environment using <code>which hostname</code>.</li>\n</ol>\n"}],"owner":{"account_id":11663426,"reputation":43,"user_id":8540891,"display_name":"Vamshi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8373,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697097975,"creation_date":1525300577,"question_id":50144532,"body_markdown":"I am trying to do hp fortify security scan for my java application. I have few issues and i have fixed it. But i am unable to find the fix for the below issue.\r\n\r\n 1. **Command Injection**\r\n\r\n        String hostname = execReadToString(&quot;hostname&quot;).split(&quot;\\\\.&quot;)[0];\r\n        public static String execReadToString(String execCommand) throws IOException {\r\n\t\t try (Scanner s = new Scanner(Runtime.getRuntime().exec(execCommand).getInputStream()).useDelimiter(&quot;\\\\A&quot;)) {\r\n\t        return s.hasNext() ? s.next() : &quot;&quot;;\r\n\t    }\r\nThe method execReadToString() calls exec() to execute a command. This call might allow an attacker to inject malicious commands.\r\n\r\nSo i have tried with process builder also. \r\n\r\n    private static void gethostname(String cmd1) throws IOException {\r\n    \t\tif(Pattern.matches(&quot;[A-Za-z]+&quot;, cmd1)) {\r\n    \t\tProcessBuilder pb = new ProcessBuilder(cmd1);\r\n    \t    Process p = pb.start();\r\n    \t        BufferedReader reader = new BufferedReader(new InputStreamReader(\r\n    \t                p.getInputStream()));\r\n    \t        String readline;\r\n    \t        while ((readline = reader.readLine()) != null) {\r\n    \t            System.out.println(readline);\r\n    \t        }\r\n    \t\t}\r\n    \t}\r\n\r\nEven this is giving me an security issue **This start() call might allow an attacker to inject malicious commands.**\r\n\r\nWhat will be the ideal fix for this issue?\r\n\r\nThanks in advance","title":"Fortify issue - Command Injection","body":"<p>I am trying to do hp fortify security scan for my java application. I have few issues and i have fixed it. But i am unable to find the fix for the below issue.</p>\n\n<ol>\n<li><p><strong>Command Injection</strong></p>\n\n<pre><code>String hostname = execReadToString(\"hostname\").split(\"\\\\.\")[0];\npublic static String execReadToString(String execCommand) throws IOException {\n try (Scanner s = new Scanner(Runtime.getRuntime().exec(execCommand).getInputStream()).useDelimiter(\"\\\\A\")) {\n    return s.hasNext() ? s.next() : \"\";\n}\n</code></pre>\n\n<p>The method execReadToString() calls exec() to execute a command. This call might allow an attacker to inject malicious commands.</p></li>\n</ol>\n\n<p>So i have tried with process builder also. </p>\n\n<pre><code>private static void gethostname(String cmd1) throws IOException {\n        if(Pattern.matches(\"[A-Za-z]+\", cmd1)) {\n        ProcessBuilder pb = new ProcessBuilder(cmd1);\n        Process p = pb.start();\n            BufferedReader reader = new BufferedReader(new InputStreamReader(\n                    p.getInputStream()));\n            String readline;\n            while ((readline = reader.readLine()) != null) {\n                System.out.println(readline);\n            }\n        }\n    }\n</code></pre>\n\n<p>Even this is giving me an security issue <strong>This start() call might allow an attacker to inject malicious commands.</strong></p>\n\n<p>What will be the ideal fix for this issue?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","class","output","system.in"],"owner":{"account_id":29654370,"reputation":1,"user_id":22727450,"display_name":"LiLKore420"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697097800,"creation_date":1697097800,"question_id":77278770,"body_markdown":"I need to write my Scanner.  The problem is that if I enter data from the console into IDEA as follows: \r\n\r\nInput: &quot;1 2^D&quot;\r\nOutput: &quot;&quot;\r\nWhat should output: &quot;1 2&quot;\r\n\r\nInput: &quot;1 2 3 4\r\n        5 6 7&quot;\r\nOutput: &quot;1 2 3 4\r\n         5 6&quot; \r\nWhat should output: &quot;1 2 3 4\r\n                     5 6 7&quot;\r\n\r\nWhat could be the problem? And if you suddenly know how you can fix it?\r\nCode:\r\n\r\n```\r\nimport java.io.*;\r\nimport java.util.Arrays;\r\n\r\npublic class OwnScanner {\r\n    private final Reader reader;\r\n    private final char[] Buffer = new char[1024];\r\n    private int currIndexInBuffer = 0;\r\n    private int size = 0;\r\n    private char symbol;\r\n    private final char charNegOne = ((char) -1);\r\n    private final StringBuilder outputBuilder = new StringBuilder();\r\n\r\n    public OwnScanner(String toRead) {\r\n        this.reader = new StringReader(toRead);\r\n    }\r\n\r\n    public OwnScanner(InputStream toRead) {\r\n        this.reader = new InputStreamReader(toRead);\r\n    }\r\n\r\n    public OwnScanner(FileInputStream toRead) {\r\n        this.reader = new InputStreamReader(toRead);\r\n    }\r\n\r\n    private char nextChar() throws IOException {\r\n        if (currIndexInBuffer &gt;= size) {\r\n            currIndexInBuffer = 0;\r\n            size = reader.read(Buffer, 0, 1024);\r\n        }\r\n        if (size == -1) {\r\n            return charNegOne;\r\n        } else {\r\n            return Buffer[currIndexInBuffer++];\r\n        }\r\n    }\r\n\r\n    private boolean skipWhitespaceAndLetter() throws IOException {\r\n        while ((symbol = nextChar()) != charNegOne) {\r\n            if (Character.isDigit(symbol)) {\r\n                currIndexInBuffer--;\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private boolean skipWhitespaceAndDigit() throws IOException {\r\n        while ((symbol = nextChar()) != charNegOne) {\r\n            if (!(Character.isDigit(symbol)) &amp; !(Character.isWhitespace(symbol))) {\r\n                currIndexInBuffer--;\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public boolean hasNext() throws IOException {\r\n        return skipWhitespaceAndDigit();\r\n    }\r\n\r\n    public boolean hasNextInt() throws IOException {\r\n        return skipWhitespaceAndLetter();\r\n    }\r\n\r\n    public char nextSym() throws IOException {\r\n        return nextChar();\r\n    }\r\n\r\n    public void close() throws IOException {\r\n        reader.close();\r\n    }\r\n\r\n    public boolean hasNextLine() throws IOException {\r\n        int startIndex = currIndexInBuffer;\r\n        while ((symbol = nextChar()) != charNegOne) {\r\n            if (System.lineSeparator().contains(String.valueOf(symbol))) {\r\n                currIndexInBuffer = startIndex;\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public String next() throws IOException {\r\n        outputBuilder.setLength(0);\r\n        skipWhitespaceAndDigit();\r\n        while ((symbol = nextChar()) != charNegOne) {\r\n            if (Character.isDigit(symbol) | Character.isWhitespace(symbol)) {\r\n                break;\r\n            }\r\n            outputBuilder.append(symbol);\r\n        }\r\n        return String.valueOf(outputBuilder);\r\n    }\r\n\r\n    public String nextLine() throws IOException {\r\n        outputBuilder.setLength(0);\r\n        while ((symbol = nextChar()) != charNegOne) {\r\n            if (System.lineSeparator().contains(String.valueOf(symbol))) {\r\n                break;\r\n            }\r\n            outputBuilder.append(symbol);\r\n        }\r\n        return String.valueOf(outputBuilder);\r\n    }\r\n\r\n    public int nextInt() throws IOException {\r\n        outputBuilder.setLength(0);\r\n        skipWhitespaceAndLetter();\r\n        while ((symbol = nextChar()) != ((char) -1)) {\r\n            if (Character.isLetter(symbol) | Character.isWhitespace(symbol)) {\r\n                break;\r\n            }\r\n            outputBuilder.append(symbol);\r\n        }\r\n        return Integer.parseInt(String.valueOf(outputBuilder));\r\n    }\r\n\r\n    public static void main(String[] args) throws IOException {\r\n         OwnScanner sc = new OwnScanner(System.in);\r\n         while (sc.hasNextLine()) {\r\n             System.out.println(sc.nextInt());\r\n         }\r\n    }\r\n}\r\n```\r\n\r\nIt seems to me that the error may be in skipWhitespaceandLettre or skipWhitespaceandDigit, but I&#39;m not sure.","title":"Own Class Scanner, problem with output and input ^D","body":"<p>I need to write my Scanner.  The problem is that if I enter data from the console into IDEA as follows:</p>\n<p>Input: &quot;1 2^D&quot;\nOutput: &quot;&quot;\nWhat should output: &quot;1 2&quot;</p>\n<p>Input: &quot;1 2 3 4\n5 6 7&quot;\nOutput: &quot;1 2 3 4\n5 6&quot;\nWhat should output: &quot;1 2 3 4\n5 6 7&quot;</p>\n<p>What could be the problem? And if you suddenly know how you can fix it?\nCode:</p>\n<pre><code>import java.io.*;\nimport java.util.Arrays;\n\npublic class OwnScanner {\n    private final Reader reader;\n    private final char[] Buffer = new char[1024];\n    private int currIndexInBuffer = 0;\n    private int size = 0;\n    private char symbol;\n    private final char charNegOne = ((char) -1);\n    private final StringBuilder outputBuilder = new StringBuilder();\n\n    public OwnScanner(String toRead) {\n        this.reader = new StringReader(toRead);\n    }\n\n    public OwnScanner(InputStream toRead) {\n        this.reader = new InputStreamReader(toRead);\n    }\n\n    public OwnScanner(FileInputStream toRead) {\n        this.reader = new InputStreamReader(toRead);\n    }\n\n    private char nextChar() throws IOException {\n        if (currIndexInBuffer &gt;= size) {\n            currIndexInBuffer = 0;\n            size = reader.read(Buffer, 0, 1024);\n        }\n        if (size == -1) {\n            return charNegOne;\n        } else {\n            return Buffer[currIndexInBuffer++];\n        }\n    }\n\n    private boolean skipWhitespaceAndLetter() throws IOException {\n        while ((symbol = nextChar()) != charNegOne) {\n            if (Character.isDigit(symbol)) {\n                currIndexInBuffer--;\n                return true;\n            }\n        }\n        return false;\n    }\n\n    private boolean skipWhitespaceAndDigit() throws IOException {\n        while ((symbol = nextChar()) != charNegOne) {\n            if (!(Character.isDigit(symbol)) &amp; !(Character.isWhitespace(symbol))) {\n                currIndexInBuffer--;\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public boolean hasNext() throws IOException {\n        return skipWhitespaceAndDigit();\n    }\n\n    public boolean hasNextInt() throws IOException {\n        return skipWhitespaceAndLetter();\n    }\n\n    public char nextSym() throws IOException {\n        return nextChar();\n    }\n\n    public void close() throws IOException {\n        reader.close();\n    }\n\n    public boolean hasNextLine() throws IOException {\n        int startIndex = currIndexInBuffer;\n        while ((symbol = nextChar()) != charNegOne) {\n            if (System.lineSeparator().contains(String.valueOf(symbol))) {\n                currIndexInBuffer = startIndex;\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public String next() throws IOException {\n        outputBuilder.setLength(0);\n        skipWhitespaceAndDigit();\n        while ((symbol = nextChar()) != charNegOne) {\n            if (Character.isDigit(symbol) | Character.isWhitespace(symbol)) {\n                break;\n            }\n            outputBuilder.append(symbol);\n        }\n        return String.valueOf(outputBuilder);\n    }\n\n    public String nextLine() throws IOException {\n        outputBuilder.setLength(0);\n        while ((symbol = nextChar()) != charNegOne) {\n            if (System.lineSeparator().contains(String.valueOf(symbol))) {\n                break;\n            }\n            outputBuilder.append(symbol);\n        }\n        return String.valueOf(outputBuilder);\n    }\n\n    public int nextInt() throws IOException {\n        outputBuilder.setLength(0);\n        skipWhitespaceAndLetter();\n        while ((symbol = nextChar()) != ((char) -1)) {\n            if (Character.isLetter(symbol) | Character.isWhitespace(symbol)) {\n                break;\n            }\n            outputBuilder.append(symbol);\n        }\n        return Integer.parseInt(String.valueOf(outputBuilder));\n    }\n\n    public static void main(String[] args) throws IOException {\n         OwnScanner sc = new OwnScanner(System.in);\n         while (sc.hasNextLine()) {\n             System.out.println(sc.nextInt());\n         }\n    }\n}\n</code></pre>\n<p>It seems to me that the error may be in skipWhitespaceandLettre or skipWhitespaceandDigit, but I'm not sure.</p>\n"},{"tags":["java","junit","junit5"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1696980379,"post_id":77269291,"comment_id":136221228,"body_markdown":"What annotations do you have on your test class?","body":"What annotations do you have on your test class?"},{"owner":{"account_id":12577079,"reputation":119,"user_id":9220564,"display_name":"dcm50"},"score":0,"creation_date":1697025514,"post_id":77269291,"comment_id":136227052,"body_markdown":"@tgdavies for now, only ```@ExtendWith(MockitoExtension.class)```.","body":"@tgdavies for now, only <code>@ExtendWith(MockitoExtension.class)</code>."},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":1,"creation_date":1697048843,"post_id":77269291,"comment_id":136231769,"body_markdown":"Please provide a [mcve]. It&#39;s not clear how you create the repository.","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. It&#39;s not clear how you create the repository."},{"owner":{"account_id":12577079,"reputation":119,"user_id":9220564,"display_name":"dcm50"},"score":0,"creation_date":1697060034,"post_id":77269291,"comment_id":136233523,"body_markdown":"Sorry, @daniu but your comment makes no sense at all. I added all necessary info and the code as well. Or do you want the controller method as well as service method?","body":"Sorry, @daniu but your comment makes no sense at all. I added all necessary info and the code as well. Or do you want the controller method as well as service method?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1697079542,"post_id":77269291,"comment_id":136235111,"body_markdown":"As @daniu said, please show how the `gameManagerRepository` is created in your unit test. You say &quot;I&#39;m testing a method from service class&quot;, but I don&#39;t see any service class mentioned in your test, just the repository.","body":"As @daniu said, please show how the <code>gameManagerRepository</code> is created in your unit test. You say &quot;I&#39;m testing a method from service class&quot;, but I don&#39;t see any service class mentioned in your test, just the repository."}],"answers":[{"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697097797,"creation_date":1697097394,"answer_id":77278723,"question_id":77269291,"body_markdown":"Since you state in the comments that you use `MockitoExtension` but don&#39;t specify how exactly you create the repository, I&#39;m going to have to assume that this is what you do:\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\npublic class RepositoryTest {\r\n\r\n    @Mock\r\n    private GameManagerRepository gameManagerRepository;\r\n\r\n    @DisplayName(&quot;Test for createGame&quot;)\r\n    @Test\r\n    public void createGameTest(){\r\n        game = new Game();\r\n        game.setPublisherId(&quot;123&quot;);\r\n        game.setGameDataId(&quot;abc&quot;);\r\n        game.setName(&quot;hello world&quot;);\r\n        gameManagerRepository.save(game);\r\n        System.out.println(game);\r\n        System.out.println(game != null);\r\n        System.out.println(gameManagerRepository.findCreateGameByPublisherId(&quot;123&quot;));\r\n    }\r\n}\r\n```\r\n\r\nThe answer is that method calls for mocked instances always return `null` if you didn&#39;t mock the call beforehand (eg `when(repo.findCreate(any())).thenReturn(game)`).\r\n\r\nThis answer is correct but somewhat tongue in cheek to show you why it&#39;s important to show how the repository is created.\r\n\r\nYou probably want to create a Spring test (`@ExtendsWith(SpringExtension.class)`) to fire up the Spring context and test the actual beans.","title":"JUnit 5 - Entity created but not being retrieve","body":"<p>Since you state in the comments that you use <code>MockitoExtension</code> but don't specify how exactly you create the repository, I'm going to have to assume that this is what you do:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class RepositoryTest {\n\n    @Mock\n    private GameManagerRepository gameManagerRepository;\n\n    @DisplayName(&quot;Test for createGame&quot;)\n    @Test\n    public void createGameTest(){\n        game = new Game();\n        game.setPublisherId(&quot;123&quot;);\n        game.setGameDataId(&quot;abc&quot;);\n        game.setName(&quot;hello world&quot;);\n        gameManagerRepository.save(game);\n        System.out.println(game);\n        System.out.println(game != null);\n        System.out.println(gameManagerRepository.findCreateGameByPublisherId(&quot;123&quot;));\n    }\n}\n</code></pre>\n<p>The answer is that method calls for mocked instances always return <code>null</code> if you didn't mock the call beforehand (eg <code>when(repo.findCreate(any())).thenReturn(game)</code>).</p>\n<p>This answer is correct but somewhat tongue in cheek to show you why it's important to show how the repository is created.</p>\n<p>You probably want to create a Spring test (<code>@ExtendsWith(SpringExtension.class)</code>) to fire up the Spring context and test the actual beans.</p>\n"}],"owner":{"account_id":12577079,"reputation":119,"user_id":9220564,"display_name":"dcm50"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697097797,"creation_date":1696976864,"question_id":77269291,"body_markdown":"I&#39;m testing a method from service class which basically calls the method ```save``` from my repository class:\r\n```\r\n@Repository\r\npublic interface GameManagerRepository extends JpaRepository&lt;Game, String&gt; {\r\n\r\n    Game findCreateGameByPublisherId(String publisherId);\r\n}\r\n```\r\n\r\nThis is my test method:\r\n\r\n```\r\n    @DisplayName(&quot;Test for createGame&quot;)\r\n    @Test\r\n    public void createGameTest(){\r\n        game = new Game();\r\n        game.setPublisherId(&quot;123&quot;);\r\n        game.setGameDataId(&quot;abc&quot;);\r\n        game.setName(&quot;hello world&quot;);\r\n        gameManagerRepository.save(game);\r\n        System.out.println(game);\r\n        System.out.println(game != null);\r\n        System.out.println(gameManagerRepository.findCreateGameByPublisherId(&quot;123&quot;));\r\n    }\r\n```\r\n\r\nI did put some ```System.out.println``` to try to identify what exactly is wrong wiht my code and this is the result: \r\n\r\n```\r\nGame(gameDataId=abc, publisherId=123, name=hello world, timePlayed=null)\r\ntrue\r\nnull\r\n```\r\n\r\nAs you can see, I could not find the entity in the database and I can&#39;t find out why.  \r\nWhat am I doing wrong here?","title":"JUnit 5 - Entity created but not being retrieve","body":"<p>I'm testing a method from service class which basically calls the method <code>save</code> from my repository class:</p>\n<pre><code>@Repository\npublic interface GameManagerRepository extends JpaRepository&lt;Game, String&gt; {\n\n    Game findCreateGameByPublisherId(String publisherId);\n}\n</code></pre>\n<p>This is my test method:</p>\n<pre><code>    @DisplayName(&quot;Test for createGame&quot;)\n    @Test\n    public void createGameTest(){\n        game = new Game();\n        game.setPublisherId(&quot;123&quot;);\n        game.setGameDataId(&quot;abc&quot;);\n        game.setName(&quot;hello world&quot;);\n        gameManagerRepository.save(game);\n        System.out.println(game);\n        System.out.println(game != null);\n        System.out.println(gameManagerRepository.findCreateGameByPublisherId(&quot;123&quot;));\n    }\n</code></pre>\n<p>I did put some <code>System.out.println</code> to try to identify what exactly is wrong wiht my code and this is the result:</p>\n<pre><code>Game(gameDataId=abc, publisherId=123, name=hello world, timePlayed=null)\ntrue\nnull\n</code></pre>\n<p>As you can see, I could not find the entity in the database and I can't find out why.<br />\nWhat am I doing wrong here?</p>\n"},{"tags":["java","arrays","string","encoding","utf-8"],"comments":[{"owner":{"account_id":259073,"reputation":8102,"user_id":541688,"display_name":"Oleg Estekhin"},"score":0,"creation_date":1494405604,"post_id":43887307,"comment_id":74809016,"body_markdown":"This is essentially a duplicate of http://stackoverflow.com/questions/3621067/why-is-the-range-of-bytes-128-to-127-in-java","body":"This is essentially a duplicate of <a href=\"http://stackoverflow.com/questions/3621067/why-is-the-range-of-bytes-128-to-127-in-java\" title=\"why is the range of bytes 128 to 127 in java\">stackoverflow.com/questions/3621067/&hellip;</a>"},{"owner":{"account_id":2567288,"reputation":20405,"user_id":2226988,"display_name":"Tom Blodget"},"score":0,"creation_date":1494455105,"post_id":43887307,"comment_id":74841245,"body_markdown":"&quot;Encode it to UTF_8&quot; implies the data is text. &quot;Have a byte array&quot; implies it is encoded with some character encoding. If so, which? Or, as Jon Skeet points out, if it is not yet text, you should first convert it to text using Base64 or similar.","body":"&quot;Encode it to UTF_8&quot; implies the data is text. &quot;Have a byte array&quot; implies it is encoded with some character encoding. If so, which? Or, as Jon Skeet points out, if it is not yet text, you should first convert it to text using Base64 or similar."}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438161,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1494405269,"creation_date":1494405269,"answer_id":43887352,"question_id":43887307,"body_markdown":"**Answering the specific question**\r\n\r\n&gt; Does that mean that my byte still contains negative values despite converting it to UTF-8?\r\n\r\nYes, absolutely. That&#39;s because `byte` is signed in Java. A `byte` value of -61 would be 195 as an unsigned value. You should *expect* to get bytes which aren&#39;t in the range 0-127 when you encode any non-ASCII text with UTF-8.\r\n\r\nThe fix is easy: just clamp the range to 0-255 with a bit mask:\r\n\r\n    frequencies[b &amp; 0xff]++;\r\n\r\n**Addressing what you&#39;re attempting to do**\r\n\r\nThis line:\r\n\r\n    String tekst = new String(result2, StandardCharsets.UTF_8);\r\n\r\n... is only appropriate if `result2` is genuinely UTF-8-encoded text. It&#39;s *not* appropriate if `result2` is some arbitrary binary data such as an image, compressed data, or even text encoded in some other encoding.\r\n\r\nIf you want to preserve arbitrary binary data as a string, you should use something like Base64 or hex. Basically, you need to determine whether your data is inherently textual (in which case, you should use strings for as much of the time as possible, and use an appropriate `Charset` to convert to binary where necessary) or inherently binary (in which case you should use bytes for as much of the time as possible, and use base64 or hex to convert to text where necessary).\r\n\r\nThis line:\r\n\r\n    byte[] orig = tekst.getBytes();\r\n\r\n... is almost *always* a bad idea. It uses the platform-default encoding to convert a string to bytes. If you really, really want to use the platform-default encoding, I would make that explicit:\r\n\r\n    byte[] orig = tekst.getBytes(Charset.defaultCharset());\r\n\r\n... but this is an *extremely* unusual requirement these days. It&#39;s almost always better to stick to UTF-8 everywhere.","title":"Converting String to UTF-8 byte array returns a negative value in Java","body":"<p><strong>Answering the specific question</strong></p>\n\n<blockquote>\n  <p>Does that mean that my byte still contains negative values despite converting it to UTF-8?</p>\n</blockquote>\n\n<p>Yes, absolutely. That's because <code>byte</code> is signed in Java. A <code>byte</code> value of -61 would be 195 as an unsigned value. You should <em>expect</em> to get bytes which aren't in the range 0-127 when you encode any non-ASCII text with UTF-8.</p>\n\n<p>The fix is easy: just clamp the range to 0-255 with a bit mask:</p>\n\n<pre><code>frequencies[b &amp; 0xff]++;\n</code></pre>\n\n<p><strong>Addressing what you're attempting to do</strong></p>\n\n<p>This line:</p>\n\n<pre><code>String tekst = new String(result2, StandardCharsets.UTF_8);\n</code></pre>\n\n<p>... is only appropriate if <code>result2</code> is genuinely UTF-8-encoded text. It's <em>not</em> appropriate if <code>result2</code> is some arbitrary binary data such as an image, compressed data, or even text encoded in some other encoding.</p>\n\n<p>If you want to preserve arbitrary binary data as a string, you should use something like Base64 or hex. Basically, you need to determine whether your data is inherently textual (in which case, you should use strings for as much of the time as possible, and use an appropriate <code>Charset</code> to convert to binary where necessary) or inherently binary (in which case you should use bytes for as much of the time as possible, and use base64 or hex to convert to text where necessary).</p>\n\n<p>This line:</p>\n\n<pre><code>byte[] orig = tekst.getBytes();\n</code></pre>\n\n<p>... is almost <em>always</em> a bad idea. It uses the platform-default encoding to convert a string to bytes. If you really, really want to use the platform-default encoding, I would make that explicit:</p>\n\n<pre><code>byte[] orig = tekst.getBytes(Charset.defaultCharset());\n</code></pre>\n\n<p>... but this is an <em>extremely</em> unusual requirement these days. It's almost always better to stick to UTF-8 everywhere.</p>\n"}],"owner":{"account_id":3918425,"reputation":55,"user_id":3241667,"display_name":"markdid"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4870,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":43887352,"answer_count":1,"score":2,"last_activity_date":1697097645,"creation_date":1494405100,"question_id":43887307,"body_markdown":"Let&#39;s say I have a byte array and I try to encode it to UTF_8 using the following\r\n\r\n    String tekst = new String(result2, StandardCharsets.UTF_8);\r\n\tSystem.out.println(tekst);\r\n    //where result2 is the byte array\r\n\r\nThen, I get the bytes using getBytes() with values from 0 to 128\r\n\r\n    byte[] orig = tekst.getBytes();\r\n\r\nAnd then, I wish to do a frequency count of my byte[] orig using the ff:\r\n\r\n    int frequencies = new int[256];\r\n\r\n    for (byte b: orig){\r\n\t\tfrequencies[b]++;\r\n\t}\r\n\r\nEverything goes well till I encounter an error which states\r\n\r\n    java.lang.ArrayIndexOutOfBoundsException: -61\r\n\r\nDoes that mean that my byte still contains negative values despite converting it to UTF-8? Is there something wrong that I&#39;m doing? Can someone please give me clarity on this cause I&#39;m still a beginner on the subject. Thank you.","title":"Converting String to UTF-8 byte array returns a negative value in Java","body":"<p>Let's say I have a byte array and I try to encode it to UTF_8 using the following</p>\n\n<pre><code>String tekst = new String(result2, StandardCharsets.UTF_8);\nSystem.out.println(tekst);\n//where result2 is the byte array\n</code></pre>\n\n<p>Then, I get the bytes using getBytes() with values from 0 to 128</p>\n\n<pre><code>byte[] orig = tekst.getBytes();\n</code></pre>\n\n<p>And then, I wish to do a frequency count of my byte[] orig using the ff:</p>\n\n<pre><code>int frequencies = new int[256];\n\nfor (byte b: orig){\n    frequencies[b]++;\n}\n</code></pre>\n\n<p>Everything goes well till I encounter an error which states</p>\n\n<pre><code>java.lang.ArrayIndexOutOfBoundsException: -61\n</code></pre>\n\n<p>Does that mean that my byte still contains negative values despite converting it to UTF-8? Is there something wrong that I'm doing? Can someone please give me clarity on this cause I'm still a beginner on the subject. Thank you.</p>\n"},{"tags":["java","spring-security"],"answers":[{"tags":[],"owner":{"account_id":25804254,"reputation":774,"user_id":19546048,"display_name":"DingHao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697097547,"creation_date":1697097547,"answer_id":77278740,"question_id":77275208,"body_markdown":"     @Bean\r\n        public SecurityFilterChain remotingFilterChain(HttpSecurity http) throws Exception {\r\n            DefaultSecurityFilterChain filterChain = http\r\n                    .securityMatcher(&quot;/remoting/**&quot;)\r\n                    .authorizeHttpRequests(c -&gt; c.anyRequest().authenticated())\r\n                    .httpBasic(Customizer.withDefaults())\r\n                    .anonymous(Customizer.withDefaults())\r\n                    .x509(c -&gt; c.subjectPrincipalRegex(&quot;CN=(.*?)(?:,|$)&quot;))\r\n                    .csrf(AbstractHttpConfigurer::disable)\r\n                    .sessionManagement(AbstractHttpConfigurer::disable)\r\n                    .build();\r\n            List&lt;Filter&gt; filters = filterChain.getFilters();\r\n            for (int i = 0; i &lt; filters.size(); i++) {\r\n                Filter filter = filters.get(i);\r\n                if(filter instanceof BasicAuthenticationFilter){\r\n                    filters.remove(i);\r\n                    filters.add(i,new CustomBasicAuthenticationFilter(http.getSharedObject(AuthenticationManager.class), (BasicAuthenticationFilter) filter));\r\n                    break;\r\n                }\r\n            }\r\n            return filterChain;\r\n        }\r\n    \r\n        static class CustomBasicAuthenticationFilter extends BasicAuthenticationFilter {\r\n    \r\n            public CustomBasicAuthenticationFilter(AuthenticationManager authenticationManager,BasicAuthenticationFilter filter) {\r\n                super(authenticationManager);\r\n                Field authenticationEntryPoint = ReflectionUtils.findField(BasicAuthenticationFilter.class, &quot;authenticationEntryPoint&quot;);\r\n                ReflectionUtils.makeAccessible(authenticationEntryPoint);\r\n                ReflectionUtils.setField(authenticationEntryPoint,this,ReflectionUtils.getField(authenticationEntryPoint, filter));\r\n    \r\n                Field securityContextHolderStrategy = ReflectionUtils.findField(BasicAuthenticationFilter.class, &quot;securityContextHolderStrategy&quot;);\r\n                ReflectionUtils.makeAccessible(securityContextHolderStrategy);\r\n                setSecurityContextHolderStrategy((SecurityContextHolderStrategy) ReflectionUtils.getField(securityContextHolderStrategy, filter));\r\n    \r\n                Field rememberMeServices = ReflectionUtils.findField(BasicAuthenticationFilter.class, &quot;rememberMeServices&quot;);\r\n                ReflectionUtils.makeAccessible(rememberMeServices);\r\n                setRememberMeServices((RememberMeServices) ReflectionUtils.getField(rememberMeServices, filter));\r\n    \r\n                Field authenticationConverter = ReflectionUtils.findField(BasicAuthenticationFilter.class, &quot;authenticationConverter&quot;);\r\n                ReflectionUtils.makeAccessible(authenticationConverter);\r\n                ReflectionUtils.setField(authenticationConverter,this,ReflectionUtils.getField(authenticationConverter, filter));\r\n    \r\n                Field securityContextRepository = ReflectionUtils.findField(BasicAuthenticationFilter.class, &quot;securityContextRepository&quot;);\r\n                ReflectionUtils.makeAccessible(securityContextRepository);\r\n                setSecurityContextRepository((SecurityContextRepository) ReflectionUtils.getField(securityContextRepository, filter));\r\n            }\r\n    \r\n            @Override\r\n            protected String getCredentialsCharset( HttpServletRequest httpRequest ) {\r\n                // switch charset for some conditions\r\n                return &quot;&quot;;\r\n            }\r\n    \r\n            @Override\r\n            protected void onUnsuccessfulAuthentication(HttpServletRequest request, HttpServletResponse response,\r\n                                                        AuthenticationException failed) throws IOException {\r\n                // increase login failure count\r\n            }\r\n        }","title":"How to use custom BasicAuthenticationFilter with default configuration?","body":"<pre><code> @Bean\n    public SecurityFilterChain remotingFilterChain(HttpSecurity http) throws Exception {\n        DefaultSecurityFilterChain filterChain = http\n                .securityMatcher(&quot;/remoting/**&quot;)\n                .authorizeHttpRequests(c -&gt; c.anyRequest().authenticated())\n                .httpBasic(Customizer.withDefaults())\n                .anonymous(Customizer.withDefaults())\n                .x509(c -&gt; c.subjectPrincipalRegex(&quot;CN=(.*?)(?:,|$)&quot;))\n                .csrf(AbstractHttpConfigurer::disable)\n                .sessionManagement(AbstractHttpConfigurer::disable)\n                .build();\n        List&lt;Filter&gt; filters = filterChain.getFilters();\n        for (int i = 0; i &lt; filters.size(); i++) {\n            Filter filter = filters.get(i);\n            if(filter instanceof BasicAuthenticationFilter){\n                filters.remove(i);\n                filters.add(i,new CustomBasicAuthenticationFilter(http.getSharedObject(AuthenticationManager.class), (BasicAuthenticationFilter) filter));\n                break;\n            }\n        }\n        return filterChain;\n    }\n\n    static class CustomBasicAuthenticationFilter extends BasicAuthenticationFilter {\n\n        public CustomBasicAuthenticationFilter(AuthenticationManager authenticationManager,BasicAuthenticationFilter filter) {\n            super(authenticationManager);\n            Field authenticationEntryPoint = ReflectionUtils.findField(BasicAuthenticationFilter.class, &quot;authenticationEntryPoint&quot;);\n            ReflectionUtils.makeAccessible(authenticationEntryPoint);\n            ReflectionUtils.setField(authenticationEntryPoint,this,ReflectionUtils.getField(authenticationEntryPoint, filter));\n\n            Field securityContextHolderStrategy = ReflectionUtils.findField(BasicAuthenticationFilter.class, &quot;securityContextHolderStrategy&quot;);\n            ReflectionUtils.makeAccessible(securityContextHolderStrategy);\n            setSecurityContextHolderStrategy((SecurityContextHolderStrategy) ReflectionUtils.getField(securityContextHolderStrategy, filter));\n\n            Field rememberMeServices = ReflectionUtils.findField(BasicAuthenticationFilter.class, &quot;rememberMeServices&quot;);\n            ReflectionUtils.makeAccessible(rememberMeServices);\n            setRememberMeServices((RememberMeServices) ReflectionUtils.getField(rememberMeServices, filter));\n\n            Field authenticationConverter = ReflectionUtils.findField(BasicAuthenticationFilter.class, &quot;authenticationConverter&quot;);\n            ReflectionUtils.makeAccessible(authenticationConverter);\n            ReflectionUtils.setField(authenticationConverter,this,ReflectionUtils.getField(authenticationConverter, filter));\n\n            Field securityContextRepository = ReflectionUtils.findField(BasicAuthenticationFilter.class, &quot;securityContextRepository&quot;);\n            ReflectionUtils.makeAccessible(securityContextRepository);\n            setSecurityContextRepository((SecurityContextRepository) ReflectionUtils.getField(securityContextRepository, filter));\n        }\n\n        @Override\n        protected String getCredentialsCharset( HttpServletRequest httpRequest ) {\n            // switch charset for some conditions\n            return &quot;&quot;;\n        }\n\n        @Override\n        protected void onUnsuccessfulAuthentication(HttpServletRequest request, HttpServletResponse response,\n                                                    AuthenticationException failed) throws IOException {\n            // increase login failure count\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":57077,"reputation":39235,"user_id":170974,"accept_rate":70,"display_name":"tangens"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697097547,"creation_date":1697045317,"question_id":77275208,"body_markdown":"I&#39;m using spring security 5.8.7\r\n\r\nOne of my filter chains looks like this:\r\n\r\n    @Bean\r\n    public SecurityFilterChain remotingFilterChain( HttpSecurity http ) throws Exception {\r\n        return http\r\n                .securityMatcher( &quot;/remoting/**&quot; )\r\n                .authorizeHttpRequests()\r\n                        .anyRequest().authenticated()\r\n                        .and()\r\n                .httpBasic()\r\n                        .and()\r\n                .anonymous()\r\n                        .and()\r\n                .x509()\r\n                        .subjectPrincipalRegex( &quot;CN=(.*?)(?:,|$)&quot; )\r\n                        .and()\r\n                .csrf()\r\n                        .disable()\r\n                .sessionManagement()\r\n                        .disable()\r\n                .build();\r\n    }\r\n\r\nNow I want to customize the `BasicAuthenticationFilter` by overriding the two methods\r\n\r\n    @Override\r\n    protected String getCredentialsCharset( HttpServletRequest httpRequest ) {\r\n        // switch charset for some conditions\r\n    }\r\n\r\n    @Override\r\n\tprotected void onUnsuccessfulAuthentication(HttpServletRequest request, HttpServletResponse response,\r\n\t\t\tAuthenticationException failed) throws IOException {\r\n        // increase login failure count\r\n\t}\r\n\r\nIt looks like this should be done by implementing \r\n\r\n    class MyBasicAuthenticationFilter extends BasicAuthenticationFilter {\r\n        ...\r\n    }\r\n\r\nand calling\r\n\r\n                .addFilterAt( new MyBasicAuthenticationFilter(), BasicAuthenticationFilter.class )\r\n\r\nBut at the same time I don&#39;t want to miss the default configuration provided by the call of `http.httpBasic()`. But `HttpBasicConfigurer` is final, so I cannot extend it and override the method `configure()` where the call `new BasicAuthenticationFilter(authenticationManager, this.authenticationEntryPoint);` is made.\r\n\r\nAnother approach would be to use\r\n\r\n                .httpBasic()\r\n                        .withObjectPostProcessor( myPostProcessor )\r\n                        .and()\r\n\r\nand enhancing the originally created `BasicAuthenticationFilter` with the two overridden methods. But `BasicAuthenticationFilter` is not an interface, so I can&#39;t make use of the java `java.lang.reflect.Proxy` pattern.\r\n\r\nAny idea, how I can use a customized `BasicAuthenticationFilter` with a simple and default configuration?\r\n","title":"How to use custom BasicAuthenticationFilter with default configuration?","body":"<p>I'm using spring security 5.8.7</p>\n<p>One of my filter chains looks like this:</p>\n<pre><code>@Bean\npublic SecurityFilterChain remotingFilterChain( HttpSecurity http ) throws Exception {\n    return http\n            .securityMatcher( &quot;/remoting/**&quot; )\n            .authorizeHttpRequests()\n                    .anyRequest().authenticated()\n                    .and()\n            .httpBasic()\n                    .and()\n            .anonymous()\n                    .and()\n            .x509()\n                    .subjectPrincipalRegex( &quot;CN=(.*?)(?:,|$)&quot; )\n                    .and()\n            .csrf()\n                    .disable()\n            .sessionManagement()\n                    .disable()\n            .build();\n}\n</code></pre>\n<p>Now I want to customize the <code>BasicAuthenticationFilter</code> by overriding the two methods</p>\n<pre><code>@Override\nprotected String getCredentialsCharset( HttpServletRequest httpRequest ) {\n    // switch charset for some conditions\n}\n\n@Override\nprotected void onUnsuccessfulAuthentication(HttpServletRequest request, HttpServletResponse response,\n        AuthenticationException failed) throws IOException {\n    // increase login failure count\n}\n</code></pre>\n<p>It looks like this should be done by implementing</p>\n<pre><code>class MyBasicAuthenticationFilter extends BasicAuthenticationFilter {\n    ...\n}\n</code></pre>\n<p>and calling</p>\n<pre><code>            .addFilterAt( new MyBasicAuthenticationFilter(), BasicAuthenticationFilter.class )\n</code></pre>\n<p>But at the same time I don't want to miss the default configuration provided by the call of <code>http.httpBasic()</code>. But <code>HttpBasicConfigurer</code> is final, so I cannot extend it and override the method <code>configure()</code> where the call <code>new BasicAuthenticationFilter(authenticationManager, this.authenticationEntryPoint);</code> is made.</p>\n<p>Another approach would be to use</p>\n<pre><code>            .httpBasic()\n                    .withObjectPostProcessor( myPostProcessor )\n                    .and()\n</code></pre>\n<p>and enhancing the originally created <code>BasicAuthenticationFilter</code> with the two overridden methods. But <code>BasicAuthenticationFilter</code> is not an interface, so I can't make use of the java <code>java.lang.reflect.Proxy</code> pattern.</p>\n<p>Any idea, how I can use a customized <code>BasicAuthenticationFilter</code> with a simple and default configuration?</p>\n"},{"tags":["java","apache-httpclient-4.x"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1696805163,"post_id":77255086,"comment_id":136196475,"body_markdown":"What is `ProtocolPojo`?  That is crucial information that is missing here.","body":"What is <code>ProtocolPojo</code>?  That is crucial information that is missing here."},{"owner":{"account_id":10802683,"reputation":1,"user_id":7946022,"display_name":"Suman Mummaneni"},"score":0,"creation_date":1696830322,"post_id":77255086,"comment_id":136198058,"body_markdown":"Added the ProtocolPojo code above. This is a simple Plain old Java Object that can hold  required information for creating an HttpClient object over SSL","body":"Added the ProtocolPojo code above. This is a simple Plain old Java Object that can hold  required information for creating an HttpClient object over SSL"}],"answers":[{"tags":[],"owner":{"account_id":10802683,"reputation":1,"user_id":7946022,"display_name":"Suman Mummaneni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697096944,"creation_date":1697096944,"answer_id":77278664,"question_id":77255086,"body_markdown":"The issue is due to the below block of code. \r\n\r\n    RequestConfig reqConf = RequestConfig.custom()\r\n    .setLocalAddress(InetAddress.getLocalHost())                       \r\n    .setAuthenticationEnabled(false).setRedirectsEnabled(false)\r\n    .setConnectTimeout(10000).setSocketTimeout(15000).build();\r\n\r\n\r\nBy setting the Local Address to the InetAddress.getLocalHost() which tries to resolve the hostname and gets the resolved address is causing the problem.\r\nRemoveing that line of code solved the issue. The updated RequestConf is below.\r\n\r\n    RequestConfig reqConf = RequestConfig.custom()\r\n                     .setAuthenticationEnabled(false).setRedirectsEnabled(false)\r\n                      .setConnectTimeout(10000).setSocketTimeout(15000).build();","title":"Address family not supported by protocol using Apache HttpClient 4.5.x","body":"<p>The issue is due to the below block of code.</p>\n<pre><code>RequestConfig reqConf = RequestConfig.custom()\n.setLocalAddress(InetAddress.getLocalHost())                       \n.setAuthenticationEnabled(false).setRedirectsEnabled(false)\n.setConnectTimeout(10000).setSocketTimeout(15000).build();\n</code></pre>\n<p>By setting the Local Address to the InetAddress.getLocalHost() which tries to resolve the hostname and gets the resolved address is causing the problem.\nRemoveing that line of code solved the issue. The updated RequestConf is below.</p>\n<pre><code>RequestConfig reqConf = RequestConfig.custom()\n                 .setAuthenticationEnabled(false).setRedirectsEnabled(false)\n                  .setConnectTimeout(10000).setSocketTimeout(15000).build();\n</code></pre>\n"}],"owner":{"account_id":10802683,"reputation":1,"user_id":7946022,"display_name":"Suman Mummaneni"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697096944,"creation_date":1696794183,"question_id":77255086,"body_markdown":"I have a small application used to Test connectivity over https. I am using the Apache HttpClient 4.5 to create a HttpClient and invoking a HttpGet call. This works fine for IPv4 but when I try to connect to IPv6 this is failing with the below exception. As far as I know IPv6 must be handeled by Java.\r\n\r\n```\r\n    2023-10-05T12:04:38.906Z java.net.SocketException: Address family not supported by protocol\r\n    2023-10-05T12:04:38.906Z at java.base/sun.nio.ch.Net.connect0(Native Method)\r\n2023-10-05T12:04:38.906Z at java.base/sun.nio.ch.Net.connect(Net.java:579)\r\n2023-10-05T12:04:38.907Z at java.base/sun.nio.ch.Net.connect(Net.java:568)\r\n2023-10-05T12:04:38.907Z at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)\r\n2023-10-05T12:04:38.907Z at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\r\n2023-10-05T12:04:38.907Z at java.base/java.net.Socket.connect(Socket.java:633)\r\n2023-10-05T12:04:38.907Z at org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:368)\r\n2023-10-05T12:04:38.907Z at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\r\n2023-10-05T12:04:38.907Z at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)\r\n2023-10-05T12:04:38.907Z at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)\r\n2023-10-05T12:04:38.908Z at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\r\n2023-10-05T12:04:38.908Z at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)\r\n2023-10-05T12:04:38.908Z at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\r\n2023-10-05T12:04:38.908Z at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\r\n2023-10-05T12:04:38.908Z at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\r\n2023-10-05T12:04:38.908Z at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\r\n2023-10-05T12:04:38.908Z at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)\r\n2023-10-05T12:04:38.908Z at com.ibm.proxy.util.Connection.doTestConnection(Connection.java:123)\r\nThe TestConnection method \r\n```\r\n\r\n```\r\n`    private boolean doTestConnection(String host, ProtocolPojo protocol) {\r\n        boolean connected = false;\r\n        String serverURL = &quot;https://&quot; + host;\r\n        HttpGet getMethodProxyRequest = new HttpGet(serverURL);\r\n        HttpClientBuilder clientBuilder = HttpClients.custom();\r\n\r\n        CloseableHttpClient httpClient = clientBuilder\r\n                .setSSLSocketFactory(protocol.getSecureProtocolSocketFactory())\r\n                .build();\r\n        CloseableHttpResponse proxyResponse = null;\r\n        try {\r\n            RequestConfig reqConf = RequestConfig.custom()\r\n                    .setLocalAddress(InetAddress.getLocalHost())\r\n                    .setAuthenticationEnabled(false).setRedirectsEnabled(false)\r\n                    .setConnectTimeout(10000).setSocketTimeout(15000).build();\r\n            getMethodProxyRequest.setConfig(reqConf);\r\n            proxyResponse = httpClient.execute(getMethodProxyRequest);\r\n        } catch (UnknownHostException e) {\r\n            logException(e);\r\n            logMsgInfo(\r\n                    &quot;Proxy: not able to resolve localhost: &quot; + e.getMessage());\r\n        } catch (IOException e) {\r\n            logException(e);\r\n        } finally {\r\n            if (proxyResponse != null\r\n                    &amp;&amp; proxyResponse.getStatusLine() != null) {\r\n                logMsgInfo(\r\n                        &quot;Proxy: &quot; + proxyResponse.getStatusLine().toString());\r\n                logMsgInfo(&quot;Proxy: &quot;\r\n                        + proxyResponse.getStatusLine().getStatusCode());\r\n                connected = (proxyResponse.getStatusLine()\r\n                        .getStatusCode() == 200);\r\n            }\r\n            try {\r\n                httpClient.close();\r\n            } catch (IOException e) {\r\n                logException(e);\r\n            }\r\n        }\r\n        return connected;\r\n    }\r\n`\r\n```\r\n\r\nProtocolPojo class\r\n\r\n    public class ProtocolPojo {\r\n    \r\n        private String schema;\r\n        private int port;\r\n        private StrictSSLProtocolSocketFactory secureProtocolSocketFactory;\r\n    \r\n        public ASMProtocol(String schema,\r\n                StrictSSLProtocolSocketFactory secureProtocolSocketFactory,\r\n                int port) {\r\n            this.schema = schema;\r\n            this.port = port;\r\n            this.secureProtocolSocketFactory = secureProtocolSocketFactory;\r\n        }\r\n    \r\n        public String getSchema() {\r\n            return schema;\r\n        }\r\n    \r\n        public int getPort() {\r\n            return port;\r\n        }\r\n        \r\n        /**\r\n         * org.apache.http.conn.ssl.SSLConnectionSocketFactory - that \r\n         * can be used to verify the host certificate that is \r\n         * recived.\r\n         */\r\n        public SSLConnectionSocketFactory getSecureProtocolSocketFactory() {\r\n            return secureProtocolSocketFactory.getSSLConnectionSocketFactory();\r\n        }\r\n    \r\n    }\r\n\r\n\r\nI have checked the IPv6 manually using a web browser, and I see its working fine.\r\nI see the issue seems to be inside Apache HttpClient 4.5 is there way to handle this exception.\r\nIs this an issue with environment.\r\n","title":"Address family not supported by protocol using Apache HttpClient 4.5.x","body":"<p>I have a small application used to Test connectivity over https. I am using the Apache HttpClient 4.5 to create a HttpClient and invoking a HttpGet call. This works fine for IPv4 but when I try to connect to IPv6 this is failing with the below exception. As far as I know IPv6 must be handeled by Java.</p>\n<pre><code>    2023-10-05T12:04:38.906Z java.net.SocketException: Address family not supported by protocol\n    2023-10-05T12:04:38.906Z at java.base/sun.nio.ch.Net.connect0(Native Method)\n2023-10-05T12:04:38.906Z at java.base/sun.nio.ch.Net.connect(Net.java:579)\n2023-10-05T12:04:38.907Z at java.base/sun.nio.ch.Net.connect(Net.java:568)\n2023-10-05T12:04:38.907Z at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)\n2023-10-05T12:04:38.907Z at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n2023-10-05T12:04:38.907Z at java.base/java.net.Socket.connect(Socket.java:633)\n2023-10-05T12:04:38.907Z at org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:368)\n2023-10-05T12:04:38.907Z at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\n2023-10-05T12:04:38.907Z at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)\n2023-10-05T12:04:38.907Z at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)\n2023-10-05T12:04:38.908Z at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\n2023-10-05T12:04:38.908Z at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)\n2023-10-05T12:04:38.908Z at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\n2023-10-05T12:04:38.908Z at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\n2023-10-05T12:04:38.908Z at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\n2023-10-05T12:04:38.908Z at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\n2023-10-05T12:04:38.908Z at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)\n2023-10-05T12:04:38.908Z at com.ibm.proxy.util.Connection.doTestConnection(Connection.java:123)\nThe TestConnection method \n</code></pre>\n<pre><code>`    private boolean doTestConnection(String host, ProtocolPojo protocol) {\n        boolean connected = false;\n        String serverURL = &quot;https://&quot; + host;\n        HttpGet getMethodProxyRequest = new HttpGet(serverURL);\n        HttpClientBuilder clientBuilder = HttpClients.custom();\n\n        CloseableHttpClient httpClient = clientBuilder\n                .setSSLSocketFactory(protocol.getSecureProtocolSocketFactory())\n                .build();\n        CloseableHttpResponse proxyResponse = null;\n        try {\n            RequestConfig reqConf = RequestConfig.custom()\n                    .setLocalAddress(InetAddress.getLocalHost())\n                    .setAuthenticationEnabled(false).setRedirectsEnabled(false)\n                    .setConnectTimeout(10000).setSocketTimeout(15000).build();\n            getMethodProxyRequest.setConfig(reqConf);\n            proxyResponse = httpClient.execute(getMethodProxyRequest);\n        } catch (UnknownHostException e) {\n            logException(e);\n            logMsgInfo(\n                    &quot;Proxy: not able to resolve localhost: &quot; + e.getMessage());\n        } catch (IOException e) {\n            logException(e);\n        } finally {\n            if (proxyResponse != null\n                    &amp;&amp; proxyResponse.getStatusLine() != null) {\n                logMsgInfo(\n                        &quot;Proxy: &quot; + proxyResponse.getStatusLine().toString());\n                logMsgInfo(&quot;Proxy: &quot;\n                        + proxyResponse.getStatusLine().getStatusCode());\n                connected = (proxyResponse.getStatusLine()\n                        .getStatusCode() == 200);\n            }\n            try {\n                httpClient.close();\n            } catch (IOException e) {\n                logException(e);\n            }\n        }\n        return connected;\n    }\n`\n</code></pre>\n<p>ProtocolPojo class</p>\n<pre><code>public class ProtocolPojo {\n\n    private String schema;\n    private int port;\n    private StrictSSLProtocolSocketFactory secureProtocolSocketFactory;\n\n    public ASMProtocol(String schema,\n            StrictSSLProtocolSocketFactory secureProtocolSocketFactory,\n            int port) {\n        this.schema = schema;\n        this.port = port;\n        this.secureProtocolSocketFactory = secureProtocolSocketFactory;\n    }\n\n    public String getSchema() {\n        return schema;\n    }\n\n    public int getPort() {\n        return port;\n    }\n    \n    /**\n     * org.apache.http.conn.ssl.SSLConnectionSocketFactory - that \n     * can be used to verify the host certificate that is \n     * recived.\n     */\n    public SSLConnectionSocketFactory getSecureProtocolSocketFactory() {\n        return secureProtocolSocketFactory.getSSLConnectionSocketFactory();\n    }\n\n}\n</code></pre>\n<p>I have checked the IPv6 manually using a web browser, and I see its working fine.\nI see the issue seems to be inside Apache HttpClient 4.5 is there way to handle this exception.\nIs this an issue with environment.</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1697095313,"post_id":77278240,"comment_id":136236863,"body_markdown":"`SwingWorker` is does not provide a ready-made way to make the background work execute in parallel. You&#39;ll have to do that yourself, and make sure `doInBackground` does not return until all &quot;subtasks&quot; are done.","body":"<code>SwingWorker</code> is does not provide a ready-made way to make the background work execute in parallel. You&#39;ll have to do that yourself, and make sure <code>doInBackground</code> does not return until all &quot;subtasks&quot; are done."},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1697096363,"post_id":77278240,"comment_id":136237043,"body_markdown":"what would be the best approach? CompletableFuture.runAsync and add and update the progress there? The progress might be done on execution cause runAsync is not returning. Wenn I use supplyAsync it seems to be executing in sequential order very slow.","body":"what would be the best approach? CompletableFuture.runAsync and add and update the progress there? The progress might be done on execution cause runAsync is not returning. Wenn I use supplyAsync it seems to be executing in sequential order very slow."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697098020,"post_id":77278240,"comment_id":136237367,"body_markdown":"Your attempt to use `CompletableFuture` is flawed. Every iteration you add a new one to your list, then immediately `join` on all existing futures. That&#39;s effectively sequential. You need to launch all tasks, _then_ wait. Also, make sure your code is thread-safe (e.g., adding to `markets`).","body":"Your attempt to use <code>CompletableFuture</code> is flawed. Every iteration you add a new one to your list, then immediately <code>join</code> on all existing futures. That&#39;s effectively sequential. You need to launch all tasks, <i>then</i> wait. Also, make sure your code is thread-safe (e.g., adding to <code>markets</code>)."},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1697098907,"post_id":77278240,"comment_id":136237573,"body_markdown":"Thank you. Could you give me a hint on how to launch all tasks and then wait?","body":"Thank you. Could you give me a hint on how to launch all tasks and then wait?"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697103005,"post_id":77278240,"comment_id":136238441,"body_markdown":"In your current code, just move the calls to `join` after the loop. Note you may see decreasing progress if a task with a lower &quot;count&quot; finishes after a task with a higher &quot;count&quot;. And make sure that `markets` can be added to by multiple concurrent threads or change your implementation so that adding to `markets` is only ever added to by one thread at a time.","body":"In your current code, just move the calls to <code>join</code> after the loop. Note you may see decreasing progress if a task with a lower &quot;count&quot; finishes after a task with a higher &quot;count&quot;. And make sure that <code>markets</code> can be added to by multiple concurrent threads or change your implementation so that adding to <code>markets</code> is only ever added to by one thread at a time."},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1697103289,"post_id":77278240,"comment_id":136238504,"body_markdown":"I have wrapped the loop arround a syncronized(markets) block if that is what you mean. I dont see much of an performance improove logging putting the join after the loop, although it makes sense to put it after it for sure.","body":"I have wrapped the loop arround a syncronized(markets) block if that is what you mean. I dont see much of an performance improove logging putting the join after the loop, although it makes sense to put it after it for sure."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1697103857,"post_id":77278240,"comment_id":136238630,"body_markdown":"A `synchronized (markets)` around the loop won&#39;t do what you expect. The `Supplier` passed to `supplyAsync` is invoked asynchronously on a different thread (in the common `ForkJoinPool` in this case). That different thread is not synchronized on `markets`, so no mutual exclusion is taking place. As for performance improvements, you should see _some_ improvement if your computer has more than one processor. If you&#39;re seeing _zero_ improvement, then my guess is that something in your code makes the initialization sequential. A [mre] would be needed to say more.","body":"A <code>synchronized (markets)</code> around the loop won&#39;t do what you expect. The <code>Supplier</code> passed to <code>supplyAsync</code> is invoked asynchronously on a different thread (in the common <code>ForkJoinPool</code> in this case). That different thread is not synchronized on <code>markets</code>, so no mutual exclusion is taking place. As for performance improvements, you should see <i>some</i> improvement if your computer has more than one processor. If you&#39;re seeing <i>zero</i> improvement, then my guess is that something in your code makes the initialization sequential. A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be needed to say more."}],"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697096444,"creation_date":1697092831,"question_id":77278240,"body_markdown":"I have a class that extends SwingWorker and iterates a list of objects to create new objects inside the doInbackground method. The issue I have is, that the object instantiation for each newly generated Market object takes about 1 second due to its initialize method that is getting called in the constructor.\r\n\r\nIs there any way to increase the performance of my doInbackground so that the loop and object creation runs in parallel?\r\n\r\n    @Override\r\n    protected Void doInBackground() throws Exception {\r\n        System.out.println(&quot;Market loader running task with ticker size; &quot; + this.ticker.size());\r\n        synchronized (markets) {\r\n            for (int i = 0; i &lt; ticker.size(); i++) {\r\n                TickerStatistics t = this.ticker.get(i);\r\n                markets.add(new Market(t.getSymbol(), this.interval));  //this takes aprox. 1 second everytime so it is all executed sequentially\r\n                setProgress(100 * i / ticker.size());\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\nI also tried this approach now but the speed is very slow as well as it seems to be running sequentially too.\r\n\r\n     protected Void doInBackground() throws Exception {\r\n        System.out.println(&quot;Market loader running task with ticker size; &quot; + this.ticker.size());\r\n        List&lt;CompletableFuture&gt; futureList = new ArrayList&lt;&gt;();\r\n        for (int i = 0; i &lt; ticker.size(); i++) {\r\n            TickerStatistics t = this.ticker.get(i);\r\n            int count = i+1;\r\n            futureList.add(CompletableFuture.supplyAsync(() -&gt; markets.add(new Market(t.getSymbol(), interval))).thenAccept(progress -&gt; setProgress(100 * count / ticker.size())));\r\n            futureList.forEach(CompletableFuture::join);\r\n        }\r\n        return null;\r\n    }","title":"Increase Performance in SwingWorkers doInBackground","body":"<p>I have a class that extends SwingWorker and iterates a list of objects to create new objects inside the doInbackground method. The issue I have is, that the object instantiation for each newly generated Market object takes about 1 second due to its initialize method that is getting called in the constructor.</p>\n<p>Is there any way to increase the performance of my doInbackground so that the loop and object creation runs in parallel?</p>\n<pre><code>@Override\nprotected Void doInBackground() throws Exception {\n    System.out.println(&quot;Market loader running task with ticker size; &quot; + this.ticker.size());\n    synchronized (markets) {\n        for (int i = 0; i &lt; ticker.size(); i++) {\n            TickerStatistics t = this.ticker.get(i);\n            markets.add(new Market(t.getSymbol(), this.interval));  //this takes aprox. 1 second everytime so it is all executed sequentially\n            setProgress(100 * i / ticker.size());\n        }\n    }\n    return null;\n}\n</code></pre>\n<p>I also tried this approach now but the speed is very slow as well as it seems to be running sequentially too.</p>\n<pre><code> protected Void doInBackground() throws Exception {\n    System.out.println(&quot;Market loader running task with ticker size; &quot; + this.ticker.size());\n    List&lt;CompletableFuture&gt; futureList = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; ticker.size(); i++) {\n        TickerStatistics t = this.ticker.get(i);\n        int count = i+1;\n        futureList.add(CompletableFuture.supplyAsync(() -&gt; markets.add(new Market(t.getSymbol(), interval))).thenAccept(progress -&gt; setProgress(100 * count / ticker.size())));\n        futureList.forEach(CompletableFuture::join);\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697021985,"post_id":77272397,"comment_id":136226332,"body_markdown":"Why not just a JPQL and use the between keyword (which would work in SQL as well).","body":"Why not just a JPQL and use the between keyword (which would work in SQL as well)."}],"answers":[{"tags":[],"owner":{"account_id":12128873,"reputation":19,"user_id":10440470,"display_name":"bhimantoro suryo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697096310,"creation_date":1697092255,"answer_id":77278182,"question_id":77272397,"body_markdown":"in your service/controller class\r\n    \r\n    Instant startInstant = ...\r\n    ZonedDateTime start = ZonedDateTime.ofInstant(startInstant, ZoneId.of(&quot;Europe/Paris&quot;));\r\n    // do the same thing for end datetime\r\n    \r\n    // call productRepository bean\r\n    productRepository.deleteByIdAndDeliveryDate(id, start, end);\r\n\r\nand your repository method\r\n\r\n    void deleteByIdAndDeliveryDate(@Param(&quot;id&quot;)Long Id, @Param(&quot;start&quot;)ZonedDateTime start, @Param(&quot;end&quot;)ZonedDateTime end);\r\n\r\nin your native query\r\n\r\n    DELETE FROM product WHERE id = :id and (delivery BETWEEN :start AND :end)","title":"JpaRepository - delete records between two zoneDateTime in spring boot","body":"<p>in your service/controller class</p>\n<pre><code>Instant startInstant = ...\nZonedDateTime start = ZonedDateTime.ofInstant(startInstant, ZoneId.of(&quot;Europe/Paris&quot;));\n// do the same thing for end datetime\n\n// call productRepository bean\nproductRepository.deleteByIdAndDeliveryDate(id, start, end);\n</code></pre>\n<p>and your repository method</p>\n<pre><code>void deleteByIdAndDeliveryDate(@Param(&quot;id&quot;)Long Id, @Param(&quot;start&quot;)ZonedDateTime start, @Param(&quot;end&quot;)ZonedDateTime end);\n</code></pre>\n<p>in your native query</p>\n<pre><code>DELETE FROM product WHERE id = :id and (delivery BETWEEN :start AND :end)\n</code></pre>\n"}],"owner":{"account_id":5759686,"reputation":315,"user_id":4546488,"display_name":"obela06"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697096310,"creation_date":1697021838,"question_id":77272397,"body_markdown":"I&#39;m trying to use a native query in jpaRepository Spring boot to delete records between two dates(timestamp with zone time)\r\n\r\nEntity class\r\n\r\n\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @Entity(name = &quot;Products&quot;)\r\n    public class Products {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private long id;\r\n    \r\n    \r\n        @Column(nullable = false)\r\n        private String code;\r\n    \r\n        @Column(nullable = false)\r\n        private ZonedDateTime delivery;\r\n    \r\n     }\r\n\r\nRepository class\r\n\r\n    @Repository\r\n    public interface ProductRepository extends JpaRepository&lt;Products, Long&gt; {\r\n        \r\n    \r\n        @Modifying\r\n        void deleteByIdAndDeliveryDate(@Param(&quot;id&quot;)Long Id, @Param(&quot;start&quot;)Instant instant1, @Param(&quot;end&quot;)Instant instant2);\r\n        @Query(value = &quot;DELETE FROM product p WHERE p.id = :id and :start&lt;=p.delivery &lt;=:end &quot;, nativeQuery = true)\r\n    \r\n    }\r\n\r\nmy problem is How to convert my Instant Date to Timestamp with time zone and how to get example all record between this two date in date base : 2020-09-05 15:43:05.713424+02 and 2020-10-05 15:43:05.713424+02\r\n\r\nHow can i write a good native query to delete this","title":"JpaRepository - delete records between two zoneDateTime in spring boot","body":"<p>I'm trying to use a native query in jpaRepository Spring boot to delete records between two dates(timestamp with zone time)</p>\n<p>Entity class</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@Entity(name = &quot;Products&quot;)\npublic class Products {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private long id;\n\n\n    @Column(nullable = false)\n    private String code;\n\n    @Column(nullable = false)\n    private ZonedDateTime delivery;\n\n }\n</code></pre>\n<p>Repository class</p>\n<pre><code>@Repository\npublic interface ProductRepository extends JpaRepository&lt;Products, Long&gt; {\n    \n\n    @Modifying\n    void deleteByIdAndDeliveryDate(@Param(&quot;id&quot;)Long Id, @Param(&quot;start&quot;)Instant instant1, @Param(&quot;end&quot;)Instant instant2);\n    @Query(value = &quot;DELETE FROM product p WHERE p.id = :id and :start&lt;=p.delivery &lt;=:end &quot;, nativeQuery = true)\n\n}\n</code></pre>\n<p>my problem is How to convert my Instant Date to Timestamp with time zone and how to get example all record between this two date in date base : 2020-09-05 15:43:05.713424+02 and 2020-10-05 15:43:05.713424+02</p>\n<p>How can i write a good native query to delete this</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3888257,"reputation":111,"user_id":5532932,"display_name":"muratcanyeldan"},"score":0,"creation_date":1697091947,"post_id":77278092,"comment_id":136236290,"body_markdown":"Does this answer your question? [Java - Where should I initialise variables for memory efficiency?](https://stackoverflow.com/questions/16131221/java-where-should-i-initialise-variables-for-memory-efficiency)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/16131221/java-where-should-i-initialise-variables-for-memory-efficiency\">Java - Where should I initialise variables for memory efficiency?</a>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1697097206,"post_id":77278092,"comment_id":136237205,"body_markdown":"There isn’t any efficiency difference. It’s recommended to declare only one variable in each declaration, so terminate each line with semicolon (`;`) and start each new line with `int`.","body":"There isn’t any efficiency difference. It’s recommended to declare only one variable in each declaration, so terminate each line with semicolon (<code>;</code>) and start each new line with <code>int</code>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1697097528,"post_id":77278092,"comment_id":136237268,"body_markdown":"As an aside using `Math.random()` for random integers is not my preferred way, and both of your numbers will be 0 always. Since Java 17 use the [`java.util.random`](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/random/package-summary.html) package.","body":"As an aside using <code>Math.random()</code> for random integers is not my preferred way, and both of your numbers will be 0 always. Since Java 17 use the <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/random/package-summary.html\" rel=\"nofollow noreferrer\"><code>java.util.random</code></a> package."}],"answers":[{"tags":[],"owner":{"account_id":11363645,"reputation":2645,"user_id":8331157,"display_name":"BenjyTec"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697095793,"creation_date":1697092726,"answer_id":77278227,"question_id":77278092,"body_markdown":"In general, it is perfectly fine to do so in Java. Regarding the performance and memory consumption, your approach will make no  difference compared to a line-by-line declaration of your variables like so:\r\n\r\n    int num1 = (int) Math.random();\r\n    int num2 = (int) Math.random();\r\n    int sum  = (num1 + num2);\r\n\r\nThe default Java compiler will transform your variable declarations into optimized machine code, so the two different approaches usually result in the same bytecode being executed by the Java Virtual Machine on the end device.\r\n\r\nI tested the output of the standard compiler that comes with [OpenJDK17][1]. &lt;br&gt; I created two test files named `TestFileSL.java` (single-line variable declaration) and `TestFileML.java` (multi-line variable declaration) and then compiled them to .class files using the `javac` command. Then I printed the content of the class files using the `javap -c` command. The output of the two files is provided below. As you can see, they are absolutely identical aside from the class name:\r\n\r\n------------------------------------\r\n\r\n    public class TestFileSL {\r\n      public TestFileSL();\r\n        Code:\r\n           0: aload_0\r\n           1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\r\n           4: return\r\n    \r\n      public static void main(java.lang.String[]);\r\n        Code:\r\n           0: invokestatic  #7                  // Method java/lang/Math.random:()D\r\n           3: d2i\r\n           4: istore_1\r\n           5: invokestatic  #7                  // Method java/lang/Math.random:()D\r\n           8: d2i\r\n           9: istore_2\r\n          10: iload_1\r\n          11: iload_2\r\n          12: iadd\r\n          13: istore_3\r\n          14: getstatic     #13                 // Field java/lang/System.out:Ljava/io/PrintStream;\r\n          17: iload_3\r\n          18: invokedynamic #19,  0             // InvokeDynamic #0:makeConcatWithConstants:(I)Ljava/lang/String;\r\n          23: invokevirtual #23                 // Method java/io/PrintStream.print:(Ljava/lang/String;)V\r\n          26: return\r\n    }\r\n\r\n------------------------------------------------\r\n\r\n    public class TestFileML {\r\n      public TestFileML();\r\n        Code:\r\n           0: aload_0\r\n           1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\r\n           4: return\r\n    \r\n      public static void main(java.lang.String[]);\r\n        Code:\r\n           0: invokestatic  #7                  // Method java/lang/Math.random:()D\r\n           3: d2i\r\n           4: istore_1\r\n           5: invokestatic  #7                  // Method java/lang/Math.random:()D\r\n           8: d2i\r\n           9: istore_2\r\n          10: iload_1\r\n          11: iload_2\r\n          12: iadd\r\n          13: istore_3\r\n          14: getstatic     #13                 // Field java/lang/System.out:Ljava/io/PrintStream;\r\n          17: iload_3\r\n          18: invokedynamic #19,  0             // InvokeDynamic #0:makeConcatWithConstants:(I)Ljava/lang/String;\r\n          23: invokevirtual #23                 // Method java/io/PrintStream.print:(Ljava/lang/String;)V\r\n          26: return\r\n    }\r\n\r\n------------------------------------------------\r\nAs a side note, if you code is using the static method [`Math.random()`][2] of the `java.lang.Math` package, this method returns a random `double` between 0 and 1. So when casting this to an `int`, the variables and the sum will always be 0. To access a static method of a class, you write the class name, so in your case it should be `Math.random()` instead of `math.random()`.\r\n\r\n\r\n  [1]: https://openjdk.org/projects/jdk/17/\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#random--","title":"Initialization in declaration","body":"<p>In general, it is perfectly fine to do so in Java. Regarding the performance and memory consumption, your approach will make no  difference compared to a line-by-line declaration of your variables like so:</p>\n<pre><code>int num1 = (int) Math.random();\nint num2 = (int) Math.random();\nint sum  = (num1 + num2);\n</code></pre>\n<p>The default Java compiler will transform your variable declarations into optimized machine code, so the two different approaches usually result in the same bytecode being executed by the Java Virtual Machine on the end device.</p>\n<p>I tested the output of the standard compiler that comes with <a href=\"https://openjdk.org/projects/jdk/17/\" rel=\"nofollow noreferrer\">OpenJDK17</a>. <br> I created two test files named <code>TestFileSL.java</code> (single-line variable declaration) and <code>TestFileML.java</code> (multi-line variable declaration) and then compiled them to .class files using the <code>javac</code> command. Then I printed the content of the class files using the <code>javap -c</code> command. The output of the two files is provided below. As you can see, they are absolutely identical aside from the class name:</p>\n<hr />\n<pre><code>public class TestFileSL {\n  public TestFileSL();\n    Code:\n       0: aload_0\n       1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\n       4: return\n\n  public static void main(java.lang.String[]);\n    Code:\n       0: invokestatic  #7                  // Method java/lang/Math.random:()D\n       3: d2i\n       4: istore_1\n       5: invokestatic  #7                  // Method java/lang/Math.random:()D\n       8: d2i\n       9: istore_2\n      10: iload_1\n      11: iload_2\n      12: iadd\n      13: istore_3\n      14: getstatic     #13                 // Field java/lang/System.out:Ljava/io/PrintStream;\n      17: iload_3\n      18: invokedynamic #19,  0             // InvokeDynamic #0:makeConcatWithConstants:(I)Ljava/lang/String;\n      23: invokevirtual #23                 // Method java/io/PrintStream.print:(Ljava/lang/String;)V\n      26: return\n}\n</code></pre>\n<hr />\n<pre><code>public class TestFileML {\n  public TestFileML();\n    Code:\n       0: aload_0\n       1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\n       4: return\n\n  public static void main(java.lang.String[]);\n    Code:\n       0: invokestatic  #7                  // Method java/lang/Math.random:()D\n       3: d2i\n       4: istore_1\n       5: invokestatic  #7                  // Method java/lang/Math.random:()D\n       8: d2i\n       9: istore_2\n      10: iload_1\n      11: iload_2\n      12: iadd\n      13: istore_3\n      14: getstatic     #13                 // Field java/lang/System.out:Ljava/io/PrintStream;\n      17: iload_3\n      18: invokedynamic #19,  0             // InvokeDynamic #0:makeConcatWithConstants:(I)Ljava/lang/String;\n      23: invokevirtual #23                 // Method java/io/PrintStream.print:(Ljava/lang/String;)V\n      26: return\n}\n</code></pre>\n<hr />\n<p>As a side note, if you code is using the static method <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#random--\" rel=\"nofollow noreferrer\"><code>Math.random()</code></a> of the <code>java.lang.Math</code> package, this method returns a random <code>double</code> between 0 and 1. So when casting this to an <code>int</code>, the variables and the sum will always be 0. To access a static method of a class, you write the class name, so in your case it should be <code>Math.random()</code> instead of <code>math.random()</code>.</p>\n"}],"owner":{"account_id":25733749,"reputation":3,"user_id":19488882,"display_name":"Abhijit Bhangale"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1697102547,"accepted_answer_id":77278227,"answer_count":1,"score":-2,"last_activity_date":1697096306,"creation_date":1697091194,"question_id":77278092,"body_markdown":"In Java, is the below code a good practice or bad also suggest a memory-efficient way\r\n\r\n```\r\nint num1 = (int) Math.random(),\r\n    num2 = (int) Math.random(),\r\n    sum  = (num1 + num2);\r\n \r\nSystem.out.print(&quot;sum is &quot; + sum);\r\n```\r\n\r\nI want to know the efficient and most appropriate convention.","title":"Initialization in declaration","body":"<p>In Java, is the below code a good practice or bad also suggest a memory-efficient way</p>\n<pre><code>int num1 = (int) Math.random(),\n    num2 = (int) Math.random(),\n    sum  = (num1 + num2);\n \nSystem.out.print(&quot;sum is &quot; + sum);\n</code></pre>\n<p>I want to know the efficient and most appropriate convention.</p>\n"},{"tags":["java","spring","spring-boot","swagger","swagger-ui"],"answers":[{"tags":[],"owner":{"account_id":14194880,"reputation":1483,"user_id":10254476,"display_name":"GJohannes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672844347,"creation_date":1672844040,"answer_id":75007209,"question_id":75007163,"body_markdown":"Have you tried the default ? Remove \r\n\r\n    springdoc.swagger-ui.path=/swagger-ui.html\r\n\r\nand access\r\n\r\n`http://localhost:8081/swagger-ui/index.html`","title":"Swagger-ui blank white screen (Spring Boot - Swagger)","body":"<p>Have you tried the default ? Remove</p>\n<pre><code>springdoc.swagger-ui.path=/swagger-ui.html\n</code></pre>\n<p>and access</p>\n<p><code>http://localhost:8081/swagger-ui/index.html</code></p>\n"}],"owner":{"account_id":11976502,"reputation":420,"user_id":14686302,"display_name":"kernel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":606,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697096032,"creation_date":1672843807,"question_id":75007163,"body_markdown":"When I integrate Swagger into spring project, Swagger blank page comes up.\r\nWhen I try to reach Swagger with the following url, a blank page comes up.\r\nhttp://localhost:8081/swagger-ui.html\r\n\r\n**pom.xml**\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n        &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n        &lt;version&gt;1.6.14&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**main class**\r\n\r\n    @SpringBootApplication\r\n    public class ExampleMain {\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(ExampleMain.class, args);\r\n        }\r\n    }\r\n\r\n**application.properties**\r\n\r\n    server.port=8081\r\n    springdoc.swagger-ui.path=/swagger-ui.html\r\n\r\n**Security class**\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig {\r\n        @Bean\r\n        public SecurityFilterChain configure(HttpSecurity http) throws Exception {\r\n            http.authorizeRequests().antMatchers(&quot;/**&quot;).permitAll();\r\n            return http.build();\r\n        }\r\n    }\r\n\r\nHow can I fix?","title":"Swagger-ui blank white screen (Spring Boot - Swagger)","body":"<p>When I integrate Swagger into spring project, Swagger blank page comes up.\nWhen I try to reach Swagger with the following url, a blank page comes up.\nhttp://localhost:8081/swagger-ui.html</p>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;version&gt;2.7.4&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n    &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n    &lt;version&gt;1.6.14&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>main class</strong></p>\n<pre><code>@SpringBootApplication\npublic class ExampleMain {\n    public static void main(String[] args) {\n        SpringApplication.run(ExampleMain.class, args);\n    }\n}\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>server.port=8081\nspringdoc.swagger-ui.path=/swagger-ui.html\n</code></pre>\n<p><strong>Security class</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    @Bean\n    public SecurityFilterChain configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests().antMatchers(&quot;/**&quot;).permitAll();\n        return http.build();\n    }\n}\n</code></pre>\n<p>How can I fix?</p>\n"},{"tags":["java","gradle","intellij-idea","log4j","slf4j"],"answers":[{"tags":[],"owner":{"account_id":6955106,"reputation":31,"user_id":5424036,"display_name":"Karolis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696873292,"creation_date":1696873292,"answer_id":77260823,"question_id":77260571,"body_markdown":"Should it not be `log4j.xml`? In the resources path.","title":"Why log4j can&#39;t find the configuration file","body":"<p>Should it not be <code>log4j.xml</code>? In the resources path.</p>\n"},{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697095660,"creation_date":1697095660,"answer_id":77278514,"question_id":77260571,"body_markdown":"It&#39;s a dependency problem. You have multiple logging backends on your classpath:\r\n\r\n - [`log4j-core`](https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core/2.20.0), which you added explicitly,\r\n - [`reload4j`](https://mvnrepository.com/artifact/ch.qos.reload4j/reload4j/1.2.22), which is a transitive dependency of the SLF4J provider for Reload4j ([`slf4j-reload4j`](https://mvnrepository.com/artifact/org.slf4j/slf4j-reload4j/2.0.9), which you added explicitly).\r\n\r\nYour dependencies also lack the SLF4J 2.x to Log4j API bridge [`log4j-slf4j2-impl`](https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-slf4j2-impl), so messages logged using SLF4J will end up in Reload4j and those logged using the Log4j API will end up in Log4j Core.\r\n\r\nThe solution to this problem depends on the logging API you are using:\r\n\r\n - if you use the Log4j API you need these explicit dependencies:\r\n   ```lang-groovy\r\n   dependencies {\r\n    implementation &#39;org.apache.logging.log4j:log4j-api:2.20.0&#39;\r\n    runtimeOnly &#39;org.apache.logging.log4j:log4j-core:2.20.0&#39;\r\n    // required by the libraries that use SLF4J\r\n    runtimeOnly &#39;org.apache.logging.log4j:log4j-slf4j2-impl:2.20.0&#39;\r\n   }\r\n   ```\r\n - if you use SLF4J you need these explicit dependencies:\r\n   ```lang-groovy\r\n   dependencies {\r\n    implementation &#39;org.slf4j:slf4j-api:2.0.9&#39;\r\n    runtimeOnly &#39;org.apache.logging.log4j:log4j-slf4j2-impl:2.20.0&#39;\r\n    runtimeOnly &#39;org.apache.logging.log4j:log4j-core:2.20.0&#39;\r\n   }\r\n   ```","title":"Why log4j can&#39;t find the configuration file","body":"<p>It's a dependency problem. You have multiple logging backends on your classpath:</p>\n<ul>\n<li><a href=\"https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core/2.20.0\" rel=\"nofollow noreferrer\"><code>log4j-core</code></a>, which you added explicitly,</li>\n<li><a href=\"https://mvnrepository.com/artifact/ch.qos.reload4j/reload4j/1.2.22\" rel=\"nofollow noreferrer\"><code>reload4j</code></a>, which is a transitive dependency of the SLF4J provider for Reload4j (<a href=\"https://mvnrepository.com/artifact/org.slf4j/slf4j-reload4j/2.0.9\" rel=\"nofollow noreferrer\"><code>slf4j-reload4j</code></a>, which you added explicitly).</li>\n</ul>\n<p>Your dependencies also lack the SLF4J 2.x to Log4j API bridge <a href=\"https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-slf4j2-impl\" rel=\"nofollow noreferrer\"><code>log4j-slf4j2-impl</code></a>, so messages logged using SLF4J will end up in Reload4j and those logged using the Log4j API will end up in Log4j Core.</p>\n<p>The solution to this problem depends on the logging API you are using:</p>\n<ul>\n<li>if you use the Log4j API you need these explicit dependencies:\n<pre class=\"lang-groovy prettyprint-override\"><code>dependencies {\n implementation 'org.apache.logging.log4j:log4j-api:2.20.0'\n runtimeOnly 'org.apache.logging.log4j:log4j-core:2.20.0'\n // required by the libraries that use SLF4J\n runtimeOnly 'org.apache.logging.log4j:log4j-slf4j2-impl:2.20.0'\n}\n</code></pre>\n</li>\n<li>if you use SLF4J you need these explicit dependencies:\n<pre class=\"lang-groovy prettyprint-override\"><code>dependencies {\n implementation 'org.slf4j:slf4j-api:2.0.9'\n runtimeOnly 'org.apache.logging.log4j:log4j-slf4j2-impl:2.20.0'\n runtimeOnly 'org.apache.logging.log4j:log4j-core:2.20.0'\n}\n</code></pre>\n</li>\n</ul>\n"}],"owner":{"account_id":26579956,"reputation":3,"user_id":20204759,"display_name":"gerosd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77278514,"answer_count":2,"score":0,"last_activity_date":1697095660,"creation_date":1696870419,"question_id":77260571,"body_markdown":"why Intellij Idea gives the error \r\nlog4j:WARN No appenders could be found for logger (org.gerosd.Manager).\r\nlog4j:WARN Please initialize the log4j system properly.\r\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.?\r\n\r\nManager.java \r\n\r\n```\r\npackage org.gerosd;\r\n\r\nimport org.apache.log4j.PropertyConfigurator;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\npublic class Manager {\r\n    private static final Logger logger = LoggerFactory.getLogger(Manager.class);\r\n\r\n    public static void main(String[] args) {\r\n        PropertyConfigurator.configure(&quot;D:/work/projects/Log4j/src/main/resources/log4j2.xml&quot;);\r\n        logger.info(&quot;Hello World&quot;);\r\n    }\r\n}\r\n\r\n```\r\n\r\nlog4j2.xml\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;WARN&quot;&gt;\r\n    &lt;Appenders&gt;\r\n        &lt;Console name=&quot;LogToConsole&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot;/&gt;\r\n        &lt;/Console&gt;\r\n        &lt;RollingFile name=&quot;LogToRollingFile&quot; fileName=&quot;logs/app.log&quot;\r\n                     filePattern=&quot;logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz&quot;&gt;\r\n            &lt;PatternLayout&gt;\r\n                &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;\r\n            &lt;/PatternLayout&gt;\r\n            &lt;Policies&gt;\r\n                &lt;TimeBasedTriggeringPolicy /&gt;\r\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\r\n            &lt;/Policies&gt;\r\n        &lt;/RollingFile&gt;\r\n\r\n    &lt;/Appenders&gt;\r\n    &lt;Loggers&gt;\r\n        &lt;!-- avoid duplicated logs with additivity=false --&gt;\r\n         &lt;Logger name=&quot;org.gerosd.Manager&quot; level=&quot;warn&quot; additivity=&quot;false&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;LogToRollingFile&quot;/&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;Root level=&quot;warn&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;LogToConsole&quot;/&gt;\r\n        &lt;/Root&gt;\r\n    &lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\n\r\nbuild.gradle\r\n\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n}\r\n\r\ngroup = &#39;org.gerosd&#39;\r\nversion = &#39;1.0-SNAPSHOT&#39;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.apache.logging.log4j:log4j-core:2.20.0&#39;\r\n    implementation &#39;org.apache.logging.log4j:log4j-api:2.20.0&#39;\r\n    implementation &#39;org.slf4j:slf4j-api:2.0.9&#39;\r\n    implementation &#39;org.slf4j:slf4j-reload4j:2.0.9&#39;\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\nI tried adding &#39;org.apache.logging.log4j:log4j-slf4j2-impl:2.20.0&#39;, but in this case the configuration was also not read and the error was not written to the console.","title":"Why log4j can&#39;t find the configuration file","body":"<p>why Intellij Idea gives the error\nlog4j:WARN No appenders could be found for logger (org.gerosd.Manager).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See <a href=\"http://logging.apache.org/log4j/1.2/faq.html#noconfig\" rel=\"nofollow noreferrer\">http://logging.apache.org/log4j/1.2/faq.html#noconfig</a> for more info.?</p>\n<p>Manager.java</p>\n<pre><code>package org.gerosd;\n\nimport org.apache.log4j.PropertyConfigurator;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class Manager {\n    private static final Logger logger = LoggerFactory.getLogger(Manager.class);\n\n    public static void main(String[] args) {\n        PropertyConfigurator.configure(&quot;D:/work/projects/Log4j/src/main/resources/log4j2.xml&quot;);\n        logger.info(&quot;Hello World&quot;);\n    }\n}\n\n</code></pre>\n<p>log4j2.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;WARN&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;LogToConsole&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot;/&gt;\n        &lt;/Console&gt;\n        &lt;RollingFile name=&quot;LogToRollingFile&quot; fileName=&quot;logs/app.log&quot;\n                     filePattern=&quot;logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz&quot;&gt;\n            &lt;PatternLayout&gt;\n                &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy /&gt;\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\n            &lt;/Policies&gt;\n        &lt;/RollingFile&gt;\n\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;!-- avoid duplicated logs with additivity=false --&gt;\n         &lt;Logger name=&quot;org.gerosd.Manager&quot; level=&quot;warn&quot; additivity=&quot;false&quot;&gt;\n            &lt;AppenderRef ref=&quot;LogToRollingFile&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Root level=&quot;warn&quot;&gt;\n            &lt;AppenderRef ref=&quot;LogToConsole&quot;/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>build.gradle</p>\n<pre><code>plugins {\n    id 'java'\n}\n\ngroup = 'org.gerosd'\nversion = '1.0-SNAPSHOT'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.apache.logging.log4j:log4j-core:2.20.0'\n    implementation 'org.apache.logging.log4j:log4j-api:2.20.0'\n    implementation 'org.slf4j:slf4j-api:2.0.9'\n    implementation 'org.slf4j:slf4j-reload4j:2.0.9'\n}\n</code></pre>\n<p>I tried adding 'org.apache.logging.log4j:log4j-slf4j2-impl:2.20.0', but in this case the configuration was also not read and the error was not written to the console.</p>\n"},{"tags":["java","xml","maven","jar","java-websocket"],"owner":{"account_id":28688199,"reputation":1,"user_id":21968015,"display_name":"XAP3X"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697095516,"creation_date":1697095516,"question_id":77278504,"body_markdown":"Any one know why i keep getting this error when running a jar? java.lang.NoClassDefFoundError: org/java_websocket/server/WebSocketServer\r\n\r\nI added dependency and shaded the external library into .jar\r\nMy dependency in pom.xml:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.java-websocket&lt;/groupId&gt;\r\n    &lt;artifactId&gt;Java-WebSocket&lt;/artifactId&gt;\r\n    &lt;version&gt;1.5.4&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Builded .jar cannot find org/java_websocket/server/WebSocketServer class","body":"<p>Any one know why i keep getting this error when running a jar? java.lang.NoClassDefFoundError: org/java_websocket/server/WebSocketServer</p>\n<p>I added dependency and shaded the external library into .jar\nMy dependency in pom.xml:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.java-websocket&lt;/groupId&gt;\n    &lt;artifactId&gt;Java-WebSocket&lt;/artifactId&gt;\n    &lt;version&gt;1.5.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","docker","jvm"],"answers":[{"tags":[],"owner":{"account_id":5554540,"reputation":1840,"user_id":4406418,"display_name":"Phil E"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1657709070,"creation_date":1502113403,"answer_id":45548438,"question_id":45541242,"body_markdown":"It is quite possible that memory cgroup accounting is not enabled in your kernel (which is a [common problem](https://github.com/moby/moby/issues/18420) that others have hit as well over time on Debian/Ubuntu based installs).\r\n\r\nCan you verify with `docker info` or the output from the daemon that you aren&#39;t seeing messages like the following, nicely summarized in this blog post: [Debian Jessie w/Docker](http://web.archive.org/web/20170625185736/https://awhitehatter.me/debian-jessie-wdocker/)? If so, the fix is also listed there, as well as in the GitHub issue I linked in the first sentence. There is also a section in the install documentation about [enabling cgroup memory accounting](https://docs.docker.com/engine/installation/linux/linux-postinstall/#your-kernel-does-not-support-cgroup-swap-limit-capabilities) although it only mentions Ubuntu and not Debian.","title":"docker stats shows zero memory usage even for running containers","body":"<p>It is quite possible that memory cgroup accounting is not enabled in your kernel (which is a <a href=\"https://github.com/moby/moby/issues/18420\" rel=\"nofollow noreferrer\">common problem</a> that others have hit as well over time on Debian/Ubuntu based installs).</p>\n<p>Can you verify with <code>docker info</code> or the output from the daemon that you aren't seeing messages like the following, nicely summarized in this blog post: <a href=\"http://web.archive.org/web/20170625185736/https://awhitehatter.me/debian-jessie-wdocker/\" rel=\"nofollow noreferrer\">Debian Jessie w/Docker</a>? If so, the fix is also listed there, as well as in the GitHub issue I linked in the first sentence. There is also a section in the install documentation about <a href=\"https://docs.docker.com/engine/installation/linux/linux-postinstall/#your-kernel-does-not-support-cgroup-swap-limit-capabilities\" rel=\"nofollow noreferrer\">enabling cgroup memory accounting</a> although it only mentions Ubuntu and not Debian.</p>\n"},{"tags":[],"owner":{"account_id":14431530,"reputation":1,"user_id":15472407,"display_name":"Zoli Barna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650737347,"creation_date":1650737347,"answer_id":71982400,"question_id":45541242,"body_markdown":"Ubuntu 20.04,\r\n\r\n    GRUB_CMDLINE_LINUX=&quot;cgroup_enable=memory swapaccount=1&quot;\r\n\r\n\r\nI had a same issue until I did not **removed** the oom-kill-disable from my yaml file. \r\n\r\n            --memory=1500m \\\r\n       # --oom-kill-disable \\\r\n","title":"docker stats shows zero memory usage even for running containers","body":"<p>Ubuntu 20.04,</p>\n<pre><code>GRUB_CMDLINE_LINUX=&quot;cgroup_enable=memory swapaccount=1&quot;\n</code></pre>\n<p>I had a same issue until I did not <strong>removed</strong> the oom-kill-disable from my yaml file.</p>\n<pre><code>        --memory=1500m \\\n   # --oom-kill-disable \\\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5650328,"reputation":1113,"user_id":4471199,"display_name":"RoBeaToZ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697095505,"creation_date":1697095505,"answer_id":77278502,"question_id":45541242,"body_markdown":"I encountered the same issue on my Raspberry Pi. To resolve it, I added the following parameters to the `/boot/cmdline.txt` file: `cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1`.\r\n\r\nSources:\r\n\r\n- https://github.com/docker/for-linux/issues/1112#issuecomment-699512425\r\n- https://forums.raspberrypi.com//viewtopic.php?t=203128","title":"docker stats shows zero memory usage even for running containers","body":"<p>I encountered the same issue on my Raspberry Pi. To resolve it, I added the following parameters to the <code>/boot/cmdline.txt</code> file: <code>cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1</code>.</p>\n<p>Sources:</p>\n<ul>\n<li><a href=\"https://github.com/docker/for-linux/issues/1112#issuecomment-699512425\" rel=\"nofollow noreferrer\">https://github.com/docker/for-linux/issues/1112#issuecomment-699512425</a></li>\n<li><a href=\"https://forums.raspberrypi.com//viewtopic.php?t=203128\" rel=\"nofollow noreferrer\">https://forums.raspberrypi.com//viewtopic.php?t=203128</a></li>\n</ul>\n"}],"owner":{"account_id":3333889,"reputation":3989,"user_id":5053865,"accept_rate":100,"display_name":"Evgeny Veretennikov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9447,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":45548438,"answer_count":3,"score":8,"last_activity_date":1697095505,"creation_date":1502089974,"question_id":45541242,"body_markdown":"I have two containers ran by Docker Swarm:\r\n\r\n    # docker ps\r\n    CONTAINER ID        IMAGE                               COMMAND                  CREATED             STATUS              PORTS               NAMES\r\n    18f1e7d79f5b        default/image1:latest               &quot;/bin/sh -c &#39;java ...&quot;   12 hours ago        Up 12 hours                             image1.1.x56zz152kmqtqpxzle5nkbs8r\r\n    11d1f05fcff1        default/image2:latest               &quot;java -cp /app/sca...&quot;   13 hours ago        Up 13 hours                             image2.1.ljztzeeh8i5r6ebr3n4hcj45e\r\n\r\n    $ docker stats --no-stream\r\n    CONTAINER           CPU %               MEM USAGE / LIMIT   MEM %               NET I/O             BLOCK I/O           PIDS\r\n    18f1e7d79f5b        0.92%               0B / 0B             0.00%               648B / 0B           0B / 0B             0\r\n    11d1f05fcff1        0.91%               0B / 0B             0.00%               39.9MB / 26.9MB     51.2MB / 0B         0\r\n\r\nHost OS is Debian Jessie. There are JVM applications in both containers. Why does `docker stats` show zero memory usage? Should I configure my Java apps somehow to be able to see memory usage in `docker stats`? Is there some other way to check memory usage?","title":"docker stats shows zero memory usage even for running containers","body":"<p>I have two containers ran by Docker Swarm:</p>\n\n<pre><code># docker ps\nCONTAINER ID        IMAGE                               COMMAND                  CREATED             STATUS              PORTS               NAMES\n18f1e7d79f5b        default/image1:latest               \"/bin/sh -c 'java ...\"   12 hours ago        Up 12 hours                             image1.1.x56zz152kmqtqpxzle5nkbs8r\n11d1f05fcff1        default/image2:latest               \"java -cp /app/sca...\"   13 hours ago        Up 13 hours                             image2.1.ljztzeeh8i5r6ebr3n4hcj45e\n\n$ docker stats --no-stream\nCONTAINER           CPU %               MEM USAGE / LIMIT   MEM %               NET I/O             BLOCK I/O           PIDS\n18f1e7d79f5b        0.92%               0B / 0B             0.00%               648B / 0B           0B / 0B             0\n11d1f05fcff1        0.91%               0B / 0B             0.00%               39.9MB / 26.9MB     51.2MB / 0B         0\n</code></pre>\n\n<p>Host OS is Debian Jessie. There are JVM applications in both containers. Why does <code>docker stats</code> show zero memory usage? Should I configure my Java apps somehow to be able to see memory usage in <code>docker stats</code>? Is there some other way to check memory usage?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697096340,"post_id":77278482,"comment_id":136237038,"body_markdown":"Implementing `Publisher` is not exactly trivial. A publisher is responsible for managing its own subscribers. A subscriber is added to a publisher via `subscribe` and is removed when the `cancel` method of the subscriber&#39;s subscription is invoked. When a subscriber is registered, the publisher invokes its `onSubscribe` method with a subscription implementation. Then the publisher must invoke `onNext`, `onError`, and `onComplete` on registered subscribers when appropriate, taking into account if and when a subscriber requests more items via its subscription&#39;s `request` method.","body":"Implementing <code>Publisher</code> is not exactly trivial. A publisher is responsible for managing its own subscribers. A subscriber is added to a publisher via <code>subscribe</code> and is removed when the <code>cancel</code> method of the subscriber&#39;s subscription is invoked. When a subscriber is registered, the publisher invokes its <code>onSubscribe</code> method with a subscription implementation. Then the publisher must invoke <code>onNext</code>, <code>onError</code>, and <code>onComplete</code> on registered subscribers when appropriate, taking into account if and when a subscriber requests more items via its subscription&#39;s <code>request</code> method."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697096469,"post_id":77278482,"comment_id":136237064,"body_markdown":"Note it&#39;s the subscriber that&#39;s responsible for requesting items. And all this has to be thread-safe. Read the documentation of `Flow` and its nested interfaces for more information. There&#39;s also [`SubmissionPublisher`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/SubmissionPublisher.html) that you can read about, look at the implementation of, or even use. But if you want to use &quot;reactive streams&quot;, I suggest using an existing library, such as _RxJava_.","body":"Note it&#39;s the subscriber that&#39;s responsible for requesting items. And all this has to be thread-safe. Read the documentation of <code>Flow</code> and its nested interfaces for more information. There&#39;s also <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/SubmissionPublisher.html\" rel=\"nofollow noreferrer\"><code>SubmissionPublisher</code></a> that you can read about, look at the implementation of, or even use. But if you want to use &quot;reactive streams&quot;, I suggest using an existing library, such as <i>RxJava</i>."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697096646,"post_id":77278482,"comment_id":136237107,"body_markdown":"Yet your use case doesn&#39;t seem to need something as complex as `Flow` or _RxJava_, unless there&#39;s more to it than you&#39;ve let on. You could just write your own class that does what you want. It doesn&#39;t have to conform to an existing interface.","body":"Yet your use case doesn&#39;t seem to need something as complex as <code>Flow</code> or <i>RxJava</i>, unless there&#39;s more to it than you&#39;ve let on. You could just write your own class that does what you want. It doesn&#39;t have to conform to an existing interface."},{"owner":{"account_id":7242133,"reputation":1472,"user_id":5525384,"accept_rate":33,"display_name":"Paul"},"score":0,"creation_date":1697122876,"post_id":77278482,"comment_id":136242768,"body_markdown":"Thank you for your advice. I created a simple interface `public interface Observer&lt;T&gt; {\n void onChange(T item); }` and implemented it but it seems I can&#39;t implements generic interface in Java `implements Observer&lt;Type1&gt;, Observer&lt;Type2&gt;`. I will have to create an interface for each type.","body":"Thank you for your advice. I created a simple interface <code>public interface Observer&lt;T&gt; {  void onChange(T item); }</code> and implemented it but it seems I can&#39;t implements generic interface in Java <code>implements Observer&lt;Type1&gt;, Observer&lt;Type2&gt;</code>. I will have to create an interface for each type."}],"owner":{"account_id":7242133,"reputation":1472,"user_id":5525384,"accept_rate":33,"display_name":"Paul"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697095349,"creation_date":1697095349,"question_id":77278482,"body_markdown":"I need to process asynchronous tasks each time a double value is being updated.\r\n\r\nAt the beginning I was using SimpleDoubleProperty from java.fx.beans and attached every listeners but it seemed to have concurrency issues.\r\n\r\nSince Observable is deprecated I checked the Flow API.\r\n\r\nI implemented the stuff like that.\r\n\r\n**ObservableDouble**\r\n```\r\npublic class ObservableDouble implements Flow.Publisher&lt;Double&gt; {\r\n\r\n    private final AtomicReference&lt;Double&gt; value =\r\n        new AtomicReference&lt;&gt;(Double.MIN_VALUE);\r\n\r\n    public double getValue() {\r\n        return value.get();\r\n    }\r\n\r\n    public void setValue(double value) {\r\n        this.value.set(value);\r\n    }\r\n\r\n    public boolean isSet() {\r\n        return value.get() != Double.MIN_VALUE;\r\n    }\r\n\r\n    @Override\r\n    public void subscribe(Flow.Subscriber subscriber) {\r\n\r\n    }\r\n}\r\n```\r\n**ObserverDouble**\r\n\r\n```\r\npublic class ObserverDouble implements Flow.Subscriber&lt;Double&gt; {\r\n    private Consumer&lt;Double&gt; consumer;\r\n\r\n    public void setConsumer(Consumer&lt;Double&gt; consumer) {\r\n        this.consumer = consumer;\r\n    }\r\n\r\n    @Override\r\n    public void onSubscribe(Flow.Subscription subscription) {\r\n    }\r\n\r\n    @Override\r\n    public void onNext(Double item) {\r\n        consumer.accept(item);\r\n    }\r\n\r\n    @Override\r\n    public void onError(Throwable throwable) {\r\n    }\r\n\r\n    @Override\r\n    public void onComplete() {\r\n    }\r\n}\r\n```\r\n\r\nAnd I&#39;m planning to use it like that\r\n\r\n```\r\nObservableDouble observableDouble = new ObservableDouble();\r\nObserverDouble observerDouble = new ObserverDouble();\r\nobserverDouble.setConsumer(c -&gt; {\r\n    System.out.printf(&quot;\\nDouble value has changed : %s.&quot;, c);\r\n});\r\nobservableDouble.subscribe(observerDouble);\r\nobservableDouble.setValue(1.);\r\n// Should print text\r\n```\r\n\r\nWhat to put in the #onSubcribe, #subscribe and other methods? \r\n\r\nDoes the usage of Consumer here is relevant?","title":"Implementing observer pattern with Flow API","body":"<p>I need to process asynchronous tasks each time a double value is being updated.</p>\n<p>At the beginning I was using SimpleDoubleProperty from java.fx.beans and attached every listeners but it seemed to have concurrency issues.</p>\n<p>Since Observable is deprecated I checked the Flow API.</p>\n<p>I implemented the stuff like that.</p>\n<p><strong>ObservableDouble</strong></p>\n<pre><code>public class ObservableDouble implements Flow.Publisher&lt;Double&gt; {\n\n    private final AtomicReference&lt;Double&gt; value =\n        new AtomicReference&lt;&gt;(Double.MIN_VALUE);\n\n    public double getValue() {\n        return value.get();\n    }\n\n    public void setValue(double value) {\n        this.value.set(value);\n    }\n\n    public boolean isSet() {\n        return value.get() != Double.MIN_VALUE;\n    }\n\n    @Override\n    public void subscribe(Flow.Subscriber subscriber) {\n\n    }\n}\n</code></pre>\n<p><strong>ObserverDouble</strong></p>\n<pre><code>public class ObserverDouble implements Flow.Subscriber&lt;Double&gt; {\n    private Consumer&lt;Double&gt; consumer;\n\n    public void setConsumer(Consumer&lt;Double&gt; consumer) {\n        this.consumer = consumer;\n    }\n\n    @Override\n    public void onSubscribe(Flow.Subscription subscription) {\n    }\n\n    @Override\n    public void onNext(Double item) {\n        consumer.accept(item);\n    }\n\n    @Override\n    public void onError(Throwable throwable) {\n    }\n\n    @Override\n    public void onComplete() {\n    }\n}\n</code></pre>\n<p>And I'm planning to use it like that</p>\n<pre><code>ObservableDouble observableDouble = new ObservableDouble();\nObserverDouble observerDouble = new ObserverDouble();\nobserverDouble.setConsumer(c -&gt; {\n    System.out.printf(&quot;\\nDouble value has changed : %s.&quot;, c);\n});\nobservableDouble.subscribe(observerDouble);\nobservableDouble.setValue(1.);\n// Should print text\n</code></pre>\n<p>What to put in the #onSubcribe, #subscribe and other methods?</p>\n<p>Does the usage of Consumer here is relevant?</p>\n"},{"tags":["java","hibernate","hql"],"owner":{"account_id":3958446,"reputation":13,"user_id":3266217,"display_name":"stim644"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1697095187,"creation_date":1697095187,"question_id":77278470,"body_markdown":"I want hibernate to use my own join (left outer join t.route Operations routeOperation) in its internal query. And now it turns out that in order for me to remove the n+1 problem, I need to add routeOperations to the EntityGraph. But then he will create another join and break my logic. Who knows how to solve this?\r\n\r\nMy code:\r\n\r\n    @Query(&quot;SELECT t FROM AzsEntity t &quot; +\r\n            &quot;left outer join t.routeOperations routeOperation &quot; +\r\n            &quot;where t.company.id = :companyId &quot; +\r\n            &quot;and &quot; +\r\n            &quot;((routeOperation.timeEnd is not null and routeOperation.timeEnd &gt; :timeStart and routeOperation.timeStart &lt; :timeEnd) &quot; +\r\n            &quot;or (routeOperation.timeEnd is null and routeOperation.timeStart is null))&quot;)\r\n    @EntityGraph(attributePaths = {&quot;reservoirs.fuelBrand.fuelType&quot;, &quot;reservoirs.remains&quot;,\r\n            &quot;reservoirs.hourlySells&quot;, &quot;routeOperations&quot;})\r\n    Page&lt;AzsEntity&gt; findAzsEntitiesByCompanyId(Pageable pageable, @Param(&quot;companyId&quot;) Long companyId,\r\n                                               @Param(&quot;timeStart&quot;) LocalDateTime timeStart,\r\n                                               @Param(&quot;timeEnd&quot;) LocalDateTime timeEnd);\r\n\r\nand sql query from hibernate generated sql:\r\n\r\n\r\n    select // ** //\r\n    left outer join asdb.route_operation routeopera1_ on azsentity0_.id=routeopera1_.point_id \r\n    left outer join asdb.route_operation routeopera2_ on azsentity0_.id=routeopera2_.point_id \r\n \r\n    where azsentity0_.type=&#39;AZS&#39; \r\n \r\n    and ( azsentity0_.status = &#39;ACTIVE&#39;) and azsentity0_.company_id=? \r\n \r\n    and ((routeopera1_.time_end is not null) and routeopera1_.time_end&gt;? and routeopera1_.time_start&lt;? or (routeopera1_.time_end is null) \r\n    and (routeopera1_.time_start is null)) order by azsentity0_.id desc\r\n\r\nHibernate generate not need &#39;routeopera2_&#39;. I i remove routeOperations from entityGraph that i get much queries... thanks\r\n\r\n","title":"Why hibernate doesn&#39;t use my own join with entityGraph?","body":"<p>I want hibernate to use my own join (left outer join t.route Operations routeOperation) in its internal query. And now it turns out that in order for me to remove the n+1 problem, I need to add routeOperations to the EntityGraph. But then he will create another join and break my logic. Who knows how to solve this?</p>\n<p>My code:</p>\n<pre><code>@Query(&quot;SELECT t FROM AzsEntity t &quot; +\n        &quot;left outer join t.routeOperations routeOperation &quot; +\n        &quot;where t.company.id = :companyId &quot; +\n        &quot;and &quot; +\n        &quot;((routeOperation.timeEnd is not null and routeOperation.timeEnd &gt; :timeStart and routeOperation.timeStart &lt; :timeEnd) &quot; +\n        &quot;or (routeOperation.timeEnd is null and routeOperation.timeStart is null))&quot;)\n@EntityGraph(attributePaths = {&quot;reservoirs.fuelBrand.fuelType&quot;, &quot;reservoirs.remains&quot;,\n        &quot;reservoirs.hourlySells&quot;, &quot;routeOperations&quot;})\nPage&lt;AzsEntity&gt; findAzsEntitiesByCompanyId(Pageable pageable, @Param(&quot;companyId&quot;) Long companyId,\n                                           @Param(&quot;timeStart&quot;) LocalDateTime timeStart,\n                                           @Param(&quot;timeEnd&quot;) LocalDateTime timeEnd);\n</code></pre>\n<p>and sql query from hibernate generated sql:</p>\n<pre><code>select // ** //\nleft outer join asdb.route_operation routeopera1_ on azsentity0_.id=routeopera1_.point_id \nleft outer join asdb.route_operation routeopera2_ on azsentity0_.id=routeopera2_.point_id \n\nwhere azsentity0_.type='AZS' \n\nand ( azsentity0_.status = 'ACTIVE') and azsentity0_.company_id=? \n\nand ((routeopera1_.time_end is not null) and routeopera1_.time_end&gt;? and routeopera1_.time_start&lt;? or (routeopera1_.time_end is null) \nand (routeopera1_.time_start is null)) order by azsentity0_.id desc\n</code></pre>\n<p>Hibernate generate not need 'routeopera2_'. I i remove routeOperations from entityGraph that i get much queries... thanks</p>\n"},{"tags":["java","tree","swt","selection","linewidth"],"comments":[{"owner":{"account_id":3159259,"reputation":109665,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1697093852,"post_id":77278222,"comment_id":136236587,"body_markdown":"Sorry, but I don&#39;t understand the problem. Do you mean the extending all the way to the right? The EraseItem event should have the bounds set to the full width of the column. Show us your code.","body":"Sorry, but I don&#39;t understand the problem. Do you mean the extending all the way to the right? The EraseItem event should have the bounds set to the full width of the column. Show us your code."},{"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"score":0,"creation_date":1697094995,"post_id":77278222,"comment_id":136236797,"body_markdown":"yes, i want this hover color to be extended towards right to cover whole tree\nI have added the code above, please have a look","body":"yes, i want this hover color to be extended towards right to cover whole tree I have added the code above, please have a look"},{"owner":{"account_id":3159259,"reputation":109665,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1697096955,"post_id":77278222,"comment_id":136237156,"body_markdown":"What is `getBounds()`? Why is that different from the other tests? On a quick test it doesn&#39;t look like the macOS tree generates MouseHover events on trees so I can&#39;t really test this.","body":"What is <code>getBounds()</code>? Why is that different from the other tests? On a quick test it doesn&#39;t look like the macOS tree generates MouseHover events on trees so I can&#39;t really test this."},{"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"score":0,"creation_date":1697098027,"post_id":77278222,"comment_id":136237370,"body_markdown":"any other way to achieve hover color for whole row of the tree\ncan you provide code","body":"any other way to achieve hover color for whole row of the tree can you provide code"},{"owner":{"account_id":3159259,"reputation":109665,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1697100876,"post_id":77278222,"comment_id":136238043,"body_markdown":"Note: `SWT.MouseHover` is actually an event id, not a value in the details field. You should be using `SWT.HOT` - they have the same numeric value so it won&#39;t change the way the code works, but you should use the correct value. Since I only use macOS which doesn&#39;t seem to generate HOT events for trees I can&#39;t test or suggest anything.","body":"Note: <code>SWT.MouseHover</code> is actually an event id, not a value in the details field. You should be using <code>SWT.HOT</code> - they have the same numeric value so it won&#39;t change the way the code works, but you should use the correct value. Since I only use macOS which doesn&#39;t seem to generate HOT events for trees I can&#39;t test or suggest anything."}],"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697095041,"creation_date":1697092689,"question_id":77278222,"body_markdown":"I have a swt tree for which I have added SWT.EraseItem listener in order to get the selection, hover color for tree items. The selection, hover colors are appearing properly but that color is getting applied only till the text. I want it to get applied to the entire row.\r\n\r\nScreenshot for your reference:\r\n![Screenshot for your reference][1] \r\n\r\n    tree.addListener(SWT.EraseItem, new Listener() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void handleEvent(Event event) {\r\n\t\t\t\tif ((event.detail &amp; SWT.SELECTED) != 0 &amp;&amp; (event.detail &amp; SWT.MouseHover) != 0) {\r\n\r\n\t\t\t\t\tint width = getBounds().width;\r\n\t\t\t\t\tGC gc = event.gc;\r\n\t\t\t\t\tgc.setForeground(new Color(Display.getCurrent(), 0, 0, 0));\r\n\t\t\t\t\tgc.setBackground(new Color(Display.getCurrent(), 213, 215, 219));\r\n\t\t\t\t\tgc.fillRectangle(0, event.y, width, event.height);\r\n\r\n\t\t\t\t\tevent.detail &amp;= ~SWT.MouseHover;\r\n\t\t\t\t\tevent.detail &amp;= ~SWT.SELECTED;\r\n\t\t\t\t}\r\n\t\t\t\tif ((event.detail &amp; SWT.SELECTED) != 0 &amp;&amp; !tree.isFocusControl()) {\r\n\t\t\t\t\tint width = tree.getClientArea().width;\r\n\t\t\t\t\tGC gc = event.gc;\r\n\t\t\t\t\tgc.setForeground(new Color(Display.getCurrent(), 0, 0, 0));\r\n\t\t\t\t\tgc.setBackground(new Color(Display.getCurrent(), 230, 232, 235));\r\n\t\t\t\t\tgc.fillRectangle(0, event.y, width, event.height);\r\n\t\t\t\t\tevent.detail &amp;= ~SWT.SELECTED;\r\n\t\t\t\t}\r\n\t\t\t\tif ((event.detail &amp; SWT.MouseHover) != 0) {\r\n\t\t\t\t\tint width = tree.getClientArea().width;\r\n\t\t\t\t\tGC gc = event.gc;\r\n\t\t\t\t\tgc.setForeground(new Color(Display.getCurrent(), 0, 0, 0));\r\n\t\t\t\t\tgc.setBackground(new Color(Display.getCurrent(), 213, 215, 219));\r\n\t\t\t\t\tgc.fillRectangle(0, event.y, width, event.height);\r\n\t\t\t\t\tevent.detail &amp;= ~SWT.MouseHover;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((event.detail &amp; SWT.SELECTED) != 0) {\r\n\t\t\t\t\tint width = tree.getClientArea().width;\r\n\t\t\t\t\tGC gc = event.gc;\r\n\t\t\t\t\tgc.setForeground(new Color(Display.getCurrent(), 0, 0, 0));\r\n\t\t\t\t\tgc.setBackground(new Color(Display.getCurrent(), 192, 235, 237));\r\n\t\t\t\t\tgc.fillRectangle(0, event.y, width, event.height);\r\n\t\t\t\t\tevent.detail &amp;= ~SWT.SELECTED;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tColor previousForegroundColor = event.gc.getForeground();\r\n\t\t\t\tevent.gc.setForeground(previousForegroundColor);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YqTT2.png","title":"Hover color for entire row of the tree","body":"<p>I have a swt tree for which I have added SWT.EraseItem listener in order to get the selection, hover color for tree items. The selection, hover colors are appearing properly but that color is getting applied only till the text. I want it to get applied to the entire row.</p>\n<p>Screenshot for your reference:\n<img src=\"https://i.stack.imgur.com/YqTT2.png\" alt=\"Screenshot for your reference\" /></p>\n<pre><code>tree.addListener(SWT.EraseItem, new Listener() {\n\n        @Override\n        public void handleEvent(Event event) {\n            if ((event.detail &amp; SWT.SELECTED) != 0 &amp;&amp; (event.detail &amp; SWT.MouseHover) != 0) {\n\n                int width = getBounds().width;\n                GC gc = event.gc;\n                gc.setForeground(new Color(Display.getCurrent(), 0, 0, 0));\n                gc.setBackground(new Color(Display.getCurrent(), 213, 215, 219));\n                gc.fillRectangle(0, event.y, width, event.height);\n\n                event.detail &amp;= ~SWT.MouseHover;\n                event.detail &amp;= ~SWT.SELECTED;\n            }\n            if ((event.detail &amp; SWT.SELECTED) != 0 &amp;&amp; !tree.isFocusControl()) {\n                int width = tree.getClientArea().width;\n                GC gc = event.gc;\n                gc.setForeground(new Color(Display.getCurrent(), 0, 0, 0));\n                gc.setBackground(new Color(Display.getCurrent(), 230, 232, 235));\n                gc.fillRectangle(0, event.y, width, event.height);\n                event.detail &amp;= ~SWT.SELECTED;\n            }\n            if ((event.detail &amp; SWT.MouseHover) != 0) {\n                int width = tree.getClientArea().width;\n                GC gc = event.gc;\n                gc.setForeground(new Color(Display.getCurrent(), 0, 0, 0));\n                gc.setBackground(new Color(Display.getCurrent(), 213, 215, 219));\n                gc.fillRectangle(0, event.y, width, event.height);\n                event.detail &amp;= ~SWT.MouseHover;\n            }\n\n            if ((event.detail &amp; SWT.SELECTED) != 0) {\n                int width = tree.getClientArea().width;\n                GC gc = event.gc;\n                gc.setForeground(new Color(Display.getCurrent(), 0, 0, 0));\n                gc.setBackground(new Color(Display.getCurrent(), 192, 235, 237));\n                gc.fillRectangle(0, event.y, width, event.height);\n                event.detail &amp;= ~SWT.SELECTED;\n            }\n\n            Color previousForegroundColor = event.gc.getForeground();\n            event.gc.setForeground(previousForegroundColor);\n        }\n    });\n</code></pre>\n"},{"tags":["java","spring","postgresql","jpa"],"comments":[{"owner":{"account_id":29420939,"reputation":11,"user_id":22542681,"display_name":"AlexJP"},"score":0,"creation_date":1697020511,"post_id":77272171,"comment_id":136226051,"body_markdown":"bahman karami\nWhat should I do and how?","body":"bahman karami What should I do and how?"},{"owner":{"account_id":29420939,"reputation":11,"user_id":22542681,"display_name":"AlexJP"},"score":0,"creation_date":1697020666,"post_id":77272171,"comment_id":136226078,"body_markdown":"bahman karami\nBut I&#39;ve already had that annotation.\nSee my code above.","body":"bahman karami But I&#39;ve already had that annotation. See my code above."},{"owner":{"account_id":29420939,"reputation":11,"user_id":22542681,"display_name":"AlexJP"},"score":0,"creation_date":1697022179,"post_id":77272171,"comment_id":136226376,"body_markdown":"bahman karami\nNope, you had to use double quotes because in other case you&#39;ll get an error. It says that single quotes only for chars.","body":"bahman karami Nope, you had to use double quotes because in other case you&#39;ll get an error. It says that single quotes only for chars."},{"owner":{"account_id":17069028,"reputation":94,"user_id":12350325,"display_name":"bahman karami"},"score":0,"creation_date":1697022461,"post_id":77272171,"comment_id":136226433,"body_markdown":"Try this :@Column(name = &quot;&#39;birthDay&#39;&quot;) Or &quot;\\&#39;birthDay\\&#39;&quot;;","body":"Try this :@Column(name = &quot;&#39;birthDay&#39;&quot;) Or &quot;\\&#39;birthDay\\&#39;&quot;;"},{"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1697022833,"post_id":77272171,"comment_id":136226510,"body_markdown":"Are you using spring boot","body":"Are you using spring boot"},{"owner":{"account_id":29420939,"reputation":11,"user_id":22542681,"display_name":"AlexJP"},"score":0,"creation_date":1697023075,"post_id":77272171,"comment_id":136226551,"body_markdown":"Doesn&#39;t work. I think the problem isn&#39;t in quotes because it work with &quot;name&quot;, &quot;age&quot;, &quot;email&quot; but doesn&#39;t with &quot;birthday&quot;. And I don&#39;t know why.\n\nPS I even drop my table and create &quot;birthday&quot; with low case and change it in model too but now it says the same: `column p1_0.birthday doesn&#39;t exist`.","body":"Doesn&#39;t work. I think the problem isn&#39;t in quotes because it work with &quot;name&quot;, &quot;age&quot;, &quot;email&quot; but doesn&#39;t with &quot;birthday&quot;. And I don&#39;t know why.  PS I even drop my table and create &quot;birthday&quot; with low case and change it in model too but now it says the same: <code>column p1_0.birthday doesn&#39;t exist</code>."},{"owner":{"account_id":29420939,"reputation":11,"user_id":22542681,"display_name":"AlexJP"},"score":0,"creation_date":1697023330,"post_id":77272171,"comment_id":136226607,"body_markdown":"Anish B\nYes. Spring boot.","body":"Anish B Yes. Spring boot."},{"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1697023448,"post_id":77272171,"comment_id":136226641,"body_markdown":"@AlexJP Did you try adding `spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl` in application.properties and see if this works?","body":"@AlexJP Did you try adding <code>spring.jpa.hibernate.naming.physical-strategy=org.hibernate.&zwnj;&#8203;boot.model.naming.Ph&zwnj;&#8203;ysicalNamingStrategy&zwnj;&#8203;StandardImpl</code> in application.properties and see if this works?"},{"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1697023919,"post_id":77272171,"comment_id":136226717,"body_markdown":"@AlexJP I have added my answer. See if that helps.","body":"@AlexJP I have added my answer. See if that helps."},{"owner":{"account_id":29420939,"reputation":11,"user_id":22542681,"display_name":"AlexJP"},"score":0,"creation_date":1697024633,"post_id":77272171,"comment_id":136226860,"body_markdown":"Unfortunately doesn&#39;t works too.(","body":"Unfortunately doesn&#39;t works too.("}],"owner":{"account_id":29420939,"reputation":11,"user_id":22542681,"display_name":"AlexJP"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1697094478,"creation_date":1697019956,"question_id":77272171,"body_markdown":"I&#39;m using simple spring CRUD app with JPA (Spring Boot).\r\n\r\nI have model:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;Person&quot;)\r\npublic class Person {\r\n\r\n    //code\r\n\r\n    @Column(name = &quot;birthDay&quot;)\r\n    @Getter\r\n    @Setter\r\n    private String birthDay;\r\n\r\n    //code\r\n}\r\n```\r\n\r\nMy postgreSQL:\r\n```\r\ncreate table Person(\r\n   id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,\r\n   name varchar(100) NOT NULL,\r\n   country varchar(100) NOT NULL,\r\n   birthDay varchar(10) NOT NULL,\r\n   age int check ( age &gt;= 0 ) NOT NULL,\r\n   email varchar UNIQUE NOT NULL,\r\n   phone varchar UNIQUE NOT NULL\r\n)\r\n```\r\n\r\nMy repository:\r\n\r\n```\r\npublic interface PeopleRepository extends JpaRepository&lt;Person, Integer&gt; {\r\n}\r\n```\r\n\r\n\r\nMy service:\r\n\r\n```\r\n@Service\r\n@Transactional(readOnly=true)\r\npublic class PeopleService {\r\n\r\n    private final PeopleRepository peopleRepository;\r\n    @Autowired\r\n    public PeopleService(PeopleRepository peopleRepository) {\r\n        this.peopleRepository = peopleRepository;\r\n    }\r\n\r\n    public List&lt;Person&gt; findAll(){\r\n        return peopleRepository.findAll();\r\n    }\r\n\r\n   //code with another methods\r\n}\r\n\r\n```\r\n\r\nMy controller:\r\n```\r\n@GetMapping(&quot;/tables&quot;)\r\n    public String tablesPage(Model model){\r\n        List&lt;Person&gt; people = peopleService.findAll();\r\n        model.addAttribute(&quot;people&quot;, people);\r\n        return &quot;tables.html&quot;;\r\n    }\r\n```\r\n\r\nMy &#39;tables.html&#39;\r\n```\r\nThis is part of my table (not all html-code):\r\n\r\n&lt;tr th:each=&quot;person : ${people}&quot;&gt;\r\n   &lt;td th:text=&quot;${person.getName()}&quot;&gt;&lt;/td&gt;\r\n   &lt;td th:text=&quot;${person.getCountry()}&quot;&gt;&lt;/td&gt;\r\n   &lt;td th:text=&quot;${person.getBirthDay()}&quot;&gt;&lt;/td&gt;\r\n   &lt;td th:text=&quot;${person.getAge()}&quot;&gt;&lt;/td&gt;\r\n   &lt;td th:text=&quot;${person.getEmail()}&quot;&gt;&lt;/td&gt;\r\n   &lt;td th:text=&quot;${person.getPhone()}&quot;&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n\r\n```\r\n\r\nSo I have an error:\r\n\r\n```\r\nError: column p1_0.birth_day doesn&#39;t exist\r\n```\r\nand\r\n```\r\nJDBC exception executing SQL [select p1_0.id,p1_0.age,p1_0.birth_day,p1_0.country,p1_0.email,p1_0.name,p1_0.phone from person p1_0] [Error: column p1_0.birth_day doesn&#39;t exist Position: 25] [n/a]; SQL [n/a]] with root cause\r\n```\r\n\r\nBut I don&#39;t have &#39;birth_day&#39; column!\r\n\r\nIn Person-class it calls &#39;birthDay&#39; and in postgre database it also calls &#39;birthDay&#39;.\r\n\r\nWhy JPA search for &#39;birth_day&#39; column?\r\n\r\nAnd how to fix it?\r\n\r\nThank you!","title":"JPA can&#39;t find existing column in PostgreSQL","body":"<p>I'm using simple spring CRUD app with JPA (Spring Boot).</p>\n<p>I have model:</p>\n<pre><code>@Entity\n@Table(name = &quot;Person&quot;)\npublic class Person {\n\n    //code\n\n    @Column(name = &quot;birthDay&quot;)\n    @Getter\n    @Setter\n    private String birthDay;\n\n    //code\n}\n</code></pre>\n<p>My postgreSQL:</p>\n<pre><code>create table Person(\n   id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,\n   name varchar(100) NOT NULL,\n   country varchar(100) NOT NULL,\n   birthDay varchar(10) NOT NULL,\n   age int check ( age &gt;= 0 ) NOT NULL,\n   email varchar UNIQUE NOT NULL,\n   phone varchar UNIQUE NOT NULL\n)\n</code></pre>\n<p>My repository:</p>\n<pre><code>public interface PeopleRepository extends JpaRepository&lt;Person, Integer&gt; {\n}\n</code></pre>\n<p>My service:</p>\n<pre><code>@Service\n@Transactional(readOnly=true)\npublic class PeopleService {\n\n    private final PeopleRepository peopleRepository;\n    @Autowired\n    public PeopleService(PeopleRepository peopleRepository) {\n        this.peopleRepository = peopleRepository;\n    }\n\n    public List&lt;Person&gt; findAll(){\n        return peopleRepository.findAll();\n    }\n\n   //code with another methods\n}\n\n</code></pre>\n<p>My controller:</p>\n<pre><code>@GetMapping(&quot;/tables&quot;)\n    public String tablesPage(Model model){\n        List&lt;Person&gt; people = peopleService.findAll();\n        model.addAttribute(&quot;people&quot;, people);\n        return &quot;tables.html&quot;;\n    }\n</code></pre>\n<p>My 'tables.html'</p>\n<pre><code>This is part of my table (not all html-code):\n\n&lt;tr th:each=&quot;person : ${people}&quot;&gt;\n   &lt;td th:text=&quot;${person.getName()}&quot;&gt;&lt;/td&gt;\n   &lt;td th:text=&quot;${person.getCountry()}&quot;&gt;&lt;/td&gt;\n   &lt;td th:text=&quot;${person.getBirthDay()}&quot;&gt;&lt;/td&gt;\n   &lt;td th:text=&quot;${person.getAge()}&quot;&gt;&lt;/td&gt;\n   &lt;td th:text=&quot;${person.getEmail()}&quot;&gt;&lt;/td&gt;\n   &lt;td th:text=&quot;${person.getPhone()}&quot;&gt;&lt;/td&gt;\n&lt;/tr&gt;\n\n</code></pre>\n<p>So I have an error:</p>\n<pre><code>Error: column p1_0.birth_day doesn't exist\n</code></pre>\n<p>and</p>\n<pre><code>JDBC exception executing SQL [select p1_0.id,p1_0.age,p1_0.birth_day,p1_0.country,p1_0.email,p1_0.name,p1_0.phone from person p1_0] [Error: column p1_0.birth_day doesn't exist Position: 25] [n/a]; SQL [n/a]] with root cause\n</code></pre>\n<p>But I don't have 'birth_day' column!</p>\n<p>In Person-class it calls 'birthDay' and in postgre database it also calls 'birthDay'.</p>\n<p>Why JPA search for 'birth_day' column?</p>\n<p>And how to fix it?</p>\n<p>Thank you!</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":22514761,"reputation":1572,"user_id":16709163,"display_name":"ray"},"score":0,"creation_date":1630604469,"post_id":69034696,"comment_id":122009299,"body_markdown":"Check [this](https://stackoverflow.com/questions/3330618/bean-inside-class-with-configuration-and-without-it)","body":"Check <a href=\"https://stackoverflow.com/questions/3330618/bean-inside-class-with-configuration-and-without-it\">this</a>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1630604510,"post_id":69034696,"comment_id":122009316,"body_markdown":"An `@Bean` method in a non `@Configuration` class isn&#39;t proxied/processed like in an `@Configuration` class. Move that method to your security configuration and just inject the bean.","body":"An <code>@Bean</code> method in a non <code>@Configuration</code> class isn&#39;t proxied/processed like in an <code>@Configuration</code> class. Move that method to your security configuration and just inject the bean."}],"answers":[{"tags":[],"owner":{"account_id":12206189,"reputation":5872,"user_id":8909235,"display_name":"lkatiforis"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1630605063,"creation_date":1630603948,"answer_id":69034827,"question_id":69034696,"body_markdown":"`BCryptPasswordEncoder` is not a bean, you can not autowire it.\r\n\r\nuse:\r\n\r\n    new BCryptPasswordEncoder().encode(user.getPassword());\r\n\r\nAlternatively, you could create such bean in your configuration(`@Configuration`):\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder(){\r\n       return new BCryptPasswordEncoder();\r\n    }\r\n\r\nAnd then, autowire it into your service:\r\n\r\n    @Autowired\r\n    private PasswordEncoder passwordEncoder;\r\n\r\n\r\n","title":"Method annotated with @Bean is called directly - function calling a bean in a @Service class","body":"<p><code>BCryptPasswordEncoder</code> is not a bean, you can not autowire it.</p>\n<p>use:</p>\n<pre><code>new BCryptPasswordEncoder().encode(user.getPassword());\n</code></pre>\n<p>Alternatively, you could create such bean in your configuration(<code>@Configuration</code>):</p>\n<pre><code>@Bean\npublic PasswordEncoder passwordEncoder(){\n   return new BCryptPasswordEncoder();\n}\n</code></pre>\n<p>And then, autowire it into your service:</p>\n<pre><code>@Autowired\nprivate PasswordEncoder passwordEncoder;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9437851,"reputation":157,"user_id":7019324,"display_name":"Stijn Dejongh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1630604481,"creation_date":1630604481,"answer_id":69034938,"question_id":69034696,"body_markdown":"The &#39;@Bean&#39; annotation is telling Spring to create a new Spring Bean, using the logic in the method that it decorates.\r\nThis is usually done in Configuration classes, much like you are doing in your AuthorizationServiceConfig (https://github.com/arocketman/SpringBlog/blob/master/src/main/java/com/arocketman/github/config/AuthorizationServerConfig.java).\r\n\r\nWhat you are doing here is calling the annotated method in order to fetch the Spring-managed bean. This is not allowed. How you would go about fixing this, while keeping your passwordencoder as a bean, is by autowiring the bean into this server, just like you do with the UserRepository. \r\n\r\nSo you would move the annotated method to a configuration class (either an existing or new one), and then autowire it into this Service.\r\nSomething like this:\r\n\r\n    @Autowired\r\n    private BCryptPasswordEncoder passwordEncoder;\r\n\r\nYour &#39;save&#39; method then becomes:\r\n\r\n     public void save(User user){\r\n        user.setPassword(passwordEncoder.encode(user.getPassword()));\r\n        userRepository.save(user);\r\n    }\r\n\r\nI hope this helps you out.\r\nGood luck with your project!\r\n","title":"Method annotated with @Bean is called directly - function calling a bean in a @Service class","body":"<p>The '@Bean' annotation is telling Spring to create a new Spring Bean, using the logic in the method that it decorates.\nThis is usually done in Configuration classes, much like you are doing in your AuthorizationServiceConfig (<a href=\"https://github.com/arocketman/SpringBlog/blob/master/src/main/java/com/arocketman/github/config/AuthorizationServerConfig.java\" rel=\"nofollow noreferrer\">https://github.com/arocketman/SpringBlog/blob/master/src/main/java/com/arocketman/github/config/AuthorizationServerConfig.java</a>).</p>\n<p>What you are doing here is calling the annotated method in order to fetch the Spring-managed bean. This is not allowed. How you would go about fixing this, while keeping your passwordencoder as a bean, is by autowiring the bean into this server, just like you do with the UserRepository.</p>\n<p>So you would move the annotated method to a configuration class (either an existing or new one), and then autowire it into this Service.\nSomething like this:</p>\n<pre><code>@Autowired\nprivate BCryptPasswordEncoder passwordEncoder;\n</code></pre>\n<p>Your 'save' method then becomes:</p>\n<pre><code> public void save(User user){\n    user.setPassword(passwordEncoder.encode(user.getPassword()));\n    userRepository.save(user);\n}\n</code></pre>\n<p>I hope this helps you out.\nGood luck with your project!</p>\n"},{"tags":[],"owner":{"account_id":3506066,"reputation":235,"user_id":2931585,"display_name":"oOXAam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697094470,"creation_date":1697094470,"answer_id":77278389,"question_id":69034696,"body_markdown":"You can simply replace `@Service` annotation with `@Configuration` in your classs. This will also resolve the issue.","title":"Method annotated with @Bean is called directly - function calling a bean in a @Service class","body":"<p>You can simply replace <code>@Service</code> annotation with <code>@Configuration</code> in your classs. This will also resolve the issue.</p>\n"}],"owner":{"account_id":22640694,"reputation":21,"user_id":16816886,"display_name":"OmerLuxon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7888,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69034938,"answer_count":3,"score":2,"last_activity_date":1697094470,"creation_date":1630603275,"question_id":69034696,"body_markdown":"\r\nI just get an error over and over inside the function &quot;save&quot; that is saying:\r\n&quot;Method annotated with @Bean is called directly. Use dependency injection instead.&quot;\r\nwhen calling &quot;passwordEncoder()&quot;\r\n\r\nin this line \r\n\r\nuser.setPassword(**passwordEncoder()**.encode(user.getPassword()));\r\n\r\n\r\n\r\n```\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.List;\r\n\r\n@Service\r\npublic class UserService {\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder(){\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    public void save(User user){\r\n        user.setPassword(passwordEncoder().encode(user.getPassword()));\r\n        userRepository.save(user);\r\n\r\n    }\r\n\r\n    public User getUser(String username){\r\n        return userRepository.findByUsername(username);\r\n    }\r\n\r\n    public List&lt;User&gt; getAllUsers() {\r\n        return userRepository.findAll();\r\n    }\r\n}\r\n```\r\n\r\nWhat am I missing in the spring logic that it&#39;s not working?\r\n\r\nBTW - followed the tut : https://www.youtube.com/watch?v=IOgCMtYMr2Q&amp;t=1s&amp;ab_channel=RocketMan\r\n\r\nhttps://github.com/arocketman/SpringBlog/blob/master/src/main/java/com/arocketman/github/service/UserService.java\r\n\r\n","title":"Method annotated with @Bean is called directly - function calling a bean in a @Service class","body":"<p>I just get an error over and over inside the function &quot;save&quot; that is saying:\n&quot;Method annotated with @Bean is called directly. Use dependency injection instead.&quot;\nwhen calling &quot;passwordEncoder()&quot;</p>\n<p>in this line</p>\n<p>user.setPassword(<strong>passwordEncoder()</strong>.encode(user.getPassword()));</p>\n<pre><code>\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\n\n@Service\npublic class UserService {\n\n    @Autowired\n    private UserRepository userRepository;\n\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        return new BCryptPasswordEncoder();\n    }\n\n    public void save(User user){\n        user.setPassword(passwordEncoder().encode(user.getPassword()));\n        userRepository.save(user);\n\n    }\n\n    public User getUser(String username){\n        return userRepository.findByUsername(username);\n    }\n\n    public List&lt;User&gt; getAllUsers() {\n        return userRepository.findAll();\n    }\n}\n</code></pre>\n<p>What am I missing in the spring logic that it's not working?</p>\n<p>BTW - followed the tut : <a href=\"https://www.youtube.com/watch?v=IOgCMtYMr2Q&amp;t=1s&amp;ab_channel=RocketMan\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=IOgCMtYMr2Q&amp;t=1s&amp;ab_channel=RocketMan</a></p>\n<p><a href=\"https://github.com/arocketman/SpringBlog/blob/master/src/main/java/com/arocketman/github/service/UserService.java\" rel=\"nofollow noreferrer\">https://github.com/arocketman/SpringBlog/blob/master/src/main/java/com/arocketman/github/service/UserService.java</a></p>\n"},{"tags":["java","spring-boot","hibernate","spring-data","hibernate-6.x"],"answers":[{"tags":[],"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1697094336,"creation_date":1681309558,"answer_id":75996639,"question_id":75996531,"body_markdown":"Alright people. Making it easy for the those from future who run into same problem.\r\n\r\nTaking the answer from [here][1]\r\n\r\n`@Type(type = &quot;yes_no&quot;)` can be replaced with `@Convert(converter = YesNoConverter.class)`\r\n\r\n\r\n\r\n    @Column(name = &quot;IS_SPECIAL&quot;)\r\n    @Convert(converter = org.hibernate.type.YesNoConverter.class)\r\n    private Boolean isSpecial;\r\n\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/6.1/userguide/html_single/Hibernate_User_Guide.html#basic-boolean","title":"Migrating to Hibernate 6 @Type annotation not working for boolean","body":"<p>Alright people. Making it easy for the those from future who run into same problem.</p>\n<p>Taking the answer from <a href=\"https://docs.jboss.org/hibernate/orm/6.1/userguide/html_single/Hibernate_User_Guide.html#basic-boolean\" rel=\"nofollow noreferrer\">here</a></p>\n<p><code>@Type(type = &quot;yes_no&quot;)</code> can be replaced with <code>@Convert(converter = YesNoConverter.class)</code></p>\n<pre><code>@Column(name = &quot;IS_SPECIAL&quot;)\n@Convert(converter = org.hibernate.type.YesNoConverter.class)\nprivate Boolean isSpecial;\n</code></pre>\n"}],"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2055,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":75996639,"answer_count":1,"score":3,"last_activity_date":1697094336,"creation_date":1681308975,"question_id":75996531,"body_markdown":"I upgraded spring boot to 3.x which in turn upgrades Hibernate from 5 to 6 and spring 6.\r\n\r\nIn previous versions we were using `@Type` annotation which converts db column from String (Y or N) to java boolean value. \r\n\r\n\r\n```java\r\n    @Column(name = &quot;IS_SPECIAL&quot;)\r\n    @Type(type = &quot;yes_no&quot;)\r\n    private Boolean isSpecial;\r\n```\r\n\r\nThe problem I am now facing is that there&#39;s a syntax error that reads:\r\n\r\n&gt;Cannot resolve method &#39;type&#39;\r\n\r\nThe annotation doesn&#39;t accept a string value either. \r\n\r\nI have already checked [this question][1] and it&#39;s not helping.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/74966830/hibernate-6-type-annotation","title":"Migrating to Hibernate 6 @Type annotation not working for boolean","body":"<p>I upgraded spring boot to 3.x which in turn upgrades Hibernate from 5 to 6 and spring 6.</p>\n<p>In previous versions we were using <code>@Type</code> annotation which converts db column from String (Y or N) to java boolean value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Column(name = &quot;IS_SPECIAL&quot;)\n    @Type(type = &quot;yes_no&quot;)\n    private Boolean isSpecial;\n</code></pre>\n<p>The problem I am now facing is that there's a syntax error that reads:</p>\n<blockquote>\n<p>Cannot resolve method 'type'</p>\n</blockquote>\n<p>The annotation doesn't accept a string value either.</p>\n<p>I have already checked <a href=\"https://stackoverflow.com/questions/74966830/hibernate-6-type-annotation\">this question</a> and it's not helping.</p>\n"},{"tags":["java","instantiation","instantiationexception"],"comments":[{"owner":{"account_id":953149,"reputation":177293,"user_id":978917,"accept_rate":86,"display_name":"ruakh"},"score":1,"creation_date":1427172471,"post_id":29225154,"comment_id":46658353,"body_markdown":"Is it possible that you&#39;ve accidentally defined `Robot` in multiple places? For example, is it possible that `RobotWorld` contains a `private interface Robot { ... }` somewhere, or something like that, that you intended to delete and then forgot about? (To test this, click on the `Robot` in `Robot robot;`, and then hit F3 to go to the declaration that Eclipse thinks is applicable.)","body":"Is it possible that you&#39;ve accidentally defined <code>Robot</code> in multiple places? For example, is it possible that <code>RobotWorld</code> contains a <code>private interface Robot { ... }</code> somewhere, or something like that, that you intended to delete and then forgot about? (To test this, click on the <code>Robot</code> in <code>Robot robot;</code>, and then hit F3 to go to the declaration that Eclipse thinks is applicable.)"}],"answers":[{"tags":[],"owner":{"account_id":399179,"reputation":2967,"user_id":4188393,"display_name":"chrissukhram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1427180905,"creation_date":1427174976,"answer_id":29225630,"question_id":29225154,"body_markdown":"UPDATE:\r\n\r\nIt appears you may have imported the `import com.sun.glass.ui.Robot;` which is an abstract class and cannot be instantiated. \r\n\r\nBe sure to remove any import statements for the wrong Robot class.\r\n\r\nYou may want to consider renaming your own Robot class as well to not get them confused.","title":"Cannot instantiate the type error... but code is right?","body":"<p>UPDATE:</p>\n\n<p>It appears you may have imported the <code>import com.sun.glass.ui.Robot;</code> which is an abstract class and cannot be instantiated. </p>\n\n<p>Be sure to remove any import statements for the wrong Robot class.</p>\n\n<p>You may want to consider renaming your own Robot class as well to not get them confused.</p>\n"}],"owner":{"account_id":5730348,"reputation":41,"user_id":4526093,"display_name":"OMGitzMidgar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9020,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697094280,"creation_date":1427172100,"question_id":29225154,"body_markdown":"So I have a big issue. I am getting the &quot;cannot instantiate the type Robot&quot; error when I try to make a new instance of the Robot class. I fully understand what this error means and when it occurs, but I do not understand why I am getting it. I swear, my code is correct. Maybe there is one small error in the code that I just do not see? Any help?\r\n\r\nThe code getting the error is the RobotWorld class:\r\n    \r\n    public class RobotWorld extends JPanel{\r\n\t\r\n\tRobot robot;\r\n\t\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\t    public RobotWorld(){\r\n\t\t    robot = new Robot();\r\n\t\t    this.setBackground(Color.GREEN);\r\n\t    }\r\n    }\r\n\r\n\r\nAnd the Robot.java class is:\r\n\r\n    public class Robot {\r\n\t\r\n\t    public Robot(){\r\n\t\t\r\n\t    }\r\n\r\n    }\r\n\r\nI am getting the error on the line &quot;robot = new Robot();&quot; in RobotWorld.java code. Basically, anywhere I try to instantiate a new Robot object in RobotWorld, it will give me an error. I even tried doing it when I created the instance variable robot, still didn&#39;t work.\r\n\r\nBoth of these classes are in the same package, so I don&#39;t see how it can be some kind of class scope error. Can anyone tell me why I am getting this error?\r\n\r\nNote, I restarted Eclipse a few times to make sure it wasn&#39;t just Eclipse acting up.\r\n\r\n\r\nThank you!","title":"Cannot instantiate the type error... but code is right?","body":"<p>So I have a big issue. I am getting the \"cannot instantiate the type Robot\" error when I try to make a new instance of the Robot class. I fully understand what this error means and when it occurs, but I do not understand why I am getting it. I swear, my code is correct. Maybe there is one small error in the code that I just do not see? Any help?</p>\n\n<p>The code getting the error is the RobotWorld class:</p>\n\n<pre><code>public class RobotWorld extends JPanel{\n\nRobot robot;\n\nprivate static final long serialVersionUID = 1L;\n\n    public RobotWorld(){\n        robot = new Robot();\n        this.setBackground(Color.GREEN);\n    }\n}\n</code></pre>\n\n<p>And the Robot.java class is:</p>\n\n<pre><code>public class Robot {\n\n    public Robot(){\n\n    }\n\n}\n</code></pre>\n\n<p>I am getting the error on the line \"robot = new Robot();\" in RobotWorld.java code. Basically, anywhere I try to instantiate a new Robot object in RobotWorld, it will give me an error. I even tried doing it when I created the instance variable robot, still didn't work.</p>\n\n<p>Both of these classes are in the same package, so I don't see how it can be some kind of class scope error. Can anyone tell me why I am getting this error?</p>\n\n<p>Note, I restarted Eclipse a few times to make sure it wasn't just Eclipse acting up.</p>\n\n<p>Thank you!</p>\n"},{"tags":["java","android","mobile-development","applovin"],"owner":{"account_id":12244530,"reputation":2176,"user_id":8936551,"accept_rate":20,"display_name":"sejn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1697093832,"creation_date":1697028964,"question_id":77273279,"body_markdown":"How to show an applovin ad while the cold start in android. \r\n\r\nI am trying to show an applovin appopen ad and set the appopenManager while oncreate of Splash Activity.\r\n\r\n\r\nSplashActivity.java\r\n\r\n    appOpenManager = new AppOpen(this);\r\n\r\nAppOpen.java\r\n\r\n    public class AppOpen implements LifecycleObserver, MaxAdListener{\r\n        private MaxAppOpenAd appOpenAd;\r\n        private final Context context;\r\n        private boolean canShowAds;\r\n    \r\n        public AppOpen(MaxAppOpenAd appOpenAd, Context context) {\r\n            this.appOpenAd = appOpenAd;\r\n            this.context = context;\r\n        }\r\n        public AppOpen(final Context context) {\r\n            ProcessLifecycleOwner.get().getLifecycle().addObserver(this);\r\n            this.context = context;\r\n            appOpenAd = new MaxAppOpenAd(ApplovinIntAndNative.getInstance(context).applovinAppOpenAdUnitId(), context);\r\n            appOpenAd.setListener(this);\r\n            appOpenAd.loadAd();\r\n        }\r\n    \r\n        private void showAdIfReady() {\r\n           \r\n            if (RemovedAd.prouser) {\r\n                if (appOpenAd == null || !AppLovinSdk.getInstance(context).isInitialized()) return;\r\n    \r\n                if (appOpenAd.isReady()) {\r\n                    appOpenAd.showAd(ApplovinIntAndNative.getInstance(context).applovinAppOpenAdUnitId());\r\n                } else {\r\n                    appOpenAd.loadAd();\r\n                }\r\n            }\r\n    \r\n        }\r\n    \r\n        @OnLifecycleEvent(Lifecycle.Event.ON_START)\r\n        public void onStart() {\r\n            showAdIfReady();\r\n        }\r\n    \r\n        @Override\r\n        public void onAdLoaded(MaxAd ad) {\r\n            LogUtils.LOGD(&quot;onAdLoaded Applovin Appopen&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void onAdDisplayed(MaxAd ad) {\r\n            LogUtils.LOGD(&quot;onAdDisplayed Applovin Appopen&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void onAdHidden(MaxAd ad) {\r\n            appOpenAd.loadAd();\r\n        }\r\n    \r\n        @Override\r\n        public void onAdClicked(MaxAd ad) {\r\n            LogUtils.LOGD(&quot;onAdClicked Applovin Appopen&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void onAdLoadFailed(String adUnitId, MaxError error) {\r\n            appOpenAd.loadAd();\r\n        }\r\n    \r\n        @Override\r\n        public void onAdDisplayFailed(MaxAd ad, MaxError error) {\r\n            LogUtils.LOGD(&quot;onAdDisplayFailed Applovin Appopen&quot;);\r\n            appOpenAd.loadAd();\r\n        }\r\n    }\r\n\r\n\r\n","title":"How to show an applovin appopen ad when cold start in android","body":"<p>How to show an applovin ad while the cold start in android.</p>\n<p>I am trying to show an applovin appopen ad and set the appopenManager while oncreate of Splash Activity.</p>\n<p>SplashActivity.java</p>\n<pre><code>appOpenManager = new AppOpen(this);\n</code></pre>\n<p>AppOpen.java</p>\n<pre><code>public class AppOpen implements LifecycleObserver, MaxAdListener{\n    private MaxAppOpenAd appOpenAd;\n    private final Context context;\n    private boolean canShowAds;\n\n    public AppOpen(MaxAppOpenAd appOpenAd, Context context) {\n        this.appOpenAd = appOpenAd;\n        this.context = context;\n    }\n    public AppOpen(final Context context) {\n        ProcessLifecycleOwner.get().getLifecycle().addObserver(this);\n        this.context = context;\n        appOpenAd = new MaxAppOpenAd(ApplovinIntAndNative.getInstance(context).applovinAppOpenAdUnitId(), context);\n        appOpenAd.setListener(this);\n        appOpenAd.loadAd();\n    }\n\n    private void showAdIfReady() {\n       \n        if (RemovedAd.prouser) {\n            if (appOpenAd == null || !AppLovinSdk.getInstance(context).isInitialized()) return;\n\n            if (appOpenAd.isReady()) {\n                appOpenAd.showAd(ApplovinIntAndNative.getInstance(context).applovinAppOpenAdUnitId());\n            } else {\n                appOpenAd.loadAd();\n            }\n        }\n\n    }\n\n    @OnLifecycleEvent(Lifecycle.Event.ON_START)\n    public void onStart() {\n        showAdIfReady();\n    }\n\n    @Override\n    public void onAdLoaded(MaxAd ad) {\n        LogUtils.LOGD(&quot;onAdLoaded Applovin Appopen&quot;);\n    }\n\n    @Override\n    public void onAdDisplayed(MaxAd ad) {\n        LogUtils.LOGD(&quot;onAdDisplayed Applovin Appopen&quot;);\n    }\n\n    @Override\n    public void onAdHidden(MaxAd ad) {\n        appOpenAd.loadAd();\n    }\n\n    @Override\n    public void onAdClicked(MaxAd ad) {\n        LogUtils.LOGD(&quot;onAdClicked Applovin Appopen&quot;);\n    }\n\n    @Override\n    public void onAdLoadFailed(String adUnitId, MaxError error) {\n        appOpenAd.loadAd();\n    }\n\n    @Override\n    public void onAdDisplayFailed(MaxAd ad, MaxError error) {\n        LogUtils.LOGD(&quot;onAdDisplayFailed Applovin Appopen&quot;);\n        appOpenAd.loadAd();\n    }\n}\n</code></pre>\n"},{"tags":["java","amazon-ec2","pulumi"],"comments":[{"owner":{"account_id":15289,"reputation":10321,"user_id":32129,"accept_rate":68,"display_name":"Christian Nunciato"},"score":0,"creation_date":1697144205,"post_id":77278339,"comment_id":136246547,"body_markdown":"The code&#39;s a little hard to read, but I think you may have left out &quot;the good part&quot; -- i.e., the code that&#39;s trying to stringify the output. Can you reformat and share more?","body":"The code&#39;s a little hard to read, but I think you may have left out &quot;the good part&quot; -- i.e., the code that&#39;s trying to stringify the output. Can you reformat and share more?"}],"owner":{"account_id":29653987,"reputation":1,"user_id":22727135,"display_name":"BuBu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697093797,"creation_date":1697093797,"question_id":77278339,"body_markdown":"I have given all unique values in my code, still getting an error, Please anybody help! I am very new to Pulumi and aws.\r\n\r\nThis is because the value of an &#39;Output&#39; is asynchronous.\r\n\r\n└─ aws:ec2:RouteTableAssociation      publicRouteTableAssociation Calling &#39;toString&#39; on an &#39;Output&lt;T&gt;&#39; is not supported.\r\n\r\n├─ aws:ec2:Subnet                     publicSubnet1\r\n\r\n├─ aws:ec2:RouteTableAssociation      publicRouteTableAssociation Calling &#39;toString&#39; on an &#39;Output&lt;T&gt;&#39; is not supported. This is because the value of an &#39;Output&#39; is asynchronous.\r\n\r\nSee https://www.pulumi.com/docs/concepts/inputs-outputs for more details. This function may throw in a future version of Pulumi.): error: Duplicate resource URN &#39;urn:pulumi:Dev::pulumi::aws:ec2/routeTableAssociation:RouteTableAssociation::privateRouteTableAssociation Calling &#39;toString&#39; on an &#39;Output&lt;T&gt;&#39; is not supported. This is because the value of an &#39;Output&#39; is asynchronous.\r\n\r\nTo get the value of an Output&lt;T&gt; as an Output&lt;String&gt; consider either: 1: applyValue(v -&gt; String.format(&quot;prefix%ssuffix&quot;, v)) 2: Output.format(&quot;prefix%ssuffix&quot;, o)\r\n\r\nSee https://www.pulumi.com/docs/concepts/inputs-outputs for more details. This function may throw in a future version of Pulumi.&#39;; try giving it a unique name.\r\n\r\nHere is my Code:\r\n\r\npublic class App { public static void main(String[] args)\r\n\r\n{ Pulumi.run(App::stack); } public static void stack(Context ctx) {\r\n\r\n    var config = ctx.config();\r\n    var mainVpc = config.require(&quot;vpcCidrBlock&quot;);\r\n   // var region=config.require(&quot;aws:region&quot;);\r\n    var main = new Vpc(&quot;main&quot;, VpcArgs.builder()\r\n            .cidrBlock(mainVpc)\r\n            .build());\r\n\r\n    String[] availabilityZones = config.require(&quot;availabilityZones&quot;).split(&quot;,&quot;);\r\n\r\n    // Get the CIDR blocks for subnets from configuration\r\n    var publicSubnetCidrBlock = config.require(&quot;publicSubnetCidrBlock&quot;);\r\n    var privateSubnetCidrBlock = config.require(&quot;privateSubnetCidrBlock&quot;);\r\n\r\n}}\r\n\r\nI tried changing all variable names even though they were unique","title":"Getting an error while hitting &quot;pulumi up&quot; for aws ec2 ,I am using java","body":"<p>I have given all unique values in my code, still getting an error, Please anybody help! I am very new to Pulumi and aws.</p>\n<p>This is because the value of an 'Output' is asynchronous.</p>\n<p>└─ aws:ec2:RouteTableAssociation      publicRouteTableAssociation Calling 'toString' on an 'Output' is not supported.</p>\n<p>├─ aws:ec2:Subnet                     publicSubnet1</p>\n<p>├─ aws:ec2:RouteTableAssociation      publicRouteTableAssociation Calling 'toString' on an 'Output' is not supported. This is because the value of an 'Output' is asynchronous.</p>\n<p>See <a href=\"https://www.pulumi.com/docs/concepts/inputs-outputs\" rel=\"nofollow noreferrer\">https://www.pulumi.com/docs/concepts/inputs-outputs</a> for more details. This function may throw in a future version of Pulumi.): error: Duplicate resource URN 'urn:pulumi:Dev::pulumi::aws:ec2/routeTableAssociation:RouteTableAssociation::privateRouteTableAssociation Calling 'toString' on an 'Output' is not supported. This is because the value of an 'Output' is asynchronous.</p>\n<p>To get the value of an Output as an Output consider either: 1: applyValue(v -&gt; String.format(&quot;prefix%ssuffix&quot;, v)) 2: Output.format(&quot;prefix%ssuffix&quot;, o)</p>\n<p>See <a href=\"https://www.pulumi.com/docs/concepts/inputs-outputs\" rel=\"nofollow noreferrer\">https://www.pulumi.com/docs/concepts/inputs-outputs</a> for more details. This function may throw in a future version of Pulumi.'; try giving it a unique name.</p>\n<p>Here is my Code:</p>\n<p>public class App { public static void main(String[] args)</p>\n<p>{ Pulumi.run(App::stack); } public static void stack(Context ctx) {</p>\n<pre><code>var config = ctx.config();\nvar mainVpc = config.require(&quot;vpcCidrBlock&quot;);\n</code></pre>\n<p>// var region=config.require(&quot;aws:region&quot;);\nvar main = new Vpc(&quot;main&quot;, VpcArgs.builder()\n.cidrBlock(mainVpc)\n.build());</p>\n<pre><code>String[] availabilityZones = config.require(&quot;availabilityZones&quot;).split(&quot;,&quot;);\n\n// Get the CIDR blocks for subnets from configuration\nvar publicSubnetCidrBlock = config.require(&quot;publicSubnetCidrBlock&quot;);\nvar privateSubnetCidrBlock = config.require(&quot;privateSubnetCidrBlock&quot;);\n</code></pre>\n<p>}}</p>\n<p>I tried changing all variable names even though they were unique</p>\n"},{"tags":["java","server","udp","client","port"],"owner":{"account_id":10057995,"reputation":1,"user_id":7435614,"display_name":"kokospalme"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1697096358,"answer_count":0,"score":0,"last_activity_date":1697093693,"creation_date":1697093693,"question_id":77278330,"body_markdown":"I have an application that runs an udp server on a certain port to communicate with the app.\r\n\r\nWhen I try to write another java application that receives what the server is sending, I get the error &quot;java.net.BindException: Address already in use&quot;. What am I doing wrong? Why can&#39;t my application bind to that port?\r\n\r\nmy code:\r\n\r\n```\r\npackage osc.bridge;\r\n//import com.illposed.osc.*;\r\nimport java.net.*;\r\nimport java.io.*;\r\nimport java.util.Scanner;\r\n\r\n\r\npublic class OSCbridge {\r\n\r\n\tpublic static void main(String[] args) throws UnknownHostException, IOException {\r\n\t\t\r\n\t\ttry{\r\n\t\t\tint port = 17002;\r\n\t\t\tDatagramSocket ds = new DatagramSocket(port);\r\n\t\t\tbyte[] receiveBuf = new byte[65535];\r\n\t\t\tDatagramPacket dpReceive = null;\r\n\t\t\t\r\n\t\t\twhile(true) {\r\n\t\t\t\tdpReceive = new DatagramPacket(receiveBuf, receiveBuf.length);\r\n\t\t\t\tds.receive(dpReceive);\r\n\t\t\t\t\r\n\t\t\t\tSystem.out.println(receiveBuf[0]);\r\n\r\n\t\t\t\t\r\n\t\t\t\treceiveBuf = new byte[65535];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}catch(Exception e){\r\n\t\t\tSystem.out.println(e);\r\n\t\t}\r\n\t\t\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\nI already tried to run my application without the server is running, but then my server-application throws an error because it can&#39;t start the server...","title":"receive UDP packages on localhost (java.net.BindException: Address already in use)","body":"<p>I have an application that runs an udp server on a certain port to communicate with the app.</p>\n<p>When I try to write another java application that receives what the server is sending, I get the error &quot;java.net.BindException: Address already in use&quot;. What am I doing wrong? Why can't my application bind to that port?</p>\n<p>my code:</p>\n<pre><code>package osc.bridge;\n//import com.illposed.osc.*;\nimport java.net.*;\nimport java.io.*;\nimport java.util.Scanner;\n\n\npublic class OSCbridge {\n\n    public static void main(String[] args) throws UnknownHostException, IOException {\n        \n        try{\n            int port = 17002;\n            DatagramSocket ds = new DatagramSocket(port);\n            byte[] receiveBuf = new byte[65535];\n            DatagramPacket dpReceive = null;\n            \n            while(true) {\n                dpReceive = new DatagramPacket(receiveBuf, receiveBuf.length);\n                ds.receive(dpReceive);\n                \n                System.out.println(receiveBuf[0]);\n\n                \n                receiveBuf = new byte[65535];\n            }\n            \n        }catch(Exception e){\n            System.out.println(e);\n        }\n        \n\n    }\n\n}\n</code></pre>\n<p>I already tried to run my application without the server is running, but then my server-application throws an error because it can't start the server...</p>\n"},{"tags":["java","sockets","network-programming","blocking","nonblocking"],"answers":[{"tags":[],"owner":{"account_id":116185,"reputation":7719,"user_id":304778,"accept_rate":74,"display_name":"secmask"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1286592990,"creation_date":1286592990,"answer_id":3895524,"question_id":3895461,"body_markdown":"java.nio package provides *Selector* working much like as in C.","title":"Non-blocking sockets","body":"<p>java.nio package provides <em>Selector</em> working much like as in C.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1532687799,"creation_date":1286608748,"answer_id":3896417,"question_id":3895461,"body_markdown":"Apart from using non blocking IO, you might find it is much simpler to have a writing thread for your connection.\n\nNote: if you only need a few thousand connections, one to two threads per connection is simpler. If you have around ten thousand or more connections per server you need NIO with Selectors.","title":"Non-blocking sockets","body":"<p>Apart from using non blocking IO, you might find it is much simpler to have a writing thread for your connection.</p>\n\n<p>Note: if you only need a few thousand connections, one to two threads per connection is simpler. If you have around ten thousand or more connections per server you need NIO with Selectors.</p>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1556850013,"creation_date":1286666276,"answer_id":3898298,"question_id":3895461,"body_markdown":"&gt; What&#39;s the best way to implement a non-blocking socket in Java?\r\n\r\nThere is only one way. `SocketChannel.configureBlocking(false)`.\r\n\r\nNote that several of these answers are incorrect. [SocketChannel.configureBlocking(false)][1] puts it into non-blocking mode. You don&#39;t need a `Selector` to do that. You only need a `Selector` to implement timeouts or *multiplexed* I/O with non-blocking sockets.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/nio/channels/spi/AbstractSelectableChannel.html#configureBlocking%28boolean%29","title":"Non-blocking sockets","body":"<blockquote>\n  <p>What's the best way to implement a non-blocking socket in Java?</p>\n</blockquote>\n\n<p>There is only one way. <code>SocketChannel.configureBlocking(false)</code>.</p>\n\n<p>Note that several of these answers are incorrect. <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/channels/spi/AbstractSelectableChannel.html#configureBlocking%28boolean%29\" rel=\"nofollow noreferrer\">SocketChannel.configureBlocking(false)</a> puts it into non-blocking mode. You don't need a <code>Selector</code> to do that. You only need a <code>Selector</code> to implement timeouts or <em>multiplexed</em> I/O with non-blocking sockets.</p>\n"},{"tags":[],"owner":{"account_id":423941,"reputation":3512,"user_id":803649,"accept_rate":65,"display_name":"rockstar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1372399219,"creation_date":1372399219,"answer_id":17358167,"question_id":3895461,"body_markdown":"I just wrote this code . It works well . This is an example of the Java NIO as mentioned in the above answers but here i post the code . \r\n\r\n\tServerSocketChannel ssc = null;\r\n\ttry {\r\n\t\tssc = ServerSocketChannel.open();\r\n\t\tssc.socket().bind(new InetSocketAddress(port));\r\n\t\tssc.configureBlocking(false);\r\n\t\twhile (true) {\r\n\t\t\tSocketChannel sc = ssc.accept();\r\n\t\t\tif (sc == null) {\r\n\t\t\t\t// No connections came .\r\n\t\t\t} else {\r\n\t\t\t\t// You got a connection. Do something\r\n\t\t\t}\r\n\t\t}\r\n\t} catch (IOException e) {\r\n\t\te.printStackTrace();\r\n\t}","title":"Non-blocking sockets","body":"<p>I just wrote this code . It works well . This is an example of the Java NIO as mentioned in the above answers but here i post the code . </p>\n\n<pre><code>ServerSocketChannel ssc = null;\ntry {\n    ssc = ServerSocketChannel.open();\n    ssc.socket().bind(new InetSocketAddress(port));\n    ssc.configureBlocking(false);\n    while (true) {\n        SocketChannel sc = ssc.accept();\n        if (sc == null) {\n            // No connections came .\n        } else {\n            // You got a connection. Do something\n        }\n    }\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7008272,"reputation":7615,"user_id":5372008,"display_name":"Teocci"},"down_vote_count":1,"up_vote_count":35,"is_accepted":false,"score":34,"last_activity_date":1697093541,"creation_date":1498022781,"answer_id":44667451,"question_id":3895461,"body_markdown":"**Java non-blocking sockets** were introduced in Java 2 Standard Edition 1.4. It allows net communication between applications using the socket without blocking the processes. But Teo, what is a non-blocking socket?, in which contexts can it be useful?, and how does it work? Okay young Padawan, let&#39;s answer these questions.\r\n\r\n## What is a non-blocking socket?\r\n\r\nA non-blocking socket allows I/O operations on a channel without blocking the processes using it. This means, we can use a single thread to handle multiple concurrent connections and gain *&quot;asynchronous high-performance&quot;* read/write operations (some people may not agreed with that).\r\n\r\nOk, **in which contexts can it be useful?**\r\n\r\nSuppose you would like to implement a server accepting diverse client connections. Suppose, as well, that you would like the server to be able to process multiple requests simultaneously. Using the traditional way you have two choices to develop such a server:\r\n\r\n a. Implement a multi-threaded server that manually handles a thread for each connection.\r\n b. Using an external third-party module.\r\n\r\nBoth solutions work, but adopting the first one you have to develop the whole thread-management solution, with related concurrency and conflict troubles. The second solution makes the application dependent on a non-JDK external module and probably you have to adapt the library to your necessities. By means of the non-blocking socket, you can implement a non-blocking server without directly managing threads or resorting to external modules.\r\n\r\n## How it works?\r\nBefore going into details, there are few terms that you need to understand:\r\n\r\n - In NIO based implementations, instead of writing data onto output streams and reading data from input streams, we read and write data from *buffers*. A *buffer* can be defined as a temporary storage. \r\n - *Channel* transports bulk of data into and out of *buffers*. Also, it can be viewed as an endpoint for communication.\r\n - *Readiness Selection* is a concept that refers to *“the ability to choose a socket that will not block when data is read or written.”*\r\n\r\nJava NIO has a class called `Selector` that allows a single thread to examine I/O events on multiple channels. How is this possible? Well, the `selector` can check the *&quot;readiness&quot;* of a channel for events such as a client attempting a connection, or a read/write operation. This is, each instance of `Selector` can monitor more **socket channels** and thus more connections. Now, when something happens on the channel (an event occurs), the `selector` informs the application to process **the request**. The `selector` does it by creating **event keys** (or selection keys), which are instances of the `SelectionKey` class. Each `key` holds information about **who is making the request** and **what type of the request is**, as shown in the Figure 1.\r\n\r\n[![Figure 1: Structure diagram][1]][1] *Figure 1: Structure diagram*\r\n\r\n## A basic implementation\r\n\r\nA server implementation consists of an infinite loop in which the `selector` waits for events and creates the event keys. There are four possible types for a key:\r\n\r\n - Acceptable: the associated client requests a connection.\r\n - Connectable: the server accepted the connection.\r\n - Readable: the server can read.\r\n - Writeable: the server can write.\r\n\r\nUsually `acceptable` keys are created on the server side. In fact, this kind of key simply informs the server that a client required a connection, then the server individuates the socket channel and associates this to the selector for read/write operations. After this, when the accepted client reads or writes something, the selector will create `readable` or `writeable` keys for that client..\r\n\r\nNow you are ready to write the server in Java, following the proposed algorithm. The creation of the socket channel, the `selector`, and the socket-selector registration can be made in this way:\r\n\r\n```java\r\nfinal String HOSTNAME = &quot;127.0.0.1&quot;;\r\nfinal int PORT = 8511;\r\n\r\n// This is how you open a ServerSocketChannel\r\nserverChannel = ServerSocketChannel.open();\r\n// You MUST configure as non-blocking or else you cannot register the serverChannel to the Selector.\r\nserverChannel.configureBlocking(false);\r\n// bind to the address that you will use to Serve.\r\nserverChannel.socket().bind(new InetSocketAddress(HOSTNAME, PORT));\r\n\r\n// This is how you open a Selector\r\nselector = Selector.open();\r\n/*\r\n* Here you are registering the serverSocketChannel to accept connection, thus the OP_ACCEPT.\r\n* This means that you just told your selector that this channel will be used to accept connections.\r\n* We can change this operation later to read/write, more on this later.\r\n*/\r\nserverChannel.register(selector, SelectionKey.OP_ACCEPT);\r\n```\r\n\r\nFirst we create an instance of `SocketChannel` with `ServerSocketChannel.open()` method. Next, `configureBlocking(false)` invocation sets this `channel` **as nonblocking**. The connection to the server is made by `serverChannel.socket().bind()` method. The `HOSTNAME` represents the IP address of the server, and `PORT` is the communication port. Finally, invoke `Selector.open()` method to create a `selector` instance and register it to the `channel` and registration type. In this example, the registration type is `OP_ACCEPT`, which means the selector merely reports that a client attempts a connection to the server. Other possible options are: `OP_CONNECT`, which will be used by the client; `OP_READ`; and `OP_WRITE`.\r\n\r\nNow we need to handle this requests using an infinite loop. A simple way is the following:\r\n\r\n```java\r\n// Run the server as long as the thread is not interrupted.\r\nwhile (!Thread.currentThread().isInterrupted()) {\r\n    /*\r\n     * selector.select(TIMEOUT) is waiting for an OPERATION to be ready and is a blocking call.\r\n     * For example, if a client connects right this second, then it will break from the select()\r\n     * call and run the code below it. The TIMEOUT is not needed, but its just so it doesn&#39;t\r\n     * block undefinable.\r\n     */\r\n    selector.select(TIMEOUT);\r\n\r\n    /*\r\n     * If we are here, it is because an operation happened (or the TIMEOUT expired).\r\n     * We need to get the SelectionKeys from the selector to see what operations are available.\r\n     * We use an iterator for this.\r\n     */\r\n    Iterator&lt;SelectionKey&gt; keys = selector.selectedKeys().iterator();\r\n\r\n    while (keys.hasNext()) {\r\n        SelectionKey key = keys.next();\r\n        // remove the key so that we don&#39;t process this OPERATION again.\r\n        keys.remove();\r\n\r\n        // key could be invalid if for example, the client closed the connection.\r\n        if (!key.isValid()) {\r\n            continue;\r\n        }\r\n        /*\r\n         * In the server, we start by listening to the OP_ACCEPT when we register with the Selector.\r\n         * If the key from the keyset is Acceptable, then we must get ready to accept the client\r\n         * connection and do something with it. Go read the comments in the accept method.\r\n         */\r\n        if (key.isAcceptable()) {\r\n            System.out.println(&quot;Accepting connection&quot;);\r\n            accept(key);\r\n        }\r\n        /*\r\n         * If you already read the comments in the accept() method, then you know we changed\r\n         * the OPERATION to OP_WRITE. This means that one of these keys in the iterator will return\r\n         * a channel that is writable (key.isWritable()). The write() method will explain further.\r\n         */\r\n        if (key.isWritable()) {\r\n            System.out.println(&quot;Writing...&quot;);\r\n            write(key);\r\n        }\r\n        /*\r\n         * If you already read the comments in the write method then you understand that we registered\r\n         * the OPERATION OP_READ. That means that on the next Selector.select(), there is probably a key\r\n         * that is ready to read (key.isReadable()). The read() method will explain further.\r\n         */\r\n        if (key.isReadable()) {\r\n            System.out.println(&quot;Reading connection&quot;);\r\n            read(key);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nYou can find [the implementation source here][2]\r\n\r\n### NOTE: Asynchronous Server \r\n\r\nAn alternative to the the Non-blocking implementation we can deploy an Asynchronous Server. For instance, you can use the `AsynchronousServerSocketChannel` class, which provides an asynchronous channel for stream-oriented listening sockets. \r\n\r\nTo use it, first execute its static `open()` method and then `bind()` it to a specific **port**. Next, you&#39;ll execute its `accept()` method, passing to it a class that implements the `CompletionHandler` interface. Most often, you&#39;ll find that handler created as an *anonymous inner class*.\r\n\r\nFrom this `AsynchronousServerSocketChannel` object, you invoke `accept()` to tell it to start listening for connections, passing to it a custom `CompletionHandler` instance. When we invoke `accept()`, it returns immediately. Note that this is different from the traditional blocking approach; whereas the `accept()` method **blocked until a client connected to it**, the `AsynchronousServerSocketChannel` `accept()` method handles it for you.\r\n\r\nHere you have an example:\r\n\r\n```java\r\npublic class NioSocketServer\r\n{\r\n    public NioSocketServer()\r\n    {\r\n        try {\r\n            // Create an AsynchronousServerSocketChannel that will listen on port 5000\r\n            final AsynchronousServerSocketChannel listener = AsynchronousServerSocketChannel\r\n                    .open()\r\n                    .bind(new InetSocketAddress(5000));\r\n\r\n            // Listen for a new request\r\n            listener.accept(null, new CompletionHandler&lt;AsynchronousSocketChannel, Void&gt;()\r\n            {\r\n                @Override\r\n                public void completed(AsynchronousSocketChannel ch, Void att)\r\n                {\r\n                    // Accept the next connection\r\n                    listener.accept(null, this);\r\n\r\n                    // Greet the client\r\n                    ch.write(ByteBuffer.wrap(&quot;Hello, I am Echo Server 2020, let&#39;s have an engaging conversation!\\n&quot;.getBytes()));\r\n\r\n                    // Allocate a byte buffer (4K) to read from the client\r\n                    ByteBuffer byteBuffer = ByteBuffer.allocate(4096);\r\n                    try {\r\n                        // Read the first line\r\n                        int bytesRead = ch.read(byteBuffer).get(20, TimeUnit.SECONDS);\r\n\r\n                        boolean running = true;\r\n                        while (bytesRead != -1 &amp;&amp; running) {\r\n                            System.out.println(&quot;bytes read: &quot; + bytesRead);\r\n\r\n                            // Make sure that we have data to read\r\n                            if (byteBuffer.position() &gt; 2) {\r\n                                // Make the buffer ready to read\r\n                                byteBuffer.flip();\r\n\r\n                                // Convert the buffer into a line\r\n                                byte[] lineBytes = new byte[bytesRead];\r\n                                byteBuffer.get(lineBytes, 0, bytesRead);\r\n                                String line = new String(lineBytes);\r\n\r\n                                // Debug\r\n                                System.out.println(&quot;Message: &quot; + line);\r\n\r\n                                // Echo back to the caller\r\n                                ch.write(ByteBuffer.wrap(line.getBytes()));\r\n\r\n                                // Make the buffer ready to write\r\n                                byteBuffer.clear();\r\n\r\n                                // Read the next line\r\n                                bytesRead = ch.read(byteBuffer).get(20, TimeUnit.SECONDS);\r\n                            } else {\r\n                                // An empty line signifies the end of the conversation in our protocol\r\n                                running = false;\r\n                            }\r\n                        }\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    } catch (ExecutionException e) {\r\n                        e.printStackTrace();\r\n                    } catch (TimeoutException e) {\r\n                        // The user exceeded the 20 second timeout, so close the connection\r\n                        ch.write(ByteBuffer.wrap(&quot;Good Bye\\n&quot;.getBytes()));\r\n                        System.out.println(&quot;Connection timed out, closing connection&quot;);\r\n                    }\r\n\r\n                    System.out.println(&quot;End of conversation&quot;);\r\n                    try {\r\n                        // Close the connection if we need to\r\n                        if (ch.isOpen()) {\r\n                            ch.close();\r\n                        }\r\n                    } catch (I/OException e1)\r\n                    {\r\n                        e1.printStackTrace();\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void failed(Throwable exc, Void att)\r\n                {\r\n                    ///...\r\n                }\r\n            });\r\n        } catch (I/OException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        NioSocketServer server = new NioSocketServer();\r\n        try {\r\n            Thread.sleep(60000);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nYou can find [the full code here][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UGsCh.jpg\r\n  [2]: https://github.com/teocci/NioSocketCodeSample/blob/master/src/com/github/teocci/nio/socket/nio/NonBlockingWRServer.java\r\n  [3]: https://github.com/teocci/NioSocketCodeSample","title":"Non-blocking sockets","body":"<p><strong>Java non-blocking sockets</strong> were introduced in Java 2 Standard Edition 1.4. It allows net communication between applications using the socket without blocking the processes. But Teo, what is a non-blocking socket?, in which contexts can it be useful?, and how does it work? Okay young Padawan, let's answer these questions.</p>\n<h2>What is a non-blocking socket?</h2>\n<p>A non-blocking socket allows I/O operations on a channel without blocking the processes using it. This means, we can use a single thread to handle multiple concurrent connections and gain <em>&quot;asynchronous high-performance&quot;</em> read/write operations (some people may not agreed with that).</p>\n<p>Ok, <strong>in which contexts can it be useful?</strong></p>\n<p>Suppose you would like to implement a server accepting diverse client connections. Suppose, as well, that you would like the server to be able to process multiple requests simultaneously. Using the traditional way you have two choices to develop such a server:</p>\n<p>a. Implement a multi-threaded server that manually handles a thread for each connection.\nb. Using an external third-party module.</p>\n<p>Both solutions work, but adopting the first one you have to develop the whole thread-management solution, with related concurrency and conflict troubles. The second solution makes the application dependent on a non-JDK external module and probably you have to adapt the library to your necessities. By means of the non-blocking socket, you can implement a non-blocking server without directly managing threads or resorting to external modules.</p>\n<h2>How it works?</h2>\n<p>Before going into details, there are few terms that you need to understand:</p>\n<ul>\n<li>In NIO based implementations, instead of writing data onto output streams and reading data from input streams, we read and write data from <em>buffers</em>. A <em>buffer</em> can be defined as a temporary storage.</li>\n<li><em>Channel</em> transports bulk of data into and out of <em>buffers</em>. Also, it can be viewed as an endpoint for communication.</li>\n<li><em>Readiness Selection</em> is a concept that refers to <em>“the ability to choose a socket that will not block when data is read or written.”</em></li>\n</ul>\n<p>Java NIO has a class called <code>Selector</code> that allows a single thread to examine I/O events on multiple channels. How is this possible? Well, the <code>selector</code> can check the <em>&quot;readiness&quot;</em> of a channel for events such as a client attempting a connection, or a read/write operation. This is, each instance of <code>Selector</code> can monitor more <strong>socket channels</strong> and thus more connections. Now, when something happens on the channel (an event occurs), the <code>selector</code> informs the application to process <strong>the request</strong>. The <code>selector</code> does it by creating <strong>event keys</strong> (or selection keys), which are instances of the <code>SelectionKey</code> class. Each <code>key</code> holds information about <strong>who is making the request</strong> and <strong>what type of the request is</strong>, as shown in the Figure 1.</p>\n<p><a href=\"https://i.stack.imgur.com/UGsCh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UGsCh.jpg\" alt=\"Figure 1: Structure diagram\" /></a> <em>Figure 1: Structure diagram</em></p>\n<h2>A basic implementation</h2>\n<p>A server implementation consists of an infinite loop in which the <code>selector</code> waits for events and creates the event keys. There are four possible types for a key:</p>\n<ul>\n<li>Acceptable: the associated client requests a connection.</li>\n<li>Connectable: the server accepted the connection.</li>\n<li>Readable: the server can read.</li>\n<li>Writeable: the server can write.</li>\n</ul>\n<p>Usually <code>acceptable</code> keys are created on the server side. In fact, this kind of key simply informs the server that a client required a connection, then the server individuates the socket channel and associates this to the selector for read/write operations. After this, when the accepted client reads or writes something, the selector will create <code>readable</code> or <code>writeable</code> keys for that client..</p>\n<p>Now you are ready to write the server in Java, following the proposed algorithm. The creation of the socket channel, the <code>selector</code>, and the socket-selector registration can be made in this way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final String HOSTNAME = &quot;127.0.0.1&quot;;\nfinal int PORT = 8511;\n\n// This is how you open a ServerSocketChannel\nserverChannel = ServerSocketChannel.open();\n// You MUST configure as non-blocking or else you cannot register the serverChannel to the Selector.\nserverChannel.configureBlocking(false);\n// bind to the address that you will use to Serve.\nserverChannel.socket().bind(new InetSocketAddress(HOSTNAME, PORT));\n\n// This is how you open a Selector\nselector = Selector.open();\n/*\n* Here you are registering the serverSocketChannel to accept connection, thus the OP_ACCEPT.\n* This means that you just told your selector that this channel will be used to accept connections.\n* We can change this operation later to read/write, more on this later.\n*/\nserverChannel.register(selector, SelectionKey.OP_ACCEPT);\n</code></pre>\n<p>First we create an instance of <code>SocketChannel</code> with <code>ServerSocketChannel.open()</code> method. Next, <code>configureBlocking(false)</code> invocation sets this <code>channel</code> <strong>as nonblocking</strong>. The connection to the server is made by <code>serverChannel.socket().bind()</code> method. The <code>HOSTNAME</code> represents the IP address of the server, and <code>PORT</code> is the communication port. Finally, invoke <code>Selector.open()</code> method to create a <code>selector</code> instance and register it to the <code>channel</code> and registration type. In this example, the registration type is <code>OP_ACCEPT</code>, which means the selector merely reports that a client attempts a connection to the server. Other possible options are: <code>OP_CONNECT</code>, which will be used by the client; <code>OP_READ</code>; and <code>OP_WRITE</code>.</p>\n<p>Now we need to handle this requests using an infinite loop. A simple way is the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Run the server as long as the thread is not interrupted.\nwhile (!Thread.currentThread().isInterrupted()) {\n    /*\n     * selector.select(TIMEOUT) is waiting for an OPERATION to be ready and is a blocking call.\n     * For example, if a client connects right this second, then it will break from the select()\n     * call and run the code below it. The TIMEOUT is not needed, but its just so it doesn't\n     * block undefinable.\n     */\n    selector.select(TIMEOUT);\n\n    /*\n     * If we are here, it is because an operation happened (or the TIMEOUT expired).\n     * We need to get the SelectionKeys from the selector to see what operations are available.\n     * We use an iterator for this.\n     */\n    Iterator&lt;SelectionKey&gt; keys = selector.selectedKeys().iterator();\n\n    while (keys.hasNext()) {\n        SelectionKey key = keys.next();\n        // remove the key so that we don't process this OPERATION again.\n        keys.remove();\n\n        // key could be invalid if for example, the client closed the connection.\n        if (!key.isValid()) {\n            continue;\n        }\n        /*\n         * In the server, we start by listening to the OP_ACCEPT when we register with the Selector.\n         * If the key from the keyset is Acceptable, then we must get ready to accept the client\n         * connection and do something with it. Go read the comments in the accept method.\n         */\n        if (key.isAcceptable()) {\n            System.out.println(&quot;Accepting connection&quot;);\n            accept(key);\n        }\n        /*\n         * If you already read the comments in the accept() method, then you know we changed\n         * the OPERATION to OP_WRITE. This means that one of these keys in the iterator will return\n         * a channel that is writable (key.isWritable()). The write() method will explain further.\n         */\n        if (key.isWritable()) {\n            System.out.println(&quot;Writing...&quot;);\n            write(key);\n        }\n        /*\n         * If you already read the comments in the write method then you understand that we registered\n         * the OPERATION OP_READ. That means that on the next Selector.select(), there is probably a key\n         * that is ready to read (key.isReadable()). The read() method will explain further.\n         */\n        if (key.isReadable()) {\n            System.out.println(&quot;Reading connection&quot;);\n            read(key);\n        }\n    }\n}\n</code></pre>\n<p>You can find <a href=\"https://github.com/teocci/NioSocketCodeSample/blob/master/src/com/github/teocci/nio/socket/nio/NonBlockingWRServer.java\" rel=\"nofollow noreferrer\">the implementation source here</a></p>\n<h3>NOTE: Asynchronous Server</h3>\n<p>An alternative to the the Non-blocking implementation we can deploy an Asynchronous Server. For instance, you can use the <code>AsynchronousServerSocketChannel</code> class, which provides an asynchronous channel for stream-oriented listening sockets.</p>\n<p>To use it, first execute its static <code>open()</code> method and then <code>bind()</code> it to a specific <strong>port</strong>. Next, you'll execute its <code>accept()</code> method, passing to it a class that implements the <code>CompletionHandler</code> interface. Most often, you'll find that handler created as an <em>anonymous inner class</em>.</p>\n<p>From this <code>AsynchronousServerSocketChannel</code> object, you invoke <code>accept()</code> to tell it to start listening for connections, passing to it a custom <code>CompletionHandler</code> instance. When we invoke <code>accept()</code>, it returns immediately. Note that this is different from the traditional blocking approach; whereas the <code>accept()</code> method <strong>blocked until a client connected to it</strong>, the <code>AsynchronousServerSocketChannel</code> <code>accept()</code> method handles it for you.</p>\n<p>Here you have an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class NioSocketServer\n{\n    public NioSocketServer()\n    {\n        try {\n            // Create an AsynchronousServerSocketChannel that will listen on port 5000\n            final AsynchronousServerSocketChannel listener = AsynchronousServerSocketChannel\n                    .open()\n                    .bind(new InetSocketAddress(5000));\n\n            // Listen for a new request\n            listener.accept(null, new CompletionHandler&lt;AsynchronousSocketChannel, Void&gt;()\n            {\n                @Override\n                public void completed(AsynchronousSocketChannel ch, Void att)\n                {\n                    // Accept the next connection\n                    listener.accept(null, this);\n\n                    // Greet the client\n                    ch.write(ByteBuffer.wrap(&quot;Hello, I am Echo Server 2020, let's have an engaging conversation!\\n&quot;.getBytes()));\n\n                    // Allocate a byte buffer (4K) to read from the client\n                    ByteBuffer byteBuffer = ByteBuffer.allocate(4096);\n                    try {\n                        // Read the first line\n                        int bytesRead = ch.read(byteBuffer).get(20, TimeUnit.SECONDS);\n\n                        boolean running = true;\n                        while (bytesRead != -1 &amp;&amp; running) {\n                            System.out.println(&quot;bytes read: &quot; + bytesRead);\n\n                            // Make sure that we have data to read\n                            if (byteBuffer.position() &gt; 2) {\n                                // Make the buffer ready to read\n                                byteBuffer.flip();\n\n                                // Convert the buffer into a line\n                                byte[] lineBytes = new byte[bytesRead];\n                                byteBuffer.get(lineBytes, 0, bytesRead);\n                                String line = new String(lineBytes);\n\n                                // Debug\n                                System.out.println(&quot;Message: &quot; + line);\n\n                                // Echo back to the caller\n                                ch.write(ByteBuffer.wrap(line.getBytes()));\n\n                                // Make the buffer ready to write\n                                byteBuffer.clear();\n\n                                // Read the next line\n                                bytesRead = ch.read(byteBuffer).get(20, TimeUnit.SECONDS);\n                            } else {\n                                // An empty line signifies the end of the conversation in our protocol\n                                running = false;\n                            }\n                        }\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    } catch (ExecutionException e) {\n                        e.printStackTrace();\n                    } catch (TimeoutException e) {\n                        // The user exceeded the 20 second timeout, so close the connection\n                        ch.write(ByteBuffer.wrap(&quot;Good Bye\\n&quot;.getBytes()));\n                        System.out.println(&quot;Connection timed out, closing connection&quot;);\n                    }\n\n                    System.out.println(&quot;End of conversation&quot;);\n                    try {\n                        // Close the connection if we need to\n                        if (ch.isOpen()) {\n                            ch.close();\n                        }\n                    } catch (I/OException e1)\n                    {\n                        e1.printStackTrace();\n                    }\n                }\n\n                @Override\n                public void failed(Throwable exc, Void att)\n                {\n                    ///...\n                }\n            });\n        } catch (I/OException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void main(String[] args)\n    {\n        NioSocketServer server = new NioSocketServer();\n        try {\n            Thread.sleep(60000);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>You can find <a href=\"https://github.com/teocci/NioSocketCodeSample\" rel=\"nofollow noreferrer\">the full code here</a></p>\n"}],"owner":{"account_id":78541,"reputation":8756,"user_id":223465,"accept_rate":84,"display_name":"jasonline"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28842,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"answer_count":5,"score":20,"last_activity_date":1697093541,"creation_date":1286591459,"question_id":3895461,"body_markdown":"What&#39;s the best way to implement a non-blocking socket in Java? \r\n\r\nOr is there such a thing? I have a program that communicates with a server through socket but I don&#39;t want the socket call to block/cause delay if there is a problem with the data/connection.","title":"Non-blocking sockets","body":"<p>What's the best way to implement a non-blocking socket in Java? </p>\n\n<p>Or is there such a thing? I have a program that communicates with a server through socket but I don't want the socket call to block/cause delay if there is a problem with the data/connection.</p>\n"},{"tags":["java","spring","spring-mvc","spring-boot","spring-test"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1474175676,"post_id":39554285,"comment_id":66419925,"body_markdown":"Does the request work with the same configuration from a browser?","body":"Does the request work with the same configuration from a browser?"},{"owner":{"account_id":5969319,"reputation":1268,"user_id":4692129,"accept_rate":69,"display_name":"Marco Prado"},"score":0,"creation_date":1474175823,"post_id":39554285,"comment_id":66419966,"body_markdown":"Yes, it does work","body":"Yes, it does work"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1474176047,"post_id":39554285,"comment_id":66420002,"body_markdown":"Smells like a problem with your test configuration, then. What happens if you put a breakpoint inside your `configure` and debug the test?","body":"Smells like a problem with your test configuration, then. What happens if you put a breakpoint inside your <code>configure</code> and debug the test?"},{"owner":{"account_id":5969319,"reputation":1268,"user_id":4692129,"accept_rate":69,"display_name":"Marco Prado"},"score":0,"creation_date":1474176412,"post_id":39554285,"comment_id":66420059,"body_markdown":"Sorry, just saw in the documentation that the WebMvcTest annotation searches only WebMvcConfigurer and not WebSecurityConfigurer","body":"Sorry, just saw in the documentation that the WebMvcTest annotation searches only WebMvcConfigurer and not WebSecurityConfigurer"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1474176509,"post_id":39554285,"comment_id":66420077,"body_markdown":"In that case, I suggest figuring out what configuration is required to apply the security configurer and writing a self-answer. This is a reasonable question that is likely to happen to someone else using the new Boot test features.","body":"In that case, I suggest figuring out what configuration is required to apply the security configurer and writing a self-answer. This is a reasonable question that is likely to happen to someone else using the new Boot test features."},{"owner":{"account_id":5969319,"reputation":1268,"user_id":4692129,"accept_rate":69,"display_name":"Marco Prado"},"score":0,"creation_date":1474176617,"post_id":39554285,"comment_id":66420099,"body_markdown":"But it still don&#39;t make sense, if my configuration is not picked, why the url is returning 401 as if it were secured? It should return ok","body":"But it still don&#39;t make sense, if my configuration is not picked, why the url is returning 401 as if it were secured? It should return ok"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1474176679,"post_id":39554285,"comment_id":66420114,"body_markdown":"Boot is automatically applying Basic authentication to all URLs. You may be able to see this in the startup logs (I don&#39;t remember whether that&#39;s the case for tests).","body":"Boot is automatically applying Basic authentication to all URLs. You may be able to see this in the startup logs (I don&#39;t remember whether that&#39;s the case for tests)."},{"owner":{"account_id":5969319,"reputation":1268,"user_id":4692129,"accept_rate":69,"display_name":"Marco Prado"},"score":0,"creation_date":1474177044,"post_id":39554285,"comment_id":66420164,"body_markdown":"You&#39;re right, but the problem is the apply(springSecurity()).\nIt is applying a default spring security config since @WebMvcTest doesn&#39;t pick security configurations","body":"You&#39;re right, but the problem is the apply(springSecurity()). It is applying a default spring security config since @WebMvcTest doesn&#39;t pick security configurations"},{"owner":{"account_id":5969319,"reputation":1268,"user_id":4692129,"accept_rate":69,"display_name":"Marco Prado"},"score":0,"creation_date":1474177191,"post_id":39554285,"comment_id":66420189,"body_markdown":"It is a little weird, since this new concept of test slices gives the hability to run tests only with the Mvc layer, but in my opinion almost every application has security implemented. It forces me to use the full aplication, making the @WebMvcTest pointless","body":"It is a little weird, since this new concept of test slices gives the hability to run tests only with the Mvc layer, but in my opinion almost every application has security implemented. It forces me to use the full aplication, making the @WebMvcTest pointless"},{"owner":{"account_id":5788636,"reputation":381,"user_id":4566958,"display_name":"Saurav Wahid"},"score":0,"creation_date":1474177678,"post_id":39554285,"comment_id":66420262,"body_markdown":"i think you should change this in test `.andExpect(content().string(containsString(&quot;login&quot;)));` instead of `.andExpect(content().string(containsString(&quot;Login&quot;)));`","body":"i think you should change this in test <code>.andExpect(content().string(containsString(&quot;login&quot;)));</code> instead of <code>.andExpect(content().string(containsString(&quot;Login&quot;)));</code>"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1474178820,"post_id":39554285,"comment_id":66420500,"body_markdown":"You should be able to just use `@ContextConfiguration` to load that one specific configurer class.","body":"You should be able to just use <code>@ContextConfiguration</code> to load that one specific configurer class."},{"owner":{"account_id":5969319,"reputation":1268,"user_id":4692129,"accept_rate":69,"display_name":"Marco Prado"},"score":0,"creation_date":1474179051,"post_id":39554285,"comment_id":66420543,"body_markdown":"I just answered the question exactly with this. Thanks, your comments helped me find the answer","body":"I just answered the question exactly with this. Thanks, your comments helped me find the answer"},{"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"score":0,"creation_date":1474195370,"post_id":39554285,"comment_id":66424335,"body_markdown":"FYI: this is basically a duplicate of http://stackoverflow.com/questions/38675020/testing-security-in-spring-boot-1-4","body":"FYI: this is basically a duplicate of <a href=\"http://stackoverflow.com/questions/38675020/testing-security-in-spring-boot-1-4\" title=\"testing security in spring boot 1 4\">stackoverflow.com/questions/38675020/&hellip;</a>"},{"owner":{"account_id":8306545,"reputation":47686,"user_id":6243352,"display_name":"ggorlen"},"score":0,"creation_date":1650938359,"post_id":39554285,"comment_id":127236566,"body_markdown":"An answer in [Unit test Springboot MockMvc returns 403 Forbidden](https://stackoverflow.com/questions/53387415/unit-test-springboot-mockmvc-returns-403-forbidden/57069366#57069366) worked for me: `@AutoConfigureMockMvc(addFilters = false)`, but I&#39;m not 100% of whether it&#39;s actually related.","body":"An answer in <a href=\"https://stackoverflow.com/questions/53387415/unit-test-springboot-mockmvc-returns-403-forbidden/57069366#57069366\">Unit test Springboot MockMvc returns 403 Forbidden</a> worked for me: <code>@AutoConfigureMockMvc(addFilters = false)</code>, but I&#39;m not 100% of whether it&#39;s actually related."}],"answers":[{"tags":[],"owner":{"account_id":5969319,"reputation":1268,"user_id":4692129,"accept_rate":69,"display_name":"Marco Prado"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1474178916,"creation_date":1474178916,"answer_id":39554684,"question_id":39554285,"body_markdown":"I found the answer &lt;br /&gt;\r\nSpring docs says that: \r\n\r\n&gt; @WebMvcTest will auto-configure the Spring MVC infrastructure and\r\n&gt; limit scanned beans to @Controller, @ControllerAdvice, @JsonComponent,\r\n&gt; Filter, WebMvcConfigurer and HandlerMethodArgumentResolver. Regular\r\n&gt; @Component beans will not be scanned when using this annotation.\r\n\r\nAnd according to this issue in github:\r\n\r\nhttps://github.com/spring-projects/spring-boot/issues/5476\r\n\r\nThe @WebMvcTest by default auto configure spring security if spring-security-test is present in the class path (which in my case is).\r\n\r\nSo since WebSecurityConfigurer classes aren&#39;t picked, the default security was being auto configured, that is the motive I was receiving the 401 in url&#39;s that was not secured in my security configuration. Spring security default auto configuration protects all url&#39;s with basic authentication.\r\n\r\nWhat I did to solve the problem was to annotate the class with @ContextConfiguration, and @MockBean like it is described in the documentation:\r\n\r\n&gt; Often @WebMvcTest will be limited to a single controller and used in\r\n&gt; combination with @MockBean to provide mock implementations for\r\n&gt; required collaborators.\r\n\r\nAnd here is the test class\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @WebMvcTest\r\n    @ContextConfiguration(classes={Application.class, MvcConfig.class, SecurityConfig.class})\r\n    public class ITIndex {\r\n    \r\n    \t@Autowired\r\n    \tWebApplicationContext context;\r\n    \t\r\n    \tMockMvc mockMvc;\r\n    \t\r\n    \t@MockBean\r\n    \tUserRegistrationApplicationService userRegistrationApplicationService;\r\n    \t\r\n    \t@MockBean\r\n    \tUserDetailsService userDetailsService;\r\n    \t\r\n    \t@Before\r\n    \tpublic void setUp() {\r\n    \t\tthis.mockMvc = MockMvcBuilders\r\n    \t\t\t\t\t\t.webAppContextSetup(context)\r\n    \t\t\t\t\t\t.apply(springSecurity())\r\n    \t\t\t\t\t\t.build();\r\n    \t}\r\n    \t\r\n    \t@Test\r\n    \tpublic void should_render_index() throws Exception {\r\n    \t\tmockMvc.perform(get(&quot;/&quot;))\r\n    \t\t\t.andExpect(status().isOk())\r\n    \t\t\t.andExpect(view().name(&quot;index&quot;))\r\n    \t\t\t.andExpect(content().string(containsString(&quot;Login&quot;)));\r\n    \t}\r\n    }\r\n\r\nApplication, MvcConfig and SecurityConfig are all my configuration classes","title":"Spring Test returning 401 for unsecured URLs","body":"<p>I found the answer <br />\nSpring docs says that: </p>\n\n<blockquote>\n  <p>@WebMvcTest will auto-configure the Spring MVC infrastructure and\n  limit scanned beans to @Controller, @ControllerAdvice, @JsonComponent,\n  Filter, WebMvcConfigurer and HandlerMethodArgumentResolver. Regular\n  @Component beans will not be scanned when using this annotation.</p>\n</blockquote>\n\n<p>And according to this issue in github:</p>\n\n<p><a href=\"https://github.com/spring-projects/spring-boot/issues/5476\" rel=\"noreferrer\">https://github.com/spring-projects/spring-boot/issues/5476</a></p>\n\n<p>The @WebMvcTest by default auto configure spring security if spring-security-test is present in the class path (which in my case is).</p>\n\n<p>So since WebSecurityConfigurer classes aren't picked, the default security was being auto configured, that is the motive I was receiving the 401 in url's that was not secured in my security configuration. Spring security default auto configuration protects all url's with basic authentication.</p>\n\n<p>What I did to solve the problem was to annotate the class with @ContextConfiguration, and @MockBean like it is described in the documentation:</p>\n\n<blockquote>\n  <p>Often @WebMvcTest will be limited to a single controller and used in\n  combination with @MockBean to provide mock implementations for\n  required collaborators.</p>\n</blockquote>\n\n<p>And here is the test class</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@WebMvcTest\n@ContextConfiguration(classes={Application.class, MvcConfig.class, SecurityConfig.class})\npublic class ITIndex {\n\n    @Autowired\n    WebApplicationContext context;\n\n    MockMvc mockMvc;\n\n    @MockBean\n    UserRegistrationApplicationService userRegistrationApplicationService;\n\n    @MockBean\n    UserDetailsService userDetailsService;\n\n    @Before\n    public void setUp() {\n        this.mockMvc = MockMvcBuilders\n                        .webAppContextSetup(context)\n                        .apply(springSecurity())\n                        .build();\n    }\n\n    @Test\n    public void should_render_index() throws Exception {\n        mockMvc.perform(get(\"/\"))\n            .andExpect(status().isOk())\n            .andExpect(view().name(\"index\"))\n            .andExpect(content().string(containsString(\"Login\")));\n    }\n}\n</code></pre>\n\n<p>Application, MvcConfig and SecurityConfig are all my configuration classes</p>\n"},{"tags":[],"owner":{"account_id":3076439,"reputation":545,"user_id":2605631,"accept_rate":20,"display_name":"mertaksu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522755180,"creation_date":1522755180,"answer_id":49629037,"question_id":39554285,"body_markdown":"If you use SpringJUnit4ClassRunner instead of SpringRunner you can catch your requests in security layer. If you are using basic authentication you have to user httpBasic method inside mockMvc.perform\r\n\r\n     mockMvc.perform(get(&quot;/&quot;).with(httpBasic(username,rightPassword))","title":"Spring Test returning 401 for unsecured URLs","body":"<p>If you use SpringJUnit4ClassRunner instead of SpringRunner you can catch your requests in security layer. If you are using basic authentication you have to user httpBasic method inside mockMvc.perform</p>\n\n<pre><code> mockMvc.perform(get(\"/\").with(httpBasic(username,rightPassword))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6181132,"reputation":191,"user_id":4816600,"display_name":"Michael Damone"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1535010922,"creation_date":1535010922,"answer_id":51980861,"question_id":39554285,"body_markdown":"Not sure if this was available when the original question was asked, but if truly not wanting to test the security portion of a web request (which seems reasonable if the endpoint is known to be unsecure), then I think this could be done simply by using the `secure` attribute of the `@WebMvcTest` annotation (it defaults to `true` so setting it to `false` should disable the auto-configuration of Spring Security&#39;s MockMvc support):\r\n\r\n    @WebMvcTest(secure = false)\r\n\r\nMore info available in the [javadocs](https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/web/servlet/WebMvcTest.html#secure--)\r\n","title":"Spring Test returning 401 for unsecured URLs","body":"<p>Not sure if this was available when the original question was asked, but if truly not wanting to test the security portion of a web request (which seems reasonable if the endpoint is known to be unsecure), then I think this could be done simply by using the <code>secure</code> attribute of the <code>@WebMvcTest</code> annotation (it defaults to <code>true</code> so setting it to <code>false</code> should disable the auto-configuration of Spring Security's MockMvc support):</p>\n\n<pre><code>@WebMvcTest(secure = false)\n</code></pre>\n\n<p>More info available in the <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/web/servlet/WebMvcTest.html#secure--\" rel=\"noreferrer\">javadocs</a></p>\n"},{"tags":[],"owner":{"account_id":1721698,"reputation":3579,"user_id":1577363,"display_name":"erhun"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1647892832,"creation_date":1550909188,"answer_id":54839518,"question_id":39554285,"body_markdown":"I had the same problem and solve the issue with the help of the answers here and @Sam Brannen comment.\r\n\r\n&gt;You probably don&#39;t need to use @ContextConfiguration. Simply adding @Import(SecurityConfig.class) should typically suffice.\r\n\r\nTo simplify and update the answers a bit more I want to share how i fix it in my spring-boot2 project.\r\n\r\nI want to test below endpoint.\r\n\r\n    @RestController\r\n    @Slf4j\r\n    public class SystemOptionController {\r\n    \r\n      private final SystemOptionService systemOptionService;\r\n      private final SystemOptionMapper systemOptionMapper;\r\n    \r\n      public SystemOptionController(\r\n          SystemOptionService systemOptionService, SystemOptionMapper systemOptionMapper) {\r\n        this.systemOptionService = systemOptionService;\r\n        this.systemOptionMapper = systemOptionMapper;\r\n      }\r\n    \r\n      @PostMapping(value = &quot;/systemoption&quot;)\r\n      public SystemOptionDto create(@RequestBody SystemOptionRequest systemOptionRequest) {\r\n        SystemOption systemOption =\r\n            systemOptionService.save(\r\n                systemOptionRequest.getOptionKey(), systemOptionRequest.getOptionValue());\r\n        SystemOptionDto dto = systemOptionMapper.mapToSystemOptionDto(systemOption);\r\n        return dto;\r\n      }\r\n    }\r\n\r\nAll service methods must be interface otherwise application context can&#39;t be initialized. You can check my SecurityConfig.\r\n\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableResourceServer\r\n    @EnableGlobalMethodSecurity(securedEnabled = true)\r\n    public class SecurityConfig extends ResourceServerConfigurerAdapter {\r\n    \r\n    \t@Autowired\r\n    \tprivate ResourceServerTokenServices resourceServerTokenServices;\r\n    \r\n    \t@Override\r\n    \tpublic void configure(final HttpSecurity http) throws Exception {\r\n    \t\tif (Application.isDev()) {\r\n    \t\t\thttp.csrf().disable().authorizeRequests().anyRequest().permitAll();\r\n    \t\t} else {\r\n    \t\t\thttp\r\n    \t\t\t\t\t.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n    \t\t\t\t\t.and()\r\n    \t\t\t\t\t.authorizeRequests().regexMatchers(&quot;/health&quot;).permitAll()\r\n    \t\t\t    .antMatchers(&quot;/prometheus&quot;).permitAll()\r\n    \t\t\t    .anyRequest().authenticated()\r\n    \t\t\t\t\t.and()\r\n    \t\t\t\t\t.authorizeRequests()\r\n    \t\t\t\t\t.anyRequest()\r\n    \t\t\t\t\t.permitAll();\r\n    \t\t\thttp.csrf().disable();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void configure(final ResourceServerSecurityConfigurer resources) {\r\n    \t\tresources.tokenServices(resourceServerTokenServices);\r\n    \t}\r\n    }\r\n\r\nAnd below you can see my **SystemOptionControllerTest** class.\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @WebMvcTest(value = SystemOptionController.class)\r\n    @Import(SecurityConfig.class)\r\n    public class SystemOptionControllerTest {\r\n    \r\n      @Autowired private ObjectMapper mapper;\r\n    \r\n      @MockBean private SystemOptionService systemOptionService;\r\n      @MockBean private SystemOptionMapper systemOptionMapper;\r\n      @MockBean private ResourceServerTokenServices resourceServerTokenServices;\r\n    \r\n      private static final String OPTION_KEY = &quot;OPTION_KEY&quot;;\r\n      private static final String OPTION_VALUE = &quot;OPTION_VALUE&quot;;\r\n    \r\n      @Autowired private MockMvc mockMvc;\r\n    \r\n      @Test\r\n      public void createSystemOptionIfParametersAreValid() throws Exception {\r\n        // given\r\n    \r\n        SystemOption systemOption =\r\n            SystemOption.builder().optionKey(OPTION_KEY).optionValue(OPTION_VALUE).build();\r\n    \r\n        SystemOptionDto systemOptionDto =\r\n            SystemOptionDto.builder().optionKey(OPTION_KEY).optionValue(OPTION_VALUE).build();\r\n    \r\n        SystemOptionRequest systemOptionRequest = new SystemOptionRequest();\r\n        systemOptionRequest.setOptionKey(OPTION_KEY);\r\n        systemOptionRequest.setOptionValue(OPTION_VALUE);\r\n        String json = mapper.writeValueAsString(systemOptionRequest);\r\n    \r\n        // when\r\n        when(systemOptionService.save(\r\n                systemOptionRequest.getOptionKey(), systemOptionRequest.getOptionValue()))\r\n            .thenReturn(systemOption);\r\n        when(systemOptionMapper.mapToSystemOptionDto(systemOption)).thenReturn(systemOptionDto);\r\n    \r\n        // then\r\n        this.mockMvc\r\n            .perform(\r\n                post(&quot;/systemoption&quot;)\r\n                    .contentType(MediaType.APPLICATION_JSON)\r\n                    .content(json)\r\n                    .accept(MediaType.APPLICATION_JSON))\r\n            .andDo(print())\r\n            .andExpect(MockMvcResultMatchers.status().isOk())\r\n            .andExpect(content().string(containsString(OPTION_KEY)))\r\n            .andExpect(content().string(containsString(OPTION_VALUE)));\r\n      }\r\n    }\r\n\r\nSo I just need to add `@Import(SecurityConfig.class)` to my mvc test class.","title":"Spring Test returning 401 for unsecured URLs","body":"<p>I had the same problem and solve the issue with the help of the answers here and @Sam Brannen comment.</p>\n<blockquote>\n<p>You probably don't need to use @ContextConfiguration. Simply adding @Import(SecurityConfig.class) should typically suffice.</p>\n</blockquote>\n<p>To simplify and update the answers a bit more I want to share how i fix it in my spring-boot2 project.</p>\n<p>I want to test below endpoint.</p>\n<pre><code>@RestController\n@Slf4j\npublic class SystemOptionController {\n\n  private final SystemOptionService systemOptionService;\n  private final SystemOptionMapper systemOptionMapper;\n\n  public SystemOptionController(\n      SystemOptionService systemOptionService, SystemOptionMapper systemOptionMapper) {\n    this.systemOptionService = systemOptionService;\n    this.systemOptionMapper = systemOptionMapper;\n  }\n\n  @PostMapping(value = &quot;/systemoption&quot;)\n  public SystemOptionDto create(@RequestBody SystemOptionRequest systemOptionRequest) {\n    SystemOption systemOption =\n        systemOptionService.save(\n            systemOptionRequest.getOptionKey(), systemOptionRequest.getOptionValue());\n    SystemOptionDto dto = systemOptionMapper.mapToSystemOptionDto(systemOption);\n    return dto;\n  }\n}\n</code></pre>\n<p>All service methods must be interface otherwise application context can't be initialized. You can check my SecurityConfig.</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableResourceServer\n@EnableGlobalMethodSecurity(securedEnabled = true)\npublic class SecurityConfig extends ResourceServerConfigurerAdapter {\n\n    @Autowired\n    private ResourceServerTokenServices resourceServerTokenServices;\n\n    @Override\n    public void configure(final HttpSecurity http) throws Exception {\n        if (Application.isDev()) {\n            http.csrf().disable().authorizeRequests().anyRequest().permitAll();\n        } else {\n            http\n                    .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                    .and()\n                    .authorizeRequests().regexMatchers(&quot;/health&quot;).permitAll()\n                .antMatchers(&quot;/prometheus&quot;).permitAll()\n                .anyRequest().authenticated()\n                    .and()\n                    .authorizeRequests()\n                    .anyRequest()\n                    .permitAll();\n            http.csrf().disable();\n        }\n    }\n\n    @Override\n    public void configure(final ResourceServerSecurityConfigurer resources) {\n        resources.tokenServices(resourceServerTokenServices);\n    }\n}\n</code></pre>\n<p>And below you can see my <strong>SystemOptionControllerTest</strong> class.</p>\n<pre><code>@RunWith(SpringRunner.class)\n@WebMvcTest(value = SystemOptionController.class)\n@Import(SecurityConfig.class)\npublic class SystemOptionControllerTest {\n\n  @Autowired private ObjectMapper mapper;\n\n  @MockBean private SystemOptionService systemOptionService;\n  @MockBean private SystemOptionMapper systemOptionMapper;\n  @MockBean private ResourceServerTokenServices resourceServerTokenServices;\n\n  private static final String OPTION_KEY = &quot;OPTION_KEY&quot;;\n  private static final String OPTION_VALUE = &quot;OPTION_VALUE&quot;;\n\n  @Autowired private MockMvc mockMvc;\n\n  @Test\n  public void createSystemOptionIfParametersAreValid() throws Exception {\n    // given\n\n    SystemOption systemOption =\n        SystemOption.builder().optionKey(OPTION_KEY).optionValue(OPTION_VALUE).build();\n\n    SystemOptionDto systemOptionDto =\n        SystemOptionDto.builder().optionKey(OPTION_KEY).optionValue(OPTION_VALUE).build();\n\n    SystemOptionRequest systemOptionRequest = new SystemOptionRequest();\n    systemOptionRequest.setOptionKey(OPTION_KEY);\n    systemOptionRequest.setOptionValue(OPTION_VALUE);\n    String json = mapper.writeValueAsString(systemOptionRequest);\n\n    // when\n    when(systemOptionService.save(\n            systemOptionRequest.getOptionKey(), systemOptionRequest.getOptionValue()))\n        .thenReturn(systemOption);\n    when(systemOptionMapper.mapToSystemOptionDto(systemOption)).thenReturn(systemOptionDto);\n\n    // then\n    this.mockMvc\n        .perform(\n            post(&quot;/systemoption&quot;)\n                .contentType(MediaType.APPLICATION_JSON)\n                .content(json)\n                .accept(MediaType.APPLICATION_JSON))\n        .andDo(print())\n        .andExpect(MockMvcResultMatchers.status().isOk())\n        .andExpect(content().string(containsString(OPTION_KEY)))\n        .andExpect(content().string(containsString(OPTION_VALUE)));\n  }\n}\n</code></pre>\n<p>So I just need to add <code>@Import(SecurityConfig.class)</code> to my mvc test class.</p>\n"},{"tags":[],"owner":{"account_id":2276745,"reputation":1429,"user_id":2002804,"accept_rate":40,"display_name":"Jaykishan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1654082395,"creation_date":1654082395,"answer_id":72460963,"question_id":39554285,"body_markdown":"Try this if using spring boot 2.0+\r\n\r\n&gt; @WebMvcTest(controllers = TestController.class, ***excludeAutoConfiguration = {SecurityAutoConfiguration.class}***)","title":"Spring Test returning 401 for unsecured URLs","body":"<p>Try this if using spring boot 2.0+</p>\n<blockquote>\n<p>@WebMvcTest(controllers = TestController.class, <em><strong>excludeAutoConfiguration = {SecurityAutoConfiguration.class}</strong></em>)</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":29654089,"reputation":1,"user_id":22727225,"display_name":"Harsha Vardhan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697093488,"creation_date":1697093488,"answer_id":77278310,"question_id":39554285,"body_markdown":"You can add this one \r\n.header(&quot;apikey&quot;,&quot;apiValue&quot;);\r\n\r\nif you declared this values in resources then only you can add it ","title":"Spring Test returning 401 for unsecured URLs","body":"<p>You can add this one\n.header(&quot;apikey&quot;,&quot;apiValue&quot;);</p>\n<p>if you declared this values in resources then only you can add it</p>\n"}],"owner":{"account_id":5969319,"reputation":1268,"user_id":4692129,"accept_rate":69,"display_name":"Marco Prado"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33678,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"accepted_answer_id":39554684,"answer_count":6,"score":31,"last_activity_date":1697093488,"creation_date":1474174827,"question_id":39554285,"body_markdown":"I am using Spring for MVC tests\r\n\r\nHere is my test class\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @WebMvcTest\r\n    public class ITIndexController {\r\n    \r\n    \t@Autowired\r\n    \tWebApplicationContext context;\r\n    \t\r\n    \tMockMvc mockMvc;\r\n    \t\r\n    \t@MockBean\r\n    \tUserRegistrationApplicationService userRegistrationApplicationService;\r\n    \t\r\n    \t@Before\r\n    \tpublic void setUp() {\r\n    \t\tthis.mockMvc = MockMvcBuilders\r\n    \t\t\t\t\t\t.webAppContextSetup(context)\r\n    \t\t\t\t\t\t.apply(springSecurity())\r\n    \t\t\t\t\t\t.build();\r\n    \t}\r\n    \t\r\n    \t@Test\r\n    \tpublic void should_render_index() throws Exception {\r\n    \t\tmockMvc.perform(get(&quot;/&quot;))\r\n    \t\t\t.andExpect(status().isOk())\r\n    \t\t\t.andExpect(view().name(&quot;index&quot;))\r\n    \t\t\t.andExpect(content().string(containsString(&quot;Login&quot;)));\r\n    \t}\r\n    }\r\n\r\nHere is the MVC config\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class MvcConfig extends WebMvcConfigurerAdapter {\r\n    \t@Override\r\n    \tpublic void addViewControllers(ViewControllerRegistry registry) {\r\n    \t\tregistry.addViewController(&quot;/&quot;).setViewName(&quot;index&quot;);\r\n    \t\tregistry.addViewController(&quot;/login/form&quot;).setViewName(&quot;login&quot;);\r\n    \t}\r\n    }\r\n\r\nHere is the security config\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \t\r\n    \t@Autowired\r\n    \t@Qualifier(&quot;customUserDetailsService&quot;)\r\n    \tUserDetailsService userDetailsService;\r\n    \t\r\n    \t@Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t\thttp.authorizeRequests()\r\n    \t\t\t.antMatchers(&quot;/resources/**&quot;, &quot;/signup&quot;, &quot;/signup/form&quot;, &quot;/&quot;).permitAll()\r\n    \t\t\t.anyRequest().authenticated()\r\n    \t\t\t\t.and()\r\n    \t\t\t.formLogin()\r\n    \t\t\t\t.loginPage(&quot;/login/form&quot;).permitAll().loginProcessingUrl(&quot;/login&quot;).permitAll()\r\n    \t\t\t\t.and()\r\n    \t\t\t.logout().logoutSuccessUrl(&quot;/login/form?logout&quot;).permitAll()\r\n    \t\t\t\t.and()\r\n    \t\t\t.csrf().disable();\r\n    \t}\r\n    \t\r\n    \t@Autowired\r\n    \tpublic void configureGlobalFromDatabase(AuthenticationManagerBuilder auth) throws Exception {\r\n    \t\tauth.userDetailsService(userDetailsService);\r\n    \t}\r\n    }\r\n\r\nWhen I run my test it fails with the message:\r\n\r\n    java.lang.AssertionError: Status expected:&lt;200&gt; but was:&lt;401&gt;\r\n\tat org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:54)\r\n\tat org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:81)\r\n\tat org.springframework.test.web.servlet.result.StatusResultMatchers$10.match(StatusResultMatchers.java:664)\r\n\tat org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:171)\r\n\tat com.marco.nutri.integration.web.controller.ITIndexController.should_render_index(ITIndexController.java:46)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\r\n\tat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\r\n\tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)\r\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:678)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)\r\n\r\nI understand that it fails due to the fact that the url is protected with spring security, but when I run my application I can access that url even without being authenticated.\r\n\r\nAm I doing something wrong?","title":"Spring Test returning 401 for unsecured URLs","body":"<p>I am using Spring for MVC tests</p>\n\n<p>Here is my test class</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@WebMvcTest\npublic class ITIndexController {\n\n    @Autowired\n    WebApplicationContext context;\n\n    MockMvc mockMvc;\n\n    @MockBean\n    UserRegistrationApplicationService userRegistrationApplicationService;\n\n    @Before\n    public void setUp() {\n        this.mockMvc = MockMvcBuilders\n                        .webAppContextSetup(context)\n                        .apply(springSecurity())\n                        .build();\n    }\n\n    @Test\n    public void should_render_index() throws Exception {\n        mockMvc.perform(get(\"/\"))\n            .andExpect(status().isOk())\n            .andExpect(view().name(\"index\"))\n            .andExpect(content().string(containsString(\"Login\")));\n    }\n}\n</code></pre>\n\n<p>Here is the MVC config</p>\n\n<pre><code>@Configuration\n@EnableWebMvc\npublic class MvcConfig extends WebMvcConfigurerAdapter {\n    @Override\n    public void addViewControllers(ViewControllerRegistry registry) {\n        registry.addViewController(\"/\").setViewName(\"index\");\n        registry.addViewController(\"/login/form\").setViewName(\"login\");\n    }\n}\n</code></pre>\n\n<p>Here is the security config</p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    @Qualifier(\"customUserDetailsService\")\n    UserDetailsService userDetailsService;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n            .antMatchers(\"/resources/**\", \"/signup\", \"/signup/form\", \"/\").permitAll()\n            .anyRequest().authenticated()\n                .and()\n            .formLogin()\n                .loginPage(\"/login/form\").permitAll().loginProcessingUrl(\"/login\").permitAll()\n                .and()\n            .logout().logoutSuccessUrl(\"/login/form?logout\").permitAll()\n                .and()\n            .csrf().disable();\n    }\n\n    @Autowired\n    public void configureGlobalFromDatabase(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(userDetailsService);\n    }\n}\n</code></pre>\n\n<p>When I run my test it fails with the message:</p>\n\n<pre><code>java.lang.AssertionError: Status expected:&lt;200&gt; but was:&lt;401&gt;\nat org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:54)\nat org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:81)\nat org.springframework.test.web.servlet.result.StatusResultMatchers$10.match(StatusResultMatchers.java:664)\nat org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:171)\nat com.marco.nutri.integration.web.controller.ITIndexController.should_render_index(ITIndexController.java:46)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\nat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\nat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\nat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\nat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\nat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\nat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\nat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\nat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\nat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\nat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\nat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)\nat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:678)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)\n</code></pre>\n\n<p>I understand that it fails due to the fact that the url is protected with spring security, but when I run my application I can access that url even without being authenticated.</p>\n\n<p>Am I doing something wrong?</p>\n"},{"tags":["java","optaplanner","timefold"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1696885034,"post_id":77259746,"comment_id":136207781,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697093385,"creation_date":1697093385,"answer_id":77278298,"question_id":77259746,"body_markdown":"You&#39;re looking for **overconstrained planning**.\r\n\r\nIn Timefold ([continuation of OptaPlanner][1] by the OptaPlanner team) we intend to support `nullable=true` like functionality on `@PlanningListVariable` to indicate that assigning visits is optional.\r\n\r\n[You can track the status of that RFE here.][2]\r\n\r\n**Workaround**\r\n\r\n 1. Create a &quot;dummy&quot; vehicle.\r\n 2. For all constraints, filter out all assignments to the dummy vehicle.\r\n 3. Use HardMediumSoft...Score.\r\n 4. Add a constraint to penalize dummy vehicle assignments at 1medium.\r\n\r\n**Alternative solution**\r\n\r\nWe also offers an out-of-the-box, on-prem, paid REST API docker image for [vehicle routing][3] that fulfills this and other constraints. (Internally it uses the dummy vehicle workaround too until the RFE is fixed.)\r\n\r\n\r\n  [1]: https://timefold.ai/blog/2023/optaplanner-fork\r\n  [2]: https://github.com/TimefoldAI/timefold-solver/issues/76\r\n  [3]: https://github.com/TimefoldAI/timefold-orbit/pkgs/container/orbit-vehicle-routing","title":"Optimizing Vehicle Routing with Multiple Optional Locations","body":"<p>You're looking for <strong>overconstrained planning</strong>.</p>\n<p>In Timefold (<a href=\"https://timefold.ai/blog/2023/optaplanner-fork\" rel=\"nofollow noreferrer\">continuation of OptaPlanner</a> by the OptaPlanner team) we intend to support <code>nullable=true</code> like functionality on <code>@PlanningListVariable</code> to indicate that assigning visits is optional.</p>\n<p><a href=\"https://github.com/TimefoldAI/timefold-solver/issues/76\" rel=\"nofollow noreferrer\">You can track the status of that RFE here.</a></p>\n<p><strong>Workaround</strong></p>\n<ol>\n<li>Create a &quot;dummy&quot; vehicle.</li>\n<li>For all constraints, filter out all assignments to the dummy vehicle.</li>\n<li>Use HardMediumSoft...Score.</li>\n<li>Add a constraint to penalize dummy vehicle assignments at 1medium.</li>\n</ol>\n<p><strong>Alternative solution</strong></p>\n<p>We also offers an out-of-the-box, on-prem, paid REST API docker image for <a href=\"https://github.com/TimefoldAI/timefold-orbit/pkgs/container/orbit-vehicle-routing\" rel=\"nofollow noreferrer\">vehicle routing</a> that fulfills this and other constraints. (Internally it uses the dummy vehicle workaround too until the RFE is fixed.)</p>\n"}],"owner":{"account_id":29314842,"reputation":1,"user_id":22459833,"display_name":"hc1k"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697093385,"creation_date":1696862329,"question_id":77259746,"body_markdown":"I have a question regarding the Vehicle Routing Problem in Optaplanner. So far, I understand that there is a method called getRoute() in the Vehicle class, which contains all the locations to be visited. I suspect that changing or optimizing the order of these locations is related to this method. Now, I want to perform an optimization where I can&#39;t use the getRoute() method because I have multiple locations that are not necessarily part of the route but could be part of it.  For example, I have 4 packages to deliver and 8 empty locations. When delivering these packages, I want to select the locations in a way that:      \r\n1.achieve the shortest route.    \r\n2. do not exceed the vehicle&#39;s capacity.  \r\n\r\nIn this example, I cannot solve it using the getRoute() method because it includes all the locations to be visited. However, I suspect that the constraints for total distance and capacity are linked to the getRoute(). I&#39;m not sure if a solution is possible without using such a method. Has anyone tried something similar and knows if this is theoretically possible?\r\n\r\nI have randomly assigned locations for the orders to available locations from the list and then passed these orders with their assigned positions to the @PlanningListVariable. Afterward, I activated the constraints but noticed that they had no impact on the solution. The order of the jobs was still the same as implemented in the job list.","title":"Optimizing Vehicle Routing with Multiple Optional Locations","body":"<p>I have a question regarding the Vehicle Routing Problem in Optaplanner. So far, I understand that there is a method called getRoute() in the Vehicle class, which contains all the locations to be visited. I suspect that changing or optimizing the order of these locations is related to this method. Now, I want to perform an optimization where I can't use the getRoute() method because I have multiple locations that are not necessarily part of the route but could be part of it.  For example, I have 4 packages to deliver and 8 empty locations. When delivering these packages, I want to select the locations in a way that:<br />\n1.achieve the shortest route.<br />\n2. do not exceed the vehicle's capacity.</p>\n<p>In this example, I cannot solve it using the getRoute() method because it includes all the locations to be visited. However, I suspect that the constraints for total distance and capacity are linked to the getRoute(). I'm not sure if a solution is possible without using such a method. Has anyone tried something similar and knows if this is theoretically possible?</p>\n<p>I have randomly assigned locations for the orders to available locations from the list and then passed these orders with their assigned positions to the @PlanningListVariable. Afterward, I activated the constraints but noticed that they had no impact on the solution. The order of the jobs was still the same as implemented in the job list.</p>\n"},{"tags":["java","garbage-collection","server","rmi"],"comments":[{"owner":{"account_id":44736,"reputation":98412,"user_id":131433,"accept_rate":76,"display_name":"bmargulies"},"score":0,"creation_date":1429138791,"post_id":29658238,"comment_id":47464266,"body_markdown":"Um, your main method returns, so your process ends?","body":"Um, your main method returns, so your process ends?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1429144693,"post_id":29658238,"comment_id":47466142,"body_markdown":"Cannot reproduce. @bmargulies No.","body":"Cannot reproduce. @bmargulies No."},{"owner":{"account_id":3109932,"reputation":1266,"user_id":2631925,"accept_rate":84,"display_name":"Tvde1"},"score":0,"creation_date":1514980508,"post_id":29658238,"comment_id":83127421,"body_markdown":"I&#39;m suffering from exactly the same problem. I really need to fix this before a deadline.","body":"I&#39;m suffering from exactly the same problem. I really need to fix this before a deadline."}],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1431533678,"creation_date":1429138611,"answer_id":29662382,"question_id":29658238,"body_markdown":"This shouldn&#39;t happen.&lt;sup&gt;1&lt;/sup&gt; The existence of two remote objects should keep the port listening thread running, and the static variable should keep the registry object in existence. Try making the implementation and the stub static fields, like the registry.\r\n\r\n&gt; I have gone for the security, because why not?\r\n\r\nBut why? It&#39;s just a pain in the neck unless you&#39;re going to be running untrusted code, or in somebody else&#39;s computer.\r\n\r\n1: Indeed it doesn&#39;t happen to me. It keeps running. Are you sure your `Registry` reference is really `static`?","title":"RMI Server Application doesn&#39;t keep on running (silently terminates)","body":"<p>This shouldn't happen.<sup>1</sup> The existence of two remote objects should keep the port listening thread running, and the static variable should keep the registry object in existence. Try making the implementation and the stub static fields, like the registry.</p>\n\n<blockquote>\n  <p>I have gone for the security, because why not?</p>\n</blockquote>\n\n<p>But why? It's just a pain in the neck unless you're going to be running untrusted code, or in somebody else's computer.</p>\n\n<p>1: Indeed it doesn't happen to me. It keeps running. Are you sure your <code>Registry</code> reference is really <code>static</code>?</p>\n"},{"tags":[],"owner":{"account_id":112729,"reputation":66,"user_id":297204,"display_name":"Vince"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1697093348,"creation_date":1697093348,"answer_id":77278295,"question_id":29658238,"body_markdown":"In m case this happened when I forgot the ...`extends UnicastRemoteObject` in my class definition.","title":"RMI Server Application doesn&#39;t keep on running (silently terminates)","body":"<p>In m case this happened when I forgot the ...<code>extends UnicastRemoteObject</code> in my class definition.</p>\n"}],"owner":{"account_id":3244085,"reputation":3029,"user_id":2736228,"accept_rate":53,"display_name":"Utkan Gezer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1107,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1697093348,"creation_date":1429123237,"question_id":29658238,"body_markdown":"I have followed a bunch of tutorials on this RMI business to learn about how to do it right. Oracle&#39;s tutorial makes use of a `SecurityManager`, while most others don&#39;t bother. Some extend the `UnicastRemoteObject`, while others `exportObject`. Some run the `RMIRegistry` from outside and `getRegistry`, while others `createRegistry`.\r\n\r\nNow, I thought that it would be beneficial for me to cherry pick out of those options in front of me, so here&#39;s what I&#39;ve done:\r\n\r\nFirst, I have gone for the security, because why not?\r\n\r\nSecond, I did not prefer extending the `UnicastRemoteObject`, because my object is not altogether remote, just has some remote methods. It just didn&#39;t seem right to me to have a `throws RemoteException` clause at its constructor, for example.\r\n\r\nAnd lastly, I did not want to run the registry from outside, because I am not really running a server, it is just an application. Besides, I did not want to have two/three separate places to set the *port* for the registry.\r\n\r\nHere&#39;s my code for the server alone, (hopefully) doing things I&#39;ve described:\r\n\r\n\tpackage server;\r\n\r\n\timport interf.TicTacToeBoard;\r\n\r\n\timport java.rmi.AlreadyBoundException;\r\n\timport java.rmi.RemoteException;\r\n\timport java.rmi.registry.LocateRegistry;\r\n\timport java.rmi.registry.Registry;\r\n\timport java.rmi.server.UnicastRemoteObject;\r\n\r\n\tpublic class TicTacToeServer\r\n\t{\r\n\t\tprivate static Registry registry;\r\n\t\t\r\n\t\tpublic static void main(String[] args)\r\n\t\t\tthrows RemoteException, AlreadyBoundException\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;Server is up!&quot;);\r\n\t\t\t\r\n\t\t\tSystem.setProperty(&quot;java.security.policy&quot;, &quot;file:/&lt;policy_file_path&gt;&quot;);\r\n\t\t\t\r\n\t\t\tif (System.getSecurityManager() == null)\r\n\t\t\t\tSystem.setSecurityManager(new SecurityManager());\r\n\t\t\t\r\n\t\t\tTicTacToeBoardImpl arena = new TicTacToeBoardImpl();\r\n\t\t\tTicTacToeBoard stub =\r\n\t\t\t\t(TicTacToeBoard) UnicastRemoteObject.exportObject(arena, 0);\r\n\t\t\t\r\n\t\t\tregistry = LocateRegistry.createRegistry(TicTacToeBoard.RMI_PORT);\r\n\t\t\tregistry.bind(TicTacToeBoard.RMI_NAME, stub);\r\n\t\t\t\t\r\n\t\t\tSystem.out.println(&quot;Waiting for connections.&quot;);\r\n\t\t}\r\n\t}\r\n\r\nThis thing isn&#39;t complete; but in terms of being capable of serving a remote object, it should be. However, after printing that line with `&quot;Waiting for connections.&quot;`, the application just silently terminates.\r\n\r\nMy only explanation to this is that the application gets garbage collected.\r\n\r\nIt wouldn&#39;t get garbage collected in Oracle&#39;s example, because there, the RMIRegistry runs as a separate application from the server application, and RMIRegistry app holds a reference to the object residing inside the server app.\r\n\r\nIt doesn&#39;t get garbage collected when my implementation `extends UnicastRemoteObject`, because... I don&#39;t know. All I know is that the application then keeps on running.\r\n\r\nPlease correct me, if I have been wrong at any stage. On top of that, my question is, what are my options which does not involve running a RMIRegistry as a separate process and making my implementation extend the `UnicastRemoteObject`?","title":"RMI Server Application doesn&#39;t keep on running (silently terminates)","body":"<p>I have followed a bunch of tutorials on this RMI business to learn about how to do it right. Oracle's tutorial makes use of a <code>SecurityManager</code>, while most others don't bother. Some extend the <code>UnicastRemoteObject</code>, while others <code>exportObject</code>. Some run the <code>RMIRegistry</code> from outside and <code>getRegistry</code>, while others <code>createRegistry</code>.</p>\n\n<p>Now, I thought that it would be beneficial for me to cherry pick out of those options in front of me, so here's what I've done:</p>\n\n<p>First, I have gone for the security, because why not?</p>\n\n<p>Second, I did not prefer extending the <code>UnicastRemoteObject</code>, because my object is not altogether remote, just has some remote methods. It just didn't seem right to me to have a <code>throws RemoteException</code> clause at its constructor, for example.</p>\n\n<p>And lastly, I did not want to run the registry from outside, because I am not really running a server, it is just an application. Besides, I did not want to have two/three separate places to set the <em>port</em> for the registry.</p>\n\n<p>Here's my code for the server alone, (hopefully) doing things I've described:</p>\n\n<pre><code>package server;\n\nimport interf.TicTacToeBoard;\n\nimport java.rmi.AlreadyBoundException;\nimport java.rmi.RemoteException;\nimport java.rmi.registry.LocateRegistry;\nimport java.rmi.registry.Registry;\nimport java.rmi.server.UnicastRemoteObject;\n\npublic class TicTacToeServer\n{\n    private static Registry registry;\n\n    public static void main(String[] args)\n        throws RemoteException, AlreadyBoundException\n    {\n        System.out.println(\"Server is up!\");\n\n        System.setProperty(\"java.security.policy\", \"file:/&lt;policy_file_path&gt;\");\n\n        if (System.getSecurityManager() == null)\n            System.setSecurityManager(new SecurityManager());\n\n        TicTacToeBoardImpl arena = new TicTacToeBoardImpl();\n        TicTacToeBoard stub =\n            (TicTacToeBoard) UnicastRemoteObject.exportObject(arena, 0);\n\n        registry = LocateRegistry.createRegistry(TicTacToeBoard.RMI_PORT);\n        registry.bind(TicTacToeBoard.RMI_NAME, stub);\n\n        System.out.println(\"Waiting for connections.\");\n    }\n}\n</code></pre>\n\n<p>This thing isn't complete; but in terms of being capable of serving a remote object, it should be. However, after printing that line with <code>\"Waiting for connections.\"</code>, the application just silently terminates.</p>\n\n<p>My only explanation to this is that the application gets garbage collected.</p>\n\n<p>It wouldn't get garbage collected in Oracle's example, because there, the RMIRegistry runs as a separate application from the server application, and RMIRegistry app holds a reference to the object residing inside the server app.</p>\n\n<p>It doesn't get garbage collected when my implementation <code>extends UnicastRemoteObject</code>, because... I don't know. All I know is that the application then keeps on running.</p>\n\n<p>Please correct me, if I have been wrong at any stage. On top of that, my question is, what are my options which does not involve running a RMIRegistry as a separate process and making my implementation extend the <code>UnicastRemoteObject</code>?</p>\n"},{"tags":["java","spring","spring-data-jpa","concurrency","spring-statemachine"],"owner":{"account_id":7200064,"reputation":1127,"user_id":5497548,"display_name":"Krutik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697092403,"creation_date":1697092403,"question_id":77278197,"body_markdown":"I have defined the SM like below in my codebase wherein OperationState Enum depicts the state for the StateMachine and the same property is part of the one of the hibernate Entity [OpInfo.java]\r\n\r\nBasically I have below 2 questions:\r\n\r\n1.As per my requirement, I need to persist the operation state to\r\n    OpInfo table whenever there is a state change. Currently, I have\r\n    configured the entry action i.e. updateOperationState() for each of\r\n    the state but that looks very naive approach. I hope there must be\r\n    some interface/functionality provided by StateMachine TPL which will\r\n    do this persistence in much cleaner way or there should be some way\r\n    to define common entryaction for each state.\r\n \r\n2.During high concurrency, what I have observed is, the call to\r\n    entryAction i.e. updateOperationState() is being missed by\r\n    StateMachine. I would like to understand the root cause for the same\r\n    and would like to know if there are any configuration exposed by SM\r\n    to tune in regards of this problem.\r\n\r\n\r\n\r\n        StateMachineBuilder.Builder&lt;OperationState, OperationEvent&gt; builder = StateMachineBuilder.builder();\r\n                            builder.configureStates().withStates()\r\n                                    .states(EnumSet.allOf(OperationState.class))\r\n                                    .initial(genericOp.getOpState())\r\n                                    .state(CREATED, updateOperationState(), null)\r\n                                    .state(IDLE, updateOperationState(), null)\r\n                                    .state(APPLYING, updateOperationState(), null)\r\n                                    .state(APPLIED, updateOperationState(),null);\r\n            \r\n            builder.configureTransitions().withExternal()\r\n                                .source(CREATED).target(APPLYING).event(TRIGGER)\r\n            \t\t\t\t\t.and().withExternal()\r\n                                .source(CREATED).target(IDLE).event(SCHEDULE)\r\n                                .and().withExternal()\r\n                                .source(IDLE).target(APPLYING).event(TRIGGER)\r\n                                .and().withExternal()\r\n                                .source(APPLYING).target(APPLIED).event(SUCCESS)\r\n            \t\t\t\t\t.and().withExternal();\r\n    @Bean\r\n    private static Action&lt;OperationState, OperationEvent&gt; updateOperationState() {\r\n    \treturn context -&gt; {\r\n    \t\tOperationState tgtOpState = context.getStateMachine().getState().getId();\r\n    \t\tif (context.getMessage() == null) {\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\topInfoRepository.updateOpState(opId, tgtOpState);\r\n    \t\tlog.debug(&quot;Updating the operation [{}] state to [{}]&quot;, opId, tgtOpState);\r\n    \r\n    \t};\r\n    }\r\n    \r\n    @Entity\r\n    @Builder\r\n    public class OpInfo {\r\n    \t@Id\r\n        @ToString.Include\r\n        private String id;\r\n        \r\n    \t@Enumerated(EnumType.STRING)\r\n        @ToString.Include\r\n        private OperationType operationType;\r\n    \t\r\n    \t@Enumerated(EnumType.STRING)\r\n    \tOperationState operationState =  OperationState.CREATED;\r\n    }","title":"How to persist the state in the db as part of the entry to each state in spring state machine?","body":"<p>I have defined the SM like below in my codebase wherein OperationState Enum depicts the state for the StateMachine and the same property is part of the one of the hibernate Entity [OpInfo.java]</p>\n<p>Basically I have below 2 questions:</p>\n<p>1.As per my requirement, I need to persist the operation state to\nOpInfo table whenever there is a state change. Currently, I have\nconfigured the entry action i.e. updateOperationState() for each of\nthe state but that looks very naive approach. I hope there must be\nsome interface/functionality provided by StateMachine TPL which will\ndo this persistence in much cleaner way or there should be some way\nto define common entryaction for each state.</p>\n<p>2.During high concurrency, what I have observed is, the call to\nentryAction i.e. updateOperationState() is being missed by\nStateMachine. I would like to understand the root cause for the same\nand would like to know if there are any configuration exposed by SM\nto tune in regards of this problem.</p>\n<pre><code>    StateMachineBuilder.Builder&lt;OperationState, OperationEvent&gt; builder = StateMachineBuilder.builder();\n                        builder.configureStates().withStates()\n                                .states(EnumSet.allOf(OperationState.class))\n                                .initial(genericOp.getOpState())\n                                .state(CREATED, updateOperationState(), null)\n                                .state(IDLE, updateOperationState(), null)\n                                .state(APPLYING, updateOperationState(), null)\n                                .state(APPLIED, updateOperationState(),null);\n        \n        builder.configureTransitions().withExternal()\n                            .source(CREATED).target(APPLYING).event(TRIGGER)\n                            .and().withExternal()\n                            .source(CREATED).target(IDLE).event(SCHEDULE)\n                            .and().withExternal()\n                            .source(IDLE).target(APPLYING).event(TRIGGER)\n                            .and().withExternal()\n                            .source(APPLYING).target(APPLIED).event(SUCCESS)\n                            .and().withExternal();\n@Bean\nprivate static Action&lt;OperationState, OperationEvent&gt; updateOperationState() {\n    return context -&gt; {\n        OperationState tgtOpState = context.getStateMachine().getState().getId();\n        if (context.getMessage() == null) {\n            return;\n        }\n        opInfoRepository.updateOpState(opId, tgtOpState);\n        log.debug(&quot;Updating the operation [{}] state to [{}]&quot;, opId, tgtOpState);\n\n    };\n}\n\n@Entity\n@Builder\npublic class OpInfo {\n    @Id\n    @ToString.Include\n    private String id;\n    \n    @Enumerated(EnumType.STRING)\n    @ToString.Include\n    private OperationType operationType;\n    \n    @Enumerated(EnumType.STRING)\n    OperationState operationState =  OperationState.CREATED;\n}\n</code></pre>\n"},{"tags":["java","sql-server","spring","oracle","sybase"],"comments":[{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1694602823,"post_id":77096194,"comment_id":135912120,"body_markdown":"In the stacktrace, the error says `could not initialize class oracle.jdbc.OracleDriver`, notice the fully qualified class name. While, your code says `Class.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;)`. So, there is package name difference. `oracle.jdbc` vs `oracle.jdbc.driver`.","body":"In the stacktrace, the error says <code>could not initialize class oracle.jdbc.OracleDriver</code>, notice the fully qualified class name. While, your code says <code>Class.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;)</code>. So, there is package name difference. <code>oracle.jdbc</code> vs <code>oracle.jdbc.driver</code>."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":1,"creation_date":1694603661,"post_id":77096194,"comment_id":135912325,"body_markdown":"https://forums.oracle.com/ords/apexds/post/oracle-jdbc-driver-oracledriver-vs-oracle-jdbc-oracledriver-7699 - `oracle.jdbc.driver.OracleDriver` is deprecated, use `oracle.jdbc.OracleDriver` instead. So, try using `Class.forName(&quot;oracle.jdbc.OracleDriver&quot;);`. And are you sure ojdbcXX.jar is in classpath?","body":"<a href=\"https://forums.oracle.com/ords/apexds/post/oracle-jdbc-driver-oracledriver-vs-oracle-jdbc-oracledriver-7699\" rel=\"nofollow noreferrer\">forums.oracle.com/ords/apexds/post/&hellip;</a> - <code>oracle.jdbc.driver.OracleDriver</code> is deprecated, use <code>oracle.jdbc.OracleDriver</code> instead. So, try using <code>Class.forName(&quot;oracle.jdbc.OracleDriver&quot;);</code>. And are you sure ojdbcXX.jar is in classpath?"},{"owner":{"account_id":27071838,"reputation":207,"user_id":20622382,"display_name":"Seriously"},"score":0,"creation_date":1694603773,"post_id":77096194,"comment_id":135912343,"body_markdown":"@Ishan Class.forName(&quot;oracle.jdbc.OracleDriver&quot;); i tried with this as well but getting the same error","body":"@Ishan Class.forName(&quot;oracle.jdbc.OracleDriver&quot;); i tried with this as well but getting the same error"},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1694603787,"post_id":77096194,"comment_id":135912346,"body_markdown":"https://tomcat.apache.org/tomcat-5.5-doc/jndi-datasource-examples-howto.html#Oracle_8i,_9i_&amp;_10g - &quot;For Oracle 9i onwards you should use oracle.jdbc.OracleDriver rather than oracle.jdbc.driver.OracleDriver as Oracle have stated that oracle.jdbc.driver.OracleDriver is deprecated and support for this driver class will be discontinued in the next major release. &quot;","body":"<a href=\"https://tomcat.apache.org/tomcat-5.5-doc/jndi-datasource-examples-howto.html#Oracle_8i,_9i_&amp;_10g\" rel=\"nofollow noreferrer\">tomcat.apache.org/tomcat-5.5-doc/&hellip;</a> - &quot;For Oracle 9i onwards you should use oracle.jdbc.OracleDriver rather than oracle.jdbc.driver.OracleDriver as Oracle have stated that oracle.jdbc.driver.OracleDriver is deprecated and support for this driver class will be discontinued in the next major release. &quot;"},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1694603813,"post_id":77096194,"comment_id":135912356,"body_markdown":"Hmm.. Then are you sure a valid JAR file in classpath? Can you open it in some Zip tool and see if it is valid and it has `oracle/jdbc/OracleDriver.class` file inside?","body":"Hmm.. Then are you sure a valid JAR file in classpath? Can you open it in some Zip tool and see if it is valid and it has <code>oracle&#47;jdbc&#47;OracleDriver.class</code> file inside?"},{"owner":{"account_id":27071838,"reputation":207,"user_id":20622382,"display_name":"Seriously"},"score":0,"creation_date":1694603858,"post_id":77096194,"comment_id":135912362,"body_markdown":"https://stackoverflow.com/questions/38682483/how-to-solve-java-lang-classnotfoundexception-oracle-jdbc-driver-oracledriver?rq=3   in this question as well they suggested same solution","body":"<a href=\"https://stackoverflow.com/questions/38682483/how-to-solve-java-lang-classnotfoundexception-oracle-jdbc-driver-oracledriver?rq=3\" title=\"how to solve java lang classnotfoundexception oracle jdbc driver oracledriver\">stackoverflow.com/questions/38682483/&hellip;</a>   in this question as well they suggested same solution"},{"owner":{"account_id":27071838,"reputation":207,"user_id":20622382,"display_name":"Seriously"},"score":0,"creation_date":1694604228,"post_id":77096194,"comment_id":135912443,"body_markdown":"@Ishan checked in eclipse it has OracleDriver.class, As it is working in my local eclipse ide. but when i create war and run in server then only getting error","body":"@Ishan checked in eclipse it has OracleDriver.class, As it is working in my local eclipse ide. but when i create war and run in server then only getting error"},{"owner":{"account_id":27071838,"reputation":207,"user_id":20622382,"display_name":"Seriously"},"score":0,"creation_date":1694604290,"post_id":77096194,"comment_id":135912457,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/255255/discussion-between-seriously-and-ishan).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/255255/discussion-between-seriously-and-ishan\">continue this discussion in chat</a>."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1694604330,"post_id":77096194,"comment_id":135912466,"body_markdown":"JDK version is also the same on the server?  Could there be an older version of Java on the server, while the driver could be compiled with a newer version?","body":"JDK version is also the same on the server?  Could there be an older version of Java on the server, while the driver could be compiled with a newer version?"}],"answers":[{"tags":[],"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694675186,"creation_date":1694608431,"answer_id":77097140,"question_id":77096194,"body_markdown":"Continued discussion over chat...\r\n\r\nIt seems the issue is there are 2 DB drivers being used simultaneously.\r\nWhen `DriverManager.getConnection()` is called, it seems it does not get which driver has to be used.  Ideally it should.  The first parameter &#39;url&#39; tells the `getConnection` method which driver should be used.\r\nStill, if only one DB connectivity is checked, and only one driver is kept, it works. As soon as 2 drivers are added and both are tried to be checked it fails with one of the two drivers. This seems wrong. This should work fine. But still, it doesn&#39;t.\r\n\r\nIdeally, the root cause of this should be found.  But if not, an alternative is to have small console applications. One for each DB.\r\n```\r\njava -cp ojdbc8.jar -jar oraclechecker.jar\r\n```\r\nand\r\n```\r\njava -cp sybase.jar -jar sybasechecker.jar\r\n```\r\n\r\nThose can be called and tested like this.  This will result in a separate JVM initialization - each with a different DB Driver and just ONE.\r\n\r\nThe main webapp can use\r\n```\r\nProcess p = Runtime.getRuntime().exec(&quot;java&quot;, &quot;-cp&quot;, &quot;ojdbc8.jar&quot;, &quot;-jar&quot;, &quot;oraclechecker.jar&quot;);\r\n```\r\nCommands like this to call those as external commands.\r\nThe Web-App itself won&#39;t need to have any DB driver.\r\n\r\nThis is just one of the possibilities...\r\n\r\nCheck the following issue:\r\nhttps://stackoverflow.com/questions/14945289/how-to-use-multiple-jdbc-drivers-in-the-same-application\r\n\r\nIt also says that 2 different DB drivers can work in parallel.  The first parameter `url` of `DriverManager.getConnection` will determine which driver to use.  E.g. `jdbc:mysql:` or `jdbc:oracle:thin:`\r\n\r\nI also tried the same in local Tomcat 10. Created a `testdb.jsp`\r\n\r\n```\r\n&lt;%@page import=&quot;java.sql.ResultSet&quot;%&gt;\r\n&lt;%@page import=&quot;java.sql.PreparedStatement&quot;%&gt;\r\n&lt;%@page import=&quot;java.sql.DriverManager&quot;%&gt;\r\n&lt;%@page import=&quot;java.sql.Connection&quot;%&gt;\r\n&lt;html&gt;\r\n&lt;body&gt;\r\n\t&lt;pre&gt;\r\n&lt;%\r\n\tClass.forName(&quot;oracle.jdbc.OracleDriver&quot;);\r\n\tClass.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n\r\n\tString[][] connDetails = { { &quot;jdbc:mysql://localhost:3306/test&quot;, &quot;xxxxx&quot;, &quot;xxxxx&quot;, &quot;SELECT CURRENT_TIMESTAMP()&quot; },\r\n\t\t\t{ &quot;jdbc:oracle:thin:@xxxxx:xxxxx/xxxxx&quot;, &quot;xxxxx&quot;, &quot;xxxxx&quot;, &quot;SELECT CURRENT_TIMESTAMP FROM DUAL&quot; } };\r\n\r\n\tfor (String[] cd : connDetails) {\r\n\t\ttry (Connection conn = DriverManager.getConnection(cd[0], cd[1], cd[2])) {\r\n\t\t\tout.println(&quot;Connected successfully to &quot; + cd[0]);\r\n\t\t\ttry (PreparedStatement stmt = conn.prepareStatement(cd[3]); ResultSet rs = stmt.executeQuery()) {\r\n\t\t\t\twhile (rs.next()) {\r\n\t\t\t\t\tout.println(&quot;\\t&quot; + rs.getTimestamp(1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (Exception x) {\r\n\t\t\tout.println(&quot;Error: &quot; + x);\r\n\t\t}\r\n\t}\r\n%&gt;\r\n\t&lt;/pre&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n```\r\nD:\\apache-tomcat-10.1.8\\webapps\\ROOT&gt;tree /F\r\nFolder PATH listing for volume Data\r\nVolume serial number is XXXXX\r\nD:.\r\n│   index.jsp\r\n│   RELEASE-NOTES.txt\r\n│   testdb.jsp\r\n│\r\n└───WEB-INF\r\n    │   web.xml\r\n    │\r\n    └───lib\r\n            mysql-connector-j-8.0.33.jar\r\n            ojdbc11.jar\r\n```\r\n\r\nStarted tomcat.  And calling http://localhost:8080/testdb.jsp results in:\r\n```\r\nConnected successfully to jdbc:mysql://localhost:3306/test\r\n\t2023-09-14 12:28:51.0\r\nConnected successfully to jdbc:oracle:thin:@xxxxx:xxxxx/xxxxx\r\n\t2023-09-14 12:29:08.360942\r\n```","title":"Getting ClassNotFoundError for oracle and sybase db connection if ran the war, but in eclipse it is working fine","body":"<p>Continued discussion over chat...</p>\n<p>It seems the issue is there are 2 DB drivers being used simultaneously.\nWhen <code>DriverManager.getConnection()</code> is called, it seems it does not get which driver has to be used.  Ideally it should.  The first parameter 'url' tells the <code>getConnection</code> method which driver should be used.\nStill, if only one DB connectivity is checked, and only one driver is kept, it works. As soon as 2 drivers are added and both are tried to be checked it fails with one of the two drivers. This seems wrong. This should work fine. But still, it doesn't.</p>\n<p>Ideally, the root cause of this should be found.  But if not, an alternative is to have small console applications. One for each DB.</p>\n<pre><code>java -cp ojdbc8.jar -jar oraclechecker.jar\n</code></pre>\n<p>and</p>\n<pre><code>java -cp sybase.jar -jar sybasechecker.jar\n</code></pre>\n<p>Those can be called and tested like this.  This will result in a separate JVM initialization - each with a different DB Driver and just ONE.</p>\n<p>The main webapp can use</p>\n<pre><code>Process p = Runtime.getRuntime().exec(&quot;java&quot;, &quot;-cp&quot;, &quot;ojdbc8.jar&quot;, &quot;-jar&quot;, &quot;oraclechecker.jar&quot;);\n</code></pre>\n<p>Commands like this to call those as external commands.\nThe Web-App itself won't need to have any DB driver.</p>\n<p>This is just one of the possibilities...</p>\n<p>Check the following issue:\n<a href=\"https://stackoverflow.com/questions/14945289/how-to-use-multiple-jdbc-drivers-in-the-same-application\">How to use multiple JDBC drivers in the same application?</a></p>\n<p>It also says that 2 different DB drivers can work in parallel.  The first parameter <code>url</code> of <code>DriverManager.getConnection</code> will determine which driver to use.  E.g. <code>jdbc:mysql:</code> or <code>jdbc:oracle:thin:</code></p>\n<p>I also tried the same in local Tomcat 10. Created a <code>testdb.jsp</code></p>\n<pre><code>&lt;%@page import=&quot;java.sql.ResultSet&quot;%&gt;\n&lt;%@page import=&quot;java.sql.PreparedStatement&quot;%&gt;\n&lt;%@page import=&quot;java.sql.DriverManager&quot;%&gt;\n&lt;%@page import=&quot;java.sql.Connection&quot;%&gt;\n&lt;html&gt;\n&lt;body&gt;\n    &lt;pre&gt;\n&lt;%\n    Class.forName(&quot;oracle.jdbc.OracleDriver&quot;);\n    Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n\n    String[][] connDetails = { { &quot;jdbc:mysql://localhost:3306/test&quot;, &quot;xxxxx&quot;, &quot;xxxxx&quot;, &quot;SELECT CURRENT_TIMESTAMP()&quot; },\n            { &quot;jdbc:oracle:thin:@xxxxx:xxxxx/xxxxx&quot;, &quot;xxxxx&quot;, &quot;xxxxx&quot;, &quot;SELECT CURRENT_TIMESTAMP FROM DUAL&quot; } };\n\n    for (String[] cd : connDetails) {\n        try (Connection conn = DriverManager.getConnection(cd[0], cd[1], cd[2])) {\n            out.println(&quot;Connected successfully to &quot; + cd[0]);\n            try (PreparedStatement stmt = conn.prepareStatement(cd[3]); ResultSet rs = stmt.executeQuery()) {\n                while (rs.next()) {\n                    out.println(&quot;\\t&quot; + rs.getTimestamp(1));\n                }\n            }\n        } catch (Exception x) {\n            out.println(&quot;Error: &quot; + x);\n        }\n    }\n%&gt;\n    &lt;/pre&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<pre><code>D:\\apache-tomcat-10.1.8\\webapps\\ROOT&gt;tree /F\nFolder PATH listing for volume Data\nVolume serial number is XXXXX\nD:.\n│   index.jsp\n│   RELEASE-NOTES.txt\n│   testdb.jsp\n│\n└───WEB-INF\n    │   web.xml\n    │\n    └───lib\n            mysql-connector-j-8.0.33.jar\n            ojdbc11.jar\n</code></pre>\n<p>Started tomcat.  And calling http://localhost:8080/testdb.jsp results in:</p>\n<pre><code>Connected successfully to jdbc:mysql://localhost:3306/test\n    2023-09-14 12:28:51.0\nConnected successfully to jdbc:oracle:thin:@xxxxx:xxxxx/xxxxx\n    2023-09-14 12:29:08.360942\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7486653,"reputation":290,"user_id":5689611,"accept_rate":80,"display_name":"Hasintha Samith Randika"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695567878,"creation_date":1695567878,"answer_id":77167642,"question_id":77096194,"body_markdown":"As per the code you shared, The JDBC drivers are available in lib folder of war. In that case class loaders available in your code could not access the libraries folder inside the war. only the parallelwebapp class loader can access the lib folder inside the war. you can get more information by referring to tomcat class loader hierarchy in documentations(https://tomcat.apache.org/tomcat-9.0-doc/class-loader-howto.html). you can do 2 things 1. you have to use correct parallel web app class loader in the thread you try to load the driver. 2. Move the oracle jdbc drivers to lower library level such as tomcat lib folder or to jvm level class path. This issue exist in some systems and not available in others is due to the level of parallellism of the system. (parallelism level is equal to number of physical threads-1)","title":"Getting ClassNotFoundError for oracle and sybase db connection if ran the war, but in eclipse it is working fine","body":"<p>As per the code you shared, The JDBC drivers are available in lib folder of war. In that case class loaders available in your code could not access the libraries folder inside the war. only the parallelwebapp class loader can access the lib folder inside the war. you can get more information by referring to tomcat class loader hierarchy in documentations(<a href=\"https://tomcat.apache.org/tomcat-9.0-doc/class-loader-howto.html\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-9.0-doc/class-loader-howto.html</a>). you can do 2 things 1. you have to use correct parallel web app class loader in the thread you try to load the driver. 2. Move the oracle jdbc drivers to lower library level such as tomcat lib folder or to jvm level class path. This issue exist in some systems and not available in others is due to the level of parallellism of the system. (parallelism level is equal to number of physical threads-1)</p>\n"}],"owner":{"account_id":27071838,"reputation":207,"user_id":20622382,"display_name":"Seriously"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":248,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1697092345,"creation_date":1694600510,"question_id":77096194,"body_markdown":"I have built an feature in application to test db connection. In local i&#39;m able to test all three db sqlserver, sybase and oracle. but if create war file and run war in windows/linux server then getting above error for oracle and sybase. and if i remove oracle or sybase code and dependency then others are working fine.\r\nI have checked in war file inside /web-inf/lib/ it has jtds, ojdbc8 and jconnect4 lib/dependency\r\noracle conn code\r\n```\r\n            Class.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;);\r\n            connection = DriverManager.getConnection(jdbcUrl, username, password);\r\n\r\n```\r\n\r\nSybase conn code\r\n```\r\nimport com.sybase.jdbc4.jdbc.SybDataSource;\r\nimport java.sql.Connection;\r\nimport java.sql.SQLException;\r\n\r\npublic class SybaseConnectionManager {\r\n    public static Connection getSybaseConnection(String serverName, String databaseName, String userName, String password, String url) throws DataGeneratorException {\r\n        SybDataSource ds = new SybDataSource();\r\n\r\n        try {\r\n            ds.setServerName(serverName);\r\n            ds.setDatabaseName(databaseName);\r\n            ds.setUser(userName);\r\n            ds.setPassword(password);\r\n\r\n            // Splitting URL by semicolon\r\n            String[] params = url.split(&quot;;&quot;);\r\n            for (String param : params) {\r\n                String[] props = param.split(&quot;=&quot;);\r\n                switch (props[0].toUpperCase()) {\r\n                    case &quot;PORT&quot;:\r\n                        ds.setPortNumber(Integer.parseInt(props[1]));\r\n                        break;\r\n                    case &quot;ENCRYPT_PASSWORD&quot;:\r\n                        ds.setENCRYPT_PASSWORD(props[1]);\r\n                        break;\r\n                    case &quot;RETRY_WITH_NO_ENCRYPTION&quot;:\r\n                        ds.setRETRY_WITH_NO_ENCRYPTION(props[1]);\r\n                        break;\r\n                    case &quot;JCE_PROVIDER_CLASS&quot;:\r\n                        ds.setJCE_PROVIDER_CLASS(props[1]);\r\n                        break;\r\n                }\r\n            }\r\n\r\n            // Get the connection\r\n            Connection con = ds.getConnection();\r\n            con.setAutoCommit(false);\r\n            return con;\r\n        } catch (SQLException e) {\r\n            log.error(&quot;Handling Sybase Exception&quot;, e);\r\n            throw new DataGeneratorException(e.getMessage());\r\n        }\r\n    }\r\n```\r\n\r\nthe below error is from when i&#39;m testing oracle db connection\r\n\r\n```\r\n2023-09-13104:19:14,724Z (UTC+0) [http-nio-9091-exec-7] ERROR o.a.c.c.C.[.[.[. [dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/testapp] threw exception [handler dispatch failed; nested execption is java.lang.NoClassDefFoundError: could not initialize class oracle.jdbc.OracleDriver] with root cause\r\njava.lang-ExceptionInInitializerError: Exception java.lang.StackOverflowError [in thread &quot;http-nio-9091-exec-1&quot;]\r\nat java.base/java.security.AccessController.doPrivileged(Native Method)\r\nat java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:451)\r\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)\r\nat org-springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:151)\r\nat java.base/java.lang.Classloader.loadClass(ClassLoader.java:521)\r\nat java.base/java.lang.ClassLoader.defineClassl(Native Method)\r\nat java.base/java.lang.ClassLoader.defineClass(Classloader.java:1016)\r\nat java.base/java.security.SecureClassloader.defineClass(SecureClassLoader.java:174)\r\nat java.base/java.net.URLClassloader.defineClass(URLClassLoader.java:555)\r\nat java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:458)\r\nat java.base/java.net.URLClassloader$1.run(URLClassLoader.java:452)\r\nat java.base/java.security.AccessController.doPrivileged(Native Method)\r\nat java.base/java.net.URLClassloader.findClass(URLClassLoader •Java:451)\r\nat java. base/ java lang ClassLoader. loadClass(ClassLoader. java: 588)\r\nat org.springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:151)\r\nat java.base/java.lang.Classloader.loadClass(ClassLoader.java:521)\r\nat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\nat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1016)\r\nat java.base/java.security.SecureClassLoader.defineClass(SecureClassloader.java:174)\r\nat java.base/java.net.URLClassLoader.defineClass(URLClassloader.java:555)\r\nat java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:458)\r\nat java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:452)\r\nat java.base/java.security.AccessController.doPrivileged(Native Method)\r\nat java.base/java.net.URLClassloader.findClass(URLClassLoader.java:451)\r\nat java.base/java.lang.Classloader.loadClass(ClassLoader. java:588)\r\nat org-springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURlClassloader.java:151)\r\nat java.base/java.lang.ClassLoader.loadClass(Classloader.java:521)\r\nat java.base/java.lang.ClassLoader.defineClassi(Native Method)\r\nat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1016)\r\nat java.base/java.security.SecureClassloader.defineClass(SecureClassloader.java:174)\r\nat java.base/java.net.URLClassloader.defineClass(URLClassLoader.java:555)\r\nat java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:458)\r\nat java .base/java.net.URLClassLoader$1.run(URLClassLoader.java:452)\r\nat iava.base/iava.security.AccessController.doPrivileged(Native Method)\r\n```\r\n\r\nwhen I&#39;m Testing sybase conn as well it is saying same classnotfounderror, could not initialize class com.sybase.jdbc4.jdbc.sybdriver\r\nand for oracle i&#39;m using ojdbc8 and for sybase jconnect4\r\nand 1 more strange thing if i remove code of sybase conn and dependency oracle is working fine and vice versa\r\nboth are not working together, getting conflict i guess, but not sure how to resolve it","title":"Getting ClassNotFoundError for oracle and sybase db connection if ran the war, but in eclipse it is working fine","body":"<p>I have built an feature in application to test db connection. In local i'm able to test all three db sqlserver, sybase and oracle. but if create war file and run war in windows/linux server then getting above error for oracle and sybase. and if i remove oracle or sybase code and dependency then others are working fine.\nI have checked in war file inside /web-inf/lib/ it has jtds, ojdbc8 and jconnect4 lib/dependency\noracle conn code</p>\n<pre><code>            Class.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;);\n            connection = DriverManager.getConnection(jdbcUrl, username, password);\n\n</code></pre>\n<p>Sybase conn code</p>\n<pre><code>import com.sybase.jdbc4.jdbc.SybDataSource;\nimport java.sql.Connection;\nimport java.sql.SQLException;\n\npublic class SybaseConnectionManager {\n    public static Connection getSybaseConnection(String serverName, String databaseName, String userName, String password, String url) throws DataGeneratorException {\n        SybDataSource ds = new SybDataSource();\n\n        try {\n            ds.setServerName(serverName);\n            ds.setDatabaseName(databaseName);\n            ds.setUser(userName);\n            ds.setPassword(password);\n\n            // Splitting URL by semicolon\n            String[] params = url.split(&quot;;&quot;);\n            for (String param : params) {\n                String[] props = param.split(&quot;=&quot;);\n                switch (props[0].toUpperCase()) {\n                    case &quot;PORT&quot;:\n                        ds.setPortNumber(Integer.parseInt(props[1]));\n                        break;\n                    case &quot;ENCRYPT_PASSWORD&quot;:\n                        ds.setENCRYPT_PASSWORD(props[1]);\n                        break;\n                    case &quot;RETRY_WITH_NO_ENCRYPTION&quot;:\n                        ds.setRETRY_WITH_NO_ENCRYPTION(props[1]);\n                        break;\n                    case &quot;JCE_PROVIDER_CLASS&quot;:\n                        ds.setJCE_PROVIDER_CLASS(props[1]);\n                        break;\n                }\n            }\n\n            // Get the connection\n            Connection con = ds.getConnection();\n            con.setAutoCommit(false);\n            return con;\n        } catch (SQLException e) {\n            log.error(&quot;Handling Sybase Exception&quot;, e);\n            throw new DataGeneratorException(e.getMessage());\n        }\n    }\n</code></pre>\n<p>the below error is from when i'm testing oracle db connection</p>\n<pre><code>2023-09-13104:19:14,724Z (UTC+0) [http-nio-9091-exec-7] ERROR o.a.c.c.C.[.[.[. [dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/testapp] threw exception [handler dispatch failed; nested execption is java.lang.NoClassDefFoundError: could not initialize class oracle.jdbc.OracleDriver] with root cause\njava.lang-ExceptionInInitializerError: Exception java.lang.StackOverflowError [in thread &quot;http-nio-9091-exec-1&quot;]\nat java.base/java.security.AccessController.doPrivileged(Native Method)\nat java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:451)\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)\nat org-springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:151)\nat java.base/java.lang.Classloader.loadClass(ClassLoader.java:521)\nat java.base/java.lang.ClassLoader.defineClassl(Native Method)\nat java.base/java.lang.ClassLoader.defineClass(Classloader.java:1016)\nat java.base/java.security.SecureClassloader.defineClass(SecureClassLoader.java:174)\nat java.base/java.net.URLClassloader.defineClass(URLClassLoader.java:555)\nat java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:458)\nat java.base/java.net.URLClassloader$1.run(URLClassLoader.java:452)\nat java.base/java.security.AccessController.doPrivileged(Native Method)\nat java.base/java.net.URLClassloader.findClass(URLClassLoader •Java:451)\nat java. base/ java lang ClassLoader. loadClass(ClassLoader. java: 588)\nat org.springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:151)\nat java.base/java.lang.Classloader.loadClass(ClassLoader.java:521)\nat java.base/java.lang.ClassLoader.defineClass1(Native Method)\nat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1016)\nat java.base/java.security.SecureClassLoader.defineClass(SecureClassloader.java:174)\nat java.base/java.net.URLClassLoader.defineClass(URLClassloader.java:555)\nat java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:458)\nat java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:452)\nat java.base/java.security.AccessController.doPrivileged(Native Method)\nat java.base/java.net.URLClassloader.findClass(URLClassLoader.java:451)\nat java.base/java.lang.Classloader.loadClass(ClassLoader. java:588)\nat org-springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURlClassloader.java:151)\nat java.base/java.lang.ClassLoader.loadClass(Classloader.java:521)\nat java.base/java.lang.ClassLoader.defineClassi(Native Method)\nat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1016)\nat java.base/java.security.SecureClassloader.defineClass(SecureClassloader.java:174)\nat java.base/java.net.URLClassloader.defineClass(URLClassLoader.java:555)\nat java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:458)\nat java .base/java.net.URLClassLoader$1.run(URLClassLoader.java:452)\nat iava.base/iava.security.AccessController.doPrivileged(Native Method)\n</code></pre>\n<p>when I'm Testing sybase conn as well it is saying same classnotfounderror, could not initialize class com.sybase.jdbc4.jdbc.sybdriver\nand for oracle i'm using ojdbc8 and for sybase jconnect4\nand 1 more strange thing if i remove code of sybase conn and dependency oracle is working fine and vice versa\nboth are not working together, getting conflict i guess, but not sure how to resolve it</p>\n"},{"tags":["java","android","android-studio","android-layout"],"comments":[{"owner":{"account_id":14410660,"reputation":7388,"user_id":10409567,"display_name":"griffins"},"score":0,"creation_date":1643766357,"post_id":70949585,"comment_id":125425220,"body_markdown":"does this answer your question https://stackoverflow.com/a/53635207/10409567","body":"does this answer your question <a href=\"https://stackoverflow.com/a/53635207/10409567\">stackoverflow.com/a/53635207/10409567</a>"},{"owner":{"account_id":24127577,"reputation":11,"user_id":18095621,"display_name":"Sam Sing"},"score":0,"creation_date":1643768101,"post_id":70949585,"comment_id":125425417,"body_markdown":"It doesn&#39;t work too.....The error only shows on this project, but when I create new project, it seems fine","body":"It doesn&#39;t work too.....The error only shows on this project, but when I create new project, it seems fine"},{"owner":{"account_id":24127577,"reputation":11,"user_id":18095621,"display_name":"Sam Sing"},"score":0,"creation_date":1643768168,"post_id":70949585,"comment_id":125425424,"body_markdown":"I&#39;m currently using AppCompat......Relative Layout...does this thing matter on my problem??","body":"I&#39;m currently using AppCompat......Relative Layout...does this thing matter on my problem??"},{"owner":{"account_id":14410660,"reputation":7388,"user_id":10409567,"display_name":"griffins"},"score":0,"creation_date":1643769168,"post_id":70949585,"comment_id":125425559,"body_markdown":"have you tried the good old invalidate cache and restart","body":"have you tried the good old invalidate cache and restart"},{"owner":{"account_id":21371577,"reputation":1913,"user_id":15739040,"display_name":"Vishal Beep"},"score":0,"creation_date":1643776277,"post_id":70949585,"comment_id":125426692,"body_markdown":"did you check ending tag of `drawer layout` it must close and this should be a root layout","body":"did you check ending tag of <code>drawer layout</code> it must close and this should be a root layout"},{"owner":{"account_id":21584472,"reputation":690,"user_id":15915172,"display_name":"Rakesh Saini"},"score":0,"creation_date":1643776980,"post_id":70949585,"comment_id":125426796,"body_markdown":"Did you click on -&gt;sync after adding the dependency?","body":"Did you click on -&gt;sync after adding the dependency?"}],"answers":[{"tags":[],"owner":{"account_id":15714846,"reputation":139,"user_id":11339304,"display_name":"REX"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643777695,"creation_date":1643777695,"answer_id":70950673,"question_id":70949585,"body_markdown":"Try doing any of these methods:\r\n\r\n - Close your android project by going to File -&gt; Close Project. And then import it again\r\n - If above option doesn&#39;t works for you then Go to File -&gt; Invalidate Caches/Restart\r\n\r\nIf neither of them work the remove the dependency and add it again and tell me the build output when gradle sync finishes","title":"Android Studio says &quot;androidx.drawerlayout.widget.DrawerLayout&quot; was not found in the project or libraries, even though I already add it in the gradle","body":"<p>Try doing any of these methods:</p>\n<ul>\n<li>Close your android project by going to File -&gt; Close Project. And then import it again</li>\n<li>If above option doesn't works for you then Go to File -&gt; Invalidate Caches/Restart</li>\n</ul>\n<p>If neither of them work the remove the dependency and add it again and tell me the build output when gradle sync finishes</p>\n"},{"tags":[],"owner":{"account_id":8736099,"reputation":1905,"user_id":6534707,"display_name":"Bhoomika Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643779618,"creation_date":1643779618,"answer_id":70950866,"question_id":70949585,"body_markdown":"It may possible that your studio cache is corrupted; \r\n\r\nSo \r\n\r\n - close your all project first; then\r\n - open your studio path in your `C:\\` Drive; for eg. it should like `C:\\Users\\hp(Your_User_Name)\\.AndroidStudio4.0\\system\\caches`...  Delete this `caches` folder. \r\n \r\nNow start your project again, issue will gone now.\r\n\r\nHope this may help to someone.","title":"Android Studio says &quot;androidx.drawerlayout.widget.DrawerLayout&quot; was not found in the project or libraries, even though I already add it in the gradle","body":"<p>It may possible that your studio cache is corrupted;</p>\n<p>So</p>\n<ul>\n<li>close your all project first; then</li>\n<li>open your studio path in your <code>C:\\</code> Drive; for eg. it should like <code>C:\\Users\\hp(Your_User_Name)\\.AndroidStudio4.0\\system\\caches</code>...  Delete this <code>caches</code> folder.</li>\n</ul>\n<p>Now start your project again, issue will gone now.</p>\n<p>Hope this may help to someone.</p>\n"},{"tags":[],"owner":{"account_id":9822099,"reputation":31,"user_id":7276452,"display_name":"Dipanjan Ghosal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697092042,"creation_date":1697092042,"answer_id":77278160,"question_id":70949585,"body_markdown":"I don&#39;t know if it will work for you, but it did for me:\r\n\r\nI just launched the app with `Ctrl` + `F5` despite the problem. Once it executes successfully, the problem disappears.\r\n\r\nDon&#39;t comment-out the `DrawerLayout`! Keep its body empty if needed, and just start the app.","title":"Android Studio says &quot;androidx.drawerlayout.widget.DrawerLayout&quot; was not found in the project or libraries, even though I already add it in the gradle","body":"<p>I don't know if it will work for you, but it did for me:</p>\n<p>I just launched the app with <code>Ctrl</code> + <code>F5</code> despite the problem. Once it executes successfully, the problem disappears.</p>\n<p>Don't comment-out the <code>DrawerLayout</code>! Keep its body empty if needed, and just start the app.</p>\n"}],"owner":{"account_id":24127577,"reputation":11,"user_id":18095621,"display_name":"Sam Sing"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":640,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1697092042,"creation_date":1643764930,"question_id":70949585,"body_markdown":"[enter image description here][1]\r\n\r\n[1]: https://i.stack.imgur.com/A8LGg.png\r\n\r\nAlso below is the code text from the same snippet that has been attached.\r\n\r\n```\r\n&lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:id=&quot;@+id/drawer_layout&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:fitsSystemWindows=&quot;true&quot;\r\n    tools:openDrawer=&quot;start&quot;&gt;\r\n```","title":"Android Studio says &quot;androidx.drawerlayout.widget.DrawerLayout&quot; was not found in the project or libraries, even though I already add it in the gradle","body":"<p><a href=\"https://i.stack.imgur.com/A8LGg.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Also below is the code text from the same snippet that has been attached.</p>\n<pre><code>&lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/drawer_layout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:fitsSystemWindows=&quot;true&quot;\n    tools:openDrawer=&quot;start&quot;&gt;\n</code></pre>\n"},{"tags":["java","maven","automation","frameworks","proguard-maven-plugin"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1696939467,"post_id":77265370,"comment_id":136214158,"body_markdown":"Please format the error log correctly. It looks like a multiline stacktrace in a single line. That makes it very hard to read. Also provide the pom configuration and what do you mean by your &quot;Maven test framework&quot;. What are you using proguard for exactly?","body":"Please format the error log correctly. It looks like a multiline stacktrace in a single line. That makes it very hard to read. Also provide the pom configuration and what do you mean by your &quot;Maven test framework&quot;. What are you using proguard for exactly?"},{"owner":{"account_id":20856181,"reputation":1,"user_id":15319440,"display_name":"Dheeraj Kumar Rajak"},"score":0,"creation_date":1697092201,"post_id":77265370,"comment_id":136236355,"body_markdown":"I have shared pom.xml and error. The reason for using proguard is we provide frameworks to external companies for use in their projects. One of our key concerns is safeguarding. By hiding the implementation details, we aim to ensure that the core logic behind the framework remain proprietary and inaccessible to others. Maven test framework which we have created for testing.","body":"I have shared pom.xml and error. The reason for using proguard is we provide frameworks to external companies for use in their projects. One of our key concerns is safeguarding. By hiding the implementation details, we aim to ensure that the core logic behind the framework remain proprietary and inaccessible to others. Maven test framework which we have created for testing."}],"owner":{"account_id":20856181,"reputation":1,"user_id":15319440,"display_name":"Dheeraj Kumar Rajak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697092022,"creation_date":1696937242,"question_id":77265370,"body_markdown":"\r\nI&#39;m encountering the above error when attempting to run mvn clean package. I have a Maven test framework with one test class containing a method, and a main class that creates an object of the test class and calls the method. I haven&#39;t specified anything in proguard.cfg.\r\n\r\nI&#39;m encountering the above error when attempting to run mvn clean package.\r\n\r\n    [INFO] execute ProGuard [-injars, &#39;C:\\Users\\DheerajKumarRajak\\Desktop\\ProguardValidation\\target\\ProguardValidation-1.0-SNAPSHOT.jar&#39;(!META-INF/maven/**) ...&#39;C:\\Users\\DheerajKumarRajak\\Desktop\\ProguardValidation\\target\\ProguardValidation-1.0-SNAPSHOT-small.jar&#39;, -include, &#39;C:\\Users\\DheerajKumarRa\r\n    jak\\Desktop\\ProguardValidation\\src\\main\\resources\\proguard.cfg&#39;, -libraryjars, &#39;C:\\Users\\DheerajKumarRajak\\Desktop\\ProguardValidation\\target\\tempLibrary\r\n    jars\\0&#39;, -printmapping, &#39;C:\\Users\\DheerajKumarRajak\\Desktop\\ProguardValidation\\target\\proguard_map.txt&#39;, -printseeds, &#39;C:\\Users\\DheerajKumarRajak\\Deskto\r\n    p\\ProguardValidation\\target\\proguard_seed.txt&#39;]\r\n    [INFO] proguard jar: [C:\\Users\\DheerajKumarRajak\\.m2\\repository\\com\\guardsquare\\proguard-base\\7.2.2\\proguard-base-7.2.2.jar]\r\n     [proguard] ProGuard, version 7.2.2Warning: org.example.Main: can&#39;t find superclass or interface java.lang.ObjectWarning: org.example.test: can&#39;t find s\r\n    uperclass or interface java.lang.ObjectWarning: org.example.Main: can&#39;t find referenced class java.lang.ObjectWarning: org.example.Main: can&#39;t find refe\r\n    renced class java.lang.ObjectWarning: org.example.Main: can&#39;t find referenced class java.lang.ClassWarning: org.example.Main: can&#39;t find referenced clas\r\n    s java.lang.ClassWarning: org.example.Main: can&#39;t find referenced class java.lang.ClassWarning: org.example.Main: can&#39;t find referenced class java.lang.\r\n    StringWarning: org.example.Main: can&#39;t find referenced class java.lang.StringWarning: org.example.test: can&#39;t find referenced class java.lang.ObjectWarn\r\n    ing: org.example.test: can&#39;t find referenced class java.lang.ObjectWarning: org.example.test: can&#39;t find referenced class java.lang.ClassWarning: org.ex\r\n    ample.test: can&#39;t find referenced class java.lang.SystemWarning: org.example.test: can&#39;t find referenced class java.lang.SystemWarning: org.example.test\r\n    : can&#39;t find referenced class java.lang.ClassWarning: org.example.test: can&#39;t find referenced class java.lang.StringWarning: org.example.test: can&#39;t fin\r\n    d referenced class java.io.PrintStreamWarning: org.example.test: can&#39;t find referenced class java.io.PrintStreamWarning: org.example.test: can&#39;t find re\r\n    ferenced class java.lang.ClassWarning: org.example.test: can&#39;t find referenced class java.lang.ClassWarning: there were 20 unresolved references to clas\r\n    ses or interfaces.         You may need to add missing library jars or update their versions.         If your code works fine without the missing classe\r\n    s, you can suppress         the warnings with &#39;-dontwarn&#39; options.         (https://www.guardsquare.com/proguard/manual/troubleshooting#unresolvedclass)\r\n    Unexpected error java.io.IOException: Please correct the above warnings first.\r\n     [proguard]     at proguard.Initializer.execute(Initializer.java:544) ~[proguard-base-7.2.2.jar:7.2.2]\r\n     [proguard]     at proguard.pass.PassRunner.run(PassRunner.java:24) ~[proguard-base-7.2.2.jar:7.2.2]\r\n     [proguard]     at proguard.ProGuard.initialize(ProGuard.java:328) ~[proguard-base-7.2.2.jar:7.2.2]\r\n     [proguard]     at proguard.ProGuard.execute(ProGuard.java:130) ~[proguard-base-7.2.2.jar:7.2.2]\r\n     [proguard]     at proguard.ProGuard.main(ProGuard.java:623) [proguard-base-7.2.2.jar:7.2.2]\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  3.531 s\r\n    [INFO] Finished at: 2023-10-12T11:11:45+05:30\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal com.github.wvengen:proguard-maven-plugin:2.6.0:proguard (default) on project Proguard Validation: Obfuscation failed\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;ProguardValidation&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;maven.compiler.source&gt;14&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;14&lt;/maven.compiler.target&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.3.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;com.github.wvengen&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;proguard-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.6.0&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;phase&gt;package&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;proguard&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;putLibraryJarsInTempDir&gt;true&lt;/putLibraryJarsInTempDir&gt;\r\n                        &lt;proguardVersion&gt;7.2.2&lt;/proguardVersion&gt;\r\n                        &lt;obfuscate&gt;true&lt;/obfuscate&gt;\r\n                        &lt;injar&gt;ProguardValidation-1.0-SNAPSHOT.jar&lt;/injar&gt;\r\n                        &lt;outjar&gt;ProguardValidation-1.0-SNAPSHOT-small.jar&lt;/outjar&gt;\r\n                        &lt;proguardInclude&gt;src/main/resources/proguard.cfg&lt;/proguardInclude&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;","title":"Error with ProGuard while obfuscating Maven testing framework","body":"<p>I'm encountering the above error when attempting to run mvn clean package. I have a Maven test framework with one test class containing a method, and a main class that creates an object of the test class and calls the method. I haven't specified anything in proguard.cfg.</p>\n<p>I'm encountering the above error when attempting to run mvn clean package.</p>\n<pre><code>[INFO] execute ProGuard [-injars, 'C:\\Users\\DheerajKumarRajak\\Desktop\\ProguardValidation\\target\\ProguardValidation-1.0-SNAPSHOT.jar'(!META-INF/maven/**) ...'C:\\Users\\DheerajKumarRajak\\Desktop\\ProguardValidation\\target\\ProguardValidation-1.0-SNAPSHOT-small.jar', -include, 'C:\\Users\\DheerajKumarRa\njak\\Desktop\\ProguardValidation\\src\\main\\resources\\proguard.cfg', -libraryjars, 'C:\\Users\\DheerajKumarRajak\\Desktop\\ProguardValidation\\target\\tempLibrary\njars\\0', -printmapping, 'C:\\Users\\DheerajKumarRajak\\Desktop\\ProguardValidation\\target\\proguard_map.txt', -printseeds, 'C:\\Users\\DheerajKumarRajak\\Deskto\np\\ProguardValidation\\target\\proguard_seed.txt']\n[INFO] proguard jar: [C:\\Users\\DheerajKumarRajak\\.m2\\repository\\com\\guardsquare\\proguard-base\\7.2.2\\proguard-base-7.2.2.jar]\n [proguard] ProGuard, version 7.2.2Warning: org.example.Main: can't find superclass or interface java.lang.ObjectWarning: org.example.test: can't find s\nuperclass or interface java.lang.ObjectWarning: org.example.Main: can't find referenced class java.lang.ObjectWarning: org.example.Main: can't find refe\nrenced class java.lang.ObjectWarning: org.example.Main: can't find referenced class java.lang.ClassWarning: org.example.Main: can't find referenced clas\ns java.lang.ClassWarning: org.example.Main: can't find referenced class java.lang.ClassWarning: org.example.Main: can't find referenced class java.lang.\nStringWarning: org.example.Main: can't find referenced class java.lang.StringWarning: org.example.test: can't find referenced class java.lang.ObjectWarn\ning: org.example.test: can't find referenced class java.lang.ObjectWarning: org.example.test: can't find referenced class java.lang.ClassWarning: org.ex\nample.test: can't find referenced class java.lang.SystemWarning: org.example.test: can't find referenced class java.lang.SystemWarning: org.example.test\n: can't find referenced class java.lang.ClassWarning: org.example.test: can't find referenced class java.lang.StringWarning: org.example.test: can't fin\nd referenced class java.io.PrintStreamWarning: org.example.test: can't find referenced class java.io.PrintStreamWarning: org.example.test: can't find re\nferenced class java.lang.ClassWarning: org.example.test: can't find referenced class java.lang.ClassWarning: there were 20 unresolved references to clas\nses or interfaces.         You may need to add missing library jars or update their versions.         If your code works fine without the missing classe\ns, you can suppress         the warnings with '-dontwarn' options.         (https://www.guardsquare.com/proguard/manual/troubleshooting#unresolvedclass)\nUnexpected error java.io.IOException: Please correct the above warnings first.\n [proguard]     at proguard.Initializer.execute(Initializer.java:544) ~[proguard-base-7.2.2.jar:7.2.2]\n [proguard]     at proguard.pass.PassRunner.run(PassRunner.java:24) ~[proguard-base-7.2.2.jar:7.2.2]\n [proguard]     at proguard.ProGuard.initialize(ProGuard.java:328) ~[proguard-base-7.2.2.jar:7.2.2]\n [proguard]     at proguard.ProGuard.execute(ProGuard.java:130) ~[proguard-base-7.2.2.jar:7.2.2]\n [proguard]     at proguard.ProGuard.main(ProGuard.java:623) [proguard-base-7.2.2.jar:7.2.2]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  3.531 s\n[INFO] Finished at: 2023-10-12T11:11:45+05:30\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal com.github.wvengen:proguard-maven-plugin:2.6.0:proguard (default) on project Proguard Validation: Obfuscation failed\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;ProguardValidation&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;14&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;14&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.github.wvengen&lt;/groupId&gt;\n                &lt;artifactId&gt;proguard-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;proguard&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;putLibraryJarsInTempDir&gt;true&lt;/putLibraryJarsInTempDir&gt;\n                    &lt;proguardVersion&gt;7.2.2&lt;/proguardVersion&gt;\n                    &lt;obfuscate&gt;true&lt;/obfuscate&gt;\n                    &lt;injar&gt;ProguardValidation-1.0-SNAPSHOT.jar&lt;/injar&gt;\n                    &lt;outjar&gt;ProguardValidation-1.0-SNAPSHOT-small.jar&lt;/outjar&gt;\n                    &lt;proguardInclude&gt;src/main/resources/proguard.cfg&lt;/proguardInclude&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","gradle"],"comments":[{"owner":{"account_id":7719031,"reputation":2254,"user_id":5845802,"display_name":"PrasadU"},"score":0,"creation_date":1697070921,"post_id":77276528,"comment_id":136234514,"body_markdown":"assuming that you want to read the compatibility flag from build.gradle before running the build - going the shell function (grep / awk) may be the way, OR you can try Toolchains - see https://docs.gradle.org/current/userguide/toolchains.html#toolchains","body":"assuming that you want to read the compatibility flag from build.gradle before running the build - going the shell function (grep / awk) may be the way, OR you can try Toolchains - see <a href=\"https://docs.gradle.org/current/userguide/toolchains.html#toolchains\" rel=\"nofollow noreferrer\">docs.gradle.org/current/userguide/toolchains.html#toolchains</a>"}],"answers":[{"tags":[],"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697092012,"creation_date":1697092012,"answer_id":77278158,"question_id":77276528,"body_markdown":"Unfortunately, Gradle CLI doesn&#39;t have a built-in or plug-in observer to retrieve information like Maven does via the [Apache Maven Help Plugin][1].\r\n\r\nBut if you have the ability to modify Gradle build scripts, you can write your own tasks, for example:\r\n\r\n```gradle\r\ntasks.register(&quot;javaSourceCompatibility&quot;) {\r\n    doLast {\r\n        val compileJava = tasks.getByName(&quot;compileJava&quot;, JavaCompile::class)\r\n        print(compileJava.sourceCompatibility)\r\n    }\r\n}\r\n\r\ntasks.register(&quot;javaTargetCompatibility&quot;) {\r\n    doLast {\r\n        val compileJava = tasks.getByName(&quot;compileJava&quot;, JavaCompile::class)\r\n        print(compileJava.targetCompatibility)\r\n    }\r\n}\r\n```\r\n\r\nAnd get information from them as follows:\r\n\r\n```\r\n./gradlew -q --console=plain javaSourceCompatibility\r\n./gradlew -q --console=plain javaTargetCompatibility\r\n```\r\n\r\nNote that the `-q` and `--console=plain` flags are needed to hide all other information except what that the tasks print.\r\n\r\nIf you need to propagate these changes across multiple projects, I recommend you to create a Gradle plugin which will automatically include these tasks in any project.\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-help-plugin/evaluate-mojo.html","title":"How to get Java targetCompatibility from build.gradle via gradle command line","body":"<p>Unfortunately, Gradle CLI doesn't have a built-in or plug-in observer to retrieve information like Maven does via the <a href=\"https://maven.apache.org/plugins/maven-help-plugin/evaluate-mojo.html\" rel=\"nofollow noreferrer\">Apache Maven Help Plugin</a>.</p>\n<p>But if you have the ability to modify Gradle build scripts, you can write your own tasks, for example:</p>\n<pre><code>tasks.register(&quot;javaSourceCompatibility&quot;) {\n    doLast {\n        val compileJava = tasks.getByName(&quot;compileJava&quot;, JavaCompile::class)\n        print(compileJava.sourceCompatibility)\n    }\n}\n\ntasks.register(&quot;javaTargetCompatibility&quot;) {\n    doLast {\n        val compileJava = tasks.getByName(&quot;compileJava&quot;, JavaCompile::class)\n        print(compileJava.targetCompatibility)\n    }\n}\n</code></pre>\n<p>And get information from them as follows:</p>\n<pre><code>./gradlew -q --console=plain javaSourceCompatibility\n./gradlew -q --console=plain javaTargetCompatibility\n</code></pre>\n<p>Note that the <code>-q</code> and <code>--console=plain</code> flags are needed to hide all other information except what that the tasks print.</p>\n<p>If you need to propagate these changes across multiple projects, I recommend you to create a Gradle plugin which will automatically include these tasks in any project.</p>\n"}],"owner":{"account_id":256027,"reputation":4511,"user_id":536466,"accept_rate":75,"display_name":"Julian Suarez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77278158,"answer_count":1,"score":1,"last_activity_date":1697092012,"creation_date":1697060292,"question_id":77276528,"body_markdown":"Hey I have a java project setup with gradle, in my file I have something like:\r\n\r\n```\r\ntasks {\r\n    // Set the JVM compatibility versions\r\n    withType&lt;JavaCompile&gt; {\r\n        sourceCompatibility = &quot;21&quot;\r\n        targetCompatibility = &quot;21&quot;\r\n    }\r\n...\r\n```\r\n\r\nFor my CI I want to download the proper JDK to compile my code is there a way to get the java version using gradle CLI?\r\n\r\nI tried with ` ./gradlew properties` and I do get some values with source and target compatibility but it seems to be independent of whatever I put in my build.gradle.kts (is probably the version set by my current gradle version not my project)\r\n\r\nThanks!","title":"How to get Java targetCompatibility from build.gradle via gradle command line","body":"<p>Hey I have a java project setup with gradle, in my file I have something like:</p>\n<pre><code>tasks {\n    // Set the JVM compatibility versions\n    withType&lt;JavaCompile&gt; {\n        sourceCompatibility = &quot;21&quot;\n        targetCompatibility = &quot;21&quot;\n    }\n...\n</code></pre>\n<p>For my CI I want to download the proper JDK to compile my code is there a way to get the java version using gradle CLI?</p>\n<p>I tried with <code> ./gradlew properties</code> and I do get some values with source and target compatibility but it seems to be independent of whatever I put in my build.gradle.kts (is probably the version set by my current gradle version not my project)</p>\n<p>Thanks!</p>\n"},{"tags":["java","spring-boot","spring-security","oauth-2.0"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1697085331,"post_id":77277517,"comment_id":136235576,"body_markdown":"You provide with own introspector instead of configuring Spring default one.","body":"You provide with own introspector instead of configuring Spring default one."}],"answers":[{"tags":[],"owner":{"account_id":25804254,"reputation":774,"user_id":19546048,"display_name":"DingHao"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697091114,"creation_date":1697091114,"answer_id":77278086,"question_id":77277517,"body_markdown":"    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http, OAuth2ResourceServerProperties properties) throws Exception {\r\n        http\r\n                .authorizeHttpRequests((authorize) -&gt; authorize\r\n                        .anyRequest().authenticated()\r\n                )\r\n                .oauth2ResourceServer((oauth2) -&gt; oauth2\r\n                        .opaqueToken(opaque -&gt; opaque\r\n                                .introspector(new CustomSpringOpaqueTokenIntrospector(properties))\r\n                        )\r\n                );\r\n        return http.build();\r\n    }\r\n\r\n    static class CustomSpringOpaqueTokenIntrospector extends SpringOpaqueTokenIntrospector {\r\n\r\n        public CustomSpringOpaqueTokenIntrospector(OAuth2ResourceServerProperties properties) {\r\n            super(properties.getOpaquetoken().getIntrospectionUri(), properties.getOpaquetoken().getClientId(), properties.getOpaquetoken().getClientSecret());\r\n            setRequestEntityConverter(defaultRequestEntityConverter(URI.create(properties.getOpaquetoken().getIntrospectionUri())));\r\n        }\r\n\r\n        private Converter&lt;String, RequestEntity&lt;?&gt;&gt; defaultRequestEntityConverter(URI introspectionUri) {\r\n            return (token) -&gt; {\r\n                //here you can modify the body of the request\r\n                HttpHeaders headers = requestHeaders();\r\n                MultiValueMap&lt;String, String&gt; body = requestBody(token);\r\n                return new RequestEntity&lt;&gt;(body, headers, HttpMethod.POST, introspectionUri);\r\n            };\r\n        }\r\n\r\n        private HttpHeaders requestHeaders() {\r\n            HttpHeaders headers = new HttpHeaders();\r\n            headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\r\n            return headers;\r\n        }\r\n\r\n        private MultiValueMap&lt;String, String&gt; requestBody(String token) {\r\n            MultiValueMap&lt;String, String&gt; body = new LinkedMultiValueMap&lt;&gt;();\r\n            body.add(&quot;token&quot;, token);\r\n            return body;\r\n        }\r\n\r\n    }\r\n\r\nOr you can use the default mechanism \r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeHttpRequests((authorize) -&gt; authorize\r\n                        .anyRequest().authenticated()\r\n                )\r\n                .oauth2ResourceServer((oauth2) -&gt; oauth2\r\n                        .opaqueToken(Customizer.withDefaults())\r\n                );\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    SpringOpaqueTokenIntrospector opaqueTokenIntrospector(OAuth2ResourceServerProperties properties) {\r\n        OAuth2ResourceServerProperties.Opaquetoken opaqueToken = properties.getOpaquetoken();\r\n        SpringOpaqueTokenIntrospector springOpaqueTokenIntrospector = new SpringOpaqueTokenIntrospector(opaqueToken.getIntrospectionUri(), opaqueToken.getClientId(),\r\n                opaqueToken.getClientSecret());\r\n        springOpaqueTokenIntrospector.setRequestEntityConverter(defaultRequestEntityConverter(URI.create(properties.getOpaquetoken().getIntrospectionUri())));\r\n        return springOpaqueTokenIntrospector;\r\n    }\r\n\r\n    private Converter&lt;String, RequestEntity&lt;?&gt;&gt; defaultRequestEntityConverter(URI introspectionUri) {\r\n        return (token) -&gt; {\r\n            //here you can modify the body of the request\r\n            HttpHeaders headers = requestHeaders();\r\n            MultiValueMap&lt;String, String&gt; body = requestBody(token);\r\n            return new RequestEntity&lt;&gt;(body, headers, HttpMethod.POST, introspectionUri);\r\n        };\r\n    }\r\n\r\n    private HttpHeaders requestHeaders() {\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\r\n        return headers;\r\n    }\r\n\r\n    private MultiValueMap&lt;String, String&gt; requestBody(String token) {\r\n        MultiValueMap&lt;String, String&gt; body = new LinkedMultiValueMap&lt;&gt;();\r\n        body.add(&quot;token&quot;, token);\r\n        return body;\r\n    }\r\n\r\nI advice use default mechanism","title":"Modify body of request to Oauth2 authentication server in Spring Security 6","body":"<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http, OAuth2ResourceServerProperties properties) throws Exception {\n    http\n            .authorizeHttpRequests((authorize) -&gt; authorize\n                    .anyRequest().authenticated()\n            )\n            .oauth2ResourceServer((oauth2) -&gt; oauth2\n                    .opaqueToken(opaque -&gt; opaque\n                            .introspector(new CustomSpringOpaqueTokenIntrospector(properties))\n                    )\n            );\n    return http.build();\n}\n\nstatic class CustomSpringOpaqueTokenIntrospector extends SpringOpaqueTokenIntrospector {\n\n    public CustomSpringOpaqueTokenIntrospector(OAuth2ResourceServerProperties properties) {\n        super(properties.getOpaquetoken().getIntrospectionUri(), properties.getOpaquetoken().getClientId(), properties.getOpaquetoken().getClientSecret());\n        setRequestEntityConverter(defaultRequestEntityConverter(URI.create(properties.getOpaquetoken().getIntrospectionUri())));\n    }\n\n    private Converter&lt;String, RequestEntity&lt;?&gt;&gt; defaultRequestEntityConverter(URI introspectionUri) {\n        return (token) -&gt; {\n            //here you can modify the body of the request\n            HttpHeaders headers = requestHeaders();\n            MultiValueMap&lt;String, String&gt; body = requestBody(token);\n            return new RequestEntity&lt;&gt;(body, headers, HttpMethod.POST, introspectionUri);\n        };\n    }\n\n    private HttpHeaders requestHeaders() {\n        HttpHeaders headers = new HttpHeaders();\n        headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\n        return headers;\n    }\n\n    private MultiValueMap&lt;String, String&gt; requestBody(String token) {\n        MultiValueMap&lt;String, String&gt; body = new LinkedMultiValueMap&lt;&gt;();\n        body.add(&quot;token&quot;, token);\n        return body;\n    }\n\n}\n</code></pre>\n<p>Or you can use the default mechanism</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http\n            .authorizeHttpRequests((authorize) -&gt; authorize\n                    .anyRequest().authenticated()\n            )\n            .oauth2ResourceServer((oauth2) -&gt; oauth2\n                    .opaqueToken(Customizer.withDefaults())\n            );\n    return http.build();\n}\n\n@Bean\nSpringOpaqueTokenIntrospector opaqueTokenIntrospector(OAuth2ResourceServerProperties properties) {\n    OAuth2ResourceServerProperties.Opaquetoken opaqueToken = properties.getOpaquetoken();\n    SpringOpaqueTokenIntrospector springOpaqueTokenIntrospector = new SpringOpaqueTokenIntrospector(opaqueToken.getIntrospectionUri(), opaqueToken.getClientId(),\n            opaqueToken.getClientSecret());\n    springOpaqueTokenIntrospector.setRequestEntityConverter(defaultRequestEntityConverter(URI.create(properties.getOpaquetoken().getIntrospectionUri())));\n    return springOpaqueTokenIntrospector;\n}\n\nprivate Converter&lt;String, RequestEntity&lt;?&gt;&gt; defaultRequestEntityConverter(URI introspectionUri) {\n    return (token) -&gt; {\n        //here you can modify the body of the request\n        HttpHeaders headers = requestHeaders();\n        MultiValueMap&lt;String, String&gt; body = requestBody(token);\n        return new RequestEntity&lt;&gt;(body, headers, HttpMethod.POST, introspectionUri);\n    };\n}\n\nprivate HttpHeaders requestHeaders() {\n    HttpHeaders headers = new HttpHeaders();\n    headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\n    return headers;\n}\n\nprivate MultiValueMap&lt;String, String&gt; requestBody(String token) {\n    MultiValueMap&lt;String, String&gt; body = new LinkedMultiValueMap&lt;&gt;();\n    body.add(&quot;token&quot;, token);\n    return body;\n}\n</code></pre>\n<p>I advice use default mechanism</p>\n"}],"owner":{"account_id":11615972,"reputation":3,"user_id":8508684,"display_name":"Notrome"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77278086,"answer_count":1,"score":0,"last_activity_date":1697091114,"creation_date":1697081215,"question_id":77277517,"body_markdown":"I&#39;m trying to create a Spring Boot app that contains an Oauth2 resource server with opaque tokens. Here&#39;s my dependencies:\r\n\r\n```xml\r\n&lt;parent&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;3.1.4&lt;/version&gt;\r\n&lt;/parent&gt;\r\n\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\t\t\r\n    &lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-security-oauth2-resource-server&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-security-oauth2-jose&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\t\r\n&lt;/dependencies&gt;\r\n```\r\n\r\nAnd my SecurityFilterChain:\r\n\r\n```java\r\n    @Value(&quot;${spring.security.oauth2.resourceserver.opaque-token.introspection-uri}&quot;)\r\n\tString introspectionUri;\r\n\r\n\t@Value(&quot;${spring.security.oauth2.resourceserver.opaque-token.client-id}&quot;)\r\n\tString clientId;\r\n\r\n\t@Value(&quot;${spring.security.oauth2.resourceserver.opaque-token.client-secret}&quot;)\r\n\tString clientSecret;\r\n\r\n    @Bean\r\n\tpublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\t    http\r\n\t        .authorizeHttpRequests((authorize) -&gt; authorize\r\n\t            .anyRequest().authenticated()\r\n\t        )\r\n\t        .oauth2ResourceServer((oauth2) -&gt; oauth2\r\n\t        \t\t.opaqueToken(opaque -&gt; opaque\r\n\t        \t\t\t\t.introspectionUri(this.introspectionUri)\r\n\t        \t\t\t\t.introspectionClientCredentials(this.clientId, this.clientSecret)\r\n\t        \t\t)\r\n\t        );\r\n\t    return http.build();\r\n\t}\r\n```\r\n\r\nThe issue is that the authentication server I need to use does not have &quot;token&quot; as the name of the parameter in the POST request used to authenticate a token. Instead, let&#39;s say it uses &quot;xtoken&quot;. This is preventing the authentication of valid tokens, as shown in my logs:\r\n\r\n```\r\nMapped to com.my.app.TestController#test()\r\nHTTP POST &lt;opaque token introspection URI&gt;\r\nAccept=[application/json, application/*+json]\r\nWriting [{token=[&lt;12345678...&gt;]}] with org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter\r\nResponse 400 BAD_REQUEST\r\n```\r\n\r\nHow can I modify the body of the request being sent to the authentication server? I initially thought this would be trivial but so far have not found a simple way to configure this.","title":"Modify body of request to Oauth2 authentication server in Spring Security 6","body":"<p>I'm trying to create a Spring Boot app that contains an Oauth2 resource server with opaque tokens. Here's my dependencies:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.1.4&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n        \n    &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-oauth2-resource-server&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-oauth2-jose&lt;/artifactId&gt;\n    &lt;/dependency&gt;   \n&lt;/dependencies&gt;\n</code></pre>\n<p>And my SecurityFilterChain:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Value(&quot;${spring.security.oauth2.resourceserver.opaque-token.introspection-uri}&quot;)\n    String introspectionUri;\n\n    @Value(&quot;${spring.security.oauth2.resourceserver.opaque-token.client-id}&quot;)\n    String clientId;\n\n    @Value(&quot;${spring.security.oauth2.resourceserver.opaque-token.client-secret}&quot;)\n    String clientSecret;\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n            .authorizeHttpRequests((authorize) -&gt; authorize\n                .anyRequest().authenticated()\n            )\n            .oauth2ResourceServer((oauth2) -&gt; oauth2\n                    .opaqueToken(opaque -&gt; opaque\n                            .introspectionUri(this.introspectionUri)\n                            .introspectionClientCredentials(this.clientId, this.clientSecret)\n                    )\n            );\n        return http.build();\n    }\n</code></pre>\n<p>The issue is that the authentication server I need to use does not have &quot;token&quot; as the name of the parameter in the POST request used to authenticate a token. Instead, let's say it uses &quot;xtoken&quot;. This is preventing the authentication of valid tokens, as shown in my logs:</p>\n<pre><code>Mapped to com.my.app.TestController#test()\nHTTP POST &lt;opaque token introspection URI&gt;\nAccept=[application/json, application/*+json]\nWriting [{token=[&lt;12345678...&gt;]}] with org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter\nResponse 400 BAD_REQUEST\n</code></pre>\n<p>How can I modify the body of the request being sent to the authentication server? I initially thought this would be trivial but so far have not found a simple way to configure this.</p>\n"},{"tags":["java","android","unity-game-engine"],"comments":[{"owner":{"account_id":7886651,"reputation":1376,"user_id":5958449,"display_name":"Yoav Gur"},"score":0,"creation_date":1458484881,"post_id":36115022,"comment_id":59870768,"body_markdown":"Usually this means that you are using a different java runtime version that the java version used for compilation.  \nE.g. you compiled your code with java 7 and try to run it with java 8, or vice versa.","body":"Usually this means that you are using a different java runtime version that the java version used for compilation.   E.g. you compiled your code with java 7 and try to run it with java 8, or vice versa."},{"owner":{"account_id":1372683,"reputation":4172,"user_id":1308171,"accept_rate":57,"display_name":"Siddharth"},"score":0,"creation_date":1458484992,"post_id":36115022,"comment_id":59870802,"body_markdown":"@YoavGur, how to solve this problem in mac system? This is big question for me. I can able to understand problem but how to sort this out?","body":"@YoavGur, how to solve this problem in mac system? This is big question for me. I can able to understand problem but how to sort this out?"},{"owner":{"account_id":7886651,"reputation":1376,"user_id":5958449,"display_name":"Yoav Gur"},"score":0,"creation_date":1458485364,"post_id":36115022,"comment_id":59870970,"body_markdown":"What JDK version did you use to compile your code?","body":"What JDK version did you use to compile your code?"},{"owner":{"account_id":1372683,"reputation":4172,"user_id":1308171,"accept_rate":57,"display_name":"Siddharth"},"score":0,"creation_date":1458486021,"post_id":36115022,"comment_id":59871221,"body_markdown":"@YoavGur, Thanks for your reply but I just figure out solution.","body":"@YoavGur, Thanks for your reply but I just figure out solution."},{"owner":{"account_id":2399674,"reputation":2691,"user_id":2097675,"display_name":"JJF"},"score":0,"creation_date":1458486850,"post_id":36115022,"comment_id":59871552,"body_markdown":"@YoavGur Java 8 will happily run Java 7 compiled code.   The reverse is not true however","body":"@YoavGur Java 8 will happily run Java 7 compiled code.   The reverse is not true however"}],"answers":[{"tags":[],"owner":{"account_id":1372683,"reputation":4172,"user_id":1308171,"accept_rate":57,"display_name":"Siddharth"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1537221780,"creation_date":1458485976,"answer_id":36115322,"question_id":36115022,"body_markdown":"I got solution by choose latest version of JDK selection in Unity.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI just changed Unity JDK path to latest installed version. Then it solved my build problem entirely.\r\n\r\n  [1]: http://i.stack.imgur.com/5o11d.png","title":"Unsupported major.minor version 52.0 - Android Build Error - Unity","body":"<p>I got solution by choose latest version of JDK selection in Unity.</p>\n\n<p><a href=\"https://i.stack.imgur.com/5o11d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5o11d.png\" alt=\"enter image description here\"></a></p>\n\n<p>I just changed Unity JDK path to latest installed version. Then it solved my build problem entirely.</p>\n"},{"tags":[],"owner":{"account_id":8905178,"reputation":46,"user_id":6647260,"display_name":"i.zeynali"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1520263301,"creation_date":1520261667,"answer_id":49113187,"question_id":36115022,"body_markdown":"Add the variable as shown below.\r\nChange to new version of your java ,for me is: jdk1.8.0_65\r\n(make sure restart pc)\r\n**good luck.:)**\r\n![][1]\r\n\r\n  \r\n  [1]: https://i.stack.imgur.com/9dB4t.jpg\r\n","title":"Unsupported major.minor version 52.0 - Android Build Error - Unity","body":"<p>Add the variable as shown below.\nChange to new version of your java ,for me is: jdk1.8.0_65\n(make sure restart pc)\n<strong>good luck.:)</strong>\n<img src=\"https://i.stack.imgur.com/9dB4t.jpg\" alt=\"\"></p>\n"},{"tags":[],"owner":{"account_id":25973083,"reputation":55,"user_id":19687930,"display_name":"Ricardo Alexis Huerta Salazar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697090842,"creation_date":1697090842,"answer_id":77278058,"question_id":36115022,"body_markdown":"I solved this by going to:\r\n\r\n    Edit -&gt; Preferences -&gt; External Tools\r\n\r\nAnd then checking all the recommended options:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lFT3a.png","title":"Unsupported major.minor version 52.0 - Android Build Error - Unity","body":"<p>I solved this by going to:</p>\n<pre><code>Edit -&gt; Preferences -&gt; External Tools\n</code></pre>\n<p>And then checking all the recommended options:</p>\n<p><a href=\"https://i.stack.imgur.com/lFT3a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lFT3a.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":1372683,"reputation":4172,"user_id":1308171,"accept_rate":57,"display_name":"Siddharth"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1882,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":36115322,"answer_count":3,"score":2,"last_activity_date":1697090842,"creation_date":1458484414,"question_id":36115022,"body_markdown":"After I have updated my android sdk, I got this type of error when I try to create android build for my game.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAt present, My game source code contains two plugins, one is Google Play Games and second is RevMob. Before it generated build correctly but at present it is getting above error.\r\n\r\nPlease give some explanation in this. Via google I got so much same forum questions in stack overflow but those are for core platforms. So can&#39;t able to decide how to apply them for unity.\r\n\r\nAt present my terminal java version display like this :\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/YXTks.png\r\n  [2]: http://i.stack.imgur.com/I7464.png","title":"Unsupported major.minor version 52.0 - Android Build Error - Unity","body":"<p>After I have updated my android sdk, I got this type of error when I try to create android build for my game.</p>\n\n<p><a href=\"https://i.stack.imgur.com/YXTks.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YXTks.png\" alt=\"enter image description here\"></a></p>\n\n<p>At present, My game source code contains two plugins, one is Google Play Games and second is RevMob. Before it generated build correctly but at present it is getting above error.</p>\n\n<p>Please give some explanation in this. Via google I got so much same forum questions in stack overflow but those are for core platforms. So can't able to decide how to apply them for unity.</p>\n\n<p>At present my terminal java version display like this :</p>\n\n<p><a href=\"https://i.stack.imgur.com/I7464.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I7464.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","gradle","kotlin"],"comments":[{"owner":{"account_id":119433,"reputation":2686,"user_id":311122,"accept_rate":79,"display_name":"Robb"},"score":0,"creation_date":1572357790,"post_id":58608911,"comment_id":103528719,"body_markdown":"possible duplicate: https://stackoverflow.com/questions/39265432/could-not-get-unknown-property-compile-for-object-of-type-org-gradle-api-inter","body":"possible duplicate: <a href=\"https://stackoverflow.com/questions/39265432/could-not-get-unknown-property-compile-for-object-of-type-org-gradle-api-inter\" title=\"could not get unknown property compile for object of type org gradle api inter\">stackoverflow.com/questions/39265432/&hellip;</a>"},{"owner":{"account_id":16290111,"reputation":602,"user_id":11763786,"display_name":"tobsob"},"score":1,"creation_date":1572357995,"post_id":58608911,"comment_id":103528807,"body_markdown":"Possible duplicate of [Could not get unknown property &#39;compile&#39; for object of type org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDependencyHandler](https://stackoverflow.com/questions/39265432/could-not-get-unknown-property-compile-for-object-of-type-org-gradle-api-inter)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/39265432/could-not-get-unknown-property-compile-for-object-of-type-org-gradle-api-inter\">Could not get unknown property &#39;compile&#39; for object of type org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDe&zwnj;&#8203;pendencyHandler</a>"}],"answers":[{"tags":[],"owner":{"account_id":1884162,"reputation":7056,"user_id":1703730,"display_name":"Bj&#248;rn Vester"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572363719,"creation_date":1572363719,"answer_id":58610803,"question_id":58608911,"body_markdown":"Remove all those weird plus signs (+) you have after many of your dependency declerations. So, for instance, instead of:\r\n\r\n```\r\nimplementation &#39;com.android.support:appcompat-v7:28.0.0&#39;+\r\n```\r\n\r\nWrite:\r\n\r\n```\r\nimplementation &#39;com.android.support:appcompat-v7:28.0.0&#39;\r\n```\r\n","title":"Could not get unknown property &#39;implementation&#39; for object of type org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDependencyHandler","body":"<p>Remove all those weird plus signs (+) you have after many of your dependency declerations. So, for instance, instead of:</p>\n\n<pre><code>implementation 'com.android.support:appcompat-v7:28.0.0'+\n</code></pre>\n\n<p>Write:</p>\n\n<pre><code>implementation 'com.android.support:appcompat-v7:28.0.0'\n</code></pre>\n"}],"owner":{"account_id":16992508,"reputation":65,"user_id":12291764,"display_name":"lebaneseblonde252"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11550,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1697090831,"creation_date":1572357539,"question_id":58608911,"body_markdown":"I&#39;ve searched through previous post and can&#39;t find the answer to my question here is my code from my build.gradle file.\r\n\r\nError: A problem occurred evaluating project &#39;:app&#39;.\r\n&gt; Could not get unknown property &#39;implementation&#39; for object of type org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDependencyHandler.\r\n\r\n        apply plugin: &#39;com.android.application&#39;\r\n    apply plugin: &#39;kotlin-android&#39;\r\n    apply plugin: &#39;kotlin-android-extensions&#39;\r\n    android {\r\n        compileSdkVersion 29\r\n        defaultConfig {\r\n            applicationId &quot;com.loganwiley.findmyphone&quot;\r\n            minSdkVersion 17\r\n            targetSdkVersion 29\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n            testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\r\n        }\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n            compileKotlin {\r\n                kotlinOptions.suppressWarnings = true\r\n            }\r\n    \r\n            compileKotlin {\r\n                kotlinOptions {\r\n                    suppressWarnings = true\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n        implementation &#39;com.android.support:appcompat-v7:28.0.0&#39;+\r\n        implementation &#39;com.android.support.constraint:constraint-layout:1.0.2&#39;+\r\n        implementation &#39;org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version&#39;\r\n        implementation &#39;com.android.support.constraint:constraint-layout:1.0.2&#39;+\r\n        implementation &#39;com.google.firebase:firebase-auth:10.2.4&#39;+\r\n        implementation &#39;com.google.firebase:firebase-database:10.2.4&#39;+\r\n        implementation &#39;com.google.android.gms:play-services-maps:10.2.4&#39;+\r\n        implementation &#39;com.android.support:design:28.0.0&#39;\r\n        implementation &#39;com.android.support.constraint:constraint-layout:1.1.2&#39;+\r\n        testImplementation &#39;junit:junit:4.12&#39;\r\n        androidTestImplementation &#39;com.android.support.test:runner:1.0.2&#39;+\r\n        androidTestImplementation &#39;com.android.support.test.espresso:espresso-core:3.0.2&#39;\r\n    }\r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    apply plugin: &#39;com.google.gms.google-services&#39;","title":"Could not get unknown property &#39;implementation&#39; for object of type org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDependencyHandler","body":"<p>I've searched through previous post and can't find the answer to my question here is my code from my build.gradle file.</p>\n\n<p>Error: A problem occurred evaluating project ':app'.</p>\n\n<blockquote>\n  <p>Could not get unknown property 'implementation' for object of type org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDependencyHandler.</p>\n</blockquote>\n\n<pre><code>    apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\nandroid {\n    compileSdkVersion 29\n    defaultConfig {\n        applicationId \"com.loganwiley.findmyphone\"\n        minSdkVersion 17\n        targetSdkVersion 29\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n        compileKotlin {\n            kotlinOptions.suppressWarnings = true\n        }\n\n        compileKotlin {\n            kotlinOptions {\n                suppressWarnings = true\n            }\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation 'com.android.support:appcompat-v7:28.0.0'+\n    implementation 'com.android.support.constraint:constraint-layout:1.0.2'+\n    implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version'\n    implementation 'com.android.support.constraint:constraint-layout:1.0.2'+\n    implementation 'com.google.firebase:firebase-auth:10.2.4'+\n    implementation 'com.google.firebase:firebase-database:10.2.4'+\n    implementation 'com.google.android.gms:play-services-maps:10.2.4'+\n    implementation 'com.android.support:design:28.0.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.1.2'+\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'+\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n}\nrepositories {\n    mavenCentral()\n}\n\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n"},{"tags":["javascript","java","websocket","header"],"comments":[{"owner":{"account_id":1041770,"reputation":29273,"user_id":1047662,"accept_rate":86,"display_name":"Cyclonecode"},"score":1,"creation_date":1436264579,"post_id":31265789,"comment_id":50526617,"body_markdown":"How long are the message you are trying to send? If it&#39;s larger than 125 bytes you need to encode the length in a different manner i.e you must take the extended payload length into consideration.","body":"How long are the message you are trying to send? If it&#39;s larger than 125 bytes you need to encode the length in a different manner i.e you must take the extended payload length into consideration."},{"owner":{"account_id":1080538,"reputation":937,"user_id":1077657,"accept_rate":86,"display_name":"BenJacob"},"score":0,"creation_date":1436264734,"post_id":31265789,"comment_id":50526722,"body_markdown":"Right, of course, so i need to use the next two (or eight) bytes to store the length instead?","body":"Right, of course, so i need to use the next two (or eight) bytes to store the length instead?"},{"owner":{"account_id":1041770,"reputation":29273,"user_id":1047662,"accept_rate":86,"display_name":"Cyclonecode"},"score":0,"creation_date":1436264751,"post_id":31265789,"comment_id":50526729,"body_markdown":"If the length is between 15 and 65535 bytes then your will have to add a two byte extended length, while if it&#39;s larger than 65535 bytes than you&#39;ll need a 4 byte extended length.","body":"If the length is between 15 and 65535 bytes then your will have to add a two byte extended length, while if it&#39;s larger than 65535 bytes than you&#39;ll need a 4 byte extended length."},{"owner":{"account_id":1041770,"reputation":29273,"user_id":1047662,"accept_rate":86,"display_name":"Cyclonecode"},"score":1,"creation_date":1436264786,"post_id":31265789,"comment_id":50526750,"body_markdown":"Checkout http://tools.ietf.org/html/rfc6455, you also have an example here on how to encode your header based on the payload size (this is an php example) https://github.com/CycloneCode/WSServer/blob/master/src/WSServer.php","body":"Checkout <a href=\"http://tools.ietf.org/html/rfc6455\" rel=\"nofollow noreferrer\">tools.ietf.org/html/rfc6455</a>, you also have an example here on how to encode your header based on the payload size (this is an php example) <a href=\"https://github.com/CycloneCode/WSServer/blob/master/src/WSServer.php\" rel=\"nofollow noreferrer\">github.com/CycloneCode/WSServer/blob/master/src/WSServer.php</a>"},{"owner":{"account_id":1041770,"reputation":29273,"user_id":1047662,"accept_rate":86,"display_name":"Cyclonecode"},"score":0,"creation_date":1436264965,"post_id":31265789,"comment_id":50526866,"body_markdown":"Here is another example: http://stackoverflow.com/questions/8125507/how-can-i-send-and-receive-websocket-messages-on-the-server-side","body":"Here is another example: <a href=\"http://stackoverflow.com/questions/8125507/how-can-i-send-and-receive-websocket-messages-on-the-server-side\" title=\"how can i send and receive websocket messages on the server side\">stackoverflow.com/questions/8125507/&hellip;</a>"},{"owner":{"account_id":1080538,"reputation":937,"user_id":1077657,"accept_rate":86,"display_name":"BenJacob"},"score":0,"creation_date":1436265141,"post_id":31265789,"comment_id":50526987,"body_markdown":"Awesome, thanks that helps a lot. (i think you meant 125 not 15 in your second comment)","body":"Awesome, thanks that helps a lot. (i think you meant 125 not 15 in your second comment)"},{"owner":{"account_id":1041770,"reputation":29273,"user_id":1047662,"accept_rate":86,"display_name":"Cyclonecode"},"score":0,"creation_date":1436265175,"post_id":31265789,"comment_id":50527015,"body_markdown":"Haha, yes i did, sorry still a little bit tired =)","body":"Haha, yes i did, sorry still a little bit tired =)"}],"answers":[{"tags":[],"owner":{"account_id":62423,"reputation":3486,"user_id":185498,"display_name":"Manushin Igor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1535546911,"creation_date":1535546911,"answer_id":52077899,"question_id":31265789,"body_markdown":"Issue is here:\r\n\r\n    byteStream.write(bytes.length);\r\n\r\nThere are different schemas, how to encode integer into the byte array. Please [see Endianness][1] wikipedia article.\r\n\r\nYou have to do something by this (this code fragment is [from .Net WebSocket client][2]):\r\n\r\n    var arrayLengthBytes = BitConverter.GetBytes(bytes.length)\r\n\r\n    if (!BitConverter.IsLittleEndian)\r\n    {\r\n        Array.Reverse(arrayLengthBytes, 0, arrayLengthBytes.Length);\r\n    }\r\n\r\n    byteStream.write(arrayLengthBytes);\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Endianness\r\n  [2]: https://github.com/deniszykov/WebSocketListener/blob/master/vtortola.WebSockets.Rfc6455/Header/WebSocketFrameHeader.cs#L100","title":"Websocket invalid frame header","body":"<p>Issue is here:</p>\n\n<pre><code>byteStream.write(bytes.length);\n</code></pre>\n\n<p>There are different schemas, how to encode integer into the byte array. Please <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\">see Endianness</a> wikipedia article.</p>\n\n<p>You have to do something by this (this code fragment is <a href=\"https://github.com/deniszykov/WebSocketListener/blob/master/vtortola.WebSockets.Rfc6455/Header/WebSocketFrameHeader.cs#L100\" rel=\"nofollow noreferrer\">from .Net WebSocket client</a>):</p>\n\n<pre><code>var arrayLengthBytes = BitConverter.GetBytes(bytes.length)\n\nif (!BitConverter.IsLittleEndian)\n{\n    Array.Reverse(arrayLengthBytes, 0, arrayLengthBytes.Length);\n}\n\nbyteStream.write(arrayLengthBytes);\n</code></pre>\n"}],"owner":{"account_id":1080538,"reputation":937,"user_id":1077657,"accept_rate":86,"display_name":"BenJacob"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9333,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1697090831,"creation_date":1436264211,"question_id":31265789,"body_markdown":"I am sending data from a java server to a `javascript` client via a `websocket` in the following manner:\r\n\r\n    private byte[] makeFrame(String message) throws IOException {\r\n        byte[] bytes = message.getBytes(Charset.forName(&quot;UTF-8&quot;));\r\n        ByteArrayOutputStream byteStream = new ByteArrayOutputStream();\r\n        byteStream.write(0x81);\r\n        byteStream.write(bytes.length);\r\n        byteStream.write(bytes);\r\n        byteStream.flush();\r\n        byteStream.close();\r\n        byte[] data = byteStream.toByteArray();\r\n    }\r\n\r\nBut i am getting the error \r\n\r\n    Websocket connection to &#39;ws://localhost:8080/&#39; failed: Invalid frame header\r\n\r\n when the size is large (i believe above 128 bytes). I am unsure whether this is an issue with the op-code or something else.\r\n\r\nMany thanks, Ben","title":"Websocket invalid frame header","body":"<p>I am sending data from a java server to a <code>javascript</code> client via a <code>websocket</code> in the following manner:</p>\n\n<pre><code>private byte[] makeFrame(String message) throws IOException {\n    byte[] bytes = message.getBytes(Charset.forName(\"UTF-8\"));\n    ByteArrayOutputStream byteStream = new ByteArrayOutputStream();\n    byteStream.write(0x81);\n    byteStream.write(bytes.length);\n    byteStream.write(bytes);\n    byteStream.flush();\n    byteStream.close();\n    byte[] data = byteStream.toByteArray();\n}\n</code></pre>\n\n<p>But i am getting the error </p>\n\n<pre><code>Websocket connection to 'ws://localhost:8080/' failed: Invalid frame header\n</code></pre>\n\n<p>when the size is large (i believe above 128 bytes). I am unsure whether this is an issue with the op-code or something else.</p>\n\n<p>Many thanks, Ben</p>\n"},{"tags":["java","mockito","spy"],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251220,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697090778,"creation_date":1697090778,"answer_id":77278054,"question_id":77275170,"body_markdown":"You should be able to use [`@SpyBean`](https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/mock/mockito/SpyBean.html):\r\n\r\n&gt; Annotation that can be used to apply Mockito spies to a Spring `ApplicationContext`. Can be used as a class level annotation or on fields in either `@Configuration` classes, or test classes that are `@RunWith` the SpringRunner.\r\n&gt;\r\n&gt; Spies can be applied by type or by bean name. All beans in the context of a matching type (including subclasses) will be wrapped with the spy. If no existing bean is defined a new one will be added. Dependencies that are known to the application context but are not beans (such as those registered directly) will not be found and a spied bean will be added to the context alongside the existing dependency. \r\n\r\n```\r\n@ExtendWith(SpringExtension.class)\r\nclass YourTest {\r\n  @SpyBean\r\n  private ClassThatIsCalled classThatIsCalled;\r\n  @Captor\r\n  private ArgumentCaptor&lt;TypeOfMyParameter&gt; typeOfMyParameter;\r\n\r\n  // ...\r\n}\r\n```\r\n\r\n","title":"How to capture an argument with Mockito and execute real method?","body":"<p>You should be able to use <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/mock/mockito/SpyBean.html\" rel=\"nofollow noreferrer\"><code>@SpyBean</code></a>:</p>\n<blockquote>\n<p>Annotation that can be used to apply Mockito spies to a Spring <code>ApplicationContext</code>. Can be used as a class level annotation or on fields in either <code>@Configuration</code> classes, or test classes that are <code>@RunWith</code> the SpringRunner.</p>\n<p>Spies can be applied by type or by bean name. All beans in the context of a matching type (including subclasses) will be wrapped with the spy. If no existing bean is defined a new one will be added. Dependencies that are known to the application context but are not beans (such as those registered directly) will not be found and a spied bean will be added to the context alongside the existing dependency.</p>\n</blockquote>\n<pre><code>@ExtendWith(SpringExtension.class)\nclass YourTest {\n  @SpyBean\n  private ClassThatIsCalled classThatIsCalled;\n  @Captor\n  private ArgumentCaptor&lt;TypeOfMyParameter&gt; typeOfMyParameter;\n\n  // ...\n}\n</code></pre>\n"}],"owner":{"account_id":8188738,"reputation":73,"user_id":6163700,"display_name":"jvdecamargo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697090778,"creation_date":1697044995,"question_id":77275170,"body_markdown":"I have some integration tests that use Mockito, and they are working fine. \r\n\r\nHowever, I want to verify that the input of a method that is called some time during the process I&#39;m testing. \r\nThe thing is: I don&#39;t want to mock the method behavior, only to inspect its argument and execute the real method.\r\nIf I do something like this:\r\n\r\n```\r\n@MockBean\r\nprivate ClassThatIsCalled classThatIsCalled;\r\n@Captor\r\nprivate ArgumentCaptor&lt;TypeOfMyParameter&gt; typeOfMyParameter;\r\n```\r\n\r\nI get an error because a dependency of `ClassThatIsCalled` was not found. Even If I do         `given(classThatIsCalled.callMethod(any())).willCallRealMethod();`\r\nI&#39;m still mocking `ClassThatIsCalled` which is not what I want to do.\r\n\r\nIs there a way to call the productive code of `ClassThatIsCalled` (without mocking it) and simply inspect the passed argument?\r\n\r\nTL;DR: I want to use `@Spy`/`@Captor`/similar to inspect an argument passed to a class, but without mocking the class, but calling its real method (using `.willCallRealMethod()` is not enough, since a mocked class has no dependencies injected).","title":"How to capture an argument with Mockito and execute real method?","body":"<p>I have some integration tests that use Mockito, and they are working fine.</p>\n<p>However, I want to verify that the input of a method that is called some time during the process I'm testing.\nThe thing is: I don't want to mock the method behavior, only to inspect its argument and execute the real method.\nIf I do something like this:</p>\n<pre><code>@MockBean\nprivate ClassThatIsCalled classThatIsCalled;\n@Captor\nprivate ArgumentCaptor&lt;TypeOfMyParameter&gt; typeOfMyParameter;\n</code></pre>\n<p>I get an error because a dependency of <code>ClassThatIsCalled</code> was not found. Even If I do         <code>given(classThatIsCalled.callMethod(any())).willCallRealMethod();</code>\nI'm still mocking <code>ClassThatIsCalled</code> which is not what I want to do.</p>\n<p>Is there a way to call the productive code of <code>ClassThatIsCalled</code> (without mocking it) and simply inspect the passed argument?</p>\n<p>TL;DR: I want to use <code>@Spy</code>/<code>@Captor</code>/similar to inspect an argument passed to a class, but without mocking the class, but calling its real method (using <code>.willCallRealMethod()</code> is not enough, since a mocked class has no dependencies injected).</p>\n"},{"tags":["java","spring","rest","validation","javax-validation"],"answers":[{"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1694410136,"creation_date":1676327185,"answer_id":75441780,"question_id":75441493,"body_markdown":"Yes, you could write your own annotations and validators for them.\r\n\r\nYour annotation would look like this:\r\n\r\n&lt;!-- language: java --&gt;\r\n    @Documented\r\n    @Constraint(validatedBy = Base64Validator.class)\r\n    @Target( { ElementType.FIELD })\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface IsBase64 {\r\n        String message() default &quot;The string is not base64 string&quot;;\r\n        Class&lt;?&gt;[] groups() default {};\r\n        Class&lt;? extends Payload&gt;[] payload() default {};\r\n    }\r\n\r\nConstraint validator `javax.validation` implementation (I&#39;m using here your code for the actual validation):\r\n\r\n    public class Base64Validator implements ConstraintValidator&lt;IsBase64, String&gt; {\r\n        \r\n        @Override\r\n        public boolean isValid(String value, ConstraintValidatorContext cxt) {\r\n            try {\r\n                Base64.getDecoder().decode(value);\r\n                return true;\r\n            } catch(IllegalArgumentException iae) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\nExample data class with the annotated field:\r\n\r\n    @Data\r\n    public class MyPayload {\r\n        @IsBase64\r\n        private String value;\r\n    }\r\n\r\nAnd controller method example with `@Valid` annotation which is required:\r\n\r\n    @PostMapping\r\n    public String test(@Valid @RequestBody MyPayload myPayload) {\r\n        return &quot;ok&quot;;\r\n    }\r\n\r\n**UPDATED**:\r\nAlso, if you want to check whether the fiven string is a base64 string, you can use the method `isBase64()` from apache-commons libraby, the class is `org.apache.commons.codec.binary.Base64` \r\nSo, it would look like this \r\n`Base64.isBase64(str);`","title":"Annotation for validation base64 string in Spring","body":"<p>Yes, you could write your own annotations and validators for them.</p>\n<p>Your annotation would look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Documented\n@Constraint(validatedBy = Base64Validator.class)\n@Target( { ElementType.FIELD })\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface IsBase64 {\n    String message() default &quot;The string is not base64 string&quot;;\n    Class&lt;?&gt;[] groups() default {};\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n<p>Constraint validator <code>javax.validation</code> implementation (I'm using here your code for the actual validation):</p>\n<pre><code>public class Base64Validator implements ConstraintValidator&lt;IsBase64, String&gt; {\n    \n    @Override\n    public boolean isValid(String value, ConstraintValidatorContext cxt) {\n        try {\n            Base64.getDecoder().decode(value);\n            return true;\n        } catch(IllegalArgumentException iae) {\n            return false;\n        }\n    }\n}\n</code></pre>\n<p>Example data class with the annotated field:</p>\n<pre><code>@Data\npublic class MyPayload {\n    @IsBase64\n    private String value;\n}\n</code></pre>\n<p>And controller method example with <code>@Valid</code> annotation which is required:</p>\n<pre><code>@PostMapping\npublic String test(@Valid @RequestBody MyPayload myPayload) {\n    return &quot;ok&quot;;\n}\n</code></pre>\n<p><strong>UPDATED</strong>:\nAlso, if you want to check whether the fiven string is a base64 string, you can use the method <code>isBase64()</code> from apache-commons libraby, the class is <code>org.apache.commons.codec.binary.Base64</code>\nSo, it would look like this\n<code>Base64.isBase64(str);</code></p>\n"}],"owner":{"account_id":16223118,"reputation":85,"user_id":11714220,"display_name":"Alfredo Morales"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1158,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75441780,"answer_count":1,"score":2,"last_activity_date":1697090305,"creation_date":1676324766,"question_id":75441493,"body_markdown":"I have a rest service with my request body bean annotated with javax.validation like `@NotBlank @NotNull @Pattern` etc., and in one specific field I receive a file encoded as a **string base64**,\r\n\r\nso, *is there an annotation, or how could I write a custom validation annotation, so it would check if the string is really a base64 string?*\r\n\r\nI just need a validation like this in annotation form:\r\n\r\n    try {\r\n        Base64.getDecoder().decode(someString);\r\n        return true;\r\n    } catch(IllegalArgumentException iae) {\r\n        return false;\r\n    }\r\n\r\n\r\nthnx in advance","title":"Annotation for validation base64 string in Spring","body":"<p>I have a rest service with my request body bean annotated with javax.validation like <code>@NotBlank @NotNull @Pattern</code> etc., and in one specific field I receive a file encoded as a <strong>string base64</strong>,</p>\n<p>so, <em>is there an annotation, or how could I write a custom validation annotation, so it would check if the string is really a base64 string?</em></p>\n<p>I just need a validation like this in annotation form:</p>\n<pre><code>try {\n    Base64.getDecoder().decode(someString);\n    return true;\n} catch(IllegalArgumentException iae) {\n    return false;\n}\n</code></pre>\n<p>thnx in advance</p>\n"},{"tags":["java","avro","confluent-schema-registry","avro-tools"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1623088247,"post_id":67875544,"comment_id":119974174,"body_markdown":"[I feel like I already answered this](https://stackoverflow.com/questions/67779420/schema-registry-with-spring-kafka-and-avro). Fields are matched by order **when using SpecificRecord** -","body":"<a href=\"https://stackoverflow.com/questions/67779420/schema-registry-with-spring-kafka-and-avro\">I feel like I already answered this</a>. Fields are matched by order <b>when using SpecificRecord</b> -"},{"owner":{"account_id":4328490,"reputation":1080,"user_id":3534593,"accept_rate":67,"display_name":"coretechie"},"score":0,"creation_date":1696349809,"post_id":67875544,"comment_id":136140224,"body_markdown":"I am running into the same issue right now. Is there any way to fix this? I cannot control the producer and the consumer cannot update avdl files based on producer changes. @OneCricketeer How does the order match when a producer has extra fields which the consumer is unaware of?","body":"I am running into the same issue right now. Is there any way to fix this? I cannot control the producer and the consumer cannot update avdl files based on producer changes. @OneCricketeer How does the order match when a producer has extra fields which the consumer is unaware of?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1696362877,"post_id":67875544,"comment_id":136142599,"body_markdown":"@coretechie The error here is actually using GenericReader, not Specific. Avro can match fields by name, not index only when you set `value.deserializer.specific.avro.reader=true`, for example in Kafka/Confluent AvroDeserializer. Some details about Avro vs other formats here https://martin.kleppmann.com/2012/12/05/schema-evolution-in-avro-protocol-buffers-thrift.html","body":"@coretechie The error here is actually using GenericReader, not Specific. Avro can match fields by name, not index only when you set <code>value.deserializer.specific.avro.reader=true</code>, for example in Kafka/Confluent AvroDeserializer. Some details about Avro vs other formats here <a href=\"https://martin.kleppmann.com/2012/12/05/schema-evolution-in-avro-protocol-buffers-thrift.html\" rel=\"nofollow noreferrer\">martin.kleppmann.com/2012/12/05/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":4328490,"reputation":1080,"user_id":3534593,"accept_rate":67,"display_name":"coretechie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697089424,"creation_date":1697089424,"answer_id":77277967,"question_id":67875544,"body_markdown":"I was running into the same issue with a client and server using avro for communication. In my case, the fix was to use server-side schema while reading records sent from the client which was apparently on a different schema than my server. I had to change the way I was initialising the reader. I kept the following code instead, \r\n\r\n     DatumReader&lt;GenericRecord&gt; reader;\r\n                if(serverSchema != null) {\r\n                    reader = new GenericDatumReader&lt;&gt;(serverSchema);\r\n                } else {\r\n                    reader = new GenericDatumReader&lt;&gt;();\r\n                    LOGGER.warn(&quot;Schema version mismatch can cause execution failures. Always pass expected server schema.&quot;);\r\n                }","title":"Avro Schema deserialization Index out of bound exception error - schema resolution","body":"<p>I was running into the same issue with a client and server using avro for communication. In my case, the fix was to use server-side schema while reading records sent from the client which was apparently on a different schema than my server. I had to change the way I was initialising the reader. I kept the following code instead,</p>\n<pre><code> DatumReader&lt;GenericRecord&gt; reader;\n            if(serverSchema != null) {\n                reader = new GenericDatumReader&lt;&gt;(serverSchema);\n            } else {\n                reader = new GenericDatumReader&lt;&gt;();\n                LOGGER.warn(&quot;Schema version mismatch can cause execution failures. Always pass expected server schema.&quot;);\n            }\n</code></pre>\n"}],"owner":{"account_id":9615182,"reputation":235,"user_id":7138221,"display_name":"VKR"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2010,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697089424,"creation_date":1623083891,"question_id":67875544,"body_markdown":"I have 2 applications, one is producing the data to topic and another application receiving the data from topic. writer schema version different from reader(consumer) schema. Producer having new schema and where as consumer have old schema. With schema registry schema evolve options I thought consumer works successfully but I am getting below error. Looks like consumer looking ordering of received fields in specificrecord and not ignoring the unknown field.\r\n\r\nFrom Avro docs:\r\n\r\n&gt; if both are records:\r\n&gt; \r\n&gt;   1) The ordering of fields may be different: fields are matched by\r\n&gt; name.    \r\n&gt;   2) Schemas for fields with the same name in both records are\r\n&gt; resolved recursively. \r\n&gt;   3) if the writer&#39;s record contains a field with a name not present in the reader&#39;s record, the writer&#39;s value for that field is ignored.\r\n\r\n```\r\n Caused by: java.lang.IndexOutOfBoundsException: Invalid index: 2\r\n\tat com.test.Employee.put(Employee.java:111) ~[classes!/:0.0.1-SNAPSHOT]\r\n\tat org.apache.avro.generic.GenericData.setField(GenericData.java:816) ~[avro-1.9.2.jar!/:1.9.2]\r\n\tat org.apache.avro.specific.SpecificDatumReader.readField(SpecificDatumReader.java:139) ~[avro-1.9.2.jar!/:1.9.2]\r\n\tat org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:247) ~[avro-1.9.2.jar!/:1.9.2]\r\n\tat org.apache.avro.specific.SpecificDatumReader.readRecord(SpecificDatumReader.java:123) ~[avro-1.9.2.jar!/:1.9.2]\r\n\tat org.apache.avro.generic.GenericDatumReader.readWithoutConversion(GenericDatumReader.java:179) ~[avro-1.9.2.jar!/:1.9.2]\r\n\tat org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:160) ~[avro-1.9.2.jar!/:1.9.2]\r\n\tat org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:153) ~[avro-1.9.2.jar!/:1.9.2]\r\n```\r\n\r\n  Producer Schema:\r\n\r\n```\r\n        {\r\n    &quot;type&quot;: &quot;record&quot;,\r\n    &quot;namespace&quot;: &quot;com.aa.opshub.test&quot;,\r\n    &quot;name&quot;: &quot;Employee&quot;,\r\n    &quot;fields&quot;: [\r\n        {\r\n            &quot;name&quot;: &quot;firstName&quot;,\r\n            &quot;type&quot;: &quot;string&quot;\r\n        },\r\n        {\r\n            &quot;name&quot;: &quot;age&quot;,\r\n            &quot;type&quot;: &quot;int&quot;\r\n        },\r\n\t\t{\r\n            &quot;name&quot;: &quot;middleName&quot;,\r\n            &quot;type&quot;: &quot;string&quot;\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nConsumer Schema:\r\n\r\n```\r\n  {\r\n   &quot;type&quot; : &quot;record&quot;,\r\n    &quot;namespace&quot; : &quot;com.aa.opshub.test&quot;,\r\n    &quot;name&quot; : &quot;Employee&quot;,\r\n    &quot;fields&quot; : [\r\n        { &quot;name&quot; : &quot;firstName&quot; , &quot;type&quot; : &quot;string&quot; },\r\n        { &quot;name&quot; : &quot;age&quot;, &quot;type&quot; : &quot;int&quot; }\r\n    ]\r\n}\r\n```\r\n\r\n Consumer: SpecificRecord class method throwing error\r\n\r\n     @SuppressWarnings(value=&quot;unchecked&quot;)\r\n      public void put(int field$, java.lang.Object value$) {\r\n        switch (field$) {\r\n        case 0: firstName = (java.lang.CharSequence)value$; break;\r\n        case 1: age = (java.lang.Integer)value$; break;\r\n        default: throw new IndexOutOfBoundsException(&quot;Invalid index: &quot; + field$);\r\n        }\r\n      }","title":"Avro Schema deserialization Index out of bound exception error - schema resolution","body":"<p>I have 2 applications, one is producing the data to topic and another application receiving the data from topic. writer schema version different from reader(consumer) schema. Producer having new schema and where as consumer have old schema. With schema registry schema evolve options I thought consumer works successfully but I am getting below error. Looks like consumer looking ordering of received fields in specificrecord and not ignoring the unknown field.</p>\n<p>From Avro docs:</p>\n<blockquote>\n<p>if both are records:</p>\n<ol>\n<li>The ordering of fields may be different: fields are matched by\nname.</li>\n<li>Schemas for fields with the same name in both records are\nresolved recursively.</li>\n<li>if the writer's record contains a field with a name not present in the reader's record, the writer's value for that field is ignored.</li>\n</ol>\n</blockquote>\n<pre><code> Caused by: java.lang.IndexOutOfBoundsException: Invalid index: 2\n    at com.test.Employee.put(Employee.java:111) ~[classes!/:0.0.1-SNAPSHOT]\n    at org.apache.avro.generic.GenericData.setField(GenericData.java:816) ~[avro-1.9.2.jar!/:1.9.2]\n    at org.apache.avro.specific.SpecificDatumReader.readField(SpecificDatumReader.java:139) ~[avro-1.9.2.jar!/:1.9.2]\n    at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:247) ~[avro-1.9.2.jar!/:1.9.2]\n    at org.apache.avro.specific.SpecificDatumReader.readRecord(SpecificDatumReader.java:123) ~[avro-1.9.2.jar!/:1.9.2]\n    at org.apache.avro.generic.GenericDatumReader.readWithoutConversion(GenericDatumReader.java:179) ~[avro-1.9.2.jar!/:1.9.2]\n    at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:160) ~[avro-1.9.2.jar!/:1.9.2]\n    at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:153) ~[avro-1.9.2.jar!/:1.9.2]\n</code></pre>\n<p>Producer Schema:</p>\n<pre><code>        {\n    &quot;type&quot;: &quot;record&quot;,\n    &quot;namespace&quot;: &quot;com.aa.opshub.test&quot;,\n    &quot;name&quot;: &quot;Employee&quot;,\n    &quot;fields&quot;: [\n        {\n            &quot;name&quot;: &quot;firstName&quot;,\n            &quot;type&quot;: &quot;string&quot;\n        },\n        {\n            &quot;name&quot;: &quot;age&quot;,\n            &quot;type&quot;: &quot;int&quot;\n        },\n        {\n            &quot;name&quot;: &quot;middleName&quot;,\n            &quot;type&quot;: &quot;string&quot;\n        }\n    ]\n}\n</code></pre>\n<p>Consumer Schema:</p>\n<pre><code>  {\n   &quot;type&quot; : &quot;record&quot;,\n    &quot;namespace&quot; : &quot;com.aa.opshub.test&quot;,\n    &quot;name&quot; : &quot;Employee&quot;,\n    &quot;fields&quot; : [\n        { &quot;name&quot; : &quot;firstName&quot; , &quot;type&quot; : &quot;string&quot; },\n        { &quot;name&quot; : &quot;age&quot;, &quot;type&quot; : &quot;int&quot; }\n    ]\n}\n</code></pre>\n<p>Consumer: SpecificRecord class method throwing error</p>\n<pre><code> @SuppressWarnings(value=&quot;unchecked&quot;)\n  public void put(int field$, java.lang.Object value$) {\n    switch (field$) {\n    case 0: firstName = (java.lang.CharSequence)value$; break;\n    case 1: age = (java.lang.Integer)value$; break;\n    default: throw new IndexOutOfBoundsException(&quot;Invalid index: &quot; + field$);\n    }\n  }\n</code></pre>\n"},{"tags":["java","spring-boot","maven","okta"],"comments":[{"owner":{"account_id":3888257,"reputation":111,"user_id":5532932,"display_name":"muratcanyeldan"},"score":1,"creation_date":1697092272,"post_id":77277934,"comment_id":136236361,"body_markdown":"Did you try adding `okta.oauth2.issuer` to your yml file ? If you can share more code or yml this question will be clearer","body":"Did you try adding <code>okta.oauth2.issuer</code> to your yml file ? If you can share more code or yml this question will be clearer"},{"owner":{"account_id":10063719,"reputation":1,"user_id":7439488,"display_name":"ravi"},"score":0,"creation_date":1697135657,"post_id":77277934,"comment_id":136245244,"body_markdown":"im trying to run application in my local \nhere the yaml","body":"im trying to run application in my local  here the yaml"},{"owner":{"account_id":10063719,"reputation":1,"user_id":7439488,"display_name":"ravi"},"score":0,"creation_date":1697136077,"post_id":77277934,"comment_id":136245324,"body_markdown":"im trying to run application in my local \nhere the yaml\nbut other envs like dev and stage have okta issuer configured\n**`\nspring:\n  config:\n    activate:\n      on-profile: local\n    properties:\n      &#39;[org.quartz.threadPool]&#39;:\n        threadCount: 4\n  freemarker:\n    cache: false\n  thymeleaf:\n    cache: false\n  datasource:\n    hikari:\n      minimum-idle: 2\n      maximum-pool-size: 10`**","body":"im trying to run application in my local  here the yaml but other envs like dev and stage have okta issuer configured <b>` spring:   config:     activate:       on-profile: local     properties:       &#39;[org.quartz.threadPool]&#39;:         threadCount: 4   freemarker:     cache: false   thymeleaf:     cache: false   datasource:     hikari:       minimum-idle: 2       maximum-pool-size: 10`</b>"}],"owner":{"account_id":10063719,"reputation":1,"user_id":7439488,"display_name":"ravi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697089286,"creation_date":1697088971,"question_id":77277934,"body_markdown":"While trying to run the application from VM getting the warning as below and application not started.\r\n\r\n```\r\nlevel=WARN thread_id=main class=com.okta.spring.boot.oauth.env.OktaEnvironmentPostProcessorApplicationListener method=onApplicationEvent line=38 Your Okta Issuer URL is missing. You can copy your domain from the Okta Developer Console. Follow these instructions to find it in okta page\r\nTo fix this add the `okta.oauth2.issuer` property to your application.\r\n```\r\n\r\n\r\ntry running the jar file in local profile with supporting DB connection.","title":"Okta warning message while running application","body":"<p>While trying to run the application from VM getting the warning as below and application not started.</p>\n<pre><code>level=WARN thread_id=main class=com.okta.spring.boot.oauth.env.OktaEnvironmentPostProcessorApplicationListener method=onApplicationEvent line=38 Your Okta Issuer URL is missing. You can copy your domain from the Okta Developer Console. Follow these instructions to find it in okta page\nTo fix this add the `okta.oauth2.issuer` property to your application.\n</code></pre>\n<p>try running the jar file in local profile with supporting DB connection.</p>\n"},{"tags":["java","selenium-webdriver","appium","fluentwait"],"comments":[{"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"score":0,"creation_date":1697083124,"post_id":77277059,"comment_id":136235409,"body_markdown":"Edit your question and post the exact two-line string that you are waiting for. Is there some reason you don&#39;t just create the exact two-line string in `scrheading`?","body":"Edit your question and post the exact two-line string that you are waiting for. Is there some reason you don&#39;t just create the exact two-line string in <code>scrheading</code>?"},{"owner":{"account_id":9608819,"reputation":1,"user_id":7133932,"display_name":"user7133932"},"score":0,"creation_date":1697152297,"post_id":77277059,"comment_id":136247471,"body_markdown":"Edited the question. Hope it makes more sense now. Thanks.","body":"Edited the question. Hope it makes more sense now. Thanks."},{"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"score":0,"creation_date":1697167671,"post_id":77277059,"comment_id":136248652,"body_markdown":"`scrheading = &quot;Please set your course\\r\\npreferences to proceed.&quot;`","body":"<code>scrheading = &quot;Please set your course\\r\\npreferences to proceed.&quot;</code>"},{"owner":{"account_id":9608819,"reputation":1,"user_id":7133932,"display_name":"user7133932"},"score":0,"creation_date":1697179669,"post_id":77277059,"comment_id":136249783,"body_markdown":"Good solution, but not for my case. I need one step that would work for many instances of `scrheading`(with various string values) in the app. Plus, again, the line breaks could appear anywhere within the text, depending on the device.","body":"Good solution, but not for my case. I need one step that would work for many instances of <code>scrheading</code>(with various string values) in the app. Plus, again, the line breaks could appear anywhere within the text, depending on the device."}],"owner":{"account_id":9608819,"reputation":1,"user_id":7133932,"display_name":"user7133932"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697088606,"creation_date":1697070921,"question_id":77277059,"body_markdown":"The following method works if that text takes only one line:\r\n```\r\npublic void screen_heading_should_be(String scrheading) {\r\n        Wait&lt;WebDriver&gt; fluentWait = new FluentWait&lt;WebDriver&gt;(ldriver)\r\n                .withTimeout(Duration.ofSeconds(10))\r\n                .pollingEvery(Duration.ofSeconds(1));\r\n        fluentWait.until(ExpectedConditions.textToBe(AppiumBy.id(&quot;screen_heading&quot;), scrheading));\r\n    }\r\n```\r\nHow do you wait for the exact text that takes two (or more) lines on the UI?\r\n\r\nThe text I&#39;m waiting for:&lt;br/&gt;\r\n&quot;*Please set your course &lt;br/&gt; preferences to proceed.*&quot;\r\n\r\n`scrheading` is the one-line string (&quot;*Please set your course preferences to proceed.*&quot;) that&#39;s present in my Step Definitions&#39; Gherkin step (Cucumber), so, it has to be a user-friendly one-line string. Plus, texts in my app can even be on three and more lines, depending on the phone device&#39;s screen size/resolution (mobile UI automation).\r\n\r\nI was thinking about applying this: `screen_heading.getText().replaceAll(&quot;\\\\r\\\\n|\\\\r|\\\\n&quot;, &quot; &quot;)`, but it&#39;s a string which is not accepted by the &#39;ExpectedConditions&#39; from above. &#39;By&#39; is required instead.\r\n","title":"Waiting for the exact text that takes at least 2 lines on the UI to be present","body":"<p>The following method works if that text takes only one line:</p>\n<pre><code>public void screen_heading_should_be(String scrheading) {\n        Wait&lt;WebDriver&gt; fluentWait = new FluentWait&lt;WebDriver&gt;(ldriver)\n                .withTimeout(Duration.ofSeconds(10))\n                .pollingEvery(Duration.ofSeconds(1));\n        fluentWait.until(ExpectedConditions.textToBe(AppiumBy.id(&quot;screen_heading&quot;), scrheading));\n    }\n</code></pre>\n<p>How do you wait for the exact text that takes two (or more) lines on the UI?</p>\n<p>The text I'm waiting for:<br/>\n&quot;<em>Please set your course <br/> preferences to proceed.</em>&quot;</p>\n<p><code>scrheading</code> is the one-line string (&quot;<em>Please set your course preferences to proceed.</em>&quot;) that's present in my Step Definitions' Gherkin step (Cucumber), so, it has to be a user-friendly one-line string. Plus, texts in my app can even be on three and more lines, depending on the phone device's screen size/resolution (mobile UI automation).</p>\n<p>I was thinking about applying this: <code>screen_heading.getText().replaceAll(&quot;\\\\r\\\\n|\\\\r|\\\\n&quot;, &quot; &quot;)</code>, but it's a string which is not accepted by the 'ExpectedConditions' from above. 'By' is required instead.</p>\n"},{"tags":["java","spring","spring-boot","security"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697003451,"post_id":77269356,"comment_id":136223038,"body_markdown":"The fact that you need to allow the override is weird, that being said you shouldn&#39;t disable csrf as it adds security to your website. Get the CSRF token (you might need to configure seomthing to pass it as a cookie or header) and include it in your requests.","body":"The fact that you need to allow the override is weird, that being said you shouldn&#39;t disable csrf as it adds security to your website. Get the CSRF token (you might need to configure seomthing to pass it as a cookie or header) and include it in your requests."}],"owner":{"account_id":29643868,"reputation":1,"user_id":22719347,"display_name":"Oskar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697088588,"creation_date":1696977987,"question_id":77269356,"body_markdown":"Im recieving an error: &quot;An expected CSRF token cannot be found&quot; when testing with Postman to register a user in my app. The plan is to register a user &amp; confirm the email address. Although when testing the app it runs although when the endpoint is tested it would throw the An expected CSRF token cannot be found error in Postman.\r\n\r\nIssue also persists when there is .csrf().disable() added in the code in WebSecurityConfig.\r\n\r\n**Request which is being sent in Body in Postman**\r\n\r\n`localhost:8090/api/v1/registration\r\n\r\n{\r\n    &quot;firstName&quot;: &quot;Ali&quot;,\r\n    &quot;lastName&quot;: &quot;Ali&quot;,\r\n    &quot;email&quot;: &quot;nilerumi@socam.me&quot;,\r\n    &quot;password&quot;: &quot;password&quot;\r\n}`\r\n\r\nCould you advise why I would be getting such error?\r\n\r\nHere are the classes:\r\n\r\n**Registration Controller**\r\n\r\n\r\n```\r\n@RestController\r\n@RequestMapping(path = &quot;/api/v1/registration&quot;)\r\npublic class RegistrationController {\r\n\r\n    private final RegistrationService registrationService;\r\n\r\n    @Autowired\r\n    public RegistrationController(RegistrationService registrationService) {\r\n        this.registrationService = registrationService;\r\n    }\r\n\r\n    @PostMapping\r\n    public String register(@RequestBody RegistrationRequest request) {\r\n        return registrationService.register(request);\r\n    }\r\n\r\n    @GetMapping(path = &quot;confirm&quot;)\r\n    public String confirm(@RequestParam(&quot;token&quot;) String token) {\r\n        return registrationService.confirmToken(token);\r\n    }\r\n}\r\n```\r\n\r\n**Registration Service**\r\n\r\n\r\n```\r\n@Service\r\npublic class RegistrationService {\r\n\r\n    private final AppUserService appUserService;\r\n    private final EmailValidator emailValidator;\r\n    private final ConfirmationTokenService confirmTokenService;\r\n    private final EmailSender emailSender;\r\n\r\n\r\n    public RegistrationService(AppUserService appUserService, EmailValidator emailValidator, ConfirmationTokenService confirmTokenService, EmailSender emailSender) {\r\n        this.appUserService = appUserService;\r\n        this.emailValidator = emailValidator;\r\n        this.confirmTokenService = confirmTokenService;\r\n        this.emailSender = emailSender;\r\n    }\r\n\r\n    public String register(RegistrationRequest request) {\r\n        boolean isValidEmail = emailValidator.test(request.getEmail());\r\n        if (isValidEmail) {\r\n            String tokenForNewUser = appUserService.signUpUser(new AppUser(request.getFirstName(),\r\n                    request.getLastName(),\r\n                    request.getEmail(),\r\n                    request.getPassword(),\r\n                    AppUserRole.USER));\r\n\r\n            //Since, we are running the spring boot application in localhost, we are hardcoding the\r\n            //url of the server. We are creating a POST request with token param\r\n            String link = &quot;http://localhost:8090/api/v1/registration/confirm?token=&quot; + tokenForNewUser;\r\n            emailSender.sendEmail(request.getEmail(), buildEmail(request.getFirstName(), link));\r\n            return tokenForNewUser;\r\n        } else {\r\n            throw new IllegalStateException(String.format(&quot;Email %s, not valid&quot;, request.getEmail()));\r\n        }\r\n    }\r\n\r\n\r\n    @Transactional\r\n    public String confirmToken(String token) {\r\n        ConfirmationToken confirmationToken = confirmTokenService\r\n                .getToken(token)\r\n                .orElseThrow(() -&gt;\r\n                        new IllegalStateException(&quot;Token Not Found&quot;));\r\n\r\n        if (confirmationToken.getConfirmedAt() != null) {\r\n            throw new IllegalStateException(&quot;Email Already Confirmed&quot;);\r\n        }\r\n\r\n        LocalDateTime expiredAt = confirmationToken.getExpiresAt();\r\n\r\n        if (expiredAt.isBefore(LocalDateTime.now())) {\r\n            throw new IllegalStateException(&quot;token expired&quot;);\r\n        }\r\n\r\n        confirmTokenService.setConfirmedAt(token);\r\n        appUserService.enableAppUser(\r\n                confirmationToken.getAppUser().getEmail());\r\n        return &quot;confirmed&quot;;\r\n    }\r\n\r\n    private String buildEmail(String name, String link) {\r\n        return &quot;&lt;div style=\\&quot;font-family:Helvetica,Arial,sans-serif;font-size:16px;margin:0;color:#0b0c0c\\&quot;&gt;\\n&quot; +\r\n                &quot;\\n&quot; +\r\n                &quot;&lt;span style=\\&quot;display:none;font-size:1px;color:#fff;max-height:0\\&quot;&gt;&lt;/span&gt;\\n&quot; +\r\n                &quot;\\n&quot; +\r\n                &quot;  &lt;table role=\\&quot;presentation\\&quot; width=\\&quot;100%\\&quot; style=\\&quot;border-collapse:collapse;min-width:100%;width:100%!important\\&quot; cellpadding=\\&quot;0\\&quot; cellspacing=\\&quot;0\\&quot; border=\\&quot;0\\&quot;&gt;\\n&quot; +\r\n                &quot;    &lt;tbody&gt;&lt;tr&gt;\\n&quot; +\r\n                &quot;      &lt;td width=\\&quot;100%\\&quot; height=\\&quot;53\\&quot; bgcolor=\\&quot;#0b0c0c\\&quot;&gt;\\n&quot; +\r\n                &quot;        \\n&quot; +\r\n                &quot;        &lt;table role=\\&quot;presentation\\&quot; width=\\&quot;100%\\&quot; style=\\&quot;border-collapse:collapse;max-width:580px\\&quot; cellpadding=\\&quot;0\\&quot; cellspacing=\\&quot;0\\&quot; border=\\&quot;0\\&quot; align=\\&quot;center\\&quot;&gt;\\n&quot; +\r\n                &quot;          &lt;tbody&gt;&lt;tr&gt;\\n&quot; +\r\n                &quot;            &lt;td width=\\&quot;70\\&quot; bgcolor=\\&quot;#0b0c0c\\&quot; valign=\\&quot;middle\\&quot;&gt;\\n&quot; +\r\n                &quot;                &lt;table role=\\&quot;presentation\\&quot; cellpadding=\\&quot;0\\&quot; cellspacing=\\&quot;0\\&quot; border=\\&quot;0\\&quot; style=\\&quot;border-collapse:collapse\\&quot;&gt;\\n&quot; +\r\n                &quot;                  &lt;tbody&gt;&lt;tr&gt;\\n&quot; +\r\n                &quot;                    &lt;td style=\\&quot;padding-left:10px\\&quot;&gt;\\n&quot; +\r\n                &quot;                  \\n&quot; +\r\n                &quot;                    &lt;/td&gt;\\n&quot; +\r\n                &quot;                    &lt;td style=\\&quot;font-size:28px;line-height:1.315789474;Margin-top:4px;padding-left:10px\\&quot;&gt;\\n&quot; +\r\n                &quot;                      &lt;span style=\\&quot;font-family:Helvetica,Arial,sans-serif;font-weight:700;color:#ffffff;text-decoration:none;vertical-align:top;display:inline-block\\&quot;&gt;Confirm your email&lt;/span&gt;\\n&quot; +\r\n                &quot;                    &lt;/td&gt;\\n&quot; +\r\n                &quot;                  &lt;/tr&gt;\\n&quot; +\r\n                &quot;                &lt;/tbody&gt;&lt;/table&gt;\\n&quot; +\r\n                &quot;              &lt;/a&gt;\\n&quot; +\r\n                &quot;            &lt;/td&gt;\\n&quot; +\r\n                &quot;          &lt;/tr&gt;\\n&quot; +\r\n                &quot;        &lt;/tbody&gt;&lt;/table&gt;\\n&quot; +\r\n                &quot;        \\n&quot; +\r\n                &quot;      &lt;/td&gt;\\n&quot; +\r\n                &quot;    &lt;/tr&gt;\\n&quot; +\r\n                &quot;  &lt;/tbody&gt;&lt;/table&gt;\\n&quot; +\r\n                &quot;  &lt;table role=\\&quot;presentation\\&quot; class=\\&quot;m_-6186904992287805515content\\&quot; align=\\&quot;center\\&quot; cellpadding=\\&quot;0\\&quot; cellspacing=\\&quot;0\\&quot; border=\\&quot;0\\&quot; style=\\&quot;border-collapse:collapse;max-width:580px;width:100%!important\\&quot; width=\\&quot;100%\\&quot;&gt;\\n&quot; +\r\n                &quot;    &lt;tbody&gt;&lt;tr&gt;\\n&quot; +\r\n                &quot;      &lt;td width=\\&quot;10\\&quot; height=\\&quot;10\\&quot; valign=\\&quot;middle\\&quot;&gt;&lt;/td&gt;\\n&quot; +\r\n                &quot;      &lt;td&gt;\\n&quot; +\r\n                &quot;        \\n&quot; +\r\n                &quot;                &lt;table role=\\&quot;presentation\\&quot; width=\\&quot;100%\\&quot; cellpadding=\\&quot;0\\&quot; cellspacing=\\&quot;0\\&quot; border=\\&quot;0\\&quot; style=\\&quot;border-collapse:collapse\\&quot;&gt;\\n&quot; +\r\n                &quot;                  &lt;tbody&gt;&lt;tr&gt;\\n&quot; +\r\n                &quot;                    &lt;td bgcolor=\\&quot;#1D70B8\\&quot; width=\\&quot;100%\\&quot; height=\\&quot;10\\&quot;&gt;&lt;/td&gt;\\n&quot; +\r\n                &quot;                  &lt;/tr&gt;\\n&quot; +\r\n                &quot;                &lt;/tbody&gt;&lt;/table&gt;\\n&quot; +\r\n                &quot;        \\n&quot; +\r\n                &quot;      &lt;/td&gt;\\n&quot; +\r\n                &quot;      &lt;td width=\\&quot;10\\&quot; valign=\\&quot;middle\\&quot; height=\\&quot;10\\&quot;&gt;&lt;/td&gt;\\n&quot; +\r\n                &quot;    &lt;/tr&gt;\\n&quot; +\r\n                &quot;  &lt;/tbody&gt;&lt;/table&gt;\\n&quot; +\r\n                &quot;\\n&quot; +\r\n                &quot;\\n&quot; +\r\n                &quot;\\n&quot; +\r\n                &quot;  &lt;table role=\\&quot;presentation\\&quot; class=\\&quot;m_-6186904992287805515content\\&quot; align=\\&quot;center\\&quot; cellpadding=\\&quot;0\\&quot; cellspacing=\\&quot;0\\&quot; border=\\&quot;0\\&quot; style=\\&quot;border-collapse:collapse;max-width:580px;width:100%!important\\&quot; width=\\&quot;100%\\&quot;&gt;\\n&quot; +\r\n                &quot;    &lt;tbody&gt;&lt;tr&gt;\\n&quot; +\r\n                &quot;      &lt;td height=\\&quot;30\\&quot;&gt;&lt;br&gt;&lt;/td&gt;\\n&quot; +\r\n                &quot;    &lt;/tr&gt;\\n&quot; +\r\n                &quot;    &lt;tr&gt;\\n&quot; +\r\n                &quot;      &lt;td width=\\&quot;10\\&quot; valign=\\&quot;middle\\&quot;&gt;&lt;br&gt;&lt;/td&gt;\\n&quot; +\r\n                &quot;      &lt;td style=\\&quot;font-family:Helvetica,Arial,sans-serif;font-size:19px;line-height:1.315789474;max-width:560px\\&quot;&gt;\\n&quot; +\r\n                &quot;        \\n&quot; +\r\n                &quot;            &lt;p style=\\&quot;Margin:0 0 20px 0;font-size:19px;line-height:25px;color:#0b0c0c\\&quot;&gt;Hi &quot; + name + &quot;,&lt;/p&gt;&lt;p style=\\&quot;Margin:0 0 20px 0;font-size:19px;line-height:25px;color:#0b0c0c\\&quot;&gt; Thank you for registering. Please click on the below link to activate your account: &lt;/p&gt;&lt;blockquote style=\\&quot;Margin:0 0 20px 0;border-left:10px solid #b1b4b6;padding:15px 0 0.1px 15px;font-size:19px;line-height:25px\\&quot;&gt;&lt;p style=\\&quot;Margin:0 0 20px 0;font-size:19px;line-height:25px;color:#0b0c0c\\&quot;&gt; &lt;a href=\\&quot;&quot; + link + &quot;\\&quot;&gt;Activate Now&lt;/a&gt; &lt;/p&gt;&lt;/blockquote&gt;\\n Link will expire in 15 minutes. &lt;p&gt;See you soon&lt;/p&gt;&quot; +\r\n                &quot;        \\n&quot; +\r\n                &quot;      &lt;/td&gt;\\n&quot; +\r\n                &quot;      &lt;td width=\\&quot;10\\&quot; valign=\\&quot;middle\\&quot;&gt;&lt;br&gt;&lt;/td&gt;\\n&quot; +\r\n                &quot;    &lt;/tr&gt;\\n&quot; +\r\n                &quot;    &lt;tr&gt;\\n&quot; +\r\n                &quot;      &lt;td height=\\&quot;30\\&quot;&gt;&lt;br&gt;&lt;/td&gt;\\n&quot; +\r\n                &quot;    &lt;/tr&gt;\\n&quot; +\r\n                &quot;  &lt;/tbody&gt;&lt;/table&gt;&lt;div class=\\&quot;yj6qo\\&quot;&gt;&lt;/div&gt;&lt;div class=\\&quot;adL\\&quot;&gt;\\n&quot; +\r\n                &quot;\\n&quot; +\r\n                &quot;&lt;/div&gt;&lt;/div&gt;&quot;;\r\n    }\r\n}\r\n```\r\n\r\n**WebSecurityConfig**\r\n\r\n```\r\n@Configuration\r\n@AllArgsConstructor\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig {\r\n\r\n    private final AppUserService appUserService;\r\n    private final BCryptPasswordEncoder bCryptPasswordEncoder;\r\n\r\n    @Bean\r\n    protected SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n        httpSecurity\r\n                .authenticationProvider(daoAuthenticationProvider())\r\n                .authorizeHttpRequests().requestMatchers(&quot;/api/v*/registration/**&quot;)\r\n                .permitAll()\r\n                .anyRequest()\r\n                .authenticated().and()\r\n                .formLogin();\r\n        return httpSecurity.build();\r\n    }\r\n\r\n    @Bean\r\n    protected AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n        return authenticationConfiguration.getAuthenticationManager();\r\n    }\r\n\r\n    @Bean\r\n    public DaoAuthenticationProvider daoAuthenticationProvider() {\r\n        DaoAuthenticationProvider provider = new DaoAuthenticationProvider();\r\n        provider.setPasswordEncoder(bCryptPasswordEncoder);\r\n        provider.setUserDetailsService(appUserService);\r\n        return provider;\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n**Confirmation Token**\r\n```\r\n@Getter\r\n@Setter\r\n@Entity\r\n@AllArgsConstructor\r\npublic class ConfirmationToken {\r\n\r\n    @Id\r\n    @GeneratedValue (strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(nullable = false)\r\n    private String token;\r\n\r\n    @Column(nullable = false)\r\n    private LocalDateTime createdAt;\r\n\r\n    @Column(nullable = false)\r\n    private LocalDateTime expiresAt;\r\n\r\n    private LocalDateTime confirmedAt;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(nullable = false,\r\n            name = &quot;app_user_id&quot;)\r\n    private AppUser appUser;\r\n\r\n    public ConfirmationToken() {\r\n    }\r\n\r\n    public ConfirmationToken(String token, LocalDateTime createdAt, LocalDateTime expiresAt, AppUser appUser) {\r\n        this.token = token;\r\n        this.createdAt = createdAt;\r\n        this.expiresAt = expiresAt;\r\n        this.appUser = appUser;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\nHave checked the pom.xml file seems ok with the dependencies\r\nHave checked the application.yaml\r\nIn the current setup I had to use allow-bean-definition-overriding: true in yaml.","title":"An expected CSRF token cannot be found error in WebSecurity Spring Boot 3.1.4","body":"<p>Im recieving an error: &quot;An expected CSRF token cannot be found&quot; when testing with Postman to register a user in my app. The plan is to register a user &amp; confirm the email address. Although when testing the app it runs although when the endpoint is tested it would throw the An expected CSRF token cannot be found error in Postman.</p>\n<p>Issue also persists when there is .csrf().disable() added in the code in WebSecurityConfig.</p>\n<p><strong>Request which is being sent in Body in Postman</strong></p>\n<p>`localhost:8090/api/v1/registration</p>\n<p>{\n&quot;firstName&quot;: &quot;Ali&quot;,\n&quot;lastName&quot;: &quot;Ali&quot;,\n&quot;email&quot;: &quot;nilerumi@socam.me&quot;,\n&quot;password&quot;: &quot;password&quot;\n}`</p>\n<p>Could you advise why I would be getting such error?</p>\n<p>Here are the classes:</p>\n<p><strong>Registration Controller</strong></p>\n<pre><code>@RestController\n@RequestMapping(path = &quot;/api/v1/registration&quot;)\npublic class RegistrationController {\n\n    private final RegistrationService registrationService;\n\n    @Autowired\n    public RegistrationController(RegistrationService registrationService) {\n        this.registrationService = registrationService;\n    }\n\n    @PostMapping\n    public String register(@RequestBody RegistrationRequest request) {\n        return registrationService.register(request);\n    }\n\n    @GetMapping(path = &quot;confirm&quot;)\n    public String confirm(@RequestParam(&quot;token&quot;) String token) {\n        return registrationService.confirmToken(token);\n    }\n}\n</code></pre>\n<p><strong>Registration Service</strong></p>\n<pre><code>@Service\npublic class RegistrationService {\n\n    private final AppUserService appUserService;\n    private final EmailValidator emailValidator;\n    private final ConfirmationTokenService confirmTokenService;\n    private final EmailSender emailSender;\n\n\n    public RegistrationService(AppUserService appUserService, EmailValidator emailValidator, ConfirmationTokenService confirmTokenService, EmailSender emailSender) {\n        this.appUserService = appUserService;\n        this.emailValidator = emailValidator;\n        this.confirmTokenService = confirmTokenService;\n        this.emailSender = emailSender;\n    }\n\n    public String register(RegistrationRequest request) {\n        boolean isValidEmail = emailValidator.test(request.getEmail());\n        if (isValidEmail) {\n            String tokenForNewUser = appUserService.signUpUser(new AppUser(request.getFirstName(),\n                    request.getLastName(),\n                    request.getEmail(),\n                    request.getPassword(),\n                    AppUserRole.USER));\n\n            //Since, we are running the spring boot application in localhost, we are hardcoding the\n            //url of the server. We are creating a POST request with token param\n            String link = &quot;http://localhost:8090/api/v1/registration/confirm?token=&quot; + tokenForNewUser;\n            emailSender.sendEmail(request.getEmail(), buildEmail(request.getFirstName(), link));\n            return tokenForNewUser;\n        } else {\n            throw new IllegalStateException(String.format(&quot;Email %s, not valid&quot;, request.getEmail()));\n        }\n    }\n\n\n    @Transactional\n    public String confirmToken(String token) {\n        ConfirmationToken confirmationToken = confirmTokenService\n                .getToken(token)\n                .orElseThrow(() -&gt;\n                        new IllegalStateException(&quot;Token Not Found&quot;));\n\n        if (confirmationToken.getConfirmedAt() != null) {\n            throw new IllegalStateException(&quot;Email Already Confirmed&quot;);\n        }\n\n        LocalDateTime expiredAt = confirmationToken.getExpiresAt();\n\n        if (expiredAt.isBefore(LocalDateTime.now())) {\n            throw new IllegalStateException(&quot;token expired&quot;);\n        }\n\n        confirmTokenService.setConfirmedAt(token);\n        appUserService.enableAppUser(\n                confirmationToken.getAppUser().getEmail());\n        return &quot;confirmed&quot;;\n    }\n\n    private String buildEmail(String name, String link) {\n        return &quot;&lt;div style=\\&quot;font-family:Helvetica,Arial,sans-serif;font-size:16px;margin:0;color:#0b0c0c\\&quot;&gt;\\n&quot; +\n                &quot;\\n&quot; +\n                &quot;&lt;span style=\\&quot;display:none;font-size:1px;color:#fff;max-height:0\\&quot;&gt;&lt;/span&gt;\\n&quot; +\n                &quot;\\n&quot; +\n                &quot;  &lt;table role=\\&quot;presentation\\&quot; width=\\&quot;100%\\&quot; style=\\&quot;border-collapse:collapse;min-width:100%;width:100%!important\\&quot; cellpadding=\\&quot;0\\&quot; cellspacing=\\&quot;0\\&quot; border=\\&quot;0\\&quot;&gt;\\n&quot; +\n                &quot;    &lt;tbody&gt;&lt;tr&gt;\\n&quot; +\n                &quot;      &lt;td width=\\&quot;100%\\&quot; height=\\&quot;53\\&quot; bgcolor=\\&quot;#0b0c0c\\&quot;&gt;\\n&quot; +\n                &quot;        \\n&quot; +\n                &quot;        &lt;table role=\\&quot;presentation\\&quot; width=\\&quot;100%\\&quot; style=\\&quot;border-collapse:collapse;max-width:580px\\&quot; cellpadding=\\&quot;0\\&quot; cellspacing=\\&quot;0\\&quot; border=\\&quot;0\\&quot; align=\\&quot;center\\&quot;&gt;\\n&quot; +\n                &quot;          &lt;tbody&gt;&lt;tr&gt;\\n&quot; +\n                &quot;            &lt;td width=\\&quot;70\\&quot; bgcolor=\\&quot;#0b0c0c\\&quot; valign=\\&quot;middle\\&quot;&gt;\\n&quot; +\n                &quot;                &lt;table role=\\&quot;presentation\\&quot; cellpadding=\\&quot;0\\&quot; cellspacing=\\&quot;0\\&quot; border=\\&quot;0\\&quot; style=\\&quot;border-collapse:collapse\\&quot;&gt;\\n&quot; +\n                &quot;                  &lt;tbody&gt;&lt;tr&gt;\\n&quot; +\n                &quot;                    &lt;td style=\\&quot;padding-left:10px\\&quot;&gt;\\n&quot; +\n                &quot;                  \\n&quot; +\n                &quot;                    &lt;/td&gt;\\n&quot; +\n                &quot;                    &lt;td style=\\&quot;font-size:28px;line-height:1.315789474;Margin-top:4px;padding-left:10px\\&quot;&gt;\\n&quot; +\n                &quot;                      &lt;span style=\\&quot;font-family:Helvetica,Arial,sans-serif;font-weight:700;color:#ffffff;text-decoration:none;vertical-align:top;display:inline-block\\&quot;&gt;Confirm your email&lt;/span&gt;\\n&quot; +\n                &quot;                    &lt;/td&gt;\\n&quot; +\n                &quot;                  &lt;/tr&gt;\\n&quot; +\n                &quot;                &lt;/tbody&gt;&lt;/table&gt;\\n&quot; +\n                &quot;              &lt;/a&gt;\\n&quot; +\n                &quot;            &lt;/td&gt;\\n&quot; +\n                &quot;          &lt;/tr&gt;\\n&quot; +\n                &quot;        &lt;/tbody&gt;&lt;/table&gt;\\n&quot; +\n                &quot;        \\n&quot; +\n                &quot;      &lt;/td&gt;\\n&quot; +\n                &quot;    &lt;/tr&gt;\\n&quot; +\n                &quot;  &lt;/tbody&gt;&lt;/table&gt;\\n&quot; +\n                &quot;  &lt;table role=\\&quot;presentation\\&quot; class=\\&quot;m_-6186904992287805515content\\&quot; align=\\&quot;center\\&quot; cellpadding=\\&quot;0\\&quot; cellspacing=\\&quot;0\\&quot; border=\\&quot;0\\&quot; style=\\&quot;border-collapse:collapse;max-width:580px;width:100%!important\\&quot; width=\\&quot;100%\\&quot;&gt;\\n&quot; +\n                &quot;    &lt;tbody&gt;&lt;tr&gt;\\n&quot; +\n                &quot;      &lt;td width=\\&quot;10\\&quot; height=\\&quot;10\\&quot; valign=\\&quot;middle\\&quot;&gt;&lt;/td&gt;\\n&quot; +\n                &quot;      &lt;td&gt;\\n&quot; +\n                &quot;        \\n&quot; +\n                &quot;                &lt;table role=\\&quot;presentation\\&quot; width=\\&quot;100%\\&quot; cellpadding=\\&quot;0\\&quot; cellspacing=\\&quot;0\\&quot; border=\\&quot;0\\&quot; style=\\&quot;border-collapse:collapse\\&quot;&gt;\\n&quot; +\n                &quot;                  &lt;tbody&gt;&lt;tr&gt;\\n&quot; +\n                &quot;                    &lt;td bgcolor=\\&quot;#1D70B8\\&quot; width=\\&quot;100%\\&quot; height=\\&quot;10\\&quot;&gt;&lt;/td&gt;\\n&quot; +\n                &quot;                  &lt;/tr&gt;\\n&quot; +\n                &quot;                &lt;/tbody&gt;&lt;/table&gt;\\n&quot; +\n                &quot;        \\n&quot; +\n                &quot;      &lt;/td&gt;\\n&quot; +\n                &quot;      &lt;td width=\\&quot;10\\&quot; valign=\\&quot;middle\\&quot; height=\\&quot;10\\&quot;&gt;&lt;/td&gt;\\n&quot; +\n                &quot;    &lt;/tr&gt;\\n&quot; +\n                &quot;  &lt;/tbody&gt;&lt;/table&gt;\\n&quot; +\n                &quot;\\n&quot; +\n                &quot;\\n&quot; +\n                &quot;\\n&quot; +\n                &quot;  &lt;table role=\\&quot;presentation\\&quot; class=\\&quot;m_-6186904992287805515content\\&quot; align=\\&quot;center\\&quot; cellpadding=\\&quot;0\\&quot; cellspacing=\\&quot;0\\&quot; border=\\&quot;0\\&quot; style=\\&quot;border-collapse:collapse;max-width:580px;width:100%!important\\&quot; width=\\&quot;100%\\&quot;&gt;\\n&quot; +\n                &quot;    &lt;tbody&gt;&lt;tr&gt;\\n&quot; +\n                &quot;      &lt;td height=\\&quot;30\\&quot;&gt;&lt;br&gt;&lt;/td&gt;\\n&quot; +\n                &quot;    &lt;/tr&gt;\\n&quot; +\n                &quot;    &lt;tr&gt;\\n&quot; +\n                &quot;      &lt;td width=\\&quot;10\\&quot; valign=\\&quot;middle\\&quot;&gt;&lt;br&gt;&lt;/td&gt;\\n&quot; +\n                &quot;      &lt;td style=\\&quot;font-family:Helvetica,Arial,sans-serif;font-size:19px;line-height:1.315789474;max-width:560px\\&quot;&gt;\\n&quot; +\n                &quot;        \\n&quot; +\n                &quot;            &lt;p style=\\&quot;Margin:0 0 20px 0;font-size:19px;line-height:25px;color:#0b0c0c\\&quot;&gt;Hi &quot; + name + &quot;,&lt;/p&gt;&lt;p style=\\&quot;Margin:0 0 20px 0;font-size:19px;line-height:25px;color:#0b0c0c\\&quot;&gt; Thank you for registering. Please click on the below link to activate your account: &lt;/p&gt;&lt;blockquote style=\\&quot;Margin:0 0 20px 0;border-left:10px solid #b1b4b6;padding:15px 0 0.1px 15px;font-size:19px;line-height:25px\\&quot;&gt;&lt;p style=\\&quot;Margin:0 0 20px 0;font-size:19px;line-height:25px;color:#0b0c0c\\&quot;&gt; &lt;a href=\\&quot;&quot; + link + &quot;\\&quot;&gt;Activate Now&lt;/a&gt; &lt;/p&gt;&lt;/blockquote&gt;\\n Link will expire in 15 minutes. &lt;p&gt;See you soon&lt;/p&gt;&quot; +\n                &quot;        \\n&quot; +\n                &quot;      &lt;/td&gt;\\n&quot; +\n                &quot;      &lt;td width=\\&quot;10\\&quot; valign=\\&quot;middle\\&quot;&gt;&lt;br&gt;&lt;/td&gt;\\n&quot; +\n                &quot;    &lt;/tr&gt;\\n&quot; +\n                &quot;    &lt;tr&gt;\\n&quot; +\n                &quot;      &lt;td height=\\&quot;30\\&quot;&gt;&lt;br&gt;&lt;/td&gt;\\n&quot; +\n                &quot;    &lt;/tr&gt;\\n&quot; +\n                &quot;  &lt;/tbody&gt;&lt;/table&gt;&lt;div class=\\&quot;yj6qo\\&quot;&gt;&lt;/div&gt;&lt;div class=\\&quot;adL\\&quot;&gt;\\n&quot; +\n                &quot;\\n&quot; +\n                &quot;&lt;/div&gt;&lt;/div&gt;&quot;;\n    }\n}\n</code></pre>\n<p><strong>WebSecurityConfig</strong></p>\n<pre><code>@Configuration\n@AllArgsConstructor\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n    private final AppUserService appUserService;\n    private final BCryptPasswordEncoder bCryptPasswordEncoder;\n\n    @Bean\n    protected SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity\n                .authenticationProvider(daoAuthenticationProvider())\n                .authorizeHttpRequests().requestMatchers(&quot;/api/v*/registration/**&quot;)\n                .permitAll()\n                .anyRequest()\n                .authenticated().and()\n                .formLogin();\n        return httpSecurity.build();\n    }\n\n    @Bean\n    protected AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    @Bean\n    public DaoAuthenticationProvider daoAuthenticationProvider() {\n        DaoAuthenticationProvider provider = new DaoAuthenticationProvider();\n        provider.setPasswordEncoder(bCryptPasswordEncoder);\n        provider.setUserDetailsService(appUserService);\n        return provider;\n    }\n\n}\n</code></pre>\n<p><strong>Confirmation Token</strong></p>\n<pre><code>@Getter\n@Setter\n@Entity\n@AllArgsConstructor\npublic class ConfirmationToken {\n\n    @Id\n    @GeneratedValue (strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false)\n    private String token;\n\n    @Column(nullable = false)\n    private LocalDateTime createdAt;\n\n    @Column(nullable = false)\n    private LocalDateTime expiresAt;\n\n    private LocalDateTime confirmedAt;\n\n    @ManyToOne\n    @JoinColumn(nullable = false,\n            name = &quot;app_user_id&quot;)\n    private AppUser appUser;\n\n    public ConfirmationToken() {\n    }\n\n    public ConfirmationToken(String token, LocalDateTime createdAt, LocalDateTime expiresAt, AppUser appUser) {\n        this.token = token;\n        this.createdAt = createdAt;\n        this.expiresAt = expiresAt;\n        this.appUser = appUser;\n    }\n}\n\n</code></pre>\n<p>Have checked the pom.xml file seems ok with the dependencies\nHave checked the application.yaml\nIn the current setup I had to use allow-bean-definition-overriding: true in yaml.</p>\n"},{"tags":["java","spring","spring-boot","spring-security","rbac"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697029174,"post_id":77272954,"comment_id":136227796,"body_markdown":"1. Ordering matters. The order in which rules are declared is also the rule in which they are consulted. So `.antMatchers(&quot;/api/v1/cards/*&quot;).hasRole(&quot;CUSTOMER&quot;)` also applies to the PUT one already. 2. You are only allowing `ROLE_CUSTOMER`, you want to write your own expression with the `access()` method, something like `access(&quot;hasRole(&#39;CUSTOMER&#39;) or isAuthenticated()&quot;`;","body":"1. Ordering matters. The order in which rules are declared is also the rule in which they are consulted. So <code>.antMatchers(&quot;&#47;api&#47;v1&#47;cards&#47;*&quot;).hasRole(&quot;CUSTOMER&quot;)</code> also applies to the PUT one already. 2. You are only allowing <code>ROLE_CUSTOMER</code>, you want to write your own expression with the <code>access()</code> method, something like <code>access(&quot;hasRole(&#39;CUSTOMER&#39;) or isAuthenticated()&quot;</code>;"},{"owner":{"account_id":11436907,"reputation":625,"user_id":8384029,"accept_rate":40,"display_name":"Mohamed Aoutir"},"score":0,"creation_date":1697036175,"post_id":77272954,"comment_id":136229429,"body_markdown":"@M.Deinum Could you give me your new code snippet in the answer please ?","body":"@M.Deinum Could you give me your new code snippet in the answer please ?"}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697088542,"creation_date":1697088542,"answer_id":77277913,"question_id":77272954,"body_markdown":"When writing Spring Security matching rules the order of the rules matter as the order in which they are defined is also the order in which they are consulted!. So `.antMatchers(&quot;/api/v1/cards/*&quot;).hasRole(&quot;CUSTOMER&quot;)` also applies to the PUT one (below this one) already.\r\n\r\nNext it your security rule is &quot;allow access to all authenticated users or hasRole Customer&quot; then write that rule. Use something like `access(&quot;hasRole(&#39;CUSTOMER&#39;) or isAuthenticated())`. Although this rule is a bit weird as only `isAuthenticated` would do the trick as well in this specific case. ","title":"Allow a specific role to access a limited set of URI but let the remaining roles to access to all URI","body":"<p>When writing Spring Security matching rules the order of the rules matter as the order in which they are defined is also the order in which they are consulted!. So <code>.antMatchers(&quot;/api/v1/cards/*&quot;).hasRole(&quot;CUSTOMER&quot;)</code> also applies to the PUT one (below this one) already.</p>\n<p>Next it your security rule is &quot;allow access to all authenticated users or hasRole Customer&quot; then write that rule. Use something like <code>access(&quot;hasRole('CUSTOMER') or isAuthenticated())</code>. Although this rule is a bit weird as only <code>isAuthenticated</code> would do the trick as well in this specific case.</p>\n"}],"owner":{"account_id":11436907,"reputation":625,"user_id":8384029,"accept_rate":40,"display_name":"Mohamed Aoutir"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77277913,"answer_count":1,"score":0,"last_activity_date":1697088542,"creation_date":1697026380,"question_id":77272954,"body_markdown":"I&#39;m facing a problem in authorizing a user with role **ROLE_CUSTOMER** to access just to these set of URI as listed below:\r\n\r\n    POST /api/v1/beneficiaries/check \r\n    GET /api/v1/accounts/{accountId}/beneficiary-accounts  \r\n    GET /api/v1/accounts/{idAccount} \r\n    GET /api/v1/cards/{cardId}\r\n    PUT /api/v1/cards/{cardId}/deactivate\r\n\r\nbut not for the remaining URI\r\n\r\nand allow the other users with roles (ROLE_API, ROLE_USER) to access all URI, they should be just authenticated.\r\n\r\nHow I can achieve that just with antMatchers config.\r\n\r\nI have tried for several times with the below config:\r\n\r\n    @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                    .csrf().disable()\r\n                    .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\r\n                    .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                    .authorizeRequests()\r\n                    .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll()\r\n                    .antMatchers(&quot;/api/v1/api-docs/**&quot;).permitAll()\r\n                    .antMatchers(&quot;/api/v1/api-docs**&quot;).permitAll()\r\n                    .antMatchers(&quot;/api/v1/auth&quot;).permitAll()\r\n                    .antMatchers(&quot;/api/v1/auth-dejamobile&quot;).permitAll()\r\n                    .antMatchers(&quot;/api/v1/hc&quot;).permitAll()\r\n                    .antMatchers(&quot;/api/v1/dictionaries/**&quot;).permitAll()\r\n                    .and()\r\n                    .authorizeRequests()\r\n                    .antMatchers(HttpMethod.POST, &quot;/api/v1/beneficiaries/check&quot;).hasRole(&quot;CUSTOMER&quot;)\r\n                    .antMatchers(&quot;/api/v1/accounts/*/beneficiary-accounts&quot;).hasRole(&quot;CUSTOMER&quot;)\r\n                    .antMatchers(&quot;/api/v1/accounts/*&quot;).hasRole(&quot;CUSTOMER&quot;)\r\n                    .antMatchers(&quot;/api/v1/cards/*&quot;).hasRole(&quot;CUSTOMER&quot;)\r\n                    .antMatchers(HttpMethod.PUT,&quot;/api/v1/cards/*/deactivate&quot;).hasRole(&quot;CUSTOMER&quot;)\r\n                    .and()\r\n                    .authorizeRequests()\r\n                    .antMatchers(&quot;/**&quot;).not().hasRole(&quot;CUSTOMER&quot;)\r\n                    .anyRequest().authenticated();\r\n    \r\n    \r\n            http\r\n            .addFilterBefore(authenticationTokenFilterBean(), UsernamePasswordAuthenticationFilter.class);\r\n        }\r\n\r\nbut the **ROLE_API** and **ROLE_USER** haven&#39;t access to the five URI as described above, and **ROLE_CUSTOMER** hasn&#39;t access to ***PUT /api/v1/cards/{cardId}/deactivate*** !!\r\n\r\nAny help is very appreciated.","title":"Allow a specific role to access a limited set of URI but let the remaining roles to access to all URI","body":"<p>I'm facing a problem in authorizing a user with role <strong>ROLE_CUSTOMER</strong> to access just to these set of URI as listed below:</p>\n<pre><code>POST /api/v1/beneficiaries/check \nGET /api/v1/accounts/{accountId}/beneficiary-accounts  \nGET /api/v1/accounts/{idAccount} \nGET /api/v1/cards/{cardId}\nPUT /api/v1/cards/{cardId}/deactivate\n</code></pre>\n<p>but not for the remaining URI</p>\n<p>and allow the other users with roles (ROLE_API, ROLE_USER) to access all URI, they should be just authenticated.</p>\n<p>How I can achieve that just with antMatchers config.</p>\n<p>I have tried for several times with the below config:</p>\n<pre><code>@Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .csrf().disable()\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                .authorizeRequests()\n                .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll()\n                .antMatchers(&quot;/api/v1/api-docs/**&quot;).permitAll()\n                .antMatchers(&quot;/api/v1/api-docs**&quot;).permitAll()\n                .antMatchers(&quot;/api/v1/auth&quot;).permitAll()\n                .antMatchers(&quot;/api/v1/auth-dejamobile&quot;).permitAll()\n                .antMatchers(&quot;/api/v1/hc&quot;).permitAll()\n                .antMatchers(&quot;/api/v1/dictionaries/**&quot;).permitAll()\n                .and()\n                .authorizeRequests()\n                .antMatchers(HttpMethod.POST, &quot;/api/v1/beneficiaries/check&quot;).hasRole(&quot;CUSTOMER&quot;)\n                .antMatchers(&quot;/api/v1/accounts/*/beneficiary-accounts&quot;).hasRole(&quot;CUSTOMER&quot;)\n                .antMatchers(&quot;/api/v1/accounts/*&quot;).hasRole(&quot;CUSTOMER&quot;)\n                .antMatchers(&quot;/api/v1/cards/*&quot;).hasRole(&quot;CUSTOMER&quot;)\n                .antMatchers(HttpMethod.PUT,&quot;/api/v1/cards/*/deactivate&quot;).hasRole(&quot;CUSTOMER&quot;)\n                .and()\n                .authorizeRequests()\n                .antMatchers(&quot;/**&quot;).not().hasRole(&quot;CUSTOMER&quot;)\n                .anyRequest().authenticated();\n\n\n        http\n        .addFilterBefore(authenticationTokenFilterBean(), UsernamePasswordAuthenticationFilter.class);\n    }\n</code></pre>\n<p>but the <strong>ROLE_API</strong> and <strong>ROLE_USER</strong> haven't access to the five URI as described above, and <strong>ROLE_CUSTOMER</strong> hasn't access to <em><strong>PUT /api/v1/cards/{cardId}/deactivate</strong></em> !!</p>\n<p>Any help is very appreciated.</p>\n"},{"tags":["java","string","split"],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":2,"up_vote_count":3371,"is_accepted":true,"score":3369,"last_activity_date":1658706338,"creation_date":1281755134,"answer_id":3481842,"question_id":3481828,"body_markdown":"Use the appropriately named method [`String#split()`][1].\r\n\r\n    String string = &quot;004-034556&quot;;\r\n    String[] parts = string.split(&quot;-&quot;);\r\n    String part1 = parts[0]; // 004\r\n    String part2 = parts[1]; // 034556\r\n\r\nNote that `split`&#39;s argument is assumed to be a [regular expression][2], so remember to escape [special characters][3] if necessary.\r\n\r\n&gt; [there][3] are 12 characters with special meanings: the backslash `\\`, the caret `^`, the dollar sign `$`, the period or dot `.`, the vertical bar or pipe symbol `|`, the question mark `?`, the asterisk or star `*`, the plus sign `+`, the opening parenthesis `(`, the closing parenthesis `)`, and the opening square bracket `[`, the opening curly brace `{`, These special characters are often called &quot;metacharacters&quot;.\r\n\r\nFor instance, to split on a period/dot `.` (which means &quot;[any character][4]&quot; in regex), use either [backslash `\\`][3] to escape the individual special character like so `split(&quot;\\\\.&quot;)`, or use [character class `[]`][5] to represent literal character(s) like so `split(&quot;[.]&quot;)`, or use [`Pattern#quote()`][6] to escape the entire string like so `split(Pattern.quote(&quot;.&quot;))`.\r\n\r\n    String[] parts = string.split(Pattern.quote(&quot;.&quot;)); // Split on the exact string.\r\n\r\nTo test beforehand if the string contains certain character(s), just use [`String#contains()`][7].\r\n\r\n    if (string.contains(&quot;-&quot;)) {\r\n        // Split it.\r\n    } else {\r\n        throw new IllegalArgumentException(&quot;String &quot; + string + &quot; does not contain -&quot;);\r\n    }\r\n\r\nNote, this does not take a regular expression. For that, use [`String#matches()`][8] instead.\r\n\r\nIf you&#39;d like to retain the split character in the resulting parts, then make use of [positive lookaround][9]. In case you want to have the split character to end up in left hand side, use positive lookbehind by prefixing `?&lt;=` group on the pattern.\r\n\r\n    String string = &quot;004-034556&quot;;\r\n    String[] parts = string.split(&quot;(?&lt;=-)&quot;);\r\n    String part1 = parts[0]; // 004-\r\n    String part2 = parts[1]; // 034556\r\n\r\nIn case you want to have the split character to end up in right hand side, use positive lookahead by prefixing `?=` group on the pattern.\r\n\r\n    String string = &quot;004-034556&quot;;\r\n    String[] parts = string.split(&quot;(?=-)&quot;);\r\n    String part1 = parts[0]; // 004\r\n    String part2 = parts[1]; // -034556\r\n\r\nIf you&#39;d like to limit the number of resulting parts, then you can supply the desired number as 2nd argument of `split()` method. \r\n\r\n    String string = &quot;004-034556-42&quot;;\r\n    String[] parts = string.split(&quot;-&quot;, 2);\r\n    String part1 = parts[0]; // 004\r\n    String part2 = parts[1]; // 034556-42\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#split(java.lang.String)\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html#sum\r\n  [3]: https://www.regular-expressions.info/characters.html\r\n  [4]: https://www.regular-expressions.info/dot.html\r\n  [5]: https://www.regular-expressions.info/charclass.html\r\n  [6]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html#quote(java.lang.String)\r\n  [7]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#contains(java.lang.CharSequence)\r\n  [8]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#matches(java.lang.String)\r\n  [9]: https://www.regular-expressions.info/lookaround.html","title":"How do I split a string in Java?","body":"<p>Use the appropriately named method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#split(java.lang.String)\" rel=\"noreferrer\"><code>String#split()</code></a>.</p>\n<pre><code>String string = &quot;004-034556&quot;;\nString[] parts = string.split(&quot;-&quot;);\nString part1 = parts[0]; // 004\nString part2 = parts[1]; // 034556\n</code></pre>\n<p>Note that <code>split</code>'s argument is assumed to be a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html#sum\" rel=\"noreferrer\">regular expression</a>, so remember to escape <a href=\"https://www.regular-expressions.info/characters.html\" rel=\"noreferrer\">special characters</a> if necessary.</p>\n<blockquote>\n<p><a href=\"https://www.regular-expressions.info/characters.html\" rel=\"noreferrer\">there</a> are 12 characters with special meanings: the backslash <code>\\</code>, the caret <code>^</code>, the dollar sign <code>$</code>, the period or dot <code>.</code>, the vertical bar or pipe symbol <code>|</code>, the question mark <code>?</code>, the asterisk or star <code>*</code>, the plus sign <code>+</code>, the opening parenthesis <code>(</code>, the closing parenthesis <code>)</code>, and the opening square bracket <code>[</code>, the opening curly brace <code>{</code>, These special characters are often called &quot;metacharacters&quot;.</p>\n</blockquote>\n<p>For instance, to split on a period/dot <code>.</code> (which means &quot;<a href=\"https://www.regular-expressions.info/dot.html\" rel=\"noreferrer\">any character</a>&quot; in regex), use either <a href=\"https://www.regular-expressions.info/characters.html\" rel=\"noreferrer\">backslash <code>\\</code></a> to escape the individual special character like so <code>split(&quot;\\\\.&quot;)</code>, or use <a href=\"https://www.regular-expressions.info/charclass.html\" rel=\"noreferrer\">character class <code>[]</code></a> to represent literal character(s) like so <code>split(&quot;[.]&quot;)</code>, or use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html#quote(java.lang.String)\" rel=\"noreferrer\"><code>Pattern#quote()</code></a> to escape the entire string like so <code>split(Pattern.quote(&quot;.&quot;))</code>.</p>\n<pre><code>String[] parts = string.split(Pattern.quote(&quot;.&quot;)); // Split on the exact string.\n</code></pre>\n<p>To test beforehand if the string contains certain character(s), just use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#contains(java.lang.CharSequence)\" rel=\"noreferrer\"><code>String#contains()</code></a>.</p>\n<pre><code>if (string.contains(&quot;-&quot;)) {\n    // Split it.\n} else {\n    throw new IllegalArgumentException(&quot;String &quot; + string + &quot; does not contain -&quot;);\n}\n</code></pre>\n<p>Note, this does not take a regular expression. For that, use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#matches(java.lang.String)\" rel=\"noreferrer\"><code>String#matches()</code></a> instead.</p>\n<p>If you'd like to retain the split character in the resulting parts, then make use of <a href=\"https://www.regular-expressions.info/lookaround.html\" rel=\"noreferrer\">positive lookaround</a>. In case you want to have the split character to end up in left hand side, use positive lookbehind by prefixing <code>?&lt;=</code> group on the pattern.</p>\n<pre><code>String string = &quot;004-034556&quot;;\nString[] parts = string.split(&quot;(?&lt;=-)&quot;);\nString part1 = parts[0]; // 004-\nString part2 = parts[1]; // 034556\n</code></pre>\n<p>In case you want to have the split character to end up in right hand side, use positive lookahead by prefixing <code>?=</code> group on the pattern.</p>\n<pre><code>String string = &quot;004-034556&quot;;\nString[] parts = string.split(&quot;(?=-)&quot;);\nString part1 = parts[0]; // 004\nString part2 = parts[1]; // -034556\n</code></pre>\n<p>If you'd like to limit the number of resulting parts, then you can supply the desired number as 2nd argument of <code>split()</code> method.</p>\n<pre><code>String string = &quot;004-034556-42&quot;;\nString[] parts = string.split(&quot;-&quot;, 2);\nString part1 = parts[0]; // 004\nString part2 = parts[1]; // 034556-42\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1604767396,"creation_date":1281755169,"answer_id":3481843,"question_id":3481828,"body_markdown":"Use:\r\n\r\n    String[] result = yourString.split(&quot;-&quot;);\r\n    if (result.length != 2) \r\n         throw new IllegalArgumentException(&quot;String not in correct format&quot;);\r\n\r\nThis will split your string into two parts. The first element in the array will be the part containing the stuff before the `-`, and the second element in the array will contain the part of your string after the `-`.\r\n\r\nIf the array length is not 2, then the string was not in the format: `string-string`.\r\n\r\nCheck out the [split()][1] method in the `String` class.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-\r\n","title":"How do I split a string in Java?","body":"<p>Use:</p>\n<pre><code>String[] result = yourString.split(&quot;-&quot;);\nif (result.length != 2) \n     throw new IllegalArgumentException(&quot;String not in correct format&quot;);\n</code></pre>\n<p>This will split your string into two parts. The first element in the array will be the part containing the stuff before the <code>-</code>, and the second element in the array will contain the part of your string after the <code>-</code>.</p>\n<p>If the array length is not 2, then the string was not in the format: <code>string-string</code>.</p>\n<p>Check out the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-\" rel=\"noreferrer\">split()</a> method in the <code>String</code> class.</p>\n"},{"tags":[],"owner":{"account_id":116185,"reputation":7719,"user_id":304778,"accept_rate":74,"display_name":"secmask"},"down_vote_count":1,"up_vote_count":39,"is_accepted":false,"score":38,"last_activity_date":1635757045,"creation_date":1281755181,"answer_id":3481845,"question_id":3481828,"body_markdown":"This:\r\n\r\n    String[] out = string.split(&quot;-&quot;);\r\n\r\nshould do the thing you want. The *string* class has many method to operate with a string.\r\n","title":"How do I split a string in Java?","body":"<p>This:</p>\n<pre><code>String[] out = string.split(&quot;-&quot;);\n</code></pre>\n<p>should do the thing you want. The <em>string</em> class has many method to operate with a string.</p>\n"},{"tags":[],"owner":{"account_id":117745,"reputation":5429,"user_id":308219,"display_name":"Michael Konietzka"},"down_vote_count":2,"up_vote_count":21,"is_accepted":false,"score":19,"last_activity_date":1426927789,"creation_date":1281769030,"answer_id":3482361,"question_id":3481828,"body_markdown":"The requirements left room for interpretation. I recommend writing a method,\r\n\r\n    public final static String[] mySplit(final String s)\r\n\r\nwhich encapsulate this function. Of course you can use String.split(..) as mentioned in the other answers for the implementation.\r\n\r\nYou should write some unit-tests for input strings and the desired results and behaviour.\r\n\r\nGood test candidates should include:\r\n\r\n     - &quot;0022-3333&quot;\r\n     - &quot;-&quot;\r\n     - &quot;5555-&quot;\r\n     - &quot;-333&quot;\r\n     - &quot;3344-&quot;\r\n     - &quot;--&quot;\r\n     - &quot;&quot;\r\n     - &quot;553535&quot;\r\n     - &quot;333-333-33&quot;\r\n     - &quot;222--222&quot;\r\n     - &quot;222--&quot;\r\n     - &quot;--4555&quot;\r\n\r\nWith defining the according test results, you can specify the behaviour.\r\n\r\nFor example, if `&quot;-333&quot;` should return in `[,333]` or if it is an error.\r\nCan `&quot;333-333-33&quot;` be separated in `[333,333-33] or [333-333,33]` or is it an error? And so on.\r\n","title":"How do I split a string in Java?","body":"<p>The requirements left room for interpretation. I recommend writing a method,</p>\n\n<pre><code>public final static String[] mySplit(final String s)\n</code></pre>\n\n<p>which encapsulate this function. Of course you can use String.split(..) as mentioned in the other answers for the implementation.</p>\n\n<p>You should write some unit-tests for input strings and the desired results and behaviour.</p>\n\n<p>Good test candidates should include:</p>\n\n<pre><code> - \"0022-3333\"\n - \"-\"\n - \"5555-\"\n - \"-333\"\n - \"3344-\"\n - \"--\"\n - \"\"\n - \"553535\"\n - \"333-333-33\"\n - \"222--222\"\n - \"222--\"\n - \"--4555\"\n</code></pre>\n\n<p>With defining the according test results, you can specify the behaviour.</p>\n\n<p>For example, if <code>\"-333\"</code> should return in <code>[,333]</code> or if it is an error.\nCan <code>\"333-333-33\"</code> be separated in <code>[333,333-33] or [333-333,33]</code> or is it an error? And so on.</p>\n"},{"tags":[],"owner":{"account_id":74899,"reputation":1409,"user_id":215009,"display_name":"Rob Hague"},"down_vote_count":0,"up_vote_count":89,"is_accepted":false,"score":89,"last_activity_date":1500307783,"creation_date":1281785319,"answer_id":3483070,"question_id":3481828,"body_markdown":"An alternative to processing the string directly would be to use a regular expression with capturing groups. This has the advantage that it makes it straightforward to imply more sophisticated constraints on the input. For example, the following splits the string into two parts, and ensures that both consist only of digits:\r\n\r\n    import java.util.regex.Pattern;\r\n    import java.util.regex.Matcher;\r\n\r\n    class SplitExample\r\n    {\r\n        private static Pattern twopart = Pattern.compile(&quot;(\\\\d+)-(\\\\d+)&quot;);\r\n\r\n        public static void checkString(String s)\r\n        {\r\n            Matcher m = twopart.matcher(s);\r\n            if (m.matches()) {\r\n                System.out.println(s + &quot; matches; first part is &quot; + m.group(1) +\r\n                                   &quot;, second part is &quot; + m.group(2) + &quot;.&quot;);\r\n            } else {\r\n                System.out.println(s + &quot; does not match.&quot;);\r\n            }\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            checkString(&quot;123-4567&quot;);\r\n            checkString(&quot;foo-bar&quot;);\r\n            checkString(&quot;123-&quot;);\r\n            checkString(&quot;-4567&quot;);\r\n            checkString(&quot;123-4567-890&quot;);\r\n        }\r\n    }\r\n\r\nAs the pattern is fixed in this instance, it can be compiled in advance and stored as a static member (initialised at class load time in the example). The regular expression is:\r\n\r\n    (\\d+)-(\\d+)\r\n\r\nThe parentheses denote the capturing groups; the string that matched that part of the regexp can be accessed by the Match.group() method, as shown. The \\d matches and single decimal digit, and the + means &quot;match one or more of the previous expression). The - has no special meaning, so just matches that character in the input. Note that you need to double-escape the backslashes when writing this as a Java string. Some other examples:\r\n\r\n    ([A-Z]+)-([A-Z]+)          // Each part consists of only capital letters \r\n    ([^-]+)-([^-]+)            // Each part consists of characters other than -\r\n    ([A-Z]{2})-(\\d+)           // The first part is exactly two capital letters,\r\n                               // the second consists of digits","title":"How do I split a string in Java?","body":"<p>An alternative to processing the string directly would be to use a regular expression with capturing groups. This has the advantage that it makes it straightforward to imply more sophisticated constraints on the input. For example, the following splits the string into two parts, and ensures that both consist only of digits:</p>\n\n<pre><code>import java.util.regex.Pattern;\nimport java.util.regex.Matcher;\n\nclass SplitExample\n{\n    private static Pattern twopart = Pattern.compile(\"(\\\\d+)-(\\\\d+)\");\n\n    public static void checkString(String s)\n    {\n        Matcher m = twopart.matcher(s);\n        if (m.matches()) {\n            System.out.println(s + \" matches; first part is \" + m.group(1) +\n                               \", second part is \" + m.group(2) + \".\");\n        } else {\n            System.out.println(s + \" does not match.\");\n        }\n    }\n\n    public static void main(String[] args) {\n        checkString(\"123-4567\");\n        checkString(\"foo-bar\");\n        checkString(\"123-\");\n        checkString(\"-4567\");\n        checkString(\"123-4567-890\");\n    }\n}\n</code></pre>\n\n<p>As the pattern is fixed in this instance, it can be compiled in advance and stored as a static member (initialised at class load time in the example). The regular expression is:</p>\n\n<pre><code>(\\d+)-(\\d+)\n</code></pre>\n\n<p>The parentheses denote the capturing groups; the string that matched that part of the regexp can be accessed by the Match.group() method, as shown. The \\d matches and single decimal digit, and the + means \"match one or more of the previous expression). The - has no special meaning, so just matches that character in the input. Note that you need to double-escape the backslashes when writing this as a Java string. Some other examples:</p>\n\n<pre><code>([A-Z]+)-([A-Z]+)          // Each part consists of only capital letters \n([^-]+)-([^-]+)            // Each part consists of characters other than -\n([A-Z]{2})-(\\d+)           // The first part is exactly two capital letters,\n                           // the second consists of digits\n</code></pre>\n"},{"tags":[],"owner":{"account_id":287366,"reputation":1253,"user_id":587134,"display_name":"Mnyikka"},"down_vote_count":6,"up_vote_count":37,"is_accepted":false,"score":31,"last_activity_date":1398285915,"creation_date":1353047454,"answer_id":13411591,"question_id":3481828,"body_markdown":"    // This leaves the regexes issue out of question\r\n    // But we must remember that each character in the Delimiter String is treated\r\n    // like a single delimiter        \r\n\r\n    public static String[] SplitUsingTokenizer(String subject, String delimiters) {\r\n       StringTokenizer strTkn = new StringTokenizer(subject, delimiters);\r\n       ArrayList&lt;String&gt; arrLis = new ArrayList&lt;String&gt;(subject.length());\r\n   \r\n       while(strTkn.hasMoreTokens())\r\n          arrLis.add(strTkn.nextToken());\r\n\r\n       return arrLis.toArray(new String[0]);\r\n    }","title":"How do I split a string in Java?","body":"<pre><code>// This leaves the regexes issue out of question\n// But we must remember that each character in the Delimiter String is treated\n// like a single delimiter        \n\npublic static String[] SplitUsingTokenizer(String subject, String delimiters) {\n   StringTokenizer strTkn = new StringTokenizer(subject, delimiters);\n   ArrayList&lt;String&gt; arrLis = new ArrayList&lt;String&gt;(subject.length());\n\n   while(strTkn.hasMoreTokens())\n      arrLis.add(strTkn.nextToken());\n\n   return arrLis.toArray(new String[0]);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2070008,"reputation":608,"user_id":1844709,"display_name":"SHUNMUGA RAJ PRABAKARAN"},"down_vote_count":2,"up_vote_count":19,"is_accepted":false,"score":17,"last_activity_date":1358243918,"creation_date":1358243918,"answer_id":14335132,"question_id":3481828,"body_markdown":"   You can try like this also\r\n\r\n\r\n     String concatenated_String=&quot;hi^Hello&quot;;\r\n        \r\n     String split_string_array[]=concatenated_String.split(&quot;\\\\^&quot;);","title":"How do I split a string in Java?","body":"<p>You can try like this also</p>\n\n<pre><code> String concatenated_String=\"hi^Hello\";\n\n String split_string_array[]=concatenated_String.split(\"\\\\^\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1128840,"reputation":2152,"user_id":1115406,"accept_rate":86,"display_name":"Akhilesh Dhar Dubey"},"down_vote_count":3,"up_vote_count":14,"is_accepted":false,"score":11,"last_activity_date":1503998979,"creation_date":1394907438,"answer_id":22427835,"question_id":3481828,"body_markdown":"    public class SplitTest {\r\n\r\n        public static String[] split(String text, String delimiter) {\r\n            java.util.List&lt;String&gt; parts = new java.util.ArrayList&lt;String&gt;();\r\n\r\n            text += delimiter;\r\n\r\n            for (int i = text.indexOf(delimiter), j=0; i != -1;) {\r\n                String temp = text.substring(j,i);\r\n                if(temp.trim().length() != 0) {\r\n                    parts.add(temp);\r\n                }\r\n                j = i + delimiter.length();\r\n                i = text.indexOf(delimiter,j);\r\n            }\r\n\r\n            return parts.toArray(new String[0]);\r\n        }\r\n\r\n\r\n        public static void main(String[] args) {\r\n            String str = &quot;004-034556&quot;;\r\n            String delimiter = &quot;-&quot;;\r\n            String result[] = split(str, delimiter);\r\n            for(String s:result)\r\n                System.out.println(s);\r\n        }\r\n    }\r\n","title":"How do I split a string in Java?","body":"<pre><code>public class SplitTest {\n\n    public static String[] split(String text, String delimiter) {\n        java.util.List&lt;String&gt; parts = new java.util.ArrayList&lt;String&gt;();\n\n        text += delimiter;\n\n        for (int i = text.indexOf(delimiter), j=0; i != -1;) {\n            String temp = text.substring(j,i);\n            if(temp.trim().length() != 0) {\n                parts.add(temp);\n            }\n            j = i + delimiter.length();\n            i = text.indexOf(delimiter,j);\n        }\n\n        return parts.toArray(new String[0]);\n    }\n\n\n    public static void main(String[] args) {\n        String str = \"004-034556\";\n        String delimiter = \"-\";\n        String result[] = split(str, delimiter);\n        for(String s:result)\n            System.out.println(s);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2678164,"reputation":445,"user_id":2314047,"display_name":"David"},"down_vote_count":5,"up_vote_count":18,"is_accepted":false,"score":13,"last_activity_date":1395290226,"creation_date":1395290226,"answer_id":22523609,"question_id":3481828,"body_markdown":"The fastest way, which also consumes the least resource could be:\r\n\r\n    String s = &quot;abc-def&quot;;\r\n    int p = s.indexOf(&#39;-&#39;);\r\n    if (p &gt;= 0) {\r\n        String left = s.substring(0, p);\r\n        String right = s.substring(p + 1);\r\n    } else {\r\n      // s does not contain &#39;-&#39;\r\n    }","title":"How do I split a string in Java?","body":"<p>The fastest way, which also consumes the least resource could be:</p>\n\n<pre><code>String s = \"abc-def\";\nint p = s.indexOf('-');\nif (p &gt;= 0) {\n    String left = s.substring(0, p);\n    String right = s.substring(p + 1);\n} else {\n  // s does not contain '-'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1395729797,"creation_date":1395729797,"answer_id":22627173,"question_id":3481828,"body_markdown":"Assuming, that\r\n\r\n - you don&#39;t really need regular expressions for your split\r\n - you happen to already use apache commons lang in your app\r\n\r\nThe easiest way is to use [StringUtils#split(java.lang.String, char)](http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/StringUtils.html#split%28java.lang.String,%20char%29). That&#39;s more convenient than the one provided by Java out of the box if you don&#39;t need regular expressions. Like its manual says, it works like this:\r\n\r\n    A null input String returns null.\r\n    \r\n     StringUtils.split(null, *)         = null\r\n     StringUtils.split(&quot;&quot;, *)           = []\r\n     StringUtils.split(&quot;a.b.c&quot;, &#39;.&#39;)    = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]\r\n     StringUtils.split(&quot;a..b.c&quot;, &#39;.&#39;)   = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]\r\n     StringUtils.split(&quot;a:b:c&quot;, &#39;.&#39;)    = [&quot;a:b:c&quot;]\r\n     StringUtils.split(&quot;a b c&quot;, &#39; &#39;)    = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]\r\n\r\nI would recommend using commong-lang, since usually it contains a lot of stuff that&#39;s usable. However, if you don&#39;t need it for anything else than doing a split, then implementing yourself or escaping the regex is a better option.\r\n\r\n \r\n\r\n \r\n","title":"How do I split a string in Java?","body":"<p>Assuming, that</p>\n\n<ul>\n<li>you don't really need regular expressions for your split</li>\n<li>you happen to already use apache commons lang in your app</li>\n</ul>\n\n<p>The easiest way is to use <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/StringUtils.html#split%28java.lang.String,%20char%29\" rel=\"noreferrer\">StringUtils#split(java.lang.String, char)</a>. That's more convenient than the one provided by Java out of the box if you don't need regular expressions. Like its manual says, it works like this:</p>\n\n<pre><code>A null input String returns null.\n\n StringUtils.split(null, *)         = null\n StringUtils.split(\"\", *)           = []\n StringUtils.split(\"a.b.c\", '.')    = [\"a\", \"b\", \"c\"]\n StringUtils.split(\"a..b.c\", '.')   = [\"a\", \"b\", \"c\"]\n StringUtils.split(\"a:b:c\", '.')    = [\"a:b:c\"]\n StringUtils.split(\"a b c\", ' ')    = [\"a\", \"b\", \"c\"]\n</code></pre>\n\n<p>I would recommend using commong-lang, since usually it contains a lot of stuff that's usable. However, if you don't need it for anything else than doing a split, then implementing yourself or escaping the regex is a better option.</p>\n"},{"tags":[],"owner":{"account_id":3648696,"reputation":699,"user_id":3041354,"display_name":"sandeep vanama"},"down_vote_count":3,"up_vote_count":24,"is_accepted":false,"score":21,"last_activity_date":1435225475,"creation_date":1404189319,"answer_id":24502530,"question_id":3481828,"body_markdown":"Use [org.apache.commons.lang.StringUtils&#39;](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#split(java.lang.String,%20char)) split method which can split strings based on the character or string you want to split.\r\n\r\nMethod signature: \r\n\r\n    public static String[] split(String str, char separatorChar);\r\n\r\nIn your case, you want to split a string when there is a &quot;-&quot;.\r\n\r\nYou can simply do as follows:\r\n\r\n    String str = &quot;004-034556&quot;;\r\n    \r\n    String split[] = StringUtils.split(str,&quot;-&quot;);\r\n\r\n**Output:**\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    004\r\n    034556\r\n\r\nAssume that if `-` does not exists in your string, it returns the given string, and you will not get any exception.","title":"How do I split a string in Java?","body":"<p>Use <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#split(java.lang.String,%20char)\" rel=\"noreferrer\">org.apache.commons.lang.StringUtils'</a> split method which can split strings based on the character or string you want to split.</p>\n\n<p>Method signature: </p>\n\n<pre><code>public static String[] split(String str, char separatorChar);\n</code></pre>\n\n<p>In your case, you want to split a string when there is a \"-\".</p>\n\n<p>You can simply do as follows:</p>\n\n<pre><code>String str = \"004-034556\";\n\nString split[] = StringUtils.split(str,\"-\");\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>004\n034556\n</code></pre>\n\n<p>Assume that if <code>-</code> does not exists in your string, it returns the given string, and you will not get any exception.</p>\n"},{"tags":[],"owner":{"account_id":1453502,"reputation":10289,"user_id":1369752,"accept_rate":72,"display_name":"RajeshVijayakumar"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1417263586,"creation_date":1409578776,"answer_id":25607125,"question_id":3481828,"body_markdown":"You can split a string by a line break by using the following statement:\r\n\r\n    String textStr[] = yourString.split(&quot;\\\\r?\\\\n&quot;);\r\n\r\nYou can split a string by a hyphen/character by using the following statement:\r\n\r\n    String textStr[] = yourString.split(&quot;-&quot;);\r\n","title":"How do I split a string in Java?","body":"<p>You can split a string by a line break by using the following statement:</p>\n\n<pre><code>String textStr[] = yourString.split(\"\\\\r?\\\\n\");\n</code></pre>\n\n<p>You can split a string by a hyphen/character by using the following statement:</p>\n\n<pre><code>String textStr[] = yourString.split(\"-\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":108817,"reputation":111636,"user_id":288671,"display_name":"Vitalii Fedorenko"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1518708519,"creation_date":1431524337,"answer_id":30216602,"question_id":3481828,"body_markdown":"For simple use cases [`String.split()`][3] should do the job. If you use guava, there is also a [Splitter][1] class which allows chaining of different string operations and supports [CharMatcher][2]:\r\n\r\n    Splitter.on(&#39;-&#39;)\r\n           .trimResults()\r\n           .omitEmptyStrings()\r\n           .split(string);\r\n\r\n  [1]: https://github.com/google/guava/wiki/StringsExplained#splitter\r\n  [2]: https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/base/CharMatcher.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-","title":"How do I split a string in Java?","body":"<p>For simple use cases <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-\" rel=\"noreferrer\"><code>String.split()</code></a> should do the job. If you use guava, there is also a <a href=\"https://github.com/google/guava/wiki/StringsExplained#splitter\" rel=\"noreferrer\">Splitter</a> class which allows chaining of different string operations and supports <a href=\"https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/base/CharMatcher.html\" rel=\"noreferrer\">CharMatcher</a>:</p>\n\n<pre><code>Splitter.on('-')\n       .trimResults()\n       .omitEmptyStrings()\n       .split(string);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6867193,"reputation":1653,"user_id":5279133,"accept_rate":91,"display_name":"Keshav Pradeep Ramanath"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1443984550,"creation_date":1443983072,"answer_id":32936816,"question_id":3481828,"body_markdown":"One way to do this is to run through the String in a for-each loop and use the required split character.\r\n\r\n    public class StringSplitTest {\r\n    \r\n    \tpublic static void main(String[] arg){\r\n    \t\tString str = &quot;004-034556&quot;;\r\n    \t\tString split[] = str.split(&quot;-&quot;);\r\n            System.out.println(&quot;The split parts of the String are&quot;);\r\n    \t\tfor(String s:split)\r\n    \t\tSystem.out.println(s);\r\n    \t}\r\n    }\r\n\r\n\r\nOutput:\r\n\r\n    The split parts of the String are:\r\n    004\r\n    034556","title":"How do I split a string in Java?","body":"<p>One way to do this is to run through the String in a for-each loop and use the required split character.</p>\n\n<pre><code>public class StringSplitTest {\n\n    public static void main(String[] arg){\n        String str = \"004-034556\";\n        String split[] = str.split(\"-\");\n        System.out.println(\"The split parts of the String are\");\n        for(String s:split)\n        System.out.println(s);\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>The split parts of the String are:\n004\n034556\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1467485890,"creation_date":1449054440,"answer_id":34041213,"question_id":3481828,"body_markdown":"***String Split with multiple characters using Regex***\r\n\r\n    public class StringSplitTest {\r\n         public static void main(String args[]) {\r\n            String s = &quot; ;String; String; String; String, String; String;;String;String; String; String; ;String;String;String;String&quot;;\r\n            //String[] strs = s.split(&quot;[,\\\\s\\\\;]&quot;);\r\n            String[] strs = s.split(&quot;[,\\\\;]&quot;);\r\n            System.out.println(&quot;Substrings length:&quot;+strs.length);\r\n            for (int i=0; i &lt; strs.length; i++) {\r\n                System.out.println(&quot;Str[&quot;+i+&quot;]:&quot;+strs[i]);\r\n            }\r\n         }\r\n      }\r\n\r\nOutput:\r\n\r\n    Substrings length:17\r\n    Str[0]:\r\n    Str[1]:String\r\n    Str[2]: String\r\n    Str[3]: String\r\n    Str[4]: String\r\n    Str[5]: String\r\n    Str[6]: String\r\n    Str[7]:\r\n    Str[8]:String\r\n    Str[9]:String\r\n    Str[10]: String\r\n    Str[11]: String\r\n    Str[12]:\r\n    Str[13]:String\r\n    Str[14]:String\r\n    Str[15]:String\r\n    Str[16]:String\r\n\r\nBut do not expect the same output across all JDK versions. I have seen [one bug][1] which exists in some JDK versions where the first null string has been ignored. This bug is not present in the latest JDK version, but it exists in some versions between JDK 1.7 late versions and 1.8 early versions.\r\n\r\n  [1]: https://bugs.openjdk.java.net/browse/JDK-8043324\r\n","title":"How do I split a string in Java?","body":"<p><strong><em>String Split with multiple characters using Regex</em></strong></p>\n\n<pre><code>public class StringSplitTest {\n     public static void main(String args[]) {\n        String s = \" ;String; String; String; String, String; String;;String;String; String; String; ;String;String;String;String\";\n        //String[] strs = s.split(\"[,\\\\s\\\\;]\");\n        String[] strs = s.split(\"[,\\\\;]\");\n        System.out.println(\"Substrings length:\"+strs.length);\n        for (int i=0; i &lt; strs.length; i++) {\n            System.out.println(\"Str[\"+i+\"]:\"+strs[i]);\n        }\n     }\n  }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Substrings length:17\nStr[0]:\nStr[1]:String\nStr[2]: String\nStr[3]: String\nStr[4]: String\nStr[5]: String\nStr[6]: String\nStr[7]:\nStr[8]:String\nStr[9]:String\nStr[10]: String\nStr[11]: String\nStr[12]:\nStr[13]:String\nStr[14]:String\nStr[15]:String\nStr[16]:String\n</code></pre>\n\n<p>But do not expect the same output across all JDK versions. I have seen <a href=\"https://bugs.openjdk.java.net/browse/JDK-8043324\" rel=\"noreferrer\">one bug</a> which exists in some JDK versions where the first null string has been ignored. This bug is not present in the latest JDK version, but it exists in some versions between JDK 1.7 late versions and 1.8 early versions.</p>\n"},{"tags":[],"owner":{"account_id":6818997,"reputation":3699,"user_id":5246706,"accept_rate":80,"display_name":"Divyesh Kanzariya"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1469181874,"creation_date":1462800965,"answer_id":37117217,"question_id":3481828,"body_markdown":"Check out the `split()` method in the `String` class on javadoc.\r\n\r\n&gt; https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String)\r\n\r\n    String data = &quot;004-034556-1212-232-232&quot;;\r\n    int cnt = 1;\r\n    for (String item : data.split(&quot;-&quot;)) {\r\n\t\t\tSystem.out.println(&quot;string &quot;+cnt+&quot; = &quot;+item);\r\n\t\t\tcnt++;\r\n\t}\r\n\r\nHere many examples for split string but I little code optimized.","title":"How do I split a string in Java?","body":"<p>Check out the <code>split()</code> method in the <code>String</code> class on javadoc.</p>\n\n<blockquote>\n  <p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String)\" rel=\"nofollow\">https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String)</a></p>\n</blockquote>\n\n<pre><code>String data = \"004-034556-1212-232-232\";\nint cnt = 1;\nfor (String item : data.split(\"-\")) {\n        System.out.println(\"string \"+cnt+\" = \"+item);\n        cnt++;\n}\n</code></pre>\n\n<p>Here many examples for split string but I little code optimized.</p>\n"},{"tags":[],"owner":{"account_id":1257650,"reputation":23479,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1467485987,"creation_date":1463548657,"answer_id":37290841,"question_id":3481828,"body_markdown":"Please don&#39;t use [StringTokenizer][1] class as it is a legacy class that is retained for compatibility reasons, and its use is discouraged in new code. And we can make use of the split method as suggested by others as well.\r\n\r\n    String[] sampleTokens = &quot;004-034556&quot;.split(&quot;-&quot;);\r\n    System.out.println(Arrays.toString(sampleTokens));\r\n\r\nAnd as expected it will print:\r\n\r\n    [004, 034556]\r\n\r\nIn this answer I also want to point out **one change that has taken place for `split` method in Java 8**. The [String#split()][2] method makes use of `Pattern.split`, and now it will remove empty strings at the start of the result array. Notice this [change][3] in documentation for Java 8:\r\n\r\n&gt; When there is a positive-width match at the beginning of the input\r\n&gt; sequence then an empty leading substring is included at the beginning\r\n&gt; of the resulting array. A zero-width match at the beginning however\r\n&gt; never produces such empty leading substring.\r\n\r\nIt means for the following example:\r\n\r\n    String[] sampleTokensAgain = &quot;004&quot;.split(&quot;&quot;);\r\n    System.out.println(Arrays.toString(sampleTokensAgain));\r\n\r\nwe will get three strings: `[0, 0, 4]` and not four as was the case in Java 7 and before. Also check this similar [question][4].\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#split-java.lang.CharSequence-int-\r\n  [4]: https://stackoverflow.com/questions/22718744/why-in-java-8-split-sometimes-removes-empty-strings-at-start-of-result-array\r\n","title":"How do I split a string in Java?","body":"<p>Please don't use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html\" rel=\"noreferrer\">StringTokenizer</a> class as it is a legacy class that is retained for compatibility reasons, and its use is discouraged in new code. And we can make use of the split method as suggested by others as well.</p>\n\n<pre><code>String[] sampleTokens = \"004-034556\".split(\"-\");\nSystem.out.println(Arrays.toString(sampleTokens));\n</code></pre>\n\n<p>And as expected it will print:</p>\n\n<pre><code>[004, 034556]\n</code></pre>\n\n<p>In this answer I also want to point out <strong>one change that has taken place for <code>split</code> method in Java 8</strong>. The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-\" rel=\"noreferrer\">String#split()</a> method makes use of <code>Pattern.split</code>, and now it will remove empty strings at the start of the result array. Notice this <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#split-java.lang.CharSequence-int-\" rel=\"noreferrer\">change</a> in documentation for Java 8:</p>\n\n<blockquote>\n  <p>When there is a positive-width match at the beginning of the input\n  sequence then an empty leading substring is included at the beginning\n  of the resulting array. A zero-width match at the beginning however\n  never produces such empty leading substring.</p>\n</blockquote>\n\n<p>It means for the following example:</p>\n\n<pre><code>String[] sampleTokensAgain = \"004\".split(\"\");\nSystem.out.println(Arrays.toString(sampleTokensAgain));\n</code></pre>\n\n<p>we will get three strings: <code>[0, 0, 4]</code> and not four as was the case in Java 7 and before. Also check this similar <a href=\"https://stackoverflow.com/questions/22718744/why-in-java-8-split-sometimes-removes-empty-strings-at-start-of-result-array\">question</a>.</p>\n"},{"tags":[],"owner":{"account_id":8450974,"reputation":424,"user_id":6339815,"display_name":"Ravi Pandey"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1479376821,"creation_date":1475379086,"answer_id":39813593,"question_id":3481828,"body_markdown":"    import java.io.*;\r\n    \r\n    public class BreakString {\r\n    \r\n      public static void main(String args[]) {\r\n        \r\n        String string = &quot;004-034556-1234-2341&quot;;\r\n        String[] parts = string.split(&quot;-&quot;);\r\n    \r\n        for(int i=0;i&lt;parts.length;i++) ｛\r\n          System.out.println(parts[i]);\r\n        }\r\n      }\r\n    }\r\n\r\n","title":"How do I split a string in Java?","body":"<pre><code>import java.io.*;\n\npublic class BreakString {\n\n  public static void main(String args[]) {\n\n    String string = \"004-034556-1234-2341\";\n    String[] parts = string.split(\"-\");\n\n    for(int i=0;i&lt;parts.length;i++) ｛\n      System.out.println(parts[i]);\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6961607,"reputation":2054,"user_id":5340833,"display_name":"Py-Coder"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1479616994,"creation_date":1479616994,"answer_id":40700795,"question_id":3481828,"body_markdown":"    String str=&quot;004-034556&quot;\r\n    String[] sTemp=str.split(&quot;-&quot;);// &#39;-&#39; is a delimiter\r\n\r\n    string1=004 // sTemp[0];\r\n    string2=034556//sTemp[1];\r\n\r\n","title":"How do I split a string in Java?","body":"<pre><code>String str=\"004-034556\"\nString[] sTemp=str.split(\"-\");// '-' is a delimiter\n\nstring1=004 // sTemp[0];\nstring2=034556//sTemp[1];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":255184,"reputation":7191,"user_id":535060,"accept_rate":94,"display_name":"Somaiah Kumbera"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1495364852,"creation_date":1480584725,"answer_id":40906916,"question_id":3481828,"body_markdown":"With Java 8:\r\n\r\n        List&lt;String&gt; stringList = Pattern.compile(&quot;-&quot;)\r\n                .splitAsStream(&quot;004-034556&quot;)\r\n                .collect(Collectors.toList());\r\n\r\n        stringList.forEach(s -&gt; System.out.println(s));\r\n","title":"How do I split a string in Java?","body":"<p>With Java 8:</p>\n\n<pre><code>    List&lt;String&gt; stringList = Pattern.compile(\"-\")\n            .splitAsStream(\"004-034556\")\n            .collect(Collectors.toList());\n\n    stringList.forEach(s -&gt; System.out.println(s));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9590996,"reputation":5786,"user_id":7121889,"display_name":"Sarat Chandra"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1517929429,"creation_date":1483982881,"answer_id":41553574,"question_id":3481828,"body_markdown":"You can use Split():\r\n\r\n    import java.io.*;\r\n\r\n    public class Splitting\r\n    {\r\n\r\n        public static void main(String args[])\r\n        {\r\n            String Str = new String(&quot;004-034556&quot;);\r\n            String[] SplittoArray = Str.split(&quot;-&quot;);\r\n            String string1 = SplittoArray[0];\r\n            String string2 = SplittoArray[1];\r\n        }\r\n    }\r\n\r\nElse, you can use StringTokenizer:\r\n\r\n    import java.util.*;\r\n    public class Splitting\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            StringTokenizer Str = new StringTokenizer(&quot;004-034556&quot;);\r\n            String string1 = Str.nextToken(&quot;-&quot;);\r\n            String string2 = Str.nextToken(&quot;-&quot;);\r\n        }\r\n    }\r\n","title":"How do I split a string in Java?","body":"<p>You can use Split():</p>\n\n<pre><code>import java.io.*;\n\npublic class Splitting\n{\n\n    public static void main(String args[])\n    {\n        String Str = new String(\"004-034556\");\n        String[] SplittoArray = Str.split(\"-\");\n        String string1 = SplittoArray[0];\n        String string2 = SplittoArray[1];\n    }\n}\n</code></pre>\n\n<p>Else, you can use StringTokenizer:</p>\n\n<pre><code>import java.util.*;\npublic class Splitting\n{\n    public static void main(String[] args)\n    {\n        StringTokenizer Str = new StringTokenizer(\"004-034556\");\n        String string1 = Str.nextToken(\"-\");\n        String string2 = Str.nextToken(\"-\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10316232,"reputation":32,"user_id":7610478,"accept_rate":20,"display_name":"SAM Jr"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1487931145,"creation_date":1487931145,"answer_id":42435940,"question_id":3481828,"body_markdown":"\tString s=&quot;004-034556&quot;;\r\n    for(int i=0;i&lt;s.length();i++)\r\n\t{\r\n\t    if(s.charAt(i)==&#39;-&#39;)\r\n\t\t{\r\n\t\t    System.out.println(s.substring(0,i));\r\n\t\t    System.out.println(s.substring(i+1));\r\n\t\t}\r\n\t}\r\n\r\n&gt;As mentioned by everyone, split() is the best option which may be used in your case. An alternative method can be using substring().","title":"How do I split a string in Java?","body":"<pre><code>String s=\"004-034556\";\nfor(int i=0;i&lt;s.length();i++)\n{\n    if(s.charAt(i)=='-')\n    {\n        System.out.println(s.substring(0,i));\n        System.out.println(s.substring(i+1));\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>As mentioned by everyone, split() is the best option which may be used in your case. An alternative method can be using substring().</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8051367,"reputation":430,"user_id":6069781,"accept_rate":71,"display_name":"Akshay Gaikwad"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1517929533,"creation_date":1488533955,"answer_id":42575343,"question_id":3481828,"body_markdown":"Here are two ways two achieve it.\r\n\r\nWAY 1: As you have to split two numbers by a special character you can use regex\r\n\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n\r\n    public class TrialClass\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            Pattern p = Pattern.compile(&quot;[0-9]+&quot;);\r\n            Matcher m = p.matcher(&quot;004-034556&quot;);\r\n\r\n            while(m.find())\r\n            {\r\n                System.out.println(m.group());\r\n            }\r\n        }\r\n    }\r\n\r\nWAY 2: Using the string split method\r\n\r\n    public class TrialClass\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            String temp = &quot;004-034556&quot;;\r\n            String [] arrString = temp.split(&quot;-&quot;);\r\n            for(String splitString:arrString)\r\n            {\r\n                System.out.println(splitString);\r\n            }\r\n        }\r\n    }\r\n","title":"How do I split a string in Java?","body":"<p>Here are two ways two achieve it.</p>\n\n<p>WAY 1: As you have to split two numbers by a special character you can use regex</p>\n\n<pre><code>import java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class TrialClass\n{\n    public static void main(String[] args)\n    {\n        Pattern p = Pattern.compile(\"[0-9]+\");\n        Matcher m = p.matcher(\"004-034556\");\n\n        while(m.find())\n        {\n            System.out.println(m.group());\n        }\n    }\n}\n</code></pre>\n\n<p>WAY 2: Using the string split method</p>\n\n<pre><code>public class TrialClass\n{\n    public static void main(String[] args)\n    {\n        String temp = \"004-034556\";\n        String [] arrString = temp.split(\"-\");\n        for(String splitString:arrString)\n        {\n            System.out.println(splitString);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5295682,"reputation":379,"user_id":4226914,"display_name":"KIBOU Hassan"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1517929570,"creation_date":1491602229,"answer_id":43287647,"question_id":3481828,"body_markdown":"To split a string, use `String.split(regex)`:\r\n\r\n    String phone = &quot;004-034556&quot;;\r\n    String[] output = phone.split(&quot;-&quot;);\r\n    System.out.println(output[0]);\r\n    System.out.println(output[1]);\r\n\r\nOutput:\r\n\r\n    004\r\n    034556\r\n","title":"How do I split a string in Java?","body":"<p>To split a string, use <code>String.split(regex)</code>:</p>\n\n<pre><code>String phone = \"004-034556\";\nString[] output = phone.split(\"-\");\nSystem.out.println(output[0]);\nSystem.out.println(output[1]);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>004\n034556\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8017626,"reputation":2089,"user_id":6613299,"accept_rate":75,"display_name":"Rohit-Pandey"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1517929619,"creation_date":1492401232,"answer_id":43444893,"question_id":3481828,"body_markdown":"You can simply use StringTokenizer to split a string in two or more parts whether there are any type of delimiters:\r\n\r\n    StringTokenizer st = new StringTokenizer(&quot;004-034556&quot;, &quot;-&quot;);\r\n\twhile(st.hasMoreTokens())\r\n    {\r\n\t\tSystem.out.println(st.nextToken());\r\n    }\r\n","title":"How do I split a string in Java?","body":"<p>You can simply use StringTokenizer to split a string in two or more parts whether there are any type of delimiters:</p>\n\n<pre><code>StringTokenizer st = new StringTokenizer(\"004-034556\", \"-\");\nwhile(st.hasMoreTokens())\n{\n    System.out.println(st.nextToken());\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user7973776"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1517929666,"creation_date":1494763962,"answer_id":43963738,"question_id":3481828,"body_markdown":"From the documentation:\r\n\r\n&gt;`public String[] split(String regex,int limit)` ***Splits this string around matches of the given regular expression***. The array returned by this method contains each\r\n&gt; substring of this string that is terminated by another **substring** that\r\n&gt; matches the given expression or is terminated by the end of the\r\n&gt; string. The substrings in the array are in the ***order*** in which they\r\n&gt; occur in this string. If the expression **does not** match any part of the\r\n&gt; input then the resulting array has just **one element**, **namely this\r\n&gt; string.**\r\n\r\nBasically you can do something like this:\r\n\r\n    String s = &quot;123-456-789-123&quot;; // The String to be split\r\n    String[] array = s.split(&quot;-&quot;); // Split according to the hyphen and put them in an array\r\n    for(String subString : array){ // Cycle through the array\r\n       System.out.println(subString);\r\n    }\r\n\r\n**Output:**\r\n\r\n    123\r\n    456\r\n    789\r\n    123\r\n","title":"How do I split a string in Java?","body":"<p>From the documentation:</p>\n\n<blockquote>\n  <p><code>public String[] split(String regex,int limit)</code> <strong><em>Splits this string around matches of the given regular expression</em></strong>. The array returned by this method contains each\n  substring of this string that is terminated by another <strong>substring</strong> that\n  matches the given expression or is terminated by the end of the\n  string. The substrings in the array are in the <strong><em>order</em></strong> in which they\n  occur in this string. If the expression <strong>does not</strong> match any part of the\n  input then the resulting array has just <strong>one element</strong>, <strong>namely this\n  string.</strong></p>\n</blockquote>\n\n<p>Basically you can do something like this:</p>\n\n<pre><code>String s = \"123-456-789-123\"; // The String to be split\nString[] array = s.split(\"-\"); // Split according to the hyphen and put them in an array\nfor(String subString : array){ // Cycle through the array\n   System.out.println(subString);\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>123\n456\n789\n123\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10230253,"reputation":643,"user_id":7551282,"display_name":"Aditya Singh"},"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1517929735,"creation_date":1506101265,"answer_id":46370184,"question_id":3481828,"body_markdown":"     String string = &quot;004^034556-34&quot;;\r\n     String[] parts = string.split(Pattern.quote(&quot;^&quot;));\r\n\r\nIf you have a special character then you can use Patter.quote. If you simply have dash (-) then you can shorten the code:\r\n\r\n     String string = &quot;004-34&quot;;\r\n     String[] parts = string.split(&quot;-&quot;);\r\n\r\nIf you try to add other special character in place of dash **(^)** then the error will generate *ArrayIndexOutOfBoundsException*. For that you have to use `Pattern.quote`.\r\n","title":"How do I split a string in Java?","body":"<pre><code> String string = \"004^034556-34\";\n String[] parts = string.split(Pattern.quote(\"^\"));\n</code></pre>\n\n<p>If you have a special character then you can use Patter.quote. If you simply have dash (-) then you can shorten the code:</p>\n\n<pre><code> String string = \"004-34\";\n String[] parts = string.split(\"-\");\n</code></pre>\n\n<p>If you try to add other special character in place of dash <strong>(^)</strong> then the error will generate <em>ArrayIndexOutOfBoundsException</em>. For that you have to use <code>Pattern.quote</code>.</p>\n"},{"tags":[],"owner":{"account_id":2232881,"reputation":726,"user_id":1970059,"accept_rate":25,"display_name":"Dmytro Shvechikov"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1667575298,"creation_date":1513174801,"answer_id":47795244,"question_id":3481828,"body_markdown":"To summarize: there are at least five ways to split a string in Java:\r\n\r\n1. String.split():\r\n\r\n        String[] parts =&quot;10,20&quot;.split(&quot;,&quot;);\r\n\r\n2. Pattern.compile(regexp).splitAsStream(input):\r\n\r\n        List&lt;String&gt; strings = Pattern.compile(&quot;\\\\|&quot;)\r\n              .splitAsStream(&quot;010|020202&quot;)\r\n              .collect(Collectors.toList());\r\n\r\n3. StringTokenizer (legacy class):\r\n\r\n        StringTokenizer strings = new StringTokenizer(&quot;Welcome to EXPLAINJAVA.COM!&quot;, &quot;.&quot;);\r\n        while(strings.hasMoreTokens()){\r\n            String substring = strings.nextToken();\r\n            System.out.println(substring);\r\n        }\r\n\r\n4. Google Guava Splitter:\r\n\r\n        Iterable&lt;String&gt; result = Splitter.on(&quot;,&quot;).split(&quot;1,2,3,4&quot;);\r\n\r\n5. Apache Commons StringUtils:\r\n\r\n        String[] strings = StringUtils.split(&quot;1,2,3,4&quot;, &quot;,&quot;);\r\n\r\nSo you can choose the best option for you depending on what you need, e.g. return type (array, list, or iterable).\r\n\r\n[Here][1] is a big overview of these methods and the most common examples (how to split by dot, slash, question mark, etc.)\r\n\r\n  [1]: https://codingmorning.com/split-string-java/\r\n","title":"How do I split a string in Java?","body":"<p>To summarize: there are at least five ways to split a string in Java:</p>\n<ol>\n<li><p>String.split():</p>\n<pre><code> String[] parts =&quot;10,20&quot;.split(&quot;,&quot;);\n</code></pre>\n</li>\n<li><p>Pattern.compile(regexp).splitAsStream(input):</p>\n<pre><code> List&lt;String&gt; strings = Pattern.compile(&quot;\\\\|&quot;)\n       .splitAsStream(&quot;010|020202&quot;)\n       .collect(Collectors.toList());\n</code></pre>\n</li>\n<li><p>StringTokenizer (legacy class):</p>\n<pre><code> StringTokenizer strings = new StringTokenizer(&quot;Welcome to EXPLAINJAVA.COM!&quot;, &quot;.&quot;);\n while(strings.hasMoreTokens()){\n     String substring = strings.nextToken();\n     System.out.println(substring);\n }\n</code></pre>\n</li>\n<li><p>Google Guava Splitter:</p>\n<pre><code> Iterable&lt;String&gt; result = Splitter.on(&quot;,&quot;).split(&quot;1,2,3,4&quot;);\n</code></pre>\n</li>\n<li><p>Apache Commons StringUtils:</p>\n<pre><code> String[] strings = StringUtils.split(&quot;1,2,3,4&quot;, &quot;,&quot;);\n</code></pre>\n</li>\n</ol>\n<p>So you can choose the best option for you depending on what you need, e.g. return type (array, list, or iterable).</p>\n<p><a href=\"https://codingmorning.com/split-string-java/\" rel=\"nofollow noreferrer\">Here</a> is a big overview of these methods and the most common examples (how to split by dot, slash, question mark, etc.)</p>\n"},{"tags":[],"owner":{"display_name":"user3773246"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1517929910,"creation_date":1515565688,"answer_id":48181496,"question_id":3481828,"body_markdown":"I just wanted to write an algorithm instead of using Java built-in functions:\r\n\r\n    public static List&lt;String&gt; split(String str, char c){\r\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n        StringBuilder sb = new StringBuilder();\r\n\r\n        for (int i = 0; i &lt; str.length(); i++){\r\n            if(str.charAt(i) != c){\r\n                sb.append(str.charAt(i));\r\n            }\r\n            else{\r\n                if(sb.length() &gt; 0){\r\n                    list.add(sb.toString());\r\n                    sb = new StringBuilder();\r\n                }\r\n            }\r\n        }\r\n\r\n        if(sb.length() &gt;0){\r\n            list.add(sb.toString());\r\n        }\r\n        return list;\r\n    }\r\n","title":"How do I split a string in Java?","body":"<p>I just wanted to write an algorithm instead of using Java built-in functions:</p>\n\n<pre><code>public static List&lt;String&gt; split(String str, char c){\n    List&lt;String&gt; list = new ArrayList&lt;&gt;();\n    StringBuilder sb = new StringBuilder();\n\n    for (int i = 0; i &lt; str.length(); i++){\n        if(str.charAt(i) != c){\n            sb.append(str.charAt(i));\n        }\n        else{\n            if(sb.length() &gt; 0){\n                list.add(sb.toString());\n                sb = new StringBuilder();\n            }\n        }\n    }\n\n    if(sb.length() &gt;0){\n        list.add(sb.toString());\n    }\n    return list;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5295682,"reputation":379,"user_id":4226914,"display_name":"KIBOU Hassan"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1567961979,"creation_date":1520519280,"answer_id":49175513,"question_id":3481828,"body_markdown":"To split a string, uses String.split(regex). Review the following examples:\r\n\r\n    String data = &quot;004-034556&quot;;\r\n    String[] output = data.split(&quot;-&quot;);\r\n    System.out.println(output[0]);\r\n    System.out.println(output[1]);\r\n\r\nOutput\r\n\r\n    004\r\n    034556\r\n\r\nNote:\r\n\r\nThis split (regex) takes a regex as an argument. Remember to escape the regex special characters, like period/dot.\r\n\r\n\r\n","title":"How do I split a string in Java?","body":"<p>To split a string, uses String.split(regex). Review the following examples:</p>\n\n<pre><code>String data = \"004-034556\";\nString[] output = data.split(\"-\");\nSystem.out.println(output[0]);\nSystem.out.println(output[1]);\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>004\n034556\n</code></pre>\n\n<p>Note:</p>\n\n<p>This split (regex) takes a regex as an argument. Remember to escape the regex special characters, like period/dot.</p>\n"},{"tags":[],"owner":{"account_id":3466983,"reputation":8589,"user_id":3800782,"accept_rate":77,"display_name":"rghome"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1567961920,"creation_date":1542715727,"answer_id":53392700,"question_id":3481828,"body_markdown":"There are only two methods you really need to consider.\r\n\r\n**Use String.split for a one-character delimiter or you don&#39;t care about performance**\r\n\r\nIf performance is not an issue, or if the delimiter is a single character that is not a regular expression special character (i.e., not one of `.$|()[{^?*+\\`) then you can use `String.split`.\r\n\r\n    String[] results = input.split(&quot;,&quot;);\r\n\r\nThe split method has an optimization to avoid using a regular expression if the delimeter is a single character and not in the above list. Otherwise, it has to compile a regular expression, and this is not ideal.\r\n\r\n**Use Pattern.split and precompile the pattern if using a complex delimiter and you care about performance.**\r\n\r\nIf performance is an issue, and your delimiter is not one of the above, you should pre-compile a regular expression pattern which you can then reuse.\r\n\r\n    // Save this somewhere\r\n    Pattern pattern = Pattern.compile(&quot;[,;:]&quot;);\r\n\r\n    /// ... later\r\n    String[] results = pattern.split(input);\r\n\r\nThis last option still creates a new `Matcher` object. You can also cache this object and reset it for each input for maximum performance, but that is somewhat more complicated and not thread-safe.\r\n\r\n","title":"How do I split a string in Java?","body":"<p>There are only two methods you really need to consider.</p>\n\n<p><strong>Use String.split for a one-character delimiter or you don't care about performance</strong></p>\n\n<p>If performance is not an issue, or if the delimiter is a single character that is not a regular expression special character (i.e., not one of <code>.$|()[{^?*+\\</code>) then you can use <code>String.split</code>.</p>\n\n<pre><code>String[] results = input.split(\",\");\n</code></pre>\n\n<p>The split method has an optimization to avoid using a regular expression if the delimeter is a single character and not in the above list. Otherwise, it has to compile a regular expression, and this is not ideal.</p>\n\n<p><strong>Use Pattern.split and precompile the pattern if using a complex delimiter and you care about performance.</strong></p>\n\n<p>If performance is an issue, and your delimiter is not one of the above, you should pre-compile a regular expression pattern which you can then reuse.</p>\n\n<pre><code>// Save this somewhere\nPattern pattern = Pattern.compile(\"[,;:]\");\n\n/// ... later\nString[] results = pattern.split(input);\n</code></pre>\n\n<p>This last option still creates a new <code>Matcher</code> object. You can also cache this object and reset it for each input for maximum performance, but that is somewhat more complicated and not thread-safe.</p>\n"},{"tags":[],"owner":{"account_id":12274705,"reputation":2049,"user_id":8958938,"display_name":"Jamith NImantha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1567961671,"creation_date":1544172480,"answer_id":53666044,"question_id":3481828,"body_markdown":"You can use the method `split`:\r\n\r\n    public class Demo {\r\n        public static void main(String args[]) {\r\n            String str = &quot;004-034556&quot;;\r\n\r\n            if ((str.contains(&quot;-&quot;))) {\r\n                String[] temp = str.split(&quot;-&quot;);\r\n                for (String part:temp) {\r\n                    System.out.println(part);\r\n                }\r\n            }\r\n            else {\r\n                System.out.println(str + &quot; does not contain \\&quot;-\\&quot;.&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n","title":"How do I split a string in Java?","body":"<p>You can use the method <code>split</code>:</p>\n\n<pre><code>public class Demo {\n    public static void main(String args[]) {\n        String str = \"004-034556\";\n\n        if ((str.contains(\"-\"))) {\n            String[] temp = str.split(\"-\");\n            for (String part:temp) {\n                System.out.println(part);\n            }\n        }\n        else {\n            System.out.println(str + \" does not contain \\\"-\\\".\");\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16090002,"reputation":283,"user_id":11613683,"display_name":"Pramesh Bhalala"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1567961586,"creation_date":1566827917,"answer_id":57659369,"question_id":3481828,"body_markdown":"I used a string called `stringValue` and is in the form of something like this &quot;Those who had coins, enjoyed in the rain, those who had notes were busy looking for the shelter&quot;.\r\n\r\nI will split up the `stringValue` using the &quot;,&quot; as the colon.\r\n\r\nAnd then I would simply like to SetText() of three different TextViews to display that string.\r\n\r\n    String stringValue = &quot;Those who had coins, enjoyed in the rain, those who had notes were busy looking for the shelter&quot;;\r\n    String ValueSplitByColon[] = stringValue.split(&quot;,&quot;);\r\n\r\n    String firstValue = ValueSplitByColon[0];\r\n    String secondValue = ValueSplitByColon[1];\r\n    String thirdValue = ValueSplitByColon[2];\r\n\r\n    txtV1.setText(firstValue);\r\n    txtV2.setText(secondValue;\r\n    txtV3.setText(thirdValue;\r\n\r\nIt gives the output as:\r\n\r\n 1. The txtV1 value is: Those who had coins\r\n\r\n 2. The txtV2 value is: enjoyed in the rain\r\n\r\n 3. The txtV3 value is: those who had notes were busy looking for the shelter\r\n\r\n\r\n","title":"How do I split a string in Java?","body":"<p>I used a string called <code>stringValue</code> and is in the form of something like this \"Those who had coins, enjoyed in the rain, those who had notes were busy looking for the shelter\".</p>\n\n<p>I will split up the <code>stringValue</code> using the \",\" as the colon.</p>\n\n<p>And then I would simply like to SetText() of three different TextViews to display that string.</p>\n\n<pre><code>String stringValue = \"Those who had coins, enjoyed in the rain, those who had notes were busy looking for the shelter\";\nString ValueSplitByColon[] = stringValue.split(\",\");\n\nString firstValue = ValueSplitByColon[0];\nString secondValue = ValueSplitByColon[1];\nString thirdValue = ValueSplitByColon[2];\n\ntxtV1.setText(firstValue);\ntxtV2.setText(secondValue;\ntxtV3.setText(thirdValue;\n</code></pre>\n\n<p>It gives the output as:</p>\n\n<ol>\n<li><p>The txtV1 value is: Those who had coins</p></li>\n<li><p>The txtV2 value is: enjoyed in the rain</p></li>\n<li><p>The txtV3 value is: those who had notes were busy looking for the shelter</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1604767972,"creation_date":1587856610,"answer_id":61433862,"question_id":3481828,"body_markdown":"I looked at all the answers and noticed that all are either 3rd party-licenced or regex-based.\r\n\r\nHere is a good dumb implementation I use:\r\n\r\n\t/**\r\n\t * Separates a string into pieces using\r\n\t * case-sensitive-non-regex-char-separators.\r\n\t * &lt;p&gt;\r\n\t * &amp;nbsp;&amp;nbsp;&lt;code&gt;separate(&quot;12-34&quot;, &#39;-&#39;) = &quot;12&quot;, &quot;34&quot;&lt;/code&gt;&lt;br&gt;\r\n\t * &amp;nbsp;&amp;nbsp;&lt;code&gt;separate(&quot;a-b-&quot;, &#39;-&#39;) = &quot;a&quot;, &quot;b&quot;, &quot;&quot;&lt;/code&gt;\r\n\t * &lt;p&gt;\r\n\t * When the separator is the first character in the string, the first result is\r\n\t * an empty string. When the separator is the last character in the string the\r\n\t * last element will be an empty string. One separator after another in the\r\n\t * string will create an empty.\r\n\t * &lt;p&gt;\r\n\t * If no separators are set the source is returned.\r\n\t * &lt;p&gt;\r\n\t * This method is very fast, but it does not focus on memory-efficiency. The memory\r\n\t * consumption is approximately double the size of the string. This method is\r\n\t * thread-safe but not synchronized.\r\n\t *\r\n\t * @param source    The string to split, never &lt;code&gt;null&lt;/code&gt;.\r\n\t * @param separator The character to use as splitting.\r\n\t * @return The mutable array of pieces.\r\n\t * @throws NullPointerException When the source or separators are &lt;code&gt;null&lt;/code&gt;.\r\n\t */\r\n\tpublic final static String[] separate(String source, char... separator) throws NullPointerException {\r\n\t\tString[] resultArray = {};\r\n\t\tboolean multiSeparators = separator.length &gt; 1;\r\n\t\tif (!multiSeparators) {\r\n\t\t\tif (separator.length == 0) {\r\n\t\t\t\treturn new String[] { source };\r\n\t\t\t}\r\n\t\t}\r\n\t\tint charIndex = source.length();\r\n\t\tint lastSeparator = source.length();\r\n\t\twhile (charIndex-- &gt; -1) {\r\n\t\t\tif (charIndex &lt; 0 || (multiSeparators ? Arrays.binarySearch(separator, source.charAt(charIndex)) &gt;= 0 : source.charAt(charIndex) == separator[0])) {\r\n\t\t\t\tString piece = source.substring(charIndex + 1, lastSeparator);\r\n\t\t\t\tlastSeparator = charIndex;\r\n\t\t\t\tString[] tmp = new String[resultArray.length + 1];\r\n\t\t\t\tSystem.arraycopy(resultArray, 0, tmp, 1, resultArray.length);\r\n\t\t\t\ttmp[0] = piece;\r\n\t\t\t\tresultArray = tmp;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn resultArray;\r\n\t}\r\n","title":"How do I split a string in Java?","body":"<p>I looked at all the answers and noticed that all are either 3rd party-licenced or regex-based.</p>\n<p>Here is a good dumb implementation I use:</p>\n<pre><code>/**\n * Separates a string into pieces using\n * case-sensitive-non-regex-char-separators.\n * &lt;p&gt;\n * &amp;nbsp;&amp;nbsp;&lt;code&gt;separate(&quot;12-34&quot;, '-') = &quot;12&quot;, &quot;34&quot;&lt;/code&gt;&lt;br&gt;\n * &amp;nbsp;&amp;nbsp;&lt;code&gt;separate(&quot;a-b-&quot;, '-') = &quot;a&quot;, &quot;b&quot;, &quot;&quot;&lt;/code&gt;\n * &lt;p&gt;\n * When the separator is the first character in the string, the first result is\n * an empty string. When the separator is the last character in the string the\n * last element will be an empty string. One separator after another in the\n * string will create an empty.\n * &lt;p&gt;\n * If no separators are set the source is returned.\n * &lt;p&gt;\n * This method is very fast, but it does not focus on memory-efficiency. The memory\n * consumption is approximately double the size of the string. This method is\n * thread-safe but not synchronized.\n *\n * @param source    The string to split, never &lt;code&gt;null&lt;/code&gt;.\n * @param separator The character to use as splitting.\n * @return The mutable array of pieces.\n * @throws NullPointerException When the source or separators are &lt;code&gt;null&lt;/code&gt;.\n */\npublic final static String[] separate(String source, char... separator) throws NullPointerException {\n    String[] resultArray = {};\n    boolean multiSeparators = separator.length &gt; 1;\n    if (!multiSeparators) {\n        if (separator.length == 0) {\n            return new String[] { source };\n        }\n    }\n    int charIndex = source.length();\n    int lastSeparator = source.length();\n    while (charIndex-- &gt; -1) {\n        if (charIndex &lt; 0 || (multiSeparators ? Arrays.binarySearch(separator, source.charAt(charIndex)) &gt;= 0 : source.charAt(charIndex) == separator[0])) {\n            String piece = source.substring(charIndex + 1, lastSeparator);\n            lastSeparator = charIndex;\n            String[] tmp = new String[resultArray.length + 1];\n            System.arraycopy(resultArray, 0, tmp, 1, resultArray.length);\n            tmp[0] = piece;\n            resultArray = tmp;\n        }\n    }\n    return resultArray;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15878073,"reputation":37,"user_id":11456666,"display_name":"java code point"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1637925947,"creation_date":1637925575,"answer_id":70123588,"question_id":3481828,"body_markdown":"```\r\nString s = &quot;TnGeneral|DOMESTIC&quot;;\r\nString a[]=s.split(&quot;\\\\|&quot;);\r\nSystem.out.println(a.toString());\r\nSystem.out.println(a[0]);\r\nSystem.out.println(a[1]);\r\n```\r\n\r\nOutput:\r\n\r\n```none\r\nTnGeneral\r\nDOMESTIC\r\n```","title":"How do I split a string in Java?","body":"<pre><code>String s = &quot;TnGeneral|DOMESTIC&quot;;\nString a[]=s.split(&quot;\\\\|&quot;);\nSystem.out.println(a.toString());\nSystem.out.println(a[0]);\nSystem.out.println(a[1]);\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>TnGeneral\nDOMESTIC\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10277103,"reputation":91,"user_id":7583633,"display_name":"Joseph Kohilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637929173,"creation_date":1637928011,"answer_id":70124075,"question_id":3481828,"body_markdown":"If you are validating for alphanumeric then change the regex to `[A-Za-z0-9]+-[A-Za-z0-9]+` \r\n\r\n        public static final Pattern VALIDATE_PATTERN = Pattern.compile(&quot;[0-9]+-[0-9]+&quot;);\r\n\r\n    public static String[] validateString(String str) {\r\n        if(VALIDATE_PATTERN.matcher(str).find()) {\r\n            String[] output = str.split(&quot;-&quot;);\r\n            if(output.length != 2) {\r\n                throw new RuntimeException(&quot;Invalid string format&quot;);\r\n            }\r\n            return output;\r\n        } else {\r\n            throw new RuntimeException(&quot;Invalid string format&quot;);\r\n        }\r\n    }","title":"How do I split a string in Java?","body":"<p>If you are validating for alphanumeric then change the regex to <code>[A-Za-z0-9]+-[A-Za-z0-9]+</code></p>\n<pre><code>    public static final Pattern VALIDATE_PATTERN = Pattern.compile(&quot;[0-9]+-[0-9]+&quot;);\n\npublic static String[] validateString(String str) {\n    if(VALIDATE_PATTERN.matcher(str).find()) {\n        String[] output = str.split(&quot;-&quot;);\n        if(output.length != 2) {\n            throw new RuntimeException(&quot;Invalid string format&quot;);\n        }\n        return output;\n    } else {\n        throw new RuntimeException(&quot;Invalid string format&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8964263,"reputation":415,"user_id":6685619,"display_name":"burak isik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659354406,"creation_date":1659354406,"answer_id":73193159,"question_id":3481828,"body_markdown":"Splitting and then printing string by using stream\r\n\r\n    String input = &quot;004-034556&quot;;\r\n    Stream&lt;String&gt; stream = Arrays.stream(input.split( &quot;-&quot; ));\r\n    stream.forEach(System.out::println);","title":"How do I split a string in Java?","body":"<p>Splitting and then printing string by using stream</p>\n<pre><code>String input = &quot;004-034556&quot;;\nStream&lt;String&gt; stream = Arrays.stream(input.split( &quot;-&quot; ));\nstream.forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12331407,"reputation":284,"user_id":8997268,"display_name":"Umesh Sulakude"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670630317,"creation_date":1664011517,"answer_id":73836088,"question_id":3481828,"body_markdown":"Using Pattern is Java&amp;nbsp;8. Below is the way!!\r\n\r\n    package com.company;\r\n\r\n    import java.util.regex.Pattern;\r\n\r\n    public class umeshtest {\r\n\r\n        public static void main(String a[]) {\r\n            String ss = &quot;I&#39;m Testing and testing the new feature&quot;;\r\n            Pattern.compile(&quot; &quot;).splitAsStream(ss).forEach(s -&gt; System.out.println(s));\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n","title":"How do I split a string in Java?","body":"<p>Using Pattern is Java 8. Below is the way!!</p>\n<pre><code>package com.company;\n\nimport java.util.regex.Pattern;\n\npublic class umeshtest {\n\n    public static void main(String a[]) {\n        String ss = &quot;I'm Testing and testing the new feature&quot;;\n        Pattern.compile(&quot; &quot;).splitAsStream(ss).forEach(s -&gt; System.out.println(s));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":115598,"reputation":21445,"user_id":303459,"accept_rate":83,"display_name":"riyana"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4791073,"favorite_count":0,"down_vote_count":8,"up_vote_count":1925,"accepted_answer_id":3481842,"answer_count":38,"score":1917,"last_activity_date":1697088427,"creation_date":1281754913,"question_id":3481828,"body_markdown":"I want to split a string using a delimiter, for example split `&quot;004-034556&quot;` into two separate strings by the delimiter `&quot;-&quot;`:\r\n\r\n    part1 = &quot;004&quot;;\r\n    part2 = &quot;034556&quot;;\r\n\r\nThat means the first string will contain the characters before `&#39;-&#39;`, and the second string will contain the characters after `&#39;-&#39;`.\r\n\r\nI also want to check if the string has the delimiter (`&#39;-&#39;`) in it.\r\n","title":"How do I split a string in Java?","body":"<p>I want to split a string using a delimiter, for example split <code>&quot;004-034556&quot;</code> into two separate strings by the delimiter <code>&quot;-&quot;</code>:</p>\n<pre><code>part1 = &quot;004&quot;;\npart2 = &quot;034556&quot;;\n</code></pre>\n<p>That means the first string will contain the characters before <code>'-'</code>, and the second string will contain the characters after <code>'-'</code>.</p>\n<p>I also want to check if the string has the delimiter (<code>'-'</code>) in it.</p>\n"},{"tags":["java","spring","hibernate","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697001626,"post_id":77268509,"comment_id":136222841,"body_markdown":"You really should be using `@Transactional` and make it readonly in this case. What I find weird is that when using a `byte[]` the value is truncated because in the end it all ends up in e `Blob` any way.","body":"You really should be using <code>@Transactional</code> and make it readonly in this case. What I find weird is that when using a <code>byte[]</code> the value is truncated because in the end it all ends up in e <code>Blob</code> any way."},{"owner":{"account_id":1887821,"reputation":2984,"user_id":1706691,"accept_rate":69,"display_name":"James"},"score":0,"creation_date":1697034743,"post_id":77268509,"comment_id":136229119,"body_markdown":"@M.Deinum - Thanks for your comment. Unfortunately, the stored procedure on the DB will hang if I run it using `@Transactional`. The stored procedure was written by a 3rd party vendor and I can&#39;t change it. By the way I can successfully call the stored procedure without a transaction and without using Spring Data. I&#39;ll post this code but I would like to use Spring Data.","body":"@M.Deinum - Thanks for your comment. Unfortunately, the stored procedure on the DB will hang if I run it using <code>@Transactional</code>. The stored procedure was written by a 3rd party vendor and I can&#39;t change it. By the way I can successfully call the stored procedure without a transaction and without using Spring Data. I&#39;ll post this code but I would like to use Spring Data."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697035935,"post_id":77268509,"comment_id":136229374,"body_markdown":"If you can call it with plain JDBC, what is the added benefit of adding JPA on top of that?","body":"If you can call it with plain JDBC, what is the added benefit of adding JPA on top of that?"},{"owner":{"account_id":1887821,"reputation":2984,"user_id":1706691,"accept_rate":69,"display_name":"James"},"score":0,"creation_date":1697036549,"post_id":77268509,"comment_id":136229495,"body_markdown":"@M.Deinum - I think two benefits of using Spring Data JPA over the JPA code posted above (or plain JDBC) are 1) The code is less verbose with Spring Data JPA and will be easier to maintain. 2) The rest of my code base is using Spring Data JPA. By using Spring Data JPA for this SP, it will keep the code more consistent and easier to maintain.","body":"@M.Deinum - I think two benefits of using Spring Data JPA over the JPA code posted above (or plain JDBC) are 1) The code is less verbose with Spring Data JPA and will be easier to maintain. 2) The rest of my code base is using Spring Data JPA. By using Spring Data JPA for this SP, it will keep the code more consistent and easier to maintain."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1697037425,"post_id":77268509,"comment_id":136229699,"body_markdown":"Using a `SimpleJdbcCall` or just `JdbcTemplate.call`/`JdbcTemplate.execute` isn&#39;t  anymore complex, with the benefit that it is executed within the current connection. I find it weird the the procedure hangs when it is in a transaction, seems like a flaw/fault/bug in the SP. It isn&#39;t Spring Data that is closing the connection, that is the default behavior when there is no transaction (or rather being closes at the end of the transaction which is very small here).","body":"Using a <code>SimpleJdbcCall</code> or just <code>JdbcTemplate.call</code>/<code>JdbcTemplate.execute</code> isn&#39;t  anymore complex, with the benefit that it is executed within the current connection. I find it weird the the procedure hangs when it is in a transaction, seems like a flaw/fault/bug in the SP. It isn&#39;t Spring Data that is closing the connection, that is the default behavior when there is no transaction (or rather being closes at the end of the transaction which is very small here)."},{"owner":{"account_id":1887821,"reputation":2984,"user_id":1706691,"accept_rate":69,"display_name":"James"},"score":0,"creation_date":1697039077,"post_id":77268509,"comment_id":136230020,"body_markdown":"@M.Deinum - Yes, I agree with your comment on the SP having an issue. Unfortunately, I&#39;m stuck with the SP. It makes sense that the connection would be closed w/ no txn by default after the end of Spring Data repo call. What&#39;s odd is that my code worked with Spring Boot 2.3 and the MSSQL JDBC 8.2.2.jre8. At any rate, I don&#39;t think I have much of a choice due to the faulty SP. Thanks for pointing out `SimpleJdbcCall`. I&#39;ll use that as like you said it isn&#39;t anymore complex. If you would like to post your comment as an answer, I&#39;ll accept and upvote. Thanks again for your help.","body":"@M.Deinum - Yes, I agree with your comment on the SP having an issue. Unfortunately, I&#39;m stuck with the SP. It makes sense that the connection would be closed w/ no txn by default after the end of Spring Data repo call. What&#39;s odd is that my code worked with Spring Boot 2.3 and the MSSQL JDBC 8.2.2.jre8. At any rate, I don&#39;t think I have much of a choice due to the faulty SP. Thanks for pointing out <code>SimpleJdbcCall</code>. I&#39;ll use that as like you said it isn&#39;t anymore complex. If you would like to post your comment as an answer, I&#39;ll accept and upvote. Thanks again for your help."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697087230,"post_id":77268509,"comment_id":136235703,"body_markdown":"Have you tried keeping the same driver version instead of the newer one? Might be related to the driver then. Spring is nothing more then a wrapper on those technologies (although Hibernate does add some additional layers on top of that).","body":"Have you tried keeping the same driver version instead of the newer one? Might be related to the driver then. Spring is nothing more then a wrapper on those technologies (although Hibernate does add some additional layers on top of that)."},{"owner":{"account_id":1887821,"reputation":2984,"user_id":1706691,"accept_rate":69,"display_name":"James"},"score":0,"creation_date":1697122028,"post_id":77268509,"comment_id":136242536,"body_markdown":"That&#39;s a good idea. I haven&#39;t tried it though because I migrated the project from Java 8 to Java 17 when upgrading Spring Boot 3. Microsoft doesn&#39;t have the old driver version using Java 17, so I&#39;d need to revert the project back to Java 8. I may try to do this after I complete my current upgrade project.","body":"That&#39;s a good idea. I haven&#39;t tried it though because I migrated the project from Java 8 to Java 17 when upgrading Spring Boot 3. Microsoft doesn&#39;t have the old driver version using Java 17, so I&#39;d need to revert the project back to Java 8. I may try to do this after I complete my current upgrade project."}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697088216,"creation_date":1697087874,"answer_id":77277871,"question_id":77268509,"body_markdown":"Instead of using the `EntityManager` with the `createStoredProcedureQuery` you might take a look at the [`SimpleJdbcCall`][1]. The API is quite similar and you could define it once (as a bean or in the constructor) and re-use the definition. The added benefit is that the callback to extract the result is operating on the current connection so it stays open. \r\n\r\nSpring Boot automatically configures a `JdbcTemplate` which you can re-use to create a `SimpleJdbcCall`. \r\n\r\n```java\r\nSimpleJdbcCall sp = new SimpleJdbcCall(jdbcTemplate);\r\nsp.declareParameters(new SqlParameter(&quot;carTypes&quot;, Types.VARCHAR),\r\nnew SqlParameter(&quot;tradeDate&quot;, Types.DATE), new SqlOutParameter(&quot;reportData&quot;, Types.BLOB, (rs, row) -&gt; { Blob blob = rs.getBlob(&quot;reportData&quot;); return blob.getBytes(1, (int) blob.length());})\r\n\r\n\r\nsp.executeObject(byte[].class, &quot;sedan,truck&quot;, date);\r\n\r\n```\r\n\r\nSomething along these lines should work. Not sure if the code is totally fine as I coded it from the top of my head. \r\n\r\n[1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/simple/SimpleJdbcCall.html","title":"How can I have Spring Data JPA keep the connection open without a transaction?","body":"<p>Instead of using the <code>EntityManager</code> with the <code>createStoredProcedureQuery</code> you might take a look at the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/simple/SimpleJdbcCall.html\" rel=\"nofollow noreferrer\"><code>SimpleJdbcCall</code></a>. The API is quite similar and you could define it once (as a bean or in the constructor) and re-use the definition. The added benefit is that the callback to extract the result is operating on the current connection so it stays open.</p>\n<p>Spring Boot automatically configures a <code>JdbcTemplate</code> which you can re-use to create a <code>SimpleJdbcCall</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>SimpleJdbcCall sp = new SimpleJdbcCall(jdbcTemplate);\nsp.declareParameters(new SqlParameter(&quot;carTypes&quot;, Types.VARCHAR),\nnew SqlParameter(&quot;tradeDate&quot;, Types.DATE), new SqlOutParameter(&quot;reportData&quot;, Types.BLOB, (rs, row) -&gt; { Blob blob = rs.getBlob(&quot;reportData&quot;); return blob.getBytes(1, (int) blob.length());})\n\n\nsp.executeObject(byte[].class, &quot;sedan,truck&quot;, date);\n\n</code></pre>\n<p>Something along these lines should work. Not sure if the code is totally fine as I coded it from the top of my head.</p>\n"}],"owner":{"account_id":1887821,"reputation":2984,"user_id":1706691,"accept_rate":69,"display_name":"James"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77277871,"answer_count":1,"score":0,"last_activity_date":1697088216,"creation_date":1696966110,"question_id":77268509,"body_markdown":"I have a Spring Boot 3.0 application that gets a Blob from a Spring Data repository:\r\n\r\n    @Service\r\n    public class CarService {\r\n    \r\n    \tprivate final CarRepository carRepository;\r\n    \r\n    \tpublic Set&lt;CarDto&gt; getValuations(LocalDate date) {    \t\t\r\n    \t\tBlob reportData = carRepository.getReportData(&quot;sedan,truck&quot;, date);\r\n    \t\ttry {\r\n    \t\t\tbyte[] b= reportData.getBytes(1, (int) reportData.length());\r\n                log.debug(&quot;connection is closed by Spring Data JPA&quot;);\r\n                //...\r\n    \t\t} \r\n\r\n    public interface CarRepository extends Repository&lt;Car, Long&gt; {\r\n    \t\r\n    \t@Procedure(value=&quot;pValuation&quot;, outputParameterName=&quot;reportData&quot;)\r\n        Blob getReportData(String carTypes, LocalDate tradeDate);\r\n\r\nUnfortunately, Spring Data closes the connection after returning the `Blob` from the `getReportData` method. This results in the following error when I try to get the bytes from the `Blob`:\r\n\r\n&gt; SQLException: com.microsoft.sqlserver.jdbc.SQLServerException: The connection is closed. The connection is closed.\r\n\r\nI can keep the connection open by making `getValuations` transactional (i.e., annotation the method as `@Transactional`), but then the database hangs because of locking issues. \r\n\r\nHow can I tell Spring Data to keep the connection open without a transaction so I can retrieve bytes from the Blob? \r\n\r\n*Note: I cannot use byte[] as the return type of `getReportData` since the data will be truncated at 8000 bytes.* \r\n\r\n*Note: My procedure, `pValuation`, is read only.*\r\n\r\n**Update**\r\n\r\nI can call this stored procedure without using Spring Data JPA (and without a transaction) as follows:\r\n\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    @Slf4j\r\n    public class CarService {\r\n      \r\n        private final CarRepository carRepository;\r\n      \tprivate final EntityManager em;\r\n    \r\n       \tpublic Set&lt;CarDto&gt; getValuations(LocalDate date) {\r\n    \t\t\r\n    \t\tStoredProcedureQuery q = em.createStoredProcedureQuery(&quot;pValuation&quot;);\r\n    \t\tq.registerStoredProcedureParameter(&quot;carTypes&quot;, String.class, ParameterMode.IN);\r\n    \t\tq.registerStoredProcedureParameter(&quot;tradeDate&quot;, LocalDate.class, ParameterMode.IN);\r\n    \t\tq.registerStoredProcedureParameter(&quot;reportData&quot;, Blob.class, ParameterMode.OUT);\r\n    \t\tq.setParameter(&quot;carTypes&quot;, &quot;sedan,truck&quot;);\r\n    \t\tq.setParameter(&quot;tradeDate&quot;, date);\r\n    \t\tq.execute();\r\n    \t\t\r\n    \t\tBlob reportData = (Blob) q.getOutputParameterValue(&quot;reportData&quot;);\r\n    \t\t\r\n    \t\tlog.debug(&quot;got Blob&quot;);\r\n    \t\ttry {\r\n    \t\t\tbyte[] b= reportData.getBytes(1, (int) reportData.length());\r\n    \t\t\tlog.debug(&quot;got bytes&quot;);\r\n    \t\t\treturn carRepository.getCarValuations(b);\r\n        \t} \r\n        \tcatch (SQLException convertBlobToBytesException) {\r\n        \t\t\tlog.error(convertBlobToBytesException.toString());\r\n        \t}\r\n        }\r\n\r\nThis code works because the connection stays open while reading the bytes. From what I can tell, Spring Data closes the connection after the repository method call unless I have a transaction (which I can&#39;t use b/c the DB SP hangs). ","title":"How can I have Spring Data JPA keep the connection open without a transaction?","body":"<p>I have a Spring Boot 3.0 application that gets a Blob from a Spring Data repository:</p>\n<pre><code>@Service\npublic class CarService {\n\n    private final CarRepository carRepository;\n\n    public Set&lt;CarDto&gt; getValuations(LocalDate date) {          \n        Blob reportData = carRepository.getReportData(&quot;sedan,truck&quot;, date);\n        try {\n            byte[] b= reportData.getBytes(1, (int) reportData.length());\n            log.debug(&quot;connection is closed by Spring Data JPA&quot;);\n            //...\n        } \n\npublic interface CarRepository extends Repository&lt;Car, Long&gt; {\n    \n    @Procedure(value=&quot;pValuation&quot;, outputParameterName=&quot;reportData&quot;)\n    Blob getReportData(String carTypes, LocalDate tradeDate);\n</code></pre>\n<p>Unfortunately, Spring Data closes the connection after returning the <code>Blob</code> from the <code>getReportData</code> method. This results in the following error when I try to get the bytes from the <code>Blob</code>:</p>\n<blockquote>\n<p>SQLException: com.microsoft.sqlserver.jdbc.SQLServerException: The connection is closed. The connection is closed.</p>\n</blockquote>\n<p>I can keep the connection open by making <code>getValuations</code> transactional (i.e., annotation the method as <code>@Transactional</code>), but then the database hangs because of locking issues.</p>\n<p>How can I tell Spring Data to keep the connection open without a transaction so I can retrieve bytes from the Blob?</p>\n<p><em>Note: I cannot use byte[] as the return type of <code>getReportData</code> since the data will be truncated at 8000 bytes.</em></p>\n<p><em>Note: My procedure, <code>pValuation</code>, is read only.</em></p>\n<p><strong>Update</strong></p>\n<p>I can call this stored procedure without using Spring Data JPA (and without a transaction) as follows:</p>\n<pre><code>@Service\n@RequiredArgsConstructor\n@Slf4j\npublic class CarService {\n  \n    private final CarRepository carRepository;\n    private final EntityManager em;\n\n    public Set&lt;CarDto&gt; getValuations(LocalDate date) {\n        \n        StoredProcedureQuery q = em.createStoredProcedureQuery(&quot;pValuation&quot;);\n        q.registerStoredProcedureParameter(&quot;carTypes&quot;, String.class, ParameterMode.IN);\n        q.registerStoredProcedureParameter(&quot;tradeDate&quot;, LocalDate.class, ParameterMode.IN);\n        q.registerStoredProcedureParameter(&quot;reportData&quot;, Blob.class, ParameterMode.OUT);\n        q.setParameter(&quot;carTypes&quot;, &quot;sedan,truck&quot;);\n        q.setParameter(&quot;tradeDate&quot;, date);\n        q.execute();\n        \n        Blob reportData = (Blob) q.getOutputParameterValue(&quot;reportData&quot;);\n        \n        log.debug(&quot;got Blob&quot;);\n        try {\n            byte[] b= reportData.getBytes(1, (int) reportData.length());\n            log.debug(&quot;got bytes&quot;);\n            return carRepository.getCarValuations(b);\n        } \n        catch (SQLException convertBlobToBytesException) {\n                log.error(convertBlobToBytesException.toString());\n        }\n    }\n</code></pre>\n<p>This code works because the connection stays open while reading the bytes. From what I can tell, Spring Data closes the connection after the repository method call unless I have a transaction (which I can't use b/c the DB SP hangs).</p>\n"},{"tags":["java","spring-boot","amazon-s3"],"answers":[{"tags":[],"owner":{"account_id":22397,"reputation":417270,"user_id":55159,"accept_rate":79,"display_name":"Quassnoi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697087655,"creation_date":1697087655,"answer_id":77277854,"question_id":77277379,"body_markdown":"If all you have is a presigned URL to download from the source bucket, you won&#39;t be able to upload this (or any other) file to the destination bucket.\r\n\r\nIf you have an access token with permissions both to read from source and write to destination, you can generate a presigned URL on the destination bucket which would [copy a certain file][1] from the source bucket.\r\n\r\nTo do this, include `x-amz-copy-source=sourcebucket/sourcefile` as a parameter to the URL of the target file and sign this URL.\r\n\r\nThe copy operation will be triggered by a issuing a `PUT` request to this URL with an empty body.\r\n\r\n  [1]: https://docs.aws.amazon.com/AmazonS3/latest/userguide/copy-object.html","title":"How can get S3 files from presigned url and upload that content to another bucket","body":"<p>If all you have is a presigned URL to download from the source bucket, you won't be able to upload this (or any other) file to the destination bucket.</p>\n<p>If you have an access token with permissions both to read from source and write to destination, you can generate a presigned URL on the destination bucket which would <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/copy-object.html\" rel=\"nofollow noreferrer\">copy a certain file</a> from the source bucket.</p>\n<p>To do this, include <code>x-amz-copy-source=sourcebucket/sourcefile</code> as a parameter to the URL of the target file and sign this URL.</p>\n<p>The copy operation will be triggered by a issuing a <code>PUT</code> request to this URL with an empty body.</p>\n"}],"owner":{"account_id":12838432,"reputation":13,"user_id":9287208,"display_name":"Tejaswini Jadhav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697087655,"creation_date":1697078332,"question_id":77277379,"body_markdown":"I want to upload image using pre-signed URL from one bucket to the another bucket.\r\nFirst bucket has its own pre-signed URL, by using this URL need to upload the image on s3 bucket. Basically avoid download file. I need to do this using java spring boot application.\r\n","title":"How can get S3 files from presigned url and upload that content to another bucket","body":"<p>I want to upload image using pre-signed URL from one bucket to the another bucket.\nFirst bucket has its own pre-signed URL, by using this URL need to upload the image on s3 bucket. Basically avoid download file. I need to do this using java spring boot application.</p>\n"},{"tags":["java","spring","api-gateway","spring-cloud-gateway"],"answers":[{"tags":[],"owner":{"account_id":6512308,"reputation":186,"user_id":5039145,"accept_rate":10,"display_name":"Rohit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697087603,"creation_date":1697087603,"answer_id":77277848,"question_id":77271531,"body_markdown":"Below worked for me. I had to remove properties from yaml and add it to class file:\r\n\r\n    import java.util.Arrays;\r\n    import java.util.Collections;\r\n    \r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.web.cors.CorsConfiguration;\r\n    import org.springframework.web.cors.reactive.CorsWebFilter;\r\n    import org.springframework.web.cors.reactive.UrlBasedCorsConfigurationSource;\r\n    \r\n    @Configuration\r\n    public class CorsWebFilterConfig {\r\n    \r\n    \t@Bean\r\n    \tpublic CorsWebFilter corsWebFilter() {\r\n    \r\n    \t\tfinal CorsConfiguration corsConfig = new CorsConfiguration();\r\n    \r\n    \t\t// TODO: Read the below values from properties file.\r\n    \t\tcorsConfig.setAllowedOriginPatterns(Arrays.asList(&quot;*localhost:8080&quot;, &quot;*abc.com&quot;, &quot;*example.com&quot;));\r\n    \t\tcorsConfig.setMaxAge(3600L);\r\n    \t\tcorsConfig.setAllowedMethods(Collections.singletonList(&quot;POST&quot;));\r\n    \t\tcorsConfig.addAllowedHeader(&quot;*&quot;);\r\n    \r\n    \t\tfinal UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n    \t\tsource.registerCorsConfiguration(&quot;/**&quot;, corsConfig);\r\n    \r\n    \t\treturn new CorsWebFilter(source);\r\n    \t}\r\n    \r\n    }","title":"Unknown property &#39;allowedOriginPattern&#39; for type &#39;org.springframework.web.cors.CorsConfiguration&#39;","body":"<p>Below worked for me. I had to remove properties from yaml and add it to class file:</p>\n<pre><code>import java.util.Arrays;\nimport java.util.Collections;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.cors.CorsConfiguration;\nimport org.springframework.web.cors.reactive.CorsWebFilter;\nimport org.springframework.web.cors.reactive.UrlBasedCorsConfigurationSource;\n\n@Configuration\npublic class CorsWebFilterConfig {\n\n    @Bean\n    public CorsWebFilter corsWebFilter() {\n\n        final CorsConfiguration corsConfig = new CorsConfiguration();\n\n        // TODO: Read the below values from properties file.\n        corsConfig.setAllowedOriginPatterns(Arrays.asList(&quot;*localhost:8080&quot;, &quot;*abc.com&quot;, &quot;*example.com&quot;));\n        corsConfig.setMaxAge(3600L);\n        corsConfig.setAllowedMethods(Collections.singletonList(&quot;POST&quot;));\n        corsConfig.addAllowedHeader(&quot;*&quot;);\n\n        final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, corsConfig);\n\n        return new CorsWebFilter(source);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":6512308,"reputation":186,"user_id":5039145,"accept_rate":10,"display_name":"Rohit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1697087603,"creation_date":1697014164,"question_id":77271531,"body_markdown":"I have a Spring Cloud Gateway application which supported &#39;http://example.com&#39; as a origin. So to handle that below was my code:\r\n\r\n```yaml\r\nspring:\r\n  cloud:\r\n    gateway:          \r\n      globalcors:\r\n        cors-configurations:\r\n          &#39;[/**]&#39;:\r\n            allowedOrigins: &quot;http://localhost:8080&quot;\r\n```\r\n\r\nNow the requirement is to handled anything that ends with **host:8080**. I tried to use ***host:8080**, but that is not working.\r\n\r\nI tried to find the solution and it seems like we have [addAllowedOriginPattern][1], but I am not sure how to handle that using my YAML file.\r\n\r\nHow do I handle a wild card pattern in the YAML file?\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/cors/CorsConfiguration.html#addAllowedOriginPattern(java.lang.String)","title":"Unknown property &#39;allowedOriginPattern&#39; for type &#39;org.springframework.web.cors.CorsConfiguration&#39;","body":"<p>I have a Spring Cloud Gateway application which supported 'http://example.com' as a origin. So to handle that below was my code:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  cloud:\n    gateway:          \n      globalcors:\n        cors-configurations:\n          '[/**]':\n            allowedOrigins: &quot;http://localhost:8080&quot;\n</code></pre>\n<p>Now the requirement is to handled anything that ends with <strong>host:8080</strong>. I tried to use *<strong>host:8080</strong>, but that is not working.</p>\n<p>I tried to find the solution and it seems like we have <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/cors/CorsConfiguration.html#addAllowedOriginPattern(java.lang.String)\" rel=\"nofollow noreferrer\">addAllowedOriginPattern</a>, but I am not sure how to handle that using my YAML file.</p>\n<p>How do I handle a wild card pattern in the YAML file?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":3,"creation_date":1672234722,"post_id":74940897,"comment_id":132247604,"body_markdown":"Let me guess, using AOP with some catch all pointcut, proxying the filter.","body":"Let me guess, using AOP with some catch all pointcut, proxying the filter."},{"owner":{"account_id":3045329,"reputation":1501,"user_id":2581174,"accept_rate":71,"display_name":"Valsaraj Viswanathan"},"score":0,"creation_date":1672235041,"post_id":74940897,"comment_id":132247679,"body_markdown":"Yes, we have this one: \n\n\t@Around(&quot;execution(* com.app.services.register..*.* (..))&quot;)\n\tpublic Object logOnStartAndBeforeReturnOfMethods(ProceedingJoinPoint proceedingJoinPoint) throws Throwable {","body":"Yes, we have this one:   \t@Around(&quot;execution(* com.app.services.register..*.* (..))&quot;) \tpublic Object logOnStartAndBeforeReturnOfMethods(ProceedingJoinPoint proceedingJoinPoint) throws Throwable {"},{"owner":{"account_id":3045329,"reputation":1501,"user_id":2581174,"accept_rate":71,"display_name":"Valsaraj Viswanathan"},"score":0,"creation_date":1672235874,"post_id":74940897,"comment_id":132247915,"body_markdown":"@M.Deinum would you share more on this, whether it is causing the issue?","body":"@M.Deinum would you share more on this, whether it is causing the issue?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":6,"creation_date":1672236137,"post_id":74940897,"comment_id":132247988,"body_markdown":"It is. As it proxies the filter, the `init` method is `final` cannot be proxied, will thus be executed on the proxy instead of being passed through to the actual object. The proxy doesn&#39;t have any of its fields initialized (no need to) and thus here you get a `NullPointerException`. Don&#39;t mnake your pointcut so broad (or exclude the filter package for instance).","body":"It is. As it proxies the filter, the <code>init</code> method is <code>final</code> cannot be proxied, will thus be executed on the proxy instead of being passed through to the actual object. The proxy doesn&#39;t have any of its fields initialized (no need to) and thus here you get a <code>NullPointerException</code>. Don&#39;t mnake your pointcut so broad (or exclude the filter package for instance)."}],"answers":[{"tags":[],"owner":{"account_id":1008209,"reputation":119,"user_id":1021356,"display_name":"Srikanth Reddy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682921988,"creation_date":1682921988,"answer_id":76145070,"question_id":74940897,"body_markdown":"Had the same issue. I have restricted the filter package to just controllers as suggested by Deimun, and it started working. ","title":"NullPointerException in GenericFilterBean on Spring Boot application start after adding a custom filter","body":"<p>Had the same issue. I have restricted the filter package to just controllers as suggested by Deimun, and it started working.</p>\n"},{"tags":[],"owner":{"account_id":10717922,"reputation":41,"user_id":7894381,"display_name":"Sergei Golitsyn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697087598,"creation_date":1697087598,"answer_id":77277843,"question_id":74940897,"body_markdown":"I had the same problem with the Spring Boot app and **Micrometer**. I realized that **you cannot use Micrometer annotations whenever you want**. It happens because of the Proxy mechanism. **JDK Dynamic Proxy** can only create proxy if the target class implements at least 1 interface whereas **CGLIB Proxy** has no such limitation and is able to create proxy as long as the target class / method is non-final. This is important because it will help us understand why **Spring AOP will not work on OncePerRequestFilter class**.","title":"NullPointerException in GenericFilterBean on Spring Boot application start after adding a custom filter","body":"<p>I had the same problem with the Spring Boot app and <strong>Micrometer</strong>. I realized that <strong>you cannot use Micrometer annotations whenever you want</strong>. It happens because of the Proxy mechanism. <strong>JDK Dynamic Proxy</strong> can only create proxy if the target class implements at least 1 interface whereas <strong>CGLIB Proxy</strong> has no such limitation and is able to create proxy as long as the target class / method is non-final. This is important because it will help us understand why <strong>Spring AOP will not work on OncePerRequestFilter class</strong>.</p>\n"}],"owner":{"account_id":3045329,"reputation":1501,"user_id":2581174,"accept_rate":71,"display_name":"Valsaraj Viswanathan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1373,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1697087598,"creation_date":1672234401,"question_id":74940897,"body_markdown":"NullPointerException in GenericFilterBean on Spring Boot application start after adding a custom filter that extends OncePerRequestFilter.\r\n\r\nHere is the stack trace:\r\n\r\n&gt; Caused by: java.lang.NullPointerException: Cannot invoke\r\n&gt; &quot;org.apache.commons.logging.Log.isDebugEnabled()&quot; because\r\n&gt; &quot;this.logger&quot; is null\r\n&gt;     at org.springframework.web.filter.GenericFilterBean.init(GenericFilterBean.java:241)\r\n\r\nWe are using Spring Boot version 2.7.6.\r\n\r\nAny solution for this issue?\r\n\r\n","title":"NullPointerException in GenericFilterBean on Spring Boot application start after adding a custom filter","body":"<p>NullPointerException in GenericFilterBean on Spring Boot application start after adding a custom filter that extends OncePerRequestFilter.</p>\n<p>Here is the stack trace:</p>\n<blockquote>\n<p>Caused by: java.lang.NullPointerException: Cannot invoke\n&quot;org.apache.commons.logging.Log.isDebugEnabled()&quot; because\n&quot;this.logger&quot; is null\nat org.springframework.web.filter.GenericFilterBean.init(GenericFilterBean.java:241)</p>\n</blockquote>\n<p>We are using Spring Boot version 2.7.6.</p>\n<p>Any solution for this issue?</p>\n"},{"tags":["java","apache-kafka","message","kafka-topic"],"comments":[{"owner":{"account_id":12673101,"reputation":1673,"user_id":9210263,"display_name":"LeYAUable"},"score":0,"creation_date":1610963565,"post_id":28579948,"comment_id":116289088,"body_markdown":"My answer gives you an actual way of doing this instead of just consuming the messages: https://stackoverflow.com/a/61916983/9210263","body":"My answer gives you an actual way of doing this instead of just consuming the messages: <a href=\"https://stackoverflow.com/a/61916983/9210263\">stackoverflow.com/a/61916983/9210263</a>"}],"answers":[{"tags":[],"owner":{"account_id":134292,"reputation":6442,"user_id":1864133,"accept_rate":100,"display_name":"Lundahl"},"down_vote_count":5,"up_vote_count":47,"is_accepted":true,"score":42,"last_activity_date":1424383065,"creation_date":1424383065,"answer_id":28617771,"question_id":28579948,"body_markdown":"The only way that comes to mind for this from a consumer point of view is to actually consume the messages and count them then. \r\n\r\nThe Kafka broker exposes JMX counters for number of messages received since start-up but you cannot know how many of them have been purged already.\r\n\r\nIn most common scenarios, messages in Kafka is best seen as an infinite stream and getting a discrete value of how many that is currently being kept on disk is not relevant. Furthermore things get more complicated when dealing with a cluster of brokers which all have a subset of the messages in a topic.","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>The only way that comes to mind for this from a consumer point of view is to actually consume the messages and count them then. </p>\n\n<p>The Kafka broker exposes JMX counters for number of messages received since start-up but you cannot know how many of them have been purged already.</p>\n\n<p>In most common scenarios, messages in Kafka is best seen as an infinite stream and getting a discrete value of how many that is currently being kept on disk is not relevant. Furthermore things get more complicated when dealing with a cluster of brokers which all have a subset of the messages in a topic.</p>\n"},{"tags":[],"owner":{"account_id":122918,"reputation":7484,"user_id":317027,"accept_rate":72,"display_name":"hba"},"down_vote_count":4,"up_vote_count":3,"is_accepted":false,"score":-1,"last_activity_date":1454448621,"creation_date":1454448621,"answer_id":35164142,"question_id":28579948,"body_markdown":"I haven&#39;t tried [this][1] myself, but it seems to make sense.\r\n\r\nYou can also use `kafka.tools.ConsumerOffsetChecker` ([source][2]).\r\n\r\n\r\n  [1]: http://qnalist.com/questions/5974259/number-of-messages-in-a-kafka-topic\r\n  [2]: https://github.com/apache/kafka/blob/0.8/core/src/main/scala/kafka/tools/ConsumerOffsetChecker.scala","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>I haven't tried <a href=\"http://qnalist.com/questions/5974259/number-of-messages-in-a-kafka-topic\" rel=\"nofollow\">this</a> myself, but it seems to make sense.</p>\n\n<p>You can also use <code>kafka.tools.ConsumerOffsetChecker</code> (<a href=\"https://github.com/apache/kafka/blob/0.8/core/src/main/scala/kafka/tools/ConsumerOffsetChecker.scala\" rel=\"nofollow\">source</a>).</p>\n"},{"tags":[],"owner":{"account_id":1029722,"reputation":1433,"user_id":1038288,"accept_rate":40,"display_name":"ssemichev"},"down_vote_count":1,"up_vote_count":129,"is_accepted":false,"score":128,"last_activity_date":1637855418,"creation_date":1455566524,"answer_id":35418031,"question_id":28579948,"body_markdown":"It is not java, but may be useful    \r\n\r\n    ./bin/kafka-run-class.sh kafka.tools.GetOffsetShell \\\r\n      --broker-list &lt;broker&gt;:&lt;port&gt; \\\r\n      --topic &lt;topic-name&gt; \\\r\n      | awk -F  &quot;:&quot; &#39;{sum += $3} END {print sum}&#39;","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>It is not java, but may be useful</p>\n<pre><code>./bin/kafka-run-class.sh kafka.tools.GetOffsetShell \\\n  --broker-list &lt;broker&gt;:&lt;port&gt; \\\n  --topic &lt;topic-name&gt; \\\n  | awk -F  &quot;:&quot; '{sum += $3} END {print sum}'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":201101,"reputation":21953,"user_id":447344,"accept_rate":44,"display_name":"Thomas Decaux"},"down_vote_count":2,"up_vote_count":13,"is_accepted":false,"score":11,"last_activity_date":1456082653,"creation_date":1456052090,"answer_id":35535200,"question_id":28579948,"body_markdown":"Use https://prestodb.io/docs/current/connector/kafka-tutorial.html\r\n\r\nA super SQL engine, provided by Facebook, that connects on several data sources (Cassandra, Kafka, JMX, Redis ...).\r\n\r\nPrestoDB is running as a server with optional workers (there is a standalone mode without extra workers), then you use a small executable JAR (called presto CLI) to make queries.\r\n\r\nOnce you have configured well the Presto server , you can use traditionnal SQL:\r\n\r\n    SELECT count(*) FROM TOPIC_NAME;","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>Use <a href=\"https://prestodb.io/docs/current/connector/kafka-tutorial.html\" rel=\"noreferrer\">https://prestodb.io/docs/current/connector/kafka-tutorial.html</a></p>\n\n<p>A super SQL engine, provided by Facebook, that connects on several data sources (Cassandra, Kafka, JMX, Redis ...).</p>\n\n<p>PrestoDB is running as a server with optional workers (there is a standalone mode without extra workers), then you use a small executable JAR (called presto CLI) to make queries.</p>\n\n<p>Once you have configured well the Presto server , you can use traditionnal SQL:</p>\n\n<pre><code>SELECT count(*) FROM TOPIC_NAME;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322007,"reputation":7050,"user_id":641170,"accept_rate":88,"display_name":"Rudy"},"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1500308705,"creation_date":1468921243,"answer_id":38454823,"question_id":28579948,"body_markdown":"I actually use this for benchmarking my POC. The item you want to use ConsumerOffsetChecker. You can run it using bash script like below.\r\n\r\n    bin/kafka-run-class.sh kafka.tools.ConsumerOffsetChecker  --topic test --zookeeper localhost:2181 --group testgroup\r\n\r\nAnd below is the result : \r\n[![enter image description here][1]][1]\r\nAs you can see on the red box, 999 is the number of message currently in the topic.\r\n\r\nUpdate: ConsumerOffsetChecker is deprecated since 0.10.0, you may want to start using ConsumerGroupCommand.\r\n\r\n  [1]: http://i.stack.imgur.com/ZELQB.png\r\n  [2]: http://i.stack.imgur.com/1GqIu.png","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>I actually use this for benchmarking my POC. The item you want to use ConsumerOffsetChecker. You can run it using bash script like below.</p>\n\n<pre><code>bin/kafka-run-class.sh kafka.tools.ConsumerOffsetChecker  --topic test --zookeeper localhost:2181 --group testgroup\n</code></pre>\n\n<p>And below is the result : \n<a href=\"https://i.stack.imgur.com/ZELQB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ZELQB.png\" alt=\"enter image description here\"></a>\nAs you can see on the red box, 999 is the number of message currently in the topic.</p>\n\n<p>Update: ConsumerOffsetChecker is deprecated since 0.10.0, you may want to start using ConsumerGroupCommand.</p>\n"},{"tags":[],"owner":{"account_id":199671,"reputation":148444,"user_id":445131,"accept_rate":89,"display_name":"Eric Leschinski"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1472652478,"creation_date":1472652015,"answer_id":39251742,"question_id":28579948,"body_markdown":"Apache Kafka command to get un handled messages on all partitions of a topic:\r\n\r\n    kafka-run-class kafka.tools.ConsumerOffsetChecker \r\n        --topic test --zookeeper localhost:2181 \r\n        --group test_group\r\n\r\nPrints:\r\n\r\n    Group      Topic        Pid Offset          logSize         Lag             Owner\r\n    test_group test         0   11051           11053           2               none\r\n    test_group test         1   10810           10812           2               none\r\n    test_group test         2   11027           11028           1               none\r\n\r\nColumn 6 is the un-handled messages.  Add them up like this:\r\n\r\n    kafka-run-class kafka.tools.ConsumerOffsetChecker \r\n        --topic test --zookeeper localhost:2181 \r\n        --group test_group 2&gt;/dev/null | awk &#39;NR&gt;1 {sum += $6} \r\n        END {print sum}&#39;\r\n\r\nawk reads the rows, skips the header line and adds up the 6th column and at the end prints the sum.\r\n\r\nPrints\r\n\r\n    5\r\n\r\n","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>Apache Kafka command to get un handled messages on all partitions of a topic:</p>\n\n<pre><code>kafka-run-class kafka.tools.ConsumerOffsetChecker \n    --topic test --zookeeper localhost:2181 \n    --group test_group\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>Group      Topic        Pid Offset          logSize         Lag             Owner\ntest_group test         0   11051           11053           2               none\ntest_group test         1   10810           10812           2               none\ntest_group test         2   11027           11028           1               none\n</code></pre>\n\n<p>Column 6 is the un-handled messages.  Add them up like this:</p>\n\n<pre><code>kafka-run-class kafka.tools.ConsumerOffsetChecker \n    --topic test --zookeeper localhost:2181 \n    --group test_group 2&gt;/dev/null | awk 'NR&gt;1 {sum += $6} \n    END {print sum}'\n</code></pre>\n\n<p>awk reads the rows, skips the header line and adds up the 6th column and at the end prints the sum.</p>\n\n<p>Prints</p>\n\n<pre><code>5\n</code></pre>\n"},{"tags":[],"owner":{"account_id":143589,"reputation":1483,"user_id":352035,"display_name":"AutomatedMike"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1477566176,"creation_date":1477566176,"answer_id":40282980,"question_id":28579948,"body_markdown":"To get all the messages stored for the topic you can seek the consumer to the beginning and end of the stream for each partition and sum the results\r\n\r\n    List&lt;TopicPartition&gt; partitions = consumer.partitionsFor(topic).stream()\r\n            .map(p -&gt; new TopicPartition(topic, p.partition()))\r\n            .collect(Collectors.toList());\r\n        consumer.assign(partitions); \r\n        consumer.seekToEnd(Collections.emptySet());\r\n    Map&lt;TopicPartition, Long&gt; endPartitions = partitions.stream()\r\n            .collect(Collectors.toMap(Function.identity(), consumer::position));\r\n        consumer.seekToBeginning(Collections.emptySet());\r\n    System.out.println(partitions.stream().mapToLong(p -&gt; endPartitions.get(p) - consumer.position(p)).sum());\r\n\r\n","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>To get all the messages stored for the topic you can seek the consumer to the beginning and end of the stream for each partition and sum the results</p>\n\n<pre><code>List&lt;TopicPartition&gt; partitions = consumer.partitionsFor(topic).stream()\n        .map(p -&gt; new TopicPartition(topic, p.partition()))\n        .collect(Collectors.toList());\n    consumer.assign(partitions); \n    consumer.seekToEnd(Collections.emptySet());\nMap&lt;TopicPartition, Long&gt; endPartitions = partitions.stream()\n        .collect(Collectors.toMap(Function.identity(), consumer::position));\n    consumer.seekToBeginning(Collections.emptySet());\nSystem.out.println(partitions.stream().mapToLong(p -&gt; endPartitions.get(p) - consumer.position(p)).sum());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2296191,"reputation":2082,"user_id":2017567,"display_name":"Christophe Quintard"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1510767244,"creation_date":1510767244,"answer_id":47313863,"question_id":28579948,"body_markdown":"Using the Java client of Kafka 2.11-1.0.0, you can do the following thing :\r\n\r\n        KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;&gt;(props);\r\n        consumer.subscribe(Collections.singletonList(&quot;test&quot;));\r\n        while(true) {\r\n            ConsumerRecords&lt;String, String&gt; records = consumer.poll(100);\r\n            for (ConsumerRecord&lt;String, String&gt; record : records) {\r\n                System.out.printf(&quot;offset = %d, key = %s, value = %s%n&quot;, record.offset(), record.key(), record.value());\r\n\r\n                // after each message, query the number of messages of the topic\r\n                Set&lt;TopicPartition&gt; partitions = consumer.assignment();\r\n                Map&lt;TopicPartition, Long&gt; offsets = consumer.endOffsets(partitions);\r\n                for(TopicPartition partition : offsets.keySet()) {\r\n                    System.out.printf(&quot;partition %s is at %d\\n&quot;, partition.topic(), offsets.get(partition));\r\n                }\r\n            }\r\n        }\r\n\r\nOutput is something like this :\r\n\r\n    offset = 10, key = null, value = un\r\n    partition test is at 13\r\n    offset = 11, key = null, value = deux\r\n    partition test is at 13\r\n    offset = 12, key = null, value = trois\r\n    partition test is at 13","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>Using the Java client of Kafka 2.11-1.0.0, you can do the following thing :</p>\n\n<pre><code>    KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;&gt;(props);\n    consumer.subscribe(Collections.singletonList(\"test\"));\n    while(true) {\n        ConsumerRecords&lt;String, String&gt; records = consumer.poll(100);\n        for (ConsumerRecord&lt;String, String&gt; record : records) {\n            System.out.printf(\"offset = %d, key = %s, value = %s%n\", record.offset(), record.key(), record.value());\n\n            // after each message, query the number of messages of the topic\n            Set&lt;TopicPartition&gt; partitions = consumer.assignment();\n            Map&lt;TopicPartition, Long&gt; offsets = consumer.endOffsets(partitions);\n            for(TopicPartition partition : offsets.keySet()) {\n                System.out.printf(\"partition %s is at %d\\n\", partition.topic(), offsets.get(partition));\n            }\n        }\n    }\n</code></pre>\n\n<p>Output is something like this :</p>\n\n<pre><code>offset = 10, key = null, value = un\npartition test is at 13\noffset = 11, key = null, value = deux\npartition test is at 13\noffset = 12, key = null, value = trois\npartition test is at 13\n</code></pre>\n"},{"tags":[],"owner":{"account_id":185859,"reputation":1758,"user_id":422842,"accept_rate":33,"display_name":"f01"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1515134328,"creation_date":1515134328,"answer_id":48108441,"question_id":28579948,"body_markdown":"In most recent versions of Kafka Manager, there is a column titled _Summed Recent Offsets_.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1Z5rI.png","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>In most recent versions of Kafka Manager, there is a column titled <em>Summed Recent Offsets</em>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/1Z5rI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1Z5rI.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":1531303,"reputation":4187,"user_id":3636464,"accept_rate":75,"display_name":"pdp"},"down_vote_count":2,"up_vote_count":21,"is_accepted":false,"score":19,"last_activity_date":1524975976,"creation_date":1524975976,"answer_id":50083376,"question_id":28579948,"body_markdown":"Sometimes the interest is in knowing the number of messages in each partition, for example, when testing a custom partitioner.The ensuing steps have been tested to work with Kafka 0.10.2.1-2 from Confluent 3.2. Given a Kafka topic, `kt` and the following command-line:\r\n\r\n    $ kafka-run-class kafka.tools.GetOffsetShell \\\r\n      --broker-list host01:9092,host02:9092,host02:9092 --topic kt\r\nThat prints the sample output showing the count of messages in the three partitions:\r\n\r\n    kt:2:6138\r\n    kt:1:6123\r\n    kt:0:6137\r\nThe number of lines could be more or less depending on the number of partitions for the topic.","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>Sometimes the interest is in knowing the number of messages in each partition, for example, when testing a custom partitioner.The ensuing steps have been tested to work with Kafka 0.10.2.1-2 from Confluent 3.2. Given a Kafka topic, <code>kt</code> and the following command-line:</p>\n\n<pre><code>$ kafka-run-class kafka.tools.GetOffsetShell \\\n  --broker-list host01:9092,host02:9092,host02:9092 --topic kt\n</code></pre>\n\n<p>That prints the sample output showing the count of messages in the three partitions:</p>\n\n<pre><code>kt:2:6138\nkt:1:6123\nkt:0:6137\n</code></pre>\n\n<p>The number of lines could be more or less depending on the number of partitions for the topic.</p>\n"},{"tags":[],"owner":{"account_id":3065469,"reputation":1545,"user_id":2597267,"display_name":"Borislav Markov"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1555894015,"creation_date":1533566226,"answer_id":51710092,"question_id":28579948,"body_markdown":"Run the following (assuming `kafka-console-consumer.sh` is on the path):\r\n\r\n    kafka-console-consumer.sh  --from-beginning \\\r\n    --bootstrap-server yourbroker:9092 --property print.key=true  \\\r\n    --property print.value=false --property print.partition \\\r\n    --topic yourtopic --timeout-ms 5000 | tail -n 10|grep &quot;Processed a total of&quot;\r\n","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>Run the following (assuming <code>kafka-console-consumer.sh</code> is on the path):</p>\n\n<pre><code>kafka-console-consumer.sh  --from-beginning \\\n--bootstrap-server yourbroker:9092 --property print.key=true  \\\n--property print.value=false --property print.partition \\\n--topic yourtopic --timeout-ms 5000 | tail -n 10|grep \"Processed a total of\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4160435,"reputation":81,"user_id":4555106,"display_name":"S R Bandi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1534757143,"creation_date":1534757143,"answer_id":51927715,"question_id":28579948,"body_markdown":"**Excerpts from Kafka docs**\r\n\r\nDeprecations in 0.9.0.0\r\n\r\nThe kafka-consumer-offset-checker.sh (kafka.tools.ConsumerOffsetChecker) has been deprecated. Going forward, please use kafka-consumer-groups.sh (kafka.admin.ConsumerGroupCommand) for this functionality.\r\n\r\nI am running Kafka broker with SSL enabled for both server and client. Below command I use \r\n\r\n`kafka-consumer-groups.sh --bootstrap-server Broker_IP:Port --list --command-config /tmp/ssl_config\r\nkafka-consumer-groups.sh --bootstrap-server Broker_IP:Port --command-config /tmp/ssl_config  --describe --group group_name_x\r\n`\r\n\r\nwhere /tmp/ssl_config is as below\r\n\r\n    security.protocol=SSL\r\n    ssl.truststore.location=truststore_file_path.jks\r\n    ssl.truststore.password=truststore_password\r\n    ssl.keystore.location=keystore_file_path.jks\r\n    ssl.keystore.password=keystore_password\r\n    ssl.key.password=key_password\r\n\r\n\r\n","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p><strong>Excerpts from Kafka docs</strong></p>\n\n<p>Deprecations in 0.9.0.0</p>\n\n<p>The kafka-consumer-offset-checker.sh (kafka.tools.ConsumerOffsetChecker) has been deprecated. Going forward, please use kafka-consumer-groups.sh (kafka.admin.ConsumerGroupCommand) for this functionality.</p>\n\n<p>I am running Kafka broker with SSL enabled for both server and client. Below command I use </p>\n\n<p><code>kafka-consumer-groups.sh --bootstrap-server Broker_IP:Port --list --command-config /tmp/ssl_config\nkafka-consumer-groups.sh --bootstrap-server Broker_IP:Port --command-config /tmp/ssl_config  --describe --group group_name_x\n</code></p>\n\n<p>where /tmp/ssl_config is as below</p>\n\n<pre><code>security.protocol=SSL\nssl.truststore.location=truststore_file_path.jks\nssl.truststore.password=truststore_password\nssl.keystore.location=keystore_file_path.jks\nssl.keystore.password=keystore_password\nssl.key.password=key_password\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8249479,"reputation":4439,"user_id":6204612,"accept_rate":75,"display_name":"Adam Kotwasinski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1534778303,"creation_date":1534778303,"answer_id":51933855,"question_id":28579948,"body_markdown":"If you have access to server&#39;s JMX interface, the start &amp; end offsets are present at:\r\n\r\n    kafka.log:type=Log,name=LogStartOffset,topic=TOPICNAME,partition=PARTITIONNUMBER\r\n    kafka.log:type=Log,name=LogEndOffset,topic=TOPICNAME,partition=PARTITIONNUMBER\r\n\r\n\r\n(you need to replace `TOPICNAME` &amp; `PARTITIONNUMBER`).\r\nBear in mind you need to check for each of the replicas of given partition, or you need to find out which one of the brokers is the leader for a _given_ partition (and this can change over time).\r\n\r\nAlternatively, you can use [Kafka Consumer](https://kafka.apache.org/10/javadoc/?org/apache/kafka/clients/consumer/KafkaConsumer.html) methods `beginningOffsets` and `endOffsets`.","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>If you have access to server's JMX interface, the start &amp; end offsets are present at:</p>\n\n<pre><code>kafka.log:type=Log,name=LogStartOffset,topic=TOPICNAME,partition=PARTITIONNUMBER\nkafka.log:type=Log,name=LogEndOffset,topic=TOPICNAME,partition=PARTITIONNUMBER\n</code></pre>\n\n<p>(you need to replace <code>TOPICNAME</code> &amp; <code>PARTITIONNUMBER</code>).\nBear in mind you need to check for each of the replicas of given partition, or you need to find out which one of the brokers is the leader for a <em>given</em> partition (and this can change over time).</p>\n\n<p>Alternatively, you can use <a href=\"https://kafka.apache.org/10/javadoc/?org/apache/kafka/clients/consumer/KafkaConsumer.html\" rel=\"nofollow noreferrer\">Kafka Consumer</a> methods <code>beginningOffsets</code> and <code>endOffsets</code>.</p>\n"},{"tags":[],"owner":{"account_id":5393531,"reputation":11,"user_id":6256924,"display_name":"Sebastian Sturza"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1539189800,"creation_date":1539188616,"answer_id":52744785,"question_id":28579948,"body_markdown":"The simplest way I&#39;ve found is to use the Kafdrop REST API `/topic/topicName` and specify the key: `&quot;Accept&quot;` / value: `&quot;application/json&quot;` header in order to get back a JSON response. \r\n\r\n[This is documented here][1].\r\n\r\n\r\n  [1]: https://github.com/HomeAdvisor/Kafdrop","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>The simplest way I've found is to use the Kafdrop REST API <code>/topic/topicName</code> and specify the key: <code>\"Accept\"</code> / value: <code>\"application/json\"</code> header in order to get back a JSON response. </p>\n\n<p><a href=\"https://github.com/HomeAdvisor/Kafdrop\" rel=\"nofollow noreferrer\">This is documented here</a>.</p>\n"},{"tags":[],"owner":{"account_id":4752391,"reputation":703,"user_id":3842076,"accept_rate":80,"display_name":"ruslangm"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1550578845,"creation_date":1550568545,"answer_id":54762796,"question_id":28579948,"body_markdown":"Since `ConsumerOffsetChecker` is no longer supported, you can use this command to check all messages in topic: \r\n\r\n    bin/kafka-run-class.sh kafka.admin.ConsumerGroupCommand \\\r\n        --group my-group \\\r\n        --bootstrap-server localhost:9092 \\\r\n        --describe\r\n\r\nWhere `LAG` is the count of messages in topic partition:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nAlso you can try to use [kafkacat][2]. This is an open source project that may help you to read messages from a topic and partition and prints them to stdout. Here is a sample that reads the last 10 messages from `sample-kafka-topic` topic, then exit:\r\n\r\n    kafkacat -b localhost:9092 -t sample-kafka-topic -p 0 -o -10 -e\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ch2oq.png\r\n  [2]: https://github.com/edenhill/kafkacat","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>Since <code>ConsumerOffsetChecker</code> is no longer supported, you can use this command to check all messages in topic: </p>\n\n<pre><code>bin/kafka-run-class.sh kafka.admin.ConsumerGroupCommand \\\n    --group my-group \\\n    --bootstrap-server localhost:9092 \\\n    --describe\n</code></pre>\n\n<p>Where <code>LAG</code> is the count of messages in topic partition:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ch2oq.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ch2oq.png\" alt=\"enter image description here\"></a></p>\n\n<p>Also you can try to use <a href=\"https://github.com/edenhill/kafkacat\" rel=\"noreferrer\">kafkacat</a>. This is an open source project that may help you to read messages from a topic and partition and prints them to stdout. Here is a sample that reads the last 10 messages from <code>sample-kafka-topic</code> topic, then exit:</p>\n\n<pre><code>kafkacat -b localhost:9092 -t sample-kafka-topic -p 0 -o -10 -e\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12673101,"reputation":1673,"user_id":9210263,"display_name":"LeYAUable"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1589988636,"creation_date":1589988636,"answer_id":61916983,"question_id":28579948,"body_markdown":"I had this same question and this is how I am doing it, from a KafkaConsumer, in Kotlin:\r\n\r\n    val messageCount = consumer.listTopics().entries.filter { it.key == topicName }\r\n        .map {\r\n            it.value.map { topicInfo -&gt; TopicPartition(topicInfo.topic(), topicInfo.partition()) }\r\n        }.map { consumer.endOffsets(it).values.sum() - consumer.beginningOffsets(it).values.sum()}\r\n        .first()\r\n\r\nVery rough code, as I just got this to work, but basically you want to subtract the topic&#39;s beginning offset from the ending offset and this will be the current message count for the topic.\r\n\r\nYou can&#39;t just rely on the end offset because of other configurations (cleanup policy, retention-ms, etc.) that may end up causing the deletion old messages from your topic.\r\nOffsets only &quot;move&quot; forward, so it is the beggining offset that will move forward closer to the end offset (or eventually to the same value, if the topic contains no message right now).\r\n\r\nBasically the end offset represents the overall number of messages that went through that topic, and the difference between the two represent the number of messages that the topic contains right now.\r\n\r\n ","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>I had this same question and this is how I am doing it, from a KafkaConsumer, in Kotlin:</p>\n\n<pre><code>val messageCount = consumer.listTopics().entries.filter { it.key == topicName }\n    .map {\n        it.value.map { topicInfo -&gt; TopicPartition(topicInfo.topic(), topicInfo.partition()) }\n    }.map { consumer.endOffsets(it).values.sum() - consumer.beginningOffsets(it).values.sum()}\n    .first()\n</code></pre>\n\n<p>Very rough code, as I just got this to work, but basically you want to subtract the topic's beginning offset from the ending offset and this will be the current message count for the topic.</p>\n\n<p>You can't just rely on the end offset because of other configurations (cleanup policy, retention-ms, etc.) that may end up causing the deletion old messages from your topic.\nOffsets only \"move\" forward, so it is the beggining offset that will move forward closer to the end offset (or eventually to the same value, if the topic contains no message right now).</p>\n\n<p>Basically the end offset represents the overall number of messages that went through that topic, and the difference between the two represent the number of messages that the topic contains right now.</p>\n"},{"tags":[],"owner":{"account_id":23506,"reputation":7505,"user_id":58962,"accept_rate":65,"display_name":"Michael B&#246;ckling"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654164794,"creation_date":1654069585,"answer_id":72458114,"question_id":28579948,"body_markdown":"If you need to calculate the result for all the consumers in a consumer group, (or for different consumer groups), another option is to use the admin client and subtract the consumer group offsets from the topic/partition offsets, code examples in Kotlin:\r\n\r\n    val topicName = &quot;someTopic&quot;\r\n    val groupId = &quot;theGroupId&quot;\r\n    val admin = Admin.create(kafkaProps.buildAdminProperties()) // Spring KafkaProperties\r\n    val parts = admin.describeTopics(listOf(topicName)).values()[topicName]!!.get().partitions()\r\n    val topicPartitionOffsets = admin.listOffsets(parts.associate { TopicPartition(topicName, it.partition()) to OffsetSpec.latest() }).all().get()\r\n    val consumerGroupOffsets = admin.listConsumerGroupOffsets(groupId)\r\n        .partitionsToOffsetAndMetadata().get()\r\n    val highWaterMark = topicPartitionOffsets.map { it.value.offset() }.sum()\r\n    val consumerPos = consumerGroupOffsets.map { it.value.offset() }.sum()\r\n    val unProcessedMessages = highWaterMark - consumerPos\r\n\r\nAlso here is a working version of LeYAUable&#39;s example code which only uses a regular (non-admin) client:\r\n\r\n    val partitions = consumer.partitionsFor(&quot;topicName&quot;)\r\n            .map { TopicPartition(it.topic(), it.partition()) }\r\n    val highWaterMark = consumer.endOffsets(partitions).values.sum()\r\n    val consumerPosition = consumer.beginningOffsets(partitions).values.sum()\r\n    val msgCount = highWaterMark - consumerPosition\r\n\r\nThis will only give you the offset for this particular consumer though! The usual caveat applies that this is imprecise when a topic is compacted.\r\n","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>If you need to calculate the result for all the consumers in a consumer group, (or for different consumer groups), another option is to use the admin client and subtract the consumer group offsets from the topic/partition offsets, code examples in Kotlin:</p>\n<pre><code>val topicName = &quot;someTopic&quot;\nval groupId = &quot;theGroupId&quot;\nval admin = Admin.create(kafkaProps.buildAdminProperties()) // Spring KafkaProperties\nval parts = admin.describeTopics(listOf(topicName)).values()[topicName]!!.get().partitions()\nval topicPartitionOffsets = admin.listOffsets(parts.associate { TopicPartition(topicName, it.partition()) to OffsetSpec.latest() }).all().get()\nval consumerGroupOffsets = admin.listConsumerGroupOffsets(groupId)\n    .partitionsToOffsetAndMetadata().get()\nval highWaterMark = topicPartitionOffsets.map { it.value.offset() }.sum()\nval consumerPos = consumerGroupOffsets.map { it.value.offset() }.sum()\nval unProcessedMessages = highWaterMark - consumerPos\n</code></pre>\n<p>Also here is a working version of LeYAUable's example code which only uses a regular (non-admin) client:</p>\n<pre><code>val partitions = consumer.partitionsFor(&quot;topicName&quot;)\n        .map { TopicPartition(it.topic(), it.partition()) }\nval highWaterMark = consumer.endOffsets(partitions).values.sum()\nval consumerPosition = consumer.beginningOffsets(partitions).values.sum()\nval msgCount = highWaterMark - consumerPosition\n</code></pre>\n<p>This will only give you the offset for this particular consumer though! The usual caveat applies that this is imprecise when a topic is compacted.</p>\n"},{"tags":[],"owner":{"account_id":13836520,"reputation":355,"user_id":10066623,"display_name":"Anurag"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685346546,"creation_date":1685346077,"answer_id":76355484,"question_id":28579948,"body_markdown":"The only precise way to get the accurate number is by reading the messages using a consumer. \r\n\r\nAlternatively, the way (not accurate) to get the closest number is to use &quot;*kafka.tools.GetOffsetShell*&quot; class. In two separate shell commands, get the latest and earliest offsets for each partition using the time parameter (*-1 for latest and -2 for earliest*) and then use a simple shell script to relate each partitions and subtract the numbers. See below the command examples. But note, that this may not be true as in some rare circumstances, the topics may miss an offset number. Another such example is compacted topics. So, in those cases, this won&#39;t work.\r\n\r\n\r\n**Get Latest / End Offset number for a Topic**\r\n\r\nbin % ./kafka-run-class kafka.tools.GetOffsetShell --broker-list localhost:9092 --topic tpmqtt --time -1\r\n\r\ntpmqtt:0:8\r\n\r\ntpmqtt:1:0\r\n\r\ntpmqtt:2:10\r\n\r\n**Get Earliest Offset number for a Topic:**\r\n\r\n\r\nbin % ./kafka-run-class kafka.tools.GetOffsetShell --broker-list localhost:9092 --topic tpmqtt --time -2\r\n\r\ntpmqtt:0:0\r\n\r\ntpmqtt:1:0\r\n\r\ntpmqtt:2:0\r\n\r\n\r\nIn this example for value- &quot;tpmqtt:2:10&quot;, tpmqtt is the topic, 2 \r\nis the partition number and 10 is the last offset number in this \r\npartition.\r\n\r\n","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>The only precise way to get the accurate number is by reading the messages using a consumer.</p>\n<p>Alternatively, the way (not accurate) to get the closest number is to use &quot;<em>kafka.tools.GetOffsetShell</em>&quot; class. In two separate shell commands, get the latest and earliest offsets for each partition using the time parameter (<em>-1 for latest and -2 for earliest</em>) and then use a simple shell script to relate each partitions and subtract the numbers. See below the command examples. But note, that this may not be true as in some rare circumstances, the topics may miss an offset number. Another such example is compacted topics. So, in those cases, this won't work.</p>\n<p><strong>Get Latest / End Offset number for a Topic</strong></p>\n<p>bin % ./kafka-run-class kafka.tools.GetOffsetShell --broker-list localhost:9092 --topic tpmqtt --time -1</p>\n<p>tpmqtt:0:8</p>\n<p>tpmqtt:1:0</p>\n<p>tpmqtt:2:10</p>\n<p><strong>Get Earliest Offset number for a Topic:</strong></p>\n<p>bin % ./kafka-run-class kafka.tools.GetOffsetShell --broker-list localhost:9092 --topic tpmqtt --time -2</p>\n<p>tpmqtt:0:0</p>\n<p>tpmqtt:1:0</p>\n<p>tpmqtt:2:0</p>\n<p>In this example for value- &quot;tpmqtt:2:10&quot;, tpmqtt is the topic, 2\nis the partition number and 10 is the last offset number in this\npartition.</p>\n"}],"owner":{"account_id":1411349,"reputation":4805,"user_id":1337863,"accept_rate":53,"display_name":"Chetan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":224885,"favorite_count":0,"down_vote_count":1,"up_vote_count":132,"accepted_answer_id":28617771,"answer_count":18,"score":131,"last_activity_date":1697087444,"creation_date":1424251506,"question_id":28579948,"body_markdown":"I am using Apache Kafka for messaging. I have implemented the producer and consumer in Java. How can we get the number of messages in a particular topic?","title":"Java, How to get number of messages in a topic in apache kafka","body":"<p>I am using Apache Kafka for messaging. I have implemented the producer and consumer in Java. How can we get the number of messages in a particular topic?</p>\n"},{"tags":["java","exception","apache-kafka"],"comments":[{"owner":{"account_id":15903,"reputation":323423,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":11,"creation_date":1389270917,"post_id":21020347,"comment_id":31595551,"body_markdown":"My first instinct would be to ask you to split this huge message into several smaller ones :-/ My guess is that this isn&#39;t possible for some reason but you may want to reconsider it nonetheless: Huge messages usually means there is a design flaw somewhere that should really be fixed.","body":"My first instinct would be to ask you to split this huge message into several smaller ones :-/ My guess is that this isn&#39;t possible for some reason but you may want to reconsider it nonetheless: Huge messages usually means there is a design flaw somewhere that should really be fixed."},{"owner":{"account_id":204382,"reputation":10989,"user_id":517336,"accept_rate":88,"display_name":"Sonson123"},"score":1,"creation_date":1389272566,"post_id":21020347,"comment_id":31596654,"body_markdown":"Thanks, but it would make my logic a lot more complex. Why is it a *bad* idea to use Kafka for messages around 15MB? Is 1 MB the maximum message size limit that can be used? I found not much about the message size limit in the Kafka documentation.","body":"Thanks, but it would make my logic a lot more complex. Why is it a <i>bad</i> idea to use Kafka for messages around 15MB? Is 1 MB the maximum message size limit that can be used? I found not much about the message size limit in the Kafka documentation."},{"owner":{"account_id":15903,"reputation":323423,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":2,"creation_date":1389275374,"post_id":21020347,"comment_id":31598491,"body_markdown":"This is completely unrelated to Kafka or any other message processing system. My reasoning: If something goes wrong with your 15MB file, then cleaning up the mess afterwards is very expensive. That&#39;s why I usually split large files into many smaller jobs (which can then usually be executed in parallel as well).","body":"This is completely unrelated to Kafka or any other message processing system. My reasoning: If something goes wrong with your 15MB file, then cleaning up the mess afterwards is very expensive. That&#39;s why I usually split large files into many smaller jobs (which can then usually be executed in parallel as well)."},{"owner":{"account_id":3224137,"reputation":8035,"user_id":2720864,"accept_rate":43,"display_name":"user2720864"},"score":0,"creation_date":1389299372,"post_id":21020347,"comment_id":31614487,"body_markdown":"have you used any compression? could you please share some more details, its kinda hard to guess something out of just one single word","body":"have you used any compression? could you please share some more details, its kinda hard to guess something out of just one single word"},{"owner":{"account_id":1573494,"reputation":14865,"user_id":1460628,"accept_rate":60,"display_name":"Miljen Mikic"},"score":0,"creation_date":1603204128,"post_id":21020347,"comment_id":113958771,"body_markdown":"For those who stumble upon this question, but use `librdkafka` for the communication with Kafka, see also: https://stackoverflow.com/questions/60739858/how-to-set-the-max-size-of-a-kafka-message-using-librdkafka","body":"For those who stumble upon this question, but use <code>librdkafka</code> for the communication with Kafka, see also: <a href=\"https://stackoverflow.com/questions/60739858/how-to-set-the-max-size-of-a-kafka-message-using-librdkafka\" title=\"how to set the max size of a kafka message using librdkafka\">stackoverflow.com/questions/60739858/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3224137,"reputation":8035,"user_id":2720864,"accept_rate":43,"display_name":"user2720864"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1389694443,"creation_date":1389299109,"answer_id":21030397,"question_id":21020347,"body_markdown":"One key thing to remember that `message.max.bytes` attribute must be **in sync** with the consumer&#39;s `fetch.message.max.bytes` property. the fetch size must be at least as large as the maximum message size otherwise there could be situation where producers can send messages larger than the consumer can consume/fetch. It might worth taking a look at it. &lt;br/&gt;\r\nWhich version of Kafka you are using? Also provide some more details trace that you are getting. is there some thing like ... `payload size of xxxx larger\r\nthan 1000000` coming up in  the log?","title":"How can I send large messages with Kafka (over 15MB)?","body":"<p>One key thing to remember that <code>message.max.bytes</code> attribute must be <strong>in sync</strong> with the consumer's <code>fetch.message.max.bytes</code> property. the fetch size must be at least as large as the maximum message size otherwise there could be situation where producers can send messages larger than the consumer can consume/fetch. It might worth taking a look at it. <br/>\nWhich version of Kafka you are using? Also provide some more details trace that you are getting. is there some thing like ... <code>payload size of xxxx larger\nthan 1000000</code> coming up in  the log?</p>\n"},{"tags":[],"owner":{"account_id":2699530,"reputation":3756,"user_id":2487927,"display_name":"laughing_man"},"down_vote_count":0,"up_vote_count":267,"is_accepted":true,"score":267,"last_activity_date":1463769267,"creation_date":1390603602,"answer_id":21343878,"question_id":21020347,"body_markdown":"You need to adjust three (or four) properties:\r\n\r\n - Consumer side:`fetch.message.max.bytes` - this will determine the largest size of a message that can be fetched by the consumer.\r\n - Broker side: `replica.fetch.max.bytes` - this will allow for the replicas in the brokers to send messages within the cluster and make sure the messages are replicated correctly. If this is too small, then the message will never be replicated, and therefore, the consumer will never see the message because the message will never be committed (fully replicated).\r\n - Broker side: `message.max.bytes` - this is the largest size of the message that can be received by the broker from a producer.\r\n - Broker side (per topic): `max.message.bytes` - this is the largest size of the message the broker will allow to be appended to the topic. This size is validated pre-compression. (Defaults to broker&#39;s `message.max.bytes`.)\r\n\r\n\r\nI found out the hard way about number 2 - you don&#39;t get ANY exceptions, messages, or warnings from Kafka, so be sure to consider this when you are sending large messages.","title":"How can I send large messages with Kafka (over 15MB)?","body":"<p>You need to adjust three (or four) properties:</p>\n\n<ul>\n<li>Consumer side:<code>fetch.message.max.bytes</code> - this will determine the largest size of a message that can be fetched by the consumer.</li>\n<li>Broker side: <code>replica.fetch.max.bytes</code> - this will allow for the replicas in the brokers to send messages within the cluster and make sure the messages are replicated correctly. If this is too small, then the message will never be replicated, and therefore, the consumer will never see the message because the message will never be committed (fully replicated).</li>\n<li>Broker side: <code>message.max.bytes</code> - this is the largest size of the message that can be received by the broker from a producer.</li>\n<li>Broker side (per topic): <code>max.message.bytes</code> - this is the largest size of the message the broker will allow to be appended to the topic. This size is validated pre-compression. (Defaults to broker's <code>message.max.bytes</code>.)</li>\n</ul>\n\n<p>I found out the hard way about number 2 - you don't get ANY exceptions, messages, or warnings from Kafka, so be sure to consider this when you are sending large messages.</p>\n"},{"tags":[],"owner":{"account_id":3006053,"reputation":635,"user_id":2550587,"accept_rate":44,"display_name":"user2550587"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1392631018,"creation_date":1392631018,"answer_id":21825799,"question_id":21020347,"body_markdown":"You need to override the following properties:\r\n\r\n**Broker Configs($KAFKA_HOME/config/server.properties)**\r\n\r\n - replica.fetch.max.bytes\r\n - message.max.bytes\r\n\r\n**Consumer Configs($KAFKA_HOME/config/consumer.properties)** &lt;br/&gt;\r\n*This step didn&#39;t work for me. I add it to the consumer app and it was working fine*\r\n\r\n - fetch.message.max.bytes\r\n\r\nRestart the server.\r\n\r\nlook at this documentation for more info:\r\nhttp://kafka.apache.org/08/configuration.html","title":"How can I send large messages with Kafka (over 15MB)?","body":"<p>You need to override the following properties:</p>\n\n<p><strong>Broker Configs($KAFKA_HOME/config/server.properties)</strong></p>\n\n<ul>\n<li>replica.fetch.max.bytes</li>\n<li>message.max.bytes</li>\n</ul>\n\n<p><strong>Consumer Configs($KAFKA_HOME/config/consumer.properties)</strong> <br/>\n<em>This step didn't work for me. I add it to the consumer app and it was working fine</em></p>\n\n<ul>\n<li>fetch.message.max.bytes</li>\n</ul>\n\n<p>Restart the server.</p>\n\n<p>look at this documentation for more info:\n<a href=\"http://kafka.apache.org/08/configuration.html\" rel=\"noreferrer\">http://kafka.apache.org/08/configuration.html</a></p>\n"},{"tags":[],"owner":{"account_id":6936348,"reputation":221,"user_id":5324125,"display_name":"Ravi"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1562686852,"creation_date":1441953822,"answer_id":32517158,"question_id":21020347,"body_markdown":"The idea is to have equal size of message being sent from Kafka Producer to Kafka Broker and then received by Kafka Consumer i.e.\r\n\r\n**Kafka producer --&gt; Kafka Broker --&gt; Kafka Consumer**\r\n\r\nSuppose if the requirement is to send 15MB of message, then the _Producer_, the _Broker_ and the _Consumer_, all three, needs to be in sync. \r\n\r\n\r\n**Kafka Producer** sends 15 MB **--&gt;** **Kafka Broker** Allows/Stores 15 MB **--&gt;** **Kafka Consumer** receives 15 MB \r\n\r\nThe setting therefore should be:\r\n\r\na) on Broker:\r\n```\r\nmessage.max.bytes=15728640 \r\nreplica.fetch.max.bytes=15728640\r\n```\r\n\r\nb) on Consumer:\r\n```\r\nfetch.message.max.bytes=15728640\r\n```","title":"How can I send large messages with Kafka (over 15MB)?","body":"<p>The idea is to have equal size of message being sent from Kafka Producer to Kafka Broker and then received by Kafka Consumer i.e.</p>\n\n<p><strong>Kafka producer --> Kafka Broker --> Kafka Consumer</strong></p>\n\n<p>Suppose if the requirement is to send 15MB of message, then the <em>Producer</em>, the <em>Broker</em> and the <em>Consumer</em>, all three, needs to be in sync. </p>\n\n<p><strong>Kafka Producer</strong> sends 15 MB <strong>--></strong> <strong>Kafka Broker</strong> Allows/Stores 15 MB <strong>--></strong> <strong>Kafka Consumer</strong> receives 15 MB </p>\n\n<p>The setting therefore should be:</p>\n\n<p>a) on Broker:</p>\n\n<pre><code>message.max.bytes=15728640 \nreplica.fetch.max.bytes=15728640\n</code></pre>\n\n<p>b) on Consumer:</p>\n\n<pre><code>fetch.message.max.bytes=15728640\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1810110,"reputation":2486,"user_id":1646364,"accept_rate":93,"display_name":"Sascha Vetter"},"down_vote_count":0,"up_vote_count":72,"is_accepted":false,"score":72,"last_activity_date":1493415793,"creation_date":1471551201,"answer_id":39026744,"question_id":21020347,"body_markdown":"Minor changes required for **Kafka 0.10** and the [new consumer][1] compared to [laughing_man&#39;s answer][2]:\r\n\r\n - Broker: No changes, you still need to increase properties `message.max.bytes` and `replica.fetch.max.bytes`. `message.max.bytes` has to be equal or smaller(*) than `replica.fetch.max.bytes`.\r\n - Producer: Increase `max.request.size` to send the larger message.\r\n - Consumer: Increase `max.partition.fetch.bytes` to receive larger messages.\r\n\r\n(*) Read the comments to learn more about `message.max.bytes`&lt;=`replica.fetch.max.bytes`\r\n\r\n  [1]: http://kafka.apache.org/documentation.html#newconsumerconfigs\r\n  [2]: https://stackoverflow.com/a/21343878/1646364","title":"How can I send large messages with Kafka (over 15MB)?","body":"<p>Minor changes required for <strong>Kafka 0.10</strong> and the <a href=\"http://kafka.apache.org/documentation.html#newconsumerconfigs\" rel=\"noreferrer\">new consumer</a> compared to <a href=\"https://stackoverflow.com/a/21343878/1646364\">laughing_man's answer</a>:</p>\n\n<ul>\n<li>Broker: No changes, you still need to increase properties <code>message.max.bytes</code> and <code>replica.fetch.max.bytes</code>. <code>message.max.bytes</code> has to be equal or smaller(*) than <code>replica.fetch.max.bytes</code>.</li>\n<li>Producer: Increase <code>max.request.size</code> to send the larger message.</li>\n<li>Consumer: Increase <code>max.partition.fetch.bytes</code> to receive larger messages.</li>\n</ul>\n\n<p>(*) Read the comments to learn more about <code>message.max.bytes</code>&lt;=<code>replica.fetch.max.bytes</code></p>\n"},{"tags":[],"owner":{"account_id":2471950,"reputation":1483,"user_id":2153576,"accept_rate":50,"display_name":"Player_Neo"},"down_vote_count":3,"up_vote_count":41,"is_accepted":false,"score":38,"last_activity_date":1627596455,"creation_date":1542278201,"answer_id":53317502,"question_id":21020347,"body_markdown":"The answer from @laughing_man is quite accurate. But still, I wanted to give a recommendation which I learned from Kafka expert [Stephane Maarek][1]. We actively applied this solution in our live systems.\r\n\r\n**Kafka isn’t meant to handle large messages.**\r\n\r\nYour API should use cloud storage (for example, AWS S3) and simply push a reference to S3 to Kafka or any other message broker. You&#39;ll need to find a place to save your data, whether it can be a&#160;network drive or something else entirely, but it shouldn&#39;t be a message broker.\r\n\r\nIf you don&#39;t want to proceed with the recommended and reliable solution above,\r\n\r\nThe message max size is 1MB (the setting in your brokers is called `message.max.bytes`) [Apache Kafka][2]. If you really needed it badly, you could increase that size and make sure to increase the network buffers for your producers and consumers.\r\n\r\nAnd if you really care about splitting your message, make sure each message split has the exact same key so that it gets pushed to the same partition, and your message content should report a “part id” so that your consumer can fully reconstruct the message. \r\n\r\nIf the message is text-based try to compress the data, which may reduce the data size, but not magically.\r\n\r\nAgain, you have to use an external system to store that data and just push an external reference to Kafka. That is a very common architecture and one you should go with and widely accepted. \r\n\r\n**Keep that in mind Kafka works best only if the messages are huge in amount but not in size.**\r\n\r\nSource: [https://www.quora.com/How-do-I-send-Large-messages-80-MB-in-Kafka][3]\r\n\r\n\r\n  [1]: https://medium.com/@stephane.maarek\r\n  [2]: https://kafka.apache.org/documentation/#brokerconfigs\r\n  [3]: https://www.quora.com/How-do-I-send-Large-messages-80-MB-in-Kafka","title":"How can I send large messages with Kafka (over 15MB)?","body":"<p>The answer from @laughing_man is quite accurate. But still, I wanted to give a recommendation which I learned from Kafka expert <a href=\"https://medium.com/@stephane.maarek\" rel=\"noreferrer\">Stephane Maarek</a>. We actively applied this solution in our live systems.</p>\n<p><strong>Kafka isn’t meant to handle large messages.</strong></p>\n<p>Your API should use cloud storage (for example, AWS S3) and simply push a reference to S3 to Kafka or any other message broker. You'll need to find a place to save your data, whether it can be a network drive or something else entirely, but it shouldn't be a message broker.</p>\n<p>If you don't want to proceed with the recommended and reliable solution above,</p>\n<p>The message max size is 1MB (the setting in your brokers is called <code>message.max.bytes</code>) <a href=\"https://kafka.apache.org/documentation/#brokerconfigs\" rel=\"noreferrer\">Apache Kafka</a>. If you really needed it badly, you could increase that size and make sure to increase the network buffers for your producers and consumers.</p>\n<p>And if you really care about splitting your message, make sure each message split has the exact same key so that it gets pushed to the same partition, and your message content should report a “part id” so that your consumer can fully reconstruct the message.</p>\n<p>If the message is text-based try to compress the data, which may reduce the data size, but not magically.</p>\n<p>Again, you have to use an external system to store that data and just push an external reference to Kafka. That is a very common architecture and one you should go with and widely accepted.</p>\n<p><strong>Keep that in mind Kafka works best only if the messages are huge in amount but not in size.</strong></p>\n<p>Source: <a href=\"https://www.quora.com/How-do-I-send-Large-messages-80-MB-in-Kafka\" rel=\"noreferrer\">https://www.quora.com/How-do-I-send-Large-messages-80-MB-in-Kafka</a></p>\n"},{"tags":[],"owner":{"account_id":10412283,"reputation":831,"user_id":7677338,"accept_rate":25,"display_name":"informer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1669724111,"creation_date":1591129527,"answer_id":62160832,"question_id":21020347,"body_markdown":"For people using landoop kafka:\r\nYou can pass the config values in the environment variables like:\r\n\r\n    docker run -d --rm -p 2181:2181 -p 3030:3030 -p 8081-8083:8081-8083  -p 9581-9585:9581-9585 -p 9092:9092\r\n     -e KAFKA_TOPIC_MAX_MESSAGE_BYTES=15728640 -e KAFKA_REPLICA_FETCH_MAX_BYTES=15728640  landoop/fast-data-dev:latest `\r\n\r\nThis sets `topic.max.message.bytes` and `replica.fetch.max.bytes` on the broker.\r\n\r\nAnd if you&#39;re using `rdkafka` then pass the `message.max.bytes` in the producer config like:\r\n\r\n      const producer = new Kafka.Producer({\r\n            &#39;metadata.broker.list&#39;: &#39;localhost:9092&#39;,\r\n            &#39;message.max.bytes&#39;: &#39;15728640&#39;,\r\n            &#39;dr_cb&#39;: true\r\n        });\r\n\r\nSimilarly, for the consumer,\r\n       \r\n      const kafkaConf = {\r\n       &quot;group.id&quot;: &quot;librd-test&quot;,\r\n       &quot;fetch.message.max.bytes&quot;:&quot;15728640&quot;,\r\n       ... .. }                                                                                                                                                                                                                                                      ","title":"How can I send large messages with Kafka (over 15MB)?","body":"<p>For people using landoop kafka:\nYou can pass the config values in the environment variables like:</p>\n<pre><code>docker run -d --rm -p 2181:2181 -p 3030:3030 -p 8081-8083:8081-8083  -p 9581-9585:9581-9585 -p 9092:9092\n -e KAFKA_TOPIC_MAX_MESSAGE_BYTES=15728640 -e KAFKA_REPLICA_FETCH_MAX_BYTES=15728640  landoop/fast-data-dev:latest `\n</code></pre>\n<p>This sets <code>topic.max.message.bytes</code> and <code>replica.fetch.max.bytes</code> on the broker.</p>\n<p>And if you're using <code>rdkafka</code> then pass the <code>message.max.bytes</code> in the producer config like:</p>\n<pre><code>  const producer = new Kafka.Producer({\n        'metadata.broker.list': 'localhost:9092',\n        'message.max.bytes': '15728640',\n        'dr_cb': true\n    });\n</code></pre>\n<p>Similarly, for the consumer,</p>\n<pre><code>  const kafkaConf = {\n   &quot;group.id&quot;: &quot;librd-test&quot;,\n   &quot;fetch.message.max.bytes&quot;:&quot;15728640&quot;,\n   ... .. }                                                                                                                                                                                                                                                      \n</code></pre>\n"},{"tags":[],"owner":{"account_id":14983151,"reputation":570,"user_id":10816587,"display_name":"MichaelCkr"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1622117943,"creation_date":1622117943,"answer_id":67721976,"question_id":21020347,"body_markdown":"I think, most of the answers here are kind of outdated or not entirely complete.\r\n\r\nTo refer on the [answer of Sacha Vetter](https://stackoverflow.com/a/39026744/10816587) (with the update for **Kafka 0.10**), I&#39;d like to provide some additional Information and links to the official documentation.\r\n\r\n-----\r\n\r\nProducer Configuration:\r\n\r\n - [``max.request.size`` (Link)](https://kafka.apache.org/documentation/#producerconfigs_max.request.size) has to be increased for files bigger than 1 MB, otherwise they are rejected\r\n\r\nBroker/Topic configuration:\r\n\r\n - [``message.max.bytes`` (Link)](https://kafka.apache.org/documentation/#brokerconfigs_message.max.bytes) may be set, if one like to increase the message size on broker level. But, from the documentation: *&quot;This can be set per topic with the topic level max.message.bytes config.&quot;*\r\n - [``max.message.bytes`` (Link)](https://kafka.apache.org/documentation/#topicconfigs_max.message.bytes) may be increased, if only one topic should be able to accept lager files. The broker configuration must not be changed.\r\n\r\nI&#39;d always prefer a topic-restricted configuration, due to the fact, that I can configure the topic by myself as a client for the Kafka cluster (e.g. with the [admin client](https://kafka.apache.org/documentation/#adminclientconfigs)). I may not have any influence on the broker configuration itself.\r\n\r\n-----\r\n\r\nIn the answers from above, some more configurations are mentioned as necessary:\r\n\r\n - [``replica.fetch.max.bytes`` (Link)](https://kafka.apache.org/documentation/#brokerconfigs_replica.fetch.max.bytes) (Broker config)\r\n\r\nFrom the documentation: *&quot;This is not an absolute maximum, if the first record batch in the first non-empty partition of the fetch is larger than this value, the record batch will still be returned to ensure that progress can be made.&quot;*\r\n\r\n\r\n - [``max.partition.fetch.bytes`` (Link)](https://kafka.apache.org/documentation/#consumerconfigs_max.partition.fetch.bytes) (Consumer config)\r\n\r\nFrom the documentation: *&quot;Records are fetched in batches by the consumer. If the first record batch in the first non-empty partition of the fetch is larger than this limit, the batch will still be returned to ensure that the consumer can make progress.&quot;*\r\n\r\n - [``fetch.max.bytes`` (Link)](https://kafka.apache.org/documentation/#consumerconfigs_fetch.max.bytes) (Consumer config; not mentioned above, but same category)\r\n\r\nFrom the documentation: *&quot;Records are fetched in batches by the consumer, and if the first record batch in the first non-empty partition of the fetch is larger than this value, the record batch will still be returned to ensure that the consumer can make progress.&quot;*\r\n\r\n-----\r\n\r\n**Conclusion:** The configurations regarding fetching messages are not necessary to change for processing messages, lager than the default values of these configuration (had this tested in a small setup). Probably, the consumer may always get batches of size 1. However, two of the configurations from the first block has to be set, as mentioned in the answers before.\r\n\r\nThis clarification should not tell anything about performance and should not be a recommendation to set or not to set these configuration. The best values has to be evaluated individually depending on the concrete planned throughput and data structure.","title":"How can I send large messages with Kafka (over 15MB)?","body":"<p>I think, most of the answers here are kind of outdated or not entirely complete.</p>\n<p>To refer on the <a href=\"https://stackoverflow.com/a/39026744/10816587\">answer of Sacha Vetter</a> (with the update for <strong>Kafka 0.10</strong>), I'd like to provide some additional Information and links to the official documentation.</p>\n<hr />\n<p>Producer Configuration:</p>\n<ul>\n<li><a href=\"https://kafka.apache.org/documentation/#producerconfigs_max.request.size\" rel=\"noreferrer\"><code>max.request.size</code> (Link)</a> has to be increased for files bigger than 1 MB, otherwise they are rejected</li>\n</ul>\n<p>Broker/Topic configuration:</p>\n<ul>\n<li><a href=\"https://kafka.apache.org/documentation/#brokerconfigs_message.max.bytes\" rel=\"noreferrer\"><code>message.max.bytes</code> (Link)</a> may be set, if one like to increase the message size on broker level. But, from the documentation: <em>&quot;This can be set per topic with the topic level max.message.bytes config.&quot;</em></li>\n<li><a href=\"https://kafka.apache.org/documentation/#topicconfigs_max.message.bytes\" rel=\"noreferrer\"><code>max.message.bytes</code> (Link)</a> may be increased, if only one topic should be able to accept lager files. The broker configuration must not be changed.</li>\n</ul>\n<p>I'd always prefer a topic-restricted configuration, due to the fact, that I can configure the topic by myself as a client for the Kafka cluster (e.g. with the <a href=\"https://kafka.apache.org/documentation/#adminclientconfigs\" rel=\"noreferrer\">admin client</a>). I may not have any influence on the broker configuration itself.</p>\n<hr />\n<p>In the answers from above, some more configurations are mentioned as necessary:</p>\n<ul>\n<li><a href=\"https://kafka.apache.org/documentation/#brokerconfigs_replica.fetch.max.bytes\" rel=\"noreferrer\"><code>replica.fetch.max.bytes</code> (Link)</a> (Broker config)</li>\n</ul>\n<p>From the documentation: <em>&quot;This is not an absolute maximum, if the first record batch in the first non-empty partition of the fetch is larger than this value, the record batch will still be returned to ensure that progress can be made.&quot;</em></p>\n<ul>\n<li><a href=\"https://kafka.apache.org/documentation/#consumerconfigs_max.partition.fetch.bytes\" rel=\"noreferrer\"><code>max.partition.fetch.bytes</code> (Link)</a> (Consumer config)</li>\n</ul>\n<p>From the documentation: <em>&quot;Records are fetched in batches by the consumer. If the first record batch in the first non-empty partition of the fetch is larger than this limit, the batch will still be returned to ensure that the consumer can make progress.&quot;</em></p>\n<ul>\n<li><a href=\"https://kafka.apache.org/documentation/#consumerconfigs_fetch.max.bytes\" rel=\"noreferrer\"><code>fetch.max.bytes</code> (Link)</a> (Consumer config; not mentioned above, but same category)</li>\n</ul>\n<p>From the documentation: <em>&quot;Records are fetched in batches by the consumer, and if the first record batch in the first non-empty partition of the fetch is larger than this value, the record batch will still be returned to ensure that the consumer can make progress.&quot;</em></p>\n<hr />\n<p><strong>Conclusion:</strong> The configurations regarding fetching messages are not necessary to change for processing messages, lager than the default values of these configuration (had this tested in a small setup). Probably, the consumer may always get batches of size 1. However, two of the configurations from the first block has to be set, as mentioned in the answers before.</p>\n<p>This clarification should not tell anything about performance and should not be a recommendation to set or not to set these configuration. The best values has to be evaluated individually depending on the concrete planned throughput and data structure.</p>\n"},{"tags":[],"owner":{"account_id":4003656,"reputation":4304,"user_id":3298964,"display_name":"Tobias Ernst"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625845374,"creation_date":1625845374,"answer_id":68319460,"question_id":21020347,"body_markdown":"Here is how I achieved successfully sending data up to 100mb using `kafka-python==2.0.2`:\r\n\r\nBroker:\r\n\r\n    consumer = KafkaConsumer(\r\n        ...\r\n        max_partition_fetch_bytes=max_bytes,\r\n        fetch_max_bytes=max_bytes,         \r\n    )\r\n\r\n\r\nProducer (See final solution at the end):\r\n\r\n    producer = KafkaProducer(\r\n        ...\r\n        max_request_size=KafkaSettings.MAX_BYTES,\r\n    )\r\n\r\n\r\nThen:\r\n\r\n\r\n    producer.send(topic, value=data).get()\r\n\r\nAfter sending data like this, the following exception appeared:\r\n\r\n`MessageSizeTooLargeError: The message is n bytes when serialized which is larger than the total memory buffer you have configured with the buffer_memory configuration.`\r\n\r\n\r\nFinally I increased `buffer_memory` (default 32mb) to receive the message on the other end.\r\n\r\n    producer = KafkaProducer(\r\n        ...\r\n        max_request_size=KafkaSettings.MAX_BYTES,\r\n        buffer_memory=KafkaSettings.MAX_BYTES * 3,\r\n    )\r\n","title":"How can I send large messages with Kafka (over 15MB)?","body":"<p>Here is how I achieved successfully sending data up to 100mb using <code>kafka-python==2.0.2</code>:</p>\n<p>Broker:</p>\n<pre><code>consumer = KafkaConsumer(\n    ...\n    max_partition_fetch_bytes=max_bytes,\n    fetch_max_bytes=max_bytes,         \n)\n</code></pre>\n<p>Producer (See final solution at the end):</p>\n<pre><code>producer = KafkaProducer(\n    ...\n    max_request_size=KafkaSettings.MAX_BYTES,\n)\n</code></pre>\n<p>Then:</p>\n<pre><code>producer.send(topic, value=data).get()\n</code></pre>\n<p>After sending data like this, the following exception appeared:</p>\n<p><code>MessageSizeTooLargeError: The message is n bytes when serialized which is larger than the total memory buffer you have configured with the buffer_memory configuration.</code></p>\n<p>Finally I increased <code>buffer_memory</code> (default 32mb) to receive the message on the other end.</p>\n<pre><code>producer = KafkaProducer(\n    ...\n    max_request_size=KafkaSettings.MAX_BYTES,\n    buffer_memory=KafkaSettings.MAX_BYTES * 3,\n)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1137891,"reputation":345,"user_id":1122559,"accept_rate":47,"display_name":"Mandar K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696835175,"creation_date":1696835175,"answer_id":77256841,"question_id":21020347,"body_markdown":"A better solution I can think of is to store the large messages in an external storage system (like S3 or GCS) and only retain the relevant details for consumers to be able fetch those messages in Kafka Records.","title":"How can I send large messages with Kafka (over 15MB)?","body":"<p>A better solution I can think of is to store the large messages in an external storage system (like S3 or GCS) and only retain the relevant details for consumers to be able fetch those messages in Kafka Records.</p>\n"}],"owner":{"account_id":204382,"reputation":10989,"user_id":517336,"accept_rate":88,"display_name":"Sonson123"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":275598,"favorite_count":0,"down_vote_count":0,"up_vote_count":183,"accepted_answer_id":21343878,"answer_count":10,"score":183,"last_activity_date":1697087344,"creation_date":1389270693,"question_id":21020347,"body_markdown":"I send String-messages to `Kafka V. 0.8` with the Java Producer API.\r\nIf the message size is about 15 MB I get a `MessageSizeTooLargeException`. \r\nI have tried to set `message.max.bytes`to 40 MB, but I still get the exception. Small messages worked without problems.\r\n\r\nThe exception appears in the producer, I don&#39;t have a consumer in this application.\r\n\r\nHow can I get rid of this exception?\r\n\r\n## My example producer config\r\n\r\n    private ProducerConfig kafkaConfig() {\r\n        Properties props = new Properties();\r\n        props.put(&quot;metadata.broker.list&quot;, BROKERS);\r\n        props.put(&quot;serializer.class&quot;, &quot;kafka.serializer.StringEncoder&quot;);\r\n        props.put(&quot;request.required.acks&quot;, &quot;1&quot;);\r\n        props.put(&quot;message.max.bytes&quot;, &quot;&quot; + 1024 * 1024 * 40);\r\n        return new ProducerConfig(props);\r\n    }\r\n\r\n## Error-Log:\r\n\r\n    4709 [main] WARN  kafka.producer.async.DefaultEventHandler  - Produce request with correlation id 214 failed due to [datasift,0]: kafka.common.MessageSizeTooLargeException\r\n    4869 [main] WARN  kafka.producer.async.DefaultEventHandler  - Produce request with    correlation id 217 failed due to [datasift,0]: kafka.common.MessageSizeTooLargeException\r\n    5035 [main] WARN  kafka.producer.async.DefaultEventHandler  - Produce request with   correlation id 220 failed due to [datasift,0]: kafka.common.MessageSizeTooLargeException\r\n    5198 [main] WARN  kafka.producer.async.DefaultEventHandler  - Produce request with correlation id 223 failed due to [datasift,0]: kafka.common.MessageSizeTooLargeException\r\n    5305 [main] ERROR kafka.producer.async.DefaultEventHandler  - Failed to send requests for topics datasift with correlation ids in [213,224]\r\n\r\n    kafka.common.FailedToSendMessageException: Failed to send messages after 3 tries.\r\n\tat kafka.producer.async.DefaultEventHandler.handle(Unknown Source)\r\n\tat kafka.producer.Producer.send(Unknown Source)\r\n\tat kafka.javaapi.producer.Producer.send(Unknown Source)\r\n\r\n","title":"How can I send large messages with Kafka (over 15MB)?","body":"<p>I send String-messages to <code>Kafka V. 0.8</code> with the Java Producer API.\nIf the message size is about 15 MB I get a <code>MessageSizeTooLargeException</code>.\nI have tried to set <code>message.max.bytes</code>to 40 MB, but I still get the exception. Small messages worked without problems.</p>\n<p>The exception appears in the producer, I don't have a consumer in this application.</p>\n<p>How can I get rid of this exception?</p>\n<h2>My example producer config</h2>\n<pre><code>private ProducerConfig kafkaConfig() {\n    Properties props = new Properties();\n    props.put(&quot;metadata.broker.list&quot;, BROKERS);\n    props.put(&quot;serializer.class&quot;, &quot;kafka.serializer.StringEncoder&quot;);\n    props.put(&quot;request.required.acks&quot;, &quot;1&quot;);\n    props.put(&quot;message.max.bytes&quot;, &quot;&quot; + 1024 * 1024 * 40);\n    return new ProducerConfig(props);\n}\n</code></pre>\n<h2>Error-Log:</h2>\n<pre><code>4709 [main] WARN  kafka.producer.async.DefaultEventHandler  - Produce request with correlation id 214 failed due to [datasift,0]: kafka.common.MessageSizeTooLargeException\n4869 [main] WARN  kafka.producer.async.DefaultEventHandler  - Produce request with    correlation id 217 failed due to [datasift,0]: kafka.common.MessageSizeTooLargeException\n5035 [main] WARN  kafka.producer.async.DefaultEventHandler  - Produce request with   correlation id 220 failed due to [datasift,0]: kafka.common.MessageSizeTooLargeException\n5198 [main] WARN  kafka.producer.async.DefaultEventHandler  - Produce request with correlation id 223 failed due to [datasift,0]: kafka.common.MessageSizeTooLargeException\n5305 [main] ERROR kafka.producer.async.DefaultEventHandler  - Failed to send requests for topics datasift with correlation ids in [213,224]\n\nkafka.common.FailedToSendMessageException: Failed to send messages after 3 tries.\nat kafka.producer.async.DefaultEventHandler.handle(Unknown Source)\nat kafka.producer.Producer.send(Unknown Source)\nat kafka.javaapi.producer.Producer.send(Unknown Source)\n</code></pre>\n"},{"tags":["java","kotlin","amazon-connect"],"answers":[{"tags":[],"owner":{"account_id":1083222,"reputation":880,"user_id":1079611,"accept_rate":100,"display_name":"Aossey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697087091,"creation_date":1697087091,"answer_id":77277815,"question_id":77274646,"body_markdown":"Amazon Connect Agent events are published to an Amazon Kinesis Data Stream (KDS). The KDS is just a storage location for the data, which is essentially a JSON representation of each event. You need to use the Kinesis Client Library (KCL), Kinesis Firehose, or Lambda to get the JSON event data from the KDS. Each KDS record has a payload where you will find the the event JSON. The JSON payload will have properties as described in [this documentation][1].\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/connect/latest/adminguide/agent-event-stream-model.html","title":"Is there SDK for Agent event streams data model?","body":"<p>Amazon Connect Agent events are published to an Amazon Kinesis Data Stream (KDS). The KDS is just a storage location for the data, which is essentially a JSON representation of each event. You need to use the Kinesis Client Library (KCL), Kinesis Firehose, or Lambda to get the JSON event data from the KDS. Each KDS record has a payload where you will find the the event JSON. The JSON payload will have properties as described in <a href=\"https://docs.aws.amazon.com/connect/latest/adminguide/agent-event-stream-model.html\" rel=\"nofollow noreferrer\">this documentation</a>.</p>\n"}],"owner":{"account_id":1552500,"reputation":952,"user_id":1444576,"accept_rate":29,"display_name":"Cipous"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697087091,"creation_date":1697039823,"question_id":77274646,"body_markdown":"We would like to consume AWS connect events.\r\nI was hoping there is sdk for [events described][1] but we cannot find anything in [aws java skd][2] nor [kotlin sdk][3]\r\n\r\nWhere could we find SDK that supports Agent and Contact events as they are coming from Kinesis stream?\r\n\r\n  [1]: https://docs.aws.amazon.com/connect/latest/adminguide/agent-event-stream-model.html#AgentEvent\r\n  [2]: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/connect/model/package-summary.html\r\n  [3]: https://sdk.amazonaws.com/kotlin/api/latest/connect/aws.sdk.kotlin.services.connect.model/index.html","title":"Is there SDK for Agent event streams data model?","body":"<p>We would like to consume AWS connect events.\nI was hoping there is sdk for <a href=\"https://docs.aws.amazon.com/connect/latest/adminguide/agent-event-stream-model.html#AgentEvent\" rel=\"nofollow noreferrer\">events described</a> but we cannot find anything in <a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/connect/model/package-summary.html\" rel=\"nofollow noreferrer\">aws java skd</a> nor <a href=\"https://sdk.amazonaws.com/kotlin/api/latest/connect/aws.sdk.kotlin.services.connect.model/index.html\" rel=\"nofollow noreferrer\">kotlin sdk</a></p>\n<p>Where could we find SDK that supports Agent and Contact events as they are coming from Kinesis stream?</p>\n"},{"tags":["java","corretto","java-21"],"comments":[{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1695712138,"post_id":77177393,"comment_id":136057249,"body_markdown":"From the error _&quot;If you would like to submit a bug report, please visit: https://github.com/corretto/corretto-21/issues/&quot;_","body":"From the error <i>&quot;If you would like to submit a bug report, please visit: <a href=\"https://github.com/corretto/corretto-21/issues/\" rel=\"nofollow noreferrer\">github.com/corretto/corretto-21/issues</a>&quot;</i>"},{"owner":{"account_id":2497295,"reputation":3931,"user_id":2173392,"display_name":"pdem"},"score":0,"creation_date":1695712775,"post_id":77177393,"comment_id":136057391,"body_markdown":"Have you tried the openjdk? https://jdk.java.net/21/ Can you provide the reproducer?","body":"Have you tried the openjdk? <a href=\"https://jdk.java.net/21/\" rel=\"nofollow noreferrer\">jdk.java.net/21</a> Can you provide the reproducer?"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1695717498,"post_id":77177393,"comment_id":136058313,"body_markdown":"Also from the error: _An error report file with more information is saved as: /[...]/hs_err_pid3580.log_. That file is important if you want to understand what happened.","body":"Also from the error: <i>An error report file with more information is saved as: /[...]/hs_err_pid3580.log</i>. That file is important if you want to understand what happened."}],"answers":[{"tags":[],"owner":{"account_id":1371634,"reputation":4233,"user_id":1306655,"accept_rate":40,"display_name":"Misagh Moayyed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697087024,"creation_date":1697087024,"answer_id":77277814,"question_id":77177393,"body_markdown":"The issue had to do with netty native libraries that were not compatible with JDK 21. Netty 4.1.99.Final fixes this.\r\n\r\n&gt; Netty 4.1.99.Final released: We are happy to announce the release of netty 4.1.99.Final. This release fixes a bug which could lead to SIGSERV while running on JDK21+. As JDK21 was recently released and is considered an LTS release we did decided to do this emergency release. Because of the nature of this bug (crashing the JVM) you should upgrade ASAP.\r\n\r\nhttps://netty.io/news/2023/09/21/4-1-99-Final.html\r\n\r\n","title":"Corretto JDK 21 Build 35 crash: [libjvm.so+0x840016] G1ParCopyClosure&lt;(G1Barrier)","body":"<p>The issue had to do with netty native libraries that were not compatible with JDK 21. Netty 4.1.99.Final fixes this.</p>\n<blockquote>\n<p>Netty 4.1.99.Final released: We are happy to announce the release of netty 4.1.99.Final. This release fixes a bug which could lead to SIGSERV while running on JDK21+. As JDK21 was recently released and is considered an LTS release we did decided to do this emergency release. Because of the nature of this bug (crashing the JVM) you should upgrade ASAP.</p>\n</blockquote>\n<p><a href=\"https://netty.io/news/2023/09/21/4-1-99-Final.html\" rel=\"nofollow noreferrer\">https://netty.io/news/2023/09/21/4-1-99-Final.html</a></p>\n"}],"owner":{"account_id":1371634,"reputation":4233,"user_id":1306655,"accept_rate":40,"display_name":"Misagh Moayyed"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":181,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77277814,"answer_count":1,"score":-2,"last_activity_date":1697087024,"creation_date":1695708783,"question_id":77177393,"body_markdown":"## Questions\r\n\r\n- Have you seen or encountered the error listed below?\r\n- Thoughts or suggestions as to how one might diagnose this?\r\n- If this is a JDK bug, suggestions as to where this might best be reported? \r\n\r\n## Environment\r\n\r\n- Corretto JDK 21 Build 35 (Also tried with Zulu JDK 21 Build 35)\r\n- GitHub Actions CI - Ubuntu 22.04.3 LTS\r\n- Gradle 8.4 RC1\r\n\r\n## Crash\r\n\r\nJava Runtime crashes with the following error: \r\n\r\n\r\n```\r\n#\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  SIGSEGV (0xb) at pc=0x00007f58e7c40016, pid=3580, tid=3599\r\n#\r\n# JRE version: OpenJDK Runtime Environment Corretto-21.0.0.35.1 (21.0+35) (build 21+35-LTS)\r\n# Java VM: OpenJDK 64-Bit Server VM Corretto-21.0.0.35.1 (21+35-LTS, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)\r\n# Problematic frame:\r\n# V  [libjvm.so+0x840016]  G1ParCopyClosure&lt;(G1Barrier)0, false&gt;::do_oop(oopDesc**)+0x56\r\n#\r\n# Core dump will be written. Default location: Core dumps may be processed with &quot;/usr/share/apport/apport -p%p -s%s -c%c -d%d -P%P -u%u -g%g -- %E&quot; (or dumping to /home/runner/work/cas/cas/support/cas-server-support-ldap-core/core.3580)\r\n#\r\n# An error report file with more information is saved as:\r\n# /home/runner/work/cas/cas/support/cas-server-support-ldap-core/hs_err_pid3580.log\r\n#\r\n# If you would like to submit a bug report, please visit:\r\n#   https://github.com/corretto/corretto-21/issues/\r\n#\r\n#\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  SIGSEGV (0xb) at pc=0x00007f0044440016, pid=3611, tid=3615\r\n#\r\n# JRE version: OpenJDK Runtime Environment Corretto-21.0.0.35.1 (21.0+35) (build 21+35-LTS)\r\n# Java VM: OpenJDK 64-Bit Server VM Corretto-21.0.0.35.1 (21+35-LTS, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)\r\n# Problematic frame:\r\n# V  [libjvm.so+0x840016]  G1ParCopyClosure&lt;(G1Barrier)0, false&gt;::do_oop(oopDesc**)+0x56\r\n#\r\n# Core dump will be written. Default location: Core dumps may be processed with &quot;/usr/share/apport/apport -p%p -s%s -c%c -d%d -P%P -u%u -g%g -- %E&quot; (or dumping to /home/runner/work/cas/cas/support/cas-server-support-ldap/core.3611)\r\n#\r\n# An error report file with more information is saved as:\r\n# /home/runner/work/cas/cas/support/cas-server-support-ldap/hs_err_pid3611.log\r\n#\r\n# If you would like to submit a bug report, please visit:\r\n#   https://github.com/corretto/corretto-21/issues/\r\n```","title":"Corretto JDK 21 Build 35 crash: [libjvm.so+0x840016] G1ParCopyClosure&lt;(G1Barrier)","body":"<h2>Questions</h2>\n<ul>\n<li>Have you seen or encountered the error listed below?</li>\n<li>Thoughts or suggestions as to how one might diagnose this?</li>\n<li>If this is a JDK bug, suggestions as to where this might best be reported?</li>\n</ul>\n<h2>Environment</h2>\n<ul>\n<li>Corretto JDK 21 Build 35 (Also tried with Zulu JDK 21 Build 35)</li>\n<li>GitHub Actions CI - Ubuntu 22.04.3 LTS</li>\n<li>Gradle 8.4 RC1</li>\n</ul>\n<h2>Crash</h2>\n<p>Java Runtime crashes with the following error:</p>\n<pre><code>#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00007f58e7c40016, pid=3580, tid=3599\n#\n# JRE version: OpenJDK Runtime Environment Corretto-21.0.0.35.1 (21.0+35) (build 21+35-LTS)\n# Java VM: OpenJDK 64-Bit Server VM Corretto-21.0.0.35.1 (21+35-LTS, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)\n# Problematic frame:\n# V  [libjvm.so+0x840016]  G1ParCopyClosure&lt;(G1Barrier)0, false&gt;::do_oop(oopDesc**)+0x56\n#\n# Core dump will be written. Default location: Core dumps may be processed with &quot;/usr/share/apport/apport -p%p -s%s -c%c -d%d -P%P -u%u -g%g -- %E&quot; (or dumping to /home/runner/work/cas/cas/support/cas-server-support-ldap-core/core.3580)\n#\n# An error report file with more information is saved as:\n# /home/runner/work/cas/cas/support/cas-server-support-ldap-core/hs_err_pid3580.log\n#\n# If you would like to submit a bug report, please visit:\n#   https://github.com/corretto/corretto-21/issues/\n#\n#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00007f0044440016, pid=3611, tid=3615\n#\n# JRE version: OpenJDK Runtime Environment Corretto-21.0.0.35.1 (21.0+35) (build 21+35-LTS)\n# Java VM: OpenJDK 64-Bit Server VM Corretto-21.0.0.35.1 (21+35-LTS, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)\n# Problematic frame:\n# V  [libjvm.so+0x840016]  G1ParCopyClosure&lt;(G1Barrier)0, false&gt;::do_oop(oopDesc**)+0x56\n#\n# Core dump will be written. Default location: Core dumps may be processed with &quot;/usr/share/apport/apport -p%p -s%s -c%c -d%d -P%P -u%u -g%g -- %E&quot; (or dumping to /home/runner/work/cas/cas/support/cas-server-support-ldap/core.3611)\n#\n# An error report file with more information is saved as:\n# /home/runner/work/cas/cas/support/cas-server-support-ldap/hs_err_pid3611.log\n#\n# If you would like to submit a bug report, please visit:\n#   https://github.com/corretto/corretto-21/issues/\n</code></pre>\n"},{"tags":["java","android","android-fragments","android-activity"],"owner":{"account_id":19174752,"reputation":62,"user_id":14007693,"display_name":"alireza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697087005,"creation_date":1697076259,"question_id":77277287,"body_markdown":"I tried to change [this][1] answer to send data from a fragment to a new activity. But `listener` gets null when activity starts.\r\n\r\nI checked and after the first time activity starts, listener gets valued and works fine.\r\nI know there are better ways to communicate between fragments and activities but for the sake of learning i want to do it this way. Thanks.\r\n\r\nMapsFragment :\r\n    \r\n    private static MapsFragment.onMySignalListener listener;\r\n    public void switchWindow() {\r\n        if (listener == null)\r\n            Toast.makeText(getContext(), &quot;Problem&quot;, Toast.LENGTH_LONG).show();\r\n\r\n        if(listener != null){\r\n            listener.onMySignal(paramImageUrl);\r\n        }\r\n    }\r\n    public interface onMySignalListener {\r\n        void onMySignal(String image_url);\r\n    }\r\n    public static void setOnMySignalListener(MapsFragment.onMySignalListener listener) {\r\n        MapsFragment.listener = listener;\r\n    }\r\n\r\nDestination Activity :\r\n\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n    .\r\n    MapsFragment.setOnMySignalListener(new MapsFragment.onMySignalListener() {\r\n            @Override\r\n            public void onMySignal(String image_url) {\r\n                ImageUrl = image_url;\r\n            }\r\n        });\r\n    }\r\n\r\n somewhere in a button listener in the fragment i call this method\r\n\r\n    switchWindow();\r\n\r\n  [1]: https://stackoverflow.com/a/9097390/14007693","title":"Interface of a fragment in a new activity returns null for the first time","body":"<p>I tried to change <a href=\"https://stackoverflow.com/a/9097390/14007693\">this</a> answer to send data from a fragment to a new activity. But <code>listener</code> gets null when activity starts.</p>\n<p>I checked and after the first time activity starts, listener gets valued and works fine.\nI know there are better ways to communicate between fragments and activities but for the sake of learning i want to do it this way. Thanks.</p>\n<p>MapsFragment :</p>\n<pre><code>private static MapsFragment.onMySignalListener listener;\npublic void switchWindow() {\n    if (listener == null)\n        Toast.makeText(getContext(), &quot;Problem&quot;, Toast.LENGTH_LONG).show();\n\n    if(listener != null){\n        listener.onMySignal(paramImageUrl);\n    }\n}\npublic interface onMySignalListener {\n    void onMySignal(String image_url);\n}\npublic static void setOnMySignalListener(MapsFragment.onMySignalListener listener) {\n    MapsFragment.listener = listener;\n}\n</code></pre>\n<p>Destination Activity :</p>\n<pre><code>protected void onCreate(Bundle savedInstanceState) {\n.\nMapsFragment.setOnMySignalListener(new MapsFragment.onMySignalListener() {\n        @Override\n        public void onMySignal(String image_url) {\n            ImageUrl = image_url;\n        }\n    });\n}\n</code></pre>\n<p>somewhere in a button listener in the fragment i call this method</p>\n<pre><code>switchWindow();\n</code></pre>\n"},{"tags":["java","jpa","interface","repository"],"comments":[{"owner":{"account_id":1806969,"reputation":102,"user_id":1643891,"display_name":"Sup19"},"score":0,"creation_date":1697086708,"post_id":77277445,"comment_id":136235670,"body_markdown":"Does this answer your question? [How are Spring Data repositories actually implemented?](https://stackoverflow.com/questions/38509882/how-are-spring-data-repositories-actually-implemented)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/38509882/how-are-spring-data-repositories-actually-implemented\">How are Spring Data repositories actually implemented?</a>"}],"answers":[{"tags":[],"owner":{"account_id":29653351,"reputation":16,"user_id":22726649,"display_name":"Palash Shah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697085357,"creation_date":1697085357,"answer_id":77277736,"question_id":77277445,"body_markdown":"Spring Data JPA generates a dynamic proxy for your repository interface at runtime.\r\nSpring Data JPA analyzes the method names in your repository interface to derive the query it should execute. It uses conventions to translate method names into SQL queries or JPA queries.\r\nSpring Data JPA generates SQL or JPQL (Java Persistence Query Language) queries based on the method names and the structure of your domain model.\r\nSpring Data JPA uses the JPA EntityManager to execute the generated queries. \r\nJPA maps the results of the query to your domain objects, transforming the database rows into Java objects.","title":"JPA repository interface","body":"<p>Spring Data JPA generates a dynamic proxy for your repository interface at runtime.\nSpring Data JPA analyzes the method names in your repository interface to derive the query it should execute. It uses conventions to translate method names into SQL queries or JPA queries.\nSpring Data JPA generates SQL or JPQL (Java Persistence Query Language) queries based on the method names and the structure of your domain model.\nSpring Data JPA uses the JPA EntityManager to execute the generated queries.\nJPA maps the results of the query to your domain objects, transforming the database rows into Java objects.</p>\n"}],"owner":{"account_id":26692607,"reputation":3,"user_id":20300969,"display_name":"Deepak Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77277736,"answer_count":1,"score":0,"last_activity_date":1697085357,"creation_date":1697079881,"question_id":77277445,"body_markdown":"JPA repository is an interface and it&#39;s implemented by some other class. Then how we are able to use JPA repository&#39;s method in our class without implementing it.\r\n\r\nI was using JPA repository&#39;s method but I don&#39;t know how it&#39;s internally working.","title":"JPA repository interface","body":"<p>JPA repository is an interface and it's implemented by some other class. Then how we are able to use JPA repository's method in our class without implementing it.</p>\n<p>I was using JPA repository's method but I don't know how it's internally working.</p>\n"},{"tags":["java","hibernate","hibernate-criteria"],"answers":[{"tags":[],"owner":{"account_id":925302,"reputation":713,"user_id":956197,"accept_rate":67,"display_name":"Teifi"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1355726177,"creation_date":1355726177,"answer_id":13909409,"question_id":13858876,"body_markdown":"suppose your tables like that:\r\n\r\n    @Entity\r\n    public class Professor{\r\n        K id;\r\n        List&lt;Student&gt; students;\r\n    }\r\n\r\n    @Entity\r\n    public class Student{\r\n        K profid;\r\n        List&lt;Assignments&gt; assignments;\r\n    }\r\n\r\n    @Entity\r\n    public class Assignments{\r\n        K studentid;\r\n    }\r\n\r\nsimple sample by using alias:\r\n\r\n    Criteria criteria = currentSession.createCriteria(Professor.class, &quot;professor&quot;);\r\n        criteria.createAlias(&quot;professor.students&quot;, &quot;student&quot;);\r\n        criteria.createAlias(&quot;student.assigments&quot;, &quot;assigment&quot;);\r\n        criteria.add(Restrictions.eqProperty(&quot;professor.id&quot;, &quot;student.profid&quot;));\r\n        criteria.add(Restrictions.eqProperty(&quot;assigment.studentid&quot;, &quot;student.profid&quot;));\r\n        criteria.add(Restrictions.eq(&quot;id&quot;, 2411));\r\n    return criteria.list();","title":"Hibernate criteria query multiple criteria","body":"<p>suppose your tables like that:</p>\n\n<pre><code>@Entity\npublic class Professor{\n    K id;\n    List&lt;Student&gt; students;\n}\n\n@Entity\npublic class Student{\n    K profid;\n    List&lt;Assignments&gt; assignments;\n}\n\n@Entity\npublic class Assignments{\n    K studentid;\n}\n</code></pre>\n\n<p>simple sample by using alias:</p>\n\n<pre><code>Criteria criteria = currentSession.createCriteria(Professor.class, \"professor\");\n    criteria.createAlias(\"professor.students\", \"student\");\n    criteria.createAlias(\"student.assigments\", \"assigment\");\n    criteria.add(Restrictions.eqProperty(\"professor.id\", \"student.profid\"));\n    criteria.add(Restrictions.eqProperty(\"assigment.studentid\", \"student.profid\"));\n    criteria.add(Restrictions.eq(\"id\", 2411));\nreturn criteria.list();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11966550,"reputation":1991,"user_id":8756056,"display_name":"Mikhail"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697084412,"creation_date":1697083882,"answer_id":77277672,"question_id":13858876,"body_markdown":"In Kotlin + Spring Data JPA.\r\nIf entities have no relations in your code (@OneToMany, @ManyToOne, @ManyToMany, @OneToOne): \r\n    \r\n    @Entity\r\n    data class Professor(\r\n    \t@Id\r\n        var id: Long?,\r\n    )\r\n    \r\n    @Entity\r\n    data class Student(\r\n    \t@Id\r\n        var id: Long?,\r\n        var professorId: Long,\r\n    )\r\n    \r\n    @Entity\r\n    data class Assignment(\r\n    \t@Id\r\n    \tvar id: Long?,\r\n        var studentId: Long,\r\n    )\r\n    \r\n    data class ResultModel(\r\n    \tval professorId: Long,\r\n        val studentId: Long,\r\n        val assignmentId: Long,\r\n    )\r\n\r\nThe query might be like this:\r\n\r\n    val cb = entityManager.criteriaBuilder\r\n    val query = cb.createQuery(KfoProjectBySearchEntity::class.java)\r\n    val professor = query.from(Professor::class.java)\r\n    val student = query.from(Student::class.java)\r\n    val assignment = query.from(Assignment::class.java)\r\n                 \r\n    query.select(\r\n        cb.construct(\r\n            ResultModel::class.java,\r\n            professor.get&lt;Long&gt;(Professor::id.name),\r\n            student.get&lt;Long&gt;(Student::id.name),\r\n            assignment.get&lt;Long&gt;(Assignment::id.name),\r\n        )\r\n    ).where(\r\n    \tcb.and(\r\n    \t\tcb.equal(\r\n    \t\t    professor.get&lt;Long&gt;(Professor::id.name),\r\n    \t\t    student.get&lt;Long&gt;(Student::professorId.name),\r\n    \t\t),\r\n    \t\tcb.equal(\r\n    \t\t    student.get&lt;Long&gt;(Student::id.name),\r\n    \t\t    assignment.get&lt;Long&gt;(Assignment::studentId.name),\r\n    \t\t),\r\n    \t\tcb.equal(\r\n    \t\t    professor.get&lt;Long&gt;(Professor::id.name),\r\n    \t\t    2411L,\r\n    \t\t),\r\n    \t\t\r\n    \t)\r\n    )\r\n\r\n","title":"Hibernate criteria query multiple criteria","body":"<p>In Kotlin + Spring Data JPA.\nIf entities have no relations in your code (@OneToMany, @ManyToOne, @ManyToMany, @OneToOne):</p>\n<pre><code>@Entity\ndata class Professor(\n    @Id\n    var id: Long?,\n)\n\n@Entity\ndata class Student(\n    @Id\n    var id: Long?,\n    var professorId: Long,\n)\n\n@Entity\ndata class Assignment(\n    @Id\n    var id: Long?,\n    var studentId: Long,\n)\n\ndata class ResultModel(\n    val professorId: Long,\n    val studentId: Long,\n    val assignmentId: Long,\n)\n</code></pre>\n<p>The query might be like this:</p>\n<pre><code>val cb = entityManager.criteriaBuilder\nval query = cb.createQuery(KfoProjectBySearchEntity::class.java)\nval professor = query.from(Professor::class.java)\nval student = query.from(Student::class.java)\nval assignment = query.from(Assignment::class.java)\n             \nquery.select(\n    cb.construct(\n        ResultModel::class.java,\n        professor.get&lt;Long&gt;(Professor::id.name),\n        student.get&lt;Long&gt;(Student::id.name),\n        assignment.get&lt;Long&gt;(Assignment::id.name),\n    )\n).where(\n    cb.and(\n        cb.equal(\n            professor.get&lt;Long&gt;(Professor::id.name),\n            student.get&lt;Long&gt;(Student::professorId.name),\n        ),\n        cb.equal(\n            student.get&lt;Long&gt;(Student::id.name),\n            assignment.get&lt;Long&gt;(Assignment::studentId.name),\n        ),\n        cb.equal(\n            professor.get&lt;Long&gt;(Professor::id.name),\n            2411L,\n        ),\n        \n    )\n)\n</code></pre>\n"}],"owner":{"account_id":1303051,"reputation":1624,"user_id":1252595,"accept_rate":79,"display_name":"ilya.stmn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14621,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":13909409,"answer_count":2,"score":7,"last_activity_date":1697084412,"creation_date":1355398138,"question_id":13858876,"body_markdown":"In my current project I&#39;ve faced a problem of getting entities with hibernate criteria query. I have the following entities:\r\n \r\n - Professor, which contains a list of students\r\n - Student, which contains a list of assignments.\r\n - Assignment, which contains id of student to which it is assigned to.\r\n\r\nNow, I want to get all assignments relative to the professor, i.e. all assignments Professor assigned to his students.\r\n\r\nThis query shows what I want to implement in criteria query.\r\n   \r\n    select * from Assigment p, Student a, Professor c where p.studentid = a.id and a.proffid = c.id and c.id = 2411;\r\n\r\nHow can I implement this query using hibernate criteria API?","title":"Hibernate criteria query multiple criteria","body":"<p>In my current project I've faced a problem of getting entities with hibernate criteria query. I have the following entities:</p>\n\n<ul>\n<li>Professor, which contains a list of students</li>\n<li>Student, which contains a list of assignments.</li>\n<li>Assignment, which contains id of student to which it is assigned to.</li>\n</ul>\n\n<p>Now, I want to get all assignments relative to the professor, i.e. all assignments Professor assigned to his students.</p>\n\n<p>This query shows what I want to implement in criteria query.</p>\n\n<pre><code>select * from Assigment p, Student a, Professor c where p.studentid = a.id and a.proffid = c.id and c.id = 2411;\n</code></pre>\n\n<p>How can I implement this query using hibernate criteria API?</p>\n"},{"tags":["java","performance","caching","java-native-interface"],"answers":[{"tags":[],"owner":{"account_id":156522,"reputation":13969,"user_id":373861,"accept_rate":95,"display_name":"Favonius"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1337170314,"creation_date":1337170314,"answer_id":10618239,"question_id":10617735,"body_markdown":"You can have some utility structures like this:\r\n\r\n    typedef struct MYVARIANT_FID_CACHE {\r\n        int cached;\r\n        jclass clazz;\r\n        jfieldID pAddress;\r\n    } MYVARIANT_FID_CACHE;\r\n    \r\n    MYVARIANT_FID_CACHE VARIANTFc;\r\n    \r\n    void cacheMYVARIANTFields(JNIEnv *env, jobject lpObject)\r\n    {\r\n        if (VARIANTFc.cached) return;\r\n        VARIANTFc.clazz = env-&gt;GetObjectClass(lpObject);\r\n        VARIANTFc.pAddress = env-&gt;GetFieldID(VARIANTFc.clazz, &quot;pAddress&quot;, &quot;I&quot;);\r\n        VARIANTFc.cached = 1;\r\n    }\r\n    \r\n    VARIANT *getMYVARIANTFields(JNIEnv *env, jobject lpObject, VARIANT *lpStruct)\r\n    {\r\n        if (!VARIANTFc.cached) cacheVARIANT2Fields(env, lpObject);\r\n    \r\n        lpStruct = (VARIANT*)(env-&gt;GetIntField(lpObject, VARIANTFc.pAddress));\r\n    \r\n        return lpStruct;\r\n    }\r\n\r\nThis is taken from my question: https://stackoverflow.com/questions/10617714/how-to-extend-swt-com-support\r\n\r\nFor some good examples look at the `os_structs.c` it is bundled with eclipse SWT implementation. \r\n\r\n**Note:** The above code is just an example and could be adapted for different OS. Also it just shows &quot;how to access java fields&quot;; for methods you could follow the same approach.\r\n","title":"In JNI, how do I cache the class, methodID, and fieldIDs per IBM&#39;s performance recommendations?","body":"<p>You can have some utility structures like this:</p>\n\n<pre><code>typedef struct MYVARIANT_FID_CACHE {\n    int cached;\n    jclass clazz;\n    jfieldID pAddress;\n} MYVARIANT_FID_CACHE;\n\nMYVARIANT_FID_CACHE VARIANTFc;\n\nvoid cacheMYVARIANTFields(JNIEnv *env, jobject lpObject)\n{\n    if (VARIANTFc.cached) return;\n    VARIANTFc.clazz = env-&gt;GetObjectClass(lpObject);\n    VARIANTFc.pAddress = env-&gt;GetFieldID(VARIANTFc.clazz, \"pAddress\", \"I\");\n    VARIANTFc.cached = 1;\n}\n\nVARIANT *getMYVARIANTFields(JNIEnv *env, jobject lpObject, VARIANT *lpStruct)\n{\n    if (!VARIANTFc.cached) cacheVARIANT2Fields(env, lpObject);\n\n    lpStruct = (VARIANT*)(env-&gt;GetIntField(lpObject, VARIANTFc.pAddress));\n\n    return lpStruct;\n}\n</code></pre>\n\n<p>This is taken from my question: <a href=\"https://stackoverflow.com/questions/10617714/how-to-extend-swt-com-support\">https://stackoverflow.com/questions/10617714/how-to-extend-swt-com-support</a></p>\n\n<p>For some good examples look at the <code>os_structs.c</code> it is bundled with eclipse SWT implementation. </p>\n\n<p><strong>Note:</strong> The above code is just an example and could be adapted for different OS. Also it just shows \"how to access java fields\"; for methods you could follow the same approach.</p>\n"},{"tags":[],"owner":{"account_id":343371,"reputation":1298,"user_id":675034,"display_name":"Julien"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1337587740,"creation_date":1337587740,"answer_id":10681561,"question_id":10617735,"body_markdown":"For simple case, I use static fields in the C code, initialized with an initId method called from my java classes :\r\n\r\n    package demo;\r\n    public class WithNatives {\r\n    \r\n     static {\r\n       initIDs();\r\n     }\r\n    \r\n     private static native void initIDs();\r\n    \r\n    }\r\n\r\nAnd in C :\r\n\r\n    static jmethodID methodId;\r\n    \r\n    void JNICALL Java_demo_WithNatives_initIDs(JNIEnv *env, jclass clazz)\r\n    {\r\n       // initialize methodId\r\n    }\r\n\r\n","title":"In JNI, how do I cache the class, methodID, and fieldIDs per IBM&#39;s performance recommendations?","body":"<p>For simple case, I use static fields in the C code, initialized with an initId method called from my java classes :</p>\n\n<pre><code>package demo;\npublic class WithNatives {\n\n static {\n   initIDs();\n }\n\n private static native void initIDs();\n\n}\n</code></pre>\n\n<p>And in C :</p>\n\n<pre><code>static jmethodID methodId;\n\nvoid JNICALL Java_demo_WithNatives_initIDs(JNIEnv *env, jclass clazz)\n{\n   // initialize methodId\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":961675,"reputation":4991,"user_id":985906,"accept_rate":93,"display_name":"JoshDM"},"down_vote_count":0,"up_vote_count":55,"is_accepted":true,"score":55,"last_activity_date":1697084110,"creation_date":1355861570,"answer_id":13940735,"question_id":10617735,"body_markdown":"There is no built-in methodology to follow, however here is a somewhat standard, clean, and repeatable implementation showing how I practice IBM&#39;s recommendation.\r\n\r\nI am going to assume you are calling your DLL from Java and you are referencing it multiple times throughout your application life-cycle.\r\n\r\nThe sample Native Java Class is named `org.stackoverflow.jni.NativeClazz`, which will implement the 2 built-in JNI methods `JNI_OnLoad()` and `JNI_OnUnload()`.\r\n\r\n`void JNI_OnLoad(JavaVM *vm, void *reserved)`:  This method will be used to register the Class IDs as global variables and assign the Method IDs and Field IDs to static variables.  The method is automatically called when the driver is loaded by the Java VM; it is only called once during the driver life-cycle.\r\n\r\n`void JNI_OnUnload(JavaVM *vm, void *reserved)`:  This method will be used to free any global variables registered by `JNI_OnLoad()`.  The VM will automatically call `JNI_OnUnload()` immediately prior to application shutdown.\r\n\r\n**Rationale:** It&#39;s my understanding the Class IDs must be registered as global references to maintain the viability of any associated Method ID / Field IDs.  If this isn&#39;t done and the class is unloaded from the JVM, on class reload, the Method IDs / Field IDs may be different.  If the Class ID is registered as a global reference, the associated Method IDs and Field IDs do not need to be registered as global references.  Registering a Class ID as a global reference prevents the associated Java class from unloading, therefore stabilizing the Method ID / Field ID values.  Global references, including the Class IDs should be removed in `JNI_OnUnload()`.\r\n\r\nMethod IDs and Field IDs are not managed by the native code; they are managed by the virtual machine and are valid until the associated class is unloaded. Field IDs and Method IDs cannot be explicitly deleted before the virtual machine unloads the defining class; they can be left for the VM to handle after unload.\r\n\r\n**Sample Code**\r\n\r\nComments in the following C++ code sections explain registering variables globally.\r\n\r\n*Here is the Java class `BeanObject` representing a data object:*\r\n\r\n\r\n    package org.stackoverflow.data;\r\n    \r\n    public class BeanObject {\r\n    \r\n        String foo = &quot;&quot;;\r\n    \t\r\n        public String getFoo() {\r\n\t     \r\n            return foo;\r\n        }\r\n    }\r\n\r\n*Here is a skeleton Java class `NativeClazz`:*\r\n\r\n    package org.stackoverflow.jni;\r\n    \r\n    import org.stackoverflow.data.BeanObject;\r\n    \r\n    public class NativeClazz {\r\n    \r\n        // Static area for forced initialization\r\n        static {\r\n    \r\n            // Load Native Library (C++); calls JNI_OnLoad()\r\n            System.loadLibrary(&quot;Native_Library_File_Name&quot;);\r\n        }\t\t\r\n    \r\n        /**\r\n         * A static native method you plan to call.\r\n         */\r\n        public static native void staticNativeMethod(BeanObject bean);\r\n    \r\n        /**\r\n         * A non-static native method you plan to call, to show this also works with \r\n         * Java class instances.\r\n         */\r\n        public native void instanceNativeMethod(BeanObject bean);\r\n    }\r\n\r\n*Here is the C++ header file &quot;`org_stackoverflow_jni_NativeClazz.h`&quot; generated using `javah` on `NativeClazz`:*\r\n\r\n    /* DO NOT EDIT THIS FILE - it is machine generated */\r\n    #include &lt;jni.h&gt;\r\n    /* Header for class org_stackoverflow_jni_NativeClazz */\r\n    \r\n    #ifndef _Included_org_stackoverflow_jni_NativeClazz\r\n    #define _Included_org_stackoverflow_jni_NativeClazz\r\n    #ifdef __cplusplus\r\n    extern &quot;C&quot; {\r\n    #endif\r\n    \r\n    /*\r\n     * Class:     org_stackoverflow_jni_NativeClazz_staticNativeMethod\r\n     * Method:    staticNativeMethod\r\n     * Signature: ()V\r\n     */\r\n    JNIEXPORT void JNICALL Java_org_stackoverflow_jni_NativeClazz_staticNativeMethod\r\n      (JNIEnv *, jclass, jobject);\r\n    \r\n    /*\r\n     * Class:     org_stackoverflow_jni_NativeClazz_instanceNativeMethod\r\n     * Method:    instanceNativeMethod\r\n     * Signature: ()V\r\n     */\r\n    JNIEXPORT void JNICALL Java_org_stackoverflow_jni_NativeClazz_instanceNativeMethod\r\n      (JNIEnv *, jobject, jobject);\r\n    \r\n    #ifdef __cplusplus\r\n    }\r\n    #endif\r\n    #endif\r\n\r\n*Here is the C++ .cpp file implementing the header file:*\r\n\r\n    #include &quot;org_stackoverflow_jni_NativeClazz.h&quot;\r\n    \r\n    using namespace std;\r\n    \r\n    /**************************************************************\r\n     * Static Global Variables to cache Java Class and Method IDs\r\n     **************************************************************/\r\n    static jclass JC_BeanObject;              // declare for each class\r\n    static jmethodID JMID_BeanObject_getFoo;  // declare for each class method\r\n    \r\n    /**************************************************************\r\n     * Declare general JNI_VERSION for use in JNI_Onload/JNI_OnUnLoad\r\n     * Change value if a Java upgrade requires it (prior: JNI_VERSION_1_6)\r\n     * JNI_VERSION_#_# obtained from jni.h inclusion \r\n     **************************************************************/\r\n    static jint JNI_VERSION = JNI_VERSION_1_8;\r\n\r\n    /**************************************************************\r\n     * Initialize the static Class and Method Id variables\r\n     **************************************************************/\r\n    jint JNI_OnLoad(JavaVM* vm, void* reserved) {\r\n    \r\n        // Obtain the JNIEnv from the VM and confirm JNI_VERSION\r\n        JNIEnv* env;\r\n        if (vm-&gt;GetEnv(reinterpret_cast&lt;void**&gt;(&amp;env), JNI_VERSION) != JNI_OK) {\r\n\r\n            return JNI_ERR;\r\n        }\r\n\r\n        // Temporary local reference holder\r\n        jclass tempLocalClassRef;\r\n    \r\n        // STEP 1/3 : Load the class id\r\n        tempLocalClassRef = env-&gt;FindClass(&quot;org/stackoverflow/data/BeanObject&quot;);\r\n    \r\n        // STEP 2/3 : Assign the ClassId as a Global Reference\r\n        JC_BeanObject = (jclass) env-&gt;NewGlobalRef(tempLocalClassRef);\r\n    \r\n        // STEP 3/3 : Delete the no longer needed local reference\r\n        env-&gt;DeleteLocalRef(tempLocalClassRef);\r\n        \r\n        // Load the method id\r\n        JMID_BeanObject_getFoo = env-&gt;GetMethodID(JC_BeanObject, &quot;getFoo&quot;, &quot;(Ljava/lang/String;)V&quot;);\r\n    \r\n        // ... repeat prior line for any other methods of BeanObject\r\n    \r\n        // ... repeat STEPS 1-3 for any other classes; re-use tempLocalClassRef.\r\n\r\n        // Return the JNI Version as required by method\r\n        return JNI_VERSION;\r\n    }\r\n    \r\n    /**************************************************************\r\n     * Destroy the global static Class Id variables\r\n     **************************************************************/\r\n    void JNI_OnUnload(JavaVM *vm, void *reserved) {\r\n\r\n        // Obtain the JNIEnv from the VM\r\n        // NOTE: some re-do the JNI Version check here, but I find that redundant\r\n        JNIEnv* env;\r\n        vm-&gt;GetEnv(reinterpret_cast&lt;void**&gt;(&amp;env), JNI_VERSION);\r\n    \r\n        // Destroy the global references\r\n        env-&gt;DeleteGlobalRef(JC_BeanObject);\r\n        \r\n        // ... repeat for any other global references\r\n    }\r\n    \r\n    /**************************************************************\r\n     * A Static Native Method\r\n     **************************************************************/\r\n    JNIEXPORT void JNICALL Java_org_stackoverflow_jni_NativeClazz_staticNativeMethod\r\n                   (JNIEnv * env, jclass clazz, jobject jBeanObject) {\r\n        \r\n        // Retrieve jstring from the Java Object\r\n        jstring jFoo = (jstring)env-&gt;CallObjectMethod(jBeanObject, JMID_BeanObject_getFoo);\r\n\r\n        // Make accessible to C++\r\n        const char * cFoo = env-&gt;GetStringUTFChars(jFoo, NULL);             \r\n\r\n        // Do something with cFoo...\r\n\r\n        // Release Resources\r\n        env-&gt;ReleaseStringUTFChars(jFoo, cFoo);\r\n        env-&gt;DeleteLocalRef(jFoo);\r\n    }\r\n    \r\n    /**************************************************************\r\n     * Instance / Non-Static Native Method\r\n     **************************************************************/\r\n    JNIEXPORT void JNICALL Java_org_stackoverflow_jni_NativeClazz_instanceNativeMethod\r\n                   (JNIEnv * env, jobject selfReference, jobject jBeanObject) {\r\n    \r\n        // Retrieve jstring from the Java Object\r\n        jstring jFoo = (jstring)env-&gt;CallObjectMethod(jBeanObject, JMID_BeanObject_getFoo);               \r\n\r\n        // Make accessible to C++\r\n        const char * cFoo = env-&gt;GetStringUTFChars(jFoo, NULL);             \r\n\r\n        // Do something with cFoo...\r\n\r\n        // Release Resources\r\n        env-&gt;ReleaseStringUTFChars(jFoo, cFoo);\r\n        env-&gt;DeleteLocalRef(jFoo);\r\n    }","title":"In JNI, how do I cache the class, methodID, and fieldIDs per IBM&#39;s performance recommendations?","body":"<p>There is no built-in methodology to follow, however here is a somewhat standard, clean, and repeatable implementation showing how I practice IBM's recommendation.</p>\n<p>I am going to assume you are calling your DLL from Java and you are referencing it multiple times throughout your application life-cycle.</p>\n<p>The sample Native Java Class is named <code>org.stackoverflow.jni.NativeClazz</code>, which will implement the 2 built-in JNI methods <code>JNI_OnLoad()</code> and <code>JNI_OnUnload()</code>.</p>\n<p><code>void JNI_OnLoad(JavaVM *vm, void *reserved)</code>:  This method will be used to register the Class IDs as global variables and assign the Method IDs and Field IDs to static variables.  The method is automatically called when the driver is loaded by the Java VM; it is only called once during the driver life-cycle.</p>\n<p><code>void JNI_OnUnload(JavaVM *vm, void *reserved)</code>:  This method will be used to free any global variables registered by <code>JNI_OnLoad()</code>.  The VM will automatically call <code>JNI_OnUnload()</code> immediately prior to application shutdown.</p>\n<p><strong>Rationale:</strong> It's my understanding the Class IDs must be registered as global references to maintain the viability of any associated Method ID / Field IDs.  If this isn't done and the class is unloaded from the JVM, on class reload, the Method IDs / Field IDs may be different.  If the Class ID is registered as a global reference, the associated Method IDs and Field IDs do not need to be registered as global references.  Registering a Class ID as a global reference prevents the associated Java class from unloading, therefore stabilizing the Method ID / Field ID values.  Global references, including the Class IDs should be removed in <code>JNI_OnUnload()</code>.</p>\n<p>Method IDs and Field IDs are not managed by the native code; they are managed by the virtual machine and are valid until the associated class is unloaded. Field IDs and Method IDs cannot be explicitly deleted before the virtual machine unloads the defining class; they can be left for the VM to handle after unload.</p>\n<p><strong>Sample Code</strong></p>\n<p>Comments in the following C++ code sections explain registering variables globally.</p>\n<p><em>Here is the Java class <code>BeanObject</code> representing a data object:</em></p>\n<pre><code>package org.stackoverflow.data;\n\npublic class BeanObject {\n\n    String foo = &quot;&quot;;\n    \n    public String getFoo() {\n     \n        return foo;\n    }\n}\n</code></pre>\n<p><em>Here is a skeleton Java class <code>NativeClazz</code>:</em></p>\n<pre><code>package org.stackoverflow.jni;\n\nimport org.stackoverflow.data.BeanObject;\n\npublic class NativeClazz {\n\n    // Static area for forced initialization\n    static {\n\n        // Load Native Library (C++); calls JNI_OnLoad()\n        System.loadLibrary(&quot;Native_Library_File_Name&quot;);\n    }       \n\n    /**\n     * A static native method you plan to call.\n     */\n    public static native void staticNativeMethod(BeanObject bean);\n\n    /**\n     * A non-static native method you plan to call, to show this also works with \n     * Java class instances.\n     */\n    public native void instanceNativeMethod(BeanObject bean);\n}\n</code></pre>\n<p><em>Here is the C++ header file &quot;<code>org_stackoverflow_jni_NativeClazz.h</code>&quot; generated using <code>javah</code> on <code>NativeClazz</code>:</em></p>\n<pre><code>/* DO NOT EDIT THIS FILE - it is machine generated */\n#include &lt;jni.h&gt;\n/* Header for class org_stackoverflow_jni_NativeClazz */\n\n#ifndef _Included_org_stackoverflow_jni_NativeClazz\n#define _Included_org_stackoverflow_jni_NativeClazz\n#ifdef __cplusplus\nextern &quot;C&quot; {\n#endif\n\n/*\n * Class:     org_stackoverflow_jni_NativeClazz_staticNativeMethod\n * Method:    staticNativeMethod\n * Signature: ()V\n */\nJNIEXPORT void JNICALL Java_org_stackoverflow_jni_NativeClazz_staticNativeMethod\n  (JNIEnv *, jclass, jobject);\n\n/*\n * Class:     org_stackoverflow_jni_NativeClazz_instanceNativeMethod\n * Method:    instanceNativeMethod\n * Signature: ()V\n */\nJNIEXPORT void JNICALL Java_org_stackoverflow_jni_NativeClazz_instanceNativeMethod\n  (JNIEnv *, jobject, jobject);\n\n#ifdef __cplusplus\n}\n#endif\n#endif\n</code></pre>\n<p><em>Here is the C++ .cpp file implementing the header file:</em></p>\n<pre><code>#include &quot;org_stackoverflow_jni_NativeClazz.h&quot;\n\nusing namespace std;\n\n/**************************************************************\n * Static Global Variables to cache Java Class and Method IDs\n **************************************************************/\nstatic jclass JC_BeanObject;              // declare for each class\nstatic jmethodID JMID_BeanObject_getFoo;  // declare for each class method\n\n/**************************************************************\n * Declare general JNI_VERSION for use in JNI_Onload/JNI_OnUnLoad\n * Change value if a Java upgrade requires it (prior: JNI_VERSION_1_6)\n * JNI_VERSION_#_# obtained from jni.h inclusion \n **************************************************************/\nstatic jint JNI_VERSION = JNI_VERSION_1_8;\n\n/**************************************************************\n * Initialize the static Class and Method Id variables\n **************************************************************/\njint JNI_OnLoad(JavaVM* vm, void* reserved) {\n\n    // Obtain the JNIEnv from the VM and confirm JNI_VERSION\n    JNIEnv* env;\n    if (vm-&gt;GetEnv(reinterpret_cast&lt;void**&gt;(&amp;env), JNI_VERSION) != JNI_OK) {\n\n        return JNI_ERR;\n    }\n\n    // Temporary local reference holder\n    jclass tempLocalClassRef;\n\n    // STEP 1/3 : Load the class id\n    tempLocalClassRef = env-&gt;FindClass(&quot;org/stackoverflow/data/BeanObject&quot;);\n\n    // STEP 2/3 : Assign the ClassId as a Global Reference\n    JC_BeanObject = (jclass) env-&gt;NewGlobalRef(tempLocalClassRef);\n\n    // STEP 3/3 : Delete the no longer needed local reference\n    env-&gt;DeleteLocalRef(tempLocalClassRef);\n    \n    // Load the method id\n    JMID_BeanObject_getFoo = env-&gt;GetMethodID(JC_BeanObject, &quot;getFoo&quot;, &quot;(Ljava/lang/String;)V&quot;);\n\n    // ... repeat prior line for any other methods of BeanObject\n\n    // ... repeat STEPS 1-3 for any other classes; re-use tempLocalClassRef.\n\n    // Return the JNI Version as required by method\n    return JNI_VERSION;\n}\n\n/**************************************************************\n * Destroy the global static Class Id variables\n **************************************************************/\nvoid JNI_OnUnload(JavaVM *vm, void *reserved) {\n\n    // Obtain the JNIEnv from the VM\n    // NOTE: some re-do the JNI Version check here, but I find that redundant\n    JNIEnv* env;\n    vm-&gt;GetEnv(reinterpret_cast&lt;void**&gt;(&amp;env), JNI_VERSION);\n\n    // Destroy the global references\n    env-&gt;DeleteGlobalRef(JC_BeanObject);\n    \n    // ... repeat for any other global references\n}\n\n/**************************************************************\n * A Static Native Method\n **************************************************************/\nJNIEXPORT void JNICALL Java_org_stackoverflow_jni_NativeClazz_staticNativeMethod\n               (JNIEnv * env, jclass clazz, jobject jBeanObject) {\n    \n    // Retrieve jstring from the Java Object\n    jstring jFoo = (jstring)env-&gt;CallObjectMethod(jBeanObject, JMID_BeanObject_getFoo);\n\n    // Make accessible to C++\n    const char * cFoo = env-&gt;GetStringUTFChars(jFoo, NULL);             \n\n    // Do something with cFoo...\n\n    // Release Resources\n    env-&gt;ReleaseStringUTFChars(jFoo, cFoo);\n    env-&gt;DeleteLocalRef(jFoo);\n}\n\n/**************************************************************\n * Instance / Non-Static Native Method\n **************************************************************/\nJNIEXPORT void JNICALL Java_org_stackoverflow_jni_NativeClazz_instanceNativeMethod\n               (JNIEnv * env, jobject selfReference, jobject jBeanObject) {\n\n    // Retrieve jstring from the Java Object\n    jstring jFoo = (jstring)env-&gt;CallObjectMethod(jBeanObject, JMID_BeanObject_getFoo);               \n\n    // Make accessible to C++\n    const char * cFoo = env-&gt;GetStringUTFChars(jFoo, NULL);             \n\n    // Do something with cFoo...\n\n    // Release Resources\n    env-&gt;ReleaseStringUTFChars(jFoo, cFoo);\n    env-&gt;DeleteLocalRef(jFoo);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4063938,"reputation":321,"user_id":3339622,"display_name":"xmpy"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1516655365,"creation_date":1424006178,"answer_id":28526447,"question_id":10617735,"body_markdown":"Here is how I practice IBM&#39;s recommendation.\r\nConsidering demo java class like that:\r\n\r\n\tpublic class SimpleClazz {\r\n\t\t\r\n\t\tpublic int value = 10;\r\n\t\t\r\n\t\tpublic native int getValue();\r\n\r\n\t\tstatic {\r\n\t\t\t// Load Native Library\r\n\t\t\tSystem.loadLibrary(&quot;The native library name&quot;);\r\n\t\t}\r\n\t}\r\n\r\nThe corresponding jni header file like that:\r\n\r\n\t/* DO NOT EDIT THIS FILE - it is machine generated */\r\n\t#include &lt;jni.h&gt;\r\n\t/* Header for class SimpleClazz */\r\n\r\n\t#ifndef _Included_SimpleClazz\r\n\t#define _Included_SimpleClazz\r\n\t#ifdef __cplusplus\r\n\textern &quot;C&quot; {\r\n\t#endif\r\n\t/*\r\n\t * Class:     SimpleClazz\r\n\t * Method:    getValue\r\n\t * Signature: ()I\r\n\t */\r\n\tJNIEXPORT jint JNICALL Java_SimpleClazz_getValue\r\n\t  (JNIEnv *, jobject);\r\n\r\n\t#ifdef __cplusplus\r\n\t}\r\n\t#endif\r\n\t#endif\r\n\r\nAccording to IBM&#39;s recommendation, we need to cache the used class `SimpleClazz` and the field id of the object member `value`.\r\n \r\nAfter learning this good [article](http://normanmaurer.me/blog/2014/01/07/JNI-Performance-Welcome-to-the-dark-side/), I cache the `SimpleClazz` in the function `JNI_OnLoad `, which is called when the native library is loaded (for example, through System.loadLibrary). In the `JNI_Onload`, we do find class and store this jclass as a global field.\r\n\r\nFurthermore, in the native implementation of `getValue`, we use static local variable to cache the field id of `value`. This design is to make sure this filed id can be in the better scope, rather than in the global scope. The drawback of this design is that we need to compare with NULL each time we call this function. I learnt this design from section 4.4.1 of the book [The Java Native Interface: Programmer&#39;s Guide and Specification](http://barbie.uta.edu/~jli/Resources/Resource%20Provisoning&amp;Performance%20Evaluation/85.pdf).\r\n\r\nFinally, we also need to write the function `JNI_OnUnload`, which is called when the class loader containing the native library is garbage collected. In this function, we release the global reference of jclass.\r\n\r\n\r\nMy cpp implementation is shown as below:\r\n\r\n\t#include &lt;jni.h&gt;\r\n\t#include &lt;SimpleClazz.h&gt;\r\n\r\n\tstatic jclass simpleCls;\r\n\r\n\t// According to http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html#JNI_OnLoad\r\n\t// The VM calls JNI_OnLoad when the native library is loaded (for example, through System.loadLibrary).\r\n\tjint JNI_OnLoad(JavaVM* vm, void* reserved) {\r\n        JNIEnv* env;\r\n\t\tif ((*vm)-&gt;GetEnv(vm, (void **) &amp;env, JNI_VERSION_1_6) != JNI_OK) {\r\n\t        return JNI_ERR;\r\n\t    } else {\r\n\t    \tjclass localSimpleCls = (*env)-&gt;FindClass(&quot;SimpleClazz&quot;);\r\n\t        \r\n\t        if (localSimpleCls == NULL) {\r\n\t            return JNI_ERR;\r\n\t        }\r\n\t        simpleCls = (jclass) (*env)-&gt;NewGlobalRef(env, localSimpleCls);\r\n\t    } \r\n\t    return JNI_VERSION_1_6;\r\n\t}\r\n\r\n\r\n\r\n\tJNIEXPORT jint JNICALL Java_SimpleClazz_getValue(JNIEnv * env, jobject thiz){\r\n\t\tstatic jfieldID valueID = NULL;\r\n\t\tif (valueID == NULL) {\r\n\t\t\tvalueID = (*env)-&gt;GetFieldID(env, simpleCls, &quot;value&quot;, &quot;I&quot;);\r\n\t\t\tif (valueID == NULL){\r\n\t\t\t\treturn JNI_ERR; \t\t// Exception thrown\r\n\t\t\t}\r\n\t\t}\r\n\t\tjint value = (*env)-&gt;GetIntField(env, thiz, valueID);\r\n\t\treturn value;\r\n\t}\r\n\r\n\t// According to http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html#JNI_OnUnload\r\n\t// The VM calls JNI_OnUnload when the class loader containing the native library is garbage collected.\r\n\tvoid JNI_OnUnload(JavaVM *vm, void *reserved) {\r\n\t\tJNIEnv* env;\r\n\t    if ((*vm)-&gt;GetEnv(vm, (void **) &amp;env, JNI_VERSION_1_6) != JNI_OK) {\r\n\t        // Something is wrong but nothing we can do about this :(\r\n\t        return;\r\n\t    } else {\r\n\t    \tif (0 != NULL){\r\n\t    \t\t(*env)-&gt;DeleteGlobalRef(env, simpleCls);\r\n\t    \t}\r\n\t    }\r\n\t}\r\n","title":"In JNI, how do I cache the class, methodID, and fieldIDs per IBM&#39;s performance recommendations?","body":"<p>Here is how I practice IBM's recommendation.\nConsidering demo java class like that:</p>\n\n<pre><code>public class SimpleClazz {\n\n    public int value = 10;\n\n    public native int getValue();\n\n    static {\n        // Load Native Library\n        System.loadLibrary(\"The native library name\");\n    }\n}\n</code></pre>\n\n<p>The corresponding jni header file like that:</p>\n\n<pre><code>/* DO NOT EDIT THIS FILE - it is machine generated */\n#include &lt;jni.h&gt;\n/* Header for class SimpleClazz */\n\n#ifndef _Included_SimpleClazz\n#define _Included_SimpleClazz\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n/*\n * Class:     SimpleClazz\n * Method:    getValue\n * Signature: ()I\n */\nJNIEXPORT jint JNICALL Java_SimpleClazz_getValue\n  (JNIEnv *, jobject);\n\n#ifdef __cplusplus\n}\n#endif\n#endif\n</code></pre>\n\n<p>According to IBM's recommendation, we need to cache the used class <code>SimpleClazz</code> and the field id of the object member <code>value</code>.</p>\n\n<p>After learning this good <a href=\"http://normanmaurer.me/blog/2014/01/07/JNI-Performance-Welcome-to-the-dark-side/\" rel=\"nofollow noreferrer\">article</a>, I cache the <code>SimpleClazz</code> in the function <code>JNI_OnLoad</code>, which is called when the native library is loaded (for example, through System.loadLibrary). In the <code>JNI_Onload</code>, we do find class and store this jclass as a global field.</p>\n\n<p>Furthermore, in the native implementation of <code>getValue</code>, we use static local variable to cache the field id of <code>value</code>. This design is to make sure this filed id can be in the better scope, rather than in the global scope. The drawback of this design is that we need to compare with NULL each time we call this function. I learnt this design from section 4.4.1 of the book <a href=\"http://barbie.uta.edu/~jli/Resources/Resource%20Provisoning&amp;Performance%20Evaluation/85.pdf\" rel=\"nofollow noreferrer\">The Java Native Interface: Programmer's Guide and Specification</a>.</p>\n\n<p>Finally, we also need to write the function <code>JNI_OnUnload</code>, which is called when the class loader containing the native library is garbage collected. In this function, we release the global reference of jclass.</p>\n\n<p>My cpp implementation is shown as below:</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;SimpleClazz.h&gt;\n\nstatic jclass simpleCls;\n\n// According to http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html#JNI_OnLoad\n// The VM calls JNI_OnLoad when the native library is loaded (for example, through System.loadLibrary).\njint JNI_OnLoad(JavaVM* vm, void* reserved) {\n    JNIEnv* env;\n    if ((*vm)-&gt;GetEnv(vm, (void **) &amp;env, JNI_VERSION_1_6) != JNI_OK) {\n        return JNI_ERR;\n    } else {\n        jclass localSimpleCls = (*env)-&gt;FindClass(\"SimpleClazz\");\n\n        if (localSimpleCls == NULL) {\n            return JNI_ERR;\n        }\n        simpleCls = (jclass) (*env)-&gt;NewGlobalRef(env, localSimpleCls);\n    } \n    return JNI_VERSION_1_6;\n}\n\n\n\nJNIEXPORT jint JNICALL Java_SimpleClazz_getValue(JNIEnv * env, jobject thiz){\n    static jfieldID valueID = NULL;\n    if (valueID == NULL) {\n        valueID = (*env)-&gt;GetFieldID(env, simpleCls, \"value\", \"I\");\n        if (valueID == NULL){\n            return JNI_ERR;         // Exception thrown\n        }\n    }\n    jint value = (*env)-&gt;GetIntField(env, thiz, valueID);\n    return value;\n}\n\n// According to http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html#JNI_OnUnload\n// The VM calls JNI_OnUnload when the class loader containing the native library is garbage collected.\nvoid JNI_OnUnload(JavaVM *vm, void *reserved) {\n    JNIEnv* env;\n    if ((*vm)-&gt;GetEnv(vm, (void **) &amp;env, JNI_VERSION_1_6) != JNI_OK) {\n        // Something is wrong but nothing we can do about this :(\n        return;\n    } else {\n        if (0 != NULL){\n            (*env)-&gt;DeleteGlobalRef(env, simpleCls);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1724432,"reputation":510,"user_id":1579455,"accept_rate":50,"display_name":"Jon Scobie"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578704939,"creation_date":1549895730,"answer_id":54632891,"question_id":10617735,"body_markdown":"Referring to the answer given by @JoshDM \r\n\r\nThe C interface for this is slightly different than the C++ one given above. You have to write it like this :-\r\n\r\n    /**************************************************************\r\n     * Initialize the static Class and Method Id variables\r\n     **************************************************************/\r\n    jint JNI_OnLoad(JavaVM* vm, void* reserved) {\r\n\r\n        // Obtain the JNIEnv from the VM and confirm JNI_VERSION\r\n        JNIEnv* env;\r\n        if (*(vm)-&gt;GetEnv(vm, (void**)&amp;env, JNI_VERSION) != JNI_OK) {\r\n\r\n            return JNI_ERR;\r\n        }\r\n\r\n        // Temporary local reference holder\r\n        jclass tempLocalClassRef;\r\n\r\n        // STEP 1/3 : Load the class id\r\n        tempLocalClassRef = (*env)-&gt;FindClass(env, &quot;org/stackoverflow/data/BeanObject&quot;);\r\n\r\n        // STEP 2/3 : Assign the ClassId as a Global Reference\r\n        JC_BeanObject = (jclass) (*env)-&gt;NewGlobalRef(env, tempLocalClassRef);\r\n\r\n        // STEP 3/3 : Delete the no longer needed local reference\r\n        (*env)-&gt;DeleteLocalRef(env, tempLocalClassRef);\r\n\r\n        // Load the method id\r\n        JMID_BeanObject_getFoo = (*env)-&gt;GetMethodID(env, JC_BeanObject, &quot;getFoo&quot;, &quot;(Ljava/lang/String;)V&quot;);\r\n\r\n        // ... repeat prior line for any other methods of BeanObject\r\n\r\n        // ... repeat STEPS 1-3 for any other classes; re-use tempLocalClassRef.\r\n\r\n        // Return the JNI Version as required by method\r\n        return JNI_VERSION;\r\n    }","title":"In JNI, how do I cache the class, methodID, and fieldIDs per IBM&#39;s performance recommendations?","body":"<p>Referring to the answer given by @JoshDM </p>\n\n<p>The C interface for this is slightly different than the C++ one given above. You have to write it like this :-</p>\n\n<pre><code>/**************************************************************\n * Initialize the static Class and Method Id variables\n **************************************************************/\njint JNI_OnLoad(JavaVM* vm, void* reserved) {\n\n    // Obtain the JNIEnv from the VM and confirm JNI_VERSION\n    JNIEnv* env;\n    if (*(vm)-&gt;GetEnv(vm, (void**)&amp;env, JNI_VERSION) != JNI_OK) {\n\n        return JNI_ERR;\n    }\n\n    // Temporary local reference holder\n    jclass tempLocalClassRef;\n\n    // STEP 1/3 : Load the class id\n    tempLocalClassRef = (*env)-&gt;FindClass(env, \"org/stackoverflow/data/BeanObject\");\n\n    // STEP 2/3 : Assign the ClassId as a Global Reference\n    JC_BeanObject = (jclass) (*env)-&gt;NewGlobalRef(env, tempLocalClassRef);\n\n    // STEP 3/3 : Delete the no longer needed local reference\n    (*env)-&gt;DeleteLocalRef(env, tempLocalClassRef);\n\n    // Load the method id\n    JMID_BeanObject_getFoo = (*env)-&gt;GetMethodID(env, JC_BeanObject, \"getFoo\", \"(Ljava/lang/String;)V\");\n\n    // ... repeat prior line for any other methods of BeanObject\n\n    // ... repeat STEPS 1-3 for any other classes; re-use tempLocalClassRef.\n\n    // Return the JNI Version as required by method\n    return JNI_VERSION;\n}\n</code></pre>\n"}],"owner":{"account_id":326393,"reputation":22554,"user_id":648138,"accept_rate":68,"display_name":"Suhail Gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17694,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":13940735,"answer_count":5,"score":29,"last_activity_date":1697084110,"creation_date":1337168388,"question_id":10617735,"body_markdown":"I read on [on IBM](http://www.ibm.com/developerworks/java/library/j-jni/index.html#notc) that \r\n\r\n&gt; To access Java objects&#39; fields and invoke their methods, native code\r\n&gt; must make calls to FindClass(), GetFieldID(), GetMethodId(), and\r\n&gt; GetStaticMethodID(). In the case of GetFieldID(), GetMethodID(), and\r\n&gt; GetStaticMethodID(), the IDs returned for a given class don&#39;t change\r\n&gt; for the lifetime of the JVM process. But the call to get the field or\r\n&gt; method can require significant work in the JVM, because fields and\r\n&gt; methods might have been inherited from superclasses, making the JVM\r\n&gt; walk up the class hierarchy to find them. Because the IDs are the same\r\n&gt; for a given class, you should look them up once and then reuse them.\r\n&gt; Similarly, looking up class objects can be expensive, so they should\r\n&gt; be cached as well.\r\n\r\nHow does one **cache** the `methodID`, `fieldID`, and `class` objects in JNI?\r\nAre there built-in methods or a specific procedure that has to be followed?","title":"In JNI, how do I cache the class, methodID, and fieldIDs per IBM&#39;s performance recommendations?","body":"<p>I read on <a href=\"http://www.ibm.com/developerworks/java/library/j-jni/index.html#notc\" rel=\"noreferrer\">on IBM</a> that </p>\n\n<blockquote>\n  <p>To access Java objects' fields and invoke their methods, native code\n  must make calls to FindClass(), GetFieldID(), GetMethodId(), and\n  GetStaticMethodID(). In the case of GetFieldID(), GetMethodID(), and\n  GetStaticMethodID(), the IDs returned for a given class don't change\n  for the lifetime of the JVM process. But the call to get the field or\n  method can require significant work in the JVM, because fields and\n  methods might have been inherited from superclasses, making the JVM\n  walk up the class hierarchy to find them. Because the IDs are the same\n  for a given class, you should look them up once and then reuse them.\n  Similarly, looking up class objects can be expensive, so they should\n  be cached as well.</p>\n</blockquote>\n\n<p>How does one <strong>cache</strong> the <code>methodID</code>, <code>fieldID</code>, and <code>class</code> objects in JNI?\nAre there built-in methods or a specific procedure that has to be followed?</p>\n"},{"tags":["java","testing","mocking","cucumber","karate"],"answers":[{"tags":[],"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697083720,"creation_date":1697083720,"answer_id":77277661,"question_id":77276587,"body_markdown":"The `@setup` hook is designed to work only for tests and not for mocks. Since the `Background` for mocks is run &quot;once only&quot;, you just set a variable, call a JS function if needed and nothing more is required. If you do need something specific, do consider contributing code.","title":"Karate mock with @setup scenario does not work","body":"<p>The <code>@setup</code> hook is designed to work only for tests and not for mocks. Since the <code>Background</code> for mocks is run &quot;once only&quot;, you just set a variable, call a JS function if needed and nothing more is required. If you do need something specific, do consider contributing code.</p>\n"}],"owner":{"account_id":9744856,"reputation":985,"user_id":7225171,"accept_rate":67,"display_name":"Serob_b"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697083720,"creation_date":1697061195,"question_id":77276587,"body_markdown":"I&#39;m on karate v1.4.0\r\n\r\nWant to define a function and a variable to be used on mock creation (`pathToMy.js` always returns `true`):\r\n\r\n    @setup\r\n    Scenario:\r\n        * def data = read(&#39;data.json&#39;)\r\n        * def myFunc = read(&#39;pathToMy.js&#39;)\r\n\r\n    Scenario: pathMatches(&#39;/my_url&#39;) &amp;&amp; methodIs(&#39;post&#39;) &amp;&amp; myFunc()\r\n        * def responseHeaders = { &#39;Content-Type&#39;: &#39;application/json&#39; }\r\n        * def response = data\r\n        * def responseStatus = 200\r\n\r\nWhen I request to `/my_url` on test run, it does not return anything: moreover, just having another scenario with or without `@setup` does not allow mock URL to be captured:\r\n\r\n\r\n    Scenario:\r\n        * def data= read(&#39;data.json&#39;)\r\n\r\n    # Note that not connected to the above scenario at all\r\n    Scenario: pathMatches(&#39;/my_url&#39;) &amp;&amp; methodIs(&#39;post&#39;) \r\n        * def responseHeaders = { &#39;Content-Type&#39;: &#39;application/json&#39; }\r\n        * def response = {&quot;my&quot;:&quot;data&quot;} \r\n        * def responseStatus = 200\r\n\r\n\r\nAlso, when not using additional scenario, but trying to call the method to match, it does not work:\r\n\r\n    Scenario: pathMatches(&#39;/my_url&#39;) &amp;&amp; methodIs(&#39;post&#39;) &amp;&amp; call read(&#39;pathToMy.js&#39;) # call diectly\r\n        * def responseHeaders = { &#39;Content-Type&#39;: &#39;application/json&#39; }\r\n        * def response = {&quot;my&quot;:&quot;data&quot;}\r\n        * def responseStatus = 200\r\n\r\nBut when I do the same thing without additional scenario and method call it works:\r\n\r\n    Scenario: pathMatches(&#39;/my_url&#39;) &amp;&amp; methodIs(&#39;post&#39;) \r\n        * def responseHeaders = { &#39;Content-Type&#39;: &#39;application/json&#39; }\r\n        * def response = read(&#39;data.json&#39;) # read data from a file\r\n        * def responseStatus = 200\r\n\r\nP.S. An ideal solution for my use case would be a possibility to have `Scenario Outline`, but seems it is also not supported (as I use `@setup` to provide an external json file)","title":"Karate mock with @setup scenario does not work","body":"<p>I'm on karate v1.4.0</p>\n<p>Want to define a function and a variable to be used on mock creation (<code>pathToMy.js</code> always returns <code>true</code>):</p>\n<pre><code>@setup\nScenario:\n    * def data = read('data.json')\n    * def myFunc = read('pathToMy.js')\n\nScenario: pathMatches('/my_url') &amp;&amp; methodIs('post') &amp;&amp; myFunc()\n    * def responseHeaders = { 'Content-Type': 'application/json' }\n    * def response = data\n    * def responseStatus = 200\n</code></pre>\n<p>When I request to <code>/my_url</code> on test run, it does not return anything: moreover, just having another scenario with or without <code>@setup</code> does not allow mock URL to be captured:</p>\n<pre><code>Scenario:\n    * def data= read('data.json')\n\n# Note that not connected to the above scenario at all\nScenario: pathMatches('/my_url') &amp;&amp; methodIs('post') \n    * def responseHeaders = { 'Content-Type': 'application/json' }\n    * def response = {&quot;my&quot;:&quot;data&quot;} \n    * def responseStatus = 200\n</code></pre>\n<p>Also, when not using additional scenario, but trying to call the method to match, it does not work:</p>\n<pre><code>Scenario: pathMatches('/my_url') &amp;&amp; methodIs('post') &amp;&amp; call read('pathToMy.js') # call diectly\n    * def responseHeaders = { 'Content-Type': 'application/json' }\n    * def response = {&quot;my&quot;:&quot;data&quot;}\n    * def responseStatus = 200\n</code></pre>\n<p>But when I do the same thing without additional scenario and method call it works:</p>\n<pre><code>Scenario: pathMatches('/my_url') &amp;&amp; methodIs('post') \n    * def responseHeaders = { 'Content-Type': 'application/json' }\n    * def response = read('data.json') # read data from a file\n    * def responseStatus = 200\n</code></pre>\n<p>P.S. An ideal solution for my use case would be a possibility to have <code>Scenario Outline</code>, but seems it is also not supported (as I use <code>@setup</code> to provide an external json file)</p>\n"},{"tags":["java","maven","aop","aspectj","hikaricp"],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697083499,"creation_date":1696824188,"answer_id":77256208,"question_id":77253592,"body_markdown":"First of all, I do believe `AspectJ` is not proper choice for this particular case, since you are using `spring-framework` you may build more elegant solution using `BeanPostProcessor` and [`datasource-proxy` project](https://github.com/jdbc-observations/datasource-proxy), smth. like:\r\n\r\n\r\n```java\r\npublic class DiagDataSourcePostProcessor implements BeanPostProcessor {\r\n\r\n    @Override\r\n    public Object postProcessAfterInitialization(@NonNull Object bean, @NonNull String beanName) throws BeansException {\r\n        if (!(bean instanceof DataSource)) {\r\n            return bean;\r\n        }\r\n\r\n        ProxyDataSourceBuilder builder = ProxyDataSourceBuilder.create(beanName, (DataSource) bean);\r\n        builder.listener(new JdbcLifecycleEventListenerAdapter() {\r\n\r\n            public void beforeClose(MethodExecutionContext executionContext) {\r\n                if (executionContext.getTarget() instanceof Connection) {\r\n                    // some logic here\r\n                }\r\n            }\r\n\r\n            public void afterGetConnection(MethodExecutionContext executionContext) {\r\n                // some logic here\r\n            }\r\n\r\n\r\n        });\r\n        return builder.build();\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\n@Bean\r\npublic static BeanPostProcessor diagDataSourcePostProcessor() {\r\n    return new DiagDataSourcePostProcessor();\r\n}\r\n```\r\n\r\n\r\n----------\r\n\r\n\r\nAs regards to your aspectj project it contains some smells which actually prevent you from achieving your goal:\r\n\r\n1. you should avoid defining plugins and dependencies in aggregate pom&#39;s - in your case you have turned `aspectj` module into &quot;application&quot; however that should be a &quot;library&quot;, so, aggregate pom (`demo`) should look like:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.4&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n\t\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    &lt;name&gt;aspectj-demo&lt;/name&gt;\r\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n\t&lt;modules&gt;\r\n\t\t&lt;module&gt;aspectj&lt;/module&gt;\r\n\t\t&lt;module&gt;some-app&lt;/module&gt;\r\n\t&lt;/modules&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n2. since the purpose of `aspectj` module is to build some kind of &quot;enhanced&quot; version of `HikariCP` (**in case of compile-time weaving**), it should not &quot;depend&quot; on `HikariCP` from &quot;library observer&quot; perspective, otherwise application classpath will contain two versions of `HikariCP` library: &quot;enhanced&quot; and the original one, so, `aspectj` pom should look like:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;aspectj&lt;/artifactId&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9.20&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\r\n                &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\r\n                &lt;version&gt;5.0.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n         &lt;plugin&gt;\r\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;1.14.0&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n                &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\r\n                &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\r\n                &lt;verbose&gt;true&lt;/verbose&gt;\r\n                &lt;Xlint&gt;ignore&lt;/Xlint&gt;\r\n                &lt;weaveDependencies&gt;\r\n                    &lt;weaveDependency&gt;\r\n                        &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\r\n                    &lt;/weaveDependency&gt;\r\n                &lt;/weaveDependencies&gt;\r\n            &lt;/configuration&gt;\r\n            &lt;executions&gt;\r\n                &lt;execution&gt;\r\n                    &lt;goals&gt;\r\n                        &lt;goal&gt;compile&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n        &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n3. and, I believe, that is clear the application module (`some-app`) should depend on `aspectj` module and do not depended on `HikariCP`, so, finally we get:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;some-app&lt;/artifactId&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aspectj&lt;/artifactId&gt;\r\n            &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;version&gt;42.5.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.4&lt;/version&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                        &lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nUnfortunately, the configuration above is unreliable, the problem is it does work within maven context but there is no chance it will work smoothly in IDE.","title":"AspectJ weave external dependency code, repackage jar and force dependency users to use it","body":"<p>First of all, I do believe <code>AspectJ</code> is not proper choice for this particular case, since you are using <code>spring-framework</code> you may build more elegant solution using <code>BeanPostProcessor</code> and <a href=\"https://github.com/jdbc-observations/datasource-proxy\" rel=\"nofollow noreferrer\"><code>datasource-proxy</code> project</a>, smth. like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DiagDataSourcePostProcessor implements BeanPostProcessor {\n\n    @Override\n    public Object postProcessAfterInitialization(@NonNull Object bean, @NonNull String beanName) throws BeansException {\n        if (!(bean instanceof DataSource)) {\n            return bean;\n        }\n\n        ProxyDataSourceBuilder builder = ProxyDataSourceBuilder.create(beanName, (DataSource) bean);\n        builder.listener(new JdbcLifecycleEventListenerAdapter() {\n\n            public void beforeClose(MethodExecutionContext executionContext) {\n                if (executionContext.getTarget() instanceof Connection) {\n                    // some logic here\n                }\n            }\n\n            public void afterGetConnection(MethodExecutionContext executionContext) {\n                // some logic here\n            }\n\n\n        });\n        return builder.build();\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic static BeanPostProcessor diagDataSourcePostProcessor() {\n    return new DiagDataSourcePostProcessor();\n}\n</code></pre>\n<hr />\n<p>As regards to your aspectj project it contains some smells which actually prevent you from achieving your goal:</p>\n<ol>\n<li>you should avoid defining plugins and dependencies in aggregate pom's - in your case you have turned <code>aspectj</code> module into &quot;application&quot; however that should be a &quot;library&quot;, so, aggregate pom (<code>demo</code>) should look like:</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    \n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;name&gt;aspectj-demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;modules&gt;\n        &lt;module&gt;aspectj&lt;/module&gt;\n        &lt;module&gt;some-app&lt;/module&gt;\n    &lt;/modules&gt;\n\n&lt;/project&gt;\n</code></pre>\n<ol start=\"2\">\n<li>since the purpose of <code>aspectj</code> module is to build some kind of &quot;enhanced&quot; version of <code>HikariCP</code> (<strong>in case of compile-time weaving</strong>), it should not &quot;depend&quot; on <code>HikariCP</code> from &quot;library observer&quot; perspective, otherwise application classpath will contain two versions of <code>HikariCP</code> library: &quot;enhanced&quot; and the original one, so, <code>aspectj</code> pom should look like:</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\n        &lt;artifactId&gt;demo&lt;/artifactId&gt;\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;aspectj&lt;/artifactId&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n            &lt;version&gt;1.9.20&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\n            &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\n                &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\n                &lt;version&gt;5.0.1&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n         &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.14.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\n                &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\n                &lt;verbose&gt;true&lt;/verbose&gt;\n                &lt;Xlint&gt;ignore&lt;/Xlint&gt;\n                &lt;weaveDependencies&gt;\n                    &lt;weaveDependency&gt;\n                        &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\n                        &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\n                    &lt;/weaveDependency&gt;\n                &lt;/weaveDependencies&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<ol start=\"3\">\n<li>and, I believe, that is clear the application module (<code>some-app</code>) should depend on <code>aspectj</code> module and do not depended on <code>HikariCP</code>, so, finally we get:</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\n        &lt;artifactId&gt;demo&lt;/artifactId&gt;\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;some-app&lt;/artifactId&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.example&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectj&lt;/artifactId&gt;\n            &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;42.5.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n                &lt;version&gt;3.1.4&lt;/version&gt;\n                &lt;exclusions&gt;\n                    &lt;exclusion&gt;\n                        &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\n                        &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\n                    &lt;/exclusion&gt;\n                &lt;/exclusions&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Unfortunately, the configuration above is unreliable, the problem is it does work within maven context but there is no chance it will work smoothly in IDE.</p>\n"}],"owner":{"account_id":14996835,"reputation":51,"user_id":10825918,"display_name":"Tovarisch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77256208,"answer_count":1,"score":1,"last_activity_date":1697083499,"creation_date":1696767709,"question_id":77253592,"body_markdown":"Let&#39;s say I have a common multi-module maven project which modules are used as dependencies across bunch of the projects, I want to weave my Aspects into Hikari dependency classes and make this logic in the on of these common modules and make those common multi-module users to have woven Hikari jar. As I guess the following steps are required:\r\n1) Compile code with aspects (did that)\r\n2) Repackage external jar with code from 1)\r\n3) Somehow force all the projects having this common dependency to use this repackaged jar.\r\n\r\nI am kind of confused of steps 2-3 possibility and didn&#39;t manage to find any reliable guides or doc references. Is it even possible in the way all the changes will be seamless for dependency users? Project to look at or play with : [git-repo][1]\r\n\r\n\r\n  [1]: https://github.com/setofaces/aspectj-maven-sof","title":"AspectJ weave external dependency code, repackage jar and force dependency users to use it","body":"<p>Let's say I have a common multi-module maven project which modules are used as dependencies across bunch of the projects, I want to weave my Aspects into Hikari dependency classes and make this logic in the on of these common modules and make those common multi-module users to have woven Hikari jar. As I guess the following steps are required:</p>\n<ol>\n<li>Compile code with aspects (did that)</li>\n<li>Repackage external jar with code from 1)</li>\n<li>Somehow force all the projects having this common dependency to use this repackaged jar.</li>\n</ol>\n<p>I am kind of confused of steps 2-3 possibility and didn't manage to find any reliable guides or doc references. Is it even possible in the way all the changes will be seamless for dependency users? Project to look at or play with : <a href=\"https://github.com/setofaces/aspectj-maven-sof\" rel=\"nofollow noreferrer\">git-repo</a></p>\n"},{"tags":["java","spring-boot","maven"],"comments":[{"owner":{"account_id":1751415,"reputation":5059,"user_id":1600419,"accept_rate":78,"display_name":"Richie"},"score":0,"creation_date":1612962163,"post_id":66137318,"comment_id":116928673,"body_markdown":"It looks like the problem is in your Test class ApplicationTests. Can you add the code for that class above?","body":"It looks like the problem is in your Test class ApplicationTests. Can you add the code for that class above?"},{"owner":{"account_id":7780187,"reputation":165,"user_id":5886828,"display_name":"SwapnilM"},"score":0,"creation_date":1612963927,"post_id":66137318,"comment_id":116929479,"body_markdown":"@Richie Please find below test class and I don&#39;t see anything in test class\n\n```\nimport org.junit.jupiter.api.Test;\nimport org.springframework.boot.test.context.SpringBootTest;\n\n@SpringBootTest\nclass ApplicationTests {\n\n\t@Test\n\tvoid contextLoads() {\n\t}\n\n}\n```","body":"@Richie Please find below test class and I don&#39;t see anything in test class  ``` import org.junit.jupiter.api.Test; import org.springframework.boot.test.context.SpringBootTest;  @SpringBootTest class ApplicationTests {  \t@Test \tvoid contextLoads() { \t}  } ```"}],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612971498,"creation_date":1612962209,"answer_id":66137454,"question_id":66137318,"body_markdown":"Your error is this:  `Caused by: java.lang.NoClassDefFoundError: org/springframework/web/filter/FormContentFilter`\r\n\r\nFormContentFilter is part of the Spring-Web, therefore I suggest you add to your pom.xml if you use maven, or the proper gradle dependency.\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n--- Kindly remove this dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.11.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n-----Edited Pom:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;groupId&gt;GroupId&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;artifactId&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;appName&lt;/name&gt;\r\n    \t&lt;description&gt;DESC&lt;/description&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.4.2&lt;/version&gt;\r\n    \t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-jersey&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.session&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-session-core&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.oracle.jdbc&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;ojdbc7&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;12.1.0.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.restdocs&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-restdocs-mockmvc&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; \r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n","title":"java.lang.IllegalStateException: Error processing condition on org.springframework.boot.actuate.autoconfigure.audit.AuditAutoConfiguration","body":"<p>Your error is this:  <code>Caused by: java.lang.NoClassDefFoundError: org/springframework/web/filter/FormContentFilter</code></p>\n<p>FormContentFilter is part of the Spring-Web, therefore I suggest you add to your pom.xml if you use maven, or the proper gradle dependency.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>--- Kindly remove this dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n    &lt;version&gt;4.3.11.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>-----Edited Pom:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;GroupId&lt;/groupId&gt;\n    &lt;artifactId&gt;artifactId&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;appName&lt;/name&gt;\n    &lt;description&gt;DESC&lt;/description&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.4.2&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jersey&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.session&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-session-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.jdbc&lt;/groupId&gt;\n            &lt;artifactId&gt;ojdbc7&lt;/artifactId&gt;\n            &lt;version&gt;12.1.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.restdocs&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-restdocs-mockmvc&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; \n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7780187,"reputation":165,"user_id":5886828,"display_name":"SwapnilM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1613111260,"creation_date":1613111260,"answer_id":66167265,"question_id":66137318,"body_markdown":"This is resolved it is more of spring webmvc version conflict. Found it from Effective POM.","title":"java.lang.IllegalStateException: Error processing condition on org.springframework.boot.actuate.autoconfigure.audit.AuditAutoConfiguration","body":"<p>This is resolved it is more of spring webmvc version conflict. Found it from Effective POM.</p>\n"},{"tags":[],"owner":{"account_id":26422715,"reputation":1,"user_id":20070165,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694346170,"creation_date":1694346170,"answer_id":77075959,"question_id":66137318,"body_markdown":"It&#39;s can be related with error in application.properties or bootstrap.yml too. For me it was incorrect setting &quot;management.endpoints.web.exposure.include=*&quot;. I was converting config from &quot;yml&quot; format to &quot;properties&quot; and forgot to remove the apostrophes around the asterisk. It was \r\n\r\n    management.endpoints.web.exposure.include=&#39;*&#39;\r\n\r\nbut it should be \r\n\r\n    management.endpoints.web.exposure.include=*","title":"java.lang.IllegalStateException: Error processing condition on org.springframework.boot.actuate.autoconfigure.audit.AuditAutoConfiguration","body":"<p>It's can be related with error in application.properties or bootstrap.yml too. For me it was incorrect setting &quot;management.endpoints.web.exposure.include=*&quot;. I was converting config from &quot;yml&quot; format to &quot;properties&quot; and forgot to remove the apostrophes around the asterisk. It was</p>\n<pre><code>management.endpoints.web.exposure.include='*'\n</code></pre>\n<p>but it should be</p>\n<pre><code>management.endpoints.web.exposure.include=*\n</code></pre>\n"}],"owner":{"account_id":7780187,"reputation":165,"user_id":5886828,"display_name":"SwapnilM"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9669,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1697083490,"creation_date":1612961709,"question_id":66137318,"body_markdown":"I am trying to write a small hello world program and packaging it with war. I am using maven and writing a SpringBoot App to do this.\r\n\r\nHere is my Application.java file\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RequestParam;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    \r\n    @SpringBootApplication\r\n    @RestController\r\n    public class Application {\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(Application.class, args);\r\n    \t}\r\n    \t\r\n    \t@GetMapping(&quot;/hello&quot;)\r\n    \tpublic String hello(@RequestParam(value = &quot;name&quot;, defaultValue = &quot;World&quot;) String name) {\r\n    \t\treturn String.format(&quot;Hello %s!&quot;, name);\r\n    \t}\r\n    \t\r\n    }\r\n\r\nWhile building it I am getting error :\r\n\r\n        [INFO] --------------------------&lt; PackageName:appName &gt;------------------\r\n        [INFO] Building appName 0.0.1-SNAPSHOT\r\n        [INFO] --------------------------------[ war ]----------------------------\r\n        [INFO] \r\n        [INFO] --- maven-clean-plugin:3.1.0:clean (default-clean) @ appName ---\r\n        [INFO] Deleting C:\\Downloads\\appName\\target\r\n    \r\n        [INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ appName ---\r\n        [INFO] Changes detected - recompiling the module!\r\n        [INFO] Compiling 2 source files to C:\\Downloads\\appName\\target\\classes\r\n        [INFO] \r\n        [INFO] --- maven-resources-plugin:3.2.0:testResources (default-testResources) @ appName ---\r\n        [INFO] skip non existing resourceDirectory C:\\Downloads\\appName\\src\\test\\resources\r\n        [INFO] \r\n        [INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ appName ---\r\n        [INFO] Changes detected - recompiling the module!\r\n        [INFO] Compiling 1 source file to C:\\Downloads\\appName\\target\\test-classes\r\n        [INFO] \r\n        [INFO] --- maven-surefire-plugin:2.22.2:test (default-test) @ appName ---\r\n        [INFO] \r\n        [INFO] -------------------------------------------------------\r\n        [INFO]  T E S T S\r\n        [INFO] -------------------------------------------------------\r\n        [INFO] Running packageName.ApplicationTests\r\n        17:17:40.487 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating CacheAwareContextLoaderDelegate from class [org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate]\r\n        17:17:40.521 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating BootstrapContext using constructor [public org.springframework.test.context.support.DefaultBootstrapContext(java.lang.Class,org.springframework.test.context.CacheAwareContextLoaderDelegate)]\r\n        17:17:40.598 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating TestContextBootstrapper for test class [packageName.ApplicationTests] from class [org.springframework.boot.test.context.SpringBootTestContextBootstrapper]\r\n        17:17:40.637 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [packageName.ApplicationTests], using SpringBootContextLoader\r\n        17:17:40.646 [main] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [packageName.ApplicationTests]: class path resource [packageName/ApplicationTests-context.xml] does not exist\r\n        17:17:40.647 [main] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [packageName.ApplicationTests]: class path resource [packageName/ApplicationTestsContext.groovy] does not exist\r\n        17:17:40.647 [main] INFO org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [packageName.ApplicationTests]: no resource found for suffixes {-context.xml, Context.groovy}.\r\n        17:17:40.649 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [packageName.ApplicationTests]: ApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.\r\n        17:17:40.827 [main] DEBUG org.springframework.test.context.support.ActiveProfilesUtils - Could not find an &#39;annotation declaring class&#39; for annotation type [org.springframework.test.context.ActiveProfiles] and class [packageName.ApplicationTests]\r\n        17:17:41.085 [main] DEBUG org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider - Identified candidate component class: file [C:\\Downloads\\appName\\target\\classes\\packageName\\Application.class]\r\n        17:17:41.093 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration packageName.Application for test class packageName.ApplicationTests\r\n        17:17:41.347 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - @TestExecutionListeners is not present for class [packageName.ApplicationTests]: using defaults.\r\n        17:17:41.349 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]\r\n        17:17:41.500 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@338fc1d8, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@4722ef0c, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@48e1f6c7, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@55cb6996, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1807e3f6, org.springframework.test.context.support.DirtiesContextTestExecutionListener@480d3575, org.springframework.test.context.transaction.TransactionalTestExecutionListener@f1da57d, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@194fad1, org.springframework.test.context.event.EventPublishingTestExecutionListener@26abb146, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@72c8e7b, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@65f8f5ae, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@431cd9b2, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@38467116, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@5b7a7f33, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@790da477, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5c7933ad, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@57bc27f5]\r\n        17:17:41.517 [main] DEBUG org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener - Before test class: context [DefaultTestContext@30f842ca testClass = ApplicationTests, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@69c81773 testClass = ApplicationTests, locations = &#39;{}&#39;, classes = &#39;{class packageName.Application}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{}&#39;, propertySourceLocations = &#39;{}&#39;, propertySourceProperties = &#39;{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}&#39;, contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@74fe5c40, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@131774fe, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@7d8995e, org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@f6efaab, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@368f2016, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@5cb9f472], resourceBasePath = &#39;src/main/webapp&#39;, contextLoader = &#39;org.springframework.boot.test.context.SpringBootContextLoader&#39;, parent = [null]], attributes = map[&#39;org.springframework.test.context.web.ServletTestExecutionListener.activateListener&#39; -&gt; true]], class annotated with @DirtiesContext [false] with mode [null].\r\n        17:17:41.636 [main] DEBUG org.springframework.test.context.support.TestPropertySourceUtils - Adding inlined properties to environment: {spring.jmx.enabled=false, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}\r\n        \r\n          .   ____          _            __ _ _\r\n         /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n        ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n         \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n          &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n         =========|_|==============|___/=/_/_/_/\r\n         :: Spring Boot ::                (v2.4.2)\r\n        \r\n        2021-02-10 17:17:42.425  INFO 8100 --- [           main] packageName.ApplicationTests     : Starting ApplicationTests using Java 1.8.0_202 on hostName with PID 8100 (started by user in C:\\Downloads\\appName)\r\n        2021-02-10 17:17:42.432  INFO 8100 --- [           main] packageName.ApplicationTests     : No active profile set, falling back to default profiles: default\r\n        2021-02-10 17:17:45.008 ERROR 8100 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n        \r\n        java.lang.IllegalStateException: Error processing condition on org.springframework.boot.actuate.autoconfigure.audit.AuditAutoConfiguration\r\n        \tat org.springframework.boot.autoconfigure.condition.SpringBootCondition.matches(SpringBootCondition.java:60) ~[spring-boot-autoconfigure-2.4.2.jar:2.4.2]\r\n        \tat org.springframework.context.annotation.ConditionEvaluator.shouldSkip(ConditionEvaluator.java:108) ~[spring-context-5.3.3.jar:5.3.3]\r\n        \tat org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader$TrackedConditionEvaluator.shouldSkip(ConfigurationClassBeanDefinitionReader.java:489) ~[spring-context-5.3.3.jar:5.3.3]\r\n        \tat org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:140) ~[spring-context-5.3.3.jar:5.3.3]\r\n        \tat org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:129) ~[spring-context-5.3.3.jar:5.3.3]\r\n        \tat org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:348) ~[spring-context-5.3.3.jar:5.3.3] at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) [spring-test-5.3.3.jar:5.3.3]\r\n        \tat org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190) [spring-test-5.3.3.jar:5.3.3]\r\n        \tat org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132) [spring-test-5.3.3.jar:5.3.3]\r\n        \tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244) [spring-test-5.3.3.jar:5.3.3]\r\n        \tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) [spring-test-5.3.3.jar:5.3.3]\r\n        \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:350) [junit-jupiter-engine-5.7.0.jar:5.7.0]\r\n        \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:355) [junit-jupiter-engine-5.7.0.jar:5.7.0]\r\n        \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$7(ClassBasedTestDescriptor.java:350) [junit-jupiter-engine-5.7.0.jar:5.7.0]\r\n        \tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193) ~[na:1.8.0_202]\r\n        \tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175) ~[na:1.8.0_202]\r\n        \tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382) ~[na:1.8.0_202]\r\n        \tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481) ~[na:1.8.0_202]\r\n        \tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471) ~[na:1.8.0_202]\r\n        \tat java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312) ~[na:1.8.0_202]\r\n        \tat java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:743) ~[na:1.8.0_202]\r\n        \tat java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:742) ~[na:1.8.0_202]\r\n        \tat java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:580) ~[na:1.8.0_202]\r\n        \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:349) [junit-jupiter-engine-5.7.0.jar:5.7.0]\r\n        \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$4(ClassBasedTestDescriptor.java:270) [junit-jupiter-engine-5.7.0.jar:5.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:269) [junit-jupiter-engine-5.7.0.jar:5.7.0]\r\n        \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:259) [junit-jupiter-engine-5.7.0.jar:5.7.0]\r\n        \tat java.util.Optional.orElseGet(Optional.java:267) ~[na:1.8.0_202]\r\n        \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:258) [junit-jupiter-engine-5.7.0.jar:5.7.0]\r\n        \tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.7.0.jar:5.7.0]\r\n        \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.7.0.jar:5.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:100) ~[junit-jupiter-engine-5.7.0.jar:5.7.0]\r\n        \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:65) ~[junit-jupiter-engine-5.7.0.jar:5.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:111) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:111) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:79) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat java.util.ArrayList.forEach(ArrayList.java:1257) ~[na:1.8.0_202]\r\n        \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat java.util.ArrayList.forEach(ArrayList.java:1257) ~[na:1.8.0_202]\r\n        \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51) ~[junit-platform-engine-1.7.0.jar:1.7.0]\r\n        \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\r\n        \tat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\r\n        \tat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\r\n        \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\r\n        \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\r\n        \tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150) ~[surefire-junit-platform-2.22.2.jar:2.22.2]\r\n        \tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124) ~[surefire-junit-platform-2.22.2.jar:2.22.2]\r\n        \tat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384) ~[surefire-booter-2.22.2.jar:2.22.2]\r\n        \tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345) ~[surefire-booter-2.22.2.jar:2.22.2]\r\n        \tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126) ~[surefire-booter-2.22.2.jar:2.22.2]\r\n        \tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418) ~[surefire-booter-2.22.2.jar:2.22.2]\r\n        Caused by: java.lang.IllegalStateException: Failed to introspect Class [org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration] from ClassLoader [sun.misc.Launcher$AppClassLoader@42a57993]\r\n        \tat org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:481) ~[spring-core-5.3.3.jar:5.3.3]\r\n        \tat org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:358) ~[spring-core-5.3.3.jar:5.3.3]\r\n        \tat org.springframework.util.ReflectionUtils.getUniqueDeclaredMethods(ReflectionUtils.java:414) ~[spring-core-5.3.3.jar:5.3.3]\r\n        \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.lambda$getTypeForFactoryMethod$2(AbstractAutowireCapableBeanFactory.java:754) ~[spring-beans-5.3.3.jar:5.3.3]\r\n        \tat java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1660) ~[na:1.8.0_202]\r\n        \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryMethod(AbstractAutowireCapableBeanFactory.java:753) ~[spring-beans-5.3.3.jar:5.3.3]\r\n        \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineTargetType(AbstractAutowireCapableBeanFactory.java:692) ~[spring-beans-5.3.3.jar:5.3.3]\r\n        \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:663) ~[spring-beans-5.3.3.jar:5.3.3]\r\n        \tat org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1670) ~[spring-beans-5.3.3.jar:5.3.3]\r\n    org.springframework.boot.autoconfigure.condition.OnBeanCondition.collectBeanNamesForType(OnBeanCondition.java:238) ~[spring-boot-autoconfigure-2.4.2.jar:2.4.2]\r\n        \tat org.springframework.boot.autoconfigure.condition.OnBeanCondition.getMatchingBeans(OnBeanCondition.java:169) ~[spring-boot-autoconfigure-2.4.2.jar:2.4.2]\r\n        \tat org.springframework.boot.autoconfigure.condition.OnBeanCondition.getMatchOutcome(OnBeanCondition.java:119) ~[spring-boot-autoconfigure-2.4.2.jar:2.4.2]\r\n        \tat org.springframework.boot.autoconfigure.condition.SpringBootCondition.matches(SpringBootCondition.java:47) ~[spring-boot-autoconfigure-2.4.2.jar:2.4.2]\r\n        \t... 84 common frames omitted\r\n        Caused by: java.lang.NoClassDefFoundError: org/springframework/web/filter/FormContentFilter\r\n        \tat java.lang.ClassLoader.defineClass1(Native Method) ~[na:1.8.0_202]\r\n        \tat java.lang.ClassLoader.defineClass(ClassLoader.java:763) ~[na:1.8.0_202]\r\n        \tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) ~[na:1.8.0_202]\r\n        \tat java.net.URLClassLoader.defineClass(URLClassLoader.java:468) ~[na:1.8.0_202]\r\n        \tat java.net.URLClassLoader.access$100(URLClassLoader.java:74) ~[na:1.8.0_202]\r\n        \tat java.net.URLClassLoader$1.run(URLClassLoader.java:369) ~[na:1.8.0_202]\r\n        \tat java.net.URLClassLoader$1.run(URLClassLoader.java:363) ~[na:1.8.0_202]\r\n        \tat java.security.AccessController.doPrivileged(Native Method) ~[na:1.8.0_202]\r\n        \tat java.net.URLClassLoader.findClass(URLClassLoader.java:362) ~[na:1.8.0_202]\r\n        \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_202]\r\n        \tat java.lang.Class.getDeclaredMethods(Class.java:1975) ~[na:1.8.0_202]\r\n        \tat org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:463) ~[spring-core-5.3.3.jar:5.3.3]\r\n        \t... 100 common frames omitted\r\n        Caused by: java.lang.ClassNotFoundException: org.springframework.web.filter.FormContentFilter\r\n\r\n\r\nmy pom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\nxsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n&lt;groupId&gt;GroupId&lt;/groupId&gt;\t&lt;artifactId&gt;artifactId&lt;/artifactId &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n&lt;name&gt;appName&lt;/name&gt; &lt;description&gt;DESC&lt;/description&gt; &lt;packaging&gt;war&lt;/packaging&gt;\r\n&lt;parent&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&lt;version&gt;2.4.2&lt;/version&gt;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n&lt;/parent&gt;&lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt;\r\n&lt;dependencies&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-web&lt;/artifactId&gt; &lt;version&gt;4.3.11.RELEASE&lt;/version&gt; &lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt;\r\n&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt; &lt;/dependency&gt;\r\n&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt; &lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jersey&lt;/artifactId&gt; &lt;/dependency&gt;\r\n&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt; &lt;/dependency&gt;\r\n&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt; &lt;/dependency&gt;\r\n&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt;\r\n&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt; &lt;/dependency&gt;\r\n&lt;dependency&gt; &lt;groupId&gt;org.springframework.session&lt;/groupId&gt; &lt;artifactId&gt;spring-session-core&lt;/artifactId&gt; &lt;/dependency&gt;\r\n&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.oracle.jdbc&lt;/groupId&gt; &lt;artifactId&gt;ojdbc7&lt;/artifactId&gt; &lt;version&gt;12.1.0.2&lt;/version&gt; &lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.restdocs&lt;/groupId&gt; &lt;artifactId&gt;spring-restdocs-mockmvc&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.security&lt;/groupId&gt; &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt; &lt;/dependency&gt;      &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&lt;/plugin&gt;&lt;/plugins&gt;&lt;/build&gt;&lt;/project&gt;\r\n```\r\nCan anybody suggest what is going wrong here and why am I getting this error.\r\nHelp is appreciated. Thanks.\r\n","title":"java.lang.IllegalStateException: Error processing condition on org.springframework.boot.actuate.autoconfigure.audit.AuditAutoConfiguration","body":"<p>I am trying to write a small hello world program and packaging it with war. I am using maven and writing a SpringBoot App to do this.</p>\n<p>Here is my Application.java file</p>\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\n\n@SpringBootApplication\n@RestController\npublic class Application {\n    \n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n    \n    @GetMapping(&quot;/hello&quot;)\n    public String hello(@RequestParam(value = &quot;name&quot;, defaultValue = &quot;World&quot;) String name) {\n        return String.format(&quot;Hello %s!&quot;, name);\n    }\n    \n}\n</code></pre>\n<p>While building it I am getting error :</p>\n<pre><code>    [INFO] --------------------------&lt; PackageName:appName &gt;------------------\n    [INFO] Building appName 0.0.1-SNAPSHOT\n    [INFO] --------------------------------[ war ]----------------------------\n    [INFO] \n    [INFO] --- maven-clean-plugin:3.1.0:clean (default-clean) @ appName ---\n    [INFO] Deleting C:\\Downloads\\appName\\target\n\n    [INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ appName ---\n    [INFO] Changes detected - recompiling the module!\n    [INFO] Compiling 2 source files to C:\\Downloads\\appName\\target\\classes\n    [INFO] \n    [INFO] --- maven-resources-plugin:3.2.0:testResources (default-testResources) @ appName ---\n    [INFO] skip non existing resourceDirectory C:\\Downloads\\appName\\src\\test\\resources\n    [INFO] \n    [INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ appName ---\n    [INFO] Changes detected - recompiling the module!\n    [INFO] Compiling 1 source file to C:\\Downloads\\appName\\target\\test-classes\n    [INFO] \n    [INFO] --- maven-surefire-plugin:2.22.2:test (default-test) @ appName ---\n    [INFO] \n    [INFO] -------------------------------------------------------\n    [INFO]  T E S T S\n    [INFO] -------------------------------------------------------\n    [INFO] Running packageName.ApplicationTests\n    17:17:40.487 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating CacheAwareContextLoaderDelegate from class [org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate]\n    17:17:40.521 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating BootstrapContext using constructor [public org.springframework.test.context.support.DefaultBootstrapContext(java.lang.Class,org.springframework.test.context.CacheAwareContextLoaderDelegate)]\n    17:17:40.598 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating TestContextBootstrapper for test class [packageName.ApplicationTests] from class [org.springframework.boot.test.context.SpringBootTestContextBootstrapper]\n    17:17:40.637 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [packageName.ApplicationTests], using SpringBootContextLoader\n    17:17:40.646 [main] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [packageName.ApplicationTests]: class path resource [packageName/ApplicationTests-context.xml] does not exist\n    17:17:40.647 [main] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [packageName.ApplicationTests]: class path resource [packageName/ApplicationTestsContext.groovy] does not exist\n    17:17:40.647 [main] INFO org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [packageName.ApplicationTests]: no resource found for suffixes {-context.xml, Context.groovy}.\n    17:17:40.649 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [packageName.ApplicationTests]: ApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.\n    17:17:40.827 [main] DEBUG org.springframework.test.context.support.ActiveProfilesUtils - Could not find an 'annotation declaring class' for annotation type [org.springframework.test.context.ActiveProfiles] and class [packageName.ApplicationTests]\n    17:17:41.085 [main] DEBUG org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider - Identified candidate component class: file [C:\\Downloads\\appName\\target\\classes\\packageName\\Application.class]\n    17:17:41.093 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration packageName.Application for test class packageName.ApplicationTests\n    17:17:41.347 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - @TestExecutionListeners is not present for class [packageName.ApplicationTests]: using defaults.\n    17:17:41.349 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]\n    17:17:41.500 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@338fc1d8, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@4722ef0c, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@48e1f6c7, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@55cb6996, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1807e3f6, org.springframework.test.context.support.DirtiesContextTestExecutionListener@480d3575, org.springframework.test.context.transaction.TransactionalTestExecutionListener@f1da57d, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@194fad1, org.springframework.test.context.event.EventPublishingTestExecutionListener@26abb146, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@72c8e7b, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@65f8f5ae, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@431cd9b2, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@38467116, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@5b7a7f33, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@790da477, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5c7933ad, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@57bc27f5]\n    17:17:41.517 [main] DEBUG org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener - Before test class: context [DefaultTestContext@30f842ca testClass = ApplicationTests, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@69c81773 testClass = ApplicationTests, locations = '{}', classes = '{class packageName.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@74fe5c40, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@131774fe, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@7d8995e, org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@f6efaab, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@368f2016, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@5cb9f472], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true]], class annotated with @DirtiesContext [false] with mode [null].\n    17:17:41.636 [main] DEBUG org.springframework.test.context.support.TestPropertySourceUtils - Adding inlined properties to environment: {spring.jmx.enabled=false, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}\n    \n      .   ____          _            __ _ _\n     /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n    ( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n     \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n      '  |____| .__|_| |_|_| |_\\__, | / / / /\n     =========|_|==============|___/=/_/_/_/\n     :: Spring Boot ::                (v2.4.2)\n    \n    2021-02-10 17:17:42.425  INFO 8100 --- [           main] packageName.ApplicationTests     : Starting ApplicationTests using Java 1.8.0_202 on hostName with PID 8100 (started by user in C:\\Downloads\\appName)\n    2021-02-10 17:17:42.432  INFO 8100 --- [           main] packageName.ApplicationTests     : No active profile set, falling back to default profiles: default\n    2021-02-10 17:17:45.008 ERROR 8100 --- [           main] o.s.boot.SpringApplication               : Application run failed\n    \n    java.lang.IllegalStateException: Error processing condition on org.springframework.boot.actuate.autoconfigure.audit.AuditAutoConfiguration\n        at org.springframework.boot.autoconfigure.condition.SpringBootCondition.matches(SpringBootCondition.java:60) ~[spring-boot-autoconfigure-2.4.2.jar:2.4.2]\n        at org.springframework.context.annotation.ConditionEvaluator.shouldSkip(ConditionEvaluator.java:108) ~[spring-context-5.3.3.jar:5.3.3]\n        at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader$TrackedConditionEvaluator.shouldSkip(ConfigurationClassBeanDefinitionReader.java:489) ~[spring-context-5.3.3.jar:5.3.3]\n        at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:140) ~[spring-context-5.3.3.jar:5.3.3]\n        at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:129) ~[spring-context-5.3.3.jar:5.3.3]\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:348) ~[spring-context-5.3.3.jar:5.3.3] at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) [spring-test-5.3.3.jar:5.3.3]\n        at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190) [spring-test-5.3.3.jar:5.3.3]\n        at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132) [spring-test-5.3.3.jar:5.3.3]\n        at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244) [spring-test-5.3.3.jar:5.3.3]\n        at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) [spring-test-5.3.3.jar:5.3.3]\n        at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:350) [junit-jupiter-engine-5.7.0.jar:5.7.0]\n        at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:355) [junit-jupiter-engine-5.7.0.jar:5.7.0]\n        at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$7(ClassBasedTestDescriptor.java:350) [junit-jupiter-engine-5.7.0.jar:5.7.0]\n        at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193) ~[na:1.8.0_202]\n        at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175) ~[na:1.8.0_202]\n        at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382) ~[na:1.8.0_202]\n        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481) ~[na:1.8.0_202]\n        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471) ~[na:1.8.0_202]\n        at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312) ~[na:1.8.0_202]\n        at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:743) ~[na:1.8.0_202]\n        at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:742) ~[na:1.8.0_202]\n        at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:580) ~[na:1.8.0_202]\n        at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:349) [junit-jupiter-engine-5.7.0.jar:5.7.0]\n        at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$4(ClassBasedTestDescriptor.java:270) [junit-jupiter-engine-5.7.0.jar:5.7.0]\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:269) [junit-jupiter-engine-5.7.0.jar:5.7.0]\n        at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:259) [junit-jupiter-engine-5.7.0.jar:5.7.0]\n        at java.util.Optional.orElseGet(Optional.java:267) ~[na:1.8.0_202]\n        at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:258) [junit-jupiter-engine-5.7.0.jar:5.7.0]\n        at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.7.0.jar:5.7.0]\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.7.0.jar:5.7.0]\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:100) ~[junit-jupiter-engine-5.7.0.jar:5.7.0]\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:65) ~[junit-jupiter-engine-5.7.0.jar:5.7.0]\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:111) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:111) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:79) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at java.util.ArrayList.forEach(ArrayList.java:1257) ~[na:1.8.0_202]\n        at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at java.util.ArrayList.forEach(ArrayList.java:1257) ~[na:1.8.0_202]\n        at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51) ~[junit-platform-engine-1.7.0.jar:1.7.0]\n        at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\n        at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\n        at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\n        at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\n        at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\n        at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150) ~[surefire-junit-platform-2.22.2.jar:2.22.2]\n        at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124) ~[surefire-junit-platform-2.22.2.jar:2.22.2]\n        at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384) ~[surefire-booter-2.22.2.jar:2.22.2]\n        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345) ~[surefire-booter-2.22.2.jar:2.22.2]\n        at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126) ~[surefire-booter-2.22.2.jar:2.22.2]\n        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418) ~[surefire-booter-2.22.2.jar:2.22.2]\n    Caused by: java.lang.IllegalStateException: Failed to introspect Class [org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration] from ClassLoader [sun.misc.Launcher$AppClassLoader@42a57993]\n        at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:481) ~[spring-core-5.3.3.jar:5.3.3]\n        at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:358) ~[spring-core-5.3.3.jar:5.3.3]\n        at org.springframework.util.ReflectionUtils.getUniqueDeclaredMethods(ReflectionUtils.java:414) ~[spring-core-5.3.3.jar:5.3.3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.lambda$getTypeForFactoryMethod$2(AbstractAutowireCapableBeanFactory.java:754) ~[spring-beans-5.3.3.jar:5.3.3]\n        at java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1660) ~[na:1.8.0_202]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryMethod(AbstractAutowireCapableBeanFactory.java:753) ~[spring-beans-5.3.3.jar:5.3.3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineTargetType(AbstractAutowireCapableBeanFactory.java:692) ~[spring-beans-5.3.3.jar:5.3.3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:663) ~[spring-beans-5.3.3.jar:5.3.3]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1670) ~[spring-beans-5.3.3.jar:5.3.3]\norg.springframework.boot.autoconfigure.condition.OnBeanCondition.collectBeanNamesForType(OnBeanCondition.java:238) ~[spring-boot-autoconfigure-2.4.2.jar:2.4.2]\n        at org.springframework.boot.autoconfigure.condition.OnBeanCondition.getMatchingBeans(OnBeanCondition.java:169) ~[spring-boot-autoconfigure-2.4.2.jar:2.4.2]\n        at org.springframework.boot.autoconfigure.condition.OnBeanCondition.getMatchOutcome(OnBeanCondition.java:119) ~[spring-boot-autoconfigure-2.4.2.jar:2.4.2]\n        at org.springframework.boot.autoconfigure.condition.SpringBootCondition.matches(SpringBootCondition.java:47) ~[spring-boot-autoconfigure-2.4.2.jar:2.4.2]\n        ... 84 common frames omitted\n    Caused by: java.lang.NoClassDefFoundError: org/springframework/web/filter/FormContentFilter\n        at java.lang.ClassLoader.defineClass1(Native Method) ~[na:1.8.0_202]\n        at java.lang.ClassLoader.defineClass(ClassLoader.java:763) ~[na:1.8.0_202]\n        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) ~[na:1.8.0_202]\n        at java.net.URLClassLoader.defineClass(URLClassLoader.java:468) ~[na:1.8.0_202]\n        at java.net.URLClassLoader.access$100(URLClassLoader.java:74) ~[na:1.8.0_202]\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:369) ~[na:1.8.0_202]\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:363) ~[na:1.8.0_202]\n        at java.security.AccessController.doPrivileged(Native Method) ~[na:1.8.0_202]\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:362) ~[na:1.8.0_202]\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_202]\n        at java.lang.Class.getDeclaredMethods(Class.java:1975) ~[na:1.8.0_202]\n        at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:463) ~[spring-core-5.3.3.jar:5.3.3]\n        ... 100 common frames omitted\n    Caused by: java.lang.ClassNotFoundException: org.springframework.web.filter.FormContentFilter\n</code></pre>\n<p>my pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\nxsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;groupId&gt;GroupId&lt;/groupId&gt;  &lt;artifactId&gt;artifactId&lt;/artifactId &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;appName&lt;/name&gt; &lt;description&gt;DESC&lt;/description&gt; &lt;packaging&gt;war&lt;/packaging&gt;\n&lt;parent&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&lt;version&gt;2.4.2&lt;/version&gt;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;&lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt;\n&lt;dependencies&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-web&lt;/artifactId&gt; &lt;version&gt;4.3.11.RELEASE&lt;/version&gt; &lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt;\n&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt; &lt;/dependency&gt;\n&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt; &lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jersey&lt;/artifactId&gt; &lt;/dependency&gt;\n&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt; &lt;/dependency&gt;\n&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt; &lt;/dependency&gt;\n&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt;\n&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt; &lt;/dependency&gt;\n&lt;dependency&gt; &lt;groupId&gt;org.springframework.session&lt;/groupId&gt; &lt;artifactId&gt;spring-session-core&lt;/artifactId&gt; &lt;/dependency&gt;\n&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.oracle.jdbc&lt;/groupId&gt; &lt;artifactId&gt;ojdbc7&lt;/artifactId&gt; &lt;version&gt;12.1.0.2&lt;/version&gt; &lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.restdocs&lt;/groupId&gt; &lt;artifactId&gt;spring-restdocs-mockmvc&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.security&lt;/groupId&gt; &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt; &lt;/dependency&gt;      &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&lt;/plugin&gt;&lt;/plugins&gt;&lt;/build&gt;&lt;/project&gt;\n</code></pre>\n<p>Can anybody suggest what is going wrong here and why am I getting this error.\nHelp is appreciated. Thanks.</p>\n"},{"tags":["java","spring","youtube-data-api"],"owner":{"account_id":9672,"reputation":4912,"user_id":17967,"accept_rate":66,"display_name":"Gary Kephart"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697083173,"creation_date":1696306487,"question_id":77219629,"body_markdown":"I am creating a website using Spring Boot 2.7.9 (Spring 5) that is making calls to the YouTube API (via an Open Feign interface). Right now, I&#39;m just trying to successfully call getRatings, using the scope below, but am getting the exception below. I already created users before adding this scope. \r\n\r\nOne solution seems to be &quot;revoke the users access and then authorize your application again&quot; which I assume means to go to &quot;https://console.cloud.google.com/apis&quot; but I could not find where on there to do that.\r\n\r\nIs there something else I need to do, like specify the scopes during user authentication on my app? Add a header to the request to YouTube?\r\n\r\nI&#39;m not sure what other info you need in order to help me solve this, so please let me know that.\r\n\r\n\t\t&quot;error&quot;: {\r\n\t\t\t&quot;code&quot;: 403,\r\n\t\t\t&quot;message&quot;: &quot;Request had insufficient authentication scopes.&quot;,\r\n\t\t\t&quot;errors&quot;: [\r\n\t\t\t\t{\r\n\t\t\t\t\t&quot;message&quot;: &quot;Insufficient Permission&quot;,\r\n\t\t\t\t\t&quot;domain&quot;: &quot;global&quot;,\r\n\t\t\t\t\t&quot;reason&quot;: &quot;insufficientPermissions&quot;\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t&quot;status&quot;: &quot;PERMISSION_DENIED&quot;,\r\n\t\t\t&quot;details&quot;: [\r\n\t\t\t\t{\r\n\t\t\t\t\t&quot;@type&quot;: &quot;type.googleapis.com/google.rpc.ErrorInfo&quot;,\r\n\t\t\t\t\t&quot;reason&quot;: &quot;ACCESS_TOKEN_SCOPE_INSUFFICIENT&quot;,\r\n\t\t\t\t\t&quot;domain&quot;: &quot;googleapis.com&quot;,\r\n\t\t\t\t\t&quot;metadata&quot;: {\r\n\t\t\t\t\t\t&quot;service&quot;: &quot;youtube.googleapis.com&quot;,\r\n\t\t\t\t\t\t&quot;method&quot;: &quot;youtube.api.v3.V3DataVideoRatingService.List&quot;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n\r\nAn example access token looks like this\r\n\r\n    ya29.a0AfB_byAc7...\r\n\r\nMy Open Feign call to Google looks like this:\r\n\r\n    @FeignClient(value = &quot;youTubeService&quot;, url = &quot;https://www.googleapis.com/youtube/v3&quot;)\r\n    public interface FeignYouTubeService\r\n    {\r\n      @GetMapping(&quot;/videos/getRating&quot;)\r\n      YouTubeRatingResponse getVideoRating(//\r\n        @RequestHeader(name = &quot;Authorization&quot;)\r\n        String accessToken,\r\n        @RequestParam(&quot;id&quot;)\r\n        String videoId, //\r\n        @RequestParam(&quot;key&quot;)\r\n        String key);\r\n\r\n\r\nHere I&#39;m showing that my app has that scope.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nWhen I set this up in Postman, it works. So what&#39;s the difference? What in my Spring Security could be different?\r\n\r\n  [1]: https://i.stack.imgur.com/VXtId.png","title":"How do I solve getting ACCESS_TOKEN_SCOPE_INSUFFICIENT exception using Google/YouTube API?","body":"<p>I am creating a website using Spring Boot 2.7.9 (Spring 5) that is making calls to the YouTube API (via an Open Feign interface). Right now, I'm just trying to successfully call getRatings, using the scope below, but am getting the exception below. I already created users before adding this scope.</p>\n<p>One solution seems to be &quot;revoke the users access and then authorize your application again&quot; which I assume means to go to &quot;https://console.cloud.google.com/apis&quot; but I could not find where on there to do that.</p>\n<p>Is there something else I need to do, like specify the scopes during user authentication on my app? Add a header to the request to YouTube?</p>\n<p>I'm not sure what other info you need in order to help me solve this, so please let me know that.</p>\n<pre><code>    &quot;error&quot;: {\n        &quot;code&quot;: 403,\n        &quot;message&quot;: &quot;Request had insufficient authentication scopes.&quot;,\n        &quot;errors&quot;: [\n            {\n                &quot;message&quot;: &quot;Insufficient Permission&quot;,\n                &quot;domain&quot;: &quot;global&quot;,\n                &quot;reason&quot;: &quot;insufficientPermissions&quot;\n            }\n        ],\n        &quot;status&quot;: &quot;PERMISSION_DENIED&quot;,\n        &quot;details&quot;: [\n            {\n                &quot;@type&quot;: &quot;type.googleapis.com/google.rpc.ErrorInfo&quot;,\n                &quot;reason&quot;: &quot;ACCESS_TOKEN_SCOPE_INSUFFICIENT&quot;,\n                &quot;domain&quot;: &quot;googleapis.com&quot;,\n                &quot;metadata&quot;: {\n                    &quot;service&quot;: &quot;youtube.googleapis.com&quot;,\n                    &quot;method&quot;: &quot;youtube.api.v3.V3DataVideoRatingService.List&quot;\n                }\n            }\n        ]\n    }\n}\n</code></pre>\n<p>An example access token looks like this</p>\n<pre><code>ya29.a0AfB_byAc7...\n</code></pre>\n<p>My Open Feign call to Google looks like this:</p>\n<pre><code>@FeignClient(value = &quot;youTubeService&quot;, url = &quot;https://www.googleapis.com/youtube/v3&quot;)\npublic interface FeignYouTubeService\n{\n  @GetMapping(&quot;/videos/getRating&quot;)\n  YouTubeRatingResponse getVideoRating(//\n    @RequestHeader(name = &quot;Authorization&quot;)\n    String accessToken,\n    @RequestParam(&quot;id&quot;)\n    String videoId, //\n    @RequestParam(&quot;key&quot;)\n    String key);\n</code></pre>\n<p>Here I'm showing that my app has that scope.</p>\n<p><a href=\"https://i.stack.imgur.com/VXtId.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VXtId.png\" alt=\"enter image description here\" /></a></p>\n<p>When I set this up in Postman, it works. So what's the difference? What in my Spring Security could be different?</p>\n"},{"tags":["java","tuples","key-value","priority-queue","avl-tree"],"comments":[{"owner":{"account_id":13385810,"reputation":862,"user_id":9659759,"display_name":"Jake"},"score":1,"creation_date":1679344409,"post_id":75793357,"comment_id":133702213,"body_markdown":"I think a bit more context may be valuable here.  For example, why do you want to share a single Node class with both an AVL tree and a PriorityQueue?  What problems are you actually experiencing - just general uncertainty with how to proceed, or is there a specific bug you&#39;re hitting?  How are you planning on implementing your PriorityQueue? As far as syntax issues go, at a minimum, the snippet above is missing a closing brace, and you also wouldn&#39;t normally put `@Override` inside of a comment.  Probably no need to import any of the native Java data structures, either.","body":"I think a bit more context may be valuable here.  For example, why do you want to share a single Node class with both an AVL tree and a PriorityQueue?  What problems are you actually experiencing - just general uncertainty with how to proceed, or is there a specific bug you&#39;re hitting?  How are you planning on implementing your PriorityQueue? As far as syntax issues go, at a minimum, the snippet above is missing a closing brace, and you also wouldn&#39;t normally put <code>@Override</code> inside of a comment.  Probably no need to import any of the native Java data structures, either."},{"owner":{"account_id":25539081,"reputation":41,"user_id":19325537,"display_name":"eshtabel3asal"},"score":0,"creation_date":1679347788,"post_id":75793357,"comment_id":133702870,"body_markdown":"@Jake I&#39;m trying to create a priorityqueue class that takes a the node (a tuple) as input, in order for it to sort itself out according to the value of the tuple. so I thought that by passing it the same Node class that&#39;s in the AVLTree class, I can do that. basically, I&#39;m trying to sort out the nodes (each made of  key and a value) of the avl tree by the values from largest to smallest. I&#39;m unsure how to proceed","body":"@Jake I&#39;m trying to create a priorityqueue class that takes a the node (a tuple) as input, in order for it to sort itself out according to the value of the tuple. so I thought that by passing it the same Node class that&#39;s in the AVLTree class, I can do that. basically, I&#39;m trying to sort out the nodes (each made of  key and a value) of the avl tree by the values from largest to smallest. I&#39;m unsure how to proceed"}],"answers":[{"tags":[],"owner":{"account_id":13385810,"reputation":862,"user_id":9659759,"display_name":"Jake"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679352997,"creation_date":1679352997,"answer_id":75796045,"question_id":75793357,"body_markdown":"I have a few comments to offer, based on the OP&#39;s original question and most recent reply.  Since the OP doesn&#39;t seem to have a specific technical question, I&#39;m just going to provide some commentary, in hopes of moving them forwards.  \r\n\r\nFirst, I would try not to get too hung up on the integration between the AVL tree and PriorityQueue.  It&#39;s fine to have this as an end goal, but good implementations of most data structures will be generic enough that they can be easily modified to accept slightly different incoming data types.  You can often accomplish this with [generics](https://www.geeksforgeeks.org/generics-in-java/) (which it seems you are already familiar with), but good, flexible class design can also go a long way.  So to start with, I would focus on creating a functional AVL tree that just stores, for example, integers, and then a functional Priority Queue that also just stores integers, and then you can worry about the extra complexity of additional types and interfacing between the two of them once the base functionality works.  That is my personal philosophy though, and there are lots of other viable design strategies here as well.  \r\n\r\nSecond, you said &quot;I&#39;m trying to create a priorityqueue class that takes a the *node (a tuple)* as input&quot;.  I want to point out that right now, a Node is NOT a Tuple, nor are they related to each other in any way.  It would also be very weird to define a method on your priority queue that accepts an instance of AVLTree::Node; this would be tightly coupling two inherently unrelated data structures together.  If you wanted to extract Node to its own public class, and have it extend Tuple, or something of that nature, that is one option.  But most data structure implementations you see in the real world will be standalone and will utilize either primitive or generic types for their public methods.  \r\n\r\nSo to give an example, using some very rough code that will not compile, I would consider this to be a bad implementation:\r\n\r\n    public class PriorityQueue{\r\n      private LinkedList&lt;Integer&gt; queue;\r\n\r\n      // tied too tightly to a different data structure that should be unrelated\r\n      public void addNodeToPQ(Node node){\r\n        this.queue.addLast(node.value);  // this isn&#39;t really how you would add a value to a PriorityQueue, it&#39;s just for example\r\n      }\r\n    }\r\n    \r\n    PriorityQueue pq = new PriorityQueue();\r\n    AVLTree avlTree = new AVLTree();\r\n    pq.addNodeToPQ(avlTree.get(1));\r\n\r\nWhile this implementation is cleaner and more extendable\r\n\r\n    public class PriorityQueue{\r\n      private LinkedList&lt;Integer&gt; queue;\r\n\r\n      // Uses a very basic type (Integer), rather than relying on another specialized data structure.  This allows multiple consumers to use your PriorityQueue, not just your AVLTree\r\n      public void addValueToPQ(Integer value){\r\n        this.queue.addLast(value); // this isn&#39;t really how you would add a value to a PriorityQueue, it&#39;s just for example\r\n      }\r\n    }\r\n    \r\n    PriorityQueue pq = new PriorityQueue();\r\n    AVLTree avlTree = new AVLTree();\r\n    pq.addValueToPQ(avlTree.get(1).value);\r\n\r\nRegarding errors in your `PriorityQueue_AVL` code, I can think of 4 things I would change off the top of my head\r\n\r\n 1. No obvious reason to import HashMap, Map, or PriorityQueue in your class\r\n 2. Presumably you are going to be instantiating individual Tuple objects, so using `static` in the class definition is not appropriate and will not work\r\n 3. `@Override` should not be commented\r\n 4. You were missing a closing `}` for your class. \r\n\r\nOutside of these, the code compiles just fine for me, so if there are additional syntax errors that you would like help with, some more details will be necessary.  \r\n\r\nLastly, I do want to point out that an AVLTree (and also a PriorityQueue to some extent) is a complex data structure.  If you&#39;re new to Java (and ESPECIALLY if you are new to programming in general) and you&#39;re doing this exercise purely for academic purposes, I suggest starting off by implementing something a little easier (ArrayList and LinkedList come to mind).  But if that isn&#39;t the case, disregard.  \r\n\r\nIf you have additional, specific questions, I (or others) are likely happy to help, but without more code or details added to your original question, I think the above is pretty much everything I have to offer.  \r\n","title":"How can I add a tuple (key, value) from AVL Tree to a priority queue in java?","body":"<p>I have a few comments to offer, based on the OP's original question and most recent reply.  Since the OP doesn't seem to have a specific technical question, I'm just going to provide some commentary, in hopes of moving them forwards.</p>\n<p>First, I would try not to get too hung up on the integration between the AVL tree and PriorityQueue.  It's fine to have this as an end goal, but good implementations of most data structures will be generic enough that they can be easily modified to accept slightly different incoming data types.  You can often accomplish this with <a href=\"https://www.geeksforgeeks.org/generics-in-java/\" rel=\"nofollow noreferrer\">generics</a> (which it seems you are already familiar with), but good, flexible class design can also go a long way.  So to start with, I would focus on creating a functional AVL tree that just stores, for example, integers, and then a functional Priority Queue that also just stores integers, and then you can worry about the extra complexity of additional types and interfacing between the two of them once the base functionality works.  That is my personal philosophy though, and there are lots of other viable design strategies here as well.</p>\n<p>Second, you said &quot;I'm trying to create a priorityqueue class that takes a the <em>node (a tuple)</em> as input&quot;.  I want to point out that right now, a Node is NOT a Tuple, nor are they related to each other in any way.  It would also be very weird to define a method on your priority queue that accepts an instance of AVLTree::Node; this would be tightly coupling two inherently unrelated data structures together.  If you wanted to extract Node to its own public class, and have it extend Tuple, or something of that nature, that is one option.  But most data structure implementations you see in the real world will be standalone and will utilize either primitive or generic types for their public methods.</p>\n<p>So to give an example, using some very rough code that will not compile, I would consider this to be a bad implementation:</p>\n<pre><code>public class PriorityQueue{\n  private LinkedList&lt;Integer&gt; queue;\n\n  // tied too tightly to a different data structure that should be unrelated\n  public void addNodeToPQ(Node node){\n    this.queue.addLast(node.value);  // this isn't really how you would add a value to a PriorityQueue, it's just for example\n  }\n}\n\nPriorityQueue pq = new PriorityQueue();\nAVLTree avlTree = new AVLTree();\npq.addNodeToPQ(avlTree.get(1));\n</code></pre>\n<p>While this implementation is cleaner and more extendable</p>\n<pre><code>public class PriorityQueue{\n  private LinkedList&lt;Integer&gt; queue;\n\n  // Uses a very basic type (Integer), rather than relying on another specialized data structure.  This allows multiple consumers to use your PriorityQueue, not just your AVLTree\n  public void addValueToPQ(Integer value){\n    this.queue.addLast(value); // this isn't really how you would add a value to a PriorityQueue, it's just for example\n  }\n}\n\nPriorityQueue pq = new PriorityQueue();\nAVLTree avlTree = new AVLTree();\npq.addValueToPQ(avlTree.get(1).value);\n</code></pre>\n<p>Regarding errors in your <code>PriorityQueue_AVL</code> code, I can think of 4 things I would change off the top of my head</p>\n<ol>\n<li>No obvious reason to import HashMap, Map, or PriorityQueue in your class</li>\n<li>Presumably you are going to be instantiating individual Tuple objects, so using <code>static</code> in the class definition is not appropriate and will not work</li>\n<li><code>@Override</code> should not be commented</li>\n<li>You were missing a closing <code>}</code> for your class.</li>\n</ol>\n<p>Outside of these, the code compiles just fine for me, so if there are additional syntax errors that you would like help with, some more details will be necessary.</p>\n<p>Lastly, I do want to point out that an AVLTree (and also a PriorityQueue to some extent) is a complex data structure.  If you're new to Java (and ESPECIALLY if you are new to programming in general) and you're doing this exercise purely for academic purposes, I suggest starting off by implementing something a little easier (ArrayList and LinkedList come to mind).  But if that isn't the case, disregard.</p>\n<p>If you have additional, specific questions, I (or others) are likely happy to help, but without more code or details added to your original question, I think the above is pretty much everything I have to offer.</p>\n"}],"owner":{"account_id":25539081,"reputation":41,"user_id":19325537,"display_name":"eshtabel3asal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697082587,"creation_date":1679332590,"question_id":75793357,"body_markdown":"I want to build a priority queue, where the elements are the nodes of my AVL tree. The priority queue should order the nodes with the one with the highest value first, and the one with the lowest value last. I tried to create a new class to implement it, but I&#39;m not sure how to create it in a way that indicates that each element in the priority queue is a node in the AVL tree.\r\n\r\nThis is my code so far:\r\n\r\n```java\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.PriorityQueue;\r\n\r\npublic class PriorityQueue_AVL {\r\n    \r\n    static class Tuple implements Comparable&lt;Tuple&gt;{\r\n        String key;\r\n        int value;\r\n             \r\n        public Tuple(String key, int value){\r\n            this.key = key;\r\n            this.value = value;\r\n        }\r\n     \r\n        //@Override\r\n        public int compareTo(Tuple node) {\r\n            return this.value - node.value; //if positive, then this.value is larger so it goes first, and vice versa\r\n        }\r\n```\r\n\r\nRight below the `compareTo()` method in the above class, I also tried to create a method that iterates through the AVL tree to add each element to the priority queue, but I’m not sure if that&#39;s how it should be done. `node`, `key`, and `value` are all underlined in red in the method:\r\n\r\n```java\r\n    static void AVLtoPQ(){\r\n        System.out.println();\r\n        // push elements into priority queue PQ\r\n        PriorityQueue&lt;Tuple&gt; PQ = new PriorityQueue&lt;Tuple&gt;();\r\n        if (AVLTree.node != null) {\r\n            inOrderTraversal(node.left);\r\n            PQ.add(new Tuple(key, value));\r\n            inOrderTraversal(node.right);    \r\n        }\r\n    }\r\n```\r\n\r\nThis is how I&#39;m defining the AVL tree nodes in the `AVLTree.java` class:\r\n\r\n```java\r\n    public class AVLTree&lt;Key extends Comparable&lt;Key&gt;, Value&gt; {\r\n    \r\n        private Node root;  // root of the AVL tree\r\n    \r\n        // A node of the AVL tree\r\n        public class Node {\r\n            private Key key;           // key of the node\r\n            private Value value;       // value of the node\r\n            private Node left, right;  // left and right subtrees of the node\r\n            private int height;        // height of the node\r\n    \r\n            public Node(Key key, Value value) {\r\n                this.key = key;\r\n                this.value = value;\r\n                this.height = 1;\r\n            }\r\n        }\r\n```\r\n    \r\nWhat&#39;s wrong with the code, and how can I fix it? I know I need to &quot;connect&quot; the `AVLTree.java` class to the `PriorityQueue_AVL.java` class to be able to use the object Node there, but I&#39;m not sure how. Also, the syntax for the priority queue is off, and I can&#39;t pinpoint why.","title":"How can I add a tuple (key, value) from AVL Tree to a priority queue in java?","body":"<p>I want to build a priority queue, where the elements are the nodes of my AVL tree. The priority queue should order the nodes with the one with the highest value first, and the one with the lowest value last. I tried to create a new class to implement it, but I'm not sure how to create it in a way that indicates that each element in the priority queue is a node in the AVL tree.</p>\n<p>This is my code so far:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.HashMap;\nimport java.util.Map;\nimport java.util.PriorityQueue;\n\npublic class PriorityQueue_AVL {\n    \n    static class Tuple implements Comparable&lt;Tuple&gt;{\n        String key;\n        int value;\n             \n        public Tuple(String key, int value){\n            this.key = key;\n            this.value = value;\n        }\n     \n        //@Override\n        public int compareTo(Tuple node) {\n            return this.value - node.value; //if positive, then this.value is larger so it goes first, and vice versa\n        }\n</code></pre>\n<p>Right below the <code>compareTo()</code> method in the above class, I also tried to create a method that iterates through the AVL tree to add each element to the priority queue, but I’m not sure if that's how it should be done. <code>node</code>, <code>key</code>, and <code>value</code> are all underlined in red in the method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static void AVLtoPQ(){\n        System.out.println();\n        // push elements into priority queue PQ\n        PriorityQueue&lt;Tuple&gt; PQ = new PriorityQueue&lt;Tuple&gt;();\n        if (AVLTree.node != null) {\n            inOrderTraversal(node.left);\n            PQ.add(new Tuple(key, value));\n            inOrderTraversal(node.right);    \n        }\n    }\n</code></pre>\n<p>This is how I'm defining the AVL tree nodes in the <code>AVLTree.java</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public class AVLTree&lt;Key extends Comparable&lt;Key&gt;, Value&gt; {\n    \n        private Node root;  // root of the AVL tree\n    \n        // A node of the AVL tree\n        public class Node {\n            private Key key;           // key of the node\n            private Value value;       // value of the node\n            private Node left, right;  // left and right subtrees of the node\n            private int height;        // height of the node\n    \n            public Node(Key key, Value value) {\n                this.key = key;\n                this.value = value;\n                this.height = 1;\n            }\n        }\n</code></pre>\n<p>What's wrong with the code, and how can I fix it? I know I need to &quot;connect&quot; the <code>AVLTree.java</code> class to the <code>PriorityQueue_AVL.java</code> class to be able to use the object Node there, but I'm not sure how. Also, the syntax for the priority queue is off, and I can't pinpoint why.</p>\n"},{"tags":["java","android","gradle","resolve"],"comments":[{"owner":{"account_id":6115604,"reputation":1052,"user_id":4770743,"accept_rate":58,"display_name":"Alireza Ghaffari"},"score":0,"creation_date":1582974788,"post_id":60463052,"comment_id":106966171,"body_markdown":"Try it File&gt;Sync Project with Gradle Files","body":"Try it File&gt;Sync Project with Gradle Files"}],"answers":[{"tags":[],"owner":{"account_id":16651417,"reputation":219,"user_id":12034161,"display_name":"Asif Iqbal"},"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1582998516,"creation_date":1582998516,"answer_id":60467950,"question_id":60463052,"body_markdown":"It is a problem found in the new Android Studio 3.6 update. But it is basically not a problem. &lt;br&gt;&lt;br&gt;\r\n&lt;b&gt;All you have to do is the following:&lt;/b&gt; &lt;br&gt;\r\nTo enable or disable Gradle&#39;s offline mode, first select View &gt; Tool Windows &gt; Gradle from the menu bar. Then, near the top of the Gradle window, click Toggle Offline Mode &lt;br&gt;&lt;br&gt;\r\n\r\nHere are some screenshots:&lt;br&gt;\r\n\r\n1. [First go here][1]&lt;br&gt;\r\n2. [Toggle this option][2]\r\n\r\n  [1]: https://i.stack.imgur.com/FOf1N.png\r\n  [2]: https://i.stack.imgur.com/qiDBX.png","title":"Android Gradle Sync failed: Could not resolve all artifacts for configuration &#39;:classpath&#39;","body":"<p>It is a problem found in the new Android Studio 3.6 update. But it is basically not a problem. <br><br>\n<b>All you have to do is the following:</b> <br>\nTo enable or disable Gradle's offline mode, first select View > Tool Windows > Gradle from the menu bar. Then, near the top of the Gradle window, click Toggle Offline Mode <br><br></p>\n\n<p>Here are some screenshots:<br></p>\n\n<ol>\n<li><a href=\"https://i.stack.imgur.com/FOf1N.png\" rel=\"noreferrer\">First go here</a><br></li>\n<li><a href=\"https://i.stack.imgur.com/qiDBX.png\" rel=\"noreferrer\">Toggle this option</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":62173,"reputation":8994,"user_id":1097104,"accept_rate":100,"display_name":"Juuso Ohtonen"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1583051508,"creation_date":1583051508,"answer_id":60473325,"question_id":60463052,"body_markdown":"I opened an old project with Eclipse. For me, it helped to add the following in *build.gradle*:\r\n\r\n    apply plugin: &#39;com.android.application&#39;\r\n    \r\n    repositories {\r\n        // order may be important!\r\n        google()\r\n        jcenter()\r\n    } \r\n\r\nSource: https://stackoverflow.com/a/50285646/1097104\r\n\r\nIn addition, a few times I had to use _File_ &gt; _Invalidate Caches / Restart_.\r\n","title":"Android Gradle Sync failed: Could not resolve all artifacts for configuration &#39;:classpath&#39;","body":"<p>I opened an old project with Eclipse. For me, it helped to add the following in <em>build.gradle</em>:</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\nrepositories {\n    // order may be important!\n    google()\n    jcenter()\n} \n</code></pre>\n\n<p>Source: <a href=\"https://stackoverflow.com/a/50285646/1097104\">https://stackoverflow.com/a/50285646/1097104</a></p>\n\n<p>In addition, a few times I had to use <em>File</em> > <em>Invalidate Caches / Restart</em>.</p>\n"},{"tags":[],"owner":{"account_id":3422576,"reputation":11,"user_id":2869593,"display_name":"Amarildo Lucas"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1583082530,"creation_date":1583082530,"answer_id":60477595,"question_id":60463052,"body_markdown":"The project that you are trying to build probably doesn&#39;t have the required SDK version. You can download it from the Android Studio within the &quot;Preferences&quot; dialog, under Appearance &amp; Behavior → System Settings → Android SDK. [Preferences Screenshot][1].\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EdWY2.png","title":"Android Gradle Sync failed: Could not resolve all artifacts for configuration &#39;:classpath&#39;","body":"<p>The project that you are trying to build probably doesn't have the required SDK version. You can download it from the Android Studio within the \"Preferences\" dialog, under Appearance &amp; Behavior → System Settings → Android SDK. <a href=\"https://i.stack.imgur.com/EdWY2.png\" rel=\"nofollow noreferrer\">Preferences Screenshot</a>.</p>\n"},{"tags":[],"owner":{"account_id":12139942,"reputation":585,"user_id":8864205,"display_name":"Koch"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1584992063,"creation_date":1584557229,"answer_id":60745734,"question_id":60463052,"body_markdown":"I was going through similar issues last night, this is what worked for me :\r\n \r\nOpen the *build.gradle* file from your app folder, it should look similar to this\r\n\r\n    \r\n    buildscript {\r\n        repositories {\r\n            jcenter()\r\n        }\r\n        dependencies {\r\n            classpath &#39;com.android.tools.build:gradle:3.6.1&#39;\r\n        }\r\n    }\r\n    \r\n    allprojects {\r\n        repositories {\r\n            jcenter()\r\n        }\r\n    }\r\n\r\nadd *google()* to *repositories* in -**buildscript** and -**allprojects**, just like here :\r\n\r\n    buildscript {\r\n        repositories {\r\n            google()       // here\r\n            jcenter()\r\n        }\r\n        dependencies {\r\n            classpath &#39;com.android.tools.build:gradle:3.6.1&#39;\r\n        }\r\n    }\r\n    \r\n    allprojects {\r\n        repositories {\r\n            google()      //and here\r\n            jcenter()\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nIn Android Studio, go to **File** -&gt; **Project Structure..**   *[ shortcut : **Ctrl + Alt + Shift + S** ]*\r\n\r\nIn the ***Project*** tab -&gt; Android Gradle Plugin Version -&gt; 3.6.1 **and** Gradle Version -&gt; 5.6.4 |||\r\n\r\nLast, under the ***Module*** tab, make sure the compile sdk version is &gt; 14 (ie: 25, 28 or 29..)\r\n\r\n\r\n","title":"Android Gradle Sync failed: Could not resolve all artifacts for configuration &#39;:classpath&#39;","body":"<p>I was going through similar issues last night, this is what worked for me :</p>\n\n<p>Open the <em>build.gradle</em> file from your app folder, it should look similar to this</p>\n\n<pre><code>buildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.6.1'\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n    }\n}\n</code></pre>\n\n<p>add <em>google()</em> to <em>repositories</em> in -<strong>buildscript</strong> and -<strong>allprojects</strong>, just like here :</p>\n\n<pre><code>buildscript {\n    repositories {\n        google()       // here\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.6.1'\n    }\n}\n\nallprojects {\n    repositories {\n        google()      //and here\n        jcenter()\n    }\n}\n</code></pre>\n\n<p>In Android Studio, go to <strong>File</strong> -> <strong>Project Structure..</strong>   <em>[ shortcut : <strong>Ctrl + Alt + Shift + S</strong> ]</em></p>\n\n<p>In the <strong><em>Project</em></strong> tab -> Android Gradle Plugin Version -> 3.6.1 <strong>and</strong> Gradle Version -> 5.6.4 |||</p>\n\n<p>Last, under the <strong><em>Module</em></strong> tab, make sure the compile sdk version is > 14 (ie: 25, 28 or 29..)</p>\n"},{"tags":[],"owner":{"account_id":3368850,"reputation":3589,"user_id":2828651,"accept_rate":56,"display_name":"صلي علي محمد - Atef Farouk"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1599412003,"creation_date":1599412003,"answer_id":63766772,"question_id":60463052,"body_markdown":"solution is to enable gradle as highlighted in below picture:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AIHBb.png","title":"Android Gradle Sync failed: Could not resolve all artifacts for configuration &#39;:classpath&#39;","body":"<p>solution is to enable gradle as highlighted in below picture:\n<a href=\"https://i.stack.imgur.com/AIHBb.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/AIHBb.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":24599404,"reputation":41,"user_id":18502458,"display_name":"Govind Dhage"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663250600,"creation_date":1663250600,"answer_id":73732574,"question_id":60463052,"body_markdown":"If you are using Android Latest version Chipmunk. Then this solution for you.\r\n\r\nstep 1. Open Gradle Setting and copy **gradlePluginPortal()**  and paste it in dependencyResolutionManagement below.\r\n\r\nstep 2. Change **RepositoriesMode.PREFER_SETTINGS**  like this\r\nstep 3. enable **android.enableJetifier=true**\r\n\r\nfollow the above step then definetelly solve your issue.\r\n","title":"Android Gradle Sync failed: Could not resolve all artifacts for configuration &#39;:classpath&#39;","body":"<p>If you are using Android Latest version Chipmunk. Then this solution for you.</p>\n<p>step 1. Open Gradle Setting and copy <strong>gradlePluginPortal()</strong>  and paste it in dependencyResolutionManagement below.</p>\n<p>step 2. Change <strong>RepositoriesMode.PREFER_SETTINGS</strong>  like this\nstep 3. enable <strong>android.enableJetifier=true</strong></p>\n<p>follow the above step then definetelly solve your issue.</p>\n"},{"tags":[],"owner":{"account_id":25171906,"reputation":119,"user_id":19014628,"display_name":"chanthini begam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696317940,"creation_date":1696317570,"answer_id":77220347,"question_id":60463052,"body_markdown":"In some cases, cached artifacts or metadata may be causing issues. Try clearing the cache for your dependency management system and re-running your build or resolution process. In android studio, File-&gt; Invalidate caches -&gt; Invalidate and Restart.\r\nIf you&#39;ve tried the above steps and are still facing the issue, close the android studio and open it then run your application it will work fine. (It&#39;s worked for me... Hence i have added it)","title":"Android Gradle Sync failed: Could not resolve all artifacts for configuration &#39;:classpath&#39;","body":"<p>In some cases, cached artifacts or metadata may be causing issues. Try clearing the cache for your dependency management system and re-running your build or resolution process. In android studio, File-&gt; Invalidate caches -&gt; Invalidate and Restart.\nIf you've tried the above steps and are still facing the issue, close the android studio and open it then run your application it will work fine. (It's worked for me... Hence i have added it)</p>\n"},{"tags":[],"owner":{"account_id":18463401,"reputation":81,"user_id":13450267,"display_name":"SHUBHAM SONI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697082311,"creation_date":1697082311,"answer_id":77277577,"question_id":60463052,"body_markdown":"This i my project issue\r\n\r\nCaused by: org.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\n\r\nI have Resolve this problem\r\nadded one dependency library.\r\n\r\n&gt; implementation(platform(&quot;org.jetbrains.kotlin:kotlin-bom:1.8.0&quot;))\r\n\r\n\r\n","title":"Android Gradle Sync failed: Could not resolve all artifacts for configuration &#39;:classpath&#39;","body":"<p>This i my project issue</p>\n<p>Caused by: org.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.</p>\n<p>I have Resolve this problem\nadded one dependency library.</p>\n<blockquote>\n<p>implementation(platform(&quot;org.jetbrains.kotlin:kotlin-bom:1.8.0&quot;))</p>\n</blockquote>\n"}],"owner":{"account_id":16540336,"reputation":171,"user_id":11951307,"display_name":"Harish Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64100,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"answer_count":8,"score":17,"last_activity_date":1697082311,"creation_date":1582962455,"question_id":60463052,"body_markdown":"The error is the following:\r\n\r\n```\r\nCaused by: org.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all artifacts for configuration &#39;:classpath&#39;.\r\n\r\nCaused by: org.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.android.tools.build:gradle:3.6.1.\r\n\r\nCaused by: org.gradle.internal.resolve.ModuleVersionResolveException: No cached version of com.android.tools.build:gradle:3.6.1 available for offline mode.\r\n```","title":"Android Gradle Sync failed: Could not resolve all artifacts for configuration &#39;:classpath&#39;","body":"<p>The error is the following:</p>\n<pre><code>Caused by: org.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all artifacts for configuration ':classpath'.\n\nCaused by: org.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.android.tools.build:gradle:3.6.1.\n\nCaused by: org.gradle.internal.resolve.ModuleVersionResolveException: No cached version of com.android.tools.build:gradle:3.6.1 available for offline mode.\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":788777,"reputation":28977,"user_id":857132,"accept_rate":69,"display_name":"John3136"},"score":0,"creation_date":1697079096,"post_id":77277396,"comment_id":136235077,"body_markdown":"If was your tutor you just failed because you used a floating point type for money. Hopefully your tutor isn&#39;t an utter utter b&amp;*%$d like me :-) It is possible that the double is the cause of your problem. changeToGive could be getting very close to 0 (but still &gt; 0 but less than .1 so it never changes).","body":"If was your tutor you just failed because you used a floating point type for money. Hopefully your tutor isn&#39;t an utter utter b&amp;*%$d like me :-) It is possible that the double is the cause of your problem. changeToGive could be getting very close to 0 (but still &gt; 0 but less than .1 so it never changes)."},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1697080521,"post_id":77277396,"comment_id":136235188,"body_markdown":"The trick is to use `int` (not `double`!) for *everything*, including the price, by storing amounts as the integer quantity of *cents*.","body":"The trick is to use <code>int</code> (not <code>double</code>!) for <i>everything</i>, including the price, by storing amounts as the integer quantity of <i>cents</i>."}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697081227,"creation_date":1697081227,"answer_id":77277518,"question_id":77277396,"body_markdown":"After making `changeToGive` an `int` instead of a `double` (plus removal of a small amount of unnecessary code), you&#39;ll have a working solution:\r\n\r\n```\r\nint quarters = 0;\r\nint dimes = 0;\r\nint nickels = 0;\r\nint pennies = 0;\r\nScanner sc = new Scanner(System.in);\r\nint changeToGive = 0;\r\n\r\ndo {\r\n    // if the user gave us a negative dollar amount\r\n    if (changeToGive &lt; 0)\r\n        System.out.println(&quot;Dollar amounts must be positive.&quot;);\r\n\r\n    // prompt the user for a monetary input\r\n    System.out.println(&quot;How much change do you need to pay out?&quot;);\r\n\r\n    // while the user&#39;s input is not a valid double, prompt again\r\n    while (!sc.hasNextDouble()) {\r\n        System.out.println(&quot;Invalid input. How much change do you need to pay out?&quot;);\r\n        sc.next(); // this is important!\r\n    }\r\n\r\n    // if the user entered a valid double, assign it to changeToGive\r\n    changeToGive = (int) (sc.nextDouble() * 100); // cents\r\n} while (changeToGive &lt;= 0); //if the user entered a valid double but it was negative, do it all again\r\n\r\nwhile (changeToGive &gt; 0) {\r\n    if (changeToGive &gt;= 25) {\r\n        changeToGive -= 25;\r\n        quarters++;\r\n    } else if (changeToGive &gt;= 10) {\r\n        changeToGive -= 10;\r\n        dimes++;\r\n    } else if (changeToGive &gt;= 5) {\r\n        changeToGive -= 5;\r\n        nickels++;\r\n    } else {\r\n        changeToGive -= 1;\r\n        pennies++;\r\n    }\r\n}\r\n\r\nSystem.out.print(&quot;Your change is:\\n&quot; + quarters + &quot; quarters\\n&quot; + dimes + &quot; dimes\\n&quot; + nickels + &quot; nickels\\n&quot; + pennies + &quot; pennies\\n&quot;);\r\n```\r\n\r\n---\r\n\r\nFor bonus marks, use an `enum` of coins, each with a `value` field, rather than hard coding them. Left to you to investigate.","title":"Writing a code to give back the least amount of coins for a user inputted number. I have no clue why the results aren&#39;t printing","body":"<p>After making <code>changeToGive</code> an <code>int</code> instead of a <code>double</code> (plus removal of a small amount of unnecessary code), you'll have a working solution:</p>\n<pre><code>int quarters = 0;\nint dimes = 0;\nint nickels = 0;\nint pennies = 0;\nScanner sc = new Scanner(System.in);\nint changeToGive = 0;\n\ndo {\n    // if the user gave us a negative dollar amount\n    if (changeToGive &lt; 0)\n        System.out.println(&quot;Dollar amounts must be positive.&quot;);\n\n    // prompt the user for a monetary input\n    System.out.println(&quot;How much change do you need to pay out?&quot;);\n\n    // while the user's input is not a valid double, prompt again\n    while (!sc.hasNextDouble()) {\n        System.out.println(&quot;Invalid input. How much change do you need to pay out?&quot;);\n        sc.next(); // this is important!\n    }\n\n    // if the user entered a valid double, assign it to changeToGive\n    changeToGive = (int) (sc.nextDouble() * 100); // cents\n} while (changeToGive &lt;= 0); //if the user entered a valid double but it was negative, do it all again\n\nwhile (changeToGive &gt; 0) {\n    if (changeToGive &gt;= 25) {\n        changeToGive -= 25;\n        quarters++;\n    } else if (changeToGive &gt;= 10) {\n        changeToGive -= 10;\n        dimes++;\n    } else if (changeToGive &gt;= 5) {\n        changeToGive -= 5;\n        nickels++;\n    } else {\n        changeToGive -= 1;\n        pennies++;\n    }\n}\n\nSystem.out.print(&quot;Your change is:\\n&quot; + quarters + &quot; quarters\\n&quot; + dimes + &quot; dimes\\n&quot; + nickels + &quot; nickels\\n&quot; + pennies + &quot; pennies\\n&quot;);\n</code></pre>\n<hr />\n<p>For bonus marks, use an <code>enum</code> of coins, each with a <code>value</code> field, rather than hard coding them. Left to you to investigate.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697081986,"creation_date":1697081986,"answer_id":77277556,"question_id":77277396,"body_markdown":"&gt; _&quot;... I am not sure how to get the proper results to print out, and am not sure why it isn&#39;t giving the correct response when it is. ...&quot;_\r\n\r\nYou&#39;ve incorrectly denoted a _5 cent_ and _1 cent_ value as _0.5_ and _0.1_, instead of _0.05_, and _0.01_.\r\n\r\n```java\r\nif (changeToGive &gt;= .5) changeToGive -= .5;\r\nif (changeToGive &gt;= .1) changeToGive -= .1;\r\n```\r\n\r\nAdditionally, the _changeToGive_ value is mutating as you deduct the values.\r\n\r\nHere is an iteration for _0.99_.\r\n\r\n```none\r\n0.99 - .25 = 0.74\r\n0.74 - .25 = 0.49\r\n0.49 - .25 = 0.24\r\n0.24 - .10 = 0.13999999999999999\r\n0.13999999999999999 - .10 = 0.03999999999999998\r\n0.03999999999999998 - 0.01 = 0.029999999999999978\r\n0.029999999999999978 - 0.01 = 0.019999999999999976\r\n0.019999999999999976 - 0.01 = 0.009999999999999976\r\n```\r\n\r\nAs suggested by _Java_, use the _[BigDecimal](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html)_ class for _currency_ application.\r\n\r\n_[Primitive Data Types (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language &amp;gt; Language Basics)](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)_.\r\n\r\n&gt; _The float data type ... This data type should never be used for precise values, such as currency. For that, you will need to use the [[java.math.BigDecimal]](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html) class instead._\r\n\r\nHere is an example.\r\n\r\n```java\r\nimport static java.math.BigDecimal.ZERO;\r\nimport static java.math.RoundingMode.HALF_EVEN;\r\n\r\nimport java.math.BigDecimal;\r\n```\r\n\r\n```java\r\nint quarters = 0;\r\nint dimes = 0;\r\nint nickels = 0;\r\nint pennies = 0;\r\n//prompt the user for a monetary input\r\nScanner sc = new Scanner(System.in);\r\nBigDecimal changeToGive = ZERO.setScale(2, HALF_EVEN), z = ZERO,\r\n           q = new BigDecimal(&quot;.25&quot;), d = new BigDecimal(&quot;.10&quot;),\r\n           n = new BigDecimal(&quot;.05&quot;), p = new BigDecimal(&quot;.01&quot;);\r\n\r\ndo {\r\n    //if the user gave us a negative dollar amount\r\n    if(changeToGive.compareTo(z) &lt; 0)\r\n        System.out.println(&quot;Dollar amounts must be positive.&quot;);\r\n\r\n        //if the current amount is zero dollars\r\n    else if(changeToGive.compareTo(z) == 0)\r\n        System.out.println(&quot;How much change do you need to pay out?&quot;);\r\n\r\n    // while the user&#39;s input is not a valid double, prompt again\r\n    while (!sc.hasNextBigDecimal()) {\r\n        System.out.println(&quot;Invalid input.  How much change do you need to pay out?&quot;);\r\n        sc.next(); // this is important!\r\n    }\r\n\r\n    //if the user entered a valid double, assign it to changeToGive\r\n    changeToGive = sc.nextBigDecimal();\r\n} while (changeToGive.compareTo(z) &lt;= 0); //if the user entered a valid double but it was negative, do it all again\r\n\r\nwhile (changeToGive.compareTo(z) &gt; 0){\r\n    if (changeToGive.compareTo(q) &gt;= 0){\r\n        changeToGive = changeToGive.subtract(q);\r\n        quarters++;\r\n    }else if (changeToGive.compareTo(d) &gt;= 0){\r\n        changeToGive = changeToGive.subtract(d);\r\n        dimes++;\r\n    }else if (changeToGive.compareTo(n) &gt;= 0){\r\n        changeToGive = changeToGive.subtract(n);\r\n        nickels++;\r\n    }else if (changeToGive.compareTo(p) &gt;= 0){\r\n        changeToGive = changeToGive.subtract(p);\r\n        pennies++;\r\n    }\r\n}\r\nSystem.out.print(&quot;Your change is:\\n&quot;+quarters+&quot; quarters\\n&quot;+dimes+&quot; dimes\\n&quot;+nickels+&quot; nickels\\n&quot;+pennies+&quot; pennies\\n&quot;);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nHow much change do you need to pay out?\r\n.99\r\nYour change is:\r\n3 quarters\r\n2 dimes\r\n0 nickels\r\n4 pennies\r\n```","title":"Writing a code to give back the least amount of coins for a user inputted number. I have no clue why the results aren&#39;t printing","body":"<blockquote>\n<p><em>&quot;... I am not sure how to get the proper results to print out, and am not sure why it isn't giving the correct response when it is. ...&quot;</em></p>\n</blockquote>\n<p>You've incorrectly denoted a <em>5 cent</em> and <em>1 cent</em> value as <em>0.5</em> and <em>0.1</em>, instead of <em>0.05</em>, and <em>0.01</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (changeToGive &gt;= .5) changeToGive -= .5;\nif (changeToGive &gt;= .1) changeToGive -= .1;\n</code></pre>\n<p>Additionally, the <em>changeToGive</em> value is mutating as you deduct the values.</p>\n<p>Here is an iteration for <em>0.99</em>.</p>\n<pre class=\"lang-none prettyprint-override\"><code>0.99 - .25 = 0.74\n0.74 - .25 = 0.49\n0.49 - .25 = 0.24\n0.24 - .10 = 0.13999999999999999\n0.13999999999999999 - .10 = 0.03999999999999998\n0.03999999999999998 - 0.01 = 0.029999999999999978\n0.029999999999999978 - 0.01 = 0.019999999999999976\n0.019999999999999976 - 0.01 = 0.009999999999999976\n</code></pre>\n<p>As suggested by <em>Java</em>, use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a></em> class for <em>currency</em> application.</p>\n<p><em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\">Primitive Data Types (The Java™ Tutorials &gt; Learning the Java Language &gt; Language Basics)</a></em>.</p>\n<blockquote>\n<p><em>The float data type ... This data type should never be used for precise values, such as currency. For that, you will need to use the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">[java.math.BigDecimal]</a> class instead.</em></p>\n</blockquote>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static java.math.BigDecimal.ZERO;\nimport static java.math.RoundingMode.HALF_EVEN;\n\nimport java.math.BigDecimal;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>int quarters = 0;\nint dimes = 0;\nint nickels = 0;\nint pennies = 0;\n//prompt the user for a monetary input\nScanner sc = new Scanner(System.in);\nBigDecimal changeToGive = ZERO.setScale(2, HALF_EVEN), z = ZERO,\n           q = new BigDecimal(&quot;.25&quot;), d = new BigDecimal(&quot;.10&quot;),\n           n = new BigDecimal(&quot;.05&quot;), p = new BigDecimal(&quot;.01&quot;);\n\ndo {\n    //if the user gave us a negative dollar amount\n    if(changeToGive.compareTo(z) &lt; 0)\n        System.out.println(&quot;Dollar amounts must be positive.&quot;);\n\n        //if the current amount is zero dollars\n    else if(changeToGive.compareTo(z) == 0)\n        System.out.println(&quot;How much change do you need to pay out?&quot;);\n\n    // while the user's input is not a valid double, prompt again\n    while (!sc.hasNextBigDecimal()) {\n        System.out.println(&quot;Invalid input.  How much change do you need to pay out?&quot;);\n        sc.next(); // this is important!\n    }\n\n    //if the user entered a valid double, assign it to changeToGive\n    changeToGive = sc.nextBigDecimal();\n} while (changeToGive.compareTo(z) &lt;= 0); //if the user entered a valid double but it was negative, do it all again\n\nwhile (changeToGive.compareTo(z) &gt; 0){\n    if (changeToGive.compareTo(q) &gt;= 0){\n        changeToGive = changeToGive.subtract(q);\n        quarters++;\n    }else if (changeToGive.compareTo(d) &gt;= 0){\n        changeToGive = changeToGive.subtract(d);\n        dimes++;\n    }else if (changeToGive.compareTo(n) &gt;= 0){\n        changeToGive = changeToGive.subtract(n);\n        nickels++;\n    }else if (changeToGive.compareTo(p) &gt;= 0){\n        changeToGive = changeToGive.subtract(p);\n        pennies++;\n    }\n}\nSystem.out.print(&quot;Your change is:\\n&quot;+quarters+&quot; quarters\\n&quot;+dimes+&quot; dimes\\n&quot;+nickels+&quot; nickels\\n&quot;+pennies+&quot; pennies\\n&quot;);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>How much change do you need to pay out?\n.99\nYour change is:\n3 quarters\n2 dimes\n0 nickels\n4 pennies\n</code></pre>\n"}],"owner":{"account_id":29652883,"reputation":1,"user_id":22726298,"display_name":"zome"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697081986,"creation_date":1697078739,"question_id":77277396,"body_markdown":"I am not sure how to get the proper results to print out, and am not sure why it isn&#39;t giving the correct response when it is. The beginning code was starter code I was told not to touch.\r\n\r\nI tried moving the location of the print statement, but it would end up printing one quarter and nothing else.\r\n```\r\n\r\nimport java.util.Scanner;\r\n\r\nclass Main {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tint quarters = 0;\r\n    int dimes = 0;\r\n    int nickels = 0;\r\n    int pennies = 0;\r\n\t\t//prompt the user for a monetary input\r\n\t    Scanner sc = new Scanner(System.in);\r\n\t    double changeToGive = 0;\r\n\t    \r\n\t    do {\r\n\t    \t//if the user gave us a negative dollar amount\r\n\t        if(changeToGive &lt; 0)\r\n\t            System.out.println(&quot;Dollar amounts must be positive.&quot;);\r\n\t        \r\n\t        //if the current amount is zero dollars\r\n\t        else if(changeToGive == 0)\r\n\t            System.out.println(&quot;How much change do you need to pay out?&quot;);\r\n\t        \r\n\t        // while the user&#39;s input is not a valid double, prompt again\r\n\t        while (!sc.hasNextDouble()) {\r\n\t            System.out.println(&quot;Invalid input.  How much change do you need to pay out?&quot;);\r\n\t            sc.next(); // this is important!\r\n\t        }\r\n\t        \r\n\t        //if the user entered a valid double, assign it to changeToGive\r\n\t        changeToGive = sc.nextDouble();\r\n\t    } while (changeToGive &lt;= 0); //if the user entered a valid double but it was negative, do it all again\r\n\r\n     while (changeToGive &gt; 0){ \r\n    if (changeToGive &gt;= .25){\r\n    changeToGive -= .25;\r\n    quarters++;\r\n    }else if (changeToGive &gt;= .10){\r\n    changeToGive -= .10;\r\n    dimes++;\r\n    }else if (changeToGive &gt;= .5){\r\n    changeToGive -= .5;\r\n    nickels++;\r\n    }else if (changeToGive &gt;= .1){\r\n    changeToGive -= .1;\r\n    pennies++;\r\n    }\r\n     }\r\n    System.out.print(&quot;Your change is:\\n&quot;+quarters+&quot; quarters\\n&quot;+dimes+&quot; dimes\\n&quot;+nickels+&quot; nickels\\n&quot;+pennies+&quot; pennies\\n&quot;);\r\n       \r\n    \r\n    \r\n    \r\n\r\n    }\r\n    \r\n      \r\n    }\r\n\t\r\n```\r\n","title":"Writing a code to give back the least amount of coins for a user inputted number. I have no clue why the results aren&#39;t printing","body":"<p>I am not sure how to get the proper results to print out, and am not sure why it isn't giving the correct response when it is. The beginning code was starter code I was told not to touch.</p>\n<p>I tried moving the location of the print statement, but it would end up printing one quarter and nothing else.</p>\n<pre><code>\nimport java.util.Scanner;\n\nclass Main {\n\n    public static void main(String[] args) {\n        int quarters = 0;\n    int dimes = 0;\n    int nickels = 0;\n    int pennies = 0;\n        //prompt the user for a monetary input\n        Scanner sc = new Scanner(System.in);\n        double changeToGive = 0;\n        \n        do {\n            //if the user gave us a negative dollar amount\n            if(changeToGive &lt; 0)\n                System.out.println(&quot;Dollar amounts must be positive.&quot;);\n            \n            //if the current amount is zero dollars\n            else if(changeToGive == 0)\n                System.out.println(&quot;How much change do you need to pay out?&quot;);\n            \n            // while the user's input is not a valid double, prompt again\n            while (!sc.hasNextDouble()) {\n                System.out.println(&quot;Invalid input.  How much change do you need to pay out?&quot;);\n                sc.next(); // this is important!\n            }\n            \n            //if the user entered a valid double, assign it to changeToGive\n            changeToGive = sc.nextDouble();\n        } while (changeToGive &lt;= 0); //if the user entered a valid double but it was negative, do it all again\n\n     while (changeToGive &gt; 0){ \n    if (changeToGive &gt;= .25){\n    changeToGive -= .25;\n    quarters++;\n    }else if (changeToGive &gt;= .10){\n    changeToGive -= .10;\n    dimes++;\n    }else if (changeToGive &gt;= .5){\n    changeToGive -= .5;\n    nickels++;\n    }else if (changeToGive &gt;= .1){\n    changeToGive -= .1;\n    pennies++;\n    }\n     }\n    System.out.print(&quot;Your change is:\\n&quot;+quarters+&quot; quarters\\n&quot;+dimes+&quot; dimes\\n&quot;+nickels+&quot; nickels\\n&quot;+pennies+&quot; pennies\\n&quot;);\n       \n    \n    \n    \n\n    }\n    \n      \n    }\n    \n</code></pre>\n"},{"tags":["java","eclipse","gradle"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1679614889,"post_id":75826538,"comment_id":133757842,"body_markdown":"See https://stackoverflow.com/a/53824670/6505250 and https://stackoverflow.com/a/74890645/6505250","body":"See <a href=\"https://stackoverflow.com/a/53824670/6505250\">stackoverflow.com/a/53824670/6505250</a> and <a href=\"https://stackoverflow.com/a/74890645/6505250\">stackoverflow.com/a/74890645/6505250</a>"}],"answers":[{"tags":[],"owner":{"account_id":19093070,"reputation":11,"user_id":13942982,"display_name":"David He"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679601524,"creation_date":1679601524,"answer_id":75827498,"question_id":75826538,"body_markdown":"This is a common problem in modular Java.\r\n\r\nThis issue occurs when: \r\n\r\n - modules are being referenced by your project\r\n - there is a dependency in your project\r\n - project contains lines of code\r\n - packages are also in modules \r\n\r\n\r\nA key rule to know in Java is: \r\n\r\n&quot;In your own code, if the JDK has packages. Do not use those packages.&quot;\r\n\r\nIf you do this, you cannot go any further and will hit a wall.\r\n\r\n\r\nTo fix this, you will need to: \r\n\r\n 1. In package explorer, expand the &quot;External Dependencies and Projects&quot; tab\r\n 2. Determine and identify dependency is being used.\r\n 3. Exclude the dependency from the project.\r\n 4. If possible, rebuild the jar with packages that are changed, after obtaining the source of the dependency.\r\n5. If you do not complete the previous step, then you will have to remove the dependency and find a replacement.\r\n\r\n","title":"Eclipse can&#39;t resolve an import, and won&#39;t let me debug","body":"<p>This is a common problem in modular Java.</p>\n<p>This issue occurs when:</p>\n<ul>\n<li>modules are being referenced by your project</li>\n<li>there is a dependency in your project</li>\n<li>project contains lines of code</li>\n<li>packages are also in modules</li>\n</ul>\n<p>A key rule to know in Java is:</p>\n<p>&quot;In your own code, if the JDK has packages. Do not use those packages.&quot;</p>\n<p>If you do this, you cannot go any further and will hit a wall.</p>\n<p>To fix this, you will need to:</p>\n<ol>\n<li>In package explorer, expand the &quot;External Dependencies and Projects&quot; tab</li>\n<li>Determine and identify dependency is being used.</li>\n<li>Exclude the dependency from the project.</li>\n<li>If possible, rebuild the jar with packages that are changed, after obtaining the source of the dependency.</li>\n<li>If you do not complete the previous step, then you will have to remove the dependency and find a replacement.</li>\n</ol>\n"}],"owner":{"account_id":28078485,"reputation":11,"user_id":21449953,"display_name":"Manuel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697081428,"creation_date":1679594286,"question_id":75826538,"body_markdown":"I&#39;m working on a project with a development team, and I&#39;m the only one using Eclipse. The fact is that, (since the implementation of a functionality that one of my colleagues did), Eclipse warns me that there are two errors related to a dependency that it cannot resolve:\r\n\r\n![enter image description here](https://i.stack.imgur.com/hj7Gl.png)\r\n\r\nThis does not happen to any of my colleagues since they use different IDEs (VSCode or IntelliJ).\r\n\r\nThe solutions that I have seen on the internet are based on touching dependency configuration files (in this case it is a gradle project so it would be touching the `build.gradle` file), but this is not possible in my case since if I modify something in that file, I can harm my colleagues. I also suppose that there is another way to solve it from Eclipse because if it only happens to me, it must be something that has been corrupted.\r\n\r\nThat is why I call on the Eclipse scholars in the forum to see if they can give me a hand, because with these errors, Eclipse won&#39;t let me run the application in debug mode.\r\n\r\nI tried to look for information about it in other internet sites, but the solution of modifying configuration files cannot be applied to my case.","title":"Eclipse can&#39;t resolve an import, and won&#39;t let me debug","body":"<p>I'm working on a project with a development team, and I'm the only one using Eclipse. The fact is that, (since the implementation of a functionality that one of my colleagues did), Eclipse warns me that there are two errors related to a dependency that it cannot resolve:</p>\n<p><img src=\"https://i.stack.imgur.com/hj7Gl.png\" alt=\"enter image description here\" /></p>\n<p>This does not happen to any of my colleagues since they use different IDEs (VSCode or IntelliJ).</p>\n<p>The solutions that I have seen on the internet are based on touching dependency configuration files (in this case it is a gradle project so it would be touching the <code>build.gradle</code> file), but this is not possible in my case since if I modify something in that file, I can harm my colleagues. I also suppose that there is another way to solve it from Eclipse because if it only happens to me, it must be something that has been corrupted.</p>\n<p>That is why I call on the Eclipse scholars in the forum to see if they can give me a hand, because with these errors, Eclipse won't let me run the application in debug mode.</p>\n<p>I tried to look for information about it in other internet sites, but the solution of modifying configuration files cannot be applied to my case.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","thymeleaf","hibernate-validator"],"owner":{"account_id":28257380,"reputation":21,"user_id":21602639,"display_name":"Borbarad13"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1697080824,"creation_date":1681053337,"question_id":75971312,"body_markdown":"Showing **errors** with thymeleaf forms works **fine**, when the validation of a field fails.\r\nHowever, I am **struggling to implement &quot;warnings**&quot;. For example:\r\n\r\n- Booking Date: If it&#39;s more than a year in the future, a warning should be created, which can be waived/acknowledged. If the date is in the past an error should be created.\r\n\r\n- Booking Offer: If the dollar value is greater than 1000 then a warning should be created, which can be waived/acknowledged. If the dollar value is \\&lt;= 0, then an error should be created.\r\n\r\nI tried to implement the warning system using **validation constraints** (jakarta.validation.Constraint) the same way (hard) validations are implemented.\r\nHowever, I haven&#39;t found a way to **distinguish between &quot;errors&quot; and &quot;warnings&quot; in the thymeleaf template to make the &quot;warnings&quot; acknowledgeable** (e.g. showing an additional clickable check mark)\r\n\r\nAlso, I fail to see how the **information** that a &quot;warning&quot; was acknowledged can be **passed back to the Validator/Constraint**, so that the data can be stored once the user has **fixed all errors and acknowledged all warnings**.\r\n\r\nHere is the code that I have so far:\r\n\r\n```java\r\n@Entity\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@EqualsAndHashCode\r\npublic class BookingHeader {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private long id;\r\n\r\n        @DateTimeFormat(iso= DateTimeFormat.ISO.DATE)\r\n        @FutureOrPresent\r\n        @OpenBookingPeriodConstraint(message = &quot;{BookingHeader.BookingDate.OpenBookingPeriodConstraint}&quot;)\r\n        private Date bookingDate;\r\n        \r\n        @Positive\r\n        @OfferPriceTooHighConstraint\r\n        private int bookingOffer;\r\n}\r\n```\r\n\r\n```java\r\n@Documented\r\n@Constraint(validatedBy = OpenBookingPeriodValidator.class)\r\n@Target( { ElementType.METHOD, ElementType.FIELD })\r\n@Retention(RetentionPolicy.RUNTIME)\r\npublic @interface OpenBookingPeriodConstraint {\r\n       String message() default &quot;Booking is too far in the future&quot;;\r\n        Class&lt;?&gt;[] groups() default {};\r\n        Class&lt;? extends Payload&gt;[] payload() default {};\r\n}\r\n```\r\n\r\n```java\r\npublic class OpenBookingPeriodValidator implements ConstraintValidator&lt;OpenBookingPeriodConstraint, Date&gt; {\r\n\r\n        @Override\r\n        public void initialize(OpenBookingPeriodConstraint constraint) {\r\n        }\r\n\r\n        @Override\r\n        public boolean isValid(Date dateField, ConstraintValidatorContext cxt) {\r\n\r\n                Calendar cal = Calendar.getInstance();\r\n                cal.setTime(new Date());\r\n                cal.add(Calendar.DATE, 365);\r\n                return dateField != null &amp;&amp; dateField.before(cal.getTime());\r\n        }\r\n\r\n}\r\n```\r\n\r\n```html\r\n&lt;div class = &quot;container&quot;&gt;\r\n    &lt;div class = &quot;row&quot;&gt;\r\n        &lt;div class = &quot;col-lg-6 col-md-6 col-sm-6 container justify-content-center card&quot;&gt;\r\n            &lt;h1 class =&quot;text-center&quot;&gt; Create Booking&lt;/h1&gt;\r\n            &lt;div class = &quot;card-body&quot;&gt;\r\n                &lt;form th:action=&quot;@{/booking/add}&quot; th:object=&quot;${bookingHeader}&quot; method=&quot;post&quot; id=&quot;contactForm1&quot; data-bs-target=&quot;#main_menu_users&quot;&gt;\r\n                    \r\n                    &lt;div class =&quot;form-group&quot;&gt;\r\n                        &lt;label for=&quot;bookingDate&quot;&gt;bookingDate&lt;/label&gt;\r\n                        &lt;input type=&quot;date&quot; th:field=&quot;*{bookingDate}&quot; id=&quot;bookingDate&quot; placeholder=&quot;bookingDate&quot; class=&quot;form-control&quot;&gt;\r\n                        &lt;span th:if=&quot;${#fields.hasErrors(&#39;bookingDate&#39;)}&quot; th:errors=&quot;*{bookingDate}&quot;&gt;&lt;/span&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;br&gt;\r\n                    &lt;div class =&quot;form-group&quot;&gt;\r\n                        &lt;label for=&quot;bookingOffer&quot;&gt;bookingOffer&lt;/label&gt;\r\n                        &lt;input type=&quot;number&quot; th:field=&quot;*{bookingOffer}&quot; id=&quot;bookingOffer&quot; placeholder=&quot;bookingOffer&quot; class=&quot;form-control&quot;&gt;\r\n                        &lt;span th:if=&quot;${#fields.hasErrors(&#39;bookingOffer&#39;)}&quot; th:errors=&quot;*{bookingOffer}&quot;&gt;&lt;/span&gt;\r\n                    &lt;/div&gt;\r\n                &lt;/form&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n    &lt;/div&gt;\r\n&lt;/div&gt;\r\n```\r\n\r\n![Errors show correctly](https://i.stack.imgur.com/kuUhb.jpg)\r\n\r\n![These messages though should be warnings that can be skipped/acknowledged](https://i.stack.imgur.com/FJvEi.jpg)\r\n","title":"How to create acknowledgeable warnings alongside of errors with spring-boot + thymeleaf + jpa?","body":"<p>Showing <strong>errors</strong> with thymeleaf forms works <strong>fine</strong>, when the validation of a field fails.\nHowever, I am <strong>struggling to implement &quot;warnings</strong>&quot;. For example:</p>\n<ul>\n<li><p>Booking Date: If it's more than a year in the future, a warning should be created, which can be waived/acknowledged. If the date is in the past an error should be created.</p>\n</li>\n<li><p>Booking Offer: If the dollar value is greater than 1000 then a warning should be created, which can be waived/acknowledged. If the dollar value is &lt;= 0, then an error should be created.</p>\n</li>\n</ul>\n<p>I tried to implement the warning system using <strong>validation constraints</strong> (jakarta.validation.Constraint) the same way (hard) validations are implemented.\nHowever, I haven't found a way to <strong>distinguish between &quot;errors&quot; and &quot;warnings&quot; in the thymeleaf template to make the &quot;warnings&quot; acknowledgeable</strong> (e.g. showing an additional clickable check mark)</p>\n<p>Also, I fail to see how the <strong>information</strong> that a &quot;warning&quot; was acknowledged can be <strong>passed back to the Validator/Constraint</strong>, so that the data can be stored once the user has <strong>fixed all errors and acknowledged all warnings</strong>.</p>\n<p>Here is the code that I have so far:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@EqualsAndHashCode\npublic class BookingHeader {\n        @Id\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\n        private long id;\n\n        @DateTimeFormat(iso= DateTimeFormat.ISO.DATE)\n        @FutureOrPresent\n        @OpenBookingPeriodConstraint(message = &quot;{BookingHeader.BookingDate.OpenBookingPeriodConstraint}&quot;)\n        private Date bookingDate;\n        \n        @Positive\n        @OfferPriceTooHighConstraint\n        private int bookingOffer;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Documented\n@Constraint(validatedBy = OpenBookingPeriodValidator.class)\n@Target( { ElementType.METHOD, ElementType.FIELD })\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface OpenBookingPeriodConstraint {\n       String message() default &quot;Booking is too far in the future&quot;;\n        Class&lt;?&gt;[] groups() default {};\n        Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class OpenBookingPeriodValidator implements ConstraintValidator&lt;OpenBookingPeriodConstraint, Date&gt; {\n\n        @Override\n        public void initialize(OpenBookingPeriodConstraint constraint) {\n        }\n\n        @Override\n        public boolean isValid(Date dateField, ConstraintValidatorContext cxt) {\n\n                Calendar cal = Calendar.getInstance();\n                cal.setTime(new Date());\n                cal.add(Calendar.DATE, 365);\n                return dateField != null &amp;&amp; dateField.before(cal.getTime());\n        }\n\n}\n</code></pre>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class = &quot;container&quot;&gt;\n    &lt;div class = &quot;row&quot;&gt;\n        &lt;div class = &quot;col-lg-6 col-md-6 col-sm-6 container justify-content-center card&quot;&gt;\n            &lt;h1 class =&quot;text-center&quot;&gt; Create Booking&lt;/h1&gt;\n            &lt;div class = &quot;card-body&quot;&gt;\n                &lt;form th:action=&quot;@{/booking/add}&quot; th:object=&quot;${bookingHeader}&quot; method=&quot;post&quot; id=&quot;contactForm1&quot; data-bs-target=&quot;#main_menu_users&quot;&gt;\n                    \n                    &lt;div class =&quot;form-group&quot;&gt;\n                        &lt;label for=&quot;bookingDate&quot;&gt;bookingDate&lt;/label&gt;\n                        &lt;input type=&quot;date&quot; th:field=&quot;*{bookingDate}&quot; id=&quot;bookingDate&quot; placeholder=&quot;bookingDate&quot; class=&quot;form-control&quot;&gt;\n                        &lt;span th:if=&quot;${#fields.hasErrors('bookingDate')}&quot; th:errors=&quot;*{bookingDate}&quot;&gt;&lt;/span&gt;\n                    &lt;/div&gt;\n                    &lt;br&gt;\n                    &lt;div class =&quot;form-group&quot;&gt;\n                        &lt;label for=&quot;bookingOffer&quot;&gt;bookingOffer&lt;/label&gt;\n                        &lt;input type=&quot;number&quot; th:field=&quot;*{bookingOffer}&quot; id=&quot;bookingOffer&quot; placeholder=&quot;bookingOffer&quot; class=&quot;form-control&quot;&gt;\n                        &lt;span th:if=&quot;${#fields.hasErrors('bookingOffer')}&quot; th:errors=&quot;*{bookingOffer}&quot;&gt;&lt;/span&gt;\n                    &lt;/div&gt;\n                &lt;/form&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/kuUhb.jpg\" alt=\"Errors show correctly\" /></p>\n<p><img src=\"https://i.stack.imgur.com/FJvEi.jpg\" alt=\"These messages though should be warnings that can be skipped/acknowledged\" /></p>\n"},{"tags":["java","apache-camel","properties-file"],"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1697034899,"post_id":77273921,"comment_id":136229155,"body_markdown":"Where do you run the application from? You need to check the current working directory (`System.getProperties(&quot;user.dir&quot;)`.) If you are double-clicking, it might be you&#39;re running it from `C:\\Windows\\System32`.","body":"Where do you run the application from? You need to check the current working directory (<code>System.getProperties(&quot;user.dir&quot;)</code>.) If you are double-clicking, it might be you&#39;re running it from <code>C:\\Windows\\System32</code>."},{"owner":{"account_id":1546043,"reputation":57,"user_id":1439571,"display_name":"Anto"},"score":0,"creation_date":1697036205,"post_id":77273921,"comment_id":136229437,"body_markdown":"@k314159,  The path where those files are kept in C:\\Anto_Dev_Environment\\proxy_wmi","body":"@k314159,  The path where those files are kept in C:\\Anto_Dev_Environment\\proxy_wmi"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1697037382,"post_id":77273921,"comment_id":136229689,"body_markdown":"Are you sure? How do you know it&#39;s that folder? If you double-click it, that folder is _not_ the current directory. Try putting `echo %CD% &amp;&amp; pause` at the start of your `run_proxy.bat` and you&#39;ll see.","body":"Are you sure? How do you know it&#39;s that folder? If you double-click it, that folder is <i>not</i> the current directory. Try putting <code>echo %CD% &amp;&amp; pause</code> at the start of your <code>run_proxy.bat</code> and you&#39;ll see."},{"owner":{"account_id":1546043,"reputation":57,"user_id":1439571,"display_name":"Anto"},"score":1,"creation_date":1697080814,"post_id":77273921,"comment_id":136235217,"body_markdown":"@k314159, I got the directory  &#39;echo C:\\Anto_Dev_Environment\\proxy_wmi   &amp;&amp; pause&#39; I tried the above code..No luck.","body":"@k314159, I got the directory  &#39;echo C:\\Anto_Dev_Environment\\proxy_wmi   &amp;&amp; pause&#39; I tried the above code..No luck."}],"owner":{"account_id":1546043,"reputation":57,"user_id":1439571,"display_name":"Anto"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697080757,"creation_date":1697033931,"question_id":77273921,"body_markdown":"Our project used to have two kinds of properties in camel. One is for the default configuration and the other is a web service info. Once we package an entire project in a jar format. We placed the properties files in a separate folder (config). Which is present outside the jar file. Dynamically the web service properties are changed based on client requirements. It&#39;s better to keep it outside. So, to avoid every time building the jar file based on the web service property gets changed. \r\n\r\nOn reading the properties from the camel route, it was looking inside the jar directory of /config folder. We need to look outside of the /config folder. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe below code used to apply the properties \r\n\r\n    main.setPropertyPlaceholderLocations(&quot;file:config/scb-api-proxy.properties,config/scb-api-proxy-cred.properties,classpath:application.properties&quot;);\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SDExV.png\r\n  [2]: https://i.stack.imgur.com/eLtlV.png\r\n\r\n    try {\r\n            \tPropertiesComponent pc = new PropertiesComponent();\r\n        \t\tString path = System.getProperty(&quot;user.dir&quot;) + &quot;\\\\config123\\\\&quot;;\r\n        \t\tSystem.out.println(&quot;***** PATH&quot; + path);\r\n        \t\tpc.setLocation(&quot;file:&quot; + path +&quot;scb-api-proxy.properties,&quot; + path +&quot;scb-api-proxy-cred.properties,classpath:application.properties&quot;);\r\n        \t\t\r\n     \r\n        \t\tcontext.setPropertiesComponent(pc);\r\n        \t\t\r\n        \t\tLOG.info(&quot;Loading the properties file &quot; +  context.resolvePropertyPlaceholders(\r\n            \t\t\t&quot;{{smartcore.api.proxy.credential:false}}&quot;\r\n            \t\t\t.toString()));\r\n        \t\t\r\n            \t}catch(Exception err) {\r\n            \t\terr.printStackTrace();\r\n            \t}\r\n    \t","title":"Handling multiple properties file in camel","body":"<p>Our project used to have two kinds of properties in camel. One is for the default configuration and the other is a web service info. Once we package an entire project in a jar format. We placed the properties files in a separate folder (config). Which is present outside the jar file. Dynamically the web service properties are changed based on client requirements. It's better to keep it outside. So, to avoid every time building the jar file based on the web service property gets changed.</p>\n<p>On reading the properties from the camel route, it was looking inside the jar directory of /config folder. We need to look outside of the /config folder.</p>\n<p><a href=\"https://i.stack.imgur.com/SDExV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SDExV.png\" alt=\"enter image description here\" /></a></p>\n<p>The below code used to apply the properties</p>\n<pre><code>main.setPropertyPlaceholderLocations(&quot;file:config/scb-api-proxy.properties,config/scb-api-proxy-cred.properties,classpath:application.properties&quot;);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/eLtlV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eLtlV.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>try {\n            PropertiesComponent pc = new PropertiesComponent();\n            String path = System.getProperty(&quot;user.dir&quot;) + &quot;\\\\config123\\\\&quot;;\n            System.out.println(&quot;***** PATH&quot; + path);\n            pc.setLocation(&quot;file:&quot; + path +&quot;scb-api-proxy.properties,&quot; + path +&quot;scb-api-proxy-cred.properties,classpath:application.properties&quot;);\n            \n \n            context.setPropertiesComponent(pc);\n            \n            LOG.info(&quot;Loading the properties file &quot; +  context.resolvePropertyPlaceholders(\n                    &quot;{{smartcore.api.proxy.credential:false}}&quot;\n                    .toString()));\n            \n            }catch(Exception err) {\n                err.printStackTrace();\n            }\n    \n</code></pre>\n"},{"tags":["java","tomcat","custom-error-pages"],"answers":[{"tags":[],"owner":{"account_id":18590045,"reputation":229,"user_id":13547487,"display_name":"Erik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697080501,"creation_date":1697080501,"answer_id":77277481,"question_id":77270024,"body_markdown":"Welp....I found out where I went wrong.\r\n\r\nThe ```conf/server.xml```\r\n\r\n    &lt;Valve className=&quot;org.apache.catalina.valves.ErrorReportValve&quot;\r\n           error.400=&quot;errors/error_400.html&quot;\r\n           error.404=&quot;errors/error_404.html&quot; showReport=&quot;false&quot;\r\n           showServerInfo=&quot;false&quot; /&gt;\r\n\r\nerror.404 -&gt; error**Code**.404\r\n\r\nerror.400 -&gt; error**Code**.400\r\n\r\nNot sure if I read the documentation wrong, or the site I was reading it from had the wrong syntax, but once I changed that, my issues were more or less solved. This not only referred to the error pages in the base ```/tomcat``` directory as I wanted, but also allowed referencing to other folders, like ```/tomcat/webapps``` for example.","title":"Create Tomcat custom error pages, but not in ROOT","body":"<p>Welp....I found out where I went wrong.</p>\n<p>The <code>conf/server.xml</code></p>\n<pre><code>&lt;Valve className=&quot;org.apache.catalina.valves.ErrorReportValve&quot;\n       error.400=&quot;errors/error_400.html&quot;\n       error.404=&quot;errors/error_404.html&quot; showReport=&quot;false&quot;\n       showServerInfo=&quot;false&quot; /&gt;\n</code></pre>\n<p>error.404 -&gt; error<strong>Code</strong>.404</p>\n<p>error.400 -&gt; error<strong>Code</strong>.400</p>\n<p>Not sure if I read the documentation wrong, or the site I was reading it from had the wrong syntax, but once I changed that, my issues were more or less solved. This not only referred to the error pages in the base <code>/tomcat</code> directory as I wanted, but also allowed referencing to other folders, like <code>/tomcat/webapps</code> for example.</p>\n"}],"owner":{"account_id":18590045,"reputation":229,"user_id":13547487,"display_name":"Erik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1697080501,"creation_date":1696993900,"question_id":77270024,"body_markdown":"Can I put my generic error folder not in the /ROOT folder, but somewhere else?\r\n\r\nI&#39;m running a local Tomcat server (9.0.37) with multiple applications, similar to the folder structure below\r\n```none\r\ntomcat/\r\n      conf/\r\n         web.xml\r\n         server.xml\r\n      webapps/\r\n         ROOT/\r\n           WEB-INF/\r\n         app1/\r\n           META-INF/\r\n           WEB-INF/\r\n              web.xml\r\n         app2/\r\n           META-INF/\r\n           WEB-INF/\r\n              web.xml\r\n```\r\n\r\nI&#39;m trying to create some custom error pages to supersede the default Tomcat ones; generic ones that can be shared by all applications.\r\n\r\nI&#39;ve consulted [a][1] [few][2] [other][3] [examples][4] on this and have created an ```/errors``` folder, containing the HTML for my error pages, as well as modifying the ```tomcat/conf/web.xml```\r\n\r\n```xml\r\n&lt;error-page&gt;\r\n   &lt;error-code&gt;404&lt;/error-code&gt; &lt;!-- Not Found --&gt;\r\n\t&lt;location&gt;/errors/error_404.html&lt;/location&gt;\r\n&lt;/error-page&gt;\r\n```\r\n\r\nand the ```tomcat/conf/server.xml```\r\n\r\n```xml\r\n&lt;Valve className=&quot;org.apache.catalina.valves.ErrorReportValve&quot;\r\n       error.400=&quot;errors/error_400.html&quot;\r\n       error.404=&quot;errors/error_404.html&quot; showReport=&quot;false&quot;\r\n       showServerInfo=&quot;false&quot; /&gt;\r\n```\r\n\r\nThe issue here is that after deployment and simulating a 404 error, I get something alone the lines of &quot;Page Not Found&quot;.\r\n\r\nMy ```/errors``` folder was initially parked under ```tomcat/``` (basically, on the same level as ```conf/```), but I moved it around to try and figure out the cause of this issue.\r\n\r\nAfter moving around the path of my folder, it turns out that the settings in the two XML files(or at least, based on ```conf/web.xml``` from what I&#39;m seeing) seems to be pointing towards to ```conf/webapps/ROOT/errors```. \r\n\r\nIn other words, it works if I add my ```/errors``` folder to ```conf/webapps/ROOT/```. This is consistent with the answers I found above.\r\n\r\nThis is not what I want. I do not want my error folder to be in the ROOT folder, but in another more generic path, as mentioned above under ```/tomcat```\r\n\r\nI had even tried something like the full path itself\r\n\r\n```xml\r\n&lt;error-page&gt;\r\n    &lt;error-code&gt;404&lt;/error-code&gt; &lt;!-- Not Found --&gt;\r\n    &lt;location&gt;/apache-tomcat-9.0.37/webapps/errors/error_404.html&lt;/location&gt;\r\n&lt;/error-page&gt;\r\n```\r\n\r\nand I still get the &#39;Page not Found&#39; error.\r\n\r\nI also had tried, as per one of the answers linked above, starting the path with ```./```\r\n\r\n```xml\r\n&lt;error-page&gt;\r\n     &lt;error-code&gt;404&lt;/error-code&gt; &lt;!-- Not Found --&gt;\r\n     &lt;location&gt;./errors/error_404.html&lt;/location&gt;\r\n&lt;/error-page&gt;\r\n```\r\n\r\nand all I got was the server complaining that the URL must start with a forward slash(&#39;/&#39;).\r\n\r\nTrying ```/../errors/error_404.html``` didn&#39;t really help either.\r\n\r\nWhere am I going wrong?\r\n\r\n  [1]: https://serverfault.com/questions/254102/custom-error-pages-on-apache-tomcat\r\n  [2]: https://stackoverflow.com/questions/47869500/apache-tomcats-error-page\r\n  [3]: https://stackoverflow.com/questions/13914575/how-to-build-server-level-custom-error-page-in-tomcat\r\n  [4]: https://rajesh-w61.medium.com/custom-error-pages-apache-tomcat-2aee835d81bc","title":"Create Tomcat custom error pages, but not in ROOT","body":"<p>Can I put my generic error folder not in the /ROOT folder, but somewhere else?</p>\n<p>I'm running a local Tomcat server (9.0.37) with multiple applications, similar to the folder structure below</p>\n<pre class=\"lang-none prettyprint-override\"><code>tomcat/\n      conf/\n         web.xml\n         server.xml\n      webapps/\n         ROOT/\n           WEB-INF/\n         app1/\n           META-INF/\n           WEB-INF/\n              web.xml\n         app2/\n           META-INF/\n           WEB-INF/\n              web.xml\n</code></pre>\n<p>I'm trying to create some custom error pages to supersede the default Tomcat ones; generic ones that can be shared by all applications.</p>\n<p>I've consulted <a href=\"https://serverfault.com/questions/254102/custom-error-pages-on-apache-tomcat\">a</a> <a href=\"https://stackoverflow.com/questions/47869500/apache-tomcats-error-page\">few</a> <a href=\"https://stackoverflow.com/questions/13914575/how-to-build-server-level-custom-error-page-in-tomcat\">other</a> <a href=\"https://rajesh-w61.medium.com/custom-error-pages-apache-tomcat-2aee835d81bc\" rel=\"nofollow noreferrer\">examples</a> on this and have created an <code>/errors</code> folder, containing the HTML for my error pages, as well as modifying the <code>tomcat/conf/web.xml</code></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;error-page&gt;\n   &lt;error-code&gt;404&lt;/error-code&gt; &lt;!-- Not Found --&gt;\n    &lt;location&gt;/errors/error_404.html&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n<p>and the <code>tomcat/conf/server.xml</code></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Valve className=&quot;org.apache.catalina.valves.ErrorReportValve&quot;\n       error.400=&quot;errors/error_400.html&quot;\n       error.404=&quot;errors/error_404.html&quot; showReport=&quot;false&quot;\n       showServerInfo=&quot;false&quot; /&gt;\n</code></pre>\n<p>The issue here is that after deployment and simulating a 404 error, I get something alone the lines of &quot;Page Not Found&quot;.</p>\n<p>My <code>/errors</code> folder was initially parked under <code>tomcat/</code> (basically, on the same level as <code>conf/</code>), but I moved it around to try and figure out the cause of this issue.</p>\n<p>After moving around the path of my folder, it turns out that the settings in the two XML files(or at least, based on <code>conf/web.xml</code> from what I'm seeing) seems to be pointing towards to <code>conf/webapps/ROOT/errors</code>.</p>\n<p>In other words, it works if I add my <code>/errors</code> folder to <code>conf/webapps/ROOT/</code>. This is consistent with the answers I found above.</p>\n<p>This is not what I want. I do not want my error folder to be in the ROOT folder, but in another more generic path, as mentioned above under <code>/tomcat</code></p>\n<p>I had even tried something like the full path itself</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;error-page&gt;\n    &lt;error-code&gt;404&lt;/error-code&gt; &lt;!-- Not Found --&gt;\n    &lt;location&gt;/apache-tomcat-9.0.37/webapps/errors/error_404.html&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n<p>and I still get the 'Page not Found' error.</p>\n<p>I also had tried, as per one of the answers linked above, starting the path with <code>./</code></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;error-page&gt;\n     &lt;error-code&gt;404&lt;/error-code&gt; &lt;!-- Not Found --&gt;\n     &lt;location&gt;./errors/error_404.html&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n<p>and all I got was the server complaining that the URL must start with a forward slash('/').</p>\n<p>Trying <code>/../errors/error_404.html</code> didn't really help either.</p>\n<p>Where am I going wrong?</p>\n"},{"tags":["java","text","printwriter"],"answers":[{"tags":[],"owner":{"account_id":3768354,"reputation":7981,"user_id":3131203,"accept_rate":50,"display_name":"keshlam"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1394904082,"creation_date":1394904082,"answer_id":22427153,"question_id":22427094,"body_markdown":"If you want to add to a file&#39;s contents, you need to explicitly open the file for append; the default in most languages is overwrite.\r\n\r\nTo do so in Java, use `new FileWriter(&quot;myfile.txt&quot;, true)`. You can then wrap a PrintWriter around that if desired. ","title":"PrintWriter deleting old contents of a txt file when writing","body":"<p>If you want to add to a file's contents, you need to explicitly open the file for append; the default in most languages is overwrite.</p>\n\n<p>To do so in Java, use <code>new FileWriter(\"myfile.txt\", true)</code>. You can then wrap a PrintWriter around that if desired. </p>\n"},{"tags":[],"owner":{"account_id":23549034,"reputation":71,"user_id":17592044,"display_name":"Nnamdi "},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697078672,"creation_date":1697078672,"answer_id":77277393,"question_id":22427094,"body_markdown":"Doing something like:\r\n```\r\nFileWriter fileWriterName = new FileWriter(&quot;myfile.txt&quot;, true);\r\nPrintWriter printWriterName = new PrintWriter(fileWriterName);\r\n```\r\nshould work. \r\n\r\nCalling \r\n```\r\nprintWriterName.println(&quot;Hello&quot;); \r\n```\r\nshould add a &quot;Hello&quot; line to myfile.txt without erasing what was there before.\r\n\r\nthanks @keshlam","title":"PrintWriter deleting old contents of a txt file when writing","body":"<p>Doing something like:</p>\n<pre><code>FileWriter fileWriterName = new FileWriter(&quot;myfile.txt&quot;, true);\nPrintWriter printWriterName = new PrintWriter(fileWriterName);\n</code></pre>\n<p>should work.</p>\n<p>Calling</p>\n<pre><code>printWriterName.println(&quot;Hello&quot;); \n</code></pre>\n<p>should add a &quot;Hello&quot; line to myfile.txt without erasing what was there before.</p>\n<p>thanks @keshlam</p>\n"}],"owner":{"account_id":3088412,"reputation":145,"user_id":2615107,"display_name":"Geoffroi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8310,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":22427153,"answer_count":2,"score":3,"last_activity_date":1697078672,"creation_date":1394903790,"question_id":22427094,"body_markdown":"So lets say I have a txt file that I want to write to with a PrintWriter. How come the following code deletes the old contents of the file everytime its called?\r\n\r\nCode: \r\n\r\n    import java.io.File;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.PrintWriter;\r\n    \r\n    public class Test {\r\n\t    \r\n\t    public static void main(String[] args) {\r\n\t\t    writeToFile(&quot;foo&quot;);\r\n\t\t    writeToFile(&quot;bar&quot;);\r\n\t    }\r\n\t    \r\n\t    public static void writeToFile(String text) {\r\n\t\t    try {\r\n\t\t\t    PrintWriter printer = new PrintWriter(new File(&quot;myTextFile.txt&quot;));\r\n\t\t\t    printer.println(&quot;Your text is:&quot; + text);\r\n\t\t\t    printer.close();\r\n\t\t    } catch (FileNotFoundException fnfe) {\r\n\t\t\t    fnfe.printStackTrace();\r\n\t   \t    }\r\n\t    }\r\n    \t\r\n    }\r\n\r\nOutput:\r\n\r\n    Your text is:bar\r\n\r\nI&#39;m guessing its something to do with the fact that I&#39;m creating a new PrintWriter or a new File every time the method is being called, but having only one instance being created in the main method failed to work as well.","title":"PrintWriter deleting old contents of a txt file when writing","body":"<p>So lets say I have a txt file that I want to write to with a PrintWriter. How come the following code deletes the old contents of the file everytime its called?</p>\n\n<p>Code: </p>\n\n<pre><code>import java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.PrintWriter;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        writeToFile(\"foo\");\n        writeToFile(\"bar\");\n    }\n\n    public static void writeToFile(String text) {\n        try {\n            PrintWriter printer = new PrintWriter(new File(\"myTextFile.txt\"));\n            printer.println(\"Your text is:\" + text);\n            printer.close();\n        } catch (FileNotFoundException fnfe) {\n            fnfe.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Your text is:bar\n</code></pre>\n\n<p>I'm guessing its something to do with the fact that I'm creating a new PrintWriter or a new File every time the method is being called, but having only one instance being created in the main method failed to work as well.</p>\n"},{"tags":["java","methods","javadoc"],"comments":[{"owner":{"account_id":105525,"reputation":32628,"user_id":281545,"accept_rate":85,"display_name":"Mr_and_Mrs_D"},"score":5,"creation_date":1379684388,"post_id":5011291,"comment_id":27929818,"body_markdown":"_put `@see` in `MethodB`&#39;s javadoc and reference `MethodA` because that is what called it_ --&gt; How would be ever possible to know all methods which call one of your methods ? Even if this is possible (say a private method used only once) linking from callee to caller sounds at least weird...","body":"<i>put <code>@see</code> in <code>MethodB</code>&#39;s javadoc and reference <code>MethodA</code> because that is what called it</i> --&gt; How would be ever possible to know all methods which call one of your methods ? Even if this is possible (say a private method used only once) linking from callee to caller sounds at least weird..."},{"owner":{"account_id":4589337,"reputation":230,"user_id":3760459,"display_name":"stackexchanger"},"score":1,"creation_date":1471966230,"post_id":5011291,"comment_id":65557430,"body_markdown":"It means what it usually means in English: https://www.oxforddictionaries.com/us/definition/american_english/see (definition 1.4)","body":"It means what it usually means in English: <a href=\"https://www.oxforddictionaries.com/us/definition/american_english/see\" rel=\"nofollow noreferrer\">oxforddictionaries.com/us/definition/american_english/see</a> (definition 1.4)"}],"answers":[{"tags":[],"owner":{"account_id":132399,"reputation":1349,"user_id":333068,"accept_rate":50,"display_name":"Rob Dawson"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1297817483,"creation_date":1297817483,"answer_id":5011339,"question_id":5011291,"body_markdown":"@see is useful for information about related methods/classes in an API.  It will produce a link to the referenced method/code on the documentation.  Use it when there is related code that might help the user understand how to use the API.","title":"Usage of @see in JavaDoc?","body":"<p>@see is useful for information about related methods/classes in an API.  It will produce a link to the referenced method/code on the documentation.  Use it when there is related code that might help the user understand how to use the API.</p>\n"},{"tags":[],"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"down_vote_count":0,"up_vote_count":146,"is_accepted":true,"score":146,"last_activity_date":1697077397,"creation_date":1297849210,"answer_id":5014784,"question_id":5011291,"body_markdown":"Yeah, it is quite vague.\r\n\r\nYou should use it whenever it may be useful for readers of the documentation of your method to also look at some other method. If the documentation of your methodA says &quot;Works like methodB but ...&quot;, then you surely should put a link.\r\n\r\nAn alternative to `@see` would be the inline `{@link ...}` tag:\r\n\r\n    /**\r\n     * ...\r\n     * Works like {@link #methodB}, but ...\r\n     */\r\n\r\nWhen the fact that methodA calls methodB is an implementation detail and there is no real relation from the outside, you don&#39;t need a link here.","title":"Usage of @see in JavaDoc?","body":"<p>Yeah, it is quite vague.</p>\n<p>You should use it whenever it may be useful for readers of the documentation of your method to also look at some other method. If the documentation of your methodA says &quot;Works like methodB but ...&quot;, then you surely should put a link.</p>\n<p>An alternative to <code>@see</code> would be the inline <code>{@link ...}</code> tag:</p>\n<pre><code>/**\n * ...\n * Works like {@link #methodB}, but ...\n */\n</code></pre>\n<p>When the fact that methodA calls methodB is an implementation detail and there is no real relation from the outside, you don't need a link here.</p>\n"},{"tags":[],"owner":{"account_id":1039075,"reputation":949,"user_id":1045538,"accept_rate":86,"display_name":"AtomHeartFather"},"down_vote_count":2,"up_vote_count":15,"is_accepted":false,"score":13,"last_activity_date":1405495120,"creation_date":1381261215,"answer_id":19256806,"question_id":5011291,"body_markdown":"A good example of a situation when `@see` can be useful would be implementing or overriding an interface/abstract class method. The declaration would have `javadoc` section detailing the method and the overridden/implemented method could use a `@see` tag, referring to the base one.\r\n\r\nRelated question:\r\nhttps://stackoverflow.com/questions/11121600/writing-proper-javadoc-with-see\r\n\r\nJava SE documentation: [`@see`][1]\r\n\r\n[1]: http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javadoc.html#see","title":"Usage of @see in JavaDoc?","body":"<p>A good example of a situation when <code>@see</code> can be useful would be implementing or overriding an interface/abstract class method. The declaration would have <code>javadoc</code> section detailing the method and the overridden/implemented method could use a <code>@see</code> tag, referring to the base one.</p>\n\n<p>Related question:\n<a href=\"https://stackoverflow.com/questions/11121600/writing-proper-javadoc-with-see\">Writing proper javadoc with @see?</a></p>\n\n<p>Java SE documentation: <a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javadoc.html#see\" rel=\"noreferrer\"><code>@see</code></a></p>\n"},{"tags":[],"owner":{"account_id":5631059,"reputation":480,"user_id":4458013,"display_name":"Maruthi"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1432969251,"creation_date":1432969251,"answer_id":30543313,"question_id":5011291,"body_markdown":"I use @see to annotate methods of an interface implementation class where the description of the method is already provided in the javadoc of the interface. When we do that I notice that Eclipse pulls up the interface&#39;s documentation even when I am looking up method on the implementation reference during code complete","title":"Usage of @see in JavaDoc?","body":"<p>I use @see to annotate methods of an interface implementation class where the description of the method is already provided in the javadoc of the interface. When we do that I notice that Eclipse pulls up the interface's documentation even when I am looking up method on the implementation reference during code complete</p>\n"},{"tags":[],"owner":{"account_id":1852061,"reputation":1950,"user_id":1678392,"accept_rate":93,"display_name":"nikodaemus"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1619710521,"creation_date":1609356282,"answer_id":65512494,"question_id":5011291,"body_markdown":"The `@see` tag is a bit different than the `@link` tag,&lt;br /&gt;\r\nlimited in some ways and more flexible in others.&lt;br /&gt;\r\nThe following examples are from Eclipse:\r\n\r\n[![different JavaDoc link types][1]][1]\r\n&lt;sup&gt;*Different JavaDoc link types*&lt;/sup&gt;\r\n\r\n 1. Displays the member name for better learning, and is refactorable; the name will update when renaming by refactor\r\n 2. Refactorable and customizable; your text is displayed instead of the member name\r\n 3. Displays name, refactorable\r\n 4. Refactorable, customizable\r\n 5. A rather *mediocre* combination that is:\r\n   * Refactorable, customizable, and stays in the **See Also** section\r\n   * Displays nicely in the Eclipse hover\r\n   * Displays the link tag and its formatting when generated &#128542;\r\n   * When using multiple `@see` items, commas in the description make the output confusing\r\n 6. **Completely illegal**; causes unexpected content and illegal character errors in the generator\r\n\r\nSee the results below:\r\n\r\n[![JavaDoc generation results with different link types][2]][2]\r\n&lt;sup&gt;*JavaDoc generation results with different link types*&lt;/sup&gt;\r\n\r\nBest regards.\r\n\r\n  [1]: https://i.stack.imgur.com/5W2KP.png\r\n  [2]: https://i.stack.imgur.com/HN8wC.png","title":"Usage of @see in JavaDoc?","body":"<p>The <code>@see</code> tag is a bit different than the <code>@link</code> tag,<br />\nlimited in some ways and more flexible in others.<br />\nThe following examples are from Eclipse:</p>\n<p><a href=\"https://i.stack.imgur.com/5W2KP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5W2KP.png\" alt=\"different JavaDoc link types\" /></a>\n<sup><em>Different JavaDoc link types</em></sup></p>\n<ol>\n<li>Displays the member name for better learning, and is refactorable; the name will update when renaming by refactor</li>\n<li>Refactorable and customizable; your text is displayed instead of the member name</li>\n<li>Displays name, refactorable</li>\n<li>Refactorable, customizable</li>\n<li>A rather <em>mediocre</em> combination that is:</li>\n</ol>\n<ul>\n<li>Refactorable, customizable, and stays in the <strong>See Also</strong> section</li>\n<li>Displays nicely in the Eclipse hover</li>\n<li>Displays the link tag and its formatting when generated 😞</li>\n<li>When using multiple <code>@see</code> items, commas in the description make the output confusing</li>\n</ul>\n<ol start=\"6\">\n<li><strong>Completely illegal</strong>; causes unexpected content and illegal character errors in the generator</li>\n</ol>\n<p>See the results below:</p>\n<p><a href=\"https://i.stack.imgur.com/HN8wC.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HN8wC.png\" alt=\"JavaDoc generation results with different link types\" /></a>\n<sup><em>JavaDoc generation results with different link types</em></sup></p>\n<p>Best regards.</p>\n"}],"owner":{"account_id":604895,"reputation":2017,"user_id":314681,"accept_rate":56,"display_name":"Jeff"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":208867,"favorite_count":0,"down_vote_count":1,"up_vote_count":137,"accepted_answer_id":5014784,"answer_count":5,"score":136,"last_activity_date":1697077397,"creation_date":1297817118,"question_id":5011291,"body_markdown":"When do I use `@see` when dealing with JavaDocs? What is its usage?\r\n\r\nFor example if `MethodA` calls `MethodB` then do I have to put `@see` in `MethodB`&#39;s javadoc and reference `MethodA` because that is what called it, or do I have to put a reference to `MethodB` from `MethodA` because it&#39;s calling it. I&#39;ve read the stuff about `@see` on the Oracle website and it seems to me to be incredibly vague, it says it means &quot;see also&quot; but not really what that means!","title":"Usage of @see in JavaDoc?","body":"<p>When do I use <code>@see</code> when dealing with JavaDocs? What is its usage?</p>\n\n<p>For example if <code>MethodA</code> calls <code>MethodB</code> then do I have to put <code>@see</code> in <code>MethodB</code>'s javadoc and reference <code>MethodA</code> because that is what called it, or do I have to put a reference to <code>MethodB</code> from <code>MethodA</code> because it's calling it. I've read the stuff about <code>@see</code> on the Oracle website and it seems to me to be incredibly vague, it says it means \"see also\" but not really what that means!</p>\n"},{"tags":["java","hyperlink","javadoc"],"comments":[{"owner":{"account_id":332245,"reputation":16487,"user_id":657427,"accept_rate":67,"display_name":"Christophe Roussy"},"score":32,"creation_date":1394035008,"post_id":5915992,"comment_id":33706027,"body_markdown":"I know this is a few years ago but... looking at the official Java classes can help find any form of Javadoc formatting you need. For example look at the HashMap Javadoc.","body":"I know this is a few years ago but... looking at the official Java classes can help find any form of Javadoc formatting you need. For example look at the HashMap Javadoc."}],"answers":[{"tags":[],"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"down_vote_count":2,"up_vote_count":882,"is_accepted":false,"score":880,"last_activity_date":1633551135,"creation_date":1304709474,"answer_id":5916021,"question_id":5915992,"body_markdown":"The general format, from the [@link section of the javadoc documentation][1], is:\r\n\r\n[![{@link package.class#member label}][3]][3]\r\n\r\n&lt;h1&gt;Examples&lt;/h1&gt;\r\n\r\n**Method in the same class:**\r\n\r\n&lt;!-- language-all: lang-none --&gt;\r\n\r\n    /** See also {@link #myMethod(String)}. */\r\n    void foo() { ... }\r\n\r\n**Method in a *different class,*** either in the same package or imported:\r\n\r\n&lt;!-- language-all: lang-none --&gt;\r\n\r\n    /** See also {@link MyOtherClass#myMethod(String)}. */\r\n    void foo() { ... }\r\n\r\n**Method in a *different package*** and not imported:\r\n\r\n&lt;!-- language-all: lang-none --&gt;\r\n\r\n    /** See also {@link com.mypackage.YetAnotherClass#myMethod(String)}. */\r\n    void foo() { ... }\r\n\r\n**Label linked to method, in plain text** rather than code font:\r\n\r\n&lt;!-- language-all: lang-none --&gt;\r\n\r\n    /** See also this {@linkplain #myMethod(String) implementation}. */\r\n    void foo() { ... }\r\n\r\n**A chain of method calls,** as in your question. We have to specify labels for the links to methods outside this class, or we get &lt;code&gt;getFoo().Foo.getBar().Bar.getBaz()&lt;/code&gt;. But these labels can be fragile during refactoring -- see &quot;Labels&quot; below.\r\n\r\n&lt;!-- language-all: lang-none --&gt;\r\n\r\n    /**\r\n     * A convenience method, equivalent to \r\n     * {@link #getFoo()}.{@link Foo#getBar() getBar()}.{@link Bar#getBaz() getBaz()}.\r\n     * @return baz\r\n     */\r\n    public Baz fooBarBaz()\r\n\r\n&lt;h1&gt;Labels&lt;/h1&gt;\r\n\r\n**Automated refactoring may not affect labels.** This includes renaming the method, class or package; and changing the method signature.\r\n\r\n**Therefore, provide a label *only* if you want different text than the default.** \r\n\r\nFor example, you might link from human language to code:\r\n\r\n&lt;!-- language-all: lang-none --&gt;\r\n\r\n\t/** You can also {@linkplain #getFoo() get the current foo}. */\r\n    void setFoo( Foo foo ) { ... }\r\n\r\nOr you might link from a code sample with text different than the default, as shown above under &quot;A chain of method calls.&quot; However, this can be fragile while APIs are evolving. \r\n\r\n&lt;h1&gt;Type erasure and #member&lt;/h1&gt;\r\n\r\nIf the method signature includes parameterized types, use the erasure of those types in the javadoc @link. For example:\r\n\r\n    int bar( Collection&lt;Integer&gt; receiver ) { ... }\r\n\r\n    /** See also {@link #bar(Collection)}. */\r\n    void foo() { ... }\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/specs/javadoc/doc-comment-spec.html#link\r\n  [3]: http://i.stack.imgur.com/HGVDj.png","title":"How to reference a method in javadoc?","body":"<p>The general format, from the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/javadoc/doc-comment-spec.html#link\" rel=\"noreferrer\">@link section of the javadoc documentation</a>, is:</p>\n<p><a href=\"https://i.stack.imgur.com/HGVDj.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HGVDj.png\" alt=\"{@link package.class#member label}\" /></a></p>\n<h1>Examples</h1>\n<p><strong>Method in the same class:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/** See also {@link #myMethod(String)}. */\nvoid foo() { ... }\n</code></pre>\n<p><strong>Method in a <em>different class,</em></strong> either in the same package or imported:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/** See also {@link MyOtherClass#myMethod(String)}. */\nvoid foo() { ... }\n</code></pre>\n<p><strong>Method in a <em>different package</em></strong> and not imported:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/** See also {@link com.mypackage.YetAnotherClass#myMethod(String)}. */\nvoid foo() { ... }\n</code></pre>\n<p><strong>Label linked to method, in plain text</strong> rather than code font:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/** See also this {@linkplain #myMethod(String) implementation}. */\nvoid foo() { ... }\n</code></pre>\n<p><strong>A chain of method calls,</strong> as in your question. We have to specify labels for the links to methods outside this class, or we get <code>getFoo().Foo.getBar().Bar.getBaz()</code>. But these labels can be fragile during refactoring -- see &quot;Labels&quot; below.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/**\n * A convenience method, equivalent to \n * {@link #getFoo()}.{@link Foo#getBar() getBar()}.{@link Bar#getBaz() getBaz()}.\n * @return baz\n */\npublic Baz fooBarBaz()\n</code></pre>\n<h1>Labels</h1>\n<p><strong>Automated refactoring may not affect labels.</strong> This includes renaming the method, class or package; and changing the method signature.</p>\n<p><strong>Therefore, provide a label <em>only</em> if you want different text than the default.</strong></p>\n<p>For example, you might link from human language to code:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/** You can also {@linkplain #getFoo() get the current foo}. */\nvoid setFoo( Foo foo ) { ... }\n</code></pre>\n<p>Or you might link from a code sample with text different than the default, as shown above under &quot;A chain of method calls.&quot; However, this can be fragile while APIs are evolving.</p>\n<h1>Type erasure and #member</h1>\n<p>If the method signature includes parameterized types, use the erasure of those types in the javadoc @link. For example:</p>\n<pre class=\"lang-none prettyprint-override\"><code>int bar( Collection&lt;Integer&gt; receiver ) { ... }\n\n/** See also {@link #bar(Collection)}. */\nvoid foo() { ... }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":152633,"reputation":48303,"user_id":367285,"accept_rate":81,"display_name":"FrVaBe"},"down_vote_count":2,"up_vote_count":1282,"is_accepted":true,"score":1280,"last_activity_date":1697077056,"creation_date":1304709902,"answer_id":5916098,"question_id":5915992,"body_markdown":"You will find much information about JavaDoc at the _[Documentation Comment Specification for the Standard Doclet][1]_, including the information on the \r\n\r\n&gt; **[{@link module/package.class#member  label}][2]**\r\n\r\ntag (that you are looking for). The corresponding example from the documentation is as follows\r\n\r\n&gt; For example, here is a comment that refers to the getComponentAt(int, int) method:\r\n&gt;\r\n&gt; `Use the {@link #getComponentAt(int, int) getComponentAt} method.`\r\n\r\nThe `module/package.class` part can be ommited if the referred method is in the current class.\r\n\r\n----------\r\nOther useful links about JavaDoc are:\r\n\r\n - [JDK 17 Tool Specifications - The javadoc Command][3]\r\n - [JavaDoc Guide][4]\r\n - [How to Write Doc Comments for the Javadoc Tool][5] \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/specs/javadoc/doc-comment-spec.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/specs/javadoc/doc-comment-spec.html#link\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/specs/man/javadoc.html\r\n  [4]: https://docs.oracle.com/en/java/javase/17/javadoc/javadoc.html\r\n  [5]: https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html","title":"How to reference a method in javadoc?","body":"<p>You will find much information about JavaDoc at the <em><a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/javadoc/doc-comment-spec.html\" rel=\"nofollow noreferrer\">Documentation Comment Specification for the Standard Doclet</a></em>, including the information on the</p>\n<blockquote>\n<p><strong><a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/javadoc/doc-comment-spec.html#link\" rel=\"nofollow noreferrer\">{@link module/package.class#member  label}</a></strong></p>\n</blockquote>\n<p>tag (that you are looking for). The corresponding example from the documentation is as follows</p>\n<blockquote>\n<p>For example, here is a comment that refers to the getComponentAt(int, int) method:</p>\n<p><code>Use the {@link #getComponentAt(int, int) getComponentAt} method.</code></p>\n</blockquote>\n<p>The <code>module/package.class</code> part can be ommited if the referred method is in the current class.</p>\n<hr />\n<p>Other useful links about JavaDoc are:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/javadoc.html\" rel=\"nofollow noreferrer\">JDK 17 Tool Specifications - The javadoc Command</a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/javadoc/javadoc.html\" rel=\"nofollow noreferrer\">JavaDoc Guide</a></li>\n<li><a href=\"https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html\" rel=\"nofollow noreferrer\">How to Write Doc Comments for the Javadoc Tool</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3516368,"reputation":6373,"user_id":2939690,"accept_rate":17,"display_name":"vuhung3990"},"down_vote_count":2,"up_vote_count":20,"is_accepted":false,"score":18,"last_activity_date":1484187438,"creation_date":1484187438,"answer_id":41604072,"question_id":5915992,"body_markdown":"you can use `@see` to do that:\r\n\r\nsample: \r\n\r\n    interface View {\r\n            /**\r\n             * @return true: have read contact and call log permissions, else otherwise\r\n             * @see #requestReadContactAndCallLogPermissions()\r\n             */\r\n            boolean haveReadContactAndCallLogPermissions();\r\n    \r\n            /**\r\n             * if not have permissions, request to user for allow\r\n             * @see #haveReadContactAndCallLogPermissions()\r\n             */\r\n            void requestReadContactAndCallLogPermissions();\r\n        }","title":"How to reference a method in javadoc?","body":"<p>you can use <code>@see</code> to do that:</p>\n\n<p>sample: </p>\n\n<pre><code>interface View {\n        /**\n         * @return true: have read contact and call log permissions, else otherwise\n         * @see #requestReadContactAndCallLogPermissions()\n         */\n        boolean haveReadContactAndCallLogPermissions();\n\n        /**\n         * if not have permissions, request to user for allow\n         * @see #haveReadContactAndCallLogPermissions()\n         */\n        void requestReadContactAndCallLogPermissions();\n    }\n</code></pre>\n"}],"owner":{"account_id":19061,"reputation":185736,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":585369,"favorite_count":0,"down_vote_count":0,"up_vote_count":1007,"accepted_answer_id":5916098,"answer_count":3,"score":1007,"last_activity_date":1697077056,"creation_date":1304709305,"question_id":5915992,"body_markdown":"How can I use the `@link` tag to link to a method?\r\n\r\nI want to change:\r\n\r\n    /**\r\n     * Returns the Baz object owned by the Bar object owned by Foo owned by this.\r\n     * A convenience method, equivalent to getFoo().getBar().getBaz()\r\n     * @return baz\r\n     */\r\n    public Baz fooBarBaz()\r\n\r\n**to:**\r\n\r\n    /**\r\n     * Returns the Baz object owned by the Bar object owned by Foo owned by this.\r\n     * A convenience method, equivalent to {@link getFoo()}.{@link getBar()}.{@link getBaz()}\r\n     * @return baz\r\n     */\r\n    public Baz fooBarBaz()\r\n\r\nbut I don&#39;t know how to format the `@link` tag correctly.","title":"How to reference a method in javadoc?","body":"<p>How can I use the <code>@link</code> tag to link to a method?</p>\n\n<p>I want to change:</p>\n\n<pre><code>/**\n * Returns the Baz object owned by the Bar object owned by Foo owned by this.\n * A convenience method, equivalent to getFoo().getBar().getBaz()\n * @return baz\n */\npublic Baz fooBarBaz()\n</code></pre>\n\n<p><strong>to:</strong></p>\n\n<pre><code>/**\n * Returns the Baz object owned by the Bar object owned by Foo owned by this.\n * A convenience method, equivalent to {@link getFoo()}.{@link getBar()}.{@link getBaz()}\n * @return baz\n */\npublic Baz fooBarBaz()\n</code></pre>\n\n<p>but I don't know how to format the <code>@link</code> tag correctly.</p>\n"},{"tags":["java","spring","spring-boot","netflix-eureka","graalvm-native-image"],"answers":[{"tags":[],"owner":{"account_id":26927495,"reputation":1,"user_id":20500521,"display_name":"Vahid Ramezani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696945064,"creation_date":1696945064,"answer_id":77266296,"question_id":77262813,"body_markdown":"Try specifying the health endpoint properties to include only the health indicators that you need. You can add the following configurations to your application.yaml:\r\n\r\n```\r\nmanagement:\r\n  ...\r\n  health:\r\n    diskspace:\r\n      enabled: true\r\n    db:\r\n      enabled: true\r\n    ...\r\n```","title":"UnsatisfiedDependencyException: Error creating bean with name &#39;healthContributorRegistry&#39; when using GraalVM native image","body":"<p>Try specifying the health endpoint properties to include only the health indicators that you need. You can add the following configurations to your application.yaml:</p>\n<pre><code>management:\n  ...\n  health:\n    diskspace:\n      enabled: true\n    db:\n      enabled: true\n    ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25207018,"reputation":63,"user_id":19045208,"display_name":"Tallen67"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697076869,"creation_date":1697076869,"answer_id":77277314,"question_id":77262813,"body_markdown":"What seemed to solve the problem in my case was to add `spring.cloud.refresh.enabled=false`","title":"UnsatisfiedDependencyException: Error creating bean with name &#39;healthContributorRegistry&#39; when using GraalVM native image","body":"<p>What seemed to solve the problem in my case was to add <code>spring.cloud.refresh.enabled=false</code></p>\n"}],"owner":{"account_id":25207018,"reputation":63,"user_id":19045208,"display_name":"Tallen67"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697076869,"creation_date":1696909280,"question_id":77262813,"body_markdown":"I&#39;m using Spring 3.1.2 and can successfully deploy a very simple REST application in a k8s cluster using a JAR file. The application is registering with an Eureka server and works just fine if I deploy as a JAR file.\r\n\r\nNow the problem is that when I compile the application using `mvn clean -Pnative native:compile` and deploy the same application I get the following errors in the logfile:\r\n\r\n```log\r\n\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v3.1.2)\r\n\r\n2023-10-09T22:33:25.141-05:00  INFO 30700 --- [           main] c.e.creditscore.CreditscoreApplication   : Starting AOT-processed CreditscoreApplication using Java 17.0.8 with PID 30700 (/Users/atael/Documents/GitHub/microservices-datadriven/cloudbank-v2/spring-apps-spring3/creditscore/target/creditscore started by atael in /Users/atael/Documents/GitHub/microservices-datadriven/cloudbank-v2/spring-apps-spring3/creditscore/target)\r\n2023-10-09T22:33:25.142-05:00  INFO 30700 --- [           main] c.e.creditscore.CreditscoreApplication   : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-10-09T22:33:25.144-05:00  INFO 30700 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=368d3e47-1089-3f9a-85bc-0c3f5dcda5ab\r\n2023-10-09T22:33:25.162-05:00  INFO 30700 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2023-10-09T22:33:25.163-05:00  INFO 30700 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-10-09T22:33:25.163-05:00  INFO 30700 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.11]\r\n2023-10-09T22:33:25.170-05:00  INFO 30700 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-10-09T22:33:25.170-05:00  INFO 30700 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 28 ms\r\n2023-10-09T22:33:25.195-05:00  WARN 30700 --- [           main] w.s.c.ServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;healthContributorRegistry&#39;: Unsatisfied dependency expressed through method &#39;healthContributorRegistry&#39; parameter 2: Error creating bean with name &#39;discoveryCompositeHealthContributor&#39;: Unsatisfied dependency expressed through method &#39;discoveryCompositeHealthContributor&#39; parameter 0: Error creating bean with name &#39;eurekaHealthIndicator&#39;: Unsatisfied dependency expressed through method &#39;eurekaHealthIndicator&#39; parameter 0: No qualifying bean of type &#39;com.netflix.discovery.EurekaClient&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n```\r\n\r\nMy pom.xml contains this:\r\n```xml\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\r\n    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nI&#39;m using this version of Java:\r\n```\r\njava version &quot;17.0.8&quot; 2023-07-18 LTS\r\nJava(TM) SE Runtime Environment Oracle GraalVM 17.0.8+9.1 (build 17.0.8+9-LTS-jvmci-23.0-b14)\r\nJava HotSpot(TM) 64-Bit Server VM Oracle GraalVM 17.0.8+9.1 (build 17.0.8+9-LTS-jvmci-23.0-b14, mixed mode, sharing)\r\n```\r\n \r\nAnd this is the application:\r\n\r\n```java\r\npackage com.example.creditscore;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.cloud.client.discovery.EnableDiscoveryClient;\r\n\r\n@EnableDiscoveryClient\r\n@SpringBootApplication\r\npublic class CreditscoreApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(CreditscoreApplication.class, args);\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\npackage com.example.creditscore.controller;\r\n\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport lombok.extern.slf4j.Slf4j;\r\n\r\nimport java.security.SecureRandom;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api/v1&quot;)\r\n@Slf4j\r\npublic class CreditScoreController {\r\n\r\n    @GetMapping(&quot;/creditscore&quot;)\r\n    public Map&lt;String, String&gt; getCreditScore() {\r\n        log.info(&quot;CREDITSCORE: getCreditScore&quot;);\r\n        int max = 900;\r\n        int min = 500;\r\n        SecureRandom secureRandom = new SecureRandom();\r\n        HashMap&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n        map.put(&quot;Credit Score&quot;, String.valueOf(secureRandom.nextInt(max - min) + min));\r\n        map.put(&quot;Date&quot;, String.valueOf(java.time.LocalDate.now()));\r\n        return map;\r\n    }\r\n}\r\n```\r\nAnd the application.yaml looks like this:\r\n```yaml\r\nspring:\r\n  application:\r\n    name: creditscore\r\n  zipkin:\r\n    base-url: ${zipkin.base-url}\r\n\r\neureka:\r\n  instance:\r\n    hostname: ${spring.application.name}\r\n    preferIpAddress: true\r\n  client:\r\n    service-url:\r\n      defaultZone: ${eureka.service-url}\r\n    fetch-registry: true\r\n    register-with-eureka: true\r\n    enabled: true\r\n\r\nmanagement:\r\n  endpoint:\r\n    health:\r\n      show-details: always\r\n  endpoints:\r\n    web:\r\n      exposure:\r\n        include: &quot;*&quot;\r\n  metrics:\r\n    tags:\r\n      application: ${spring.application.name}\r\n```\r\nAnd if I do a kubectl describe deployment I get this information:\r\n```yaml\r\nName:                   creditscore\r\nNamespace:              nativetest\r\nCreationTimestamp:      Mon, 09 Oct 2023 15:53:20 -0500\r\nLabels:                 &lt;none&gt;\r\nAnnotations:            deployment.kubernetes.io/revision: 1\r\nSelector:               app=creditscore\r\nReplicas:               1 desired | 1 updated | 1 total | 0 available | 1 unavailable\r\nStrategyType:           RollingUpdate\r\nMinReadySeconds:        0\r\nRollingUpdateStrategy:  25% max unavailable, 25% max surge\r\nPod Template:\r\n  Labels:  app=creditscore\r\n           version=0.0.1\r\n  Containers:\r\n   creditscore:\r\n    Image:      &lt;notforpublic&gt;\r\n    Port:       8080/TCP\r\n    Host Port:  0/TCP\r\n    Environment:\r\n      app.container.port:                     8080\r\n      spring.profiles.active:                 default\r\n      spring.config.label:                    0.0.1\r\n      eureka.instance.preferIpAddress:        true\r\n      eureka.instance.hostname:               creditscore.nativetest\r\n      MP_LRA_COORDINATOR_URL:                 http://otmm-tcs.otmm.svc.cluster.local:9000/api/v1/lra-coordinator\r\n      MP_LRA_PARTICIPANT_URL:                 http://creditscore.nativetest.svc.cluster.local:8080\r\n      eureka.client.register-with-eureka:     true\r\n      eureka.client.fetch-registry:           true\r\n      eureka.client.service-url.defaultZone:  http://eureka.eureka:8761/eureka\r\n      zipkin.base-url:                        http://jaegertracing-collector.observability:9411\r\n      otel.exporter.otlp.endpoint:            http://open-telemetry-opentelemetry-collector.open-telemetry:4317\r\n      hystrix.metrics.enabled:                true\r\n    Mounts:                                   &lt;none&gt;\r\n  Volumes:                                    &lt;none&gt;\r\nConditions:\r\n  Type           Status  Reason\r\n  ----           ------  ------\r\n  Progressing    True    NewReplicaSetAvailable\r\n  Available      False   MinimumReplicasUnavailable\r\nOldReplicaSets:  &lt;none&gt;\r\nNewReplicaSet:   creditscore-5774cb4757 (1/1 replicas created)\r\nEvents:          &lt;none&gt;\r\n```\r\n\r\nAny great ideas on what I&#39;m doing wrong?","title":"UnsatisfiedDependencyException: Error creating bean with name &#39;healthContributorRegistry&#39; when using GraalVM native image","body":"<p>I'm using Spring 3.1.2 and can successfully deploy a very simple REST application in a k8s cluster using a JAR file. The application is registering with an Eureka server and works just fine if I deploy as a JAR file.</p>\n<p>Now the problem is that when I compile the application using <code>mvn clean -Pnative native:compile</code> and deploy the same application I get the following errors in the logfile:</p>\n<pre><code>\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.1.2)\n\n2023-10-09T22:33:25.141-05:00  INFO 30700 --- [           main] c.e.creditscore.CreditscoreApplication   : Starting AOT-processed CreditscoreApplication using Java 17.0.8 with PID 30700 (/Users/atael/Documents/GitHub/microservices-datadriven/cloudbank-v2/spring-apps-spring3/creditscore/target/creditscore started by atael in /Users/atael/Documents/GitHub/microservices-datadriven/cloudbank-v2/spring-apps-spring3/creditscore/target)\n2023-10-09T22:33:25.142-05:00  INFO 30700 --- [           main] c.e.creditscore.CreditscoreApplication   : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-10-09T22:33:25.144-05:00  INFO 30700 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=368d3e47-1089-3f9a-85bc-0c3f5dcda5ab\n2023-10-09T22:33:25.162-05:00  INFO 30700 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2023-10-09T22:33:25.163-05:00  INFO 30700 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-10-09T22:33:25.163-05:00  INFO 30700 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.11]\n2023-10-09T22:33:25.170-05:00  INFO 30700 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-10-09T22:33:25.170-05:00  INFO 30700 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 28 ms\n2023-10-09T22:33:25.195-05:00  WARN 30700 --- [           main] w.s.c.ServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'healthContributorRegistry': Unsatisfied dependency expressed through method 'healthContributorRegistry' parameter 2: Error creating bean with name 'discoveryCompositeHealthContributor': Unsatisfied dependency expressed through method 'discoveryCompositeHealthContributor' parameter 0: Error creating bean with name 'eurekaHealthIndicator': Unsatisfied dependency expressed through method 'eurekaHealthIndicator' parameter 0: No qualifying bean of type 'com.netflix.discovery.EurekaClient' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n</code></pre>\n<p>My pom.xml contains this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>I'm using this version of Java:</p>\n<pre><code>java version &quot;17.0.8&quot; 2023-07-18 LTS\nJava(TM) SE Runtime Environment Oracle GraalVM 17.0.8+9.1 (build 17.0.8+9-LTS-jvmci-23.0-b14)\nJava HotSpot(TM) 64-Bit Server VM Oracle GraalVM 17.0.8+9.1 (build 17.0.8+9-LTS-jvmci-23.0-b14, mixed mode, sharing)\n</code></pre>\n<p>And this is the application:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.creditscore;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.client.discovery.EnableDiscoveryClient;\n\n@EnableDiscoveryClient\n@SpringBootApplication\npublic class CreditscoreApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(CreditscoreApplication.class, args);\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.creditscore.controller;\n\nimport org.springframework.web.bind.annotation.*;\n\nimport lombok.extern.slf4j.Slf4j;\n\nimport java.security.SecureRandom;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@RestController\n@RequestMapping(&quot;/api/v1&quot;)\n@Slf4j\npublic class CreditScoreController {\n\n    @GetMapping(&quot;/creditscore&quot;)\n    public Map&lt;String, String&gt; getCreditScore() {\n        log.info(&quot;CREDITSCORE: getCreditScore&quot;);\n        int max = 900;\n        int min = 500;\n        SecureRandom secureRandom = new SecureRandom();\n        HashMap&lt;String, String&gt; map = new HashMap&lt;&gt;();\n        map.put(&quot;Credit Score&quot;, String.valueOf(secureRandom.nextInt(max - min) + min));\n        map.put(&quot;Date&quot;, String.valueOf(java.time.LocalDate.now()));\n        return map;\n    }\n}\n</code></pre>\n<p>And the application.yaml looks like this:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  application:\n    name: creditscore\n  zipkin:\n    base-url: ${zipkin.base-url}\n\neureka:\n  instance:\n    hostname: ${spring.application.name}\n    preferIpAddress: true\n  client:\n    service-url:\n      defaultZone: ${eureka.service-url}\n    fetch-registry: true\n    register-with-eureka: true\n    enabled: true\n\nmanagement:\n  endpoint:\n    health:\n      show-details: always\n  endpoints:\n    web:\n      exposure:\n        include: &quot;*&quot;\n  metrics:\n    tags:\n      application: ${spring.application.name}\n</code></pre>\n<p>And if I do a kubectl describe deployment I get this information:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>Name:                   creditscore\nNamespace:              nativetest\nCreationTimestamp:      Mon, 09 Oct 2023 15:53:20 -0500\nLabels:                 &lt;none&gt;\nAnnotations:            deployment.kubernetes.io/revision: 1\nSelector:               app=creditscore\nReplicas:               1 desired | 1 updated | 1 total | 0 available | 1 unavailable\nStrategyType:           RollingUpdate\nMinReadySeconds:        0\nRollingUpdateStrategy:  25% max unavailable, 25% max surge\nPod Template:\n  Labels:  app=creditscore\n           version=0.0.1\n  Containers:\n   creditscore:\n    Image:      &lt;notforpublic&gt;\n    Port:       8080/TCP\n    Host Port:  0/TCP\n    Environment:\n      app.container.port:                     8080\n      spring.profiles.active:                 default\n      spring.config.label:                    0.0.1\n      eureka.instance.preferIpAddress:        true\n      eureka.instance.hostname:               creditscore.nativetest\n      MP_LRA_COORDINATOR_URL:                 http://otmm-tcs.otmm.svc.cluster.local:9000/api/v1/lra-coordinator\n      MP_LRA_PARTICIPANT_URL:                 http://creditscore.nativetest.svc.cluster.local:8080\n      eureka.client.register-with-eureka:     true\n      eureka.client.fetch-registry:           true\n      eureka.client.service-url.defaultZone:  http://eureka.eureka:8761/eureka\n      zipkin.base-url:                        http://jaegertracing-collector.observability:9411\n      otel.exporter.otlp.endpoint:            http://open-telemetry-opentelemetry-collector.open-telemetry:4317\n      hystrix.metrics.enabled:                true\n    Mounts:                                   &lt;none&gt;\n  Volumes:                                    &lt;none&gt;\nConditions:\n  Type           Status  Reason\n  ----           ------  ------\n  Progressing    True    NewReplicaSetAvailable\n  Available      False   MinimumReplicasUnavailable\nOldReplicaSets:  &lt;none&gt;\nNewReplicaSet:   creditscore-5774cb4757 (1/1 replicas created)\nEvents:          &lt;none&gt;\n</code></pre>\n<p>Any great ideas on what I'm doing wrong?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697072099,"post_id":77277087,"comment_id":136234590,"body_markdown":"This is a warning, not an error. Precision please. You haven&#39;t asked an actual question, but the answer to it is contained in the message.","body":"This is a warning, not an error. Precision please. You haven&#39;t asked an actual question, but the answer to it is contained in the message."},{"owner":{"account_id":5613533,"reputation":13,"user_id":4445608,"display_name":"steve"},"score":0,"creation_date":1697160649,"post_id":77277087,"comment_id":136248107,"body_markdown":"Joop Eggen clarity, has really help me format my code...hence resolved","body":"Joop Eggen clarity, has really help me format my code...hence resolved"}],"answers":[{"tags":[],"owner":{"account_id":960307,"reputation":107851,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697076824,"creation_date":1697076824,"answer_id":77277312,"question_id":77277087,"body_markdown":"One can use `Map.of(k0, v0, k1, v1, etc)`.\r\n\r\nType-safe but needing overloads for different number of map entries.\r\n\r\nYour code has the problem that a `String...`/`String[]` is passed as an `Object...`. Which has the ambiguity - unrelated to any actual java rule -, that either one Object is passed with the String array, or every sole String is passed as a separate Object.\r\n\r\nSimply specify\r\n\r\n    &lt;K, V, E /*super K &amp; V*/&gt; toMap(Class&lt;K&gt; keyType, Class&lt;V&gt; valueType, E[] entries) {\r\n\r\nThis allows pervasively passing a String array. I am unsure whether E cannot be more restricted to K and V. Hence out-commented.\r\n","title":"Java Error: non-varargs call of varargs method with inexact argument type for last parameter","body":"<p>One can use <code>Map.of(k0, v0, k1, v1, etc)</code>.</p>\n<p>Type-safe but needing overloads for different number of map entries.</p>\n<p>Your code has the problem that a <code>String...</code>/<code>String[]</code> is passed as an <code>Object...</code>. Which has the ambiguity - unrelated to any actual java rule -, that either one Object is passed with the String array, or every sole String is passed as a separate Object.</p>\n<p>Simply specify</p>\n<pre><code>&lt;K, V, E /*super K &amp; V*/&gt; toMap(Class&lt;K&gt; keyType, Class&lt;V&gt; valueType, E[] entries) {\n</code></pre>\n<p>This allows pervasively passing a String array. I am unsure whether E cannot be more restricted to K and V. Hence out-commented.</p>\n"}],"owner":{"account_id":5613533,"reputation":13,"user_id":4445608,"display_name":"steve"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77277312,"answer_count":1,"score":-1,"last_activity_date":1697076824,"creation_date":1697071517,"question_id":77277087,"body_markdown":"I get this warning message for the java below class code: \r\n\r\n&lt;b&gt;Error message:&lt;/b&gt; non-varargs call of varargs method with inexact argument type for last parameter;\r\n  cast to java.lang.Object for a varargs call\r\n  cast to java.lang.Object[] for a non-varargs call and to suppress this warning\r\n\r\n\r\n    public class EntityNotFoundException extends RuntimeException {\r\n\r\n    public EntityNotFoundException(Class&lt;?&gt; clazz, String... searchParamsMap) {\r\n        super(EntityNotFoundException.generateMessage(clazz.getSimpleName(), toMap(String.class, String.class, searchParamsMap)));\r\n    }\r\n\r\n    private static String generateMessage(String entity, Map&lt;String, String&gt; searchParams) {\r\n        return StringUtils.capitalize(entity) +\r\n                &quot; was not found for parameters:-&gt; &quot; +\r\n                searchParams;\r\n    }\r\n\r\n    private static &lt;K, V&gt; Map&lt;K, V&gt; toMap(\r\n            Class&lt;K&gt; keyType, Class&lt;V&gt; valueType, Object... entries) {\r\n        if (entries.length % 2 == 1)\r\n            throw new IllegalArgumentException(&quot;Invalid entries&quot;);\r\n\r\n        return IntStream.range(0, entries.length / 2).map(i -&gt; i * 2)\r\n                .collect(HashMap::new,\r\n                        (m, i) -&gt; m.put(keyType.cast(entries[i]), valueType.cast(entries[i + 1])),\r\n                        Map::putAll);\r\n    }\r\n\r\n}","title":"Java Error: non-varargs call of varargs method with inexact argument type for last parameter","body":"<p>I get this warning message for the java below class code:</p>\n<p><b>Error message:</b> non-varargs call of varargs method with inexact argument type for last parameter;\ncast to java.lang.Object for a varargs call\ncast to java.lang.Object[] for a non-varargs call and to suppress this warning</p>\n<pre><code>public class EntityNotFoundException extends RuntimeException {\n\npublic EntityNotFoundException(Class&lt;?&gt; clazz, String... searchParamsMap) {\n    super(EntityNotFoundException.generateMessage(clazz.getSimpleName(), toMap(String.class, String.class, searchParamsMap)));\n}\n\nprivate static String generateMessage(String entity, Map&lt;String, String&gt; searchParams) {\n    return StringUtils.capitalize(entity) +\n            &quot; was not found for parameters:-&gt; &quot; +\n            searchParams;\n}\n\nprivate static &lt;K, V&gt; Map&lt;K, V&gt; toMap(\n        Class&lt;K&gt; keyType, Class&lt;V&gt; valueType, Object... entries) {\n    if (entries.length % 2 == 1)\n        throw new IllegalArgumentException(&quot;Invalid entries&quot;);\n\n    return IntStream.range(0, entries.length / 2).map(i -&gt; i * 2)\n            .collect(HashMap::new,\n                    (m, i) -&gt; m.put(keyType.cast(entries[i]), valueType.cast(entries[i + 1])),\n                    Map::putAll);\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","spring","spring-mvc","intellij-idea","bcrypt"],"comments":[{"owner":{"account_id":19344468,"reputation":1965,"user_id":14143312,"display_name":"Rukshan Jayasekara"},"score":0,"creation_date":1621613655,"post_id":67640397,"comment_id":119557575,"body_markdown":"Can you provide the code where you are getting the error?","body":"Can you provide the code where you are getting the error?"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1621613667,"post_id":67640397,"comment_id":119557577,"body_markdown":"What import statement are you using?","body":"What import statement are you using?"},{"owner":{"account_id":8900088,"reputation":4307,"user_id":6643803,"accept_rate":81,"display_name":"akuma8"},"score":0,"creation_date":1621614802,"post_id":67640397,"comment_id":119558036,"body_markdown":"I think it&#39;s an IDE issue, I often experience this kind of problem with the last releases of IntelliJ. I don&#39;t know why but the last versions of IntelliJ Ultimate (since 2020.1) seem really instable. To solve it, check your module SDK (not the project SDK) sometimes they are not the same. Also, you can invalidate the cache and restart.","body":"I think it&#39;s an IDE issue, I often experience this kind of problem with the last releases of IntelliJ. I don&#39;t know why but the last versions of IntelliJ Ultimate (since 2020.1) seem really instable. To solve it, check your module SDK (not the project SDK) sometimes they are not the same. Also, you can invalidate the cache and restart."}],"answers":[{"tags":[],"owner":{"account_id":1594534,"reputation":56,"user_id":1477052,"display_name":"Shriraj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1621618536,"creation_date":1621617106,"answer_id":67641228,"question_id":67640397,"body_markdown":"Could you try with \r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-security-crypto&lt;/artifactId&gt;\r\n    &lt;version&gt;5.4.6&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n\r\n","title":"Cannot resolve symbol &#39;BCrypt&#39;","body":"<p>Could you try with</p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n&lt;artifactId&gt;spring-security-crypto&lt;/artifactId&gt;\n&lt;version&gt;5.4.6&lt;/version&gt;\n</code></pre>\n\n"},{"tags":[],"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621619556,"creation_date":1621619556,"answer_id":67641758,"question_id":67640397,"body_markdown":"The following dependency works for me.\r\n\r\nTry adding this, refreshing maven dependencies and restarting your IDE.\r\n```\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n```","title":"Cannot resolve symbol &#39;BCrypt&#39;","body":"<p>The following dependency works for me.</p>\n<p>Try adding this, refreshing maven dependencies and restarting your IDE.</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25093798,"reputation":1,"user_id":18945178,"display_name":"leLu-BR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697076713,"creation_date":1697060851,"answer_id":77276560,"question_id":67640397,"body_markdown":"I&#39;m not sure my contribution will help you.\r\nI&#39;ve tried many answers to fix a similar issue, but the source for bcrypt I&#39;ve used is different. The below code worked for me in VSCode.\r\nIn pom.xml file(within dependencies):\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;at.favre.lib&lt;/groupId&gt;\r\n    &lt;artifactId&gt;bcrypt&lt;/artifactId&gt;\r\n    &lt;version&gt;0.10.2&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nAlso, this is what the import looks like:\r\n\r\n```java\r\nimport at.favre.lib.crypto.bcrypt.BCrypt;\r\n```\r\n\r\nLink to the source for this version of BCrypt.\r\nhttps://github.com/patrickfav/bcrypt \r\nI hope this helps someone.","title":"Cannot resolve symbol &#39;BCrypt&#39;","body":"<p>I'm not sure my contribution will help you.\nI've tried many answers to fix a similar issue, but the source for bcrypt I've used is different. The below code worked for me in VSCode.\nIn pom.xml file(within dependencies):</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;at.favre.lib&lt;/groupId&gt;\n    &lt;artifactId&gt;bcrypt&lt;/artifactId&gt;\n    &lt;version&gt;0.10.2&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Also, this is what the import looks like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import at.favre.lib.crypto.bcrypt.BCrypt;\n</code></pre>\n<p>Link to the source for this version of BCrypt.\n<a href=\"https://github.com/patrickfav/bcrypt\" rel=\"nofollow noreferrer\">https://github.com/patrickfav/bcrypt</a>\nI hope this helps someone.</p>\n"}],"owner":{"account_id":19313322,"reputation":3,"user_id":14118589,"display_name":"Jenny L"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":67641228,"answer_count":3,"score":0,"last_activity_date":1697076713,"creation_date":1621613219,"question_id":67640397,"body_markdown":"I am trying to add BCrypt to my code, but my program won&#39;t import the dependency. All I get is the message &quot;Cannot resolve symbol &#39;BCrypt&#39;&quot; and if I try to look at the informationsymbol, my only alternatives are:\r\n- &quot;Create class &#39;BCrypt&#39;&quot;\r\n- &quot;Create field &#39;BCrypt&#39; in &#39;JavaclassName&#39;&quot;\r\n- &quot;Create local variable &#39;BCrypt&#39;&quot;\r\nand so on...\r\n\r\nI tried adding dependency in the pom.xml-file:\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n       &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\r\n       &lt;version&gt;5.4.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nbut it did not help.\r\nI also tried:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.mindrot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jbcrypt&lt;/artifactId&gt;\r\n        &lt;version&gt;0.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nbut this just gave me red warnign-signs.\r\n\r\nI use Intellij, and started a Spring project with SDK java version 11.\r\nHope someone is able to help :)","title":"Cannot resolve symbol &#39;BCrypt&#39;","body":"<p>I am trying to add BCrypt to my code, but my program won't import the dependency. All I get is the message &quot;Cannot resolve symbol 'BCrypt'&quot; and if I try to look at the informationsymbol, my only alternatives are:</p>\n<ul>\n<li>&quot;Create class 'BCrypt'&quot;</li>\n<li>&quot;Create field 'BCrypt' in 'JavaclassName'&quot;</li>\n<li>&quot;Create local variable 'BCrypt'&quot;\nand so on...</li>\n</ul>\n<p>I tried adding dependency in the pom.xml-file:</p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n   &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\n   &lt;version&gt;5.4.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>but it did not help.\nI also tried:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.mindrot&lt;/groupId&gt;\n    &lt;artifactId&gt;jbcrypt&lt;/artifactId&gt;\n    &lt;version&gt;0.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>but this just gave me red warnign-signs.</p>\n<p>I use Intellij, and started a Spring project with SDK java version 11.\nHope someone is able to help :)</p>\n"},{"tags":["java","ssl","intellij-idea"],"comments":[{"owner":{"account_id":1275953,"reputation":26182,"user_id":1231230,"accept_rate":76,"display_name":"Ankur Singhal"},"score":0,"creation_date":1416320874,"post_id":26996555,"comment_id":42523896,"body_markdown":"have a look [here](http://ankursinghal86.blogspot.jp/2014/06/authentication-with-client-certificate.html)","body":"have a look <a href=\"http://ankursinghal86.blogspot.jp/2014/06/authentication-with-client-certificate.html\" rel=\"nofollow noreferrer\">here</a>"},{"owner":{"account_id":5351686,"reputation":1,"user_id":4265663,"display_name":"marta"},"score":0,"creation_date":1416328642,"post_id":26996555,"comment_id":42528883,"body_markdown":"Ankur-singhal, thanks for your advice. I have a question to you. The entry type of my certificate is &#39;trustedCertEntry&#39;, but in your article - Entry type: PrivateKeyEntry. Is the &#39; Entry type&#39; important very much?","body":"Ankur-singhal, thanks for your advice. I have a question to you. The entry type of my certificate is &#39;trustedCertEntry&#39;, but in your article - Entry type: PrivateKeyEntry. Is the &#39; Entry type&#39; important very much?"},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":0,"creation_date":1416480522,"post_id":26996555,"comment_id":42595137,"body_markdown":"The `HostnameVerifier` you&#39;re using is insecure. It&#39;s only checking the hostname against a reverse lookup (so vulnerable to MITM attacks), not against the certificate.","body":"The <code>HostnameVerifier</code> you&#39;re using is insecure. It&#39;s only checking the hostname against a reverse lookup (so vulnerable to MITM attacks), not against the certificate."}],"answers":[{"tags":[],"owner":{"account_id":2417794,"reputation":2126,"user_id":2111482,"display_name":"Roshith"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416480681,"creation_date":1416480235,"answer_id":27037572,"question_id":26996555,"body_markdown":"Import the server cert as trusted\r\n\r\nkeytool -import -trustcacerts -alias somealias -keystore clienttrust.jks -file marta.cer","title":"Exception in thread &quot;main&quot; javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: No trusted certificate found","body":"<p>Import the server cert as trusted</p>\n\n<p>keytool -import -trustcacerts -alias somealias -keystore clienttrust.jks -file marta.cer</p>\n"}],"owner":{"account_id":5351686,"reputation":1,"user_id":4265663,"display_name":"marta"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9153,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697076170,"creation_date":1416320521,"question_id":26996555,"body_markdown":"I am in first in automated testing. So, I have a task to create automated script for API testing. I need to create https request with self-signed serificate. This certificate gave me our admins with p12 extension and password file. I exported this certificate to .cer extenssion. Than I created the trust store and import this certificate to this store.\r\n\r\n`C:\\Program Files (x86)\\Java\\jdk1.8.0_25\\jre\\bin&gt;keytool -import -keystore clienttrust.jks -file marta.cer -storepass storepass`\r\n\r\nI located the marta.cer and clienttrust.jks near my project. I have writing my code in IntelliJ IDEA 13.1.1 on Java.\r\n\r\nHere is code:\r\n\r\n    public void testSimpleHttpsClient() throws CertificateException, InterruptedException, UnrecoverableKeyException, NoSuchAlgorithmException,\r\n            IOException, KeyManagementException, KeyStoreException {\r\n\r\n\r\n        URL url = new URL(&quot;https://intstg1-kaakioskpublicapi.ptstaging.ptec/TLE/36171/player/info&quot;);\r\n\r\n        HttpsURLConnection con = (HttpsURLConnection)url.openConnection();\r\n        con.setRequestMethod( &quot;GET&quot; );\r\n\r\n        SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n\r\n        char[]  passphrase = &quot;storepass&quot;.toCharArray();\r\n        KeyStore ks = KeyStore.getInstance(&quot;JKS&quot;);\r\n        ks.load(this.getClass().getResourceAsStream(&quot;clienttrust.jks&quot;), passphrase);\r\n        System.out.println(ks);\r\n\r\n        TrustManagerFactory tmf = TrustManagerFactory.getInstance(&quot;SunX509&quot;);\r\n        tmf.init(ks);\r\n\r\n        System.out.println(tmf.toString());\r\n\r\n        HostnameVerifier hostnameVerifier = new HostnameVerifier() {\r\n\r\n            public boolean verify(String s, SSLSession sslSession) {\r\n                return s.equals(sslSession.getPeerHost());\r\n            }\r\n        };\r\n        con.setHostnameVerifier(hostnameVerifier);\r\n\r\n        sslContext.init(null, tmf.getTrustManagers(), null);\r\n       con.setSSLSocketFactory(sslContext.getSocketFactory());\r\n\r\n        int responseCode = con.getResponseCode();\r\n        InputStream inputStream;\r\n        if (responseCode == HttpURLConnection.HTTP_OK) {\r\n            inputStream = con.getInputStream();\r\n        } else {\r\n            inputStream = con.getErrorStream();\r\n        }\r\n\r\n        // Process the response\r\n        BufferedReader reader;\r\n        String line = null;\r\n        reader = new BufferedReader( new InputStreamReader( inputStream ) );\r\n        while( ( line = reader.readLine() ) != null )\r\n        {\r\n            System.out.println( line );\r\n        }\r\n\r\n        inputStream.close();\r\n    }\r\n\r\nSo, after this code executes I get the next Exception:\r\n\r\nException in thread &quot;main&quot; javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: No trusted certificate found\r\n\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\r\n\tat sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1917)\r\n\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:301)\r\n\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:295)\r\n\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1471)\r\n\tat sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:212)\r\n\tat sun.security.ssl.Handshaker.processLoop(Handshaker.java:936)\r\n\tat sun.security.ssl.Handshaker.process_record(Handshaker.java:871)\r\n\tat sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1043)\r\n\tat sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1343)\r\n\tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1371)\r\n\tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1355)\r\n\tat sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:563)\r\n\tat sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1511)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1439)\r\n\tat java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:480)\r\n\tat sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:338)\r\n\tat httpConnection.Connection.testSimpleHttpsClient(Connection.java:179)\r\n\tat httpConnection.Connection.main(Connection.java:22)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:483)\r\n\tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)\r\nCaused by: sun.security.validator.ValidatorException: No trusted certificate found\r\n\tat sun.security.validator.SimpleValidator.buildTrustedChain(SimpleValidator.java:384)\r\n\tat sun.security.validator.SimpleValidator.engineValidate(SimpleValidator.java:133)\r\n\tat sun.security.validator.Validator.validate(Validator.java:260)\r\n\tat sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)\r\n\tat sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:229)\r\n\tat sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:124)\r\n\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1453)\r\n\t... 20 more\r\n\r\nGuys, please explain to me how to solve this problem.\r\n\r\n","title":"Exception in thread &quot;main&quot; javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: No trusted certificate found","body":"<p>I am in first in automated testing. So, I have a task to create automated script for API testing. I need to create https request with self-signed serificate. This certificate gave me our admins with p12 extension and password file. I exported this certificate to .cer extenssion. Than I created the trust store and import this certificate to this store.</p>\n\n<p><code>C:\\Program Files (x86)\\Java\\jdk1.8.0_25\\jre\\bin&gt;keytool -import -keystore clienttrust.jks -file marta.cer -storepass storepass</code></p>\n\n<p>I located the marta.cer and clienttrust.jks near my project. I have writing my code in IntelliJ IDEA 13.1.1 on Java.</p>\n\n<p>Here is code:</p>\n\n<pre><code>public void testSimpleHttpsClient() throws CertificateException, InterruptedException, UnrecoverableKeyException, NoSuchAlgorithmException,\n        IOException, KeyManagementException, KeyStoreException {\n\n\n    URL url = new URL(\"https://intstg1-kaakioskpublicapi.ptstaging.ptec/TLE/36171/player/info\");\n\n    HttpsURLConnection con = (HttpsURLConnection)url.openConnection();\n    con.setRequestMethod( \"GET\" );\n\n    SSLContext sslContext = SSLContext.getInstance(\"TLS\");\n\n    char[]  passphrase = \"storepass\".toCharArray();\n    KeyStore ks = KeyStore.getInstance(\"JKS\");\n    ks.load(this.getClass().getResourceAsStream(\"clienttrust.jks\"), passphrase);\n    System.out.println(ks);\n\n    TrustManagerFactory tmf = TrustManagerFactory.getInstance(\"SunX509\");\n    tmf.init(ks);\n\n    System.out.println(tmf.toString());\n\n    HostnameVerifier hostnameVerifier = new HostnameVerifier() {\n\n        public boolean verify(String s, SSLSession sslSession) {\n            return s.equals(sslSession.getPeerHost());\n        }\n    };\n    con.setHostnameVerifier(hostnameVerifier);\n\n    sslContext.init(null, tmf.getTrustManagers(), null);\n   con.setSSLSocketFactory(sslContext.getSocketFactory());\n\n    int responseCode = con.getResponseCode();\n    InputStream inputStream;\n    if (responseCode == HttpURLConnection.HTTP_OK) {\n        inputStream = con.getInputStream();\n    } else {\n        inputStream = con.getErrorStream();\n    }\n\n    // Process the response\n    BufferedReader reader;\n    String line = null;\n    reader = new BufferedReader( new InputStreamReader( inputStream ) );\n    while( ( line = reader.readLine() ) != null )\n    {\n        System.out.println( line );\n    }\n\n    inputStream.close();\n}\n</code></pre>\n\n<p>So, after this code executes I get the next Exception:</p>\n\n<p>Exception in thread \"main\" javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: No trusted certificate found\n    at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\n    at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1917)\n    at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:301)\n    at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:295)\n    at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1471)\n    at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:212)\n    at sun.security.ssl.Handshaker.processLoop(Handshaker.java:936)\n    at sun.security.ssl.Handshaker.process_record(Handshaker.java:871)\n    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1043)\n    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1343)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1371)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1355)\n    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:563)\n    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\n    at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1511)\n    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1439)\n    at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:480)\n    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:338)\n    at httpConnection.Connection.testSimpleHttpsClient(Connection.java:179)\n    at httpConnection.Connection.main(Connection.java:22)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)\nCaused by: sun.security.validator.ValidatorException: No trusted certificate found\n    at sun.security.validator.SimpleValidator.buildTrustedChain(SimpleValidator.java:384)\n    at sun.security.validator.SimpleValidator.engineValidate(SimpleValidator.java:133)\n    at sun.security.validator.Validator.validate(Validator.java:260)\n    at sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)\n    at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:229)\n    at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:124)\n    at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1453)\n    ... 20 more</p>\n\n<p>Guys, please explain to me how to solve this problem.</p>\n"},{"tags":["java","multithreading","thread-safety"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":4,"creation_date":1697065351,"post_id":77276782,"comment_id":136234067,"body_markdown":"Inheritance has nothing to do with thread safety. What exactly do you mean by &quot;thread safe&quot;?","body":"Inheritance has nothing to do with thread safety. What exactly do you mean by &quot;thread safe&quot;?"},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1697065628,"post_id":77276782,"comment_id":136234090,"body_markdown":"Since there&#39;s no path-dependent variation in execution, there&#39;s nothing to &#39;go wrong&#39; in this code. At least, not if assigning a reference is atomic in the JVM, which I think it is.","body":"Since there&#39;s no path-dependent variation in execution, there&#39;s nothing to &#39;go wrong&#39; in this code. At least, not if assigning a reference is atomic in the JVM, which I think it is."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1697066704,"post_id":77276782,"comment_id":136234181,"body_markdown":"Your Question could be improved by editing the body to explain a bit about whatever concern prompted you to write this post.","body":"Your Question could be improved by editing the body to explain a bit about whatever concern prompted you to write this post."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697072681,"creation_date":1697066602,"answer_id":77276858,"question_id":77276782,"body_markdown":"[Inheritance][1] and [thread-safety][2] are orthogonal topics. \r\n\r\nThis code:\r\n\r\n```java\r\nvar child = new ChildClass()\r\nchild.setFirstName(&quot;Jo&quot;);\r\nchild.setFamilyName(&quot;Smith&quot;);\r\n```\r\n\r\n… is thread-safe if all three lines execute within the same thread.\r\n\r\nThread-safety issues arise from shared resources. Such resources include a shared file possibly being modified, a shared network connection, or a shared [mutable variable][3]. \r\n\r\nIn this case, you have a new instance of `ChildClass`. Being new means it is, so far, unshared with any other thread. You access its contained fields via setter methods on that same instance within the same thread — so no other threads means no resources shared across threads, and that means no thread-safety issues. \r\n\r\nThe fact that two setters are defined on the subclass while another setter is defined on the superclass does not affect thread-safety. You can think of those two classes as being coalesced, with the superclass content collapsed into the subclass. \r\n\r\nAs far as thread-safety goes, there is no difference between a single class defining all three setters and a pair of classes where one defines two setters and the other defines a single setter. \r\n\r\nIf you start calling those getters and setters from across threads, then you will have thread-safety problems.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)\r\n  [2]: https://en.wikipedia.org/wiki/Thread_safety\r\n  [3]: https://en.wikipedia.org/wiki/Immutable_object#Immutable_variables","title":"Thread safety on child object when setter is on parent","body":"<p><a href=\"https://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)\" rel=\"nofollow noreferrer\">Inheritance</a> and <a href=\"https://en.wikipedia.org/wiki/Thread_safety\" rel=\"nofollow noreferrer\">thread-safety</a> are orthogonal topics.</p>\n<p>This code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var child = new ChildClass()\nchild.setFirstName(&quot;Jo&quot;);\nchild.setFamilyName(&quot;Smith&quot;);\n</code></pre>\n<p>… is thread-safe if all three lines execute within the same thread.</p>\n<p>Thread-safety issues arise from shared resources. Such resources include a shared file possibly being modified, a shared network connection, or a shared <a href=\"https://en.wikipedia.org/wiki/Immutable_object#Immutable_variables\" rel=\"nofollow noreferrer\">mutable variable</a>.</p>\n<p>In this case, you have a new instance of <code>ChildClass</code>. Being new means it is, so far, unshared with any other thread. You access its contained fields via setter methods on that same instance within the same thread — so no other threads means no resources shared across threads, and that means no thread-safety issues.</p>\n<p>The fact that two setters are defined on the subclass while another setter is defined on the superclass does not affect thread-safety. You can think of those two classes as being coalesced, with the superclass content collapsed into the subclass.</p>\n<p>As far as thread-safety goes, there is no difference between a single class defining all three setters and a pair of classes where one defines two setters and the other defines a single setter.</p>\n<p>If you start calling those getters and setters from across threads, then you will have thread-safety problems.</p>\n"},{"tags":[],"owner":{"account_id":29594110,"reputation":60,"user_id":22680961,"display_name":"Akshit Gupta"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1697070587,"creation_date":1697070587,"answer_id":77277053,"question_id":77276782,"body_markdown":"No, both the classes are not thread safe.\r\nYou have to use synchronisation mechanism to achieve thread safety.\r\n\r\n 1. You can use synchronized keyword in the parent class&#39;s getter and setter.\r\n 2. Or you can use other synchronisation mechanism to achieve the thread safety like ReentrantLock or Semaphores.\r\n\r\nCan you please elaborate more on this?\r\n\r\nJust putting a sample code, to achieve thread safety using semaphores.\r\n\r\n    import java.util.concurrent.Semaphore;\r\n\r\n    public abstract class ParentClass {\r\n      private String familyName;\r\n      private final Semaphore semaphore = new Semaphore(1); // Initialize with one permit\r\n\r\n      public String getFamily() {\r\n        return familyName;\r\n      }\r\n\r\n      public void setFamily(String familyName) {\r\n        try {\r\n            semaphore.acquire(); // Acquire the permit\r\n            this.familyName = familyName;\r\n        } catch (InterruptedException e) {\r\n            Thread.currentThread().interrupt();\r\n        } finally {\r\n            semaphore.release(); // Release the permit\r\n        }\r\n      }\r\n     }\r\n\r\n    public class ChildClass extends ParentClass {\r\n      private String firstName;\r\n\r\n      public String getFirstName() {\r\n        return firstName;\r\n      }\r\n\r\n      public void setFirstName(String firstName) {\r\n        this.firstName = firstName;\r\n      }\r\n    }\r\n\r\nThis ensures that only one thread can modify the familyName at a time, making it thread-safe.\r\n\r\n","title":"Thread safety on child object when setter is on parent","body":"<p>No, both the classes are not thread safe.\nYou have to use synchronisation mechanism to achieve thread safety.</p>\n<ol>\n<li>You can use synchronized keyword in the parent class's getter and setter.</li>\n<li>Or you can use other synchronisation mechanism to achieve the thread safety like ReentrantLock or Semaphores.</li>\n</ol>\n<p>Can you please elaborate more on this?</p>\n<p>Just putting a sample code, to achieve thread safety using semaphores.</p>\n<pre><code>import java.util.concurrent.Semaphore;\n\npublic abstract class ParentClass {\n  private String familyName;\n  private final Semaphore semaphore = new Semaphore(1); // Initialize with one permit\n\n  public String getFamily() {\n    return familyName;\n  }\n\n  public void setFamily(String familyName) {\n    try {\n        semaphore.acquire(); // Acquire the permit\n        this.familyName = familyName;\n    } catch (InterruptedException e) {\n        Thread.currentThread().interrupt();\n    } finally {\n        semaphore.release(); // Release the permit\n    }\n  }\n }\n\npublic class ChildClass extends ParentClass {\n  private String firstName;\n\n  public String getFirstName() {\n    return firstName;\n  }\n\n  public void setFirstName(String firstName) {\n    this.firstName = firstName;\n  }\n}\n</code></pre>\n<p>This ensures that only one thread can modify the familyName at a time, making it thread-safe.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697075889,"creation_date":1697073996,"answer_id":77277185,"question_id":77276782,"body_markdown":"    var child = new ChildClass()\r\n    child.setFirstName(&quot;Jo&quot;);\r\n    child.setFamilyName(&quot;Smith&quot;);\r\n\r\nTechnically, those lines are thread-safe because the object that `child` refers to is *thread confined*; i.e. it is only accessible from one thread.  \r\n\r\nAnd if another thread *could* access the `child` instance, then the application as a whole would not be thread-safe.  (There are some complicated exceptions to this, but lets not go there.)\r\n\r\nHowever, the classes themselves are NOT thread-safe.  The location of the methods in the superclass or subclass makes no difference to thread safety.  If you want those classes to be unconditionally thread-safe, then you need to add some explicit synchronization mechanism, OR rewrite them to be immutable classes.\r\n\r\n-----------------------\r\n\r\nNote that thread-safety is technically difficult to define in precise terms.  One approach is to start with some code that is functionally correct (per some specified requirements) when executed with only one thread.  If the code is *also* functionally correct for *all possible executions* involving more than one thread, then the code is thread safe.\r\n\r\nSo if we are going to ask the question is class `XYZ` thread safe, we first need a specification that `XYZ` needs to meet.  In your example classes, we can infer a specification that says that the getters return the values most recently set by the corresponding setters.  Your classes are NOT thread-safe per that specification because the lack of synchronization means that there can be memory anomalies.  But declaring the getters and setters as `synchronized` methods would be sufficient for thread-safety with respect to that spec.","title":"Thread safety on child object when setter is on parent","body":"<pre><code>var child = new ChildClass()\nchild.setFirstName(&quot;Jo&quot;);\nchild.setFamilyName(&quot;Smith&quot;);\n</code></pre>\n<p>Technically, those lines are thread-safe because the object that <code>child</code> refers to is <em>thread confined</em>; i.e. it is only accessible from one thread.</p>\n<p>And if another thread <em>could</em> access the <code>child</code> instance, then the application as a whole would not be thread-safe.  (There are some complicated exceptions to this, but lets not go there.)</p>\n<p>However, the classes themselves are NOT thread-safe.  The location of the methods in the superclass or subclass makes no difference to thread safety.  If you want those classes to be unconditionally thread-safe, then you need to add some explicit synchronization mechanism, OR rewrite them to be immutable classes.</p>\n<hr />\n<p>Note that thread-safety is technically difficult to define in precise terms.  One approach is to start with some code that is functionally correct (per some specified requirements) when executed with only one thread.  If the code is <em>also</em> functionally correct for <em>all possible executions</em> involving more than one thread, then the code is thread safe.</p>\n<p>So if we are going to ask the question is class <code>XYZ</code> thread safe, we first need a specification that <code>XYZ</code> needs to meet.  In your example classes, we can infer a specification that says that the getters return the values most recently set by the corresponding setters.  Your classes are NOT thread-safe per that specification because the lack of synchronization means that there can be memory anomalies.  But declaring the getters and setters as <code>synchronized</code> methods would be sufficient for thread-safety with respect to that spec.</p>\n"}],"owner":{"account_id":1404496,"reputation":13,"user_id":1332579,"display_name":"cappy39"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1697075889,"creation_date":1697065160,"question_id":77276782,"body_markdown":"Will the following example code be threadsafe in a mulithread environment,  when creating a new Child object \r\nwhere some setters are on the parent.\r\n\r\n```\r\npublic abstract class ParentClass {\r\n   private String familyName;\r\n\r\n   public Strng getFamily() {\r\n     return familyName;\r\n   }\r\n   public void setFamily (String familyName) {\r\n    return  this.familyName = familyName\r\n}\r\n```\r\n\r\n```\r\npublic class ChildClass extends ParentClass  {\r\n   private String firstName;\r\n\r\n   public String getFirstName() {\r\n     return firstName;\r\n   }\r\n   public void setFirstName (String firstName) {\r\n    return  this.firstName = firstName\r\n}\r\n```\r\n\r\n\r\n\r\nNow, when i Create a new Child as below shown below, will the setter (setFamily) be thread safe when the child object is proccesed in the application\r\n\r\n```\r\nvar child = new ChildClass()\r\nchild.setFirstName(&quot;Jo&quot;);\r\nchild.setFamilyName(&quot;Smith&quot;);\r\n```","title":"Thread safety on child object when setter is on parent","body":"<p>Will the following example code be threadsafe in a mulithread environment,  when creating a new Child object\nwhere some setters are on the parent.</p>\n<pre><code>public abstract class ParentClass {\n   private String familyName;\n\n   public Strng getFamily() {\n     return familyName;\n   }\n   public void setFamily (String familyName) {\n    return  this.familyName = familyName\n}\n</code></pre>\n<pre><code>public class ChildClass extends ParentClass  {\n   private String firstName;\n\n   public String getFirstName() {\n     return firstName;\n   }\n   public void setFirstName (String firstName) {\n    return  this.firstName = firstName\n}\n</code></pre>\n<p>Now, when i Create a new Child as below shown below, will the setter (setFamily) be thread safe when the child object is proccesed in the application</p>\n<pre><code>var child = new ChildClass()\nchild.setFirstName(&quot;Jo&quot;);\nchild.setFamilyName(&quot;Smith&quot;);\n</code></pre>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697049681,"post_id":77274946,"comment_id":136231925,"body_markdown":"What is `courseEnrollment` ?  I don&#39;t see where that is defined. You should be getting  compiler error on `for (ArrayList&lt;Object&gt; currentStudent : courseEnrollment)` as well as the `.get`","body":"What is <code>courseEnrollment</code> ?  I don&#39;t see where that is defined. You should be getting  compiler error on <code>for (ArrayList&lt;Object&gt; currentStudent : courseEnrollment)</code> as well as the <code>.get</code>"},{"owner":{"account_id":29650081,"reputation":9,"user_id":22724211,"display_name":"Wendy Lawrence"},"score":0,"creation_date":1697053186,"post_id":77274946,"comment_id":136232530,"body_markdown":"the courseEnrollment is an ArrayList in the class CourseManagement","body":"the courseEnrollment is an ArrayList in the class CourseManagement"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697053873,"post_id":77274946,"comment_id":136232645,"body_markdown":"An `ArrayList&lt;Integer&gt;` or an `ArrayList&lt;ArrayList&lt;Integer&gt;&gt;`? Either way, there should be a line in the code that shows it.","body":"An <code>ArrayList&lt;Integer&gt;</code> or an <code>ArrayList&lt;ArrayList&lt;Integer&gt;&gt;</code>? Either way, there should be a line in the code that shows it."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697054150,"post_id":77274946,"comment_id":136232690,"body_markdown":"In your enhanced `for` loops, `overAll` and `currentGrade` are each a &quot;1D&quot; `List&lt;Integer&gt;`.  An invocation of `get` on either one will return *one* `Integer`.  And, and `Integer` doesn&#39;t have a `get (int index)` method.","body":"In your enhanced <code>for</code> loops, <code>overAll</code> and <code>currentGrade</code> are each a &quot;1D&quot; <code>List&lt;Integer&gt;</code>.  An invocation of <code>get</code> on either one will return <i>one</i> <code>Integer</code>.  And, and <code>Integer</code> doesn&#39;t have a <code>get (int index)</code> method."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":1,"creation_date":1697059764,"post_id":77274946,"comment_id":136233483,"body_markdown":"A [mcve] would be helpful.","body":"A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be helpful."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697131562,"post_id":77274946,"comment_id":136244495,"body_markdown":"Off-topic: I, and others, don&#39;t like parallel arrays or parallel collections. Whatever this is a part of, I wonder if the design could be improved. Putting that aside, you might improve the question by adding more information about what the data in the `List&lt;List&lt;Integer&gt;&gt;`   Objects represent. We can infer some, but we shouldn&#39;t  have to.","body":"Off-topic: I, and others, don&#39;t like parallel arrays or parallel collections. Whatever this is a part of, I wonder if the design could be improved. Putting that aside, you might improve the question by adding more information about what the data in the <code>List&lt;List&lt;Integer&gt;&gt;</code>   Objects represent. We can infer some, but we shouldn&#39;t  have to."},{"owner":{"account_id":29650081,"reputation":9,"user_id":22724211,"display_name":"Wendy Lawrence"},"score":0,"creation_date":1698239569,"post_id":77274946,"comment_id":136379803,"body_markdown":"I have to agree, I don&#39;t like that type of array at all, it just didn&#39;t work with what I was trying to do and it ended up being very confusing. I ended up just handing in my assignment and took the loss.","body":"I have to agree, I don&#39;t like that type of array at all, it just didn&#39;t work with what I was trying to do and it ended up being very confusing. I ended up just handing in my assignment and took the loss."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697075006,"creation_date":1697074423,"answer_id":77277200,"question_id":77274946,"body_markdown":"&gt; _&quot;... I don&#39;t know if what I am trying to accomplish is even doable. I have created a 2d arrayList (it could be a list in a list), and I need to pull the second element in the list, and then add it together. ...&quot;_\r\n\r\nYes, this can be accomplished in _Java_.\r\n\r\n&gt; _&quot;... In this method the second .get has an error of Cannot resolve method &#39;get&#39; in &#39;Integer&#39;. ...&quot;_\r\n\r\nYou&#39;ve acquired the _index_, so there is no need to iterate on _courseGrade_ or _courseGradeTotal_.\r\n\r\nInstead, iterate on the _index_ from _courseGrade_ and _courseGradeTotal_.\r\n\r\n```java\r\nIterator&lt;Integer&gt; i;\r\nint index;\r\nfor (List&lt;?&gt; currentStudent : courseEnrollment)\r\n    if ((index = currentStudent.indexOf(takeCode1)) != -1) {\r\n        i = courseGrade.get(index).iterator();\r\n        while (i.hasNext()) grade1 += i.next();\r\n        i = courseGradeTotal.get(index).iterator();\r\n        while (i.hasNext()) totalGrade1 += i.next();\r\n    }\r\n```","title":"2d ArrayList and pulling the second element in a specific index","body":"<blockquote>\n<p><em>&quot;... I don't know if what I am trying to accomplish is even doable. I have created a 2d arrayList (it could be a list in a list), and I need to pull the second element in the list, and then add it together. ...&quot;</em></p>\n</blockquote>\n<p>Yes, this can be accomplished in <em>Java</em>.</p>\n<blockquote>\n<p><em>&quot;... In this method the second .get has an error of Cannot resolve method 'get' in 'Integer'. ...&quot;</em></p>\n</blockquote>\n<p>You've acquired the <em>index</em>, so there is no need to iterate on <em>courseGrade</em> or <em>courseGradeTotal</em>.</p>\n<p>Instead, iterate on the <em>index</em> from <em>courseGrade</em> and <em>courseGradeTotal</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Iterator&lt;Integer&gt; i;\nint index;\nfor (List&lt;?&gt; currentStudent : courseEnrollment)\n    if ((index = currentStudent.indexOf(takeCode1)) != -1) {\n        i = courseGrade.get(index).iterator();\n        while (i.hasNext()) grade1 += i.next();\n        i = courseGradeTotal.get(index).iterator();\n        while (i.hasNext()) totalGrade1 += i.next();\n    }\n</code></pre>\n"}],"owner":{"account_id":29650081,"reputation":9,"user_id":22724211,"display_name":"Wendy Lawrence"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1697075006,"creation_date":1697042993,"question_id":77274946,"body_markdown":"I don&#39;t know if what I am trying to accomplish is even doable. I have created a 2d arrayList (it could be a list in a list), and I need to pull the second element in the list, and then add it together.  \r\n\r\nHopefully, I have all the code that is needed for help. I am so new at this and this is the last part of my assignment that I just can&#39;t figure out.\r\n\r\n```\r\n//member variable/arrays\r\npublic static ArrayList&lt;ArrayList&lt;Integer&gt;&gt; courseGrade = new ArrayList&lt;&gt;();\r\n    public static ArrayList&lt;ArrayList&lt;Integer&gt;&gt; courseGradeTotal = new ArrayList&lt;&gt;();\r\n    private int countCourseEnrollment = 0;\r\n    private int takeCode;\r\n    private static int totalGrade1 = 0;\r\n    private static int grade1 = 0\r\n\r\n//method to calculate course average\r\npublic static void calculateOverallGrade() {\r\n        Course.listCourses();\r\n\r\n        System.out.println(&quot; &quot;);\r\n        System.out.print(&quot;Enter the course code to get course average:&quot;);\r\n        String takeCode1 = Main.scan.next();\r\n\r\n        System.out.println(&quot;Current students in course: &quot; + takeCode1);\r\n\r\n\r\n        for (ArrayList&lt;Object&gt; currentStudent : courseEnrollment) {\r\n            if (currentStudent.contains(takeCode1)) {\r\n                System.out.println(currentStudent);\r\n                int index = currentStudent.indexOf(takeCode1);\r\n                System.out.println(index);\r\n                for (ArrayList&lt;Integer&gt; currentGrade : courseGrade) {\r\n                    int intGrade1 = currentGrade.get(index).get(1);\r\n                    System.out.println(intGrade1);\r\n                    grade1 = grade1 + intGrade1;\r\n                }\r\n                for (ArrayList&lt;Integer&gt; overAll : courseGradeTotal) {\r\n                    int totGrade1 = overAll.get(index).get(1);\r\n                    System.out.print(totGrade1);\r\n                    totalGrade1 = totalGrade1 + totGrade1;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        System.out.println(&quot;Student grades: &quot; + grade1);\r\n        System.out.println(&quot;Total grades could have earned: &quot; + totalGrade1);\r\n\r\n\r\n\r\n    } //ends CalculateOverAllGrade method\r\n```\r\n\r\n\r\nIn this method the second .get has an error of Cannot resolve method &#39;get&#39; in &#39;Integer&#39;. The output from Array courseGrade is [4643, 98]. First number is the course code and the second number is the grade awarded to student. I hope this all makes sense, thank you in advance for your help.\r\n\r\nI have tried so many things I just don&#39;t know where to start. ","title":"2d ArrayList and pulling the second element in a specific index","body":"<p>I don't know if what I am trying to accomplish is even doable. I have created a 2d arrayList (it could be a list in a list), and I need to pull the second element in the list, and then add it together.</p>\n<p>Hopefully, I have all the code that is needed for help. I am so new at this and this is the last part of my assignment that I just can't figure out.</p>\n<pre><code>//member variable/arrays\npublic static ArrayList&lt;ArrayList&lt;Integer&gt;&gt; courseGrade = new ArrayList&lt;&gt;();\n    public static ArrayList&lt;ArrayList&lt;Integer&gt;&gt; courseGradeTotal = new ArrayList&lt;&gt;();\n    private int countCourseEnrollment = 0;\n    private int takeCode;\n    private static int totalGrade1 = 0;\n    private static int grade1 = 0\n\n//method to calculate course average\npublic static void calculateOverallGrade() {\n        Course.listCourses();\n\n        System.out.println(&quot; &quot;);\n        System.out.print(&quot;Enter the course code to get course average:&quot;);\n        String takeCode1 = Main.scan.next();\n\n        System.out.println(&quot;Current students in course: &quot; + takeCode1);\n\n\n        for (ArrayList&lt;Object&gt; currentStudent : courseEnrollment) {\n            if (currentStudent.contains(takeCode1)) {\n                System.out.println(currentStudent);\n                int index = currentStudent.indexOf(takeCode1);\n                System.out.println(index);\n                for (ArrayList&lt;Integer&gt; currentGrade : courseGrade) {\n                    int intGrade1 = currentGrade.get(index).get(1);\n                    System.out.println(intGrade1);\n                    grade1 = grade1 + intGrade1;\n                }\n                for (ArrayList&lt;Integer&gt; overAll : courseGradeTotal) {\n                    int totGrade1 = overAll.get(index).get(1);\n                    System.out.print(totGrade1);\n                    totalGrade1 = totalGrade1 + totGrade1;\n                }\n\n            }\n        }\n\n        System.out.println(&quot;Student grades: &quot; + grade1);\n        System.out.println(&quot;Total grades could have earned: &quot; + totalGrade1);\n\n\n\n    } //ends CalculateOverAllGrade method\n</code></pre>\n<p>In this method the second .get has an error of Cannot resolve method 'get' in 'Integer'. The output from Array courseGrade is [4643, 98]. First number is the course code and the second number is the grade awarded to student. I hope this all makes sense, thank you in advance for your help.</p>\n<p>I have tried so many things I just don't know where to start.</p>\n"},{"tags":["java","jvm","freeze","arm64","g1gc"],"comments":[{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1697014702,"post_id":77271496,"comment_id":136224965,"body_markdown":"It&#39;s a deadlock: not a JVM bug but a bug in your code.","body":"It&#39;s a deadlock: not a JVM bug but a bug in your code."},{"owner":{"account_id":29646711,"reputation":1,"user_id":22721563,"display_name":"xijiu"},"score":0,"creation_date":1697015069,"post_id":77271496,"comment_id":136225044,"body_markdown":"@Pino i do not think it&#39;s a deadlock in my code. first, the jstack not detected deadlocks; second, the VM Thread stack trace is not normaly, it&#39;s stucked in `SuspendibleThreadSet::synchronize()`. VM Thread should not be stuck here even if deadlock exist.","body":"@Pino i do not think it&#39;s a deadlock in my code. first, the jstack not detected deadlocks; second, the VM Thread stack trace is not normaly, it&#39;s stucked in <code>SuspendibleThreadSet::synchronize()</code>. VM Thread should not be stuck here even if deadlock exist."},{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1697015940,"post_id":77271496,"comment_id":136225237,"body_markdown":"Perhaps this can help: https://stackoverflow.com/questions/1611314/does-this-stack-dump-indicate-that-i-have-a-deadlock","body":"Perhaps this can help: <a href=\"https://stackoverflow.com/questions/1611314/does-this-stack-dump-indicate-that-i-have-a-deadlock\" title=\"does this stack dump indicate that i have a deadlock\">stackoverflow.com/questions/1611314/&hellip;</a>"},{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1697016259,"post_id":77271496,"comment_id":136225282,"body_markdown":"However without the complete output of `jstack` some useful detail could be hidden.","body":"However without the complete output of <code>jstack</code> some useful detail could be hidden."},{"owner":{"account_id":29646711,"reputation":1,"user_id":22721563,"display_name":"xijiu"},"score":0,"creation_date":1697016870,"post_id":77271496,"comment_id":136225413,"body_markdown":"application has 100+ threads, and all threads are BLOCKED. The oracle document:  https://docs.oracle.com/en/java/javase/20/troubleshoot/troubleshoot-process-hangs-and-loops.html#GUID-88307E36-5BA7-4EF7-B90D-5B8F028E7890","body":"application has 100+ threads, and all threads are BLOCKED. The oracle document:  <a href=\"https://docs.oracle.com/en/java/javase/20/troubleshoot/troubleshoot-process-hangs-and-loops.html#GUID-88307E36-5BA7-4EF7-B90D-5B8F028E7890\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/20/troubleshoot/&hellip;</a>"},{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":1,"creation_date":1697017780,"post_id":77271496,"comment_id":136225572,"body_markdown":"Your link is interesting.  It also says [If the thread dump is printed and no deadlocks are found, then the issue might be a bug in which a thread is waiting for a monitor that is never notified.](https://docs.oracle.com/en/java/javase/20/troubleshoot/troubleshoot-process-hangs-and-loops.html#GUID-8B8DE8E0-D7E3-48A9-96EB-77BC1128100D:~:text=If%20the%20thread%20dump%20is%20printed%20and%20no%20deadlocks%20are%20found%2C%20then%20the%20issue%20might%20be%20a%20bug%20in%20which%20a%20thread%20is%20waiting%20for%20a%20monitor%20that%20is%20never%20notified.)","body":"Your link is interesting.  It also says <a href=\"https://docs.oracle.com/en/java/javase/20/troubleshoot/troubleshoot-process-hangs-and-loops.html#GUID-8B8DE8E0-D7E3-48A9-96EB-77BC1128100D:~:text=If%20the%20thread%20dump%20is%20printed%20and%20no%20deadlocks%20are%20found%2C%20then%20the%20issue%20might%20be%20a%20bug%20in%20which%20a%20thread%20is%20waiting%20for%20a%20monitor%20that%20is%20never%20notified.\" rel=\"nofollow noreferrer\">If the thread dump is printed and no deadlocks are found, then the issue might be a bug in which a thread is waiting for a monitor that is never notified.</a>"},{"owner":{"account_id":29646711,"reputation":1,"user_id":22721563,"display_name":"xijiu"},"score":0,"creation_date":1697074850,"post_id":77271496,"comment_id":136248673,"body_markdown":"I raised a question for JDK, and Martijn Verburg reply: https://github.com/adoptium/adoptium-support/issues/912","body":"I raised a question for JDK, and Martijn Verburg reply: <a href=\"https://github.com/adoptium/adoptium-support/issues/912\" rel=\"nofollow noreferrer\">github.com/adoptium/adoptium-support/issues/912</a>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1697102232,"post_id":77271496,"comment_id":136238311,"body_markdown":"A deadlock is a specific situation where two (or more) thread wait for each other. It’s perfectly possible to have a hanging application without a deadlock, for example, just one thread waiting for an impossible condition. So far, you just have a hanging application and not shown any indicator for a deadlock nor for your assumption that this must be a bug in the JVM rather than a bug in your application.","body":"A deadlock is a specific situation where two (or more) thread wait for each other. It’s perfectly possible to have a hanging application without a deadlock, for example, just one thread waiting for an impossible condition. So far, you just have a hanging application and not shown any indicator for a deadlock nor for your assumption that this must be a bug in the JVM rather than a bug in your application."},{"owner":{"account_id":29646711,"reputation":1,"user_id":22721563,"display_name":"xijiu"},"score":0,"creation_date":1697115009,"post_id":77271496,"comment_id":136240803,"body_markdown":"@Holger My application is Kafka broker, it has 100+ threads.  The state of each thread is BLOCKED,  and each thread&#39;s stack is different. What&#39;s JVM hang?   Every   thread stopped, just like Stop The World.  If all threads waiting for an impossible condition, why VM Thread(GC generally) stuck in `SafepointSynchronize::begin()`","body":"@Holger My application is Kafka broker, it has 100+ threads.  The state of each thread is BLOCKED,  and each thread&#39;s stack is different. What&#39;s JVM hang?   Every   thread stopped, just like Stop The World.  If all threads waiting for an impossible condition, why VM Thread(GC generally) stuck in <code>SafepointSynchronize::begin()</code>"}],"answers":[{"tags":[],"owner":{"account_id":29647172,"reputation":1,"user_id":22721940,"display_name":"jmc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697017761,"creation_date":1697017761,"answer_id":77271929,"question_id":77271496,"body_markdown":"it is seemed like a JVM bug, if it&#39;s a deadlock, the command &quot;jstack [pid]&quot; should be responsed.","title":"JVM hang suddenly with jdk version 8u1.8.0_312","body":"<p>it is seemed like a JVM bug, if it's a deadlock, the command &quot;jstack [pid]&quot; should be responsed.</p>\n"}],"owner":{"account_id":29646711,"reputation":1,"user_id":22721563,"display_name":"xijiu"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1697074850,"creation_date":1697013777,"question_id":77271496,"body_markdown":"Our online Kafka Broker service suddenly hung up, and it&#39;s occurs with low probability and without any time regularity. no crash, no warning, no error and no logs\r\n\r\nThe command &quot;`jstack [pid]`&quot; no response, then I print the stack trace with command &quot;`jstack -m [pid]`&quot;, and I found all threads state are **BLOCKED**, include **VM Thread**.\r\n\r\nVM Thread stack:\r\n\r\n    ox0000ffff99f4da8c __pthread_cond_wait\r\n    ox0000ffff997c014c _ZN2os13PlatformEvent4parkEv\r\n    ox0000ffff9976f014 _ZN7Monitor5IWaitEP6Thread1\r\n    ox0000ffff9976faf0 _ZN7Monitor4waitEblb\r\n    ox0000ffff999355dc _ZN20SuspendibleThreadSet11synchronizeEv\r\n    ox0000ffff99858a68 _ZN20SafepointSynchronize5beginEv\r\n    ox0000ffff999d3124 _ZN8VMThread4loopEv\r\n    ox0000ffff999d3458 _ZN8VMThread3runEv\r\n    ox0000ffff997b8204 _ZL10java_startP6Thread\r\n    ox0000ffff99f47800 start_thread\r\n\r\n\r\nOnly one thead state is IN_NATIVE, it&#39;s stack trace:\r\n\r\n    ox0000ffff99de7dd8 __GI___poll\r\n    ox0000fffed7871a3c NET_Timeout0\r\n    ox0000fffe786ec40 Java_java_net_PlainSocketImpl_socketAccept\r\n    ox0000ffff8c015628 * java.net.PlainSocketImpl.socketAccept(java.net.SocketImpl) bci:0 (Interpreted frame)\r\n    ox0000ffff8c008498 * java.net.AbstractPlainSocketImpl.accept(java.net.SocketImpl) bci:7 line:409 (Interpreted frame)\r\n    ox0000ffff8c008498 * java.net.ServerSocket.implAccept(java.net.SocketImpl)\r\n    ox0000ffff8c008498 * java.net.ServerSocket.accept()\r\n    ox0000ffff8c008380 * sun.management.jmxremote.LocalRMIServerSocketFactory$1.accept()\r\n    ox0000ffff8c008380 * sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop()\r\n\r\nI&#39;m not sure whether this is a JVM bug. Maybe IN_NATIVE thread is useless, STS call synchronize() stuck.\r\n\r\n\r\nLinux on aarch64, and jdk version is \r\nopenjdk version &quot;1.8.0_312&quot; OpenJDK Runtime Environment (build 1.8.0_312-b07) OpenJDK 64-Bit Server VM (build 25.312-b07, mixed mode)\r\n\r\nI try to find out the reason, but the JVM hang","title":"JVM hang suddenly with jdk version 8u1.8.0_312","body":"<p>Our online Kafka Broker service suddenly hung up, and it's occurs with low probability and without any time regularity. no crash, no warning, no error and no logs</p>\n<p>The command &quot;<code>jstack [pid]</code>&quot; no response, then I print the stack trace with command &quot;<code>jstack -m [pid]</code>&quot;, and I found all threads state are <strong>BLOCKED</strong>, include <strong>VM Thread</strong>.</p>\n<p>VM Thread stack:</p>\n<pre><code>ox0000ffff99f4da8c __pthread_cond_wait\nox0000ffff997c014c _ZN2os13PlatformEvent4parkEv\nox0000ffff9976f014 _ZN7Monitor5IWaitEP6Thread1\nox0000ffff9976faf0 _ZN7Monitor4waitEblb\nox0000ffff999355dc _ZN20SuspendibleThreadSet11synchronizeEv\nox0000ffff99858a68 _ZN20SafepointSynchronize5beginEv\nox0000ffff999d3124 _ZN8VMThread4loopEv\nox0000ffff999d3458 _ZN8VMThread3runEv\nox0000ffff997b8204 _ZL10java_startP6Thread\nox0000ffff99f47800 start_thread\n</code></pre>\n<p>Only one thead state is IN_NATIVE, it's stack trace:</p>\n<pre><code>ox0000ffff99de7dd8 __GI___poll\nox0000fffed7871a3c NET_Timeout0\nox0000fffe786ec40 Java_java_net_PlainSocketImpl_socketAccept\nox0000ffff8c015628 * java.net.PlainSocketImpl.socketAccept(java.net.SocketImpl) bci:0 (Interpreted frame)\nox0000ffff8c008498 * java.net.AbstractPlainSocketImpl.accept(java.net.SocketImpl) bci:7 line:409 (Interpreted frame)\nox0000ffff8c008498 * java.net.ServerSocket.implAccept(java.net.SocketImpl)\nox0000ffff8c008498 * java.net.ServerSocket.accept()\nox0000ffff8c008380 * sun.management.jmxremote.LocalRMIServerSocketFactory$1.accept()\nox0000ffff8c008380 * sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop()\n</code></pre>\n<p>I'm not sure whether this is a JVM bug. Maybe IN_NATIVE thread is useless, STS call synchronize() stuck.</p>\n<p>Linux on aarch64, and jdk version is\nopenjdk version &quot;1.8.0_312&quot; OpenJDK Runtime Environment (build 1.8.0_312-b07) OpenJDK 64-Bit Server VM (build 25.312-b07, mixed mode)</p>\n<p>I try to find out the reason, but the JVM hang</p>\n"},{"tags":["java","spring","spring-boot","response-entity"],"comments":[{"owner":{"account_id":27097454,"reputation":797,"user_id":20644506,"display_name":"Peng"},"score":0,"creation_date":1697094512,"post_id":77277136,"comment_id":136236696,"body_markdown":"i  noticed that  you define the sendFile response type as APPLICATION_PDF,and the aspect of  sendfile and sendByemail implementation  is different ,  according to  your sample  error stack (it should be  demonstrate more about it ,  the whole would imporve ensure issue cause) ,it may be http  convert error ,  the sendfile  contenttype is APPLICATION_PDF , but you return   application/json in  globalException Handler  , maybe some conflict  within it ?  well ,it also may be that   you missed pdf message http converter ?","body":"i  noticed that  you define the sendFile response type as APPLICATION_PDF,and the aspect of  sendfile and sendByemail implementation  is different ,  according to  your sample  error stack (it should be  demonstrate more about it ,  the whole would imporve ensure issue cause) ,it may be http  convert error ,  the sendfile  contenttype is APPLICATION_PDF , but you return   application/json in  globalException Handler  , maybe some conflict  within it ?  well ,it also may be that   you missed pdf message http converter ?"}],"owner":{"account_id":9260920,"reputation":1801,"user_id":6878038,"display_name":"Manzini"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697072893,"creation_date":1697072893,"question_id":77277136,"body_markdown":"My application has an aspect that checks if the request is duplicated within a TTL and returns the endpoint result or a message.\r\n\r\nThis is my controller\r\n\r\n   \r\n\r\n     @RestController\r\n    @RequestMapping(&quot;/results/shares&quot;)\r\n    class MyController(\r\n        private val myService: MyService,\r\n    ) {\r\n    \r\n        private val responseHeaders = HttpHeaders().apply {\r\n            contentType = MediaType.APPLICATION_PDF\r\n            set(&quot;Content-Disposition&quot;, &quot;attachment; filename=fatura.pdf&quot;)\r\n        }\r\n    \r\n        @LogProfiler\r\n        @LogInfo(logParameters = true)\r\n        @CacheMessageResponse(ttl = 60, false)\r\n        @PostMapping(&quot;/email/{invoiceId}&quot;)\r\n        fun sendByEmail(\r\n            @RequestHeader(&quot;clientId&quot;) clientId: String,\r\n            @PathVariable id: String,\r\n        ): EmaileResponse =\r\n            myService.sendInvoiceByEmail(id, clientId).toEmailCompleteResponse()\r\n    \r\n       \r\n        @CacheRequest(ttl = 60, false)\r\n        @GetMapping(&quot;/file/{id}&quot;, produces = [MediaType.APPLICATION_PDF_VALUE])\r\n        fun sendFile(\r\n            @RequestHeader(&quot;clientId&quot;) clientId: String,\r\n            @PathVariable Id: String,\r\n        ): ResponseEntity&lt;Resource&gt; =\r\n            ResponseEntity(myService.retrieveFile(id, clientId), responseHeaders, HttpStatus.OK)\r\n    }\r\n\r\nInside the aspect I do a check and if it is in TTL I throw an exception, otherwise the endpoint calls the service and continues the process normally\r\n\r\n        if (cachedValue != null) {\r\n                throw DuplicateRequestOnTtlException(&quot;Duplicate Error&quot;)\r\n            }\r\n\r\n\r\n    class DuplicateRequestOnTtlException(message: String) : RuntimeException(message)\r\n\r\n\r\nIn my Controller exception handler I handle exceptions\r\n\r\n    @ExceptionHandler(DuplicateRequestOnTtlException::class)\r\n    @ResponseBody\r\n    fun handleDuplicateRequestOnTtlException(e: DuplicateRequestOnTtlException): ResponseEntity&lt;DuplicateRequestOnTtlErrorResponse&gt; {\r\n        val errorResponse = DuplicateRequestOnTtlErrorResponse(properties.download.message)\r\n        return ResponseEntity.status(HttpStatus.TOO_MANY_REQUESTS).body(errorResponse)\r\n    }\r\n    \r\n   \r\n    data class DuplicateRequestOnTtlErrorResponse(val message: String)\r\n\r\nEverything works as expected for the sendByEmail endpoint, it returns ResponseEntity&lt;DuplicateRequestOnTtlErrorResponse&gt; when necessary, however, with the sendFile endpoint this does not happen, When it is inside the ttl and is to respond to a DuplicateRequestOnTtlErrorResponse gives:\r\n Spring cannot handle the response\r\nan org.springframework.web.HttpMediaTypeNotAcceptableException: No acceptable representation is thrown and I can&#39;t deal with it because I get an Ambiguous @ExceptionHandler in advice","title":"Two possible responses on the same endpoint","body":"<p>My application has an aspect that checks if the request is duplicated within a TTL and returns the endpoint result or a message.</p>\n<p>This is my controller</p>\n<pre><code> @RestController\n@RequestMapping(&quot;/results/shares&quot;)\nclass MyController(\n    private val myService: MyService,\n) {\n\n    private val responseHeaders = HttpHeaders().apply {\n        contentType = MediaType.APPLICATION_PDF\n        set(&quot;Content-Disposition&quot;, &quot;attachment; filename=fatura.pdf&quot;)\n    }\n\n    @LogProfiler\n    @LogInfo(logParameters = true)\n    @CacheMessageResponse(ttl = 60, false)\n    @PostMapping(&quot;/email/{invoiceId}&quot;)\n    fun sendByEmail(\n        @RequestHeader(&quot;clientId&quot;) clientId: String,\n        @PathVariable id: String,\n    ): EmaileResponse =\n        myService.sendInvoiceByEmail(id, clientId).toEmailCompleteResponse()\n\n   \n    @CacheRequest(ttl = 60, false)\n    @GetMapping(&quot;/file/{id}&quot;, produces = [MediaType.APPLICATION_PDF_VALUE])\n    fun sendFile(\n        @RequestHeader(&quot;clientId&quot;) clientId: String,\n        @PathVariable Id: String,\n    ): ResponseEntity&lt;Resource&gt; =\n        ResponseEntity(myService.retrieveFile(id, clientId), responseHeaders, HttpStatus.OK)\n}\n</code></pre>\n<p>Inside the aspect I do a check and if it is in TTL I throw an exception, otherwise the endpoint calls the service and continues the process normally</p>\n<pre><code>    if (cachedValue != null) {\n            throw DuplicateRequestOnTtlException(&quot;Duplicate Error&quot;)\n        }\n\n\nclass DuplicateRequestOnTtlException(message: String) : RuntimeException(message)\n</code></pre>\n<p>In my Controller exception handler I handle exceptions</p>\n<pre><code>@ExceptionHandler(DuplicateRequestOnTtlException::class)\n@ResponseBody\nfun handleDuplicateRequestOnTtlException(e: DuplicateRequestOnTtlException): ResponseEntity&lt;DuplicateRequestOnTtlErrorResponse&gt; {\n    val errorResponse = DuplicateRequestOnTtlErrorResponse(properties.download.message)\n    return ResponseEntity.status(HttpStatus.TOO_MANY_REQUESTS).body(errorResponse)\n}\n\n\ndata class DuplicateRequestOnTtlErrorResponse(val message: String)\n</code></pre>\n<p>Everything works as expected for the sendByEmail endpoint, it returns ResponseEntity when necessary, however, with the sendFile endpoint this does not happen, When it is inside the ttl and is to respond to a DuplicateRequestOnTtlErrorResponse gives:\nSpring cannot handle the response\nan org.springframework.web.HttpMediaTypeNotAcceptableException: No acceptable representation is thrown and I can't deal with it because I get an Ambiguous @ExceptionHandler in advice</p>\n"},{"tags":["java","spring-boot","native","graalvm"],"owner":{"account_id":157895,"reputation":263,"user_id":376152,"accept_rate":100,"display_name":"moorsu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697071653,"creation_date":1697071653,"question_id":77277098,"body_markdown":"I have used this in my pom.xml\r\n\r\n```\r\n&lt;buildArgs&gt;\r\n       &lt;buildArg&gt;-H:IncludeResources=&quot;.*yml$&quot;&lt;/buildArg&gt; \r\n&lt;/buildArgs&gt;\r\n```\r\n\r\nBut still I am getting the exception while running the native executable\r\n\r\nCaused by: java.lang.IllegalArgumentException: argument &quot;src&quot; is null\r\nat com.fasterxml.jackson.databind.ObjectMapper._assertNotNull(ObjectMapper.java:4980) ~[2.15.2]\r\nat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3824) ~[2.15.2]\r\nat io.github.mngsk.devicedetector.device.AbstractDeviceParser.(AbstractDeviceParser.java:32)\r\n\r\n","title":"How to add *.yml files from the third party libraries to the include argument (-H:IncludeResources) while compiling spring-boot application i?","body":"<p>I have used this in my pom.xml</p>\n<pre><code>&lt;buildArgs&gt;\n       &lt;buildArg&gt;-H:IncludeResources=&quot;.*yml$&quot;&lt;/buildArg&gt; \n&lt;/buildArgs&gt;\n</code></pre>\n<p>But still I am getting the exception while running the native executable</p>\n<p>Caused by: java.lang.IllegalArgumentException: argument &quot;src&quot; is null\nat com.fasterxml.jackson.databind.ObjectMapper._assertNotNull(ObjectMapper.java:4980) ~[2.15.2]\nat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3824) ~[2.15.2]\nat io.github.mngsk.devicedetector.device.AbstractDeviceParser.(AbstractDeviceParser.java:32)</p>\n"},{"tags":["java","eclipse","spring-boot","lombok"],"comments":[{"owner":{"account_id":4514344,"reputation":31626,"user_id":3669624,"accept_rate":100,"display_name":"cнŝdk"},"score":1,"creation_date":1530799723,"post_id":51193039,"comment_id":89368309,"body_markdown":"That&#39;s because your getter and setter methods aren&#39;t generated in your `.class` files when you run the project. Please check [**this answer**](https://stackoverflow.com/a/11807022/3669624) for more details.","body":"That&#39;s because your getter and setter methods aren&#39;t generated in your <code>.class</code> files when you run the project. Please check <a href=\"https://stackoverflow.com/a/11807022/3669624\"><b>this answer</b></a> for more details."},{"owner":{"account_id":1964374,"reputation":543,"user_id":1767688,"accept_rate":75,"display_name":"SpaceCowboy"},"score":0,"creation_date":1530800442,"post_id":51193039,"comment_id":89368788,"body_markdown":"That sounds like the issue to me, however when I follow the instructions in the answer to provided I still get the same issue :(","body":"That sounds like the issue to me, however when I follow the instructions in the answer to provided I still get the same issue :("},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1530800602,"post_id":51193039,"comment_id":89368884,"body_markdown":"What version of Java are you targeting? I&#39;ve had similar issues with Java 9 and Java 10. Java 8 is the only one that seems to work perfectly.","body":"What version of Java are you targeting? I&#39;ve had similar issues with Java 9 and Java 10. Java 8 is the only one that seems to work perfectly."},{"owner":{"account_id":1801353,"reputation":81710,"user_id":1639625,"display_name":"tobias_k"},"score":0,"creation_date":1530800752,"post_id":51193039,"comment_id":89368978,"body_markdown":"Did you also do `mvn eclipse:eclipse` after adding lombok to the pom? Also, are you running the project from within Eclipse, or from maven/appassembler/whatever?","body":"Did you also do <code>mvn eclipse:eclipse</code> after adding lombok to the pom? Also, are you running the project from within Eclipse, or from maven/appassembler/whatever?"},{"owner":{"account_id":1964374,"reputation":543,"user_id":1767688,"accept_rate":75,"display_name":"SpaceCowboy"},"score":0,"creation_date":1530800760,"post_id":51193039,"comment_id":89368982,"body_markdown":"I&#39;m using Java 8, strangely it has been working perfectly. Only recently this has started to occur. I&#39;ve rolled back to a version which worked but im still seeing the issue","body":"I&#39;m using Java 8, strangely it has been working perfectly. Only recently this has started to occur. I&#39;ve rolled back to a version which worked but im still seeing the issue"},{"owner":{"account_id":1964374,"reputation":543,"user_id":1767688,"accept_rate":75,"display_name":"SpaceCowboy"},"score":0,"creation_date":1530800847,"post_id":51193039,"comment_id":89369040,"body_markdown":"@tobias_k yeah I did, I&#39;m running it from within Eclipse","body":"@tobias_k yeah I did, I&#39;m running it from within Eclipse"},{"owner":{"account_id":1801353,"reputation":81710,"user_id":1639625,"display_name":"tobias_k"},"score":0,"creation_date":1530800933,"post_id":51193039,"comment_id":89369117,"body_markdown":"Still not entirely clear. You say you can build the project with maven (`mvn install`), but can you also (a) run it with maven/from command line, (b) compile it in Eclipse (no squigly red lines), (c) run it in Eclipse?","body":"Still not entirely clear. You say you can build the project with maven (<code>mvn install</code>), but can you also (a) run it with maven/from command line, (b) compile it in Eclipse (no squigly red lines), (c) run it in Eclipse?"},{"owner":{"account_id":4514344,"reputation":31626,"user_id":3669624,"accept_rate":100,"display_name":"cнŝdk"},"score":0,"creation_date":1530800958,"post_id":51193039,"comment_id":89369128,"body_markdown":"@SpaceCowboy Try to close and start eclipse after adding lombok and executing the suggested command, if you check [this answer](https://stackoverflow.com/a/22332248/3669624) as well, it&#39;s stating the same thing.","body":"@SpaceCowboy Try to close and start eclipse after adding lombok and executing the suggested command, if you check <a href=\"https://stackoverflow.com/a/22332248/3669624\">this answer</a> as well, it&#39;s stating the same thing."},{"owner":{"account_id":1964374,"reputation":543,"user_id":1767688,"accept_rate":75,"display_name":"SpaceCowboy"},"score":0,"creation_date":1530801126,"post_id":51193039,"comment_id":89369250,"body_markdown":"I can build with mvn clean/install in eclipse, also on the commandline, but I can&#39;t run it from anywhere as it complains about missing getters/setters","body":"I can build with mvn clean/install in eclipse, also on the commandline, but I can&#39;t run it from anywhere as it complains about missing getters/setters"}],"answers":[{"tags":[],"owner":{"account_id":13890437,"reputation":281,"user_id":10028584,"display_name":"Andrii Torzhkov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530800323,"creation_date":1530800323,"answer_id":51193656,"question_id":51193039,"body_markdown":"I don&#39;t know how exactly in eclipse, but in the ​​Intellij IDEA I need to install the lombok plugin in the settings, I suspect that in eclipse also it needs to be done.\r\n","title":"Lombok/Eclipse Issues - I can compile but I cannot run","body":"<p>I don't know how exactly in eclipse, but in the ​​Intellij IDEA I need to install the lombok plugin in the settings, I suspect that in eclipse also it needs to be done.</p>\n"},{"tags":[],"owner":{"account_id":4802848,"reputation":2464,"user_id":3878948,"accept_rate":86,"display_name":"Rishabh Agarwal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572989240,"creation_date":1572989240,"answer_id":58719711,"question_id":51193039,"body_markdown":"Here is tested link for setting up lombok for the eclipse as well as intellij.\r\n\r\n\r\nhttps://www.baeldung.com/lombok-ide","title":"Lombok/Eclipse Issues - I can compile but I cannot run","body":"<p>Here is tested link for setting up lombok for the eclipse as well as intellij.</p>\n\n<p><a href=\"https://www.baeldung.com/lombok-ide\" rel=\"nofollow noreferrer\">https://www.baeldung.com/lombok-ide</a></p>\n"},{"tags":[],"owner":{"account_id":24248641,"reputation":1,"user_id":18199977,"display_name":"sric0880"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644854963,"creation_date":1644807688,"answer_id":71106718,"question_id":51193039,"body_markdown":"Adding the tag `&lt;annotationProcessorPaths&gt;` to pom.xml solved my same problem.\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;annotationProcessorPaths&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                            &lt;version&gt;RELEASE&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                    &lt;/annotationProcessorPaths&gt;\r\n                    ...\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n","title":"Lombok/Eclipse Issues - I can compile but I cannot run","body":"<p>Adding the tag <code>&lt;annotationProcessorPaths&gt;</code> to pom.xml solved my same problem.</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;annotationProcessorPaths&gt;\n                    &lt;path&gt;\n                        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;version&gt;RELEASE&lt;/version&gt;\n                    &lt;/path&gt;\n                &lt;/annotationProcessorPaths&gt;\n                ...\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26613352,"reputation":11,"user_id":20233210,"display_name":"Anju"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697071606,"creation_date":1697071606,"answer_id":77277094,"question_id":51193039,"body_markdown":"Here are the steps I followed to resolve this:\r\n\r\n**Step1**: Download Lombok Jar File &amp; Install it.\r\n\r\n**Step2**: edit C:/Program Files/Eclipse/eclipse.ini , &amp; provide path of lombok jar in this file like below:\r\n\r\n`-javaagent:H:\\Jars\\lombok-1.18.24.jar`\r\n\r\n**Step3**: Restart Eclipse : project &gt; clean","title":"Lombok/Eclipse Issues - I can compile but I cannot run","body":"<p>Here are the steps I followed to resolve this:</p>\n<p><strong>Step1</strong>: Download Lombok Jar File &amp; Install it.</p>\n<p><strong>Step2</strong>: edit C:/Program Files/Eclipse/eclipse.ini , &amp; provide path of lombok jar in this file like below:</p>\n<p><code>-javaagent:H:\\Jars\\lombok-1.18.24.jar</code></p>\n<p><strong>Step3</strong>: Restart Eclipse : project &gt; clean</p>\n"}],"owner":{"account_id":1964374,"reputation":543,"user_id":1767688,"accept_rate":75,"display_name":"SpaceCowboy"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2251,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1697071606,"creation_date":1530798520,"question_id":51193039,"body_markdown":"I&#39;m having an issue with Lombok or Eclipse, not sure which. I have a Spring Boot maven project for which I am using Lombok. I&#39;ve added this in my pom.xml file and I&#39;ve used the lombok install for eclipse.\r\n\r\nWhats happening is that I can do a `mvn clean` and a `mvn install` and a maven update on the project and everything builds as expected. As soon as I go to run the project errors start to appear and I get error such as:\r\n\r\n    java.lang.Error: Unresolved compilation problems: \r\n    \tThe method getxxx() is undefined for the type xxxxxx\r\n\r\n\r\nIs there anything that can happen when running the project that can some how strip out lombok?!\r\n\r\n\r\nI&#39;m running Eclipse Oxygen (4.7.3) with lombok v1.16.18 &quot;Dancing Elephant&quot; any help would be much appreciated. ","title":"Lombok/Eclipse Issues - I can compile but I cannot run","body":"<p>I'm having an issue with Lombok or Eclipse, not sure which. I have a Spring Boot maven project for which I am using Lombok. I've added this in my pom.xml file and I've used the lombok install for eclipse.</p>\n\n<p>Whats happening is that I can do a <code>mvn clean</code> and a <code>mvn install</code> and a maven update on the project and everything builds as expected. As soon as I go to run the project errors start to appear and I get error such as:</p>\n\n<pre><code>java.lang.Error: Unresolved compilation problems: \n    The method getxxx() is undefined for the type xxxxxx\n</code></pre>\n\n<p>Is there anything that can happen when running the project that can some how strip out lombok?!</p>\n\n<p>I'm running Eclipse Oxygen (4.7.3) with lombok v1.16.18 \"Dancing Elephant\" any help would be much appreciated. </p>\n"},{"tags":["java","jframe"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1697071667,"post_id":77277082,"comment_id":136234561,"body_markdown":"`ImageIcon` is renowned for failing silently when it can&#39;t load the image.  I would recommend using [`ImageIO.read`](https://docs.oracle.com/javase/tutorial/2d/images/loadimage.html) instead, this will throw an exception if the image failed to load - this is a good starting point.  Continued failure without exception would require a [mcve]","body":"<code>ImageIcon</code> is renowned for failing silently when it can&#39;t load the image.  I would recommend using <a href=\"https://docs.oracle.com/javase/tutorial/2d/images/loadimage.html\" rel=\"nofollow noreferrer\"><code>ImageIO.read</code></a> instead, this will throw an exception if the image failed to load - this is a good starting point.  Continued failure without exception would require a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1697073236,"post_id":77277082,"comment_id":136234666,"body_markdown":"*I have all png file in the correct place* - how do you know? What is the &quot;correct place&quot;? If the image was in the correct place then your code should work. Search the site. This question is asked over and over.","body":"<i>I have all png file in the correct place</i> - how do you know? What is the &quot;correct place&quot;? If the image was in the correct place then your code should work. Search the site. This question is asked over and over."}],"owner":{"account_id":29567284,"reputation":1,"user_id":22660358,"display_name":"Adam Traboulay"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697071441,"creation_date":1697071441,"question_id":77277082,"body_markdown":"\t\t//Draw Bart\r\n\t\tImageIcon imgBart = new ImageIcon(&quot;bart.png&quot;);\r\n\t\tg2.drawImage(imgBart.getImage(), 1, 50, this);\r\n\r\n\r\n\r\nI tried multiple variations of code but the image is still not outputting towards the frame. I have all png file in the correct place already but it does not output.","title":"My picture is not outputting to the frame","body":"<pre><code>    //Draw Bart\n    ImageIcon imgBart = new ImageIcon(&quot;bart.png&quot;);\n    g2.drawImage(imgBart.getImage(), 1, 50, this);\n</code></pre>\n<p>I tried multiple variations of code but the image is still not outputting towards the frame. I have all png file in the correct place already but it does not output.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":19081660,"reputation":520,"user_id":13933721,"display_name":"Mr. Kenneth"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697071265,"creation_date":1697071265,"answer_id":77277076,"question_id":77271194,"body_markdown":"I got it. The code needed is:\r\n\r\n```\r\nString url = MvcUriComponentsBuilder\r\n        .fromMappingName(ControllerName.class, &quot;methodName&quot;, &quot;param1&quot;) // where starting from &quot;param1&quot; can be multiple params separated by comma「,」\r\n        .toString();\r\n```\r\n\r\nNow for my question, the actual code would be:\r\n\r\n```\r\n# /api/v1/auth/password-change/token1234\r\nString url = MvcUriComponentsBuilder\r\n        .fromMappingName(AuthenticationController.class, &quot;passwordChange&quot;, &quot;token1234&quot;)\r\n        .toString();\r\n```\r\n\r\nIf you need multiple parameters then:\r\n\r\n```\r\n# /api/v1/auth/xxxx/{param1}/yyyy/{param2}\r\n# becomes\r\n# /api/v1/auth/xxxx/param1Val/yyyy/param2Val\r\nString url = MvcUriComponentsBuilder\r\n        .fromMappingName(ControllerName.class, &quot;methodName&quot;, &quot;param1Val&quot;, &quot;param2Val&quot;)\r\n        .toString();\r\n```","title":"MvcUriComponentsBuilder to generate a url from named routes with parameter","body":"<p>I got it. The code needed is:</p>\n<pre><code>String url = MvcUriComponentsBuilder\n        .fromMappingName(ControllerName.class, &quot;methodName&quot;, &quot;param1&quot;) // where starting from &quot;param1&quot; can be multiple params separated by comma「,」\n        .toString();\n</code></pre>\n<p>Now for my question, the actual code would be:</p>\n<pre><code># /api/v1/auth/password-change/token1234\nString url = MvcUriComponentsBuilder\n        .fromMappingName(AuthenticationController.class, &quot;passwordChange&quot;, &quot;token1234&quot;)\n        .toString();\n</code></pre>\n<p>If you need multiple parameters then:</p>\n<pre><code># /api/v1/auth/xxxx/{param1}/yyyy/{param2}\n# becomes\n# /api/v1/auth/xxxx/param1Val/yyyy/param2Val\nString url = MvcUriComponentsBuilder\n        .fromMappingName(ControllerName.class, &quot;methodName&quot;, &quot;param1Val&quot;, &quot;param2Val&quot;)\n        .toString();\n</code></pre>\n"}],"owner":{"account_id":19081660,"reputation":520,"user_id":13933721,"display_name":"Mr. Kenneth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77277076,"answer_count":1,"score":1,"last_activity_date":1697071265,"creation_date":1697011274,"question_id":77271194,"body_markdown":"I just started with Spring Boot and I would like to generate a URL based on named routes. I was able to start my code halfway using the answer from [here][1]. However, the route has a parameter and I want to include that in my generated route:\r\n\r\n\r\nAuthenticationController.java\r\n\r\n```\r\n@RestController\r\n@RequestMapping(path = &quot;/api/v1/auth&quot;, name = &quot;auth&quot;)\r\npublic class AuthenticationController {\r\n\r\n    @PostMapping(path = &quot;/password-change/{token}&quot;, name = &quot;passwordChange&quot;)\r\n    public void passwordChange(@PathVariable(&quot;token&quot;) String token){\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe method somewhere.java\r\n```\r\nString url = MvcUriComponentsBuilder.fromMappingName(&quot;auth#passwordChange&quot;).build();\r\n```\r\n\r\nWith or without the `{token}` in the path, the url value is always `&quot;/api/v1/auth/password-change/&quot;`. How should I generate the full url using the name route?\r\n\r\nI also tried using the `buildAndExpand` method still the same result:\r\n\r\n```\r\nString url = MvcUriComponentsBuilder\r\n        .fromMappingName(&quot;auth#passwordChange&quot;)\r\n        .buildAndExpand(&quot;token1234&quot;)\r\n        .toString();\r\n```\r\n\r\nMy expected result should be `&quot;/api/v1/auth/password-change/token1234&quot;`\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/57055314/13933721","title":"MvcUriComponentsBuilder to generate a url from named routes with parameter","body":"<p>I just started with Spring Boot and I would like to generate a URL based on named routes. I was able to start my code halfway using the answer from <a href=\"https://stackoverflow.com/a/57055314/13933721\">here</a>. However, the route has a parameter and I want to include that in my generated route:</p>\n<p>AuthenticationController.java</p>\n<pre><code>@RestController\n@RequestMapping(path = &quot;/api/v1/auth&quot;, name = &quot;auth&quot;)\npublic class AuthenticationController {\n\n    @PostMapping(path = &quot;/password-change/{token}&quot;, name = &quot;passwordChange&quot;)\n    public void passwordChange(@PathVariable(&quot;token&quot;) String token){\n    }\n\n}\n</code></pre>\n<p>The method somewhere.java</p>\n<pre><code>String url = MvcUriComponentsBuilder.fromMappingName(&quot;auth#passwordChange&quot;).build();\n</code></pre>\n<p>With or without the <code>{token}</code> in the path, the url value is always <code>&quot;/api/v1/auth/password-change/&quot;</code>. How should I generate the full url using the name route?</p>\n<p>I also tried using the <code>buildAndExpand</code> method still the same result:</p>\n<pre><code>String url = MvcUriComponentsBuilder\n        .fromMappingName(&quot;auth#passwordChange&quot;)\n        .buildAndExpand(&quot;token1234&quot;)\n        .toString();\n</code></pre>\n<p>My expected result should be <code>&quot;/api/v1/auth/password-change/token1234&quot;</code></p>\n"},{"tags":["java","opengl","3d","rendering","lwjgl"],"comments":[{"owner":{"account_id":3060069,"reputation":1907,"user_id":2592931,"display_name":"abiessu"},"score":0,"creation_date":1383322554,"post_id":19730676,"comment_id":29314596,"body_markdown":"As long as a landmass is assumed to be one-to-one (that is, for every plane point, there is exactly one height associated, e.g., for every `(x,y)` coordinate pair, there is exactly one `z` associated), then you can connect the closest up to `n` points to each point with lines as a pseudo-triangularization.  There are probably other (better) ways of doing this as well.","body":"As long as a landmass is assumed to be one-to-one (that is, for every plane point, there is exactly one height associated, e.g., for every <code>(x,y)</code> coordinate pair, there is exactly one <code>z</code> associated), then you can connect the closest up to <code>n</code> points to each point with lines as a pseudo-triangularization.  There are probably other (better) ways of doing this as well."},{"owner":{"account_id":3239757,"reputation":672,"user_id":2733085,"accept_rate":75,"display_name":"Ryxuma"},"score":0,"creation_date":1383322627,"post_id":19730676,"comment_id":29314647,"body_markdown":"@abiessu no for every the (x, y) coordinate there is HEIGHT many z&#39;s.","body":"@abiessu no for every the (x, y) coordinate there is HEIGHT many z&#39;s."},{"owner":{"account_id":19185,"reputation":51300,"user_id":44729,"accept_rate":100,"display_name":"genpfault"},"score":4,"creation_date":1383322658,"post_id":19730676,"comment_id":29314663,"body_markdown":"[Isosurface](http://en.wikipedia.org/wiki/Isosurface) extraction, perhaps via [marching cubes](http://en.wikipedia.org/wiki/Marching_cubes).","body":"<a href=\"http://en.wikipedia.org/wiki/Isosurface\" rel=\"nofollow noreferrer\">Isosurface</a> extraction, perhaps via <a href=\"http://en.wikipedia.org/wiki/Marching_cubes\" rel=\"nofollow noreferrer\">marching cubes</a>."}],"answers":[{"tags":[],"owner":{"account_id":3557623,"reputation":1,"user_id":2970944,"display_name":"Alexdsz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384196996,"creation_date":1383961005,"answer_id":19871392,"question_id":19730676,"body_markdown":"If you have the points describing the outer shell of your terrain, this package is VERY good (fast) for calculating the Delaunay Triangulation of that set of points:\r\n\r\nhttp://www.cs.bgu.ac.il/~benmoshe/DT/\r\n\r\nYou can later draw each of the triangles from the triangulation. I made a couple or methods for converting everything back to doubles for use with JOGL that you might find helpful:\r\n\r\n    public static ArrayList&lt;Point_dt[]&gt; DTtoTriListDT(Delaunay_Triangulation DT){\r\n\tArrayList&lt;Point_dt[]&gt; triangles = new ArrayList&lt;Point_dt[]&gt;();\r\n\tPoint_dt[] triangle = new Point_dt[3];\r\n\t\r\n\tIterator&lt;Triangle_dt&gt; surface = DT.trianglesIterator();\r\n\twhile(surface.hasNext()){\r\n\t\tTriangle_dt tri = surface.next();\r\n\t\ttriangle[0] = tri.p1();\r\n\t\ttriangle[1] = tri.p2();\r\n\t\ttriangle[2] = tri.p3();\r\n\t\ttriangles.add(triangle);\r\n\t}\r\n\t\r\n\treturn triangles;}\r\n\r\nand\r\n\r\n    public static ArrayList&lt;double[][]&gt; DTtoTriList(Delaunay_Triangulation DT){\r\n\tArrayList&lt;Point_dt[]&gt; trianglesdt = Algebra.DTtoTriListDT(DT);\r\n\tArrayList&lt;double[][]&gt; triangles = new ArrayList&lt;double[][]&gt;();\r\n\tdouble[][] triangle = new double[3][3];\r\n\t\r\n\tIterator&lt;Point_dt[]&gt; surface = trianglesdt.iterator();\r\n\twhile(surface.hasNext()){\r\n\t\tPoint_dt[] tri = surface.next();\r\n\r\n\t\ttriangle[0][0] = tri[0].x();\r\n\t\ttriangle[0][1] = tri[0].y();\r\n\t\ttriangle[0][2] = tri[0].z();\r\n\r\n\t\ttriangle[1][0] = tri[1].x();\r\n\t\ttriangle[1][1] = tri[1].y();\r\n\t\ttriangle[1][2] = tri[1].z();\r\n\r\n\t\ttriangle[2][0] = tri[2].x();\r\n\t\ttriangle[2][1] = tri[2].y();\r\n\t\ttriangle[2][2] = tri[2].z();\r\n\t\t\t\t\t\r\n\t\ttriangles.add(triangle);\r\n\t}\r\n\t\r\n\treturn triangles;\r\n}\r\n\r\nI have it all in an Algebra class (FYI).\r\nWith the last method, you get an ArrayList with tree sets of three doubles on each entry (each set contains the three coordinates of each point and each entry is one triangle).","title":"How to draw 3D terrain with triangles?","body":"<p>If you have the points describing the outer shell of your terrain, this package is VERY good (fast) for calculating the Delaunay Triangulation of that set of points:</p>\n\n<p><a href=\"http://www.cs.bgu.ac.il/~benmoshe/DT/\" rel=\"nofollow\">http://www.cs.bgu.ac.il/~benmoshe/DT/</a></p>\n\n<p>You can later draw each of the triangles from the triangulation. I made a couple or methods for converting everything back to doubles for use with JOGL that you might find helpful:</p>\n\n<pre><code>public static ArrayList&lt;Point_dt[]&gt; DTtoTriListDT(Delaunay_Triangulation DT){\nArrayList&lt;Point_dt[]&gt; triangles = new ArrayList&lt;Point_dt[]&gt;();\nPoint_dt[] triangle = new Point_dt[3];\n\nIterator&lt;Triangle_dt&gt; surface = DT.trianglesIterator();\nwhile(surface.hasNext()){\n    Triangle_dt tri = surface.next();\n    triangle[0] = tri.p1();\n    triangle[1] = tri.p2();\n    triangle[2] = tri.p3();\n    triangles.add(triangle);\n}\n\nreturn triangles;}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>public static ArrayList&lt;double[][]&gt; DTtoTriList(Delaunay_Triangulation DT){\nArrayList&lt;Point_dt[]&gt; trianglesdt = Algebra.DTtoTriListDT(DT);\nArrayList&lt;double[][]&gt; triangles = new ArrayList&lt;double[][]&gt;();\ndouble[][] triangle = new double[3][3];\n\nIterator&lt;Point_dt[]&gt; surface = trianglesdt.iterator();\nwhile(surface.hasNext()){\n    Point_dt[] tri = surface.next();\n\n    triangle[0][0] = tri[0].x();\n    triangle[0][1] = tri[0].y();\n    triangle[0][2] = tri[0].z();\n\n    triangle[1][0] = tri[1].x();\n    triangle[1][1] = tri[1].y();\n    triangle[1][2] = tri[1].z();\n\n    triangle[2][0] = tri[2].x();\n    triangle[2][1] = tri[2].y();\n    triangle[2][2] = tri[2].z();\n\n    triangles.add(triangle);\n}\n\nreturn triangles;\n</code></pre>\n\n<p>}</p>\n\n<p>I have it all in an Algebra class (FYI).\nWith the last method, you get an ArrayList with tree sets of three doubles on each entry (each set contains the three coordinates of each point and each entry is one triangle).</p>\n"},{"tags":[],"owner":{"account_id":1161585,"reputation":10763,"user_id":1140976,"accept_rate":74,"display_name":"the swine"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1697069966,"creation_date":1400084664,"answer_id":23660174,"question_id":19730676,"body_markdown":"Absolutely amazing question! I couldn&#39;t resist but to play with boxes, since boxes are sexy. It is actually fairly easy to produce boxes with the hidden faces omitted.\r\n\r\nThe following algorithm takes a list of 3D positions of `true` in your grid, which is easy to obtain by simply scanning through the grid and filling an array. Also with this data format you can store much larger grid, provided that the terrain is reasonably sparse. Up front, apologies for my spartan for-each loops, I just wanted to have the code in-place and avoid writing dozens of function objects or using lambdas. Also apologies for using C++ instead of Java, don&#39;t have javac at home and I&#39;m not really good with it anyway. Here goes:\r\n\r\n    #include &lt;vector&gt;\r\n    #include &lt;map&gt;\r\n    #include &lt;set&gt;\r\n    #include &lt;utility&gt;\r\n    #include &lt;assert.h&gt;\r\n    #include &lt;math.h&gt;\r\n\r\n    struct Pos3 {\r\n        int x, y, z;\r\n\r\n        Pos3(int _x = 0, int _y = 0, int _z = 0);\r\n        bool operator &lt;(const Pos3 &amp;other) const;\r\n    };\r\n\r\n    std::vector&lt;int&gt; index_buffer;\r\n    std::vector&lt;float&gt; vertex_buffer;\r\n\r\n    void onInitialize()\r\n    {\r\n        const int N = 32;\r\n        std::vector&lt;Pos3&gt; points;\r\n        GeneratePoints(points, N);\r\n        // input: bunch of points in NxNxN box (easy to get from a boolean array,\r\n        // can have much larger terrains if stored like this)\r\n\r\n        std::set&lt;Pos3&gt; point_set;\r\n        point_set.insert(points.begin(), points.end());\r\n        // put all the points to a set to be able to lookup neighbors (not needed with an array)\r\n\r\n        std::vector&lt;std::vector&lt;int&gt; &gt; polygons;\r\n        polygons.reserve(3 * points.size()); // guess\r\n        std::map&lt;Pos3, int&gt; vertex_map;\r\n        for(size_t i = 0, n = points.size(); i &lt; n; ++ i) {\r\n            Pos3 p = points[i], corners[8] = {\r\n                p, Pos3(p.x + 1, p.y, p.z), Pos3(p.x + 1, p.y + 1, p.z), Pos3(p.x, p.y + 1, p.z),\r\n                Pos3(p.x, p.y, p.z + 1), Pos3(p.x + 1, p.y, p.z + 1), Pos3(p.x + 1, p.y + 1, p.z + 1),\r\n                Pos3(p.x, p.y + 1, p.z + 1)\r\n            };\r\n            // get corners of a cube\r\n\r\n            static const int sides[][3 + 4] = {\r\n                0, -1,  0,\t4, 5, 1, 0,\t\t\t 1, 0, 0,\t5, 6, 2, 1,\r\n                0,  1,  0,\t6, 7, 3, 2,\t\t\t-1, 0, 0,\t7, 4, 0, 3,\r\n                0,  0, -1,\t0, 1, 2, 3,\t\t\t 0, 0, 1,\t7, 6, 5, 4\r\n            };\r\n            // directions and side quad indices\r\n\r\n            for(int j = 0; j &lt; 6; ++ j) {\r\n                Pos3 n(p.x + sides[j][0], p.y + sides[j][1], p.z + sides[j][2]); // position of a neighbor\r\n                if(point_set.find(n) != point_set.end())\r\n                    continue; // have a neighbor, will not triangulate this side\r\n\r\n                polygons.resize(polygons.size() + 1);\r\n                std::vector&lt;int&gt; &amp;poly = polygons.back(); // or use emplace_back() in c++11\r\n                poly.resize(4); // form quads\r\n                for(int v = 0; v &lt; 4; ++ v) {\r\n                    Pos3 vert = corners[sides[j][3 + v]];\r\n                    std::map&lt;Pos3, int&gt;::iterator it; // use map to reuse vertices\r\n                    if((it = vertex_map.find(vert)) == vertex_map.end())\r\n                        vertex_map[vert] = poly[v] = vertex_map.size(); // new vertex\r\n                    else\r\n                        poly[v] = (*it).second; // existing vertex\r\n                }\r\n            }\r\n            // generate sides, skip invisible sides\r\n            // note that this still triangulates cavities, would have to flood-fill\r\n            // outside area and then set all that is not outside to opaque (did not\r\n            // solve that as this is also a valid behavior)\r\n        }\r\n\r\n        vertex_buffer.resize(vertex_map.size() * 3);\r\n        for(std::map&lt;Pos3, int&gt;::const_iterator it = vertex_map.begin(), e = vertex_map.end(); it != e; ++ it) {\r\n            size_t i = (*it).second * 3;\r\n            vertex_buffer[i + 0] = ((*it).first.x + .5f) / (N + 1) * 2 - 1;\r\n            vertex_buffer[i + 1] = ((*it).first.y + .5f) / (N + 1) * 2 - 1;\r\n            vertex_buffer[i + 2] = ((*it).first.z + .5f) / (N + 1) * 2 - 1;\r\n        }\r\n        // convert points from the discrete domain\r\n        // to a unit 3D cube centered around the origin\r\n\r\n        index_buffer.reserve(polygons.size() * 2 * 3); // approximate number of triangles\r\n        for(size_t i = 0, n = polygons.size(); i &lt; n; ++ i) {\r\n            const std::vector&lt;int&gt; &amp;poly = polygons[i];\r\n            for(size_t j = 2, n = poly.size(); j &lt; n; ++ j) {\r\n                index_buffer.push_back(poly[0]);\r\n                index_buffer.push_back(poly[j]);\r\n                index_buffer.push_back(poly[j - 1]);\r\n            }\r\n        }\r\n        // convert polygons (those are actually quads) to triangles\r\n    }\r\n\r\nThere is also some more code that generates normals (ommited for the sake of clarity), the output looks like this:\r\n\r\n![Julia set as cubes, wireframe][3]\r\n\r\nThe shape is a Julia set generated on a discrete lattice, you might recognize the shape when you turn it arround.\r\n\r\nThis is actually pretty similar to what you would get by the Delaunay triangulation if you could easily remove your interior points. The generated shape is hollow. There can be some &quot;bubbles&quot; in the shape, in case the booleans also contain a bubble (does not occur with Julia). This is easily fixed by flood-filling the booleans in order to fill those up.\r\n\r\nNext, we can apply Catmull-Clark subdivision in order to get a smoother mesh:\r\n\r\n    typedef std::map&lt;std::pair&lt;int, int&gt;, std::pair&lt;size_t, int&gt; &gt; EdgeMap;\r\n\r\n    static bool Get_EdgeID(size_t &amp;eid, int a, int b, EdgeMap &amp;edges)\r\n    {\r\n        std::pair&lt;int, int&gt; e(std::min(a, b), std::max(a, b));\r\n        EdgeMap::iterator it = edges.find(e);\r\n        if(it == edges.end()) {\r\n            edges[e] = std::make_pair(eid = edges.size(), 1); // id, count\r\n            return true; // new edge\r\n        } else {\r\n            eid = (*it).second.first; // get id\r\n            ++ (*it).second.second; // increase count\r\n            return false; // no new edge\r\n        }\r\n    }\r\n\r\n    void CatClark(std::vector&lt;std::vector&lt;int&gt; &gt; &amp;src_quads, std::vector&lt;float&gt; &amp;src_verts)\r\n    {\r\n        const static float vpw[4] = {9.0f, 3.0f, 1.0f, 3.0f};\r\n        const static float epw[4] = {3.0f, 3.0f, 1.0f, 1.0f};\r\n\r\n        std::vector&lt;std::vector&lt;int&gt; &gt; dst_quads(src_quads.size() * 4, std::vector&lt;int&gt;(4)); // will produce quads\r\n        std::vector&lt;float&gt; dst_verts(src_verts.size() + src_quads.size() * 3, 0); // alloc s&#168;pace for vertices\r\n\r\n        EdgeMap edges;\r\n        std::vector&lt;int&gt; face_valences(src_verts.size() / 3, 0);\r\n        const size_t off_vp = src_quads.size(), off_ep = off_vp + src_verts.size() / 3;\r\n        for(size_t j = 0; j &lt; off_vp; ++ j) {\r\n            assert(src_quads[j].size() == 4); // otherwise won&#39;t work\r\n            size_t eid[4];\r\n            for(int k = 0; k &lt; 4; ++ k) {\r\n                int quad[4];\r\n                for(int i = 0; i &lt; 4; ++ i)\r\n                    quad[i] = src_quads[j][(i + k) &amp; 3]; // get the 4 vertices (but rotate them each k iteration)\r\n                if(Get_EdgeID(eid[k], quad[0], quad[1], edges)) // create edges\r\n                    dst_verts.insert(dst_verts.end(), 3, .0f); // must add new vertex to accomodate subdivided edge point\r\n                ++ face_valences[quad[0]]; // update face-valence\r\n                for(int n = 0; n &lt; 3; ++ n)\r\n                    dst_verts[j * 3 + n] += 0.25f * src_verts[quad[0] * 3 + n]; // increment face point \r\n                for(int i = 0; i &lt; 4; ++ i) {\r\n                    for(int n = 0; n &lt; 3; ++ n) {\r\n                        dst_verts[(off_vp + quad[0]) * 3 + n] += vpw[i] * src_verts[quad[i] * 3 + n]; // incremente vertex point\r\n                        dst_verts[(off_ep + eid[k]) * 3 + n] += epw[i] * src_verts[quad[i] * 3 + n]; // increment edge point\r\n                    }\r\n                }\r\n            }\r\n            for(int k = 0; k &lt; 4; ++ k) { // make child faces\r\n                dst_quads[4 * j + k][0] = j;\r\n                dst_quads[4 * j + k][4] = off_ep + eid[(3 + k) &amp; 3]; \r\n                dst_quads[4 * j + k][5] = off_ep + eid[(0 + k) &amp; 3]; \r\n                dst_quads[4 * j + k][6] = off_vp + src_quads[j][k];\r\n            }\r\n        }\r\n        for(size_t j = 0, n = src_verts.size() / 3; j &lt; n; ++ j) {\r\n            for(int n = 0; n &lt; 3; ++ n)\r\n                dst_verts[(off_vp + j) * 3 + n] *= 0.0625f / float(face_valences[j]);\r\n        }\r\n        for(EdgeMap::const_iterator it = edges.begin(), e = edges.end(); it != e; ++ it) {\r\n            size_t j = (*it).second.first;\r\n            float rvalence = 0.1250f / float((*it).second.second);\r\n            for(int n = 0; n &lt; 3; ++ n)\r\n                dst_verts[(off_ep + j) * 3 + n] *= rvalence;\r\n        }\r\n        dst_quads.swap(src_quads);\r\n        dst_verts.swap(src_verts);\r\n    }\r\n\r\nThis algorithm was adapted to work with STL containers from I&#241;igo &#39;iq&#39; Quilez / rgba, &quot;Tricks and techniques for rgba&#39;s past and future intros&quot;, Breakpoint, 2007.\r\n\r\nThis gives output quite similar to what you would get with marching cubes / marching tetrahedrons / marching triangles, except that it is always higher resolution than that of the original lattice (with the above methods you can easily change the triangulation resolution). A slightly different view of the same data:\r\n\r\n![Julia set as cubes after double Catmull-Clark subdivision, wireframe][7]\r\n\r\nOr without wireframe:\r\n\r\n![Julia set as cubes after double Catmull-Clark subdivision, smooth shaded][8]\r\n\r\nThe complete source code, along with Visual Studio workspace and win32 binaries can be found at [here][9]. It uses GLUT and the old fixed-function pipeline to display the generated geometry (only for simplicity and portability, otherwise I&#39;d have to include GLEW or the like). I really enjoyed toying around with your question, I hope you will like the output ...\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/IDgnX.png\r\n  [2]: http://i.stack.imgur.com/IDgnX.png\r\n  [3]: http://i.stack.imgur.com/IDgnX.png\r\n  [4]: http://i.stack.imgur.com/IDgnX.png\r\n  [5]: http://i.stack.imgur.com/IDgnX.png\r\n  [6]: http://i.stack.imgur.com/IDgnX.png\r\n  [7]: http://i.stack.imgur.com/vrkjv.png\r\n  [8]: http://i.stack.imgur.com/iUvCl.png\r\n  [9]: http://www.stud.fit.vutbr.cz/~xpolok00/proj/Boxels.zip\r\n","title":"How to draw 3D terrain with triangles?","body":"<p>Absolutely amazing question! I couldn't resist but to play with boxes, since boxes are sexy. It is actually fairly easy to produce boxes with the hidden faces omitted.</p>\n<p>The following algorithm takes a list of 3D positions of <code>true</code> in your grid, which is easy to obtain by simply scanning through the grid and filling an array. Also with this data format you can store much larger grid, provided that the terrain is reasonably sparse. Up front, apologies for my spartan for-each loops, I just wanted to have the code in-place and avoid writing dozens of function objects or using lambdas. Also apologies for using C++ instead of Java, don't have javac at home and I'm not really good with it anyway. Here goes:</p>\n<pre><code>#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;set&gt;\n#include &lt;utility&gt;\n#include &lt;assert.h&gt;\n#include &lt;math.h&gt;\n\nstruct Pos3 {\n    int x, y, z;\n\n    Pos3(int _x = 0, int _y = 0, int _z = 0);\n    bool operator &lt;(const Pos3 &amp;other) const;\n};\n\nstd::vector&lt;int&gt; index_buffer;\nstd::vector&lt;float&gt; vertex_buffer;\n\nvoid onInitialize()\n{\n    const int N = 32;\n    std::vector&lt;Pos3&gt; points;\n    GeneratePoints(points, N);\n    // input: bunch of points in NxNxN box (easy to get from a boolean array,\n    // can have much larger terrains if stored like this)\n\n    std::set&lt;Pos3&gt; point_set;\n    point_set.insert(points.begin(), points.end());\n    // put all the points to a set to be able to lookup neighbors (not needed with an array)\n\n    std::vector&lt;std::vector&lt;int&gt; &gt; polygons;\n    polygons.reserve(3 * points.size()); // guess\n    std::map&lt;Pos3, int&gt; vertex_map;\n    for(size_t i = 0, n = points.size(); i &lt; n; ++ i) {\n        Pos3 p = points[i], corners[8] = {\n            p, Pos3(p.x + 1, p.y, p.z), Pos3(p.x + 1, p.y + 1, p.z), Pos3(p.x, p.y + 1, p.z),\n            Pos3(p.x, p.y, p.z + 1), Pos3(p.x + 1, p.y, p.z + 1), Pos3(p.x + 1, p.y + 1, p.z + 1),\n            Pos3(p.x, p.y + 1, p.z + 1)\n        };\n        // get corners of a cube\n\n        static const int sides[][3 + 4] = {\n            0, -1,  0,  4, 5, 1, 0,          1, 0, 0,   5, 6, 2, 1,\n            0,  1,  0,  6, 7, 3, 2,         -1, 0, 0,   7, 4, 0, 3,\n            0,  0, -1,  0, 1, 2, 3,          0, 0, 1,   7, 6, 5, 4\n        };\n        // directions and side quad indices\n\n        for(int j = 0; j &lt; 6; ++ j) {\n            Pos3 n(p.x + sides[j][0], p.y + sides[j][1], p.z + sides[j][2]); // position of a neighbor\n            if(point_set.find(n) != point_set.end())\n                continue; // have a neighbor, will not triangulate this side\n\n            polygons.resize(polygons.size() + 1);\n            std::vector&lt;int&gt; &amp;poly = polygons.back(); // or use emplace_back() in c++11\n            poly.resize(4); // form quads\n            for(int v = 0; v &lt; 4; ++ v) {\n                Pos3 vert = corners[sides[j][3 + v]];\n                std::map&lt;Pos3, int&gt;::iterator it; // use map to reuse vertices\n                if((it = vertex_map.find(vert)) == vertex_map.end())\n                    vertex_map[vert] = poly[v] = vertex_map.size(); // new vertex\n                else\n                    poly[v] = (*it).second; // existing vertex\n            }\n        }\n        // generate sides, skip invisible sides\n        // note that this still triangulates cavities, would have to flood-fill\n        // outside area and then set all that is not outside to opaque (did not\n        // solve that as this is also a valid behavior)\n    }\n\n    vertex_buffer.resize(vertex_map.size() * 3);\n    for(std::map&lt;Pos3, int&gt;::const_iterator it = vertex_map.begin(), e = vertex_map.end(); it != e; ++ it) {\n        size_t i = (*it).second * 3;\n        vertex_buffer[i + 0] = ((*it).first.x + .5f) / (N + 1) * 2 - 1;\n        vertex_buffer[i + 1] = ((*it).first.y + .5f) / (N + 1) * 2 - 1;\n        vertex_buffer[i + 2] = ((*it).first.z + .5f) / (N + 1) * 2 - 1;\n    }\n    // convert points from the discrete domain\n    // to a unit 3D cube centered around the origin\n\n    index_buffer.reserve(polygons.size() * 2 * 3); // approximate number of triangles\n    for(size_t i = 0, n = polygons.size(); i &lt; n; ++ i) {\n        const std::vector&lt;int&gt; &amp;poly = polygons[i];\n        for(size_t j = 2, n = poly.size(); j &lt; n; ++ j) {\n            index_buffer.push_back(poly[0]);\n            index_buffer.push_back(poly[j]);\n            index_buffer.push_back(poly[j - 1]);\n        }\n    }\n    // convert polygons (those are actually quads) to triangles\n}\n</code></pre>\n<p>There is also some more code that generates normals (ommited for the sake of clarity), the output looks like this:</p>\n<p><img src=\"https://i.stack.imgur.com/IDgnX.png\" alt=\"Julia set as cubes, wireframe\" /></p>\n<p>The shape is a Julia set generated on a discrete lattice, you might recognize the shape when you turn it arround.</p>\n<p>This is actually pretty similar to what you would get by the Delaunay triangulation if you could easily remove your interior points. The generated shape is hollow. There can be some &quot;bubbles&quot; in the shape, in case the booleans also contain a bubble (does not occur with Julia). This is easily fixed by flood-filling the booleans in order to fill those up.</p>\n<p>Next, we can apply Catmull-Clark subdivision in order to get a smoother mesh:</p>\n<pre><code>typedef std::map&lt;std::pair&lt;int, int&gt;, std::pair&lt;size_t, int&gt; &gt; EdgeMap;\n\nstatic bool Get_EdgeID(size_t &amp;eid, int a, int b, EdgeMap &amp;edges)\n{\n    std::pair&lt;int, int&gt; e(std::min(a, b), std::max(a, b));\n    EdgeMap::iterator it = edges.find(e);\n    if(it == edges.end()) {\n        edges[e] = std::make_pair(eid = edges.size(), 1); // id, count\n        return true; // new edge\n    } else {\n        eid = (*it).second.first; // get id\n        ++ (*it).second.second; // increase count\n        return false; // no new edge\n    }\n}\n\nvoid CatClark(std::vector&lt;std::vector&lt;int&gt; &gt; &amp;src_quads, std::vector&lt;float&gt; &amp;src_verts)\n{\n    const static float vpw[4] = {9.0f, 3.0f, 1.0f, 3.0f};\n    const static float epw[4] = {3.0f, 3.0f, 1.0f, 1.0f};\n\n    std::vector&lt;std::vector&lt;int&gt; &gt; dst_quads(src_quads.size() * 4, std::vector&lt;int&gt;(4)); // will produce quads\n    std::vector&lt;float&gt; dst_verts(src_verts.size() + src_quads.size() * 3, 0); // alloc s¨pace for vertices\n\n    EdgeMap edges;\n    std::vector&lt;int&gt; face_valences(src_verts.size() / 3, 0);\n    const size_t off_vp = src_quads.size(), off_ep = off_vp + src_verts.size() / 3;\n    for(size_t j = 0; j &lt; off_vp; ++ j) {\n        assert(src_quads[j].size() == 4); // otherwise won't work\n        size_t eid[4];\n        for(int k = 0; k &lt; 4; ++ k) {\n            int quad[4];\n            for(int i = 0; i &lt; 4; ++ i)\n                quad[i] = src_quads[j][(i + k) &amp; 3]; // get the 4 vertices (but rotate them each k iteration)\n            if(Get_EdgeID(eid[k], quad[0], quad[1], edges)) // create edges\n                dst_verts.insert(dst_verts.end(), 3, .0f); // must add new vertex to accomodate subdivided edge point\n            ++ face_valences[quad[0]]; // update face-valence\n            for(int n = 0; n &lt; 3; ++ n)\n                dst_verts[j * 3 + n] += 0.25f * src_verts[quad[0] * 3 + n]; // increment face point \n            for(int i = 0; i &lt; 4; ++ i) {\n                for(int n = 0; n &lt; 3; ++ n) {\n                    dst_verts[(off_vp + quad[0]) * 3 + n] += vpw[i] * src_verts[quad[i] * 3 + n]; // incremente vertex point\n                    dst_verts[(off_ep + eid[k]) * 3 + n] += epw[i] * src_verts[quad[i] * 3 + n]; // increment edge point\n                }\n            }\n        }\n        for(int k = 0; k &lt; 4; ++ k) { // make child faces\n            dst_quads[4 * j + k][0] = j;\n            dst_quads[4 * j + k][4] = off_ep + eid[(3 + k) &amp; 3]; \n            dst_quads[4 * j + k][5] = off_ep + eid[(0 + k) &amp; 3]; \n            dst_quads[4 * j + k][6] = off_vp + src_quads[j][k];\n        }\n    }\n    for(size_t j = 0, n = src_verts.size() / 3; j &lt; n; ++ j) {\n        for(int n = 0; n &lt; 3; ++ n)\n            dst_verts[(off_vp + j) * 3 + n] *= 0.0625f / float(face_valences[j]);\n    }\n    for(EdgeMap::const_iterator it = edges.begin(), e = edges.end(); it != e; ++ it) {\n        size_t j = (*it).second.first;\n        float rvalence = 0.1250f / float((*it).second.second);\n        for(int n = 0; n &lt; 3; ++ n)\n            dst_verts[(off_ep + j) * 3 + n] *= rvalence;\n    }\n    dst_quads.swap(src_quads);\n    dst_verts.swap(src_verts);\n}\n</code></pre>\n<p>This algorithm was adapted to work with STL containers from Iñigo 'iq' Quilez / rgba, &quot;Tricks and techniques for rgba's past and future intros&quot;, Breakpoint, 2007.</p>\n<p>This gives output quite similar to what you would get with marching cubes / marching tetrahedrons / marching triangles, except that it is always higher resolution than that of the original lattice (with the above methods you can easily change the triangulation resolution). A slightly different view of the same data:</p>\n<p><img src=\"https://i.stack.imgur.com/vrkjv.png\" alt=\"Julia set as cubes after double Catmull-Clark subdivision, wireframe\" /></p>\n<p>Or without wireframe:</p>\n<p><img src=\"https://i.stack.imgur.com/iUvCl.png\" alt=\"Julia set as cubes after double Catmull-Clark subdivision, smooth shaded\" /></p>\n<p>The complete source code, along with Visual Studio workspace and win32 binaries can be found at <a href=\"http://www.stud.fit.vutbr.cz/%7Expolok00/proj/Boxels.zip\" rel=\"nofollow noreferrer\">here</a>. It uses GLUT and the old fixed-function pipeline to display the generated geometry (only for simplicity and portability, otherwise I'd have to include GLEW or the like). I really enjoyed toying around with your question, I hope you will like the output ...</p>\n"}],"owner":{"account_id":3239757,"reputation":672,"user_id":2733085,"accept_rate":75,"display_name":"Ryxuma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2142,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":23660174,"answer_count":2,"score":2,"last_activity_date":1697069966,"creation_date":1383322188,"question_id":19730676,"body_markdown":"I have a 3D array of booleans that represents some 3D terrain.  Currently i can draw it by drawing a point at the position specified by its x y and z in the array, it looks like this.![The terrain as it stands][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/SVWSl.png\r\n\r\nWhat i can&#39;t figure out is how i would draw this using triangles, so it looks like actual terrain.  I don&#39;t want to draw each on as a cube either.\r\n\r\nAre there any algorithms to obtain which points to draw to (bear in mind that for the sake of efficiency only points on the exterior of a landmass should be drawn)?","title":"How to draw 3D terrain with triangles?","body":"<p>I have a 3D array of booleans that represents some 3D terrain.  Currently i can draw it by drawing a point at the position specified by its x y and z in the array, it looks like this.<img src=\"https://i.stack.imgur.com/SVWSl.png\" alt=\"The terrain as it stands\"></p>\n\n<p>What i can't figure out is how i would draw this using triangles, so it looks like actual terrain.  I don't want to draw each on as a cube either.</p>\n\n<p>Are there any algorithms to obtain which points to draw to (bear in mind that for the sake of efficiency only points on the exterior of a landmass should be drawn)?</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1406247098,"post_id":24946034,"comment_id":38769349,"body_markdown":"I&#39;m not entirely clear as to what&#39;s broken.  What values are contained in your `responseMap`?","body":"I&#39;m not entirely clear as to what&#39;s broken.  What values are contained in your <code>responseMap</code>?"},{"owner":{"account_id":1218251,"reputation":14573,"user_id":1185422,"accept_rate":62,"display_name":"Ahmed"},"score":0,"creation_date":1406247196,"post_id":24946034,"comment_id":38769375,"body_markdown":"{response=ok, versionname=dummy, extra=, package=dummy, devicename=dummy, versioncode=dummy, synclocation=null, deviceid=unknown-device-id}","body":"{response=ok, versionname=dummy, extra=, package=dummy, devicename=dummy, versioncode=dummy, synclocation=null, deviceid=unknown-device-id}"},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1406247512,"post_id":24946034,"comment_id":38769468,"body_markdown":"That looks fine with me (using `org.json.JSONObject`).  Where exactly are you seeing this break down?","body":"That looks fine with me (using <code>org.json.JSONObject</code>).  Where exactly are you seeing this break down?"},{"owner":{"account_id":1218251,"reputation":14573,"user_id":1185422,"accept_rate":62,"display_name":"Ahmed"},"score":0,"creation_date":1406247614,"post_id":24946034,"comment_id":38769480,"body_markdown":"json object when contructed i howver over the var and it shows {&quot;empty&quot;:false}  same is sent over the network, in json.toString()","body":"json object when contructed i howver over the var and it shows {&quot;empty&quot;:false}  same is sent over the network, in json.toString()"},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1406247778,"post_id":24946034,"comment_id":38769516,"body_markdown":"So let me rephrase: the JSON entity looks fine.  Are you sure that the output stream isn&#39;t buffering and sending across only a bit of data?  (Although where it&#39;s getting &quot;empty&quot; from is beyond me.)  Have you examined the network traffic to see if that&#39;s exactly what it&#39;s sending across?","body":"So let me rephrase: the JSON entity looks fine.  Are you sure that the output stream isn&#39;t buffering and sending across only a bit of data?  (Although where it&#39;s getting &quot;empty&quot; from is beyond me.)  Have you examined the network traffic to see if that&#39;s exactly what it&#39;s sending across?"},{"owner":{"account_id":1218251,"reputation":14573,"user_id":1185422,"accept_rate":62,"display_name":"Ahmed"},"score":0,"creation_date":1406247960,"post_id":24946034,"comment_id":38769549,"body_markdown":"regardless of network, json.toString() returns {&quot;empty&quot;:false} which it should not. I think the library has some issue or I am not using the JSONObject constructor correctly","body":"regardless of network, json.toString() returns {&quot;empty&quot;:false} which it should not. I think the library has some issue or I am not using the JSONObject constructor correctly"},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":1,"creation_date":1406248159,"post_id":24946034,"comment_id":38769603,"body_markdown":"I think your library has a problem, then.  I&#39;m using the latest `org.json.JSONObject` [from Maven](http://mvnrepository.com/artifact/org.json/json).  I&#39;m not seeing the same problem that you are.","body":"I think your library has a problem, then.  I&#39;m using the latest <code>org.json.JSONObject</code> <a href=\"http://mvnrepository.com/artifact/org.json/json\" rel=\"nofollow noreferrer\">from Maven</a>.  I&#39;m not seeing the same problem that you are."},{"owner":{"account_id":1218251,"reputation":14573,"user_id":1185422,"accept_rate":62,"display_name":"Ahmed"},"score":0,"creation_date":1406249036,"post_id":24946034,"comment_id":38769834,"body_markdown":"Thanks @Makoto the jar from the Maven link you gave works fine. It was issue with the code from where I downloaded earlier..","body":"Thanks @Makoto the jar from the Maven link you gave works fine. It was issue with the code from where I downloaded earlier.."}],"answers":[{"tags":[],"owner":{"account_id":1716961,"reputation":9711,"user_id":1573835,"accept_rate":49,"display_name":"Zaw Than oo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1406256024,"creation_date":1406256024,"answer_id":24947205,"question_id":24946034,"body_markdown":"Map to Json, Json to Map? I use `Gson` lib. There is no problem.\r\n\t\t\r\n\t\t\r\nMap to Json String\r\n\t\r\n\tGson gson = new GsonBuilder().setPrettyPrinting().create();\r\n\tMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\r\n\tmap.put(&quot;111&quot;, &quot;AAAAA&quot;);\r\n\tmap.put(&quot;222&quot;, &quot;BBBBB&quot;);\r\n\tString mapString = gson.toJson(map);\r\n\tSystem.out.println(mapString);\r\n\r\nOutput\r\n\t\r\n\t{\r\n\t  &quot;222&quot;: &quot;BBBBB&quot;,\r\n\t  &quot;111&quot;: &quot;AAAAA&quot;\r\n\t}\r\n        \r\n\r\nJson String to Map\r\n\t\r\n\tGson gson = new GsonBuilder().setPrettyPrinting().create();\r\n\tString mapString  = &quot;{\\&quot;222\\&quot;: \\&quot;BBBBB\\&quot;,\\&quot;111\\&quot;: \\&quot;AAAAA\\&quot;}&quot;;\r\n\tMap&lt;String, String&gt; map = gson.fromJson(mapString, Map.class);\r\n\tSystem.out.println(map.get(&quot;111&quot;));\r\n\r\nOutput\t\t\r\n\r\n\tAAAAA","title":"json map to string failure in java","body":"<p>Map to Json, Json to Map? I use <code>Gson</code> lib. There is no problem.</p>\n\n<p>Map to Json String</p>\n\n<pre><code>Gson gson = new GsonBuilder().setPrettyPrinting().create();\nMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\nmap.put(\"111\", \"AAAAA\");\nmap.put(\"222\", \"BBBBB\");\nString mapString = gson.toJson(map);\nSystem.out.println(mapString);\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>{\n  \"222\": \"BBBBB\",\n  \"111\": \"AAAAA\"\n}\n</code></pre>\n\n<p>Json String to Map</p>\n\n<pre><code>Gson gson = new GsonBuilder().setPrettyPrinting().create();\nString mapString  = \"{\\\"222\\\": \\\"BBBBB\\\",\\\"111\\\": \\\"AAAAA\\\"}\";\nMap&lt;String, String&gt; map = gson.fromJson(mapString, Map.class);\nSystem.out.println(map.get(\"111\"));\n</code></pre>\n\n<p>Output      </p>\n\n<pre><code>AAAAA\n</code></pre>\n"},{"tags":[],"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697068672,"creation_date":1697068672,"answer_id":77276963,"question_id":24946034,"body_markdown":"I wouldn&#39;t recommend you doing it the way you are doing it.  I created an example project that shows how to do it with Map&lt;String, Object&gt; rather than Map&lt;String, String&gt; .\r\n\r\nhttps://github.com/djangofan/json-serialization-jackson-example/blob/main/src/test/java/com/example/TestObjectsTest.java\r\n\r\nIn that example:\r\n\r\n      ....\r\n      private static final ObjectMapper MAPPER = new ObjectMapper();\r\n      .....\r\n      @Test\r\n      void testDeserialization() {\r\n        Map&lt;String, Object&gt; linkedHashMap = new LinkedHashMap&lt;&gt;();\r\n        linkedHashMap.put(&quot;foo&quot;, &quot;bar&quot;);\r\n        linkedHashMap.put(&quot;bar&quot;, &quot;foo&quot;);\r\n    \r\n        TestObjects.Bar bar = TestObjects.Bar.builder()\r\n            .id(3)\r\n            .description(&quot;bar description&quot;)\r\n            .stringBoolean(&quot;false&quot;)\r\n            .nestedMap(linkedHashMap)\r\n            .build();\r\n        TestObjects.Foo foo = TestObjects.Foo.builder()\r\n            .id(1)\r\n            .description(&quot;foo description&quot;)\r\n            .primitiveBoolean(false)\r\n            .bar(bar)\r\n            .build();\r\n    \r\n        String serialized = null;\r\n        try {\r\n          serialized = MAPPER.writeValueAsString(foo);\r\n        } catch (JsonProcessingException e) {\r\n          throw new RuntimeException(e);\r\n        }\r\n    \r\n        assertTrue(serialized.contains(&quot;foo description&quot;));\r\n        try {\r\n          TestObjects.Foo foo1 = MAPPER.readValue(serialized, TestObjects.Foo.class);\r\n          TestObjects.Bar bar1 = foo1.getBar();\r\n    \r\n          assertEquals(bar1.id, 3);\r\n        } catch (JsonProcessingException e) {\r\n          throw new RuntimeException(e);\r\n        }\r\n    \r\n      }","title":"json map to string failure in java","body":"<p>I wouldn't recommend you doing it the way you are doing it.  I created an example project that shows how to do it with Map&lt;String, Object&gt; rather than Map&lt;String, String&gt; .</p>\n<p><a href=\"https://github.com/djangofan/json-serialization-jackson-example/blob/main/src/test/java/com/example/TestObjectsTest.java\" rel=\"nofollow noreferrer\">https://github.com/djangofan/json-serialization-jackson-example/blob/main/src/test/java/com/example/TestObjectsTest.java</a></p>\n<p>In that example:</p>\n<pre><code>  ....\n  private static final ObjectMapper MAPPER = new ObjectMapper();\n  .....\n  @Test\n  void testDeserialization() {\n    Map&lt;String, Object&gt; linkedHashMap = new LinkedHashMap&lt;&gt;();\n    linkedHashMap.put(&quot;foo&quot;, &quot;bar&quot;);\n    linkedHashMap.put(&quot;bar&quot;, &quot;foo&quot;);\n\n    TestObjects.Bar bar = TestObjects.Bar.builder()\n        .id(3)\n        .description(&quot;bar description&quot;)\n        .stringBoolean(&quot;false&quot;)\n        .nestedMap(linkedHashMap)\n        .build();\n    TestObjects.Foo foo = TestObjects.Foo.builder()\n        .id(1)\n        .description(&quot;foo description&quot;)\n        .primitiveBoolean(false)\n        .bar(bar)\n        .build();\n\n    String serialized = null;\n    try {\n      serialized = MAPPER.writeValueAsString(foo);\n    } catch (JsonProcessingException e) {\n      throw new RuntimeException(e);\n    }\n\n    assertTrue(serialized.contains(&quot;foo description&quot;));\n    try {\n      TestObjects.Foo foo1 = MAPPER.readValue(serialized, TestObjects.Foo.class);\n      TestObjects.Bar bar1 = foo1.getBar();\n\n      assertEquals(bar1.id, 3);\n    } catch (JsonProcessingException e) {\n      throw new RuntimeException(e);\n    }\n\n  }\n</code></pre>\n"}],"owner":{"account_id":1218251,"reputation":14573,"user_id":1185422,"accept_rate":62,"display_name":"Ahmed"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697068672,"creation_date":1406247020,"question_id":24946034,"body_markdown":"In java I am trying to convert a Map&lt;String,String&gt; to json string. using code below\r\n\r\n\r\n    private void sendResponse(Map&lt;String, String&gt; responseMap) throws IOException\r\n\t{\r\n\t\t\r\n\t\tPrintStream ps = new PrintStream(clientSocket.getOutputStream());\t\r\n\t\tJSONObject json = new JSONObject(responseMap);\r\n\t\tps.println(json.toString());\t\t\r\n\r\n\t}\r\n\r\nThe variable \r\n\r\n    json results in {&quot;empty&quot;:false}  the map contains valid keyvalue pairs.\r\n\r\nThe map contains values like this\r\n\r\n     \r\n\t\t\tresponseMap.put(&quot;response&quot;, &quot;ok&quot;);\r\n\t\t\tresponseMap.put(&quot;versionname&quot;, &quot;dummy&quot;);\r\n\t\t\tresponseMap.put(&quot;versioncode&quot;, &quot;dummy&quot;);\r\n\t\t\tresponseMap.put(&quot;package&quot;,&quot;dummy&quot;);\t\r\n\t\t\tresponseMap.put(&quot;deviceid&quot;, &quot;unknown&quot;);\r\n\t\t\tresponseMap.put(&quot;devicename&quot;, &quot;dummy&quot;);\t\r\n\t\t\tresponseMap.put(&quot;synclocation&quot;, null);\r\n\t\t\tresponseMap.put(&quot;extra&quot;, &quot;&quot;);\r\n\r\nThe code I am using comes from https://github.com/douglascrockford/JSON-java\r\n\r\nany ideas why its not working \r\n?","title":"json map to string failure in java","body":"<p>In java I am trying to convert a Map to json string. using code below</p>\n\n<pre><code>private void sendResponse(Map&lt;String, String&gt; responseMap) throws IOException\n{\n\n    PrintStream ps = new PrintStream(clientSocket.getOutputStream());   \n    JSONObject json = new JSONObject(responseMap);\n    ps.println(json.toString());        \n\n}\n</code></pre>\n\n<p>The variable </p>\n\n<pre><code>json results in {\"empty\":false}  the map contains valid keyvalue pairs.\n</code></pre>\n\n<p>The map contains values like this</p>\n\n<pre><code>        responseMap.put(\"response\", \"ok\");\n        responseMap.put(\"versionname\", \"dummy\");\n        responseMap.put(\"versioncode\", \"dummy\");\n        responseMap.put(\"package\",\"dummy\"); \n        responseMap.put(\"deviceid\", \"unknown\");\n        responseMap.put(\"devicename\", \"dummy\"); \n        responseMap.put(\"synclocation\", null);\n        responseMap.put(\"extra\", \"\");\n</code></pre>\n\n<p>The code I am using comes from <a href=\"https://github.com/douglascrockford/JSON-java\" rel=\"nofollow\">https://github.com/douglascrockford/JSON-java</a></p>\n\n<p>any ideas why its not working \n?</p>\n"},{"tags":["java","openapi","openapi-generator","openapi-generator-cli"],"comments":[{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":2,"creation_date":1697061391,"post_id":77276565,"comment_id":136233680,"body_markdown":"You will have to ask whoever added `object`, `file` and `list` to the [reserved words list for the Java generator](https://openapi-generator.tech/docs/generators/java/#reserved-words)","body":"You will have to ask whoever added <code>object</code>, <code>file</code> and <code>list</code> to the <a href=\"https://openapi-generator.tech/docs/generators/java/#reserved-words\" rel=\"nofollow noreferrer\">reserved words list for the Java generator</a>"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1697061829,"post_id":77276565,"comment_id":136233727,"body_markdown":"Could be so every name can be legal, including names starting with numbers. `9foo` (illegal java identifier) becomes `_9foo` (legal java identifier).","body":"Could be so every name can be legal, including names starting with numbers. <code>9foo</code> (illegal java identifier) becomes <code>_9foo</code> (legal java identifier)."},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1697062089,"post_id":77276565,"comment_id":136233761,"body_markdown":"Object, List, and File are already defined in Java Platform.","body":"Object, List, and File are already defined in Java Platform."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1697068173,"post_id":77276565,"comment_id":136234291,"body_markdown":"@pcalkins But are different than object, list, and file. By that argument any existing JDK class could exhibit the same behavior.","body":"@pcalkins But are different than object, list, and file. By that argument any existing JDK class could exhibit the same behavior."}],"answers":[{"tags":[],"owner":{"account_id":22258428,"reputation":51,"user_id":16490250,"display_name":"booniepepper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697068040,"creation_date":1697067693,"answer_id":77276922,"question_id":77276565,"body_markdown":"It&#39;s a &quot;reserved word&quot; for OpenAPI generator&#39;s Java processor. ([docs](https://openapi-generator.tech/docs/generators/java/#reserved-words), [code](https://github.com/OpenAPITools/openapi-generator/blob/2cfce7cd2d54f42f0d64bc96c87829a2f99f58ce/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/AbstractJavaCodegen.java#L184)) Reserved words for Java that get processed by OpenAPI generator end up prefixing an underscore.\r\n\r\nAs far as I can tell, the only way to opt out of this is to either patch OpenAPI or do post-processing. (Maybe someone in comments can correct me, though)\r\n\r\n---\r\n\r\nWhile `object` is not a reserved keyword in Java as a language, it might be worth leaving as `_object` since it&#39;s a reserved keyword in other JVM languages.\r\n\r\n* In Kotlin, `object` is a keyword for an anonymous Object: https://kotlinlang.org/docs/object-declarations.html\r\n* In Scala, `object` is a keyword for Singleton instances: https://docs.scala-lang.org/scala3/book/taste-objects.html\r\n\r\nThose languages support bare words to get around the keyword limitation, so `myModelThing.`object`(etc)` could be valid, but it&#39;s a pain.\r\n\r\nWhile this might not be the reason it was added to OpenAPI generator&#39;s reserved words, it does mean that a client generated in Java (or derivative software) is more likely to be able to interact with other JVM languages, so unless you plan to also generate a Kotlin client and Scala client (and others?) it might be worth leaving it as-is.","title":"Why does OpenAPI generate Java members/methods with underscore prefixes?","body":"<p>It's a &quot;reserved word&quot; for OpenAPI generator's Java processor. (<a href=\"https://openapi-generator.tech/docs/generators/java/#reserved-words\" rel=\"nofollow noreferrer\">docs</a>, <a href=\"https://github.com/OpenAPITools/openapi-generator/blob/2cfce7cd2d54f42f0d64bc96c87829a2f99f58ce/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/AbstractJavaCodegen.java#L184\" rel=\"nofollow noreferrer\">code</a>) Reserved words for Java that get processed by OpenAPI generator end up prefixing an underscore.</p>\n<p>As far as I can tell, the only way to opt out of this is to either patch OpenAPI or do post-processing. (Maybe someone in comments can correct me, though)</p>\n<hr />\n<p>While <code>object</code> is not a reserved keyword in Java as a language, it might be worth leaving as <code>_object</code> since it's a reserved keyword in other JVM languages.</p>\n<ul>\n<li>In Kotlin, <code>object</code> is a keyword for an anonymous Object: <a href=\"https://kotlinlang.org/docs/object-declarations.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/object-declarations.html</a></li>\n<li>In Scala, <code>object</code> is a keyword for Singleton instances: <a href=\"https://docs.scala-lang.org/scala3/book/taste-objects.html\" rel=\"nofollow noreferrer\">https://docs.scala-lang.org/scala3/book/taste-objects.html</a></li>\n</ul>\n<p>Those languages support bare words to get around the keyword limitation, so <code>myModelThing.</code>object<code>(etc)</code> could be valid, but it's a pain.</p>\n<p>While this might not be the reason it was added to OpenAPI generator's reserved words, it does mean that a client generated in Java (or derivative software) is more likely to be able to interact with other JVM languages, so unless you plan to also generate a Kotlin client and Scala client (and others?) it might be worth leaving it as-is.</p>\n"}],"owner":{"account_id":22258428,"reputation":51,"user_id":16490250,"display_name":"booniepepper"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77276922,"answer_count":1,"score":2,"last_activity_date":1697068040,"creation_date":1697060978,"question_id":77276565,"body_markdown":"I have an OpenAPI model I&#39;m rendering in Java. In the context (of OpenFGA) there&#39;s a model for an &quot;object&quot;, as in, the object of a relationship. In any case it&#39;s called &quot;object&quot; in the model\r\n\r\nWhen I render the model, I end up with member variables and methods called `_object` instead.\r\n\r\nMember variables end up looking like:\r\n\r\n```\r\n    public static final String JSON_PROPERTY_OBJECT = &quot;object&quot;;\r\n    private String _object;\r\n```\r\n\r\n...and methods like:\r\n\r\n```\r\n    public TupleKey _object(String _object) {\r\n        this._object = _object;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Get _object\r\n     * @return _object\r\n     **/\r\n    @javax.annotation.Nullable\r\n    @JsonProperty(JSON_PROPERTY_OBJECT)\r\n    @JsonInclude(value = JsonInclude.Include.USE_DEFAULTS)\r\n    public String getObject() {\r\n        return _object;\r\n    }\r\n\r\n    @JsonProperty(JSON_PROPERTY_OBJECT)\r\n    @JsonInclude(value = JsonInclude.Include.USE_DEFAULTS)\r\n    public void setObject(String _object) {\r\n        this._object = _object;\r\n    }\r\n\r\n    public TupleKey relation(String relation) {\r\n        this.relation = relation;\r\n        return this;\r\n    }\r\n```\r\n\r\nWhy `_object`? If `object` is not a keyword in Java, we don&#39;t need a leading underscore, right? I see the same happen with `_list` and `_file` as well.","title":"Why does OpenAPI generate Java members/methods with underscore prefixes?","body":"<p>I have an OpenAPI model I'm rendering in Java. In the context (of OpenFGA) there's a model for an &quot;object&quot;, as in, the object of a relationship. In any case it's called &quot;object&quot; in the model</p>\n<p>When I render the model, I end up with member variables and methods called <code>_object</code> instead.</p>\n<p>Member variables end up looking like:</p>\n<pre><code>    public static final String JSON_PROPERTY_OBJECT = &quot;object&quot;;\n    private String _object;\n</code></pre>\n<p>...and methods like:</p>\n<pre><code>    public TupleKey _object(String _object) {\n        this._object = _object;\n        return this;\n    }\n\n    /**\n     * Get _object\n     * @return _object\n     **/\n    @javax.annotation.Nullable\n    @JsonProperty(JSON_PROPERTY_OBJECT)\n    @JsonInclude(value = JsonInclude.Include.USE_DEFAULTS)\n    public String getObject() {\n        return _object;\n    }\n\n    @JsonProperty(JSON_PROPERTY_OBJECT)\n    @JsonInclude(value = JsonInclude.Include.USE_DEFAULTS)\n    public void setObject(String _object) {\n        this._object = _object;\n    }\n\n    public TupleKey relation(String relation) {\n        this.relation = relation;\n        return this;\n    }\n</code></pre>\n<p>Why <code>_object</code>? If <code>object</code> is not a keyword in Java, we don't need a leading underscore, right? I see the same happen with <code>_list</code> and <code>_file</code> as well.</p>\n"},{"tags":["java","http","httpurlconnection","java-7"],"comments":[{"owner":{"account_id":113908,"reputation":3110,"user_id":299787,"display_name":"Redlab"},"score":0,"creation_date":1486133380,"post_id":42026770,"comment_id":71227766,"body_markdown":"Did you try the solution in http://stackoverflow.com/questions/25163131/httpurlconnection-invalid-http-method-patch that proposes to use HttpClient from httpcomponents? See also http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/methods/HttpPatch.html","body":"Did you try the solution in <a href=\"http://stackoverflow.com/questions/25163131/httpurlconnection-invalid-http-method-patch\" title=\"httpurlconnection invalid http method patch\">stackoverflow.com/questions/25163131/&hellip;</a> that proposes to use HttpClient from httpcomponents? See also <a href=\"http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/methods/HttpPatch.html\" rel=\"nofollow noreferrer\">hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/or&zwnj;&#8203;g/&hellip;</a>"},{"owner":{"account_id":219684,"reputation":37257,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"score":5,"creation_date":1486133381,"post_id":42026770,"comment_id":71227769,"body_markdown":"`HttpURLConnection` just doesn&#39;t support `PATCH`. You&#39;ll have to use a different HTTP library.","body":"<code>HttpURLConnection</code> just doesn&#39;t support <code>PATCH</code>. You&#39;ll have to use a different HTTP library."},{"owner":{"account_id":6691354,"reputation":2410,"user_id":5160771,"accept_rate":80,"display_name":"lesnar"},"score":0,"creation_date":1486133547,"post_id":42026770,"comment_id":71227878,"body_markdown":"@Redlab yes i tried , i have also mentioned the same Post in my question.","body":"@Redlab yes i tried , i have also mentioned the same Post in my question."},{"owner":{"account_id":113908,"reputation":3110,"user_id":299787,"display_name":"Redlab"},"score":0,"creation_date":1486133994,"post_id":42026770,"comment_id":71228154,"body_markdown":"HttpPatch from httpcomponents would do the trick though....","body":"HttpPatch from httpcomponents would do the trick though...."}],"answers":[{"tags":[],"owner":{"account_id":6937456,"reputation":2312,"user_id":5324923,"display_name":"Dezso Gabos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543517289,"creation_date":1543517289,"answer_id":53545687,"question_id":42026770,"body_markdown":"An example of PATCH method with apache http client:\r\n\r\n        try {\r\n\t\t\r\n\t\t\t//This is just to avoid ssl hostname verification and to trust all, you can use simple Http client also\r\n            CloseableHttpClient httpClient = HttpClientBuilder.create().setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, TrustAllStrategy.INSTANCE).build())\r\n                    .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE).build();\r\n\r\n            HttpPatch request = new HttpPatch(REST_SERVICE_URL);\r\n            StringEntity params = new StringEntity(JSON.toJSONString(payload), ContentType.APPLICATION_JSON);\r\n            request.setEntity(params);\r\n\t\t\trequest.addHeader(org.apache.http.HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE);\r\n            request.addHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE);\r\n            request.addHeader(HttpHeaders.AUTHORIZATION, OAuth2AccessToken.BEARER_TYPE + &quot; &quot; + accessToken);\r\n            HttpResponse response =     httpClient.execute(request);            \r\n\t\t\t\r\n\t\t\tString statusCode = response.getStatusLine().getStatusCode();\r\n            \r\n        } catch (Exception ex) {\r\n            // handle exception here\r\n        }\r\n\t\t\r\n\t\t\r\nEquivalent example with RestTemplate:\r\n\t\t\r\n\t\tHttpHeaders headers = new HttpHeaders();\r\n\t\theaders.setContentType(MediaType.APPLICATION_JSON);\r\n        headers.add(&quot;Authorization&quot;, OAuth2AccessToken.BEARER_TYPE + &quot; &quot; + accessToken);\r\n        final HttpEntity&lt;String&gt; entity = new HttpEntity&lt;String&gt;(JSON.toJSONString(payload), headers);\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        try {\r\n            ResponseEntity&lt;String&gt; response = restTemplate.exchange(REST_SERVICE_URL, HttpMethod.PATCH, entity, String.class);\r\n            String statusCode =  response.getStatusCode();\r\n        } catch (HttpClientErrorException e) {\r\n            // handle exception here\r\n\t\t}","title":"Invalid HTTP method: PATCH","body":"<p>An example of PATCH method with apache http client:</p>\n\n<pre><code>    try {\n\n        //This is just to avoid ssl hostname verification and to trust all, you can use simple Http client also\n        CloseableHttpClient httpClient = HttpClientBuilder.create().setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, TrustAllStrategy.INSTANCE).build())\n                .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE).build();\n\n        HttpPatch request = new HttpPatch(REST_SERVICE_URL);\n        StringEntity params = new StringEntity(JSON.toJSONString(payload), ContentType.APPLICATION_JSON);\n        request.setEntity(params);\n        request.addHeader(org.apache.http.HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE);\n        request.addHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE);\n        request.addHeader(HttpHeaders.AUTHORIZATION, OAuth2AccessToken.BEARER_TYPE + \" \" + accessToken);\n        HttpResponse response =     httpClient.execute(request);            \n\n        String statusCode = response.getStatusLine().getStatusCode();\n\n    } catch (Exception ex) {\n        // handle exception here\n    }\n</code></pre>\n\n<p>Equivalent example with RestTemplate:</p>\n\n<pre><code>    HttpHeaders headers = new HttpHeaders();\n    headers.setContentType(MediaType.APPLICATION_JSON);\n    headers.add(\"Authorization\", OAuth2AccessToken.BEARER_TYPE + \" \" + accessToken);\n    final HttpEntity&lt;String&gt; entity = new HttpEntity&lt;String&gt;(JSON.toJSONString(payload), headers);\n    RestTemplate restTemplate = new RestTemplate();\n    try {\n        ResponseEntity&lt;String&gt; response = restTemplate.exchange(REST_SERVICE_URL, HttpMethod.PATCH, entity, String.class);\n        String statusCode =  response.getStatusCode();\n    } catch (HttpClientErrorException e) {\n        // handle exception here\n    }\n</code></pre>\n"}],"owner":{"account_id":6691354,"reputation":2410,"user_id":5160771,"accept_rate":80,"display_name":"lesnar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14446,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697065736,"creation_date":1486132907,"question_id":42026770,"body_markdown":"After trying other solutions from https://stackoverflow.com/questions/25163131/httpurlconnection-invalid-http-method-patch\r\n\r\nI am getting Invalid HTTP Method: PATCH Exception with JAVA 7.\r\nUpdating JAVA is not in option so i have to stick to the workarounds.\r\n\r\nI am using Invocation to invoke the request like this\r\n\r\n\tInvocation invoke = reqBuilder.build(getHTTPVerb(), Entity.entity(requestJSON, MediaType.APPLICATION_JSON));\r\n\tgetWebTarget().request(MediaType.APPLICATION_JSON).header(&quot;Authorization&quot;, getAuthorization()).accept(MediaType.APPLICATION_JSON);\r\n\r\n`getHTTPVerb()` returns String &quot;POST&quot; or &quot;PATCH&quot;.\r\n\r\nWith PATCH method I am having problem.\r\n\r\nIn the mentioned question, i have not tried one solution with:\r\n\r\n    conn.setRequestProperty(&quot;X-HTTP-Method-Override&quot;, &quot;PATCH&quot;);\r\n    conn.setRequestMethod(&quot;POST&quot;);\r\n\r\n`conn` is `HttpURLConnection`  instance.\r\n\r\nBut I am not sure how I can get `HttpURLConnection` from Invocation class or any property.\r\n\r\n\r\nAny pointers or help would be highly appreciated.","title":"Invalid HTTP method: PATCH","body":"<p>After trying other solutions from <a href=\"https://stackoverflow.com/questions/25163131/httpurlconnection-invalid-http-method-patch\">HttpURLConnection Invalid HTTP method: PATCH</a></p>\n<p>I am getting Invalid HTTP Method: PATCH Exception with JAVA 7.\nUpdating JAVA is not in option so i have to stick to the workarounds.</p>\n<p>I am using Invocation to invoke the request like this</p>\n<pre><code>Invocation invoke = reqBuilder.build(getHTTPVerb(), Entity.entity(requestJSON, MediaType.APPLICATION_JSON));\ngetWebTarget().request(MediaType.APPLICATION_JSON).header(&quot;Authorization&quot;, getAuthorization()).accept(MediaType.APPLICATION_JSON);\n</code></pre>\n<p><code>getHTTPVerb()</code> returns String &quot;POST&quot; or &quot;PATCH&quot;.</p>\n<p>With PATCH method I am having problem.</p>\n<p>In the mentioned question, i have not tried one solution with:</p>\n<pre><code>conn.setRequestProperty(&quot;X-HTTP-Method-Override&quot;, &quot;PATCH&quot;);\nconn.setRequestMethod(&quot;POST&quot;);\n</code></pre>\n<p><code>conn</code> is <code>HttpURLConnection</code>  instance.</p>\n<p>But I am not sure how I can get <code>HttpURLConnection</code> from Invocation class or any property.</p>\n<p>Any pointers or help would be highly appreciated.</p>\n"},{"tags":["java","kotlin","android-studio"],"owner":{"account_id":21981644,"reputation":107,"user_id":16256588,"display_name":"Michael Debo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697065545,"creation_date":1697065545,"question_id":77276806,"body_markdown":"I am trying to complete the Kotlin Koans course on Android Studio, but I cannot even begin because it is not accepting my version of java as valid. After I select my JDK, the error it gives me is: &quot;Failed to determine Java version from string: Oracle OpenJDK version 21. In the settings section, choose or download another JDK.&quot;. When I allow Android Studio to download another JDK, it gives me the same error. I downloaded the newest version of both Android Studio and JDK earlier today. Is there any way to resolve this?","title":"Android Studio not recognizing Java Version when attempting a course","body":"<p>I am trying to complete the Kotlin Koans course on Android Studio, but I cannot even begin because it is not accepting my version of java as valid. After I select my JDK, the error it gives me is: &quot;Failed to determine Java version from string: Oracle OpenJDK version 21. In the settings section, choose or download another JDK.&quot;. When I allow Android Studio to download another JDK, it gives me the same error. I downloaded the newest version of both Android Studio and JDK earlier today. Is there any way to resolve this?</p>\n"},{"tags":["java","spring","spring-boot"],"owner":{"account_id":10652480,"reputation":818,"user_id":7842955,"accept_rate":59,"display_name":"BlueBoy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697065451,"creation_date":1697065451,"question_id":77276802,"body_markdown":"I&#39;m trying to use `server.error.include-message: on-param` in my `application.properties` file when calling: `throw new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;message&quot;)` but the message does not show. All other properties are set to their defaults. I also tried it as `on_param` but that did not work either.\r\n\r\nIf I use `server.error.include-message: always` then the message does show, but I want it only to show on-param though because that is more secure.\r\n\r\nCan anyone help me understand why on-pram does not work?\r\n\r\nI am using spring boot starter web 3.1.4.","title":"Spring Boot 3 - server.error.include-message: on-param not working","body":"<p>I'm trying to use <code>server.error.include-message: on-param</code> in my <code>application.properties</code> file when calling: <code>throw new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;message&quot;)</code> but the message does not show. All other properties are set to their defaults. I also tried it as <code>on_param</code> but that did not work either.</p>\n<p>If I use <code>server.error.include-message: always</code> then the message does show, but I want it only to show on-param though because that is more secure.</p>\n<p>Can anyone help me understand why on-pram does not work?</p>\n<p>I am using spring boot starter web 3.1.4.</p>\n"},{"tags":["java","linux"],"comments":[{"owner":{"account_id":1471892,"reputation":9718,"user_id":1383240,"accept_rate":38,"display_name":"NiVeR"},"score":0,"creation_date":1527941529,"post_id":50656788,"comment_id":88323535,"body_markdown":"Does the user with which you operate has the right to run the file.","body":"Does the user with which you operate has the right to run the file."},{"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"score":2,"creation_date":1527941558,"post_id":50656788,"comment_id":88323547,"body_markdown":"What happens when you execute &#39;java -version&#39;?","body":"What happens when you execute &#39;java -version&#39;?"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":2,"creation_date":1527941663,"post_id":50656788,"comment_id":88323572,"body_markdown":"Why do you run it as root?  And how did you install java?","body":"Why do you run it as root?  And how did you install java?"},{"owner":{"account_id":13699354,"reputation":1,"user_id":9885026,"display_name":"Emanuel Hongu"},"score":0,"creation_date":1527943803,"post_id":50656788,"comment_id":88324137,"body_markdown":"@GonzaloMatheu and how can I enable that permission? I am thinking of reinstalling java.","body":"@GonzaloMatheu and how can I enable that permission? I am thinking of reinstalling java."},{"owner":{"account_id":44682,"reputation":9837,"user_id":131264,"accept_rate":100,"display_name":"Alexander"},"score":1,"creation_date":1527961148,"post_id":50656788,"comment_id":88329034,"body_markdown":"Why are you not installing Java with your distros&#39;s package manager?","body":"Why are you not installing Java with your distros&#39;s package manager?"}],"answers":[{"tags":[],"owner":{"account_id":246243,"reputation":9164,"user_id":520275,"accept_rate":83,"display_name":"Gonzalo Matheu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527944209,"creation_date":1527943927,"answer_id":50657111,"question_id":50656788,"body_markdown":"It seeem that **java** binary does not have execution permission.  Executing **chmod a+x /usr/bin/java/jre-8u171-i586/bin/java** might solve the issue.\r\n\r\nBut it something wrong about how you installed java. I would try to install it using the [package manager][1].\n\n\n  [1]: http://doc.slitaz.org/en:handbook:packages","title":"sh: java: permission denied tryinng to execute .jar file","body":"<p>It seeem that <strong>java</strong> binary does not have execution permission.  Executing <strong>chmod a+x /usr/bin/java/jre-8u171-i586/bin/java</strong> might solve the issue.</p>\n\n<p>But it something wrong about how you installed java. I would try to install it using the <a href=\"http://doc.slitaz.org/en:handbook:packages\" rel=\"nofollow noreferrer\">package manager</a>.</p>\n"}],"owner":{"account_id":13699354,"reputation":1,"user_id":9885026,"display_name":"Emanuel Hongu"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10335,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697061705,"creation_date":1527941427,"question_id":50656788,"body_markdown":"My OS: SLiTaz 32 bits, last version.\nI installed java in /usr/bin/java/jre-8u171-i586\n\nI run the terminal as root, cd to where my executable jar file is, and type:\n\n# java -jar desktop-1.7.2a-1.jar\n\nI get:\n\nsh: java: Permission denied\n\nWhat is the cause of this and how can I execute my .jar file? \n\nAlso know that this file is a game, more specifically &quot;Pixel Dungeon&quot;.\n\nEdit: when I execute java -version, it again says permission denied. I must say that to execute these commands, I run the terminal as my own user, Flavius, then do su, enter password and from there I execute all commands.\n\nEdit2: To install java I uncompressed the tar.gz file I got from the official java site using a website, because I didn&#39;t know how to uncompress it by commands, then I moved java files to /usr/bin and then I tried just double clicking the .jar file to execute it, but it asked what program to use to execute .jar files, and I didn&#39;t know how to fin java in that menu so I tried using commands...\n\n","title":"sh: java: permission denied tryinng to execute .jar file","body":"<p>My OS: SLiTaz 32 bits, last version.\nI installed java in /usr/bin/java/jre-8u171-i586</p>\n<p>I run the terminal as root, cd to where my executable jar file is, and type:</p>\n<h1>java -jar desktop-1.7.2a-1.jar</h1>\n<p>I get:</p>\n<p>sh: java: Permission denied</p>\n<p>What is the cause of this and how can I execute my .jar file?</p>\n<p>Also know that this file is a game, more specifically &quot;Pixel Dungeon&quot;.</p>\n<p>Edit: when I execute java -version, it again says permission denied. I must say that to execute these commands, I run the terminal as my own user, Flavius, then do su, enter password and from there I execute all commands.</p>\n<p>Edit2: To install java I uncompressed the tar.gz file I got from the official java site using a website, because I didn't know how to uncompress it by commands, then I moved java files to /usr/bin and then I tried just double clicking the .jar file to execute it, but it asked what program to use to execute .jar files, and I didn't know how to fin java in that menu so I tried using commands...</p>\n"},{"tags":["java","excel","servlets"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1469769284,"post_id":38650925,"comment_id":64683843,"body_markdown":"Think the Content is wrong try this solution: http://stackoverflow.com/questions/2937465/what-is-correct-content-type-for-excel-files","body":"Think the Content is wrong try this solution: <a href=\"http://stackoverflow.com/questions/2937465/what-is-correct-content-type-for-excel-files\" title=\"what is correct content type for excel files\">stackoverflow.com/questions/2937465/&hellip;</a>"},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1469770408,"post_id":38650925,"comment_id":64684216,"body_markdown":"`response.setContentType(&quot;application/vnd.ms-excel&quot;)`, then `response.setContentType(&quot;application/octet-stream&quot;)`. Make up your mind. I suggest your mind stick with the first one.","body":"<code>response.setContentType(&quot;application&#47;vnd.ms-excel&quot;)</code>, then <code>response.setContentType(&quot;application&#47;octet-stream&quot;)</code>. Make up your mind. I suggest your mind stick with the first one."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1469770458,"post_id":38650925,"comment_id":64684235,"body_markdown":"`response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment...`, then `response.setHeader(&quot;Content-Disposition&quot;,&quot;inline...`. Make up your mind.","body":"<code>response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment...</code>, then <code>response.setHeader(&quot;Content-Disposition&quot;,&quot;inline...</code>. Make up your mind."}],"answers":[{"tags":[],"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1469770419,"creation_date":1469770069,"answer_id":38651088,"question_id":38650925,"body_markdown":"Replace this line:\r\n\r\n    PrintWriter out = response.getWriter();\r\n\r\nwith this line:\r\n\r\n    OutputStream out = response.getOutputStream();\r\n\r\nYou&#39;re reading a byte from an InputStream and you should be writing a byte to an OutputStream again to copy it. Right now your byte is sent as a character to a PrintWriter which is wrong.\r\n\r\nAnd remove this line:\r\n\r\n    System.out.println(&quot;Buffer Reader length :&quot;+fileInputStream.read());\r\n\r\nThis line is reading the first byte from the file and throwing it away, and as a result the downloaded file is missing its first byte.\r\n","title":"Excel Downloading in JAVA servlet giving error file is not matching","body":"<p>Replace this line:</p>\n\n<pre><code>PrintWriter out = response.getWriter();\n</code></pre>\n\n<p>with this line:</p>\n\n<pre><code>OutputStream out = response.getOutputStream();\n</code></pre>\n\n<p>You're reading a byte from an InputStream and you should be writing a byte to an OutputStream again to copy it. Right now your byte is sent as a character to a PrintWriter which is wrong.</p>\n\n<p>And remove this line:</p>\n\n<pre><code>System.out.println(\"Buffer Reader length :\"+fileInputStream.read());\n</code></pre>\n\n<p>This line is reading the first byte from the file and throwing it away, and as a result the downloaded file is missing its first byte.</p>\n"},{"tags":[],"owner":{"account_id":26613352,"reputation":11,"user_id":20233210,"display_name":"Anju"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1697061288,"creation_date":1697061288,"answer_id":77276592,"question_id":38650925,"body_markdown":"I faced same issue few days back, and it got resolved after adding `&lt;nonFilteredFileExtensions&gt;` in maven dependency as below:\r\n\r\n```\r\n&lt;plugin&gt;\r\n\t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.3.1&lt;/version&gt;\r\n\t&lt;configuration&gt;\r\n\t\t&lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n\t\t&lt;nonFilteredFileExtensions&gt;\r\n\t\t\t&lt;nonFilteredFileExtension&gt;xls&lt;/nonFilteredFileExtension&gt;\r\n\t\t\t&lt;nonFilteredFileExtension&gt;xlsx&lt;/nonFilteredFileExtension&gt;\r\n\t\t&lt;/nonFilteredFileExtensions&gt;\r\n\t&lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nThis will prevent binary files filtering.","title":"Excel Downloading in JAVA servlet giving error file is not matching","body":"<p>I faced same issue few days back, and it got resolved after adding <code>&lt;nonFilteredFileExtensions&gt;</code> in maven dependency as below:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.3.1&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n        &lt;nonFilteredFileExtensions&gt;\n            &lt;nonFilteredFileExtension&gt;xls&lt;/nonFilteredFileExtension&gt;\n            &lt;nonFilteredFileExtension&gt;xlsx&lt;/nonFilteredFileExtension&gt;\n        &lt;/nonFilteredFileExtensions&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>This will prevent binary files filtering.</p>\n"}],"owner":{"account_id":8816334,"reputation":17,"user_id":6587606,"display_name":"Shilpa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1575,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1697061288,"creation_date":1469769117,"question_id":38650925,"body_markdown":"\r\n\t/**\r\n\t * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)\r\n\t */\r\n\tprotected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tSystem.out.println(&quot;Hi inside download file :&quot;);\r\n\t\tresponse.setContentType(&quot;application/vnd.ms-excel&quot;);\r\n\t\tPrintWriter out = response.getWriter();\r\n\t\tString filename = &quot;ResetPassword.xlsx&quot;;\r\n\t\tInputStream is = null;\r\n\t\t//is = this.getClass().getClassLoader().getResourceAsStream(&quot;LoginConfigurations.xlsx&quot;);\r\n\t\t//System.out.println(&quot;InputStream :&quot;+is);\r\n\t\tString filepath = &quot;E:\\\\SPACE_OM_01.02\\\\SPACE-OM_1.0-V01.02\\\\WebContent\\\\Data\\\\&quot;;\r\n\t\tresponse.setContentType(&quot;application/octet-stream&quot;);\r\n\t\tresponse.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=\\&quot;&quot;\t+ filename + &quot;\\&quot;&quot;);\r\n\r\n\t\t// use inline if you want to view the content in browser, helpful for\r\n\t\t// pdf file\r\n\t\tresponse.setHeader(&quot;Content-Disposition&quot;,&quot;inline; filename=\\&quot;&quot; +filename + &quot;\\&quot;&quot;);\r\n\t\tFileInputStream fileInputStream = new FileInputStream(filepath+ filename);\r\n\t\t/*BufferedReader br = new BufferedReader(new InputStreamReader(is));\r\n\r\n\t\t\tint line;\r\n\t\t\tSystem.out.println(&quot;Buffer Reader length :&quot;+br.read());\r\n\t\t\tStringBuilder sb = new StringBuilder();\r\n\t\t\twhile ((line = br.read()) != -1) {\r\n\t\t\t\t//sb.append(line);\r\n\t\t\t\tout.write(line);\r\n\t\t\t}\r\n\t\t\tbr.close();*/\r\n\t\tint line;\r\n\t\tSystem.out.println(&quot;Buffer Reader length :&quot;+fileInputStream.read());\r\n\t\t//StringBuilder sb = new StringBuilder();\r\n\t\twhile ((line = fileInputStream.read()) != -1) {\r\n\t\t\t//sb.append(line);\r\n\t\t\tout.write(line);\r\n\t\t}\r\n\t\tfileInputStream.close();\r\n\t\tout.close();\r\n\t}\r\n\r\n\t/**\r\n\t * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)\r\n\t */\r\n\tprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tdoGet(request, response);\r\n\t}\r\nI am trying to download the excel file with extension .xlsx using button click after clicking download button file is downloading when i am trying to open that download file its giving error like Excel file cannot open because the file format or file extensions is not valid. Please help me in solving this problem. Thanks in advance.","title":"Excel Downloading in JAVA servlet giving error file is not matching","body":"<pre><code>/**\n * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)\n */\nprotected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n    // TODO Auto-generated method stub\n    System.out.println(\"Hi inside download file :\");\n    response.setContentType(\"application/vnd.ms-excel\");\n    PrintWriter out = response.getWriter();\n    String filename = \"ResetPassword.xlsx\";\n    InputStream is = null;\n    //is = this.getClass().getClassLoader().getResourceAsStream(\"LoginConfigurations.xlsx\");\n    //System.out.println(\"InputStream :\"+is);\n    String filepath = \"E:\\\\SPACE_OM_01.02\\\\SPACE-OM_1.0-V01.02\\\\WebContent\\\\Data\\\\\";\n    response.setContentType(\"application/octet-stream\");\n    response.setHeader(\"Content-Disposition\", \"attachment; filename=\\\"\" + filename + \"\\\"\");\n\n    // use inline if you want to view the content in browser, helpful for\n    // pdf file\n    response.setHeader(\"Content-Disposition\",\"inline; filename=\\\"\" +filename + \"\\\"\");\n    FileInputStream fileInputStream = new FileInputStream(filepath+ filename);\n    /*BufferedReader br = new BufferedReader(new InputStreamReader(is));\n\n        int line;\n        System.out.println(\"Buffer Reader length :\"+br.read());\n        StringBuilder sb = new StringBuilder();\n        while ((line = br.read()) != -1) {\n            //sb.append(line);\n            out.write(line);\n        }\n        br.close();*/\n    int line;\n    System.out.println(\"Buffer Reader length :\"+fileInputStream.read());\n    //StringBuilder sb = new StringBuilder();\n    while ((line = fileInputStream.read()) != -1) {\n        //sb.append(line);\n        out.write(line);\n    }\n    fileInputStream.close();\n    out.close();\n}\n\n/**\n * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)\n */\nprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n    // TODO Auto-generated method stub\n    doGet(request, response);\n}\n</code></pre>\n\n<p>I am trying to download the excel file with extension .xlsx using button click after clicking download button file is downloading when i am trying to open that download file its giving error like Excel file cannot open because the file format or file extensions is not valid. Please help me in solving this problem. Thanks in advance.</p>\n"},{"tags":["java","regex","replace"],"comments":[{"owner":{"account_id":7089168,"reputation":157118,"user_id":5424988,"display_name":"The fourth bird"},"score":0,"creation_date":1545991982,"post_id":53956800,"comment_id":94751416,"body_markdown":"Did you try splitting on a `/`?","body":"Did you try splitting on a <code>&#47;</code>?"},{"owner":{"account_id":13580787,"reputation":115,"user_id":9796892,"display_name":"cuteBrick"},"score":0,"creation_date":1545992185,"post_id":53956800,"comment_id":94751485,"body_markdown":"Like this?`text.split(&quot;/&quot;)[0];`","body":"Like this?<code>text.split(&quot;&#47;&quot;)[0];</code>"},{"owner":{"account_id":121840,"reputation":36551,"user_id":315228,"accept_rate":100,"display_name":"SMA"},"score":0,"creation_date":1545992372,"post_id":53956800,"comment_id":94751557,"body_markdown":"Why would you want to replace? and why would you use `subSequence` instead of `substring` without making use of `toString()`?","body":"Why would you want to replace? and why would you use <code>subSequence</code> instead of <code>substring</code> without making use of <code>toString()</code>?"},{"owner":{"account_id":7089168,"reputation":157118,"user_id":5424988,"display_name":"The fourth bird"},"score":0,"creation_date":1545992862,"post_id":53956800,"comment_id":94751730,"body_markdown":"Yes, split on a `/` and then join the second and the third part again https://ideone.com/NHlFZn","body":"Yes, split on a <code>&#47;</code> and then join the second and the third part again <a href=\"https://ideone.com/NHlFZn\" rel=\"nofollow noreferrer\">ideone.com/NHlFZn</a>"},{"owner":{"account_id":97082,"reputation":375006,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":1,"creation_date":1545992965,"post_id":53956800,"comment_id":94751777,"body_markdown":"Using index and substring is fine (but cumbersome). But `split` ? That&#39;s just a lazy hack here.","body":"Using index and substring is fine (but cumbersome). But <code>split</code> ? That&#39;s just a lazy hack here."}],"answers":[{"tags":[],"owner":{"account_id":97082,"reputation":375006,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1545992205,"creation_date":1545992205,"answer_id":53956881,"question_id":53956800,"body_markdown":"`replace` doesn&#39;t take a regex as parameter but just tries to replace the passed char sequence.\r\n\r\nYou may use `replaceFirst`:\r\n\r\n     return text.replaceFirst(&quot;/.*&quot;, &quot;&quot;);\r\n\r\n(note that there&#39;s nothing to escape and no group is necessary)","title":"Regex to replace everything after a specific symbol? java","body":"<p><code>replace</code> doesn't take a regex as parameter but just tries to replace the passed char sequence.</p>\n\n<p>You may use <code>replaceFirst</code>:</p>\n\n<pre><code> return text.replaceFirst(\"/.*\", \"\");\n</code></pre>\n\n<p>(note that there's nothing to escape and no group is necessary)</p>\n"},{"tags":[],"owner":{"account_id":3618153,"reputation":367,"user_id":3017555,"display_name":"Ganesan Karuppasamy"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1545992485,"creation_date":1545992485,"answer_id":53956941,"question_id":53956800,"body_markdown":"You can try the below code it will replace after first slash,\r\n\r\n     text.replaceAll(&quot;\\\\/[^\\\\/].*&quot;, &quot;&quot;)","title":"Regex to replace everything after a specific symbol? java","body":"<p>You can try the below code it will replace after first slash,</p>\n\n<pre><code> text.replaceAll(\"\\\\/[^\\\\/].*\", \"\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6829777,"reputation":41,"user_id":5254266,"display_name":"Java Learner"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1545998428,"creation_date":1545998428,"answer_id":53958279,"question_id":53956800,"body_markdown":"replace will not work in this case use this .\r\n\r\n    return text.replaceAll(&quot;/.&quot;, &quot;&quot;);","title":"Regex to replace everything after a specific symbol? java","body":"<p>replace will not work in this case use this .</p>\n\n<pre><code>return text.replaceAll(\"/.\", \"\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1496502,"reputation":3708,"user_id":1402301,"accept_rate":68,"display_name":"coolcool1994"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697059224,"creation_date":1697059224,"answer_id":77276456,"question_id":53956800,"body_markdown":"In Kotlin you want something like `string.replace(&quot;/.*&quot;.toRegex(), &quot;&quot;)`","title":"Regex to replace everything after a specific symbol? java","body":"<p>In Kotlin you want something like <code>string.replace(&quot;/.*&quot;.toRegex(), &quot;&quot;)</code></p>\n"}],"owner":{"account_id":13580787,"reputation":115,"user_id":9796892,"display_name":"cuteBrick"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1340,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"accepted_answer_id":53956881,"answer_count":4,"score":-4,"last_activity_date":1697059224,"creation_date":1545991821,"question_id":53956800,"body_markdown":"I have a string in format like &quot;one / two / three&quot; and I need only the first one (before the first foreslash). I tried it like that: \r\n\r\n    if (text.contains(&quot;/&quot;)) {\r\n            int i = text.indexOf(&quot;/&quot;);\r\n            return text.subSequence(0, i).toString();\r\n        }\r\nThis solution works but I think it would be better to write simple `text.replace()` function.\r\nTried this regex `&quot;\\\\/(.*)&quot;` but it didn`t work.\r\n","title":"Regex to replace everything after a specific symbol? java","body":"<p>I have a string in format like \"one / two / three\" and I need only the first one (before the first foreslash). I tried it like that: </p>\n\n<pre><code>if (text.contains(\"/\")) {\n        int i = text.indexOf(\"/\");\n        return text.subSequence(0, i).toString();\n    }\n</code></pre>\n\n<p>This solution works but I think it would be better to write simple <code>text.replace()</code> function.\nTried this regex <code>\"\\\\/(.*)\"</code> but it didn`t work.</p>\n"},{"tags":["java","mysql","spring-boot","hibernate","jpa"],"owner":{"account_id":9016705,"reputation":940,"user_id":6719286,"display_name":"racerX"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697058786,"creation_date":1697058786,"question_id":77276431,"body_markdown":"I am working an a project with Spring JPA. In it, have a Person Entity:\r\n\r\n```\r\n@Data\r\n@Entity(name = &quot;person&quot;)\r\npublic class Person {\r\n  \r\n  @Id\r\n  private UUID id;\r\n  \r\n  @Column\r\n  private String firstName;\r\n\r\n  @Column\r\n  private String lastName;\r\n  \r\n  @ElementCollection(fetch = FetchType.EAGER)\r\n  @CollectionTable(name = &quot;cities_must&quot;, joinColumns = @JoinColumn(name = &quot;person_id&quot;))\r\n  @Column(name = &quot;city&quot;)\r\n  private Set&lt;String&gt; citiesMust;\r\n\r\n  @ElementCollection(fetch = FetchType.EAGER)\r\n  @CollectionTable(name = &quot;cities_optional&quot;, joinColumns = @JoinColumn(name = &quot;person_id&quot;))\r\n  @Column(name = &quot;city&quot;)\r\n  private Set&lt;String&gt; citiesOptional;\r\n\r\n  @Column\r\n  @CreationTimestamp\r\n  private Instant creationTimestamp;\r\n \r\n}\r\n```\r\n\r\nNow, in the Person repository, there already exists this derived query below:\r\n\r\nQUERY1:\r\n```\r\n    @EntityGraph(attributePaths = { &quot;citiesMust&quot;, &quot;citiesOptional&quot;})\r\n    List&lt;Person&gt; findDistinctByCitiesMustContainingAndCitiesOptionalNotContains(String mustCity, String optionalCity);\r\n```\r\n\r\nI now need to create a method in the repository where I need to, in additional to the above logic, group persons by their last name and return the latest person in the group based on creation timestamp. So, not knowing where to start I decided to first see what query hibernate was running for the above derived query, based on which I created the below:\r\n\r\nQUERY2:\r\n```\r\n@Query(\r\nvalue = &quot;&quot;&quot;\r\nselect distinct p1_0.id, p1_0.firstName, p1_0.lastName, p1_0.creation_timestamp, cm1_0.person_id, cm1_0.city, co1_0.person_id, co1_0.city\r\nfrom person p1_0\r\nleft join cities_must cm1_0 on p1_0.id = cm1_0.person_id\r\nleft join cities_optional co1_0 on p1_0.id = co1_0.person_id\r\nwhere ?1 in (select cm2_0.city from cities_must cm2_0 where p1_0.id=cm2_0.person_id)\r\n  and ?2 not in (select co2_0.city from cities_optional co2_0 where p1_0.id=co2_0.person_id)\r\n&quot;&quot;&quot;,\r\nnativeQuery = true\r\n)\r\nList&lt;Person&gt; testQuery(String mustCity, String optionalCity);\r\n```\r\n\r\nMy thought process was that I would simply create the above native query and add the following condition to the above at the end\r\n```\r\nand p1_0.creation_timestamp = (select max(creation_timestamp) from person where lastName = p1_0.lastName)\r\n```\r\n\r\nBut when I run QUERY2 above, hibernate gives the exception, &quot;Unable to evaluate the children renderer expression Method threw &#39;org.hibernate.LazyInitializationException&#39; exception.&quot;. I don&#39;t really know what to change here, because the QUERY2 that I created is based on the actual query hibernate is running against the db for the method in QUERY1.\r\nI want to be able to modify that to a custom query so I can add the additional logic and create the new query I require.","title":"JPA query with join to ElementCollection","body":"<p>I am working an a project with Spring JPA. In it, have a Person Entity:</p>\n<pre><code>@Data\n@Entity(name = &quot;person&quot;)\npublic class Person {\n  \n  @Id\n  private UUID id;\n  \n  @Column\n  private String firstName;\n\n  @Column\n  private String lastName;\n  \n  @ElementCollection(fetch = FetchType.EAGER)\n  @CollectionTable(name = &quot;cities_must&quot;, joinColumns = @JoinColumn(name = &quot;person_id&quot;))\n  @Column(name = &quot;city&quot;)\n  private Set&lt;String&gt; citiesMust;\n\n  @ElementCollection(fetch = FetchType.EAGER)\n  @CollectionTable(name = &quot;cities_optional&quot;, joinColumns = @JoinColumn(name = &quot;person_id&quot;))\n  @Column(name = &quot;city&quot;)\n  private Set&lt;String&gt; citiesOptional;\n\n  @Column\n  @CreationTimestamp\n  private Instant creationTimestamp;\n \n}\n</code></pre>\n<p>Now, in the Person repository, there already exists this derived query below:</p>\n<p>QUERY1:</p>\n<pre><code>    @EntityGraph(attributePaths = { &quot;citiesMust&quot;, &quot;citiesOptional&quot;})\n    List&lt;Person&gt; findDistinctByCitiesMustContainingAndCitiesOptionalNotContains(String mustCity, String optionalCity);\n</code></pre>\n<p>I now need to create a method in the repository where I need to, in additional to the above logic, group persons by their last name and return the latest person in the group based on creation timestamp. So, not knowing where to start I decided to first see what query hibernate was running for the above derived query, based on which I created the below:</p>\n<p>QUERY2:</p>\n<pre><code>@Query(\nvalue = &quot;&quot;&quot;\nselect distinct p1_0.id, p1_0.firstName, p1_0.lastName, p1_0.creation_timestamp, cm1_0.person_id, cm1_0.city, co1_0.person_id, co1_0.city\nfrom person p1_0\nleft join cities_must cm1_0 on p1_0.id = cm1_0.person_id\nleft join cities_optional co1_0 on p1_0.id = co1_0.person_id\nwhere ?1 in (select cm2_0.city from cities_must cm2_0 where p1_0.id=cm2_0.person_id)\n  and ?2 not in (select co2_0.city from cities_optional co2_0 where p1_0.id=co2_0.person_id)\n&quot;&quot;&quot;,\nnativeQuery = true\n)\nList&lt;Person&gt; testQuery(String mustCity, String optionalCity);\n</code></pre>\n<p>My thought process was that I would simply create the above native query and add the following condition to the above at the end</p>\n<pre><code>and p1_0.creation_timestamp = (select max(creation_timestamp) from person where lastName = p1_0.lastName)\n</code></pre>\n<p>But when I run QUERY2 above, hibernate gives the exception, &quot;Unable to evaluate the children renderer expression Method threw 'org.hibernate.LazyInitializationException' exception.&quot;. I don't really know what to change here, because the QUERY2 that I created is based on the actual query hibernate is running against the db for the method in QUERY1.\nI want to be able to modify that to a custom query so I can add the additional logic and create the new query I require.</p>\n"},{"tags":["java","guice"],"owner":{"account_id":321078,"reputation":15468,"user_id":639687,"accept_rate":69,"display_name":"czerny"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697058644,"creation_date":1697058644,"question_id":77276420,"body_markdown":"`Binding` interface contains a method `getProvider()` that should do the conversion to a `Provider`. However most of implementations are based on [`BindingImpl`](https://github.com/google/guice/blob/6.0.0/core/src/com/google/inject/internal/BindingImpl.java#L70) that allows for getting a `Provider` only when an injector is available or when the binding is defined using a provider. Otherwise `UnsupportedOperationException` is throw.\r\n\r\nHow to reliably obtain a `Provider` corresponding to a `Binding` before an injector in created?\r\n\r\nOr more generally how to use a `Binding` element as a source of value in my custom `Provider`?\r\n\r\nContext: A library that I&#39;d like to uses, exposes a Guice [`Module`](https://google.github.io/guice/api-docs/6.0.0/javadoc/com/google/inject/Module.html) through which it integrates with the main app. I&#39;d like to conditionally re-map selected services of that library. Methods of [`Elements`](https://google.github.io/guice/api-docs/6.0.0/javadoc/com/google/inject/spi/Elements.html) class allow to cherry-pick bindings. I&#39;d like to convert a selected [`Binding`](https://google.github.io/guice/api-docs/6.0.0/javadoc/com/google/inject/Binding.html) to a [`Provider`](https://google.github.io/guice/api-docs/6.0.0/javadoc/com/google/inject/Provider.html) so that it can be conditionally use it in my own provider.","title":"How to get a Provider from an Element of type Binding in Guice?","body":"<p><code>Binding</code> interface contains a method <code>getProvider()</code> that should do the conversion to a <code>Provider</code>. However most of implementations are based on <a href=\"https://github.com/google/guice/blob/6.0.0/core/src/com/google/inject/internal/BindingImpl.java#L70\" rel=\"nofollow noreferrer\"><code>BindingImpl</code></a> that allows for getting a <code>Provider</code> only when an injector is available or when the binding is defined using a provider. Otherwise <code>UnsupportedOperationException</code> is throw.</p>\n<p>How to reliably obtain a <code>Provider</code> corresponding to a <code>Binding</code> before an injector in created?</p>\n<p>Or more generally how to use a <code>Binding</code> element as a source of value in my custom <code>Provider</code>?</p>\n<p>Context: A library that I'd like to uses, exposes a Guice <a href=\"https://google.github.io/guice/api-docs/6.0.0/javadoc/com/google/inject/Module.html\" rel=\"nofollow noreferrer\"><code>Module</code></a> through which it integrates with the main app. I'd like to conditionally re-map selected services of that library. Methods of <a href=\"https://google.github.io/guice/api-docs/6.0.0/javadoc/com/google/inject/spi/Elements.html\" rel=\"nofollow noreferrer\"><code>Elements</code></a> class allow to cherry-pick bindings. I'd like to convert a selected <a href=\"https://google.github.io/guice/api-docs/6.0.0/javadoc/com/google/inject/Binding.html\" rel=\"nofollow noreferrer\"><code>Binding</code></a> to a <a href=\"https://google.github.io/guice/api-docs/6.0.0/javadoc/com/google/inject/Provider.html\" rel=\"nofollow noreferrer\"><code>Provider</code></a> so that it can be conditionally use it in my own provider.</p>\n"},{"tags":["java","xpages","lotus-domino"],"answers":[{"tags":[],"owner":{"account_id":412150,"reputation":21391,"user_id":785061,"accept_rate":60,"display_name":"Per Henrik Lausten"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697058607,"creation_date":1697058607,"answer_id":77276415,"question_id":77221662,"body_markdown":"This was caused by two instances of DominoJNA on the server. See discussion on GitHub: https://github.com/klehmann/domino-jna/issues/79","title":"Thread is not enabled for auto GC","body":"<p>This was caused by two instances of DominoJNA on the server. See discussion on GitHub: <a href=\"https://github.com/klehmann/domino-jna/issues/79\" rel=\"nofollow noreferrer\">https://github.com/klehmann/domino-jna/issues/79</a></p>\n"}],"owner":{"account_id":1879268,"reputation":2000,"user_id":1699830,"accept_rate":37,"display_name":"Patrick Kwinten"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77276415,"answer_count":1,"score":1,"last_activity_date":1697058607,"creation_date":1696330684,"question_id":77221662,"body_markdown":"When running in XPages environment:\r\n\r\n    NotesDatabase db = new NotesDatabase(ExtLibUtil.getCurrentSession(), &quot;&quot;, fakenamesPath);\r\n\r\nI get message:\r\n\r\n&gt; HTTP JVM: java.lang.IllegalStateException: Thread is not enabled for\r\n&gt; auto GC. Either run your code via NotesGC.runWithAutoGC(Callable) or\r\n&gt; via try-with-resources on the object returned by NotesGC.initThread().\r\n\r\nOn https://www.mindoo.com/web/blog.nsf/dx/16.01.2017082125KLEAMY.htm?opendocument&amp;comments I read\r\n\r\n&quot;Since they are integrated with the JSF lifecycle, memory management is automatically handled by the plugin. That means that code using the API does not have to be wrapped in NotesGC.runWithAutoGC() blocks to automatically recycle allocated C handles and memory after a HTTP request.&quot;\r\n\r\nI installed version domino-jna-xpages-0.9.48\r\n\r\nI am trying to run this sample application:\r\nhttp://linqed.eu/2018/10/02/query-domino-data-and-faceted-search-with-domino-jna-part-1/\r\n\r\nAnyone a suggestion what is wrong/missing in my setup?","title":"Thread is not enabled for auto GC","body":"<p>When running in XPages environment:</p>\n<pre><code>NotesDatabase db = new NotesDatabase(ExtLibUtil.getCurrentSession(), &quot;&quot;, fakenamesPath);\n</code></pre>\n<p>I get message:</p>\n<blockquote>\n<p>HTTP JVM: java.lang.IllegalStateException: Thread is not enabled for\nauto GC. Either run your code via NotesGC.runWithAutoGC(Callable) or\nvia try-with-resources on the object returned by NotesGC.initThread().</p>\n</blockquote>\n<p>On <a href=\"https://www.mindoo.com/web/blog.nsf/dx/16.01.2017082125KLEAMY.htm?opendocument&amp;comments\" rel=\"nofollow noreferrer\">https://www.mindoo.com/web/blog.nsf/dx/16.01.2017082125KLEAMY.htm?opendocument&amp;comments</a> I read</p>\n<p>&quot;Since they are integrated with the JSF lifecycle, memory management is automatically handled by the plugin. That means that code using the API does not have to be wrapped in NotesGC.runWithAutoGC() blocks to automatically recycle allocated C handles and memory after a HTTP request.&quot;</p>\n<p>I installed version domino-jna-xpages-0.9.48</p>\n<p>I am trying to run this sample application:\n<a href=\"http://linqed.eu/2018/10/02/query-domino-data-and-faceted-search-with-domino-jna-part-1/\" rel=\"nofollow noreferrer\">http://linqed.eu/2018/10/02/query-domino-data-and-faceted-search-with-domino-jna-part-1/</a></p>\n<p>Anyone a suggestion what is wrong/missing in my setup?</p>\n"},{"tags":["java","android","json","string"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1485147892,"post_id":41799519,"comment_id":70787255,"body_markdown":"Please include a [mcve].","body":"Please include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":4614809,"reputation":3662,"user_id":3741698,"accept_rate":96,"display_name":"David Hackro"},"score":1,"creation_date":1485148488,"post_id":41799519,"comment_id":70787387,"body_markdown":"please see this quuestion before http://stackoverflow.com/questions/9069799/android-json-charset-utf-8-problems","body":"please see this quuestion before <a href=\"http://stackoverflow.com/questions/9069799/android-json-charset-utf-8-problems\" title=\"android json charset utf 8 problems\">stackoverflow.com/questions/9069799/&hellip;</a>"},{"owner":{"account_id":2794710,"reputation":608,"user_id":2404132,"display_name":"Umais Gillani"},"score":0,"creation_date":1485148504,"post_id":41799519,"comment_id":70787392,"body_markdown":"Which api you are using for parsing ?","body":"Which api you are using for parsing ?"},{"owner":{"account_id":10085326,"reputation":1624,"user_id":7454155,"accept_rate":33,"display_name":"Raj Suvariya"},"score":0,"creation_date":1485150616,"post_id":41799519,"comment_id":70788064,"body_markdown":"Hackerrank codechecker api","body":"Hackerrank codechecker api"}],"answers":[{"tags":[],"owner":{"account_id":9558279,"reputation":788,"user_id":7328984,"accept_rate":0,"display_name":"android_jain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485148336,"creation_date":1485148336,"answer_id":41799599,"question_id":41799519,"body_markdown":"use Unicode for &quot;&quot; or  for every special character or you can use /also for spatial character for &quot; you can use  / for every character \r\nor tack help from hare\r\nhttps://stackoverflow.com/questions/17612778/how-to-define-special-characters-in-string-array-java","title":"How to parse JSON String containing special characters?","body":"<p>use Unicode for \"\" or  for every special character or you can use /also for spatial character for \" you can use  / for every character \nor tack help from hare\n<a href=\"https://stackoverflow.com/questions/17612778/how-to-define-special-characters-in-string-array-java\">How to define special characters in string array java</a></p>\n"}],"owner":{"account_id":10085326,"reputation":1624,"user_id":7454155,"accept_rate":33,"display_name":"Raj Suvariya"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8470,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697058350,"creation_date":1485147785,"question_id":41799519,"body_markdown":"I am using hackerrank.com API for the code compilation. So when user enters code with compilation error the JSON response is like this\r\n\r\n    {\r\n      &quot;result&quot;: {\r\n        &quot;callback_url&quot;: &quot;&quot;,\r\n        &quot;censored_compile_message&quot;: &quot;&quot;,\r\n        &quot;codechecker_hash&quot;: &quot;something&quot;,\r\n        &quot;compile_command&quot;: &quot;/usr/lib/jvm/java-7-sun/bin/javac -encoding UTF-8  -classpath &#39;*:/usr/share/java/json-simple-1.1.1.jar:/usr/share/java/junixsocket.jar:/usr/share/java/abacus-util-jdk7.jar&#39; AddNumbers.java 1&gt; compile.err 2&gt;&amp;1&quot;,\r\n        &quot;compilemessage&quot;: &quot;AddNumbers.java:1: error: &#39;;&#39; expected\\nimport java.util.Scanner;   class AddNumbers {    public static void main(String args[])    {       int x, y, z             Scanner in = new Scanner(System.in);       x = in.nextInt();       y = in.nextInt();      z = x + y;       System.out.println(z);    } }\\n                                                                                                               ^\\n1 error\\n&quot;,\r\n        &quot;error_code&quot;: 0,\r\n        &quot;hash&quot;: &quot;something&quot;,\r\n        &quot;loopback&quot;: null,\r\n        &quot;memory&quot;: null,\r\n        &quot;message&quot;: null,\r\n        &quot;response_s3_path&quot;: &quot;something&quot;,\r\n        &quot;result&quot;: 255,\r\n        &quot;run_command&quot;: &quot;&quot;,\r\n        &quot;server&quot;: &quot;something&quot;,\r\n        &quot;signal&quot;: null,\r\n        &quot;stderr&quot;: null,\r\n        &quot;stdout&quot;: null,\r\n        &quot;time&quot;: null\r\n      }\r\n    }\r\n\r\nIn this JSON &quot;compilemessage&quot; contains special escape characters like `&#39;&#39; &quot;&quot; ;` etc. so how to parse this string so that the characters remains as it is.\r\n\r\nWhen I tried to parse with just normal \r\n\r\n&gt; jsonobject.getString(&quot;compilemessage&quot;)\r\n\r\nthen it converts it into some random character as shown in the picture\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QQLcC.png","title":"How to parse JSON String containing special characters?","body":"<p>I am using hackerrank.com API for the code compilation. So when user enters code with compilation error the JSON response is like this</p>\n\n<pre><code>{\n  \"result\": {\n    \"callback_url\": \"\",\n    \"censored_compile_message\": \"\",\n    \"codechecker_hash\": \"something\",\n    \"compile_command\": \"/usr/lib/jvm/java-7-sun/bin/javac -encoding UTF-8  -classpath '*:/usr/share/java/json-simple-1.1.1.jar:/usr/share/java/junixsocket.jar:/usr/share/java/abacus-util-jdk7.jar' AddNumbers.java 1&gt; compile.err 2&gt;&amp;1\",\n    \"compilemessage\": \"AddNumbers.java:1: error: ';' expected\\nimport java.util.Scanner;   class AddNumbers {    public static void main(String args[])    {       int x, y, z             Scanner in = new Scanner(System.in);       x = in.nextInt();       y = in.nextInt();      z = x + y;       System.out.println(z);    } }\\n                                                                                                               ^\\n1 error\\n\",\n    \"error_code\": 0,\n    \"hash\": \"something\",\n    \"loopback\": null,\n    \"memory\": null,\n    \"message\": null,\n    \"response_s3_path\": \"something\",\n    \"result\": 255,\n    \"run_command\": \"\",\n    \"server\": \"something\",\n    \"signal\": null,\n    \"stderr\": null,\n    \"stdout\": null,\n    \"time\": null\n  }\n}\n</code></pre>\n\n<p>In this JSON \"compilemessage\" contains special escape characters like <code>'' \"\" ;</code> etc. so how to parse this string so that the characters remains as it is.</p>\n\n<p>When I tried to parse with just normal </p>\n\n<blockquote>\n  <p>jsonobject.getString(\"compilemessage\")</p>\n</blockquote>\n\n<p>then it converts it into some random character as shown in the picture</p>\n\n<p><a href=\"https://i.stack.imgur.com/QQLcC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QQLcC.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","selenium-webdriver","sendkeys"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1697057450,"post_id":77276328,"comment_id":136233186,"body_markdown":"*WHY* is it not working? Whatever the answer is, changing the way you iterate from 1 to 10 isn&#39;t going to make a difference.","body":"<i>WHY</i> is it not working? Whatever the answer is, changing the way you iterate from 1 to 10 isn&#39;t going to make a difference."}],"answers":[{"tags":[],"owner":{"account_id":24412628,"reputation":1,"user_id":22725324,"display_name":"Vitor Santos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697058097,"creation_date":1697058097,"answer_id":77276378,"question_id":77276328,"body_markdown":"* Maybe you should to include some delay in your code like  \r\n`TimeUnit.SECONDS.sleep(1);`\r\n\r\nor \r\n\r\n```    public static void wait(int ms)\r\n{\r\n    try\r\n    {\r\n        Thread.sleep(ms);\r\n    }\r\n    catch(InterruptedException ex)\r\n    {\r\n        Thread.currentThread().interrupt();\r\n    }\r\n}\r\n```\r\n\r\nTry increasing step by step, starting por 0.1 s \r\n\r\n","title":"Java - SendKeys multiple times (Keys.ARROW_RIGHT)","body":"<ul>\n<li>Maybe you should to include some delay in your code like<br />\n<code>TimeUnit.SECONDS.sleep(1);</code></li>\n</ul>\n<p>or</p>\n<pre><code>{\n    try\n    {\n        Thread.sleep(ms);\n    }\n    catch(InterruptedException ex)\n    {\n        Thread.currentThread().interrupt();\n    }\n}\n</code></pre>\n<p>Try increasing step by step, starting por 0.1 s</p>\n"}],"owner":{"account_id":11307943,"reputation":527,"user_id":8291902,"display_name":"nosequeweaponer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1697058097,"creation_date":1697057363,"question_id":77276328,"body_markdown":"Hi people: I&#39;m trying o automate (Selenium with Java) a method that moves from a row to another (10 times) with the sendKeys. I tried with for cicle, but it&#39;s not working:\r\n\r\n        public void moveToNextRow() {\r\n           for (int i = 0; i &lt; 10; i++) {\r\n           this.myPage.FirstRow().sendKeys(Keys.ARROW_RIGHT);\r\n        }\r\n\r\nThe other way that I tried was with IntStream, but also it&#39;s not working.\r\n\r\n        public void moveToNextRow() {\r\n           IntStream.iterate(1, n -&gt; n + 1).limit(10).forEach(number -&gt; \r\n\t\t   this.myPage.FirstRow().sendKeys(Keys.ARROW_RIGHT));\r\n        }\r\n\r\nCan anybody help me with that?","title":"Java - SendKeys multiple times (Keys.ARROW_RIGHT)","body":"<p>Hi people: I'm trying o automate (Selenium with Java) a method that moves from a row to another (10 times) with the sendKeys. I tried with for cicle, but it's not working:</p>\n<pre><code>    public void moveToNextRow() {\n       for (int i = 0; i &lt; 10; i++) {\n       this.myPage.FirstRow().sendKeys(Keys.ARROW_RIGHT);\n    }\n</code></pre>\n<p>The other way that I tried was with IntStream, but also it's not working.</p>\n<pre><code>    public void moveToNextRow() {\n       IntStream.iterate(1, n -&gt; n + 1).limit(10).forEach(number -&gt; \n       this.myPage.FirstRow().sendKeys(Keys.ARROW_RIGHT));\n    }\n</code></pre>\n<p>Can anybody help me with that?</p>\n"},{"tags":["java","android","database","algorithm","sqlite"],"answers":[{"tags":[],"owner":{"account_id":14535244,"reputation":161554,"user_id":10498828,"display_name":"forpas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555800650,"creation_date":1555800650,"answer_id":55778426,"question_id":55778351,"body_markdown":"I guess you want to add the value of `point` to the existing value of `DatabaseFıelds.SUBJECT_PROGRESS`, right? You can do it like this:\r\n\r\n    &quot;UPDATE &quot; + DatabaseFıelds.TABLE_NAME + \r\n    &quot; SET &quot; + DatabaseFıelds.SUBJECT_PROGRESS + &quot; = &quot;  + \r\n    DatabaseFıelds.SUBJECT_PROGRESS + &quot; + &quot; + point + \r\n    &quot; WHERE &quot; + DatabaseFıelds.SUBJECT_ID + &quot; = &quot; + id;","title":"Sqlite update operations can I add value existing value?","body":"<p>I guess you want to add the value of <code>point</code> to the existing value of <code>DatabaseFıelds.SUBJECT_PROGRESS</code>, right? You can do it like this:</p>\n\n<pre><code>\"UPDATE \" + DatabaseFıelds.TABLE_NAME + \n\" SET \" + DatabaseFıelds.SUBJECT_PROGRESS + \" = \"  + \nDatabaseFıelds.SUBJECT_PROGRESS + \" + \" + point + \n\" WHERE \" + DatabaseFıelds.SUBJECT_ID + \" = \" + id;\n</code></pre>\n"}],"owner":{"account_id":12901347,"reputation":1,"user_id":9330069,"display_name":"Abdullah Sevmez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697057972,"creation_date":1555799984,"question_id":55778351,"body_markdown":"    &quot;UPDATE &quot; + DatabaseFıelds.TABLE_NAME + \r\n    &quot; SET &quot; + DatabaseFıelds.SUBJECT_PROGRESS + &quot; = &quot; + \r\n    point + &quot; WHERE &quot; + DatabaseFıelds.SUBJECT_ID + &quot; = &quot; + id; \r\n\r\nthis query updates my value, but I want it to add to existing value. How can I fix this problem ?","title":"Sqlite update operations can I add value existing value?","body":"<pre><code>\"UPDATE \" + DatabaseFıelds.TABLE_NAME + \n\" SET \" + DatabaseFıelds.SUBJECT_PROGRESS + \" = \" + \npoint + \" WHERE \" + DatabaseFıelds.SUBJECT_ID + \" = \" + id; \n</code></pre>\n\n<p>this query updates my value, but I want it to add to existing value. How can I fix this problem ?</p>\n"},{"tags":["java","eclipse","package","com.sun.net.httpserver"],"answers":[{"tags":[],"owner":{"account_id":3159259,"reputation":109665,"user_id":2670892,"display_name":"greg-449"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1671383508,"creation_date":1671374458,"answer_id":74842232,"question_id":74842129,"body_markdown":"You have a `module-info.java` so you are using Java modules. Consequently you need to say that you are using the `jdk.httpserver` module which contains `com.sun.net.httpserver.HttpServer`.\r\n\r\nYou do that by adding the line:\r\n```\r\n  requires jdk.httpserver;\r\n```\r\nto your module-info.java. So something like:\r\n```\r\nmodule modulename\r\n{\r\n  requires jdk.httpserver;\r\n}\r\n```\r\nwhere `modulename` is the name of your module.\r\n\r\nAlternatively delete the `module-info.java` file to stop using the module system.","title":"The package com.sun is not accessible. Java in Eclipse. Classic Problem, but nothing works for me","body":"<p>You have a <code>module-info.java</code> so you are using Java modules. Consequently you need to say that you are using the <code>jdk.httpserver</code> module which contains <code>com.sun.net.httpserver.HttpServer</code>.</p>\n<p>You do that by adding the line:</p>\n<pre><code>  requires jdk.httpserver;\n</code></pre>\n<p>to your module-info.java. So something like:</p>\n<pre><code>module modulename\n{\n  requires jdk.httpserver;\n}\n</code></pre>\n<p>where <code>modulename</code> is the name of your module.</p>\n<p>Alternatively delete the <code>module-info.java</code> file to stop using the module system.</p>\n"}],"owner":{"account_id":27289999,"reputation":1,"user_id":20808572,"display_name":"SherlockJoe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":876,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1697057719,"creation_date":1671373604,"question_id":74842129,"body_markdown":"Im trying to use the HttpServer Class from com.sun package but i can&#39;t import it. It keeps saying: &quot;The package com.sun is not accessible.&quot;\r\n\r\n\r\nI&#39;ve tried every solution i could find in other questions about this topic. I&#39;ve added a rule to have access to it to my libraries. I changed my JDK to another installed JDK17. I don&#39;t know what to do anymore. It&#39;s for my college homework, so it would be cool to get it running.\r\n\r\nDoes someone have a clue?\r\n\r\nmy code problem:\r\n![my code problem](https://i.stack.imgur.com/RDDAN.png)\r\n\r\nthe access rule:\r\n![the access rule](https://i.stack.imgur.com/ou1iJ.png)\r\n\r\nmy current used jdk:\r\n![my current used jdk](https://i.stack.imgur.com/yiYws.png)","title":"The package com.sun is not accessible. Java in Eclipse. Classic Problem, but nothing works for me","body":"<p>Im trying to use the HttpServer Class from com.sun package but i can't import it. It keeps saying: &quot;The package com.sun is not accessible.&quot;</p>\n<p>I've tried every solution i could find in other questions about this topic. I've added a rule to have access to it to my libraries. I changed my JDK to another installed JDK17. I don't know what to do anymore. It's for my college homework, so it would be cool to get it running.</p>\n<p>Does someone have a clue?</p>\n<p>my code problem:\n<img src=\"https://i.stack.imgur.com/RDDAN.png\" alt=\"my code problem\" /></p>\n<p>the access rule:\n<img src=\"https://i.stack.imgur.com/ou1iJ.png\" alt=\"the access rule\" /></p>\n<p>my current used jdk:\n<img src=\"https://i.stack.imgur.com/yiYws.png\" alt=\"my current used jdk\" /></p>\n"},{"tags":["java","arrays","object","reference","nullpointerexception"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1697055226,"post_id":77276027,"comment_id":136232859,"body_markdown":"Once there are no references to an object, it will eventually be garbage collected. So if that array had the only reference to your object, then yes.","body":"Once there are no references to an object, it will eventually be garbage collected. So if that array had the only reference to your object, then yes."},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1697058336,"post_id":77276027,"comment_id":136233318,"body_markdown":"Your question is somewhat ambiguous.  Do you want the _reference_ to be removed from memory, OR are you talking about the object the reference points to? What is your reason for wanting to control this?  This may be an [XY Problem](http://xyproblem.info)","body":"Your question is somewhat ambiguous.  Do you want the <i>reference</i> to be removed from memory, OR are you talking about the object the reference points to? What is your reason for wanting to control this?  This may be an <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problem</a>"}],"answers":[{"tags":[],"owner":{"account_id":29456424,"reputation":11,"user_id":22572198,"display_name":"Himanshu Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697057630,"creation_date":1697057206,"answer_id":77276318,"question_id":77276027,"body_markdown":"If the object variable you set to null, and no other object variable is referencing to that object any more than it will be picked up by garbage collector in jvm at some point, but we don&#39;t have to worry about it.\r\n\r\nRefer to this question:\r\n\r\nhttps://stackoverflow.com/questions/60930083/how-does-garbage-collection-identify-orphaned-objects","title":"Does setting an object reference equal to null in an array of references, delete it completely from the memory in java? If not, then how?","body":"<p>If the object variable you set to null, and no other object variable is referencing to that object any more than it will be picked up by garbage collector in jvm at some point, but we don't have to worry about it.</p>\n<p>Refer to this question:</p>\n<p><a href=\"https://stackoverflow.com/questions/60930083/how-does-garbage-collection-identify-orphaned-objects\">How does Garbage Collection identify orphaned objects?</a></p>\n"}],"owner":{"account_id":27432373,"reputation":1,"user_id":20928848,"display_name":"Shashwat Malasi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1697065190,"answer_count":1,"score":-2,"last_activity_date":1697057630,"creation_date":1697053726,"question_id":77276027,"body_markdown":"How can I delete an object reference completely from an array of references from the memory in Java? I was setting it&#39;s value to null but I am not sure of how things are working under the hood.\r\n\r\nI tried to iterate through the array using for loop to reach to the specific index from where I had to delete the object reference and then shift all the other references to the left by one position each. ","title":"Does setting an object reference equal to null in an array of references, delete it completely from the memory in java? If not, then how?","body":"<p>How can I delete an object reference completely from an array of references from the memory in Java? I was setting it's value to null but I am not sure of how things are working under the hood.</p>\n<p>I tried to iterate through the array using for loop to reach to the specific index from where I had to delete the object reference and then shift all the other references to the left by one position each.</p>\n"},{"tags":["java","javafx","oauth-2.0","oauth","chromium-embedded"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1697064923,"post_id":77276253,"comment_id":136234018,"body_markdown":"That is a warning, then info, not an error, the reason your page isn&#39;t loading could be due to some other reason entirely.","body":"That is a warning, then info, not an error, the reason your page isn&#39;t loading could be due to some other reason entirely."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1697064944,"post_id":77276253,"comment_id":136234021,"body_markdown":"Your code doesn&#39;t look like the code in the working sample app you referred to.  My advice: run the jcefsampleapp unchanged on a Java runtime that uses JavaFX (e.g. Azul Zulu JRE FX).   Then modify the sample app to launch a JavaFX application and display a website in a JCEF component displayed in a JFXPanel (according to [JavaFX/Swing integration](https://docs.oracle.com/javase/8/javafx/interoperability-tutorial/embed-swing.htm)).  Or use JavaFX WebView instead of JCEF.","body":"Your code doesn&#39;t look like the code in the working sample app you referred to.  My advice: run the jcefsampleapp unchanged on a Java runtime that uses JavaFX (e.g. Azul Zulu JRE FX).   Then modify the sample app to launch a JavaFX application and display a website in a JCEF component displayed in a JFXPanel (according to <a href=\"https://docs.oracle.com/javase/8/javafx/interoperability-tutorial/embed-swing.htm\" rel=\"nofollow noreferrer\">JavaFX/Swing integration</a>).  Or use JavaFX WebView instead of JCEF."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1697065608,"post_id":77276253,"comment_id":136234088,"body_markdown":"I don&#39;t know JCEF at all, so this info might be wrong or misleading.  But, if you want to enable Chromium to use Google APIs (which I think is what it is trying to do when it complains about the missing OAuth client ID and secret), then you may be able to acquire and provide them by following the [Chromium API key instructions](https://www.chromium.org/developers/how-tos/api-keys/).  BTW, this is the [source of your warning](https://chromium.googlesource.com/chromium/src/+/master/chrome/browser/signin/account_consistency_mode_manager.cc#73).","body":"I don&#39;t know JCEF at all, so this info might be wrong or misleading.  But, if you want to enable Chromium to use Google APIs (which I think is what it is trying to do when it complains about the missing OAuth client ID and secret), then you may be able to acquire and provide them by following the <a href=\"https://www.chromium.org/developers/how-tos/api-keys/\" rel=\"nofollow noreferrer\">Chromium API key instructions</a>.  BTW, this is the <a href=\"https://chromium.googlesource.com/chromium/src/+/master/chrome/browser/signin/account_consistency_mode_manager.cc#73\" rel=\"nofollow noreferrer\">source of your warning</a>."}],"owner":{"account_id":13462282,"reputation":385,"user_id":10946427,"display_name":"Dmitriy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697056441,"creation_date":1697056441,"question_id":77276253,"body_markdown":"Please tell me, I decided to try the JCEF browser in my javafx program, I implemented a minimal example:\r\n\r\n    CefAppBuilder builder = new CefAppBuilder();\r\n    builder.setInstallDir(new File(&quot;jcef-bundle&quot;)); //Default\r\n    builder.setProgressHandler(new ConsoleProgressHandler()); //Default\r\n    try {app = builder.build();} \r\n    catch (IOException | UnsupportedPlatformException | InterruptedException | CefInitializationException e) {throw new RuntimeException(e);}\r\n    client = app.createClient();\r\n    browser = client.createBrowser(&quot;https://www.google.com/&quot;, false, false);\r\n\r\nI have Windows 7, so I use jcef maven 2022 (version 108.4.13), since the latest version does not run on Windows 7\r\nThe problem is that not a single site opens, not even localhost, but gives the following error:\r\n\r\n    [1011/224739.873:WARNING:account_consistency_mode_manager.cc(70)] Desktop Identity Consistency cannot be enabled as no OAuth client ID and client secret have been configured.\r\n    [1011/224740.180:INFO:CONSOLE(0)] &quot;Error with Permissions-Policy header: Origin trial controlled feature not enabled: &#39;unload&#39;.&quot;, source:  (0)\r\n\r\nTried to run the example https://github.com/jcefmaven/jcefsampleapp and it works well, but why doesn&#39;t it work in my javafx application?\r\n\r\nDoes anyone know how to solve the problem?","title":"JCEF doesn&#39;t load page due to OAuth error","body":"<p>Please tell me, I decided to try the JCEF browser in my javafx program, I implemented a minimal example:</p>\n<pre><code>CefAppBuilder builder = new CefAppBuilder();\nbuilder.setInstallDir(new File(&quot;jcef-bundle&quot;)); //Default\nbuilder.setProgressHandler(new ConsoleProgressHandler()); //Default\ntry {app = builder.build();} \ncatch (IOException | UnsupportedPlatformException | InterruptedException | CefInitializationException e) {throw new RuntimeException(e);}\nclient = app.createClient();\nbrowser = client.createBrowser(&quot;https://www.google.com/&quot;, false, false);\n</code></pre>\n<p>I have Windows 7, so I use jcef maven 2022 (version 108.4.13), since the latest version does not run on Windows 7\nThe problem is that not a single site opens, not even localhost, but gives the following error:</p>\n<pre><code>[1011/224739.873:WARNING:account_consistency_mode_manager.cc(70)] Desktop Identity Consistency cannot be enabled as no OAuth client ID and client secret have been configured.\n[1011/224740.180:INFO:CONSOLE(0)] &quot;Error with Permissions-Policy header: Origin trial controlled feature not enabled: 'unload'.&quot;, source:  (0)\n</code></pre>\n<p>Tried to run the example <a href=\"https://github.com/jcefmaven/jcefsampleapp\" rel=\"nofollow noreferrer\">https://github.com/jcefmaven/jcefsampleapp</a> and it works well, but why doesn't it work in my javafx application?</p>\n<p>Does anyone know how to solve the problem?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9888,"page":129,"page_size":100}
